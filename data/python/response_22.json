[{"tags": ["python", "amazon-web-services", "boto"], "comments": [{"owner": {"reputation": 25935, "user_id": 2430241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41412a40b6ba18ba3e82a887a4f2e0de?s=128&d=identicon&r=PG", "display_name": "Ben Whaley", "link": "https://stackoverflow.com/users/2430241/ben-whaley"}, "edited": false, "score": 1, "creation_date": 1433988513, "post_id": 30769355, "comment_id": 49592461, "body": "Can you share the outbound rules you used on your security group?"}, {"owner": {"reputation": 25935, "user_id": 2430241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41412a40b6ba18ba3e82a887a4f2e0de?s=128&d=identicon&r=PG", "display_name": "Ben Whaley", "link": "https://stackoverflow.com/users/2430241/ben-whaley"}, "edited": false, "score": 0, "creation_date": 1433993540, "post_id": 30769355, "comment_id": 49593603, "body": "Can you also post your user data script?"}, {"owner": {"reputation": 25935, "user_id": 2430241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41412a40b6ba18ba3e82a887a4f2e0de?s=128&d=identicon&r=PG", "display_name": "Ben Whaley", "link": "https://stackoverflow.com/users/2430241/ben-whaley"}, "edited": false, "score": 1, "creation_date": 1433994593, "post_id": 30769355, "comment_id": 49593831, "body": "Also share the errors from the cloud init log"}, {"owner": {"reputation": 39151, "user_id": 2291321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/24a41cddd8faf69e3fbd0a778ba6fedf?s=128&d=identicon&r=PG&f=1", "display_name": "ydaetskcoR", "link": "https://stackoverflow.com/users/2291321/ydaetskcor"}, "edited": false, "score": 0, "creation_date": 1433996104, "post_id": 30769355, "comment_id": 49594213, "body": "I think it just needs 443. I also wouldn&#39;t be quite so worried about outbound traffic unless you don&#39;t think you can trust the application(s) running on your instance to not open connections to bad things."}, {"owner": {"reputation": 8918, "user_id": 1742777, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ff60602db4c570ec0e48b22eb13f6956?s=128&d=identicon&r=PG", "display_name": "Saqib Ali", "link": "https://stackoverflow.com/users/1742777/saqib-ali"}, "edited": false, "score": 0, "creation_date": 1433997823, "post_id": 30769355, "comment_id": 49594701, "body": "I have added the <code>&#47;var&#47;log&#47;cloud-init-ouput.log</code> file in the original post (sensitive data redacted). Unfortunately I cannot post the UserData script itself because it is proprietary."}], "answers": [{"tags": [], "owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1434365812, "creation_date": 1434365812, "answer_id": 30843418, "question_id": 30769355, "link": "https://stackoverflow.com/questions/30769355/why-wont-boto-commands-run-in-userdata-when-outbound-traffic-permissions-are-lo/30843418#30843418", "title": "Why won&#39;t Boto commands run in UserData when outbound traffic permissions are locked down?", "body": "<p>By default, Security Groups in Amazon EC2 are configured with:</p>\n\n<ul>\n<li>No Inbound access</li>\n<li>Full Outbound access</li>\n</ul>\n\n<p><strong>Inbound access</strong> requires the most protection, since this is a vector through which an instance could compromised. Only open the ports that you require, and preferably to a minimal range of IP addresses. For example, port 80 can be opened to the whole Internet, but lock down 22/3389 for SSH/RDP to only IP addresses that you will use.</p>\n\n<p><strong>Outbound access</strong> is generally safe to have open, since it will only work with traffic initiated from the instance itself. If you know the instance will only be used for limited purposes, the protocols and IP address range can be reduced.</p>\n\n<p>If you're not happy with keeping the Outbound rules fully open, then you'll have to discover the protocols and IP addresses that are required to let your app function correctly. </p>\n"}], "owner": {"reputation": 8918, "user_id": 1742777, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ff60602db4c570ec0e48b22eb13f6956?s=128&d=identicon&r=PG", "display_name": "Saqib Ali", "link": "https://stackoverflow.com/users/1742777/saqib-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434365812, "creation_date": 1433980755, "last_edit_date": 1434001186, "question_id": 30769355, "link": "https://stackoverflow.com/questions/30769355/why-wont-boto-commands-run-in-userdata-when-outbound-traffic-permissions-are-lo", "title": "Why won&#39;t Boto commands run in UserData when outbound traffic permissions are locked down?", "body": "<p>I have a UserData script (in python) in an AWS Launch Configuration that\u2019s associated with an AutoScale group. When new (ubuntu) instances are spun up this script is run on them to do whatever setup is needed.</p>\n\n<p>Until now, I had the security groups configured more loosely. Outbound traffic to anywhere on the internet was allowed from these instances. The UserData script was working fine. But I just shut down that outbound rule to increase security. Now that UserData script randomly won\u2019t execute at all or sometimes when it does execute, it fails. I can see this by examining the <code>/var/log/cloud-init-output.log</code> file. Has anyone seen this behavior? Any suggested solutions?</p>\n\n<p>When the script fails, I can tell that it is failing on certain Boto calls that do network discovery such as <code>boto.vpc.VPCConnection().get_all_vpcs()</code>. It seems reasonable that this would fail if the outbound traffic rules prevent it from querying for this information. But what CIDR and port should I add to the security group rules that will allow Boto to do it's thing?</p>\n\n<p>Below is what my Security Group's Egress rules look like when it doesn't work. The IP addresses are sensitive so I have blacked them out.</p>\n\n<p><img src=\"https://i.stack.imgur.com/Mu06B.png\" alt=\"enter image description here\"></p>\n\n<p>Below is what my Security Group's Egress rules look like when it works. As you can see I have allowed it to be open to the entire world. I feel like that's insecure. I want to lock it down.</p>\n\n<p><img src=\"https://i.stack.imgur.com/UAN8K.png\" alt=\"enter image description here\"></p>\n\n<p>You can see the <code>/var/log/cloud-init-output.log</code> file <a href=\"https://gist.github.com/saqib-zmi/e25579328b4e52828edb\" rel=\"nofollow noreferrer\"><strong>here</strong></a> when it fails.</p>\n\n<p>You can see the associated <code>/var/log/cloud-init.log</code> file <a href=\"https://gist.github.com/saqib-zmi/25ec2d0f2c59f99db01b\" rel=\"nofollow noreferrer\"><strong>here</strong></a>.</p>\n"}, {"tags": ["python", "text", "text-mining", "text-extraction"], "comments": [{"owner": {"reputation": 2900, "user_id": 2566965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300de803639f26b633cbf259a95af052?s=128&d=identicon&r=PG", "display_name": "junnytony", "link": "https://stackoverflow.com/users/2566965/junnytony"}, "edited": false, "score": 2, "creation_date": 1433981192, "post_id": 30769347, "comment_id": 49590724, "body": "That could be a good approach.. Depends on size of files"}], "answers": [{"tags": [], "owner": {"reputation": 8680, "user_id": 4013571, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh4.googleusercontent.com/-G_CrKyh2orQ/AAAAAAAAAAI/AAAAAAAAADA/d4aRKztH0r4/photo.jpg?sz=128", "display_name": "Alexander McFarlane", "link": "https://stackoverflow.com/users/4013571/alexander-mcfarlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1433983608, "last_edit_date": 1592644375, "creation_date": 1433983079, "answer_id": 30769678, "question_id": 30769347, "link": "https://stackoverflow.com/questions/30769347/using-python-for-text-analytics/30769678#30769678", "title": "Using python for text analytics", "body": "<h3>Quick &amp; Easy Method</h3>\n<p><a href=\"https://textblob.readthedocs.org/\" rel=\"nofollow noreferrer\"><code>textblob</code></a> is a library for text analysis.</p>\n<p><a href=\"https://textblob.readthedocs.org/en/dev/quickstart.html#get-word-and-noun-phrase-frequencies\" rel=\"nofollow noreferrer\">This part</a> of the docs describes how to you obtain word and noun frequencies e.g.</p>\n<pre><code>from textblob import TextBlob\n\n&gt;&gt;&gt; monty = TextBlob(&quot;We are no longer the Knights who say Ni. &quot;\n...                     &quot;We are now the Knights who say Ekki ekki ekki PTANG.&quot;)\n&gt;&gt;&gt; monty.words.count('ekki', case_sensitive=False)\n3\n</code></pre>\n<h2>Higher Performance, Slower Method</h2>\n<p>If you are looking for high performance and this is a big issue, perhaps try cleaning the file into a list of words with <code>regex</code> and then get frequencies by using <code>Collections</code>:</p>\n<pre><code>from collections import Counter\nwords = ['b','b','the','the','the','c']\n\nprint Counter(words)\nCounter({'the': 3, 'b': 2, 'c': 1})\n</code></pre>\n<h2>Higher Performance Method for a Single Query</h2>\n<p>or for even higher performance for a single non-repeated query <em>(if you are going to query lots of words, store as a <code>Counter</code> object)</em>:</p>\n<pre><code>words.count('the')\n3\n</code></pre>\n<p>If you want even higher performance then use a high performance programming language!</p>\n"}, {"tags": [], "owner": {"reputation": 1415, "user_id": 2233336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9EslJ.png?s=128&g=1", "display_name": "Utsav T", "link": "https://stackoverflow.com/users/2233336/utsav-t"}, "is_accepted": false, "score": 1, "last_activity_date": 1433983383, "creation_date": 1433983383, "answer_id": 30769721, "question_id": 30769347, "link": "https://stackoverflow.com/questions/30769347/using-python-for-text-analytics/30769721#30769721", "title": "Using python for text analytics", "body": "<p>Hashing can also be used for a quick lookup. </p>\n\n<ol>\n<li><p>Read the file and parse the text.</p></li>\n<li><p>Keep storing each unseen(new) word in a hashtable.</p></li>\n<li><p>Finally, check each of your word in your lookup list if it is present in the hashtable</p></li>\n</ol>\n\n<p>Dictionaries in Python are implemented using hash tables. So, it could be a good choice.\nThis could be a starter code - </p>\n\n<pre><code>dictionary  = {}\nlookup_list = [\"word1\",\"word2\",\"word3\"]\nfile_data = []\n\nwith open(\"myfile.txt\",\"r\") as f:\n    file_data = f.read().split()\n\nfor word in file_data:\n    if word not in dictionary.keys():\n        dictionary[word] = 1\n    else:\n        dictionary[word] += 1\n\nf.close()\n\nresult = [i for i in lookup_list if i in dictionary.keys()]\n\nprint result\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4997091, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gqtuLElZbB4/AAAAAAAAAAI/AAAAAAAAAA0/zJDA2gHoJ2U/photo.jpg?sz=128", "display_name": "Ebelechukwu Nwafor", "link": "https://stackoverflow.com/users/4997091/ebelechukwu-nwafor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3428, "favorite_count": 0, "closed_date": 1433992971, "answer_count": 2, "score": 0, "last_activity_date": 1433983608, "creation_date": 1433980734, "question_id": 30769347, "link": "https://stackoverflow.com/questions/30769347/using-python-for-text-analytics", "closed_reason": "Needs more focus", "title": "Using python for text analytics", "body": "<p>I am trying to write a program that searches if a list of words are contained in a text file. I was thinking of using the intersection of two sets to accomplish this. I am  wondering if there is any other efficient way of achieving this?</p>\n"}, {"tags": ["python", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 3192322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/8MALi.png?s=128&g=1", "display_name": "NoahLE", "link": "https://stackoverflow.com/users/3192322/noahle"}, "edited": false, "score": 1, "creation_date": 1433997750, "post_id": 30769389, "comment_id": 49594677, "body": "Such a simple solution, thanks!"}], "tags": [], "owner": {"reputation": 8680, "user_id": 4013571, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh4.googleusercontent.com/-G_CrKyh2orQ/AAAAAAAAAAI/AAAAAAAAADA/d4aRKztH0r4/photo.jpg?sz=128", "display_name": "Alexander McFarlane", "link": "https://stackoverflow.com/users/4013571/alexander-mcfarlane"}, "is_accepted": true, "score": 4, "last_activity_date": 1433981608, "last_edit_date": 1433981608, "creation_date": 1433980984, "answer_id": 30769389, "question_id": 30769298, "link": "https://stackoverflow.com/questions/30769298/keep-children-when-replacing-tag-using-beautifulsoup/30769389#30769389", "title": "Keep children when replacing tag using BeautifulSoup", "body": "<p>Using the <code>.name</code> property works for me:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\ncontent = '&lt;form&gt;&lt;input type=\"text\"/&gt;&lt;input type=\"text\"/&gt;&lt;/form&gt;'\nsoup = BeautifulSoup(content)\n\nform = soup.find('form')\nform.name = 'p'\n\nprint form.prettify()\n&lt;p&gt;\n &lt;input type=\"text\"/&gt;\n &lt;input type=\"text\"/&gt;\n&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 3192322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/8MALi.png?s=128&g=1", "display_name": "NoahLE", "link": "https://stackoverflow.com/users/3192322/noahle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 939, "favorite_count": 0, "closed_date": 1433997849, "accepted_answer_id": 30769389, "answer_count": 1, "score": 2, "last_activity_date": 1433981608, "creation_date": 1433980436, "question_id": 30769298, "link": "https://stackoverflow.com/questions/30769298/keep-children-when-replacing-tag-using-beautifulsoup", "closed_reason": "Duplicate", "title": "Keep children when replacing tag using BeautifulSoup", "body": "<p>I'm trying to replace a form tag without deleting its children. For example, I would like to convert this:</p>\n\n<pre><code>&lt;form&gt;\n    &lt;input type=\"text\"/&gt;\n    &lt;input type=\"text\"/&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>&lt;p&gt;\n    &lt;input type=\"text\"/&gt;\n    &lt;input type=\"text\"/&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>But instead I get:</p>\n\n<pre><code>&lt;p&gt;&lt;/p&gt;\n</code></pre>\n\n<p>This is how I'm trying to do it right now:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\ncontent = '&lt;form&gt;&lt;input type=\"text\"/&gt;&lt;input type=\"text\"/&gt;&lt;/form&gt;'\nsoup = BeautifulSoup(content)\n\nold_form = soup.find('form')\nnew_form = soup.new_tag('p')\n\nold_form.replace_with(new_form)  \nprint soup\n</code></pre>\n\n<p>Thanks in advance for the help!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8918, "user_id": 1742777, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ff60602db4c570ec0e48b22eb13f6956?s=128&d=identicon&r=PG", "display_name": "Saqib Ali", "link": "https://stackoverflow.com/users/1742777/saqib-ali"}, "edited": false, "score": 1, "creation_date": 1433980324, "post_id": 30769238, "comment_id": 49590496, "body": "Really unclear what this user is asking."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4938328"}, "edited": false, "score": 0, "creation_date": 1433980340, "post_id": 30769238, "comment_id": 49590502, "body": "This is not clear. Explain your problem with cleaner examples please."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 1, "creation_date": 1433980419, "post_id": 30769238, "comment_id": 49590522, "body": "C&#39;mon guys, even though the OP&#39;s question was unclearly stated, they want to <b><i>Apply &lt;b&gt;...&lt;/b&gt; formatting to occurrences of wordlist in text</i></b>"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433980871, "post_id": 30769238, "comment_id": 49590642, "body": "Should the program be case sensitive or insensitive?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1433980875, "post_id": 30769238, "comment_id": 49590644, "body": "I&#39;ve reworded the question is a bit, since some people seem to have trouble understanding what the OP is asking."}, {"owner": {"reputation": 6434, "user_id": 356307, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G3ppl.jpg?s=128&g=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/356307/jens"}, "edited": false, "score": 3, "creation_date": 1433981030, "post_id": 30769238, "comment_id": 49590681, "body": "Why do I feel I&#39;m being asked to do people&#39;s homework?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 1, "creation_date": 1433981215, "post_id": 30769238, "comment_id": 49590729, "body": "Jens, that&#39;s perfectly fine up to a point. The OP has shown some effort in getting this presumed homework done, and is now stuck at some point. The initial question was rather worded as a homework exercise as well, that didn&#39;t help."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1433981359, "post_id": 30769238, "comment_id": 49590750, "body": "@GuaravP You&#39;re probably better off creating a list of substrings, with &quot;&lt;b&gt;&quot; and &quot;&lt;/b&gt;&quot; added at the right spots, and <code>join</code>-ing that sublist at the end, than trying to right shift strings."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1433985081, "post_id": 30769238, "comment_id": 49591641, "body": "See my solution. Works fully."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1433985187, "post_id": 30769238, "comment_id": 49591665, "body": "@GauravP: you never need to do arithmetic with indices, like <code>right_shift()</code>. Learn to use a generator, which does <code>yield somestring</code>, then string-join together the results of that iterator: <code>&#39;&#39;.join(word for word in bold_specific_words(bold_words, &#39; .&#39;, a_Speech))</code>"}], "answers": [{"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433981082, "post_id": 30769380, "comment_id": 49590698, "body": "This is case sensitive, so it won&#39;t match <code>&#39;python&#39;</code> with <code>&#39;Python&#39;</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 1, "creation_date": 1433981092, "post_id": 30769380, "comment_id": 49590702, "body": "Not just whitespace and periods, I guess; commas, semi-colons, exclamation marks etc. Word boundaries, overall, which gets you close to using a regular expression."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1433981147, "post_id": 30769380, "comment_id": 49590715, "body": "@Evert: in general yes, in this case the only punctuation in the OP&#39;s text was period."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1433984944, "post_id": 30769380, "comment_id": 49591605, "body": "Totally rewritten, works fully. You can parameterize <code>is_split_char(char, charset=splitchars)</code> as much as you like"}], "tags": [], "owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "is_accepted": false, "score": 0, "last_activity_date": 1433985237, "last_edit_date": 1433985237, "creation_date": 1433980914, "answer_id": 30769380, "question_id": 30769238, "link": "https://stackoverflow.com/questions/30769238/apply-b-b-formatting-to-occurrences-of-wordlist-in-text/30769380#30769380", "title": "Apply &lt;b&gt;...&lt;/b&gt; formatting to occurrences of wordlist in text", "body": "<p>This works fully.\nYou needed to split <em>a_Speech</em> both on whitespace and then on periods, so we write a compound split-function <code>is_split_char()</code> then pass it into <code>itertools.groupby()</code>, which is a pretty neat iterator.</p>\n\n<pre><code>bold_words = set(word.lower() for word in [\"python\", \"R\", \"Julia\"])\n  # faster to use a set than a list to test membership\n\nimport itertools\n\ndef bold_specific_words(bold_words, splitchars, text):\n\"\"\"Generator to split on specified splitchars, and bold words in wordset, case-insensitive. Don't split contiguous blocks of splitchars. Don't discard the split chars, unlike string.split().\"\"\"\n\n  def is_split_char(char, charset=splitchars):\n    return char not in charset\n\n  for is_splitchar, chars in itertools.groupby(text, is_split_char):\n     word = ''.join(chars) # reform our word from the sub-iterators\n     if word.lower() in bold_words:\n         yield '&lt;b&gt;' + word + '&lt;/b&gt;'\n     else:\n         yield word\n\n&gt;&gt;&gt; ''.join(word for word in bold_specific_words(bold_words, ' .', a_Speech))\n'A paragraph about programming languages  ......&lt;b&gt;R&lt;/b&gt; is good for statisticians . &lt;b&gt;Python&lt;/b&gt; is good for programmers . .....'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1565, "user_id": 1221842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iG8B3.png?s=128&g=1", "display_name": "Reishin", "link": "https://stackoverflow.com/users/1221842/reishin"}, "edited": false, "score": 2, "creation_date": 1433982407, "post_id": 30769490, "comment_id": 49591008, "body": "this will match letters inside text, i.e. &quot;&lt;b&gt;R&lt;/b&gt;escue&quot;. With same success we can use <code>replace</code> with less code and more pythonic"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1433986251, "post_id": 30769490, "comment_id": 49591910, "body": "You have to write a compound split-function, and that&#39;s not trivial. Best done as a generator, yielding substrings, instead of explicitly using indices."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "reply_to_user": {"reputation": 1565, "user_id": 1221842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iG8B3.png?s=128&g=1", "display_name": "Reishin", "link": "https://stackoverflow.com/users/1221842/reishin"}, "edited": false, "score": 0, "creation_date": 1433988334, "post_id": 30769490, "comment_id": 49592409, "body": "@Reishin Yes, true (you mean substrings, not just letters, within words). So one&#39;s still stuck with properly finding word boundaries."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "is_accepted": false, "score": 0, "last_activity_date": 1433988292, "last_edit_date": 1433988292, "creation_date": 1433981676, "answer_id": 30769490, "question_id": 30769238, "link": "https://stackoverflow.com/questions/30769238/apply-b-b-formatting-to-occurrences-of-wordlist-in-text/30769490#30769490", "title": "Apply &lt;b&gt;...&lt;/b&gt; formatting to occurrences of wordlist in text", "body": "<p>Something like this may work, creating a list of substrings with the details and appending them at the end:</p>\n\n<pre><code>def function_name(a_speech): \n\n    loc = 0\n    substrings = []\n    for word in list_of_words:\n        if word in a_speech[loc:]:\n             currentloc = loc\n             loc = a_speech.index(word, start=currentloc)\n             substrings.append(a_speech[currentloc:loc])\n             substrings.append(\"&lt;b&gt;\")\n             substrings.append(word)\n             substrings.append(\"&lt;/b&gt;\")\n             loc += 3 + len(word) + 4\n\n    return \"\".join(substrings)\n</code></pre>\n\n<p>(note: untested. You may have to figure out some of the last details)</p>\n"}], "owner": {"reputation": 141, "user_id": 3047798, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/5db1ad9441c73e597444fdaf4a588537?s=128&d=identicon&r=PG&f=1", "display_name": "Zebra", "link": "https://stackoverflow.com/users/3047798/zebra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1433988292, "creation_date": 1433980084, "last_edit_date": 1433980898, "question_id": 30769238, "link": "https://stackoverflow.com/questions/30769238/apply-b-b-formatting-to-occurrences-of-wordlist-in-text", "title": "Apply &lt;b&gt;...&lt;/b&gt; formatting to occurrences of wordlist in text", "body": "<p>Given a list of words, I'd like to emphasize (using <code>&lt;b&gt;</code>...<code>&lt;/b&gt;</code> tags) those words in a string. Without using regular expressions.</p>\n\n<p>For example, I have:</p>\n\n<pre><code>list_of_words = [\"python\", \"R\", \"Julia\" ...]\na_Speech = \"A paragraph about programming languages  ......R is good for statisticians . Python is good for programmers . .....\"\n</code></pre>\n\n<p>The output should be</p>\n\n<pre><code>a_Speech = \"A paragraph about programming languages  ......&lt;b&gt;R&lt;/b&gt; is good for statisticians . &lt;b&gt;Python&lt;/b&gt; is good for programmers . .....\"\n</code></pre>\n\n<p>I tried something like:</p>\n\n<pre><code>def right_shift(astr, index, n):\n    # shift by n = 3,n = 4  characters \n\ndef function_name(a_speech): \n\n    for x in list_of_words: \n        if x in a_speech: \n             loc = a_speech.index(x) \n             right_shift(a_speech, loc, 3)\n             a_speech[loc] = \"&lt;b&gt;\"\n\n             right_shift(a_speech, loc+len(x), 4)          \n             a_speech[loc+len(x)] = \"&lt;/b&gt;\n\n    return a_speech\n</code></pre>\n"}, {"tags": ["python", "xml", "beautifulsoup", "fogbugz", "fogbugz-api"], "answers": [{"tags": [], "owner": {"reputation": 8680, "user_id": 4013571, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh4.googleusercontent.com/-G_CrKyh2orQ/AAAAAAAAAAI/AAAAAAAAADA/d4aRKztH0r4/photo.jpg?sz=128", "display_name": "Alexander McFarlane", "link": "https://stackoverflow.com/users/4013571/alexander-mcfarlane"}, "is_accepted": true, "score": 0, "last_activity_date": 1433982438, "creation_date": 1433982438, "answer_id": 30769597, "question_id": 30769213, "link": "https://stackoverflow.com/questions/30769213/how-to-parse-an-xml-file-with-multiple-non-specific-elements/30769597#30769597", "title": "How to parse an XML file with multiple non-specific elements", "body": "<p>From the <a href=\"https://developers.fogbugz.com/?W199#toc_14\" rel=\"nofollow\">docs</a>:</p>\n\n<pre><code>from fogbugz import FogBugz\nimport fbSettings\n\nfb = FogBugz(fbSettings.URL, fbSettings.TOKEN)\n\nresp = fb.search(q='project:\"Python Testing\"',cols='ixBug')\n\n# printing\nfor case in resp.cases.findAll('case'):\n    print case.ixbug.string\n\n# store in a list\nl = [case.ixbug.string for case in resp.cases.findAll('case')]\n</code></pre>\n"}], "owner": {"reputation": 2694, "user_id": 242131, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3c65c5a1524bed985cd8a3e37088cafe?s=128&d=identicon&r=PG", "display_name": "Juice", "link": "https://stackoverflow.com/users/242131/juice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 30769597, "answer_count": 1, "score": 1, "last_activity_date": 1433982438, "creation_date": 1433979962, "question_id": 30769213, "link": "https://stackoverflow.com/questions/30769213/how-to-parse-an-xml-file-with-multiple-non-specific-elements", "title": "How to parse an XML file with multiple non-specific elements", "body": "<p>I'm trying to parse a list of cases that is returned from the Fogbugz API.</p>\n\n<p>Current code:</p>\n\n<pre><code>from fogbugz import FogBugz\nfrom datetime import datetime, timedelta\nimport fbSettings\n\nfb = FogBugz(fbSettings.URL, fbSettings.TOKEN)\n\nresp = fb.search(q='project:\"Python Testing\"',cols='ixBug')\n\nprint resp.cases.case.ixbug.string\n</code></pre>\n\n<p>The problem is that the XML has multiple cases returned simply as case. For instance my test search back the following:</p>\n\n<pre><code>&lt;response&gt;\n&lt;cases count=\"3\"&gt;\n &lt;case ixbug=\"133529\" operations=\"edit,assign,resolve,email,remind\"&gt;\n  &lt;ixbug&gt;\n   133529\n  &lt;/ixbug&gt;\n &lt;/case&gt;\n &lt;case ixbug=\"133528\" operations=\"edit,assign,resolve,email,remind\"&gt;\n  &lt;ixbug&gt;\n   133528\n  &lt;/ixbug&gt;\n &lt;/case&gt;\n &lt;case ixbug=\"133527\" operations=\"edit,assign,resolve,email,remind\"&gt;\n  &lt;ixbug&gt;\n   133527\n  &lt;/ixbug&gt;\n &lt;/case&gt;\n&lt;/cases&gt;\n&lt;/response&gt;\n</code></pre>\n\n<p>But </p>\n\n<pre><code>print resp.cases.case.ixbug.string\n</code></pre>\n\n<p>only returns the first case number in the XML, ignoring the other two. How can I modify my print statement to return all three case numbers?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1433979352, "post_id": 30769105, "comment_id": 49590223, "body": "because the number has to be &gt; 1 to be prime? and range(2, 2) will not enter the for loop"}], "answers": [{"tags": [], "owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "is_accepted": false, "score": 3, "last_activity_date": 1433979862, "last_edit_date": 1433979862, "creation_date": 1433979537, "answer_id": 30769146, "question_id": 30769105, "link": "https://stackoverflow.com/questions/30769105/why-doesnt-this-prime-number-algorithm-say-that-2-is-not-prime/30769146#30769146", "title": "Why doesn&#39;t this prime number algorithm say that 2 is not prime?", "body": "<p>because <code>for i in range(2,2):</code> will never be true / will not execute.</p>\n\n<p>think about it <code>range(start, stop)</code>... the start and stop are the same so it will not enter into the for loop.</p>\n\n<p>2 is a prime number but is the one case where the if statement doesn't need to be computed to determine if its a prime number</p>\n\n<p><a href=\"http://www.pythoncentral.io/pythons-range-function-explained/\" rel=\"nofollow\"><strong>more details about pythons range function</strong></a></p>\n"}, {"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433980284, "post_id": 30769153, "comment_id": 49590490, "body": "To nitpick, <code>range(2, 2)</code> is an empty <code>list</code> in Python 2. In Python 3, it&#39;s a <code>range</code> object that doesn&#39;t describe any terms."}], "tags": [], "owner": {"reputation": 1594, "user_id": 4297051, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TRTp6N_8pBo/AAAAAAAAAAI/AAAAAAAAD-E/yZ3_Hkm-dH4/photo.jpg?sz=128", "display_name": "Jake Griffin", "link": "https://stackoverflow.com/users/4297051/jake-griffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1433979598, "creation_date": 1433979598, "answer_id": 30769153, "question_id": 30769105, "link": "https://stackoverflow.com/questions/30769105/why-doesnt-this-prime-number-algorithm-say-that-2-is-not-prime/30769153#30769153", "title": "Why doesn&#39;t this prime number algorithm say that 2 is not prime?", "body": "<p><code>range(2, 2)</code> is actually an empty list, so the for loop doesn't iterate at all. It just jumps straight to the <code>else</code> clause:</p>\n\n<pre><code>&gt;&gt;&gt; num = 2\n&gt;&gt;&gt; range(2, num)\n[]\n&gt;&gt;&gt; for i in range(2, num):\n...     print \"executing loop\"\n... else:\n...     print \"done!\"\n... \ndone!\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4997027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd0fe7cfbab108a250ade351548d12e?s=128&d=identicon&r=PG&f=1", "display_name": "Nash Shrestha", "link": "https://stackoverflow.com/users/4997027/nash-shrestha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1433980201, "creation_date": 1433979289, "last_edit_date": 1433980201, "question_id": 30769105, "link": "https://stackoverflow.com/questions/30769105/why-doesnt-this-prime-number-algorithm-say-that-2-is-not-prime", "title": "Why doesn&#39;t this prime number algorithm say that 2 is not prime?", "body": "<p>Why is it that when you input 2 into <a href=\"http://www.programiz.com/python-programming/examples/prime-number\" rel=\"nofollow\">this program</a>, it returns \"2 is prime\"? According to the code, if the remainder of the number divided by <code>i</code>, where <code>i</code> is any number from (and including) 2 up to the number, is equal to 0, then the number is not a prime number. But the remainder of 2 divided by 2 is 0, so why does the program say that 2 is a prime number?</p>\n\n<pre><code># Python program to check if the input number is prime or not\n\n# take input from the user\nnum = int(input(\"Enter a number: \"))\n\n# prime numbers are greater than 1\nif num &gt; 1:\n   # check for factors\n   for i in range(2,num):\n       if (num % i) == 0:\n           print(num,\"is not a prime number\")\n           print(i,\"times\",num//i,\"is\",num)\n           break\n   else:\n       print(num,\"is a prime number\")\n\n# if input number is less than\n# or equal to 1, it is not prime\nelse:\n   print(num,\"is not a prime number\")\n</code></pre>\n"}, {"tags": ["python", "python-idle"], "comments": [{"owner": {"reputation": 3285, "user_id": 4286177, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b15ea6889ed8351f27f11368701a9774?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony Dito", "link": "https://stackoverflow.com/users/4286177/anthony-dito"}, "edited": false, "score": 0, "creation_date": 1433979560, "post_id": 30769101, "comment_id": 49590277, "body": "Did you define n outside of any open() function?"}, {"owner": {"reputation": 51, "user_id": 4195869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008c0f7c38933b82888b346819761cbf?s=128&d=identicon&r=PG&f=1", "display_name": "TylerRutherford", "link": "https://stackoverflow.com/users/4195869/tylerrutherford"}, "reply_to_user": {"reputation": 3285, "user_id": 4286177, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b15ea6889ed8351f27f11368701a9774?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony Dito", "link": "https://stackoverflow.com/users/4286177/anthony-dito"}, "edited": false, "score": 0, "creation_date": 1433979854, "post_id": 30769101, "comment_id": 49590356, "body": "this is the entire code. N is only defined in the new() function when you decide weather or not to save the file created. If i defined n in open() then every time the function was called, it would return the same result @AnthonyDito"}, {"owner": {"reputation": 3285, "user_id": 4286177, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b15ea6889ed8351f27f11368701a9774?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony Dito", "link": "https://stackoverflow.com/users/4286177/anthony-dito"}, "edited": false, "score": 1, "creation_date": 1433979934, "post_id": 30769101, "comment_id": 49590385, "body": "Okay, then the answer below would solve your problem."}], "answers": [{"comments": [{"owner": {"reputation": 563, "user_id": 875343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d35cf9b507b87dc8b80f333d730cab1?s=128&d=identicon&r=PG", "display_name": "shortorian", "link": "https://stackoverflow.com/users/875343/shortorian"}, "edited": false, "score": 0, "creation_date": 1433983180, "post_id": 30769157, "comment_id": 49591190, "body": "or, better yet, pass n as an argument to avoid global declarations entirely"}], "tags": [], "owner": {"reputation": 1786, "user_id": 3950533, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5f427f7be7b69ed5fcf890f96418f1d0?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Zhu", "link": "https://stackoverflow.com/users/3950533/henry-zhu"}, "is_accepted": false, "score": 1, "last_activity_date": 1433987034, "last_edit_date": 1433987034, "creation_date": 1433979627, "answer_id": 30769157, "question_id": 30769101, "link": "https://stackoverflow.com/questions/30769101/python-document-writer-error/30769157#30769157", "title": "Python Document Writer Error", "body": "<p>From looking at your code, you never <code>initialized</code> the variable n in the first place.</p>\n\n<p>You need to define n first. </p>\n\n<pre><code>global n\nn = 1\n</code></pre>\n\n<p>I think it would be a better practice to define the variable outside the <code>function</code>, and then reference it with <code>global</code> inside the <code>function</code>.</p>\n\n<pre><code>n = 1\n\ndef open():\n    global n\n</code></pre>\n\n<p>Credit to <em>@dshort</em>:\nYou can pass n in the function to avoid <code>global</code> variables declaration.</p>\n"}], "owner": {"reputation": 51, "user_id": 4195869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008c0f7c38933b82888b346819761cbf?s=128&d=identicon&r=PG&f=1", "display_name": "TylerRutherford", "link": "https://stackoverflow.com/users/4195869/tylerrutherford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1433987034, "creation_date": 1433979232, "question_id": 30769101, "link": "https://stackoverflow.com/questions/30769101/python-document-writer-error", "title": "Python Document Writer Error", "body": "<p>I am creating a simple document writer system in python that runs in the IDLE. This is the source code:</p>\n\n<pre><code>    def openn():\n\n    global n\n\n    if n==1:\n        print(\"[1] - \" + title)\n        print(\"[2] - Exit\")\n\n    option=raw_input()\n\n    if int(option)==1:\n        print(text)\n        print(\"type 'done' when done\")\n\n        do=raw_input()\n\n        if do=='done':\n            run()\n\n        if do!='done':\n            run()\n\n\n    if n==0:\n        print(\"No Saved Documents\")\n\ndef new():\n\n    print(\"Enter a title:\")\n\n    global title\n    title=raw_input()\n\n    print(str(title) + \":\")\n\n    global text\n    text=raw_input()\n\n    print(\"[1] - Save\")\n    print(\"[2] - Trash\")\n\n    global n\n\n    global save\n    save=input()\n\n    if save==1:\n        n=1\n        run()\n\n    if save==2:\n        n=0\n        run()\n\ndef run():\n\n    print(\"[1] - Open a saved document\")\n    print(\"[2] - Create a new saved document\")\n\n    global save\n    save=1\n\n    global choice\n    choice = input()\n\n    if choice==1:\n        openn()\n\n    if choice==2:\n        new()\n\nrun()\n</code></pre>\n\n<p>When I run the program in IDLE for the first time and give the input 1 suggesting I want the program to return \"No Saved Documents\" it returns the following error:</p>\n\n<pre><code>File \"/Users/tylerrutherford/Documents/Python Programs/Operating Systen Project/document_writer.py\", line 5, in openn\n    if n==1:\nNameError: global name 'n' is not defined\n</code></pre>\n\n<p>How can I fix this error? \nThanks in advance!</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 2484693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d8847873693b80e162530c209a60e646?s=128&d=identicon&r=PG", "display_name": "KishB87", "link": "https://stackoverflow.com/users/2484693/kishb87"}, "edited": false, "score": 0, "creation_date": 1433979949, "post_id": 30769149, "comment_id": 49590390, "body": "It doesn&#39;t seem to be making a difference. My list is defined as result. So I tried this  [aa + bb for (aa, bb) in itertools.izip(result[::2], result[1::2])].  Was that the correct approach?"}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 165, "user_id": 2484693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d8847873693b80e162530c209a60e646?s=128&d=identicon&r=PG", "display_name": "KishB87", "link": "https://stackoverflow.com/users/2484693/kishb87"}, "edited": false, "score": 0, "creation_date": 1433980017, "post_id": 30769149, "comment_id": 49590410, "body": "Yup, I suspect that your list is not of tuples at all. See edit to question."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 165, "user_id": 2484693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d8847873693b80e162530c209a60e646?s=128&d=identicon&r=PG", "display_name": "KishB87", "link": "https://stackoverflow.com/users/2484693/kishb87"}, "edited": false, "score": 0, "creation_date": 1433980093, "post_id": 30769149, "comment_id": 49590434, "body": "@KishB87 See the change to your question. Placing parentheses around a Python object does <i>not</i> make it into a tuple: <code>(2)</code> is not a tuple, but <code>(2, )</code> is."}, {"owner": {"reputation": 165, "user_id": 2484693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d8847873693b80e162530c209a60e646?s=128&d=identicon&r=PG", "display_name": "KishB87", "link": "https://stackoverflow.com/users/2484693/kishb87"}, "edited": false, "score": 0, "creation_date": 1433980133, "post_id": 30769149, "comment_id": 49590444, "body": "<code>result = [(119, &#39;Bob&#39;, 1L, 1L), (116, &#39;Twilight Sparkle&#39;, 1L, 1L), (117, &#39;Fluttershy&#39;, 0L, 1L), (118, &#39;Applejack&#39;, 0L, 1L)] </code>  This is my output right now. Are these not tuples?"}, {"owner": {"reputation": 165, "user_id": 2484693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d8847873693b80e162530c209a60e646?s=128&d=identicon&r=PG", "display_name": "KishB87", "link": "https://stackoverflow.com/users/2484693/kishb87"}, "edited": false, "score": 0, "creation_date": 1433980218, "post_id": 30769149, "comment_id": 49590469, "body": "<code>result = [(119, &#39;Bob&#39;, 1L, 1L, 116, &#39;Twilight Sparkle&#39;, 1L, 1L), (117, &#39;Fluttershy&#39;, 0L, 1L, 118, &#39;Applejack&#39;, 0L, 1L)] </code> would be the desired output."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 165, "user_id": 2484693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d8847873693b80e162530c209a60e646?s=128&d=identicon&r=PG", "display_name": "KishB87", "link": "https://stackoverflow.com/users/2484693/kishb87"}, "edited": false, "score": 0, "creation_date": 1433980314, "post_id": 30769149, "comment_id": 49590495, "body": "I updated the question to what I&#39;m getting, and that&#39;s exactly what you&#39;re stating as the desired result. Are you sure you modified my expression from <code>result</code> to <code>a</code> correctly? It works by me. Try writing <code>a = res</code> and then my answer."}], "tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": true, "score": 2, "last_activity_date": 1433979570, "creation_date": 1433979570, "answer_id": 30769149, "question_id": 30769096, "link": "https://stackoverflow.com/questions/30769096/combining-every-two-tuples-within-a-list-in-python/30769149#30769149", "title": "Combining every two tuples within a list in Python", "body": "<p>Say the list is:</p>\n\n<pre><code>a = [(1, 2), (3, 4), (5, 6), (7, 8)]\n</code></pre>\n\n<p>Then using <a href=\"https://docs.python.org/2/library/itertools.html#itertools.izip\" rel=\"nofollow\"><code>itertools.izip</code></a> (for Python2.7),</p>\n\n<pre><code>import itertools\n</code></pre>\n\n<p>you can use:</p>\n\n<pre><code>&gt;&gt; [aa + bb for (aa, bb) in itertools.izip(a[::2], a[1::2])]\n\n[(1, 2, 3, 4), (5, 6, 7, 8)]\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 2484693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d8847873693b80e162530c209a60e646?s=128&d=identicon&r=PG", "display_name": "KishB87", "link": "https://stackoverflow.com/users/2484693/kishb87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 30769149, "answer_count": 1, "score": 0, "last_activity_date": 1433980050, "creation_date": 1433979214, "last_edit_date": 1433980050, "question_id": 30769096, "link": "https://stackoverflow.com/questions/30769096/combining-every-two-tuples-within-a-list-in-python", "title": "Combining every two tuples within a list in Python", "body": "<p>In a list of tuples, I'm trying to convert every consecutive pair to its sum. </p>\n\n<p>E.g., </p>\n\n<pre><code>[(t1, ), (t2, ), (t3, ), (t4, )] --&gt; [(t1, t2) + (t3, t4)] \n</code></pre>\n\n<p>How can this be done?</p>\n\n<hr>\n\n<p>Example:</p>\n\n<pre><code> a = [(119, 'Bob', 1L, 1L), (116, 'Twilight Sparkle', 1L, 1L), (117, 'Fluttershy', 0L, 1L), (118, 'Applejack', 0L, 1L)]\n</code></pre>\n\n<p>Then the output should be:</p>\n\n<pre><code> [(119, 'Bob', 1L, 1L, 116, 'Twilight Sparkle', 1L, 1L), (117, 'Fluttershy', 0L, 1L, 118, 'Applejack', 0L, 1L)]\n</code></pre>\n"}, {"tags": ["python", "django", "python-3.x", "environment-variables", "uwsgi"], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": true, "score": 2, "last_activity_date": 1433979837, "creation_date": 1433979837, "answer_id": 30769190, "question_id": 30769075, "link": "https://stackoverflow.com/questions/30769075/secret-key-error-with-django-using-uwsgi/30769190#30769190", "title": "SECRET_KEY error with Django using uWSGI", "body": "<p>you cannot really do that as your environment is setup in ~/.bashrc locally which uwsgi does not have access to.</p>\n\n<p>you might be able to get away with putting the variable in <code>/etc/rc.local</code> but Im not even sure that will work</p>\n\n<p>you can add them to your file</p>\n\n<pre><code>[uwsgi]\nchdir = /home/ubuntu/my_app\nmodule = my_app.wsgi\n# path below is to virtual environment\nhome = /home/ubuntu/my_app/env \nhttp = :8000\ncheck-static = /var/www/my_app\ndaemonize = /var/log/uwsgi/my_app\n\n# process-related settings\nmaster = true\nprocesses = 10\nvacuum = true\n\n#environment\nenv=SECRET_KEY=\"My Super Secret Key\"\n</code></pre>\n\n<p>or you can configure it directly on the app object in your python file</p>\n\n<pre><code>app = Flask(__name__)\napp.secret_key=\"My Super Secret Key\"\n</code></pre>\n\n<p>which to be frank is probably the way I would do it</p>\n"}, {"tags": [], "owner": {"reputation": 702, "user_id": 398645, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a041b963621886a9d18115eade4d14e7?s=128&d=identicon&r=PG", "display_name": "nachonachoman", "link": "https://stackoverflow.com/users/398645/nachonachoman"}, "is_accepted": false, "score": 0, "last_activity_date": 1534189923, "creation_date": 1534189923, "answer_id": 51829642, "question_id": 30769075, "link": "https://stackoverflow.com/questions/30769075/secret-key-error-with-django-using-uwsgi/51829642#51829642", "title": "SECRET_KEY error with Django using uWSGI", "body": "<p>inside your uwsgi ini config:\n<code>\nenv = SECRETKEY=$(SECRETKEY)\n</code>\n^^^ this will instruct uwsgi to take the SECRETKEY env var and ensure it is set in the forked processes it creates</p>\n"}], "owner": {"reputation": 51553, "user_id": 82474, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f82cba9dbc95e901b4280ab315bbf1?s=128&d=identicon&r=PG", "display_name": "Eric Wilson", "link": "https://stackoverflow.com/users/82474/eric-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3654, "favorite_count": 0, "accepted_answer_id": 30769190, "answer_count": 2, "score": 1, "last_activity_date": 1534189923, "creation_date": 1433979086, "question_id": 30769075, "link": "https://stackoverflow.com/questions/30769075/secret-key-error-with-django-using-uwsgi", "title": "SECRET_KEY error with Django using uWSGI", "body": "<p>I'm trying to run a Python 3 Django application with uWSGI, and having trouble.</p>\n\n<p>I run uWSGI as a daemon:</p>\n\n<pre><code>$ sudo service uwsgi start\n</code></pre>\n\n<p>I'm using a file like the following:\n    [uwsgi]</p>\n\n<pre><code>chdir = /home/ubuntu/my_app\nmodule = my_app.wsgi\n# path below is to virtual environment\nhome = /home/ubuntu/my_app/env \nhttp = :8000\ncheck-static = /var/www/my_app\ndaemonize = /var/log/uwsgi/my_app\n\n# process-related settings\nmaster = true\nprocesses = 10\nvacuum = true\n</code></pre>\n\n<p>And I get the following puzzling error:</p>\n\n<pre><code>mapped 800360 bytes (781 KB) for 10 cores\n*** Operational MODE: preforking ***\nTraceback (most recent call last):\n  File \"./titlematch_api/wsgi.py\", line 14, in &lt;module&gt;\n    application = get_wsgi_application()\n  File \"/home/ubuntu/titlematch_api/env/lib/python3.4/site-packages/django/core/wsgi.py\", line 14, in get_wsgi_application\n    django.setup()\n  File \"/home/ubuntu/titlematch_api/env/lib/python3.4/site-packages/django/__init__.py\", line 17, in setup\n    configure_logging(settings.LOGGING_CONFIG, settings.LOGGING)\n  File \"/home/ubuntu/titlematch_api/env/lib/python3.4/site-packages/django/conf/__init__.py\", line 48, in __getattr__\n    self._setup(name)\n  File \"/home/ubuntu/titlematch_api/env/lib/python3.4/site-packages/django/conf/__init__.py\", line 44, in _setup\n    self._wrapped = Settings(settings_module)\n  File \"/home/ubuntu/titlematch_api/env/lib/python3.4/site-packages/django/conf/__init__.py\", line 92, in __init__\n    mod = importlib.import_module(self.SETTINGS_MODULE)\n  File \"/usr/lib/python3.4/importlib/__init__.py\", line 109, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"./titlematch_api/settings.py\", line 20, in &lt;module&gt;\n    SECRET_KEY = os.environ['SECRET_KEY']\n  File \"/usr/lib/python3.4/os.py\", line 631, in __getitem__\n    raise KeyError(key) from None\nKeyError: 'SECRET_KEY'\n</code></pre>\n\n<p>I have set the <code>SECRET_KEY</code> environment variable, both for my current user, and as root, and I can successfully execute <code>os.environ['SECRET_KEY']</code> in the python shell.</p>\n"}, {"tags": ["python", "multithreading"], "comments": [{"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1433979320, "post_id": 30769059, "comment_id": 49590213, "body": "It&#39;s tough to tell what you are asking, but you almost certainly want to make a class and make each &quot;target&quot; its own instance."}, {"owner": {"reputation": 1, "user_id": 4996981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13a7b25a3b8216fbd3b4f369c9d75928?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.J", "link": "https://stackoverflow.com/users/4996981/mr-j"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1433979723, "post_id": 30769059, "comment_id": 49590324, "body": "That&#39;s what I was thinking."}, {"owner": {"reputation": 1, "user_id": 4996981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13a7b25a3b8216fbd3b4f369c9d75928?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.J", "link": "https://stackoverflow.com/users/4996981/mr-j"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1433980647, "post_id": 30769059, "comment_id": 49590587, "body": "The main thing I need to know is how to get multiple methods running simultaneously and sending data to the serial port. I&#39;m thinking about using multiprocessing and queues, but If there is a simpler solution, I&#39;d rather use that."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 1, "creation_date": 1433980978, "post_id": 30769059, "comment_id": 49590669, "body": "I guess the first question is, do you actually need them running simultaneously? Why not just have a big &quot;game loop&quot; that steps through each target one at a time?"}, {"owner": {"reputation": 1, "user_id": 4996981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13a7b25a3b8216fbd3b4f369c9d75928?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.J", "link": "https://stackoverflow.com/users/4996981/mr-j"}, "reply_to_user": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1433982439, "post_id": 30769059, "comment_id": 49591017, "body": "That might work. The main page for tkSnack says:  &quot;Multiple simultaneous playback and recording threads (system dependent).&quot;  If I can figure that out, it might work. I can&#39;t find any mention of how to implement this feature in the manual, though."}], "owner": {"reputation": 1, "user_id": 4996981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13a7b25a3b8216fbd3b4f369c9d75928?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.J", "link": "https://stackoverflow.com/users/4996981/mr-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1433979006, "creation_date": 1433979006, "question_id": 30769059, "link": "https://stackoverflow.com/questions/30769059/multiple-functions-or-instances-of-the-same-function-in-python", "title": "multiple functions (or instances of the same function?) in Python?", "body": "<p>I'm trying to make an animatronic shooting gallery using 2 arduinos, and maybe a servo controller. Arduino 1 handles all the guns and targets and sends single byte commands to the computer (over com3) for each target hit (max 30 targets).</p>\n\n<p>The Python program needs to receive this information, and play audio and read a file containing motor position and time information, and send out the single-byte motor position codes to Arduino 2 on com4 (max 256 motors), and possibly a servo controller on com 5, but only if I get things working with simple on/off motors/solenoids, and bi-directional motors. </p>\n\n<p>Each target hit may activate a routine lasting several seconds. I have no problem getting python to play one file, and send out motor position data to several motors that are working together, but I can't figure out a way to get multiple characters (each character is a group of motors working synchronously with each other) running through separate routines simultaneously.</p>\n\n<p>The plan was to create a single Bot() class, and make each character an instance of that class, then call a function within them that would run the routine when their respective targets are hit. </p>\n\n<p>I've looked at multithreading, but I'm not sure if it's what I'm looking for. I am fairly new to Python and programming in general, and I don't want to go down the wrong path if there is a simpler solution.</p>\n"}, {"tags": ["python", "qt", "pyside", "enthought", "canopy"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 2758305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ad9ee677b14d3ef3c9621fc8cea8767?s=128&d=identicon&r=PG&f=1", "display_name": "byryepez", "link": "https://stackoverflow.com/users/2758305/byryepez"}, "edited": false, "score": 0, "creation_date": 1434129826, "post_id": 30792365, "comment_id": 49665827, "body": "Thanks a lot for your answer. I don&#39;t have any Qt installation, except the qt package installed using <code>enpkg</code>. I followed your advice, and when I check with Dependency Walker Tools for QtCore.pyd, looks like the problem is related with the API-MS-WIN dlls. Based on <a href=\"http://stackoverflow.com/questions/17023419/win-7-64-bit-dll-problems\">this</a> I check my Visual Studio C++ installation and I have already 2013 version. How can I install this dlls? Thanks for your time..."}], "tags": [], "owner": {"reputation": 5783, "user_id": 395984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d4a16205f08542f455a3f1a15ab2ce?s=128&d=identicon&r=PG", "display_name": "RobinDunn", "link": "https://stackoverflow.com/users/395984/robindunn"}, "is_accepted": true, "score": 1, "last_activity_date": 1434060875, "creation_date": 1434060875, "answer_id": 30792365, "question_id": 30769054, "link": "https://stackoverflow.com/questions/30769054/qt-programs-canopy-gui-ipython-qtconsole-crash-in-enthought-canopy-win7-64bit/30792365#30792365", "title": "Qt programs (Canopy GUI, ipython qtconsole) crash in Enthought Canopy Win7 64Bits", "body": "<p>Usually this error means that PySide is either unable to find the Qt DLLs, or the ones it did find are not the right version and do not have some of the expected symbols.  Do you have some other set of Qt libraries on your system in the PATH somewhere?  You can use the Dependency Walker tool to examine the PySide *.pyd files to see what other DLLs it is searching for and the ones it loads.</p>\n"}], "owner": {"reputation": 3, "user_id": 2758305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ad9ee677b14d3ef3c9621fc8cea8767?s=128&d=identicon&r=PG&f=1", "display_name": "byryepez", "link": "https://stackoverflow.com/users/2758305/byryepez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 1, "accepted_answer_id": 30792365, "answer_count": 1, "score": 0, "last_activity_date": 1434152803, "creation_date": 1433978998, "last_edit_date": 1434152803, "question_id": 30769054, "link": "https://stackoverflow.com/questions/30769054/qt-programs-canopy-gui-ipython-qtconsole-crash-in-enthought-canopy-win7-64bit", "title": "Qt programs (Canopy GUI, ipython qtconsole) crash in Enthought Canopy Win7 64Bits", "body": "<p>I installed Canopy 1.5.2 on Windows 7 - 64 Bits. I performed all steps described on <a href=\"https://support.enthought.com/hc/en-us/articles/204469200-Understanding-a-Canopy-system-wide-installation-common-install-\" rel=\"nofollow\">Enthought web page</a>, but Canopy GUI won't to start. I realized that the problem is something related with Qt, because applications that don't need such programs (like Mayavi, Pylab, etc) work perfectly. When I try to run, p.e. <code>ipython qtconsole</code>, the following appears on console:</p>\n\n<pre><code>D:\\Enthought\\Canopy\\User\\Scripts&gt;ipython qtconsole\nError in sys.excepthook:\nTraceback (most recent call last):\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\qt\\console\\qtconsolea\npp.py\", line 45, in gui_excepthook\n    old_excepthook(exctype, value, tb)\nTypeError: 'NoneType' object is not callable\n\nOriginal exception was:\nTraceback (most recent call last):\n  File \"C:\\Program Files\\Enthought\\Canopy\\App\\appdata\\canopy-1.5.2.2785.win-x86_\n64\\lib\\runpy.py\", line 162, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"C:\\Program Files\\Enthought\\Canopy\\App\\appdata\\canopy-1.5.2.2785.win-x86_\n64\\lib\\runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\__main__.py\", line 14\n, in &lt;module&gt;\n    start_ipython()\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\__init__.py\", line 12\n0, in start_ipython\n    return launch_new_instance(argv=argv, **kwargs)\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\config\\application.py\n\", line 573, in launch_instance\n    app.initialize(argv)\n  File \"&lt;string&gt;\", line 2, in initialize\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\config\\application.py\n\", line 75, in catch_config_error\n    return method(app, *args, **kwargs)\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\terminal\\ipapp.py\", l\nine 321, in initialize\n    super(TerminalIPythonApp, self).initialize(argv)\n  File \"&lt;string&gt;\", line 2, in initialize\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\config\\application.py\n\", line 75, in catch_config_error\n    return method(app, *args, **kwargs)\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\core\\application.py\",\n line 369, in initialize\n    self.parse_command_line(argv)\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\terminal\\ipapp.py\", l\nine 316, in parse_command_line\n    return super(TerminalIPythonApp, self).parse_command_line(argv)\n  File \"&lt;string&gt;\", line 2, in parse_command_line\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\config\\application.py\n\", line 75, in catch_config_error\n    return method(app, *args, **kwargs)\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\config\\application.py\n\", line 471, in parse_command_line\n    return self.initialize_subcommand(subc, subargv)\n  File \"&lt;string&gt;\", line 2, in initialize_subcommand\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\config\\application.py\n\", line 75, in catch_config_error\n    return method(app, *args, **kwargs)\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\config\\application.py\n\", line 402, in initialize_subcommand\n    subapp = import_item(subapp)\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\utils\\importstring.py\n\", line 42, in import_item\n    module = __import__(package, fromlist=[obj])\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\qt\\console\\qtconsolea\npp.py\", line 50, in &lt;module&gt;\n    from IPython.external.qt import QtCore, QtGui\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\external\\qt.py\", line\n 23, in &lt;module&gt;\n    QtCore, QtGui, QtSvg, QT_API = load_qt(api_opts)\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\external\\qt_loaders.p\ny\", line 277, in load_qt\n    result = loaders[api]()\n  File \"D:\\Enthought\\Canopy\\User\\lib\\site-packages\\IPython\\external\\qt_loaders.p\ny\", line 229, in import_pyside\n    from PySide import QtGui, QtCore, QtSvg\nImportError: DLL load failed: No se puede encontrar el m\u00bedulo especificado.\n\nD:\\Enthought\\Canopy\\User\\Scripts&gt;\n</code></pre>\n\n<p>,but when I start <code>ipython notebook</code> everything is OK. I also updated all packages using <code>enpkg</code>. I appreciate any help. Thanks in advance.</p>\n\n<p><strong>Update:</strong> I settting <code>set QT_API = pyqt</code> and now I'm able to run <code>ipython qtconsole</code> and <code>ipython qtconsole -pylab=qt</code> . But i still cant run Canopy GUI ( Code Editor or Package Manager). </p>\n"}, {"tags": ["python", "numpy", "anaconda", "caffe", "lmdb"], "comments": [{"owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "edited": false, "score": 0, "creation_date": 1434036825, "post_id": 30769048, "comment_id": 49620228, "body": "you seem to have path definition issues. please check you PATH variable and verify that it indeed points to the location of the lmdb package"}, {"owner": {"reputation": 735, "user_id": 4561745, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/asmkz.jpg?s=128&g=1", "display_name": "Dr. Prasanna Date", "link": "https://stackoverflow.com/users/4561745/dr-prasanna-date"}, "reply_to_user": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "edited": false, "score": 0, "creation_date": 1434041504, "post_id": 30769048, "comment_id": 49623375, "body": "When I do <code>echo $PATH</code>, it returns the following: <code>&#47;home&#47;pras&#47;anaconda&#47;bin:$&#47;usr&#47;include:&#47;usr&#47;local&#47;sbin:&#47;usr&#47;l&zwnj;&#8203;ocal&#47;bin:&#47;usr&#47;sbin:&#47;&zwnj;&#8203;usr&#47;bin:&#47;sbin:&#47;bin:&#47;&zwnj;&#8203;usr&#47;games:&#47;usr&#47;local&zwnj;&#8203;&#47;games</code>. When I do <code>dpkg -L liblmdb-dev</code>, I get these:  <code>&#47;. &#47;usr &#47;usr&#47;lib &#47;usr&#47;lib&#47;x86_64-linux-gnu &#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;liblmdb.a &#47;usr&#47;share &#47;usr&#47;share&#47;doc &#47;usr&#47;share&#47;doc&#47;liblmdb-dev &#47;usr&#47;share&#47;doc&#47;liblmdb-dev&#47;copyright &#47;usr&#47;include &#47;usr&#47;include&#47;lmdb.h &#47;usr&#47;lib&#47;x86_64-linux-gnu&#47;liblmdb.so &#47;usr&#47;share&#47;doc&#47;liblmdb-dev&#47;changelog.Debian.gz</code>  Now, which of these should I add to $PATH?"}, {"owner": {"reputation": 735, "user_id": 4561745, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/asmkz.jpg?s=128&g=1", "display_name": "Dr. Prasanna Date", "link": "https://stackoverflow.com/users/4561745/dr-prasanna-date"}, "reply_to_user": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "edited": false, "score": 1, "creation_date": 1434042060, "post_id": 30769048, "comment_id": 49623695, "body": "Well, I tried to follow instructions as mentioned <a href=\"https://lmdb.readthedocs.org/en/release/#installation-unix\" rel=\"nofollow noreferrer\">here</a>. <code>pip install lmdb</code> seemed to do the trick!"}, {"owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "edited": false, "score": 0, "creation_date": 1434042154, "post_id": 30769048, "comment_id": 49623751, "body": "You should post this as an answer"}], "answers": [{"tags": [], "owner": {"reputation": 735, "user_id": 4561745, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/asmkz.jpg?s=128&g=1", "display_name": "Dr. Prasanna Date", "link": "https://stackoverflow.com/users/4561745/dr-prasanna-date"}, "is_accepted": true, "score": 11, "last_activity_date": 1439975677, "last_edit_date": 1439975677, "creation_date": 1434047288, "answer_id": 30788664, "question_id": 30769048, "link": "https://stackoverflow.com/questions/30769048/error-in-creating-lmdb-database-file-in-python-for-caffe/30788664#30788664", "title": "Error in creating LMDB database file in Python for Caffe", "body": "<p>Well, the <code>apt-get install liblmdb-dev</code> might work with bash (in the terminal) but apparently it doesn't work with Anaconda Python. I figured Anaconda Python might require it's own module for lmdb and I followed <a href=\"https://lmdb.readthedocs.org/en/release/#installation-unix\" rel=\"noreferrer\">this</a> link. The Python installation for lmdb module can be performed by running the command <code>pip install lmdb</code> in the terminal. And then <code>import lmdb</code> in Python works like a charm!</p>\n\n<p>The above installation commands may require sudo.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4624901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5e666cb769dfbc30e53bfe8a702dd38?s=128&d=identicon&r=PG&f=1", "display_name": "Yazeed", "link": "https://stackoverflow.com/users/4624901/yazeed"}, "is_accepted": false, "score": 2, "last_activity_date": 1464361356, "creation_date": 1464361356, "answer_id": 37486716, "question_id": 30769048, "link": "https://stackoverflow.com/questions/30769048/error-in-creating-lmdb-database-file-in-python-for-caffe/37486716#37486716", "title": "Error in creating LMDB database file in Python for Caffe", "body": "<p>If you're using Anaconda, then this can solve your problem (it worked for me):</p>\n\n<pre><code>conda install -c https://conda.binstar.org/dougal lmdb\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 9954163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SoDMq.jpg?s=128&g=1", "display_name": "Mohamed Laradji", "link": "https://stackoverflow.com/users/9954163/mohamed-laradji"}, "is_accepted": false, "score": 0, "last_activity_date": 1536005023, "creation_date": 1536005023, "answer_id": 52155660, "question_id": 30769048, "link": "https://stackoverflow.com/questions/30769048/error-in-creating-lmdb-database-file-in-python-for-caffe/52155660#52155660", "title": "Error in creating LMDB database file in Python for Caffe", "body": "<p>For Anaconda users, installing <code>python-lmdb</code> package from <code>conda-forge</code> should fix the <code>lmdb</code> import error:</p>\n\n<pre><code>conda install -c conda-forge python-lmdb\n</code></pre>\n\n<p>This was tested on <code>conda 4.5.11</code> on an <code>lxc</code>-containerized system running <code>Ubuntu 18.04</code>. </p>\n\n<p>Note that there is a <code>conda</code> package named <code>lmdb</code> (without <code>python-</code>), installable via:</p>\n\n<pre><code>conda install -c conda-forge lmdb\n</code></pre>\n\n<p>that does not fix the import error.</p>\n"}], "owner": {"reputation": 735, "user_id": 4561745, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/asmkz.jpg?s=128&g=1", "display_name": "Dr. Prasanna Date", "link": "https://stackoverflow.com/users/4561745/dr-prasanna-date"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10743, "favorite_count": 2, "accepted_answer_id": 30788664, "answer_count": 3, "score": 6, "last_activity_date": 1536005023, "creation_date": 1433978920, "question_id": 30769048, "link": "https://stackoverflow.com/questions/30769048/error-in-creating-lmdb-database-file-in-python-for-caffe", "title": "Error in creating LMDB database file in Python for Caffe", "body": "<p>I'm trying to create an LMDB data base file in Python to be used with Caffe according to <a href=\"http://deepdish.io/2015/04/28/creating-lmdb-in-python/\" rel=\"noreferrer\">this</a> tutorial. The commands <code>import numpy as np</code> and <code>import caffe</code> run perfectly fine. However, when I try to run <code>import lmdb</code> and <code>import deepdish as dd</code>, I'm getting the following errors:</p>\n\n<pre><code>    &gt;&gt;&gt; import lmdb\n    Traceback (most recent call last):\n      File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n    ImportError: No module named lmdb\n    &gt;&gt;&gt; import deepdish as dd\n    Traceback (most recent call last):\n      File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n    ImportError: No module named deepdish\n</code></pre>\n\n<p>I'm running Python 2.7.9 through Anaconda 2.2.0 (64-bit) on Ubuntu 14.04. While installing the dependencies for Caffe according to <a href=\"http://caffe.berkeleyvision.org/install_apt.html\" rel=\"noreferrer\">this</a> page, I've already installed the lmdb package through <code>sudo apt-get install liblmdb-dev</code>.</p>\n\n<p>Any ideas why this error might be occuring?</p>\n"}, {"tags": ["python", "parsing", "directory"], "comments": [{"owner": {"reputation": 1878, "user_id": 98599, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bdb57938c676236c97c70ecdb12089aa?s=128&d=identicon&r=PG", "display_name": "Tuan Anh Hoang-Vu", "link": "https://stackoverflow.com/users/98599/tuan-anh-hoang-vu"}, "edited": false, "score": 0, "creation_date": 1433978878, "post_id": 30768970, "comment_id": 49590078, "body": "You got it right. <code>os</code> module will be useful."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 4997018, "user_type": "registered", "profile_image": "https://graph.facebook.com/974582775909362/picture?type=large", "display_name": "Faramola J. Isiaka", "link": "https://stackoverflow.com/users/4997018/faramola-j-isiaka"}, "edited": false, "score": 0, "creation_date": 1434057947, "post_id": 30769638, "comment_id": 49632952, "body": "Thank You very much this is very helpful"}, {"owner": {"reputation": 5, "user_id": 4997018, "user_type": "registered", "profile_image": "https://graph.facebook.com/974582775909362/picture?type=large", "display_name": "Faramola J. Isiaka", "link": "https://stackoverflow.com/users/4997018/faramola-j-isiaka"}, "edited": false, "score": 0, "creation_date": 1434058268, "post_id": 30769638, "comment_id": 49633088, "body": "So os.listdir(&#39;path&#39;) returns an array filled with the files and directories in &#39;path&#39;?"}], "tags": [], "owner": {"reputation": 563, "user_id": 875343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d35cf9b507b87dc8b80f333d730cab1?s=128&d=identicon&r=PG", "display_name": "shortorian", "link": "https://stackoverflow.com/users/875343/shortorian"}, "is_accepted": true, "score": 0, "last_activity_date": 1433982797, "creation_date": 1433982797, "answer_id": 30769638, "question_id": 30768970, "link": "https://stackoverflow.com/questions/30768970/navigating-directories-and-counting-files-in-a-directory-with-python/30769638#30769638", "title": "Navigating Directories and Counting files in a directory with Python", "body": "<p><code>len(os.listdir('path'))</code> will give you the total number of entries at <code>'path'</code> (this includes files and directories). As far as I know, the <code>os</code> module is platform independent, however the strings used for paths are different for windows and unix-based environments (and maybe others, I don't know). Windows path strings should look like <code>'C:\\\\directory\\\\subdir\\\\file'</code> because backslashes need to be escaped. I can't remember off the top of my head but I think linux path strings are just like you'd expect them to be: <code>'directory/subdir/file'</code>.</p>\n"}], "owner": {"reputation": 5, "user_id": 4997018, "user_type": "registered", "profile_image": "https://graph.facebook.com/974582775909362/picture?type=large", "display_name": "Faramola J. Isiaka", "link": "https://stackoverflow.com/users/4997018/faramola-j-isiaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 30769638, "answer_count": 1, "score": 0, "last_activity_date": 1433982797, "creation_date": 1433978425, "question_id": 30768970, "link": "https://stackoverflow.com/questions/30768970/navigating-directories-and-counting-files-in-a-directory-with-python", "title": "Navigating Directories and Counting files in a directory with Python", "body": "<p>I am fairly familiar with Python and coding in general but I do not have much experience with the parsing and directory navigation in Python. I have a file that contains some data that I wish to extract and I want to be able to count the number of files and directories in given directory. I have done a little research and I think the sys and os.path modules will be useful. Also do the commands for os.path vary across platforms(Yosemite vs. Linux. Windows)</p>\n"}, {"tags": ["python", "class", "methods"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1433978723, "post_id": 30768966, "comment_id": 49590025, "body": "Your example is a method to person, not to pet. So you&#39;d want an if-statement in the person&#39;s <code>adopt</code> method to see if the pet is dead; not something in a pet&#39;s method."}, {"owner": {"reputation": 1002, "user_id": 4017197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-D-Yq0lAxOt8/AAAAAAAAAAI/AAAAAAAAAHY/oHWHmB_Wgc4/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/4017197/alex"}, "edited": false, "score": 0, "creation_date": 1433978782, "post_id": 30768966, "comment_id": 49590048, "body": "Right but I have a lot of methods in person for which I would have to check if the pet is alive, is there a more elegant way of doing it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1433978792, "post_id": 30768966, "comment_id": 49590053, "body": "What do you want the not-allowed methods to do: raise an AttributeError (that is, the method is simply gone from the class), raise a NotImplementedError, raise another error (e.g., ValueError), or do nothing (comparable to <code>pass</code>)?"}, {"owner": {"reputation": 1002, "user_id": 4017197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-D-Yq0lAxOt8/AAAAAAAAAAI/AAAAAAAAAHY/oHWHmB_Wgc4/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/4017197/alex"}, "edited": false, "score": 0, "creation_date": 1433978941, "post_id": 30768966, "comment_id": 49590094, "body": "Well I guess what I&#39;m really asking is what is preferable way to handle this situation, it&#39;s not hard to imagine this sort of thing being used in a lot of other places so I was just trying to find out how other people handle it and if there&#39;s some preferred way."}], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1433979293, "post_id": 30769095, "comment_id": 49590204, "body": "A similar decorator can be defined for <code>Person</code> methods, such as the <code>adopt</code>, which need to check the explicit argument rather than <code>self</code>."}, {"owner": {"reputation": 1002, "user_id": 4017197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-D-Yq0lAxOt8/AAAAAAAAAAI/AAAAAAAAAHY/oHWHmB_Wgc4/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/4017197/alex"}, "edited": false, "score": 0, "creation_date": 1433979600, "post_id": 30769095, "comment_id": 49590287, "body": "Interesting, I&#39;ve never encountered decorators before, but it seems like just what I was looking for. is the @require_alive decorator required before each method or just before all the methods that require a dog to be alive?"}, {"owner": {"reputation": 1594, "user_id": 4297051, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TRTp6N_8pBo/AAAAAAAAAAI/AAAAAAAAD-E/yZ3_Hkm-dH4/photo.jpg?sz=128", "display_name": "Jake Griffin", "link": "https://stackoverflow.com/users/4297051/jake-griffin"}, "edited": false, "score": 0, "creation_date": 1433979857, "post_id": 30769095, "comment_id": 49590357, "body": "You define the decorator once (<code>def require_alive...</code>) and include the decorator (<code>@require_alive</code>) before <i>each</i> of the methods that require the dog to be alive. Decorators are difficult to understand when you first see them, but very powerful once understood."}, {"owner": {"reputation": 1002, "user_id": 4017197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-D-Yq0lAxOt8/AAAAAAAAAAI/AAAAAAAAAHY/oHWHmB_Wgc4/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/4017197/alex"}, "edited": false, "score": 0, "creation_date": 1433979999, "post_id": 30769095, "comment_id": 49590407, "body": "Sorry maybe I worded my followup question poorly I meant to ask is do I need the decorator before each function that requires the dog to be alive or simply before a whole bunch of functions that require the dog to be alive?"}, {"owner": {"reputation": 1594, "user_id": 4297051, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TRTp6N_8pBo/AAAAAAAAAAI/AAAAAAAAD-E/yZ3_Hkm-dH4/photo.jpg?sz=128", "display_name": "Jake Griffin", "link": "https://stackoverflow.com/users/4297051/jake-griffin"}, "edited": false, "score": 0, "creation_date": 1433980021, "post_id": 30769095, "comment_id": 49590411, "body": "I reworded my comment to make it more clear, and added an additional method to the Pet class to demonstrate."}, {"owner": {"reputation": 1002, "user_id": 4017197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-D-Yq0lAxOt8/AAAAAAAAAAI/AAAAAAAAAHY/oHWHmB_Wgc4/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/4017197/alex"}, "edited": false, "score": 0, "creation_date": 1433980971, "post_id": 30769095, "comment_id": 49590668, "body": "Can I use multiple decorators by &quot;stacking them&quot; above a function?"}, {"owner": {"reputation": 1594, "user_id": 4297051, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TRTp6N_8pBo/AAAAAAAAAAI/AAAAAAAAD-E/yZ3_Hkm-dH4/photo.jpg?sz=128", "display_name": "Jake Griffin", "link": "https://stackoverflow.com/users/4297051/jake-griffin"}, "edited": false, "score": 0, "creation_date": 1434039260, "post_id": 30769095, "comment_id": 49622000, "body": "Absolutely. I have updated my answer to include a second decorator on the <code>eat</code> method."}], "tags": [], "owner": {"reputation": 1594, "user_id": 4297051, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TRTp6N_8pBo/AAAAAAAAAAI/AAAAAAAAD-E/yZ3_Hkm-dH4/photo.jpg?sz=128", "display_name": "Jake Griffin", "link": "https://stackoverflow.com/users/4297051/jake-griffin"}, "is_accepted": true, "score": 7, "last_activity_date": 1434039226, "last_edit_date": 1434039226, "creation_date": 1433979208, "answer_id": 30769095, "question_id": 30768966, "link": "https://stackoverflow.com/questions/30768966/if-condition-for-multiple-methods-in-a-class/30769095#30769095", "title": "if condition for multiple methods in a class", "body": "<p>How about using a decorator? You will have to decorate each function that requires the pet to be alive, but you will avoid having to write the if-logic over and over:</p>\n\n<pre><code>&gt;&gt;&gt; def require_alive(func):\n...     def wrapper(self, *args, **kwargs):\n...         if not self.alive:\n...             raise Exception(\"Not alive\")\n...         return func(self, *args, **kwargs)\n...     return wrapper\n...\n&gt;&gt;&gt; def require_hungry(func):\n...     def wrapper(self, *args, **kwargs):\n...         if not self.hungry:\n...             print \"Not hungry...\"\n...         else:\n...             return func(self, *args, **kwargs)\n...     return wrapper\n...\n&gt;&gt;&gt; class Pet(object):\n...     def __init__(self):\n...         self.alive = True\n...         self.hungry = True\n...     def die(self):\n...         self.alive = False\n...     @require_alive\n...     @require_hungry\n...     def eat(self):\n...         print \"Eating...\"\n...         self.hungry = False\n...     @require_alive\n...     def sleep(self):\n...         print \"Sleeping...\"\n...\n&gt;&gt;&gt; roofus = Pet()\n&gt;&gt;&gt; roofus.eat()\nEating...\n&gt;&gt;&gt; roofus.eat()\nNot hungry...\n&gt;&gt;&gt; roofus.sleep()\nSleeping...\n&gt;&gt;&gt; roofus.die()\n&gt;&gt;&gt; roofus.eat()\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"&lt;stdin&gt;\", line 4, in wrapper\nException: Not alive\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1433988992, "creation_date": 1433988992, "answer_id": 30770455, "question_id": 30768966, "link": "https://stackoverflow.com/questions/30768966/if-condition-for-multiple-methods-in-a-class/30770455#30770455", "title": "if condition for multiple methods in a class", "body": "<p>If you have a lot of methods to decorate, you may want to consider using a metaclass to do the work of applying it to all of them even though it longer than the answer you accepted. This has the advantage that the list of decorated methods would all be in one location &mdash; so it would be easier to change them and provides documentation. I've also made the decorator itself a staticmethod of the class since that's the only place it's used.</p>\n\n<pre><code>from functools import wraps\n\nclass MetaDeco(type):\n    def __new__(metaclass, name, bases, attrs):\n        cls = super(MetaDeco, metaclass).__new__(metaclass, name, bases, attrs)\n        if 'meta_args' in attrs:\n            decoratorname, methodnames = attrs['meta_args']\n            decorator = getattr(cls, decoratorname)\n            for methodname in methodnames:\n                setattr(cls, methodname, decorator(getattr(cls, methodname)))\n            del attrs['meta_args']  # clean up\n        return cls\n\nclass Pet(object):\n    __metaclass__ = MetaDeco  # in Python 3 use Pet(metalcass=MetaDeco)\n    meta_args = ('require_alive', ('eat', 'sleep'))\n\n    @staticmethod\n    def require_alive(method):\n        @wraps(method)\n        def wrapper(self, *args, **kwargs):\n            if self.dead:\n                raise Exception(\"Not alive\")\n            return method(self, *args, **kwargs)\n        return wrapper\n\n    def __init__(self, owner):\n        self.owner = owner\n        self.dead = False\n\n    def die(self):\n        self.owner = None\n        self.dead = True\n\n    def eat(self):\n        print(\"Eating...\")\n\n    def sleep(self):\n        print(\"Sleeping...\")\n\np = Pet('Alex')\np.eat()  # -&gt; Eating...\np.sleep()  # -&gt; Sleeping...\np.die()\np.eat()  # will raise exception\n</code></pre>\n"}], "owner": {"reputation": 1002, "user_id": 4017197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-D-Yq0lAxOt8/AAAAAAAAAAI/AAAAAAAAAHY/oHWHmB_Wgc4/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/4017197/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 1, "accepted_answer_id": 30769095, "answer_count": 2, "score": 1, "last_activity_date": 1434039226, "creation_date": 1433978410, "question_id": 30768966, "link": "https://stackoverflow.com/questions/30768966/if-condition-for-multiple-methods-in-a-class", "title": "if condition for multiple methods in a class", "body": "<p>I'm writing in python to get a better feel for good practices when using classes. I've written a few methods for a couple classes; dog and person. I have introduced a new method for dog called die, defined below:</p>\n\n<pre><code>def die(self):\n    if self.owner:\n        self.owner.pets.discard(self)\n    self.owner = None\n    self.dead = True\n</code></pre>\n\n<p>Now I don't want to be able to use most of the other methods for a dead dog, ie a method on person to adopt a pet (person.adopt(self,pet)). Since there are many methods (and there may be more to come) with this condition, I would like to avoid adding an if statement to each method requiring the dog to be alive. Is there a way to simply not allow some methods given a condition such as self.dead == False?</p>\n"}, {"tags": ["python", "json", "django", "serialization", "django-rest-framework"], "answers": [{"tags": [], "owner": {"reputation": 3467, "user_id": 2958455, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4bf81a9aa9aa3619f1197c901f079268?s=128&d=identicon&r=PG", "display_name": "Jared Mackey", "link": "https://stackoverflow.com/users/2958455/jared-mackey"}, "is_accepted": true, "score": 0, "last_activity_date": 1433985277, "creation_date": 1433985277, "answer_id": 30769968, "question_id": 30768860, "link": "https://stackoverflow.com/questions/30768860/manytomany-through-field-serialization/30769968#30769968", "title": "ManyToMany Through Field Serialization", "body": "<p>By changing the <code>OrderSerializer</code> <code>items</code> field to be an <code>OrderItemField</code> I was able to get back to root <code>Order</code> by using <code>self.root.instance</code> and then using that in conjuction with the <code>value</code>, which is an <code>Item</code> instance, build a query to find the <code>OrderItem</code> object to get the quantity. Then I can get a serialized <code>Item</code> using my <code>ItemSerializer</code> and just append the quantity to that data.</p>\n\n<p>Doing it this way applies to all of my order views and it is a lot less messy. If there is a better way please let me know!</p>\n\n<p><strong>Serializers</strong></p>\n\n<pre><code>class OrderItemField(serializers.RelatedField):\n    def to_representation(self, value):\n        if type(self.root.instance) == list:\n            self.root.instance = self.root.instance[0]\n        order_item = OrderItem.objects.filter(item=value, order=self.root.instance).first()\n        quantity = order_item.quantity\n        value = ItemSerializer(value).data\n        value['quantity'] = quantity\n        return value\n\n\nclass OrderSerializer(serializers.ModelSerializer):\n    _current_status = StatusSerializer(required=False, many=False)\n    items = OrderItemField(many=True, read_only=True)\n\n    class Meta:\n        model = Order\n        exclude = ('user',)\n</code></pre>\n"}], "owner": {"reputation": 3467, "user_id": 2958455, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4bf81a9aa9aa3619f1197c901f079268?s=128&d=identicon&r=PG", "display_name": "Jared Mackey", "link": "https://stackoverflow.com/users/2958455/jared-mackey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 30769968, "answer_count": 1, "score": 2, "last_activity_date": 1433985277, "creation_date": 1433977785, "question_id": 30768860, "link": "https://stackoverflow.com/questions/30768860/manytomany-through-field-serialization", "title": "ManyToMany Through Field Serialization", "body": "<p>I am having problems serializing my items/orders with quantity.</p>\n\n<p>Results I am getting:</p>\n\n<pre><code>{\n\"id\": 1,\n\"_current_status\": null,\n\"orderitem_set\": [\n    {\n        \"item_id\": 2,\n        \"quantity\": 5\n    },\n    {\n        \"item_id\": 1,\n        \"quantity\": 1\n    }\n],\n\"items\": [\n    {\n        \"id\": 2,\n        \"name\": \"Blue Shoe\",\n        \"description\": \"Sweet blue shoe bro\",\n        \"weight\": \"99.99\",\n        \"price\": \"99.99\"\n    },\n    {\n        \"id\": 1,\n        \"name\": \"Red Shoe\",\n        \"description\": \"sweet red shoe bro\",\n        \"weight\": \"1.00\",\n        \"price\": \"100.00\"\n    }\n],\n\"_last_modified\": \"2015-06-10T22:32:08.007833Z\",\n\"_weight\": \"500.95\",\n\"_total_price\": \"599.95\",\n\"placed\": false,\n\"date_placed\": null\n}\n</code></pre>\n\n<p>Results I want:</p>\n\n<pre><code>{\n\"id\": 1,\n\"_current_status\": null,\n\"items\": [\n    {\n        \"id\": 2,\n        \"name\": \"Blue Shoe\",\n        \"description\": \"Sweet blue shoe bro\",\n        \"weight\": \"99.99\",\n        \"price\": \"99.99\",\n        \"quantity\": 5\n    },\n    {\n        \"id\": 1,\n        \"name\": \"Red Shoe\",\n        \"description\": \"sweet red shoe bro\",\n        \"weight\": \"1.00\",\n        \"price\": \"100.00\",\n        \"quantity\": 1\n    }\n],\n\"_last_modified\": \"2015-06-10T22:32:08.007833Z\",\n\"_weight\": \"500.95\",\n\"_total_price\": \"599.95\",\n\"placed\": false,\n\"date_placed\": null\n}\n</code></pre>\n\n<p><strong>Classes</strong></p>\n\n<pre><code>class Order(models.Model):\n    _current_status = models.ForeignKey(\"main.Status\", blank=True, null=True)\n    _last_modified = models.DateTimeField(auto_now=True)\n    _weight = models.DecimalField(max_digits=10, decimal_places=2, blank=True, null=True)\n    _total_price = models.DecimalField(max_digits=10, decimal_places=2, blank=True, null=True)\n\n    user = models.ForeignKey(\"main.ShopUser\")\n    items = models.ManyToManyField(\"main.Item\", through='main.OrderItem')\n    placed = models.BooleanField(default=False)\n    date_placed = models.DateTimeField(null=True, blank=True)\n\n\nclass OrderItem(models.Model):\n    order = models.ForeignKey('main.Order')\n    item = models.ForeignKey('main.Item')\n    quantity = models.IntegerField(default=1)\n</code></pre>\n\n<p><strong>Serializers</strong></p>\n\n<p>I realize that my serializer is what is putting the <code>orderitem_set</code> into my json but I couldn't figure out how to get the <code>quantity</code> data into <code>items</code> other than in a custom view that loops through the items and the <code>orderitem_set</code> and adds a <code>quantity</code> to items. But that is just terrible and I was hoping there was a way to do this with the built in stuff with the framework or at least make it so I don't have to do that for every view.</p>\n\n<pre><code>class OrderItemField(serializers.RelatedField):\n    def to_representation(self, value):\n        return {'item_id': value.item_id, 'quantity': value.quantity}\n\n\nclass OrderSerializer(serializers.ModelSerializer):\n    _current_status = StatusSerializer(required=False, many=False)\n    orderitem_set = OrderItemField(read_only=True, many=True)\n    items = ItemSerializer(required=True, many=True)\n\n    class Meta:\n        model = Order\n        exclude = ('user',)\n</code></pre>\n\n<p><strong>The view</strong></p>\n\n<p>This view gives me what I am looking for, but it is just terrible. Especially when I have other views that would be giving me a list of orders vs just a single order.</p>\n\n<pre><code>def set_quantities(data):\n    # Gets the quantity for each item and then appends it to each item instead of having 'orderitem_set'\n    for order_item in data['orderitem_set']:\n        for item in data['items']:\n            if item['id'] == order_item['item_id']:\n                item['quantity'] = order_item['quantity']\n    del data['orderitem_set']\n    return data\n\ndef get(self, request, *args, **kwargs):\n    serializer = self.get_serializer(self.get_object())\n\n    data = set_quantities(serializer.data)\n    return Response(data, status=status.HTTP_200_OK)\n</code></pre>\n"}, {"tags": ["python", "django", "bibtex"], "answers": [{"tags": [], "owner": {"reputation": 460, "user_id": 2669425, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9a4a191137ad0cc0874a5777192f2f5?s=128&d=identicon&r=PG", "display_name": "David Hall", "link": "https://stackoverflow.com/users/2669425/david-hall"}, "is_accepted": false, "score": 0, "last_activity_date": 1433977729, "creation_date": 1433977729, "answer_id": 30768847, "question_id": 30768745, "link": "https://stackoverflow.com/questions/30768745/is-there-a-reliable-python-library-for-taking-a-bibtex-entry-and-outputting-it-i/30768847#30768847", "title": "Is there a reliable python library for taking a BibTex entry and outputting it into specific formats?", "body": "<p>The closest thing I know of is the <a href=\"http://pythonhosted.org/pybtex/\" rel=\"nofollow\"><code>pybtex</code></a> package</p>\n"}, {"tags": [], "owner": {"reputation": 2472, "user_id": 109554, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8d5e369f6d7fb6343f9559b0a65abde1?s=128&d=identicon&r=PG", "display_name": "tatlar", "link": "https://stackoverflow.com/users/109554/tatlar"}, "is_accepted": true, "score": 17, "last_activity_date": 1433978870, "creation_date": 1433978870, "answer_id": 30769042, "question_id": 30768745, "link": "https://stackoverflow.com/questions/30768745/is-there-a-reliable-python-library-for-taking-a-bibtex-entry-and-outputting-it-i/30769042#30769042", "title": "Is there a reliable python library for taking a BibTex entry and outputting it into specific formats?", "body": "<p>There are the following projects:</p>\n\n<ul>\n<li><a href=\"https://bibtexparser.readthedocs.org/en/latest/\">BibtexParser</a></li>\n<li><a href=\"http://pybtex.org/\">Pybtex</a></li>\n<li><a href=\"http://pybliographer.org/\">Pybliographer</a></li>\n<li><a href=\"https://github.com/matthew-brett/babybib\">BabyBib</a></li>\n</ul>\n\n<p>If you need complex parsing and output, Pybtex is recommended. <a href=\"http://pythonhosted.org/pybtex/manual.html\">Example</a>:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>&gt;&gt;&gt; from pybtex.database.input import bibtex\n&gt;&gt;&gt; parser = bibtex.Parser()\n&gt;&gt;&gt; bib_data = parser.parse_file('examples/foo.bib')\n&gt;&gt;&gt; bib_data.entries.keys()\n[u'ruckenstein-diffusion', u'viktorov-metodoj', u'test-inbook', u'test-booklet']\n&gt;&gt;&gt; print bib_data.entries['ruckenstein-diffusion'].fields['title']\nPredicting the Diffusion Coefficient in Supercritical Fluids\n</code></pre>\n\n<p>Good luck.</p>\n"}, {"comments": [{"owner": {"reputation": 353, "user_id": 338097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/567022f7d68ab4ca041398c0d64315b6?s=128&d=identicon&r=PG", "display_name": "Alin Tomescu", "link": "https://stackoverflow.com/users/338097/alin-tomescu"}, "edited": false, "score": 0, "creation_date": 1570288160, "post_id": 49314799, "comment_id": 102869671, "body": "Not in my experience. biblib&#39;s <code>bib2bib</code> example will not output valid BibTeX for <a href=\"https://ieeexplore.ieee.org/document/7546521\" rel=\"nofollow noreferrer\">this paper&#39;s BibTeX</a>"}, {"owner": {"reputation": 7987, "user_id": 383744, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/e0185eff108d5c75f7d1f822edf8aab7?s=128&d=identicon&r=PG", "display_name": "Radu", "link": "https://stackoverflow.com/users/383744/radu"}, "reply_to_user": {"reputation": 353, "user_id": 338097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/567022f7d68ab4ca041398c0d64315b6?s=128&d=identicon&r=PG", "display_name": "Alin Tomescu", "link": "https://stackoverflow.com/users/338097/alin-tomescu"}, "edited": false, "score": 0, "creation_date": 1595265442, "post_id": 49314799, "comment_id": 111408797, "body": "@AlinTomescu you may be using the wrong library. The <code>biblib</code> linked above is not published on PyPI at time of writing. See: <a href=\"https://github.com/aclements/biblib/issues/4\" rel=\"nofollow noreferrer\">github.com/aclements/biblib/issues/4</a>"}, {"owner": {"reputation": 353, "user_id": 338097, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/567022f7d68ab4ca041398c0d64315b6?s=128&d=identicon&r=PG", "display_name": "Alin Tomescu", "link": "https://stackoverflow.com/users/338097/alin-tomescu"}, "edited": false, "score": 0, "creation_date": 1595365019, "post_id": 49314799, "comment_id": 111448210, "body": "I see. In the end, I ended up using bibtexparser with more success: <a href=\"https://bibtexparser.readthedocs.io/en/master/bibtexparser.html\" rel=\"nofollow noreferrer\">bibtexparser.readthedocs.io/en/master/bibtexparser.html</a>"}], "tags": [], "owner": {"reputation": 181, "user_id": 891821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0e1ef742427787d228bbb8fc2369d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/891821/matt"}, "is_accepted": false, "score": 12, "last_activity_date": 1521183199, "creation_date": 1521183199, "answer_id": 49314799, "question_id": 30768745, "link": "https://stackoverflow.com/questions/30768745/is-there-a-reliable-python-library-for-taking-a-bibtex-entry-and-outputting-it-i/49314799#49314799", "title": "Is there a reliable python library for taking a BibTex entry and outputting it into specific formats?", "body": "<p>Having tried them, all of these projects are bad, for various reasons: terrible APIs, bad documentation, and a failure to parse valid BibTeX files. The implementation you want doesn't show up in most Google searches, from my own searching: it's <a href=\"https://github.com/aclements/biblib\" rel=\"noreferrer\">biblib</a>. This text from the README should sell it:</p>\n\n<blockquote>\n  <p>There are a lot of BibTeX parsers out there. Most of them are complete nonsense based on some imaginary grammar made up by the module's author that is almost, but not quite, entirely unlike BibTeX's actual grammar. <em>BibTeX has a grammar</em>. It's even pretty simple, though it's probably not what you think it is. The hardest part of BibTeX's grammar is that it's only written down in one place: the BibTeX source code.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 36, "user_id": 1604504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cj6tu.jpg?s=128&g=1", "display_name": "TheDragonReborn", "link": "https://stackoverflow.com/users/1604504/thedragonreborn"}, "reply_to_user": {"reputation": 320, "user_id": 1599349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1bee5b1f3eddbc3628ef24217bacd6d?s=128&d=identicon&r=PG", "display_name": "sirgogo", "link": "https://stackoverflow.com/users/1599349/sirgogo"}, "edited": false, "score": 0, "creation_date": 1567703815, "post_id": 57013617, "comment_id": 102051937, "body": "I was able to import without loss by using Bibtex Parser. After that point, any style file, custom definition, or package can be used to write out a string with the bibliography style one wants. I did not test this latter part in detail, however Pybtex seems to be useful here."}], "tags": [], "owner": {"reputation": 36, "user_id": 1604504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cj6tu.jpg?s=128&g=1", "display_name": "TheDragonReborn", "link": "https://stackoverflow.com/users/1604504/thedragonreborn"}, "is_accepted": false, "score": 1, "last_activity_date": 1567703733, "last_edit_date": 1567703733, "creation_date": 1562962833, "answer_id": 57013617, "question_id": 30768745, "link": "https://stackoverflow.com/questions/30768745/is-there-a-reliable-python-library-for-taking-a-bibtex-entry-and-outputting-it-i/57013617#57013617", "title": "Is there a reliable python library for taking a BibTex entry and outputting it into specific formats?", "body": "<p>The accepted answer of using pybtex is fraught with danger as Pybtex does not preserve the bibtex format of even simple bibtex files. (<a href=\"https://bitbucket.org/pybtex-devs/pybtex/issues/130/need-to-specially-represent-bibtex-markup\" rel=\"nofollow noreferrer\">https://bitbucket.org/pybtex-devs/pybtex/issues/130/need-to-specially-represent-bibtex-markup</a>)</p>\n\n<p>Pybtex is therefore losing bibtex information when reading and re-writing a simple .bib file without making any changes. Users should be very careful following the recommendations to use pybtex. </p>\n\n<p>I will try biblib as well and report back but the accepted answer should be edited to not recommend pybtex.</p>\n\n<p>Edit:\nI was able to import the data using Bibtex Parser, without any loss of data. However, I had to compile from <a href=\"https://github.com/sciunto-org/python-bibtexparser\" rel=\"nofollow noreferrer\">https://github.com/sciunto-org/python-bibtexparser</a> as the version installed via pip was bugged at the time. Users should verify that pip is getting the latest version.</p>\n\n<p>As for exporting, once the data has been imported via BibTex Parser, it's in a dictionary, and can be exported as the user desires. BibTex Parser does not have built in functions for exporting in common formats. As I did not need this functionality, I didn't specifically test it. However, once imported into a dictionary, the string output can be converted to any citation format rather easily.</p>\n\n<p>Here, pybtex and a custom style file can help. I used the style file provided by the journal and compiled in LaTeX instead, but PyBtex has python style files (but also allows ingesting .sty files). So I would recommend taking the Bibtex Parser input and transferring it to PyBtex (or similar) for outputting in a certain style.</p>\n"}], "owner": {"reputation": 1123, "user_id": 3150413, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/OKh0q.jpg?s=128&g=1", "display_name": "War Gravy", "link": "https://stackoverflow.com/users/3150413/war-gravy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9366, "favorite_count": 2, "accepted_answer_id": 30769042, "answer_count": 4, "score": 20, "last_activity_date": 1567703733, "creation_date": 1433977108, "question_id": 30768745, "link": "https://stackoverflow.com/questions/30768745/is-there-a-reliable-python-library-for-taking-a-bibtex-entry-and-outputting-it-i", "title": "Is there a reliable python library for taking a BibTex entry and outputting it into specific formats?", "body": "<p>I'm developing using Python and Django for a website. I want to take a BibTex entry and output it in a view in 3 different formats, MLA, APA, and Chicago. Is there a library out there that already does this or am I going to have to manually do the string formatting?</p>\n"}, {"tags": ["python", "django", "forms"], "answers": [{"tags": [], "owner": {"reputation": 845, "user_id": 3541922, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6a9795995dd1baf51f24d1382007f134?s=128&d=identicon&r=PG&f=1", "display_name": "MikeVelazco", "link": "https://stackoverflow.com/users/3541922/mikevelazco"}, "is_accepted": false, "score": 1, "last_activity_date": 1433979333, "last_edit_date": 1433979333, "creation_date": 1433979028, "answer_id": 30769066, "question_id": 30768706, "link": "https://stackoverflow.com/questions/30768706/django-getting-form-field-by-string-var/30769066#30769066", "title": "Django - Getting form field by string var", "body": "<p>My option is not pretty, but it must work:</p>\n\n<pre><code>{% with fieldname=field.html_name|add:'_min' %}\n  &lt;tr class=\"collapse\" id=\"{{ field.html_name }}\"&gt;\n         &lt;td&gt;{{ field.label }}&lt;/td&gt;\n         {% if fieldname == \"aant_inw_min\" %}\n         &lt;td&gt;{% render_field form.aant_inw_min class+=\"form-control\" %}&lt;/td&gt;\n         {% elif fieldname == \"aant_inw_max\" %}\n         &lt;td&gt;{% render_field form.aant_inw_max class+=\"form-control\" %}&lt;/td&gt;\n         {% elif fieldname == \"aant_inw_priority\" %}\n         &lt;td&gt;{% render_field form.aant_inw_priority class+=\"form-control\" %}&lt;/td&gt;\n         {% endif %}\n  &lt;/tr&gt;\n{% endwith %}\n</code></pre>\n\n<p>or just create a <a href=\"https://docs.djangoproject.com/en/1.8/howto/custom-template-tags/#writing-custom-template-tags\" rel=\"nofollow\">custom templatetag</a>.</p>\n"}], "owner": {"reputation": 133, "user_id": 2267627, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b2179057d9c327fd1901a23f3ebb27e0?s=128&d=identicon&r=PG", "display_name": "rockyl", "link": "https://stackoverflow.com/users/2267627/rockyl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433979333, "creation_date": 1433976893, "question_id": 30768706, "link": "https://stackoverflow.com/questions/30768706/django-getting-form-field-by-string-var", "title": "Django - Getting form field by string var", "body": "<p>i'm trying to get an form with Django displaying properly. My form has multiple segments, and one group looks like this: </p>\n\n<pre><code>aant_inw = forms.BooleanField(widget=forms.HiddenInput(), required=True, label=\"Aantal inwoners\")\naant_inw_min = forms.IntegerField(required=False)\naant_inw_max = forms.IntegerField(required=False) \naant_inw_priority = forms.FloatField(required=False)   \n</code></pre>\n\n<p>The problem is that I only loop over the hidden fields, then in that row I want to add the 3 other  (once this one is checked, the other 3 form fields for that group turn visible).</p>\n\n<p>I thought about creating a var that stores the string to the correct field in the form. So adding _min, _max, _priority to the original html_name as a prefix. I'm not really sure how to this though. I tried using my var to get the correct form in multiple ways. I tried <code>form.fieldname</code>, <code>form[fieldname]</code>, and <code>form.{{fieldname}}</code>. But none of these seem to work and return aboolutely nothing. Below is a little snippet of what I'm trying to do.</p>\n\n<pre><code>{% with fieldname=field.html_name|add:'_min' %}\n      &lt;tr class=\"collapse\" id=\"{{ field.html_name }}\"&gt;\n             &lt;td&gt;{{ field.label }}&lt;/td&gt;\n             &lt;td&gt;{% render_field form.{{fieldname}} class+=\"form-control\" %}&lt;/td&gt;\n             &lt;td&gt;{% render_field form.fieldname class+=\"form-control\" %}&lt;/td&gt;\n      &lt;/tr&gt;\n{% endwith %}\n</code></pre>\n\n<p>I hope someone can help me out with this!</p>\n"}, {"tags": ["python", "rpy2"], "answers": [{"comments": [{"owner": {"reputation": 1365, "user_id": 335928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/w9CWP.jpg?s=128&g=1", "display_name": "myClone", "link": "https://stackoverflow.com/users/335928/myclone"}, "edited": false, "score": 0, "creation_date": 1433981961, "post_id": 30769061, "comment_id": 49590897, "body": "Thanks @lgautier.  I am using rpy2 2.4.3 at the moment and Python 2.7.3.   I cannot upgrade these packages at this time due to software dependencies.  I just downloaded pandas however although I have no clue how to use it yet--I&#39;ll research it a bit more."}, {"owner": {"reputation": 10688, "user_id": 294017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8e5422a173711c086b685140dbc498fe?s=128&d=identicon&r=PG", "display_name": "lgautier", "link": "https://stackoverflow.com/users/294017/lgautier"}, "reply_to_user": {"reputation": 1365, "user_id": 335928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/w9CWP.jpg?s=128&g=1", "display_name": "myClone", "link": "https://stackoverflow.com/users/335928/myclone"}, "edited": false, "score": 0, "creation_date": 1433983970, "post_id": 30769061, "comment_id": 49591390, "body": "Rpy2 is expected to work with Python 3.4 and 2.7. Upgrade is one <code>pip install</code> away..."}, {"owner": {"reputation": 10688, "user_id": 294017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8e5422a173711c086b685140dbc498fe?s=128&d=identicon&r=PG", "display_name": "lgautier", "link": "https://stackoverflow.com/users/294017/lgautier"}, "reply_to_user": {"reputation": 1365, "user_id": 335928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/w9CWP.jpg?s=128&g=1", "display_name": "myClone", "link": "https://stackoverflow.com/users/335928/myclone"}, "edited": false, "score": 1, "creation_date": 1433984002, "post_id": 30769061, "comment_id": 49591395, "body": "Rpy2 is expected to work with Python 3.4 and 2.7. Upgrade is one <code>pip install</code> away..."}], "tags": [], "owner": {"reputation": 10688, "user_id": 294017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8e5422a173711c086b685140dbc498fe?s=128&d=identicon&r=PG", "display_name": "lgautier", "link": "https://stackoverflow.com/users/294017/lgautier"}, "is_accepted": true, "score": 1, "last_activity_date": 1433979008, "creation_date": 1433979008, "answer_id": 30769061, "question_id": 30768422, "link": "https://stackoverflow.com/questions/30768422/rpy2-preserve-metadata-in-factorvector/30769061#30769061", "title": "rpy2 preserve metadata in FactorVector", "body": "<p>The conversion layer customers customized for pandas DataFrame in rpy2-2.6.0 should take care of converting R factors to Pandas factors.</p>\n"}], "owner": {"reputation": 1365, "user_id": 335928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/w9CWP.jpg?s=128&g=1", "display_name": "myClone", "link": "https://stackoverflow.com/users/335928/myclone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 30769061, "answer_count": 1, "score": 0, "last_activity_date": 1433979008, "creation_date": 1433975407, "question_id": 30768422, "link": "https://stackoverflow.com/questions/30768422/rpy2-preserve-metadata-in-factorvector", "title": "rpy2 preserve metadata in FactorVector", "body": "<p>I have a script in python that loads .RData and reads it and then writes it out to an excel file.  Unfortunately, one table that contains 11 variables and 144 objects with mixed types (IntVector, FactorVector, Float Vector, Float Vector,...etc.)</p>\n\n<p>When the table writes to Excel, the column names and data are preserved, except for the column that is a four-level FactorVector.  Instead of returning the metadata (a,a,a,a,b,b,b,b,c,c,c,c,d,d,d,d...etc.) associated with the four levels, it returns integer values associated with each level (1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4...etc.)</p>\n\n<p>I found this on the <a href=\"http://rpy.sourceforge.net/rpy2/doc-2.4/html/vector.html#rpy2.robjects.vectors.FactorVector\" rel=\"nofollow\">rpy2 sourceforge website</a>, which pretty much explains my problem. </p>\n\n<blockquote>\n  <p>Since a FactorVector is an IntVector with attached metadata (the levels), getting items Python-style was not changed from what happens when gettings items from a IntVector. A consequence to that is that information about the levels is then lost.</p>\n</blockquote>\n\n<p>It goes on below this to explain using levels, at which point I get lost as to what exactly I should do or use to keep the metadata levels intact for the FactorVector variable in question.</p>\n\n<p>I presume there some sort of rpy2.robjects \"switch\" that will preserve this metadata when it gets translated into python?  What would be the most efficient way to to apply this? Thanks!</p>\n"}, {"tags": ["python", "django", "django-templates"], "comments": [{"owner": {"reputation": 2472, "user_id": 109554, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8d5e369f6d7fb6343f9559b0a65abde1?s=128&d=identicon&r=PG", "display_name": "tatlar", "link": "https://stackoverflow.com/users/109554/tatlar"}, "edited": false, "score": 1, "creation_date": 1433979398, "post_id": 30768303, "comment_id": 49590238, "body": "What is your <code>STATIC_URL</code> setting in <code>settings.py</code>? Have you run the <a href=\"https://docs.djangoproject.com/en/1.8/howto/static-files/deployment/\" rel=\"nofollow noreferrer\">collectstatic</a> command?"}, {"owner": {"reputation": 1164, "user_id": 3800389, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3182101ccf732ff6bac4b37f7a34759c?s=128&d=identicon&r=PG&f=1", "display_name": "WutWut", "link": "https://stackoverflow.com/users/3800389/wutwut"}, "reply_to_user": {"reputation": 2472, "user_id": 109554, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8d5e369f6d7fb6343f9559b0a65abde1?s=128&d=identicon&r=PG", "display_name": "tatlar", "link": "https://stackoverflow.com/users/109554/tatlar"}, "edited": false, "score": 0, "creation_date": 1433980048, "post_id": 30768303, "comment_id": 49590420, "body": "@tatlar <code>STATIC_URL = &#39;&#47;static&#47;&#39;</code>. Never seen that command.New to django. But if it was necessary the other templates wouldn&#39;t be referencing the css file.Would they?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user142650"}, "edited": false, "score": 0, "creation_date": 1433993125, "post_id": 30768303, "comment_id": 49593514, "body": "Show all lines containing <code>static</code> in settings.py. It might be something there."}, {"owner": {"reputation": 1164, "user_id": 3800389, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3182101ccf732ff6bac4b37f7a34759c?s=128&d=identicon&r=PG&f=1", "display_name": "WutWut", "link": "https://stackoverflow.com/users/3800389/wutwut"}, "edited": false, "score": 0, "creation_date": 1434020233, "post_id": 30768303, "comment_id": 49607723, "body": "@AbhiP I&#39;ve edited that part into the code."}, {"owner": {"reputation": 2611, "user_id": 965069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1daa156f4548884b381e0418c50265eb?s=128&d=identicon&r=PG", "display_name": "patrys", "link": "https://stackoverflow.com/users/965069/patrys"}, "edited": false, "score": 0, "creation_date": 1434021262, "post_id": 30768303, "comment_id": 49608399, "body": "See this question: <a href=\"http://stackoverflow.com/questions/15121731/using-static-files-in-custom-404-500-pages-in-django\" title=\"using static files in custom 404 500 pages in django\">stackoverflow.com/questions/15121731/&hellip;</a>"}], "owner": {"reputation": 1164, "user_id": 3800389, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3182101ccf732ff6bac4b37f7a34759c?s=128&d=identicon&r=PG&f=1", "display_name": "WutWut", "link": "https://stackoverflow.com/users/3800389/wutwut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1434020200, "creation_date": 1433974842, "last_edit_date": 1434020200, "question_id": 30768303, "link": "https://stackoverflow.com/questions/30768303/serving-static-files-in-django-1-8", "title": "Serving static files in django 1.8", "body": "<p>My <code>404.html</code> page does not reference my <code>finale.css</code> file.\nMy directory structure</p>\n\n<pre><code>musicworld/\n   musicworld/\n           __pycache__\n           __int__.py\n           settings.py\n           urls.py\n           wsgi.py\n   feature/\n           __pycache__\n           migrations\n           static/\n                 feature/\n                        finale.css\n           templates/\n                 feature/\n                        about.html\n                        detail.html\n                 404.html\n                 500.html\n                 index.html\n                 template.html\n            __init__.py\n            admin.py\n            models.py\n            tests\n</code></pre>\n\n<p>This is where in <code>index.html</code> I'm referencing the css</p>\n\n<pre><code>    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"{% static 'feature/finale.css' %}\" /&gt;\n</code></pre>\n\n<p>But <code>404.html</code> that extends <code>index.html</code>is not referencing the css</p>\n\n<pre><code>{% extends \"index.html\" %}\n{% load staticfiles %}\n{% block 404page %}\n&lt;div class=\"box\"&gt;\n&lt;p class=\"box-message\" data-dead-message=\"AAAAAHHHHHH!\"&gt;Oh No! Something went wrong.Punish the developer by clicking here.&lt;/p&gt;\n&lt;/div&gt;\n\n  &lt;div class=\"robot\"&gt;\n    &lt;img src=\"\" alt=\"Robot\" /&gt;\n  &lt;/div&gt;\n{% endblock %}\n</code></pre>\n\n<p><code>static reference in settings.py</code></p>\n\n<pre><code>STATIC_URL = '/static/'\n\nSECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')\nALLOWED_HOSTS = ['*']\nSTATIC_ROOT = 'staticfiles'\nSTATICFILES_DIRS = (\nos.path.join(BASE_DIR, 'static'),\n)\n\nMEDIA_URL = '/media/'\n\nMEDIA_ROOT = os.path.join(BASE_DIR, \"media\")\n</code></pre>\n\n<p>Both the <code>index.html</code>and <code>template.html</code> are placed in the same folder and are properly referencing the css.Plus all the <code>html</code> pages in feature that are extending <code>index.html</code> are also referencing the css.But both <code>404.html</code> and <code>500.html</code>are not.</p>\n"}, {"tags": ["python", "django", "nginx", "supervisord", "swampdragon"], "comments": [{"owner": {"reputation": 9136, "user_id": 688393, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3RXeo.jpg?s=128&g=1", "display_name": "C&#233;sar", "link": "https://stackoverflow.com/users/688393/c%c3%a9sar"}, "edited": false, "score": 0, "creation_date": 1452264000, "post_id": 30768284, "comment_id": 57104354, "body": "Did you find a solution?!"}, {"owner": {"reputation": 8395, "user_id": 3945375, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE10z.jpg?s=128&g=1", "display_name": "Gocht", "link": "https://stackoverflow.com/users/3945375/gocht"}, "reply_to_user": {"reputation": 9136, "user_id": 688393, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3RXeo.jpg?s=128&g=1", "display_name": "C&#233;sar", "link": "https://stackoverflow.com/users/688393/c%c3%a9sar"}, "edited": false, "score": 1, "creation_date": 1452267290, "post_id": 30768284, "comment_id": 57106776, "body": "@C&#233;sarBust&#237;os Sadly this was solved by another person and I don&#39;t have access anymore to that server, I can&#39;t see how. I still hope someone else can post an answer for this."}], "owner": {"reputation": 8395, "user_id": 3945375, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE10z.jpg?s=128&g=1", "display_name": "Gocht", "link": "https://stackoverflow.com/users/3945375/gocht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 423, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1433974728, "creation_date": 1433974728, "question_id": 30768284, "link": "https://stackoverflow.com/questions/30768284/deploy-swampdragon-with-nginx-supervisor-and-django", "title": "Deploy SwampDragon with Nginx, Supervisor and Django", "body": "<p>I have deployed my application in Linode. But for testing SD I used a pc as server in my local network where I have running my application. I'd like to share my Nginx and Supervisor config if you could give me some advice if it is right or I've made a mistake.</p>\n\n<p>I modified my <code>hosts</code> file to access with <code>www.mydomain.com</code>.</p>\n\n<p>In my <code>settings.py</code> file I have:</p>\n\n<pre><code># SWAMPDRAGON\nSWAMP_DRAGON_CONNECTION = ('swampdragon_auth.socketconnection.HttpDataConnection', '/data')\nDRAGON_URL = 'http://127.0.0.1:9999'\n</code></pre>\n\n<p>I took as example what I did for celery and reuse that to do something similar with SD:\nI created a command file: '<code>swampdragon_start</code>'</p>\n\n<pre><code>#!bin/bash\nNAME=\"swampdragon\"\nDJANGODIR=/opt/virtualenvs/myproject/pysrc/myproject/myproject\n\n# Enable virtualenv\n\ncd $DJANGODIR\nsource ../../../bin/activate\nexport C_FORCE_ROOT=\"true\"\n\n# Execute SD\nexec python manage.py runsd 0.0.0.0:9999\n</code></pre>\n\n<p>Then I created a file for supervisor: 'swampdragon.conf'</p>\n\n<pre><code>[program:swampdragon]\ncommand = /opt/virtualenvs/myproject/bin/swampdragon_start\nuser = root\nstdout = /path/to/file.log\nstderr = /path/to/file.log\nautostart = true\nautorestart = true\n</code></pre>\n\n<p>Finally, I made <code>swampdragon_start</code> executable, and add <code>swampdragon</code> to supervisor.</p>\n\n<p>My Nginx config is as follow:</p>\n\n<pre><code>upstream swampdragon{\n    server 127.0.0.1:9999;\n}\n\nproxy_next_upstream off;\n\nserver {\n    listen 80;\n    server_name www.mydomain.com;\n\n    access_log /path/to/log\n    error_log /path/to/log\n\n    location /media/ {\n        alias /path/to/media\n    }\n\n    location /static/ {\n        alias /path/to/statics\n    }\n\n    location / {\n        ...  # django config\n    }\n}\n\nserver {\n\n    # this is taken from http://swampdragon.net/blog/deploying-swampdragon/\n    listen 80;\n    server_name sd.mydomain.com;\n\n    # Websocket\n    location / {\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Scheme $scheme;\n        proxy_set_header Host $http_host;\n        proxy_pass http://swampdragon;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n}\n</code></pre>\n\n<p>That's how I've made it work, but I think Nginx upstream is not working really.\nI am sure there's a better way to deploy SD, any suggestion?</p>\n\n<p>Thanks for your time.</p>\n"}, {"tags": ["python", "pytest"], "answers": [{"comments": [{"owner": {"reputation": 4514, "user_id": 362754, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4f94dacdb4bdf32a0a48f4a50233dd95?s=128&d=identicon&r=PG", "display_name": "minghua", "link": "https://stackoverflow.com/users/362754/minghua"}, "edited": false, "score": 2, "creation_date": 1434049772, "post_id": 30789301, "comment_id": 49628354, "body": "Another way not to edit/hack the installation is to have cygwin invoke a windows native python instead of the cygwin python. That is, replace the command <code>py.test</code> with <code>c:&#47;python&#47;path&#47;Scripts&#47;python.exe c:&#47;ython&#47;path&#47;Scripts&#47;py.test-script.py</code>, if your windows python is installed at <code>c:&#47;python&#47;path</code>."}, {"owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 0, "creation_date": 1434118994, "post_id": 30789301, "comment_id": 49659110, "body": "In sum the thing learned here is that Unix-style absolute paths on cygwin&#39;s Python are slow. Relative paths to shorten the path or using a non-cygwin Python don&#39;t suffer the same problems."}, {"owner": {"reputation": 4514, "user_id": 362754, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4f94dacdb4bdf32a0a48f4a50233dd95?s=128&d=identicon&r=PG", "display_name": "minghua", "link": "https://stackoverflow.com/users/362754/minghua"}, "reply_to_user": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 0, "creation_date": 1434129905, "post_id": 30789301, "comment_id": 49665853, "body": "Rocky, that comment is too broad. The specific problem is that the malformed file path, like <code>&#47;&#47;setup.py</code> (which should be <code>&#47;setup.py</code>), reveals a problem in one of four software parts: the pytest config.determine_setup(), the py.path, the cygwin python, or cygwin posix implementation."}, {"owner": {"reputation": 4514, "user_id": 362754, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4f94dacdb4bdf32a0a48f4a50233dd95?s=128&d=identicon&r=PG", "display_name": "minghua", "link": "https://stackoverflow.com/users/362754/minghua"}, "reply_to_user": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 0, "creation_date": 1434130231, "post_id": 30789301, "comment_id": 49666030, "body": "Absolute paths work well if they don&#39;t start with a double-slash."}, {"owner": {"reputation": 5822, "user_id": 546218, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f6f59bf629073f1eb8cdd492d10386c4?s=128&d=identicon&r=PG", "display_name": "rocky", "link": "https://stackoverflow.com/users/546218/rocky"}, "edited": false, "score": 2, "creation_date": 1434132641, "post_id": 30789301, "comment_id": 49667332, "body": "About absolute paths or relative paths. The main thing to keep in mind is that there is time used on each path component. So you want to use the one that has the least number of path components. There is a time penalty for switching between filesystems and absolute paths are more prone to that than relative paths. On cygwin in particular it appears that working with paths is slow. The double-slash acerbates this problem, but it is apparently something that sadly you need to keep in mind."}], "tags": [], "owner": {"reputation": 4514, "user_id": 362754, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4f94dacdb4bdf32a0a48f4a50233dd95?s=128&d=identicon&r=PG", "display_name": "minghua", "link": "https://stackoverflow.com/users/362754/minghua"}, "is_accepted": true, "score": 4, "last_activity_date": 1434049369, "creation_date": 1434049369, "answer_id": 30789301, "question_id": 30768254, "link": "https://stackoverflow.com/questions/30768254/pytest-py-test-very-slow-startup-in-cygwin/30789301#30789301", "title": "pytest (py.test) very slow startup in cygwin", "body": "<p>The problem is that pytest searches for <code>//pytest.ini</code>, <code>//tox.ini</code>, <code>//setup.cfg</code>, and <code>//setup.py</code>. Each of them caused either <code>genericpath.exists()</code> or <code>genericpath.isfile()</code> to consume about 2.5 seconds. </p>\n\n<p>On fix is to add the lines below to <code>genericpath.exists()</code> and <code>genericpath.isfile()</code> to skip those four specific paths. </p>\n\n<pre><code>if path.startswith(r'//'):\n    return False\n</code></pre>\n\n<p>An alternative fix would be to modify <code>_pytest/config.py</code> so it does not form those double-slash in the paths to search. </p>\n\n<p>The code used to find out the exact problem is pasted below. Set <code>myshow = True</code> so it will show how time is consumed for every file it is searching for. </p>\n\n<pre><code>$ diff -u /usr/lib/python2.6/genericpath.py genericpath.py\n--- /usr/lib/python2.6/genericpath.py   2012-06-09 08:33:12.000000000 -0700\n+++ genericpath.py      2015-06-11 11:46:33.674285900 -0700\n@@ -9,14 +9,29 @@\n __all__ = ['commonprefix', 'exists', 'getatime', 'getctime', 'getmtime',\n            'getsize', 'isdir', 'isfile']\n\n+myshow = False\n+import time as mytime\n+mybasetime = mytime.time()\n+def myshowtime():\n+    currenttime = mytime.time()\n+    tmdiff = currenttime - mybasetime\n+    global mybasetime\n+    mybasetime = currenttime\n+    return tmdiff\n\n # Does a path exist?\n # This is false for dangling symbolic links on systems that support them.\n def exists(path):\n     \"\"\"Test whether a path exists.  Returns False for broken symbolic links\"\"\"\n+    pretime = myshowtime()\n+    if path.startswith(r'//'):\n+        if myshow: print \"\\n  genericpath exists  %8.3f %8.3f False \" % (pretime, myshowtime()), \" \", path, \"\\n\"\n+        return False\n     try:\n         st = os.stat(path)\n+        if myshow: print \"\\n  genericpath exists  %8.3f %8.3f True  \" % (pretime, myshowtime()), \" \", path, \"\\n\"\n     except os.error:\n+        if myshow: print \"\\n  genericpath exists  %8.3f %8.3f False \" % (pretime, myshowtime()), \" \", path, \"\\n\"\n         return False\n     return True\n\n@@ -25,9 +40,15 @@\n # for the same path ono systems that support symlinks\n def isfile(path):\n     \"\"\"Test whether a path is a regular file\"\"\"\n+    pretime = myshowtime()\n+    if path.startswith(r'//'):\n+        if myshow: print \"\\n  genericpath isfile  %8.3f %8.3f False \" % (pretime, myshowtime()), \" \", path, \"\\n\"\n+        return False\n     try:\n         st = os.stat(path)\n+        if myshow: print \"\\n  genericpath isfile  %8.3f %8.3f True  \" % (pretime, myshowtime()), \" \", path, \"\\n\"\n     except os.error:\n+        if myshow: print \"\\n  genericpath isfile  %8.3f %8.3f False \" % (pretime, myshowtime()), \" \", path, \"\\n\"\n         return False\n     return stat.S_ISREG(st.st_mode)\n</code></pre>\n"}], "owner": {"reputation": 4514, "user_id": 362754, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4f94dacdb4bdf32a0a48f4a50233dd95?s=128&d=identicon&r=PG", "display_name": "minghua", "link": "https://stackoverflow.com/users/362754/minghua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1849, "favorite_count": 2, "accepted_answer_id": 30789301, "answer_count": 1, "score": 2, "last_activity_date": 1434130205, "creation_date": 1433974556, "last_edit_date": 1495535265, "question_id": 30768254, "link": "https://stackoverflow.com/questions/30768254/pytest-py-test-very-slow-startup-in-cygwin", "title": "pytest (py.test) very slow startup in cygwin", "body": "<p>In cygwin, py.test starts up very slow. It does not look like a collection issue because of two reasons: The same test starts up quickly in linux. And sometimes, if rerun the same test fast enough in cygwin, it starts up in less than 1 second. Running through the time command tells it starts up in either 0.4 seconds, or 11.7 seconds, when supplied with the <code>--collection-only</code> option to avoid running the actual tests. I also added a print to the hooks <code>pytest_configure()</code> and <code>pytest_ignore_collect()</code> to be sure indeed it is before the collection starts. </p>\n\n<p>There have been other questions, linke <a href=\"https://stackoverflow.com/questions/16417546/how-to-speed-up-py-test\">how to speed up py.test</a>, etc. But I have not seen why under cygwin it is slow, and how to resolve the problem. </p>\n\n<p><strong>Update</strong>: Ran it through profiling by <code>python -m cProfile -s cumulat ~/.../py.test conftest.py</code>. Below is the top 20 in the result. I tend to think it is the problem with <code>posix.stat</code> in the cygwin or cygwin python package, or the <code>exists</code> and <code>isfile</code> at various places. </p>\n\n<pre><code>   104699 function calls (102659 primitive calls) in 12.223 CPU seconds\n   Ordered by: cumulative time\n ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n      1    0.016    0.016   12.223   12.223 {execfile}\n      1    0.000    0.000   12.223   12.223 &lt;string&gt;:1(&lt;module&gt;)\n      1    0.000    0.000   12.207   12.207 py.test:4(&lt;module&gt;)\n      1    0.000    0.000   12.051   12.051 config.py:23(main)\n  48/22    0.000    0.000   12.051    0.548 core.py:526(_docall)\n  48/22    0.000    0.000   12.051    0.548 core.py:520(__call__)\n 129/82    0.000    0.000   12.051    0.147 core.py:387(execute)\n      1    0.000    0.000   11.926   11.926 config.py:634(pytest_cmdline_parse)\n      1    0.000    0.000   11.926   11.926 config.py:70(_prepareconfig)\n      1    0.000    0.000   11.926   11.926 config.py:741(parse)\n    4/3    0.000    0.000   11.926    3.975 core.py:97(wrapped_call)\n    4/3    0.000    0.000   11.926    3.975 core.py:121(__init__)\n      1    0.000    0.000   11.911   11.911 config.py:706(_preparse)\n     70    0.000    0.000   11.817    0.169 local.py:363(check)\n    260   11.817    0.045   11.817    0.045 {posix.stat}  &lt;&lt;&lt;&lt;this one???\n      1    0.000    0.000    9.302    9.302 config.py:698(_initini)\n      1    0.000    0.000    9.286    9.286 config.py:896(determine_setup)\n    188    0.000    0.000    9.286    0.049 genericpath.py:15(exists)  &lt;&lt;&lt;&lt;this one???\n     18    0.000    0.000    6.861    0.381 config.py:845(exists)  &lt;&lt;&lt;&lt;this one???\n      1    0.000    0.000    6.861    6.861 config.py:851(getcfg)  &lt;&lt;&lt;&lt;this one???\n      1    0.000    0.000    2.531    2.531 config.py:694(pytest_load_initial_conftests)\n      1    0.000    0.000    2.531    2.531 config.py:477(setinitial)\n      1    0.000    0.000    2.531    2.531 config.py:503(_try_load_conftest)\n     13    0.000    0.000    2.531    0.195 config.py:511(getconftestmodules)\n     32    0.000    0.000    2.531    0.079 genericpath.py:26(isfile)  &lt;&lt;&lt;&lt;this one???\n      8    0.000    0.000    2.425    0.303 common.py:261(exists)\n      1    0.000    0.000    0.156    0.156 pytest.py:4(&lt;module&gt;)\n      1    0.000    0.000    0.125    0.125 main.py:73(wrap_session)\n      1    0.000    0.000    0.125    0.125 config.py:615(do_configure)\n      1    0.000    0.000    0.125    0.125 main.py:115(pytest_cmdline_main)\n</code></pre>\n\n<p>A note about sorting in profiling: It is hard to figure out what keyword to use. Adding a line to print out the <code>sort_arg_defs</code> in <code>pstats.py</code> could give an idea: </p>\n\n<pre><code>$ cat -n /usr/lib/python2.x.x/pstats.py\n214         sort_arg_defs = self.get_sort_arg_defs()\n215         sort_tuple = ()\n216         self.sort_type = \"\"\n217         connector = \"\"\n218         for word in field:\n219             sort_tuple = sort_tuple + sort_arg_defs[word][0]\n220             self.sort_type += connector + sort_arg_defs[word][1]\n221             connector = \", \"\n</code></pre>\n\n<p><strong>Conclusion summary</strong>: A malformed file path, like <code>//setup.py</code> (which should be <code>/setup.py</code> without the double-slash at the start), reveals a problem in one of four software parts: the pytest config.determine_setup(), the py.path which is used by pytest config, the cygwin python library, or the cygwin posix implementation. </p>\n"}, {"tags": ["python", "hidden-markov-models"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user559633"}, "edited": false, "score": 1, "creation_date": 1433974449, "post_id": 30768182, "comment_id": 49588575, "body": "Please post the relevant portions of your program."}, {"owner": {"reputation": 9243, "user_id": 1318181, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1ZfAE.png?s=128&g=1", "display_name": "kylieCatt", "link": "https://stackoverflow.com/users/1318181/kyliecatt"}, "edited": false, "score": 0, "creation_date": 1433976787, "post_id": 30768182, "comment_id": 49589397, "body": "This reads more like a math problem than a Python problem"}, {"owner": {"reputation": 8261, "user_id": 245173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36c6145047e62b215306e1a3e6d6800f?s=128&d=identicon&r=PG", "display_name": "jpkotta", "link": "https://stackoverflow.com/users/245173/jpkotta"}, "edited": false, "score": 0, "creation_date": 1433978687, "post_id": 30768182, "comment_id": 49590016, "body": "Sounds like you&#39;re losing precision, which often happens when you add numbers of very different magnitudes.  I&#39;d try to step through the algorithm and figure out where the precision is lost and somehow mitigate it.  To mitigate it, you&#39;ll have to be clever and/or work with more bits."}], "answers": [{"comments": [{"owner": {"reputation": 279, "user_id": 4244893, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3c37c4660825267e7f9a9b41e5330d06?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/4244893/dave"}, "edited": false, "score": 0, "creation_date": 1434035547, "post_id": 30769647, "comment_id": 49619285, "body": "This is exactly my problem, I have the Rabiner paper printed out already and will check it out. Thanks!"}], "tags": [], "owner": {"reputation": 2527, "user_id": 378080, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/d4749d18577f8642b90f271b6aefe9fe?s=128&d=identicon&r=PG", "display_name": "antony", "link": "https://stackoverflow.com/users/378080/antony"}, "is_accepted": true, "score": 0, "last_activity_date": 1433982874, "creation_date": 1433982874, "answer_id": 30769647, "question_id": 30768182, "link": "https://stackoverflow.com/questions/30768182/baum-welch-many-possible-observations/30769647#30769647", "title": "Baum-Welch many possible observations", "body": "<p>This sounds like the standard HMM scaling problem.  Have a look at \"A Tutorial on Hidden Markov Models ...\" (Rabiner, 1989), section V.A \"Scaling\".</p>\n\n<p>Briefly, you can rescale <code>alpha</code> at each time to sum to 1, and rescale <code>beta</code> using the <em>same</em> factor as the corresponding <code>alpha</code>, and everything should work.</p>\n"}], "owner": {"reputation": 279, "user_id": 4244893, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3c37c4660825267e7f9a9b41e5330d06?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/4244893/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 1, "accepted_answer_id": 30769647, "answer_count": 1, "score": 0, "last_activity_date": 1433982874, "creation_date": 1433974207, "question_id": 30768182, "link": "https://stackoverflow.com/questions/30768182/baum-welch-many-possible-observations", "title": "Baum-Welch many possible observations", "body": "<p>I have implemented the baum-welch algorithm in python but I am now encountering a problem when attempting to train HMM (hidden markov model) parameters <code>A</code>,<code>B</code>, and <code>pi</code>. The problem is that I have many observation sequences <code>Y = (Y_1=y_1, Y_2=y_2,...,Y_t=y_t)</code>. And each observation variable <code>Y_t</code> can take on <code>K</code> possible values, <code>K=4096</code> in my case. Luckily I only have two states <code>N=2</code>, but my emission matrix <code>B</code> is <code>N by K</code> so 2 rows by 4096 columns.</p>\n\n<p>Now when you initialize B, each row must sum to 1. Since there are 4096 values in each of the two rows, the numbers are very small. So small that when I go to compute <code>alpha</code> and <code>beta</code> their rows eventually approach 0 as <code>t</code> increases. This is a problem because you cannot compute <code>gamma</code> as it tries to compute <code>x/0</code> or <code>0/0</code>. How can I run the algorithm without it crashing and without permanently altering my values?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433974157, "post_id": 30768149, "comment_id": 49588470, "body": "<code>int(raw_input(&#39;How many nights do you intend to stay?:&#39;)  )</code>, you should also use a try/except to cast"}, {"owner": {"reputation": 5648, "user_id": 3122880, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3839f45edaf0820ca5e184cfc6a7f1b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Ojha", "link": "https://stackoverflow.com/users/3122880/vikas-ojha"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433974303, "post_id": 30768149, "comment_id": 49588524, "body": "@PadraicCunningham, This could throw ValueError depending on the user&#39;s input. And he is already validating the input in an if statement."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 5648, "user_id": 3122880, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3839f45edaf0820ca5e184cfc6a7f1b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Ojha", "link": "https://stackoverflow.com/users/3122880/vikas-ojha"}, "edited": false, "score": 0, "creation_date": 1433974376, "post_id": 30768149, "comment_id": 49588546, "body": "@VikasNehaOjha,  that is why I said to use a try except, isdigit is not how to verify user input"}, {"owner": {"reputation": 5648, "user_id": 3122880, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3839f45edaf0820ca5e184cfc6a7f1b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Ojha", "link": "https://stackoverflow.com/users/3122880/vikas-ojha"}, "edited": false, "score": 0, "creation_date": 1433974419, "post_id": 30768149, "comment_id": 49588559, "body": "I completely agree, sorry I didnt read full and missed your statement about try/except."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 5648, "user_id": 3122880, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3839f45edaf0820ca5e184cfc6a7f1b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Ojha", "link": "https://stackoverflow.com/users/3122880/vikas-ojha"}, "edited": false, "score": 0, "creation_date": 1433974490, "post_id": 30768149, "comment_id": 49588591, "body": "@VikasNehaOjha, no worries, the OP should probably wrap the code in a while loop too so they can ask again if the input is inavlid"}, {"owner": {"reputation": 5648, "user_id": 3122880, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3839f45edaf0820ca5e184cfc6a7f1b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Ojha", "link": "https://stackoverflow.com/users/3122880/vikas-ojha"}, "edited": false, "score": 0, "creation_date": 1433974581, "post_id": 30768149, "comment_id": 49588624, "body": "I agree, that is most important, while printing an appropriate error message."}], "answers": [{"tags": [], "owner": {"reputation": 5648, "user_id": 3122880, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3839f45edaf0820ca5e184cfc6a7f1b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Ojha", "link": "https://stackoverflow.com/users/3122880/vikas-ojha"}, "is_accepted": false, "score": 2, "last_activity_date": 1433974528, "last_edit_date": 1433974528, "creation_date": 1433974107, "answer_id": 30768161, "question_id": 30768149, "link": "https://stackoverflow.com/questions/30768149/ving-trouble-with-multiplication-in-python/30768161#30768161", "title": "ving trouble with multiplication in python", "body": "<p>In Python, <em>raw_input</em> returns a string object, and thats why you already have to check for <em>isdigit</em>. So, you will need to typecast nights to int first.</p>\n\n<p>Change your code to following - </p>\n\n<pre><code>cost = 3000 * int(nights)\n</code></pre>\n\n<p>You are still not getting an error and a valid result because Python supports string multiplication, i.e., </p>\n\n<pre><code>&gt;&gt;&gt; s = 'a'\n&gt;&gt;&gt; s * 10\n'aaaaaaaaaa'\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 4996853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efde8e31e8b9cd5f338cfa73d65a42f9?s=128&d=identicon&r=PG&f=1", "display_name": "amateurprogrammer", "link": "https://stackoverflow.com/users/4996853/amateurprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433974528, "creation_date": 1433974051, "question_id": 30768149, "link": "https://stackoverflow.com/questions/30768149/ving-trouble-with-multiplication-in-python", "title": "ving trouble with multiplication in python", "body": "<p>i was recently practicing with python when i came across a slight issue with multiplication every time i run this:  </p>\n\n<pre><code>nights = raw_input('How many nights do you intend to stay?:')    \nif len(nights) &gt; 0 and nights.isdigit():         \n    cost = 3000 * nights  \n    print cost  \nelse:  \n    print \"Error, enter a number\"\n</code></pre>\n\n<p>i get this answer once i input, for example 5:</p>\n\n<pre><code>How many nights do you intend to stay?:5\n55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555 (basically very many fives)\n</code></pre>\n\n<p>anyone with any idea on how to solve it.\nthanks.</p>\n"}, {"tags": ["python", "psycopg2"], "comments": [{"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1433974133, "post_id": 30768117, "comment_id": 49588459, "body": "remove the try-except to see (and post) the whole error message."}, {"owner": {"reputation": 1, "user_id": 4996864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566e9bce54b4cb365c7b6b4b2494befb?s=128&d=identicon&r=PG&f=1", "display_name": "Cheryl", "link": "https://stackoverflow.com/users/4996864/cheryl"}, "reply_to_user": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1433974619, "post_id": 30768117, "comment_id": 49588639, "body": "File &quot;/usr/local/apps/python/anaconda-current/lib/python2.7/site-&zwnj;&#8203;packages/psycopg2/__&zwnj;&#8203;init__.py&quot;, line 164, in connect     conn = _connect(dsn, connection_factory=connection_factory, async=async) psycopg2.OperationalError: FATAL:  password authentication failed for user &quot;user-1&quot;"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433974694, "post_id": 30768117, "comment_id": 49588664, "body": "That is a password error, I don&#39;t see anything about invalid syntax"}, {"owner": {"reputation": 1, "user_id": 4996864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566e9bce54b4cb365c7b6b4b2494befb?s=128&d=identicon&r=PG&f=1", "display_name": "Cheryl", "link": "https://stackoverflow.com/users/4996864/cheryl"}, "edited": false, "score": 0, "creation_date": 1433974847, "post_id": 30768117, "comment_id": 49588724, "body": "I don&#39;t get the error when I run the code with python 2.6.3"}, {"owner": {"reputation": 1, "user_id": 4996864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566e9bce54b4cb365c7b6b4b2494befb?s=128&d=identicon&r=PG&f=1", "display_name": "Cheryl", "link": "https://stackoverflow.com/users/4996864/cheryl"}, "edited": false, "score": 0, "creation_date": 1433975848, "post_id": 30768117, "comment_id": 49589067, "body": "it turns out that the pw was being read-in from a file and has a mix of upper and lowercase"}, {"owner": {"reputation": 1, "user_id": 4996864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566e9bce54b4cb365c7b6b4b2494befb?s=128&d=identicon&r=PG&f=1", "display_name": "Cheryl", "link": "https://stackoverflow.com/users/4996864/cheryl"}, "edited": false, "score": 1, "creation_date": 1433976773, "post_id": 30768117, "comment_id": 49589390, "body": "The problem actually had to do with an end of line character that wasn&#39;t being stripped off of the password.  It works now.  Thanks."}], "owner": {"reputation": 1, "user_id": 4996864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566e9bce54b4cb365c7b6b4b2494befb?s=128&d=identicon&r=PG&f=1", "display_name": "Cheryl", "link": "https://stackoverflow.com/users/4996864/cheryl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1433974759, "creation_date": 1433973926, "last_edit_date": 1433974759, "question_id": 30768117, "link": "https://stackoverflow.com/questions/30768117/username-containing-hyphens-with-psycopg2-running-under-anaconda", "title": "username containing hyphens with psycopg2 running under Anaconda", "body": "<p>I have a postgres username that contains a hyphen (example: <code>'user-1'</code>).\nThe following code works with python 2.6.3, but not with Python 2.7.10 :: Anaconda 1.9.2 (64-bit). I tried both single and double quotes around the username.\nAny ideas?</p>\n\n<pre><code>username = 'user-1'\ntry:\n    con = psycopg2.connect(\n            database = database,\n            user = username,\n            password = password,\n            host = hostname\n        )\nexcept:\n    print \"I am unable to connect to the database.\"\n</code></pre>\n\n<p>The code errors with:</p>\n\n<blockquote>\n  <p>\"/usr/local/apps/python/anaconda-current/lib/python2.7/site-packages/psycopg2/<strong>i\u200c\u200bnit</strong>.py\", line 164, in connect conn = _connect(dsn, connection_factory=connection_factory, async=async) psycopg2.OperationalError: FATAL: password authentication failed for user \"user-1</p>\n</blockquote>\n"}, {"tags": ["python", "python-3.x", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 3, "last_activity_date": 1433981130, "creation_date": 1433981130, "answer_id": 30769412, "question_id": 30768102, "link": "https://stackoverflow.com/questions/30768102/how-can-i-keep-an-annotation-within-the-visible-window/30769412#30769412", "title": "How can I keep an annotation within the visible window?", "body": "<p>Since you said you could do it if you knew if the annotation was within the frame, here's a way to do so:</p>\n\n<pre><code>def in_frame(annotation):\n    pyplot.show(block=False) # we need this to get good data on the next line\n    bbox = annotation.get_bbox_patch()\n    uleft_coord = (0, bbox.get_height())\n    pnt = bbox.get_data_transform().transform_point(uleft_coord)\n    return pyplot.gcf().get_window_extent().contains(*pnt)\n</code></pre>\n\n<p>The idea is that we grab a point from the bbox (bounding box) of the annotation, and ask the bbox of the figure (frame) if it contains that point. This only checks the upper-left-hand point, but we could get better by checking more corners. For your image, this returns <code>False</code>. Here are some examples that return true:</p>\n\n<p><img src=\"https://i.stack.imgur.com/8cSNOm.png\" alt=\"enter image description here\"> <img src=\"https://i.stack.imgur.com/jsotim.png\" alt=\"enter image description here\"></p>\n\n<p>And another that returns false:</p>\n\n<p><img src=\"https://i.stack.imgur.com/GIMUxm.png\" alt=\"enter image description here\"></p>\n\n<p>Let's explain the function in more detail so you can work off of it:</p>\n\n<pre><code>pyplot.show(block=False)             # display the figure, so that the annotation bbox\n                                     # will return the actual box. Otherwise it says the\n                                     # bbox has 1 pixel width and height.\nbbox = annotation.get_bbox_patch()\nuleft_coord = (0, bbox.get_height())\n\n# kind of scary, so let's break this down:\npnt = bbox.get_data_transform().transform_point(uleft_coord)\n      bbox.get_data_transform()      # this gives us a transform that can\n                                     # convert a pixel from the coordinates\n                                     # of the bbox to coordinates that the\n                                     # figure uses.\npnt = (...).transform_point(uleft_coord) # this converts the uleft_coord into\n                                         # the coordinate system of the figure\n# This is that all together:\npnt = bbox.get_data_transform().transform_point(uleft_coord)\n\n# here's another of those scary lines:\nreturn pyplot.gcf().get_window_extent().contains(*pnt)\n       pyplot.gcf()                     # this calls \"get current figure\"\n       pyplot.gcf().get_window_extent() # and now let's get its bbox\n       (       ...     ).contains(*pnt) # and ask it if it contains pnt\nreturn pyplot.gcf().get_window_extent().contains(*pnt)\n</code></pre>\n\n<p>Links:</p>\n\n<ul>\n<li><a href=\"http://matplotlib.org/api/text_api.html#matplotlib.text.Text.get_bbox_patch\" rel=\"nofollow noreferrer\"><code>annotation.get_bbox_patch()</code></a> which returns <a href=\"http://matplotlib.org/api/patches_api.html?highlight=fancybbox#matplotlib.patches.FancyBboxPatch\" rel=\"nofollow noreferrer\">this</a></li>\n<li><a href=\"http://matplotlib.org/api/patches_api.html?highlight=fancybbox#matplotlib.patches.Patch.get_data_transform\" rel=\"nofollow noreferrer\"><code>bbox.get_data_transform()</code></a></li>\n<li><a href=\"http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.gcf\" rel=\"nofollow noreferrer\"><code>pyplot.gcf()</code></a></li>\n<li><a href=\"http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure.get_window_extent\" rel=\"nofollow noreferrer\"><code>figure.get_window_extent()</code></a></li>\n<li><a href=\"http://matplotlib.org/devel/transformations.html#matplotlib.transforms.BboxBase.contains\" rel=\"nofollow noreferrer\"><code>contains(*pnt)</code></a></li>\n</ul>\n"}], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 30769412, "answer_count": 1, "score": 2, "last_activity_date": 1433981130, "creation_date": 1433973846, "last_edit_date": 1433975246, "question_id": 30768102, "link": "https://stackoverflow.com/questions/30768102/how-can-i-keep-an-annotation-within-the-visible-window", "title": "How can I keep an annotation within the visible window?", "body": "<p>How can I keep an annotation within the window, in Matplotlib? Basically, I want to fix this so that the yellow box will be visible:</p>\n\n<p><img src=\"https://i.stack.imgur.com/rg19Y.png\" alt=\"enter image description here\"></p>\n\n<p>Which was generated by this mcve:</p>\n\n<pre><code>from matplotlib import pyplot\n\npoint = pyplot.scatter(0, 0)\ns = '''This is some really long text to go into the annotation that is way\ntoo long to fit inside the figure window.'''\n\nannotation = pyplot.annotate(\n    s=s, xy=(0, 0), xytext=(-10, 10), textcoords='offset points',\n    ha='right', va='bottom', bbox=dict(boxstyle='round,pad=0.5', fc='yellow')\n)\n\npyplot.show()\n</code></pre>\n\n<p>I intend for the annotation to be a mouseover, but it's not necessary to implement that code to show the problem (I already figured out how to do that). However, perhaps there is a way to add a tooltip to it using tkinter, and that would probably completely fix my problem.</p>\n\n<p>Perhaps there is a way to detect that the annotation is outside of the window. If there was such a way, this psuedocode would do what I want:</p>\n\n<pre><code>if annotation.is_not_within(window):\n    draw_annotation_to_go_the_other_way(annotation)\n</code></pre>\n\n<p>Unfortunately, I haven't been able to find such a way.</p>\n\n<p>Also, perhaps there is a built-in method that keeps the annotation within the bounds automagically. I also have been unable to find such a way.</p>\n\n<p>How can I keep the annotation within the bounds of the figure window?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 267, "user_id": 4979663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XED7i.jpg?s=128&g=1", "display_name": "Mouse Reeve", "link": "https://stackoverflow.com/users/4979663/mouse-reeve"}, "edited": false, "score": 0, "creation_date": 1433974034, "post_id": 30768097, "comment_id": 49588410, "body": "This seems to work for me. Can you elaborate on the context in which you&#39;re using the regex?"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 4, "creation_date": 1433974047, "post_id": 30768097, "comment_id": 49588420, "body": "Why you don&#39;t use a X/HTML parser?"}, {"owner": {"reputation": 16152, "user_id": 205233, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd3b79356ba4ea1f7e8d6be783446e59?s=128&d=identicon&r=PG&f=1", "display_name": "Filburt", "link": "https://stackoverflow.com/users/205233/filburt"}, "edited": false, "score": 6, "creation_date": 1433974437, "post_id": 30768097, "comment_id": 49588570, "body": "<a href=\"http://stackoverflow.com/a/1732454/205233\">You cannot parse Html with RegEx</a>"}, {"owner": {"reputation": 67, "user_id": 3507832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f93d6869ace56587fe5cc6e26c1d40eb?s=128&d=identicon&r=PG&f=1", "display_name": "devbgs", "link": "https://stackoverflow.com/users/3507832/devbgs"}, "reply_to_user": {"reputation": 267, "user_id": 4979663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XED7i.jpg?s=128&g=1", "display_name": "Mouse Reeve", "link": "https://stackoverflow.com/users/4979663/mouse-reeve"}, "edited": false, "score": 0, "creation_date": 1433974450, "post_id": 30768097, "comment_id": 49588577, "body": "I&#39;m using this in python on debian. @MouseReeve"}, {"owner": {"reputation": 388, "user_id": 3430628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPnrd.png?s=128&g=1", "display_name": "whoisj", "link": "https://stackoverflow.com/users/3430628/whoisj"}, "edited": false, "score": 0, "creation_date": 1433974505, "post_id": 30768097, "comment_id": 49588603, "body": "Try <code>&#39;&lt;div\\s*class\\s*=\\s*\\&quot;link\\&quot;&gt;\\s*&lt;a\\s*href\\s*=\\s*\\&quot;([^\\&quot;]+)\\&quot;&zwnj;&#8203;&#39;</code> you might get more mileage."}, {"owner": {"reputation": 18696, "user_id": 703229, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5c7b9b4837d58fb7ceac0e3bbf234246?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/703229/sam"}, "reply_to_user": {"reputation": 16152, "user_id": 205233, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd3b79356ba4ea1f7e8d6be783446e59?s=128&d=identicon&r=PG&f=1", "display_name": "Filburt", "link": "https://stackoverflow.com/users/205233/filburt"}, "edited": false, "score": 1, "creation_date": 1433974884, "post_id": 30768097, "comment_id": 49588737, "body": "@Filburt &quot;cannot&quot; -&gt; &quot;should not&quot;"}, {"owner": {"reputation": 16152, "user_id": 205233, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd3b79356ba4ea1f7e8d6be783446e59?s=128&d=identicon&r=PG&f=1", "display_name": "Filburt", "link": "https://stackoverflow.com/users/205233/filburt"}, "reply_to_user": {"reputation": 18696, "user_id": 703229, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5c7b9b4837d58fb7ceac0e3bbf234246?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/703229/sam"}, "edited": false, "score": 0, "creation_date": 1433975147, "post_id": 30768097, "comment_id": 49588840, "body": "@Sam I just cited from the linked (sarcastic) answer. Of course you can do it in some cases (see other answers/comments there) but with the tag soup in question a robust parser would be the better choice."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1433979844, "post_id": 30768097, "comment_id": 49590354, "body": "You can parse a <i>subset</i> of valid HTML with regular expressions, but it&#39;s much better to use a parser than to try to determine if the HTML you want to parse is in that subset."}], "answers": [{"tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 3, "last_activity_date": 1433978418, "creation_date": 1433978418, "answer_id": 30768969, "question_id": 30768097, "link": "https://stackoverflow.com/questions/30768097/regular-expression-dont-work/30768969#30768969", "title": "Regular expression don&#39;t work", "body": "<p>Since you are coding this in Python, I can suggest a <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/\" rel=\"nofollow\">Beautiful Soup</a> based solution.</p>\n\n<pre><code>from bs4 import BeautifulSoup\nhtml = 'YOUR STRING'\nsoup = BeautifulSoup(html)\ndivs = soup.find_all(\"div\", {\"class\":\"link\"})\n\nfor tag in divs:\n    a = tag.find_all(\"a\")\n    for t in a:\n        if t.has_attr('href'):\n            print t['href']\n</code></pre>\n\n<p>Based on your sample input, this outputs:</p>\n\n<pre><code>http://www.google.com/glass/start/\nhttp://pl.wikipedia.org/wiki/Google_Glass\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 3507832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f93d6869ace56587fe5cc6e26c1d40eb?s=128&d=identicon&r=PG&f=1", "display_name": "devbgs", "link": "https://stackoverflow.com/users/3507832/devbgs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "answer_count": 1, "score": -3, "last_activity_date": 1433978429, "creation_date": 1433973831, "last_edit_date": 1433978429, "question_id": 30768097, "link": "https://stackoverflow.com/questions/30768097/regular-expression-dont-work", "title": "Regular expression don&#39;t work", "body": "<p>Hi I have trouble with regex.</p>\n\n<p>This is some source:</p>\n\n<pre><code>    &lt;div class=\"resultHeader googleHeader\"&gt;\n                            Wyniki z Google\n                    &lt;/div&gt;\n\n                &lt;div class=\"boxResult2  \"&gt;\n                                                                &lt;div class=\"box \"&gt;\n                &lt;div class=\"result\"&gt;\n                    &lt;div class=\"link\"&gt; &lt;a href=\"http://www.google.com/glass/start/\"&gt;&lt;b&gt;Google Glass&lt;/b&gt;&lt;/a&gt; &lt;/div&gt;\n                    &lt;div class=\"source\"&gt;\n                        http://www.google.com/glass/start/\n\n                            - &lt;a rel=\"nofollow\" href=\"query.html?hl=pl&amp;amp;qt=related:http%3A%2F%2Fwww.google.com%2Fglass%2Fstart%2F\"&gt;Podobne strony&lt;/a&gt;\n                                            &lt;/div&gt;&lt;!-- source END --&gt;\n                                            &lt;div class=\"desc\"&gt;Thanks for exploring with us. The journey doesn&amp;#39;t end here. You&amp;#39;ll start to see &lt;br /&gt;\nfuture versions of &lt;b&gt;Glass&lt;/b&gt; when they&amp;#39;re ready (for now, no peeking).&lt;/div&gt;\n                                    &lt;/div&gt;&lt;!-- result End --&gt;\n            &lt;/div&gt;&lt;!-- box End --&gt;\n                                                                &lt;div class=\"box \"&gt;\n                &lt;div class=\"result\"&gt;\n                    &lt;div class=\"link\"&gt; &lt;a href=\"http://pl.wikipedia.org/wiki/Google_Glass\"&gt;&lt;b&gt;Google Glass&lt;/b&gt; \u2013 Wikipedia, wolna encyklopedia&lt;/a&gt; &lt;/div&gt;\n                    &lt;div class=\"source\"&gt;\n                        http://pl.wikipedia.org/wiki/Google_Glass\n\n                            - &lt;a rel=\"nofollow\" href=\"query.html?hl=pl&amp;amp;qt=related:http%3A%2F%2Fpl.wikipedia.org%2Fwiki%2FGoogle_Glass\"&gt;Podobne strony&lt;/a&gt;\n                                            &lt;/div&gt;&lt;!-- source END --&gt;\n                                            &lt;div class=\"desc\"&gt;&lt;b&gt;Google Glass&lt;/b&gt; to okulary o rozszerzonej rzeczywisto\u015bci stworzone przez firm\u0119 &lt;br /&gt;\nGoogle. Okulary te maj\u0105 docelowo mie\u0107 funkcje standardowego smartfona, ale&amp;nbsp;...&lt;/div&gt;\n                                    &lt;/div&gt;&lt;!-- result End --&gt;\n            &lt;/div&gt;&lt;!-- box End --&gt;\n</code></pre>\n\n<p>And I want just link between <code>&lt;a href=\" and \"&gt;</code> - like this:</p>\n\n<pre><code>http://www.google.com/glass/start/\n</code></pre>\n\n<p>I wrote this.. <code>'&lt;div class=\"link\"&gt; &lt;a href=\"([^ ]+)\"'</code> but isn't working.. :(</p>\n"}, {"tags": ["python", "regex", "parsing", "csv", "pyparsing"], "comments": [{"owner": {"reputation": 3870, "user_id": 2336725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20a0b96a26cf233d752469445595f872?s=128&d=identicon&r=PG", "display_name": "Teepeemm", "link": "https://stackoverflow.com/users/2336725/teepeemm"}, "edited": false, "score": 0, "creation_date": 1433974037, "post_id": 30768061, "comment_id": 49588415, "body": "Split on colons?  It seems like your main problem is that the keys can be one word or two.  Maybe create a list of two word keys, and otherwise the key must be one word.  And anything before the keyword must be the value of the previous record."}, {"owner": {"reputation": 129, "user_id": 4664062, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/3c42bd3bf0e6a245068597df88628605?s=128&d=identicon&r=PG", "display_name": "dharkko", "link": "https://stackoverflow.com/users/4664062/dharkko"}, "reply_to_user": {"reputation": 3870, "user_id": 2336725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20a0b96a26cf233d752469445595f872?s=128&d=identicon&r=PG", "display_name": "Teepeemm", "link": "https://stackoverflow.com/users/2336725/teepeemm"}, "edited": false, "score": 0, "creation_date": 1433976081, "post_id": 30768061, "comment_id": 49589138, "body": "don&#39;t understand the downvote - the question shows a path of research, effort, coding, and is quite well laid out.. just need help moving forward, that&#39;s all.. thx"}, {"owner": {"reputation": 12819, "user_id": 4805990, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d9f613c6b101a7c571caac271c632ca6?s=128&d=identicon&r=PG&f=1", "display_name": "Leb", "link": "https://stackoverflow.com/users/4805990/leb"}, "edited": false, "score": 0, "creation_date": 1433977038, "post_id": 30768061, "comment_id": 49589476, "body": "The reason your loop is showing only one entry instead of two is the way you constructed it. It&#39;s looping and finding a match to the condition you provided and then it stops. It&#39;s doing what it&#39;s supposed to. You&#39;re better off looping through the file and assign each entry (as a whole) then constructing a list."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1433977832, "post_id": 30768061, "comment_id": 49589755, "body": "Why not just use a regex and be done with it?"}, {"owner": {"reputation": 129, "user_id": 4664062, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/3c42bd3bf0e6a245068597df88628605?s=128&d=identicon&r=PG", "display_name": "dharkko", "link": "https://stackoverflow.com/users/4664062/dharkko"}, "edited": false, "score": 0, "creation_date": 1433981369, "post_id": 30768061, "comment_id": 49590754, "body": "@sln you make it sound so easy.. there are around 50 total field names, and many of them don&#39;t show up on each record.. if I could do it with regex I would have.. smtg constructive would be nice to help me over the hump.. thx"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1434034850, "post_id": 30768061, "comment_id": 49618775, "body": "@dharkko - Regex is string manipulation on steroids. If you can&#39;t do it with that sophistication, how do you hope to do it with primitive&#39;s ? As for not showing up on each record, nothing says it has to when using regex, optional expressions, etc ..."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 4664062, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/3c42bd3bf0e6a245068597df88628605?s=128&d=identicon&r=PG", "display_name": "dharkko", "link": "https://stackoverflow.com/users/4664062/dharkko"}, "edited": false, "score": 0, "creation_date": 1433994776, "post_id": 30770639, "comment_id": 49593871, "body": "This attempt gives me fresh inspiration to dive back into this - fantastic. I really like the multiple-passes approach to this problem, because there are a number of constraints - many that you mentioned - that have made it more difficult than the norm. Good effort indeed.."}], "tags": [], "owner": {"reputation": 21144, "user_id": 478656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fd656a5e8d2a51290877d695649456ad?s=128&d=identicon&r=PG", "display_name": "TessellatingHeckler", "link": "https://stackoverflow.com/users/478656/tessellatingheckler"}, "is_accepted": false, "score": 3, "last_activity_date": 1433990410, "creation_date": 1433990410, "answer_id": 30770639, "question_id": 30768061, "link": "https://stackoverflow.com/questions/30768061/parsing-unstructured-text-file-with-python/30770639#30770639", "title": "Parsing unstructured text file with Python", "body": "<p>(This isn't a complete answer, but it's too long for a comment).</p>\n\n<ul>\n<li>Field names can have spaces (e.g. <code>MLS number</code>)</li>\n<li>Several fields can appear on each line (e.g. <code>Home: Pager:</code>)</li>\n<li>The Notes field has the time in it, with a <code>:</code> in it</li>\n</ul>\n\n<p>These mean you can't take your approach to identifying the fieldnames by regex. It's impossible for it to know whether \"MLS\" is part of the previous data value or the subsequent fieldname.</p>\n\n<p>Some of the <code>Home: Pager:</code> lines refer to the Seller, some to the Buyer or the Lessee Agent or the Leasing Agent. This means the naive line-by-line approach I take below doesn't work either.</p>\n\n<p>This is the code I was working on, it runs against your test data but gives incorrect output due to the above. It's here for a reference of the approach I was taking:</p>\n\n<pre><code>replaces = [\n    ('Closing Report for', 'Report_for:')\n    ,('Report for', 'Report_for:')\n    ,('File number', 'File_number')\n    ,('Primary closing party', 'Primary_closing_party')\n    ,('MLS number', 'MLS_number')\n    ,('Sale Price', 'Sale_Price')\n    ,('Account owner', 'Account_owner')\n    # ...\n    # etc.\n]\n\ndef fix_linemash(data):\n    # splits many fields on one line into several lines\n\n    results = []\n    mini_collection = []\n    for token in data.split(' '):\n        if ':' not in token:\n            mini_collection.append(token)\n        else:\n            results.append(' '.join(mini_collection))\n            mini_collection = [token]\n\n    return [line for line in results if line]\n\ndef process_record(data):\n    # takes a collection of lines\n    # fixes them, and builds a record dict\n    record = {}\n\n    for old, new in replaces:\n        data = data.replace(old, new)\n\n    for line in fix_linemash(data):\n        print line\n        name, value = line.split(':', 1)\n        record[name.strip()] = value.strip()\n\n    return record\n\n\nrecords = []\ncollection = []\nblank_flag = False\n\nfor line in open('d:/lol.txt'):\n    # Read through the file collecting lines and\n    # looking for double blank lines\n    # every pair of blank lines, process the stored ones and reset\n\n    line = line.strip()\n    if line.startswith('Page '): continue\n    if line.startswith('Printed on '): continue\n\n    if not line and blank_flag:      # record finished\n        records.append( process_record(' '.join(collection)) )\n        blank_flag = False\n        collection = []\n\n    elif not line:  # maybe end of record?\n        blank_flag = True\n\n    else:   # false alarm, record continues\n        blank_flag = False\n        collection.append(line)\n\nfor record in records:\n    print record\n</code></pre>\n\n<p>I'm now thinking it would be a much better idea to do some pre-processing tidyup steps over the data:</p>\n\n<ol>\n<li>Strip out \"Page n of n\" and \"Printed on ...\" lines, and similar</li>\n<li>Identify all valid field names, then break up the combined lines, meaning every line has one field only, fields start at the start of a line.</li>\n<li>Run through and just process the Seller/Buyer/Agents blocks, replacing fieldnames with an identifying prefix, e.g. <code>Email:</code> ->  <code>Seller Email:</code>.</li>\n</ol>\n\n<p>Then write a record parser, which should be easy - check for two blank lines, split the lines at the first colon, use the left bit as the field name and the right bit as the value. Store however you want (nb. that dictionary keys are unordered).</p>\n"}, {"tags": [], "owner": {"reputation": 670, "user_id": 1490470, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/gCBWj.jpg?s=128&g=1", "display_name": "chapter3", "link": "https://stackoverflow.com/users/1490470/chapter3"}, "is_accepted": false, "score": 0, "last_activity_date": 1434007805, "creation_date": 1434007805, "answer_id": 30774365, "question_id": 30768061, "link": "https://stackoverflow.com/questions/30768061/parsing-unstructured-text-file-with-python/30774365#30774365", "title": "Parsing unstructured text file with Python", "body": "<p>I suppose it is easier to start a new record by hitting the word \"Page\".</p>\n\n<p>Just share a little bit of my own experience - it just too difficult to write a generalized parser.</p>\n\n<p>The situation isn't that bad given the data here. Instead of using a simple list to store an entry, use an object. Add all other fields as attributes/values to the object.</p>\n"}], "owner": {"reputation": 129, "user_id": 4664062, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/3c42bd3bf0e6a245068597df88628605?s=128&d=identicon&r=PG", "display_name": "dharkko", "link": "https://stackoverflow.com/users/4664062/dharkko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1695, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1434052764, "creation_date": 1433973650, "last_edit_date": 1434004707, "question_id": 30768061, "link": "https://stackoverflow.com/questions/30768061/parsing-unstructured-text-file-with-python", "title": "Parsing unstructured text file with Python", "body": "<p>I have a text file, a few snippets of which look like this:</p>\n\n<pre><code>Page 1 of 515                   \nClosing Report for Company Name LLC                 \n\n222 N 9th Street, #100 &amp; 200, Las Vegas, NV, 89101                  \n\nFile number:    Jackie Grant    Status: Fell Thru   Primary closing party:  Seller\nAcceptance: 01/01/2001  Closing date:   11/11/2011  Property type:  Commercial Lease\nMLS number: Sale price: $200,000    Commission: $1,500.00   \nNotes:  08/15/2000 02:30PM by Roger Lodge This property is a Commercial Lease handled by etc..  \n\nSeller: Company Name LLC                    \nCompany name:   Company Name LLC                \nAddress:    222 N 9th Street, #100 &amp; 200, Las Vegas, NV, 89101              \nHome:   Pager:              \nBusiness:   Fax:                \nMobile: Email:              \nBuyer: Tomlinson, Ladainian                 \nAddress:    222 N 9th Street, #100 &amp; 200, Las Vegas, NV, 89101              \nHome:   Pager:              \nBusiness:   555-555-5555    Fax:            \nMobile: Email:              \nLessee Agent: Blank, Arthur                 \nCompany name:   Sprockets Inc.              \nAddress:    5001 Old Man Dr, North Las Vegas, NV, 89002             \nHome:   (575) 222-3455  Pager:          \nBusiness:   Fax:    999-9990            \nMobile: (702) 600-3492  Email:  sprockets@yoohoo.com        \nLeasing Agent: Van Uytnyck, Chameleon                   \nCompany name:   Company Name LLC                \nAddress:                    \nHome:   Pager:              \nBusiness:   Fax:    909-222-2223            \nMobile: 595-595-5959    Email:          \n\n(should be 2 spaces here.. this is not in normal text file)\n\n\nPrinted on Friday, June 12, 2015                    \nAccount owner: Roger Goodell                    \nPage 2 of 515                   \nReport for Adrian (Allday) Peterson                     \n\n242 N 9th Street, #100 &amp; 200                    \n\nFile number:    Soap    Status: Closed/Paid Primary closing party:  Buyer\nAcceptance: 01/10/2010  Closing date:   01/10/2010  Property type:  RRR\nMLS number: Sale price: $299,000    Commission: 33.00%  \n\nSeller: SOS, Bank                   \nAddress:    242 N 9th Street, #100 &amp; 200                \nHome:   Pager:              \nBusiness:   Fax:                \nMobile: Email:              \nBuyer: Sabel, Aaron                 \nAddress:                    \nHome:   Pager:              \nBusiness:   Fax:                \nMobile: Email:  sia@yoohoo.com          \nEscrow Co: Schneider, Patty                 \nCompany name:   National Football League                \nAddress:    242 N 9th Street, #100 &amp; 200                \nHome:   Pager:              \nBusiness:   800-2009    Fax:    800-1100        \nMobile: Email:              \nBuyers Agent: Munchak, Mike                 \nCompany name:   Commission Group                \nAddress:                    \nHome:   Pager:              \nBusiness:   Fax:                \nMobile: 483374-3892 Email:  donation@yoohoo.net     \nListing Agent: Ricci, Christina                 \nCompany name:   Other Guys              \nAddress:                    \nHome:   Pager:              \nBusiness:   Fax:                \nMobile: 888-333-3333    Email:  general.adama@cylon.net      \n</code></pre>\n\n<p>Here's my code:</p>\n\n<pre><code>import re\n\nfile = open('file-path.txt','r')\n\n# if there are more than two consecutive blank lines, then we start a new Entry\nentries = []\ncurr = []\nprev_blank = False\nfor line in file:\n    line = line.rstrip('\\n').strip()\n    if (line == ''):\n        if prev_blank == True:\n            # end of the entry, create append the entry\n            if(len(curr) &gt; 0):\n                entries.append(curr)\n                print curr\n                curr = []\n                prev_blank = False\n        else:\n            prev_blank = True\n    else:\n        prev_blank = False\n        # we need to parse the line\n        line_list = line.split()\n        str = ''\n        start = False\n        for item in line_list:\n            if re.match('[a-zA-Z\\s]+:.*',item):\n                if len(str) &gt; 0:\n                    curr.append(str)\n                str = item\n                start = True\n            elif start == True:\n                str = str + ' ' + item\n</code></pre>\n\n<p>Here is the output:</p>\n\n<pre><code>['number: Jackie Grant', 'Status: Fell Thru Primary closing', 'Acceptance: 01/01/2001 Closing', 'date: 11/11/2011 Property', 'number: Sale', 'price: $200,000', 'Home:', 'Business:', 'Mobile:', 'Home:', 'Business: 555-555-5555', 'Mobile:', 'Home: (575) 222-3455', 'Business:', 'Mobile: (702) 600-3492', 'Home:', 'Business:', 'Mobile: 595-595-5959']\n</code></pre>\n\n<p>My issues are as follows:</p>\n\n<ol>\n<li>First, there should be 2 records as output, and I'm only outputting one.</li>\n<li>In the top block of text, my script has trouble knowing where the previous value ends, and the new one starts: 'Status: Fell Thru' should be one value, 'Primary closing party:', 'Buyer\nAcceptance: 01/10/2010', 'Closing date: 01/10/2010', 'Property type:    RRR', 'MLS number:', 'Sale price:   $299,000', 'Commission: 33.00%' should be caught.</li>\n<li>Once this is parsed correctly, I will need to parse again to separate keys from values (ie. 'Closing date':01/10/2010), ideally in a list of dicts.</li>\n</ol>\n\n<p>I can't think of a better way other than using regex to pick out keys, and then grabbing the snippets of text that follow. </p>\n\n<p>When complete, I'd like a csv w/a header row filled with keys, that I can import into pandas w/read_csv. I've spent quite a few hours on this one..</p>\n"}, {"tags": ["python", "file", "import"], "comments": [{"owner": {"reputation": 3285, "user_id": 4286177, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b15ea6889ed8351f27f11368701a9774?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony Dito", "link": "https://stackoverflow.com/users/4286177/anthony-dito"}, "edited": false, "score": 0, "creation_date": 1433973726, "post_id": 30768056, "comment_id": 49617426, "body": "You can&#39;t actually do that. If you want to get those words you have to read them into your program. You can see how to do that with <a href=\"http://stackoverflow.com/questions/16922214/reading-a-text-file-and-splitting-it-into-single-words-in-python\">this question</a>."}, {"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1433973791, "post_id": 30768056, "comment_id": 49588313, "body": "<code>import</code> is used to include library functions. To read files see <a href=\"https://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433974766, "post_id": 30768056, "comment_id": 49588691, "body": "Did you try Googling &quot;python import&quot;?"}, {"owner": {"reputation": 6155, "user_id": 4403872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22f9db7dbd564a7d34f76a0f3f5fbb04?s=128&d=identicon&r=PG&f=1", "display_name": "vk1011", "link": "https://stackoverflow.com/users/4403872/vk1011"}, "edited": false, "score": 0, "creation_date": 1433977658, "post_id": 30768056, "comment_id": 49589701, "body": "What do you want to do with the list of words? Do you wish to create a list of the words, or just print them out exactly as they appear in the file? What does the file look like - are the words comma separated, on separate rows, etc.?"}], "answers": [{"tags": [], "owner": {"reputation": 8316, "user_id": 4759209, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ff821860933d0565fe62aed9fe2132f7?s=128&d=identicon&r=PG&f=1", "display_name": "farhawa", "link": "https://stackoverflow.com/users/4759209/farhawa"}, "is_accepted": false, "score": 4, "last_activity_date": 1433974911, "creation_date": 1433974911, "answer_id": 30768316, "question_id": 30768056, "link": "https://stackoverflow.com/questions/30768056/importing-external-txt-file-in-python/30768316#30768316", "title": "importing external &quot;.txt&quot; file in python", "body": "<p>As you can't import a .txt file, I would suggest to read words this way.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>list_ = open(\"world.txt\").read().split()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 435, "user_id": 2403526, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yaicz.jpg?s=128&g=1", "display_name": "abrarisme", "link": "https://stackoverflow.com/users/2403526/abrarisme"}, "is_accepted": false, "score": 0, "last_activity_date": 1433976254, "last_edit_date": 1495540936, "creation_date": 1433976254, "answer_id": 30768581, "question_id": 30768056, "link": "https://stackoverflow.com/questions/30768056/importing-external-txt-file-in-python/30768581#30768581", "title": "importing external &quot;.txt&quot; file in python", "body": "<p><a href=\"https://docs.python.org/3/reference/import.html\" rel=\"nofollow noreferrer\">Import</a> gives you access to other modules in your program. You can't decide to import a text file. If you want to read from a file that's in the same directory, you can look at <a href=\"https://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files\" rel=\"nofollow noreferrer\">this</a>. Here's another StackOverflow <a href=\"https://stackoverflow.com/questions/7409780/reading-entire-file-in-python\">post</a> about it.</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 1668844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a14a67821feb18da1440f6945a8d0df?s=128&d=identicon&r=PG", "display_name": "user1668844", "link": "https://stackoverflow.com/users/1668844/user1668844"}, "is_accepted": false, "score": 3, "last_activity_date": 1433976736, "creation_date": 1433976736, "answer_id": 30768674, "question_id": 30768056, "link": "https://stackoverflow.com/questions/30768056/importing-external-txt-file-in-python/30768674#30768674", "title": "importing external &quot;.txt&quot; file in python", "body": "<p>The \"import\" keyword is for attaching python definitions that are created external to the current python program. So in your case, where you just want to read a file with some text in it, use:</p>\n\n<p>text = open(\"words.txt\", \"rb\").read()</p>\n"}, {"comments": [{"owner": {"reputation": 532, "user_id": 13142325, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgyePXmbQGkdff6O_ZG7Ubb_jmNsWFMLg2fcGxg-A=k-s128", "display_name": "Ty Irvine", "link": "https://stackoverflow.com/users/13142325/ty-irvine"}, "edited": false, "score": 0, "creation_date": 1606508526, "post_id": 45720089, "comment_id": 114990792, "body": "<code>&#39;words.txt&#39;</code> will open if it&#39;s in the same directory as the python file. If you need to grab a file from somewhere else just use it&#39;s path name like <code>&#39;&#47;Users&#47;username&#47;Desktop&#47;sample.txt&#39;</code>"}], "tags": [], "owner": {"reputation": 161, "user_id": 8389206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a16dd55131c7f28a4ce62c02bb57fa46?s=128&d=identicon&r=PG&f=1", "display_name": "No Spoko", "link": "https://stackoverflow.com/users/8389206/no-spoko"}, "is_accepted": false, "score": 16, "last_activity_date": 1502905969, "creation_date": 1502905969, "answer_id": 45720089, "question_id": 30768056, "link": "https://stackoverflow.com/questions/30768056/importing-external-txt-file-in-python/45720089#45720089", "title": "importing external &quot;.txt&quot; file in python", "body": "<p>You can import modules but not text files. If you want to print the content do the following:</p>\n\n<p>Open a text file for reading:</p>\n\n<pre><code>f = open('words.txt', 'r')\n</code></pre>\n\n<p>Store content in a variable:</p>\n\n<pre><code>content = f.read()\n</code></pre>\n\n<p>Print content of this file:</p>\n\n<pre><code>print(content)\n</code></pre>\n\n<p>After you're done close a file:</p>\n\n<pre><code>f.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 6204748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EnYex.jpg?s=128&g=1", "display_name": "mr_orange", "link": "https://stackoverflow.com/users/6204748/mr-orange"}, "is_accepted": false, "score": 2, "last_activity_date": 1543957646, "last_edit_date": 1543957646, "creation_date": 1541036125, "answer_id": 53094097, "question_id": 30768056, "link": "https://stackoverflow.com/questions/30768056/importing-external-txt-file-in-python/53094097#53094097", "title": "importing external &quot;.txt&quot; file in python", "body": "<p>numpy's genfromtxt or loadtxt is what I use:</p>\n\n<pre><code>import numpy as np\n...\nwordset = np.genfromtxt(fname='words.txt')\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/44765565/loading-a-dataset-in-python-numpy-when-there-are-variable-spaces-delimiting-co\">This</a> got me headed in the right direction and solved my problem.</p>\n"}, {"tags": [], "owner": {"reputation": 407, "user_id": 4040580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iuLC.jpg?s=128&g=1", "display_name": "Gwen Au", "link": "https://stackoverflow.com/users/4040580/gwen-au"}, "is_accepted": false, "score": 0, "last_activity_date": 1606188505, "creation_date": 1606188505, "answer_id": 64979844, "question_id": 30768056, "link": "https://stackoverflow.com/questions/30768056/importing-external-txt-file-in-python/64979844#64979844", "title": "importing external &quot;.txt&quot; file in python", "body": "<p>This answer is modified from <a href=\"https://stackoverflow.com/users/378065/infrared\">infrared</a>'s answer at <a href=\"https://stackoverflow.com/questions/7980288/splitting-large-text-file-by-a-delimiter-in-python\">Splitting large text file by a delimiter in Python</a></p>\n<pre><code>with open('words.txt') as fp:\n    contents = fp.read()\n    for entry in contents:\n        # do something with entry  \n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 4996847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c7ccc4434ebf4ea058c34a1eff03b85?s=128&d=identicon&r=PG&f=1", "display_name": "Daniyal Durrani", "link": "https://stackoverflow.com/users/4996847/daniyal-durrani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121994, "favorite_count": 3, "answer_count": 6, "score": 5, "last_activity_date": 1606188505, "creation_date": 1433973638, "question_id": 30768056, "link": "https://stackoverflow.com/questions/30768056/importing-external-txt-file-in-python", "title": "importing external &quot;.txt&quot; file in python", "body": "<p>I am trying to import a text with a list about 10 words.</p>\n\n<pre><code>import words.txt\n</code></pre>\n\n<p>That doesn't work... \nAnyway, Can I import the file without this showing up?</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"D:/python/p1.py\", line 9, in &lt;module&gt;\nimport words.txt\nImportError: No module named 'words'\n</code></pre>\n\n<p>Any sort of help is appreciated. </p>\n"}, {"tags": ["python", "string", "set", "combinations"], "comments": [{"owner": {"reputation": 3285, "user_id": 4286177, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b15ea6889ed8351f27f11368701a9774?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony Dito", "link": "https://stackoverflow.com/users/4286177/anthony-dito"}, "edited": false, "score": 4, "creation_date": 1433973143, "post_id": 30767948, "comment_id": 49588102, "body": "you need to use permutations. Permutations also take order into account."}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1433973297, "post_id": 30767948, "comment_id": 49588149, "body": "check it here <a href=\"https://docs.python.org/2/library/itertools.html#itertools.permutations\" rel=\"nofollow noreferrer\">docs.python.org/2/library/itertools.html#itertools.permutati&zwnj;&#8203;ons</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3285, "user_id": 4286177, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b15ea6889ed8351f27f11368701a9774?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony Dito", "link": "https://stackoverflow.com/users/4286177/anthony-dito"}, "is_accepted": true, "score": 2, "last_activity_date": 1433973315, "creation_date": 1433973315, "answer_id": 30767993, "question_id": 30767948, "link": "https://stackoverflow.com/questions/30767948/generate-all-combinations-of-strings-and-their-substrings-in-a-set-python/30767993#30767993", "title": "Generate all combinations of strings and their substrings in a set -- python", "body": "<pre><code>import itertools\n\npermut = set()\npermut.add(\"D\")\npermut.add(\"C\")\n\ndef getAllKombos(stuff):\n    returnvalue = set()\n    for L in range(0, len(stuff) + 1):\n        for subset in itertools.permutations(stuff, L):\n            for i in subset:\n                x = x + (str(i))\n                returnvalue.add(x)\n            x = \"\"\n    return returnvalue\n\nprint getAllKombos(permut)\n</code></pre>\n\n<p>This code now works, all you had to do is switch combination to permutation.</p>\n"}], "owner": {"reputation": 769, "user_id": 2678718, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e15f61578762534f8d901ce6a4b39e53?s=128&d=identicon&r=PG&f=1", "display_name": "Sven Bamberger", "link": "https://stackoverflow.com/users/2678718/sven-bamberger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1117, "favorite_count": 0, "accepted_answer_id": 30767993, "answer_count": 1, "score": 1, "last_activity_date": 1433973315, "creation_date": 1433973095, "last_edit_date": 1433973274, "question_id": 30767948, "link": "https://stackoverflow.com/questions/30767948/generate-all-combinations-of-strings-and-their-substrings-in-a-set-python", "title": "Generate all combinations of strings and their substrings in a set -- python", "body": "<p>I want to get all combinations of of strings from a set of strings. For Example:</p>\n\n<pre><code>permut = set()\npermut.add(\"D\")\npermut.add(\"C\")\n\ndef getAllKombos(stuff):\n    returnvalue = set()\n    for L in range(0, len(stuff) + 1):\n        for subset in itertools.combinations(stuff, L):\n            for i in subset:\n                x = x + (str(i))\n                returnvalue.add(x)\n            x = \"\"\n    return returnvalue\n\nprint getAllKombos(permut)\n</code></pre>\n\n<p>my output is:</p>\n\n<pre><code>set(['C', 'D', 'CD'])\n</code></pre>\n\n<p>but I need</p>\n\n<pre><code>set(['C', 'D', 'CD', 'DC'])\n</code></pre>\n\n<p>I don't get what I'm doing wrong</p>\n"}, {"tags": ["python", "multithreading", "synchronization", "producer-consumer"], "answers": [{"tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": false, "score": 2, "last_activity_date": 1433973863, "creation_date": 1433973863, "answer_id": 30768105, "question_id": 30767828, "link": "https://stackoverflow.com/questions/30767828/whats-the-best-way-to-implement-a-single-consumer-multiple-producer-scenario-u/30768105#30768105", "title": "What&#39;s the best way to implement a single consumer, multiple producer scenario using Python?", "body": "<p>You can use a <code>weakref</code>, to test, if the thread is still alive:</p>\n\n<pre><code>import weakref\n\ndef consumer(queue, threads):\n    while threads:\n        try:\n            response = queue.get(timeout=1)\n            # handle response\n            queue.task_done()\n        except Empty:\n            pass\n\nthreads = weakref.WeakSet()\nfor i in range(10):\n    t = threading.Thread(...)\n    t.start()\n    threads.add(t)\ndel t  # remove all references to threads\n\nconsumer(queue, threads)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 575, "user_id": 1454536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b011df0feb3e23a6c0fc2c51f528ecb?s=128&d=identicon&r=PG", "display_name": "parity3", "link": "https://stackoverflow.com/users/1454536/parity3"}, "is_accepted": false, "score": 2, "last_activity_date": 1433977377, "creation_date": 1433977377, "answer_id": 30768783, "question_id": 30767828, "link": "https://stackoverflow.com/questions/30767828/whats-the-best-way-to-implement-a-single-consumer-multiple-producer-scenario-u/30768783#30768783", "title": "What&#39;s the best way to implement a single consumer, multiple producer scenario using Python?", "body": "<p>@ Daniel : weakref is a cool trick. Here is an alternate method that just uses the queue with an added 'termination policy'.</p>\n\n<p>You will need to ensure each producer's thread target functions always put a final 'termination message' to the queue, essentially a None after they've finished producing. The consumer just waits until the appropriate number of terminations (1 per producer thread) have been received and exits the loop. This way you don't have to check if the threads have ended and there is really only one point of communication: the queue. However, if there is an exception in the consumer, the producer threads should probably be in \"Daemon\" mode so that they don't hold up the process while they wait for the consumer queue to be .. well, consumed.</p>\n\n<p>You have to make sure that the termination message is ALWAYS sent for every producer, in some kind of try-finally indent. Otherwise you'll have to handle a timeout in the except Empty of the consumer.</p>\n\n<pre><code>import functools\ndef consumer(queue,num_threads_remaining):\n    next_message=functools.partial(iter,functools.partial(queue.get,timeout=1),None)\n    while num_threads_remaining:\n        try:\n            for response in next_message():\n                # handle response.. hopefully exception-protected\n                queue.task_done()\n            # we got a None termination message\n            num_threads_remaining -= 1\n        except Empty: pass # handle some other check when idling?\n</code></pre>\n"}], "owner": {"reputation": 210, "user_id": 2312630, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/f873a60f35fe47d59231b7c922c1229b?s=128&d=identicon&r=PG", "display_name": "c0lon", "link": "https://stackoverflow.com/users/2312630/c0lon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1433977377, "creation_date": 1433972583, "last_edit_date": 1433972676, "question_id": 30767828, "link": "https://stackoverflow.com/questions/30767828/whats-the-best-way-to-implement-a-single-consumer-multiple-producer-scenario-u", "title": "What&#39;s the best way to implement a single consumer, multiple producer scenario using Python?", "body": "<p>I have a Python program that spawns multiple producer threads and then has a loop that waits for a <code>Queue</code> object to have something in it. It looks something like this</p>\n\n<pre><code>for t in threads:\n    t.start()\nwhile len(threads):\n    if not queue.empty():\n        response = queue.get()\n        # handle response\n        queue.task_done()\n    else:\n        sleep(1)\n    threads = [t for t in threads if t.is_alive()]\n</code></pre>\n\n<p>There has to be a more elegant way to do this. I have looked into all of the synchronization objects the <code>threading</code> module provides, but I don't see how any of them could be applied.</p>\n\n<p>FYI, the code I have works for what I am trying to do. I am a strong believer in not fixing something that isn't broken, but I just feel like there is a better way to do this that a better programmer would have done in the first place.</p>\n"}, {"tags": ["python", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1433975499, "post_id": 30768258, "comment_id": 49588955, "body": "This won&#39;t work. You aren&#39;t properly getting the values from the Entry widgets."}, {"owner": {"reputation": 103, "user_id": 1663324, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b11b0d7dd4fd99a88de2f76346bab33c?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/1663324/jeffc"}, "edited": false, "score": 0, "creation_date": 1434124695, "post_id": 30768258, "comment_id": 49662763, "body": "I have never used a dictionary, but I read up on them. I came up with&quot; entries = {&#39;Project&#39;: , &#39;Reel&#39;: , &#39;Batch&#39;: }, but i&#39;m not sure what to associate each of these fields to since that will be the output of the widget. I have tried several different things, but it keeps giving me syntax or not defined errors."}, {"owner": {"reputation": 3184, "user_id": 4731042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/558e45917a7ce973da825c7dbcafd1f5?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Levieil", "link": "https://stackoverflow.com/users/4731042/eric-levieil"}, "edited": false, "score": 0, "creation_date": 1434125755, "post_id": 30768258, "comment_id": 49663448, "body": "In make_forms, you create it with entries = {} then you can replace entries.append((field, ent)) by entries[field] = ent"}, {"owner": {"reputation": 103, "user_id": 1663324, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b11b0d7dd4fd99a88de2f76346bab33c?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/1663324/jeffc"}, "edited": false, "score": 0, "creation_date": 1434388734, "post_id": 30768258, "comment_id": 49745921, "body": "Thank you Bryan and Eric. It works great! I am finding that I need to also have a variable set for each individual field (Project#, Reel# and Batch#). I have tried to do this with the original for loop, but i&#39;m having trouble setting each field to a separate variable. Is there a way to set project # = the first entry, reel# is the 2nd entry and batch# is the 3rd entry?"}], "tags": [], "owner": {"reputation": 3184, "user_id": 4731042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/558e45917a7ce973da825c7dbcafd1f5?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Levieil", "link": "https://stackoverflow.com/users/4731042/eric-levieil"}, "is_accepted": true, "score": 0, "last_activity_date": 1433976753, "last_edit_date": 1433976753, "creation_date": 1433974590, "answer_id": 30768258, "question_id": 30767750, "link": "https://stackoverflow.com/questions/30767750/how-do-i-assign-a-variable-to-a-tkinter-input/30768258#30768258", "title": "How do I assign a variable to a Tkinter input?", "body": "<ol>\n<li>You should use a dictionary for entries.</li>\n<li>Your function fetch is on the correct path.</li>\n</ol>\n\n<p>Here is a fixed version(assuming entries is a dictionary):</p>\n\n<pre><code>def fetch(entries):\n   filename = ''.join(entries[f].get() for f in fields)\n   print(filename)\n   #whatever you want to do with the result\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1433980155, "post_id": 30769078, "comment_id": 49590452, "body": "You don&#39;t <i>need</i> a <code>StringVar</code>. It&#39;s certainly a choice, but more often than not it&#39;s just an extra object that you don&#39;t really need."}], "tags": [], "owner": {"reputation": 2997, "user_id": 3112049, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1ZTKB.png?s=128&g=1", "display_name": "mike.k", "link": "https://stackoverflow.com/users/3112049/mike-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1433979116, "creation_date": 1433979116, "answer_id": 30769078, "question_id": 30767750, "link": "https://stackoverflow.com/questions/30767750/how-do-i-assign-a-variable-to-a-tkinter-input/30769078#30769078", "title": "How do I assign a variable to a Tkinter input?", "body": "<p>You need to use a <code>StringVar()</code> and provide a <code>textvariable</code> to <code>Entry()</code></p>\n\n<pre><code>for field in fields:\n    row = Frame(root)\n    lab = Label(row, width=15, text=field, anchor='w')\n    entry_variable = StringVar(root)\n    ent = Entry(row, textvariable=entry_variable)\n    row.pack(side=TOP, fill=X, padx=5, pady=5)\n    lab.pack(side=LEFT)\n    ent.pack(side=RIGHT, expand=YES, fill=X)\n    entries.append((field, entry_variable))\n</code></pre>\n\n<p>Get the data (after fixing indentation):</p>\n\n<pre><code>def fetch(entries):\n    for entry in entries:\n        field = entry[0]\n        text  = entry[1].get()\n        print('%s: \"%s\"' % (field, text)) \n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 1663324, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b11b0d7dd4fd99a88de2f76346bab33c?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/1663324/jeffc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 0, "accepted_answer_id": 30768258, "answer_count": 2, "score": 0, "last_activity_date": 1433979116, "creation_date": 1433972238, "last_edit_date": 1433972506, "question_id": 30767750, "link": "https://stackoverflow.com/questions/30767750/how-do-i-assign-a-variable-to-a-tkinter-input", "title": "How do I assign a variable to a Tkinter input?", "body": "<p>I am using the following code to create a widget with three inputs. </p>\n\n<p>I am able to modify this code to format the widget how I want, but I then need to copy files based on the input from the fields in the widget. For example, if the user inputs <code>'A'</code>, <code>'1'</code>, and <code>'X'</code> then I need to copy file <code>A1X</code> from a network drive to the local drive. </p>\n\n<p>I think I need to assign each input field to a variable and then I can set up a conditional to get the correct file, but I cannot figure out how to set up these variables.</p>\n\n<pre><code>from tkinter import *\nfields = 'Project #', 'Reel #', 'Batch #'\n\ndef fetch(entries):\n   for entry in entries:\n   field = entry[0]\n   text  = entry[1].get()\n   print('%s: \"%s\"' % (field, text)) \n\ndef makeform(root, fields):\n   entries = []\n   for field in fields:\n      row = Frame(root)\n      lab = Label(row, width=15, text=field, anchor='w')\n      ent = Entry(row)\n      row.pack(side=TOP, fill=X, padx=5, pady=5)\n      lab.pack(side=LEFT)\n      ent.pack(side=RIGHT, expand=YES, fill=X)\n      entries.append((field, ent))\n   return entries\n\nif __name__ == '__main__':\n   root = Tk()\n   ents = makeform(root, fields)\n   root.bind('&lt;Return&gt;', (lambda event, e=ents: fetch(e)))   \n   b1 = Button(root, text='OK',\n      command=(lambda e=ents: fetch(e)))\n   b1.pack(side=RIGHT, padx=5, pady=5)\n   b2 = Button(root, text='Reset', command=root.quit)\n   b2.pack(side=RIGHT, padx=5, pady=5)\n   root.mainloop()\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 269, "user_id": 4179267, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Icurx.jpg?s=128&g=1", "display_name": "NimbusScale", "link": "https://stackoverflow.com/users/4179267/nimbusscale"}, "edited": false, "score": 1, "creation_date": 1433978352, "post_id": 30767778, "comment_id": 49589915, "body": "Ah, well crap. I spent way too long trying to figure out why it wasn&#39;t getting written. thanks."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 4, "last_activity_date": 1433972361, "creation_date": 1433972361, "answer_id": 30767778, "question_id": 30767733, "link": "https://stackoverflow.com/questions/30767733/file-write-only-performed-upon-exit-of-an-interactive-python-session/30767778#30767778", "title": "file.write only performed upon exit of an interactive python session?", "body": "<p>You did not call close so the file is still open until you exit the shell:</p>\n\n<pre><code>outfile.close() # &lt;- add parens\n</code></pre>\n\n<p>Once you do you can see the difference:</p>\n\n<pre><code>In [12]: outfile = open('outfile','w')    \nIn [13]:  outfile.write('test')    \nIn [14]:  outfile.close\nOut[14]: &lt;function close&gt;    \nIn [15]: !ls -l outfile\n-rw-rw-r-- 1 padraic padraic 0 Jun 10 22:41 outfile    \nIn [16]:  outfile.close()\nIn [17]: !ls -l outfile\n-rw-rw-r-- 1 padraic padraic 4 Jun 10 22:41 outfile\n</code></pre>\n\n<p>You should use <code>with</code> to open your files and let it handle the closing for you:</p>\n\n<pre><code>In [18]: with open('outfile','w') as out:\n   ....:     out.write(\"test\")\n   ....:        \nIn [19]: !ls -l outfile\n-rw-rw-r-- 1 padraic padraic 4 Jun 10 22:43 outfile\n</code></pre>\n"}], "owner": {"reputation": 269, "user_id": 4179267, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Icurx.jpg?s=128&g=1", "display_name": "NimbusScale", "link": "https://stackoverflow.com/users/4179267/nimbusscale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 30767778, "answer_count": 1, "score": 2, "last_activity_date": 1433973389, "creation_date": 1433972179, "question_id": 30767733, "link": "https://stackoverflow.com/questions/30767733/file-write-only-performed-upon-exit-of-an-interactive-python-session", "title": "file.write only performed upon exit of an interactive python session?", "body": "<p>I have discovered a behavior that I don't understand and was hoping someone could shed some light on it.</p>\n\n<p>It looks like interactive python sessions (both with ipython and just calling the python3 cmd directly) only write to a file when I exit the session.</p>\n\n<pre><code>(ipython)dev:~$ ipython\nPython 3.4.0 (default, Apr 11 2014, 13:05:11)\nType \"copyright\", \"credits\" or \"license\" for more information.\n\nIPython 3.1.0 -- An enhanced Interactive Python.\n?         -&gt; Introduction and overview of IPython's features.\n%quickref -&gt; Quick reference.\nhelp      -&gt; Python's own help system.\nobject?   -&gt; Details about 'object', use 'object??' for extra details.\n\nIn [1]: outfile = open('outfile','w')\n\nIn [2]: outfile.write('test')\nOut[2]: 4\n\nIn [3]: outfile.close\nOut[3]: &lt;function TextIOWrapper.close&gt;\n\nIn [4]: !ls -l outfile\n-rw-rw-r-- 1 jjk3 jjk3 0 Jun 10 14:32 outfile\n\nIn [5]: quit\n(ipython)dev:~$ ls -l outfile\n-rw-rw-r-- 1 jjk3 jjk3 4 Jun 10 14:33 outfile\n(ipython)dev:~$\n</code></pre>\n\n<p>Is this behavior expected? If so why? </p>\n\n<p>If this behavior is unexpected, any idea why it might be behaving this way?</p>\n"}, {"tags": ["python", "list", "split"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1433972216, "post_id": 30767713, "comment_id": 49587677, "body": "Are you trying to check <code>d[0] in one_list</code>? Also, note that <code>[len(list(phrase.split()))-1:]</code> is just <code>[-1:]</code>, and the call to <code>list</code> is redundant, as is the temporary assignment to <code>phrase</code>, and... why does <code>lastWord</code> return a list anyway?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433972259, "post_id": 30767713, "comment_id": 49587692, "body": "a list cannot be in a list of strings"}, {"owner": {"reputation": 1, "user_id": 4996754, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207317874290109/picture?type=large", "display_name": "Samuel Mattos", "link": "https://stackoverflow.com/users/4996754/samuel-mattos"}, "edited": false, "score": 0, "creation_date": 1433972543, "post_id": 30767713, "comment_id": 49587835, "body": "I was seeing further, and I&#39;ve noted python doesn&#39;t recognize a list inside another, just strings. So I can&#39;t find x = [&quot;Hello&quot;] inside one_list = [&quot;Hello&quot;, &quot;World&quot;]. x has to be just &quot;Hello&quot;, and not [&quot;Hello&quot;]. Thats it. Thanks for the help!!"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 4917034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74c5549cecbfe94c42ad006505092acb?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Andr&#233;s Ordo&#241;ez P.", "link": "https://stackoverflow.com/users/4917034/carlos-andr%c3%a9s-ordo%c3%b1ez-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1433972392, "creation_date": 1433972392, "answer_id": 30767786, "question_id": 30767713, "link": "https://stackoverflow.com/questions/30767713/function-returning-list-is-showing-false-python/30767786#30767786", "title": "Function returning list is showing False python", "body": "<p>Problem because you are trying to find ['Hello', 'World'] in [\"Hello\", \"World\", \"Anything\"]</p>\n\n<p>Will give you True when</p>\n\n<pre><code>one_list = [[\"Hello\", \"World\"], \"Anything\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5648, "user_id": 3122880, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3839f45edaf0820ca5e184cfc6a7f1b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Ojha", "link": "https://stackoverflow.com/users/3122880/vikas-ojha"}, "is_accepted": false, "score": 0, "last_activity_date": 1433972404, "creation_date": 1433972404, "answer_id": 30767789, "question_id": 30767713, "link": "https://stackoverflow.com/questions/30767713/function-returning-list-is-showing-false-python/30767789#30767789", "title": "Function returning list is showing False python", "body": "<p>Change the following - </p>\n\n<pre><code>x.split() in one_list\n</code></pre>\n\n<p>to - </p>\n\n<pre><code>exists = True\nfor item in x.split():\n    if item not in one_list:\n        exists = False\n        break\nprint exists\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10159, "user_id": 4907630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96aeab7486cd88da186e9c52eb7d7c7?s=128&d=identicon&r=PG&f=1", "display_name": "eugenioy", "link": "https://stackoverflow.com/users/4907630/eugenioy"}, "is_accepted": false, "score": 0, "last_activity_date": 1433972571, "creation_date": 1433972571, "answer_id": 30767825, "question_id": 30767713, "link": "https://stackoverflow.com/questions/30767713/function-returning-list-is-showing-false-python/30767825#30767825", "title": "Function returning list is showing False python", "body": "<p>You can't use \"in\" like that to test for each individual item:</p>\n\n<pre><code>x.split() in one_list\n</code></pre>\n\n<p>Try with this:</p>\n\n<pre><code>all(x in one_list for x in x.split())\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4996754, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207317874290109/picture?type=large", "display_name": "Samuel Mattos", "link": "https://stackoverflow.com/users/4996754/samuel-mattos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1433972571, "creation_date": 1433972115, "question_id": 30767713, "link": "https://stackoverflow.com/questions/30767713/function-returning-list-is-showing-false-python", "title": "Function returning list is showing False python", "body": "<p>I'm a newbie here, and I am trying to make python recognizes the .split() list inside another. It's a little bit hard to explain, so I will show it:</p>\n\n<pre><code>&gt;&gt;&gt;   #this is a function that separates the last word in the string, spliting the string by words and then transforming it into a list and the using the len() to know what is the position of the last item in the list, so that I can return it to another var.\n\n&gt;&gt;&gt; def lastWord(phrase):\n       phrase = list(phrase.split()[len(list(phrase.split()))-1:]))\n       return phrase\n\n&gt;&gt;&gt; x = \"Hello World\"\n&gt;&gt;&gt; d = lastWord(x)\n&gt;&gt;&gt; d\n['World']\n&gt;&gt;&gt; x.split()\n['Hello', 'World']\n&gt;&gt;&gt; one_list [\"Hello\", \"World\", \"Anything\"]\n&gt;&gt;&gt; one_list\n['Hello', 'World', 'Anything']\n&gt;&gt;&gt; x.split() in one_list\nFalse\n&gt;&gt;&gt; list(x.split()) in one_list\nFalse\n&gt;&gt;&gt; d in one_list\nFalse\n</code></pre>\n\n<p>How can I make it recognize the generated split list, created using .split() inside another list??</p>\n"}, {"tags": ["python", "module", "installation"], "comments": [{"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1433972136, "post_id": 30767702, "comment_id": 49587636, "body": "Your user doesn&#39;t have permissions, try to run as root (sudo)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4966102"}, "reply_to_user": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1433972253, "post_id": 30767702, "comment_id": 49587688, "body": "It&#39;s asking for a password but not letting me type there. I&#39;m the only user so it&#39;s strange I  don&#39;t have permission."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4966102"}, "reply_to_user": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1433972449, "post_id": 30767702, "comment_id": 49587784, "body": "edited my permissions manually, sorted. thanks."}], "answers": [{"tags": [], "owner": {"reputation": 166, "user_id": 3738453, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfc5f2468216dbb6dc7c980e7587f16f?s=128&d=identicon&r=PG&f=1", "display_name": "Connor Wyatt", "link": "https://stackoverflow.com/users/3738453/connor-wyatt"}, "is_accepted": false, "score": -1, "last_activity_date": 1433972266, "creation_date": 1433972266, "answer_id": 30767756, "question_id": 30767702, "link": "https://stackoverflow.com/questions/30767702/python-cant-install-modules-on-mac/30767756#30767756", "title": "Python - Can&#39;t install modules on mac", "body": "<p>You will often have to use sudo on mac, eg sudo python ...</p>\n\n<p>This has been asked multiple times though, try searching before asking.</p>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 3981203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fzSg5.jpg?s=128&g=1", "display_name": "cwfighter", "link": "https://stackoverflow.com/users/3981203/cwfighter"}, "is_accepted": false, "score": -1, "last_activity_date": 1433990622, "creation_date": 1433990622, "answer_id": 30770660, "question_id": 30767702, "link": "https://stackoverflow.com/questions/30767702/python-cant-install-modules-on-mac/30770660#30770660", "title": "Python - Can&#39;t install modules on mac", "body": "<p>Apparently, your limits of authority is lower a little to install the python.</p>\n\n<p>First, you should change your users to root. commnad:<code>su root</code></p>\n\n<p>Second,execute commands to install python.</p>\n\n<p>I hope this can help you.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4966102"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1433990622, "creation_date": 1433972064, "question_id": 30767702, "link": "https://stackoverflow.com/questions/30767702/python-cant-install-modules-on-mac", "title": "Python - Can&#39;t install modules on mac", "body": "<p>I've downloaded Beautiful Soup 4.3.2 and CD'ed to the right location on my disk. When I use 'python setup.py install' a load of lines run but then I get this problem:</p>\n\n<p>error: could not create '/Library/Python/2.7/site-packages/bs4': Permission denied</p>\n\n<p>Anyone know why this is?</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["python", "html", "beautifulsoup"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1433971920, "post_id": 30767633, "comment_id": 49587536, "body": "You mean you want to get the text from the <code>&lt;ul&gt;</code> following the <code>&lt;strong&gt;</code> tag?"}], "answers": [{"tags": [], "owner": {"reputation": 5648, "user_id": 3122880, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3839f45edaf0820ca5e184cfc6a7f1b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Ojha", "link": "https://stackoverflow.com/users/3122880/vikas-ojha"}, "is_accepted": false, "score": 0, "last_activity_date": 1433972126, "creation_date": 1433972126, "answer_id": 30767717, "question_id": 30767633, "link": "https://stackoverflow.com/questions/30767633/how-to-get-the-context-following-a-keyword-search-in-beautifulsoup/30767717#30767717", "title": "how to get the context following a Keyword search in BeautifulSoup?", "body": "<p>Following should work:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport re\nprint soup.find('strong', text=re.compile('RESPONSIBILITIES:').find_next_sibling('ul').text\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4996791, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XDNMNp3jtMU/AAAAAAAAAAI/AAAAAAAAAB8/BSSmKU9_AmE/photo.jpg?sz=128", "display_name": "Fange", "link": "https://stackoverflow.com/users/4996791/fange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1433972126, "creation_date": 1433971754, "last_edit_date": 1433971877, "question_id": 30767633, "link": "https://stackoverflow.com/questions/30767633/how-to-get-the-context-following-a-keyword-search-in-beautifulsoup", "title": "how to get the context following a Keyword search in BeautifulSoup?", "body": "<p>I am trying to get the context following the \"RESPONSIBILITIES\". But I cannot finish it. How can I get the context without tag?</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;strong&gt;RESPONSIBILITIES:&lt;/strong&gt;\n\n&lt;ul&gt;\n\n&lt;li&gt;Reach or exceed assigned sales goals&lt;/li&gt;\n\n&lt;li&gt;Implement sales strategies&lt;/li&gt;\n\n&lt;li&gt;Develop and execute a cold calling strategy to target prospects&lt;/li&gt;\n\n&lt;li&gt;Mine existing and prospective clients for referral business&lt;/li&gt;\n\n&lt;li&gt;Establish and maintain strong relationships, with both internal partners and external customers&lt;/li&gt;\n\n&lt;/ul&gt;\n</code></pre>\n"}, {"tags": ["python", "memory", "python-multiprocessing"], "comments": [{"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1433972791, "post_id": 30767630, "comment_id": 49587952, "body": "How sure are you that the memory leak is due to multiprocessing? Do you still see an increase in memory consumption if you call your <code>work_loop</code> function serially?"}, {"owner": {"reputation": 628, "user_id": 3088631, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/1e9b1e0cb63b08e7e3201662663e26fd?s=128&d=identicon&r=PG&f=1", "display_name": "jpavs", "link": "https://stackoverflow.com/users/3088631/jpavs"}, "reply_to_user": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1434580144, "post_id": 30767630, "comment_id": 49845849, "body": "@ali_m Thanks for your comment. You are correct there is some kind of memory leak. Interestingly (or not?), the program won&#39;t chew up a new block of memory for each iteration - it only takes more as needed. So, for instance, if one iteration of <code>work_loop</code> takes 1gb of memory, and the next takes 500mb, the total the program is using is 1gb. But if the next iteration takes 2gb, then the program keeps that entire 2gb. I&#39;m still searching for a way to release this back to the system"}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 1, "creation_date": 1434581813, "post_id": 30767630, "comment_id": 49846398, "body": "That actually sounds like normal behaviour to me. When a Python object goes out of scope (or if you delete it manually) the memory it was allocated won&#39;t be released until the object is garbage collected. Exactly <i>when</i> this happens is rather unpredictable, but you can force garbage collection using <code>gc.collect()</code>. However, even after the object has been garbage collected the memory that&#39;s just been freed may not be reclaimed by the OS, so if you&#39;re watching the memory usage of your Python process you should not expect it to go down immediately."}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1434581967, "post_id": 30767630, "comment_id": 49846430, "body": "If the memory usage of your Python process increased by some increment every time you ran <code>work_loop()</code>, then I would suspect that you had a memory leak in <code>work_loop</code>."}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1434670233, "post_id": 30767630, "comment_id": 49891496, "body": "At any rate I think you&#39;re unlikely to get a very satisfactory answer to your question as it stands, since it&#39;s not possible to reproduce the problem without the rest of your code and the input data. You&#39;d have a much better chance if you could trim down your code into an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> (there&#39;s a good chance that you&#39;ll be able to identify the cause yourself during the process)."}], "answers": [{"tags": [], "owner": {"reputation": 1871, "user_id": 1413826, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/9c02e2ffe62e943db7b2ce85c7882ab2?s=128&d=identicon&r=PG", "display_name": "steve", "link": "https://stackoverflow.com/users/1413826/steve"}, "is_accepted": false, "score": 1, "last_activity_date": 1433977145, "creation_date": 1433977145, "answer_id": 30768751, "question_id": 30767630, "link": "https://stackoverflow.com/questions/30767630/how-do-i-free-memory-from-process-in-multiprocessing-queue/30768751#30768751", "title": "How do I free memory from Process in multiprocessing.queue?", "body": "<p>I'm assuming, that like the example you linked you are using the Queue.Queue() as your queue object. This is a blocking queue, which means a call to <code>queue.get()</code> will return an element, or wait/block until it can return an element.\nTry changing your <code>work_controller</code> function to the below:</p>\n\n<pre><code>def work_controller(in_queue, out_list):\n  while True: # when the queue is empty return\n      try:\n          key = in_queue.get(False) # add False to not have the queue block\n      except Queue.Empty:\n          return\n      print key\n\n      work_loop(key)\n      out_list.append(key)\n</code></pre>\n\n<p>While the above solves the blocking issue it gives rise to another. At the start of the threads' life, there are no items in the in_queue, thus the threads will immediately end.</p>\n\n<p>To solve this I suggest you do add a flag to indicate if it is okay to terminate.</p>\n\n<pre><code>global ok_to_end # put this flag in a global space\n\ndef work_controller(in_queue, out_list):\n  while True: # when the queue is empty return\n      try:\n          key = in_queue.get(False) # add False to not have the queue block\n      except Queue.Empty:\n          if ok_to_end: # consult the flag before ending.\n              return\n      print key\n\n      work_loop(key)\n      out_list.append(key)\n\nif __name__ == '__main__':\n\n    num_workers = 4\n    manager = Manager()\n    results = manager.list()\n    work = manager.Queue(num_workers)\n    processes = []\n\n    ok_to_end = False # termination flag\n    for i in xrange(num_workers):\n        p = Process(target=work_controller, args=(work,results))\n        processes.append(p)\n        p.start()\n\n    iters = itertools.chain([key for key in training_dict.keys()])\n    for item in iters:\n        work.put(item)\n\n    ok_to_end = True # termination flag set to True after queue is filled\n\n    for p in processes:\n        print \"Joining Worker\"\n        p.join()\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 3088631, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/1e9b1e0cb63b08e7e3201662663e26fd?s=128&d=identicon&r=PG&f=1", "display_name": "jpavs", "link": "https://stackoverflow.com/users/3088631/jpavs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3272, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1433977145, "creation_date": 1433971746, "last_edit_date": 1495541828, "question_id": 30767630, "link": "https://stackoverflow.com/questions/30767630/how-do-i-free-memory-from-process-in-multiprocessing-queue", "title": "How do I free memory from Process in multiprocessing.queue?", "body": "<p>I have a program that is trying to predict email conversion for every email I send in a week (so, usually 7 sends). The output is 7 different files with the prediction scores for each customer. Running these serially can take close to 8 hours, so I have tried to parallelize them with <code>multiprocessing</code>. This speeds things up very well, but I've noticed that after a process finishes it seems to hold onto its memory, until there is none left and one of the processes gets killed by the system without completing its task.</p>\n\n<p>I've based the following code off of <a href=\"https://stackoverflow.com/questions/11196367/processing-single-file-from-multiple-processes-in-python/11196615#11196615\">the 'manual pool' example in this answer</a>, as I need to limit the number of processes that start at once due to memory constraints. What I would like is that as one process finishes, it releases its memory to the system, freeing up space for the next worker.</p>\n\n<p>Below is the code that handles concurrency:</p>\n\n<pre><code>def work_controller(in_queue, out_list):\n    while True:\n        key = in_queue.get()\n        print key\n\n        if key == None:\n            return\n\n        work_loop(key)\n        out_list.append(key)\n\nif __name__ == '__main__':\n\n    num_workers = 4\n    manager = Manager()\n    results = manager.list()\n    work = manager.Queue(num_workers)\n    processes = []\n\n    for i in xrange(num_workers):\n        p = Process(target=work_controller, args=(work,results))\n        processes.append(p)\n        p.start()\n\n    iters = itertools.chain([key for key in training_dict.keys()])\n    for item in iters:\n        work.put(item)\n\n    for p in processes:\n        print \"Joining Worker\"\n        p.join()\n</code></pre>\n\n<p>Here is the actual work code, if that is of any help:</p>\n\n<pre><code>def work_loop(key):\n    with open('email_training_dict.pkl','rb') as f:\n        training_dict = pickle.load(f)\n    df_test = pd.DataFrame.from_csv(test_file)\n    outdict = {}\n    target = 'is_convert'\n\n    df_train = train_dataframe(key)\n    features = data_cleanse(df_train,df_test)\n\n    # MAIN PREDICTION\n    print 'Start time: {}'.format(datetime.datetime.now()) + '\\n'\n\n    # train/test by mailer\n    X_train = df_train[features]\n    X_test = df_test[features]\n    y_train = df_train[target]\n\n    # run model fit\n    clf = imbalance.ImbalanceClassifier()\n\n    clf = clf.fit(X_train, y_train)\n    y_hat = clf.predict(X_test)\n\n    outdict[key] = clf.y_vote\n    print outdict[key]\n    print 'Time Complete: {}'.format(datetime.datetime.now()) + '\\n'\n    with open(output_file,'wb') as f:\n        pickle.dump(outdict,f)\n</code></pre>\n"}, {"tags": ["python", "html", "mysql", "webpage"], "answers": [{"tags": [], "owner": {"reputation": 950, "user_id": 3614855, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/267970129056459ed1a52d4373fc438b?s=128&d=identicon&r=PG&f=1", "display_name": "fiacre", "link": "https://stackoverflow.com/users/3614855/fiacre"}, "is_accepted": true, "score": 1, "last_activity_date": 1433978998, "creation_date": 1433978998, "answer_id": 30769055, "question_id": 30767597, "link": "https://stackoverflow.com/questions/30767597/printing-data-from-mysql-in-html-using-python/30769055#30769055", "title": "Printing data from MySql in HTML using Python", "body": "<p>If I understand correctly, this is an excellent use-case for an HTML templating language like <a href=\"http://jinja.pocoo.org/docs/dev/\" rel=\"nofollow\">Jinja2</a> or <a href=\"http://www.makotemplates.org/\" rel=\"nofollow\">Mako</a> </p>\n\n<p>In OptionsPage.html you might store something like:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;title&gt;My Webpage&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;ul id=\"navigation\"&gt;\n    {% for item in items %}\n        &lt;li&gt;&lt;a href=\"{{ item.href }}\"&gt;{{ item.caption }}&lt;/a&gt;&lt;/li&gt;\n    {% endfor %}\n    &lt;/ul&gt;\n\n    &lt;h1&gt;My Webpage&lt;/h1&gt;\n    {{ a_variable }}\n\n    {# a comment #}\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Where your python code with do something like:</p>\n\n<pre><code>def get_items(db_connection):\n    cursor = db_connection.cursor()\n    cursor.execute(\"SELECT a, b FROM some_table\")\n    items = cursor.fetchall()\n    return items\n</code></pre>\n\n<p>Then a little template magic:</p>\n\n<pre><code>items = get_items(db_connection)\ntemplate = Template(file='OptionsPage.html')\nprint(template.render(items=items, a_variable=42))\n</code></pre>\n\n<p>If you Google Templating languages you will see quite a few that work with python.</p>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 43, "user_id": 4996483, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4b11760b6b7f3f1b97e44d68616fc80a?s=128&d=identicon&r=PG&f=1", "display_name": "Shannon", "link": "https://stackoverflow.com/users/4996483/shannon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7163, "favorite_count": 1, "accepted_answer_id": 30769055, "answer_count": 1, "score": 2, "last_activity_date": 1596300621, "creation_date": 1433971614, "last_edit_date": 1433974425, "question_id": 30767597, "link": "https://stackoverflow.com/questions/30767597/printing-data-from-mysql-in-html-using-python", "title": "Printing data from MySql in HTML using Python", "body": "<p>I am trying to print a list of items from a MySQL database onto an HTML page.  My database can be added to and changed over time away from this page, so the list must change as the database changes. The trickiest part is that each of the items on the list links to a informational page (the link to the informational page would also be stored in the database).  I have run all my other code in python and it runs the HTML page by doing the following:</p>\n\n<pre><code>    def render_POST( self, request):\n        file=open('NewOptionsPage.html','r')\n        filedata=file.read()\n        return filedata\n</code></pre>\n\n<p>-where <em>NewOptionsPage</em> is my html code. </p>\n\n<p><strong>So my question is:</strong> </p>\n\n<p>What do I put into my HTML code to print from my database that would also allow me to also give it a link from the database? If this isn't possible in python, how could I do it in php or another language?</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1433971616, "post_id": 30767580, "comment_id": 49587379, "body": "It&#39;s not syntactically wrong in the sense the the interpreter can&#39;t figure out the series of steps to take. It&#39;s a runtime error that the interpreter can only (reasonably) know about &quot;halfway through&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4981654, "user_type": "registered", "profile_image": "https://graph.facebook.com/811893318924500/picture?type=large", "display_name": "Umesh Upadhyay", "link": "https://stackoverflow.com/users/4981654/umesh-upadhyay"}, "edited": false, "score": 0, "creation_date": 1434203483, "post_id": 30767603, "comment_id": 49685196, "body": "Truth to be told I didn&#39;t understood your answer and what you did.Pardon me, I am a very slow learner."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 33, "user_id": 4981654, "user_type": "registered", "profile_image": "https://graph.facebook.com/811893318924500/picture?type=large", "display_name": "Umesh Upadhyay", "link": "https://stackoverflow.com/users/4981654/umesh-upadhyay"}, "edited": false, "score": 0, "creation_date": 1434204386, "post_id": 30767603, "comment_id": 49685443, "body": "@UmeshUpadhyay: I &#39;renamed&#39; your existing function (I created another reference to it), then <i>replaced</i> the old name with a new version. Now your <code>movies(mov1 = raw_input(&quot;first movie &quot;), mov2 = raw_input(&quot;second movie &quot;))</code> function call works as this version has <code>mov1</code> and <code>mov2</code> arguments."}, {"owner": {"reputation": 33, "user_id": 4981654, "user_type": "registered", "profile_image": "https://graph.facebook.com/811893318924500/picture?type=large", "display_name": "Umesh Upadhyay", "link": "https://stackoverflow.com/users/4981654/umesh-upadhyay"}, "edited": false, "score": 0, "creation_date": 1435473309, "post_id": 30767603, "comment_id": 50209718, "body": "I tried,I got you.I was looking that can i directly set a variable by asking user in a function argument itself.It would reduce the lines I have to write.And i can do it.Its working fine.Thank you very much you taught me very important thing. :)"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 33, "user_id": 4981654, "user_type": "registered", "profile_image": "https://graph.facebook.com/811893318924500/picture?type=large", "display_name": "Umesh Upadhyay", "link": "https://stackoverflow.com/users/4981654/umesh-upadhyay"}, "edited": false, "score": 0, "creation_date": 1435480423, "post_id": 30767603, "comment_id": 50211169, "body": "@UmeshUpadhyay: you don&#39;t <i>have</i> to use keyword arguments; you can just use <code>movies(raw_input(&quot;first movie &quot;), raw_input(&quot;second movie &quot;))</code>"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 4, "last_activity_date": 1433971640, "creation_date": 1433971640, "answer_id": 30767603, "question_id": 30767580, "link": "https://stackoverflow.com/questions/30767580/if-this-method-is-wrong-then-why-interpreter-excuting-it-half/30767603#30767603", "title": "If this method is wrong then why interpreter excuting it half?", "body": "<p>You do not have a syntax error. You have a <em>runtime</em> error.</p>\n\n<p>Python is a highly dynamic language. Since functions are <em>objects</em>, other code could replace your function at any time during the runtime of your program, so Python won't know <em>until you call the function</em>, that you are passing in keyword arguments that the function doesn't support.</p>\n\n<p>If you did this:</p>\n\n<pre><code>old_movies = movies\ndef movies(mov1, mov2):\n    return old_movies(mov1, mov2)\n</code></pre>\n\n<p>somewhere else in your program and <em>then</em> used</p>\n\n<pre><code>movies(mov1 = raw_input(\"first movie \"), mov2 = raw_input(\"second movie \"))\n</code></pre>\n\n<p>your program would succeed.</p>\n"}, {"tags": [], "owner": {"reputation": 2900, "user_id": 2566965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300de803639f26b633cbf259a95af052?s=128&d=identicon&r=PG", "display_name": "junnytony", "link": "https://stackoverflow.com/users/2566965/junnytony"}, "is_accepted": false, "score": 1, "last_activity_date": 1433971782, "last_edit_date": 1433971782, "creation_date": 1433971658, "answer_id": 30767610, "question_id": 30767580, "link": "https://stackoverflow.com/questions/30767580/if-this-method-is-wrong-then-why-interpreter-excuting-it-half/30767610#30767610", "title": "If this method is wrong then why interpreter excuting it half?", "body": "<p>It's not a syntatic error. Its a \"runtime\" error. Your <code>movies</code> method does take two parameters. It only finds that your parameters are wrong when it goes to call the movies method and provides a parameter named <code>mov1</code> (or <code>mov2</code>)</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 4981654, "user_type": "registered", "profile_image": "https://graph.facebook.com/811893318924500/picture?type=large", "display_name": "Umesh Upadhyay", "link": "https://stackoverflow.com/users/4981654/umesh-upadhyay"}, "edited": false, "score": 0, "creation_date": 1434048637, "post_id": 30767629, "comment_id": 49627644, "body": "Oh Yes!! it&#39;s interpreted than it goes only in forward direction in a  line.So when it encounters a function it waits for it to finish but since both raw_inputs finishes before  function does, It running raw_input fine but throw error in function... Right?"}, {"owner": {"reputation": 1113, "user_id": 2240326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5468c04108295fd6c2f311442bdb5691?s=128&d=identicon&r=PG", "display_name": "Gecko", "link": "https://stackoverflow.com/users/2240326/gecko"}, "reply_to_user": {"reputation": 33, "user_id": 4981654, "user_type": "registered", "profile_image": "https://graph.facebook.com/811893318924500/picture?type=large", "display_name": "Umesh Upadhyay", "link": "https://stackoverflow.com/users/4981654/umesh-upadhyay"}, "edited": false, "score": 0, "creation_date": 1434050781, "post_id": 30767629, "comment_id": 49628961, "body": "I think you got the idea. In other words, to evaluate <i>movies</i> it needs the result from <i>raw_input</i>. This works fine. But then <i>movies</i> expects the arguments <i>sci_fi</i> and <i>thriller</i> and gets <i>mov1</i> and <i>mov2</i> instead. Then it rightfully complains ;)"}], "tags": [], "owner": {"reputation": 1113, "user_id": 2240326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5468c04108295fd6c2f311442bdb5691?s=128&d=identicon&r=PG", "display_name": "Gecko", "link": "https://stackoverflow.com/users/2240326/gecko"}, "is_accepted": false, "score": 1, "last_activity_date": 1433971740, "creation_date": 1433971740, "answer_id": 30767629, "question_id": 30767580, "link": "https://stackoverflow.com/questions/30767580/if-this-method-is-wrong-then-why-interpreter-excuting-it-half/30767629#30767629", "title": "If this method is wrong then why interpreter excuting it half?", "body": "<p><em>raw_input</em> runs <strong>before</strong> the call to <em>movies</em> happens. \nPython is an interpreted language, so the signature of the <em>movies</em> function is not checked against your call (which gives wrong names to the arguments). </p>\n"}], "owner": {"reputation": 33, "user_id": 4981654, "user_type": "registered", "profile_image": "https://graph.facebook.com/811893318924500/picture?type=large", "display_name": "Umesh Upadhyay", "link": "https://stackoverflow.com/users/4981654/umesh-upadhyay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 30767603, "answer_count": 3, "score": 3, "last_activity_date": 1434062676, "creation_date": 1433971510, "last_edit_date": 1433972602, "question_id": 30767580, "link": "https://stackoverflow.com/questions/30767580/if-this-method-is-wrong-then-why-interpreter-excuting-it-half", "title": "If this method is wrong then why interpreter excuting it half?", "body": "<p>I am absolute beginner in programming, I am doing zed shaw's python hard way. I was playing with function than I did </p>\n\n<pre><code>movies(mov1 = raw_input(\"first movie \"), mov2 = raw_input(\"second movie \"))\n</code></pre>\n\n<p>Now interestingly function does asking me for the input, so <code>raw_input</code> is working. But after that it's showing </p>\n\n<pre><code>TypeError:movies() got an unexpected keyword argument  'mov1'\n</code></pre>\n\n<p>My question is: If this is syntactically wrong then why start executing at all and why not syntactic error?</p>\n\n<p>My function definition was:</p>\n\n<pre><code>def movies(sci_fi, thriller):\n    print \"So you like %r movie!!\" %sci_fi\n    print \"So you like %r movie!!\" %thriller\n    print \"Man those movies were awesome!!\"\n    print \"Now movie is finished...\"\n    print \"Get back to work. \\n\"\n</code></pre>\n"}, {"tags": ["python", "sql", "oracle"], "comments": [{"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1433971241, "post_id": 30767489, "comment_id": 49587164, "body": "do you have any indexes on your sql tables?"}, {"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1433971369, "post_id": 30767489, "comment_id": 49587231, "body": "have you tried the cx_oracle-package?"}, {"owner": {"reputation": 48120, "user_id": 458741, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6gQnI.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/458741/ben"}, "edited": false, "score": 0, "creation_date": 1433971476, "post_id": 30767489, "comment_id": 49587300, "body": "When you directly write to a csv in SQL*Plus you&#39;re not querying the data in 500 record chunks... if you were to just get the entire lot in Python would it take 15 minutes?"}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433972177, "post_id": 30767489, "comment_id": 49587658, "body": "How many fields are there in the records being returned, and how big are they? In other words, roughly, how much data is being pushed over the network to get it to the machine it&#39;s being processed on? Network latency is your biggest enemy in a situation like this - do you need ALL the fields (<code>select * from table</code>)?"}, {"owner": {"reputation": 929, "user_id": 3599340, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/684f1fc46c99c18bc16d0d0b9d0ad541?s=128&d=identicon&r=PG&f=1", "display_name": "datasci", "link": "https://stackoverflow.com/users/3599340/datasci"}, "edited": false, "score": 0, "creation_date": 1433972222, "post_id": 30767489, "comment_id": 49587680, "body": "yes, the tables are indexed. also, i have not tried cx_oracle. I will try that as soon as I can get the client installed on my local machine. when i attempt to set fetchmany(size) to something much higher, say 500,000, i get a java heap size memory error."}, {"owner": {"reputation": 929, "user_id": 3599340, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/684f1fc46c99c18bc16d0d0b9d0ad541?s=128&d=identicon&r=PG&f=1", "display_name": "datasci", "link": "https://stackoverflow.com/users/3599340/datasci"}, "reply_to_user": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433972306, "post_id": 30767489, "comment_id": 49587719, "body": "@BobJarvis this particular table has 150 columns. i could probably cut the number of columns by 1/3, but I do need most of them. I tested with 10 columns, and i was able to run 4000 records in 2.76 seconds. So that helps."}, {"owner": {"reputation": 929, "user_id": 3599340, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/684f1fc46c99c18bc16d0d0b9d0ad541?s=128&d=identicon&r=PG&f=1", "display_name": "datasci", "link": "https://stackoverflow.com/users/3599340/datasci"}, "edited": false, "score": 0, "creation_date": 1433972372, "post_id": 30767489, "comment_id": 49587748, "body": "Has anyone iterated over millions of rows? If so, what kind of performance have you had with it?"}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433972870, "post_id": 30767489, "comment_id": 49587997, "body": "OK - so at an incredibly rough guess of 10 bytes/field we&#39;re looking at 1500 bytes/row. Times 5 million and you&#39;re looking at pushing 7.5 gigabytes of data down the pipe. That&#39;s something like 60 gigabits, give or take. Let&#39;s guess that you&#39;ve got a 1 Gb network card, which in &quot;the real world&quot; might push 40% of that sustained, so 400Mb/sec - so 60 Gb will take, what, 150 seconds? Thus, using totally flawed and made-up numbers it looks like the network may not be the issue. But I wouldn&#39;t trust these numbers... :-)"}], "owner": {"reputation": 929, "user_id": 3599340, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/684f1fc46c99c18bc16d0d0b9d0ad541?s=128&d=identicon&r=PG&f=1", "display_name": "datasci", "link": "https://stackoverflow.com/users/3599340/datasci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 765, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1433972019, "creation_date": 1433971085, "last_edit_date": 1433972019, "question_id": 30767489, "link": "https://stackoverflow.com/questions/30767489/improve-performance-of-oracle-sql-queries-from-python", "title": "Improve Performance of Oracle SQL Queries from Python", "body": "<p>I'm using the JayDeBeAPI python module to connect to a remote machine and query a database:</p>\n\n<pre><code>conn = jaydebeapi.connect('oracle.jdbc.OracleDriver','jdbc:oracle:thin:user/pass@host:port:db')\n\ncur = conn.cursor()\n\ncur.execute(\"select * from table\")\n\ndata = cur.fetchmany(size=500)\n</code></pre>\n\n<p>This takes 2.15 seconds to return 500 records, and 1.51 minutes to return 25,000 records (I get similar results with a loop <code>for item in cur.fetchmany(size=500):</code>). If I need to query 5 million records, this becomes very time consuming. </p>\n\n<p>Alternatively, if I query all 5 million records directly from sql plus on the server, export the result to a csv, scp the file to the local machine, then iterate through the csv file in python, I can gather and process all records in under 15 minutes (without optimizations). </p>\n\n<p>What are some best-practices to improve the performance of Oracle sql queries from python? I strongly prefer the python solution, but if it's hours vs minutes then this is not going to work. </p>\n"}, {"tags": ["python", "windows", "python-2.7", "powershell"], "comments": [{"owner": {"reputation": 294955, "user_id": 20670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG", "display_name": "Tim Pietzcker", "link": "https://stackoverflow.com/users/20670/tim-pietzcker"}, "edited": false, "score": 0, "creation_date": 1433999962, "post_id": 30767436, "comment_id": 49595374, "body": "What do you get when you type <code>path</code> at the command prompt?"}], "answers": [{"comments": [{"owner": {"reputation": 1528, "user_id": 3980033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6e7695641598ad49d3e0831e1bdf1cd?s=128&d=identicon&r=PG&f=1", "display_name": "tkosinski", "link": "https://stackoverflow.com/users/3980033/tkosinski"}, "reply_to_user": {"reputation": 1, "user_id": 4996702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8e98c4c402bad4a15f1b61f71e10f44?s=128&d=identicon&r=PG&f=1", "display_name": "Heavy G", "link": "https://stackoverflow.com/users/4996702/heavy-g"}, "edited": false, "score": 0, "creation_date": 1434036274, "post_id": 30767530, "comment_id": 49619808, "body": "Ugh, sorry. I had been bitten by that before."}], "tags": [], "owner": {"reputation": 1528, "user_id": 3980033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6e7695641598ad49d3e0831e1bdf1cd?s=128&d=identicon&r=PG&f=1", "display_name": "tkosinski", "link": "https://stackoverflow.com/users/3980033/tkosinski"}, "is_accepted": false, "score": 0, "last_activity_date": 1433971257, "creation_date": 1433971257, "answer_id": 30767530, "question_id": 30767436, "link": "https://stackoverflow.com/questions/30767436/python-runs-in-powershell-but-not-command-prompt/30767530#30767530", "title": "Python runs in Powershell but not command prompt", "body": "<p>Add a trailing backslash at the end of the path so that it is</p>\n\n<blockquote>\n  <p>C:\\Python27a\\</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4996702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8e98c4c402bad4a15f1b61f71e10f44?s=128&d=identicon&r=PG&f=1", "display_name": "Heavy G", "link": "https://stackoverflow.com/users/4996702/heavy-g"}, "edited": false, "score": 0, "creation_date": 1433972359, "post_id": 30767582, "comment_id": 49587738, "body": "Did not try this yet, but I seem to have found a solution. I will edit my question to include it."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1433973375, "post_id": 30767582, "comment_id": 49588172, "body": "The tokenizing function <code>cmd!TokStr</code> gets confused by the double quote when tokenizing <code>PATH</code>, so the last two directories are tokenized as a single malformed entry, <code>C:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn&quot;;C:\\Python27a</code>."}], "tags": [], "owner": {"reputation": 1375, "user_id": 764627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/977fddcb5312350bbe2ee23fc2254ae9?s=128&d=identicon&r=PG", "display_name": "Simon Ejsing", "link": "https://stackoverflow.com/users/764627/simon-ejsing"}, "is_accepted": false, "score": 1, "last_activity_date": 1433971515, "creation_date": 1433971515, "answer_id": 30767582, "question_id": 30767436, "link": "https://stackoverflow.com/questions/30767436/python-runs-in-powershell-but-not-command-prompt/30767582#30767582", "title": "Python runs in Powershell but not command prompt", "body": "<p>If the path variable you provided indeed is accurate, then you seem to have a stray double-quote (\") in there that can mess things up:\n...\\Binn\";C:\\Python27a</p>\n\n<p>Try removing that double quote character.</p>\n"}], "owner": {"reputation": 1, "user_id": 4996702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8e98c4c402bad4a15f1b61f71e10f44?s=128&d=identicon&r=PG&f=1", "display_name": "Heavy G", "link": "https://stackoverflow.com/users/4996702/heavy-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1281, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1433972714, "creation_date": 1433970854, "last_edit_date": 1433972714, "question_id": 30767436, "link": "https://stackoverflow.com/questions/30767436/python-runs-in-powershell-but-not-command-prompt", "title": "Python runs in Powershell but not command prompt", "body": "<p>I am using Windows 7 and have <strong>Python 2.7</strong> installed in <code>C:\\Python27a</code>. This location has been added to my <code>Path system variable</code>. When I use the command prompt, typing <code>python</code> returns the error message <code>python' is not recognized...</code> However using <strong>Powershell</strong> I can type in <code>python</code> and it starts as expected.</p>\n\n<p>I have had another user confirm that the Path variable is correct by installing Python on his machine, adding the location to Path, and running from the command prompt in the exact same fashion that I attempted. I am lead to believe that at some point (which I can't remember) I foolishly changed a setting in Powershell that makes it access the <code>Path</code> whereas <code>CMD</code> no longer can.</p>\n\n<p>This is my Path variable (the python location is at the end):    </p>\n\n<pre><code>C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files (x86)\\MKS Toolkit\\mksnt;C:\\PROGRA~2\\MKSTOO~1\\bin64;C:\\PROGRA~2\\MKSTOO~1\\bin;C:\\PROGRA~2\\MKSTOO~1\\bin\\X11;C:\\PROGRA~2\\MKSTOO~1\\mksnt;C:\\IBM\\InformationServer/jdk32\\jre\\bin;C:\\IBM\\InformationServer/jdk32\\jre\\bin\\j9vm;C:\\IBM\\InformationServer\\ASBNode\\lib\\cpp;C:\\IBM\\InformationServer\\ASBNode\\apps\\proxy\\cpp\\vc60\\MT_dll\\bin;C:\\Program Files\\Common Files\\Microsoft Shared\\Microsoft Online Services;C:\\Program Files (x86)\\Common Files\\Microsoft Shared\\Microsoft Online Services;%SystemRoot%\\system32;%SystemRoot%;%SystemRoot%\\System32\\Wbem;%SYSTEMROOT%\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\VSShell\\Common7\\IDE\\;C:\\Program Files (x86)\\Microsoft SQL Server\\100\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\100\\Tools\\Binn\\;C:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\Common7\\IDE\\PrivateAssemblies\\;C:\\Program Files (x86)\\Microsoft SQL Server\\100\\DTS\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\100\\DTS\\Binn\";C:\\Python27a\n</code></pre>\n\n<p>This is not a serious problem, as I can still run Python by manually changing to the directory <code>C:\\Python27</code> before entering <code>python</code> or I can always just use <strong>IDLE</strong>, but I am curious why this is happening and how it can be resolved?</p>\n\n<p>RESOLVED: I fixed this by placing \"C:\\Python27a\" earlier in the the Path variable. The multiple occurrences of %SystemRoot% seemed suspicious to me, so I wanted to read the python location first and sure enough, it now works. I don't know yet what the underlying cause of the problem was, but I will report back when I find out.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "edited": false, "score": 0, "creation_date": 1433984191, "post_id": 30767416, "comment_id": 49591443, "body": "I don&#39;t think apply is best option for this. If I understand correctly why not DFa[DF.index].sum()?"}, {"owner": {"reputation": 10326, "user_id": 2822004, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ec7196aaa220767879f125eab493f7a2?s=128&d=identicon&r=PG&f=1", "display_name": "tumultous_rooster", "link": "https://stackoverflow.com/users/2822004/tumultous-rooster"}, "reply_to_user": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "edited": false, "score": 0, "creation_date": 1433987784, "post_id": 30767416, "comment_id": 49592293, "body": "I agree, it&#39;s a pretty lousy example. My main problem is trying to return from the apply. I would really like to see how I could return 3 different dataframes, and sum them up elsewhere (but I didn&#39;t mention that in the question appropriately)."}, {"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "edited": false, "score": 1, "creation_date": 1433989812, "post_id": 30767416, "comment_id": 49592743, "body": "That&#39;s okay, it&#39;s possible that groupby might be a better alternative to look into. You can specify groups for the 3 subsets then simply use the sum method on the resulting groupby object."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 2, "creation_date": 1434022968, "post_id": 30767416, "comment_id": 49609493, "body": "@MattO&#39;Brien: The performance of DF.apply(func, axis=1) is comparable to calling func in a loop. apply is useful when you want to align the output into a single DataFrame. If you need to return 3 disparate DataFrames, go ahead and loop over DF.iterrows(). For better performance you&#39;ll have to think of a better way to calculate the result (such as doing a sorted cumsum for the toy example above) or perhaps use Cython."}, {"owner": {"reputation": 10326, "user_id": 2822004, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ec7196aaa220767879f125eab493f7a2?s=128&d=identicon&r=PG&f=1", "display_name": "tumultous_rooster", "link": "https://stackoverflow.com/users/2822004/tumultous-rooster"}, "reply_to_user": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1434040369, "post_id": 30767416, "comment_id": 49622726, "body": "wow @unutbu you just laid it down right there, thanks"}], "answers": [{"comments": [{"owner": {"reputation": 10326, "user_id": 2822004, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ec7196aaa220767879f125eab493f7a2?s=128&d=identicon&r=PG&f=1", "display_name": "tumultous_rooster", "link": "https://stackoverflow.com/users/2822004/tumultous-rooster"}, "edited": false, "score": 0, "creation_date": 1433974178, "post_id": 30767680, "comment_id": 49588483, "body": "So hypothetically, what if I actually wanted to return a dataframe of dataframes? <code>DF_of_DFs = DFa.apply(lambda x: foo(x, DF), axis=1)</code> doesn&#39;t seem to be appropriate..."}], "tags": [], "owner": {"reputation": 2675, "user_id": 1459601, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d43fe4faf7864be58ddac6812a49dce4?s=128&d=identicon&r=PG", "display_name": "aensm", "link": "https://stackoverflow.com/users/1459601/aensm"}, "is_accepted": false, "score": 1, "last_activity_date": 1433971987, "creation_date": 1433971987, "answer_id": 30767680, "question_id": 30767416, "link": "https://stackoverflow.com/questions/30767416/return-multiple-objects-from-an-apply-function-in-pandas/30767680#30767680", "title": "Return multiple objects from an apply function in Pandas", "body": "<p>Your function needs to return a value. E.g.,</p>\n\n<pre><code>def foo(df1, df2):\n    cutoff_date = df1.date\n    ans = df2[df2.date &lt; cutoff_date].value.sum()\n    return ans\n\n\nDFa.apply(lambda x: foo(x, DF), axis=1)\n</code></pre>\n\n<p>Also, note that <code>apply</code> returns a <code>DataFrame</code>. So your current function would return a <code>DataFrame</code> for each row in <code>DFa</code>, so you would end up with a <code>DataFrame</code> of <code>DataFrames</code></p>\n"}, {"tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": false, "score": 1, "last_activity_date": 1433973287, "last_edit_date": 1433973287, "creation_date": 1433972756, "answer_id": 30767863, "question_id": 30767416, "link": "https://stackoverflow.com/questions/30767416/return-multiple-objects-from-an-apply-function-in-pandas/30767863#30767863", "title": "Return multiple objects from an apply function in Pandas", "body": "<p>There's a bit of a mixup the way you're using <code>apply</code>. With <code>axis=1</code>, <code>foo</code> will be applied to each <em>row</em> (see the <a href=\"http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.apply.html\" rel=\"nofollow\">docs</a>), and yet your code implies (by the parameter name) that its first parameter is a DataFrame.</p>\n\n<p>Additionally, you state that you want to sum up the original DataFrame's values for those less than the date. So <code>foo</code> needs to do this, and return the values. </p>\n\n<p>So the code needs to look something like this:</p>\n\n<pre><code>def foo(row, DF=DF):\n    cutoff_date = row['date']\n    return DF[DF['date'] &lt; cutoff_date].value.sum()\n</code></pre>\n\n<p>Once you make the changes, as <code>foo</code> returns a scalar, then <code>apply</code> will return a series:</p>\n\n<pre><code>&gt;&gt; DFa.apply(foo, axis=1)\n1     1\n2     3\n4    10\ndtype: int64\n</code></pre>\n"}], "owner": {"reputation": 10326, "user_id": 2822004, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ec7196aaa220767879f125eab493f7a2?s=128&d=identicon&r=PG&f=1", "display_name": "tumultous_rooster", "link": "https://stackoverflow.com/users/2822004/tumultous-rooster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1139, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1433973287, "creation_date": 1433970781, "question_id": 30767416, "link": "https://stackoverflow.com/questions/30767416/return-multiple-objects-from-an-apply-function-in-pandas", "title": "Return multiple objects from an apply function in Pandas", "body": "<p>I'm practicing with using <code>apply</code> with Pandas dataframes. </p>\n\n<p>So I have cooked up a simple dataframe with dates, and values:</p>\n\n<pre><code>dates = pd.date_range('2013',periods=10)\nvalues = list(np.arange(1,11,1))\nDF = DataFrame({'date':dates, 'value':values})\n</code></pre>\n\n<p>I have a second dataframe, which is made up of 3 rows of the original dataframe: </p>\n\n<pre><code>DFa = DF.iloc[[1,2,4]]\n</code></pre>\n\n<p>So, I'd like to use the 2nd dataframe, <code>DFa</code>, and get the dates from each row (using apply), and then find and sum up any dates in the original dataframe, that came earlier:</p>\n\n<pre><code>def foo(DFa, DF=DF):\n    cutoff_date = DFa['date']\n    ans=DF[DF['date'] &lt; cutoff_date]\n\nDFa.apply(foo, axis=1)\n</code></pre>\n\n<p>Things work fine. My question is, since I've created 3 <code>ans</code>, how do I access these values?</p>\n\n<p>Obviously I'm new to <code>apply</code> and I'm eager to get away from loops. I just don't understand how to return values from apply.</p>\n"}, {"tags": ["python", "latex"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433971538, "post_id": 30767406, "comment_id": 49587334, "body": "You don&#39;t close your file either <code>a.close -&gt; a.close()</code>, you  open a after trying to  use it, open it once outside the loop  using <code>with</code>"}], "answers": [{"comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433971745, "post_id": 30767535, "comment_id": 49587442, "body": "The OP also try to use a before the create it"}, {"owner": {"reputation": 33, "user_id": 4996742, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hADL-46UnUg/AAAAAAAAAAI/AAAAAAAAABI/89U2VsuPXNA/photo.jpg?sz=128", "display_name": "Cheng Zhang", "link": "https://stackoverflow.com/users/4996742/cheng-zhang"}, "edited": false, "score": 0, "creation_date": 1433972448, "post_id": 30767535, "comment_id": 49587783, "body": "@kindall, you are right, and that&#39;s a lesson! nothing like this will happen in 2.7. However, after I changed it ,new error coming out.Traceback (most recent call last):   File &quot;C:\\Users\\Cheng\\Desktop\\tabletest.py&quot;, line 8, in &lt;module&gt;     with conn: AttributeError: <b>exit</b>"}], "tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": true, "score": 6, "last_activity_date": 1433971266, "creation_date": 1433971266, "answer_id": 30767535, "question_id": 30767406, "link": "https://stackoverflow.com/questions/30767406/os-path-getsize-invalid-syntax-error/30767535#30767535", "title": "os.path.getsize Invalid syntax error", "body": "<p>It's not the <code>os.path.getsize</code> that's the problem, it's the <code>print</code>. You're using Python 3 and <code>print</code> is now a function, and therefore needs parentheses.</p>\n\n<pre><code>print(os.path.getsize(\"testtest.tex\"))\n</code></pre>\n\n<p>Also, it'd be nice (though admittedly, you'd never notice in this script) if you actually called <code>close</code> rather than just referencing it:</p>\n\n<pre><code>a.close()\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4996742, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hADL-46UnUg/AAAAAAAAAAI/AAAAAAAAABI/89U2VsuPXNA/photo.jpg?sz=128", "display_name": "Cheng Zhang", "link": "https://stackoverflow.com/users/4996742/cheng-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3256, "favorite_count": 0, "accepted_answer_id": 30767535, "answer_count": 1, "score": 0, "last_activity_date": 1433971266, "creation_date": 1433970750, "question_id": 30767406, "link": "https://stackoverflow.com/questions/30767406/os-path-getsize-invalid-syntax-error", "title": "os.path.getsize Invalid syntax error", "body": "<p>First thing first, code is list below,</p>\n\n<pre><code>import sys\nimport os\nimport latexmake\n\nimport mysql.connector\nconn = mysql.connector.connect(user='root',password='oilwell',host='localhost',database='sqlpush1')\n\nwith conn:\n    mycursor = conn.cursor()\nmycursor=execute(\"SELECT DATE,oil,gas,oilprice,gasprice,totrev FROM results WHERE DATE BETWEEN '2011-01-01' AND '2027-12-01'\")\nrows = mycursor.fetchall()\na.write(\"\\\\documentclass{standalone}\\\\usepackage{booktabs}\\n\\n\\\\usepackage{siunitx}\\r \\n\\\n\\r\\n\\\\begin{document}\\r\\n\\\\begin{tabular}{ccS[table-format = 5.2]} \\\\\\\\ \\\\toprule\\r\")\na.write(\"Date &amp; Oil &amp; Gas &amp; Oil price &amp; Gas price &amp; Total Revenue \\\\\\\\ \\\\midrule \\r\")\nfor row in rows:\n    a = open(\"testtest.tex\", \"w\")\n    a.write(\"\" + str(row[0]) + \" &amp; \" + str(row[1]) + \" &amp; \" + str(row[2]) + \" &amp; \" + str(row[3]) + \" &amp; \" + str(row[4]) + \" &amp; \" + str(row[5]) + \" \\\\\\\\ \\r\")\n\n    a.write(\"\\\\bottomrule \\\\end{tabular}\\r\\\\end{document}\")\n    a.close\nprint os.path.getsize(\"testtest.tex\")\nos.system('latexmk.py -q testtest.tex')\nmycursor.close()\nconn.close()\n</code></pre>\n\n<p>after run IDLE, an error called \"Invalid Syntax\" pop up on line \"os.path.getsize\"</p>\n\n<p>I did import os at very beginning, and I don't know why.</p>\n\n<p>Appreciated your kind help.</p>\n\n<p>Regards,</p>\n\n<p>Cheng </p>\n"}, {"tags": ["python", "python-2.7", "radio-button", "wxpython", "menuitem"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 4909692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b83f6bd8afd9fb71beb34d82772884f6?s=128&d=identicon&r=PG&f=1", "display_name": "Sonic", "link": "https://stackoverflow.com/users/4909692/sonic"}, "edited": false, "score": 0, "creation_date": 1433973279, "post_id": 30767401, "comment_id": 49588141, "body": "This results in: <code>AttributeError: &#39;str&#39; object has no attribute &#39;Check&#39;</code> the code works fine, didnt notice any errors. Check(True) also works but Check(False) seems to be ignored.  What would be the better solution to create create the variables for the menuitems?"}, {"owner": {"reputation": 107, "user_id": 4909692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b83f6bd8afd9fb71beb34d82772884f6?s=128&d=identicon&r=PG&f=1", "display_name": "Sonic", "link": "https://stackoverflow.com/users/4909692/sonic"}, "edited": false, "score": 0, "creation_date": 1434191720, "post_id": 30767401, "comment_id": 49682001, "body": "THanks,its seems to be not possible to deactivate all radio buttons in a menu. My solution, add another (Not connected) and then Disable this one. It can still be checked in a function but its greyed out so the user cant interact with it."}], "tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 0, "last_activity_date": 1433971194, "last_edit_date": 1433971194, "creation_date": 1433970739, "answer_id": 30767401, "question_id": 30767334, "link": "https://stackoverflow.com/questions/30767334/wxpython-menu-deselect-all-radio-buttons-wx-radio-item/30767401#30767401", "title": "wxPython Menu - deselect all Radio Buttons (wx.RADIO_ITEM)", "body": "<pre><code>[menu.Check(False) for menu in my_list]\n</code></pre>\n\n<p>don't use list as your variable name, also I would expect you to get an IndexError with this code ....</p>\n"}, {"tags": [], "owner": {"reputation": 16948, "user_id": 4637585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2ff170e0cfa0be15efaabd3acef4df34?s=128&d=identicon&r=PG&f=1", "display_name": "Rolf of Saxony", "link": "https://stackoverflow.com/users/4637585/rolf-of-saxony"}, "is_accepted": false, "score": 0, "last_activity_date": 1437574486, "creation_date": 1437574486, "answer_id": 31565708, "question_id": 30767334, "link": "https://stackoverflow.com/questions/30767334/wxpython-menu-deselect-all-radio-buttons-wx-radio-item/31565708#31565708", "title": "wxPython Menu - deselect all Radio Buttons (wx.RADIO_ITEM)", "body": "<p>You are right Sonic, it appears that you must have something checked in menu RadioItems, so adding a dummy is a practical way around the issue but there is an easier way of setting the selected item. e.g.<br>\n    b_m = wx.Menu()<br>\n    b_m.AppendRadioItem(1, \"Full Screen On\")<br>\n    b_m.AppendRadioItem(2, \"Full Screen Off\")<br>\n    self.Bind(wx.EVT_MENU, self.OnFScrOn, id=1)<br>\n    self.Bind(wx.EVT_MENU, self.OnFScrOff, id=2)<br>\n    b_m.Check(2,True)  </p>\n\n<p>The last line sets menu item id 2 to True </p>\n\n<p>I too would expect an index problem with \n<code>list[i].Check(False)</code><br>\nas Joran mentioned above</p>\n"}], "owner": {"reputation": 107, "user_id": 4909692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b83f6bd8afd9fb71beb34d82772884f6?s=128&d=identicon&r=PG&f=1", "display_name": "Sonic", "link": "https://stackoverflow.com/users/4909692/sonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 841, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1437574486, "creation_date": 1433970490, "question_id": 30767334, "link": "https://stackoverflow.com/questions/30767334/wxpython-menu-deselect-all-radio-buttons-wx-radio-item", "title": "wxPython Menu - deselect all Radio Buttons (wx.RADIO_ITEM)", "body": "<p>im working on my first wxpython app. Its a GUI for a comandline utility and needs the connection to a samba share. Now i want to add a server selection to the menu as radio buttons.\nIm using ConfigParser for a settings ini file which also holds the configuration for the default server as well as \nthe server it should connect.</p>\n\n<p>Now i want to deselect all radio buttons if no default server is selected and the program didnt connect at\nstartup.</p>\n\n<p>Here is my Code for adding the RADIO_ITEMS to the menu:\n(I know this could probably be done much better but im still learning and im glad it works, any recommendatiosn are welcome)</p>\n\n<pre><code># Create a List to be used as variables\nfor i in range(1,7):\n    list.append('radiobutton{}'.format(str(i)))\n# Append the RadioButtons\nfor i in range(1,7):\n    num = str(i)\n    # Load Sections of ini (every server has its own section, up to 6 are allowed)\n    config_sec = Config.sections()\n    if filter(lambda x: 'Server{}'.format(num) in x, config_sec):\n        name = LoadConfig(\"Server{}\".format(num))['connection name']\n        list[i] = wx.MenuItem(self.wpkg_server, 400+i, name, 'Connect to Server: {} ?'.format(name), kind=wx.ITEM_RADIO)\n        self.wpkg_server.AppendItem(list[i])\n        # Get Default server setting from ini\n        default_server = LoadConfig(\"Options\")['default server']\n        # Try if default_server is a valid number that can be converted to int\n        try:\n            int(default_server)\n        except ValueError:\n            # This is the part not working, if there is no default server set i want to uncheck\n            # deselect all added items but with no luck.\n            # the first item is always selected if no default server was set\n            list[i].Check(False)\n        else:\n            if i == int(default_server):\n                # Selecting the correct radio button if it is the default server works fine\n                list[i].Check(True)\n                self.statusbar.SetStatusText('Connected to Server: {}!'.format(name))\n</code></pre>\n"}, {"tags": ["python", "image", "tiff", "pillow"], "comments": [{"owner": {"reputation": 1871, "user_id": 1413826, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/9c02e2ffe62e943db7b2ce85c7882ab2?s=128&d=identicon&r=PG", "display_name": "steve", "link": "https://stackoverflow.com/users/1413826/steve"}, "edited": false, "score": 0, "creation_date": 1433977905, "post_id": 30767328, "comment_id": 49589783, "body": "Can you post the code that throws this error. Pillow&#39;s Image.open() should not throw this immediately after being called, as it only loads data into memory as it needs it."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1434001882, "post_id": 30767328, "comment_id": 49596119, "body": "Have a look at, and maybe vote for, my answer which uses <code>vips</code> here... <a href=\"http://stackoverflow.com/questions/30115047/resize-huge-jpeg-using-no-memory/30118754#30118754\" title=\"resize huge jpeg using no memory\">stackoverflow.com/questions/30115047/&hellip;</a>"}, {"owner": {"reputation": 85, "user_id": 2932382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850a6f19e1704eee9779cda434866c3d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle", "link": "https://stackoverflow.com/users/2932382/pavle"}, "reply_to_user": {"reputation": 1871, "user_id": 1413826, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/9c02e2ffe62e943db7b2ce85c7882ab2?s=128&d=identicon&r=PG", "display_name": "steve", "link": "https://stackoverflow.com/users/1413826/steve"}, "edited": false, "score": 0, "creation_date": 1434011961, "post_id": 30767328, "comment_id": 49601947, "body": "@steve - I added the code. And yeah, I also thought it shouldn&#39;t, as I was reading a post (from 1999) about loading parts of image: it was using Image.open() and then loading parts of this image.  MarkSetchell - thank you, I will take a look :)"}], "owner": {"reputation": 85, "user_id": 2932382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/850a6f19e1704eee9779cda434866c3d?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle", "link": "https://stackoverflow.com/users/2932382/pavle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1368, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1434011428, "creation_date": 1433970480, "last_edit_date": 1434011428, "question_id": 30767328, "link": "https://stackoverflow.com/questions/30767328/pillows-image-open-memoryerror-while-opening-big-tiff-file", "title": "Pillow&#39;s Image.open() MemoryError while opening big tiff file", "body": "<p>I am writing a python script that will be running on the server and will resize images (namely Indesign links). It all works fine, except when I am trying to open bigger tiff files (800 MB).</p>\n\n<p>I am using <strong>Pillow's Image.open()</strong> in order to resize it, but I am getting <strong>MemoryError</strong> error. I tried with other libraries like ImageMagick and tifffile with the same results. I could split it in smaller chunks, resize those and then combine them, but I have no idea how to do that without opening file first.</p>\n\n<p>I searched extensively, but cannot find solution that would seem appropriate to my case. I was also observing memory consumption and it doesn't seem to be irregularly high. It's safe to say I am completely lost.</p>\n\n<p>The whole trace goes like this:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"app.py\", line 87, in &lt;module&gt;\n    convert()\n  File \"X:\\Development\\Python\\zipper\\converter.py\", line 112, in convert\n    if saveAsJPEG(file, name + \".jpg\"): converted_images = updateCounter(all_images, converted_images)\n  File \"X:\\Development\\Python\\zipper\\converter.py\", line 37, in saveAsJPEG\n    print Image.open(a).size\n  File \"C:\\Python27\\lib\\site-packages\\PIL\\Image.py\", line 2266, in open\n    im = factory(fp, filename)\n  File \"C:\\Python27\\lib\\site-packages\\PIL\\ImageFile.py\", line 97, in __init__\n    self._open()\n  File \"C:\\Python27\\lib\\site-packages\\PIL\\TiffImagePlugin.py\", line 637, in _open\n    self._seek(0)\n  File \"C:\\Python27\\lib\\site-packages\\PIL\\TiffImagePlugin.py\", line 672, in _seek\n    self.tag.load(self.fp)\n  File \"C:\\Python27\\lib\\site-packages\\PIL\\TiffImagePlugin.py\", line 458, in load\n    data = ImageFile._safe_read(fp, size)\n  File \"C:\\Python27\\lib\\site-packages\\PIL\\ImageFile.py\", line 521, in _safe_read\n    block = fp.read(min(size, SAFEBLOCK))\nMemoryError\n</code></pre>\n\n<p>Thank you all for any help!</p>\n\n<p><strong>--- EDIT</strong></p>\n\n<p>This is the code that throws error</p>\n\n<pre><code>def saveAsJPEG(file, newfile):\n    print \"\\nopening:\", file\n    try:\n        with Image.open(file) as im:\n            if not im.size[0] &lt; size[0] or im.size[1] &lt; size[1]:\n                new_im = im.resize(size, Image.ANTIALIAS)\n                new_im.save(newfile, 'JPEG', quality=100, dpi=(72, 72))\n\n                # Force a memory dump.  Otherwise memory will get cluttered up -&gt; I am not sure if this is necessary as it doesn't seem to do anything. \n                del im\n                del new_im\n                collect()\n                return True\n    except:\n        print \"image is too big -&gt; try something else. But what?\"\n        # this line below throws error (MemoryError). It was the same without try-except part before.\n        Image.open(file)\n</code></pre>\n\n<p>The function is used in for-loop where \"images\" is array (list) of full file paths (X:\\path\\to\\my\\image.tiff)</p>\n\n<pre><code>for file in images:\n    #gets extension\n    name = basename(splitext(file)[0])\n    ext = splitext(file)[1]\n\n    # check for extension type and run appropriate function\n    if ext == '.jpg' or ext == '.jpeg' or ext == '.tif' or ext == '.tiff':\n        if saveAsJPEG(file, name + \".jpg\"): converted_images = updateCounter(all_images, converted_images)\n\n    del file, name, ext\n</code></pre>\n"}, {"tags": ["python", "csv", "pandas", "dataframe", "types"], "answers": [{"tags": [], "owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "is_accepted": true, "score": 8, "last_activity_date": 1433971325, "last_edit_date": 1433971325, "creation_date": 1433970553, "answer_id": 30767354, "question_id": 30767281, "link": "https://stackoverflow.com/questions/30767281/convert-string-with-comma-to-number-using-python-pandas/30767354#30767354", "title": "Convert String With Comma To Number Using Python Pandas", "body": "<p>The <code>read_csv</code> function takes an optional <code>thousands</code> argument. Its default is <code>None</code> so you can change it to <code>\",\"</code> to have it recognise <code>1,234</code> as <code>1234</code> when it reads the file:</p>\n\n<pre><code>pd.read_csv(\"c:/foo/ds-dump.csv\", thousands=\",\")\n</code></pre>\n\n<p>The column holding the millisecond values should then have the <code>int64</code> datatype once the file has been read into memory.</p>\n"}], "owner": {"reputation": 479, "user_id": 1380901, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7b972ff5d62434623ade7ad88b02aa99?s=128&d=identicon&r=PG", "display_name": "Tom Purl", "link": "https://stackoverflow.com/users/1380901/tom-purl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3887, "favorite_count": 1, "accepted_answer_id": 30767354, "answer_count": 1, "score": 4, "last_activity_date": 1494855502, "creation_date": 1433970275, "last_edit_date": 1494855502, "question_id": 30767281, "link": "https://stackoverflow.com/questions/30767281/convert-string-with-comma-to-number-using-python-pandas", "title": "Convert String With Comma To Number Using Python Pandas", "body": "<p>I am generating a pivot table report using the pandas Python module. The source data includes a lot of readings measured in milliseconds. If the number of milliseconds exceeds 999 then the value in that CSV file will include commas (e.g. 1,234 = 1.234 seconds).</p>\n\n<p>Here's how I'm trying to run the report:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\npool_usage = pd.read_csv(\"c:/foo/ds-dump.csv\")\n\n# Add a column to the end that shows you where the data came from\npool_usage[\"Source File\"] = \"ds-dump.csv\"\n\nreport = pool_usage.pivot_table(values=['Average Pool Size', 'Average Usage Time (ms)'], index=['Source File'], aggfunc=np.max)\n\nprint(report)\n</code></pre>\n\n<p>The problem is that the dtype for the <strong>Average Usage Time (ms)</strong> is an object so the <code>np.max</code> function just treats it like it's NaN. I therefore never see any values greater than 999.</p>\n\n<p>I tried fixing the issue like this:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\npool_usage = pd.read_csv(\"c:/foo/ds-dump.csv\")\n\n# Add a column to the end that shows you where the data came from\npool_usage[\"Source File\"] = \"ds-dump.csv\"\n\n# Convert strings to numbers if possible\npool_usage = pool_usage.convert_objects(convert_numeric=True)\n\nreport = pool_usage.pivot_table(values=['Average Pool Size', 'Average Usage Time (ms)'], index=['Source File'], aggfunc=np.max)\n\nprint(report)\n</code></pre>\n\n<p>This did actually change the dtype of the <strong>Average Usage Time</strong> column to a float but all of the values that are greater than 999 are still treated like NaN's. </p>\n\n<p>How can I convert the <strong>Average Usage Time</strong> column to a float even though it's possible that some of the values may include commas?</p>\n"}, {"tags": ["python", "r", "matrix", "multidimensional-array"], "comments": [{"owner": {"reputation": 952, "user_id": 843365, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/gLaXv.jpg?s=128&g=1", "display_name": "Jon Cardoso", "link": "https://stackoverflow.com/users/843365/jon-cardoso"}, "edited": false, "score": 0, "creation_date": 1433970418, "post_id": 30767225, "comment_id": 49586751, "body": "I think you would need to generate some sort of Gaussian distribution, having each X point as the center of it, but I honestly don&#39;t know how."}, {"owner": {"reputation": 2403, "user_id": 3190054, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b7de233f9b761d1d0d75d64b608aca88?s=128&d=identicon&r=PG&f=1", "display_name": "kezzos", "link": "https://stackoverflow.com/users/3190054/kezzos"}, "edited": false, "score": 0, "creation_date": 1433970453, "post_id": 30767225, "comment_id": 49586775, "body": "Do you want a linear interpolation between the values? Are you trying to work out the gradient of the background?"}, {"owner": {"reputation": 28030, "user_id": 3628236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/sMsia.jpg?s=128&g=1", "display_name": "Colonel Beauvel", "link": "https://stackoverflow.com/users/3628236/colonel-beauvel"}, "edited": false, "score": 1, "creation_date": 1433970852, "post_id": 30767225, "comment_id": 49586970, "body": "a bilinear interpolation will do the trick. This can help: <a href=\"http://stats.stackexchange.com/questions/14798/bicubic-bilinear-interpolation-in-r\" title=\"bicubic bilinear interpolation in r\">stats.stackexchange.com/questions/14798/&hellip;</a>"}, {"owner": {"reputation": 1817, "user_id": 429898, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IbMYQ.jpg?s=128&g=1", "display_name": "jefdaj", "link": "https://stackoverflow.com/users/429898/jefdaj"}, "edited": false, "score": 0, "creation_date": 1433971176, "post_id": 30767225, "comment_id": 49587124, "body": "Thanks guys, that looks like what I wanted! I&#39;ll see if I can work it out from that question and post the code."}, {"owner": {"reputation": 1817, "user_id": 429898, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IbMYQ.jpg?s=128&g=1", "display_name": "jefdaj", "link": "https://stackoverflow.com/users/429898/jefdaj"}, "edited": false, "score": 0, "creation_date": 1433971691, "post_id": 30767225, "comment_id": 49587417, "body": "Or not, beaten to it already."}, {"owner": {"reputation": 80563, "user_id": 496803, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b8556bc403e46083a0cac69f902fa04f?s=128&d=identicon&r=PG", "display_name": "thelatemail", "link": "https://stackoverflow.com/users/496803/thelatemail"}, "edited": false, "score": 0, "creation_date": 1433974018, "post_id": 30767225, "comment_id": 49588406, "body": "This answer should work as well: <a href=\"http://stackoverflow.com/questions/30113019/how-can-i-create-a-surface-plot-with-missing-values-in-r/30113368#30113368\" title=\"how can i create a surface plot with missing values in r\">stackoverflow.com/questions/30113019/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "is_accepted": false, "score": 2, "last_activity_date": 1433971352, "creation_date": 1433971352, "answer_id": 30767544, "question_id": 30767225, "link": "https://stackoverflow.com/questions/30767225/estimate-a-matrix-of-numbers-based-on-known-corner-values/30767544#30767544", "title": "Estimate a matrix of numbers based on known corner values?", "body": "<p>You're looking for 2D interpolation.  There are a number of different interpolation methods you could use.</p>\n\n<p>As a quick python example (I'm sure R has plenty of options, as well):</p>\n\n<pre><code>import numpy as np\nimport numpy as np\nimport scipy.interpolate\nimport matplotlib.pyplot as plt\n\ny, x = np.mgrid[:12, :12]\n\nxcorners = x[0,0], x[0, -1], x[-1, 0], x[-1, -1]\nycorners = y[0,0], y[0, -1], y[-1, 0], y[-1, -1]\nzcorners = [1, 2, 3, 4]\n\nxy = np.column_stack([xcorners, ycorners])\nxyi = np.column_stack([x.ravel(), y.ravel()])\nzi = scipy.interpolate.griddata(xy, zcorners, xyi)\nzi = zi.reshape(x.shape)\n\nfig, ax = plt.subplots()\ngrid = ax.pcolormesh(x, y, zi)\nax.scatter(xcorners, ycorners, c=zcorners, s=200)\nfig.colorbar(grid)\nax.margins(0.05)\n\nplt.show()\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/ZURt6.png\" alt=\"enter image description here\"></p>\n"}, {"comments": [{"owner": {"reputation": 1817, "user_id": 429898, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IbMYQ.jpg?s=128&g=1", "display_name": "jefdaj", "link": "https://stackoverflow.com/users/429898/jefdaj"}, "edited": false, "score": 0, "creation_date": 1433972257, "post_id": 30767552, "comment_id": 49587689, "body": "Thanks! Joe&#39;s is really nice but &quot;not that advanced&quot; is more what I was looking for"}], "tags": [], "owner": {"reputation": 2403, "user_id": 3190054, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b7de233f9b761d1d0d75d64b608aca88?s=128&d=identicon&r=PG&f=1", "display_name": "kezzos", "link": "https://stackoverflow.com/users/3190054/kezzos"}, "is_accepted": true, "score": 1, "last_activity_date": 1433971375, "creation_date": 1433971375, "answer_id": 30767552, "question_id": 30767225, "link": "https://stackoverflow.com/questions/30767225/estimate-a-matrix-of-numbers-based-on-known-corner-values/30767552#30767552", "title": "Estimate a matrix of numbers based on known corner values?", "body": "<p>This is not that advanced but may help:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nc1 = 0  # Corner values\nc2 = 1\nc3 = 1\nc4 = 4\n\na=np.linspace(c1, c2, 8)\nb=np.linspace(c3, c4, 8)\nc = np.array([np.linspace(i,j,12) for i,j in zip(a,b)])\n\nprint np.shape(c)\n\nplt.figure()\nplt.imshow(c)\nplt.show()\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/NowE4.png\" alt=\"enter image description here\"></p>\n"}, {"tags": [], "owner": {"reputation": 3275, "user_id": 4208752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUvj5.jpg?s=128&g=1", "display_name": "Forrest R. Stevens", "link": "https://stackoverflow.com/users/4208752/forrest-r-stevens"}, "is_accepted": false, "score": 4, "last_activity_date": 1433972914, "last_edit_date": 1433972914, "creation_date": 1433972413, "answer_id": 30767795, "question_id": 30767225, "link": "https://stackoverflow.com/questions/30767225/estimate-a-matrix-of-numbers-based-on-known-corner-values/30767795#30767795", "title": "Estimate a matrix of numbers based on known corner values?", "body": "<p>And if you'd like to do the same in R using the default bilinear (or other interpolation method of your choosing):</p>\n\n<pre><code>library(raster)\n\n##  Four corner values defined as a matrix, raster:\nm &lt;- matrix(c(12,4,3,9), 2, 2)\nr &lt;- raster(m)\n\n##  Construct a new raster, with dimentions matching\n##    the grid you're interpolating to:\nr_i &lt;- raster(nrows=200, ncols=200, ext=extent(r))\n\n##  Resample your four corners, the default is using\n##    bilinear interpolation:\nr_i &lt;- resample(r, r_i)\n\n##  Plot our results:\npar(mfrow=c(1,2))\nplot(r, zlim=c(-10,25))\nplot(r_i, zlim=c(-10,25))\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/VQ8xr.png\" alt=\"enter image description here\"></p>\n\n<p>Note that bilinear interpolation may not be your best option since your corner values are known and you'd likely want those values to remain unchanged in your interpolated data.  A more sophisticated technique could be employed (splines, geostatistical, etc.) if desired.</p>\n"}], "owner": {"reputation": 1817, "user_id": 429898, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IbMYQ.jpg?s=128&g=1", "display_name": "jefdaj", "link": "https://stackoverflow.com/users/429898/jefdaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 30767552, "answer_count": 3, "score": 4, "last_activity_date": 1455677089, "creation_date": 1433970072, "last_edit_date": 1455677089, "question_id": 30767225, "link": "https://stackoverflow.com/questions/30767225/estimate-a-matrix-of-numbers-based-on-known-corner-values", "title": "Estimate a matrix of numbers based on known corner values?", "body": "<p>There's probably a name for the algorithm I want, but I'm not sure how to find\nit. I have lots of 96-well plates like this:</p>\n\n<pre><code>    1  2  3  4  5  6  7  8  9 10 11 12\n   ------------------------------------\nA | X  O  O  O  O  O  O  O  O  O  O  X |\nB | O  O  O  O  O  O  O  O  O  O  O  O |\nC | O  O  O  O  O  O  O  O  O  O  O  O |\nD | O  O  O  O  O  O  O  O  O  O  O  O |\nE | O  O  O  O  O  O  O  O  O  O  O  O |\nF | O  O  O  O  O  O  O  O  O  O  O  O |\nG | O  O  O  O  O  O  O  O  O  O  O  O |\nH | X  O  O  O  O  O  O  O  O  O  O  X |\n   ------------------------------------\n</code></pre>\n\n<p>I've measured the light level at each corner with a light meter, and would like\nto use those four values (marked with <code>X</code>s) to estimate the levels everywhere\nelse. I think I want some kind of weighted average based on how close a well is to\neach corner.</p>\n\n<p>The levels tend to vary diagonally if that matters. For example the top\nright will be highest, bottom left lowest, and the other two somewhere\ninbetween (but possibly nowhere near average).</p>\n\n<p>My gotos are usually R and python but any language is OK since I just need to write the matrixes as CSV files.</p>\n"}, {"tags": ["python", "r", "3d"], "comments": [{"owner": {"reputation": 2403, "user_id": 3190054, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b7de233f9b761d1d0d75d64b608aca88?s=128&d=identicon&r=PG&f=1", "display_name": "kezzos", "link": "https://stackoverflow.com/users/3190054/kezzos"}, "edited": false, "score": 0, "creation_date": 1433970295, "post_id": 30767217, "comment_id": 49586700, "body": "What functions do you mean?"}, {"owner": {"reputation": 4574, "user_id": 2824732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/boKo2.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/2824732/robert"}, "edited": false, "score": 0, "creation_date": 1433971277, "post_id": 30767217, "comment_id": 49587183, "body": "Have you looked at grDevices? it has <code>trans3d</code> , maybe have the opposite too."}, {"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "edited": false, "score": 0, "creation_date": 1433972030, "post_id": 30767217, "comment_id": 49587580, "body": "what is the axis of rotation?"}], "answers": [{"tags": [], "owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "is_accepted": true, "score": 1, "last_activity_date": 1433973915, "last_edit_date": 1433973915, "creation_date": 1433972837, "answer_id": 30767885, "question_id": 30767217, "link": "https://stackoverflow.com/questions/30767217/converting-2d-images-to-3d/30767885#30767885", "title": "Converting 2D images to 3D", "body": "<p>You can do this using <code>rgl</code> package (interface to openGL) in R and the <code>turn3d</code> function</p>\n\n<pre><code>## Define a function (ys must be positive, we are spinning about x-axis)\nf &lt;- function(x) 2*exp(-1/2*x) * (cos(pi*x) + sin(pi*x)) + 2\nxs &lt;- seq(0, 10, length=1000)\nplot(xs, f(xs), type=\"l\")\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/fZ7Aj.png\" alt=\"enter image description here\"></p>\n\n<pre><code>## Rotate about the x-axis\nlibrary(rgl)\nres &lt;- turn3d(xs, f(xs))\nplot3d(res, alpha=.5)\nsnapshot3d(\"temp.png\")\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/q8gXk.png\" alt=\"enter image description here\"></p>\n"}], "owner": {"reputation": 23, "user_id": 4996669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/118754d932f4cdb8d48f77fcd289377c?s=128&d=identicon&r=PG&f=1", "display_name": "the number 17", "link": "https://stackoverflow.com/users/4996669/the-number-17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1737, "favorite_count": 0, "accepted_answer_id": 30767885, "answer_count": 1, "score": 1, "last_activity_date": 1433973915, "creation_date": 1433970058, "question_id": 30767217, "link": "https://stackoverflow.com/questions/30767217/converting-2d-images-to-3d", "title": "Converting 2D images to 3D", "body": "<p>I was trying to convert 2D images to 3D by rotating them about the axes (like a circle to a sphere).\nCurrently my problem is that suppose I have two functions f(x) and g(x) both in one variable. I wish to make a plot of the functions and use rotation to get 3D plots. Based on the 3D plots I would distinguish between the two.</p>\n\n<p>I think one way could be the work out the exact expressions mathematically for the new functions after rotation, but that can be computationally infeasible for not so reasonable functions.\nCan someone please suggest a way to do it using suitable softwares?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 1, "creation_date": 1433970163, "post_id": 30767210, "comment_id": 49586612, "body": "see what your error logs are printing ... on shared hosting you will need to search for <code>error.log</code> (being on shared hosting should not limit your ability to set your own path variable)"}, {"owner": {"reputation": 3007, "user_id": 1423333, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/d8PdR.png?s=128&g=1", "display_name": "J&#246;rn Hees", "link": "https://stackoverflow.com/users/1423333/j%c3%b6rn-hees"}, "edited": false, "score": 1, "creation_date": 1433970254, "post_id": 30767210, "comment_id": 49586674, "body": "maybe you need a <code>__init__.py</code> file in your current directory so it is marked as a package?"}, {"owner": {"reputation": 1971, "user_id": 1014142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f220baeb4665f96a540337553b0482dd?s=128&d=identicon&r=PG", "display_name": "Yura", "link": "https://stackoverflow.com/users/1014142/yura"}, "edited": false, "score": 0, "creation_date": 1433970296, "post_id": 30767210, "comment_id": 49586701, "body": "@ J&#246;rn Hees, please give more details, as I dont know what do you mean... thanks"}, {"owner": {"reputation": 17046, "user_id": 364980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf8ae304409c53b006b47101fe61e34?s=128&d=identicon&r=PG", "display_name": "James Mills", "link": "https://stackoverflow.com/users/364980/james-mills"}, "edited": false, "score": 2, "creation_date": 1433970469, "post_id": 30767210, "comment_id": 49586779, "body": "Looks like you&#39;re using CGI? You <b>should</b> be deploying with uwsgi, fast_cgi, mod_wsgi or mod_proxy."}, {"owner": {"reputation": 1971, "user_id": 1014142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f220baeb4665f96a540337553b0482dd?s=128&d=identicon&r=PG", "display_name": "Yura", "link": "https://stackoverflow.com/users/1014142/yura"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1433970647, "post_id": 30767210, "comment_id": 49586864, "body": "@Joran Beasley, here is my log entry: 85.65.174.249 - - [11/Jun/2015:00:09:13 +0300] &quot;GET /test1.py HTTP/1.1&quot; 500 1059 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101 Firefox/38.0&quot;"}, {"owner": {"reputation": 1971, "user_id": 1014142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f220baeb4665f96a540337553b0482dd?s=128&d=identicon&r=PG", "display_name": "Yura", "link": "https://stackoverflow.com/users/1014142/yura"}, "reply_to_user": {"reputation": 17046, "user_id": 364980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf8ae304409c53b006b47101fe61e34?s=128&d=identicon&r=PG", "display_name": "James Mills", "link": "https://stackoverflow.com/users/364980/james-mills"}, "edited": false, "score": 0, "creation_date": 1433970741, "post_id": 30767210, "comment_id": 49586907, "body": "@James Mills , please explain what do you mean? What should I do? please note, I can tart the .py script if I call it directly, however, the &quot;import&quot; does not work...."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1433970798, "post_id": 30767210, "comment_id": 49586940, "body": "@Yura there should be a traceback of much more than what you posted ..."}, {"owner": {"reputation": 17046, "user_id": 364980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf8ae304409c53b006b47101fe61e34?s=128&d=identicon&r=PG", "display_name": "James Mills", "link": "https://stackoverflow.com/users/364980/james-mills"}, "edited": false, "score": 1, "creation_date": 1433971008, "post_id": 30767210, "comment_id": 49587053, "body": "@Yura CGI is old, outdated and deprecated. Almost <i>no-one</i> deploys this way anymore; certainly not in production."}, {"owner": {"reputation": 1971, "user_id": 1014142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f220baeb4665f96a540337553b0482dd?s=128&d=identicon&r=PG", "display_name": "Yura", "link": "https://stackoverflow.com/users/1014142/yura"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1433971286, "post_id": 30767210, "comment_id": 49587186, "body": "@Joran Beasley, I have edited my question and added what I ses in errors.log. In the last line, you can see that the server writes &quot;ImportError: No module named test2&quot;"}, {"owner": {"reputation": 1971, "user_id": 1014142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f220baeb4665f96a540337553b0482dd?s=128&d=identicon&r=PG", "display_name": "Yura", "link": "https://stackoverflow.com/users/1014142/yura"}, "reply_to_user": {"reputation": 17046, "user_id": 364980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf8ae304409c53b006b47101fe61e34?s=128&d=identicon&r=PG", "display_name": "James Mills", "link": "https://stackoverflow.com/users/364980/james-mills"}, "edited": false, "score": 0, "creation_date": 1433971437, "post_id": 30767210, "comment_id": 49587274, "body": "@James Mills, I am pretty new to this and dont understand what you are saying... I am just using python to do some very basic operations... what do you mean? I just want to make the import work."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 1, "creation_date": 1433971746, "post_id": 30767210, "comment_id": 49587443, "body": "and test2.py is in the same folder?/var/www/vhosts/mywebsite.com/httpdocs/  ? you could try adding <code>sys.path.append(&quot;.&quot;)</code> to the top of test1.py to try and ensure that the local directory is included on the path (I think this is always the case but meh)"}, {"owner": {"reputation": 1971, "user_id": 1014142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f220baeb4665f96a540337553b0482dd?s=128&d=identicon&r=PG", "display_name": "Yura", "link": "https://stackoverflow.com/users/1014142/yura"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1433972186, "post_id": 30767210, "comment_id": 49587661, "body": "@Joran Beasley, I have added import sys sys.path.append(&quot;.&quot;) and it has worked!!! Thanks a lot! Can you pleae explain why didnt it work earlier...?"}, {"owner": {"reputation": 17046, "user_id": 364980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf8ae304409c53b006b47101fe61e34?s=128&d=identicon&r=PG", "display_name": "James Mills", "link": "https://stackoverflow.com/users/364980/james-mills"}, "edited": false, "score": 0, "creation_date": 1433980346, "post_id": 30767210, "comment_id": 49590506, "body": "@Yura Please have a read of <a href=\"https://code.google.com/p/modwsgi/\" rel=\"nofollow noreferrer\">mod_wsgi</a>, <a href=\"http://www.fastcgi.com/drupal/\" rel=\"nofollow noreferrer\">FastCGI</a>, <a href=\"https://uwsgi-docs.readthedocs.org/en/latest/\" rel=\"nofollow noreferrer\">uWSGI</a> -- These are all modern, fast scalable ways of deploying web applications. In the simplest case you should be using a standard HTTP server for development but one of the above for deployment(s)."}], "answers": [{"comments": [{"owner": {"reputation": 633, "user_id": 4971327, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fv-Aw4fl5WU/AAAAAAAAAAI/AAAAAAAAAKY/BMSP_nOIyiw/photo.jpg?sz=128", "display_name": "Alex Ivanov", "link": "https://stackoverflow.com/users/4971327/alex-ivanov"}, "edited": false, "score": 0, "creation_date": 1433971051, "post_id": 30767372, "comment_id": 49587069, "body": "Really? Maybe, this can be helpful then? <a href=\"http://effbot.org/zone/import-confusion.htm\" rel=\"nofollow noreferrer\">effbot.org/zone/import-confusion.htm</a>"}, {"owner": {"reputation": 1971, "user_id": 1014142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f220baeb4665f96a540337553b0482dd?s=128&d=identicon&r=PG", "display_name": "Yura", "link": "https://stackoverflow.com/users/1014142/yura"}, "edited": false, "score": 0, "creation_date": 1433971821, "post_id": 30767372, "comment_id": 49587481, "body": "@ Alex Ivanov, I have checked permissions on both files and they are Read, Write Executable. What is www-data?"}, {"owner": {"reputation": 633, "user_id": 4971327, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fv-Aw4fl5WU/AAAAAAAAAAI/AAAAAAAAAKY/BMSP_nOIyiw/photo.jpg?sz=128", "display_name": "Alex Ivanov", "link": "https://stackoverflow.com/users/4971327/alex-ivanov"}, "edited": false, "score": 1, "creation_date": 1433971926, "post_id": 30767372, "comment_id": 49587539, "body": "OK. Open file in Nautilus as root, go to Properties and check the boxes Read and Execute: Owner, Group, Others - <a href=\"http://www.yolinux.com/TUTORIALS/images/GnomeNautilus_CdromProperties.gif\" rel=\"nofollow noreferrer\">yolinux.com/TUTORIALS/images/GnomeNautilus_CdromProperties.g&zwnj;&#8203;if</a>"}], "tags": [], "owner": {"reputation": 633, "user_id": 4971327, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fv-Aw4fl5WU/AAAAAAAAAAI/AAAAAAAAAKY/BMSP_nOIyiw/photo.jpg?sz=128", "display_name": "Alex Ivanov", "link": "https://stackoverflow.com/users/4971327/alex-ivanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1433970627, "creation_date": 1433970627, "answer_id": 30767372, "question_id": 30767210, "link": "https://stackoverflow.com/questions/30767210/how-can-i-import-my-own-modules-on-webserver/30767372#30767372", "title": "How can I import my own modules on webserver?", "body": "<p>Modules should be in the Python path or in the same directory where the executable is.</p>\n\n<p>Then you do like usually</p>\n\n<pre><code>import test2\n\ntest2.some_function() # or whatever.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 3981203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fzSg5.jpg?s=128&g=1", "display_name": "cwfighter", "link": "https://stackoverflow.com/users/3981203/cwfighter"}, "is_accepted": false, "score": 0, "last_activity_date": 1433991665, "creation_date": 1433991665, "answer_id": 30770819, "question_id": 30767210, "link": "https://stackoverflow.com/questions/30767210/how-can-i-import-my-own-modules-on-webserver/30770819#30770819", "title": "How can I import my own modules on webserver?", "body": "<p>From your description, your program did not found your own module, because you did not give your module's path. Now there are two methods to solve it:</p>\n\n<p>Assume  your module's path is: <code>/srv/modules/xxxx.py</code> \nFirst you should import your module in your program: <code>import xxxx</code></p>\n\n<ol>\n<li><p>command line:Before you run your program with command line, give the path first. command:\n<code>export PYTHONPATH=/srv/modules</code>.Then run your program.</p></li>\n<li><p>add two lines of codes in your program:</p>\n\n<p><code>import sys\n sys.path.append(\"/srv/modules\")</code></p></li>\n</ol>\n\n<p>Use any one way above, you should run your program success.I hope this can help you.</p>\n"}], "owner": {"reputation": 1971, "user_id": 1014142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f220baeb4665f96a540337553b0482dd?s=128&d=identicon&r=PG", "display_name": "Yura", "link": "https://stackoverflow.com/users/1014142/yura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1433991665, "creation_date": 1433970035, "last_edit_date": 1433971620, "question_id": 30767210, "link": "https://stackoverflow.com/questions/30767210/how-can-i-import-my-own-modules-on-webserver", "title": "How can I import my own modules on webserver?", "body": "<p>I am developing a website and want to put some files on the server. The problem is that I can only import python modules ( e.g. \"import os\"), but somewhy, can not import my own modules:</p>\n\n<p>test1.py:</p>\n\n<pre><code>import test2\n</code></pre>\n\n<p>test2.py:</p>\n\n<pre><code>print (\"Content-type:text/html\\n\\n\")\nprint (\"&lt;html&gt;\")\nprint (\"&lt;head&gt;\")\nprint (\"&lt;title&gt;Error&lt;/title&gt;\")\nprint (\"&lt;/head&gt;\")\nprint (\"&lt;body&gt;\")\nprint (\" hello world 2\")\nprint (\"&lt;/body&gt;\")\nprint (\"&lt;/html&gt;\")\n</code></pre>\n\n<p>If I click www.mywebsite.com/test2.py, then I recieve \"hello world\" on the screen.\nHowever, if I click www.mywebsite.com/test1.py, I get \"500 internal server error.\" I found out that it is some problem with not being able to import my modules.</p>\n\n<p>p.s. since I am on a shared server, I can not changes sys path etc....</p>\n\n<p>Here is a trace I got in errors.log:</p>\n\n<pre><code>[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249] mod_python (pid=17816, interpreter='delekulator.co.il', phase='PythonHandler', handler='mod_python.cgihandler'): Application error\n[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249] ServerName: 'delekulator.co.il'\n[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249] DocumentRoot: '/var/www/vhosts/mywebsite.com/httpdocs'\n[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249] URI: '/test1.py'\n[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249] Location: None\n[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249] Directory: '/var/www/vhosts/mywebsite.com/httpdocs/'\n[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249] Filename: '/var/www/vhosts/mywebsite.com/httpdocs/test1.py'\n[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249] PathInfo: ''\n[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249] Traceback (most recent call last):\n[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249]   File \"/usr/lib/python2.6/dist-packages/mod_python/importer.py\", line 1537, in HandlerDispatch\\n    default=default_handler, arg=req, silent=hlist.silent)\n[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249]   File \"/usr/lib/python2.6/dist-packages/mod_python/importer.py\", line 1229, in _process_target\\n    result = _execute_target(config, req, object, arg)\n[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249]   File \"/usr/lib/python2.6/dist-packages/mod_python/importer.py\", line 1128, in _execute_target\\n    result = object(arg)\n[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249]   File \"/usr/lib/python2.6/dist-packages/mod_python/cgihandler.py\", line 96, in handler\\n    imp.load_module(module_name, fd, path, desc)\n[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249]   File \"/var/www/vhosts/mywebsite.com/httpdocs/test1.py\", line 1, in &lt;module&gt;\\n    import test2\n[Thu Jun 11 00:18:09 2015] [error] [client 85.65.174.249] ImportError: No module named test2\n</code></pre>\n\n<p><strong>In the last line, you can see that the server writes \"ImportError: No module named test2\"</strong></p>\n\n<p>How can I fix it?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 7, "creation_date": 1433970095, "post_id": 30767208, "comment_id": 49586571, "body": "that is a list not a string, <code>float([&#39;12.3098&#39;][0])</code>, if it was a string <code>float([&#39;12.3098&#39;][1:-1])</code>  or <code>float([&#39;12.3098&#39;]).strip(&quot;[]&quot;)</code>"}, {"owner": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "edited": false, "score": 0, "creation_date": 1433970127, "post_id": 30767208, "comment_id": 49586591, "body": "Is that actually the value of the string, or do you have a list? Show the code that generates this value and performs the printout."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 2, "creation_date": 1433970178, "post_id": 30767208, "comment_id": 49586622, "body": "You probably got this result by using <code>findall()</code>. It always returns a list of the results, even if there&#39;s only one."}], "answers": [{"comments": [{"owner": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "edited": false, "score": 0, "creation_date": 1433970237, "post_id": 30767244, "comment_id": 49586666, "body": "This is not necessarily true: <code>s = &quot;[&#39;12.3098&#39;]&quot;; print(s)</code>. (Though it is likely.)"}, {"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "reply_to_user": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "edited": false, "score": 0, "creation_date": 1433970580, "post_id": 30767244, "comment_id": 49586830, "body": "@JoshCaswell considering the OP is getting this result from a web request, its highly unlikely that that response would return a literal string with brackets and quotes inside... I guess its possible.. but I added a way to test if its actually a list first just incase"}], "tags": [], "owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "is_accepted": false, "score": 2, "last_activity_date": 1433970757, "last_edit_date": 1433970757, "creation_date": 1433970146, "answer_id": 30767244, "question_id": 30767208, "link": "https://stackoverflow.com/questions/30767208/getting-rid-of-square-brackets-on-either-side-of-a-string/30767244#30767244", "title": "Getting rid of square brackets on either side of a string", "body": "<p>you have a list which is not a string... so if you want to get that value out select it like so</p>\n\n<pre><code>float(result[0])\n</code></pre>\n\n<p>replace 'result' with whatever your object is, aka what you printed <code>['12.3098']</code></p>\n\n<p>try printing the type of your object <code>type(result)</code> and if its a list then this will fix your problem</p>\n\n<p>if the type is a string you can do a literal evaluation of it like this</p>\n\n<pre><code>import ast\nresult = ast.literal_eval(result)\nprint result[0]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4996705, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6c9cO-oe7O4/AAAAAAAAAAI/AAAAAAAAAPw/1_i4uFYNbFM/photo.jpg?sz=128", "display_name": "Deon Opperman", "link": "https://stackoverflow.com/users/4996705/deon-opperman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "closed_date": 1433991709, "answer_count": 1, "score": -5, "last_activity_date": 1433970757, "creation_date": 1433970029, "last_edit_date": 1433970066, "question_id": 30767208, "link": "https://stackoverflow.com/questions/30767208/getting-rid-of-square-brackets-on-either-side-of-a-string", "closed_reason": "Not suitable for this site", "title": "Getting rid of square brackets on either side of a string", "body": "<p>I am importing currency exchange rates from a website.  All is well, except python prints the required data as follows:</p>\n\n<pre><code>['12.3098']\n</code></pre>\n\n<p>which means I can't use the data that I scraped in any calculations in my program. How do I get rid of the square brackets so that I can convert the string inside the square brackets to a float?</p>\n"}, {"tags": ["python", "encoding", "exe", "splinter"], "answers": [{"comments": [{"owner": {"reputation": 2897, "user_id": 3757322, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/y0X9I.png?s=128&g=1", "display_name": "joshmcode", "link": "https://stackoverflow.com/users/3757322/joshmcode"}, "edited": false, "score": 2, "creation_date": 1540563346, "post_id": 42605056, "comment_id": 92924753, "body": "Might also occur when PYTHONHOME is not set"}], "tags": [], "owner": {"reputation": 179, "user_id": 7643002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Almw1.jpg?s=128&g=1", "display_name": "Ken Li", "link": "https://stackoverflow.com/users/7643002/ken-li"}, "is_accepted": false, "score": 3, "last_activity_date": 1488693644, "last_edit_date": 1495539987, "creation_date": 1488693644, "answer_id": 42605056, "question_id": 30767191, "link": "https://stackoverflow.com/questions/30767191/fatal-python-error-py-initialize-unable-to-load-the-file-system-codec-importe/42605056#42605056", "title": "Fatal Python error: Py_Initialize: unable to load the file system codec. ImportError: No module named &#39;encodings&#39;", "body": "<p>I have the same error when I install Anaconda with Python 3.6. The error is resolved by adding an environment variable \"PYTHONPATH\" which point to the installation location of Python. </p>\n\n<p>I refer to the following link,</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5694706/py-initialize-fails-unable-to-load-the-file-system-codec\">Py_Initialize fails - unable to load the file system codec</a></p>\n\n<p><a href=\"/questions/tagged/anaconda\" class=\"post-tag\" title=\"show questions tagged &#39;anaconda&#39;\" rel=\"tag\">anaconda</a><a href=\"/questions/tagged/python\" class=\"post-tag\" title=\"show questions tagged &#39;python&#39;\" rel=\"tag\">python</a></p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 9087851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dddf853b4e5e42b8ac953e54654868f?s=128&d=identicon&r=PG&f=1", "display_name": "Pradeep Vasamsetty", "link": "https://stackoverflow.com/users/9087851/pradeep-vasamsetty"}, "is_accepted": false, "score": 5, "last_activity_date": 1592282367, "last_edit_date": 1592282367, "creation_date": 1561709809, "answer_id": 56803287, "question_id": 30767191, "link": "https://stackoverflow.com/questions/30767191/fatal-python-error-py-initialize-unable-to-load-the-file-system-codec-importe/56803287#56803287", "title": "Fatal Python error: Py_Initialize: unable to load the file system codec. ImportError: No module named &#39;encodings&#39;", "body": "<p>Setup: <strong>MAC OSX ANACONDA</strong></p>\n\n<p>It happens when there are multiple versions of python installed or partially deleted environments are present i.e just removing the packages/installations, not the path variables.</p>\n\n<p>Things to check upfront:</p>\n\n<pre><code>echo $PYTHONHOME\necho $PYTHONPATH\n</code></pre>\n\n<p>If not, set the environment variables by updating your <code>.bashrc</code> or <code>.bash_profile</code> using</p>\n\n<pre><code>export PYTHONHOME=\"/Users/&lt;user&gt;/anaconda3/\"\nexport PYTHONPATH=\"${PYTHONHOME}/bin\"\n</code></pre>\n\n<p>To set these varuiables in your current shell, run <code>source .bashrc</code>.</p>\n\n<p>If this doesn't solve your problem then, search for folders with the name \"encodings\" listed in your machine.</p>\n\n<p><code>find / -type d -name \"encodings\"</code> which prints a list of directories having a folder named \"encodings\".</p>\n\n<p>Remove all directories not pointing to your python in use.</p>\n\n<pre><code>rm -rf &lt;directory&gt;\n</code></pre>\n"}], "owner": {"reputation": 88, "user_id": 4577471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e7dbc67fd22174af49a82bde1f5032b?s=128&d=identicon&r=PG", "display_name": "Kusnierewicz", "link": "https://stackoverflow.com/users/4577471/kusnierewicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29021, "favorite_count": 3, "answer_count": 2, "score": 7, "last_activity_date": 1592282367, "creation_date": 1433969979, "question_id": 30767191, "link": "https://stackoverflow.com/questions/30767191/fatal-python-error-py-initialize-unable-to-load-the-file-system-codec-importe", "title": "Fatal Python error: Py_Initialize: unable to load the file system codec. ImportError: No module named &#39;encodings&#39;", "body": "<p>I am trying to make simple python program that is opening list of webpages for a user to manually download reports from the site. I don't have any previous experience with preparing exe files.. And I'm just in learning process for python coding. All of this is done on Windows 7 x64</p>\n\n<p>This is my python code:</p>\n\n<pre><code>#!C:/Python34/python.exe -u\n\nfrom splinter import *\nimport time\nimport os\nimport csv\n\n#----------------------------------\nraporty = []\nwith open('../raporty.csv', newline='') as csvfile:\n    contents = csv.reader(csvfile, delimiter=' ', quotechar='|')\n    for row in contents:\n        r = ', '.join(row)\n        r = r.replace(',','')\n        raporty.append(r)\n\n#--not implemented yet\nzmienne = []\nwith open('../zmienne.csv', newline='') as csvfile:\n    contents = csv.reader(csvfile, delimiter=' ', quotechar='|')\n    for row in contents:\n        r = ', '.join(row)\n        r = r.replace(',','')\n        zmienne.append(r)\n\nprint(\"start\")\nbrowser = Browser()\n\n#----------------LOGIN------------------\nbrowser.visit('https://xxxx')\nprint(browser.title)\nif browser.title == \"xxxxxxxxxxxx\":\n    element = browser.find_by_name('login').first\n    element.value = \"xxxx\"\n    element2 = browser.find_by_name('password').first\n    element2.value = \"xxxx\"\n    browser.find_by_value('sign in').click()\n\ntime.sleep(5)\n\n#----------------------------------\nj = 1\nfor i in raporty:\n    webpage = 'webpage_link'\n    print(\"text\" + i)\n    browser.visit(webpage)\n    j += 1\n\n    if j &gt; 15:\n        time.sleep(j)\n    else:\n        time.sleep(12)\n</code></pre>\n\n<p>My setup.py file looks like this:</p>\n\n<pre><code>from distutils.core import setup\nimport py2exe\n\nsetup(\n    console=['Final.py'],\n    options={\n            \"py2exe\":{\n                    \"skip_archive\": True,\n                    \"unbuffered\": True,\n                    \"optimize\": 2,\n                    \"packages\": [\"encodings\", \"splinter\"]\n            }\n    },\n)\n</code></pre>\n\n<p>First issue I had to resolved was a missing files (webdriver.xpi and webdriver_prefs.json) from selenium package, but I've successfully included them in to library.rar file after compilation by hand. Unfortunately right know after running my file I get message:</p>\n\n<pre><code>Fatal Python error: Py_Initialize: unable to load the file system codec\nImportError: No module named 'encodings'\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1433970094, "post_id": 30767181, "comment_id": 49586570, "body": "<code>re.findall(&#39;\\w+|[{0}]+|_+&#39;.format(punctuation), string)</code>"}, {"owner": {"reputation": 2005, "user_id": 3689314, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de01a0264b9b4e2b932cd084fa53a9f7?s=128&d=identicon&r=PG&f=1", "display_name": "mt88", "link": "https://stackoverflow.com/users/3689314/mt88"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1433970280, "post_id": 30767181, "comment_id": 49586690, "body": "^ The above still gives me the same problem: _Mark"}], "answers": [{"tags": [], "owner": {"reputation": 2550, "user_id": 4931993, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HIOGhudLQzQ/AAAAAAAAAAI/AAAAAAAAAG8/RhqG4yB0Ky0/photo.jpg?sz=128", "display_name": "Eric Appelt", "link": "https://stackoverflow.com/users/4931993/eric-appelt"}, "is_accepted": false, "score": 3, "last_activity_date": 1433970135, "creation_date": 1433970135, "answer_id": 30767242, "question_id": 30767181, "link": "https://stackoverflow.com/questions/30767181/python-regex-splitting-additionally-on/30767242#30767242", "title": "Python regex splitting additionally on _", "body": "<p>Since <code>\\w</code> will match the underscore, you can more directly specify what you consider a character without too much more work:</p>\n\n<pre><code> re.findall('[a-zA-Z0-9]+|[{0}]+'.format(punctuation), string)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": false, "score": 0, "last_activity_date": 1433971009, "creation_date": 1433971009, "answer_id": 30767472, "question_id": 30767181, "link": "https://stackoverflow.com/questions/30767181/python-regex-splitting-additionally-on/30767472#30767472", "title": "Python regex splitting additionally on _", "body": "<p>Because the left side of a disjunction will always match first if possible, you can simply include <code>_</code> with the punctuation characters <em>before</em> you match letters:</p>\n\n<pre><code>row = re.findall(r'[{0}_]+|\\w+'.format(string.punctuation), mystring)\n</code></pre>\n\n<p>But you can do the same without bothering with <code>string.punctuation</code> at all. \"Punctuation\" is anything that's neither a space nor a word character:</p>\n\n<pre><code>row = re.findall(r\"(?:[^\\s\\w]|_)+|\\w+\", mystring)\n</code></pre>\n\n<p>PS. In your code sample, the string named <code>string</code> \"shadows\" the module <code>string</code>. Don't do that, it's bad practice and leads to bugs.</p>\n"}, {"tags": [], "owner": {"reputation": 9677, "user_id": 4244780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KUXr1.jpg?s=128&g=1", "display_name": "Iron Fist", "link": "https://stackoverflow.com/users/4244780/iron-fist"}, "is_accepted": false, "score": 0, "last_activity_date": 1433971094, "creation_date": 1433971094, "answer_id": 30767490, "question_id": 30767181, "link": "https://stackoverflow.com/questions/30767181/python-regex-splitting-additionally-on/30767490#30767490", "title": "Python regex splitting additionally on _", "body": "<p>It is clearly stated in <a href=\"https://docs.python.org/2/library/re.html?highlight=re#module-re\" rel=\"nofollow\">Python docs</a> that <code>\\w</code> not only include alphanumerical characters but also the underscore as well:</p>\n\n<blockquote>\n  <p>\\w</p>\n  \n  <p>When the LOCALE and UNICODE flags are not specified, matches any\n  alphanumeric character and the underscore; this is equivalent to the\n  set [a-zA-Z0-9_]. With LOCALE, it will match the set [0-9_] plus\n  whatever characters are defined as alphanumeric for the current\n  locale. If UNICODE is set, this will match the characters [0-9_] plus\n  whatever is classified as alphanumeric in the Unicode character\n  properties database.</p>\n</blockquote>\n\n<p>so like Eric pointed out in his solution, better specify a set of only alphanumerical characters <code>[a-zA-Z0-9]</code></p>\n"}], "owner": {"reputation": 2005, "user_id": 3689314, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de01a0264b9b4e2b932cd084fa53a9f7?s=128&d=identicon&r=PG&f=1", "display_name": "mt88", "link": "https://stackoverflow.com/users/3689314/mt88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1433971094, "creation_date": 1433969934, "question_id": 30767181, "link": "https://stackoverflow.com/questions/30767181/python-regex-splitting-additionally-on", "title": "Python regex splitting additionally on _", "body": "<p>I'm trying to split a string in python using regular expressions. This line works almost perfectly for me:</p>\n\n<pre><code>from string import punctuation\nimport re\nrow = re.findall('\\w+|[{0}]+'.format(punctuation), string)\n</code></pre>\n\n<p>However, it doesn't split the string on instances of _ as well. For instance:</p>\n\n<pre><code>&gt;&gt;&gt; string = \"Hi my name is _Mark. I like apples!! Do you?!\"\n&gt;&gt;&gt; row = re.findall('\\w+|[{0}]+'.format(punctuation), string)\n&gt;&gt;&gt; row\n['Hi', 'my', 'name', 'is', '_Mark', '.', 'I', 'like', 'apples', '!!', 'Do', 'you', '?!']\n</code></pre>\n\n<p>What i want is:</p>\n\n<pre><code>['Hi', 'my', 'name', 'is', '_', 'Mark', '.', 'I', 'like', 'apples', '!!', 'Do', 'you', '?!']\n</code></pre>\n\n<p>I've read its because _ is considered a character. Does anyone know how to accomplish this? Thanks for the help.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 5, "creation_date": 1433970080, "post_id": 30767168, "comment_id": 49586565, "body": "I strongly recommend you <i>don&#39;t</i> combine regexps. Your code is a lot easier to maintain than one monster &quot;clever&quot; regexp."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1433971495, "post_id": 30767168, "comment_id": 49587304, "body": "But if you show an example of what your input looks like and what you want to get out of it, you&#39;ll probably get some good suggestions. E.g., your <code>firstMatch</code>/<code>nextMatch</code> code looks awkward, but there&#39;s no telling where they come from or how to formulate a better suggestion."}, {"owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "reply_to_user": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1433971932, "post_id": 30767168, "comment_id": 49587540, "body": "@alexis fair point. Post updated with an example string."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1433972045, "post_id": 30767168, "comment_id": 49587587, "body": "You want the first non-private IP address, and if there are none, then the first private?"}, {"owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "reply_to_user": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1433972171, "post_id": 30767168, "comment_id": 49587655, "body": "@alexis Correct (noting that the first private will generally precede the first non-private in the string). And in the absence of both, the mail server (if present)."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1433972279, "post_id": 30767168, "comment_id": 49587702, "body": "And by &quot;mail server&quot; you mean the fully qualified name that follows the word &quot;by&quot;?"}, {"owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "reply_to_user": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1433972438, "post_id": 30767168, "comment_id": 49587774, "body": "@alexis that&#39;s right. My regex for the mail server is a little flimsy, but yes."}], "answers": [{"comments": [{"owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "edited": false, "score": 0, "creation_date": 1433973564, "post_id": 30767811, "comment_id": 49588250, "body": "Thanks. Thing is though: I have a regex for ALL IPv4 address, and a regex for privates (privates are a subset, defined by the range I&#39;ve now added in my post). So I don&#39;t have a RE_NON_PRIVATE regex as such, and I imagine that  to create one would be tough. With a regex for all and a regex for privates, what can we do?"}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "reply_to_user": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "edited": false, "score": 1, "creation_date": 1433974427, "post_id": 30767811, "comment_id": 49588566, "body": "No prob, then you collect all IPv4 addresses, and make a sublist of the non-private ones (if any). See revised answer. Filtering lists in this way is a good technique to have. (You can also use <code>filter</code>, but I prefer conditional list comprehensions.)"}, {"owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "edited": false, "score": 0, "creation_date": 1434004330, "post_id": 30767811, "comment_id": 49597249, "body": "The non-intuitive reversing of the conditionals is a stroke of genius. Thank you."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "reply_to_user": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "edited": false, "score": 0, "creation_date": 1434018745, "post_id": 30767811, "comment_id": 49606695, "body": "Thanks, it&#39;s a common pattern though: Find the general case, then subtract the special case and you have the rest. It&#39;s often useful to do first the specific, then the general."}], "tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": true, "score": 1, "last_activity_date": 1433974352, "last_edit_date": 1433974352, "creation_date": 1433972484, "answer_id": 30767811, "question_id": 30767168, "link": "https://stackoverflow.com/questions/30767168/regex-how-best-to-combine-regexs-with-conditionals-in-python/30767811#30767811", "title": "Regex: How best to combine regex&#39;s with conditionals (in Python)?", "body": "<p>If you can distinguish the classes that you are interested in, just search for them in order:</p>\n\n<pre><code>ip_addr = re.findall(RE_ADDRESSES, response)\nnon_private = [ x for x in ip_addr if not re.match(RE_PRIVATE, x) ]\nif non_private:\n    return non_private[0]\n# They're all private: return first one\nelif ip_addr:\n    return ip_addr[0]\n\nmailserver = re.findall(...)[0]\nreturn mailserver\n</code></pre>\n\n<p>Note that since <code>return</code> terminates execution, I didn't use <code>else</code> clauses-- this keeps the code from nesting too deeply. You can add them if you prefer.</p>\n"}], "owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 30767811, "answer_count": 1, "score": 0, "last_activity_date": 1433974352, "creation_date": 1433969848, "last_edit_date": 1433972939, "question_id": 30767168, "link": "https://stackoverflow.com/questions/30767168/regex-how-best-to-combine-regexs-with-conditionals-in-python", "title": "Regex: How best to combine regex&#39;s with conditionals (in Python)?", "body": "<p>I already have the regex's (and some behaviour based around each of them, individually, using Python's <code>re.findall()</code> and <code>re.search()</code> for IPv4 address, IPv6 addresses, mail server name, and private IP address. A private IP is one that falls in the following range:</p>\n\n<pre><code>10.0.0.0 - 10.255.255.255\n172.16.0.0 - 172.31.255.255\n192.168.0.0 - 192.168.255.255\n</code></pre>\n\n<p>The regex;'s:</p>\n\n<pre><code>#Mail server ([a-zA-Z0-9-]+\\.){2,3}[a-zA-Z]+ \n#Private IP (?:10|127|169|172\\.(?:1[6-9]|2[0-9]|3[01])|192\\.168|169\\.254)\\..*\n#IPv4       \\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\n#IPv6       ([a-z0-9]{1,4}:+){3,5}[a-z0-9]{1,4}\n</code></pre>\n\n<p>Now I need to add some flow control. Given that with regex's we can match globally, non-greedy etc, combine patterns etc. I'd prefer to take advantage of this fact (combining regex's into a single Python expression) rather than perform each individually with multiple if/else's. Here's a typical string:</p>\n\n<pre><code>Received: from [192.168.0.140] (n11649196059.netvigator.com. [116.49.196.59])\n        by mx.google.com with ESMTPSA id w12sm4743917pbs.68.2015.06.04.16.21.51\n        for &lt;someaddress@gmail.com&gt;\n        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);\n        Thu, 04 Jun 2015 16:21:52 -0700 (PDT)\n</code></pre>\n\n<p>Here's the pseudocode for what I'm trying to do, for each string like the above:</p>\n\n<pre><code>if any IPv4 or IPv6 address matches:\n    if firstMatch is not private: # Private meaning matches \"Private IP\" regex above\n        return firstMatch\n    else:\n         #continue through string to look for another IP address\n         if found nextMatch: \n            if nextMatch is not private:\n             return nextMatch\n            #else continue through string to look for another IP address, \n            #again checking for privacy. If none found, just return firstMatch\n    return firstMatch\n\n# no valid IP address found, look for mail server now    \nelse:\n    if matchedAmailServer:\n        return mailServer\n</code></pre>\n\n<p>In the example string above, 192.168.0.140 is private, so I'll proceed through the string until I find the next IP address. This next address is - 116.49.196.59 - is not private, so that's what I return. If, on the other hand, there were no second IP address in the string, I would want to return mx.google.com</p>\n\n<p>How best to intelligently use Python's <code>re</code> functions here, with a view to maximizing regex capability and minimizing the number of if/else's?</p>\n"}, {"tags": ["python", "scipy", "linear-programming"], "comments": [{"owner": {"reputation": 4913, "user_id": 2280567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LA8CO.jpg?s=128&g=1", "display_name": "Ioannis", "link": "https://stackoverflow.com/users/2280567/ioannis"}, "edited": false, "score": 3, "creation_date": 1433970217, "post_id": 30767147, "comment_id": 49586656, "body": "you can always multiply the corresponding left hand side coefficients and the right hand side term by -1 and convert them to the format for which scipy.optimize.linprog is designed to work. I do not think there is any workaround with this, other than essentially wrapping this operations in a nicer way.."}, {"owner": {"reputation": 988, "user_id": 4255034, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/VSSfU.jpg?s=128&g=1", "display_name": "Ladmerc", "link": "https://stackoverflow.com/users/4255034/ladmerc"}, "reply_to_user": {"reputation": 4913, "user_id": 2280567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LA8CO.jpg?s=128&g=1", "display_name": "Ioannis", "link": "https://stackoverflow.com/users/2280567/ioannis"}, "edited": false, "score": 0, "creation_date": 1433971882, "post_id": 30767147, "comment_id": 49587518, "body": "If I multiply the RHS by -1, it would mean a negative value of for a basic variable in the tableau, which is not possible if the variables are restricted to non-negativity."}, {"owner": {"reputation": 4913, "user_id": 2280567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LA8CO.jpg?s=128&g=1", "display_name": "Ioannis", "link": "https://stackoverflow.com/users/2280567/ioannis"}, "edited": false, "score": 0, "creation_date": 1433972113, "post_id": 30767147, "comment_id": 49587623, "body": "If you multiply both the LHS and RHS by -1 that would result in an equivalent representation of the original inequality, without violating any of the non-negativity constraints (assuming a feasible solution exists)."}, {"owner": {"reputation": 988, "user_id": 4255034, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/VSSfU.jpg?s=128&g=1", "display_name": "Ladmerc", "link": "https://stackoverflow.com/users/4255034/ladmerc"}, "reply_to_user": {"reputation": 4913, "user_id": 2280567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LA8CO.jpg?s=128&g=1", "display_name": "Ioannis", "link": "https://stackoverflow.com/users/2280567/ioannis"}, "edited": false, "score": 0, "creation_date": 1433972216, "post_id": 30767147, "comment_id": 49587678, "body": "Oh, I get you now. I will try it and get back to you. In which case, I&#39;ll suggest you post the comment as an answer"}, {"owner": {"reputation": 988, "user_id": 4255034, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/VSSfU.jpg?s=128&g=1", "display_name": "Ladmerc", "link": "https://stackoverflow.com/users/4255034/ladmerc"}, "reply_to_user": {"reputation": 4913, "user_id": 2280567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LA8CO.jpg?s=128&g=1", "display_name": "Ioannis", "link": "https://stackoverflow.com/users/2280567/ioannis"}, "edited": false, "score": 0, "creation_date": 1434039747, "post_id": 30767147, "comment_id": 49622364, "body": "Thanks loannis, it worked. You should put your comment as an answer so it can help someone sometime. Plus, you get your votes"}], "answers": [{"comments": [{"owner": {"reputation": 988, "user_id": 4255034, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/VSSfU.jpg?s=128&g=1", "display_name": "Ladmerc", "link": "https://stackoverflow.com/users/4255034/ladmerc"}, "edited": false, "score": 0, "creation_date": 1434099352, "post_id": 30788703, "comment_id": 49646801, "body": "Thanks. There is no feasible solution because I made those inequalities up."}], "tags": [], "owner": {"reputation": 4913, "user_id": 2280567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LA8CO.jpg?s=128&g=1", "display_name": "Ioannis", "link": "https://stackoverflow.com/users/2280567/ioannis"}, "is_accepted": true, "score": 3, "last_activity_date": 1434048856, "last_edit_date": 1434048856, "creation_date": 1434047430, "answer_id": 30788703, "question_id": 30767147, "link": "https://stackoverflow.com/questions/30767147/specifying-greater-than-inequality-in-scipy/30788703#30788703", "title": "Specifying greater than inequality in scipy", "body": "<p>Here is a wrapper that incorporates lower bound rows in the lingprog formulation. Note that more error trapping is necessary (for example, the number of columns of each <code>A</code> matrix need to be equal), this is not meant to be a robust implementation. For proper error trapping, I suggest you skim through the linprog <a href=\"https://github.com/scipy/scipy/blob/master/scipy/optimize/_linprog.py\" rel=\"nofollow\">source code</a>.</p>\n\n<pre><code>from scipy.optimize import linprog\nimport numpy as np\n\ndef linprog_lb_wrapper(c, A_ub=None, b_ub=None, A_lb=None, b_lb=None, A_eq=None, b_eq=None, \\\n    bounds=None, method='simplex', callback=None, options=None):\n\n    if A_lb is None:\n        res = linprog(c, A_ub, b_ub, A_eq, b_eq, bounds, method, callback, options)\n        return res\n    elif (b_lb is None) or (len(b_lb) != len(A_lb)):\n        # catch the error here\n        print('Error')\n\n    A_ub_new, b_ub_new = np.array(A_ub), np.array(b_ub)\n    A_lb_new, b_lb_new = np.array(A_lb), np.array(b_lb)\n    A_lb_new *= -1.\n    b_lb_new *= -1.\n    A_ub_new = np.vstack((A_ub_new, A_lb_new))\n    b_ub_new = np.vstack((b_ub_new, b_lb_new))\n\n    res = linprog(c=c, A_ub=A_ub_new, b_ub=b_ub_new, A_eq=A_eq, b_eq=b_eq, bounds=bounds, \\ \n        method=method, callback=callback, options=options)\n\n    return res\n\ndef test():\n    c = [0, 0, 0]\n    A_ub = [[4, 6, 7], [56, 3, 27]]\n    b_ub = [40, 6450]\n    A_lb = [[7, 4, 9], [17, 9, 2.5]]\n    b_lb = [750, 3540]\n    bounds = ((None, None), (None, None), (None, None))\n\n    res = linprog_lb_wrapper(c=c, A_ub=A_ub, b_ub=b_ub, A_lb=A_lb, b_lb=b_lb, bounds=bounds)\n    print(res)\n\ntest()\n</code></pre>\n\n<p>Note that for the instance that you presented, there is no feasible solution (I checked this with another solver as well and got an infeasibility proof).</p>\n\n<p>I hope this helps.</p>\n\n<p>This code can be tested <a href=\"https://www.getdatajoy.com/project/5579ca2e1a5bdac675937502\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 880, "user_id": 1695962, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sOCzR.png?s=128&g=1", "display_name": "Cosmo Harrigan", "link": "https://stackoverflow.com/users/1695962/cosmo-harrigan"}, "is_accepted": false, "score": 1, "last_activity_date": 1444398693, "creation_date": 1444398693, "answer_id": 33040034, "question_id": 30767147, "link": "https://stackoverflow.com/questions/30767147/specifying-greater-than-inequality-in-scipy/33040034#33040034", "title": "Specifying greater than inequality in scipy", "body": "<p>To express a \"greater than or equal to\" constraint in <strong>scipy.optimize.linprog</strong>, you can multiply each side of the constraint by -1 to convert the constraint into the expected format of \"less than or equal to\". </p>\n\n<p>For instance, in the example provided, the constraint matrix with mixed inequalities would have been</p>\n\n<pre><code>A = [[7, 4, 9], [4, 6, 7], [17, 9, 2.5], [56, 3, 27]]\n</code></pre>\n\n<p>with right-hand side</p>\n\n<pre><code>b = [750, 40, 3540, 6450]\n</code></pre>\n\n<p>and we want to express the constraints as <strong>Ax &lt;= b</strong>. So, in order to flip the necessary inequalities, the constraint matrix becomes</p>\n\n<pre><code>A = [[-7, -4, -9], [4, 6, 7], [-17, -9, -2.5], [56, 3, 27]]\n</code></pre>\n\n<p>and the right-hand side becomes</p>\n\n<pre><code>b = [-750, 40, -3540, 6450]\n</code></pre>\n\n<p>Then we can pass the arguments <strong>A_ub=A</strong> and <strong>b_ub=b</strong> to <strong>linprog</strong>.</p>\n"}], "owner": {"reputation": 988, "user_id": 4255034, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/VSSfU.jpg?s=128&g=1", "display_name": "Ladmerc", "link": "https://stackoverflow.com/users/4255034/ladmerc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2221, "favorite_count": 2, "accepted_answer_id": 30788703, "answer_count": 2, "score": 3, "last_activity_date": 1444398693, "creation_date": 1433969782, "question_id": 30767147, "link": "https://stackoverflow.com/questions/30767147/specifying-greater-than-inequality-in-scipy", "title": "Specifying greater than inequality in scipy", "body": "<p>I've solved a simple LP problem where all constraints are \"less than or equal to\". </p>\n\n<p>I used scipy.optimize.linprog for those.</p>\n\n<p>The problem is when one or more of the constraints equation is \"greater than or equal to\". How do I specify that? I need to use the two-phase approach provided by scipy.optimize.linprog</p>\n\n<p>An example of such is:</p>\n\n<pre>\n\n    7X1 + 4X2 + 9X3 \u2265 750                                                                              \n    4X1 + 6X2 + 7X3 \u2264 40\n    17X1 + 9X2 + 2.5X3 \u2265 3540                                                                              \n    56X1 + 3X2 + 27X3 \u2264 6450\n\n\n</pre>\n"}, {"tags": ["python", "json", "object", "dictionary"], "comments": [{"owner": {"reputation": 17851, "user_id": 28875, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cf13ca370e0d7b84b4a20912abe076a4?s=128&d=identicon&r=PG", "display_name": "Kylotan", "link": "https://stackoverflow.com/users/28875/kylotan"}, "edited": false, "score": 3, "creation_date": 1433969794, "post_id": 30767108, "comment_id": 49586397, "body": "Looks at a glance like you&#39;re confusing Python for Javascript: a dict with a key &#39;threads&#39; is not an object you can reference with <code>.threads</code>, only with <code>[&quot;threads&quot;]</code>. ie. <code>user.threads</code> should be <code>user[&quot;threads&quot;]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 17851, "user_id": 28875, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cf13ca370e0d7b84b4a20912abe076a4?s=128&d=identicon&r=PG", "display_name": "Kylotan", "link": "https://stackoverflow.com/users/28875/kylotan"}, "is_accepted": true, "score": 1, "last_activity_date": 1433970397, "last_edit_date": 1433970397, "creation_date": 1433970053, "answer_id": 30767214, "question_id": 30767108, "link": "https://stackoverflow.com/questions/30767108/why-cant-i-call-dict-on-object-in-list-that-happens-to-be-within-another-ob/30767214#30767214", "title": "Why can&#39;t I call __dict__ on object in list that happens to be within another object within a list within a dictionary?", "body": "<p>Promoting my comment to an answer since it seems reasonable and nobody else is posting: it looks at a glance like you're confusing Python for Javascript: a dict with a key 'threads' is not an object you can reference with <code>.threads</code>, only with <code>[\"threads\"]</code>. ie. <code>user.threads</code> should be <code>user[\"threads\"]</code>. A dict usually only has the same standard attributes (see: <a href=\"https://docs.python.org/2/library/stdtypes.html#typesmapping\" rel=\"nofollow\">https://docs.python.org/2/library/stdtypes.html#typesmapping</a> or <a href=\"https://docs.python.org/3/library/stdtypes.html#mapping-types-dict\" rel=\"nofollow\">https://docs.python.org/3/library/stdtypes.html#mapping-types-dict</a> for Python 3.) The problem isn't that you're trying to call <code>__dict__</code> on an object, it's that you're trying to get an attribute from an object that doesn't exist, later in that same line of code.</p>\n\n<p>If you want to recreate complex objects from MongoDB rather than just nested dicts and lists then that is basically a process of deserialization; you can either handle that manually, or maybe use some sort of object mapping library to do it for you (eg. something like <a href=\"https://github.com/binarydud/mongoobject\" rel=\"nofollow\">Mongoobject</a> might work, though I've not tested it myself)</p>\n"}], "owner": {"reputation": 3575, "user_id": 4678042, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R0bWq.jpg?s=128&g=1", "display_name": "sunny", "link": "https://stackoverflow.com/users/4678042/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 30767214, "answer_count": 1, "score": -1, "last_activity_date": 1433973632, "creation_date": 1433969623, "last_edit_date": 1433973632, "question_id": 30767108, "link": "https://stackoverflow.com/questions/30767108/why-cant-i-call-dict-on-object-in-list-that-happens-to-be-within-another-ob", "title": "Why can&#39;t I call __dict__ on object in list that happens to be within another object within a list within a dictionary?", "body": "<p>Here's my setup: <code>dictD</code> contains a key <code>users</code> paired with value = <code>list of UserObjects</code>. Each <code>UserObject</code> has an attribute username plus two arrays, threads and comments.</p>\n\n<p>I was able to convert dictD's array of user objects into a dictionary style with this call:</p>\n\n<p><code>dictD[\"users\"] = [user.__dict__ for user in dictD[\"users\"]</code>]</p>\n\n<p>If I dump out dictD, here's the relevant part before I try to do my manipulation:</p>\n\n<pre><code>{\n    'users':[\n    {\n        'username': Redditor(user_name='$$$$$$$$$$'),\n        'threads':[\n            &lt;__main__.redditThread instance at 0x7f05db28b320&gt;\n        ],\n    'comments':[\n        &lt;__main__.comment instance at 0x7f05db278e60&gt;\n    ]\n},\n{\n    'username': Redditor(user_name='##########e\\ gone'),\n    'threads':[\n        &lt;__main__.redditThread instance at 0x7f05db2a4a70&gt;\n    ],\n    'comments':[\n        &lt;__main__.comment instance at 0x7f05db298e18&gt;\n    ]\n}\n</code></pre>\n\n<p>As you can see the comments contain <code>comment</code> objects and the threads list contains <code>thread</code> objects. So I'd like to do the same call for them that I did for the <code>users</code> array. But when I try to do this:</p>\n\n<pre><code>for user in dictD[\"users\"]:\n    user.threads = [thread.__dict__ for thread in user.threads]\n    user.comments = [comment.__dict__ for comment in user.comments]\n</code></pre>\n\n<p>I run into this error:</p>\n\n<p><code>AttributeError: 'dict' object has no attribute 'threads'</code></p>\n\n<p>I also tried </p>\n\n<pre><code>users = dictD[\"users\"]\nfor user in users...\n</code></pre>\n\n<p>but this triggers the same error message. How can I turn objects in lists into dictionary form when those objects' lists are themselves held within objects within lists within a dictionary?</p>\n\n<p>Incidentally, I am doing all this so I can insert these objects into MongoDB, so if there is an easier way to serialize a complex object, please let me into the secret. Thank you.</p>\n"}, {"tags": ["python", "elasticsearch"], "comments": [{"owner": {"reputation": 23604, "user_id": 1043198, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fd794fa557e412eefe8aa19251412df8?s=128&d=identicon&r=PG", "display_name": "Ant P", "link": "https://stackoverflow.com/users/1043198/ant-p"}, "edited": false, "score": 6, "creation_date": 1433970022, "post_id": 30767089, "comment_id": 49586525, "body": "Problem is that ElasticSearch has no <code>decimal</code> type so it is probably being converted to a <code>float</code>. Multiply by 100 and store as cents, then convert application-side? Bye bye precision issues."}, {"owner": {"reputation": 113, "user_id": 3684414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bb94236c56252809ccbb8fcf87a309?s=128&d=identicon&r=PG&f=1", "display_name": "stincity", "link": "https://stackoverflow.com/users/3684414/stincity"}, "reply_to_user": {"reputation": 23604, "user_id": 1043198, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fd794fa557e412eefe8aa19251412df8?s=128&d=identicon&r=PG", "display_name": "Ant P", "link": "https://stackoverflow.com/users/1043198/ant-p"}, "edited": false, "score": 0, "creation_date": 1433971068, "post_id": 30767089, "comment_id": 49587075, "body": "That&#39;s a great idea.  If you answer, I could mark it as such.  The only issue is returning a lot of data, looping over all those items could be expensive (slow) application side.  I could use a ES script but that&#39;s slow too I thought."}, {"owner": {"reputation": 163519, "user_id": 4604579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/reC2t.jpg?s=128&g=1", "display_name": "Val", "link": "https://stackoverflow.com/users/4604579/val"}, "edited": false, "score": 1, "creation_date": 1434002715, "post_id": 30767089, "comment_id": 49596483, "body": "You might also want to have a look at the first answer of this question <a href=\"http://stackoverflow.com/questions/1458633/how-to-deal-with-floating-point-number-precision-in-javascript\" title=\"how to deal with floating point number precision in javascript\">stackoverflow.com/questions/1458633/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 23604, "user_id": 1043198, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fd794fa557e412eefe8aa19251412df8?s=128&d=identicon&r=PG", "display_name": "Ant P", "link": "https://stackoverflow.com/users/1043198/ant-p"}, "is_accepted": true, "score": 10, "last_activity_date": 1434145934, "creation_date": 1434145934, "answer_id": 30812698, "question_id": 30767089, "link": "https://stackoverflow.com/questions/30767089/how-to-store-money-in-elasticsearch/30812698#30812698", "title": "How to store money in elasticsearch", "body": "<p>This occurs because ElasticSearch has no built-in type for decimals or currency, so your value is likely being converted to a <code>float</code> and suffering from floating point precision issues.</p>\n\n<p>You should be able to get around this by simply storing the value as a <code>long</code> (e.g. the number of cents rather than dollars) and converting to and from your <code>decimal</code> application-side.</p>\n\n<p>Since you'll only ever do this conversion for values you are already enumerating, the performance impact should be negligible.</p>\n"}, {"comments": [{"owner": {"reputation": 1213, "user_id": 5664033, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/965444bb2b99f96cd3e3ace4181fa27c?s=128&d=identicon&r=PG", "display_name": "Bala Karthik", "link": "https://stackoverflow.com/users/5664033/bala-karthik"}, "edited": false, "score": 1, "creation_date": 1553582530, "post_id": 40767599, "comment_id": 97426201, "body": "how what is the syntax to add the data for a scaled_float data type. I am getting the error ` {     &quot;error&quot;: {         &quot;root_cause&quot;: [             {                 &quot;type&quot;: &quot;mapper_parsing_exception&quot;,                 &quot;reason&quot;: &quot;failed to parse&quot;             }         ],         &quot;type&quot;: &quot;mapper_parsing_exception&quot;,         &quot;reason&quot;: &quot;failed to parse&quot;,         &quot;caused_by&quot;: {             &quot;type&quot;: &quot;illegal_argument_exception&quot;,             &quot;reason&quot;: &quot;Field [val] misses required parameter [scaling_factor]&quot;         }     },     &quot;status&quot;: 400 } `"}, {"owner": {"reputation": 3559, "user_id": 67015, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a2d545401ec9c459e763f88e516d5d04?s=128&d=identicon&r=PG", "display_name": "lostiniceland", "link": "https://stackoverflow.com/users/67015/lostiniceland"}, "edited": false, "score": 0, "creation_date": 1560251229, "post_id": 40767599, "comment_id": 99666229, "body": "Had the same problem: the mapping correlates to a specific type (like &quot;my_type&quot;) in the sample above. When using the High-Level-Rest-Client, it always creates the mappings under the new default &quot;_doc&quot; type. When inserting data using another type you get the error. After changing the insert to the _doc type the error was gone"}, {"owner": {"reputation": 842, "user_id": 305327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GVXf7.jpg?s=128&g=1", "display_name": "dgt", "link": "https://stackoverflow.com/users/305327/dgt"}, "edited": false, "score": 0, "creation_date": 1561041294, "post_id": 40767599, "comment_id": 99942136, "body": "there are precision issues related to scaled_float type so it should not be used for finance fields/attributes <a href=\"https://github.com/elastic/elasticsearch/issues/32570\" rel=\"nofollow noreferrer\">github.com/elastic/elasticsearch/issues/32570</a>"}, {"owner": {"reputation": 865, "user_id": 1058558, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/26cb9c0fcaf02a67f073e5dc0b239ad3?s=128&d=identicon&r=PG", "display_name": "jon_wu", "link": "https://stackoverflow.com/users/1058558/jon-wu"}, "reply_to_user": {"reputation": 842, "user_id": 305327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GVXf7.jpg?s=128&g=1", "display_name": "dgt", "link": "https://stackoverflow.com/users/305327/dgt"}, "edited": false, "score": 1, "creation_date": 1597192297, "post_id": 40767599, "comment_id": 112051664, "body": "@dgt it looks like the precision issues were fixed in 7.0 around Jan 2019 from that issue you linked to"}], "tags": [], "owner": {"reputation": 397, "user_id": 1932632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3347d1e9a33c22998492a18f3deb58b3?s=128&d=identicon&r=PG", "display_name": "The_Ham", "link": "https://stackoverflow.com/users/1932632/the-ham"}, "is_accepted": false, "score": 18, "last_activity_date": 1496957590, "last_edit_date": 1496957590, "creation_date": 1479912652, "answer_id": 40767599, "question_id": 30767089, "link": "https://stackoverflow.com/questions/30767089/how-to-store-money-in-elasticsearch/40767599#40767599", "title": "How to store money in elasticsearch", "body": "<p>In newer version (checked for 5.0), probably the best option is to use <code>scaled_float</code> with <code>scaling_factor = 100</code> like in their example:</p>\n\n<pre><code>PUT my_index\n{\n  \"mappings\": {\n    \"my_type\": {\n      \"properties\": {\n        \"number_of_bytes\": {\n          \"type\": \"integer\"\n        },\n        \"time_in_seconds\": {\n          \"type\": \"float\"\n        },\n        \"price\": {\n          \"type\": \"scaled_float\",\n          \"scaling_factor\": 100\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>You can find their <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/number.html\" rel=\"noreferrer\">doc</a> here.</p>\n"}], "owner": {"reputation": 113, "user_id": 3684414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bb94236c56252809ccbb8fcf87a309?s=128&d=identicon&r=PG&f=1", "display_name": "stincity", "link": "https://stackoverflow.com/users/3684414/stincity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7921, "favorite_count": 2, "accepted_answer_id": 30812698, "answer_count": 2, "score": 11, "last_activity_date": 1496957590, "creation_date": 1433969549, "question_id": 30767089, "link": "https://stackoverflow.com/questions/30767089/how-to-store-money-in-elasticsearch", "title": "How to store money in elasticsearch", "body": "<p>I've created an elasticsearch index and my current mapping stores the dollar amount of an item as a string.  This is proving to be difficult as I can't search/filter on this value correctly.</p>\n\n<pre><code>GET catalog/product/_search\n{\n  \"filter\": {\n    \"range\": {\n      \"price\": {\n        \"from\": 230.0,\n        \"to\": 300.0\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Where price is mapped as a string.  I used a string because going from a python decimal value, I've had issues where this value suddenly gets values at something like 17.989999999999999999998789.  This only happens sometimes but I don't wanna get into the issue of going from a python decimal to a java double/float (so I just str() the thing).</p>\n\n<p>Any thoughts on a better approach?  Should I bite the bullet and map the price to a double or a float?</p>\n"}, {"tags": ["python", "django", "django-queryset"], "comments": [{"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 1, "creation_date": 1433968787, "post_id": 30766814, "comment_id": 49585834, "body": "what good is the group_by_day function doing? you are just returning an empty dictionary every time"}], "answers": [{"tags": [], "owner": {"reputation": 5725, "user_id": 781909, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bf6105eb652fbf95b9c5b582bf6bf294?s=128&d=identicon&r=PG", "display_name": "jvc26", "link": "https://stackoverflow.com/users/781909/jvc26"}, "is_accepted": true, "score": 1, "last_activity_date": 1433969276, "creation_date": 1433969276, "answer_id": 30767021, "question_id": 30766814, "link": "https://stackoverflow.com/questions/30766814/access-attributes-from-retrieved-model-object-in-django/30767021#30767021", "title": "Access attributes from retrieved model object in django", "body": "<pre><code>Event.objects.order_by('start').filter(start__year=year, start__month=month)\n</code></pre>\n\n<p>Returns a list of matching <code>Event</code> objects. You then pass this QuerySet list to:</p>\n\n<pre><code>group_by_day(self, event)\n</code></pre>\n\n<p>Which from your parameter names suggests you think you are passing a single event. So it doesn't work.</p>\n"}], "owner": {"reputation": 546, "user_id": 4941891, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aWBZ1.jpg?s=128&g=1", "display_name": "Philippe Fisher", "link": "https://stackoverflow.com/users/4941891/philippe-fisher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 30767021, "answer_count": 1, "score": 0, "last_activity_date": 1433969276, "creation_date": 1433968580, "question_id": 30766814, "link": "https://stackoverflow.com/questions/30766814/access-attributes-from-retrieved-model-object-in-django", "title": "Access attributes from retrieved model object in django", "body": "<p>I am trying to access an attribute from a model object that I passed to my class. So I have my view doing something like:</p>\n\n<pre><code>my_events = Event.objects.order_by('start').filter(start__year=year, start__month=month)\n</code></pre>\n\n<p>and then I pass that to my class like so:</p>\n\n<pre><code>calendar = EventCalendar(my_events).formatmonth(year, month)\n</code></pre>\n\n<p>and then here is my class</p>\n\n<pre><code># -*- coding: UTF-8 -*-\nfrom calendar import HTMLCalendar\nfrom datetime import date\nfrom itertools import groupby\nfrom django.utils.html import conditional_escape as esc\n\n\nclass EventCalendar(HTMLCalendar):\n\n    def __init__(self, event):\n        super(EventCalendar, self).__init__()\n        self.event = self.group_by_day(event)\n\n    def formatday(self, day, weekday):\n        if day != 0:\n            cssclass = self.cssclasses[weekday]\n\n\n            if date.today() == date(self.year, self.month, day):\n                cssclass += ' today'\n            if day in self.event:\n                cssclass += ' filled'\n                extra_div = ['&lt;div class=\"event_container\"&gt;&lt;ul&gt;']\n                for event in self.event[day]:\n                    extra_div.append('&lt;li&gt;')\n                    extra_div.append('&lt;a href=\"%s\"&gt;' % event.get_absolute_url())\n                    extra_div.append(esc(event.title))\n                    extra_div.append('&lt;/a&gt;&lt;/li&gt;')\n                extra_div.append('&lt;/ul&gt;&lt;/div&gt;') #END event_container\n\n                #Custom div wrapper\n                extra_div.append('&lt;div class=\"extra_container\"&gt;')\n\n                #Custom div add_event\n                extra_div.append('&lt;div class=\"add_event\"&gt;')\n                extra_div.append('&lt;a href=\"#\"&gt;add event&lt;/a&gt;')\n                extra_div.append('&lt;/div&gt;')\n\n                #Custom div show_day\n                extra_div.append('&lt;div class=\"show_day\"&gt;')\n                extra_div.append('&lt;a href=\"#\"&gt;show day&lt;/a&gt;')\n                extra_div.append('&lt;/div&gt;')\n\n                extra_div.append('&lt;/div&gt;') #END extra_container\n\n                return self.day_cell(cssclass, '%d %s' % (day, ''.join(extra_div)))\n\n            #Custom div wrapper\n            extra_div = ['&lt;div class=\"extra_container\"&gt;']\n\n            #Custom div add_event\n            extra_div.append('&lt;div class=\"add_event\"&gt;')\n            extra_div.append('&lt;a href=\"#\"&gt;add event&lt;/a&gt;')\n            extra_div.append('&lt;/div&gt;')\n\n            #Custom div show_day\n            extra_div.append('&lt;div class=\"show_day\"&gt;')\n            extra_div.append('&lt;a href=\"#\"&gt;show day&lt;/a&gt;')\n            extra_div.append('&lt;/div&gt;')\n\n            extra_div.append('&lt;/div&gt;')\n\n            return self.day_cell(cssclass, '%d %s' % (day, ''.join(extra_div)))\n        return self.day_cell('noday', '&amp;nbsp;')\n\n    def formatmonth(self, year, month):\n        self.year, self.month = year, month\n        return super(EventCalendar, self).formatmonth(year, month)\n\n    def group_by_day(self, event):\n        event_dict = {}\n        start = event.start.day\n        end = event.end.day\n        return event_dict\n\n    def day_cell(self, cssclass, body):\n        return '&lt;td class=\"%s\"&gt;%s&lt;/td&gt;' % (cssclass, body)\n</code></pre>\n\n<p>The issue is with the <code>group_by_day(self, event)</code> section in the code. I'm trying to retrieve the start and end day of my event. with:</p>\n\n<pre><code>start = event.start.day\nend = event.end.day\n</code></pre>\n\n<p>But when I do that I get and error </p>\n\n<blockquote>\n  <p>'QuerySet' object has no attribute 'start'</p>\n</blockquote>\n\n<p>Does this mean that when I retrieved the object I only got a reference to it, something like lazy instantiation ? Or am I just trying to access it wrong?</p>\n\n<p>sorry if question is trivial, really new to python/django.\nThanks</p>\n"}, {"tags": ["python", "linux", "passwords", "superuser"], "answers": [{"comments": [{"owner": {"reputation": 1906, "user_id": 2755652, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/8bDAG.jpg?s=128&g=1", "display_name": "Sujay Phadke", "link": "https://stackoverflow.com/users/2755652/sujay-phadke"}, "edited": false, "score": 0, "creation_date": 1435386034, "post_id": 30766947, "comment_id": 50188985, "body": "Thanks. In my python app, I used &quot;gksudo whoami&quot;, which is harmless but gives the prompt pop-up. Is there a way to ask for sudo permissions without running a specific shell command though?  Secondly, I&#39;d like to add my own text to the window that pops-up. For example, gparted popups a windows saying &quot;authentication is required.... blah blah&quot;. How do I simply check for sudo permissions to popup a custom authentication window?"}, {"owner": {"reputation": 1906, "user_id": 2755652, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/8bDAG.jpg?s=128&g=1", "display_name": "Sujay Phadke", "link": "https://stackoverflow.com/users/2755652/sujay-phadke"}, "edited": false, "score": 0, "creation_date": 1435387888, "post_id": 30766947, "comment_id": 50189348, "body": "It looks like a standardized system auth popup since it has an icon on the side (used for gnome keyring) which combines a keyring image and a super-imposed image of the application&#39;s icon (in this case gparted). But I have no idea how to get this kind of popup."}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "reply_to_user": {"reputation": 1906, "user_id": 2755652, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/8bDAG.jpg?s=128&g=1", "display_name": "Sujay Phadke", "link": "https://stackoverflow.com/users/2755652/sujay-phadke"}, "edited": false, "score": 0, "creation_date": 1435396977, "post_id": 30766947, "comment_id": 50191371, "body": "I get the interest, but I&#39;m not sure why you&#39;d want to reinvent the wheel?  Due to the way that Unix handles scripts, you would probably need to implement a Rootwrap bound to a QMessageBox/QDialog with your message of interest, saying: if event.accepted():    do some_task.  To do it in purely Python, try this: <a href=\"https://ask.openstack.org/en/question/60893/rootwrap-python-write-to-root-only-owned-file/\" rel=\"nofollow noreferrer\">ask.openstack.org/en/question/60893/&hellip;</a>  However, this is exactly WHY gksudo exists: to do a root task from a script where sudo is not available."}, {"owner": {"reputation": 1906, "user_id": 2755652, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/8bDAG.jpg?s=128&g=1", "display_name": "Sujay Phadke", "link": "https://stackoverflow.com/users/2755652/sujay-phadke"}, "edited": false, "score": 0, "creation_date": 1435397493, "post_id": 30766947, "comment_id": 50191516, "body": "thanks. The &quot;why&quot; is because if I do &quot;gksudo whoami&quot;, the popup says something like &quot;the program whoami is requesting root permissions&quot;. Whereas, the root permissions are actually required by my parent program. This would just create confusion and that&#39;s why I want to customize the message in the popup or have my own popup."}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "reply_to_user": {"reputation": 1906, "user_id": 2755652, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/8bDAG.jpg?s=128&g=1", "display_name": "Sujay Phadke", "link": "https://stackoverflow.com/users/2755652/sujay-phadke"}, "edited": false, "score": 0, "creation_date": 1435400725, "post_id": 30766947, "comment_id": 50192306, "body": "You can just rename a script to whatever your program name actually is. Then, you don&#39;t have to worry about it. I&#39;m still not seeing why you need special permissions.  Or, you can pass the message flag to write your own message.  For example, try: &quot;gksudo whoami --message cool&quot;"}], "tags": [], "owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "is_accepted": true, "score": 0, "last_activity_date": 1433969008, "creation_date": 1433969008, "answer_id": 30766947, "question_id": 30766807, "link": "https://stackoverflow.com/questions/30766807/linux-acquire-root-permissions-through-a-password-popup/30766947#30766947", "title": "Linux acquire root permissions through a password popup", "body": "<p>Like this:</p>\n\n<pre><code>&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.system(\"gksudo software-center\")\n</code></pre>\n\n<p>Popup sudo that then executes the command of interest (here, Ubuntu software center).</p>\n\n<p>You can edit this with any subprocess or other way of calling a shell command.</p>\n\n<p>EDIT: Anonymous downvoters: gksudo is the perfect response here? You want someone who needs root access who may not have run the script with root access to begin with. gksudo is just an interface to get root permissions to do a command, particularly for GUIs, exactly what is requested.</p>\n\n<p>Leave a comment please.</p>\n"}], "owner": {"reputation": 1906, "user_id": 2755652, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/8bDAG.jpg?s=128&g=1", "display_name": "Sujay Phadke", "link": "https://stackoverflow.com/users/2755652/sujay-phadke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "accepted_answer_id": 30766947, "answer_count": 1, "score": 0, "last_activity_date": 1433969008, "creation_date": 1433968568, "question_id": 30766807, "link": "https://stackoverflow.com/questions/30766807/linux-acquire-root-permissions-through-a-password-popup", "title": "Linux acquire root permissions through a password popup", "body": "<p>I am writing a python/Qt application which needs to perform disk mounting. Hence it needs root permissions. Is there any way that I could make the script acquire root permissions using a popup for password, like gparted does? \n  I know I can detect within the script, if it has been run with sudo or not, with something like this (for example in bash):</p>\n\n<p><code>if [[ $(id -u) -ne 0 ]];</code></p>\n\n<p>But after this, how do I ask for the password and acquire root permissions at runtime?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "logging"], "comments": [{"owner": {"reputation": 4380, "user_id": 1656850, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/RIotq.gif?s=128&g=1", "display_name": "boardrider", "link": "https://stackoverflow.com/users/1656850/boardrider"}, "edited": false, "score": 0, "creation_date": 1433970850, "post_id": 30766771, "comment_id": 49586966, "body": "To make sure the logging you&#39;re using is the logging you <i>think</i> you&#39;re using, do <code>pip uninstall logging &amp;&amp; pip install logging</code> and now do <code>python -c &quot;import os, logging ; print os.path.dirname(logging.__file__)&quot;</code> to make sure."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433970850, "post_id": 30766771, "comment_id": 49586968, "body": "if you use <code>logging.basicConfig(level=logging.DEBUG)</code> then you would see the output which is expected behaviour unless you supplied filename=..."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 4380, "user_id": 1656850, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/RIotq.gif?s=128&g=1", "display_name": "boardrider", "link": "https://stackoverflow.com/users/1656850/boardrider"}, "edited": false, "score": 0, "creation_date": 1433971156, "post_id": 30766771, "comment_id": 49587110, "body": "@boardrider, the OP is using a builtin library"}, {"owner": {"reputation": 123, "user_id": 3692971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/074f0f889c4c39c86a4502e71f993d5b?s=128&d=identicon&r=PG&f=1", "display_name": "user3692971", "link": "https://stackoverflow.com/users/3692971/user3692971"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433973495, "post_id": 30766771, "comment_id": 49588229, "body": "@Padraic Cunningham, If I supply a file name to <code>logging.basicConfig()</code> then you are right, it does not print to the terminal.  That is a step forward.  It does however add a <code>FileHandler</code> to the Root logger and along with the  <code>RotatingFileHandler</code> that I add.  This means I get two copies of each message in my log files.  I can remove the automatically created handler (please see my <b>Update</b> above) if that is what has to be done.  Is there some way to sort out the message level issue in my log files without resorting to calling <code>logging.basicConfig()</code> ?  Thanks."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433973818, "post_id": 30766771, "comment_id": 49588318, "body": "If you want all the output logged for all levels in your code you should attach the handler with the highest level."}, {"owner": {"reputation": 4380, "user_id": 1656850, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/RIotq.gif?s=128&g=1", "display_name": "boardrider", "link": "https://stackoverflow.com/users/1656850/boardrider"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1434034234, "post_id": 30766771, "comment_id": 49618260, "body": "@Padraic, unfortunately that the OP used a name of a standard library for his library..."}], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 9510611, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kevin Glasson", "link": "https://stackoverflow.com/users/9510611/kevin-glasson"}, "edited": false, "score": 0, "creation_date": 1535034414, "post_id": 30768114, "comment_id": 90925761, "body": "I spent so long trying to figure out why my imported logging wasn&#39;t working, and it was because of this! I never grabbed the root logger with <code>logging.getLogger(&#39;&#39;)</code> i only had <code>logging.getLogger(__name__)</code> in my <code>main()</code>"}], "tags": [], "owner": {"reputation": 2900, "user_id": 2566965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300de803639f26b633cbf259a95af052?s=128&d=identicon&r=PG", "display_name": "junnytony", "link": "https://stackoverflow.com/users/2566965/junnytony"}, "is_accepted": true, "score": 4, "last_activity_date": 1433975503, "last_edit_date": 1495540713, "creation_date": 1433973902, "answer_id": 30768114, "question_id": 30766771, "link": "https://stackoverflow.com/questions/30766771/python-logging-from-multiple-modules-to-rotating-files-without-printing-to-con/30768114#30768114", "title": "Python - Logging from multiple modules to rotating files without printing to console", "body": "<p>You need to call set the logging level on the logger itself as well. I believe by default, the logging level on the logger is <code>logging.WARNING</code></p>\n\n<p>Ex.</p>\n\n<pre><code>root_logger = logging.getLogger('')\nroot_logger.setLevel(logging.DEBUG)\n\n# Add the handler to the root logger\nroot_logger.addHandler(handler)\n</code></pre>\n\n<p>The loggers log level determines what the logger will actually log (i.e what messages will actually get handed to the handlers). The handlers log level determines what it will actually handle (i.e. what messages actually are output to file, stream, etc). So you could potentially have multiple handlers attached to a logger each handling a different log level.</p>\n\n<p>Here's an <a href=\"https://stackoverflow.com/questions/17668633/what-is-the-point-of-setlevel-in-a-python-logging-handler\">SO answer</a> that explains the way this works</p>\n"}], "owner": {"reputation": 123, "user_id": 3692971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/074f0f889c4c39c86a4502e71f993d5b?s=128&d=identicon&r=PG&f=1", "display_name": "user3692971", "link": "https://stackoverflow.com/users/3692971/user3692971"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2064, "favorite_count": 0, "accepted_answer_id": 30768114, "answer_count": 1, "score": 1, "last_activity_date": 1433975503, "creation_date": 1433968447, "last_edit_date": 1495540275, "question_id": 30766771, "link": "https://stackoverflow.com/questions/30766771/python-logging-from-multiple-modules-to-rotating-files-without-printing-to-con", "title": "Python - Logging from multiple modules to rotating files without printing to console", "body": "<p>I am trying to add logging to a medium size Python project with minimal disruption.  I would like to log from multiple modules to rotating files silently (without printing messages to the terminal).  I have tried to modify <a href=\"https://docs.python.org/3.1/library/logging.html#logging-to-multiple-destinations\" rel=\"nofollow noreferrer\">this example</a> and I almost have the functionality I need except for one issue.</p>\n\n<p>Here is how I am attempting to configure things in my main script:</p>\n\n<pre><code>import logging\nimport logging.handlers\nimport my_module\n\nLOG_FILE = 'logs\\\\logging_example_new.out'\n\n#logging.basicConfig(level=logging.DEBUG)\n\n# Define a Handler which writes messages to rotating log files.\nhandler = logging.handlers.RotatingFileHandler(LOG_FILE, maxBytes=100000, backupCount=1)\nhandler.setLevel(logging.DEBUG)     # Set logging level.\n# Create message formatter.\nformatter = logging.Formatter('%(asctime)s %(name)-12s %(levelname)-8s %(message)s')\n# Tell the handler to use this format\nhandler.setFormatter(formatter)\n\n# Add the handler to the root logger\nlogging.getLogger('').addHandler(handler)\n\n# Now, we can log to the root logger, or any other logger. First the root...\nlogging.debug('Root debug message.')\nlogging.info('Root info message.')\nlogging.warning('Root warning message.')\nlogging.error('Root error message.')\nlogging.critical('Root critical message.')\n\n# Use a Logger in another module.\nmy_module.do_something()                     # Call function which logs a message.\n</code></pre>\n\n<p>Here is a sample of what I am trying to do in modules:</p>\n\n<pre><code>import logging\n\ndef do_something():\n    logger = logging.getLogger(__name__)\n    logger.debug('Module debug message.')\n    logger.info('Module info message.')\n    logger.warning('Module warning message.')\n    logger.error('Module error message.')\n    logger.critical('Module critical message.')\n</code></pre>\n\n<p>Now, here is my problem.  I currently get the messages logged into rotating files silently.  But I only get warning, error, and critical messages.  Despite setting <code>handler.setLevel(logging.DEBUG)</code>.</p>\n\n<p>If I uncomment <code>logging.basicConfig(level=logging.DEBUG)</code>, then I get all the messages in the log files but I also get the messages printed to the terminal.</p>\n\n<p>How do I get all messages above the specified threshold to my log files without outputing them to the terminal?</p>\n\n<p>Thanks!</p>\n\n<p><strong>Update:</strong>\nBased on this <a href=\"https://stackoverflow.com/a/6459613/3692971\">answer</a>, it appears that calling <code>logging.basicConfig(level=logging.DEBUG)</code> automatically adds a <code>StreamHandler</code> to the Root logger and you can remove it.  When I did remove it leaving only my <code>RotatingFileHandler</code>, messages no longer printed to the terminal.  I am still wondering why I have to use <code>logging.basicConfig(level=logging.DEBUG)</code> to set the message level threshold, when I am setting <code>handler.setLevel(logging.DEBUG)</code>.  If anyone can shed a little more light on these issues it would still be appreciated.</p>\n"}, {"tags": ["python", "mongodb", "pymongo"], "comments": [{"owner": {"reputation": 44359, "user_id": 2363712, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/beAJU.jpg?s=128&g=1", "display_name": "Sylvain Leroux", "link": "https://stackoverflow.com/users/2363712/sylvain-leroux"}, "edited": false, "score": 0, "creation_date": 1433968467, "post_id": 30766744, "comment_id": 49585640, "body": "If I understand it well, you need to copy the <i>schema</i> but not the <i>data</i> ?"}, {"owner": {"reputation": 6320, "user_id": 3264192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0jP68.jpg?s=128&g=1", "display_name": "bagrat", "link": "https://stackoverflow.com/users/3264192/bagrat"}, "edited": false, "score": 0, "creation_date": 1433968557, "post_id": 30766744, "comment_id": 49585697, "body": "Are you going to do the migration in a single script, or you need to dump the index data, and then execute another script which will apply these indexes on another MongoDB instance?"}, {"owner": {"reputation": 413, "user_id": 3537242, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0038bb0c68cc9e8f9feb628b31df284e?s=128&d=identicon&r=PG&f=1", "display_name": "perdurabo93", "link": "https://stackoverflow.com/users/3537242/perdurabo93"}, "edited": false, "score": 0, "creation_date": 1433968588, "post_id": 30766744, "comment_id": 49585711, "body": "Right, I need to be able to export the &quot;schema&quot; (such as it is in mongodb), store it in a JSON file, and then be able to import that JSON to a fresh instance of mongo such that all DBs, collections, caps, and indices are identical."}, {"owner": {"reputation": 413, "user_id": 3537242, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0038bb0c68cc9e8f9feb628b31df284e?s=128&d=identicon&r=PG&f=1", "display_name": "perdurabo93", "link": "https://stackoverflow.com/users/3537242/perdurabo93"}, "edited": false, "score": 0, "creation_date": 1433968688, "post_id": 30766744, "comment_id": 49585766, "body": "Ideally I&#39;m planning on one script with different arguments for import and export."}, {"owner": {"reputation": 44359, "user_id": 2363712, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/beAJU.jpg?s=128&g=1", "display_name": "Sylvain Leroux", "link": "https://stackoverflow.com/users/2363712/sylvain-leroux"}, "edited": false, "score": 0, "creation_date": 1433969463, "post_id": 30766744, "comment_id": 49586204, "body": "You need to copy: DBs, collections, users, roles, indexes. Did I missed something ?"}, {"owner": {"reputation": 413, "user_id": 3537242, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0038bb0c68cc9e8f9feb628b31df284e?s=128&d=identicon&r=PG&f=1", "display_name": "perdurabo93", "link": "https://stackoverflow.com/users/3537242/perdurabo93"}, "edited": false, "score": 0, "creation_date": 1433969747, "post_id": 30766744, "comment_id": 49586367, "body": "In my case users and roles are irrelevant.  I just need DB names, collection names, collection caps, and indices.  No actual data/document contents.  Thats highly variable between environments.  In export mode, this script should just create the proper Dbs, collections, caps and indices such that they will be correct before any data is written to the new instance."}, {"owner": {"reputation": 413, "user_id": 3537242, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0038bb0c68cc9e8f9feb628b31df284e?s=128&d=identicon&r=PG&f=1", "display_name": "perdurabo93", "link": "https://stackoverflow.com/users/3537242/perdurabo93"}, "edited": false, "score": 0, "creation_date": 1434383206, "post_id": 30766744, "comment_id": 49742540, "body": "Part of the problem is that starting in 3.0, I can&#39;t use mongoexport to simply export system.indexes into a portable JSON like so:  <code>mongoexport -h localhost -d MyDB -c system.indexes --jsonArray -o MyDB.indexes.json</code>  I need a way to do this, as well as get information about any caps on collections so that I can copy the &quot;schema&quot; of a DB without also capturing the data."}], "owner": {"reputation": 413, "user_id": 3537242, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0038bb0c68cc9e8f9feb628b31df284e?s=128&d=identicon&r=PG&f=1", "display_name": "perdurabo93", "link": "https://stackoverflow.com/users/3537242/perdurabo93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1053, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1433968318, "creation_date": 1433968318, "question_id": 30766744, "link": "https://stackoverflow.com/questions/30766744/how-to-import-and-export-mongodb-indices-to-json-with-pymongo", "title": "How to import and export MongoDB indices to JSON with PyMongo", "body": "<p>I've got a situation where I need to maintain identical indices on MongoDB databases between environments, but I can't use mongodump/restore because I don't want to copy the data, I just import and export the indices as JSON docs.  I need a handy way, preferably using Pymongo, to export the indices for all collections in a given Db (or all DBs on the instance) into a single JSON file, then be able to take that file and apply the indices to another instance to ensure all the DB names, collection names, and indices on those collections are identical between environments (I'd also like to be able to maintain collection cap limits if they exist as well).  </p>\n\n<p>Does anyone have a handy code example that does this?  Would you use db.collection.index_information() and if so, how would you encode the output into a JSON doc that could be later read by the same script and imported into another instance?</p>\n"}, {"tags": ["python", "csv", "pandas"], "comments": [{"owner": {"reputation": 1025, "user_id": 2279616, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bad8191761d65b9480aab8c5f188d2ac?s=128&d=identicon&r=PG", "display_name": "Jojo", "link": "https://stackoverflow.com/users/2279616/jojo"}, "reply_to_user": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 0, "creation_date": 1433970262, "post_id": 30766683, "comment_id": 49586679, "body": "@bernie If I carry out that change I still obtain an error <code>TypeError: coercing to Unicode: need string or buffer, NoneType found</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1025, "user_id": 2279616, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bad8191761d65b9480aab8c5f188d2ac?s=128&d=identicon&r=PG", "display_name": "Jojo", "link": "https://stackoverflow.com/users/2279616/jojo"}, "edited": false, "score": 0, "creation_date": 1433970111, "post_id": 30767078, "comment_id": 49586583, "body": "Sorry, I should have mentioned I want the data to be in the form of a Dataframe. Thanks."}, {"owner": {"reputation": 1025, "user_id": 2279616, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bad8191761d65b9480aab8c5f188d2ac?s=128&d=identicon&r=PG", "display_name": "Jojo", "link": "https://stackoverflow.com/users/2279616/jojo"}, "edited": false, "score": 0, "creation_date": 1433970609, "post_id": 30767078, "comment_id": 49586844, "body": "Thank you, I agree. However, the Output comes out in a very strange form. `     F17 ZERO-COUPON INTEREST RATES ? ANALYTICAL SERIES ? 2009 TO CURRENT  \\ 0                                                 Title                      1                                           Description                      2                                             Frequency`  I was hoping it would be such that the headers would be the same as those in the CSV File and the rows would follow correspondingly."}, {"owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "reply_to_user": {"reputation": 1025, "user_id": 2279616, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bad8191761d65b9480aab8c5f188d2ac?s=128&d=identicon&r=PG", "display_name": "Jojo", "link": "https://stackoverflow.com/users/2279616/jojo"}, "edited": false, "score": 1, "creation_date": 1433970905, "post_id": 30767078, "comment_id": 49587002, "body": "That&#39;s what the CSV file looks like. Download it and open with a plain editor."}, {"owner": {"reputation": 1025, "user_id": 2279616, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bad8191761d65b9480aab8c5f188d2ac?s=128&d=identicon&r=PG", "display_name": "Jojo", "link": "https://stackoverflow.com/users/2279616/jojo"}, "edited": false, "score": 0, "creation_date": 1433971091, "post_id": 30767078, "comment_id": 49587077, "body": "Thank You. Is there a way to make the data more organized within this Dataframe?"}, {"owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "reply_to_user": {"reputation": 1025, "user_id": 2279616, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bad8191761d65b9480aab8c5f188d2ac?s=128&d=identicon&r=PG", "display_name": "Jojo", "link": "https://stackoverflow.com/users/2279616/jojo"}, "edited": false, "score": 0, "creation_date": 1433971228, "post_id": 30767078, "comment_id": 49587158, "body": "Not really. That CSV file looks messy but that how it is formatted. If you open it with excel (which supports CSV files) you will have a good overview of how it is organized."}], "tags": [], "owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "is_accepted": true, "score": 1, "last_activity_date": 1433970229, "last_edit_date": 1433970229, "creation_date": 1433969502, "answer_id": 30767078, "question_id": 30766683, "link": "https://stackoverflow.com/questions/30766683/ioerror-when-trying-to-convert-csv-into-dataframe/30767078#30767078", "title": "IOError when trying to convert CSV into dataframe", "body": "<p>You have a few problems. First you are downloading the csv file, not saving it locally, and then trying to open this non-existent local file.</p>\n\n<p>Second, a CSV file is not an Excel file, and so you don't need <code>pd.ExcelFile</code> to open it. Try a CSV reader instead. So for example:</p>\n\n<pre><code>import pandas as pd\n\nurl = 'http://www.rba.gov.au/statistics/tables/csv/f17-yields.csv'\npd.read_csv(url)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4131, "user_id": 3312620, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4lUdJ.jpg?s=128&g=1", "display_name": "Tharindu Kumara", "link": "https://stackoverflow.com/users/3312620/tharindu-kumara"}, "is_accepted": false, "score": 1, "last_activity_date": 1434034183, "creation_date": 1434034183, "answer_id": 30784169, "question_id": 30766683, "link": "https://stackoverflow.com/questions/30766683/ioerror-when-trying-to-convert-csv-into-dataframe/30784169#30784169", "title": "IOError when trying to convert CSV into dataframe", "body": "<p>Use the reader function in csv</p>\n\n<pre><code>import csv\nimport urllib2\n\nurl = 'http://www.rba.gov.au/statistics/tables/csv/f17-yields.csv'\nresponse = urllib2.urlopen(url)\ncr = csv.reader(response)\n\nfor row in cr:\n    print row\n</code></pre>\n"}], "owner": {"reputation": 1025, "user_id": 2279616, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bad8191761d65b9480aab8c5f188d2ac?s=128&d=identicon&r=PG", "display_name": "Jojo", "link": "https://stackoverflow.com/users/2279616/jojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 30767078, "answer_count": 2, "score": 1, "last_activity_date": 1434034183, "creation_date": 1433968106, "question_id": 30766683, "link": "https://stackoverflow.com/questions/30766683/ioerror-when-trying-to-convert-csv-into-dataframe", "title": "IOError when trying to convert CSV into dataframe", "body": "<p>I want to try and understand why I get an Error in the following code. The Error is <code>IOError: [Errno 2] No such file or directory: 'f17-yields.csv'</code></p>\n\n<pre><code>import urllib2\nimport pandas as pd\nimport os\n\nurl = 'http://www.rba.gov.au/statistics/tables/csv/f17-yields.csv'\n\nresponse = urllib2.urlopen(url)\nhtml = response.read()\n\ndataframeofxls_file = pd.ExcelFile(os.path.basename(url))\nprint dataframeofxls_file\n</code></pre>\n\n<p>Cheers</p>\n"}, {"tags": ["python", "pandas", "return", "function"], "comments": [{"owner": {"reputation": 6936, "user_id": 3868428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7e7739b5c5f4626a9edde23f1b0c554?s=128&d=identicon&r=PG&f=1", "display_name": "JoeCondron", "link": "https://stackoverflow.com/users/3868428/joecondron"}, "edited": false, "score": 0, "creation_date": 1433968361, "post_id": 30766640, "comment_id": 49585568, "body": "Try changing the output of <code>regress</code> to <code>pd.Series(z)</code>. The output of the groupby will be a data frame with a column for each polynomial. This should give you easy access and allow you to carry out further calculations such as computing the predictied values from the observations"}], "answers": [{"comments": [{"owner": {"reputation": 491, "user_id": 4933348, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ace7c237032a8a1f2f96e15da1532133?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/4933348/john"}, "edited": false, "score": 0, "creation_date": 1433973527, "post_id": 30767155, "comment_id": 49588239, "body": "Could I trouble you to provide an example of how I can use the coefficients, my skill-set is rather low (new to python) and the phrase &#39;easily&#39; is not in my python vocabulary yet. Perhaps by using them to get a model fit for the first 5 strikes you displayed (formulaic though, for an unknown number of strikes in an unknown list for symbol,expiry,date combinations?)  BTW, Thank you very much for the assistance to this point."}, {"owner": {"reputation": 6936, "user_id": 3868428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7e7739b5c5f4626a9edde23f1b0c554?s=128&d=identicon&r=PG&f=1", "display_name": "JoeCondron", "link": "https://stackoverflow.com/users/3868428/joecondron"}, "reply_to_user": {"reputation": 491, "user_id": 4933348, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ace7c237032a8a1f2f96e15da1532133?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/4933348/john"}, "edited": false, "score": 0, "creation_date": 1433974846, "post_id": 30767155, "comment_id": 49588723, "body": "You want to predict the volatility based on the strike, right?"}, {"owner": {"reputation": 491, "user_id": 4933348, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ace7c237032a8a1f2f96e15da1532133?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/4933348/john"}, "edited": false, "score": 0, "creation_date": 1433975095, "post_id": 30767155, "comment_id": 49588816, "body": "Yes sir, that&#39;s the objective"}, {"owner": {"reputation": 491, "user_id": 4933348, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ace7c237032a8a1f2f96e15da1532133?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/4933348/john"}, "edited": false, "score": 0, "creation_date": 1433981396, "post_id": 30767155, "comment_id": 49590761, "body": "I am trying to have all the coefs be represented on the same row as each strike as 5 different columns x4, x3, x2, x1, constant (4,3,2,1,0 as described in your answer).  With this approach reading any particular row in the df would provide all the information needed to calculate the fitted vol.  Thanks once again."}, {"owner": {"reputation": 491, "user_id": 4933348, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ace7c237032a8a1f2f96e15da1532133?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/4933348/john"}, "edited": false, "score": 0, "creation_date": 1434033023, "post_id": 30767155, "comment_id": 49617337, "body": "Joe, i followed your example and when i got to your equivalent of In[25] i got a long error message ending in KeyError: &#39;date&#39;            My date is showing up as an &quot;object&quot; when i run df.dtypes, does that matter?"}, {"owner": {"reputation": 6936, "user_id": 3868428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7e7739b5c5f4626a9edde23f1b0c554?s=128&d=identicon&r=PG&f=1", "display_name": "JoeCondron", "link": "https://stackoverflow.com/users/3868428/joecondron"}, "reply_to_user": {"reputation": 491, "user_id": 4933348, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ace7c237032a8a1f2f96e15da1532133?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/4933348/john"}, "edited": false, "score": 0, "creation_date": 1434034217, "post_id": 30767155, "comment_id": 49618246, "body": "Oops! My bad. I forgot to reset the index on coeffs before the merge. It complained because it was trying to merge on &#39;date&#39;, &#39;expiry&#39;, &#39;symbol&#39; but these formed the index of <code>coeffs</code> rather than columns. I&#39;ve adjusted the answer. Since you&#39;re new to pandas you should probably break it down and print the result of each method and function call to see what&#39;s going on. The solution is a bit terse, in fairness"}], "tags": [], "owner": {"reputation": 6936, "user_id": 3868428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7e7739b5c5f4626a9edde23f1b0c554?s=128&d=identicon&r=PG&f=1", "display_name": "JoeCondron", "link": "https://stackoverflow.com/users/3868428/joecondron"}, "is_accepted": true, "score": 0, "last_activity_date": 1434034519, "last_edit_date": 1434034519, "creation_date": 1433969794, "answer_id": 30767155, "question_id": 30766640, "link": "https://stackoverflow.com/questions/30766640/assigning-or-tieing-in-function-results-back-to-original-data-in-pandas/30767155#30767155", "title": "Assigning (or tieing in) function results back to original data in pandas", "body": "<p>Changing the output of <code>regress</code> to a Series rather than a numpy array will give you a data frame when you groupby. The index of the series will be the column names:</p>\n\n<pre><code>In [37]:\n\ndf = pd.DataFrame(\n[[  '6/10/2015',  '1/19/2016',    'IBM',      50,  42.0],\n[ '6/10/2015',  '1/19/2016',    'IBM',      55,  41.5],\n[  '6/10/2015',  '1/19/2016',    'IBM',      60,  40.0],\n[  '6/10/2015',  '1/19/2016',    'IBM',      65,  38.0],\n[  '6/10/2015',  '1/19/2016',    'IBM',      70,  36.0]],\ncolumns=['date', 'expiry', 'symbol', 'strike', 'vol'])\n\ndef regress(df):\n    y=df['vol']\n    x=df['strike']\n    z=np.polyfit(x,y,4)\n    return pd.Series(z, name='order', index=range(5)[::-1])\n\ngroup_cols = ['date', 'expiry', 'symbol']\ncoeffs = df.groupby(group_cols).apply(regress)\ncoeffs\n\n\nOut[40]:\n                         order         4      3          2         1    0\ndate           expiry   symbol                  \n6/10/2015   1/19/2016   IBM -5.388312e-18   0.000667    -0.13   8.033333   -118\n</code></pre>\n\n<p>To get the columns containing the coefficients for each combination of date, expiry and symbol you can then merge <code>df</code> and <code>coeffs</code> on these columns:</p>\n\n<pre><code>In [25]: df.merge(coeffs.reset_index(), on=group_cols)\nOut[25]:\ndate    expiry     symbol   strike    vol    4              3               2          1       0\n0   6/10/2015   1/19/2016   IBM 50  42.0    -6.644454e-18   0.000667    -0.13   8.033333    -118\n1   6/10/2015   1/19/2016   IBM 55  41.5    -6.644454e-18   0.000667    -0.13   8.033333    -118\n2   6/10/2015   1/19/2016   IBM 60  40.0    -6.644454e-18   0.000667    -0.13   8.033333    -118\n3   6/10/2015   1/19/2016   IBM 65  38.0    -6.644454e-18   0.000667    -0.13   8.033333    -118\n4   6/10/2015   1/19/2016   IBM 70  36.0    -6.644454e-18   0.000667    -0.13   8.033333    -118\n</code></pre>\n\n<p>You can then do something like </p>\n\n<pre><code>df = df.merge(coeffs.reset_index(), on=group_cols)\nstrike_powers = pd.DataFrame(dict((i, df.strike**i) for i in range(5))\ndf['modelled_vol'] = (strike_powers * df[range(5)]).sum(axis=1)\n</code></pre>\n"}], "owner": {"reputation": 491, "user_id": 4933348, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ace7c237032a8a1f2f96e15da1532133?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/4933348/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 30767155, "answer_count": 1, "score": 0, "last_activity_date": 1434034519, "creation_date": 1433967949, "last_edit_date": 1433973377, "question_id": 30766640, "link": "https://stackoverflow.com/questions/30766640/assigning-or-tieing-in-function-results-back-to-original-data-in-pandas", "title": "Assigning (or tieing in) function results back to original data in pandas", "body": "<p>I am struggling with extracting the regression coefficients once I complete the function call np.polyfit (actual code below). I am able to get a display of each coefficient but am unsure how to actually extract them for future use with the original data. </p>\n\n<pre><code>df=pd.read_csv('2_skews.csv')\n</code></pre>\n\n<p>Here is a head() of the data</p>\n\n<pre><code>      date      expiry   symbol   strike vol\n0  6/10/2015  1/19/2016    IBM      50  42.0\n1  6/10/2015  1/19/2016    IBM      55  41.5\n2  6/10/2015  1/19/2016    IBM      60  40.0\n3  6/10/2015  1/19/2016    IBM      65  38.0\n4  6/10/2015  1/19/2016    IBM      70  36.0\n</code></pre>\n\n<p>There are many symbols with many strikes across many days and many expiry dates as well</p>\n\n<p>I have grouped the data by date, symbol and expiry and then call the regression function with this:</p>\n\n<pre><code>df_reg=df.groupby(['date','symbol','expiry']).apply(regress)\n</code></pre>\n\n<p>I have this function that seems to work well (gives proper coefficients), i just don't seem to be able to access them and tie them to the original data.</p>\n\n<pre><code>def regress(df):\n    y=df['vol']\n    x=df['strike']\n    z=P.polyfit(x,y,4)\nreturn (z)\n</code></pre>\n\n<p>I am calling polyfit like this:</p>\n\n<pre><code>from numpy.polynomial import polynomial as P\n</code></pre>\n\n<p>The final results:</p>\n\n<pre><code>df_reg\n\n\ndate       symbol  expiry   \n5/19/2015  GS      1/19/2016    [-112.064833151, 6.76871521993, -0.11147562136...\n                   3/21/2016    [-131.2914493, 7.16441276062, -0.1145534833, 0...\n           IBM     1/19/2016    [211.458028147, -5.01236287512, 0.044819313514...\n                   3/21/2016    [-34.1027973807, 3.16990194634, -0.05676206572...\n6/10/2015  GS      1/19/2016    [50.3916788503, 0.795484227762, -0.02701849495...\n                   3/21/2016    [31.6090441114, 0.851878910113, -0.01972772270...\n           IBM     1/19/2016    [-13.6159660078, 3.23002791603, -0.06015739505...\n                   3/21/2016    [-51.6709051223, 4.80288173687, -0.08600312989...\ndtype: object\n</code></pre>\n\n<p>the top results has the functional form of :</p>\n\n<pre><code>y = -0.000002x4 + 0.000735x3 - 0.111476x2 + 6.768715x - 112.064833\n</code></pre>\n\n<p>I have tried to take the constructive criticism of previous individuals and make my question as clear as possible, please let me know if i still need to work on this :-)</p>\n\n<p>John  </p>\n"}, {"tags": ["python", "xpath", "web-scraping"], "answers": [{"comments": [{"owner": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 0, "creation_date": 1433972285, "post_id": 30767142, "comment_id": 49587703, "body": "That returns [&lt;Element dd at 0x10aae93c0&gt;]"}, {"owner": {"reputation": 28, "user_id": 4996694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192d59a333a83c463f6a4d2ca6b70b6e?s=128&d=identicon&r=PG&f=1", "display_name": "One", "link": "https://stackoverflow.com/users/4996694/one"}, "reply_to_user": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 0, "creation_date": 1433975307, "post_id": 30767142, "comment_id": 49588887, "body": "its a list containing an &#39;lxml.html.HtmlElement&#39; - use buyers[0].text_content()"}, {"owner": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 0, "creation_date": 1434051945, "post_id": 30767142, "comment_id": 49629655, "body": "From that, is it possible to return a value for a specific key? E.g currently that outputs &#39;Year:2014Class:CinemaStatus:OfficialReleased:01/16/14Run:18&zwnj;&#8203;5Technique:Screen PrintSize:18 X 24Markings:Numbered&#39; but if I only want to return &#39;2014&#39; or &#39;Numbered&#39; for example?"}], "tags": [], "owner": {"reputation": 28, "user_id": 4996694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192d59a333a83c463f6a4d2ca6b70b6e?s=128&d=identicon&r=PG&f=1", "display_name": "One", "link": "https://stackoverflow.com/users/4996694/one"}, "is_accepted": false, "score": 0, "last_activity_date": 1433969754, "creation_date": 1433969754, "answer_id": 30767142, "question_id": 30766621, "link": "https://stackoverflow.com/questions/30766621/scraping-a-webpage-with-python/30767142#30767142", "title": "Scraping a webpage with Python", "body": "<p>remove tbody from the xpath </p>\n\n<pre><code>buyers = tree.xpath('//*[@id=\"content\"]/table/tr[2]/td/table/tr/td[1]/dl/dd[3]')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 0, "creation_date": 1434053132, "post_id": 30767420, "comment_id": 49630321, "body": "I would have thought &#39;//dl[@class=&quot;itemListingInfo&quot;]/dd[3]/table/tbody/tr[1]/td[1&zwnj;&#8203;]&#39; would return &#39;Year&#39; but it returned &#39;[ ]&#39; . Why&#39;s that wrong? Also, for each &lt;tr&gt; in the &lt;tbody&gt; how would I add the first &lt;td&gt; values into a dictionary as the keys with the following &lt;td&gt; values as the values? e.g [Year, 2014], [Class, Cinema], [Status, Official]...?"}, {"owner": {"reputation": 10159, "user_id": 4907630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96aeab7486cd88da186e9c52eb7d7c7?s=128&d=identicon&r=PG&f=1", "display_name": "eugenioy", "link": "https://stackoverflow.com/users/4907630/eugenioy"}, "reply_to_user": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 0, "creation_date": 1434130503, "post_id": 30767420, "comment_id": 49666204, "body": "You need to remove the &quot;tbody&quot; from the path, and also add &quot;/text()&quot; at the end to get the actual text. Try with this one: &#39;//dl[@class=&quot;itemListingInfo&quot;]/dd[3]/table/tr[1]/td[1]/text&zwnj;&#8203;()&#39;. Also, I think you should add a separate question regarding how to put everything in a dictionary as it&#39;d be difficult for me to write code in this comment section."}], "tags": [], "owner": {"reputation": 10159, "user_id": 4907630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96aeab7486cd88da186e9c52eb7d7c7?s=128&d=identicon&r=PG&f=1", "display_name": "eugenioy", "link": "https://stackoverflow.com/users/4907630/eugenioy"}, "is_accepted": false, "score": 0, "last_activity_date": 1433970800, "creation_date": 1433970800, "answer_id": 30767420, "question_id": 30766621, "link": "https://stackoverflow.com/questions/30766621/scraping-a-webpage-with-python/30767420#30767420", "title": "Scraping a webpage with Python", "body": "<p>I'd start by suggesting you look at the page HTML and try to find a node closer to the value you are looking for, and build your path from there to make it shorter and easier to follow.</p>\n\n<p>In that page I can see that there is a \"dl\" with class \"itemListingInfo\" and under that one all the information you are looking for.</p>\n\n<p>Also, if you want the \"D&amp;L Screenprinting\" text, you need to extract the text from the link.</p>\n\n<p>Try with this modified version, it should be straightforward to add the other xpath expressions and get the other fields as well.</p>\n\n<pre><code>from lxml import html\nimport requests\n\npage = requests.get('http://www.expressobeans.com/public/detail.php/185246')\n\ntree = html.fromstring(page.text)\n\nbuyers = tree.xpath('//dl[@class=\"itemListingInfo\"]/dd[2]/a/text()')\n\nprint buyers\n</code></pre>\n"}], "owner": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1433970800, "creation_date": 1433967893, "question_id": 30766621, "link": "https://stackoverflow.com/questions/30766621/scraping-a-webpage-with-python", "title": "Scraping a webpage with Python", "body": "<p>I'm trying to learn to scrape webpage (<a href=\"http://www.expressobeans.com/public/detail.php/185246\" rel=\"nofollow\">http://www.expressobeans.com/public/detail.php/185246</a>), however I don't know what I'm doing wrong.  I think it's to do with identifing the xpath but how do I get the correct path (if that is the issue)?  I've tried Firebug in Firefox as well as the Developer Tools in Chrome.</p>\n\n<p>I want to be able to scrape the Manufacturer value (D&amp;L Screenprinting) as well as all the Edition Details.</p>\n\n<p>python script:</p>\n\n<pre><code>from lxml import html\nimport requests\n\npage = requests.get('http://www.expressobeans.com/public/detail.php/185246')\n\ntree = html.fromstring(page.text)\n\nbuyers = tree.xpath('//*[@id=\"content\"]/table/tbody/tr[2]/td/table/tbody/tr/td[1]/dl/dd[3]')\n\nprint buyers\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>[]\n</code></pre>\n"}, {"tags": ["python", "elasticsearch"], "comments": [{"owner": {"reputation": 1, "user_id": 7893251, "user_type": "registered", "profile_image": "https://graph.facebook.com/1716096441739695/picture?type=large", "display_name": "Denis Brinzarei", "link": "https://stackoverflow.com/users/7893251/denis-brinzarei"}, "edited": false, "score": 0, "creation_date": 1543439920, "post_id": 30766615, "comment_id": 93929515, "body": "It&#39;s better to use search_after <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/master/search-request-search-after.html\" rel=\"nofollow noreferrer\">elastic.co/guide/en/elasticsearch/reference/master/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13411, "user_id": 2882051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ckx9R.jpg?s=128&g=1", "display_name": "chengpohi", "link": "https://stackoverflow.com/users/2882051/chengpohi"}, "is_accepted": false, "score": 0, "last_activity_date": 1433986361, "creation_date": 1433986361, "answer_id": 30770115, "question_id": 30766615, "link": "https://stackoverflow.com/questions/30766615/elasticsearch-get-search-results-in-batches/30770115#30770115", "title": "Elasticsearch get search results in batches?", "body": "<p>I don't think you can batch request without increasing <code>Java Heap Space</code>, The server still will store 5000 results and return. </p>\n\n<p>I think you can use <code>scroll</code> to get requests, <code>scroll</code> can retrieve quickly from large numbers of results, It likes the <code>cursor</code> in traditional database. </p>\n\n<p>The Sample Request:</p>\n\n<pre><code>$ curl -XGET 'localhost:9200/world/test/_search?scroll=1m&amp;pretty' -d '\n{\n    \"size\": 50,\n    \"query\": {\n        \"match_all\": {}\n    }\n}'\n</code></pre>\n\n<p>The Sample Response:</p>\n\n<pre><code>{\n  \"_scroll_id\" : \"cXVlcnlUaGVuRmV0Y2g7NTszNjpXZW9lRnJXSFItT0U2YUtIM1hOa0FBOzM3Oldlb2VGcldIUi1PRTZhS0gzWE5rQUE7Mzg6V2VvZUZyV0hSLU9FNmFLSDNYTmtBQTs0MDpXZW9lRnJXSFItT0U2YUtIM1hOa0FBOzM5Oldlb2VGcldIUi1PRT\n  \"took\" : 5,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 5,\n    \"successful\" : 5,\n    \"failed\" : 0\n  },\n  \"hits\" : {....\n</code></pre>\n\n<p>The result will return a scroll id, it can be used to get the next hits.</p>\n\n<p>The Sample <code>scroll</code> Requests(<code>-d</code> _scroll_id):</p>\n\n<pre><code> $ curl -XGET  'localhost:9200/_search/scroll?scroll=1m&amp;pretty' -d 'cXVlcnlUaGVuRmV0Y2g7NTszMTpXZW9lRnJXSFItT0U2YUtIM1hOa0FBOzMyOldlb2VGcldIUi1PRTZhS0gzWE5rQUE7MzM6V2VvZUZyV0hSLU9FNmFLSDNYT\n mtBQTszNDpXZW9lRnJXSFItT0U2YUtIM1hOa0FBOzM1Oldlb2VGcldIUi1PRTZhS0gzWE5rQUE7MDs='\n</code></pre>\n\n<p>The Official Document: <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-scroll.html\" rel=\"nofollow\">Scroll</a></p>\n"}], "owner": {"reputation": 180, "user_id": 4852410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PFLoV.jpg?s=128&g=1", "display_name": "Duck", "link": "https://stackoverflow.com/users/4852410/duck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1535, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543439920, "creation_date": 1433967882, "question_id": 30766615, "link": "https://stackoverflow.com/questions/30766615/elasticsearch-get-search-results-in-batches", "title": "Elasticsearch get search results in batches?", "body": "<p>When I am querying Elasticsearch with the Python Elasticsearch API, I get around 5000 results. Setting the \"size\" parameter in the search query to a larger number than the number of results leads to the following Java OOM error:</p>\n\n<pre><code>File \"MGDFinder.py\", line 114, in &lt;module&gt;\n  res = es.search(index=\"_all\", body=queryMaker(state))\nFile \"/usr/local/lib/python2.7/dist-packages/elasticsearch/client/utils.py\", line 68, in _wrapped\n  return func(*args, params=params, **kwargs)\nFile \"/usr/local/lib/python2.7/dist-packages/elasticsearch/client/__init__.py\", line 440, in search\n  params=params, body=body)\nFile \"/usr/local/lib/python2.7/dist-packages/elasticsearch/transport.py\", line 276, in perform_request\n  status, headers, data = connection.perform_request(method, url, params, body, ignore=ignore, timeout=timeout)\nFile \"/usr/local/lib/python2.7/dist-packages/elasticsearch/connection/http_urllib3.py\", line 55, in perform_request\n  self._raise_error(response.status, raw_data)\nFile \"/usr/local/lib/python2.7/dist-packages/elasticsearch/connection/base.py\", line 97, in _raise_error\n  raise HTTP_EXCEPTIONS.get(status_code, TransportError)(status_code, error_message, additional_info)\nelasticsearch.exceptions.TransportError: TransportError(500, u'OutOfMemoryError[Java heap space]')\n</code></pre>\n\n<p>I notice that this happens when the size is set to even just 700. I don't want to increase my Java heap size. Is there a way I can perform my search in batches of 500?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 5909, "user_id": 500207, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DsvTT.jpg?s=128&g=1", "display_name": "Ahmed Fasih", "link": "https://stackoverflow.com/users/500207/ahmed-fasih"}, "edited": false, "score": 0, "creation_date": 1434031811, "post_id": 30766512, "comment_id": 49616426, "body": "This is a good question\u2014I thought for sure there&#39;d be some examples on the web that demonstrate how to use Numpy&#39;s <code>legendre</code> library, but couldn&#39;t find any. Now your question will pop up whenever any poor soul searches for an example!"}], "answers": [{"comments": [{"owner": {"reputation": 777, "user_id": 3421870, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/qnSg2.jpg?s=128&g=1", "display_name": "Palmetto_Girl86", "link": "https://stackoverflow.com/users/3421870/palmetto-girl86"}, "edited": false, "score": 0, "creation_date": 1433968219, "post_id": 30766666, "comment_id": 49585475, "body": "Is there a more elegant way than actually defining the polynomial by hand?  The only reason I ask is, if I change the degree of the polynomial in the future, I&#39;d have to go back and change this function as well.  Otherwise, this option really has merit!  :)"}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "reply_to_user": {"reputation": 777, "user_id": 3421870, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/qnSg2.jpg?s=128&g=1", "display_name": "Palmetto_Girl86", "link": "https://stackoverflow.com/users/3421870/palmetto-girl86"}, "edited": false, "score": 1, "creation_date": 1433968280, "post_id": 30766666, "comment_id": 49585515, "body": "You could write an anonymous function, it depends. You could dynamically define the number of parameters and then slowly refine how you define the polynomial.  I&#39;ll add an edit."}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "reply_to_user": {"reputation": 777, "user_id": 3421870, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/qnSg2.jpg?s=128&g=1", "display_name": "Palmetto_Girl86", "link": "https://stackoverflow.com/users/3421870/palmetto-girl86"}, "edited": false, "score": 1, "creation_date": 1433968559, "post_id": 30766666, "comment_id": 49585699, "body": "Added an edit. This would be an example of dynamically defining a mathematical function within a limited scope."}, {"owner": {"reputation": 777, "user_id": 3421870, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/qnSg2.jpg?s=128&g=1", "display_name": "Palmetto_Girl86", "link": "https://stackoverflow.com/users/3421870/palmetto-girl86"}, "edited": false, "score": 1, "creation_date": 1433968643, "post_id": 30766666, "comment_id": 49585742, "body": "I&#39;m going to give this a quick test, but this is probably going to be the accepted answer.  This is straightforward and transparent, two things I need at this stage of my Python career.  Thanks much!"}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "reply_to_user": {"reputation": 777, "user_id": 3421870, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/qnSg2.jpg?s=128&g=1", "display_name": "Palmetto_Girl86", "link": "https://stackoverflow.com/users/3421870/palmetto-girl86"}, "edited": false, "score": 0, "creation_date": 1433968755, "post_id": 30766666, "comment_id": 49585807, "body": "Sorry I made a typo. Fixed that. Was trying to index -0 when it should have been -1."}, {"owner": {"reputation": 5909, "user_id": 500207, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DsvTT.jpg?s=128&g=1", "display_name": "Ahmed Fasih", "link": "https://stackoverflow.com/users/500207/ahmed-fasih"}, "edited": false, "score": 2, "creation_date": 1433969005, "post_id": 30766666, "comment_id": 49585952, "body": "Make sure you use <a href=\"http://mathworld.wolfram.com/HornersRule.html\" rel=\"nofollow noreferrer\">Horner&#39;s rule</a> to get good numerical stability. You never want to evaluate a polynomial as <code>a + b*x + c*x**2 + ...</code>. Horner says <code>a + x*(b + x*(c + ...))</code>. <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.polynomial.polynomial.polyval.html\" rel=\"nofollow noreferrer\">Numpy&#39;s <code>polyval</code></a> uses Horner&#39;s rule of course. And <a href=\"http://rosettacode.org/wiki/Horner%27s_rule_for_polynomial_evaluation#Python\" rel=\"nofollow noreferrer\">Rosetta Code</a> is as always useful."}, {"owner": {"reputation": 777, "user_id": 3421870, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/qnSg2.jpg?s=128&g=1", "display_name": "Palmetto_Girl86", "link": "https://stackoverflow.com/users/3421870/palmetto-girl86"}, "edited": false, "score": 0, "creation_date": 1433971453, "post_id": 30766666, "comment_id": 49587284, "body": "One last related question... When I use legendre.Legendre.fit() to obtain my coefficients, they are returned as:   leg([  7.87390855e+03   2.18846710e+02  -6.30970342e-01   5.06784198e+00]).  When I try to access them like I would the elements of a typical array, I get the error message:  &quot;TypeError: &#39;Legendre&#39; object does not support indexing&quot;.  If I can&#39;t index, how am I supposed to get at the coefficients?"}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "edited": false, "score": 1, "creation_date": 1433971959, "post_id": 30766666, "comment_id": 49587550, "body": "Within what framework are these grabbed? Print dir(variable) and then it should tell you how to return a tuple or list."}], "tags": [], "owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "is_accepted": true, "score": 1, "last_activity_date": 1433969467, "last_edit_date": 1433969467, "creation_date": 1433968032, "answer_id": 30766666, "question_id": 30766512, "link": "https://stackoverflow.com/questions/30766512/obtaining-legendre-polynomial-form-once-legendre-coefficients-are-determined/30766666#30766666", "title": "Obtaining Legendre polynomial form once Legendre coefficients are determined", "body": "<p>Once you have a function, you can just generate a numpy array for the timepoints:</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; timepoints = [1,3,7,15,16,17,19]\n&gt;&gt;&gt; myarray = np.array(timepoints)\n&gt;&gt;&gt; def mypolynomial(bins, pfinal):   #pfinal is just the estimate of the final array (i'll do quadratic)\n...     a,b,c = pfinal  # obviously, for a*x^2 + b*x + c\n...     return (a*bins**2) + b*bins + c\n&gt;&gt;&gt; mypolynomial(myarray, (1,1,0))\narray([  2,  12,  56, 240, 272, 306, 380])\n</code></pre>\n\n<p>It automatically evaluates it for each timepoint is in the numpy array.</p>\n\n<p>Now all you have to do is rewrite mypolynomial to go from a simple quadratic example to a proper one for a Legendre polynomial. Treat the function as if it were evaluating a float to return the value, and when called on the numpy array it will automatically evaluate it for each value.</p>\n\n<p>EDIT:\nLet's say I wanted to generalize this to all standard polynomials:</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; timepoints = [1,3,7,15,16,17,19]\n&gt;&gt;&gt; myarray = np.array(timepoints)\n&gt;&gt;&gt; def mypolynomial(bins, pfinal):   #pfinal is just the estimate of the final array (i'll do quadratic)\n&gt;&gt;&gt;     hist = np.zeros((1, len(myarray)))    # define blank return\n...     for i in range(len(pfinal)):\n...         # fixed a typo here, was pfinal[-i] which would give -0 rather than -1, since negative indexing starts at -1, not -0\n...         const = pfinal[-i-1]    # negative index to go from 0 exponent to highest exponent\n...         hist += const*(bins**i)\n...     return hist\n&gt;&gt;&gt; mypolynomial(myarray, (1,1,0))\narray([  2,  12,  56, 240, 272, 306, 380])\n</code></pre>\n\n<p>EDIT2: Typo fix</p>\n\n<p>EDIT3:</p>\n\n<p>@Ahmed is perfect right when he states Homer's rule is good for numerical stability. The implementation here would be as follows:</p>\n\n<pre><code>&gt;&gt;&gt; def horner(coeffs, x):\n...     acc = 0\n...     for c in coeffs:\n...         acc = acc * x + c\n...     return acc\n&gt;&gt;&gt; horner((1,1,0), myarray)\narray([  2,  12,  56, 240, 272, 306, 380])\n</code></pre>\n\n<p>Slightly modified to keep the same argument order as before, from the code here:\n<a href=\"http://rosettacode.org/wiki/Horner%27s_rule_for_polynomial_evaluation#Python\" rel=\"nofollow\">http://rosettacode.org/wiki/Horner%27s_rule_for_polynomial_evaluation#Python</a></p>\n"}, {"tags": [], "owner": {"reputation": 5909, "user_id": 500207, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DsvTT.jpg?s=128&g=1", "display_name": "Ahmed Fasih", "link": "https://stackoverflow.com/users/500207/ahmed-fasih"}, "is_accepted": false, "score": 1, "last_activity_date": 1434031584, "creation_date": 1434031584, "answer_id": 30783155, "question_id": 30766512, "link": "https://stackoverflow.com/questions/30766512/obtaining-legendre-polynomial-form-once-legendre-coefficients-are-determined/30783155#30783155", "title": "Obtaining Legendre polynomial form once Legendre coefficients are determined", "body": "<p>When you're using a nice library to fit polynomials, the library will in my experience usually have a function to evaluate them. So I think it <em>is</em> useful to know how you're generating these coefficients.</p>\n\n<p>In the example below, I used two functions in numpy, <a href=\"http://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.polynomial.legendre.legfit.html\" rel=\"nofollow noreferrer\"><code>legfit</code></a> and <a href=\"http://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.polynomial.legendre.legval.html\" rel=\"nofollow noreferrer\"><code>legval</code></a> which made it trivial to both fit and evaluate the Legendre polynomials without any need to invoke Horner's rule or do the bookkeeping yourself. (Though I do use Horner's rule to generate some example data.)</p>\n\n<p>Here's a complete example where I generate some sparse data from a known polynomial, fit a Legendre polynomial to it, evaluate that polynomial on a dense grid, and plot. Note that the fitting and evaluating part takes <em>three lines</em> thanks to the numpy library doing all the heavy lifting.</p>\n\n<p>It produces the following figure:\n<img src=\"https://i.stack.imgur.com/IDxZk.png\" alt=\"Legendre fitting and evaluation\"></p>\n\n<pre><code>import numpy as np\n### Setup code\ndef horner(coeffs, x):\n    \"\"\"Evaluate a polynomial at a point or array\"\"\"\n    acc = 0.0\n    for c in reversed(coeffs):\n        acc = acc * x + c\n    return acc\n\nx = np.random.rand(10) * 10\ntrue_coefs = [0.1, 0.3, 0.5]\ny = horner(true_coefs, x)\n\n### Fit and evaluate\nlegendre_coefs = np.polynomial.legendre.legfit(x, y, 2)\nnew_x = np.linspace(0, 10)\nnew_y = np.polynomial.legendre.legval(new_x, legendre_coefs)\n\n### Plotting only\ntry:\n    import pylab\n    pylab.ion() # turn on interactive plotting\n    pylab.figure()\n    pylab.plot(x, y, 'o', new_x, new_y, '-')\n    pylab.xlabel('x')\n    pylab.ylabel('y')\n    pylab.title('Fitting Legendre polynomials and evaluating them')\n    pylab.legend(['original sparse data', 'fit'])\nexcept:\n    print(\"Can't start plots.\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 669, "user_id": 1487355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96dd777e397ab128fedab46af97a3a4a?s=128&d=identicon&r=PG", "display_name": "Charles Harris", "link": "https://stackoverflow.com/users/1487355/charles-harris"}, "is_accepted": false, "score": 2, "last_activity_date": 1434255681, "creation_date": 1434255681, "answer_id": 30825913, "question_id": 30766512, "link": "https://stackoverflow.com/questions/30766512/obtaining-legendre-polynomial-form-once-legendre-coefficients-are-determined/30825913#30825913", "title": "Obtaining Legendre polynomial form once Legendre coefficients are determined", "body": "<p>To simplify Ahmed's example</p>\n\n<pre><code>In [1]: from numpy.polynomial import Polynomial, Legendre\n\nIn [2]: p = Polynomial([0.5, 0.3, 0.1])\n\nIn [3]: x = np.random.rand(10) * 10\n\nIn [4]: y = p(x)\n\nIn [5]: pfit = Legendre.fit(x, y, 2)\n\nIn [6]: plot(*pfit.linspace())\nOut[6]: [&lt;matplotlib.lines.Line2D at 0x7f815364f310&gt;]\n\nIn [7]: plot(x, y, 'o')\nOut[7]: [&lt;matplotlib.lines.Line2D at 0x7f81535d8bd0&gt;]\n</code></pre>\n\n<p>The Legendre functions are scaled and offset, as the data should be confined to the interval [-1, 1] to get any advantage over the usual power basis. If you want the coefficients for plain old Legendre functions</p>\n\n<pre><code>In [8]: pfit.convert()\nOut[8]: Legendre([ 0.53333333,  0.3       ,  0.06666667], [-1.,  1.], [-1.,  1.])\n</code></pre>\n\n<p>But that isn't recommended.</p>\n"}], "owner": {"reputation": 777, "user_id": 3421870, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/qnSg2.jpg?s=128&g=1", "display_name": "Palmetto_Girl86", "link": "https://stackoverflow.com/users/3421870/palmetto-girl86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1525, "favorite_count": 0, "accepted_answer_id": 30766666, "answer_count": 3, "score": 1, "last_activity_date": 1434255681, "creation_date": 1433967555, "question_id": 30766512, "link": "https://stackoverflow.com/questions/30766512/obtaining-legendre-polynomial-form-once-legendre-coefficients-are-determined", "title": "Obtaining Legendre polynomial form once Legendre coefficients are determined", "body": "<p>I have obtained the coefficients for the Legendre polynomial that best fits my data.  Now I am needing to determine the value of that polynomial at each time-step of my data.  I need to do this so that I can subtract the fit from my data.  I have looked at the documentation for the Legendre module, and I'm not sure if I just don't understand my options or if there isn't a native tool in place for what I want.  If my data-points were evenly spaced, linspace would be a good option, but that's not the case here.  Does anyone have a suggestion for what to try?</p>\n\n<p>For those who would like to demand a minimum working example of code, just use a random array, get the coefficients, and tell me from there how you would proceed.  The values themselves don't matter.  It's the technique that I'm asking about here.  Thanks.</p>\n"}, {"tags": ["python", "python-3.x", "pip", "virtualenv"], "comments": [{"owner": {"reputation": 2403, "user_id": 3190054, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b7de233f9b761d1d0d75d64b608aca88?s=128&d=identicon&r=PG&f=1", "display_name": "kezzos", "link": "https://stackoverflow.com/users/3190054/kezzos"}, "edited": false, "score": 0, "creation_date": 1433967807, "post_id": 30766490, "comment_id": 49585193, "body": "Are you using 3.4 or greater?"}, {"owner": {"reputation": 3007, "user_id": 1423333, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/d8PdR.png?s=128&g=1", "display_name": "J&#246;rn Hees", "link": "https://stackoverflow.com/users/1423333/j%c3%b6rn-hees"}, "edited": false, "score": 0, "creation_date": 1433969141, "post_id": 30766490, "comment_id": 49586021, "body": "can you show us how you set up the virtualenv, activate it and try to run pip from within it?"}], "answers": [{"tags": [], "owner": {"reputation": 7294, "user_id": 4183498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/USkeW.jpg?s=128&g=1", "display_name": "Du\u0161an Ma\u010far", "link": "https://stackoverflow.com/users/4183498/du%c5%a1an-ma%c4%8far"}, "is_accepted": false, "score": 0, "last_activity_date": 1434787065, "creation_date": 1434787065, "answer_id": 30951676, "question_id": 30766490, "link": "https://stackoverflow.com/questions/30766490/pip-missing-from-bin-in-virtualenv/30951676#30951676", "title": "pip missing from bin in virtualenv", "body": "<p><a href=\"https://robinwinslow.co.uk/2013/12/26/python-3-4-virtual-environment/\" rel=\"nofollow\">Using a virtual environment with Python 3.4</a> provides helpful information about dealing with Python 3.x and virtualenv/pyevn.</p>\n\n<p>Find instruction about how to install pip manually on <a href=\"https://pip.pypa.io/en/latest/installing.html#install-pip\" rel=\"nofollow\">pip.pypa.io</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 3450, "user_id": 948866, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/51be4b39df7f8f8c5bc66c9767324f3c?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/948866/dave"}, "is_accepted": false, "score": 0, "last_activity_date": 1456440348, "last_edit_date": 1495541250, "creation_date": 1456440348, "answer_id": 35639939, "question_id": 30766490, "link": "https://stackoverflow.com/questions/30766490/pip-missing-from-bin-in-virtualenv/35639939#35639939", "title": "pip missing from bin in virtualenv", "body": "<p>The Red Hat yum package of Python 3.4 is broken, with pip missing.  Other Python 3.4+ distributions might have the same problem.</p>\n\n<p>When you create a virtual environment with:</p>\n\n<pre><code>pyvenv-3.4 py3\nsource py3/bin/activate\n</code></pre>\n\n<p>the environment should include pip automatically (in the environment/bin directory, not globally).  If it does not, try downloading the pip and setuptools wheels manually as described in <a href=\"https://stackoverflow.com/a/33767179/948866\">https://stackoverflow.com/a/33767179/948866</a>.  It's a little more work up front than installing pip the old way, but it makes pyvenv work properly.</p>\n"}], "owner": {"reputation": 93, "user_id": 2572521, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3e30f563a915ec1ccf1db98ce66f8950?s=128&d=identicon&r=PG", "display_name": "user2572521", "link": "https://stackoverflow.com/users/2572521/user2572521"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 644, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556185828, "creation_date": 1433967489, "last_edit_date": 1556185828, "question_id": 30766490, "link": "https://stackoverflow.com/questions/30766490/pip-missing-from-bin-in-virtualenv", "title": "pip missing from bin in virtualenv", "body": "<p><code>pip</code> is installing to global location rather than in the venv. I tried a lot of things but none worked. I found out that pip3 is missing from <code>bin</code> in my vienv. I have tried all of the below:\n<a href=\"https://stackoverflow.com/questions/20952797/pip-installing-in-global-site-packages-instead-of-virtualenv\">pip installing in global site-packages instead of virtualenv</a> and\n<a href=\"http://w3facility.org/question/pip-installing-in-global-site-packages-instead-of-virtualenv/\" rel=\"nofollow noreferrer\">http://w3facility.org/question/pip-installing-in-global-site-packages-instead-of-virtualenv/</a>\nAnd many more...if you need i can paste more links. Please help.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 2830, "user_id": 856070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3aeef5f536776e6a56b1581a2a0fee?s=128&d=identicon&r=PG", "display_name": "jcfollower", "link": "https://stackoverflow.com/users/856070/jcfollower"}, "edited": false, "score": 0, "creation_date": 1433967986, "post_id": 30766448, "comment_id": 49585315, "body": "Does adding it to the settings.py file not work well enough?"}, {"owner": {"reputation": 311, "user_id": 840769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ca3016e74573ff54a94c1fc8296ee332?s=128&d=identicon&r=PG", "display_name": "moonkey", "link": "https://stackoverflow.com/users/840769/moonkey"}, "reply_to_user": {"reputation": 2830, "user_id": 856070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3aeef5f536776e6a56b1581a2a0fee?s=128&d=identicon&r=PG", "display_name": "jcfollower", "link": "https://stackoverflow.com/users/856070/jcfollower"}, "edited": false, "score": 0, "creation_date": 1433969794, "post_id": 30766448, "comment_id": 49586396, "body": "Thanks, that should work. But as this is app specific, or even on a smaller scale, it would be better if there is a way to control its scope. Is there a way to maintain it in the memory but not global? Or add a global variable in a view file rather than &#39;settings.py&#39;, so for readability&#39;s sake."}], "answers": [{"tags": [], "owner": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "is_accepted": false, "score": 0, "last_activity_date": 1433987096, "last_edit_date": 1433987096, "creation_date": 1433975389, "answer_id": 30768416, "question_id": 30766448, "link": "https://stackoverflow.com/questions/30766448/maintain-global-resource-in-django/30768416#30768416", "title": "Maintain global resource in Django", "body": "<p>Put the parser creation code at the module level (e.g. in <code>views.py</code>) instead of inside the function. It will get called once, when the module is first imported.</p>\n\n<p>Of course, depending on how your server works, there will probably be multiple instances running, so the code will run each time a new process is started. If startup time were a real concern, you would probably want to look into running it in a separate process and using IPC.</p>\n\n<p>But usually it's sufficient to just run the code at module import time.</p>\n"}], "owner": {"reputation": 311, "user_id": 840769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ca3016e74573ff54a94c1fc8296ee332?s=128&d=identicon&r=PG", "display_name": "moonkey", "link": "https://stackoverflow.com/users/840769/moonkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433987096, "creation_date": 1433967360, "question_id": 30766448, "link": "https://stackoverflow.com/questions/30766448/maintain-global-resource-in-django", "title": "Maintain global resource in Django", "body": "<p>I am writing a prototype system involving some Natural Language Processing.\nSo I am using the Stanford parser in nltk.</p>\n\n<p>So in the view function, I will call a function which will load the parser, and parse a sentence. But repeatedly loading this parser is totally a waste of resource and time. Is there any way to maintain the parser in a global scale, and just use it anytime I want.</p>\n\n<pre><code>os.environ['STANFORD_PARSER'] = os.path.join(\n    os.path.expanduser('~'), 'stanford-parser/stanford-parser.jar')\nos.environ['STANFORD_MODELS'] = os.path.join(\n    os.path.expanduser('~'), 'stanford-parser/stanford-parser-3.5.2-models.jar')\nparser = nltk.parse.stanford.StanfordParser(\n    model_path=\"edu/stanford/nlp/models/lexparser/englishPCFG.ser.gz\")\nparsed = parser.parse(sentence_which_differs_from_time_to_time)\n</code></pre>\n"}, {"tags": ["python", "string-formatting"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1433967441, "post_id": 30766429, "comment_id": 49584975, "body": "Your return value is <i>already</i> a float."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1433967517, "post_id": 30766429, "comment_id": 49585017, "body": "Instead, I am getting an error about <code>%b</code> being an unsupported format character."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433967588, "post_id": 30766429, "comment_id": 49585066, "body": "Your <code>pass</code> is not doing anything"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1433967605, "post_id": 30766429, "comment_id": 49585077, "body": "This entire method could just be <code>def isAngram1(s1, s2): return collections.Counter(s1) == collections.Counter(s2)</code>"}, {"owner": {"reputation": 1878, "user_id": 98599, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bdb57938c676236c97c70ecdb12089aa?s=128&d=identicon&r=PG", "display_name": "Tuan Anh Hoang-Vu", "link": "https://stackoverflow.com/users/98599/tuan-anh-hoang-vu"}, "edited": false, "score": 0, "creation_date": 1433967615, "post_id": 30766429, "comment_id": 49585087, "body": "Replace <code>%b</code> by <code>%s</code> and everything works perfectly"}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 1, "creation_date": 1433967738, "post_id": 30766429, "comment_id": 49585158, "body": "Or <code>def isAnagram1(s1, s2): return sorted(s1) == sorted(s2)</code>"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 21144, "user_id": 478656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fd656a5e8d2a51290877d695649456ad?s=128&d=identicon&r=PG", "display_name": "TessellatingHeckler", "link": "https://stackoverflow.com/users/478656/tessellatingheckler"}, "edited": false, "score": 0, "creation_date": 1433967824, "post_id": 30766429, "comment_id": 49585201, "body": "@TessellatingHeckler No that will not work, it removes duplicates, which <code>a</code> is not an anagram of <code>aaa</code>"}, {"owner": {"reputation": 21144, "user_id": 478656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fd656a5e8d2a51290877d695649456ad?s=128&d=identicon&r=PG", "display_name": "TessellatingHeckler", "link": "https://stackoverflow.com/users/478656/tessellatingheckler"}, "edited": false, "score": 0, "creation_date": 1433967862, "post_id": 30766429, "comment_id": 49585226, "body": "Ah dang, yes you&#39;re right. Removed it."}, {"owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 0, "creation_date": 1433967960, "post_id": 30766429, "comment_id": 49585295, "body": "Technically <code>collections.Counter</code> has O(n) complexity where as <code>sorted</code> is O(n log n). But for small (even for large values of short) strings, sorted will be much faster in Python. For long strings... timsort ends up being O(n) anway since there is only a finite number of distinct values. sorted strings are also hashable which is important if you are looking for anagrams in a big list of words"}, {"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1433967985, "post_id": 30766429, "comment_id": 49585314, "body": "<a href=\"http://stackoverflow.com/a/14990938/2733506\">stackoverflow.com/a/14990938/2733506</a>"}, {"owner": {"reputation": 149, "user_id": 4996554, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35c2d9327f33be2f13eba71bf6231e34?s=128&d=identicon&r=PG&f=1", "display_name": "abe_of_spades", "link": "https://stackoverflow.com/users/4996554/abe-of-spades"}, "edited": false, "score": 0, "creation_date": 1433968020, "post_id": 30766429, "comment_id": 49585340, "body": "Thanks for the comments, folks. My current focus is not to find a way to compare two anagrams, but to determine if there is a way to convert a single tuple value among many while calling the function from elsewhere"}, {"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1433968110, "post_id": 30766429, "comment_id": 49585409, "body": "@&#192;bh&#236;sh&#233;kT&#236;rkey since speed (execution time) is basically one of the most important things related to programming you probably should be interested in different ways to compare two strings"}, {"owner": {"reputation": 149, "user_id": 4996554, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35c2d9327f33be2f13eba71bf6231e34?s=128&d=identicon&r=PG&f=1", "display_name": "abe_of_spades", "link": "https://stackoverflow.com/users/4996554/abe-of-spades"}, "reply_to_user": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 0, "creation_date": 1433969062, "post_id": 30766429, "comment_id": 49585985, "body": "@JohnLaRooy There you go, I&#39;ve edited the post to include the whole program."}, {"owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 0, "creation_date": 1433969696, "post_id": 30766429, "comment_id": 49586328, "body": "Your <code>print</code> statement indicates you are using Python2. You should be using <code>raw_input</code> instead of the dangerous <code>input</code>!"}, {"owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 0, "creation_date": 1433969990, "post_id": 30766429, "comment_id": 49586502, "body": "Ok, I have changed my answer to match the new version of the question :)"}, {"owner": {"reputation": 149, "user_id": 4996554, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35c2d9327f33be2f13eba71bf6231e34?s=128&d=identicon&r=PG&f=1", "display_name": "abe_of_spades", "link": "https://stackoverflow.com/users/4996554/abe-of-spades"}, "reply_to_user": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 0, "creation_date": 1433972391, "post_id": 30766429, "comment_id": 49587757, "body": "@JohnLaRooy Thank you very much, sir! The missing &quot;\\&quot; seemed to do the trick; I wonder why that didn&#39;t show up as a flake8 warning (I used max-complexity 10). Please excuse me, I&#39;m relatively new to python actually..."}], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 4996554, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35c2d9327f33be2f13eba71bf6231e34?s=128&d=identicon&r=PG&f=1", "display_name": "abe_of_spades", "link": "https://stackoverflow.com/users/4996554/abe-of-spades"}, "edited": false, "score": 0, "creation_date": 1433968187, "post_id": 30766538, "comment_id": 49585453, "body": "Thanks, but I tried making the change and it still shows the same error: Traceback (most recent call last):   File &quot;&lt;pyshell#1&gt;&quot;, line 1, in &lt;module&gt;     main()   File &quot;/Volumes/Macintosh HD 2/Academic work/CST - 501 (Coding Assignments)/Coding/Problems/isAnagram.py&quot;, line 52, in main     &quot;Operation required %10.7f seconds&quot; % isAnagram1(str1, str2) TypeError: not all arguments converted during string formatting"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "reply_to_user": {"reputation": 149, "user_id": 4996554, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35c2d9327f33be2f13eba71bf6231e34?s=128&d=identicon&r=PG&f=1", "display_name": "abe_of_spades", "link": "https://stackoverflow.com/users/4996554/abe-of-spades"}, "edited": false, "score": 0, "creation_date": 1433968406, "post_id": 30766538, "comment_id": 49585601, "body": "@&#192;bh&#236;sh&#233;kT&#236;rkey you use one value in the formatting string and return a tuple of 2 values from <code>isAnagram1</code>"}, {"owner": {"reputation": 149, "user_id": 4996554, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35c2d9327f33be2f13eba71bf6231e34?s=128&d=identicon&r=PG&f=1", "display_name": "abe_of_spades", "link": "https://stackoverflow.com/users/4996554/abe-of-spades"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1433968667, "post_id": 30766538, "comment_id": 49585754, "body": "@PeterWood How is that, since I&#39;m using two format strings in the statement: print &quot;Is Anagram1: %b, Operation required %10.7f seconds&quot; % isAnagram1(str1, str2)"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "reply_to_user": {"reputation": 149, "user_id": 4996554, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35c2d9327f33be2f13eba71bf6231e34?s=128&d=identicon&r=PG&f=1", "display_name": "abe_of_spades", "link": "https://stackoverflow.com/users/4996554/abe-of-spades"}, "edited": false, "score": 0, "creation_date": 1433970693, "post_id": 30766538, "comment_id": 49586884, "body": "@&#192;bh&#236;sh&#233;kT&#236;rkey <code>&quot;Operation required %10.7f seconds&quot;</code> only has one."}], "tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": true, "score": 1, "last_activity_date": 1433970182, "last_edit_date": 1433970182, "creation_date": 1433967624, "answer_id": 30766538, "question_id": 30766429, "link": "https://stackoverflow.com/questions/30766429/formatting-a-time-value/30766538#30766538", "title": "Formatting a time value", "body": "<p>You are missing \"\\\" for the line continuation. So you have a <code>print</code> statement which will just print the literal <code>\"Is Anagram1: %s, \"</code>. The next line is a separate expression that Python tries to evaluate.</p>\n\n<p>Also you need to use <code>raw_input</code> since this is Python2</p>\n\n<p>Here is the fixed <code>main</code> function</p>\n\n<pre><code>def main():\n    str1 = raw_input(\"Enter string 1: \")\n    str2 = raw_input(\"Enter string 2: \")\n\n    print \"Is Anagram1: %s, \" \\\n    \"Operation required %10.7f seconds\" % isAnagram1(str1, str2)\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 4996554, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/35c2d9327f33be2f13eba71bf6231e34?s=128&d=identicon&r=PG&f=1", "display_name": "abe_of_spades", "link": "https://stackoverflow.com/users/4996554/abe-of-spades"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "accepted_answer_id": 30766538, "answer_count": 1, "score": 0, "last_activity_date": 1433970182, "creation_date": 1433967282, "last_edit_date": 1433968871, "question_id": 30766429, "link": "https://stackoverflow.com/questions/30766429/formatting-a-time-value", "title": "Formatting a time value", "body": "<p>In the following program I am returning a boolean value and a value representing the execution time in a tuple:</p>\n\n<pre><code>import time\n\n\n# O(n) time\ndef isAnagram1(s1, s2):\n    start = time.time()\n    letterlist1 = [0] * 26\n    letterlist2 = [0] * 26\n\n    for i in xrange(0, len(s1)):\n        pos = ord(s1[i]) - ord('a')\n        letterlist1[pos] = letterlist1[pos] + 1\n\n    for i in xrange(0, len(s2)):\n        pos = ord(s2[i]) - ord('a')\n        letterlist2[pos] = letterlist2[pos] + 1\n\n    for i in xrange(0, 26):\n        if letterlist1[i] != letterlist2[i]:\n            end = time.time()\n            return False, end-start\n\n    end = time.time()\n    return True, end-start\n    pass\n\n\ndef main():\n    str1 = input(\"Enter string 1: \")\n    str2 = input(\"Enter string 2: \")\n\n    print \"Is Anagram1: %s, \"\n    \"Operation required %10.7f seconds\" % isAnagram1(str1, str2)\n</code></pre>\n\n<p>However, while invoking this function I am required to convert the time value into a floating point value in order to print it out appropriately. If not, it gives the error: <strong>TypeError: not all arguments converted during string formatting</strong>. I guess I have to find a way to get the single value representing the execution time converted.</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["python", "python-2.7", "python-requests", "nltk", "python-multiprocessing"], "comments": [{"owner": {"reputation": 1036, "user_id": 3397458, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45d3513991962fcddfcfe942f762c981?s=128&d=identicon&r=PG&f=1", "display_name": "Romain G", "link": "https://stackoverflow.com/users/3397458/romain-g"}, "edited": false, "score": 0, "creation_date": 1433969106, "post_id": 30766419, "comment_id": 49586007, "body": "The problem is not related to SSL, replacing the github api URL by &#39;<a href=\"http://google.com\" rel=\"nofollow noreferrer\">google.com</a>&#39; doesn&#39;t change the behaviour with/without nltk imported."}, {"owner": {"reputation": 1036, "user_id": 3397458, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45d3513991962fcddfcfe942f762c981?s=128&d=identicon&r=PG&f=1", "display_name": "Romain G", "link": "https://stackoverflow.com/users/3397458/romain-g"}, "edited": false, "score": 0, "creation_date": 1433969385, "post_id": 30766419, "comment_id": 49586152, "body": "The problem is not related to <code>requests</code> either. When replacing the call to <code>requests.get</code> by <code>req = urllib2.Request(&#39;http:&#47;&#47;google.com&#39;); handler = urllib2.urlopen(req); print handler.getcode()</code> the problem stays the same."}, {"owner": {"reputation": 1036, "user_id": 3397458, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45d3513991962fcddfcfe942f762c981?s=128&d=identicon&r=PG&f=1", "display_name": "Romain G", "link": "https://stackoverflow.com/users/3397458/romain-g"}, "edited": false, "score": 0, "creation_date": 1433970351, "post_id": 30766419, "comment_id": 49586723, "body": "Upgrading nltk to the last version did not fix the issue either..."}, {"owner": {"reputation": 5648, "user_id": 3122880, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3839f45edaf0820ca5e184cfc6a7f1b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Ojha", "link": "https://stackoverflow.com/users/3122880/vikas-ojha"}, "edited": false, "score": 0, "creation_date": 1433971049, "post_id": 30766419, "comment_id": 49587067, "body": "Try doing the same thing without multiprocessing, i.e., perform it in same process and see what happens."}, {"owner": {"reputation": 1036, "user_id": 3397458, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45d3513991962fcddfcfe942f762c981?s=128&d=identicon&r=PG&f=1", "display_name": "Romain G", "link": "https://stackoverflow.com/users/3397458/romain-g"}, "reply_to_user": {"reputation": 5648, "user_id": 3122880, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3839f45edaf0820ca5e184cfc6a7f1b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Ojha", "link": "https://stackoverflow.com/users/3122880/vikas-ojha"}, "edited": false, "score": 0, "creation_date": 1433971594, "post_id": 30766419, "comment_id": 49587369, "body": "This works, the issue is specific to the request being sent from the child process. This bug has already been reported 2 months ago: <a href=\"https://github.com/nltk/nltk/issues/947\" rel=\"nofollow noreferrer\">github.com/nltk/nltk/issues/947</a>. However, the version of NLTK I&#39;m running has been released in Nov 2012, I&#39;m surprised nobody noticed it sooner."}, {"owner": {"reputation": 5648, "user_id": 3122880, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3839f45edaf0820ca5e184cfc6a7f1b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Ojha", "link": "https://stackoverflow.com/users/3122880/vikas-ojha"}, "edited": false, "score": 0, "creation_date": 1433971805, "post_id": 30766419, "comment_id": 49587475, "body": "Haha, it seems using Nltk and Python Requests in a child process is rare. Try using Thread instead of Process, I was having exactly same issue with some other library and Requests and replacing Process with Thread worked for me. Let me know, if it works, I will post it as an answer."}, {"owner": {"reputation": 1036, "user_id": 3397458, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45d3513991962fcddfcfe942f762c981?s=128&d=identicon&r=PG&f=1", "display_name": "Romain G", "link": "https://stackoverflow.com/users/3397458/romain-g"}, "reply_to_user": {"reputation": 5648, "user_id": 3122880, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3839f45edaf0820ca5e184cfc6a7f1b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Ojha", "link": "https://stackoverflow.com/users/3122880/vikas-ojha"}, "edited": false, "score": 0, "creation_date": 1433973399, "post_id": 30766419, "comment_id": 49588187, "body": "This will work as well ;-) You can post it as an answer, this may be useful for other people. I won&#39;t accept it tho, because with threads you introduce the limitation of the GIL. I agree that it is not relevant for this simple example but in larger applications it may be a concern (and it is one for my actually)"}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1438821990, "post_id": 30766419, "comment_id": 51611489, "body": "have you tried updating your NLTK version?"}, {"owner": {"reputation": 2831, "user_id": 2238779, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ebd0de4dc7ccb94f91a3e68f6e684bc0?s=128&d=identicon&r=PG&f=1", "display_name": "kilgoretrout", "link": "https://stackoverflow.com/users/2238779/kilgoretrout"}, "edited": false, "score": 0, "creation_date": 1448322035, "post_id": 30766419, "comment_id": 55530110, "body": "A similar thing happened to me when importing <code>ipdb</code>. See <a href=\"http://stackoverflow.com/questions/33877491/python-multiprocessing-process-is-killed-by-http-request-if-ipdb-is-imported\">here</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5648, "user_id": 3122880, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3839f45edaf0820ca5e184cfc6a7f1b9?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Ojha", "link": "https://stackoverflow.com/users/3122880/vikas-ojha"}, "is_accepted": false, "score": 1, "last_activity_date": 1433973448, "creation_date": 1433973448, "answer_id": 30768016, "question_id": 30766419, "link": "https://stackoverflow.com/questions/30766419/python-child-process-silently-crashes-when-issuing-an-http-request/30768016#30768016", "title": "Python child process silently crashes when issuing an HTTP request", "body": "<p>It seems using Nltk and Python Requests in a child process is rare. Try using Thread instead of Process, I was having exactly same issue with some other library and Requests and replacing Process with Thread worked for me.</p>\n"}, {"tags": [], "owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "is_accepted": true, "score": 1, "last_activity_date": 1438822201, "creation_date": 1438822201, "answer_id": 31845096, "question_id": 30766419, "link": "https://stackoverflow.com/questions/30766419/python-child-process-silently-crashes-when-issuing-an-http-request/31845096#31845096", "title": "Python child process silently crashes when issuing an HTTP request", "body": "<p>Updating your python libraries and python should resolve the problem:</p>\n\n<pre><code>alvas@ubi:~$ pip freeze | grep nltk\nnltk==3.0.3\nalvas@ubi:~$ pip freeze | grep requests\nrequests==2.7.0\nalvas@ubi:~$ python --version\nPython 2.7.6\nalvas@ubi:~$ lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 14.04.2 LTS\nRelease:    14.04\nCodename:   trusty\n</code></pre>\n\n<p>From code:</p>\n\n<pre><code>from multiprocessing import Process\nimport nltk\nimport time\n\n\ndef child_fn():\n    print \"Fetch URL\"\n    import urllib2\n    print urllib2.urlopen(\"https://www.google.com\").read()[:100]\n    print \"Done\"\n\n\nwhile True:\n    child_process = Process(target=child_fn)\n    child_process.start()\n    child_process.join()\n    print \"Child process returned\"\n    time.sleep(1)\n</code></pre>\n\n<p>[out]:</p>\n\n<pre><code>Fetch URL\n&lt;!doctype html&gt;&lt;html itemscope=\"\" itemtype=\"http://schema.org/WebPage\" lang=\"de\"&gt;&lt;head&gt;&lt;meta content\nDone\nChild process returned\nFetch URL\n&lt;!doctype html&gt;&lt;html itemscope=\"\" itemtype=\"http://schema.org/WebPage\" lang=\"de\"&gt;&lt;head&gt;&lt;meta content\nDone\nChild process returned\nFetch URL\n&lt;!doctype html&gt;&lt;html itemscope=\"\" itemtype=\"http://schema.org/WebPage\" lang=\"de\"&gt;&lt;head&gt;&lt;meta content\nDone\nChild process returned\n</code></pre>\n\n<p>From code:</p>\n\n<pre><code>alvas@ubi:~$ python\nPython 2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from multiprocessing import Process\n&gt;&gt;&gt; import requests\n&gt;&gt;&gt; from pprint import pprint\n&gt;&gt;&gt; Process(target=lambda: pprint(\n...         requests.get('https://api.github.com'))).start()\n&gt;&gt;&gt; &lt;Response [200]&gt;\n\n&gt;&gt;&gt; import nltk\n&gt;&gt;&gt; Process(target=lambda: pprint(\n...         requests.get('https://api.github.com'))).start()\n&gt;&gt;&gt; &lt;Response [200]&gt;\n</code></pre>\n\n<hr>\n\n<p>It should work with <code>python3</code> too:</p>\n\n<pre><code>alvas@ubi:~$ python3\nPython 3.4.0 (default, Jun 19 2015, 14:20:21) \n[GCC 4.8.2] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from multiprocessing import Process\n&gt;&gt;&gt; import requests\n&gt;&gt;&gt; Process(target=lambda: print(requests.get('https://api.github.com'))).start()\n&gt;&gt;&gt; \n&gt;&gt;&gt; &lt;Response [200]&gt;\n\n&gt;&gt;&gt; import nltk\n&gt;&gt;&gt; Process(target=lambda: print(requests.get('https://api.github.com'))).start()\n&gt;&gt;&gt; &lt;Response [200]&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7581, "user_id": 5377805, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a479657355e5a7d6b6a81efd8136db4?s=128&d=identicon&r=PG&f=1", "display_name": "HDJEMAI", "link": "https://stackoverflow.com/users/5377805/hdjemai"}, "edited": false, "score": 0, "creation_date": 1476314320, "post_id": 40009590, "comment_id": 67297752, "body": "Ask a new question if needed. This looks like a comment and not an answer to the actual question."}, {"owner": {"reputation": 411, "user_id": 1286433, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a1fcbce28a1795f008e7b78331cfa47c?s=128&d=identicon&r=PG", "display_name": "Sasinda Rukshan", "link": "https://stackoverflow.com/users/1286433/sasinda-rukshan"}, "reply_to_user": {"reputation": 7581, "user_id": 5377805, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/1a479657355e5a7d6b6a81efd8136db4?s=128&d=identicon&r=PG&f=1", "display_name": "HDJEMAI", "link": "https://stackoverflow.com/users/5377805/hdjemai"}, "edited": false, "score": 0, "creation_date": 1476474173, "post_id": 40009590, "comment_id": 67377875, "body": "Sorry it&#39;s a comment. I still don&#39;t have 50 reputation to comment :)"}, {"owner": {"reputation": 1438, "user_id": 768675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2042d0bca89dd14e95145519f07e9a84?s=128&d=identicon&r=PG", "display_name": "esmit", "link": "https://stackoverflow.com/users/768675/esmit"}, "edited": false, "score": 0, "creation_date": 1519838525, "post_id": 40009590, "comment_id": 85075270, "body": "@SasindaRukshan you now have enough reputation to move this to a comment."}], "tags": [], "owner": {"reputation": 411, "user_id": 1286433, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/a1fcbce28a1795f008e7b78331cfa47c?s=128&d=identicon&r=PG", "display_name": "Sasinda Rukshan", "link": "https://stackoverflow.com/users/1286433/sasinda-rukshan"}, "is_accepted": false, "score": 0, "last_activity_date": 1476312511, "creation_date": 1476312511, "answer_id": 40009590, "question_id": 30766419, "link": "https://stackoverflow.com/questions/30766419/python-child-process-silently-crashes-when-issuing-an-http-request/40009590#40009590", "title": "Python child process silently crashes when issuing an HTTP request", "body": "<p>This issue still seems not solved.\n<a href=\"https://github.com/nltk/nltk/issues/947\" rel=\"nofollow\">https://github.com/nltk/nltk/issues/947</a>\nI think this is a serious issue (unless you are playing with NLTK, doing POCs and trying out models, not actual apps) \nI am running the NLP pipelines in RQ workers (<a href=\"http://python-rq.org/\" rel=\"nofollow\">http://python-rq.org/</a>)</p>\n\n<pre><code>nltk==3.2.1\nrequests==2.9.1\n</code></pre>\n"}], "owner": {"reputation": 1036, "user_id": 3397458, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45d3513991962fcddfcfe942f762c981?s=128&d=identicon&r=PG&f=1", "display_name": "Romain G", "link": "https://stackoverflow.com/users/3397458/romain-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1329, "favorite_count": 0, "accepted_answer_id": 31845096, "answer_count": 3, "score": 6, "last_activity_date": 1476312511, "creation_date": 1433967233, "question_id": 30766419, "link": "https://stackoverflow.com/questions/30766419/python-child-process-silently-crashes-when-issuing-an-http-request", "title": "Python child process silently crashes when issuing an HTTP request", "body": "<p>I'm running into an issue when combining multiprocessing, requests (or urllib2) and nltk. Here is a very simple code:</p>\n\n<pre><code>&gt;&gt;&gt; from multiprocessing import Process\n&gt;&gt;&gt; import requests\n&gt;&gt;&gt; from pprint import pprint\n&gt;&gt;&gt; Process(target=lambda: pprint(\n        requests.get('https://api.github.com'))).start()\n&gt;&gt;&gt; &lt;Response [200]&gt;  # this is the response displayed by the call to `pprint`.\n</code></pre>\n\n<p>A bit more details on what this piece of code does:</p>\n\n<ol>\n<li>Import a few required modules</li>\n<li>Start a child process</li>\n<li>Issue an HTTP GET request to 'api.github.com' from the child process</li>\n<li>Display the result</li>\n</ol>\n\n<p>This is working great. The problem comes when importing nltk:</p>\n\n<pre><code>&gt;&gt;&gt; import nltk\n&gt;&gt;&gt; Process(target=lambda: pprint(\n        requests.get('https://api.github.com'))).start()\n&gt;&gt;&gt; # nothing happens!\n</code></pre>\n\n<p>After having imported NLTK, the requests actually silently crashes the thread (if you try with a named function instead of the lambda function, adding a few <code>print</code> statement before and after the call, you'll see that the execution stops right on the call to <code>requests.get</code>)\nDoes anybody have any idea what in NLTK could explain such behavior, and how to get overcome the issue?</p>\n\n<p>Here are the version I'm using:</p>\n\n<pre><code>$&gt; python --version\nPython 2.7.5\n$&gt; pip freeze | grep nltk\nnltk==2.0.5\n$&gt; pip freeze | grep requests\nrequests==2.2.1\n</code></pre>\n\n<p>I'm running Mac OS X v. 10.9.5.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1433967283, "post_id": 30766412, "comment_id": 49584864, "body": "Why do you need to know? It depends on whom you ask, this isn&#39;t something set in stone anywhere."}, {"owner": {"reputation": 521, "user_id": 2297237, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1ayl6.png?s=128&g=1", "display_name": "Ovi", "link": "https://stackoverflow.com/users/2297237/ovi"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1433967536, "post_id": 30766412, "comment_id": 49585029, "body": "@MartijnPieters I need to know because it&#39;s a question from an assignment I have for my python class haha. I have Python Programming: An introduction to Computer Science by John Zelle, 2nd edition"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 4, "creation_date": 1433967587, "post_id": 30766412, "comment_id": 49585063, "body": "I&#39;d say that for that question the answer would be 3; they want to see if you know what the <code>\\n</code> does, in conjunction with the <code>print()</code> function. This isn&#39;t about line count <i>in general</i>. There is no such concept, really."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1433971591, "post_id": 30766412, "comment_id": 49587367, "body": "Questions of definition are just that: definitions aren&#39;t facts, so there&#39;s no &quot;answer&quot;. Pick a definition that suits your purpose."}], "answers": [{"tags": [], "owner": {"reputation": 1751, "user_id": 3586325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3CRVr.jpg?s=128&g=1", "display_name": "Buzz", "link": "https://stackoverflow.com/users/3586325/buzz"}, "is_accepted": true, "score": 6, "last_activity_date": 1433968890, "creation_date": 1433968890, "answer_id": 30766899, "question_id": 30766412, "link": "https://stackoverflow.com/questions/30766412/are-empty-lines-generally-considered-output/30766899#30766899", "title": "Are empty lines generally considered output?", "body": "<p>If you ran the program your output would look like this:</p>\n\n<pre><code>hi there \n\nhello\n</code></pre>\n\n<p>if you then put that output into a file and ran <code>wc -l file.txt</code> it would return with <code>3 file.txt</code> meaning that were are three lines in the file.</p>\n"}, {"comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1433970361, "post_id": 30767198, "comment_id": 49586730, "body": "<code>print()</code> adds newlines, whereas <code>f.write()</code> does not."}, {"owner": {"reputation": 633, "user_id": 4971327, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fv-Aw4fl5WU/AAAAAAAAAAI/AAAAAAAAAKY/BMSP_nOIyiw/photo.jpg?sz=128", "display_name": "Alex Ivanov", "link": "https://stackoverflow.com/users/4971327/alex-ivanov"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1433971631, "post_id": 30767198, "comment_id": 49587385, "body": "In terminal. If you run the script from something else, it outputs zero lines. But in terminal you can get an empty line just by printing nothing."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1433971856, "post_id": 30767198, "comment_id": 49587502, "body": "<code>print()</code> writes to <code>sys.stdout</code>, and adds a newline unless you tell it not to (by setting the <code>end</code> keyword argument to something else). If you are redirecting <code>sys.stdout</code> then you wouldn&#39;t see that output, but it still produces that output to go <i>somewhere</i>."}, {"owner": {"reputation": 633, "user_id": 4971327, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fv-Aw4fl5WU/AAAAAAAAAAI/AAAAAAAAAKY/BMSP_nOIyiw/photo.jpg?sz=128", "display_name": "Alex Ivanov", "link": "https://stackoverflow.com/users/4971327/alex-ivanov"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1433972148, "post_id": 30767198, "comment_id": 49587646, "body": "AFAIK, &quot;/n&quot; is just a character. It doesn&#39;t produce any line. That&#39;s how terminal renders it. &quot;In computing, a newline, also known as a line ending, end of line (EOL), or line break, is a special character signifying the end of a line of text.&quot;  - <a href=\"http://en.wikipedia.org/wiki/Newline\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Newline</a>"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1433972197, "post_id": 30767198, "comment_id": 49587669, "body": "So why does your answer produce just 1 newline and then count lines, then claim that that produces the same thing as using <code>print()</code>? I&#39;m not sure what you are arguing about now."}, {"owner": {"reputation": 633, "user_id": 4971327, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fv-Aw4fl5WU/AAAAAAAAAAI/AAAAAAAAAKY/BMSP_nOIyiw/photo.jpg?sz=128", "display_name": "Alex Ivanov", "link": "https://stackoverflow.com/users/4971327/alex-ivanov"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1433972452, "post_id": 30767198, "comment_id": 49587785, "body": "But how did you manage &quot;if you then put that output into a file&quot; by copy-paste from sys.stdout? You are a bit of a troll eh?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1433973600, "post_id": 30767198, "comment_id": 49588261, "body": "Uhm, no, I think you may have misunderstood something. I&#39;m explaining how <code>print()</code> <i>works</i>. Redirecting is the act of instructing the shell or console to take the output of a program and write it somewhere else. You may want to watch out with calling people &#39;trolls&#39; when they give you feedback."}, {"owner": {"reputation": 633, "user_id": 4971327, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fv-Aw4fl5WU/AAAAAAAAAAI/AAAAAAAAAKY/BMSP_nOIyiw/photo.jpg?sz=128", "display_name": "Alex Ivanov", "link": "https://stackoverflow.com/users/4971327/alex-ivanov"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1433973660, "post_id": 30767198, "comment_id": 49588285, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/80230/discussion-between-alex-ivanov-and-martijn-pieters\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 633, "user_id": 4971327, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fv-Aw4fl5WU/AAAAAAAAAAI/AAAAAAAAAKY/BMSP_nOIyiw/photo.jpg?sz=128", "display_name": "Alex Ivanov", "link": "https://stackoverflow.com/users/4971327/alex-ivanov"}, "is_accepted": false, "score": -4, "last_activity_date": 1433969995, "creation_date": 1433969995, "answer_id": 30767198, "question_id": 30766412, "link": "https://stackoverflow.com/questions/30766412/are-empty-lines-generally-considered-output/30767198#30767198", "title": "Are empty lines generally considered output?", "body": "<p>I would say two lines.</p>\n\n<pre><code>#!/usr/bin/python\n# -*- coding: utf-8 -*-\n\nf=open('file.txt', 'w')\nf.write(\"Hi there \\n\")\nf.write(\"Hello\")\nf.close()\n\n\ncount=0\nwith open ('file.txt','r') as f:\n    for line in f:\n        count+=1\n\nprint count\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>2\n</code></pre>\n"}], "owner": {"reputation": 521, "user_id": 2297237, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1ayl6.png?s=128&g=1", "display_name": "Ovi", "link": "https://stackoverflow.com/users/2297237/ovi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 30766899, "answer_count": 2, "score": -1, "last_activity_date": 1433969995, "creation_date": 1433967214, "question_id": 30766412, "link": "https://stackoverflow.com/questions/30766412/are-empty-lines-generally-considered-output", "title": "Are empty lines generally considered output?", "body": "<p>If you have a program that is like this for example:</p>\n\n<pre><code> print(\"Hi there \\n\")\n print(\"Hello\")\n</code></pre>\n\n<p>Would this program be considered to have 2 or 3 lines of output?I know blank lines aren't really anything, but it's still something that the program does.</p>\n"}, {"tags": ["python", "indexing", "theano"], "answers": [{"tags": [], "owner": {"reputation": 8680, "user_id": 4013571, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh4.googleusercontent.com/-G_CrKyh2orQ/AAAAAAAAAAI/AAAAAAAAADA/d4aRKztH0r4/photo.jpg?sz=128", "display_name": "Alexander McFarlane", "link": "https://stackoverflow.com/users/4013571/alexander-mcfarlane"}, "is_accepted": true, "score": 2, "last_activity_date": 1433988225, "last_edit_date": 1433988225, "creation_date": 1433987923, "answer_id": 30770321, "question_id": 30766364, "link": "https://stackoverflow.com/questions/30766364/remove-inf-from-theano-array/30770321#30770321", "title": "Remove inf from Theano array", "body": "<p>I found an awkward workaround</p>\n\n<pre><code>import theano\nimport theano.tensor as T\nimport numpy as np\n\nvec = T.vector()\ncompare = T.isinf(vec)\nout = vec[(1-compare).nonzero()]\n\nv = [  1.,   1.,   1.,   1.,  np.inf,   3.,   4.,   5.,   6.,  np.inf]\nv = np.asarray(v)\n\nout.eval({var:v})\narray([ 1.,  1.,  1.,  1.,  3.,  4.,  5.,  6.])\n</code></pre>\n\n<p>For your example:</p>\n\n<pre><code>fin = vec[(1-T.isinf(vec)).nonzero()]\nf = theano.function([vec], fin)\n\nf([1,2,np.inf])\narray([ 1.,  2.])\n</code></pre>\n"}], "owner": {"reputation": 1659, "user_id": 3112506, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8f5e1ba4002954f9d91253ade9da9a19?s=128&d=identicon&r=PG&f=1", "display_name": "Logister", "link": "https://stackoverflow.com/users/3112506/logister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 30770321, "answer_count": 1, "score": 1, "last_activity_date": 1433988225, "creation_date": 1433967043, "last_edit_date": 1433971348, "question_id": 30766364, "link": "https://stackoverflow.com/questions/30766364/remove-inf-from-theano-array", "title": "Remove inf from Theano array", "body": "<p>Supposing I have a vector in Theano and some of the elements are <code>inf</code>, how do I remove them? Consider the following example:</p>\n\n<pre><code>import numpy as np\nimport theano\nfrom theano import tensor\nvec = tensor.dvector('x')\nfin = vec[(~tensor.isinf(vec)).nonzero()]\nf = theano.function([vec], fin)\n</code></pre>\n\n<p>According to the Theano documentation, this should remove the elements via indexing. However, this is not the case as <code>f([1,2,np.inf])</code> returns <code>array([  1.,   2.,  inf])</code>. </p>\n\n<p>How can I do this so that <code>f([1,2,np.inf])</code> returns <code>array([  1.,   2.])</code> ?</p>\n"}, {"tags": ["python", "csv", "pandas"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1433967387, "post_id": 30766357, "comment_id": 49584942, "body": "Can you try this <code>data[&#39;reg_per&#39;] = pd.Series(reg_per, index = data.index)</code> what you&#39;re doing is adding an attribute rather than a column"}, {"owner": {"reputation": 26037, "user_id": 542190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3bb1f122c476561bb9a98a1523e8b5e?s=128&d=identicon&r=PG", "display_name": "filmor", "link": "https://stackoverflow.com/users/542190/filmor"}, "edited": false, "score": 1, "creation_date": 1433974231, "post_id": 30766357, "comment_id": 49588501, "body": "Also, you can just assign <code>reg_per</code> directly, no need to build a series from it."}], "answers": [{"comments": [{"owner": {"reputation": 446, "user_id": 1933152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54256485efc299be6cd8b0a61a49577e?s=128&d=identicon&r=PG", "display_name": "Lars Larsson", "link": "https://stackoverflow.com/users/1933152/lars-larsson"}, "edited": false, "score": 0, "creation_date": 1434041400, "post_id": 30766484, "comment_id": 49623319, "body": "Brilliant - that works perfectly (would upvote, but I don&#39;t have enough reputation...)"}, {"owner": {"reputation": 1113, "user_id": 2240326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5468c04108295fd6c2f311442bdb5691?s=128&d=identicon&r=PG", "display_name": "Gecko", "link": "https://stackoverflow.com/users/2240326/gecko"}, "reply_to_user": {"reputation": 446, "user_id": 1933152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54256485efc299be6cd8b0a61a49577e?s=128&d=identicon&r=PG", "display_name": "Lars Larsson", "link": "https://stackoverflow.com/users/1933152/lars-larsson"}, "edited": false, "score": 0, "creation_date": 1434045770, "post_id": 30766484, "comment_id": 49625908, "body": "Actually the only thing you are <i>supposed</i> to do is click the arrow to mark the question as solved. This requires no reputation ;)"}], "tags": [], "owner": {"reputation": 1113, "user_id": 2240326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5468c04108295fd6c2f311442bdb5691?s=128&d=identicon&r=PG", "display_name": "Gecko", "link": "https://stackoverflow.com/users/2240326/gecko"}, "is_accepted": true, "score": 1, "last_activity_date": 1433967469, "creation_date": 1433967469, "answer_id": 30766484, "question_id": 30766357, "link": "https://stackoverflow.com/questions/30766357/column-added-to-pandas-dataframe-doesnt-stick-when-eg-writing-to-csv/30766484#30766484", "title": "Column added to pandas dataframe doesn&#39;t stick when eg. writing to csv", "body": "<p>Here</p>\n\n<pre><code>data.reg_per = pd.Series(reg_per, index = data.index)\n</code></pre>\n\n<p>You are just setting the property, not writing a column</p>\n\n<pre><code>data['reg_per'] = pd.Series(reg_per, index = data.index)\n</code></pre>\n\n<p>Avoid the . accessor, as it leads to errors like this one.</p>\n"}], "owner": {"reputation": 446, "user_id": 1933152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54256485efc299be6cd8b0a61a49577e?s=128&d=identicon&r=PG", "display_name": "Lars Larsson", "link": "https://stackoverflow.com/users/1933152/lars-larsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 30766484, "answer_count": 1, "score": 1, "last_activity_date": 1433967469, "creation_date": 1433967032, "question_id": 30766357, "link": "https://stackoverflow.com/questions/30766357/column-added-to-pandas-dataframe-doesnt-stick-when-eg-writing-to-csv", "title": "Column added to pandas dataframe doesn&#39;t stick when eg. writing to csv", "body": "<p>I have a seemingly simple situation: I'm working with a dataframe and am adding columns that are calculated based on existing columns in the dataframe. At the last line in the snippet below, python complains that the 'reg_per' column isn't found. Even if I do not specify what columns to write, python will only write the original, non-calculated, columns to the csv file. If I add <code>print data.reg_per</code> just before the last line below, it works as I would expect (ie. python finds the added column). How do I make this work? </p>\n\n<p><code>slope, intercept, r_value, p_value, std_err = stats.linregress(data.tendex, data.PER)\nreg_per = intercept + slope * data.tendex\ndata.reg_per = pd.Series(reg_per, index = data.index)\ndata.to_csv('tendex_vs_per_reg.csv', columns = ['reg_per'])</code></p>\n"}, {"tags": ["python", "file", "python-3.x", "rename", "file-rename"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433967279, "post_id": 30766276, "comment_id": 49584860, "body": "If the new names apply &quot;in that order,&quot; you&#39;ll need to sort the folder&#39;s contents first, because <code>os.listdir</code> returns an arbitrarily-ordered <code>list</code>. Also, you can iterate directly over <code>folder_list</code> instead of using <code>range(len())</code> to work with indices."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433967365, "post_id": 30766276, "comment_id": 49584925, "body": "Oh, and <code>os.listdir()</code> already returns a <code>list</code>, so you don&#39;t need to iterate over it and build a new one. Just save a reference to it: <code>folder_list = os.listdir(sys.argv[1])</code>."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433967572, "post_id": 30766276, "comment_id": 49585053, "body": "Also, you don&#39;t need to <code>open()</code> folders... although you&#39;re masking it with the loop variable anyway."}], "answers": [{"comments": [{"owner": {"reputation": 120, "user_id": 2648999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed34acf050a083c3ada633c6d5bd83be?s=128&d=identicon&r=PG", "display_name": "ErrorMaster", "link": "https://stackoverflow.com/users/2648999/errormaster"}, "edited": false, "score": 0, "creation_date": 1434109701, "post_id": 30766452, "comment_id": 49652836, "body": "Thanks but I am confused. If I don&#39;t need lists how do I define old_name and folder_name? Would I not have to loop through and create lists of all of those names before manipulating them? I tried running the code above as is and it did not work. If you could explain in more detail I would appreciate it."}, {"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "reply_to_user": {"reputation": 120, "user_id": 2648999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed34acf050a083c3ada633c6d5bd83be?s=128&d=identicon&r=PG", "display_name": "ErrorMaster", "link": "https://stackoverflow.com/users/2648999/errormaster"}, "edited": false, "score": 0, "creation_date": 1434115817, "post_id": 30766452, "comment_id": 49657030, "body": "Typo fixed. Why shouldn&#39;t you rename the files at once?"}, {"owner": {"reputation": 120, "user_id": 2648999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed34acf050a083c3ada633c6d5bd83be?s=128&d=identicon&r=PG", "display_name": "ErrorMaster", "link": "https://stackoverflow.com/users/2648999/errormaster"}, "edited": false, "score": 0, "creation_date": 1434304628, "post_id": 30766452, "comment_id": 49710090, "body": "Thanks, now I&#39;m getting an error saying `for folder_name in glob.glob(sys.argv[1]): IndexError: list index out of range. Any ideas?"}, {"owner": {"reputation": 120, "user_id": 2648999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed34acf050a083c3ada633c6d5bd83be?s=128&d=identicon&r=PG", "display_name": "ErrorMaster", "link": "https://stackoverflow.com/users/2648999/errormaster"}, "edited": false, "score": 0, "creation_date": 1434311647, "post_id": 30766452, "comment_id": 49712231, "body": "<code>for folder_name in os.listdir(&quot;.&quot;): \tif folder_name != &#39;boyaakaa.py&#39; :  </code>"}, {"owner": {"reputation": 120, "user_id": 2648999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed34acf050a083c3ada633c6d5bd83be?s=128&d=identicon&r=PG", "display_name": "ErrorMaster", "link": "https://stackoverflow.com/users/2648999/errormaster"}, "edited": false, "score": 0, "creation_date": 1434311717, "post_id": 30766452, "comment_id": 49712246, "body": "^ I changed glob.glob(sys.argv[1]) to os.listdir(&quot;.&quot;): and added the one if statement so the program doesnt try to edit the .py script and it worked no problems, thanks Dan ya da man"}], "tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 3, "last_activity_date": 1434115760, "last_edit_date": 1434115760, "creation_date": 1433967368, "answer_id": 30766452, "question_id": 30766276, "link": "https://stackoverflow.com/questions/30766276/how-does-one-rename-multiple-files-within-folders-using-python/30766452#30766452", "title": "How does one rename multiple files within folders using python?", "body": "<p>You don't need all the lists, just rename all files on the fly.</p>\n\n<pre><code>import sys, os, glob\n\nnewnames = [\"North\", \"South\", \"East\", \"West\"]\n\nfor folder_name in glob.glob(sys.argv[1]):\n    for new_name, old_name in zip(newnames, sorted(os.listdir(folder_name))):\n       os.rename(os.path.join(folder_name, old_name), os.path.join(folder_name, new_name))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1434139025, "post_id": 30810935, "comment_id": 49670622, "body": "Is that like <code>pathlib</code> for 2.x?"}, {"owner": {"reputation": 51632, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1434144901, "post_id": 30810935, "comment_id": 49673076, "body": "@Kevin: Similar.  It works in both 2.x and 3.x, and subclasses <code>bytes</code>/<code>str</code>/<code>unicode</code>."}], "tags": [], "owner": {"reputation": 51632, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "is_accepted": false, "score": 1, "last_activity_date": 1434137850, "creation_date": 1434137850, "answer_id": 30810935, "question_id": 30766276, "link": "https://stackoverflow.com/questions/30766276/how-does-one-rename-multiple-files-within-folders-using-python/30810935#30810935", "title": "How does one rename multiple files within folders using python?", "body": "<p>Here's how I would do it using <a href=\"https://pypi.python.org/pypi/antipathy\" rel=\"nofollow\">antipathy</a> [1]:</p>\n\n<pre><code># untested\n\nfrom antipathy import Path\n\ndef check_folder(folder):\n    \"returns four file names sorted alphebetically, or None if file names do not match criteria\"\n    found = folder.listdir()\n    if len(found) != 4:\n        return None\n    elif not all(fn.startswith('DSC_') for fn in found):\n        return None\n    else:\n        return sorted(found)\n\ndef rename(folder, files):\n    \"rename the four files from DSC_* to North East South West, keeping the extension\"\n    for old, new in zip(files, ('North', 'East', 'South', 'West')):\n        new += old.ext\n        folder.rename(old, new)\n\nif __name__ == '__main__':\n    for name in Path.listdir(sys.argv[1]):\n        if not name.isdir():\n            continue\n        files = check_folder(name)\n        if files is None:\n            continue\n        rename(name, files)\n</code></pre>\n\n<p>[1] disclaimer: <code>antipathy</code> is one of my projects</p>\n"}], "owner": {"reputation": 120, "user_id": 2648999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed34acf050a083c3ada633c6d5bd83be?s=128&d=identicon&r=PG", "display_name": "ErrorMaster", "link": "https://stackoverflow.com/users/2648999/errormaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 30766452, "answer_count": 2, "score": 3, "last_activity_date": 1434137850, "creation_date": 1433966814, "question_id": 30766276, "link": "https://stackoverflow.com/questions/30766276/how-does-one-rename-multiple-files-within-folders-using-python", "title": "How does one rename multiple files within folders using python?", "body": "<p>I have over 1000 folders in 'my documents'. In each folder there are only 4 photos that need to be named to 'North' 'East' 'South' and 'West' in that order. Currently they are named DSC_XXXX. I have written this script but it is not executing. </p>\n\n<pre><code>import sys, os\n\nfolder_list = []\nold_file_list = []\nnewnames = [North, South, East, West]\n\nfor file in os.listdir(sys.argv[1]):\n    folder_list.append(file)\n\n for i in range(len(folder_list)):\n    file = open(folder_list[i], r+)\n    for file in os.listdir(sys.argv[1] + '/' folder_list[i]):\n       old_file_list.append(file)\n       os.rename(old_file_list, newnames[i])\n</code></pre>\n\n<p>My method of thinking was to get all the names of the 1000 folders and store them in folder_list. Then open each folder and save the 4 picture names in old_file_list. From there I would like to use the os.rename(old_file_list, newnames[i]) to rename the 4 photos to North East South and West. Then I want this to loop for as many folders that are in 'my documents'. I am new to python and any help or suggestions would be greatly appreciated. </p>\n"}, {"tags": ["python", "scikit-learn"], "comments": [{"owner": {"reputation": 4046, "user_id": 4709400, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Oy7HE.jpg?s=128&g=1", "display_name": "stellasia", "link": "https://stackoverflow.com/users/4709400/stellasia"}, "edited": false, "score": 2, "creation_date": 1433967413, "post_id": 30766274, "comment_id": 49584958, "body": "I don&#39;t understand, how do you import <code>sklearn</code>?"}, {"owner": {"reputation": 2518, "user_id": 1115169, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/uAKZn.jpg?s=128&g=1", "display_name": "pbu", "link": "https://stackoverflow.com/users/1115169/pbu"}, "edited": false, "score": 1, "creation_date": 1434116773, "post_id": 30766274, "comment_id": 49657701, "body": "why dont you resinstall? may be sklearn is corrupt."}], "answers": [{"comments": [{"owner": {"reputation": 638, "user_id": 3415346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d1cb522336a227214b098e52150dd37?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Rein", "link": "https://stackoverflow.com/users/3415346/jon-rein"}, "edited": false, "score": 2, "creation_date": 1434027416, "post_id": 30766535, "comment_id": 49612846, "body": "this generates a different error; see update to original post."}], "tags": [], "owner": {"reputation": 2518, "user_id": 1115169, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/uAKZn.jpg?s=128&g=1", "display_name": "pbu", "link": "https://stackoverflow.com/users/1115169/pbu"}, "is_accepted": false, "score": 0, "last_activity_date": 1433967616, "creation_date": 1433967616, "answer_id": 30766535, "question_id": 30766274, "link": "https://stackoverflow.com/questions/30766274/error-importing-scikit-learn-modules/30766535#30766535", "title": "Error importing scikit-learn modules", "body": "<p>Place this line on top of the python file</p>\n\n<pre><code>from sklearn import cluster\n</code></pre>\n\n<p>That should do it :))</p>\n"}, {"comments": [{"owner": {"reputation": 1078, "user_id": 1019635, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/326En.png?s=128&g=1", "display_name": "Oliver Burdekin", "link": "https://stackoverflow.com/users/1019635/oliver-burdekin"}, "edited": false, "score": 0, "creation_date": 1452641701, "post_id": 30869318, "comment_id": 57257671, "body": "Numpy worked for me from <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"nofollow noreferrer\">lfd.uci.edu/~gohlke/pythonlibs</a> but scipy was awkward and had to download the win32 superpack.exe from sourceforge. All working now though. Thanks Jon."}], "tags": [], "owner": {"reputation": 638, "user_id": 3415346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d1cb522336a227214b098e52150dd37?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Rein", "link": "https://stackoverflow.com/users/3415346/jon-rein"}, "is_accepted": true, "score": 6, "last_activity_date": 1434462017, "creation_date": 1434462017, "answer_id": 30869318, "question_id": 30766274, "link": "https://stackoverflow.com/questions/30766274/error-importing-scikit-learn-modules/30869318#30869318", "title": "Error importing scikit-learn modules", "body": "<p>Problem was with scipy/numpy install.  I'd been using the (normally excellent!) unofficial installers from <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"noreferrer\">http://www.lfd.uci.edu/~gohlke/pythonlibs/</a>.  Uninstall/re-install from there made no difference, but installing with the official installers (linked from <a href=\"http://www.scipy.org/install.html\" rel=\"noreferrer\">http://www.scipy.org/install.html</a>) did the trick.</p>\n"}, {"comments": [{"owner": {"reputation": 2265, "user_id": 4375397, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/7a3rf.jpg?s=128&g=1", "display_name": "Philip Bergstr&#246;m", "link": "https://stackoverflow.com/users/4375397/philip-bergstr%c3%b6m"}, "edited": false, "score": 4, "creation_date": 1460642750, "post_id": 34579309, "comment_id": 60847076, "body": "If you&#39;re running on 64-bit you can install Numpy + NKL from <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy\" rel=\"nofollow noreferrer\">lfd.uci.edu/~gohlke/pythonlibs/#numpy</a>"}], "tags": [], "owner": {"reputation": 4094, "user_id": 264596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7133659c5cc50baab59648283e62a586?s=128&d=identicon&r=PG", "display_name": "Jirka", "link": "https://stackoverflow.com/users/264596/jirka"}, "is_accepted": false, "score": 31, "last_activity_date": 1555955685, "last_edit_date": 1555955685, "creation_date": 1451841460, "answer_id": 34579309, "question_id": 30766274, "link": "https://stackoverflow.com/questions/30766274/error-importing-scikit-learn-modules/34579309#34579309", "title": "Error importing scikit-learn modules", "body": "<p>You probably don't use Numpy+MKL, but only Numpy.</p>\n\n<p>I had the same problem and reinstalling Numpy with MKL</p>\n\n<p><code>pip install --upgrade --force-reinstall \"numpy\u20111.16.3+mkl\u2011cp37\u2011cp37m\u2011win32.whl\"</code></p>\n\n<p>fixed it. </p>\n\n<p>Note: update the file to the latest version, possibly 64bit - see <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy\" rel=\"nofollow noreferrer\">the list of available Windows binaries</a></p>\n"}, {"tags": [], "owner": {"reputation": 846, "user_id": 6754957, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh3.googleusercontent.com/-S02B0NzxggY/AAAAAAAAAAI/AAAAAAAAAFc/E1588waWM7Q/photo.jpg?sz=128", "display_name": "Ben", "link": "https://stackoverflow.com/users/6754957/ben"}, "is_accepted": false, "score": 2, "last_activity_date": 1513410051, "last_edit_date": 1513410051, "creation_date": 1513402335, "answer_id": 47842826, "question_id": 30766274, "link": "https://stackoverflow.com/questions/30766274/error-importing-scikit-learn-modules/47842826#47842826", "title": "Error importing scikit-learn modules", "body": "<p>I am using <code>anaconda</code> got the same error as the OP, when loading Orange, or PlotNine.\nI can't recall when this start to happen. </p>\n\n<p>Tracing the dependency of <code>Anaconda3\\Lib\\site-packages\\scipy\\special\\_ufuncs.cp36-win32.pyd</code>, <code>libifcoremd.dll</code> and <code>libmmd.dll</code> are missing in DependencyWalk. Searching them in anaconda root directry, they are located in both ICC_RT and one version of MKL package.</p>\n\n<p><s>Adding <code>Anaconda3\\pkgs\\mkl-2017.0.3-0\\Library\\bin</code> to PATH, seems to fix SciPy and NumPy related DLL load failure, the above package starts to work again.</p>\n\n<p>I still don't know how to fix this properly. Apparently the downside is that the MKL package could be updated and versions may change so does the path. In this aspect Its equally inconvenient as adding a non-managed package.\n</s></p>\n\n<p>Reinstalling ICC_RT fixed the issue for me, <code>libmmd.dll</code> and the related dlls are automatically copied into <code>anaconda3/library/bin</code> afterwards, which is automatically added into <code>PATH</code> by <code>activate</code> command. All previous numpy/scipy related <code>cant load DLL</code> errors are gone now.</p>\n"}, {"tags": [], "owner": {"reputation": 1279, "user_id": 4397349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b011bee61670135256f6c0cd55a60390?s=128&d=identicon&r=PG&f=1", "display_name": "Tin Luu", "link": "https://stackoverflow.com/users/4397349/tin-luu"}, "is_accepted": false, "score": 2, "last_activity_date": 1513766830, "creation_date": 1513766830, "answer_id": 47904272, "question_id": 30766274, "link": "https://stackoverflow.com/questions/30766274/error-importing-scikit-learn-modules/47904272#47904272", "title": "Error importing scikit-learn modules", "body": "<p>From the error log, it shows that <strong>scipy module</strong> is the most recent module fails to import</p>\n\n<pre><code>  File \"C:\\Python34\\lib\\site-packages\\sklearn\\utils\\fixes.py\", line 318, in &lt;module&gt;\n    from scipy.sparse.linalg import lsqr as sparse_lsqr\n  File \"C:\\Python34\\lib\\site-packages\\scipy\\sparse\\linalg\\__init__.py\", line 109, in &lt;module&gt;\n    from .isolve import *\n  File \"C:\\Python34\\lib\\site-packages\\scipy\\sparse\\linalg\\isolve\\__init__.py\", line 6, in &lt;module&gt;\n    from .iterative import *\n  File \"C:\\Python34\\lib\\site-packages\\scipy\\sparse\\linalg\\isolve\\iterative.py\", line 7, in &lt;module&gt;\n    from . import _iterative\nImportError: DLL load failed: The specified module could not be found.\n</code></pre>\n\n<p>I have the same error that show the same log, the problem'd gone when I uninstall/install scipy:</p>\n\n<pre><code>pip uninstall scipy\npip install scipy\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 5956597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a92392bd5c2fd2393858b01e1c03ed2e?s=128&d=identicon&r=PG&f=1", "display_name": "Saeid Bagheri", "link": "https://stackoverflow.com/users/5956597/saeid-bagheri"}, "is_accepted": false, "score": 0, "last_activity_date": 1526871386, "creation_date": 1526871386, "answer_id": 50441391, "question_id": 30766274, "link": "https://stackoverflow.com/questions/30766274/error-importing-scikit-learn-modules/50441391#50441391", "title": "Error importing scikit-learn modules", "body": "<p>For me what fixed it were these commands:</p>\n\n<pre><code>pip uninstall sklearn\npip uninstall scikit-learn\npip uninstall scipy\npip install scipy\npip install scikit-learnhere\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3271, "user_id": 8900683, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e21b1c869eba517481a0476a59bb7ca?s=128&d=identicon&r=PG&f=1", "display_name": "Rene B.", "link": "https://stackoverflow.com/users/8900683/rene-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1532001472, "creation_date": 1532001472, "answer_id": 51422118, "question_id": 30766274, "link": "https://stackoverflow.com/questions/30766274/error-importing-scikit-learn-modules/51422118#51422118", "title": "Error importing scikit-learn modules", "body": "<p>I had the same issue and solved it by installing/updating the <strong>mkl</strong> package:</p>\n\n<pre><code>conda install mkl\n</code></pre>\n\n<p>or</p>\n\n<pre><code>pip install mkl\n</code></pre>\n\n<p>Just for full information, this also downgraded the following packages:</p>\n\n<p>The following packages will be UPDATED:</p>\n\n<pre><code>mkl:          2017.0.4-h6d528fc_0 defaults --&gt; 2018.0.3-1         defaults\n</code></pre>\n\n<p>The following packages will be DOWNGRADED:</p>\n\n<pre><code>numpy:        1.11.3-py34_0       defaults --&gt; 1.10.1-py34_0      defaults\npandas:       0.19.2-np111py34_1  defaults --&gt; 0.18.1-np110py34_0 defaults\nscikit-learn: 0.18.1-np111py34_1  defaults --&gt; 0.17-np110py34_1   defaults\nscipy:        0.19.1-np111py34_0  defaults --&gt; 0.16.0-np110py34_0 defaults\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 411, "user_id": 7333883, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QMvRYuB8R1I/AAAAAAAAAAI/AAAAAAAACl0/TVBxB33YZ28/photo.jpg?sz=128", "display_name": "Sumanth Lazarus", "link": "https://stackoverflow.com/users/7333883/sumanth-lazarus"}, "is_accepted": false, "score": 0, "last_activity_date": 1555951922, "creation_date": 1555951922, "answer_id": 55797950, "question_id": 30766274, "link": "https://stackoverflow.com/questions/30766274/error-importing-scikit-learn-modules/55797950#55797950", "title": "Error importing scikit-learn modules", "body": "<p>I struggled trying to figure this one out; tried to download and install the (unofficial) Numpy+MKL library from the website (risky/tedious?).</p>\n\n<p>Ultimately found success by:</p>\n\n<ol>\n<li><p>Login to command prompt using admin rights; how to here: <a href=\"https://superuser.com/questions/968214/open-cmd-as-admin-with-windowsr-shortcut\">https://superuser.com/questions/968214/open-cmd-as-admin-with-windowsr-shortcut</a></p></li>\n<li><p>Uninstall existing/tangled version of Scipy &amp; Numpy\n<code>\npip uninstall scipy\npip uninstall numpy\n</code></p></li>\n<li><p>Fresh install Scipy &amp; Numpy\n<code>\npip install scipy\npip install numpy\n</code></p></li>\n<li>Run Jupyter notebook; it worked for me.</li>\n</ol>\n\n<p>The message <strong><em>ImportError: DLL load failed: The specified module could not be found</em></strong>\ninforms that there is failure to identify and source the required DLL(s) to use the scikit-learn library; a fresh install of scipy/numpy probably enables a better routing of DLL connections called from Jupyter notebook code(s).</p>\n"}, {"comments": [{"owner": {"reputation": 774, "user_id": 6513708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rSiu8.png?s=128&g=1", "display_name": "glemaitre", "link": "https://stackoverflow.com/users/6513708/glemaitre"}, "edited": false, "score": 0, "creation_date": 1577350189, "post_id": 59485615, "comment_id": 105147058, "body": "This issue was reported 4 years ago while the issue with visual C++ is due to some openmp packaging and only valid for scikit-learn 0.22"}], "tags": [], "owner": {"reputation": 9, "user_id": 12588552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAqkdjlwX5cauA5UPAXCtdIszWjg9d9axhFF-KQzg=k-s128", "display_name": "Niwin", "link": "https://stackoverflow.com/users/12588552/niwin"}, "is_accepted": false, "score": 0, "last_activity_date": 1577347688, "creation_date": 1577347688, "answer_id": 59485615, "question_id": 30766274, "link": "https://stackoverflow.com/questions/30766274/error-importing-scikit-learn-modules/59485615#59485615", "title": "Error importing scikit-learn modules", "body": "<p>download microsoft visual c++ distribution</p>\n\n<p>link : <a href=\"https://www.microsoft.com/en-in/download/details.aspx?id=53840\" rel=\"nofollow noreferrer\">https://www.microsoft.com/en-in/download/details.aspx?id=53840</a></p>\n\n<p>vc_redist.x64.exe</p>\n\n<p>install and run this .exe file in your computer.. the DLL import module error will not appear after this</p>\n\n<p>now it will work fine enjoy :)</p>\n"}], "owner": {"reputation": 638, "user_id": 3415346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d1cb522336a227214b098e52150dd37?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Rein", "link": "https://stackoverflow.com/users/3415346/jon-rein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30509, "favorite_count": 4, "accepted_answer_id": 30869318, "answer_count": 9, "score": 25, "last_activity_date": 1577347688, "creation_date": 1433966799, "last_edit_date": 1434027347, "question_id": 30766274, "link": "https://stackoverflow.com/questions/30766274/error-importing-scikit-learn-modules", "title": "Error importing scikit-learn modules", "body": "<p>I'm trying to call a function from the cluster module, like so:</p>\n\n<pre><code>import sklearn\ndb = sklearn.cluster.DBSCAN()\n</code></pre>\n\n<p>and I get the following error:</p>\n\n<pre><code>AttributeError: 'module' object has no attribute 'cluster'\n</code></pre>\n\n<p>Tab-completing in IPython, I seem to have access to the base, clone, externals, re, setup_module, sys, and warning modules.  Nothing else, though others (including cluster) are in the sklearn directory.</p>\n\n<p>Following pbu's advice below and using</p>\n\n<pre><code>from sklearn import cluster\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test.py\", line 2, in &lt;module&gt;\n    from sklearn import cluster\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\cluster\\__init__.py\", line 6, in &lt;module&gt;\n    from .spectral import spectral_clustering, SpectralClustering\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\cluster\\spectral.py\", line 13, in &lt;module&gt;\n    from ..utils import check_random_state, as_float_array\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\utils\\__init__.py\", line 16, in &lt;module&gt;\n    from .class_weight import compute_class_weight, compute_sample_weight\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\utils\\class_weight.py\", line 7, in &lt;module&gt;\n    from ..utils.fixes import in1d\n  File \"C:\\Python34\\lib\\site-packages\\sklearn\\utils\\fixes.py\", line 318, in &lt;module&gt;\n    from scipy.sparse.linalg import lsqr as sparse_lsqr\n  File \"C:\\Python34\\lib\\site-packages\\scipy\\sparse\\linalg\\__init__.py\", line 109, in &lt;module&gt;\n    from .isolve import *\n  File \"C:\\Python34\\lib\\site-packages\\scipy\\sparse\\linalg\\isolve\\__init__.py\", line 6, in &lt;module&gt;\n    from .iterative import *\n  File \"C:\\Python34\\lib\\site-packages\\scipy\\sparse\\linalg\\isolve\\iterative.py\", line 7, in &lt;module&gt;\n    from . import _iterative\nImportError: DLL load failed: The specified module could not be found.\n</code></pre>\n\n<p>I'm using Python 3.4 on Windows, scikit-learn 0.16.1.</p>\n"}, {"tags": ["python", "json", "parsing", "tweets"], "comments": [{"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 1, "creation_date": 1433966834, "post_id": 30766264, "comment_id": 49584609, "body": "How did you install the <code>ijson</code> package?"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1433966837, "post_id": 30766264, "comment_id": 49584613, "body": "<code>import ijson</code> Is that a typo? The module is called <a href=\"https://docs.python.org/3.4/library/json.html\" rel=\"nofollow noreferrer\"><code>json</code></a>"}, {"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1433966880, "post_id": 30766264, "comment_id": 49584639, "body": "@CoryKramer it&#39;s an iterative json parser than one might use in situations where data is too big to fit in memory."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1433966934, "post_id": 30766264, "comment_id": 49584668, "body": "@larsks Oh okay, first time I&#39;ve heard of it (not that I&#39;m a good reference for that stuff, I rarely use JSON for my job)"}, {"owner": {"reputation": 143, "user_id": 4286058, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a508452985751a904b779d292c9a6168?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4286058/denis"}, "edited": false, "score": 0, "creation_date": 1433967694, "post_id": 30766264, "comment_id": 49585131, "body": "I installed through terminal  like install ijson. But apparently did not work.."}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 4286058, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a508452985751a904b779d292c9a6168?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4286058/denis"}, "edited": false, "score": 0, "creation_date": 1433967788, "post_id": 30766332, "comment_id": 49585183, "body": "I had only tried installing through the terminal. Upon your suggestion I tried with pip, too.  When I ran pip install ijson, I am having &quot;invalid syntax error&quot;"}, {"owner": {"reputation": 2187, "user_id": 1357387, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a59cac3d004852864c545093e57c176?s=128&d=identicon&r=PG", "display_name": "Parham", "link": "https://stackoverflow.com/users/1357387/parham"}, "reply_to_user": {"reputation": 143, "user_id": 4286058, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a508452985751a904b779d292c9a6168?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4286058/denis"}, "edited": false, "score": 0, "creation_date": 1433967914, "post_id": 30766332, "comment_id": 49585268, "body": "@Denis: It seems like you have successfully installed ijson with pip! The <code>invalid syntax error</code> is perhaps regarding the rest of your code. Please update your original question and please provide the error message you are seeing. The error message should tell you where and what the problem is."}, {"owner": {"reputation": 143, "user_id": 4286058, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a508452985751a904b779d292c9a6168?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4286058/denis"}, "edited": false, "score": 0, "creation_date": 1433968319, "post_id": 30766332, "comment_id": 49585537, "body": "@ Parham But the error message appears on the code line of &quot;pip install ijson&quot;. I don&#39;t have any syntax error in the rest of the code.Is there any other way I can install the package, maybe other beck end requirements, too? Thanks again."}, {"owner": {"reputation": 2187, "user_id": 1357387, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a59cac3d004852864c545093e57c176?s=128&d=identicon&r=PG", "display_name": "Parham", "link": "https://stackoverflow.com/users/1357387/parham"}, "reply_to_user": {"reputation": 143, "user_id": 4286058, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a508452985751a904b779d292c9a6168?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4286058/denis"}, "edited": false, "score": 1, "creation_date": 1433968433, "post_id": 30766332, "comment_id": 49585619, "body": "I see. Are you running this from inside python? You need to run it from a terminal. The link I provided lets you install pip which you can then use from a command-line prompt. Please provide the output you are receiving, it would help"}, {"owner": {"reputation": 2187, "user_id": 1357387, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a59cac3d004852864c545093e57c176?s=128&d=identicon&r=PG", "display_name": "Parham", "link": "https://stackoverflow.com/users/1357387/parham"}, "reply_to_user": {"reputation": 143, "user_id": 4286058, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a508452985751a904b779d292c9a6168?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4286058/denis"}, "edited": false, "score": 0, "creation_date": 1433968808, "post_id": 30766332, "comment_id": 49585842, "body": "Awesome :) Please accept my answer also if you feel like it properly addressed your issue."}], "tags": [], "owner": {"reputation": 2187, "user_id": 1357387, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a59cac3d004852864c545093e57c176?s=128&d=identicon&r=PG", "display_name": "Parham", "link": "https://stackoverflow.com/users/1357387/parham"}, "is_accepted": true, "score": 7, "last_activity_date": 1433966951, "creation_date": 1433966951, "answer_id": 30766332, "question_id": 30766264, "link": "https://stackoverflow.com/questions/30766264/no-module-named-ijson/30766332#30766332", "title": "No module named ijson", "body": "<p><code>ijson</code> is an external package that is not included with the regular python libraries. You need to install <code>ijson</code> yourself first. Look into using something like <a href=\"https://pip.pypa.io/en/latest/installing.html\" rel=\"noreferrer\">pip</a> which is a package manager for python. Once installed you can install <a href=\"https://pypi.python.org/pypi/ijson/\" rel=\"noreferrer\"><code>ijson</code></a> through the terminal like this:</p>\n\n<pre><code>pip install ijson\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 4286058, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/a508452985751a904b779d292c9a6168?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4286058/denis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8525, "favorite_count": 1, "closed_date": 1433979109, "accepted_answer_id": 30766332, "answer_count": 1, "score": 2, "last_activity_date": 1433966951, "creation_date": 1433966757, "question_id": 30766264, "link": "https://stackoverflow.com/questions/30766264/no-module-named-ijson", "closed_reason": "Needs details or clarity", "title": "No module named ijson", "body": "<p>I have a big json file of tweets(around 5GB). I am having memory error. So, I decided to parse the data. I found ijson package. I am having such an error:</p>\n\n<pre><code>import ijson\nparser = ijson.parse(tweets_data_path )\ntweets_data = []\nf = open(tweets_data_path, \"r\")\nobjects = ijson.items(f, 'other_config.item')\nfor line in objects:\n    try:\n        tweet = json.loads(line)\n        tweets_data.append(tweet)\n    except:\n        continue\n</code></pre>\n\n<p>\"No module named ijson\"\nI am fairly new to Python, I looked at the source file of the package. But I could bout quite get what the requirements are. Any help will be appreciated. </p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn"], "comments": [{"owner": {"reputation": 2518, "user_id": 1115169, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/uAKZn.jpg?s=128&g=1", "display_name": "pbu", "link": "https://stackoverflow.com/users/1115169/pbu"}, "edited": false, "score": 0, "creation_date": 1433968031, "post_id": 30766253, "comment_id": 49585348, "body": "A simply numpy matrix with floats floats, 900,000 x 8 x 4bytes  = 28,800,000 only needs approx 28mb of memory. i see that number of estimators random forests use is about 50. Try to reduce that to 10. If still that doesnt work do a PCA on the dataset and feed it to the RF"}, {"owner": {"reputation": 848, "user_id": 2625177, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e9da70fd47a58e895afb698666bcb266?s=128&d=identicon&r=PG", "display_name": "grasshopper", "link": "https://stackoverflow.com/users/2625177/grasshopper"}, "reply_to_user": {"reputation": 2518, "user_id": 1115169, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/uAKZn.jpg?s=128&g=1", "display_name": "pbu", "link": "https://stackoverflow.com/users/1115169/pbu"}, "edited": false, "score": 0, "creation_date": 1433973335, "post_id": 30766253, "comment_id": 49588161, "body": "@pbu Good idea, but it didn&#39;t work. What exactly is a PCA?"}, {"owner": {"reputation": 2518, "user_id": 1115169, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/uAKZn.jpg?s=128&g=1", "display_name": "pbu", "link": "https://stackoverflow.com/users/1115169/pbu"}, "edited": false, "score": 0, "creation_date": 1434022695, "post_id": 30766253, "comment_id": 49609302, "body": "PCA is a dimensionality reduction: <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html\" rel=\"nofollow noreferrer\">scikit-learn.org/stable/modules/generated/&hellip;</a>.  Take the first 100 features of the PCA and feed it to RF, see how it goes. It should be fast. Another idea is train into batches of 10k rows. i think random forests support batch training."}], "answers": [{"tags": [], "owner": {"reputation": 23147, "user_id": 676634, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/84f619d24e0f165f2ee36db34a911c4a?s=128&d=identicon&r=PG", "display_name": "Andreas Mueller", "link": "https://stackoverflow.com/users/676634/andreas-mueller"}, "is_accepted": false, "score": 3, "last_activity_date": 1434039903, "creation_date": 1434039903, "answer_id": 30786303, "question_id": 30766253, "link": "https://stackoverflow.com/questions/30766253/scikit-learn-random-forest-taking-up-too-much-memory/30786303#30786303", "title": "Scikit-learn Random Forest taking up too much memory", "body": "<p>The model you are building just gets too big. Get more ram or built a smaller model. To built a smaller model, either create less trees, or limit the depth of teach trees, say by using max_depth. Try with max_depth=5 and see what happens.\nAlso, how many classes do you have? More classes make everything more expensive.</p>\n\n<p>Also, you might want to try this: <a href=\"https://github.com/scikit-learn/scikit-learn/pull/4783\" rel=\"nofollow\">https://github.com/scikit-learn/scikit-learn/pull/4783</a></p>\n"}, {"tags": [], "owner": {"reputation": 2861, "user_id": 5605919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ouNfI.jpg?s=128&g=1", "display_name": "pplonski", "link": "https://stackoverflow.com/users/5605919/pplonski"}, "is_accepted": false, "score": 1, "last_activity_date": 1593006475, "creation_date": 1593006475, "answer_id": 62556644, "question_id": 30766253, "link": "https://stackoverflow.com/questions/30766253/scikit-learn-random-forest-taking-up-too-much-memory/62556644#62556644", "title": "Scikit-learn Random Forest taking up too much memory", "body": "<p>I get a similar situation with the too-large Random Forest model. The problem was that trees were too deep, and take a lot of memory. To deal with it, I set <code>max_depth = 6</code> and it reduces the memory. I even write down about it in <a href=\"https://mljar.com/blog/random-forest-memory/\" rel=\"nofollow noreferrer\">blog post</a>. In the article, I was using 32k rows dataset with 15 columns. Setting <code>max_depth=6</code> decreases memory consumption 66 times and keep similar performance (in the article the performance even increases).</p>\n"}], "owner": {"reputation": 848, "user_id": 2625177, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e9da70fd47a58e895afb698666bcb266?s=128&d=identicon&r=PG", "display_name": "grasshopper", "link": "https://stackoverflow.com/users/2625177/grasshopper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5394, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1593006475, "creation_date": 1433966724, "question_id": 30766253, "link": "https://stackoverflow.com/questions/30766253/scikit-learn-random-forest-taking-up-too-much-memory", "title": "Scikit-learn Random Forest taking up too much memory", "body": "<h3>Problem</h3>\n\n<p>I have a dataset with 900,000 rows and 8 columns. 6 of the columns are integers and the other two are floats. When trying to fit about 1/4 of the dataset (200,000) the code runs fine and takes under 30 seconds. When I try to run 400,000 rows or greater My computer permanently freezes because the python.exe process takes up over 5GB of RAM.</p>\n\n<h3>Attempts</h3>\n\n<p>First thing I tried was setting the warm_state parameter to True and then going through the data 50,000 rows at a time</p>\n\n<pre><code>n = 0\ni = 50,000  \nclf = sk.RandomForestClassifier(oob_score = True,n_jobs=-1, n_estimators = n, warm_start=True)\nWhile i&lt;= 850,000:\n    clf.fit(X.ix[n:i],Y.ix[n:i])\n    n += 50,000\n    i += 50,000\n</code></pre>\n\n<p>This didn't solve anything, I ran into the same issue.</p>\n\n<p>Next thing I tried is finding if there was a part of the data that was taking much more memory to process. I recorded the memory increase in the python.exe process and the time it took for the process to complete, if it did complete.</p>\n\n<pre><code>n = 50\nclf = sk.RandomForestClassifier(oob_score = True,n_jobs=-1, n_estimators = n, warm_start=True)\nZ = X[['DayOfWeek','PdDistrict','Year','Day','Month']] # takes 15s and additional ~600mb RAM (800 total)\nZ = X[['X','Address','Y']] # takes 24.8s and additional 1.1GB RAM (1389mb total)\nZ = X # never finishes peaks at 5.2GB\n%time clf.fit(Z.ix[0:400000],Y.ix[0:400000])\n</code></pre>\n\n<p>While some data does take longer to process than others none of them can account for 5 Gb of memory being taken.</p>\n\n<p>The data is only a few megabytes in size so I don't see how it can take up so much memory to process. </p>\n"}, {"tags": ["python", "amazon-web-services", "boto", "amazon-rds", "rds"], "comments": [{"owner": {"reputation": 11951, "user_id": 203801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/feecec49cfdacac9761b0a1ec5dcf814?s=128&d=identicon&r=PG", "display_name": "Julio Faerman", "link": "https://stackoverflow.com/users/203801/julio-faerman"}, "edited": false, "score": 0, "creation_date": 1433968041, "post_id": 30766187, "comment_id": 49585354, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/23326688/amazon-rds-stop-instance\">Amazon RDS stop instance</a>"}, {"owner": {"reputation": 11951, "user_id": 203801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/feecec49cfdacac9761b0a1ec5dcf814?s=128&d=identicon&r=PG", "display_name": "Julio Faerman", "link": "https://stackoverflow.com/users/203801/julio-faerman"}, "edited": false, "score": 1, "creation_date": 1433971820, "post_id": 30766187, "comment_id": 49587480, "body": "no, because there is no such a thing. you could terminate with a snapshot and create a new one later, that is almost the same thing, but currently there is no stop action in the RDS API"}], "answers": [{"tags": [], "owner": {"reputation": 37599, "user_id": 653643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c68c82ba38c3f2cb3927e92f98f29ef?s=128&d=identicon&r=PG", "display_name": "garnaat", "link": "https://stackoverflow.com/users/653643/garnaat"}, "is_accepted": true, "score": 0, "last_activity_date": 1433967937, "creation_date": 1433967937, "answer_id": 30766635, "question_id": 30766187, "link": "https://stackoverflow.com/questions/30766187/how-do-i-start-stop-aws-rds-instances-using-boto/30766635#30766635", "title": "How do I Start/Stop AWS RDS Instances using Boto?", "body": "<p>No, that's probably the best you can do.  The RDS API does not support the Stop/Start functionality of EC2 instances.</p>\n"}, {"tags": [], "owner": {"reputation": 585, "user_id": 4620962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58c387b7507b45481bb5ba19229bbac2?s=128&d=identicon&r=PG&f=1", "display_name": "Venkata.Mutyala", "link": "https://stackoverflow.com/users/4620962/venkata-mutyala"}, "is_accepted": false, "score": 3, "last_activity_date": 1496379325, "creation_date": 1496379325, "answer_id": 44321065, "question_id": 30766187, "link": "https://stackoverflow.com/questions/30766187/how-do-i-start-stop-aws-rds-instances-using-boto/44321065#44321065", "title": "How do I Start/Stop AWS RDS Instances using Boto?", "body": "<p>They recently added support: <a href=\"https://aws.amazon.com/about-aws/whats-new/2017/06/amazon-rds-supports-stopping-and-starting-of-database-instances/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/about-aws/whats-new/2017/06/amazon-rds-supports-stopping-and-starting-of-database-instances/</a></p>\n\n<p>Assuming you can use boto3... </p>\n\n<p>Start:\n<a href=\"http://boto3.readthedocs.io/en/latest/reference/services/rds.html#RDS.Client.start_db_instance\" rel=\"nofollow noreferrer\">http://boto3.readthedocs.io/en/latest/reference/services/rds.html#RDS.Client.start_db_instance</a></p>\n\n<p>Stop:\n<a href=\"http://boto3.readthedocs.io/en/latest/reference/services/rds.html#RDS.Client.stop_db_instance\" rel=\"nofollow noreferrer\">http://boto3.readthedocs.io/en/latest/reference/services/rds.html#RDS.Client.stop_db_instance</a></p>\n"}, {"tags": [], "owner": {"reputation": 2813, "user_id": 3043524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XtJjB.jpg?s=128&g=1", "display_name": "Paulo Victor", "link": "https://stackoverflow.com/users/3043524/paulo-victor"}, "is_accepted": false, "score": 1, "last_activity_date": 1510082270, "creation_date": 1510082270, "answer_id": 47165837, "question_id": 30766187, "link": "https://stackoverflow.com/questions/30766187/how-do-i-start-stop-aws-rds-instances-using-boto/47165837#47165837", "title": "How do I Start/Stop AWS RDS Instances using Boto?", "body": "<p>Yes, just to add Venkata answer now you can start/stop instance using boto3. I created an aws lambda which start/stop my rds instances, using boto3 start_db_instance, stop_db_instance as the following:</p>\n\n<p>Start instance:\n    import boto3</p>\n\n<pre><code>def handler(event, context):\n    rds = boto3.client('rds', region_name='us-east-1')\n    response = rds.start_db_instance(DBInstanceIdentifier='mydb-instance-name') #it should be rds instance NAME \n</code></pre>\n\n<p>Stop instance:</p>\n\n<pre><code>import boto3\n\ndef handler(event, context):\n    rds = boto3.client('rds', region_name='us-east-1')\n    response = rds.stop_db_instance(DBInstanceIdentifier='mydb-instance-name') #it should be rds instance NAME \n</code></pre>\n\n<p>Don't forget, the parameter called DBInstanceIdentifier should be the rds instance name provided by you when you created it.</p>\n\n<p>One important thing to remember is, you should provide a role to your lambdas, and if you want to start/stop rds you should set one role which has at least this permissions.</p>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 2842533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsj6c.jpg?s=128&g=1", "display_name": "Rohit Sidhwani", "link": "https://stackoverflow.com/users/2842533/rohit-sidhwani"}, "is_accepted": false, "score": 0, "last_activity_date": 1543838021, "last_edit_date": 1543838021, "creation_date": 1542634965, "answer_id": 53375932, "question_id": 30766187, "link": "https://stackoverflow.com/questions/30766187/how-do-i-start-stop-aws-rds-instances-using-boto/53375932#53375932", "title": "How do I Start/Stop AWS RDS Instances using Boto?", "body": "<p>You can only start or stop AWS RDS instance of single availability zone instances. For your case, you will have to check if the multi-AZ option is enabled or disabled. </p>\n\n<p>Incase your database is in Multiple availability zone, the best way would be to take the snapshot and restore it.</p>\n"}], "owner": {"reputation": 2981, "user_id": 3027792, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f676ed067977ae3931f213dc0386764f?s=128&d=identicon&r=PG&f=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3027792/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3508, "favorite_count": 0, "accepted_answer_id": 30766635, "answer_count": 4, "score": 2, "last_activity_date": 1543838021, "creation_date": 1433966498, "question_id": 30766187, "link": "https://stackoverflow.com/questions/30766187/how-do-i-start-stop-aws-rds-instances-using-boto", "title": "How do I Start/Stop AWS RDS Instances using Boto?", "body": "<p>I had a question about Amazon RDS. I wanted to Start/Stop AWS RDS Instances at my need . AWS Console does not allow me to do so.  </p>\n\n<p>The Only method I know is to take a snapshot of the rds instance and delete it and when I need it then a create rds instance using that snapshot.\nIs there any better way to acheive the same using Boto?</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 5725, "user_id": 781909, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bf6105eb652fbf95b9c5b582bf6bf294?s=128&d=identicon&r=PG", "display_name": "jvc26", "link": "https://stackoverflow.com/users/781909/jvc26"}, "edited": false, "score": 1, "creation_date": 1433968834, "post_id": 30766160, "comment_id": 49585856, "body": "I&#39;d read the Django tutorial, which explains how to use django to process URL provided arguments, json variables in the body, or how to process query strings (ways to pass data from the client to your view) and then run the view accordingly."}, {"owner": {"reputation": 26209, "user_id": 1592380, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1b375c795476432e64d4433a651d2804?s=128&d=identicon&r=PG", "display_name": "user1592380", "link": "https://stackoverflow.com/users/1592380/user1592380"}, "reply_to_user": {"reputation": 5725, "user_id": 781909, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bf6105eb652fbf95b9c5b582bf6bf294?s=128&d=identicon&r=PG", "display_name": "jvc26", "link": "https://stackoverflow.com/users/781909/jvc26"}, "edited": false, "score": 1, "creation_date": 1433971092, "post_id": 30766160, "comment_id": 49587078, "body": "Sorry I wasn&#39;t clear. Please see my edited question."}, {"owner": {"reputation": 3938, "user_id": 3832802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/k0Hxl.jpg?s=128&g=1", "display_name": "pythad", "link": "https://stackoverflow.com/users/3832802/pythad"}, "edited": false, "score": 0, "creation_date": 1433973175, "post_id": 30766160, "comment_id": 49588109, "body": "Have you tried to write a custom Django command?"}], "owner": {"reputation": 26209, "user_id": 1592380, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1b375c795476432e64d4433a651d2804?s=128&d=identicon&r=PG", "display_name": "user1592380", "link": "https://stackoverflow.com/users/1592380/user1592380"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 335, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1433971069, "creation_date": 1433966401, "last_edit_date": 1433971069, "question_id": 30766160, "link": "https://stackoverflow.com/questions/30766160/converting-python-command-line-script-into-django-app", "title": "Converting python command line script into django app", "body": "<p>I've inherited a python command line script \"myscript.py\" which has a number of classes and contains the following:</p>\n\n<pre><code>def main():\n    parser = OptionParser()\n    parser.add_option(\"-a\", \"--all\", dest=\"saveall\",\n                      help=\"Store all information\", action=\"store_true\",\n                      default=False)\n    options, args = parser.parse_args()\n    output = options.output\n    count = options.count\n    saveall=options.saveall\n\n    grabber = Grabber()\n    grabber.run(count, output, saveall)\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>I've tested this on the command line and it works. I want to turn it into a django app. I can put all the classes onto the app's view easily, but I'm not sure how to refactor the main function to trigger the app with the various options that are available via an http request to django. assuming I pass in the arguments with something like:</p>\n\n<pre><code>@csrf_exempt\ndef myscript(request):\n\n    option1 = str(request.POST.get( option1, False))\n    option2 = str(request.POST.get(option2, False))\n</code></pre>\n\n<p>How can I run myscript from within django, passing the options to it with minimal changes to the script?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 15106, "user_id": 2573061, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t8eGV.jpg?s=128&g=1", "display_name": "C8H10N4O2", "link": "https://stackoverflow.com/users/2573061/c8h10n4o2"}, "edited": false, "score": 2, "creation_date": 1433966570, "post_id": 30766151, "comment_id": 49584473, "body": "see <code>re.findall</code> <a href=\"http://stackoverflow.com/questions/7724993/python-using-regex-to-find-multiple-matches-and-print-them-out\" title=\"python using regex to find multiple matches and print them out\">stackoverflow.com/questions/7724993/&hellip;</a>"}, {"owner": {"reputation": 641, "user_id": 4075936, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yC_fhoQdrMI/AAAAAAAAAAI/AAAAAAAAAGE/jkwCnqcUZf0/photo.jpg?sz=128", "display_name": "asimoneau", "link": "https://stackoverflow.com/users/4075936/asimoneau"}, "edited": false, "score": 0, "creation_date": 1433966651, "post_id": 30766151, "comment_id": 49584509, "body": "<a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a> is a great tool to build and test regular expressions."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433968529, "post_id": 30766151, "comment_id": 49585682, "body": "Note that <code>re.search</code> only produces the first match."}, {"owner": {"reputation": 61, "user_id": 4899591, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/840f0a6e1b4254d7677063c5d8ef13c5?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4899591/user"}, "edited": false, "score": 0, "creation_date": 1433970354, "post_id": 30766151, "comment_id": 49586724, "body": "Oh. When I do findall it gives me a list of matches which I can then join. Search and match only give the first match is it right? It wont go further and check for other matches? And why is that? I used &quot;+&quot; for that only so that it can check for one or more."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433974080, "post_id": 30766151, "comment_id": 49588434, "body": "<code>+</code> means 1 or more matching characters in a row. If there are non-matching characters between groups of matching characters, <code>re.search</code> only finds the first group, while <code>re.match</code> only finds the first group and then only if it&#39;s at the beginning of the string."}], "answers": [{"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 6, "last_activity_date": 1433968157, "last_edit_date": 1433968157, "creation_date": 1433966571, "answer_id": 30766212, "question_id": 30766151, "link": "https://stackoverflow.com/questions/30766151/regular-expression-to-find-brackets-in-a-string/30766212#30766212", "title": "Regular Expression to find brackets in a string", "body": "<p>You have to escape the first closing square bracket.</p>\n\n<pre><code>r'[(){}[\\]]+'\n</code></pre>\n\n<p>To combine all of them into a string, you can search for anything that <em>doesn't</em> match and remove it.</p>\n\n<pre><code>brackets = re.sub( r'[^(){}[\\]]', '', s)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 4899591, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/840f0a6e1b4254d7677063c5d8ef13c5?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4899591/user"}, "edited": false, "score": 0, "creation_date": 1433970063, "post_id": 30766216, "comment_id": 49586551, "body": "Hi Thanks for your comment. But I am not able to understand why I need to escape the last square bracket. Shouldnt the character class searches for any of those character and + would make it one or more?"}, {"owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "reply_to_user": {"reputation": 61, "user_id": 4899591, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/840f0a6e1b4254d7677063c5d8ef13c5?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4899591/user"}, "edited": false, "score": 0, "creation_date": 1433970268, "post_id": 30766216, "comment_id": 49586681, "body": "@user you are right.. but how will regex know which square bracket is the closing one? inner one? or outer one?.. thats why you need to escape the inner one.. hope you got my point.."}, {"owner": {"reputation": 61, "user_id": 4899591, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/840f0a6e1b4254d7677063c5d8ef13c5?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4899591/user"}, "edited": false, "score": 0, "creation_date": 1433970609, "post_id": 30766216, "comment_id": 49586843, "body": "Yup got that. But why search only fetches one match? I am using &quot;+&quot; so shouldnt it fetch one or more?"}, {"owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "reply_to_user": {"reputation": 61, "user_id": 4899591, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/840f0a6e1b4254d7677063c5d8ef13c5?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4899591/user"}, "edited": false, "score": 0, "creation_date": 1433971201, "post_id": 30766216, "comment_id": 49587142, "body": "@user <code>+</code> means one or more of the specified pattern.. so the regex <code>[(){}[\\]]+</code> would match <code>{</code> or <code>{]</code> or <code>({]{)}</code> etc.. but only the first occurance of the match is returned.. to get all the matches.. you have to use <code>re.findAll</code>"}], "tags": [], "owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "is_accepted": false, "score": 4, "last_activity_date": 1433966592, "creation_date": 1433966592, "answer_id": 30766216, "question_id": 30766151, "link": "https://stackoverflow.com/questions/30766151/regular-expression-to-find-brackets-in-a-string/30766216#30766216", "title": "Regular Expression to find brackets in a string", "body": "<p>Use the following (<strong>Closing square bracket</strong> must be <strong>escaped</strong> inside <strong>character class</strong>):</p>\n\n<pre><code>brackets=re.search(r\"[(){}[\\]]+\",s)\n                           \u2191\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433967858, "post_id": 30766307, "comment_id": 49585224, "body": "How about <code>re.sub</code> with a <code>^</code>, viz <code>brackets = re.sub(r&#39;[^](){}[]&#39;, &#39;&#39;, s)</code>?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433968295, "post_id": 30766307, "comment_id": 49585520, "body": "+1 for being the first answer to actually produce the desired output :P (and for avoiding the backslash)."}], "tags": [], "owner": {"reputation": 10368, "user_id": 308392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/937ca9e6cd63e5ecdc180b8bc81b8b8d?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Trybus", "link": "https://stackoverflow.com/users/308392/micha%c5%82-trybus"}, "is_accepted": false, "score": 1, "last_activity_date": 1433968411, "last_edit_date": 1433968411, "creation_date": 1433966884, "answer_id": 30766307, "question_id": 30766151, "link": "https://stackoverflow.com/questions/30766151/regular-expression-to-find-brackets-in-a-string/30766307#30766307", "title": "Regular Expression to find brackets in a string", "body": "<p>The regular expression <code>\"[(){}[]]+\"</code> (or rather <code>\"[](){}[]+\"</code> or <code>\"[(){}[\\]]+\"</code> (as others have suggested)) finds a sequence of consecutive characters.\nWhat you need to do is find all of these sequences and join them.</p>\n\n<p>One solution is this:</p>\n\n<pre><code>brackets = ''.join(re.findall(r\"[](){}[]+\",s))\n</code></pre>\n\n<p>Note also that I rearranged the order of characters in a class, as <code>]</code> has to be at the beginning of a class so that it is not interpreted as the end of class definition.</p>\n"}, {"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433968682, "post_id": 30766813, "comment_id": 49585763, "body": "Or, since that looks like Python 3 to me, <code>print(*(ch for ch in s if ch in keep), sep=&#39;&#39;)</code>."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433968736, "post_id": 30766813, "comment_id": 49585797, "body": "@TigerhawkT3, yes, true but I presume the OP wants to use the string so really it would be assigned to a variable."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433968819, "post_id": 30766813, "comment_id": 49585849, "body": "@TigerhawkT3, me too,  it is what makes python so nice to use, a little goes a long way."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 1, "last_activity_date": 1433968580, "creation_date": 1433968580, "answer_id": 30766813, "question_id": 30766151, "link": "https://stackoverflow.com/questions/30766151/regular-expression-to-find-brackets-in-a-string/30766813#30766813", "title": "Regular Expression to find brackets in a string", "body": "<p>You could also do this without a regex:</p>\n\n<pre><code>s=\"(a(vdwvndw){}]\"\nkeep = {\"(\",\")\",\"[\",\"]\",\"{\",\"}\"}\nprint(\"\".join([ch for ch in s if ch in keep]))\n((){}]\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4899591, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/840f0a6e1b4254d7677063c5d8ef13c5?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/4899591/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9631, "favorite_count": 0, "answer_count": 4, "score": 5, "last_activity_date": 1433968580, "creation_date": 1433966376, "last_edit_date": 1433966429, "question_id": 30766151, "link": "https://stackoverflow.com/questions/30766151/regular-expression-to-find-brackets-in-a-string", "title": "Regular Expression to find brackets in a string", "body": "<p>I have a string which has multiple brackets. Let says</p>\n\n<pre><code>s=\"(a(vdwvndw){}]\"\n</code></pre>\n\n<p>I want to extract all the brackets as a separate string. </p>\n\n<p>I tried this: </p>\n\n<pre><code>&gt;&gt;&gt; brackets=re.search(r\"[(){}[]]+\",s)\n&gt;&gt;&gt; brackets.group()\n</code></pre>\n\n<p>But it is only giving me last two brackets. </p>\n\n<pre><code>'}]'\n</code></pre>\n\n<p>Why is that? Shouldn't it fetch one or more of any of the brackets in the character set?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433967982, "post_id": 30766067, "comment_id": 49585311, "body": "is 7z is /usr/local/bin?"}, {"owner": {"reputation": 262, "user_id": 1033217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/547af8abf0b68059f072a66983571b88?s=128&d=identicon&r=PG", "display_name": "Utkonos", "link": "https://stackoverflow.com/users/1033217/utkonos"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433971670, "post_id": 30766067, "comment_id": 49587403, "body": "Yes: $ whereis 7z 7z: /usr/local/bin/7z"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433971694, "post_id": 30766067, "comment_id": 49587418, "body": "you file is also executable?"}, {"owner": {"reputation": 262, "user_id": 1033217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/547af8abf0b68059f072a66983571b88?s=128&d=identicon&r=PG", "display_name": "Utkonos", "link": "https://stackoverflow.com/users/1033217/utkonos"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433971774, "post_id": 30766067, "comment_id": 49587456, "body": "-rwxr-xr-x  1 myuser  myuser       439 Jun 10 21:19 test.py"}, {"owner": {"reputation": 262, "user_id": 1033217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/547af8abf0b68059f072a66983571b88?s=128&d=identicon&r=PG", "display_name": "Utkonos", "link": "https://stackoverflow.com/users/1033217/utkonos"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433971792, "post_id": 30766067, "comment_id": 49587465, "body": "-r-xr-xr-x  1 root  wheel  112 Jun  4 18:38 /usr/local/bin/7z"}, {"owner": {"reputation": 262, "user_id": 1033217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/547af8abf0b68059f072a66983571b88?s=128&d=identicon&r=PG", "display_name": "Utkonos", "link": "https://stackoverflow.com/users/1033217/utkonos"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433971814, "post_id": 30766067, "comment_id": 49587476, "body": "Yes, executable is not the problem. It&#39;s a path problem."}], "answers": [{"tags": [], "owner": {"reputation": 262, "user_id": 1033217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/547af8abf0b68059f072a66983571b88?s=128&d=identicon&r=PG", "display_name": "Utkonos", "link": "https://stackoverflow.com/users/1033217/utkonos"}, "is_accepted": true, "score": 2, "last_activity_date": 1433972594, "creation_date": 1433972594, "answer_id": 30767832, "question_id": 30766067, "link": "https://stackoverflow.com/questions/30766067/using-python-subprocess-call-with-crontab/30767832#30767832", "title": "Using Python subprocess.call with crontab?", "body": "<p>The answer is that the PATH variable in crontab must use an absolute path like so:</p>\n\n<pre><code>PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin\n</code></pre>\n\n<p>That fixes everything.</p>\n"}], "owner": {"reputation": 262, "user_id": 1033217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/547af8abf0b68059f072a66983571b88?s=128&d=identicon&r=PG", "display_name": "Utkonos", "link": "https://stackoverflow.com/users/1033217/utkonos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3642, "favorite_count": 1, "accepted_answer_id": 30767832, "answer_count": 1, "score": 0, "last_activity_date": 1433972594, "creation_date": 1433966110, "question_id": 30766067, "link": "https://stackoverflow.com/questions/30766067/using-python-subprocess-call-with-crontab", "title": "Using Python subprocess.call with crontab?", "body": "<p>I'm running into a wall with regards to using subprocess.call in a python script running in a crontab. I have isolated this problem to be subprocess not able to find the 7z executable. I'm running this on FreeBSD 10.1, but that should not make a difference. I have tried adding PYTHONPATH=$PATH to crontab, I have tried adding shell=True to subprocess.call, and I have tried using /usr/loca/bin/7z rather than 7z. None of these have fixed the problem. The error that I get is the following:</p>\n\n<pre><code>/usr/local/bin/7z: realpath: not found\n/usr/local/bin/7z: dirname: not found\nexec: /../libexec/p7zip/7z: not found\n</code></pre>\n\n<p>Here is how I'm calling the script in crontab:</p>\n\n<pre><code>PATH=$PATH:/usr/local/bin\n@every_minute           $HOME/test.py &gt;&gt; $HOME/test.error 2&gt;&amp;1\n</code></pre>\n\n<p>Here is the contents of my script (test.py):</p>\n\n<pre><code>#!/usr/bin/env python3\n# -*- coding: utf-8 -*-\n\nimport os\nimport subprocess\nimport tempfile\n\nthing = 'blahblahblah'\n\nerrors = open('/home/myuser/error', 'wb')\n\nwith tempfile.TemporaryDirectory() as tmpdirname:\n    tempthing = os.path.join(tmpdirname, thing)\n    fh = open(tempthing, 'wb')\n    fh.write(b'123')\n    fh.close()\n    zipname = '{}.zip'.format(thing)\n    ziptempfile = os.path.join(tmpdirname, zipname)\n    zipper = subprocess.call(['7z', 'a', '-p{}'.format('something'), '-tzip', '-y', ziptempfile, tempthing], stdout=errors, stderr=subprocess.STDOUT)\n</code></pre>\n"}, {"tags": ["python", "django", "odt"], "owner": {"reputation": 47, "user_id": 3892475, "user_type": "registered", "profile_image": "https://graph.facebook.com/1408004629/picture?type=large", "display_name": "Rinat Bakiev", "link": "https://stackoverflow.com/users/3892475/rinat-bakiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1434000296, "creation_date": 1433966078, "last_edit_date": 1434000296, "question_id": 30766055, "link": "https://stackoverflow.com/questions/30766055/django-how-to-insert-tags-into-header-footer-odt-file", "title": "Django - How to insert tags into header/footer odt file", "body": "<p>I am using <code>.odt</code> templates, using <code>django-webodt</code>. How can I insert some tags, like <code>{{ agr.get_number }}</code>, into the header and footer of my template.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1433966122, "post_id": 30766052, "comment_id": 49584253, "body": "What&#39;s wrong with using regex&#39;s &quot;or&quot; operator, <code>|</code>?"}, {"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 2, "creation_date": 1433966128, "post_id": 30766052, "comment_id": 49584258, "body": "<code>text = re.sub(&#39;([.]+[ ]) | ([,]+[ ])+&#39;, &quot; &quot;, text)</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1433966272, "post_id": 30766101, "comment_id": 49584330, "body": "I think the OP wants the period, not any character, meaning <code>r&#39;[\\.,]+ +&#39;</code>."}, {"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 3, "creation_date": 1433966340, "post_id": 30766101, "comment_id": 49584359, "body": "Inside of character sets, <code>.</code> means not any character but literally <code>.</code>."}], "tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 7, "last_activity_date": 1433966217, "creation_date": 1433966217, "answer_id": 30766101, "question_id": 30766052, "link": "https://stackoverflow.com/questions/30766052/apply-multiple-regular-expressions-to-a-text-at-same-time-in-python/30766101#30766101", "title": "Apply multiple regular expressions to a text at same time in python", "body": "<p>You are already using character sets, put both . and , into one::</p>\n\n<pre><code>text = re.sub('[.,]+ +', \" \", text)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 204, "user_id": 1857805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51647164d42a0b1435994530b9540201?s=128&d=identicon&r=PG", "display_name": "rajesh.kanakabandi", "link": "https://stackoverflow.com/users/1857805/rajesh-kanakabandi"}, "is_accepted": false, "score": 0, "last_activity_date": 1433966561, "creation_date": 1433966561, "answer_id": 30766206, "question_id": 30766052, "link": "https://stackoverflow.com/questions/30766052/apply-multiple-regular-expressions-to-a-text-at-same-time-in-python/30766206#30766206", "title": "Apply multiple regular expressions to a text at same time in python", "body": "<p>since you need to replace only the . or , followed by a space. you could use</p>\n\n<pre><code>text = re.sub('[.,]\\s', \" \", text)\n</code></pre>\n"}], "owner": {"reputation": 2145, "user_id": 670629, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/d05c3511edb008d7bd397012b8bfe6d2?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/670629/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 30766101, "answer_count": 2, "score": -1, "last_activity_date": 1433966561, "creation_date": 1433966066, "last_edit_date": 1433966256, "question_id": 30766052, "link": "https://stackoverflow.com/questions/30766052/apply-multiple-regular-expressions-to-a-text-at-same-time-in-python", "title": "Apply multiple regular expressions to a text at same time in python", "body": "<p>Assume I have a text containing <code>'.'</code> and <code>','</code> and sometimes they both are followed by empty spaces. I need to write a regular expression which removes [<code>'.'</code> and space] or [<code>','</code> and space] from the whole text. I have the regular expression as mentioned below:-</p>\n\n<pre><code>text = re.sub('[.]+[ ]+', \" \", text)\ntext = re.sub('[,]+[ ]+', \" \", text)\n</code></pre>\n\n<p>Here, I am applying multiple patterns to string multiple times. Is there an efficient way to do this in one pass? Also, the output is stored in the same variable. Is this an efficient way or we do have a copy created in this case. Kindly let me know.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 332, "user_id": 1558160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b8aa66a43d6ea08b5ee57fdf38afb5d?s=128&d=identicon&r=PG", "display_name": "Spice", "link": "https://stackoverflow.com/users/1558160/spice"}, "edited": false, "score": 3, "creation_date": 1433965984, "post_id": 30765961, "comment_id": 49584187, "body": "<code>foo</code> should <code>import bar</code>, since it&#39;s in the same directory."}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1433966410, "post_id": 30765961, "comment_id": 49584387, "body": "You never need to use backslashes for pathname separation.  Even MSDOS and Windows allow normal (forward) slashes.  By always using forward slashes, you won&#39;t accidentally specify a formfeed (\\f) as you might be here."}, {"owner": {"reputation": 158, "user_id": 3761494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfcff17d7d14d585c927f1dbd693f33b?s=128&d=identicon&r=PG&f=1", "display_name": "JeLLyB0x3r", "link": "https://stackoverflow.com/users/3761494/jellyb0x3r"}, "edited": false, "score": 0, "creation_date": 1433966820, "post_id": 30765961, "comment_id": 49584598, "body": "wallyk, my mistake when writing this up. I always autocomplete with tab in my terminal and puts the correct slash in for me, so I don&#39;t usually use backslashes for pathname separation. Didn&#39;t know about the formfeed though, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "is_accepted": true, "score": 1, "last_activity_date": 1433966341, "creation_date": 1433966341, "answer_id": 30766142, "question_id": 30765961, "link": "https://stackoverflow.com/questions/30765961/python-importing-from-subdirectory/30766142#30766142", "title": "Python Importing from Subdirectory", "body": "<p>When you run <code>python main.py</code> it works, because the directory of your input script is in the <code>main/</code> directory, and therefore all modules are found relative to that directory.</p>\n\n<p>When running <code>foo.py</code> directly, there is no subdirectory named <code>sub</code> relative to the directory of <code>foo.py</code>.</p>\n\n<p>One workaround is to <code>import bar</code> since it is in the same directory as foo. However this will fail in cases where <code>foo.py</code> and <code>bar.py</code> are in separate directories.</p>\n\n<p>If you want to run <code>foo.py</code> directly, try adding the <code>main/</code> directory to your module search path. For example in <code>foo.py</code>:</p>\n\n<pre><code># foo.py\nimport sys\nimport os\nif __name__ == '__main__':\n    foo_dir = os.path.dirname(os.path.realpath(__file__))\n    parent_dir = os.path.dirname(foo_dir)\n    sys.path.append(parent_dir)\n\nimport bar\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4917034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74c5549cecbfe94c42ad006505092acb?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Andr&#233;s Ordo&#241;ez P.", "link": "https://stackoverflow.com/users/4917034/carlos-andr%c3%a9s-ordo%c3%b1ez-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1433966936, "creation_date": 1433966936, "answer_id": 30766324, "question_id": 30765961, "link": "https://stackoverflow.com/questions/30765961/python-importing-from-subdirectory/30766324#30766324", "title": "Python Importing from Subdirectory", "body": "<p>You can use __ init__.py (without spaces)</p>\n\n<p>For example, on \"main/main.py\" use only:</p>\n\n<pre><code>#main.py    \nimport sub\n</code></pre>\n\n<p>Create a new file with this path \"main/sub/__ init__.py\"</p>\n\n<pre><code>#__init__.py\nimport foo\nimport bar\n</code></pre>\n"}], "owner": {"reputation": 158, "user_id": 3761494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfcff17d7d14d585c927f1dbd693f33b?s=128&d=identicon&r=PG&f=1", "display_name": "JeLLyB0x3r", "link": "https://stackoverflow.com/users/3761494/jellyb0x3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 1, "accepted_answer_id": 30766142, "answer_count": 2, "score": 0, "last_activity_date": 1433966936, "creation_date": 1433965785, "last_edit_date": 1433966224, "question_id": 30765961, "link": "https://stackoverflow.com/questions/30765961/python-importing-from-subdirectory", "title": "Python Importing from Subdirectory", "body": "<p>My file setup is like this:</p>\n\n<ul>\n<li>main/main.py</li>\n<li>main/sub/foo.py</li>\n<li>main/sub/bar.py</li>\n</ul>\n\n<p>main has <code>import sub.foo</code>, foo has <code>import sub.bar</code></p>\n\n<p><code>python main</code> works fine. But <code>python sub\\foo</code> doesn't work, it doesn't recognize <code>sub</code> in <code>import sub.bar</code>. I want to be able to run <code>main</code> as well as <code>foo</code> by themselves, how can I do this properly in python3.4.1?</p>\n\n<p>EDIT:\nIf I change foo to <code>import bar</code>, then <code>python main</code> says that it doesn't recognize bar in <code>import sub.foo</code></p>\n"}, {"tags": ["python", "vmware", "pyvmomi"], "owner": {"reputation": 578, "user_id": 4166299, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-LvoclXgPMzs/AAAAAAAAAAI/AAAAAAAAADA/WUiVl__aW5s/photo.jpg?sz=128", "display_name": "Derek Chadwell", "link": "https://stackoverflow.com/users/4166299/derek-chadwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2521, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1587368155, "creation_date": 1433965728, "question_id": 30765940, "link": "https://stackoverflow.com/questions/30765940/how-do-i-modify-an-existing-vm-templates-only-ethernet-adapters-ip-address-wit", "title": "How do I modify an existing vm template&#39;s only ethernet adapter&#39;s IP address with pyvmomi", "body": "<p>Below is the code I think should be used to modify the network adapter IP of an ethernet adapter for a windows VM while cloning a VM from a template using pyvmomi and virtual center. It doesn't work, the VM clones but the network adapter is not modified. I only seem to be finding examples that assume there are no adapters at all and creating new ones. I could use some help figuring out what I'm doing wrong:</p>\n\n<pre><code>def clone_vm(\ncontent, template, vm_name, si, ip,\ndatacenter_name, vm_folder, datastore_name,\ncluster_name, resource_pool, power_on):\n\"\"\"\nClone a VM from a template/VM, datacenter_name, vm_folder, datastore_name\ncluster_name, resource_pool, and power_on are all optional.\n\"\"\"\n\n# if none git the first one\ndatacenter = get_obj(content, [vim.Datacenter], datacenter_name)\n\nif vm_folder:\n    destfolder = get_obj(content, [vim.Folder], vm_folder)\nelse:\n    destfolder = datacenter.vmFolder\n\nif datastore_name:\n    datastore = get_obj(content, [vim.Datastore], datastore_name)\nelse:\n    datastore = get_obj(\n        content, [vim.Datastore], template.datastore[0].info.name)\n\n# if None, get the first one\ncluster = get_obj(content, [vim.ClusterComputeResource], cluster_name)\n\nif resource_pool:\n    resource_pool = get_obj(content, [vim.ResourcePool], resource_pool)\nelse:\n    resource_pool = cluster.resourcePool\n\n# set relospec\nrelospec = vim.vm.RelocateSpec()\nrelospec.datastore = datastore\nrelospec.pool = resource_pool\n\ndeviceToChange = None\nfor device in template.config.hardware.device:\n        if isinstance(device, vim.vm.device.VirtualEthernetCard):\n            deviceToChange = device\n\n\n#guest NIC settings\nnic = vim.vm.device.VirtualDeviceSpec()\nnic.operation = vim.vm.device.VirtualDeviceSpec.Operation.edit  # or add to make a new one\nnic.device = deviceToChange\nnic.device.wakeOnLanEnabled = True\nnic.device.addressType = 'assigned'   #mac address assigned by virtual center\nnic.device.key = 4000  # 4000 seems to be the value to use for a vmxnet3 device\n# nic.device.deviceInfo = vim.Description()\n# nic.device.deviceInfo.label = \"Network Adapter\"\n# nic.device.deviceInfo.summary = \"summary text here\"\n\n\n#\"adapter map\"  no idea wtf this is\nguest_map = vim.vm.customization.AdapterMapping()\nguest_map.adapter = vim.vm.customization.IPSettings()\nguest_map.adapter.ip = vim.vm.customization.FixedIp()\nguest_map.adapter.ip.ipAddress = str(ip)\nguest_map.adapter.subnetMask = str(subnet)\nguest_map.adapter.gateway = str(gateway)\n\n# DNS settings\nglobalip = vim.vm.customization.GlobalIPSettings()\nglobalip.dnsServerList = dns\n# globalip.dnsSuffixList = ip_settings[0]['domain']         #do I need this? I don't think so\n\n# Hostname settings\nident = vim.vm.customization.Sysprep()\nident.guiUnattended = vim.vm.customization.GuiUnattended()\nident.guiUnattended.autoLogon = False #the machine does not auto-logon\nident.guiUnattended.password  = vim.vm.customization.Password()\nident.guiUnattended.password.value = vm_password\nident.guiUnattended.password.plainText = True  #the password passed over is not encrypted \nident.userData = vim.vm.customization.UserData()\nident.userData.fullName = \"Derek Chadwell\"\nident.userData.orgName = \"NetApp\"\nident.userData.computerName = vim.vm.customization.FixedName()\nident.userData.computerName.name = vm_name\nident.identification = vim.vm.customization.Identification()\n\n\n# create spec to change host IP address\ncustomspec = vim.vm.customization.Specification()\ncustomspec.nicSettingMap = [guest_map]\ncustomspec.globalIPSettings = globalip\ncustomspec.identity = ident\n\n# VM config spec\nvmconf = vim.vm.ConfigSpec()\n#vmconf.numCPUs = deploy_settings['cpus']\n#vmconf.memoryMB = deploy_settings['mem']\n#vmconf.cpuHotAddEnabled = True\n#vmconf.memoryHotAddEnabled = True\nvmconf.deviceChange = [nic]\n\n\nclonespec = vim.vm.CloneSpec()\nclonespec.location = relospec\nclonespec.config = vmconf\nclonespec.customization = customspec\nclonespec.powerOn = power_on\nclonespec.template = False\n\nprint \"cloning VM...\"\ntask = template.Clone(folder=destfolder, name=vm_name, spec=clonespec)\nwait_for_task(task)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "matplotlib"], "comments": [{"owner": {"reputation": 1599, "user_id": 2074794, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AMt3A.jpg?s=128&g=1", "display_name": "kaveh", "link": "https://stackoverflow.com/users/2074794/kaveh"}, "edited": false, "score": 1, "creation_date": 1433966719, "post_id": 30765932, "comment_id": 49584550, "body": "It seems x, y1, and y2 must be of same dimension, which in your case are not. <code>ypos</code> is <code>[2,4]</code>, while <code>x</code> has 5 elements. I&#39;m not sure if it&#39;s what you want, but you must fill the non-positive values of <code>y</code> with a number. Something like <code>ypos = [i if i &gt; 0 else 0 for i in y]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 3, "last_activity_date": 1433967491, "last_edit_date": 1433967491, "creation_date": 1433967035, "answer_id": 30766358, "question_id": 30765932, "link": "https://stackoverflow.com/questions/30765932/fill-between-y-0-and-positive-values-of-y/30766358#30766358", "title": "Fill between y = 0 and positive values of y", "body": "<p>You could use</p>\n\n<pre><code>where=np.array(y)&gt;0\n</code></pre>\n\n<p>to restrict where the filled region will be drawn and use </p>\n\n<pre><code>interpolate=True\n</code></pre>\n\n<p>to have <a href=\"http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.fill_between\" rel=\"nofollow noreferrer\"><code>fill_between</code></a> find the points of intersection:</p>\n\n<hr>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nx = np.array([1,2,3,4,5])\ny = np.array([0,2,-3,4,-5])\nplt.plot(x,y)\nplt.fill_between(x, 0, y, where=y&gt;0, interpolate=True)\nplt.show()\n</code></pre>\n\n<p>yields</p>\n\n<p><img src=\"https://i.stack.imgur.com/nTVT9.png\" alt=\"enter image description here\"></p>\n"}], "owner": {"reputation": 367, "user_id": 4881130, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/930299577035033/picture?type=large", "display_name": "Victor Jos&#233;", "link": "https://stackoverflow.com/users/4881130/victor-jos%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1743, "favorite_count": 0, "accepted_answer_id": 30766358, "answer_count": 1, "score": 1, "last_activity_date": 1433967491, "creation_date": 1433965701, "question_id": 30765932, "link": "https://stackoverflow.com/questions/30765932/fill-between-y-0-and-positive-values-of-y", "title": "Fill between y = 0 and positive values of y", "body": "<p>I'm practicing the fill_between matplotlib function.</p>\n\n<p>What I want to do is to fill the area between y = 0 and the positive values of y and let the area between y = 0 and the negative values of y unfilled.</p>\n\n<p>Something like:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nx = [1,2,3,4,5]\ny = [0,2,-3,4,-5]\n\nypos = [i for i in y if i&gt;0]\n\nplt.plot(x,y)\nplt.fill_between(x,0,ypos)\nplt.show()\n</code></pre>\n\n<p>The error it gives is ValueError: Argument dimensions are incompatible. I've checked some possible solutions but I couldn't get it working.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 4161, "user_id": 449215, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/02b9a3cc087554f3426b4c83c1c68bff?s=128&d=identicon&r=PG", "display_name": "Dov Grobgeld", "link": "https://stackoverflow.com/users/449215/dov-grobgeld"}, "is_accepted": true, "score": 1, "last_activity_date": 1433966561, "creation_date": 1433966561, "answer_id": 30766205, "question_id": 30765926, "link": "https://stackoverflow.com/questions/30765926/root-finding-equation-with-1-variable-integrate/30766205#30766205", "title": "root finding equation with 1 variable integrate", "body": "<p>Try something like <a href=\"http://en.wikipedia.org/wiki/Golden_section_search\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Golden_section_search</a>, i.e. guess an upper and lower bound for <code>t</code>, and then minimize the difference of area as gotten by <code>integrate.quad(x3,0,1)</code> and your expected <code>area</code>. When this difference is at its minimum up to some tolerance that you determine, you have found your <code>t</code>.</p>\n"}], "owner": {"reputation": 55, "user_id": 4802129, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-BbsTmrRW58k/AAAAAAAAAAI/AAAAAAAACw4/AYnUgci3tjw/photo.jpg?sz=128", "display_name": "Sanjay", "link": "https://stackoverflow.com/users/4802129/sanjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 30766205, "answer_count": 1, "score": 0, "last_activity_date": 1433966862, "creation_date": 1433965684, "last_edit_date": 1433966862, "question_id": 30765926, "link": "https://stackoverflow.com/questions/30765926/root-finding-equation-with-1-variable-integrate", "title": "root finding equation with 1 variable integrate", "body": "<p>I am new to python. I have looked into scipy modules to find this but unsuccessful. Her is a my problem. I have an equation t is the unknown 0.3 is the initial guess. However I know area is given, c and x is given. I need to find for a given area, c and x(0to1) what is the value of t. I am not sure how to do this? any ideas?</p>\n\n<pre><code>from scipy import integrate\nimport numpy as np\n\nc=1\nt=0.3\n## x = 0 to 1\ndef evalfunction(x, c, t): return 5*t*c*(0.2969*float(np.sqrt(x/c))+(-0.1260)*(x/c)+(-0.3516)*(x/c)**2+(0.2843)*(x/c)**3+(-0.1015)*(x/c)**4)\nx3 = lambda x:evalfunction(x, c, t)\n#x3 = lambda x: 5*t*c*(0.2969*float(np.sqrt(x/c))+(-0.1260)*(x/c)+(-0.3516)*(x/c)**2+(0.2843)*(x/c)**3+(-0.1015)*(x/c)**4)\narea = integrate.quad(x3, 0, 1)\nenter code here\n</code></pre>\n"}, {"tags": ["python", "http", "client", "server", "multiplayer"], "answers": [{"comments": [{"owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 0, "creation_date": 1433966832, "post_id": 30766182, "comment_id": 49584607, "body": "The server doesn&#39;t have to reply to a connection instantly. Often you can wait till Player 1 moves before replying to Player 2&#39;s connection. etc."}, {"owner": {"reputation": 2150, "user_id": 3998503, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Kgueg.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/3998503/john"}, "reply_to_user": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 0, "creation_date": 1433967832, "post_id": 30766182, "comment_id": 49585210, "body": "Yeah, this is one of those open ended and many ways to skin a cat questions."}], "tags": [], "owner": {"reputation": 2150, "user_id": 3998503, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Kgueg.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/3998503/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1433966480, "creation_date": 1433966480, "answer_id": 30766182, "question_id": 30765881, "link": "https://stackoverflow.com/questions/30765881/python-multiplayer-noughts-and-crosses/30766182#30766182", "title": "Python Multiplayer noughts and crosses", "body": "<p>The easiest way to have both clients interact through a server is to have both clients poll the server for updates. (you can do server side events, but that is way too complicated for what you are looking for).</p>\n\n<p>However, if they are within the same network I recommend opening a socket server and client on each device directly communicating.  </p>\n\n<p>The way I would do it is to this:</p>\n\n<ol>\n<li>Sockets servers are opened on both machines</li>\n<li>Whoever starts the game opens a socket client and sends a the move directly to server, then reopens a socket server</li>\n<li>The next move the computer opens a client and sends a move back to server.</li>\n</ol>\n\n<p>This takes out all the unnecessary code for running a server.</p>\n\n<p>See the python manual for sockets. There are great examples at the bottom for both server/client side.</p>\n\n<p><a href=\"https://docs.python.org/2/library/socket.html\" rel=\"nofollow\">https://docs.python.org/2/library/socket.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 4996491, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LvD4x5oddGA/AAAAAAAAAAI/AAAAAAAAAEE/OTcRjVwP4I0/photo.jpg?sz=128", "display_name": "Will Harris", "link": "https://stackoverflow.com/users/4996491/will-harris"}, "is_accepted": false, "score": 0, "last_activity_date": 1433966762, "creation_date": 1433966762, "answer_id": 30766266, "question_id": 30765881, "link": "https://stackoverflow.com/questions/30765881/python-multiplayer-noughts-and-crosses/30766266#30766266", "title": "Python Multiplayer noughts and crosses", "body": "<p>You might want to take a look at ZeroMQ. <a href=\"http://zeromq.org/\" rel=\"nofollow\">http://zeromq.org/</a></p>\n\n<p>Specifically, you'd want PyZMQ. <a href=\"http://zeromq.github.io/pyzmq/api/zmq.html\" rel=\"nofollow\">http://zeromq.github.io/pyzmq/api/zmq.html</a></p>\n\n<p>It's simple to set up, and you can connect the two computers directly. You'd be able to send messages back and forth between the two. </p>\n\n<p>Definitely read the docs, but you're probably going to want a Request/Reply pattern.</p>\n"}, {"tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": true, "score": 0, "last_activity_date": 1433966949, "creation_date": 1433966949, "answer_id": 30766330, "question_id": 30765881, "link": "https://stackoverflow.com/questions/30765881/python-multiplayer-noughts-and-crosses/30766330#30766330", "title": "Python Multiplayer noughts and crosses", "body": "<p>You can start from <a href=\"http://twistedmatrix.com/documents/12.0.0/core/examples/chatserver.py\" rel=\"nofollow\">the twisted chatserver example</a></p>\n\n<pre><code>\"\"\"The most basic chat protocol possible.\n\nrun me with twistd -y chatserver.py, and then connect with multiple\ntelnet clients to port 1025\n\"\"\"\n\nfrom twisted.protocols import basic\n\n\n\nclass MyChat(basic.LineReceiver):\n    def connectionMade(self):\n        print \"Got new client!\"\n        self.factory.clients.append(self)\n\n    def connectionLost(self, reason):\n        print \"Lost a client!\"\n        self.factory.clients.remove(self)\n\n    def lineReceived(self, line):\n        print \"received\", repr(line)\n        for c in self.factory.clients:\n            c.message(line)\n\n    def message(self, message):\n        self.transport.write(message + '\\n')\n\n\nfrom twisted.internet import protocol\nfrom twisted.application import service, internet\n\nfactory = protocol.ServerFactory()\nfactory.protocol = MyChat\nfactory.clients = []\n\napplication = service.Application(\"chatserver\")\ninternet.TCPServer(1025, factory).setServiceParent(application)\n</code></pre>\n\n<p>The clients can use Python's builtin <a href=\"https://docs.python.org/2/library/telnetlib.html\" rel=\"nofollow\"><code>telnetlib</code></a> to connect</p>\n\n<p>Later on you can upgrade to using twisted for the client connections if you like.</p>\n"}], "owner": {"reputation": 65, "user_id": 4458858, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-L6xBlTCgb4k/AAAAAAAAAAI/AAAAAAAAAFs/tAwbWXupiYo/photo.jpg?sz=128", "display_name": "Felix Johnson", "link": "https://stackoverflow.com/users/4458858/felix-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "closed_date": 1433972567, "accepted_answer_id": 30766330, "answer_count": 3, "score": -1, "last_activity_date": 1433966949, "creation_date": 1433965550, "question_id": 30765881, "link": "https://stackoverflow.com/questions/30765881/python-multiplayer-noughts-and-crosses", "closed_reason": "Needs more focus", "title": "Python Multiplayer noughts and crosses", "body": "<p>So I made a single player noughts and crosses in Python a little while ago in school.</p>\n\n<pre><code>score=[[' ',' ',' '],[' ',' ',' '],[' ',' ',' ']]\nglobal attempts\nattempts = 0\nfrom random import randint\nfrom time import sleep\n\ndef grid(): #draws playing grid\n    hideturtle()\n    speed(0)\n    pensize(0)\n    penup()\n    setpos(-200, -67)\n    pendown()\n    fd(400)\n    penup()\n    setpos(-200, 66)\n    pendown()\n    fd(400)\n    penup()\n    seth(90)\n    setpos(-67, -200)\n    pendown()\n    fd(400)\n    penup()\n    setpos(66, -200)\n    pendown()\n    fd(400)\n\ndef drawShape(s, x, y): #draws shape in grid box x and y = coord, s = shape type\n    hideturtle()\n    speed(100)\n    pensize(6)\n    penup()\n    if s == 'X': #draws 'X'\n        pencolor(\"orange\")\n        setpos(-266+(133*x), -266+(133*y))\n        pendown()\n        seth(135)\n        fd(50)\n        rt(180)\n        fd(100)\n        rt(180)\n        fd(50)\n        rt(90)\n        fd(50)\n        rt(180)\n        fd(100) \n    elif s == 'O': #draws 'O'\n        pencolor(\"green\")\n        setpos(-266+(133*x), -266+(133*y)-40)\n        seth(0)\n        pendown()\n        circle(40)\n\n\n\ndef ai(): #EXPERIMENTAL AI\n    x=0\n    y=0\n    d='O'\n    e='O'\n    f='O'\n    for i in range(3): #checks positions\n        if i == 0:\n            d=' '\n        elif i == 1:\n            d='O'\n            e=' '\n        elif i == 2:\n            d='O'\n            e='O'\n            f=' '\n        for c in range(3):\n            if score[c][0] == d and score[c][1] == e and score[c][2] == f:\n                x = c+1\n                y = i+1\n                print('v',c)\n            elif score[c][0] == d and score[c][1] == e and score[c][2] == f:\n                x = i=1\n                y = c+1\n                print('h',c)\n        if score[0][0] == d and score[1][1] == e and score[2][2] == f:\n            print('lr',i)\n            x = i+1\n            y = i+1\n        elif score[0][2] == d and score[1][1] == e and score[2][0] == f:\n            print('rl',i)\n            x = i+1\n            y = 4-i\n    d='X'\n    e='X'\n    f='X'\n    if x == 0 and y == 0: #checks oposition positions\n        for i in range(3):\n            if i == 0:\n                d=' '\n            elif i == 1:\n                d='X'\n                e=' '\n            elif i == 2:\n                d='X'\n                e='X'\n                f=' '\n            for c in range(3): \n                if score[c][0] == d and score[c][1] == e and score[c][2] == f:\n                    x = c+1\n                    y = i+1\n                    print('op v')\n                elif score[c][0] == d and score[c][1] == e and score[c][2] == f:\n                    x = i=1\n                    y = c+1\n                    print('op v')\n            if score[0][0] == d and score[1][1] == e and score[2][2] == f:\n                x = i+1\n                y = i+1\n                print('op bt')\n            elif score[0][2] == d and score[1][1] == e and score[2][0] == f:\n                x = i+1\n                y = 4-i\n                print('op tb')\n\n    if x == 0 and y == 0: #if no playable positions uses random\n        x = randint(1,3)\n        y = randint(1,3)\n    return x, y\n\ndef valid(u,x,y): #checks player move is valid\n    global attempts\n    if x &gt; 3 or y &gt; 3:\n        print ('Coordinate must be between 1 &amp; 3')\n    elif x == '' or y == '':\n        print(\"Enter something!\")\n    elif score[y-1][x-1] == ' ':\n        score[y-1][x-1] = u\n        drawShape(u, x, y)\n        attempts +=1\n        return True\n    elif score[y-1][x-1] == u:\n        print(\"You've already gone here! \")\n        return False\n    elif score[y-1][x-1] != u:\n        print(\"The other player is here! \")\n        return False\n\n\ndef userAgent(u): #makes AI or user prompts and sets array\n    global attempts\n    global a\n    global b\n    if u == 0:\n        a, b = ai()\n        score[b-1][a-1] = 'O'\n        print(\"The computer is taking its turn...\")\n        print(a,b)\n        sleep(1)\n        drawShape('O', a, b)\n        attempts +=1\n    else:\n        x = input(\"Player \"+u+\": enter x coordinate (1-3) \")\n        y = input(\"Player \"+u+\": enter y coordinate (1-3) \")\n        try:\n            x = int(x)\n            y = int(y)\n        except ValueError:\n            print(\"That's not a valid number!\")\n            userAgent(u)\n        while True:\n            if valid(u,x,y) == True:\n                break\n            x = input(\"Player \"+u+\": enter x coordinate (1-3) \")\n            y = input(\"Player \"+u+\": enter y coordinate (1-3) \")\n            try:\n                x = int(x)\n                y = int(y)\n            except ValueError:\n                print(\"That's not a valid number!\")\n\n\ndef checkWin(n): #checks for a player win (3 in row) or stalemate\n    for i in range(3):\n        if score[i][0] == n and score[i][1] == n and score[i][2] == n:\n            print(\"Player \"+n+\" won!\")\n            return True\n        elif score[0][i] == n and score[1][i] == n and score[2][i] == n:\n            print(\"Player \"+n+\" won!\")\n            return True\n    if score[0][0] == n and score[1][1] == n and score[2][2] == n:\n        print(\"Player \"+n+\" won!\")\n        return True\n    elif score[0][2] == n and score[1][1] == n and score[2][0] == n:\n        print(\"Player \"+n+\" won!\")\n        return True\n    elif attempts == 9:\n        print(\"Stalemate!\")\n        return True\n    else:\n        return False\n\ndef printGrid():\n    print(score[2])\n    print(score[1])\n    print(score[0])\n\nfrom turtle import *\ngrid()\np = input(\"Are you playing by yourself? (SINGLE PLAYER EXPERIMENTAL) (y/n) \")\n\nwhile True: #runs game until player win\n    if p == 'y':\n        userAgent('X')\n        printGrid()\n        if checkWin('X') == True:\n            break\n        userAgent(0)\n        printGrid()\n        if checkWin('O') == True:\n            break\n\n    elif p == 'n':\n        userAgent('X')\n\n        if checkWin('X') == True:\n            break\n        userAgent('O')\n\n        if checkWin('O') == True:\n            break\n\n    else:\n        print(\"You need to type y or n - try again!\")\n        p = input(\"Are you playing by yourself? (SINGLE PLAYER EXPERIMENTAL) (y/n) \")\n\ninput('Press ENTER to exit')\n</code></pre>\n\n<p>Just ignore that AI function it's now permanently experimental (doesn't work) but that's not the problem.</p>\n\n<p>I'm helping out at my school's open evening and I thought it'd be cool if 2 people could play against each other on different computers. So I'd host the server on my home PC with port forwarding, doing all the logic, and the clients would just take inputs, send them onto the server and draw moves by both players. I know HTTP POST/GET, but how would I get the server to tell the client the other player moved? I've looked into Twisted and it seems good, but I really don't understand classes (I've only been programming for a little while).</p>\n\n<p>This would be on a school computer so I have no access to port forwarding for the client. Ideally I'd also have an IP whitelist so only the computer's I want can access the server....</p>\n\n<p>Soooo can anyone help me out here? I just need to understand what code I'd need for the server and how the client would interact with it. Thanks :)</p>\n"}, {"tags": ["python", "splunk"], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 114671, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e27931030ab22395a3c20592f4cb0e1c?s=128&d=identicon&r=PG", "display_name": "meunierd", "link": "https://stackoverflow.com/users/114671/meunierd"}, "edited": false, "score": 0, "creation_date": 1434646670, "post_id": 30791469, "comment_id": 49879690, "body": "I&#39;m on splunkcloud, I&#39;ve opened a support ticket to get the port opened so we&#39;ll see if that does it. Thank you!"}], "tags": [], "owner": {"reputation": 991, "user_id": 2785681, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/671f4fb458f521c8cb24cbcfd8fe61ee?s=128&d=identicon&r=PG", "display_name": "Shakeel", "link": "https://stackoverflow.com/users/2785681/shakeel"}, "is_accepted": false, "score": 0, "last_activity_date": 1434056860, "creation_date": 1434056860, "answer_id": 30791469, "question_id": 30765842, "link": "https://stackoverflow.com/questions/30765842/running-python-splunk-sdk-test-suite/30791469#30791469", "title": "Running Python Splunk SDK Test Suite", "body": "<p>Are you using Splunk Enterprise or Splunk Cloud?</p>\n\n<p>If you're using Splunk Enterprise, you can test your credentials over curl like so:</p>\n\n<pre><code>curl -k -u name@company.com:changeme https://localhost:8089/services/server/info/server-info\n</code></pre>\n\n<p>I believe port 8089, the REST API port, is blocked in Splunk Cloud by default so the Python SDK won't be able to connect to it. I would contact support and see if they can unblock the port for you.</p>\n\n<p>Your .splunkrc file should look something like this</p>\n\n<pre><code>host=company.splunkcloud.net\nport=8089\nusername=name@company.com\npassword=changeme\nscheme=https\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 114671, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e27931030ab22395a3c20592f4cb0e1c?s=128&d=identicon&r=PG", "display_name": "meunierd", "link": "https://stackoverflow.com/users/114671/meunierd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434056860, "creation_date": 1433965402, "question_id": 30765842, "link": "https://stackoverflow.com/questions/30765842/running-python-splunk-sdk-test-suite", "title": "Running Python Splunk SDK Test Suite", "body": "<p>I'm trying to run the Splunk python sdk test suite and running into connection errors.</p>\n\n<p>I access splunk via <code>company</code>.splunkcloud.net and name@company.com/password for credentials. I'm not entirely sure what should be in my .splunkrc, is the localhost they refer to the agent?</p>\n\n<p>I'm a little lost. Any advice on what's required to run the test suite is much appreciated.</p>\n"}, {"tags": ["python", "path", "system", "pyinstaller", "pyaudio"], "answers": [{"tags": [], "owner": {"reputation": 7459, "user_id": 3903832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hn87F.png?s=128&g=1", "display_name": "Yoel", "link": "https://stackoverflow.com/users/3903832/yoel"}, "is_accepted": true, "score": 1, "last_activity_date": 1434375320, "last_edit_date": 1434375320, "creation_date": 1434120090, "answer_id": 30805836, "question_id": 30765826, "link": "https://stackoverflow.com/questions/30765826/pyaudio-recognizer-error-cannot-find-path/30805836#30805836", "title": "Pyaudio recognizer error cannot find path", "body": "<p>I think the problem is that <em>speech_recognition</em>'s bundled FLAC conversion utility can't be located since <em>PyInstaller</em> doesn't know it's required.</p>\n\n<p>Therefore, you need to explicitly ask <em>PyInstaller</em> to include it during the build process. Try creating a file called <code>hook-speech_recognition.py</code> with the following content:</p>\n\n<pre><code>from PyInstaller.hooks.hookutils import collect_data_files\ndatas = collect_data_files('speech_recognition')\n</code></pre>\n\n<p>When building, supply the path to the directory in which you placed the file as a value to the <code>--additional-hooks-dir</code> argument, as follows:</p>\n\n<pre><code>--additional-hooks-dir=&lt;path_to_directory_of_hook_file&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7459, "user_id": 3903832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hn87F.png?s=128&g=1", "display_name": "Yoel", "link": "https://stackoverflow.com/users/3903832/yoel"}, "edited": false, "score": 0, "creation_date": 1434383190, "post_id": 30835653, "comment_id": 49742526, "body": "I believe this doesn&#39;t merit an answer of its own. Instead, I think you should just have posted this as a comment to <a href=\"http://stackoverflow.com/a/30805836/3903832\">my answer</a>. Doing so would have also notified me of my error, which I could have fixed immediately."}, {"owner": {"reputation": 76, "user_id": 4822270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaa602380bbbf53ea4a6f9bf4de059?s=128&d=identicon&r=PG", "display_name": "Anthony Zhang", "link": "https://stackoverflow.com/users/4822270/anthony-zhang"}, "reply_to_user": {"reputation": 7459, "user_id": 3903832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hn87F.png?s=128&g=1", "display_name": "Yoel", "link": "https://stackoverflow.com/users/3903832/yoel"}, "edited": false, "score": 0, "creation_date": 1434512947, "post_id": 30835653, "comment_id": 49804694, "body": "I agree, but I don&#39;t have enough reputation to comment on your post."}], "tags": [], "owner": {"reputation": 76, "user_id": 4822270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89aaa602380bbbf53ea4a6f9bf4de059?s=128&d=identicon&r=PG", "display_name": "Anthony Zhang", "link": "https://stackoverflow.com/users/4822270/anthony-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1434324915, "creation_date": 1434324915, "answer_id": 30835653, "question_id": 30765826, "link": "https://stackoverflow.com/questions/30765826/pyaudio-recognizer-error-cannot-find-path/30835653#30835653", "title": "Pyaudio recognizer error cannot find path", "body": "<p>Yoel is correct (but <code>speech_recognition</code> in the code should be in double quotes).</p>\n\n<p>I have added detailed instructions for how to set up the library with PyInstaller in <a href=\"https://github.com/Uberi/speech_recognition/commit/ac9bf913291813295f626292c86dac6522abf46a\" rel=\"nofollow\">this commit</a>.</p>\n\n<p>I have also submitted a <a href=\"https://github.com/pyinstaller/pyinstaller/pull/1296\" rel=\"nofollow\">pull request</a> to PyInstaller to include speech_recognition integration by default. Once merged, adding these hooks will no longer be necessary.</p>\n"}], "owner": {"reputation": 183, "user_id": 2254468, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2a1db0dd1e9e568077af1fe6b59623f5?s=128&d=identicon&r=PG&f=1", "display_name": "uhuuyouneverknow", "link": "https://stackoverflow.com/users/2254468/uhuuyouneverknow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 30805836, "answer_count": 2, "score": 0, "last_activity_date": 1588434516, "creation_date": 1433965329, "last_edit_date": 1433975931, "question_id": 30765826, "link": "https://stackoverflow.com/questions/30765826/pyaudio-recognizer-error-cannot-find-path", "title": "Pyaudio recognizer error cannot find path", "body": "<p>I have written a basic program that uses pyttsx, speechrecognition and tkinter libraries basically. I have a function like as follows. </p>\n\n<pre><code>def dunno():\n    with sr.Microphone() as source:\n        audio = r.listen(source)\n    try:\n        print('1')\n        textEntry = r.recognize(audio)\n        print('2')\n        print(textEntry)\n        engine.say(\"You said: \"+ textEntry)\n        engine.runAndWait()\n    except LookupError:\n        engine.say(\"Sorry I couldn't understand what you said\")\n        engine.runAndWait()\n</code></pre>\n\n<p>Also I have defined my Recognizer and microphone as follows:</p>\n\n<pre><code>r = sr.Recognizer()\n</code></pre>\n\n<p>Then I have created an exe file using pyinstaller by using command prompt like as follows:</p>\n\n<pre><code>pyinstaller --onedir --onefile --name=somesing \"C:\\Users\\ABCD\\Desktop\\SomeFolder\\mycodefile.py\"\n</code></pre>\n\n<p>It is creating the .exe file without any problem. Also I have created another .exe file for another version that is without speech recognition but it and it is working well. This one gives an output with error like:</p>\n\n<pre><code>1\nThe system cannot find the path specified\n1\nThe system cannot find the path specified\n1\nThe system cannot find the path specified\n</code></pre>\n\n<p>Here I have called the function dunno() three times and have taken this error. The python script is working really nice butexe file is not working.</p>\n\n<p>Edit: I have tried with a wav file too. I don't think problem is about Microphone. It should be about the recognizer inside.</p>\n"}, {"tags": ["python", "excel", "pandas", "unicode"], "comments": [{"owner": {"reputation": 1113, "user_id": 2240326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5468c04108295fd6c2f311442bdb5691?s=128&d=identicon&r=PG", "display_name": "Gecko", "link": "https://stackoverflow.com/users/2240326/gecko"}, "edited": false, "score": 0, "creation_date": 1433967684, "post_id": 30765820, "comment_id": 49585126, "body": "this worked for me once: df[&#39;somecol&#39;].values.astype(&#39;unicode&#39;)  <a href=\"https://github.com/pydata/pandas/issues/7758\" rel=\"nofollow noreferrer\">github.com/pydata/pandas/issues/7758</a>"}, {"owner": {"reputation": 24415, "user_id": 3730397, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/d1OmM.png?s=128&g=1", "display_name": "firelynx", "link": "https://stackoverflow.com/users/3730397/firelynx"}, "edited": false, "score": 0, "creation_date": 1434026363, "post_id": 30765820, "comment_id": 49612048, "body": "Do yourself a big favour and switch to python3 right away. Encoding problems are all solved in python3."}], "answers": [{"tags": [], "owner": {"reputation": 3302, "user_id": 1672826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oHzb8.jpg?s=128&g=1", "display_name": "skytaker", "link": "https://stackoverflow.com/users/1672826/skytaker"}, "is_accepted": false, "score": 4, "last_activity_date": 1559075939, "last_edit_date": 1559075939, "creation_date": 1461688454, "answer_id": 36870767, "question_id": 30765820, "link": "https://stackoverflow.com/questions/30765820/python-pandas-read-excel-returns-unicodedecodeerror-on-describe/36870767#36870767", "title": "python pandas read_excel returns UnicodeDecodeError on describe()", "body": "<p>Try this method suggested <a href=\"https://stackoverflow.com/questions/26856793/pandas-read-excel-with-chinese-filename\">here</a>:</p>\n\n<pre><code>df=pd.read_excel('tmp.xlsx',encoding=sys.getfilesystemencoding())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2521, "user_id": 557213, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a8d76157b3f8fe619d75d7fabee2e7c?s=128&d=identicon&r=PG", "display_name": "ihightower", "link": "https://stackoverflow.com/users/557213/ihightower"}, "is_accepted": false, "score": 1, "last_activity_date": 1533194760, "last_edit_date": 1533194760, "creation_date": 1491676345, "answer_id": 43298880, "question_id": 30765820, "link": "https://stackoverflow.com/questions/30765820/python-pandas-read-excel-returns-unicodedecodeerror-on-describe/43298880#43298880", "title": "python pandas read_excel returns UnicodeDecodeError on describe()", "body": "<p>Hope this helps someone.</p>\n\n<p>I had this error:</p>\n\n<pre><code>UnicodeDecodeError: 'ascii' codec can't decode byte ....\n</code></pre>\n\n<p>after reading an Excel File <code>df = pd.read_excel...</code> and trying to assign a new column to the dataframe like this <code>df['new_col'] = 'foo bar'</code></p>\n\n<p>After closer inspection, I found the problem to be. There were some <code>'nan'</code> columns in the dataframe due to missing column headers. After dropping the 'nan' columns using the following code, everything else was ok.</p>\n\n<pre><code>df = df.dropna(axis=1,how='all')\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4834388, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-l3wmIMUisaM/AAAAAAAAAAI/AAAAAAAADtA/Up7psZT8P84/photo.jpg?sz=128", "display_name": "hsinger", "link": "https://stackoverflow.com/users/4834388/hsinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31111, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1559075939, "creation_date": 1433965313, "question_id": 30765820, "link": "https://stackoverflow.com/questions/30765820/python-pandas-read-excel-returns-unicodedecodeerror-on-describe", "title": "python pandas read_excel returns UnicodeDecodeError on describe()", "body": "<p>I love pandas, but I am having real problems with Unicode errors. read_excel() returns the dreaded Unicode error:</p>\n\n<pre><code>import pandas as pd\ndf=pd.read_excel('tmp.xlsx',encoding='utf-8')\ndf.describe()\n\n---------------------------------------------------------------------------\nUnicodeDecodeError                        Traceback (most recent call last)\n...\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 259: ordinal not in range(128)\n</code></pre>\n\n<p>I figured out that the original Excel had  &nbsp;  (non-breaking space) at the end of many cells, probably to avoid conversion of long digit strings to float.</p>\n\n<p>One way around this is to strip the cells, but there must be something better.</p>\n\n<pre><code>for col in df.columns:\n    df[col]=df[col].str.strip()\n</code></pre>\n\n<p>I am using anaconda2.2.0 win64, with pandas 0.16</p>\n"}, {"tags": ["python", "csv"], "answers": [{"tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1433965886, "creation_date": 1433965886, "answer_id": 30765991, "question_id": 30765818, "link": "https://stackoverflow.com/questions/30765818/how-can-i-compare-two-columns-in-two-different-rows-in-python/30765991#30765991", "title": "How can i compare two columns in two different rows in python", "body": "<p>Your start looks good:</p>\n\n<pre><code>def filter_dups(iterable):\n      prev = None\n      for line in iterable:\n          if line.startswith(\"E\"):\n              if prev.split(None, 1)[0] == line.split(None, 1)[0]:\n                  prev = None\n              else:\n                  if prev is not None:\n                      yield prev\n                  else:\n                      prev = line\n          else:\n              yield line\n              prev = None\n      if prev is not None:\n          yield prev\n\n  with open(\"no_dup.txt\", 'r') as fh_in:\n      with open(\"no_dup_out.txt\", 'r') as fh_out:\n          fh_out.writelines(filter_dups(fh_in))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11906, "user_id": 4842742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ExYH.jpg?s=128&g=1", "display_name": "sobolevn", "link": "https://stackoverflow.com/users/4842742/sobolevn"}, "edited": false, "score": 0, "creation_date": 1433966352, "post_id": 30766000, "comment_id": 49584365, "body": "It is a good usecase for <a href=\"https://docs.python.org/2/library/collections.html#collections.defaultdict\" rel=\"nofollow noreferrer\">defaultdict</a> and <a href=\"https://docs.python.org/2/library/collections.html#collections.OrderedDict\" rel=\"nofollow noreferrer\">OrderedDict</a>."}, {"owner": {"reputation": 1809, "user_id": 1755155, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/db3138f886c63075fdfc1efcf171fc39?s=128&d=identicon&r=PG", "display_name": "upendra", "link": "https://stackoverflow.com/users/1755155/upendra"}, "edited": false, "score": 0, "creation_date": 1433966651, "post_id": 30766000, "comment_id": 49584510, "body": "How do i get the whole row for the <code>entry</code> ?"}, {"owner": {"reputation": 96, "user_id": 4996491, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LvD4x5oddGA/AAAAAAAAAAI/AAAAAAAAAEE/OTcRjVwP4I0/photo.jpg?sz=128", "display_name": "Will Harris", "link": "https://stackoverflow.com/users/4996491/will-harris"}, "edited": false, "score": 0, "creation_date": 1433966894, "post_id": 30766000, "comment_id": 49584645, "body": "Oh wow, yeah that doesn&#39;t cover it. I&#39;ll edit my answer, but I&#39;d instead change the dict value to be a list of lines."}], "tags": [], "owner": {"reputation": 96, "user_id": 4996491, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LvD4x5oddGA/AAAAAAAAAAI/AAAAAAAAAEE/OTcRjVwP4I0/photo.jpg?sz=128", "display_name": "Will Harris", "link": "https://stackoverflow.com/users/4996491/will-harris"}, "is_accepted": true, "score": 1, "last_activity_date": 1433966985, "last_edit_date": 1433966985, "creation_date": 1433965924, "answer_id": 30766000, "question_id": 30765818, "link": "https://stackoverflow.com/questions/30765818/how-can-i-compare-two-columns-in-two-different-rows-in-python/30766000#30766000", "title": "How can i compare two columns in two different rows in python", "body": "<p>I think a clean way of doing this would be to make a map of each entry -> list of lines.</p>\n\n<pre><code>entries = {}\nwith open('no_dup.txt', 'r') as fh_in:\n    for line in fg_in:\n        entry = line.split()[0]\n        if entry in entries:\n            entries[entry].append(line)\n        else:\n            entries[entry] = [line]\nfor matches in entries.iteritems():\n    if len(matches) == 1:\n        print matches[0]\n</code></pre>\n\n<p>You should note that this will NOT preserve the order of entries.</p>\n"}, {"comments": [{"owner": {"reputation": 1809, "user_id": 1755155, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/db3138f886c63075fdfc1efcf171fc39?s=128&d=identicon&r=PG", "display_name": "upendra", "link": "https://stackoverflow.com/users/1755155/upendra"}, "edited": false, "score": 0, "creation_date": 1433975929, "post_id": 30766096, "comment_id": 49589091, "body": "In your output i don&#39;t want this line <code>ENSGMOG00000015632  ENSORLG00000010585</code> but only the other two lines"}], "tags": [], "owner": {"reputation": 16165, "user_id": 547820, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/29c81a4724590af17510dcd846eea411?s=128&d=identicon&r=PG", "display_name": "Sait", "link": "https://stackoverflow.com/users/547820/sait"}, "is_accepted": false, "score": 0, "last_activity_date": 1433966198, "creation_date": 1433966198, "answer_id": 30766096, "question_id": 30765818, "link": "https://stackoverflow.com/questions/30765818/how-can-i-compare-two-columns-in-two-different-rows-in-python/30766096#30766096", "title": "How can i compare two columns in two different rows in python", "body": "<p>You can use this:</p>\n\n<pre><code>with open('a.txt','r') as inputFile:\n   lines = inputFile.readlines()\n\nprev = lines[0]\n\nfor i in range(1, len(lines)):\n   cur = lines[i]\n   if prev.split()[0] != cur.split()[0]:\n      print prev.strip()\n   prev = cur\n\nprint lines[-1].strip()\n</code></pre>\n\n<p>Input: </p>\n\n<pre><code>ENSGMOG00000015632  ENSORLG00000010573\nENSGMOG00000015632  ENSORLG00000010585\nENSGMOG00000003747  ENSORLG00000006947\nENSGMOG00000003748  ENSORLG00000004636\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>ENSGMOG00000015632  ENSORLG00000010585\nENSGMOG00000003747  ENSORLG00000006947\nENSGMOG00000003748  ENSORLG00000004636\n</code></pre>\n"}], "owner": {"reputation": 1809, "user_id": 1755155, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/db3138f886c63075fdfc1efcf171fc39?s=128&d=identicon&r=PG", "display_name": "upendra", "link": "https://stackoverflow.com/users/1755155/upendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 1, "accepted_answer_id": 30766000, "answer_count": 3, "score": -2, "last_activity_date": 1433966985, "creation_date": 1433965310, "question_id": 30765818, "link": "https://stackoverflow.com/questions/30765818/how-can-i-compare-two-columns-in-two-different-rows-in-python", "title": "How can i compare two columns in two different rows in python", "body": "<p>I want to go through each line of the a csv file and compare to see if the first field of line 1 is same as first field of next line and so on. If it finds a match then i would like ignore those two lines that contains the same fields and keep the lines where there is no match</p>\n\n<p>Here is an example dataset (no_dup.txt)</p>\n\n<pre><code>Ac_Gene_ID  M_Gene_ID\nENSGMOG00000015632  ENSORLG00000010573\nENSGMOG00000015632  ENSORLG00000010585\nENSGMOG00000003747  ENSORLG00000006947\nENSGMOG00000003748  ENSORLG00000004636\n</code></pre>\n\n<p>Basically i want to exclude line 1 and 2 since they contains the same fields (ENSGMOG00000015632) and keep lines 3 and 4</p>\n\n<p>Here is the code i have tried but couldn't finish it</p>\n\n<pre><code>prev = None\n\nwith open(\"no_dup.txt\", 'r') as fh_in:\n    for line in fh_in:\n        line = line.strip()\n        if line.startswith(\"E\"):\n            line1 = line.split()\n            print \"initial gene =\", line1[0]\n            if prev is not None or prev!= line1[0]:\n                prev = line1[0]\n</code></pre>\n"}, {"tags": ["python", "rabbitmq", "pika"], "comments": [{"owner": {"reputation": 140, "user_id": 2903262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cA70U.jpg?s=128&g=1", "display_name": "Sebasti&#225;n Olate Bustamante", "link": "https://stackoverflow.com/users/2903262/sebasti%c3%a1n-olate-bustamante"}, "edited": false, "score": 0, "creation_date": 1433967145, "post_id": 30765778, "comment_id": 49584780, "body": "Can you put all the consumer code?"}, {"owner": {"reputation": 204, "user_id": 1857805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51647164d42a0b1435994530b9540201?s=128&d=identicon&r=PG", "display_name": "rajesh.kanakabandi", "link": "https://stackoverflow.com/users/1857805/rajesh-kanakabandi"}, "reply_to_user": {"reputation": 140, "user_id": 2903262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cA70U.jpg?s=128&g=1", "display_name": "Sebasti&#225;n Olate Bustamante", "link": "https://stackoverflow.com/users/2903262/sebasti%c3%a1n-olate-bustamante"}, "edited": false, "score": 0, "creation_date": 1434037964, "post_id": 30765778, "comment_id": 49621141, "body": "I was able to fix it by just moving the basic_qos call to set the prefetch count to 1 on_channel_create call back method"}], "answers": [{"tags": [], "owner": {"reputation": 204, "user_id": 1857805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51647164d42a0b1435994530b9540201?s=128&d=identicon&r=PG", "display_name": "rajesh.kanakabandi", "link": "https://stackoverflow.com/users/1857805/rajesh-kanakabandi"}, "is_accepted": true, "score": 0, "last_activity_date": 1434037910, "creation_date": 1434037910, "answer_id": 30785636, "question_id": 30765778, "link": "https://stackoverflow.com/questions/30765778/pika-with-rabbitmq-message-distribution-accross-multiple-consumer-applications/30785636#30785636", "title": "Pika with RabbitMQ: Message distribution accross multiple consumer Applications from a single Queue", "body": "<p>I was able to fix it by just moving the basic_qos call to set the prefetch count to 1 on_channel_create call back method.</p>\n\n<p>for some reason setting prefetch value to 1 just before the basic_consume is not good enough. must be something to do with the pika's io loop.</p>\n"}], "owner": {"reputation": 204, "user_id": 1857805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51647164d42a0b1435994530b9540201?s=128&d=identicon&r=PG", "display_name": "rajesh.kanakabandi", "link": "https://stackoverflow.com/users/1857805/rajesh-kanakabandi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 30785636, "answer_count": 1, "score": 0, "last_activity_date": 1434037910, "creation_date": 1433965164, "question_id": 30765778, "link": "https://stackoverflow.com/questions/30765778/pika-with-rabbitmq-message-distribution-accross-multiple-consumer-applications", "title": "Pika with RabbitMQ: Message distribution accross multiple consumer Applications from a single Queue", "body": "<p>environment:\npython, pika, RabbitMQ.</p>\n\n<p>I have a Queue that has some 100 messages already.\nwhen 2 consumer applications are started one after the other, all the preexisting messages are being processed by the first consumer and not being distributed among the two consumers that are up and waiting for messages.</p>\n\n<p>how ever, any new Messages put on to the queue are being distributed among both the consumers.\nthe problem is if the consumer takes a long time to process, t<code>enter code here</code>he load is all on one consumer until the consumption of the initial preexisting messages from the queue.</p>\n\n<p>But, if the Consumer1 is killed, the messages get delivered to the Consumer2(which is expected.)</p>\n\n<p>I am using SelectionConnect, </p>\n\n<pre><code>prefetch_count=(tried both 0 and 1),\nprefetch_size = 0,\nno_ack = False,\n</code></pre>\n\n<p>is there a way to configure it such a way that, the preexisting messages on the queue will be shared across multiple consumers even if the consumers will be started at different times(like add more consumers based on the load as it increases).</p>\n\n<p>any help is appreciated.\nThank you.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "edited": false, "score": 0, "creation_date": 1433965308, "post_id": 30765750, "comment_id": 49583791, "body": "As I have said, <code>dst</code> is an existing directory. This is exactly what I want - to copy a file to a directory"}, {"owner": {"reputation": 2505, "user_id": 1929635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/adQln.png?s=128&g=1", "display_name": "boaz_shuster", "link": "https://stackoverflow.com/users/1929635/boaz-shuster"}, "edited": false, "score": 0, "creation_date": 1433965312, "post_id": 30765750, "comment_id": 49583793, "body": "yeah, the problem is that dst has to be the file path. try to do `shutil.copyfile(src, &#39;%s/%s&#39; % (dst, src.split()[-1]))"}, {"owner": {"reputation": 1878, "user_id": 98599, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bdb57938c676236c97c70ecdb12089aa?s=128&d=identicon&r=PG", "display_name": "Tuan Anh Hoang-Vu", "link": "https://stackoverflow.com/users/98599/tuan-anh-hoang-vu"}, "edited": false, "score": 0, "creation_date": 1433965392, "post_id": 30765750, "comment_id": 49583843, "body": "According to python doc: &#39;Copy the contents (no metadata) of the file named src to a file named dst&#39;. If you want to copy to a directory, try <code>shutil.copy</code>"}, {"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "reply_to_user": {"reputation": 2505, "user_id": 1929635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/adQln.png?s=128&g=1", "display_name": "boaz_shuster", "link": "https://stackoverflow.com/users/1929635/boaz-shuster"}, "edited": false, "score": 0, "creation_date": 1433965406, "post_id": 30765750, "comment_id": 49583854, "body": "@bshuster. Please, make an answer from your comment. If it works, I will accept it."}], "answers": [{"tags": [], "owner": {"reputation": 454, "user_id": 1492569, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GnbSZ.jpg?s=128&g=1", "display_name": "John Estess", "link": "https://stackoverflow.com/users/1492569/john-estess"}, "is_accepted": false, "score": 9, "last_activity_date": 1433978240, "last_edit_date": 1433978240, "creation_date": 1433965363, "answer_id": 30765832, "question_id": 30765750, "link": "https://stackoverflow.com/questions/30765750/copying-a-file-to-an-existing-directory-results-in-ioerror-error-21-is-a-direc/30765832#30765832", "title": "Copying a file to an existing directory results in IOError [Error 21] is a directory", "body": "<p>You're using the wrong function. You might want \"copy\":</p>\n\n<p><a href=\"https://docs.python.org/2/library/shutil.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/shutil.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "edited": false, "score": 0, "creation_date": 1433965549, "post_id": 30765859, "comment_id": 49583934, "body": "Thank you, sir! I will accept it in 8 minutes, when stackoverflow allows me to do it =)"}, {"owner": {"reputation": 2505, "user_id": 1929635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/adQln.png?s=128&g=1", "display_name": "boaz_shuster", "link": "https://stackoverflow.com/users/1929635/boaz-shuster"}, "reply_to_user": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "edited": false, "score": 0, "creation_date": 1433965688, "post_id": 30765859, "comment_id": 49584007, "body": "Thanks! I appreciate it ;-)"}, {"owner": {"reputation": 159, "user_id": 3740244, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001998750298/picture?type=large", "display_name": "user3740244", "link": "https://stackoverflow.com/users/3740244/user3740244"}, "edited": false, "score": 1, "creation_date": 1526579885, "post_id": 30765859, "comment_id": 87811210, "body": "Obrigado me ajudou muito \\o/"}], "tags": [], "owner": {"reputation": 2505, "user_id": 1929635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/adQln.png?s=128&g=1", "display_name": "boaz_shuster", "link": "https://stackoverflow.com/users/1929635/boaz-shuster"}, "is_accepted": true, "score": 7, "last_activity_date": 1433966026, "last_edit_date": 1495535288, "creation_date": 1433965474, "answer_id": 30765859, "question_id": 30765750, "link": "https://stackoverflow.com/questions/30765750/copying-a-file-to-an-existing-directory-results-in-ioerror-error-21-is-a-direc/30765859#30765859", "title": "Copying a file to an existing directory results in IOError [Error 21] is a directory", "body": "<p>You have already answered yourself in the question.</p>\n\n<p><code>dst</code> should be the path to the copied file. So if you want to copy the file to <code>/var/lib/my/</code> and your file is called <code>f1</code> then <code>dst</code> should be <code>/var/lib/my/f1.txt</code></p>\n\n<p>Try to use <code>shutil.copy</code> as suggested <a href=\"https://stackoverflow.com/a/30765832/1929635\">here</a> by <a href=\"https://stackoverflow.com/users/4894194/john-estess\">john-estess</a></p>\n\n<pre><code>shutil.copy(src, dst)\n</code></pre>\n\n<p>or try to fix this using the following snippet</p>\n\n<pre><code>shutil.copyfile(src, '%s/%s' % (dst, src.split('/')[-1]))\n</code></pre>\n\n<p>Assuming src is the path of the file you want to copy, such as <code>/var/log/apache/access.log</code>, and <code>dst</code> is the path to the directory, where you want to copy the file, for example, <code>/var/lib/my</code> then the new destination is <code>/var/lib/my/access.log</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 12279918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db10b6b91801057a8a255fbcb7bfcdc5?s=128&d=identicon&r=PG", "display_name": "Zernach", "link": "https://stackoverflow.com/users/12279918/zernach"}, "edited": false, "score": 0, "creation_date": 1594685133, "post_id": 62843841, "comment_id": 111206108, "body": "This is literally the solution. I&#39;m not sure why it was down-voted."}], "tags": [], "owner": {"reputation": 23, "user_id": 12279918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db10b6b91801057a8a255fbcb7bfcdc5?s=128&d=identicon&r=PG", "display_name": "Zernach", "link": "https://stackoverflow.com/users/12279918/zernach"}, "is_accepted": false, "score": 1, "last_activity_date": 1594950157, "last_edit_date": 1594950157, "creation_date": 1594426077, "answer_id": 62843841, "question_id": 30765750, "link": "https://stackoverflow.com/questions/30765750/copying-a-file-to-an-existing-directory-results-in-ioerror-error-21-is-a-direc/62843841#62843841", "title": "Copying a file to an existing directory results in IOError [Error 21] is a directory", "body": "<p>I was about to go insane until I figured this out. See code snippet to see how the source is the path to a file, AND the destination is also a path to a file (that doesn't yet exist until you run this function).</p>\n<pre><code>for file in orig_files:\n    shutil.copyfile(SOURCE_PATH + file_name, DEST_PATH + file_name)\n</code></pre>\n"}], "owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11759, "favorite_count": 1, "accepted_answer_id": 30765859, "answer_count": 3, "score": 8, "last_activity_date": 1594950157, "creation_date": 1433965094, "question_id": 30765750, "link": "https://stackoverflow.com/questions/30765750/copying-a-file-to-an-existing-directory-results-in-ioerror-error-21-is-a-direc", "title": "Copying a file to an existing directory results in IOError [Error 21] is a directory", "body": "<p>I get this error:</p>\n\n<pre><code>IOError [Error 21] is a directory\n</code></pre>\n\n<p>when I try to copy a file to an existing directory. I do it like this:</p>\n\n<pre><code>shutil.copyfile(src, dst)\n</code></pre>\n\n<p>where <code>src</code> is a file and <code>dst</code> is an existing directory. What I'm doing wrong?</p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 1445, "user_id": 3390630, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c695d817cd6bc5c998b74de62cda2ed3?s=128&d=identicon&r=PG&f=1", "display_name": "WayBehind", "link": "https://stackoverflow.com/users/3390630/waybehind"}, "edited": false, "score": 0, "creation_date": 1433993955, "post_id": 30770899, "comment_id": 49593698, "body": "Thank you very much for your feedback. It seems to be working, however when I render the hidden field in my template the initial value is a name field of the model in stead of the <code>PK</code>. Any suggestions how to render the ID/PK?"}, {"owner": {"reputation": 4108, "user_id": 977593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/afRtt.jpg?s=128&g=1", "display_name": "slackmart", "link": "https://stackoverflow.com/users/977593/slackmart"}, "reply_to_user": {"reputation": 1445, "user_id": 3390630, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c695d817cd6bc5c998b74de62cda2ed3?s=128&d=identicon&r=PG&f=1", "display_name": "WayBehind", "link": "https://stackoverflow.com/users/3390630/waybehind"}, "edited": false, "score": 0, "creation_date": 1433995161, "post_id": 30770899, "comment_id": 49593963, "body": "Django uses the value returned by the <code>__str__()</code> method defined in the model to show it in the form, so just alter that method and return the <code>self.pk</code>."}, {"owner": {"reputation": 4108, "user_id": 977593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/afRtt.jpg?s=128&g=1", "display_name": "slackmart", "link": "https://stackoverflow.com/users/977593/slackmart"}, "reply_to_user": {"reputation": 1445, "user_id": 3390630, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c695d817cd6bc5c998b74de62cda2ed3?s=128&d=identicon&r=PG&f=1", "display_name": "WayBehind", "link": "https://stackoverflow.com/users/3390630/waybehind"}, "edited": false, "score": 1, "creation_date": 1433995213, "post_id": 30770899, "comment_id": 49593978, "body": "something like: <code>def __str__(self): return str(self.pk)</code> with their respective indentation should works"}, {"owner": {"reputation": 1445, "user_id": 3390630, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c695d817cd6bc5c998b74de62cda2ed3?s=128&d=identicon&r=PG&f=1", "display_name": "WayBehind", "link": "https://stackoverflow.com/users/3390630/waybehind"}, "edited": false, "score": 0, "creation_date": 1433995984, "post_id": 30770899, "comment_id": 49594180, "body": "Excellent, that seems to work, I guess now I have to check for other errors as I did have <code>def __unicode__(self): return u&#39;%s&#39; % (self.name)</code> in that model. Any ways to have both? the <code>unicode</code> for name and the <code>str()</code>?"}, {"owner": {"reputation": 4108, "user_id": 977593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/afRtt.jpg?s=128&g=1", "display_name": "slackmart", "link": "https://stackoverflow.com/users/977593/slackmart"}, "reply_to_user": {"reputation": 1445, "user_id": 3390630, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c695d817cd6bc5c998b74de62cda2ed3?s=128&d=identicon&r=PG&f=1", "display_name": "WayBehind", "link": "https://stackoverflow.com/users/3390630/waybehind"}, "edited": false, "score": 0, "creation_date": 1433996111, "post_id": 30770899, "comment_id": 49594215, "body": "Ohh, use <code>__unicode__(self)</code> when python 2, <code>__str__(self)</code> on python 3k"}, {"owner": {"reputation": 1445, "user_id": 3390630, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c695d817cd6bc5c998b74de62cda2ed3?s=128&d=identicon&r=PG&f=1", "display_name": "WayBehind", "link": "https://stackoverflow.com/users/3390630/waybehind"}, "edited": false, "score": 0, "creation_date": 1433996444, "post_id": 30770899, "comment_id": 49594295, "body": "The <code>__str__(self)</code> is working OK but I know that I&#39;m using the <code>name</code> field elsewhere and I&#39;m not sure if I can have both, the <code>pk</code> and <code>name</code> as when I have both in place, the <code>initial</code> value is still returning the <code>name</code> field. What I meant is if I can somehow tell the form to use the <code>str</code> in stead of the <code>name</code> field."}, {"owner": {"reputation": 4108, "user_id": 977593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/afRtt.jpg?s=128&g=1", "display_name": "slackmart", "link": "https://stackoverflow.com/users/977593/slackmart"}, "reply_to_user": {"reputation": 1445, "user_id": 3390630, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c695d817cd6bc5c998b74de62cda2ed3?s=128&d=identicon&r=PG&f=1", "display_name": "WayBehind", "link": "https://stackoverflow.com/users/3390630/waybehind"}, "edited": false, "score": 0, "creation_date": 1434743927, "post_id": 30770899, "comment_id": 49927208, "body": "<a href=\"http://arunrocks.com/python-3-cheatsheet-for-djangonauts/#change-all-9595unicode9595-methods-into-9595str9595\" rel=\"nofollow noreferrer\">arunrocks.com/python-3-cheatsheet-for-djangonauts/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4108, "user_id": 977593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/afRtt.jpg?s=128&g=1", "display_name": "slackmart", "link": "https://stackoverflow.com/users/977593/slackmart"}, "is_accepted": true, "score": 2, "last_activity_date": 1433992557, "last_edit_date": 1433992557, "creation_date": 1433992245, "answer_id": 30770899, "question_id": 30765738, "link": "https://stackoverflow.com/questions/30765738/django-forms-self-fields-for-foreign-keys-and-session-values/30770899#30770899", "title": "Django Forms self.fields for Foreign Keys and Session Values?", "body": "<p>First make sure the <code>123</code> (or whatever) is a valid primary key for your model referenced in the <code>ForeignKey</code> field.</p>\n\n<p>You could prevent that in the place where you're adding the <code>value</code> item to the <code>session</code> dict.</p>\n\n<p>Now, the <code>initial</code> argument is looking for a valid object, so just give it that.</p>\n\n<pre><code>self.fields['myfield'] = forms.CharField(\n    initial=MyOtherModel.objects.get(pk=request.session['value'])\n)\n</code></pre>\n\n<p>Note: I'm supposing <code>MyOtherModel</code> is the <code>ForeignKey</code>.</p>\n"}], "owner": {"reputation": 1445, "user_id": 3390630, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c695d817cd6bc5c998b74de62cda2ed3?s=128&d=identicon&r=PG&f=1", "display_name": "WayBehind", "link": "https://stackoverflow.com/users/3390630/waybehind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1266, "favorite_count": 0, "accepted_answer_id": 30770899, "answer_count": 1, "score": 0, "last_activity_date": 1433992557, "creation_date": 1433965051, "question_id": 30765738, "link": "https://stackoverflow.com/questions/30765738/django-forms-self-fields-for-foreign-keys-and-session-values", "title": "Django Forms self.fields for Foreign Keys and Session Values?", "body": "<p>I have a form where I'm trying to add initial value to hidden filed from a <code>session</code>. </p>\n\n<p>When I use </p>\n\n<pre><code>self.fields['myfield'] = forms.CharField(initial=request.session['value']) \n</code></pre>\n\n<p>the session value is correctly rendered but I do get error:</p>\n\n<pre><code>Cannot assign \"u'123'\": \"Model.filed\" must be a \"Model\" instance. \n</code></pre>\n\n<p>I know the error is because it is a foreign key field.</p>\n\n<p>When I do </p>\n\n<pre><code>myfield = forms.CharField(initial=request.session['value'])\n</code></pre>\n\n<p>the form is working without errors but the <code>request.session['value']</code> is not rendered and the initial value is empty.</p>\n\n<p>Suggestions?</p>\n"}, {"tags": ["python", "flask", "flask-security"], "answers": [{"tags": [], "owner": {"reputation": 9195, "user_id": 1150599, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/ndWQ0.jpg?s=128&g=1", "display_name": "corvid", "link": "https://stackoverflow.com/users/1150599/corvid"}, "is_accepted": false, "score": 4, "last_activity_date": 1433965941, "creation_date": 1433965941, "answer_id": 30766002, "question_id": 30765628, "link": "https://stackoverflow.com/questions/30765628/user-authentication-for-flask-api-on-mobile/30766002#30766002", "title": "User authentication for Flask API on mobile", "body": "<p><a href=\"https://pythonhosted.org/Flask-JWT/\" rel=\"nofollow\">Flask-JWT</a> seems like a pretty straight-forward solution.</p>\n\n<p>Then on the front end you can just add an HTTP interceptor to add <code>X-Auth-Token</code> to the headers or something.</p>\n"}], "owner": {"reputation": 936, "user_id": 2468015, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/216f7c19ca15888f63c4817f1ec45846?s=128&d=identicon&r=PG", "display_name": "freethrow", "link": "https://stackoverflow.com/users/2468015/freethrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1448, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1433965941, "creation_date": 1433964741, "last_edit_date": 1433965084, "question_id": 30765628, "link": "https://stackoverflow.com/questions/30765628/user-authentication-for-flask-api-on-mobile", "title": "User authentication for Flask API on mobile", "body": "<p>I am making an API in Flask for a simple jQuery mobile + PhoneGap app to be packaged and downloaded. As I understand, all the calls to the database should be made with JavaScript, AJAX, and JSON. Since the app is about the user, and all of the views draw data from the logged user, I am not sure how to proceed with the authentication. As I understand, the workflow should be:</p>\n\n<ul>\n<li>user logs in (json encoded username and password)</li>\n<li>server generates token with expiration (i.e. 24h) for that user</li>\n<li>this token is saved on the mobile app as a cookie or in localstorage</li>\n<li>all of the calls to the server are done with this token which identifies the current user: <code>/api/token=12345</code></li>\n<li>when the toke expires, a new login prompt is required</li>\n</ul>\n\n<p>I thought of implementing this with <a href=\"https://pythonhosted.org/Flask-Security/api.html#flask_security.decorators.auth_token_required\" rel=\"nofollow\">Flask-Security's authentication token</a>.  Is there a more straightforward way of accomplishing this?</p>\n"}, {"tags": ["python", "python-3.4", "python-asyncio"], "comments": [{"owner": {"reputation": 9733, "user_id": 877069, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9b7fe7ecbea69ba0bf0166b2d8c21b5f?s=128&d=identicon&r=PG", "display_name": "Nick Chammas", "link": "https://stackoverflow.com/users/877069/nick-chammas"}, "edited": false, "score": 0, "creation_date": 1433964887, "post_id": 30765606, "comment_id": 49583581, "body": "In case it matters, I&#39;m running Python 3.4.3 on OS X 10.10.3."}], "answers": [{"comments": [{"owner": {"reputation": 9733, "user_id": 877069, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9b7fe7ecbea69ba0bf0166b2d8c21b5f?s=128&d=identicon&r=PG", "display_name": "Nick Chammas", "link": "https://stackoverflow.com/users/877069/nick-chammas"}, "edited": false, "score": 0, "creation_date": 1433965420, "post_id": 30765761, "comment_id": 49583859, "body": "Can you clarify how this works and why it&#39;s preferable to simply capturing <code>KeyboardInterrupt</code> as I did in my example? The interrupt seems to work fine. Cleaning up the tasks left behind seems to be the problem. Is it because the event loop is not handling the interrupt itself?"}, {"owner": {"reputation": 7379, "user_id": 1020667, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/225429bee670de56fadefc4ce4e2dbf5?s=128&d=identicon&r=PG", "display_name": "Ambroz Bizjak", "link": "https://stackoverflow.com/users/1020667/ambroz-bizjak"}, "reply_to_user": {"reputation": 9733, "user_id": 877069, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9b7fe7ecbea69ba0bf0166b2d8c21b5f?s=128&d=identicon&r=PG", "display_name": "Nick Chammas", "link": "https://stackoverflow.com/users/877069/nick-chammas"}, "edited": false, "score": 0, "creation_date": 1433968295, "post_id": 30765761, "comment_id": 49585519, "body": "Generally when you have an event loop you should handle all kinds of events within the event loop. I cannot say why KeyboardInterrupt would have problems specifically. Consider though that it may interrupt essentially any code executing within the event loop (but I cannot say that for sure since I do not know the details of the design)."}, {"owner": {"reputation": 7379, "user_id": 1020667, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/225429bee670de56fadefc4ce4e2dbf5?s=128&d=identicon&r=PG", "display_name": "Ambroz Bizjak", "link": "https://stackoverflow.com/users/1020667/ambroz-bizjak"}, "reply_to_user": {"reputation": 9733, "user_id": 877069, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9b7fe7ecbea69ba0bf0166b2d8c21b5f?s=128&d=identicon&r=PG", "display_name": "Nick Chammas", "link": "https://stackoverflow.com/users/877069/nick-chammas"}, "edited": false, "score": 0, "creation_date": 1433968467, "post_id": 30765761, "comment_id": 49585641, "body": "How it works does not seem described in the docs. I suppose it&#39;s the &quot;self-pipe&quot; trick, you should look into the Python source if you want to know."}], "tags": [], "owner": {"reputation": 7379, "user_id": 1020667, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/225429bee670de56fadefc4ce4e2dbf5?s=128&d=identicon&r=PG", "display_name": "Ambroz Bizjak", "link": "https://stackoverflow.com/users/1020667/ambroz-bizjak"}, "is_accepted": false, "score": 5, "last_activity_date": 1433965115, "creation_date": 1433965115, "answer_id": 30765761, "question_id": 30765606, "link": "https://stackoverflow.com/questions/30765606/whats-the-correct-way-to-clean-up-after-an-interrupted-event-loop/30765761#30765761", "title": "What&#39;s the correct way to clean up after an interrupted event loop?", "body": "<p>Unless you are on Windows, set up event-loop based signal handlers for SIGINT (and also SIGTERM so you can run it as a service). In these handlers, you may either exit the event loop immediately, or initiate some kind of cleanup sequence and exit later.</p>\n\n<p>Example in official Python documentation: <a href=\"https://docs.python.org/3.4/library/asyncio-eventloop.html#set-signal-handlers-for-sigint-and-sigterm\" rel=\"noreferrer\">https://docs.python.org/3.4/library/asyncio-eventloop.html#set-signal-handlers-for-sigint-and-sigterm</a></p>\n"}, {"comments": [{"owner": {"reputation": 9733, "user_id": 877069, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9b7fe7ecbea69ba0bf0166b2d8c21b5f?s=128&d=identicon&r=PG", "display_name": "Nick Chammas", "link": "https://stackoverflow.com/users/877069/nick-chammas"}, "edited": false, "score": 0, "creation_date": 1433969959, "post_id": 30766124, "comment_id": 49586486, "body": "Ah, so nothing happens to a task outside of the event loop, not even a cancellation, right? That sounds like a simple rule to keep in mind."}, {"owner": {"reputation": 9733, "user_id": 877069, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9b7fe7ecbea69ba0bf0166b2d8c21b5f?s=128&d=identicon&r=PG", "display_name": "Nick Chammas", "link": "https://stackoverflow.com/users/877069/nick-chammas"}, "edited": false, "score": 0, "creation_date": 1433970049, "post_id": 30766124, "comment_id": 49586541, "body": "Just tried this out and it seems to work as advertised. Sweet! Side note: I also noticed that if you pass <code>return_exceptions=True</code> to <code>gather()</code>, you can leave out the call to <code>tasks.exception()</code> since the exceptions are being returned as results."}, {"owner": {"reputation": 77965, "user_id": 2073595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ugcXJ.jpg?s=128&g=1", "display_name": "dano", "link": "https://stackoverflow.com/users/2073595/dano"}, "reply_to_user": {"reputation": 9733, "user_id": 877069, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9b7fe7ecbea69ba0bf0166b2d8c21b5f?s=128&d=identicon&r=PG", "display_name": "Nick Chammas", "link": "https://stackoverflow.com/users/877069/nick-chammas"}, "edited": false, "score": 0, "creation_date": 1433971406, "post_id": 30766124, "comment_id": 49587250, "body": "@NickChammas Right, the loop must be running for the cancellation to take effect <a href=\"https://docs.python.org/3/library/asyncio-task.html#asyncio.Task.cancel\" rel=\"nofollow noreferrer\">(as the noted in the docs)</a>. And yes, in general nothing is going to happen with an <code>asyncio.Task</code> unless the loop is actively driving it. Using <code>return_exceptions=True</code> is a good trick, as long as you&#39;re ok with real exceptions (e.g. something other than <code>CancelledError</code>) being thrown from your wrapped coroutines not actually getting raised."}, {"owner": {"reputation": 9733, "user_id": 877069, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9b7fe7ecbea69ba0bf0166b2d8c21b5f?s=128&d=identicon&r=PG", "display_name": "Nick Chammas", "link": "https://stackoverflow.com/users/877069/nick-chammas"}, "edited": false, "score": 1, "creation_date": 1434412693, "post_id": 30766124, "comment_id": 49756840, "body": "dano - Does the behavior you described here apply the same when a coroutine raises a regular exception (as opposed to the user raising a keyboard interrupt)? I&#39;m finding that <a href=\"https://gist.github.com/nchammas/c1486678a0b36f38f22e\" rel=\"nofollow noreferrer\">the call to <code>loop.run_forever()</code> just keeps going and the canceled tasks just run anyway</a>. Is this expected?"}, {"owner": {"reputation": 77965, "user_id": 2073595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ugcXJ.jpg?s=128&g=1", "display_name": "dano", "link": "https://stackoverflow.com/users/2073595/dano"}, "reply_to_user": {"reputation": 9733, "user_id": 877069, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9b7fe7ecbea69ba0bf0166b2d8c21b5f?s=128&d=identicon&r=PG", "display_name": "Nick Chammas", "link": "https://stackoverflow.com/users/877069/nick-chammas"}, "edited": false, "score": 0, "creation_date": 1434415614, "post_id": 30766124, "comment_id": 49757547, "body": "@NickChammas In that example code, the call to <code>run_in_complete(tasks)</code> isn&#39;t being interrupted, it&#39;s actually completing and the <code>tasks</code> Future is being marked as done. Because of that, your call to <code>tasks.cancel</code> is actually a no-op. That also means your call to <code>run_forever()</code> will actually run forever, since there&#39;s no pending <code>run_until_complete</code> callback to stop it. And since the other tasks weren&#39;t cancelled by the <code>tasks.cancel()</code> call, they&#39;ll just keep right on running when the loop starts up again."}, {"owner": {"reputation": 77965, "user_id": 2073595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ugcXJ.jpg?s=128&g=1", "display_name": "dano", "link": "https://stackoverflow.com/users/2073595/dano"}, "reply_to_user": {"reputation": 9733, "user_id": 877069, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9b7fe7ecbea69ba0bf0166b2d8c21b5f?s=128&d=identicon&r=PG", "display_name": "Nick Chammas", "link": "https://stackoverflow.com/users/877069/nick-chammas"}, "edited": false, "score": 1, "creation_date": 1434415995, "post_id": 30766124, "comment_id": 49757638, "body": "@NickChammas Actually, you could probably make a pretty good case that the <code>_GatheringFuture</code> returned by  <code>asyncio.gather</code> should be enhanced to support calling <code>cancel()</code> on its children, even if the <code>_GatheringFuture</code> itself is already done, to support this use-case. Though I suppose if you want this behavior you may be better off using <code>asyncio.wait</code> with the <code>FIRST_EXCEPTION</code> option."}, {"owner": {"reputation": 9733, "user_id": 877069, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9b7fe7ecbea69ba0bf0166b2d8c21b5f?s=128&d=identicon&r=PG", "display_name": "Nick Chammas", "link": "https://stackoverflow.com/users/877069/nick-chammas"}, "edited": false, "score": 0, "creation_date": 1434477018, "post_id": 30766124, "comment_id": 49790680, "body": "Ah, so the 1 coroutine raising an exception marks the &quot;gathered&quot; future as complete. I understand. Thank you for explaining all this to me."}, {"owner": {"reputation": 77965, "user_id": 2073595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ugcXJ.jpg?s=128&g=1", "display_name": "dano", "link": "https://stackoverflow.com/users/2073595/dano"}, "reply_to_user": {"reputation": 9733, "user_id": 877069, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9b7fe7ecbea69ba0bf0166b2d8c21b5f?s=128&d=identicon&r=PG", "display_name": "Nick Chammas", "link": "https://stackoverflow.com/users/877069/nick-chammas"}, "edited": false, "score": 0, "creation_date": 1434555630, "post_id": 30766124, "comment_id": 49831502, "body": "@NickChammas Yep, that&#39;s exactly what&#39;s happening. Happy to help :)"}], "tags": [], "owner": {"reputation": 77965, "user_id": 2073595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ugcXJ.jpg?s=128&g=1", "display_name": "dano", "link": "https://stackoverflow.com/users/2073595/dano"}, "is_accepted": true, "score": 48, "last_activity_date": 1433966285, "creation_date": 1433966285, "answer_id": 30766124, "question_id": 30765606, "link": "https://stackoverflow.com/questions/30765606/whats-the-correct-way-to-clean-up-after-an-interrupted-event-loop/30766124#30766124", "title": "What&#39;s the correct way to clean up after an interrupted event loop?", "body": "<p>When you CTRL+C, the event loop gets stopped, so your calls to <code>t.cancel()</code> don't actually take effect. For the tasks to be cancelled, you need to start the loop back up again.</p>\n\n<p>Here's how you can handle it:</p>\n\n<pre><code>import asyncio\n\n@asyncio.coroutine\ndef shleepy_time(seconds):\n    print(\"Shleeping for {s} seconds...\".format(s=seconds))\n    yield from asyncio.sleep(seconds)\n\n\nif __name__ == '__main__':\n    loop = asyncio.get_event_loop()\n\n    # Side note: Apparently, async() will be deprecated in 3.4.4.\n    # See: https://docs.python.org/3.4/library/asyncio-task.html#asyncio.async\n    tasks = asyncio.gather(\n        asyncio.async(shleepy_time(seconds=5)),\n        asyncio.async(shleepy_time(seconds=10))\n    )\n\n    try:\n        loop.run_until_complete(tasks)\n    except KeyboardInterrupt as e:\n        print(\"Caught keyboard interrupt. Canceling tasks...\")\n        tasks.cancel()\n        loop.run_forever()\n        tasks.exception()\n    finally:\n        loop.close()\n</code></pre>\n\n<p>Once we catch <code>KeyboardInterrupt</code>, we  call <code>tasks.cancel()</code> and then start the <code>loop</code> up again. <code>run_forever</code> will actually exit as soon as <code>tasks</code> gets cancelled (note that cancelling the <code>Future</code> returned by <code>asyncio.gather</code> also cancels all the <code>Futures</code> inside of it), because the interrupted <code>loop.run_until_complete</code> call added a <code>done_callback</code> to <code>tasks</code> that stops the loop. So, when we cancel <code>tasks</code>, that callback fires, and the loop stops. At that point we call <code>tasks.exception</code>, just to avoid getting a warning about not fetching the exception from the <code>_GatheringFuture</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 6841, "user_id": 1190965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3e74ed8e572542a718df5f15ead40581?s=128&d=identicon&r=PG", "display_name": "nodakai", "link": "https://stackoverflow.com/users/1190965/nodakai"}, "edited": false, "score": 1, "creation_date": 1552563666, "post_id": 42097478, "comment_id": 97062155, "body": "Apparently the core team deprecated using a separate <code>loop</code> which <code>is Not asyncio.get_event_loop()</code> (and consequently all those <code>loop=loop</code> kw params)"}], "tags": [], "owner": {"reputation": 740, "user_id": 277882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R17IR.png?s=128&g=1", "display_name": "ntninja", "link": "https://stackoverflow.com/users/277882/ntninja"}, "is_accepted": false, "score": 19, "last_activity_date": 1608235018, "last_edit_date": 1608235018, "creation_date": 1486492847, "answer_id": 42097478, "question_id": 30765606, "link": "https://stackoverflow.com/questions/30765606/whats-the-correct-way-to-clean-up-after-an-interrupted-event-loop/42097478#42097478", "title": "What&#39;s the correct way to clean up after an interrupted event loop?", "body": "<p><strong>Note for Python 3.7+</strong>: The below is now implemented as part of the standard library <code>asyncio.run</code> function \u2013 Replace the below with <code>sys.exit(loop.run(amain(loop)))</code> once you are ready to upgrade! (If you want to print the message, simply move that <code>try\u2026except</code>-clause into <code>amain</code>.)</p>\n<p><strong>Updated for Python 3.6+</strong>: Add call to <code>loop.shutdown_asyncgens</code> to avoid memory leaks by asynchronous generators that weren't fully used.</p>\n<p>The following solution, inspired by some of the other answers, should work in almost all cases and does not depend on you manually keeping track of tasks that need to be cleaned up on <kbd>Ctrl</kbd>+<kbd>C</kbd>:</p>\n<pre><code>loop = asyncio.get_event_loop()\ntry:\n    # Here `amain(loop)` is the core coroutine that may spawn any\n    # number of tasks\n    sys.exit(loop.run_until_complete(amain(loop)))\nexcept KeyboardInterrupt:\n    # Optionally show a message if the shutdown may take a while\n    print(&quot;Attempting graceful shutdown, press Ctrl+C again to exit\u2026&quot;, flush=True)\n    \n    # Do not show `asyncio.CancelledError` exceptions during shutdown\n    # (a lot of these may be generated, skip this if you prefer to see them)\n    def shutdown_exception_handler(loop, context):\n        if &quot;exception&quot; not in context \\\n        or not isinstance(context[&quot;exception&quot;], asyncio.CancelledError):\n            loop.default_exception_handler(context)\n    loop.set_exception_handler(shutdown_exception_handler)\n    \n    # Handle shutdown gracefully by waiting for all tasks to be cancelled\n    tasks = asyncio.gather(*asyncio.Task.all_tasks(loop=loop), loop=loop, return_exceptions=True)\n    tasks.add_done_callback(lambda t: loop.stop())\n    tasks.cancel()\n    \n    # Keep the event loop running until it is either destroyed or all\n    # tasks have really terminated\n    while not tasks.done() and not loop.is_closed():\n        loop.run_forever()\nfinally:\n    loop.run_until_complete(loop.shutdown_asyncgens())\n    loop.close()\n</code></pre>\n<p>The above code will obtain all currently tasks from the event loop using <code>asyncio.Task.all_tasks</code> and place them in a single combined future using <code>asyncio.gather</code>. All tasks in that future (which are all currently running tasks) are then canceled using the future's <code>.cancel()</code> method. The <code>return_exceptions=True</code> then ensures that all the received <code>asyncio.CancelledError</code> exceptions are stored instead of causing the future to become errored.</p>\n<p>The above code will also override the default exception handler to prevent the generated <code>asyncio.CancelledError</code> exceptions from being logged.</p>\n<p><strong>Update from 2020-12-17</strong>: Dropped compatiblity code for Python 3.5.</p>\n"}, {"comments": [{"owner": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1589510019, "post_id": 58532304, "comment_id": 109330033, "body": "If you <code>KeyboardInterrupt</code> <code>asyncio.run(main())</code> and <code>main</code> handles <code>asyncio.CancelledError</code> how do you access its return value?"}, {"owner": {"reputation": 2818, "user_id": 1172350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757373ec5a9f3631247eb0c3c8fdd44c?s=128&d=identicon&r=PG", "display_name": "dcoles", "link": "https://stackoverflow.com/users/1172350/dcoles"}, "reply_to_user": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1601920333, "post_id": 58532304, "comment_id": 113550189, "body": "@Kenny I&#39;m not sure I completely understood your question; but you can catch a asyncio.CancelledError like any other exception: <code>try: asyncio.run(main()); except asyncio.CancelledError as e: print(f&#39;Cancelled: {e}&#39;)</code>."}], "tags": [], "owner": {"reputation": 2818, "user_id": 1172350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757373ec5a9f3631247eb0c3c8fdd44c?s=128&d=identicon&r=PG", "display_name": "dcoles", "link": "https://stackoverflow.com/users/1172350/dcoles"}, "is_accepted": false, "score": 11, "last_activity_date": 1571874227, "creation_date": 1571874227, "answer_id": 58532304, "question_id": 30765606, "link": "https://stackoverflow.com/questions/30765606/whats-the-correct-way-to-clean-up-after-an-interrupted-event-loop/58532304#58532304", "title": "What&#39;s the correct way to clean up after an interrupted event loop?", "body": "<p>In <strong>Python 3.7+</strong> it's recommended that you use <a href=\"https://docs.python.org/3/library/asyncio-task.html#asyncio.run\" rel=\"noreferrer\"><code>asyncio.run</code></a> to start an async main function.</p>\n\n<p><code>asyncio.run</code> will take care of creating the event loop for your program and ensure that the event loop is closed and all tasks are cleaned when the main function exits (including due to a <code>KeyboardInterrupt</code> exception).</p>\n\n<p>It is roughly analogous to the following (see <a href=\"https://github.com/python/cpython/blob/3.8/Lib/asyncio/runners.py\" rel=\"noreferrer\"><code>asyncio/runners.py</code></a>):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def run(coro, *, debug=False):\n    \"\"\"`asyncio.run` is new in Python 3.7\"\"\"\n    loop = asyncio.get_event_loop()\n    try:\n        loop.set_debug(debug)\n        return loop.run_until_complete(coro)\n    finally:\n        try:\n            all_tasks = asyncio.gather(*asyncio.all_tasks(loop), return_exceptions=True)\n            all_tasks.cancel()\n            with contextlib.suppress(asyncio.CancelledError):\n                loop.run_until_complete(all_tasks)\n            loop.run_until_complete(loop.shutdown_asyncgens())\n        finally:\n            loop.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3308, "user_id": 975046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e1e18631bd0196438f26c761f04169?s=128&d=identicon&r=PG", "display_name": "mgrandi", "link": "https://stackoverflow.com/users/975046/mgrandi"}, "is_accepted": false, "score": 0, "last_activity_date": 1615098403, "creation_date": 1615098403, "answer_id": 66513817, "question_id": 30765606, "link": "https://stackoverflow.com/questions/30765606/whats-the-correct-way-to-clean-up-after-an-interrupted-event-loop/66513817#66513817", "title": "What&#39;s the correct way to clean up after an interrupted event loop?", "body": "<p>using the <code>signal</code> module to set an <code>asyncio.Event</code> on a <code>signal.SIGINT</code> signal (Ctrl + C) can be a clean way to tell all of your asyncio code to stop naturally. This is especially important because some libraries such as <code>aiohttp</code> <a href=\"https://docs.aiohttp.org/en/stable/client_advanced.html?highlight=proxy#graceful-shutdown\" rel=\"nofollow noreferrer\">need a chance to be run cleanup tasks before the event loop closes.</a></p>\n<p>Here is an example that uses the <code>aiohttp</code> library. There is a <code>asyncio.sleep(5)</code> to prevent the connection from being returned to the pool, to give the user a chance to ctrl+c and simulate a <code>KeyboardInterrupt</code> exception</p>\n<p>example code:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import logging\nimport asyncio\nimport signal\nimport random\n\nimport aiohttp\n\nlogging.basicConfig(level=&quot;INFO&quot;, format=&quot;%(asctime)s %(threadName)-10s %(name)-10s %(levelname)-8s: %(message)s&quot;)\nlogger = logging.getLogger(&quot;root&quot;)\n\nstop_event = asyncio.Event()\n\nasync def get_json(aiohttp_session):\n\n    logger.info(&quot;making http request&quot;)\n\n    params = {&quot;value&quot;: random.randint(0,1000) }\n    async with aiohttp_session.get(f'https://httpbin.org/get', params=params) as response:\n\n        # async with response:\n        j = await response.json()\n        logger.info(&quot;get data: `%s`&quot;, j[&quot;args&quot;])\n        await asyncio.sleep(5)\n\nasync def run():\n\n    while not stop_event.is_set():\n        async with aiohttp.ClientSession() as aiohttp_session:\n\n            await get_json(aiohttp_session)\n\n    logger.info(&quot;stop event was set, sleeping to let aiohttp close it's connections&quot;)\n    await asyncio.sleep(0.1)\n    logger.info(&quot;sleep finished, returning&quot;)\n\n\ndef inner_ctrl_c_signal_handler(sig, frame):\n    '''\n    function that gets called when the user issues a\n    keyboard interrupt (ctrl+c)\n    '''\n\n    logger.info(&quot;SIGINT caught!&quot;)\n    stop_event.set()\n\n# experiment with commenting out this line and ctrl+c-ing the script\n# to see how you get an &quot;event loop is closed&quot; error\nsignal.signal(signal.SIGINT, inner_ctrl_c_signal_handler)\n\nasyncio.run(run())\n</code></pre>\n<p>without the <code>signal.signal</code> call:</p>\n<pre><code>&gt; python C:\\Users\\mark\\Temp\\test_aiohttp.py\n2021-03-06 22:21:08,684 MainThread root       INFO    : making http request\n2021-03-06 22:21:09,132 MainThread root       INFO    : get data: `{'value': '500'}`\nTraceback (most recent call last):\n  File &quot;C:\\Users\\auror\\Temp\\test_aiohttp.py&quot;, line 52, in &lt;module&gt;\n    asyncio.run(run())\n  File &quot;c:\\python39\\lib\\asyncio\\runners.py&quot;, line 44, in run\n    return loop.run_until_complete(main)\n  File &quot;c:\\python39\\lib\\asyncio\\base_events.py&quot;, line 629, in run_until_complete\n    self.run_forever()\n  File &quot;c:\\python39\\lib\\asyncio\\windows_events.py&quot;, line 316, in run_forever\n    super().run_forever()\n  File &quot;c:\\python39\\lib\\asyncio\\base_events.py&quot;, line 596, in run_forever\n    self._run_once()\n  File &quot;c:\\python39\\lib\\asyncio\\base_events.py&quot;, line 1854, in _run_once\n    event_list = self._selector.select(timeout)\n  File &quot;c:\\python39\\lib\\asyncio\\windows_events.py&quot;, line 434, in select\n    self._poll(timeout)\n  File &quot;c:\\python39\\lib\\asyncio\\windows_events.py&quot;, line 783, in _poll\n    status = _overlapped.GetQueuedCompletionStatus(self._iocp, ms)\nKeyboardInterrupt\nException ignored in: &lt;function _ProactorBasePipeTransport.__del__ at 0x000001CFFD75BB80&gt;\nTraceback (most recent call last):\n  File &quot;c:\\python39\\lib\\asyncio\\proactor_events.py&quot;, line 116, in __del__\n    self.close()\n  File &quot;c:\\python39\\lib\\asyncio\\proactor_events.py&quot;, line 108, in close\n    self._loop.call_soon(self._call_connection_lost, None)\n  File &quot;c:\\python39\\lib\\asyncio\\base_events.py&quot;, line 746, in call_soon\n    self._check_closed()\n  File &quot;c:\\python39\\lib\\asyncio\\base_events.py&quot;, line 510, in _check_closed\n    raise RuntimeError('Event loop is closed')\nRuntimeError: Event loop is closed\n</code></pre>\n<p>with it:</p>\n<pre><code>\n&gt; python C:\\Users\\mark\\Temp\\test_aiohttp.py\n2021-03-06 22:20:29,656 MainThread root       INFO    : making http request\n2021-03-06 22:20:30,106 MainThread root       INFO    : get data: `{'value': '367'}`\n2021-03-06 22:20:35,122 MainThread root       INFO    : making http request\n2021-03-06 22:20:35,863 MainThread root       INFO    : get data: `{'value': '489'}`\n2021-03-06 22:20:38,695 MainThread root       INFO    : SIGINT caught!\n2021-03-06 22:20:40,867 MainThread root       INFO    : stop event was set, sleeping to let aiohttp close it's connections\n2021-03-06 22:20:40,962 MainThread root       INFO    : sleep finished, returning\n\n</code></pre>\n"}], "owner": {"reputation": 9733, "user_id": 877069, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9b7fe7ecbea69ba0bf0166b2d8c21b5f?s=128&d=identicon&r=PG", "display_name": "Nick Chammas", "link": "https://stackoverflow.com/users/877069/nick-chammas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20325, "favorite_count": 9, "accepted_answer_id": 30766124, "answer_count": 5, "score": 49, "last_activity_date": 1615098403, "creation_date": 1433964645, "last_edit_date": 1433964662, "question_id": 30765606, "link": "https://stackoverflow.com/questions/30765606/whats-the-correct-way-to-clean-up-after-an-interrupted-event-loop", "title": "What&#39;s the correct way to clean up after an interrupted event loop?", "body": "<p>I have an event loop that runs some co-routines as part of a command line tool. The user may interrupt the tool with the usual <kbd>Ctrl</kbd> + <kbd>C</kbd>, at which point I want to clean up properly after the interrupted event loop.</p>\n\n<p>Here's what I tried.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import asyncio\n\n\n@asyncio.coroutine\ndef shleepy_time(seconds):\n    print(\"Shleeping for {s} seconds...\".format(s=seconds))\n    yield from asyncio.sleep(seconds)\n\n\nif __name__ == '__main__':\n    loop = asyncio.get_event_loop()\n\n    # Side note: Apparently, async() will be deprecated in 3.4.4.\n    # See: https://docs.python.org/3.4/library/asyncio-task.html#asyncio.async\n    tasks = [\n        asyncio.async(shleepy_time(seconds=5)),\n        asyncio.async(shleepy_time(seconds=10))\n    ]\n\n    try:\n        loop.run_until_complete(asyncio.gather(*tasks))\n    except KeyboardInterrupt as e:\n        print(\"Caught keyboard interrupt. Canceling tasks...\")\n\n        # This doesn't seem to be the correct solution.\n        for t in tasks:\n            t.cancel()\n    finally:\n        loop.close()\n</code></pre>\n\n<p>Running this and hitting <kbd>Ctrl</kbd> + <kbd>C</kbd> yields:</p>\n\n<pre><code>$ python3 asyncio-keyboardinterrupt-example.py \nShleeping for 5 seconds...\nShleeping for 10 seconds...\n^CCaught keyboard interrupt. Canceling tasks...\nTask was destroyed but it is pending!\ntask: &lt;Task pending coro=&lt;shleepy_time() running at asyncio-keyboardinterrupt-example.py:7&gt; wait_for=&lt;Future cancelled&gt; cb=[gather.&lt;locals&gt;._done_callback(1)() at /usr/local/Cellar/python3/3.4.3/Frameworks/Python.framework/Versions/3.4/lib/python3.4/asyncio/tasks.py:587]&gt;\nTask was destroyed but it is pending!\ntask: &lt;Task pending coro=&lt;shleepy_time() running at asyncio-keyboardinterrupt-example.py:7&gt; wait_for=&lt;Future cancelled&gt; cb=[gather.&lt;locals&gt;._done_callback(0)() at /usr/local/Cellar/python3/3.4.3/Frameworks/Python.framework/Versions/3.4/lib/python3.4/asyncio/tasks.py:587]&gt;\n</code></pre>\n\n<p>Clearly, I didn't clean up correctly. I thought perhaps calling <code>cancel()</code> on the tasks would be the way to do it.</p>\n\n<p>What's the correct way to clean up after an interrupted event loop?</p>\n"}, {"tags": ["python", "django", "lambda"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1433964777, "post_id": 30765596, "comment_id": 49583524, "body": "All the lambda does is return the day portion of the event start date. The <i>magic</i> is in the <code>groupby()</code> function, which produces groups based on that return value. Each time the value changes from one event to the next, you get a new group."}], "answers": [{"tags": [], "owner": {"reputation": 875, "user_id": 530873, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b12c0c886b3bf7df5a657d1161e1bd5c?s=128&d=identicon&r=PG&f=1", "display_name": "user530873", "link": "https://stackoverflow.com/users/530873/user530873"}, "is_accepted": false, "score": 0, "last_activity_date": 1433964783, "creation_date": 1433964783, "answer_id": 30765643, "question_id": 30765596, "link": "https://stackoverflow.com/questions/30765596/explain-this-python-lambda/30765643#30765643", "title": "Explain this python lambda", "body": "<p>Lambda functions are like regular functions. For example:</p>\n\n<pre><code>f = lambda x:x**2\n</code></pre>\n\n<p>Is equivelent to:</p>\n\n<pre><code>def f(x):\n    return x**2\n</code></pre>\n\n<p>So, in your case, for field(event), return event.start.day</p>\n"}, {"comments": [{"owner": {"reputation": 546, "user_id": 4941891, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aWBZ1.jpg?s=128&g=1", "display_name": "Philippe Fisher", "link": "https://stackoverflow.com/users/4941891/philippe-fisher"}, "edited": false, "score": 0, "creation_date": 1433966544, "post_id": 30765806, "comment_id": 49584460, "body": "Ya I realised that the lambda wasnt that <i>magic</i> after the prev answer. Thanks alot, this is exactly what i needed."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 1, "last_activity_date": 1433965275, "creation_date": 1433965275, "answer_id": 30765806, "question_id": 30765596, "link": "https://stackoverflow.com/questions/30765596/explain-this-python-lambda/30765806#30765806", "title": "Explain this python lambda", "body": "<p>All the lambda does is return the day portion of the event start date; <code>lambda</code> objects are just functions. The real <em>magic</em> is in the <a href=\"https://docs.python.org/3/library/itertools.html#itertools.groupby\" rel=\"nofollow\"><code>itertools.groupby()</code> function</a>, which produces groups based on that return value. Each time the value changes from one event to the next, you get a new group.</p>\n\n<p>Depending on how your multiday / recurrence is implemented, it probably is not going to be easy to adapt this directly to your case. You'd have to switch to a loop with a dictionary instead.</p>\n\n<p>Here is an equivalent function using just a loop, which will be easier to adapt:</p>\n\n<pre><code>def group_by_day(self, event):\n    result = {}\n    for e in event:\n        day = event.start.day\n        result.setdefault(day, []).append(event)\n    return result\n</code></pre>\n\n<p>This is not dependent on the order of the events as it'll just group every date by the day regardless of where it appears in the sequence. This should let you add an event to <em>more than one day</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 3943201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69803aada9addaa1e86d21077353d3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Zaxvo", "link": "https://stackoverflow.com/users/3943201/zaxvo"}, "is_accepted": false, "score": 0, "last_activity_date": 1433965470, "creation_date": 1433965470, "answer_id": 30765858, "question_id": 30765596, "link": "https://stackoverflow.com/questions/30765596/explain-this-python-lambda/30765858#30765858", "title": "Explain this python lambda", "body": "<p>There are three separate bits of magic: the lambda, the list comprehension, and the <code>groupby</code> function. </p>\n\n<p>The statement <code>lambda event: event.start.day</code> is equivalent to:</p>\n\n<pre><code>def f(event):\n  return event.start.day\n</code></pre>\n\n<p>The <code>groupby</code> function presumably takes an <code>event</code> and a <code>field</code> and returns some sort of list of two-element lists (or tuples). </p>\n\n<p>The list comprehension <code>[(day, list(items)) for day , items in groupby(event, field)]</code> is equivalent to:</p>\n\n<pre><code>result = []\nfor day, items in groupby(event, field):\n    result.append( (day, list(items)) )\n</code></pre>\n\n<p>And then the <code>dict</code> call takes that list of tuples and turns it into a dict of <code>day:list(items)</code> pairs. </p>\n"}], "owner": {"reputation": 546, "user_id": 4941891, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aWBZ1.jpg?s=128&g=1", "display_name": "Philippe Fisher", "link": "https://stackoverflow.com/users/4941891/philippe-fisher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 30765806, "answer_count": 3, "score": -1, "last_activity_date": 1433965470, "creation_date": 1433964610, "question_id": 30765596, "link": "https://stackoverflow.com/questions/30765596/explain-this-python-lambda", "title": "Explain this python lambda", "body": "<p>I am implementing a monthly calendar in django and used some code I found online. Within the code there is a lambda function that I need to tune for my specific use. </p>\n\n<pre><code>def group_by_day(self, event):\n        field = lambda event: event.start.day\n        return dict(\n            [(day, list(items)) for day , items in groupby(event, field)]\n        )\n</code></pre>\n\n<p>From what I read online:</p>\n\n<blockquote>\n  <p>group_by_day() builds a dictionary with the day of the month as key\n  and any workouts for that day as its value (<a href=\"http://uggedal.com/journal/creating-a-flexible-monthly-calendar-in-django/\" rel=\"nofollow\">http://uggedal.com/journal/creating-a-flexible-monthly-calendar-in-django/</a>)</p>\n</blockquote>\n\n<p>Im quite new to python and having problem figuring out how its actually doing its magic. I do understand that it uses the <code>event.start.day</code> to assign it to a day and month. Is it doing this with recursion?</p>\n\n<p>I'm trying to tune the function so it would support recurring/multi-day events.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "numpy", "matplotlib", "contour", "contourf"], "comments": [{"owner": {"reputation": 41, "user_id": 4879398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b017ef3da57f21b93459ab336ac0acf2?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/4879398/patrick"}, "reply_to_user": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "edited": false, "score": 0, "creation_date": 1433964770, "post_id": 30765545, "comment_id": 49583517, "body": "Thank you - this looks promising, I will try it out."}, {"owner": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "edited": false, "score": 0, "creation_date": 1433968016, "post_id": 30765545, "comment_id": 49585338, "body": "Patrick, I went ahead and closed this question as a duplicate.  If it&#39;s not, let me know."}, {"owner": {"reputation": 41, "user_id": 4879398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b017ef3da57f21b93459ab336ac0acf2?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/4879398/patrick"}, "reply_to_user": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "edited": false, "score": 0, "creation_date": 1433968091, "post_id": 30765545, "comment_id": 49585397, "body": "No that&#39;s fine thank you. I just wanted to know in the question you asked, if using the hist2d can I color &quot;white&quot; where there is no data instead of dark blue?"}, {"owner": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "edited": false, "score": 0, "creation_date": 1433970244, "post_id": 30765545, "comment_id": 49586668, "body": "Sure, there are several ways you can do that. The easiest is to mask the 0 values. E.g. <code>counts = np.ma.masked_equal(counts, 0)</code>, if <code>counts</code> is your 2D array of counts.  (Note that at that point it&#39;s easiest to use <code>np.histogram2d</code> and <code>pcolormesh</code>.) As a quick example: <a href=\"https://gist.github.com/joferkington/7517ded854aaffc8254a\" rel=\"nofollow noreferrer\">gist.github.com/joferkington/7517ded854aaffc8254a</a>"}, {"owner": {"reputation": 41, "user_id": 4879398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b017ef3da57f21b93459ab336ac0acf2?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/4879398/patrick"}, "reply_to_user": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "edited": false, "score": 0, "creation_date": 1433970677, "post_id": 30765545, "comment_id": 49586878, "body": "Thank you very much for your help - much appreciated."}], "owner": {"reputation": 41, "user_id": 4879398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b017ef3da57f21b93459ab336ac0acf2?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/4879398/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 316, "favorite_count": 0, "closed_date": 1433967972, "answer_count": 0, "score": 0, "last_activity_date": 1433964720, "creation_date": 1433964426, "last_edit_date": 1433964720, "question_id": 30765545, "link": "https://stackoverflow.com/questions/30765545/convert-a-scatter-plot-into-a-contour-plot-in-matplotllib", "closed_reason": "Duplicate", "title": "convert a scatter plot into a contour plot in matplotllib", "body": "<p>I have the following scatter plot where I plotted using ALPHA=0.2\nThis allowed me to show areas with lower populations in a lighter shade and the higher ones (due to overlay) in a darker color. I plotted this in matplotlib using 2    1D (one dimensional ) numpy arrays.</p>\n\n<p><img src=\"https://i.stack.imgur.com/pM5xX.png\" width=\"300\"></p>\n\n<p>I wanted to do the following instead </p>\n\n<p><img src=\"https://i.stack.imgur.com/vuuRO.png\" alt=\"enter image description here\"></p>\n\n<p>The colous vary depending on the population, blue is low and red is high population. I know I need to bin the data and then plot it but I was wondering if there was a better way to do this in python/matplotlib?</p>\n"}, {"tags": ["python", "slice"], "comments": [{"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 1, "creation_date": 1433964352, "post_id": 30765493, "comment_id": 49583319, "body": "You may reverse the list and simply apply the positive slicing notation."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1433964495, "post_id": 30765493, "comment_id": 49583394, "body": "what if the list is <code>[1,2,3,4,5]</code> and n is 6?"}, {"owner": {"reputation": 2403, "user_id": 3190054, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b7de233f9b761d1d0d75d64b608aca88?s=128&d=identicon&r=PG&f=1", "display_name": "kezzos", "link": "https://stackoverflow.com/users/3190054/kezzos"}, "edited": false, "score": 0, "creation_date": 1433964892, "post_id": 30765493, "comment_id": 49583587, "body": "print mylist[:-n] if n&gt;0 else mylist[:]"}], "answers": [{"tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": true, "score": 33, "last_activity_date": 1433964442, "creation_date": 1433964442, "answer_id": 30765552, "question_id": 30765493, "link": "https://stackoverflow.com/questions/30765493/how-to-slice-in-python-all-but-the-last-n-items-when-n-may-be-zero/30765552#30765552", "title": "How to slice (in Python) &quot;all but the last n&quot; items when n may be zero?", "body": "<p>You can pass <code>None</code> to the slice</p>\n\n<pre><code>print(mylist[:-n or None])\n</code></pre>\n"}], "owner": {"reputation": 1739, "user_id": 3938965, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/ucqW3.jpg?s=128&g=1", "display_name": "workerjoe", "link": "https://stackoverflow.com/users/3938965/workerjoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30302, "favorite_count": 0, "closed_date": 1433964387, "accepted_answer_id": 30765552, "answer_count": 1, "score": 22, "last_activity_date": 1433964442, "creation_date": 1433964252, "question_id": 30765493, "link": "https://stackoverflow.com/questions/30765493/how-to-slice-in-python-all-but-the-last-n-items-when-n-may-be-zero", "closed_reason": "Duplicate", "title": "How to slice (in Python) &quot;all but the last n&quot; items when n may be zero?", "body": "<p>I have a list of items in Python and I need to get \"all but the last N\" items.  It needs to work when N is zero (in which case I want the whole list) and when N is greater than or equal to the length of the list (in which case I want an empty list).\nThis works in most cases:</p>\n\n<pre><code>mylist=[0,1,2,3,4,5,6,7,8,9]\nprint( mylist[:-n] )\n</code></pre>\n\n<p>But it fails in the case where N is zero.  <code>mylist[:0]</code> returns an empty list: <code>[]</code>.  Is there a Python slicing notation that will do what I want, or a simple function?</p>\n"}, {"tags": ["python", "debugging", "python-3.x", "attributeerror"], "comments": [{"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 2, "creation_date": 1433964254, "post_id": 30765463, "comment_id": 49583271, "body": "How many times you want to toss the coin ? Infinite times? <code>while True</code> ?"}, {"owner": {"reputation": 2403, "user_id": 3190054, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b7de233f9b761d1d0d75d64b608aca88?s=128&d=identicon&r=PG&f=1", "display_name": "kezzos", "link": "https://stackoverflow.com/users/3190054/kezzos"}, "edited": false, "score": 1, "creation_date": 1433964347, "post_id": 30765463, "comment_id": 49583316, "body": "You go on forever when using &#39;while True:&#39; without a clause to stop the loop."}, {"owner": {"reputation": 3055, "user_id": 1843248, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/63X0V.jpg?s=128&g=1", "display_name": "Doug R.", "link": "https://stackoverflow.com/users/1843248/doug-r"}, "edited": false, "score": 0, "creation_date": 1433964524, "post_id": 30765463, "comment_id": 49583406, "body": "I strongly suggest that you <a href=\"https://docs.python.org/3.3/library/random.html\" rel=\"nofollow noreferrer\">read the documentation</a> for the <code>random</code> module.  I suspect that you&#39;re probably going to be more interested in <a href=\"https://docs.python.org/3.3/library/random.html#random.choice\" rel=\"nofollow noreferrer\"><code>random.choice()</code></a> or <a href=\"https://docs.python.org/3.3/library/random.html#random.randrange\" rel=\"nofollow noreferrer\"><code>random.randomrange()</code></a> than you will be in <code>random.random()</code>."}, {"owner": {"reputation": 654, "user_id": 4996405, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/113dc3237a3c37212278f7a3c7c13c2c?s=128&d=identicon&r=PG&f=1", "display_name": "lokilindo", "link": "https://stackoverflow.com/users/4996405/lokilindo"}, "edited": false, "score": 0, "creation_date": 1433964855, "post_id": 30765463, "comment_id": 49583561, "body": "Thanks Doug R, I&#39;ll read it."}], "answers": [{"comments": [{"owner": {"reputation": 654, "user_id": 4996405, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/113dc3237a3c37212278f7a3c7c13c2c?s=128&d=identicon&r=PG&f=1", "display_name": "lokilindo", "link": "https://stackoverflow.com/users/4996405/lokilindo"}, "edited": false, "score": 0, "creation_date": 1433966205, "post_id": 30765519, "comment_id": 49584295, "body": "Thanks, I ended up following your instructions."}], "tags": [], "owner": {"reputation": 16165, "user_id": 547820, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/29c81a4724590af17510dcd846eea411?s=128&d=identicon&r=PG", "display_name": "Sait", "link": "https://stackoverflow.com/users/547820/sait"}, "is_accepted": true, "score": 1, "last_activity_date": 1433964341, "creation_date": 1433964341, "answer_id": 30765519, "question_id": 30765463, "link": "https://stackoverflow.com/questions/30765463/what-am-i-doing-wrong-in-my-coin-flip-code/30765519#30765519", "title": "What am I doing wrong in my coin flip code?", "body": "<pre><code>import random\n\nwhile True:\n    result = random.randrange(2)\n    if result == 0:\n       print (\"Heads\")\n    else:\n       print (\"Tails\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "is_accepted": false, "score": 0, "last_activity_date": 1433964367, "creation_date": 1433964367, "answer_id": 30765525, "question_id": 30765463, "link": "https://stackoverflow.com/questions/30765463/what-am-i-doing-wrong-in-my-coin-flip-code/30765525#30765525", "title": "What am I doing wrong in my coin flip code?", "body": "<p>Use this</p>\n\n<pre><code>from random import randrange\nwhile True:\n        spin = randrange(0,2)\n        if spin == 0:\n            print (\"Heads\")\n        else:\n            print (\"Tails\")\n</code></pre>\n\n<p>Also how many times you want your code to run. This will never end. Ideally you will want your code to run once just to get <code>heads</code> or <code>tails</code>. I suggest to remove <code>while</code> from code. Also keep an eye on indentation if you remove <code>while</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3055, "user_id": 1843248, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/63X0V.jpg?s=128&g=1", "display_name": "Doug R.", "link": "https://stackoverflow.com/users/1843248/doug-r"}, "edited": false, "score": 0, "creation_date": 1433967230, "post_id": 30765569, "comment_id": 49584834, "body": "You may want to quote the relevant portions of the documentation.  Frankly, this is probably more of a comment on the OP, rather than an answer."}, {"owner": {"reputation": 949, "user_id": 3862024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HYIdB.jpg?s=128&g=1", "display_name": "gagarwa", "link": "https://stackoverflow.com/users/3862024/gagarwa"}, "reply_to_user": {"reputation": 3055, "user_id": 1843248, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/63X0V.jpg?s=128&g=1", "display_name": "Doug R.", "link": "https://stackoverflow.com/users/1843248/doug-r"}, "edited": false, "score": 0, "creation_date": 1434034169, "post_id": 30765569, "comment_id": 49618200, "body": "Thanks, but since I don&#39;t have the privilege of commenting yet, this was all I was able to do."}], "tags": [], "owner": {"reputation": 949, "user_id": 3862024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HYIdB.jpg?s=128&g=1", "display_name": "gagarwa", "link": "https://stackoverflow.com/users/3862024/gagarwa"}, "is_accepted": false, "score": 0, "last_activity_date": 1433964500, "creation_date": 1433964500, "answer_id": 30765569, "question_id": 30765463, "link": "https://stackoverflow.com/questions/30765463/what-am-i-doing-wrong-in-my-coin-flip-code/30765569#30765569", "title": "What am I doing wrong in my coin flip code?", "body": "<p>\"int\" is a basic type that doesn't have methods like random().</p>\n\n<p>You have to use random.randrange(2)</p>\n\n<p>For more information see:</p>\n\n<p><a href=\"https://docs.python.org/2/library/random.html\" rel=\"nofollow\">https://docs.python.org/2/library/random.html</a> (The Official Doc)</p>\n"}, {"tags": [], "owner": {"reputation": 2505, "user_id": 1929635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/adQln.png?s=128&g=1", "display_name": "boaz_shuster", "link": "https://stackoverflow.com/users/1929635/boaz-shuster"}, "is_accepted": false, "score": 2, "last_activity_date": 1433964512, "creation_date": 1433964512, "answer_id": 30765574, "question_id": 30765463, "link": "https://stackoverflow.com/questions/30765463/what-am-i-doing-wrong-in-my-coin-flip-code/30765574#30765574", "title": "What am I doing wrong in my coin flip code?", "body": "<p>See the following snippet</p>\n\n<pre><code>from random import random\ncoin = ['Heads', 'Tails']\nnum_of_tosses = 10\nfor i in range (num_of_tosses):\n    spin = randrange(0,2)\n    print coin[spin]\n</code></pre>\n\n<p>I am using <code>randrange</code> to randomly select elements from 0 to 1. In other words, to select 0 or 1.</p>\n\n<p>Then I am setting a list of choices, called <code>coin</code>, that is used for printing <code>Tails</code> or <code>Heads</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3055, "user_id": 1843248, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/63X0V.jpg?s=128&g=1", "display_name": "Doug R.", "link": "https://stackoverflow.com/users/1843248/doug-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1433965038, "creation_date": 1433965038, "answer_id": 30765729, "question_id": 30765463, "link": "https://stackoverflow.com/questions/30765463/what-am-i-doing-wrong-in-my-coin-flip-code/30765729#30765729", "title": "What am I doing wrong in my coin flip code?", "body": "<p>Most of the solutions presented here focus on <code>random.randrange()</code>.  You can also do this using <a href=\"https://docs.python.org/3.3/library/random.html#random.choice\" rel=\"nofollow\"><code>random.choice()</code></a>, which returns a random element from a non-empty sequence:</p>\n\n<pre><code>&gt;&gt;&gt; from random import choice\n&gt;&gt;&gt; coin = 'Heads Tails'.split()\n&gt;&gt;&gt; FLIPS = 5\n&gt;&gt;&gt; for _ in range(FLIPS):\n...   print(choice(coin))\n...\nTails\nHeads\nTails\nHeads\nTails\n&gt;&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 654, "user_id": 4996405, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/113dc3237a3c37212278f7a3c7c13c2c?s=128&d=identicon&r=PG&f=1", "display_name": "lokilindo", "link": "https://stackoverflow.com/users/4996405/lokilindo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 30765519, "answer_count": 5, "score": -2, "last_activity_date": 1433967626, "creation_date": 1433964154, "last_edit_date": 1433967626, "question_id": 30765463, "link": "https://stackoverflow.com/questions/30765463/what-am-i-doing-wrong-in-my-coin-flip-code", "title": "What am I doing wrong in my coin flip code?", "body": "<p>I am trying to write a program that flips a coin, and displays Heads or Tails accordingly. This is what I have: </p>\n\n<pre><code>    from random import random\n    while True:\n\n        for i in range (2):\n            spin = i.random()\n            if spin == 0:\n                print (\"Heads\")\n            else:\n                print (\"Tails\")\n</code></pre>\n\n<p>but I keep getting the error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/Yamnel/Desktop/Python Programs/coin flip.py\", line 5, in     &lt;module&gt;\n    spin = i.random()\nAttributeError: 'int' object has no attribute 'random'\n</code></pre>\n"}, {"tags": ["python", "numpy", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 390, "user_id": 4285097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c73fb1c24c96bb6458c2c692ee5a9f?s=128&d=identicon&r=PG", "display_name": "xecafe", "link": "https://stackoverflow.com/users/4285097/xecafe"}, "edited": false, "score": 2, "creation_date": 1434014310, "post_id": 30765648, "comment_id": 49603550, "body": "After posting this  answer the author modified <code>axis_x=range(1,11)</code> and now my answer looks like inappropriate :)"}], "tags": [], "owner": {"reputation": 390, "user_id": 4285097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c73fb1c24c96bb6458c2c692ee5a9f?s=128&d=identicon&r=PG", "display_name": "xecafe", "link": "https://stackoverflow.com/users/4285097/xecafe"}, "is_accepted": false, "score": 3, "last_activity_date": 1433964797, "creation_date": 1433964797, "answer_id": 30765648, "question_id": 30765455, "link": "https://stackoverflow.com/questions/30765455/why-is-my-plt-savefig-is-not-working/30765648#30765648", "title": "Why is my plt.savefig is not working?", "body": "<p>Your plot cannot be generated because you defined the list <code>axis_x</code> having only the length 9, while <code>grd</code> and <code>grd2</code> have the length equal to 10.\nJust replace the definition of <code>axis_x</code> with:</p>\n\n<p><code>axis_x=range(1,11)</code>\nand your plot will show up and it will be saved OK.</p>\n"}, {"comments": [{"owner": {"reputation": 1197, "user_id": 3748679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SJKCn.png?s=128&g=1", "display_name": "Jika", "link": "https://stackoverflow.com/users/3748679/jika"}, "edited": false, "score": 1, "creation_date": 1433966442, "post_id": 30765659, "comment_id": 49584410, "body": "Thanks. The plot is fine now. The <code>test.out</code> is still empty."}, {"owner": {"reputation": 1230, "user_id": 11154841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a3cGr.png?s=128&g=1", "display_name": "questionto42", "link": "https://stackoverflow.com/users/11154841/questionto42"}, "edited": false, "score": 1, "creation_date": 1596880493, "post_id": 30765659, "comment_id": 111956837, "body": "As the docs say &quot;Because closing a figure window unregisters it from pyplot, you must call savefig before calling show if you wish to save the figure as well as view it.&quot; in the &quot;Use show()&quot; section of <a href=\"https://matplotlib.org/faq/howto_faq.html\" rel=\"nofollow noreferrer\">matplotlib.org/faq/howto_faq.html</a>."}], "tags": [], "owner": {"reputation": 53404, "user_id": 2096752, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/B8PLE.jpg?s=128&g=1", "display_name": "shx2", "link": "https://stackoverflow.com/users/2096752/shx2"}, "is_accepted": true, "score": 84, "last_activity_date": 1433964821, "creation_date": 1433964821, "answer_id": 30765659, "question_id": 30765455, "link": "https://stackoverflow.com/questions/30765455/why-is-my-plt-savefig-is-not-working/30765659#30765659", "title": "Why is my plt.savefig is not working?", "body": "<p>When you close the image displayed by <code>plt.show()</code>, the image is closed and freed from memory.</p>\n\n<p>You should call <code>savefig</code> and <code>savetxt</code> before calling <code>show</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 671, "user_id": 4304526, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/pAbrY.png?s=128&g=1", "display_name": "bmc", "link": "https://stackoverflow.com/users/4304526/bmc"}, "is_accepted": false, "score": 5, "last_activity_date": 1564172576, "creation_date": 1564172576, "answer_id": 57226595, "question_id": 30765455, "link": "https://stackoverflow.com/questions/30765455/why-is-my-plt-savefig-is-not-working/57226595#57226595", "title": "Why is my plt.savefig is not working?", "body": "<p>I just ran into the same issue and the resolution was to put the savefig command before the <code>plt.show()</code> statement, but specify the filetype explicitly. Here is my code:</p>\n\n<pre><code>plt.suptitle(\"~~~~\")\nplt.title(\"~~~~\")\nax = sns.boxplot(x=scores_df.score, y=scores_df.response)\nplt.savefig(\"test.png\", **format=\"png\"**)\nplt.show()\n\nplt.close()\n</code></pre>\n"}], "owner": {"reputation": 1197, "user_id": 3748679, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SJKCn.png?s=128&g=1", "display_name": "Jika", "link": "https://stackoverflow.com/users/3748679/jika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46368, "favorite_count": 5, "accepted_answer_id": 30765659, "answer_count": 3, "score": 38, "last_activity_date": 1564191851, "creation_date": 1433964125, "last_edit_date": 1433965273, "question_id": 30765455, "link": "https://stackoverflow.com/questions/30765455/why-is-my-plt-savefig-is-not-working", "title": "Why is my plt.savefig is not working?", "body": "<p>I have a simple python code as follows:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\n\"\"\"\nHere are the solutions and the plot.\n\"\"\"\n\n# Create the axis and plot.\nplt.axis([0, 10, 0, 10])\naxis_x = range(1, 11)\ngrd = [1.1, 2.1, 3.1, 4.1, 5.1, 6.1, 7.1, 8.1, 9.1, 10.1]\ngrd2 = [1.2, 2.2, 3.2, 4.2, 5.2, 6.2, 7.2, 8.2, 9.2, 10.2]\nplt.plot(axis_x, grd, '-g', label='BR1')\nplt.plot(axis_x, grd2, '-b', label='BR2')\nplt.legend(loc='upper left')\nplt.grid()\nplt.show()\n\n# Save the results vector to a text file.\nnp.savetxt('test.out', (grd, grd2))\n\n# Save the figure as '.eps' file.\nplt.savefig('expl.pdf', format='pdf', dpi=1200)\n</code></pre>\n\n<p>When I open the output files <code>expl.pdf</code> and/or <code>test.out</code> I find them blank and nothing in there. Why?</p>\n\n<p>Thanks.</p>\n"}]