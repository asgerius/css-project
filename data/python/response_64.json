[{"tags": ["python", "function", "grammar", "python-2.x", "argument-unpacking"], "answers": [{"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1459382574, "post_id": 36321836, "comment_id": 60266939, "body": "Thanks Kevin.  That PEP was exactly what I was looking for."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1490038986, "post_id": 36321836, "comment_id": 72924285, "body": "One consequence of this PEP is that <code>sorted(seq, key=lambda (a,b): a*b)</code>, which used to work in Python 2.7, is now a syntax error in Python 3."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1459382580, "last_edit_date": 1459382580, "creation_date": 1459382057, "answer_id": 36321836, "question_id": 36321767, "link": "https://stackoverflow.com/questions/36321767/tuple-unpacking-in-argspec/36321836#36321836", "title": "Tuple unpacking in argspec", "body": "<p>The feature was put in as a natural generalization of the unpacking you can do in ordinary variable assignments. The feature is completely unnecessary. It was <a href=\"https://www.python.org/dev/peps/pep-3113/\" rel=\"nofollow\">removed</a> in Python 3 because it didn't add much and made introspection messy.</p>\n\n<p>Parameters like these cannot be passed by name. The tuple parameter is given an internal name like <code>.0</code>, and the bytecode of the function starts out by unpacking any tuple parameters. While it's technically possible to do something like</p>\n\n<pre><code>&gt;&gt;&gt; def f((a, b)):\n...     print a, b\n...\n&gt;&gt;&gt; f(**{'.0': (0, 1)})\n0 1\n</code></pre>\n\n<p>, it's not really useful.</p>\n"}], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "closed_date": 1459396206, "accepted_answer_id": 36321836, "answer_count": 1, "score": 0, "last_activity_date": 1459382580, "creation_date": 1459381686, "question_id": 36321767, "link": "https://stackoverflow.com/questions/36321767/tuple-unpacking-in-argspec", "closed_reason": "Opinion-based", "title": "Tuple unpacking in argspec", "body": "<p>I've used python2 for years without even knowing about this feature, but apparently tuple unpacking is supported in function defs:</p>\n\n<pre><code>&gt;&gt;&gt; def foo(a, (b, c)):\n...     print a, b, c\n...     \n&gt;&gt;&gt; t = (2, 3)\n&gt;&gt;&gt; foo(1, t)\n1 2 3\n</code></pre>\n\n<p>Defaults are also allowed, though they seem to be unpacked at function call time and not function def time.  And I couldn't figure out how to pass one/any/all of the packed arguments by name, maybe it's impossible.</p>\n\n<pre><code>&gt;&gt;&gt; def foo(a, ((b, c), d)=('xy', 8)):\n        print a, b, c, d\n...     \n&gt;&gt;&gt; foo(0)\n0 x y 8\n</code></pre>\n\n<p>This is not apparently not just a weird implementation detail: if you read the <a href=\"https://docs.python.org/2/reference/grammar.html\" rel=\"nofollow\">grammar</a> carefully, in particular what an <code>fpdef</code> is, you see that function definitions are explicitly designed for tuple unpacking.  </p>\n\n<p>My question is, why was this a design choice and what is an example use-case where it's necessary?  To me it seems an obscure and error-prone feature that violates zen of python 1, 2, 3, 5, 7, 9, 13, 17....</p>\n"}, {"tags": ["python", "physics", "game-physics", "vpython"], "comments": [{"owner": {"reputation": 11, "user_id": 6137286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252cb4d0982da8eff47192cb099896e5?s=128&d=identicon&r=PG&f=1", "display_name": "Cowmilker", "link": "https://stackoverflow.com/users/6137286/cowmilker"}, "edited": false, "score": 0, "creation_date": 1459381896, "post_id": 36321754, "comment_id": 60266738, "body": "As a quick edit - I have changed all the ball1.velocity and ball2.velocitys to v1s and v2s now as I originally intended them to be - sorry, I forgot about that assignment. Fool."}, {"owner": {"reputation": 28776, "user_id": 2314532, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/90ade367b50c6f2a4796a03c82b1a4a1?s=128&d=identicon&r=PG", "display_name": "rmunn", "link": "https://stackoverflow.com/users/2314532/rmunn"}, "edited": false, "score": 0, "creation_date": 1459382926, "post_id": 36321754, "comment_id": 60267046, "body": "Your velocity calculations look a bit strange to me: inside the formula you&#39;re multiplying velocity (a vector) by a bunch of scalars, so the result should be a vector. But then you&#39;re assigning it to <code>ball1.velocity.x</code>? Shouldn&#39;t you be using <code>ball#.velocity.x</code> (or <code>.y</code>) inside the formulas as appropriate, and not <code>ball#.velocity</code>?"}, {"owner": {"reputation": 11, "user_id": 6137286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252cb4d0982da8eff47192cb099896e5?s=128&d=identicon&r=PG&f=1", "display_name": "Cowmilker", "link": "https://stackoverflow.com/users/6137286/cowmilker"}, "reply_to_user": {"reputation": 28776, "user_id": 2314532, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/90ade367b50c6f2a4796a03c82b1a4a1?s=128&d=identicon&r=PG", "display_name": "rmunn", "link": "https://stackoverflow.com/users/2314532/rmunn"}, "edited": false, "score": 0, "creation_date": 1459383594, "post_id": 36321754, "comment_id": 60267266, "body": "Aha, you&#39;re right I&#39;m using vectors where I need scalars. Instead of changing them to x- and y- components though, I think I need to change them to moduli, as the direction is given by the trig functions used. New error is showing now, having changed the vectors in the calcs to moduli:  line 302, in ballhit     phi = acos(abs(vector(1,0,0))/abs(nbtb)) ValueError: math domain error"}, {"owner": {"reputation": 28776, "user_id": 2314532, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/90ade367b50c6f2a4796a03c82b1a4a1?s=128&d=identicon&r=PG", "display_name": "rmunn", "link": "https://stackoverflow.com/users/2314532/rmunn"}, "edited": false, "score": 0, "creation_date": 1459386169, "post_id": 36321754, "comment_id": 60267919, "body": "I suggest asking a new question about this new error, since you can&#39;t put multiple lines of code in comments. But a &quot;math domain error&quot; usually indicates &quot;you can&#39;t apply that mathematical function to that value&quot;; most examples I found were about taking the <code>log</code> of a negative value, which is undefined. Here you&#39;re taking the arc cosine, which is defined from -1 to 1. Is it possible that <code>abs(vector(1,0,0))&#47;abs(nbtb)</code> could ever, due to rounding error, end up less than -1 or greater than 1? If so, that could be causing it."}, {"owner": {"reputation": 28776, "user_id": 2314532, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/90ade367b50c6f2a4796a03c82b1a4a1?s=128&d=identicon&r=PG", "display_name": "rmunn", "link": "https://stackoverflow.com/users/2314532/rmunn"}, "edited": false, "score": 1, "creation_date": 1459386390, "post_id": 36321754, "comment_id": 60267978, "body": "I&#39;ll note that floating-point operations in programming are more complicated than you&#39;d think. For example, load an interactive Python session and type <code>0.1 + 0.2 == 0.3</code>. The result will be <code>False</code>! See <a href=\"http://stackoverflow.com/q/588004/2314532\">stackoverflow.com/q/588004/2314532</a> for why this happens -- and ask a new question about your math domain error, so that more people can see it and comment."}, {"owner": {"reputation": 11, "user_id": 6137286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252cb4d0982da8eff47192cb099896e5?s=128&d=identicon&r=PG&f=1", "display_name": "Cowmilker", "link": "https://stackoverflow.com/users/6137286/cowmilker"}, "reply_to_user": {"reputation": 28776, "user_id": 2314532, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/90ade367b50c6f2a4796a03c82b1a4a1?s=128&d=identicon&r=PG", "display_name": "rmunn", "link": "https://stackoverflow.com/users/2314532/rmunn"}, "edited": false, "score": 0, "creation_date": 1459426845, "post_id": 36321754, "comment_id": 60288503, "body": "Thanks for your help pal, much appreciated!"}], "owner": {"reputation": 11, "user_id": 6137286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252cb4d0982da8eff47192cb099896e5?s=128&d=identicon&r=PG&f=1", "display_name": "Cowmilker", "link": "https://stackoverflow.com/users/6137286/cowmilker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1459382293, "creation_date": 1459381589, "last_edit_date": 1459382293, "question_id": 36321754, "link": "https://stackoverflow.com/questions/36321754/new-to-programming-unknown-error", "title": "New to programming - unknown error", "body": "<p>I'm basically totally knew to programming, been doing it for about 3 days and I became quite interested quite fast - as an exercise to help me learn, I've opted for trial by fire by just going straight in and using vPython to try to create a snooker simulation.</p>\n\n<p>So far its going okay, I've got all the models for the table, cushions, pocket jaws etc, and I've managed to make the balls rebound off the cushions and jaws in a realistic fashion. I've also got the balls to slow down at a rate proportional to their speed - all quite simple stuff I know, but I'm new here so its all quite exciting really.</p>\n\n<p>Anyway - the problem. I'm creating a function into which two balls are the input, and it firstly detects whether they are in contact then causes them to change direction (hitting each other). So far I have this:</p>\n\n<pre><code>def ballhit(ball1,ball2):\n\n    v1 = ball1.velocity\n    v2 = ball2.velocity\n    btb = ball1.pos - ball2.pos # Ball To Ball\n    nbtb = btb/abs(btb) # Normalised btb\n    if abs(ball1.velocity) == 0:\n        theta1 = 0\n    else:\n        theta1 = acos(abs(ball1.velocity.x)/abs(ball1.velocity))\n    if abs(ball2.velocity) == 0:\n        theta2 = 0\n    else:\n        theta2 = acos(abs(ball2.velocity.x)/abs(ball2.velocity))\n    phi = acos(abs(vector(1,0,0))/abs(nbtb))\n\n    ball1.velocity.x = ((2*bm*ball2.velocity*cos(theta2-phi)*cos(phi))/2*bm) + ball1.velocity*(sin(theta1-phi))*(cos(phi+(pi/2)))\n\n    ball1.velocity.y = ((2*bm*ball2.velocity*cos(theta2-phi)*sin(phi))/2*bm) + ball1.velocity*(sin(theta1-phi))*(sin(phi+(pi/2)))\n\n    ball2.velocity.x = ((2*bm*ball1.velocity*cos(theta1-phi)*cos(phi))/2*bm) + ball2.velocity*(sin(theta2-phi))*(cos(phi+(pi/2)))\n\n    ball2.velocity.y = ((2*bm*ball1.velocity*cos(theta1-phi)*sin(phi))/2*bm) + ball2.velocity*(sin(theta2-phi))*(sin(phi+(pi/2)))\n\n    return ball1.velocity\n    return ball2.velocity\n</code></pre>\n\n<p>The two theta values are the angles the balls make with the x-axis, the phi value is the angle the normal (which is also normalized) at the point of contact makes with the x-axis, then my calculations for each of the components of each ball. As far as I can tell the calculations are correct, but the way I've written it must be absolutely dire (as I expect).</p>\n\n<p>This is the error I get:</p>\n\n<pre><code>line 320, in &lt;module&gt;\nballhit(red1,blue)\nline 302, in ballhit\nball1.velocity.x = ((2*bm*ball2.velocity*cos(theta2-phi)*cos(phi))/2*bm) +\nball1.velocity*(sin(theta1-phi))*(cos(phi+(pi/2))) ArgumentError:\nPython argument types in\nNone.None(vector, vector) did not match C++ signature:\nNone(class cvisual::vector {lvalue}, double)\n</code></pre>\n\n<p>I have defined a velocity for both balls and there are no other unassigned variables from what I can see.</p>\n\n<p>If anyone could just explain to me what the error actually means it'd be appreciated, and if someone could show me how its fixed that'd be double points.</p>\n\n<p>Thanks :)</p>\n"}, {"tags": ["python", "python-3.x", "osx-elcapitan", "py2app", "easygui"], "comments": [{"owner": {"reputation": 2420, "user_id": 2635931, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a7f4cb3ccf5ae4a25312f989064dbd05?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/2635931/james"}, "edited": false, "score": 0, "creation_date": 1460509485, "post_id": 36321752, "comment_id": 60772139, "body": "&quot;UI failed to open file&quot; seems like a permissions problem. On a fresh install of py2app try bundling a simple hello world python script (<code>print &#39;hellow world&#39;</code>), and see what happens. That will help us figure out if your application has anything to do with the error."}], "owner": {"reputation": 2466, "user_id": 4392566, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-ImHaDyD-cAI/AAAAAAAAAAI/AAAAAAAAFiY/uaHSvuoPAp4/photo.jpg?sz=128", "display_name": "Dance Party", "link": "https://stackoverflow.com/users/4392566/dance-party"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 533, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1501431819, "creation_date": 1459381574, "last_edit_date": 1501431819, "question_id": 36321752, "link": "https://stackoverflow.com/questions/36321752/py2app-error-osx-el-capitan", "title": "py2app Error OSX El Capitan", "body": "<p>In Alias mode, this fails.</p>\n\n<p>Here's what I'm running:</p>\n\n<blockquote>\n<pre><code>OSX 10.11.1 (El Capitan)\n\nPython 3.5 via Anaconda (with the Jupyter 4.1.0 Notebook)\n\npy2app is the newest version (0.9)\n</code></pre>\n</blockquote>\n\n<p>Here's what I'm doing:</p>\n\n<pre><code>Create script and save as APP_OSX.py\n\nEnter the following commands in terminal:\n\n    py2applet --make-setup APP_OSX.py\n\n    rm -rf build dist\n\n    python setup.py py2app -A\n</code></pre>\n\n<p>This is after I installed a regular version of Python 3.5.1 from python.org (because there was an issue with using py2app and my Anaconda Python 3.5.1 version). </p>\n\n<p>Then I find the bundled app under the 'dist' folder and open it and a box pops up with the name of my app and \"error\".</p>\n\n<p>From the console, I get this:</p>\n\n<pre><code>3/30/16 7:37:18.972 PM APP_OSX[5819]: 2016-03-30 19:37:18.971 APP_OSX[5819:746261] APP_OSX Error\n3/30/16 7:37:21.511 PM sharedfilelistd[242]: SecTaskLoadEntitlements failed error=22\n3/30/16 7:37:21.585 PM Console[5822]: Failed to connect (_consoleX) outlet from (NSApplication) to (ConsoleX): missing setter or instance variable\n3/30/16 7:37:25.893 PM WindowServer[161]: send_datagram_available_ping: pid 349 failed to act on a ping it dequeued before timing out.\n3/30/16 7:37:51.601 PM Console[5822]: Persistent UI failed to open file file:///Users/mi/Library/Saved%20Application%20State/com.apple.Console.savedState/window_3.data: Permission denied (13)\n</code></pre>\n\n<p>Not sure if this helps, but the script uses the following libraries:</p>\n\n<p>Numpy</p>\n\n<p>Pandas</p>\n\n<p>Easygui</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "numpy", "pandas", "scipy"], "comments": [{"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 0, "creation_date": 1459382509, "post_id": 36321738, "comment_id": 60266923, "body": "individual columns (or rows if axis=1)."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1008537"}, "edited": false, "score": 0, "creation_date": 1459383316, "post_id": 36321918, "comment_id": 60267181, "body": "I seen that. But I don&#39;t understand whether they are using multivariate imputation or just <code>interp1d</code>. I&#39;m hoping that it does this via multivariate analysis."}, {"owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "edited": false, "score": 0, "creation_date": 1459383498, "post_id": 36321918, "comment_id": 60267230, "body": "If you look at the scipy docs, you&#39;ll find that the scipy functions take 1-dim arguments, so they use either the values of a single column or row depending on the given <code>axis</code> keyword` (<code>default=0</code>, so using individual columns as input)."}], "tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1459382547, "last_edit_date": 1495542254, "creation_date": 1459382547, "answer_id": 36321918, "question_id": 36321738, "link": "https://stackoverflow.com/questions/36321738/uncertainity-about-the-interpolate-function-in-pandas/36321918#36321918", "title": "Uncertainity about the Interpolate Function in Pandas", "body": "<p>The <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.interpolate.html\" rel=\"nofollow noreferrer\">docs</a> reference the various available methods - most just rely on the <code>index</code>, possibly via the univariate <code>scipy.interp1d</code> or other univariate <code>scipy</code> methods:</p>\n\n<blockquote>\n  <p>method : {\u2018linear\u2019, \u2018time\u2019, \u2018index\u2019, \u2018values\u2019, \u2018nearest\u2019, \u2018zero\u2019,\n  \u2018slinear\u2019, \u2018quadratic\u2019, \u2018cubic\u2019, \u2018barycentric\u2019, \u2018krogh\u2019, \u2018polynomial\u2019,\n  \u2018spline\u2019 \u2018piecewise_polynomial\u2019, \u2018pchip\u2019} </p>\n</blockquote>\n\n<ul>\n<li>\u2018linear\u2019: ignore the index and treat the values as equally spaced. This is the only method supported on MultiIndexes.</li>\n<li>default \u2018time\u2019: interpolation works on daily and higher resolution data to interpolate given length of interval \u2018index\u2019, \u2018values\u2019: use the actual numerical values of the index </li>\n<li>\u2018nearest\u2019, \u2018zero\u2019, \u2018slinear\u2019, \u2018quadratic\u2019, \u2018cubic\u2019, \u2018barycentric\u2019, \u2018polynomial\u2019 is passed to scipy.interpolate.interp1d. Both \u2018polynomial\u2019 and \u2018spline\u2019 require that you also specify an order (int), e.g. df.interpolate(method=\u2019polynomial\u2019, order=4). These use the actual numerical values of the index. </li>\n<li>\u2018krogh\u2019, \u2018piecewise_polynomial\u2019, \u2018spline\u2019, and \u2018pchip\u2019 are all wrappers around the scipy interpolation methods of similar names. These use the actual numerical values of the index.</li>\n</ul>\n\n<p><a href=\"http://docs.scipy.org/doc/scipy/reference/interpolate.html#univariate-interpolation\" rel=\"nofollow noreferrer\">Scipy docs</a> and charts illustrating output <a href=\"https://stackoverflow.com/questions/27698604/what-do-the-different-values-of-the-kind-argument-mean-in-scipy-interpolate-inte\">here</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1008537"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 761, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466520831, "creation_date": 1459381516, "last_edit_date": 1466520831, "question_id": 36321738, "link": "https://stackoverflow.com/questions/36321738/uncertainity-about-the-interpolate-function-in-pandas", "title": "Uncertainity about the Interpolate Function in Pandas", "body": "<p>I am working with the interpolate function in <code>pandas</code>. Here is a toy example to make an illustrative case:</p>\n\n<pre><code>df=pd.DataFrame({'Data':np.random.normal(size=200), 'Data2':np.random.normal(size=200)}) \n\ndf.iloc[1, 0] = np.nan\n\nprint df\n\nprint df.interpolate('nearest')\n</code></pre>\n\n<p>My question: Does the <code>interpolate</code> function work over multiple columns? That is, does it use multivariate analysis to determine the value for a missing field? Or does it simply look at individual columns?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 6, "creation_date": 1459381639, "post_id": 36321685, "comment_id": 60266655, "body": "Yes.  Create a copy."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1459469395, "post_id": 36321685, "comment_id": 60313291, "body": "&quot;pass by reference&quot; - Python does not use pass by reference. It uses a parameter passing model that unfortunately has no well-accepted name, despite its wide use in modern programming languages."}], "answers": [{"comments": [{"owner": {"reputation": 2271, "user_id": 5431734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1c7553e033ed67ebfe0fbc8dda2cacd5?s=128&d=identicon&r=PG&f=1", "display_name": "Aenaon", "link": "https://stackoverflow.com/users/5431734/aenaon"}, "edited": false, "score": 0, "creation_date": 1459589250, "post_id": 36346697, "comment_id": 60361403, "body": "Thanks, thats helpful indeed, Does it happen to have a link/pointer to Brett&#39;s sticky labels idea? I cant find it."}, {"owner": {"reputation": 8368, "user_id": 170656, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ab69055dbec51045b913cf64fc16d7d4?s=128&d=identicon&r=PG", "display_name": "Caleb Hattingh", "link": "https://stackoverflow.com/users/170656/caleb-hattingh"}, "reply_to_user": {"reputation": 2271, "user_id": 5431734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1c7553e033ed67ebfe0fbc8dda2cacd5?s=128&d=identicon&r=PG&f=1", "display_name": "Aenaon", "link": "https://stackoverflow.com/users/5431734/aenaon"}, "edited": false, "score": 0, "creation_date": 1459642025, "post_id": 36346697, "comment_id": 60377694, "body": "I can&#39;t seem to find it now! Sorry about that.  I may have misattributed the origin.  See <a href=\"https://mail.python.org/pipermail/edu-sig/2008-May/008531.html\" rel=\"nofollow noreferrer\">this post</a> on the Python edu-sig mailing list."}], "tags": [], "owner": {"reputation": 8368, "user_id": 170656, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ab69055dbec51045b913cf64fc16d7d4?s=128&d=identicon&r=PG", "display_name": "Caleb Hattingh", "link": "https://stackoverflow.com/users/170656/caleb-hattingh"}, "is_accepted": true, "score": 2, "last_activity_date": 1459475163, "creation_date": 1459475163, "answer_id": 36346697, "question_id": 36321685, "link": "https://stackoverflow.com/questions/36321685/python-pass-by-reference/36346697#36346697", "title": "Python: pass by reference", "body": "<p>You are correct that <code>df2 = self.df.copy()</code> would resolve your problem, but this has nothing to do with <em>pass by value</em> or <em>pass by reference</em> which refer to arguments in function calls, and neither of which accurately describes Python's function-call semantics anyway.</p>\n\n<p>For your situation, as well as for parameters in function calls, the easiest mental picture is Brett Cannon's idea of <em>sticky labels</em>.  All the names, e.g. so-called <em>variable names</em>, are sticky labels that refer to an actual object.  So you can create as many sticky labels as you like:</p>\n\n<pre><code>def f():\n    pass\n\ng = h = k = m = f  # You created 4 new sticky labels that refer to a single function\n\nclass A():\n    pass\n\ng = h = k = m = A  # Reusing same 4 labels, all refer to one class\n\na = ()\ng = h = k = m = a  # Reusing same 4 labels, all refer to one instance\n</code></pre>\n\n<p>Reassigning a label (name) to a different object, simply means that the previous object loses a reference.  When an object has no more reference, it gets deleted.  In the example above, I created a bunch of references to an instance of the class <code>A</code>.  Using the <code>del</code> keyword you can remove <em>names</em> (i.e. <em>sticky labels</em>), but the underlying object only gets deleted when there are no more references to it.</p>\n\n<pre><code>del h\ndel k\ndel m\ndel a\n\n# At this point, there is still one active reference to the instance\n# that we first created when we assigned it to name \"a\".\n\ndel g\n\n# Now we have removed all references to that instance, so it gets deleted.\n</code></pre>\n"}], "owner": {"reputation": 2271, "user_id": 5431734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1c7553e033ed67ebfe0fbc8dda2cacd5?s=128&d=identicon&r=PG&f=1", "display_name": "Aenaon", "link": "https://stackoverflow.com/users/5431734/aenaon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 36346697, "answer_count": 1, "score": 0, "last_activity_date": 1459475163, "creation_date": 1459381224, "question_id": 36321685, "link": "https://stackoverflow.com/questions/36321685/python-pass-by-reference", "title": "Python: pass by reference", "body": "<p>I am trying to understand the behaviour demonstrated below please. Suppose we have the simple class</p>\n\n<pre><code>class A():\n    def __init__(self):\n        self._df = pd.DataFrame([1,2,3], columns=['c1'], index=['r1', 'r2', 'r3'])\n\n    @property\n    def df(self):\n        return self._df\n\n    def summary(self):\n        df2 = self.df\n        df2['c2'] = pd.Series([4,5,6], index=df2.index)\n        return df2\n</code></pre>\n\n<p>and we make an instance <code>a</code>:</p>\n\n<pre><code>a = A()\n</code></pre>\n\n<p>Then <code>a.df</code> returns</p>\n\n<pre><code>    c1\nr1  1\nr2  2\nr3  3\n</code></pre>\n\n<p>Calling the <code>summary</code> method</p>\n\n<pre><code>s = a.summary()\ns\n</code></pre>\n\n<p>returns </p>\n\n<pre><code>    c1  c2\nr1  1   4\nr2  2   5\nr3  3   6\n</code></pre>\n\n<p>which is fine so far. However the <code>df</code> property (and the underlying attribute) of object <code>a</code> have now been changed too.</p>\n\n<pre><code>a.df\n\n    c1  c2\nr1  1   4\nr2  2   5\nr3  3   6\n</code></pre>\n\n<p>I understand in broad lines that it has to do with the much-discussed pass by reference design of Python and I suspect the key here is the line <code>df2=self.df</code> in the <code>summary</code> method. Hence <code>df2</code> is actually a reference pointing to the same memory location as <code>self.df</code>. Therefore when we modify the object labeled as <code>df2</code> (by adding one more column in this example) we will be able to see the modified object by calling either <code>df2</code> or <code>self.df</code> because they both point to the same thing. </p>\n\n<p>Is this a fair understanding please? What are the best practices If we wanted to decouple the two? Edit <code>df2</code> without affecting <code>df</code>. Make an explicit copy by <code>df2 = self.df.copy()</code> or something else?</p>\n"}, {"tags": ["python", "python-2.7", "line-breaks"], "comments": [{"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1459381202, "post_id": 36321667, "comment_id": 60266508, "body": "How do you define &quot;perfectly&quot;?  Can you give the output that you expect?"}, {"owner": {"reputation": 25, "user_id": 6106751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7920695dcf0f23fa8e4bdd768a5dbebf?s=128&d=identicon&r=PG&f=1", "display_name": "Kingston Joshua", "link": "https://stackoverflow.com/users/6106751/kingston-joshua"}, "reply_to_user": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1459381273, "post_id": 36321667, "comment_id": 60266531, "body": "in every line should be 10 number but my output&#39;s first line there is 11 and last line there is 9 the other lines are good"}, {"owner": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "edited": false, "score": 1, "creation_date": 1459381276, "post_id": 36321667, "comment_id": 60266534, "body": "The code there shouldn&#39;t run, there&#39;s no left operand to that modulo operator in your if statement"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1459381310, "post_id": 36321667, "comment_id": 60266542, "body": "<code>if % 10 == 0</code>? Can you fix your paste?"}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1459381376, "post_id": 36321667, "comment_id": 60266563, "body": "@KingstonJoshua: Put the code in the question itself properly formatted.  You can use the <a href=\"https://stackoverflow.com/posts/36321667/edit\">edit</a> link."}, {"owner": {"reputation": 25, "user_id": 6106751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7920695dcf0f23fa8e4bdd768a5dbebf?s=128&d=identicon&r=PG&f=1", "display_name": "Kingston Joshua", "link": "https://stackoverflow.com/users/6106751/kingston-joshua"}, "edited": false, "score": 0, "creation_date": 1459381534, "post_id": 36321667, "comment_id": 60266612, "body": "I fixed it the left operand is i."}], "answers": [{"tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1459381520, "creation_date": 1459381520, "answer_id": 36321739, "question_id": 36321667, "link": "https://stackoverflow.com/questions/36321667/python-line-break-by-10-elements/36321739#36321739", "title": "python line break by 10 elements", "body": "<p>Change your loop in:</p>\n\n<pre><code>for i in xrange(1, UPTO + 1):\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>import sys\nimport random as r\n\nUPTO = 100\n\ndef main():\n    for i in xrange(1, UPTO + 1):\n        if i % 10 == 0 and i != 0:\n            sys.stdout.write(str(r.randint(0, 9)) + '\\n')\n        else:\n            sys.stdout.write(str(r.randint(0, 9))) \n    print\nmain()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>5324707535\n0662651201\n6774603548\n2062356640\n2371234722\n0295841132\n5498111577\n0871557117\n3062255375\n2219008944\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1459381939, "last_edit_date": 1459381939, "creation_date": 1459381536, "answer_id": 36321742, "question_id": 36321667, "link": "https://stackoverflow.com/questions/36321667/python-line-break-by-10-elements/36321742#36321742", "title": "python line break by 10 elements", "body": "<p>You need to start at 1 and go to <code>UPTO + 1</code>:</p>\n\n<pre><code>for i in xrange(1, UPTO + 1):\n</code></pre>\n\n<p>Once you change that your code works:</p>\n\n<pre><code>In [18]: main()\n3989867912\n0729456107\n3457245171\n4564003409\n3400380373\n1638374598\n5290288898\n6348789359\n4628854868\n4172212396\n</code></pre>\n\n<p>You can also use print as a function with an import from <code>__future__</code> to simplify your code:</p>\n\n<pre><code>from __future__ import print_function\n\nimport random as r\n\nUPTO = 100\n\ndef main():\n    # use a step of 10\n    for i in range(0, UPTO, 10):\n        # sep=\"\" will leave no spaces between, end=\"\" removes newline\n        print(*(r.randint(0, 9) for _ in range(10)), end=\"\", sep=\"\")\n        print()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 6106751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7920695dcf0f23fa8e4bdd768a5dbebf?s=128&d=identicon&r=PG&f=1", "display_name": "Kingston Joshua", "link": "https://stackoverflow.com/users/6106751/kingston-joshua"}, "edited": false, "score": 0, "creation_date": 1459381727, "post_id": 36321748, "comment_id": 60266689, "body": "Thank you, this solution is working for me: for i in range(1, UPTO + 1): !"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 0, "last_activity_date": 1459384047, "last_edit_date": 1459384047, "creation_date": 1459381556, "answer_id": 36321748, "question_id": 36321667, "link": "https://stackoverflow.com/questions/36321667/python-line-break-by-10-elements/36321748#36321748", "title": "python line break by 10 elements", "body": "<p>Fixing your existing code is, as others have noted, just a matter of starting at 1, not 0 (or adding 1 to <code>i</code> when testing the remainder).</p>\n\n<p>But you don't need to reinvent the wheel at all. You can simplify automatic wrapping a lot with <a href=\"https://docs.python.org/2/library/textwrap.html\" rel=\"nofollow\"><code>textwrap.wrap</code></a>. Just generate the output data all at once, e.g.:</p>\n\n<pre><code>digits = 100\n# Make a 100 long string of digits\nalltext = ''.join(str(random.randrange(10)) for _ in range(digits))\n\n# Or to achieve the same effect more efficiently:\nalltext = str(random.randrange(10**(digits-1), 10**digits))\n</code></pre>\n\n<p>then use <code>textwrap.wrap</code> and a loop to <code>print</code> it:</p>\n\n<pre><code>import textwrap\n\nfor line in textwrap.wrap(alltext, width=10):\n    print line\n</code></pre>\n\n<p>Which gets (for example):</p>\n\n<pre><code>4961561591\n3969872520\n1896401684\n8608153539\n0210068022\n3975577783\n8321168859\n8214023841\n8138934528\n7739266079\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1459381569, "creation_date": 1459381569, "answer_id": 36321750, "question_id": 36321667, "link": "https://stackoverflow.com/questions/36321667/python-line-break-by-10-elements/36321750#36321750", "title": "python line break by 10 elements", "body": "<p>Sounds like a good use of the <code>itertools</code> <code>grouper</code> recipe.</p>\n\n<pre><code>import itertools\n\ndef grouper(iterable, n, fillvalue=\"\"):\n    args = [iter(iterable)] * n\n    return itertools.izip_longest(*args, fillvalue=fillvalue)\n\nUPTO = 100\n\ndigits = [str(random.randint(0, 9)) for _ in range(UPTO)]\n\nsys.stdout.write(\"\\n\".join(map(\"\".join, grouper(digits, 10)))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1459381758, "post_id": 36321768, "comment_id": 60266698, "body": "Or just stop using python2 like the rest of us have! :) Good work on the most functional answer (including mine!)"}], "tags": [], "owner": {"reputation": 4719, "user_id": 2958070, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FtkjC.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2958070/ben"}, "is_accepted": false, "score": 1, "last_activity_date": 1459381687, "creation_date": 1459381687, "answer_id": 36321768, "question_id": 36321667, "link": "https://stackoverflow.com/questions/36321667/python-line-break-by-10-elements/36321768#36321768", "title": "python line break by 10 elements", "body": "<p>I would import the <code>print</code> from python3 and use that:</p>\n\n<pre><code>from __future__ import print_function\nimport random\n\nUPTO = 100\nfor i in xrange(100):\n    for j in xrange(10):\n        print(random.randint(0,9), end='')\n    print()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2493, "user_id": 5966448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5797778df7bfc1beb6dd450d7e53d2d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sci Prog", "link": "https://stackoverflow.com/users/5966448/sci-prog"}, "is_accepted": false, "score": 0, "last_activity_date": 1459383097, "last_edit_date": 1459383097, "creation_date": 1459381758, "answer_id": 36321780, "question_id": 36321667, "link": "https://stackoverflow.com/questions/36321667/python-line-break-by-10-elements/36321780#36321780", "title": "python line break by 10 elements", "body": "<p>For python2</p>\n\n<pre><code>from random import randint\nimport sys\nfor i in range(100):\n  sys.stdout.write(str(randint(0,9))+(\"\\n\" if i%10==9 else \"\"))\n</code></pre>\n\n<p>or if you allow the \"print\" function instead of the print statement</p>\n\n<pre><code>from __future__ import print_function\nfrom random import randint\nfor i in range(100):\n  print(randint(0,9), end=\"\\n\" if i%10==9 else \"\")\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6106751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7920695dcf0f23fa8e4bdd768a5dbebf?s=128&d=identicon&r=PG&f=1", "display_name": "Kingston Joshua", "link": "https://stackoverflow.com/users/6106751/kingston-joshua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 36321742, "answer_count": 6, "score": 2, "last_activity_date": 1459384047, "creation_date": 1459381099, "last_edit_date": 1459381415, "question_id": 36321667, "link": "https://stackoverflow.com/questions/36321667/python-line-break-by-10-elements", "title": "python line break by 10 elements", "body": "<p>So I have to write to the standard output 100 number but in a line only put 10 number, I write the code it is almost perfect but the output is like:</p>\n\n<pre><code>23456789101\n5378566145 \n8353464573 \n7596745634 \n4352362356 \n2342345346 \n2553463221 \n9873422358 \n8223552233 \n578942378\n</code></pre>\n\n<p>and there is the code:</p>\n\n<pre><code>import sys\nimport random as r\n\nUPTO = 100\n\ndef main():\n    for i in xrange(UPTO):\n        if i % 10 == 0 and i != 0:\n            sys.stdout.write(str(r.randint(0, 9)) + '\\n')\n        else:\n            sys.stdout.write(str(r.randint(0, 9))) \n    print\n</code></pre>\n\n<p>how can I do this perfectly?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": true, "score": 1, "last_activity_date": 1459407120, "creation_date": 1459407120, "answer_id": 36326123, "question_id": 36321650, "link": "https://stackoverflow.com/questions/36321650/split-a-column-in-pandas-based-on-a-number-of-strings/36326123#36326123", "title": "Split a column in pandas based on a number of strings", "body": "<p>IIUC you can <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.split.html\" rel=\"nofollow\"><code>split</code></a> by regex <code>r'Alpha|Beta'</code> - it means <code>Alpha</code> or <code>Beta</code>:</p>\n\n<pre><code>print df\n             text\n0   aaa Alpha bbb\n1   ddd Alpha ccc\n2    uuu Beta vvv\n\nsplit_df = df['text'].str.split(r'Alpha|Beta').apply(pd.Series)\nsplit_df.columns = ['before','after']\nprint split_df\n  before  after\n0   aaa     bbb\n1   ddd     ccc\n2   uuu     vvv\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 4584337, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-NvW43-Pr4WE/AAAAAAAAAAI/AAAAAAAABdU/P3cfkhlCP5A/photo.jpg?sz=128", "display_name": "Melvin Wevers", "link": "https://stackoverflow.com/users/4584337/melvin-wevers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 36326123, "answer_count": 1, "score": 0, "last_activity_date": 1459407120, "creation_date": 1459381025, "question_id": 36321650, "link": "https://stackoverflow.com/questions/36321650/split-a-column-in-pandas-based-on-a-number-of-strings", "title": "Split a column in pandas based on a number of strings", "body": "<p>I am trying to split a column with text in pandas. </p>\n\n<p>This column contains the words 'Alpha', 'Beta'. \nI need this column to be split after these words, these words and everything before need to go in one column and everything after this in a new column.</p>\n\n<p>I tried this: </p>\n\n<pre><code>split_df = df.str.split('ALPHA ').apply(pd.Series)\n</code></pre>\n\n<p>But then I lose everything before ALPHA</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1459382213, "post_id": 36321594, "comment_id": 60266836, "body": "<code>fie(3).fget(4)</code> returns <code>123</code>, though I have no idea what the point of this would be."}, {"owner": {"reputation": 2058, "user_id": 1530272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b7925337f4bef004d26446360144ac5?s=128&d=identicon&r=PG", "display_name": "Sohan Jain", "link": "https://stackoverflow.com/users/1530272/sohan-jain"}, "edited": false, "score": 2, "creation_date": 1459382742, "post_id": 36321594, "comment_id": 60266995, "body": "Can you please give more context around where you found this code, or the exact code itself? Calling <code>property(foo)</code> is typically used to define a &quot;managed attribute&quot; inside of a class definition (<a href=\"https://docs.python.org/2/library/functions.html#property\" rel=\"nofollow noreferrer\">docs.python.org/2/library/functions.html#property</a>). So, you can do something like <code>instance.fie</code>, and it invokes <code>fie</code>. If we have more context around the code, we can maybe see why the author is doing this"}], "answers": [{"comments": [{"owner": {"reputation": 3691, "user_id": 546465, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394a7bce849c51df4e9371ec3ecd8b0f?s=128&d=identicon&r=PG", "display_name": "Bastiaan", "link": "https://stackoverflow.com/users/546465/bastiaan"}, "edited": false, "score": 0, "creation_date": 1459448302, "post_id": 36322726, "comment_id": 60303574, "body": "That&#39;s it! The function is declared outside of a class to than be used to generate multiple similar but different methods in a class. This way one has to type the code for that method only once. If you also want the class method to behave like a property you have to use the property() function."}], "tags": [], "owner": {"reputation": 581, "user_id": 2004580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B8TbS.jpg?s=128&g=1", "display_name": "dbra", "link": "https://stackoverflow.com/users/2004580/dbra"}, "is_accepted": true, "score": 1, "last_activity_date": 1459388602, "creation_date": 1459388602, "answer_id": 36322726, "question_id": 36321594, "link": "https://stackoverflow.com/questions/36321594/python-function-to-return-property-of-function-construct/36322726#36322726", "title": "Python function to return property of function construct", "body": "<p>The function \"fie\" creates a data descriptor having only a getter, which returns always \"123\" on every instance \"y\" is used.</p>\n\n<p>The parameter \"y\" needed by the protocol even if we bring back a constant, while \"x\" in the example is not used and confusing, so let we change it a bit:</p>\n\n<pre><code>def fie(x):\n    def foo(y):\n       print \"Returning x\"\n       return x\nreturn property(foo)\n\nclass Dog(object):\n    age = fie(3)\n\n&gt;&gt;&gt; Dog.age\n&lt;property object at 0x1050565d0&gt;\n\n&gt;&gt;&gt; pluto = Dog()\n&gt;&gt;&gt; pluto.age\nReturning x\n3\n&gt;&gt;&gt; pluto.age = 5\nTraceback (most recent call last):\n  File \"&lt;pyshell#239&gt;\", line 1, in &lt;module&gt;\n    pluto.age = 5\nAttributeError: can't set attribute\n</code></pre>\n\n<p>As you can see, with our new <em>fie</em> function we create an attribute named <em>age</em> with the constant value of <em>3</em> on the class <em>Dog</em>. When invoked on the class we still see it as the property's protocol wrapper, but on instance <em>pluto</em> it happens the magic. And because we defined only the getter, the property is read-only.</p>\n\n<p>Note that the class must be of the new-style (i.e. inheriting from <em>object</em>), otherwise the assignment would work and overwrite forever the wrapper, changing the attribute <em>age</em> into an actual integer value within the instance's dictionary:</p>\n\n<pre><code>class Dog2:\n     age = fie(7)\n\n&gt;&gt;&gt; ploto = Dog2()\n&gt;&gt;&gt; ploto.age\nReturning original x\n7\n&gt;&gt;&gt; ploto.age = 8\n&gt;&gt;&gt; ploto.age\n8\n</code></pre>\n"}], "owner": {"reputation": 3691, "user_id": 546465, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/394a7bce849c51df4e9371ec3ecd8b0f?s=128&d=identicon&r=PG", "display_name": "Bastiaan", "link": "https://stackoverflow.com/users/546465/bastiaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 0, "accepted_answer_id": 36322726, "answer_count": 1, "score": 1, "last_activity_date": 1459388602, "creation_date": 1459380723, "last_edit_date": 1459381350, "question_id": 36321594, "link": "https://stackoverflow.com/questions/36321594/python-function-to-return-property-of-function-construct", "title": "Python function to return property of function construct", "body": "<p>Found this construct in the source of some python package (and it's probably more common). What is done with this?</p>\n\n<pre><code>def fie(x):\n    def foo(y):\n        return 123\n    return property(foo)\n</code></pre>\n\n<p>When trying on a scratchpad I can't do anything with the outcome:</p>\n\n<pre><code>fie(3)\n&lt;property object at 0x04D1BDE0&gt;\n\nfie(3)(4)\n'property' object is not callable\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "graph"], "comments": [{"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "reply_to_user": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1459380853, "post_id": 36321578, "comment_id": 60266382, "body": "@roadrunner66 Would it matter if we tilted or not? The difference between levels will be the same y-displacement?"}, {"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1459381333, "post_id": 36321578, "comment_id": 60266552, "body": "I believe your solution should lie in a model for the physical reality you are trying to understand. E.g. would you want to rotate the graphs first to align with x and y  or is the current coordinate system the one you need? If the steps are very periodic, an FFT might be a way to test periodicity. The derivative would allow you to remove slant by putting an offset in such that most points would average zero as you mentioned."}, {"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1459381535, "post_id": 36321578, "comment_id": 60266613, "body": "No. If you tilted the graphs to be approximately horizontal, there would be no <code>step</code> in the <code>y-axis</code>. So step needs to be defined, I think you mean it in the sense where the graphs are tilted in a way to resemble stairs, like in the 2nd graph."}, {"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "reply_to_user": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1459381752, "post_id": 36321578, "comment_id": 60266696, "body": "Yes I see what you mean. In that case, yes the coordinate system I am using right now is very important. The y-displacement on these &#39;slanted&#39; graphs between step levels is what I am after."}, {"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1459382598, "post_id": 36321578, "comment_id": 60266952, "body": "I like the derivative, it gives you a function that (for the last data set) that looks like an inverted comb-function (with a positive offset for the slant). Now the data in the last set are unusually regular. To model this comb, you could make a sequence of pulses with irregular spacing and irregular width OR height (the integral over the pulse is your step height, so only one variable is needed for the &#39;pulse&#39;), then fit the whole thing to the derivative of your data."}, {"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1459382782, "post_id": 36321578, "comment_id": 60267007, "body": "To get a start on you average step frequency in x (you need some guess to start your fit) I&#39;d use a Fourier transform."}, {"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "reply_to_user": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1459382904, "post_id": 36321578, "comment_id": 60267036, "body": "Ya, a FT would give me the frequency - but im not sure how this is helpful."}, {"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "reply_to_user": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1459384197, "post_id": 36321578, "comment_id": 60267448, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/107797/discussion-between-roadrunner66-and-renegade\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1459434667, "post_id": 36324011, "comment_id": 60294503, "body": "Ya, that looks pretty good - thank you :) I have been trying to implement the autofocus for the histogram, but im kinda stuck - any suggestions?"}, {"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1459447734, "post_id": 36324011, "comment_id": 60303203, "body": "also, how can I threshold the histogram?"}, {"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "reply_to_user": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 1, "creation_date": 1459448010, "post_id": 36324011, "comment_id": 60303375, "body": "Thresholding means you remove all values below a certain level, which you could do with a loop, or more elegantly with a numpy construct like : <code>aa[aa&lt;3.5e-9] =0</code>.  I&#39;ll take a look at the <code>autofocus</code> later, but try something yourself, like make a sum of the absolute values squared of the differences of all consecutive values in the histogram. This metric should peak, when the histogram is very sharp."}, {"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1459448254, "post_id": 36324011, "comment_id": 60303537, "body": "I have been trying to do the autofocus for all day, as the slider seems finicky - I could use your help for sure. thank you kindly :)"}, {"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1459449136, "post_id": 36324011, "comment_id": 60304073, "body": "I don&#39;t think I want to get rid of values under a certain value as you mention. I want to get rid of the bins with a low count rate - or?"}, {"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "reply_to_user": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1459450564, "post_id": 36324011, "comment_id": 60304880, "body": "Yes, I was referring to the histogram, so with values I meant bins with low counts."}, {"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1459461822, "post_id": 36324011, "comment_id": 60311010, "body": "K got that part working, now just the autofocus and I should be done :)"}], "tags": [], "owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "is_accepted": true, "score": 2, "last_activity_date": 1459397540, "creation_date": 1459397540, "answer_id": 36324011, "question_id": 36321578, "link": "https://stackoverflow.com/questions/36321578/step-function-analysis-with-python/36324011#36324011", "title": "Step function analysis with python", "body": "<p>Let's assume your data are AFM measurements of a crystal surface (all units in m) and you want to get the step height of the crystal. The following would get you towards that. </p>\n\n<pre><code>from __future__ import division\nfrom ipywidgets import *\nimport numpy as np\nimport matplotlib.pyplot as p\n%matplotlib inline\n\ndef rotatedata(x,y,a):\n    cosa=np.cos(a)\n    sina=np.sin(a)\n    x = x*cosa-y*sina\n    y = x*sina+y*cosa\n    return x,y\n\ndata=np.loadtxt('plot3.txt')\ndata=data.T\nx,y=data[0],data[1]\n\ndef workit(a2):\n    fig=p.figure(num=None, figsize=(18, 16), dpi= 80, facecolor='w', edgecolor='k')\n    p.subplot(511) # , aspect='equal')\n    p.plot(x,y)\n\n    #what is the slope? \n    m,b = np.polyfit(x, y, 1)\n\n    x1,y1=rotatedata(x,y, -np.arctan(m) )  # rotate data to have flat surface, \n                                           # interesting for surface roughness\n    p.subplot(512 )\n    p.plot(x1,y1)\n\n    x2,y2=rotatedata(x,y, a2)    # rotate data to 'sharpen' histogram\n    p.subplot(513 )\n    p.plot(x2,y2)\n\n    p.subplot(514)\n    p.hist(y2,bins=130)        \n\n    y3=np.diff(y2)\n    p.subplot(515 )\n    p.plot(y3)\n\n    return HTML()\n\ninteract(workit,a2=[-0.002,0.002,0.00001])  \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1lKwN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1lKwN.png\" alt=\"enter image description here\"></a></p>\n\n<p>The first plot is your raw data. In the 2nd plot I removed the slope of the data to show data that you would use if you cared about calculating the surface roughness. </p>\n\n<p>The third plot shows the same data if they are rotated such that all slopes are horizontal. </p>\n\n<p>How this is done (interactive slider) is shown in the 4th plot, which is a histogram of the rotated data. You simple move the slider (rotate the data) until the histogram has maximum sharpness (all maxima are of minimum width). \nI did this by hand (slider) not with a function but a simple <code>autofocus</code> routine, maximizing the sum of the absolute differences between neighboring values would be OK to use.</p>\n\n<p>In the last plot I show the 1st derivative (redundant now, but average slope of the horizontal regions should center around zero as a double-check).</p>\n\n<p>The width of the crystal layers (step height you were asking for) is now given by the distances of the maxima in the histogram. </p>\n\n<p>I'll leave the actual determination of each step as an exercise (e.g. threshold the histogram, then calculate the center of gravity for each peak, then get differences of neighboring peak centers of gravity). </p>\n"}, {"comments": [{"owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1459471797, "post_id": 36345366, "comment_id": 60313885, "body": "Do you know why it always omits the last level? There is clearly 10 groups in your histo but only 9 level array enteries -- Im having the same problem in other examples as well"}, {"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "reply_to_user": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "edited": false, "score": 0, "creation_date": 1459490084, "post_id": 36345366, "comment_id": 60318853, "body": "It leaves out the first one. I think it&#39;s because there is no zero bin to the left. That could be fixed."}], "tags": [], "owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "is_accepted": false, "score": 1, "last_activity_date": 1459465780, "creation_date": 1459465780, "answer_id": 36345366, "question_id": 36321578, "link": "https://stackoverflow.com/questions/36321578/step-function-analysis-with-python/36345366#36345366", "title": "Step function analysis with python", "body": "<p>The 2nd step here with automatic leveling of the histogram. I define a function <code>focus</code> that tells me how <code>sharp</code> the histogram is then I use that function to find the angle that gives me the sharpest histogram. I then pick that angle, threshold the histogram and find the center of gravity of each histogram peak. The differences between those locations are the steps. If the numbers were real in meters the steps would be about 4 Angstrom. </p>\n\n<p>It turns out that the same idea can be used in 2D to level AFM, or white light interferometer data and very precisely determine step heights not just of crystals, but of nanoscale coatings or etch depths. </p>\n\n<pre><code>from __future__ import division\nfrom ipywidgets import *\nimport numpy as np\nimport matplotlib.pyplot as p\n%matplotlib inline\n\ndef rotatedata(x,y,a):\n    cosa=np.cos(a)\n    sina=np.sin(a)\n    x = x*cosa-y*sina\n    y = x*sina+y*cosa\n    return x,y\n\n\ndata=np.loadtxt('plot3.txt')\ndata=data.T\nx,y=data[0],data[1]\n\ndef rotateAndCheck(a2):\n    x2,y2=rotatedata(x,y, a2) \n    vals,edges=np.histogram(y2,bins=230)\n    focus=np.sqrt(np.sum((np.diff(vals))**2))\n    return focus\n\nfocus=[]\namin,amax,astep=-0.01,0.01,0.0001\nfor i in np.arange(amin,amax,astep):\n    focus.append(rotateAndCheck(i))\n\n\nfig=p.figure(num=None, figsize=(18, 16), dpi= 80, facecolor='w', edgecolor='k')\n\n\np.subplot(311)    \n\np.plot(focus,'.-')\nnm=np.argmax(focus)\nangle=amin+astep*nm\n\n\np.subplot(312)\nx2,y2=rotatedata(x,y, angle) \nvals,edges,_=p.hist(y2,bins=230)\n\n\n#now threshold\np.subplot(313)\nvals[vals&lt;3]=0\n#print len(edges),len(vals)\ndeltaedge=edges[1]-edges[0]\n#print deltaedge\n#p.bar(edges[:-1],vals,0.05e-10)\np.bar(np.arange(len(vals)),vals,0.05e-10)\np.show()\n\n# now you go through the histogram from left to right, identify each group and compute the center of gravity for each group\n# this could get trickier if the bin size is not well chosen.\n\nfrom scipy.ndimage.measurements import center_of_mass\nlevels=[]\n\nfor i in range(1,len(edges)-2):\n    if  vals[i-1]==0 and vals[i]&gt;0:\n        istart=i\n        #print 'istart: ',istart\n    if  vals[i]&gt;0 and vals[i+1]==0:\n        istop=i\n        #print 'istop', istop\n        sum=np.sum(vals[istart:istop+1])\n        c= center_of_mass(vals[istart:istop+1])[0] \n        level= edges[istart]+c*deltaedge\n        levels.append(level)\n\n        #print i, sum\n\nprint 'levels: ',levels        \nprint\nprint 'steps: ' ,np.diff(levels)\n</code></pre>\n\n<p>Output: \n<a href=\"https://i.stack.imgur.com/VE5DP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VE5DP.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2390, "favorite_count": 1, "accepted_answer_id": 36324011, "answer_count": 2, "score": 1, "last_activity_date": 1459465780, "creation_date": 1459380591, "question_id": 36321578, "link": "https://stackoverflow.com/questions/36321578/step-function-analysis-with-python", "title": "Step function analysis with python", "body": "<p>I have been bouncing some ideas around about this problem, but thought I would consult with the online community to see if someone has a better option. </p>\n\n<p>So I have step-like function graphs like this: </p>\n\n<p><a href=\"https://i.stack.imgur.com/6P6sW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6P6sW.png\" alt=\"step-1 graph\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/tkIif.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tkIif.png\" alt=\"step-2 graph\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/KIQYk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KIQYk.png\" alt=\"step-3 graph\"></a></p>\n\n<p>And with this I want to compute the y-displacement between steps.</p>\n\n<p>As one can see the steps are not perfectly horizontal, but rather take a small range of y-values before stepping up. </p>\n\n<p>So the question is:</p>\n\n<p>(1) What is the 'proper' way (if there is one) to take the average y-value of each 'level'? I am not sure where I should be using as my left most point and my right most point on each level- so I can take the values between these points and average them, and then attain the 'average' of each level, hope this makes sense. As one can see they do not all span the same displacement in x. The ultimate goal is to get the y-displacement between levels, once I have the 'average' value of each 'level' it is trivial to take the difference. </p>\n\n<p>I was maybe thinking of taking the derivative of the curve and seeing where it is equal to zero for my left and right most points on each level but i'm not sure it will work as each level also contains points where (dy/dx = 0) -- so I could use some insight.</p>\n\n<p>Thank you :) Oh - and this must be done in Python -- and it is not just these graphs, but a lot of them with a similar style, so the code must be generic enough to handle other step-like graphs. </p>\n\n<p>Date file for graph 1: <a href=\"http://textuploader.com/5nwsj\" rel=\"nofollow noreferrer\">http://textuploader.com/5nwsh</a></p>\n\n<p>Data file for graph 2: <a href=\"http://textuploader.com/5nwsj\" rel=\"nofollow noreferrer\">http://textuploader.com/5nwsv</a></p>\n\n<p>Data file for graph 3: <a href=\"http://textuploader.com/5nwsj\" rel=\"nofollow noreferrer\">http://textuploader.com/5nwsj</a></p>\n\n<p>Scatter Plot Python code: </p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport pylab as pl\n\n\ndata=np.loadtxt('data-file')\nx= data[:,0]\ny=data[:,1]\n\n\npl.plot(data[:,0],data[:,1],'r')\n\npl.xlabel('x')\npl.ylabel('y')\nplt.show()\n</code></pre>\n"}, {"tags": ["java", "c#", "python", "algorithm", "language-agnostic"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1459381781, "post_id": 36321558, "comment_id": 60266706, "body": "Are the numbers after the <code>n</code> the exponents?  Is this a linear inequality?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1459381822, "post_id": 36321558, "comment_id": 60266715, "body": "What results were there when you searched the internet using &quot;c++ fortran inequality algorithm&quot;?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1459381880, "post_id": 36321558, "comment_id": 60266728, "body": "You <i>could</i> invent your own algorithm by writing down the steps required to solve the inequalities."}, {"owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "edited": false, "score": 3, "creation_date": 1459383283, "post_id": 36321558, "comment_id": 60267172, "body": "The problem of finding whether there is at least one integer solution to a set of linear inequalities is NP complete. &quot;Feasible solutions&quot; &quot;Integer linear programming&quot; are helpful search terms, but, as the NP-completeness suggests, you&#39;re not going to get easy answers."}, {"owner": {"reputation": 13662, "user_id": 447023, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/zuvbs.jpg?s=128&g=1", "display_name": "Santosh Linkha", "link": "https://stackoverflow.com/users/447023/santosh-linkha"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1459397516, "post_id": 36321558, "comment_id": 60270818, "body": "@ThomasMatthews no the solutions is linear. It is about finding the all particular solutions of the matrix equation AX=B whose elements are greater than zero. I&#39;ll google for inequaity algorithm and see."}, {"owner": {"reputation": 537, "user_id": 814753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f252cdb8802514f46799d2877bd5d8?s=128&d=identicon&r=PG&f=1", "display_name": "molecule", "link": "https://stackoverflow.com/users/814753/molecule"}, "edited": false, "score": 0, "creation_date": 1459821207, "post_id": 36321558, "comment_id": 60447025, "body": "@SantoshLinkha I think my solution is the best you can do for this problem.  I understand that you&#39;ll want to wait for possibly better solutions to be submitted, but it would be nice to get your comments on what I&#39;ve offered."}], "answers": [{"comments": [{"owner": {"reputation": 13662, "user_id": 447023, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/zuvbs.jpg?s=128&g=1", "display_name": "Santosh Linkha", "link": "https://stackoverflow.com/users/447023/santosh-linkha"}, "edited": false, "score": 0, "creation_date": 1459397609, "post_id": 36322108, "comment_id": 60270850, "body": "As I feared, the solution is ugly. Perhaps I should take cartesian product of all ranges of n&#39;s"}, {"owner": {"reputation": 8425, "user_id": 1396822, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f2e818842b0436e98b279af7f69997cb?s=128&d=identicon&r=PG", "display_name": "aka.nice", "link": "https://stackoverflow.com/users/1396822/aka-nice"}, "edited": false, "score": 0, "creation_date": 1459413707, "post_id": 36322108, "comment_id": 60278888, "body": "Once you have set n1, the constant becomes 205-98n1, so the bounds of n2 to be explored can be reduced..."}, {"owner": {"reputation": 34901, "user_id": 3973077, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e80187d131859fc0601a01231fec657e?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Boddington", "link": "https://stackoverflow.com/users/3973077/paul-boddington"}, "edited": false, "score": 0, "creation_date": 1459420257, "post_id": 36322108, "comment_id": 60283684, "body": "That&#39;s the point I make at the end. There are other ways to improve this too. E.g. if you add the 2 original inequalities, you get that the sum of the values can&#39;t exceed 20."}, {"owner": {"reputation": 13662, "user_id": 447023, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/zuvbs.jpg?s=128&g=1", "display_name": "Santosh Linkha", "link": "https://stackoverflow.com/users/447023/santosh-linkha"}, "edited": false, "score": 0, "creation_date": 1459536700, "post_id": 36322108, "comment_id": 60346912, "body": "Can we generalize for other values of n&#39;s? For example, I don&#39;t know how many loops are going to be there? I know there exists an algorithm in Wolfram Mathematica. <code>Solve[{97 n1 + 89 n2 + 42 n3 + 20 n4 + 16 n5 + 11 n6 + 6 n7 + 2 n8 -      185 &gt; 0,    -98 n1 - 90 n2 - 43 n3 - 21 n4 - 17 n5 - 12 n6 - 7 n7 - 3 n8 + 205 &gt;     0,   n1 &gt;= 0, n2 &gt;= 0, n3 &gt;= 0, n4 &gt;= 0, n5 &gt;= 0, n6 &gt;= 0, n7 &gt;= 0,    n8 &gt;= 0}, {n1, n2, n3, n4, n5, n6, n7, n8}, Integers]</code>"}, {"owner": {"reputation": 34901, "user_id": 3973077, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e80187d131859fc0601a01231fec657e?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Boddington", "link": "https://stackoverflow.com/users/3973077/paul-boddington"}, "edited": false, "score": 0, "creation_date": 1459587651, "post_id": 36322108, "comment_id": 60360993, "body": "When you don&#39;t know the number of loops, the usual solution is recursion, so as long as you have just 2 inequalities and the +/- signs are the same as in your question my answer can be generalised. As for how Wolfram does the general case, I have no idea I&#39;m afraid, but the simplex algorithm is related."}], "tags": [], "owner": {"reputation": 34901, "user_id": 3973077, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e80187d131859fc0601a01231fec657e?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Boddington", "link": "https://stackoverflow.com/users/3973077/paul-boddington"}, "is_accepted": false, "score": 2, "last_activity_date": 1459384762, "last_edit_date": 1459384762, "creation_date": 1459383859, "answer_id": 36322108, "question_id": 36321558, "link": "https://stackoverflow.com/questions/36321558/find-the-set-of-integers-for-which-two-linear-equalities-holds-true/36322108#36322108", "title": "find the set of integers for which two linear equalities holds true", "body": "<p>There are 1013 solutions, but I do not know the most efficient way to solve this.</p>\n\n<p>Looking at the second inequality, <code>17 * n5</code> cannot be more than <code>205</code> (otherwise the entire left hand side could not be positive). This leads to <code>n5 &lt;= 12</code>. By computing a similar bound for each of the other variables, you can reduce the problem to one that can be solved quickly using nested loops.</p>\n\n<p>This Java code prints out all the solutions.</p>\n\n<pre><code>for (int n1 = 0; n1 &lt;= 2; n1++) {\n    for (int n2 = 0; n2 &lt;= 2; n2++) {\n        for (int n3 = 0; n3 &lt;= 4; n3++) {\n            for (int n4 = 0; n4 &lt;= 9; n4++) {\n                for (int n5 = 0; n5 &lt;= 12; n5++) {\n                    for (int n6 = 0; n6 &lt;= 17; n6++) {\n                        for (int n7 = 0; n7 &lt;= 68; n7++) {\n                            if (97 * n1 + 89 * n2 + 42 * n3 + 20 * n4 + 16 * n5 + 11 * n6 + 2 * n7 - 185 &gt; 0\n                                &amp;&amp; -98 * n1 - 90 * n2 - 43 * n3 - 21 * n4 - 17 * n5 - 12 * n6 - 3 * n7 + 205 &gt; 0) {\n                                System.out.println(Arrays.asList(n1, n2, n3, n4, n5, n6, n7));\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>It is possible to make this more efficient by stopping each loop as soon as the sum of the first few terms of </p>\n\n<pre><code>98n1 + 90n2 + 43n3 + 21n4 + 17n5 + 12n6 + 3n7\n</code></pre>\n\n<p>reaches 205.</p>\n\n<p>For example, the <code>n4</code> loop can be replaced with</p>\n\n<pre><code>for (int n4 = 0; 98 * n1 + 90 * n2 + 43 * n3 + 21 * n4 &lt; 205; n4++)\n</code></pre>\n\n<p>If you change all 7 loops in this way, all 1013 solutions can be found extremely quickly. </p>\n"}, {"tags": [], "owner": {"reputation": 92, "user_id": 6059972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86aa13b8475bf5e3680ac1674039095?s=128&d=identicon&r=PG&f=1", "display_name": "Shear Plane", "link": "https://stackoverflow.com/users/6059972/shear-plane"}, "is_accepted": false, "score": 1, "last_activity_date": 1459553025, "last_edit_date": 1495541389, "creation_date": 1459553025, "answer_id": 36367338, "question_id": 36321558, "link": "https://stackoverflow.com/questions/36321558/find-the-set-of-integers-for-which-two-linear-equalities-holds-true/36367338#36367338", "title": "find the set of integers for which two linear equalities holds true", "body": "<p>Seems to be something like linear programming with integer solutions.  I think there some algorithms are already implemented.\nTry consider <a href=\"https://stackoverflow.com/questions/260442/linear-programming-tool-libraries-for-java\">Linear Programming Tool/Libraries for Java</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "is_accepted": false, "score": 3, "last_activity_date": 1459562120, "creation_date": 1459562120, "answer_id": 36368331, "question_id": 36321558, "link": "https://stackoverflow.com/questions/36321558/find-the-set-of-integers-for-which-two-linear-equalities-holds-true/36368331#36368331", "title": "find the set of integers for which two linear equalities holds true", "body": "<p>In both examples you gave I noticed the same pattern. For example, for the first case if you add the two equations together, you'll get</p>\n\n<pre><code>-n1 - n2 - n3 - n4 - n5 - n6 - n7 + 20 &gt; 0\n</code></pre>\n\n<p>which can be rearranged to</p>\n\n<pre><code>n1 + n2 + n3 + n4 + n5 + n6 + n7 &lt; 20\n</code></pre>\n\n<p>This is a nice bounded equation that you can brute force. Specifically, you can iterate for <code>n1</code> from 0 to 19, for <code>n2</code> from 0 to 19-n1, etc. A possible solution of this would be (0, 0, 0, 0, 0, 0, 0), but we notice that this doesn't satisfy our original equation. So, just generate all possible values for (n1, n2, ..., n7) and keep only those which satisfy your equation. Hardcoding all this results to</p>\n\n<pre><code>def find_solutions(N):\n    sols = []\n    for n1 in xrange(N):\n        for n2 in xrange(N-n1):\n            for n3 in xrange(N-n1-n2):\n                for n4 in xrange(N-n1-n2-n3):\n                    for n5 in xrange(N-n1-n2-n3-n4):\n                        for n6 in xrange(N-n1-n2-n3-n4-n5):\n                            for n7 in xrange(N-n1-n2-n3-n4-n5-n6):\n                                if (97*n1 + 89*n2 + 42*n3 + 20*n4 + 16*n5 + 11*n6 + 2*n7 - 185 &gt; 0 and\n                                    -98*n1 - 90*n2 - 43*n3 - 21*n4 - 17*n5 - 12*n6 - 3*n7 + 205 &gt; 0):\n                                    sols.append((n1, n2, n3, n4, n5, n6, n7))\nreturn sols\n</code></pre>\n\n<p><code>find_solutions(20)</code> finds all 1013 solutions in 0.6 seconds. Similarly, for the second case it finds all 4015 solutions in 2.3 seconds. Now, this isn't easy to generalise at all, but it shows that with a smart approach, Python or any other language, doesn't have to be slow.</p>\n\n<p>On the other hand, recursion allows us to generalise this for any number of nested loops but at a price of running a bit slower.</p>\n\n<pre><code>def find_solutions(N, coeffs, depth=0, variables=None, subtotal=None, solutions=None):\n    if variables is None:\n        solutions = []\n        subtotal = [0 for _ in xrange(len(coeffs[0]))]\n        variables = [0 for _ in xrange(len(coeffs[0])-1)]\n    if depth == len(coeffs[0])-2:\n        for v in xrange(N-sum(variables[:depth])):\n            conditions = all(\n                subtotal[i]+coeffs[i][depth]*v &gt; coeffs[i][-1]\n                for i in xrange(len(coeffs))\n            )\n            if conditions:\n                variables[depth] = v\n                solutions.append(tuple(variables))\n    else:\n        for v in xrange(N-sum(variables[:depth])):\n            variables[depth] = v\n            total = [subtotal[i]+coeffs[i][depth]*v for i in xrange(len(coeffs))]\n            find_solutions(N, coeffs, depth+1, variables, total, solutions)\n    if depth == 0:\n        return solutions\n</code></pre>\n\n<p>To run this, generate the coefficients for each equation and pass them to the function. Keep in mind the sign for the constants is inverted!</p>\n\n<pre><code>coeffs = [\n    [97, 89, 42, 20, 16, 11, 2, 185],\n    [-98, -90, -43, -21, -17, -12, -3, -205]\n]\nsolutions = find_solutions(20, coeffs)\nprint(len(solutions))\n</code></pre>\n\n<p>This one finishes the <em>n</em>=7 case in 1.6 seconds and the <em>n</em>=8 case in 5.8. I'll look into any possible optimisations if you expect your <em>n</em> to get very large, but for the time being it looks satisfactory.</p>\n\n<p>The remaining question is whether the sum of your equations will always simplify to something like <code>n1 + n2 + ... nn &lt; N</code>. There is a simple solution around that if that's not the case, but I opted not to prematurely overgeneralise the code beyond the examples you had provided us.</p>\n\n<p>Finally, I imagine the same approach could be implemented in Java or C# and it'd probably be even faster. I wouldn't mind doing that if your general cases are expected to take much longer to solve.</p>\n"}, {"comments": [{"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 2, "creation_date": 1459623502, "post_id": 36376671, "comment_id": 60372432, "body": "Beautiful solution. It is indeed true that it scales with the number of coefficients and how large smin and smax are. But solving for the smaller cases lightningly fast, you only help yourself for the bigger cases. :)"}, {"owner": {"reputation": 537, "user_id": 814753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f252cdb8802514f46799d2877bd5d8?s=128&d=identicon&r=PG&f=1", "display_name": "molecule", "link": "https://stackoverflow.com/users/814753/molecule"}, "reply_to_user": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 0, "creation_date": 1459715026, "post_id": 36376671, "comment_id": 60398257, "body": "I just edited the updated solve() function to correct an error in the early-termination conditions."}, {"owner": {"reputation": 537, "user_id": 814753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f252cdb8802514f46799d2877bd5d8?s=128&d=identicon&r=PG&f=1", "display_name": "molecule", "link": "https://stackoverflow.com/users/814753/molecule"}, "reply_to_user": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 0, "creation_date": 1459724011, "post_id": 36376671, "comment_id": 60401295, "body": "I edited the docstring for the updated solve() function, explaining that the input coefficients were expected to be ordered. (This is assumed by the second early-termination condition.)"}], "tags": [], "owner": {"reputation": 537, "user_id": 814753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f252cdb8802514f46799d2877bd5d8?s=128&d=identicon&r=PG&f=1", "display_name": "molecule", "link": "https://stackoverflow.com/users/814753/molecule"}, "is_accepted": true, "score": 8, "last_activity_date": 1459723935, "last_edit_date": 1492085956, "creation_date": 1459618775, "answer_id": 36376671, "question_id": 36321558, "link": "https://stackoverflow.com/questions/36321558/find-the-set-of-integers-for-which-two-linear-equalities-holds-true/36376671#36376671", "title": "find the set of integers for which two linear equalities holds true", "body": "<p>Reti43 has the right idea, but there's a quick recursive solution that works with less restrictive assumptions about your inequalities.</p>\n\n<pre><code>def solve(smin, smax, coef1, coef2):\n    \"\"\"\n    Return a list of lists of non-negative integers `n` that satisfy\n    the inequalities,\n\n    sum([coef1[i] * n[i] for i in range(len(coef1)]) &gt; smin\n    sum([coef2[i] * n[i] for i in range(len(coef1)]) &lt; smax\n\n    where coef1 and coef2 are equal-length lists of positive integers.\n    \"\"\"\n    if smax &lt; 0:\n        return []\n\n    n_max = ((smax-1) // coef2[0])\n    solutions = []\n    if len(coef1) &gt; 1:\n        for n0 in range(n_max + 1):\n            for solution in solve(smin - n0 * coef1[0],\n                                  smax - n0 * coef2[0], \n                                  coef1[1:], coef2[1:]):\n                solutions.append([n0] + solution)\n    else:\n        n_min = max(0, (smin // coef1[0]) + 1)\n        for n0 in range(n_min, n_max + 1):\n            if n0 * coef1[0] &gt; smin and n0 * coef2[0] &lt; smax:\n                solutions.append([n0])\n    return solutions\n</code></pre>\n\n<p>You'd apply this to your original problem like this,</p>\n\n<pre><code>smin, coef1 = 185, (97, 89, 42, 20, 16, 11, 2)\nsmax, coef2 = 205, (98, 90, 43, 21, 17, 12, 3)\nsolns7 = solve(smin, smax, coef1, coef2)\nlen(solns7)\n1013\n</code></pre>\n\n<p>and to the longer problem like this,</p>\n\n<pre><code>smin, coef1 = 185, (97, 89, 42, 20, 16, 11, 6, 2)\nsmax, coef2 = 205, (98, 90, 43, 21, 17, 12, 7, 3)\nsolns8 = solve(smin, smax, coef1, coef2)\nlen(solns8)\n4015\n</code></pre>\n\n<p>On my Macbook, both of these cases are solved in milliseconds.  This should scale reasonably well to slightly larger problems, but fundamentally, it's O(2^N) in the number of coefficients N.  How well it actually scales depends on how large the additional coefficients are - the more large coefficients (compared to smax-smin), the fewer possible solutions and the faster it'll run.</p>\n\n<p><strong>Updated</strong>:  From the discussion on the linked <a href=\"https://math.stackexchange.com/questions/1723869/finding-all-lattice-point-in-bounded-region\">M.SE post</a>, I see that the relationship between the two inequalities here is part of the structure of the problem.  Given that, a slightly simpler solution can be given.  The code below also includes a couple of additional optimizations, which speed up the solution for the 8-variable case from 88 milliseconds to 34 milliseconds on my laptop.  I've tried this on examples with as many as 22 variables and gotten the results in less than a minute, but it's never going to be practical for hundreds of variables.</p>\n\n<pre><code>def solve(smin, smax, coef):\n    \"\"\"\n    Return a list of lists of non-negative integers `n` that satisfy\n    the inequalities,\n\n    sum([coef[i] * n[i] for i in range(len(coef)]) &gt; smin\n    sum([(coef[i]+1) * n[i] for i in range(len(coef)]) &lt; smax\n\n    where coef is a list of positive integer coefficients, ordered\n    from highest to lowest.\n    \"\"\"\n    if smax &lt;= smin:\n        return []\n    if smin &lt; 0 and smax &lt;= coef[-1]+1:\n        return [[0] * len(coef)]\n\n    c0 = coef[0]\n    c1 = c0 + 1\n    n_max = ((smax-1) // c1)\n    solutions = []\n    if len(coef) &gt; 1:\n        for n0 in range(n_max + 1):\n            for solution in solve(smin - n0 * c0,\n                                  smax - n0 * c1, \n                                  coef[1:]):\n                solutions.append([n0] + solution)\n    else:\n        n_min = max(0, (smin // c0) + 1)\n        for n0 in range(n_min, n_max + 1):\n            solutions.append([n0])\n    return solutions\n</code></pre>\n\n<p>You'd apply it to the 8-variable example like this,</p>\n\n<pre><code>solutions = solve(185, 205, (97, 89, 42, 20, 16, 11, 6, 2))\nlen(solutions)\n4015\n</code></pre>\n\n<p>This solution directly enumerates the lattice points in the bounded region.  Since you want all of these solutions, the time it takes to get them is going to be proportional (at best) to the number of bound lattice points, which grows exponentially with the number of dimensions (variables).</p>\n"}, {"tags": [], "owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "is_accepted": false, "score": 1, "last_activity_date": 1459780073, "last_edit_date": 1592644375, "creation_date": 1459725635, "answer_id": 36392471, "question_id": 36321558, "link": "https://stackoverflow.com/questions/36321558/find-the-set-of-integers-for-which-two-linear-equalities-holds-true/36392471#36392471", "title": "find the set of integers for which two linear equalities holds true", "body": "<p>(up to 13 integers only)\nHere is ugly brute-force with gpgpu(opencl) on 1600 cores finding 1013(7 ints) solutions in 9.3 milliseconds including array download time from gpu to cpu memory:</p>\n<p><strong>Edit:</strong> Corrected n1,n2,n3 as they were 1,20,400 instead of 20,20,20 limited.</p>\n<pre><code>__kernel void solver1(__global __write_only float * subCount){\n                        int threadId=get_global_id(0);\n                        int ctr=0;\n                        int n1=threadId/400;\n                        int n2=(threadId/20)%20;\n                        int n3=threadId%20;\n                        for(int n4=0;n4&lt;=20;n4++) \n                           for(int n5=0;n5&lt;=20;n5++)\n                               for(int n6=0;n6&lt;=20;n6++)\n                                  for(int n7=0;n7&lt;=20;n7++)\n                                      if (\n                      (97*n1 + 89*n2 + 42*n3 + 20*n4 + 16*n5 + 11*n6 + 2*n7 - 185 &gt; 0) &amp;&amp; \n                      (-98*n1 - 90*n2 - 43*n3 - 21*n4 - 17*n5 - 12*n6 - 3*n7 + 205 &gt; 0))\n                                   {ctr++;}\n                    subCount[threadId]=ctr;\n\n}\n</code></pre>\n<p>then something like subCount.Sum() gives number of solutions.(in microseconds)</p>\n<p>global work size = 8000(threads) (getting n4 into this would make it 160000  and increase performance)</p>\n<p>local work size= 160 (inefficient on my machine, making it power-of-2 is optimal)</p>\n<p>This is just a string to be sent to gpu for compiling. You just add extra loops(or just threadId relations) in the string like n8, n9 and alter &quot;if&quot; body to sum them.</p>\n<p><strong>Edit:</strong> Adding 1 extra integer to equations increased solution time to 101 milliseconds even with more optimizations(finds 4015 solutions).</p>\n<pre><code>  __kernel void solver2(__global __write_only float * subCount){\n                        int threadId=get_global_id(0);\n                        int ctr=0;\n                        int n1=threadId/160000;     int c1n1=97*n1; int c2n1=-98*n1;\n                        int n2=(threadId/8000)%20;  int c1n2=89*n2; int c2n2=- 90*n2 ;\n                        int n3=(threadId/400)%20;   int c1n3=42*n3; int c2n3=- 43*n3 ;\n                        int n4=(threadId/20)%20;    int c1n4=20*n4 ;int c2n4=- 21*n4 ;\n                        int n5=threadId%20;         int c1n5=16*n5 ;int c2n5=- 17*n5 ;\n                        int t1=c1n1+c1n2+c1n3+c1n4+c1n5;\n                        int t2=c2n1+c2n2+c2n3+c2n4+c2n5;\n                               for(int n6=0;n6&lt;=20;n6++)\n                                  for(int n7=0;n7&lt;=20;n7++)\n                                    for(int n8=0;n8&lt;=20;n8++)\n                                        if(t1+ 11*n6 + 2*n7+6*n8 &gt; 185  &amp;&amp;  t2 - 12*n6 - 3*n7-7*n8 &gt; -205)\n                                                ctr++;\n                        subCount[threadId]=ctr;\n\n                }\n</code></pre>\n<p>work group size = 256\nglobal work size = 3200000 threads</p>\n<p><strong>Edit:</strong> 9-integer version with just another for-loop found 14k solutions for c1=3 and c2=-4 in 1581 milliseconds. Changing upper bound from 20 to 19 for n6 through n9 gave same result in 1310 milliseconds.</p>\n<p><strong>Edit:</strong> Adding some from <strong>Reti43</strong>'s and <strong>Molecule</strong>'s answers, 9 integer version took <strong>14 milliseconds</strong> (but still inefficient for first 5 integers) using 3.2M threads.</p>\n<pre><code>__kernel void solver3(__global __write_only float * subCount){\n                    int threadId=get_global_id(0);\n                    int ctr=0;\n                    int n1=threadId/160000;     int c1n1=97*n1; int c2n1=-98*n1;\n                    int n2=(threadId/8000)%20;  int c1n2=89*n2; int c2n2=- 90*n2 ;\n                    int n3=(threadId/400)%20;   int c1n3=42*n3; int c2n3=- 43*n3 ;\n                    int n4=(threadId/20)%20;    int c1n4=20*n4 ;int c2n4=- 21*n4 ;\n                    int n5=threadId%20;         int c1n5=16*n5 ;int c2n5=- 17*n5 ;\n                    int t1=c1n1+c1n2+c1n3+c1n4+c1n5;\n                    int t2=c2n1+c2n2+c2n3+c2n4+c2n5;\n                    int m=max( max( max( max(n1,n2),n3),n4),n5);\n                           for(int n6=0;n6&lt;=20-m;n6++)\n                              for(int n7=0;n7&lt;=20-m-n6;n7++)\n                                for(int n8=0;n8&lt;=20-m-n6-n7;n8++)\n                                    for(int n9=0;n9&lt;=20-m-n6-n7-n8;n9++)\n                                        if(t1+ 11*n6 + 2*n7+6*n8 +3*n9&gt; 185  &amp;&amp;  t2 - 12*n6 - 3*n7-7*n8-4*n9 &gt; -205)\n                                            ctr++;\n                    subCount[threadId]=ctr;\n\n            }\n</code></pre>\n<ul>\n<li><p>10 ints: 46k solutions, 35ms  (c1=7,c2=-8)</p>\n</li>\n<li><p>11 ints: 140k solutions,103ms (c1=1,c2=-2)</p>\n</li>\n<li><p>12 ints: 383k solutions,274ms (c1=5,c2=-6)</p>\n</li>\n<li><p>probably be too slow at 15 ints because of hardware limits. Wouldnt even compile for 20 ints.</p>\n<p>note:\nm=max( max( max( max(n1,n2),n3),n4),n5) is not optimal but m=n1+n2+n3+n4+n5 is.</p>\n</li>\n</ul>\n<p>I will try Monte Carlo method to overcome hardware resource bottlenecks now. Maybe there is convergence to solution number somehow.</p>\n"}, {"tags": [], "owner": {"reputation": 2342, "user_id": 174365, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/afc5b8351b0622aab55049c7a48a6fca?s=128&d=identicon&r=PG", "display_name": "Emilio M Bumachar", "link": "https://stackoverflow.com/users/174365/emilio-m-bumachar"}, "is_accepted": false, "score": 1, "last_activity_date": 1459774404, "creation_date": 1459774404, "answer_id": 36403260, "question_id": 36321558, "link": "https://stackoverflow.com/questions/36321558/find-the-set-of-integers-for-which-two-linear-equalities-holds-true/36403260#36403260", "title": "find the set of integers for which two linear equalities holds true", "body": "<p>pseudocode:</p>\n\n<pre><code>for each inequation:\n    find all real roots of the equivalent equation, i.e. the zero-crossings\n    for each interval between two adjacent roots:\n        pick any number strictly inside the interval\n        evaluate the polynomial in that point\n            if the evaluated polimonial is positive:\n                add every integer in the interval to the list of solutions to that inequation\n                (treat the open-ended intervals outside the extreme roots as special cases, they may contain infinite solutions)\nfind the integers that are in all the lists of solutions to the individual equations\n</code></pre>\n"}], "owner": {"reputation": 13662, "user_id": 447023, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/zuvbs.jpg?s=128&g=1", "display_name": "Santosh Linkha", "link": "https://stackoverflow.com/users/447023/santosh-linkha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 1, "accepted_answer_id": 36376671, "answer_count": 6, "score": 6, "last_activity_date": 1459780073, "creation_date": 1459380529, "last_edit_date": 1492085959, "question_id": 36321558, "link": "https://stackoverflow.com/questions/36321558/find-the-set-of-integers-for-which-two-linear-equalities-holds-true", "title": "find the set of integers for which two linear equalities holds true", "body": "<p>What algorithm can I use to find the set of all positive integer values of <code>n1, n2, ... ,n7</code> for which the the following inequalities holds true.</p>\n\n<pre><code>97n1 + 89n2 + 42n3 + 20n4 + 16n5 + 11n6 + 2n7 - 185 &gt; 0\n-98n1 - 90n2 - 43n3 - 21n4 - 17n5 - 12n6 - 3n7 + 205 &gt; 0\nn1 &gt;= 0, n2 &gt;= 0, n3 &gt;=0. n4 &gt;=0, n5 &gt;=0, n6 &gt;=0, n7 &gt;= 0\n</code></pre>\n\n<p>For example one set <code>n1= 2, n2 = n3 = ... = n7 =0</code> makes the inequality true. How do I find out all other set of values? The similar question has been posted in <a href=\"https://math.stackexchange.com/questions/1723869/finding-all-lattice-point-in-bounded-region\">M.SE</a>.</p>\n\n<p><strong>ADDED::</strong> I need to generalize the solution for n variables (might be large). What procedure can I apply? For <strong>another</strong> particular case <code>n=8</code></p>\n\n<pre><code>97n1 + 89n2 + 42n3 + 20n4 + 16n5 + 11n6 + 6n7 + 2n8 - 185 &gt; 0\n-98n1 - 90n2 - 43n3 - 21n4 - 17n5 - 12n6  - 7 - 3n8 + 205 &gt; 0\nn1 &gt;= 0, n2 &gt;= 0, n3 &gt;=0. n4 &gt;=0, n5 &gt;=0, n6 &gt;=0, n7 &gt;= 0, n8 &gt;= 0\n</code></pre>\n\n<p>Python takes forever. <code>Wolfram Mathematica</code> reveals that there are <code>4015</code> solutions in less than minute.</p>\n\n<pre><code>Length[Solve[{97 n1 + 89 n2 + 42 n3 + 20 n4 + 16 n5 + 11 n6 + 6 n7 + \n     2 n8 - 185 &gt; 0, \n   -98 n1 - 90 n2 - 43 n3 - 21 n4 - 17 n5 - 12 n6 - 7 n7 - 3 n8 + \n     205 &gt; 0,\n   n1 &gt;= 0, n2 &gt;= 0, n3 &gt;= 0, n4 &gt;= 0, n5 &gt;= 0, n6 &gt;= 0, n7 &gt;= 0, \n   n8 &gt;= 0}, {n1, n2, n3, n4, n5, n6, n7, n8}, Integers]]\n</code></pre>\n"}, {"tags": ["python", "class", "constructor", "resources", "destructor"], "answers": [{"comments": [{"owner": {"reputation": 1984, "user_id": 2132312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xv2d5.png?s=128&g=1", "display_name": "Matthew D. Scholefield", "link": "https://stackoverflow.com/users/2132312/matthew-d-scholefield"}, "edited": false, "score": 0, "creation_date": 1459381315, "post_id": 36321587, "comment_id": 60266545, "body": "By the way, I&#39;ve updated the main post to reflect that the file must be removed before the code continues."}, {"owner": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "reply_to_user": {"reputation": 1984, "user_id": 2132312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xv2d5.png?s=128&g=1", "display_name": "Matthew D. Scholefield", "link": "https://stackoverflow.com/users/2132312/matthew-d-scholefield"}, "edited": false, "score": 0, "creation_date": 1459381883, "post_id": 36321587, "comment_id": 60266729, "body": "Oh I didn&#39;t realize you were using with statements, oops."}], "tags": [], "owner": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "is_accepted": false, "score": 1, "last_activity_date": 1459380682, "creation_date": 1459380682, "answer_id": 36321587, "question_id": 36321537, "link": "https://stackoverflow.com/questions/36321537/where-to-put-required-behavior-on-close-in-python/36321587#36321587", "title": "Where to put required behavior on close in Python", "body": "<p>If you just need to make sure that the file is gone when the program closes, then you should use the <a href=\"https://docs.python.org/2/library/atexit.html\" rel=\"nofollow\">atexit</a> module. In other cases, you should always use option 1 for the reasons outlined in <a href=\"http://eli.thegreenplace.net/2009/06/12/safely-using-destructors-in-python\" rel=\"nofollow\">this article.</a></p>\n"}, {"tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": false, "score": 1, "last_activity_date": 1459381468, "creation_date": 1459381468, "answer_id": 36321729, "question_id": 36321537, "link": "https://stackoverflow.com/questions/36321537/where-to-put-required-behavior-on-close-in-python/36321729#36321729", "title": "Where to put required behavior on close in Python", "body": "<p>Your class should be a <a href=\"https://docs.python.org/2/reference/datamodel.html#context-managers\" rel=\"nofollow\">context manager</a> and you should put the file deletion in the <code>__exit__</code> method. You are already using the <code>with</code> statement, it's just that the class you have defined won't work with it since it lacks the required <code>__enter__</code> and <code>__exit__</code> methods.</p>\n"}], "owner": {"reputation": 1984, "user_id": 2132312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xv2d5.png?s=128&g=1", "display_name": "Matthew D. Scholefield", "link": "https://stackoverflow.com/users/2132312/matthew-d-scholefield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1459381468, "creation_date": 1459380406, "last_edit_date": 1459381274, "question_id": 36321537, "link": "https://stackoverflow.com/questions/36321537/where-to-put-required-behavior-on-close-in-python", "title": "Where to put required behavior on close in Python", "body": "<p>I have a class that creates a temporary file on construction and should remove it once it is finished. Note that I understand creating a temporary file may not be the ideal solution to the original problem but assume that that cannot be changed. Along with that, the code will run multiple times throughout the course of the program.</p>\n\n<p>Which is the most ideal place to delete the file?</p>\n\n<p><strong>Option 1:</strong></p>\n\n<pre><code>import sys\nimport os\n\nclass Foo:\n    def __init__(self):\n        self.file = open(\"temp.txt\", 'wb')\n\n    def do_something(self):\n        # ...\n\n    def close(self):\n        self.file.close()\n        os.remove(\"temp.txt\")\nwhile True:\n    foo = Foo()\n\n    foo.do_something()\n    foo.close()\n</code></pre>\n\n<p><strong>Option 2:</strong></p>\n\n<pre><code>import sys\nimport os\n\nclass Foo:\n    def __init__(self):\n        self.file = open(\"temp.txt\", 'wb')\n\n    def do_something(self):\n        # ...\n\n    def __del__(self):\n        self.file.close()\n        os.remove(\"temp.txt\")\nwhile True:\n    with Foo() as foo:\n        foo.do_something()\n</code></pre>\n\n<p>I'm hesitant to use option 2 because I've heard it is a bad practice to put required actions in the destructor. However, option 2 seems more readable to me.</p>\n"}, {"tags": ["python", "list", "dictionary", "tuples", "equality"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459380941, "post_id": 36321506, "comment_id": 60266418, "body": "Order is irrelevant, if the dicts have the same objects they will compare equal"}], "answers": [{"comments": [{"owner": {"reputation": 2343, "user_id": 1431238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7ee9a8f8ed47c3fb5b94acf6daa13103?s=128&d=identicon&r=PG", "display_name": "nook", "link": "https://stackoverflow.com/users/1431238/nook"}, "edited": false, "score": 0, "creation_date": 1459381901, "post_id": 36321612, "comment_id": 60266742, "body": "I need to iterate through the keys of the dict because one of the values is an np array. Your answer before the edit helped me arrive at the correct answer though, if you revert it back, I will accept."}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "reply_to_user": {"reputation": 2343, "user_id": 1431238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7ee9a8f8ed47c3fb5b94acf6daa13103?s=128&d=identicon&r=PG", "display_name": "nook", "link": "https://stackoverflow.com/users/1431238/nook"}, "edited": false, "score": 0, "creation_date": 1459381987, "post_id": 36321612, "comment_id": 60266774, "body": "@nook: Okay; I rolled back."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459382482, "post_id": 36321612, "comment_id": 60266908, "body": "<code>if d2.keys() != d1.keys()</code> is sufficient, or <code>if d2.viewkeys() != d1,viewkeys()</code> for python2, no need to make sets"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459382675, "post_id": 36321612, "comment_id": 60266972, "body": "You would use viewkeys in this case as I think from the print statement, the OP is using python2, it should be  faster than comparing lists."}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459383074, "post_id": 36321612, "comment_id": 60267094, "body": "@PadraicCunningham: Okay; I have changed it to use <code>.viewkeys()</code> with a comment about <code>.keys()</code>.  Anything else?  I&#39;ll be here for a little while longer ;)"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459383396, "post_id": 36321612, "comment_id": 60267199, "body": "Well since you asked <code>all(sorted(v) == sorted(self.__dict__[key]) if isinstance(v, np.array) else self.__dict__[key] == v  for key, v in other.__dict__.iteritems())</code>  ;)"}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459383704, "post_id": 36321612, "comment_id": 60267294, "body": "@PadraicCunningham: <code>Traceback (most recent call last): BrainOverload</code>  I&#39;ll see if I can manage to make it semi-readable in an actual function.  I&#39;d make that a separate solution, though."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459383782, "post_id": 36321612, "comment_id": 60267322, "body": "@zondo, yep, hard to do in a comment though!"}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459384151, "post_id": 36321612, "comment_id": 60267434, "body": "@PadraicCunningham: Okay; I&#39;ve done my best at making it readable.  Do you think it looks all right?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459384593, "post_id": 36321612, "comment_id": 60267540, "body": "I just removed the nesting, bar that it look fine"}], "tags": [], "owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "is_accepted": true, "score": 2, "last_activity_date": 1459384569, "last_edit_date": 1459384569, "creation_date": 1459380789, "answer_id": 36321612, "question_id": 36321506, "link": "https://stackoverflow.com/questions/36321506/sort-both-elements-of-a-tuple-ignoring-case-within-a-list-so-that-the-keys-of/36321612#36321612", "title": "Sort both elements of a tuple, ignoring case, within a list, so that the keys of a dictionary line up correctly", "body": "<p><code>zip()</code> will give you the corresponding elements in each iterable that you give it.  Sorting what <code>zip()</code> returns will not help you.  You need to sort the keys before you pass them to <code>zip()</code>.  That really isn't what you want, though.  Just do this:</p>\n\n<pre><code>def __eq__(self, other):\n    if self.__dict__.viewkeys() != other_keys.__dict__.viewkeys(): # .keys() in Python 3\n        return False\n    return all(other.__dict__[key] == self.__dict__[key] for key in self.__dict__)\n</code></pre>\n\n<p>The easy way would be this:</p>\n\n<pre><code>def __eq__(self, other):\n    self.__dict__ == other.__dict__\n</code></pre>\n\n<p>but the first you can more easily change to define what counts as equivalent.</p>\n\n<p>The following (proposed by Padraic Cunningham) is closer to what you want:</p>\n\n<pre><code>def __eq__(self, other):\n    return all(\n        sorted(v) == sorted(self.__dict__[key])\n            if isinstance(v, np.array)\n        else self.__dict__[key] == v\n        for key, v in other.__dict__.iteritems()\n    )\n</code></pre>\n\n<p>That is a shortcut for this:</p>\n\n<pre><code>def __eq__(self, other):\n    for key, v in other.__dict__.iteritems(): # .items() in Python 3\n        if isinstance(v, np.array) and sorted(v) != sorted(self.__dict__[key]):\n                return False\n        elif self.__dict__[key] != v:\n            return False\n    return True\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4373, "user_id": 1810460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5daef67cac318d3e35f84bc3f315bcfc?s=128&d=identicon&r=PG", "display_name": "Hamms", "link": "https://stackoverflow.com/users/1810460/hamms"}, "is_accepted": false, "score": -1, "last_activity_date": 1459381058, "creation_date": 1459381058, "answer_id": 36321659, "question_id": 36321506, "link": "https://stackoverflow.com/questions/36321506/sort-both-elements-of-a-tuple-ignoring-case-within-a-list-so-that-the-keys-of/36321659#36321659", "title": "Sort both elements of a tuple, ignoring case, within a list, so that the keys of a dictionary line up correctly", "body": "<p>Dictionaries are inherently unordered. Coercing the keys into some ordering that fits your particular definition is certainly possible, but also entirely unnecessary. You could instead try something like this:</p>\n\n<pre><code>def __eq__(self, other):\n\n  # first, check to make sure that the two sets of keys are identical\n  if self.__dict__.keys() != other.__dict__.keys():\n    return False\n\n  # now that we know the dictionaries have identical key sets, check\n  # for equality of values.\n  for key in self.__dict__.keys():\n    if self.__dict__[key] != other.__dict__[key]:\n      return False\n\n  # if everything worked, then the dictionaries are identical!\n  return True\n</code></pre>\n"}], "owner": {"reputation": 2343, "user_id": 1431238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7ee9a8f8ed47c3fb5b94acf6daa13103?s=128&d=identicon&r=PG", "display_name": "nook", "link": "https://stackoverflow.com/users/1431238/nook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 36321612, "answer_count": 2, "score": -1, "last_activity_date": 1459384569, "creation_date": 1459380257, "question_id": 36321506, "link": "https://stackoverflow.com/questions/36321506/sort-both-elements-of-a-tuple-ignoring-case-within-a-list-so-that-the-keys-of", "title": "Sort both elements of a tuple, ignoring case, within a list, so that the keys of a dictionary line up correctly", "body": "<p>I am iterating two instances of the same class in order to check for equality. These two instances of this class are created by different means: one from a pickle, and the other from a json document. </p>\n\n<p>I am iterating through the properties of these objects, to check for equality, however, the keys in the dictionaries do not always line up, so they can not be properly compared. So I tried sorting these tuples, but I cannot get the same key from both of these objects at all times because of case sensitivity.</p>\n\n<p>One attempt gives me the left side sorted:</p>\n\n<pre><code>def __eq__(self, other):\n    for (self_key, other_key) in sorted(\n         zip(self.__dict__, other.__dict__),\n         key=lambda element: (element[0].lower(), element[1].lower())):            \n            print self_key, \" \", other_key\n      ....\n</code></pre>\n\n<p>which outputs</p>\n\n<pre><code>alpha   VAR_THRESH\nchunksize   VAR_MAXITER\ndecay   decay\n....\n</code></pre>\n\n<p>And if I explicitly make only the right side <code>lower()</code> I get the opposite: e.g.</p>\n\n<pre><code>  ....\n   key=lambda element: (element[0], element[1].lower())):\n  ....\n</code></pre>\n\n<p>The left side is not sorted by lower.</p>\n\n<pre><code>VAR_MAXITER   alpha\nVAR_THRESH   chunksize\nalpha   VAR_THRESH\nchunksize   VAR_MAXITER\ndecay   decay\n</code></pre>\n\n<p>If I leave out the <code>.lower()</code> on both of the elements, I get the second example.</p>\n\n<p>How can I ensure that the correct keys always line up? Or in other words, how can I sort by both values in the tuples, ignoring case, so that they always line up?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 7368, "user_id": 3479456, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zuJYi.png?s=128&g=1", "display_name": "pushkin", "link": "https://stackoverflow.com/users/3479456/pushkin"}, "edited": false, "score": 0, "creation_date": 1459380358, "post_id": 36321497, "comment_id": 60266226, "body": "Just to make sure - you want the constraint applied to each item?"}, {"owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "reply_to_user": {"reputation": 7368, "user_id": 3479456, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zuJYi.png?s=128&g=1", "display_name": "pushkin", "link": "https://stackoverflow.com/users/3479456/pushkin"}, "edited": false, "score": 0, "creation_date": 1459380388, "post_id": 36321497, "comment_id": 60266237, "body": "Nope, the entire length of the list (in my actual problem it is not to exceed 10KB)."}, {"owner": {"reputation": 7368, "user_id": 3479456, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zuJYi.png?s=128&g=1", "display_name": "pushkin", "link": "https://stackoverflow.com/users/3479456/pushkin"}, "edited": false, "score": 0, "creation_date": 1459380570, "post_id": 36321497, "comment_id": 60266299, "body": "So you want to effectively concatenate all the list items, splice the string (<code>[:MAX_LENGTH]</code>), and turn it into a list (making sure to separate the elements properly)?"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1459380653, "post_id": 36321497, "comment_id": 60266328, "body": "I would caution against this. There has to be safer things to do than this. At the very least you should never be splitting elements in half."}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 2, "creation_date": 1459380748, "post_id": 36321497, "comment_id": 60266353, "body": "Could you please clarify your example: do you want MAX_LENGTH of the string representation of your list of MAX_LENGTH of the all the strings concatenated? May be the better is to explain what you are trying to achieve."}], "answers": [{"comments": [{"owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "edited": false, "score": 0, "creation_date": 1459458882, "post_id": 36321635, "comment_id": 60309568, "body": "thanks for this answer. Though it seems I needed to do <code>sys.getsizeof(str(data))</code> for it to accurately return the size."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "edited": false, "score": 0, "creation_date": 1459458951, "post_id": 36321635, "comment_id": 60309596, "body": "@David542 that&#39;s probably true if you&#39;re sending it over the wire as a string. You definitely should check the size of your payload, not its underlying data!! Glad I could help"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "edited": false, "score": 1, "creation_date": 1459477037, "post_id": 36321635, "comment_id": 60315206, "body": "@David542: <code>sys.getsizeof</code> reports interpreter details of size (including stuff like the overhead involved in the common <code>PyObject</code> header and stuff, the internal fixed width encoding of the <code>str</code>, etc.), not how much space it would actually take up in a file or on the wire. If you want wire size, you&#39;d want to encode (to UTF-8 or whatever character encoding the protocol uses), and check the <code>len</code> of the resulting <code>bytes</code> object which is how many real bytes would be sent, <code>sys.getsizeof</code> really only tells you (sort of) how much memory it occupies in the Python interpreter."}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 2, "last_activity_date": 1459381823, "last_edit_date": 1459381823, "creation_date": 1459380929, "answer_id": 36321635, "question_id": 36321497, "link": "https://stackoverflow.com/questions/36321497/slice-a-list-to-max-string-size/36321635#36321635", "title": "Slice a list to max string size", "body": "<p>I would caution against this. There has to be safer things to do than this. At the very least you should never be splitting elements in half. For instance:</p>\n\n<pre><code>import sys\n\noverrun = []\n\ndata = [\"Hello,\"] + ( [\"buffer\"] * 80 )\nmaxsize = 800\n\n# sys.getsizeof(data) is now 840 in my implementation.\n\nwhile True:\n    while sys.getsizeof(data) &gt; maxsize:\n        overrun.append(data.pop())\n    do_something_with(data)\n    if overrun:\n        data, overrun = overrun, []\n    else:\n        break\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 559, "user_id": 4051719, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c7d519c01c99245af6e1235c30e418b7?s=128&d=identicon&r=PG&f=1", "display_name": "P...", "link": "https://stackoverflow.com/users/4051719/p"}, "is_accepted": false, "score": 0, "last_activity_date": 1459381041, "creation_date": 1459381041, "answer_id": 36321655, "question_id": 36321497, "link": "https://stackoverflow.com/questions/36321497/slice-a-list-to-max-string-size/36321655#36321655", "title": "Slice a list to max string size", "body": "<p>If you want <code>MAX_LENGTH</code> of your strings concatenated, you could do it with a loop pretty simply, using something like this:</p>\n\n<pre><code> def truncateStringList(myArray)\n\n    currentLength = 0\n    result = []\n\n    for string in myArray:\n        if (currentLength + len(string)) &gt; MAX_LENGTH:\n            result.append(string[:len(string) + currentLength - MAX_LENGTH])\n            return result\n        else:\n            result.append(string)\n    return result\n</code></pre>\n\n<p>If you want it of the string representation, you are effectively adding 2 chars at the beginning of each element, <code>['</code> or <code>'</code>, and two at the end, <code>',</code> or <code>']</code>, so add 2 to current length before and after each element in the loop:</p>\n\n<pre><code>    for string in myArray:\n        currentLength += 2\n        if (currentLength + len(string)) &gt; MAX_LENGTH:\n            result.append(string[:len(string) + currentLength - MAX_LENGTH])\n            return result\n        else:\n            result.append(string)\n        currentLength += 2\n    return result\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 512, "user_id": 4941927, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-DuE3ITipXDQ/AAAAAAAAAAI/AAAAAAAAADE/0N-SjjYYn2E/photo.jpg?sz=128", "display_name": "Milor123", "link": "https://stackoverflow.com/users/4941927/milor123"}, "is_accepted": false, "score": 0, "last_activity_date": 1459385573, "creation_date": 1459385573, "answer_id": 36322360, "question_id": 36321497, "link": "https://stackoverflow.com/questions/36321497/slice-a-list-to-max-string-size/36322360#36322360", "title": "Slice a list to max string size", "body": "<p>with loops:</p>\n\n<pre><code>max = 11\nmylist = ['awdawdwad', 'uppps']\nnewlist = ','.join(mylist)\nprint mylist\nc= [x for x in newlist if not x==',']\nif len(c)&gt;max:\n    newlist= list(newlist)\n    newlist.reverse()\n    for x in range(len(c)-max):\n        if newlist[0]==',':\n            del newlist[0]\n            del newlist[0] # delete two times\n        else:\n            del newlist[0]\n        while newlist[0]==',':\n            del newlist[0]\nnewlist.reverse()\ncappedlist =  ''.join(newlist).split(',')\nprint cappedlist\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1459459019, "post_id": 36340844, "comment_id": 60309633, "body": "As long as you&#39;re aware that you&#39;re losing data here. I&#39;m not sure what you&#39;re doing with this, but it seems surprising that if I want to send a too-long list, it only sends the first <code>N</code> elements and ignores the rest!"}, {"owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 1, "creation_date": 1459470933, "post_id": 36340844, "comment_id": 60313659, "body": "@AdamSmith right, your answer is more complete and accounts for the overflow, etc. The above was a quick way for me to get it functionally working in the script."}], "tags": [], "owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "is_accepted": false, "score": 1, "last_activity_date": 1459472381, "last_edit_date": 1459472381, "creation_date": 1459448407, "answer_id": 36340844, "question_id": 36321497, "link": "https://stackoverflow.com/questions/36321497/slice-a-list-to-max-string-size/36340844#36340844", "title": "Slice a list to max string size", "body": "<p>Here is a simplified version of @AdamSmith's answer which I ended up using:</p>\n\n<pre><code>import sys\nfrom copy import copy\n\ndef limit_list_size(ls, maxsize=800):\n    data = copy(ls)\n    while (sys.getsizeof(str(data)) &gt; maxsize):\n        if not data: break\n        data.pop()\n    return data\n</code></pre>\n\n<p>Note that this will not split mid-word. And because this is returning a copy of the data, the user can see which items were excluded in the output. For example:</p>\n\n<pre><code>old_ls = [...]\nnew_ls = limit_list_size(old_ls)\noverflow_ls = list(set(old_ls) - set(new_ls))\n</code></pre>\n"}], "owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 36321635, "answer_count": 4, "score": 2, "last_activity_date": 1459472381, "creation_date": 1459380229, "last_edit_date": 1459380370, "question_id": 36321497, "link": "https://stackoverflow.com/questions/36321497/slice-a-list-to-max-string-size", "title": "Slice a list to max string size", "body": "<p>I have a max length of a list item that I need to enforce. How would I accomplish the following:</p>\n\n<pre><code>MAX_LENGTH = 13\n&gt;&gt;&gt; str([\"hello\",\"david\"])[:MAX_LENGTH]\n\"['hello', 'da\"\n\n==&gt; [\"hello\", \"da\"]\n</code></pre>\n\n<p>I was thinking using <code>ast.literal_eval</code>, but was wondering what might be recommended here.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1459380298, "post_id": 36321478, "comment_id": 60266199, "body": "I&#39;m sure it depends on your hardware. If you&#39;re running Python on a jerry-rigged whose internal clock only runs at 1Hz, Any interval smaller than <code>1</code> obviously won&#39;t work :)"}], "answers": [{"tags": [], "owner": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "is_accepted": false, "score": 0, "last_activity_date": 1459380411, "last_edit_date": 1495541272, "creation_date": 1459380411, "answer_id": 36321538, "question_id": 36321478, "link": "https://stackoverflow.com/questions/36321478/what-is-the-smallest-interval-one-can-reliably-use-with-pythons-threading-timer/36321538#36321538", "title": "What is the smallest interval one can reliably use with Python&#39;s threading.Timer?", "body": "<p>It is completely dependent on the OS and python implementation. Generally, you shouldn't expect timer to be high precision. <a href=\"https://stackoverflow.com/questions/1133857/how-accurate-is-pythons-time-sleep\">Windows has around a 10-13 ms sleep resolution</a> and I expect it to be a similar case for threading.Timer().</p>\n"}], "owner": {"reputation": 4071, "user_id": 2354735, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Q33GM.jpg?s=128&g=1", "display_name": "Jet Blue", "link": "https://stackoverflow.com/users/2354735/jet-blue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459380411, "creation_date": 1459380103, "question_id": 36321478, "link": "https://stackoverflow.com/questions/36321478/what-is-the-smallest-interval-one-can-reliably-use-with-pythons-threading-timer", "title": "What is the smallest interval one can reliably use with Python&#39;s threading.Timer?", "body": "<p>Sample code</p>\n\n<pre><code>interval = 1e-6\nthreading.Timer( interval, func ).start()\n</code></pre>\n\n<p>What is the smallest interval one can use <strong>reliably</strong>? Experimentation got me 1e-6, but wondering if there is a precise value.</p>\n"}, {"tags": ["python", "pandas", "statsmodels"], "answers": [{"comments": [{"owner": {"reputation": 2849, "user_id": 4589550, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a46c412f2c2942a3a8210b0e8091cc1a?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Potter", "link": "https://stackoverflow.com/users/4589550/stefano-potter"}, "edited": false, "score": 0, "creation_date": 1459383674, "post_id": 36321975, "comment_id": 60267286, "body": "that returns: <code>FID_ 3       \\n-------------------------Summary of Regressi... 4       \\n-------------------------Summary of Regressi... 5       \\n-------------------------Summary of Regressi... 6       \\n-------------------------Summary of Regressi... 7       \\n-------------------------Summary of Regressi...</code>  so basically it returns <code>\\n</code> for each item in the groupby.  Or possibly I just can&#39;t print out each item and view them within my python environment"}, {"owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "reply_to_user": {"reputation": 2849, "user_id": 4589550, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a46c412f2c2942a3a8210b0e8091cc1a?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Potter", "link": "https://stackoverflow.com/users/4589550/stefano-potter"}, "edited": false, "score": 0, "creation_date": 1459383781, "post_id": 36321975, "comment_id": 60267321, "body": "Might want to iterate over the <code>groupby</code> objects."}], "tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1459383837, "last_edit_date": 1459383837, "creation_date": 1459382879, "answer_id": 36321975, "question_id": 36321455, "link": "https://stackoverflow.com/questions/36321455/ols-regression-with-groupby/36321975#36321975", "title": "OLS Regression with groupby", "body": "<p>Try:</p>\n\n<pre><code>grps=df.groupby(['FID'])\nfor fid, grp in grps:\n    ols(y=grp.loc[:, 'MEAN'], x=grp.loc[:, ['Accum_Prcp', 'Accum_HDD']])\n</code></pre>\n"}], "owner": {"reputation": 2849, "user_id": 4589550, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a46c412f2c2942a3a8210b0e8091cc1a?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Potter", "link": "https://stackoverflow.com/users/4589550/stefano-potter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 1, "accepted_answer_id": 36321975, "answer_count": 1, "score": 2, "last_activity_date": 1463623914, "creation_date": 1459379984, "last_edit_date": 1463623914, "question_id": 36321455, "link": "https://stackoverflow.com/questions/36321455/ols-regression-with-groupby", "title": "OLS Regression with groupby", "body": "<p>I want to run an OLS regression using pandas and a groupby.</p>\n\n<p>I am trying the following code:</p>\n\n<pre><code>import pandas as pd\nfrom pandas.stats.api import ols\n\ndf=pd.read_csv(r'F:\\File.csv')\nresult=df.groupby(['FID']).apply(lambda x: ols(y=df[x['MEAN']], x=df[x['Accum_Prcp'],x['Accum_HDD']]))\nprint result\n</code></pre>\n\n<p>but this returns:</p>\n\n<pre><code>File \"C:\\Users\\spotter\\AppData\\Local\\Continuum\\Anaconda2\\lib\\site-packages\\pandas\\core\\indexing.py\", line 1150, in _convert_to_indexer\n    raise KeyError('%s not in index' % objarr[mask])\n\n    KeyError: '[ 0.84978328  0.72115778  0.53965104  0.52955655  0.73372541  0.64617074\\n  0.60040938  0.7147218   0.65533535  0.57980322  0.57382068  0.56543435\\n  0.70740831  0.9245337   0.54859569  0.6789395   0.7086157   0.3835853\\n  0.54924104  0.80813778  0.83758118  0.22673391  0.26594087  0.63650468\\n  0.89889911  0.38324657  0.30235986  0.62922678  0.55219822  0.55950705\\n  0.71137557  0.53631811  0.70158798  0.87116361  0.93751381  0.91125518\\n  0.80020908  0.75301262  0.82391046  0.77483673  0.63069573  0.44954455\\n  0.83578862  0.56338649  0.64236039  0.93270243  0.93077291  0.83847668\\n  0.8268959   0.85400317  0.74319769  0.94803537  0.97484929  0.45366017\\n  0.80823694  0.82028051  0.63960395  0.63015722  0.73132888  0.55570184\\n  0.83265402  0.75009687  0.58207032  0.92064804  0.91058008  0.86726397\\n  0.89204098  0.95573514  0.75704367  0.80786363  0.87448548  0.7553715\\n  0.88965962  0.82828493  0.82423891  0.81034742  0.90104876  0.78875473\\n  0.97369268] not in index'\n</code></pre>\n\n<p>is there something with my syntax that is incorrect?</p>\n\n<p>to do this without a groupby would be something like this:</p>\n\n<pre><code>result = ols(y=df['MEAN'], x=df[['Accum_HDD','Accum_Prcp']])\n</code></pre>\n\n<p>and that works correctly.</p>\n\n<p>My dataframe looks like something like this:</p>\n\n<pre><code>FID  Image_Date   MEAN  Accum_Prcp   Accum_HDD\n1     19920506     2.0   500.0        1000.0\n1     19930506     1.7   450.0        1050.0\n2     19920506     2.7   456.0        992.0\n2     19930506     1.9   376.0        800.0 \n</code></pre>\n"}, {"tags": ["python", "neural-network", "theano", "deep-learning", "conv-neural-network"], "answers": [{"comments": [{"owner": {"reputation": 2145, "user_id": 5257450, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/eccdf31878110f7e03a2bd4fd359550e?s=128&d=identicon&r=PG&f=1", "display_name": "xxx222", "link": "https://stackoverflow.com/users/5257450/xxx222"}, "edited": false, "score": 0, "creation_date": 1459398510, "post_id": 36323861, "comment_id": 60271132, "body": "Thank you! That is very interesting."}], "tags": [], "owner": {"reputation": 11286, "user_id": 3928385, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3HdfL.png?s=128&g=1", "display_name": "Ishamael", "link": "https://stackoverflow.com/users/3928385/ishamael"}, "is_accepted": true, "score": 4, "last_activity_date": 1459396605, "creation_date": 1459396605, "answer_id": 36323861, "question_id": 36321400, "link": "https://stackoverflow.com/questions/36321400/strange-typeerror-with-theano/36323861#36323861", "title": "Strange TypeError with Theano", "body": "<p>The problem lies in <code>loadmat</code> from <code>scipy</code>. The typeerror you are getting is thrown by this code in Theano:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>if not data.flags.aligned:\n    ...\n    raise TypeError(...)\n</code></pre>\n\n<p>Now, when you create a new array in numpy from raw data, it would usually be aligned:</p>\n\n<pre><code>&gt;&gt;&gt; a = np.array(2)\n&gt;&gt;&gt; a.flags.aligned\nTrue\n</code></pre>\n\n<p>But if you <code>savemat</code> / <code>loadmat</code> it, the value of the flag gets lost:</p>\n\n<pre><code>&gt;&gt;&gt; savemat('test', {'a':a})\n&gt;&gt;&gt; a2 = loadmat('test')['a']\n&gt;&gt;&gt; a2.flags.aligned\nFalse\n</code></pre>\n\n<p>(seems like this particular issue is discussed <a href=\"https://mail.scipy.org/pipermail/scipy-user/2009-December/023646.html\" rel=\"nofollow\">here</a>)</p>\n\n<p>One quick and dirty way to address it is to create a new numpy array from the array you loaded:</p>\n\n<pre><code>&gt;&gt;&gt; a2 = loadmat('test')['a']\n&gt;&gt;&gt; a3 = np.array(a2)\n&gt;&gt;&gt; a3.flags.aligned\nTrue\n</code></pre>\n\n<p>So, for your code:</p>\n\n<pre><code>dataReadyForCNN = np.array(sio.loadmat(\"DataReadyForCNN.mat\"))\n</code></pre>\n"}], "owner": {"reputation": 2145, "user_id": 5257450, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/eccdf31878110f7e03a2bd4fd359550e?s=128&d=identicon&r=PG&f=1", "display_name": "xxx222", "link": "https://stackoverflow.com/users/5257450/xxx222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 36323861, "answer_count": 1, "score": 2, "last_activity_date": 1459396605, "creation_date": 1459379712, "question_id": 36321400, "link": "https://stackoverflow.com/questions/36321400/strange-typeerror-with-theano", "title": "Strange TypeError with Theano", "body": "<pre><code>Traceback (most recent call last):\n      File \"test.py\", line 37, in &lt;module&gt;\n        print convLayer1.output.shape.eval({x:xTrain})\n      File \"/Volumes/TONY/anaconda/lib/python2.7/site-packages/theano/gof/graph.py\", line 415, in eval\n        rval = self._fn_cache[inputs](*args)\n      File \"/Volumes/TONY/anaconda/lib/python2.7/site-packages/theano/compile/function_module.py\", line 513, in __call__\n        allow_downcast=s.allow_downcast)\n      File \"/Volumes/TONY/anaconda/lib/python2.7/site-packages/theano/tensor/type.py\", line 180, in filter\n        \"object dtype\", data.dtype)\n    TypeError\n</code></pre>\n\n<p>And here is my code:</p>\n\n<pre><code>import scipy.io as sio\nimport numpy as np\nimport theano.tensor as T\nfrom theano import shared\n\nfrom convnet3d import ConvLayer, NormLayer, PoolLayer, RectLayer\nfrom mlp import LogRegr, HiddenLayer, DropoutLayer\nfrom activations import relu, tanh, sigmoid, softplus\n\ndataReadyForCNN = sio.loadmat(\"DataReadyForCNN.mat\")\n\nxTrain = dataReadyForCNN[\"xTrain\"]\n# xTrain = np.random.rand(10, 1, 5, 6, 2).astype('float64')\nxTrain.shape\n\ndtensor5 = T.TensorType('float64', (False,)*5)\nx = dtensor5('x') # the input data\n\nyCond = T.ivector()\n\n# input = (nImages, nChannel(nFeatureMaps), nDim1, nDim2, nDim3)\n\nkernel_shape = (5,6,2)\nfMRI_shape = (51, 61, 23)\nn_in_maps = 1 # channel\nn_out_maps = 5 # num of feature maps, aka the depth of the neurons\nnum_pic = 2592\n\nlayer1_input = x\n\n# layer1_input.eval({x:xTrain}).shape\n# layer1_input.shape.eval({x:numpy.zeros((2592, 1, 51, 61, 23))})\n\nconvLayer1 = ConvLayer(layer1_input, n_in_maps, n_out_maps, kernel_shape, fMRI_shape, \n                       num_pic, tanh)\n\nprint convLayer1.output.shape.eval({x:xTrain})\n</code></pre>\n\n<p>It is really weird as the error was not thrown in Jupyter (but it takes long long time to run and finally the kernel is down I really don't know why), but as I move it to the shell and run <code>python fileName.py</code> the error was thrown.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 2, "creation_date": 1459379424, "post_id": 36321352, "comment_id": 60265913, "body": "It means at least one element is a list inside your list i.e <code>[[&quot;foo&quot;]]</code>, if you want to also join what is inside the lists,you want something like  <code>landscape2 = &#39;&#39;.join(map(&quot;&quot;.join,landscape))</code>. If you posted your code and the error it would be a lot  easier to diagnose"}, {"owner": {"reputation": 3966, "user_id": 469072, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/13ce453eb105a974aea64b2461cfc200?s=128&d=identicon&r=PG", "display_name": "joel goldstick", "link": "https://stackoverflow.com/users/469072/joel-goldstick"}, "edited": false, "score": 1, "creation_date": 1459379558, "post_id": 36321352, "comment_id": 60265955, "body": "Show what landscape is"}, {"owner": {"reputation": 43, "user_id": 6135739, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kRDuCjuqAmA/AAAAAAAAAAI/AAAAAAAAABE/biGL_oqxVPo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/6135739/kyle"}, "edited": false, "score": 0, "creation_date": 1459379717, "post_id": 36321352, "comment_id": 60266010, "body": "landscape = [[&#39;-,-,-,-,-,-,-,-,-,-,-,-,-,-,X&#39;] ,[&#39;-,-,-,-,-,-,-,-,-,-,-,-,-,-,-&#39;] ,[&#39;-,-,-,-,-,-,-,-,-,-,-,-,-,-,-&#39;] ,[&#39;-,-,-,-,-,-,-,-,-,-,-,-,-,-,-&#39;] ,[&#39;-,-,-,-,-,-,-,-,-,-,-,-,-,-,-&#39;] ,[&#39;-,-,-,-,-,-,-,-,-,-,-,-,-,-,-&#39;] ,[&#39;-,-,-,-,-,-,-,-,-,-,-,-,-,-,-&#39;] ,[&#39;-,-,-,-,-,-,-,-,-,-,-,-,-,-,-&#39;] ,[&#39;-,-,-,-,-,-,-,-,-,-,-,-,-,-,-&#39;] ,[&#39;-,-,-,-,-,-,-,-,-,-,-,-,-,-,-&#39;] ,[&#39;-,-,-,-,-,-,-,-,-,-,-,-,-,-,-&#39;] ,[&#39;-,-,-,-,-,-,-,-,-,-,-,-,-,-,-&#39;] ,[&#39;-,-,-,-,-,-,-,-,-,-,-,-,-,-,-&#39;] ,[&#39;-,-,-,-,-,-,-,-,-,-,-,-,-,-,-&#39;] ,[&#39;O,-,-,-,-,-,-,-,-,-,-,-,-,-,-&#39;]]"}, {"owner": {"reputation": 43, "user_id": 6135739, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kRDuCjuqAmA/AAAAAAAAAAI/AAAAAAAAABE/biGL_oqxVPo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/6135739/kyle"}, "edited": false, "score": 0, "creation_date": 1459379767, "post_id": 36321352, "comment_id": 60266021, "body": "TypeError: list indices must be integers, not str"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1459379809, "post_id": 36321352, "comment_id": 60266037, "body": "Yep, you want what I suggested above, if you want each on a newline use <code>&quot;\\n&quot;</code> for the outer join, if you want one long line leave it as is"}], "answers": [{"comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1459379922, "post_id": 36321413, "comment_id": 60266072, "body": "you can remove the list comprehension, it will just use generator comprehension instead"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 2, "creation_date": 1459380021, "post_id": 36321413, "comment_id": 60266098, "body": "@TadhgMcDonald-Jensen, that is less efficient than using a  list"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 1, "creation_date": 1459380023, "post_id": 36321413, "comment_id": 60266100, "body": "@TadhgMcDonald-Jensen see the accepted answer to <a href=\"http://stackoverflow.com/questions/245792/when-is-not-a-good-time-to-use-python-generators\">this question</a>. It&#39;s over a year old, but I haven&#39;t seen any evidence that it&#39;s changed (admittedly I haven&#39;t profiled it in <i>forever</i>)"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1459380059, "post_id": 36321413, "comment_id": 60266113, "body": "@TadhgMcDonald-Jensen essentially, <code>str.join</code> likes lists, since it has two make two passes anyway."}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 0, "last_activity_date": 1459379772, "creation_date": 1459379772, "answer_id": 36321413, "question_id": 36321352, "link": "https://stackoverflow.com/questions/36321352/join-error-not-sure-why/36321413#36321413", "title": ".join() error; Not sure why", "body": "<p>The error you described means it's trying to join two lists together. That's not possible.</p>\n\n<p>Based on your comment, it sounds like what you ACTUALLY want to do is:</p>\n\n<pre><code>\"\\n\".join([\"\".join(sublst) for sublst in landscape])\n</code></pre>\n\n<p>This will create a new list of strings, then join those strings with newlines, essentially creating a 2D rectangle of characters.</p>\n"}], "owner": {"reputation": 43, "user_id": 6135739, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kRDuCjuqAmA/AAAAAAAAAAI/AAAAAAAAABE/biGL_oqxVPo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/6135739/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 36321413, "answer_count": 1, "score": 0, "last_activity_date": 1459379772, "creation_date": 1459379356, "question_id": 36321352, "link": "https://stackoverflow.com/questions/36321352/join-error-not-sure-why", "title": ".join() error; Not sure why", "body": "<p>Since I don't want an array's indices to be separated by a comma, I wrote this code:</p>\n\n<pre><code>landscape2 = ''.join(landscape)\n</code></pre>\n\n<p>However, I got an error message saying \"landscape2 = ''.join(landscape)\nTypeError: sequence item 0: expected str instance, list found\"\nI don't know what this means, and I wondered if you could help.</p>\n"}, {"tags": ["javascript", "python", "undefined"], "comments": [{"owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 0, "creation_date": 1459379802, "post_id": 36321344, "comment_id": 60266033, "body": "The answers tell you how to have a parameter with a default value, but maybe you want this: <a href=\"http://stackoverflow.com/questions/23086383/how-to-test-nonetype-in-python\" title=\"how to test nonetype in python\">stackoverflow.com/questions/23086383/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 279, "user_id": 2980929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/77b54e287febdb5b1f1dff41c7545738?s=128&d=identicon&r=PG&f=1", "display_name": "ruthless", "link": "https://stackoverflow.com/users/2980929/ruthless"}, "is_accepted": false, "score": 3, "last_activity_date": 1459379430, "creation_date": 1459379430, "answer_id": 36321362, "question_id": 36321344, "link": "https://stackoverflow.com/questions/36321344/how-to-set-default-value-for-variable/36321362#36321362", "title": "How to set default value for variable?", "body": "<pre><code>def test(string=\"defaultValue\"):\n    print(string)\n\ntest()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6585, "user_id": 225650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0dcab3d97b912e4ae717e0071a2d2ab7?s=128&d=identicon&r=PG", "display_name": "Dominic K", "link": "https://stackoverflow.com/users/225650/dominic-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1459379453, "creation_date": 1459379453, "answer_id": 36321368, "question_id": 36321344, "link": "https://stackoverflow.com/questions/36321344/how-to-set-default-value-for-variable/36321368#36321368", "title": "How to set default value for variable?", "body": "<p>You can use default values:</p>\n\n<pre><code>def test(string=\"defaultValue\")\n    pass\n</code></pre>\n\n<p>See <a href=\"https://docs.python.org/2/tutorial/controlflow.html#default-argument-values\" rel=\"nofollow\">https://docs.python.org/2/tutorial/controlflow.html#default-argument-values</a></p>\n"}, {"tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": true, "score": 12, "last_activity_date": 1459380280, "creation_date": 1459380280, "answer_id": 36321512, "question_id": 36321344, "link": "https://stackoverflow.com/questions/36321344/how-to-set-default-value-for-variable/36321512#36321512", "title": "How to set default value for variable?", "body": "<p>In the exact scenario you present, you can use default values for arguments, as other answers show.</p>\n\n<p>Generically, you can use the <code>or</code> keyword in Python pretty similarly to the way you use <code>||</code> in JavaScript; if someone passes a falsey value (such as a null string or <code>None</code>) you can replace it with a default value like this:</p>\n\n<pre><code>string = string or \"defaultValue\"\n</code></pre>\n\n<p>This can be useful when your value comes from a file or user input:</p>\n\n<pre><code>string = raw_input(\"Proceed? [Yn] \")[:1].upper() or \"Y\"\n</code></pre>\n\n<p>Or when you want to use an empty container for a default value, which is problematic in regular Python (see <a href=\"https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument\">this SO question</a>):</p>\n\n<pre><code>def calc(startval, sequence=None):\n     sequence = sequence or []\n</code></pre>\n"}], "owner": {"reputation": 210, "user_id": 3619165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1a2a1cef3ce27e251fc676799ca55c23?s=128&d=identicon&r=PG&f=1", "display_name": "user3619165", "link": "https://stackoverflow.com/users/3619165/user3619165"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10029, "favorite_count": 0, "accepted_answer_id": 36321512, "answer_count": 3, "score": 8, "last_activity_date": 1459380280, "creation_date": 1459379312, "last_edit_date": 1459379439, "question_id": 36321344, "link": "https://stackoverflow.com/questions/36321344/how-to-set-default-value-for-variable", "title": "How to set default value for variable?", "body": "<p>Imagine I have the following code in javascript</p>\n\n<pre><code>function test(string) {\n    var string = string || 'defaultValue'\n}\n</code></pre>\n\n<p>What is the python way of initiating a variable that may be undefined? </p>\n"}, {"tags": ["python", "ubuntu", "cron", "crontab"], "comments": [{"owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 0, "creation_date": 1459381875, "post_id": 36321313, "comment_id": 60266726, "body": "This may help: <a href=\"http://stackoverflow.com/questions/22743548/cronjob-not-running\">stackoverflow.com/questions/22743548/cronjob-not-running</a>"}, {"owner": {"reputation": 69, "user_id": 3534031, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000445633342/picture?type=large", "display_name": "patrickstarpants", "link": "https://stackoverflow.com/users/3534031/patrickstarpants"}, "reply_to_user": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 0, "creation_date": 1459382579, "post_id": 36321313, "comment_id": 60266941, "body": "My crontab is running for sure, but for some reason the command in question will not work.  typing just <code>* * * * * export DISPLAY=:0; &#47;usr&#47;bin&#47;notify-send blah</code> does not display anything"}, {"owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 0, "creation_date": 1459382735, "post_id": 36321313, "comment_id": 60266992, "body": "<a href=\"http://unix.stackexchange.com/questions/111188/using-notify-send-with-cron\" title=\"using notify send with cron\">unix.stackexchange.com/questions/111188/&hellip;</a>"}, {"owner": {"reputation": 69, "user_id": 3534031, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000445633342/picture?type=large", "display_name": "patrickstarpants", "link": "https://stackoverflow.com/users/3534031/patrickstarpants"}, "reply_to_user": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 0, "creation_date": 1459384001, "post_id": 36321313, "comment_id": 60267382, "body": "Im having difficulty understand the solution in the code above. I&#39;m supposed to add a DBUS_SESSION_BUS_ADDRESS to my main code? And what would the address be?"}, {"owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 0, "creation_date": 1459413666, "post_id": 36321313, "comment_id": 60278860, "body": "To begin with, my suggestion would be to run <code>env|grep DBUS</code> and hardcode it in the crontab, just like <code>$PATH</code> in Will&#39;s answer. That will tell you if it solves the problem. If it does, there are a couple of suggestions on how to do it, in that answer I linked to. It would be easier if it were a bash script, you&#39;ll have to figure out the best way to do it, either from Python or by dumping the environment variable somewhere and using it from the crontab."}], "answers": [{"comments": [{"owner": {"reputation": 16376, "user_id": 2009616, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oiCJA.jpg?s=128&g=1", "display_name": "isedev", "link": "https://stackoverflow.com/users/2009616/isedev"}, "edited": false, "score": 0, "creation_date": 1459379687, "post_id": 36321390, "comment_id": 60265999, "body": "Wouldn&#39;t it be better to specify the absolute command path in the script? Setting the crontab PATH could have side-effects."}, {"owner": {"reputation": 21338, "user_id": 145279, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/r9KgA.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/145279/will"}, "reply_to_user": {"reputation": 16376, "user_id": 2009616, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oiCJA.jpg?s=128&g=1", "display_name": "isedev", "link": "https://stackoverflow.com/users/2009616/isedev"}, "edited": false, "score": 0, "creation_date": 1459379874, "post_id": 36321390, "comment_id": 60266061, "body": "I&#39;d say no--then the script is less portable as it depends on libnotify&#39;s tools being installed in the specified location. I added to my answer and put a safer way to modify <code>$PATH</code>, as well as changing the Python script to use the absolute path to the command."}, {"owner": {"reputation": 69, "user_id": 3534031, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000445633342/picture?type=large", "display_name": "patrickstarpants", "link": "https://stackoverflow.com/users/3534031/patrickstarpants"}, "edited": false, "score": 0, "creation_date": 1459380884, "post_id": 36321390, "comment_id": 60266397, "body": "Both methods didn&#39;t work, <code>cat &#47;var&#47;log&#47;syslog | grep crontab</code> returns (among edits and such) the following line: <code>Mar 30 19:31:01 polo cron[634]: (polo) RELOAD (crontabs&#47;polo) </code>"}, {"owner": {"reputation": 21338, "user_id": 145279, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/r9KgA.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/145279/will"}, "edited": false, "score": 0, "creation_date": 1459381130, "post_id": 36321390, "comment_id": 60266487, "body": "Let&#39;s try writing our standard error output to a file and looking at it. Add <code>&gt;&#47;tmp&#47;cron-error.log 2&gt;&amp;1</code> to the end of your crontab line, then look at <code>&#47;tmp&#47;cron-error.log</code> and see what it says."}, {"owner": {"reputation": 69, "user_id": 3534031, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000445633342/picture?type=large", "display_name": "patrickstarpants", "link": "https://stackoverflow.com/users/3534031/patrickstarpants"}, "edited": false, "score": 0, "creation_date": 1459381311, "post_id": 36321390, "comment_id": 60266544, "body": "I tried this before yet no log appeared after waiting several minutes (the crontab is set to run every minute right now)"}, {"owner": {"reputation": 21338, "user_id": 145279, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/r9KgA.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/145279/will"}, "edited": false, "score": 0, "creation_date": 1459383255, "post_id": 36321390, "comment_id": 60267158, "body": "Ahh, I wasn&#39;t very familiar with <code>notify-send</code>, but I think it needs a <code>$DISPLAY</code>. What about changing the command called by <code>cron</code> to: <code>sh -c &#39;DISPLAY=:0 &#47;usr&#47;bin&#47;python &#47;home&#47;polo&#47;git-repositories&#47;takebreak&#47;takebreak.py&#39;</code>"}, {"owner": {"reputation": 69, "user_id": 3534031, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000445633342/picture?type=large", "display_name": "patrickstarpants", "link": "https://stackoverflow.com/users/3534031/patrickstarpants"}, "edited": false, "score": 0, "creation_date": 1459383730, "post_id": 36321390, "comment_id": 60267308, "body": "Yeah in a comment on the original question I indicated that I was using DISPLAY, I tried adding your code so the final product is <code>* * * * * sh -c &#39;DISPLAY=:0 &#47;usr&#47;bin&#47;python &#47;home&#47;polo&#47;git-repositories&#47;takebreak&#47;takebreak.py&#39;</code>"}, {"owner": {"reputation": 21338, "user_id": 145279, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/r9KgA.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/145279/will"}, "edited": false, "score": 0, "creation_date": 1459384714, "post_id": 36321390, "comment_id": 60267568, "body": "This is stumping me as well, haha. Let&#39;s rule out Python-related problems just for sanity. Let&#39;s try <code>* * * * * &#47;bin&#47;bash -c &#39;DISPLAY=:0 &#47;usr&#47;bin&#47;notify-send &quot;weird test message&quot;&#39;</code>"}], "tags": [], "owner": {"reputation": 21338, "user_id": 145279, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/r9KgA.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/145279/will"}, "is_accepted": false, "score": 1, "last_activity_date": 1459379761, "last_edit_date": 1459379761, "creation_date": 1459379617, "answer_id": 36321390, "question_id": 36321313, "link": "https://stackoverflow.com/questions/36321313/crontab-not-executing-python-script-on-ubuntu/36321390#36321390", "title": "Crontab not executing Python script on Ubuntu", "body": "<p>Most likely, the problem is that <code>notify-send</code> is not in your <code>$PATH</code> when running from <code>crontab</code>. First, figure out where it's stored:</p>\n\n<pre><code>$ which notify-send\n/usr/bin/notify-send\n</code></pre>\n\n<p>For me, it's in <code>/usr/bin</code>.</p>\n\n<p>At the top of your <code>crontab</code> file (<code>crontab -e</code>), set <code>$PATH</code>:</p>\n\n<pre><code>PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\n</code></pre>\n\n<p>If you want to include whatever <code>$PATH</code> may have already been set before (safer), do this instead:</p>\n\n<pre><code>PATH=\"${PATH}:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"\n</code></pre>\n\n<p>Make sure this includes the directory where your command is installed, if it's not installed in <code>/usr/bin</code>.</p>\n\n<p>Of course, the other option, is to simply specify the full command path in your Python script:</p>\n\n<pre><code>subprocess.Popen(['/usr/bin/notify-send', message])\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 3534031, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100000445633342/picture?type=large", "display_name": "patrickstarpants", "link": "https://stackoverflow.com/users/3534031/patrickstarpants"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1559, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1459466169, "creation_date": 1459379202, "last_edit_date": 1459466169, "question_id": 36321313, "link": "https://stackoverflow.com/questions/36321313/crontab-not-executing-python-script-on-ubuntu", "title": "Crontab not executing Python script on Ubuntu", "body": "<p>I have a Python script with the following code:</p>\n\n<pre><code>import subprocess\nimport sys\n\ndefault = \"Take a 20 second break - look at least 20 feet away!\"\nmessage = sys.argv[1] if len(sys.argv) &gt; 1 else default\n\ndef sendmessage(message):\n    subprocess.Popen(['notify-send', message])\n    return\n\nsendmessage(message)\n</code></pre>\n\n<p>called <code>takebreak.py</code>, which will send a system notification.</p>\n\n<p>When I try to automate it using <code>crontab</code> like so:</p>\n\n<pre><code>* * * * * /usr/bin/python /home/polo/git-repositories/takebreak/takebreak.py\n</code></pre>\n\n<p>It doesn't work. Running the command </p>\n\n<pre><code>/usr/bin/python /home/polo/git-repositories/takebreak/takebreak.py\n</code></pre>\n\n<p>in the terminal does work, which means it's not a file location problem, but rather something to do with <code>cron</code>. Any ideas?</p>\n\n<p><strong>EDIT1:</strong></p>\n\n<p>After debugging and looking at the logs, I can verify that cron is actually executing the commmand <code>export DISPLAY=:0; /usr/bin/python /home/polo/git-repositories/takebreak/takebreak.py</code> every minute like I set it to do, but for some reason this command, while it should send a system notification, is not doing so.\nAny ideas?</p>\n\n<p><strong>EDIT2:</strong></p>\n\n<p>The solution was to add some address bus thing (forget the exact code) that I found in another post, that ended up fixing it. Unfortunately, none of the answers or comments here helped with solving the problem, but thanks regardless!</p>\n"}, {"tags": ["python", "join", "append"], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 4526483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6748eed1f93699e050dccb18e8dc62b5?s=128&d=identicon&r=PG&f=1", "display_name": "Knowbody", "link": "https://stackoverflow.com/users/4526483/knowbody"}, "is_accepted": true, "score": 1, "last_activity_date": 1459379821, "last_edit_date": 1459379821, "creation_date": 1459379502, "answer_id": 36321373, "question_id": 36321241, "link": "https://stackoverflow.com/questions/36321241/python-how-to-add-a-blank-character-to-a-string-so-as-to-add-a-column-to-a-db/36321373#36321373", "title": "Python - how to add a blank character to a string so as to add a column to a db", "body": "<p>So, it looks like the <code>row</code> variable is actually a tuple instead of a list.</p>\n\n<p>Tuples are immutable. You'll need to convert <code>row</code> to a list first before you can change values in it:</p>\n\n<p><code>row = list(row)</code></p>\n\n<p>Or better still, when creating <code>row</code>, make it a list to begin with.</p>\n"}], "owner": {"reputation": 83, "user_id": 6137203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cb2c6d992f79ade440c284cbd438b3a?s=128&d=identicon&r=PG&f=1", "display_name": "Slihthinden", "link": "https://stackoverflow.com/users/6137203/slihthinden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 36321373, "answer_count": 1, "score": 1, "last_activity_date": 1459379821, "creation_date": 1459378811, "last_edit_date": 1459378905, "question_id": 36321241, "link": "https://stackoverflow.com/questions/36321241/python-how-to-add-a-blank-character-to-a-string-so-as-to-add-a-column-to-a-db", "title": "Python - how to add a blank character to a string so as to add a column to a db", "body": "<p>I am using SQLite3 and Python 2.7 atm.  I have run into a problem where I have a bunch of data with one string in my list could have up to 5 characters in it, but not necessarily - when putting this into my sql table, I need the 5 columns tho.  So I am trying to add \"' \" to the string so as to add the extra columns - thus far I have put in this:</p>\n\n<pre><code>while len(row[36].split(',')) &lt; 5:\n    row[36] = '%s%s'%(row[36],', ')\n</code></pre>\n\n<p>The error I get at this time is: <code>TypeError: 'tuple' object does not support item assignment.</code>  </p>\n\n<p>If there is anything else needed, just let me know.</p>\n\n<p>Thank you,</p>\n"}, {"tags": ["python", "scipy", "sparse-matrix", "data-manipulation"], "comments": [{"owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 1, "creation_date": 1459378811, "post_id": 36321157, "comment_id": 60265707, "body": "What have you tried? This is pretty trivial to do. Also, depending on how big your dataset is, it may not be feasible to load all of it in to memory at once. Show some code."}], "answers": [{"comments": [{"owner": {"reputation": 854, "user_id": 1575548, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c63f0a29a05ef3086b4f10ccae65b5e8?s=128&d=identicon&r=PG", "display_name": "B&#233;atrice Moissinac", "link": "https://stackoverflow.com/users/1575548/b%c3%a9atrice-moissinac"}, "edited": false, "score": 1, "creation_date": 1516576293, "post_id": 36321343, "comment_id": 83732457, "body": "I&#39;m using Python3.6 and scipy 1.0.0 and this exact code produces <code>NotImplementedError: Direct modification to dok_matrix element is not allowed.</code> - Any idea how I can solve this?"}, {"owner": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "reply_to_user": {"reputation": 854, "user_id": 1575548, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c63f0a29a05ef3086b4f10ccae65b5e8?s=128&d=identicon&r=PG", "display_name": "B&#233;atrice Moissinac", "link": "https://stackoverflow.com/users/1575548/b%c3%a9atrice-moissinac"}, "edited": false, "score": 0, "creation_date": 1516579029, "post_id": 36321343, "comment_id": 83733080, "body": "Seems to be a change in scipy. Using pandas you can do <code>pd.Series(dct).unstack().values</code> where <code>dct</code> is a dictionary with tuples as keys and weights as values."}, {"owner": {"reputation": 16267, "user_id": 1346276, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Tu8Re.jpg?s=128&g=1", "display_name": "phipsgabler", "link": "https://stackoverflow.com/users/1346276/phipsgabler"}, "reply_to_user": {"reputation": 854, "user_id": 1575548, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c63f0a29a05ef3086b4f10ccae65b5e8?s=128&d=identicon&r=PG", "display_name": "B&#233;atrice Moissinac", "link": "https://stackoverflow.com/users/1575548/b%c3%a9atrice-moissinac"}, "edited": false, "score": 0, "creation_date": 1575470777, "post_id": 36321343, "comment_id": 104578452, "body": "@B&#233;atriceMoissinac Or <code>smat._update(dct)</code>, see <a href=\"https://github.com/scipy/scipy/issues/8338\" rel=\"nofollow noreferrer\">here</a>."}], "tags": [], "owner": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "is_accepted": true, "score": 6, "last_activity_date": 1459379310, "creation_date": 1459379310, "answer_id": 36321343, "question_id": 36321157, "link": "https://stackoverflow.com/questions/36321157/transform-an-adjacency-list-into-a-sparse-adjacency-matrix-using-python/36321343#36321343", "title": "transform an adjacency list into a sparse adjacency matrix using python", "body": "<p><code>scipy.sparse</code> does it for you.</p>\n\n<pre><code>import numpy as np\nfrom scipy.sparse import dok_matrix\n\nyour_data = [((2, 7), 1)]\n\nXDIM, YDIM = 10, 10 # Replace with your values\n\ndct = {}\nfor (row, col), weight in your_data:\n    dct[(row, col)] = weight\n\nsmat = dok_matrix((XDIM, YDIM))\nsmat.update(dct)\n\ndense = smat.toarray()\n\nprint dense\n\n'''\n[[ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.]\n [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.]\n [ 0.  0.  0.  0.  0.  0.  0.  1.  0.  0.]\n [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.]\n [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.]\n [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.]\n [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.]\n [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.]\n [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.]\n [ 0.  0.  0.  0.  0.  0.  0.  0.  0.  0.]]\n'''\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 3442285, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/40fb3445cfb2b08c76f25022e8f62aab?s=128&d=identicon&r=PG&f=1", "display_name": "ramez", "link": "https://stackoverflow.com/users/3442285/ramez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1710, "favorite_count": 0, "accepted_answer_id": 36321343, "answer_count": 1, "score": 4, "last_activity_date": 1459379310, "creation_date": 1459378442, "question_id": 36321157, "link": "https://stackoverflow.com/questions/36321157/transform-an-adjacency-list-into-a-sparse-adjacency-matrix-using-python", "title": "transform an adjacency list into a sparse adjacency matrix using python", "body": "<p>When using scipy, I was able to transform my data in the following format:</p>\n\n<pre><code>(row, col)  (weight)\n(0, 0)      5\n(0, 47)     5\n(0, 144)    5\n(0, 253)    4\n(0, 513)    5\n...\n(6039, 3107)    5\n(6039, 3115)    3\n(6039, 3130)    4\n(6039, 3132)    2\n</code></pre>\n\n<p>How can I transform this into an array or sparse matrix with zeros for missing weight values as such? (based on the data above, column 1 to 46 should be filled with zeros, and so on...)</p>\n\n<pre><code>0 1 2 3  ... 47 48 49 50\n1 [0 0 0 0 ... 5 0 0 0 0\n2  2 0 1 0 ... 4 0 5 0 0\n3  3 1 0 5 ... 1 0 0 4 2\n4  0 0 0 4 ... 5 0 1 3 0\n5  5 1 5 4 ... 0 0 3 0 1]\n</code></pre>\n\n<p>I know it is better in terms of memory to keep the data in the format above, but I need it as a matrix for experimentation.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "d3py"], "answers": [{"comments": [{"owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "edited": false, "score": 0, "creation_date": 1459804448, "post_id": 36350427, "comment_id": 60441602, "body": "Your suggested approach doesn&#39;t actually result in the plot being shown, but I can see your logic. Thanks."}], "tags": [], "owner": {"reputation": 1681, "user_id": 2930651, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/19dc28d33a5b5eaa61514a7e92eb50df?s=128&d=identicon&r=PG&f=1", "display_name": "knightofni", "link": "https://stackoverflow.com/users/2930651/knightofni"}, "is_accepted": false, "score": 1, "last_activity_date": 1459495675, "creation_date": 1459495675, "answer_id": 36350427, "question_id": 36320974, "link": "https://stackoverflow.com/questions/36320974/how-to-apply-column-names-to-a-pandas-series-created-via-dataframe-value-counts/36350427#36350427", "title": "How to apply column names to a pandas Series created via DataFrame.value_counts()", "body": "<p>I don't think casting the Series as a DataFrame creates any problem.</p>\n\n<p>However this looks wrong</p>\n\n<pre><code>p += d3py.Bar('', 'Tipo de vivienda') # x, y\n</code></pre>\n\n<p>The empty string is probably the source of the error.</p>\n\n<p>Your DataFrame is composed of one index ('casa'), and one column ('Tipo de vivienda')</p>\n\n<p>You're passing for you <code>x</code> argument an empty string, so d3py looks for a column that name is '',doesnt find it, and fails.</p>\n\n<p>Solutions :\n1. Check the doc of d3py and find how to pass an index as a value for the chart\n2. Do the following :</p>\n\n<pre><code>v_as_df = v_as_df.reset_index()  # Transform your index into a column\nprint v_as_df.columns\n### WILL output something like :**['index', 'Tipo de vivienda']**\n\nthen :\np = d3py.PandasFigure(v_as_df)\n# adapt *'index'* with whatever you get from printing v_as_df.columns above\np += d3py.Bar('index', 'Tipo de vivienda') \n</code></pre>\n"}], "owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1459495675, "creation_date": 1459377417, "last_edit_date": 1459377834, "question_id": 36320974, "link": "https://stackoverflow.com/questions/36320974/how-to-apply-column-names-to-a-pandas-series-created-via-dataframe-value-counts", "title": "How to apply column names to a pandas Series created via DataFrame.value_counts()", "body": "<p>I have the following pandas <code>Series</code> (which is actually the output of running <code>value_counts()</code> on a certain column - \"Tipo de vivienda\" - of a <code>DataFrame</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hI8Ra.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hI8Ra.png\" alt=\"enter image description here\"></a></p>\n\n<p>With visualizaion libraries such as Seaborn, Bokeh etc. I can form a bar chart directly on this Series, without additional wrangling or conversion. Yet for <a href=\"https://github.com/mikedewar/d3py\" rel=\"nofollow noreferrer\">d3py</a>, bar charts can only be generated from DataFrames (I believe). So I convert the series to a <code>DataFrame</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dg9t2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dg9t2.png\" alt=\"enter image description here\"></a></p>\n\n<p>I then set about plotting the bar chart:</p>\n\n<pre><code>p = d3py.PandasFigure(v_as_df)\n</code></pre>\n\n<p>At this point, I need to tell d3py that I want a Bar chart. I also need to tell it the titles of the columns, and this is where things fall down. Calling <code>v_as_df.columns()</code> gives me:</p>\n\n<pre><code>Index([u'Tipo de vivienda'], dtype='object')\n</code></pre>\n\n<p>Somewhat guessing what the columns names are, I try:</p>\n\n<pre><code>p += d3py.Bar('', 'Tipo de vivienda') # x, y\n</code></pre>\n\n<p>... but nothing gets displayed when I call <code>p.show()</code>, and I am guessing it's because I don't have a true <code>DataFrame</code>, but rather a <code>Series</code> casted as such.</p>\n\n<p>Is calling <code>DataFrame()</code> on the <code>Series</code> the wrong way to go?  </p>\n\n<ul>\n<li>Python: 2.7.11</li>\n<li>pandas: 0.18.0</li>\n</ul>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1459377529, "post_id": 36320969, "comment_id": 60265257, "body": "It looks like you&#39;re ready to do some research into how to build a Tkinter application (and you might look into <code>list</code>s and method chaining, too). I recommend <a href=\"http://effbot.org/tkinterbook/\" rel=\"nofollow noreferrer\">Effbot</a>."}, {"owner": {"reputation": 161, "user_id": 5823815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9e3f5c465e69f885babc43bd60ed96?s=128&d=identicon&r=PG", "display_name": "user5823815", "link": "https://stackoverflow.com/users/5823815/user5823815"}, "edited": false, "score": 0, "creation_date": 1459379491, "post_id": 36320969, "comment_id": 60265941, "body": "You may wish to look at event driven programming.  Also you need to put buttons in a frame and the frame sits in root."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 161, "user_id": 5823815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9e3f5c465e69f885babc43bd60ed96?s=128&d=identicon&r=PG", "display_name": "user5823815", "link": "https://stackoverflow.com/users/5823815/user5823815"}, "edited": false, "score": 0, "creation_date": 1459380260, "post_id": 36320969, "comment_id": 60266182, "body": "@user5823815 - You don&#39;t always need to use a <code>Frame</code>. It can be helpful to organize the app by grouping related items into <code>Frame</code>s, but you can make pretty complex apps by just adding widgets to the root object."}, {"owner": {"reputation": 3, "user_id": 6137138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88ff3dbeb8b145dc162898f499e34ef4?s=128&d=identicon&r=PG&f=1", "display_name": "Artui", "link": "https://stackoverflow.com/users/6137138/artui"}, "edited": false, "score": 0, "creation_date": 1459385436, "post_id": 36320969, "comment_id": 60267760, "body": "Thank you for this tips. It really helped :)"}, {"owner": {"reputation": 161, "user_id": 5823815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9e3f5c465e69f885babc43bd60ed96?s=128&d=identicon&r=PG", "display_name": "user5823815", "link": "https://stackoverflow.com/users/5823815/user5823815"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1459403627, "post_id": 36320969, "comment_id": 60272958, "body": "@TigerhawkT3 thank you I didn&#39;t know that"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6137138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88ff3dbeb8b145dc162898f499e34ef4?s=128&d=identicon&r=PG&f=1", "display_name": "Artui", "link": "https://stackoverflow.com/users/6137138/artui"}, "edited": false, "score": 0, "creation_date": 1459385495, "post_id": 36321837, "comment_id": 60267778, "body": "Thank you. This helped me a lot. I finally finished my code :)"}, {"owner": {"reputation": 290, "user_id": 5796943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yUuzw.jpg?s=128&g=1", "display_name": "drewteriyaki", "link": "https://stackoverflow.com/users/5796943/drewteriyaki"}, "reply_to_user": {"reputation": 3, "user_id": 6137138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88ff3dbeb8b145dc162898f499e34ef4?s=128&d=identicon&r=PG&f=1", "display_name": "Artui", "link": "https://stackoverflow.com/users/6137138/artui"}, "edited": false, "score": 0, "creation_date": 1459454611, "post_id": 36321837, "comment_id": 60307244, "body": "Set it as the answer because other people might need to know about this <code>.update()</code>."}], "tags": [], "owner": {"reputation": 290, "user_id": 5796943, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yUuzw.jpg?s=128&g=1", "display_name": "drewteriyaki", "link": "https://stackoverflow.com/users/5796943/drewteriyaki"}, "is_accepted": true, "score": 0, "last_activity_date": 1459382088, "creation_date": 1459382088, "answer_id": 36321837, "question_id": 36320969, "link": "https://stackoverflow.com/questions/36320969/an-updating-display-tkinter/36321837#36321837", "title": "An updating display tkinter?", "body": "<p><strong>Here is a little something about updating.</strong>\n</p>\n\n<ul>\n<li>all you need to do is add <code>root.update()</code> at the end.</li>\n<li>all it does is just updates all your display.</li>\n<li>you would think that python would do something crazy to get it to update.</li>\n</ul>\n\n<p><strong>Here is a website about updating.</strong></p>\n\n<p><a href=\"http://www.tutorialspoint.com/python/dictionary_update.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/python/dictionary_update.htm</a></p>\n"}], "owner": {"reputation": 3, "user_id": 6137138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88ff3dbeb8b145dc162898f499e34ef4?s=128&d=identicon&r=PG&f=1", "display_name": "Artui", "link": "https://stackoverflow.com/users/6137138/artui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 834, "favorite_count": 0, "accepted_answer_id": 36321837, "answer_count": 1, "score": 0, "last_activity_date": 1459382088, "creation_date": 1459377375, "question_id": 36320969, "link": "https://stackoverflow.com/questions/36320969/an-updating-display-tkinter", "title": "An updating display tkinter?", "body": "<p>I'm having a bit of trouble on how to figure out how to make a display. I have two questions: Which widget should I use? and How can I actually make it do what I want to do? \nI'm still a beginner when it comes to Tkinter so it's confusing for me. I've tried searching online before posting this question but it only made me more confused. I would really appreciate it if someone would be willing to help. Thanks in advance!</p>\n\n<p>Here is what I have so far.</p>\n\n<pre><code>#Imports Tkinter as tk\n\nimport Tkinter as tk\nroot=tk.Tk()\nroot.title(\"Phone Dial\")\n\n\n#def display:\n#creates a display\n#update display when a button is pressed\n#continues to list numbers when button is pressed\n    #ex. only 2 is displayed -&gt; (Button \"3\" is pressed)-&gt; displays 23\n        #like a calculator display\n\n\n#Dial buttons from #0-10\nb=tk.Button(root,text=\"1\",bd=5,width=\"5\").grid(row=2,column=1)\nb1=tk.Button(root,text=\"2\",bd=5,width=\"5\").grid(row=2,column=2)\nb2=tk.Button(root,text=\"3\",bd=5,width=\"5\").grid(row=2,column=3)\nb3=tk.Button(root,text=\"4\",bd=5,width=\"5\").grid(row=3,column=1)\nb4=tk.Button(root,text=\"5\",bd=5,width=\"5\").grid(row=3,column=2)\nb5=tk.Button(root,text=\"6\",bd=5,width=\"5\").grid(row=3,column=3)\nb6=tk.Button(root,text=\"7\",bd=5,width=\"5\").grid(row=4,column=1)\nb7=tk.Button(root,text=\"8\",bd=5,width=\"5\").grid(row=4,column=2)\nb8=tk.Button(root,text=\"9\",bd=5,width=\"5\").grid(row=4,column=3)\nb9=tk.Button(root,text=\"0\",bd=5,width=\"5\").grid(row=5,column=2)\n\n\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "scipy", "coordinate-transformation", "linear-interpolation"], "comments": [{"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1459378179, "post_id": 36320961, "comment_id": 60265478, "body": "Why is the X,Y grid <code>more regular</code>? Is there no linear dependency between the latitude and the X? Even if the formula is nonlinear, you should be able to calculate backwards from each X to each latitude."}, {"owner": {"reputation": 3646, "user_id": 676102, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c61b1abf00a198c71982e38640aad3c5?s=128&d=identicon&r=PG", "display_name": "Vorticity", "link": "https://stackoverflow.com/users/676102/vorticity"}, "edited": false, "score": 0, "creation_date": 1459378245, "post_id": 36320961, "comment_id": 60265503, "body": "You may want to look at both <code>basemap</code> and <code>pyresample</code>.  As a note, <code>pyresample</code> also makes use of <code>basemap</code>."}, {"owner": {"reputation": 721, "user_id": 5666203, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fo0sw.jpg?s=128&g=1", "display_name": "AaronJPung", "link": "https://stackoverflow.com/users/5666203/aaronjpung"}, "edited": false, "score": 0, "creation_date": 1459379625, "post_id": 36320961, "comment_id": 60265979, "body": "Roadrunner - the lat,lon data comes from detector position, so there&#39;s no dependence. Plus, it means I&#39;m working with scattered data. This is tge reason for the interpolation."}], "owner": {"reputation": 721, "user_id": 5666203, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fo0sw.jpg?s=128&g=1", "display_name": "AaronJPung", "link": "https://stackoverflow.com/users/5666203/aaronjpung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459377341, "creation_date": 1459377341, "question_id": 36320961, "link": "https://stackoverflow.com/questions/36320961/imaging-lat-lon-alt-data-after-lat-lon-x-y-lat-lon-conversion", "title": "Imaging lat, lon, alt data after (lat,lon) -&gt; (x,y) -&gt; (lat,lon) conversion", "body": "<p>I have (lonvec, latvec, altvec) data, extracted from an dataset based on an equirectangular projection. I am converting the coordinates to (xvec, yvec, altvec). I'm using this data for an interpolation using: </p>\n\n<pre><code>    X = np.linspace(xvec.min(), xvec.max(), 300)\n    Y = np.linspace(yvec.min(), yvec.max(), 300)\n    Z = np.linspace(zvec.min(), zvec.max(), 300)\n    X2, Y2 = np.meshgrid(X, Y)\n    interp = scipy.interpolate.LinearNDInterpolator(cartcoord, mesvec0, fill_value=0)\n    Z0 = interp(X2, Y2)\n</code></pre>\n\n<p>At this point, I have a meshgrid of (xvec,yvec) points, and interpolated dataset (Z0). Each of these variables (X2, Y2, and Z0) are two dimensional.</p>\n\n<p>I want to keep the interpolated points (and their corresponding x,y location), while transforming the x,y coordinates back to lat,lon coordinates before displaying the final image. The final image should be (lat, lon, alt). The reason for doing the transform from (lat,lon) to (x,y), is to provide a more regular grid for the LinearNDInterpolator to take place over. What would be a good way to do this? </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 1, "creation_date": 1459377470, "post_id": 36320953, "comment_id": 60265237, "body": "&quot;Under Python 2.x, this is proposed as an alternative to the built-in file object&quot;, so not the same in 2.x."}, {"owner": {"reputation": 3060, "user_id": 2723675, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vR5Cz.png?s=128&g=1", "display_name": "iLoveTux", "link": "https://stackoverflow.com/users/2723675/ilovetux"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1459377579, "post_id": 36320953, "comment_id": 60265275, "body": "I don&#39;t suppose you have a link so I can read more, do you?"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 1, "creation_date": 1459377615, "post_id": 36320953, "comment_id": 60265292, "body": "It&#39;s at the top of the page you linked."}, {"owner": {"reputation": 3060, "user_id": 2723675, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vR5Cz.png?s=128&g=1", "display_name": "iLoveTux", "link": "https://stackoverflow.com/users/2723675/ilovetux"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1459377798, "post_id": 36320953, "comment_id": 60265357, "body": "Wow! I can&#39;t believe that I missed that. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1459378883, "post_id": 36321030, "comment_id": 60265730, "body": "Since it&#39;s just for <code>isinstance</code> checks, you don&#39;t need the <code>tuple</code> wrapping in the Py3 case; just <code>file_types = io.IOBase</code> would work (possibly slightly more efficiently)."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1459379007, "post_id": 36321030, "comment_id": 60265783, "body": "@ShadowRanger aye, but kept it for consistency + the name of the variable indicates a sequence. Not that keen on optimizing such stuff unless really needed."}, {"owner": {"reputation": 3060, "user_id": 2723675, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vR5Cz.png?s=128&g=1", "display_name": "iLoveTux", "link": "https://stackoverflow.com/users/2723675/ilovetux"}, "edited": false, "score": 2, "creation_date": 1459379199, "post_id": 36321030, "comment_id": 60265842, "body": "OK, so I&#39;m marking this answer as correct because I feel it&#39;s the correct answer to my question, but since my ultimate goal is to have a Python 2.7 and 3.5 compatible code base, I&#39;m actually switching my <code>open()</code> calls to <code>io.open()</code> calls which work in both versions and you can test them the same way. Thanks for your help."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 3060, "user_id": 2723675, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vR5Cz.png?s=128&g=1", "display_name": "iLoveTux", "link": "https://stackoverflow.com/users/2723675/ilovetux"}, "edited": false, "score": 0, "creation_date": 1459379277, "post_id": 36321030, "comment_id": 60265871, "body": "@iLoveTux using io.open has the added benefit of <code>encoding=...</code>, <code>newline=...</code> support in Py2 too."}, {"owner": {"reputation": 3060, "user_id": 2723675, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vR5Cz.png?s=128&g=1", "display_name": "iLoveTux", "link": "https://stackoverflow.com/users/2723675/ilovetux"}, "edited": false, "score": 0, "creation_date": 1459379479, "post_id": 36321030, "comment_id": 60265936, "body": "@IIja, awesome! I&#39;m sure that making this change will ultimately lead to more compatible code and it&#39;s just one more import and three more keystrokes per file. I can&#39;t believe I couldn&#39;t find anything online about this before. I&#39;m just now getting into Python 3, so I&#39;m sure there is a lot more to learn. Anyway, thank you for everything, including the quick response."}], "tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": true, "score": 7, "last_activity_date": 1459378772, "last_edit_date": 1459378772, "creation_date": 1459377730, "answer_id": 36321030, "question_id": 36320953, "link": "https://stackoverflow.com/questions/36320953/isinstance-file-python-2-7-and-3-5/36321030#36321030", "title": "isinstance file python 2.7 and 3.5", "body": "<p>From the linked documentation:</p>\n\n<blockquote>\n  <p>Under Python 2.x, this is proposed as an alternative to the built-in file object</p>\n</blockquote>\n\n<p>So they are not the same in python 2.x.</p>\n\n<p>As to part 2, this works in python2 and 3, though not the prettiest thing in the world:</p>\n\n<pre><code>import io\ntry:\n    file_types = (file, io.IOBase)\n\nexcept NameError:\n    file_types = (io.IOBase,)\n\nwith open(\"README.md\", \"r\") as fin:\n    print(isinstance(fin, file_types))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3060, "user_id": 2723675, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vR5Cz.png?s=128&g=1", "display_name": "iLoveTux", "link": "https://stackoverflow.com/users/2723675/ilovetux"}, "edited": false, "score": 1, "creation_date": 1459378030, "post_id": 36321051, "comment_id": 60265421, "body": "in Python 3.5, I get <code>AttributeError: module &#39;types&#39; has no attribute &#39;FileType&#39;</code>"}, {"owner": {"reputation": 2493, "user_id": 5966448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5797778df7bfc1beb6dd450d7e53d2d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sci Prog", "link": "https://stackoverflow.com/users/5966448/sci-prog"}, "reply_to_user": {"reputation": 3060, "user_id": 2723675, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vR5Cz.png?s=128&g=1", "display_name": "iLoveTux", "link": "https://stackoverflow.com/users/2723675/ilovetux"}, "edited": false, "score": 0, "creation_date": 1459378521, "post_id": 36321051, "comment_id": 60265603, "body": "You are right (see my edit).  The <code>types</code> module in python3  is completely different."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 2, "creation_date": 1459378693, "post_id": 36321051, "comment_id": 60265663, "body": "<code>isinstance(open(&#39;testi.txt&#39;, &#39;rb&#39;), io.TextIOWrapper) == False</code>. Use the Base, Luke ... @SciProg"}], "tags": [], "owner": {"reputation": 2493, "user_id": 5966448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5797778df7bfc1beb6dd450d7e53d2d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sci Prog", "link": "https://stackoverflow.com/users/5966448/sci-prog"}, "is_accepted": false, "score": 1, "last_activity_date": 1459379242, "last_edit_date": 1459379242, "creation_date": 1459377855, "answer_id": 36321051, "question_id": 36320953, "link": "https://stackoverflow.com/questions/36320953/isinstance-file-python-2-7-and-3-5/36321051#36321051", "title": "isinstance file python 2.7 and 3.5", "body": "<p>For python2</p>\n\n<pre><code>import types\nf = open('test.txt', 'r')   # assuming this file exists\nprint (isinstance(f,types.FileType))\n</code></pre>\n\n<p>For python3</p>\n\n<pre><code>import io\nimport types\nf1 = open('test.txt', 'r')   # assuming this file exists\nf2 = open('test.txt', 'rb')   # assuming this file exists\nprint (isinstance(f1,io.IOBase))\nprint (isinstance(f2,io.IOBase))\n</code></pre>\n\n<p>(Edit: my previous solution tested for io.TextIOWrapper, it worked only with files opened in text mode.  See <a href=\"https://docs.python.org/3/library/io.html#class-hierarchy\" rel=\"nofollow\">https://docs.python.org/3/library/io.html#class-hierarchy</a> which describes the python3 class hierarchy).  </p>\n"}], "owner": {"reputation": 3060, "user_id": 2723675, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vR5Cz.png?s=128&g=1", "display_name": "iLoveTux", "link": "https://stackoverflow.com/users/2723675/ilovetux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3026, "favorite_count": 0, "accepted_answer_id": 36321030, "answer_count": 2, "score": 5, "last_activity_date": 1459379242, "creation_date": 1459377295, "question_id": 36320953, "link": "https://stackoverflow.com/questions/36320953/isinstance-file-python-2-7-and-3-5", "title": "isinstance file python 2.7 and 3.5", "body": "<p>In Python 2.7 I get the following results:</p>\n\n<pre><code>&gt;&gt;&gt; with open(\"README.md\", \"r\") as fin:\n...     print(isinstance(fin, file))\n... \nTrue\n</code></pre>\n\n<p>In python 3.5 I get:</p>\n\n<pre><code>&gt;&gt;&gt; with open(\"README.md\", \"r\") as fin:\n...     print(isinstance(fin, file))\n... \nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 2, in &lt;module&gt;\nNameError: name 'file' is not defined\n</code></pre>\n\n<p>So, OK I look at the Python docs and find out that in Python 3.5, files are of type <code>io.IOBase</code> (or some subclass). Leading me to this:</p>\n\n<pre><code>&gt;&gt;&gt; import io\n&gt;&gt;&gt; with open(\"README.md\", \"r\") as fin:\n...     print(isinstance(fin, io.IOBase))\n... \nTrue\n</code></pre>\n\n<p>But then when I try in Python 2.7:</p>\n\n<pre><code>&gt;&gt;&gt; import io\n&gt;&gt;&gt; with open(\"README.md\", \"r\") as fin:\n...     print(isinstance(fin, io.IOBase))\n... \nFalse\n</code></pre>\n\n<p>So at this point, I'm confused. Looking at the <a href=\"https://docs.python.org/2/library/io.html#io.IOBase\" rel=\"noreferrer\">documentation</a>, I feel as though Python 2.7 should report <code>True</code>.</p>\n\n<p>Obviously I'm missing something elementary, perhaps because it's 6:30 PM ET, but I have two related questions:</p>\n\n<ol>\n<li>Why does Python report <code>False</code> for <code>isinstance(fin, io.IOBase)</code>?</li>\n<li>Is there a way to test that a variable is an open file which will work in both Python 2.7 and 3.5?</li>\n</ol>\n"}, {"tags": ["python", "z3", "z3py"], "answers": [{"comments": [{"owner": {"reputation": 5493, "user_id": 1248073, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8ILOh.jpg?s=128&g=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/1248073/curious"}, "edited": false, "score": 0, "creation_date": 1459379461, "post_id": 36321189, "comment_id": 60265933, "body": "Thanks! it makes sense! do you happen to know a working alternative to this ? perhaps one that uses linear arithmetic and still retains most of the properties of the assumptions? Thanks again"}], "tags": [], "owner": {"reputation": 7851, "user_id": 1096362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5eed9d8781d5278da6090e0aedf9e32?s=128&d=identicon&r=PG", "display_name": "Nikolaj Bjorner", "link": "https://stackoverflow.com/users/1096362/nikolaj-bjorner"}, "is_accepted": true, "score": 1, "last_activity_date": 1459378573, "creation_date": 1459378573, "answer_id": 36321189, "question_id": 36320899, "link": "https://stackoverflow.com/questions/36320899/z3py-why-are-the-following-assumptions-not-satisfiable/36321189#36321189", "title": "Z3Py: Why are the following assumptions not satisfiable?", "body": "<p>Z3 returns \"unknown\", which means that it is unable to find a model for the assertions. The background is that your constraints use non-linear arithmetic over free functions (and integers). Z3 does not offer a decision procedure for the fragment your formula is in. Instead it tries an incomplete search procedure and comes up with a state where it can neither establish, nor refute the assertions.</p>\n"}], "owner": {"reputation": 5493, "user_id": 1248073, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8ILOh.jpg?s=128&g=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/1248073/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 36321189, "answer_count": 1, "score": 0, "last_activity_date": 1459379262, "creation_date": 1459377018, "last_edit_date": 1459379262, "question_id": 36320899, "link": "https://stackoverflow.com/questions/36320899/z3py-why-are-the-following-assumptions-not-satisfiable", "title": "Z3Py: Why are the following assumptions not satisfiable?", "body": "<p>This might be a naive question but why does the following not result in  a satisfiable set of assumptions ?</p>\n\n<p>Doesn't the last assumption follow directly from assumptions 2 and 3 ? </p>\n\n<pre><code>import z3\n\n# Initialize variables\nt = z3.Int('t')\nz = z3.Real(\"z\")\ny = z3.Real(\"y\")\nM = z3.Real(\"M\")\nx = z3.Function(\"x\", z3.IntSort(), z3.RealSort())\nf = z3.Function(\"f\", z3.RealSort(), z3.RealSort())\nd_f1 = z3.Function(\"d_f1\", z3.RealSort(), z3.RealSort())\n\n# Add assumptions\ns = z3.Solver()\n\ns.add(f(y) == f(z) + d_f1(z) *(y-z))\ns.add(d_f1(z) &lt; M)\ns.add(f(x(t+1)) == f(x(t)) + d_f1(x(t)) *(x(t+1)-x(t)))\n\ns.add(f(x(t+1)) &lt; f(x(t)) + M *(x(t+1)-x(t)))\n\n# Check if assumptions are satisfiable\ns.check()\n</code></pre>\n\n<p>The result I get is,</p>\n\n<pre><code>unknown\n</code></pre>\n\n<p>Is there a way to encode a similar set of assumptions that are determined as satisfiable by the solver ?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "selenium", "xpath"], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 4781562, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6df8817bf88f01820d00b75a81321e06?s=128&d=identicon&r=PG&f=1", "display_name": "fmarques", "link": "https://stackoverflow.com/users/4781562/fmarques"}, "edited": false, "score": 0, "creation_date": 1459433342, "post_id": 36321334, "comment_id": 60293538, "body": "I tried both....but I&#39;m still getting the &quot;NoSuchElementException: Unable to locate element:&quot; message."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 1, "last_activity_date": 1459434935, "last_edit_date": 1459434935, "creation_date": 1459379274, "answer_id": 36321334, "question_id": 36320896, "link": "https://stackoverflow.com/questions/36320896/python-selenium-xpath-element-not-found/36321334#36321334", "title": "Python Selenium : Xpath element not found", "body": "<p>Multiple options here:</p>\n\n<ul>\n<li><p>locate the link \"by id\":</p>\n\n<pre><code>driver.find_element_by_id(\"ctl00_contentPlaceHolderConteudo_rtsDetalhe_tabDownload\")\n</code></pre></li>\n<li><p>by link text via the \"by xpath\" locator:</p>\n\n<pre><code>driver.find_element_by_xpath(\"//a[span/span = 'Download de Arquivos']\")\n</code></pre></li>\n</ul>\n\n<p>And, the important part is that the element is inside an <code>iframe</code> - you need to switch to it.</p>\n\n<p>Working code:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\ndriver = webdriver.Firefox()\ndriver.get(\"http://www.bmfbovespa.com.br/pt_br/servicos/market-data/consultas/mercado-a-vista/codigo-isin/pesquisa/\")\n\ndriver.switch_to.frame(\"bvmf_iframe\")\n\nwait = WebDriverWait(driver, 10)\nelem = wait.until(EC.presence_of_element_located((By.ID, \"ctl00_contentPlaceHolderConteudo_rtsDetalhe_tabDownload\")))\nelem.click()\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 4781562, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6df8817bf88f01820d00b75a81321e06?s=128&d=identicon&r=PG&f=1", "display_name": "fmarques", "link": "https://stackoverflow.com/users/4781562/fmarques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1297, "favorite_count": 0, "accepted_answer_id": 36321334, "answer_count": 1, "score": 0, "last_activity_date": 1459434935, "creation_date": 1459376993, "question_id": 36320896, "link": "https://stackoverflow.com/questions/36320896/python-selenium-xpath-element-not-found", "title": "Python Selenium : Xpath element not found", "body": "<p>I'm trying to click on a part of a webpage, but I'm getting the message \"NoSuchElementException: Unable to locate element\"....despite the element is there. </p>\n\n<p>The code used to work, however it looks like there was a change in the page..but the xpath did not changed.</p>\n\n<p>I tried different solutions of similar questions here in Stackoverflow, but something is not correct yet for this example. </p>\n\n<p>The URL is:\n\"<a href=\"http://www.bmfbovespa.com.br/pt_br/servicos/market-data/consultas/mercado-a-vista/codigo-isin/pesquisa/\" rel=\"nofollow\">http://www.bmfbovespa.com.br/pt_br/servicos/market-data/consultas/mercado-a-vista/codigo-isin/pesquisa/</a>\"</p>\n\n<p>The element I`m trying to click : \"Download de Arquivos\" </p>\n\n<p>My code:</p>\n\n<pre><code>from selenium import webdriver \n\n\nfp = webdriver.FirefoxProfile()\nfp.set_preference(\"browser.download.folderList\",2)\nfp.set_preference(\"browser.download.manager.showWhenStarting\",False)\nfp.set_preference(\"browser.helperApps.neverAsk.saveToDisk\", \"application/msword, application/csv, application/vnd.ms-excel, application/ris, text/csv, image/png, application/pdf, text/html, text/plain, application/zip, application/x-zip, application/x-zip-compressed, application/download, application/octet-stream\")\nfp.set_preference('browser.helperApps.alwaysAsk.force', False) \n\n\n\ndriver = webdriver.Firefox(firefox_profile=fp)\ndriver.get(\"http://www.bmfbovespa.com.br/pt_br/servicos/market-data/consultas/mercado-a-vista/codigo-isin/pesquisa/\")\n\n###\n# Click \"Download de arquivos\" (the part with problem)\n###\n\nelem=driver.find_element_by_xpath(\".//*[@id='ctl00_contentPlaceHolderConteudo_rtsDetalhe_tabDownload']/span/span\")\nelem.click()\n</code></pre>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["python", "scikit-learn", "regression", "lars"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 3, "creation_date": 1459377075, "post_id": 36320787, "comment_id": 60265084, "body": "when I run <code>from sklearn.linear_model import LassoLarsCV</code> followed by your line of code I get no error.  please provide enough code to reproduce the error you are getting as well as the full traceback message."}, {"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 1, "creation_date": 1459438688, "post_id": 36320787, "comment_id": 60297586, "body": "The error does not occur on that line, but when I call .fit(). Unfortunately, hard to reproduce here, my data set has 40k points."}, {"owner": {"reputation": 18845, "user_id": 838992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJyNd.png?s=128&g=1", "display_name": "J Richard Snape", "link": "https://stackoverflow.com/users/838992/j-richard-snape"}, "edited": false, "score": 1, "creation_date": 1459727414, "post_id": 36320787, "comment_id": 60402091, "body": "The interpolators in scipy often require that the <code>x</code> values are monotonically increasing.  Is <code>x</code> monotonically increasing for your dataset?  If they&#39;re not, try sorting the dataset with <code>x</code> as the key and try again.  If it works, let me know and I&#39;ll add a proper answer for the bounty :)"}, {"owner": {"reputation": 18845, "user_id": 838992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJyNd.png?s=128&g=1", "display_name": "J Richard Snape", "link": "https://stackoverflow.com/users/838992/j-richard-snape"}, "edited": false, "score": 0, "creation_date": 1459728440, "post_id": 36320787, "comment_id": 60402316, "body": "Hmm, looking into this - whilst that might be the case at the point where the code fails, it doesn&#39;t really make sense from where you call <code>fit</code> as I&#39;m guessing <code>x</code> is a 40000 x 40 matrix?"}, {"owner": {"reputation": 18035, "user_id": 1828289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/S6fiE.png?s=128&g=1", "display_name": "Alex I", "link": "https://stackoverflow.com/users/1828289/alex-i"}, "edited": false, "score": 1, "creation_date": 1459765376, "post_id": 36320787, "comment_id": 60416673, "body": "@BaronYugovich: Could you please upload your data somewhere?"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 5, "creation_date": 1459768155, "post_id": 36320787, "comment_id": 60418303, "body": "If there wasn&#39;t a bounty I&#39;d vote to close as lacking a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 18845, "user_id": 838992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJyNd.png?s=128&g=1", "display_name": "J Richard Snape", "link": "https://stackoverflow.com/users/838992/j-richard-snape"}, "edited": false, "score": 3, "creation_date": 1459812738, "post_id": 36320787, "comment_id": 60444732, "body": "Well - apologies for the &quot;ridiculous suggestion&quot;, but you&#39;ll note that the bit that&#39;s actually throwing the error is <code>interpolate.py</code> in the <code>scipy</code> package, which does have those requirements.  However, I&#39;m not really minded to track it further if you won&#39;t put up data to reproduce and think it&#39;s a good idea to suggest that people offering free help are being ridiculous."}, {"owner": {"reputation": 18845, "user_id": 838992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJyNd.png?s=128&g=1", "display_name": "J Richard Snape", "link": "https://stackoverflow.com/users/838992/j-richard-snape"}, "edited": false, "score": 0, "creation_date": 1459812935, "post_id": 36320787, "comment_id": 60444781, "body": "In addition - to ping people, you need to omit space from their user name and your assertion that the problem is not data related seems not to be backed by any evidence.  I agree the <code>1e4</code> vs <code>1e5</code> difference is interesting, but we need a dataset to replicate and therefore track down, it doesn&#39;t happen with all data (as the existing answer shows)"}, {"owner": {"reputation": 1786, "user_id": 5318634, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh4.googleusercontent.com/-WLoDLz8e0ag/AAAAAAAAAAI/AAAAAAAABFE/hE7C6EgHNhI/photo.jpg?sz=128", "display_name": "Pablo", "link": "https://stackoverflow.com/users/5318634/pablo"}, "edited": false, "score": 0, "creation_date": 1503431522, "post_id": 36320787, "comment_id": 78609938, "body": "same here, using LassoLarsCV give me the same error, my data set its smaller but same issue. did you find a solution to your problem ? its a problem with the scipy library ? <a href=\"https://github.com/scipy/scipy/issues/2283\" rel=\"nofollow noreferrer\">link</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "edited": false, "score": 0, "creation_date": 1459777194, "post_id": 36400404, "comment_id": 60424854, "body": "It has nothing to do with the data. On the same data set, when decreasing n_alphas, as specified above, the problem disappears. The error happens when generating alphas, not when dealing with the problem set."}, {"owner": {"reputation": 18035, "user_id": 1828289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/S6fiE.png?s=128&g=1", "display_name": "Alex I", "link": "https://stackoverflow.com/users/1828289/alex-i"}, "reply_to_user": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "edited": false, "score": 0, "creation_date": 1459793599, "post_id": 36400404, "comment_id": 60435690, "body": "@BaronYugovich You see the code where with the different data set of the same dimensions, a huge max_n_alphas, there is no problem. Why do you think the problem is not data related?  Please post a complete runnable example that reproduces your problem.  Thanks :)"}, {"owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "edited": false, "score": 0, "creation_date": 1459873928, "post_id": 36400404, "comment_id": 60478460, "body": "Makes sense. Out of curiosity, with your experiment with random data, what do you get with orthogonal matching pursuit  <a href=\"http://stackoverflow.com/questions/36287045/orthogonal-matching-pursuit-regression-am-i-using-it-wrong?noredirect=1#comment60438035_36287045\" title=\"orthogonal matching pursuit regression am i using it wrong\">stackoverflow.com/questions/36287045/&hellip;</a>"}, {"owner": {"reputation": 18035, "user_id": 1828289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/S6fiE.png?s=128&g=1", "display_name": "Alex I", "link": "https://stackoverflow.com/users/1828289/alex-i"}, "reply_to_user": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "edited": false, "score": 0, "creation_date": 1460097987, "post_id": 36400404, "comment_id": 60594347, "body": "@BaronYugovich Does this address your question? I believe what you have found is indeed a skkearn bug, but it is very hard to reproduce without your data.  Most importantly it makes no difference to the results you get, use any max alphas &gt; 40 and you&#39;ll get the same results, as long as it doesn&#39;t crash.  If you are satisfied please remember to award the bounty (and accept the answer)"}], "tags": [], "owner": {"reputation": 18035, "user_id": 1828289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/S6fiE.png?s=128&g=1", "display_name": "Alex I", "link": "https://stackoverflow.com/users/1828289/alex-i"}, "is_accepted": false, "score": 5, "last_activity_date": 1459768403, "last_edit_date": 1459768403, "creation_date": 1459766478, "answer_id": 36400404, "question_id": 36320787, "link": "https://stackoverflow.com/questions/36320787/valueerror-a-value-in-x-new-is-below-the-interpolation-range/36400404#36400404", "title": "ValueError: A value in x_new is below the interpolation range", "body": "<p>There must be something particular to your data.  <code>LassoLarsCV()</code> seems to be working correctly with this synthetic example of fairly well-behaved data:</p>\n\n<pre><code>import numpy\nimport sklearn.linear_model\n\n# create 40000 x 40 sample data from linear model with a bit of noise\nnpoints = 40000\nndims = 40\nnumpy.random.seed(1)\nX = numpy.random.random((npoints, ndims))\nw = numpy.random.random(ndims)\ny = X.dot(w) + numpy.random.random(npoints) * 0.1\n\nclf = sklearn.linear_model.LassoLarsCV(fit_intercept=False, normalize=False, max_n_alphas=1e6)\nclf.fit(X, y)\n\n# coefficients are almost exactly recovered, this prints 0.00377\nprint max(abs( clf.coef_ - w ))\n\n# alphas actually used are 41 or ndims+1\nprint clf.alphas_.shape\n</code></pre>\n\n<p>This is in sklearn 0.16, I don't have <code>positive=True</code> option.</p>\n\n<p>I'm not sure why you would want to use a very large max_n_alphas anyway.  While I don't know why 1e+4 works and 1e+5 doesn't in your case, I suspect the paths you get from max_n_alphas=ndims+1 and max_n_alphas=1e+4 or whatever would be identical for well behaved data.  Also the optimal alpha that is estimated by cross-validation in <code>clf.alpha_</code> is going to be  identical.  Check out <a href=\"http://scikit-learn.org/stable/auto_examples/linear_model/plot_lasso_lars.html\" rel=\"nofollow\">Lasso path using LARS</a> example for what alpha is trying to do. </p>\n\n<p>Also, from the LassoLars <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LassoLars.html\" rel=\"nofollow\">documentation</a></p>\n\n<blockquote>\n  <p>alphas_ array, shape (n_alphas + 1,) </p>\n  \n  <p>Maximum of covariances (in\n  absolute value) at each iteration. n_alphas is either max_iter,\n  n_features, or the number of nodes in the path with correlation\n  greater than alpha, whichever is smaller.</p>\n</blockquote>\n\n<p>so it makes sense that we end with alphas_ of size ndims+1 (ie n_features+1) above.</p>\n\n<p>P.S. Tested with sklearn 0.17.1 and positive=True as well, also tested with some positive and negative coefficients, same result: alphas_ is ndims+1 or less.</p>\n"}], "owner": {"reputation": 3063, "user_id": 2475195, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ba67bfbb808f7a06faa96d310bd00ed6?s=128&d=identicon&r=PG", "display_name": "Baron Yugovich", "link": "https://stackoverflow.com/users/2475195/baron-yugovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4333, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1459768502, "creation_date": 1459376535, "last_edit_date": 1459768502, "question_id": 36320787, "link": "https://stackoverflow.com/questions/36320787/valueerror-a-value-in-x-new-is-below-the-interpolation-range", "title": "ValueError: A value in x_new is below the interpolation range", "body": "<p>This is a scikit-learn error that I get when I do</p>\n\n<pre><code>my_estimator = LassoLarsCV(fit_intercept=False, normalize=False, positive=True, max_n_alphas=1e5)\n</code></pre>\n\n<p>Note that if I decrease max_n_alphas from 1e5 down to 1e4 I do not get this error any more.</p>\n\n<p>Anyone has an idea on what's going on?</p>\n\n<p>The error happens when I call</p>\n\n<pre><code>my_estimator.fit(x, y)\n</code></pre>\n\n<p>I have <code>40k</code> data points in <code>40</code> dimensions.</p>\n\n<p>The full stack trace looks like this</p>\n\n<pre><code>  File \"/usr/lib64/python2.7/site-packages/sklearn/linear_model/least_angle.py\", line 1113, in fit\n    axis=0)(all_alphas)\n  File \"/usr/lib64/python2.7/site-packages/scipy/interpolate/polyint.py\", line 79, in __call__\n    y = self._evaluate(x)\n  File \"/usr/lib64/python2.7/site-packages/scipy/interpolate/interpolate.py\", line 498, in _evaluate\n    out_of_bounds = self._check_bounds(x_new)\n  File \"/usr/lib64/python2.7/site-packages/scipy/interpolate/interpolate.py\", line 525, in _check_bounds\n    raise ValueError(\"A value in x_new is below the interpolation \"\nValueError: A value in x_new is below the interpolation range.\n</code></pre>\n"}, {"tags": ["python", "django", "django-admin", "shared-hosting"], "comments": [{"owner": {"reputation": 1767, "user_id": 375649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AYXsA.jpg?s=128&g=1", "display_name": "Andrey Shipilov", "link": "https://stackoverflow.com/users/375649/andrey-shipilov"}, "edited": false, "score": 0, "creation_date": 1459393594, "post_id": 36320705, "comment_id": 60269763, "body": "What are the permissions for the SQLite file?"}, {"owner": {"reputation": 1468, "user_id": 2931765, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/eiU4j.jpg?s=128&g=1", "display_name": "Arun G", "link": "https://stackoverflow.com/users/2931765/arun-g"}, "edited": false, "score": 0, "creation_date": 1459407637, "post_id": 36320705, "comment_id": 60275087, "body": "share the settings.py database profile."}, {"owner": {"reputation": 30, "user_id": 6111071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d9ce216b5642c0c62a6bc5315bec640?s=128&d=identicon&r=PG&f=1", "display_name": "Jamez", "link": "https://stackoverflow.com/users/6111071/jamez"}, "edited": false, "score": 0, "creation_date": 1460841493, "post_id": 36320705, "comment_id": 60931246, "body": "Sorry for the delay. See edits to main question."}], "owner": {"reputation": 30, "user_id": 6111071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d9ce216b5642c0c62a6bc5315bec640?s=128&d=identicon&r=PG&f=1", "display_name": "Jamez", "link": "https://stackoverflow.com/users/6111071/jamez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1502272413, "creation_date": 1459376113, "last_edit_date": 1502272413, "question_id": 36320705, "link": "https://stackoverflow.com/questions/36320705/django-admin-database-error-on-bluehost-shared-hosting", "title": "Django admin database error on Bluehost shared hosting", "body": "<p>Using django with sqlite3 on bluehost shared hosting.\nIf I try to view any of my models (Users, for example) via the admin panel I get an error, but if I manually enter the url to any specific object, there is no problem.</p>\n\n<p>So, </p>\n\n<p>www.domain.com/admin/auth/user/</p>\n\n<p>throws this error:</p>\n\n<blockquote>\n  <p>Database error. </p>\n  \n  <p>Something's wrong with your database installation. Make sure the appropriate database tables have been created, and make\n  sure the database is readable by the appropriate user. </p>\n</blockquote>\n\n<p>But, </p>\n\n<p>www.domain.com/admin/auth/user/20/ </p>\n\n<p>www.domain.com/admin/auth/user/add/</p>\n\n<p>www.domain.com/admin/auth/user/20/delete/</p>\n\n<p>works fine.</p>\n\n<p>The error is so generic, I'm not sure how to debug this. Any ideas on generating a traceback?</p>\n\n<p><strong>Edit #1:</strong> </p>\n\n<p>If I'm understanding the docs correctly, django doesn't require username/password to access a dbsqlite3 database. <a href=\"https://docs.djangoproject.com/en/1.8/ref/settings/\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.8/ref/settings/</a></p>\n\n<p><em>Settings.py</em></p>\n\n<pre><code># Database\n# https://docs.djangoproject.com/en/1.8/ref/settings/#databases\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n    }\n}\n\n# Deployment Settings\nUSE_SSL = True\nSECURE_CONTENT_TYPE_NOSNIFF = True\nSECURE_BROWSER_XSS_FILTER = True\nSESSION_COOKIE_SECURE = True\nCSRF_COOKIE_SECURE = True\nCSRF_COOKIE_HTTPONLY = True\nX_FRAME_OPTIONS = 'DENY'\n</code></pre>\n\n<p><strong>Edit #2:</strong></p>\n\n<p>Perms for db.sqlite3 file: \n-rw-r--r-- 1 adminusername</p>\n"}, {"tags": ["python", "nltk"], "comments": [{"owner": {"reputation": 2234, "user_id": 2757226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwnbH.jpg?s=128&g=1", "display_name": "chapelo", "link": "https://stackoverflow.com/users/2757226/chapelo"}, "edited": false, "score": 0, "creation_date": 1459379418, "post_id": 36320692, "comment_id": 60265911, "body": "<code>filter(function, iterable)</code>, I think you have a boolean expression instead of a function. Try a <code>lambda</code> instead."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1459381477, "post_id": 36320692, "comment_id": 60266596, "body": "I think you&#39;re looking for the NgramModel functionality that hasn&#39;t been fixed yet: <a href=\"https://github.com/nltk/nltk/pull/1351\" rel=\"nofollow noreferrer\">github.com/nltk/nltk/pull/1351</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "is_accepted": true, "score": 0, "last_activity_date": 1459376761, "creation_date": 1459376761, "answer_id": 36320840, "question_id": 36320692, "link": "https://stackoverflow.com/questions/36320692/filter-a-list-of-lists-based-on-the-first-two-items-of-the-sublist-natural-lan/36320840#36320840", "title": "Filter a list of lists based on the first two items of the sublist - natural language processing with NLTK", "body": "<p><code>scoredT[0:len(scoredT)][0:1]==input</code> compares the <em>first</em> element of <code>scoredT</code> to <code>input</code>. So it will be boolean. Then you pass it to <code>filter</code>, which requires the first argument to be a <em>boolean valued function</em>, hence your error. The pythonic way:</p>\n\n<pre><code>matches = [(trigram, score) for (trigram, score) in scoredT if trigram[:2] == input]\n</code></pre>\n\n<p>Also you need to make sure that <code>input</code> is a tuple.</p>\n"}], "owner": {"reputation": 75, "user_id": 5632580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Cp2Ps0u-ZRU/AAAAAAAAAAI/AAAAAAAAAG4/3lvZavmhEzA/photo.jpg?sz=128", "display_name": "L Mico", "link": "https://stackoverflow.com/users/5632580/l-mico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 36320840, "answer_count": 1, "score": 0, "last_activity_date": 1459376773, "creation_date": 1459376047, "question_id": 36320692, "link": "https://stackoverflow.com/questions/36320692/filter-a-list-of-lists-based-on-the-first-two-items-of-the-sublist-natural-lan", "title": "Filter a list of lists based on the first two items of the sublist - natural language processing with NLTK", "body": "<p>I have generated a list of trigrams and their frequencies in NLTK with this code</p>\n\n<pre><code>tokens = nltk.wordpunct_tokenize(docs)\nfrom nltk.collocations import *\ntrigram_measures = nltk.collocations.TrigramAssocMeasures()\nfinderT = TrigramCollocationFinder.from_words(tokens)\nscoredT = finderT.score_ngrams(trigram_measures.raw_freq)\n</code></pre>\n\n<p>Given a user defined 'input' of two words, I want to filer the list scoredT to return those values where the input matches the first two items of the sub list in scoredT</p>\n\n<p>scoredT looks like this</p>\n\n<pre><code>[(('out', 'to', 'the'), 2.7147650642313413e-05),\n(('proud', 'of', 'you'), 2.7147650642313413e-05)]\n</code></pre>\n\n<p>So if input were equal to 'out to', Id like to filter the list to return 'the'</p>\n\n<p>I tried </p>\n\n<pre><code>matches = filter(scoredT[0:len(scoredT)][0:1]==input, scoredT)\n</code></pre>\n\n<p>but get the following error TypeError: 'bool' object is not callable</p>\n"}, {"tags": ["python", "exec", "system-calls", "rethinkdb", "execvp"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6087399"}, "edited": false, "score": 0, "creation_date": 1459376093, "post_id": 36320678, "comment_id": 60264704, "body": "It says <code>ERROR: Unrecognized subcommand &#39;~&#47;ComeOnRethink&#39;. Try &#39;rethinkdb help&#39;.</code>"}, {"owner": {"reputation": 16376, "user_id": 2009616, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oiCJA.jpg?s=128&g=1", "display_name": "isedev", "link": "https://stackoverflow.com/users/2009616/isedev"}, "edited": false, "score": 0, "creation_date": 1459376296, "post_id": 36320678, "comment_id": 60264784, "body": "right... I focused on the syntax of <code>os.execvp</code>. The other problem you have is that the shell expands <code>~</code> to the current user&#39;s home directory; that is something that <code>os.execvp</code> won&#39;t do for you."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6087399"}, "edited": false, "score": 0, "creation_date": 1459376849, "post_id": 36320678, "comment_id": 60264994, "body": "It says <code>ERROR: Unrecognized subcommand &#39;.&#47;ComeOnRethink&#39;. Try &#39;rethinkdb help&#39;.</code> Did you really try?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6087399"}, "edited": false, "score": 0, "creation_date": 1459377197, "post_id": 36320678, "comment_id": 60265133, "body": "My problem is <code>COMMAND ARGUMENT</code> is working but <code>COMMAND ARGUMENT VALUE</code> is not working."}, {"owner": {"reputation": 16376, "user_id": 2009616, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oiCJA.jpg?s=128&g=1", "display_name": "isedev", "link": "https://stackoverflow.com/users/2009616/isedev"}, "edited": false, "score": 1, "creation_date": 1459377591, "post_id": 36320678, "comment_id": 60265283, "body": "out of practice... the first argument (in <code>args</code>) should be the actual command name. Corrected."}, {"owner": {"reputation": 1485, "user_id": 2272034, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d7f53af38b80673d3558db56c12102bf?s=128&d=identicon&r=PG&f=1", "display_name": "BluePython", "link": "https://stackoverflow.com/users/2272034/bluepython"}, "edited": false, "score": 0, "creation_date": 1511148821, "post_id": 36320678, "comment_id": 81722224, "body": "Why in the world do you need to repeat the command name in args!? Pretty confusing....any explanations?"}, {"owner": {"reputation": 16376, "user_id": 2009616, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oiCJA.jpg?s=128&g=1", "display_name": "isedev", "link": "https://stackoverflow.com/users/2009616/isedev"}, "reply_to_user": {"reputation": 1485, "user_id": 2272034, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d7f53af38b80673d3558db56c12102bf?s=128&d=identicon&r=PG&f=1", "display_name": "BluePython", "link": "https://stackoverflow.com/users/2272034/bluepython"}, "edited": false, "score": 0, "creation_date": 1511804721, "post_id": 36320678, "comment_id": 81989713, "body": "@BluePython The first argument is the path to the executable itself (which must be a valid path), the second argument is the first argument in the executed process <code>argv</code> array (i.e. <code>sys.argv[0]</code> in Python). They are not strictly required to be the same but in practice they are the same more often than not."}], "tags": [], "owner": {"reputation": 16376, "user_id": 2009616, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oiCJA.jpg?s=128&g=1", "display_name": "isedev", "link": "https://stackoverflow.com/users/2009616/isedev"}, "is_accepted": true, "score": 1, "last_activity_date": 1459377669, "last_edit_date": 1459377669, "creation_date": 1459375989, "answer_id": 36320678, "question_id": 36320643, "link": "https://stackoverflow.com/questions/36320643/how-to-pass-a-directory-path-to-os-execvp/36320678#36320678", "title": "How to pass a directory path to os.execvp", "body": "<p>Try this:</p>\n\n<pre><code>import os.path\nargs = [\"rethinkdb\", \"--directory\", os.path.expanduser(\"~/ComeOnRethink\")]\nos.execvp(\"rethinkdb\", args) # assumes 'rethinkdb' can be found in a directory listed in the PATH environment variable\n</code></pre>\n\n<p><code>args</code> should be an iterable of command line words (as parsed by the shell, including the command name).</p>\n\n<p><code>os.path.expanduser</code> will replace the <code>~</code> in the path argument to the user's home directory (which is something <code>bash</code> does for you).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6087399"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 953, "favorite_count": 0, "accepted_answer_id": 36320678, "answer_count": 1, "score": 0, "last_activity_date": 1459377669, "creation_date": 1459375841, "last_edit_date": 1459377630, "question_id": 36320643, "link": "https://stackoverflow.com/questions/36320643/how-to-pass-a-directory-path-to-os-execvp", "title": "How to pass a directory path to os.execvp", "body": "<p>I'm trying to <a href=\"https://rethinkdb.com/docs/cli-options/\" rel=\"nofollow\">change directory path of RethinkDB</a> while executing from Python.</p>\n\n<p>This Bash command is working:</p>\n\n<pre><code>rethinkdb --directory ~/ComeOnRethink\n</code></pre>\n\n<p>But this system call is not working:</p>\n\n<pre><code>args = (\"--directory ~/ComeOnRethink\",) # RethinkDB directory to store data and metadata\nos.execvp(\"rethinkdb\", args)\n</code></pre>\n\n<p>It's ignoring the argument and executing RethinkDB with default path. How can I fix this problem?</p>\n\n<p>*This is working:</p>\n\n<pre><code>subprocess.Popen(['rethinkdb', '--directory', './ComeOnRethink'])\n</code></pre>\n"}, {"tags": ["python", "function"], "comments": [{"owner": {"reputation": 4852, "user_id": 5296568, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/25003db0bef370470e0f669a542960f8?s=128&d=identicon&r=PG&f=1", "display_name": "Maximilian Gerhardt", "link": "https://stackoverflow.com/users/5296568/maximilian-gerhardt"}, "edited": false, "score": 0, "creation_date": 1459375633, "post_id": 36320574, "comment_id": 60264520, "body": "Initialize <code>total</code> to <code>1</code> and do <code>total *= f(i)</code> instead of the <code>+=</code> operator?"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459375934, "post_id": 36320614, "comment_id": 60264636, "body": "then would you print product and then pass the three values or?"}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "reply_to_user": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459375969, "post_id": 36320614, "comment_id": 60264652, "body": "@TurtleDave: It would have the same usage as <code>sum()</code>."}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "reply_to_user": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459376389, "post_id": 36320614, "comment_id": 60264821, "body": "@TurtleDave: It should be <code>print product(f, 1, 5)</code>.  I changed the name."}], "tags": [], "owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "is_accepted": false, "score": 0, "last_activity_date": 1459376361, "last_edit_date": 1459376361, "creation_date": 1459375693, "answer_id": 36320614, "question_id": 36320574, "link": "https://stackoverflow.com/questions/36320574/how-i-do-i-change-this-code-so-it-can-deal-with-functions/36320614#36320614", "title": "How i do i change this code so it can deal with functions", "body": "<p>Just as adding 0 does nothing, multiplying by 1 does nothing.  Therefore, just use that as the start:</p>\n\n<pre><code>def product(f, a, b):\n    total = 1\n    for i in range(a, b+1):\n        total *= f(i)\n    return total\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8341, "user_id": 3014866, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/epfow.jpg?s=128&g=1", "display_name": "Rudzianko\u016d", "link": "https://stackoverflow.com/users/3014866/rudzianko%c5%ad"}, "edited": false, "score": 0, "creation_date": 1459376611, "post_id": 36320620, "comment_id": 60264894, "body": "@CoryKramer, upvoited you, I used some of you code for my answer"}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 1, "last_activity_date": 1459375721, "creation_date": 1459375721, "answer_id": 36320620, "question_id": 36320574, "link": "https://stackoverflow.com/questions/36320574/how-i-do-i-change-this-code-so-it-can-deal-with-functions/36320620#36320620", "title": "How i do i change this code so it can deal with functions", "body": "<p>Similar idea, but use <code>*=</code> instead of <code>+=</code></p>\n\n<pre><code>def product(f, a, b):\n    total = 1\n    for i in range(a, b+1):\n        total *= f(i)\n    return total\n</code></pre>\n\n<p>For example</p>\n\n<pre><code>def foo(x):\n    return x\n\n&gt;&gt;&gt; product(foo, 1, 5)\n120\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459376304, "post_id": 36320701, "comment_id": 60264789, "body": "how would i print the answer?"}, {"owner": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459376713, "post_id": 36320701, "comment_id": 60264936, "body": "Okay i dont understand the concept of the def spam part? Once you define the product do you def spam after?"}, {"owner": {"reputation": 8341, "user_id": 3014866, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/epfow.jpg?s=128&g=1", "display_name": "Rudzianko\u016d", "link": "https://stackoverflow.com/users/3014866/rudzianko%c5%ad"}, "reply_to_user": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459376900, "post_id": 36320701, "comment_id": 60265021, "body": "because <code>f(n)</code> is function here, which you pass to you methods <code>sum</code> or <code>product</code> like you pass <code>int</code> a and b. So you have to define function to pass it"}, {"owner": {"reputation": 8341, "user_id": 3014866, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/epfow.jpg?s=128&g=1", "display_name": "Rudzianko\u016d", "link": "https://stackoverflow.com/users/3014866/rudzianko%c5%ad"}, "reply_to_user": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459377145, "post_id": 36320701, "comment_id": 60265110, "body": "but I don&#39;t know what you pass function for. To count product you will be fine w/o <code>f</code>: <code>def product(a, b):     return reduce(lambda x, y: x*y, [n for n in range(a, b+1)])</code>"}, {"owner": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459377415, "post_id": 36320701, "comment_id": 60265220, "body": "No i dont understand how to run this in python, when i try defining then printing it is just saying syntax error"}, {"owner": {"reputation": 8341, "user_id": 3014866, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/epfow.jpg?s=128&g=1", "display_name": "Rudzianko\u016d", "link": "https://stackoverflow.com/users/3014866/rudzianko%c5%ad"}, "reply_to_user": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459377517, "post_id": 36320701, "comment_id": 60265253, "body": "You tried this? <code>def product(a, b): return reduce(lambda x, y: x*y, [n for n in range(a, b+1)])</code>"}, {"owner": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459377632, "post_id": 36320701, "comment_id": 60265299, "body": "Yeah, what do i do after i have put that in python?"}, {"owner": {"reputation": 8341, "user_id": 3014866, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/epfow.jpg?s=128&g=1", "display_name": "Rudzianko\u016d", "link": "https://stackoverflow.com/users/3014866/rudzianko%c5%ad"}, "reply_to_user": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459377700, "post_id": 36320701, "comment_id": 60265326, "body": "eg put also <code>print(product(1,5))</code>"}, {"owner": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459377992, "post_id": 36320701, "comment_id": 60265406, "body": "Yeah i have done this, still get syntax i just think python hates me XD"}, {"owner": {"reputation": 8341, "user_id": 3014866, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/epfow.jpg?s=128&g=1", "display_name": "Rudzianko\u016d", "link": "https://stackoverflow.com/users/3014866/rudzianko%c5%ad"}, "reply_to_user": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459378250, "post_id": 36320701, "comment_id": 60265505, "body": "I edited answer. It tested, It works. Hope it will help"}, {"owner": {"reputation": 8341, "user_id": 3014866, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/epfow.jpg?s=128&g=1", "display_name": "Rudzianko\u016d", "link": "https://stackoverflow.com/users/3014866/rudzianko%c5%ad"}, "reply_to_user": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459378502, "post_id": 36320701, "comment_id": 60265598, "body": "Sorry, @TurtleDave, you have to read something before start with Python. Indentation in Python is very important. You hit syntax errors because you don&#39;t know syntax of Python.  youtube.com/watch?v=Cd-k6QQMa18"}, {"owner": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459379193, "post_id": 36320701, "comment_id": 60265841, "body": "Thanks so much :)! I got it working.  How would i change the code so that function became factorial?  \ud835\udc53(\ud835\udc65) means f(1)*f(2)*f(3)??"}, {"owner": {"reputation": 8341, "user_id": 3014866, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/epfow.jpg?s=128&g=1", "display_name": "Rudzianko\u016d", "link": "https://stackoverflow.com/users/3014866/rudzianko%c5%ad"}, "reply_to_user": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459404817, "post_id": 36320701, "comment_id": 60273552, "body": "it&#39;s already factorial. product of list of values between <code>a</code> and <code>b</code> eg between 1 and 5 [1,2,3,4,5] = 120"}, {"owner": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "edited": false, "score": 0, "creation_date": 1459422934, "post_id": 36320701, "comment_id": 60285605, "body": "So if i used this as my code def product(f, a, b):     total = 1     for i in range(a, b+1):         total *= f(i)     return total.       How would i change this to calculate the sum??"}], "tags": [], "owner": {"reputation": 8341, "user_id": 3014866, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/epfow.jpg?s=128&g=1", "display_name": "Rudzianko\u016d", "link": "https://stackoverflow.com/users/3014866/rudzianko%c5%ad"}, "is_accepted": false, "score": 0, "last_activity_date": 1459378313, "last_edit_date": 1459378313, "creation_date": 1459376101, "answer_id": 36320701, "question_id": 36320574, "link": "https://stackoverflow.com/questions/36320574/how-i-do-i-change-this-code-so-it-can-deal-with-functions/36320701#36320701", "title": "How i do i change this code so it can deal with functions", "body": "<p>Or use a functional style and you will come to success:</p>\n\n<pre><code>def product(f, a, b):\n    return reduce(lambda x, y: x*y, [f(n) for n in range(a, b+1)])\n</code></pre>\n\n<hr>\n\n<p>Run it going with function eg <code>spam</code>:</p>\n\n<pre><code>def spam(x):\n    return x\n\nprint(product(spam, 1, 3))\n\n&gt;&gt;&gt;6\n</code></pre>\n\n<p><strong>Edited:</strong></p>\n\n<p>W/o <code>f</code> param it will looks:</p>\n\n<pre><code>def product(a, b):\n    return reduce(lambda x, y: x*y, [n for n in range(a, b+1)])\nprint(product(1, 5))\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6130288, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b712762a4347571f639ce9b0346bba1c?s=128&d=identicon&r=PG&f=1", "display_name": "TurtleDave", "link": "https://stackoverflow.com/users/6130288/turtledave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1459381004, "creation_date": 1459375483, "last_edit_date": 1459381004, "question_id": 36320574, "link": "https://stackoverflow.com/questions/36320574/how-i-do-i-change-this-code-so-it-can-deal-with-functions", "title": "How i do i change this code so it can deal with functions", "body": "<p>The function below takes 3 parameters (f, a, and b). Here f is a function and a and b are lower and\nupper bounds respectively, and f is the function to be summed over. #to calculate the sum of f from a to b</p>\n\n<pre><code>def sum(f, a, b):\n total = 0\n for i in range(a, b+1):\n total += f(i)\n return total\n</code></pre>\n\n<p>Question 1. Type in the above code and calculate the sum of integers from 1 to 10, and 1 to 100 and\n1 to 1000</p>\n"}, {"tags": ["python", "oop"], "answers": [{"comments": [{"owner": {"reputation": 37387, "user_id": 137650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418a42c29b040f2e0a51eea5330e2b7f?s=128&d=identicon&r=PG", "display_name": "MatsLindh", "link": "https://stackoverflow.com/users/137650/matslindh"}, "edited": false, "score": 0, "creation_date": 1459375558, "post_id": 36320572, "comment_id": 60264485, "body": "And to explain: You&#39;ll have to keep track of &quot;it has been read&quot; some way, and a flag is a perfectly clear way to communicate exactly that. Don&#39;t do magic stuff just for the magic."}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 0, "creation_date": 1459376184, "post_id": 36320572, "comment_id": 60264731, "body": "this is fine, except that a class method is cleaner IMO, no? If yes, update your answer and I&#39;ll delete mine. I&#39;ve already upvoted yours"}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1459376914, "post_id": 36320572, "comment_id": 60265024, "body": "A classmethod does not work with inheritance. When you make an instance of <code>awk</code> first it creates <code>awk.populated = True</code>. Then when you make an instance of <code>car</code>, <code>car.populated</code> is still false and the specs will be read a second time."}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 0, "creation_date": 1459377400, "post_id": 36320572, "comment_id": 60265214, "body": "Oh, really? So the scope of class level variables is only the one of its direct instances? Wow, didn&#39;t know that!"}], "tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": true, "score": 2, "last_activity_date": 1459375472, "creation_date": 1459375472, "answer_id": 36320572, "question_id": 36320514, "link": "https://stackoverflow.com/questions/36320514/how-to-restrict-base-class-method-to-be-run-only-once/36320572#36320572", "title": "How to restrict base class method to be run only once", "body": "<p>Just use a flag:</p>\n\n<pre><code>class car(object):\n    db_read = False\n    def read_spec_and_populate_db():\n        if not car.db_read:\n            spec = read_from_file(spec.yaml)\n            populate_db(spec)\n            car.db_read = True\n</code></pre>\n\n<p>Now you can call <code>read_spec_and_populate_db()</code> as many times as you\nwant. It does its work only once.</p>\n"}, {"comments": [{"owner": {"reputation": 3941, "user_id": 1226066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07a07156fae305353d13c74f04c8125?s=128&d=identicon&r=PG&f=1", "display_name": "s16h", "link": "https://stackoverflow.com/users/1226066/s16h"}, "reply_to_user": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 0, "creation_date": 1459376415, "post_id": 36320594, "comment_id": 60264830, "body": "Just out of interest, did you downvote because of that?"}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 0, "creation_date": 1459376934, "post_id": 36320594, "comment_id": 60265031, "body": "yes, because I don&#39;t see the point of having twice the same answer."}], "tags": [], "owner": {"reputation": 3941, "user_id": 1226066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07a07156fae305353d13c74f04c8125?s=128&d=identicon&r=PG&f=1", "display_name": "s16h", "link": "https://stackoverflow.com/users/1226066/s16h"}, "is_accepted": false, "score": 0, "last_activity_date": 1459375597, "creation_date": 1459375597, "answer_id": 36320594, "question_id": 36320514, "link": "https://stackoverflow.com/questions/36320514/how-to-restrict-base-class-method-to-be-run-only-once/36320594#36320594", "title": "How to restrict base class method to be run only once", "body": "<p>You can use a boolean class attribute flag to keep track of whether the method has been run already or not, like so:</p>\n\n<pre><code>class Car(object):\n    _populated_db = False\n\n    def read_spec_and_populate_db(self):\n        if not self._populated_db:\n            spec = read_from_file(spec.yaml)\n            populate_db(spec)\n            self._populated_db = True\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 2722664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dOdMV.png?s=128&g=1", "display_name": "0xcurb", "link": "https://stackoverflow.com/users/2722664/0xcurb"}, "is_accepted": false, "score": -1, "last_activity_date": 1459377493, "creation_date": 1459377493, "answer_id": 36320990, "question_id": 36320514, "link": "https://stackoverflow.com/questions/36320514/how-to-restrict-base-class-method-to-be-run-only-once/36320990#36320990", "title": "How to restrict base class method to be run only once", "body": "<p>One thought might be reassigning the name <code>read_spec_and_populate_db</code>, as the last step in its execution, to point to a method with the same signature but does nothing</p>\n\n<pre><code>class car(object):\n    def _dummy(self):\n        pass\n\n    def read_spec_and_populate_db(self):\n        spec = read_from_file(spec.yaml)\n        populate_db(spec)\n\n        self.read_spec_and_populate_db = self._dummy\n</code></pre>\n"}], "owner": {"reputation": 993, "user_id": 802731, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/220b5bdd1e02c5e18967da11a64a69fb?s=128&d=identicon&r=PG", "display_name": "iobelix", "link": "https://stackoverflow.com/users/802731/iobelix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 36320572, "answer_count": 3, "score": 1, "last_activity_date": 1459377493, "creation_date": 1459375228, "last_edit_date": 1495541751, "question_id": 36320514, "link": "https://stackoverflow.com/questions/36320514/how-to-restrict-base-class-method-to-be-run-only-once", "title": "How to restrict base class method to be run only once", "body": "<pre><code>class car(object):\n    def read_spec_and_populate_db():\n        spec = read_from_file(spec.yaml)\n        populate_db(spec)\n\nclass awd(car):\n    super(awd, self).read_spec_and_populate_db()\n\n    def foo(self):\n    ...\n\nclass fwd(car):\n    super(fwd, self).read_spec_and_populate_db()\n\n    def bar(self):\n    ...\n</code></pre>\n\n<p>Class <code>awd</code> and <code>fwd</code> can be instantiated at different times or only one of them can be instantiated. Now, is there a way to restrict the base class method read_spec_and_populate_db() to be executed only once?</p>\n\n<p>I did lookup in SO and found <a href=\"https://stackoverflow.com/questions/4103773/efficient-way-of-having-a-function-only-execute-once-in-a-loop\">here</a>. Wanted to see if there are any other option. </p>\n\n<p>Edit: Not that I'm against it. I'm looking for ideas apart from using a flag. My current implementation is using a flag in the class.</p>\n"}, {"tags": ["python", "xml"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1459375881, "post_id": 36320484, "comment_id": 60264610, "body": "Please use a more descriptive title. Also, <code>xlmx</code> isn&#39;t a thing."}], "answers": [{"tags": [], "owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "is_accepted": true, "score": 7, "last_activity_date": 1459377755, "creation_date": 1459377755, "answer_id": 36321035, "question_id": 36320484, "link": "https://stackoverflow.com/questions/36320484/adding-comments-to-xml-documents/36321035#36321035", "title": "Adding comments to xml documents", "body": "<p>To insert a comment you can do this, after your code:</p>\n\n<pre><code>comment = etree.Comment(' === Some Comment === ')\nroot.insert(1, comment)  # 1 is the index where comment is inserted\n</code></pre>\n\n<p>If you want to add spaces, for instance in the tail of the <code>nodes</code> element, <a href=\"http://lxml.de/FAQ.html#why-doesn-t-the-pretty-print-option-reformat-my-xml-output\" rel=\"noreferrer\">that may mess with prettyprint</a>, because once there is text in tails it won't know where to add whitespace safely. I suppose you could use the same technique as <code>indent</code>, from <a href=\"http://effbot.org/zone/element-lib.htm\" rel=\"noreferrer\">ElementLib</a>.</p>\n"}], "owner": {"reputation": 1025, "user_id": 3449019, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/hVAtP.jpg?s=128&g=1", "display_name": "Nobi", "link": "https://stackoverflow.com/users/3449019/nobi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7085, "favorite_count": 0, "accepted_answer_id": 36321035, "answer_count": 1, "score": 2, "last_activity_date": 1547732337, "creation_date": 1459375125, "last_edit_date": 1547732337, "question_id": 36320484, "link": "https://stackoverflow.com/questions/36320484/adding-comments-to-xml-documents", "title": "Adding comments to xml documents", "body": "<p>Code:</p>\n\n<pre><code>from lxml import etree\n\n# Create the network XML file tree\nroot = etree.Element('network')\ntree = etree.ElementTree(root)\n\n# Create the nodes data\nname = etree.Element('nodes')\nroot.append(name)\nelement = etree.SubElement(name, 'node')\nelement.set('id', '1')\n\n# Create the links data\nname = etree.Element('links')\nroot.append(name)\nelement = etree.SubElement(name, 'link')\nelement.set('id', '2')\n\n# Print document to screen\nprint etree.tostring(root, encoding='UTF-8', xml_declaration=True, pretty_print=True)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;network&gt;\n  &lt;nodes&gt;\n    &lt;node id=\"1\"/&gt;\n  &lt;/nodes&gt;\n  &lt;links&gt;\n    &lt;link id=\"2\"/&gt;\n  &lt;/links&gt;\n&lt;/network&gt;\n</code></pre>\n\n<p>The code above produces this output. However, apart from the declaration which is used as arguments in the tostring() method and printed at the top of the document. I am yet to figure out how to make comments visible if you want them say midway in the document. I have seen earlier posts like <a href=\"http://stackoverflow.com/questions/4474754/how-to-keep-comments-while-parsing-xml-using-python-elementtree\">this</a>, but it didn't answer my question.  Can someone help me with how I can do this: </p>\n\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n    &lt;network&gt;\n      &lt;nodes&gt;\n        &lt;node id=\"1\"/&gt;\n      &lt;/nodes&gt;\n\n         &lt;!-- ==============Some Comment============================= --&gt;\n\n      &lt;links&gt;\n        &lt;link id=\"2\"/&gt;\n      &lt;/links&gt;\n    &lt;/network&gt;\n</code></pre>\n\n<p>Thank you for your time</p>\n"}, {"tags": ["python", "python-3.x", "signals", "posix"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1459375718, "post_id": 36320473, "comment_id": 60264556, "body": "Relevant bug in the Python tracker: <a href=\"http://bugs.python.org/issue26351\" rel=\"nofollow noreferrer\">bugs.python.org/issue26351</a>"}], "answers": [{"comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1459375609, "post_id": 36320558, "comment_id": 60264503, "body": "Indeed. <code>list(itertools.repeat(&#39;x&#39;))</code> also hangs the interpreter, but putting it in the background and sending a plain <code>TERM</code> signal does kill the interpreter correctly."}, {"owner": {"reputation": 1019, "user_id": 3969102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b3e3966476f87983329218a63323705?s=128&d=identicon&r=PG&f=1", "display_name": "A.P.", "link": "https://stackoverflow.com/users/3969102/a-p"}, "edited": false, "score": 0, "creation_date": 1459377013, "post_id": 36320558, "comment_id": 60265062, "body": "I agree. I initially thought the hanging had to do with memory allocation.  However the memory usage doesn&#39;t grow for <code>list(itertools.groupby(itertools.repeat(1))</code> and it hangs the interpreter as well."}], "tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 10, "last_activity_date": 1459375510, "last_edit_date": 1459375510, "creation_date": 1459375398, "answer_id": 36320558, "question_id": 36320473, "link": "https://stackoverflow.com/questions/36320473/why-cant-i-break-out-of-this-itertools-infinite-loop/36320558#36320558", "title": "Why can&#39;t I break out of this itertools infinite loop?", "body": "<p>The <code>KeyboardInterrupt</code> is checked after each Python instruction. <code>itertools.repeat</code> and the tuple generation is handled in C Code. The interrupt is handled afterwards, i.e. never.</p>\n"}], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 36320558, "answer_count": 1, "score": 11, "last_activity_date": 1459375510, "creation_date": 1459375069, "question_id": 36320473, "link": "https://stackoverflow.com/questions/36320473/why-cant-i-break-out-of-this-itertools-infinite-loop", "title": "Why can&#39;t I break out of this itertools infinite loop?", "body": "<p>In the REPL, we can usually interrupt an infinite loop with a sigint, i.e. <kbd>ctrl</kbd>+<kbd>c</kbd>, and regain control in the interpreter.</p>\n\n<pre><code>&gt;&gt;&gt; while True: pass\n... \n^CTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nKeyboardInterrupt\n&gt;&gt;&gt;\n</code></pre>\n\n<p>But in this loop, the interrupt seems to be blocked and I have to kill the parent process to escape.  </p>\n\n<pre><code>&gt;&gt;&gt; *x, = itertools.repeat('x')\n^C^C^C^C^C^C^C^C^\\^\\^\\^\\^\\^Z^Z^Z^Z\n</code></pre>\n\n<p>Why is that?</p>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 2, "creation_date": 1459374930, "post_id": 36320427, "comment_id": 60264205, "body": "I don&#39;t think there is; the <code>type</code> of an argument can be any arbitrary conversion function, you&#39;d have to create an inverse for each of those."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1459374952, "post_id": 36320427, "comment_id": 60264218, "body": "What are you trying to achieve? Can&#39;t you access whatever you&#39;re trying to call more directly?"}, {"owner": {"reputation": 1159, "user_id": 1294423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59e9d4f8bec370afd6e0bbb0906397c7?s=128&d=identicon&r=PG", "display_name": "Gavin S. Yancey", "link": "https://stackoverflow.com/users/1294423/gavin-s-yancey"}, "edited": false, "score": 0, "creation_date": 1593467504, "post_id": 36320427, "comment_id": 110787189, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/33775494/argparse-build-back-command-line\">argparse - Build back command line</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1565, "user_id": 404792, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da3f9970b2386b804182e4473dfb42e8?s=128&d=identicon&r=PG", "display_name": "heyitsbmo", "link": "https://stackoverflow.com/users/404792/heyitsbmo"}, "edited": false, "score": 0, "creation_date": 1459406417, "post_id": 36320732, "comment_id": 60274350, "body": "I&#39;m looking for a general answer, not one for this specific example."}, {"owner": {"reputation": 512, "user_id": 4941927, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-DuE3ITipXDQ/AAAAAAAAAAI/AAAAAAAAADE/0N-SjjYYn2E/photo.jpg?sz=128", "display_name": "Milor123", "link": "https://stackoverflow.com/users/4941927/milor123"}, "reply_to_user": {"reputation": 1565, "user_id": 404792, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da3f9970b2386b804182e4473dfb42e8?s=128&d=identicon&r=PG", "display_name": "heyitsbmo", "link": "https://stackoverflow.com/users/404792/heyitsbmo"}, "edited": false, "score": 0, "creation_date": 1459426818, "post_id": 36320732, "comment_id": 60288477, "body": "@BenMorris what is exactly do you need??  :D"}], "tags": [], "owner": {"reputation": 512, "user_id": 4941927, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-DuE3ITipXDQ/AAAAAAAAAAI/AAAAAAAAADE/0N-SjjYYn2E/photo.jpg?sz=128", "display_name": "Milor123", "link": "https://stackoverflow.com/users/4941927/milor123"}, "is_accepted": false, "score": 0, "last_activity_date": 1459376757, "last_edit_date": 1459376757, "creation_date": 1459376262, "answer_id": 36320732, "question_id": 36320427, "link": "https://stackoverflow.com/questions/36320427/create-arg-string-from-argumentparser-parsed-args-in-python/36320732#36320732", "title": "Create arg string from ArgumentParser parsed args in Python", "body": "<p>delete args from parser.parse_args(args)</p>\n\n<p>args[1] == example</p>\n\n<p>args[2] == string number</p>\n\n<p>args.example == int number</p>\n\n<pre><code>from sys import argv\nparser = argparse.ArgumentParser()\nparser.add_argument('--example', type=int, default=0 )\nargs = parser.parse_args()\nprint ([argv[1],args.example*2])\n</code></pre>\n\n<p>then</p>\n\n<pre><code>python my_program.py --example 1\n&gt;&gt;&gt;['--example', 2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 3, "last_activity_date": 1459378239, "last_edit_date": 1495542728, "creation_date": 1459376785, "answer_id": 36320848, "question_id": 36320427, "link": "https://stackoverflow.com/questions/36320427/create-arg-string-from-argumentparser-parsed-args-in-python/36320848#36320848", "title": "Create arg string from ArgumentParser parsed args in Python", "body": "<p>I think this has been asked before, though I'm not sure of a good search term.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/33775494/argparse-build-back-command-line\">argparse - Build back command line</a>   (found by searching on argparse and sys.argv)</p>\n\n<p>Before we get too far into this question, lets be clear.  <code>args=parser.parse_args()</code> is the same as <code>args=parser.parse_args(sys.argv[1:])</code>.  But I can imagine cases where you like to know what <code>sys.argv[1:]</code> would produce some arbitrary <code>args</code>.  Maybe for testing, maybe for driving someone else's code. </p>\n\n<p>There isn't any code in <code>argparse</code> that does this.  But for a limited set of cases you could take information from the defined Actions, and create a plausible <code>sys.argv</code>.</p>\n\n<pre><code>In [432]: parser = argparse.ArgumentParser()    \nIn [433]: parser.add_argument('--example', type=int, default=0)\nOut[433]: _StoreAction(option_strings=['--example'], dest='example', nargs=None, const=None, default=0, type=&lt;type 'int'&gt;, choices=None, help=None, metavar=None)\n</code></pre>\n\n<p>The list of defined Actions:</p>\n\n<pre><code>In [435]: parser._actions\nOut[435]: \n[_HelpAction(option_strings=['-h', '--help'], dest='help', nargs=0, const=None, default='==SUPPRESS==', type=None, choices=None, help='show this help message and exit', metavar=None),\n _StoreAction(option_strings=['--example'], dest='example', nargs=None, const=None, default=0, type=&lt;type 'int'&gt;, choices=None, help=None, metavar=None)]\n</code></pre>\n\n<p>select the one of interest, and look at some of its attributes:</p>\n\n<pre><code>In [436]: a1=parser._actions[-1]\nIn [437]: a1.type\nOut[437]: int\nIn [438]: a1.default\nOut[438]: 0\n</code></pre>\n\n<p>Now generate <code>args</code>:</p>\n\n<pre><code>In [439]: args=parser.parse_args(['--example','1'])    \nIn [440]: args\nOut[440]: Namespace(example=1)\nIn [441]: args.example *= 2\n</code></pre>\n\n<p>A simple example of creating a list using the new <code>args</code> and information from the Action.  Obviously the working code needs to deduce which action to use.  For the most common types <code>str()</code> is enough.</p>\n\n<pre><code>In [442]: if args.example != a1.default:\n   .....:     print(['--example',str(args.example)])\n   .....:     \n['--example', '2']\n</code></pre>\n\n<p>Or I could play with the <code>metavar</code> attribute, and the <code>usage</code> formatter:</p>\n\n<pre><code>In [445]: a1.metavar=str(args.example)\nIn [446]: parser.print_usage()\nusage: ipython2.7 [-h] [--example 2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 873, "user_id": 4561056, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/91cbad687f02527923478c2d3f26371f?s=128&d=identicon&r=PG&f=1", "display_name": "NWaters", "link": "https://stackoverflow.com/users/4561056/nwaters"}, "is_accepted": false, "score": 1, "last_activity_date": 1527589851, "creation_date": 1527589851, "answer_id": 50582131, "question_id": 36320427, "link": "https://stackoverflow.com/questions/36320427/create-arg-string-from-argumentparser-parsed-args-in-python/50582131#50582131", "title": "Create arg string from ArgumentParser parsed args in Python", "body": "<p>I ended up in a situation needing this, and here was my solution.  It assumes that you know what positional arguments are expected.  Definitely not foolproof, but it works for me.</p>\n\n<pre><code>def simulate_args_from_namespace(n, positional=[]):\n    \"\"\" check an argparse namespace against a module's get_args method.\n    Ideally, there would be something built in to argparse, but no such luck.\n    This tries to reconstruct the arg list that argparse.parse_args would expect\n    \"\"\"\n    arg_list = [[k, v] for k, v in sorted(vars(n).items())]\n    argparse_formatted_list = []\n    for l in arg_list:\n        ####  deal with flag arguments (store true/false)\n        if l[1] == True:\n            argparse_formatted_list.append(\"--{}\".format(l[0]))\n        elif l[1] == False or l[1] is None:\n            pass  # dont add this arg\n        # add positional argments\n        elif l[0] in positional:\n            argparse_formatted_list.append(str(l[0]))\n        # add the named arguments\n        else:\n            argparse_formatted_list.append(\"--{}\".format(l[0]))\n            argparse_formatted_list.append(str(l[1]))\n    return argparse_formatted_list\n</code></pre>\n"}], "owner": {"reputation": 1565, "user_id": 404792, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da3f9970b2386b804182e4473dfb42e8?s=128&d=identicon&r=PG", "display_name": "heyitsbmo", "link": "https://stackoverflow.com/users/404792/heyitsbmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3261, "favorite_count": 1, "accepted_answer_id": 36320848, "answer_count": 3, "score": 6, "last_activity_date": 1527589851, "creation_date": 1459374827, "question_id": 36320427, "link": "https://stackoverflow.com/questions/36320427/create-arg-string-from-argumentparser-parsed-args-in-python", "title": "Create arg string from ArgumentParser parsed args in Python", "body": "<p>If I have an <code>argparser.ArgumentParser</code>, plus a namespace returned from <code>parser.parse_args</code>, is there a simple way to convert the namespace back into a list of argv such that they could be passed back to the program? Essentially, is there an inverse function of parse_args?</p>\n\n<p>An example scenario:</p>\n\n<pre><code>parser = argparse.ArgumentParser()\nparser.add_argument('--example', type=int, default=0)\nargs = parser.parse_args(argv)\n\nargs.example *= 2\nnew_argv = parser.generate_argv(args)\n</code></pre>\n\n<p>So if I call:</p>\n\n<pre><code>python my_program.py --example 1\n</code></pre>\n\n<p>I would want back:</p>\n\n<pre><code>new_argv = ['--example', '2']\n</code></pre>\n"}, {"tags": ["python", "hadoop", "apache-spark", "pyspark", "bigdata"], "answers": [{"comments": [{"owner": {"reputation": 741, "user_id": 1340048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/045f608e4bba11dd4686ed0d039fc3d7?s=128&d=identicon&r=PG", "display_name": "GreatGather", "link": "https://stackoverflow.com/users/1340048/greatgather"}, "edited": false, "score": 0, "creation_date": 1459377102, "post_id": 36320631, "comment_id": 60265089, "body": "does this method only work with IndexedRowMatrix? Or is also available for RowMatrix?"}, {"owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "reply_to_user": {"reputation": 741, "user_id": 1340048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/045f608e4bba11dd4686ed0d039fc3d7?s=128&d=identicon&r=PG", "display_name": "GreatGather", "link": "https://stackoverflow.com/users/1340048/greatgather"}, "edited": false, "score": 0, "creation_date": 1459395213, "post_id": 36320631, "comment_id": 60270177, "body": "Only <code>IndexedRowMatrix</code>, but it shouldn&#39;t be  hard to make this code work on <code>RowMatrix</code> as well."}], "tags": [], "owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "is_accepted": true, "score": 2, "last_activity_date": 1459375787, "creation_date": 1459375787, "answer_id": 36320631, "question_id": 36320417, "link": "https://stackoverflow.com/questions/36320417/cant-access-rowmatrix-methods-in-pyspark-columnsimilarities-computecolumnsu/36320631#36320631", "title": "Can&#39;t access RowMatrix methods in PySpark: columnSimilarities(), computeColumnSummaryStatistics()", "body": "<p>You cannot access these methods because as for now (Spark 1.6) these are not implemented in PySpark.</p>\n\n<p><code>IndexedRowMatrix.columnSimilarities</code> (see <a href=\"https://issues.apache.org/jira/browse/SPARK-12041\" rel=\"nofollow\">SPARK-12041</a>) is available in the current master but to use it you'll have to build Spark from source.</p>\n"}], "owner": {"reputation": 741, "user_id": 1340048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/045f608e4bba11dd4686ed0d039fc3d7?s=128&d=identicon&r=PG", "display_name": "GreatGather", "link": "https://stackoverflow.com/users/1340048/greatgather"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 950, "favorite_count": 0, "accepted_answer_id": 36320631, "answer_count": 1, "score": 4, "last_activity_date": 1505971166, "creation_date": 1459374761, "last_edit_date": 1506102531, "question_id": 36320417, "link": "https://stackoverflow.com/questions/36320417/cant-access-rowmatrix-methods-in-pyspark-columnsimilarities-computecolumnsu", "title": "Can&#39;t access RowMatrix methods in PySpark: columnSimilarities(), computeColumnSummaryStatistics()", "body": "<p>I am trying to use the functions columnSimilarities(), computeColumnSummaryStatistics()</p>\n\n<ul>\n<li>Especially the columnSimilarities() function mentioned in this post:</li>\n</ul>\n\n<blockquote>\n  <p><a href=\"https://databricks.com/blog/2014/10/20/efficient-similarity-algorithm-now-in-spark-twitter.html\" rel=\"nofollow\">https://databricks.com/blog/2014/10/20/efficient-similarity-algorithm-now-in-spark-twitter.html</a></p>\n</blockquote>\n\n<p>I am using a list of sparse Vectors from mlib.</p>\n\n<pre><code>sparse_vectors = []\n\nfor cust, group in df.groupby(0):\n\n    i_v = zip(group[1].values, group[2].values)\n    i_v = sorted(i_v)\n    indices = [x[0] for x in i_v]\n    values = [x[1] for x in i_v]\n    sparse_vectors.append(Vectors.sparse(len(df[1].unique()), indices, values))\n\nrows = sc.parallelize(sparse_vectors)\nmat = RowMatrix(rows)\n</code></pre>\n\n<p>I get the error:</p>\n\n<blockquote>\n  <p>AttributeError: 'RowMatrix' object has no attribute\n  'computeColumnSummaryStatistics'</p>\n</blockquote>\n\n<p>or </p>\n\n<blockquote>\n  <p>AttributeError: 'RowMatrix' object has no attribute\n  'columnSimilarities'</p>\n</blockquote>\n\n<p>each time I run the functions.</p>\n\n<p>Is this an issue of PySpark, as opposed to Scala Spark? I also can't find a page of RowMatrix functions through a google search as well.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["javascript", "python", "angularjs", "django", "django-rest-framework"], "owner": {"reputation": 1817, "user_id": 1544500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b4bb4899b045ff2151b03836e2c29ba?s=128&d=identicon&r=PG&f=1", "display_name": "user1544500", "link": "https://stackoverflow.com/users/1544500/user1544500"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1459374638, "creation_date": 1459374638, "last_edit_date": 1495541272, "question_id": 36320386, "link": "https://stackoverflow.com/questions/36320386/form-with-2-models-and-multiple-instances-in-django-rest-framework-and-angular-j", "title": "Form with 2 models and multiple instances in Django Rest Framework and Angular.js", "body": "<p>Imagine there's a Django Library Model (which requires a name and address) which looks like this: </p>\n\n<pre><code>class Library(models.Model):\n    name = models.CharField(max_length=30)\n    address = models.CharField(max_length=100)\n</code></pre>\n\n<p>And there's a Book model where each book is defined by its title and author, like this:</p>\n\n<pre><code>class Book(models.Model):\n   title = models.CharField(max_length=50)\n   author = models.CharField(max_length=50)\n</code></pre>\n\n<p>I'm using angular.js on the frontend with Django Rest Framework (DRF) on the backend. I would like to create a form where the user can enter the Library details (i.e. name and address) and one or several books (using multiple book forms). </p>\n\n<p>The problem that I'm facing is how to create a serializer and the right view to handle this data, which in its JSON form should like similar to this:</p>\n\n<pre><code>{\n'name': 'The Great Library',\n'address': 'Babylon',\n'books': [\n    {'title':'ABC', 'author':'Whatever'},\n    {'title':'Django', 'author':'BlaBla'},\n    {'title':'Angular', 'author':'BlaBlaBla'},\n    ...\n]\n}\n</code></pre>\n\n<p>Here are my serializers which should achieve this: </p>\n\n<pre><code>class BookSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Book\n        fields = ('title', 'author')\n\nclass LibrarySerializer(serializers.ModelSerializer):\n\n    books = BookSerializer(many=True)\n\n    class Meta:\n        model = Company\n        fields = ('name', 'address', 'id', 'books')\n\n    def create(self, validated_data):\n        books_data = validated_data.pop('books')\n        library = Library.objects.create(**validated_data)\n        for book in books_data:\n            Book.objects.create(library = library, **book)\n        return library\n</code></pre>\n\n<p>The problem is the right view.. I've tried <a href=\"https://stackoverflow.com/questions/36228035/django-formset-equivalent-in-angular-js/36269108#36269108\">the approach in this question</a> but since my form has additional fields (library details) apart from several books (several instances of the same form) this does not work(there's a list required, however my data is a dictionary with a list - like shown in the JSON example above). </p>\n\n<p>Which Django Rest Framework view would be the best to solve this? I have difficulties understanding this so any help much appreciated!</p>\n"}, {"tags": ["python", "sql-server"], "answers": [{"comments": [{"owner": {"reputation": 293, "user_id": 4168007, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-VNeHMNyDWbU/AAAAAAAAAAI/AAAAAAAABPQ/-fWzsqnIq9M/photo.jpg?sz=128", "display_name": "balakishore nadella", "link": "https://stackoverflow.com/users/4168007/balakishore-nadella"}, "edited": false, "score": 0, "creation_date": 1460495645, "post_id": 36326793, "comment_id": 60767209, "body": "the above is an sql stored procedure. I&#39;m trying to implement a method where it accepts the sql statement and values(list of lists) as input and return the inserted records along with created id&#39;s in python"}, {"owner": {"reputation": 1060, "user_id": 6097676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eqtGNrEJucQ/AAAAAAAAAAI/AAAAAAAAAPs/40614xOEtbA/photo.jpg?sz=128", "display_name": "Sean Pearce", "link": "https://stackoverflow.com/users/6097676/sean-pearce"}, "reply_to_user": {"reputation": 293, "user_id": 4168007, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-VNeHMNyDWbU/AAAAAAAAAAI/AAAAAAAABPQ/-fWzsqnIq9M/photo.jpg?sz=128", "display_name": "balakishore nadella", "link": "https://stackoverflow.com/users/4168007/balakishore-nadella"}, "edited": false, "score": 0, "creation_date": 1460542042, "post_id": 36326793, "comment_id": 60787045, "body": "That is just an example of how to use the OUTPUT statement. It doesn&#39;t have to be wrapped in a stored procedure."}], "tags": [], "owner": {"reputation": 1060, "user_id": 6097676, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eqtGNrEJucQ/AAAAAAAAAAI/AAAAAAAAAPs/40614xOEtbA/photo.jpg?sz=128", "display_name": "Sean Pearce", "link": "https://stackoverflow.com/users/6097676/sean-pearce"}, "is_accepted": true, "score": 0, "last_activity_date": 1459409171, "creation_date": 1459409171, "answer_id": 36326793, "question_id": 36320327, "link": "https://stackoverflow.com/questions/36320327/return-identity-column-values/36326793#36326793", "title": "Return identity column values", "body": "<p>When inserting multiple records into a table you can access the newly inserted data by using the OUTPUT clause in the INSERT statement. <a href=\"https://msdn.microsoft.com/en-us/library/ms177564.aspx\" rel=\"nofollow\">MSDN Documentation</a></p>\n\n<p>Here is some code to demonstrate:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>/* Test table to demonstrate */\nCREATE TABLE Test (ID INT IDENTITY(1, 1), Value VARCHAR(255));\nGO\n-- I'm using a table valued parameter to pass in the recordset\nCREATE TYPE InputTable AS TABLE (Value VARCHAR(255));\nGO\n\n-- Test procedure to demonstrate\nCREATE PROCEDURE dbo.InsertTest\n    @In InputTable READONLY -- Pass in a recordset to insert\nAS \n\nSET NOCOUNT ON\n\n-- Create a temp table to return the results\nCREATE TABLE #Test (ID INT, Value VARCHAR(255));\n\n-- Insert the data into the test table\nINSERT INTO Test (Value)\nOUTPUT inserted.ID, inserted.Value INTO #Test -- Output the newly inserted records including the new ID into the temp table\nSELECT *\nFROM @In;\n\n-- Return the inserted data including the new ID\nSELECT * FROM #Test;\n\nDROP TABLE #Test;\nGO\n\n-- Declare a variable that references the input\nDECLARE @Input AS InputTable;\n\n-- Add data to the variable\nINSERT INTO @Input (Value)\nSELECT name\nFROM sys.objects;\n\n-- Execute the test procedure\nEXEC InsertTest @Input;\nGO\n\nDROP TABLE Test;\nDROP PROCEDURE InsertTest;\nDROP TYPE InputTable;\n</code></pre>\n"}], "owner": {"reputation": 293, "user_id": 4168007, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-VNeHMNyDWbU/AAAAAAAAAAI/AAAAAAAABPQ/-fWzsqnIq9M/photo.jpg?sz=128", "display_name": "balakishore nadella", "link": "https://stackoverflow.com/users/4168007/balakishore-nadella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 36326793, "answer_count": 1, "score": 0, "last_activity_date": 1459409171, "creation_date": 1459374401, "question_id": 36320327, "link": "https://stackoverflow.com/questions/36320327/return-identity-column-values", "title": "Return identity column values", "body": "<p>I have a some records(>1) which needed to be inserted into database and return the inserted records back into code(along with newly formed id in identity column). I need to make a call from python code to insert records into sql server.\nI want to do all this in a single call to database. How can I do it?</p>\n"}, {"tags": ["python", "numpy", "pandas"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 1, "creation_date": 1459374466, "post_id": 36320317, "comment_id": 60264008, "body": "You&#39;d have to strip and cast as a post-processing step or pass a method to <code>converters</code> param for <code>read_csv</code>"}, {"owner": {"reputation": 7020, "user_id": 4822566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlNVB.png?s=128&g=1", "display_name": "Alex Taylor", "link": "https://stackoverflow.com/users/4822566/alex-taylor"}, "edited": false, "score": 0, "creation_date": 1459374794, "post_id": 36320317, "comment_id": 60264134, "body": "Are you trying to use floating point numbers for currency? You probably should be using <code>decimal</code>: <a href=\"http://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency\" title=\"why not use double or float to represent currency\">stackoverflow.com/questions/3730019/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5507, "user_id": 2255198, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/SH5us.png?s=128&g=1", "display_name": "flyingmeatball", "link": "https://stackoverflow.com/users/2255198/flyingmeatball"}, "edited": false, "score": 3, "creation_date": 1459432575, "post_id": 36321254, "comment_id": 60292907, "body": "You&#39;ll probably need to add the same logic for commas, or it will bomb trying to replace $1,437.22"}, {"owner": {"reputation": 3674, "user_id": 4049396, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/HFySR.jpg?s=128&g=1", "display_name": "Little Bobby Tables", "link": "https://stackoverflow.com/users/4049396/little-bobby-tables"}, "reply_to_user": {"reputation": 5507, "user_id": 2255198, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/SH5us.png?s=128&g=1", "display_name": "flyingmeatball", "link": "https://stackoverflow.com/users/2255198/flyingmeatball"}, "edited": false, "score": 2, "creation_date": 1521568365, "post_id": 36321254, "comment_id": 85783599, "body": "@flyingmeatball use the <code>thousands=&#39;,&#39;</code> kwarg."}], "tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": false, "score": 8, "last_activity_date": 1459378861, "creation_date": 1459378861, "answer_id": 36321254, "question_id": 36320317, "link": "https://stackoverflow.com/questions/36320317/pandas-read-csv-ignore-dollar-sign-when-parsing-numbers/36321254#36321254", "title": "Pandas read_csv ignore dollar sign when parsing numbers", "body": "<p>You can add a converter for the relevant column(s):</p>\n\n<pre><code>pd.DataFrame({'col1': ['$46.51', '$38.00', 40], \n              'col2': [1, 2, 3]}).to_csv('test_df.csv', index=False)\n\n&gt;&gt;&gt; pd.read_csv('test_df.csv', converters={'col1': lambda s: float(s.replace('$', ''))})\n    col1  col2\n0  46.51     1\n1  38.00     2\n2  40.00     3\n</code></pre>\n"}], "owner": {"reputation": 992, "user_id": 1609464, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cb093b558f275e03f3035d5e4deaa7dc?s=128&d=identicon&r=PG", "display_name": "nwly", "link": "https://stackoverflow.com/users/1609464/nwly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3735, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1459378861, "creation_date": 1459374350, "question_id": 36320317, "link": "https://stackoverflow.com/questions/36320317/pandas-read-csv-ignore-dollar-sign-when-parsing-numbers", "title": "Pandas read_csv ignore dollar sign when parsing numbers", "body": "<p>I have a csv file with some cells that have dollar signs (e.g. <code>$46.5</code>).  I am forcing all the types to be <code>numpy.float64</code> in the function <code>pandas.read_csv()</code>.  It complains about <code>ValueError: could not convert string to float: $46.5</code>.  Is there a way to handle this cleanly?</p>\n"}, {"tags": ["python", "ldap"], "answers": [{"tags": [], "owner": {"reputation": 583, "user_id": 1311382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce48db5e78cdd964a4ede2b644b9ba20?s=128&d=identicon&r=PG", "display_name": "Guillermo R", "link": "https://stackoverflow.com/users/1311382/guillermo-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1459436704, "creation_date": 1459436704, "answer_id": 36337166, "question_id": 36320297, "link": "https://stackoverflow.com/questions/36320297/variables-in-ldap-search/36337166#36337166", "title": "Variables in LDAP search", "body": "<p>Python won't automatically replace your variable unless you explicitly format the string. Try using the following code instead:</p>\n\n<pre><code>conn.search(\"ou=Projects,dc=irf,dc=local\", 2, \"(&amp;(objectClass=groupOfNames)(cn={args.project}))\".format(**locals()))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6088153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/519b7e16f9b7b25e8b0595d9972e5502?s=128&d=identicon&r=PG&f=1", "display_name": "horvathagota", "link": "https://stackoverflow.com/users/6088153/horvathagota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459436704, "creation_date": 1459374259, "question_id": 36320297, "link": "https://stackoverflow.com/questions/36320297/variables-in-ldap-search", "title": "Variables in LDAP search", "body": "<p>I am writing a Python 3 script which has command line arguments and I'd like to use one of the parameters as a variable. Here is the declaration of the parameter:</p>\n\n<pre><code>parser.add_argument('-p', '--project', help='Project name', type=str, required=True)\nargs = parser.parse_args()\n</code></pre>\n\n<p>I'd like to search for the project name in LDAP with this command (the cn=args.project is the relevant part):</p>\n\n<pre><code>conn.search(\"ou=Projects,dc=irf,dc=local\", 2, \"(&amp;(objectClass=groupOfNames)(cn=args.project))\")\n</code></pre>\n\n<p>But it doesn't work because the function just doesn't consider args.project as a variable, so it doesn't find the entry. I've already tried a lot of variations, including \"&amp; args.project &amp;\", but nothing worked.</p>\n\n<p>I would really appreciate if someone could help me.</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1459374316, "post_id": 36320266, "comment_id": 60263941, "body": "NumPy arrays don&#39;t let you break the grid structure like that."}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1459374366, "post_id": 36320266, "comment_id": 60263960, "body": "@user2357112 OK, so how do I remove that element such that I end up with an array shaped (100,100)?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1459374453, "post_id": 36320266, "comment_id": 60264002, "body": "An array of shape <code>(100, 101)</code> has 10100 elements. An array of shape <code>(100, 100)</code> has 10000 elements. You&#39;re overlooking 99 elements here."}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1459374570, "post_id": 36320266, "comment_id": 60264051, "body": "@user2357112 Ah, this is my mistake. Of course, I&#39;m a fool. How would one delete all of these elements?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1459374852, "post_id": 36320266, "comment_id": 60264163, "body": "If you want to take off the entire last column, Mike Muller&#39;s answer shows you one way to do it. You could also do <code>arr2 = numpy.delete(arr, -1, 1)</code>, taking advantage of the <code>axis</code> argument to <code>numpy.delete</code>."}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 0, "creation_date": 1459375064, "post_id": 36320266, "comment_id": 60264265, "body": "Can you please edit your question to clarify that you would like to delete the last column in your matrix (not an element)?"}], "answers": [{"comments": [{"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1459374939, "post_id": 36320370, "comment_id": 60264212, "body": "Of course! I was somehow confusing myself about matrix elements. Thank you!"}], "tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": true, "score": 0, "last_activity_date": 1459374581, "creation_date": 1459374581, "answer_id": 36320370, "question_id": 36320266, "link": "https://stackoverflow.com/questions/36320266/confused-how-to-use-numpy-delete/36320370#36320370", "title": "Confused how to use numpy.delete()", "body": "<p><em>OK, so how do I remove that element such that I end up with an array shaped (100,100)?</em></p>\n\n<p>Slice of the last column:</p>\n\n<pre><code>arr2 = arr[:,:-1]\n</code></pre>\n\n<p>Now:</p>\n\n<pre><code>&gt;&gt;&gt; arr2.shape\n(100, 100)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2755, "user_id": 5976265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yYNs9.jpg?s=128&g=1", "display_name": "Hun", "link": "https://stackoverflow.com/users/5976265/hun"}, "is_accepted": false, "score": 0, "last_activity_date": 1459374759, "creation_date": 1459374759, "answer_id": 36320415, "question_id": 36320266, "link": "https://stackoverflow.com/questions/36320266/confused-how-to-use-numpy-delete/36320415#36320415", "title": "Confused how to use numpy.delete()", "body": "<p>Since it is only 2d array, you can just do</p>\n\n<pre><code>arr2 = arry[:-1]\n</code></pre>\n"}], "owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 36320370, "answer_count": 2, "score": 0, "last_activity_date": 1459374759, "creation_date": 1459374150, "question_id": 36320266, "link": "https://stackoverflow.com/questions/36320266/confused-how-to-use-numpy-delete", "title": "Confused how to use numpy.delete()", "body": "<p>This is an easy question, but I find myself utterly confused. </p>\n\n<p>I currently have a two-dimensional array <code>arr1</code> shaped (100, 101). </p>\n\n<pre><code>print(arr1.shape)  # outputs (100, 101)\n</code></pre>\n\n<p>I would like to delete one elements in this array <code>arr1</code>, the element </p>\n\n<pre><code>arr1[99][100]\n</code></pre>\n\n<p>which is the \"last element\" in these array. </p>\n\n<p>How does one accomplish this with <code>numpy.delete()</code>? </p>\n\n<p>I would think it is </p>\n\n<pre><code>import numpy as npo\narr2 = np.delete(arr1, arr1[99][100]) \n</code></pre>\n\n<p>but this is incorrect.  </p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 5742, "user_id": 1904584, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/GlhYH.jpg?s=128&g=1", "display_name": "trinchet", "link": "https://stackoverflow.com/users/1904584/trinchet"}, "edited": false, "score": 1, "creation_date": 1459376411, "post_id": 36320261, "comment_id": 60264828, "body": "<code>&#39;users&#39;: reverse(&#39;user-list&#39;)</code> is enough"}, {"owner": {"reputation": 449, "user_id": 971008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b2030219b5055d7a1e966478ebb532e6?s=128&d=identicon&r=PG", "display_name": "Mikou", "link": "https://stackoverflow.com/users/971008/mikou"}, "reply_to_user": {"reputation": 5742, "user_id": 1904584, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/GlhYH.jpg?s=128&g=1", "display_name": "trinchet", "link": "https://stackoverflow.com/users/1904584/trinchet"}, "edited": false, "score": 0, "creation_date": 1459376585, "post_id": 36320261, "comment_id": 60264889, "body": "Sweet, it works. So the tutorial is wrong"}, {"owner": {"reputation": 5742, "user_id": 1904584, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/GlhYH.jpg?s=128&g=1", "display_name": "trinchet", "link": "https://stackoverflow.com/users/1904584/trinchet"}, "edited": false, "score": 0, "creation_date": 1459376656, "post_id": 36320261, "comment_id": 60264917, "body": "I will add the suggestion as response, i will appreciate your up vote. Thanks"}, {"owner": {"reputation": 449, "user_id": 971008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b2030219b5055d7a1e966478ebb532e6?s=128&d=identicon&r=PG", "display_name": "Mikou", "link": "https://stackoverflow.com/users/971008/mikou"}, "reply_to_user": {"reputation": 5742, "user_id": 1904584, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/GlhYH.jpg?s=128&g=1", "display_name": "trinchet", "link": "https://stackoverflow.com/users/1904584/trinchet"}, "edited": false, "score": 0, "creation_date": 1459430979, "post_id": 36320261, "comment_id": 60291698, "body": "Sorry if the vote came a bit late ;)"}], "answers": [{"tags": [], "owner": {"reputation": 5742, "user_id": 1904584, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/GlhYH.jpg?s=128&g=1", "display_name": "trinchet", "link": "https://stackoverflow.com/users/1904584/trinchet"}, "is_accepted": true, "score": 6, "last_activity_date": 1459376717, "creation_date": 1459376717, "answer_id": 36320829, "question_id": 36320261, "link": "https://stackoverflow.com/questions/36320261/noreversematch-django-rest-framework/36320829#36320829", "title": "NoReverseMatch Django Rest Framework", "body": "<p>You should reverse the url as <code>reverse('user-list')</code>. That should solve your issue. </p>\n"}], "owner": {"reputation": 449, "user_id": 971008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b2030219b5055d7a1e966478ebb532e6?s=128&d=identicon&r=PG", "display_name": "Mikou", "link": "https://stackoverflow.com/users/971008/mikou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1989, "favorite_count": 0, "accepted_answer_id": 36320829, "answer_count": 1, "score": 1, "last_activity_date": 1459376717, "creation_date": 1459374129, "question_id": 36320261, "link": "https://stackoverflow.com/questions/36320261/noreversematch-django-rest-framework", "title": "NoReverseMatch Django Rest Framework", "body": "<p>In Django I have a class based view:</p>\n\n<pre><code>class ApiRoot(APIView):\n  def get(request, format=None):\n    return Response({\n      'users': reverse('user-list', request=request, format=format),\n      #'snippets': reverse('snippet-list', request=request, format=format)\n    })  \n</code></pre>\n\n<p>and the following url patterns in urls.py</p>\n\n<pre><code>urlpatterns = format_suffix_patterns([\n    url(r'^$', views.ApiRoot.as_view(), name='api-root'),\n    url(r'^snippets/$', views.SnippetList.as_view(), name='snippet-list'),\n    url(r'^snippets/(?P&lt;pk&gt;[0-9]+)/$', views.SnippetDetail.as_view(), name='snippet-detail'),\n    url(r'^users/$', views.UserList.as_view(), name='user-list'),\n    url(r'^users/(?P&lt;pk&gt;[0-9]+)/$', views.UserDetail.as_view(), name='user-detail'),\n])\nurlpatterns += [\n    url(r'^api-auth/', include('rest_framework.urls',\n                           namespace='rest_framework')),\n</code></pre>\n\n<p>I think I wired up things properly but I get the following error:</p>\n\n<pre><code>NoReverseMatch at /\nReverse for 'user-list' with arguments '()' and keyword arguments '{u'format': &lt;rest_framework.request.Request object at 0x7f99998c4c50&gt;}' not found. 2 pattern(s) tried: [u'users\\\\.(?P&lt;format&gt;[a-z0-9]+)/?$', 'users/$']\n</code></pre>\n\n<p>Any Idea why?</p>\n\n<p>thanks</p>\n"}, {"tags": ["python", "authentication", "flask", "authorization", "flask-login"], "answers": [{"comments": [{"owner": {"reputation": 1383, "user_id": 5578714, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/mufAl.png?s=128&g=1", "display_name": "David White", "link": "https://stackoverflow.com/users/5578714/david-white"}, "edited": false, "score": 0, "creation_date": 1459377070, "post_id": 36320742, "comment_id": 60265080, "body": "So it does.  Too bad!  Time to learn how to write a decorator."}], "tags": [], "owner": {"reputation": 4979, "user_id": 2676531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc88aa76113d738e11685389a1409a26?s=128&d=identicon&r=PG", "display_name": "Celeo", "link": "https://stackoverflow.com/users/2676531/celeo"}, "is_accepted": true, "score": 0, "last_activity_date": 1459376305, "creation_date": 1459376305, "answer_id": 36320742, "question_id": 36320252, "link": "https://stackoverflow.com/questions/36320252/dealing-with-authenticated-vs-authorized-users-with-flask-login/36320742#36320742", "title": "Dealing with authenticated vs. authorized users with Flask-Login", "body": "<p>The <a href=\"https://flask-login.readthedocs.org/en/latest/\" rel=\"nofollow\">flask-login docs</a> specifically say it does not \"Handle permissions beyond 'logged in or not.'\"</p>\n\n<p>So yes, you'll have to roll your own <code>@authorization_required</code> decorator.</p>\n"}], "owner": {"reputation": 1383, "user_id": 5578714, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/mufAl.png?s=128&g=1", "display_name": "David White", "link": "https://stackoverflow.com/users/5578714/david-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 36320742, "answer_count": 1, "score": 0, "last_activity_date": 1459376305, "creation_date": 1459374084, "question_id": 36320252, "link": "https://stackoverflow.com/questions/36320252/dealing-with-authenticated-vs-authorized-users-with-flask-login", "title": "Dealing with authenticated vs. authorized users with Flask-Login", "body": "<p>I've managed to make a Flask-Login app that will log people in using LDAP.  That is, I can use the login process and @login_required decorators to distinguish between two types of users:</p>\n\n<ol>\n<li>Unauthenticated (username/password not recognized as a valid combo in LDAP)</li>\n<li>Authenticated (user can login to LDAP using the given username/password)</li>\n</ol>\n\n<p>What I want now is:</p>\n\n<ol>\n<li>Unauthenticated (username/password not recognized as a valid combo in LDAP)</li>\n<li>Unauthorized (username/password is a valid LDAP combo, but user is not a member of the right LDAP groups)</li>\n<li>Authorized (user's credentials are in LDAP and user is a member of the appropriate LDAP groups)</li>\n</ol>\n\n<p>In pseudocode, I'd like this:</p>\n\n<pre><code>@app.route(\"/\")\ndef index():\n    return render_template(\"index.html\")\n\n# This is for any authenticated user\n@app.route('/allmembers')\n@login_required\ndef allmembers():\n    return render_template(\"allmembers.html\")\n\n# This is for only certain LDAP group members\n@app.route('/secret')\n@authorization_required(allowed_groups=[\"secret\", \"top-secret\"])  # does this exist?\n@login_required\ndef secret():\n    return render_template(\"secret.html\")\n</code></pre>\n\n<p>I've looked at the \"is_authenticated\" method that goes with the Flask-Login \"User\" class, but that really seems to only get me to #1.  Is there a Flask-type method to proceed from the authenticated status to authorized status? </p>\n\n<p>Or does Flask-Login's usefulness end after the authentication, and I need to figure out how to roll my own <code>@authorization_required</code> decorator?</p>\n"}, {"tags": ["python", "list", "duplicates", "version"], "comments": [{"owner": {"reputation": 542, "user_id": 1332561, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7a35712338ee76721b589f66a268c531?s=128&d=identicon&r=PG", "display_name": "gamda", "link": "https://stackoverflow.com/users/1332561/gamda"}, "edited": false, "score": 0, "creation_date": 1459374489, "post_id": 36320193, "comment_id": 60264019, "body": "Since the items have the same general structure, I would try doing <code>item_xxx.x.txt.split(&#39;.&#39;)</code> and that way I would be able to check the first element for redundancy."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6047310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8802009ea68edc98c5d0392772c56aa?s=128&d=identicon&r=PG&f=1", "display_name": "B Smith", "link": "https://stackoverflow.com/users/6047310/b-smith"}, "edited": false, "score": 0, "creation_date": 1459471043, "post_id": 36320682, "comment_id": 60313691, "body": "Thanks guys! That worked great, I&#39;ve adapted both of these examples into my script"}], "tags": [], "owner": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "is_accepted": false, "score": 0, "last_activity_date": 1459376004, "creation_date": 1459376004, "answer_id": 36320682, "question_id": 36320193, "link": "https://stackoverflow.com/questions/36320193/removing-similar-items-from-list-based-on-version-number-in-python/36320682#36320682", "title": "Removing similar items from list based on &#39;version number&#39; in Python", "body": "<p>Since this sounds like it might be homework, I'm just going to provide the structure of an algorithm:</p>\n\n<ul>\n<li><p>Define a function that can parse the string, returning the root of the file name, and the version number. You should probably have it return the version number as an integer, instead of a string. Use would look something like this, assuming they'll always be .txt file extensions:</p>\n\n<pre><code>&gt; extract_version('item_101.2.txt')\n('item_101', 2)\n</code></pre></li>\n<li><p>Use this function on all of your inputs, returning something like this:</p>\n\n<pre><code>[('item_101', 1), ('item_101', 2), ('item_134', 1), ... ]\n</code></pre></li>\n<li><p>Loop through that list, keeping track of the highest version number for each in a dictionary:</p>\n\n<pre><code>for fname, version in version_list:\n    if fname not in highest_version:\n         highest_version[fname] = version\n    else:\n         highest_version[fname] = max(highest_version[fname], version)\n</code></pre></li>\n<li><p>After running this loop, highest_version will contain the maximum version numbers for each file name. You can loop through the dictionary and rebuild the file names. Note that they may be in a different order than before, so you may need to sort them based on your criteria.</p>\n\n<pre><code>for fname, version in highest_version.items():\n    highest_version_list.append(fname + '.' + str(version) + '.txt'\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 9, "user_id": 6047310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8802009ea68edc98c5d0392772c56aa?s=128&d=identicon&r=PG&f=1", "display_name": "B Smith", "link": "https://stackoverflow.com/users/6047310/b-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1459376004, "creation_date": 1459373796, "last_edit_date": 1459374455, "question_id": 36320193, "link": "https://stackoverflow.com/questions/36320193/removing-similar-items-from-list-based-on-version-number-in-python", "title": "Removing similar items from list based on &#39;version number&#39; in Python", "body": "<p>I've got a list, like this (but larger):</p>\n\n<p>[item_101.1.txt, item_101.2.txt, item_134.1.txt, item_134.2.txt, item_134.3.txt, item_134.4.txt]</p>\n\n<p>So, when there is an \"item_101.<strong>2</strong>.txt\", this here \"item_101.<strong>1</strong>.txt\" becomes redundant, and I want to remove it from the list. Similarly, \"item_134.<strong>4</strong>.txt\" should remain, but item_134.<strong>3</strong>.txt, item_134.<strong>2</strong>.txt, item_134.<strong>1</strong>.txt should be removed.</p>\n\n<p>But I can't do this within a for loop, because that deals on a per item basis.</p>\n\n<p>Any ideas? Any concepts I should be looking into?</p>\n\n<p>Thanks guys!</p>\n"}, {"tags": ["python", "pandas", "datetime-format"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 0, "last_activity_date": 1459376698, "creation_date": 1459376698, "answer_id": 36320823, "question_id": 36320180, "link": "https://stackoverflow.com/questions/36320180/how-reading-data-with-pandas-read-csv-containing-time-am-pm-format/36320823#36320823", "title": "How reading data with pandas.read_csv containing time AM/PM format?", "body": "<p>You can use <code>parse_dates</code> with:</p>\n\n<blockquote>\n  <p>dict, e.g. {\u2018foo\u2019 : [1, 3]} -> parse columns 1, 3 as date and call\n  result \u2018foo\u2019</p>\n</blockquote>\n\n<p>and your custom <code>date_parser</code> function</p>\n\n<p>Code:</p>\n\n<pre><code>def parse_dt(dt, tm, ap):\n    return pd.to_datetime(dt + ' ' + tm + ap, dayfirst=True)\n\ndf = pd.read_csv(filename, sep='\\s+', skiprows=2, header=None,\n                 parse_dates={'ts': [0,1,2] }, date_parser=parse_dt)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>In [44]: df\nOut[44]:\n                   ts     3     4     5   6     7     8  9     10    11 ...  \\\n0 2015-01-01 00:30:00  17.0  17.6  17.0  14 -10.7  30.6  N  15.29  51.5 ...\n1 2015-01-01 01:00:00  16.6  17.0  16.6  14 -11.1  27.4  N  13.68  45.1 ...\n2 2015-01-01 01:30:00  16.2  16.6  16.1  14 -11.4  24.1  N  12.07  35.4 ...\n3 2015-01-01 02:00:00  15.6  16.2  15.6  14 -11.9  17.7  N   8.85  33.8 ...\n4 2015-01-01 02:30:00  15.3  15.8  15.3  14 -12.1  16.1  N   8.05  29.0 ...\n5 2015-01-01 03:00:00  14.8  15.3  14.8  15 -11.6  20.9  N  10.46  38.6 ...\n\n  22     23   24    25  26    27   28  29     30  31\n0  0  0.028  0.0  26.2   2  0.00  702   1  100.0  30\n1  0  0.037  0.0  25.6   2  0.25  702   1  100.0  30\n2  0  0.044  0.0  25.1   2  0.00  703   1  100.0  30\n3  0  0.057  0.0  24.6   2  0.20  702   1  100.0  30\n4  0  0.063  0.0  24.2   2  0.00  703   1  100.0  30\n5  0  0.073  0.0  23.6   2  0.18  702   1  100.0  30\n\n[6 rows x 30 columns]\n</code></pre>\n"}], "owner": {"reputation": 611, "user_id": 3258925, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/P7XRi.jpg?s=128&g=1", "display_name": "nandhos", "link": "https://stackoverflow.com/users/3258925/nandhos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 1, "accepted_answer_id": 36320823, "answer_count": 1, "score": 1, "last_activity_date": 1459376698, "creation_date": 1459373758, "last_edit_date": 1459374767, "question_id": 36320180, "link": "https://stackoverflow.com/questions/36320180/how-reading-data-with-pandas-read-csv-containing-time-am-pm-format", "title": "How reading data with pandas.read_csv containing time AM/PM format?", "body": "<p>I have the following set of data:</p>\n\n<pre><code>        Temp    Hi  Low Out Dew Wind    Wind    Wind    Hi  Hi  Wind    Heat    THW THSW            Rain    Solar   Solar   Hi Solar    Heat    Cool    In  In      Wind    Wind    ISS     Arc.\nDate    Time    Out Temp    Temp    Hum Pt. Speed   Dir Run Speed   Dir Chill   Index   Index   Index   Bar     Rain    Rate    Rad.    Energy  Rad.    D-D     D-D     Temp    Hum ET  Samp    Tx  Recept  Int.\n01/01/15    12:30 a 17.0    17.6    17.0    14  -10.7   30.6    N   15.29   51.5    N   15.7    14.1    10.8    8.3 741.4   0.00    0.0 0   0.00    0   0.028   0.000   26.2    2   0.00    702 1   100.0   30\n01/01/15    1:00 a  16.6    17.0    16.6    14  -11.1   27.4    N   13.68   45.1    N   15.3    13.7    10.7    8.1 741.8   0.00    0.0 0   0.00    0   0.037   0.000   25.6    2   0.25    702 1   100.0   30\n01/01/15    1:30 a  16.2    16.6    16.1    14  -11.4   24.1    N   12.07   35.4    N   15.0    13.4    10.7    7.9 741.9   0.00    0.0 0   0.00    0   0.044   0.000   25.1    2   0.00    703 1   100.0   30\n01/01/15    2:00 a  15.6    16.2    15.6    14  -11.9   17.7    N   8.85    33.8    N   14.6    12.8    11.0    7.8 742.4   0.00    0.0 0   0.00    0   0.057   0.000   24.6    2   0.20    702 1   100.0   30\n01/01/15    2:30 a  15.3    15.8    15.3    14  -12.1   16.1    N   8.05    29.0    N   14.4    12.6    11.0    7.7 742.8   0.00    0.0 0   0.00    0   0.063   0.000   24.2    2   0.00    703 1   100.0   30\n01/01/15    3:00 a  14.8    15.3    14.8    15  -11.6   20.9    N   10.46   38.6    N   13.4    12.3    10.0    6.9 742.8   0.00    0.0 0   0.00    0   0.073   0.000   23.6    2   0.18    702 1   100.0   30\n</code></pre>\n\n<p>I'm trying to read it but I hace problems with time format, as you can seeI have 12:00 a, 1:00 a ...</p>\n\n<p>I use to read it another similar files (without am/pm format), as follow:</p>\n\n<pre><code>data = pd.read_csv(filename, skiprows=2,sep='\\s+', header=None,\n                   index_col=[0,1,2],dayfirst=True, parse_dates=True,\n                   infer_datetime_format=True)\n</code></pre>\n\n<p>I was thinking that I could use <code>date_parser='%D/%M/%Y %I:%M'</code> instead of <code>infer_datetime_format=True</code> but have not sucess.</p>\n\n<p>Some idea?</p>\n\n<p>I tried this, and I think works, but there is a way to read it directly from read_csv?</p>\n\n<pre><code>data = pd.read_csv(path+filename, skiprows=2,sep='\\s+', header=None,\n                  names=['date','hour','ap','a','b','c','d','e','f','g','h','i','j',\n                         'k','l','m','n','o','p','q','r','s','t',\n                         'u','v','w','x','y','z','aa','bb','cc'])\n</code></pre>\n\n<p>and thus i create a time array with:</p>\n\n<pre><code>time = pd.to_datetime(data['date'] + ' ' + data['hour']+data['ap'])\n</code></pre>\n\n<p>and </p>\n\n<pre><code>data.index = time\n</code></pre>\n"}, {"tags": ["python", "pycharm"], "comments": [{"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 1, "creation_date": 1459373805, "post_id": 36320166, "comment_id": 60263705, "body": "it complains but does not FORCE you to follow PEP8, however, this is Python, not Java, and PEP8 should be followed as much as possible."}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459373823, "post_id": 36320166, "comment_id": 60263718, "body": "You can create a method with an uppercase letter. You are just getting a warning because it goes against the <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow noreferrer\">PEP8</a> style guide."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1459373853, "post_id": 36320166, "comment_id": 60263732, "body": "It&#39;s completely allowed. It&#39;s just discouraged, like naming a java method <code>method_for_test</code>."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1459374799, "post_id": 36320166, "comment_id": 60264141, "body": "And yes, of course you can configure it."}, {"owner": {"reputation": 2284, "user_id": 874701, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/364eb4db2d425fb2d0f774aa4c65eec2?s=128&d=identicon&r=PG", "display_name": "matth", "link": "https://stackoverflow.com/users/874701/matth"}, "edited": false, "score": 0, "creation_date": 1506506782, "post_id": 36320166, "comment_id": 79845820, "body": "duplicate of: <a href=\"https://stackoverflow.com/questions/33153270/how-to-disable-special-naming-convention-inspection-of-pep-8-in-pycharm\" title=\"how to disable special naming convention inspection of pep 8 in pycharm\">stackoverflow.com/questions/33153270/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 10, "last_activity_date": 1459374403, "last_edit_date": 1459374403, "creation_date": 1459373858, "answer_id": 36320203, "question_id": 36320166, "link": "https://stackoverflow.com/questions/36320166/why-pycharm-does-not-allow-uppercase-letters-in-method-naming/36320203#36320203", "title": "Why PyCharm does not allow uppercase letters in method naming?", "body": "<p>Python has <em>no such limitation</em>.</p>\n\n<p>Python identifiers must start with an underscore or letter (upper or lowercase), followed by any number of underscores, digits or letters (again, upper or lowercase, doesn't matter); this means an ALL_UPPERCASE name is perfectly valid Python. See the <a href=\"https://docs.python.org/2/reference/lexical_analysis.html#identifiers\" rel=\"noreferrer\"><em>Identifiers and keywords</em></a> section in the reference documentation; Python 3 <a href=\"https://docs.python.org/3/reference/lexical_analysis.html#identifiers\" rel=\"noreferrer\">expanded on this by allowing a wider range of Unicode</a>.</p>\n\n<p>However, the widely adopted <a href=\"https://www.python.org/dev/peps/pep-0008\" rel=\"noreferrer\">PEP 8 Python styleguide</a> does have this to say on <a href=\"https://www.python.org/dev/peps/pep-0008/#function-names\" rel=\"noreferrer\">naming functions</a>:</p>\n\n<blockquote>\n  <p>Function names should be lowercase, with words separated by underscores as necessary to improve readability.</p>\n</blockquote>\n\n<p>This is a <em>convention</em> however, not a syntactic requirement. Perhaps your IDE has a linter installed that warns when you break this convention. You can, if you so wish, ignore it. I note that <a href=\"https://blog.jetbrains.com/pycharm/2013/02/long-awaited-pep-8-checks-on-the-fly-improved-doctest-support-and-more-in-pycharm-2-7/\" rel=\"noreferrer\">PyCharm implements such a check</a>, for example.</p>\n\n<p>In PyCharm, you can click on the warning icon and tell PyCharm to ignore the class of errors:</p>\n\n<p><img src=\"https://i.stack.imgur.com/oDyNv.png\" alt=\"PyCharm *Ignore errors like this* option\"></p>\n\n<p>Also see the <a href=\"https://www.jetbrains.com/help/pycharm/2016.1/suppressing-inspections.html?origin=old_help\" rel=\"noreferrer\">PyCharm documentation on suppressing inspections</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "is_accepted": false, "score": 0, "last_activity_date": 1459374410, "last_edit_date": 1459374410, "creation_date": 1459373969, "answer_id": 36320221, "question_id": 36320166, "link": "https://stackoverflow.com/questions/36320166/why-pycharm-does-not-allow-uppercase-letters-in-method-naming/36320221#36320221", "title": "Why PyCharm does not allow uppercase letters in method naming?", "body": "<p>Python is really permissive (too much maybe) and let's you do almost whatever you want.</p>\n\n<p>You can name your classes, methods, variables, the way you want. You can access every variable of an instance, there is not public / private concept.</p>\n\n<p>Pycharm / IntelliJ is just warning you but does not FORCE you to follow PEP8, however, this is Python, not Java, and PEP8 should be followed as much as possible.</p>\n\n<p>Python is all about <strong><em>readability over fanciness</em></strong>, for example:</p>\n\n<pre><code>[x for x if a_list if x == 1]\n</code></pre>\n\n<p>is preferable to</p>\n\n<pre><code>map(lambda x: x == 1, a_list)\n</code></pre>\n\n<p>as well as</p>\n\n<pre><code>class MySuperAwesomeClass:\n    pass\n\ndef my_super_function():\n    pass\n</code></pre>\n\n<p>is preferable to</p>\n\n<pre><code>class my_super_awesome_class:\n    pass\n\ndef mySuperFunction()\n    pass\n</code></pre>\n\n<p>This way, especially in a team of developers or in an open source project with multiple contributors, there is a kind of convention which everybody follows to make others life \neasier.</p>\n"}], "owner": {"reputation": 113, "user_id": 5328766, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SxSWt.jpg?s=128&g=1", "display_name": "Jack Hoff.", "link": "https://stackoverflow.com/users/5328766/jack-hoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4549, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1459378734, "creation_date": 1459373706, "last_edit_date": 1459373948, "question_id": 36320166, "link": "https://stackoverflow.com/questions/36320166/why-pycharm-does-not-allow-uppercase-letters-in-method-naming", "title": "Why PyCharm does not allow uppercase letters in method naming?", "body": "<p>I am comfortable with Java naming conventions where you are free to name your methods as long as it starts with lowercase so <code>methodForTest()</code> is acceptable. </p>\n\n<p>However, Python (PyCharm IDE) complains for this way and it requires all lowercase.</p>\n\n<p>Why? Can I disable this so I can use uppercase in method naming?</p>\n"}, {"tags": ["python", "svg", "stdin", "sys"], "comments": [{"owner": {"reputation": 12629, "user_id": 546871, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/p1diY.jpg?s=128&g=1", "display_name": "AdrianHHH", "link": "https://stackoverflow.com/users/546871/adrianhhh"}, "edited": false, "score": 0, "creation_date": 1459373814, "post_id": 36320112, "comment_id": 60263711, "body": "Please <a href=\"https://stackoverflow.com/posts/36320112/edit\">edit</a> the question to add a tag for the programming language you are using and to remove the current tags, all of which appear to be very general but not helpful to others finding your question."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1459374410, "post_id": 36320112, "comment_id": 60263980, "body": "How do you invoke your program?"}, {"owner": {"reputation": 3, "user_id": 5804407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e437cc4ea0c6ee0b56438fb81204ef?s=128&d=identicon&r=PG&f=1", "display_name": "Oradian", "link": "https://stackoverflow.com/users/5804407/oradian"}, "edited": false, "score": 0, "creation_date": 1459374503, "post_id": 36320112, "comment_id": 60264027, "body": "python lines_to_svg.py lines_files.txt"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1459374607, "post_id": 36320112, "comment_id": 60264067, "body": "That syntax does not connect <code>lines_files.txt</code> to your program&#39;s standard input, so your <code>for</code> loop reads from the terminal."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5804407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e437cc4ea0c6ee0b56438fb81204ef?s=128&d=identicon&r=PG&f=1", "display_name": "Oradian", "link": "https://stackoverflow.com/users/5804407/oradian"}, "edited": false, "score": 0, "creation_date": 1459374411, "post_id": 36320285, "comment_id": 60263982, "body": "Should of added the command line: python lines_to_svg.py lines_file.txt"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 3, "user_id": 5804407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e437cc4ea0c6ee0b56438fb81204ef?s=128&d=identicon&r=PG&f=1", "display_name": "Oradian", "link": "https://stackoverflow.com/users/5804407/oradian"}, "edited": false, "score": 0, "creation_date": 1459374471, "post_id": 36320285, "comment_id": 60264011, "body": "Try <code>python lines_to_svg.py &lt; lines_file.txt</code> instead."}, {"owner": {"reputation": 3, "user_id": 5804407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e437cc4ea0c6ee0b56438fb81204ef?s=128&d=identicon&r=PG&f=1", "display_name": "Oradian", "link": "https://stackoverflow.com/users/5804407/oradian"}, "edited": false, "score": 0, "creation_date": 1459374641, "post_id": 36320285, "comment_id": 60264084, "body": "I can&#39;t modify command line input as my prof will be using &quot;python lines_to_svg.py lines_file.txt&quot; to test my program"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 3, "user_id": 5804407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e437cc4ea0c6ee0b56438fb81204ef?s=128&d=identicon&r=PG&f=1", "display_name": "Oradian", "link": "https://stackoverflow.com/users/5804407/oradian"}, "edited": false, "score": 0, "creation_date": 1459374861, "post_id": 36320285, "comment_id": 60264166, "body": "Then consider one of the <code>option 1</code> choices in my answer."}, {"owner": {"reputation": 3, "user_id": 5804407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e437cc4ea0c6ee0b56438fb81204ef?s=128&d=identicon&r=PG&f=1", "display_name": "Oradian", "link": "https://stackoverflow.com/users/5804407/oradian"}, "edited": false, "score": 0, "creation_date": 1459374996, "post_id": 36320285, "comment_id": 60264239, "body": "Ya, I used fileinput and it worked. That being said, I have used sys.stdin in the past in a very similar fashion and it worked."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 0, "last_activity_date": 1459375056, "last_edit_date": 1459375056, "creation_date": 1459374222, "answer_id": 36320285, "question_id": 36320112, "link": "https://stackoverflow.com/questions/36320112/reading-lines-from-sys-stdin-however-ends-up-in-a-loop/36320285#36320285", "title": "Reading lines from sys.stdin however ends up in a loop", "body": "<p>At this line:</p>\n\n<pre><code>for S in sys.stdin:\n</code></pre>\n\n<p>your program isn't stuck, it is waiting for input. Try typing:</p>\n\n<pre><code>line 0.0 1.0 2.0 3.0\n</code></pre>\n\n<p>followed by the EOF indicator (in UNIX and derivatives: <code>^D</code>. In MS-DOS and derivatives: <code>^Z</code>). You may need to enter the EOF indicator twice.</p>\n\n<p>If you are trying to read from a text file instead of the console, you'll want to either open the text file in your program, or use file redirection in your shell:</p>\n\n<p>Option 1:</p>\n\n<pre><code># If you always use the same input file:\nwith open(\"somefile.txt\") as fp:\n    for S in fp:\n        ...\n</code></pre>\n\n<p>or</p>\n\n<pre><code># If you always have exactly one command-line parameter:\nwith open(sys.argv[1]) as fp:\n    for S in fp:\n</code></pre>\n\n<p>or, my favorite, because <a href=\"https://docs.python.org/2/library/fileinput.html\" rel=\"nofollow\"><code>fileinput</code></a> allows you to specify one, several, or no command-line parameters,</p>\n\n<pre><code># If you want to specify file(s) on the command line\nimport fileinput\n...\nfor S in fileinput.input():\n    ...\n</code></pre>\n\n<p>Option 2:</p>\n\n<pre><code>$ python my_program.py &lt; somefile.txt\n</code></pre>\n\n<p>or</p>\n\n<pre><code>C:\\Users\\me&gt; python my_program.py &lt; somefile.txt\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5804407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e437cc4ea0c6ee0b56438fb81204ef?s=128&d=identicon&r=PG&f=1", "display_name": "Oradian", "link": "https://stackoverflow.com/users/5804407/oradian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 0, "accepted_answer_id": 36320285, "answer_count": 1, "score": 0, "last_activity_date": 1459375056, "creation_date": 1459373422, "last_edit_date": 1459373937, "question_id": 36320112, "link": "https://stackoverflow.com/questions/36320112/reading-lines-from-sys-stdin-however-ends-up-in-a-loop", "title": "Reading lines from sys.stdin however ends up in a loop", "body": "<p>I am trying to read lines from a text file however I get stuck trying to access the lines, or so I think.</p>\n\n<pre><code>import sys\nimport math\nimport re\n\nCANVAS_HEIGHT = 500\nCANVAS_WIDTH = 500\n\nSVG_HEADER = '&lt;svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"%d\" height=\"%d\"&gt;\\n'\nSVG_BOUNDING_BOX = '&lt;rect x=\"0\" y=\"0\" width=\"%d\" height=\"%d\" style=\"stroke:#000;fill:none\" /&gt;\\n'\nSVG_LINE = '&lt;line x1=\"%d\" y1=\"%d\" x2=\"%d\" y2=\"%d\" style=\"stroke:#000\" /&gt;\\n'\nSVG_FOOTER = '&lt;/svg&gt;'\n\nprint SVG_HEADER % (CANVAS_WIDTH, CANVAS_HEIGHT)\nprint SVG_BOUNDING_BOX % (CANVAS_WIDTH, CANVAS_HEIGHT)\n\ntry:\n    line_number = 0\n    for S in sys.stdin:\n        line_number = line_number + 1\n\n        L = S.split()\n        try:\n            x0 = float(L[1])\n            y0 = float(L[2])\n            x1 = float(L[3])\n            x1 = float(L[4])\n        except:\n            sys.stderr.write('Error in line %d: %s\\n' % (line_number, S))\n\n    print SVG_LINE, x0, y0, x1, y1\nexcept:\n    sys.stderr.write('Cannot open: %s\\n' % sys.argv[1])\n\nprint '%s\\n' % (SVG_FOOTER)\n</code></pre>\n\n<p>In the terminal, I get stuck at the</p>\n\n<p>for S in sys.stdin:</p>\n\n<p>If you were wondering, the purpose of this code is to take lines and place them into svg format. All the sys.stderr.write is just specs from my prof.</p>\n\n<p>The lines i am reading are just like</p>\n\n<p>\"line 0.0 1.0 2.0 3.0\"</p>\n\n<p>a bunch of times.</p>\n"}, {"tags": ["python", "excel", "xlwings"], "comments": [{"owner": {"reputation": 5157, "user_id": 918626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8c377a6e6f8a5a6910bb62f51c6f853?s=128&d=identicon&r=PG", "display_name": "Felix Zumstein", "link": "https://stackoverflow.com/users/918626/felix-zumstein"}, "edited": false, "score": 0, "creation_date": 1459377311, "post_id": 36320103, "comment_id": 60265177, "body": "Does it work if you hide Excel during the execution with <code>Workbook(app_visible=False)</code>? This hides however the whole instance of Excel, not just the Workbook."}, {"owner": {"reputation": 11, "user_id": 6136979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/293be0711b20dda8af9ea670d82aad7b?s=128&d=identicon&r=PG&f=1", "display_name": "TDM", "link": "https://stackoverflow.com/users/6136979/tdm"}, "reply_to_user": {"reputation": 5157, "user_id": 918626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8c377a6e6f8a5a6910bb62f51c6f853?s=128&d=identicon&r=PG", "display_name": "Felix Zumstein", "link": "https://stackoverflow.com/users/918626/felix-zumstein"}, "edited": false, "score": 0, "creation_date": 1459385673, "post_id": 36320103, "comment_id": 60267814, "body": "Adding xw.Workbook(app_visible=False) causes the next line of code to fail. The next line is sheetname = xw.Sheet(&#39;SheetName&#39;), and it fails with a pywintypes.com_error: (-2147352567, &#39;Exception occurred.&#39;, (0, None, None, None, 0, -2147352565), None)"}, {"owner": {"reputation": 11, "user_id": 6136979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/293be0711b20dda8af9ea670d82aad7b?s=128&d=identicon&r=PG&f=1", "display_name": "TDM", "link": "https://stackoverflow.com/users/6136979/tdm"}, "reply_to_user": {"reputation": 5157, "user_id": 918626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8c377a6e6f8a5a6910bb62f51c6f853?s=128&d=identicon&r=PG", "display_name": "Felix Zumstein", "link": "https://stackoverflow.com/users/918626/felix-zumstein"}, "edited": false, "score": 0, "creation_date": 1459386185, "post_id": 36320103, "comment_id": 60267926, "body": "Edit: Adding Application.Visible = False before the vba call of RunPython seems to do the trick. Thanks."}], "owner": {"reputation": 11, "user_id": 6136979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/293be0711b20dda8af9ea670d82aad7b?s=128&d=identicon&r=PG&f=1", "display_name": "TDM", "link": "https://stackoverflow.com/users/6136979/tdm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 631, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1459373404, "creation_date": 1459373404, "question_id": 36320103, "link": "https://stackoverflow.com/questions/36320103/xlwings-error-when-i-leave-the-workbook-with-macro-running", "title": "xlwings Error when I leave the workbook with macro running", "body": "<p>I have a variety of python functions that I call from xlwings. These functions pull data from my workbook, do things with it (open corresponding csv file, clean the data, perform calculations, etc). Everything works fine if I sit there and watch it, but the moment I try to switch to a program outside the workbook (like Chrome), xlwings gives an error. The specific error depends on where during the program execution it is when I click away, but examples include:</p>\n\n<pre><code>pywintypes.com_error: (-2147418111, 'Call was rejected by callee.', None, None)\npywintypes.com_error: (-2147352567, 'Exception occurred.', (0, None, None, None, 0, -2146777998), None)\n</code></pre>\n\n<p>I also have these problems if I click within the workbook (to select a cell or minimize it), but that doesn't concern me. If I manage to leave the workbook, such as when a non-xlwings part of my code is running, I don't get any errors.</p>\n\n<p>Any thoughts?</p>\n\n<p>Thanks,\nTDM</p>\n"}, {"tags": ["python", "user-interface", "tkinter"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1459374015, "post_id": 36320097, "comment_id": 60263803, "body": "Running your code, I get the red background on the last row and the blue background on the second-to-last row. It looks like you changed <code>root, &quot;red&quot;, 0, 1</code> to <code>root, &quot;red&quot;, 3, 1</code> and <code>&quot;blue&quot;, 0, 2</code> to <code>&quot;blue&quot;, 2, 2</code> during testing, correct?"}], "answers": [{"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": false, "score": 1, "last_activity_date": 1459374029, "creation_date": 1459374029, "answer_id": 36320234, "question_id": 36320097, "link": "https://stackoverflow.com/questions/36320097/tkinter-doing-multiple-frames-at-once-with-buttons-in-each-frame-but-the-butt/36320234#36320234", "title": "Tkinter, doing multiple frames at once, with buttons in each frame. But the buttons ignore the frame they are given and just use the grid", "body": "<p>You are telling the buttons to use <code>root</code> as their parent. Instead, you should be passing in the frame:</p>\n\n<pre><code>appbutton.create_input(\"test1\", 0, frame1)\nappbutton.create_input(\"test2\", 1, frame1)\nappbutton.create_input(\"test3\", 2, frame2)\nappbutton.create_input(\"test4\", 3, frame2)\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5451310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00b02cda54337e97b3e0a06b1f3a82e3?s=128&d=identicon&r=PG&f=1", "display_name": "videodima", "link": "https://stackoverflow.com/users/5451310/videodima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2273, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1459374029, "creation_date": 1459373390, "question_id": 36320097, "link": "https://stackoverflow.com/questions/36320097/tkinter-doing-multiple-frames-at-once-with-buttons-in-each-frame-but-the-butt", "title": "Tkinter, doing multiple frames at once, with buttons in each frame. But the buttons ignore the frame they are given and just use the grid", "body": "<p>I am writing a Tkinter program where I can make multiple frames that I can choose where they are relative to eachother, so I decided to use grid() to decide which frame does where. I also have a class AppButton that creates a button/label/entry. I am trying to pass in the frame I want the button to be created in, and use a grid to determine its position that is relative to the frame it is created in. </p>\n\n<p>Currently however, the buttons don't get made in the frame I try to pass, but rather it uses the same grid as the frames do, and just gets put there, which looking back makes sense.</p>\n\n<p>My question is, how can I change this so that the button's grid is a separate grid relative only to the frame it is created in? That way if I move the frame around, the buttons will too, but their relative position in the frame stays the same.</p>\n\n<p>Right now the frame and buttons share the same grid and that is how their positions are determined.</p>\n\n<pre><code>import Tkinter as tk\nimport tkFileDialog as tkfd\n\nclass AppButton:\n    #simple button construction\n    #create a button with chosen arguments\n    def create_button(self, words, rownum, frame):\n        btn = tk.Button(frame, text = words)\n        btn.grid(row = rownum, column = 2)\n\n    def create_entry(self, rownum, frame):\n        txt = tk.Entry(frame)\n        txt.grid(row = rownum, column = 1)\n\n    def create_label(self, words, rownum, frame):\n        lbl = tk.Label(frame, text = words)\n        lbl.grid(row = rownum, column = 0)\n\n    #input is composed of a Label, an Entry, and a Button. calls the three funcs above\n    def create_input(self, words, rownum, frame):\n        self.create_label(words, rownum, frame)\n        self.create_entry(rownum, frame)\n        self.create_button(\"OK\", rownum, frame)\n\nclass Application(tk.Frame):\n    \"\"\"A GUI application that creates multiple buttons\"\"\"\n\n    #create a class variable from the root(master) called by the constructor\n    def __init__(self, master):\n        self.master = master\n        master.title(\"The best GUI\")\n        tk.Frame.__init__(self, master, width=200, height=200)\n        self.grid(row = 0, column = 0)\n\n    def new_frame(self, master, color, row, column):\n        frame = tk.Frame(master, width=200, height=200, bg=color)\n        frame.grid(row = row, column = column)\n        return frame\n\n\nif __name__ == \"__main__\":\n    root = tk.Tk()\n    root.title(\"Button Test Launch\")\n    app = Application(root)\n    appbutton = AppButton()\n    frame1 = app.new_frame(root, \"red\", 3, 1)\n    frame2 = app.new_frame(root, \"blue\", 2, 2)\n    appbutton.create_input(\"test1\", 0, root)\n    appbutton.create_input(\"test2\", 1, root)\n    appbutton.create_input(\"test3\", 2, root)\n    appbutton.create_input(\"test4\", 3, root)\n    root.mainloop()\n</code></pre>\n\n<p>Here is a picture of what it looks like now:\n<a href=\"http://i.stack.imgur.com/x2xMg.png\" rel=\"nofollow\">Current GUI</a></p>\n\n<p>My desired end result is to have for example \"test1 ______ [OK]\" to be completely in a single of those frames.</p>\n"}, {"tags": ["python", "if-statement"], "answers": [{"tags": [], "owner": {"reputation": 3151, "user_id": 5865420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AF0Nt.jpg?s=128&g=1", "display_name": "pp_", "link": "https://stackoverflow.com/users/5865420/pp"}, "is_accepted": false, "score": 3, "last_activity_date": 1459616937, "last_edit_date": 1459616937, "creation_date": 1459374280, "answer_id": 36320303, "question_id": 36320079, "link": "https://stackoverflow.com/questions/36320079/python-if-condition-with-multiple-variables/36320303#36320303", "title": "Python IF condition with multiple variables", "body": "<p>Python doesn't think anything. It recognizes that there's something wrong with the syntax and throws a <code>SyntaxError</code>.</p>\n\n<p>To simply check many values at once you can use the <code>in</code> operator:</p>\n\n<pre><code>if tomato in (1, 12, 25, 76, 84):\n    pass\n</code></pre>\n\n<p>Also note that you have to use two equal signs (<code>==</code>) to check for equality.</p>\n"}, {"tags": [], "owner": {"reputation": 367, "user_id": 6123737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/974f9508fbcdc0b3c65f5a98b34cd68d?s=128&d=identicon&r=PG", "display_name": "vaiski", "link": "https://stackoverflow.com/users/6123737/vaiski"}, "is_accepted": false, "score": 0, "last_activity_date": 1459377201, "last_edit_date": 1459377201, "creation_date": 1459376298, "answer_id": 36320740, "question_id": 36320079, "link": "https://stackoverflow.com/questions/36320079/python-if-condition-with-multiple-variables/36320740#36320740", "title": "Python IF condition with multiple variables", "body": "<p>If you had been using double equal signs the execution would go as follows: Python starts evaluating the predicate of your <code>if</code> statement from left to right. If the value of <code>tomato</code> is 1 then the first part evaluates as <code>True</code> and the Python interpreter continues evaluating the consecutive lines inside the <code>if</code> block (this is called <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow\">short-circuit evaluation</a>). </p>\n\n<p>However, if the value of <code>tomato</code> isn't 1, the interpreter continues by evaluating the next part in the predicate, which is an integer of value 2. All integer values, except for zero, evaluate as <code>True</code>. This results in the next part of the predicate evaluating as <code>True</code> and the interpreter continues to execute the contents of the <code>if</code> block. So your predicate is a <a href=\"https://en.wikipedia.org/wiki/Tautology_(logic)\" rel=\"nofollow\">tautology</a> and always evaluates as <code>True</code> no matter what value <code>tomato</code> has.</p>\n\n<p>As pointed out by pp_, you should use double equal signs for equality comparison - otherwise the statement is considered as an assignment and in Python, an assignment statement doesn't have a truth value so the interpreter throws you a <code>SyntaxError</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 5764762, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/749c5d4d0854d4c90c7b81d60509360b?s=128&d=identicon&r=PG&f=1", "display_name": "boysangur", "link": "https://stackoverflow.com/users/5764762/boysangur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1760, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1459616937, "creation_date": 1459373318, "last_edit_date": 1459374411, "question_id": 36320079, "link": "https://stackoverflow.com/questions/36320079/python-if-condition-with-multiple-variables", "title": "Python IF condition with multiple variables", "body": "<p>Could someone clarify this. What happens if I try to write this code:</p>\n\n<pre><code>if tomato = 1 or tomato = 2 or tomato = 3\n</code></pre>\n\n<p>... like this:</p>\n\n<pre><code>if tomato = 1 or 2 or 3 \n</code></pre>\n\n<p>I know Python doesn't consider it the same but what does it think I'm doing? </p>\n\n<p>Most importantly, what's the best way to do this if I have a whole bunch of conditions for tomato. Writing \"tomato =\" each time doesn't seem very neat.</p>\n"}, {"tags": ["python", "regex", "string", "list", "sorting"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1459373460, "post_id": 36320060, "comment_id": 60263524, "body": "just <code>sorted</code> works for your example.  can you give a better example?"}, {"owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 3, "creation_date": 1459373464, "post_id": 36320060, "comment_id": 60263527, "body": "<code>natsorted(s.split(&#39;+&#39;))</code> using <a href=\"https://pypi.python.org/pypi/natsort\" rel=\"nofollow noreferrer\">natsort</a> package."}, {"owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "reply_to_user": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 1, "creation_date": 1459373528, "post_id": 36320060, "comment_id": 60263562, "body": "@zondo will break for integers higher than 9"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1459373553, "post_id": 36320060, "comment_id": 60263576, "body": "Will the data contain integers higher than 9, then?"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1459373580, "post_id": 36320060, "comment_id": 60263595, "body": "<a href=\"http://ideone.com/QJfQSF\" rel=\"nofollow noreferrer\">ideone.com/QJfQSF</a>"}, {"owner": {"reputation": 44935, "user_id": 79061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3807bbfd4712d98d2ac0c79f01feb921?s=128&d=identicon&r=PG", "display_name": "Sebastian Paaske T&#248;rholm", "link": "https://stackoverflow.com/users/79061/sebastian-paaske-t%c3%b8rholm"}, "edited": false, "score": 1, "creation_date": 1459373605, "post_id": 36320060, "comment_id": 60263609, "body": "My guess would be that the intention of the question is for <code>[&#39;3a&#39;,&#39;5&#39;,&#39;4c&#39;,&#39;2b&#39;]</code> to become sorted to <code>[&#39;5&#39;,&#39;3a&#39;,&#39;2b&#39;,&#39;4c&#39;]</code>. I.e., sorting by the letter suffix, not by the integral value."}, {"owner": {"reputation": 559, "user_id": 5661257, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5ea35715e91596140ffa13e3b8863ad8?s=128&d=identicon&r=PG&f=1", "display_name": "R. Kap", "link": "https://stackoverflow.com/users/5661257/r-kap"}, "reply_to_user": {"reputation": 44935, "user_id": 79061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3807bbfd4712d98d2ac0c79f01feb921?s=128&d=identicon&r=PG", "display_name": "Sebastian Paaske T&#248;rholm", "link": "https://stackoverflow.com/users/79061/sebastian-paaske-t%c3%b8rholm"}, "edited": false, "score": 2, "creation_date": 1459373858, "post_id": 36320060, "comment_id": 60263734, "body": "@SebastianPaaskeT&#248;rholm Yes, you are correct."}, {"owner": {"reputation": 44935, "user_id": 79061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3807bbfd4712d98d2ac0c79f01feb921?s=128&d=identicon&r=PG", "display_name": "Sebastian Paaske T&#248;rholm", "link": "https://stackoverflow.com/users/79061/sebastian-paaske-t%c3%b8rholm"}, "edited": false, "score": 0, "creation_date": 1459373883, "post_id": 36320060, "comment_id": 60263741, "body": "@R.Kap Perfect. I figured it&#39;d be something like quaternions."}], "answers": [{"comments": [{"owner": {"reputation": 559, "user_id": 5661257, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5ea35715e91596140ffa13e3b8863ad8?s=128&d=identicon&r=PG&f=1", "display_name": "R. Kap", "link": "https://stackoverflow.com/users/5661257/r-kap"}, "edited": false, "score": 0, "creation_date": 1459374207, "post_id": 36320213, "comment_id": 60263880, "body": "What does  <code>(len(x),x[::-1])</code> actually do in the <code>lambda</code> function actually do?"}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "reply_to_user": {"reputation": 559, "user_id": 5661257, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5ea35715e91596140ffa13e3b8863ad8?s=128&d=identicon&r=PG&f=1", "display_name": "R. Kap", "link": "https://stackoverflow.com/users/5661257/r-kap"}, "edited": false, "score": 0, "creation_date": 1459374791, "post_id": 36320213, "comment_id": 60264133, "body": "@R.Kap: I have changed it slightly, but it returns a tuple of whether or not the string is a number and the reverse of the string.  If the string is a number, the tuple would be <code>(0, reversed_string)</code>, but if it isn&#39;t, it is <code>(1, reversed_string)</code>.  Since tuples with a lower value come first, a string that is just a number will come before a string that is not.  Using the reversed string as the second argument puts the last character, the letter, as of more importance than the others."}], "tags": [], "owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "is_accepted": false, "score": 1, "last_activity_date": 1459374474, "last_edit_date": 1459374474, "creation_date": 1459373912, "answer_id": 36320213, "question_id": 36320060, "link": "https://stackoverflow.com/questions/36320060/rearrange-string-in-python-according-to-whole-number-first-then-increasing-valu/36320213#36320213", "title": "Rearrange string in Python according to whole number first, then increasing values of groups", "body": "<p>You can use a key for <code>sorted()</code>:</p>\n\n<pre><code>&gt;&gt;&gt; sorted(['3a','5','4c','2b'], key=lambda x: (not x.isdigit(), x[::-1]))\n['5', '3a', '2b', '4c']\n</code></pre>\n\n<p>Note, though, that it might not work how you expect it to if your strings are more than two characters long.  You might do something like this:</p>\n\n<pre><code>sorted([...], key=lambda x: (not x.isdigit(), x[-1], int(x[:-1]) if x[:-1] else int(x)))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 0, "last_activity_date": 1459374976, "last_edit_date": 1459374976, "creation_date": 1459374454, "answer_id": 36320340, "question_id": 36320060, "link": "https://stackoverflow.com/questions/36320060/rearrange-string-in-python-according-to-whole-number-first-then-increasing-valu/36320340#36320340", "title": "Rearrange string in Python according to whole number first, then increasing values of groups", "body": "<p>Sort it with a key that returns a <code>tuple</code> containing the first priority - whether the element isn't all digits - followed by the second priority - the letters in the element - followed by the possible third priority - the integer value of the numbers in the element.</p>\n\n<pre><code>def sorter(l):\n    return sorted(l, key=lambda x: (not x.isdigit(),\n                                    ''.join(filter(str.isalpha, x)),\n                                    int(''.join(filter(str.isdigit, x)))))\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>&gt;&gt;&gt; sorter(['3a','1','4c','3b'])\n['1', '3a', '3b', '4c']\n&gt;&gt;&gt; sorter(['1231212', '1a'])\n['1231212', '1a']\n&gt;&gt;&gt; sorter(['13a', '3a'])\n['3a', '13a']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "is_accepted": false, "score": -1, "last_activity_date": 1459376026, "creation_date": 1459376026, "answer_id": 36320685, "question_id": 36320060, "link": "https://stackoverflow.com/questions/36320060/rearrange-string-in-python-according-to-whole-number-first-then-increasing-valu/36320685#36320685", "title": "Rearrange string in Python according to whole number first, then increasing values of groups", "body": "<p>Based on ideas from @zondo and @TigerhawkT3, and the fact that <code>''</code> is the smallest string:</p>\n\n<pre><code>lst = ['3a','1','4c','3b', '12312a', '12b', '4b', '3a']\nlst = sorted(lst, key = lambda s: \\\n    ('', int(s)) if s[-1].isdigit() else (s[-1], int(s[:-1])))\nprint lst\n# ['1', '3a', '3a', '12312a', '3b', '4b', '12b', '4c']\n</code></pre>\n"}], "owner": {"reputation": 559, "user_id": 5661257, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5ea35715e91596140ffa13e3b8863ad8?s=128&d=identicon&r=PG&f=1", "display_name": "R. Kap", "link": "https://stackoverflow.com/users/5661257/r-kap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 621, "favorite_count": 0, "closed_date": 1524100199, "answer_count": 3, "score": 2, "last_activity_date": 1459376026, "creation_date": 1459373270, "last_edit_date": 1459373835, "question_id": 36320060, "link": "https://stackoverflow.com/questions/36320060/rearrange-string-in-python-according-to-whole-number-first-then-increasing-valu", "closed_reason": "Duplicate", "title": "Rearrange string in Python according to whole number first, then increasing values of groups", "body": "<p>For example, consider the string <code>'3a+1+4c+3b'</code>. Then, using some regex, you split that into <code>['3a','1','4c','3b']</code>. <strong>How could I rearrange that list so that it is sorted such that the number without a letter following is put first in the list, then the rest of the elements are sorted in the  in increasing values of number/letter combinations?</strong> For example, <code>['3a','1','4c','3b']</code> becomes <code>['1','3a','3b','4c']</code>. </p>\n\n<p><strong>Edit:</strong></p>\n\n<p>So, just to clarify, I did use <code>sorted</code>, but if I use it, for example, on <code>2k+1-6j+9i</code>, which turns into <code>['1', '2k', '6j', '9i']</code>, as you can seem it is not sorted in order of increasing letter value. I want it to instead be <code>['1','9i','6j','3k']</code>.</p>\n"}, {"tags": ["python", "sockets", "lua", "client"], "answers": [{"comments": [{"owner": {"reputation": 369, "user_id": 3196122, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3470cf8b9593573047852ad550e9f31f?s=128&d=identicon&r=PG&f=1", "display_name": "KrawallKurt", "link": "https://stackoverflow.com/users/3196122/krawallkurt"}, "edited": false, "score": 0, "creation_date": 1459374057, "post_id": 36320220, "comment_id": 60263820, "body": "which means, I have to change the response in the server, right?"}], "tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 1, "last_activity_date": 1459373969, "creation_date": 1459373969, "answer_id": 36320220, "question_id": 36320007, "link": "https://stackoverflow.com/questions/36320007/lua-socket-receive-string-of-unknown-length/36320220#36320220", "title": "lua socket receive string of unknown length", "body": "<p>Lua receive is blocking, while python recv is non-blocking if there is at least 1 byte. The underlying tcp protocol does not guarantee that more than 1 byte is read. So it's only luck, if you receive the whole response in python. On the other side, Lua expects exactly 1024 bytes and waits until the server has send 1024 or the socket is closed.</p>\n\n<p>TCP is a streaming protocol. You need some kind of length indicator or end-of-message mark, like newline, you can write in lua:</p>\n\n<pre><code>s = sock:receive('*l')\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 3196122, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3470cf8b9593573047852ad550e9f31f?s=128&d=identicon&r=PG&f=1", "display_name": "KrawallKurt", "link": "https://stackoverflow.com/users/3196122/krawallkurt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1105, "favorite_count": 0, "accepted_answer_id": 36320220, "answer_count": 1, "score": 0, "last_activity_date": 1459373969, "creation_date": 1459372936, "question_id": 36320007, "link": "https://stackoverflow.com/questions/36320007/lua-socket-receive-string-of-unknown-length", "title": "lua socket receive string of unknown length", "body": "<p>I have a socket server which listens for commands and responds to them. The responses are not always of the same length. In python the following code runs fine, even if the response from the server is smaller than 1024 Bytes.</p>\n\n<pre><code>import socket\nsock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nsock.connect((\"localhost\", 9999))\nsock.sendall(bytes(\"command\\n\", 'utf-8'))\nprint(sock.recv(1024))\n</code></pre>\n\n<p>Now I want to translate this to an equivalent lua code. This is my attempt:</p>\n\n<pre><code>socket = require(\"socket\")\nsock = socket.connect(\"localhost\", 9999)\nsock:send(\"command\\n\")\ns, status, partial = sock:receive(1024)\nprint(s)\n</code></pre>\n\n<p>Unfortunately, the receive call blocks, if there are less than 1024 Bytes sent. How does the python client find out that the transmission is over and why does the lua client still wait?</p>\n"}, {"tags": ["python", "google-app-engine", "full-text-search", "stemming", "google-app-engine-python"], "owner": {"reputation": 73, "user_id": 1371081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KeVWm.jpg?s=128&g=1", "display_name": "Pastuszka Przemek", "link": "https://stackoverflow.com/users/1371081/pastuszka-przemek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 519, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1459372793, "creation_date": 1459372793, "question_id": 36319961, "link": "https://stackoverflow.com/questions/36319961/stemming-for-polish-language-using-google-app-engine-python-search-api", "title": "Stemming for Polish language using Google App Engine Python Search Api", "body": "<p>I'm trying to use Python Search Api in Google App Engine to search through set of Polish documents and I found, that stemming feature is not working as expected.</p>\n\n<p>The word \"red\" in English has only one form, although there are different forms of it in Polish, based on: gender, plurality and case:</p>\n\n<p>Non-plural:</p>\n\n<pre><code>|              | masculine  | feminine  | neuter     |\n|--------------|------------|-----------|------------|\n| Nominative   | czerwony   | czerwona  | czerwone   |\n| Genitive     | czerwonego | czerwonej | czerwonego |\n| Dative       | czerwonemu | czerwonej | czerwonemu |\n| Accusative   | czerwony   | czerwon\u0105  | czerwone   |\n| Instrumental | czerwonym  | czerwon\u0105  | czerwonym  |\n| Locative     | czerwonym  | czerwonej | czerwonym  |\n| Vocative     | czerwony   | czerwona  | czerwone   |\n</code></pre>\n\n<p>Plural (neuter is the same as feminine):</p>\n\n<pre><code>|              | masculine  | feminine   |\n|--------------|------------|------------|\n| Nominative   | czerwoni   | czerwone   |\n| Genitive     | czerwonych | czerwonych |\n| Dative       | czerwonym  | czerwonym  |\n| Accusative   | czerwonych | czerwone   |\n| Instrumental | czerwonymi | czerwonymi |\n| Locative     | czerwonych | czerwonych |\n| Vocative     | czerwoni   | czerwone   |\n</code></pre>\n\n<p>As you can see there are in total 12 unique forms of \"red\" in Polish: 'czerwony', 'czerwonym', 'czerwonego', 'czerwonemu', 'czerwona', 'czerwon\u0105', 'czerwonej', 'czerwone', 'czerwoni', 'czerwonymi', 'czerwonych', 'czerwonym'</p>\n\n<p>What I'd expect from Google App Engine stemmer is to treat all of them as being the same (as being \"red\"). Let's test it by adding endpoint to the App Engine app, which does as follows:</p>\n\n<pre><code>    def test_me():\n        forms = {'czerwony', 'czerwonym', 'czerwonego', 'czerwonemu',\n                     'czerwona', 'czerwon\u0105', 'czerwonej',\n                     'czerwone', 'czerwoni', 'czerwonymi', 'czerwonych',\n                     'czerwonym'}\n\n        # turn each form into document and insert to index\n        index = search.Index(name=str(uuid.uuid4()))\n        index.put([search.Document(language='pl',\n                                   fields=[\n                                       search.TextField(name='color', value=form,  language='pl')\n                                   ])\n                   for form in forms])\n\n        missing = {}\n        for form in forms:\n            # find out what forms can we match to 'form' using ~ stemming operator\n            results = index.search(query=\"~\" + form).results\n            matching_forms = set([doc.field('color').value for doc in results])\n\n            # and see which we missed\n            missing[form] = list(forms - matching_forms)\n\n        return json.dumps(missing)\n</code></pre>\n\n<p>It turns out there's bunch of items, which were not matched correctly:</p>\n\n<pre><code>\"czerwonym\": [\n  \"czerwona\",\n  \"czerwon\u0105\",\n  \"czerwoni\",\n  \"czerwonych\",\n  \"czerwonej\",\n  \"czerwonymi\",\n  \"czerwonemu\"\n],\n\"czerwonemu\": [\n  \"czerwona\",\n  \"czerwon\u0105\",\n  \"czerwone\",\n  \"czerwoni\",\n  \"czerwonych\",\n  \"czerwonej\",\n  \"czerwonego\",\n  \"czerwony\",\n  \"czerwonym\",\n  \"czerwonymi\"\n],\n...\n</code></pre>\n\n<p>Am I doing something wrong here? Or maybe I have wrong expectations for GAE stemmer?</p>\n\n<p>Please, note that there's a open-source polish stemmer (<a href=\"https://github.com/morfologik/morfologik-stemming\" rel=\"nofollow\">https://github.com/morfologik/morfologik-stemming</a>), which handles all 12 forms without any problems. This leads me to believe that my expectations for GAE stemmer are not outrageous.</p>\n"}, {"tags": ["python", "multithreading", "queue", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "is_accepted": true, "score": 4, "last_activity_date": 1459373491, "creation_date": 1459373491, "answer_id": 36320123, "question_id": 36319947, "link": "https://stackoverflow.com/questions/36319947/does-tensorflows-queuebase-enqueue-many-preserve-order-across-threads/36320123#36320123", "title": "Does Tensorflow&#39;s QueueBase.enqueue_many preserve order across threads?", "body": "<p>The order within the batches enqueued by each thread is preserved. Another way of putting this is that <a href=\"https://www.tensorflow.org/versions/r0.7/api_docs/python/io_ops.html#QueueBase.enqueue_many\" rel=\"nofollow\"><code>FIFOQueue.enqueue_many()</code></a> executes atomically* with respect to other enqueue operations on the same queue.</p>\n\n<hr>\n\n<p>*&nbsp;However, if the remaining capacity of the queue is less than the size of the batch being enqueued, it is possible to <em>dequeue</em> elements from the batch before the enqueue completes&mdash;i.e. you are able to enqueue batches that are <em>larger</em> than the capacity of the queue, and the enqueue op will block until enough elements have been dequeued.</p>\n"}], "owner": {"reputation": 807, "user_id": 1322301, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1a1fff802aa27212d66284e72960e263?s=128&d=identicon&r=PG&f=1", "display_name": "eriophora", "link": "https://stackoverflow.com/users/1322301/eriophora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 36320123, "answer_count": 1, "score": 5, "last_activity_date": 1459373491, "creation_date": 1459372738, "question_id": 36319947, "link": "https://stackoverflow.com/questions/36319947/does-tensorflows-queuebase-enqueue-many-preserve-order-across-threads", "title": "Does Tensorflow&#39;s QueueBase.enqueue_many preserve order across threads?", "body": "<p>Let's say two threads are simultaneously trying to enqueue N tensors each, into an instance of a FIFOQueue. I.e., they're calling</p>\n\n<p><code>queue_instance.enqueue_many(T)</code> where <code>T</code> is a list of tensors of length <code>N</code>. </p>\n\n<p>Let's label each tensor from the first thread as <code>T1_1</code> to <code>T1_N</code>, and <code>T2_1</code> to <code>T2_N</code> for the second thread. When all is said and done (both calls to <code>enqueue_many</code> have completed), will the order be preserved? I.e., will the queue contain either <code>[T1_1, ..., T1_N, T2_1, ..., T2_N]</code> or <code>[T2_1, ..., T2_N, T1_1, ..., T1_N]</code>? Or could the tensors be enqueued in an interleaved manner, i.e., <code>[T2_1, T2_2, T1_1, T2_3, T1_2, ...]</code>? Or, I suppose, a third option is that there is no rhyme or reason whatsoever: the tensors are enqueued in an arbitrary order.</p>\n"}, {"tags": ["python", "pandas", "floating-point", "precision"], "comments": [{"owner": {"reputation": 368, "user_id": 210091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZErxD.jpg?s=128&g=1", "display_name": "Jason De Arte", "link": "https://stackoverflow.com/users/210091/jason-de-arte"}, "edited": false, "score": 1, "creation_date": 1459372715, "post_id": 36319851, "comment_id": 60263161, "body": "Python docs on issues and limitations of floating points: <a href=\"https://docs.python.org/2/tutorial/floatingpoint.html\" rel=\"nofollow noreferrer\">docs.python.org/2/tutorial/floatingpoint.html</a>."}, {"owner": {"reputation": 1546, "user_id": 4410674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fb4899e4d5ddf6c49930f0b4161af21?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Bailey", "link": "https://stackoverflow.com/users/4410674/nick-bailey"}, "edited": false, "score": 1, "creation_date": 1459372842, "post_id": 36319851, "comment_id": 60263218, "body": "Sounds like floats are not the correct solution here. If calculations need to have arbitrary accuracy, use decimals, not floats: <a href=\"https://docs.python.org/2/library/decimal.html#module-decimal\" rel=\"nofollow noreferrer\">docs.python.org/2/library/decimal.html#module-decimal</a>"}, {"owner": {"reputation": 351, "user_id": 5233223, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f34a95fc7f79f3ada3cf8d9a0581432a?s=128&d=identicon&r=PG&f=1", "display_name": "jjvandermade", "link": "https://stackoverflow.com/users/5233223/jjvandermade"}, "edited": false, "score": 0, "creation_date": 1459373718, "post_id": 36319851, "comment_id": 60263664, "body": "Yes I am probably going to end up doing this. Thanks!"}, {"owner": {"reputation": 351, "user_id": 5233223, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f34a95fc7f79f3ada3cf8d9a0581432a?s=128&d=identicon&r=PG&f=1", "display_name": "jjvandermade", "link": "https://stackoverflow.com/users/5233223/jjvandermade"}, "edited": false, "score": 0, "creation_date": 1459374819, "post_id": 36319851, "comment_id": 60264146, "body": "decimal.Decimal doesn&#39;t support converting a pandas Dataframe/Series (or any list-like object for that matter) unfortunately (or I cannot figure it out at least). I am going with multiplying the entire thing by 100 and converting to integers."}], "answers": [{"comments": [{"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "edited": false, "score": 0, "creation_date": 1459372995, "post_id": 36319953, "comment_id": 60263292, "body": "What if the numbers are smaller than whatever precision you pick?"}, {"owner": {"reputation": 351, "user_id": 5233223, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f34a95fc7f79f3ada3cf8d9a0581432a?s=128&d=identicon&r=PG&f=1", "display_name": "jjvandermade", "link": "https://stackoverflow.com/users/5233223/jjvandermade"}, "edited": false, "score": 0, "creation_date": 1459373558, "post_id": 36319953, "comment_id": 60263579, "body": "The inaccuracy stays actually when you do this, but weirdly they are now the same(1.6000000000000001). In general though, rounding doesn&#39;t solve the inaccuracy problem"}], "tags": [], "owner": {"reputation": 798, "user_id": 4005915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/631230112/picture?type=large", "display_name": "Nathan Clement", "link": "https://stackoverflow.com/users/4005915/nathan-clement"}, "is_accepted": false, "score": 6, "last_activity_date": 1459372759, "creation_date": 1459372759, "answer_id": 36319953, "question_id": 36319851, "link": "https://stackoverflow.com/questions/36319851/how-to-truncate-floating-points-imprecision-in-python/36319953#36319953", "title": "How to truncate floating points imprecision in python", "body": "<p>You can use pd.Series.round() on the columns with floats.</p>\n\n<pre><code>precision = 2\ndf['col'] = df['col'].round(decimals = precision)\n</code></pre>\n\n<p>See: <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.round.html\" rel=\"noreferrer\">http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.round.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 1, "creation_date": 1459424913, "post_id": 36320023, "comment_id": 60287077, "body": "Please use <code>round</code> here; the direct use of <code>int</code> risks accidentally truncating values. E.g. <code>int(0.29 * 100)</code> -&gt; <code>28</code>."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1459425541, "post_id": 36320023, "comment_id": 60287543, "body": "@MarkDickinson, you are absolutely right, thank you for pointing that out! I&#39;ve changed my answer"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1459425497, "last_edit_date": 1459425497, "creation_date": 1459373039, "answer_id": 36320023, "question_id": 36319851, "link": "https://stackoverflow.com/questions/36319851/how-to-truncate-floating-points-imprecision-in-python/36320023#36320023", "title": "How to truncate floating points imprecision in python", "body": "<p>I would recommend you to do it as bankers do - use cents and integers instead of EUR/USD and float/decimal variables</p>\n\n<p>either convert it to cents on the MySQL side or do it in pandas:</p>\n\n<pre><code>df['amount'] = round(df['amount']*100)\n</code></pre>\n\n<p>You'll have much less problems then</p>\n"}], "owner": {"reputation": 351, "user_id": 5233223, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f34a95fc7f79f3ada3cf8d9a0581432a?s=128&d=identicon&r=PG&f=1", "display_name": "jjvandermade", "link": "https://stackoverflow.com/users/5233223/jjvandermade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5928, "favorite_count": 1, "accepted_answer_id": 36320023, "answer_count": 2, "score": 4, "last_activity_date": 1459425497, "creation_date": 1459372354, "question_id": 36319851, "link": "https://stackoverflow.com/questions/36319851/how-to-truncate-floating-points-imprecision-in-python", "title": "How to truncate floating points imprecision in python", "body": "<p>I am writing a program for which it is important to compare and rank values in a date series. However, I am running into problems with the imprecision of floats</p>\n\n<p>I am pulling these data from my SQL server that are both supposed to be 1.6. However, they turn out to be slightly different (see below). Therefore, when I use dataframe.rank(), it doesn't treat these two dates as the same rank, but rather ranks 01/02/2004 above 02/01/2005.  </p>\n\n<p>Anyone have any idea how to deal with this so that these two would end up on the same rank? </p>\n\n<pre><code>modelInputData.loc['01/02/2004',('Level','inflationCore','EUR')]\nOut[126]: 1.6000000000000003\n\nmodelInputData.loc['02/01/2005',('Level','inflationCore','EUR')]\nOut[127]: 1.6000000000000001\n</code></pre>\n"}, {"tags": ["python", "algorithm", "numpy"], "comments": [{"owner": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "edited": false, "score": 0, "creation_date": 1459374254, "post_id": 36319774, "comment_id": 60263906, "body": "For an arbitrary unit vector it is not necessarily possible to scale it so that both entries are integers. Are you only concerned with the subset of unit vectors that have this property?"}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "edited": false, "score": 0, "creation_date": 1459374849, "post_id": 36319774, "comment_id": 60264160, "body": "@Christian I know that the unit vector is an eigenvector of a matrix with integer entries and that the eigenvalues are also integers. Thus, pre-normalization, the vector certainly had rational values. I&#39;ll add this to the question."}, {"owner": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "edited": false, "score": 0, "creation_date": 1459377207, "post_id": 36319774, "comment_id": 60265137, "body": "Do you only have access to the eigenvalues and eigenvectors, or do you have access to the original matrix that these were derived from?"}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "edited": false, "score": 0, "creation_date": 1459378083, "post_id": 36319774, "comment_id": 60265443, "body": "@Christian I have access, but I&#39;m not looking to re-diagonals the matrix. I&#39;m mostly looking for solutions that don&#39;t rely on the eigenvalues or the matrix because that&#39;s not going to apply in other cases."}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "edited": false, "score": 0, "creation_date": 1459393432, "post_id": 36319774, "comment_id": 60269721, "body": "For the time being, here&#39;s a <a href=\"http://www.mathworks.com/help/matlab/ref/rat.html?requestedDomain=www.mathworks.com\" rel=\"nofollow noreferrer\">relevant link</a>."}], "answers": [{"comments": [{"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1459379635, "post_id": 36320736, "comment_id": 60265983, "body": "I&#39;ll try implementing this when I get home. Both the length of the vector and the common denominator will be relatively bounded (i.e. no crazy cases). Presumably this will help with both the &quot;tolerable accuracy&quot; and in accurately identifying the LCM of the divisors?"}, {"owner": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "edited": false, "score": 0, "creation_date": 1459396168, "post_id": 36320736, "comment_id": 60270415, "body": "This seems like a fun way to do it, but wouldn&#39;t this have essentially the same algorithmic complexity as the original &quot;naive approach&quot;?"}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "edited": false, "score": 0, "creation_date": 1459402554, "post_id": 36320736, "comment_id": 60272502, "body": "@Christian my intuition makes me think that this approach will be O(log n) rather than O(n) where n is the denominator, but I need to reinvestigate continued fractions to validate that claim. The &quot;nearest square number part&quot; is clearly constant time in terms of complexity. You&#39;ve been awfully curious about this question, do you have any insight? (I don&#39;t intend for that to sound combative, any thoughts are welcome.)"}, {"owner": {"reputation": 185753, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1459402899, "post_id": 36320736, "comment_id": 60272634, "body": "I&#39;m more than willing to admit that numeric stuff isn&#39;t my strong suit, so I&#39;d be happy to see more answers here. I&#39;m not sure if this method is faster or better than any other, just throwing it out there as a suggestion :)"}, {"owner": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "reply_to_user": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1459403138, "post_id": 36320736, "comment_id": 60272740, "body": "@Jared No combativeness perceived. I am very intrigued this problem and have been thinking about it all day, but have yet to come up with anything that is superior to the original algorithm you proposed. Hopefully a vision will come to me soon :)"}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1459412531, "post_id": 36320736, "comment_id": 60278177, "body": "If you&#39;re curious, it seems that <a href=\"https://hg.python.org/cpython/file/2.7/Lib/fractions.py#l107\" rel=\"nofollow noreferrer\"><code>Fraction.limit_denominator</code></a> takes a similar approach."}], "tags": [], "owner": {"reputation": 185753, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 2, "last_activity_date": 1459376687, "last_edit_date": 1459376687, "creation_date": 1459376274, "answer_id": 36320736, "question_id": 36319774, "link": "https://stackoverflow.com/questions/36319774/denormalize-unit-vector/36320736#36320736", "title": "Denormalize unit vector", "body": "<p>You could square the terms, find the sequence of continued fraction convergents of each, <em>replace the numerator of each convergent with the nearest square number</em>, and look for the smallest denominator that appears in all of the lists of convergents (as part of convergents with tolerable accuracy). Your definition of \"tolerable accuracy\" allows the algorithm to deal with a bit of rounding error without producing an insanely large result. In the case of your example, 9/10 and 1/10 would be among the first few convergents, with relative errors less than 10^-9, and sqrt(10) would be your scaling factor (multiplying out to [3, -1] which you can read directly off of the square roots of the numerators of the convergents, if you make sure to recover the signs).  It's unclear what to do if this algorithm <em>doesn't</em> find a common denominator, though.</p>\n"}, {"comments": [{"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1459410313, "post_id": 36326519, "comment_id": 60276764, "body": "This works beautifully, very nice job. To get any bearing on complexity, we&#39;d have to dive into the inner-workings of <code>Fraction</code>, which may be another adventure in itself."}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1459412310, "post_id": 36326519, "comment_id": 60278045, "body": "To elaborate, <code>float.as_integer_ratio</code> starts the process, but yields a denominator on the order of 10^15. The remainder of the work is done in <code>limit_denominator</code>, part of which resembles Euclid&#39;s algorithm. From the docstring, &quot;then it can be proved that a rational number is a best upper or lower approximation to x if, and only if, it is a convergent or semiconvergent of the (unique shortest) continued fraction.&quot;"}, {"owner": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "reply_to_user": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1459434863, "post_id": 36326519, "comment_id": 60294679, "body": "Glad you like it! Yeah I wondered if the <code>fractions</code> module was using some of @Hobbs&#39; convergents ideas under the hood. As for the complexity, I&#39;d be in a bit over my head, but if anything it might run faster than your original proposal in most cases simply because <code>fractions</code> is (hopefully) highly optimized."}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1459549811, "post_id": 36326519, "comment_id": 60353090, "body": "After further testing, this is limited to pretty small denominators. For example, [-50, 1] will not work."}, {"owner": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "reply_to_user": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1459552924, "post_id": 36326519, "comment_id": 60353964, "body": "Right. You have to fine tune the <code>MAX_DENOMINATOR</code> value based on what you&#39;re expecting. In my original code, <code>MAX_DENOMINATOR = 1000</code>, so in this case where the denominators is <code>50**2 + 1**2 = 2501</code>. It won&#39;t work. You can probably safely set MAX_DENOMINATOR much higher, just at some point you might start running into precision errors."}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1459556482, "post_id": 36326519, "comment_id": 60354887, "body": "I believe I tried setting it higher without success, but I&#39;ll have to verify that later. Either way, the square root portion is a red herring. It seems that dividing the vector by the smallest non-zero entry and then LCMing those denominators is a more reliable approach with the added benefit of having the maximum denominator based off the entries rather than the square of the norm."}, {"owner": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "reply_to_user": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1459556722, "post_id": 36326519, "comment_id": 60354948, "body": "True. Your enhanced approach is better."}], "tags": [], "owner": {"reputation": 639, "user_id": 5776361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8e035811e47496a83b9920b45e1fbc?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/5776361/christian"}, "is_accepted": false, "score": 2, "last_activity_date": 1459434946, "last_edit_date": 1459434946, "creation_date": 1459408378, "answer_id": 36326519, "question_id": 36319774, "link": "https://stackoverflow.com/questions/36319774/denormalize-unit-vector/36326519#36326519", "title": "Denormalize unit vector", "body": "<p>Ok, here's my best stab at it. This algorithm seems to work, though I can't guarantee it will be faster than what you originally proposed:</p>\n\n<pre><code>import numpy as np\nfrom fractions import Fraction, gcd\n\n# need some finesse and knowledge of problem domain to fine tune this parameter\n# otherwise you'll end up with extremely large k due to precision problems\nMAX_DENOMINATOR = 1000\n\n# least common multiple\ndef lcm(a, b):\n    return a * b / gcd(a, b)\n\n# returns the denominator of the square of a number\ndef get_square_denominator(x):\n    return Fraction(x ** 2).limit_denominator(MAX_DENOMINATOR).denominator\n\n# returns the smallest multiplier, k, that can be used to scale a vector to\n# have integer coefficients. Assumes vector has the property that it can be \n# expressed as [x**0.5, y**0.5, ...] where x, y, ... are rational with \n# denominators &lt;= MAX_DENOMINATOR\ndef get_k(v):\n    denominators = [get_square_denominator(i.item()) for i in v]\n    return reduce(lcm, denominators) ** 0.5\n</code></pre>\n\n<p>Here it is in use:</p>\n\n<pre><code>&gt;&gt;&gt; u = matrix([[0.9486833], [-0.31622777]])\n&gt;&gt;&gt; get_k(u)\n3.1622776601683795\n&gt;&gt;&gt; get_k(u) * u\nmatrix([[ 3.00000001],\n        [-1.00000001]])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1459545293, "post_id": 36365749, "comment_id": 60351299, "body": "Good observation. This also works wonderfully (after the p=0 check is added)."}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1459548675, "post_id": 36365749, "comment_id": 60352726, "body": "Note that this only makes sense with 2D-vectors."}], "tags": [], "owner": {"reputation": 16399, "user_id": 4016285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SvSVV.png?s=128&g=1", "display_name": "B. M.", "link": "https://stackoverflow.com/users/4016285/b-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1459544336, "creation_date": 1459544336, "answer_id": 36365749, "question_id": 36319774, "link": "https://stackoverflow.com/questions/36319774/denormalize-unit-vector/36365749#36365749", "title": "Denormalize unit vector", "body": "<p>Let <code>u=[cos(\u03b1),sin(\u03b1)]</code> the unit vector of <code>v=[p,q]</code>, where <code>p</code> and <code>q</code> are  <em>little</em> integers, prime together . Then <code>tan(\u03b1)</code> is a rational. </p>\n\n<p>So there is a straightforward way to find back <code>v</code> from <code>u</code> : <code>fractions.Fraction(u[1]/u[0]).limit_denominator()</code></p>\n\n<p>Example :</p>\n\n<pre><code>v=array([-1,3])\nu=v/np.linalg.norm(v)\n# array([-0.31622777,  0.9486833 ])\nf=Fraction(u[1]/u[0]).limit_denominator()\n# Fraction(-1, 3)\n</code></pre>\n\n<p>if you want <code>k</code>, <code>norm([f.numerator,f.denominator])</code> give it.</p>\n\n<p><code>p=0</code> is a trivial particular case.</p>\n"}, {"tags": [], "owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "is_accepted": true, "score": 4, "last_activity_date": 1459551626, "last_edit_date": 1459551626, "creation_date": 1459551322, "answer_id": 36367043, "question_id": 36319774, "link": "https://stackoverflow.com/questions/36319774/denormalize-unit-vector/36367043#36367043", "title": "Denormalize unit vector", "body": "<p>I've improved the methodology provided by Christian in order to accept a wider range of fractions. The trick was to \"pre-normalize\" the unit vector by dividing it by the smallest non-zero entry. This works reliably for all fractions of a specified maximum denominator.</p>\n\n<pre><code>from fractions import Fraction, gcd\n\ndef recover_integer_vector(u, denom=50):\n    '''\n    For a given vector u, return the smallest vector with all integer entries.\n    '''\n\n    # make smallest non-zero entry 1\n    u /= min(abs(x) for x in u if x)\n\n    # get the denominators of the fractions\n    denoms = (Fraction(x).limit_denominator(denom).denominator for x in u)\n\n    # multiply the scaled u by LCM(denominators)\n    lcm = lambda a, b: a * b / gcd(a, b)\n    return u * reduce(lcm, denoms)\n</code></pre>\n\n<hr>\n\n<h2>Testing:</h2>\n\n<p>The following code was used to ensure that all fractions in the given range work correctly.</p>\n\n<pre><code>import numpy as np\n\nfrom numpy import array\nfrom itertools import combinations_with_replacement\n\n\nfor t in combinations_with_replacement(range(1, 50), 3):\n    if reduce(gcd, t) != 1: continue\n\n    v = array(map(float, t))\n    u = v / np.linalg.norm(v)\n\n    w = recover_integer_vector(u)\n\n    assert np.allclose(w, v) or np.allclose(w, -v)\n</code></pre>\n\n<hr>\n\n<p>As can be seen by the testing time, this code is <strong>not</strong> very quick. It took my computer about 6 seconds to test. I'm not sure whether the timing can be improved.</p>\n"}], "owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 949, "favorite_count": 3, "accepted_answer_id": 36367043, "answer_count": 4, "score": 9, "last_activity_date": 1459551626, "creation_date": 1459372072, "last_edit_date": 1495541825, "question_id": 36319774, "link": "https://stackoverflow.com/questions/36319774/denormalize-unit-vector", "title": "Denormalize unit vector", "body": "<p>Suppose I have the unit vector, <strong><em>u</em></strong>.</p>\n\n<pre><code>from numpy import mat\nu = mat([[0.9**0.5], [-(0.1)**0.5]])\n# [ 0.9486833  -0.31622777]\n</code></pre>\n\n<p>The unit vector is an eigenvector of a matrix with integer entries. I also know that the eigenvalues are integers. So, the unit vector will contain irrational decimals that, when squared, are decimal approximations of rational numbers.</p>\n\n<p>Is there any good way to find the smallest value <em>k</em> such that all entries of <em>k<strong>u</em></strong> are integers? In general, <em>k</em> will be the square root of an integer.</p>\n\n<p>A naive approach would be to square each entry in the vector and find the smallest <em>k<sub>i</sub></em> that produces an integer. Then, <em>k</em> will be the square root the of LCM of all <em>k<sub>i</sub></em>. I'm hoping there is a better approach than this.</p>\n\n<hr>\n\n<p>Note that this is not a duplicate of <a href=\"https://stackoverflow.com/questions/26912479/denormalize-vector\">this question</a>.</p>\n"}, {"tags": ["python", "python-2.7", "pdf"], "comments": [{"owner": {"reputation": 1561, "user_id": 5721385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UMvWp.png?s=128&g=1", "display_name": "DZDomi", "link": "https://stackoverflow.com/users/5721385/dzdomi"}, "edited": false, "score": 0, "creation_date": 1459372088, "post_id": 36319765, "comment_id": 60262817, "body": "Show some code what you have tried so far"}, {"owner": {"reputation": 2400, "user_id": 5266746, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cb43ae82055fed862c2ba3e6ed9c8e9f?s=128&d=identicon&r=PG&f=1", "display_name": "n1c9", "link": "https://stackoverflow.com/users/5266746/n1c9"}, "edited": false, "score": 0, "creation_date": 1459372879, "post_id": 36319765, "comment_id": 60263239, "body": "You may have better luck downloading a Python library like <code>pdfminer</code> and using that to extract text/HTML/XML from the PDF."}, {"owner": {"reputation": 9, "user_id": 6123605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pCKMt.jpg?s=128&g=1", "display_name": "sh55z", "link": "https://stackoverflow.com/users/6123605/sh55z"}, "edited": false, "score": 0, "creation_date": 1459373216, "post_id": 36319765, "comment_id": 60263404, "body": "can i read text fro the PDF line by line using Pdfminer ?"}], "owner": {"reputation": 9, "user_id": 6123605, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pCKMt.jpg?s=128&g=1", "display_name": "sh55z", "link": "https://stackoverflow.com/users/6123605/sh55z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1504, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459374021, "creation_date": 1459372038, "last_edit_date": 1459374021, "question_id": 36319765, "link": "https://stackoverflow.com/questions/36319765/how-to-read-the-pdf-file-in-a-line-by-line-in-python", "title": "how to read the PDF file in a line by line in Python?", "body": "<p>i have a problem reading PDF file in python 2.7 line by line\ni want to read each line separately and print them, the solutions that have in this site i used before but not working.</p>\n\n<p>I try this code</p>\n\n<pre><code>import PyPDF2\npdfFileObj = open('c:\\python\\anms.pdf','rb')\npdfReader = PyPDF2.PdfFileReader(pdfFileObj)\npdfReader.numPages\npageObj = pdfReader.getPage(0)\npageObj.extractText()\n</code></pre>\n\n<p>but this code extract all strings in PDF i want extract all strings but line by line not all together.</p>\n\n<p>import PyPDF2</p>\n\n<p>pdfFileObj = open('c:\\python\\anms.pdf','rb')</p>\n\n<p>pdfReader = PyPDF2.PdfFileReader(pdfFileObj)</p>\n\n<p>pdfReader.numPages</p>\n\n<p>pageObj =pdfReader.getPage(0)</p>\n\n<p>pageObj.extractText()</p>\n\n<p>but this code extract all strings in PDF i want extract all strings but line by line .</p>\n"}, {"tags": ["python", "metaclass"], "answers": [{"comments": [{"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 0, "creation_date": 1459375343, "post_id": 36320070, "comment_id": 60264388, "body": "Elegant, simple, pythonic. Best way to do it IMO."}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1459375743, "post_id": 36320070, "comment_id": 60264567, "body": "I agree that is it the simplest way to do it, although it doesn&#39;t provide a way to automate counting the number of calls to every method defined which is probably why the OP is using a metaclass in the first place."}, {"owner": {"reputation": 289, "user_id": 505285, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0e24afb59bd1fdf40fb5beed78e71484?s=128&d=identicon&r=PG", "display_name": "Dominique", "link": "https://stackoverflow.com/users/505285/dominique"}, "edited": false, "score": 0, "creation_date": 1459546186, "post_id": 36320070, "comment_id": 60351728, "body": "Thanks. I appreciate the simplicity of this approach. I used to do something similar, but abandoned it because it wasn&#39;t user friendly to have to implement a method with a name that doesn&#39;t directly reflect the functionality you&#39;re implementing."}], "tags": [], "owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "is_accepted": false, "score": 2, "last_activity_date": 1459373287, "creation_date": 1459373287, "answer_id": 36320070, "question_id": 36319757, "link": "https://stackoverflow.com/questions/36319757/counting-calls-to-certain-methods-of-a-class-and-of-any-subclass/36320070#36320070", "title": "Counting calls to certain methods of a class and of any subclass", "body": "<p>You can skip the metaclass by changing your inheritance pattern a little:</p>\n\n<pre><code>class Thing(object):\n    def __init__(self):\n        self.fun_calls = 0\n\n    def fun(self, *args, **kwargs):\n        self.fun_calls += 1\n        self._fun(*args, **kwargs)\n\n    def _fun(self, *args, **kwargs):\n        raise NotImplementedError()\n</code></pre>\n\n<p>Then just override <code>_fun</code> in your subclasses. This gets you per-instance automatic counting, and it's (imo) cleaner and more understandable than a metaclass implementation. </p>\n"}, {"tags": [], "owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "is_accepted": false, "score": 0, "last_activity_date": 1459375606, "last_edit_date": 1459375606, "creation_date": 1459374951, "answer_id": 36320458, "question_id": 36319757, "link": "https://stackoverflow.com/questions/36319757/counting-calls-to-certain-methods-of-a-class-and-of-any-subclass/36320458#36320458", "title": "Counting calls to certain methods of a class and of any subclass", "body": "<p>In order to keep track of the calls for each instance instead of each function, you would need the variable keeping track of it to be on the instance, something like:</p>\n\n<pre><code>def countcalls(fn):\n    def wrapper(self,*args, **kwargs):\n        self._calls_dict[wrapper]+=1\n        return fn(self,*args, **kwargs)\n    wrapper.__name__ = fn.__name__\n    wrapper.__doc__ = fn.__doc__\n    return wrapper\n</code></pre>\n\n<p>although you need some way of initializing the dictionary for the first call:</p>\n\n<pre><code>import collections\n\ndef countcalls(fn):\n    def wrapper(self,*args, **kwargs):\n        if not hasattr(self,\"_calls_dict\"):\n            self._calls_dict = collections.defaultdict(int)\n        self._calls_dict[wrapper.__name__]+=1\n        return fn(self,*args, **kwargs)\n    wrapper.__name__ = fn.__name__\n    wrapper.__doc__ = fn.__doc__\n    return wrapper\n</code></pre>\n\n<p>although please note that this will fall apart if this decorator is applied to <code>classmethod</code>s or <code>staticmethod</code>s so be careful how you implement this.</p>\n\n<p>This also complicates how to retrieve the number of calls but it can be done fairly easily with a seperate function:</p>\n\n<pre><code>from types import MethodType\n\ndef get_calls(method):\n    if not isinstance(method,MethodType):\n        raise TypeError(\"must pass bound method as argument\")\n\n    func = method.__func__\n    inst = method.__self__\n\n    dct = getattr(inst,\"_calls_dict\",None)\n    if dct is None or func not in dct:\n        return 0 #maybe raise an error instead?\n    else:\n        return dct[func]\n</code></pre>\n"}], "owner": {"reputation": 289, "user_id": 505285, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0e24afb59bd1fdf40fb5beed78e71484?s=128&d=identicon&r=PG", "display_name": "Dominique", "link": "https://stackoverflow.com/users/505285/dominique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1459375606, "creation_date": 1459372005, "question_id": 36319757, "link": "https://stackoverflow.com/questions/36319757/counting-calls-to-certain-methods-of-a-class-and-of-any-subclass", "title": "Counting calls to certain methods of a class and of any subclass", "body": "<p>I have a generic class that users are supposed to subclass in order to implement certain methods. There can be subclasses several levels deep. Something like</p>\n\n<pre><code>class Thing(object):\n    def fun(self, *args, **kwargs):\n        raise NotImplementedError()\n\nclass Bell(Thing):\n    def fun(self):\n        return 1\n\nclass Whistle(Bell):\n    def fun(self):\n        return super(Whistle, self).fun() + 1\n</code></pre>\n\n<p>I would like to count the number of times that <code>fun()</code> is called when any subclass of <code>Thing</code> is used. Because decorators aren't inherited, and because I don't want users to have to remember to decorate their <code>fun()</code> method, my understanding is that metaclasses are the way to go. So I wrote</p>\n\n<pre><code>class CountCalls(type):\n\n    def __new__(cls, name, bases, attrs):\n        attrs[\"_original_fun\"] = attrs[\"fun\"]\n        attrs[\"fun\"] = countcalls(attrs[\"_original_fun\"])\n        return super(CountCalls, cls).__new__(cls, name, bases, attrs)\n</code></pre>\n\n<p>where <code>countcalls</code> is the classic decorator to count the number of calls:</p>\n\n<pre><code>def countcalls(fn):\n    def wrapper(*args, **kwargs):\n        wrapper.ncalls += 1\n        return fn(*args, **kwargs)\n    wrapper.ncalls = 0\n    wrapper.__name__ = fn.__name__\n    wrapper.__doc__ = fn.__doc__\n    return wrapper\n</code></pre>\n\n<p>and changed the definition of <code>Thing</code> to</p>\n\n<pre><code>class Thing(object):\n\n    __metaclass__ = CountCalls\n\n    def fun(self, *args, **kwargs):\n        raise NotImplementedError()\n</code></pre>\n\n<p><strong>Problem</strong>: That works, but it has the unintended side effect of incrementing the number of calls counter of <em>all</em> instances when the <code>fun()</code> method of <em>any</em>  instance is called:</p>\n\n<pre><code>&gt;&gt;&gt; b1 = Bell()\n&gt;&gt;&gt; b2 = Bell()\n&gt;&gt;&gt; b1.fun.ncalls, b2.fun.ncalls\n(0, 0)\n&gt;&gt;&gt; b1.fun()\n1\n&gt;&gt;&gt; b1.fun.ncalls, b2.fun.ncalls\n(1, 1)\n</code></pre>\n\n<p><strong>Question</strong>: How do I count the number of calls to <code>fun()</code> on a per-instance basis? It feels like I should be implementing <code>__init__</code> instead of <code>__new__</code> in the metaclass, but so far I've not found the correct syntax. For example, using</p>\n\n<pre><code>def __init__(self, name, bases, attrs):\n    attrs[\"_original_fun\"] = attrs[\"fun\"]\n    attrs[\"fun\"] = countcalls(attrs[\"_original_fun\"])\n    super(CountCalls, self).__init__(name, bases, attrs)\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>&gt;&gt;&gt; b = Bell()\n&gt;&gt;&gt; b.fun.ncalls\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'function' object has no attribute 'ncalls'\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "scrapy", "web-crawler"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 6136871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8bae35b120b77836c8b33a3ff9944732?s=128&d=identicon&r=PG&f=1", "display_name": "Jakebut", "link": "https://stackoverflow.com/users/6136871/jakebut"}, "edited": false, "score": 0, "creation_date": 1459437379, "post_id": 36327739, "comment_id": 60296663, "body": "Thanks for response. I&#39;ve tested this and I&#39;m afraid it doesn&#39;t work. This if-else statement seems to be executed after creating whole lists above, so it can&#39;t be used to filter them dynamically. To be more specific on what I need: I don&#39;t want to create item for product which doesn&#39;t have price (product-price-integer), I want to skip it entirely."}, {"owner": {"reputation": 3331, "user_id": 2207154, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7aa69b76fccb8e819a1de0887437ddc9?s=128&d=identicon&r=PG&f=1", "display_name": "Daniil Mashkin", "link": "https://stackoverflow.com/users/2207154/daniil-mashkin"}, "reply_to_user": {"reputation": 77, "user_id": 6136871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8bae35b120b77836c8b33a3ff9944732?s=128&d=identicon&r=PG&f=1", "display_name": "Jakebut", "link": "https://stackoverflow.com/users/6136871/jakebut"}, "edited": false, "score": 0, "creation_date": 1459440006, "post_id": 36327739, "comment_id": 60298515, "body": "I corrected the answer, check it up once more. I replaced xpath to css selectors. Now they&#39;re search elements currently in div rather than by all html page and return one element instead of full array. You can check your selectors in <code>scrapy shell</code> console."}], "tags": [], "owner": {"reputation": 3331, "user_id": 2207154, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7aa69b76fccb8e819a1de0887437ddc9?s=128&d=identicon&r=PG&f=1", "display_name": "Daniil Mashkin", "link": "https://stackoverflow.com/users/2207154/daniil-mashkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1459439751, "last_edit_date": 1459439751, "creation_date": 1459412083, "answer_id": 36327739, "question_id": 36319709, "link": "https://stackoverflow.com/questions/36319709/scrapy-python-skipping-section-of-site/36327739#36327739", "title": "Scrapy (Python) - skipping section of site", "body": "<p>I tried </p>\n\n<pre><code>scrapy shell http://promocje.zabka.pl/\n</code></pre>\n\n<p>And the main idea is you should use <code>div</code> as starting point for your next selectors.</p>\n\n<pre><code>In [32]: div  = response.xpath('//div[@class=\"product-description\"]')[0]\nIn [33]: div.css('h2::text').extract()\nOut[33]: [u'Babka marmur Dan Cake, 40 g']\n\nIn [34]: div.css('span[class=\"product-price-integer\"]::text').extract()\nOut[34]: [u'1']\n</code></pre>\n\n<p>Try this approach</p>\n\n<pre><code>def parse(self, response):\nlist = []\nfor div in response.xpath('//div[@class=\"product-description\"]'):\n    price = div.css('span[class=\"product-price-integer\"]::text').extract()\n    price1 = div.css('span[class=\"product-price-decimal\"]::text').extract()\n    title = div.css('h2::text').extract()[0].split(\",\")\n    amount = div.css('p[class=\"product-unit\"]::text').extract()[0]\n\n    if price and price1:\n        price = price[0]\n        price1 = price1[0]\n        item = NettutsItem()\n        # do some stuff with item\n        yield item\n</code></pre>\n\n<p>Code may be more pretty. </p>\n"}], "owner": {"reputation": 77, "user_id": 6136871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8bae35b120b77836c8b33a3ff9944732?s=128&d=identicon&r=PG&f=1", "display_name": "Jakebut", "link": "https://stackoverflow.com/users/6136871/jakebut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 490, "favorite_count": 0, "accepted_answer_id": 36327739, "answer_count": 1, "score": 1, "last_activity_date": 1459439751, "creation_date": 1459371870, "question_id": 36319709, "link": "https://stackoverflow.com/questions/36319709/scrapy-python-skipping-section-of-site", "title": "Scrapy (Python) - skipping section of site", "body": "<p>I'm working on web-crawler collecting data from store's site <a href=\"https://www.promocje.zabka.pl\" rel=\"nofollow\">https://www.promocje.zabka.pl</a>.\nSometimes it happens that a product doesn't have price attached in normal way (i.e. in span \"product-price-integer\"). It causes troubles in the loop due to different sizes of arrays. I could limit iterations to the length of the shortest array, but it is likely to distort the results (shifts).\nHere's my question: <strong>how can I just skip whole div of the product where one of fields (price-integer, price-decimal) is empty or doesn't exist?</strong></p>\n\n<p>Here's my code (note that amount usually is not needed since I can extract more accurate value from product's name; that's the reason for if)</p>\n\n<pre><code>class MySpider(BaseSpider):\n    name        = \"zabka\"\n    allowed_domains = [\"zabka.pl\"]\n    start_urls  = [\"http://promocje.zabka.pl\"]\n\n    def parse(self, response):\n        hxs     = HtmlXPathSelector(response)\n        titles  = hxs.select('//div[@class=\"product-description\"]/h2/text()').extract()\n        prices  = hxs.select('//span[@class=\"product-price-integer\"]/text()').extract()\n        prices1 = hxs.select('//span[@class=\"product-price-decimal\"]/text()').extract()\n        amounts = hxs.select('//p[@class=\"product-unit\"]/text()').extract()\n\n        list = []\n\n        for i in range(len(titles)):\n            split = titles[i].split(\",\")\n            if len(split) &gt; 1:\n                list1 = split[0] + \"  -  \" + prices[i] + \",\" + prices1[i] + \"  -  \" + split[len(split) - 1]\n            else:\n                list1 = titles[i] + \"  -  \" + prices[i] + \",\" + prices1[i] + \"  -  \" + amounts[i]\n            list.append(list1)\n\n        for l in list:\n            item = NettutsItem()\n            item[\"title\"] = l\n            yield item\n</code></pre>\n"}, {"tags": ["python", "pagination", "flask-sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 3252, "user_id": 5121448, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d03ec9caa5409449cb47f21db2c7c2aa?s=128&d=identicon&r=PG&f=1", "display_name": "carl", "link": "https://stackoverflow.com/users/5121448/carl"}, "is_accepted": false, "score": 0, "last_activity_date": 1459428945, "creation_date": 1459428945, "answer_id": 36334148, "question_id": 36319702, "link": "https://stackoverflow.com/questions/36319702/flask-sqlalchemy-paginate-function-does-not-get-the-same-elements-when-run-twi/36334148#36334148", "title": "flask sqlalchemy paginate() function does not get the same elements when run twice", "body": "<p>ok I don't know the answer to this question but ordering the query (order_by) solved my problem... I am still interested to know why paginate does not have an order by itself, because it basically means that without the order statement, paginate cannot be used to iterate through all elements?\ncheers\ncarl</p>\n"}], "owner": {"reputation": 3252, "user_id": 5121448, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d03ec9caa5409449cb47f21db2c7c2aa?s=128&d=identicon&r=PG&f=1", "display_name": "carl", "link": "https://stackoverflow.com/users/5121448/carl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459428945, "creation_date": 1459371841, "question_id": 36319702, "link": "https://stackoverflow.com/questions/36319702/flask-sqlalchemy-paginate-function-does-not-get-the-same-elements-when-run-twi", "title": "flask sqlalchemy paginate() function does not get the same elements when run twice", "body": "<p>I am using a simple sqlalchemy paginate statement like this</p>\n\n<p>items = models.Table.query.paginate(page, 100, False)</p>\n\n<p>with page = 1. When running this command twice I get different outputs? If I run it with less element (e.g. 10) it gives me the same outputs when run multiple times? I thought for a paginate command to work it has to result in the same set each time it is called? \ncheers \ncarl</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 10796, "user_id": 1105249, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/083d54b8327a76a1dcf57df507ab7b34?s=128&d=identicon&r=PG", "display_name": "Luis Masuelli", "link": "https://stackoverflow.com/users/1105249/luis-masuelli"}, "edited": false, "score": 0, "creation_date": 1459372412, "post_id": 36319687, "comment_id": 60262991, "body": "I&#39;m totally clueless how do you swap the values if the two lines are the same <code>print &#39;id&#39;,str(int(val[0])), &#39;value&#39;, str(int(val[1])) + &quot;-&quot; + str(int(val[2]))</code> and <code>print &#39;id&#39;,str(int(val[0])), &#39;value&#39;, str(int(val[1])) + &quot;-&quot; + str(int(val[2]))</code>"}, {"owner": {"reputation": 1025, "user_id": 3449019, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/hVAtP.jpg?s=128&g=1", "display_name": "Nobi", "link": "https://stackoverflow.com/users/3449019/nobi"}, "reply_to_user": {"reputation": 10796, "user_id": 1105249, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/083d54b8327a76a1dcf57df507ab7b34?s=128&d=identicon&r=PG", "display_name": "Luis Masuelli", "link": "https://stackoverflow.com/users/1105249/luis-masuelli"}, "edited": false, "score": 0, "creation_date": 1459372569, "post_id": 36319687, "comment_id": 60263073, "body": "@LuisMasuelli they don&#39;t print the same I have edited the lines thank You"}], "answers": [{"tags": [], "owner": {"reputation": 1211, "user_id": 4783965, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ezsWKyHTPew/AAAAAAAAAAI/AAAAAAAADbE/nZ1PyKNEoWc/photo.jpg?sz=128", "display_name": "Ritave", "link": "https://stackoverflow.com/users/4783965/ritave"}, "is_accepted": true, "score": 1, "last_activity_date": 1459372324, "creation_date": 1459372324, "answer_id": 36319841, "question_id": 36319687, "link": "https://stackoverflow.com/questions/36319687/serialize-the-outcome-of-a-loop/36319841#36319841", "title": "Serialize the outcome of a loop", "body": "<p>I see you have unused <code>count</code> variable so I used it to keep track of output indexes, increasing it everytime when we print a new id.</p>\n\n<pre><code>import xlrd\n\nwb = xlrd.open_workbook(\"links.xls\")\nsh = wb.sheet_by_index(0)\n\ncount = 1\nfor row in range(1, sh.nrows):\n    val = sh.row_values(row)\n\n    if (val[4]) != 2:\n        print 'id',str(int(count)), 'value', str(int(val[1])) + \"-\" + str(int(val[2]))\n    else:\n        print 'id',str(int(count)), 'value', str(int(val[1])) + \"-\" + str(int(val[2]))\n        count+=1\n        print 'id',str(int(count)), 'value', str(int(val[2])) + \"-\" + str(int(val[1]))\n    count+=1\n</code></pre>\n"}], "owner": {"reputation": 1025, "user_id": 3449019, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/hVAtP.jpg?s=128&g=1", "display_name": "Nobi", "link": "https://stackoverflow.com/users/3449019/nobi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 36319841, "answer_count": 1, "score": 0, "last_activity_date": 1459372507, "creation_date": 1459371791, "last_edit_date": 1459372507, "question_id": 36319687, "link": "https://stackoverflow.com/questions/36319687/serialize-the-outcome-of-a-loop", "title": "Serialize the outcome of a loop", "body": "<p>Code Snippet:</p>\n\n<pre><code>import xlrd\n\nwb = xlrd.open_workbook(\"links.xls\")\nsh = wb.sheet_by_index(0)\n\ncount = 0\nfor row in range(1, sh.nrows):\n    val = sh.row_values(row)\n\n\n    if (val[4]) != 2:\n        print 'id',str(int(val[0])), 'value', str(int(val[1])) + \"-\" + str(int(val[2]))\n\n    else:\n        print 'id',str(int(val[0])), 'value', str(int(val[1])) + \"-\" + str(int(val[2]))\n        print 'id',str(int(val[0])), 'value', str(int(val[2])) + \"-\" + str(int(val[1]))\n</code></pre>\n\n<p>links.xls</p>\n\n<pre><code>   id From To   Len  Permlanes\n    1   1   7   350   9\n    2   1   8   460   3\n    3   1   3   490   2\n    4   2   9   220   2\n    5   2   7   540   1\n    6   2   8   590   1\n    7   3   6   250   1\n    8   4   4   290   6\n    9   4   9   570   1\n    10  4   2   430   1\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>id 1 value 1-7\nid 2 value 1-8\nid 3 value 1-3\nid 3 value 3-1\nid 4 value 2-9\nid 4 value 9-2\nid 5 value 2-7\nid 6 value 2-8\nid 7 value 3-6\nid 8 value 4-4\nid 9 value 4-9\nid 10 value 4-2\n</code></pre>\n\n<p>Intended Output:</p>\n\n<pre><code>id 1 value 1-7\nid 2 value 1-8\nid 3 value 1-3\nid 4 value 3-1\nid 5 value 2-9\nid 6 value 9-2\nid 7 value 2-7\nid 8 value 2-8\nid 9 value 3-6\nid 10 value 4-4\nid 11 value 4-9\nid 12 value 4-2\n</code></pre>\n\n<p>The code above is a small description of a project I am working on. When the <code>permlanes fields is 2</code> in the excel file, the <code>value</code> is written twice in alternate pattern i.e. <code>1-3 and 3-1</code> however the <code>id</code> output is not as expected. Can someone help me with a way to adjust the code so that the <code>id output</code> is serial (just as in the intended output) rather than as it appears in the present output. My attempt to loop using  the index of a list of the excel file elements clearly did not work since there was no way of accessing the elements of the excel file.  </p>\n\n<p>Thank you for your time. </p>\n"}, {"tags": ["python", "windows", "python-3.x"], "comments": [{"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "edited": false, "score": 1, "creation_date": 1459373704, "post_id": 36319666, "comment_id": 60263657, "body": "What else is different between the machines? This is not a lot of information to go on..."}, {"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 2, "creation_date": 1459374326, "post_id": 36319666, "comment_id": 60263947, "body": "This is far from a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> that will help others diagnose the issue. A starter would be what <code>f</code> effectively does to <code>args</code> and the data structure of <code>args</code>, which we may be able to infer based on <code>f</code>. Also differences between python versions, and python packages. Which can be found with <code>pip freeze &gt; packages.txt</code>."}, {"owner": {"reputation": 2082, "user_id": 5849470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270b9a87f8f1cba83d545b6e601337ea?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jordan", "link": "https://stackoverflow.com/users/5849470/matt-jordan"}, "edited": false, "score": 0, "creation_date": 1459441746, "post_id": 36319666, "comment_id": 60299666, "body": "Its fairly clear there is a deadlock, and since the machine that hangs lists only one CPU, it is most likely a deadlock caused by acquiring one resource before locking, then waiting until the next resource is available, with multiple threads in that state, never giving up the locked resource.  However, that&#39;s about the limit of diagnosis based on what you have provided.  Please provide code."}], "owner": {"reputation": 11, "user_id": 6136824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17519055e647684c0951bc19253a3123?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/6136824/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1459441761, "creation_date": 1459371711, "last_edit_date": 1459441761, "question_id": 36319666, "link": "https://stackoverflow.com/questions/36319666/python-multiprocessing-pool-works-on-one-machine-and-hangs-forever-on-another", "title": "python multiprocessing pool works on one machine and hangs forever on another", "body": "<p>I am running a simple multiprocessing code using <code>Pool</code> and <code>map</code> on Python 3.4 (Windows):</p>\n\n<pre><code>from multiprocessing import Pool\np = Pool(6) \nresult = p.map(f,args)\n</code></pre>\n\n<p><code>args</code> is a list of integers. <code>f</code> is a nested function that is slicing a data matrix using only columns specified in <code>args</code> and runs one of the ML algorithms from <code>sklearn</code> on it. <code>f</code> is constructed using <code>partial</code> from a corresponding function of multiple arguments. </p>\n\n<p>The code is working on the first machine but hangs forever on the second (actually 4 times more powerful) in file threading.py on line 284:</p>\n\n<pre><code>waiter.acquire()\n</code></pre>\n\n<p>The specification of machines' processors: 1) Intel(R) Xeon(R) CPU E5-2603 @1.80GHz (2 processors); 2) Intel(R) Xeon(R) CPU E5-2680 0 @2.7GHz</p>\n\n<p>Can you help me to figure out why the code is hanging and how to make it work on another machine? </p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 34, "user_id": 5328005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9e4709afde03300ca6b82ae3ed9771f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmad Siavashi", "link": "https://stackoverflow.com/users/5328005/ahmad-siavashi"}, "is_accepted": true, "score": 0, "last_activity_date": 1459374822, "last_edit_date": 1459374822, "creation_date": 1459371933, "answer_id": 36319730, "question_id": 36319659, "link": "https://stackoverflow.com/questions/36319659/putting-strings-in-python-lists/36319730#36319730", "title": "Putting strings in Python lists", "body": "<pre><code>landscape = [['-,-,-,-,-,-,-,-,-,-,-,-,-,-,X'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['O,-,-,-,-,-,-,-,-,-,-,-,-,-,-']]\n</code></pre>\n\n<p>You forgot to separate the elements of the array with a comma (,)\nUse the code above</p>\n"}, {"tags": [], "owner": {"reputation": 8598, "user_id": 719312, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/997c8124fb91a5eca609aea651fc9d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Shields", "link": "https://stackoverflow.com/users/719312/thomas-shields"}, "is_accepted": false, "score": 2, "last_activity_date": 1459372607, "last_edit_date": 1459372607, "creation_date": 1459371936, "answer_id": 36319731, "question_id": 36319659, "link": "https://stackoverflow.com/questions/36319659/putting-strings-in-python-lists/36319731#36319731", "title": "Putting strings in Python lists", "body": "<p>You have a simple typo. By not separating the inner arrays by commas, you're actually indexing into the first array you wrote, and strings can't be indices. The proper way to write this is:</p>\n\n<pre><code>landscape = [['-,-,-,-,-,-,-,-,-,-,-,-,-,-,X'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-'],\n['O,-,-,-,-,-,-,-,-,-,-,-,-,-,-']]\n</code></pre>\n\n<p>I'm guessing you also want those strings to look like <code>'-', '-'</code>, etc., rather than one single string with commas in it.</p>\n\n<h1>An Easier Way:</h1>\n\n<p>Python also lets you \"multiply\" strings to produce a list of certain length, like so:</p>\n\n<pre><code>['-'] * 5\n</code></pre>\n\n<p>which produces the list <code>['-', '-', '-', '-', '-']</code></p>\n\n<p>So you could use that in a <a href=\"https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow\">list comprehension</a> like so:</p>\n\n<pre><code>[['-'] * 5 for _ in range(5)]\n</code></pre>\n\n<p>to produce:</p>\n\n<pre><code>[['-', '-', '-', '-', '-'], ['-', '-', '-', '-', '-'], ['-', '-', '-', '-', '-'], ['-', '-', '-', '-', '-'], ['-', '-', '-', '-', '-']]\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6135739, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kRDuCjuqAmA/AAAAAAAAAAI/AAAAAAAAABE/biGL_oqxVPo/photo.jpg?sz=128", "display_name": "Kyle", "link": "https://stackoverflow.com/users/6135739/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1459629775, "accepted_answer_id": 36319730, "answer_count": 2, "score": -2, "last_activity_date": 1459374822, "creation_date": 1459371682, "question_id": 36319659, "link": "https://stackoverflow.com/questions/36319659/putting-strings-in-python-lists", "closed_reason": "Not suitable for this site", "title": "Putting strings in Python lists", "body": "<p>I am trying to make a dynamic map for a text-based RPG that I am coding, so I tried this array:</p>\n\n<pre><code>landscape = [['-,-,-,-,-,-,-,-,-,-,-,-,-,-,X']\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-']\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-']\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-']\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-']\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-']\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-']\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-']\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-']\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-']\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-']\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-']\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-']\n['-,-,-,-,-,-,-,-,-,-,-,-,-,-,-']\n['O,-,-,-,-,-,-,-,-,-,-,-,-,-,-']]\n</code></pre>\n\n<p>However, it gave an error message saying that str objects cannot be placed in arrays. Is there a way to fix this?</p>\n"}, {"tags": ["python", "inheritance", "metaclass"], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 2258634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/326bc5cb813ae4cfe3245b28fc8742ea?s=128&d=identicon&r=PG", "display_name": "Buck", "link": "https://stackoverflow.com/users/2258634/buck"}, "edited": false, "score": 0, "creation_date": 1459375028, "post_id": 36320014, "comment_id": 60264250, "body": "Interesting point, deleting <b>init</b> from the dictionary works but only because in my toy example I don&#39;t do anything in Child.__init__ so this doesn&#39;t quite solve the problem (updated code to illustrate). I&#39;ll take a look at <b>qualname</b> though"}, {"owner": {"reputation": 188, "user_id": 2258634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/326bc5cb813ae4cfe3245b28fc8742ea?s=128&d=identicon&r=PG", "display_name": "Buck", "link": "https://stackoverflow.com/users/2258634/buck"}, "edited": false, "score": 0, "creation_date": 1459375243, "post_id": 36320014, "comment_id": 60264339, "body": "Ahh the note on super explains this"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 188, "user_id": 2258634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/326bc5cb813ae4cfe3245b28fc8742ea?s=128&d=identicon&r=PG", "display_name": "Buck", "link": "https://stackoverflow.com/users/2258634/buck"}, "edited": false, "score": 0, "creation_date": 1459375345, "post_id": 36320014, "comment_id": 60264391, "body": "@Buck The reason your second example works is that the bases of those 2 dynamic types include <code>ChildAbstract</code> and so <code>super()</code> is happy."}, {"owner": {"reputation": 188, "user_id": 2258634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/326bc5cb813ae4cfe3245b28fc8742ea?s=128&d=identicon&r=PG", "display_name": "Buck", "link": "https://stackoverflow.com/users/2258634/buck"}, "edited": false, "score": 2, "creation_date": 1459375453, "post_id": 36320014, "comment_id": 60264441, "body": "so <code>super().__init__() -&gt; super(self.__class__, self).__init__()</code> sovles this, thanks @Ilja"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 188, "user_id": 2258634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/326bc5cb813ae4cfe3245b28fc8742ea?s=128&d=identicon&r=PG", "display_name": "Buck", "link": "https://stackoverflow.com/users/2258634/buck"}, "edited": false, "score": 0, "creation_date": 1459376150, "post_id": 36320014, "comment_id": 60264720, "body": "@Buck included your solution as part of the answer too, so it&#39;s easier to find"}], "tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": true, "score": 6, "last_activity_date": 1459410382, "last_edit_date": 1459410382, "creation_date": 1459372979, "answer_id": 36320014, "question_id": 36319601, "link": "https://stackoverflow.com/questions/36319601/python-metaclass-inheritance-issue/36320014#36320014", "title": "python metaclass inheritance issue", "body": "<p>The dictionary <em>sdct</em> passed to <em>type</em> includes <code>__qualname__</code>, which according to this <a href=\"https://www.python.org/dev/peps/pep-3155/#id6\" rel=\"nofollow\">PEP</a> is what <em>repr</em> and <em>str</em> now use.</p>\n\n<p>Try adding</p>\n\n<pre><code>print(Child is Child.sibling)  # False\nprint(Child.sibling.__name__)  # \"ChildSibling\"\n</code></pre>\n\n<p>and you'll see that it is truly the sibling.</p>\n\n<p>As to why <code>sibling().x</code> throws, the very same <em>sdct</em> also already contains <code>Child.__init__</code>, which ends up as <code>__init__</code> of your dynamically created new type <code>ChildSibling</code>. During a call to <code>sibling()</code> the <code>super()</code> call resolves the class to <code>Child</code> and is given an instance of <code>ChildSibling</code>:</p>\n\n<blockquote>\n  <p>Also note that, aside from the zero argument form, super() is not limited to use inside methods. The two argument form specifies the arguments exactly and makes the appropriate references. The zero argument form only works inside a class definition, <strong>as the compiler fills in the necessary details to correctly retrieve the class being defined</strong>, as well as accessing the current instance for ordinary methods.</p>\n</blockquote>\n\n<p><a href=\"https://docs.python.org/3/library/functions.html#super\" rel=\"nofollow\">https://docs.python.org/3/library/functions.html#super</a></p>\n\n<p>Accessing the current instance is done by passing the first argument to method as instance.</p>\n\n<blockquote>\n  <p><code>super() -&gt; same as super(__class__, &lt;first argument&gt;)</code></p>\n</blockquote>\n\n<p>The error is raised at <a href=\"https://github.com/python/cpython/blob/master/Objects/typeobject.c#L7210\" rel=\"nofollow\">line 7210 of Object/typeobject.c</a>.</p>\n\n<p>Try removing the wrong <code>__init__</code> in your <code>__new__</code> with:</p>\n\n<pre><code>del sdct['__init__']\n</code></pre>\n\n<p>and now</p>\n\n<pre><code>print(Child().sibling().x)\n</code></pre>\n\n<p>will print 3.</p>\n\n<p>A solution to \"generic\" inheritance and meta programming friendlier <code>__init__</code> is to use the 2 argument form of <code>super()</code>:</p>\n\n<pre><code>def __init__(self):\n    super(self.__class__, self).__init__()\n</code></pre>\n"}], "owner": {"reputation": 188, "user_id": 2258634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/326bc5cb813ae4cfe3245b28fc8742ea?s=128&d=identicon&r=PG", "display_name": "Buck", "link": "https://stackoverflow.com/users/2258634/buck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 1, "accepted_answer_id": 36320014, "answer_count": 1, "score": 5, "last_activity_date": 1459410382, "creation_date": 1459371478, "last_edit_date": 1459375137, "question_id": 36319601, "link": "https://stackoverflow.com/questions/36319601/python-metaclass-inheritance-issue", "title": "python metaclass inheritance issue", "body": "<p>I have a somewhat bizarre metaclass question. I'm using a meta class to dynamically create a 'sibling' class that inherits from another superclass and assign it as an attribute on the original class. Below is a minimal setup:</p>\n\n<pre><code>class Meta(type):\ndef __new__(cls, name, parents, dct):\n    sdct = dct.copy()\n    dct['sibling'] = type(name+'Sibling', (Mom,), sdct)\n    return super().__new__(cls, name, (Dad,), dct)\n\nclass Mom:\n     def __init__(self):\n         self.x = 3\n\nclass Dad:\n     def __init__(self):\n         self.x = 4\n\nclass Child(metaclass=Meta):\n     def __init__(self):\n         super().__init__()\n         self.y = 1  # &lt;&lt;&lt; added from feedback\nprint(Child().x) # 4\nprint(Child().sibling) # &lt;class '__main__.Child'&gt; | should be ChildSibling\nprint(Child().sibling().x) # should be 3 instead throws:\n    # TypeError: super(type, obj): obj must be an instance or subtype of type\nprint(Child().sibling().y) # should print 4\n</code></pre>\n\n<p>Something seems to be going wrong above with the creation of the 'sibling' class but I'm not quite sure what. I know for example that this would work:</p>\n\n<pre><code>class ChildAbstract:\n    def __init__(self):\n        super().__init__()\n\nChildSibling = type('ChildSibling', (ChildAbstract, Mom), {})\nChild = type('Child', (ChildAbstract, Dad), {'sibling': ChildSibling})\nprint(Child().sibling().x) # 3\n</code></pre>\n\n<p>I can't see the difference between the two cases though.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1459371763, "post_id": 36319573, "comment_id": 60262650, "body": "try this <code>df[df.ID == 342270]</code> instead"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5977738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17abc31e15ca05ab5b5e5fb487208b8d?s=128&d=identicon&r=PG", "display_name": "linuxdesire", "link": "https://stackoverflow.com/users/5977738/linuxdesire"}, "edited": false, "score": 0, "creation_date": 1459379218, "post_id": 36319689, "comment_id": 60265845, "body": "Thank you I will put that in my toolbox."}], "tags": [], "owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "is_accepted": false, "score": 1, "last_activity_date": 1459371792, "creation_date": 1459371792, "answer_id": 36319689, "question_id": 36319573, "link": "https://stackoverflow.com/questions/36319573/argument-of-type-numpy-int64-is-not-iterable/36319689#36319689", "title": "argument of type &#39;numpy.int64&#39; is not iterable", "body": "<p>When you use <code>in ID</code>, you are in effect iterating through <code>ID</code> and seeing if any item in it is equal to what comes before the <code>in</code>.  Did you perhaps want to use <code>str()</code> here:</p>\n\n<pre><code>df[df['ID'].map(lambda ID: \"342270\" in str(ID)]\n</code></pre>\n\n<p>or maybe you wanted to see if <code>ID</code> was the same thing as <code>342270</code>:</p>\n\n<pre><code>df[df['ID'].map(lambda ID: ID == 342270)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1459371908, "creation_date": 1459371908, "answer_id": 36319725, "question_id": 36319573, "link": "https://stackoverflow.com/questions/36319573/argument-of-type-numpy-int64-is-not-iterable/36319725#36319725", "title": "argument of type &#39;numpy.int64&#39; is not iterable", "body": "<p>You don't need lambda function in this case:</p>\n\n<pre><code>df[df.ID == 342270]\n</code></pre>\n\n<p>should do the trick</p>\n"}], "owner": {"reputation": 45, "user_id": 5977738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17abc31e15ca05ab5b5e5fb487208b8d?s=128&d=identicon&r=PG", "display_name": "linuxdesire", "link": "https://stackoverflow.com/users/5977738/linuxdesire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4593, "favorite_count": 1, "accepted_answer_id": 36319725, "answer_count": 2, "score": 3, "last_activity_date": 1459371908, "creation_date": 1459371423, "question_id": 36319573, "link": "https://stackoverflow.com/questions/36319573/argument-of-type-numpy-int64-is-not-iterable", "title": "argument of type &#39;numpy.int64&#39; is not iterable", "body": "<p>I have checked through the forum but cannot seem to make this work. I have  a CSV file and there are 1300 rows. One column is title ID. The ID column is a six digit number. When I try to find a particular number  using this code:</p>\n\n<pre><code>    df[df['ID'].map(lambda ID: \"342270\" in ID)]\n</code></pre>\n\n<p>I get the following on traceback.</p>\n\n<pre><code>TypeError                                 Traceback (most recent call         last)\n&lt;ipython-input-12-dbef5920f124&gt; in &lt;module&gt;()\n----&gt; 1 df[df['ID'].map(lambda ID: \"342270\" in ID)]\n\n/home/noteleks/anaconda3/lib/python3.5/site-packages/pandas                /core/series.py in map(self, arg, na_action)\n                                                                                  2119                                                                               index=self.index).__finalize__(self)\n   2120         else:\n   -&gt; 2121             mapped = map_f(values, arg)\n  2122             return self._constructor(mapped,\n  2123                                          index=self.index).__finalize__(self)\n\npandas/src/inference.pyx in pandas.lib.map_infer (pandas/lib.c:63043)()\n\n&lt;ipython-input-12-dbef5920f124&gt; in &lt;lambda&gt;(ID)\n----&gt; 1 df[df['ID'].map(lambda ID: \"342270\" in ID)]\n\nTypeError: argument of type 'numpy.int64' is not iterable\n</code></pre>\n"}, {"tags": ["python", "setuptools"], "owner": {"reputation": 102, "user_id": 2333932, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9aabeb9486ae7dfd49f9d3424f520d4f?s=128&d=identicon&r=PG", "display_name": "lasagne.victim", "link": "https://stackoverflow.com/users/2333932/lasagne-victim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1459371255, "creation_date": 1459371255, "question_id": 36319511, "link": "https://stackoverflow.com/questions/36319511/python-setuptool-multiple-package-arrangement", "title": "python setuptool multiple package arrangement", "body": "<p>In the same repository, I would like to build two packages, <code>ns.foo</code> and <code>ns.bar</code> under namespace <code>ns</code>.  But after many tries, it seems the only way this can work is to put them in two completely different directory branches:</p>\n\n<pre><code>$ find ./\n  foo/\n  foo/setup.py\n  foo/ns/\n  foo/ns/__init__.py # __import__('pkg_resources').declare_namespace(__name__)\n  foo/ns/foo\n  foo/ns/foo/__init__.py\n  bar/\n  bar/setup.py\n  bar/ns/\n  bar/ns/__init__.py # __import__('pkg_resources').declare_namespace(__name__)\n  bar/ns/bar/\n  bar/base/bar/__init__.py\n</code></pre>\n\n<p>The reason is that with, for example, </p>\n\n<pre><code>from setuptools import setup\nsetup(...,packages=['ns.foo'],...)\n</code></pre>\n\n<p>to work, <code>setup.py</code> has to be place in the same level as the namespace package, in <code>foo/</code>, in order for it to find <code>ns.foo</code>.</p>\n\n<p>Is there a way to write <code>setup.py</code> so that I can collapse the directory structure to:</p>\n\n<pre><code>\u2514 ns/\n\u2514 __init__.py # __import__('pkg_resources').declare_namespace(__name__)\n\u2514 foo/\n\u2514 foo/__init__.py\n\u2514 foo/setup.py\n\u2514 bar/\n\u2514 bar/__init__.py\n\u2514 bar/setup.py\n</code></pre>\n\n<p>such that when I run each <code>setup.py</code>, it builds the respective package?</p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1459375140, "post_id": 36319488, "comment_id": 60264296, "body": "Stack Overflow is not a code-writing or tutorial service. Please <a href=\"https://stackoverflow.com/posts/36319488/edit\">edit</a> your question and post what you have tried so far, including example input, expected output, and the <b>full text</b> of any errors or tracebacks."}, {"owner": {"reputation": 1077, "user_id": 3423025, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/30852e50cabe6ade587fb457e74b2815?s=128&d=identicon&r=PG&f=1", "display_name": "marienbad", "link": "https://stackoverflow.com/users/3423025/marienbad"}, "edited": false, "score": 0, "creation_date": 1459387400, "post_id": 36319488, "comment_id": 60268226, "body": "[link]<a href=\"http://stackoverflow.com/questions/35818505/pygame-the-rectangle-is-not-moving/35826041#35826041\" title=\"pygame the rectangle is not moving\">stackoverflow.com/questions/35818505/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 6126385, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c814bab8ea02f85edd5700ddff60fa3f?s=128&d=identicon&r=PG&f=1", "display_name": "HALLOPEOPLE", "link": "https://stackoverflow.com/users/6126385/hallopeople"}, "edited": false, "score": 0, "creation_date": 1459457419, "post_id": 36323719, "comment_id": 60308777, "body": "Sorry for writing this,,, I actually found it by searching on google, my fault. Thank you for your answer!"}], "tags": [], "owner": {"reputation": 654, "user_id": 5915915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dTozG.jpg?s=128&g=1", "display_name": "David Jay Brady", "link": "https://stackoverflow.com/users/5915915/david-jay-brady"}, "is_accepted": true, "score": 3, "last_activity_date": 1459411668, "last_edit_date": 1459411668, "creation_date": 1459395716, "answer_id": 36323719, "question_id": 36319488, "link": "https://stackoverflow.com/questions/36319488/how-to-make-image-move/36323719#36323719", "title": "How to make image move", "body": "<p>First, I'll address the current comments. MattDMo is right, this is not a code writing service, but a way to help people understand their problems or why things work or why they don't work. It is a good idea to <em>attempt</em> first, and THEN ask your question if you can not figure it out. marienbad's link does make an image move, but in an inconvenient way. That link's code will move your image every time you hit a certain key (useful, I recommend you check it out), but it's nice to move while you hold a key down.</p>\n\n<p>Getting an image to move while holding down a key is tricky. My preference is to use booleans.</p>\n\n<p>If you do not have a tick method being used, STOP NOW and get one in place. Look at pygame.org/docs to see how to do it, they have great example code. Movement will not work as you want without it, because this loop will run as fast as your computer can process if you don't limit it, so you may not even see your movement.</p>\n\n<pre><code>from pygame.locals import * # useful pygame variables are now at your disposle without typing pygame everywhere.\n\nspeed = (5, 5) # Amount of pixels to move every frame (loop).\nmoving_up = False\nmoving_right = False\nmoving_down = False\nmoving_left = False # Default starting, so there is no movement at first.\n</code></pre>\n\n<p>The above code is for OUTSIDE your while loop. Your event for loop will need to be changed slightly, to improve your code, I recommend putting functions into play here, or using dictionaries to rid the need of all these if statements but I won't just for my answer being simpler and get the point across. I am leaving out some details, like event.quit, since you already have them.</p>\n\n<p>If you don't include the keyup part, your character will never stop moving!</p>\n\n<pre><code>for event in pygame.event.get():\n    if event.type == KEYDOWN:\n        if event.key == K_w:\n            moving_up = True\n        if event.key == K_d\n            moving_right = True\n        if event.key == K_s:\n            moving_down = True\n        if event.key == K_a:\n            moving_left = True\n\n    if event.type == KEYUP:\n       if event.key == K_w:\n            moving_up = False # .. repeat this for all 4.\n</code></pre>\n\n<p>Then later in the loop...</p>\n\n<pre><code>if moving_up:\n    y_coord += -speed[1] # Negative speed, because positive y is down!\nif moving_down:\n    y_coord += speed[1]\nif moving_right:\n    x_coord += speed[0]\nif moving_left:\n    x_coord += -speed[0]\n</code></pre>\n\n<p>Now your x/y coordinates will change when they are set to move, which will be used to blit your image! Make sure you do NOT use elif in this scenario, if you are holding 2 keys, you want to be able to move by combining to keys, say right and up, so that you can move northeast.</p>\n"}], "owner": {"reputation": 147, "user_id": 6126385, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c814bab8ea02f85edd5700ddff60fa3f?s=128&d=identicon&r=PG&f=1", "display_name": "HALLOPEOPLE", "link": "https://stackoverflow.com/users/6126385/hallopeople"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3774, "favorite_count": 0, "accepted_answer_id": 36323719, "answer_count": 1, "score": -1, "last_activity_date": 1508019689, "creation_date": 1459371185, "question_id": 36319488, "link": "https://stackoverflow.com/questions/36319488/how-to-make-image-move", "title": "How to make image move", "body": "<p>So I have a image that I want to move by using the WASD keys. I do not fully understand how to do this, and I do have a main loop.\nThis is what my image looks like and it's possition</p>\n\n<pre><code>no_image = pygame.image.load(\"Ideot.png\").convert\nx_coord = 500 \ny_coord = 250\nno_position = [x_coord,y_coord]\n</code></pre>\n\n<p>This code is behind the main loop. After the main loop I actually draw the image by doing</p>\n\n<pre><code>screen.blit(no_image,no_position)\n</code></pre>\n\n<p>This is what my loop looks like\ndone = False</p>\n\n<pre><code>while not done:\n   for event in pygame == pygame.Quit:\n       done = True\n</code></pre>\n\n<p>Can you show how to make the image move with WASD</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 464, "user_id": 3566313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e31bb4093f79ff373bf6f81e7e6c9c66?s=128&d=identicon&r=PG&f=1", "display_name": "theakson", "link": "https://stackoverflow.com/users/3566313/theakson"}, "edited": false, "score": 0, "creation_date": 1459375148, "post_id": 36320260, "comment_id": 60264298, "body": "THANK YOU SO MUCH @sung especially as you took the time to write a way in which I can play around with it. Really helpful answer to a noob."}], "tags": [], "owner": {"reputation": 2755, "user_id": 5976265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yYNs9.jpg?s=128&g=1", "display_name": "Hun", "link": "https://stackoverflow.com/users/5976265/hun"}, "is_accepted": true, "score": 1, "last_activity_date": 1459374129, "creation_date": 1459374129, "answer_id": 36320260, "question_id": 36319482, "link": "https://stackoverflow.com/questions/36319482/numpy-array-astype-working-on-data-set-but-dont-understand-why/36320260#36320260", "title": "Numpy.array astype working on data set but don&#39;t understand why?", "body": "<p>with np.genfromtxt() you get numpy array of tuples as shown in your print out. To extract the date element and convert to your favorite format, you can use list comprehension to access the date info from each tuple. Then, convert that to numpy array and convert to datetime64[D] format all in one line.</p>\n\n<pre><code>dates = np.array([d[0] for d in data]).astype('datetime64[D]')\n</code></pre>\n\n<p>This is more explicit process clearly showing what you are doing. Your approach</p>\n\n<pre><code>np.array(data[:]).astype('datetime64[D]')\n</code></pre>\n\n<p>worked because it tried to cast all data element to datetime64[D] but could do that to only the first column of data array.</p>\n"}], "owner": {"reputation": 464, "user_id": 3566313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e31bb4093f79ff373bf6f81e7e6c9c66?s=128&d=identicon&r=PG&f=1", "display_name": "theakson", "link": "https://stackoverflow.com/users/3566313/theakson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 36320260, "answer_count": 1, "score": 0, "last_activity_date": 1459374129, "creation_date": 1459371169, "question_id": 36319482, "link": "https://stackoverflow.com/questions/36319482/numpy-array-astype-working-on-data-set-but-dont-understand-why", "title": "Numpy.array astype working on data set but don&#39;t understand why?", "body": "<p>I am trying to extract dates ( to plot on x axes in matplotlib) from a data set and have a line in my code that \"seems\" to be doing what I want BUT I don't understand why. </p>\n\n<p>It is accepting ALL the data ( data[:] ) BUT returning just the dates in the format I want. My concern is that I don't understand how it is doing it. I tried to just specify the first field of the data but couldn't. Please can anyone tell me why this line is working on just the dates? </p>\n\n<p>my_dates = np.array(data[:]).astype('datetime64[D]')</p>\n\n<p>the data</p>\n\n<pre><code>2015-08-04 02:14:05.249392,AA,0.0193103612,0.0193515212,0.0249713335,30.6542480634,30.7195875454,39.640763021,0.2131498442,29.0406746589,13524.5347810182,89,57,99\n2015-08-04 02:14:05.325113,AAPL,0.0170506271,0.0137941891,0.0105915637,27.0670313481,21.8975963326,16.8135861893,-19.0986405157,-23.2172064279,21.5647072302,33,26,75\n2015-08-04 02:14:05.415193,AIG,0.0080808151,0.0073296055,0.0076213535,12.8278962785,11.635388035,12.0985236788,-9.2962105215,3.980405659,-142.8175077335,71,42,33\n2015-08-04 02:14:05.486185,AMZN,0.0235649449,0.0305828226,0.0092703502,37.4081902773,48.5487257749,14.7162247572,29.7810062852,-69.6877219282,-334.0005615016,2,92,10\n2015-08-04 02:14:05.551904,APOL,0.0246693592,0.0156969808,0.0184519051,39.1613937248,24.9181845816,29.2914912693,-36.3705368692,17.5506633453,-148.2551671106,80,9,31\n</code></pre>\n\n<p>the \"code\"</p>\n\n<pre><code>import numpy as np\n# np.set_printoptions(threshold = np.nan)# turn off printing truncation\n\ndata=np.genfromtxt('/home/dave/Desktop/development/hvanal2015s.csv',\ndtype='M8[us],S5,float,float,float',delimiter=',',usecols=[0,1,11,12,13])\nmy_dates = np.array(data[:]).astype('datetime64[D]')\nprint(\"data\")\nprint(data)\nprint(\"my_dates\",my_dates)\n</code></pre>\n\n<p>the output</p>\n\n<pre><code>data\n [(datetime.datetime(2015, 8, 4, 7, 14, 5, 249392), b'AA', 89.0, 57.0, 99.0)\n (datetime.datetime(2015, 8, 4, 7, 14, 5, 325113), b'AAPL', 33.0, 26.0, 75.0)\n (datetime.datetime(2015, 8, 4, 7, 14, 5, 415193), b'AIG', 71.0, 42.0, 33.0)\n (datetime.datetime(2015, 8, 4, 7, 14, 5, 486185), b'AMZN', 2.0, 92.0, 10.0)\n (datetime.datetime(2015, 8, 4, 7, 14, 5, 551904), b'APOL', 80.0, 9.0, 31.0)]\n\n my_dates ['2015-08-04' '2015-08-04' '2015-08-04' '2015-08-04' '2015-08-04']\n</code></pre>\n"}, {"tags": ["python", "variables", "serial-port", "port", "pyserial"], "answers": [{"tags": [], "owner": {"reputation": 8602, "user_id": 5936628, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67edb9182ec767573ef95539c533b0a9?s=128&d=identicon&r=PG&f=1", "display_name": "Anil_M", "link": "https://stackoverflow.com/users/5936628/anil-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1459376503, "last_edit_date": 1495540783, "creation_date": 1459376089, "answer_id": 36320699, "question_id": 36319480, "link": "https://stackoverflow.com/questions/36319480/assign-variable-to-pyserial-port/36320699#36320699", "title": "Assign variable to pyserial port", "body": "<p>As I understand, you have several devices on <code>com</code> ports and you would like to select one of them and assign that port to <code>VARIABLE</code>.</p>\n\n<p>Below is a code that reads <code>COM</code> port and assigns first port as usable COM port. It then probes the <code>COM</code> port to see if its open.</p>\n\n<p>You can inspect <code>serial_ports()</code> output to determine which <code>COM PORT</code> you want to use and assign the respective port <code>slice</code> accordingly to <code>VARIABLE</code>. I've used <code>port 0</code> which is my <code>COM1</code>  </p>\n\n<p>The function <code>serial_ports()</code> is cross platform. I have windows and it works seamlessly. </p>\n\n<p>Inspiration from <a href=\"https://stackoverflow.com/questions/676172/full-examples-of-using-pyserial-package\">here</a></p>\n\n<p><strong>Demo Code</strong></p>\n\n<pre><code>import sys\nimport glob\nimport serial\n\n\ndef serial_ports():\n\n    if sys.platform.startswith('win'):\n        ports = ['COM%s' % (i + 1) for i in range(256)]\n    elif sys.platform.startswith('linux') or sys.platform.startswith('cygwin'):\n        # this excludes your current terminal \"/dev/tty\"\n        ports = glob.glob('/dev/tty[A-Za-z]*')\n    elif sys.platform.startswith('darwin'):\n        ports = glob.glob('/dev/tty.*')\n    else:\n        raise EnvironmentError('Unsupported platform')\n\n    result = []\n    for port in ports:\n        try:\n            s = serial.Serial(port)\n            s.close()\n            result.append(port)\n        except (OSError, serial.SerialException):\n            pass\n    return result\n\n\nif __name__ == '__main__':\n\n    VARIABLE = serial_ports()[0] #Assign first port as COM port    \n    ser = serial.Serial(\n    port=VARIABLE,\n    baudrate=115200,\n    parity=serial.PARITY_NONE,\n    stopbits=serial.STOPBITS_ONE,\n    bytesize=serial.EIGHTBITS\n    )\n\n    print \"Is port\", VARIABLE , \" open ?\", ser.isOpen()\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Python 2.7.9 (default, Dec 10 2014, 12:24:55) [MSC v.1500 32 bit (Intel)] on win32\nType \"copyright\", \"credits\" or \"license()\" for more information.\n&gt;&gt;&gt; ================================ RESTART ================================\n&gt;&gt;&gt; \nIs port COM1  open ? True\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 1750194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38ff6f39fa5d21dbd3412510d7139fb4?s=128&d=identicon&r=PG", "display_name": "karmax", "link": "https://stackoverflow.com/users/1750194/karmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 893, "favorite_count": 0, "accepted_answer_id": 36320699, "answer_count": 1, "score": 1, "last_activity_date": 1459376503, "creation_date": 1459371160, "last_edit_date": 1459375215, "question_id": 36319480, "link": "https://stackoverflow.com/questions/36319480/assign-variable-to-pyserial-port", "title": "Assign variable to pyserial port", "body": "<p>I must assign to serial port a variable.</p>\n\n<pre><code>ser = serial.Serial(\nport=VARIABLE\nbaudrate=115200,\nparity=serial.PARITY_NONE,\nstopbits=serial.STOPBITS_ONE,\nbytesize=serial.EIGHTBITS\n)\n</code></pre>\n\n<p>I try with <code>port=VARIABLE</code>, but that doesn't work. \nIt seems to accept only path but in my program I have many device.</p>\n"}, {"tags": ["python", "xml", "module"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5999662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e3afea8d0b80957f83cd2d66a12f96d?s=128&d=identicon&r=PG&f=1", "display_name": "rkanson", "link": "https://stackoverflow.com/users/5999662/rkanson"}, "is_accepted": false, "score": 0, "last_activity_date": 1459460274, "creation_date": 1459460274, "answer_id": 36344307, "question_id": 36319472, "link": "https://stackoverflow.com/questions/36319472/python-generating-rss-with-pyrss2gen/36344307#36344307", "title": "Python - Generating RSS with PyRSS2Gen", "body": "<p>I ended up just writing out to a file, like so;</p>\n\n<pre><code>news = open(\"news.rss.xml\", \"w\")\nnews.write(\"&lt;?xml version=\\\"1.0\\\" ?&gt;\")\nnews.write(\"\\n\")\nnews.write(\"&lt;rss xmlns:atom=\\\"http://www.w3.org/2005/Atom\\\" version=\\\"2.0\\\"&gt;\")\nnews.write(\"\\n\")\nnews.write(\"&lt;channel&gt;\")\nnews.write(\"\\n\")\n</code></pre>\n\n<p>etc.</p>\n"}, {"tags": [], "owner": {"reputation": 648, "user_id": 9968825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6d0332ac7d53381e1a5b84b320fd135?s=128&d=identicon&r=PG", "display_name": "chrysn", "link": "https://stackoverflow.com/users/9968825/chrysn"}, "is_accepted": false, "score": 0, "last_activity_date": 1600935609, "creation_date": 1600935609, "answer_id": 64042288, "question_id": 36319472, "link": "https://stackoverflow.com/questions/36319472/python-generating-rss-with-pyrss2gen/64042288#64042288", "title": "Python - Generating RSS with PyRSS2Gen", "body": "<p>PyRSS2Gen relies on its inputs to either be strings or to have a publish method that does all the necessary conversion.</p>\n<p>In this case, you missed to call the pop method on the rssTitles, giving you a function rather than a string. Adding <code>()</code> after all the pop mentions should give you a usable program.</p>\n<p>Note that similar errors can also crop up when there's other non-sting items around (eg. byte strings); the AttributeError line gives you a hint as to the object that went into the RSS item, and the backtrace indicates where in the RSS item that is (the title, in this case).</p>\n"}], "owner": {"reputation": 11, "user_id": 5999662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e3afea8d0b80957f83cd2d66a12f96d?s=128&d=identicon&r=PG&f=1", "display_name": "rkanson", "link": "https://stackoverflow.com/users/5999662/rkanson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 488, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1600943747, "creation_date": 1459371129, "last_edit_date": 1600943747, "question_id": 36319472, "link": "https://stackoverflow.com/questions/36319472/python-generating-rss-with-pyrss2gen", "title": "Python - Generating RSS with PyRSS2Gen", "body": "<p>I'm attempting to write a program that utilizes urllib2 to parse HTML, and then utilizes PyRSS2Gen to create the RSS feed, in XML.</p>\n<p>I keep getting the error</p>\n<pre><code>Traceback (most recent call last):\n  File &quot;pythonproject.py&quot;, line 46, in &lt;module&gt;\n    get_rss()\n  File &quot;pythonproject.py&quot;, line 43, in get_rss\n    rss.write_xml(open(&quot;cssnews.rss.xml&quot;, &quot;w&quot;))\n  File &quot;build/lib/PyRSS2Gen.py&quot;, line 34, in write_xml\n    self.publish(handler)\n  File &quot;build/lib/PyRSS2Gen.py&quot;, line 380, in publish\n    item.publish(handler)\n  File &quot;build/lib/PyRSS2Gen.py&quot;, line 427, in publish\n    _opt_element(handler, &quot;title&quot;, self.title)\n  File &quot;build/lib/PyRSS2Gen.py&quot;, line 58, in _opt_element\n    _element(handler, name, obj)\n  File &quot;build/lib/PyRSS2Gen.py&quot;, line 53, in _element\n    obj.publish(handler)\nAttributeError: 'builtin_function_or_method' object has no attribute 'publish'\n</code></pre>\n<p>upon trying to run it.</p>\n<p>From what I could find, other users came across this issue when trying to create a new tag for the XML, but I am trying to use the default tags given with PyRSS2Gen. Inspecting the PyRSS2Gen.py file shows the write_xml() command I am using, so is the error with how I am assigning values to the rss items by popping them from a list?</p>\n<pre><code>def get_rss():\n    sys.path.append('build/lib')\n    from PyRSS2Gen import RSS2, RSSItem\n\n    rss = RSS2(\n        title = 'Python RSS Creator',\n        link = 'technews.acm.org',\n        description = 'Creates RSS out of HTML',\n        items = [],\n    )\n\n    for x in range(0, len(rssTitles)):\n        rss.items.append(RSSItem(\n            title = rssTitles.pop,\n            link = rssLinks.pop,\n            description = rssDesc.pop,\n        ))\n\n    rss.write_xml(open(&quot;cssnews.rss.xml&quot;, &quot;w&quot;))\n\n# 5 - Call function\nget_rss()\n</code></pre>\n"}, {"tags": ["python", "listview", "scrollbar", "kivy"], "answers": [{"comments": [{"owner": {"reputation": 683, "user_id": 5708480, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bd56b324652b2d3c3b4ac65a4e4df6bc?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bridge", "link": "https://stackoverflow.com/users/5708480/bill-bridge"}, "edited": false, "score": 0, "creation_date": 1459413601, "post_id": 36319783, "comment_id": 60278820, "body": "Cool! Thanks very much. This really helps a lot."}, {"owner": {"reputation": 683, "user_id": 5708480, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bd56b324652b2d3c3b4ac65a4e4df6bc?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bridge", "link": "https://stackoverflow.com/users/5708480/bill-bridge"}, "edited": false, "score": 0, "creation_date": 1572857006, "post_id": 36319783, "comment_id": 103677408, "body": "Dear @zeeMonkeez, already a dated question but I would like to add a subquestion to this. Would it be possible to increase the bar_width on mouse_over? How could I get this event triggered when hitting the scrollbar with the mouse?"}, {"owner": {"reputation": 4807, "user_id": 1893154, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KvEaT.jpg?s=128&g=1", "display_name": "zeeMonkeez", "link": "https://stackoverflow.com/users/1893154/zeemonkeez"}, "reply_to_user": {"reputation": 683, "user_id": 5708480, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bd56b324652b2d3c3b4ac65a4e4df6bc?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bridge", "link": "https://stackoverflow.com/users/5708480/bill-bridge"}, "edited": false, "score": 0, "creation_date": 1572912726, "post_id": 36319783, "comment_id": 103701303, "body": "@BillBridge you may want to ask a new question. Haven\u2019t used kivy in quite some time ..."}], "tags": [], "owner": {"reputation": 4807, "user_id": 1893154, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KvEaT.jpg?s=128&g=1", "display_name": "zeeMonkeez", "link": "https://stackoverflow.com/users/1893154/zeemonkeez"}, "is_accepted": true, "score": 2, "last_activity_date": 1459372736, "last_edit_date": 1459372736, "creation_date": 1459372117, "answer_id": 36319783, "question_id": 36319417, "link": "https://stackoverflow.com/questions/36319417/how-to-format-the-scrollbar-in-kivy-listview/36319783#36319783", "title": "How to format the scrollbar in Kivy Listview", "body": "<p><code>ListView</code> contains a <code>ScrollView</code>, which in turn holds the <code>GridView</code> holding the list items. The corresponding <code>kv</code> rules are these (from <code>listview.py</code>):</p>\n\n<pre><code>&lt;ListView&gt;:\n    container: container\n    ScrollView:\n        pos: root.pos\n        on_scroll_y: root._scroll(args[1])\n        do_scroll_x: False\n        GridLayout:\n            cols: 1\n            id: container\n            size_hint_y: None\n</code></pre>\n\n<p><code>ScrollView</code> has properties <code>bar_width</code>, <code>bar_color</code>, <code>bar_inactive_color</code>. These could be accessed through <code>lv.container.parent.bar_width</code> etc., for <code>lv = ListView()</code>. </p>\n"}], "owner": {"reputation": 683, "user_id": 5708480, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bd56b324652b2d3c3b4ac65a4e4df6bc?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Bridge", "link": "https://stackoverflow.com/users/5708480/bill-bridge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1317, "favorite_count": 1, "accepted_answer_id": 36319783, "answer_count": 1, "score": 4, "last_activity_date": 1459376401, "creation_date": 1459370990, "last_edit_date": 1459376401, "question_id": 36319417, "link": "https://stackoverflow.com/questions/36319417/how-to-format-the-scrollbar-in-kivy-listview", "title": "How to format the scrollbar in Kivy Listview", "body": "<p>I have a ListView containing customized buttons for the listitems. How can I format the scrollbar in such a way that it is always visible (in case there is something to scroll...), make it wider (10 pts instead of the default 2) and give it a different color?</p>\n\n<p>The DoScroll.py file:</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.uix.listview import ListItemButton\n\nclass ShowItems(BoxLayout):\n    def get_list(self):\n        self.results.item_strings = {\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\"}\n\n    def show_capital(self, capital):\n        print capital\n\nclass CapitalButton(ListItemButton):\n    pass\n\nclass DoScrollApp(App):\n    pass\n\nif __name__ == '__main__':\n    DoScrollApp().run()\n</code></pre>\n\n<p>And here is the DoScroll.kv file.</p>\n\n<pre><code>#: import DoScroll DoScroll\n#: import ListAdapter kivy.adapters.listadapter.ListAdapter\n\n\n&lt;CapitalButton&gt;:\n    text_size: self.width - 50, None\n    halign: 'left'\n    valign: 'middle'\n    font_size: 16\n    on_press: app.root.show_capital(self.text)\n\nShowItems:\n\n&lt;ShowItems&gt;:\n    results: results_list\n    orientation: \"vertical\"\n    BoxLayout:\n        height: \"40dp\"\n        size_hint_y: None\n        Button:\n            text: \"Get the list\"\n            on_press: root.get_list()\n    ListView:\n        id: results_list\n        adapter:\n            ListAdapter(data=[], args_converter=lambda row_index, \n                an_obj: {'text': an_obj,'size_hint_y': None,'height': 40}, cls=DoScroll.CapitalButton)\n</code></pre>\n"}, {"tags": ["python", "openerp", "odoo-9"], "answers": [{"comments": [{"owner": {"reputation": 15975, "user_id": 5471709, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/09fhV.png?s=128&g=1", "display_name": "Kenly", "link": "https://stackoverflow.com/users/5471709/kenly"}, "edited": false, "score": 0, "creation_date": 1485435019, "post_id": 36324643, "comment_id": 70929168, "body": "The link is no longer available."}], "tags": [], "owner": {"reputation": 14070, "user_id": 4093735, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/6hzqH.png?s=128&g=1", "display_name": "Emipro Technologies Pvt. Ltd.", "link": "https://stackoverflow.com/users/4093735/emipro-technologies-pvt-ltd"}, "is_accepted": false, "score": 1, "last_activity_date": 1459401162, "creation_date": 1459401162, "answer_id": 36324643, "question_id": 36319261, "link": "https://stackoverflow.com/questions/36319261/how-to-sum-fields-in-a-view-qweb/36324643#36324643", "title": "How to sum fields in a view Qweb?", "body": "<p>You need to define one class which is inherited from <strong>report_sxw.rml_parse</strong> class, in that class you need to define <strong>init</strong> method where you need to add your <strong>method name</strong> as <strong>KEY</strong> of <strong>localcontext</strong> dictionary.</p>\n\n<pre><code>class sale_quotation_report(report_sxw.rml_parse):\n\n    def __init__(self, cr, uid, name, context): \n        super(sale_quotation_report, self).__init__(cr, uid, name, context=context)\n            self.localcontext.update({\n                    \u2018get_total\u2019: self._get_total,\n            })\n\n    def _get_total(self, lines, field):\n        total = 0.0\n        for line in lines :\n            total += line.product_uom_qty or 0.0\n        return total\n</code></pre>\n\n<p>One more class need to be defined which is inherited from <strong>osv.AbstractModel</strong></p>\n\n<pre><code>class report_saleorderqweb(osv.AbstractModel):\n    _name = \u2018module_name.report_sale_order_qweb\u2019\n    _inherit = \u2018report.abstract_report\u2019\n    _template = \u2018module_name.report_sale_order_qweb\u2019\n    _wrapped_report_class = sale_quotation_report\n\nHere,\n\n_name = \u2018report.&lt;module_name&gt;.&lt;report_name&gt;\u2019\n_inherit = \u2018report.abstract_report\u2019\n_template = \u2018&lt;module_name&gt;.&lt;report_name&gt;\u2019\n_wrapped_report_class = &lt;parser_class_name&gt;\n</code></pre>\n\n<p>And finally call that method from template</p>\n\n<pre><code>&lt;t t-foreach=\u201ddocs\u201d t-as=\u201do\u201d&gt;\n    &lt;span t-esc=\u201dget_total(o.order_line)\u201d/&gt;\n&lt;/t&gt;\n</code></pre>\n\n<p>You can refer <a href=\"http://blog.emiprotechnologies.com/create-qweb-report-odoo/\" rel=\"nofollow\">Steps to create Qweb report</a></p>\n"}], "owner": {"reputation": 257, "user_id": 5986925, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/nVcFO.gif?s=128&g=1", "display_name": "beriliox", "link": "https://stackoverflow.com/users/5986925/beriliox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2147, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1494511634, "creation_date": 1459370398, "last_edit_date": 1494511634, "question_id": 36319261, "link": "https://stackoverflow.com/questions/36319261/how-to-sum-fields-in-a-view-qweb", "title": "How to sum fields in a view Qweb?", "body": "<p>I am creating a report (qweb view) in the account.invoice model and wish to sum some fields for each invoice line as shown in the following image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/g4F0U.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g4F0U.png\" alt=\"enter image description here\"></a></p>\n\n<p>The problem is that not sum the fields as I want. What should I do?</p>\n\n<pre><code>cantidad_producto = fields.Integer(string='Cantidad Producto', store=True, readonly=True, compute='cantidad_consolidado')\ntotal_precio_unitario = fields.Monetary(string='Total precio unitario', store=True, readonly=True, compute='cantidad_consolidado')\ntotal_precio_neto = fields.Monetary(string='Total Cantidad Producto', store=True, readonly=True, compute='cantidad_consolidado')\n</code></pre>\n\n<p>And this is my function compute in the file account.invoice.py:</p>\n\n<pre><code>@api.one\n@api.depends('invoice_line_ids.quantity', 'invoice_line_ids.price_unit', 'invoice_line_ids.price_subtotal')\ndef cantidad_consolidado(self):\n    self.cantidad_producto = sum(line.quantity for line in self.invoice_line_ids)\n    self.total_precio_unitario = sum(line.price_unit for line in self.invoice_line_ids)\n    self.total_precio_neto = sum(line.price_subtotal for line in self.invoice_line_ids\n</code></pre>\n\n<p>And finally, this is my view code:</p>\n\n<pre><code>&lt;p&gt;Resumen&lt;/p&gt;\n&lt;table class=\"table table-bordered\"&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th class=\"text-center\"&gt;Total Cantidad&lt;/th&gt;\n      &lt;th class=\"text-center\"&gt;Total Precio Unitario&lt;/th&gt;\n      &lt;th class=\"text-center\"&gt;Total Precio(Neto)&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody class=\"invoice_tbody\"&gt;\n    &lt;td class=\"text-center\"&gt;\n      &lt;span t-esc=\"cantidad_producto\" /&gt;\n    &lt;/td&gt;\n    &lt;td class=\"text-center\"&gt;\n      &lt;span t-esc=\"total_precio_unitario\" /&gt;\n    &lt;/td&gt;\n    &lt;td class=\"text-center\"&gt;\n      &lt;span t-esc=\"total_precio_neto\" /&gt;\n    &lt;/td&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Why do not sum the fields in the report? Someone could tell me and so help me Please.</p>\n"}, {"tags": ["python", "ipython", "jupyter", "jupyter-notebook"], "answers": [{"tags": [], "owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "is_accepted": false, "score": 0, "last_activity_date": 1459434200, "creation_date": 1459434200, "answer_id": 36336153, "question_id": 36319252, "link": "https://stackoverflow.com/questions/36319252/how-to-revert-to-normal-style-no-style-in-ipython-notebook-after-calling-html/36336153#36336153", "title": "How to revert to normal style (no style) in IPython Notebook after calling HTML()?", "body": "<p><code>HTML(\"\")</code> seems to do the trick.</p>\n"}, {"tags": [], "owner": {"reputation": 618, "user_id": 2494865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eedfd4644b2410394451842005f0159?s=128&d=identicon&r=PG", "display_name": "Taar", "link": "https://stackoverflow.com/users/2494865/taar"}, "is_accepted": false, "score": 1, "last_activity_date": 1461102410, "creation_date": 1461102410, "answer_id": 36730087, "question_id": 36319252, "link": "https://stackoverflow.com/questions/36319252/how-to-revert-to-normal-style-no-style-in-ipython-notebook-after-calling-html/36730087#36730087", "title": "How to revert to normal style (no style) in IPython Notebook after calling HTML()?", "body": "<p>The file <code>\"custom_dark.css\"</code> is actually an html fragment containing a <code>&lt;style&gt;</code> tag and posing as a css file.</p>\n\n<p>When you \"display\" it by calling the <code>HTML</code> function, the fragment is inserted in the DOM inside a special div in the cell output area, causing a global change to the style of the html page.</p>\n\n<p>When you save the resulting notebook, all output is serialized as JSON and saved, including the DOM fragment you created before.</p>\n\n<p>When you load it again, the engine restores the output thus saved; therefore it recreates the DOM insert, and the custom style is applied again by your browser.</p>\n\n<p>Right now I can think of two ways of restoring the default style; both consist in removing the output for the cell:</p>\n\n<ol>\n<li><p>you manage to execute the <em>same</em> cell, but without the <code>HTML()</code> call; this changes the output div to one without the <code>&lt;script&gt;</code> insert, and the browser interprets this as removing the custom css layer; then you save again;</p></li>\n<li><p>or, you manually edit the <code>.ipynb</code> file and remove the culprit, that is, the serialized output ; it should be under the <code>\"outputs\"</code> key of the (JSON) object that represents the cell (look for a <code>\"text/html\"</code> member and remove it entirely); you can then load the file again.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 12853, "user_id": 1673784, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d23ac5da61f02361e1363390231cd248?s=128&d=identicon&r=PG", "display_name": "scottlittle", "link": "https://stackoverflow.com/users/1673784/scottlittle"}, "is_accepted": false, "score": 0, "last_activity_date": 1567191358, "creation_date": 1567191358, "answer_id": 57731937, "question_id": 36319252, "link": "https://stackoverflow.com/questions/36319252/how-to-revert-to-normal-style-no-style-in-ipython-notebook-after-calling-html/57731937#57731937", "title": "How to revert to normal style (no style) in IPython Notebook after calling HTML()?", "body": "<p>If you've jacked the HTML/CSS of the notebook up royally, try clearing the outputs:</p>\n\n<p><code>Cell</code> > <code>All Outputs</code> > <code>Clear</code></p>\n"}], "owner": {"reputation": 9809, "user_id": 1389110, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/80dbf8bedd0a04f4c971558bfd39ed04?s=128&d=identicon&r=PG", "display_name": "Pyderman", "link": "https://stackoverflow.com/users/1389110/pyderman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 842, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1567191358, "creation_date": 1459370349, "last_edit_date": 1459528536, "question_id": 36319252, "link": "https://stackoverflow.com/questions/36319252/how-to-revert-to-normal-style-no-style-in-ipython-notebook-after-calling-html", "title": "How to revert to normal style (no style) in IPython Notebook after calling HTML()?", "body": "<p>Liking the dark background in <a href=\"http://nbviewer.jupyter.org/gist/wrobstory/1eb8cb704a52d18b9ee8/Up%20and%20Down%20PyData%202014.ipynb\" rel=\"nofollow\">this notebook</a>, I grabbed the author's CSS file from the gist, and applied the following in my own notebook (exactly as the author has done):</p>\n\n<pre><code>from IPython.core.display import HTML\nstyles = open(\"custom_dark.css\", \"r\").read()\nHTML(styles)\n</code></pre>\n\n<p>While it has applied a dark background, the styling has also gotten rid of everything else on the page but the cells. So no menus at the top, etc. Even having closed and re-opened the notebook, and restarting the kernel, the dark affect and the loss of page elements persists.</p>\n\n<p>How can I revert the styling (to no styling at all)?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1, "user_id": 6136818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1cdfcdb331ac5a07dc89fbbccaa659d?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Phillips", "link": "https://stackoverflow.com/users/6136818/brian-phillips"}, "edited": false, "score": 0, "creation_date": 1459370426, "post_id": 36319251, "comment_id": 60261858, "body": "the code I am using to get this error is:  text_only_list = [tweet[&quot;text&quot;] for tweet in tweets_list] new_list = [] for text in text_only_list:     text = text.translate(table)     text = text.lower()     new_list.append(text)"}, {"owner": {"reputation": 2400, "user_id": 5266746, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cb43ae82055fed862c2ba3e6ed9c8e9f?s=128&d=identicon&r=PG&f=1", "display_name": "n1c9", "link": "https://stackoverflow.com/users/5266746/n1c9"}, "edited": false, "score": 1, "creation_date": 1459370524, "post_id": 36319251, "comment_id": 60261917, "body": "Please edit that info into your original question"}, {"owner": {"reputation": 4750, "user_id": 589165, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/6ab25467e258f303d8d9a9fa75145c93?s=128&d=identicon&r=PG", "display_name": "Finn &#197;rup Nielsen", "link": "https://stackoverflow.com/users/589165/finn-%c3%85rup-nielsen"}, "edited": false, "score": 0, "creation_date": 1459427274, "post_id": 36319251, "comment_id": 60288862, "body": "You can see the attributes with <code>dir(tweet)</code> and the keys of the dictionary with <code>tweet.keys()</code>. Apparently <code>&quot;text&quot;</code> is not among the keys."}], "answers": [{"tags": [], "owner": {"reputation": 8598, "user_id": 719312, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/997c8124fb91a5eca609aea651fc9d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Shields", "link": "https://stackoverflow.com/users/719312/thomas-shields"}, "is_accepted": false, "score": 0, "last_activity_date": 1459372344, "creation_date": 1459372344, "answer_id": 36319847, "question_id": 36319251, "link": "https://stackoverflow.com/questions/36319251/twitter-sentiment-analysis-error-code-keyerror-text/36319847#36319847", "title": "Twitter sentiment analysis error code: KeyError: &#39;text&#39;", "body": "<p>This simply means the <code>tweet</code> objects in <code>tweet_list</code> don't have a <code>text</code> attribute. Make sure the data looks like what you expect</p>\n"}], "owner": {"reputation": 1, "user_id": 6136818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1cdfcdb331ac5a07dc89fbbccaa659d?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Phillips", "link": "https://stackoverflow.com/users/6136818/brian-phillips"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1180, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1590055264, "creation_date": 1459370348, "last_edit_date": 1459371888, "question_id": 36319251, "link": "https://stackoverflow.com/questions/36319251/twitter-sentiment-analysis-error-code-keyerror-text", "title": "Twitter sentiment analysis error code: KeyError: &#39;text&#39;", "body": "<p>I am trying to run a twitter sentiment analysis using AFINN in python. here is the section of code I am having trouble with:</p>\n\n<pre><code># Create a list of the tweets (\"text\") only\ntext_only_list = [tweet[\"text\"] for tweet in tweets_list]\n# Remove digit and punctuation, and convert to lower case\nnew_list = []\nfor text in text_only_list:\n    text = text.translate(table)\n    text = text.lower()\n    new_list.append(text)\n</code></pre>\n\n<p>And here is the error code I am receiving:</p>\n\n<pre><code>  File \"&lt;ipython-input-3-731d7bbe9420&gt;\", line 1, in &lt;module&gt;\n    text_only_list = [tweet[\"text\"] for tweet in tweets_list]\n\n  File \"&lt;ipython-input-3-731d7bbe9420&gt;\", line 1, in &lt;listcomp&gt;\n    text_only_list = [tweet[\"text\"] for tweet in tweets_list]\n\nKeyError: 'text'\n</code></pre>\n"}, {"tags": ["python", "windows", "cmd", "ascii", "getch"], "comments": [{"owner": {"reputation": 4292, "user_id": 2302482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FAIV.jpg?s=128&g=1", "display_name": "Bahrom", "link": "https://stackoverflow.com/users/2302482/bahrom"}, "edited": false, "score": 0, "creation_date": 1459370908, "post_id": 36319228, "comment_id": 60262145, "body": "&quot;without having to if condition every single illegal char&quot;, then maybe you can if condition all the legal chars? <code>if inp in legal_chars: do stuff</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 3412975, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/aaa4473b06a1ba0b22a70375d790575f?s=128&d=identicon&r=PG&f=1", "display_name": "user3412975", "link": "https://stackoverflow.com/users/3412975/user3412975"}, "edited": false, "score": 0, "creation_date": 1459433276, "post_id": 36319419, "comment_id": 60293495, "body": "Thank you zondo, the thing I found most  helpful was when you mentioned that special characters need to be treated like special characters. I fixed the backspace issue however I&#39;m not using the &#39;curses&#39; modules. I did try to get to know the &#39;curses&#39; module in a totally different py file however it renders my GUI-like structure useless due to it being its totally own GUI structure. Is there a way I can stop illegal chars from being entered in? ( Like input() ) Thank you. Also I forgot to add the imports in my code above so I made the changes."}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "reply_to_user": {"reputation": 45, "user_id": 3412975, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/aaa4473b06a1ba0b22a70375d790575f?s=128&d=identicon&r=PG&f=1", "display_name": "user3412975", "link": "https://stackoverflow.com/users/3412975/user3412975"}, "edited": false, "score": 0, "creation_date": 1459435471, "post_id": 36319419, "comment_id": 60295165, "body": "<a href=\"http://www.ascii-code.com/\" rel=\"nofollow noreferrer\">Here</a> is a table of the ascii codes.  You can decide what should be allowed based off of that.  You might, for example, say that it must be in <code>range(32, 128)</code> because those are the printable characters (including delete) that are on the average keyboard.  You might want to use <code>range(32, 256)</code> to include the characters that can be printed, but are not on the average keyboard.  You might want to add <code>10</code> separately because it is a new line character.  Maybe you want to add special behavior for Escape, <code>27</code>."}], "tags": [], "owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "is_accepted": true, "score": 1, "last_activity_date": 1460757549, "last_edit_date": 1460757549, "creation_date": 1459370998, "answer_id": 36319419, "question_id": 36319228, "link": "https://stackoverflow.com/questions/36319228/python-3-4-getch-a-typewriter-python/36319419#36319419", "title": "Python 3.4: getch() - A Typewriter - Python", "body": "<p>I am guessing that you are using the <code>curses</code> library.  If you are,\nyou can use <code>from curses import ascii</code> to get the ASCII values of\ncharacters.  In this case, you can use <code>ascii.DEL</code> to get the value of\nthe backspace key: <code>127</code>.  The backspace key is often written with\n<code>\\b</code>.  Just try typing <code>print(\"foo\\b\\b\")</code> into the Python shell.  You\nwill see that the whole string is printed.  If you do\n<code>print(\"foo\\b\\bf\")</code>, though, <code>ffo</code> is printed.  This is because the\n<code>\\b</code> character just moves the cursor to the left by one character.  It\ndoesn't actually overwrite characters with spaces to remove them from\nthe screen.  You need to treat the backspace character as special:</p>\n\n<pre><code>myinput = \"\"\nFinished = False\nwhile Finished != True:\n    os.system('cls')\n    print(\"Name: \" + myinput)\n    while True:\n        key = ord(getch())\n        realkey = chr(key)\n        print(key)\n        if key != 0:\n            if key == 13: #Enter\n                Finished = True\n            elif key == ascii.DEL:\n                myinput = myinput[:-1]\n            else:\n                myinput += realkey\n            break\n</code></pre>\n\n<p><strong>Edit</strong>: Actual code used by the OP:</p>\n\n<pre><code>from msvcrt import getch\nimport os\n\nFinished = False\nmydict = \"\" ## my_dict has no special value, just decided to call it that.\n\nwhile Finished != True:\n    while True:\n        key = ord(getch())\n        realkey = chr(key)\n        if key != 0:\n            if key == 13: #Enter\n                Finished = True\n                break\n            elif key == 8: #Backspace\n                my_dict[CurrentItem] = my_dict[CurrentItem][:-1]\n                break\n            elif key in range(32, 127):\n                my_dict[CurrentItem] += realkey\n                break\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 3412975, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/aaa4473b06a1ba0b22a70375d790575f?s=128&d=identicon&r=PG&f=1", "display_name": "user3412975", "link": "https://stackoverflow.com/users/3412975/user3412975"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2331, "favorite_count": 0, "accepted_answer_id": 36319419, "answer_count": 1, "score": 0, "last_activity_date": 1460757549, "creation_date": 1459370248, "last_edit_date": 1459432342, "question_id": 36319228, "link": "https://stackoverflow.com/questions/36319228/python-3-4-getch-a-typewriter-python", "title": "Python 3.4: getch() - A Typewriter - Python", "body": "<p>Main question, for the way my python program is built, I am trying to build a typewriter for my program that when a key is pressed it refreshes like a GUI. However, I am encountering a weird problem with ASCII especially Backspace.</p>\n\n<pre><code>from msvcrt import getch\nimport os\n#Test\n# Always run in Python CMD\nmyinput = \"\"\nFinished = False\nwhile Finished != True:\n    os.system('cls')\n    print(\"Name: \" + myinput)\n    while True:\n        key = ord(getch())\n        realkey = chr(key)\n        print(key)\n        if key != 0:\n            if key == 13: #Enter\n                Finished = True\n                break\n            else:\n                myinput = myinput + realkey\n                break\n</code></pre>\n\n<p>When you are typing something in the mini typewriter, then you make a mistake and you press Backspace, it look like it did nothing however when you press a key again strangely it wil overwrite the char depending on how many times you backspaced, and even stranglely if you backspace more then you typed, it would actually overwrite the consoles output. I know for sure its not an error in my block, it is just how ASCII works.</p>\n\n<pre><code>P\n&gt;Name: P\ny\n&gt;Name: Py\nt\n&gt;Name: Pyt\nh\n&gt;Name: Pyth\no\n&gt;Name: Pytho\nn\n&gt;Name: Python\n(Backspace)\n&gt;Name: Python\n(Backspace)\n&gt;Name: Python\n(Backspace)\n&gt;Name: Python\nK\n&gt;Name: PytKon\n#See?!    |\n</code></pre>\n\n<p>Why? and How can I fix this error? Is there a cleaner way to do what I'm doing? But it has to be done in the GUI style I've done. (If that makes sense)</p>\n\n<p>Also, I know that this getch() is supposed to capture everything I type, but is there a way to capture only proper characters( Basically I want my typewrite to be like input() ) without having to if condition every single illegal char?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "sqlite", "dataset"], "answers": [{"tags": [], "owner": {"reputation": 562, "user_id": 1397041, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/6639459190c96887363478d767fe0270?s=128&d=identicon&r=PG", "display_name": "Layne", "link": "https://stackoverflow.com/users/1397041/layne"}, "is_accepted": true, "score": 0, "last_activity_date": 1459377135, "creation_date": 1459377135, "answer_id": 36320917, "question_id": 36319168, "link": "https://stackoverflow.com/questions/36319168/how-do-i-get-the-dataset-module-for-python-to-work-when-deployed/36320917#36320917", "title": "How do I get the dataset module for Python to work when deployed?", "body": "<p>Noob move. When I gave it the full path in my script, the error went away.</p>\n\n<p>From this...\n<code>db = dataset.connect('sqlite:///earthquakes.db')</code></p>\n\n<p>To this...\n<code>db = dataset.connect('sqlite:////var/www/html/apps/earthquakes/scripts/earthquakes.db')</code></p>\n"}], "owner": {"reputation": 562, "user_id": 1397041, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/6639459190c96887363478d767fe0270?s=128&d=identicon&r=PG", "display_name": "Layne", "link": "https://stackoverflow.com/users/1397041/layne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 36320917, "answer_count": 1, "score": 0, "last_activity_date": 1459377135, "creation_date": 1459370032, "question_id": 36319168, "link": "https://stackoverflow.com/questions/36319168/how-do-i-get-the-dataset-module-for-python-to-work-when-deployed", "title": "How do I get the dataset module for Python to work when deployed?", "body": "<p>Locally, I've created an empty sqlite database called <code>earthquakes.db</code>. Using the <a href=\"https://dataset.readthedocs.org/en/latest/\" rel=\"nofollow\">dataset</a> Python library, I am able to freeze my results to a json file and everything works as expected. However, when deployed I get a long list of errors that presumably refer to being unable to connect to the database.</p>\n\n<pre><code>Traceback (most recent call last):\n   File \"/var/www/html/apps/earthquakes/scripts/earthquakes.py\", line 7, in &lt;module&gt;\n       db = dataset.connect('sqlite:///earthquakes.db')\n\n   ... More base.py and pool.py errors here ...\n\nsqlalchemy.exc.OperationalError: (sqlite3.OperationalError) unable to open database file\n</code></pre>\n\n<p>I've checked permissions and installs, everything seems to be right. What am I missing? Thx.</p>\n"}, {"tags": ["python", "matplotlib", "plot", "ggplot2", "survival-analysis"], "answers": [{"tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": true, "score": 2, "last_activity_date": 1459370567, "last_edit_date": 1459370567, "creation_date": 1459370169, "answer_id": 36319208, "question_id": 36319122, "link": "https://stackoverflow.com/questions/36319122/why-are-my-python-plots-not-styled-like-modern-ggplots/36319208#36319208", "title": "Why are my python plots not styled like modern ggplots?", "body": "<p>Install <a href=\"http://stanford.edu/~mwaskom/software/seaborn/\" rel=\"nofollow noreferrer\">seaborn</a>, import it:</p>\n\n<pre><code>import seaborn\n</code></pre>\n\n<p>and do your plot again.</p>\n\n<p>Also, turn on the inline mode for matplotlib in the notebook:</p>\n\n<pre><code>%matplotlib inline\n</code></pre>\n\n<p>Alternatively use:</p>\n\n<pre><code>%matplotlib notebook\n</code></pre>\n\n<p>for zoomable plots.</p>\n\n<p>Plot before:</p>\n\n<p><a href=\"https://i.stack.imgur.com/74hpM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/74hpM.png\" alt=\"enter image description here\"></a></p>\n\n<p>Plot after:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iV6LU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iV6LU.png\" alt=\"enter image description here\"></a></p>\n\n<p>these steps.</p>\n"}], "owner": {"reputation": 857, "user_id": 4721676, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/809b0bc2aa17dc4f35621e98b0c76bb0?s=128&d=identicon&r=PG&f=1", "display_name": "David Schuler", "link": "https://stackoverflow.com/users/4721676/david-schuler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 36319208, "answer_count": 1, "score": 0, "last_activity_date": 1459370840, "creation_date": 1459369864, "last_edit_date": 1459370840, "question_id": 36319122, "link": "https://stackoverflow.com/questions/36319122/why-are-my-python-plots-not-styled-like-modern-ggplots", "title": "Why are my python plots not styled like modern ggplots?", "body": "<p>I've been following along with <a href=\"http://lifelines.readthedocs.org/en/latest/Intro%20to%20lifelines.html#estimating-the-survival-function-using-kaplan-meier\" rel=\"nofollow noreferrer\">this</a> tutorial, using my own data set. I can get the plots to show, but they don't look as nice as the ones in that website.</p>\n\n<p>For comparison, here's one I'm getting:<a href=\"https://i.stack.imgur.com/YJgR3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YJgR3.png\" alt=\"enter image description here\"></a></p>\n\n<p>and here is one in their example:<a href=\"https://i.stack.imgur.com/mR3j0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mR3j0.png\" alt=\"enter image description here\"></a></p>\n\n<p>I had to add <code>plt.show()</code> to get my plot to show, so is this what's causing it? It seems like theirs is a ggplot and mine is off of matplotlib, so I'm guessing that's the root of the cause. However, I just can't get my plots to show without adding that line, so I'm not sure what to do. This will be for a report, so I'd really like to get the nicer looking plots.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1459370438, "post_id": 36319118, "comment_id": 60261863, "body": "that&#39;s not valid syntax"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4414636"}, "edited": false, "score": 1, "creation_date": 1459370550, "post_id": 36319118, "comment_id": 60261930, "body": "Couldn&#39;t you have instead made an edit? Just asking."}, {"owner": {"reputation": 7130, "user_id": 1429073, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6cf3963f7758df3b57542c790e598630?s=128&d=identicon&r=PG&f=1", "display_name": "DevLounge", "link": "https://stackoverflow.com/users/1429073/devlounge"}, "edited": false, "score": 1, "creation_date": 1459372066, "post_id": 36319118, "comment_id": 60262810, "body": "The question is really clear IMO. Please clean up all these useless comments. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": false, "score": 3, "last_activity_date": 1459371471, "creation_date": 1459371471, "answer_id": 36319596, "question_id": 36319118, "link": "https://stackoverflow.com/questions/36319118/how-to-get-the-value-of-first-and-second-dimension-where-third-dimension-is-a-sp/36319596#36319596", "title": "How to get the value of first and second dimension where third dimension is a specific value in a numpy array", "body": "<p>Some slicing works:</p>\n\n<pre><code>&gt;&gt;&gt; arr[arr[:,-1] == 255][:, :2]\narray([[32, 32]], dtype=uint8)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4414636"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459377370, "creation_date": 1459369854, "last_edit_date": 1459377370, "question_id": 36319118, "link": "https://stackoverflow.com/questions/36319118/how-to-get-the-value-of-first-and-second-dimension-where-third-dimension-is-a-sp", "title": "How to get the value of first and second dimension where third dimension is a specific value in a numpy array", "body": "<p>In a 2D NumPy array, how do I get the first and second element of those rows whose third element is 255?</p>\n\n<p><code>arr = np.array([[ 32, 32, 255], [21, 21, 10], [25, 27, 18]], dtype=np.uint8)</code></p>\n\n<p>How to find the first and second element, which in this case are both 32?</p>\n\n<p>I basically want to get the coordinates that contain a certain color pixel.</p>\n"}, {"tags": ["python", "sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 3306, "user_id": 1319915, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/488fb2b2881fcc6fce6745f8dd0fccd5?s=128&d=identicon&r=PG&f=1", "display_name": "trianta2", "link": "https://stackoverflow.com/users/1319915/trianta2"}, "edited": false, "score": 0, "creation_date": 1459433529, "post_id": 36319442, "comment_id": 60293657, "body": "Thanks for the in-depth answer and debugging tips. Would you say that the original <code>or_</code> query is working as intended, or should sqlalchemy have inserted parenthesis around <code>.contains()</code>?"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 3306, "user_id": 1319915, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/488fb2b2881fcc6fce6745f8dd0fccd5?s=128&d=identicon&r=PG&f=1", "display_name": "trianta2", "link": "https://stackoverflow.com/users/1319915/trianta2"}, "edited": false, "score": 0, "creation_date": 1459433792, "post_id": 36319442, "comment_id": 60293846, "body": "@trianta2 intuitively it would feel that it should have parentheses. Reading what <a href=\"http://docs.sqlalchemy.org/en/rel_1_0/orm/internals.html#sqlalchemy.orm.properties.RelationshipProperty.Comparator.contains\" rel=\"nofollow noreferrer\"><code>RelationshipProperty.Comparator.contains</code></a> should do adds to that feeling, but on the other hand in this case because of the join it would fail anyway and as such is the wrong choice. The <code>any()</code> you found out yourself produces the correct <code>EXISTS</code> expression."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 3306, "user_id": 1319915, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/488fb2b2881fcc6fce6745f8dd0fccd5?s=128&d=identicon&r=PG&f=1", "display_name": "trianta2", "link": "https://stackoverflow.com/users/1319915/trianta2"}, "edited": false, "score": 0, "creation_date": 1459435157, "post_id": 36319442, "comment_id": 60294915, "body": "The linked documentation actually lists this exact case as a caveat of using <code>contains()</code> with many-to-many relationships. It will not work with complex OR expressions etc."}], "tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": true, "score": 1, "last_activity_date": 1459371047, "creation_date": 1459371047, "answer_id": 36319442, "question_id": 36319017, "link": "https://stackoverflow.com/questions/36319017/why-is-this-sqlalchemy-or-expression-not-working-with-a-true-clause/36319442#36319442", "title": "Why is this sqlalchemy or_ expression not working with a true clause?", "body": "<p>You did not include your secondary table definition, but I presume it is something like this:</p>\n\n<pre><code>shared_post = Table(\n    'shared_post', Base.metadata,\n    Column('user_id', Integer,\n           ForeignKey('user.id', ondelete='cascade'), nullable=False),\n    Column('post_id', Integer,\n           ForeignKey('post.id', ondelete='cascade'), nullable=False)\n)\n</code></pre>\n\n<p>A good start to debugging SQLAlchemy queries is to try and print parts of expressions or even full queries:</p>\n\n<pre><code>print(expr)  # where expr is the original or_(...)\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>:param_1 = post.owner_id OR post.public = 1 OR post.id = shared_post_1.post_id AND :param_2 = shared_post_1.user_id\n</code></pre>\n\n<p>We see that the <code>.contains()</code> method has produced an implicit join and an AND of 2 expressions without parentheses: the join predicate</p>\n\n<pre><code>post.id = shared_post_1.post_id\n</code></pre>\n\n<p>and the second expression is the actual check for the given user</p>\n\n<pre><code>:param_2 = shared_post_1.user_id\n</code></pre>\n\n<p>So your predicates now consist of ORs followed by an AND that will never be satisfied.</p>\n\n<p>The full query is</p>\n\n<pre><code>SELECT post.id AS post_id, post.owner_id AS post_owner_id, post.name AS post_name, post.public AS post_public \nFROM post, shared_post AS shared_post_1 \nWHERE ? = post.owner_id OR post.public = 1 OR post.id = shared_post_1.post_id AND ? = shared_post_1.user_id\n</code></pre>\n"}], "owner": {"reputation": 3306, "user_id": 1319915, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/488fb2b2881fcc6fce6745f8dd0fccd5?s=128&d=identicon&r=PG&f=1", "display_name": "trianta2", "link": "https://stackoverflow.com/users/1319915/trianta2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 36319442, "answer_count": 1, "score": 0, "last_activity_date": 1459371047, "creation_date": 1459369513, "last_edit_date": 1459370716, "question_id": 36319017, "link": "https://stackoverflow.com/questions/36319017/why-is-this-sqlalchemy-or-expression-not-working-with-a-true-clause", "title": "Why is this sqlalchemy or_ expression not working with a true clause?", "body": "<p>I have a sqlalchemy declarative model which looks like:</p>\n\n<pre><code>class User(Base):\n    __tablename__ = 'user'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(32), unique=True, nullable=False)\n\n    posts = relationship('Post', cascade='all, delete-orphan', back_populates='owner')\n\n\nclass Post(Base):\n    __tablename__ = 'post'\n    id = Column(Integer, primary_key=True)\n    owner_id = Column(Integer, ForeignKey('user.id', ondelete=\"CASCADE\"), nullable=False)\n    name = Column(String(256), nullable=False)\n    public = Column(Boolean, default=True)\n\n    owner = relationship('User', back_populates='posts', single_parent=True)\n    shared = relationship('User', secondary=shared_post)\n</code></pre>\n\n<p>In my test database, I have a user User1 who has a post Post1. Post1 does not have any shared users associated with it. I tried a query:</p>\n\n<pre><code>expr = or_(Post.owner == current_user,  # current_user is ORM User1\n           Post.public == True,\n           Post.shared.contains(another_user))\n\nposts = session.query(Post).filter(expr).all()\n</code></pre>\n\n<p>However <code>posts</code> is an empty list. Here are the individual queries:</p>\n\n<pre><code>session.query(Post).filter(Post.owner == current_user).all()  # returns Post1\nsession.query(Post).filter(Post.public == True).all()  # returns Post1\nsession.query(Post).filter(Post.shared.contains(another_user)).all()  # empty list as expected\n</code></pre>\n\n<p>Why doesn't the original <code>or_</code> work if two out of three individual queries are confirmed working?</p>\n\n<p>Edit #1:</p>\n\n<p>Replacing <code>Post.shared.contains(another_user)</code> with <code>Post.shared.any(User.id == another_user_id)</code> fixes the <code>or_</code> query problem. However now I'd like to know why one works and the other doesn't.</p>\n"}, {"tags": ["python", "lex", "ply"], "comments": [{"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "edited": false, "score": 0, "creation_date": 1459379860, "post_id": 36318996, "comment_id": 60266055, "body": "I would suspect the nested single quotes."}, {"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "reply_to_user": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "edited": false, "score": 0, "creation_date": 1459380381, "post_id": 36318996, "comment_id": 60266235, "body": "I don&#39;t think that&#39;s the case since <code>r&#39;\\#(\\w+)\\s+(.+)&#39;</code> (<code>t_DIRECTIVE</code>) doesn&#39;t contain any <code>&#39;</code> characters within it."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 1, "last_activity_date": 1459381744, "last_edit_date": 1459381744, "creation_date": 1459381293, "answer_id": 36321702, "question_id": 36318996, "link": "https://stackoverflow.com/questions/36318996/cannot-build-ply-lexer-using-ideone/36321702#36321702", "title": "Cannot build PLY lexer using ideone", "body": "<p>Presumably ideone uses the <code>-OO</code> optimization setting, which removes all docstrings. Consequently, the <code>lex</code> module cannot find the docstrings when it wants to build the scanner. A similar problem would be encountered in the parser.</p>\n\n<p>Here is an ugly workaround: <a href=\"http://ideone.com/H5rxXK\" rel=\"nofollow\">http://ideone.com/H5rxXK</a></p>\n\n<p>There is a clean workaround recommended by the <a href=\"http://www.dabeaz.com/ply/ply.html#ply_nn37\" rel=\"nofollow\">PLY manual</a> (see the next section -- <em>8. Using Python's Optimized Mode</em> -- after the link; the \"correct\" link doesn't currently work because of an HTML error in the PLY manual). Unfortunately, it produces <a href=\"http://ideone.com/nA4R15\" rel=\"nofollow\">a different error</a>, presumably the result of ideone's filesystem virtualization.</p>\n"}], "owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "accepted_answer_id": 36321702, "answer_count": 1, "score": 0, "last_activity_date": 1502482457, "creation_date": 1459369415, "last_edit_date": 1502482457, "question_id": 36318996, "link": "https://stackoverflow.com/questions/36318996/cannot-build-ply-lexer-using-ideone", "title": "Cannot build PLY lexer using ideone", "body": "<p>I'm trying to create a MCVE for a question I'm going to ask later, but I've come across a problem with the online IDE I'm trying to use, ideone.</p>\n\n<p>The code in the link below works perfectly fine if I run it in my local Python 2.7 interpreter:</p>\n\n<p><a href=\"http://ideone.com/DpALEU\" rel=\"nofollow\">http://ideone.com/DpALEU</a></p>\n\n<p>However, on ideone, the errors I get are:</p>\n\n<pre><code>ERROR: prog.py:282: No regular expression defined for rule 't_DIRECTIVE'\nERROR: prog.py:286: No regular expression defined for rule 't_REFERENCE'\nERROR: prog.py:291: No regular expression defined for rule 't_UNAME'\nERROR: prog.py:296: No regular expression defined for rule 't_USTRING'\nERROR: prog.py:301: No regular expression defined for rule 't_UFLOAT'\nERROR: prog.py:307: No regular expression defined for rule 't_HEX'\nERROR: prog.py:314: No regular expression defined for rule 't_INTEGER'\nERROR: prog.py:320: No regular expression defined for rule 't_COMMENT'\nERROR: prog.py:324: No regular expression defined for rule 't_ID'\nERROR: prog.py:330: No regular expression defined for rule 't_newline'\nTraceback (most recent call last):\n  File \"prog.py\", line 338, in &lt;module&gt;\n  File \"/usr/lib/python2.7/dist-packages/ply/lex.py\", line 901, in lex\n    raise SyntaxError(\"Can't build lexer\")\nSyntaxError: Can't build lexer\n</code></pre>\n\n<p>However, I'm defining my rules validly. For example:</p>\n\n<pre><code>def t_REFERENCE(t):\n    r'([a-zA-Z0-9_\\-]+)\\s*\\'([a-zA-Z0-9_\\-\\.]+)\\''\n    return t\n</code></pre>\n\n<p>What would be causing this error?</p>\n\n<p>Many thanks in advance.</p>\n"}, {"tags": ["python", "html", "python-3.x", "web-scraping", "bs4"], "comments": [{"owner": {"reputation": 2400, "user_id": 5266746, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/cb43ae82055fed862c2ba3e6ed9c8e9f?s=128&d=identicon&r=PG&f=1", "display_name": "n1c9", "link": "https://stackoverflow.com/users/5266746/n1c9"}, "edited": false, "score": 0, "creation_date": 1459370654, "post_id": 36318992, "comment_id": 60261996, "body": "What other code have you tried?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6007182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3cb9b73e1c4d2a3f4aed0da9855950?s=128&d=identicon&r=PG&f=1", "display_name": "Crouder", "link": "https://stackoverflow.com/users/6007182/crouder"}, "edited": false, "score": 0, "creation_date": 1459370093, "post_id": 36319086, "comment_id": 60261665, "body": "first, thanks for the answer, but it gives me an error: <code>Traceback (most recent call last):   File &quot;&#47;Users&#47;me&#47;Documents&#47;textscraper2.py&quot;, line 29, in &lt;module&gt;     rank, name = player.find_all(&quot;span&quot;)[:2] ValueError: not enough values to unpack (expected 2, got 0)</code>"}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 1, "last_activity_date": 1459370182, "last_edit_date": 1459370182, "creation_date": 1459369725, "answer_id": 36319086, "question_id": 36318992, "link": "https://stackoverflow.com/questions/36318992/get-text-between-tags-beautifulsoup4/36319086#36319086", "title": "Get text between tags BeautifulSoup4", "body": "<p>I would locate every player element using a <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors\" rel=\"nofollow\">CSS selector</a> (based on the <code>player</code> part of the player profile URL) and then locate the first 2 spans inside - first one would be the rank, the second - username:</p>\n\n<pre><code>for player in soup.select(\"#content a[href*=\"player/\"]\"):\n    rank, name = player.find_all(\"span\")[:2]\n    print(rank.get_text(strip=True), name.get_text(strip=True))\n</code></pre>\n\n<p>And here is the complete code I'm executing:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nurl = \"http://csgo.99damage.de/de/edb/players\"\nresponse = requests.get(url, headers={\"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.87 Safari/537.36\"})\n\nsoup = BeautifulSoup(response.content, \"html.parser\")\nfor player in soup.select('#content a[href*=\"player/\"]'):\n    rank, name = player.find_all(\"span\")[:2]\n    print(rank.get_text(strip=True), name.get_text(strip=True))\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>1. KRiMZ\n2. olofmeister\n3. JW\n4. flusha\n5. dennis\n6. dev1ce\n7. dupreeh\n8. Xyp9x\n9. Karrigan\n10. cajunb\n11. friberg\n12. GeT_RiGhT\n13. f0rest\n14. Xizt\n15. flamiE\n16. GuardiaN\n17. seized\n18. Edward\n19. Zeus\n20. kioShiMa\n21. pronax\n22. Happy\n23. NBK\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6007182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3cb9b73e1c4d2a3f4aed0da9855950?s=128&d=identicon&r=PG&f=1", "display_name": "Crouder", "link": "https://stackoverflow.com/users/6007182/crouder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 717, "favorite_count": 0, "accepted_answer_id": 36319086, "answer_count": 1, "score": 1, "last_activity_date": 1459410558, "creation_date": 1459369401, "last_edit_date": 1459410558, "question_id": 36318992, "link": "https://stackoverflow.com/questions/36318992/get-text-between-tags-beautifulsoup4", "title": "Get text between tags BeautifulSoup4", "body": "<p>I try to scrape the 99damage top CS:GO player list and I have a problem with getting the player\u00b4s name.</p>\n\n<pre><code>&lt;a href=\"http://csgo.99damage.de/edb/player/4151-krimz\" class=\"item small\"&gt;\n    &lt;span stype=\"width:80px;\"&gt; 1. &lt;/span&gt;\n    &lt;span style=\"width: 280px;\"&gt;\n        &lt;img src=\"https://cdn1.gamesports.net/img/flags/se.gif\" border=\"0\" alt=\"se\" title=\"Sweden\"&gt;\n        \" KRiMZ \"\n    &lt;/span&gt;\n</code></pre>\n\n<p>\"KRiMZ\" is the player\u00b4s name I try to get in this case, but there are many other names so i can\u00b4t just search for KRiMZ. I searched the web for solutions but didn\u00b4t find one that solves my problem. </p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 2, "creation_date": 1459369808, "post_id": 36319006, "comment_id": 60261512, "body": "<code>self.__name</code> is needed at the least since the <code>@property</code> assumes it exists. The implementation of <code>name</code> would have to change if it wasn&#39;t guaranteed to be initialized in <code>__init__</code>."}], "tags": [], "owner": {"reputation": 4037, "user_id": 3990145, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3d95b7ec21ccd7bf3c8e1604d49faca1?s=128&d=identicon&r=PG&f=1", "display_name": "xi&#186;", "link": "https://stackoverflow.com/users/3990145/xi%c2%ba"}, "is_accepted": false, "score": 0, "last_activity_date": 1459369461, "creation_date": 1459369461, "answer_id": 36319006, "question_id": 36318960, "link": "https://stackoverflow.com/questions/36318960/instance-and-undefined-parameter-in-python/36319006#36319006", "title": "Instance and undefined parameter in python", "body": "<pre><code>self.instance = None\nself.__name = None\n</code></pre>\n\n<p>There are just object attributes with default value. You don't need to put them into <code>__init__()</code> parameters if they are not required for building class instance.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 6080013, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/95156ce2d636fcb86981973388e76523?s=128&d=identicon&r=PG&f=1", "display_name": "Anda Zhao", "link": "https://stackoverflow.com/users/6080013/anda-zhao"}, "edited": false, "score": 0, "creation_date": 1459370325, "post_id": 36319011, "comment_id": 60261791, "body": "Hi, can I consider the <code>def __init__(self)</code> as a constructor in Java, if so then how come it can do add operation in the constructor"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 51, "user_id": 6080013, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/95156ce2d636fcb86981973388e76523?s=128&d=identicon&r=PG&f=1", "display_name": "Anda Zhao", "link": "https://stackoverflow.com/users/6080013/anda-zhao"}, "edited": false, "score": 1, "creation_date": 1459372201, "post_id": 36319011, "comment_id": 60262883, "body": "@AndaZhao: Technically, <code>__init__</code> is an initializer; the raw object is created before it is called (that&#39;s how you receive <code>self</code>). Python has a <code>__new__</code> that constructs (and can initialize too), but it&#39;s typically only used for logically immutable objects (<code>__init__</code> can be called more than once, which would violate immutability) or cached/singleton objects (<code>__new__</code> can return an existing object, not just make new ones). But in any event, Python, unlike Java, doesn&#39;t define instance attribute names ahead of time in general; you can define any attribute, any time."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 3, "last_activity_date": 1459369491, "creation_date": 1459369491, "answer_id": 36319011, "question_id": 36318960, "link": "https://stackoverflow.com/questions/36318960/instance-and-undefined-parameter-in-python/36319011#36319011", "title": "Instance and undefined parameter in python", "body": "<p>The code has no context to say what <code>self.instance</code> might be. As for <code>self.__name</code>, the <code>property</code> definition makes clear that it is lazily assigning sequential names to instances. It sets <code>__name</code> to <code>None</code> so it knows it hasn't been initialized; when <code>self.name</code> is accessed, it will recognize the placeholder, replace it with a new value, and return the new value.</p>\n\n<p>Note that providing some assignment to all instance attributes in <code>__init__</code> is considered good form in Python, since otherwise it can be very hard to figure out what attributes an instance might have. And in modern Python (3.3 and up), doing so gets you a memory savings; as long as all attributes are initialized in <code>__init__</code> and no new attributes are added after <code>__init__</code>, the <code>__dict__</code> for all instances is a <a href=\"https://docs.python.org/3/whatsnew/3.3.html#pep-412-key-sharing-dictionary\" rel=\"nofollow\">key-sharing dictionary</a> which reduces the cost of each instance significantly (by roughly two-thirds, though that's an implementation detail). So if some other method/property would set <code>instance</code> later, it's best to initialize it to something in <code>__init__</code> both for maintainers to know what it's supposed to have, and reduced memory consumption in Py3.3+.</p>\n"}], "owner": {"reputation": 51, "user_id": 6080013, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/95156ce2d636fcb86981973388e76523?s=128&d=identicon&r=PG&f=1", "display_name": "Anda Zhao", "link": "https://stackoverflow.com/users/6080013/anda-zhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1459370165, "creation_date": 1459369302, "last_edit_date": 1459370165, "question_id": 36318960, "link": "https://stackoverflow.com/questions/36318960/instance-and-undefined-parameter-in-python", "title": "Instance and undefined parameter in python", "body": "<p>I'm not very familiar with Python, so when I met this code, there are a few things not quite clear to me. Here is the code:</p>\n\n<pre><code>class TypeVariable(object):\n    #A type variable standing for an arbitrary type.\n    #All type variables have a unique id, but names are only assigned lazily, \n    #when required.\n\n    next_variable_id = 0\n\n    def __init__(self):\n        self.id = TypeVariable.next_variable_id\n        TypeVariable.next_variable_id += 1\n        self.instance = None\n        self.__name = None\n\n    next_variable_name = 'a'\n\n    @property\n    def name(self):\n        #Names are allocated to TypeVariables lazily, so that only TypeVariables present\n        if self.__name is None:\n            self.__name = TypeVariable.next_variable_name\n            TypeVariable.next_variable_name = chr(ord(TypeVariable.next_variable_name) + 1)\n        return self.__name\n</code></pre>\n\n<p>Why does <code>def __init__(self):</code> not have <code>name</code> as a parameter but in the above code there is <code>self.__name = None</code>?</p>\n\n<p>Also, what does <code>self.instance</code> mean, because I don't recall that there is an attribute called instance.</p>\n\n<p>Can someone please help me understand what this code does, and if a java version can be provided will be much appreciated since I'm more familiar with Java. Thanks</p>\n"}, {"tags": ["python", "file-upload", "selenium-webdriver"], "comments": [{"owner": {"reputation": 13000, "user_id": 3190347, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Fsjd6.jpg?s=128&g=1", "display_name": "Shubham Jain", "link": "https://stackoverflow.com/users/3190347/shubham-jain"}, "edited": false, "score": 0, "creation_date": 1459398216, "post_id": 36318900, "comment_id": 60271034, "body": "check if there is any frame present on your page ... if it is then you need to switch it over first"}, {"owner": {"reputation": 11, "user_id": 6135878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1197dc9c3bb54e263331601c1aad5e4?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/6135878/tom"}, "reply_to_user": {"reputation": 13000, "user_id": 3190347, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Fsjd6.jpg?s=128&g=1", "display_name": "Shubham Jain", "link": "https://stackoverflow.com/users/3190347/shubham-jain"}, "edited": false, "score": 0, "creation_date": 1459451088, "post_id": 36318900, "comment_id": 60305168, "body": "There is one frame and I switched to it and no luck.  All the elements in the form I cannot reach via xpath.  I am wondering if I&#39;m doing something wrong with the form?"}, {"owner": {"reputation": 11, "user_id": 6135878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1197dc9c3bb54e263331601c1aad5e4?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/6135878/tom"}, "reply_to_user": {"reputation": 13000, "user_id": 3190347, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Fsjd6.jpg?s=128&g=1", "display_name": "Shubham Jain", "link": "https://stackoverflow.com/users/3190347/shubham-jain"}, "edited": false, "score": 0, "creation_date": 1459542188, "post_id": 36318900, "comment_id": 60349688, "body": "@shubham Jain I think I am getting closer to my answer.  The elements I need I think are <code>innerHTML</code> of the form itself.  My guess is that I have to execute a java script to access the <code>input type=&quot;file&quot;</code> element I need.  I&#39;m not sure how to find the exact script to do that though?"}], "owner": {"reputation": 11, "user_id": 6135878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1197dc9c3bb54e263331601c1aad5e4?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/6135878/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1459369824, "creation_date": 1459369053, "last_edit_date": 1459369824, "question_id": 36318900, "link": "https://stackoverflow.com/questions/36318900/selenium-webdriver-failing-to-find-element-while-trying-to-upload-file", "title": "Selenium Webdriver failing to find element while trying to upload file", "body": "<p>I'm trying to upload a file on a webpage using Selenium web driver. I'm trying to just send keys to an <code>input type='file'</code> element but the script keeps erring out with the following:</p>\n\n<pre><code>raise exception_class(message, screen, stacktrace)\nselenium.common.exceptions.NoSuchElementException: Message: no such element: Unable to locate element: {\"method\":\"xpath\",\"selector\":\"//input[@type='file']\"}\n</code></pre>\n\n<p>Attached is a snapshot of the html page.  I can Xpath right up to the Form element but anything below that fails to be found.  I've tried this with a couple browsers and have increase the wait time for the page to load.  Still same error.  There is a frame reference lower in the html code that I\"ve tried to switch to as well but no luck there either.  I'm wondering if the fact that the line below the form line is a <code>.js</code> for a drop down is somehow obscuring things? Or that the element is hidden and I can't get to it.</p>\n\n<p>I need to get the input <code>type='file'</code> line several lines below the form line.  I've read quite a few of the posts on similar issues here and most seem to point to increasing time which I've already done. I'm not sure how to find out what parent element is causing the hidden attribute or how to make it visible so I can send keys to the file element. Any help is appreciated.</p>\n\n<p><a href=\"http://i.stack.imgur.com/MuaC2.png\" rel=\"nofollow\">HTML</a></p>\n"}, {"tags": ["python", "django", "django-models", "report"], "answers": [{"comments": [{"owner": {"reputation": 372, "user_id": 1684239, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2a3d62d0af2337a0e5778af808926eb5?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/1684239/craig"}, "edited": false, "score": 0, "creation_date": 1459370461, "post_id": 36319112, "comment_id": 60261882, "body": "So in that example, would each report be a standalone class?"}, {"owner": {"reputation": 1211, "user_id": 4783965, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ezsWKyHTPew/AAAAAAAAAAI/AAAAAAAADbE/nZ1PyKNEoWc/photo.jpg?sz=128", "display_name": "Ritave", "link": "https://stackoverflow.com/users/4783965/ritave"}, "reply_to_user": {"reputation": 372, "user_id": 1684239, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2a3d62d0af2337a0e5778af808926eb5?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/1684239/craig"}, "edited": false, "score": 0, "creation_date": 1459370593, "post_id": 36319112, "comment_id": 60261963, "body": "@Craig Yes, a small one, but it would allow you a lot more flexibillity in the future in case you would want to add a report description or anything additional"}], "tags": [], "owner": {"reputation": 1211, "user_id": 4783965, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ezsWKyHTPew/AAAAAAAAAAI/AAAAAAAADbE/nZ1PyKNEoWc/photo.jpg?sz=128", "display_name": "Ritave", "link": "https://stackoverflow.com/users/4783965/ritave"}, "is_accepted": true, "score": 1, "last_activity_date": 1459370436, "last_edit_date": 1495542692, "creation_date": 1459369824, "answer_id": 36319112, "question_id": 36318894, "link": "https://stackoverflow.com/questions/36318894/where-to-start-with-custom-reporting-python-django/36319112#36319112", "title": "Where to Start with Custom Reporting Python/Django", "body": "<p>What I would do is expand on your <code>dir(reports)</code> idea and create a dynamically loaded module system. Have a folder with .py files containing module classes. <a href=\"https://stackoverflow.com/questions/547829/how-to-dynamically-load-a-python-class\">Here's an example of how you can dynamically load classes in Python</a>.</p>\n\n<p>Each class would have a static function called <code>getReportName()</code> so you could show something readable to the user, and a member function <code>createReport(self, myModel)</code> which gets the model and does it's magic on it.</p>\n\n<p>And then just show all the possible reports to the user, user selects one and you run the <code>createReport</code> on the selected class.</p>\n\n<p>In the future you might think about having different report folders for different models, and this too should be possible by reflection using model's <code>__name__</code> attribute.</p>\n"}], "owner": {"reputation": 372, "user_id": 1684239, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2a3d62d0af2337a0e5778af808926eb5?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/1684239/craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 979, "favorite_count": 0, "accepted_answer_id": 36319112, "answer_count": 1, "score": 2, "last_activity_date": 1459370436, "creation_date": 1459369020, "question_id": 36318894, "link": "https://stackoverflow.com/questions/36318894/where-to-start-with-custom-reporting-python-django", "title": "Where to Start with Custom Reporting Python/Django", "body": "<p>I'm trying to find a way to build a robust report library that I can use with a Django project. </p>\n\n<p>Essentially, what I'm looking for is a way to access a list of functions(reports) that I can allow an end-user to attach to a Django model. </p>\n\n<p>For example, let's say I have an Employee object. Well, I have a module called  reports.py that has a growing list of possible reports that take an employee object and output a report, usually in JSON form. There might be number of timecards submitted, number of supervisions created, etc. </p>\n\n<p>I want to be able to link those changing report lists to the Employee object via a FK called (job description), so admins can create custom reports per job description. </p>\n\n<p>What I've tried:</p>\n\n<ul>\n<li><p>Direct model methods: good for some things, but it requires a programmer to call them in a template or via API to generate some output. Since the available reports are changing, I don't want to hard-code anything and would rather allow the end-user to choose from a list of available reports and attach them to a related model (say a JobDescription). </p></li>\n<li><p>dir(reports): I could offer up a form where the select values are the results from dir(reports), but then I'd get the names of variables/libraries called in the file, not just a list of available reports</p></li>\n</ul>\n\n<p>Am I missing something? Is there a way to create a custom class from which I can call all methods available? Where would I even start with that type of architecture?</p>\n\n<p>I really appreciate any sort of input re: the path to take. Really just a 'look in this direction' response would be really appreciated.</p>\n"}, {"tags": ["python", "curl", "parameters", "pycurl"], "comments": [{"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1459371880, "post_id": 36318889, "comment_id": 60262709, "body": "Have you tried looking through the documentation linked from the <a href=\"http://pycurl.io/\" rel=\"nofollow noreferrer\">pycurl</a> page?  What was unclear?  There are even code examples."}, {"owner": {"reputation": 61, "user_id": 5959568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a17b72dce59c8af5010b0b14413059?s=128&d=identicon&r=PG&f=1", "display_name": "NosIreland", "link": "https://stackoverflow.com/users/5959568/nosireland"}, "reply_to_user": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1459375481, "post_id": 36318889, "comment_id": 60264455, "body": "I have looked at docs and was able to work out everything else but cannot figure out params. I have not used curl or pycurl before so it is all new to me and any pointers would be very helpful."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1459378122, "post_id": 36318889, "comment_id": 60265456, "body": "Show us what you have worked out. That will at least give us a place to start in our explanations."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 5959568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a17b72dce59c8af5010b0b14413059?s=128&d=identicon&r=PG&f=1", "display_name": "NosIreland", "link": "https://stackoverflow.com/users/5959568/nosireland"}, "is_accepted": false, "score": -1, "last_activity_date": 1459430338, "last_edit_date": 1459430338, "creation_date": 1459426472, "answer_id": 36333194, "question_id": 36318889, "link": "https://stackoverflow.com/questions/36318889/using-parameters-with-pycurl/36333194#36333194", "title": "Using parameters with pycurl", "body": "<p>Got it running with <code>requests</code> which is a simpler and exactly what I needed.</p>\n\n<pre><code>cookie = {\n    'JSESSIONID': '6CCB148AEE7318BD08EFC869E0FD33AB',\n    'user': 'testuser',\n    'wmUserPrincipal': '%7B%22username%22%3A%22testuser%22%2C%22roles%22%3A%5B%5D%7D',\n    'mf_user': '322383eec941db6c72f3f2c7d58b7a80',\n}\n\nhead = {\n    'Content-Type': 'application/json-rpc',\n    'Accept': '*/*',\n    'X-Requested-With': 'XMLHttpRequest',\n    'Connection': 'keep-alive',\n}\n\ndata = '{\"params\":[\"1.2.1\",\"instance7\",\"1.2\",4,{}],\"method\":\"getMatrix\",\"id\":250}'\n\nrequests.post('https://mytest.com/mdb.json', headers=head, cookies=cookie, data=data)\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5959568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a17b72dce59c8af5010b0b14413059?s=128&d=identicon&r=PG&f=1", "display_name": "NosIreland", "link": "https://stackoverflow.com/users/5959568/nosireland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 351, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1459430338, "creation_date": 1459369002, "last_edit_date": 1459369248, "question_id": 36318889, "link": "https://stackoverflow.com/questions/36318889/using-parameters-with-pycurl", "title": "Using parameters with pycurl", "body": "<p>I'm trying to use <code>pycurl</code> for the first time and I'm not sure how to use parameters with it.</p>\n\n<pre><code>curl \"https://mytest.com/mdb.json\" \n-H \"Cookie: JSESSIONID=6CCB148AEE7318BD08EFC869E0FD33AB; user=testuser; wmUserPrincipal=\"%\"7B\"%\"22username\"%\"22\"%\"3A\"%\"22testuser\"%\"22\"%\"2C\"%\"22roles\"%\"22\"%\"3A\"%\"5B\"%\"5D\"%\"7D; mf_user=322383eec941db6c72f3f2c7d58b7a80\" \n-H \"Content-Type: application/json-rpc\" \n-H \"Accept: */*\" \n-H \"X-Requested-With: XMLHttpRequest\" \n-H \"Connection: keep-alive\" --data-binary \"{\"\"params\"\":[\"\"1.2.1\"\",\"\"instance7\"\",\"\"1.2\"\",4,{}],\"\"method\"\":\"\"getMatrix\"\",\"\"id\"\":250}\" --compressed\n</code></pre>\n\n<p>As seen in the curl I have:</p>\n\n<pre><code>--data-binary \"{\"\"params\"\":[\"\"1.2.1\"\",\"\"instance7\"\",\"\"1.2\"\",4,{}],\"\"method\"\":\"\"getMatrix\"\",\"\"id\"\":250}\" --compressed\n</code></pre>\n\n<p>and I cannot figure out what to do with them in <code>pycurl</code>. Maybe it is not even possible or maybe there is a simpler solution than using <code>pycurl</code>.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "ipython", "virtualbox", "vmware", "jupyter"], "comments": [{"owner": {"reputation": 2716, "user_id": 1033510, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/ygFT2.jpg?s=128&g=1", "display_name": "Mojtaba Kamyabi", "link": "https://stackoverflow.com/users/1033510/mojtaba-kamyabi"}, "edited": false, "score": 0, "creation_date": 1459369919, "post_id": 36318862, "comment_id": 60261575, "body": "what do you want to do exactly with ssh in python ? can you show us some code ?"}, {"owner": {"reputation": 1879, "user_id": 1695866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d44a90f9a75078775b62fdc03a361c5?s=128&d=identicon&r=PG", "display_name": "svohara", "link": "https://stackoverflow.com/users/1695866/svohara"}, "edited": false, "score": 0, "creation_date": 1459387073, "post_id": 36318862, "comment_id": 60268141, "body": "I don&#39;t think port forwarding has anything to do with it. Can you determine the IP address of the VM? Can you <code>ping</code> that address from the host operating system? If so, it&#39;s probably just a jupyter config issue. See my answer for a relevant link."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 2716, "user_id": 1033510, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/ygFT2.jpg?s=128&g=1", "display_name": "Mojtaba Kamyabi", "link": "https://stackoverflow.com/users/1033510/mojtaba-kamyabi"}, "edited": false, "score": 0, "creation_date": 1459387144, "post_id": 36318862, "comment_id": 60268155, "body": "@shotgunner SSH forwarding is this process of forwarding connections to a port through SSH. The question isn&#39;t trying to do SSH in python."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1459387537, "post_id": 36318862, "comment_id": 60268253, "body": "There&#39;s several blogs for getting setup in Windows (i assume that&#39;s why you need a VM). For example, <a href=\"https://medium.com/@Rapchik/running-google-s-deep-learning-course-material-under-windows-82d468b6d5be#.7umqm7nzb\" rel=\"nofollow noreferrer\">medium.com/@Rapchik/&hellip;</a> and <a href=\"http://data-shaker.com/docker-tensorflow-with-jupyter-notebook-on-windows/\" rel=\"nofollow noreferrer\">data-shaker.com/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 6136636, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209046000928005/picture?type=large", "display_name": "Nordeen Sij", "link": "https://stackoverflow.com/users/6136636/nordeen-sij"}, "edited": false, "score": 0, "creation_date": 1459425965, "post_id": 36318862, "comment_id": 60287858, "body": "Thanks for the response, Yes I pinged the ip addresses of the VM and packets sent and received OK. Any more ideas? Also I tried both NAT and bridged network connection, none works."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6136636, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209046000928005/picture?type=large", "display_name": "Nordeen Sij", "link": "https://stackoverflow.com/users/6136636/nordeen-sij"}, "edited": false, "score": 0, "creation_date": 1459425922, "post_id": 36322473, "comment_id": 60287828, "body": "Thanks for the response, I followed that too exactly, I know everything I did there works because when accessing ipython from inside the vm, it now asks for a password and I have to add &#39;https&#39; to localhost, both because I amended the ssl section as well as the password section of ipython&#39;s config file. I&#39;m completely at a loss, the reason I need the VM is to access tensorflow inside ipython from the host PC. Sad thing is I have many times used Azure vm to host without a problem and the difference I can think of is port forwarding."}, {"owner": {"reputation": 11, "user_id": 6136636, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209046000928005/picture?type=large", "display_name": "Nordeen Sij", "link": "https://stackoverflow.com/users/6136636/nordeen-sij"}, "edited": false, "score": 0, "creation_date": 1459426484, "post_id": 36322473, "comment_id": 60288248, "body": "Thank you so much guys, it is solved. After posting my last message about the only thing different being port forwarding, I decided to follow that though and that was all was needed, there&#39;s a port forwarding section in the NAT settings in virtualbox. No such thing in VMware player though sadly"}, {"owner": {"reputation": 543, "user_id": 7980206, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6fa8c1fd7d2f6b21cf36c56af36a6af0?s=128&d=identicon&r=PG&f=1", "display_name": "ggupta", "link": "https://stackoverflow.com/users/7980206/ggupta"}, "reply_to_user": {"reputation": 11, "user_id": 6136636, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209046000928005/picture?type=large", "display_name": "Nordeen Sij", "link": "https://stackoverflow.com/users/6136636/nordeen-sij"}, "edited": false, "score": 0, "creation_date": 1521657212, "post_id": 36322473, "comment_id": 85829817, "body": "@NordeenSij i&#39;m facing same problem, can u pl guide me?"}], "tags": [], "owner": {"reputation": 1879, "user_id": 1695866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d44a90f9a75078775b62fdc03a361c5?s=128&d=identicon&r=PG", "display_name": "svohara", "link": "https://stackoverflow.com/users/1695866/svohara"}, "is_accepted": false, "score": 2, "last_activity_date": 1459386946, "last_edit_date": 1459386946, "creation_date": 1459386468, "answer_id": 36322473, "question_id": 36318862, "link": "https://stackoverflow.com/questions/36318862/trying-to-access-ipython-notebook-running-on-virtual-machine/36322473#36322473", "title": "Trying to access ipython notebook running on virtual machine", "body": "<p>Generally you must edit the jupyter configuration file to allow network access to the notebook server. See this link: <a href=\"http://jupyter-notebook.readthedocs.org/en/latest/public_server.html\" rel=\"nofollow\">http://jupyter-notebook.readthedocs.org/en/latest/public_server.html</a> for details. (Even if it is not a \"public\" server, you still intend to access the notebook server living in the VM from the host machine via a network connection...)</p>\n\n<p>Here is a quotation from the linked documentation that indicates by default, you can only access the notebook via the localhost.</p>\n\n<blockquote>\n  <p>By default, a notebook server runs locally at 127.0.0.1:8888 and is accessible only from localhost. You may access the notebook server from the browser using <a href=\"http://127.0.0.1:8888\" rel=\"nofollow\">http://127.0.0.1:8888</a>.</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 6136636, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209046000928005/picture?type=large", "display_name": "Nordeen Sij", "link": "https://stackoverflow.com/users/6136636/nordeen-sij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5116, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1459386946, "creation_date": 1459368941, "question_id": 36318862, "link": "https://stackoverflow.com/questions/36318862/trying-to-access-ipython-notebook-running-on-virtual-machine", "title": "Trying to access ipython notebook running on virtual machine", "body": "<p>I would really appreciate some help here, basically I'm learning to use tensorflow, I've decided that the easiest way to go about this would be to install ubuntu on either VMware and/or Virtualbox and then access the ipython notebook (came with anaconda) through the browser on the host computer. </p>\n\n<p>I have successfully installed both vmware and virtualbox, I downloaded a ubuntu image and also successfully installed anaconda on both, I get it to work without a problem on both VMs and even installed tensorflow. </p>\n\n<p>Some research online on how to expose the ipython to the host machine suggested port forwarding or ssh tunneling, none of these have worked (very likely I'm doing it wrong). Can someone please help? think of me as a newbie.</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 3113, "user_id": 2680707, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/79be98ed1523535bc80895c45c5c6241?s=128&d=identicon&r=PG&f=1", "display_name": "Ricardo Cruz", "link": "https://stackoverflow.com/users/2680707/ricardo-cruz"}, "edited": false, "score": 1, "creation_date": 1459368940, "post_id": 36318806, "comment_id": 60261010, "body": "I am not sure I understood the question. Can you just not use <code>rand[1:5,1:5]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1642, "user_id": 3928184, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-opJFz3zFjGI/AAAAAAAAAAI/AAAAAAAAAr0/2zAUOWaRv90/photo.jpg?sz=128", "display_name": "bjd2385", "link": "https://stackoverflow.com/users/3928184/bjd2385"}, "edited": false, "score": 0, "creation_date": 1459369500, "post_id": 36318981, "comment_id": 60261337, "body": "No, this makes sense, but like I said, I can do the same - with a bunch of calculations and calling functions and whatnot. Is there a faster way?"}, {"owner": {"reputation": 945, "user_id": 4987866, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-x1wNjsrUZF4/AAAAAAAAAAI/AAAAAAAAABg/6wwtMoeK7wA/photo.jpg?sz=128", "display_name": "Jules", "link": "https://stackoverflow.com/users/4987866/jules"}, "reply_to_user": {"reputation": 1642, "user_id": 3928184, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-opJFz3zFjGI/AAAAAAAAAAI/AAAAAAAAAr0/2zAUOWaRv90/photo.jpg?sz=128", "display_name": "bjd2385", "link": "https://stackoverflow.com/users/3928184/bjd2385"}, "edited": false, "score": 0, "creation_date": 1459369968, "post_id": 36318981, "comment_id": 60261602, "body": "I think that any other way would in the background call the same code. You can keep this code tucked away, call it and forget about the surface implementation!"}, {"owner": {"reputation": 1642, "user_id": 3928184, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-opJFz3zFjGI/AAAAAAAAAAI/AAAAAAAAAr0/2zAUOWaRv90/photo.jpg?sz=128", "display_name": "bjd2385", "link": "https://stackoverflow.com/users/3928184/bjd2385"}, "edited": false, "score": 0, "creation_date": 1459370279, "post_id": 36318981, "comment_id": 60261767, "body": "I&#39;m only worried about time because this function will probably get called as many as ~10^3-10^4 times throughout the script, so we&#39;ll see"}, {"owner": {"reputation": 945, "user_id": 4987866, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-x1wNjsrUZF4/AAAAAAAAAAI/AAAAAAAAABg/6wwtMoeK7wA/photo.jpg?sz=128", "display_name": "Jules", "link": "https://stackoverflow.com/users/4987866/jules"}, "reply_to_user": {"reputation": 1642, "user_id": 3928184, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-opJFz3zFjGI/AAAAAAAAAAI/AAAAAAAAAr0/2zAUOWaRv90/photo.jpg?sz=128", "display_name": "bjd2385", "link": "https://stackoverflow.com/users/3928184/bjd2385"}, "edited": false, "score": 1, "creation_date": 1459370805, "post_id": 36318981, "comment_id": 60262085, "body": "Creating a random array of size 11x11 and running the code 10e5 times took 364 ms. Also the code is made in such a way to not get slower with array size so I think you should probably be fine!"}, {"owner": {"reputation": 3448, "user_id": 5530155, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/wtp3s.jpg?s=128&g=1", "display_name": "gariepy", "link": "https://stackoverflow.com/users/5530155/gariepy"}, "edited": false, "score": 1, "creation_date": 1459372381, "post_id": 36318981, "comment_id": 60262976, "body": "I agree with @JulesTamagnan, you won&#39;t have performance problems.  In modern computing 10^4 iterations of something this size is not much at all."}], "tags": [], "owner": {"reputation": 945, "user_id": 4987866, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-x1wNjsrUZF4/AAAAAAAAAAI/AAAAAAAAABg/6wwtMoeK7wA/photo.jpg?sz=128", "display_name": "Jules", "link": "https://stackoverflow.com/users/4987866/jules"}, "is_accepted": true, "score": 5, "last_activity_date": 1459369623, "last_edit_date": 1459369623, "creation_date": 1459369372, "answer_id": 36318981, "question_id": 36318806, "link": "https://stackoverflow.com/questions/36318806/fastest-way-to-access-middle-four-elements-in-numpy-array/36318981#36318981", "title": "Fastest way to access middle four elements in Numpy array?", "body": "<p>Is something like this too complicated?</p>\n\n<pre><code>def get_middle(arr):\n    n = arr.shape[0] / 2.0\n    n_int = int(n)\n    if n % 2 == 1:\n        return arr[[n_int], [n_int]]\n    else:\n        return arr[n_int:n_int + 2, n_int:n_int + 2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3448, "user_id": 5530155, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/wtp3s.jpg?s=128&g=1", "display_name": "gariepy", "link": "https://stackoverflow.com/users/5530155/gariepy"}, "is_accepted": false, "score": 3, "last_activity_date": 1459369730, "creation_date": 1459369730, "answer_id": 36319088, "question_id": 36318806, "link": "https://stackoverflow.com/questions/36318806/fastest-way-to-access-middle-four-elements-in-numpy-array/36319088#36319088", "title": "Fastest way to access middle four elements in Numpy array?", "body": "<p>You can do this with a single slicing operation:</p>\n\n<pre><code>rand = np.random.randn(n,n)\n# assuming n is even\ncenter = rand[n/2-1:n/2+1, n/2-1:n/2+1]\n</code></pre>\n\n<p>I'm abusing order of operations by leaving out the parens, just to make it a little less messy.</p>\n"}, {"tags": [], "owner": {"reputation": 1954, "user_id": 7037228, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-TL7cHjz4RSU/AAAAAAAAAAI/AAAAAAAABaY/-afjNzJ6hjM/photo.jpg?sz=128", "display_name": "Xiaoyu Lu", "link": "https://stackoverflow.com/users/7037228/xiaoyu-lu"}, "is_accepted": false, "score": 1, "last_activity_date": 1518229448, "creation_date": 1518229448, "answer_id": 48716624, "question_id": 36318806, "link": "https://stackoverflow.com/questions/36318806/fastest-way-to-access-middle-four-elements-in-numpy-array/48716624#48716624", "title": "Fastest way to access middle four elements in Numpy array?", "body": "<p>Given array a:</p>\n\n<blockquote>\n<pre><code>import numpy as np\na = np.array([[ 0.25659355, -0.75456113,  0.39467396,  0.50805361],\n[-0.77218172,  1.00016061, -0.70389486,  1.67632146],\n[-0.41106158, -0.63757421,  1.70390504, -0.79073362],\n[-0.2016959 ,  0.55316318, -1.55280823,  0.45740193]])\n</code></pre>\n  \n  <p>The easiest way to get the central 4 values is:</p>\n\n<pre><code>ax, ay = a.shape\na[int(ax/2)-1:int(ax/2)+1, int(ay/2)-1:int(ay/2)+1]\n</code></pre>\n</blockquote>\n\n<p>This works if you have even numbers for the dimensions of the array. In case of odd numbers, there won't be a central 4 values. </p>\n"}, {"comments": [{"owner": {"reputation": 1014, "user_id": 6691780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7MGR6.jpg?s=128&g=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/6691780/jonas"}, "edited": false, "score": 0, "creation_date": 1614012570, "post_id": 66318056, "comment_id": 117247999, "body": "I think you are right, but op explicitly asked for not using indices."}, {"owner": {"reputation": 1, "user_id": 14653412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d153e1e0ffa64c9871020f8739b64941?s=128&d=identicon&r=PG&f=1", "display_name": "Shoopastar", "link": "https://stackoverflow.com/users/14653412/shoopastar"}, "reply_to_user": {"reputation": 1014, "user_id": 6691780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7MGR6.jpg?s=128&g=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/6691780/jonas"}, "edited": false, "score": 1, "creation_date": 1614102009, "post_id": 66318056, "comment_id": 117280439, "body": "Ok, I understand now. Sorry, still new at this."}], "tags": [], "owner": {"reputation": 1, "user_id": 14653412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d153e1e0ffa64c9871020f8739b64941?s=128&d=identicon&r=PG&f=1", "display_name": "Shoopastar", "link": "https://stackoverflow.com/users/14653412/shoopastar"}, "is_accepted": false, "score": 0, "last_activity_date": 1614005662, "creation_date": 1614005662, "answer_id": 66318056, "question_id": 36318806, "link": "https://stackoverflow.com/questions/36318806/fastest-way-to-access-middle-four-elements-in-numpy-array/66318056#66318056", "title": "Fastest way to access middle four elements in Numpy array?", "body": "<p>Could you just use indexing? Like:</p>\n<pre><code>A = np.array([[ 0.25659355, -0.75456113,  0.39467396,  0.50805361],\n[-0.77218172,  1.00016061, -0.70389486,  1.67632146],\n[-0.41106158, -0.63757421,  1.70390504, -0.79073362],\n[-0.2016959 ,  0.55316318, -1.55280823,  0.45740193]])\n])\n\nA[1:3,1:3]\n</code></pre>\n<p>Or if matrix A had odd dimensions, say 5x5 then:</p>\n<pre><code>A[2,2]\n</code></pre>\n"}], "owner": {"reputation": 1642, "user_id": 3928184, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-opJFz3zFjGI/AAAAAAAAAAI/AAAAAAAAAr0/2zAUOWaRv90/photo.jpg?sz=128", "display_name": "bjd2385", "link": "https://stackoverflow.com/users/3928184/bjd2385"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2154, "favorite_count": 0, "accepted_answer_id": 36318981, "answer_count": 4, "score": 2, "last_activity_date": 1614005662, "creation_date": 1459368765, "last_edit_date": 1459369219, "question_id": 36318806, "link": "https://stackoverflow.com/questions/36318806/fastest-way-to-access-middle-four-elements-in-numpy-array", "title": "Fastest way to access middle four elements in Numpy array?", "body": "<p>Suppose I have a Numpy array, such as</p>\n\n<pre><code>rand = np.random.randn(6, 6)\n</code></pre>\n\n<p>I need the central four values in the array, since it has axes of even length. If it had been odd, such as 5 by 5, then there would only be one central value. What is the simplest/fastest/easiest way of retrieving these four entries? I can obtain them very crudely with indices, but I'm looking for a faster way than calling a bunch of functions and performing a bunch of calculations.</p>\n\n<p>For example, consider the following:</p>\n\n<pre><code>array([[ 0.25659355, -0.75456113,  0.39467396,  0.50805361],\n       [-0.77218172,  1.00016061, -0.70389486,  1.67632146],\n       [-0.41106158, -0.63757421,  1.70390504, -0.79073362],\n       [-0.2016959 ,  0.55316318, -1.55280823,  0.45740193]])\n</code></pre>\n\n<p>I want the following:</p>\n\n<pre><code>array([[1.00016061, -0.70389486],\n       [-0.63757421,  1.70390504]])\n</code></pre>\n\n<p>But not just for a 4 by 4 array - if it is even by even, I want the central four elements, as above.</p>\n"}, {"tags": ["python", "python-2.7", "abstract-syntax-tree"], "comments": [{"owner": {"reputation": 991, "user_id": 3248481, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1218205107/picture?type=large", "display_name": "akshitBhatia", "link": "https://stackoverflow.com/users/3248481/akshitbhatia"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1459369167, "post_id": 36318788, "comment_id": 60261139, "body": "i did not know the term unpacking. thank you."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1459369401, "post_id": 36318788, "comment_id": 60261281, "body": "Yeah it can sometimes be hard to find the relevant information, if you lack the terminology. There&#39;s more about this in python docs: <a href=\"https://docs.python.org/3/tutorial/controlflow.html#unpacking-argument-lists\" rel=\"nofollow noreferrer\">docs.python.org/3/tutorial/&hellip;</a> . I recommend reading that whole page :)"}], "answers": [{"tags": [], "owner": {"reputation": 40039, "user_id": 699224, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4feb08afcd7c57acb72bd49fc2bf834d?s=128&d=identicon&r=PG", "display_name": "DNA", "link": "https://stackoverflow.com/users/699224/dna"}, "is_accepted": false, "score": 1, "last_activity_date": 1459368912, "creation_date": 1459368912, "answer_id": 36318848, "question_id": 36318788, "link": "https://stackoverflow.com/questions/36318788/how-to-call-a-function-that-takes-multiple-arguments-with-a-list-of-arguments/36318848#36318848", "title": "How to call a function that takes multiple arguments with a list of arguments", "body": "<p>You can do this as follows, by unpacking the list with <code>*</code></p>\n\n<pre><code>&gt;&gt;&gt; def abc(a,b,c): print(a,b,c)\n...\n&gt;&gt;&gt; abc(1,2,3)\n1 2 3\n&gt;&gt;&gt; abc(*[1,2,3])\n1 2 3\n</code></pre>\n"}], "owner": {"reputation": 991, "user_id": 3248481, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1218205107/picture?type=large", "display_name": "akshitBhatia", "link": "https://stackoverflow.com/users/3248481/akshitbhatia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "closed_date": 1459369447, "answer_count": 1, "score": 0, "last_activity_date": 1459370086, "creation_date": 1459368732, "last_edit_date": 1459370086, "question_id": 36318788, "link": "https://stackoverflow.com/questions/36318788/how-to-call-a-function-that-takes-multiple-arguments-with-a-list-of-arguments", "closed_reason": "Duplicate", "title": "How to call a function that takes multiple arguments with a list of arguments", "body": "<p>I have a function which is </p>\n\n<pre><code>def abc(a,b,c):\n    #do something\n    pass\n</code></pre>\n\n<p>I would like to call this with a list instead of <code>abc(a,b,c)</code>, e.g.:</p>\n\n<pre><code>abc([1,2,3])\n</code></pre>\n\n<p>I cannot change the definition of <code>abc</code>.</p>\n\n<p>Use case:</p>\n\n<p>I am trying to write my own eval using the <code>ast</code> library</p>\n\n<p>While implementing the <code>ast.Call</code>, I would like to be able to call my functions with multiple arguments.</p>\n\n<p>However, if node is of type <code>ast.Call</code>, the arguments are passed in the form of a list. </p>\n\n<p>E.g.:</p>\n\n<pre><code>&gt;&gt; exp = ast.parse('abc(1,2)', mode='eval').body\n&gt;&gt; exp\n# &lt;_ast.Call at 0x2ab3c5bef7d0&gt;\n&gt;&gt; exp.args\n#[&lt;_ast.Num at 0x2ab3c5bef850&gt;, &lt;_ast.Num at 0x2ab3c5bef890&gt;]\n</code></pre>\n\n<p>The problem is, I cannot understand how to call a function whose name is <code>abc</code> when the args returned to me is a list.</p>\n\n<p>I would be trying to call library functions like <code>min</code>, <code>max</code>, <code>len</code>, <code>str</code> and my own functions like <code>contains</code>, <code>get_item</code> etc. What I can't understand is, how do I pass a list of arguments to a function that takes multiple arguments?</p>\n"}, {"tags": ["python", "bash", "subprocess"], "comments": [{"owner": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "edited": false, "score": 1, "creation_date": 1459368804, "post_id": 36318777, "comment_id": 60260931, "body": "I think you&#39;re seeing the shell&#39;s return code, not that of <code>ls</code>."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1459369230, "post_id": 36318777, "comment_id": 60261180, "body": "Is the return value of <code>p.wait()</code> also incorrect?"}, {"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "edited": false, "score": 0, "creation_date": 1459372565, "post_id": 36318777, "comment_id": 60263071, "body": "Keep in mind that it&#39;s not recommended to use <code>shell=True</code>. Especially with untrusted user input."}], "answers": [{"comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 3, "creation_date": 1459369204, "post_id": 36318892, "comment_id": 60261160, "body": "You can&#39;t avoid the shell if you need <code>&amp;&gt;&#47;dev&#47;null</code> though. Also the exit code of the shell should be the exit code of the last command that was run."}], "tags": [], "owner": {"reputation": 4037, "user_id": 3990145, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3d95b7ec21ccd7bf3c8e1604d49faca1?s=128&d=identicon&r=PG&f=1", "display_name": "xi&#186;", "link": "https://stackoverflow.com/users/3990145/xi%c2%ba"}, "is_accepted": false, "score": -1, "last_activity_date": 1459369261, "last_edit_date": 1459369261, "creation_date": 1459369016, "answer_id": 36318892, "question_id": 36318777, "link": "https://stackoverflow.com/questions/36318777/subprocess-return-code-different-than-echo/36318892#36318892", "title": "Subprocess return code different than &quot;echo $?&quot;", "body": "<p>You are using it as <code>subprocess.Popen(cmd, shell=True)</code>, with <code>cmd</code> as string.</p>\n\n<p>That means that subprocess will call under the hood <code>/bin/sh</code> with arguments. So you are getting back exit code of your <code>shell</code>.</p>\n\n<p>If you need actually exit code of your command, split it into list and use <code>shell=False</code>.</p>\n\n<p><code>subprocess.Popen(['cmd', 'arg1'], shell=False)</code></p>\n"}, {"comments": [{"owner": {"reputation": 316, "user_id": 3685847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a657e236f6e674a1bd3e3b1125cc3fa6?s=128&d=identicon&r=PG&f=1", "display_name": "Evelyn Kokemoor", "link": "https://stackoverflow.com/users/3685847/evelyn-kokemoor"}, "edited": false, "score": 2, "creation_date": 1459371540, "post_id": 36319141, "comment_id": 60262526, "body": "We&#39;re using bash as a shell, but python uses <code>sh</code> which interprets <code>&amp;&gt;</code> differently from bash."}], "tags": [], "owner": {"reputation": 2465, "user_id": 2308300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zs5xn.jpg?s=128&g=1", "display_name": "Locane", "link": "https://stackoverflow.com/users/2308300/locane"}, "is_accepted": false, "score": 0, "last_activity_date": 1459369938, "creation_date": 1459369938, "answer_id": 36319141, "question_id": 36318777, "link": "https://stackoverflow.com/questions/36318777/subprocess-return-code-different-than-echo/36319141#36319141", "title": "Subprocess return code different than &quot;echo $?&quot;", "body": "<p>Following the suggestion by xi_, I split the command up in to space delineated fields, and it failed to run with \"&amp;>\" and \"/dev/null\".  I removed them, and it worked.</p>\n\n<p>Then I put the command all back together to test it without \"&amp;> /dev/null\", and that worked too.  It appears that the addition of \"&amp;> /dev/null\" throws subprocess off, somehow.</p>\n\n<pre><code>Welcome to Dana version 0.7\nNow there is Dana AND ZOL\n\nreceived command 'cat /etc/fstab'\np.wait() is 0\np.returncode is '0'\n\nreceived command 'cat /etc/fstabb'\np.wait() is 1\np.returncode is '1'\n\nreceived command 'cat /etc/fstab &amp;&gt; /dev/null'\np.wait() is 0\np.returncode is '0'\n\nreceived command 'cat /etc/fstabb &amp;&gt; /dev/null'\np.wait() is 0\np.returncode is '0'\nroot@Ubuntu-14:~# cat /etc/fstab &amp;&gt; /dev/null\nroot@Ubuntu-14:~# echo $?\n0\nroot@Ubuntu-14:~# cat /etc/fstabb &amp;&gt; /dev/null\nroot@Ubuntu-14:~# echo $?\n1\nroot@Ubuntu-14:~#\n</code></pre>\n\n<p>I originally added the \"&amp;> /dev/null\" to the call because I was seeing output on the screen from STDERR.  Once I added stderr=PIPE to the subprocess call, that went away.  I was just trying to silently check the code on the output behind the scenes.</p>\n\n<p>If someone can explain why adding \"&amp;> /dev/null\" to a subprocess call in Python causes it to behave unexpectedly, I'd be happy to select that as the answer!</p>\n"}, {"tags": [], "owner": {"reputation": 316, "user_id": 3685847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a657e236f6e674a1bd3e3b1125cc3fa6?s=128&d=identicon&r=PG&f=1", "display_name": "Evelyn Kokemoor", "link": "https://stackoverflow.com/users/3685847/evelyn-kokemoor"}, "is_accepted": true, "score": 3, "last_activity_date": 1459370701, "creation_date": 1459370701, "answer_id": 36319348, "question_id": 36318777, "link": "https://stackoverflow.com/questions/36318777/subprocess-return-code-different-than-echo/36319348#36319348", "title": "Subprocess return code different than &quot;echo $?&quot;", "body": "<p>According to <a href=\"https://docs.python.org/2/library/subprocess.html#subprocess.Popen\" rel=\"nofollow\"><code>subprocess.Popen</code></a>, the shell used in your Python script is <code>sh</code>. This shell is the POSIX standard, as opposed to Bash, which has several nonstandard features such as the shorthand redirection <code>&amp;&gt; /dev/null</code>. <code>sh</code>, the Bourne shell, interprets this symbol as \"run me in the background, and redirect stdout to /dev/null\".</p>\n\n<p>Since your <code>subprocess.Popen</code> opens a <code>sh</code> which runs <code>ls</code> in its own background, the return value of <code>sh</code> is used instead of <code>ls</code>, which in this case is 0.</p>\n\n<p>If you want Bash behavior with your Python, I believe you may have to reconfigure (possibly recompile) Python itself. It's simpler to just use the <code>sh</code> syntax, which is <code>ls /dev/dsk 2&gt; /dev/null</code>.</p>\n"}], "owner": {"reputation": 2465, "user_id": 2308300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zs5xn.jpg?s=128&g=1", "display_name": "Locane", "link": "https://stackoverflow.com/users/2308300/locane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "accepted_answer_id": 36319348, "answer_count": 3, "score": 4, "last_activity_date": 1459370701, "creation_date": 1459368706, "question_id": 36318777, "link": "https://stackoverflow.com/questions/36318777/subprocess-return-code-different-than-echo", "title": "Subprocess return code different than &quot;echo $?&quot;", "body": "<p>I'm using subprocess to call a bash command in Python, and I'm getting a different return code than what the shell shows me.</p>\n\n<pre><code>import subprocess\ndef check_code(cmd):\n    print \"received command '%s'\" % (cmd)\n    p = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)\n    p.wait()\n    print \"p.returncode is '%d'\" % (p.returncode)\n    exit()\n    if p.returncode == 0:\n        return True\n    else:\n        return False\n    #End if there was a return code at all\n#End get_code()\n</code></pre>\n\n<p>When sent \"ls /dev/dsk &amp;> /dev/null\", check_code returns 0, but \"echo $?\" produces \"2\" in the terminal:</p>\n\n<pre><code>Welcome to Dana version 0.7\nNow there is Dana AND ZOL\n\nreceived command 'ls /dev/dsk &amp;&gt; /dev/null'\np.returncode is '0'\nroot@Ubuntu-14:~# ls /dev/dsk &amp;&gt; /dev/null\nroot@Ubuntu-14:~# echo $?\n2\nroot@Ubuntu-14:~#\n</code></pre>\n\n<p>Does anyone know what's going on here?</p>\n"}, {"tags": ["python", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 6136625, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/982687701799731/picture?type=large", "display_name": "Alex Mcbatman", "link": "https://stackoverflow.com/users/6136625/alex-mcbatman"}, "edited": false, "score": 0, "creation_date": 1459373227, "post_id": 36318774, "comment_id": 60263408, "body": "how could i do this for multiple sites as in in one script."}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 37, "user_id": 6136625, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/982687701799731/picture?type=large", "display_name": "Alex Mcbatman", "link": "https://stackoverflow.com/users/6136625/alex-mcbatman"}, "edited": false, "score": 0, "creation_date": 1459378811, "post_id": 36318774, "comment_id": 60265706, "body": "@AlexMcbatman well, the base_url would be the site you are navigating to - <code>&quot;http:&#47;&#47;website.co.uk&quot;</code> in this case..see if it makes sense to create a separate question if you experience difficulties. Thanks."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 0, "last_activity_date": 1459368700, "creation_date": 1459368700, "answer_id": 36318774, "question_id": 36318760, "link": "https://stackoverflow.com/questions/36318760/beautifulsoup-web-scraping/36318774#36318774", "title": "BeautifulSoup web scraping", "body": "<p>Use <a href=\"https://docs.python.org/2/library/urlparse.html#urlparse.urljoin\" rel=\"nofollow\"><code>urlparse.urljoin()</code></a>:</p>\n\n<pre><code>from urlparse import urljoin\n\nbase_url = \"http://website.co.uk\"\nfor link in soup.find_all('a', href=re.compile('sports')): \n    print urljoin(base_url, link['href'])\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6136625, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/982687701799731/picture?type=large", "display_name": "Alex Mcbatman", "link": "https://stackoverflow.com/users/6136625/alex-mcbatman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 36318774, "answer_count": 1, "score": 1, "last_activity_date": 1459368703, "creation_date": 1459368643, "last_edit_date": 1459368703, "question_id": 36318760, "link": "https://stackoverflow.com/questions/36318760/beautifulsoup-web-scraping", "title": "BeautifulSoup web scraping", "body": "<p>I'm using BeautifulSoup to scrape a website. When it returns the link it comes in as <code>/watch/411012/1/test.html</code> - how can I make it so it will return <a href=\"http://website.co.uk/watch/411012/1/test.html\" rel=\"nofollow\">http://website.co.uk/watch/411012/1/test.html</a> ?</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport urllib2\nimport re\n\nresp = urllib2.urlopen(\"http://website.co.uk\") #add more sites\nsoup = BeautifulSoup(resp, from_encoding=resp.info().getparam('charset'))\n\nfor link in soup.find_all('a', href=re.compile('sports')): \n    print link['href']\n</code></pre>\n"}, {"tags": ["python", "matrix", "networkx", "dimensionality-reduction"], "comments": [{"owner": {"reputation": 165, "user_id": 5638621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f67581fdd01afcdb5d9a1a83fe2c617?s=128&d=identicon&r=PG&f=1", "display_name": "HugoLasticot", "link": "https://stackoverflow.com/users/5638621/hugolasticot"}, "edited": false, "score": 0, "creation_date": 1461665030, "post_id": 36318742, "comment_id": 61290635, "body": "Hi, Did you find an answer to your question ? I am stuck with the same problem... Even if I change my matrix, the T-SNE vizualisation doesn&#39;t seem to change ..."}, {"owner": {"reputation": 7481, "user_id": 2666270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8b08ff3f628c4d11f81fe113c6eda6b9?s=128&d=identicon&r=PG", "display_name": "pceccon", "link": "https://stackoverflow.com/users/2666270/pceccon"}, "reply_to_user": {"reputation": 165, "user_id": 5638621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f67581fdd01afcdb5d9a1a83fe2c617?s=128&d=identicon&r=PG&f=1", "display_name": "HugoLasticot", "link": "https://stackoverflow.com/users/5638621/hugolasticot"}, "edited": false, "score": 0, "creation_date": 1461781895, "post_id": 36318742, "comment_id": 61360271, "body": "I  changed to MDS, @HugoLasticot. I wasn&#39;t able to figure it out what was happening using the tSNE method."}, {"owner": {"reputation": 101, "user_id": 4855669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4101ef85d9907b1e61df5016073a3c?s=128&d=identicon&r=PG&f=1", "display_name": "TorsionSquid", "link": "https://stackoverflow.com/users/4855669/torsionsquid"}, "edited": false, "score": 1, "creation_date": 1517628411, "post_id": 36318742, "comment_id": 84184487, "body": "I tried a similar example the first time I experimented with tSNE, with similar results. Things worked fine when I increased the number of data points to around 100. Since this is a probabilistic algorithm, you need sufficiently many points to get a good picture."}], "owner": {"reputation": 7481, "user_id": 2666270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8b08ff3f628c4d11f81fe113c6eda6b9?s=128&d=identicon&r=PG", "display_name": "pceccon", "link": "https://stackoverflow.com/users/2666270/pceccon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2810, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1557920460, "creation_date": 1459368594, "last_edit_date": 1459447482, "question_id": 36318742, "link": "https://stackoverflow.com/questions/36318742/visualizing-distance-matrix-using-tsne-python", "title": "Visualizing distance matrix using tSNE - Python", "body": "<p>I've computed a distance matrix and I'm trying two approach to visualized it.\nThis is my distance matrix:</p>\n\n<pre><code>delta =\n[[ 0.          0.71370845  0.80903791  0.82955157  0.56964983  0.          0.        ]\n [ 0.71370845  0.          0.99583115  1.          0.79563006  0.71370845\n   0.71370845]\n [ 0.80903791  0.99583115  0.          0.90029133  0.81180111  0.80903791\n   0.80903791]\n [ 0.82955157  1.          0.90029133  0.          0.97468433  0.82955157\n   0.82955157]\n [ 0.56964983  0.79563006  0.81180111  0.97468433  0.          0.56964983\n   0.56964983]\n [ 0.          0.71370845  0.80903791  0.82955157  0.56964983  0.          0.        ]\n [ 0.          0.71370845  0.80903791  0.82955157  0.56964983  0.          0.        ]]\n</code></pre>\n\n<p>Considering labels from <strong>1</strong> to <strong>7</strong>, <strong>1</strong> is really close to <strong>6</strong> and <strong>7</strong> and farther form <strong>4</strong>.</p>\n\n<p>At first I tried to use the tSNE dimensionality reduction:</p>\n\n<pre><code>from sklearn.preprocessing import normalize\nfrom sklearn import manifold\nfrom matplotlib import pyplot as plt\nfrom matplotlib.lines import Line2D\n\nimport numpy\n\nmodel = manifold.TSNE(n_components=2, random_state=0, metric='precomputed')\ncoords = model.fit_transform(delta)\n\ncmap = plt.get_cmap('Set1')\ncolors = [cmap(i) for i in numpy.linspace(0, 1, simulations)]\n\nplt.figure(figsize=(7, 7))\nplt.scatter(coords[:, 0], coords[:, 1], marker='o', c=colors, s=50, edgecolor='None')\n\nmarkers = []\nlabels = [str(n+1) for n in range(simulations)]\nfor i in range(simulations):\n    markers.append(Line2D([0], [0], linestyle='None', marker=\"o\", markersize=10, markeredgecolor=\"none\", markerfacecolor=colors[i]))\nlgd = plt.legend(markers, labels, numpoints=1, bbox_to_anchor=(1.17, 0.5))\nplt.tight_layout()\nplt.axis('equal')\nplt.show()\n</code></pre>\n\n<p>This produces this plot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/8FJA9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8FJA9.png\" alt=\"enter image description here\"></a></p>\n\n<p>Where we can see that this doesn't show <strong>1</strong> is close to <strong>6</strong> and <strong>7</strong>. Instead, it is closest to <strong>4</strong>.</p>\n\n<p>Then, not sure if the reduction had stopped at some local minima, I tried to draw a graph:</p>\n\n<p>import networkx as nx</p>\n\n<pre><code>plt.figure(figsize=(7, 7))\n\ndt = [('len', float)]\nA = delta\nA = A.view(dt)\n\nG = nx.from_numpy_matrix(A) \npos = nx.spring_layout(G)\n\nnx.draw_networkx_nodes(G, pos, node_color=colors, node_size=50)\n\nlgd = plt.legend(markers, labels, numpoints=1, bbox_to_anchor=(1.17, 0.5))\nplt.tight_layout()\nplt.axis('equal')\nplt.show()\n</code></pre>\n\n<p>As can be seen, the same occurs. If I keep repeating this latest method, I can end up with different sort of graphs:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DjgA4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DjgA4.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here, I get more closer of what I would expect. However, any of these behaviors seems to be right. The distance should be respected no matter how different is the initialization of the graph.</p>\n\n<p>So, I'm wondering what I'm missing in to achieve a good representation of this distance matrix.</p>\n\n<p>Thanks.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Z9RVX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z9RVX.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-3.x", "text", "glob"], "comments": [{"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 5, "creation_date": 1459368570, "post_id": 36318619, "comment_id": 60260826, "body": "Your code works just fine for me: <a href=\"https://asciinema.org/a/39x9vuca48gd7fieugpkicbbt\" rel=\"nofollow noreferrer\">asciinema.org/a/39x9vuca48gd7fieugpkicbbt</a>"}, {"owner": {"reputation": 101, "user_id": 6131258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baa732fb6210369755f7523c9050428e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Ghyzel", "link": "https://stackoverflow.com/users/6131258/chris-ghyzel"}, "edited": false, "score": 0, "creation_date": 1459368571, "post_id": 36318619, "comment_id": 60260828, "body": "Have you tried using the absolute path?"}, {"owner": {"reputation": 2755, "user_id": 5976265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yYNs9.jpg?s=128&g=1", "display_name": "Hun", "link": "https://stackoverflow.com/users/5976265/hun"}, "edited": false, "score": 0, "creation_date": 1459368860, "post_id": 36318619, "comment_id": 60260963, "body": "I confirm too. It worked for me."}, {"owner": {"reputation": 387, "user_id": 2817266, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/99af28df9994ae6840bc06263d56c9dc?s=128&d=identicon&r=PG&f=1", "display_name": "Codarus", "link": "https://stackoverflow.com/users/2817266/codarus"}, "edited": false, "score": 0, "creation_date": 1459368986, "post_id": 36318619, "comment_id": 60261039, "body": "Hmmm. That&#39;s very odd. Why might it work differently for you guys than it works for me?"}, {"owner": {"reputation": 122, "user_id": 6111958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b5f69905bfe1f4028b3924fafdade1c?s=128&d=identicon&r=PG&f=1", "display_name": "Winter", "link": "https://stackoverflow.com/users/6111958/winter"}, "edited": false, "score": 2, "creation_date": 1459369764, "post_id": 36318619, "comment_id": 60261489, "body": "Read title as &quot;glob.glob gloop&quot;. Upvote for entertaining title"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1459369777, "post_id": 36318619, "comment_id": 60261495, "body": "Have you tried <code>glob.glob(&quot;train\\*.txt&quot;)</code> with a backward slash instead? Or <code>glob.glob(os.path.join(&quot;train&quot;, &quot;*.txt&quot;))</code> to be platform independent."}, {"owner": {"reputation": 387, "user_id": 2817266, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/99af28df9994ae6840bc06263d56c9dc?s=128&d=identicon&r=PG&f=1", "display_name": "Codarus", "link": "https://stackoverflow.com/users/2817266/codarus"}, "edited": false, "score": 0, "creation_date": 1459370081, "post_id": 36318619, "comment_id": 60261659, "body": "@Event I just tried them both and got the same output: only the first 420 filenames print. I&#39;m running on Windows 10/ Python 3.4.3 if that matters."}], "answers": [{"tags": [], "owner": {"reputation": 387, "user_id": 2817266, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/99af28df9994ae6840bc06263d56c9dc?s=128&d=identicon&r=PG&f=1", "display_name": "Codarus", "link": "https://stackoverflow.com/users/2817266/codarus"}, "is_accepted": true, "score": 0, "last_activity_date": 1459371010, "creation_date": 1459371010, "answer_id": 36319425, "question_id": 36318619, "link": "https://stackoverflow.com/questions/36318619/why-is-my-glob-glob-loop-not-iterating-through-all-text-files-in-folder/36319425#36319425", "title": "Why is my glob.glob loop not iterating through all text files in folder?", "body": "<p>Success! The problem was</p>\n\n<pre><code>if not os.path.exists('train'):  # download data\n</code></pre>\n\n<p>To check my output, I had actually downloaded the files onto my computer, and since this line checked whether or not the folder existed, and it did exist, it caused issues. I deleted the files off of my machine and now it works as it should, though I suspect running</p>\n\n<pre><code>  from urllib.request import urlretrieve\n  import tarfile\n  urlretrieve('http://cs.iit.edu/~culotta/cs429/lingspam.tgz', 'lingspam.tgz')\n  tar = tarfile.open('lingspam.tgz')\n  tar.extractall()\n  tar.close()\n</code></pre>\n\n<p>without the if statement would have had the same result.</p>\n"}], "owner": {"reputation": 387, "user_id": 2817266, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/99af28df9994ae6840bc06263d56c9dc?s=128&d=identicon&r=PG&f=1", "display_name": "Codarus", "link": "https://stackoverflow.com/users/2817266/codarus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 36319425, "answer_count": 1, "score": 4, "last_activity_date": 1459371010, "creation_date": 1459368113, "last_edit_date": 1459369356, "question_id": 36318619, "link": "https://stackoverflow.com/questions/36318619/why-is-my-glob-glob-loop-not-iterating-through-all-text-files-in-folder", "title": "Why is my glob.glob loop not iterating through all text files in folder?", "body": "<p>I am attempting to read from a folder containing text documents with python 3. Specifically, this is a modification of the LingSpam email spam dataset. I am expecting the code I wrote to return all 1893 text document names, however, the code instead returns the first 420 filenames. I do not understand why it is stopping short of the total number of filenames. Any ideas?</p>\n\n<pre><code>if not os.path.exists('train'):  # download data\n  from urllib.request import urlretrieve\n  import tarfile\n  urlretrieve('http://cs.iit.edu/~culotta/cs429/lingspam.tgz', 'lingspam.tgz')\n  tar = tarfile.open('lingspam.tgz')\n  tar.extractall()\n  tar.close()\nabc = []\nfor f in glob.glob(\"train/*.txt\"):\n  print(f)\n  abc.append(f)\nprint(len(abc))\n</code></pre>\n\n<p>I've tried changing the glob params but still no success.</p>\n\n<p>Edit: Apparently my code works for everyone but me. Here's my <a href=\"http://pastebin.com/81Zdd0Yr\" rel=\"nofollow\">output</a></p>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1459371059, "post_id": 36318797, "comment_id": 60262229, "body": "I love broadcasting too! But, you gotta try out with a bigger <code>b</code> than with just 2 elements I think."}, {"owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1459371813, "post_id": 36318797, "comment_id": 60262673, "body": "@Divakar You&#39;re right! I&#39;ve made an amendment  to my post."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1459373543, "post_id": 36318797, "comment_id": 60263572, "body": "Yeah something like <code>(pan_series[:,None]&lt;cutoff_ar).sum(0)</code> to go along with the variable names from the question I guess."}, {"owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1459373702, "post_id": 36318797, "comment_id": 60263655, "body": "Broadcasting can be applied also to tabular data, say <code>a.shape -&gt; (200, 50)</code> with <code>(a[:,:,None]&lt;b).sum(axis=1)</code>"}], "tags": [], "owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "is_accepted": true, "score": 2, "last_activity_date": 1459373362, "last_edit_date": 1459373362, "creation_date": 1459368745, "answer_id": 36318797, "question_id": 36318618, "link": "https://stackoverflow.com/questions/36318618/number-of-elements-of-array-less-than-each-element-of-cutoff-array-in-python/36318797#36318797", "title": "Number of elements of array less than each element of cutoff array in python", "body": "<p>Is this what you are looking for?</p>\n\n<pre><code>In [36]: a = np.random.random(20)\n\nIn [37]: a\nOut[37]: \narray([ 0.68574307,  0.15743428,  0.68006876,  0.63572484,  0.26279663,\n        0.14346269,  0.56267286,  0.47250091,  0.91168387,  0.98915746,\n        0.22174062,  0.11930722,  0.30848231,  0.1550406 ,  0.60717858,\n        0.23805205,  0.57718675,  0.78075297,  0.17083826,  0.87301963])\n\nIn [38]: b = np.array((0.3,0.7))\n\nIn [39]: np.sum(a[:,None]&lt;b[None,:], axis=0)\nOut[39]: array([ 8, 16])\n\nIn [40]: np.sum(a[:,None]&lt;b, axis=0) # b's new axis above is unnecessary...\nOut[40]: array([ 8, 16])\n\nIn [41]: (a[:,None]&lt;b).sum(axis=0)   # even simpler\nOut[41]: array([ 8, 16])\n</code></pre>\n\n<p>Timings are always well received (for a longish, 2E6 elements array)</p>\n\n<pre><code>In [47]: a = np.random.random(2000000)\n\nIn [48]: %timeit (a[:,None]&lt;b).sum(axis=0)\n10 loops, best of 3: 78.2 ms per loop\n\nIn [49]: %timeit np.searchsorted(a, b, 'right',sorter=a.argsort())\n1 loop, best of 3: 448 ms per loop\n</code></pre>\n\n<p>For a smaller array</p>\n\n<pre><code>In [50]: a = np.random.random(2000)\n\nIn [51]: %timeit (a[:,None]&lt;b).sum(axis=0)\n10000 loops, best of 3: 89 \u00b5s per loop\n\nIn [52]: %timeit np.searchsorted(a, b, 'right',sorter=a.argsort())\nThe slowest run took 4.86 times longer than the fastest. This could mean that an intermediate result is being cached.\n10000 loops, best of 3: 141 \u00b5s per loop\n</code></pre>\n\n<hr>\n\n<p><em>Edit</em></p>\n\n<p>Divakar says that things may be different for lenghty <code>b</code>s, let's see</p>\n\n<pre><code>In [71]: a = np.random.random(2000)\n\nIn [72]: b =np.random.random(200)\n\nIn [73]: %timeit (a[:,None]&lt;b).sum(axis=0)\n1000 loops, best of 3: 1.44 ms per loop\n\nIn [74]: %timeit np.searchsorted(a, b, 'right',sorter=a.argsort())\n10000 loops, best of 3: 172 \u00b5s per loop\n</code></pre>\n\n<p>quite different indeed! Thank you for prompting my curiosity.</p>\n\n<p>Probably the OP should test for his use case, very long sample with respect to cutoff sequences or not? and where there is a balance?  </p>\n\n<hr>\n\n<p><em>Edit #2</em></p>\n\n<p>I made a blooper in my timings, I forgot the <code>axis=0</code> argument to <code>.sum()</code>... </p>\n\n<p>I've edited the timings with the corrected statement and, of course, the corrected timing. My apologies.</p>\n"}, {"comments": [{"owner": {"reputation": 154, "user_id": 588373, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/acca7d21b7b7f856d43f71a17d147bad?s=128&d=identicon&r=PG", "display_name": "MHankin", "link": "https://stackoverflow.com/users/588373/mhankin"}, "edited": false, "score": 0, "creation_date": 1459455884, "post_id": 36318830, "comment_id": 60307909, "body": "This is great, and I&#39;m now using searchsorted in a number of times in my code. However, for the task referenced in the question, I also need to do something analogous for a reverse-sorted array. Obviously this can be accomplished using the sorter arg, but it ends up being cleaner to just use gboffi&#39;s solution in this case. Either way, thanks a ton!"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 2, "last_activity_date": 1459373967, "last_edit_date": 1459373967, "creation_date": 1459368844, "answer_id": 36318830, "question_id": 36318618, "link": "https://stackoverflow.com/questions/36318618/number-of-elements-of-array-less-than-each-element-of-cutoff-array-in-python/36318830#36318830", "title": "Number of elements of array less than each element of cutoff array in python", "body": "<p>You can use <a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.searchsorted.html\" rel=\"nofollow\"><code>np.searchsorted</code></a> for some <code>NumPy magic</code> -</p>\n\n<pre><code># Convert to numpy array for some \"magic\"\npan_series_arr = np.array(pan_series)\n\n# Let the magic begin!\nsortidx = pan_series_arr.argsort()\nout = np.searchsorted(pan_series_arr,cutoff_ar,'right',sorter=sortidx)\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>You are performing <code>[(pan_series &lt; cutoff_val).sum() for cutoff_val in cutoff_ar]</code> i.e. for each\nelement in <code>cutoff_ar</code>, we are counting the number of <code>pan_series</code> elements that are lesser than it. Now with <code>np.searchsorted</code>, we are looking for <code>cutoff_ar</code>  to be put in a sorted <code>pan_series_arr</code> and get the indices of such positions compared to whom the current element in <code>cutoff_ar</code> is at <code>'right'</code> position . These indices essentially represent the number of <code>pan_series</code> elements below the current <code>cutoff_ar</code> element, thus giving us our desired output.</p>\n\n<p><strong>Sample run</strong></p>\n\n<pre><code> In [302]: cutoff_ar\nOut[302]: array([ 1,  3,  9, 44, 63, 90])\n\nIn [303]: pan_series_arr\nOut[303]: array([ 2,  8, 69, 55, 97])\n\nIn [304]: [(pan_series_arr &lt; cutoff_val).sum() for cutoff_val in cutoff_ar]\nOut[304]: [0, 1, 2, 2, 3, 4]\n\nIn [305]: sortidx = pan_series_arr.argsort()\n     ...: out = np.searchsorted(pan_series_arr,cutoff_ar,'right',sorter=sortidx)\n     ...: \n\nIn [306]: out\nOut[306]: array([0, 1, 2, 2, 3, 4])\n</code></pre>\n"}], "owner": {"reputation": 154, "user_id": 588373, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/acca7d21b7b7f856d43f71a17d147bad?s=128&d=identicon&r=PG", "display_name": "MHankin", "link": "https://stackoverflow.com/users/588373/mhankin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 0, "accepted_answer_id": 36318797, "answer_count": 2, "score": 2, "last_activity_date": 1459373967, "creation_date": 1459368112, "last_edit_date": 1459370457, "question_id": 36318618, "link": "https://stackoverflow.com/questions/36318618/number-of-elements-of-array-less-than-each-element-of-cutoff-array-in-python", "title": "Number of elements of array less than each element of cutoff array in python", "body": "<p>I've got a numpy array of strictly increasing \"cutoff\" values of length <code>m</code>, and a pandas series of values (thought the index isn't important and this could be cast to a numpy array) of values of length <code>n</code>. \nI need to come up with an efficient way of spitting out a length <code>m</code> vector of counts of the number of elements in the pandas series less than the jth element of the \"cutoff\" array. </p>\n\n<p>I could do this via a list iterator:</p>\n\n<pre><code>output = array([(pan_series &lt; cutoff_val).sum() for cutoff_val in cutoff_ar])\n</code></pre>\n\n<p>but I was wondering if there were any way to do this that leveraged more of numpy's magic speed, as I have to do this quite a few times inside multiple loops and it keeps crasshing my computer.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "performance", "web-scraping", "beautifulsoup", "urllib"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1459368210, "post_id": 36318547, "comment_id": 60260591, "body": "Are you sure this has anything to do with BeautifulSoup? Considering the 60 seconds number, I&#39;d be inclined to think the website you&#39;re scraping is throttling you."}], "answers": [{"comments": [{"owner": {"reputation": 701, "user_id": 5953206, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dc00d01d91ff9dbfe1248a1e52c97ffc?s=128&d=identicon&r=PG&f=1", "display_name": "calpyte", "link": "https://stackoverflow.com/users/5953206/calpyte"}, "edited": false, "score": 0, "creation_date": 1459368736, "post_id": 36318645, "comment_id": 60260894, "body": "Something like this <a href=\"https://docs.python.org/2/library/thread.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/thread.html</a> or more like python&#39;s multiprocessing module?"}], "tags": [], "owner": {"reputation": 1153, "user_id": 599771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90e664e0d3b40c9f6520d080be0116d9?s=128&d=identicon&r=PG&f=1", "display_name": "rvs", "link": "https://stackoverflow.com/users/599771/rvs"}, "is_accepted": false, "score": 2, "last_activity_date": 1459368229, "creation_date": 1459368229, "answer_id": 36318645, "question_id": 36318547, "link": "https://stackoverflow.com/questions/36318547/speeding-up-beautiful-soup/36318645#36318645", "title": "Speeding Up Beautiful Soup", "body": "<p>It is not <code>BeautifulSoup</code> which is slow, it's <code>decisionpage.read()</code>.</p>\n\n<p><code>urllib.urlopen</code> returns a socket object, actual http request happens at <code>.read()</code>. So your bottleneck if somewhere in the network: either your Internet connection or remote website is slow (or both).</p>\n\n<p>Since you are I/O bound and have several thousand websites, you can speed up things significantly by running several threads parsing different websites at the same time.</p>\n"}, {"comments": [{"owner": {"reputation": 701, "user_id": 5953206, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dc00d01d91ff9dbfe1248a1e52c97ffc?s=128&d=identicon&r=PG&f=1", "display_name": "calpyte", "link": "https://stackoverflow.com/users/5953206/calpyte"}, "edited": false, "score": 0, "creation_date": 1459368994, "post_id": 36318715, "comment_id": 60261044, "body": "I totally missed that possibility. I will definitely try this. Thanks for pointing it out!"}, {"owner": {"reputation": 2452, "user_id": 1594060, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d93aa9c4456a600e2fdc404588726354?s=128&d=identicon&r=PG", "display_name": "Josh Rumbut", "link": "https://stackoverflow.com/users/1594060/josh-rumbut"}, "reply_to_user": {"reputation": 701, "user_id": 5953206, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dc00d01d91ff9dbfe1248a1e52c97ffc?s=128&d=identicon&r=PG&f=1", "display_name": "calpyte", "link": "https://stackoverflow.com/users/5953206/calpyte"}, "edited": false, "score": 0, "creation_date": 1459372308, "post_id": 36318715, "comment_id": 60262940, "body": "Yeah, BeautifulSoup is reasonably performant. I wouldn&#39;t recommend increasing the request rate, it&#39;s not nice and if you make too many requests at once to a court website they might decide to invite you over ;)"}], "tags": [], "owner": {"reputation": 2452, "user_id": 1594060, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d93aa9c4456a600e2fdc404588726354?s=128&d=identicon&r=PG", "display_name": "Josh Rumbut", "link": "https://stackoverflow.com/users/1594060/josh-rumbut"}, "is_accepted": false, "score": 0, "last_activity_date": 1459368493, "creation_date": 1459368493, "answer_id": 36318715, "question_id": 36318547, "link": "https://stackoverflow.com/questions/36318547/speeding-up-beautiful-soup/36318715#36318715", "title": "Speeding Up Beautiful Soup", "body": "<p>There may be a paradoxical solution to your problem. It's pretty clear that the website you're attempting to scrape is throttling you.</p>\n\n<p>I would suggest trying to respect their wishes and adding a pause between your requests. If you add <code>time.sleep(2)</code> (and <code>import time</code> to the top of the script) to the end of your loop, it may prevent you from being throttled for 60 seconds.</p>\n\n<p>Experiment and see what number works best for you.</p>\n"}, {"tags": [], "owner": {"reputation": 2679, "user_id": 6153562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee9c9f355300df5464bc13e3563a1deb?s=128&d=identicon&r=PG&f=1", "display_name": "C Panda", "link": "https://stackoverflow.com/users/6153562/c-panda"}, "is_accepted": false, "score": 0, "last_activity_date": 1459809959, "creation_date": 1459809959, "answer_id": 36414225, "question_id": 36318547, "link": "https://stackoverflow.com/questions/36318547/speeding-up-beautiful-soup/36414225#36414225", "title": "Speeding Up Beautiful Soup", "body": "<p>While crawling large websites use threads: <code>concurrent.futures</code> or <code>threading</code>. In network I/O the thread <code>read()</code>ing the network resource spends most of its time sitting around waiting. This is a very befitting situation for employing concurrency.</p>\n\n<p>Second, if you are not scraping specific stuff, just following anchor tags, <strong>use regular expressions</strong>. They are around 100 times faster than <code>HTMLParser</code> in my machine. The speedup will be significant.</p>\n"}], "owner": {"reputation": 701, "user_id": 5953206, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dc00d01d91ff9dbfe1248a1e52c97ffc?s=128&d=identicon&r=PG&f=1", "display_name": "calpyte", "link": "https://stackoverflow.com/users/5953206/calpyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1366, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1459809959, "creation_date": 1459367913, "last_edit_date": 1459368473, "question_id": 36318547, "link": "https://stackoverflow.com/questions/36318547/speeding-up-beautiful-soup", "title": "Speeding Up Beautiful Soup", "body": "<p>I am using <strong>BeautifulSoup</strong> to parse several thousand websites within a for loop. Here is a snippet from my code:</p>\n\n<pre><code>def parse_decision(link):\n    t1 = time.time()\n    decisionpage = urllib.urlopen(link)\n    t2 = time.time()\n    soup = BeautifulSoup(decisionpage.read(), 'lxml')\n    t3 = time.time()\n    # ...\n    # Parsing happens here and returns a pandas dataframe\n</code></pre>\n\n<p>Because the code takes forever to run I started investigating the cause and found that the time it takes for BeautifulSoup to read a decisionpage varies a lot. Here is a snippet of the seconds it takes to complete each step:</p>\n\n<pre><code>    Element | t2-t1  |  t3-t2\n    1.      | 0.073  | 60.023\n    2.      | 0.096  | 0.005\n    3.      | 0.096  | 60.016\n    4.      | 0.064  | 0.006\n</code></pre>\n\n<p>As one can see, roughly every second website takes <strong>60 seconds</strong> eventhough the websites are in the same format and contain roughly the same information.\nWebsites are court decisions similar to this one:\n        <a href=\"http://www.nycourts.gov/reporter/3dseries/2003/2003_17749.htm\" rel=\"nofollow\">http://www.nycourts.gov/reporter/3dseries/2003/2003_17749.htm</a></p>\n\n<p>Does anyone have an idea why this <strong>performance difference</strong> exists and possibly how to overcome it? Any help would be much appreciated.</p>\n"}, {"tags": ["python", "pandas", "google-cloud-datalab"], "answers": [{"tags": [], "owner": {"reputation": 1153, "user_id": 599771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90e664e0d3b40c9f6520d080be0116d9?s=128&d=identicon&r=PG&f=1", "display_name": "rvs", "link": "https://stackoverflow.com/users/599771/rvs"}, "is_accepted": true, "score": 3, "last_activity_date": 1459368556, "creation_date": 1459368556, "answer_id": 36318732, "question_id": 36318527, "link": "https://stackoverflow.com/questions/36318527/freeing-up-buffer-space-after-use-in-python/36318732#36318732", "title": "Freeing up buffer space after use in Python?", "body": "<p>Use <code>del</code> followed by forced garbage collection.</p>\n\n<pre><code>import gc\n\n# Remove text variable\ndel text\n# Force gc collection - this not actually necessary, but may be useful.\ngc.collect()\n</code></pre>\n\n<p>Note that you may not see process size decreasing and memory returning to OS, depending on memory allocator used (depends on OS, core libraries used and python compilation options).</p>\n"}], "owner": {"reputation": 8894, "user_id": 137783, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/938a1132d5f1b2c5a54345b0e672689c?s=128&d=identicon&r=PG", "display_name": "dartdog", "link": "https://stackoverflow.com/users/137783/dartdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 36318732, "answer_count": 1, "score": 2, "last_activity_date": 1459372101, "creation_date": 1459367843, "last_edit_date": 1459372101, "question_id": 36318527, "link": "https://stackoverflow.com/questions/36318527/freeing-up-buffer-space-after-use-in-python", "title": "Freeing up buffer space after use in Python?", "body": "<p>So I'm using Google Cloud data Lab and I use the %%storage read command to read in a large file (2,000,000 rows) Into the <code>text</code> variable and then I have to process it into a pandas dataframe using BytesIO eg <code>df_new=pd.read_csv(BytesIO(text))</code></p>\n\n<p>So now I don't need the <code>text</code> Variable or its contents around, (all further processing is done on <code>df_new</code>, how can I delete it (<code>text</code>) and free up memory (I sure don't need two copies of a 2 million record dataset hanging around...)</p>\n"}, {"tags": ["python", "vba", "excel"], "comments": [{"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1459367875, "post_id": 36318448, "comment_id": 60260419, "body": "You might be able to use Windows file associations and skip the part about the path to <code>python.exe</code>"}, {"owner": {"reputation": 99, "user_id": 5919226, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eed5f14adc24baee831415ac4efa7a91?s=128&d=identicon&r=PG&f=1", "display_name": "mmmbeer", "link": "https://stackoverflow.com/users/5919226/mmmbeer"}, "reply_to_user": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1459368949, "post_id": 36318448, "comment_id": 60261018, "body": "@JohnColeman: Interesting. How could I do this while using the shell? It insists on a path to an executable as a argument."}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1459371175, "post_id": 36318448, "comment_id": 60262298, "body": "I&#39;m not sure how to use it from VBScript -- but it can work from the command prompt."}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1459372617, "post_id": 36318448, "comment_id": 60263113, "body": "The <code>Run</code> method seems easier to use with arguments with spaces. I&#39;m not sure why."}, {"owner": {"reputation": 99, "user_id": 5919226, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eed5f14adc24baee831415ac4efa7a91?s=128&d=identicon&r=PG&f=1", "display_name": "mmmbeer", "link": "https://stackoverflow.com/users/5919226/mmmbeer"}, "reply_to_user": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1459426129, "post_id": 36318448, "comment_id": 60287984, "body": "Thanks. I was using Exec to pass a result from Python to VBA through StdOut. Do you know how to do this with Run?"}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1459427366, "post_id": 36318448, "comment_id": 60288941, "body": "It seems to be a bit of a bug since <i>exactly</i> the same string will work with <code>Run</code> but fail with <code>Exec</code>. How badly do you need to have spaces in the path? Personally, I keep most of my programs in a folder in my documents (in a path which contains spaces) but also keep a folder close to the root directory for programs that I need to invoke from the command line (which isn&#39;t a very common use-case for me). You could create such a folder and move a copy of your script to it."}, {"owner": {"reputation": 99, "user_id": 5919226, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eed5f14adc24baee831415ac4efa7a91?s=128&d=identicon&r=PG&f=1", "display_name": "mmmbeer", "link": "https://stackoverflow.com/users/5919226/mmmbeer"}, "reply_to_user": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1459431464, "post_id": 36318448, "comment_id": 60292036, "body": "@JohnColeman: Thanks. I was thinking of doing just that. Existing path names have spaces in them (for which I will curse MS for all time) and I was hoping to accommodate current circumstances and not introduce any new procedural requirements for others. Seems to be a choice between spaces in path names and being able to pass a return value through StdOut."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 5919226, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eed5f14adc24baee831415ac4efa7a91?s=128&d=identicon&r=PG&f=1", "display_name": "mmmbeer", "link": "https://stackoverflow.com/users/5919226/mmmbeer"}, "edited": false, "score": 0, "creation_date": 1459368468, "post_id": 36318507, "comment_id": 60260755, "body": "Thanks, hadn&#39;t tried that one, but no success. This causes the terminal window to stay open, which is different, but the argument is still not passed."}], "tags": [], "owner": {"reputation": 4037, "user_id": 3990145, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3d95b7ec21ccd7bf3c8e1604d49faca1?s=128&d=identicon&r=PG&f=1", "display_name": "xi&#186;", "link": "https://stackoverflow.com/users/3990145/xi%c2%ba"}, "is_accepted": false, "score": 1, "last_activity_date": 1459367790, "creation_date": 1459367790, "answer_id": 36318507, "question_id": 36318448, "link": "https://stackoverflow.com/questions/36318448/passing-parameters-to-python-from-vba/36318507#36318507", "title": "Passing parameters to python from VBA", "body": "<p>Try to use multiple quotes:</p>\n\n<pre><code>Set shell_exec = wsh.Exec(\"\"\"C:\\path_to_executable\\python.exe \"\"\" &amp; \"\"\"C:\\path with spaces\\file.py \"\"\" &amp; arg)\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 5919226, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eed5f14adc24baee831415ac4efa7a91?s=128&d=identicon&r=PG&f=1", "display_name": "mmmbeer", "link": "https://stackoverflow.com/users/5919226/mmmbeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2380, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1459369454, "creation_date": 1459367583, "last_edit_date": 1459369454, "question_id": 36318448, "link": "https://stackoverflow.com/questions/36318448/passing-parameters-to-python-from-vba", "title": "Passing parameters to python from VBA", "body": "<p>In VBA code, I am calling Python and passing an argument successfully like this when there are no spaces in the path to the python file:</p>\n\n<pre><code>Dim wsh As Object\nSet wsh = CreateObject(\"WScript.Shell\")\n\nDim shell_exec As Object\nSet shell_exec = wsh.Exec(\"C:\\path_to_executable\\python.exe \" &amp; \"C:\\path_without_spaces\\file.py \" &amp; arg)\n</code></pre>\n\n<p>However, I cannot find any way to pass an argument to python when the path to the python file contains spaces.  For example, triple double-quoting the path works when there is no argument:</p>\n\n<pre><code>Set shell_exec = wsh.Exec(\"C:\\path_to_executable\\python.exe \" &amp; \"\"\"C:\\path with spaces\\file.py\"\"\")\n</code></pre>\n\n<p>But I am unable to find any way to pass an argument when doing this.  For example, calls like this (and every variation on this theme I can think of) fail:</p>\n\n<pre><code>Set shell_exec = wsh.Exec(\"C:\\path_to_executable\\python.exe \" &amp; \"\"\"C:\\path with spaces\\file.py \"\"\" &amp; arg)\n</code></pre>\n\n<p>Is this possible, or is the use of spaces fatally ambiguous in this situation?</p>\n\n<p>Advice is appreciated.</p>\n"}, {"tags": ["python", "unit-testing", "import", "nose"], "comments": [{"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459368092, "post_id": 36318440, "comment_id": 60260527, "body": "Looking over your file layout, you are missing an <code>__init__.py</code> in your ex48 folder where settings and temp.py are. Can you ensure that you have the appropriate <code>__init__.py</code>&#39;s in place and try again?"}, {"owner": {"reputation": 262, "user_id": 4314265, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2bbeddf2c99b1aee6370548705b6d253?s=128&d=identicon&r=PG&f=1", "display_name": "Jeeves", "link": "https://stackoverflow.com/users/4314265/jeeves"}, "reply_to_user": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459368180, "post_id": 36318440, "comment_id": 60260578, "body": "Added thanks-- but still getting same result :/"}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459368231, "post_id": 36318440, "comment_id": 60260599, "body": "Where are you running nose from? inside the <code>ex48</code> directory?"}, {"owner": {"reputation": 262, "user_id": 4314265, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2bbeddf2c99b1aee6370548705b6d253?s=128&d=identicon&r=PG&f=1", "display_name": "Jeeves", "link": "https://stackoverflow.com/users/4314265/jeeves"}, "reply_to_user": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459368292, "post_id": 36318440, "comment_id": 60260644, "body": "Yes, the top ex48 directory inside which is the ex48/ and tests/"}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459368598, "post_id": 36318440, "comment_id": 60260839, "body": "Where exactly are your <code>__init__.py</code> files?"}, {"owner": {"reputation": 262, "user_id": 4314265, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2bbeddf2c99b1aee6370548705b6d253?s=128&d=identicon&r=PG&f=1", "display_name": "Jeeves", "link": "https://stackoverflow.com/users/4314265/jeeves"}, "reply_to_user": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459373091, "post_id": 36318440, "comment_id": 60263336, "body": "ex48/ex48/__init__.py"}, {"owner": {"reputation": 262, "user_id": 4314265, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2bbeddf2c99b1aee6370548705b6d253?s=128&d=identicon&r=PG&f=1", "display_name": "Jeeves", "link": "https://stackoverflow.com/users/4314265/jeeves"}, "reply_to_user": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459373407, "post_id": 36318440, "comment_id": 60263497, "body": "add screenshot of directory listing"}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459375909, "post_id": 36318440, "comment_id": 60264622, "body": "The first screen shot you are importing temp twice. What are you doing there? That should not be happening. Import one way and use that one."}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459376103, "post_id": 36318440, "comment_id": 60264708, "body": "And for the first screenshot, which file is that?"}, {"owner": {"reputation": 262, "user_id": 4314265, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2bbeddf2c99b1aee6370548705b6d253?s=128&d=identicon&r=PG&f=1", "display_name": "Jeeves", "link": "https://stackoverflow.com/users/4314265/jeeves"}, "reply_to_user": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459392207, "post_id": 36318440, "comment_id": 60269377, "body": "That is scanner.py"}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459398299, "post_id": 36318440, "comment_id": 60271072, "body": "Look at your first screen shot...you have <code>from temp import temp</code> then below you have <code>import temp</code>. Remove <code>import temp</code>."}, {"owner": {"reputation": 262, "user_id": 4314265, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2bbeddf2c99b1aee6370548705b6d253?s=128&d=identicon&r=PG&f=1", "display_name": "Jeeves", "link": "https://stackoverflow.com/users/4314265/jeeves"}, "reply_to_user": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459398943, "post_id": 36318440, "comment_id": 60271260, "body": "I removed that. I attached some more screenshots of an entirely different project, created from scratch which gives the same error. This has to be an issue with the path that nosetests is searching for when it does its imports but I&#39;ve yet to see a workaround"}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459399103, "post_id": 36318440, "comment_id": 60271309, "body": "You have the <i>exact</i> same exception when you removed <code>import temp</code> from the <code>scanner.py</code> file? Are you sure?"}, {"owner": {"reputation": 262, "user_id": 4314265, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2bbeddf2c99b1aee6370548705b6d253?s=128&d=identicon&r=PG&f=1", "display_name": "Jeeves", "link": "https://stackoverflow.com/users/4314265/jeeves"}, "reply_to_user": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459399152, "post_id": 36318440, "comment_id": 60271336, "body": "Yes same, same error also across projects."}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459399292, "post_id": 36318440, "comment_id": 60271369, "body": "What do you mean <code>across projects</code>? Also, if you removed <code>import temp</code>, then you should be getting a different exception because that line should no longer exist in your code."}, {"owner": {"reputation": 262, "user_id": 4314265, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2bbeddf2c99b1aee6370548705b6d253?s=128&d=identicon&r=PG&f=1", "display_name": "Jeeves", "link": "https://stackoverflow.com/users/4314265/jeeves"}, "reply_to_user": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1459399676, "post_id": 36318440, "comment_id": 60271485, "body": "Across projects ==  I started from scratch with a new project/directory, created simple .py files and tried to run a nosetests on these files and got the same importerror. I refer to them as the same exception because, while the line numbers may change, the same error results, that being: ImportError: No module named &#39;whatever&#39; ."}, {"owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "reply_to_user": {"reputation": 262, "user_id": 4314265, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2bbeddf2c99b1aee6370548705b6d253?s=128&d=identicon&r=PG&f=1", "display_name": "Jeeves", "link": "https://stackoverflow.com/users/4314265/jeeves"}, "edited": false, "score": 0, "creation_date": 1459400279, "post_id": 36318440, "comment_id": 60271678, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/107808/discussion-between-idjaw-and-jeeves\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1459403530, "creation_date": 1459403530, "answer_id": 36325179, "question_id": 36318440, "link": "https://stackoverflow.com/questions/36318440/python-nosetests-import-file-path-with-multiple-modules-files/36325179#36325179", "title": "PYTHON: nosetests import file path with multiple modules/files", "body": "<p>Everything needs to be with respect to your execution point. You are running your nose command from the root of <code>ex48</code>, therefore all your imports need to be with respect to that location.</p>\n\n<p>Therefore, in <code>game.py</code> you should be importing with respect to <code>ex48</code>. Therefore: </p>\n\n<pre><code>from ex48.otherpy import House\n</code></pre>\n\n<p>The same logic should be applied to your example referencing the <code>temp</code> folder. </p>\n\n<pre><code>from ex48.temp import temp\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 262, "user_id": 4314265, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2bbeddf2c99b1aee6370548705b6d253?s=128&d=identicon&r=PG&f=1", "display_name": "Jeeves", "link": "https://stackoverflow.com/users/4314265/jeeves"}, "is_accepted": true, "score": 0, "last_activity_date": 1459436775, "creation_date": 1459436775, "answer_id": 36337198, "question_id": 36318440, "link": "https://stackoverflow.com/questions/36318440/python-nosetests-import-file-path-with-multiple-modules-files/36337198#36337198", "title": "PYTHON: nosetests import file path with multiple modules/files", "body": "<p>The only solution I have found is to post the following to the top of the main file:</p>\n\n<pre><code>try: \n     # This handles imports when running .py files from inside app directory\n     from file_to_import.py import class_instance\nexcept:\n     # This handles imports when running nosetests from top-level (above app) \n     # directory\n     from directory_containing_app_files.file_to_import import class_instance\n</code></pre>\n\n<p>I am supremely interested in an alternative solution.</p>\n"}], "owner": {"reputation": 262, "user_id": 4314265, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2bbeddf2c99b1aee6370548705b6d253?s=128&d=identicon&r=PG&f=1", "display_name": "Jeeves", "link": "https://stackoverflow.com/users/4314265/jeeves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1451, "favorite_count": 1, "accepted_answer_id": 36337198, "answer_count": 2, "score": 1, "last_activity_date": 1474050276, "creation_date": 1459367552, "last_edit_date": 1474050276, "question_id": 36318440, "link": "https://stackoverflow.com/questions/36318440/python-nosetests-import-file-path-with-multiple-modules-files", "title": "PYTHON: nosetests import file path with multiple modules/files", "body": "<p>I'm currently working through <a href=\"http://learnpythonthehardway.org/book/ex48.html\" rel=\"nofollow noreferrer\">LearnPythonTheHardWay</a> and have reached <a href=\"http://learnpythonthehardway.org/book/ex48.html\" rel=\"nofollow noreferrer\">Exercise 48</a> which details <strong>Nosetests</strong>. I am able to perform a unit testing as long as all of the code is in a single python.py file. However if I include other files as part of a program, i.e. use <strong>import</strong> and then attempt to <strong>nosetest</strong> such a project I am getting an error, as follows: </p>\n\n<blockquote>\n  <p>======================================================================                                                                 </p>\n  \n  <h2>ERROR: Failure: ImportError (No module named 'temp')</h2>\n  \n  <p>Traceback (most recent call last):<br>\n    File \"/usr/local/lib/python3.4/dist-packages/nose/failure.py\", line 39, in runTest<br>\n      raise self.exc_val.with_traceback(self.tb)<br>\n    File \"/usr/local/lib/python3.4/dist-packages/nose/loader.py\", line 414, in loadTestsFromName        ## ##<br>\n      addr.filename, addr.module)<br>\n    File \"/usr/local/lib/python3.4/dist-packages/nose/importer.py\", line 47, in importFromPath<br>\n      return self.importFromDir(dir_path, fqname)<br>\n    File \"/usr/local/lib/python3.4/dist-packages/nose/importer.py\", line 94, in importFromDir<br>\n      mod = load_module(part_fqname, fh, filename, desc)<br>\n    File \"/usr/lib/python3.4/imp.py\", line 235, in load_module<br>\n      return load_source(name, filename, file)<br>\n    File \"/usr/lib/python3.4/imp.py\", line 171, in load_source<br>\n      module = methods.load()<br>\n    File \"\", line 1220, in load<br>\n    File \"\", line 1200, in _load_unlocked<br>\n    File \"\", line 1129, in _exec<br>\n    File \"\", line 1471, in exec_module<br>\n    File \"\", line 321, in _call_with_frames_removed<br>\n    File \"/home/user/LEARNPYTHONTHEHARDWAY/ex48/tests/scanner_tests.py\", line 6, in <br>\n      from ex48.scanner  import lexicon<br>\n    File \"/home/user/LEARNPYTHONTHEHARDWAY/ex48/ex48/scanner.py\", line 6, in <br>\n      import temp<br>\n  ImportError: No module named 'temp'                                                                                                    </p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>Ran 1 test in 0.028s</p>\n  \n  <p>FAILED (errors=1)</p>\n</blockquote>\n\n<p>The structure of my project directories are as follows:</p>\n\n<pre><code>ex48/\n  ex48/\n     scanner.py\n     temp.py\n  __pycache__/\n  tests/\n     __init__.py\n    scanner_tests.py\n</code></pre>\n\n<p>Screenshot of my directory::</p>\n\n<p><a href=\"https://i.stack.imgur.com/Or9ne.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Or9ne.png\" alt=\"enter image description here\"></a></p>\n\n<p>Screen shot of files themselves::</p>\n\n<p><a href=\"https://i.stack.imgur.com/v3p2i.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v3p2i.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/QYsut.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QYsut.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/6I9JE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6I9JE.png\" alt=\"enter image description here\"></a>\nMy <strong>scanner_tests.py</strong> file is as follows: </p>\n\n<pre><code>from nose.tools import *\nfrom ex48.scanner import lexicon\nfrom ex48 import temp\n\ndef test_directions():\n    assert_equal(lexicon.scan(\"north\"),[('direction','north')])\n        result = lexicon.scan(\"north south east\")\n        assert_equal(result, [('direction', 'north'),\n                          ('direction', 'south'),\n                          ('direction', 'east')])\n</code></pre>\n\n<p>My <strong>scanner.py</strong> file is as follows:</p>\n\n<pre><code>   import temp\n\n   class lexicon:\n       def scan(val):\n          if(val == \"north\"):\n              return [('direction', 'north')]\n          else:\n              return [('direction', 'north'),\n                      ('direction', 'south'),\n                      ('direction', 'east')]\n\n    runner = temp.temp(\"hello\")\n</code></pre>\n\n<p>And finally my <strong>temp.py</strong> file is as follows:</p>\n\n<pre><code>   class temp(object):\n       def __init__(self,name):\n           self.name = name\n       def run(self):\n           print \"Your name is; %s\" % self.name     \n    runner.run()\n</code></pre>\n\n<p>My question is how to overcome the <strong>ImportError: No Module named 'temp'</strong> because it seems as if I have imported the <strong>temp.py</strong> file in both the scanner.py file and the <strong>scanner_tests.py</strong> file but nose does not seem to be able to import it when it runs. <em>Nosetests</em> works fine when its just the single <strong>scanner.py</strong> file but not when importing. Is there a special syntax for importing into a unit test for nose? The script also works fine when run and imports properly at the command line. </p>\n\n<p>*Note: I'm running python off a limited account off an online server so some admin privileges are not available. </p>\n\n<p>**Note below are entirely different screenshots from another project with the exact same error:</p>\n\n<p>Directory Layout:\n<a href=\"https://i.stack.imgur.com/hdDsK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hdDsK.png\" alt=\"enter image description here\"></a></p>\n\n<p>Game.py:</p>\n\n<p><a href=\"https://i.stack.imgur.com/F2E8F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F2E8F.png\" alt=\"enter image description here\"></a></p>\n\n<p>Otherpy.py - the imported file:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oIied.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oIied.png\" alt=\"enter image description here\"></a></p>\n\n<p>the Nose test script file:</p>\n\n<p><a href=\"https://i.stack.imgur.com/N5fK6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N5fK6.png\" alt=\"enter image description here\"></a></p>\n\n<p>And finally the nosetests importerror:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9BTHR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9BTHR.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "matplotlib", "colorbar"], "comments": [{"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1459402226, "post_id": 36318425, "comment_id": 60272366, "body": "Could you try to make a complete, executable example?"}, {"owner": {"reputation": 304, "user_id": 5049942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b29e6e9f5e9405bf45c0019af63267?s=128&d=identicon&r=PG", "display_name": "mairan", "link": "https://stackoverflow.com/users/5049942/mairan"}, "reply_to_user": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1459423653, "post_id": 36318425, "comment_id": 60286100, "body": "Hi, roadrunner66! The full code has a lot of input data and modules created by me. Thus, I don&#39;t think it would be useful or executable for anyone else but me."}, {"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1459439363, "post_id": 36318425, "comment_id": 60298068, "body": "I understand but sometimes one can create a minimal example that still shows the problem at hand. See <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> for inspiration. If others can&#39;t recreate the problem, it&#39;s very unlikely that they can help."}], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 5049942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b29e6e9f5e9405bf45c0019af63267?s=128&d=identicon&r=PG", "display_name": "mairan", "link": "https://stackoverflow.com/users/5049942/mairan"}, "edited": false, "score": 0, "creation_date": 1459375376, "post_id": 36320169, "comment_id": 60264409, "body": "Thanks, Milor123, but those links are not helpful (I have already checked them out, anyway). I want the tick marks, not the tick labels or title of the color bar."}, {"owner": {"reputation": 512, "user_id": 4941927, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-DuE3ITipXDQ/AAAAAAAAAAI/AAAAAAAAADE/0N-SjjYYn2E/photo.jpg?sz=128", "display_name": "Milor123", "link": "https://stackoverflow.com/users/4941927/milor123"}, "reply_to_user": {"reputation": 304, "user_id": 5049942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b29e6e9f5e9405bf45c0019af63267?s=128&d=identicon&r=PG", "display_name": "mairan", "link": "https://stackoverflow.com/users/5049942/mairan"}, "edited": false, "score": 0, "creation_date": 1459376447, "post_id": 36320169, "comment_id": 60264833, "body": "can you show me a image ? i&#39;m only a programmer i dont understand about it, but may be help you"}, {"owner": {"reputation": 304, "user_id": 5049942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b29e6e9f5e9405bf45c0019af63267?s=128&d=identicon&r=PG", "display_name": "mairan", "link": "https://stackoverflow.com/users/5049942/mairan"}, "edited": false, "score": 0, "creation_date": 1459382438, "post_id": 36320169, "comment_id": 60266894, "body": "Hi, Milor123! The image is linked to the &quot;This image&quot; sentence at the beginning of the post. Just click on it and you&#39;ll see the image."}, {"owner": {"reputation": 512, "user_id": 4941927, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-DuE3ITipXDQ/AAAAAAAAAAI/AAAAAAAAADE/0N-SjjYYn2E/photo.jpg?sz=128", "display_name": "Milor123", "link": "https://stackoverflow.com/users/4941927/milor123"}, "reply_to_user": {"reputation": 304, "user_id": 5049942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b29e6e9f5e9405bf45c0019af63267?s=128&d=identicon&r=PG", "display_name": "mairan", "link": "https://stackoverflow.com/users/5049942/mairan"}, "edited": false, "score": 0, "creation_date": 1459385960, "post_id": 36320169, "comment_id": 60267880, "body": "dude could you copy all your code in pastebin ? i need somthing of your code"}, {"owner": {"reputation": 512, "user_id": 4941927, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-DuE3ITipXDQ/AAAAAAAAAAI/AAAAAAAAADE/0N-SjjYYn2E/photo.jpg?sz=128", "display_name": "Milor123", "link": "https://stackoverflow.com/users/4941927/milor123"}, "reply_to_user": {"reputation": 304, "user_id": 5049942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b29e6e9f5e9405bf45c0019af63267?s=128&d=identicon&r=PG", "display_name": "mairan", "link": "https://stackoverflow.com/users/5049942/mairan"}, "edited": false, "score": 0, "creation_date": 1459387433, "post_id": 36320169, "comment_id": 60268236, "body": "@mairan i&#39;ve update the post, see the second link, i&#39;m not sure but Hope this can help you"}, {"owner": {"reputation": 304, "user_id": 5049942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b29e6e9f5e9405bf45c0019af63267?s=128&d=identicon&r=PG", "display_name": "mairan", "link": "https://stackoverflow.com/users/5049942/mairan"}, "edited": false, "score": 0, "creation_date": 1459423791, "post_id": 36320169, "comment_id": 60286208, "body": "Hi, Milor123! Thanks again, but it&#39;s not about adding patches (that part I&#39;ve already achieved). It&#39;s about the tick marks in the color bar. See the EDIT in my post. There a modified image showing what&#39;s missing in the color bar."}, {"owner": {"reputation": 512, "user_id": 4941927, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-DuE3ITipXDQ/AAAAAAAAAAI/AAAAAAAAADE/0N-SjjYYn2E/photo.jpg?sz=128", "display_name": "Milor123", "link": "https://stackoverflow.com/users/4941927/milor123"}, "reply_to_user": {"reputation": 304, "user_id": 5049942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b29e6e9f5e9405bf45c0019af63267?s=128&d=identicon&r=PG", "display_name": "mairan", "link": "https://stackoverflow.com/users/5049942/mairan"}, "edited": false, "score": 0, "creation_date": 1459443936, "post_id": 36320169, "comment_id": 60301028, "body": "@mairan dude send me your complete code for i try run it and help you."}], "tags": [], "owner": {"reputation": 512, "user_id": 4941927, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-DuE3ITipXDQ/AAAAAAAAAAI/AAAAAAAAADE/0N-SjjYYn2E/photo.jpg?sz=128", "display_name": "Milor123", "link": "https://stackoverflow.com/users/4941927/milor123"}, "is_accepted": false, "score": 0, "last_activity_date": 1459387346, "last_edit_date": 1459387346, "creation_date": 1459373716, "answer_id": 36320169, "question_id": 36318425, "link": "https://stackoverflow.com/questions/36318425/matplotlib-imagegrid-colorbar-not-showing-tick-marks/36320169#36320169", "title": "Matplotlib ImageGrid colorbar not showing tick marks", "body": "<p>searching i've found this </p>\n\n<p><a href=\"https://wcsaxes.readthedocs.org/en/latest/ticks_labels_grid.html#coordinate-objects\" rel=\"nofollow\">https://wcsaxes.readthedocs.org/en/latest/ticks_labels_grid.html#coordinate-objects</a></p>\n\n<p>I think that what you want is it:</p>\n\n<p><a href=\"https://wcsaxes.readthedocs.org/en/latest/overlays.html\" rel=\"nofollow\">https://wcsaxes.readthedocs.org/en/latest/overlays.html</a></p>\n\n<p>good luck dude :3, I'm sorry for not help but i dont understant about this content</p>\n"}], "owner": {"reputation": 304, "user_id": 5049942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8b29e6e9f5e9405bf45c0019af63267?s=128&d=identicon&r=PG", "display_name": "mairan", "link": "https://stackoverflow.com/users/5049942/mairan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 618, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466413891, "creation_date": 1459367516, "last_edit_date": 1466413891, "question_id": 36318425, "link": "https://stackoverflow.com/questions/36318425/matplotlib-imagegrid-colorbar-not-showing-tick-marks", "title": "Matplotlib ImageGrid colorbar not showing tick marks", "body": "<p>This image shows the result of using <code>ImageGrid</code> to create an image with a colorbar:</p>\n\n<p><img src=\"https://i.stack.imgur.com/6crBf.png\" alt=\"\"></p>\n\n<p>The code is as follows.</p>\n\n<pre><code>grid = ImageGrid(fig, 211,\n            nrows_ncols = (1, 1),\n            axes_pad = 0.3,\n            label_mode = \"L\",\n            share_all = False,\n            cbar_location=\"right\",\n            cbar_mode=\"single\",\n            cbar_size=\"7%\",\n            cbar_pad=\"7%\",\n            aspect = True\n            )\n</code></pre>\n\n<p>and the colorbar is added by doing this:</p>\n\n<pre><code>cb = grid.cbar_axes.colorbar(im)\ngrid.cax.set_yticks([-14, -13, -12])\ncb.set_label_text('$\\log_{10}$(Intensity)')\n</code></pre>\n\n<p>However, the colorbar is missing the <strong>tick marks</strong> overlaid on the color scale.</p>\n\n<p>So, my question is: how can I force the colorbar with the <strong>tick marks</strong> on top of the color scale?</p>\n\n<p><strong>EDIT 2:</strong> The blue arrows in <a href=\"https://i.stack.imgur.com/JilAQ.png\" rel=\"nofollow noreferrer\">this new image</a> indicate the result I would like to achieve. However, even in this new image, the tick marks seem to be 'behind' the color scale. I tried and played with <code>zorder</code> but couldn't bring the tick marks forward.</p>\n"}, {"tags": ["python", "stringtokenizer"], "comments": [{"owner": {"reputation": 97521, "user_id": 565635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7b4b3e7c9ac68b7d2c93ad02d0b9c79d?s=128&d=identicon&r=PG", "display_name": "orlp", "link": "https://stackoverflow.com/users/565635/orlp"}, "edited": false, "score": 3, "creation_date": 1459367520, "post_id": 36318387, "comment_id": 60260213, "body": "This is not the particular issue you&#39;re having right now, but you&#39;ll later find out that <code>tokenize.generate_tokens</code> is for Python source code, not C++ source code."}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 2, "creation_date": 1459367637, "post_id": 36318387, "comment_id": 60260286, "body": "Might want to check out <a href=\"http://eli.thegreenplace.net/2011/07/03/parsing-c-in-python-with-clang\" rel=\"nofollow noreferrer\">this link</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1219, "user_id": 4333514, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7213d3f97037113330f793d2aa96efd3?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4333514/denis"}, "edited": false, "score": 0, "creation_date": 1459368702, "post_id": 36318635, "comment_id": 60260881, "body": "It is only going through one line does not tokenize after that."}, {"owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "reply_to_user": {"reputation": 1219, "user_id": 4333514, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7213d3f97037113330f793d2aa96efd3?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4333514/denis"}, "edited": false, "score": 0, "creation_date": 1459368962, "post_id": 36318635, "comment_id": 60261026, "body": "have you consumed generator? <code>list(g)</code> will give you list of tokens. Or you may iterate over them via <code>for token in g:</code> idiom."}, {"owner": {"reputation": 1219, "user_id": 4333514, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7213d3f97037113330f793d2aa96efd3?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4333514/denis"}, "edited": false, "score": 0, "creation_date": 1459369052, "post_id": 36318635, "comment_id": 60261078, "body": "Yes, I did that.It only print this :  #include &lt;iostream&gt;  using namespace std ;"}], "tags": [], "owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "is_accepted": false, "score": 2, "last_activity_date": 1459368430, "last_edit_date": 1459368430, "creation_date": 1459368182, "answer_id": 36318635, "question_id": 36318387, "link": "https://stackoverflow.com/questions/36318387/tokenize-c-program-in-python/36318635#36318635", "title": "tokenize C++ program in python", "body": "<p>Since <code>generate_tokens</code> require callable as input argument, you need to create your custom function.</p>\n\n<blockquote>\n  <p>The <code>generate_tokens()</code> generator requires one argument, <code>readline</code>, which must be a <strong>callable</strong> object which provides the same interface as the readline() method of built-in file objects (see section File Objects). Each call to the function should return one line of input as a string.Alternately, readline may be a callable object that signals completion by raising StopIteration.</p>\n</blockquote>\n\n<p>Easiest way is to create a lambda:</p>\n\n<pre><code>f = open(\"BM1A1.cpp\",\"r\")\ng = tokenize.generate_tokens(lambda: f.readline().strip())\n</code></pre>\n\n<p>Obviously, you'll encounter weird result of parsing, because <code>tokenize</code> module is defined for Python syntax, not C++ syntax.</p>\n"}], "owner": {"reputation": 1219, "user_id": 4333514, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7213d3f97037113330f793d2aa96efd3?s=128&d=identicon&r=PG&f=1", "display_name": "Denis", "link": "https://stackoverflow.com/users/4333514/denis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1459368430, "creation_date": 1459367401, "last_edit_date": 1459367432, "question_id": 36318387, "link": "https://stackoverflow.com/questions/36318387/tokenize-c-program-in-python", "title": "tokenize C++ program in python", "body": "<p>I need to tokenize the C++ file for my project. For that, I am using tokenize.generate_tokens. In each line I get a weird char because of '\\r' and it is parsed as a token. I need to avoid that character to count the token. I am not sure how to do that when I passing the file to tokenize. below is my code I am using:</p>\n\n<pre><code>f = open(\"BM1A1.cpp\",\"r\")\ng = tokenize.generate_tokens(f.readline)\n</code></pre>\n\n<p>I tried strip() but gives give error</p>\n\n<pre><code>g = tokenize.generate_tokens(f.readline.strip())\nerror:\n'builtin_function_or_method' object has no attribute 'strip'\n</code></pre>\n"}]