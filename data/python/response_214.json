[{"tags": ["python", "pandas", "data-cleaning"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1550102140, "post_id": 54681241, "comment_id": 96151345, "body": "<code>df[i] = pd.Series([1,2])</code>. You need to enclose in <code>()</code>. Then again, you can just use <code>df[i] = [1, 2]</code> and not bother constructing the <code>Series</code>"}, {"owner": {"reputation": 139, "user_id": 6567540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981ade24073c2c3afd9a409beb34d008?s=128&d=identicon&r=PG&f=1", "display_name": "mc-sq", "link": "https://stackoverflow.com/users/6567540/mc-sq"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550102991, "post_id": 54681241, "comment_id": 96151608, "body": "@roganjosh - yes you&#39;re right, although that was merely a transcription error."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550103064, "post_id": 54681241, "comment_id": 96151631, "body": "In that case, it&#39;s one you didn&#39;t fix in your edit. It also does exactly what you want, so it&#39;s hard to understand the issue. Also, the error message you posted is consistent with the &quot;transcription error&quot;; you cannot get <code>TypeError: &#39;type&#39; object is not subscriptable</code> if that error wasn&#39;t in your actual code."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550103263, "post_id": 54681241, "comment_id": 96151700, "body": "No, now your code does not throw that error. Your edit has removed the problem. Your question needs to be internally consistent for anyone else that stumbles upon it"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550103703, "post_id": 54681241, "comment_id": 96151818, "body": "I&#39;ve rolled this back. The updated code <i>does not</i> throw the error when you correct the apparent &quot;transcription error&quot;. In fact, all you did was edit the code to be the suggestion in my first comment. This makes the answer meaningless and the question confusing because the issue is not repeatable."}], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1550103038, "last_edit_date": 1550103038, "creation_date": 1550102602, "answer_id": 54681313, "question_id": 54681241, "link": "https://stackoverflow.com/questions/54681241/how-to-create-additional-columns-in-a-pandas-dataframe-inside-a-for-loop/54681313#54681313", "title": "How to create additional columns in a pandas dataframe inside a for loop", "body": "<p>One way of doing that without for loop , <code>assign</code></p>\n\n<pre><code>df=df.assign(**dict.fromkeys(new_columns,[1,2]))\ndf\nOut[84]: \n    name  age  score  col1  col2\n0    Ken    5      1     1     1\n1  Bobby    6      2     2     2\n</code></pre>\n\n<p>Also you do not need <code>Series</code> when creating the new columns</p>\n\n<pre><code>for i in new_columns:\n     df[i] = [1,2]\n\ndf\nOut[86]: \n    name  age  score  col1  col2\n0    Ken    5      1     1     1\n1  Bobby    6      2     2     2\n</code></pre>\n\n<hr>\n\n<p>Notice , Personally not recommend using <code>Series</code> to assign , since <code>pandas</code> is index sensitive , which means when your dataframe index is not from range 0 - n , the assign will fail. For example </p>\n\n<pre><code>df.index=[100,101]\nfor i in new_columns:\n     df[i] = pd.Series([1,2])\n\ndf\nOut[89]: \n      name  age  score  col1  col2\n100    Ken    5      1   NaN   NaN\n101  Bobby    6      2   NaN   NaN\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 6567540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981ade24073c2c3afd9a409beb34d008?s=128&d=identicon&r=PG&f=1", "display_name": "mc-sq", "link": "https://stackoverflow.com/users/6567540/mc-sq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 54681313, "answer_count": 1, "score": -1, "last_activity_date": 1550110942, "creation_date": 1550101996, "last_edit_date": 1550110942, "question_id": 54681241, "link": "https://stackoverflow.com/questions/54681241/how-to-create-additional-columns-in-a-pandas-dataframe-inside-a-for-loop", "title": "How to create additional columns in a pandas dataframe inside a for loop", "body": "<p>I am working with pandas and would like to add columns to my dataframe from a list. Ideally I would like to iterate through my list in a for loop creating a single column in each pass. </p>\n\n<h3>Example:</h3>\n\n<pre><code>import pandas as pd\n\nd = {\n'name':['Ken','Bobby'],\n'age':[5,6],\n'score':[1,2]}\n\ndf = pd.DataFrame(d,columns=['name','age','score'])\n\nnew_columns = ['col1', 'col2']\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre><code>    name    age     score\n    Ken     5       1\n    Bobby   6       2\n</code></pre>\n\n<h3>Desired output:</h3>\n\n<pre><code>    name    age     score   col1     col2\n    Ken     5       1       1        1\n    Bobby   6       2       2        2\n</code></pre>\n\n<h3>Corrected solution:</h3>\n\n<pre><code>for i in new_columns:\n     df[i] = pd.Series([1,2])\n</code></pre>\n\n<h3>Edit:</h3>\n\n<p>I have corrected the code to fix a typo however there is a great additional solution that does not use for loops which I intend to use in the future. </p>\n"}, {"tags": ["python", "pandas", "web-scraping"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1550102152, "post_id": 54681235, "comment_id": 96151350, "body": "Is the response  a valid json?"}, {"owner": {"reputation": 1300, "user_id": 8834780, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4c8a7117094cbd60927cb19e9b4986b2?s=128&d=identicon&r=PG&f=1", "display_name": "user8834780", "link": "https://stackoverflow.com/users/8834780/user8834780"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1550102177, "post_id": 54681235, "comment_id": 96151356, "body": "@DanielMesejo Pasting this in the browser downloads the file to your computer <code>https:&#47;&#47;www.ishares.com&#47;us&#47;products&#47;etf-product-list&#47;1522815&zwnj;&#8203;705927.ajax?fileType&zwnj;&#8203;=json</code>"}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1550102338, "post_id": 54681235, "comment_id": 96151409, "body": "You need a link that generates the json in browser. this is just a link to download the file. I don&#39;t believe it&#39;s returning the json to python, rather just a status code of 200"}, {"owner": {"reputation": 1300, "user_id": 8834780, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4c8a7117094cbd60927cb19e9b4986b2?s=128&d=identicon&r=PG&f=1", "display_name": "user8834780", "link": "https://stackoverflow.com/users/8834780/user8834780"}, "reply_to_user": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1550102477, "post_id": 54681235, "comment_id": 96151450, "body": "@Jaba Do you see a different way to of downloading this file (in whatever format) so that I can load data to dataframe?"}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1550102595, "post_id": 54681235, "comment_id": 96151485, "body": "My simple guess/workaround is to allow it to download then open the file from the <code>Downloads</code> directory"}, {"owner": {"reputation": 1300, "user_id": 8834780, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4c8a7117094cbd60927cb19e9b4986b2?s=128&d=identicon&r=PG&f=1", "display_name": "user8834780", "link": "https://stackoverflow.com/users/8834780/user8834780"}, "reply_to_user": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1550158267, "post_id": 54681235, "comment_id": 96175256, "body": "@Jaba Unfortunately I am trying to incorporate this within a larger process, so manually downloading it would not work for me (if it can be downloaded with Python code that would certainly work! just not sure how)"}], "answers": [{"comments": [{"owner": {"reputation": 1300, "user_id": 8834780, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4c8a7117094cbd60927cb19e9b4986b2?s=128&d=identicon&r=PG&f=1", "display_name": "user8834780", "link": "https://stackoverflow.com/users/8834780/user8834780"}, "edited": false, "score": 0, "creation_date": 1550155399, "post_id": 54681770, "comment_id": 96173374, "body": "Did you try running this? I get a ValueError: No JSON object could be decoded unfortunately"}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1550177315, "post_id": 54681770, "comment_id": 96184542, "body": "That was the exact issue I was trying to workaround. See this link literally downloads the JSON file, it doesn&#39;t return JSON just most likely a status code of 200 saying that the request was made."}, {"owner": {"reputation": 196, "user_id": 11059340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41ee2c3ac357321ec33ef2c950c9912?s=128&d=identicon&r=PG&f=1", "display_name": "Dallas Lindauer", "link": "https://stackoverflow.com/users/11059340/dallas-lindauer"}, "edited": false, "score": 0, "creation_date": 1550191032, "post_id": 54681770, "comment_id": 96188878, "body": "I ran it again and it worked fine for me. I&#39;m using requests 2.21.0 and json 2.0.9"}], "tags": [], "owner": {"reputation": 196, "user_id": 11059340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41ee2c3ac357321ec33ef2c950c9912?s=128&d=identicon&r=PG&f=1", "display_name": "Dallas Lindauer", "link": "https://stackoverflow.com/users/11059340/dallas-lindauer"}, "is_accepted": false, "score": 0, "last_activity_date": 1550106288, "creation_date": 1550106288, "answer_id": 54681770, "question_id": 54681235, "link": "https://stackoverflow.com/questions/54681235/pulling-a-json-from-url-into-a-dataframe-error/54681770#54681770", "title": "Pulling a json from url into a dataframe error", "body": "<p>I'm not sure what the reason is for the error but here's a workaround using the requests library:</p>\n\n<pre><code>import requests\nfrom json import loads\nimport pandas as pd\n\nurl = 'https://www.ishares.com/us/products/etf-product-list/1522815705927.ajax?fileType=json'\njson_dict = loads(requests.get(url).content)\n\n#parse headers\nheaders=[]\nfor header in json_dict['columns']:\n    headers.append(header['name'])\n\ndf = pd.DataFrame(json_dict['data'], columns=headers)\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 1300, "user_id": 8834780, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4c8a7117094cbd60927cb19e9b4986b2?s=128&d=identicon&r=PG&f=1", "display_name": "user8834780", "link": "https://stackoverflow.com/users/8834780/user8834780"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550106288, "creation_date": 1550101941, "last_edit_date": 1550102252, "question_id": 54681235, "link": "https://stackoverflow.com/questions/54681235/pulling-a-json-from-url-into-a-dataframe-error", "title": "Pulling a json from url into a dataframe error", "body": "<p>Looking here <a href=\"https://quant.stackexchange.com/questions/40538/automatically-get-ishares-etf-holdings/40610?noredirect=1#comment63646_40610\">https://quant.stackexchange.com/questions/40538/automatically-get-ishares-etf-holdings/40610?noredirect=1#comment63646_40610</a> it seems like I can point to a url that has a file, in order to pull it into a DataFrame:</p>\n\n<pre><code>import pandas as pd\nurl = 'https://www.ishares.com/us/products/239705/ishares-phlx-semiconductor-etf/1467271812596.ajax?fileType=csv'\ndf = pd.read_csv(url, skiprows=10)    \nprint(df.head())\n</code></pre>\n\n<p>I tried doing the same for a json type file:</p>\n\n<pre><code>import pandas as pd\nurl = 'https://www.ishares.com/us/products/etf-product-list/1522815705927.ajax?fileType=json'\ndf = pd.read_json(url)\nprint(df.head()\n</code></pre>\n\n<p>However, it is throwing a <code>ValueError: Expected object or value</code>. I tried adding <code>lines=True</code> and other variants but no luck.\nHow can I pull this json as a dataframe? </p>\n\n<p>You can see how it actually looks by going to <a href=\"https://www.ishares.com/us/products/etf-product-list\" rel=\"nofollow noreferrer\">https://www.ishares.com/us/products/etf-product-list</a> and clicking \"Download\" (this generates a .xls), or in your browser just typing <a href=\"https://www.ishares.com/us/products/etf-product-list/1522815705927.ajax?fileType=json\" rel=\"nofollow noreferrer\">https://www.ishares.com/us/products/etf-product-list/1522815705927.ajax?fileType=json</a>. The reason I dont pick <code>fileType=csv</code> or <code>xls</code> is because <code>csv</code> returns an unexpected output with lots of JS code, and <code>xls</code> returns HTTP 500 error.</p>\n"}, {"tags": ["python", "multithreading", "jira"], "comments": [{"owner": {"reputation": 473, "user_id": 1838793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uZrN6.png?s=128&g=1", "display_name": "Phoenix87", "link": "https://stackoverflow.com/users/1838793/phoenix87"}, "edited": false, "score": 0, "creation_date": 1550102905, "post_id": 54681213, "comment_id": 96151586, "body": "Presumably, the JIRA object doesn&#39;t channel all the requests through a single connection. Rather it establishes one for each query. You are then hitting a limit set either in JIRA, or more likely on the server, that prevents multiple simultaneous connections from the same host."}], "owner": {"reputation": 11, "user_id": 11059290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5464a08ba826ebdba44149ef1de0f33?s=128&d=identicon&r=PG&f=1", "display_name": "AJ Blair", "link": "https://stackoverflow.com/users/11059290/aj-blair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1550101786, "creation_date": 1550101786, "question_id": 54681213, "link": "https://stackoverflow.com/questions/54681213/threading-with-jira-python-sporadically-results-in-401-error", "title": "Threading with Jira-Python sporadically results in 401 Error", "body": "<p>I am attempting to query and then display a large number of JIRA tickets using Jira-Python.</p>\n\n<p>Rather than querying individual tickets one at a time, I am creating a thread for each ticket I want to get results from, storing all of the results in a list, then after all results are in, displaying the results in a table.</p>\n\n<p>This works fine for queries of less than about 200 tickets, but any amount larger than that and I start to get 401 errors on only some of the threads, while others go through just fine.</p>\n\n<p>I have no problem with login data and getting small lists of tickets to go through.</p>\n\n<p>Here's what I'm doing in the main Thread after login:</p>\n\n<pre><code>jiraTicketLists = self.chunks(self.jiraQueryData, listSize) #Split full list into smaller lists to run in each thread\n\nfor jiraTicketList in jiraTicketLists:\n    t = threading.Thread(target=jiraFunctions.queryJiraTicket, args=(jiraTicketList, self.jiraFieldList, self))\n    t.start()\n</code></pre>\n\n<p>and in the created Thread:</p>\n\n<pre><code>def queryJiraTicket(ticketNumberList, attributeList, parent):\n\n    for ticketNumber in ticketNumberList:\n        try:\n            issue = JIRA.issue(ticketNumber, expand='changelog')\n\n            jiraDict = {}\n\n            for attribute in attributeList:\n                jiraAttr = \"\"\n\n                if attribute == \"Summary\":\n                    jiraAttr = issue.fields.summary\n                elif attribute == \"Description\":\n                    jiraAttr = issue.fields.description\n                elif attribute == \"Assignee\":\n                    try:\n                        jiraAttr = issue.fields.assignee.name\n                    except:\n                        jiraAttr = \"Unassigned\"\n                elif attribute == \"Status\":\n                    jiraAttr = issue.fields.status\n                elif attribute == \"Priority\":\n                    jiraAttr = issue.fields.priority\n                elif attribute == \"Type\":\n                    jiraAttr = issue.fields.issuetype\n                elif attribute == \"Labels\":\n                    jiraAttr = issue.fields.labels\n                elif attribute == \"Comments\":\n                    jiraAttr = [comment[\"body\"] for comment in issue.raw['fields']['comment']['comments']]\n                elif attribute == \"Ticket Number\":\n                    jiraAttr = issue\n                elif attribute == \"Transitions\":\n                    jiraAttr = JIRA.transitions(issue)\n                elif attribute == \"Changelog\":\n                    changelog = issue.changelog\n\n                    historyList = []\n                    for history in changelog.histories:\n                        for item in history.items:\n                            historyList.append(history.created)\n\n                    historyList.sort()\n\n                    jiraAttr = historyList\n\n                jiraDict[attribute] = jiraAttr\n\n            if parent != None:\n                #Update UI with new ticket data\n                parent.ticketList.append(jiraDict)\n                parent.ticketNum = parent.ticketNum + 1\n\n                parent.updateProgressBarSignal.emit()\n\n                if parent.ticketNum == parent.numberOfTickets:\n                    parent.getJiraTicketData()\n\n    except jira.JIRAError as e:\n        print e.status_code, e.text\n</code></pre>\n\n<p>Any idea why I get 401 errors on large lists, but not on small lists? </p>\n"}, {"tags": ["python", "list", "sublist"], "comments": [{"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1550101884, "post_id": 54681210, "comment_id": 96151274, "body": "<code>[x for l in myList for x in l]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "is_accepted": false, "score": 1, "last_activity_date": 1550102855, "last_edit_date": 1550102855, "creation_date": 1550101927, "answer_id": 54681231, "question_id": 54681210, "link": "https://stackoverflow.com/questions/54681210/how-to-remove-all-sublists-from-a-list/54681231#54681231", "title": "How to remove all sublists from a list?", "body": "<p>Use <a href=\"https://docs.python.org/2/library/itertools.html#itertools.chain.from_iterable\" rel=\"nofollow noreferrer\">itertools.chain.from_iterable</a>:</p>\n\n<pre><code>from itertools import chain\n\nmyList = [[1,2,3],[4,5,6],[7,8,9]]\n\nprint(list(chain.from_iterable(myList)))\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n\n<p>without using <code>.from_iterables</code> you can just unpack the list.</p>\n\n<pre><code>print(list(chain(*myList))\n</code></pre>\n\n<p>This does the same thing</p>\n"}], "owner": {"reputation": 123, "user_id": 10426810, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yqM_bvr48s4/AAAAAAAAAAI/AAAAAAAAAAo/Dwzs6jvDXMQ/photo.jpg?sz=128", "display_name": "Arihan Sharma", "link": "https://stackoverflow.com/users/10426810/arihan-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 1, "closed_date": 1550101844, "answer_count": 1, "score": 0, "last_activity_date": 1550102855, "creation_date": 1550101774, "last_edit_date": 1550102432, "question_id": 54681210, "link": "https://stackoverflow.com/questions/54681210/how-to-remove-all-sublists-from-a-list", "closed_reason": "Duplicate", "title": "How to remove all sublists from a list?", "body": "<p>How do I remove all 'sublists' from a list in Python 3 i.e turn a list containing other lists into one giant list?</p>\n\n<p>For example say I have: </p>\n\n<p><code>myList = [[1,2,3],[4,5,6],[7,8,9]]</code></p>\n\n<p>How do I turn this into: </p>\n\n<p><code>[1,2,3,4,5,6,7,8,9]</code>?</p>\n\n<p>Thanks. </p>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 2252, "user_id": 7654215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81374f7e9b250cdaf75cf92b6a6e883f?s=128&d=identicon&r=PG&f=1", "display_name": "seuling", "link": "https://stackoverflow.com/users/7654215/seuling"}, "edited": false, "score": 1, "creation_date": 1550102678, "post_id": 54681167, "comment_id": 96151517, "body": "That&#39;s interesting. There&#39;s check() classmethod in django&#39;s base Model object, but I tried other classmethod like <code>from_db</code> and it works! Wierd"}], "answers": [{"tags": [], "owner": {"reputation": 2252, "user_id": 7654215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81374f7e9b250cdaf75cf92b6a6e883f?s=128&d=identicon&r=PG&f=1", "display_name": "seuling", "link": "https://stackoverflow.com/users/7654215/seuling"}, "is_accepted": false, "score": 0, "last_activity_date": 1550103747, "creation_date": 1550103747, "answer_id": 54681474, "question_id": 54681167, "link": "https://stackoverflow.com/questions/54681167/django-model-field-name-check-raises-systemcheckerror/54681474#54681474", "title": "Django model field name &quot;check&quot; raises SystemCheckError", "body": "<p>I found System check framework in django docs (<a href=\"https://docs.djangoproject.com/en/2.2/ref/checks/#system-check-framework\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.2/ref/checks/#system-check-framework</a>)</p>\n\n<p>Your check field called during django's system checks so raised SystemCheckError.</p>\n\n<p>It occurred in django's <code>Basecommand</code> (<a href=\"https://github.com/django/django/blob/1e87c9fe71703fab23039aa63fafe4f6aac98bbc/django/core/management/base.py#L148\" rel=\"nofollow noreferrer\">https://github.com/django/django/blob/1e87c9fe71703fab23039aa63fafe4f6aac98bbc/django/core/management/base.py#L148</a>)</p>\n\n<pre><code>1. ``django-admin`` or ``manage.py`` loads the command class\n   and calls its ``run_from_argv()`` method.\n2. The ``run_from_argv()`` method calls ``create_parser()`` to get\n   an ``ArgumentParser`` for the arguments, parses them, performs\n   any environment changes requested by options like\n   ``pythonpath``, and then calls the ``execute()`` method,\n   passing the parsed arguments.\n3. The ``execute()`` method attempts to carry out the command by\n   calling the ``handle()`` method with the parsed arguments; any\n   output produced by ``handle()`` will be printed to standard\n   output and, if the command is intended to produce a block of\n   SQL statements, will be wrapped in ``BEGIN`` and ``COMMIT``.\n4. If ``handle()`` or ``execute()`` raised any exception (e.g.\n   ``CommandError``), ``run_from_argv()`` will  instead print an error\n   message to ``stderr``.\n</code></pre>\n"}], "owner": {"reputation": 3799, "user_id": 466011, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b51b021fec2ca6f8eb22c629907ee2a8?s=128&d=identicon&r=PG", "display_name": "epalm", "link": "https://stackoverflow.com/users/466011/epalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1550104630, "creation_date": 1550101508, "last_edit_date": 1550104630, "question_id": 54681167, "link": "https://stackoverflow.com/questions/54681167/django-model-field-name-check-raises-systemcheckerror", "title": "Django model field name &quot;check&quot; raises SystemCheckError", "body": "<p>The <a href=\"https://docs.djangoproject.com/en/1.11/topics/db/models/#field-name-restrictions\" rel=\"nofollow noreferrer\">Django docs</a> state there are only two restrictions on model field names</p>\n\n<ul>\n<li>A field name cannot be a Python reserved word</li>\n<li>A field name cannot contain more than one underscore in a row</li>\n</ul>\n\n<p>However, given the following example, it doesn't look like I can use the field name <code>check</code> as a ForeignKey.</p>\n\n<pre><code>class Check(models.Model):\n\n    name = models.CharField(max_length=100)\n\nclass MyModel(models.Model):\n\n    # this works fine\n    #check = models.BooleanField()\n\n    # this breaks\n    check = models.ForeignKey(Check, on_delete=models.PROTECT, related_name='+')\n</code></pre>\n\n<p>Here's the error:</p>\n\n<pre><code>$ python manage.py check\nSystemCheckError: System check identified some issues:\n\nERRORS:\nmyapp.MyModel: (models.E020) The 'MyModel.check()' class method is currently overridden by &lt;django.db.models.fields.related_descriptors.ForwardManyToOneDescriptor object at 0x03A818D0&gt;\n</code></pre>\n\n<p>Are the docs wrong, or am I doing something wrong?</p>\n\n<p><strong>Edit:</strong> forgot to mention this project is using Python 2 and Django 1.11</p>\n"}, {"tags": ["python", "django", "django-models", "django-views", "django-serializer"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 11036532, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--9kkZ6EAALc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOw3y1K5l6KLujJX_pSAecjp43ijg/mo/photo.jpg?sz=128", "display_name": "Jetmir", "link": "https://stackoverflow.com/users/11036532/jetmir"}, "edited": false, "score": 0, "creation_date": 1550102633, "post_id": 54681283, "comment_id": 96151499, "body": "I still get the same ValueError, in fact i have been trying to debug and for that reason it was still as a parameter in instance.save()"}, {"owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "reply_to_user": {"reputation": 57, "user_id": 11036532, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--9kkZ6EAALc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOw3y1K5l6KLujJX_pSAecjp43ijg/mo/photo.jpg?sz=128", "display_name": "Jetmir", "link": "https://stackoverflow.com/users/11036532/jetmir"}, "edited": false, "score": 0, "creation_date": 1550103380, "post_id": 54681283, "comment_id": 96151736, "body": "Great! You&#39;re welcome. I&#39;ll appreciate you to select my answer"}, {"owner": {"reputation": 57, "user_id": 11036532, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--9kkZ6EAALc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOw3y1K5l6KLujJX_pSAecjp43ijg/mo/photo.jpg?sz=128", "display_name": "Jetmir", "link": "https://stackoverflow.com/users/11036532/jetmir"}, "edited": false, "score": 0, "creation_date": 1550104723, "post_id": 54681283, "comment_id": 96152068, "body": "This solution is working but it is creating a new record in the DB. However, i only need to update the existing entry. Is there a workaround for this"}, {"owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "reply_to_user": {"reputation": 57, "user_id": 11036532, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--9kkZ6EAALc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOw3y1K5l6KLujJX_pSAecjp43ijg/mo/photo.jpg?sz=128", "display_name": "Jetmir", "link": "https://stackoverflow.com/users/11036532/jetmir"}, "edited": false, "score": 0, "creation_date": 1550106649, "post_id": 54681283, "comment_id": 96152530, "body": "Do you mean a new record of <b>PartnerCompany</b>?"}, {"owner": {"reputation": 57, "user_id": 11036532, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--9kkZ6EAALc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOw3y1K5l6KLujJX_pSAecjp43ijg/mo/photo.jpg?sz=128", "display_name": "Jetmir", "link": "https://stackoverflow.com/users/11036532/jetmir"}, "edited": false, "score": 0, "creation_date": 1550107413, "post_id": 54681283, "comment_id": 96152690, "body": "indeed, it adds a complete new record of PartnerCompany in the db. However, for some reason the code above worked for a couple of inserts and now the same ERR shows up that &quot;&quot;PartnerCompany.partner&quot; must be a &quot;Company&quot; instance.&quot;"}, {"owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "reply_to_user": {"reputation": 57, "user_id": 11036532, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--9kkZ6EAALc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOw3y1K5l6KLujJX_pSAecjp43ijg/mo/photo.jpg?sz=128", "display_name": "Jetmir", "link": "https://stackoverflow.com/users/11036532/jetmir"}, "edited": false, "score": 0, "creation_date": 1550108546, "post_id": 54681283, "comment_id": 96152966, "body": "That&#39;s weird. The only explanation that I have, is that you get that error when <code>Company.objects.update(**instance.partner)</code> fails, so you get <code>partner_instance=None</code>, or something like that. There&#39;s no possible way that it works in some cases and in some other it doesn&#39;t"}, {"owner": {"reputation": 57, "user_id": 11036532, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--9kkZ6EAALc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOw3y1K5l6KLujJX_pSAecjp43ijg/mo/photo.jpg?sz=128", "display_name": "Jetmir", "link": "https://stackoverflow.com/users/11036532/jetmir"}, "edited": false, "score": 0, "creation_date": 1550108829, "post_id": 54681283, "comment_id": 96153027, "body": "strange indeed! However, i am using 3rd party package &quot;drf-writable-nested&quot; it solves the problem I am having. Although it still does not patch/update the exisiting record but it ads a complete new record to the db. I will need to add more logic to avoid this. Thanks for the support!"}], "tags": [], "owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "is_accepted": true, "score": 0, "last_activity_date": 1550102857, "last_edit_date": 1550102857, "creation_date": 1550102389, "answer_id": 54681283, "question_id": 54681165, "link": "https://stackoverflow.com/questions/54681165/in-django-drf-i-always-get-the-valueerror-in-my-update-method-in-my-serializer/54681283#54681283", "title": "In Django DRF I always get the ValueError in my update method in my serializer", "body": "<p>You shouldn't send <strong>partner_instance</strong> as a parameter in <code>instance.save()</code>. <strong>instance</strong> already has the new values in <strong>partner</strong>.</p>\n\n<pre><code>def update(self, instance, validated_data):\n    instance.partner = validated_data.get('partner', instance.partner)\n    instance.contact_person = validated_data.get('contact_person', instance.contact_person)\n    partner_instance = Company.objects.update(**instance.partner)\n    instance.partner = partner_instance\n    instance.save()\n    return instance\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 11036532, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--9kkZ6EAALc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOw3y1K5l6KLujJX_pSAecjp43ijg/mo/photo.jpg?sz=128", "display_name": "Jetmir", "link": "https://stackoverflow.com/users/11036532/jetmir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 54681283, "answer_count": 1, "score": 1, "last_activity_date": 1550102857, "creation_date": 1550101493, "question_id": 54681165, "link": "https://stackoverflow.com/questions/54681165/in-django-drf-i-always-get-the-valueerror-in-my-update-method-in-my-serializer", "title": "In Django DRF I always get the ValueError in my update method in my serializer", "body": "<p>I am using Django DRF and I have successfully created the create method in my serializer but somehow the update method doesn't want to work as I want.\nI always get the same ValueError.</p>\n\n<p><strong>My Model:</strong></p>\n\n<pre><code>class User(models.Model):\ngender = models.CharField(max_length=10, choices=GENDER, default='Male')\nfirst_name = models.CharField(max_length=20)\nlast_name = models.CharField(max_length=20)\nposition = models.CharField(max_length=50)\nbirthday = models.DateField(auto_created=False, null=True)\nemail = models.EmailField(max_length=50)\nphone = models.CharField(max_length=15)\npassword = models.CharField(max_length=100, null=True)\n\n\nclass Company(models.Model):\ncompany_name = models.CharField(max_length=50, blank=False)\naddress = models.CharField(max_length=50, blank=False)\nzip = models.IntegerField(blank=False)\ncity = models.CharField(max_length=50, blank=False)\nemail = models.EmailField(max_length=50, blank=False)\n\n\nclass PartnerCompany(models.Model):\npartner = models.ForeignKey(Company, on_delete=models.PROTECT)\ncontact_person = models.ForeignKey(User, on_delete=models.CASCADE)\n</code></pre>\n\n<p><strong>My Serializer</strong></p>\n\n<pre><code>class PartnerCompanySerializer(serializers.ModelSerializer):\npartner = CompanySerializer(many=False)\ncontact_person = ClientUserSerializer(many=False)\n\nclass Meta:\n    model = PartnerCompany\n    fields = '__all__'\n\ndef create(self, validated_data):\n    partner = validated_data.pop('partner')\n    contact_person = validated_data.pop('contact_person')\n    partner_instance = Company.objects.create(**partner)\n    contact_person_instance = User.objects.create(**contact_person)\n    return PartnerCompany.objects.create(partner=partner_instance,\n                                         contact_person=contact_person_instance,\n                                         **validated_data)\n\n\ndef update(self, instance, validated_data):\n    instance.partner = validated_data.get('partner', instance.partner)\n    instance.contact_person = validated_data.get('contact_person', instance.contact_person)\n    partner_instance = Company.objects.update(**instance.partner)\n    instance.save(partner_instance)\n    return instance\n</code></pre>\n\n<p>My View:</p>\n\n<pre><code>class PartnerCompanyUpdateByID(generics.RetrieveUpdateAPIView):\nlookup_field = 'id'\nqueryset = PartnerCompany.objects.all()\nserializer_class = PartnerCompanySerializer\n</code></pre>\n\n<p>I always get this ValueError:</p>\n\n<blockquote>\n  <p>ValueError at /partner/update/id/6\n  Cannot assign \"OrderedDict([('company_name', 'UBS Switzerland'), ('address', 'Mainstreet 1'), ('zip', 4102), ('city', 'Basel'), ('email', 'ubs@ubs.ch')])\": \"PartnerCompany.partner\" must be a \"Company\" instance.</p>\n</blockquote>\n"}, {"tags": ["python", "math", "primes", "sieve-of-eratosthenes", "sieve"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1550102125, "post_id": 54681164, "comment_id": 96151343, "body": "You can find the Objective C source code on his GitHub website."}, {"owner": {"reputation": 163, "user_id": 9861298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TKWmDdckL6k/AAAAAAAAAAI/AAAAAAAAAAo/TLKUNLFO2yM/photo.jpg?sz=128", "display_name": "Eric Rovell", "link": "https://stackoverflow.com/users/9861298/eric-rovell"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1550102232, "post_id": 54681164, "comment_id": 96151376, "body": "Thanks for an answer! I am quite newbie and can understand only python and js code, unfortunately..."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1550102341, "post_id": 54681164, "comment_id": 96151412, "body": "If you can understand JS, I think you&#39;ll understand the C code, they&#39;re very similar."}, {"owner": {"reputation": 163, "user_id": 9861298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TKWmDdckL6k/AAAAAAAAAAI/AAAAAAAAAAo/TLKUNLFO2yM/photo.jpg?sz=128", "display_name": "Eric Rovell", "link": "https://stackoverflow.com/users/9861298/eric-rovell"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1550275540, "post_id": 54681164, "comment_id": 96222777, "body": "@Barmar You were right. After some time I&#39;ve decided to give it a try and check the given solution. There were some reduntant code in here, but I got the working python solution really fast. After some refactoring I will post it here. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 9861298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TKWmDdckL6k/AAAAAAAAAAI/AAAAAAAAAAo/TLKUNLFO2yM/photo.jpg?sz=128", "display_name": "Eric Rovell", "link": "https://stackoverflow.com/users/9861298/eric-rovell"}, "edited": false, "score": 0, "creation_date": 1550103475, "post_id": 54681350, "comment_id": 96151764, "body": "Thanks a lot! I will need some time to consume this code :) I really want to understand the implementation of this non-multiples of 2;3 idea."}], "tags": [], "owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "is_accepted": true, "score": 0, "last_activity_date": 1550103194, "last_edit_date": 1550103194, "creation_date": 1550102848, "answer_id": 54681350, "question_id": 54681164, "link": "https://stackoverflow.com/questions/54681164/sieve-of-eratosthenes-without-multiples-of-2-and-3/54681350#54681350", "title": "Sieve of Eratosthenes without multiples of 2 and 3", "body": "<p>If you understand numpy as well as Python, look at this implementation of <code>primesfrom2to</code>, taken from <a href=\"https://stackoverflow.com/questions/2068372/fastest-way-to-list-all-primes-below-n/2068548#2068548\">this answer in StackOverflow</a>.</p>\n\n<pre><code>def primesfrom2to(n):\n    # https://stackoverflow.com/questions/2068372/fastest-way-to-list-all-primes-below-n-in-python/3035188#3035188\n    \"\"\" Input n&gt;=6, Returns a array of primes, 2 &lt;= p &lt; n \"\"\"\n    sieve = np.ones(n/3 + (n%6==2), dtype=np.bool)\n    sieve[0] = False\n    for i in xrange(int(n**0.5)/3+1):\n        if sieve[i]:\n            k=3*i+1|1\n            sieve[      ((k*k)/3)      ::2*k] = False\n            sieve[(k*k+4*k-2*k*(i&amp;1))/3::2*k] = False\n    return np.r_[2,3,((3*np.nonzero(sieve)[0]+1)|1)]\n</code></pre>\n\n<p>In that answer I linked to, this routine was the fastest in building a list of primes. I use a variation of it in my own code exploring primes. Explaining this in detail would take much space, but it builds a <code>sieve</code> which leaves out multiples of 2 and of 3. Just two lines of code (the ones starting <code>sieve[</code> and ending <code>= False</code>) mark out multiples of a newly-found prime. I think this is what you mean by \"jumps... after getting prime\". The code is tricky but is work studying. The code is for Python 2, legacy Python.</p>\n\n<p>Here is some of my own Python 3 code that has more comments. You can use it for comparison.</p>\n\n<pre><code>def primesieve3rd(n):\n    \"\"\"Return 'a third of a prime sieve' for values less than n that\n    are in the form 6k-1 or 6k+1.\n\n    RETURN: A numpy boolean array. A True value means the associated\n            number is prime; False means 1 or composite.\n\n    NOTES:  1.  If j is in that form then the index for its primality\n                test is j // 3.\n            2.  The numbers 2 and 3 are not handled in the sieve.\n            3.  This code is based on primesfrom2to in\n                &lt;https://stackoverflow.com/questions/2068372/\n                fastest-way-to-list-all-primes-below-n-in-python/\n                3035188#3035188&gt;\n    \"\"\"\n    if n &lt;= 1:  # values returning an empty array\n        return np.ones(0, dtype=np.bool_)\n    sieve = np.ones(n // 3 + (n % 6 == 2), dtype=np.bool_)  # all True\n    sieve[0] = False   # note 1 is not prime\n    for i in range(1, (math.ceil(math.sqrt(n)) + 1) // 3): # sometimes large\n        if sieve[i]:\n            k = 3 * i + 1 | 1  # the associated number for this cell\n            # Mark some of the stored multiples of the number as composite\n            sieve[k * k                 // 3 :: 2 * k] = False\n            # Mark the remaining stored multiples (k times next possible prime)\n            sieve[k * (k + 4 - 2*(i&amp;1)) // 3 :: 2 * k] = False\n    return sieve\n\ndef primesfrom2to(n, sieve=None):\n    \"\"\"Return an array of prime numbers less than n.\n\n    RETURN: A numpty int64 (indices type) array.\n\n    NOTES:  1.  This code is based on primesfrom2to in\n                &lt;https://stackoverflow.com/questions/2068372/\n                fastest-way-to-list-all-primes-below-n-in-python/\n                3035188#3035188&gt;\n    \"\"\"\n    if n &lt;= 5:\n        return np.array([2, 3], dtype=np.intp)[:max(n - 2, 0)]\n    if sieve is None:\n        sieve = primesieve3rd(n)\n    elif n &gt;= 3 * len(sieve) + 1 | 1:  # the next number to note in the sieve\n        raise ValueError('Number out of range of the sieve in '\n                         'primesfrom2to')\n    return np.r_[2, 3, 3 * np.nonzero(sieve)[0] + 1 | 1]\n</code></pre>\n\n<p>Ask me if there is something here you do not understand.</p>\n"}], "owner": {"reputation": 163, "user_id": 9861298, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TKWmDdckL6k/AAAAAAAAAAI/AAAAAAAAAAo/TLKUNLFO2yM/photo.jpg?sz=128", "display_name": "Eric Rovell", "link": "https://stackoverflow.com/users/9861298/eric-rovell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 54681350, "answer_count": 1, "score": 0, "last_activity_date": 1550103194, "creation_date": 1550101492, "last_edit_date": 1550102340, "question_id": 54681164, "link": "https://stackoverflow.com/questions/54681164/sieve-of-eratosthenes-without-multiples-of-2-and-3", "title": "Sieve of Eratosthenes without multiples of 2 and 3", "body": "<p>I am trying to implement the algorithm described in this article <a href=\"https://medium.com/mathematica-stories/faster-sieve-of-eratosthenes-e705ca2156d9\" rel=\"nofollow noreferrer\">Faster Sieve of Eratosthenes</a>. I quite understand the idea but I cannot grasp how exactly could it be implemented via python code.</p>\n\n<p>After some work I found a way to convert indexes from the sieve into numbers itself:</p>\n\n<p><code>number = lambda i: 3 * (i + 2) - 1 - (i + 2) % 2</code></p>\n\n<p>But the main problem is jumps i have to do after getting prime. Article explains it as: </p>\n\n<blockquote>\n  <p>6np \u00b1 p, where p is prime and n - some natural number.</p>\n</blockquote>\n\n<p>Is there a way to describe jumps using index of the last found prime for such an idea?</p>\n\n<p>Thanks in advance.</p>\n\n<p>P.S.\nThere is <a href=\"https://github.com/KTachyon/FastPrimeSieve\" rel=\"nofollow noreferrer\">implementation in Objective-C</a>\nI am quite new to programming and can only understand python and js code.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1550101645, "post_id": 54681158, "comment_id": 96151217, "body": "You aren&#39;t timing the <code>write</code> at all, you&#39;re timing the loop that precedes it. You generate a new <code>start</code> time after the write completed, so the difference between <code>start</code> and <code>elapsed</code> doesn&#39;t include the write at all."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1550101727, "post_id": 54681158, "comment_id": 96151236, "body": "That said, if I squint a bit, and pretend that CPython didn&#39;t optimize <code>&quot; &quot;</code> to be a singleton, I&#39;d think you were testing the performance of the garbage collector, nothing to do with I/O."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 4, "creation_date": 1550101794, "post_id": 54681158, "comment_id": 96151250, "body": "Also, <code>time.time()</code> is looking at the wall-clock, so if something else is using time on your system (or the C library is stopping to flush buffers to disk or who-knows-what-else is happening) it gets confused with the performance of the program you&#39;re intentionally running. See <a href=\"https://www.pythoncentral.io/measure-time-in-python-time-time-vs-time-clock/\" rel=\"nofollow noreferrer\">pythoncentral.io/measure-time-in-python-time-time-vs-time-cl&zwnj;&#8203;ock</a>, and consider using the Python <code>timeit</code> module for microbenchmarking instead of trying to roll it yourself. <code>timeit</code> knows how to use the most accurate available clock, and disables garbage collection to avoid impact on your results."}, {"owner": {"reputation": 28441, "user_id": 27305, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/174ac998689321daaa7cfecf910522e4?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/27305/john"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1550102104, "post_id": 54681158, "comment_id": 96151332, "body": "Thanks Charles, you are correct that I&#39;m trying to time the for loop.  It&#39;s because in the for loop, I&#39;m actually trying to log how long it takes to read 10000 analog values from my MCP3008 chip connected to a raspberry pi.  But the logs showing the ascending values of elapsed time didn&#39;t make sense to me."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1550102388, "post_id": 54681158, "comment_id": 96151425, "body": "Short form is that this is a fact-intensive investigation, with no easy generic-to-all-Python-runtimes answer. Heck, on embedded hardware, it&#39;s possible to overheat and cause the clock to throttle back."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1550102460, "post_id": 54681158, "comment_id": 96151448, "body": "...that said, you might also print <code>start</code> as well as the current <code>time.time()</code>, just as a sanity check. If that <i>weren&#39;t</i> being updated in the real implementation, it&#39;s an easy answer."}, {"owner": {"reputation": 28441, "user_id": 27305, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/174ac998689321daaa7cfecf910522e4?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/27305/john"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1550103028, "post_id": 54681158, "comment_id": 96151620, "body": "That is so weird..I restarted my raspberry pi, and now I&#39;m seeing a reasonable series of 0.005. And when I replace <code>blah = &quot; &quot;</code> with the code that reads values from MCP3008, I&#39;m also getting sensible numbers now...."}], "owner": {"reputation": 28441, "user_id": 27305, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/174ac998689321daaa7cfecf910522e4?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/27305/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550102544, "creation_date": 1550101437, "last_edit_date": 1550102544, "question_id": 54681158, "link": "https://stackoverflow.com/questions/54681158/why-does-script-execution-time-increase-over-time-when-using-file-write", "title": "Why does script execution time increase over time when using file.write()?", "body": "<p>I'm trying python for the first time.  I wrote this script below:</p>\n\n<pre><code># Importing modules\nimport time\n\nbuffersize = 10000\nf = open(time.strftime(\"%M-%S.raw\", time.gmtime()),\"w\")\n\ntry:\n  while True:\n    start = time.time()\n    for x in xrange(0,buffersize):\n      blah = \" \"\n    elapsed = time.time() - start\n    f.write(str(elapsed)+\"\\r\\n\")\nexcept KeyboardInterrupt:\n  f.close()\n</code></pre>\n\n<p>When I inspect the raw file after running this script, I noticed that the <code>elapsed</code> variable increases as the script runs on.  Here's an example sequence of values:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>4.79221343994e-05\n0.916402101517\n0.980934858322\n1.05616092682\n1.15645098686\n1.30846095085\n1.54870700836\n1.87860512733\n2.74350309372\n4.1800429821\n4.71334385872\n5.24211788177\n5.8994808197\n</code></pre>\n\n<p>I was expecting the script to only generate a list of values that reflect a few hundred milliseconds, give or take 100 milliseconds, instead of an ascending list of values.</p>\n\n<p>Is this because the file object is storing data in memory which slows down the script over time?  I'm supposed to flush the memory in some way to reduce execution time?  Or am I misunderstanding something?</p>\n\n<p>NOTE:\nThe reason I'm trying to time the for loop is because in another script of mine, I actually have the line <code>blah = \" \"</code> replaced by some code that tries\nto fetch values from my MCP3008 chip on a raspberry pi.  The list of ascending values wasn't what I expected.  So I started trimming down my code to what you see above to see what's going on.</p>\n"}, {"tags": ["javascript", "python", "selenium"], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 3077225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c0a6bac576919fafd776a264d69ea6?s=128&d=identicon&r=PG", "display_name": "Robin", "link": "https://stackoverflow.com/users/3077225/robin"}, "is_accepted": false, "score": 1, "last_activity_date": 1597644342, "creation_date": 1597644342, "answer_id": 63445385, "question_id": 54681137, "link": "https://stackoverflow.com/questions/54681137/wait-for-network-to-be-idle-with-selenium-webdriver/63445385#63445385", "title": "Wait for network to be idle with selenium webdriver?", "body": "<p>So I see 2 questions in this question:</p>\n<ol>\n<li>Does Selenium have a way to monitor all web based API calls ? I haven't seen that in any of the Selenium implementations till 3.x.x</li>\n<li>Can we implement such a method - Yes. We can increment a counter for every request triggered and decrease it for every request fulfilled, only moving forward with the test script, once the counter is zero. I can envision this being implemented through Chrome Dev protocols (Selenium 4+ ) or a web proxy (browsermob).</li>\n</ol>\n<p>Note 1: Selenium officially recommends using fluent waits or explicit waits for such issues.</p>\n<p>Note 2: I've seen some crude and abstract implementations of waiting for the document ready state as :</p>\n<pre><code>public void waitForPagetoLoad() throws InterruptedException {\n    long millis = 1000;\n    Thread.sleep(millis);\n    do {\n        Thread.sleep(millis);\n        millis = millis + 2000;\n    } while (!(((JavascriptExecutor) driver).executeScript(&quot;return document.readyState&quot;).toString()\n            .equals(&quot;complete&quot;)) || millis &lt;= 10000);\n    Reporter.log(&quot;Web page loading is complete in &quot; + (millis / 1000) + &quot;  Seconds&quot;);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 634, "user_id": 2443145, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8b12f477331c1729ec9564d319480971?s=128&d=identicon&r=PG", "display_name": "symon", "link": "https://stackoverflow.com/users/2443145/symon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1597644342, "creation_date": 1550101263, "question_id": 54681137, "link": "https://stackoverflow.com/questions/54681137/wait-for-network-to-be-idle-with-selenium-webdriver", "title": "Wait for network to be idle with selenium webdriver?", "body": "<p>Puppeteer has capabilities to wait for network being completely idle,  is it possible to achieve the same explicit waiting using python selenium web driver or directly using some javascript work arounds by executing some javascript from the driver context?</p>\n\n<p>waiting for jQuery.active / page ready state etc is common practice, but <em>could</em> it be done that we can query the pending requests and wait until the network is completely idle?</p>\n"}, {"tags": ["python", "opencv", "image-processing", "computer-vision", "image-segmentation"], "comments": [{"owner": {"reputation": 1574, "user_id": 10911905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464f9d95f48b6f1d2ab156181e59c05a?s=128&d=identicon&r=PG&f=1", "display_name": "Nuzhny", "link": "https://stackoverflow.com/users/10911905/nuzhny"}, "edited": false, "score": 1, "creation_date": 1550113683, "post_id": 54681136, "comment_id": 96154052, "body": "Try to use grabCut. It will be fine for your case"}, {"owner": {"reputation": 418, "user_id": 8524686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05bb0da637b04db676e66a84ee7788ea?s=128&d=identicon&r=PG&f=1", "display_name": "NoviceCoder", "link": "https://stackoverflow.com/users/8524686/novicecoder"}, "reply_to_user": {"reputation": 1574, "user_id": 10911905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464f9d95f48b6f1d2ab156181e59c05a?s=128&d=identicon&r=PG&f=1", "display_name": "Nuzhny", "link": "https://stackoverflow.com/users/10911905/nuzhny"}, "edited": false, "score": 0, "creation_date": 1550118072, "post_id": 54681136, "comment_id": 96154962, "body": "GrabCut was a good suggestion, but the application of my program won&#39;t involve any user interface. The bounding box is placed statically as a place holder for later object recognition. Applying GrabCut gives makes it harder for the rest of my code to identify edges."}], "answers": [{"comments": [{"owner": {"reputation": 418, "user_id": 8524686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05bb0da637b04db676e66a84ee7788ea?s=128&d=identicon&r=PG&f=1", "display_name": "NoviceCoder", "link": "https://stackoverflow.com/users/8524686/novicecoder"}, "edited": false, "score": 0, "creation_date": 1550184865, "post_id": 54684294, "comment_id": 96187460, "body": "I&#39;m trying to get the contour that surrounds the object within my preset bounding box not the contour of the bounding box. I&#39;m interested in separating my foreground object from the background."}, {"owner": {"reputation": 2310, "user_id": 8743494, "user_type": "registered", "profile_image": "https://graph.facebook.com/1496264937094173/picture?type=large", "display_name": "Ha Bom", "link": "https://stackoverflow.com/users/8743494/ha-bom"}, "reply_to_user": {"reputation": 418, "user_id": 8524686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05bb0da637b04db676e66a84ee7788ea?s=128&d=identicon&r=PG&f=1", "display_name": "NoviceCoder", "link": "https://stackoverflow.com/users/8524686/novicecoder"}, "edited": false, "score": 0, "creation_date": 1550194693, "post_id": 54684294, "comment_id": 96189615, "body": "I&#39;ve edited the answer. You can simply use the erode image as a mask to separate foreground"}, {"owner": {"reputation": 418, "user_id": 8524686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05bb0da637b04db676e66a84ee7788ea?s=128&d=identicon&r=PG&f=1", "display_name": "NoviceCoder", "link": "https://stackoverflow.com/users/8524686/novicecoder"}, "edited": false, "score": 0, "creation_date": 1550277979, "post_id": 54684294, "comment_id": 96223204, "body": "I think you misunderstand I&#39;m trying to identify the metal object in the image with the blue handle. My current results are that of the watershed algorithm, which implements eroding and dilation."}], "tags": [], "owner": {"reputation": 2310, "user_id": 8743494, "user_type": "registered", "profile_image": "https://graph.facebook.com/1496264937094173/picture?type=large", "display_name": "Ha Bom", "link": "https://stackoverflow.com/users/8743494/ha-bom"}, "is_accepted": false, "score": 0, "last_activity_date": 1550194640, "last_edit_date": 1550194640, "creation_date": 1550125187, "answer_id": 54684294, "question_id": 54681136, "link": "https://stackoverflow.com/questions/54681136/improve-image-segmentation-to-create-a-closed-contour-surrounding-my-object/54684294#54684294", "title": "Improve image segmentation to create a closed contour surrounding my object", "body": "<p>How about dilate then erode before find contours:</p>\n\n<pre><code>element = cv2.getStructuringElement(shape=cv2.MORPH_RECT, ksize=(21, 21))\n\ndilate = cv2.dilate(gray,element,1)\ncv2.imshow(\"dilate\",dilate)\nerode = cv2.erode(dilate,element,1)\n\n#use erode as a mask to extract the object from the original image\nerode = cv2.bitwise_not(erode)\n\nerode = cv2.cvtColor(erode, cv2.COLOR_GRAY2BGR)\n\nres = cv2.add(original,erode)\n</code></pre>\n\n<p>I just show how to apply mask because I don't have the image and object recognition software that you use.</p>\n\n<p><a href=\"https://i.stack.imgur.com/2jY77.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2jY77.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/ANTxf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ANTxf.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/5eWtr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5eWtr.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 418, "user_id": 8524686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05bb0da637b04db676e66a84ee7788ea?s=128&d=identicon&r=PG&f=1", "display_name": "NoviceCoder", "link": "https://stackoverflow.com/users/8524686/novicecoder"}, "is_accepted": true, "score": 2, "last_activity_date": 1551059182, "creation_date": 1551059182, "answer_id": 54858447, "question_id": 54681136, "link": "https://stackoverflow.com/questions/54681136/improve-image-segmentation-to-create-a-closed-contour-surrounding-my-object/54858447#54858447", "title": "Improve image segmentation to create a closed contour surrounding my object", "body": "<p>I was able to get a better contour of my object by switching from color recognition and analysis over the RGB image to edge detection on the depth information from my camera. </p>\n\n<p>Here are the general steps I took to find a better edge map.</p>\n\n<ol>\n<li><p>Save my depth information in an NxMx1 matrice. Where N,M values is the shape of my image's resolution. For a 480,640 image, I had a matrix that was (480,640,1), where each pixel (i,j) stored corresponding depth value for that pixel coordinate.</p></li>\n<li><p>Used a 2D Gaussian kernel to smooth and fill in any missing data in my depth matrix, using astropy's convolve method.</p></li>\n<li><p>Find the gradient of my depth matrix and the corresponding magnitude of each pixel in the gradient.</p></li>\n<li><p>Filter out data based on uniform depth. Where uniform depth would imply a flat object so I found the Gaussian distribution for my magnitudes (from depth gradient) and those that fill within X standard deviations were set to zero. This reduced some additional noise in the image.</p></li>\n<li><p>Then I normalized the values of my magnitude matrix from 0 to 1 so my matrix could be considered a channel 1 image matrix. </p></li>\n</ol>\n\n<p>So since my depth matrix was of the form (480,640,1) and when I found my corresponding gradient matrix which was also (480,640,1) then I scaled the values (:,:,1) to go from 0 to 1. This way I could represent it as grayscale or binary image later on. </p>\n\n<pre><code>def gradient_demo(self, Depth_Mat):\n    \"\"\"\n    Gradient display entire image\n    \"\"\"\n    shape = (Depth_Mat.shape)\n    bounds = ( (0,shape[0]), (0, shape[1]) )\n\n    smooth_depth = self.convolve_smooth_Depth(Depth_Mat, bounds)\n    gradient, magnitudes = self.depth_gradient(smooth_depth, bounds)\n    magnitudes_prime = magnitudes.flatten()\n\n    #hist, bin = np.histogram(magnitudes_prime, 50)  # histogram of entire image\n    mean = np.mean(magnitudes_prime)\n    variance = np.var(magnitudes_prime)\n    sigma = np.sqrt(variance)\n\n    # magnitudes_filtered = magnitudes[(magnitudes &gt; mean - 2 * sigma) &amp; (magnitudes &lt; mean + 2 * sigma)]\n    magnitudes[(magnitudes &gt; mean - 1.5 * sigma) &amp; (magnitudes &lt; mean + 1.5 * sigma)] = 0\n\n    magnitudes = 255*magnitudes/(np.max(magnitudes))\n    magnitudes[magnitudes != 0] = 1\n\n    plt.title('magnitude of gradients')\n    plt.imshow(magnitudes, vmin=np.nanmin(magnitudes), vmax=np.amax(magnitudes), cmap = 'gray')\n    plt.show()\n\n    return  magnitudes.astype(np.uint8)\ndef convolve_smooth_Depth(self, raw_depth_mtx, bounds):\n    \"\"\"\n    Iterate over subimage and fill in any np.nan values with averages depth values\n    :param image: \n    :param bounds: ((ylow,yhigh), (xlow, xhigh)) -&gt; (y,x)\n    :return: Smooted depth values for a given square\n    \"\"\"\n    ylow, yhigh = bounds[0][0], bounds[0][1]\n    xlow, xhigh = bounds[1][0], bounds[1][1]\n\n    kernel = Gaussian2DKernel(1)    #generate kernel 9x9 with stdev of 1\n    # astropy's convolution replaces the NaN pixels with a kernel-weighted interpolation from their neighbors\n    astropy_conv = convolve(raw_depth_mtx[ylow:yhigh, xlow:xhigh], kernel, boundary='extend')\n    # extended boundary assumes original data is extended using a constant extrapolation beyond the boundary\n    smoothedSQ = (np.around(astropy_conv, decimals= 3))\n\n    return smoothedSQ\n\ndef depth_gradient(self, smooth_depth, bounds):\n    \"\"\"\n\n    :param smooth_depth: \n    :param shape: Tuple with y_range and x_range of the image. \n            shape = ((0,480), (0,640)) (y,x) -&gt; (480,640)\n            y_range = shape[0]\n            x_range = shape[1]\n    :return: \n    \"\"\"\n    #shape defines the image array shape. Rows and Cols for an array\n\n    ylow, yhigh = bounds[0][0], bounds[0][1]\n    xlow, xhigh = bounds[1][0], bounds[1][1]\n    gradient = np.gradient(smooth_depth)\n    x,y = range(xlow, xhigh), range(ylow, yhigh)\n    xi, yi = np.meshgrid(x, y)\n    magnitudes = np.sqrt(gradient[0] ** 2 + gradient[1] ** 2)\n\n    return gradient, magnitudes\n</code></pre>\n\n<p>Using this method/code I was able to get the following image. Just FYI I changed the scene a little bit. </p>\n\n<p><a href=\"https://i.stack.imgur.com/vTGYO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vTGYO.png\" alt=\"enter image description here\"></a></p>\n\n<p>I asked another related question here: <a href=\"https://stackoverflow.com/questions/54849567/how-to-identify-contours-associated-with-my-objects-and-find-their-geometric-cen\">How to identify contours associated with my objects and find their geometric centroid</a></p>\n\n<p>That shows how to find contours, centroids of my object in the image.</p>\n"}], "owner": {"reputation": 418, "user_id": 8524686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05bb0da637b04db676e66a84ee7788ea?s=128&d=identicon&r=PG&f=1", "display_name": "NoviceCoder", "link": "https://stackoverflow.com/users/8524686/novicecoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 1, "accepted_answer_id": 54858447, "answer_count": 2, "score": 2, "last_activity_date": 1551059182, "creation_date": 1550101259, "last_edit_date": 1550118397, "question_id": 54681136, "link": "https://stackoverflow.com/questions/54681136/improve-image-segmentation-to-create-a-closed-contour-surrounding-my-object", "title": "Improve image segmentation to create a closed contour surrounding my object", "body": "<p>This is the picture of my scene taken from an Intel Realsense d435 rgb camera.\n<a href=\"https://i.stack.imgur.com/faCnu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/faCnu.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want to be able to identify the metal object in my image and draw a closed contour around it. This way I can reference all the pixels within the contour for future use. </p>\n\n<p><strong>Current Methodology</strong></p>\n\n<ol>\n<li>Currently, I'm cropping the scene image pretending I have some object recognition software running allowing me to create a bounding box around my object. So I crop that section and apply it over a blank image.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/sMIO5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sMIO5.png\" alt=\"Cropped Image with threshold applied\"></a></p>\n\n<ol start=\"2\">\n<li>I followed OpenCV documentation and used morphology transforms and the watershed algorithm to segment the image. I end up extracting the sure foreground image and running a canny edge detection and contour detection. However, the lines they return are fairly poor. </li>\n</ol>\n\n<p>2.5.  Currently, I'm just using the sure foreground image and taking all the pixels that are black and saving those as my object, however, <strong>I have these huge white spots inside my sure foreground image that aren't being picked up.</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/WUB4S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WUB4S.png\" alt=\"Sure Foreground image with white spots\"></a>\n<a href=\"https://i.stack.imgur.com/3kCyw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3kCyw.png\" alt=\"Contours of my edges after filtering (bad)\"></a></p>\n\n<p><strong>How can I improve my image segmentation to get a better contour of my image so I can grab all the pixels (most) that are enclosed by my object?</strong></p>\n\n<p>I can add my code if it helps, but it is quite large. </p>\n\n<p><strong>EDIT:</strong>\nI tried the GrabCut Algorithm from a SentDex tutorial however while it can remove some of the backgrounds I the watershed algorithm fails to find an accurate foreground representation afterward.</p>\n\n<p><a href=\"https://i.stack.imgur.com/oFIIM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oFIIM.png\" alt=\"enter image description here\"></a><a href=\"https://i.stack.imgur.com/bU1uz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bU1uz.png\" alt=\"enter image description here\"></a></p>\n\n<p>The image on the left is after GrabCut has been applied and then on the right the GrabCut Algorithm is passed to the watershed algorithm to find the sure foreground.</p>\n"}, {"tags": ["python", "file", "directory", "batch-rename", "renaming"], "comments": [{"owner": {"reputation": 959, "user_id": 1715544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/70bc546c5cb343d7f39d1e1ab1559273?s=128&d=identicon&r=PG", "display_name": "AmagicalFishy", "link": "https://stackoverflow.com/users/1715544/amagicalfishy"}, "edited": false, "score": 0, "creation_date": 1550101166, "post_id": 54681105, "comment_id": 96151068, "body": "Does every file have exactly four numbers followed by an underscore in the beginning? (Also, are you running Linux or Windows?)"}, {"owner": {"reputation": 31, "user_id": 11059282, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wlNpcBcyqDc/AAAAAAAAAAI/AAAAAAAAAGE/nOBJ9zrH5kU/photo.jpg?sz=128", "display_name": "A Mist", "link": "https://stackoverflow.com/users/11059282/a-mist"}, "reply_to_user": {"reputation": 959, "user_id": 1715544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/70bc546c5cb343d7f39d1e1ab1559273?s=128&d=identicon&r=PG", "display_name": "AmagicalFishy", "link": "https://stackoverflow.com/users/1715544/amagicalfishy"}, "edited": false, "score": 0, "creation_date": 1550101447, "post_id": 54681105, "comment_id": 96151152, "body": "yes, all UDIM numbers are 4 digits long.  Linux"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11059282, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wlNpcBcyqDc/AAAAAAAAAAI/AAAAAAAAAGE/nOBJ9zrH5kU/photo.jpg?sz=128", "display_name": "A Mist", "link": "https://stackoverflow.com/users/11059282/a-mist"}, "edited": false, "score": 0, "creation_date": 1550102535, "post_id": 54681177, "comment_id": 96151473, "body": "File &quot;./NamingTool.py&quot;, line 12     num, *tokens = name.split(&#39;_&#39;)          ^ SyntaxError: invalid syntax  getting a syntax error on the *"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 31, "user_id": 11059282, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wlNpcBcyqDc/AAAAAAAAAAI/AAAAAAAAAGE/nOBJ9zrH5kU/photo.jpg?sz=128", "display_name": "A Mist", "link": "https://stackoverflow.com/users/11059282/a-mist"}, "edited": false, "score": 0, "creation_date": 1550104103, "post_id": 54681177, "comment_id": 96151906, "body": "@AMist Repalce the last two lines with: <code>os.rename(f, &#39;&#39;.join(name.partition(&#39;_&#39;)[::-1]) + ext)</code>."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1550105546, "post_id": 54681177, "comment_id": 96152250, "body": "@ekhumoro Good solution that&#39;s compatible with Python 2 indeed. Thanks."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 31, "user_id": 11059282, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wlNpcBcyqDc/AAAAAAAAAAI/AAAAAAAAAGE/nOBJ9zrH5kU/photo.jpg?sz=128", "display_name": "A Mist", "link": "https://stackoverflow.com/users/11059282/a-mist"}, "edited": false, "score": 0, "creation_date": 1550105586, "post_id": 54681177, "comment_id": 96152263, "body": "@AMist That code requires Python 3. I&#39;ve now updated my answer with ekhumoro&#39;s solution, which is compatible with Python 2."}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 2, "last_activity_date": 1550105639, "last_edit_date": 1550105639, "creation_date": 1550101566, "answer_id": 54681177, "question_id": 54681105, "link": "https://stackoverflow.com/questions/54681105/renaming-restructuring-the-layout-of-file-names-in-a-directory/54681177#54681177", "title": "Renaming / Restructuring the layout of file names in a directory", "body": "<p>You can split each file name by underscores and then re-join them with underscores after appending the number to the end of the tokens:</p>\n\n<pre><code>for f in os.listdir(input_path):\n    name, ext = os.path.splitext(f)\n    os.rename(f, ''.join(name.partition('_')[::-1]) + ext)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11059282, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wlNpcBcyqDc/AAAAAAAAAAI/AAAAAAAAAGE/nOBJ9zrH5kU/photo.jpg?sz=128", "display_name": "A Mist", "link": "https://stackoverflow.com/users/11059282/a-mist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 54681177, "answer_count": 1, "score": 1, "last_activity_date": 1550105639, "creation_date": 1550101106, "last_edit_date": 1550102659, "question_id": 54681105, "link": "https://stackoverflow.com/questions/54681105/renaming-restructuring-the-layout-of-file-names-in-a-directory", "title": "Renaming / Restructuring the layout of file names in a directory", "body": "<pre><code>import os\n\ninput_path = raw_input('Input file path here : ')\n\nos.chdir(input_path)\n\n\nfor f in os.listdir(input_path):\n    print f\n</code></pre>\n\n<p>I have \"UDIM\" texture files which are enumerated as such</p>\n\n<p><code>1001_Base_Color.png,\n1002_Base_Color.png,\n1003_Base_Color.png.</code></p>\n\n<p>My goal is to run through each file in the directory and reposition the number at the end of the file. <code>name ---&gt; Base_Color_1001.png</code></p>\n\n<p>Any insight is appreciated !</p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "regex", "pandas"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1550101242, "post_id": 54681095, "comment_id": 96151089, "body": "You probably wanted <code>df[&#39;date&#39;] = df[&#39;text&#39;].str.extract(r&quot;(\\d{2}[&#47;. ](?:\\d{2}|January|Jan)[&#47;. ]\\d{2}(?:\\d{2})?)&quot;)</code>"}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1550101928, "post_id": 54681095, "comment_id": 96151287, "body": "I added a more appropriate pattern below."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 7054084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384c4bd72e9f7b6beb5c0bde8e040441?s=128&d=identicon&r=PG&f=1", "display_name": "user10", "link": "https://stackoverflow.com/users/7054084/user10"}, "edited": false, "score": 0, "creation_date": 1550614378, "post_id": 54681181, "comment_id": 96331429, "body": "How would this be modified to allow for 2 digit dates within the text as well? Such as 02/13, 2/13 etc"}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 157, "user_id": 7054084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384c4bd72e9f7b6beb5c0bde8e040441?s=128&d=identicon&r=PG&f=1", "display_name": "user10", "link": "https://stackoverflow.com/users/7054084/user10"}, "edited": false, "score": 0, "creation_date": 1550614524, "post_id": 54681181, "comment_id": 96331469, "body": "@user10 Add an optional group, see <a href=\"https://regex101.com/r/kTNSbl/3\" rel=\"nofollow noreferrer\">this demo</a>, <code>(?&lt;!\\d)(\\d{1,2}[&#47;. ](?:(?:\\d{1,2}|(?:J(?:an(?:uary)?|u(?:ne?|ly?))|Feb(?:ruary)&zwnj;&#8203;?|Ma(?:r(?:ch)?|y)|A&zwnj;&#8203;(?:pr(?:il)?|ug(?:us&zwnj;&#8203;t)?)|Sep(?:t(?:ember&zwnj;&#8203;)?)?|(?:Nov|Dec)(?:e&zwnj;&#8203;mber)?|Oct(?:ober)?)&zwnj;&#8203;)[&#47;. ])?\\d{2}(?:\\d{2})?)(?!\\d)</code>"}], "tags": [], "owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1550101902, "last_edit_date": 1550101902, "creation_date": 1550101578, "answer_id": 54681181, "question_id": 54681095, "link": "https://stackoverflow.com/questions/54681095/pandas-dataframe-parse-string-column-to-extract-dates-into-new-column/54681181#54681181", "title": "Pandas dataframe parse string column to extract dates into new column", "body": "<p>You may use <code>.str.extract()</code>, use <code>\\d{1,2}</code> to match 1-digit days and months and add the <code>.</code> to the delimiters pattern:</p>\n\n<pre><code>df['date'] = df['text'].str.extract(r\"(\\d{1,2}[/. ](?:\\d{1,2}|January|Jan)[/. ]\\d{2}(?:\\d{2})?)\")\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/kTNSbl/1\" rel=\"nofollow noreferrer\"><strong>regex demo</strong></a>.</p>\n\n<p>Also, note that <code>\\d{2}(?:\\d{2})?</code> matches 2 or 4 digits, and <code>\\d{2,4}</code> matches 2, 3 or 4 digits.</p>\n\n<p>Note that the whole regex pattern is wrapped with a capturing group, it is necessary because <code>.str.extract</code> requires at least one capturing group to work, it will yield just the text captured.</p>\n\n<p>To match the dates not inside other digits, you may add <code>(?&lt;!\\d)</code> at the start and <code>(?!\\d)</code> at the end, it may make the pattern safer.</p>\n\n<p>If you plan to match any English month name you need to expand the pattern a little:</p>\n\n<pre><code>r\"(?&lt;!\\d)(\\d{1,2}[/. ](?:\\d{1,2}|(?:J(?:an(?:uary)?|u(?:ne?|ly?))|Feb(?:ruary)?|Ma(?:r(?:ch)?|y)|A(?:pr(?:il)?|ug(?:ust)?)|Sep(?:t(?:ember)?)?|(?:Nov|Dec)(?:ember)?|Oct(?:ober)?))[/. ]\\d{2}(?:\\d{2})?)(?!\\d)\"\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/kTNSbl/2\" rel=\"nofollow noreferrer\">another regex demo</a>.</p>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>(?&lt;!\\d)</code> - no digit immediately to the left is allowed</li>\n<li><code>(</code> - start of a capturing group</li>\n<li><code>\\d{1,2}</code>  - 1 or 2 digits </li>\n<li><code>[/. ]</code> - space, <code>/</code> or <code>.</code></li>\n<li><code>(?:\\d{1,2}|(?:J(?:an(?:uary)?|u(?:ne?|ly?))|Feb(?:ruary)?|Ma(?:r(?:ch)?|y)|A(?:pr(?:il)?|ug(?:ust)?)|Sep(?:t(?:ember)?)?|(?:Nov|Dec)(?:ember)?|Oct(?:ober)?))</code> - month name, abbreviated or not</li>\n<li><code>[/. ]</code> - space, <code>/</code> or <code>.</code></li>\n<li><code>\\d{2}(?:\\d{2})?</code> - 2 digits followed with an optional sequence of two digits</li>\n<li><code>)</code> - end of the capturing group</li>\n<li><code>(?!\\d)</code> - no digit immediately to the right is allowed</li>\n</ul>\n"}], "owner": {"reputation": 157, "user_id": 7054084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384c4bd72e9f7b6beb5c0bde8e040441?s=128&d=identicon&r=PG&f=1", "display_name": "user10", "link": "https://stackoverflow.com/users/7054084/user10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1253, "favorite_count": 0, "accepted_answer_id": 54681181, "answer_count": 1, "score": 1, "last_activity_date": 1550101902, "creation_date": 1550101045, "question_id": 54681095, "link": "https://stackoverflow.com/questions/54681095/pandas-dataframe-parse-string-column-to-extract-dates-into-new-column", "title": "Pandas dataframe parse string column to extract dates into new column", "body": "<p>I have a dataframe containing a string column:</p>\n\n<blockquote>\n<pre><code>text = ['dasndljaksdhfinwejfiv 12/05/2018'', 'akdhaouiyfbh adv12.03.2019','faytdvi advonalsdnfoaidv 5/9/2019IUAYFNVVKNVAIUEHF']\n</code></pre>\n</blockquote>\n\n<p>I want to extract just the dates from this and add to a new column. </p>\n\n<p>I have tried the following but it just returns the original string value of the column:</p>\n\n<pre><code>df['date'] = df.text.replace({r\"\\d{2}[\\/ ](\\d{2}|January|Jan)[\\/ ]\\d{2,4}\"},regex=True)\n</code></pre>\n\n<p>What's the best way to get around this?</p>\n"}, {"tags": ["python", "raspberry-pi"], "comments": [{"owner": {"reputation": 2228, "user_id": 4902099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XhSjG.jpg?s=128&g=1", "display_name": "hcheung", "link": "https://stackoverflow.com/users/4902099/hcheung"}, "edited": false, "score": 0, "creation_date": 1550102727, "post_id": 54681056, "comment_id": 96151528, "body": "Pygame which is pre-installed in full version or Raspbian has build-in library on handling <a href=\"https://www.pygame.org/docs/ref/joystick.html\" rel=\"nofollow noreferrer\">joystick</a>."}, {"owner": {"reputation": 11, "user_id": 11059185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M1rbY.jpg?s=128&g=1", "display_name": "Landon", "link": "https://stackoverflow.com/users/11059185/landon"}, "reply_to_user": {"reputation": 2228, "user_id": 4902099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XhSjG.jpg?s=128&g=1", "display_name": "hcheung", "link": "https://stackoverflow.com/users/4902099/hcheung"}, "edited": false, "score": 0, "creation_date": 1550354720, "post_id": 54681056, "comment_id": 96239832, "body": "do you know how to call and import the library?"}, {"owner": {"reputation": 11, "user_id": 11059185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M1rbY.jpg?s=128&g=1", "display_name": "Landon", "link": "https://stackoverflow.com/users/11059185/landon"}, "reply_to_user": {"reputation": 2228, "user_id": 4902099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XhSjG.jpg?s=128&g=1", "display_name": "hcheung", "link": "https://stackoverflow.com/users/4902099/hcheung"}, "edited": false, "score": 0, "creation_date": 1550355530, "post_id": 54681056, "comment_id": 96240004, "body": "hcheung, without any other information, that doesn&#39;t help me much"}, {"owner": {"reputation": 2228, "user_id": 4902099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XhSjG.jpg?s=128&g=1", "display_name": "hcheung", "link": "https://stackoverflow.com/users/4902099/hcheung"}, "edited": false, "score": 0, "creation_date": 1550363205, "post_id": 54681056, "comment_id": 96241627, "body": "Well, you can wait for someone to write the code for you, or read and learn. If you care to scroll down the link that I provided, there are sample code there."}], "owner": {"reputation": 11, "user_id": 11059185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M1rbY.jpg?s=128&g=1", "display_name": "Landon", "link": "https://stackoverflow.com/users/11059185/landon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550101792, "creation_date": 1550100745, "question_id": 54681056, "link": "https://stackoverflow.com/questions/54681056/how-to-make-virtual-touch-screen-toggle-stick-joy-stick-in-python", "title": "How to make virtual touch screen toggle stick/joy stick in python", "body": "<p>I am working on a home project about making a controllable floor tank. I am using my RPi 3B+ and a motor driver controller board to get motors moving. I have been using a tightvnc server to connect through the wifi with my phone, however, I plan on moving to an Ad-hoc network. Sure, I could type in a line of code for each direction I wish the motors to turn, but that's inconvenient and ineffective. I have seen people do this before, however, I am not experienced enough to produce this kind of code. I need a program, in which, when I run, opens a virtual touch screen toggle stick in python. Moving this up and down would also need to send those same(or very similar) lines of code. I will display the code I am currently using to run the motors. Thanks.</p>\n\n<p>I have been trying googling and looking on GitHub for this source code, however, no luck so far.</p>\n\n<pre><code>import RPi.GPIO as gpio\nimport time\n\ndef init(): #setup for the gpio pins being used\n    gpio.setmode(gpio.BCM)\n    gpio.setup(17, gpio.OUT)\n    gpio.setup(22, gpio.OUT)\n    gpio.setup(21, gpio.OUT)\n    gpio.setup(20, gpio.OUT)\n\ndef forward(tf):\n    init()\n    gpio.output(22, False) #Low\n    gpio.output(17, True) #High\n    gpio.output(21, False)\n    gpio.output(20, True)\n    time.sleep(tf)\n    gpio.cleanup()\n\ndef reverse(tf):\n    init()\n    gpio.output(22, True) #High\n    gpio.output(17, False) #Low\n    gpio.output(21, True)\n    gpio.output(20, False)\n    time.sleep(tf)\n    gpio.cleanup()\n\ndef alternate(tf):\n    init()\n    gpio.output(22, True) #Clockwise Motor 1\n    gpio.output(17, False) #Counter-Clockwise Motor 1\n    gpio.output(21, False) #Clockwise Motor 2\n    gpio.output(20, True) #Counter-Clockwise Motor 2\n    time.sleep(tf)\n    gpio.cleanup()\n\ndef RunPWM(tf):\n    init()\n    pwm_22 = gpio.PWM(22,100) #setting up PWM for gpio pin 22 &amp; 21 out of 100%\n    pwm_21 = gpio.PWM(21,100)\n\n    pwm_22.start(20) #runs the gpio pins 22 &amp; 21 at a pulse width of 20/100\n    pwm_21.start(20)\n    time.sleep(tf)\n    gpio.cleanup()\n\nprint(\"forward\")\nforward(2)\n\nprint(\"reverse\") \nreverse(2)\n\nprint(\"alternate\")\nalternate(2)\n\nprint(\"PWM\")\nRunPWM(2)\n</code></pre>\n\n<p>This code runs well and is a great way to test to make sure the code is running well and all hardware is in good shape and working. Unless I made a typo retyping this off of my RPi, this always runs flawlessly for testing, however, you cannot control a floor tank with this code using a touch screen toggle stick. If anyone has any ideas of about a different approach I could take, or if someone can make some code that fits this bill, it would be greatly appreciated, thanks!</p>\n"}, {"tags": ["python", "sqlalchemy", "flask-sqlalchemy"], "comments": [{"owner": {"reputation": 6617, "user_id": 3794660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HlWq1.jpg?s=128&g=1", "display_name": "fabio.sussetto", "link": "https://stackoverflow.com/users/3794660/fabio-sussetto"}, "edited": false, "score": 2, "creation_date": 1550101078, "post_id": 54681051, "comment_id": 96151046, "body": "Hi Jay, have you tried the approach suggested here? <a href=\"https://stackoverflow.com/a/25011704/3794660\">stackoverflow.com/a/25011704/3794660</a>"}, {"owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "edited": false, "score": 0, "creation_date": 1550109792, "post_id": 54681051, "comment_id": 96153235, "body": "I would not recommend accessing attributes like <code>item._sa_instance_state</code> since they&#39;are &quot;internal use&quot;, see <a href=\"https://stackoverflow.com/a/1301369/5781248\">stackoverflow.com/a/1301369/5781248</a> ; That mapper attribute is probably something that is not instance specific. If the lazy option for the relationship changed because of joinedload, then all the later queries would be affected which would probably be not so useful."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "edited": false, "score": 0, "creation_date": 1550124002, "post_id": 54681051, "comment_id": 96156453, "body": "Here&#39;re yet another examples of using inspection: <a href=\"https://stackoverflow.com/a/50330608/2681632\">stackoverflow.com/a/50330608/2681632</a>. As @J.J.Hakala points out, don&#39;t go for <code>_sa_instance_state</code> directly, but use the inspection tools provided by SQLA."}, {"owner": {"reputation": 1, "user_id": 7092678, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154337415948110/picture?type=large", "display_name": "Jay Chia", "link": "https://stackoverflow.com/users/7092678/jay-chia"}, "edited": false, "score": 0, "creation_date": 1550169004, "post_id": 54681051, "comment_id": 96181033, "body": "Got it! I&#39;ll make sure to use <code>inspect</code> instead of accessing the private <code>_sa_instance_state</code>.   I have tried using <code>InstanceState.unloaded</code> - am I right to say that if I never access any of the fields in <code>InstanceState.unloaded</code> then I will never be making any N+1 (lazy loading) queries?  Thanks for the comments!"}], "owner": {"reputation": 1, "user_id": 7092678, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154337415948110/picture?type=large", "display_name": "Jay Chia", "link": "https://stackoverflow.com/users/7092678/jay-chia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 229, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550100711, "creation_date": 1550100711, "question_id": 54681051, "link": "https://stackoverflow.com/questions/54681051/accessing-a-sqlalchemy-querys-load-options", "title": "Accessing a SQLAlchemy query&#39;s load options", "body": "<p>I am writing a simple serializer for SQLAlchemy instances into Python dictionaries and am trying to serialize only objects that were eagerly loaded, but excluding objects that were not. More specifically, I am trying to check the load options of a relationship of a SQLAlchemy object retrieved from a query with custom load options. For e.g.</p>\n\n<pre><code>class Item(db.Model):\n    ...\n    field = db.relationship('Field', lazy='raise')\n\nitem = session.query(Item).options([joinedload(Item.field)]).first()\n</code></pre>\n\n<p>Now I expect the Item.field relationship to have a lazy='joined' because I overrode the load options at query time, but when I check in <code>item._sa_instance_state.mapper.relationships.get('field').lazy</code>, it is still a <code>'raise'</code>.</p>\n\n<p>In other words, it seems like SQLAlchemy's query load options is converted into SQL but does not affect the instance's state's load options at all.</p>\n\n<ol>\n<li>I have considered the use of <code>item._sa_instance_state.unloaded</code> as an indicator of whether or not something has been joinloaded. If it was joinloaded, then the field will not be in <code>item._sa_instance_state.unloaded</code>. Is this correct?</li>\n<li>If something has been <code>noload</code>, <code>raiseload</code> or <code>select</code>, would they ever not be in <code>item._sa_instance_state.unloaded</code> before being accessed?</li>\n</ol>\n\n<p>Could someone please enlighten me if there is a better way of detecting the load options of an instance after querying please?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1550100818, "post_id": 54681033, "comment_id": 96150983, "body": "&quot;folder&quot; is a Python string, right?  Does a string have a &#39;.path&#39; method? No.  This is basic Python.  <code>path</code> is also a string.  Show us exactly the file name that you intend to use.  It isn&#39;t clear from your code."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 1, "creation_date": 1550101132, "post_id": 54681033, "comment_id": 96151055, "body": "I think what you want is to pass <code>os.path.join(&quot;folder&quot;, path)</code> as the first argument to <code>loadtxt</code>.  (Add the line <code>import os</code> to the beginning of your code.)"}, {"owner": {"reputation": 75, "user_id": 10311295, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j_0fH6fs0PE/AAAAAAAAAAI/AAAAAAAAABU/vKNttByaq0k/photo.jpg?sz=128", "display_name": "Toufik Khan", "link": "https://stackoverflow.com/users/10311295/toufik-khan"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1550101880, "post_id": 54681033, "comment_id": 96151271, "body": "Of course &quot;folder&quot; is string, in python if there any thing write in double coat is known as string.Thank you for your valuable comment @hpaulj. Bye the way my problem solved now by blewittrb"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1550102068, "post_id": 54681033, "comment_id": 96151321, "body": "In Python, the <code>.</code> syntax marks an attribute; while <code>+</code> is used to join strings."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 10311295, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j_0fH6fs0PE/AAAAAAAAAAI/AAAAAAAAABU/vKNttByaq0k/photo.jpg?sz=128", "display_name": "Toufik Khan", "link": "https://stackoverflow.com/users/10311295/toufik-khan"}, "edited": false, "score": 0, "creation_date": 1550104732, "post_id": 54681083, "comment_id": 96152073, "body": "I got problem again can you help me? from loadtxt() function [0 0 0 0 0] array is generate, As like as for multiple array generate from multiple page when I try to concad them, they turn in to 1d array. but I want &quot;[[0 0 0 0 0 ][0 0 0 0 0 0 0]]&quot; this format.how I do that.Thank you @blewittrb"}, {"owner": {"reputation": 475, "user_id": 7804384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AlDb8.png?s=128&g=1", "display_name": "Rustang", "link": "https://stackoverflow.com/users/7804384/rustang"}, "reply_to_user": {"reputation": 75, "user_id": 10311295, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j_0fH6fs0PE/AAAAAAAAAAI/AAAAAAAAABU/vKNttByaq0k/photo.jpg?sz=128", "display_name": "Toufik Khan", "link": "https://stackoverflow.com/users/10311295/toufik-khan"}, "edited": false, "score": 0, "creation_date": 1550115535, "post_id": 54681083, "comment_id": 96154432, "body": "Hi Toufik, can you comment the contents of the .txt file?"}, {"owner": {"reputation": 75, "user_id": 10311295, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j_0fH6fs0PE/AAAAAAAAAAI/AAAAAAAAABU/vKNttByaq0k/photo.jpg?sz=128", "display_name": "Toufik Khan", "link": "https://stackoverflow.com/users/10311295/toufik-khan"}, "edited": false, "score": 0, "creation_date": 1550149034, "post_id": 54681083, "comment_id": 96169334, "body": "Yes I comment, but now it solved, thanks for asking :)"}], "tags": [], "owner": {"reputation": 475, "user_id": 7804384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AlDb8.png?s=128&g=1", "display_name": "Rustang", "link": "https://stackoverflow.com/users/7804384/rustang"}, "is_accepted": true, "score": 1, "last_activity_date": 1550101565, "last_edit_date": 1550101565, "creation_date": 1550100933, "answer_id": 54681083, "question_id": 54681033, "link": "https://stackoverflow.com/questions/54681033/pass-variable-as-path-in-loadtxt-in-python/54681083#54681083", "title": "Pass variable as path in loadtxt() in python", "body": "<p>Yes you can, however you are approaching it incorrectly. Currently you are attempting to access a property of 'path' as though it is an object.</p>\n\n<p>See below for correct approach:</p>\n\n<pre><code>path = \"\\page_1.txt\"\ninput = np.loadtxt(path, dtype='U', delimiter=',')\n</code></pre>\n\n<p>Also, to address whether you can concat a variable (file name) with a path (folder that file is in), yes this is also possible. </p>\n\n<pre><code>path = \"\\where\\i\\keep\\my\\files\"\nfile = \"\\page_1.txt\"\ninput = np.loadtxt(path+file, dtype='U', delimiter=',')\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 10311295, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j_0fH6fs0PE/AAAAAAAAAAI/AAAAAAAAABU/vKNttByaq0k/photo.jpg?sz=128", "display_name": "Toufik Khan", "link": "https://stackoverflow.com/users/10311295/toufik-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 54681083, "answer_count": 1, "score": 0, "last_activity_date": 1550101565, "creation_date": 1550100588, "question_id": 54681033, "link": "https://stackoverflow.com/questions/54681033/pass-variable-as-path-in-loadtxt-in-python", "title": "Pass variable as path in loadtxt() in python", "body": "<p>Can I pass variable as path or concat the variable; with the path name?</p>\n\n<pre><code>path=\"\\page_1.txt\"\ninput = np.loadtxt(\"folder\".path, dtype='U', delimiter=',')\n</code></pre>\n\n<p>When I try to run this code, then I get following error.</p>\n\n<blockquote>\n  <p>AttributeError: 'str' object has no attribute 'path'</p>\n</blockquote>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "edited": false, "score": 0, "creation_date": 1550100528, "post_id": 54681010, "comment_id": 96150916, "body": "sounds similar to <a href=\"https://stackoverflow.com/questions/36024635/changing-the-tab-sizes-of-a-notebook-widget-in-python-3\" title=\"changing the tab sizes of a notebook widget in python 3\">stackoverflow.com/questions/36024635/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 5565295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e788fe1ea3e0cc64f6495c38c2ef2?s=128&d=identicon&r=PG&f=1", "display_name": "jrixie", "link": "https://stackoverflow.com/users/5565295/jrixie"}, "reply_to_user": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "edited": false, "score": 0, "creation_date": 1550100702, "post_id": 54681010, "comment_id": 96150956, "body": "When I tried to implement that, it changed the tabs rather than the tab buttons"}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1550131323, "post_id": 54681010, "comment_id": 96159473, "body": "<i>&quot;it changed the tabs rather than the tab buttons&quot;</i>: <a href=\"https://stackoverflow.com/posts/54681010/edit\">Edit</a> your Question and explain in detail the difference between <code>tabs</code> and <code>tab buttons</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5565295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e788fe1ea3e0cc64f6495c38c2ef2?s=128&d=identicon&r=PG&f=1", "display_name": "jrixie", "link": "https://stackoverflow.com/users/5565295/jrixie"}, "edited": false, "score": 1, "creation_date": 1550540365, "post_id": 54689467, "comment_id": 96296819, "body": "That worked perfectly. My problem was misunderstanding the difference between TNotebook.Tab and TNotebook in the Style. Thank you for the help!"}], "tags": [], "owner": {"reputation": 2808, "user_id": 8476830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fdkes.png?s=128&g=1", "display_name": "Partho63", "link": "https://stackoverflow.com/users/8476830/partho63"}, "is_accepted": true, "score": 0, "last_activity_date": 1550144101, "creation_date": 1550144101, "answer_id": 54689467, "question_id": 54681010, "link": "https://stackoverflow.com/questions/54681010/increasing-size-of-tab-button-in-tkinter-notebook/54689467#54689467", "title": "Increasing Size of Tab Button in Tkinter Notebook", "body": "<p>Change the style like:</p>\n\n<pre><code>customed_style = ttk.Style()\ncustomed_style.configure('Custom.TNotebook.Tab', padding=[12, 12], font=('Helvetica', 10))\n</code></pre>\n\n<p>Then use this style to your tab like:</p>\n\n<pre><code>tab_control = ttk.Notebook(self.master, style='Custom.TNotebook')\n</code></pre>\n\n<p>Here is a full example:</p>\n\n<pre><code>import tkinter as tk\nfrom tkinter import ttk\n\nclass MainWindow:\n    def __init__(self, master):\n        self.master = master\n        self.master.title(\"Large Tab Example\")\n\n        self.createTabs()\n\n    def createTabs(self):\n        self.tab_control = ttk.Notebook(self.master, style='Custom.TNotebook')\n\n        self.tab_one = ttk.Frame(self.tab_control)\n        self.tab_control.add(self.tab_one, text=\"Tab One\")\n        self.frame_one = ttk.Frame(self.tab_one)\n        self.frame_one.grid(row=0, column=0, padx=16, pady=16, sticky='nesw')\n        self.label_one = ttk.Label(self.frame_one, text=\"Tab One\", font=('Halvetica', 24, 'bold'))\n        self.label_one.grid(row=0, column=0, padx=16, pady=16, sticky='nesw')\n\n        self.tab_two = ttk.Frame(self.tab_control)\n        self.tab_control.add(self.tab_two, text=\"Tab Two\")\n        self.frame_two = ttk.Frame(self.tab_two)\n        self.frame_two.grid(row=0, column=0, padx=16, pady=16, sticky='nesw')\n        self.label_two = ttk.Label(self.frame_two, text=\"Tab Two\", font=('Halvetica', 24, 'bold'))\n        self.label_two.grid(row=0, column=0, padx=16, pady=16, sticky='nesw')\n\n        self.tab_three = ttk.Frame(self.tab_control)\n        self.tab_control.add(self.tab_three, text=\"Tab Three\")\n        self.frame_three = ttk.Frame(self.tab_three)\n        self.frame_three.grid(row=0, column=0, padx=16, pady=16, sticky='nesw')\n        self.label_three = ttk.Label(self.frame_three, text=\"Tab Three\", font=('Halvetica', 24, 'bold'))\n        self.label_three.grid(row=0, column=0, padx=16, pady=16, sticky='nesw')\n\n        self.tab_control.grid(row=0, column=0, sticky='nesw', padx=4, pady=4)\n\ndef main():\n    root = tk.Tk()\n\n    customed_style = ttk.Style()\n    customed_style.configure('Custom.TNotebook.Tab', padding=[12, 12], font=('Helvetica', 10))\n    customed_style.configure('Custom.TNotebook', tabposition='wn')\n\n    app = MainWindow(root)\n    root.mainloop()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5565295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e788fe1ea3e0cc64f6495c38c2ef2?s=128&d=identicon&r=PG&f=1", "display_name": "jrixie", "link": "https://stackoverflow.com/users/5565295/jrixie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 0, "accepted_answer_id": 54689467, "answer_count": 1, "score": 1, "last_activity_date": 1550144101, "creation_date": 1550100419, "question_id": 54681010, "link": "https://stackoverflow.com/questions/54681010/increasing-size-of-tab-button-in-tkinter-notebook", "title": "Increasing Size of Tab Button in Tkinter Notebook", "body": "<p>How can you increase the size of the button used to access the tab?</p>\n\n<p>I've tried adding padding, changing the font size, and editing height/width, but none of these affect the physical size of the button used to switch tabs.</p>\n"}, {"tags": ["python", "matplotlib", "plot", "axis-labels", "polar-coordinates"], "answers": [{"comments": [{"owner": {"reputation": 869, "user_id": 9161344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ldii8.png?s=128&g=1", "display_name": "ascendants", "link": "https://stackoverflow.com/users/9161344/ascendants"}, "edited": false, "score": 0, "creation_date": 1550523333, "post_id": 54681073, "comment_id": 96292041, "body": "This was exactly what I was looking to do. Thank you for explaining and the example! And since you&#39;re adept at MPL -- do you know why only three of the four desired ticks are shown on the sample wedge ?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 869, "user_id": 9161344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ldii8.png?s=128&g=1", "display_name": "ascendants", "link": "https://stackoverflow.com/users/9161344/ascendants"}, "edited": false, "score": 1, "creation_date": 1550525522, "post_id": 54681073, "comment_id": 96292860, "body": "The missing tick is a rounding problem. You may use <code>minTheta = 0.42001</code> or <code>minTheta = 0.41999</code> instead."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 4, "last_activity_date": 1605251031, "last_edit_date": 1605251031, "creation_date": 1550100910, "answer_id": 54681073, "question_id": 54681008, "link": "https://stackoverflow.com/questions/54681008/matplotlib-polar-plotting-displaying-polar-tickmarks-in-degrees-with-decimal-f/54681073#54681073", "title": "Matplotlib polar plotting: displaying polar tickmarks in degrees, with decimal format", "body": "<p>The internal units of the polar plot are radians. The position of the ticks is hence given in radians and those are the numbers you need to format. You can do so using a <code>FuncFormatter</code>.</p>\n<pre><code>rad2fmt = lambda x,pos : f&quot;{np.rad2deg(x):.2f}\u00b0&quot;\nax.xaxis.set_major_formatter(FuncFormatter(rad2fmt))\n</code></pre>\n<p>Complete example would look like:</p>\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nfrom matplotlib.ticker import FuncFormatter\n\nminTheta = 0.42; maxTheta = 0.55\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='polar')\n\n#create four tick labels (in radians) dynamically based on the theta range\nticks = np.linspace(minTheta, maxTheta, 4)\nax.set_xticks(ticks)\n\n#disable or enable the following line to change the tick display format*\nrad2fmt = lambda x,pos : f&quot;{np.rad2deg(x):.2f}\u00b0&quot;\nax.xaxis.set_major_formatter(FuncFormatter(rad2fmt))\n\n#Adjust the sector window: you must call these AFTER setting the ticks, since setting the ticks\n#actually adjusts the theta range window. And it must be in degrees.\nax.set_thetamin(np.rad2deg(minTheta))\nax.set_thetamax(np.rad2deg(maxTheta))\n\nplt.show()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/U1AZb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U1AZb.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": false, "score": 1, "last_activity_date": 1550101800, "creation_date": 1550101800, "answer_id": 54681217, "question_id": 54681008, "link": "https://stackoverflow.com/questions/54681008/matplotlib-polar-plotting-displaying-polar-tickmarks-in-degrees-with-decimal-f/54681217#54681217", "title": "Matplotlib polar plotting: displaying polar tickmarks in degrees, with decimal format", "body": "<p>Alternatively, you can make use of <a href=\"https://matplotlib.org/api/ticker_api.html#matplotlib.ticker.PercentFormatter\" rel=\"nofollow noreferrer\"><code>PercentFormatter</code></a>. Here <code>xmax</code> is the value which corresponds to 100%. As per your conversion to percentages, 100% would correspond to a radian value of <code>np.pi*100/180</code>.</p>\n\n<p>I am highlighting the three added lines of code by a comment <code>#</code></p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib.ticker import PercentFormatter # &lt;---\n\n\nminTheta = 0.42; maxTheta = 0.55\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='polar')\n\nticks = np.linspace(minTheta, maxTheta, 4)\nax.set_xticks(ticks)\n\nax.set_thetamin(np.rad2deg(minTheta))\nax.set_thetamax(np.rad2deg(maxTheta))\n\nxmax = np.pi*100/180 # &lt;---\nax.xaxis.set_major_formatter(PercentFormatter(xmax, decimals=2)) # &lt;---\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/onBmN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/onBmN.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 869, "user_id": 9161344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ldii8.png?s=128&g=1", "display_name": "ascendants", "link": "https://stackoverflow.com/users/9161344/ascendants"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1384, "favorite_count": 1, "accepted_answer_id": 54681073, "answer_count": 2, "score": 3, "last_activity_date": 1605251031, "creation_date": 1550100409, "last_edit_date": 1550101693, "question_id": 54681008, "link": "https://stackoverflow.com/questions/54681008/matplotlib-polar-plotting-displaying-polar-tickmarks-in-degrees-with-decimal-f", "title": "Matplotlib polar plotting: displaying polar tickmarks in degrees, with decimal format", "body": "<p>I am attempting to label the tickmarks on a polar sector plot in Matplotlib in <strong>degrees</strong> following a <strong>specified format</strong> (i.e., a float with two decimal places), but doing both of these is not clearly supported.</p>\n\n<p>I am able to label the tickmarks as degrees <strong>or</strong> with specified decimal places, but not both. Note that Matplotlib defaults to tickmarks in degrees: <a href=\"https://i.stack.imgur.com/eY42W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eY42W.png\" alt=\"\"></a></p>\n\n<p>But after I apply a format to the tickmarks using <code>ax.xaxis.set_major_formatter()</code>, radians are displayed instead: <a href=\"https://i.stack.imgur.com/9f5rB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9f5rB.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I enforce the degree format while also specifying the decimal format?</p>\n\n<p>Note: converting the tickmarks to degrees (e.g., <code>numpy.rad2deg</code>) does not work, since <code>ax.set_xticks()</code> interprets the argument as radians only (and yet, Matplotlib displays them as degrees by default...)</p>\n\n<p>Sample code:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nfrom matplotlib.ticker import FormatStrFormatter\n\nminTheta = 0.42; maxTheta = 0.55\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='polar')\n\n#create four tick labels (in radians) dynamically based on the theta range\nticks = np.linspace(minTheta, maxTheta, 4)\n\nax.set_xticks(ticks)\n\n#disable or enable the following line to change the tick display format*************\nax.xaxis.set_major_formatter(FormatStrFormatter('%.2f'))\n\n#Adjust the sector window: you must call these AFTER setting the ticks, since setting the ticks\n#actually adjusts the theta range window. This must be in degrees.\nax.set_thetamin(np.rad2deg(minTheta))\nax.set_thetamax(np.rad2deg(maxTheta))\n</code></pre>\n"}, {"tags": ["python", "excel", "csv", "web-scraping", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 2, "creation_date": 1550125326, "post_id": 54683276, "comment_id": 96156900, "body": "I would add: To avoid lists, when you expect a single element, use <code>.get()</code> instead of <code>.extract()</code>."}, {"owner": {"reputation": 2270, "user_id": 4082726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/facc0506d0cbf1067dccd342b4cb3e94?s=128&d=identicon&r=PG", "display_name": "malberts", "link": "https://stackoverflow.com/users/4082726/malberts"}, "reply_to_user": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 1, "creation_date": 1550127045, "post_id": 54683276, "comment_id": 96157544, "body": "@Gallaecio I agree that it is clearer to use <code>get()</code>. Initially I had that as part of my answer, but I removed it because I realised the usage in the question is actually not a problem. Here <code>extract()</code> on <code>item</code> (a <code>Selector</code>) returns a single item, versus on a <code>SelectorList</code> where it returns a list."}, {"owner": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 2, "creation_date": 1550128537, "post_id": 54683276, "comment_id": 96158235, "body": "<code>item.extract()</code> returns a string, however <code>item.css(&#39;\u2026&#39;).extract()</code> returns a list."}, {"owner": {"reputation": 25, "user_id": 10993613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4228d9d1653195e5846f2678c5c16aae?s=128&d=identicon&r=PG&f=1", "display_name": "ewha", "link": "https://stackoverflow.com/users/10993613/ewha"}, "edited": false, "score": 0, "creation_date": 1550164139, "post_id": 54683276, "comment_id": 96178861, "body": "Thanks for you answer. I copied your code and tried it, but encountered some problems: If I delete the start_request function then VS Code notifies me of a problem because the yield scrapy.Request(url=url, callback=self.parse is out of a function. If I erase that part the spider doesn&#39;t work. If I leave it and use the yield to write to csv and the command scrapy runspider spidername.py -o output.csv I only get a blank csv file. Do you know why this might be?"}, {"owner": {"reputation": 2270, "user_id": 4082726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/facc0506d0cbf1067dccd342b4cb3e94?s=128&d=identicon&r=PG", "display_name": "malberts", "link": "https://stackoverflow.com/users/4082726/malberts"}, "reply_to_user": {"reputation": 25, "user_id": 10993613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4228d9d1653195e5846f2678c5c16aae?s=128&d=identicon&r=PG&f=1", "display_name": "ewha", "link": "https://stackoverflow.com/users/10993613/ewha"}, "edited": false, "score": 1, "creation_date": 1550164218, "post_id": 54683276, "comment_id": 96178901, "body": "@ewha What problems?"}, {"owner": {"reputation": 25, "user_id": 10993613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4228d9d1653195e5846f2678c5c16aae?s=128&d=identicon&r=PG&f=1", "display_name": "ewha", "link": "https://stackoverflow.com/users/10993613/ewha"}, "edited": false, "score": 0, "creation_date": 1550164351, "post_id": 54683276, "comment_id": 96178977, "body": "Sorry, was editing my comment, didn&#39;t know I cant use enter in comments"}, {"owner": {"reputation": 2270, "user_id": 4082726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/facc0506d0cbf1067dccd342b4cb3e94?s=128&d=identicon&r=PG", "display_name": "malberts", "link": "https://stackoverflow.com/users/4082726/malberts"}, "reply_to_user": {"reputation": 25, "user_id": 10993613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4228d9d1653195e5846f2678c5c16aae?s=128&d=identicon&r=PG&f=1", "display_name": "ewha", "link": "https://stackoverflow.com/users/10993613/ewha"}, "edited": false, "score": 1, "creation_date": 1550164454, "post_id": 54683276, "comment_id": 96179014, "body": "@ewha Can you post the actual VS Code error message? The above code (+import and URLs) runs fine for me."}, {"owner": {"reputation": 25, "user_id": 10993613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4228d9d1653195e5846f2678c5c16aae?s=128&d=identicon&r=PG&f=1", "display_name": "ewha", "link": "https://stackoverflow.com/users/10993613/ewha"}, "edited": false, "score": 0, "creation_date": 1550164783, "post_id": 54683276, "comment_id": 96179165, "body": "I solved that error. Still i get a blank file. In this picture you can see the error displayed in the console for every url: <a href=\"https://imgur.com/QOdb6w4\" rel=\"nofollow noreferrer\">imgur.com/QOdb6w4</a>  I can also upload pictures to show you my code, if it&#39;s necessary."}, {"owner": {"reputation": 2270, "user_id": 4082726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/facc0506d0cbf1067dccd342b4cb3e94?s=128&d=identicon&r=PG", "display_name": "malberts", "link": "https://stackoverflow.com/users/4082726/malberts"}, "edited": false, "score": 1, "creation_date": 1550165166, "post_id": 54683276, "comment_id": 96179377, "body": "Your <code>def parse</code> indentation is wrong. It needs to line up with <code>start_urls</code>. Compare it to my example."}, {"owner": {"reputation": 2270, "user_id": 4082726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/facc0506d0cbf1067dccd342b4cb3e94?s=128&d=identicon&r=PG", "display_name": "malberts", "link": "https://stackoverflow.com/users/4082726/malberts"}, "edited": false, "score": 1, "creation_date": 1550165260, "post_id": 54683276, "comment_id": 96179422, "body": "So what&#39;s happening is the <code>parse</code> function is then not part of the class (rather it is a standalone function), so it considers it missing because it expects it inside the class. (BTW indents are <b>very</b> important in Python. If you get it wrong it changes the meaning of things.)"}, {"owner": {"reputation": 25, "user_id": 10993613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4228d9d1653195e5846f2678c5c16aae?s=128&d=identicon&r=PG&f=1", "display_name": "ewha", "link": "https://stackoverflow.com/users/10993613/ewha"}, "edited": false, "score": 0, "creation_date": 1550165384, "post_id": 54683276, "comment_id": 96179476, "body": "Oh my god WHY???? Why is it always those tiny details? This is hard, but I&#39;m glad I&#39;m learning it. Thank you very much for your help, you&#39;ve been really patient. Cheers!!"}], "tags": [], "owner": {"reputation": 2270, "user_id": 4082726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/facc0506d0cbf1067dccd342b4cb3e94?s=128&d=identicon&r=PG", "display_name": "malberts", "link": "https://stackoverflow.com/users/4082726/malberts"}, "is_accepted": true, "score": 2, "last_activity_date": 1550164509, "last_edit_date": 1550164509, "creation_date": 1550118894, "answer_id": 54683276, "question_id": 54680993, "link": "https://stackoverflow.com/questions/54680993/why-does-my-scrapper-write-only-some-of-the-data-wrong-in-the-csv-file/54683276#54683276", "title": "Why does my scrapper write only some of the data wrong in the csv file?", "body": "<p>Firstly, rather use the <a href=\"https://doc.scrapy.org/en/latest/topics/feed-exports.html\" rel=\"nofollow noreferrer\">built-in CSV feed exporter</a> instead of your own CSV writer method. In other words, <code>yield</code> the item instead and let Scrapy handle the CSV.</p>\n\n<p>And secondly, don't write <em>lists</em> to the CSV. That is why you get <code>[[</code> and <code>[</code> in the output. It is likely also the reason for the extra columns due to unnecessary commas (from the lists) in the output.</p>\n\n<p>Another point is you do not need to implement <code>start_request()</code>. You can just specify your URLs in a <code>start_urls</code> property.</p>\n\n<hr>\n\n<p>Here is an example:</p>\n\n<pre><code>import scrapy\n\nclass QuotesSpider(scrapy.Spider):\n    name = \"final\"\n\n    start_urls = [\n        # ...\n    ]\n\n    def parse(self, response):\n        for item in response.css('div.item-content'):\n            lista_direcc = item.css('p.item-address::text').getall()\n\n            yield {\n                'Empresa': 'Bosch',\n                'Nombres': item.css('p.item-name::text').get(),\n                'Direcci\u00f3n': lista_direcc[0].strip(),\n                'Localidad': lista_direcc[1].strip(),\n                'Tel\u00e9fono': item.css('a.btn-phone.trackingElement.trackingTeaser::text').get(),\n                'Mail': item.css('a.btn-email.trackingElement.trackingTeaser::text').get(),\n                'Sitio Web': item.css('a.btn-website.trackingElement.trackingTeaser::text').get(),\n            }\n</code></pre>\n\n<p>As mentioned by @Gallaecio in the comments below, it is better to use <code>get()</code> instead of <code>extract()</code> when you expect a single item (and it is the preferred usage nowadays). Read more here: <a href=\"https://docs.scrapy.org/en/latest/topics/selectors.html#extract-and-extract-first\" rel=\"nofollow noreferrer\">https://docs.scrapy.org/en/latest/topics/selectors.html#extract-and-extract-first</a></p>\n\n<p>To get the CSV you can run:</p>\n\n<p><code>scrapy runspider spidername.py -o output.csv</code></p>\n"}], "owner": {"reputation": 25, "user_id": 10993613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4228d9d1653195e5846f2678c5c16aae?s=128&d=identicon&r=PG&f=1", "display_name": "ewha", "link": "https://stackoverflow.com/users/10993613/ewha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 54683276, "answer_count": 1, "score": -1, "last_activity_date": 1550164509, "creation_date": 1550100253, "question_id": 54680993, "link": "https://stackoverflow.com/questions/54680993/why-does-my-scrapper-write-only-some-of-the-data-wrong-in-the-csv-file", "title": "Why does my scrapper write only some of the data wrong in the csv file?", "body": "<p>I'm new to all this. I managed to crawl through 3600+ items in a page and extract data such as Name, address, phone, mail. All of which I wrote to a .csv file. </p>\n\n<p>My excitement was cut short when I discovered that some of the distributors had missing information (information that's written in the website, and have been written incorrectly to the .csv. Furthermore, some blank columns (like 'B') were created.</p>\n\n<p>Also, I couldn't find a way for the square brackets and the apostrophes to not be written, but I can easily erase them all with LibreOficce Calc. </p>\n\n<p>(In my code I only pasted a few urls out of 3600+, including the ones in the attached picture that show the problem)</p>\n\n<pre><code>import scrapy\nimport requests\nimport csv\n\n\n\nclass QuotesSpider(scrapy.Spider):\n    name = \"final\"\n\n    def start_requests(self):\n        urls = [\n'https://www.bosch-professional.com/ar/es/dl/localizador-de-distribuidores/localizador-de-distribuidores/distribuidor/boschla01586 /zarate/bodelon-edgardo-aristides/?countrySelectorCode=AR', 'https://www.bosch-professional.com/ar/es/dl/localizador-de-distribuidores/localizador-de-distribuidores/distribuidor/boschla01778/zarate/cesario- mariano-rodrigo/?countrySelectorCode=AR', 'https://www.bosch- professional.com/ar/es/dl/localizador-de-distribuidores/localizador-de-distribuidores/distribuidor/boschla00140/zarate/de-vicenzi-elio-mario-g.-rosana-sh/?countrySelectorCode=AR', 'https://www.bosch-professional.com/ar/es/dl/localizador-de-distribuidores/localizador-de-distribuidores/distribuidor/boschla01941/zarate/de-vincenzi-elio-mario-y-rosana-sh/?countrySelectorCode=AR', 'https://www.bosch-professional.com/ar/es/dl/localizador-de-distribuidores/localizador-de-distribuidores/distribuidor/boschla02168/zarate/ferreterias-indufer-s.a./?countrySelectorCode=AR',\n]\n\n\nfor url in urls:\n        yield scrapy.Request(url=url, callback=self.parse)\n\n\ndef parse(self, response):\n\n    marca = []\n    names = []\n    direcc = []\n    locali = []\n    telef = []\n    mail = []\n    site = []\n\n\n    for item in response.css('div.item-content'):            \n        marca.append('Bosch')\n        names.append(item.css('p.item-name::text').extract())\n\n        lista_direcc = item.css('p.item-address::text').extract()\n        direcc.append(lista_direcc[0].strip())\n        locali.append(lista_direcc[1].strip())\n\n        telef.append(item.css('a.btn-phone.trackingElement.trackingTeaser::text').extract())\n        mail.append(item.css('a.btn-email.trackingElement.trackingTeaser::text').extract())\n        site.append(item.css('a.btn-website.trackingElement.trackingTeaser::text').extract())\n\n\n\n\n\n    with open('base.csv', 'a') as csvFile:\n        fieldnames = ['Empresa', 'Nombres', 'Direcci\u00f3n' , 'Localidad', 'Tel\u00e9fono', 'Mail', 'Sitio Web']\n\n        writer = csv.DictWriter(csvFile, fieldnames=fieldnames)\n        writer.writerow({'Empresa' : marca, 'Nombres' : names, 'Direcci\u00f3n' : direcc, 'Localidad' : locali, 'Tel\u00e9fono' : telef, 'Mail' : mail, 'Sitio Web' : site })\n\n    csvFile.close()\n</code></pre>\n\n<p><img src=\"https://i.imgur.com/NPMk1A4.png\" alt=\"Here you can see part of the problem\"></p>\n\n<p>You can see an example of what I'm talking about. The program created several extra columns and in some cases shifted the data one column to the left. </p>\n\n<p>I assume that the solution to this is quite simple, as all my previous questions have been. But yet it's puzzling me.</p>\n\n<p>So thanks a lot for any help and for tolerating my poor English. Cheers!</p>\n"}, {"tags": ["python", "dictionary", "arguments"], "comments": [{"owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "edited": false, "score": 0, "creation_date": 1550100415, "post_id": 54680992, "comment_id": 96150881, "body": "What about passing the entire dictionary to <code>foo</code>!"}], "answers": [{"comments": [{"owner": {"reputation": 1703, "user_id": 2457243, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fdcb7cbaf9a56755f42881f693fca1c1?s=128&d=identicon&r=PG&f=1", "display_name": "NeutronStar", "link": "https://stackoverflow.com/users/2457243/neutronstar"}, "edited": false, "score": 0, "creation_date": 1550113825, "post_id": 54681011, "comment_id": 96154086, "body": "If the dictionary had keys that didn&#39;t match any of the arguments in the function, would the function just ignore them or would there be an error?"}, {"owner": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "reply_to_user": {"reputation": 1703, "user_id": 2457243, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fdcb7cbaf9a56755f42881f693fca1c1?s=128&d=identicon&r=PG&f=1", "display_name": "NeutronStar", "link": "https://stackoverflow.com/users/2457243/neutronstar"}, "edited": false, "score": 0, "creation_date": 1550157611, "post_id": 54681011, "comment_id": 96174878, "body": "An error, to avoid it: <code>def foo(x,a=&quot;.&quot;,b=2, **rest):</code>"}], "tags": [], "owner": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1550100430, "creation_date": 1550100430, "answer_id": 54681011, "question_id": 54680992, "link": "https://stackoverflow.com/questions/54680992/how-to-fill-in-optional-function-arguments-automatically-with-corresponding-dict/54681011#54681011", "title": "How to fill in optional function arguments automatically with corresponding dictionary values?", "body": "<p><code>foo(x, **param_dict)</code> Should work</p>\n"}], "owner": {"reputation": 1703, "user_id": 2457243, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fdcb7cbaf9a56755f42881f693fca1c1?s=128&d=identicon&r=PG&f=1", "display_name": "NeutronStar", "link": "https://stackoverflow.com/users/2457243/neutronstar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "closed_date": 1550100380, "answer_count": 1, "score": 1, "last_activity_date": 1550100430, "creation_date": 1550100249, "question_id": 54680992, "link": "https://stackoverflow.com/questions/54680992/how-to-fill-in-optional-function-arguments-automatically-with-corresponding-dict", "closed_reason": "Duplicate", "title": "How to fill in optional function arguments automatically with corresponding dictionary values?", "body": "<p>Let's say I have a function in Python:</p>\n\n<pre><code>def foo(x,a=\".\",b=2):\n    ...\n</code></pre>\n\n<p>and I have a dictionary:</p>\n\n<pre><code>param_dict = {'a':'!', 'b':5}\n</code></pre>\n\n<p>How would I be able to communicate the values in <code>param_dict</code> to <code>foo</code>, matching the corresponding dictionary key to the argument name, and do so in an automatic way?  (i.e., not manually writing out <code>foo(x,a=param_dict['a'],b=param_dict['b'])</code>)</p>\n\n<p>Also would like it so that if the corresponding key isn't found in <code>param_dict</code>, the default value of the argument is kept.</p>\n"}, {"tags": ["python", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 7751, "user_id": 182709, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/87f4bc72a8591e804d65446d8d78842f?s=128&d=identicon&r=PG", "display_name": "Alex Grin", "link": "https://stackoverflow.com/users/182709/alex-grin"}, "is_accepted": false, "score": 0, "last_activity_date": 1550108158, "creation_date": 1550108158, "answer_id": 54681990, "question_id": 54680959, "link": "https://stackoverflow.com/questions/54680959/how-can-i-improve-delete-performance-from-an-sqlite-table-with-foreign-keys/54681990#54681990", "title": "How can I improve DELETE performance from an SQLite table with foreign keys?", "body": "<p>From <a href=\"https://www.sqlite.org/foreignkeys.html#fk_indexes\" rel=\"nofollow noreferrer\">the docs</a>:</p>\n\n<blockquote>\n  <p>each time an application deletes a row from the parent table, it performs the equivalent of the following SELECT statement to search for referencing rows in the child table: </p>\n\n<pre><code>SELECT rowid FROM &lt;child-table&gt; WHERE &lt;child-key&gt; = :parent_key_value\n</code></pre>\n  \n  <p>If this SELECT returns any rows at all, then SQLite concludes that deleting the row from the parent table would violate the foreign key constraint and returns an error. Similar queries may be run if the content of the parent key is modified or a new row is inserted into the parent table.</p>\n</blockquote>\n\n<p>With FKs on, it's doing extra work on each delete. I don't think you can avoid this while still retaining the foreign key constraint.</p>\n"}], "owner": {"reputation": 434, "user_id": 376675, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b25d99c4030027a9be346962cf7c5a0d?s=128&d=identicon&r=PG", "display_name": "Lex Berezhny", "link": "https://stackoverflow.com/users/376675/lex-berezhny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1550108158, "creation_date": 1550100076, "question_id": 54680959, "link": "https://stackoverflow.com/questions/54680959/how-can-i-improve-delete-performance-from-an-sqlite-table-with-foreign-keys", "title": "How can I improve DELETE performance from an SQLite table with foreign keys?", "body": "<p>Deleting from a table in SQLite with foreign keys enabled seems very slow. Is there anything that can be done to improve the performance (without disabling the foreign keys)?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import time\nimport sqlite3\n\ndef fk_check(state):\n    conn = sqlite3.connect(\":memory:\")\n    c = conn.cursor()\n    c.execute(\"CREATE TABLE parent (id integer primary key, name)\")\n    c.execute(\"CREATE TABLE child (id integer primary key, parent_id references parent)\")\n    c.execute(\"CREATE INDEX parentindex ON child(parent_id);\")\n\n    c.execute(f\"pragma foreign_keys={state};\")\n\n    for i in range(10000):\n        c.execute(\"insert into parent (name) values (?);\", ('name'+str(i),))\n\n    for i in range(5000, 10000):\n        c.execute(\"insert into child (parent_id) values (?);\", (i,))\n\n    start = time.time()\n    c.execute(\"delete from parent where id &lt; 5000\")\n    took = time.time()-start\n    print(f'fk-{state}: {took}')\n\nfk_check('on')\nfk_check('off')\nfk_check('on')\nfk_check('off')\n</code></pre>\n\n<p>Has the following output:</p>\n\n<pre><code>fk-on: 0.8750052452087402\nfk-off: 0.0007216930389404297\nfk-on: 0.8769822120666504\nfk-off: 0.0007178783416748047\n</code></pre>\n"}, {"tags": ["python", "multithreading", "dictionary"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1550100446, "post_id": 54680954, "comment_id": 96150891, "body": "I don&#39;t think it is. See related <a href=\"https://stackoverflow.com/questions/13610654/how-to-make-built-in-containers-sets-dicts-lists-thread-safe\">How to make built-in containers (sets, dicts, lists) thread safe?</a>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1550103680, "post_id": 54680954, "comment_id": 96151811, "body": "<code>CALL_FUNCTION</code> is basically just a goto that remembers where to come back to. It has nothing to do with the atomicity of the function being called."}, {"owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1550118662, "post_id": 54680954, "comment_id": 96155090, "body": "@chepner so what makes atomicity of a call? People say each bytecode instruction is atomic. I never quite understand all this"}, {"owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "edited": false, "score": 0, "creation_date": 1550123751, "post_id": 54680954, "comment_id": 96156371, "body": "Thread switches occur at (and only at) bytecode boundaries, so anything taking more than one bytecode cannot be atomic without explicit locking.  Individual bytecodes may or may not execute atomically, depending on how they&#39;re implemented.  In your example, all <i>are</i> atomic except for (possibly!) <code>LOAD_ATTR</code> and <code>CALL_FUNCTION</code>.  There is no general principle at work here, only detailed implementation knowledge.  More here:  <a href=\"https://stackoverflow.com/questions/38266186/is-extending-a-python-list-e-g-l-1-guaranteed-to-be-thread-safe/38320815#38320815\" title=\"is extending a python list e g l 1 guaranteed to be thread safe\">stackoverflow.com/questions/38266186/&hellip;</a>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1550148836, "post_id": 54680954, "comment_id": 96169224, "body": "<code>CALL_FUNCTION</code> just <i>starts</i> the call; you still have to consider the byte code (or its implementation in general) <i>of</i> the function itself."}, {"owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "edited": false, "score": 0, "creation_date": 1550202899, "post_id": 54680954, "comment_id": 96191163, "body": "So if the function being called is implemented in C and doesn\u2019t use other python code, it should be atomic, right? Are there major downsides to using locks?"}], "answers": [{"comments": [{"owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "edited": false, "score": 0, "creation_date": 1550101136, "post_id": 54681070, "comment_id": 96151058, "body": "Thanks for the very detailed answer! Yes I&#39;m using CPython and my keys are int/str."}], "tags": [], "owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "is_accepted": true, "score": 8, "last_activity_date": 1550100851, "creation_date": 1550100851, "answer_id": 54681070, "question_id": 54680954, "link": "https://stackoverflow.com/questions/54680954/is-dict-update-thread-safe/54681070#54681070", "title": "Is dict.update() thread-safe?", "body": "<p>If the keys are compositions of builtin hashable types, generally \"yes\", <code>.update()</code> is thread-safe.  In particular, for your example with integers keys, yes.</p>\n\n<p>But <em>in general</em>, no.  Looking up a key in a dict <em>can</em> invoke arbitrary user-defined Python code in user-supplied <code>__hash__()</code> and <code>__eq__()</code> methods, and those can do anything at all - including performing their own mutations on the dicts involved.  As soon as the implementation invokes Python code, other threads can run too, including threads that <em>may</em> be mutating <code>d1</code> and/or <code>d2</code> too.</p>\n\n<p>That's not a potential problem for the builtin hashable types (ints, strings, floats, tuples, ...) - their implementations to compute hash codes and decide equality are purely functional (deterministic and no side effects) and don't release the GIL (global interpreter lock).</p>\n\n<p>That's all about CPython (the C implementation of Python).  The answer may differ under other implementations!  The Language Reference Manual is silent about this.</p>\n"}, {"tags": [], "owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "is_accepted": false, "score": 0, "last_activity_date": 1550101333, "creation_date": 1550101333, "answer_id": 54681147, "question_id": 54680954, "link": "https://stackoverflow.com/questions/54680954/is-dict-update-thread-safe/54681147#54681147", "title": "Is dict.update() thread-safe?", "body": "<p>You could look into <a href=\"https://github.com/sdrees/python-locked_dict\" rel=\"nofollow noreferrer\">locked-dict</a> if you're ok with using an external library.</p>\n\n<p>From their readme:</p>\n\n<blockquote>\n  <p>Dict to allow context managed thread safe and mutable iterations\n  through a lock.</p>\n</blockquote>\n\n<p>For example from their <a href=\"https://github.com/sdrees/python-locked_dict/blob/master/tests/test_locked_dict.py\" rel=\"nofollow noreferrer\">tests</a>:</p>\n\n<p><code>pip install locked-dict</code></p>\n\n<pre><code>import locked_dict\n\nexpected = 0\nd = locked_dict.LockedDict()\nassert len(d) == expected\nassert bool(d) is False\nassert d is not True\nassert hasattr(d, '_lock')\n\nempty_d = {}\nassert d == empty_d\n\nplain_old_d = {999: 'plain old dict', 12345: 54321}\nassert d != plain_old_d\n\nwith d as m:\n    assert len(m) == expected\n    assert bool(m) is False\n    assert m is not True\n    assert hasattr(m, '_lock')\n    assert m != plain_old_d\n    assert m == empty_d\n\n    m[0] = ['foo']\n    expected += 1\n    assert len(m) == expected\n    assert bool(m) is True\n    assert m is not False\n    assert m != plain_old_d\n    assert m != empty_d\n\n    m.clear()\n    expected -= 1\n    assert len(m) == expected\n    assert bool(m) is False\n    assert m is not True\n    assert m != plain_old_d\n    assert m == empty_d\n</code></pre>\n\n<p>Take not this library is 3 years old, although it may still be relevent to your use case</p>\n"}], "owner": {"reputation": 1803, "user_id": 10957844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71bcaa11950c4881a16b908e5e1d333?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10957844/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 0, "accepted_answer_id": 54681070, "answer_count": 2, "score": 2, "last_activity_date": 1550101593, "creation_date": 1550100055, "last_edit_date": 1550101593, "question_id": 54680954, "link": "https://stackoverflow.com/questions/54680954/is-dict-update-thread-safe", "title": "Is dict.update() thread-safe?", "body": "<p>I'm wondering if dict.update() is python thread safe. I've read the related questions, but none of them exactly addresses my question.</p>\n\n<p>My question is very specific and simple. For example, I already have a local dictionary <code>d2</code>. I simply need to update the global dictionary <code>d</code> with <code>d2</code> as shown below. <code>d</code> starts out empty and fills up with different threads. The <code>d2</code> in each thread may have overlapping entries with <code>d</code> (don't think this matters). Is it thread safe?</p>\n\n<pre><code>import dis\n\ndef f(d):\n    d2 = {1:2, 3:4}\n    d.update(d2)\n\nprint(dis.dis(f))\n</code></pre>\n\n<p>The bytecode looks like the following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> 10           0 LOAD_CONST               1 (2)\n              2 LOAD_CONST               2 (4)\n              4 LOAD_CONST               3 ((1, 3))\n              6 BUILD_CONST_KEY_MAP      2\n              8 STORE_FAST               1 (d2)\n\n 11          10 LOAD_FAST                0 (d)\n             12 LOAD_ATTR                0 (update)\n             14 LOAD_FAST                1 (d2)\n             16 CALL_FUNCTION            1\n             18 POP_TOP\n             20 LOAD_CONST               0 (None)\n             22 RETURN_VALUE\n</code></pre>\n\n<p>It looks like <code>16 CALL_FUNCTION</code> is the atomic function that updates the dictionary. So it should be thread safe?</p>\n"}, {"tags": ["python", "sql", "sql-server", "tsql", "count"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1550100242, "post_id": 54680950, "comment_id": 96150830, "body": "You&#39;re using <code>GROUP BY</code> without any aggregation function. So the value of <code>RunningTotal</code> comes from a random row in the group."}, {"owner": {"reputation": 11, "user_id": 10675158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2864bbf941deded9e148679421aa522c?s=128&d=identicon&r=PG&f=1", "display_name": "ThomasG", "link": "https://stackoverflow.com/users/10675158/thomasg"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1550100476, "post_id": 54680950, "comment_id": 96150900, "body": "I probably should have cleaned that section out  as the column i create of RunningTotal isnt helping me at all right now - that part has got a bit messy as I have been trying different things out. The ResetRunningTotal is close to what i want if it would reset the rolling sum (e.g. after line 123)"}, {"owner": {"reputation": 6009, "user_id": 4687355, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ObdEUI7mMYo/AAAAAAAAAAI/AAAAAAAAAgc/fwxal6_6cBA/photo.jpg?sz=128", "display_name": "Sentinel", "link": "https://stackoverflow.com/users/4687355/sentinel"}, "edited": false, "score": 0, "creation_date": 1550101011, "post_id": 54680950, "comment_id": 96151027, "body": "What database? different DBMS engines implement various parts of the SQL language differently especially when it comes to Aggregate and Analytic functions."}, {"owner": {"reputation": 11, "user_id": 10675158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2864bbf941deded9e148679421aa522c?s=128&d=identicon&r=PG&f=1", "display_name": "ThomasG", "link": "https://stackoverflow.com/users/10675158/thomasg"}, "edited": false, "score": 0, "creation_date": 1550101134, "post_id": 54680950, "comment_id": 96151056, "body": "It is in SSMS and would be using T-SQL"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1550101868, "post_id": 54680950, "comment_id": 96151268, "body": "SSMS is mostly irrelevant, it&#39;s just a query tool."}], "answers": [{"tags": [], "owner": {"reputation": 6009, "user_id": 4687355, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ObdEUI7mMYo/AAAAAAAAAAI/AAAAAAAAAgc/fwxal6_6cBA/photo.jpg?sz=128", "display_name": "Sentinel", "link": "https://stackoverflow.com/users/4687355/sentinel"}, "is_accepted": false, "score": 1, "last_activity_date": 1550102124, "last_edit_date": 1550102124, "creation_date": 1550101801, "answer_id": 54681218, "question_id": 54680950, "link": "https://stackoverflow.com/questions/54680950/resetting-a-rolling-sum/54681218#54681218", "title": "Resetting a rolling sum", "body": "<p>Ok so you want running totals for each <code>ArticleNo</code> ordered by <code>DateOfMovement</code> that reset whenever you encounter a <code>TypeOfChange</code> value of 3.</p>\n\n<p>To do this you need to create a grouping_id (<code>Grp</code>) for each running total.  You can do this with a CTE that calculates group ids, then do the running totals with the CTE results:</p>\n\n<pre><code>with Groups as (\nselect st.*\n     , sum(case TypeOfChange when 3 then 1 else 0 end)\n       over (partition by ArticleNo order by DateOfMovement) Grp\n  from Stock_Table st\n)\nselect Groups.*\n     , sum(Quantity) over (partition by ArticleNo, Grp order by DateOfMovement) RunningTotal\n  from Groups\n order by ArticleNo, dateofmovement\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10675158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2864bbf941deded9e148679421aa522c?s=128&d=identicon&r=PG&f=1", "display_name": "ThomasG", "link": "https://stackoverflow.com/users/10675158/thomasg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550103210, "creation_date": 1550100037, "last_edit_date": 1550103210, "question_id": 54680950, "link": "https://stackoverflow.com/questions/54680950/resetting-a-rolling-sum", "title": "Resetting a rolling sum", "body": "<p>I am trying to create a rolling stock count from the quantity. The count should reset everytime there is a real stock count (TypeOfMovement = 3). This should work on each ArticleNo and be grouped by date.</p>\n\n<p>I can get a running stock count (lines &lt;123 in image) and then take the real stock count when TypeOfMovement = 3 (Line 123 of image), but the count doesn't reset, it continues from before the real stock count (ResetRunningTotal in line124 should be 6293). </p>\n\n<p>The solution should run in SSMS. Alternatively a python solution could be run.</p>\n\n<p>My query so far is:</p>\n\n<pre><code>WITH a\nAS\n(SELECT\n        DateOfMovement, Quantity, ArticleNo, TypeOfChange,\n        CASE \n        WHEN TypeOfChange = 3 Then 0\n        ELSE Quantity\n        END AS RunningTotal\n    FROM Stock_Table\n    Group by DateOfMovement, Quantity, ArticleNo, TypeOfChange)\nSELECT\n    *\n    ,CASE\n        WHEN TypeOfChange= 3 THEN Quantity   \n        ELSE Sum(Quantity) OVER(ORDER BY ArticleNo, DateOfMovement)\n    END AS ResetRunningTotal\nFROM a\nWHEre ArticleNo = 9410\ngroup by DateOfMovement, ArticleNo, Quantity, TypeOfChange, RunningTotal\norder by DateOfMovement asc\n</code></pre>\n\n<p>Image of results table is..</p>\n\n<p><a href=\"https://i.stack.imgur.com/S6ko8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S6ko8.png\" alt=\"Image of result\"></a></p>\n"}, {"tags": ["python", "python-2.7", "pyqt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1550100135, "post_id": 54680949, "comment_id": 96150794, "body": "change <code>PyQt.QtWidgets</code> to <code>PyQt5.QtWidgets </code>"}, {"owner": {"reputation": 123, "user_id": 1382498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef575ee8410f5b1998f2f7a77199384?s=128&d=identicon&r=PG", "display_name": "rbmales", "link": "https://stackoverflow.com/users/1382498/rbmales"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1550100408, "post_id": 54680949, "comment_id": 96150880, "body": "Sorry, I mistyped within the post, not in the code.  I corrected it to what I have actually been trying to run, which is as you suggest, fails."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 1382498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef575ee8410f5b1998f2f7a77199384?s=128&d=identicon&r=PG", "display_name": "rbmales", "link": "https://stackoverflow.com/users/1382498/rbmales"}, "edited": false, "score": 0, "creation_date": 1550180500, "post_id": 54691911, "comment_id": 96185944, "body": "Thank you for your answer and for editing for Python 2.7 compatibility, works now."}], "tags": [], "owner": {"reputation": 5785, "user_id": 7306999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9dNzL.jpg?s=128&g=1", "display_name": "Xukrao", "link": "https://stackoverflow.com/users/7306999/xukrao"}, "is_accepted": true, "score": 3, "last_activity_date": 1550160007, "last_edit_date": 1550160007, "creation_date": 1550151989, "answer_id": 54691911, "question_id": 54680949, "link": "https://stackoverflow.com/questions/54680949/simple-pyqt5-program-was-working-perfectly-yesterday-no-longer-shows-file-dialo/54691911#54691911", "title": "simple PyQT5 program was working perfectly yesterday, no longer shows file dialog", "body": "<p>I don't know why your code is behaving differently now than it did in the past. But the reason why PyQt code can crash without displaying any python error traceback is succinctly explained <a href=\"https://www.reddit.com/r/learnpython/comments/4dmrwh/error_catching_when_using_pyqt5/d1so1qp\" rel=\"nofollow noreferrer\">here</a>. To quote:</p>\n\n<blockquote>\n  <p>The first thing to understand about pyqt is that it is simply a\n  wrapper around the Qt C++ library, so nearly everything pyqt related\n  in your application is executed as a C++ wrapper (loose definition).</p>\n  \n  <p>Secondly, understand that pyqt is event driven, and therefore has it's\n  own event loop that runs throughout the execution of your script, that\n  (as i understand it) runs in it's own thread of execution.</p>\n  \n  <p>Because of this, any errors or exceptions that are raised inside a\n  slot triggered by a qt signal/event (button click, key press, etc)\n  will be processed by the qt event loop in c++ land, and because of\n  this, any exceptions raised in said slot will essentially be out of\n  scope of the python interpreter, and therefore not raised outside of\n  the scope of the slot. So in essence, while an exception may be raised\n  in the context of a qt slot, once it leaves the scope of that slot,\n  the exception is essentially erased.</p>\n</blockquote>\n\n<p>I experience a crash without any error information as well when I execute your example code in Spyder. However when I execute your example code in an IPython console inside Windows Command Prompt then the following short error message is displayed:</p>\n\n<blockquote>\n  <p>QWidget: Must construct a QApplication before a QWidget</p>\n</blockquote>\n\n<p>So apparently the issue was that no <a href=\"http://pyqt.sourceforge.net/Docs/PyQt5/api/QtWidgets/qapplication.html\" rel=\"nofollow noreferrer\"><code>QApplication</code></a> object was explicitly constructed. Give this a try:</p>\n\n<pre><code>from __future__ import print_function  # not needed in python 3\nfrom PyQt5 import QtWidgets\n\nclass FileDialog(QtWidgets.QFileDialog):\n    def __init__(self, parent=None):\n        super(FileDialog, self).__init__(parent)  # can be simplified to `super().__init__(parent)` in python 3\n        self.fileSelected.connect(lambda x: print(x))\n\ndef run_app():\n    app = QtWidgets.QApplication([])\n    file_dialog = FileDialog()\n    file_dialog.show()\n    app.exec_()\n\nif __name__ == '__main__':\n    run_app()\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 1382498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef575ee8410f5b1998f2f7a77199384?s=128&d=identicon&r=PG", "display_name": "rbmales", "link": "https://stackoverflow.com/users/1382498/rbmales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 54691911, "answer_count": 1, "score": 0, "last_activity_date": 1550160007, "creation_date": 1550100035, "last_edit_date": 1550146171, "question_id": 54680949, "link": "https://stackoverflow.com/questions/54680949/simple-pyqt5-program-was-working-perfectly-yesterday-no-longer-shows-file-dialo", "title": "simple PyQT5 program was working perfectly yesterday, no longer shows file dialog", "body": "<p>Spyder 3.3.2 Python 2.7.15 64-bit | Qt 5.6.2 | PyQt5 5.6 | Windows 10\niPython</p>\n\n<p>The following code was working yesterday, opening a file dialog and allowing me to select a file.  It has stopped working, I don't get any dialog at all.</p>\n\n<pre><code>from PyQt5.QtWidgets import QFileDialog # note this is correct code as I use it\nfilename=QFileDialog.getOpenFileName(None,\"Open Data File\",'.',\"*.xlsx)\")    \nprint filename\n</code></pre>\n\n<p>Other simple examples using PyQt5 that worked yesterday no longer do so.  I have tried various things to resolve this, but have not gotten anywhere.  I have rebooted, reset Spyder, updated conda, run in debug, etc.  At a loss here.  By no means a python expert.</p>\n\n<p>Here is the console log, note that if I just execute the import statement by itself, then I see QFileDialog in the dir().  If I execute all 3 lines, QFileDialog does not appear. Nothing happens if I execute QFileDialog in console window.</p>\n\n<pre><code>&gt; %reset\n&gt; \n&gt; Once deleted, variables cannot be recovered. Proceed (y/[n])? y\n&gt; \n&gt; dir() Out[3]:  ['In',  'Out',  '__builtin__',  '__builtins__', \n&gt; '__name__',  '_dh',  '_i',  '_i3',  '_ih',  '_ii',  '_iii',  '_oh', \n&gt; '_sh',  'exit',  'get_ipython',  'quit']\n&gt; \n&gt; runfile('C:/Projects/GenIICoastalModel/Python/NonCHS/NonCHS/TestReadFile.py',\n&gt; wdir='C:/Projects/GenIICoastalModel/Python/NonCHS/NonCHS')\n&gt; \n&gt; dir() Out[1]:  ['In',  'Out',  '_',  '__',  '___',  '__builtin__', \n&gt; '__builtins__',  '__doc__',  '__name__',  '__package__',  '_dh', \n&gt; '_i',  '_i1',  '_ih',  '_ii',  '_iii',  '_oh',  '_sh',  'exit', \n&gt; 'get_ipython',  'quit']\n&gt; \n&gt; '\n</code></pre>\n"}, {"tags": ["python", "graph"], "answers": [{"comments": [{"owner": {"reputation": 3833, "user_id": 906357, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/456c9cf9b7e6c61a7037bd5a604769ca?s=128&d=identicon&r=PG", "display_name": "user906357", "link": "https://stackoverflow.com/users/906357/user906357"}, "edited": false, "score": 0, "creation_date": 1550164927, "post_id": 54681802, "comment_id": 96179243, "body": "Maybe I should ask this as another thread, but how do I add the data from array1 to p = ax.plot_surface(xx, y, zz, cmap=cmap, alpha=0.5)?"}, {"owner": {"reputation": 2375, "user_id": 10651567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PGs0l3ZCTi4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbA-mLZfp63rgDQJ9b6NSPqtSR0agQ/mo/photo.jpg?sz=128", "display_name": "keineahnung2345", "link": "https://stackoverflow.com/users/10651567/keineahnung2345"}, "reply_to_user": {"reputation": 3833, "user_id": 906357, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/456c9cf9b7e6c61a7037bd5a604769ca?s=128&d=identicon&r=PG", "display_name": "user906357", "link": "https://stackoverflow.com/users/906357/user906357"}, "edited": false, "score": 0, "creation_date": 1550379036, "post_id": 54681802, "comment_id": 96243656, "body": "@user906357 <a href=\"https://stackoverflow.com/questions/32413371/color-of-a-3d-surface-plot-in-python\" title=\"color of a 3d surface plot in python\">stackoverflow.com/questions/32413371/&hellip;</a> This should be helpful."}], "tags": [], "owner": {"reputation": 2375, "user_id": 10651567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PGs0l3ZCTi4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbA-mLZfp63rgDQJ9b6NSPqtSR0agQ/mo/photo.jpg?sz=128", "display_name": "keineahnung2345", "link": "https://stackoverflow.com/users/10651567/keineahnung2345"}, "is_accepted": false, "score": 1, "last_activity_date": 1550107454, "last_edit_date": 1550107454, "creation_date": 1550106524, "answer_id": 54681802, "question_id": 54680939, "link": "https://stackoverflow.com/questions/54680939/creating-a-graph-with-2-planes-and-colormaps-via-python/54681802#54681802", "title": "Creating a graph with 2 planes and colormaps via Python", "body": "<p>With help of <a href=\"https://stackoverflow.com/questions/36060933/matplotlib-plot-a-plane-and-points-in-3d-simultaneously\">Matplotlib - Plot a plane and points in 3D simultaneously</a>, I am able to achieve this:</p>\n\n<pre><code>from mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.pyplot as plt\nfrom matplotlib import cm\nfrom matplotlib.ticker import LinearLocator, FormatStrFormatter\nimport numpy as np\n\nfig = plt.figure()\nax = fig.gca(projection='3d')\nax.set_xlim(0, 1)\nax.set_ylim(0, 1)\nax.set_zlim(0, 1)\n\nax.set_xticks([0, 0.2, 0.4, 0.6, 0.8, 1])\nax.set_yticks([0, 0.5, 1])\nax.set_zticks([0, 0.2, 0.4, 0.6, 0.8, 1])\ncmap = plt.cm.gray\n\n#plot vertical surface\ny = 0.5\nxx, zz = np.meshgrid(np.linspace(0,1,10), np.linspace(0,1,10))\np = ax.plot_surface(xx, y, zz, cmap=cmap, alpha=0.5)\n\nx = 0.2\nyy, zz = np.meshgrid(np.linspace(0,1,10), np.linspace(0,1,10))\np = ax.plot_surface(x, yy, zz, cmap=cmap, alpha=0.5)\n\nfig.colorbar(p)\nplt.show()\n</code></pre>\n\n<p>Note that I didn't use <code>normal</code> or <code>dot</code> just as another question do, because here you want to plot <strong>vertical</strong> planes.</p>\n\n<p>Here's what I got(I'm working on the right occlusion):</p>\n\n<p><a href=\"https://i.stack.imgur.com/zodtX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zodtX.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 3833, "user_id": 906357, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/456c9cf9b7e6c61a7037bd5a604769ca?s=128&d=identicon&r=PG", "display_name": "user906357", "link": "https://stackoverflow.com/users/906357/user906357"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550107454, "creation_date": 1550099985, "question_id": 54680939, "link": "https://stackoverflow.com/questions/54680939/creating-a-graph-with-2-planes-and-colormaps-via-python", "title": "Creating a graph with 2 planes and colormaps via Python", "body": "<p>I have two 2D arrays and I want to use to produce an image similar to the one that fallows, just with different limits on the axis.</p>\n\n<p><a href=\"https://i.stack.imgur.com/XeiTB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XeiTB.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is my attempt so far:</p>\n\n<pre><code>from mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.pyplot as plt\nfrom matplotlib import cm\nfrom matplotlib.ticker import LinearLocator, FormatStrFormatter\nimport numpy as np\n\nfig = plt.figure()\nax = fig.gca(projection='3d')\nax.set_xlim(-2.01, 2.01)\nax.set_ylim(-2.01, 2.01)\nax.set_zlim(-2.01, 2.01)\ncmap = plt.cm.gray\nim = ax.imshow(np.asarray(array1), cmap=cmap)\nim.remove()\nfig.colorbar(im)\nplt.show()\n</code></pre>\n\n<p>The arrays I have, (array1 and array2) are two dimensional with sizes n by n. Any help or a point in the right direction will be greatly appreciated!</p>\n"}, {"tags": ["python", "django", "caching"], "answers": [{"comments": [{"owner": {"reputation": 2252, "user_id": 7654215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81374f7e9b250cdaf75cf92b6a6e883f?s=128&d=identicon&r=PG&f=1", "display_name": "seuling", "link": "https://stackoverflow.com/users/7654215/seuling"}, "edited": false, "score": 0, "creation_date": 1550100405, "post_id": 54680971, "comment_id": 96150879, "body": "Thanks! Then it means it&#39;s not a good way to use cached_property in the client side? The instance won&#39;t changed till I refresh browser, and when refresh it (or recreate instance), the property is not cached anymore. I might be find other way. (Also I need to read documentation more precisely)"}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "reply_to_user": {"reputation": 2252, "user_id": 7654215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81374f7e9b250cdaf75cf92b6a6e883f?s=128&d=identicon&r=PG&f=1", "display_name": "seuling", "link": "https://stackoverflow.com/users/7654215/seuling"}, "edited": false, "score": 1, "creation_date": 1550101275, "post_id": 54680971, "comment_id": 96151102, "body": "I&#39;m not sure if you are a bit confused about it but there is nothing client side here. The instance is cached on the server side but only lives while the instance is alive. It has nothing to do with the browser refresh; as it has already been invalidated once the request is finalised (i.e. you see the end result on the browser). As I mentioned, caching your <i>views</i> using the <code>@cache</code> decorator which uses Django&#39;s cache framework is better suited for your scenario."}, {"owner": {"reputation": 2252, "user_id": 7654215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81374f7e9b250cdaf75cf92b6a6e883f?s=128&d=identicon&r=PG&f=1", "display_name": "seuling", "link": "https://stackoverflow.com/users/7654215/seuling"}, "edited": false, "score": 2, "creation_date": 1550101716, "post_id": 54680971, "comment_id": 96151234, "body": "I totally understand. Now I realize it&#39;s a bit silly question about client side. I&#39;ll try to change into cache decorator. Thanks for detail response!"}], "tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": true, "score": 4, "last_activity_date": 1550100152, "creation_date": 1550100152, "answer_id": 54680971, "question_id": 54680910, "link": "https://stackoverflow.com/questions/54680910/when-exactly-cached-property-reset/54680971#54680971", "title": "When exactly cached_property reset?", "body": "<p>The <a href=\"https://docs.djangoproject.com/en/dev/ref/utils/#django.utils.functional.cached_property\" rel=\"nofollow noreferrer\">documentation</a> is pretty clear on that:</p>\n\n<blockquote>\n  <p>The cached result will persist as long as the instance does, so if the instance is passed around and the function subsequently invoked, the cached result will be returned.</p>\n</blockquote>\n\n<p>Whenever you refresh your browser, you recreate the instance, hence invalidating the cache. If you would like a cache that would persist over multiple requests, you should consider using the <a href=\"https://docs.djangoproject.com/en/dev/topics/cache/\" rel=\"nofollow noreferrer\">cache framework</a>.</p>\n"}], "owner": {"reputation": 2252, "user_id": 7654215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81374f7e9b250cdaf75cf92b6a6e883f?s=128&d=identicon&r=PG&f=1", "display_name": "seuling", "link": "https://stackoverflow.com/users/7654215/seuling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1149, "favorite_count": 0, "accepted_answer_id": 54680971, "answer_count": 1, "score": 2, "last_activity_date": 1550100152, "creation_date": 1550099809, "question_id": 54680910, "link": "https://stackoverflow.com/questions/54680910/when-exactly-cached-property-reset", "title": "When exactly cached_property reset?", "body": "<p>Currently I'm using <code>@cached_property</code> for avoiding duplicate access to db.</p>\n\n<pre><code>class MyModel(models.Model):\n    ...\n\n    @cached_property\n    def my_opts(self):\n        options = Option.objects.filter(...)\n        return options\n    ...\n</code></pre>\n\n<p>I used this property front template.</p>\n\n<p>It work fine in shell &amp; test. But when I tested in browser, I didn't know exactly when the cached property reset.</p>\n\n<p>Whenever I refresh my browser, the property reset. Then is it useful to use cached property in this scenario? And when exactly the <code>cached_property</code> value reset in the aspect of client side? </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "dynamic-programming"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1550100109, "post_id": 54680883, "comment_id": 96150787, "body": "Is there anything special about a <code>money</code> value of ten or eleven? Your <i>symptom</i> implies that there is some kind of boundary that makes the function behave different above 10."}, {"owner": {"reputation": 15, "user_id": 11059199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b7a1022e76885a48fad47f4eb86752?s=128&d=identicon&r=PG&f=1", "display_name": "lscod", "link": "https://stackoverflow.com/users/11059199/lscod"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1550100278, "post_id": 54680883, "comment_id": 96150841, "body": "Not that I can think of. At 10 is when all values (in this example) can start been used."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1550100399, "post_id": 54680883, "comment_id": 96150875, "body": "Do you get the same/similar symptom with a different values in <code>values</code> or a different list length?"}, {"owner": {"reputation": 15, "user_id": 11059199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b7a1022e76885a48fad47f4eb86752?s=128&d=identicon&r=PG&f=1", "display_name": "lscod", "link": "https://stackoverflow.com/users/11059199/lscod"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1550100570, "post_id": 54680883, "comment_id": 96150927, "body": "With different values it&#39;s the same. With a different list length, it starts after the largest value on the list. So that&#39;s a pattern"}, {"owner": {"reputation": 15, "user_id": 11059199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b7a1022e76885a48fad47f4eb86752?s=128&d=identicon&r=PG&f=1", "display_name": "lscod", "link": "https://stackoverflow.com/users/11059199/lscod"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1550100888, "post_id": 54680883, "comment_id": 96150998, "body": "Now I think that I should remove this +1 count when &quot;money&quot; goes to one more than the maximum value on &quot;values&quot;, like money=11 when max(values)=10. But I&#39;m still not sure how to remove this +1."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1550102830, "post_id": 54680883, "comment_id": 96151564, "body": "I&#39;m not getting where you&#39;re off by 1.  <code>solver(11, values)</code> returns 220, just as it should.  What specific values do you get?"}, {"owner": {"reputation": 15, "user_id": 11059199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b7a1022e76885a48fad47f4eb86752?s=128&d=identicon&r=PG&f=1", "display_name": "lscod", "link": "https://stackoverflow.com/users/11059199/lscod"}, "edited": false, "score": 0, "creation_date": 1550103125, "post_id": 54680883, "comment_id": 96151657, "body": "Using the code given in the solution, I find that solver(11, [1, 2, 5, 10]) should be 219. I&#39;m also not sure why. I could post the code here, but as it is not mine I&#39;m not sure if I should."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1550103636, "post_id": 54680883, "comment_id": 96151804, "body": "Got it.  The problem for me is that your posting is <i>not</i> self-contained; off-site links are generally not acceptable.  You didn&#39;t post the entire problem.  There&#39;s a limit to the quantity of candies to purchase."}, {"owner": {"reputation": 15, "user_id": 11059199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b7a1022e76885a48fad47f4eb86752?s=128&d=identicon&r=PG&f=1", "display_name": "lscod", "link": "https://stackoverflow.com/users/11059199/lscod"}, "edited": false, "score": 0, "creation_date": 1550103913, "post_id": 54680883, "comment_id": 96151865, "body": "Thank you. I think my problem was a reading problem.... Sorry for not posting the entire problem"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 11059199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b7a1022e76885a48fad47f4eb86752?s=128&d=identicon&r=PG&f=1", "display_name": "lscod", "link": "https://stackoverflow.com/users/11059199/lscod"}, "edited": false, "score": 0, "creation_date": 1550101206, "post_id": 54681079, "comment_id": 96151079, "body": "Actually, the permutations of the possible solutions should also be counted. So it works on this case. Sorry if I didn&#39;t make it clear before."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 15, "user_id": 11059199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b7a1022e76885a48fad47f4eb86752?s=128&d=identicon&r=PG&f=1", "display_name": "lscod", "link": "https://stackoverflow.com/users/11059199/lscod"}, "edited": false, "score": 0, "creation_date": 1550101487, "post_id": 54681079, "comment_id": 96151167, "body": "Ah ... no, it wasn&#39;t clear.  The classic problem is simply the combinations.  It&#39;s clear now."}, {"owner": {"reputation": 15, "user_id": 11059199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b7a1022e76885a48fad47f4eb86752?s=128&d=identicon&r=PG&f=1", "display_name": "lscod", "link": "https://stackoverflow.com/users/11059199/lscod"}, "edited": false, "score": 0, "creation_date": 1550101612, "post_id": 54681079, "comment_id": 96151206, "body": "Sorry about that"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 0, "last_activity_date": 1550103795, "last_edit_date": 1550103795, "creation_date": 1550100925, "answer_id": 54681079, "question_id": 54680883, "link": "https://stackoverflow.com/questions/54680883/number-of-ways-to-buy-candy-given-a-money-value-and-candy-prices/54681079#54681079", "title": "Number of ways to buy candy given a money value and candy prices", "body": "<p>There's a limit to the quantity of candies to purchase, which you didn't include in your coding.  Your value for <code>money=11</code> is one high because you've include buying eleven one-unit candies.  This is not because the most expensive candy is 10 units; it's because you're limited to buying 10 items total.</p>\n\n<p>Your solution would need to also keep track of the quantity of candies in each permutation, either directly or implicitly.  The solution given on the site (which you just posted above), implements this restriction in the recursion depth.</p>\n"}], "owner": {"reputation": 15, "user_id": 11059199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b7a1022e76885a48fad47f4eb86752?s=128&d=identicon&r=PG&f=1", "display_name": "lscod", "link": "https://stackoverflow.com/users/11059199/lscod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 54681079, "answer_count": 1, "score": 0, "last_activity_date": 1550103795, "creation_date": 1550099653, "last_edit_date": 1550103460, "question_id": 54680883, "link": "https://stackoverflow.com/questions/54680883/number-of-ways-to-buy-candy-given-a-money-value-and-candy-prices", "title": "Number of ways to buy candy given a money value and candy prices", "body": "<p>While trying to solve a problem at brilliant.org <a href=\"https://brilliant.org/practice/dynamic-programming-level-4-5-challenges/?subtopic=algorithms&amp;chapter=dynamic-programming\" rel=\"nofollow noreferrer\">Dynamic Programming: Level 4 Challenges</a> I tried a simple solution of just using an array (or list) and storing the number of ways each money value can be spent. This works until the money variable goes higher than 10. At 11 it has 1 more than it should, and I cannot find out why. I imagine it is counting the same value twice, but as there are too many posibilities at this point, it is infeasible to count one by one.</p>\n\n<p>I already looked at the solution, but I'd just like a hint on what I might be missing here.</p>\n\n<p>EDIT: All permutations of possible solutions should also be counted.</p>\n\n<pre><code>money = 40\nvalues = [1, 2, 5, 10]\n\ndef solver(money, values):\n    mtx = [0 for _ in range(money+1)]\n\n    mtx[0] = 1; mtx[1] = 1\n\n        for i in range(2, money+1):\n            for v in values:\n            if i - v &gt;= 0:\n                mtx[i] += mtx[i-v]\n\n    return mtx[-1]\n</code></pre>\n\n<p>EDIT 2: This code, posted on the solutions section of the website, gives the correct answer. I think the line \"res = 1 if n == 0 else 0\", when it does an \"else 0\", is probably where the correcting from my solution is made, but I cannot be sure</p>\n\n<pre><code>Candide_ = {}\n\ndef Candide(n, depth):\n    \"Candice's trip to the candy shop\"\n    if depth == 0:\n        res = 1 if n == 0 else 0\n    elif n == 0:\n        res  = 1\n    elif (n, depth) in Candide_:\n       res  =  Candide_[(n, depth)]\n    else:\n        res = sum(Candide(m, depth - 1) for m in [n-1, n-2, n-5, n-10] if m &gt;= 0)\n        Candide_[(n, depth)] = res\n    return res\n\nprint(Candide(40, 10))\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "sockets"], "comments": [{"owner": {"reputation": 1175, "user_id": 1175455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4gpIG.jpg?s=128&g=1", "display_name": "Harry Cutts", "link": "https://stackoverflow.com/users/1175455/harry-cutts"}, "edited": false, "score": 0, "creation_date": 1550100168, "post_id": 54680869, "comment_id": 96150805, "body": "What happens when you run your code? Do you get an error? (If so, please include the message and traceback.) Or does it not send the correct message?"}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1550100323, "post_id": 54680869, "comment_id": 96150854, "body": "Have you confirmed that the ip and port are correct by the ridiculously simple debugging technique of printing the values? Show what is in the input file, or <code>inputData</code> by editing it into your question. Using the <code>with</code> statement means you don\u2019t need the <code>f.close()</code>. Why not write a simple socket server which this code connects to and which prints what it receives?"}, {"owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "edited": false, "score": 0, "creation_date": 1550100544, "post_id": 54680869, "comment_id": 96150920, "body": "Is &lt;STX&gt; literally those bytes or the control byte referred to by those letters (start transmission)?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3352613"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1550100548, "post_id": 54680869, "comment_id": 96150922, "body": "@barny I did print those values and they appear correct. I will remove the f.close() for cleanliness."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1550100548, "post_id": 54680869, "comment_id": 96150923, "body": "Hang on, do you think you need to send e.g &lt;stx&gt; as text, i.e. five bytes? STX and ETX are (usually) ASCII control characters which are single bytes: STX is a byte 2,, ETC is a byte 3. See <a href=\"https://ascii.cl/control-characters.htm\" rel=\"nofollow noreferrer\">ascii.cl/control-characters.htm</a>. So your code bulding the string to send should be appending <code>\u2019\\x02\u2019</code> for &lt;STX&gt; and <code>\u2018\\x03\u2019</code> for &lt;ETX&gt;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3352613"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1550101266, "post_id": 54680869, "comment_id": 96151097, "body": "@barny That was it! it is only sending one line though, do I need to open and close the socket between every sendall?"}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1550101536, "post_id": 54680869, "comment_id": 96151184, "body": "Don\u2019t know - depends what the receiving end expects. How do you know it is only sending one line?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3352613"}, "edited": false, "score": 0, "creation_date": 1550101759, "post_id": 54680869, "comment_id": 96151241, "body": "I can run a sql query against the database that the server is connected to, and only 1 line is appearing, I am currently adjusting the code to open/close socket each time."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3352613"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1550103304, "post_id": 54680869, "comment_id": 96151717, "body": "@barny I added a 1 second delay in each loop and that seemed to fix it. Thanks for the help."}], "owner": {"user_type": "does_not_exist", "display_name": "user3352613"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550100882, "creation_date": 1550099541, "last_edit_date": 1550100882, "question_id": 54680869, "link": "https://stackoverflow.com/questions/54680869/how-can-i-fix-my-script-to-send-a-string-through-a-socket", "title": "How can I fix my script to send a string through a socket?", "body": "<p>To preface my question, I tried reviewing similar questions, and used some of those to get to my current code, but it still doesn't seem to be working for me.</p>\n\n<p>I am currently using Hercules to send basic TCP messages to an active server (it is a simple program that connects to the IP/port and lets me send a message). I added a print statement to \"message\" and sent one using Hercules to verify my format is correct. So based on that seems like my problem is in sending the message itself.</p>\n\n<p>My CSV file has a top row with an IP and port. After that each row has the data necessary for the message.</p>\n\n<p>I get no error or any feedback at all. Hercules does give me an ACK message when I send it, but I am not sure how to see socket messages when using Python.</p>\n\n<p>Basically my goal is to open a socket, then send a message. The format of the string is:</p>\n\n<p><code>&lt;STX&gt;1000000000^TEST^data1^data2^data3&lt;ETX&gt;</code></p>\n\n<p>Here is the code I need help with:</p>\n\n<pre><code>Tk().withdraw()\nfilename = askopenfilename()\n\nwith open(filename) as f:\n    csvData = csv.reader(f)\n    inputData = list(csvData)\nf.close()\n\nip = inputData[0][0]\nport = int(inputData[0][1])\n\ns = socket.socket()\ns.connect((ip,port))\n\ninputData = inputData[1:]  #delete first row of CSV input\n\nfor i in range(len(inputData)):\n    message = ('&lt;STX&gt;' + str(random.randint(1000000000,9999999999)) + '^TEST^'\n               + inputData[i][0] + '^' + inputData[i][1] + '^' + inputData[i][2]\n               + '&lt;ETX&gt;')\n    s.sendall(message.encode('utf-8'))\n\ns.close()\n</code></pre>\n"}, {"tags": ["python", "for-loop"], "comments": [{"owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "edited": false, "score": 1, "creation_date": 1550099672, "post_id": 54680849, "comment_id": 96150674, "body": "Use <code>enumerate</code>, like <code>for c,x in enumerate(string)</code>. <code>c</code> is the index of the letter <code>x</code> within <code>string</code>."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1550268498, "post_id": 54680849, "comment_id": 96221127, "body": "When you get to a resolution, please remember to up-vote useful things and accept your favourite answer (even if you have to write it yourself), so Stack Overflow can properly archive the question."}], "answers": [{"comments": [{"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 1, "creation_date": 1550099886, "post_id": 54680890, "comment_id": 96150730, "body": "Could also use <code>str.rjust</code> here too"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1550100012, "post_id": 54680890, "comment_id": 96150763, "body": "@Jaba Good idea: another &quot;baby step&quot; past what OP already knows."}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 1, "creation_date": 1550100066, "post_id": 54680890, "comment_id": 96150777, "body": "<code>for pad, char in enumerate(text, 1): print(char.rjust(pad))</code> Was gonna post as an answer but didn&#39;t want to steal your thunder. Didn&#39;t want to confuse OP just looking to help."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1550099835, "last_edit_date": 1550099835, "creation_date": 1550099680, "answer_id": 54680890, "question_id": 54680849, "link": "https://stackoverflow.com/questions/54680849/how-can-i-multiply-spaces-in-a-string-by-the-for-loop-iterator/54680890#54680890", "title": "How can I multiply spaces in a string by the for-loop iterator?", "body": "<p>You need the Python iterator that returns both the index and contents of a sequence: <code>enumerate</code>:</p>\n\n<pre><code>text = \"Old MacDonald had a farm\"\nfor pad, char in enumerate(text):\n    print(' '*pad + char)\n</code></pre>\n\n<p><code>pad</code> takes on the values 0 through len(text)-1.</p>\n\n<p>Output:</p>\n\n<pre><code>O\n l\n  d\n\n    M\n     a\n      c\n       D\n        o\n         n\n          a\n           l\n            d\n\n              h\n               a\n                d\n\n                  a\n\n                    f\n                     a\n                      r\n                       m\n</code></pre>\n\n<p>If you prefer a solution a little closer to what you've already learned, simply iterate over the length of the string, and then index that character for your output.</p>\n\n<pre><code>text = \"Old MacDonald had a farm\"\nfor pad in range(len(text)):\n    print(' '*pad + text[pad] )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 338, "user_id": 9151228, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qle5r0vdaZQ/AAAAAAAAAAI/AAAAAAAABCQ/rfstD4rfaFg/photo.jpg?sz=128", "display_name": "Subhaneil Lahiri", "link": "https://stackoverflow.com/users/9151228/subhaneil-lahiri"}, "is_accepted": false, "score": 0, "last_activity_date": 1550100141, "creation_date": 1550100141, "answer_id": 54680970, "question_id": 54680849, "link": "https://stackoverflow.com/questions/54680849/how-can-i-multiply-spaces-in-a-string-by-the-for-loop-iterator/54680970#54680970", "title": "How can I multiply spaces in a string by the for-loop iterator?", "body": "<p>You can use <code>enumerate</code> to get the loop index along with <code>x</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for i, x in enumerate(string):\n    print(\" \"*i+x)\n</code></pre>\n\n<p>As you noted, the second method fails because <code>find</code> returns the first occurrence. You could get around that by using the <code>start</code> and <code>end</code> arguments, but figuring out what to use for them is probably more hassle than it's worth.</p>\n"}, {"tags": [], "owner": {"reputation": 594, "user_id": 12208111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ahTSJ.jpg?s=128&g=1", "display_name": "Rudra shah", "link": "https://stackoverflow.com/users/12208111/rudra-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1571854267, "creation_date": 1571854267, "answer_id": 58528751, "question_id": 54680849, "link": "https://stackoverflow.com/questions/54680849/how-can-i-multiply-spaces-in-a-string-by-the-for-loop-iterator/58528751#58528751", "title": "How can I multiply spaces in a string by the for-loop iterator?", "body": "<p>Here is a simple illustration of multiplication with space:</p>\n\n<pre><code> `x = '*'\nfor u in range(0,2000):\n    for k in range(0,11):\n        for i in range(0,6):\n            print(i*x,'    '*k,i*x)\n        for j in range(6,0,-1):\n            print(j*x,'    '*k,j*x)\n    for k in range(10,0,-1):\n        for i in range(0,6):\n            print(i*x,'    '*k,i*x)\n        for j in range(6,0,-1):\n            print(j*x,'    '*k,j*x)`\n</code></pre>\n\n<p>For entertainment run this code in V.S CODE and enjoy animation.....HeHeHeHeHeHeHeHeHeHeHe........</p>\n"}], "owner": {"reputation": 11, "user_id": 11059183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b349c39e015a19f1e467401d10e03b9?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/11059183/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1571854267, "creation_date": 1550099415, "last_edit_date": 1550101512, "question_id": 54680849, "link": "https://stackoverflow.com/questions/54680849/how-can-i-multiply-spaces-in-a-string-by-the-for-loop-iterator", "title": "How can I multiply spaces in a string by the for-loop iterator?", "body": "<p>I'm trying to run a for-loop that adds a space each time it iterates, so that the text forms a diagonal line, but I can't find the integer value of the iterator</p>\n\n<p>I've tried the following:</p>\n\n<pre><code>for x in string:\n    print(\" \"*x+x)\n</code></pre>\n\n<p>but that throws an error because x is a string, not a number. I've also tried:</p>\n\n<pre><code>for x in string:\n    print(\" \"*string.find(x)+x)\n</code></pre>\n\n<p>but when characters are duplicated in the string, you of course get the number of spaces to the first instance of that character.</p>\n\n<p>Is it possible to access the actual integer value of the iterator so I can multiply spaces by it?</p>\n\n<p>Code solutions I've tried</p>\n\n<pre><code>for x in string:\n    print(\" \"*x+x)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>for x in string:\n    print(\" \"*string.find(x)+x)\n</code></pre>\n\n<p>first code yields TypeError: can't multiply sequence by non-int of type 'str'</p>\n\n<p>second code yields</p>\n\n<pre><code>o\n l\n  d\n\n    m\n     a\n      c\n  d\no\n         n\n     a\n l\n  d\n\n              h\n     a\n  d\n\n     a\n\n                    f\n     a\n                      r\n    m\n</code></pre>\n"}, {"tags": ["python", "numpy", "math", "3d", "angle"], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 4244486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRzMI.jpg?s=128&g=1", "display_name": "Guille Sanchez", "link": "https://stackoverflow.com/users/4244486/guille-sanchez"}, "is_accepted": false, "score": 0, "last_activity_date": 1550137064, "creation_date": 1550137064, "answer_id": 54687226, "question_id": 54680843, "link": "https://stackoverflow.com/questions/54680843/using-euler-angles-matrix-to-rotate-in-3d-space/54687226#54687226", "title": "Using euler angles/matrix to rotate in 3d space?", "body": "<p>The same way we have 2 rotation matrix for a 2D shape, you need to pick one of the 8 possible rotation matrix combination than match your criteria.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4d7Vr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4d7Vr.png\" alt=\"Rotation Matrix 1\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/1KjmK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1KjmK.png\" alt=\"Rotation Matrix 2\"></a></p>\n\n<p>In the 2D case, you need to define what rotation matrix match your coordinates system with your plotting library.</p>\n\n<p><a href=\"https://i.stack.imgur.com/GG1wg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GG1wg.png\" alt=\"Rotation Matrix 3\"></a></p>\n\n<p>In practice, you need to choose whether to use Theta or -1*Theta for each of the 3 rotation matrix above like we do for the 2D case.</p>\n"}], "owner": {"reputation": 50, "user_id": 4498315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b995ab41603b793565087cb77b67cf41?s=128&d=identicon&r=PG&f=1", "display_name": "Neviem", "link": "https://stackoverflow.com/users/4498315/neviem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550137064, "creation_date": 1550099401, "last_edit_date": 1550112874, "question_id": 54680843, "link": "https://stackoverflow.com/questions/54680843/using-euler-angles-matrix-to-rotate-in-3d-space", "title": "Using euler angles/matrix to rotate in 3d space?", "body": "<p>I am trying to rotate a cylinder in 3d space to join 2 points together in 3D space. I am using an Euler matrix to apply the rotation to a grid of the cylinder points after having calculated the 3 rotation angles.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import Axes3D\n\nclass sphere(object):\n\n    def __init__(self, center_x = 0.0, center_y = 0.0, center_z =0.0, radius = 1.0, resolution = 20):\n\n        self.center_x = center_x\n        self.center_y = center_y\n        self.center_z = center_z\n        self.radius = radius\n        self.resolution = resolution   \n        self.sphere = self._define_sphere()\n\n    def _define_sphere(self):\n\n        self.u, self.v = np.mgrid[0:2*np.pi: (self.resolution * 1j), 0:np.pi: (self.resolution * 1j)]\n        self.x = self.radius * np.cos(self.u)*np.sin(self.v) + self.center_x\n        self.y = self.radius * np.sin(self.u)*np.sin(self.v) + self.center_y\n        self.z = self.radius * np.cos(self.v) + self.center_z\n\n        return [self.x, self.y, self.z]\n\n    def plot_self(self, ax):\n\n        ax.plot_surface(self.x, self.y, self.z)\n\nclass cylinder(object):\n\n    def __init__(self, center_x = 0.0, center_y = 0.0, center_z = 0.0, radius = 1.0, z = 1.0, resolution = 20):\n\n        self.center_x = center_x\n        self.center_y = center_y\n        self.center_z = center_z\n        self.radius = radius\n        self.z = z\n        self.resolution = resolution\n        self.cylinder = self._define_cylinder()\n\n    def _define_cylinder(self):\n\n        self.z_values = np.linspace(0, self.z, self.resolution)\n        self.theta = np.linspace(0, 2*np.pi, self.resolution)\n\n        self.theta_mesh, self.z_grid = np.meshgrid(self.theta, self.z_values)\n\n        self.x_grid = self.radius * np.cos(self.theta_mesh) + self.center_x\n        self.y_grid = self.radius * np.sin(self.theta_mesh) + self.center_y\n\n        return [self.x_grid, self.y_grid, self.z_grid]\n\n    def join_points(self, x1, y1, z1, x2, y2, z2):\n\n        dx = x1 - x2\n        dy = y1 - y2\n        dz = z1 - z2\n\n        print dx,dy,dz\n\n        distance = math.sqrt(dx**2 + dy**2 + dz**2)\n\n        self.psi = math.atan2(dx, dy)\n        self.theta = math.atan2(dx, dz)\n        self.phi = 0\n\n        self.euler = np.array([[(math.cos(self.psi)*math.cos(self.phi)) - math.cos(self.theta)*math.sin(self.phi)*math.sin(self.psi), math.cos(self.psi)*math.sin(self.phi) + math.cos(self.theta)*math.cos(self.phi)*math.sin(self.psi), math.sin(self.psi)*math.sin(self.theta)],\n                               [-math.sin(self.psi)*math.cos(self.phi) - math.cos(self.theta)*math.sin(self.phi)*math.cos(self.psi), -math.sin(self.psi)*math.sin(self.phi) + math.cos(self.theta)*math.cos(self.phi)*math.cos(self.psi), math.cos(self.psi)*math.sin(self.theta)],\n                               [math.sin(self.theta)*math.sin(self.phi), -math.sin(self.theta)*math.cos(self.phi), math.cos(self.theta)]])\n\n        print self.euler\n\n        rotation = np.dot(self.euler, np.array([self.x_grid.ravel(), self.y_grid.ravel(), self.z_grid.ravel()]))\n\n        x,y,z = self.x_grid, self.y_grid, self.z_grid\n\n        self.x_grid = rotation[0,:].reshape(x.shape)               \n        self.y_grid = rotation[1,:].reshape(y.shape)               \n        self.z_grid = rotation[2,:].reshape(z.shape)\n\n    def plot_self(self, ax):\n\n        ax.plot_surface(self.x_grid, self.y_grid, self.z_grid)\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection = '3d')\nax.set_aspect('equal')\nax.set_xlim([-10,10])\nax.set_ylim([-10,10])\nax.set_zlim([-10,10])\n\ncylinder_object = cylinder(0.0, 0.0, 0.0, 0.3, 12)\ncylinder_object.join_points(0.0, 0.0, 0.0, 8.0, 10.0, 2.0)\ncylinder_object.plot_self(ax)\n\nsphere_object = sphere(0.0, 0.0, 0.0, 1.0, 100)\nsphere_object2 = sphere(8.0, 10.0, 0.0, 1.0, 100)\nsphere_object.plot_self(ax)\nsphere_object2.plot_self(ax)\n</code></pre>\n\n<p>The expected outcome is to have a cylinder created which joins point A to to point B (in my example, sphere_object and sphere_object2).</p>\n\n<p>The problem is that the rotation seems to be right, but in the wrong direction, depending on which location the spheres appear in.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1550099930, "post_id": 54680820, "comment_id": 96150741, "body": "I know what you want to do, but I don&#39;t see the application of it. Like why do you need to <code>import X</code> at all, and why do you need to have an import that&#39;s not at the top of the file?"}, {"owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "edited": false, "score": 0, "creation_date": 1550101874, "post_id": 54680820, "comment_id": 96151269, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8056130/immutable-vs-mutable-types\">Immutable vs Mutable types</a>"}, {"owner": {"reputation": 136, "user_id": 3415962, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80ac04abc2e0fd9b70963047fa4d1ae2?s=128&d=identicon&r=PG&f=1", "display_name": "manji369", "link": "https://stackoverflow.com/users/3415962/manji369"}, "reply_to_user": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1550166350, "post_id": 54680820, "comment_id": 96179899, "body": "@wjandrea renamed variables to make it more clear"}], "answers": [{"comments": [{"owner": {"reputation": 136, "user_id": 3415962, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80ac04abc2e0fd9b70963047fa4d1ae2?s=128&d=identicon&r=PG&f=1", "display_name": "manji369", "link": "https://stackoverflow.com/users/3415962/manji369"}, "edited": false, "score": 0, "creation_date": 1550783750, "post_id": 54752462, "comment_id": 96408927, "body": "Thanks for the response. But, this is just a small part of a big project and so I can&#39;t simplify it to move the config out. I got around this by using a different approach of using class variables instead."}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "reply_to_user": {"reputation": 136, "user_id": 3415962, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80ac04abc2e0fd9b70963047fa4d1ae2?s=128&d=identicon&r=PG&f=1", "display_name": "manji369", "link": "https://stackoverflow.com/users/3415962/manji369"}, "edited": false, "score": 0, "creation_date": 1550847602, "post_id": 54752462, "comment_id": 96434438, "body": "@manji369 Oh, I assumed <code>repo</code> was a third-party module you didn&#39;t have control over, and you were just writing a script that uses it."}], "tags": [], "owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "is_accepted": false, "score": 0, "last_activity_date": 1550510812, "creation_date": 1550510812, "answer_id": 54752462, "question_id": 54680820, "link": "https://stackoverflow.com/questions/54680820/can-we-set-module-level-attributes-that-could-be-modified-within-a-session/54752462#54752462", "title": "Can we set module level attributes that could be modified within a session", "body": "<h3>Problem</h3>\n\n<p>From what I understand, you want to change the value of <code>VERIFY_CERTS</code> that <code>do_something()</code> uses.</p>\n\n<p>Firstly, your example can be simplified like this:</p>\n\n<p><strong>example.py</strong></p>\n\n<pre><code>VERIFY_CERTS = True\ndef do_something():\n    print(VERIFY_CERTS)\n</code></pre>\n\n<p><strong>test.py</strong></p>\n\n<pre><code>from example import do_something\nVERIFY_CERTS = False\ndo_something()\n</code></pre>\n\n<p>Running <code>test.py</code> will print <code>True</code>.</p>\n\n<hr>\n\n<h3>Solution</h3>\n\n<p>In <code>test.py</code>, simply import the whole module <code>example</code> (this is best practice for imports anyway), then set <code>example.VERIFY_CERTS</code>.</p>\n\n<pre><code>import example\nexample.VERIFY_CERTS = False\nexample.do_something()\n</code></pre>\n\n<p>Running this will print <code>False</code>.</p>\n"}], "owner": {"reputation": 136, "user_id": 3415962, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80ac04abc2e0fd9b70963047fa4d1ae2?s=128&d=identicon&r=PG&f=1", "display_name": "manji369", "link": "https://stackoverflow.com/users/3415962/manji369"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550510812, "creation_date": 1550099300, "last_edit_date": 1550166071, "question_id": 54680820, "link": "https://stackoverflow.com/questions/54680820/can-we-set-module-level-attributes-that-could-be-modified-within-a-session", "title": "Can we set module level attributes that could be modified within a session", "body": "<p>I am trying to add a module-level attribute to config file and want to do something like this..</p>\n\n<pre><code># repo/__init__.py file\npass\n\n# repo/config.py file\nVERIFY_CERTS = True\n</code></pre>\n\n<p>and then, use this variable in other sub-modules</p>\n\n<pre><code># repo/example.py\nfrom repo.config import VERIFY_CERTS\ndef do_something():\n    if VERIFY_CERTS:\n        do something..\n    else:\n        do something else\n</code></pre>\n\n<p>Now, when I use this repo module in another script, I want to be able to do:</p>\n\n<pre><code>from repo.config import VERIFY_CERTS\nVERIFY_CERTS = False\nfrom repo.example import do_something\ndo_something()\n</code></pre>\n\n<p>Is it possible to do something like this?</p>\n\n<p>Edit: It is definitely not a duplicate of <a href=\"https://stackoverflow.com/questions/8056130/immutable-vs-mutable-types\">Immutable vs Mutable types</a> since, it discusses something about mutable and immutable datatypes whereas, this one is about having a module level attribute that could be remembered in a session.\nModified variable names to clarify why I want to do this.</p>\n"}, {"tags": ["python", "django", "countries", "django-countries"], "answers": [{"tags": [], "owner": {"reputation": 633, "user_id": 4664727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pnqpW3lhR5M/AAAAAAAAAAI/AAAAAAAAD5c/GVZ7HIariZM/photo.jpg?sz=128", "display_name": "lukewarm", "link": "https://stackoverflow.com/users/4664727/lukewarm"}, "is_accepted": true, "score": 2, "last_activity_date": 1550107722, "creation_date": 1550107722, "answer_id": 54681939, "question_id": 54680801, "link": "https://stackoverflow.com/questions/54680801/how-to-add-a-class-to-the-django-countries-widget/54681939#54681939", "title": "How to add a class to the Django countries widget", "body": "<p>In Django, a form field is rendered into an HTML representation using a <a href=\"https://docs.djangoproject.com/en/2.1/ref/forms/widgets/\" rel=\"nofollow noreferrer\">widget</a>.</p>\n\n<p>Typically, you can make the widget render class and other HTML attributes by specifying these as arguments to the widget when you are defining your form. For example:</p>\n\n<pre><code>from django import forms\n\nclass CommentForm(forms.Form):\n    comment = forms.CharField(\n        widget=forms.Textarea(attrs={\"class\": \"my-class\"})\n    )\n</code></pre>\n\n<p>Given your question relates to a custom field in <a href=\"https://github.com/SmileyChris/django-countries\" rel=\"nofollow noreferrer\">django-countries</a> you should try the same by passing your custom attributes when instantiating a <a href=\"https://github.com/SmileyChris/django-countries#countryselectwidget\" rel=\"nofollow noreferrer\">CountrySelectWidget</a> instance. For example:</p>\n\n<pre><code>from django import forms\nfrom django_countries.fields import CountryField\nfrom django_countries.widgets import CountrySelectWidget\n\nclass CustomForm(forms.Form):\n    country = CountryField().formfield(\n        widget=CountrySelectWidget(\n           attrs={\"class\": \"my-class\"}\n        )\n    )\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10952466, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eDbTXDYLksQ/AAAAAAAAAAI/AAAAAAAAAEs/qnS8uX2mUCY/photo.jpg?sz=128", "display_name": "Gabriel Komander Zapata", "link": "https://stackoverflow.com/users/10952466/gabriel-komander-zapata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "accepted_answer_id": 54681939, "answer_count": 1, "score": 1, "last_activity_date": 1550107722, "creation_date": 1550099205, "question_id": 54680801, "link": "https://stackoverflow.com/questions/54680801/how-to-add-a-class-to-the-django-countries-widget", "title": "How to add a class to the Django countries widget", "body": "<p>Hi I am trying to use a Django plugin called django-countries to add a select with all the countries, sofar It's working but how can I add a html class to the select?</p>\n"}, {"tags": ["python", "django", "python-3.x", "templates", "rounding"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1550099026, "post_id": 54680738, "comment_id": 96150488, "body": "<a href=\"https://docs.djangoproject.com/en/2.1/ref/templates/builtins/#floatformat\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/2.1/ref/templates/builtins/&hellip;</a>"}, {"owner": {"reputation": 1450, "user_id": 9848469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4d331330f9b80b269a312a0be7d678?s=128&d=identicon&r=PG&f=1", "display_name": "gdef_", "link": "https://stackoverflow.com/users/9848469/gdef"}, "edited": false, "score": 1, "creation_date": 1550099068, "post_id": 54680738, "comment_id": 96150502, "body": "Take a look at this question <a href=\"https://stackoverflow.com/a/18186153/9848469\">stackoverflow.com/a/18186153/9848469</a>"}], "answers": [{"tags": [], "owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "is_accepted": true, "score": 0, "last_activity_date": 1550099003, "creation_date": 1550099003, "answer_id": 54680775, "question_id": 54680738, "link": "https://stackoverflow.com/questions/54680738/how-do-i-display-a-rounded-version-of-a-number-in-my-django-python-template/54680775#54680775", "title": "How do I display a rounded version of a number in my Django/Python template?", "body": "<p>I suggest you use the <a href=\"https://docs.djangoproject.com/en/2.1/ref/templates/builtins/#floatformat\" rel=\"nofollow noreferrer\"><code>floatformat</code></a> filter like:</p>\n\n<pre><code>{{ articlestat.votes|floatformat:\"0\" }} \n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "closed_date": 1550101404, "accepted_answer_id": 54680775, "answer_count": 1, "score": 0, "last_activity_date": 1550099003, "creation_date": 1550098732, "question_id": 54680738, "link": "https://stackoverflow.com/questions/54680738/how-do-i-display-a-rounded-version-of-a-number-in-my-django-python-template", "closed_reason": "Duplicate", "title": "How do I display a rounded version of a number in my Django/Python template?", "body": "<p>I'm using Django and Python 3.7.  In my template I have this</p>\n\n<pre><code>{{ round(articlestat.votes) }}\n</code></pre>\n\n<p>which results in teh error</p>\n\n<pre><code>Could not parse the remainder: '(articlestat.votes)' from 'round(articlestat.votes)'\n</code></pre>\n\n<p>Is there a way to display a rounded version of my number without creating an additional @property method in the model?   It just seems like overkill to do a method every time I want the data formatted a little differently.</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 2, "last_activity_date": 1550100021, "creation_date": 1550100021, "answer_id": 54680946, "question_id": 54680698, "link": "https://stackoverflow.com/questions/54680698/how-would-i-put-this-code-into-a-function/54680946#54680946", "title": "How would I put this code into a function", "body": "<p>You can make it a function that returns a 2-tuple:</p>\n\n<pre><code>from math import *\n\ndef newton(x):\n    xnew = iteration = None\n    for iteration in range(1, 1001):\n            xnew = x - (((3*10**-5)*exp((log1p(10**3/(3*10**-5)))*(1-exp(-.12*x))))-1)/(.12*(3*10**-5)*exp((log1p(10**3/(3*10**-5))))*(1-exp(-.12*x)*(-.12*x))) # the Newton-Raphson's formula\n            print(\"Error\",x-xnew,\" Xn:   \", xnew)\n            if abs(xnew - x) &lt; 0.000001:\n                break  \n            x = xnew\n    return xnew, iteration\n\nxnew, iteration = newton(20)\nprint('The root : %0.5f' % xnew)\nprint('The number of iterations : %d' % iteration)\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 11053364, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oP3C8Vh_M-s/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMe-l0xeAIuEinYf-3u_BDsWNqWPg/mo/photo.jpg?sz=128", "display_name": "reggiw", "link": "https://stackoverflow.com/users/11053364/reggiw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550100069, "creation_date": 1550098488, "last_edit_date": 1550100069, "question_id": 54680698, "link": "https://stackoverflow.com/questions/54680698/how-would-i-put-this-code-into-a-function", "title": "How would I put this code into a function", "body": "<p>I want to put this into a function newton(x) that allows users to enter there value for x.  </p>\n\n<pre><code>from math import *\nx=20\nfor iteration in range(1, 1001):\n\n        xnew = x - (((3*10**-5)*exp((log1p(10**3/(3*10**-5)))*(1-exp(-.12*x))))-1)/(.12*(3*10**-5)*exp((log1p(10**3/(3*10**-5))))*(1-exp(-.12*x)*(-.12*x))) # the Newton-Raphson's formula\n        print(\"Error\",x-xnew,\" Xn:   \", xnew)\n        if abs(xnew - x) &lt; 0.000001:\n            break  \n\n        x = xnew  \nprint('The root : %0.5f' % xnew)\nprint('The number of iterations : %d' % iteration)\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 2, "creation_date": 1550098938, "post_id": 54680696, "comment_id": 96150456, "body": "Your output format looks weird, is it really what you expect?"}, {"owner": {"reputation": 3, "user_id": 11059169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1e19b25ebae13a119f2bc84f7a22946?s=128&d=identicon&r=PG&f=1", "display_name": "MrJones", "link": "https://stackoverflow.com/users/11059169/mrjones"}, "reply_to_user": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1550099127, "post_id": 54680696, "comment_id": 96150516, "body": "unfortunately, yes!"}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1550099886, "post_id": 54680696, "comment_id": 96150729, "body": "What is the logic though? I do not see the pattern."}], "answers": [{"tags": [], "owner": {"reputation": 16300, "user_id": 11015427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsY7F.jpg?s=128&g=1", "display_name": "gmds", "link": "https://stackoverflow.com/users/11015427/gmds"}, "is_accepted": true, "score": 2, "last_activity_date": 1550099707, "creation_date": 1550099707, "answer_id": 54680894, "question_id": 54680696, "link": "https://stackoverflow.com/questions/54680696/regex-to-parse-equation/54680894#54680894", "title": "Regex to parse equation", "body": "<p>I think you want this:</p>\n\n<pre><code>import re\n\npattern = re.compile(r'([+-]?)([0-9]+)([a-z]?)([&gt;&lt;]?=?)')\nre.findall(pattern, '5x&gt;=7-5y+4z')\n\n&gt;&gt;&gt; [('', '5', 'x', '&gt;='), ('', '7', '', ''), ('-', '5', 'y', ''), ('+', '4', 'z', '')]\n</code></pre>\n\n<p>Each instance of the regex passed to <code>re.findall</code> is put into a tuple, which is then further split into strings corresponding to each of the groups in the regex.</p>\n\n<p>I took some liberties with the interpretation of the actual regex, since I'm not sure what the expected output for other cases would be (for example, would there be a <code>0x</code> term?)</p>\n"}], "owner": {"reputation": 3, "user_id": 11059169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1e19b25ebae13a119f2bc84f7a22946?s=128&d=identicon&r=PG&f=1", "display_name": "MrJones", "link": "https://stackoverflow.com/users/11059169/mrjones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 54680894, "answer_count": 1, "score": 0, "last_activity_date": 1550099852, "creation_date": 1550098480, "question_id": 54680696, "link": "https://stackoverflow.com/questions/54680696/regex-to-parse-equation", "title": "Regex to parse equation", "body": "<p>I'm trying to parse an equation such as </p>\n\n<blockquote>\n  <p>5x>=7-5y+4z</p>\n</blockquote>\n\n<p>into a list of tuples with python:</p>\n\n<pre><code>[('', '5', 'x', '&gt;='), ('', '7', '', ''), ('-', '5', 'y', ''), ('+', '4', 'z', '')]\n</code></pre>\n\n<p>I've managed to write a pattern (<code>pattern = \"[+-]?\\d*[a-z]?[&gt;&lt;=]*\"</code>) to break the equation into groups, but I have no idea how to make it return tuples.\nAny help appreciated... </p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1550098706, "post_id": 54680688, "comment_id": 96150381, "body": "<code>previous_element</code> is a local variable in <code>traverse</code> (since you haven&#39;t told Python otherwise)  but isn&#39;t defined until the second-to-last line of the function. Any earlier use is an error."}, {"owner": {"reputation": 1, "user_id": 10604882, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aOGISKjqpgU/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAk6-fzJXso-YxghjqqxqGNF1pN0A/mo/photo.jpg?sz=128", "display_name": "Busy Zhu", "link": "https://stackoverflow.com/users/10604882/busy-zhu"}, "edited": false, "score": 0, "creation_date": 1550098880, "post_id": 54680688, "comment_id": 96150439, "body": "But I have defined it outside the function. it&#39;s an object and I believe it&#39;s okay.  (first_element and second_element are both Tree_Node)"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 1, "creation_date": 1550099064, "post_id": 54680688, "comment_id": 96150500, "body": "You have defined the name outside the function. But you assign to the same name inside the function, which makes it local, unless you tell Python otherwise using a <code>nonlocal</code> or <code>global</code> declaration."}], "owner": {"reputation": 1, "user_id": 10604882, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aOGISKjqpgU/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAk6-fzJXso-YxghjqqxqGNF1pN0A/mo/photo.jpg?sz=128", "display_name": "Busy Zhu", "link": "https://stackoverflow.com/users/10604882/busy-zhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1550098987, "answer_count": 0, "score": 0, "last_activity_date": 1550098714, "creation_date": 1550098435, "last_edit_date": 1550098714, "question_id": 54680688, "link": "https://stackoverflow.com/questions/54680688/local-variable-referenced-before-assignment-but-i-didnt-see-whys-that", "closed_reason": "Duplicate", "title": "Local variable referenced before assignment but I didn&#39;t see why&#39;s that", "body": "<p>It says <code>previous_element</code> referenced before assignment. But I didn't see what's wrong with it.</p>\n\n<pre><code>class Solution:\n\n    def recoverTree(self, root: 'TreeNode') -&gt; 'None':\n        first_element = None\n        second_element = None\n        previous_element = TreeNode(-1)\n\n        def traverse(root):\n            if not root:\n                return\n            traverse(root.left)\n\n            if(first_element==None and previous_element.val &gt; root.val):\n                first_elemtent = previous_element #(at here!!!!!)\n            if(first_element and previous_element.val &lt; root.val):\n                second_element = root\n\n            previous_element = root\n\n            traverse(root.right)\n\n        traverse(root)\n\n        temp = first_element.val\n        first_element.val = second_element.val\n        second_element.val = temp\n</code></pre>\n"}, {"tags": ["python", "klepto"], "comments": [{"owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "edited": false, "score": 0, "creation_date": 1550100119, "post_id": 54680648, "comment_id": 96150789, "body": "I&#39;m not sure I&#39;m understanding what you want.  Do you want to delete multiple keys from the cache with one method, then sync all the deleted keys (so that it removes the associated file entries) in the archive?  I believe you could use some combination of <code>clear</code> and <code>load</code>, or <code>clear</code> and <code>dump</code>, or <code>sync(clear=True)</code>... depending on what you want to do."}, {"owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "edited": false, "score": 0, "creation_date": 1550151620, "post_id": 54680648, "comment_id": 96170961, "body": "If you provide a minimal self-contained example, I can provide a clearer answer -- with an example."}, {"owner": {"reputation": 13, "user_id": 11057952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4c52505258ab89fc960e2c1c9c0265?s=128&d=identicon&r=PG&f=1", "display_name": "starfish", "link": "https://stackoverflow.com/users/11057952/starfish"}, "reply_to_user": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "edited": false, "score": 0, "creation_date": 1550180229, "post_id": 54680648, "comment_id": 96185801, "body": "Many thanks - updated with a simplified version of a file indexer. The full version adds more specs, deals also with modified files and new files. And to avoid memory issues with huge directories, on the initial scan dumps to file archive in chunks."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11057952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4c52505258ab89fc960e2c1c9c0265?s=128&d=identicon&r=PG&f=1", "display_name": "starfish", "link": "https://stackoverflow.com/users/11057952/starfish"}, "edited": false, "score": 0, "creation_date": 1550214381, "post_id": 54700095, "comment_id": 96194240, "body": "Thanks - yes, you got it; speed is the thing. I&#39;ll do as you suggest."}, {"owner": {"reputation": 13, "user_id": 11057952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4c52505258ab89fc960e2c1c9c0265?s=128&d=identicon&r=PG&f=1", "display_name": "starfish", "link": "https://stackoverflow.com/users/11057952/starfish"}, "edited": false, "score": 0, "creation_date": 1550314920, "post_id": 54700095, "comment_id": 96229137, "body": "Great - that should do it thanks. Presumably - in your above - if you do use ar.popkeys() on the archive, then the line below ar.sync(clear=True) is no longer necessary."}, {"owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "reply_to_user": {"reputation": 13, "user_id": 11057952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4c52505258ab89fc960e2c1c9c0265?s=128&d=identicon&r=PG&f=1", "display_name": "starfish", "link": "https://stackoverflow.com/users/11057952/starfish"}, "edited": false, "score": 0, "creation_date": 1550320216, "post_id": 54700095, "comment_id": 96230383, "body": "Correct.  The point is, <code>sync</code> is a different use case than dropping keys from both cache and archive."}], "tags": [], "owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "is_accepted": true, "score": 0, "last_activity_date": 1550268335, "last_edit_date": 1550268335, "creation_date": 1550183492, "answer_id": 54700095, "question_id": 54680648, "link": "https://stackoverflow.com/questions/54680648/how-to-delete-multiple-items-from-klepto-file-archive-fast/54700095#54700095", "title": "How to delete multiple items from Klepto file archive fast?", "body": "<p>I see... you really are concerned about the <strong>speed</strong> of deleting one entry at at time from a <code>file_archive</code>.</p>\n\n<p>Ok, I agree. Using <code>__delitem__</code> or <code>pop</code> on a <code>file_archive</code> is a bit brutal when you want to delete several entries. The slowdown is due to the <code>file_archive</code> having to load and rewrite the entire file archive for each key you delete.  This isn't the case for a <code>dir_archive</code> or many of the other archives... but for a <code>file_archive</code> it is.  So that should be remedied...</p>\n\n<p><strong>UPDATE:</strong> I've added a new method that should enable faster dropping of specified keys...</p>\n\n<pre><code>&gt;&gt;&gt; import klepto as kl\n&gt;&gt;&gt; ar = kl.archives.file_archive('foo.pkl')\n&gt;&gt;&gt; ar['a'] = 1\n&gt;&gt;&gt; ar['b'] = 2\n&gt;&gt;&gt; ar['c'] = 3\n&gt;&gt;&gt; ar['d'] = 4\n&gt;&gt;&gt; ar['e'] = 5\n&gt;&gt;&gt; ar.dump()\n&gt;&gt;&gt; ar.popkeys(list('abx'), None)\n[1, 2, None]\n&gt;&gt;&gt; ar.sync(clear=True)\n&gt;&gt;&gt; ar\nfile_archive('foo.pkl', {'c': 3, 'e': 5, 'd': 4}, cached=True)\n&gt;&gt;&gt; ar.archive\nfile_archive('foo.pkl', {'c': 3, 'e': 5, 'd': 4}, cached=False)\n</code></pre>\n\n<p>Previously (i.e. in released versions), you could cheaply <code>pop</code> the keys you want from the local cache, and then do an <code>ar.sync(clear=True)</code> to remove the associated keys in the archive.  However, doing that assumes you have all the keys you want to preserve in memory. So, instead of loading all the keys into memory, you can now (at least in the soon-to-be-released version) do <code>popkeys</code> both in the cache and/or the archive to delete any unwanted keys from either.</p>\n"}], "owner": {"reputation": 13, "user_id": 11057952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4c52505258ab89fc960e2c1c9c0265?s=128&d=identicon&r=PG&f=1", "display_name": "starfish", "link": "https://stackoverflow.com/users/11057952/starfish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 54700095, "answer_count": 1, "score": 1, "last_activity_date": 1550268335, "creation_date": 1550098140, "last_edit_date": 1550180989, "question_id": 54680648, "link": "https://stackoverflow.com/questions/54680648/how-to-delete-multiple-items-from-klepto-file-archive-fast", "title": "How to delete multiple items from Klepto file archive fast?", "body": "<p>I'm using Klepto archive to index specs of files in a folder tree. After scanning the tree, I want to quickly remove references to deleted files. But simply removing an item one-by-one from the file archive is extremely slow.\nIs there a way to sync the changes to the archive, or delete multiple keys at once? (The 'sync' method only appears to add new items)</p>\n\n<p>The helpful answer by @Mike Mckerns to this question only deals with removing a single item:\n<a href=\"https://stackoverflow.com/questions/29270772/python-saving-and-editing-with-klepto/29291153\">Python Saving and Editing with Klepto</a></p>\n\n<p>Using files.sync() or files.dump() appears only to append data from the cache, not sync the deletes. Is there a way to delete keys from the cache and then sync those changes all-at-once. Individual deletes are far too slow.</p>\n\n<p>Here's a working example:</p>\n\n<pre><code>from klepto.archives import *\nimport os\n\nclass PathIndex:\n    def __init__(self,folder):\n        self.folder_path=folder\n        self.files=file_archive(self.folder_path+'/.filespecs',cache=False)\n        self.files.load() #load memory cache\n\n    def list_directory(self):\n        self.filelist=[]\n        for folder, subdirs, filelist in os.walk(self.folder_path): #go through every subfolder in a folder\n            for filename in filelist: #now through every file in the folder/subfolder\n                self.filelist.append(os.path.join(folder, filename))\n\n    def scan(self):\n        self.list_directory()\n        for path in self.filelist:\n            self.update_record(path)\n        self.files.dump() #save to file archive\n\n    def rescan(self):\n        self.list_directory() #rescan original disk\n        deletedfiles=[]\n\n        #code to ck for modified files etc            \n        #check for deleted files\n        for path in self.files:\n            try:\n                self.filelist.remove(path)  #self.filelist - disk files - leaving list of new files\n            except ValueError:\n                deletedfiles.append(path)\n\n        #code to add new files, the files left in self.filelist\n        for path in deletedfiles:\n            self.delete_record(path)\n        #looking to here sync modified index from modifed to disk\n\n    def update_record(self,path):\n        self.files[path]={'size':os.path.getsize(path),'modified':os.path.getmtime(path)}\n        #add other specs - hash of contents etc.\n\n    def delete_record(self,path):\n        del(self.files[path]) #delete from the memory cache\n        #this next line slows it all down\n        del(self.files.archive[path]) #delete from the disk cache\n\n#usage\n_index=PathIndex('/path/to/root')\n_index.scan()\n#delete, modify some files\n_index.rescan()\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "svm"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1550098626, "post_id": 54680647, "comment_id": 96150348, "body": "SVM is looking for a single value in each row in the column. The issue you have is two-fold. First, your column appears to contain a very long list of floats stored as a string. You should be able to parse that into a list with <code>eval()</code> (though that method gets a lot of people very upset for some good reasons) but then you will have a list of values, which will also not ingest unless you parse it out into individual columns"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1550098732, "post_id": 54680647, "comment_id": 96150390, "body": "@G.Anderson the <code>eval</code> issue can be avoided with <code>ast.literal_eval</code> here"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550098930, "post_id": 54680647, "comment_id": 96150454, "body": "@roganjosh fair point, but that still gets raked over the coals from what I&#39;ve seen, though either should be reasonably safe in this use-case IMO"}, {"owner": {"reputation": 16300, "user_id": 11015427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsY7F.jpg?s=128&g=1", "display_name": "gmds", "link": "https://stackoverflow.com/users/11015427/gmds"}, "edited": false, "score": 0, "creation_date": 1550099923, "post_id": 54680647, "comment_id": 96150739, "body": "In this case, why not just use <code>map(float, a.split(&#39;, &#39;))</code>?"}, {"owner": {"reputation": 1, "user_id": 11058247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2KvV-TaYQA8/AAAAAAAAAAI/AAAAAAAAAIo/UgYAtf8sKgw/photo.jpg?sz=128", "display_name": "Ellen Giacometti", "link": "https://stackoverflow.com/users/11058247/ellen-giacometti"}, "edited": false, "score": 0, "creation_date": 1550101207, "post_id": 54680647, "comment_id": 96151080, "body": "@ G. Anderson  already tried eval and the ast solution it didn&#39;t work. These values are being converted to str by some pandas function because the histogram is the result  from cv.calcHist"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1550101362, "post_id": 54680647, "comment_id": 96151123, "body": "In the source data frame, the <code>Color</code> column contained numpy arrays (apparently), not simple strings or numbers.  Since <code>csv</code> is inherently a simple 2d storage format - rows of comma separated data, complex cells of a dataframe have to be represented as a string.  That&#39;s what the <code>&quot;[1,2,3,...]&quot;</code> string represents, just <code>str(an_array)</code>.   The error means it&#39;s trying to convert this string into a float."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1550101458, "post_id": 54680647, "comment_id": 96151155, "body": "Why did you save the original dataframe with <code>to_csv</code>?  Did someone tell you that was the right format for a complex frame like yours?"}, {"owner": {"reputation": 1, "user_id": 11058247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2KvV-TaYQA8/AAAAAAAAAAI/AAAAAAAAAIo/UgYAtf8sKgw/photo.jpg?sz=128", "display_name": "Ellen Giacometti", "link": "https://stackoverflow.com/users/11058247/ellen-giacometti"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1550101712, "post_id": 54680647, "comment_id": 96151232, "body": "@hpaulj no one I just followed the tutorials. How can I solve this? I spent all day trying to solve this."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1550101761, "post_id": 54680647, "comment_id": 96151243, "body": "Do you still have the original data frame around?"}, {"owner": {"reputation": 1, "user_id": 11058247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2KvV-TaYQA8/AAAAAAAAAAI/AAAAAAAAAIo/UgYAtf8sKgw/photo.jpg?sz=128", "display_name": "Ellen Giacometti", "link": "https://stackoverflow.com/users/11058247/ellen-giacometti"}, "edited": false, "score": 0, "creation_date": 1550101834, "post_id": 54680647, "comment_id": 96151257, "body": "My feature needs to be all the 255 values. It together means the histogram of h channel of my image"}, {"owner": {"reputation": 1, "user_id": 11058247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2KvV-TaYQA8/AAAAAAAAAAI/AAAAAAAAAIo/UgYAtf8sKgw/photo.jpg?sz=128", "display_name": "Ellen Giacometti", "link": "https://stackoverflow.com/users/11058247/ellen-giacometti"}, "edited": false, "score": 0, "creation_date": 1550101894, "post_id": 54680647, "comment_id": 96151279, "body": "Yes, I have all data."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1550109105, "post_id": 54680647, "comment_id": 96153088, "body": "Use <code>to_pickle</code> to save the data frame in a way that can be reloaded easily.  Your dataframe is too complicated to save as <code>csv</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11058247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2KvV-TaYQA8/AAAAAAAAAAI/AAAAAAAAAIo/UgYAtf8sKgw/photo.jpg?sz=128", "display_name": "Ellen Giacometti", "link": "https://stackoverflow.com/users/11058247/ellen-giacometti"}, "is_accepted": false, "score": 0, "last_activity_date": 1550180105, "creation_date": 1550180105, "answer_id": 54699411, "question_id": 54680647, "link": "https://stackoverflow.com/questions/54680647/could-not-convert-string-to-float-using-pandas-and-numpy-for-a-svm-classifier/54699411#54699411", "title": "Could not convert string to float -Using Pandas and Numpy for a SVM Classifier", "body": "<p>XTrain =[list(map(float, hist)) for hist in train['Color']]</p>\n\n<p>Plus using ; as sep when reading and writing file\nSOLVE IT .</p>\n"}], "owner": {"reputation": 1, "user_id": 11058247, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2KvV-TaYQA8/AAAAAAAAAAI/AAAAAAAAAIo/UgYAtf8sKgw/photo.jpg?sz=128", "display_name": "Ellen Giacometti", "link": "https://stackoverflow.com/users/11058247/ellen-giacometti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 397, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1550180105, "creation_date": 1550098139, "question_id": 54680647, "link": "https://stackoverflow.com/questions/54680647/could-not-convert-string-to-float-using-pandas-and-numpy-for-a-svm-classifier", "title": "Could not convert string to float -Using Pandas and Numpy for a SVM Classifier", "body": "<p>I'm trying to use pandas to create a SVM classifier. I already generated my feature and save it using to_csv from pandas lib. This feature(Color) consists in a whole histogram. So, I have a list of 0 to 255 float values per line. There are 362 lines.\nHere is a piece of my code:</p>\n\n<pre><code>if __name__ == '__main__':\n    train = pd.read_csv('Train.csv',index_col='Object')\n    XTrain = train['Color']\n    ColorLabel = train['ColorLabel']\n    leTrain = LabelEncoder()\n    leTrain.fit(ColorLabel)\n    ColorLabel = leTrain.transform(ColorLabel)\n\n    svm = SVC()\n    parameters = {'kernel': ('linear', 'rbf'), 'C': (1, 0.25, 0.5, 0.75,0.05), 'gamma': (0.5,1, 2, 3, 'auto'),\n                  'decision_function_shape': ('ovo', 'ovr'),'class_weight': [{0: 1,1: w2} for w2 in [2, 4, 6, 10,12]]}\n    clf = GridSearchCV(svm, parameters,verbose = 2)\n    clf.fit(XTrain, ColorLabel)\n</code></pre>\n\n<p>Im just trying to fit the feature column Color in SVC.fit, however I receive an error message that says:</p>\n\n<blockquote>\n  <p>return array(a, dtype, copy=False, order=order)</p>\n  \n  <p>ValueError: could not convert string to float: '[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 2.0, 10.0, 0.0, 2.0, 0.0, 7.0, 0.0, 12.0, 2.0, 18.0, 36.0, 0.0, 87.0, 34.0, 13.0, 41.0, 30.0, 118.0, 137.0, 169.0, 530.0, 4684.0, 5746.0, 1975.0, 1815.0, 4079.0, 4725.0, 2411.0, 131.0, 434.0, 3799.0, 1435.0, 4380.0, 5.0, 0.0, 546.0, 0.0, 1695.0, 15.0, 0.0, 116.0, 82.0, 4.0, 52.0, 54.0, 4.0, 2.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]'</p>\n</blockquote>\n\n<p>Here is the head of my Train.csv</p>\n\n<blockquote>\n  <p>Object,Kurtosis,Skewness,Color,TextureLabel,ColorLabel\n  0122_LSG.jpg,-0.19026044432874611,-0.9694201939544961,\"[0.0, 0.0, 0.0,\n  0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 10.0, 6.0, 16.0, 90.0, 47.0, 114.0, 126.0, 1918.0, 733.0, 5404.0, 3956.0, 12750.0, 13551.0, 3222.0, 3927.0, 5776.0, 4896.0, 3807.0, 9007.0, 8835.0, 1029.0, 684.0, 495.0, 172.0, 121.0, 125.0, 37.0, 93.0, 31.0, 96.0, 73.0, 7.0, 15.0, 0.0, 22.0, 0.0, 0.0, 7.0, 5.0, 0.0, 0.0, 0.0, 2.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]\",L,S 0075_LSG.jpg,-0.25089779696431913,-0.5106815852572715,\"[0.0, 0.0, 0.0,\n  0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 22.0, 16.0, 461.0, 6.0, 37.0, 216.0, 5.0, 348.0, 45.0, 264.0, 294.0, 316.0, 999.0, 3057.0, 3625.0, 5399.0, 2420.0, 6031.0, 6636.0, 7442.0, 801.0, 5958.0, 7289.0, 11785.0, 6150.0, 8537.0, 4414.0, 398.0, 489.0, 449.0, 155.0, 270.0, 64.0, 230.0, 51.0, 101.0, 121.0, 73.0, 76.0, 36.0, 46.0, 123.0, 45.0, 51.0, 1.0, 78.0, 28.0, 0.0, 4.0, 70.0, 53.0, 0.0, 41.0, 75.0, 4.0, 39.0, 1.0, 94.0, 0.0, 18.0, 198.0, 0.0, 4.0, 225.0, 16.0, 158.0, 147.0, 8.0, 0.0, 6.0, 22.0, 0.0, 2.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]\",L,S 0157_LSP.jpg,-0.604961472275447,-0.8074495729146061,\"[0.0, 0.0, 0.0,\n  0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 5.0, 0.0, 48.0, 0.0, 0.0, 0.0, 0.0, 28.0, 0.0,</p>\n</blockquote>\n\n<p>I TRIED ALL THE TYPES OF TYPE CASTING THAT I KNOW astype,dtype,converters... PLEASE HELP ME</p>\n"}, {"tags": ["python", "sublimetext3"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 2, "creation_date": 1550099442, "post_id": 54680606, "comment_id": 96150594, "body": "I don&#39;t think the <code>py.exe</code> command is in the same place as the the Python interpreter <code>python.exe</code> on Windows systems\u2014so your path may not be set correctly. On my system it&#39;s in the <code>C:\\Windows</code> directory. It&#39;s also possible that you should be running <code>python</code> instead of <code>py</code>\u2014the latter being a launcher convenience utility."}, {"owner": {"reputation": 51, "user_id": 9220945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6d433062965caf8e91f9387b6b145a8?s=128&d=identicon&r=PG&f=1", "display_name": "EllaSolar", "link": "https://stackoverflow.com/users/9220945/ellasolar"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1550100989, "post_id": 54680606, "comment_id": 96151019, "body": "Hi @martineau! Can I ask what you mean by &quot;should be running python instead of py&quot;?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1550101222, "post_id": 54680606, "comment_id": 96151085, "body": "I meant maybe the scripts should be run using the command <b><code>python</code></b> instead of <b><code>py</code></b>. Here&#39;s a <a href=\"https://stackoverflow.com/questions/52617010/why-is-python-broken-in-visual-studio-2017/53136433#53136433\">link</a> to an answer describing what the <code>py</code> command is and does. I believe there&#39;s some configuration setting in sublime that controls what command is used to run Python scripts (I haven&#39;t used sublime myself in a long time\u2014and that it was only version 2)."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1550102358, "post_id": 54680606, "comment_id": 96151417, "body": "These google search results for <a href=\"https://www.google.com/search?hl=en&amp;as_q=how+to+configure+sublime+3+to+run+python+3&amp;as_epq=&amp;as_oq=&amp;as_eq=&amp;as_nlo=&amp;as_nhi=&amp;lr=&amp;cr=&amp;as_qdr=all&amp;as_sitesearch=&amp;as_occt=any&amp;safe=images&amp;as_filetype=&amp;as_rights=\" rel=\"nofollow noreferrer\">how to configure sublime 3 to run python 3</a> might be helpful."}, {"owner": {"reputation": 3594, "user_id": 9871463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3KP5T.jpg?s=128&g=1", "display_name": "Dinko Pehar", "link": "https://stackoverflow.com/users/9871463/dinko-pehar"}, "edited": false, "score": 0, "creation_date": 1550132881, "post_id": 54680606, "comment_id": 96160209, "body": "Read more about <a href=\"https://www.sublimetext.com/docs/3/build_systems.html\" rel=\"nofollow noreferrer\">Build Systems</a> and how can you configure yours custom."}, {"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 0, "creation_date": 1550182701, "post_id": 54680606, "comment_id": 96186809, "body": "This is 100% a path issue in that <code>py,exe</code> is not in the path that you&#39;re providing to the build. You need to either find where <code>py,.exe</code> is and point the path to that location or change to <code>python.exe</code> (presuming that the binary is at the path you&#39;re using here)."}], "owner": {"reputation": 51, "user_id": 9220945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6d433062965caf8e91f9387b6b145a8?s=128&d=identicon&r=PG&f=1", "display_name": "EllaSolar", "link": "https://stackoverflow.com/users/9220945/ellasolar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550097821, "creation_date": 1550097821, "question_id": 54680606, "link": "https://stackoverflow.com/questions/54680606/python-not-working-in-sublimetext-3-even-though-my-path-is-correctly-set-what-s", "title": "Python not working in SublimeText 3 even though my path is correctly set. What should I do?", "body": "<p>I'm trying to get python to work in Sublime but it just won't. This is what I'm getting: below</p>\n\n<pre><code>'py' is not recognized as an internal or external command,\noperable program or batch file.\n[Finished in 0.1s with exit code 1]\n[shell_cmd: py -3 -OO -u \"C:\\Users\\NAME REDACTED\\Desktop\\tetris.py\"]\n[dir: C:\\Users\\NAME REDACTED\\Desktop]\n[path: C:\\Python\\Python37]\n</code></pre>\n\n<p>The python path is the right place. I can get it to work on Pyzo and Atom, but I'm stubborn and really want sublime. Could someone please help me?</p>\n"}, {"tags": ["python", "mocking", "python-unittest"], "answers": [{"comments": [{"owner": {"reputation": 200, "user_id": 423192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0886233a7bf4279140654a3fd2605eb6?s=128&d=identicon&r=PG", "display_name": "nicotine", "link": "https://stackoverflow.com/users/423192/nicotine"}, "edited": false, "score": 1, "creation_date": 1550153106, "post_id": 54680577, "comment_id": 96171858, "body": "Thank you for pointing out my obvious mistake!  It turns out that I screwed up while anonymizing my actual issue, which was an <code>__init__.py</code> file present in <code>src</code> folder, which it turns out will also break relative imports for mock.patch somehow!"}], "tags": [], "owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "is_accepted": true, "score": 2, "last_activity_date": 1550097684, "creation_date": 1550097684, "answer_id": 54680577, "question_id": 54680532, "link": "https://stackoverflow.com/questions/54680532/mock-relative-import-from-same-python-module/54680577#54680577", "title": "Mock relative import from same python module", "body": "<p>You should patch <code>glob</code> not <code>baz</code>. Something like:</p>\n\n<pre><code>@mock.patch('package.bar.glob')\ndef test_baz(mock_glob):\n    mock_glob.return_value = ['fizz']\n    assert \"fizz\" in baz()\n</code></pre>\n"}], "owner": {"reputation": 200, "user_id": 423192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0886233a7bf4279140654a3fd2605eb6?s=128&d=identicon&r=PG", "display_name": "nicotine", "link": "https://stackoverflow.com/users/423192/nicotine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1000, "favorite_count": 0, "accepted_answer_id": 54680577, "answer_count": 1, "score": 2, "last_activity_date": 1550097684, "creation_date": 1550097394, "question_id": 54680532, "link": "https://stackoverflow.com/questions/54680532/mock-relative-import-from-same-python-module", "title": "Mock relative import from same python module", "body": "<p>Given the following package structure:</p>\n\n<pre><code># tree\n.\n\u251c\u2500\u2500 setup.py\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 package\n        \u251c\u2500\u2500 bar.py\n        \u251c\u2500\u2500 __init__.py\n        \u2514\u2500\u2500 test.py\n</code></pre>\n\n<p>And the following code:</p>\n\n<pre><code># bar.py\nfrom glob import glob\n\ndef baz():\n    return glob('./*')\n</code></pre>\n\n<p>How can I correctly mock the call to <code>glob</code> in <code>bar.baz</code> when performing a relative import in <code>test.py</code> ?  I've tried several approaches, including</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># test.py\nfrom unittest import mock\nfrom .bar import baz\n\n@mock.patch('package.bar.baz')\ndef test_baz(mock_baz):\n    mock_baz.return_value = ['fizz']\n    assert \"fizz\" in baz()\n\n\n# pytest src/package/test.py\n============================= test session starts ==============================\nplatform linux -- Python 3.7.1, pytest-4.0.0, py-1.7.0, pluggy-0.8.0\nrootdir: /home/bewing/package, inifile:\nplugins: cov-2.6.0, pylama-7.6.6, celery-4.2.1\ncollected 1 item\n\nsrc/package/test.py F                                                    [100%]\n\n=================================== FAILURES ===================================\n___________________________________ test_baz ___________________________________\n\nmock_baz = &lt;MagicMock name='baz' id='140447846207104'&gt;\n\n    @mock.patch('package.bar.baz')\n    def test_baz(mock_baz):\n        mock_baz.return_value = ['fizz']\n&gt;       assert \"fizz\" in baz()\nE       AssertionError: assert 'fizz' in ['./setup.py', './src']\nE        +  where ['./setup.py', './src'] = baz()\n\nsrc/package/test.py:7: AssertionError\n=========================== 1 failed in 0.33 seconds ===========================\n</code></pre>\n\n<p>and </p>\n\n<pre><code># test.py\nfrom unittest import mock\nfrom .bar import baz\n\n    @mock.patch('.bar.baz')\n    def test_baz(mock_baz):\n        mock_baz.return_value = ['fizz']\n        assert \"fizz\" in baz()\n\n# pytest src/package/test.py\n============================= test session starts ==============================\nplatform linux -- Python 3.7.1, pytest-4.0.0, py-1.7.0, pluggy-0.8.0\nrootdir: /home/bewing/package, inifile:\nplugins: cov-2.6.0, pylama-7.6.6, celery-4.2.1\ncollected 1 item\n\nsrc/package/test.py F                                                    [100%]\n\n=================================== FAILURES ===================================\n___________________________________ test_baz ___________________________________\n\nargs = (), keywargs = {}, extra_args = [], entered_patchers = []\nexc_info = (&lt;class 'ValueError'&gt;, ValueError('Empty module name'), &lt;traceback object at 0x7effb803a4c8&gt;)\npatching = &lt;unittest.mock._patch object at 0x7effbab69a58&gt;\n\n    @wraps(func)\n    def patched(*args, **keywargs):\n        extra_args = []\n        entered_patchers = []\n\n        exc_info = tuple()\n        try:\n            for patching in patched.patchings:\n&gt;               arg = patching.__enter__()\n\n/home/bewing/.pyenv/versions/3.7.1/lib/python3.7/unittest/mock.py:1183:\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/home/bewing/.pyenv/versions/3.7.1/lib/python3.7/unittest/mock.py:1239: in __enter__\n    self.target = self.getter()\n/home/bewing/.pyenv/versions/3.7.1/lib/python3.7/unittest/mock.py:1409: in &lt;lambda&gt;\n    getter = lambda: _importer(target)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ntarget = '.bar'\n\n    def _importer(target):\n        components = target.split('.')\n        import_path = components.pop(0)\n&gt;       thing = __import__(import_path)\nE       ValueError: Empty module name\n\n/home/bewing/.pyenv/versions/3.7.1/lib/python3.7/unittest/mock.py:1092: ValueError\n=========================== 1 failed in 0.47 seconds ===========================\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "oop"], "comments": [{"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 4, "creation_date": 1550097501, "post_id": 54680513, "comment_id": 96149935, "body": "They are functionally equivalent. Strictly speaking <code>object.method()</code> is calling a bound method in <code>object</code>. The <code>class</code> call is using an unbound method but explicitly passing in the object. If you are manipulating instance state always use, <code>object.method()</code>... reserve <code>class.method()</code> for <a href=\"https://docs.python.org/3/library/functions.html?highlight=classmethod#classmethod\" rel=\"nofollow noreferrer\"><code>@classmethod</code></a> or <a href=\"https://docs.python.org/3/library/functions.html?highlight=staticmethod#staticmethod\" rel=\"nofollow noreferrer\"><code>@staticmethod</code></a> functions."}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 2, "creation_date": 1550097509, "post_id": 54680513, "comment_id": 96149938, "body": "You would always use <code>student_one.average()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 11000101, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gQ9gFU04tIc/AAAAAAAAAAI/AAAAAAAAAAc/I5HePD7F9gI/photo.jpg?sz=128", "display_name": "Antonio", "link": "https://stackoverflow.com/users/11000101/antonio"}, "edited": false, "score": 0, "creation_date": 1550098386, "post_id": 54680595, "comment_id": 96150247, "body": "The &quot;back door&quot; explanation is very helpful. So it seems like I would only want to call from the class if there are any instances that would require me to access the average method (perhaps to do a similar calculation for those that are not a student). object.method() it is!"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 39, "user_id": 11000101, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gQ9gFU04tIc/AAAAAAAAAAI/AAAAAAAAAAc/I5HePD7F9gI/photo.jpg?sz=128", "display_name": "Antonio", "link": "https://stackoverflow.com/users/11000101/antonio"}, "edited": false, "score": 0, "creation_date": 1550098453, "post_id": 54680595, "comment_id": 96150276, "body": "@AntonioSaqueton Yes, you got it."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 4, "last_activity_date": 1604297018, "last_edit_date": 1604297018, "creation_date": 1550097787, "answer_id": 54680595, "question_id": 54680513, "link": "https://stackoverflow.com/questions/54680513/what-is-happening-behind-the-scenes-when-calling-object-method-and-class-metho/54680595#54680595", "title": "What is happening behind the scenes when calling object.method() and Class.method(object)?", "body": "<p>In your example, there is no difference. <strong>Use the first way.</strong> The second way makes it appear as though you need to use &quot;the back door&quot; for some reason, for example if <code>student_one</code> was not actually a <code>Student</code> instance but you wanted to specifically call the <code>average</code> method of the <code>Student</code> class.</p>\n<p>If an experienced Python developer were to read your code, seeing <code>Student.average(student_one)</code> may make them pause for a moment and wonder why the author wants to use the unbound <code>average</code> here. It would be an unusual style, and perhaps could imply that there may be something more subtle happening than there really was - a stumbling block.</p>\n<p>For what's going on behind the scenes, the first way uses a <a href=\"https://docs.python.org/3/glossary.html#term-method\" rel=\"nofollow noreferrer\"><em>bound method</em></a> and the second way just uses a normal <a href=\"https://docs.python.org/3/glossary.html#term-function\" rel=\"nofollow noreferrer\">function</a>.</p>\n<pre><code>&gt;&gt;&gt; Student.average\n&lt;function __main__.Student.average(self)&gt;\n&gt;&gt;&gt; student_one.average \n&lt;bound method Student.average of &lt;__main__.Student object at 0xcafef00d&gt;&gt;\n</code></pre>\n<p>A bound method is just a function which is bound to an instance, via <a href=\"https://docs.python.org/3/reference/datamodel.html#invoking-descriptors\" rel=\"nofollow noreferrer\">descriptor protocol</a>*, and the instance (&quot;self&quot;) is passed as the first positional argument implicitly:</p>\n<pre><code>&gt;&gt;&gt; student_one.average.__self__ is student_one \nTrue\n&gt;&gt;&gt; student_one.average.__func__ is Student.average \nTrue\n</code></pre>\n<p>By using the function on the class and passing in the instance explicitly, you essentially do the same thing as an invocation of the descriptor does automatically.</p>\n<p>For a deeper understanding of what a method is, there's detailed documentation of this binding process in the docs <a href=\"https://docs.python.org/3/howto/descriptor.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>*<sub> Just a fancy way of saying via the &quot;.&quot; i.e. the dotted attribute access</sub></p>\n"}], "owner": {"reputation": 39, "user_id": 11000101, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gQ9gFU04tIc/AAAAAAAAAAI/AAAAAAAAAAc/I5HePD7F9gI/photo.jpg?sz=128", "display_name": "Antonio", "link": "https://stackoverflow.com/users/11000101/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1604297018, "creation_date": 1550097264, "question_id": 54680513, "link": "https://stackoverflow.com/questions/54680513/what-is-happening-behind-the-scenes-when-calling-object-method-and-class-metho", "title": "What is happening behind the scenes when calling object.method() and Class.method(object)?", "body": "<p>I am pretty new to Python and am tackling OOP. I am a bit confused as to when to use calls to methods and classes. The sample code below outputs the average, however I am curious as to when you would use calling from the Class vs methods from a real-world perspective. I'm pretty sure this is just something that I may have yet to tackle, but it's just been a bit of a confusion as to when I would use one over the other.</p>\n\n<pre><code>class Student:\n    def __init__(self, new_name, new_grades):\n        self.name = new_name\n        self.grades = new_grades\n\n    def average(self):\n        return sum(self.grades) / len(self.grades)\n\nstudent_one = Student('Test User', [70, 88, 90, 99])\n\n# object.method()\nprint(student_one.average())\n\n# Class.method(object)\nprint(Student.average(student_one))\n</code></pre>\n"}, {"tags": ["python", "django", "session"], "answers": [{"tags": [], "owner": {"reputation": 959, "user_id": 1715544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/70bc546c5cb343d7f39d1e1ab1559273?s=128&d=identicon&r=PG", "display_name": "AmagicalFishy", "link": "https://stackoverflow.com/users/1715544/amagicalfishy"}, "is_accepted": true, "score": 2, "last_activity_date": 1550100648, "creation_date": 1550100648, "answer_id": 54681041, "question_id": 54680505, "link": "https://stackoverflow.com/questions/54680505/django-cant-use-session-vars-in-modelform/54681041#54681041", "title": "Django: Can&#39;t use session vars in ModelForm", "body": "<p>Try overriding the form's <code>__init__()</code> method and pass the session variable in as an argument to the form:</p>\n\n<pre><code>class AuxiForm(forms.ModelForm):\n    def __init__(filter_on, *args, **kwargs):\n        super(AuxiForm, self).__init__(*args, **kwargs)\n        self.fields['tipAux'] = forms.ModelChoiceField(\n            queryset=TipoAux.objects.filter(empresa=filter_on), \n            empty_label=None,\n            required=True, \n            to_field_name='codigo'\n        )\n</code></pre>\n\n<p>And, in your <code>view.py</code>, you could say something like: <code>form = AuxiForm(data=request.POST, filter_on=request.session['codEmp'])</code></p>\n\n<p>Alternatively, you could use Django's generic <a href=\"https://docs.djangoproject.com/en/2.1/topics/class-based-views/generic-editing/\" rel=\"nofollow noreferrer\">model view</a>. If your form isn't more complicated than the one you posted\u2014you'd just set the <code>queryset</code> attribute. (I'll leave the reading to you because I'm only just getting familiar with generic views myself.)</p>\n"}], "owner": {"reputation": 572, "user_id": 10922372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J84Fm.jpg?s=128&g=1", "display_name": "Gonzalo Dambra", "link": "https://stackoverflow.com/users/10922372/gonzalo-dambra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 54681041, "answer_count": 1, "score": 1, "last_activity_date": 1550100648, "creation_date": 1550097226, "question_id": 54680505, "link": "https://stackoverflow.com/questions/54680505/django-cant-use-session-vars-in-modelform", "title": "Django: Can&#39;t use session vars in ModelForm", "body": "<p>I have this session var:</p>\n\n<p><code>empresa=request.session['codEmp']</code></p>\n\n<p>I have a ModelForm with a ModelChoiceField:</p>\n\n<pre><code>class AuxiForm(forms.ModelForm):\n    tipAux = forms.ModelChoiceField(queryset=TipoAux.objects.all(), empty_label=None,\n                                    required=True, to_field_name='codigo')\n</code></pre>\n\n<p>If you see the queryset for <code>tipAux</code> it's currently calling for <strong>all</strong> the <code>TipoAux</code> objects, but I really need to do a <strong>filter</strong>, calling only the <code>TipoAux</code> objects that have the same <code>empresa</code> attribute that the user has on his <code>codEmp</code> session var.</p>\n\n<p>I tried by doing:</p>\n\n<pre><code>tipAux = forms.ModelChoiceField(queryset=TipoAux.objects.filter(empresa=request.session['codEmp']),\n                                empty_label=None, required=True,\n                                to_field_name='codigo')\n</code></pre>\n\n<p>But Django is not allowing me to use <code>request.session</code> in the form.</p>\n\n<p>Any way to handle this?</p>\n"}, {"tags": ["python", "append"], "comments": [{"owner": {"reputation": 1027, "user_id": 2543601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40e3e80e7c8697ec26e33e49cb8336bc?s=128&d=identicon&r=PG", "display_name": "Jarom", "link": "https://stackoverflow.com/users/2543601/jarom"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1550097565, "post_id": 54680473, "comment_id": 96149959, "body": "@Prune I believe this is an MCVE since I supplied the function code and the inputs that I&#39;m using.  I made some slight edits to make it easier to copy and paste.  I wish I could be more specific on the nature of the problem, but I don&#39;t know why it is giving the results it is."}, {"owner": {"reputation": 5089, "user_id": 125629, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/268e1289a09200334b832839bde8afa7?s=128&d=identicon&r=PG", "display_name": "John Keyes", "link": "https://stackoverflow.com/users/125629/john-keyes"}, "edited": false, "score": 0, "creation_date": 1550097942, "post_id": 54680473, "comment_id": 96150081, "body": "@jarom I&#39;d say the <code>groups_copy</code> is your problem. Try <code>groups_copy = copy.copy(groups)</code>. I&#39;m not in a position to run your code right now, but that&#39;s what jumps out at me."}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1550098010, "post_id": 54680473, "comment_id": 96150117, "body": "Just take note, you will need to <code>from copy import copy</code> for the above"}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "reply_to_user": {"reputation": 5089, "user_id": 125629, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/268e1289a09200334b832839bde8afa7?s=128&d=identicon&r=PG", "display_name": "John Keyes", "link": "https://stackoverflow.com/users/125629/john-keyes"}, "edited": false, "score": 1, "creation_date": 1550098185, "post_id": 54680473, "comment_id": 96150182, "body": "And @JohnKeyes copy and deepcopy both return different results"}, {"owner": {"reputation": 5089, "user_id": 125629, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/268e1289a09200334b832839bde8afa7?s=128&d=identicon&r=PG", "display_name": "John Keyes", "link": "https://stackoverflow.com/users/125629/john-keyes"}, "edited": false, "score": 0, "creation_date": 1550098384, "post_id": 54680473, "comment_id": 96150242, "body": "Yeah <code>deepcopy</code> is the way to go."}], "answers": [{"comments": [{"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 1, "creation_date": 1550098353, "post_id": 54680652, "comment_id": 96150232, "body": "Definitely <code>deepcopy</code>, tested and seems to give expected results"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 2, "last_activity_date": 1550098157, "creation_date": 1550098157, "answer_id": 54680652, "question_id": 54680473, "link": "https://stackoverflow.com/questions/54680473/append-on-a-3rd-order-list-not-working-as-expected/54680652#54680652", "title": "Append on a 3rd Order List Not Working as Expected", "body": "<p>It's still not a <em>minimal</em> example, but it's close enough to debug.</p>\n\n<p>Your problem is that your line</p>\n\n<pre><code>groups_copy = groups\n</code></pre>\n\n<p>does <em>not</em> copy the list -- it merely copies the reference to the top level.  Even the usual solution of</p>\n\n<pre><code>groups_copy = groups[:]\n</code></pre>\n\n<p>won't fix it, because this is a nested list -- the slice merely copies the top level.</p>\n\n<p>You need a <code>deep copy</code>:</p>\n\n<pre><code>from random import randint as rand\nfrom copy import deepcopy\n\ngroups = [['VT', 'TX', 'HI'],\n          ['MO', 'MA', 'SD'],\n          ['NV', 'KY', 'NM'],\n         ]\n\n...\n\n    groups_copy = deepcopy(groups)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0\n0\n1\n[['TX', 'HI', 'KY'], ['MA', 'SD', 'VT'], ['NV', 'NM', 'MO']]\ngroup_list\n[[['TX', 'HI', 'KY'], ['MA', 'SD', 'VT'], ['NV', 'NM', 'MO']]]\n2\n0\n1\n[['VT', 'TX', 'KY'], ['MA', 'SD', 'HI'], ['NV', 'NM', 'MO']]\ngroup_list\n[[['TX', 'HI', 'KY'], ['MA', 'SD', 'VT'], ['NV', 'NM', 'MO']], [['VT', 'TX', 'KY'], ['MA', 'SD', 'HI'], ['NV', 'NM', 'MO']]]\n2\n2\n1\n[['VT', 'TX', 'KY'], ['MO', 'MA', 'HI'], ['NV', 'NM', 'SD']]\ngroup_list\n[[['TX', 'HI', 'KY'], ['MA', 'SD', 'VT'], ['NV', 'NM', 'MO']],\n [['VT', 'TX', 'KY'], ['MA', 'SD', 'HI'], ['NV', 'NM', 'MO']],\n [['VT', 'TX', 'KY'], ['MO', 'MA', 'HI'], ['NV', 'NM', 'SD']]]\n</code></pre>\n\n<p>I inserted line feeds into the final line to make the result easier to read.</p>\n"}], "owner": {"reputation": 1027, "user_id": 2543601, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40e3e80e7c8697ec26e33e49cb8336bc?s=128&d=identicon&r=PG", "display_name": "Jarom", "link": "https://stackoverflow.com/users/2543601/jarom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "closed_date": 1550098675, "accepted_answer_id": 54680652, "answer_count": 1, "score": 0, "last_activity_date": 1550098157, "creation_date": 1550097108, "last_edit_date": 1550097719, "question_id": 54680473, "link": "https://stackoverflow.com/questions/54680473/append-on-a-3rd-order-list-not-working-as-expected", "closed_reason": "Duplicate", "title": "Append on a 3rd Order List Not Working as Expected", "body": "<p>I have some code that takes n groups of states and then creates multiple \"neighbors\" by swapping states between groups randomly.</p>\n\n<pre><code>from random import randint as rand\n\ngroups = [['VT', 'TX', 'HI', 'AR', 'PA', 'OK', 'AK', 'MI', 'ND', 'ID', 'NY', 'WV', 'FL', 'UT'],\n          ['MO', 'MA', 'SD', 'NE', 'GA', 'MN', 'SC', 'CA', 'RI', 'AZ', 'NH', 'MS', 'AL', 'WI', 'GU', 'CT', 'MT', 'TN', 'OH', 'OR', 'IA'],\n          ['NV', 'KY', 'NM', 'KS', 'IN', 'LA', 'DE', 'MD', 'CO', 'IL', 'VA', 'NC', 'WY', 'NJ', 'WA', 'ME']]\n\ndef hill_climb_nbr(groups,nbr_size):\n    #swap one state in and out of each group\n\n    group_list = []\n\n    for g in range(0,nbr_size):\n\n        temp_val = []\n\n        groups_copy = groups\n\n        for i in range(0,len(groups)):\n            rand_num = rand(0,len(groups[i])-1)\n            temp_val.append(groups[i][rand_num])\n            groups_copy[i].pop(rand_num)\n            print(rand_num)\n\n        for j in range(0,len(temp_val)):\n            groups_copy[j].append(temp_val[j-1])\n\n        print(groups_copy)\n        print('group_list')\n\n        group_list.append(groups_copy)\n\n        print(group_list)\n\n    return group_list\n\nhill_climb_nbr(groups,3)\n</code></pre>\n\n<p>Here is an example of input:</p>\n\n<pre><code>[['VT', 'TX', 'HI', 'AR', 'PA', 'OK', 'AK', 'MI', 'ND', 'ID', 'NY', 'WV', 'FL', 'UT'],\n ['MO', 'MA', 'SD', 'NE', 'GA', 'MN', 'SC', 'CA', 'RI', 'AZ', 'NH', 'MS', 'AL', 'WI', 'GU', 'CT', 'MT', 'TN', 'OH', 'OR', 'IA'],\n ['NV', 'KY', 'NM', 'KS', 'IN', 'LA', 'DE', 'MD', 'CO', 'IL', 'VA', 'NC', 'WY', 'NJ', 'WA', 'ME']]\n</code></pre>\n\n<p>The output of <code>hill_climb_nbr(groups,3)</code> where groups is the list of lists shown above is this:</p>\n\n<pre><code>[[['VT', 'TX', 'HI', 'AR', 'PA', 'OK', 'AK', 'MI', 'ND', 'ID', 'NY', 'WV', 'FL', 'UT'],\n  ['MO', 'MA', 'SD', 'NE', 'GA', 'MN', 'SC', 'CA', 'RI', 'AZ', 'NH', 'MS', 'AL', 'WI', 'GU', 'CT', 'MT', 'TN', 'OH', 'OR', 'IA'],\n  ['NV', 'KY', 'NM', 'KS', 'IN', 'LA', 'DE', 'MD', 'CO', 'IL', 'VA', 'NC', 'WY', 'NJ', 'WA', 'ME']],\n [['VT', 'TX', 'HI', 'AR', 'PA', 'OK', 'AK', 'MI', 'ND', 'ID', 'NY', 'WV', 'FL', 'UT'],\n  ['MO', 'MA', 'SD', 'NE', 'GA', 'MN', 'SC', 'CA', 'RI', 'AZ', 'NH', 'MS', 'AL', 'WI', 'GU', 'CT', 'MT', 'TN', 'OH', 'OR', 'IA'],\n  ['NV', 'KY', 'NM', 'KS', 'IN', 'LA', 'DE', 'MD', 'CO', 'IL', 'VA', 'NC', 'WY', 'NJ', 'WA', 'ME']],\n [['VT', 'TX', 'HI', 'AR', 'PA', 'OK', 'AK', 'MI', 'ND', 'ID', 'NY', 'WV', 'FL', 'UT'],\n  ['MO', 'MA', 'SD', 'NE', 'GA', 'MN', 'SC', 'CA', 'RI', 'AZ', 'NH', 'MS', 'AL', 'WI', 'GU', 'CT', 'MT', 'TN', 'OH', 'OR', 'IA'],\n  ['NV', 'KY', 'NM', 'KS', 'IN', 'LA', 'DE', 'MD', 'CO', 'IL', 'VA', 'NC', 'WY', 'NJ', 'WA', 'ME']]]\n</code></pre>\n\n<p>It is a strain to see, but it is just the same list of lists repeated three times.  </p>\n\n<p>While trying to diagnose the problem, I found that <code>groups_copy</code> looks correct right before the <code>group_list.append(groups_copy)</code>.  Somehow the final <code>group_list</code> turns out to be the last <code>groups_copy</code> repeated <code>nbr_size</code> times instead of each iteration of <code>groups_copy</code>.</p>\n\n<p>I've been looking at this for a few hours now and I'm about to loose my mind.  Does anything stand out to you as to where the issue is?</p>\n"}, {"tags": ["python", "numpy", "fft"], "answers": [{"tags": [], "owner": {"reputation": 338, "user_id": 9151228, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qle5r0vdaZQ/AAAAAAAAAAI/AAAAAAAABCQ/rfstD4rfaFg/photo.jpg?sz=128", "display_name": "Subhaneil Lahiri", "link": "https://stackoverflow.com/users/9151228/subhaneil-lahiri"}, "is_accepted": true, "score": 3, "last_activity_date": 1550111987, "last_edit_date": 1550111987, "creation_date": 1550101627, "answer_id": 54681188, "question_id": 54680467, "link": "https://stackoverflow.com/questions/54680467/how-to-use-numpy-fft-on-a-pulsed-signal/54681188#54681188", "title": "How to Use Numpy.FFT on A Pulsed Signal", "body": "<p>There are a few things going on here.  </p>\n\n<ol>\n<li>The first block gives a <em>period</em> of 3 ms, i.e. a frequency of 333.33 Hz</li>\n<li>The mean is not zero, so there will also be a zero frequency component.</li>\n<li>1000 ms is not divisible by 3 ms. The discrete Fourier transform assumes that the entire signal repeats with period equal to the window length (1000 ms). This means that you have 332 intervals of 3 ms and 1 interval of 4 ms. As it is not periodic at 333 Hz, there will be a spread of frequencies.</li>\n</ol>\n\n<p>You were using the correct values for <code>n</code> and <code>d</code>.<br>\nIn general, I find it more helpful to plot the output than printing out the values.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import matplotlib.pyplot as plt\nplt.plot(fs, amps)\n</code></pre>\n\n<p>see </p>\n\n<p><img src=\"https://i.stack.imgur.com/Hbn1H.png\" alt=\"pulse_freq_plot\"></p>\n"}], "owner": {"reputation": 33, "user_id": 11059074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e683d99c7a4bfff212f9682c1ff595?s=128&d=identicon&r=PG&f=1", "display_name": "Stooges4", "link": "https://stackoverflow.com/users/11059074/stooges4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 54681188, "answer_count": 1, "score": 3, "last_activity_date": 1550112139, "creation_date": 1550097091, "last_edit_date": 1550112139, "question_id": 54680467, "link": "https://stackoverflow.com/questions/54680467/how-to-use-numpy-fft-on-a-pulsed-signal", "title": "How to Use Numpy.FFT on A Pulsed Signal", "body": "<p>I am just starting to learn <code>numpy.fft</code>, so apologies in advance.\nI have an array consisting of 1000 elements of 1s and 0s, representing 1000ms of pulsed input consisting of trues and falses. I wanted to perform <code>rfft</code> on this array. For a simple example, I created this array that has a 1 on every 3rd element and 0 otherwise:</p>\n\n<pre><code>freq = 3\nfor j in range(0, 1000):\n    if freq != 0 and (((j + 1) % freq) == 0):\n        arr3hz.append(1)\n    else:\n        arr3hz.append(0)\n</code></pre>\n\n<p>I was expecting <code>rfft</code> to give me 3Hz somehow, I used this code:</p>\n\n<pre><code>n = len(arr3hz)\nd = 1 / 1000\nhs = np.fft.rfft(arr3hz)\nfs = np.fft.rfftfreq(n, d)\namps = np.absolute(hs)\n\nfor j in range(0, len(fs)):\n    fw.write(\"Freq: %d Amp: %f\\n\" % (fs[j], amps[j]))\n</code></pre>\n\n<p>On my written file, I am just seeing random frequency elements with random amplitudes, which I was not able to make sense of. What is wrong with my use of <code>numpy.rfft</code>? I was also not sure of what to use for <code>n</code> and <code>d</code> as well for an array like this.</p>\n"}, {"tags": ["python", "file", "ftp", "copy", "ftplib"], "owner": {"reputation": 11, "user_id": 11059061, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210732195940194/picture?type=large", "display_name": "sakdxsham", "link": "https://stackoverflow.com/users/11059061/sakdxsham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550133382, "creation_date": 1550096910, "last_edit_date": 1550133382, "question_id": 54680430, "link": "https://stackoverflow.com/questions/54680430/ftp-retrbinary-doesnt-work-for-pdf-file-only-some-text-is-copied-into-the-ne", "title": "FTP.retrbinary() doesn&#39;t work for PDF file, only some text is copied into the new file", "body": "<p>The files are getting created, but the PDF files have much less text just than the original PDFs, only the initial text.</p>\n\n<pre><code>import ftplib\nftp = ftplib.FTP()\nftp.connect(host='host', port=port)\nftp.login(user='uname', passwd=*****, acct='')\nfor file in ftp.nlst(dir_name):\n    with open(local_file, \"wb\") as f:\n        ftp.retrbinary(\"RETR \" + file, f.write)\nftp.quit()\n</code></pre>\n"}, {"tags": ["python", "string", "escaping", "shutil", "rawstring"], "comments": [{"owner": {"reputation": 159, "user_id": 10865070, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4YZ81RPRmw/AAAAAAAAAAI/AAAAAAAAACU/ghmQ1Rt4fsM/photo.jpg?sz=128", "display_name": "Owen", "link": "https://stackoverflow.com/users/10865070/owen"}, "edited": false, "score": 0, "creation_date": 1550097311, "post_id": 54680424, "comment_id": 96149878, "body": "Why didn&#39;t using <code>shutil.copy(fileName, &#39;\\\\\\\\server\\\\printer&#39;)</code> work?  I haven&#39;t used <code>shutil</code>, but my understanding of python strings tells me that should be fine."}, {"owner": {"reputation": 1467, "user_id": 9718110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gTdLM.jpg?s=128&g=1", "display_name": "ktzr", "link": "https://stackoverflow.com/users/9718110/ktzr"}, "edited": false, "score": 1, "creation_date": 1550097339, "post_id": 54680424, "comment_id": 96149883, "body": "\\ is an escape character. A \\ followed by an other char is used for special characters such as \\n (newline) \\t (tab) for a normal \\ you need to escape it and use \\\\. For paths you may find it easier to use /."}, {"owner": {"reputation": 11, "user_id": 11030604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPJ93.jpg?s=128&g=1", "display_name": "Ned Van Niman", "link": "https://stackoverflow.com/users/11030604/ned-van-niman"}, "edited": false, "score": 0, "creation_date": 1550161138, "post_id": 54680424, "comment_id": 96177039, "body": "Owen: that particular method call gets the error <code>FileNotFoundError: [WinError 2] The system cannot find the file specified: &#39;\\\\\\\\di-shrinkrap\\\\satoHand&#39;</code> I don&#39;t know why that doesn&#39;t work. ktzr: That doesn&#39;t explain why Owen&#39;s method call doesn&#39;t work. Using / gives a similar error."}, {"owner": {"reputation": 11, "user_id": 11030604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPJ93.jpg?s=128&g=1", "display_name": "Ned Van Niman", "link": "https://stackoverflow.com/users/11030604/ned-van-niman"}, "edited": false, "score": 0, "creation_date": 1550169870, "post_id": 54680424, "comment_id": 96181401, "body": "I&#39;ve since abandoned the <code>shutil.copy()</code> function in favor of running a batch file to copy the printable file over. Don&#39;t have to worry about this error anymore lol"}], "owner": {"reputation": 11, "user_id": 11030604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPJ93.jpg?s=128&g=1", "display_name": "Ned Van Niman", "link": "https://stackoverflow.com/users/11030604/ned-van-niman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1550099750, "creation_date": 1550096855, "last_edit_date": 1550099750, "question_id": 54680424, "link": "https://stackoverflow.com/questions/54680424/why-is-a-backslash-is-becoming-two-my-string", "title": "Why is a backslash is becoming two my string?", "body": "<p>I want to send a text file to a network printer using Python on a Windows everything. I can't format my destination string properly. This method :</p>\n\n<pre><code>shutil.copy(fileName, '\\\\server\\printer')\n</code></pre>\n\n<p>Spits out this error :</p>\n\n<pre><code>FileNotFoundError: [Errno 2] No such file or directory: '\\\\server\\\\printer'\n</code></pre>\n\n<p>Where in the world is that second backslash coming from?</p>\n\n<p>I can copy files with success from the command prompt, which narrows my problem down to this <code>shutil.copy()</code> method. I've been researching strings, string representations, escape characters, and UNC paths with no luck.</p>\n\n<p>Maybe we should escape those backslashes like this?</p>\n\n<pre><code>shutil.copy(fileName, '\\\\\\\\server\\\\printer')\n</code></pre>\n\n<p>Nah, maybe we should try a raw string like this?</p>\n\n<pre><code>shutil.copy(fileName, r'\\\\server\\printer')\n</code></pre>\n\n<p>Nah, that doesn't work. I guess I don't know much about how the destination string moves behind the scenes or what it looks like while doing that, and I'm not really sure how to find out. Maybe I should dig into the <code>shutil.copy()</code> method? Okay lets take a look,</p>\n\n<pre><code>def copyfile(src, dst, *, follow_symlinks=True):\n    \"\"\"Copy data from src to dst.\n\n    If follow_symlinks is not set and src is a symbolic link, a new\n    symlink will be created instead of copying the file it points to.\n\n    \"\"\"\n    if _samefile(src, dst):\n        raise SameFileError(\"{!r} and {!r} are the same file\".format(src, dst))\n\n    for fn in [src, dst]:\n        try:\n            st = os.stat(fn)\n        except OSError:\n            # File most likely does not exist\n            pass\n        else:\n            # XXX What about other special files? (sockets, devices...)\n            if stat.S_ISFIFO(st.st_mode):\n                raise SpecialFileError(\"`%s` is a named pipe\" % fn)\n\n    if not follow_symlinks and os.path.islink(src):\n        os.symlink(os.readlink(src), dst)\n    else:\n        with open(src, 'rb') as fsrc:\n            with open(dst, 'wb') as fdst:\n                copyfileobj(fsrc, fdst)\n    return dst\n</code></pre>\n\n<p>See I don't even know where to start when looking at something like this and it seems like more of a headache than I can afford for such an innocuous error.</p>\n"}, {"tags": ["python", "opencv", "ocr"], "comments": [{"owner": {"reputation": 2837, "user_id": 6730448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/68eebbe4b190040ef1201b845374a7c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rick M.", "link": "https://stackoverflow.com/users/6730448/rick-m"}, "edited": false, "score": 2, "creation_date": 1550157826, "post_id": 54680403, "comment_id": 96174993, "body": "I tried some morphological operations on these images and it works with all letters except R, E and S. Tricky question, have you made any progress?"}, {"owner": {"reputation": 385, "user_id": 4720383, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/d17cb2dba42a5834f1536c48e4542aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Stephane Hatgis-Kessell", "link": "https://stackoverflow.com/users/4720383/stephane-hatgis-kessell"}, "reply_to_user": {"reputation": 2837, "user_id": 6730448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/68eebbe4b190040ef1201b845374a7c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rick M.", "link": "https://stackoverflow.com/users/6730448/rick-m"}, "edited": false, "score": 1, "creation_date": 1550179750, "post_id": 54680403, "comment_id": 96185581, "body": "@RickM.  My best results seem to be from using a Gaussian blur, then adaptive thresholding, erosion, dilation, and finally contouring, however, these results are still not adequate."}, {"owner": {"reputation": 8123, "user_id": 4228275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K3MMo.png?s=128&g=1", "display_name": "Berriel", "link": "https://stackoverflow.com/users/4228275/berriel"}, "edited": false, "score": 0, "creation_date": 1550416501, "post_id": 54680403, "comment_id": 96251473, "body": "@StephaneHatgis-Kessell have you tried to fix manually and check if the OCR works? Maybe you are working in the wrong direction and what you need is a better OCR, idk."}, {"owner": {"reputation": 385, "user_id": 4720383, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/d17cb2dba42a5834f1536c48e4542aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Stephane Hatgis-Kessell", "link": "https://stackoverflow.com/users/4720383/stephane-hatgis-kessell"}, "reply_to_user": {"reputation": 8123, "user_id": 4228275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K3MMo.png?s=128&g=1", "display_name": "Berriel", "link": "https://stackoverflow.com/users/4228275/berriel"}, "edited": false, "score": 0, "creation_date": 1550453360, "post_id": 54680403, "comment_id": 96261085, "body": "@Berriel I am using pytesseract, which I assume to be a pretty good OCR."}, {"owner": {"reputation": 2837, "user_id": 6730448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/68eebbe4b190040ef1201b845374a7c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rick M.", "link": "https://stackoverflow.com/users/6730448/rick-m"}, "edited": false, "score": 1, "creation_date": 1550568291, "post_id": 54680403, "comment_id": 96305832, "body": "@StephaneHatgis-Kessell Can you update the question with your best results?"}, {"owner": {"reputation": 385, "user_id": 4720383, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/d17cb2dba42a5834f1536c48e4542aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Stephane Hatgis-Kessell", "link": "https://stackoverflow.com/users/4720383/stephane-hatgis-kessell"}, "reply_to_user": {"reputation": 2837, "user_id": 6730448, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/68eebbe4b190040ef1201b845374a7c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rick M.", "link": "https://stackoverflow.com/users/6730448/rick-m"}, "edited": false, "score": 1, "creation_date": 1550611568, "post_id": 54680403, "comment_id": 96330354, "body": "@RickM. Just updated the question"}, {"owner": {"reputation": 3135, "user_id": 7441757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d139faa2ede7b2b6109852cd418f67?s=128&d=identicon&r=PG&f=1", "display_name": "Roelant", "link": "https://stackoverflow.com/users/7441757/roelant"}, "edited": false, "score": 0, "creation_date": 1550748802, "post_id": 54680403, "comment_id": 96388466, "body": "Do you know how this text has been created? :)"}, {"owner": {"reputation": 618, "user_id": 9110142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f6b53b40e7bc996acd38444b2e1975?s=128&d=identicon&r=PG&f=1", "display_name": "Satya", "link": "https://stackoverflow.com/users/9110142/satya"}, "edited": false, "score": 0, "creation_date": 1550837144, "post_id": 54680403, "comment_id": 96428110, "body": "Try using generative adversarial networks. It should help."}], "answers": [{"tags": [], "owner": {"reputation": 1212, "user_id": 3732793, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/uobgC.jpg?s=128&g=1", "display_name": "user3732793", "link": "https://stackoverflow.com/users/3732793/user3732793"}, "is_accepted": false, "score": 2, "last_activity_date": 1550851310, "creation_date": 1550851310, "answer_id": 54830893, "question_id": 54680403, "link": "https://stackoverflow.com/questions/54680403/opencv-python-fixing-broken-text/54830893#54830893", "title": "OpenCV Python - Fixing Broken Text", "body": "<p>your images are just results not the source right ?\ndid you play with the blur parameters like 21, 21</p>\n\n<pre><code>blur2 = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\nblur2 = cv2.GaussianBlur(blur2 , (21, 21), 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3400, "user_id": 6901690, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/d9QRH.png?s=128&g=1", "display_name": "razimbres", "link": "https://stackoverflow.com/users/6901690/razimbres"}, "is_accepted": false, "score": 4, "last_activity_date": 1550935579, "last_edit_date": 1550935579, "creation_date": 1550852042, "answer_id": 54831087, "question_id": 54680403, "link": "https://stackoverflow.com/questions/54680403/opencv-python-fixing-broken-text/54831087#54831087", "title": "OpenCV Python - Fixing Broken Text", "body": "<p>You can train a GAN (Generative Adversarial Network) to do that though Image Completion: </p>\n\n<p>Image Completion using Deep Convolutional Generative Adversarial Nets</p>\n\n<p><a href=\"https://github.com/saikatbsk/ImageCompletion-DCGAN\" rel=\"nofollow noreferrer\">https://github.com/saikatbsk/ImageCompletion-DCGAN</a></p>\n\n<p>Example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gUZUU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gUZUU.png\" alt=\"Image Completion\"></a></p>\n\n<p>For more info about GANs:</p>\n\n<p><a href=\"https://www.slideshare.net/RubensZimbres/gans-deep-learning-summer-school\" rel=\"nofollow noreferrer\">GANs Presentation</a></p>\n"}], "owner": {"reputation": 385, "user_id": 4720383, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/d17cb2dba42a5834f1536c48e4542aa1?s=128&d=identicon&r=PG&f=1", "display_name": "Stephane Hatgis-Kessell", "link": "https://stackoverflow.com/users/4720383/stephane-hatgis-kessell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1680, "favorite_count": 2, "answer_count": 2, "score": 12, "last_activity_date": 1550935579, "creation_date": 1550096704, "last_edit_date": 1550611548, "question_id": 54680403, "link": "https://stackoverflow.com/questions/54680403/opencv-python-fixing-broken-text", "title": "OpenCV Python - Fixing Broken Text", "body": "<p>I am attempting to repair broken text (the images below) so that I can perform OCR on the images. How do I go about repairing the text below? I have already tried dilation, erosion, morphology closing, and using the distance between contours. None of these seem to work. I would appreciate any help, thanks.</p>\n\n<p>Broken Text:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9NTXk.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/9NTXk.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/oRn7V.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/oRn7V.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/aSUD2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/aSUD2.png\" alt=\"enter image description here\"></a></p>\n\n<p>Attempted Solutions (none work):</p>\n\n<pre><code>import cv2\nimport pytesseract\nimport numpy as np\n\nimg = cv2.imread (\"/Users/2020shatgiskessell/Desktop/OpenSlate/FN2.png\")\n\ndef OCR (img):\n    config = ('-l eng --oem 1 --psm 3')\n    text = pytesseract.image_to_string(img, config = config)\n    return text\n\ndef get_countour(img):\n        try:\n            output = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n            output = output.copy()\n        except Exception:\n            output = img.copy()\n        #imgray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n        #ret, thresh = cv2.threshold(output, 127, 255, 0)\n        contours, hierarchy = cv2.findContours(output, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)\n        c = max(contours, key = cv2.contourArea)\n        contours.remove(c)\n        cv2.drawContours(output, contours, -1, (0,255,0),-1)\n\n        kernel = np.ones((2,1),np.uint8)\n        #eroded = cv2.erode(output, kernel,1)\n        output = cv2.dilate(output, kernel,1)\n        return output\n\n\n\ndef strengthen(img):\n    try:\n        imgray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n    except Exception:\n        imgray = img\n    #ret, thresh = cv2.threshold(imgray,0,255,cv2.THRESH_BINARY | cv2.THRESH_OTSU)\n    #blur1 = cv2.blur(imgray,(5,5))\n    blur2 = cv2.GaussianBlur(imgray,(5,5),0)\n    thresh2 = cv2.adaptiveThreshold(blur2, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 31, 2)\n    kernel = np.ones((2,1),np.uint8)\n    #eroded = cv2.erode(thresh2, kernel,1)\n    #opening = cv2.morphologyEx(eroded, cv2.MORPH_CLOSE, kernel)\n    #closing = cv2.morphologyEx(opening, cv2.MORPH_CLOSE, kernel)\n    return thresh2\n\n\n#MNIST(img)\nstrengthened= strengthen(img)\n\ncontours = get_countour(strengthened)\n\nprint(\"from morphology transformation: \"+ OCR(contours))\n\ncv2.imshow('img', img)\ncv2.imshow('contour', contours)\n\ncv2.waitKey(0)\ncv2.destroyAllWindows()\n</code></pre>\n\n<p>The above images are recognized as:</p>\n\n<p>Image 1: (CAN ajne oF</p>\n\n<p>Image 2: > AMAR VRAIR</p>\n\n<p>Image 3: STure</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1550096309, "post_id": 54680319, "comment_id": 96149526, "body": "<code>df.melt(&#39;col1&#39;) </code>"}, {"owner": {"reputation": 573, "user_id": 7748514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Dy0VE.png?s=128&g=1", "display_name": "Liquidity", "link": "https://stackoverflow.com/users/7748514/liquidity"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1550096835, "post_id": 54680319, "comment_id": 96149725, "body": "Of course! I had to add <code>.replace(to_replace=&#39;None&#39;, value=np.nan).dropna()</code> to get rid of the rows with <code>None</code>, but that works."}], "owner": {"reputation": 573, "user_id": 7748514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Dy0VE.png?s=128&g=1", "display_name": "Liquidity", "link": "https://stackoverflow.com/users/7748514/liquidity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1550096392, "answer_count": 0, "score": 0, "last_activity_date": 1550096225, "creation_date": 1550096225, "question_id": 54680319, "link": "https://stackoverflow.com/questions/54680319/rearrange-dataframe-to-turn-multiple-columns-into-rows", "closed_reason": "Duplicate", "title": "Rearrange dataframe to turn multiple columns into rows", "body": "<p>I have a data frame in this format, but with hundreds more rows and columns:</p>\n\n<pre><code>df = pd.DataFrame({'col1': ['A', 'B', 'C'],\n                        'col2': ['1, 5, 10', '1, 10, 20', '1, 5, 10'],\n                      'col3': ['2, 10, 20', '2, 10, 20', 'None']})\n</code></pre>\n\n<p>Instead of having so many columns, I want to rearrange the df so each value in <code>col1</code> is duplicated across many rows, and rearrange the values in this way:</p>\n\n<pre><code>dfoutput = pd.DataFrame({'col1': ['A', 'A', 'B', 'B', 'C'],\n         'col2': ['1, 5, 10', '2, 10, 20', '1, 10, 20', '2, 10, 20', '1, 5, 10']})\n</code></pre>\n\n<p>I tried using combinations of <code>df.melt</code> and <code>df.groupby</code> but I'm getting nowhere. I also found <a href=\"https://stackoverflow.com/questions/38203352/expand-pandas-dataframe-column-into-multiple-rows\">this solution</a>, but I have hundreds of columns to split instead of 1 (and they aren't tuples). I also fiddled with the answer <a href=\"https://stackoverflow.com/questions/49147996/explode-column-of-list-to-multiple-rows?noredirect=1&amp;lq=1\">given here</a>, but the df organization is different enough that I couldn't get it to work for my df.</p>\n"}, {"tags": ["python", "python-2.7", "scrapy", "virtual-machine"], "comments": [{"owner": {"reputation": 2270, "user_id": 4082726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/facc0506d0cbf1067dccd342b4cb3e94?s=128&d=identicon&r=PG", "display_name": "malberts", "link": "https://stackoverflow.com/users/4082726/malberts"}, "edited": false, "score": 0, "creation_date": 1550117624, "post_id": 54680310, "comment_id": 96154873, "body": "Please clarify: do you use the <code>virtualenv</code> package (as per the queation title)? Or were you referring to the fact that you use a virtual machine?"}, {"owner": {"reputation": 98, "user_id": 10893977, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-47aMylur4Ro/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbeQuWPL_TZFj2EbKtOv8qDFlndig/mo/photo.jpg?sz=128", "display_name": "timmy turner", "link": "https://stackoverflow.com/users/10893977/timmy-turner"}, "reply_to_user": {"reputation": 2270, "user_id": 4082726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/facc0506d0cbf1067dccd342b4cb3e94?s=128&d=identicon&r=PG", "display_name": "malberts", "link": "https://stackoverflow.com/users/4082726/malberts"}, "edited": false, "score": 0, "creation_date": 1550255327, "post_id": 54680310, "comment_id": 96215971, "body": "@malberts it&#39;s virtualenv in virtual machine"}, {"owner": {"reputation": 2270, "user_id": 4082726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/facc0506d0cbf1067dccd342b4cb3e94?s=128&d=identicon&r=PG", "display_name": "malberts", "link": "https://stackoverflow.com/users/4082726/malberts"}, "edited": false, "score": 0, "creation_date": 1550255808, "post_id": 54680310, "comment_id": 96216201, "body": "Run <code>pip freeze</code> and attach that list here."}], "answers": [{"comments": [{"owner": {"reputation": 98, "user_id": 10893977, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-47aMylur4Ro/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbeQuWPL_TZFj2EbKtOv8qDFlndig/mo/photo.jpg?sz=128", "display_name": "timmy turner", "link": "https://stackoverflow.com/users/10893977/timmy-turner"}, "edited": false, "score": 0, "creation_date": 1550413299, "post_id": 54728009, "comment_id": 96250613, "body": "Thank you but i tried this solution but it didn&#39;work so i removed it and reinstalled it but still same problem"}, {"owner": {"reputation": 1254, "user_id": 1552998, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8e4ee1163c3c9a053d1ca5244c0ffc88?s=128&d=identicon&r=PG", "display_name": "stormfield", "link": "https://stackoverflow.com/users/1552998/stormfield"}, "reply_to_user": {"reputation": 98, "user_id": 10893977, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-47aMylur4Ro/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbeQuWPL_TZFj2EbKtOv8qDFlndig/mo/photo.jpg?sz=128", "display_name": "timmy turner", "link": "https://stackoverflow.com/users/10893977/timmy-turner"}, "edited": false, "score": 0, "creation_date": 1550413379, "post_id": 54728009, "comment_id": 96250636, "body": "could you run pip freeze and attach that list here so that everyone can see the list?"}], "tags": [], "owner": {"reputation": 1254, "user_id": 1552998, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8e4ee1163c3c9a053d1ca5244c0ffc88?s=128&d=identicon&r=PG", "display_name": "stormfield", "link": "https://stackoverflow.com/users/1552998/stormfield"}, "is_accepted": false, "score": 0, "last_activity_date": 1550353867, "creation_date": 1550353867, "answer_id": 54728009, "question_id": 54680310, "link": "https://stackoverflow.com/questions/54680310/cant-run-scrapy-in-virtualenv/54728009#54728009", "title": "can&#39;t run scrapy in virtualenv", "body": "<p>I guess pyopenssl is not the latest version. Upgrade it and retry.</p>\n\n<p>general format to upgrade package using pip is :</p>\n\n<p><code>sudo pip install [package_name] --upgrade</code></p>\n\n<p>hence use :</p>\n\n<p><code>sudo pip install pyopenssl --upgrade</code></p>\n\n<p>(make sure the virtualenv you are using is active)</p>\n"}], "owner": {"reputation": 98, "user_id": 10893977, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-47aMylur4Ro/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbeQuWPL_TZFj2EbKtOv8qDFlndig/mo/photo.jpg?sz=128", "display_name": "timmy turner", "link": "https://stackoverflow.com/users/10893977/timmy-turner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1550353867, "creation_date": 1550096173, "question_id": 54680310, "link": "https://stackoverflow.com/questions/54680310/cant-run-scrapy-in-virtualenv", "title": "can&#39;t run scrapy in virtualenv", "body": "<p>I've set up using Vagrant &amp; VirtualBox, I have installed scrapy correctly and when I run </p>\n\n<pre><code>/program$ scrapy -v\nScrapy 1.6.0 - no active project\n</code></pre>\n\n<p>however when I run <code>scrapy shell https://www.google.com</code> I get the following error </p>\n\n<pre><code>from OpenSSL._util import lib as pyOpenSSLlib\nImportError: No module named _util\n</code></pre>\n\n<p>I tried <code>sudo pip install pyopenssl --user --upgrade</code> from the following same question <a href=\"https://stackoverflow.com/questions/50324329/running-scrapy-but-it-error-no-module-named-util\">running Scrapy but it error: No module named _util</a>\nbut it did not fix . I use python 2.7 </p>\n"}, {"tags": ["python", "pandas", "dictionary", "traveling-salesman", "gurobi"], "comments": [{"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1550099854, "post_id": 54680307, "comment_id": 96150722, "body": "Is the commented-out <code>data</code> list-of-lists a pairwise distance matrix? Should it be symmetrical?"}, {"owner": {"reputation": 81, "user_id": 9351007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9025eb47d6cc26ec62dae81cb0fd2044?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9351007/paul"}, "reply_to_user": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1550183743, "post_id": 54680307, "comment_id": 96187130, "body": "It&#39;s a 5x5 symmetrical matrix. I want to use a matrix of data with the Gurobi TSP code."}, {"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1550239903, "post_id": 54680307, "comment_id": 96207598, "body": "But it&#39;s not even close to symmetric. Was there a typo?"}, {"owner": {"reputation": 81, "user_id": 9351007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9025eb47d6cc26ec62dae81cb0fd2044?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9351007/paul"}, "reply_to_user": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1550245310, "post_id": 54680307, "comment_id": 96210929, "body": "Whoops, that was a typo. It&#39;s definitely non-symmetrical. With this data the distance from P1 to P2 is not the same as from P2 to P1 and so on. Sorry about the confusion."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 9351007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9025eb47d6cc26ec62dae81cb0fd2044?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9351007/paul"}, "edited": false, "score": 0, "creation_date": 1565036086, "post_id": 54929088, "comment_id": 101217316, "body": "Going through my old posts and realizing I never followed-up on this one. This response was extremely helpful. I had incorrectly interpreted some parts of the base TSP code and that threw me off track. Thank you for your help!"}], "tags": [], "owner": {"reputation": 440, "user_id": 2757782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3035ca7b75a614b77088cabe5844457?s=128&d=identicon&r=PG&f=1", "display_name": "Silke Horn", "link": "https://stackoverflow.com/users/2757782/silke-horn"}, "is_accepted": true, "score": 1, "last_activity_date": 1551367661, "creation_date": 1551367661, "answer_id": 54929088, "question_id": 54680307, "link": "https://stackoverflow.com/questions/54680307/how-to-apply-gurobi-traveling-salesman-problem-python-code-to-my-data/54929088#54929088", "title": "How to apply Gurobi Traveling Salesman Problem Python code to my data", "body": "<p>I have answered this question before on the <a href=\"https://groups.google.com/forum/#!msg/gurobi/UONjXENiNms/avVoEFbkAwAJ\" rel=\"nofollow noreferrer\">Gurobi discussion board</a>. For convenience I am reposting (and detailing) the answer here:</p>\n\n<p><code>addVars</code> does not directly accept a DataFrame. If you have your data in a DataFrame <code>df</code>, you could do the following:</p>\n\n<pre><code>n=df.shape[0]\ndist = {(i,j) : df.iloc[i][j] for i in range(n) for j in range(n) if i != j}\n</code></pre>\n\n<p>The <a href=\"http://www.gurobi.com/documentation/8.1/examples/tsp_py.html\" rel=\"nofollow noreferrer\">tsp.py example code</a> assumes that the distance matrix is symmetrical.\nYou can see this for example from the lines:</p>\n\n<pre><code>for i,j in vars.keys():\n   vars[j,i] = vars[i,j] # edge in opposite direction\n</code></pre>\n\n<p>You need to remove these to make it work with an asymmetrical matrix.</p>\n\n<p>Moreover, you should replace the degree 2 constraints by constraints that ensure that every node has exactly one incoming and outgoing edge. I.e., replace</p>\n\n<pre><code>m.addConstrs(vars.sum(i,'*') == 2 for i in range(n))\n</code></pre>\n\n<p>by</p>\n\n<pre><code>m.addConstrs(vars.sum(i,'*') == 1 for i in range(n))\nm.addConstrs(vars.sum('*',i) == 1 for i in range(n))\n</code></pre>\n\n<p>For the lazy constraints, you need to make sure that both directions of each edge are added. Adding the lazy constraint should then look like this:</p>\n\n<pre><code>        model.cbLazy(quicksum(model._vars[i,j] + model._vars[j,i]\n                              for i,j in itertools.combinations(tour, 2))\n                     &lt;= len(tour)-1)\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 9351007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9025eb47d6cc26ec62dae81cb0fd2044?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/9351007/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1391, "favorite_count": 0, "accepted_answer_id": 54929088, "answer_count": 1, "score": 1, "last_activity_date": 1598177504, "creation_date": 1550096156, "question_id": 54680307, "link": "https://stackoverflow.com/questions/54680307/how-to-apply-gurobi-traveling-salesman-problem-python-code-to-my-data", "title": "How to apply Gurobi Traveling Salesman Problem Python code to my data", "body": "<p>I would like to use the example Traveling Salesman Problem Python code from the Gurobi website with my data file. I'm struggling with how to manipulate the df of my data so that it can be incorporated into the Gurobi code. I'm still fairly new to Python and I've just recently been introduced to Gurobi.</p>\n\n<p>I pulled the TSP example code from the Gurobi website and got it to run. The example creates random points and calculates the distances between them to illustrate the TSP problem. I already have the points and distances in my spreadsheet, which has been imported as a df. I can't seem to get my df into the right format in Python for  the code to use. It seems like I need to convert my df to a dictionary with each possible combination of pairs and their distance, but I don't know an easy way to do that.</p>\n\n<p>Here's the the section of code that creates dummy data for the example. I commented out the part where I was playing with a small df of data to simulate my file. </p>\n\n<pre><code>import math\nimport random\nfrom gurobipy import *\n\n# Euclidean distance between two points \n\ndef distance(points, i, j): \n    dx = points[i][0] - points[j][0] \n    dy = points[i][1] - points[j][1] \n    return math.sqrt(dx*dx + dy*dy)\n\nn=50\n\n# Create n random points \n\nrandom.seed(1) \npoints = [] \nfor i in range(n): \n    points.append((random.randint(0,100),random.randint(0,100))) \n\nm = Model() \n\n# Create variables \n\nvars = {} \nfor i in range(n): \n    for j in range(i+1): \n        vars[i,j] = m.addVar(obj=distance(points, i, j), vtype=GRB.BINARY, name='e'+str(i)+'_'+str(j)) \n        vars[j,i] = vars[i,j] \n    m.update()\n\n#Attempting to incorporate my own data\n#import pandas as pd\n#data = [[0,20,15,8,6],[15,0,18,9,28],[24,23,0,13,13],[15,27,8,0,14],[8,17,24,15,0]]\n#df = pd.DataFrame(data, columns=['P1','P2','P3','P4','P5'],index=['P1','P2','P3','P4','P5'])\n</code></pre>\n\n<p>I would like to be able to use a df of my data with the Gurobi TSP Python code. Thank you in advance for any help.</p>\n"}, {"tags": ["python", "pyqt5"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11006888, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZa2kSE49sM/AAAAAAAAAAI/AAAAAAAAEg4/Zr80wgWfUPc/photo.jpg?sz=128", "display_name": "Ryan Silk", "link": "https://stackoverflow.com/users/11006888/ryan-silk"}, "edited": false, "score": 0, "creation_date": 1550098858, "post_id": 54680496, "comment_id": 96150431, "body": "I have made some adjustments to my question and hope it will help in finding out what the problem is!"}, {"owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "reply_to_user": {"reputation": 13, "user_id": 11006888, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZa2kSE49sM/AAAAAAAAAAI/AAAAAAAAEg4/Zr80wgWfUPc/photo.jpg?sz=128", "display_name": "Ryan Silk", "link": "https://stackoverflow.com/users/11006888/ryan-silk"}, "edited": false, "score": 0, "creation_date": 1550099841, "post_id": 54680496, "comment_id": 96150719, "body": "you use <code>self</code> in your second script, but this doesn&#39;t refer to anything because it&#39;s not within a class. You would need to do something like <code>app.run_script()</code>. Is your script printing anything when you run it though? If not then you are definitely entering an infinite blocking loop that should be avoided by running it in a thread or combining your scripts into one file"}, {"owner": {"reputation": 13, "user_id": 11006888, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZa2kSE49sM/AAAAAAAAAAI/AAAAAAAAEg4/Zr80wgWfUPc/photo.jpg?sz=128", "display_name": "Ryan Silk", "link": "https://stackoverflow.com/users/11006888/ryan-silk"}, "edited": false, "score": 0, "creation_date": 1550101380, "post_id": 54680496, "comment_id": 96151129, "body": "The script is&#39;nt printing anything when I run it and I have just tried combining the two files however it still isn&#39;t working"}], "tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": false, "score": 0, "last_activity_date": 1550097198, "creation_date": 1550097198, "answer_id": 54680496, "question_id": 54680296, "link": "https://stackoverflow.com/questions/54680296/python-script-stops-running-when-i-import-a-gui-python-script/54680496#54680496", "title": "Python script stops running when I import a GUI python script", "body": "<p>I would venture to guess that your GUI script is calling a <code>.mainloop()</code> or some equivalent and entering into a blocking loop. This is just speculation though without you posting any of the relevant code... Assuming this IS the issue you can perhaps circumvent it via threading or multiprocessing.</p>\n"}, {"comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1550103195, "post_id": 54681387, "comment_id": 96151680, "body": "use <code>self.label.setNum(value)</code> instead of <code>self.label.setText(str(value))</code> OR change <code>self.s1.valueChanged[int].connect(self.changeValue)</code> to <code>self.s1.valueChanged[int].connect(self.label.setNum)  </code>"}], "tags": [], "owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "is_accepted": true, "score": 0, "last_activity_date": 1550103351, "last_edit_date": 1550103351, "creation_date": 1550103102, "answer_id": 54681387, "question_id": 54680296, "link": "https://stackoverflow.com/questions/54680296/python-script-stops-running-when-i-import-a-gui-python-script/54681387#54681387", "title": "Python script stops running when I import a GUI python script", "body": "<p>Try it:</p>\n\n<p><strong>main.py</strong></p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import *\nfrom PyQt5.QtCore    import *\n\n# from gui_script.py import *                     # ---\nfrom gui_script import Slider                     # +++\n\nclass Window(QWidget):\n    def __init__(self):\n        super().__init__()\n\n        self.slider = Slider()                    # +++\n        self.slider.s1.valueChanged[int].connect(self.changeValue)\n\n        self.spinBox = QSpinBox(self)\n        self.spinBox.setMinimum(1)\n        self.spinBox.setMaximum(100)\n        self.spinBox.setValue(25)\n        self.spinBox.valueChanged.connect(self.valueChangedSpin)\n\n        lay = QVBoxLayout(self)\n        lay.addWidget(self.slider)\n        lay.addWidget(self.spinBox)\n\n    def valueChangedSpin(self, i):\n        self.slider.s1.setValue(i)\n\n    def changeValue(self, value):                               \n        self.spinBox.setValue(value)\n\n\nif __name__ == '__main__':                        \n    app = QApplication(sys.argv)\n    mainwindow = Window()\n    mainwindow.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p><strong>gui_script.py</strong></p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import (QLineEdit, QSlider, QPushButton, \n                             QVBoxLayout, QApplication, QWidget, QLabel)\nfrom PyQt5.QtCore    import Qt\n\nclass Slider(QWidget):\n    def __init__(self):\n        super().__init__()\n\n        self.init_ui()\n\n    def init_ui(self):\n        self.label = QLabel(\"25\")\n\n        self.s1 = QSlider(Qt.Horizontal)\n        self.s1.setMinimum(1)\n        self.s1.setMaximum(100)\n        self.s1.setValue(25)\n        self.s1.valueChanged[int].connect(self.changeValue)    \n\n        self.b1 = QPushButton('Run')\n        self.b1.clicked.connect(self.run_script)\n\n        self.v_box = QVBoxLayout()\n        self.v_box.addWidget(self.label)\n        self.v_box.addWidget(self.s1)\n        self.v_box.addWidget(self.b1)\n        self.setLayout(self.v_box)\n\n    def run_script(self):\n#        return self.s1.value()\n        print(self.s1.value())\n\n    def changeValue(self, value):                               \n        self.label.setNum(value)  \n\nif __name__ == '__main__':                      # !!!\n    app = QApplication(sys.argv)\n    a_window = Slider()\n    a_window.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/rmeOw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rmeOw.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 13, "user_id": 11006888, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TZa2kSE49sM/AAAAAAAAAAI/AAAAAAAAEg4/Zr80wgWfUPc/photo.jpg?sz=128", "display_name": "Ryan Silk", "link": "https://stackoverflow.com/users/11006888/ryan-silk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 54681387, "answer_count": 2, "score": -1, "last_activity_date": 1550103351, "creation_date": 1550096110, "last_edit_date": 1550098733, "question_id": 54680296, "link": "https://stackoverflow.com/questions/54680296/python-script-stops-running-when-i-import-a-gui-python-script", "title": "Python script stops running when I import a GUI python script", "body": "<p>I have a PyQt5 script that creates a window containing a slider. I would like the value of this slider to be used in the main python script, however when it is run the GUI script is continuously run and the main python script is not run at all.  </p>\n\n<p>I have created a simple slider in the GUI python script and then imported this script into the main python file. </p>\n\n<p>my GUI python file is: </p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import (QLineEdit, QSlider, QPushButton, \nQVBoxLayout, QApplication, QWidget)\nfrom PyQt5.QtCore import Qt\n\nclass Window(QWidget):\n    def __init__(self):\n        super(Window, self).__init__()\n\n        self.init_ui()\n\n    def init_ui(self):\n        self.s1 = QSlider(Qt.Horizontal)\n        self.s1.setMinimum(1)\n        self.s1.setMaximum(100)\n        self.s1.setValue(25)\n        self.b1 = QPushButton('Run')\n\n        v_box = QVBoxLayout()\n        v_box.addWidget(self.s1)\n        v_box.addWidget(self.b1)\n\n        self.setLayout(v_box)\n\n        self.b1.clicked.connect(self.run_script)\n\n        self.show()\n\n    def run_script(self):\n        return self.s1.value()\n\napp = QApplication(sys.argv)\na_window = Window()\nsys.exit(app.exec_())\n</code></pre>\n\n<p>I would then like to take the value from the slider and use in my main python script, a simplified version would be: </p>\n\n<pre><code>from gui_script.py import * \n\nvalue = 10 + self.s1.value()\nprint(value)\n</code></pre>\n\n<p>From this I get the slider value however the 10 is not added to the slider value, meaning the main python file is not run. How do I get the main python file to run correctly when I have inputed the slider value? </p>\n\n<p>I would expect the value to be 20 if say the slider value was placed at 10. </p>\n"}, {"tags": ["python", "conv-neural-network", "pytorch", "multiclass-classification", "cross-entropy"], "answers": [{"comments": [{"owner": {"reputation": 3350, "user_id": 7805917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b243ed32e287056172d2b122c410af9d?s=128&d=identicon&r=PG&f=1", "display_name": "Inder", "link": "https://stackoverflow.com/users/7805917/inder"}, "edited": false, "score": 0, "creation_date": 1550151747, "post_id": 54684191, "comment_id": 96171044, "body": "forgive me for asking a stupid question,but can you elaborate the answer a little more, specifically about how  logits are being processes in the loss function"}, {"owner": {"reputation": 77, "user_id": 6276294, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-3Pxl6hHCA3s/AAAAAAAAAAI/AAAAAAAAAE8/9X5NTYxm6Ew/photo.jpg?sz=128", "display_name": "lvl", "link": "https://stackoverflow.com/users/6276294/lvl"}, "edited": false, "score": 0, "creation_date": 1550170446, "post_id": 54684191, "comment_id": 96181660, "body": "@Shai I see. Do you know the proper method in PyTorch that actually reflects a close-to-zero loss value between the &#39;out&#39; and &#39;target&#39; as I intend in the example? Or should I maybe transform my &#39;target&#39; data?"}], "tags": [], "owner": {"reputation": 92303, "user_id": 1714410, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a254f486ab076ab1af26162a975e90f9?s=128&d=identicon&r=PG", "display_name": "Shai", "link": "https://stackoverflow.com/users/1714410/shai"}, "is_accepted": false, "score": 2, "last_activity_date": 1550124570, "creation_date": 1550124570, "answer_id": 54684191, "question_id": 54680267, "link": "https://stackoverflow.com/questions/54680267/apply-a-pytorch-crossentropy-method-for-multiclass-segmentation/54684191#54684191", "title": "Apply a PyTorch CrossEntropy method for multiclass segmentation", "body": "<p>Look at the <a href=\"https://pytorch.org/docs/0.4.1/nn.html#torch.nn.CrossEntropyLoss\" rel=\"nofollow noreferrer\">description of <code>nn.CrossEntropyLoss</code> function</a>, the prediction <code>out</code> you provide to <code>nn.CrossEntropyLoss</code> are <em>not</em> treated as class probabilities, but rather as logits; The loss function derive the class probabilities from <code>out</code> using <a href=\"https://en.wikipedia.org/wiki/Softmax_function\" rel=\"nofollow noreferrer\">soft max</a> therefore <code>nn.CrossEntropyLoss</code> will never output exactly zero loss.</p>\n"}], "owner": {"reputation": 77, "user_id": 6276294, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-3Pxl6hHCA3s/AAAAAAAAAAI/AAAAAAAAAE8/9X5NTYxm6Ew/photo.jpg?sz=128", "display_name": "lvl", "link": "https://stackoverflow.com/users/6276294/lvl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4620, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1550124570, "creation_date": 1550095981, "question_id": 54680267, "link": "https://stackoverflow.com/questions/54680267/apply-a-pytorch-crossentropy-method-for-multiclass-segmentation", "title": "Apply a PyTorch CrossEntropy method for multiclass segmentation", "body": "<p>I am trying to implement a simple example of how to apply cross-entropy to what is supposed to be the output of my semantic segmentation CNN.</p>\n\n<p>Using the pytorch format I would have something like this:</p>\n\n<pre><code>out = np.array([[\n    [\n        [1.,1, 1], \n        [0, 0, 0], \n        [0, 0, 0],\n        [0, 0, 0]\n    ],\n    [\n        [0, 0, 0],\n        [1, 1, 1],\n        [0, 0.,0],\n        [0, 0, 0]\n    ],\n    [\n        [0, 0, 0],\n        [0, 0, 0],\n        [1, 1, 1],\n        [0, 0, 0]\n    ],\n    [\n        [0, 0, 0],\n        [0, 0, 0],\n        [0, 0, 0],\n        [1, 1, 1]\n    ]\n]])\n\nout = torch.tensor(out)\n</code></pre>\n\n<p>So, my output here has dimensions (1, 4, 4, 3), being 1 element batch, 4 channels representing the 4 possible classes, and 4 by 3 data in each, storing the probability of that cell being from it's class.</p>\n\n<p>Now my target is like this:</p>\n\n<pre><code>target=[\n        [0, 0, 0],\n        [1, 1, 1],\n        [2, 2, 2],\n        [3, 3, 3]\n    ]\n</code></pre>\n\n<p>Please notice how in the 'out' tensor each row has a 1.0 probability of being from that class resulting in a perfect match with the target. </p>\n\n<p>For example, the third channel (channel 2) has its whole 3rd row (row 2) with 1.0 probabilities of being from that channel, and zero's in any other place; so it matches the 2's on the target in third row as well.</p>\n\n<p>With this example I expect a minimal loss value between the two tensors.</p>\n\n<p>My question are:</p>\n\n<ul>\n<li>What's the best way to use a cross-entropy loss method in PyTorch in order to reflect that this case has no difference between the target and its prediction?</li>\n<li>What loss value should I expect from this?</li>\n</ul>\n\n<p>This is what I got so far:</p>\n\n<pre><code>import torch\nfrom torch.nn import CrossEntropyLoss\nimport numpy as np\n\nout = torch.Tensor(np.array([[\n    [\n        [1.,1, 1], \n        [0, 0, 0], \n        [0, 0, 0],\n        [0, 0, 0]\n    ],\n    [\n        [0, 0, 0],\n        [1, 1, 1],\n        [0, 0.,0],\n        [0, 0, 0]\n    ],\n    [\n        [0, 0, 0],\n        [0, 0, 0],\n        [1, 1, 1],\n        [0, 0, 0]\n    ],\n    [\n        [0, 0, 0],\n        [0, 0, 0],\n        [0, 0, 0],\n        [1, 1, 1]\n    ]\n]]))\n\ntarget = torch.Tensor([[\n    [0, 0, 0],\n    [1, 1, 1],\n    [2, 2, 2],\n    [3, 3, 3]\n]]).type('torch.LongTensor')\n\ncriterion = CrossEntropyLoss()\nprint(criterion(out, target))\n</code></pre>\n\n<p>And outputs: <code>tensor(0.7437)</code></p>\n\n<ul>\n<li>Shouldn't I expect a value closer to cero?</li>\n</ul>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["python", "python-3.6"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550096009, "post_id": 54680187, "comment_id": 96149412, "body": "Actually, <a href=\"https://docs.python.org/3/library/stdtypes.html#str.isdigit\" rel=\"nofollow noreferrer\"><code>isdigit</code></a> is documented to work in exactly this case"}, {"owner": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 0, "creation_date": 1550096040, "post_id": 54680187, "comment_id": 96149426, "body": "This is so unbelievable that it feels like a bug but it actually makes sense. Duplicate of <a href=\"https://stackoverflow.com/questions/44891070/whats-the-difference-between-str-isdigit-isnumeric-and-isdecimal-in-python\">this</a> (kind of)"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1550096048, "post_id": 54680187, "comment_id": 96149433, "body": "Why do you believe this to be the case? As noted, the documentation explicitly states otherwise."}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1550096218, "post_id": 54680187, "comment_id": 96149494, "body": "Don&#39;t know if it&#39;s viable but technically I guess you could use a regex to turn superscripts to <code>**n</code> then your algorithm my be easier to implement. Or even just in the case of superscripts use pythonic exponential notation. <code>**n</code>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1550096250, "post_id": 54680187, "comment_id": 96149508, "body": "@juanpa.arrivillaga I hold my hands up as guilty for having taken this method on face value. At least for me, it was too easy to feel I implicitly knew what it did; the corner case being that it wouldn&#39;t work with negative numbers for <code>all()</code> etc. Considering the rapid upvotes, I have a feeling there&#39;s a lot of code out there than can be crashed with this, explicitly documented or not :P"}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1550096309, "post_id": 54680187, "comment_id": 96149525, "body": "I mean technically in human terms it is a &quot;number&quot;... &#175;_(\u30c4)_/&#175;"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550096826, "post_id": 54680187, "comment_id": 96149724, "body": "@roganjosh well, fundamentally, the correct approach is to use <code>try-except</code> here, IMO not relying on assumptions about how characters are classed (especially when you factor in unicode characters)"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1550096948, "post_id": 54680187, "comment_id": 96149769, "body": "@juanpa.arrivillaga Devil&#39;s advocate being, what if you <i>wanted</i> that 2 to be an integer? That&#39;s what&#39;s going on in the comments under the answer."}, {"owner": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 0, "creation_date": 1550097078, "post_id": 54680187, "comment_id": 96149808, "body": "why not allow <code>2\u221a(\u03c0&#178;)&#47;\u03c0</code> as a valid int then. Where does it stop."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 0, "creation_date": 1550097236, "post_id": 54680187, "comment_id": 96149855, "body": "@Beno&#238;tPilatte well considering pi is not an integer, then I could safely say that this out of the realms of reasonable, even <code>&#39;1.234&#39;</code> can&#39;t be cast to <code>int</code> directly (but maybe a float :P ). I get the point you&#39;re making, though."}, {"owner": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 0, "creation_date": 1550097770, "post_id": 54680187, "comment_id": 96150028, "body": "Good luck with your human language interpreter then... It look like <a href=\"https://www.wolframalpha.com/input/?i=2%E2%88%9A(%CF%80&#178;)%2F%CF%80\" rel=\"nofollow noreferrer\">it exists</a>..."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 6310186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0829d6dd06443fb5f865c3c96e249588?s=128&d=identicon&r=PG&f=1", "display_name": "Gha93", "link": "https://stackoverflow.com/users/6310186/gha93"}, "edited": false, "score": 0, "creation_date": 1550096233, "post_id": 54680259, "comment_id": 96149502, "body": "This makes it clear ... but it&#39;s very annoying ...  even I tried with re.match([0-9]+, c) and I still get the same behavior ... is there a method that rejects those digits, or a method that can cast them?"}, {"owner": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 1, "creation_date": 1550096417, "post_id": 54680259, "comment_id": 96149560, "body": "<code>re.match([0-9]+, c)</code> should work <code>c in &quot;1234567890&quot;</code> too as well as <code>c.isdecimal()</code>"}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "reply_to_user": {"reputation": 155, "user_id": 6310186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0829d6dd06443fb5f865c3c96e249588?s=128&d=identicon&r=PG&f=1", "display_name": "Gha93", "link": "https://stackoverflow.com/users/6310186/gha93"}, "edited": false, "score": 0, "creation_date": 1550096542, "post_id": 54680259, "comment_id": 96149614, "body": "I like where @Gha93 is headed by asking if there could be a replacement for using <code>int</code> here there&#39;s gotta be a way to marry <code>isdigit</code> with a corresponding method."}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "reply_to_user": {"reputation": 155, "user_id": 6310186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0829d6dd06443fb5f865c3c96e249588?s=128&d=identicon&r=PG&f=1", "display_name": "Gha93", "link": "https://stackoverflow.com/users/6310186/gha93"}, "edited": false, "score": 0, "creation_date": 1550096743, "post_id": 54680259, "comment_id": 96149688, "body": "@Gha93 it depends what you want to do, but <code>all(c in &#39;1234567890&#39; for c in &#39;66&#178;&#39;)</code> might suffice"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1550096819, "post_id": 54680259, "comment_id": 96149719, "body": "@Jaba <a href=\"https://stackoverflow.com/questions/24391892/printing-subscript-in-python\" title=\"printing subscript in python\">stackoverflow.com/questions/24391892/&hellip;</a>? But then I&#39;m not sure how to use on floats."}, {"owner": {"reputation": 155, "user_id": 6310186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0829d6dd06443fb5f865c3c96e249588?s=128&d=identicon&r=PG&f=1", "display_name": "Gha93", "link": "https://stackoverflow.com/users/6310186/gha93"}, "edited": false, "score": 0, "creation_date": 1550096863, "post_id": 54680259, "comment_id": 96149734, "body": "yep your are right re.match works"}, {"owner": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 3, "creation_date": 1550096891, "post_id": 54680259, "comment_id": 96149744, "body": "Right, We should make it clear that <code>try: int(s); catch ValueError:</code> is the correct way of handling this. Some people don&#39;t like <code>try&#47;catch</code> but it is the most Pythonic way."}, {"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "reply_to_user": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 0, "creation_date": 1550096992, "post_id": 54680259, "comment_id": 96149778, "body": "@Beno&#238;tPilatte It really depends what they want to do, <code>int(&#39;-3&#39;)</code> is valid of course but not all digits"}, {"owner": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 0, "creation_date": 1550097282, "post_id": 54680259, "comment_id": 96149874, "body": "<code>if int(s) &lt; 0: raise ValueError(&quot;the input number should be a positive integer&quot;)</code>"}, {"owner": {"reputation": 155, "user_id": 6310186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0829d6dd06443fb5f865c3c96e249588?s=128&d=identicon&r=PG&f=1", "display_name": "Gha93", "link": "https://stackoverflow.com/users/6310186/gha93"}, "edited": false, "score": 0, "creation_date": 1550097346, "post_id": 54680259, "comment_id": 96149887, "body": "the key idea is what the mean of isdigit() returning true saying yes it&#39;s  a &#39;number&#39; but you can&#39;t always cast it."}, {"owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "reply_to_user": {"reputation": 2654, "user_id": 10972414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53eefdd3f7584f6a1519159be742da0?s=128&d=identicon&r=PG&f=1", "display_name": "Beno&#238;t P", "link": "https://stackoverflow.com/users/10972414/beno%c3%aet-p"}, "edited": false, "score": 0, "creation_date": 1550100782, "post_id": 54680259, "comment_id": 96150975, "body": "@Beno&#238;tPilatte I think the mantra of &quot;ask forgiveness not permission&quot; is the better option in most situations. A tight loop where exceptions are expected to be common (most characters in that string aren&#39;t decimals) is usually not one of them."}], "tags": [], "owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "is_accepted": true, "score": 3, "last_activity_date": 1550095936, "creation_date": 1550095936, "answer_id": 54680259, "question_id": 54680187, "link": "https://stackoverflow.com/questions/54680187/weird-behavoir-with-casting-int/54680259#54680259", "title": "Weird behavoir with casting int", "body": "<p>This is exactly <a href=\"https://docs.python.org/3/library/stdtypes.html#str.isdigit\" rel=\"nofollow noreferrer\">as documented</a>:</p>\n\n<blockquote>\n  <p><code>str.isdigit()</code> Return true if all characters in the string are digits\n  and there is at least one character, false otherwise. Digits include\n  decimal characters and digits that need special handling, such as the\n  compatibility superscript digits. This covers digits which cannot be\n  used to form numbers in base 10, like the Kharosthi numbers. Formally,\n  a digit is a character that has the property value Numeric_Type=Digit\n  or Numeric_Type=Decimal.</p>\n</blockquote>\n"}], "owner": {"reputation": 155, "user_id": 6310186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0829d6dd06443fb5f865c3c96e249588?s=128&d=identicon&r=PG&f=1", "display_name": "Gha93", "link": "https://stackoverflow.com/users/6310186/gha93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "closed_date": 1550096791, "accepted_answer_id": 54680259, "answer_count": 1, "score": 4, "last_activity_date": 1550095936, "creation_date": 1550095554, "question_id": 54680187, "link": "https://stackoverflow.com/questions/54680187/weird-behavoir-with-casting-int", "closed_reason": "Duplicate", "title": "Weird behavoir with casting int", "body": "<p>I am using Python 3.6.3 and I encounter a weird behavior from <code>int()</code> and <code>isdigit()</code> with the following code: </p>\n\n<pre><code>s = \"..... not less than 66\u00b2/ 3 % of ......\"\ntotal = 0\nfor c in s:\n    if c.isdigit():\n        total += int(c)\n\nValueError: invalid literal for int() with base 10: '\u00b2'\n</code></pre>\n\n<p>I understand the bug and I know that I can skip the error with <code>try catch</code>. My question is that if <code>isdigit()</code> return true then the char\\string should be cast without error or <code>isdigit()</code> should return false. Otherwise said <code>int()</code> and <code>isdigit()</code> should be coherent.</p>\n"}, {"tags": ["python", "cuda", "nvidia"], "comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 2, "creation_date": 1550096543, "post_id": 54680168, "comment_id": 96149615, "body": "I use both <code>cuda-memcheck</code> and <code>nvprof</code> with python + numba/cuda  and python + pycuda."}], "answers": [{"tags": [], "owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "is_accepted": true, "score": 2, "last_activity_date": 1550238593, "creation_date": 1550238593, "answer_id": 54710761, "question_id": 54680168, "link": "https://stackoverflow.com/questions/54680168/can-i-use-cuda-memcheck-on-a-python-program/54710761#54710761", "title": "Can I use cuda-memcheck on a python program", "body": "<p>Yes, you can use tools like cuda-memcheck and nvprof with python programs. For example, consider the following (deliberately) defective Numba example:</p>\n\n<pre><code>$ cat numbatest.py\nfrom __future__ import division\nfrom numba import cuda\nimport numpy\nimport math\n\n# CUDA kernel\n@cuda.jit\ndef my_kernel(io_array):\n    pos = cuda.grid(1)\n    if pos &gt; io_array.size:\n        io_array[pos] *= 2 # do the computation\n\n# Host code   \ndata = numpy.ones(62)\nthreadsperblock = 64\nblockspergrid = math.ceil(data.shape[0] / threadsperblock)\nmy_kernel[blockspergrid, threadsperblock](data)\nprint(data)\n</code></pre>\n\n<p>This kernel will produce out of bounds memory access when run. Doing that with cuda-memcheck shows this to be the case:</p>\n\n<pre><code>$ cuda-memcheck python numbatest.py \n========= CUDA-MEMCHECK\n========= Invalid __global__ read of size 8\n=========     at 0x000000b8 in cudapy::__main__::my_kernel$241(Array&lt;double, int=1, C, mutable, aligned&gt;)\n=========     by thread (63,0,0) in block (0,0,0)\n=========     Address 0x7040601f8 is out of bounds\n=========     Saved host backtrace up to driver entry point at kernel launch time\n=========     Host Frame:/usr/lib/x86_64-linux-gnu/libcuda.so (cuLaunchKernel + 0x2cd) [0x2486ed]\n=========     Host Frame:/opt/miniconda3/lib/python3.6/lib-dynload/../../libffi.so.6 (ffi_call_unix64 + 0x4c) [0x6adc]\n=========     Host Frame:/opt/miniconda3/lib/python3.6/lib-dynload/../../libffi.so.6 (ffi_call + 0x1f2) [0x6282]\n=========     Host Frame:/opt/miniconda3/lib/python3.6/lib-dynload/_ctypes.cpython-36m-x86_64-linux-gnu.so (_ctypes_callproc + 0x2ce) [0x12e4e]\n=========     Host Frame:/opt/miniconda3/lib/python3.6/lib-dynload/_ctypes.cpython-36m-x86_64-linux-gnu.so [0x13885]\n=========     Host Frame:python (PyObject_Call + 0x3e) [0x1131de]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x198a) [0x1c0d9a]\n=========     Host Frame:python [0x19642e]\n=========     Host Frame:python [0x196fc1]\n=========     Host Frame:python [0x19ccf5]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x30a) [0x1bf71a]\n=========     Host Frame:python [0x196d8b]\n=========     Host Frame:python [0x19ccf5]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x30a) [0x1bf71a]\n=========     Host Frame:python [0x196124]\n=========     Host Frame:python (_PyFunction_FastCallDict + 0x1bc) [0x19749c]\n=========     Host Frame:python (_PyObject_FastCallDict + 0x26f) [0x11379f]\n=========     Host Frame:python (_PyObject_Call_Prepend + 0x63) [0x118303]\n=========     Host Frame:python (PyObject_Call + 0x3e) [0x1131de]\n=========     Host Frame:python [0x171127]\n=========     Host Frame:python (PyObject_Call + 0x3e) [0x1131de]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x198a) [0x1c0d9a]\n=========     Host Frame:python [0x19642e]\n=========     Host Frame:python [0x196fc1]\n=========     Host Frame:python [0x19ccf5]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x10c8) [0x1c04d8]\n=========     Host Frame:python [0x196124]\n=========     Host Frame:python (_PyFunction_FastCallDict + 0x1bc) [0x19749c]\n=========     Host Frame:python (_PyObject_FastCallDict + 0x26f) [0x11379f]\n=========     Host Frame:python (_PyObject_Call_Prepend + 0x63) [0x118303]\n=========     Host Frame:python (PyObject_Call + 0x3e) [0x1131de]\n=========     Host Frame:python [0x171127]\n=========     Host Frame:python (PyObject_Call + 0x3e) [0x1131de]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x198a) [0x1c0d9a]\n=========     Host Frame:python [0x196124]\n=========     Host Frame:python (_PyFunction_FastCallDict + 0x1bc) [0x19749c]\n=========     Host Frame:python (_PyObject_FastCallDict + 0x26f) [0x11379f]\n=========     Host Frame:python (_PyObject_Call_Prepend + 0x63) [0x118303]\n=========     Host Frame:python (PyObject_Call + 0x3e) [0x1131de]\n=========     Host Frame:python [0x171127]\n=========     Host Frame:python (_PyObject_FastCallDict + 0x8b) [0x1135bb]\n=========     Host Frame:python [0x19cd6e]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x30a) [0x1bf71a]\n=========     Host Frame:python (PyEval_EvalCodeEx + 0x329) [0x197ad9]\n=========     Host Frame:python (PyEval_EvalCode + 0x1c) [0x19887c]\n=========     Host Frame:python [0x219074]\n=========     Host Frame:python (PyRun_FileExFlags + 0xa1) [0x219471]\n=========     Host Frame:python (PyRun_SimpleFileExFlags + 0x1c3) [0x219673]\n=========     Host Frame:python (Py_Main + 0x650) [0x21d1b0]\n=========     Host Frame:python (main + 0xee) [0xe4b4e]\n=========     Host Frame:/lib/x86_64-linux-gnu/libc.so.6 (__libc_start_main + 0xf5) [0x21f45]\n=========     Host Frame:python [0x1c61a8]\n=========\n========= Program hit CUDA_ERROR_LAUNCH_FAILED (error 719) due to \"unspecified launch failure\" on CUDA API call to cuMemcpyDtoH_v2. \n=========     Saved host backtrace up to driver entry point at error\n=========     Host Frame:/usr/lib/x86_64-linux-gnu/libcuda.so (cuMemcpyDtoH_v2 + 0x173) [0x2436a3]\n=========     Host Frame:/opt/miniconda3/lib/python3.6/lib-dynload/../../libffi.so.6 (ffi_call_unix64 + 0x4c) [0x6adc]\n=========     Host Frame:/opt/miniconda3/lib/python3.6/lib-dynload/../../libffi.so.6 (ffi_call + 0x1f2) [0x6282]\n=========     Host Frame:/opt/miniconda3/lib/python3.6/lib-dynload/_ctypes.cpython-36m-x86_64-linux-gnu.so (_ctypes_callproc + 0x2ce) [0x12e4e]\n=========     Host Frame:/opt/miniconda3/lib/python3.6/lib-dynload/_ctypes.cpython-36m-x86_64-linux-gnu.so [0x13885]\n=========     Host Frame:python (PyObject_Call + 0x3e) [0x1131de]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x198a) [0x1c0d9a]\n=========     Host Frame:python (PyEval_EvalCodeEx + 0x966) [0x198116]\n=========     Host Frame:python [0x1988f4]\n=========     Host Frame:python (PyObject_Call + 0x3e) [0x1131de]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x198a) [0x1c0d9a]\n=========     Host Frame:python [0x196124]\n=========     Host Frame:python [0x196fc1]\n=========     Host Frame:python [0x19ccf5]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x10c8) [0x1c04d8]\n=========     Host Frame:python (PyEval_EvalCodeEx + 0x329) [0x197ad9]\n=========     Host Frame:python [0x198a06]\n=========     Host Frame:python (PyObject_Call + 0x3e) [0x1131de]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x198a) [0x1c0d9a]\n=========     Host Frame:python [0x1962c6]\n=========     Host Frame:python [0x196fc1]\n=========     Host Frame:python [0x19ccf5]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x10c8) [0x1c04d8]\n=========     Host Frame:python [0x19642e]\n=========     Host Frame:python [0x196fc1]\n=========     Host Frame:python [0x19ccf5]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x30a) [0x1bf71a]\n=========     Host Frame:python [0x19642e]\n=========     Host Frame:python [0x196fc1]\n=========     Host Frame:python [0x19ccf5]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x10c8) [0x1c04d8]\n=========     Host Frame:python [0x196124]\n=========     Host Frame:python (_PyFunction_FastCallDict + 0x1bc) [0x19749c]\n=========     Host Frame:python (_PyObject_FastCallDict + 0x26f) [0x11379f]\n=========     Host Frame:python (_PyObject_Call_Prepend + 0x63) [0x118303]\n=========     Host Frame:python (PyObject_Call + 0x3e) [0x1131de]\n=========     Host Frame:python [0x171127]\n=========     Host Frame:python (PyObject_Call + 0x3e) [0x1131de]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x198a) [0x1c0d9a]\n=========     Host Frame:python [0x196124]\n=========     Host Frame:python (_PyFunction_FastCallDict + 0x1bc) [0x19749c]\n=========     Host Frame:python (_PyObject_FastCallDict + 0x26f) [0x11379f]\n=========     Host Frame:python (_PyObject_Call_Prepend + 0x63) [0x118303]\n=========     Host Frame:python (PyObject_Call + 0x3e) [0x1131de]\n=========     Host Frame:python [0x171127]\n=========     Host Frame:python (_PyObject_FastCallDict + 0x8b) [0x1135bb]\nTraceback (most recent call last):\n=========     Host Frame:python [0x19cd6e]\n=========     Host Frame:python (_PyEval_EvalFrameDefault + 0x30a) [0x1bf71a]\n  File \"numbatest.py\", line 17, in &lt;module&gt;\n=========     Host Frame:python (PyEval_EvalCodeEx + 0x329) [0x197ad9]\n=========     Host Frame:python (PyEval_EvalCode + 0x1c) [0x19887c]\n=========     Host Frame:python [0x219074]\n=========     Host Frame:python (PyRun_FileExFlags + 0xa1) [0x219471]\n=========     Host Frame:python (PyRun_SimpleFileExFlags + 0x1c3) [0x219673]\n=========     Host Frame:python (Py_Main + 0x650) [0x21d1b0]\n=========     Host Frame:python (main + 0xee) [0xe4b4e]\n=========\n    my_kernel[blockspergrid, threadsperblock](data)\n  File \"/opt/miniconda3/lib/python3.6/site-packages/numba/cuda/compiler.py\", line 704, in __call__\n    cfg(*args)\n  File \"/opt/miniconda3/lib/python3.6/site-packages/numba/cuda/compiler.py\", line 484, in __call__\n    sharedmem=self.sharedmem)\n  File \"/opt/miniconda3/lib/python3.6/site-packages/numba/cuda/compiler.py\", line 586, in _kernel_call\n    wb()\n  File \"/opt/miniconda3/lib/python3.6/site-packages/numba/cuda/compiler.py\", line 601, in &lt;lambda&gt;\n    retr.append(lambda: devary.copy_to_host(val, stream=stream))\n  File \"/opt/miniconda3/lib/python3.6/site-packages/numba/cuda/cudadrv/devices.py\", line 212, in _require_cuda_context\n    return fn(*args, **kws)\n  File \"/opt/miniconda3/lib/python3.6/site-packages/numba/cuda/cudadrv/devicearray.py\", line 241, in copy_to_host\n    _driver.device_to_host(hostary, self, self.alloc_size, stream=stream)\n  File \"/opt/miniconda3/lib/python3.6/site-packages/numba/cuda/cudadrv/driver.py\", line 1606, in device_to_host\n    fn(host_pointer(dst), device_pointer(src), size, *varargs)\n  File \"/opt/miniconda3/lib/python3.6/site-packages/numba/cuda/cudadrv/driver.py\", line 288, in safe_cuda_api_call\n    self._check_error(fname, retcode)\n  File \"/opt/miniconda3/lib/python3.6/site-packages/numba/cuda/cudadrv/driver.py\", line 323, in _check_error\n    raise CudaAPIError(retcode, msg)\nnumba.cuda.cudadrv.driver.CudaAPIError: [719] Call to cuMemcpyDtoH results in CUDA_ERROR_LAUNCH_FAILED\n========= ERROR SUMMARY: 2 errors\n</code></pre>\n\n<p>This will apply to any Python process which uses CUDA accelerated libraries (Tensorflow, PyTorch, etc) or generates CUDA code and runs it (Numba, PyCUDA).</p>\n"}], "owner": {"reputation": 475, "user_id": 5699669, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b09e5582c4459539142d4c3b5184df8?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel ", "link": "https://stackoverflow.com/users/5699669/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 0, "accepted_answer_id": 54710761, "answer_count": 1, "score": 3, "last_activity_date": 1550238593, "creation_date": 1550095452, "last_edit_date": 1550095942, "question_id": 54680168, "link": "https://stackoverflow.com/questions/54680168/can-i-use-cuda-memcheck-on-a-python-program", "title": "Can I use cuda-memcheck on a python program", "body": "<p>I have lots of cuda kernels to test so I would like to be able to test them by executing them from a python program (the python program calls a library that launches cuda kernels) i.e. something like <code>cuda-memcheck --leak-check full -- \"python my_test_program.py\"</code>. This will save time compared to writing C++ programs to do the same. Does this work the same way as testing kernels form a *.cc or *.cu program?</p>\n"}, {"tags": ["python", "for-loop", "exception", "raise"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1550096407, "post_id": 54680152, "comment_id": 96149556, "body": "The answers to the question <a href=\"https://stackoverflow.com/questions/23294658/asking-the-user-for-input-until-they-give-a-valid-response\">Asking the user for input until they give a valid response</a> may help."}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 0, "creation_date": 1550096430, "post_id": 54680152, "comment_id": 96149565, "body": "Your <code>except</code> clauses indentation is wrong. Align them with the <code>try</code>. The same for the statement after the <code>else</code>. Add four spaces."}], "answers": [{"tags": [], "owner": {"reputation": 526, "user_id": 2139818, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tBfb7.png?s=128&g=1", "display_name": "Venkatesh Marepalli", "link": "https://stackoverflow.com/users/2139818/venkatesh-marepalli"}, "is_accepted": false, "score": 0, "last_activity_date": 1550098194, "creation_date": 1550098194, "answer_id": 54680659, "question_id": 54680152, "link": "https://stackoverflow.com/questions/54680152/how-do-i-use-raise-correctly/54680659#54680659", "title": "How do I use raise correctly?", "body": "<p>There is an indentation mistake in your code</p>\n\n<pre><code>def get_quiz_list_handle_exceptions():\nsuccess = True\nwhile success:\n    try:\n\n        file = input(\"Name of quiz-file: \")\n        file2 = open(file,'r')\n\n        for lines in range(0,9):\n            quiz_line = file2.readline()\n            quiz_line.split(\";\")\n\n            if len(quiz_line) != 4:\n                raise Exception\n\n    except FileNotFoundError as error:\n        print(\"That resulted in an input/output error, please try again!\", error)\n\n    except Exception:\n        print(\"The file is not on the proper format. There needs to be four strings, separated by ; in each line of the file.\")\n    else:\n        success = False\n\n\nget_quiz_list_handle_exceptions()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 0, "last_activity_date": 1550098676, "creation_date": 1550098676, "answer_id": 54680729, "question_id": 54680152, "link": "https://stackoverflow.com/questions/54680152/how-do-i-use-raise-correctly/54680729#54680729", "title": "How do I use raise correctly?", "body": "<p>You have numerous issues:</p>\n\n<ol>\n<li>Failure to indent properly in several locations</li>\n<li>Failure to keep the results of <code>split</code>, so your length test is testing a string's length, not the number of semi-colon separated components</li>\n<li>(Minor) Not using <code>with</code> statements, nor closing your file, so the file handle could conceivably be left open indefinitely (depends on Python interpreter)</li>\n</ol>\n\n<p>Fixed code:</p>\n\n<pre><code>def get_quiz_list_handle_exceptions():\n    success = True\n    while success:\n        try:\n\n            file = input(\"Name of quiz-file: \")\n            with open(file,'r') as file2:  # Use with statement to guarantee file is closed\n                for lines in range(0,9):\n                    quiz_line = file2.readline()\n                    quiz_line = quiz_line.split(\";\")\n\n                    if len(quiz_line) != 4:\n                        raise Exception\n\n        # All your excepts/elses were insufficiently indented to match the try\n        except FileNotFoundError as error:\n            print(\"That resulted in an input/output error, please try again!\", error)\n\n        except Exception:\n            print(\"The file is not on the proper format. There needs to be four strings, separated by ; in each line of the file.\")\n        else:\n            success = False  # Fixed indent\n\n\nget_quiz_list_handle_exceptions()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11047526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a05efd1e621be3e539fcc173e797bd5?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/11047526/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 54680729, "answer_count": 2, "score": -1, "last_activity_date": 1550098676, "creation_date": 1550095378, "last_edit_date": 1550095960, "question_id": 54680152, "link": "https://stackoverflow.com/questions/54680152/how-do-i-use-raise-correctly", "title": "How do I use raise correctly?", "body": "<p>Can someone please help me to get some kind of structure in this code? I am new to this. The errors should capture both non-existing files, and files that do not contain rows of four parts separated by \";\".</p>\n\n<p>The program should look something like this:</p>\n\n<p>Name of quiz-file: hejsan<br>\n\"That resulted in an input/output error, please try again!\"</p>\n\n<p>Name of quiz-file: namn.csv<br>\n\"The file is not on the proper format. \nThere needs to be four strings, separated by ; in each line of the file.\"</p>\n\n<p>Name of quiz-file: quiz.csv</p>\n\n<p>Where quiz.csv fullfills all the requirements!</p>\n\n<pre><code>def get_quiz_list_handle_exceptions():\n    success = True\n    while success:\n        try:\n\n            file = input(\"Name of quiz-file: \")\n            file2 = open(file,'r')\n\n            for lines in range(0,9):\n                quiz_line = file2.readline()\n                quiz_line.split(\";\")\n\n                if len(quiz_line) != 4:\n                    raise Exception\n\n    except FileNotFoundError as error:\n        print(\"That resulted in an input/output error, please try again!\", error)\n\n    except Exception:\n        print(\"The file is not on the proper format. There needs to be four strings, separated by ; in each line of the file.\")\n\n    else:\n    success = False\n\n\nget_quiz_list_handle_exceptions()\n</code></pre>\n"}, {"tags": ["python", "sql", "sql-server", "tsql"], "answers": [{"comments": [{"owner": {"reputation": 850, "user_id": 7252531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Imb0t.png?s=128&g=1", "display_name": "gbeaven", "link": "https://stackoverflow.com/users/7252531/gbeaven"}, "edited": false, "score": 1, "creation_date": 1550097813, "post_id": 54680232, "comment_id": 96150041, "body": "Yes, I saw <code>sp_execute_external_script</code> but unless there&#39;s a way to directly reference a <code>.py</code> file this just seems like a band-aid solution. I would rather not embed 100+ lines of Python into a job. Seems much more intuitive to just call the script that already exists on the server."}], "tags": [], "owner": {"reputation": 737, "user_id": 2639619, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TkXF9.jpg?s=128&g=1", "display_name": "Alvaro Parra", "link": "https://stackoverflow.com/users/2639619/alvaro-parra"}, "is_accepted": false, "score": 0, "last_activity_date": 1550095801, "creation_date": 1550095801, "answer_id": 54680232, "question_id": 54680105, "link": "https://stackoverflow.com/questions/54680105/how-to-execute-python-script-as-administrator-in-sql-server-agent-job/54680232#54680232", "title": "How to Execute Python Script as Administrator in SQL Server Agent Job", "body": "<p>Did you try using sp_execute_external_script ?</p>\n\n<pre><code>execute sp_execute_external_script \n@language = N'Python', \n@script = N'\na = 1\nb = 2\nc = a/b\nd = a*b\nprint(c, d)\n'\n</code></pre>\n\n<p>For example, this code can be scheduled into SqlAgent.</p>\n"}, {"comments": [{"owner": {"reputation": 312, "user_id": 7089729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xR6J6.png?s=128&g=1", "display_name": "Ray&#39;s Web Presence", "link": "https://stackoverflow.com/users/7089729/rays-web-presence"}, "edited": false, "score": 2, "creation_date": 1601662297, "post_id": 54694227, "comment_id": 113485589, "body": "Would you mind elaborating on the credential/proxy account bit and <code>Run as</code> part?"}, {"owner": {"reputation": 121, "user_id": 3570945, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001845196730/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/3570945/lucas-sousa"}, "edited": false, "score": 0, "creation_date": 1617131952, "post_id": 54694227, "comment_id": 118216716, "body": "How did you configured the proxy?"}, {"owner": {"reputation": 508, "user_id": 8794465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05eec887be80572f1d78ff1709f3ff7c?s=128&d=identicon&r=PG&f=1", "display_name": "mpy", "link": "https://stackoverflow.com/users/8794465/mpy"}, "reply_to_user": {"reputation": 121, "user_id": 3570945, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001845196730/picture?type=large", "display_name": "Lucas Sousa", "link": "https://stackoverflow.com/users/3570945/lucas-sousa"}, "edited": false, "score": 0, "creation_date": 1617602134, "post_id": 54694227, "comment_id": 118340655, "body": "@LucasSousa did you find out the solution?"}], "tags": [], "owner": {"reputation": 850, "user_id": 7252531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Imb0t.png?s=128&g=1", "display_name": "gbeaven", "link": "https://stackoverflow.com/users/7252531/gbeaven"}, "is_accepted": true, "score": 2, "last_activity_date": 1617135387, "last_edit_date": 1617135387, "creation_date": 1550159281, "answer_id": 54694227, "question_id": 54680105, "link": "https://stackoverflow.com/questions/54680105/how-to-execute-python-script-as-administrator-in-sql-server-agent-job/54694227#54694227", "title": "How to Execute Python Script as Administrator in SQL Server Agent Job", "body": "<p>I was able to solve the problem to my question by adding a credential/<a href=\"https://docs.microsoft.com/en-us/sql/ssms/agent/create-a-sql-server-agent-proxy?view=sql-server-ver15\" rel=\"nofollow noreferrer\">proxy</a> account, assigning it to the <code>Run as</code> in the step, and then altering the <code>Command</code> to look like this:</p>\n<p><code>C:\\Windows\\System32\\cmd.exe /C python &quot;C:\\PythonScripts\\myPython.py&quot;</code></p>\n"}], "owner": {"reputation": 850, "user_id": 7252531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Imb0t.png?s=128&g=1", "display_name": "gbeaven", "link": "https://stackoverflow.com/users/7252531/gbeaven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3324, "favorite_count": 1, "accepted_answer_id": 54694227, "answer_count": 2, "score": 3, "last_activity_date": 1617135387, "creation_date": 1550095185, "last_edit_date": 1592644375, "question_id": 54680105, "link": "https://stackoverflow.com/questions/54680105/how-to-execute-python-script-as-administrator-in-sql-server-agent-job", "title": "How to Execute Python Script as Administrator in SQL Server Agent Job", "body": "<p>I have a <code>Python (3.7.2)</code> file that pulls data from a third party <code>API</code>, saves the data in a local <code>CSV</code> file on <code>Windows Server 2016</code> and then does a <code>bulk import</code> into an instance of <code>SQL Server 2016</code> (13.0.4224.16).</p>\n<p>This works without issue if I manually run the script from an elevated command prompt. However, I don't want to have to manually run this script as I'm wanting it to execute every hour. I know how to schedule from the <code>Task Scheduler</code> on the server OS, but I would like to schedule as an automated job using <code>SQL Server Agent</code>. This way I can directly manage/track the jobs with <code>SSMS</code> and not have to log in to the server itself to check the scheduled tasks.</p>\n<p>I currently have a job configured with 1 step of type <code>Operating system (CmdExec)</code> and the <code>Command:</code> set to <code>&quot;C:\\Windows\\System32\\cmd.exe&quot; &quot;python C:\\PythonScripts\\myPython.py&quot;</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/Sydfr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sydfr.png\" alt=\"enter image description here\" /></a></p>\n<p>My thinking with the above is that <code>cmd.exe</code> would be opened and call the <code>python.exe</code> program with the python path I supplied.</p>\n<p>However, when I run the job it just hangs in status of <code>In progress</code> and never finishes. The script when run manually successfully completes in 9 seconds:</p>\n<p><a href=\"https://i.stack.imgur.com/Uc0Ss.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Uc0Ss.png\" alt=\"enter image description here\" /></a></p>\n<p>Any ideas here?</p>\n"}, {"tags": ["python", "python-3.x", "recursion"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1550095258, "post_id": 54680096, "comment_id": 96149123, "body": "I strongly suspect that your problem is a typo: <code>so_far</code> vs <code>sofar</code>.  You assign to <code>so_far</code>, but never use the value."}, {"owner": {"reputation": 11, "user_id": 11048560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec1db3c91e45b1649a4f434128a7ccb?s=128&d=identicon&r=PG&f=1", "display_name": "Kestrel", "link": "https://stackoverflow.com/users/11048560/kestrel"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1550095399, "post_id": 54680096, "comment_id": 96149185, "body": "Sorry that was a typo while changing the names of the variable. The problem still persists."}, {"owner": {"reputation": 11, "user_id": 11048560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec1db3c91e45b1649a4f434128a7ccb?s=128&d=identicon&r=PG&f=1", "display_name": "Kestrel", "link": "https://stackoverflow.com/users/11048560/kestrel"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1550095416, "post_id": 54680096, "comment_id": 96149193, "body": "The answer to this question should be 6 but it returns 0"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1550096558, "post_id": 54680096, "comment_id": 96149622, "body": "Your code as amended still returns nothing.  The program initializes two lists, defines a function, and exits without calling the function."}], "answers": [{"tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": false, "score": 0, "last_activity_date": 1550096011, "creation_date": 1550096011, "answer_id": 54680271, "question_id": 54680096, "link": "https://stackoverflow.com/questions/54680096/problem-with-returning-in-recursion-function/54680271#54680271", "title": "Problem with returning in recursion function", "body": "<p>You have <code>word</code> and <code>lst</code> turned around in your logic. Your code shrinks the list that holds the things you look for - not the list where you look them up in.</p>\n\n<p>Fix:</p>\n\n<pre><code>def num(word,lst,sofar):\n    if not word:\n        return sofar\n\n    # ternary to add or not to add 1 to sofar\n    return num(word[1:], lst, sofar+ (1 if word[0] in lst else 0)) \n\n\nword = [\"cs\", \"is\",\"fun\", \"homework\",\"is\", \"sometimes\", \"fun\", \"exams\", \"are\", \"not\", \"fun\"] \nlst = [\"fun\", \"is\",\"not\"]\n\nprint(num(word,lst,0))\n</code></pre>\n\n<hr>\n\n<p>You could use a normal if as well:</p>\n\n<pre><code>def num(word,lst,sofar):\n    if not word:\n        return sofar\n\n    if word[0] in lst:\n        return num(word[1:], lst, sofar+1)\n    else:\n        return num(word[1:], lst, sofar)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 9253874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3e51820942c61b16b4e51ed885f6c0?s=128&d=identicon&r=PG&f=1", "display_name": "stefan", "link": "https://stackoverflow.com/users/9253874/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1550096147, "creation_date": 1550096147, "answer_id": 54680303, "question_id": 54680096, "link": "https://stackoverflow.com/questions/54680096/problem-with-returning-in-recursion-function/54680303#54680303", "title": "Problem with returning in recursion function", "body": "<p>First: you declared <code>word</code> and <code>lst</code> wrong, it should be the other way around.\nSecond: you can do it without the if-else\nThird: get rid of the sofar</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>LST = [\n    \"cs\", \"is\", \"fun\",\n    \"homework\", \"is\", \"sometimes\", \"fun\",\n    \"exams\", \"are\", \"not\", \"fun\"\n]\nWORD = [\"fun\", \"is\",\"not\"]\n\ndef num(word, lst):\n    if len(lst) == 0:\n        return 0\n    inc = 1 if lst[0] in word else 0\n    return num(word, lst[1:]) + inc\n\nprint(num(WORD, LST))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1467, "user_id": 9718110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gTdLM.jpg?s=128&g=1", "display_name": "ktzr", "link": "https://stackoverflow.com/users/9718110/ktzr"}, "is_accepted": false, "score": 0, "last_activity_date": 1550096215, "creation_date": 1550096215, "answer_id": 54680317, "question_id": 54680096, "link": "https://stackoverflow.com/questions/54680096/problem-with-returning-in-recursion-function/54680317#54680317", "title": "Problem with returning in recursion function", "body": "<p>The issue is you were not moving onto the next word in the list when the word was found.</p>\n\n<p>You were also iterating on the wrong list (swap <code>lst</code> and <code>word</code> around).</p>\n\n<p>Try this:</p>\n\n<pre><code>def num(word, lst, sofar):\n    if len(word) == 0:\n        return sofar\n    elif lst[0] in word == False:\n        return num(word[1:], lst, sofar)\n    else:\n        sofar = sofar + 1\n        return num(word[1:], lst, sofar)\n\nprint(num(word, lst, 0))\n</code></pre>\n\n<p>A slightly cleaner version:</p>\n\n<pre><code>def num(searchList, looking_for, sofar=0):\n    if len(searchList) == 0:\n        return sofar\n    elif searchList[0] in looking_for:\n        return num(searchList[1:], looking_for, sofar +1 )\n    else:\n        return num(searchList[1:], looking_for, sofar)\n\n\ncount = num(word, lst)\nprint(count)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1550098503, "creation_date": 1550098503, "answer_id": 54680701, "question_id": 54680096, "link": "https://stackoverflow.com/questions/54680096/problem-with-returning-in-recursion-function/54680701#54680701", "title": "Problem with returning in recursion function", "body": "<p>When it comes to recursion, my inclination is to keep it simple:</p>\n\n<pre><code>word = [\"cs\", \"is\", \"fun\", \"homework\", \"is\", \"sometimes\", \"fun\", \"exams\", \"are\", \"not\", \"fun\"]\nlst = [\"fun\", \"is\", \"not\"]\n\ndef num(word, lst, sofar=0):\n    if word:\n        return num(word[1:], lst, sofar + (word[0] in lst))\n\n    return sofar\n\nprint(num(word, lst))\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11048560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec1db3c91e45b1649a4f434128a7ccb?s=128&d=identicon&r=PG&f=1", "display_name": "Kestrel", "link": "https://stackoverflow.com/users/11048560/kestrel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1550098503, "creation_date": 1550095127, "last_edit_date": 1550095654, "question_id": 54680096, "link": "https://stackoverflow.com/questions/54680096/problem-with-returning-in-recursion-function", "title": "Problem with returning in recursion function", "body": "<pre><code>word = [\"cs\", \"is\", \"fun\", \"homework\", \"is\", \"sometimes\", \"fun\",\n\"exams\", \"are\", \"not\", \"fun\"].\n lst = [\"fun\", \"is\",\"not\"]\n\ndef num(word,lst,sofar):\n    if len(lst) == 0:\n        return sofar\n    elif lst[0] in word == False:\n        return num(word, lst[1:],sofar)\n    else:\n        sofar = sofar +1\n        return num(word,lst,sofar)\n</code></pre>\n\n<p>function returns how many times the words in list lst occur in list word and returns it as sofar</p>\n\n<p>The function should return 6 but it returns 0</p>\n"}, {"tags": ["python", "tensorflow", "google-colaboratory", "checkpoint", "machine-translation"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10725769, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jd4eV.jpg?s=128&g=1", "display_name": "Samir", "link": "https://stackoverflow.com/users/10725769/samir"}, "edited": false, "score": 1, "creation_date": 1550481125, "post_id": 54727134, "comment_id": 96269616, "body": "Okay, I got it, but how can I save the model with its encoder and decoder weights without checkpoints and using tf.train.Saver?"}], "tags": [], "owner": {"reputation": 1652, "user_id": 8755609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/570a0c1a834257f61beb04a36bcf6f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Ami F", "link": "https://stackoverflow.com/users/8755609/ami-f"}, "is_accepted": true, "score": 0, "last_activity_date": 1550347327, "creation_date": 1550347327, "answer_id": 54727134, "question_id": 54680088, "link": "https://stackoverflow.com/questions/54680088/saving-tensorflow-encoder-decoder-and-attention/54727134#54727134", "title": "Saving tensorflow encoder, decoder and attention", "body": "<p>TF only makes forward-compatibility guarantees: <a href=\"https://www.tensorflow.org/guide/version_compat#compatibility_of_graphs_and_checkpoints\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/guide/version_compat#compatibility_of_graphs_and_checkpoints</a>\nIt's not surprising that 1.13 saves a file that 1.12 cannot restore.\nUpgrade your local machine's tensorflow?</p>\n"}], "owner": {"reputation": 3, "user_id": 10725769, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jd4eV.jpg?s=128&g=1", "display_name": "Samir", "link": "https://stackoverflow.com/users/10725769/samir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 987, "favorite_count": 0, "accepted_answer_id": 54727134, "answer_count": 1, "score": 0, "last_activity_date": 1575321631, "creation_date": 1550095104, "last_edit_date": 1550139722, "question_id": 54680088, "link": "https://stackoverflow.com/questions/54680088/saving-tensorflow-encoder-decoder-and-attention", "title": "Saving tensorflow encoder, decoder and attention", "body": "<p>Start training a simple NMT (neural machine translator) with attention using encoder and decoder, Training was on Colab,</p>\n\n<pre><code>encoder = Encoder(vocab_inp_size, embedding_dim, units, BATCH_SIZE)\ndecoder = Decoder(vocab_tar_size, embedding_dim, units, BATCH_SIZE)\n</code></pre>\n\n<p>Then use checkpoints to save the model, </p>\n\n<pre><code># On loacl machine dir changed to 'training_checkpoints/' to fit the loaction\ncheckpoint_dir = './training_checkpoints'\ncheckpoint_prefix = os.path.join(checkpoint_dir, \"ckpt\")\ncheckpoint = tf.train.Checkpoint(optimizer=optimizer,\n                                 encoder=encoder,\n                                 decoder=decoder)\n</code></pre>\n\n<p>And save during traing using </p>\n\n<pre><code>checkpoint.save(file_prefix = checkpoint_prefix)\n</code></pre>\n\n<p>After training restore checkpoints works fine on Colab, and even when save the whole checkpoint folder on Google drive and restore them again, but when trying to restore them on my local machine its return different and rubbish results,\nStart checkpoint before training using</p>\n\n<pre><code>checkpoint.restore(tf.train.latest_checkpoint(checkpoint_dir))\n</code></pre>\n\n<p>Colab notebook output:</p>\n\n<pre><code>Input: &lt;start&gt; \u064a\u0644\u0639\u0628\u0648\u0646 \u0627\u0644\u0643\u0631\u0629 &lt;end&gt;\nPredicted translation: he played soccer . &lt;end&gt; \n</code></pre>\n\n<p>Local machine output:</p>\n\n<pre><code>Input: &lt;start&gt; \u064a\u0644\u0639\u0628\u0648\u0646 \u0627\u0644\u0643\u0631\u0629 &lt;end&gt;\nPredicted translation: take either either either either either either either either either either either either either either either either either either either either either either either either either either either either either either either either either either either either either either either either either\n</code></pre>\n\n<p>Colab tensorflow version: 1.13.0-rc1</p>\n\n<p>Local machine tensorflow version: 1.12.0</p>\n\n<p>How to save the model without facing this issue, knowing that this issue is due to the different versions of tensorflow?</p>\n\n<p>An additional link for NMT notebook\n<a href=\"https://github.com/tensorflow/tensorflow/blob/281e2d7eb08fe295ab918d3c35122a982963aa3f/tensorflow/contrib/eager/python/examples/nmt_with_attention/nmt_with_attention.ipynb\" rel=\"nofollow noreferrer\">Neural Machine Translation with Attention</a></p>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 5380, "user_id": 10618540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Od4aq.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/10618540/paritosh-singh"}, "edited": false, "score": 2, "creation_date": 1550095092, "post_id": 54680055, "comment_id": 96149044, "body": "assign with a <code>.copy</code>. As for why the original one gets altered, that is because <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">names refer to values</a> in python. assignment just gives 2 labels both pointing to the same underlying dataframe."}, {"owner": {"reputation": 5785, "user_id": 7306999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9dNzL.jpg?s=128&g=1", "display_name": "Xukrao", "link": "https://stackoverflow.com/users/7306999/xukrao"}, "edited": false, "score": 0, "creation_date": 1550095779, "post_id": 54680055, "comment_id": 96149327, "body": "See the similar question <a href=\"https://stackoverflow.com/questions/50368386/strange-behavior-with-dataframe-copy\">Strange behavior with DataFrame copy</a>."}], "answers": [{"tags": [], "owner": {"reputation": 5380, "user_id": 10618540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Od4aq.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/10618540/paritosh-singh"}, "is_accepted": false, "score": 3, "last_activity_date": 1550095749, "creation_date": 1550095749, "answer_id": 54680219, "question_id": 54680055, "link": "https://stackoverflow.com/questions/54680055/what-is-a-good-way-to-prevent-changes-from-being-applied-to-an-original-data-fra/54680219#54680219", "title": "What is a good way to prevent changes from being applied to an original data frame?", "body": "<p>If you wish to copy a dataframe and create a new object, use the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.copy.html\" rel=\"nofollow noreferrer\"><code>.copy</code></a>.</p>\n\n<pre><code># Merge several dataframes\nimport pandas as pd\nfrom functools import reduce\ndf1 = pd.DataFrame({'ID': ['Mary', 'Mike', 'Barry', 'Scotty'],'eTIV': [1.12, 2.22, 3.43, 5.43], })\ndf2 = pd.DataFrame({'ID': ['Mary', 'Mike', 'Barry', 'Scotty'],'Ear_Vol': [5, 6, 7, 8]})\ndf3 = pd.DataFrame({'ID': ['Mary', 'Mike', 'Barry', 'Scotty'],'Nose': [1, 2, 3, 5], })\ndf4 = pd.DataFrame({'ID': ['Mary', 'Mike', 'Barry', 'Scotty'],'Eye_Vol': [1, 2, 3, 5], })\ndf5 = pd.DataFrame({'ID': ['Mary', 'Mike', 'Barry', 'Scotty'],'Finger': [1.3, 2.123, 3.4, 5.5], })\n\ndfs = [df1, df2, df3, df4,df5]\n\ndf_final = reduce(lambda left,right: pd.merge(left,right,on='ID'), dfs)\n\ndf_final\ndf = df_final\n\nprint(df is df_final) #Prints True. They are both the same dataframe.\n\ndf_raw = df.copy() #Modified\n\nprint (df is df_raw) #Prints False. the copy method created a copy of the underlying dataframe object.\ndf_raw.columns = df_raw.columns.str.replace(r\"_Vol\", \"_Vol_Raw\")\ndf_raw = pd.DataFrame(data = df_raw, columns= df_raw.columns)\nprint(df_raw)\nprint(df) #No longer affected by df_raw\n</code></pre>\n\n<p>The reason why simple assignment shows the original behaviour is because names refer to values in python. assignment just gives 2 labels both pointing to the same underlying dataframe object. So, when the object is modified, all names tied to the object reflect the changes. Good further read <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": false, "score": 0, "last_activity_date": 1550097872, "creation_date": 1550097872, "answer_id": 54680610, "question_id": 54680055, "link": "https://stackoverflow.com/questions/54680055/what-is-a-good-way-to-prevent-changes-from-being-applied-to-an-original-data-fra/54680610#54680610", "title": "What is a good way to prevent changes from being applied to an original data frame?", "body": "<p>If you want to copy and rename the columns, you can use <a href=\"http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.rename.html\" rel=\"nofollow noreferrer\">rename</a> to do it in a single step, by default the method copies the underlying data:</p>\n\n<pre><code>df_raw = df.rename(axis='columns', mapper=lambda s: s.replace(r\"_Vol\", \"_Vol_Raw\"))\n\nprint(df)\nprint(df_raw)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>       ID  eTIV  Ear_Vol  Nose  Eye_Vol  Finger\n0    Mary  1.12        5     1        1   1.300\n1    Mike  2.22        6     2        2   2.123\n2   Barry  3.43        7     3        3   3.400\n3  Scotty  5.43        8     5        5   5.500\n       ID  eTIV  Ear_Vol_Raw  Nose  Eye_Vol_Raw  Finger\n0    Mary  1.12            5     1            1   1.300\n1    Mike  2.22            6     2            2   2.123\n2   Barry  3.43            7     3            3   3.400\n3  Scotty  5.43            8     5            5   5.500\n</code></pre>\n"}], "owner": {"reputation": 576, "user_id": 10029062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1884febc1873a29864ba719bc5ca6376?s=128&d=identicon&r=PG&f=1", "display_name": "arkadiy", "link": "https://stackoverflow.com/users/10029062/arkadiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1550097872, "creation_date": 1550094944, "question_id": 54680055, "link": "https://stackoverflow.com/questions/54680055/what-is-a-good-way-to-prevent-changes-from-being-applied-to-an-original-data-fra", "title": "What is a good way to prevent changes from being applied to an original data frame?", "body": "<p>I am attempting to pass a data frame through some commands (preparing a series of arguments for a function). However, when I assign a data frame to a different data frame, this assignment seems to work as equivalency. In other words, after the assignment of a data frame to a new one, all changes apply to the original one as well. What is a good way to preserve the original data frame in its original state, so that it can be re-assigned to other commands, for other changes.</p>\n\n<p>Please see below for an example.</p>\n\n<pre><code># Merge several dataframes\n\ndf1 = pd.DataFrame({'ID': ['Mary', 'Mike', 'Barry', 'Scotty'],'eTIV': [1.12, 2.22, 3.43, 5.43], })\ndf2 = pd.DataFrame({'ID': ['Mary', 'Mike', 'Barry', 'Scotty'],'Ear_Vol': [5, 6, 7, 8]})\ndf3 = pd.DataFrame({'ID': ['Mary', 'Mike', 'Barry', 'Scotty'],'Nose': [1, 2, 3, 5], })\ndf4 = pd.DataFrame({'ID': ['Mary', 'Mike', 'Barry', 'Scotty'],'Eye_Vol': [1, 2, 3, 5], })\ndf5 = pd.DataFrame({'ID': ['Mary', 'Mike', 'Barry', 'Scotty'],'Finger': [1.3, 2.123, 3.4, 5.5], })\n\ndfs = [df1, df2, df3, df4,df5]\n\ndf_final = reduce(lambda left,right: pd.merge(left,right,on='ID'), dfs)\n\ndf_final\n\n ID eTIV    Ear_Vol Nose    Eye_Vol Finger\n0   Mary    1.12    5   1   1   1.300\n1   Mike    2.22    6   2   2   2.123\n2   Barry   3.43    7   3   3   3.400\n3   Scotty  5.43    8   5   5   5.500\n</code></pre>\n\n<p>Assignment of the data frame to a different data frame and manipulations:</p>\n\n<pre><code>df = df_final\ndf_raw = df\ndf_raw.columns = df_raw.columns.str.replace(r\"_Vol\", \"_Vol_Raw\")\ndf_raw = pd.DataFrame(data = df_raw, columns= df_raw.columns)\n</code></pre>\n\n<p>New data frame (as expected):</p>\n\n<pre><code>df_raw\nID  eTIV    Ear_Vol_Raw Nose    Eye_Vol_Raw Finger\n0   Mary    1.12    5   1   1   1.300\n1   Mike    2.22    6   2   2   2.123\n2   Barry   3.43    7   3   3   3.400\n3   Scotty  5.43    8   5   5   5.500\n</code></pre>\n\n<p>Original data frame, for some reason is altered as well (why does assignment alter the original here?):</p>\n\n<pre><code>df\n\n    ID  eTIV    Ear_Vol_Raw Nose    Eye_Vol_Raw Finger\n0   Mary    1.12    5   1   1   1.300\n1   Mike    2.22    6   2   2   2.123\n2   Barry   3.43    7   3   3   3.400\n3   Scotty  5.43    8   5   5   5.500\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "oop"], "comments": [{"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 2, "creation_date": 1550094841, "post_id": 54679969, "comment_id": 96148938, "body": "You can use type hints and run a static analyser over the code, e.g. <code>mypy</code>. But this will not prevent runtime type errors. You could also look into <a href=\"https://docs.python.org/3/library/dataclasses.html\" rel=\"nofollow noreferrer\"><code>dataclasses</code></a>"}, {"owner": {"reputation": 1434, "user_id": 7212665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KrLoI.jpg?s=128&g=1", "display_name": "Demi-Lune", "link": "https://stackoverflow.com/users/7212665/demi-lune"}, "edited": false, "score": 0, "creation_date": 1550094882, "post_id": 54679969, "comment_id": 96148959, "body": "Did you look at e.g. this discussion : <a href=\"https://stackoverflow.com/questions/12569018/why-is-adding-attributes-to-an-already-instantiated-object-allowed\" title=\"why is adding attributes to an already instantiated object allowed\">stackoverflow.com/questions/12569018/&hellip;</a> ?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1550094939, "post_id": 54679969, "comment_id": 96148987, "body": "<code>c.locations.append</code> is bad. Provide a method on your object that checks the type before appending. Users of this class should only use that method and shouldn&#39;t be touching <code>self.locations</code> directly. Conventionally, attributes that aren&#39;t part of the public API are marked with a single-underscore, so you could use <code>._locations</code> to let [people know: &quot;don&#39;t touch this&quot;"}, {"owner": {"reputation": 570, "user_id": 847338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fdb1040cbc167fe242c38f628b1b3bfe?s=128&d=identicon&r=PG", "display_name": "Franz Kafka", "link": "https://stackoverflow.com/users/847338/franz-kafka"}, "reply_to_user": {"reputation": 1434, "user_id": 7212665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KrLoI.jpg?s=128&g=1", "display_name": "Demi-Lune", "link": "https://stackoverflow.com/users/7212665/demi-lune"}, "edited": false, "score": 0, "creation_date": 1550095021, "post_id": 54679969, "comment_id": 96149023, "body": "@Demi-Lune The advantage that I get is that doing a <code>l.</code> in VS Code, PyCharm, etc, shows the end user what attributes I expect them to set. I did not realize that they could add any attribute they wanted, which is unfortunate."}, {"owner": {"reputation": 1434, "user_id": 7212665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KrLoI.jpg?s=128&g=1", "display_name": "Demi-Lune", "link": "https://stackoverflow.com/users/7212665/demi-lune"}, "edited": false, "score": 0, "creation_date": 1550096942, "post_id": 54679969, "comment_id": 96149765, "body": "Also note that the type enforcement prevents duck typing (<a href=\"https://stackoverflow.com/questions/4205130/what-is-duck-typing\">stackoverflow.com/questions/4205130/what-is-duck-typing</a>), which is a nice feature of python (imho). So the pythonic answer could be &quot;make a nice developer&#39;s doc&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 570, "user_id": 847338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fdb1040cbc167fe242c38f628b1b3bfe?s=128&d=identicon&r=PG", "display_name": "Franz Kafka", "link": "https://stackoverflow.com/users/847338/franz-kafka"}, "edited": false, "score": 0, "creation_date": 1550094878, "post_id": 54680027, "comment_id": 96148955, "body": "Ah, I thought it was not Pythonic to have setters/getters. I guess it is different if the attribute is a list rather than a string?"}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "reply_to_user": {"reputation": 570, "user_id": 847338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fdb1040cbc167fe242c38f628b1b3bfe?s=128&d=identicon&r=PG", "display_name": "Franz Kafka", "link": "https://stackoverflow.com/users/847338/franz-kafka"}, "edited": false, "score": 4, "creation_date": 1550094974, "post_id": 54680027, "comment_id": 96149005, "body": "@FranzKafka It is perfectly pythonic. Python actually has a whole getter and setter protocol which you should definitely know about: <a href=\"https://stackoverflow.com/questions/17330160/how-does-the-property-decorator-work\" title=\"how does the property decorator work\">stackoverflow.com/questions/17330160/&hellip;</a> I believe it will greatly help you with the issues you are facing."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 570, "user_id": 847338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fdb1040cbc167fe242c38f628b1b3bfe?s=128&d=identicon&r=PG", "display_name": "Franz Kafka", "link": "https://stackoverflow.com/users/847338/franz-kafka"}, "edited": false, "score": 5, "creation_date": 1550095015, "post_id": 54680027, "comment_id": 96149020, "body": "@FranzKafka this is not a setter. A setter would be something like <code>def set_locations(self, loc): self.loctions = loc</code> You shouldn&#39;t do that. You should use a regular attribute and of you want to control access at some point, you can re-factor using a <code>property</code>"}, {"owner": {"reputation": 570, "user_id": 847338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fdb1040cbc167fe242c38f628b1b3bfe?s=128&d=identicon&r=PG", "display_name": "Franz Kafka", "link": "https://stackoverflow.com/users/847338/franz-kafka"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1550095107, "post_id": 54680027, "comment_id": 96149051, "body": "@juanpa.arrivillaga I realize that, I guess I meant that I thought the Pythonic way to interact with the instance variables was like so <code>obj.var = &quot;foo&quot;</code>, and <code>obj.var.append(&quot;foo&quot;)</code>, so this is illuminating for me."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 570, "user_id": 847338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fdb1040cbc167fe242c38f628b1b3bfe?s=128&d=identicon&r=PG", "display_name": "Franz Kafka", "link": "https://stackoverflow.com/users/847338/franz-kafka"}, "edited": false, "score": 1, "creation_date": 1550095152, "post_id": 54680027, "comment_id": 96149075, "body": "@FranzKafka no, not at all. If you just want to <i>set or get</i> an instance attribute, then you just do it. Directly mutating the object referenced by an instance attribute is another matter."}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 3, "creation_date": 1550095165, "post_id": 54680027, "comment_id": 96149082, "body": "<code>@property</code> means the setter/getter implementation details are not exposed to the user, e.g. <code>obj.var = &quot;foo&quot;</code> works in both cases (setter function or basic attribute). But <code>obj.var.append()</code> is not the same thing."}], "tags": [], "owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "is_accepted": true, "score": 4, "last_activity_date": 1550097856, "last_edit_date": 1550097856, "creation_date": 1550094814, "answer_id": 54680027, "question_id": 54679969, "link": "https://stackoverflow.com/questions/54679969/how-do-you-keep-code-consistent-with-multiple-developers/54680027#54680027", "title": "How do you keep code consistent with multiple developers?", "body": "<p>An OOP solution is to make sure the users of your class' API do not have to interact directly with your instance attributes.</p>\n\n<h1>Methods</h1>\n\n<p>One approach is to implement methods which encapsulate the logic of adding a location.</p>\n\n<h3>Example</h3>\n\n<pre><code>class Company:\n    def __init__(self, j):\n        self.locations = []\n\n    def add_location(self, location):\n        if isinstance(location, Location):\n            self.locations.append(location)\n        else:\n            raise TypeError(\"argument 'location' should be a Location object\")\n</code></pre>\n\n<h1>Properties</h1>\n\n<p>Another OOP concept you can use is a <a href=\"https://stackoverflow.com/questions/17330160/how-does-the-property-decorator-work\">property</a>. Properties are a simple way to define getter and setters for your instance attributes.</p>\n\n<h3>Example</h3>\n\n<p>Suppose we want to enforce a certain format for a <code>Location.zip</code> attribute</p>\n\n<pre><code>class Location:\n    def __init__(self):\n        self._zip = None\n\n    @property\n    def zip(self):\n        return self._zip\n\n    @zip.setter\n    def zip(self, value):\n        if some_condition_on_value:\n            self._zip = value\n        else:\n            raise ValueError('Incorrect format')\n\n    @zip.deleter\n    def zip(self):\n        self._zip = None\n</code></pre>\n\n<p>Notice that the attribute <code>Location()._zip</code> is still accessible and writable. While the underscore denotes what should be a private attribute, <a href=\"https://stackoverflow.com/questions/70528/why-are-pythons-private-methods-not-actually-private\">nothing is really private in Python</a>.</p>\n\n<h1>Final word</h1>\n\n<p>Due to Python's high introspection capabilities, nothing will ever be totally safe. You will have to sit down with your team and discuss the tools and practice you want to adopt.</p>\n\n<blockquote>\n  <p>Nothing is really private in python. No class or class instance can\n  keep you away from all what's inside (this makes introspection\n  possible and powerful). Python trusts you. It says \"hey, if you want\n  to go poking around in dark places, I'm gonna trust that you've got a\n  good reason and you're not making trouble.\"</p>\n  \n  <p>After all, we're all consenting adults here.</p>\n  \n  <p>--- <a href=\"https://mail.python.org/pipermail/tutor/2003-October/025932.html\" rel=\"nofollow noreferrer\">Karl Fast</a></p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1550097499, "post_id": 54680184, "comment_id": 96149934, "body": "This is a good step, but does not prevent from using <code>ListOfLocations.extend</code>, <code>ListOfLocations.insert</code>, <code>ListOfLocations.__setitem__</code>, etc."}, {"owner": {"reputation": 1434, "user_id": 7212665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KrLoI.jpg?s=128&g=1", "display_name": "Demi-Lune", "link": "https://stackoverflow.com/users/7212665/demi-lune"}, "reply_to_user": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1550135662, "post_id": 54680184, "comment_id": 96161596, "body": "Yes, it&#39;d require redefining any syntax that we want to protect. It&#39;s probably a matter of taste with your answer. The only advantage of this one, is that it doesn&#39;t require any modification of the initial test-case."}], "tags": [], "owner": {"reputation": 1434, "user_id": 7212665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KrLoI.jpg?s=128&g=1", "display_name": "Demi-Lune", "link": "https://stackoverflow.com/users/7212665/demi-lune"}, "is_accepted": false, "score": 1, "last_activity_date": 1550095540, "creation_date": 1550095540, "answer_id": 54680184, "question_id": 54679969, "link": "https://stackoverflow.com/questions/54679969/how-do-you-keep-code-consistent-with-multiple-developers/54680184#54680184", "title": "How do you keep code consistent with multiple developers?", "body": "<p>You could also define a new class <code>ListOfLocations</code> that make the safety checks. Something like this</p>\n\n<pre><code>class ListOfLocations(list):\n   def append(self,l):\n      if not isinstance(l, Location): raise TypeError(\"Location required here\")\n      else: super().append(l)\n</code></pre>\n"}], "owner": {"reputation": 570, "user_id": 847338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fdb1040cbc167fe242c38f628b1b3bfe?s=128&d=identicon&r=PG", "display_name": "Franz Kafka", "link": "https://stackoverflow.com/users/847338/franz-kafka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 1, "accepted_answer_id": 54680027, "answer_count": 2, "score": 0, "last_activity_date": 1550097856, "creation_date": 1550094480, "last_edit_date": 1550096831, "question_id": 54679969, "link": "https://stackoverflow.com/questions/54679969/how-do-you-keep-code-consistent-with-multiple-developers", "title": "How do you keep code consistent with multiple developers?", "body": "<p>I know that Python is a dynamically typed language, and that I am likely trying to recreate Java behavior here. However, I have a team of people working on this code base, and my goal with the code is to ensure that they are doing things in a consistent manner. Let me give an example:</p>\n\n<pre><code>class Company:\n    def __init__(self, j):\n        self.locations = []\n</code></pre>\n\n<p>When they instantiate a Company object, an empty list that holds locations is created. Now, with Python anything can be added to the list. However, I would like for this list to only contain Location objects:</p>\n\n<pre><code>class Location:\n    def __init__(self, j):\n        self.address = None\n        self.city = None\n        self.state = None\n        self.zip = None\n</code></pre>\n\n<p>I'm doing this with classes so that the code is self documenting. In other words, \"location has only these attributes\". My goal is that they do this:</p>\n\n<pre><code>c = Company()\nl = Location()\nl.city = \"New York\"\nc.locations.append(l)\n</code></pre>\n\n<p>Unfortunately, nothing is stopping them from simply doing <code>c.locations.append(\"foo\")</code>, and nothing indicates to them that <code>c.locations</code> should be a list of Location objects.</p>\n\n<p>What is the Pythonic way to enforce consistency when working with a team of developers?</p>\n"}, {"tags": ["python", "numpy", "struct"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1550095303, "post_id": 54679949, "comment_id": 96149139, "body": "Why do you expect the <code>fromfile</code> to be any better?   Each <code>fromfile</code> call is processing the same size block as the corresponding <code>struct.unpack</code>.  I assume the <code>data</code> blocks are larger than the <code>header</code> ones.  The unpacking is as simple as it gets, one byte per element."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1550095599, "post_id": 54679949, "comment_id": 96149262, "body": "In general, once you have created a <code>ndarray</code>, the processing is quite fast, at least for whole array operations that use compiled code, and various forms of indexing.  But creating an array, whether from lists, or from a file isn&#39;t necessarily fast.  Here file reading could be as big a time consumer as the processing."}, {"owner": {"reputation": 31, "user_id": 11058869, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7xNQLl1f28k/AAAAAAAAAAI/AAAAAAAAEc0/4wh-HA8tnac/photo.jpg?sz=128", "display_name": "drew", "link": "https://stackoverflow.com/users/11058869/drew"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1550096767, "post_id": 54679949, "comment_id": 96149700, "body": "yes, the <code>data</code> blocks are much bigger, and size defined in the headers. I would expect the <code>data = np.frombuffer()</code> to be at least as fast as <code>data = struct.unpack</code>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1550108207, "post_id": 54679949, "comment_id": 96152870, "body": "I think the <code>unpack</code> statement should be: <code>struct.unpack( f&#39;{size-10}B&#39;, RAW[byte+10: byte+size)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1550103364, "creation_date": 1550103364, "answer_id": 54681417, "question_id": 54679949, "link": "https://stackoverflow.com/questions/54679949/unpacking-binary-file-using-struct-unpack-vs-np-frombuffer-vs-np-ndarray-vs-np-f/54681417#54681417", "title": "unpacking binary file using struct.unpack VS np.frombuffer VS np.ndarray VS np.fromfile", "body": "<p>I haven't used <code>struct</code> much, but between your code and docs I got it to work on a buffer that stores an array of integers.</p>\n\n<p>Make a byte array/string from a <code>numpy</code> array.</p>\n\n<pre><code>In [81]: arr = np.arange(1000)\nIn [82]: barr = arr.tobytes()\nIn [83]: type(barr)\nOut[83]: bytes\nIn [84]: len(barr)\nOut[84]: 8000\n</code></pre>\n\n<p>The reverse is <code>tobytes</code>:</p>\n\n<pre><code>In [85]: x = np.frombuffer(barr, dtype=int)\nIn [86]: x[:10]\nOut[86]: array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])\nIn [87]: np.allclose(x,arr)\nOut[87]: True\n</code></pre>\n\n<p><code>ndarray</code> also works, though the direct use of this constructor is usually discouraged:</p>\n\n<pre><code>In [88]: x = np.ndarray(buffer=barr, dtype=int, shape=(1000,))\nIn [89]: np.allclose(x,arr)\nOut[89]: True\n</code></pre>\n\n<p>To use <code>struct</code> I need to create a format that includes the length, \"1000 long\":</p>\n\n<pre><code>In [90]: tup = struct.unpack('1000l', barr)\nIn [91]: len(tup)\nOut[91]: 1000\nIn [92]: tup[:10]\nOut[92]: (0, 1, 2, 3, 4, 5, 6, 7, 8, 9)\nIn [93]: np.allclose(np.array(tup),arr)\nOut[93]: True\n</code></pre>\n\n<p>So now that we've established equivalent methods of reading the buffer, do some timings:</p>\n\n<pre><code>In [94]: timeit x = np.frombuffer(barr, dtype=int)\n617 ns \u00b1 0.806 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n\nIn [95]: timeit x = np.ndarray(buffer=barr, dtype=int, shape=(1000,))\n1.11 \u00b5s \u00b1 1.76 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n\nIn [96]: timeit tup = struct.unpack('1000l', barr)\n19 \u00b5s \u00b1 38.4 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n\nIn [97]: timeit tup = np.array(struct.unpack('1000l', barr))\n87.5 \u00b5s \u00b1 25.1 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000 loops each)\n</code></pre>\n\n<p><code>frombuffer</code> looks pretty good.</p>\n\n<p>Your <code>struct.unpack</code> loop confuses me.  I don't think it's doing the same thing as the <code>frombuffer</code>. But like said at the start, I haven't used <code>struct</code> much.</p>\n"}], "owner": {"reputation": 31, "user_id": 11058869, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7xNQLl1f28k/AAAAAAAAAAI/AAAAAAAAEc0/4wh-HA8tnac/photo.jpg?sz=128", "display_name": "drew", "link": "https://stackoverflow.com/users/11058869/drew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1448, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1550103364, "creation_date": 1550094377, "question_id": 54679949, "link": "https://stackoverflow.com/questions/54679949/unpacking-binary-file-using-struct-unpack-vs-np-frombuffer-vs-np-ndarray-vs-np-f", "title": "unpacking binary file using struct.unpack VS np.frombuffer VS np.ndarray VS np.fromfile", "body": "<p>I am unpacking large binary files (~1GB) with many different datatypes.  I am in the early stages of creating the loop to covert each byte.\nI have been using struct.unpack, but recently thought it would run faster if I utilized numpy.  However switching to numpy has slowed down my program.\nI have tried:</p>\n\n<pre><code>struct.unpack\nnp.fromfile\nnp.frombuffer\nnp.ndarray\n</code></pre>\n\n<p><em>note:in the np.fromfile method I leave the file open and don't load it into memory and seek through it</em></p>\n\n<p>1)</p>\n\n<pre><code>with open(file=\"file_loc\" , mode='rb') as file: \n    RAW = file.read()\nbyte=0\nlen = len(RAW)\nwhile( byte &lt; len):\n    header = struct.unpack(\"&gt;HHIH\", RAW[byte:(byte+10)])\n    size = header[1]\n    loc  = str(header[3])\n    data[loc] = struct.unpack(\"&gt;B\", RAW[byte+10:byte+size-10)\n    byte+=size\n</code></pre>\n\n<p>2)</p>\n\n<pre><code>dt=('&gt;u2,&gt;u2,&gt;u4,&gt;u2')\nwith open(file=\"file_loc\" , mode='rb') as RAW:\n    same loop as above:\n        header = np.fromfile(RAW[byte:byte+10], dtype=dt, count=1)[0]\n        data   = np.fromfile(RAW[byte+10:byte+size-10], dtype=\"&gt;u1\", count=size-10)\n</code></pre>\n\n<p>3)</p>\n\n<pre><code>dt=('&gt;u2,&gt;u2,&gt;u4,&gt;u2')\nwith open(file=\"file_loc\" , mode='rb') as file:\n    RAW = file.read()\nsame loop:\n    header = np.ndarray(buffer=RAW[byte:byte+10], dtype=dt_header, shape= 1)[0]\n    data   = np.ndarray(buffer=RAW[byte+10:byte+size-10], dtype=\"&gt;u1\", shape=size-10)\n</code></pre>\n\n<p>4) <code>pretty much the same as 3 except using np.frombuffer()</code></p>\n\n<p>All of the numpy implementations process at about half the speed as the struct.unpack method, which is not what I expected.</p>\n\n<p>Let me know if there is anything I can do to improve performance.</p>\n\n<p>also, I just typed this from memory so it might have some errors.</p>\n"}, {"tags": ["python", "bash", "bin"], "comments": [{"owner": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "edited": false, "score": 2, "creation_date": 1550112350, "post_id": 54679942, "comment_id": 96153777, "body": "I don&#39;t understand your question at all. What do you mean by <code>&#47;bin&#47;bash sh</code>? Why would you use <code>#!&#47;usr&#47;bin&#47;env python</code> in a &quot;sh script&quot;? Where is the rest of your code?"}], "answers": [{"tags": [], "owner": {"reputation": 3615, "user_id": 1040031, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/PPKXg.jpg?s=128&g=1", "display_name": "Bogdan Stoica", "link": "https://stackoverflow.com/users/1040031/bogdan-stoica"}, "is_accepted": false, "score": 0, "last_activity_date": 1550237478, "creation_date": 1550237478, "answer_id": 54710437, "question_id": 54679942, "link": "https://stackoverflow.com/questions/54679942/best-way-to-run-script-via-a-bin-bash-shell-script-in-multiple-environments/54710437#54710437", "title": "Best way to run script via a /bin/bash shell script in multiple environments?", "body": "<p>I assume this is what you wanted...</p>\n\n<pre><code>#!/bin/bash\n\nif [ ! \"$@\" ]; then\n  echo \"Usage: $1 (local|development) \"\n  exit\nfi\n\nif [ \"$1\" == \"local\" ]; then\n    python script.py \"$1\"\n    echo \"$1\"\nelif\n    [ \"$1\" == \"development\" ]; then\n    python script.py \"$1\"\n    echo \"$1\"\nfi\n</code></pre>\n\n<p>Save the bash code above into a file named let's say <code>script.sh</code>. The make it executable: <code>chmod +x script.sh</code>. Then run it:</p>\n\n<pre><code>./script.sh\n</code></pre>\n\n<p>If no argument is specified, the script will just print an info about how to use it.</p>\n\n<p><code>./script.sh local</code> - executes python script.py local</p>\n\n<p><code>./script.sh development</code> - executes python script.py development</p>\n\n<p>You can comment the lines with echo, they were left there just for debugging purposes (add a <strong>#</strong> in front of the echo lines to comment them).</p>\n"}, {"comments": [{"owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1550238577, "post_id": 54710742, "comment_id": 96206800, "body": "Perhaps see also <a href=\"https://stackoverflow.com/questions/5725296/difference-between-sh-and-bash\">Difference between <code>sh</code> and <code>bash</code></a>"}], "tags": [], "owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 1, "last_activity_date": 1550238526, "creation_date": 1550238526, "answer_id": 54710742, "question_id": 54679942, "link": "https://stackoverflow.com/questions/54679942/best-way-to-run-script-via-a-bin-bash-shell-script-in-multiple-environments/54710742#54710742", "title": "Best way to run script via a /bin/bash shell script in multiple environments?", "body": "<p>Since <code>$1</code> already contains what you want, the conditional is unnecessary.</p>\n\n<p>If your script is a Bash script, you should put <code>#!/bin/bash</code> (or your local equivalent) in the shebang line.  However, this particular script uses no Bash features, and so might usefully be coded to run POSIX <code>sh</code> instead.</p>\n\n<pre><code>#!/bin/sh\n\ncase $1 in\n  local|development) ;;\n  *) echo \"Syntax: $0 local|development\" &gt;&amp;2; exit 2;;\nesac\n\nexec python script.py \"$1\"\n</code></pre>\n\n<p>A more useful approach is to configure your local system to run the script directly with <code>./script.py</code> or similar, and let the script itself take care of parsing its command-line arguments.  How exactly to do that depends on your precise environment, but on most U*x-like systems, you would put <code>#!/usr/bin/env python</code> as the first line of <code>script.py</code> itself, and <code>chmod +x</code> the file.</p>\n"}], "owner": {"reputation": 9, "user_id": 11039054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/304a478d051b8a4727397849bbe65fcb?s=128&d=identicon&r=PG&f=1", "display_name": "inf101cl", "link": "https://stackoverflow.com/users/11039054/inf101cl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550238526, "creation_date": 1550094344, "last_edit_date": 1550100096, "question_id": 54679942, "link": "https://stackoverflow.com/questions/54679942/best-way-to-run-script-via-a-bin-bash-shell-script-in-multiple-environments", "title": "Best way to run script via a /bin/bash shell script in multiple environments?", "body": "<p>I have a python script which I run on localhost and development in command line with argument, sth as <code>python script.py development</code> - on development and <code>python script.py localhost</code> - on localhost.</p>\n\n<p>Now I want to run this script - when I running script <code>/bin/bash sh</code>,\nso I want to run this script from <code>/bin/.bash</code> script.\nI added in headers in sh script: <code>#!/usr/bin/env python</code>.</p>\n\n<p>In what way I can achieve this?</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>do\n    if [ $1 == \"local\" ]; then\n      python script.py $1\n\n    elif [ $1 == \"development\" ]; then\n      python script.py $1\n</code></pre>\n\n<p><em>What</em> I can do to improve this script?</p>\n"}, {"tags": ["python", "matplotlib", "ssh", "pycharm", "xserver"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1550502561, "post_id": 54679917, "comment_id": 96282403, "body": "I think the idea doesn&#39;t take into account that the code that performs the interactions necessarily needs to run on the server."}, {"owner": {"reputation": 7966, "user_id": 2454357, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8daa3f3fb97961ac7cb5dd716f494bae?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas K&#252;hn", "link": "https://stackoverflow.com/users/2454357/thomas-k%c3%bchn"}, "edited": false, "score": 1, "creation_date": 1550576277, "post_id": 54679917, "comment_id": 96310901, "body": "Why do you need to run the visualisation on a remote server? Is it because data generation is too slow or because the amount of data is large or something else?"}, {"owner": {"reputation": 2243, "user_id": 1625695, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/nb5fo.jpg?s=128&g=1", "display_name": "Hesham Eraqi", "link": "https://stackoverflow.com/users/1625695/hesham-eraqi"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1550582112, "post_id": 54679917, "comment_id": 96314390, "body": "@ImportanceOfBeingErnest I mean interacting with the figure using the mouse graphically, there is no code that do the interaction. Sorry my question was not clear, I have edited it to mention this explicitly."}, {"owner": {"reputation": 2243, "user_id": 1625695, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/nb5fo.jpg?s=128&g=1", "display_name": "Hesham Eraqi", "link": "https://stackoverflow.com/users/1625695/hesham-eraqi"}, "reply_to_user": {"reputation": 7966, "user_id": 2454357, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8daa3f3fb97961ac7cb5dd716f494bae?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas K&#252;hn", "link": "https://stackoverflow.com/users/2454357/thomas-k%c3%bchn"}, "edited": false, "score": 0, "creation_date": 1550582349, "post_id": 54679917, "comment_id": 96314537, "body": "@ThomasK&#252;hn The data I&#39;m trying to visualize is in the remote server (because of its big size). I visualize individual files which are small. So another workaround would be to use the local interpreter, and write a script the copies only the needed file then visualize it. But I don&#39;t prefer this workaround."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 2, "creation_date": 1550582533, "post_id": 54679917, "comment_id": 96314657, "body": "The code that is responsible for &quot;interacting with the figure using the mouse graphically&quot; is <a href=\"https://github.com/matplotlib/matplotlib/tree/master/lib/matplotlib/backends\" rel=\"nofollow noreferrer\">in the backends</a>, i.e. it necessarily is part of the code run on the server."}, {"owner": {"reputation": 7966, "user_id": 2454357, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8daa3f3fb97961ac7cb5dd716f494bae?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas K&#252;hn", "link": "https://stackoverflow.com/users/2454357/thomas-k%c3%bchn"}, "edited": false, "score": 2, "creation_date": 1550582840, "post_id": 54679917, "comment_id": 96314861, "body": "My thought here was that one could maybe mount the data directory of the remote server as a local folder using something like <code>sshfs</code> and then run the script locally. Depending on the size of the data file you process, this would most likely slow down the figure generation, but make the figure more responsive. With a little bit of planning, one could write a script that first generates pre-processed data and saves it, so that the process does not need to be repeated. It all depends on what you are trying to do..."}, {"owner": {"reputation": 2243, "user_id": 1625695, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/nb5fo.jpg?s=128&g=1", "display_name": "Hesham Eraqi", "link": "https://stackoverflow.com/users/1625695/hesham-eraqi"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1550671819, "post_id": 54679917, "comment_id": 96354923, "body": "@ImportanceOfBeingErnest Thanks for the information. I wrongly assumed it&#39;s part of PyCharm."}, {"owner": {"reputation": 2243, "user_id": 1625695, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/nb5fo.jpg?s=128&g=1", "display_name": "Hesham Eraqi", "link": "https://stackoverflow.com/users/1625695/hesham-eraqi"}, "reply_to_user": {"reputation": 7966, "user_id": 2454357, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8daa3f3fb97961ac7cb5dd716f494bae?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas K&#252;hn", "link": "https://stackoverflow.com/users/2454357/thomas-k%c3%bchn"}, "edited": false, "score": 0, "creation_date": 1550674719, "post_id": 54679917, "comment_id": 96356810, "body": "@ThomasK&#252;hn Thanks, it&#39;s a good workaround that is similar to he one I mentioned. But the question remains open, can we make figure GUI interactions faster while using a remote interpreter?"}, {"owner": {"reputation": 2697, "user_id": 11059315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68263eac6b6be448f38d829a0832e2b9?s=128&d=identicon&r=PG&f=1", "display_name": "xilpex", "link": "https://stackoverflow.com/users/11059315/xilpex"}, "edited": false, "score": 0, "creation_date": 1550702659, "post_id": 54679917, "comment_id": 96370736, "body": "Is this for data science?"}, {"owner": {"reputation": 7966, "user_id": 2454357, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8daa3f3fb97961ac7cb5dd716f494bae?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas K&#252;hn", "link": "https://stackoverflow.com/users/2454357/thomas-k%c3%bchn"}, "edited": false, "score": 1, "creation_date": 1550738543, "post_id": 54679917, "comment_id": 96381973, "body": "Well, the main problem is that if you run your script on a remote server, the response times of the GUI are limited by your data connection. So if you really want to do things this way I&#39;m guessing that the only answer is to improve connection speed, which has nothing to do with matplotlib."}], "answers": [{"tags": [], "owner": {"reputation": 851, "user_id": 6061080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jP5Jm.jpg?s=128&g=1", "display_name": "shiv_90", "link": "https://stackoverflow.com/users/6061080/shiv-90"}, "is_accepted": false, "score": 0, "last_activity_date": 1551080333, "creation_date": 1551080333, "answer_id": 54861503, "question_id": 54679917, "link": "https://stackoverflow.com/questions/54679917/pycharm-remote-interpreter-and-local-plot/54861503#54861503", "title": "PyCharm remote interpreter and local plot?", "body": "<p>Interacting with visualisations on separate windows is slow, not just on PyCharm but any IDE that you specify visualisations to be loaded separately. This is because they are loaded on either <code>tkinter</code> or any of the available modules like <code>Qt5</code> and if you're on a mac, you can also use the inbuilt OSX rendering. Especially if your dataset is large then interaction becomes slower. It just seems that visualisations in Python are not exactly that optimised as you witness on Tableau or even Orange/Glue.</p>\n\n<p>That's why I personally prefer visualising data inline through the IPython console (for that I use Spyder). You cannot interact with plots though, but the purpose suffices.</p>\n"}], "owner": {"reputation": 2243, "user_id": 1625695, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/nb5fo.jpg?s=128&g=1", "display_name": "Hesham Eraqi", "link": "https://stackoverflow.com/users/1625695/hesham-eraqi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 591, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1551080333, "creation_date": 1550094231, "last_edit_date": 1550582052, "question_id": 54679917, "link": "https://stackoverflow.com/questions/54679917/pycharm-remote-interpreter-and-local-plot", "title": "PyCharm remote interpreter and local plot?", "body": "<p>I'm using PyCharm with a remote interpreter. My code is <code>show</code>ing a <code>scatter</code> <code>figure</code> using <code>matplotlib</code>. I can see the figure normally and interact with (zoom and rotate), but the interaction is too slow. I think this is because it's done through the SSH X-server.</p>\n\n<p>My question is how to manually make the figure interactions graphically (using mouse, like zooming, panning, rotation, ...) execute faster? I think this should be via allowing the figure interactions to happen on local machine (machine running PyCharm), not the remote server.</p>\n\n<p>One workaround is to save a <code>.fig</code> file, then copy it to my local machine, then load it. But I don't prefer this workaround.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "pandas", "function", "for-loop"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550094296, "post_id": 54679874, "comment_id": 96148731, "body": "you wanted <code>()</code> for a function call, not <code>[]</code> which is for indexing or accessing an object by key"}], "answers": [{"comments": [{"owner": {"reputation": 1604, "user_id": 7158458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209106524837718/picture?type=large", "display_name": "Emm", "link": "https://stackoverflow.com/users/7158458/emm"}, "edited": false, "score": 0, "creation_date": 1550094971, "post_id": 54679930, "comment_id": 96149004, "body": "still returns an error message, this time TypeError: unsupported type: &lt;class &#39;str&#39;&gt;"}], "tags": [], "owner": {"reputation": 304, "user_id": 4078594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd3d2ef301d601f5392a928f1de3fbec?s=128&d=identicon&r=PG&f=1", "display_name": "GeorgPoe", "link": "https://stackoverflow.com/users/4078594/georgpoe"}, "is_accepted": false, "score": 0, "last_activity_date": 1550094294, "creation_date": 1550094294, "answer_id": 54679930, "question_id": 54679874, "link": "https://stackoverflow.com/questions/54679874/trying-to-create-a-function-that-tests-correlation-for-a-list-of-dataframe-colum/54679930#54679930", "title": "Trying to create a function that tests correlation for a list of dataframe columns against the same list", "body": "<p>The error message says that you got the wrong pair of parentheses [] instead of ():\nThis should do it:</p>\n\n<pre><code>def collinear(x):\n  for a in col_list:\n    return x.corr(a)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "is_accepted": false, "score": 0, "last_activity_date": 1550095577, "creation_date": 1550095577, "answer_id": 54680192, "question_id": 54679874, "link": "https://stackoverflow.com/questions/54679874/trying-to-create-a-function-that-tests-correlation-for-a-list-of-dataframe-colum/54680192#54680192", "title": "Trying to create a function that tests correlation for a list of dataframe columns against the same list", "body": "<p>If I understand correctly:</p>\n\n<pre><code>def collinear(x):\n  for a in col_list:\n    return x.corr(x[a])\n</code></pre>\n"}], "owner": {"reputation": 1604, "user_id": 7158458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209106524837718/picture?type=large", "display_name": "Emm", "link": "https://stackoverflow.com/users/7158458/emm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550095577, "creation_date": 1550094033, "last_edit_date": 1550094177, "question_id": 54679874, "link": "https://stackoverflow.com/questions/54679874/trying-to-create-a-function-that-tests-correlation-for-a-list-of-dataframe-colum", "title": "Trying to create a function that tests correlation for a list of dataframe columns against the same list", "body": "<p>I am trying to create a function that will iterate through a list (a list of columns in my dataframe) and test for correlation.</p>\n\n<p>Then create a for list to run through the same list of columns and run the function for each column.</p>\n\n<p>This is the code I have:</p>\n\n<pre><code>col_list = fifa_dataset[['Agility','Acceleration','Balance','Positioning','Skill Moves','BallControl','Crossing','Finishing','Reactions','SprintSpeed']]\ndef collinear(x):\n  for a in col_list:\n    return x.corr[a]\nfor i in col_list:\n  print(collinear(fifa_dataset[i]))\n</code></pre>\n\n<p>This is my traceback message:</p>\n\n<pre><code>---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-56-a4dd1a4478dd&gt; in &lt;module&gt;()\n      4     return x.corr[a]\n      5 for i in col_list:\n----&gt; 6   print(collinear(fifa_dataset[i]))\n\n&lt;ipython-input-56-a4dd1a4478dd&gt; in collinear(x)\n      2 def collinear(x):\n      3   for a in col_list:\n----&gt; 4     return x.corr[a]\n      5 for i in col_list:\n      6   print(collinear(fifa_dataset[i]))\n\nTypeError: 'method' object is not subscriptable\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 8722564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Y_MeMj2lt-g/AAAAAAAAAAI/AAAAAAAAACE/OSSBObnQvqY/photo.jpg?sz=128", "display_name": "Joost Luijben", "link": "https://stackoverflow.com/users/8722564/joost-luijben"}, "is_accepted": false, "score": 0, "last_activity_date": 1550094936, "creation_date": 1550094936, "answer_id": 54680051, "question_id": 54679861, "link": "https://stackoverflow.com/questions/54679861/loop-through-dict-items-with-keys-matching-a-string/54680051#54680051", "title": "Loop through dict items with keys matching a string", "body": "<pre><code>print([k + \" \" + v for k, v in mydict.items() if k.startswith('a')])\n</code></pre>\n\n<p>This is called a list comprehension. This one also has a if statement in it</p>\n"}, {"comments": [{"owner": {"reputation": 9739, "user_id": 3691783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18bfba7d4beb1c210fa670cf57c66f4b?s=128&d=identicon&r=PG", "display_name": "Matt Messersmith", "link": "https://stackoverflow.com/users/3691783/matt-messersmith"}, "edited": false, "score": 0, "creation_date": 1550095126, "post_id": 54680054, "comment_id": 96149058, "body": "Agreed, the 3 liner is perfectly fine."}], "tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": false, "score": 1, "last_activity_date": 1550095171, "last_edit_date": 1550095171, "creation_date": 1550094943, "answer_id": 54680054, "question_id": 54679861, "link": "https://stackoverflow.com/questions/54679861/loop-through-dict-items-with-keys-matching-a-string/54680054#54680054", "title": "Loop through dict items with keys matching a string", "body": "<p>Your 3 liner is fine. As for shorter: you almost had it - for loops can not have qualifiers - you either need to restict the things you for over:</p>\n\n<pre><code>d = {'aName': 'Nancy', 'aAge': '25', 'bName': 'Don', 'bNumber': '21'} \n\n# restrict the things you loop over by qualifying them as generator\nfor k,v in (tup for tup in d.items() if tup[0].startswith(\"a\")):\n    print(k,v)\n</code></pre>\n\n<p>or you create the print statement as one-liner using decomposition and a <code>sep=\"\\n\"</code>:</p>\n\n<pre><code>print( *( f\"{k} {v}\" for k,v in d.items() if k.startswith(\"a\")), sep=\"\\n\")\n</code></pre>\n\n<p>Output (both cases):</p>\n\n<pre><code>aName Nancy\naAge 25\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 1, "creation_date": 1550095082, "post_id": 54680075, "comment_id": 96149040, "body": "or you use the 1-line print statement ;)"}, {"owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "edited": false, "score": 0, "creation_date": 1550156912, "post_id": 54680075, "comment_id": 96174440, "body": "sure, I will use the 3 liner, was just wondering if it exists and I didn&#39;t know, thanks for explaining."}], "tags": [], "owner": {"reputation": 9739, "user_id": 3691783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18bfba7d4beb1c210fa670cf57c66f4b?s=128&d=identicon&r=PG", "display_name": "Matt Messersmith", "link": "https://stackoverflow.com/users/3691783/matt-messersmith"}, "is_accepted": true, "score": 1, "last_activity_date": 1550095022, "creation_date": 1550095022, "answer_id": 54680075, "question_id": 54679861, "link": "https://stackoverflow.com/questions/54679861/loop-through-dict-items-with-keys-matching-a-string/54680075#54680075", "title": "Loop through dict items with keys matching a string", "body": "<p>What you have is perfectly Pythonic. It's clear, explicit, easy to read, and a pretty common/reasonable pattern that you see around software. No one will be fooled/confused by it.</p>\n\n<p>To answer your question, if you really <em>want</em> a one-liner <code>for</code>/<code>if</code>, you could do:</p>\n\n<pre><code>for k,v in {key: value for key, value in my_dict.items() if key.startswith('a')}.items():\n    print(k,v)\n</code></pre>\n\n<p>Unfortunately, this is a bit more confusing that what you already have (there's 6ish variables, including an anonymous one, instead of just 3). Another alternative is to just take this same idea (filter then iterate vs. iterate then filter), and make it two lines (for readability/semantics):</p>\n\n<pre><code>my_dict_startswith_a = {key: value for key, value in my_dict.items() if key.startswith('a')}\nfor k, v in my_dict_startswith_a.items():\n    print(k,v)\n</code></pre>\n\n<p>But just stick with what you have. It looks fine.</p>\n"}], "owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 54680075, "answer_count": 3, "score": -1, "last_activity_date": 1550095290, "creation_date": 1550093975, "last_edit_date": 1550095290, "question_id": 54679861, "link": "https://stackoverflow.com/questions/54679861/loop-through-dict-items-with-keys-matching-a-string", "title": "Loop through dict items with keys matching a string", "body": "<p>Is there a way to make this <code>for</code> and <code>if</code> in single line? I need to iterate through all the items with key starting with 'a'</p>\n\n<pre><code>&gt;&gt;&gt; mydict\n{'aName': 'Nancy', 'aAge': '25', 'bName': 'Don', 'bNumber': '21'}\n&gt;&gt;&gt; for k,v in mydict.items():\n...    if k.startswith('a'):\n...       print(k,v)\n...       # do some processing here\naName Nancy\naAge 25\n</code></pre>\n\n<p>I think there should be a pythonic way to do this? something like <code>for k,v in mydict.items() with k.startswith('a'):</code></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1550094310, "post_id": 54679849, "comment_id": 96148739, "body": "Welcome to StackOverflow. However, your question is very unclear. What does all that code have to do with &quot;just output[ing] the first three lines and disregard[ing] everything else&quot;? Do you want just the first three &quot;lines&quot; that would be <i>printed</i> if the string were printed? What is that &quot;output&quot; you show (it does not include the print statement in your code)? Please clarify by reading and following <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 1, "user_id": 11058941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0692b28ee0a2f8f82565a5f3d8f021b?s=128&d=identicon&r=PG&f=1", "display_name": "Zerosoft", "link": "https://stackoverflow.com/users/11058941/zerosoft"}, "reply_to_user": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1550094469, "post_id": 54679849, "comment_id": 96148808, "body": "I only want to get the following information and keep it:  interface GigabitEthernet0/1  description   bandwidth   everything else that i get from the output, i could care less about, since this is just making changes to the above."}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1550095472, "post_id": 54679849, "comment_id": 96149216, "body": "You did not answer the majority of my questions. I suggest that you edit your question to handle the issues I raised, which will clarify your question and make it more likely for you to get good answers."}, {"owner": {"reputation": 1, "user_id": 11058941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0692b28ee0a2f8f82565a5f3d8f021b?s=128&d=identicon&r=PG&f=1", "display_name": "Zerosoft", "link": "https://stackoverflow.com/users/11058941/zerosoft"}, "reply_to_user": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1550096335, "post_id": 54679849, "comment_id": 96149531, "body": "So im confused since im new to the flow of python, I dont understand why the information im pulling is being used as a list, because doing a fresh python script doesn&#39;t behave the same way as getting information from a device. So im not sure exactly how to make it easier for other to read."}, {"owner": {"reputation": 3761, "user_id": 1336758, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oIp1q.png?s=128&g=1", "display_name": "NYCeyes", "link": "https://stackoverflow.com/users/1336758/nyceyes"}, "reply_to_user": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1550096593, "post_id": 54679849, "comment_id": 96149637, "body": "@RoryDaulton Is correct. Try to hone in on the piece you need help with. That said, assuming the output you&#39;ve shown always has that same pattern, you might -- in a pinch (i.e. temporarily) -- try replacing your final <code>print</code> statement with something like this: <code>print(currentconfig.partition(&#39;\\n ip address&#39;)[0])</code>. Welcome to StackOverflow."}, {"owner": {"reputation": 1, "user_id": 11058941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0692b28ee0a2f8f82565a5f3d8f021b?s=128&d=identicon&r=PG&f=1", "display_name": "Zerosoft", "link": "https://stackoverflow.com/users/11058941/zerosoft"}, "edited": false, "score": 0, "creation_date": 1550102303, "post_id": 54679849, "comment_id": 96151395, "body": "Got it to work thanks to all your help guys"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11058941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0692b28ee0a2f8f82565a5f3d8f021b?s=128&d=identicon&r=PG&f=1", "display_name": "Zerosoft", "link": "https://stackoverflow.com/users/11058941/zerosoft"}, "edited": false, "score": 0, "creation_date": 1550095481, "post_id": 54679986, "comment_id": 96149217, "body": "Thanks I used your input but changed [:3] to [:4] because Cisco adds an empty char, but its only outputting in my example  inte  So for your example would be This"}], "tags": [], "owner": {"reputation": 825, "user_id": 9072201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TkapE.jpg?s=128&g=1", "display_name": "Robert King", "link": "https://stackoverflow.com/users/9072201/robert-king"}, "is_accepted": false, "score": 0, "last_activity_date": 1550094598, "creation_date": 1550094598, "answer_id": 54679986, "question_id": 54679849, "link": "https://stackoverflow.com/questions/54679849/how-to-search-through-a-string-and-output-the-first-3-lines-of-a-string/54679986#54679986", "title": "How to search through a string and output the first 3 lines of a string", "body": "<p>The following code will return the first three lines of a multi-line string:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>test_str = '''this is line 1\nthis is line 2\nthis is line 3\nsome other lines\nmore lines\nblah blah blah\n\n\nlast line\n'''\n\nsplit_str = test_str.split('\\n')\nfirst_3_lines = split_str[:3]\n</code></pre>\n\n<p>If this doesn't help, can I suggest you make a <em>minimal</em> example of code showing the problem you are having as the above snippet is quite long and has lots of parts that are irrelevant to your stated problem. </p>\n"}], "owner": {"reputation": 1, "user_id": 11058941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0692b28ee0a2f8f82565a5f3d8f021b?s=128&d=identicon&r=PG&f=1", "display_name": "Zerosoft", "link": "https://stackoverflow.com/users/11058941/zerosoft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1550100995, "creation_date": 1550093925, "last_edit_date": 1550100995, "question_id": 54679849, "link": "https://stackoverflow.com/questions/54679849/how-to-search-through-a-string-and-output-the-first-3-lines-of-a-string", "title": "How to search through a string and output the first 3 lines of a string", "body": "<p>I am currently trying to read show commands from a network device, and get just the first 3 lines of the show commands and store them just in case something happens during this script, and treat them as a rollback object.</p>\n\n<p>I can't for the life of me figure out how to search through inputs of a large string and just output the first three lines and disregard everything else.</p>\n\n<p>*Edited*2* hopefully easier to read.</p>\n\n<pre><code>gig1 = '''interface GigabitEthernet0/1\ndescription\nbandwidth\nip address x.x.x.x x.x.x.x\nip access-group xxx in\nip nbar protocol-discovery\nip flow monitor input\nip flow monitor output\nip flow egress\nduplex auto\nspeed auto\nservice-policy output QOS-PARENT-OUT\n'''\n\nclass Comparison():\n\n    def CurrentConfig(interface):\n\n        cmd = '{} '.format(interface)\n\n        print(cmd)\n        split_str = cmd.split('\\n')\n        first_3_lines = split_str[:3]\n        return (first_3_lines)\n\nif __name__ == '__main__':\n\n    config = { 'interfaces': gig1 }\n\n    interface = config['interfaces']\n    output_list = []output = Comparison.CurrentConfig(interface)\n    output_list.append(output)\n\n    currentconfig = output\n\n    print(currentconfig)\n</code></pre>\n\n<p>Output: \n    ['interface GigabitEthernet0/1', 'description', 'bandwidth']</p>\n\n<p>However I want the output to not be in a list format, is this where you add the .format(currentconfig) command?</p>\n"}, {"tags": ["python", "neural-network", "pytorch", "rounding-error"], "answers": [{"tags": [], "owner": {"reputation": 356, "user_id": 10633913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a700667fbe22219737946d88842e126?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Holland", "link": "https://stackoverflow.com/users/10633913/chris-holland"}, "is_accepted": false, "score": 0, "last_activity_date": 1550331056, "last_edit_date": 1550331056, "creation_date": 1550330562, "answer_id": 54724579, "question_id": 54679829, "link": "https://stackoverflow.com/questions/54679829/pytorch-xor-implementation-rounding-issue/54724579#54724579", "title": "Pytorch XOR implementation rounding issue?", "body": "<p>Probably just a formatting difference. Note that:</p>\n\n<pre><code>small_number = torch.tensor(1e-10)\nprint(small_number)\nprint(1 + small_number)\n</code></pre>\n\n<pre><code>tensor(1.0000e-10)\ntensor(1.)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2874, "user_id": 1207193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7185bb03c994eb9bb9cc15e4b1443c19?s=128&d=identicon&r=PG", "display_name": "eusoubrasileiro", "link": "https://stackoverflow.com/users/1207193/eusoubrasileiro"}, "is_accepted": false, "score": 0, "last_activity_date": 1592570748, "last_edit_date": 1592570748, "creation_date": 1592516649, "answer_id": 62459883, "question_id": 54679829, "link": "https://stackoverflow.com/questions/54679829/pytorch-xor-implementation-rounding-issue/62459883#62459883", "title": "Pytorch XOR implementation rounding issue?", "body": "<h3>Regarding your second question.</h3>\n\n<p>If you train more you might have results closer to rounded numbers. But keep in mind you are adjusting a function (multiparametric nn) by minimizing the loss so is unlikely you will get exactly the round number.</p>\n\n<p>I've done the same exercise you did take a look on this <a href=\"https://nbviewer.jupyter.org/github/eusoubrasileiro/notebooks/blob/master/general/Pytorch%20Learning%20XOR%20Example.ipynb\" rel=\"nofollow noreferrer\">notebook</a></p>\n"}], "owner": {"reputation": 11, "user_id": 11058944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7a485b35c4cb72edde6ffbf15befe1?s=128&d=identicon&r=PG&f=1", "display_name": "gaupsp", "link": "https://stackoverflow.com/users/11058944/gaupsp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1592570748, "creation_date": 1550093799, "last_edit_date": 1592570709, "question_id": 54679829, "link": "https://stackoverflow.com/questions/54679829/pytorch-xor-implementation-rounding-issue", "title": "Pytorch XOR implementation rounding issue?", "body": "<p>I've implemented the XOR problem with a super simple NN in Pytorch as a learning exercise. </p>\n\n<p>The network is trained, and now that I'm giving it new inputs, looking for output, I get the following:</p>\n\n<p><code>print(\"(0, 0) = {}\".format(model(Variable(torch.Tensor([0, 0]).unsqueeze(0)))))</code></p>\n\n<p><code>print(\"(1, 0) = {}\".format(model(Variable(torch.Tensor([1, 0]).unsqueeze(0)))))</code></p>\n\n<p><code>7.7716e-07, 1</code></p>\n\n<p>Why does it output:</p>\n\n<ul>\n<li>1 (<em>exactly</em> ) for the input <code>[1, 0]</code></li>\n<li>7.7716e-07 (not <em>exactly</em> 0) for <code>[0, 0]</code></li>\n</ul>\n\n<p>I understand it's close to it, but why isn't it, unlike the other? </p>\n\n<p>Does it simply require more training?</p>\n"}, {"tags": ["python", "numpy", "signal-processing"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1550096980, "post_id": 54679816, "comment_id": 96149776, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/10357992/how-to-generate-audio-from-a-numpy-array\">How to generate audio from a numpy array?</a>"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1550097017, "post_id": 54679816, "comment_id": 96149787, "body": "Combine that dupe target (&quot;create a sound file&quot;) with <a href=\"https://stackoverflow.com/questions/260738/play-audio-with-python\">this</a> (&quot;play a sound file&quot;). The latter has a numpy array-based answer down somewhere, perhaps that&#39;s better as a dupe target."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 11059238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3961be53381ac5dd9f703166fabbe01?s=128&d=identicon&r=PG&f=1", "display_name": "JoJo", "link": "https://stackoverflow.com/users/11059238/jojo"}, "is_accepted": false, "score": 0, "last_activity_date": 1550099711, "last_edit_date": 1592644375, "creation_date": 1550099711, "answer_id": 54680895, "question_id": 54679816, "link": "https://stackoverflow.com/questions/54679816/how-to-sound-a-signal-in-python/54680895#54680895", "title": "How to sound a signal in Python?", "body": "<p>You can use the module soundfile:</p>\n<blockquote>\n<p>import soundfile as sf</p>\n<p>sf.write(filename.wav, data, samplerate)</p>\n</blockquote>\n<p>For further information read the <a href=\"https://pysoundfile.readthedocs.io/en/0.9.0/\" rel=\"nofollow noreferrer\" title=\"documentation\">documentation</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1613, "user_id": 5405298, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3UepM.png?s=128&g=1", "display_name": "L&#233;onard", "link": "https://stackoverflow.com/users/5405298/l%c3%a9onard"}, "edited": false, "score": 1, "creation_date": 1570278187, "post_id": 54718570, "comment_id": 102867310, "body": "We cannot run your example because the variable <code>data</code> is not defined. Please consider testing before posting."}], "tags": [], "owner": {"reputation": 4723, "user_id": 2145138, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/96d2ac643babeaa845716a6448b5b2ed?s=128&d=identicon&r=PG", "display_name": "MTT", "link": "https://stackoverflow.com/users/2145138/mtt"}, "is_accepted": false, "score": 1, "last_activity_date": 1572545174, "last_edit_date": 1572545174, "creation_date": 1550275435, "answer_id": 54718570, "question_id": 54679816, "link": "https://stackoverflow.com/questions/54679816/how-to-sound-a-signal-in-python/54718570#54718570", "title": "How to sound a signal in Python?", "body": "<p>Yep! You can use scipy.io.wavfile library</p>\n\n<pre><code>import numpy as np\nfrom scipy.io.wavfile import write\nnoise = np.random.uniform(-1,1,100000)\nwrite('noise.wav', len(noise), noise)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11058767, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--dwBndrV0RU/AAAAAAAAAAI/AAAAAAAADNw/Aw32JyK758U/photo.jpg?sz=128", "display_name": "Juan Pablo Restrepo Uribe", "link": "https://stackoverflow.com/users/11058767/juan-pablo-restrepo-uribe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1013, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1572545174, "creation_date": 1550093750, "last_edit_date": 1550094389, "question_id": 54679816, "link": "https://stackoverflow.com/questions/54679816/how-to-sound-a-signal-in-python", "title": "How to sound a signal in Python?", "body": "<p>I have a signal in Python, and I want to hear it. This is possible?.\nThe data is in the format <code>numpy.ndarray</code>.</p>\n\n<p>In Matlab one can use the command <code>sound(data,f)</code>.</p>\n"}, {"tags": ["python", "user-interface", "tkinter", "sqlite", "dropbox"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10751497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2a34dc8d8c8f1ae01abfca2ba7debc?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Wilson", "link": "https://stackoverflow.com/users/10751497/adam-wilson"}, "edited": false, "score": 0, "creation_date": 1550582053, "post_id": 54681883, "comment_id": 96314349, "body": "thanks so much, it all seems to be working smoothly now amazing"}], "tags": [], "owner": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "is_accepted": true, "score": 0, "last_activity_date": 1550107867, "last_edit_date": 1550107867, "creation_date": 1550107314, "answer_id": 54681883, "question_id": 54679747, "link": "https://stackoverflow.com/questions/54679747/making-a-tkinter-function-not-show-in-next-window/54681883#54681883", "title": "Making a tkinter function not show in next window", "body": "<p>You can modify <code>dropbox()</code> to have one more argument: the parent, and return the created <code>OptionMenu</code> (use the <code>parent</code> argument as its parent instead of <code>root</code>) like below:</p>\n\n<pre><code>def dropbox(self, parent):\n    OPTIONS = [\n        \"Please Select\",\n        \"HQ\",\n        \"Pilot/Crew\",\n        \"Customer\"\n    ]\n    self.var.set(OPTIONS[0])\n    return OptionMenu(parent, self.var, *OPTIONS)\n</code></pre>\n\n<p>I have removed the execution of <code>.pack()</code> so that you can use whatever layout manager you want later.</p>\n\n<p>Then modify <code>widgets()</code> as below:</p>\n\n<pre><code>def widgets(self):\n    self.head = Label(self.master, text='LOGIN', font=('', 35), pady=10)\n    self.head.pack()\n    self.logf = Frame(self.master, padx=10, pady=10)\n    self.dropbox(self.logf).grid(row=1, column=0, columnspan=2, pady=10)\n    Label(self.logf, text='Username: ', font=('', 20), pady=5, padx=5).grid(row=2, column=0)\n    Entry(self.logf, textvariable=self.username, bd=5, font=('', 15)).grid(row=2, column=1)\n    Label(self.logf, text='Password: ', font=('', 20), pady=5, padx=5).grid(sticky=W)\n    Entry(self.logf, textvariable=self.password, bd=5, font=('', 15), show='*').grid(row=3, column=1)\n    Button(self.logf, text='Login', bd=3, font=('', 15), padx=5, pady=5, command=self.login).grid()\n    Button(self.logf, text='Create Account', bd=3, font=('', 15), padx=5, pady=5, command=self.cr).grid(row=4, column=1)\n    self.logf.pack()\n\n    self.crf = Frame(self.master, padx=10, pady=10)\n    Label(self.crf, text='Select:', font=('', 20), pady=5, padx=5).grid(row=1, column=0)\n    self.dropbox(self.crf).grid(row=1, column=1, sticky=W)\n    Label(self.crf, text='Username: ', font=('', 20), pady=5, padx=5).grid(sticky=W)\n    Entry(self.crf, textvariable=self.n_username, bd=5, font=('', 15)).grid(row=2, column=1)\n    Label(self.crf, text='Password: ', font=('', 20), pady=5, padx=5).grid(sticky=W)\n    Entry(self.crf, textvariable=self.n_password, bd=5, font=('', 15), show='*').grid(row=3, column=1)\n    Button(self.crf, text='Create Account', bd=3, font=('', 15), padx=5, pady=5, command=self.new_user).grid()\n    Button(self.crf, text='Go to Login', bd=3, font=('', 15), padx=5, pady=5, command=self.log).grid(row=4, column=1)\n</code></pre>\n\n<p>Also I think the indentation of the below block in your code is wrong:</p>\n\n<pre><code>with sqlite3.connect('quit.db') as db:\n    c = db.cursor()\n# wrong indentation?\nc.execute('CREATE TABLE IF NOT EXISTS user (var TEXT NOT NULL, username TEXT NOT NULL ,password TEXT NOT NULL);')\ndb.commit()\ndb.close()\n</code></pre>\n\n<p>It should be:</p>\n\n<pre><code>with sqlite3.connect('quit.db') as db:\n    c = db.cursor()\n    c.execute('CREATE TABLE IF NOT EXISTS user (var TEXT NOT NULL, username TEXT NOT NULL ,password TEXT NOT NULL);')\n    db.commit()\n    # no need to call db.close() as the db will be closed when exiting the with block\n</code></pre>\n\n<p>Similar issue applies to other <code>with sqlite3.connect(...) as db</code> statement later in your code.</p>\n"}], "owner": {"reputation": 21, "user_id": 10751497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2a34dc8d8c8f1ae01abfca2ba7debc?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Wilson", "link": "https://stackoverflow.com/users/10751497/adam-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 54681883, "answer_count": 1, "score": 0, "last_activity_date": 1550157422, "creation_date": 1550093405, "last_edit_date": 1550157422, "question_id": 54679747, "link": "https://stackoverflow.com/questions/54679747/making-a-tkinter-function-not-show-in-next-window", "title": "Making a tkinter function not show in next window", "body": "<p>I have a tkinter window with login function that allows one of three people login for an airport login system, \"HQ\", \"Pilot/Crew\" or \"customer\". </p>\n\n<p>So far I can make the user and I can login with the sql being used. </p>\n\n<p>The problem is I am not sure how to turn the Dropbox into the widget and because of this it doesn't disappear in the next window.</p>\n\n<pre><code>    # imports\nfrom tkinter import *\nimport tkinter as tk\nfrom tkinter import messagebox as ms\nimport sqlite3\n\n# make database and users (if not exists already) table at programme start up\nwith sqlite3.connect('quit.db') as db:\n    c = db.cursor()\n\nc.execute('CREATE TABLE IF NOT EXISTS user (var TEXT NOT NULL, username TEXT NOT NULL ,password TEXT NOT NULL);')\ndb.commit()\ndb.close()\n\n# main Class\n\n\nclass main:\n    def __init__(self, master):\n        #  Window\n        self.master = master\n        # Some Usefull variables\n        self.var = tk.StringVar()\n        self.username = StringVar()\n        self.password = StringVar()\n        self.n_username = StringVar()\n        self.n_password = StringVar()\n        # Create Widgets\n        self.widgets()\n\n    # def pack():\n    #     if self.var.get() = \"HQ\"\n\n    # Login Function\n    def login(self):\n        # Establish Connection\n        with sqlite3.connect('quit.db') as db:\n            c = db.cursor()\n\n        # Find user If there is any take proper action\n        find_user = ('SELECT * FROM user WHERE var = ? and username = ? and password = ?')\n        c.execute(find_user, [(self.var.get()), (self.username.get()), (self.password.get())])\n        result = c.fetchall()\n        if result:\n            self.logf.pack_forget()\n\n            self.head['text'] = self.username.get() + '\\n Loged In'\n            self.head['pady'] = 150\n\n        else:\n            ms.showerror('Oops!', 'something is not right.')\n\n\n    def new_user(self):\n        # Establish Connection\n        with sqlite3.connect('quit.db') as db:\n            c = db.cursor()\n\n        # Find Existing username if any take proper action\n        find_user = ('SELECT * FROM user WHERE username = ?')\n        c.execute(find_user, [(self.username.get())])\n        if c.fetchall():\n            ms.showerror('Error!', 'Username Taken Try a Diffrent One.')\n        else:\n            ms.showinfo('Success!', 'Account Created!')\n            self.log()\n        # Create New Account\n        insert = 'INSERT INTO user(var,username,password) VALUES(?,?,?)'\n        c.execute(insert, [(self.var.get()), (self.n_username.get()), (self.n_password.get())])\n        db.commit()\n\n    def dropbox(self):\n        OPTIONS = [\n            \"Please Select\",\n            \"HQ\",\n            \"Pilot/Crew\",\n            \"Customer\"\n        ]\n        self.var.set(OPTIONS[0])\n        dropdownmenu = OptionMenu(root, self.var, OPTIONS[0], OPTIONS[1], OPTIONS[2], OPTIONS[3])\n        dropdownmenu.pack()\n\n\n        # Frame Packing Methords\n    def log(self):\n\n        self.username.set('')\n        self.password.set('')\n        self.crf.pack_forget()\n        self.head['text'] = 'LOGIN'\n        self.logf.pack()\n\n    def cr(self):\n        self.n_username.set('')\n        self.n_password.set('')\n        self.logf.pack_forget()\n        self.head['text'] = 'Create Account'\n        self.crf.pack()\n\n    # Draw Widgets\n    def widgets(self):\n        self.head = Label(self.master, text='LOGIN', font=('', 35), pady=10)\n        self.head.pack()\n        self.logf = Frame(self.master, padx=10, pady=10)\n        self.dropbox()\n        Label(self.logf, text='Username: ', font=('', 20), pady=5, padx=5).grid(row=2, column=0)\n        Entry(self.logf, textvariable=self.username, bd=5, font=('', 15)).grid(row=2, column=1)\n        Label(self.logf, text='Password: ', font=('', 20), pady=5, padx=5).grid(sticky=W)\n        Entry(self.logf, textvariable=self.password, bd=5, font=('', 15), show='*').grid(row=3, column=1)\n        Button(self.logf, text='Login', bd=3, font=('', 15), padx=5, pady=5, command=self.login).grid()\n        Button(self.logf, text='Create Account', bd=3, font=('', 15), padx=5, pady=5, command=self.cr).grid(row=4, column=1)\n        self.logf.pack()\n\n        self.crf = Frame(self.master, padx=10, pady=10)\n        Label(self.crf, text='Select:', font=('', 20), pady=5, padx=5).grid(row=1, column=0)\n        Label(self.crf, text='Username: ', font=('', 20), pady=5, padx=5).grid(sticky=W)\n        Entry(self.crf, textvariable=self.n_username, bd=5, font=('', 15)).grid(row=2, column=1)\n        Label(self.crf, text='Password: ', font=('', 20), pady=5, padx=5).grid(sticky=W)\n        Entry(self.crf, textvariable=self.n_password, bd=5, font=('', 15), show='*').grid(row=3, column=1)\n        Button(self.crf, text='Create Account', bd=3, font=('', 15), padx=5, pady=5, command=self.new_user).grid()\n        Button(self.crf, text='Go to Login', bd=3, font=('', 15), padx=5, pady=5, command=self.log).grid(row=4, column=1)\n\n\n# create window and application object\nroot = tk.Tk()\n# root.title(\"Login Form\")\nmain(root)\nroot.mainloop()\n</code></pre>\n\n<p>That is my code at the moment, it works. </p>\n\n<p>Also anyone know how to change the dropbox from .pack() to .grid() as I would like to locate it i gave up on that but it still bugs me</p>\n"}, {"tags": ["python", "r"], "comments": [{"owner": {"reputation": 26944, "user_id": 6851825, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H8RgwclGboU/AAAAAAAAAAI/AAAAAAAAAE4/ozMptPuddJ0/photo.jpg?sz=128", "display_name": "Jon Spring", "link": "https://stackoverflow.com/users/6851825/jon-spring"}, "edited": false, "score": 2, "creation_date": 1550097814, "post_id": 54679729, "comment_id": 96150042, "body": "What&#39;s the goal of the visualization? To show overall structure? To highlight extremes? To make an aesthetically pleasing graphic? This is a large amount of data to show directly (let alone the challenges of showing in 3D), so it may be more fruitful to start with the point you want to communicate and work back from there."}, {"owner": {"reputation": 827, "user_id": 4060111, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/db01430448878e0a6fef247076d10c57?s=128&d=identicon&r=PG&f=1", "display_name": "Helene", "link": "https://stackoverflow.com/users/4060111/helene"}, "reply_to_user": {"reputation": 170794, "user_id": 190277, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcf9672c1893e4b7c5d86ca1bc2bf88f?s=128&d=identicon&r=PG", "display_name": "Ben Bolker", "link": "https://stackoverflow.com/users/190277/ben-bolker"}, "edited": false, "score": 0, "creation_date": 1550098273, "post_id": 54679729, "comment_id": 96150203, "body": "@BenBolker Thank you very much for your comment. Do you mean a full table? I can send that to you via email or message if you&#39;d like."}, {"owner": {"reputation": 827, "user_id": 4060111, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/db01430448878e0a6fef247076d10c57?s=128&d=identicon&r=PG&f=1", "display_name": "Helene", "link": "https://stackoverflow.com/users/4060111/helene"}, "reply_to_user": {"reputation": 26944, "user_id": 6851825, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H8RgwclGboU/AAAAAAAAAAI/AAAAAAAAAE4/ozMptPuddJ0/photo.jpg?sz=128", "display_name": "Jon Spring", "link": "https://stackoverflow.com/users/6851825/jon-spring"}, "edited": false, "score": 0, "creation_date": 1550099016, "post_id": 54679729, "comment_id": 96150485, "body": "@JonSpring Thank you very much for your comments. The primary point of this visualization is to show the space regularly explored by a simulated protein in a density map - like plot. I could not locate a proper name for this, but would love to learn your opinion."}, {"owner": {"reputation": 26944, "user_id": 6851825, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H8RgwclGboU/AAAAAAAAAAI/AAAAAAAAAE4/ozMptPuddJ0/photo.jpg?sz=128", "display_name": "Jon Spring", "link": "https://stackoverflow.com/users/6851825/jon-spring"}, "edited": false, "score": 1, "creation_date": 1550104727, "post_id": 54679729, "comment_id": 96152071, "body": "Maybe something like this? <a href=\"https://plot.ly/r/3d-surface-plots/#multiple-surfaces\" rel=\"nofollow noreferrer\">plot.ly/r/3d-surface-plots/#multiple-surfaces</a>.  Plotly is a javascript library with interface packages in both R and Python."}], "answers": [{"comments": [{"owner": {"reputation": 827, "user_id": 4060111, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/db01430448878e0a6fef247076d10c57?s=128&d=identicon&r=PG&f=1", "display_name": "Helene", "link": "https://stackoverflow.com/users/4060111/helene"}, "edited": false, "score": 1, "creation_date": 1550282238, "post_id": 54686827, "comment_id": 96223881, "body": "Thanks so much for the reply. Beautiful plotting. Let me get back to after I try these two solutions out."}, {"owner": {"reputation": 11683, "user_id": 9841389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KMZz.png?s=128&g=1", "display_name": "ismirsehregal", "link": "https://stackoverflow.com/users/9841389/ismirsehregal"}, "reply_to_user": {"reputation": 827, "user_id": 4060111, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/db01430448878e0a6fef247076d10c57?s=128&d=identicon&r=PG&f=1", "display_name": "Helene", "link": "https://stackoverflow.com/users/4060111/helene"}, "edited": false, "score": 0, "creation_date": 1571908275, "post_id": 54686827, "comment_id": 103398162, "body": "@Helene Did you try them by now? Just remembered due to your recent question."}], "tags": [], "owner": {"reputation": 11683, "user_id": 9841389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KMZz.png?s=128&g=1", "display_name": "ismirsehregal", "link": "https://stackoverflow.com/users/9841389/ismirsehregal"}, "is_accepted": true, "score": 2, "last_activity_date": 1550161200, "last_edit_date": 1550161200, "creation_date": 1550135773, "answer_id": 54686827, "question_id": 54679729, "link": "https://stackoverflow.com/questions/54679729/plot-density-for-20-x-20-x-20-cubes/54686827#54686827", "title": "Plot density for ~20 x 20 x 20 cubes", "body": "<p>For 10k cubes I guess plotly's mesh3d or 3d-surface plots (as mentioned by @Jon Spring) will be too computationally intensive.</p>\n\n<p>I'm not sure if this is an option for you but I'd go with a scatter3d plot like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ezikt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ezikt.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>library(plotly)\n\nn &lt;- 100\n\ncubes &lt;- data.frame(\n  x = rnorm(n, 0, 200),\n  y = rnorm(n, 0, 200),\n  z = rnorm(n, 0, 200),\n  density = runif(n, 0, 1)\n)\n\np &lt;- plot_ly(cubes, x = ~x, y = ~y, z = ~z, color = ~density, type = \"scatter3d\", mode = \"markers\", colors = colorRamp(c(\"blue\", \"lightblue\", \"chartreuse3\", \"yellow\", \"red\")), marker = list(symbol = 'square', size = 4))\np\n\n# optional: save plot as a HTML file\nlibrary(htmlwidgets)\nsaveWidget(p, file=\"myScatter3dPlot.html\", selfcontained = TRUE)\n</code></pre>\n\n<p>Increasing <code>n</code> to 10k runs smooth. The downside here is, that the symbols displayed are flat squares and the given datapoints (x, y, z) are their center (you could calculate an offset from the bottom left corner). Also the square size and colors probably need to be adapted to your usecase.</p>\n\n<p>Please see some further information <a href=\"https://plot.ly/r/3d-scatter-plots/\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://plot.ly/r/reference/#scatter3d\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 827, "user_id": 4060111, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/db01430448878e0a6fef247076d10c57?s=128&d=identicon&r=PG&f=1", "display_name": "Helene", "link": "https://stackoverflow.com/users/4060111/helene"}, "edited": false, "score": 0, "creation_date": 1550282202, "post_id": 54693919, "comment_id": 96223875, "body": "Thank you so much! I am going to give it a try and get back to you. Nice plot!"}], "tags": [], "owner": {"reputation": 170794, "user_id": 190277, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcf9672c1893e4b7c5d86ca1bc2bf88f?s=128&d=identicon&r=PG", "display_name": "Ben Bolker", "link": "https://stackoverflow.com/users/190277/ben-bolker"}, "is_accepted": false, "score": 1, "last_activity_date": 1550158334, "creation_date": 1550158334, "answer_id": 54693919, "question_id": 54679729, "link": "https://stackoverflow.com/questions/54679729/plot-density-for-20-x-20-x-20-cubes/54693919#54693919", "title": "Plot density for ~20 x 20 x 20 cubes", "body": "<p>The functions in the <code>misc3d</code> package (built on the <code>rgl</code> interface to OpenGL) seem nice for this.</p>\n\n<h2>make up data</h2>\n\n<p>In the absence of data to play with, I used a multivariate normal density</p>\n\n<pre><code>dd &lt;- expand.grid (x=1:21,y=1:21,z=1:21)\ndd[,1:3] &lt;- scale(dd[,1:3])\nlibrary(mvtnorm)\nS &lt;- matrix(c(0.5,0.1,-0.1,0.1,2,0.7,-0.1,0.7,1),3,3)\ndd$dens &lt;- dmvnorm(dd[,1:3],mean=c(0,0,0),sigma=S)\n</code></pre>\n\n<h2>reshape data</h2>\n\n<p><code>misc3d::image3d()</code> needs a 3D array to work with; using <code>reshape2::acast()</code> to do the job</p>\n\n<pre><code>library(reshape2)\nv &lt;- acast(dd,x~y~z, value.var=\"dens\")\n</code></pre>\n\n<h2>make the picture</h2>\n\n<pre><code>library(viridisLite)  ## optional: prettier colour palette\nlibrary(misc3d)\n## function to extract dim names for x, y, z axes\nd &lt;- function(i) as.numeric(dimnames(v)[[i]])\nimage3d(v,x=d(1),y=d(2),z=d(3),\n        sprites=TRUE,  ## (default)\n        col=viridis(256))\ncontour3d(v,x=d(1),y=d(2),z=d(3),level=c(0.01,0.03),\n          alpha=0.2,add=TRUE)\nbox3d()\nrgl.snapshot(\"dens3d.png\")\n</code></pre>\n\n<p>I was having some trouble with taking the snapshot (maybe something about my system), so settled for a screenshot.  Rendering with 10,000 points is a <em>little</em> slow on an old MacBook Pro, but not too bad. You can experiment with colours, <code>sprites=TRUE</code> vs <code>FALSE</code>, contours ...</p>\n\n<p><a href=\"https://i.stack.imgur.com/FXG83.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FXG83.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 827, "user_id": 4060111, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/db01430448878e0a6fef247076d10c57?s=128&d=identicon&r=PG&f=1", "display_name": "Helene", "link": "https://stackoverflow.com/users/4060111/helene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 54686827, "answer_count": 2, "score": 0, "last_activity_date": 1550161565, "creation_date": 1550093344, "last_edit_date": 1550161565, "question_id": 54679729, "link": "https://stackoverflow.com/questions/54679729/plot-density-for-20-x-20-x-20-cubes", "title": "Plot density for ~20 x 20 x 20 cubes", "body": "<p>I am looking for a good way to plot a density plot (in Python or R) that shows the space regularly explored by a simulated protein.  The data set consists of densities within many 5x5x5 cubes, like this:</p>\n\n<pre><code>x      y    z    density\n-4    -3    51    0 \n-4    -3    56    0.523343\n     ...\n121    92    81    1 \n121    92    86    0.01 \n</code></pre>\n\n<p>(x, y, z) represents coordinates in 3D, and it is the point at the bottom left corner of a cube. Each cube is 5x5x5 in size. There is no overlap between any of two cubes. There are about 10k cubes total. </p>\n\n<p>The <code>density</code> column is the color I would like to assign to each cube. The numbers are in a range of 0 to 1.</p>\n\n<p>I'm also open to other plotting methods. Any advice would be appreciated. </p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 3, "creation_date": 1550093283, "post_id": 54679701, "comment_id": 96148246, "body": "It is work for me"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 3, "creation_date": 1550093360, "post_id": 54679701, "comment_id": 96148287, "body": "Same. Cannot reproduce"}, {"owner": {"reputation": 573, "user_id": 7748514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Dy0VE.png?s=128&g=1", "display_name": "Liquidity", "link": "https://stackoverflow.com/users/7748514/liquidity"}, "edited": false, "score": 0, "creation_date": 1550093607, "post_id": 54679701, "comment_id": 96148418, "body": "This is bizarre. I updated my question to include my exact setup - running Jupyter Lab, that exact segment of code does not drop the <code>]</code> for me."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550093627, "post_id": 54679701, "comment_id": 96148425, "body": "You&#39;ve changed the question now. Now you&#39;re suggesting that <i>none</i> of the <code>replace</code> operations are working. Which situation is it? Also, if you&#39;re not already doing, make sure you copy/paste the code directly from Jupyter and change none of the names, just indentation if you need to. My bet is on a typo on a name."}, {"owner": {"reputation": 573, "user_id": 7748514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Dy0VE.png?s=128&g=1", "display_name": "Liquidity", "link": "https://stackoverflow.com/users/7748514/liquidity"}, "edited": false, "score": 0, "creation_date": 1550093810, "post_id": 54679701, "comment_id": 96148519, "body": "Edited to clarify. I can drop the <code>[</code>, but not the <code>]</code> using the exact same method. I am copying/pasting directly from my notebook cell."}, {"owner": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 2, "creation_date": 1550094405, "post_id": 54679701, "comment_id": 96148778, "body": "<code>dftest = dftest.replace({&#39;[\\]\\[]&#39;:&#39;&#39;}, regex = True)</code> works for me. Cannot reproduce. Can you clarify: a) python version,  b) <code>pd.__version__</code> ?"}, {"owner": {"reputation": 573, "user_id": 7748514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Dy0VE.png?s=128&g=1", "display_name": "Liquidity", "link": "https://stackoverflow.com/users/7748514/liquidity"}, "edited": false, "score": 0, "creation_date": 1550094782, "post_id": 54679701, "comment_id": 96148918, "body": "That modification works for me! If it&#39;s still relevant, I&#39;m running python 3.7 and pandas 0.24.1"}], "answers": [{"tags": [], "owner": {"reputation": 4758, "user_id": 7053679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfd28fbbf71118a3d97419e61044794?s=128&d=identicon&r=PG&f=1", "display_name": "Nihal", "link": "https://stackoverflow.com/users/7053679/nihal"}, "is_accepted": false, "score": 0, "last_activity_date": 1550146877, "last_edit_date": 1550146877, "creation_date": 1550146507, "answer_id": 54690181, "question_id": 54679701, "link": "https://stackoverflow.com/questions/54679701/df-replace-doesnt-replace/54690181#54690181", "title": "df.replace doesn&#39;t replace ]", "body": "<p>there is another solution, use <code>literal_eval</code> from <code>ast</code> library</p>\n\n<p><strong>code:</strong></p>\n\n<pre><code>import pandas as pd\nfrom ast import literal_eval\n\ndftest = pd.DataFrame({'col1': ['A', 'B'],\n                       'col2': ['[1, 5, 30]', '[1, 10, 20]']})\nprint(dftest)\n# print(dftest.col2.dtype)\nD = dftest.at[0, 'col2']\nprint(type(D))  # taking particular cell\ndftest['col2'] = dftest['col2'].apply(literal_eval)\nD = dftest.at[0, 'col2']  # taking particular cell\nprint(type(D))\n</code></pre>\n\n<p><strong>output:</strong></p>\n\n<pre><code>  col1         col2\n0    A   [1, 5, 30]\n1    B  [1, 10, 20]\n&lt;class 'str'&gt;\n&lt;class 'list'&gt;\n</code></pre>\n\n<p><strong>for example:</strong></p>\n\n<pre><code>from ast import literal_eval\nprint(literal_eval('[1, 5, 30]'))\nprint(type('[1, 5, 30]'))\nprint(type(literal_eval('[1, 5, 30]')))\n</code></pre>\n\n<p><strong>output:</strong></p>\n\n<pre><code>[1, 5, 30]\n&lt;class 'str'&gt;\n&lt;class 'list'&gt;\n</code></pre>\n"}], "owner": {"reputation": 573, "user_id": 7748514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Dy0VE.png?s=128&g=1", "display_name": "Liquidity", "link": "https://stackoverflow.com/users/7748514/liquidity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550146877, "creation_date": 1550093196, "last_edit_date": 1550094358, "question_id": 54679701, "link": "https://stackoverflow.com/questions/54679701/df-replace-doesnt-replace", "title": "df.replace doesn&#39;t replace ]", "body": "<p>I have a dataframe I'm trying to remove the <code>[</code> and <code>]</code> from. It looks like this:</p>\n\n<pre><code>dftest = pd.DataFrame({'col1': ['A', 'B'],\n         'col2': ['[1, 5, 30]', '[1, 10, 20]']})\n</code></pre>\n\n<p>I can remove the <code>[</code> just fine using: </p>\n\n<pre><code>dftest = dftest.replace({'\\[':''}, regex = True)\n</code></pre>\n\n<p>However, when I try the same thing for <code>]</code>, none are removed:</p>\n\n<pre><code>dftest = dftest.replace({'\\]':''}, regex = True)\n</code></pre>\n\n<p>How can I remove that final <code>]</code>? Why does it not work the same as <code>[</code>? Desired output: </p>\n\n<pre><code>dftest = pd.DataFrame({'col1': ['A', 'B'],\n         'col2': ['1, 5, 30', '1, 10, 20']})\n</code></pre>\n\n<p>Running this exact thing in a new cell in Jupyter Lab returns a dataframe with no changes:</p>\n\n<pre><code>dftest = pd.DataFrame({'col1': ['A', 'B'],\n         'col2': ['[1, 5, 30]', '[1, 10, 20]']})\ndftest = dftest.replace({'\\]':''}, regex = True)\n</code></pre>\n\n<p>However, running this <em>does</em> replace <code>[</code>:</p>\n\n<pre><code>dftest = pd.DataFrame({'col1': ['A', 'B'],\n         'col2': ['[1, 5, 30]', '[1, 10, 20]']})\ndftest = dftest.replace({'\\]':''}, regex = True)\n</code></pre>\n\n<p>Maybe it's a problem with my Jupyter Lab?? Here is a screenshot of those two code segments with their output just in case that helps (and to prove something strange is going on with my notebook, I guess):</p>\n\n<p><a href=\"https://i.stack.imgur.com/bUnH5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bUnH5.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pandas", "list", "nested-lists"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 1, "creation_date": 1550093190, "post_id": 54679671, "comment_id": 96148203, "body": "Could you be clearer about the expected output?"}, {"owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "edited": false, "score": 1, "creation_date": 1550093237, "post_id": 54679671, "comment_id": 96148223, "body": "<code>pd.DataFrame([nested]).T</code> or more likely <code>df[&#39;new_column&#39;] = pd.Series(nested)</code>?"}, {"owner": {"reputation": 63, "user_id": 10671455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2869fce4db86dce38246233a2c4818b3?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/10671455/leo"}, "edited": false, "score": 0, "creation_date": 1550093580, "post_id": 54679671, "comment_id": 96148401, "body": "The output should look like this: Dataframe with one column, each cell represents one list e.g. [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;,] is first cell, then [&#39;2&#39;, &#39;3&#39;, &#39;1&#39;] is second cell.."}, {"owner": {"reputation": 63, "user_id": 10671455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2869fce4db86dce38246233a2c4818b3?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/10671455/leo"}, "edited": false, "score": 0, "creation_date": 1550093713, "post_id": 54679671, "comment_id": 96148471, "body": "Thanks AChampion it worked!"}], "answers": [{"tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": true, "score": 2, "last_activity_date": 1550093708, "creation_date": 1550093708, "answer_id": 54679807, "question_id": 54679671, "link": "https://stackoverflow.com/questions/54679671/create-a-pandas-column-from-nested-list/54679807#54679807", "title": "Create a pandas column from nested list", "body": "<p>If I understood correctly this will be enough:</p>\n\n<pre><code>import pandas as pd\n\nnested = [['1', '2', '3'], ['2', '3', '1'], ['3', '4'], ['1']]\ndf = pd.DataFrame({'col1': nested})\nprint(df)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>        col1\n0  [1, 2, 3]\n1  [2, 3, 1]\n2     [3, 4]\n3        [1]\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10671455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2869fce4db86dce38246233a2c4818b3?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/10671455/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1106, "favorite_count": 0, "accepted_answer_id": 54679807, "answer_count": 1, "score": 0, "last_activity_date": 1550093708, "creation_date": 1550093106, "question_id": 54679671, "link": "https://stackoverflow.com/questions/54679671/create-a-pandas-column-from-nested-list", "title": "Create a pandas column from nested list", "body": "<p>How do i create a pandas column, where the lists inside my list become cells on their own? E.g.: I have the following nested list:</p>\n\n<pre><code>nested = [['1', '2', '3'],['2', '3', '1'],['3', '4'],['1']]\n</code></pre>\n\n<p>This list contains around 300 separate lists with strings of different length (min 1 max 5). Now i want to create a pandas dataframe column, where each of these lists in a single cell, not where each string is in a different cell. I tried it this way</p>\n\n<pre><code>df['new column'] = df[[\"col1\", \"col2\"]].apply(lambda x: ''.join(x), axis=1)\n</code></pre>\n\n<p>but it gives me an error messsage, because there are some None values, because the lists initially had different lengths.</p>\n"}, {"tags": ["python", "python-3.x", "enumerate"], "answers": [{"comments": [{"owner": {"reputation": 1223, "user_id": 9110128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owmCW.jpg?s=128&g=1", "display_name": "Joey", "link": "https://stackoverflow.com/users/9110128/joey"}, "edited": false, "score": 0, "creation_date": 1550093277, "post_id": 54679665, "comment_id": 96148244, "body": "that&#39;s right, but I asked for a solution with <code>enumerate()</code>"}, {"owner": {"reputation": 4107, "user_id": 9770840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984adcd06e81b4ed593225545018aacb?s=128&d=identicon&r=PG&f=1", "display_name": "Attersson", "link": "https://stackoverflow.com/users/9770840/attersson"}, "reply_to_user": {"reputation": 1223, "user_id": 9110128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owmCW.jpg?s=128&g=1", "display_name": "Joey", "link": "https://stackoverflow.com/users/9110128/joey"}, "edited": false, "score": 1, "creation_date": 1550093332, "post_id": 54679665, "comment_id": 96148273, "body": "I understand. Still, I think the example in the original question does not fit. In this case, using enumerate adds an unjustified overhead. In other words enumerate should be used when actually needed"}], "tags": [], "owner": {"reputation": 4107, "user_id": 9770840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984adcd06e81b4ed593225545018aacb?s=128&d=identicon&r=PG&f=1", "display_name": "Attersson", "link": "https://stackoverflow.com/users/9770840/attersson"}, "is_accepted": false, "score": 3, "last_activity_date": 1550093091, "creation_date": 1550093091, "answer_id": 54679665, "question_id": 54679614, "link": "https://stackoverflow.com/questions/54679614/enumerate-over-string-instead-of-iterating-with-range-and-len/54679665#54679665", "title": "Enumerate over string instead of iterating with range() and len()", "body": "<pre><code>s=\"Pizza\"\ns[::2]\nOut[3]: 'Pza'\n</code></pre>\n\n<p>You don't even need range and len or even enumerate</p>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1550093264, "post_id": 54679686, "comment_id": 96148236, "body": "If you are going to bind the function to a name, use the <code>def</code> statement. <code>lambda</code> is for functions that don&#39;t need a name in the current scope (for example, when you are creating the function simply to pass as an argument to another function)."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1550093372, "post_id": 54679686, "comment_id": 96148295, "body": "I&#39;d echo chpner. Using <code>join</code> is a good idea, but packing it all into a one-liner just makes it harder to understand."}], "tags": [], "owner": {"reputation": 17500, "user_id": 3113477, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/TWIEk.jpg?s=128&g=1", "display_name": "A.J. Uppal", "link": "https://stackoverflow.com/users/3113477/a-j-uppal"}, "is_accepted": false, "score": 1, "last_activity_date": 1550105274, "last_edit_date": 1550105274, "creation_date": 1550093155, "answer_id": 54679686, "question_id": 54679614, "link": "https://stackoverflow.com/questions/54679614/enumerate-over-string-instead-of-iterating-with-range-and-len/54679686#54679686", "title": "Enumerate over string instead of iterating with range() and len()", "body": "<p>Try this function:</p>\n\n<pre><code>def string_skip(st):\n    return ''.join([j for i, j in enumerate(x) if not i % 2])\n</code></pre>\n\n<hr>\n\n<p><code>for i, j in enumerate(string)</code> simply unpacks the following:</p>\n\n<pre><code>0, string[0]\n1, string[1]\n2, string[2]\n...\n</code></pre>\n\n<hr>\n\n<pre><code>&gt;&gt;&gt; for i, j in enumerate('Pizza'):\n...     print i, j\n... \n0 P\n1 i\n2 z\n3 z\n4 a\n&gt;&gt;&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 592, "user_id": 1567097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a57fd37080fad0f6d42c1d38dde11cbe?s=128&d=identicon&r=PG", "display_name": "spinodal", "link": "https://stackoverflow.com/users/1567097/spinodal"}, "is_accepted": true, "score": 6, "last_activity_date": 1550093217, "creation_date": 1550093217, "answer_id": 54679706, "question_id": 54679614, "link": "https://stackoverflow.com/questions/54679614/enumerate-over-string-instead-of-iterating-with-range-and-len/54679706#54679706", "title": "Enumerate over string instead of iterating with range() and len()", "body": "<p>yes you can, strings are iterables too.</p>\n\n<pre><code>def string_skip(string):\n    new_string = \"\"\n    for i, n in enumerate(string):\n        if i % 2 == 0:\n            new_string += n\n\n    return new_string\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": false, "score": 0, "last_activity_date": 1550094198, "last_edit_date": 1550094198, "creation_date": 1550093377, "answer_id": 54679740, "question_id": 54679614, "link": "https://stackoverflow.com/questions/54679614/enumerate-over-string-instead-of-iterating-with-range-and-len/54679740#54679740", "title": "Enumerate over string instead of iterating with range() and len()", "body": "<p>just use:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def str_func(mystr):\n\n    newstr = ''\n\n    for i, char in enumerate(mystr):\n        if not i%2:\n            newstr+=char\n    return newstr\n\n</code></pre>\n\n<p>If you're feeling particularly fancy, you could use a list comprehension and <code>join</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def str_func(mystr):\n    return \"\".join([char for i,char in enumerate(mystr) if not i%2 ])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1223, "user_id": 9110128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owmCW.jpg?s=128&g=1", "display_name": "Joey", "link": "https://stackoverflow.com/users/9110128/joey"}, "edited": false, "score": 0, "creation_date": 1550093889, "post_id": 54679804, "comment_id": 96148553, "body": "I wanted to use <code>enumerate()</code> <b>instead</b> of <code>range()</code> and <code>len()</code>."}], "tags": [], "owner": {"reputation": 177, "user_id": 8511478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ca3afec8b56d6413a68fef2da5f25a?s=128&d=identicon&r=PG&f=1", "display_name": "jfeuerman", "link": "https://stackoverflow.com/users/8511478/jfeuerman"}, "is_accepted": false, "score": 0, "last_activity_date": 1550093694, "creation_date": 1550093694, "answer_id": 54679804, "question_id": 54679614, "link": "https://stackoverflow.com/questions/54679614/enumerate-over-string-instead-of-iterating-with-range-and-len/54679804#54679804", "title": "Enumerate over string instead of iterating with range() and len()", "body": "<p>Try this one out:</p>\n\n<pre><code>def string_skip_2(string):\n   string = list(string)\n   new_string = ''\n   for i in range(len(string)):\n       if int(list(enumerate(string))[i][0]) % 2 == 0:\n           new_string += list(enumerate(string))[i][1]\n   return new_string\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4107, "user_id": 9770840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984adcd06e81b4ed593225545018aacb?s=128&d=identicon&r=PG&f=1", "display_name": "Attersson", "link": "https://stackoverflow.com/users/9770840/attersson"}, "edited": false, "score": 1, "creation_date": 1550093929, "post_id": 54679823, "comment_id": 96148572, "body": "And it is also more Pythonic and efficient."}, {"owner": {"reputation": 36, "user_id": 10115255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32debce73ae67ffd6c8a78c9dd63a8f1?s=128&d=identicon&r=PG&f=1", "display_name": "Borjan T.", "link": "https://stackoverflow.com/users/10115255/borjan-t"}, "reply_to_user": {"reputation": 4107, "user_id": 9770840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984adcd06e81b4ed593225545018aacb?s=128&d=identicon&r=PG&f=1", "display_name": "Attersson", "link": "https://stackoverflow.com/users/9770840/attersson"}, "edited": false, "score": 1, "creation_date": 1550094050, "post_id": 54679823, "comment_id": 96148619, "body": "I would say it is also more readable -- which is what one likes about Python."}, {"owner": {"reputation": 1223, "user_id": 9110128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owmCW.jpg?s=128&g=1", "display_name": "Joey", "link": "https://stackoverflow.com/users/9110128/joey"}, "edited": false, "score": 0, "creation_date": 1550094314, "post_id": 54679823, "comment_id": 96148743, "body": "I agree with all that. This is just for practice and better understanding purposes."}], "tags": [], "owner": {"reputation": 36, "user_id": 10115255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32debce73ae67ffd6c8a78c9dd63a8f1?s=128&d=identicon&r=PG&f=1", "display_name": "Borjan T.", "link": "https://stackoverflow.com/users/10115255/borjan-t"}, "is_accepted": false, "score": 1, "last_activity_date": 1550093997, "last_edit_date": 1550093997, "creation_date": 1550093785, "answer_id": 54679823, "question_id": 54679614, "link": "https://stackoverflow.com/questions/54679614/enumerate-over-string-instead-of-iterating-with-range-and-len/54679823#54679823", "title": "Enumerate over string instead of iterating with range() and len()", "body": "<p>As pointed out by @attersson, you can rely on the <a href=\"https://docs.python.org/3.6/glossary.html#term-slice\" rel=\"nofollow noreferrer\">slicing</a> capability of Python sequences (anything which can be indexed):</p>\n\n<pre><code>&gt;&gt;&gt; s = \"Pizza\"\n&gt;&gt;&gt; s[::2]\n'Pza'\n</code></pre>\n\n<p>Instead of only indexing one character (<code>s[2]</code>), or a range of characters (<code>s[2:4]</code>), you can specify the <em>step</em> to use when iterating with the third value between the square brackets.</p>\n\n<p>In summary, indexing in Python works as <code>[start:stop:step]</code> where start is inclusive, and stop is exclusive. By default <code>start=0</code>, <code>stop=len(...)</code>, and <code>step=1</code>:</p>\n\n<pre><code>&gt;&gt;&gt; s[2]\n'z'\n&gt;&gt;&gt; s[2:4]\n'zz'\n&gt;&gt;&gt; s[1::2]\n'iz'\n</code></pre>\n\n<hr>\n\n<p>Now if you really want to use enumerate, you can rely on the index as it is yielded:</p>\n\n<pre><code>&gt;&gt;&gt; for i, letter in enumerate(s):\n&gt;&gt;&gt;     if i % 2 == 0:\n&gt;&gt;&gt;         print(letter)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3898, "user_id": 6221024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHtD0ON5o_w/AAAAAAAAAAI/AAAAAAAAABw/1B5Y7p2C-g4/photo.jpg?sz=128", "display_name": "Dillon Davis", "link": "https://stackoverflow.com/users/6221024/dillon-davis"}, "is_accepted": false, "score": 0, "last_activity_date": 1550093903, "creation_date": 1550093903, "answer_id": 54679845, "question_id": 54679614, "link": "https://stackoverflow.com/questions/54679614/enumerate-over-string-instead-of-iterating-with-range-and-len/54679845#54679845", "title": "Enumerate over string instead of iterating with range() and len()", "body": "<p>To provide yet another option, which iterates over the elements similarly to enumerate, yet a bit more elegantly:</p>\n\n<pre><code>def string_skip(string):\n    new_string = \"\"\n    iterator = iter(string)\n    for letter in iterator:\n        new_string += letter\n        next(iterator)\n    return new_string\n</code></pre>\n"}], "owner": {"reputation": 1223, "user_id": 9110128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owmCW.jpg?s=128&g=1", "display_name": "Joey", "link": "https://stackoverflow.com/users/9110128/joey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "accepted_answer_id": 54679706, "answer_count": 7, "score": -1, "last_activity_date": 1553774546, "creation_date": 1550092895, "last_edit_date": 1553774546, "question_id": 54679614, "link": "https://stackoverflow.com/questions/54679614/enumerate-over-string-instead-of-iterating-with-range-and-len", "title": "Enumerate over string instead of iterating with range() and len()", "body": "<p>I wrote a function, that returns a new string made of every second character starting with the first. </p>\n\n<p>So that for example \"Pizza\" yields \"Pza\", \"Maogtbhdewr\" yields \"Mother\". </p>\n\n<p>This code is with <code>range()</code> and <code>len()</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def string_skip(string):\n    new_string = \"\"\n    for n in range(0, len(string)):\n        if n % 2 == 0:\n            new_string += string[n]\n\n    return new_string\n</code></pre>\n\n<p>The code above works as expected. But <code>pylint</code> shows an info suggesting to use <code>enumerate()</code> instead of iterating with <code>range()</code> and <code>len()</code>. So, I tried to rewrite my code without the two built-ins, and I've also read through the documentaion. But I still could not get it to work. </p>\n\n<p>My question: How do I use <code>enumerate()</code> instead of using <code>range()</code> and <code>len()</code>? </p>\n"}, {"tags": ["python", "shell"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1550092949, "post_id": 54679598, "comment_id": 96148112, "body": "Just like you needed to explicitly convert the probabilities to <code>float</code>s, you need to do the same for <code>ratio</code>: <code>ratio = int(sys.argv[-1])</code>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1550093049, "post_id": 54679598, "comment_id": 96148148, "body": "Every item in <code>sys.argv</code> will be a <code>str</code>"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1550093388, "post_id": 54679598, "comment_id": 96148306, "body": "If you look at the operating-system level interface, arguments are passed to and between programs as an array of pointers to C strings. There&#39;s no possible way for them to ever be anything <i>except</i> a string."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1550093581, "post_id": 54679598, "comment_id": 96148403, "body": "...moreover, shell variables are strings too, whether or not those strings are used to represent numbers! <code>ratio=$(echo &quot;scale=10; $ratio + $step&quot; | bc)</code> is reading the output of the <code>bc</code> command... <i>into a nul-terminated C string</i>."}, {"owner": {"reputation": 149, "user_id": 10881142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef007d2af18afdb185ec05dc429c232?s=128&d=identicon&r=PG&f=1", "display_name": "basel117", "link": "https://stackoverflow.com/users/10881142/basel117"}, "edited": false, "score": 0, "creation_date": 1550095215, "post_id": 54679598, "comment_id": 96149102, "body": "I modified it to <code>ratio = float(sys.argv[-1])</code> and now it is working!"}], "owner": {"reputation": 149, "user_id": 10881142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef007d2af18afdb185ec05dc429c232?s=128&d=identicon&r=PG&f=1", "display_name": "basel117", "link": "https://stackoverflow.com/users/10881142/basel117"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1550093512, "answer_count": 0, "score": 0, "last_activity_date": 1550092832, "creation_date": 1550092832, "question_id": 54679598, "link": "https://stackoverflow.com/questions/54679598/a-float-variable-mysteriously-taken-as-a-string", "closed_reason": "Duplicate", "title": "a float variable mysteriously taken as a string", "body": "<p>this is the main of my code</p>\n\n<pre><code> #!/usr/bin/env python\n    import time\n    import sys\n    import numpy\n    import random\n    from random import randint  \n    from configurable_trace_gen import ssatrace, random_trace\n\n    def main():\n        K = random.randint(150, 200)\n        if (len(sys.argv) &gt;= 3):\n            probability = [float(x) for x in sys.argv[1:3]]\n            ratio=sys.argv[-1]\n            trace = random_trace(K, probability, ratio)\n            run=ssatrace(trace)\n            print( K, probability, ratio)\n            print(run)\n        else:\n            print('Params Error')\n    if __name__ == \"__main__\":\n        main()\n</code></pre>\n\n<p>and  I have this shell script to execute the <strong>main.py</strong> (the code above) several times while changing the arguments in the input: <strong>$short</strong> <strong>$long</strong> <strong>$ratio</strong></p>\n\n<pre><code>#!/bin/bash\nstep=0.05\nshort=0\nlong=1\nfor firstloop in {1..20}; do\n    ratio=0\n    for secondloop in {1..20} ; do\n        echo $short $long $ratio &gt;&gt; file.txt\n        time python3 main.py \"$short\" \"$long\" \"$ratio\"&gt;&gt; output.txt\n        ratio=$(echo \"scale=10; $ratio + $step\" | bc)\n    done\n    short=$(echo \"scale=10; $short + $step\" | bc)\n    long=$(echo \"scale=10; $long - $step\" | bc)\ndone\n</code></pre>\n\n<p>when Executing, for some reason the variable <strong>ratio</strong> is considered to be a string which I don't understand why! <strong>ratio</strong> is supposed to take the last value of the 3 arguments in the command line, while <strong>probability</strong> is alist that is supposed to contain <strong>$short</strong> and <strong>$long</strong>.</p>\n\n<p>this is a snip of the output I get:</p>\n\n<pre><code>TypeError: unsupported operand type(s) for -: 'int' and 'str'\n\nreal    0m0.511s\nuser    0m0.416s\nsys 0m0.076s\nTraceback (most recent call last):\n  File \"main.py\", line 45, in &lt;module&gt;\n    main()\n  File \"main.py\", line 20, in main\n    trace = random_trace(K, probability, ratio)\n  File \"/Users/ouafaelachhab/Desktop/SemanticLocality/src/configurable_trace_gen.py\", line 34, in random_trace\n    ratioList=[ratio, 1-ratio]\nTypeError: unsupported operand type(s) for -: 'int' and 'str'\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "edited": false, "score": 0, "creation_date": 1550093720, "post_id": 54679578, "comment_id": 96148479, "body": "Try to put <code>AUTH_USER_MODEL</code> declaration after <code>INSTALLED_APPS</code> declaration."}], "answers": [{"comments": [{"owner": {"reputation": 2176, "user_id": 5548239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3d4b389a1348b049b1411d2be29d5515?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Swain", "link": "https://stackoverflow.com/users/5548239/dan-swain"}, "edited": false, "score": 0, "creation_date": 1550096733, "post_id": 54679977, "comment_id": 96149683, "body": "One other thought.  It&#39;s quite a bit easier to set up a custom user model if you inherit from AbstractUser rather than AbstractBaseUser:  <a href=\"https://docs.djangoproject.com/en/2.1/topics/auth/customizing/#using-a-custom-user-model-when-starting-a-project\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/2.1/topics/auth/customizing/&hellip;</a>  and  also this:  <a href=\"https://docs.djangoproject.com/en/2.1/topics/auth/customizing/#extending-django-s-default-user\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/2.1/topics/auth/customizing/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2176, "user_id": 5548239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3d4b389a1348b049b1411d2be29d5515?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Swain", "link": "https://stackoverflow.com/users/5548239/dan-swain"}, "is_accepted": true, "score": 3, "last_activity_date": 1550094528, "creation_date": 1550094528, "answer_id": 54679977, "question_id": 54679578, "link": "https://stackoverflow.com/questions/54679578/django-no-explicit-app-label-in-installed-apps/54679977#54679977", "title": "Django no explicit app label in INSTALLED APPS", "body": "<p>On your <code>User</code> class declaration include:</p>\n\n<pre><code>class Meta:\n    app_label = 'accounts'\n</code></pre>\n"}], "owner": {"reputation": 490, "user_id": 6152486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/232bd2dbbd9e197d1445ecbfd6e6cb63?s=128&d=identicon&r=PG&f=1", "display_name": "SoftwareStudent123", "link": "https://stackoverflow.com/users/6152486/softwarestudent123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1688, "favorite_count": 0, "accepted_answer_id": 54679977, "answer_count": 1, "score": 2, "last_activity_date": 1550094528, "creation_date": 1550092728, "question_id": 54679578, "link": "https://stackoverflow.com/questions/54679578/django-no-explicit-app-label-in-installed-apps", "title": "Django no explicit app label in INSTALLED APPS", "body": "<p>I am getting the runtime error <strong>Model class accounts.models.User doesn't declare an explicit app_label and isn't in an application in INSTALLED_APPS.</strong> After spending hours searching the web for solutions, I still cannot figure out what I am doing wrong. (note: using Django 1.11)</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>class User(AbstractBaseUser):\n    email = models.EmailField(\n        verbose_name='email address',\n        max_length=255,\n        unique=True,\n    )\n    active = models.BooleanField(default=True)\n    staff = models.BooleanField(default=False) # a admin user; non super-user\n    admin = models.BooleanField(default=False) # a superuser\n    verified = models.BooleanField(default=False)\n\n    USERNAME_FIELD = 'email'\n    REQUIRED_FIELDS = [] # Email &amp; Password are required by default.\n\n    objects = UserManager()\n\n    def get_full_name(self):\n        # The user is identified by their email address\n        return self.email\n\n    def get_short_name(self):\n        # The user is identified by their email address\n        return self.email\n\n    def __str__(self):              # __unicode__ on Python 2\n        return self.email\n\n    def has_perm(self, perm, obj=None):\n        \"Does the user have a specific permission?\"\n        # Simplest possible answer: Yes, always\n        return True\n\n    def has_module_perms(self, app_label):\n        \"Does the user have permissions to view the app `app_label`?\"\n        # Simplest possible answer: Yes, always\n        return True\n\n    @property\n    def is_staff(self):\n        \"Is the user a member of staff?\"\n        return self.staff\n\n    @property\n    def is_admin(self):\n        \"Is the user a admin member?\"\n        return self.admin\n\n    @property\n    def is_active(self):\n        \"Is the user active?\"\n        return self.active\n\n    @property\n    def is_verified(self):\n        \"Has the user verified their email?\"\n        return self.verified\n\n    def email_user(self, subject, message, from_email=None, **kwargs):\n        send_mail(subject, message, from_email, [self.email], **kwargs)\n</code></pre>\n\n<p><strong>settings.py</strong>   </p>\n\n<pre><code>AUTH_USER_MODEL = 'accounts.User'\n\n...\n\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'rest_framework',\n    'rest_framework.authtoken',\n    'accounts',\n    'demoapp',\n]\n</code></pre>\n\n<p><strong>accounts/apps.py</strong></p>\n\n<pre><code>from django.apps import AppConfig\n\n\nclass AccountsConfig(AppConfig):\n    name = 'accounts'\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 505, "user_id": 3075765, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/6bb22510b6d01f72790a8d77828656c5?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/3075765/mihir"}, "reply_to_user": {"reputation": 2131, "user_id": 2343935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/li569.png?s=128&g=1", "display_name": "grooveplex", "link": "https://stackoverflow.com/users/2343935/grooveplex"}, "edited": false, "score": 0, "creation_date": 1550093103, "post_id": 54679574, "comment_id": 96148173, "body": "grooveplex, I have updated my question with my script.."}, {"owner": {"reputation": 2131, "user_id": 2343935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/li569.png?s=128&g=1", "display_name": "grooveplex", "link": "https://stackoverflow.com/users/2343935/grooveplex"}, "edited": false, "score": 0, "creation_date": 1550093250, "post_id": 54679574, "comment_id": 96148229, "body": "What is <code>PWD1 = Test</code>?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1550093325, "post_id": 54679574, "comment_id": 96148264, "body": "The indentation of the code in &quot;my script&quot; doesn&#39;t look correct."}, {"owner": {"reputation": 505, "user_id": 3075765, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/6bb22510b6d01f72790a8d77828656c5?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/3075765/mihir"}, "edited": false, "score": 0, "creation_date": 1550093327, "post_id": 54679574, "comment_id": 96148267, "body": "just a folder location. /home/jenkins/workspace"}], "answers": [{"tags": [], "owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "is_accepted": true, "score": 1, "last_activity_date": 1550094071, "creation_date": 1550094071, "answer_id": 54679881, "question_id": 54679574, "link": "https://stackoverflow.com/questions/54679574/concatenate-multiple-files-data-into-one-file-and-also-rename-the-file/54679881#54679881", "title": "Concatenate multiple files&#39; data into one file and also rename the file?", "body": "<p>This is a working solution which stores both file names and file contents in a list, then joins the list filenames and creates a \"combined\" filename and then adds the contents of all the files to it, because lists append in order that the data is read this is sufficient (my example filenames are filea.txt and fileb.txt but it will work for the filenames you've used):</p>\n\n<pre><code>import os\nimport sys\n\npath = sys.argv[1]\nfiles = []\ncontents = []\nfor f in os.listdir(path):\n    if f.endswith('.txt'): # in case there are other file types in there\n        files.append(str(f.replace('.txt', ''))) #chops off txt so we can join later\n        with open(f) as cat:\n            for line in cat:\n                contents.append(line) # put file contents in list\n\noutfile_name = '_'.join(x for x in files)+'.txt' #create your output filename\noutfile = open(outfile_name, 'w')\nfor line in contents:\n    outfile.write(line)\noutfile.close()\n</code></pre>\n\n<p>to run this on a specific directory just pass it on the commandline:</p>\n\n<pre><code>$python3.6 catter.py /path/to/my_text_files/\n</code></pre>\n\n<p>output filename:</p>\n\n<pre><code>filea_fileb.txt\n</code></pre>\n\n<p>contents:</p>\n\n<pre><code>123123\n21321\n2344\n23432\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 346, "user_id": 10998325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMyqy.jpg?s=128&g=1", "display_name": "REXXman", "link": "https://stackoverflow.com/users/10998325/rexxman"}, "is_accepted": false, "score": 2, "last_activity_date": 1550094193, "creation_date": 1550094193, "answer_id": 54679909, "question_id": 54679574, "link": "https://stackoverflow.com/questions/54679574/concatenate-multiple-files-data-into-one-file-and-also-rename-the-file/54679909#54679909", "title": "Concatenate multiple files&#39; data into one file and also rename the file?", "body": "<p>Here's another way to combine text files.</p>\n\n<pre><code>#! python3\nfrom pathlib import Path\nimport glob\n\n\nfolder_File1 = r\"C:\\Users\\Public\\Documents\\Python\\CombineFIles\"\ntxt_only = r\"\\*.txt\"\n\nfiles_File1 = glob.glob(f'{folder_File1}{txt_only}')\nnew_txt = f'{folder_File1}\\\\newtxt.txt'\n\nnewFile = []\nfor indx, file in enumerate(files_File1):\n    if file == new_txt:\n        pass\n    else:\n        contents = Path(file).read_text()\n        newFile.append(contents)\n\nfile = open(new_txt, 'w')\nfile.write(\"\\n\".join(newFile))\nfile.close()\n</code></pre>\n"}], "owner": {"reputation": 505, "user_id": 3075765, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/6bb22510b6d01f72790a8d77828656c5?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/3075765/mihir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 54679881, "answer_count": 2, "score": 1, "last_activity_date": 1550096675, "creation_date": 1550092709, "last_edit_date": 1550096675, "question_id": 54679574, "link": "https://stackoverflow.com/questions/54679574/concatenate-multiple-files-data-into-one-file-and-also-rename-the-file", "title": "Concatenate multiple files&#39; data into one file and also rename the file?", "body": "<p>Using python how can I combine all the text file in the specified directory into one text file and rename the output text file with the same filename.</p>\n\n<p>For example: Filea.txt and Fileb_2.txt is in root directory, and it output generated file is Filea_Fileb_2.txt</p>\n\n<p>Filea.txt</p>\n\n<pre><code>123123\n21321\n</code></pre>\n\n<p>Fileb_2.txt</p>\n\n<pre><code>2344\n23432\n</code></pre>\n\n<p>Filea_Fileb_2.txt</p>\n\n<pre><code>123123\n21321\n2344\n23432\n</code></pre>\n\n<p>my script:</p>\n\n<pre><code>PWD1 = /home/jenkins/workspace\nfiles = glob.glob(PWD1 + '/' + '*.txt')\nwith open(f, 'r') as file:\n    for line in (file):\n         outputfile = open('outputfile.txt', 'a')\n         outputfile.write(line)\n         outputfile.close()\n</code></pre>\n"}, {"tags": ["python", "versioning"], "comments": [{"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 2, "creation_date": 1550092767, "post_id": 54679544, "comment_id": 96148051, "body": "Won&#39;t <code>sorted([&#39;1.0.0&#39;,&#39;1.0.1&#39;,&#39;1.1.1&#39;,&#39;1.1.1.abc&#39;,&#39;2.20.11&#39;,&#39;2.0.1&zwnj;&#8203;0.abc2&#39;])</code> do just this? I get the expected result.."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550092981, "post_id": 54679544, "comment_id": 96148120, "body": "Whatever custom type of sort you require, your example is not sufficient to demonstrate why the default <code>sort</code>/<code>sorted</code> does not work."}, {"owner": {"reputation": 363, "user_id": 5884011, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a18cd70b148266417876e7da2f4ea805?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5884011/anna"}, "reply_to_user": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1550093019, "post_id": 54679544, "comment_id": 96148136, "body": "@Torxed I just made that list up, but it would, say 5.2.14 and 5.2.9, it would put 5.2.14 before 5.2.9"}, {"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1550093905, "post_id": 54679544, "comment_id": 96148560, "body": "Sorry, my mistake. It&#39;s not a duplicate of the above, it&#39;s a duplicate of <a href=\"https://stackoverflow.com/questions/21361604/specific-sort-a-list-of-numbers-separated-by-dots\">specific sort a list of numbers separated by dots</a>"}, {"owner": {"reputation": 9307, "user_id": 705086, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbeee3d76a35f9de8847f36ee51c28a2?s=128&d=identicon&r=PG", "display_name": "Dima Tisnek", "link": "https://stackoverflow.com/users/705086/dima-tisnek"}, "edited": false, "score": 0, "creation_date": 1550108418, "post_id": 54679544, "comment_id": 96152940, "body": "<a href=\"https://pypi.org/project/natsort/3.3.0/\" rel=\"nofollow noreferrer\">pypi.org/project/natsort/3.3.0</a>"}], "answers": [{"comments": [{"owner": {"reputation": 363, "user_id": 5884011, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a18cd70b148266417876e7da2f4ea805?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5884011/anna"}, "edited": false, "score": 0, "creation_date": 1550093674, "post_id": 54679668, "comment_id": 96148453, "body": "I tried this, it would put  4.35.7 before 4.9.4 for some reason"}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "reply_to_user": {"reputation": 363, "user_id": 5884011, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a18cd70b148266417876e7da2f4ea805?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5884011/anna"}, "edited": false, "score": 0, "creation_date": 1550093916, "post_id": 54679668, "comment_id": 96148567, "body": "@Anna I&#39;m sorry, I simply forgot to split on dots, it should be <code>x.split(&#39;.&#39;)</code> instead of <code>x.split()</code>. This one works now"}, {"owner": {"reputation": 363, "user_id": 5884011, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a18cd70b148266417876e7da2f4ea805?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5884011/anna"}, "edited": false, "score": 0, "creation_date": 1550094082, "post_id": 54679668, "comment_id": 96148634, "body": "it&#39;s still doing that, this is what I put in: tags_sorted = sorted(tags,key = lambda x: [int(i) if i.isnumeric() else i for i in x.split(&#39;.&#39;)]), but it&#39;s putting 4.9.4 before 4.35.7"}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "reply_to_user": {"reputation": 363, "user_id": 5884011, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a18cd70b148266417876e7da2f4ea805?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5884011/anna"}, "edited": false, "score": 0, "creation_date": 1550094123, "post_id": 54679668, "comment_id": 96148648, "body": "Well, 4.9.4 <i>should</i> be before 4.35.7"}, {"owner": {"reputation": 363, "user_id": 5884011, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a18cd70b148266417876e7da2f4ea805?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5884011/anna"}, "edited": false, "score": 0, "creation_date": 1550094177, "post_id": 54679668, "comment_id": 96148675, "body": "sorry, type it wrong, it&#39;s putting 4.35.7 before 4.9.4"}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "reply_to_user": {"reputation": 363, "user_id": 5884011, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a18cd70b148266417876e7da2f4ea805?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5884011/anna"}, "edited": false, "score": 0, "creation_date": 1550094216, "post_id": 54679668, "comment_id": 96148693, "body": "What is the full input you are using? It works for me"}, {"owner": {"reputation": 903, "user_id": 2312300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7bf30b3d1f6893d8710598eaedf84a?s=128&d=identicon&r=PG", "display_name": "SilentGuy", "link": "https://stackoverflow.com/users/2312300/silentguy"}, "edited": false, "score": 0, "creation_date": 1550094222, "post_id": 54679668, "comment_id": 96148699, "body": "Since 9 is less than 35, it is returning wrong results. this solution does not take care of decimal position."}, {"owner": {"reputation": 363, "user_id": 5884011, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a18cd70b148266417876e7da2f4ea805?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5884011/anna"}, "edited": false, "score": 1, "creation_date": 1550094225, "post_id": 54679668, "comment_id": 96148701, "body": "Sorry, my bad again, I output the wrong thing, it works!!"}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "reply_to_user": {"reputation": 363, "user_id": 5884011, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a18cd70b148266417876e7da2f4ea805?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5884011/anna"}, "edited": false, "score": 0, "creation_date": 1550094254, "post_id": 54679668, "comment_id": 96148714, "body": "@Anna Glad I could help!"}], "tags": [], "owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "is_accepted": true, "score": 3, "last_activity_date": 1550093767, "last_edit_date": 1550093767, "creation_date": 1550093104, "answer_id": 54679668, "question_id": 54679544, "link": "https://stackoverflow.com/questions/54679544/how-to-sort-list-of-version-tags-in-python/54679668#54679668", "title": "How to sort list of version tags in Python", "body": "<p>You can use <code>sorted</code> with a <code>key</code>.</p>\n\n<p>You indeed need to use <code>str.split</code> to split the string into tokens. This will allow you to rely on list ordering.</p>\n\n<p>Although, you will need to cast strings of digits to <code>int</code> first to get the expected result, otherwise numbers will be sorted in alphabetical order instead of numercial order.</p>\n\n<h2>Example</h2>\n\n<pre><code>l = ['1.0.0','1.0.1','1.1.1','1.1.1.abc','2.20.11','2.0.10.abc2']\nsorted_l = sorted(l, key=lambda x: [int(i) if i.isdigit() else i for i in x.split('.')])\n</code></pre>\n\n<h2>Output</h2>\n\n<pre><code>['1.0.0', '1.0.1', '1.1.1', '1.1.1.abc', '2.0.10.abc2', '2.20.11']\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 5884011, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a18cd70b148266417876e7da2f4ea805?s=128&d=identicon&r=PG&f=1", "display_name": "Anna", "link": "https://stackoverflow.com/users/5884011/anna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 0, "closed_date": 1550093386, "accepted_answer_id": 54679668, "answer_count": 1, "score": 1, "last_activity_date": 1550107851, "creation_date": 1550092571, "last_edit_date": 1550107851, "question_id": 54679544, "link": "https://stackoverflow.com/questions/54679544/how-to-sort-list-of-version-tags-in-python", "closed_reason": "Duplicate", "title": "How to sort list of version tags in Python", "body": "<p>I have a list with tags like this:</p>\n\n<pre><code>list = ['1.0.0','1.0.1','1.1.1','1.1.1.abc','2.20.11','2.0.10.abc2']\n</code></pre>\n\n<p>I want to sort it base on the first number, then second number, then third.</p>\n\n<p>The output should be like this:</p>\n\n<pre><code>['1.0.0','1.0.1','1.1.1','1.1.1.abc','2.0.10.abc2','2.20.11']\n</code></pre>\n\n<p>I've tried to use sort like this:</p>\n\n<pre><code>list.sort(key=lambda x: (x[:x.find('.')], int(x[x.find('.')+1:x.index('.',x.find('.')+1)]) ) )\n</code></pre>\n\n<p>I can sort base on the first two numbers just fine, it's the third number that bothers me, because there might be a string part, and also the numbers might be two digits or more, I don't know how to exclude the last string part and only sort the numbers.</p>\n\n<p>Any Ideas on this?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>The problem with default sort is that, I wouldn't properly sort all the parts, for example it would put 4.35.7 before 4.9.2 for some reason, that why I need to explicitly sort base on each part. My problem is that there might be a string part followed by numbers.</p>\n"}, {"tags": ["python", "python-2.7", "pip", "importerror", "python-2.6"], "comments": [{"owner": {"reputation": 3164, "user_id": 9575715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fvlfp.png?s=128&g=1", "display_name": "Alex C.", "link": "https://stackoverflow.com/users/9575715/alex-c"}, "edited": false, "score": 0, "creation_date": 1550132156, "post_id": 54679532, "comment_id": 96159865, "body": "As conda provides own pip in myenv, installing another system-wide instance of pip with the sudo command was excessive. Mixing both pips causes problems. If you use conda, try to rollback by <code>sudo apt remove python-pip</code>, then just close/open the terminal. Please check out <a href=\"https://stackoverflow.com/a/49988228/9575715\">here</a> for more."}], "owner": {"reputation": 61, "user_id": 10675755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32aeab41d5d741792c89f72d2945e8b?s=128&d=identicon&r=PG&f=1", "display_name": "Leila", "link": "https://stackoverflow.com/users/10675755/leila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550093780, "creation_date": 1550092523, "last_edit_date": 1550092849, "question_id": 54679532, "link": "https://stackoverflow.com/questions/54679532/importerror-cannot-import-name-main-in-virtual-environment", "title": "ImportError: cannot import name main in virtual environment", "body": "<p>I have python3.6.5 and pip 19.0.2 on my ubuntu.\nI need to install a package which works in python2.6. I created a virtual environment using </p>\n\n<p>conda create -n myenv python=2.6</p>\n\n<p>I activated the virtual environment and installed pip using </p>\n\n<p>sudo apt install python-pip.</p>\n\n<p>It gave no errors and installed pip. However, when I try to use pip it gives the following error:</p>\n\n<p>Traceback (most recent call last):\n  File \"/home/leila/anaconda3/envs/myenv/bin/pip\", line 4, in \n    from pip import main\nImportError: cannot import name main</p>\n\n<p>Thanks,\nLeila</p>\n"}, {"tags": ["python", "django", "django-validation"], "answers": [{"tags": [], "owner": {"reputation": 1511, "user_id": 9177173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcDbS.jpg?s=128&g=1", "display_name": "ohlr", "link": "https://stackoverflow.com/users/9177173/ohlr"}, "is_accepted": true, "score": 1, "last_activity_date": 1550093138, "creation_date": 1550093138, "answer_id": 54679682, "question_id": 54679520, "link": "https://stackoverflow.com/questions/54679520/string-isalpha-returning-false-under-custom-django-validator-whether-string-co/54679682#54679682", "title": "string.isalpha() returning False under custom django validator whether string contains a number or not", "body": "<p>change to </p>\n\n<pre><code>if name.isalpha() is False:\n        raise ValidationError(\n            _('Name can only contain letters A-Z. Not numbers.'),\n            params={'name': name},\n        )\n</code></pre>\n\n<p>Besides you could use the RegexValidator to save some lines of code</p>\n\n<pre><code>from django.core.validators import RegexValidator\n\nletters_only = RegexValidator(r'^[a-zA-Z ]*$', _('Only letters are allowed.'))\n</code></pre>\n"}], "owner": {"reputation": 530, "user_id": 8973803, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1944386825578443/picture?type=large", "display_name": "juju", "link": "https://stackoverflow.com/users/8973803/juju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 54679682, "answer_count": 1, "score": 0, "last_activity_date": 1550098111, "creation_date": 1550092469, "last_edit_date": 1550098111, "question_id": 54679520, "link": "https://stackoverflow.com/questions/54679520/string-isalpha-returning-false-under-custom-django-validator-whether-string-co", "title": "string.isalpha() returning False under custom django validator whether string contains a number or not", "body": "<p>I am trying to use custom validation on a Django CharField model field. I'm checking whether the name has number in it. If it does, raise a <code>ValidationError</code>. I use the line <code>if name.isalpha() is False: raise ValidationError</code>. For some reason this equates to False whether there is a number present in the string or not. I checked to make sure that <code>name</code> was the value I was expecting it to be and that it was indeed a string. Here is my code:</p>\n\n<blockquote>\n  <p>models.py</p>\n</blockquote>\n\n<pre><code>name = models.CharField(validators=[validate_name], max_length=100, default='', unique=True)\n</code></pre>\n\n<blockquote>\n  <p>validation.py</p>\n</blockquote>\n\n<pre><code>from django.core.exceptions import ValidationError\nfrom django.utils.translation import gettext_lazy as _\n\n\ndef validate_name(name):\n    print(name.isalpha())\n\n    if name.isalpha is False:\n        raise ValidationError(\n            _('Name can only contain letters A-Z. Not numbers.'),\n            params={'name': name},\n        )\n</code></pre>\n"}, {"tags": ["python", "parsing"], "comments": [{"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 2, "creation_date": 1550092417, "post_id": 54679482, "comment_id": 96147884, "body": "What have you tried already?"}, {"owner": {"reputation": 8717, "user_id": 3124333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MCMEh.jpg?s=128&g=1", "display_name": "SiKing", "link": "https://stackoverflow.com/users/3124333/siking"}, "edited": false, "score": 2, "creation_date": 1550093659, "post_id": 54679482, "comment_id": 96148449, "body": "So your question has nothing to do with <a href=\"https://stackoverflow.com/questions/tagged/selenium\">selenium</a>, it&#39;s purely a String parsing problem?"}, {"owner": {"reputation": 63, "user_id": 10317037, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HchZKGRWgdQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNSxz6WsQCOjQ2QZQFSmyQqCPeXNQ/mo/photo.jpg?sz=128", "display_name": "Laurenz Z", "link": "https://stackoverflow.com/users/10317037/laurenz-z"}, "edited": false, "score": 0, "creation_date": 1550094319, "post_id": 54679482, "comment_id": 96148750, "body": "Yeah but the list is out of selenium so I wrote it down there sorry"}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1550095789, "post_id": 54679482, "comment_id": 96149331, "body": "Edit your question and post the relevant HTML, the code you&#39;ve tried, and a better description of what you are actually trying to accomplish."}, {"owner": {"reputation": 63, "user_id": 10317037, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HchZKGRWgdQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNSxz6WsQCOjQ2QZQFSmyQqCPeXNQ/mo/photo.jpg?sz=128", "display_name": "Laurenz Z", "link": "https://stackoverflow.com/users/10317037/laurenz-z"}, "edited": false, "score": 1, "creation_date": 1550096239, "post_id": 54679482, "comment_id": 96149504, "body": "The HTML is a different language. I didn&#39;t tried any working code and I want to get a the &quot;Leo 10&quot; to a variables Leo = 10"}, {"owner": {"reputation": 1866, "user_id": 1183506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aba83296f9be999e2fab8eab88b4727?s=128&d=identicon&r=PG", "display_name": "mrfreester", "link": "https://stackoverflow.com/users/1183506/mrfreester"}, "edited": false, "score": 0, "creation_date": 1550099767, "post_id": 54679482, "comment_id": 96150698, "body": "It sounds like you want some type of list of tuples or a dictionary, where you can get the number based on the name. Maybe that&#39;ll help in googling :) If this is still unanswered tomorrow I may try to find some time at a solution. Welcome to stack!"}, {"owner": {"reputation": 63, "user_id": 10317037, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HchZKGRWgdQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNSxz6WsQCOjQ2QZQFSmyQqCPeXNQ/mo/photo.jpg?sz=128", "display_name": "Laurenz Z", "link": "https://stackoverflow.com/users/10317037/laurenz-z"}, "edited": false, "score": 0, "creation_date": 1550128616, "post_id": 54679482, "comment_id": 96158266, "body": "Thanks for trying to help me. I edited the question a bit, so I hope it&#39;s easier to understand."}, {"owner": {"reputation": 63, "user_id": 10317037, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HchZKGRWgdQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNSxz6WsQCOjQ2QZQFSmyQqCPeXNQ/mo/photo.jpg?sz=128", "display_name": "Laurenz Z", "link": "https://stackoverflow.com/users/10317037/laurenz-z"}, "edited": false, "score": 0, "creation_date": 1551370743, "post_id": 54679482, "comment_id": 96624536, "body": "I have the solution, i&#39;ll post it in an answer"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10317037, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HchZKGRWgdQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNSxz6WsQCOjQ2QZQFSmyQqCPeXNQ/mo/photo.jpg?sz=128", "display_name": "Laurenz Z", "link": "https://stackoverflow.com/users/10317037/laurenz-z"}, "edited": false, "score": 0, "creation_date": 1550094743, "post_id": 54679531, "comment_id": 96148902, "body": "Is there a way without writing all ifs?"}, {"owner": {"reputation": 66, "user_id": 10984561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472ab4e96685383c54d56ab093693e4a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnTanner", "link": "https://stackoverflow.com/users/10984561/johntanner"}, "reply_to_user": {"reputation": 63, "user_id": 10317037, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HchZKGRWgdQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNSxz6WsQCOjQ2QZQFSmyQqCPeXNQ/mo/photo.jpg?sz=128", "display_name": "Laurenz Z", "link": "https://stackoverflow.com/users/10317037/laurenz-z"}, "edited": false, "score": 0, "creation_date": 1550147582, "post_id": 54679531, "comment_id": 96168482, "body": "In case you got a list <code>names</code> with all the names you want to get use <code>if line[0] in names: numbers.append(int(line[1]))</code>"}], "tags": [], "owner": {"reputation": 66, "user_id": 10984561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472ab4e96685383c54d56ab093693e4a?s=128&d=identicon&r=PG&f=1", "display_name": "JohnTanner", "link": "https://stackoverflow.com/users/10984561/johntanner"}, "is_accepted": false, "score": 0, "last_activity_date": 1550092523, "creation_date": 1550092523, "answer_id": 54679531, "question_id": 54679482, "link": "https://stackoverflow.com/questions/54679482/get-number-after-a-text-in-python/54679531#54679531", "title": "Get Number after a text in Python", "body": "<p>Lets assume you loaded it from a file and got it line by line:</p>\n\n<pre><code>numbers = []\nfor line in lines:\n   line = line.split()\n   if line[0] == \"Martin\": numbers.append(int(line[1]))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 10317037, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HchZKGRWgdQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNSxz6WsQCOjQ2QZQFSmyQqCPeXNQ/mo/photo.jpg?sz=128", "display_name": "Laurenz Z", "link": "https://stackoverflow.com/users/10317037/laurenz-z"}, "edited": false, "score": 0, "creation_date": 1550093691, "post_id": 54679540, "comment_id": 96148458, "body": "I don&#39;t have the list &quot;word&quot;,&quot;word&quot;, it&#39;s written in Line by line. And then I only want the number after Martin not everyone. To specify it more: I&#39;m trying to automate a Webgame with selenium and there I have to send cars. How many cars and what type of car is written in a list there."}, {"owner": {"reputation": 1929, "user_id": 9110909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dUmap.jpg?s=128&g=1", "display_name": "Omer Tekbiyik", "link": "https://stackoverflow.com/users/9110909/omer-tekbiyik"}, "reply_to_user": {"reputation": 63, "user_id": 10317037, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HchZKGRWgdQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNSxz6WsQCOjQ2QZQFSmyQqCPeXNQ/mo/photo.jpg?sz=128", "display_name": "Laurenz Z", "link": "https://stackoverflow.com/users/10317037/laurenz-z"}, "edited": false, "score": 0, "creation_date": 1550093808, "post_id": 54679540, "comment_id": 96148518, "body": "<code>print type(value)</code> if is string remove for condition just use <code>&#39; &#39;.join... </code>is list or array use the above code"}, {"owner": {"reputation": 63, "user_id": 10317037, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HchZKGRWgdQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNSxz6WsQCOjQ2QZQFSmyQqCPeXNQ/mo/photo.jpg?sz=128", "display_name": "Laurenz Z", "link": "https://stackoverflow.com/users/10317037/laurenz-z"}, "edited": false, "score": 0, "creation_date": 1550094388, "post_id": 54679540, "comment_id": 96148769, "body": "I&#39;ll try to say what variables I need there out of this list. I need Martin = 9 Leo =10 and Elisabeth =3"}], "tags": [], "owner": {"reputation": 1929, "user_id": 9110909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dUmap.jpg?s=128&g=1", "display_name": "Omer Tekbiyik", "link": "https://stackoverflow.com/users/9110909/omer-tekbiyik"}, "is_accepted": false, "score": 1, "last_activity_date": 1550092540, "creation_date": 1550092540, "answer_id": 54679540, "question_id": 54679482, "link": "https://stackoverflow.com/questions/54679482/get-number-after-a-text-in-python/54679540#54679540", "title": "Get Number after a text in Python", "body": "<p>I suppose you get some list with using selenium so getting integer from list works without using <code>re</code> like :</p>\n\n<pre><code>list = [\"Martin 9\",\"Leo 10\",\"Elisabeth 3\"]\nfor a in list:\n\n    print ''.join(filter(str.isdigit, a))\n</code></pre>\n\n<p>Output :</p>\n\n<pre><code>9\n10\n3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1866, "user_id": 1183506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aba83296f9be999e2fab8eab88b4727?s=128&d=identicon&r=PG", "display_name": "mrfreester", "link": "https://stackoverflow.com/users/1183506/mrfreester"}, "edited": false, "score": 0, "creation_date": 1550168434, "post_id": 54696739, "comment_id": 96180822, "body": "Or, maybe you really want a list of person <a href=\"https://www.w3schools.com/python/python_classes.asp\" rel=\"nofollow noreferrer\">objects</a> that stores the name and number so you don&#39;t have to deal with typos."}, {"owner": {"reputation": 1866, "user_id": 1183506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aba83296f9be999e2fab8eab88b4727?s=128&d=identicon&r=PG", "display_name": "mrfreester", "link": "https://stackoverflow.com/users/1183506/mrfreester"}, "edited": false, "score": 0, "creation_date": 1550244066, "post_id": 54696739, "comment_id": 96210175, "body": "Looks like the original question was changed to add additional spaces and characters (ie. <code>Leo 2 10</code>). That makes things more complicated and this answer is now only a partial solution. At this point you might want to research how to split the last word off of a line (instead of by space in this answer from this line <code>listItem.split(&#39; &#39;)</code>) to get the number separate and combine that with this answer."}, {"owner": {"reputation": 1866, "user_id": 1183506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aba83296f9be999e2fab8eab88b4727?s=128&d=identicon&r=PG", "display_name": "mrfreester", "link": "https://stackoverflow.com/users/1183506/mrfreester"}, "edited": false, "score": 0, "creation_date": 1550244559, "post_id": 54696739, "comment_id": 96210459, "body": "Additional note... turning the data into variables (ie. <code>&quot;Leo&quot;</code> becoming a variable <code>leo</code>) is not really how variables are used in programming, which is why nobody is really giving any insight in how to do that. Variables are typically more abstract representations of the data they hold. While that&#39;s not strictly true, it&#39;s hard to imagine how your data set would be an exception to that. Hope that helps :)"}], "tags": [], "owner": {"reputation": 1866, "user_id": 1183506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aba83296f9be999e2fab8eab88b4727?s=128&d=identicon&r=PG", "display_name": "mrfreester", "link": "https://stackoverflow.com/users/1183506/mrfreester"}, "is_accepted": false, "score": 0, "last_activity_date": 1550168576, "last_edit_date": 1550168576, "creation_date": 1550168239, "answer_id": 54696739, "question_id": 54679482, "link": "https://stackoverflow.com/questions/54679482/get-number-after-a-text-in-python/54696739#54696739", "title": "Get Number after a text in Python", "body": "<p>I don't think you really want a bunch of variables, especially if the list grows large. Instead I think you want a <code>dictionary</code> where the names are the key and the number is the value.</p>\n\n<p>I would start by splitting your <code>string</code> into a <code>list</code> as described <a href=\"https://stackoverflow.com/questions/22042948/split-string-using-a-newline-delimiter-with-python\">in this question/answer.</a> </p>\n\n<pre><code>s=\n  \"Martin 9\n  Leo 10\n  Elisabeth 3\"\nlistData = data.splitlines()\n</code></pre>\n\n<p>Then I would turn that <code>list</code> into a <code>dictionary</code> as described <a href=\"https://stackoverflow.com/questions/22980977/convert-list-of-strings-to-dictionary\">in this question/answer.</a></p>\n\n<pre><code>myDictionary = {}\nfor listItem in listData:\n    i = listItem.split(' ')\n    myDictionary[i[0]] = int(i[1])\n</code></pre>\n\n<p>Then you can access the number, in Leo's case <code>10</code>, via:</p>\n\n<pre><code>myDictionary[\"Leo\"]\n</code></pre>\n\n<p>I have not tested this syntax and I'm not used to python, so I'm sure a little debugging will be involved. Let me know if I need to make some corrections.</p>\n\n<p>I hope that helps :)</p>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 10317037, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HchZKGRWgdQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNSxz6WsQCOjQ2QZQFSmyQqCPeXNQ/mo/photo.jpg?sz=128", "display_name": "Laurenz Z", "link": "https://stackoverflow.com/users/10317037/laurenz-z"}, "is_accepted": false, "score": 0, "last_activity_date": 1551371278, "creation_date": 1551371278, "answer_id": 54930190, "question_id": 54679482, "link": "https://stackoverflow.com/questions/54679482/get-number-after-a-text-in-python/54930190#54930190", "title": "Get Number after a text in Python", "body": "<pre><code>s=\"\"\"Leo 1 9\nLeo 2 2\"\"\"\n</code></pre>\n\n<p>I shortened the list here</p>\n\n<p>look for the word in the list:\n    if \"Leo 1\" in s:\nthen get the index of it:</p>\n\n<pre><code>i = s.index(\"Leo 1\")\n</code></pre>\n\n<p>then add the number of character of the word</p>\n\n<pre><code>lenght=len(\"Leo 1\")\n</code></pre>\n\n<p>And then add it: (+1 because of the space)</p>\n\n<pre><code>b = i + lenght + 1\n</code></pre>\n\n<p>and then get the number on the position b:</p>\n\n<pre><code>x = int(s[b]\n</code></pre>\n\n<p>so in total:</p>\n\n<pre><code>if \"Leo 1\" in s:\n  i = s.index(\"Leo 1\")\n  lenght = len(\"Leo 1\")\n  b = i + lenght + 1\n  x = int(s[b])\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10317037, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HchZKGRWgdQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNSxz6WsQCOjQ2QZQFSmyQqCPeXNQ/mo/photo.jpg?sz=128", "display_name": "Laurenz Z", "link": "https://stackoverflow.com/users/10317037/laurenz-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1551371278, "creation_date": 1550092303, "last_edit_date": 1550170288, "question_id": 54679482, "link": "https://stackoverflow.com/questions/54679482/get-number-after-a-text-in-python", "title": "Get Number after a text in Python", "body": "<p>I need some help with getting numbers after a certain text\nFor example, I have a list:</p>\n\n<pre><code>  ['Martin 9', '    Leo 2 10', '    Elisabeth 3']\n</code></pre>\n\n<p>Now I need to change the list into variables like this:</p>\n\n<pre><code>Martin = 9\nLeo2 =10\nElisabeth = 3\n</code></pre>\n\n<p>I didn't tried many things, because I'm new to  Python. </p>\n\n<p>Thanks for reading my question and probably helping me</p>\n"}, {"tags": ["python", "excel", "pandas"], "comments": [{"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1550092668, "post_id": 54679451, "comment_id": 96147995, "body": "AFAIK there&#39;s not a better way than to ask for the excel field to be stored as text, that way the &#39;4-5&#39; wont be cast to something else"}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "reply_to_user": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1550095974, "post_id": 54679451, "comment_id": 96149397, "body": "I agree with @Yuca, this is the reason I try not to use excel as input, you never know what alterings excel will do to your file. This problem you have is a notorious one, also with thousand delimiter.   Ask for a <code>.csv</code> file, which is much saver, especially for automation."}], "owner": {"reputation": 1428, "user_id": 5347614, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/4ygeh.jpg?s=128&g=1", "display_name": "Adam Milecki", "link": "https://stackoverflow.com/users/5347614/adam-milecki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550092164, "creation_date": 1550092164, "question_id": 54679451, "link": "https://stackoverflow.com/questions/54679451/using-pandas-to-read-excel-with-column-of-variable-type", "title": "Using Pandas to Read Excel with Column of Variable Type", "body": "<p>I'm working on automating back-end Python data processing for an Excel data set provided to my system.  One of the columns should be formatted as text containing alphanumeric characters along with hyphen ('-') and period ('.') delimiters.</p>\n\n<p>Excel is auto-formatting this column and converting two numeric values separated with a hyphen as a date.  So when I try to load with the Pandas library using read_excel(), it's using the Excel formatting and causing unwanted behavior.</p>\n\n<p>For example: April 05, 2019 entered as \"4-5\" auto-converts to \"5-Apr\" but I want it to stay as \"4-5\".  Of course I could just open the file manually and change the column to text but that defeats the goal of full automation.</p>\n\n<p>Using pandas.read_excel(), the column is dtype=object.  I tried to convert to str but it just keeps the excel format.  Then I tried to convert to int followed by str but the alpha characters throw an error.</p>\n\n<p>Is it possible to make this work on the raw Excel file in Python or do I need to ask the owner of the data source to force the desired formatting?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1550092145, "post_id": 54679431, "comment_id": 96147749, "body": "try passing <code>how=&#39;outer&#39;</code> in your <code>merge</code>"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1550092184, "post_id": 54679431, "comment_id": 96147766, "body": "result_df = pd.merge(orig_df, sales_forecast_df, on=&#39;date&#39;,how=&#39;left&#39;)"}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 1, "creation_date": 1550092196, "post_id": 54679431, "comment_id": 96147769, "body": "Looks like there is no match between date values of both dataframes, outer merge will keep all rows but introduce NaNs where it does not find corresponding value"}, {"owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550092324, "post_id": 54679431, "comment_id": 96147834, "body": "@roganjosh that did it!"}, {"owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "reply_to_user": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 0, "creation_date": 1550092327, "post_id": 54679431, "comment_id": 96147840, "body": "Just like @vaishali said, I do end up with NaN in the rest of the values. In my case, that&#39;s fine though."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550092349, "post_id": 54679431, "comment_id": 96147855, "body": "I&#39;ve re-read and I might be unclear on what you&#39;re trying to do. You only ever want that single item from the original df to be updated? Merge is <i>really</i> expensive for that unless <code>outer</code> is the kind of thing you were looking for"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1550092366, "post_id": 54679431, "comment_id": 96147865, "body": "Ah nm, we got there then :)"}, {"owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550092452, "post_id": 54679431, "comment_id": 96147900, "body": "@roganjosh will mark as answer if you make your comment an answer"}], "owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 13, "favorite_count": 0, "closed_date": 1550092467, "answer_count": 0, "score": 0, "last_activity_date": 1550092042, "creation_date": 1550092042, "question_id": 54679431, "link": "https://stackoverflow.com/questions/54679431/merging-smaller-dataframe-into-bigger-dataframe-pandas-python", "closed_reason": "Duplicate", "title": "Merging(?) Smaller DataFrame into bigger DataFrame (Pandas/Python)", "body": "<p>I am running a process where I am trying to merge some predicted values back into another dataframe which has the 'actual' values.</p>\n\n<p>The problem I'm having is that after the <code>merge</code> is done, I end up with a new dataframe that only has 1 row. In this case, I am wanting to update the <code>predicted_sales</code> column in the parent dataframe to the value in <code>yhat</code> if the date matches.</p>\n\n<p>Is it possible to take a smaller dataframe (in this case, a dataframe with 1 record) and marge it into a larger dataframe (n records) without having to go through and iterate on every row and see if a value should be upated?</p>\n\n<p>I thought I was on the right path with <code>pd.merge</code> but it's not looking right:</p>\n\n<pre><code>result_df = pd.merge(orig_df, sales_forecast_df, on='date')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/3tU1I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3tU1I.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "object", "for-loop", "overwrite"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550091876, "post_id": 54679355, "comment_id": 96147646, "body": "What is <code>diff</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 10244370, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LNGPn9OL60c/AAAAAAAAAAI/AAAAAAAAA04/ruKMUdHv19E/photo.jpg?sz=128", "display_name": "Michael Boles", "link": "https://stackoverflow.com/users/10244370/michael-boles"}, "edited": false, "score": 0, "creation_date": 1550092753, "post_id": 54679417, "comment_id": 96148044, "body": "Makes perfect sense! Thank you."}], "tags": [], "owner": {"reputation": 3900, "user_id": 11021886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdDn.jpg?s=128&g=1", "display_name": "jwalton", "link": "https://stackoverflow.com/users/11021886/jwalton"}, "is_accepted": true, "score": 2, "last_activity_date": 1550092764, "last_edit_date": 1550092764, "creation_date": 1550091989, "answer_id": 54679417, "question_id": 54679355, "link": "https://stackoverflow.com/questions/54679355/python-for-loop-executing-second-line-overwrites-object-created-in-first-line/54679417#54679417", "title": "Python for loop: executing second line overwrites object created in first line", "body": "<p>You're having a copy problem. The first time I saw this it confused me too! If you take a look at <code>empty</code> you'll see that it also contains the same values as <code>y</code> and <code>dy</code>.</p>\n\n<p>To fix this you need to change your code to:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>empty = np.zeros([im.shape[0],im.shape[1]])\ny = empty.copy()\ndy = empty.copy()\n</code></pre>\n\n<p>When you define <code>empty</code> an object is created in memory, and <code>empty</code> points to this object.</p>\n\n<p>When you set <code>y = empty</code> and <code>dy = empty</code>, a new array isn't created in memory; <code>y</code> and <code>dy</code> are simply just pointers to the same array! So now you have that <code>y</code>, <code>dy</code> and <code>empty</code> all point to the same object.</p>\n\n<p>So, modifying any of <code>y</code>, <code>dy</code> or <code>empty</code> will cause all of them to change.</p>\n"}], "owner": {"reputation": 195, "user_id": 10244370, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LNGPn9OL60c/AAAAAAAAAAI/AAAAAAAAA04/ruKMUdHv19E/photo.jpg?sz=128", "display_name": "Michael Boles", "link": "https://stackoverflow.com/users/10244370/michael-boles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 54679417, "answer_count": 1, "score": 0, "last_activity_date": 1550095235, "creation_date": 1550091705, "last_edit_date": 1550095235, "question_id": 54679355, "link": "https://stackoverflow.com/questions/54679355/python-for-loop-executing-second-line-overwrites-object-created-in-first-line", "title": "Python for loop: executing second line overwrites object created in first line", "body": "<p>I'm new to Python and wish to use a for loop to analyze vertical slices of an image. My for loop works when each of the individual lines is executed independently. However, when executed together, the object created in the first line takes on the values of the object created in the second line.</p>\n\n<pre><code># create image of random noise \nim = np.random.randint(0,255,(100,200)) \n\n# create empty y and dy objects with same size as original image\nempty = np.zeros([im.shape[0],im.shape[1]])\ny = empty\ndy = empty\n\n# get pixel intensities in vertical strips, and then take first derivative \nfor i in xrange(im.shape[1]):\n    y[:,i] = im[:,i].astype(np.int32) \n    dy[:,i] = np.insert(diff(y[:,i]),0,0) \n</code></pre>\n\n<p>I expected to get an object <code>y</code> that is identical to my image <code>im</code>, and an object <code>dy</code> which has the same dimensions as <code>im</code> and <code>y</code> but contains values representing the first derivative of pixel intensities along the vertical direction of the image.</p>\n\n<p>Instead, I see that <code>dy</code> has been correctly calculated, but <code>y</code> has been overwritten with values identical to <code>dy</code>. Why is the object <code>y</code> being overwritten?</p>\n\n<p><em>To clarify:</em> my original image is type \"uint8\", which can't be differentiated. I have to convert to \"int32\" to compute the derivative. In the case of <code>np.random.randint()</code> the example image is already in <code>int32</code>. So the creation of object <code>y</code> is unnecessary in the provided example, but I need it to take the derivative of slices of my image.</p>\n"}, {"tags": ["python", "gps", "coordinates"], "comments": [{"owner": {"reputation": 225, "user_id": 10779784, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m4lWM.png?s=128&g=1", "display_name": "MinosIllyrien", "link": "https://stackoverflow.com/users/10779784/minosillyrien"}, "edited": false, "score": 0, "creation_date": 1550492275, "post_id": 54679280, "comment_id": 96276130, "body": "Can you add the test-case which gives the wrong output? The math seems to be right."}, {"owner": {"reputation": 113, "user_id": 5399004, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UuvSY.jpg?s=128&g=1", "display_name": "PaulB", "link": "https://stackoverflow.com/users/5399004/paulb"}, "reply_to_user": {"reputation": 225, "user_id": 10779784, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m4lWM.png?s=128&g=1", "display_name": "MinosIllyrien", "link": "https://stackoverflow.com/users/10779784/minosillyrien"}, "edited": false, "score": 0, "creation_date": 1550673191, "post_id": 54679280, "comment_id": 96355830, "body": "Here are the coordinates for the two points in radians. Origin lat: 0.7127 Origin lon: 1.2906, Point Lat:0.84584242351, Point lon: -1.2895393104. I realized that my landscape which I was using for reference was not center where I had thought and fixing that made the error a lot smaller. I think it may actually be an issue of rotation or scaling between the points and the landscape which I created from GIS data. Thanks"}], "owner": {"reputation": 113, "user_id": 5399004, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UuvSY.jpg?s=128&g=1", "display_name": "PaulB", "link": "https://stackoverflow.com/users/5399004/paulb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 696, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550673827, "creation_date": 1550091394, "last_edit_date": 1550673827, "question_id": 54679280, "link": "https://stackoverflow.com/questions/54679280/converting-gps-to-cartesian-coordinates", "title": "Converting GPS to Cartesian coordinates", "body": "<p>I am attempting to convert a gps location for a Cartesian x,y,z location relative to a second gps location in python. I am using the standard trigonometry based on other info I found on other forums and was expect x,y,z to come out in meters.</p>\n\n<pre><code>#Get cartesian coordinates relative to a center\nimport math\n\ncenterLat = 0.7127\ncenterLon = -1.2906\ncenterAlt = -32.406\n\n\npointLat = float(input(\"Enter latitude in degrees for the new point\")) * 3.141592653589 / 180\npointLon = float(input(\"Enter longitude in degrees for the new point\")) * 3.141592653589 / 180\npointAlt = float(input(\"Enter altitude in meters for the new point\"))\n\nr = centerAlt + 6378137\nxCenter = r * math.cos(centerLat) * math.cos(centerLon)\nyCenter = r * math.cos(centerLat) * math.sin(centerLon)\nzCenter = r * math.sin(centerLat) \n\n\nr = pointAlt + 6378137\nxPoint = r * math.cos(pointLat) * math.cos(pointLon)\nyPoint = r * math.cos(pointLat) * math.sin(pointLon)\nzPoint = r * math.sin(pointLat) \n\nx = xPoint - xCenter\ny = yPoint - yCenter\nz = zPoint - zCenter`enter code here`\n</code></pre>\n\n<p>For some reason these two points after conversion are now farther apart than they should be. If someone could give me advice on what I'm doing wrong that would be great.</p>\n\n<p>Edit:\nHere is the point I am trying to convert. \nLat: 40.767870\nLon: -73.885160\nAlt: 48.463201</p>\n\n<p>I am using a landscape in unreal engine for reference which I have imported from GIS Data using <a href=\"https://terraformpro.com/tutorials/tutorial-1/introduction/\" rel=\"nofollow noreferrer\">this tutorial</a> and realized since posting this that the landscapes where not centered where I thought they were. I have adjusted them and the result is much closer now but still not lining up. I wonder if it might be an issue of scale or rotation.</p>\n\n<p>all formulas and constants were found in the below links\nhttps://stackoverflow.com/questions/8981943/lat-long-to-x-y-z-position-in-js-not-working</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 43, "user_id": 11034904, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LgSPyD4QEcE/AAAAAAAAAAI/AAAAAAAAAHc/rJxWXqlFtOc/photo.jpg?sz=128", "display_name": "landviser", "link": "https://stackoverflow.com/users/11034904/landviser"}, "edited": false, "score": 0, "creation_date": 1550091419, "post_id": 54679235, "comment_id": 96147447, "body": "how to insert images to the question or comments? Thanks."}, {"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 1, "creation_date": 1550093719, "post_id": 54679235, "comment_id": 96148478, "body": "Does <code>ax2.bar()</code> work? <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.bar.html\" rel=\"nofollow noreferrer\">matplotlib.org/api/_as_gen/matplotlib.pyplot.bar.html</a>"}, {"owner": {"reputation": 43, "user_id": 11034904, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LgSPyD4QEcE/AAAAAAAAAAI/AAAAAAAAAHc/rJxWXqlFtOc/photo.jpg?sz=128", "display_name": "landviser", "link": "https://stackoverflow.com/users/11034904/landviser"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1550097758, "post_id": 54679235, "comment_id": 96150021, "body": "no, it doesn&#39;t. The x-axes is in datetime format."}, {"owner": {"reputation": 43, "user_id": 11034904, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LgSPyD4QEcE/AAAAAAAAAAI/AAAAAAAAAHc/rJxWXqlFtOc/photo.jpg?sz=128", "display_name": "landviser", "link": "https://stackoverflow.com/users/11034904/landviser"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1550098399, "post_id": 54679235, "comment_id": 96150250, "body": "ax2.bar() only work if I plot x-axis on the colunm (integer) DayOfYear. But how to present x-axis in specic format Mon-01 as in first picture? !<a href=\"https://drive.google.com/file/d/1-mBx3zlgD6Yt_ZNkg1ItFNv4Z6kFtSMv/view?usp=sharing\" rel=\"nofollow noreferrer\">dayofyear</a>"}, {"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1550153832, "post_id": 54679235, "comment_id": 96172295, "body": "Can you <a href=\"https://stackoverflow.com/posts/54679235/edit\">edit</a> your post to include some sample data and clarify that the bar plot works when you use integer day, but not when you use the datetime?"}, {"owner": {"reputation": 43, "user_id": 11034904, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LgSPyD4QEcE/AAAAAAAAAAI/AAAAAAAAAHc/rJxWXqlFtOc/photo.jpg?sz=128", "display_name": "landviser", "link": "https://stackoverflow.com/users/11034904/landviser"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1550195983, "post_id": 54679235, "comment_id": 96189907, "body": "@darthbith - I have edited the question and included graphs and data link."}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 11034904, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LgSPyD4QEcE/AAAAAAAAAAI/AAAAAAAAAHc/rJxWXqlFtOc/photo.jpg?sz=128", "display_name": "landviser", "link": "https://stackoverflow.com/users/11034904/landviser"}, "is_accepted": false, "score": 1, "last_activity_date": 1551297503, "creation_date": 1551297503, "answer_id": 54913547, "question_id": 54679235, "link": "https://stackoverflow.com/questions/54679235/how-to-plot-line-and-bar-chart-on-the-same-x-axis-datetime-but-different-y-axi/54913547#54913547", "title": "How to plot line and bar-chart on the same x-axis (datetime) but different y-axis with pyplot?", "body": "<p>I ended up using twinx() and twiny() to plot bar graph for rain on integer DOY (day of the year) second x-axis (and hide it in the display) and second y axis (set limit to 30 mm). All temperatures are plotted on first x (formatted datetime) and first y axes (self-adjusting to the temperature range). Below is full code:</p>\n\n<pre><code>matplotlib.rc('figure', figsize=(12, 5))   # this is to overwrite default aspect of graph to make x-axis longer\n\nfig, ax1 = plt.subplots()\n\n# data to be plotted from dataframe - temperatures as line graphs\nDates = doystats['Fdate']\nTmean = doystats['T2M_mean']\nTmax = doystats['T2M_MAX_mean']\nTmin = doystats['T2M_MIN_mean']\n\nax1.plot(Dates, Tmean, 'g', Dates, Tmax, 'r', Dates, Tmin, 'k')\n\n# Make the y-axis label\nax1.set_ylabel('Temperature (C)')\nax1.tick_params('y')\n\n# Creating twin axes for precipitation as a bar graph on secondary XY axes\nax2 = ax1.twiny()\nax3 = ax2.twinx()\n\n#data for bar graph\ndoy = doystats['DOY_']\nmyRain = doystats['PRECTOT_mean']\n\nax3.bar(doy, myRain, color='b')\nax2.set_xticks([])                # to hide ticks on the second X-axis - top of the graph\nax3.set_ylabel('Precipitation (mm)', color='b')\nax3.tick_params('y', colors='b')\nax3.set_ylim(top=30)\n\n# Formatting Date X-axis with monthly scale\nmonths = mdates.MonthLocator()  # every month\ndays = mdates.DayLocator()       # every day\nmyFmt = mdates.DateFormatter('%b')\nax1.xaxis.set_major_locator(months)\nax1.xaxis.set_major_formatter(myFmt)\nax1.xaxis.set_minor_locator(days)\n\n# Formatting second X-axis (DOY integers) to disappear\nax2.xaxis.set_major_formatter(plt.NullFormatter())\n\n# Displaying grid for the Date axis\nax1.grid(True)\n\nfig.tight_layout()\n# Saving graph to file\nplt.savefig(filename + '_annual.png',dpi=300,transparent=True)\n</code></pre>\n\n<p>which makes chart below:\n<a href=\"https://i.stack.imgur.com/IFSE1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IFSE1.png\" alt=\"Bar and line charts on two sets of XY axes\"></a></p>\n"}], "owner": {"reputation": 43, "user_id": 11034904, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LgSPyD4QEcE/AAAAAAAAAAI/AAAAAAAAAHc/rJxWXqlFtOc/photo.jpg?sz=128", "display_name": "landviser", "link": "https://stackoverflow.com/users/11034904/landviser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3563, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551297503, "creation_date": 1550091170, "last_edit_date": 1550240020, "question_id": 54679235, "link": "https://stackoverflow.com/questions/54679235/how-to-plot-line-and-bar-chart-on-the-same-x-axis-datetime-but-different-y-axi", "title": "How to plot line and bar-chart on the same x-axis (datetime) but different y-axis with pyplot?", "body": "<p>I am trying to plot several columns from pandas dataframe on the same graph, temperature as linear and rain as bars sharing the same x-Date and separate y-scales.  </p>\n\n<p>I figured out how to plot them as separate LINE (x-y scatter) and they share the same x-date. I can play with colors too. Eventually, I want 3 lines for temperatures and columns(bars) for rain and make second y-scale (for rain) bigger so the bars not overlapping with Temperatures. Is it possible with pyplot?</p>\n\n<pre><code>import matplotlib.dates as mdates\nimport matplotlib.pyplot as plt\n\nfig, ax1 = plt.subplots()\n\nmyDates = doystats['Fdate']\nmyValues = doystats['T2M_mean']\n\nax1.plot(myDates, myValues, 'g')\nax1.set_xlabel('Dates')\n\n# Make the y-axis label, ticks and tick labels match the line color.\nax1.set_ylabel('Temperature, C')\nax1.tick_params('y', colors='g')\n\nax2 = ax1.twinx()\nmyRain = doystats['PRECTOT_mean']\n\nax2.plot(myDates, myRain, color='b')\nax2.set_ylabel('Precipitation, mm', color='b')\nax2.tick_params('y', colors='b')\n\nmyFmt = mdates.DateFormatter('%b-%d')\nax1.xaxis.set_major_formatter(myFmt)\n\nfig.tight_layout()\nplt.show()\n</code></pre>\n\n<p>this code produces two line graphs with two y-axes.</p>\n\n<p><a href=\"https://i.stack.imgur.com/FSoAf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FSoAf.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I change it to plot both vs 'DOY_'(integer) instead of \"Fdate' (datetime) - without DateFormatter piece (that results in error now, if included), I can produce line/bar graph as below.</p>\n\n<pre><code>myDates = doystats['DOY_']\nax2.bar(myDates, myRain, color='b')\n#myFmt = mdates.DateFormatter('%b-%d')\n#ax1.xaxis.set_major_formatter(myFmt)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/BkDcD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BkDcD.png\" alt=\"enter image description here\"></a></p>\n\n<p>The workaround maybe to plot vs \"DOY_\" but somehow recalculate date from it on the fly and format as MON? \nHere is the link to the data <a href=\"https://pylab-landviser.notebooks.azure.com/j/edit/PR2_1981-2018_stat.csv\" rel=\"nofollow noreferrer\">https://pylab-landviser.notebooks.azure.com/j/edit/PR2_1981-2018_stat.csv</a> \nand to the whole Jupiter NB <a href=\"https://pylab-landviser.notebooks.azure.com/j/notebooks/WeatherDaily-Copy.ipynb\" rel=\"nofollow noreferrer\">https://pylab-landviser.notebooks.azure.com/j/notebooks/WeatherDaily-Copy.ipynb</a></p>\n"}, {"tags": ["python", "pycharm", "ipython"], "answers": [{"comments": [{"owner": {"reputation": 539, "user_id": 1435788, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bcb29f7da481900a0263a02e8b12e466?s=128&d=identicon&r=PG", "display_name": "jat255", "link": "https://stackoverflow.com/users/1435788/jat255"}, "edited": false, "score": 3, "creation_date": 1550092070, "post_id": 54679350, "comment_id": 96147720, "body": "Thanks, I saw that, but it&#39;s not exactly what I&#39;m after. Basically, I use the console to iteratively debug, and when running a wrapped command (like modifying part of a long XPath), having to always put the cursor at the end of the block of code is time consuming and not a great workflow."}], "tags": [], "owner": {"reputation": 61, "user_id": 9554986, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CRZogb5HAUQ/AAAAAAAAAAI/AAAAAAAABnQ/AwMYn2PeFTw/photo.jpg?sz=128", "display_name": "Mostafa Lotfi", "link": "https://stackoverflow.com/users/9554986/mostafa-lotfi"}, "is_accepted": false, "score": 3, "last_activity_date": 1550091673, "creation_date": 1550091673, "answer_id": 54679350, "question_id": 54679225, "link": "https://stackoverflow.com/questions/54679225/executing-multiple-lines-of-input-in-pycharm-console-from-first-line/54679350#54679350", "title": "Executing multiple lines of input in pycharm console from first line", "body": "<p>Perhaps this link can help you: </p>\n\n<p><a href=\"https://www.jetbrains.com/help/pycharm/loading-code-from-editor-into-console.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/pycharm/loading-code-from-editor-into-console.html</a></p>\n\n<p>pressing Alt + Shift + E on a selection will execute the selected code in the console. </p>\n"}, {"tags": [], "owner": {"reputation": 1230, "user_id": 11154841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a3cGr.png?s=128&g=1", "display_name": "questionto42", "link": "https://stackoverflow.com/users/11154841/questionto42"}, "is_accepted": false, "score": 1, "last_activity_date": 1609414289, "last_edit_date": 1609414289, "creation_date": 1596885466, "answer_id": 63314760, "question_id": 54679225, "link": "https://stackoverflow.com/questions/54679225/executing-multiple-lines-of-input-in-pycharm-console-from-first-line/63314760#63314760", "title": "Executing multiple lines of input in pycharm console from first line", "body": "<p>If there is no direct shortcut for this, at least you can do it with a workaround:</p>\n<ul>\n<li>Position to start with (call it PositionEND, since it is the end of the selection that you must paradoxically <em>start</em> with): Put the cursor in the <em>end position up to which</em> you want to run your code.</li>\n<li>Make an edit of whatever choice, it could be just pressing a letter, and then revert the edit. This puts this position as the last edit position in memory. This &quot;last edit&quot;-trick is to get back to that position after the execution of the following selection.</li>\n<li>Now press <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Pos1</kbd>, or if you want to run all, take <kbd>Ctrl</kbd>+<kbd>A</kbd> instead.</li>\n<li>Execute the selection with <kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>E</kbd>.</li>\n<li>Get back to the &quot;last edit&quot;-trick position <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Backspace</kbd> to go to the last edit according to the question body at <a href=\"https://stackoverflow.com/questions/7441541/keyboard-shortcut-for-jump-to-previous-view-location-navigate-back-forward-in\">Keyboard shortcut for Jump to Previous View Location (Navigate back/forward) in IntelliJ IDEA</a></li>\n</ul>\n<p>If you have selected some code, and you want to get to the bottom of the selection; or if you have just applied <kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>E</kbd> and you realise that you have forgotten to edit something at PositonEND in order to use the trick above with <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Backspace</kbd>, and you want to go back to PositionEND, you must simply copy / cut and paste the selected code, that will put your cursor to the end of the selection:</p>\n<ul>\n<li><kbd>Ctrl</kbd>+<kbd>c</kbd> (<kbd>Ctrl</kbd>+<kbd>x</kbd> would work as well)</li>\n<li><kbd>Ctrl</kbd>+<kbd>v</kbd></li>\n</ul>\n<p><em>By the way, if you are in somewhat else than in the editor and you want to turn back, do not click inside the editor, but just click on the needed &quot;.py&quot;-tab then so that your latest selection information does not get lost.</em></p>\n<hr />\n<p>If</p>\n<ul>\n<li>you can take a &quot;risk&quot; / try your luck /</li>\n<li>coming back to a nearby place is enough,</li>\n</ul>\n<p>you may use <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>\u2190 (Left Arrow)</kbd>, though this is very often not helping you to get to that exact previous cursor place, being confusingly called: &quot;Jump to Previous View Location&quot;. It does not always do what you would expect (I think).</p>\n"}], "owner": {"reputation": 539, "user_id": 1435788, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bcb29f7da481900a0263a02e8b12e466?s=128&d=identicon&r=PG", "display_name": "jat255", "link": "https://stackoverflow.com/users/1435788/jat255"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2549, "favorite_count": 3, "answer_count": 2, "score": 7, "last_activity_date": 1609414289, "creation_date": 1550091123, "last_edit_date": 1550092172, "question_id": 54679225, "link": "https://stackoverflow.com/questions/54679225/executing-multiple-lines-of-input-in-pycharm-console-from-first-line", "title": "Executing multiple lines of input in pycharm console from first line", "body": "<p>When working with the interactive console in PyCharm (via IPython), is there any way to execute the currently loaded multiline statement from not the last line?</p>\n\n<p>In Jupyter's QtConsole, this can be done by pressing <code>Shift</code>+<code>Enter</code> on any line of  input. i.e. </p>\n\n<pre><code>In [1]: print(\"line 1\")\n   ...  print(\"line 2\")\n</code></pre>\n\n<p>Can be evaluated by pressing <code>Shift</code>+<code>Enter</code> regardless of where the caret is located. In the IPython-based interactive console in PyCharm, pressing <code>Shift</code>+<code>Enter</code> creates a new line below the current one and moves the caret to it, while <code>Ctrl</code>+<code>Enter</code> splits the line at the current caret position.</p>\n\n<p>I could not find any settings that control this behavior; perhaps it is a limitation of IPython?</p>\n\n<p>EDIT: In the regular IPython REPL, <code>Alt</code>+<code>Enter</code> accomplishes what I'm after, but this does not work in the PyCharm console, even after removing the default  shortcut assigned to that keystroke (\"Show Intention Actions\")</p>\n"}, {"tags": ["python", "sql", "sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 1849962, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/65009d61bc9dbc3305855e3e96863d38?s=128&d=identicon&r=PG", "display_name": "user1849962", "link": "https://stackoverflow.com/users/1849962/user1849962"}, "edited": false, "score": 0, "creation_date": 1550091509, "post_id": 54679288, "comment_id": 96147485, "body": "Ah i was thinking along these lines.  So i would have to set title and author and isbn to empty strings and then check which of them the user had selected and then redefine the variable to the searchText and then the query would work right ??  Thanks"}], "tags": [], "owner": {"reputation": 1106505, "user_id": 1144035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e514b017977ebf742a418cac697d8996?s=128&d=identicon&r=PG", "display_name": "Gordon Linoff", "link": "https://stackoverflow.com/users/1144035/gordon-linoff"}, "is_accepted": true, "score": 1, "last_activity_date": 1550091413, "creation_date": 1550091413, "answer_id": 54679288, "question_id": 54679217, "link": "https://stackoverflow.com/questions/54679217/sql-select-based-on-one-of-three-possible-conditions-in-a-single-query/54679288#54679288", "title": "SQL SELECT based on one of three possible conditions in a single query", "body": "<p>You can do something like this:</p>\n\n<pre><code>SELECT isbn, title, author, year\nFROM books\nWHERE isbn LIKE :isbn OR title LIKE :title OR author LIKE :author;\n</code></pre>\n\n<p>This will work fine if two of the parameters are NULL or empty strings. </p>\n"}, {"tags": [], "owner": {"reputation": 1525, "user_id": 2158271, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4181311c26cb3b2bfbabcf2772be73c6?s=128&d=identicon&r=PG", "display_name": "haba713", "link": "https://stackoverflow.com/users/2158271/haba713"}, "is_accepted": false, "score": 0, "last_activity_date": 1550092739, "last_edit_date": 1550092739, "creation_date": 1550092595, "answer_id": 54679548, "question_id": 54679217, "link": "https://stackoverflow.com/questions/54679217/sql-select-based-on-one-of-three-possible-conditions-in-a-single-query/54679548#54679548", "title": "SQL SELECT based on one of three possible conditions in a single query", "body": "<p>This is not actually a SQL solution... but have you considered setting the value column dynamically? Something like this (not tested):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>page = request.form.get('page')\nsearchText = request.form.get('searchText')\nbookAttr = request.form.get('bookAttr')\n# Avoid SQL injection vulnerability by checking the parameter value\nif bookAttr != 'isbn' and bookAttr != 'title' and bookAttr != 'author':\n    raise ValueError('Unsupported bookAttr: ' + bookAttr)\nrows = db.execute('SELECT isbn, title, author, year FROM books WHERE '\n                  + bookAttr\n                  + ' LIKE :searchText LIMIT :start OFFSET :off',\n                  {'searchText': '%' + searchText + '%', 'start': 10,\n                  'off': int(page) * 10}).fetchall()\n</code></pre>\n"}], "owner": {"reputation": 355, "user_id": 1849962, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/65009d61bc9dbc3305855e3e96863d38?s=128&d=identicon&r=PG", "display_name": "user1849962", "link": "https://stackoverflow.com/users/1849962/user1849962"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 54679288, "answer_count": 2, "score": 0, "last_activity_date": 1550123705, "creation_date": 1550091078, "last_edit_date": 1550123705, "question_id": 54679217, "link": "https://stackoverflow.com/questions/54679217/sql-select-based-on-one-of-three-possible-conditions-in-a-single-query", "title": "SQL SELECT based on one of three possible conditions in a single query", "body": "<p>I'm new to SQL.  Currently doing the second challenge of the course \"CS50 Web Programming with Python and Javascript\".  I'm tasked with building a book review site and on the search page the user can search via title OR author OR isbn.  I have this SQL set up at the moment but it seems a bit ugly.  My question, is there a more elegant way of achieving the same?  Ideally in a single SQL query.  </p>\n\n<pre><code>    page = request.form.get(\"page\")\n    searchText = request.form.get(\"searchText\")\n    bookAttr = request.form.get(\"bookAttr\")\n    likesearchText = \"%\" + searchText + \"%\"\n\n    # Search results fixed to 10 per page\n\n    if bookAttr == \"isbn\":\n        rows = db.execute(\"SELECT isbn, title, author, year FROM books WHERE isbn LIKE :isbn LIMIT :start OFFSET :off\",\n                          {\"isbn\": likesearchText, \"start\": 10, \"off\": int(page) * 10}).fetchall()\n    elif bookAttr == \"title\":\n        rows = db.execute(\"SELECT isbn, title, author, year FROM books WHERE title LIKE :title LIMIT :start OFFSET :off\",\n                          {\"title\": likesearchText, \"start\": 10, \"off\": int(page) * 10}).fetchall()\n    else:\n        rows = db.execute(\"SELECT isbn, title, author, year FROM books WHERE author LIKE :author LIMIT :start OFFSET :off\",\n                          {\"author\": likesearchText, \"start\": 10, \"off\": int(page) * 10}).fetchall()\n</code></pre>\n"}, {"tags": ["python", "algorithm", "optimization", "sudoku", "cvxpy"], "comments": [{"owner": {"reputation": 10888, "user_id": 5625534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d4mCF.jpg?s=128&g=1", "display_name": "Erwin Kalvelagen", "link": "https://stackoverflow.com/users/5625534/erwin-kalvelagen"}, "edited": false, "score": 0, "creation_date": 1550113106, "post_id": 54679188, "comment_id": 96153926, "body": "Suggestions: (1) add the verbose flag and inspect the solver log (2) choose a different solver (cvxpy can talk to different solvers) (3) Sudoku puzzles are usually modeled in a different fashion (the all-different constraints are difficult with your setup)"}, {"owner": {"reputation": 961, "user_id": 6338725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4feaacbcbd03edc4fb721854ad3f75?s=128&d=identicon&r=PG", "display_name": "Rodrigo de Azevedo", "link": "https://stackoverflow.com/users/6338725/rodrigo-de-azevedo"}, "edited": false, "score": 0, "creation_date": 1550305825, "post_id": 54679188, "comment_id": 96227119, "body": "I had never seen an integer model. I had seen <i>binary</i> models, e.g., <a href=\"https://www.mathworks.com/help/optim/ug/solve-sudoku-puzzles-via-integer-programming-solver-based.html\" rel=\"nofollow noreferrer\">Solve Sudoku puzzles via Integer Programming</a> (MATLAB) and <a href=\"https://pythonhosted.org/PuLP/CaseStudies/a_sudoku_problem.html\" rel=\"nofollow noreferrer\">A Sudoku problem formulated as an LP</a> (Python)."}], "answers": [{"comments": [{"owner": {"reputation": 2947, "user_id": 5649057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d0ec510dd7b55379612b5cb30f0415d6?s=128&d=identicon&r=PG&f=1", "display_name": "Binyamin Even", "link": "https://stackoverflow.com/users/5649057/binyamin-even"}, "edited": false, "score": 0, "creation_date": 1550095561, "post_id": 54680125, "comment_id": 96149248, "body": "I don&#39;t care if at this stage I won&#39;t get a valid Sudoku, I will add constrains if necessary. All I&#39;m after right now is  getting a feasible solution the fulfills my current constraints."}, {"owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "reply_to_user": {"reputation": 2947, "user_id": 5649057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d0ec510dd7b55379612b5cb30f0415d6?s=128&d=identicon&r=PG&f=1", "display_name": "Binyamin Even", "link": "https://stackoverflow.com/users/5649057/binyamin-even"}, "edited": false, "score": 0, "creation_date": 1550095794, "post_id": 54680125, "comment_id": 96149334, "body": "@Binyamin then dump the variable settings and see what&#39;s going on."}, {"owner": {"reputation": 2947, "user_id": 5649057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d0ec510dd7b55379612b5cb30f0415d6?s=128&d=identicon&r=PG&f=1", "display_name": "Binyamin Even", "link": "https://stackoverflow.com/users/5649057/binyamin-even"}, "edited": false, "score": 0, "creation_date": 1550095909, "post_id": 54680125, "comment_id": 96149373, "body": "it returns a matrix of only <code>5</code>s, which is valid.  If I add just one variable (for example x[0,0]==7), it&#39;s not feasible anymore..."}, {"owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "reply_to_user": {"reputation": 2947, "user_id": 5649057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d0ec510dd7b55379612b5cb30f0415d6?s=128&d=identicon&r=PG&f=1", "display_name": "Binyamin Even", "link": "https://stackoverflow.com/users/5649057/binyamin-even"}, "edited": false, "score": 0, "creation_date": 1550096036, "post_id": 54680125, "comment_id": 96149424, "body": "@Binyamin does it throw an exception if you dump the values anyway? If so, try increasing the tolerance."}, {"owner": {"reputation": 2947, "user_id": 5649057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d0ec510dd7b55379612b5cb30f0415d6?s=128&d=identicon&r=PG&f=1", "display_name": "Binyamin Even", "link": "https://stackoverflow.com/users/5649057/binyamin-even"}, "edited": false, "score": 0, "creation_date": 1550096377, "post_id": 54680125, "comment_id": 96149543, "body": "It doesn&#39;t throw an exception."}], "tags": [], "owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "is_accepted": false, "score": 1, "last_activity_date": 1550095259, "creation_date": 1550095259, "answer_id": 54680125, "question_id": 54679188, "link": "https://stackoverflow.com/questions/54679188/trying-to-solve-sudoku-with-cvxpy/54680125#54680125", "title": "Trying to solve Sudoku with cvxpy", "body": "<p>The documentation (<a href=\"http://cvxr.com/cvx/doc/solver.html\" rel=\"nofollow noreferrer\">http://cvxr.com/cvx/doc/solver.html</a>) suggests that the root cause may be a close to feasible solution that looks infeasible due to floating point inaccuracy above tolerance, which squares with all the equality constraints.</p>\n\n<p>Stepping back, though, that set of constraints isn't enough to specify a valid Sudoku solution. A better formulation would be to have 0-1 variables indexed by (row, column, large square, digit) and constraints that, for each row/column/square, row/digit, column/digit, square/digit combination, the sum of matching variables is equal to 1.</p>\n"}, {"comments": [{"owner": {"reputation": 2947, "user_id": 5649057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d0ec510dd7b55379612b5cb30f0415d6?s=128&d=identicon&r=PG&f=1", "display_name": "Binyamin Even", "link": "https://stackoverflow.com/users/5649057/binyamin-even"}, "edited": false, "score": 0, "creation_date": 1550389549, "post_id": 54716219, "comment_id": 96245245, "body": "Thanks! Just to be accurate the solver is GLPK_MI (not GLPK). Happily accepted!"}, {"owner": {"reputation": 100, "user_id": 10981558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fSgBE.jpg?s=128&g=1", "display_name": "Jhirschibar", "link": "https://stackoverflow.com/users/10981558/jhirschibar"}, "edited": false, "score": 0, "creation_date": 1605843962, "post_id": 54716219, "comment_id": 114782999, "body": "This isn&#39;t a valid sudoku. The original post&#39;s constraints were incorrect. Each value can only appear once per row, column and submatrix. So the sum() ==45 is incorrect"}], "tags": [], "owner": {"reputation": 150, "user_id": 9753175, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3tN2c.jpg?s=128&g=1", "display_name": "bstellato", "link": "https://stackoverflow.com/users/9753175/bstellato"}, "is_accepted": true, "score": 4, "last_activity_date": 1550260535, "creation_date": 1550260535, "answer_id": 54716219, "question_id": 54679188, "link": "https://stackoverflow.com/questions/54679188/trying-to-solve-sudoku-with-cvxpy/54716219#54716219", "title": "Trying to solve Sudoku with cvxpy", "body": "<p>This is an ECOS_BB problem which you are using by default. It is not a reliable integer programming solver and I suggest not to use it. </p>\n\n<p>Other recommendation: do not use <code>import *</code>. It is much better to use <code>import cvxpy as cp</code> to avoid confusion with other functions with the same name. Also, numpy is not needed here by the way.</p>\n\n<p>The following script returns a feasible solution with GUROBI (you can also use GLPK if you do not have a GUROBI license):</p>\n\n<pre><code>import cvxpy as cp\n\nx = cp.Variable((9, 9), integer=True)\n\n# whatever, if the constrains are fulfilled it will be fine\nobjective = cp.Minimize(cp.sum(x))\nconstraints = [x &gt;= 1,  # all values should be &gt;= 1\n               x &lt;= 9,  # all values should be &lt;= 9\n               cp.sum(x, axis=0) == 45,  # sum of all rows should be 45\n               cp.sum(x, axis=1) == 45,  # sum of all cols should be 45\n               # sum of all squares should be 45\n               cp.sum(x[0:3, 0:3]) == 45, cp.sum(x[0:3, 3:6]) == 45,\n               cp.sum(x[0:3, 6:9]) == 45,\n               cp.sum(x[3:6, 0:3]) == 45, cp.sum(x[3:6, 3:6]) == 45,\n               cp.sum(x[3:6, 6:9]) == 45,\n               cp.sum(x[6:9, 0:3]) == 45, cp.sum(x[6:9, 3:6]) == 45,\n               cp.sum(x[6:9, 6:9]) == 45,\n               x[0, 7] == 7,  # the values themselves\n               x[0, 8] == 1,\n               x[1, 1] == 6,\n               x[1, 4] == 3,\n               x[2, 4] == 2,\n               x[3, 0] == 7,\n               x[3, 4] == 6,\n               x[3, 6] == 3,\n               x[4, 0] == 4,\n               x[4, 6] == 2,\n               x[5, 0] == 1,\n               x[5, 3] == 4,\n               x[6, 3] == 7,\n               x[6, 5] == 5,\n               x[6, 7] == 8,\n               x[7, 1] == 2,\n               x[8, 3] == 1]\n\nprob = cp.Problem(objective, constraints)\nprob.solve(solver=cp.GUROBI)\n\nprint(x.value)\n</code></pre>\n\n<p>That's the output</p>\n\n<pre><code>In [2]: run sudoku.py\n[[1. 6. 1. 4. 7. 9. 9. 7. 1.]\n [6. 6. 1. 1. 3. 9. 9. 9. 1.]\n [8. 7. 9. 1. 2. 9. 1. 7. 1.]\n [7. 7. 1. 9. 6. 1. 3. 2. 9.]\n [4. 9. 5. 9. 5. 1. 2. 1. 9.]\n [1. 2. 9. 4. 9. 1. 9. 1. 9.]\n [8. 1. 1. 7. 8. 5. 2. 8. 5.]\n [9. 2. 9. 9. 4. 1. 1. 1. 9.]\n [1. 5. 9. 1. 1. 9. 9. 9. 1.]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2947, "user_id": 5649057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d0ec510dd7b55379612b5cb30f0415d6?s=128&d=identicon&r=PG&f=1", "display_name": "Binyamin Even", "link": "https://stackoverflow.com/users/5649057/binyamin-even"}, "edited": false, "score": 0, "creation_date": 1550388497, "post_id": 54718404, "comment_id": 96245062, "body": "Yes but I <i>want</i> to use cvx to solve it. I don&#39;t care about solving Sudoku, I care about learning optimization and Sudoku is just a  use-case."}, {"owner": {"reputation": 2219, "user_id": 8608146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3B2gl.jpg?s=128&g=1", "display_name": "Phani Rithvij", "link": "https://stackoverflow.com/users/8608146/phani-rithvij"}, "reply_to_user": {"reputation": 2947, "user_id": 5649057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d0ec510dd7b55379612b5cb30f0415d6?s=128&d=identicon&r=PG&f=1", "display_name": "Binyamin Even", "link": "https://stackoverflow.com/users/5649057/binyamin-even"}, "edited": false, "score": 0, "creation_date": 1583650908, "post_id": 54718404, "comment_id": 107184429, "body": "@BinyaminEven how can you learn by not getting the right solution?"}], "tags": [], "owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "is_accepted": false, "score": 1, "last_activity_date": 1550273792, "creation_date": 1550273792, "answer_id": 54718404, "question_id": 54679188, "link": "https://stackoverflow.com/questions/54679188/trying-to-solve-sudoku-with-cvxpy/54718404#54718404", "title": "Trying to solve Sudoku with cvxpy", "body": "<p>Sum == 45 is not a good constraint since it does not prevent duplicate values.  You don't need either numpy or cvxpy to solve this as a simple backtrack algorithm can solve it.</p>\n\n<pre><code>count=0\n\ndef findnext():\n    global x\n    for row in range(0,9):\n        for col in range(0, 9):\n            if x[row][col] == 0:\n                return (row, col)\n    return (-1,-1)\n\ndef colok(row, col):\n    global x\n    for c in range(0,9):\n        if c != col and x[row][c] == x[row][col]:\n            # print \"x[%d][%d] == x[%d][%d]\" % (row,c,row,col)\n            return False\n    return True\n\ndef rowok(row, col):\n    global x\n    for r in range(0,9):\n        if r != row and x[r][col] == x[row][col]:\n            return False\n    return True\n\ndef sqok(row, col):\n    global x\n    sqy = int(row/3)*3\n    sqx = int(col/3)*3\n    for r in range(0,3):\n        for c in range(0, 3):\n            if (sqx+c != col or sqy+r != row) and x[sqy+r][sqx+c] == x[row][col]:\n                print \"x[%d][%d] == x[%d][%d] = %d\" % (row,c,row,col,x[row][col])\n                return False\n\n    return True\n\ndef backtrack():\n    global x\n    global count\n    (row, col) = findnext()\n    if row &lt; 0:\n        return True\n    for v in range(1,10):\n        x[row][col] = v\n        if rowok(row, col) and colok(row,col) and sqok(row,col):\n            count += 1\n            if backtrack():\n                return True\n    x[row][col] = 0\n    return False\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>ending after calling backtrack 98248 times\n2 8 3 6 5 4 9 7 1  \n5 6 1 9 3 7 4 2 8  \n9 7 4 8 2 1 5 6 3  \n7 5 8 2 6 9 3 1 4  \n4 3 6 5 1 8 2 9 7  \n1 9 2 4 7 3 8 5 6  \n3 1 9 7 4 5 6 8 2  \n8 2 7 3 9 6 1 4 5  \n6 4 5 1 8 2 7 3 9  \n</code></pre>\n"}], "owner": {"reputation": 2947, "user_id": 5649057, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/d0ec510dd7b55379612b5cb30f0415d6?s=128&d=identicon&r=PG&f=1", "display_name": "Binyamin Even", "link": "https://stackoverflow.com/users/5649057/binyamin-even"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1222, "favorite_count": 1, "accepted_answer_id": 54716219, "answer_count": 3, "score": 6, "last_activity_date": 1550273792, "creation_date": 1550090994, "last_edit_date": 1550091194, "question_id": 54679188, "link": "https://stackoverflow.com/questions/54679188/trying-to-solve-sudoku-with-cvxpy", "title": "Trying to solve Sudoku with cvxpy", "body": "<p>I'm trying to solve a Sudoku with <code>cvxpy</code> optimization package. \nI'm really new to both optimization and cvxpy. </p>\n\n<p>The constraints are: </p>\n\n<ol>\n<li>all the values are between 1 to 9</li>\n<li>sum of all rows = 45</li>\n<li>sum of all columns = 45</li>\n<li>sum of all squares = 45</li>\n<li>the given numbers (I'm trying to solve a 17-clues Sudoku). </li>\n</ol>\n\n<p>So, here is my code: </p>\n\n<pre><code>from cvxpy import *\nimport numpy as np\n\nx = Variable((9, 9), integer=True)\nobj = Minimize(sum(x)) #whatever, if the constrains are fulfilled it will be fine \nconst = [x &gt;= 1, #all values should be &gt;= 1\n         x &lt;= 9, #all values should be &lt;= 9\n         sum(x, axis=0) == 45,  # sum of all rows should be 45\n         sum(x, axis=1) == 45,  # sum of all cols should be 45\n         sum(x[0:3, 0:3]) == 45, sum(x[0:3, 3:6]) == 45, #sum of all squares should be 45\n         sum(x[0:3, 6:9]) == 45,\n         sum(x[3:6, 0:3]) == 45, sum(x[3:6, 3:6]) == 45,\n         sum(x[3:6, 6:9]) == 45,\n         sum(x[6:9, 0:3]) == 45, sum(x[6:9, 3:6]) == 45,\n         sum(x[6:9, 6:9]) == 45,\n         x[0, 7] == 7, #the values themselves\n         x[0, 8] == 1,\n         x[1, 1] == 6,\n         x[1, 4] == 3,\n         x[2, 4] == 2,\n         x[3, 0] == 7,\n         x[3, 4] == 6,\n         x[3, 6] == 3,\n         x[4, 0] == 4,\n         x[4, 6] == 2,\n         x[5, 0] == 1,\n         x[5, 3] == 4,\n         x[6, 3] == 7,\n         x[6, 5] == 5,\n         x[6, 7] == 8,\n         x[7, 1] == 2,\n         x[8, 3] == 1]\n\nprob = Problem(objective=obj, constraints=const)\nprob.solve()\n</code></pre>\n\n<p>What I get from cvxpy is </p>\n\n<pre><code>prob.status\nOut[2]: 'infeasible_inaccurate'\n</code></pre>\n\n<p>This is for sure a valid Sudoku, and I checked the numbers million times. </p>\n\n<p>Why am I not getting the answer?</p>\n\n<p>Any help would be appreciated! </p>\n"}, {"tags": ["python", "pandas", "dataframe", "lambda", "apply"], "comments": [{"owner": {"reputation": 655, "user_id": 9345938, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XVV2JO7Xl1M/AAAAAAAAAAI/AAAAAAAAFus/a44EGq2HBC0/photo.jpg?sz=128", "display_name": "Aureliano Guedes", "link": "https://stackoverflow.com/users/9345938/aureliano-guedes"}, "edited": false, "score": 0, "creation_date": 1550091262, "post_id": 54679162, "comment_id": 96147386, "body": "I think the column needs to be passed to apply function <code>df.apply( function(x): x[&#39;lat&#39;][0] )</code>. like <a href=\"https://stackoverflow.com/questions/37428218/how-to-properly-apply-a-lambda-function-into-a-pandas-data-frame-column\">here</a>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550091643, "post_id": 54679162, "comment_id": 96147547, "body": "Last time I tried to work with json normalized DFs I thought my head was going to explode."}, {"owner": {"reputation": 758, "user_id": 4168399, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c51d6c4473126f12ad667d0dc76793b5?s=128&d=identicon&r=PG&f=1", "display_name": "kudeh", "link": "https://stackoverflow.com/users/4168399/kudeh"}, "edited": false, "score": 0, "creation_date": 1550091984, "post_id": 54679162, "comment_id": 96147690, "body": "what&#39;s the result for <code>print(df[&#39;coordinates&#39;].dtype)</code>"}, {"owner": {"reputation": 641, "user_id": 9519968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28778103cf62fb400244ae0a3c353365?s=128&d=identicon&r=PG&f=1", "display_name": "prime90", "link": "https://stackoverflow.com/users/9519968/prime90"}, "reply_to_user": {"reputation": 758, "user_id": 4168399, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c51d6c4473126f12ad667d0dc76793b5?s=128&d=identicon&r=PG&f=1", "display_name": "kudeh", "link": "https://stackoverflow.com/users/4168399/kudeh"}, "edited": false, "score": 0, "creation_date": 1550094628, "post_id": 54679162, "comment_id": 96148861, "body": "@kudeh it returns <code>object</code>"}], "answers": [{"comments": [{"owner": {"reputation": 641, "user_id": 9519968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28778103cf62fb400244ae0a3c353365?s=128&d=identicon&r=PG&f=1", "display_name": "prime90", "link": "https://stackoverflow.com/users/9519968/prime90"}, "edited": false, "score": 0, "creation_date": 1550094524, "post_id": 54679293, "comment_id": 96148823, "body": "still receiving <code>TypeError: &#39;float&#39; object is not subscriptable</code>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 641, "user_id": 9519968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28778103cf62fb400244ae0a3c353365?s=128&d=identicon&r=PG&f=1", "display_name": "prime90", "link": "https://stackoverflow.com/users/9519968/prime90"}, "edited": false, "score": 0, "creation_date": 1550094705, "post_id": 54679293, "comment_id": 96148885, "body": "@prime90 I used your exact json snippet, just added an extra <code>}</code> to make it valid.. Are you sure you&#39;re not mixing up <code>df</code> and <code>df_modified</code>? This code works fine for me so I can&#39;t do much if I can&#39;t reproduce :/"}, {"owner": {"reputation": 641, "user_id": 9519968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28778103cf62fb400244ae0a3c353365?s=128&d=identicon&r=PG&f=1", "display_name": "prime90", "link": "https://stackoverflow.com/users/9519968/prime90"}, "edited": false, "score": 0, "creation_date": 1550109115, "post_id": 54679293, "comment_id": 96153089, "body": "So the problem was I had a missing data in coordinates! I should have checked beforehand. Your solution worked perfectly. Thank you."}], "tags": [], "owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "is_accepted": true, "score": 0, "last_activity_date": 1550091428, "creation_date": 1550091428, "answer_id": 54679293, "question_id": 54679162, "link": "https://stackoverflow.com/questions/54679162/how-to-correctly-use-applylambda-x-on-dataframe-column/54679293#54679293", "title": "How to correctly use .apply(lambda x:) on dataframe column", "body": "<p>You can do it the other way around. Take the <code>lat</code> and <code>long</code> prior to filtering the columns.</p>\n\n<pre><code>import pandas as pd\n\nimport json\n\nwith open('sample.json') as infile:\n    data = json.load(infile)\n\ndf = pd.io.json.json_normalize(data)\n\ndf.rename(columns={'lat_long.coordinates': 'coordinates'}, inplace=True)\ndf['lat'] = df['coordinates'].apply(lambda x: x[0])\ndf['long'] = df['coordinates'].apply(lambda x: x[1])\n\n# Created a new data frame with seleted columns\ndf_modified = df.loc[:, ['county_name', 'arrests', 'incident_count', 'lat', \n                         'long']]\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 9519968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28778103cf62fb400244ae0a3c353365?s=128&d=identicon&r=PG&f=1", "display_name": "prime90", "link": "https://stackoverflow.com/users/9519968/prime90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2150, "favorite_count": 0, "accepted_answer_id": 54679293, "answer_count": 1, "score": 1, "last_activity_date": 1550091556, "creation_date": 1550090864, "last_edit_date": 1550091556, "question_id": 54679162, "link": "https://stackoverflow.com/questions/54679162/how-to-correctly-use-applylambda-x-on-dataframe-column", "title": "How to correctly use .apply(lambda x:) on dataframe column", "body": "<p>The issue I'm having is an error Im receiving from <code>df_modified['lat'] = df.coordinates.apply(lambda x: x[0])</code>     It returns error <code>TypeError: 'float' object is not subscriptable</code>. Since \"coordinates\" is already a list (see JSON SNIPPET) I was trying to use lambda to pull out the element <code>[0]</code> and place it in a new column named \"lat\" and place element <code>[1]</code> in a new column named \"long\". Any help with this problem would be appreciated. Thank you!</p>\n\n<pre><code>import pandas as pd\nimport json\nimport requests\nfrom pandas.io.json import json_normalize\n\n# READS IN JSON\nsource = requests.get('www.url.com')\ndata = json.loads(source.text)\n\n# Flattens the JSON data since it had nested dictionaries\ndf = pd.io.json.json_normalize(data)\n\n# Renamed \"lat_long.coordinates\" because the \".\" was confusing .apply() function\ndf.rename(columns={'lat_long.coordinates': 'coordinates'}, inplace=True)\n\n# Created a new data frame with seleted columns\ndf_modified = df.loc[:, ['county_name', 'arrests', 'incident_count']]\n\n# Attempt to create a new column \"lat\" and \"long\" and place the elemnts accordingly  i.e. [-75.802503,  41.820569]\ndf_modified['lat'] = df.coordinates.apply(lambda x: x[0])\ndf_modified['long'] = df.coordinates.apply(lambda x: x[1])\n\nprint(df_modified.head(30))\n</code></pre>\n\n<p><strong>SAMPLE JSON SNIPPET</strong></p>\n\n<pre><code>{\n    \":@computed_region_amqz_jbr4\": \"587\",\n    \":@computed_region_d3gw_znnf\": \"18\",\n    \":@computed_region_nmsq_hqvv\": \"55\",\n    \":@computed_region_r6rf_p9et\": \"36\",\n    \":@computed_region_rayf_jjgk\": \"295\",\n    \"arrests\": \"1\",\n    \"county_code\": \"44\",\n    \"county_code_text\": \"44\",\n    \"county_name\": \"Mifflin\",\n    \"fips_county_code\": \"087\",\n    \"fips_state_code\": \"42\",\n    \"incident_count\": \"1\",\n    \"lat_long\": {\n      \"type\": \"Point\",\n      \"coordinates\": [\n        -77.620031,\n        40.612749\n      ]\n    }\n</code></pre>\n"}, {"tags": ["python", "pandas", "machine-learning", "decision-tree"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1550092723, "post_id": 54679131, "comment_id": 96148024, "body": "If your predict function is set up to output only a prediction, then could you conceivably use <code>df.apply()</code> to apply it to all rows in your df?"}, {"owner": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1550092935, "post_id": 54679131, "comment_id": 96148105, "body": "@G.Anderson First thank you for your answer. Could you please show me an example also there&#39;s one thing to know I&#39;ve told in the post but didn&#39;t asked for, as my prediction runs X is reduced to the number of options taken I need to merge the return into one final dataframe. Many thanks in advance"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1550093337, "post_id": 54679131, "comment_id": 96148276, "body": "I apologize, but I don&#39;t really understand your phrasing. You mean that you are modifying the original DF as part of the model training process? Because that may not be the best option. For example, the sklearn decision tree models store a fitted decision tree based on the data as an object, then the <code>predict</code> method just takes the features as inputs, and outputs a single prediction (X in, y out)"}, {"owner": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1550093621, "post_id": 54679131, "comment_id": 96148422, "body": "@G.Anderson lol my turn to not understand. Let me explain. What I do is create a tree (linked list of nodes with particular logic) so if I get <code>a</code> after splitting on <code>x1</code> then I go to leaf node or another split. Not sure if sklearn does the same thing but you know that&#39;s just the way I&#39;ve builded the whole thing. Looks similar as what you&#39;ve described though"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1550094502, "post_id": 54679131, "comment_id": 96148817, "body": "I&#39;ll admit, this may be a bit over my head, haha, but if you want to see how it&#39;s done in the most commonly used package, you can look at the <code>predict</code> functions defined in the source at <a href=\"https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/tree/tree.py\" rel=\"nofollow noreferrer\">github.com/scikit-learn/scikit-learn/blob/master/sklearn/tre&zwnj;&#8203;e/&hellip;</a>. Not sure if it will be helpful or not"}, {"owner": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1550094825, "post_id": 54679131, "comment_id": 96148936, "body": "@G.Anderson thank you for the link. But if your comment with the &#39;apply&#39; solution works please add it as answer and be sure I&#39;ll upvote and mark it as answered. Best."}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 1, "creation_date": 1550095436, "post_id": 54679131, "comment_id": 96149202, "body": "Added possible answer, may or may not be what you&#39;re looking for!"}, {"owner": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1550095640, "post_id": 54679131, "comment_id": 96149274, "body": "@thank you I&#39;ll mark is as answered if I don&#39;t get any other answers. It doesn&#39;t really answered in the way I though but still good to know about <code>apply</code>"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1550096105, "post_id": 54679131, "comment_id": 96149453, "body": "An upvote is good enough, if it doesn&#39;t actually answer the question then don&#39;t feel the need to accept the answer. Better to have no answer than a wrong one."}, {"owner": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1550096169, "post_id": 54679131, "comment_id": 96149469, "body": "Okay thank you very much mind for a chat so I can I can show you my code?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1550097896, "post_id": 54679131, "comment_id": 96150067, "body": "I&#39;m afraid I won&#39;t have dedicated time for a chat. Apologies!"}, {"owner": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1550099890, "post_id": 54679131, "comment_id": 96150732, "body": "@G.Anderson No problem thanks anyway you really helped me ;)"}], "answers": [{"comments": [{"owner": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "edited": false, "score": 0, "creation_date": 1550095459, "post_id": 54680157, "comment_id": 96149215, "body": "Thanks is this possible to create a new dataframe with apply?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "reply_to_user": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "edited": false, "score": 0, "creation_date": 1550095625, "post_id": 54680157, "comment_id": 96149273, "body": "No, this is meant to be used on the original training dataframe, and maintain the existing indices"}, {"owner": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "edited": false, "score": 0, "creation_date": 1550095674, "post_id": 54680157, "comment_id": 96149285, "body": "and you don&#39;t see how I could keep original index and create a new dataFrame?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "reply_to_user": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "edited": false, "score": 0, "creation_date": 1550095986, "post_id": 54680157, "comment_id": 96149400, "body": "That is difficult to know without seeing what is happening in the background of your whole model training script, which is outside the scope for stackoverflow. If you want to create a new DF with the indices of the old one, then you could get the indices with <code>df.index</code> as you bring in the data and keep that index as a node attribute, maybe, then return that with your prediction and <code>pd.concat</code> the predictions together"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "reply_to_user": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "edited": false, "score": 0, "creation_date": 1550096022, "post_id": 54680157, "comment_id": 96149417, "body": "If you have something that mostly works but you want to do it better, you may look into <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}], "tags": [], "owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "is_accepted": false, "score": 1, "last_activity_date": 1550095393, "creation_date": 1550095393, "answer_id": 54680157, "question_id": 54679131, "link": "https://stackoverflow.com/questions/54679131/how-can-i-create-an-indexed-dataframe-after-predicting-values-in-decision-tree/54680157#54680157", "title": "How can I create an indexed dataframe after predicting values in decision tree", "body": "<p>Based on comments, I'm not sure if there is enough information to go on. But, if you <code>dt_predict</code> function only outputs a single prediction based on a single row of input features, then it could be used to add a predictions column back to your original dataframe like the following:</p>\n\n<pre><code>def dt_predict(df_row):\n    features=df_row.values\n    #magic goes here to predict based on features\n    return predicted_class\n\ndf['prediction']=df.apply(dt_predict, axis=1)\n</code></pre>\n"}], "owner": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550095393, "creation_date": 1550090740, "last_edit_date": 1592644375, "question_id": 54679131, "link": "https://stackoverflow.com/questions/54679131/how-can-i-create-an-indexed-dataframe-after-predicting-values-in-decision-tree", "title": "How can I create an indexed dataframe after predicting values in decision tree", "body": "<p>I'm creating a decision tree algorithm</p>\n<p>I have 4 features with 4 possible values on each ('a', 'b', 'c', 'd')</p>\n<p>Y (the predicted values) can be 0 or 1 or 2</p>\n<p>I have one function to build the tree then I use a predict function (I'm building it for the moment so I don't post the code) to predict values based on that decision tree.</p>\n<p>Here is the prototype of my function</p>\n<pre><code>def dt_predict(x, features_label, tree):\n</code></pre>\n<p>where:</p>\n<ul>\n<li><code>x</code> is the pandas DataFrame containing all the datas (4 columns of 4 possible values each)</li>\n<li><code>features_label</code> are the title of each data columns</li>\n<li><code>tree</code> is the trained decision tree a (kind of a linked list of node class)</li>\n</ul>\n<p><code>node</code> class:</p>\n<pre><code>class node:\n    def __init__(self):\n        self.level = 0\n        self.option = &quot;&quot;\n        self.feature = &quot;&quot;\n        self.is_leaf_node = False\n        self.is_pure_node = False\n        self.max_value_item = &quot;&quot;\n        self.max_value = 0\n        self.possible_values_names = []\n        self.possible_values_nodes = []\n</code></pre>\n<p>All of this was to give you an overall idea of the problem.\nNow my problem is not how to predict this or that value but more how to keep track of the indexes.</p>\n<p>In my predict function I'm going through all of the tree (nodes) and successively reducing <code>x</code> DataFrame I'm passing as argument. So I always have the index of each rows of datas but don't know how to create and paste on a new pandas dataFrame the y and index value.</p>\n<pre><code>def dt_predict(x, features_label, tree):\n   if tree.is_leaf_node == True:\n       #return new pandas dataframe with x indexes and tree.max_value_item (in this case 0 or 1 or 2)\n   #loop through possible values, filter x and call dt_predict recursively\n   ...\n</code></pre>\n<p>Please let me know if that's not clear.</p>\n<p><strong>EDIT:</strong></p>\n<p>to be more clearer imagine I have</p>\n<pre><code>index | x1 | x2 | x3 | x4 |\n 123  |  a |  c | a  |  b |\n ...\n 35   |  b |  d | a  |  a |\n</code></pre>\n<p>I want it to be:</p>\n<pre><code>index |  Y |\n 123  |  2 |\n ...\n 35   |  2 |\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 1, "creation_date": 1550090760, "post_id": 54679127, "comment_id": 96147168, "body": "<code>for i in range.....</code> you forgot <code>in</code> between <code>i</code> and <code>range</code>"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1550090831, "post_id": 54679127, "comment_id": 96147193, "body": "You&#39;re missing <code>in</code> between <code>i</code> and <code>range</code>.  The question is asking &quot;what output will be produced by this code&quot;?"}, {"owner": {"reputation": 1870, "user_id": 6301806, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/AfP7H.png?s=128&g=1", "display_name": "WilliamNHarvey", "link": "https://stackoverflow.com/users/6301806/williamnharvey"}, "edited": false, "score": 0, "creation_date": 1550090986, "post_id": 54679127, "comment_id": 96147272, "body": "2, 2+4=6, 2+4+4=10"}], "answers": [{"tags": [], "owner": {"reputation": 934, "user_id": 4317250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xvtAr.jpg?s=128&g=1", "display_name": "Steve Boyd", "link": "https://stackoverflow.com/users/4317250/steve-boyd"}, "is_accepted": false, "score": 2, "last_activity_date": 1550090881, "creation_date": 1550090881, "answer_id": 54679167, "question_id": 54679127, "link": "https://stackoverflow.com/questions/54679127/python-school-quiz-values-will-this-code-print/54679167#54679167", "title": "Python school quiz values will this code print", "body": "<p>You are missing the 'in' keyword.</p>\n\n<pre><code>for i in range(2, 12, 4):\n     print(i)\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>2\n6\n10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 9554986, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CRZogb5HAUQ/AAAAAAAAAAI/AAAAAAAABnQ/AwMYn2PeFTw/photo.jpg?sz=128", "display_name": "Mostafa Lotfi", "link": "https://stackoverflow.com/users/9554986/mostafa-lotfi"}, "is_accepted": false, "score": 0, "last_activity_date": 1550091268, "creation_date": 1550091268, "answer_id": 54679258, "question_id": 54679127, "link": "https://stackoverflow.com/questions/54679127/python-school-quiz-values-will-this-code-print/54679258#54679258", "title": "Python school quiz values will this code print", "body": "<p>You need to use the \"in\" key word in your for loop. That way you can properly print out the numbers in range 2 to 11 with a spacing of 4</p>\n\n<p>for i in range(2,12,4):\n    print(i)</p>\n\n<p>2\n6\n10</p>\n"}], "owner": {"reputation": 11, "user_id": 7465497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116bfb47d94ebd9f79738a50b55c3e8b?s=128&d=identicon&r=PG&f=1", "display_name": "Connor Bagel", "link": "https://stackoverflow.com/users/7465497/connor-bagel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1550130071, "answer_count": 2, "score": -1, "last_activity_date": 1550091268, "creation_date": 1550090729, "last_edit_date": 1550090794, "question_id": 54679127, "link": "https://stackoverflow.com/questions/54679127/python-school-quiz-values-will-this-code-print", "closed_reason": "Not suitable for this site", "title": "Python school quiz values will this code print", "body": "<p>What values will this code print?  (use a comma separated list of values, like 1, 2, 3, 4)</p>\n\n<pre><code>for i range(2, 12, 4):\n     print(i)\n</code></pre>\n\n<p>I don't understand what this question is asking I try and input </p>\n\n<pre><code>for i range(2, 12, 4):\n     print(i)\n</code></pre>\n\n<p>but I keep getting a syntax error.</p>\n\n<p>If anyone could give me an explanation about this it would be much appreciated.</p>\n"}, {"tags": ["python", "keras", "deep-learning", "confusion-matrix"], "comments": [{"owner": {"reputation": 3107, "user_id": 8893595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b27d7c8a34c7abf24ea4499f8757b3f3?s=128&d=identicon&r=PG&f=1", "display_name": "Ashwin Geet D&#39;Sa", "link": "https://stackoverflow.com/users/8893595/ashwin-geet-dsa"}, "edited": false, "score": 0, "creation_date": 1550127690, "post_id": 54679098, "comment_id": 96157794, "body": "Please check out: <a href=\"https://stackoverflow.com/questions/50666091/true-positive-rate-and-false-positive-rate-tpr-fpr-for-multi-class-data-in-py\" title=\"true positive rate and false positive rate tpr fpr for multi class data in py\">stackoverflow.com/questions/50666091/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 126, "user_id": 7549341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8136a0195c3ce44e5f0ad942092875e1?s=128&d=identicon&r=PG&f=1", "display_name": "s.ali", "link": "https://stackoverflow.com/users/7549341/s-ali"}, "edited": false, "score": 0, "creation_date": 1550216451, "post_id": 54692466, "comment_id": 96195043, "body": "Do you mean there will be no values for TN/FN in multi class classification problems? Accuracy for example is (TP+TN)/total. So will that be (TP+0)/total in the case of multi class classification."}], "tags": [], "owner": {"reputation": 899, "user_id": 6231079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2KAgM.png?s=128&g=1", "display_name": "Safvan CK", "link": "https://stackoverflow.com/users/6231079/safvan-ck"}, "is_accepted": false, "score": 0, "last_activity_date": 1550153655, "creation_date": 1550153655, "answer_id": 54692466, "question_id": 54679098, "link": "https://stackoverflow.com/questions/54679098/computing-true-positive-value-from-confusion-matrix-for-multi-class-classificati/54692466#54692466", "title": "Computing true positive value from confusion matrix for multi class classification", "body": "<p>TP-Diagonal elements (302,56,69,34)</p>\n\n<p>FP -[23 102 15],[34 34 340],[34 32 54],[231 89 32]</p>\n\n<p>TN - No vals</p>\n\n<p>FN - No vals</p>\n"}], "owner": {"reputation": 126, "user_id": 7549341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8136a0195c3ce44e5f0ad942092875e1?s=128&d=identicon&r=PG&f=1", "display_name": "s.ali", "link": "https://stackoverflow.com/users/7549341/s-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550153655, "creation_date": 1550090618, "last_edit_date": 1550091773, "question_id": 54679098, "link": "https://stackoverflow.com/questions/54679098/computing-true-positive-value-from-confusion-matrix-for-multi-class-classificati", "title": "Computing true positive value from confusion matrix for multi class classification", "body": "<p>I need to calculate TP, FP, TN and FN values from my confusion matrix for a multi class classification problem.</p>\n\n<p>As I need to get sensitivity and specificity.</p>\n\n<p>Here is what my confusion matrix looks like, I have 4 classes total:</p>\n\n<pre><code>[[302 23 102 15]\n[34 56 34 340]\n[34 32 69 54]\n[231 89 32 34]]\n</code></pre>\n\n<p>Here are parts of my code</p>\n\n<pre><code>#loading data using generator with class mode = categorical\ntest_datagen = ImageDataGenerator(rescale = 1./255)\ntest_set = test_datagen.flow_from_directory('animals/valid/',\ntarget_size=(150,150),class_mode='categorical',batch_size=32)\n\n#compile the model with categorical cross entropy\nmodel.compile(loss='categorical_crossentropy',optimizer=Adam(lr=0.00001),metrics=['accuracy'])\n\n#calculate confusion matrix\ntest_im, test_lbl = next(test_set)\npredections = model.predict(test_im)\npredections = np.argmax(predections, axis = 1)\ntest_lbl = np.argmax(test_lbl, axis = 1)\nconf_mat = confusion_matrix(all_labels, all_predications)\n</code></pre>\n\n<p>Also is it correct that I am using this approach in calculating conduction matrix given that classes are loaded in one hot encoding values because of using class_mode='categorical'in the image generator.</p>\n"}, {"tags": ["python", "idl-programming-language"], "owner": {"reputation": 11, "user_id": 11058775, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TIdsisNttZU/AAAAAAAAAAI/AAAAAAAAAbg/K9_q3s09Yyg/photo.jpg?sz=128", "display_name": "Rachel Frissell", "link": "https://stackoverflow.com/users/11058775/rachel-frissell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550174326, "creation_date": 1550090602, "last_edit_date": 1550174326, "question_id": 54679094, "link": "https://stackoverflow.com/questions/54679094/tick-marks-showing-downhill-on-contour-lines", "title": "Tick marks showing downhill on contour lines", "body": "<p>In IDL, tick marks can be used to show the direction of downhill on contour lines. I cannot find a similar command in python, is one available?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "cpython"], "comments": [{"owner": {"reputation": 160, "user_id": 6529424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AehrV.png?s=128&g=1", "display_name": "eagle33322", "link": "https://stackoverflow.com/users/6529424/eagle33322"}, "edited": false, "score": 0, "creation_date": 1550090653, "post_id": 54679065, "comment_id": 96147122, "body": "Is your interactive shell using the same env as the anaconda env path above?"}, {"owner": {"reputation": 160, "user_id": 6529424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AehrV.png?s=128&g=1", "display_name": "eagle33322", "link": "https://stackoverflow.com/users/6529424/eagle33322"}, "edited": false, "score": 0, "creation_date": 1550090684, "post_id": 54679065, "comment_id": 96147131, "body": "<code>cimport</code> should be <code>import</code>?"}, {"owner": {"reputation": 8385, "user_id": 697911, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1", "display_name": "user697911", "link": "https://stackoverflow.com/users/697911/user697911"}, "reply_to_user": {"reputation": 160, "user_id": 6529424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AehrV.png?s=128&g=1", "display_name": "eagle33322", "link": "https://stackoverflow.com/users/6529424/eagle33322"}, "edited": false, "score": 0, "creation_date": 1550090864, "post_id": 54679065, "comment_id": 96147207, "body": "it has to be &#39;cimport&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 3900, "user_id": 11021886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdDn.jpg?s=128&g=1", "display_name": "jwalton", "link": "https://stackoverflow.com/users/11021886/jwalton"}, "is_accepted": false, "score": 1, "last_activity_date": 1550091725, "last_edit_date": 1550091725, "creation_date": 1550091357, "answer_id": 54679271, "question_id": 54679065, "link": "https://stackoverflow.com/questions/54679065/why-doesnt-my-cython-installation-import/54679271#54679271", "title": "why doesn&#39;t my Cython installation import?", "body": "<p>If you're trying to work in ipython or a jupyter enviornment (which it looks like you are) you'll first need to load the Cython extension : <code>%load_ext Cython</code>. </p>\n\n<p>You then need to use <code>%%cython</code> to define a magic cell in which you can call your cython code:</p>\n\n<pre><code>%%cython\n\nimport numpy as np\ncimport numpy as np\n</code></pre>\n"}], "owner": {"reputation": 8385, "user_id": 697911, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bbc3caf3ef84b005f839e2392cb4eafd?s=128&d=identicon&r=PG&f=1", "display_name": "user697911", "link": "https://stackoverflow.com/users/697911/user697911"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550091725, "creation_date": 1550090470, "question_id": 54679065, "link": "https://stackoverflow.com/questions/54679065/why-doesnt-my-cython-installation-import", "title": "why doesn&#39;t my Cython installation import?", "body": "<p>I want to use Cython, and did the following:</p>\n\n<pre><code>$ pip install Cython\n    Requirement already satisfied: Cython in /anaconda3/envs/learn/lib/python3.6/site-packages (0.27.3)\n</code></pre>\n\n<p>But then it gives this error:</p>\n\n<pre><code>In [1]: cimport numpy as np                                                                                                    \n  File \"&lt;ipython-input-1-9e1f0d02d1fa&gt;\", line 1\n    cimport numpy as np\n                ^\nSyntaxError: invalid syntax\n\n\nIn [2]: \n</code></pre>\n\n<p>After installing, what else needs to be done to use it?</p>\n"}, {"tags": ["python", "numpy", "reshape"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1550094059, "post_id": 54679026, "comment_id": 96148622, "body": "So is this supposed to be a single feature problem, or a single sample?  Do you know the difference?  Let&#39;s also verify what <code>train</code> and <code>test</code> are?. Numpy array or pandas Series?  Shape?  Dtype?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1550094257, "post_id": 54679026, "comment_id": 96148716, "body": "When you get <code>shape</code> errors in <code>numpy</code> (and pandas) you need to check shapes, actual versus expected.  If you don&#39;t know what shape (or at least number of dimensions) an array should have at a specific point in the code, you don&#39;t understand your code.  Is this your own code, or is it from some tutorial or example?"}], "answers": [{"tags": [], "owner": {"reputation": 8205, "user_id": 1397946, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/G8wB1.png?s=128&g=1", "display_name": "Lukasz Tracewski", "link": "https://stackoverflow.com/users/1397946/lukasz-tracewski"}, "is_accepted": false, "score": 0, "last_activity_date": 1550092265, "creation_date": 1550092265, "answer_id": 54679474, "question_id": 54679026, "link": "https://stackoverflow.com/questions/54679026/how-to-use-numpy-reshape/54679474#54679474", "title": "How to use Numpy reshape?", "body": "<p>That's easy: <code>test</code> is empty, hence <code>scaler.transform</code> fails. Change:</p>\n\n<pre><code>split_date = pd.Timestamp('2016-01-01')\n</code></pre>\n\n<p>to e.g. </p>\n\n<pre><code>split_date = pd.Timestamp('2007-01-10')\n</code></pre>\n\n<p>to see it working.</p>\n"}, {"tags": [], "owner": {"reputation": 477, "user_id": 9204838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3982ccfe87d681c62fad41eeff18879c?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Azevedo", "link": "https://stackoverflow.com/users/9204838/carlos-azevedo"}, "is_accepted": true, "score": 1, "last_activity_date": 1550092530, "creation_date": 1550092530, "answer_id": 54679536, "question_id": 54679026, "link": "https://stackoverflow.com/questions/54679026/how-to-use-numpy-reshape/54679536#54679536", "title": "How to use Numpy reshape?", "body": "<p>A solution to your particular case:</p>\n\n<pre><code>train_sc = scaler.fit_transform(train.values.reshape(-1, 1))\ntest_sc = scaler.transform(test.values.reshape(-1, 1))\n</code></pre>\n"}], "owner": {"reputation": 1692, "user_id": 1756071, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/578baa77f5375e293171523314f8771c?s=128&d=identicon&r=PG", "display_name": "Giladbi", "link": "https://stackoverflow.com/users/1756071/giladbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 54679536, "answer_count": 2, "score": 2, "last_activity_date": 1550093557, "creation_date": 1550090295, "last_edit_date": 1550093557, "question_id": 54679026, "link": "https://stackoverflow.com/questions/54679026/how-to-use-numpy-reshape", "title": "How to use Numpy reshape?", "body": "<p>I have this data:</p>\n\n<pre><code>Date,Open,High,Low,Close,Adj Close,Volume\n2007-01-03,12.160000,12.750000,11.530000,12.040000,12.040000,0\n2007-01-04,12.400000,12.420000,11.280000,11.510000,11.510000,0\n2007-01-05,11.840000,12.250000,11.680000,12.140000,12.140000,0\n2007-01-08,12.480000,12.830000,11.780000,12.000000,12.000000,0\n2007-01-09,11.860000,12.470000,11.690000,11.910000,11.910000,0\n2007-01-10,12.340000,12.500000,11.430000,11.470000,11.470000,0\n2007-01-11,11.420000,11.480000,10.500000,10.870000,10.870000,0\n2007-01-12,10.930000,10.930000,10.140000,10.150000,10.150000,0\n2007-01-16,10.640000,10.890000,10.400000,10.740000,10.740000,0\n2007-01-17,10.900000,10.900000,10.350000,10.590000,10.590000,0\n2007-01-18,10.650000,11.040000,10.450000,10.850000,10.850000,0\n2007-01-19,10.800000,11.030000,10.240000,10.400000,10.400000,0\n2007-01-22,10.770000,11.080000,10.620000,10.770000,10.770000,0\n2007-01-23,10.770000,10.940000,10.220000,10.340000,10.340000,0\n</code></pre>\n\n<p>I have this code to run some time series predictions </p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n%matplotlib inline\nimport matplotlib.pyplot as plt\nfrom sklearn.preprocessing import MinMaxScaler\nfrom sklearn.metrics import r2_score\nfrom keras.models import Sequential\nfrom keras.layers import Dense\nfrom keras.callbacks import EarlyStopping\nfrom keras.optimizers import Adam\nfrom keras.layers import LSTM\ndf = pd.read_csv(\"^VIX.csv\")\ndf.drop(['Open', 'High', 'Low', 'Close', 'Volume'], axis=1, inplace=True)\ndf['Date'] = pd.to_datetime(df['Date'])\ndf = df.set_index(['Date'], drop=True)\nsplit_date = pd.Timestamp('2016-01-01')\ndf =  df['Adj Close']\ntrain = df.loc[:split_date]\ntest = df.loc[split_date:]\nplt.figure(figsize=(10, 6))\nax = train.plot()\ntest.plot(ax=ax)\nplt.legend(['train', 'test']);\n</code></pre>\n\n<p>so far so good, yet when running </p>\n\n<pre><code># scale train and test data to [-1, 1]\nscaler = MinMaxScaler(feature_range=(-1, 1))\ntrain_sc = scaler.fit_transform(train)\ntest_sc = scaler.transform(test)\n</code></pre>\n\n<p>I am getting an error:</p>\n\n<blockquote>\n  <p>ValueError: Expected 2D array, got 1D array instead: array=[12.04<br>\n  11.51     12.14     ... 16.08     17.290001 18.209999]. Reshape your data either using array.reshape(-1, 1) if your data has a single\n  feature or array.reshape(1, -1) if it contains a single sample.</p>\n</blockquote>\n\n<p>Although this is the original code, looks like the reshape is not done correct and I  am missing something out with the numpay reshape.</p>\n\n<p>What should I fix in the reshape?\nthanks!</p>\n"}, {"tags": ["python", "string"], "answers": [{"tags": [], "owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "is_accepted": false, "score": 6, "last_activity_date": 1550090559, "last_edit_date": 1550090559, "creation_date": 1550090351, "answer_id": 54679033, "question_id": 54678990, "link": "https://stackoverflow.com/questions/54678990/how-to-tell-if-series-elements-contain-question-mark-in-python/54679033#54679033", "title": "How to tell if series elements contain question mark in Python?", "body": "<p>This <code>contains</code> method expects a regular expression. <a href=\"https://github.com/pandas-dev/pandas/blob/v0.22.0/pandas/core/strings.py#L1564\" rel=\"noreferrer\">You can turn that off</a> by supplying a keyword argument called <code>regex</code>:</p>\n\n<pre><code>df['posttext'].str.contains(\"?\", regex=False)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "edited": false, "score": 2, "creation_date": 1550128153, "post_id": 54679120, "comment_id": 96158044, "body": "This only coincidentally works, you should either double-escape the question mark (<code>&quot;\\\\?&quot;</code>), or use raw strings (<code>r&quot;\\?&quot;</code>)."}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "reply_to_user": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "edited": false, "score": 0, "creation_date": 1550178562, "post_id": 54679120, "comment_id": 96185083, "body": "The <code>regex=False</code> is definitely the best answer anyway, as it&#39;s explicit and self documenting. In this use-case, the single escape worked, so I presented it as is. Thanks for clarifying, definitely informative!"}], "tags": [], "owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "is_accepted": false, "score": 0, "last_activity_date": 1550090696, "creation_date": 1550090696, "answer_id": 54679120, "question_id": 54678990, "link": "https://stackoverflow.com/questions/54678990/how-to-tell-if-series-elements-contain-question-mark-in-python/54679120#54679120", "title": "How to tell if series elements contain question mark in Python?", "body": "<p>You can escape the question mark to force it to look for the literal character</p>\n\n<pre><code>df['posttext'].str.contains(\"\\?\")\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 988638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192fd2e27c0612474394223a0b6c52cc?s=128&d=identicon&r=PG", "display_name": "churchill95", "link": "https://stackoverflow.com/users/988638/churchill95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1243, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1550090797, "creation_date": 1550090150, "last_edit_date": 1550090797, "question_id": 54678990, "link": "https://stackoverflow.com/questions/54678990/how-to-tell-if-series-elements-contain-question-mark-in-python", "title": "How to tell if series elements contain question mark in Python?", "body": "<p>I have a series of text posts (df['posttext']). Each of the rows in this series are strings. I want to know which ones contain a question mark.</p>\n\n<p>When I try</p>\n\n<pre><code>df['posttext'].str.contains(\"?\")\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>error: nothing to repeat at position 0.\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1550090182, "post_id": 54678968, "comment_id": 96146897, "body": "The syntax error is because <code>=</code> is for assignment. <code>==</code> is for checking for equality. <code>if self._Role = &#39;Member&#39;:</code> etc. is not valid."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1550090197, "post_id": 54678968, "comment_id": 96146906, "body": "What&#39;s the point of this class? It doesn&#39;t do anything. How is this better than using a regular string?"}, {"owner": {"reputation": 27, "user_id": 11001659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f4a763a717e84015ca61dade448e671?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/11001659/james-smith"}, "edited": false, "score": 0, "creation_date": 1550090309, "post_id": 54678968, "comment_id": 96146949, "body": "My point is to get,set the class so I could use it in future."}, {"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 0, "creation_date": 1550093781, "post_id": 54678968, "comment_id": 96148501, "body": "<code>@property</code> is what you are looking for"}], "owner": {"reputation": 27, "user_id": 11001659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f4a763a717e84015ca61dade448e671?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/11001659/james-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550090043, "creation_date": 1550090043, "question_id": 54678968, "link": "https://stackoverflow.com/questions/54678968/is-there-any-better-way-to-create-and-edit-classes-class-type-role", "title": "Is there any better way to create, and edit classes? Class type &#39;Role&#39;", "body": "<p>I recently started to learn classes, and here I'm trying to make a class which would perform the Role, let's say we're creating a server, and there's also the users, which do have the permission to do something. And with making the roles, I do get an error of wrong syntax, that my first problem, but I may ask, is the class made well? Could I use them in the future? The default Role, for new account is Member.!</p>\n\n<pre><code>class Role:\n    # ROles Member, Moderator, Admin\n    def __init__(self):\n        self._Role = 'Member'\n\n    def get_role(self):\n        return self._Role\n\n    def set_role(self):\n        self._Role = input(\"~ Please set a role!\")\n        if self._Role = 'Member':\n            self._Role = 'Member'\n        elif self._Role = 'Moderator':\n            self._Role = 'Moderator'\n        elif self._Role = 'Admin':\n            self._Role = 'Admin'\n</code></pre>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 2278, "user_id": 1582331, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9512c113a02d15450aa2da494606bf31?s=128&d=identicon&r=PG&f=1", "display_name": "iyop45", "link": "https://stackoverflow.com/users/1582331/iyop45"}, "edited": false, "score": 0, "creation_date": 1550853097, "post_id": 54678961, "comment_id": 96437584, "body": "I fixed the issue through reinstalling and making sure environment was correct."}, {"owner": {"reputation": 343, "user_id": 9946691, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4JZrZdwkTBs/AAAAAAAAAAI/AAAAAAAAAA8/NdumtdWVSuE/photo.jpg?sz=128", "display_name": "Mouna Ben Chamekh", "link": "https://stackoverflow.com/users/9946691/mouna-ben-chamekh"}, "edited": false, "score": 0, "creation_date": 1551437825, "post_id": 54678961, "comment_id": 96649058, "body": "I&#39;m having the same problem and I&#39;m sure that it&#39;s linked to the environment but I don&#39;t really know which package is causing the problem. Could you give me information about the environment you&#39;re using and where was the problem exactly?"}, {"owner": {"reputation": 2278, "user_id": 1582331, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9512c113a02d15450aa2da494606bf31?s=128&d=identicon&r=PG&f=1", "display_name": "iyop45", "link": "https://stackoverflow.com/users/1582331/iyop45"}, "reply_to_user": {"reputation": 343, "user_id": 9946691, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4JZrZdwkTBs/AAAAAAAAAAI/AAAAAAAAAA8/NdumtdWVSuE/photo.jpg?sz=128", "display_name": "Mouna Ben Chamekh", "link": "https://stackoverflow.com/users/9946691/mouna-ben-chamekh"}, "edited": false, "score": 0, "creation_date": 1552073581, "post_id": 54678961, "comment_id": 96887246, "body": "@MounaBenChamekh Are you using the nightly build?"}, {"owner": {"reputation": 343, "user_id": 9946691, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4JZrZdwkTBs/AAAAAAAAAAI/AAAAAAAAAA8/NdumtdWVSuE/photo.jpg?sz=128", "display_name": "Mouna Ben Chamekh", "link": "https://stackoverflow.com/users/9946691/mouna-ben-chamekh"}, "edited": false, "score": 0, "creation_date": 1552300775, "post_id": 54678961, "comment_id": 96942944, "body": "no, but the problem for me was that another package installed a dependency but the version was not the good one. I specified the required version and it&#39;s solved. Thank you!"}], "owner": {"reputation": 2278, "user_id": 1582331, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9512c113a02d15450aa2da494606bf31?s=128&d=identicon&r=PG&f=1", "display_name": "iyop45", "link": "https://stackoverflow.com/users/1582331/iyop45"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1103, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1550095150, "creation_date": 1550090000, "last_edit_date": 1550095150, "question_id": 54678961, "link": "https://stackoverflow.com/questions/54678961/tf-sessionrun-wrapper-expected-all-values-in-input-dict-to-be-ndarray", "title": "TF_SessionRun_wrapper: expected all values in input dict to be ndarray", "body": "<p>I don't think I've ever had this error before and I don't really understand what it is saying. Even in a simple test case (shown below), I run into this error.</p>\n\n<p>This is specifically on one machine, but not on other computers. So, I think it must be a configuration/setup problem? I am not quite sure how to progress...</p>\n\n<p>If there are any hints/If anyone has run into this error before, it would be great to know especially considering there is no information about it online.</p>\n\n<p>I am using Tensorflow version <code>1.13.0-dev20190208</code> (GPU nightly build) with CUDA 10.</p>\n\n<pre><code>import tensorflow as tf\nimport numpy as np\n\ndef multiply(input):\n    return (input * 3)\n\ninput_pl = tf.placeholder(dtype=tf.float32, shape=(3,), name='input_pl')\nout = multiply(input_pl)\n\nwith tf.Session() as sess:\n    sess.run(tf.global_variables_initializer())\n\n    np_input  = np.array([1, 0, 0])\n    out_np = sess.run([out], {input_pl: np_input}) # Error here\n\n    print(out_np)\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1550090071, "post_id": 54678947, "comment_id": 96146840, "body": "Why do you have spaces between almost everything? This is more difficult to read than you might expect."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1550090732, "post_id": 54678947, "comment_id": 96147153, "body": "Per PEP-8, <code>print(&#39;e&#39;, end=&#39;&#39;)</code> would be an example of the preferred spacing."}, {"owner": {"reputation": 7505, "user_id": 945456, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cd711ee0ecdbc3428ff301a7961b1003?s=128&d=identicon&r=PG", "display_name": "Jeff B", "link": "https://stackoverflow.com/users/945456/jeff-b"}, "edited": false, "score": 1, "creation_date": 1550096757, "post_id": 54678947, "comment_id": 96149697, "body": "By the way, the code sample you provided won&#39;t run as-is due to things like <code>sayNoLigne</code> vs <code>sayNoLine</code>, <code>+ =</code>, and some missing functions like <code>att</code>, <code>getTime</code>, and <code>ranlen</code>. Please make sure to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in the future."}], "answers": [{"tags": [], "owner": {"reputation": 934, "user_id": 4317250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xvtAr.jpg?s=128&g=1", "display_name": "Steve Boyd", "link": "https://stackoverflow.com/users/4317250/steve-boyd"}, "is_accepted": true, "score": 2, "last_activity_date": 1550090165, "creation_date": 1550090165, "answer_id": 54678993, "question_id": 54678947, "link": "https://stackoverflow.com/questions/54678947/how-can-i-create-code-for-print-slower-in-python/54678993#54678993", "title": "How can I create code for print slower in Python", "body": "<p>As of Python 3.3 you can add <code>flush=True</code> to your print calls. For example:</p>\n\n<pre><code>print('e', end='', flush=True)\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 11058663, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rY1_JNwlkrc/AAAAAAAAAAI/AAAAAAAAAaE/swAkE8I_wT4/photo.jpg?sz=128", "display_name": "Inlife and you too.", "link": "https://stackoverflow.com/users/11058663/inlife-and-you-too"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 54678993, "answer_count": 1, "score": -1, "last_activity_date": 1550441489, "creation_date": 1550089961, "last_edit_date": 1550441489, "question_id": 54678947, "link": "https://stackoverflow.com/questions/54678947/how-can-i-create-code-for-print-slower-in-python", "title": "How can I create code for print slower in Python", "body": "<p>I created these functions, but they do not work, even with the sayNoLine function defined like the following:</p>\n\n<pre><code>def sayNoLine (x):\n     print (x, end = '')\n\ndef sayNoLine (x):\n     sys.stdout.write (x)\n\ndef printSlowly (* args, Thetime = 0.5):\n     tt = getTime ()\n     txt = ''\n     for i in ranlen (args):\n         txt + = str (args [i])\n     print ('first time: {0}'. format (tt-getTime ()))\n     for time in ranlen (txt):\n         sayNoLigne (txt [time])\n         att (thetime)\n     print ()\n     print ('second time: {0}'. format (getTime () - tt))\n</code></pre>\n\n<p>each time the code was waiting for the print () function (so with a line break) before displaying the text it is:</p>\n\n<pre><code>print ( 't' end = '')\n# output:\nprint ( 'e', end = '')\n# output:\nprint ( 's' end = '')\n# output:\nprint ( 't' end = '')\n# output:\nprint ()\n# output: test\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1429, "user_id": 5963631, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4gxvE.png?s=128&g=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/5963631/jonas"}, "edited": false, "score": 0, "creation_date": 1550216226, "post_id": 54678931, "comment_id": 96194961, "body": "did my answer work for you?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1550251567, "post_id": 54678931, "comment_id": 96214176, "body": "<a href=\"https://en.wikipedia.org/wiki/Maximum_subarray_problem#Kadane&#39;s_algorithm\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}, {"owner": {"reputation": 1429, "user_id": 5963631, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4gxvE.png?s=128&g=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/5963631/jonas"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1550605609, "post_id": 54678931, "comment_id": 96327677, "body": "Thanks @user2357112, I was sure it was combinatorial."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 10872871, "user_type": "registered", "profile_image": "https://graph.facebook.com/2284570864888420/picture?type=large", "display_name": "Nektarios Papagewrgiou", "link": "https://stackoverflow.com/users/10872871/nektarios-papagewrgiou"}, "edited": false, "score": 0, "creation_date": 1550242087, "post_id": 54679154, "comment_id": 96208892, "body": "Thanks a lot man , it worked like a charm .  I  only want ot ask now how can we change the default List of A , with a list that we&#39;re going to give to the program on every iteration. Thanks a lot !"}, {"owner": {"reputation": 57, "user_id": 10872871, "user_type": "registered", "profile_image": "https://graph.facebook.com/2284570864888420/picture?type=large", "display_name": "Nektarios Papagewrgiou", "link": "https://stackoverflow.com/users/10872871/nektarios-papagewrgiou"}, "edited": false, "score": 0, "creation_date": 1550243881, "post_id": 54679154, "comment_id": 96210050, "body": "Also i&#39;d like to contain the whole code under a maxSequence() function ."}], "tags": [], "owner": {"reputation": 1429, "user_id": 5963631, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4gxvE.png?s=128&g=1", "display_name": "Jonas", "link": "https://stackoverflow.com/users/5963631/jonas"}, "is_accepted": true, "score": 2, "last_activity_date": 1550605270, "last_edit_date": 1550605270, "creation_date": 1550090842, "answer_id": 54679154, "question_id": 54678931, "link": "https://stackoverflow.com/questions/54678931/how-to-return-a-s-that-has-the-maximum-sum-value-in-the-list/54679154#54679154", "title": "How to return a s that has the maximum Sum value in the list", "body": "<p><s>You have to brute force it.</s>\nEdit: There are faster <a href=\"https://en.wikipedia.org/wiki/Maximum_subarray_problem#Kadane&#39;s_algorithm\" rel=\"nofollow noreferrer\">algorithms</a> than my brute force solution. (thanks @<a href=\"https://stackoverflow.com/users/2357112/user2357112\">user2357112</a>\n)</p>\n\n<p>Construct all sublists and check which has the biggest sum. To construct all sublists start at <code>start=0</code> and <code>end=start+1</code>, then increase <code>end</code> until the result is the whole list, repeat that step with an increased <code>start</code> etc:</p>\n\n<pre><code>a = [-2, 1, -3, 4, -1, 2, 1, -5, 4]\n\nmax = sum(a)\nl = a[:]\nfor start in range(len(a)):\n    for end in range(start, len(a)):\n        s = sum(a[start:end+1])\n        if s &gt; max:\n            max = s\n            l = a[start:end+1]\nprint(max, l)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>6 [4, -1, 2, 1]\n</code></pre>\n\n<p>The lists you check are (in that order): </p>\n\n<pre><code>[-2]\n[-2, 1]\n[-2, 1, -3]\n[-2, 1, -3, 4]\n[-2, 1, -3, 4, -1]\n[-2, 1, -3, 4, -1, 2]\n[-2, 1, -3, 4, -1, 2, 1]\n[-2, 1, -3, 4, -1, 2, 1, -5]\n[-2, 1, -3, 4, -1, 2, 1, -5, 4]\n[1]\n[1, -3]\n[1, -3, 4]\n[1, -3, 4, -1]\n[1, -3, 4, -1, 2]\n[1, -3, 4, -1, 2, 1]\n[1, -3, 4, -1, 2, 1, -5]\n[1, -3, 4, -1, 2, 1, -5, 4]\n[-3]\n[-3, 4]\n[-3, 4, -1]\n[-3, 4, -1, 2]\n[-3, 4, -1, 2, 1]\n[-3, 4, -1, 2, 1, -5]\n[-3, 4, -1, 2, 1, -5, 4]\n[4]\n[4, -1]\n[4, -1, 2]\n[4, -1, 2, 1]\n[4, -1, 2, 1, -5]\n[4, -1, 2, 1, -5, 4]\n[-1]\n[-1, 2]\n[-1, 2, 1]\n[-1, 2, 1, -5]\n[-1, 2, 1, -5, 4]\n[2]\n[2, 1]\n[2, 1, -5]\n[2, 1, -5, 4]\n[1]\n[1, -5]\n[1, -5, 4]\n[-5]\n[-5, 4]\n[4]\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 10872871, "user_type": "registered", "profile_image": "https://graph.facebook.com/2284570864888420/picture?type=large", "display_name": "Nektarios Papagewrgiou", "link": "https://stackoverflow.com/users/10872871/nektarios-papagewrgiou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 54679154, "answer_count": 1, "score": 0, "last_activity_date": 1550605270, "creation_date": 1550089891, "question_id": 54678931, "link": "https://stackoverflow.com/questions/54678931/how-to-return-a-s-that-has-the-maximum-sum-value-in-the-list", "title": "How to return a s that has the maximum Sum value in the list", "body": "<p>I need to create a maxSequence() function ,that has a user input for a list and  it  takes the input  list as an argument and it returns a sublist whose values sequence gibve us the maximum sum in the list . </p>\n\n<p>So if we call the maxSequence([-2, 1, -3, 4, -1, 2, 1, -5, 4]).\nIt should return  :  6: [4, -1, 2, 1]</p>\n"}, {"tags": ["python", "windows", "game-theory"], "comments": [{"owner": {"reputation": 724, "user_id": 7018323, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kQFMt.jpg?s=128&g=1", "display_name": "Kartikey Singh", "link": "https://stackoverflow.com/users/7018323/kartikey-singh"}, "edited": false, "score": 0, "creation_date": 1550156481, "post_id": 54678910, "comment_id": 96174150, "body": "<code>Gambit 13</code> has a <code>.msi</code> extension software for windows on <code>SourceForge</code>"}, {"owner": {"reputation": 323, "user_id": 3965445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db2e32bf97dbae567409682a49710214?s=128&d=identicon&r=PG&f=1", "display_name": "theresawalrus", "link": "https://stackoverflow.com/users/3965445/theresawalrus"}, "reply_to_user": {"reputation": 724, "user_id": 7018323, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kQFMt.jpg?s=128&g=1", "display_name": "Kartikey Singh", "link": "https://stackoverflow.com/users/7018323/kartikey-singh"}, "edited": false, "score": 0, "creation_date": 1550163991, "post_id": 54678910, "comment_id": 96178781, "body": "@KartikeySingh Which version? 13.0.0 thru 13.1.2 are available. Also, are you saying that the python extension is on the same msi as the gambit main profile?"}, {"owner": {"reputation": 323, "user_id": 3965445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db2e32bf97dbae567409682a49710214?s=128&d=identicon&r=PG&f=1", "display_name": "theresawalrus", "link": "https://stackoverflow.com/users/3965445/theresawalrus"}, "reply_to_user": {"reputation": 724, "user_id": 7018323, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kQFMt.jpg?s=128&g=1", "display_name": "Kartikey Singh", "link": "https://stackoverflow.com/users/7018323/kartikey-singh"}, "edited": false, "score": 0, "creation_date": 1550167369, "post_id": 54678910, "comment_id": 96180390, "body": "@KartikeySingh <code>Gambit 15</code> also has a <code>.msi</code> software. Installing Gambit isn&#39;t the problem. The problem is going from that to installing the api module for Python."}], "owner": {"reputation": 323, "user_id": 3965445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db2e32bf97dbae567409682a49710214?s=128&d=identicon&r=PG&f=1", "display_name": "theresawalrus", "link": "https://stackoverflow.com/users/3965445/theresawalrus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550154875, "creation_date": 1550089805, "last_edit_date": 1550154875, "question_id": 54678910, "link": "https://stackoverflow.com/questions/54678910/cant-install-gambit-python-api-on-windows", "title": "Can&#39;t install gambit python api on windows", "body": "<p>I am trying to use gambit to look at game theory. I have successfully installed the program gambit from SourceForge. My trouble is with installing the api for python.</p>\n\n<p>First, it isn't the same library you get from using pip. That gambit is a totally different one.</p>\n\n<p>Second, the instructions from <a href=\"http://www.gambit-project.org/gambit13/build.html#build-python\" rel=\"nofollow noreferrer\">here</a> seem out of date, and also I can't find the setup.py files in the gambit folder.</p>\n\n<p>Any advice on how to install this in windows would be helpful.</p>\n"}]