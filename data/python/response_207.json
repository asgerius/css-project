[{"tags": ["python", "web-scraping", "python-requests", "queue"], "answers": [{"tags": [], "owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "is_accepted": true, "score": 2, "last_activity_date": 1545869698, "creation_date": 1545869698, "answer_id": 53938450, "question_id": 53938372, "link": "https://stackoverflow.com/questions/53938372/do-python-request-sessions-detect-when-a-page-automatically-refreshes/53938450#53938450", "title": "Do python-request sessions detect when a page automatically refreshes?", "body": "<p>Requests doesn't interpret the response beyond handling the <code>Location</code> header for redirects. If the page uses a <code>&lt;meta&gt;</code> tag or JavaScript to perform the refresh, you'll have to handle it.</p>\n\n<p>If you want to act like a real browser at the expense of speed and higher resource utilization, use a headless browser like Selenium.</p>\n"}], "owner": {"reputation": 87, "user_id": 10355744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3294f128c74209f7aa44052e6f7814c4?s=128&d=identicon&r=PG&f=1", "display_name": "Epacity", "link": "https://stackoverflow.com/users/10355744/epacity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 53938450, "answer_count": 1, "score": 0, "last_activity_date": 1545869698, "creation_date": 1545868771, "question_id": 53938372, "link": "https://stackoverflow.com/questions/53938372/do-python-request-sessions-detect-when-a-page-automatically-refreshes", "title": "Do python-request sessions detect when a page automatically refreshes?", "body": "<p>I've recently been experimenting with using the request module in Python for webscraping and have a question about when a site automatically refreshes.  For example, if I sent a request to a website and had to wait in a queue because the website had too many people trying to access it at once, how would the requests session handle eventually being redirected to the site?  </p>\n\n<p>Would I be able to do something like:</p>\n\n<pre><code>import requests, time\ns = requests.Session()\nr = s.get('www.example.com')\npassed = 0\nwhile passed == 0:\n    if 'passed' in r.text:\n        print('passed queue!')\n        passed = 1\n    else: \n        print('still in queue')\n        time.sleep(60)\n</code></pre>\n\n<p>Or would I have to do another GET request in order to determine if I passed the queue or not and do something like:</p>\n\n<pre><code>import requests, time\ns = requests.Session()\nr = s.get('http://www.example.com')\npassed = 0\nwhile passed == 0:\n    if 'passed' in r.text:\n        print('passed queue!')\n        passed = 1\n    else: \n        print('still in queue')\n        time.sleep(60)\n        r = s.get('http://www.example.com')\n</code></pre>\n"}, {"tags": ["python", "django"], "owner": {"reputation": 2786, "user_id": 3970455, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0b8facc87555a7f8038453727dd1b2ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Gonzales", "link": "https://stackoverflow.com/users/3970455/omar-gonzales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 451, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1545871936, "creation_date": 1545868252, "last_edit_date": 1545871936, "question_id": 53938317, "link": "https://stackoverflow.com/questions/53938317/django-province-choice-field-dependant-on-state-choicefield", "title": "Django: Province Choice Field dependant on State ChoiceField", "body": "<p>I've a registration form that ask users to choose their department (like USA States), province, and district. In spanish: \"departamento\", \"provincia\", \"distrito\".</p>\n\n<p>I can populate these from our Peru table, that contains this information in three different columns. </p>\n\n<p><strong><em>But I need to limit user's options so they choose a valid combination.</em></strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/1TfFB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1TfFB.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, in the final form Users can choose invalid combinations of \"departamento\", \"province\" and \"distrito\". For example, taking USA cases, a user could select: </p>\n\n<p>-departamento: \"California\".<br>\n-provincia: \"Dallas\".<br>\n-district: \"Carrolton\".     </p>\n\n<p><a href=\"https://i.stack.imgur.com/XOGpO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XOGpO.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>### User Profile ###\n\nclass Profile(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    # birth_date = models.DateField(null=True, blank=True)\n    dni = models.CharField(max_length=30, blank=True)\n    # phone_number = models.CharField(max_length=15, blank=True)\n    shipping_address1 = models.CharField(max_length=100, blank=False)\n    shipping_address2 = models.CharField(max_length=100, blank=False)\n    shipping_department = models.CharField(max_length=100, blank=False)\n    shipping_province = models.CharField(max_length=100, blank=False)\n    shipping_district = models.CharField(max_length=100, blank=False)\n\n\n\n\n@receiver(post_save, sender=User)\ndef update_user_profile(sender, instance, created, **kwargs):\n    if created:\n        Profile.objects.create(user=instance)\n    instance.profile.save()\n\n\nclass Peru(models.Model):\n    departamento = models.CharField(max_length=100, blank=False)\n    provincia = models.CharField(max_length=100, blank=False)\n    distrito = models.CharField(max_length=100, blank=False)\n\n    def __str__(self):\n        return self.departamento + \" - \" + self.provincia + \" - \" + self.distrito\n</code></pre>\n\n<p><strong>forms.py</strong></p>\n\n<pre><code>class ProfileForm(ModelForm):\n\n    def __init__(self, district_list, province_list, department_list, *args, **kwargs):\n        super(ProfileForm, self).__init__(*args, **kwargs)\n        self.fields['shipping_district'] = forms.ChoiceField(choices=tuple([(name, name) for name in district_list]))\n        self.fields['shipping_province'] = forms.ChoiceField(choices=tuple([(name, name) for name in province_list]))\n        self.fields['shipping_department'] = forms.ChoiceField(choices=tuple([(name, name) for name in department_list]))\n\n    dni = forms.CharField(label = 'DNI', max_length=100, required=True)\n    email = forms.EmailField(label = 'Correo electr\u00f3nico', max_length=254, widget=forms.TextInput(attrs={'placeholder': 'micorreo@correo.com'}))\n    cellphone = forms.CharField(label = 'Celular o  tel\u00e9fono', max_length=15, required=True)\n    shipping_address1 = forms.CharField(label = 'Direcci\u00f3n de env\u00edo', max_length=100, required=True)\n    shipping_address2 = forms.CharField(label = 'Direcci\u00f3n de env\u00edo 2 (opcional)', max_length=100, required=False)\n\n    class Meta:\n        model = Profile\n        fields = ('dni',  'email', 'cellphone', 'shipping_address1',\n                  'shipping_address2', 'shipping_department', 'shipping_province', 'shipping_district')\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>@transaction.atomic\n\n\ndef signupView(request):\n    peru = Peru.objects.all()\n    print(peru)\n    department_list = set()\n    province_list = set()\n    district_list = set()\n    for p in peru:\n        department_list.add(p.departamento)\n        province_list.add(p.provincia)\n        district_list.add(p.distrito)\n\n    if request.method == 'POST':\n        user_form = SignUpForm(request.POST)\n        profile_form = ProfileForm(district_list, province_list, department_list, request.POST)\n        if user_form.is_valid() and profile_form.is_valid():\n            user = user_form.save()\n            username = user_form.cleaned_data.get('username')\n            signup_user = User.objects.get(username=username)\n            customer_group = Group.objects.get(name='Clientes')\n            customer_group.user_set.add(signup_user)\n            raw_password = user_form.cleaned_data.get('password1')\n            user.refresh_from_db()  # This will load the Profile created by the Signal\n            profile_form = ProfileForm(district_list, province_list, department_list, request.POST, instance=user.profile)  # Reload the profile form with the profile instance\n            profile_form.full_clean()  # Manually clean the form this time. It is implicitly called by \"is_valid()\" method\n            profile_form.save()  # Gracefully save the form\n            user = authenticate(username=username, password=raw_password)\n            login(request, user)\n            return redirect('cart:cart_detail')\n    else:\n        user_form = SignUpForm()\n\n        profile_form = ProfileForm(district_list, province_list, department_list)\n    return render(request, 'accounts/signup.html', {\n        'user_form': user_form,\n        'profile_form': profile_form\n})\n</code></pre>\n\n<p><strong>HTML:</strong></p>\n\n<pre><code>{% extends 'base.html' %}\n\n{% load staticfiles %}\n\n{% load crispy_forms_tags %}\n\n{% block metadescription %}\n    Reg\u00edstrate para que recibas las \u00faltimas novedades. Tenemos los mejores cojines de El Per\u00fa.\n{% endblock %}\n{% block title %}\n    Crear una nueva cuenta - Perfect Cushion Store\n{% endblock %}\n\n{% block content %}\n\n    &lt;div&gt;\n        {% if not form.is_valid %}\n\n            &lt;div class=\"container\"&gt;\n                &lt;h1 class=\"text-center my_title\"&gt;\n                    Crear una nueva cuenta\n                &lt;/h1&gt;\n                &lt;br&gt;\n                &lt;div class=\"col-12 col-sm-12 col-md-12 col-lg-12 mx-auto-bg-light\"&gt;\n                    &lt;br&gt;\n                    &lt;p&gt;Ingresa la siguiente informaci\u00f3n para crear una cuenta&lt;/p&gt;\n\n\n                    &lt;form method=\"post\"&gt;\n                        {% csrf_token %}\n\n                        &lt;div class=\"row\"&gt;\n\n                            &lt;div class=\"col-md-6\"&gt;\n\n\n                                &lt;table&gt;\n                                    &lt;tr&gt;\n                                        &lt;th&gt;{{ user_form.first_name.label_tag }}&lt;/th&gt;\n                                        &lt;td&gt;\n                                            {{ user_form.first_name.errors }}\n                                            {{ user_form.first_name }}\n                                        &lt;/td&gt;\n                                    &lt;/tr&gt;\n                                    &lt;tr&gt;\n                                        &lt;th&gt;{{ user_form.last_name.label_tag }}&lt;/th&gt;\n                                        &lt;td&gt;\n                                            {{ user_form.last_name.errors }}\n                                            {{ user_form.last_name }}\n                                        &lt;/td&gt;\n                                    &lt;/tr&gt;\n                                    &lt;tr&gt;\n                                        &lt;th&gt;{{ user_form.username.label_tag }}&lt;/th&gt;\n                                        &lt;td&gt;\n                                            {{ user_form.username.errors }}\n                                            {{ user_form.username }}\n                                        &lt;/td&gt;\n                                    &lt;/tr&gt;\n                                    &lt;tr&gt;\n                                        &lt;th&gt;{{ profile_form.dni.label_tag }}&lt;/th&gt;\n                                        &lt;td&gt;{{ profile_form.dni }}&lt;/td&gt;\n                                    &lt;/tr&gt;\n                                    &lt;tr&gt;\n                                        &lt;th&gt;{{ profile_form.email.label_tag }}&lt;/th&gt;\n                                        &lt;td&gt;{{ profile_form.email }}&lt;/td&gt;\n                                    &lt;/tr&gt;\n                                    &lt;tr&gt;\n                                        &lt;th&gt;{{ user_form.password1.label_tag }}&lt;/th&gt;\n                                        &lt;td&gt;\n                                            {{ user_form.password1.errors }}\n                                            {{ user_form.password1 }}\n                                        &lt;/td&gt;\n                                    &lt;/tr&gt;\n                                    &lt;tr&gt;\n                                        &lt;th&gt;{{ user_form.password2.label_tag }}&lt;/th&gt;\n                                        &lt;td&gt;\n                                            {{ user_form.password2.errors }}\n                                            {{ user_form.password2 }}\n                                        &lt;/td&gt;\n                                    &lt;/tr&gt;\n                                &lt;/table&gt;\n\n                            &lt;/div&gt;\n\n                            &lt;div class=\"col-md-6\"&gt;\n\n                                &lt;table&gt;\n\n\n                                    &lt;tr&gt;\n                                        &lt;th&gt;{{ profile_form.cellphone.label_tag }}&lt;/th&gt;\n                                        &lt;td&gt;{{ profile_form.cellphone.errors }}\n                                            {{ profile_form.cellphone }}\n                                        &lt;/td&gt;\n                                    &lt;/tr&gt;\n\n                                    &lt;tr&gt;\n                                        &lt;th&gt;{{ profile_form.shipping_address1.label_tag }}&lt;/th&gt;\n                                        &lt;td&gt;\n                                            {{ profile_form.shipping_address1.errors }}\n                                            {{ profile_form.shipping_address1 }}\n                                        &lt;/td&gt;\n                                    &lt;/tr&gt;\n                                    &lt;tr&gt;\n                                        &lt;th&gt;{{ profile_form.shipping_address2.label_tag }}&lt;/th&gt;\n                                        &lt;td&gt;\n                                            {{ profile_form.shipping_address2.errors }}\n                                            {{ profile_form.shipping_address2 }}\n                                        &lt;/td&gt;\n                                    &lt;/tr&gt;\n                                    &lt;tr&gt;\n                                        &lt;th&gt;{{ profile_form.shipping_department.label_tag }}&lt;/th&gt;\n                                        &lt;td&gt;\n                                            {{ profile_form.shipping_department.errors }}\n                                            {{ profile_form.shipping_department }}\n                                        &lt;/td&gt;\n                                    &lt;/tr&gt;\n                                    &lt;tr&gt;\n                                        &lt;th&gt;{{ profile_form.shipping_province.label_tag }}&lt;/th&gt;\n                                        &lt;td&gt;\n                                            {{ profile_form.shipping_province.errors }}\n                                            {{ profile_form.shipping_province }}\n                                        &lt;/td&gt;\n                                    &lt;/tr&gt;\n                                    &lt;tr&gt;\n                                        &lt;th&gt;{{ profile_form.shipping_district.label_tag }}&lt;/th&gt;\n                                        &lt;td&gt;\n                                            {{ profile_form.shipping_district.errors }}\n                                            {{ profile_form.shipping_district }}\n                                        &lt;/td&gt;\n                                    &lt;/tr&gt;\n\n\n\n                                &lt;/table&gt;\n\n                            &lt;/div&gt;\n\n                        &lt;/div&gt;\n\n                        &lt;br&gt;\n                        &lt;br&gt;\n\n                        &lt;div class=\"row\"&gt;\n                            &lt;div class=\"col-md-6\"&gt;&lt;/div&gt;\n                            &lt;div class=\"col-md-6\"&gt;\n                                &lt;div class=\"row\"&gt;\n                                    &lt;div class=\"col-md-6\"&gt;&lt;/div&gt;\n                                    &lt;div class=\"col-md-6\"&gt;\n                                        &lt;button class=\"btn btn-secondary\" type=\"submit\"&gt;Registrarse&lt;/button&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/form&gt;\n                    &lt;br&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        {% else %}\n            &lt;div class=\"container\"&gt;\n                &lt;br&gt;\n                &lt;h1 class=\"my_title text-center\"&gt;\n                    Tu cuenta ha sido creada exitosamente.\n                &lt;/h1&gt;\n                &lt;br&gt;\n                &lt;div&gt;\n                    &lt;p&gt;\n                        Estimado cliente,\n                        &lt;br&gt;\n                        &lt;br&gt;\n                        Su cuenta ha sido creada y ya puede ser usada\n\n                        &lt;br&gt;\n                        &lt;a href=\"{% url 'shop:allProdCat' %}\"&gt;Seguir comprando&lt;/a&gt; y disfruta de los mejores cojines\n                    &lt;/p&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        {% endif %}\n    &lt;/div&gt;\n    &lt;br&gt;\n{% endblock %}\n</code></pre>\n"}, {"tags": ["python", "graphics", "signal-processing", "fft", "data-visualization"], "comments": [{"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1546079976, "post_id": 53938302, "comment_id": 94775172, "body": "You need to synchronize the feeds ... so how long it take to CQT + render the 1024 samples? and what is the sample rate?  I think the rendering is the slowest so you need to optimize it (not using slow api) and find number of samples where the <code>duration(render+CQT) &lt;= samples&#47;samplerate</code> after that you can both render and play the sound ... on windows use WAVEOUT instead of DirecX as the latter is slow (too high and unreliable latency and not working callbacks unless they repaired it)"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1546080435, "post_id": 53938302, "comment_id": 94775265, "body": "I am afraid Python might pose a speed problem ... If you need speed use C++ ... On windows it is doable with C++/WAVEIN/WAVEOUT/GDI see <a href=\"https://stackoverflow.com/a/21658139/2521214\">plotting real time Data on (qwt )Oscillocope</a> Which is <code>stereo signal generator -&gt; WAVEOUT -&gt; WAVEIN -&gt; Osciloscope + FFT&#47;FCT Spectral analyser</code>"}, {"owner": {"reputation": 871, "user_id": 8357969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d947836b34ed6238d065fd26bf75662?s=128&d=identicon&r=PG&f=1", "display_name": "fstop_22", "link": "https://stackoverflow.com/users/8357969/fstop-22"}, "edited": false, "score": 0, "creation_date": 1546435897, "post_id": 53938302, "comment_id": 94851056, "body": "Have you looked into <a href=\"http://www.pyqtgraph.org/\" rel=\"nofollow noreferrer\">pyqtgraph</a>?"}], "owner": {"reputation": 36, "user_id": 7191746, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7-Xt-Yjb6So/AAAAAAAAAAI/AAAAAAAAACA/CWexbg0ob84/photo.jpg?sz=128", "display_name": "Nathan Renegar", "link": "https://stackoverflow.com/users/7191746/nathan-renegar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545893159, "creation_date": 1545868092, "last_edit_date": 1545893159, "question_id": 53938302, "link": "https://stackoverflow.com/questions/53938302/computationally-efficient-way-to-visualize-a-fourier-transform", "title": "Computationally Efficient Way to Visualize a Fourier Transform?", "body": "<p>I'm attempting to make a music visualizer in Python. For math on the audio signal I'm using a modified version of the FFT called the Constant Q Transform (CQT). My issue is finding a way to plot the result of the CQT in real time AND play back the music in real time. </p>\n\n<p>Currently I'm taking 1024 samples of the music, transforming them, plotting them with matplotlib, then sending the samples to an audiostream to be played. The delay is the plotting with matplotlib. My goal is to do something like <a href=\"https://www.youtube.com/watch?v=d9XZ1XrTtQg\" rel=\"nofollow noreferrer\">this</a> or <a href=\"https://www.youtube.com/watch?v=-6sYuFfQC8g\" rel=\"nofollow noreferrer\">this</a>. It appears in the second video the transform is generated beforehand then played back.</p>\n\n<p>How would you recommend generating such a visualization? Is it possible to compute the transform, visualize it, and play back the audio in real time with no/minimal stuttering?</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 9892189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZRCND.jpg?s=128&g=1", "display_name": "Faisal", "link": "https://stackoverflow.com/users/9892189/faisal"}, "edited": false, "score": 0, "creation_date": 1545869755, "post_id": 53938403, "comment_id": 94716834, "body": "Thank @ Daniel Mesejo but I also want the date in the following format so that it can show hourly basis,<code>0   2007-01-01 07:00:00  , 2007-01-01 08:00: 00, 2007-01-01 09:00:00 </code> it is alright if it displays in new colunms."}, {"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "reply_to_user": {"reputation": 143, "user_id": 9892189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZRCND.jpg?s=128&g=1", "display_name": "Faisal", "link": "https://stackoverflow.com/users/9892189/faisal"}, "edited": false, "score": 0, "creation_date": 1545870214, "post_id": 53938403, "comment_id": 94716902, "body": "@Faisal see this question: <a href=\"https://stackoverflow.com/questions/53658048/python-itertools-groupby-datetime-series-by-hour\" title=\"python itertools groupby datetime series by hour\">stackoverflow.com/questions/53658048/&hellip;</a>"}], "tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": true, "score": 2, "last_activity_date": 1545869694, "last_edit_date": 1545869694, "creation_date": 1545869091, "answer_id": 53938403, "question_id": 53938300, "link": "https://stackoverflow.com/questions/53938300/applying-pandas-group-function-keeping-other-columns/53938403#53938403", "title": "Applying pandas group function keeping other columns", "body": "<p>If I understood correctly, you can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.transform.html\" rel=\"nofollow noreferrer\">transform</a>:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'Date': pd.to_datetime(['2007-01-01 07:14:00', '2007-01-01 07:25:00', '2007-01-01 08:00:00', '2007-01-01 09:14:00',\n                            '2007-01-01 09:33:12']),\n                   'sent': [0.32, 0.34, 0.45, 0.7, 0.22],\n                   'var1': [44, 0.66, 0.45, 45, 0.92],\n                   'var2': ['nan', '2007-01-01 08:00:00', '2007-01-01 09:00:00', 'nan', '2007-01-01 10:00:00']})\n\n\ndf['sum'] = df.groupby(df.Date.dt.hour).sent.transform('sum')\n\nprint(df)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>                 Date  sent   var1                 var2   sum\n0 2007-01-01 07:14:00  0.32  44.00                  nan  0.66\n1 2007-01-01 07:25:00  0.34   0.66  2007-01-01 08:00:00  0.66\n2 2007-01-01 08:00:00  0.45   0.45  2007-01-01 09:00:00  0.45\n3 2007-01-01 09:14:00  0.70  45.00                  nan  0.92\n4 2007-01-01 09:33:12  0.22   0.92  2007-01-01 10:00:00  0.92\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 9892189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZRCND.jpg?s=128&g=1", "display_name": "Faisal", "link": "https://stackoverflow.com/users/9892189/faisal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 53938403, "answer_count": 1, "score": 1, "last_activity_date": 1545869694, "creation_date": 1545868087, "last_edit_date": 1545868511, "question_id": 53938300, "link": "https://stackoverflow.com/questions/53938300/applying-pandas-group-function-keeping-other-columns", "title": "Applying pandas group function keeping other columns", "body": "<p>I have this data frame:\nInput:<br/></p>\n\n<blockquote>\n  <p><code>df= pd.DataFrame({'Date':['2007-01-01 07:14:00','2007-01-01 07:25:00','2007-01-01 08:00:00','2007-01-01 09:14:00','2007-01-01 09:33:12'],'sent':[0.32,0.34,0.45,0.7,0.22],'var1':[44,0.66,0.45,45,0.92],\n  'var2':['nan','2007-01-01 08:00:00','2007-01-01 09:00:00','nan','2007-01-01 10:00:00']})</code>\n  output:<br/>\n  <code>Date            sent    var1    var2\n  0   2007-01-01 07:14:00 0.32    44.00   nan\n  1   2007-01-01 07:25:00 0.34    0.66    2007-01-01 08:00:00\n  2   2007-01-01 08:00:00 0.45    0.45    2007-01-01 09:00:00\n  3   2007-01-01 09:14:00 0.70    45.00   nan\n  4   2007-01-01 09:33:12 0.22    0.92    2007-01-01 10:00:00</code>\n  <br/>\n  I am apply this code to calcuate sum of <code>sent</code> column on <strong>hourly basis</strong>\n  Input is:<br/>\n  <code>df=df.groupby(pd.Grouper(key='Date', freq='1H')).sent.sum().reset_index()</code>\n  <br/>\n  Out:<br/>\n  <code>Date sent\n  0   2007-01-01 07:00:00 0.66\n  1   2007-01-01 08:00:00 0.45\n  2   2007-01-01 09:00:00 0.92\n  </code>\n  <br/></p>\n</blockquote>\n\n<ul>\n<li>The problem is: I want to keep other columns like <code>var1</code> and <code>var2</code> with <code>groupby</code> function. I shall be grateful for help. </li>\n</ul>\n"}, {"tags": ["python", "recursion"], "comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 1, "creation_date": 1545868135, "post_id": 53938252, "comment_id": 94716582, "body": "Please fix your indentation.  Neglecting this is bad form in any language, but inexcusable in Python.  Also, you should add your actual test cases for the trees rather than just describing them in list form."}, {"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 2, "creation_date": 1545868225, "post_id": 53938252, "comment_id": 94716601, "body": "You are ignoring the return values from the recursive calls."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 1, "creation_date": 1545868232, "post_id": 53938252, "comment_id": 94716604, "body": "You need return statements on the recursive call results, otherwise you&#39;re just throwing them away and returning <code>True</code> via the fall-through."}], "answers": [{"comments": [{"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 1, "creation_date": 1545887996, "post_id": 53938443, "comment_id": 94719554, "body": "Slick implementation (+1)"}], "tags": [], "owner": {"reputation": 13514, "user_id": 753237, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/caa0cf52d736fd96586b6f14705633dd?s=128&d=identicon&r=PG", "display_name": "ic3b3rg", "link": "https://stackoverflow.com/users/753237/ic3b3rg"}, "is_accepted": false, "score": 1, "last_activity_date": 1545869595, "creation_date": 1545869595, "answer_id": 53938443, "question_id": 53938252, "link": "https://stackoverflow.com/questions/53938252/python-how-to-use-in-order-traverse-to-compare-trees/53938443#53938443", "title": "python - How to use in order traverse to compare trees", "body": "<p>In addition to returning the recursive values, the logic can be simplified a bit:</p>\n\n<pre><code>def areEqual(p, q):\n\n  return bool(p) == bool(q) and (p is None or areEqual(p.left, q.left) and p.val == q.val and areEqual(p.right, q.right))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 2, "last_activity_date": 1545870376, "last_edit_date": 1545870376, "creation_date": 1545869834, "answer_id": 53938463, "question_id": 53938252, "link": "https://stackoverflow.com/questions/53938252/python-how-to-use-in-order-traverse-to-compare-trees/53938463#53938463", "title": "python - How to use in order traverse to compare trees", "body": "<p>Besides ignoring the return value of the recursive calls to <code>inOrderTraverse()</code>, as noted in the comments, you seem to be missing the case where <code>q.left</code> exists but <code>p.left</code> doesn't (ditto right).  Here's my rework of your code to address these two issues:</p>\n\n<pre><code>def inOrderTraverse(p, q):\n\n    if p.left or q.left:\n        if p.left and q.left:\n            if not inOrderTraverse(p.left, q.left):\n                return False  # sub trees don't match\n        else:\n            return False  # only one has left\n\n    if p.val != q.val:\n        return False  # vals don't match\n\n    if p.right or q.right:\n        if p.right and q.right:\n            if not inOrderTraverse(p.right, q.right):\n                return False  # sub trees don't match\n        else:\n            return False  # only one has right\n\n    return True  # everything matches\n</code></pre>\n"}], "owner": {"reputation": 407, "user_id": 9296419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d7d85b6e23a2865f581e6346cececf?s=128&d=identicon&r=PG&f=1", "display_name": "RioAraki", "link": "https://stackoverflow.com/users/9296419/rioaraki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 53938463, "answer_count": 2, "score": 0, "last_activity_date": 1545870705, "creation_date": 1545867705, "last_edit_date": 1545870705, "question_id": 53938252, "link": "https://stackoverflow.com/questions/53938252/python-how-to-use-in-order-traverse-to-compare-trees", "title": "python - How to use in order traverse to compare trees", "body": "<p>The question asks to use in order traverse to check if tree <code>q</code> and <code>p</code> are the same. My logic is:</p>\n\n<ol>\n<li><p>when checking p and q's left and right, return False if q has a left/right child but p does not have one</p></li>\n<li><p>when checking p and q's value, return False if they are not the same</p></li>\n</ol>\n\n<p>I found in example: (BFS order)</p>\n\n<p>p = [1,2,3,5,6]</p>\n\n<p>q = [1,2,3,4,6]</p>\n\n<p>It found the difference but still returns True. I kinda understand it is because it only call <code>inOrderTraverse()</code> in the recursion so the <code>return</code> command does not stop the recursion from running. I tried to add the <code>return</code> before recursion part so it becomes <code>return inOrderTraverse()</code>. However, in this case the recursion stops once all left children have been visited.</p>\n\n<p>So I dont really know what other change could I make to get this thing work. Please help, thank you!</p>\n\n<pre><code>def inOrderTraverse(p, q):\n\n     if p.left:\n         if q.left and p.left.val == q.left.val:\n             inOrderTraverse(p.left, q.left)\n         else:\n             return False\n\n     if p.val != q.val:\n         return False\n\n     if p.right:\n         if q.right and p.right.val == q.right.val:\n             inOrderTraverse(p.right, q.right)\n         else:\n             return False\n\n     return True\n</code></pre>\n"}, {"tags": ["python", "setattribute", "globals"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 5, "creation_date": 1545867150, "post_id": 53938216, "comment_id": 94716436, "body": "Attributes and keys are not the same thing in Python."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1545870123, "post_id": 53938216, "comment_id": 94716890, "body": "Why are you even mucking around with the <code>globals</code> dict anyway? Why not <code>call = a.call</code>???"}, {"owner": {"reputation": 594, "user_id": 3854436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfad57b5d5e866b83ac500d1a7ddb638?s=128&d=identicon&r=PG&f=1", "display_name": "James T.", "link": "https://stackoverflow.com/users/3854436/james-t"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1545878303, "post_id": 53938216, "comment_id": 94718004, "body": "@juanpa.arrivillaga for when I decide to move 7+ funcs to a class, but I&#39;m too lazy to refactor, and I may move more funcs in or out of this class as I dev this script; yea it&#39;s poor design and my IDE will think I&#39;m trying to use some var that&#39;s not def"}], "answers": [{"tags": [], "owner": {"reputation": 594, "user_id": 3854436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfad57b5d5e866b83ac500d1a7ddb638?s=128&d=identicon&r=PG&f=1", "display_name": "James T.", "link": "https://stackoverflow.com/users/3854436/james-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1545867498, "creation_date": 1545867498, "answer_id": 53938241, "question_id": 53938216, "link": "https://stackoverflow.com/questions/53938216/how-do-you-set-the-attribute-value-in-globals-to-be-that-of-a-method-name/53938241#53938241", "title": "How do you set the (attribute, value) in globals() to be that of a method (name, value)?", "body": "<pre><code>class A:\n    def call(self):\n        print('a')\n\n    def call2(self):\n        print('b')\n\na = A()\n\nmethod_names = list(filter(lambda func: '__' not in func, dir(a)))\nfor func in method_names:\n    globals()[func] = getattr(a, func)\n\n# globals()['call'] = a.call\nprint(globals())\ncall()\ncall2()\n# setattr(globals(), 'call', a.call)\n</code></pre>\n\n<p>oops, got mixed up between attributes and keys when they're the same thing in JS. thanks </p>\n"}], "owner": {"reputation": 594, "user_id": 3854436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfad57b5d5e866b83ac500d1a7ddb638?s=128&d=identicon&r=PG&f=1", "display_name": "James T.", "link": "https://stackoverflow.com/users/3854436/james-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1545867498, "creation_date": 1545867080, "question_id": 53938216, "link": "https://stackoverflow.com/questions/53938216/how-do-you-set-the-attribute-value-in-globals-to-be-that-of-a-method-name", "title": "How do you set the (attribute, value) in globals() to be that of a method (name, value)?", "body": "<p>In JS, you can do something similar, assign all key, values of an object / dict, <code>obj</code> to be in the global namespace / context obj with <code>this[key] = obj[key]</code></p>\n\n<p>I expected to be able to do the same with</p>\n\n<pre><code>class A:\n    def call(self):\n        print('a')\n\na = A()\n\nglobals()['call'] = lambda: None\nprint(globals())\nsetattr(globals(), 'call', a.call)\n</code></pre>\n\n<p>the confusing thing is that the error I'm getting is <code>AttributeError: 'dict' object has no attribute 'call'\n</code> even though call is clearly defined when I print globals()</p>\n"}, {"tags": ["python", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 1, "creation_date": 1545870769, "post_id": 53938208, "comment_id": 94716978, "body": "You can also do what you originally wanted by using the <code>soup.select</code> method with a CSS selector: <code>page_soup.select(&#39;div.mouseover.clearfix&#39;)</code>"}, {"owner": {"reputation": 53, "user_id": 10836872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ab8fe35b9aaea20aba22a40eb715d78?s=128&d=identicon&r=PG&f=1", "display_name": "mn2609", "link": "https://stackoverflow.com/users/10836872/mn2609"}, "reply_to_user": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 0, "creation_date": 1546106883, "post_id": 53938208, "comment_id": 94781761, "body": "Thanks for the hint! That&#39;s definitely something that will be useful."}], "tags": [], "owner": {"reputation": 53, "user_id": 10836872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ab8fe35b9aaea20aba22a40eb715d78?s=128&d=identicon&r=PG&f=1", "display_name": "mn2609", "link": "https://stackoverflow.com/users/10836872/mn2609"}, "is_accepted": false, "score": 3, "last_activity_date": 1545867010, "creation_date": 1545867010, "answer_id": 53938208, "question_id": 53938156, "link": "https://stackoverflow.com/questions/53938156/webscraping-with-python-beautifulsoup-findall-doesnt-find-all/53938208#53938208", "title": "Webscraping with Python, BeautifulSoup findAll() doesnt find all", "body": "<p>Well, this is embarassing.</p>\n\n<p>Just after I posted it (in my defense after multiple searches and endless trying around), I realized that html classes can't contain spaces and that mouseover clearfix is actually 2 classes.\nThis works:</p>\n\n<pre><code>containers = page_soup.findAll(\"div\", {\"class\":\"mouseover\"})\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10836872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ab8fe35b9aaea20aba22a40eb715d78?s=128&d=identicon&r=PG&f=1", "display_name": "mn2609", "link": "https://stackoverflow.com/users/10836872/mn2609"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545867010, "creation_date": 1545866371, "question_id": 53938156, "link": "https://stackoverflow.com/questions/53938156/webscraping-with-python-beautifulsoup-findall-doesnt-find-all", "title": "Webscraping with Python, BeautifulSoup findAll() doesnt find all", "body": "<p>I am new to Python and am currently trying to build a webscraper to learn the language. I want save all listings from <a href=\"https://www.notebooksbilliger.de/studentenprogramm/notebooks\" rel=\"nofollow noreferrer\">https://www.notebooksbilliger.de/studentenprogramm/notebooks</a>, which is all Notebooks that fall under the category of Student offers from this site.</p>\n\n<pre><code>from urllib.request import urlopen\nfrom bs4 import BeautifulSoup as soup\n\nmy_url = 'https://www.notebooksbilliger.de/studentenprogramm/notebooks'\n\nuClient = urlopen(my_url)\npage_html = uClient.read()\nuClient.close()\n\npage_soup = soup(page_html, \"html.parser\")\ncontainers = page_soup.findAll(\"div\", {\"class\":\"mouseover clearfix\"})\n</code></pre>\n\n<p>I am trying things out in the console as well, but when I check the len of containers, this is the output I get:</p>\n\n<pre><code>&gt;&gt;&gt; len(containers)\n1\n</code></pre>\n\n<p>Which can't be right, since the listings per page are set to 50.\nI have tried searching with different parameters, but I always just seem to find one item, then the search stops.</p>\n\n<p>I am a little lost right now and can't quite figure out how to fix this problem. Any help?</p>\n\n<p>Greetings :)</p>\n"}, {"tags": ["python", "python-3.x", "list"], "comments": [{"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1545866143, "post_id": 53938120, "comment_id": 94716239, "body": "Why did you make <code>numbers_tmp</code> a global variable, and then ignore its contents in favor of what <code>map</code> returns anyway?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1545866614, "post_id": 53938120, "comment_id": 94716348, "body": "Do <b>not</b> use side effects in <code>map</code>. Just use a for loop"}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1545866806, "post_id": 53938141, "comment_id": 94716380, "body": "And side effects."}], "tags": [], "owner": {"reputation": 5397, "user_id": 1497385, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/480aa1bfbfe38b0baf3a48159b82d726?s=128&d=identicon&r=PG&f=1", "display_name": "Ark-kun", "link": "https://stackoverflow.com/users/1497385/ark-kun"}, "is_accepted": false, "score": 0, "last_activity_date": 1545866202, "creation_date": 1545866202, "answer_id": 53938141, "question_id": 53938120, "link": "https://stackoverflow.com/questions/53938120/why-return-four-lists-when-using-map-with-the-method-append/53938141#53938141", "title": "Why return four lists when using map() with the method .append()", "body": "<p><code>map</code> returns one output object for each object in the input sequence. Your input sequence has 4 objects, so the output has 4 objects. They're all same since your function always returns same <code>numbers_tmp</code> <em>object</em>. To fix the problem stop using global variables in <code>map</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 3, "last_activity_date": 1545866216, "creation_date": 1545866216, "answer_id": 53938142, "question_id": 53938120, "link": "https://stackoverflow.com/questions/53938120/why-return-four-lists-when-using-map-with-the-method-append/53938142#53938142", "title": "Why return four lists when using map() with the method .append()", "body": "<p>Built-in <a href=\"https://docs.python.org/3/library/functions.html#map\" rel=\"nofollow noreferrer\"><code>map</code></a> works on <strong>each value</strong> in an iterable. So your function should include logic which can be applied to <em>each sublist</em>:</p>\n\n<pre><code>def mean_calculator(num_list):\n    return sum(num_list) / len(num_list)\n\nres = list(map(mean_calculator, numbers))\n\nprint(res)\n\n[57.0, 58.2, 50.6, 27.2]\n</code></pre>\n\n<p>Alternatively, you can use <a href=\"https://docs.python.org/3/library/statistics.html#statistics.mean\" rel=\"nofollow noreferrer\"><code>statistics.mean</code></a> from the standard library:</p>\n\n<pre><code>from statistics import mean\n\nres = list(map(mean, numbers))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 498, "user_id": 1971721, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/KFOAz.jpg?s=128&g=1", "display_name": "Hasitha", "link": "https://stackoverflow.com/users/1971721/hasitha"}, "is_accepted": false, "score": 0, "last_activity_date": 1545867901, "creation_date": 1545867901, "answer_id": 53938274, "question_id": 53938120, "link": "https://stackoverflow.com/questions/53938120/why-return-four-lists-when-using-map-with-the-method-append/53938274#53938274", "title": "Why return four lists when using map() with the method .append()", "body": "<pre><code>numbers = [[34, 63, 88, 71, 29], [90, 78, 51, 27, 45], [63, 37, 85, 46, 22], [51, 22, 34, 11, 18]]\ndef mean_append(num_list):\n    return sum(num_list) / len(num_list)\n\nprint(list(map(mean_append, numbers)))\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10836867, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RzWGS7-T1WE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY8KNfs_p042wye7kjhGIDG1PR2Bg/mo/photo.jpg?sz=128", "display_name": "joe", "link": "https://stackoverflow.com/users/10836867/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1547476427, "creation_date": 1545865957, "last_edit_date": 1547476427, "question_id": 53938120, "link": "https://stackoverflow.com/questions/53938120/why-return-four-lists-when-using-map-with-the-method-append", "title": "Why return four lists when using map() with the method .append()", "body": "<p>I am trying to test the function <code>map</code> with the method <code>append</code> and got a wrong output.</p>\n\n<h3>Code</h3>\n\n<pre><code>numbers = [\n    [34, 63, 88, 71, 29], \n    [90, 78, 51, 27, 45], \n    [63, 37, 85, 46, 22], \n    [51, 22, 34, 11, 18]\n]\n\nnumbers_tmp = []\n\ndef mean_append(num_list):\n    numbers_tmp.append(sum(num_list) / len(num_list))\n    return numbers_tmp\n\nprint(list(map(mean_append, numbers)))\n</code></pre>\n\n<h3>Expected output</h3>\n\n<pre><code>[57.0, 58.2, 50.6, 27.2]\n</code></pre>\n\n<h3>Actual output</h3>\n\n<pre><code>[\n    [57.0, 58.2, 50.6, 27.2], \n    [57.0, 58.2, 50.6, 27.2], \n    [57.0, 58.2, 50.6, 27.2], \n    [57.0, 58.2, 50.6, 27.2]\n]\n</code></pre>\n"}, {"tags": ["python", "import", "anaconda", "sympy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1545866230, "post_id": 53938118, "comment_id": 94716262, "body": "If you called a file <code>sympy.py</code>, pick a different name. Also, when posting error messages, post the whole thing, including the stack trace, and as code-formatted text, not an image."}, {"owner": {"reputation": 31, "user_id": 10836846, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uHv6mxQHy4Y/AAAAAAAAAAI/AAAAAAAAOL4/6zOjCw1V1VA/photo.jpg?sz=128", "display_name": "Isabela Pastorini", "link": "https://stackoverflow.com/users/10836846/isabela-pastorini"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1546466506, "post_id": 53938118, "comment_id": 94864542, "body": "Sorry for that, my file name is not sympy. I will try to improve this question. Thank you"}], "owner": {"reputation": 31, "user_id": 10836846, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uHv6mxQHy4Y/AAAAAAAAAAI/AAAAAAAAOL4/6zOjCw1V1VA/photo.jpg?sz=128", "display_name": "Isabela Pastorini", "link": "https://stackoverflow.com/users/10836846/isabela-pastorini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1545866206, "creation_date": 1545865924, "last_edit_date": 1545866206, "question_id": 53938118, "link": "https://stackoverflow.com/questions/53938118/importerror-cannot-import-name-init-printing", "title": "ImportError: cannot import name init_printing", "body": "<p>When I try to import :</p>\n\n<pre><code>from sympy import init_printing\n</code></pre>\n\n<p>or</p>\n\n<pre><code>from sympy import * \n</code></pre>\n\n<p>I get the same error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gb5nk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gb5nk.png\" alt=\"Sympy Error\"></a></p>\n\n<p>I'm using Python 2.7.12 :: Anaconda 4.2.0 and I'vre already installed SymPy</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1545865649, "post_id": 53938068, "comment_id": 94716131, "body": "You mean you want to take command line arguments in Python (see e.g. <a href=\"https://stackoverflow.com/q/4033723/3001761\">stackoverflow.com/q/4033723/3001761</a>)? Or you don&#39;t know how to call the function? Or something else?"}, {"owner": {"reputation": 2239, "user_id": 5400362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afc3721db0d3d78c446c6ae3f2b99737?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/5400362/dev"}, "edited": false, "score": 1, "creation_date": 1545865663, "post_id": 53938068, "comment_id": 94716138, "body": "take look at this --&gt; <a href=\"https://www.pythonforbeginners.com/argv/more-fun-with-sys-argv\" rel=\"nofollow noreferrer\">pythonforbeginners.com/argv/more-fun-with-sys-argv</a>"}, {"owner": {"reputation": 332, "user_id": 10718664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8420877cb56311a25c8232e5595e4fa?s=128&d=identicon&r=PG&f=1", "display_name": "Jansindl3r", "link": "https://stackoverflow.com/users/10718664/jansindl3r"}, "edited": false, "score": 0, "creation_date": 1545865788, "post_id": 53938068, "comment_id": 94716163, "body": "I guess that might be it. It&#39;s a task for my studies where I should control a variable inside a program through CMD"}], "answers": [{"tags": [], "owner": {"reputation": 2421, "user_id": 4508178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vUogy15CTss/AAAAAAAAAAI/AAAAAAAAAAg/mD8TEjxHpt4/photo.jpg?sz=128", "display_name": "Derte Trdelnik", "link": "https://stackoverflow.com/users/4508178/derte-trdelnik"}, "is_accepted": true, "score": 2, "last_activity_date": 1545865830, "creation_date": 1545865830, "answer_id": 53938109, "question_id": 53938068, "link": "https://stackoverflow.com/questions/53938068/cli-in-such-format-file-py-word-hello-world/53938109#53938109", "title": "CLI in such format - file.py --word &#39;Hello world!&#39;", "body": "<p>use the argparse module</p>\n\n<p><a href=\"https://docs.python.org/3/library/argparse.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/argparse.html</a></p>\n\n<pre><code>import argparse\n\nparser = argparse.ArgumentParser()\nparser.add_argument('word', type=str, required=True)\nargs = parser.parse_args()\nprint(args.word)  # say(args.word)\n</code></pre>\n"}], "owner": {"reputation": 332, "user_id": 10718664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8420877cb56311a25c8232e5595e4fa?s=128&d=identicon&r=PG&f=1", "display_name": "Jansindl3r", "link": "https://stackoverflow.com/users/10718664/jansindl3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 53938109, "answer_count": 1, "score": -1, "last_activity_date": 1545865830, "creation_date": 1545865483, "last_edit_date": 1545865595, "question_id": 53938068, "link": "https://stackoverflow.com/questions/53938068/cli-in-such-format-file-py-word-hello-world", "title": "CLI in such format - file.py --word &#39;Hello world!&#39;", "body": "<p>Let's say I have such function:</p>\n\n<pre><code>def say(word):\n    print(word)\n</code></pre>\n\n<p>And I want to run it through CMD in such way:</p>\n\n<pre><code>file.py --word 'Hello world!'\n</code></pre>\n\n<p>I know it works somehow that way, but I can't find out how it is.</p>\n"}, {"tags": ["python", "tensorflow", "classification", "tflearn"], "comments": [{"owner": {"reputation": 1454, "user_id": 5245893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JVjQ.png?s=128&g=1", "display_name": "Mikhail Berlinkov", "link": "https://stackoverflow.com/users/5245893/mikhail-berlinkov"}, "edited": false, "score": 0, "creation_date": 1545868869, "post_id": 53937997, "comment_id": 94716698, "body": "What&#39;s in your <code>X_train</code> and <code>y_train</code> variables?"}, {"owner": {"reputation": 71, "user_id": 5181689, "user_type": "registered", "profile_image": "https://graph.facebook.com/1498908983734109/picture?type=large", "display_name": "Farukh Khan", "link": "https://stackoverflow.com/users/5181689/farukh-khan"}, "reply_to_user": {"reputation": 1454, "user_id": 5245893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JVjQ.png?s=128&g=1", "display_name": "Mikhail Berlinkov", "link": "https://stackoverflow.com/users/5245893/mikhail-berlinkov"}, "edited": false, "score": 0, "creation_date": 1546098067, "post_id": 53937997, "comment_id": 94779372, "body": "@Mikhail Thank you I caught the error and answered it. But I&#39;m facing another weird thing in this.  <code>Training samples: 0 Validation samples: 1</code>  it doesn&#39;t work after this, obviously when the training samples are 0. But why its not taking any kind of samples. Can you answer this please?"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 5181689, "user_type": "registered", "profile_image": "https://graph.facebook.com/1498908983734109/picture?type=large", "display_name": "Farukh Khan", "link": "https://stackoverflow.com/users/5181689/farukh-khan"}, "is_accepted": true, "score": 0, "last_activity_date": 1546097971, "creation_date": 1546097971, "answer_id": 53970924, "question_id": 53937997, "link": "https://stackoverflow.com/questions/53937997/assertionerror-incoming-tensor-shape-must-be-4-d/53970924#53970924", "title": "AssertionError: Incoming Tensor shape must be 4-D", "body": "<p>Edit: The error was due to this</p>\n\n<pre><code>train = training_data[:-5000]\ntest = testing_data[-5000:]\n\nX_train = np.array([i[0] for i in train]).reshape(-1, IMG_SIZE, IMG_SIZE, 3)\n#The error was here\ny_train = (i[1] for i in train)\n\nX_test = np.array([i[0] for i in test]).reshape(-1, IMG_SIZE, IMG_SIZE, 3)\n#The error was here\ny_test = (i[1] for i in test)\n</code></pre>\n\n<p>After making a list in Y_train it starts working, like given below.</p>\n\n<pre><code>train = training_data[:-5000]\n\ntest = testing_data[-5000:]\n\nX_train = np.array([i[0] for i in train]).reshape(-1, IMG_SIZE, IMG_SIZE, 3)\n\ny_train = [i[1] for i in train]\n\nX_test = np.array([i[0] for i in test]).reshape(-1, IMG_SIZE, IMG_SIZE, 3)\ny_test = [i[1] for i in test]\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5181689, "user_type": "registered", "profile_image": "https://graph.facebook.com/1498908983734109/picture?type=large", "display_name": "Farukh Khan", "link": "https://stackoverflow.com/users/5181689/farukh-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 53970924, "answer_count": 1, "score": 0, "last_activity_date": 1546097971, "creation_date": 1545864847, "question_id": 53937997, "link": "https://stackoverflow.com/questions/53937997/assertionerror-incoming-tensor-shape-must-be-4-d", "title": "AssertionError: Incoming Tensor shape must be 4-D", "body": "<p>I'm trying to make a classifier and I keep getting this error which is really confusing to me. As I'm really new to machine learning stuff I can't find anything to internet for this. </p>\n\n<p><strong>ERROR</strong></p>\n\n<pre><code>AssertionError: Incoming Tensor shape must be 4-D\n</code></pre>\n\n<p><strong>Code</strong></p>\n\n<pre><code>IMG_SIZE = 64\n    tf.reset_default_graph()\n    convnet = input_data(shape=[1,IMG_SIZE,IMG_SIZE,1],name='input')\n    convnet = conv_2d(convnet, 32, 5, activation='relu')\n    convnet = max_pool_2d(convnet, 5)\n    convnet = conv_2d(convnet, 64, 5, activation='relu')\n    convnet = max_pool_2d(convnet, 5)\n    convnet = conv_2d(convnet, 128, 5, activation='relu')\n    convnet = max_pool_2d(convnet, 5)\n    convnet = conv_2d(convnet, 64, 5, activation='relu')\n    convnet = max_pool_2d(convnet, 5)\n    convnet = conv_2d(convnet, 32, 5, activation='relu')\n    convnet = max_pool_2d(convnet, 5)\n    convnet = fully_connected(convnet, 1024, activation='relu')\n    convnet = dropout(convnet, 0.8)\n    convnet = fully_connected(convnet, 2, activation='softmax')\n    convnet = regression(convnet, optimizer='adam', learning_rate=LR, loss='categorical_crossentropy', name='targets')\n    model = tflearn.DNN(convnet, tensorboard_dir='log', tensorboard_verbose=0)\n    model.fit({'input': X_train}, {'targets': y_train}, n_epoch=10,\n              validation_set=({'input': X_test}, {'targets': y_test}),\n              snapshot_step=500, show_metric=True, run_id=MODEL_NAME)\n</code></pre>\n\n<p>if i give <code>convnet = input_data(shape=[None,IMG_SIZE,IMG_SIZE,1],name='input')</code>\nit gives me this error</p>\n\n<pre><code>Exception in thread Thread-3:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\zeele\\Miniconda3\\lib\\threading.py\", line 916, in _bootstrap_inner\n    self.run()\n  File \"C:\\Users\\zeele\\Miniconda3\\lib\\threading.py\", line 864, in run\n    self._target(*self._args, **self._kwargs)\n  File \"C:\\Users\\zeele\\Miniconda3\\lib\\site-packages\\tflearn\\data_flow.py\", line 187, in fill_feed_dict_queue\n    data = self.retrieve_data(batch_ids)\n  File \"C:\\Users\\zeele\\Miniconda3\\lib\\site-packages\\tflearn\\data_flow.py\", line 222, in retrieve_data\n    utils.slice_array(self.feed_dict[key], batch_ids)\n  File \"C:\\Users\\zeele\\Miniconda3\\lib\\site-packages\\tflearn\\utils.py\", line 187, in slice_array\n    return X[start]\nTypeError: 'generator' object is not subscriptable\n</code></pre>\n"}, {"tags": ["python", "python-requests"], "owner": {"reputation": 79, "user_id": 10100118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06c15ce8acf3437b138822c8b2bed139?s=128&d=identicon&r=PG&f=1", "display_name": "adisplayname", "link": "https://stackoverflow.com/users/10100118/adisplayname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 1, "closed_date": 1545866422, "answer_count": 0, "score": 1, "last_activity_date": 1581582630, "creation_date": 1545864786, "last_edit_date": 1581582630, "question_id": 53937986, "link": "https://stackoverflow.com/questions/53937986/python-requests-how-to-save-a-gif-scraped-with-requests", "closed_reason": "Duplicate", "title": "Python requests - how to save a gif scraped with requests?", "body": "<p>At the moment, I have the following code:</p>\n\n<pre><code>import requests\n\n\nwith open(\"location.gif\", \"wb\") as f:\n    f.write(requests.get(url).content)\n</code></pre>\n\n<p>This creates the \"location.gif\" file, but opening the file shows me no image and when trying to send it to someone it tells me it's not a valid file. How should I save the gif?</p>\n"}, {"tags": ["python", "python-3.x", "tkinter", "tkinter-entry"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1545866230, "post_id": 53937974, "comment_id": 94716261, "body": "The Entry is over 1000 pixels wide, so it pushes the Button off the right side of the window.  Either reduce the size of the Entry (are you really expecting the user to enter a 200 character password???), or stop specifying a size for the window when that size is insufficient to hold the contents.  Also, you seem to misunderstand what the row and column options to <code>.grid()</code> mean - with a total of two widgets, it&#39;s utterly pointless for either of those numbers to be greater than two."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10836814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6f2df2797401c2778d7c7d576c1cbf?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Hawkins", "link": "https://stackoverflow.com/users/10836814/matt-hawkins"}, "edited": false, "score": 1, "creation_date": 1545866488, "post_id": 53937999, "comment_id": 94716320, "body": "Thanks a lot Rishabh!"}], "tags": [], "owner": {"reputation": 506, "user_id": 2126661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t9T8p.jpg?s=128&g=1", "display_name": "Rishabh Mishra", "link": "https://stackoverflow.com/users/2126661/rishabh-mishra"}, "is_accepted": true, "score": 1, "last_activity_date": 1545865870, "last_edit_date": 1545865870, "creation_date": 1545864860, "answer_id": 53937999, "question_id": 53937974, "link": "https://stackoverflow.com/questions/53937974/when-an-entry-box-is-present-a-button-does-not-show-up/53937999#53937999", "title": "When an entry box is present, a button does not show up", "body": "<p>You need to add a line <code>passwordbox.mainloop()</code> at the end of password1 definition. Also you need to specify row and column of the grid properly.\n<br/>\nSet Entry box to row 0 and column 0<br/>\nSet Submit button to row 1 and column 0<br/></p>\n\n<pre><code>from tkinter import *\n\ndef submit1():\n    print(\"working\");\n\ndef password1():\n    passwordbox= Tk()\n    passwordbox.title(\"Password Verification\")\n    passwordbox.configure(background=\"white\")\n    passwordbox.geometry(\"1000x1000\")\n\n\n    box1 = Entry(passwordbox, width=200, bg=\"gray\")\n    box1.grid(row=0, column=0, sticky=W)\n\n    submit = Button(passwordbox, text=\"Submit\", width=20, height=5, \nbg=\"black\", fg=\"white\", command=submit1)\n    submit.grid(row=1, column=0, sticky=W);\n    passwordbox.mainloop()\n\npassword1()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10836814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6f2df2797401c2778d7c7d576c1cbf?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Hawkins", "link": "https://stackoverflow.com/users/10836814/matt-hawkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 53937999, "answer_count": 1, "score": 1, "last_activity_date": 1545865870, "creation_date": 1545864651, "last_edit_date": 1545864970, "question_id": 53937974, "link": "https://stackoverflow.com/questions/53937974/when-an-entry-box-is-present-a-button-does-not-show-up", "title": "When an entry box is present, a button does not show up", "body": "<p>I have been doing some work in python and have came across Tkinter which is very useful for my project. I was in the process of making a screen where there is a button and a text entry box however when the text entry box is present, no button shows up. However when I remove the entry box, I can see the button.</p>\n\n<p>Here is the part of the script I've been working on:</p>\n\n<p>Hi, I have been doing some work in python and have came across Tkinter which is very useful for my project. I was in the process of making a screen where there is a button and a text entry box however when the text entry box is present, no button shows up. However when I remove the entry box, I can see the button.</p>\n\n<pre><code>from tkinter import *\n\ndef submit1():\n    print(\"working\");\n\ndef password1():\n    passwordbox= Tk()\n    passwordbox.title(\"Password Verification\")\n    passwordbox.configure(background=\"white\")\n    passwordbox.geometry(\"1000x1000\")\n\n\n    box1 = Entry(passwordbox, width=200, bg=\"gray\")\n    box1.grid(row=2000, column=10, sticky=W)\n\n    submit = Button(passwordbox, text=\"Submit\", width=20, height=5, \nbg=\"black\", fg=\"white\", command=submit1)\n    submit.grid(row=1000, column=15, sticky=W);\n\npassword1()\n</code></pre>\n\n<p>The text box should show to entry box and the button however it only shows the button</p>\n\n<p>If the entry box code was # out, the button will work</p>\n\n<p>Anyone got any ideas?</p>\n"}, {"tags": ["python", "amazon-web-services", "aws-lambda", "boto3"], "answers": [{"tags": [], "owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1545874910, "creation_date": 1545874910, "answer_id": 53938872, "question_id": 53937965, "link": "https://stackoverflow.com/questions/53937965/how-to-resize-ec2-instance-type-dynamically-using-aws-lambda-function-with-boto3/53938872#53938872", "title": "How to resize ec2 instance type dynamically using AWS Lambda function with Boto3", "body": "<p>Just supply a list, for example:</p>\n\n<pre><code>import boto3\n\nclient = boto3.client('ec2')\n\n# Get t2.micro instances\nresponse = client.describe_instances(\n   Filters=[{'Name': 'instance-type','Values':['t2.micro']}]\n)\n\ninstances = [i['InstanceId'] for i in r['Instances'] for r in response['Reservations']]\n\n# Stop the instances\nclient.stop_instances(InstanceIds=instances)\nwaiter=client.get_waiter('instance_stopped')\nwaiter.wait(InstanceIds=instances)\n\n# Change the instance type\nfor i in instances:\n    client.modify_instance_attribute(InstanceId=i, Attribute='instanceType', Value='m3.xlarge')\n\n# Start the instance\nclient.start_instances(InstanceIds=instances)\n</code></pre>\n\n<p>I didn't test the code, so please test it first!</p>\n"}], "owner": {"reputation": 5, "user_id": 7854582, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yVQDsfaQ2Z8/AAAAAAAAAAI/AAAAAAAAAFU/ljc85fMqJrY/photo.jpg?sz=128", "display_name": "Rajan Vashisht", "link": "https://stackoverflow.com/users/7854582/rajan-vashisht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1237, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1545874920, "creation_date": 1545864534, "last_edit_date": 1545874920, "question_id": 53937965, "link": "https://stackoverflow.com/questions/53937965/how-to-resize-ec2-instance-type-dynamically-using-aws-lambda-function-with-boto3", "title": "How to resize ec2 instance type dynamically using AWS Lambda function with Boto3", "body": "<p>How do I change Instance type for multiple instances with python lambda function without hardcoding the instance ids.</p>\n\n<pre><code>import boto3\n\nclient = boto3.client('ec2')\n\n# Insert your Instance ID here\nmy_instance = &lt;&lt;some code here to fetch instance IDs of all instances \nfiltering all t2.micro instance types&gt;&gt;\n\n# Stop the instance\nclient.stop_instances(InstanceIds=[my_instance])\nwaiter=client.get_waiter('instance_stopped')\nwaiter.wait(InstanceIds=[my_instance])\n\n# Change the instance type\nclient.modify_instance_attribute(InstanceId=my_instance, \nAttribute='instanceType', Value='m3.xlarge')\n\n# Start the instance\nclient.start_instances(InstanceIds=[my_instance])\n</code></pre>\n"}, {"tags": ["python", "django", "django-models"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10109287"}, "edited": false, "score": 0, "creation_date": 1545865768, "post_id": 53938012, "comment_id": 94716162, "body": "Thank you I will keep that in mind and change it to <code>user</code> after the problem is fixed. I&#39;ve removed the timestamp in the meantime. I&#39;ve did the above, I can see the username obtained properly and the form fields filled out, but when I go to admin, the changes aren&#39;t there. Is there like something I need to do to &quot;update&quot; the db aside from saving?"}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 0, "last_activity_date": 1545864965, "creation_date": 1545864965, "answer_id": 53938012, "question_id": 53937951, "link": "https://stackoverflow.com/questions/53937951/unable-to-find-newly-saved-instances-in-database/53938012#53938012", "title": "Unable to find newly saved instances in database", "body": "<p>Well, you don't ever seem to be setting the username. You set a timestamp, which doesn't exist as a field, but not the actual username field.</p>\n\n<pre><code>    model_instance = symbol_form.save(commit=True)\n    model_instance.userame = request.user\n    model_instance.save()\n</code></pre>\n\n<p>As an aside, that field should be called <code>user</code>, as it points to the whole User object not just the username.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10109287"}, "edited": false, "score": 0, "creation_date": 1545878380, "post_id": 53939117, "comment_id": 94718018, "body": "I just realized my main mistake, I needed to not commit first and get the username, then save. I did something similar to this, but rather than <code>request.user.id</code> I used <code>current_user = StockPortfolioUser.objects.get(username=request.user)</code> yours is neater though!"}, {"owner": {"reputation": 4627, "user_id": 4751726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/753e26289b63b945ca709576ebb603ea?s=128&d=identicon&r=PG", "display_name": "shafik", "link": "https://stackoverflow.com/users/4751726/shafik"}, "edited": false, "score": 0, "creation_date": 1545878614, "post_id": 53939117, "comment_id": 94718059, "body": "Yep, your username field accept a foreign key value not a string. SO you need to assign an id to it."}], "tags": [], "owner": {"reputation": 4627, "user_id": 4751726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/753e26289b63b945ca709576ebb603ea?s=128&d=identicon&r=PG", "display_name": "shafik", "link": "https://stackoverflow.com/users/4751726/shafik"}, "is_accepted": true, "score": 0, "last_activity_date": 1545878627, "last_edit_date": 1545878627, "creation_date": 1545877772, "answer_id": 53939117, "question_id": 53937951, "link": "https://stackoverflow.com/questions/53937951/unable-to-find-newly-saved-instances-in-database/53939117#53939117", "title": "Unable to find newly saved instances in database", "body": "<p>In your <code>views.py</code> file change this</p>\n\n<pre><code>model_instance = symbol_form.save(commit=False)\nmodel_instance.username = request.user.id\nmodel_instance.timestamp = timezone.now()\nmodel_instance.save()\n</code></pre>\n\n<p>In <code>StockSymbolForm</code> change this</p>\n\n<pre><code>fields = ('username', 'stock_symbol' , 'stock_qty')\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10109287"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 53939117, "answer_count": 2, "score": 1, "last_activity_date": 1545878627, "creation_date": 1545864448, "question_id": 53937951, "link": "https://stackoverflow.com/questions/53937951/unable-to-find-newly-saved-instances-in-database", "title": "Unable to find newly saved instances in database", "body": "<p>I'm making a stock portfolio app as a personal project. I have a form <code>StockSymbolForm</code> used for buying stocks. It has the fields: <code>username</code>, <code>stock_symbol</code>, and <code>stock_qty</code>.</p>\n\n<p>I've set <code>username</code> to be the current user that's currently using the app - so they only need to fill <code>stock_symbol</code> and <code>stock_qty</code>.</p>\n\n<p>After a valid form is submitted, I go to my admin page to check, but I don't see my new <code>stock_symbol</code> and <code>stock_qty</code> added to my model.</p>\n\n<p>Here's my code:</p>\n\n<p><strong>views.py</strong>:</p>\n\n<p>class PortfolioStockListView(ListView):\n    model = StockPortfolio\n    template_name = 'stocks.html'</p>\n\n<pre><code>def post(self, request):\n    current_user = StockPortfolioUser.objects.filter(username=request.user).first()\n\nif request.method == 'POST':\n    symbol_form = StockSymbolForm(request.POST, initial={'username': current_user})\n\n    if symbol_form.is_valid():\n        symbol_form = StockSymbolForm(request.POST, instance=current_user)\n        model_instance = symbol_form.save(commit=True)\n        model_instance.timestamp = timezone.now()\n        model_instance.save()\n        return redirect('/')\n    else:   \n        return render(request, 'stocks.html', {'symbol_form': symbol_form})\n\nelse:\n    symbol_form = StockSymbolForm()\n\nreturn render(request, 'stocks.html', {'symbol_form': symbol_form})\n</code></pre>\n\n<p><strong>models.py</strong>:</p>\n\n<pre><code>class StockPortfolioUser(models.Model):\n    username = models.OneToOneField(User, on_delete=models.CASCADE)\n    usercash = models.PositiveIntegerField(default=100000)\n\nclass StockPortfolio(models.Model):\n    username = models.ForeignKey(StockPortfolioUser, on_delete=models.CASCADE)\n    stock_symbol = models.CharField(max_length=5)\n    stock_qty = models.PositiveIntegerField(default=0)\n</code></pre>\n\n<p><strong>forms.py</strong>:</p>\n\n<p>class StockSymbolForm(ModelForm):</p>\n\n<pre><code>class Meta:\n    model = StockPortfolio\n    fields = ('stock_symbol' , 'stock_qty')\n    labels = {'stock_symbol': 'Stock Symbol', 'stock_qty': 'Quantity'}\n</code></pre>\n\n<hr>\n\n<p>How do I save the model instance properly? and why is it not saving at the moment?</p>\n"}, {"tags": ["python", "python-3.x", "web-scraping", "proxy"], "answers": [{"comments": [{"owner": {"reputation": 140, "user_id": 10568531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e355807cad6f3abdf401e57032a6e6dc?s=128&d=identicon&r=PG&f=1", "display_name": "robots.txt", "link": "https://stackoverflow.com/users/10568531/robots-txt"}, "edited": false, "score": 0, "creation_date": 1545889151, "post_id": 53938054, "comment_id": 94719817, "body": "My question is not about getting proxies ;rather,  it is about using them in the right way @user1330614."}], "tags": [], "owner": {"reputation": 413, "user_id": 1330614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f6f13f39a590a6f2fb61c82724bc34b?s=128&d=identicon&r=PG", "display_name": "user1330614", "link": "https://stackoverflow.com/users/1330614/user1330614"}, "is_accepted": false, "score": -1, "last_activity_date": 1545865382, "creation_date": 1545865382, "answer_id": 53938054, "question_id": 53937949, "link": "https://stackoverflow.com/questions/53937949/unable-to-pass-proxies-and-links-to-the-threadpool-to-get-results/53938054#53938054", "title": "Unable to pass proxies and links to the threadpool to get results", "body": "<p>Maybe you can use another approach to get proxies like this</p>\n\n<pre><code>def get_proxy():                                                                                                                                                                                  \n    url = 'https://free-proxy-list.net/anonymous-proxy.html'                                                                                                                                      \n    response = requests.get(url)                                                                                                                                                                  \n    soup = BeautifulSoup(response.text, 'lxml')                                                                                                                                                   \n    table = soup.find('table', attrs={'id': 'proxylisttable'})                                                                                                                                    \n    table_body = table.find('tbody')                                                                                                                                                              \n    proxies = table_body.find_all('tr')                                                                                                                                                           \n    proxy_row = random.choice(proxies).find_all('td')                                                                                                                                             \n    return proxy_row[0].text + ':' + proxy_row[1].text  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 140, "user_id": 10568531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e355807cad6f3abdf401e57032a6e6dc?s=128&d=identicon&r=PG&f=1", "display_name": "robots.txt", "link": "https://stackoverflow.com/users/10568531/robots-txt"}, "edited": false, "score": 0, "creation_date": 1546120107, "post_id": 53973226, "comment_id": 94784798, "body": "The finest script I&#39;ve come across so far @SimonF. The only problem is that your script keeps going on and on and produces duplicates as it can&#39;t break out of the loop when it is time. However, it is still the finest one in my experience. I hope you will fix that shortcoming. Thanks."}, {"owner": {"reputation": 1756, "user_id": 9521723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d068ebd4677eaf960f4dde5b5234f0?s=128&d=identicon&r=PG", "display_name": "SimonF", "link": "https://stackoverflow.com/users/9521723/simonf"}, "reply_to_user": {"reputation": 140, "user_id": 10568531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e355807cad6f3abdf401e57032a6e6dc?s=128&d=identicon&r=PG&f=1", "display_name": "robots.txt", "link": "https://stackoverflow.com/users/10568531/robots-txt"}, "edited": false, "score": 0, "creation_date": 1546120310, "post_id": 53973226, "comment_id": 94784832, "body": "@robots.txt Can you give an example of the duplicates? The logic for parsing the page is yours and I haven&#39;t changed that. The script stops when all the titles you have scraped are printed, but it takes some time as you have first a request for the link and then another for each title."}, {"owner": {"reputation": 140, "user_id": 10568531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e355807cad6f3abdf401e57032a6e6dc?s=128&d=identicon&r=PG&f=1", "display_name": "robots.txt", "link": "https://stackoverflow.com/users/10568531/robots-txt"}, "edited": false, "score": 0, "creation_date": 1546120774, "post_id": 53973226, "comment_id": 94784905, "body": "I&#39;ll show you the result once I&#39;m done running. Thanks a trillion once again @SimonF."}, {"owner": {"reputation": 140, "user_id": 10568531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e355807cad6f3abdf401e57032a6e6dc?s=128&d=identicon&r=PG&f=1", "display_name": "robots.txt", "link": "https://stackoverflow.com/users/10568531/robots-txt"}, "edited": false, "score": 0, "creation_date": 1549904573, "post_id": 53973226, "comment_id": 96063323, "body": "Hi @SimonF, please take a look at <b><i><a href=\"https://stackoverflow.com/questions/54626470/cant-store-downloaded-files-in-their-concerning-folders\">this post</a></i></b>, if there is anything you can do to solve the issue. Thanks in advance."}], "tags": [], "owner": {"reputation": 1756, "user_id": 9521723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d068ebd4677eaf960f4dde5b5234f0?s=128&d=identicon&r=PG", "display_name": "SimonF", "link": "https://stackoverflow.com/users/9521723/simonf"}, "is_accepted": true, "score": 2, "last_activity_date": 1546116420, "creation_date": 1546116420, "answer_id": 53973226, "question_id": 53937949, "link": "https://stackoverflow.com/questions/53937949/unable-to-pass-proxies-and-links-to-the-threadpool-to-get-results/53973226#53973226", "title": "Unable to pass proxies and links to the threadpool to get results", "body": "<p>The problems with your code was that it was creating a lot of endless loops in the thread. Also they way you handled the proxies was a bit strange to me, so I changed it.\nI also think you had misunderstood how data was sent to the threads, they get one one element of the iterable, not the whole thing. So I changed some names to reflect that.</p>\n\n<p>The way it works now is that each thread gets their own url from lead_url, then they choose a random proxy from the proxyVault.\nThey fetch the webpage and parse it and calls get_title on each of the parsed links.</p>\n\n<p>If the request fails because of the proxy, that proxy is removed from the list so its not used again and make_requests is called again, which will randomly choose a new proxy from the ones that are still available.\nI did not change the actual parsing, because I can't judge if it's what you want or not.</p>\n\n<p>Runnable code:</p>\n\n<p><a href=\"https://repl.it/@zlim00/unable-to-pass-proxies-and-links-to-the-threadpool-to-get-re\" rel=\"nofollow noreferrer\">https://repl.it/@zlim00/unable-to-pass-proxies-and-links-to-the-threadpool-to-get-re</a></p>\n\n<pre><code>from bs4 import BeautifulSoup\nfrom multiprocessing.pool import ThreadPool\nfrom random import choice\nimport requests\nfrom urllib.parse import urljoin\n\nbase_url = 'https://stackoverflow.com/questions/tagged/web-scraping'\nlead_url = [f'https://stackoverflow.com/questions/tagged/web-scraping?sort='\n            f'newest&amp;page={page}&amp;pagesize=15' for page in range(1, 6)]\n\nproxyVault = ['36.67.57.45:53367', '5.202.150.233:42895',\n              '85.187.184.129:8080', '109.195.23.223:45947']\n\ndef make_requests(url):\n    proxy_url = choice(proxyVault)\n    proxy = {'https': f'http://{proxy_url}'}\n    try:\n        res = requests.get(url, proxies=proxy)\n        soup = BeautifulSoup(res.text, \"lxml\")\n        [get_title(proxy, urljoin(base_url, item.get(\"href\")))\n         for item in soup.select(\".summary .question-hyperlink\")]\n    except requests.exceptions.ProxyError:\n        # Check so that the bad proxy was not removed by another thread\n        if proxy_url in proxyVault:\n            proxyVault.remove(proxy_url)\n            print(f'Removed bad proxy: {proxy_url}')\n        return make_requests(url)\n\ndef get_title(proxy, itemlink):\n    res = requests.get(itemlink, proxies=proxy)\n    soup = BeautifulSoup(res.text, \"lxml\")\n    print(soup.select_one(\"h1[itemprop='name'] a\").text)\n\nif __name__ == '__main__':\n    ThreadPool(10).map(make_requests, lead_url)\n</code></pre>\n"}], "owner": {"reputation": 140, "user_id": 10568531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e355807cad6f3abdf401e57032a6e6dc?s=128&d=identicon&r=PG&f=1", "display_name": "robots.txt", "link": "https://stackoverflow.com/users/10568531/robots-txt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 53973226, "answer_count": 2, "score": 2, "last_activity_date": 1546116420, "creation_date": 1545864437, "last_edit_date": 1546115449, "question_id": 53937949, "link": "https://stackoverflow.com/questions/53937949/unable-to-pass-proxies-and-links-to-the-threadpool-to-get-results", "title": "Unable to pass proxies and links to the threadpool to get results", "body": "<p>I've written a script in python using <strong><em>proxies</em></strong> to scrape the links of different posts traversing different pages of a webpage. I've tried to make use of <code>proxies</code> from a list. The script is supposed to take random <code>proxies</code> from the list and send request to that website and finally parse the items. However, if any <code>proxy</code> is not working then it should be kicked out from the list.</p>\n\n<p>I thought the way I've used <code>number of proxies</code> and <code>list of urls</code> within <code>ThreadPool(10).starmap(make_requests, zip(proxyVault,lead_url))</code> is accurate but it doesn't produce any results; rather, the script gets stuck.</p>\n\n<p><strong><em>How can I pass the proxies and the links to the ThreadPool in order for the script to produce results?</em></strong></p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nfrom urllib.parse import urljoin\nfrom multiprocessing.pool import ThreadPool\nfrom itertools import cycle\nimport random\n\nbase_url = 'https://stackoverflow.com/questions/tagged/web-scraping'\nlead_url = [\"https://stackoverflow.com/questions/tagged/web-scraping?sort=newest&amp;page={}&amp;pagesize=15\".format(page) for page in range(1,6)]\n\nproxyVault = ['104.248.159.145:8888', '113.53.83.252:54356', '206.189.236.200:80', '218.48.229.173:808', '119.15.90.38:60622', '186.250.176.156:42575']\n\ndef make_requests(proxyVault,lead_url):\n    while True:\n        random.shuffle(proxyVault)\n        global pitem   \n        pitem = cycle(proxyVault)\n        proxy = {'https':'http://{}'.format(next(pitem))}\n        try:\n            res = requests.get(lead_url,proxies=proxy)\n            soup = BeautifulSoup(res.text,\"lxml\")\n            [get_title(proxy,urljoin(base_url,item.get(\"href\"))) for item in soup.select(\".summary .question-hyperlink\")]\n        except Exception:\n            try: \n                proxyVault.pop(0)\n                make_requests(proxyVault,lead_url)\n            except Exception:pass\n\ndef get_title(proxy,itemlink):\n    res = requests.get(itemlink,proxies=proxy)\n    soup = BeautifulSoup(res.text,\"lxml\")\n    print(soup.select_one(\"h1[itemprop='name'] a\").text)\n\nif __name__ == '__main__':\n    ThreadPool(10).starmap(make_requests, zip(proxyVault,lead_url))\n</code></pre>\n\n<p>Btw, the <code>proxies</code> used above are just placeholders.</p>\n"}, {"tags": ["python", "sqlite", "sqlalchemy", "flask-sqlalchemy"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1545906515, "post_id": 53937945, "comment_id": 94725607, "body": "The error is not telling you that the table exists in the database. It is telling you that your <code>MetaData</code> instance (in Python) already holds meta data for a table."}, {"owner": {"reputation": 327, "user_id": 8052539, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ff2b0f87a3312c4f0295d2bca8c5cbf5?s=128&d=identicon&r=PG&f=1", "display_name": "Ignas", "link": "https://stackoverflow.com/users/8052539/ignas"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1546014489, "post_id": 53937945, "comment_id": 94760500, "body": "Where can I find that <code>MetaData</code> instance and clear it?"}], "answers": [{"tags": [], "owner": {"reputation": 327, "user_id": 8052539, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ff2b0f87a3312c4f0295d2bca8c5cbf5?s=128&d=identicon&r=PG&f=1", "display_name": "Ignas", "link": "https://stackoverflow.com/users/8052539/ignas"}, "is_accepted": true, "score": 0, "last_activity_date": 1546697717, "creation_date": 1546697717, "answer_id": 54052879, "question_id": 53937945, "link": "https://stackoverflow.com/questions/53937945/how-to-add-new-tables-to-flask-sqlalchemy-database-after-database-init/54052879#54052879", "title": "How to add new tables to flask-sqlalchemy database after database init?", "body": "<p>The problem was in Python cache files. I deleted all <code>__pycache__</code> folders that I found in my project directory and it helped.</p>\n"}], "owner": {"reputation": 327, "user_id": 8052539, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ff2b0f87a3312c4f0295d2bca8c5cbf5?s=128&d=identicon&r=PG&f=1", "display_name": "Ignas", "link": "https://stackoverflow.com/users/8052539/ignas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 54052879, "answer_count": 1, "score": 0, "last_activity_date": 1546697717, "creation_date": 1545864418, "question_id": 53937945, "link": "https://stackoverflow.com/questions/53937945/how-to-add-new-tables-to-flask-sqlalchemy-database-after-database-init", "title": "How to add new tables to flask-sqlalchemy database after database init?", "body": "<p>I have launched <a href=\"https://github.com/authlib/example-oauth2-server\" rel=\"nofollow noreferrer\">this project</a> and it uses Flask-SQLAlchemy and already has some classes (tables). Now I added few more tables - classes that inherit <code>db.Model</code>. And when I run application, I get this error:</p>\n\n<blockquote>\n  <p>sqlalchemy.exc.InvalidRequestError: Table 'table_name' is already defined for this MetaData instance.  Specify 'extend_existing=True' to redefine options and columns on an existing Table object.`</p>\n</blockquote>\n\n<p>I also opened and inspected the database file, but there is no such table created, so error seams a bit misleading.</p>\n\n<p>How to achieve that newly defined classes be created as tables in database?</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 34332, "user_id": 2300597, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/OBo7Q.png?s=128&g=1", "display_name": "peter.petrov", "link": "https://stackoverflow.com/users/2300597/peter-petrov"}, "edited": false, "score": 0, "creation_date": 1545904055, "post_id": 53939402, "comment_id": 94724542, "body": "Thanks a lot. I will try it today."}, {"owner": {"reputation": 34332, "user_id": 2300597, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/OBo7Q.png?s=128&g=1", "display_name": "peter.petrov", "link": "https://stackoverflow.com/users/2300597/peter-petrov"}, "edited": false, "score": 0, "creation_date": 1545914840, "post_id": 53939402, "comment_id": 94729224, "body": "I should have given the joint distribution of X and Y. My question is not really valid."}, {"owner": {"reputation": 310, "user_id": 7767136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345da039df99102b3242e8fac34fe37d?s=128&d=identicon&r=PG&f=1", "display_name": "D. LaRocque", "link": "https://stackoverflow.com/users/7767136/d-larocque"}, "reply_to_user": {"reputation": 34332, "user_id": 2300597, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/OBo7Q.png?s=128&g=1", "display_name": "peter.petrov", "link": "https://stackoverflow.com/users/2300597/peter-petrov"}, "edited": false, "score": 0, "creation_date": 1545916423, "post_id": 53939402, "comment_id": 94729864, "body": "@peter.petrov It depends. You can replace the variable names wih your variable names. If he results are the same as you posted on Statistics, it&#39;s fine. For the rest, I suggest you to learn some statistics, so you can verify the values."}, {"owner": {"reputation": 34332, "user_id": 2300597, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/OBo7Q.png?s=128&g=1", "display_name": "peter.petrov", "link": "https://stackoverflow.com/users/2300597/peter-petrov"}, "edited": false, "score": 0, "creation_date": 1545916532, "post_id": 53939402, "comment_id": 94729905, "body": "Hm... But to define/calculate <code>cov</code> you need to have the joint distribution of the two variables, no?"}, {"owner": {"reputation": 34332, "user_id": 2300597, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/OBo7Q.png?s=128&g=1", "display_name": "peter.petrov", "link": "https://stackoverflow.com/users/2300597/peter-petrov"}, "edited": false, "score": 0, "creation_date": 1545916838, "post_id": 53939402, "comment_id": 94730058, "body": "<a href=\"https://stackoverflow.com/questions/53945334/calculate-marginal-distribution-from-joint-distribution-in-python\" title=\"calculate marginal distribution from joint distribution in python\">stackoverflow.com/questions/53945334/&hellip;</a>  Here is the real thing. This is the joint distribution that I am given, I want to calculate the marginal of X and Y from it. I already figured out how to calculate the covariance and the correlation coefficient."}], "tags": [], "owner": {"reputation": 310, "user_id": 7767136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345da039df99102b3242e8fac34fe37d?s=128&d=identicon&r=PG&f=1", "display_name": "D. LaRocque", "link": "https://stackoverflow.com/users/7767136/d-larocque"}, "is_accepted": false, "score": 1, "last_activity_date": 1545881120, "creation_date": 1545881120, "answer_id": 53939402, "question_id": 53937938, "link": "https://stackoverflow.com/questions/53937938/covariance-and-correlation-coefficient/53939402#53939402", "title": "Covariance and correlation coefficient", "body": "<p>The best solution is to use the functions from <code>numpy</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\n\ne_X = np.average(X_values, weights=X_weights)\ne_Y = np.average(Y_values, weights=Y_weights)\n\nvarX = np.average((X_values-e_X)**2, weights=X_weights)\nvarY = np.average((Y_values-e_Y)**2, weights=Y_weights)\n\ncov_XY = np.cov(X_values, Y_values)\ncorrcoef_XY = np.corrcoef(X_values, Y_values)\n</code></pre>\n"}], "owner": {"reputation": 34332, "user_id": 2300597, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/OBo7Q.png?s=128&g=1", "display_name": "peter.petrov", "link": "https://stackoverflow.com/users/2300597/peter-petrov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545881120, "creation_date": 1545864329, "question_id": 53937938, "link": "https://stackoverflow.com/questions/53937938/covariance-and-correlation-coefficient", "title": "Covariance and correlation coefficient", "body": "<p>I have two random variables and I need to calculate precisely some characteristics for them. </p>\n\n<p><a href=\"https://math.stackexchange.com/questions/3052308/calculated-covariance-corr-coefficient-confirmation?noredirect=1#\">https://math.stackexchange.com/questions/3052308/calculated-covariance-corr-coefficient-confirmation?noredirect=1#</a></p>\n\n<p>I already did this in Java but I want to confirm my answers with at least one more tool. </p>\n\n<p>Could anyone good at python / probability provide me with some guidance how I can calculate these 6 values in python? I guess it is really simple but I am not very confident in python.</p>\n\n<p>I looked at the documentation of the numpy cov function but I have difficulty to understand it. </p>\n"}, {"tags": ["python", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 1, "creation_date": 1545866112, "post_id": 53937931, "comment_id": 94716230, "body": "You don&#39;t have this problem in Keras, did you actually try training a Keras model and see if you got a problem? It uses a completely different API, so I don&#39;t see where is the problem."}, {"owner": {"reputation": 8550, "user_id": 434507, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e72cc204f501267a9c40e96a5654ef38?s=128&d=identicon&r=PG", "display_name": "Eugene Smith", "link": "https://stackoverflow.com/users/434507/eugene-smith"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1545867000, "post_id": 53937931, "comment_id": 94716410, "body": "I get a, &quot;ValueError: Cannot create a tensor proto whose content is larger than 2GB.&quot; in tf.convert_to_tensor(), before I can even call any Keras API functions, when I try to convert my dataset from numpy.ndarray into a tensor. If I feed the data to Keras as numpy.ndarray directly, it bottlenecks inside Python code, with GPU utilization 10%."}, {"owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "edited": false, "score": 0, "creation_date": 1545867119, "post_id": 53937931, "comment_id": 94716431, "body": "Keras will not get around the 2GB limit."}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 1, "creation_date": 1545867348, "post_id": 53937931, "comment_id": 94716466, "body": "Why do you need to convert to tensor? That is not needed at all, you just make a generator and use fit_generator or use fit directly if your data fits into RAM. Make sure to adjust the batch size to maximize performance. I&#39;ve trained Keras models with a 600 GB dataset (OpenImages) without issues."}, {"owner": {"reputation": 8550, "user_id": 434507, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e72cc204f501267a9c40e96a5654ef38?s=128&d=identicon&r=PG", "display_name": "Eugene Smith", "link": "https://stackoverflow.com/users/434507/eugene-smith"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1545867547, "post_id": 53937931, "comment_id": 94716497, "body": "@MatiasValdenegro <a href=\"https://stackoverflow.com/questions/53931748/keras-tensorflow-numpy-vs-tensor-performance\" title=\"keras tensorflow numpy vs tensor performance\">stackoverflow.com/questions/53931748/&hellip;</a>"}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1545867675, "post_id": 53937931, "comment_id": 94716518, "body": "@EugeneSmith Batch size in the order of thousands will bottleneck the CPU and CPU-GPU data transfer, that&#39;s why you see those results."}, {"owner": {"reputation": 8550, "user_id": 434507, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e72cc204f501267a9c40e96a5654ef38?s=128&d=identicon&r=PG", "display_name": "Eugene Smith", "link": "https://stackoverflow.com/users/434507/eugene-smith"}, "edited": false, "score": 0, "creation_date": 1545867800, "post_id": 53937931, "comment_id": 94716531, "body": "What batch size would you propose?"}], "answers": [{"tags": [], "owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "is_accepted": false, "score": 3, "last_activity_date": 1545868440, "creation_date": 1545868440, "answer_id": 53938334, "question_id": 53937931, "link": "https://stackoverflow.com/questions/53937931/using-datasets-larger-than-2-gb-with-keras/53938334#53938334", "title": "Using datasets larger than 2 Gb with Keras", "body": "<p>Keras doesn't have a 2GB limitation for datasets, I've trained much larger datasets with Keras with no issues.</p>\n\n<p>The limitation could come from TensorFlow constants, which do have a 2GB limit, but in any case you should <strong>NOT</strong> store datasets as constants, as these are saved as part of the graph, and that is not the idea of storing a model.</p>\n\n<p>Keras has the <code>model.fit_generator</code> function that you can use to pass a generator function which loads data on the fly, and makes batches. This allows you to load a large dataset on the fly, and you usually adjust the batch size so you maximize performance with acceptable RAM usage. TensorFlow doesn't have a similar API, you have to implement it manually as you say with <code>feed_dict</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 8550, "user_id": 434507, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e72cc204f501267a9c40e96a5654ef38?s=128&d=identicon&r=PG", "display_name": "Eugene Smith", "link": "https://stackoverflow.com/users/434507/eugene-smith"}, "edited": false, "score": 0, "creation_date": 1545869737, "post_id": 53938359, "comment_id": 94716830, "body": "But that would entail creating batches in Python code, which is surely something we&#39;d all want to avoid? If I have 2 GB of data to be divided into 1000 batches, I want to hand the entire 2 GB to TF and say &#39;train on this, divided into 1000 batches&#39;. I don&#39;t want TF to do 1000 Python calls to pull batches one by one, since that would be disastrous performance-wise."}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "reply_to_user": {"reputation": 8550, "user_id": 434507, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e72cc204f501267a9c40e96a5654ef38?s=128&d=identicon&r=PG", "display_name": "Eugene Smith", "link": "https://stackoverflow.com/users/434507/eugene-smith"}, "edited": false, "score": 0, "creation_date": 1545872235, "post_id": 53938359, "comment_id": 94717172, "body": "@EugeneSmith Batching in python is something we all regularly do, and it works fine. At least in Keras :)"}, {"owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "reply_to_user": {"reputation": 8550, "user_id": 434507, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e72cc204f501267a9c40e96a5654ef38?s=128&d=identicon&r=PG", "display_name": "Eugene Smith", "link": "https://stackoverflow.com/users/434507/eugene-smith"}, "edited": false, "score": 1, "creation_date": 1545872310, "post_id": 53938359, "comment_id": 94717184, "body": "@EugeneSmith if your entire dataset is only 2GB, you don&#39;t need <code>fit_generator</code> at all, just <code>fit</code> will suffice (unless you have only 2GB total RAM). <code>fit_generator</code> is only useful if the <b>entire</b> dataset (before dividing it into batches) doesn&#39;t fit into RAM."}], "tags": [], "owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "is_accepted": false, "score": 6, "last_activity_date": 1545875964, "last_edit_date": 1545875964, "creation_date": 1545868639, "answer_id": 53938359, "question_id": 53937931, "link": "https://stackoverflow.com/questions/53937931/using-datasets-larger-than-2-gb-with-keras/53938359#53938359", "title": "Using datasets larger than 2 Gb with Keras", "body": "<p>In Keras, you'd not load your entire dataset in a tensor. You load it in numpy arrays.</p>\n\n<h2>If the entire data can be in a single numpy array:</h2>\n\n<p>Thanks to @sebrockm's comment.</p>\n\n<p>The most trivial usage of Keras is simply loading your dataset in a <strong>numpy array</strong> (not a tf tensor) and call <code>model.fit(arrayWithInputs, arrayWithoutputs, ...)</code>   </p>\n\n<h2>If the entire data doesn't fit a numpy array:</h2>\n\n<p>You'd create a <code>generator</code> or a <code>keras.utils.Sequence</code> to load batches one by one and then train the model with <code>model.fit_generator(generatorOrSequence, ...)</code></p>\n\n<p>The limitation becomes the batch size, but you'd hardly ever hit 2GB in a single batch. \nSo, go for it: </p>\n\n<ul>\n<li><a href=\"https://keras.io/utils/\" rel=\"noreferrer\">keras.utils.Sequence</a>    </li>\n<li><a href=\"https://keras.io/models/model/#fit_generator\" rel=\"noreferrer\">model.fit_generator</a></li>\n</ul>\n"}], "owner": {"reputation": 8550, "user_id": 434507, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e72cc204f501267a9c40e96a5654ef38?s=128&d=identicon&r=PG", "display_name": "Eugene Smith", "link": "https://stackoverflow.com/users/434507/eugene-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1275, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1545875964, "creation_date": 1545864257, "question_id": 53937931, "link": "https://stackoverflow.com/questions/53937931/using-datasets-larger-than-2-gb-with-keras", "title": "Using datasets larger than 2 Gb with Keras", "body": "<p>TensorFlow has a long-standing limitation of 2 Gb on a single tensor. It means that you can't train your model on more than 2 Gb of data at one time without jumping through hoops. See <a href=\"https://stackoverflow.com/questions/35394103/initializing-tensorflow-variable-with-an-array-larger-than-2gb\">Initializing tensorflow Variable with an array larger than 2GB</a> ;  <a href=\"https://stackoverflow.com/questions/38087342/use-large-dataset-in-tensorflow\">Use large dataset in Tensorflow</a></p>\n\n<p>The standard solution referenced in those posts is to use a placeholder and to pass it to the \"session\" through feed_dict:</p>\n\n<pre><code>my_graph = tf.Graph()\nsess = tf.Session(graph=my_graph)   \nX_init = tf.placeholder(tf.float32, shape=(m_input, n_input))\nX = tf.Variable(X_init)\nsess.run(tf.global_variables_initializer(), feed_dict={X_init: data_for_X})\n</code></pre>\n\n<p>However, this only works when I use the \"old\" API (tf.Session(), etc.) The recommended approach nowadays is to use Keras (all the tutorials on tensorflow.org use it). And, with Keras, there's no tf.Graph(), no tf.Session(), and no run() (at least none that are readily visible to the user.) </p>\n\n<p>How do I adapt the above code to work with Keras?</p>\n"}, {"tags": ["python", "swig", "pyinstaller"], "comments": [{"owner": {"reputation": 67096, "user_id": 265521, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/34a66330977044d70165288c56740d4b?s=128&d=identicon&r=PG", "display_name": "Timmmm", "link": "https://stackoverflow.com/users/265521/timmmm"}, "edited": false, "score": 0, "creation_date": 1571346904, "post_id": 53937930, "comment_id": 103221292, "body": "I ran into this issue with a swig-generated library on MacOS. Solved it by adding the relevant dylibs to <code>binaries</code> - in my case <code>_mypaintlib.cpython-37m-darwin.so</code>. Search for things called <code>*cpython*.dll</code>."}], "owner": {"reputation": 738, "user_id": 5540936, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/1dd3dddc6a02d1bc6143801ee58e3242?s=128&d=identicon&r=PG&f=1", "display_name": "Allen More", "link": "https://stackoverflow.com/users/5540936/allen-more"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 294, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1590546920, "creation_date": 1545864252, "last_edit_date": 1545931156, "question_id": 53937930, "link": "https://stackoverflow.com/questions/53937930/pyinstaller-having-trouble-bundling-a-package-containing-swig-modules", "title": "pyInstaller having trouble bundling a package containing SWIG modules", "body": "<p>I\u2019m running into an issue getting pyInstaller to bundle a module that contains SWIG modules.  I have followed each of the guidelines listed in the pyInstaller doc which details SWIG support.\nI get the following error when running the exe:</p>\n\n<pre><code># sphinxbase._ad_win32 not found in PYZ\nTraceback (most recent call last):\n  File \"StartListening.py\", line 10, in &lt;module&gt;\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 971, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 941, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 971, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 955, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 665, in _load_unlocked\n  File \"c:\\users\\allen\\appdata\\local\\programs\\python\\python36-32\\lib\\site-packages\\PyInstaller\\loader\\pyimod03_importers.py\", line 627, in exec_module\n    exec(bytecode, module.__dict__)\n  File \"site-packages\\sphinxbase\\__init__.py\", line 35, in &lt;module&gt;\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 971, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 955, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 665, in _load_unlocked\n  File \"c:\\users\\allen\\appdata\\local\\programs\\python\\python36-32\\lib\\site-packages\\PyInstaller\\loader\\pyimod03_importers.py\", line 627, in exec_module\n    exec(bytecode, module.__dict__)\n  File \"site-packages\\sphinxbase\\ad_win32.py\", line 32, in &lt;module&gt;\n  File \"site-packages\\sphinxbase\\ad_win32.py\", line 31, in swig_import_helper\n  File \"importlib\\__init__.py\", line 126, in import_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 994, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 971, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 953, in _find_and_load_unlocked\nModuleNotFoundError: No module named 'sphinxbase._ad_win32'\n</code></pre>\n\n<p>However, sphinxbase._ad_win32 does exists as a pyd file.  I\u2019m running Windows 10; why is pyInstaller having trouble bundling this module?\nThe third-party package I\u2019m ultimately trying to import is SpeechRecognition which depends on pocketsphinx which depends on sphinxbase which is the module that is having issues.</p>\n\n<p>Here is the object reference returned by </p>\n\n<pre><code>importlib.import_module('sphinxbase._ad_win32') \n</code></pre>\n\n<p>in the SWIG-generated python wrapper if that is helpful to someone:</p>\n\n<pre><code>&lt;module 'sphinxbase._ad_win32' from 'C:\\\\Users\\\\bob\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python36-32\\\\lib\\\\site-packages\\\\sphinxbase\\\\_ad_win32.pyd'&gt;\n</code></pre>\n\n<p>Python version: 3.6.5</p>\n\n<p>Edit: After some more research, I tried adding the .pyd to the 'binaries' list in the .spec file as well as adding 'sphinxbase._ad_win32' to the 'hidden-imports' list and combinations there-between, but this did not work either.  The binary is there, in the correct location, I can't figure out why the bundled app can't find it.</p>\n"}, {"tags": ["python", "numpy", "anaconda"], "comments": [{"owner": {"reputation": 144, "user_id": 10633518, "user_type": "registered", "profile_image": "https://graph.facebook.com/1316220551731560/picture?type=large", "display_name": "Daladier Sampaio", "link": "https://stackoverflow.com/users/10633518/daladier-sampaio"}, "edited": false, "score": 0, "creation_date": 1545864077, "post_id": 53937866, "comment_id": 94715827, "body": "Try this <a href=\"https://unix.stackexchange.com/questions/300128/how-can-i-run-a-python-script-using-anaconda-from-the-command-line\" title=\"how can i run a python script using anaconda from the command line\">unix.stackexchange.com/questions/300128/&hellip;</a>. It worked well for me."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1545865675, "post_id": 53937866, "comment_id": 94716140, "body": "Clarify what you mean by &#39;access&#39;?  Are you doing <code>import numpy</code> in a Python script and interactive session?"}, {"owner": {"reputation": 1, "user_id": 10836801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/765c17ea3d7cf2b37c4c4558ef3717e5?s=128&d=identicon&r=PG&f=1", "display_name": "Utkarsh Tyagi", "link": "https://stackoverflow.com/users/10836801/utkarsh-tyagi"}, "edited": false, "score": 0, "creation_date": 1545896334, "post_id": 53937866, "comment_id": 94721957, "body": "Yes, &#39;access&#39; means calling import numpy in a script."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10836801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/765c17ea3d7cf2b37c4c4558ef3717e5?s=128&d=identicon&r=PG&f=1", "display_name": "Utkarsh Tyagi", "link": "https://stackoverflow.com/users/10836801/utkarsh-tyagi"}, "edited": false, "score": 0, "creation_date": 1545901029, "post_id": 53938264, "comment_id": 94723443, "body": "My version of conda is 4.5.12; there seems to be an error with conda activate command"}], "tags": [], "owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "is_accepted": false, "score": 0, "last_activity_date": 1545867794, "creation_date": 1545867794, "answer_id": 53938264, "question_id": 53937866, "link": "https://stackoverflow.com/questions/53937866/cannot-access-numpy-in-cmd/53938264#53938264", "title": "Cannot access numpy in cmd", "body": "<p>In Anaconda 5.3.0 the numpy version accesses libraries that are on the system PATH set by conda when you use start the Anaconda Prompt or when you run:</p>\n\n<pre><code>conda activate base\n</code></pre>\n\n<p>from the CMD prompt.  This sets a handleful of environmental variables, but the important one is what conda adds to PATH.  There are a handleful of ways around this.  One is you can simply use the Anaconda Prompt to run your script, or you can run the above command before running your Python code.</p>\n\n<p>Alternatively, you can also add a batch file to your Anaconda installation that activates the activates the environment and then passes any additional arguments to python.  </p>\n\n<p>Here is the content of the batch file</p>\n\n<pre><code># file name:\n# C:\\Anaconda3\\python.bat\ncall C:\\Anaconda3\\Scripts\\activate.bat base\nC:\\Anaconda3\\python.exe %*\n</code></pre>\n\n<p>Now you can call you script by activating the base environment first and then firing the script via:</p>\n\n<pre><code>python.bat myscript.py\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10836801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/765c17ea3d7cf2b37c4c4558ef3717e5?s=128&d=identicon&r=PG&f=1", "display_name": "Utkarsh Tyagi", "link": "https://stackoverflow.com/users/10836801/utkarsh-tyagi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1166, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1545867794, "creation_date": 1545863751, "question_id": 53937866, "link": "https://stackoverflow.com/questions/53937866/cannot-access-numpy-in-cmd", "title": "Cannot access numpy in cmd", "body": "<p>I have Anaconda3 installed with Python3.7.1 in <em>C:\\Anaconda3</em>. I have set following as my environment variables: <em>C:\\Anaconda3</em>; <em>C:\\Anaconda3\\Scripts</em>; <em>C:\\Anaconda3\\python.exe</em>; <em>C:\\Anaconda3\\Lib\\site-packages</em>. <br></p>\n\n<p>On Windows10, cmd recognises python and runs simple programs but throws ImportError when I try to access numpy. Numpy shows as installed in Anaconda GUI and I can access it through conda Command Prompt.</p>\n\n<p>I need help to run my programs from cmd.</p>\n\n<p>Edit: pip install recognises numpy as -</p>\n\n<pre><code>Requirement already satisfied: numpy in c:\\anaconda3\\lib\\site-packages (1.15.4)`\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1545868154, "post_id": 53937837, "comment_id": 94716585, "body": "Do you have the url of an actual ftp site folks could use for testing?"}, {"owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1545868333, "post_id": 53937837, "comment_id": 94716617, "body": "I don&#39;t have access to a generic FTP directory."}], "answers": [{"comments": [{"owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1545868148, "post_id": 53937895, "comment_id": 94716584, "body": "I fixed the date issue.  Now I&#39;m seeing this: AttributeError: &#39;FTP&#39; object has no attribute &#39;changed&#39;.  It must come from this line: ftp.cwd(dir) I researched this.  That&#39;s definitely how you change the directory.  What I&#39;m not sure of, is whether or not the system needs a &#39;/&#39; character.  there will be a bunch of files in this directory: &#39;zae4&#39;.  Also, there will be files in this directory: &#39;zae4/daily&#39;.  Likewise, there will be a bunch of files in this directory: &#39;zae4/model_receipt&#39;.  I thought I could drill down into each sub-directory, but I&#39;m guessing it doesn&#39;t actually work like that."}, {"owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1545868989, "post_id": 53937895, "comment_id": 94716721, "body": "Oh, now I see...  It has to be like this:   for dir in all_dirs:     ftp.cwd(&#39;/&#39;+dir+&#39;/&#39;)  Then it works.  Woo hoo!!"}], "tags": [], "owner": {"reputation": 37029, "user_id": 358328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d56c3972b607b39dc840acef5fca07d0?s=128&d=identicon&r=PG", "display_name": "Uku Loskit", "link": "https://stackoverflow.com/users/358328/uku-loskit"}, "is_accepted": false, "score": 0, "last_activity_date": 1545863997, "creation_date": 1545863997, "answer_id": 53937895, "question_id": 53937837, "link": "https://stackoverflow.com/questions/53937837/looping-through-all-folders-in-ftp-directory/53937895#53937895", "title": "Looping through all folders in FTP directory", "body": "<p>You should take a look at the stacktrace for the actual line that is causing the error.</p>\n\n<p>From your code the fault appears to be this line:</p>\n\n<pre><code>    modifiedTimeFtp = datetime.datetime.strptime(datetime[4:], \"%Y%m%d%H%M%S\").strftime(\"%d %b %Y %H:%M:%S\")\n</code></pre>\n\n<p><code>datetime</code> here appears to be the module, but you probably want to refer to some variable with the date, so <code>datetime[4:]</code> is causing the error.</p>\n"}, {"tags": [], "owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "is_accepted": false, "score": 0, "last_activity_date": 1545876307, "creation_date": 1545876307, "answer_id": 53938995, "question_id": 53937837, "link": "https://stackoverflow.com/questions/53937837/looping-through-all-folders-in-ftp-directory/53938995#53938995", "title": "Looping through all folders in FTP directory", "body": "<p>Here is the final, working, version.</p>\n\n<pre><code>import ftplib\nfrom ftplib import FTP\nftp = FTP()\nfrom datetime import datetime\n\n\nfilenames = []\ndata = []\n\nftp = ftplib.FTP('ftp.anything.com', 'u_name', 'ps_wd')  \n\n\ndef get_dirs_ftp(folder=\"\"):\n    contents = ftp.nlst(folder)\n    folders = []\n    for item in contents:\n        if \".\" not in item:\n            folders.append(item)\n    return folders\ndef get_all_dirs_ftp(folder=\"\"):\n    dirs = []\n    new_dirs = []\n    new_dirs = get_dirs_ftp(folder)\n    while len(new_dirs) &gt; 0:\n        for dir in new_dirs:\n            dirs.append(dir)\n\n        old_dirs = new_dirs[:]\n        new_dirs = []\n        for dir in old_dirs:\n            for new_dir in get_dirs_ftp(dir):\n                new_dirs.append(new_dir)\n    dirs.sort()\n    return dirs\n\n#allfiles = []\n# get parent and child folders in directory\nall_dirs = get_all_dirs_ftp()\n\n# create a list to append metadata\ndir_list = []\n\nfor dir in all_dirs:\n    ftp.cwd('/'+dir+'/')\n    print(dir)\n    dir_list.append(dir)\n    ftp.dir(dir_list.append)\n\n    len(dir_list)\n\n\n# you probably want to dump the results to a file...\noutF = open('C:/your_path/filenames.csv', 'w')\nfor line in dir_list:\n  # write line to output file\n  outF.write(line)\n  outF.write(\"\\n\")\noutF.close()\nprint('Done!!')\n</code></pre>\n"}], "owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 863, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1545876307, "creation_date": 1545863436, "question_id": 53937837, "link": "https://stackoverflow.com/questions/53937837/looping-through-all-folders-in-ftp-directory", "title": "Looping through all folders in FTP directory", "body": "<p>I found some code online, and modified it to list all folders in an FTP directory.  I have all the folders listed, with the code below.</p>\n\n<pre><code>import ftplib\nfrom ftplib import FTP\nftp = FTP()\nimport datetime\n\n\nfilenames = []\ndata = []\n\nftp = ftplib.FTP('ftp.something.com', 'u_name', 'pswd')  \n\ndef get_dirs_ftp(folder=\"\"):\n    contents = ftp.nlst(folder)\n    folders = []\n    for item in contents:\n        if \".\" not in item:\n            folders.append(item)\n    return folders\ndef get_all_dirs_ftp(folder=\"\"):\n    dirs = []\n    new_dirs = []\n    new_dirs = get_dirs_ftp(folder)\n    while len(new_dirs) &gt; 0:\n        for dir in new_dirs:\n            dirs.append(dir)\n\n        old_dirs = new_dirs[:]\n        new_dirs = []\n        for dir in old_dirs:\n            for new_dir in get_dirs_ftp(dir):\n                new_dirs.append(new_dir)\n    dirs.sort()\n    return dirs\n\nallfiles = []\nall_dirs = get_all_dirs_ftp()\n</code></pre>\n\n<p>Using the code above, I confirmed that the hierarchy is correct.  Now, I am trying to loop through this list of folders and subfolders, and drill down to the files in each.  This is where the problem occurs.  Here's the rest of my code.</p>\n\n<pre><code>for dir in all_dirs:\n    ftp.cwd(dir)\n    ftp.retrlines('LIST')  \n\n    filenames = []  \n    ftp.retrlines('NLST', filenames.append) \n\n    # writes file name and modified date and file size, to dataframe\n    #data = []\n    for filename in filenames:  \n        filename\n        modifiedTimeFtp = datetime.datetime.strptime(datetime[4:], \"%Y%m%d%H%M%S\").strftime(\"%d %b %Y %H:%M:%S\")\n        size = ftp.size(filename)\n        filesize = \"{:.2f}\".format(size/(1024)) + 'kb'\n        finaldata = (str(filename) + '|' + str(modifiedTimeFtp) + '|' + str(filesize))\n        allfiles.append(finaldata,'\\n')\n</code></pre>\n\n<p>Now, when I run this section of code, I get this error: <code>TypeError: 'module' object is not subscriptable</code></p>\n\n<p>I'm thinking that the problem lies in this range.</p>\n\n<pre><code>ftp.cwd(dir)\nftp.retrlines('LIST')  \n\nfilenames = []  \nftp.retrlines('NLST', filenames.append) \n</code></pre>\n\n<p>That's my guess, but I don't know for sure.  Is there an easy way to get this working?  I almost feel like this is mission impossible, because the FTP folder that I'm querying is pretty massive, and I'm guessing there can be all kinds of timeouts, or whatever, while the task is running.  All I'm trying to do is get the file name, file date/time modified, and file size.  Thanks for the look.</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 1, "creation_date": 1545863652, "post_id": 53937795, "comment_id": 94715740, "body": "You have three figures in your code. Which one is creating problem? Be specific"}], "answers": [{"tags": [], "owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1545871046, "last_edit_date": 1545871046, "creation_date": 1545870714, "answer_id": 53938560, "question_id": 53937795, "link": "https://stackoverflow.com/questions/53937795/matplotlib-opening-2-windows-with-plt-show/53938560#53938560", "title": "Matplotlib opening 2 windows with plt.show()", "body": "<p>You can avoid this if you use matplotlib objects directly instead of relying on the <code>pyplot</code> state machine. As an added bonus, you'll have more explicit and maintainable code.</p>\n\n<p>The main thing here is to use <code>plt.subplots()</code> to set up all of your figures and axes ahead of time, and then explicitly operate on those objects and pass them directly to the seaborn functions that you want to use.</p>\n\n<pre><code>x = pd.DataFrame(maindf[missao_unica].value_counts())\nfig, axes = plt.subplots(nrows=1, ncols=3, figsize=(20, 12), dpi=200)\nfig.subplots_adjust(wspace=0.5)\naxes[0].pie(x[missao_unica].tolist(), labels=x.index.tolist(),\n            autopct='%1.1f%%', shadow=False, startangle=90)\naxes[0].set_title('Contagem(%)')\n\nsns.heatmap(x, cmap='inferno_r', ax=axes[1])\naxes[1].set_title('Contagem(Valor Absoluto)')\n\naxes[2].set_title('Coeficientes')\nsns.countplot(maindf[missao_unica], dodge=None, ax=axes[2])\n\n# note the use raw strings for paths with back-slashes\nfig.savefig(r'Imagens\\Miss\u00f5es.png')\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 170, "user_id": 10659353, "user_type": "registered", "profile_image": "https://graph.facebook.com/1148944881930759/picture?type=large", "display_name": "Enzo Dtz", "link": "https://stackoverflow.com/users/10659353/enzo-dtz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545871046, "creation_date": 1545863137, "last_edit_date": 1545870997, "question_id": 53937795, "link": "https://stackoverflow.com/questions/53937795/matplotlib-opening-2-windows-with-plt-show", "title": "Matplotlib opening 2 windows with plt.show()", "body": "<p>On my project, I'm using 2 figures with plt.show(), the first one, runs correctly, but the second one, creates 2 windows, 1 correctly named 'Figure 2',  and 1 with nothing on the screen, just the 'function bar', named 'Figure 1' (like the first figure). How can I create just the right window?</p>\n\n<pre><code>x = pd.DataFrame(maindf[missao_unica].value_counts())\nplt.figure(figsize=(20,12), dpi=200)\nplt.subplots_adjust(wspace = .5)\nplt.subplot(1,3,1)\nplt.pie(x[missao_unica].tolist(), labels=x.index.tolist(),autopct='%1.1f%%',shadow=False, startangle=90)\nplt.title('Contagem(%)')\nplt.subplot(1,3,2)\nsns.heatmap(x,cmap='inferno_r')\nplt.title('Contagem(Valor Absoluto)')\nplt.subplot(1,3,3)\nplt.title('Coeficientes')\nsns.countplot(maindf[missao_unica],dodge=None)\nplt.savefig('Imagens\\Miss\u00f5es.png')\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "numpy", "scipy", "sparse-matrix"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1545865944, "post_id": 53937784, "comment_id": 94716195, "body": "I don&#39;t quite follow. but you can readily do <code>my_sparse_array[:, 0::5].sum(axis=0)</code> etc.  Since indexing like this, and sum are both implemented as matrix multiplications, it might be possible to construct a suitable matrix such that <code>my_sparse_array * M</code> produces the desired result (at least for one group at a time).  However you do it I think you&#39;ll have to iterate through the groups to get to the full set."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 2, "creation_date": 1545866174, "post_id": 53937784, "comment_id": 94716247, "body": "Show us how you&#39;d do this grouping for a small matrix (and group).  It could be dense if that&#39;s easier.  And for a start don&#39;t worry about efficiency.  We need a clearly define task first."}, {"owner": {"reputation": 1769, "user_id": 8364914, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c675c8b4c6b0d5356a5233a08d0a0230?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Arnestad", "link": "https://stackoverflow.com/users/8364914/jack-arnestad"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1545868519, "post_id": 53937784, "comment_id": 94716647, "body": "@hpaulj Hi, Thanks for the comment. I updated the question with a solution that is probably sub-optimal, if you could help improve this it would be appreciated. Thanks!"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1545872264, "post_id": 53937784, "comment_id": 94717177, "body": "A few iterations, e.g. 5, with a complex task like indexing and summing a large sparse matrix, isn&#39;t inefficient.  What we try to avoid in <code>numpy</code> is many iterations on a simple task."}], "owner": {"reputation": 1769, "user_id": 8364914, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c675c8b4c6b0d5356a5233a08d0a0230?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Arnestad", "link": "https://stackoverflow.com/users/8364914/jack-arnestad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545868450, "creation_date": 1545863067, "last_edit_date": 1545868450, "question_id": 53937784, "link": "https://stackoverflow.com/questions/53937784/computing-sum-by-group-on-sparse-array", "title": "Computing sum by group on sparse array", "body": "<p>I have a sparse array like the following:</p>\n\n<pre><code>import scipy\nmy_sparse_array = scipy.sparse.random(2000, 1000000, density=0.01, format='csr')\n</code></pre>\n\n<p>And for each row, I have a group:\n    groups = [\"A\", \"A\", \"B\", \"C\", \"D\"] * 400</p>\n\n<p>Based on these groups, I want to get a sum of each column, and output an array with the rows now being the total group sum, and each column staying the same.</p>\n\n<p>How can this be efficiently done with a sparse matrix?</p>\n\n<p>Thanks,\nJack</p>\n\n<p>EDIT:</p>\n\n<p>One way of doing this might be to do the following:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\nresults = {}\ngroup_set = set(groups)\nfor group in group_set:\n    indices = np.where(np.array(groups) == group)[0]\n    results[group] = my_sparse_array[indices, :].sum(axis=0).A1\n\nfinal_result = pd.DataFrame(results)\n</code></pre>\n\n<p>However, I was wondering if there was a more efficient way other than looping through groups and subsetting. </p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 664, "user_id": 8267726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8aeb3d0091a49e48cf9bd6c27a66b7?s=128&d=identicon&r=PG&f=1", "display_name": "andersource", "link": "https://stackoverflow.com/users/8267726/andersource"}, "edited": false, "score": 1, "creation_date": 1545863152, "post_id": 53937777, "comment_id": 94715635, "body": "See <a href=\"https://stackoverflow.com/questions/3057916/can-django-lazy-load-fields-in-a-model\">this question</a> on how to lazy-load fields in a model, which I think is what you&#39;re after."}], "answers": [{"tags": [], "owner": {"reputation": 1593, "user_id": 4593642, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203096678250304/picture?type=large", "display_name": "Amine Messaoudi", "link": "https://stackoverflow.com/users/4593642/amine-messaoudi"}, "is_accepted": false, "score": 1, "last_activity_date": 1545864042, "creation_date": 1545864042, "answer_id": 53937905, "question_id": 53937777, "link": "https://stackoverflow.com/questions/53937777/ignore-one-field-in-a-django-model/53937905#53937905", "title": "Ignore one field in a django model", "body": "<p>You can use only() to specify the fields you want</p>\n\n<pre><code>File.objects.only('id', 'data')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4627, "user_id": 4751726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/753e26289b63b945ca709576ebb603ea?s=128&d=identicon&r=PG", "display_name": "shafik", "link": "https://stackoverflow.com/users/4751726/shafik"}, "is_accepted": true, "score": 1, "last_activity_date": 1545877179, "creation_date": 1545877179, "answer_id": 53939068, "question_id": 53937777, "link": "https://stackoverflow.com/questions/53937777/ignore-one-field-in-a-django-model/53939068#53939068", "title": "Ignore one field in a django model", "body": "<p>In some complex data-modeling situations, your models might contain a lot of fields, some of which could contain a lot of data (for example, text fields), or require expensive processing to convert them to Python objects. If you are using the results of a queryset in some situation where you don\u2019t know if you need those particular fields when you initially fetch the data, you can tell Django not to retrieve them from the database.</p>\n\n<p>This is done by passing the names of the fields to not load to <code>defer()</code>:</p>\n\n<pre><code>Entry.objects.defer(\"headline\", \"body\")\n</code></pre>\n\n<p>Also mention that, Whenever you call <code>only()</code> it replaces the set of fields to load immediately. The method\u2019s name is mnemonic: only those fields are loaded immediately; the remainder are deferred. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10332687"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2894, "favorite_count": 0, "accepted_answer_id": 53939068, "answer_count": 2, "score": 3, "last_activity_date": 1545877179, "creation_date": 1545863026, "question_id": 53937777, "link": "https://stackoverflow.com/questions/53937777/ignore-one-field-in-a-django-model", "title": "Ignore one field in a django model", "body": "<p>I have a django model that has the following four fields:</p>\n\n<pre><code>class File:\n    id = models.PrimaryKey()\n    name = models.CharField()\n    is_active = models.BooleanField()\n    data = models.JSONField()\n</code></pre>\n\n<p>The <code>data</code> field is massive, perhaps 5MB per entry. Is there a way I can hide that field when I do an ORM query without having to specify all the fields I want to view each time? Something like:</p>\n\n<pre><code>File.objects.all() # exclude data field\nFile.objects.values('id', 'data') # include the data field\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "tensorflow-estimator"], "answers": [{"tags": [], "owner": {"reputation": 3940, "user_id": 5786339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ffdd81c1ba86b86ddd3eddd4eb1f99a?s=128&d=identicon&r=PG&f=1", "display_name": "Sharky", "link": "https://stackoverflow.com/users/5786339/sharky"}, "is_accepted": false, "score": 0, "last_activity_date": 1550779822, "creation_date": 1550779822, "answer_id": 54815451, "question_id": 53937766, "link": "https://stackoverflow.com/questions/53937766/freezing-and-unfreezing-network-layers-in-tf-estimator/54815451#54815451", "title": "Freezing and Unfreezing network layers in TF Estimator", "body": "<p>You can return 2 train_op by grouping them together. </p>\n\n<pre><code>def ModelFunction(features, labels, mode, params):\n    if mode == tf.estimator.ModeKeys.TRAIN:\n        layerTrainingVars = tf.get_collection(tf.GraphKeys.TRAINABLE_VARIABLES, \"LayerName\")\n        #Train Op for freezing layers\n        freeze_train_op = optimizer.minimize(loss, global_step=tf.train.get_global_step(), var_list=layerTrainingVars)\n        #Train Op for training all layers\n        train_op = optimizer.minimize(loss, global_step=tf.train.get_global_step())\n        estimatorSpec = tf.estimator.EstimatorSpec(mode=mode, loss=loss, train_op=tf.group(freeze_train_op, train_op))\n\n    return estimatorSpec\n</code></pre>\n\n<p>But this won't take into account different iterations. If you want to train different set of variables on different iterations and don't want to stop training and load weights from checkpoint, you need to use session. Estimator api doesn't allow session management.</p>\n"}], "owner": {"reputation": 11, "user_id": 10836726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xAXJRY6uAAM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbzrQNICYdc4g3fPEVfYXhoIjLg0Q/mo/photo.jpg?sz=128", "display_name": "sskkgg", "link": "https://stackoverflow.com/users/10836726/sskkgg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 868, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1609761615, "creation_date": 1545862915, "last_edit_date": 1545940528, "question_id": 53937766, "link": "https://stackoverflow.com/questions/53937766/freezing-and-unfreezing-network-layers-in-tf-estimator", "title": "Freezing and Unfreezing network layers in TF Estimator", "body": "<p>I am using the TF Estimator to train my model on a dataset. For the first few training iterations, I want to freeze certain layers in the network. For the remaining iterations I want to unfreeze these layers. </p>\n\n<p>I found some solutions where we have two different optimizer train_ops in the estimator's model_fn.</p>\n\n<pre><code>def ModelFunction(features, labels, mode, params):\n    if mode == tf.estimator.ModeKeys.TRAIN:\n        layerTrainingVars = tf.get_collection(tf.GraphKeys.TRAINABLE_VARIABLES, \"LayerName\")\n        #Train Op for freezing layers\n        freeze_train_op = optimizer.minimize(loss, global_step=tf.train.get_global_step(), var_list=layerTrainingVars)\n        #Train Op for training all layers\n        train_op = optimizer.minimize(loss, global_step=tf.train.get_global_step())\n        #Based on whether we want to freeze or not, we send the corresponding train_op to the estimatorSpec. How do I do this?\n        estimatorSpec = tf.estimator.EstimatorSpec(mode=mode, loss=loss, train_op=freeze_train_op)\n\n    return estimatorSpec\n</code></pre>\n\n<p>For the above solution, the corresponding EstimatorSpec could be returned based on the train_op. I tried using the freeze_train_op for a few training iterations, and then killing the process, and changing the train_op to have no layer freezing in the code. After doing this, there is a checkpoint error, which says that the graphs/variables saved in the checkpoints are different. I guess the first set of iterations did not save the frozen layers. How do I switch train_ops programmatically such that checkpointing works too? </p>\n\n<p>Is there any better way to go about freezing/unfreezing layers for training in TF.Estmator?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 169, "user_id": 7449967, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-44DpQkzhx8Q/AAAAAAAAAAI/AAAAAAAACc8/wEjqJzMC9UE/photo.jpg?sz=128", "display_name": "matusf", "link": "https://stackoverflow.com/users/7449967/matusf"}, "edited": false, "score": 0, "creation_date": 1545862800, "post_id": 53937683, "comment_id": 94715560, "body": "What is the exception you are getting?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1545864107, "post_id": 53937683, "comment_id": 94715834, "body": "You probably just want <code>patch(&#39;foo&#39;)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1436, "user_id": 727238, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5d098a48ad5efbe0e59cb39b36b8bb36?s=128&d=identicon&r=PG", "display_name": "ardabro", "link": "https://stackoverflow.com/users/727238/ardabro"}, "edited": false, "score": 1, "creation_date": 1546022530, "post_id": 53938143, "comment_id": 94763515, "body": "Thanks! Of course &#39;<b>main</b>&#39; is the core that I missed."}], "tags": [], "owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "is_accepted": true, "score": 1, "last_activity_date": 1545866232, "creation_date": 1545866232, "answer_id": 53938143, "question_id": 53937683, "link": "https://stackoverflow.com/questions/53937683/why-i-cannot-effectively-mock-function-with-unittest-mock-patch/53938143#53938143", "title": "Why I cannot effectively mock function with unittest.mock.patch?", "body": "<p>Here is a way to use <code>unittest.mock.patch</code> and patch the <code>foo</code> returns. See the comments in the example:</p>\n\n<pre><code>import unittest\nfrom unittest.mock import patch\n\n\ndef foo():\n        raise Exception(\"Not implemented\")\n\n\ndef bar():\n        return foo()\n\n\nclass UT(unittest.TestCase):\n\n        def testBar(self):\n            # foo is mocked to raise a ValueError and catch it during the test\n            with patch('__main__.foo', side_effect=ValueError):\n                with self.assertRaises(ValueError):\n                    bar()\n\n            # foo is mocked to raise and exception and catch it during the test\n            with patch('__main__.foo', side_effect=Exception):\n                with self.assertRaises(Exception):\n                    bar()\n\n            # foo is mocked to return 1\n            with patch('__main__.foo', return_value=1):\n                self.assertEqual(bar(), 1, \"Should be equal to 1\")\n\n            # foo is mocked to return an object\n            with patch('__main__.foo', return_value={}):\n                self.assertIsInstance(bar(), dict, \"Should be an instance of dict\")\n\n\nunittest.main()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>.\n----------------------------------------------------------------------\nRan 1 test in 0.001s\n\nOK\n</code></pre>\n\n<p>For more informations, please visit the <a href=\"https://docs.python.org/3/library/unittest.mock.html\" rel=\"nofollow noreferrer\">official documentation</a></p>\n"}], "owner": {"reputation": 1436, "user_id": 727238, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5d098a48ad5efbe0e59cb39b36b8bb36?s=128&d=identicon&r=PG", "display_name": "ardabro", "link": "https://stackoverflow.com/users/727238/ardabro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 53938143, "answer_count": 1, "score": 1, "last_activity_date": 1545866232, "creation_date": 1545862085, "question_id": 53937683, "link": "https://stackoverflow.com/questions/53937683/why-i-cannot-effectively-mock-function-with-unittest-mock-patch", "title": "Why I cannot effectively mock function with unittest.mock.patch?", "body": "<p>I'm trying to write UT for function with other function mocked. Both lies in the same module. It appears that <strong>unittest.mock.patch()</strong> call passes without error but doesn't mock anything so I'm getting exception in the example code. So, my question is: How to mock <strong>foo</strong> with <strong>unittest.mock.patch</strong> ?</p>\n\n<pre><code>import unittest\nimport unittest.mock\n\ndef foo():\n        raise Exception(\"not implemented\")\n\ndef bar():\n        foo()\n\nclass UT(unittest.TestCase):\n\n        def testBar(self):\n                with unittest.mock.patch('mock_test.foo',spec=True) as mock_foo:\n                        bar()    # &lt;- original foo is called here\n\nunittest.main()\n</code></pre>\n"}, {"tags": ["python", "nlp", "whoosh"], "comments": [{"owner": {"reputation": 1930, "user_id": 1904485, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IZQVu.jpg?s=128&g=1", "display_name": "Tomasz Swider", "link": "https://stackoverflow.com/users/1904485/tomasz-swider"}, "edited": false, "score": 0, "creation_date": 1545894881, "post_id": 53937669, "comment_id": 94721502, "body": "I would post your question on the whoosh mailing list <a href=\"https://groups.google.com/forum/#!forum/whoosh\" rel=\"nofollow noreferrer\">groups.google.com/forum/#!forum/whoosh</a>,  there is a post there somebody claiming to index 13M documents, so maybe there is a work around for 32 bit issue ?"}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 4204963, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh5.googleusercontent.com/-ojT7rl8i96E/AAAAAAAAAAI/AAAAAAAAAC4/z3N5rWV8dVs/photo.jpg?sz=128", "display_name": "Chum-Chum Scarecrows", "link": "https://stackoverflow.com/users/4204963/chum-chum-scarecrows"}, "edited": false, "score": 0, "creation_date": 1545894953, "post_id": 53941145, "comment_id": 94721534, "body": "Can you think of any alternatives that still involve Whoosh? Is it possible to use multiple indexes in a way that mimics a single index, or some other trick?"}], "tags": [], "owner": {"reputation": 6574, "user_id": 355715, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f93c8a055ea603ef33fff3e1b2ea4feb?s=128&d=identicon&r=PG", "display_name": "polm23", "link": "https://stackoverflow.com/users/355715/polm23"}, "is_accepted": false, "score": 0, "last_activity_date": 1545894738, "creation_date": 1545894738, "answer_id": 53941145, "question_id": 53937669, "link": "https://stackoverflow.com/questions/53937669/integer-too-large-error-with-vectoring-during-whoosh-indexing/53941145#53941145", "title": "Integer too large error with vectoring during whoosh indexing", "body": "<p>It looks like the field that is used as a document index is only designed to be a 32-bit unsigned int, which gives you a limit of roughly 4M documents. </p>\n\n<p>Based on <a href=\"https://bitbucket.org/mchaput/whoosh/issues/460/overflowerror-when-writer-adds-document\" rel=\"nofollow noreferrer\">this issue</a> in the official Whoosh repository, simply changing the size of that field causes problems elsewhere, so it can't be solved trivially.</p>\n\n<p>Since Whoosh is not actively maintained, unless you want to dig into the source you should probably explore alternatives.</p>\n"}], "owner": {"reputation": 399, "user_id": 4204963, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh5.googleusercontent.com/-ojT7rl8i96E/AAAAAAAAAAI/AAAAAAAAAC4/z3N5rWV8dVs/photo.jpg?sz=128", "display_name": "Chum-Chum Scarecrows", "link": "https://stackoverflow.com/users/4204963/chum-chum-scarecrows"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1545894738, "creation_date": 1545862000, "last_edit_date": 1545893147, "question_id": 53937669, "link": "https://stackoverflow.com/questions/53937669/integer-too-large-error-with-vectoring-during-whoosh-indexing", "title": "Integer too large error with vectoring during whoosh indexing", "body": "<p>I am trying to use Whoosh to index a large corpus (roughly 25 million academic abstracts + titles). I marked the \"abstract\" field with <code>vector=True</code> because I need to be able to compute high scoring key terms based on the abstracts for similarity IR. </p>\n\n<p>However after about 4 million entries during indexing it crashed with the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"...\", line 256, in &lt;module&gt;\n    ...\n  File \"/home/nlp/*/anaconda3/envs/riken/lib/python3.6/site-packages/whoosh/writing.py\", line 771, in add_document\n    perdocwriter.add_vector_items(fieldname, field, vitems)\n  File \"/home/nlp/*/anaconda3/envs/riken/lib/python3.6/site-packages/whoosh/codec/whoosh3.py\", line 244, in add_vector_items\n    self.add_column_value(vecfield, VECTOR_COLUMN, offset)\n  File \"/home/nlp/*/anaconda3/envs/riken/lib/python3.6/site-packages/whoosh/codec/base.py\", line 821, in add_column_value\n    self._get_column(fieldname).add(self._docnum, value)\n  File \"/home/nlp/*/anaconda3/envs/riken/lib/python3.6/site-packages/whoosh/columns.py\", line 678, in add\n    self._dbfile.write(self._pack(v))\nstruct.error: 'I' format requires 0 &lt;= number &lt;= 4294967295\n</code></pre>\n\n<p>Schema:</p>\n\n<pre><code>schema = Schema(title=TEXT(stored=False, phrase=False, field_boost=2.0, analyzer=my_analyzer, vector=True),\n    abstract=TEXT(stored=False, phrase=False, analyzer=my_analyzer, vector=True),\n    pmid=ID(stored=True),\n    mesh_set=KEYWORD(stored=True, scorable=True),\n    stored_title=STORED,\n    stored_abstract=STORED)\n</code></pre>\n\n<p>The index folder currently weights around 45GB. What exactly is the issue here? Is Whoosh simply not built to carry this amount of data? </p>\n"}, {"tags": ["python", "byte"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1545862311, "post_id": 53937652, "comment_id": 94715445, "body": "&quot;However, I am looking for a way to create a reference to a byte array, as an integer.&quot; Such a thing does not exist in Python. If you want to work with stuff like that, use C. Python is a purely object-oriented language. Everything is an object. There are no pointers in the language either."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1545862654, "post_id": 53937652, "comment_id": 94715535, "body": "Although, there may be something in the <code>ctypes</code> module to approximate what you are looking for, this screams XY problem to me. What is it that you are <i>actually</i> trying to accomplish? Why can&#39;t you just use the <code>bytearray</code> when you need an integer? Note, <code>arr[i]</code> will return an <code>int</code> type (which gets created on the fly)."}, {"owner": {"reputation": 2104, "user_id": 5129504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/476994845791992/picture?type=large", "display_name": "Josh Weinstein", "link": "https://stackoverflow.com/users/5129504/josh-weinstein"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1545864573, "post_id": 53937652, "comment_id": 94715914, "body": "@juanpa.arrivillaga I am trying to see if it&#39;s possible in python to make a byte code reader, that can read packed, typed data that&#39;s stored in binary. However, I am seeing the <code>struct</code> module may be more what i am looking for. I guess the reference idea might not be doable for python."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1545864898, "post_id": 53937652, "comment_id": 94715977, "body": "Actually, that&#39;s undefined behavior even in C. To do it legally you have to have an <code>int</code> object that is aliased by a <code>char *</code>, not the other way around."}], "answers": [{"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 1, "last_activity_date": 1545865215, "creation_date": 1545865215, "answer_id": 53938035, "question_id": 53937652, "link": "https://stackoverflow.com/questions/53937652/reference-a-byte-array-as-an-integer/53938035#53938035", "title": "Reference a byte array as an integer", "body": "<p>Something along these lines seems close to what you want:</p>\n\n<pre><code>import _ctypes\n\ndef di(obj_id):\n    \"\"\" Reverse of id() function. \"\"\"\n    # from https://stackoverflow.com/a/15012814/355230\n    return _ctypes.PyObj_FromPtr(obj_id)\n\ndef func(obj_id):\n    ba = di(obj_id)\n    ba[0] += 50\n\ndata = bytearray([1, 0, 0, 0])\nfunc(id(data))\n\nprint('bytes is now {} {} {} {}'.format(*data))  # -&gt; bytes is now 51 0 0 0\n</code></pre>\n"}], "owner": {"reputation": 2104, "user_id": 5129504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/476994845791992/picture?type=large", "display_name": "Josh Weinstein", "link": "https://stackoverflow.com/users/5129504/josh-weinstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 53938035, "answer_count": 1, "score": 0, "last_activity_date": 1545865215, "creation_date": 1545861869, "last_edit_date": 1545864112, "question_id": 53937652, "link": "https://stackoverflow.com/questions/53937652/reference-a-byte-array-as-an-integer", "title": "Reference a byte array as an integer", "body": "<p>In Python, I am aware certain methods exist in python 3 that can create a new integer from an existing byte array. However, I am looking for a way to create a reference to a byte array, as an integer. Such that, if the reference is changed, then the underlying byte array is also changed.</p>\n\n<p>In C, this would be done like the following:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int main(void) {\n  unsigned char bytes[4] = {1, 0, 0, 0};\n  int* int_ref = (int*)bytes;\n  *int_ref += 59;\n  printf(\"bytes is now %u %u %u %u\\n\",\n                        bytes[0],\n                        bytes[1],\n                        bytes[2],\n                        bytes[3]);\n  return 0;\n}\n</code></pre>\n\n<p>The above program prints <code>60</code>. I am looking for a way to do this in Python. </p>\n"}, {"tags": ["python", "scipy", "constraints", "minimize"], "owner": {"reputation": 11, "user_id": 10827788, "user_type": "registered", "profile_image": "https://graph.facebook.com/778579132490556/picture?type=large", "display_name": "Jingxi Xu", "link": "https://stackoverflow.com/users/10827788/jingxi-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546271509, "creation_date": 1545861593, "last_edit_date": 1546271509, "question_id": 53937619, "link": "https://stackoverflow.com/questions/53937619/scipy-minimizemethod-slsqp-returns-success-even-though-constraints-are-not-s", "title": "Scipy minimize(method=\u2019SLSQP\u2019) returns success even though constraints are not satisfied", "body": "<p>I am trying to find a feasible point which satisfies a set of nonlinear constraints. I am using <code>scipy</code>'s Sequential Quadratic Programming (SQP) minimizer to do this. My simple example is </p>\n\n<pre><code>target = lambda x: 1\ncons = ({'type': 'ineq', 'fun': lambda x: 1/2*np.sin(x[0])-0.48 + x[1]/150},\n        {'type': 'ineq', 'fun': lambda x: -np.sin(x[2])*-np.sin(x[1])-0.99})\nbnds = ((0, 6), (0, 6), (0, 6))\nres = minimize(target, (0, 0, 0), method='SLSQP', bounds=bnds, constraints=cons, options={'disp':True, 'maxiter':10000})\n</code></pre>\n\n<p>However, the returned result is:</p>\n\n<pre><code>the value of g1: -0.48\nthe value of g2: -0.99\nfun: 1.0\njac: array([0., 0., 0.])\nmessage: 'Optimization terminated successfully.'\nnfev: 5\nnit: 5\nnjev: 1\nstatus: 0\nsuccess: True\nx: array([0., 0., 0.])\n</code></pre>\n\n<p>It seems that even though the constraints are not satisfied at all (the values of <code>g1</code> and <code>g2</code> are all negative), the optimizer still thinks that it terminates successfully. I understand that by changing the initial point, for example, to (0, 0, 1), it will successfully find the correct feasible solution, but shouldn't SQP work for a not feasible initial point? If not, shouldn't <code>scipy</code> report failure (or bad initial point) instead of return a fake solution?</p>\n"}, {"tags": ["python", "multithreading", "sockets", "tkinter"], "comments": [{"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1545861744, "post_id": 53937597, "comment_id": 94715303, "body": "Your socket code is broken. TCP is a streaming protocol, there is nothing like messages. Use a well known protocol instead."}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1545862080, "post_id": 53937597, "comment_id": 94715378, "body": "Each client will have to have a unique persistent socket for you to be able to send messages back to it.   This means the socket must be part of the server side representation of the clients.  The socket connections will need to remain open if you hope to relay other client messages back through it.  Having clients listen on other sockets is not a good idea because it interferes with NAT and firewalls."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5407570"}, "reply_to_user": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1545862149, "post_id": 53937597, "comment_id": 94715402, "body": "@Daniel What do you mean by &#39;nothing like messages&#39;? The messages I refer to are simply just strings to send to each client."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5407570"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1545862262, "post_id": 53937597, "comment_id": 94715439, "body": "@DanFarrell Yes, after previous attempts I realised that the connection was being closed before the messages could be sent but I&#39;m not sure why. From your comment, you&#39;re suggesting I create the two sockets (will only ever be two clients at a time) in the server file?"}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1545878161, "post_id": 53937597, "comment_id": 94717976, "body": "@Ernxst What Daniel means is that if you <code>send(b&#39;abc&#39;)</code> and <code>send(b&#39;def&#39;)</code>, the <code>recv(4096)</code> could get all 6 bytes at once <code>b&#39;abcdef&#39;</code>.  TCP is a streaming protocol and it is &quot;just bytes&quot;...you can&#39;t tell where one message ends and another begins and they can be broken up.  <b>You</b> have to define a way to tell where a message begins and ends, and buffer <code>recv</code> and extract only complete messages."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5407570"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1545908696, "post_id": 53937597, "comment_id": 94726617, "body": "@MarkTolonen I understand, maybe I could use the port number attached onto the end of the message as a delimiter? I don&#39;t plan on sending any other integer data."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5407570"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1545933114, "post_id": 53937597, "comment_id": 94736358, "body": "@DanFarrell See updated question, is this something like you suggested? Need a little more guidance."}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1545934955, "post_id": 53937597, "comment_id": 94736971, "body": "Well, that&#39;s all quite complex and I feel like you&#39;re overthinking this, but I don&#39;t have a PofC for you exactly.  Python threading is one way to do this, but select() might be a more straightforward ( and due to python&#39;s GIL just as or more performant) mechanism.  <a href=\"https://pymotw.com/2/select/\" rel=\"nofollow noreferrer\">pymotw.com/2/select</a> actually hs an example &quot;echo&quot; server just like you want to build, and it&#39;s single threaded.  Only issue is they make the common mistake of breaking up the code on that page so it&#39;s hard to see hte whole algorithm."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5407570"}, "edited": false, "score": 0, "creation_date": 1546004011, "post_id": 53951135, "comment_id": 94756304, "body": "Brilliant. I had come across select before but I thought I&#39;d first try something with threading before learning something new but this seems far simpler. Thank you for your help +1. Now I only have one further question, how would I buffer the server to wait until both clients have connected to the server before attempting to send messages back? Currently, the second client does not receive the message sent by client 1 because they haven&#39;t connected yet. I&#39;ve tried waiting until the length of writeable is &gt; 1 but need further guidance..."}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1546016054, "post_id": 53951135, "comment_id": 94761117, "body": "If you saved every message a client sent to a universal &quot;all messages&quot; list ou could then add that list of messages to new clients&#39; newly created queues.  The order matters: you would want to make sure that they didn&#39;t get the same message twice in the case that messages came in at the same time they connected.  Of course, the next problem would be that the list would grow indefinitely, so you might have to impose some size constraint on the list of historical messages.  Does that make sense?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5407570"}, "edited": false, "score": 0, "creation_date": 1546018783, "post_id": 53951135, "comment_id": 94762130, "body": "Ah, I see ... it makes perfect sense, thanks for everything!"}], "tags": [], "owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "is_accepted": true, "score": 1, "last_activity_date": 1545946784, "creation_date": 1545946784, "answer_id": 53951135, "question_id": 53937597, "link": "https://stackoverflow.com/questions/53937597/multithreading-sockets-with-a-central-relay-like-server/53951135#53951135", "title": "Multithreading sockets with a central relay-like server", "body": "<p>Are you committed to multithreading?  Threads don't run concurrently in python ( due to the GIL), and while they are one way to handle concurrent operations, they aren't the only way and usually they're not the best way, unless they're the only way.  Consider this code, which doesn't handle failure cases well, but seems to work as a starting point.  </p>\n\n<pre><code>import socket, select, Queue\n\nsvrsock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nsvrsock.setblocking(0)\nsvrsock.bind(('', 17654))\nsvrsock.listen(16)\nclient_queues = {}\nwrite_ready=[] # we'll update this for clients only that have things in the queue\nwhile client_queues.keys() + [svrsock] :\n  readable, writable, exceptional = select.select(client_queues.keys() + [svrsock] , write_ready, [])\n  for rd in readable:\n    if rd is svrsock: # reading listening socket == accepting connection\n      conn, addr = svrsock.accept()\n      print(\"Connection from {}\".format(addr))\n      conn.setblocking(0)\n      client_queues[conn] = Queue.Queue()\n    else:\n      data = rd.recv(1024)\n      if data:\n        # TODO: send to all queues\n        print(\"Message from {}\".format(rd.getpeername()))\n        for sock, q in client_queues.iteritems(): \n          q.put(\"From {}: {}\".format( rd.getpeername(), data))\n          if sock not in write_ready:\n            write_ready.append(sock)\n  for rw in writable:\n    try:\n      data = client_queues[rw].get_nowait()\n      rw.send(data)\n    except Queue.Empty:\n      write_ready.remove(rw)\n      continue\n</code></pre>\n\n<p>The concept is pretty simple.  The server accepts connections; each connection (socket) is associated with a queue of pending messages.  Each socket that's ready for reading is read from, and its message is added to each client's queue. The recipient client is added into the <code>write_ready</code> list of clients with data pending, if it's not already in there. Then each socket that's ready for writing has its next queued message written to it.  If there are no more messages, the recipient is removed from the <code>write_ready</code> list.  </p>\n\n<p>This is very easy to orchestrate if you don't use multithreading because all coordination is inherent in the order of the application.  With threads it would be more difficult and a lot more code, but probably not more performance due to the gil.  </p>\n\n<p>The secret to handling multiple I/O streams concurrently <em>without</em> multithreading is <code>select</code>.  In principle it's pretty easy; we pass <code>select()</code> a list of possible sockets for reading, another list of possible sockets for writing, and a final list that for this simplified demo I completely ignore .  The results of the select call will include one or more sockets that are <em>actually</em> ready for reading or writing, which allows me to block until one or more sockets are ready for activity.  I then process all the sockets ready for activity every pass ( but they've already been filtered down to just those which wouldn't block).  </p>\n\n<p>There's a ton still to be done here.  I don't cleanup after myself, don't track closed connections, don't handle any exceptions, and so on.  but without having to worry about threading and concurrency guarantees, it's pretty easy to start addressing these deficiencies.  </p>\n\n<p>Here it is \"in action\".  Here for the client side I use netcat, which is perfect for layer 3 testing without layer 4+ protocols ( in other words, raw tcp so to speak).  It simply opens a socket to the given destination and port and sends its stdin through the socket and sends its socket data to stdout, which makes it perfect for demoing this server app!  </p>\n\n<p>I also wanted to point out, coupling code between server and client is inadvisable because you won't be able to roll out changes to either without breaking the other.  It's ideal to have a \"contract\" so to speak between server and client and maintain it.  Even if you implement the behavior of server and client in the same code base, you should use the tcp communications contract to drive your implementation, not code sharing.  Just my 2 cents, but once you start sharing code you often start coupling server/client versions in ways you didn't anticipate.  </p>\n\n<p>the server:</p>\n\n<pre><code>$ python ./svr.py\nConnection from ('127.0.0.1', 52059)\nConnection from ('127.0.0.1', 52061)\nMessage from ('127.0.0.1', 52061)\nMessage from ('127.0.0.1', 52059)\nMessage from ('127.0.0.1', 52059)\n</code></pre>\n\n<p>First client ( 52059):</p>\n\n<pre><code>$ nc localhost 17654\nhello\nFrom ('127.0.0.1', 52061): hello\nFrom ('127.0.0.1', 52059): hello\nFrom ('127.0.0.1', 52059): hello\n</code></pre>\n\n<p>Second client: </p>\n\n<pre><code>$ nc localhost 17654\nFrom ('127.0.0.1', 52061): hello\nhello\nFrom ('127.0.0.1', 52059): hello\nhello\nFrom ('127.0.0.1', 52059): hello\n</code></pre>\n\n<p>If you need more convincing on why <code>select</code> is way more compelling than concurrent execution, consider this:  Apache is based on a threading model, in other words, the connections each get a worker thread .  nginx is based on a <code>select</code> model, so you can see how much faster that can potentially be.  Not to say that nginx is inherently better, as Apache benefits from the threading model because of its heavy use of modules to extend capabilities ( mod_php for example), whereas nginx doesn't have this limitation and can handle all requests from any thread.  But the raw performance of nginx is typically considered far higher and far more efficient, and a big reason for this is that it avoids almost all the cpu context switches inherent in apache.  It's a valid approach!</p>\n\n<p>A word on scaling.  Obviously, this wouldn't scale forever.  Neither would a threading model; eventually you run out of threads.  A more distributed and high throughput system would likely use a Pub/Sub mechanism of some kind, offloading the client connection tracking and message queueing from the server to a pub/sub data tier and allowing connections to be restored and queued data to be sent, as well as adding multiple servers behind a load balancer.  Just throwing it out there.  You might be pleasantly surprised how well <code>select</code> can scale ( cpu is so much faster than network anyway that it's likely not the bottleneck).  </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5407570"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 53951135, "answer_count": 1, "score": 2, "last_activity_date": 1545946784, "creation_date": 1545861396, "last_edit_date": 1545927055, "question_id": 53937597, "link": "https://stackoverflow.com/questions/53937597/multithreading-sockets-with-a-central-relay-like-server", "title": "Multithreading sockets with a central relay-like server", "body": "<p>I have previously managed to implement a client-server socket script which relays messages between a single client and the server and I'm now trying to implement a multiple-client system.</p>\n\n<p>More specifically, I would like to use the server as some sort of medium between two clients which retrieves information from one client and relays it to the other. I had tried to attach and send the port number of the receiving client and then extract it from the message on the server side. After that, I would try and send it to whatever socket with that port number but I ran into some trouble (as port numbers are determined at the point of sending I believe?) so now I am simply just trying to relay the sent message back to all clients. However, the problem is that the message is only being sent to the server and not being relayed to the desired client.</p>\n\n<p>I had previously tried to implement a peer-to-peer system but I ran into trouble so I decided to take a step back and do this instead.</p>\n\n<p>Server.py:</p>\n\n<pre><code>import socket, _thread, threading\nimport tkinter as tk\n\nSERVERPORT = 8600\nHOST = 'localhost'\n\nclass Server():\n    def __init__(self):\n        self.Connected = True\n        self.ServerSocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n        self.ServerSocket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR,1)\n        self.ServerSocket.bind((HOST, SERVERPORT))\n        self.ServerSocket.listen(2)\n        self.Clients = []\n\n    def Listen(self):\n        print('Server is now running')\n        while self.Connected:\n            ClientSocket, Address = self.ServerSocket.accept()\n            self.Clients.append(Address)\n            print('\\nNew user connected', Address)\n            t = threading.Thread(target=self.NewClient, args=(ClientSocket,\n                                                              Address))\n            t.daemon = True\n            t.start()\n        self.Socket.close()\n\n    def NewClient(self, ClientSocket, Address):\n        while self.Connected:\n            if ClientSocket:\n                try:\n                    ReceivedMsg = ClientSocket.recv(4096)\n                    print('Message received from', Address, ':', ReceivedMsg)\n                    self.Acknowledge(ClientSocket, Address)\n                    if ReceivedMsg.decode('utf8').split()[-1] != 'message':\n                        ReceiverPort = self.GetSendPort(ReceivedMsg)\n                        self.SendToClient(ClientSocket,ReceivedMsg,ReceiverPort)\n                except:\n                    print('Connection closed')\n                    raise Exception\n        ClientSocket.close()\n\n    def Acknowledge(self, Socket, Address):\n        Socket.sendto(b'The server received your message', Address)\n\n    def GetSendPort(self, Msg):\n        MsgDigest = Msg.decode('utf8').split()\n        return int(MsgDigest[-1])\n\n    def SendToClient(self, Socket, Msg, Port):\n        Addr = (HOST, Msg) \n        for Client in self.Clients:\n            Socket.sendto(Msg, Client)\n\ndef NewThread(Func, *args):\n    if len(args) == 1:\n        t = threading.Thread(target=Func, args=(args,))\n    elif len(args) &gt; 1:\n        t = threading.Thread(target=Func, args=args)\n    else:\n        t = threading.Thread(target=Func)\n    t.daemon = True\n    t.start()\n    t.join()\n\nHost = Server()\nNewThread(Host.Listen)\n</code></pre>\n\n<p>And the Client(.py):</p>\n\n<pre><code>import socket, threading\nimport tkinter as tk\n\nUsername = 'Ernest'\nPORT = 8601\nOtherPORT = 8602\nSERVERPORT = 8600\nHOST = '127.0.0.1'\n\nclass Client():\n    def __init__(self, Username):\n        self.Connected, self.Username = False, Username\n        self.Socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n\n    def Connect(self):\n        print('Trying to connect')\n        try:\n            self.Socket.connect((HOST, SERVERPORT))\n            self.Connected = True\n            print(self.Username, 'connected to server')            \n            Msg = MsgUI(self.Username)\n            Msg.Display()            \n        except Exception:\n            print('Could not connect to server')\n            raise Exception\n\n    def SendMsg(self):\n        if self.Connected:\n            Msg = '{} sent you a message {}'.format(self.Username, OtherPORT)\n            self.Socket.sendall(bytes(Msg, encoding='utf8'))\n            self.GetResponse()\n\n    def GetResponse(self, *args):\n        AckMsg = '\\n{} received the message'.format(self.Username)\n        NMsg = '\\n{} did not receive the message'.format(self.Username)\n        if self.Connected:\n            Msg = self.Socket.recv(4096)\n            print(Msg)\n            if Msg:\n                self.Socket.sendall(bytes(AckMsg, encoding='utf8'))\n            else:\n                self.Socket.sendall(bytes(NMsg, encoding='utf8'))\n\nclass MsgUI():\n    def __init__(self, Username):\n        self.Username = Username\n        self.entry = tk.Entry(win)\n        self.sendbtn = tk.Button(win, text='send', command=Peer.SendMsg)\n\n    def Display(self):\n        self.entry.grid()\n        self.sendbtn.grid()\n        win.mainloop()\n\nwin = tk.Tk()\nPeer = Client(Username)\nPeer.Connect()\n</code></pre>\n\n<p>I want a message to be sent whenever the user presses the send button in the tkinter window, but at the same time, it is continually 'listening' to see if it received any messages. </p>\n\n<p>I also previously tried to run the <code>GetResponse</code> method in the Client in another thread and instead of <code>if self.Connected</code> I used <code>while self.Connected</code> and it still didn't work.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>After some helpful comments, I have edited the two files as such:\nThe server now holds the two sockets for each client which is run first. The server file is imported into the client file as a module. Each client file is then run and each client runs a function in the server file, requesting to use the socket. If the request is allowed (i.e. no error was thrown), the socket is connected, added to a set of clients stored in the server file and then returned to the client file. The client then uses this socket to send and receive messages.</p>\n\n<p>Server.py</p>\n\n<pre><code>import socket, _thread, threading\nimport tkinter as tk\n\nSERVERPORT = 8600\nHOST = 'localhost'\n\nclass Server():\n    def __init__(self):\n        self.Connected = True\n        self.ServerSocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n        self.ServerSocket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR,1)\n        self.ServerSocket.bind((HOST, SERVERPORT))\n        self.ServerSocket.listen(2)\n        self.Clients = {}\n\n    def ConnectClient(self, Username, Port):\n        Socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n        self.Clients[Username] = [Socket, Port, False]\n        try:\n            self.Clients[Username][0].connect((HOST, SERVERPORT))\n            self.Clients[Username][2] = True\n            print('Opened port for user', Username)\n            return Socket\n        except Exception:\n            print('Could not open port for user', Username)\n            raise Exception\n\n    def Listen(self):\n        print('Server is now running')\n        while self.Connected:\n            ClientSocket, Address = self.ServerSocket.accept()\n            print('\\nNew user connected', Address)\n            t = threading.Thread(target=self.NewClient, args=(ClientSocket,\n                                                              Address))\n            t.daemon = True\n            t.start()\n        self.Socket.close()\n\n    def NewClient(self, ClientSocket, Address):\n        while self.Connected:\n            if ClientSocket:\n                try:\n                    ReceivedMsg = ClientSocket.recv(4096)\n                    if b'attempting to connect to the server' in ReceivedMsg:\n                        ClientSocket.send(b'You are now connected to the server')\n                    else:\n                        print('Message received from', Address, ':',ReceivedMsg)\n                        #self.Acknowledge(ClientSocket, Address)\n                        ReceiverPort = self.GetSendPort(ReceivedMsg)\n                        if ReceiverPort != None:\n                            self.SendToClient(ClientSocket,ReceivedMsg,\n                                              ReceiverPort)\n                except:\n                    print('Connection closed')\n                    raise Exception\n        ClientSocket.close()\n\n    def Acknowledge(self, Socket, Address):\n        Socket.sendto(b'The server received your message', Address)\n\n    def GetSendPort(self, Msg):\n        MsgDigest = Msg.decode('utf8').split()\n        try:\n            Port = int(MsgDigest[-1])\n        except ValueError:\n            Port = None\n        return Port\n\n    def SendToClient(self, Socket, Msg, Port):\n        Addr = (HOST, Port)\n        Receiver = None\n        for Client, Vars in self.Clients.items():\n            if Vars[1] == Port:\n                Receiver = Client\n        self.Clients[Receiver][0].sendto(Msg, Addr)\n\ndef NewThread(Func, *args):\n    if len(args) == 1:\n        t = threading.Thread(target=Func, args=(args,))\n    elif len(args) &gt; 1:\n        t = threading.Thread(target=Func, args=args)\n    else:\n        t = threading.Thread(target=Func)\n    t.daemon = True\n    t.start()\n    t.join()\n\nHost = Server()\nif __name__ == '__main__':\n    NewThread(Host.Listen)\n</code></pre>\n\n<p>And Client.py</p>\n\n<pre><code>import socket, threading, Server\nimport tkinter as tk\n\nUsername = 'Ernest'\nPORT = 8601\nOtherPORT = 8602\nSERVERPORT = 8600\nHOST = '127.0.0.1'\n\nclass Client():\n    def __init__(self, Username):\n        self.Connected, self.Username = False, Username\n\n    def Connect(self):\n        print('Requesting to connect to server')\n        try:\n            self.Socket = Server.Host.ConnectClient(self.Username, PORT)\n            self.Connected = Server.Host.Clients[self.Username][2]\n            Msg = '{} is attempting to connect to the server'.format(self.Username)\n            self.Socket.sendall(bytes(Msg, encoding='utf8'))            \n            ReceivedMsg = self.Socket.recv(4096)\n            print(ReceivedMsg)\n            Msg = MsgUI(self.Username)\n            Msg.Display()            \n        except Exception:\n            print('Could not connect to server')\n            raise Exception\n\n    def SendMsg(self):\n        try:\n            if self.Connected:\n                Msg = '{} sent you a message {}'.format(self.Username,OtherPORT)\n                self.Socket.sendall(bytes(Msg, encoding='utf8'))\n                self.GetResponse()\n        except Exception:\n            print('Connection closed')\n            raise Exception\n\n    def GetResponse(self, *args):\n        AckMsg = '\\n{} received the message'.format(self.Username)\n        NMsg = '\\n{} did not receive the message'.format(self.Username)\n        if self.Connected:\n            Msg = self.Socket.recv(4096)\n            print(Msg)\n            if Msg:\n                self.Socket.sendall(bytes(AckMsg, encoding='utf8'))\n            else:\n                self.Socket.sendall(bytes(NMsg, encoding='utf8'))\n\nclass MsgUI():\n    def __init__(self, Username):\n        self.Username = Username\n        self.entry = tk.Entry(win)\n        self.sendbtn = tk.Button(win, text='send', command=Peer.SendMsg)\n\n    def Display(self):\n        self.entry.grid()\n        self.sendbtn.grid()\n        win.mainloop()\n\nwin = tk.Tk()\nPeer = Client(Username)\nPeer.Connect()\n</code></pre>\n\n<p>Now the problem is more of a python and scope problem. When trying to relay the message back to the client, I was getting a <code>KeyError</code> as the <code>Clients</code> dictionary was still empty. When making the function call to the server in the client file, it's clear that the update to the dictionary happens in the client file rather than the server file - which is in a different instance. I need a method of changing the contents of the <code>Clients</code> dictionary that is called to action by the client file but takes effect in the server file.</p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 1339, "user_id": 3117592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fXUjs.jpg?s=128&g=1", "display_name": "ozcanyarimdunya", "link": "https://stackoverflow.com/users/3117592/ozcanyarimdunya"}, "edited": false, "score": 2, "creation_date": 1545861397, "post_id": 53937565, "comment_id": 94715210, "body": "query[&quot;attributes&quot;].get(&quot;planning_wait_time&quot;) can work. With this get method it return None if there is no such key, so you can add a if condition here"}, {"owner": {"reputation": 467, "user_id": 3508766, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd818021719367fa079f80794c7a6a10?s=128&d=identicon&r=PG&f=1", "display_name": "user3508766", "link": "https://stackoverflow.com/users/3508766/user3508766"}, "reply_to_user": {"reputation": 1339, "user_id": 3117592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fXUjs.jpg?s=128&g=1", "display_name": "ozcanyarimdunya", "link": "https://stackoverflow.com/users/3117592/ozcanyarimdunya"}, "edited": false, "score": 0, "creation_date": 1545861858, "post_id": 53937565, "comment_id": 94715326, "body": "@ozcanyarimdunya exactly what I needed. Thank you"}, {"owner": {"reputation": 1339, "user_id": 3117592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fXUjs.jpg?s=128&g=1", "display_name": "ozcanyarimdunya", "link": "https://stackoverflow.com/users/3117592/ozcanyarimdunya"}, "edited": false, "score": 0, "creation_date": 1545862041, "post_id": 53937565, "comment_id": 94715366, "body": "You are welcome. Happy coding :)"}], "answers": [{"tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": true, "score": 0, "last_activity_date": 1545862566, "creation_date": 1545862566, "answer_id": 53937733, "question_id": 53937565, "link": "https://stackoverflow.com/questions/53937565/parsing-json-with-for-in-loop-in-python/53937733#53937733", "title": "Parsing Json with for in loop in python", "body": "<p>Check for the key</p>\n\n<pre><code>for q in r[\"queries\"]:\n    attrs = q[\"attributes\"]\n    if \"planning_wait_time\" in attrs:\n        print(attrs[\"planning_wait_time\"])\n</code></pre>\n\n<p>Or if you are okay seeing <code>None</code> or want something else, use <code>.get()</code></p>\n\n<pre><code>for q in r[\"queries\"]:\n    print(q[\"attributes\"].get(\"planning_wait_time\"))  # You can add a parameter here for a default value \n</code></pre>\n"}], "owner": {"reputation": 467, "user_id": 3508766, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd818021719367fa079f80794c7a6a10?s=128&d=identicon&r=PG&f=1", "display_name": "user3508766", "link": "https://stackoverflow.com/users/3508766/user3508766"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 53937733, "answer_count": 1, "score": 0, "last_activity_date": 1545862566, "creation_date": 1545861138, "question_id": 53937565, "link": "https://stackoverflow.com/questions/53937565/parsing-json-with-for-in-loop-in-python", "title": "Parsing Json with for in loop in python", "body": "<p>I have the following sample code which parses JSON file from API</p>\n\n<pre><code>for query in r[\"queries\"]:\n    print(query[\"attributes\"][\"planning_wait_time\"])\n</code></pre>\n\n<p>This gives me result:</p>\n\n<pre><code>5986\n5987\n42\n0\n63\n5978\nTraceback (most recent call last):\n  File \"./query_warning.py\", line 24, in &lt;module&gt;\n    print(query[\"attributes\"][\"planning_wait_time\"])\nKeyError: 'planning_wait_time'\n</code></pre>\n\n<p>The numbers that you see are the correct numbers for planning_wait_time, I can only assume that the reason I'm getting KeyError is because not all the information in my JSON text includes planning_wait_time.\nIs there a way to bypass the error? I only need results if JSON has planning_wait_time\nThanks</p>\n"}, {"tags": ["python", "dataframe", "pipe", "apply", "pandas-groupby"], "comments": [{"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1581391938, "post_id": 53937526, "comment_id": 106408373, "body": "Your function is a function of a single variable (<code>col2</code>). And you want to preserve <code>col3</code> as-is."}], "answers": [{"comments": [{"owner": {"reputation": 365, "user_id": 2356563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AIB9J.png?s=128&g=1", "display_name": "Monirrad", "link": "https://stackoverflow.com/users/2356563/monirrad"}, "edited": false, "score": 0, "creation_date": 1545861716, "post_id": 53937592, "comment_id": 94715292, "body": "Thank you very much. It works but I still don&#39;t understand why pipe did not work."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 365, "user_id": 2356563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AIB9J.png?s=128&g=1", "display_name": "Monirrad", "link": "https://stackoverflow.com/users/2356563/monirrad"}, "edited": false, "score": 1, "creation_date": 1545861967, "post_id": 53937592, "comment_id": 94715352, "body": "Your pipe use here is very unconventional and I am not sure you can get it work as if you are thinking.  This solution a better fit for what you are trying to accomplish."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 365, "user_id": 2356563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AIB9J.png?s=128&g=1", "display_name": "Monirrad", "link": "https://stackoverflow.com/users/2356563/monirrad"}, "edited": false, "score": 1, "creation_date": 1545862124, "post_id": 53937592, "comment_id": 94715396, "body": "Your groupby with apply returns the correct series but then you will have some problems joining this back to the original dataframe.  Using transform is a better solution."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1581392382, "post_id": 53937592, "comment_id": 106408460, "body": "Can you explain why the OP&#39;s use of <code>pipe</code> is unconventional (is it only the <code>.shift(-3)</code>)? This is essentially a code-only answer too specific to one use-case, hence not a reusable resource; please add some explanation."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 0, "last_activity_date": 1545861363, "creation_date": 1545861363, "answer_id": 53937592, "question_id": 53937526, "link": "https://stackoverflow.com/questions/53937526/why-dont-pipe-or-apply-work-properly-on-this-pandas-groupby/53937592#53937592", "title": "Why don&#39;t pipe() or apply() work properly on this pandas groupby?", "body": "<p>IIUC:</p>\n\n<pre><code>df['col4'] = df.groupby('col1')['col2'].transform(lambda x: x.shift(-3)) / df['col2'] - 1\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>  col1  col2  col3  col4\n0    A     2     4  0.50\n1    A     4     5  0.75\n2    A     7     7   NaN\n3    A     3     8   NaN\n4    A     7     3   NaN\n5    B     8     9  1.50\n6    B    10    10   NaN\n7    B     8     9   NaN\n8    B    20    15   NaN\n</code></pre>\n\n<p>Use <code>transform</code> to shift your 'col2' within each group then divide by 'col2' and subtract 1.</p>\n"}], "owner": {"reputation": 365, "user_id": 2356563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AIB9J.png?s=128&g=1", "display_name": "Monirrad", "link": "https://stackoverflow.com/users/2356563/monirrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 53937592, "answer_count": 1, "score": 0, "last_activity_date": 1581392233, "creation_date": 1545860916, "last_edit_date": 1581392233, "question_id": 53937526, "link": "https://stackoverflow.com/questions/53937526/why-dont-pipe-or-apply-work-properly-on-this-pandas-groupby", "title": "Why don&#39;t pipe() or apply() work properly on this pandas groupby?", "body": "<p>I have DataFrame with columns <code>col1, col2, col3</code>. I want to create another <code>col4</code> which contains <code>col2[n+3]/col2-1</code> for each group in <code>col1</code> separately: </p>\n\n<pre><code>+-----+------+-----+\n|col1 | col2 | col3|\n+-----+------+-----+    \n|  A  |  2   |  4  |\n+-----+------+-----+    \n|  A  |  4   |  5  | \n+-----+------+-----+    \n|  A  |  7   |  7  | \n+-----+------+-----+    \n|  A  |  3   |  8  | \n+-----+------+-----+    \n|  A  |  7   |  3  | \n+-----+------+-----+    \n|  B  |  8   |  9  |\n+-----+------+-----+    \n|  B  |  10  |  10 | \n+-----+------+-----+    \n|  B  |  8   |  9  |\n+-----+------+-----+    \n|  B  |  20  |  15 |\n+-----+------+-----+\n</code></pre>\n\n<p>The output should be: </p>\n\n<pre><code>   +-----+------+-----+-----+\n   |col1 | col2 | col3| col4|\n   +-----+------+-----+-----+    \n   | A   |    2 |   4 |  0.5|  # (3/2-1)\n   +-----+------+-----+-----+    \n   | A   |    4 |   5 | 0.75|  # (7/4-1)\n   +-----+------+-----+-----+    \n   | A   |    7 |   7 |  NA |\n   +-----+------+-----+-----+    \n   | A   |    3 |   8 |  NA |\n   +-----+------+-----+-----+    \n   | A   |    7 |   3 |  NA |\n   +-----+------+-----+-----+    \n   | B   |    8 |   9 | 1.5 |\n   +-----+------+-----+-----+    \n   | B   |   10 |  10 |  NA |\n   +-----+------+-----+-----+    \n   | B   |    8 |  9  |  NA |\n   +-----+------+-----+-----+    \n   | B   |   20 |  15 |  NA |\n   +-----+------+-----+-----+\n</code></pre>\n\n<p>My code is </p>\n\n<pre><code>df['col4']= df.groupby('col1').apply(lambda x: x['col2'].shift(-3)/x['col2']-1)\n</code></pre>\n\n<p>which results in <code>col4</code> with all entries 'NA'.</p>\n\n<p>I also tried: </p>\n\n<pre><code>df['col4']= df.groupby('col1').pipe(lambda x: x['col2'].shift(-3)/x['col2']-1)\n</code></pre>\n\n<p>which ignores groups 'A' and 'B' and results in: </p>\n\n<pre><code> +-----+------+-----+-------+  \n |col1 | col2 | col3| col4  |\n +-----+------+-----+-------+      \n | A   |  2   |  4  | 0.5   |\n +-----+------+-----+-------+      \n | A   |  4   |  5  | 0.75  |\n +-----+------+-----+-------+      \n | A   |  7   |  7  | 0.1428|\n +-----+------+-----+-------+          \n | A   |  3   |  8  | 2.33  |\n +-----+------+-----+-------+          \n | A   |  7   |  3  | 0.1428|\n +-----+------+-----+-------+          \n | B   |  8   |  9  | 1.5   |\n +-----+------+-----+-------+          \n | B   | 10   | 10  | NA    |\n +-----+------+-----+-------+          \n | B   |  8   |  9  | NA    |\n +-----+------+-----+-------+          \n | B   | 20   | 15  | NA    |\n +-----+------+-----+-------+      \n</code></pre>\n\n<p>Does anyone know how to do this task or fix my code?</p>\n"}, {"tags": ["python", "json", "ajax", "flask"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1545861007, "post_id": 53937510, "comment_id": 94715098, "body": "I don&#39;t understand what you&#39;re asking. Neither of these would work because you don&#39;t have anything called javascript_data in the posted data. But just moving the declaration of the list wouldn&#39;t help."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1545861074, "post_id": 53937510, "comment_id": 94715119, "body": "The route you&#39;re sending the Ajax request to doesn&#39;t match the one you&#39;ve shown us"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1545861113, "post_id": 53937510, "comment_id": 94715128, "body": "<code>data.append(json.loads(request.form[&quot;javascript_data&quot;])))</code> why? That&#39;s just sending the request data right back. This is pointless."}, {"owner": {"reputation": 153, "user_id": 7507613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NWhJq.png?s=128&g=1", "display_name": "Andrew Venson", "link": "https://stackoverflow.com/users/7507613/andrew-venson"}, "edited": false, "score": 0, "creation_date": 1545861252, "post_id": 53937510, "comment_id": 94715171, "body": "Shoots sorry guys I sent the wrong code snippet check edits. The reason I&#39;m trying to do this is so I can use an XMLHttp request in js code to grab data from that url."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1545861450, "post_id": 53937510, "comment_id": 94715224, "body": "You&#39;ve made a hash of your AJAX as far as I can see and have no way to process the python response. I think this is in the category of &quot;play a bit more first&quot; :)"}, {"owner": {"reputation": 153, "user_id": 7507613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NWhJq.png?s=128&g=1", "display_name": "Andrew Venson", "link": "https://stackoverflow.com/users/7507613/andrew-venson"}, "edited": false, "score": 0, "creation_date": 1545861868, "post_id": 53937510, "comment_id": 94715328, "body": "Thanks RoganJosh I was hoping y&#39;all could help figure out why it&#39;s working with a global variable and not a local one. And I definitely agree I need to play a little more with it haha. What do you mean by hash of Ajax btw, sorry just really trying to get steered in the right direction."}], "owner": {"reputation": 153, "user_id": 7507613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NWhJq.png?s=128&g=1", "display_name": "Andrew Venson", "link": "https://stackoverflow.com/users/7507613/andrew-venson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545861736, "creation_date": 1545860802, "last_edit_date": 1545861736, "question_id": 53937510, "link": "https://stackoverflow.com/questions/53937510/return-json-data-from-ajax-post-in-flask-python-route", "title": "Return JSON data from AJAX post in Flask Python Route", "body": "<p>Hey guys I need to be able to return json data from ajax post in Flask. I've only been able to return the data with a global list declared, and appending the post data to the global list, in which I'm pretty sure you can see how this is not good.</p>\n\n<p><strong>Here is what the route looks like that works</strong>:</p>\n\n<pre><code>data = []\n@app.route('/pricing/orders/&lt;user_name&gt;/api', methods=['POST', 'GET'])\n@login_required\ndef api(user_name):\n    user_name = current_user.username\n    if request.method == 'POST':\n        data.append(json.loads(request.form[\"javascript_data\"]))\n    return jsonify(data)\n</code></pre>\n\n<p><strong>I would like to return the data directly from route variable, like so:</strong></p>\n\n<pre><code>@app.route('/pricing/orders/&lt;user_name&gt;/api', methods=['POST', 'GET'])\n@login_required\ndef api(user_name):\n    data = []\n    user_name = current_user.username\n    if request.method == 'POST':\n        data.append(json.loads(request.form[\"javascript_data\"]))\n    return jsonify(data)\n</code></pre>\n\n<p><strong>Here is the Ajax code if needed</strong></p>\n\n<pre><code>$.post('/pricing/orders/' + username + '/api', {\njavascript_data: JSON.stringify({[equipmentName]:equipmentPrice})\n</code></pre>\n\n<p>});</p>\n\n<p><strong>Complete JS Code</strong></p>\n\n<pre><code>var tablerows = document.getElementById('table').rows.length;\nvar table = document.getElementById('table');\nvar cart = document.getElementById('cart');\nvar subtotal = document.getElementById('subtotal');\nvar username = document.getElementById('username').innerHTML;\nvar pricesub = document.getElementById('pricefooter');\n\n// On load cart\nwindow.onload = function wowzers(){\n  var array = [];\n  var sum = 0;\n  // Get Data\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', 'pricing/orders/' + username +'/api', true);\n  xhr.onload = function(){\n    var data = JSON.parse(this.response);\n\n    if(xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 400){\n      for(x in data){\n        for(key in data[x]){\n          array.push(Number(data[x][key]));\n          sum+=Number(data[x][key]);\n          subtotal.innerHTML = sum;\n          row = cart.insertRow(-1);\n          // Delete Data\n          row.addEventListener('click', function deleterow(){\n            index = this.rowIndex;\n            $.post('pricing/orders/delete', {\n              delete_item: index\n            });\n             cart.deleteRow(index);\n             subtotal.innerHTML = sum-Number(cart.rows[index].cells[1].innerHTML);\n          });\n          cell1 = row.insertCell(0);\n          cell2 = row.insertCell(1);\n          cell3 = row.insertCell(2);\n          cell1.innerHTML = key;\n          cell2. innerHTML = data[x][key];\n          cell3. innerHTML = \"&lt;button class='btn btn-danger'&gt;Delete&lt;/button&gt;\"\n        }\n      }\n      console.log(sum);\n    }else{\n      console.log(error)\n    }\n  }\n  xhr.send()\n}\n\n//Dynamic Cart\nfor(x = 0; x &lt; tablerows; x++){\n  table.rows[x].addEventListener('click', addCartItem);\n}\nfunction addCartItem(ev){\n  var array = [];\n  var priceData = {};\n\n  var sum = 0;\n  index = this.rowIndex;\n  equipmentCell = table.rows[index].cells[0];\n  priceCell = table.rows[index].cells[1];\n  equipmentName = equipmentCell.innerHTML;\n  equipmentPrice = priceCell.innerHTML;\n\n  // Post Data\n  $.post('/pricing/orders/' + username + '/api', {\n    javascript_data: JSON.stringify({[equipmentName]:equipmentPrice})\n  });\n  cartrow = cart.insertRow(-1);\n  // Delete Data\n  cartrow.addEventListener('click', function deleterow(){\n    index = this.rowIndex;\n    subtotal.innerHTML = sum-Number(cart.rows[index].cells[1].innerHTML);\n    $.post('pricing/orders/delete', {\n      delete_item: index\n    });\n    cart.deleteRow(index);\n  });\n  cell1 = cartrow.insertCell(0);\n  cell2 = cartrow.insertCell(1);\n  cell3 = cartrow.insertCell(2);\n  cell1.innerHTML= equipmentName;\n  cell2.innerHTML = equipmentPrice;\n  cell3.innerHTML = \"&lt;button class='btn btn-danger'&gt;Delete&lt;/button&gt;\";\n  // Open Api information\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', 'pricing/orders/' + username +'/api', true);\n  xhr.onload = function(){\n    var data = JSON.parse(this.response);\n    if(xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 400){\n      for(x in data){  \n        for(y in data[x]){\n          array.push(Number(data[x][y]));\n          sum+=Number(data[x][y]);\n          subtotal.innerHTML = sum;\n        }\n      }\n    }else{\n      console.log(error);\n    }\n  }\n  xhr.send();\n}\n</code></pre>\n\n<p>I've tried returning 'json.loads(request.from[\"javascript_data\"])' directly but doesn't work either. Not sure of how to do this. I'm a noob so please help if possible!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1545860828, "post_id": 53937503, "comment_id": 94715031, "body": "You probably want mtime, not ctime. ctime is &quot;change&quot; time (when metadata, like permissions or ownership was last changed), not creation time. Most UNIX filesystems don&#39;t track creation time at all, so modification time is the closest thing you have."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1545861008, "post_id": 53937503, "comment_id": 94715099, "body": "Not related to question: save <code>os.path.join(r, file)</code> in a  variable and use that when printing, instead of calling the function (and thus repeating the operation) 3 times."}, {"owner": {"reputation": 1240, "user_id": 10687003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff97306a0b8d2f07baeb9b835a79d27a?s=128&d=identicon&r=PG&f=1", "display_name": "handras", "link": "https://stackoverflow.com/users/10687003/handras"}, "edited": false, "score": 0, "creation_date": 1545862016, "post_id": 53937503, "comment_id": 94715359, "body": "If you know nothing of the files, this is the most efficient. If another of your program creates them, then create a database containig the creation time and file name, than you can efficiently query for files created in an interval."}], "owner": {"reputation": 17, "user_id": 9425300, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "udhkl", "link": "https://stackoverflow.com/users/9425300/udhkl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545872208, "creation_date": 1545860734, "last_edit_date": 1545872208, "question_id": 53937503, "link": "https://stackoverflow.com/questions/53937503/how-to-get-a-list-of-files-created-after-certain-time", "title": "How to get a list of files created after certain time?", "body": "<p>Currently, I can get the stats on the files within a dir. What would be an efficient way to just get a list of files created after 6:00 PM?</p>\n\n<pre><code>for r, d, f in os.walk(dir):\n    for file in f:\n        print(file)\n        print(os.path.join(r, file))\n        print(os.path.getctime(os.path.join(r, file)))\n        print(os.stat(os.path.join(r, file))) \n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 2, "creation_date": 1545861198, "post_id": 53937491, "comment_id": 94715153, "body": "<code>class Opretkunde</code> in <code>models.py</code>, not <code>def</code>"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1545861235, "post_id": 53937491, "comment_id": 94715169, "body": "I don&#39;t know if this is the source of the error or not (although it may well be), but you&#39;ve forgotten to inherit from <code>models.Model</code> in your <code>OpretKunde</code> model. (Oh and it should be a class, not a <code>def</code>)"}, {"owner": {"reputation": 343, "user_id": 10557703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V7BFHq8uYeQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDTF26XC8NostEXRBvsnuj3ac0msg/mo/photo.jpg?sz=128", "display_name": "Lesnie Sncheider", "link": "https://stackoverflow.com/users/10557703/lesnie-sncheider"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1545861690, "post_id": 53937491, "comment_id": 94715284, "body": "@RobinZigmond You&#39;re right. I forgot the models.Model part. It fixed it. Thanks :-)"}], "answers": [{"tags": [], "owner": {"reputation": 120, "user_id": 7596472, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205681520852482/picture?type=large", "display_name": "jakuta", "link": "https://stackoverflow.com/users/7596472/jakuta"}, "is_accepted": true, "score": 5, "last_activity_date": 1545893396, "last_edit_date": 1545893396, "creation_date": 1545861849, "answer_id": 53937647, "question_id": 53937491, "link": "https://stackoverflow.com/questions/53937491/attributeerror-function-object-has-no-attribute-meta/53937647#53937647", "title": "AttributeError: &#39;function&#39; object has no attribute &#39;_meta&#39;", "body": "<p>A Django model subclasses <code>models.Model</code> and needs to be a class itself, as the instance of this class will be a model instance. </p>\n\n<pre><code>class Opretkunde(models.Model)\n    # the rest of your model fields go here\n</code></pre>\n\n<p>This is why you are getting this error, function has no attribute <code>_meta</code> because a function cannot have a meta class, only a class.</p>\n"}], "owner": {"reputation": 343, "user_id": 10557703, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V7BFHq8uYeQ/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDTF26XC8NostEXRBvsnuj3ac0msg/mo/photo.jpg?sz=128", "display_name": "Lesnie Sncheider", "link": "https://stackoverflow.com/users/10557703/lesnie-sncheider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2579, "favorite_count": 0, "accepted_answer_id": 53937647, "answer_count": 1, "score": -1, "last_activity_date": 1545893396, "creation_date": 1545860674, "question_id": 53937491, "link": "https://stackoverflow.com/questions/53937491/attributeerror-function-object-has-no-attribute-meta", "title": "AttributeError: &#39;function&#39; object has no attribute &#39;_meta&#39;", "body": "<p>I'm receiving that error from the title when I add the line <code>from .forms import Opret_kunde_form</code> into my views.py and it's driving me insane. I have no idea how to fix this.</p>\n\n<p>Full traceback </p>\n\n<pre><code>&gt; Unhandled exception in thread started by &lt;function check_errors.&lt;locals&gt;.wrapper at 0x000001E23A239400&gt;\nTraceback (most recent call last):\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\utils\\autoreload.py\", line 225, in wrapper\n    fn(*args, **kwargs)\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\core\\management\\commands\\runserver.py\", line 117, in inner_run\n    self.check(display_num_errors=True)\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\core\\management\\base.py\", line 379, in check\n    include_deployment_checks=include_deployment_checks,\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\core\\management\\base.py\", line 366, in _run_checks\n    return checks.run_checks(**kwargs)\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\core\\checks\\registry.py\", line 71, in run_checks\n    new_errors = check(app_configs=app_configs)\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\core\\checks\\urls.py\", line 13, in check_url_config\n    return check_resolver(resolver)\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\core\\checks\\urls.py\", line 23, in check_resolver\n    return check_method()\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\urls\\resolvers.py\", line 396, in check\n    for pattern in self.url_patterns:\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\utils\\functional.py\", line 37, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\urls\\resolvers.py\", line 533, in url_patterns\n    patterns = getattr(self.urlconf_module, \"urlpatterns\", self.urlconf_module)\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\utils\\functional.py\", line 37, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\urls\\resolvers.py\", line 526, in urlconf_module\n    return import_module(self.urlconf_name)\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 994, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 971, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 955, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 665, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 678, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"C:\\Users\\kr85m\\Google Drive\\gitlab\\DeathToPlexus\\DeathToPlexus\\DeathToPlexus\\urls.py\", line 25, in &lt;module&gt;\n    path('management/new/customer', include('createCustomer.urls')),\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\urls\\conf.py\", line 34, in include\n    urlconf_module = import_module(urlconf_module)\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 994, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 971, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 955, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 665, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 678, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"C:\\Users\\kr85m\\Google Drive\\gitlab\\DeathToPlexus\\DeathToPlexus\\createCustomer\\urls.py\", line 3, in &lt;module&gt;\n    from . import views\n  File \"C:\\Users\\kr85m\\Google Drive\\gitlab\\DeathToPlexus\\DeathToPlexus\\createCustomer\\views.py\", line 2, in &lt;module&gt;\n    from .forms import Opret_kunde_form\n  File \"C:\\Users\\kr85m\\Google Drive\\gitlab\\DeathToPlexus\\DeathToPlexus\\createCustomer\\forms.py\", line 7, in &lt;module&gt;\n    class Opret_kunde_form(ModelForm):\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\forms\\models.py\", line 256, in __new__\n    apply_limit_choices_to=False,\n  File \"C:\\Users\\kr85m\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\django\\forms\\models.py\", line 139, in fields_for_model\n    opts = model._meta\nAttributeError: 'function' object has no attribute '_meta'\n</code></pre>\n\n<p>Models.py </p>\n\n<pre><code>from django.db import models\n# Create your models here.\n\n\ndef Opretkunde():\n    Fornavn = models.CharField(max_length=30)\n    Efternavn = models.CharField(max_length=50)\n    Telefon = models.IntegerField(max_length=15)\n    Adresse = models.CharField(max_length=50)\n    Postnummer = models.IntegerField(max_length=4)\n    IA = models.CharField(max_length=10)\n</code></pre>\n\n<p>forms.py</p>\n\n<pre><code>from django import forms\nfrom .models import Opretkunde\nfrom django.forms import ModelForm\n\n\n\nclass Opret_kunde_form(ModelForm):\n    class Meta:\n        model = Opretkunde\n        fields = ['Fornavn', 'Efternavn', 'Telefon', 'Adresse']\n</code></pre>\n\n<p>Views.py</p>\n\n<pre><code>from django.shortcuts import render\nfrom .forms import Opret_kunde_form\n# Create your views here.\ndef index(request):\n    if request.method == 'POST': #P\u00e5begynder starten af scriptet hvis der observeres en POST request\n        form = Opret_kunde_form(request.POST, request.FILES) #initialiserer formen\n        if form.is_valid():\n            return render(request, 'createUser.html',)\n</code></pre>\n"}, {"tags": ["python", "ubuntu", "pycharm"], "answers": [{"tags": [], "owner": {"reputation": 4202, "user_id": 1637126, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/51fcf955014c0e6094e7dbf9ed120ca0?s=128&d=identicon&r=PG", "display_name": "Kevin Johnsrude", "link": "https://stackoverflow.com/users/1637126/kevin-johnsrude"}, "is_accepted": true, "score": 0, "last_activity_date": 1555966210, "creation_date": 1555966210, "answer_id": 55800974, "question_id": 53937489, "link": "https://stackoverflow.com/questions/53937489/userwarning-failed-to-import-the-optional-tifffile-c-extension-module/55800974#55800974", "title": "UserWarning: failed to import the optional _tifffile C extension module", "body": "<p>Download tifffile from <a href=\"https://pypi.org/project/tifffile/\" rel=\"nofollow noreferrer\">https://pypi.org/project/tifffile/</a></p>\n\n<pre><code>pip install tifffile\n\npython setup_tifffile_c.py build_ext --inplace\n</code></pre>\n"}], "owner": {"reputation": 4202, "user_id": 1637126, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/51fcf955014c0e6094e7dbf9ed120ca0?s=128&d=identicon&r=PG", "display_name": "Kevin Johnsrude", "link": "https://stackoverflow.com/users/1637126/kevin-johnsrude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 55800974, "answer_count": 1, "score": 1, "last_activity_date": 1555966210, "creation_date": 1545860666, "last_edit_date": 1545864091, "question_id": 53937489, "link": "https://stackoverflow.com/questions/53937489/userwarning-failed-to-import-the-optional-tifffile-c-extension-module", "title": "UserWarning: failed to import the optional _tifffile C extension module", "body": "<p>When I run code like this in an Ubuntu Pycharm project with</p>\n\n<pre><code>import tifffile\nfirst_image = tifffile.imread(\"first.tif\")\n</code></pre>\n\n<p>I get the warning</p>\n\n<pre><code>/home/gradescan/PSTraining/tifffile.py:156: UserWarning: failed to import the \noptional _tifffile C extension module.\nLoading of some compressed images will be slow.\nTifffile.c can be obtained at http://www.lfd.uci.edu/~gohlke/\n  \"failed to import the optional _tifffile C extension module.\\n\"\n</code></pre>\n\n<p>How do I eliminate this warning?  Better, how do I incorporate the _tifffile C extension into my PyCharm project?</p>\n\n<p>If this is duplicated, please don't close because searching on the title which is the error message gives me (and others) nothing.</p>\n"}, {"tags": ["python", "multithreading"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1545860757, "post_id": 53937482, "comment_id": 94715002, "body": "You may want to look at a threading solution that releases the GIL."}], "answers": [{"comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1545861118, "post_id": 53937529, "comment_id": 94715130, "body": "Can you explain what the problem was, and what the solution does differently?"}, {"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1545870600, "post_id": 53937529, "comment_id": 94716949, "body": "@PeterWood added a bit of explanation."}], "tags": [], "owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "is_accepted": true, "score": 2, "last_activity_date": 1545870588, "last_edit_date": 1545870588, "creation_date": 1545860930, "answer_id": 53937529, "question_id": 53937482, "link": "https://stackoverflow.com/questions/53937482/python-threading-multiple-functions-every-minute/53937529#53937529", "title": "python threading multiple functions every minute", "body": "<pre><code>from threading import Timer\n\nclass Interval(object):\n    \"\"\"Interface wrapper for re-occuring functions.\"\"\"\n\n    def __init__(self, f, timeout):\n        super(Interval, self).__init__()\n        self.timeout = timeout\n        self.fn = f\n        self.next = None\n        self.done = False\n        self.setNext()\n\n\n    def setNext(self):\n        \"\"\"Queues up the next call to the intervaled function.\"\"\"\n        if not self.done:\n            self.next = Timer(self.timeout, self.run)\n            self.next.start()\n\n        return self\n\n\n    def run(self):\n        \"\"\"Starts the interval.\"\"\"\n        self.fn()\n        self.setNext()\n        return self\n\n\n    def stop(self):\n        \"\"\"Stops the interval. Cancels any pending call.\"\"\"\n        self.done = True\n        self.next.cancel()\n        return self\n</code></pre>\n\n<p>Pass the functions and timeouts as arguments. The Timer class from the threading module does most of what you need (running a function after a certain time has passed) the wrapper class I added just adds the repetition, makes it easy to start it, stop it, pass it around, etc. </p>\n"}], "owner": {"reputation": 806, "user_id": 6721603, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/41b37480f2461eabdca384d0819dca90?s=128&d=identicon&r=PG&f=1", "display_name": "freddy888", "link": "https://stackoverflow.com/users/6721603/freddy888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 53937529, "answer_count": 1, "score": 1, "last_activity_date": 1545870588, "creation_date": 1545860592, "question_id": 53937482, "link": "https://stackoverflow.com/questions/53937482/python-threading-multiple-functions-every-minute", "title": "python threading multiple functions every minute", "body": "<p>I have several functions I would like to run in an infinite loop simultaneously, but all functions should be run at different intervals. For example, the following code:</p>\n\n<pre><code>while True:\n   functionA()\n   after 1 minute repeat\n   functionB()\n   after 2 minutes repeat\n</code></pre>\n\n<p>I know hot to work with time.sleep or dateime.now(), but I do not know how to get functionA and B to run and wait independently of each other in the same file.</p>\n"}, {"tags": ["python", "boolean", "command-line-arguments", "argparse"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1545862647, "post_id": 53937481, "comment_id": 94715530, "body": "The linked <code>class customAction(argparse.Action)</code> subclasses <code>Action</code> not <code>_StoreAction</code>.  It&#39;s the <code>store</code> <code>__init__</code> that complains about <code>nargs=0</code>.  Note that <code>store_true</code> subclasses <code>store_const</code>."}, {"owner": {"reputation": 19714, "user_id": 169947, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/94c9072a6b1ac6e02e735b3df640e277?s=128&d=identicon&r=PG", "display_name": "Ken Williams", "link": "https://stackoverflow.com/users/169947/ken-williams"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1585689634, "post_id": 53937481, "comment_id": 107850311, "body": "Update: it looks like this has now been added to the <code>argparse</code> library: <a href=\"https://github.com/python/cpython/commit/6a517c674907c195660fa9178a7b561de49cc721\" rel=\"nofollow noreferrer\">github.com/python/cpython/commit/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1545871391, "post_id": 53938037, "comment_id": 94717053, "body": "With <code>nargs=0</code> the <code>type=bool</code> is unnecessary, isn&#39;t it?  The OP&#39;s first link shows the pitfalls of using this <code>type</code> - the only string that evaluates <code>False</code> is the empty one."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1545871914, "post_id": 53938037, "comment_id": 94717129, "body": "As for the usage problem - there&#39;s always the option of providing a custom <code>usage</code> parameter.  It wouldn&#39;t be hard to write a function that generates a desirable string automatically."}, {"owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1545872387, "post_id": 53938037, "comment_id": 94717195, "body": "@hpaulj: Yes, I think it&#39;s unnecessary here. I didn&#39;t notice it in the arg list and hence did not pull it out. <code>const=None</code> and <code>choices=None</code> are also pointless since that&#39;s the default. I pulled them out in an edit just now."}, {"owner": {"reputation": 19714, "user_id": 169947, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/94c9072a6b1ac6e02e735b3df640e277?s=128&d=identicon&r=PG", "display_name": "Ken Williams", "link": "https://stackoverflow.com/users/169947/ken-williams"}, "edited": false, "score": 0, "creation_date": 1545945956, "post_id": 53938037, "comment_id": 94740638, "body": "Thanks @torek, I&#39;ll play with that.  It would of course be highly desirable to get this integrated into the <code>argparse</code> library itself, so I&#39;ve made a comment on the ticket you mentioned too."}], "tags": [], "owner": {"reputation": 324088, "user_id": 1256452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa1648baa6108c85886312af93bb32c0?s=128&d=identicon&r=PG", "display_name": "torek", "link": "https://stackoverflow.com/users/1256452/torek"}, "is_accepted": true, "score": 2, "last_activity_date": 1545872629, "last_edit_date": 1545872629, "creation_date": 1545865235, "answer_id": 53938037, "question_id": 53937481, "link": "https://stackoverflow.com/questions/53937481/python-command-line-arguments-foo-and-no-foo/53938037#53938037", "title": "Python: command-line arguments --foo and --no-foo", "body": "<p>One of the answers in <a href=\"https://stackoverflow.com/q/15008758/1256452\">your linked question</a>, specifically the one by <a href=\"https://stackoverflow.com/a/26618391/1256452\">Robert T. McGibbon</a>, includes a code snippet from <a href=\"http://bugs.python.org/issue8538\" rel=\"nofollow noreferrer\">an enhancement request</a> that was never accepted into the standard argparse.  It works fairly well, though, if you discount one annoyance.  Here is my reproduction, with a few small modifications, as a stand-alone module with a little bit of pydoc string added, and an example of its usage:</p>\n\n<pre><code>import argparse\nimport re\n\nclass FlagAction(argparse.Action):\n    \"\"\"\n    GNU style --foo/--no-foo flag action for argparse\n    (via http://bugs.python.org/issue8538 and\n    https://stackoverflow.com/a/26618391/1256452).\n\n    This provides a GNU style flag action for argparse.  Use\n    as, e.g., parser.add_argument('--foo', action=FlagAction).\n    The destination will default to 'foo' and the default value\n    if neither --foo or --no-foo are specified will be None\n    (so that you can tell if one or the other was given).\n    \"\"\"\n    def __init__(self, option_strings, dest, default=None,\n                 required=False, help=None, metavar=None,\n                 positive_prefixes=['--'], negative_prefixes=['--no-']):\n        self.positive_strings = set()\n        # self.negative_strings = set()\n        # Order of strings is important: the first one is the only\n        # one that will be shown in the short usage message!  (This\n        # is an annoying little flaw.)\n        strings = []\n        for string in option_strings:\n            assert re.match(r'--[a-z]+', string, re.IGNORECASE)\n            suffix = string[2:]\n            for positive_prefix in positive_prefixes:\n                s = positive_prefix + suffix\n                self.positive_strings.add(s)\n                strings.append(s)\n            for negative_prefix in negative_prefixes:\n                s = negative_prefix + suffix\n                # self.negative_strings.add(s)\n                strings.append(s)\n        super(FlagAction, self).__init__(option_strings=strings, dest=dest,\n                                         nargs=0, default=default,\n                                         required=required, help=help,\n                                         metavar=metavar)\n\n    def __call__(self, parser, namespace, values, option_string=None):\n        if option_string in self.positive_strings:\n            setattr(namespace, self.dest, True)\n        else:\n            setattr(namespace, self.dest, False)\n\n\nif __name__ == '__main__':\n    p = argparse.ArgumentParser()\n    p.add_argument('-a', '--arg', help='example')\n    p.add_argument('--foo', action=FlagAction, help='the boolean thing')\n    args = p.parse_args()\n    print(args)\n</code></pre>\n\n<p>(this code works in Python 2 and 3 both).</p>\n\n<p>Here is the thing in action:</p>\n\n<pre><code>$ python flag_action.py -h\nusage: flag_action.py [-h] [-a ARG] [--foo]\n\noptional arguments:\n  -h, --help         show this help message and exit\n  -a ARG, --arg ARG  example\n  --foo, --no-foo    the boolean thing\n</code></pre>\n\n<p>Note that the initial <code>usage</code> message does not mention the <code>--no-foo</code> option.  There is no easy way to correct this other than to use the group method that you dislike.</p>\n\n<pre><code>$ python flag_action.py -a something --foo\nNamespace(arg='something', foo=True)\n$ python flag_action.py --no-foo\nNamespace(arg=None, foo=False)\n</code></pre>\n"}], "owner": {"reputation": 19714, "user_id": 169947, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/94c9072a6b1ac6e02e735b3df640e277?s=128&d=identicon&r=PG", "display_name": "Ken Williams", "link": "https://stackoverflow.com/users/169947/ken-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 53938037, "answer_count": 1, "score": 0, "last_activity_date": 1545872629, "creation_date": 1545860585, "last_edit_date": 1545860996, "question_id": 53937481, "link": "https://stackoverflow.com/questions/53937481/python-command-line-arguments-foo-and-no-foo", "title": "Python: command-line arguments --foo and --no-foo", "body": "<p>For parsing boolean command-line options using Python's built-in <code>argparse</code> package, I am aware of this question and its several answers:  <a href=\"https://stackoverflow.com/questions/15008758/parsing-boolean-values-with-argparse\">Parsing boolean values with argparse</a>.</p>\n\n<p>Several of the answers (correctly, IMO) point out that the most common and straightforward idiom for boolean options (from the caller's point of view) is to accept both <code>--foo</code> and <code>--no-foo</code> options, which sets some value in the program to <code>True</code> or <code>False</code>, respectively.</p>\n\n<p>However, all the answers I can find don't actually accomplish the task correctly, it seems to me.  They seem to generally fall short on one of the following:</p>\n\n<ol>\n<li>A suitable default can be set (<code>True</code>, <code>False</code>, or <code>None</code>).</li>\n<li>Help text given for <code>program.py --help</code> is correct and helpful, including showing what the default is.</li>\n<li>Either of (I don't really care which, but both are sometimes desirable):\n\n<ul>\n<li>An argument <code>--foo</code> can be overridden by a later argument <code>--no-foo</code> and vice versa;</li>\n<li><code>--foo</code> and <code>--no-foo</code> are incompatible and mutually exclusive.</li>\n</ul></li>\n</ol>\n\n<p>What I'm wondering is whether this is even possible at all using <code>argparse</code>.</p>\n\n<p>Here's the closest I've come, based on answers by @mgilson and @fnkr:</p>\n\n<pre><code>def add_bool_arg(parser, name, help_true, help_false, default=None, exclusive=True):\n    if exclusive:\n        group = parser.add_mutually_exclusive_group(required=False)\n    else:\n        group = parser\n    group.add_argument('--' + name, dest=name, action='store_true', help=help_true)\n    group.add_argument('--no-' + name, dest=name, action='store_false', help=help_false)\n    parser.set_defaults(**{name: default})\n\n\nparser = argparse.ArgumentParser(formatter_class=argparse.ArgumentDefaultsHelpFormatter)\nadd_bool_arg(parser, 'foo', \"Do foo\", \"Don't foo\", exclusive=True)\nadd_bool_arg(parser, 'bar', \"Do bar\", \"Don't bar\", default=True, exclusive=False)\n</code></pre>\n\n<p>That does most things well, but the help-text is confusing:</p>\n\n<pre><code>usage: argtest.py [-h] [--foo | --no-foo] [--bar] [--no-bar]\n\noptional arguments:\n  -h, --help  show this help message and exit\n  --foo       Do foo (default: None)\n  --no-foo    Don't foo (default: None)\n  --bar       Do bar (default: True)\n  --no-bar    Don't bar (default: True)\n</code></pre>\n\n<p>A better help text would be something like this:</p>\n\n<pre><code>usage: argtest.py [-h] [--foo | --no-foo] [--bar] [--no-bar]\n\noptional arguments:\n  -h, --help      show this help message and exit\n  --foo --no-foo  Whether to foo (default: None)\n  --bar --no-bar  Whether to bar (default: True)\n</code></pre>\n\n<p>But I don't see a way to accomplish that, since \"--*\" and \"--no-*\" must always be declared as separate arguments (right?).</p>\n\n<p>In addition to the suggestions at the SO question mentioned above, I've also tried creating a custom action using techniques shown in this other SO question: <a href=\"https://stackoverflow.com/questions/8632354/python-argparse-custom-actions-with-additional-arguments-passed\">Python argparse custom actions with additional arguments passed</a> .  These fail immediately saying either <code>\"error: argument --foo: expected one argument\"</code>, or (if I set <code>nargs=0</code>) <code>\"ValueError: nargs for store actions must be &gt; 0\"</code>.  From poking into the <code>argparse</code> source, it looks like this is because actions other than the pre-defined 'store_const', 'store_true', 'append', etc. must use the <code>_StoreAction</code> class, which requires an argument.</p>\n\n<p>Is there some other way to accomplish this?  If someone has a combination of ideas I haven't thought of yet, please let me know!</p>\n\n<p>(BTW- I'm creating this new question, rather than trying to add to the first question above, because the original question above was actually asking for a method to handle <code>--foo TRUE</code> and <code>--foo FALSE</code> arguments, which is different and IMO less commonly seen.)</p>\n"}, {"tags": ["python", "tensorflow", "deep-learning", "reinforcement-learning"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10806797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ca5cc5ec2202b4956211e21e58958d0?s=128&d=identicon&r=PG&f=1", "display_name": "Yuay", "link": "https://stackoverflow.com/users/10806797/yuay"}, "edited": false, "score": 0, "creation_date": 1545929704, "post_id": 53937540, "comment_id": 94735147, "body": "Thanks.I modified code.However,A new error has appeared. I do not understand the input of tensorflow."}], "tags": [], "owner": {"reputation": 28, "user_id": 4351609, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SsZERXnCN-A/AAAAAAAAAAI/AAAAAAAAABU/9tEpt3kNJAI/photo.jpg?sz=128", "display_name": "Khaled Arja", "link": "https://stackoverflow.com/users/4351609/khaled-arja"}, "is_accepted": true, "score": 0, "last_activity_date": 1545861002, "creation_date": 1545861002, "answer_id": 53937540, "question_id": 53937461, "link": "https://stackoverflow.com/questions/53937461/introduced-a-new-layer-using-tensorflow/53937540#53937540", "title": "Introduced a new layer using tensorflow", "body": "<p>That's because there is no attributes to assign for <code>smoothtensor</code> as <code>dtype</code></p>\n\n<p>your fault is in this line : </p>\n\n<pre><code>def smooth(tensor): `smoothtensor=tf.cond(tensor&lt;(e+alpha) ,lambda: (tensor-alpha)*(tensor-alpha),lambda:e*((tensor-alpha)-self.e*0.5),dtype=tf.float32)`\n</code></pre>\n\n<p>the available attributes that you can assign : </p>\n\n<pre><code>tf.cond(\n    pred,\n    true_fn=None,\n    false_fn=None,\n    strict=False,\n    name=None,\n    fn1=None,\n    fn2=None\n)\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Just add a paranthesis in the end of the line code...it is missing</p>\n"}], "owner": {"reputation": 5, "user_id": 10806797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ca5cc5ec2202b4956211e21e58958d0?s=128&d=identicon&r=PG&f=1", "display_name": "Yuay", "link": "https://stackoverflow.com/users/10806797/yuay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 53937540, "answer_count": 1, "score": 0, "last_activity_date": 1545929591, "creation_date": 1545860447, "last_edit_date": 1545929591, "question_id": 53937461, "link": "https://stackoverflow.com/questions/53937461/introduced-a-new-layer-using-tensorflow", "title": "Introduced a new layer using tensorflow", "body": "<p>I would like to introduce a new layer as activation function in tensorflow. However, There are errors that can not be solved.\nThis is code of new layer.</p>\n\n<pre><code>def smooth_relu(tensor):\n    e=0.15\n    alpha=0.005\n\n    def smooth(tensor):\n\n            smoothtensor=tf.cond(tensor&lt;(e+alpha) ,lambda: (tensor-alpha)*(tensor-alpha),lambda:e*((tensor-alpha)-self.e*0.5),    tf.cond(\n                        pred,\n                        true_fn=None,\n                        false_fn=None,\n                        strict=False,\n                        name=None,\n                        fn1=None,\n                        fn2=None\n                        ))\n\n\n            return (smoothtensor)\n\n\n\n    newtensor=tf.cond(tensor&lt;0 ,lambda :0, lambda:smooth(tensor))\n    # In addition to return the result, we return my_random for initializing on each\n    # iteration and alpha to check the final value used.\n\n    return (newtensor)\n</code></pre>\n\n<p>This is error.</p>\n\n<pre><code>ValueError: Shape must be rank 0 but is rank 2 for 'cond/Switch' (op: 'Switch') with input shapes: [1,1], [1,1].\n</code></pre>\n"}, {"tags": ["python", "postgresql", "vagrant"], "comments": [{"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1545860695, "post_id": 53937439, "comment_id": 94714978, "body": "Are you forwarding any ports? Can you ping your vm. Also refer here <a href=\"https://projects.wazo.community/boards/1/topics/9211\" rel=\"nofollow noreferrer\">projects.wazo.community/boards/1/topics/9211</a>"}, {"owner": {"reputation": 1339, "user_id": 3117592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fXUjs.jpg?s=128&g=1", "display_name": "ozcanyarimdunya", "link": "https://stackoverflow.com/users/3117592/ozcanyarimdunya"}, "edited": false, "score": 0, "creation_date": 1545860732, "post_id": 53937439, "comment_id": 94714993, "body": "You may need port forwarding in your vagrantfile.refer to this url <a href=\"https://www.vagrantup.com/docs/networking/forwarded_ports.html\" rel=\"nofollow noreferrer\">vagrantup.com/docs/networking/forwarded_ports.html</a>"}, {"owner": {"reputation": 395, "user_id": 2436292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/050db3f8952b55319bc9a18d1db630b4?s=128&d=identicon&r=PG", "display_name": "Yavuz Selim", "link": "https://stackoverflow.com/users/2436292/yavuz-selim"}, "edited": false, "score": 0, "creation_date": 1545915428, "post_id": 53937439, "comment_id": 94729442, "body": "You are trying to connect via IPV6. Try, 127.0.0.1. Also when you does not specify host at psql, it connects via socket not IP, you can try <code>psql -h 127.0.0.1 -d dbname -f somesqlqueries.sql</code> to be sure PostgreSQL listens 127.0.0.1. One more thing, in case of you skip, you need to restart PostgreSQL after changing listen_address."}], "owner": {"reputation": 11, "user_id": 9949751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4276c0d2698f961cc015998f47ee4736?s=128&d=identicon&r=PG&f=1", "display_name": "Decarbon", "link": "https://stackoverflow.com/users/9949751/decarbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1545860335, "creation_date": 1545860335, "question_id": 53937439, "link": "https://stackoverflow.com/questions/53937439/connecting-to-postgresql-database-through-python-code", "title": "Connecting to PostgreSQL database through Python code", "body": "<p>I have a Ubuntu virtual machine using Vagrant, I set it up and run it using <code>vagrant up</code> and <code>vagrant ssh</code> and I create the database <code>psql -d dbname -f somesqlqueries.sql</code>.</p>\n\n<p>Whenever I try to connect to this database through python by doing <code>conn = psycopg2.connect(\"dbname=dbname\")</code> I get this error:</p>\n\n<blockquote>\n  <p>psycopg2.OperationalError: could not connect to server: Connection refused (0x0000274D/10061)\n      Is the server running on host \"localhost\" (::1) and accepting\n      TCP/IP connections on port 5432?</p>\n</blockquote>\n\n<p>Looking at solutions for this issue I changed postgresql.conf to have <code>listen_address = '*'</code> and still the same error occurs. </p>\n\n<p>Also tried to turn off the firewall and run <code>sudo ufw allow 5432/tcp</code> and the error still persistent.</p>\n"}, {"tags": ["python", "json", "python-3.x"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1545860441, "post_id": 53937434, "comment_id": 94714900, "body": "That&#39;s such a broken API. I don&#39;t think it&#39;s possible to parse an arbitrary snippet of JSON. It could have any nested structure that just gets cut off."}, {"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1545860445, "post_id": 53937434, "comment_id": 94714903, "body": "If it&#39;s trivial (as in your example), just do it by hand. If it&#39;s not, um...err...."}, {"owner": {"reputation": 1339, "user_id": 3117592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fXUjs.jpg?s=128&g=1", "display_name": "ozcanyarimdunya", "link": "https://stackoverflow.com/users/3117592/ozcanyarimdunya"}, "edited": false, "score": 0, "creation_date": 1545860949, "post_id": 53937434, "comment_id": 94715079, "body": "This is just a bad recommend. You can use pandas to read json and then for preview df.head(2).to_json(orient=&#39;records&#39;)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1545861667, "post_id": 53937434, "comment_id": 94715278, "body": "seems that you don&#39;t have a lot of luck with input formats :)"}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 1, "creation_date": 1545868780, "post_id": 53937434, "comment_id": 94716684, "body": "What&#39;s the reason you want to include the first two &quot;objects&quot; (I suppose you mean the two outermost dicts) but not the third? What makes the json incomplete is a missing <code>}]</code>, so by only considering the json format there&#39;s no reason to exclude the <code>{&quot;first&quot;: &quot;tom&quot;}</code>. The exact criteria for where to crop the string are crucial for developing an algorithm."}], "answers": [{"comments": [{"owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "edited": false, "score": 0, "creation_date": 1545861180, "post_id": 53937551, "comment_id": 94715145, "body": "oh I like that simple approach."}], "tags": [], "owner": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "is_accepted": true, "score": 4, "last_activity_date": 1545862171, "last_edit_date": 1545862171, "creation_date": 1545861074, "answer_id": 53937551, "question_id": 53937434, "link": "https://stackoverflow.com/questions/53937434/parsing-incomplete-json-array/53937551#53937551", "title": "Parsing incomplete json array", "body": "<p>If your data will always look somewhat similar, you could do something like this:</p>\n\n<pre><code>import json\n\njson_string = \"\"\"[{\n    \"first\": \"bob\",\n    \"address\": {\n        \"street\": 13301,\n        \"zip\": 1920\n    }\n}, {\n    \"first\": \"sarah\",\n    \"address\": {\n        \"street\": 13301,\n        \"zip\": 1920\n    }\n}, {\"first\" : \"tom\"\n\"\"\"\n\nwhile True:\n    if not json_string:\n        raise ValueError(\"Couldn't fix JSON\")\n    try:\n        data = json.loads(json_string + \"]\")\n    except json.decoder.JSONDecodeError:\n        json_string = json_string[:-1]\n        continue\n    break\n\nprint(data)\n</code></pre>\n\n<p>This assumes that the data is a list of dicts. Step by step, the last character is removed and a missing <code>]</code> appended. If the new string can be interpreted as JSON, the infinite loop breaks. Otherwise the next character is removed and so on. If there are no characters left <code>ValueError(\"Couldn't fix JSON\")</code> is raised.</p>\n\n<p>For the above example, it prints:</p>\n\n<pre><code>[{'first': 'bob', 'address': {'zip': 1920, 'street': 13301}}, {'first': 'sarah', 'address': {'zip': 1920, 'street': 13301}}]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "edited": false, "score": 0, "creation_date": 1546032487, "post_id": 53958859, "comment_id": 94766682, "body": "thanks for this answer. As a generalization to the above, how could you &#39;complete&#39; something more general, such as <a href=\"https://hastebin.com/uducikutak.json\" rel=\"nofollow noreferrer\">this</a> ?"}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "reply_to_user": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "edited": false, "score": 1, "creation_date": 1546129763, "post_id": 53958859, "comment_id": 94786530, "body": "@David542 Actually the algorithm is not <i>completing</i> but <i>reducing</i> the json to its valid parts and closing it with the missing brackets. In that sense the specific structure you linked is not more general, it is just a different structure (with different bracketing). Here you can define an offset within the string and then use the same procedure as above: <code>marker = &#39;&quot;data&quot;: [&#39;; offset = string.index(marker) + len(marker)</code>. You&#39;ll need to close the resulting string with <code>]}]}}</code> instead. If you want to be independent of the structure you&#39;ll need to write your own custom json parser."}], "tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": false, "score": 1, "last_activity_date": 1546001223, "creation_date": 1546001223, "answer_id": 53958859, "question_id": 53937434, "link": "https://stackoverflow.com/questions/53937434/parsing-incomplete-json-array/53958859#53958859", "title": "Parsing incomplete json array", "body": "<p>For the specific structure in the example we can walk through the string and track occurrences of curly brackets and their closing counterparts. If at the end one or more curly brackets remain unmatched, we know that this indicates an incomplete object. We can then strip any intermediate characters such as commas or whitespace and close the resulting string with a square bracket.</p>\n\n<p>This method ensures that the string is only parsed twice, one time manually and one time by the JSON parser, which might be advantageous for large text files (with incomplete objects consisting of many characters).</p>\n\n<pre><code>brackets = []\nfor i, c in enumerate(string):\n    if c == '{':\n        brackets.append(i)\n    elif c == '}':\n        brackets.pop()\n\nif brackets:\n    string = string[:brackets[0]].rstrip(', \\n')\n\nif not string.endswith(']'):\n    string += ']'\n</code></pre>\n"}], "owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1494, "favorite_count": 1, "accepted_answer_id": 53937551, "answer_count": 2, "score": 7, "last_activity_date": 1546001223, "creation_date": 1545860277, "last_edit_date": 1546000505, "question_id": 53937434, "link": "https://stackoverflow.com/questions/53937434/parsing-incomplete-json-array", "title": "Parsing incomplete json array", "body": "<p>I have downloaded 5MB of a very large json file. From this, I need to be able to load that 5MB to generate a preview of the json file. However, the file will probably be incomplete. Here's an example of what it may look like:</p>\n\n<pre><code>[{\n    \"first\": \"bob\",\n    \"address\": {\n        \"street\": 13301,\n        \"zip\": 1920\n    }\n}, {\n    \"first\": \"sarah\",\n    \"address\": {\n        \"street\": 13301,\n        \"zip\": 1920\n    }\n}, {\"first\" : \"tom\"\n</code></pre>\n\n<p>From here, I'd like to \"rebuild it\" so that it can parse the first two objects (and ignore the third). </p>\n\n<p>Is there a json parser that can <code>infer</code> or cut off the end of the string to make it parsable? Or perhaps to 'stream' the parsing of the json array, so that when it fails on the last object, I can exit the loop? If not, how could the above be accomplished?</p>\n"}, {"tags": ["python", "curl", "python-requests", "api-key"], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 10836704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23d32cc6df410e980f89ab78ee88e8d?s=128&d=identicon&r=PG", "display_name": "John Adams", "link": "https://stackoverflow.com/users/10836704/john-adams"}, "is_accepted": false, "score": 1, "last_activity_date": 1545860610, "creation_date": 1545860610, "answer_id": 53937486, "question_id": 53937426, "link": "https://stackoverflow.com/questions/53937426/curl-to-python-requests-error-no-api-key-supplied/53937486#53937486", "title": "curl to python requests error: &quot;no api key supplied&quot;", "body": "<p>Looking at the PubAG API, it appears that you can simply pass the api_key in the URL query string. I'd assume it's the same for the API you're using, but a cursory search yielded no documentation.</p>\n\n<p>Try:\n<a href=\"https://api.nal.usda.gov/ndb/V2/reports?api_key=[API_KEY]\" rel=\"nofollow noreferrer\">https://api.nal.usda.gov/ndb/V2/reports?api_key=[API_KEY]</a></p>\n\n<pre><code>response = requests.post('https://api.nal.usda.gov/ndb/V2/reports?api_key=[API_KEY]', headers=headers, data=data)\n</code></pre>\n\n<p>I don't have an API key to try this out with, but navigating to <a href=\"https://api.nal.usda.gov/ndb/V2/reports?api_key=asdfds\" rel=\"nofollow noreferrer\">https://api.nal.usda.gov/ndb/V2/reports?api_key=asdfds</a> in my browser gives me an invalid API key error, which suggests that the endpoint recognizes that I've given an API key.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 10836594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47c99193ed0da73a97e339d3852e011f?s=128&d=identicon&r=PG&f=1", "display_name": "Naterator", "link": "https://stackoverflow.com/users/10836594/naterator"}, "edited": false, "score": 0, "creation_date": 1546280856, "post_id": 53937513, "comment_id": 94818377, "body": "I tried it just as you suggested but got the exact same error message with my valid api key."}, {"owner": {"reputation": 23, "user_id": 10836594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47c99193ed0da73a97e339d3852e011f?s=128&d=identicon&r=PG&f=1", "display_name": "Naterator", "link": "https://stackoverflow.com/users/10836594/naterator"}, "edited": false, "score": 0, "creation_date": 1546281232, "post_id": 53937513, "comment_id": 94818452, "body": "<b>UPDATE</b> Actually I misunderstood the formatting and tried to put the actual key as the second item. When I put my key in as the first item in the auth tuple and left the second blank (as you instructed) it worked like a charm!  Thanks for solving this mystery for me!  I tried to upvote your post but I guess I&#39;m too much of a newb so it won&#39;t let me :("}], "tags": [], "owner": {"reputation": 37029, "user_id": 358328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d56c3972b607b39dc840acef5fca07d0?s=128&d=identicon&r=PG", "display_name": "Uku Loskit", "link": "https://stackoverflow.com/users/358328/uku-loskit"}, "is_accepted": true, "score": 0, "last_activity_date": 1545861636, "last_edit_date": 1545861636, "creation_date": 1545860819, "answer_id": 53937513, "question_id": 53937426, "link": "https://stackoverflow.com/questions/53937426/curl-to-python-requests-error-no-api-key-supplied/53937513#53937513", "title": "curl to python requests error: &quot;no api key supplied&quot;", "body": "<p>It's probably because requests does not parse the API KEY from the URL, try this:</p>\n\n<pre><code>response = requests.post('http://api.nal.usda.gov/ndb/V2/reports', headers=headers, data=data, auth=(API_KEY, ''))\n</code></pre>\n\n<p>This passes it using Basic Authentication (<code>Authorization</code> header) which is the same behavior that curl does when parsing the URL.</p>\n\n<p>Normally in Basic Auth you would have the username and the password. E.g:\n<code>auth=('&lt;username&gt;', '&lt;password&gt;')</code></p>\n\n<p>Since this API only seems to care about the username, I have left the password as blank.</p>\n"}], "owner": {"reputation": 23, "user_id": 10836594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47c99193ed0da73a97e339d3852e011f?s=128&d=identicon&r=PG&f=1", "display_name": "Naterator", "link": "https://stackoverflow.com/users/10836594/naterator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1732, "favorite_count": 0, "accepted_answer_id": 53937513, "answer_count": 2, "score": 2, "last_activity_date": 1545861636, "creation_date": 1545860230, "question_id": 53937426, "link": "https://stackoverflow.com/questions/53937426/curl-to-python-requests-error-no-api-key-supplied", "title": "curl to python requests error: &quot;no api key supplied&quot;", "body": "<p>I'm trying to do a curl command with python requests. As far as I can tell I'm doing everything correctly but the website won't recognize the api key no matter how I try to include it. Basically, the site I'm trying to reach wants the api key put in the beginning of the url. When I do this with curl, it works perfectly. When I try it via python requests, however, it doesn't work. It also doesn't work to send it in as a key-value pairing in dictionary.</p>\n\n<p>This works</p>\n\n<pre><code>curl -H \"Content-Type:application/json\" -d '{\"ndbno\":[\"11124\"],\"type\":\"f\"}' [API KEY]@api.nal.usda.gov/ndb/V2/reports\n</code></pre>\n\n<p>and here's the requests code:</p>\n\n<pre><code>import requests\n\nheaders = {'Content-Type': 'application/json',}\n\ndata = '{\"ndbno\":[\"11124\"],\"type\":\"f\"}'\n\nresponse = requests.post('http://[API KEY]@api.nal.usda.gov/ndb/V2/reports', headers=headers, data=data)\n</code></pre>\n\n<p>The result from this is a json response containing the message: \"{'error': {'code': 'API_KEY_MISSING', 'message': 'No api_key was supplied. Get one at <a href=\"http://api.nal.usda.gov:80\" rel=\"nofollow noreferrer\">http://api.nal.usda.gov:80</a>'}}\n\"</p>\n\n<p>It also doesn't work if I remove the [API KEY] from the url and add it to the data dictionary as \"api_key\":\"[API KEY]\"</p>\n\n<p>BTW I'm not passing the key in as a list or anything, I just didn't want to post the physical key in my question.</p>\n\n<p>I'm a total newb to python and stackoverflow, but I've done my due diligence and have been searching out answers and testing different ways to format the request for a few hours now. Any help is greatly appreciated!</p>\n"}, {"tags": ["python", "tkinter", "gettext"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1545867300, "post_id": 53937400, "comment_id": 94716464, "body": "<code>tkinter</code> doesn&#39;t have a <code>scrolledtext.ScrolledText</code> or a <code>ScrolledText</code> widget that I know of\u2014so it&#39;s unclear what you are talking about. It is possible to make a regular <code>Text</code> scrollable on the other hand."}, {"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1545867595, "post_id": 53937400, "comment_id": 94716507, "body": "@martineau have a look here:  [<a href=\"https://docs.python.org/3/library/tkinter.scrolledtext.html]\" rel=\"nofollow noreferrer\">docs.python.org/3/library/tkinter.scrolledtext.html]</a> I think this answer might help you: [<a href=\"https://stackoverflow.com/questions/14824163/how-to-get-the-input-from-the-tkinter-text-box-widget]\" title=\"how to get the input from the tkinter text box widget%5d\">stackoverflow.com/questions/14824163/&hellip;</a>. Could this question be considered a duplicate?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1545867827, "post_id": 53937400, "comment_id": 94716536, "body": "@Valentino: That first docs link in your comment results in: <code>404 Not Found</code>. The other one to a possible duplicate might be one \u2014 <b>if</b> that&#39;s what the OP is really talking about."}, {"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1545868113, "post_id": 53937400, "comment_id": 94716577, "body": "@martineau ops, let me try again with the link. [<a href=\"https://docs.python.org/3/library/tkinter.scrolledtext.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/tkinter.scrolledtext.html</a> ]. If the scrolledtext Gigi is speaking about is this, it&#39;s just a tkinter.Text class with a scrollbar."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1545868653, "post_id": 53937400, "comment_id": 94716666, "body": "@Valentino: That link works better. I haven&#39;t ever used the <code>tix</code> extension widgets before (and won &#39;t since its use has been &quot;Deprecated since version 3.6&quot;). The documentation of this, like most everythng else in <code>tkinter</code>, isn&#39;t great either. I suppose one could look at the source code a figure-out how to do this..."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1545869171, "post_id": 53937400, "comment_id": 94716745, "body": "@Valentino: BTW, the OP&#39;s code doesn&#39;t get very far the way it is: <code>AttributeError: module &#39;tkinter&#39; has no attribute &#39;scrolledtext&#39;</code>\u2014so it has other problems, as well."}, {"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1545870666, "post_id": 53937400, "comment_id": 94716961, "body": "@martineau you&#39;re right. My guess is that the <code>scrolledtext</code> module is not loaded when you import tkinter. At least I need to explicitly add <code>from tkinter import scrolledtext</code> to make it working. However this not really answer the OP question."}], "answers": [{"tags": [], "owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "is_accepted": false, "score": 4, "last_activity_date": 1545871572, "creation_date": 1545871572, "answer_id": 53938635, "question_id": 53937400, "link": "https://stackoverflow.com/questions/53937400/how-to-get-the-text-out-of-a-scrolledtext-widget/53938635#53938635", "title": "How to get the text out of a scrolledtext widget?", "body": "<p>So, out of curiosity I tried what described <a href=\"https://stackoverflow.com/questions/14824163/how-to-get-the-input-from-the-tkinter-text-box-widget\">here</a> (same link in my comment to the OP question). It works also for the <code>scrolledtext</code>.</p>\n\n<pre><code>import tkinter, sys\nfrom tkinter import scrolledtext\n\nroot = tkinter.Tk()\n\nclass saveProject:\n    def __init__(self, master):\n        self.master = master\n        self.textFrame = scrolledtext.ScrolledText(self.master, width=100, bd=10, relief=\"raised\")\n        self.textFrame.pack()\n        self.saveb = tkinter.Button(self.master, text=\"Save\", command= lambda : self.save())\n        self.saveb.pack()\n\n    def save(self):\n        cur_inp = self.textFrame.get(\"1.0\", tkinter.END)\n        fl = open(\"output.txt\", \"w\")\n        fl.write(cur_inp)\n\nproject = saveProject(root)\nroot.mainloop()\n</code></pre>\n\n<p>I've added a save button at the bottom of the <code>ScrolledText</code> widget. The widget content is saved inside the <code>output.txt</code> area.</p>\n"}, {"comments": [{"owner": {"reputation": 1633, "user_id": 7002315, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2860190b484d54bb5c75031e4c8d54e6?s=128&d=identicon&r=PG&f=1", "display_name": "herve-guerin", "link": "https://stackoverflow.com/users/7002315/herve-guerin"}, "edited": false, "score": 1, "creation_date": 1569334105, "post_id": 53938684, "comment_id": 102558596, "body": "Hi, you link to &quot;documentation&quot; (<a href=\"http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/text-index.html\" rel=\"nofollow noreferrer\">infohost.nmt.edu/tcc/help/pubs/tkinter/web/text-index.html</a>) is broken. I found the information by searching for &quot;python tkinter text widget index&quot;."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 1633, "user_id": 7002315, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2860190b484d54bb5c75031e4c8d54e6?s=128&d=identicon&r=PG&f=1", "display_name": "herve-guerin", "link": "https://stackoverflow.com/users/7002315/herve-guerin"}, "edited": false, "score": 0, "creation_date": 1569334479, "post_id": 53938684, "comment_id": 102558816, "body": "@geekobi: I&#39;ve updated the dead documentation link. Thanks for the heads-up."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 2, "last_activity_date": 1572546562, "last_edit_date": 1572546562, "creation_date": 1545872222, "answer_id": 53938684, "question_id": 53937400, "link": "https://stackoverflow.com/questions/53937400/how-to-get-the-text-out-of-a-scrolledtext-widget/53938684#53938684", "title": "How to get the text out of a scrolledtext widget?", "body": "<p><code>help(ScrolledText)</code> indicates it's a subclass of the <code>tkinter.Text</code> widget, which apparently means that the way to get the text from it is the same \u2014 via its <code>get()</code> method using \"Text widget indices\" (here's some <a href=\"https://web.archive.org/web/20190315202523id_/http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/text-index.html\" rel=\"nofollow noreferrer\">documentation</a> about them).</p>\n\n<p>Below is an example the gets all of the text in the widget (I added a <kbd>Save text</kbd> <code>Button</code> to test the <code>save()</code> method):</p>\n\n<pre><code>import sys\nimport tkinter as tk\nfrom tkinter.scrolledtext import ScrolledText\n\nclass SaveProject:\n    def __init__(self, master):\n        self.master = master\n        self.textFrame = ScrolledText(self.master, width=100, bd=10, relief=\"raised\")\n        self.textFrame.pack()\n        # Added for testing.\n        self.save_btn = tk.Button(self.master, text='Save text', command=self.save)\n        self.save_btn.pack()\n\n    def save(self):\n        self.saveText = self.textFrame.get('1.0', tk.END)  # Get all text in widget.\n        print('self.saveText:', self.saveText)\n\nroot = tk.Tk()\nproject = SaveProject(root)\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 9766795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e91af052e423c83a010c1b3c41819f0?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/9766795/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7970, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1572546562, "creation_date": 1545859976, "last_edit_date": 1545867545, "question_id": 53937400, "link": "https://stackoverflow.com/questions/53937400/how-to-get-the-text-out-of-a-scrolledtext-widget", "title": "How to get the text out of a scrolledtext widget?", "body": "<p>I am new to the <code>tkinter</code> python module. I try to do a project. I learned something new about the menus and I'm trying to make a little UI project that allows the user to write something in a scrolled text widget and then save it (using the <code>sys</code> module).</p>\n\n<p>I've already tried some things that worked at buttons. For example <code>.get()</code> but it didn't work. I also tried the <code>[\"text\"]</code> method.</p>\n\n<pre><code>import tkinter, sys\n\nroot = tkinter.Tk()\n\nclass saveProject:\n    def __init__(self, master):\n        self.master = master\n        self.textFrame = tkinter.scrolledtext.ScrolledText(self.master, width=100, bd=10, relief=\"raised\")\n        self.textFrame.pack()\n     def save(self):\n        #self.saveText = self.textFrame.get()\n        self.saveText = self.textFrame[\"text\"]\n\nproject = saveProject(root)\nroot.mainloop()\n</code></pre>\n\n<p>The problem is, as I already said, I don't know how to get the text out of a <code>tkinter.scrolledtext.ScrolledText</code> widget.</p>\n"}, {"tags": ["python", "lambda", "pyspark", "rdd"], "comments": [{"owner": {"reputation": 20969, "user_id": 2314737, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/RF6KX.jpg?s=128&g=1", "display_name": "user2314737", "link": "https://stackoverflow.com/users/2314737/user2314737"}, "edited": false, "score": 0, "creation_date": 1545931058, "post_id": 53937399, "comment_id": 94735630, "body": "This might be a case of &quot;tuple parameter unpacking&quot; that has been removed from Python 3 (see <a href=\"https://stackoverflow.com/questions/10607293/nested-arguments-not-compiling\">Nested arguments not compiling</a>)."}, {"owner": {"reputation": 15, "user_id": 10836584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ebbf36ec0273165b3fc2e667940c68?s=128&d=identicon&r=PG&f=1", "display_name": "Slimpunkerz", "link": "https://stackoverflow.com/users/10836584/slimpunkerz"}, "reply_to_user": {"reputation": 20969, "user_id": 2314737, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/RF6KX.jpg?s=128&g=1", "display_name": "user2314737", "link": "https://stackoverflow.com/users/2314737/user2314737"}, "edited": false, "score": 0, "creation_date": 1545954379, "post_id": 53937399, "comment_id": 94742799, "body": "That&#39;s it. Thanks. I wrote below the correct syntax in my comment of the previous answer."}, {"owner": {"reputation": 20969, "user_id": 2314737, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/RF6KX.jpg?s=128&g=1", "display_name": "user2314737", "link": "https://stackoverflow.com/users/2314737/user2314737"}, "edited": false, "score": 0, "creation_date": 1545954729, "post_id": 53937399, "comment_id": 94742897, "body": "If the answer is useful, you may <a href=\"https://stackoverflow.com/help/accepted-answer\">accept it</a>. See also <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10836584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ebbf36ec0273165b3fc2e667940c68?s=128&d=identicon&r=PG&f=1", "display_name": "Slimpunkerz", "link": "https://stackoverflow.com/users/10836584/slimpunkerz"}, "edited": false, "score": 0, "creation_date": 1545918358, "post_id": 53937574, "comment_id": 94730651, "body": "Thanks for this quick and good answer. <code>sortedMoviesWithNames = sortedMovies.map(lambda moviesDim : (nameDict.value[moviesDim[1]], moviesDim[0]))</code> works well !"}], "tags": [], "owner": {"reputation": 36, "user_id": 10836704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23d32cc6df410e980f89ab78ee88e8d?s=128&d=identicon&r=PG", "display_name": "John Adams", "link": "https://stackoverflow.com/users/10836704/john-adams"}, "is_accepted": true, "score": 1, "last_activity_date": 1545861223, "creation_date": 1545861223, "answer_id": 53937574, "question_id": 53937399, "link": "https://stackoverflow.com/questions/53937399/what-is-wrong-with-this-spark-rdd-mapped-with-a-lambda-function-with-two-argumen/53937574#53937574", "title": "What is wrong with this Spark RDD mapped with a lambda function with two arguments?", "body": "<p>I believe the correct syntax for a lambda with multiple arguments is:</p>\n\n<pre><code>sum_function = lambda a, b: a + b\n</code></pre>\n\n<p>Note the missing parentheses.\nIf you are trying to map a tuple to another tuple, you will need to do something like:</p>\n\n<pre><code>lambda tup: (nameDict.value[tup[1]], tup[0])\n</code></pre>\n\n<p>Python functions do not automatically unpack tuples, so a multi-argument function will <em>not</em> accept a tuple for its arguments and have it work properly (of course, that's what the * operator is for).</p>\n"}], "owner": {"reputation": 15, "user_id": 10836584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5ebbf36ec0273165b3fc2e667940c68?s=128&d=identicon&r=PG&f=1", "display_name": "Slimpunkerz", "link": "https://stackoverflow.com/users/10836584/slimpunkerz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "accepted_answer_id": 53937574, "answer_count": 1, "score": 1, "last_activity_date": 1545861223, "creation_date": 1545859949, "question_id": 53937399, "link": "https://stackoverflow.com/questions/53937399/what-is-wrong-with-this-spark-rdd-mapped-with-a-lambda-function-with-two-argumen", "title": "What is wrong with this Spark RDD mapped with a lambda function with two arguments?", "body": "<h1>Goal#</h1>\n\n<ul>\n<li>Print a dataset with Movie Name &amp; Number of times it has been rated.<br></li>\n<li>That's a simple way to get the most \"popular\" movie</li>\n</ul>\n\n<h1>Data</h1>\n\n<ul>\n<li>One file called \"u.data\" with movieID, userID, ratings, timestamp<br></li>\n<li>One file called \"u.item\" with movieID and movie name and information about - each movie<br></li>\n</ul>\n\n<h1>Method</h1>\n\n<ul>\n<li>Create a dictionnary key = MovieID, values = Name from the u.item files<br></li>\n<li>Broadcast the dictionary to the executioner nodes on the cluster<br></li>\n<li>Create a rdd with the MovieID and 1 on each line<br></li>\n<li>Reduce this rdd by movieID and sum each one<br></li>\n<li>Flip the key(movieID) and the value(Total) to sort the dataset by this total<br></li>\n</ul>\n\n<h1>Issue</h1>\n\n<ul>\n<li>Then I should map the movieID with the broadcasted dictionary but I get a syntax error on this line:<br>\n<code>sortedMoviesWithNames = sortedMovies.map(lambda (count, movie) : \n(nameDict.value[movie], count))</code></li>\n</ul>\n\n<p>This code example is from cookbook for Apache Spark and Python. All others codings exercises work perfectly on my environment. Windows 10 / Canopy / Python 3.5 / Spark 2.3.2\nI've checked the broadcasted dictionary it's ok, and already print the sortedMovies RDD which is ok too. I've checked the online errata of the book, nothing too.<br></p>\n\n<p>I'm wondering if this is a syntax error due to the Python version or something like that. </p>\n\n<pre><code>from pyspark import SparkConf, SparkContext\n\ndef loadMovieNames():\n    movieNames = {}\n    with open(\"ml-100k/u.item\") as f:\n        for line in f:\n            fields = line.split('|')\n            movieNames[int(fields[0])] = fields[1]\n    return movieNames\n\nconf = SparkConf().setMaster(\"local\").setAppName(\"PopularMovies\")\nsc = SparkContext(conf = conf)\n\nnameDict = sc.broadcast(loadMovieNames())\n\nlines = sc.textFile(\"file:///SparkCourse/ml-100k/u.data\")\nmovies = lines.map(lambda x: (int(x.split()[1]), 1))\nmovieCounts = movies.reduceByKey(lambda x, y: x + y)\n\nflipped = movieCounts.map(lambda x: (x[1], x[0]))\nsortedMovies = flipped.sortByKey()\n\nsortedMoviesWithNames = sortedMovies.map(lambda (count, movie) : \n(nameDict.value[movie], count))\n\nresults = sortedMoviesWithNames.collect()\n\nfor result in results:\n    print(result)\n</code></pre>\n"}, {"tags": ["python", "logging", "bunyan"], "answers": [{"tags": [], "owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1545879405, "creation_date": 1545879405, "answer_id": 53939262, "question_id": 53937394, "link": "https://stackoverflow.com/questions/53937394/how-to-include-additional-parameters-in-the-logs-such-as-function-name-line-num/53939262#53939262", "title": "how to include additional parameters in the logs such as function name, line number, pathname in python-bunyan", "body": "<p>Remove them from the list after the object is created.</p>\n\n<pre><code>X = Logger()\nfor field in ['filename', 'funcName', 'lineno']:\n    X._skip_fields.remove(field)\n</code></pre>\n"}], "owner": {"reputation": 656, "user_id": 9131967, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/70f820efcdbd7369d530a1c8d4d6c8dc?s=128&d=identicon&r=PG&f=1", "display_name": "MANOJ", "link": "https://stackoverflow.com/users/9131967/manoj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1545879405, "creation_date": 1545859933, "last_edit_date": 1545864203, "question_id": 53937394, "link": "https://stackoverflow.com/questions/53937394/how-to-include-additional-parameters-in-the-logs-such-as-function-name-line-num", "title": "how to include additional parameters in the logs such as function name, line number, pathname in python-bunyan", "body": "<p>Below is the <code>__init__</code> function of bunyan logger.</p>\n\n<pre><code> def __init__(self, *args, **kwargs):\n    \"\"\"Defined default log format.\"\"\"\n    self._required_fields = [\n      'asctime',\n      'exc_info',\n      'levelno',\n      'message',\n      'name',\n      'process',\n    ]\n    self._skip_fields = self._required_fields[:]\n    self._skip_fields += [\n      'args',\n      'created',\n      'exc_text',\n      'filename',\n      'funcName',\n      'levelname',\n      'lineno',\n      'module',\n      'msecs',\n      'pathname',\n      'processName',\n      'relativeCreated',\n      'stack_info',\n      'thread',\n      'threadName',\n    ]\n</code></pre>\n\n<p><code>filename</code>, <code>funcName</code> and <code>lineno</code> are skipped by default. Is there any way I can include them by still being to use python-bunyan?</p>\n"}, {"tags": ["python", "django", "python-3.x", "virtualenv"], "comments": [{"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1545859842, "post_id": 53937364, "comment_id": 94714728, "body": "Can you change the title to be more helpful (what the problem is,  kt that you need help) and format you code right? See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> in the <a href=\"https://stackoverflow.com/help\">help center</a>."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1545861967, "post_id": 53937364, "comment_id": 94715351, "body": "It should be <code>--python=python3</code>."}], "answers": [{"tags": [], "owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "is_accepted": true, "score": 1, "last_activity_date": 1545860140, "creation_date": 1545860140, "answer_id": 53937419, "question_id": 53937364, "link": "https://stackoverflow.com/questions/53937364/how-i-can-fix-my-virtualenv-problem-with-python/53937419#53937419", "title": "How i can fix my virtualenv problem with python?", "body": "<p>Since you're using python 3 you should use:</p>\n\n<pre><code>python3 -m venv /path/to/new/virtual/environment\n</code></pre>\n\n<p>as documented here: <a href=\"https://docs.python.org/3/library/venv.html\" rel=\"nofollow noreferrer\">Creation of virtual environments</a></p>\n\n<p>[FYI: the problem in your original is the that flag takes an <code>=</code> like <code>--python=python3</code>]</p>\n"}], "owner": {"reputation": 3, "user_id": 10836367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a04e68900e2c11da2a9f9860f904c9c8?s=128&d=identicon&r=PG&f=1", "display_name": "luenalem", "link": "https://stackoverflow.com/users/10836367/luenalem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 53937419, "answer_count": 1, "score": -1, "last_activity_date": 1587595526, "creation_date": 1545859716, "last_edit_date": 1587595526, "question_id": 53937364, "link": "https://stackoverflow.com/questions/53937364/how-i-can-fix-my-virtualenv-problem-with-python", "title": "How i can fix my virtualenv problem with python?", "body": "<p>I was trying to create my first django project so I installed the virtualenv.\nAfter I typed this into the terminal: </p>\n\n<pre><code>~$ virtualenv --python-python3 firstdjango \n</code></pre>\n\n<p>My terminal gave me this error: </p>\n\n<pre><code>Usage: virtualenv [OPTIONS] DEST_DIR  \nvirtualenv: error: no such option: --python-python3\n</code></pre>\n\n<p>What should I do?</p>\n"}, {"tags": ["python", "flask", "flask-wtforms"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9796081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7098fc52dfe4dad9f3361e801ab0d925?s=128&d=identicon&r=PG", "display_name": "Hank", "link": "https://stackoverflow.com/users/9796081/hank"}, "edited": false, "score": 0, "creation_date": 1545891703, "post_id": 53937878, "comment_id": 94720481, "body": "Rudeak, for clarity, do you mean for the same function definition or two separate definitions?  It did not appear to fix the problem using the same function definition.  If it is two separate definitions, how do you get access to the form in the function for the POST route?"}, {"owner": {"reputation": 36, "user_id": 10836741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b62c2a415a430abe560e81073e1eaac7?s=128&d=identicon&r=PG", "display_name": "rudeak", "link": "https://stackoverflow.com/users/10836741/rudeak"}, "reply_to_user": {"reputation": 25, "user_id": 9796081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7098fc52dfe4dad9f3361e801ab0d925?s=128&d=identicon&r=PG", "display_name": "Hank", "link": "https://stackoverflow.com/users/9796081/hank"}, "edited": false, "score": 0, "creation_date": 1545893049, "post_id": 53937878, "comment_id": 94720894, "body": "You must create two separate routes for rendering the template with form [&#39;GET&#39;] and for processing the form [&#39;POST&#39;]."}, {"owner": {"reputation": 25, "user_id": 9796081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7098fc52dfe4dad9f3361e801ab0d925?s=128&d=identicon&r=PG", "display_name": "Hank", "link": "https://stackoverflow.com/users/9796081/hank"}, "edited": false, "score": 0, "creation_date": 1545893195, "post_id": 53937878, "comment_id": 94720947, "body": "Rudeak, I chose to use one function with two routes and use the request module to get access to the form.  In case anyone has a similar issue, you will have to cast the request.form[&#39;answer&#39;] to an int also in order to compare it to session[&#39;correct&#39;] .  Thanks!"}], "tags": [], "owner": {"reputation": 36, "user_id": 10836741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b62c2a415a430abe560e81073e1eaac7?s=128&d=identicon&r=PG", "display_name": "rudeak", "link": "https://stackoverflow.com/users/10836741/rudeak"}, "is_accepted": true, "score": 2, "last_activity_date": 1545863854, "creation_date": 1545863854, "answer_id": 53937878, "question_id": 53937358, "link": "https://stackoverflow.com/questions/53937358/validate-on-submit-to-verify-user-entered-data-doesnt-see-correct-form-values/53937878#53937878", "title": "validate_on_submit to verify user entered data doesn&#39;t see correct form values", "body": "<p>You must make two separate routes:\n@app.route ('/quiz', methods=['GET'])\n@app.route ('/quiz', methods=['POST'])</p>\n"}], "owner": {"reputation": 25, "user_id": 9796081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7098fc52dfe4dad9f3361e801ab0d925?s=128&d=identicon&r=PG", "display_name": "Hank", "link": "https://stackoverflow.com/users/9796081/hank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 53937878, "answer_count": 1, "score": 0, "last_activity_date": 1545863854, "creation_date": 1545859670, "question_id": 53937358, "link": "https://stackoverflow.com/questions/53937358/validate-on-submit-to-verify-user-entered-data-doesnt-see-correct-form-values", "title": "validate_on_submit to verify user entered data doesn&#39;t see correct form values", "body": "<p>I have a Flask app that is a basic quiz app. A user answers a question and in the view I verify if the answer was correct or not.  The problem I am having is that the correct response is not being compared correctly with the user's answer.  It seems to be looking at the next form's correct answer instead of comparing the current form's correct answer. </p>\n\n<p>I've tried to use an intermediate view to check the correct answer as well as use session variables.  It always seems like it's checking the correct answer against the next form's values.</p>\n\n<p>Thank you in advance for your attention.</p>\n\n<p>My Form code:</p>\n\n<pre><code>class QuizForm(FlaskForm):\n    question = ''\n    answer = RadioField('Answer',coerce=int,\n            choices=[],validators=[DataRequired()])\n    submit = SubmitField('Submit')\n    correct = HiddenField('Correct')\n\n    def validate_answer(self,answer):\n        if answer is None:\n            raise ValidationError('Please select an answer')\n</code></pre>\n\n<p>My Routes code:</p>\n\n<pre><code>@app.route('/quiz', methods=['GET','POST'])\n@login_required\ndef quiz():\n    form = QuizForm()\n\n    #qq = Database entry for questions/choices/correct answer..\n\n    form.question = qq.question\n    form.answer.choices = [(1,qq.choice1), (2, qq.choice2),\n                           (3,qq.choice3), (4, qq.choice4)]\n\n    form.correct = qq.answer\n\n    if form.validate_on_submit():\n        if form.answer.data == form.correct:\n            flash('Correct')\n        else:\n            flash('Incorrect!')\n\n        return redirect(url_for('quiz'))\n\n     return render_template('quiz.html',form=form)\n</code></pre>\n\n<p>My html:</p>\n\n<pre><code>&lt;form action=\"\" method=\"post\" novalidate&gt;\n   {{ form.hidden_tag() }}\n   &lt;p&gt;\n       {{ form.question }}\n       {{ form.answer }}\n   {% for error in form.answer.errors %}\n       &lt;span style=\"color: red;\"&gt;[{{ error }}]&lt;/span&gt;\n   {% endfor %}\n   &lt;/p&gt;\n   &lt;p&gt;{{ form.submit() }}&lt;/p&gt;\n&lt;/form&gt;\n</code></pre>\n"}, {"tags": ["python", "linux", "bash", "ubuntu", "ros"], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 10419571, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ayFKaARuC7c/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUZOPwIeaDIu3MfFT2S8AI7nvv-pA/mo/photo.jpg?sz=128", "display_name": "engineerRed", "link": "https://stackoverflow.com/users/10419571/engineerred"}, "is_accepted": false, "score": 0, "last_activity_date": 1546583782, "creation_date": 1546583782, "answer_id": 54034106, "question_id": 53937342, "link": "https://stackoverflow.com/questions/53937342/how-can-i-source-two-paths-for-the-ros-environmental-variable-at-the-same-time/54034106#54034106", "title": "How can I source two paths for the ROS environmental variable at the same time?", "body": "<p>Different solutions to try:</p>\n\n<ul>\n<li>It sounds like the first path <code>/eda/gazebo/ros/kinetic/share</code> or <code>/home/kelu/Dropbox/GET_Lab/leap_ws/src</code> has an <code>rqt_image_view</code> package that is being used. Try to remove that dependency.</li>\n<li>Have you tried switching the source files being sourced? This depends on how the <code>rqt_image_view</code> package was built, such as by source or through a package manager. </li>\n</ul>\n\n<p>Initially, it sounds like there is a problem with the paths being searched or wrong package being run since the package works with the default ROS environment setup. </p>\n"}], "owner": {"reputation": 9, "user_id": 10794398, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0iVPRYz6EOE/AAAAAAAAAAI/AAAAAAAAABM/bo9gbvTHMvA/photo.jpg?sz=128", "display_name": "Ke Lv", "link": "https://stackoverflow.com/users/10794398/ke-lv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 403, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546583782, "creation_date": 1545859576, "last_edit_date": 1545865355, "question_id": 53937342, "link": "https://stackoverflow.com/questions/53937342/how-can-i-source-two-paths-for-the-ros-environmental-variable-at-the-same-time", "title": "How can I source two paths for the ROS environmental variable at the same time?", "body": "<p>I have a problem with using the rqt_image_view package in ROS. Each time when I type <code>rqt_image_view</code> or <code>rosrun rqt_image_view rqt_image_view</code> in terminal, it will return:  </p>\n\n<blockquote>\n  <p>Traceback (most recent call last):<br>\n    File \"/opt/ros/kinetic/bin/rqt_image_view\", line 16, in <br>\n      plugin_argument_provider=add_arguments))<br>\n    File \"/opt/ros/kinetic/lib/python2.7/dist-packages/rqt_gui/main.py\", line 59, in main\n      return super(Main, self).main(argv, standalone=standalone, plugin_argument_provider=plugin_argument_provider, plugin_manager_settings_prefix=str(hash(os.environ['ROS_PACKAGE_PATH'])))<br>\n    File \"/opt/ros/kinetic/lib/python2.7/dist-packages/qt_gui/main.py\", line 338, in main<br>\n      from python_qt_binding import QT_BINDING<br>\n  ImportError: cannot import name QT_BINDING</p>\n</blockquote>\n\n<p>In the /.bashrc file, I have source :</p>\n\n<blockquote>\n  <p>source /opt/ros/kinetic/setup.bash<br>\n  source /home/kelu/Dropbox/GET_Lab/leap_ws/devel/setup.bash --extend<br>\n  source /eda/gazebo/setup.bash  --extend</p>\n</blockquote>\n\n<p>They are the default path of ROS, my own working space, the robot simulator of our university. I must use all of them. I have already finished many projects with this environmental variable setting. However, when I want to use the package rqt_image_view today, it returns the above error info.</p>\n\n<p>When I run <code>echo $ROS_PACKAGE_PATH</code>, I get the return:</p>\n\n<blockquote>\n  <p>/eda/gazebo/ros/kinetic/share:/home/kelu/Dropbox/GET_Lab/leap_ws/src:/opt/ros/kinetic/share</p>\n</blockquote>\n\n<p>And <code>echo $PATH</code></p>\n\n<blockquote>\n  <p>/usr/local/cuda/bin:/opt/ros/kinetic/bin:/usr/local/cuda/bin:/usr/local/cuda/bin:/home/kelu/bin:/home/kelu/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin</p>\n</blockquote>\n\n<p>Then I only source the  <code>/opt/ros/kinetic/setup.bash</code> ,the rqt_image_view package runs!!<br>\nIt seems that, if I want to use rqt_image_view, then I can not source both <code>/opt/ros/kinetic/setup.bash</code> and <code>/home/kelu/Dropbox/GET_Lab/leap_ws/devel/setup.bash</code> at the same time.</p>\n\n<p>Could someone tell me how to fix this problem? I have already search 5 hours in google and haven't find a solution.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "plotly", "seaborn"], "comments": [{"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 7, "creation_date": 1545859985, "post_id": 53937339, "comment_id": 94714779, "body": "SO is more designed around a one-question-per-post model. Your first question has been answered many times already (under matplotlib tags), the second question is answered directly in Plotly&#39;s Axes docs under the header &quot;Reversed Axes&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 28403, "user_id": 3437787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8tmU.jpg?s=128&g=1", "display_name": "vestland", "link": "https://stackoverflow.com/users/3437787/vestland"}, "is_accepted": true, "score": 1, "last_activity_date": 1576668204, "creation_date": 1576668204, "answer_id": 59390966, "question_id": 53937339, "link": "https://stackoverflow.com/questions/53937339/style-seaborn-and-plotly-heatmaps/59390966#59390966", "title": "Style Seaborn and Plotly heatmaps", "body": "<p><strong>2.</strong> How do I get the older data to the top?</p>\n\n<pre><code>fig.update_yaxes(autorange=\"reversed\")\n</code></pre>\n\n<p><strong>3.</strong> How do i get the data labels displayed in the heatmap?</p>\n\n<pre><code>ff.create_annotated_heatmap()\n</code></pre>\n\n<p><strong>4.</strong> Can plotly be optimized?</p>\n\n<p>No quick-fixes here.</p>\n\n<p><strong>Plot:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/Yka1e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yka1e.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Plotly:</strong></p>\n\n<pre><code>from plotly.offline import iplot\nimport plotly.graph_objs as go\nimport plotly.figure_factory as ff\n\n#py.init_notebook_mode(connected=True)\n\ndata = [\n    go.Heatmap(\n        z=df.values,\n        x=df.columns.tolist(),\n        y=df.index.tolist()\n    )\n]\n\nfont_colors = ['white', 'black']\nfig = ff.create_annotated_heatmap(z=df.values, colorscale='Jet', font_colors=font_colors)\n\nfig.update_layout( yaxis = dict(ticks='', nticks=N))\n\n# Make text size smaller\nfor i in range(len(fig.layout.annotations)):\n    fig.layout.annotations[i].font.size = 8\n\n# reverse scales\nfig.update_yaxes(autorange=\"reversed\")\n\nfig.show()\n</code></pre>\n"}], "owner": {"reputation": 1256, "user_id": 3116231, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/ImKoG.jpg?s=128&g=1", "display_name": "zinyosrim", "link": "https://stackoverflow.com/users/3116231/zinyosrim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1002, "favorite_count": 0, "accepted_answer_id": 59390966, "answer_count": 1, "score": 2, "last_activity_date": 1576669256, "creation_date": 1545859560, "last_edit_date": 1576669256, "question_id": 53937339, "link": "https://stackoverflow.com/questions/53937339/style-seaborn-and-plotly-heatmaps", "title": "Style Seaborn and Plotly heatmaps", "body": "<p>I created a plot with Seaborn:</p>\n\n<pre><code># imports\nimport random\n\n%matplotlib inline\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# create some random data\nN = 20\nrand_matrix = np.asarray([random.randrange(1,11)/10 for _ in range(1, N*N+1) ]).reshape(N,N)\ndata = np.flip(np.triu(rand_matrix), 1)\ndf = pd.DataFrame(data, index=pd.date_range(start='2015-01-01', freq='MS',\\ \n                  periods=N), columns = range(1,N+1))\ndf[1]=1\n\n# seaborn plot\nplt.figure(figsize=(20,20))\nsns.heatmap(data = df,\n            annot = True,\n            vmin = 0.0,\n            vmax = 1.0,\n            cmap = 'PuBuGn')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/BZQB4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BZQB4.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is how I create the Plotly plot:</p>\n\n<pre><code>import plotly.offline as py\nimport plotly.graph_objs as go\n\npy.init_notebook_mode(connected=True)\n\ndata = [\n    go.Heatmap(\n        z=df.values,\n        x=df.columns.tolist(),\n        y=df.index.tolist()\n    )\n]\n\nlayout = go.Layout(\n    xaxis = dict(ticks='', nticks=N),\n    yaxis = dict(ticks='', nticks=N))\n\nfig = go.Figure(data=data, layout=layout)\niplot(fig)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/tgi43.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tgi43.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have following questions:</p>\n\n<ul>\n<li>Seaborn: How do I change the y axis labels to YYYY-MM?</li>\n<li>Plotly: How do I get the older data to the top (like with Seaborn)</li>\n<li>Plotly: How do I get the data labels displayed in the heatmap (like Seaborn does). </li>\n<li>Plotly: I noticed that rendering is much slower than Seaborn. Can it be optimized, if yes how?</li>\n</ul>\n"}, {"tags": ["python", "multiprocessing", "python-multiprocessing"], "answers": [{"tags": [], "owner": {"reputation": 1454, "user_id": 5245893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JVjQ.png?s=128&g=1", "display_name": "Mikhail Berlinkov", "link": "https://stackoverflow.com/users/5245893/mikhail-berlinkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1545869617, "creation_date": 1545869617, "answer_id": 53938444, "question_id": 53937320, "link": "https://stackoverflow.com/questions/53937320/python-multiprocessing-independently-processing-for-each-key-value-pair-in-the/53938444#53938444", "title": "Python multiprocessing - Independently processing for each key-value pair in the dictionary", "body": "<p>Try something along the lines </p>\n\n<pre><code>from multiprocessing import Pool\n\ndef pair_black_box(data):\n    key, values = data\n    res = []\n    for i in range(0, len(values)):\n        for j in range(i, len(values)):\n            if(i != j):\n               res.append(blackBoxFunction(values[i], values[j]))\n    return key, res\n\np = Pool(3)\nfinalValue = dict(p.map(pair_black_box, sampleData.items()))\n</code></pre>\n"}], "owner": {"reputation": 2152, "user_id": 6326739, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8da8de491899a4fddf6cd2435518cc87?s=128&d=identicon&r=PG&f=1", "display_name": "sjishan", "link": "https://stackoverflow.com/users/6326739/sjishan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 53938444, "answer_count": 1, "score": 1, "last_activity_date": 1545869617, "creation_date": 1545859427, "last_edit_date": 1545860771, "question_id": 53937320, "link": "https://stackoverflow.com/questions/53937320/python-multiprocessing-independently-processing-for-each-key-value-pair-in-the", "title": "Python multiprocessing - Independently processing for each key-value pair in the dictionary", "body": "<p>I have a dictionary that looks like this:</p>\n\n<pre><code>sampleData = {'x1': [1,2,3], 'x2': [4,5,6], 'x3': [7,8,9]}\n</code></pre>\n\n<p>I need to do some calculation for each key and value pair by passing data to a <strong>blackBoxFunction</strong>. This function takes time to do the processing. The final output is stored in a separate dictionary <code>finalValue = {}</code>.</p>\n\n<p>This is the code for doing it sequentially:</p>\n\n<pre><code>for key in sampleData.keys():\n    finalValue[key] = []\n    for i in range(0,len(sampleData[key])):\n        for j in range(i,len(sampleData[key])):\n            if(i!=j):\n                finalValue[key].append(blackBoxFunction(sampleData[key][i],sampleData[key][j]))\n</code></pre>\n\n<p>However, the calculation for each key and value pair is independent of each other.</p>\n\n<p>I want to know how can I use multiprocessing library in my code to perform the task in parallel.</p>\n\n<p>The final dictionary structure will look similar to the input dictionary.</p>\n\n<pre><code>finalValue \n{'x1': [31, 43, 53], 'x2': [97, 110, 131], 'x3': [135, 164, 137]}\n</code></pre>\n"}, {"tags": ["python", "string", "input", "printing"], "comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 2, "creation_date": 1545859173, "post_id": 53937267, "comment_id": 94714519, "body": "You are the one with the outdated Python version. ;) Switch to Python3 or use <code>raw_input</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1545859318, "post_id": 53937267, "comment_id": 94714564, "body": "Unrelated to the problem: You should put the prompt as an argument to <code>input()</code> or <code>raw_input()</code> rather than printing it separately."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 1, "creation_date": 1545859349, "post_id": 53937267, "comment_id": 94714570, "body": "@DanFarrell Why do you think that? It&#39;s the expected error with Python 2.x."}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 2, "creation_date": 1545859433, "post_id": 53937267, "comment_id": 94714593, "body": "lol, because I&#39;m dumb :P . always forget <code>input()</code> is an eval-like operation in 2.x"}, {"owner": {"reputation": 2076, "user_id": 7359176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FqgFb.jpg?s=128&g=1", "display_name": "Niels Henkens", "link": "https://stackoverflow.com/users/7359176/niels-henkens"}, "edited": false, "score": 0, "creation_date": 1545860183, "post_id": 53937267, "comment_id": 94714832, "body": "change the second line to <code>name = raw_input()</code> and add a space in the third line right after hi (so <code>&quot;hi &quot;</code>). <code>input()</code> is what you use in python 3.x. The equivalent in python 2.7 is <code>raw_input()</code>."}], "owner": {"reputation": 11, "user_id": 10836640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/702f9b3b4416bd359f318db1d64a42dc?s=128&d=identicon&r=PG&f=1", "display_name": "A.Nixon", "link": "https://stackoverflow.com/users/10836640/a-nixon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1545859274, "answer_count": 0, "score": 1, "last_activity_date": 1545872738, "creation_date": 1545859095, "last_edit_date": 1545872738, "question_id": 53937267, "link": "https://stackoverflow.com/questions/53937267/the-input-function-gives-me-a-nameerror", "closed_reason": "Duplicate", "title": "The `input()` function gives me a NameError", "body": "<p>In this tutorial I'm following this program that asks the user for their name, and then responds with <code>hi\" + name</code>. I followed the instructions but it isn't accepting inputs. Is the tutorial wrong/outdated?</p>\n\n<pre><code>print (\"Hi! I\u2019m Joseph. What's your name?\")\nname = input()\nprint (\"Hi\" + name)\n</code></pre>\n\n<p>It\u2019s supposed to respond with a literal <code>Hi</code> and then the <code>name</code> but instead I am shown this:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/user/Documents/AA school/ICT/python/Using str variables.py\", line 2, in &lt;module&gt;\n    name = input()\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\nNameError: name 'Adam' is not defined\n</code></pre>\n\n<p>I've tried changing the <code>+ name</code> to <code>+ str(name)</code>, and putting spaces in and removing them from different areas of the code.</p>\n\n<p>What\u2019s wrong?</p>\n"}, {"tags": ["python", "sum", "range", "variance", "forecast"], "comments": [{"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "edited": false, "score": 2, "creation_date": 1545859230, "post_id": 53937261, "comment_id": 94714539, "body": "If you show what you&#39;ve tried so far, and indicate exactly where the roadblock is,  Stack Overflow can help."}, {"owner": {"reputation": 4159, "user_id": 8212173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ApXfoDEeNA/AAAAAAAAAAI/AAAAAAAAADc/9wpTVfHMarU/photo.jpg?sz=128", "display_name": "amanb", "link": "https://stackoverflow.com/users/8212173/amanb"}, "edited": false, "score": 1, "creation_date": 1545859727, "post_id": 53937261, "comment_id": 94714684, "body": "Welcome to SO! Please show a Minimal, Verifiable, Working example for your problem."}], "owner": {"reputation": 1, "user_id": 10836636, "user_type": "registered", "profile_image": "https://graph.facebook.com/2179310995442121/picture?type=large", "display_name": "Jasmin Snr", "link": "https://stackoverflow.com/users/10836636/jasmin-snr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545926954, "creation_date": 1545859044, "last_edit_date": 1545903968, "question_id": 53937261, "link": "https://stackoverflow.com/questions/53937261/sum-up-126-previous-values-for-variance-forecast-in-a-new-column-with-fix-range", "title": "Sum up 126 previous values for variance forecast in a new column with fix range", "body": "<p>I want to use a formula to make a variance forecast. I imported a CSV file in python with two columns : DATE and RETURN. Now I want to forecast the variance with the last 126 Return values. Therefore I want to add a new column to my data  starting from row 126, where the last 126 values for return are summed up and row 127 then I sum up the return values from row 2 to 127 and so on. Just like in Excel when I pull down my code for the next rows and my rows are now fixed, so the range moves downwards. </p>\n\n<p>In total my Data has 24250 values, and I want to add a new row called SUM126</p>\n\n<p>CODE:</p>\n\n<pre><code>#import file and skip first 14 rows because they are header\nDATA = pd.read_csv('DATA.CSV',skiprows=14)\n#Named the headers\nheader_names=['DATE','RETURN WML']\nDATA = pd.read_csv('Thesis_DATA.CSV',skiprows=14,names = header_names)\n#get the decimal in new column\nDATA['(RETURN/100)'] = (DATA['RETURN WML']/100)\n</code></pre>\n\n<p>and now I want to add the new column, therefore I tried something like that:</p>\n\n<pre><code>#starting the new column in row 126,running over 1 steps till 24250\nfor i=(126:1:24250)\n#I always want the sum of the last 126 values\n    relevant_data= data(i-125:i);\n#I am creating a new column \n    DATA['VARIANCE FORECAST']=(sum(relevant_data))\n</code></pre>\n\n<p>I am happy for any help!</p>\n"}, {"tags": ["python", "pandas", "networkx"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1545859388, "post_id": 53937259, "comment_id": 94714584, "body": "How do you want label these nodes?"}, {"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "edited": false, "score": 0, "creation_date": 1545860050, "post_id": 53937259, "comment_id": 94714790, "body": "You mean each row represents an edge, right?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1545860079, "post_id": 53937259, "comment_id": 94714802, "body": "<code>G=nx.from_pandas_edgelist(df, &#39;X&#39;, &#39;Y&#39;) </code> then just plot .."}, {"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "edited": false, "score": 1, "creation_date": 1545860209, "post_id": 53937259, "comment_id": 94714841, "body": "Or <code>nx.Graph().add_edges_from(df.values)</code>"}, {"owner": {"reputation": 2277, "user_id": 3686866, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/om881.jpg?s=128&g=1", "display_name": "Mohammad Heydari", "link": "https://stackoverflow.com/users/3686866/mohammad-heydari"}, "reply_to_user": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "edited": false, "score": 0, "creation_date": 1559575600, "post_id": 53937259, "comment_id": 99455157, "body": "@yatu Works fine"}], "answers": [{"comments": [{"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 1, "creation_date": 1545862067, "post_id": 53937524, "comment_id": 94715371, "body": "Perfect! This is super cool. I tried using reset_index but couldn&#39;t figure it out."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 1, "last_activity_date": 1545860910, "creation_date": 1545860910, "answer_id": 53937524, "question_id": 53937259, "link": "https://stackoverflow.com/questions/53937259/converting-a-pandas-dataframe-to-a-networkx-graph/53937524#53937524", "title": "Converting a pandas dataframe to a networkx graph", "body": "<p>IIUC:</p>\n\n<p>Your indexes are the labels for your nodes.  So, we need to to reshape dataframe a bit to create an edge list dataframe:</p>\n\n<pre><code>d1 = df.reset_index().set_index(['X',df.groupby('X').cumcount()]).unstack()['index']\nd2 = df.reset_index().set_index(['Y',df.groupby('Y').cumcount()]).unstack()['index']\nd3 = pd.concat([d1,d2]).set_axis(['source','target'], inplace=False, axis=1).dropna().astype(int)\n\nG = nx.from_pandas_edgelist(d3, source='source', target='target')\nnx.draw_networkx(G)\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/toSkC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/toSkC.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "edited": false, "score": 0, "creation_date": 1545862082, "post_id": 53937557, "comment_id": 94715379, "body": "Great answer! This is marvellously fast too!"}], "tags": [], "owner": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "is_accepted": true, "score": 2, "last_activity_date": 1545861474, "last_edit_date": 1545861474, "creation_date": 1545861096, "answer_id": 53937557, "question_id": 53937259, "link": "https://stackoverflow.com/questions/53937259/converting-a-pandas-dataframe-to-a-networkx-graph/53937557#53937557", "title": "Converting a pandas dataframe to a networkx graph", "body": "<p>You can define your edges by defining all pairs of nodes that have to same value for <code>'X'</code> and the same value for <code>'Y'</code> using <code>itertools.combinations</code>.</p>\n\n<pre><code>import itertools.combinations as comb\n\nedges = set()\nfor col in df:\n    for _, data in df.groupby(col):\n        edges.update(comb(data.index, 2))\n\nG = nx.Graph()\nG.add_nodes_from(df.index)\nG.add_edges_from(edges)\n</code></pre>\n"}], "owner": {"reputation": 1202, "user_id": 9937273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xJAip.png?s=128&g=1", "display_name": "Don Thousand", "link": "https://stackoverflow.com/users/9937273/don-thousand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2803, "favorite_count": 2, "accepted_answer_id": 53937557, "answer_count": 2, "score": 2, "last_activity_date": 1545861474, "creation_date": 1545859036, "last_edit_date": 1545859929, "question_id": 53937259, "link": "https://stackoverflow.com/questions/53937259/converting-a-pandas-dataframe-to-a-networkx-graph", "title": "Converting a pandas dataframe to a networkx graph", "body": "<p>I have a dataframe like the following:</p>\n\n<pre><code>    X  Y\n0   1  1\n1   1  2\n2   2  1\n3   2  3\n4   3  3\n</code></pre>\n\n<p>I want to create an undirected graph in networkx where each row of the dataframe corresponds to a node in the graph (the name of each node should be the index value of the dataframe), and an edge is drawn between nodes if the two nodes share either the same X or Y values. How can this be done?</p>\n"}, {"tags": ["python", "pygame"], "answers": [{"comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1545859309, "post_id": 53937275, "comment_id": 94714559, "body": "It might be a good idea to give specific suggestions about renaming things. For instance, it&#39;s conventional to give classes <code>CapitalizedNames</code>, while instances (and other variables use <code>lowercase_names_with_underscores</code>."}, {"owner": {"reputation": 31, "user_id": 8660084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd17293bd4a828665b0609e0cc4bdbc1?s=128&d=identicon&r=PG&f=1", "display_name": "Slipknot1", "link": "https://stackoverflow.com/users/8660084/slipknot1"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1545859422, "post_id": 53937275, "comment_id": 94714590, "body": "@Blckknght I&#39;ll try to keep that in mind when programming."}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 1, "creation_date": 1545859574, "post_id": 53937275, "comment_id": 94714636, "body": "@Blckknght I have enhancement my answer a bit."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "reply_to_user": {"reputation": 31, "user_id": 8660084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd17293bd4a828665b0609e0cc4bdbc1?s=128&d=identicon&r=PG&f=1", "display_name": "Slipknot1", "link": "https://stackoverflow.com/users/8660084/slipknot1"}, "edited": false, "score": 1, "creation_date": 1545859817, "post_id": 53937275, "comment_id": 94714721, "body": "@Slipknot1 In general, you should not use the exact same name for two different purposes. You got lucky here because the compiler was able to detect this error. Often reusing names will lead to errors that are much more difficult to track down."}], "tags": [], "owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "is_accepted": false, "score": 3, "last_activity_date": 1545859552, "last_edit_date": 1545859552, "creation_date": 1545859141, "answer_id": 53937275, "question_id": 53937248, "link": "https://stackoverflow.com/questions/53937248/class-object-is-not-callable/53937275#53937275", "title": "class object is not callable", "body": "<p><code>for bullet in bullets:</code> defines a variable of same name <code>bullet</code> which overwrites the class object. Rename either class or variable.</p>\n\n<p>Conventionally upercase <code>CamelCase</code> is used for class names, <code>lowercase_underscored</code> for variables.</p>\n\n<p><a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow noreferrer\">Complete Python style guide</a></p>\n"}, {"tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1545859266, "creation_date": 1545859266, "answer_id": 53937295, "question_id": 53937248, "link": "https://stackoverflow.com/questions/53937248/class-object-is-not-callable/53937295#53937295", "title": "class object is not callable", "body": "<p>The problem is the line</p>\n\n<pre><code>for bullet in bullets:\n</code></pre>\n\n<p>where you overwrite the class <code>bullet</code> with the variable <code>bullet</code>. That's why the convention exists to write classes with capital letter <code>Bullet</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 8660084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd17293bd4a828665b0609e0cc4bdbc1?s=128&d=identicon&r=PG&f=1", "display_name": "Slipknot1", "link": "https://stackoverflow.com/users/8660084/slipknot1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1545859552, "creation_date": 1545858973, "question_id": 53937248, "link": "https://stackoverflow.com/questions/53937248/class-object-is-not-callable", "title": "class object is not callable", "body": "<p>I am trying to recreate one of those old 2d space shooters, and have got most of it done, I have got stuck on the actual part of shooting though. </p>\n\n<p>Also would I use pythagaros' theorem to calculate collisions between the bullets and the enemy as well as collisions between the enemies and the player?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>import pygame, random, os\n\npygame.init()\nw, h = 1366, 768\nscreen = pygame.display.set_mode((0, 0), pygame.FULLSCREEN)\npygame.display.set_caption('SPACESHIPSHOOTER')\nclock = pygame.time.Clock()\n\nclass player:\n    def __init__(self, pos=[w//2, h//7]):\n        self.pos = pos\n        self.player = pygame.image.load(os.path.join('GameData', 'player.png'))\n        self.player = pygame.transform.scale(self.player, (100, 83))\n\nclass enemy:\n    def __init__(self, pos=[random.randint(0, 1366), 700]):\n        self.pos = pos\n        self.enemy = pygame.image.load(os.path.join('GameData', 'enemy.png'))\n        self.enemy = pygame.transform.scale(self.enemy, (100, 83))\n\nclass bullet:\n    def __init__(self, pos):\n        self.pos = pos\n        self.bullet = pygame.image.load(os.path.join('GameData', 'missile.png'))\n        self.bullet = pygame.transform.scale(self.bullet, (50, 41))\n        self.exist = 0\n    def update(self):\n        if self.pos[1] &lt; 700 and self.exist == 1:\n            self.pos[1] -= 5\n\nyou = player()\nenemies = [enemy()]\nbullets = []\n\nrunning = True\nspeed = 1.2\nclock = 0\nxv = 0\n\nwhile running:\n    screen.fill((0, 0, 0))\n    clock += 1\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT: running = False\n        if event.type == pygame.KEYDOWN:\n            if event.key == pygame.K_ESCAPE:\n                running = False\n            if event.key == pygame.K_d:\n                xv = 8\n            if event.key == pygame.K_a:\n                xv = -8\n            if event.key == pygame.K_SPACE:\n                bullets.append(bullet([you.pos[0], you.pos[1]]))\n        if event.type == pygame.KEYUP:\n            if event.key == pygame.K_d or event.key == pygame.K_a:\n                xv = 0\n    you.pos[0] += xv\n    if len(bullets) &gt; 0:\n        for bullet in bullets:\n            bullet.exist=1\n            bullet.update()\n    for badguy in enemies:\n        if badguy.pos[1] &lt;= 5:\n            del enemies[enemies.index(badguy)]\n            enemies.append(enemy([random.randint(0, 1366), 700]))\n        badguy.pos[1] = badguy.pos[1] - speed\n        screen.blit(badguy.enemy, (badguy.pos[0], badguy.pos[1]))\n    if clock % 750 == 0:\n        speed += 0.05\n    if clock % 1200 == 0:\n        enemies.append(enemy([random.randint(0, 1366), 700]))\n    screen.blit(you.player, (you.pos[0], you.pos[1]))\n    pygame.display.flip()\n\npygame.quit()\nquit()\n</code></pre>\n\n<p>That's the code of the game and the error I keep getting is:</p>\n\n<pre><code>Traceback (most recent call last):\n File \"D:/spaceshipgame/game.py\", line 53, in &lt;module&gt;\n    bullets.append(bullet([you.pos[0], you.pos[1]]))\nTypeError: 'bullet' object is not callable\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "random", "integer"], "comments": [{"owner": {"reputation": 1619, "user_id": 7228140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOKG6.png?s=128&g=1", "display_name": "Stephen Cowley", "link": "https://stackoverflow.com/users/7228140/stephen-cowley"}, "edited": false, "score": 2, "creation_date": 1545858923, "post_id": 53937221, "comment_id": 94714452, "body": "What have you tried so far? Maybe we can help out if we have something to go on..."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 2, "creation_date": 1545858967, "post_id": 53937221, "comment_id": 94714463, "body": "Well that&#39;s hardly &quot;random&quot;. Do you mean find all the sets of 8 integers from 0 to 24 which add to 24, then choose one of them at random? (If so, the first part is somewhat interesting and the second is trivial, so it basically comes down to the first part.)"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1545859373, "post_id": 53937221, "comment_id": 94714578, "body": "Read <a href=\"https://stackoverflow.com/questions/19877059/generate-n-random-numbers-in-given-ranges-that-sum-up-to-a-given-sum\">this</a> and the Wiki link to get the algorithm"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1545859693, "post_id": 53937221, "comment_id": 94714675, "body": "You could use multinomial like <a href=\"https://stackoverflow.com/questions/53279807/how-to-get-random-number-list-with-fixed-sum-and-size/53355454#53355454\" title=\"how to get random number list with fixed sum and size\">stackoverflow.com/questions/53279807/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 8829934, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ExMxocik958/AAAAAAAAAAI/AAAAAAAAAXg/rQKoG2ixhiM/photo.jpg?sz=128", "display_name": "Ania", "link": "https://stackoverflow.com/users/8829934/ania"}, "edited": false, "score": 0, "creation_date": 1547419058, "post_id": 53937387, "comment_id": 95176679, "body": "This is exactly what I was looking for. Thanks."}], "tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": true, "score": 0, "last_activity_date": 1545859896, "creation_date": 1545859896, "answer_id": 53937387, "question_id": 53937221, "link": "https://stackoverflow.com/questions/53937221/python-generate-n-random-integer-numbers-between-two-values-summing-up-to-a-giv/53937387#53937387", "title": "Python: Generate n random integer numbers between two values summing up to a given number", "body": "<p>This is one possible solution which is based on <a href=\"https://stackoverflow.com/a/49666871/4932316\">this</a> answer. it seems the <code>dirichlet</code> method is only functional for between 0 and 1. Full credit should be given to the original answer. I will be happy to delete it once you comment that it served your purpose. </p>\n\n<p>Don't forget to upvote the original answer.</p>\n\n<pre><code>target = 24\n\nx = np.random.randint(0, target, size=(8,))\nwhile sum(x) != target: \n    x = np.random.randint(0, target, size=(8,))\n\nprint(x)\n# [3 7 0 6 7 0 0 1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 1, "last_activity_date": 1545860098, "creation_date": 1545860098, "answer_id": 53937413, "question_id": 53937221, "link": "https://stackoverflow.com/questions/53937221/python-generate-n-random-integer-numbers-between-two-values-summing-up-to-a-giv/53937413#53937413", "title": "Python: Generate n random integer numbers between two values summing up to a given number", "body": "<p>Well, you could use integer distribution which naturally sums to some fixed number - <a href=\"https://en.wikipedia.org/wiki/Multinomial_distribution\" rel=\"nofollow noreferrer\">Multinomial</a> one.</p>\n\n<p>Just shift forth and back, and it should work automatically</p>\n\n<p>Code</p>\n\n<pre><code>import numpy as np\n\ndef multiSum(n, p, maxv):\n    while True:\n        v  = np.random.multinomial(n, p, size=1)\n        q  = v[0]\n        a,  = np.where(q &gt; maxv) # are there any values above max\n        if len(a) == 0: # accept only samples below or equal to maxv\n            return q\n\nN = 8\nS = 24\np = np.full((N), 1.0/np.float64(N))\n\nmean  = S / N\nstart = 0\nstop  = 24\nn = N*mean - N*start\n\nh = np.zeros((stop-start), dtype=np.int64)\nprint(h)\nfor k in range(0, 10000):\n    ns = multiSum(n, p, stop-start) + start # result in [0...24]\n    #print(np.sum(ns))\n    for v in ns:\n        h[v-start] += 1\n\nprint(h)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1545864141, "post_id": 53937523, "comment_id": 94715836, "body": "Problem with partitioning is there is very little randomness."}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1545864820, "post_id": 53937523, "comment_id": 94715964, "body": "@SeverinPappadeux yeah , that&#39;s true . but isn&#39;t randomness is subset of partition where with generated number one try to find out condition occur or not ? a random case may be ."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1545886468, "post_id": 53937523, "comment_id": 94719258, "body": "If you want it to look like random, you have to add something like Fisher-Yates shuffle on top of generator"}], "tags": [], "owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "is_accepted": false, "score": 1, "last_activity_date": 1545862336, "last_edit_date": 1545862336, "creation_date": 1545860908, "answer_id": 53937523, "question_id": 53937221, "link": "https://stackoverflow.com/questions/53937221/python-generate-n-random-integer-numbers-between-two-values-summing-up-to-a-giv/53937523#53937523", "title": "Python: Generate n random integer numbers between two values summing up to a given number", "body": "<p>this is a case of <a href=\"https://en.wikipedia.org/wiki/Partition_%28number_theory%29#Asymptotics\" rel=\"nofollow noreferrer\">partition number theory</a> . here is solution . <br></p>\n\n<pre><code>def partition(n,k,l, m):\n    if k &lt; 1:\n        raise StopIteration\n    if k == 1:\n        if n &lt;= m and n&gt;=l :\n            yield (n,)\n        raise StopIteration\n    for i in range(l,m+1):\n        for result in partition(n-i,k-1,i,m):                \n            yield result+(i,)\n\nn = 24 # sum value\nk = 8 # partition size\nl = 0 # range min value\nm = 24 # range high value \n\nresult = list(partition(n,k,l,m ))\n</code></pre>\n\n<p>this will give all the combinations that satisfy the conditions.\nps this is quite slow as this is giving all the cases for that partition size.</p>\n"}], "owner": {"reputation": 83, "user_id": 8829934, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ExMxocik958/AAAAAAAAAAI/AAAAAAAAAXg/rQKoG2ixhiM/photo.jpg?sz=128", "display_name": "Ania", "link": "https://stackoverflow.com/users/8829934/ania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1270, "favorite_count": 0, "accepted_answer_id": 53937387, "answer_count": 3, "score": 1, "last_activity_date": 1584122012, "creation_date": 1545858846, "last_edit_date": 1584122012, "question_id": 53937221, "link": "https://stackoverflow.com/questions/53937221/python-generate-n-random-integer-numbers-between-two-values-summing-up-to-a-giv", "title": "Python: Generate n random integer numbers between two values summing up to a given number", "body": "<p>I would very much like to generate <code>n</code> random integer numbers between two values (<code>min</code>, <code>max</code>) whose sum is equal to a given number <code>m</code>.</p>\n\n<p>Note: I found similar questions in StackOverflow; however, they do not address exactly this problem (use of <code>Dirichlet</code> function and thus numbers between 0 and 1). </p>\n\n<p><strong>Example</strong>: I need 8 random numbers (integers) between 0 and 24 where the sum of the 8 generated numbers must be equal to 24.</p>\n\n<p>Any help is appreciated. Thanks.</p>\n"}, {"tags": ["python", "linux", "gcc"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1545860716, "post_id": 53937211, "comment_id": 94714988, "body": "gcc does not terminate because you told it to read from <code>stdin</code>, so it&#39;s sitting there waiting for input. If you don&#39;t want that, don&#39;t tell it to parse <code>stdin</code>."}, {"owner": {"reputation": 375, "user_id": 5455016, "user_type": "registered", "accept_rate": 21, "profile_image": "https://i.stack.imgur.com/WSlUH.jpg?s=128&g=1", "display_name": "patrykbajos", "link": "https://stackoverflow.com/users/5455016/patrykbajos"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1545861090, "post_id": 53937211, "comment_id": 94715124, "body": "@melpomene so I must pass /dev/zero to gcc?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1545861130, "post_id": 53937211, "comment_id": 94715135, "body": "Only if you want to parse an infinite stream of NUL bytes. <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Search-Path.html#Search-Path\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/cpp/Search-Path.html#Search-Path</a>"}], "answers": [{"tags": [], "owner": {"reputation": 375, "user_id": 5455016, "user_type": "registered", "accept_rate": 21, "profile_image": "https://i.stack.imgur.com/WSlUH.jpg?s=128&g=1", "display_name": "patrykbajos", "link": "https://stackoverflow.com/users/5455016/patrykbajos"}, "is_accepted": true, "score": 0, "last_activity_date": 1546137672, "creation_date": 1546137672, "answer_id": 53974905, "question_id": 53937211, "link": "https://stackoverflow.com/questions/53937211/how-can-i-parse-gcc-output-by-regex-to-get-default-include-paths/53974905#53974905", "title": "How can I parse gcc output by regex to get default include paths?", "body": "<p>I've written some spagheti</p>\n\n<pre><code>def find_re_it_in_list(pattern, input, start=0, stop=-1, flags=0):\n    length = len(input)\n\n    if length == 0:\n        return None\n\n    end_it = max(0, length - 1)\n\n    if start &gt;= end_it:\n        return None\n\n    if stop&lt;0:\n        stop = length\n\n    if stop &lt;= start:\n        return None\n\n    for it in range(max(0, start), min(stop, length)):\n        elem = input[it]\n        match = re.match(pattern, elem, flags)\n        if match:\n            return it\n\ndef get_includes(self):\n    args = [self.conf['gcc_path'], '-xc', '-E', '-v', os.devnull]\n    args.extend(self.env.get('flags', []))\n\n    incl_start_regex = r' *#include &lt;\\.\\.\\.&gt; search starts here: *'\n    incl_end_regex = r' *End of search list\\. *'\n\n    proc = subprocess.run(args, stdout=subprocess.PIPE, stderr=subprocess.STDOUT , text=True)\n    lines = proc.stdout.splitlines()\n\n    start_it = find_re_it_in_list(incl_start_regex, lines)\n    if start_it == None:\n        return []\n\n    end_it = find_re_it_in_list(incl_end_regex, lines, start_it)\n    if end_it == None:\n        return []\n\n    # theres no paths between them\n    if (end_it - start_it) == 1:\n        return []\n\n    return lines[start_it+1 : end_it]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "is_accepted": false, "score": 1, "last_activity_date": 1546138312, "creation_date": 1546138312, "answer_id": 53974945, "question_id": 53937211, "link": "https://stackoverflow.com/questions/53937211/how-can-i-parse-gcc-output-by-regex-to-get-default-include-paths/53974945#53974945", "title": "How can I parse gcc output by regex to get default include paths?", "body": "<p>A solution using only the shell:</p>\n\n<pre><code>gcc -x c -E -v /dev/null 2&gt;&amp;1 | sed -n '/include.*search starts here/,/End of search list/{s/^ //p}'\n</code></pre>\n\n<p>If relevant, be sure to handle the following cases:</p>\n\n<ul>\n<li>the directory involves following symlinks</li>\n<li>there are duplicate directories</li>\n<li>the directory does not exist</li>\n<li>there might be more than one gcc binary installed (different version, different arch, etc.), each with different paths</li>\n<li>even for a single gcc binary, compiler flags (such as <code>-m32</code>) can affect the include path</li>\n</ul>\n"}], "owner": {"reputation": 375, "user_id": 5455016, "user_type": "registered", "accept_rate": 21, "profile_image": "https://i.stack.imgur.com/WSlUH.jpg?s=128&g=1", "display_name": "patrykbajos", "link": "https://stackoverflow.com/users/5455016/patrykbajos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 53974905, "answer_count": 2, "score": 0, "last_activity_date": 1546138312, "creation_date": 1545858809, "last_edit_date": 1545860449, "question_id": 53937211, "link": "https://stackoverflow.com/questions/53937211/how-can-i-parse-gcc-output-by-regex-to-get-default-include-paths", "title": "How can I parse gcc output by regex to get default include paths?", "body": "<p>I know that \n<code>gcc -xc -E -v -</code>\nPrints default include paths at the end.</p>\n\n<pre><code>[patryk@patryk-asus-manjaro ~]$ gcc -xc -E -v -  \nUsing built-in specs.\nCOLLECT_GCC=gcc\nTarget: x86_64-pc-linux-gnu\nConfigured with: /build/gcc/src/gcc/configure --prefix=/usr --libdir=/usr/lib --libexecdir=/usr/lib --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=https://bugs.archlinux.org/ --enable-languages=c,c++,ada,fortran,go,lto,objc,obj-c++ --enable-shared --enable-threads=posix --enable-libmpx --with-system-zlib --with-isl --enable-__cxa_atexit --disable-libunwind-exceptions --enable-clocale=gnu --disable-libstdcxx-pch --disable-libssp --enable-gnu-unique-object --enable-linker-build-id --enable-lto --enable-plugin --enable-install-libiberty --with-linker-hash-style=gnu --enable-gnu-indirect-function --enable-multilib --disable-werror --enable-checking=release --enable-default-pie --enable-default-ssp --enable-cet=auto\nThread model: posix\ngcc version 8.2.1 20181127 (GCC) \nCOLLECT_GCC_OPTIONS='-E' '-v' '-mtune=generic' '-march=x86-64'\n /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.1/cc1 -E -quiet -v - -mtune=generic -march=x86-64\nignoring nonexistent directory \"/usr/lib/gcc/x86_64-pc-linux-gnu/8.2.1/../../../../x86_64-pc-linux-gnu/include\"\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.1/include\n /usr/local/include\n /usr/lib/gcc/x86_64-pc-linux-gnu/8.2.1/include-fixed\n /usr/include\nEnd of search list.\n^C\n[patryk@patryk-asus-manjaro ~]$\n</code></pre>\n\n<p>I created regex </p>\n\n<pre><code>#include &lt;\\.\\.\\.&gt; search starts here:$\n(^.+$)*\n^End of search list\\.$\n</code></pre>\n\n<p>But It does not works properly.\nOther problem is that gcc for that parameters does not terminates. I must call SIGINT <kbd>Ctrl</kbd>+<kbd>C</kbd> on Linux. I'm using Python 3 and <code>subprocess.run</code>.</p>\n"}, {"tags": ["python", "python-3.x", "math", "partition"], "comments": [{"owner": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1545858681, "post_id": 53937159, "comment_id": 94714408, "body": "@wim sorry I was thinking about more complicated example, updated"}, {"owner": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "edited": false, "score": 1, "creation_date": 1545858780, "post_id": 53937159, "comment_id": 94714422, "body": "<a href=\"https://stackoverflow.com/questions/39192777/how-to-split-a-list-into-n-groups-in-all-possible-combinations-of-group-length-a\">This</a> and <a href=\"https://codereview.stackexchange.com/questions/1526/finding-all-k-subset-partitions\">this</a> might be useful."}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1545858841, "post_id": 53937159, "comment_id": 94714435, "body": "you cant put a list in a set - it is not hashable ... so not gonna happen in any way or form - voting to close as unclear what you are asking"}, {"owner": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "reply_to_user": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "edited": false, "score": 0, "creation_date": 1545858992, "post_id": 53937159, "comment_id": 94714468, "body": "@busybear not exactly what I want, as you can see I have empty subsets"}, {"owner": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "reply_to_user": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1545860018, "post_id": 53937159, "comment_id": 94714787, "body": "@PatrickArtner that can helps, now I&#39;m trying to get create same list of lists for [1, 2]  and k=2 as I have shown"}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1545863688, "post_id": 53937159, "comment_id": 94715745, "body": "are you looking for getting all the subset of the given list ?"}, {"owner": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "reply_to_user": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1545865335, "post_id": 53937159, "comment_id": 94716058, "body": "@prashantrana list of all possible sublists such as number of sublists equals k"}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1545865569, "post_id": 53937159, "comment_id": 94716110, "body": "@user3057645 shouldn&#39;t be <code>[[1,2,3],[2,3]]</code> a vaild part of output ?"}, {"owner": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "reply_to_user": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1545866324, "post_id": 53937159, "comment_id": 94716280, "body": "@prashantrana no, sorry, was not correct saying &#39;all possible&#39;, because I want to split initial list and sublists can&#39;t contain elements from other sublists"}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1545866615, "post_id": 53937159, "comment_id": 94716349, "body": "@user3057645 that make sense"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "edited": false, "score": 0, "creation_date": 1545866117, "post_id": 53938052, "comment_id": 94716231, "body": "I like your idea, how do you think can your code be faster? I&#39;ve just run yours and mine codes and for <code>k=3, S = range(14)</code> input I&#39;ve gotten 44.2 and 9.3 sec respectively"}, {"owner": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "reply_to_user": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "edited": false, "score": 0, "creation_date": 1545866307, "post_id": 53938052, "comment_id": 94716274, "body": "@user3057645, what are the rangers of <code>n</code> and <code>k</code> for your real task? Is speed really an issue? One of the important advantages of <code>itertools</code> is that they are actually implemented in C so they are fast. On the other hand if you do any non-trivial processing of those lists, I think that processing will take more time than my code to generate them. And the total number of partitions grows really fast with <code>n</code> and <code>k</code> because as it is clear from my algorithm the total number is <code>k^n</code> (or in Python <code>k**n</code>)"}, {"owner": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "reply_to_user": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "edited": false, "score": 0, "creation_date": 1545867556, "post_id": 53938052, "comment_id": 94716500, "body": "@user3057645, I also noticed that you code contains a bug: you generate some items several times. Particularly if <code>groups</code> contains several empty buckets (for <code>n</code>=<code>k</code>=<code>3</code> this is for example <code>[(0,1,2),(),()]</code>), you will generate non-unique permutations (so all 3 of  <code>[(0,1,2),(),()]</code>, <code>[(),(0,1,2),()]</code> and <code>[(),(),(0,1,2)]</code> will be duplicated, for bigger <code>n</code> there will be more excessive items). This happens because empty lists are actually equal to each other and should not be swapped but your code is not aware of this fact."}, {"owner": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "edited": false, "score": 0, "creation_date": 1545867724, "post_id": 53938052, "comment_id": 94716523, "body": "there are cases when S = range(400), k = 5, I need this list of possible partitions for finding that one which will give me better solution for bigger problem, namely the basic parallel-machine-scheduling :\\"}, {"owner": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "edited": false, "score": 0, "creation_date": 1545867859, "post_id": 53938052, "comment_id": 94716543, "body": "yes, that how I needed it to be, I want to generate such &#39;non-unique&#39; permutations"}, {"owner": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "reply_to_user": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "edited": false, "score": 1, "creation_date": 1545868074, "post_id": 53938052, "comment_id": 94716572, "body": "@user3057645, I think you don&#39;t get my bug report. I claim that for the case <code>S = range(3)</code>, <code>k = 3</code> you&#39;ll get 30 records instead of expected 27 because you&#39;ll have each of the records <code>[(0,1,2),(),()]</code>, <code>[(),(0,1,2),()]</code> and <code>[(),(),(0,1,2)]</code> <b><i>twice</i></b> in the output."}, {"owner": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "reply_to_user": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "edited": false, "score": 0, "creation_date": 1545868302, "post_id": 53938052, "comment_id": 94716610, "body": "As for you problem, I think your approach is impossible to implement in practice. The total number of such partitions for <code>n</code> = 400 and <code>k</code> = 5 is <code>5^400</code> which is an insanely huge number, much bigger than the number of particles in the Universe. If you can do that many computations on your hardware, you should be earning money by breaking banking cryptography instead. In practice it means that you&#39;ll have to use some heuristics instead of brute force."}, {"owner": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "edited": false, "score": 0, "creation_date": 1545868788, "post_id": 53938052, "comment_id": 94716686, "body": "yeah, you are right, any Idea how to fix this duplication bug? And I know that it&#39;s insane to expect that I can calculate <code>5^400</code> in a reasonable time"}, {"owner": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "reply_to_user": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "edited": false, "score": 0, "creation_date": 1545869778, "post_id": 53938052, "comment_id": 94716836, "body": "@user3057645, the only way I can think of is to treat empty and non-empty buckets explicitly separately. This will make the code a lot more complicated but I don&#39;t see any simple solution."}], "tags": [], "owner": {"reputation": 22814, "user_id": 182660, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/75e48a7020624657e5da6033590030ee?s=128&d=identicon&r=PG", "display_name": "SergGr", "link": "https://stackoverflow.com/users/182660/serggr"}, "is_accepted": false, "score": 1, "last_activity_date": 1545865692, "last_edit_date": 1545865692, "creation_date": 1545865348, "answer_id": 53938052, "question_id": 53937159, "link": "https://stackoverflow.com/questions/53937159/how-to-find-all-partitions-of-a-list-s-into-k-subsets-can-be-empty/53938052#53938052", "title": "How to find all partitions of a list S into k subsets (can be empty)?", "body": "<p>Here is an alternative solution:</p>\n\n<pre><code>def partition_k(l, k):\n    n = len(l)\n    if k &gt; n:\n        raise ValueError(\"k = {0} should be no more than n = {1}\".format(k, n))\n\n    if n == 0:\n        yield []\n        return\n\n    pos = [0] * n\n    while True:\n        # generate output for the value\n        out = [[] for _ in range(k)]\n        for i in range(n):\n            out[pos[i]].append(l[i])\n        yield out\n\n        #increment the value\n        pos[0] += 1\n        for i in range(n):\n            # should we carry from this digit to the next one?\n            if pos[i] == k:\n                # overflow of the whole value?\n                if i == n - 1:\n                    return\n                pos[i] = 0\n                pos[i + 1] += 1\n            else:\n                break\n</code></pre>\n\n<p>Let  <code>n</code> be the length of the list and <code>k</code> is the number of partitions. The idea behind this code is that each line of the output can be represented as a number of <code>n</code> digits in base-<code>k</code> system. Each \"digit\" shows in which bucket goes the value at corresponding position. For example line</p>\n\n<pre><code>[[2,3], [1], [4]]\n</code></pre>\n\n<p>can be encoded as <code>[1,0,0,2]</code> which means </p>\n\n<ul>\n<li><code>1</code> goes to the bucket #1</li>\n<li><code>2</code> goes to the bucket #0</li>\n<li><code>3</code> goes to the bucket #0</li>\n<li><code>4</code> goes to the bucket #2</li>\n</ul>\n\n<p>Obviously every such <code>n</code>-digits base-<code>k</code> number represents a valid partition of the list and each partition is represented by some number. So to generate all partitions we need just iterate through all such numbers and generate corresponding partitions. It is easier to do if you use a list of digits to represent a number (in the code this is <code>pos</code>).</p>\n"}], "owner": {"reputation": 101, "user_id": 3057645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98737af14910b5ebbb84205f7b8219dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3057645", "link": "https://stackoverflow.com/users/3057645/user3057645"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1545865692, "creation_date": 1545858344, "last_edit_date": 1545865480, "question_id": 53937159, "link": "https://stackoverflow.com/questions/53937159/how-to-find-all-partitions-of-a-list-s-into-k-subsets-can-be-empty", "title": "How to find all partitions of a list S into k subsets (can be empty)?", "body": "<p>I have a list of unique elements, let's say [1,2], and I want to split it onto k=2 sublists. Now I want to have all possible sublists: </p>\n\n<pre><code>[ [ [1,2],[] ], [ [1],[2] ], [ [2],[1] ], [ [],[1,2] ] ]\n</code></pre>\n\n<p>And I want to split onto 1&lt;=k&lt;=n sublists, so for k=1 it will be: </p>\n\n<pre><code>[ [1, 2] ]\n</code></pre>\n\n<p>How can I do that with Python 3?</p>\n\n<p>UPDATE: my goal is to get all possible partitions of list of N unique numbers, where each partition will have k sublists. I would like to show better example than I have shown upper, I hope I will not miss something. So for list [1, 2, 3] and for k=2 I want to have next list:</p>\n\n<pre><code>[\n[ [1,2,3], [] ],\n[ [2,3], [1] ],\n[ [1,3], [2] ],\n[ [1,2], [3] ],\n[ [1], [2,3] ],\n[ [2], [1,3] ],\n[ [3], [2,3] ],\n[ [], [1,2,3] ]\n] \n</code></pre>\n\n<p>UPDATE 2: so far I have combined two suggestions and little modification got next code:</p>\n\n<pre><code>def sorted_k_partitions(seq, k):\n    \"\"\"Returns a list of all unique k-partitions of `seq`.\n\n    Each partition is a list of parts, and each part is a tuple.\n\n    The parts in each individual partition will be sorted in shortlex\n    order (i.e., by length first, then lexicographically).\n\n    The overall list of partitions will then be sorted by the length\n    of their first part, the length of their second part, ...,\n    the length of their last part, and then lexicographically.\n    \"\"\"\n    n = len(seq)\n    groups = []  # a list of lists, currently empty\n\n    def generate_partitions(i):\n        if i &gt;= n:\n            yield list(map(tuple, groups))\n        else:\n            if n - i &gt; k - len(groups):\n                for group in groups:\n                    group.append(seq[i])\n                    yield from generate_partitions(i + 1)\n                    group.pop()\n\n            if len(groups) &lt; k:\n                groups.append([seq[i]])\n                yield from generate_partitions(i + 1)\n                groups.pop()\n\n    result = generate_partitions(0)\n\n    # Sort the parts in each partition in shortlex order\n    result = [sorted(ps, key = lambda p: (len(p), p)) for ps in result]\n    # Sort partitions by the length of each part, then lexicographically.\n    result = sorted(result, key = lambda ps: (*map(len, ps), ps))\n\n    return result\n</code></pre>\n\n<p>With this function I can do next:</p>\n\n<pre><code>import itertools as it\nk=2\nS = [1, 2, 3]\nfor i in (range(k)):\n    for groups in sorted_k_partitions(S, k-i):\n        for perm in it.permutations(groups+[tuple() for j in range(i)]):\n            print(perm)\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>((1,), (2, 3))\n((2, 3), (1,))\n((2,), (1, 3))\n((1, 3), (2,))\n((3,), (1, 2))\n((1, 2), (3,))\n((1, 2, 3), ())\n((), (1, 2, 3))\n</code></pre>\n\n<p>I'm not sure yet, that this code gives me right solution, maybe there is other way?</p>\n"}, {"tags": ["javascript", "python", "selenium", "drop-down-menu", "webdriverwait"], "comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1545938586, "post_id": 53937154, "comment_id": 94738298, "body": "Can you help us updating the question with the exact <i>Manual Steps</i> which you are trying to <i>Automate</i> along with the text based HTML (instead/in-addition of the picture of the HTML which you have provided) so we can help you out?"}, {"owner": {"reputation": 76, "user_id": 6806427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb54d122c9d98694fdd98fb0d4b73c6?s=128&d=identicon&r=PG&f=1", "display_name": "tasha", "link": "https://stackoverflow.com/users/6806427/tasha"}, "reply_to_user": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1545940716, "post_id": 53937154, "comment_id": 94738969, "body": "I tried to add more info and post text html, though is there a better/easier way to do it? On dev tools I can&#39;t seem to select/copy by section, and by &#39;view source&#39; it&#39;s quite ugly, plus it&#39;s missing some hidden elements. Maybe I&#39;m missing a setting within SO post. @DebanjanB"}, {"owner": {"reputation": 76, "user_id": 6806427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb54d122c9d98694fdd98fb0d4b73c6?s=128&d=identicon&r=PG&f=1", "display_name": "tasha", "link": "https://stackoverflow.com/users/6806427/tasha"}, "reply_to_user": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1545943133, "post_id": 53937154, "comment_id": 94739731, "body": "thank you! I just did a re-edit to fix it up as much as I could..."}], "answers": [{"comments": [{"owner": {"reputation": 76, "user_id": 6806427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb54d122c9d98694fdd98fb0d4b73c6?s=128&d=identicon&r=PG&f=1", "display_name": "tasha", "link": "https://stackoverflow.com/users/6806427/tasha"}, "edited": false, "score": 0, "creation_date": 1546002542, "post_id": 53950967, "comment_id": 94755762, "body": "Tried this, but I get a TimeOutException because it can&#39;t find <code>_divDropDown</code>.  I changed the first line to find the <code>_ddDropDownButton</code> as had been working before, but then it timed out again on the second line, looking for the <code>divDropDown</code> again. Can&#39;t seem to click on it.  The difference here is that it&#39;s underneath that iframe, which lights up in chrome devtools when I manually click on that area along with the <code>divDropDown</code>, so although it&#39;s not within the iframe, it seems to be connected to it."}, {"owner": {"reputation": 76, "user_id": 6806427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb54d122c9d98694fdd98fb0d4b73c6?s=128&d=identicon&r=PG&f=1", "display_name": "tasha", "link": "https://stackoverflow.com/users/6806427/tasha"}, "edited": false, "score": 0, "creation_date": 1546004036, "post_id": 53950967, "comment_id": 94756314, "body": "stranger still, I&#39;m randomly adjusting the times on the wait, and got the &#39;Lot Status&#39; field to <code>(Select All)</code> and it stopped with the &#39;Lot Type&#39; field dropped down. It ran past the first &#39;Borough&#39; field without selecting all but didn&#39;t stop the code with errors.  Changing the seconds, I get either a TimeOut or Stale Exception.  I thought wait &#39;until&#39; should get the timing right no matter what, right?"}, {"owner": {"reputation": 76, "user_id": 6806427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb54d122c9d98694fdd98fb0d4b73c6?s=128&d=identicon&r=PG&f=1", "display_name": "tasha", "link": "https://stackoverflow.com/users/6806427/tasha"}, "edited": false, "score": 0, "creation_date": 1546022961, "post_id": 53950967, "comment_id": 94763660, "body": "ended up getting through the form with an illogical assortment of waits, repeat clicks and so on.  Not sure why the code to click on the dropdown button, then the div, then the option wouldn&#39;t work always, with the explicit waits. But at least I am able to submit.  Now I have a similar problem in clicking on a disabled button to access another dropdown to save the report."}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 76, "user_id": 6806427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb54d122c9d98694fdd98fb0d4b73c6?s=128&d=identicon&r=PG&f=1", "display_name": "tasha", "link": "https://stackoverflow.com/users/6806427/tasha"}, "edited": false, "score": 0, "creation_date": 1550756064, "post_id": 53950967, "comment_id": 96393101, "body": "@tasha <a href=\"https://stackoverflow.com/help/why-vote\">Upvote</a> the answer if this/any answer is/was helpful to you for the benefit of the future readers."}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": true, "score": 1, "last_activity_date": 1545950039, "last_edit_date": 1545950039, "creation_date": 1545945489, "answer_id": 53950967, "question_id": 53937154, "link": "https://stackoverflow.com/questions/53937154/how-to-click-on-the-dropdown-item-with-text-as-select-all-with-selenium-and-py/53950967#53950967", "title": "How to click on the dropdown item with text as (Select All) with Selenium and Python", "body": "<p>To click on the dropdown option with text as <strong>(Select All)</strong> as the elements are <a href=\"https://www.javascript.com/\" rel=\"nofollow noreferrer\">JavaScript</a> enabled element you need to induce <em>WebDriverWait</em> for the desired <em>element to be clickable</em> and you can use the following solution:</p>\n\n<pre><code>WebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.XPATH, \"//div[contains(@id, '_divDropDown') and contains(@onclick, 'cancelBubble')][contains(@onactivate, 'cancelBubble')]\"))).click()\nWebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.XPATH, \"//div[contains(@id, '_divDropDown') and contains(@onclick, 'cancelBubble')][contains(@onactivate, 'cancelBubble')]/span/div/table/tbody/tr/td/span//label[contains(@for, '_divDropDown_') and contains(., '(Select All)')]\"))).click()\n</code></pre>\n\n<p><strong>Note</strong> : You have to add the following imports :</p>\n\n<pre><code>from selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\n</code></pre>\n"}], "owner": {"reputation": 76, "user_id": 6806427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb54d122c9d98694fdd98fb0d4b73c6?s=128&d=identicon&r=PG&f=1", "display_name": "tasha", "link": "https://stackoverflow.com/users/6806427/tasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 53950967, "answer_count": 1, "score": 2, "last_activity_date": 1546007122, "creation_date": 1545858311, "last_edit_date": 1546007122, "question_id": 53937154, "link": "https://stackoverflow.com/questions/53937154/how-to-click-on-the-dropdown-item-with-text-as-select-all-with-selenium-and-py", "title": "How to click on the dropdown item with text as (Select All) with Selenium and Python", "body": "<p>edit: On this <a href=\"https://i.stack.imgur.com/mdjih.png\" rel=\"nofollow noreferrer\">page</a>, I am trying to submit parameters for a report to be generated from a database.  I have been able to send_keys() with a new start date for the first field.  The second field (end date) stays the same.  For the 3rd field and on, except for one, I need to click on <code>(Select All)</code>.</p>\n\n<p>I need to click on <code>(Select All)</code>, which shows in a hidden dropdown table only after clicking the parent 'divDropDown'. When activated, this hidden table shows up with a tbody in which 5-6 tr/td/span sets hold the various options. You can find the select all option under id <code>ctl31_ctl04_ctl07_divDropDown_ctl00</code>.<br>\nFurther up in the HTML there's a dropDownButton which doesn't generate errors in the code(first 2 lines) but also doesn't show on the browser as activating that dropdown as it does manually, so I'm thinking it doesn't help here.</p>\n\n<p>I've searched for relevant answers and tried various bits of code (wait, execute_script, etc) within Selenium to access this item, and even tried to switch to the iframe above it (which seems to activate when clicking on the input area even though the elements sought are outside of it), but still get error 'Unable to locate element...'\nHere are various code tried:</p>\n\n<pre><code>driver.find_element_by_xpath('//*[@id=\"ctl31_ctl04_ctl07\"]')#.click()\ndriver.find_element_by_xpath('//*[@id=\"ctl31_ctl04_ctl07_ddDropDownButton\"]').click()\n\n#driver.find_element_by_xpath('//*[@id=\"ctl31_ctl04_ctl07_divDropDown\"]').click()\n#driver.execute_script(\"event.cancelBubble=true;\")\n#driver.execute_script(\"arguments[0].click();\", elem)\n#driver.find_element_by_xpath('//*[@id=\"ctl31_ctl04_ctl07_divDropDown_HiddenIndices\" and @type=\"hidden\"]')\n\n#elem1 = driver.find_element_by_xpath('//*[@id=\"ctl31_ctl04_ctl07_divDropDown_ctl00\" and @type=\"checkbox\"]')#.click()\nelem1 = driver.find_element_by_xpath('//*div[@id=\"ctl31_ctl04_ctl07_divDropDown\"]/.//span[@id=\"ctl31_ctl04_ctl07_divDropDown_ctl00\"]').get_attribute(\"innerHTML\")\ndriver.execute_script(\"arguments[0].click();\", elem1)\nselector = '#ctl31_ctl04_ctl07_divDropDown_ctl00'\nselector = '#ctl31_ctl04_ctl07_divDropDown &gt; span &gt; div:nth-child(1) &gt; table &gt; tbody &gt; tr:nth-child(1) &gt; td &gt; span &gt; label'\npath = '//*[@id=\"ctl31_ctl04_ctl07_divDropDown\"]/span/div[1]/table/tbody/tr[1]/td/span/input'#label'\n#path = '//*[@id=\"ctl31_ctl04_ctl07_divDropDown_ctl00\"]'\n#driver.find_element_by_css_selector(selector).click()\ndriver.find_element_by_xpath(path).click()\n</code></pre>\n\n<p>I believe it's unable to locate element because it is typically hidden, but no matter how I try to click or execute the dropdown, via the button or clicking the div, it won't stay open (I do see it flash down sometimes, it just recloses and thus the table, and it's dropdown, is hidden again).  I've also tried the following code to test it. With the regular wait command, I would get the 'stale element' error after some iterations. Without any wait, I'd get element not found.  With the 'wait until', I can see the dropdown going up/down, but cannot seem to catch the 'select all' when it's visible? All this does is open/close the dropdown with my print statements to see when (after printing 'checking if exists'). I've also tried to execute directly 'select all's script <code>\"$get('ctl31_ctl04_ctl07').control.OnSelectAllClick(this);\"</code> to no avail.</p>\n\n<pre><code>def check_exists_by_xpath(xpath):\n    try:\n        driver.find_element_by_xpath(xpath)\n    except NoSuchElementException:\n        return False\n    return True\n\nfor i in range(15):\n    #driver.implicitly_wait(1000)\n    #driver.find_element_by_xpath('//*[@id=\"ctl31_ctl04_ctl07_ddDropDownButton\"]').click()\n    wait(driver, 1000).until(EC.element_to_be_clickable((By.XPATH, '//*[@id=\"ctl31_ctl04_ctl07_ddDropDownButton\"]'))).click()\n    #elem = driver.find_element_by_xpath('//*[@id=\"ctl31_ctl04_ctl07_divDropDown_ctl00\"]')\n    print('checking if exists')\n    if check_exists_by_xpath('//*[@id=\"ctl31_ctl04_ctl07_divDropDown_ctl00\"]'):\n        driver.find_element_by_xpath('//*[@id=\"ctl31_ctl04_ctl07_divDropDown_ctl00\"]').click()\n        print('did it!')\n    else: print('past dropdown button %d' % i)\n    i +=1\n</code></pre>\n\n<p>Here is the HTML (it's a login website so I can't show much else, sorry for the pic: <a href=\"https://i.stack.imgur.com/FDuAs.png\" rel=\"nofollow noreferrer\">html</a> </p>\n\n<pre><code>&lt;iframe id=\"ctl31_ctl04_ctl07_ctl01\" onclick=\"event.cancelBubble=true;\" onactivate=\"event.cancelBubble=true;\" style=\"display:none;position:absolute;z-index:10;\" src=\"javascript:'';\" frameBorder=\"0\" title=\"Borough: place holder\" longdesc=\"Borough: place holder\" Name=\"ctl31_ctl04_ctl07_ctl01\"&gt;&lt;/iframe&gt;\n&lt;div id=\"ctl31_ctl04_ctl07_divDropDown\" onclick=\"event.cancelBubble=true;\" onactivate=\"event.cancelBubble=true;\" style=\"display:inline-block;border-color:DarkGray;border-width:1px;border-style:Solid;overflow:auto;background-color:window;display:none;position:absolute;z-index:11;\"&gt;\n    &lt;span style=\"margin: 0px; background-color: window;\"&gt;&lt;div style=\"overflow: auto; width: 186px; height: 133px;\"&gt;\n            &lt;table cellpadding=\"0\" cellspacing=\"0\" style=\"background-color:window;\"&gt;\n                &lt;tbody&gt;\n                    &lt;tr&gt;\n                        &lt;td nowrap=\"nowrap\"&gt;\n                            &lt;span&gt;\n                                &lt;input id=\"ctl31_ctl04_ctl07_divDropDown_ctl00\" type=\"checkbox\" name=\"ctl31$ctl04$ctl07$divDropDown$ctl00\" onclick=\"$get('ctl31_ctl04_ctl07').control.OnSelectAllClick(this);\"&gt;&lt;label for=\"ctl31_ctl04_ctl07_divDropDown_ctl00\"&gt;(Select All)&lt;/label&gt;\n                            &lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td nowrap=\"nowrap\"&gt;&lt;span&gt;&lt;input id=\"ctl31_ctl04_ctl07_divDropDown_ctl01\" type=\"checkbox\" name=\"ctl31$ctl04$ctl07$divDropDown$ctl01\" onclick=\"$get('ctl31_ctl04_ctl07').control.OnValidValueClick(this, 'ctl31_ctl04_ctl07_divDropDown_ctl00');\"&gt;&lt;label for=\"ctl31_ctl04_ctl07_divDropDown_ctl01\"&gt;MANHATTAN&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/label&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td nowrap=\"nowrap\"&gt;&lt;span&gt;&lt;input id=\"ctl31_ctl04_ctl07_divDropDown_ctl02\" type=\"checkbox\" name=\"ctl31$ctl04$ctl07$divDropDown$ctl02\" onclick=\"$get('ctl31_ctl04_ctl07').control.OnValidValueClick(this, 'ctl31_ctl04_ctl07_divDropDown_ctl00');\"&gt;&lt;label for=\"ctl31_ctl04_ctl07_divDropDown_ctl02\"&gt;BROOKLYN&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/label&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td nowrap=\"nowrap\"&gt;&lt;span&gt;&lt;input id=\"ctl31_ctl04_ctl07_divDropDown_ctl03\" type=\"checkbox\" name=\"ctl31$ctl04$ctl07$divDropDown$ctl03\" onclick=\"$get('ctl31_ctl04_ctl07').control.OnValidValueClick(this, 'ctl31_ctl04_ctl07_divDropDown_ctl00');\"&gt;&lt;label for=\"ctl31_ctl04_ctl07_divDropDown_ctl03\"&gt;QUEENS&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/label&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td nowrap=\"nowrap\"&gt;&lt;span&gt;&lt;input id=\"ctl31_ctl04_ctl07_divDropDown_ctl04\" type=\"checkbox\" name=\"ctl31$ctl04$ctl07$divDropDown$ctl04\" onclick=\"$get('ctl31_ctl04_ctl07').control.OnValidValueClick(this, 'ctl31_ctl04_ctl07_divDropDown_ctl00');\"&gt;&lt;label for=\"ctl31_ctl04_ctl07_divDropDown_ctl04\"&gt;BRONX&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/label&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td nowrap=\"nowrap\"&gt;&lt;span&gt;&lt;input id=\"ctl31_ctl04_ctl07_divDropDown_ctl05\" type=\"checkbox\" name=\"ctl31$ctl04$ctl07$divDropDown$ctl05\" onclick=\"$get('ctl31_ctl04_ctl07').control.OnValidValueClick(this, 'ctl31_ctl04_ctl07_divDropDown_ctl00');\"&gt;&lt;label for=\"ctl31_ctl04_ctl07_divDropDown_ctl05\"&gt;STATEN&amp;nbsp;ISLAND&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/label&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;\n                &lt;/tbody&gt;\n            &lt;/table&gt;\n            &lt;input type=\"hidden\" name=\"ctl31$ctl04$ctl07$divDropDown$HiddenIndices\" id=\"ctl31_ctl04_ctl07_divDropDown_HiddenIndices\" value=\"\"&gt;\n        &lt;/div&gt;\n        &lt;div style=\"height: 16px; width: 100%; margin: 0px; border-top: 1px solid lightgray; background-color: window; direction: ltr;\"&gt;&lt;/div&gt;\n    &lt;/span&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><br>\nand here's how the webpage looks: <a href=\"https://i.stack.imgur.com/mdjih.png\" rel=\"nofollow noreferrer\">page</a></p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "tkinter", "ttk"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 2683466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/660ba521231a16872d3c890100537826?s=128&d=identicon&r=PG&f=1", "display_name": "Glenn", "link": "https://stackoverflow.com/users/2683466/glenn"}, "edited": false, "score": 0, "creation_date": 1545930190, "post_id": 53938534, "comment_id": 94735337, "body": "Notice the labels and text box are created in a loop and not addressable by a variable name, thus I don&#39;t see how I can use the delete method.  I only see two options and neither looks good - hopefully there is a third.  Put all the dynamically generated widgets in a named frame and delete the frame, or create 7 sets of widgets all assigned to variable names."}, {"owner": {"reputation": 29277, "user_id": 291641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df10b741c091f5db29f951dc9918a34?s=128&d=identicon&r=PG", "display_name": "patthoyts", "link": "https://stackoverflow.com/users/291641/patthoyts"}, "reply_to_user": {"reputation": 143, "user_id": 2683466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/660ba521231a16872d3c890100537826?s=128&d=identicon&r=PG&f=1", "display_name": "Glenn", "link": "https://stackoverflow.com/users/2683466/glenn"}, "edited": false, "score": 0, "creation_date": 1545932679, "post_id": 53938534, "comment_id": 94736218, "body": "Thats what classes are for. Create a class based on the Frame widget to manage your collection of widgets. Retain the child widget IDs as members. Basically manage this as a composite widget to simplify the main program code."}], "tags": [], "owner": {"reputation": 29277, "user_id": 291641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df10b741c091f5db29f951dc9918a34?s=128&d=identicon&r=PG", "display_name": "patthoyts", "link": "https://stackoverflow.com/users/291641/patthoyts"}, "is_accepted": false, "score": 0, "last_activity_date": 1545870423, "creation_date": 1545870423, "answer_id": 53938534, "question_id": 53937147, "link": "https://stackoverflow.com/questions/53937147/replacing-contents-of-tkinter-widgets/53938534#53938534", "title": "Replacing contents of Tkinter widgets", "body": "<p>For a text widget, use the delete method to remove existing text then use insert to add the new information. Avoid destroying and re-creating widgets all the time. Create them once then update their contents using Text.insert and Label.configure.\nI would also avoid the <code>while</code> loop in favour of calling a method using <code>after</code> until you have processed everything. A tight loop prevents handling events until you complete the whole loop while using after breaks up each iteration of the loop with event processing.</p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 2683466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/660ba521231a16872d3c890100537826?s=128&d=identicon&r=PG&f=1", "display_name": "Glenn", "link": "https://stackoverflow.com/users/2683466/glenn"}, "is_accepted": false, "score": 0, "last_activity_date": 1546017678, "creation_date": 1546017678, "answer_id": 53962097, "question_id": 53937147, "link": "https://stackoverflow.com/questions/53937147/replacing-contents-of-tkinter-widgets/53962097#53962097", "title": "Replacing contents of Tkinter widgets", "body": "<p>The solution turned out to be fairly simple.</p>\n\n<pre><code> for widget in f.winfo_children():\n       if isinstance(widget, tk.Text):\n            widget.delete('1.0', \"end\")\n       elif isinstance(widget,ttk.Label):\n            widget['text'] = ''    \n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 2683466, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/660ba521231a16872d3c890100537826?s=128&d=identicon&r=PG&f=1", "display_name": "Glenn", "link": "https://stackoverflow.com/users/2683466/glenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546017678, "creation_date": 1545858239, "question_id": 53937147, "link": "https://stackoverflow.com/questions/53937147/replacing-contents-of-tkinter-widgets", "title": "Replacing contents of Tkinter widgets", "body": "<p>I am trying to develop a Twitter-like client to get the hang of tkinter.  I am displaying 7 tweets per screen from tweets stored in an sqlite database.  One line has name, screen name and created date in labels. Under that is a text box with the tweet text.  When the user presses the Next or Previous button I want to display the next or previous 7 tweets from the file.  Not sure how to clear the previous ones and update with the new data.  That is because I want the widget creation to be dynamic as in the code below.  Thus there is no way to address a particular widget my name.</p>\n\n<pre><code> if tweetStr:\n    while i &lt;  listLen:   \n        print(i)\n        user_name = tweetStr[i]['name']\n        screen_name = tweetStr[i]['screen_name']\n        created = tweetStr[i]['created_at']\n        tweet_text = (tweetStr[i]['short_text'] if not tweetStr[i]['long_text'] else tweetStr[i]['long_text'] )\n\n        top_space = tk.Text(f, width= 100, height=1)\n        top_space.grid(column = 0, row = start_row,columnspan=6, sticky=\"nsew\")\n        top_space.configure(background='lightblue')\n\n        ttk.Label(f, text=user_name).grid(column=0, row=start_row+1,sticky='w')\n        ttk.Label(f, text=screen_name).grid(column=1, row=start_row+1,sticky='w')\n        ttk.Label(f, text=created).grid(column=2, row=start_row+1,sticky='w')\n\n        t = tk.Text(f, width= 100, height=3, wrap='word')\n        t.grid(column = 0, row = start_row+2,columnspan=6, sticky=\"nsew\")\n        #t.insert(INSERT, \"Begin \" + \"This is a test \" * 800 + \" END\" + '\\n\\n')\n        t.insert(tk.INSERT, tweet_text)\n\n        i += 1\n        start_row += 6\n</code></pre>\n"}, {"tags": ["python", "kivy", "gspread"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1545858188, "post_id": 53937087, "comment_id": 94714265, "body": "Please show the full traceback. It&#39;s possible that gspread added support but not when I used to use it"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1545858507, "post_id": 53937087, "comment_id": 94714351, "body": "Try running the following code: <a href=\"https://kivy.org/doc/stable/guide/basic.html#create-an-application\" rel=\"nofollow noreferrer\">kivy.org/doc/stable/guide/basic.html#create-an-application</a> and tell me if you have problems."}, {"owner": {"reputation": 1, "user_id": 10836589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213469066988010/picture?type=large", "display_name": "Hahannibal", "link": "https://stackoverflow.com/users/10836589/hahannibal"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1545901267, "post_id": 53937087, "comment_id": 94723523, "body": "@eyllanesc it runs if I run it in a different project, it does not in the same library, where I use the gspread."}, {"owner": {"reputation": 1, "user_id": 10836589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213469066988010/picture?type=large", "display_name": "Hahannibal", "link": "https://stackoverflow.com/users/10836589/hahannibal"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1545904888, "post_id": 53937087, "comment_id": 94724881, "body": "@eyllanesc it looks like it&#39;s an issue with sd12, as right now it works fine in a different project, the whole copy. in my other project it says sd12- ImportError: DLL load failed, etc"}], "owner": {"reputation": 1, "user_id": 10836589, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213469066988010/picture?type=large", "display_name": "Hahannibal", "link": "https://stackoverflow.com/users/10836589/hahannibal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545872679, "creation_date": 1545857801, "last_edit_date": 1545872679, "question_id": 53937087, "link": "https://stackoverflow.com/questions/53937087/gspread-kivy-throw-issues-separeted-work-well", "title": "gspread + kivy throw issues, separeted work well", "body": "<p>I want to make a dropdown menu from google spreadsheets titles. While separately the dropdown menu works and I get the info from google spreadsheets, but when I combine the two, there are error messages.</p>\n\n<pre><code>import gspread\nfrom oauth2client.service_account import ServiceAccountCredentials\nfrom kivy.uix.dropdown import DropDown\nfrom kivy.uix.button import Button\nfrom kivy.base import runTouchApp\n\nscope = ['https://spreadsheets.google.com/feeds', 'https://www.googleapis.com/auth/drive']\ncreds = ServiceAccountCredentials.from_json_keyfile_name('frisbee.json', scope)\nclient = gspread.authorize(creds)\n\nsh = client.open('Teams')\nworksheet_list = sh.worksheets()\nwsl = str(worksheet_list).split()\n\nfor word in wsl:\n    if \"Worksheet\" in word:\n        wsl.remove(word)\nfor word in wsl:\n    if \"id\" in word:\n        wsl.remove(word)\nfor word in wsl:\n    if \"&lt;Worksheet\" in word:\n        wsl.remove(word)\n\ndropdown = DropDown()\nfor index in range(len(wsl)):\n    btn = Button(text=wsl[index], size_hint_y=None, height=44)\n    btn.bind(on_release=lambda btn: dropdown.select(btn.text))\n    dropdown.add_widget(btn)\n\nmainbutton = Button(text='Teams', size_hint=(None, None))\nmainbutton.bind(on_release=dropdown.open)\ndropdown.bind(on_select=lambda instance, x: setattr(mainbutton, 'text', x))\n\nrunTouchApp(mainbutton)\n</code></pre>\n\n<p><strong>Expected result</strong>: A window pop up with the dropdown menu. </p>\n\n<p><strong>Actual result</strong>: </p>\n\n<pre><code>[INFO   ] [Text        ] Provider: sdl2\n[CRITICAL] [App         ] Unable to get a Window, abort.\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1545858469, "post_id": 53937081, "comment_id": 94714340, "body": "There&#39;s no need to swear; I do it plenty in RL but it&#39;s not something you&#39;d want on, say, wikipedia. Also, this has nothing to do with your django installation"}, {"owner": {"reputation": 9, "user_id": 10628721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdeb43cb228c98b320158d6f80eafe8?s=128&d=identicon&r=PG&f=1", "display_name": "awsyoos", "link": "https://stackoverflow.com/users/10628721/awsyoos"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1545858890, "post_id": 53937081, "comment_id": 94714447, "body": "well, thanks i guess?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1545859660, "post_id": 53937081, "comment_id": 94714660, "body": "You&#39;re welcome. Downvotes and close votes will count against your account and, very quickly, you&#39;ll be banned from asking questions. I have used django a bit, it&#39;s just a case of opening a terminal in a new directory and starting a new app, no?"}, {"owner": {"reputation": 21142, "user_id": 20712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dUQnr.png?s=128&g=1", "display_name": "Ross Rogers", "link": "https://stackoverflow.com/users/20712/ross-rogers"}, "edited": false, "score": 0, "creation_date": 1545860473, "post_id": 53937081, "comment_id": 94714914, "body": "To preserve progress, you should take a look at <a href=\"https://git-scm.com/\" rel=\"nofollow noreferrer\"><code>git</code></a>.  It allows you to save as many backups of your code as you want without consuming a  ton of space.  It is the de-facto source control system for software engineers these days.  That said, you&#39;ve basically told us, &quot;It&#39;s broke.&quot;  Without specifics it is hard to know what your issue is.  Perhaps start back at the beginning with <code>python django-admin.py startproject</code> ?"}, {"owner": {"reputation": 9, "user_id": 10628721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdeb43cb228c98b320158d6f80eafe8?s=128&d=identicon&r=PG&f=1", "display_name": "awsyoos", "link": "https://stackoverflow.com/users/10628721/awsyoos"}, "edited": false, "score": 0, "creation_date": 1545862118, "post_id": 53937081, "comment_id": 94715392, "body": "hey guys, i was checking out was wrong and i found the answer the real problem was that  i was using too much disk space (only 92 kb left.) so i had to delete some programs i usually when i start a django project i import all the virtualenv into my project folder so icould activate and deactivate my virtualenv easily so i deleted some programs and i&#39;m good to go"}], "answers": [{"tags": [], "owner": {"reputation": 1593, "user_id": 4593642, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203096678250304/picture?type=large", "display_name": "Amine Messaoudi", "link": "https://stackoverflow.com/users/4593642/amine-messaoudi"}, "is_accepted": true, "score": 0, "last_activity_date": 1545858856, "creation_date": 1545858856, "answer_id": 53937224, "question_id": 53937081, "link": "https://stackoverflow.com/questions/53937081/how-do-i-start-everything-over-with-django/53937224#53937224", "title": "how do i start everything over with django?", "body": "<p>Maybe your django project is using a different version than the one installed on your computer.</p>\n\n<p>This issue happened to me when I updated django using pip, only to find out that my django project is no longer compatible. I had to find out which version my project was using and I reinstalled it.</p>\n\n<p>First make sure that the version of your project matches the version of django that is installed.</p>\n"}], "owner": {"reputation": 9, "user_id": 10628721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdeb43cb228c98b320158d6f80eafe8?s=128&d=identicon&r=PG&f=1", "display_name": "awsyoos", "link": "https://stackoverflow.com/users/10628721/awsyoos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 53937224, "answer_count": 1, "score": -4, "last_activity_date": 1545858856, "creation_date": 1545857773, "last_edit_date": 1545858306, "question_id": 53937081, "link": "https://stackoverflow.com/questions/53937081/how-do-i-start-everything-over-with-django", "title": "how do i start everything over with django?", "body": "<p>I've been working with django recently as a beginner and I was struggling with how to learn django and I messed everything up so I decided I should start over  I tried to uninstall django and install it again but nothing worked I tried to make a new directory on my windows and still nothing worked is there anyway to reset my installation and restart my whole software?</p>\n\n<p>Here's how I started learning:</p>\n\n<ol>\n<li>I went to youtube and followed a free course and followed along with it</li>\n<li>I then downloaded a book from a website and tried to follow along with it with my old project then i finally took the decision to delete everything</li>\n<li>I don't know how to restart all my work</li>\n<li>tried to uninstall django and work with a new project but it keeps giving me errors .</li>\n<li>tried to delete all the files from my last project didn't work</li>\n<li>tried to move my old files to new directory didn't work</li>\n<li>tried to delete all code contained in the old project's files get screwed\nwhat do I do guys? I'm clearly crying in the bathroom with my laptop with me please help</li>\n</ol>\n"}, {"tags": ["python", "pandas", "python-2.7", "ranking"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1545858248, "post_id": 53937053, "comment_id": 94714280, "body": "<code>scores.apply(pd.Series.rank) </code>"}, {"owner": {"reputation": 3, "user_id": 10576683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dfce33d2af699822b77a22208c4c6bc?s=128&d=identicon&r=PG&f=1", "display_name": "Panic Learner", "link": "https://stackoverflow.com/users/10576683/panic-learner"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1545926864, "post_id": 53937053, "comment_id": 94733959, "body": "@W-B could you give a bit of background to what you&#39;ve done here? I tried implementing what you said but there seemed to be no effect at all...."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10576683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dfce33d2af699822b77a22208c4c6bc?s=128&d=identicon&r=PG&f=1", "display_name": "Panic Learner", "link": "https://stackoverflow.com/users/10576683/panic-learner"}, "edited": false, "score": 0, "creation_date": 1545937910, "post_id": 53949514, "comment_id": 94738067, "body": "Perfect, thank you!! @ScottBoston Could I be a pain and ask for a bit of background to what you&#39;ve written there. Specifically, what the &quot;.apply(pd.series.rank)&quot; is doing."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 3, "user_id": 10576683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dfce33d2af699822b77a22208c4c6bc?s=128&d=identicon&r=PG&f=1", "display_name": "Panic Learner", "link": "https://stackoverflow.com/users/10576683/panic-learner"}, "edited": false, "score": 0, "creation_date": 1545938219, "post_id": 53949514, "comment_id": 94738169, "body": "Sure.  df.apply basically a function to every column of that dataframe.  So, we are applying the rank method from pd.Series to every column of the dataframe."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 0, "last_activity_date": 1545936380, "creation_date": 1545936380, "answer_id": 53949514, "question_id": 53937053, "link": "https://stackoverflow.com/questions/53937053/ranking-pandas-dataframe-based-on-closeness-to-a-specified-value/53949514#53949514", "title": "Ranking Pandas DataFrame Based on Closeness to a Specified Value", "body": "<p>Try this:</p>\n\n<pre><code>ranks = scores.abs().apply(pd.Series.rank).astype(int)\nranks \n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   distance  elevation_gain  elevation_loss  gradient\n0         4               2               4         2\n1         2               4               3         3\n2         3               3               2         4\n3         1               1               1         1\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10576683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dfce33d2af699822b77a22208c4c6bc?s=128&d=identicon&r=PG&f=1", "display_name": "Panic Learner", "link": "https://stackoverflow.com/users/10576683/panic-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 53949514, "answer_count": 1, "score": 0, "last_activity_date": 1545936380, "creation_date": 1545857595, "last_edit_date": 1545935990, "question_id": 53937053, "link": "https://stackoverflow.com/questions/53937053/ranking-pandas-dataframe-based-on-closeness-to-a-specified-value", "title": "Ranking Pandas DataFrame Based on Closeness to a Specified Value", "body": "<p>Apologies if this is a trivial task. I am very new to coding and Python and am learning as part of my dissertation.</p>\n\n<p>I have a data frame and want to rank each column within it based on its closeness to a specified value, rather than an ascending or descending order.</p>\n\n<p>I am working on a way to compare Running/Cycling routes. As part of this process I am trying to find how a query route compares to a target route  based on a few different attributes: Distance, Elevation Gain, Elevation Loss and Gradient. My resultant data frame, shows the error between the two routes in each attribute within the comparison (i.e. [the target route value - the query route value] / the target route value). The problem that I am currently facing is ranking these results. As a perfect match would be a value of 0, I want to rank the values based on their closeness to this.</p>\n\n<p>The data frame to be ranked:</p>\n\n<pre><code>scores = pd.DataFrame({'distance':[0.15, 0.07, -0.09, 0], 'elevation_gain': \n        [-0.19,-8.39, -0.86, 0],'elevation_loss':[-3.73, -2.51, -0.16, 0], \n        'gradient': [0.12, 0.39, 2.77, 0]})\n</code></pre>\n\n<p>In this case, the 4th route is the query route, as such the result is a perfect match and should therefore be ranked 1st.<br>\nAs there are negative values, I don't think, a descending ranking would be suitable.</p>\n\n<p>what I am aiming for is:</p>\n\n<pre><code>ranks = pd.DataFrame({'distance':[4, 2, 3, 1], 'elevation_gain': [2,4, 3, \n      1],'elevation_loss':[4, 3, 2, 1], 'gradient': [2, 3, 4, 1]})\n</code></pre>\n\n<p>(Appologies I don't know how to visualise these data frames to make this easier to digest)</p>\n\n<p>I could then create a new column, summing the ranks and the lowest score would indicate the best match.</p>\n\n<p>Thanks for any help in advance!</p>\n"}, {"tags": ["python", "json", "encoding", "discord.py"], "answers": [{"tags": [], "owner": {"reputation": 153, "user_id": 1240286, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C4cLP.png?s=128&g=1", "display_name": "Arklur", "link": "https://stackoverflow.com/users/1240286/arklur"}, "is_accepted": true, "score": 1, "last_activity_date": 1545902165, "creation_date": 1545902165, "answer_id": 53942547, "question_id": 53937010, "link": "https://stackoverflow.com/questions/53937010/how-to-write-the-message-content-to-a-file-problem-with-encoding/53942547#53942547", "title": "How to write the message.content to a file? (Problem with encoding)", "body": "<p>I found the solution, I had to change the:</p>\n\n<pre><code>with open(filePath, \"w\", encoding='utf_8') as jsonFile:\n    json.dump(messagesData, jsonFile, indent=2)\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>with open(filePath, \"w\", encoding='utf_8') as jsonFile:\n    json.dump(messagesData, jsonFile, indent=2, ensure_ascii=False)\n</code></pre>\n\n<p>And now the output is correct.</p>\n"}], "owner": {"reputation": 153, "user_id": 1240286, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/C4cLP.png?s=128&g=1", "display_name": "Arklur", "link": "https://stackoverflow.com/users/1240286/arklur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 53942547, "answer_count": 1, "score": 0, "last_activity_date": 1545920748, "creation_date": 1545857279, "last_edit_date": 1545920748, "question_id": 53937010, "link": "https://stackoverflow.com/questions/53937010/how-to-write-the-message-content-to-a-file-problem-with-encoding", "title": "How to write the message.content to a file? (Problem with encoding)", "body": "<p>I've just started using discord.py and I would like to log the messages. Unfortunately I run into encoding problems. If I write the messages into an utf-8 file, I get the special characters' unicode instead of the character itself. E.g. if I write <code>\u00e1\u00e9\u0151\u00fa\u0171</code> into the chat, my bot logs this into the file like this: <code>\\u00e1\\u00e9\\u0151\\u00fa\\u0171</code>. How could I make it so no matter what special character someone types I log into the file the exact character (so the expected result would be to see the same characters in the file, just like I was copy-pasting it from discord to the file).</p>\n\n<p>Since it's just a very basic, \"hello world\" type of code, I'll copy here the full code:</p>\n\n<pre><code>import json\nimport discord\nimport os\nfrom time import gmtime, strftime\n\nclient = discord.Client()\n\n\n@client.event\nasync def on_ready():\n    print(f'We have logged in as {client.user}')\n\n\n@client.event\nasync def on_message(message):\n    userName = message.author.name + \"#\" + message.author.discriminator\n    writeMessageToFile(filePath='D:\\Projects\\Discord\\messages.json', userName=userName, message=message.content)\n\n\ndef writeMessageToFile(filePath:str, userName:str, message:str):\n    messagesData = {}\n    timeStamp = strftime(\"%Y-%m-%d %H:%M:%S\", gmtime())\n    if os.path.isfile(filePath):\n        with open(filePath, \"r\", encoding='utf_8') as jsonFile:\n            messagesData = json.load(jsonFile)\n\n    userMessages = messagesData.get(userName, None)\n    if userMessages is None:\n        messagesData[userName] = [{'TimeStamp': timeStamp, 'Message': message}]\n    else:\n        messagesData[userName].append({'TimeStamp': timeStamp, 'Message': message})\n\n    with open(filePath, \"w\", encoding='utf_8') as jsonFile:\n        json.dump(messagesData, jsonFile, indent=2)\n\n\nif __name__ == '__main__':\n    token = 'XXXXXXXXXXXXXXXXXXXXXXXXX'\n    client.run(token)\n</code></pre>\n\n<p>Thanks for the help in advance.</p>\n"}, {"tags": ["python", "qt", "matplotlib", "pyside2"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1545859907, "post_id": 53937005, "comment_id": 94714748, "body": "What version of libraries are you using? in Linux with PySide2 5.12 and matplotlib 3.0.2 works correctly with useblit = True."}, {"owner": {"reputation": 1039, "user_id": 5362339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMZU3.jpg?s=128&g=1", "display_name": "Snow bunting", "link": "https://stackoverflow.com/users/5362339/snow-bunting"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1545864095, "post_id": 53937005, "comment_id": 94715830, "body": "Sorry, forgot about that, edited the question. So <code>useblit=True</code> would be the proper way to do it? Also I&#39;ll try to get a newer pyside2 version..."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1545864874, "post_id": 53937005, "comment_id": 94715972, "body": "yes, it seems to me that the problem would be caused by its old version of PySide2 (the latest LTS versions with 5.9 and 5.12 so its version is very old)"}, {"owner": {"reputation": 1039, "user_id": 5362339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMZU3.jpg?s=128&g=1", "display_name": "Snow bunting", "link": "https://stackoverflow.com/users/5362339/snow-bunting"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1545865604, "post_id": 53937005, "comment_id": 94716119, "body": "Problem is, conda only provides 5.6 and when uninstalling and installing with pip, I get errors, like in this <a href=\"https://github.com/conda-forge/qt-feedstock/issues/70\" rel=\"nofollow noreferrer\">issue on conda-forge</a>. Do I need to delete a file called &quot;qt.conf&quot; and install both, matplotlib and pyside2 with pip?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1545866013, "post_id": 53937005, "comment_id": 94716205, "body": "use a virtualenv and install the packages with pip. I do not use conda."}, {"owner": {"reputation": 1039, "user_id": 5362339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMZU3.jpg?s=128&g=1", "display_name": "Snow bunting", "link": "https://stackoverflow.com/users/5362339/snow-bunting"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1545866416, "post_id": 53937005, "comment_id": 94716299, "body": "I am using a virtualenv. Deleted the old one and reinstalled what I need, thanks! Runs smoothly with 5.12. Sorry for being so blind, assumed conda is always up-to-date^^ Please write that as answer if you want."}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1545867005, "creation_date": 1545867005, "answer_id": 53938207, "question_id": 53937005, "link": "https://stackoverflow.com/questions/53937005/matplotib-rectangleselector-graphical-glitch-in-qt5-app/53938207#53938207", "title": "matplotib RectangleSelector graphical glitch in Qt5 app", "body": "<p>The problem seems to be the old version of PySide2, with the latest version working correctly. On the other hand conda does not allow to use the latest versions of PySide2 so you must use a virtualenv and install the packages with pip.</p>\n"}], "owner": {"reputation": 1039, "user_id": 5362339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMZU3.jpg?s=128&g=1", "display_name": "Snow bunting", "link": "https://stackoverflow.com/users/5362339/snow-bunting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 1, "accepted_answer_id": 53938207, "answer_count": 1, "score": 2, "last_activity_date": 1545867005, "creation_date": 1545857245, "last_edit_date": 1545863982, "question_id": 53937005, "link": "https://stackoverflow.com/questions/53937005/matplotib-rectangleselector-graphical-glitch-in-qt5-app", "title": "matplotib RectangleSelector graphical glitch in Qt5 app", "body": "<p>I try to use Matplotlib in a Qt5 application and would like to use the RectangleSelector, but depending on the parameter <code>useblit</code> I get either graphical glitches or the selector disappears.</p>\n\n<p>However when selecting, I get a weird graphical glitch where the entire plot seems to move to the top-left corner, leaving 1cm at the bottom and right side black (or transparent, as my screenshot showed). What is happening here?</p>\n\n<p><a href=\"https://i.stack.imgur.com/o6dNy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o6dNy.png\" alt=\"enter image description here\"></a></p>\n\n<h3>Reproduction</h3>\n\n<p>This opens a Qt5 window with a plot and some random data. As soon as you select some data it will - for demonstration - clear the axis and plot something new.</p>\n\n<p>If we set <code>useblit=False</code>, The RectangleSelector disappears after the first <code>ax.clear()</code>, if we have <code>useblit=True</code> we get about 1cm of blackness on the bottom and the right side while selecting (see picture).</p>\n\n<pre><code>import sys\nimport matplotlib\nimport random\nmatplotlib.use('Qt5Agg')\n\nfrom PySide2.QtCore import *\nfrom PySide2.QtGui import *\nfrom PySide2.QtWidgets import *\nfrom matplotlib.backends.backend_qt5agg import FigureCanvasQTAgg as FigureCanvas\nfrom matplotlib.figure import Figure\n#from matplotlib.widgets import SpanSelector\nfrom matplotlib.widgets import RectangleSelector\n\nclass Window(QDialog):\n    def __init__(self, parent=None):\n        super().__init__(parent)\n        self.figure = Figure()\n        self.ax = self.figure.add_subplot(111)\n        self.canvas = FigureCanvas(self.figure)\n\n        # First data\n        self.ax.plot([random.random() for _ in range(50)])\n\n        # Embedding plot into Qt\n        layout = QVBoxLayout()\n        layout.addWidget(self.canvas)\n        self.setLayout(layout)\n\n        self.x = RectangleSelector(self.ax, self.onselect_xy,\n                                   drawtype='box',\n                                   useblit=False,     # or True?\n                                   rectprops={'alpha':0.5, 'facecolor':'red'},\n                                   interactive=True)\n\n        self.canvas.draw()\n\n\n    def onselect_xy(self, *args, **kwargs):\n        self.ax.clear()\n        self.ax.plot([random.random() for _ in range(50)])\n        self.canvas.draw()\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    main = Window()\n    main.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<h3>Versions</h3>\n\n<p>On macOS 10.13.6 HighSierra, selection from <code>conda list</code>:</p>\n\n<pre><code>python                    3.7.1                haf84260_7\npyside2                   5.6.0a1          py37h45ccf91_3    conda-forge\nmatplotlib                3.0.2            py37h54f8f79_0 \n</code></pre>\n"}, {"tags": ["python", "pyqt5", "qt-designer", "file-browser", "getopenfilename"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1545858259, "post_id": 53936998, "comment_id": 94714285, "body": "change <code>data_path=QtWidgets.QFileDialog.getOpenFileName(self,&#39;Open File&#39;,&quot;D:\\Programming&quot;,&#39;*.txt&#39;,)</code> to <code>data_path, _ =QtWidgets.QFileDialog.getOpenFileName(None, &#39;Open File&#39;, r&quot;D:\\Programming&quot;, &#39;*.txt&#39;)</code>"}, {"owner": {"reputation": 1021, "user_id": 4359933, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2JnpV.jpg?s=128&g=1", "display_name": "Seymur Mammadli", "link": "https://stackoverflow.com/users/4359933/seymur-mammadli"}, "edited": false, "score": 0, "creation_date": 1615144851, "post_id": 53936998, "comment_id": 117595001, "body": "def fileSelector(self):         filename, filter = QtGui.QFileDialog.getOpenFileName(parent=self.parentWidget(o&zwnj;&#8203;r self), caption=&#39;Select image file&#39;, filter=&#39; Image files (*.png)&#39;)         if filename:             print(filename)"}], "owner": {"reputation": 21, "user_id": 10836533, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--XdjemziIGE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYuqM2si9s16SCUhitR2ZW2nEDxXg/mo/photo.jpg?sz=128", "display_name": "Masoud Moradi", "link": "https://stackoverflow.com/users/10836533/masoud-moradi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4190, "favorite_count": 1, "closed_date": 1545858302, "answer_count": 0, "score": 2, "last_activity_date": 1545872378, "creation_date": 1545857165, "last_edit_date": 1545872378, "question_id": 53936998, "link": "https://stackoverflow.com/questions/53936998/how-to-create-a-file-selector-when-click-button-in-pyqt5", "closed_reason": "Duplicate", "title": "how to create a file selector when click button in pyqt5", "body": "<p>image link</p>\n\n<p><img src=\"https://i.stack.imgur.com/NKpQo.jpg\" alt=\"\"></p>\n\n<p>I want create a gui app with pyqt5.i create one button(\"Browse\") that click on it open a file browser to import data file but it does not work and app closed.please help me i need it.</p>\n\n<p>I've tried on pycharm2018 in windows 10 and i use QTDesigner</p>\n\n<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets\nimport _pickle\nclass Ui_Import_data(object):\ndef browse_data1(self):\n    data_path=QtWidgets.QFileDialog.getOpenFileName(self,'Open File',\"D:\\Programming\",'*.txt',)\n    with open('data_path.pickle', 'wb') as handle:\n        _pickle.dump(data_path,handle,protocol=_pickle.HIGHEST_PROTOCOL)\n\ndef setupUi(self, Import_data):\n    Import_data.setObjectName(\"Import_data\")\n    Import_data.resize(704, 131)\n    self.pushButton = QtWidgets.QPushButton(Import_data)\n    self.pushButton.setGeometry(QtCore.QRect(600, 20, 81, 23))\n    self.pushButton.setObjectName(\"pushButton\")\n    self.label = QtWidgets.QLabel(Import_data)\n    self.label.setGeometry(QtCore.QRect(10, 50, 47, 13))\n    self.label.setObjectName(\"label\")\n    self.label_2 = QtWidgets.QLabel(Import_data)\n    self.label_2.setGeometry(QtCore.QRect(10, 20, 121, 16))\n    self.label_2.setObjectName(\"label_2\")\n    self.lineEdit = QtWidgets.QLineEdit(Import_data)\n    self.lineEdit.setGeometry(QtCore.QRect(140, 20, 441, 20))\n    self.lineEdit.setObjectName(\"lineEdit\")\n    self.lineEdit_2 = QtWidgets.QLineEdit(Import_data)\n    self.lineEdit_2.setGeometry(QtCore.QRect(140, 50, 441, 20))\n    self.lineEdit_2.setObjectName(\"lineEdit_2\")\n    self.pushButton_2 = QtWidgets.QPushButton(Import_data)\n    self.pushButton_2.setGeometry(QtCore.QRect(600, 50, 81, 23))\n    self.pushButton_2.setObjectName(\"pushButton_2\")\n    self.pushButton_3 = QtWidgets.QPushButton(Import_data)\n    self.pushButton_3.setGeometry(QtCore.QRect(600, 100, 81, 23))\n    self.pushButton_3.setObjectName(\"pushButton_3\")\n    self.pushButton_4 = QtWidgets.QPushButton(Import_data)\n    self.pushButton_4.setGeometry(QtCore.QRect(510, 100, 75, 23))\n    self.pushButton_4.setObjectName(\"pushButton_4\")\n    self.retranslateUi(Import_data)\n\n    self.pushButton.clicked.connect(self.browse_data1)\n    QtCore.QMetaObject.connectSlotsByName(Import_data)\n\ndef retranslateUi(self, Import_data):\n    _translate = QtCore.QCoreApplication.translate\n    Import_data.setWindowTitle(_translate(\"Import_data\", \"Import Data\"))\n    self.pushButton.setText(_translate(\"Import_data\", \"Browse\"))\n    self.label.setText(_translate(\"Import_data\", \"Data Path\"))\n    self.label_2.setText(_translate(\"Import_data\", \"Ground Truth Data Path\"))\n    self.pushButton_2.setText(_translate(\"Import_data\", \"Browse\"))\n    self.pushButton_3.setText(_translate(\"Import_data\", \"Apply\"))\n    self.pushButton_4.setText(_translate(\"Import_data\", \"OK\"))\n\n\nif __name__ == \"__main__\":\nimport sys\napp = QtWidgets.QApplication(sys.argv)\nImport_data = QtWidgets.QDialog()\nui = Ui_Import_data()\nui.setupUi(Import_data)\nImport_data.show()\nsys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1545857766, "creation_date": 1545857766, "answer_id": 53937080, "question_id": 53936985, "link": "https://stackoverflow.com/questions/53936985/how-to-calculate-the-average-of-the-most-recent-three-non-nan-value-using-python/53937080#53937080", "title": "How to calculate the average of the most recent three non-nan value using Python", "body": "<p>You can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.apply.html\" rel=\"nofollow noreferrer\"><code>pd.DataFrame.apply</code></a> with a custom function. This is only partially vectorised.</p>\n\n<pre><code>def mean_calculator(row):\n    non_nulls = row.notnull()\n    if non_nulls.sum() &lt; 3:\n        return np.nan\n    return row[non_nulls].values[-3:].mean()\n\ndf['expected'] = df.iloc[:, 1:].apply(mean_calculator, axis=1)\n\nprint(df)\n\n  name  day1  day2  day3  day4  day5  day6  day7  expected\n0    A   1.0   1.0   NaN   2.0   3.0   0.0     3       2.0\n1    B   NaN   NaN   NaN   NaN   NaN   NaN     3       NaN\n2    C   1.0   1.0   0.0   1.0   1.0   1.0     1       1.0\n3    D   1.0   1.0   0.0   1.0   NaN   1.0     4       2.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "is_accepted": false, "score": 1, "last_activity_date": 1545859769, "last_edit_date": 1545859769, "creation_date": 1545857886, "answer_id": 53937099, "question_id": 53936985, "link": "https://stackoverflow.com/questions/53936985/how-to-calculate-the-average-of-the-most-recent-three-non-nan-value-using-python/53937099#53937099", "title": "How to calculate the average of the most recent three non-nan value using Python", "body": "<p>You can start by calculating the <code>expected</code> column using applying the following function:</p>\n\n<pre><code>expected = df.apply(lambda x: x[~x.isnull()][-3:].mean(), axis = 1)\n</code></pre>\n\n<p>And insert these values in the columns that have at least <code>3</code> valid values:</p>\n\n<pre><code>m = df.isnull().sum(axis=1) &gt; 3\ndf.loc[~m,'expected'] = expected.mask(m)\n\n       day1  day2  day3  day4  day5  day6  day7  expected\nname                                                    \nA      1.0   1.0   NaN   2.0   3.0   0.0     3       2.0\nB      NaN   NaN   NaN   NaN   NaN   NaN     3       NaN\nC      1.0   1.0   0.0   1.0   1.0   1.0     1       1.0\nD      1.0   1.0   0.0   1.0   NaN   1.0     4       2.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 2, "creation_date": 1545858007, "post_id": 53937104, "comment_id": 94714223, "body": "I know I will see <code>justify</code> here :-)"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 6, "last_activity_date": 1545858134, "last_edit_date": 1545858134, "creation_date": 1545857924, "answer_id": 53937104, "question_id": 53936985, "link": "https://stackoverflow.com/questions/53936985/how-to-calculate-the-average-of-the-most-recent-three-non-nan-value-using-python/53937104#53937104", "title": "How to calculate the average of the most recent three non-nan value using Python", "body": "<p>Vectorized one using <a href=\"https://stackoverflow.com/a/44559180/\"><code>justify</code></a> -</p>\n\n<pre><code>N = 3 # last N entries for averaging\navg = np.mean(justify(df.values,invalid_val=np.nan,axis=1, side='right')[:,-N:],1)\ndf['expected'] = avg\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 5016119, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d9edbb92c3baf4c93845cbfdb1ba9eaa?s=128&d=identicon&r=PG&f=1", "display_name": "fly36", "link": "https://stackoverflow.com/users/5016119/fly36"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 996, "favorite_count": 3, "accepted_answer_id": 53937104, "answer_count": 3, "score": 9, "last_activity_date": 1545859769, "creation_date": 1545857087, "last_edit_date": 1545857781, "question_id": 53936985, "link": "https://stackoverflow.com/questions/53936985/how-to-calculate-the-average-of-the-most-recent-three-non-nan-value-using-python", "title": "How to calculate the average of the most recent three non-nan value using Python", "body": "<p>I have a dataframe <code>df</code> looks like the following. I want to calculate the average of the last 3 non nan columns. If there are less than three non-missing columns then the average number is missing.</p>\n\n<pre><code>name day1 day2 day3 day4  day5 day6 day7\nA    1     1   nan   2    3    0   3\nB    nan   nan nan   nan  nan  nan 3\nC    1     1   0     1    1    1   1\nD    1     1   0     1    nan  1   4\n</code></pre>\n\n<p>The expect output should looks like the following </p>\n\n<pre><code>name day1 day2 day3 day4  day5 day6 day7    expected \nA    1     1   nan   2    3    0   3        2     &lt;-  1/3*(day5 + day6 + day7)\nB    nan   nan nan   nan  nan  nan 3        nan   &lt;-  less than 3 non-missing\nC    1     1   0     1    1    1   1        1     &lt;-  1/3*(day5 + day6 + day7)\nD    1     1   0     1    nan  1   4        2    &lt;-  1/3 *(day4 + day6 + day7)\n</code></pre>\n\n<p>I know how to calculate the average of the last three column and count how many non-missing observation are there. \n<code>df.iloc[:, 5:7].count(axis=1) average of the last three column</code>\n<code>df.iloc[:, 5:7].count(axis=1) number of non-nan in the last three column</code></p>\n\n<p>If there are less than 3 non-missing observation, I know how to set the average value to missing using  <code>df.iloc[:, 1:7].count(axis=1) &lt;= 3</code>. </p>\n\n<p>But I am struggling to find a way to calculate the average of the last three non-missing columns. Can anyone teach me how to solve this please?</p>\n"}, {"tags": ["python", "ssl", "pip"], "comments": [{"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1545858666, "post_id": 53936950, "comment_id": 94714404, "body": "What data do you mean? <code>pip --cert</code> doesn&#39;t append the certificate to the cacert bundle, simply omit the <code>--cert</code> option to stop using the cert."}, {"owner": {"reputation": 11, "user_id": 9190585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce85def84ae28983b2f98e7d654d896?s=128&d=identicon&r=PG&f=1", "display_name": "cloudevr", "link": "https://stackoverflow.com/users/9190585/cloudevr"}, "reply_to_user": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1545859633, "post_id": 53936950, "comment_id": 94714651, "body": "Where is the &quot;cacert bundle&quot; located on MacOS? Is that the /usr/local/etc/openssl/cert.pem file? Sadly, now that I&#39;ve used the &quot;pip3 --cert [FILENAME.PEM] list&quot; command and specified a .PEM to use, when I type &quot;pip3 list&quot; it works without SSL warnings even after rebooting. I&#39;m assuming the .PEM file gets saved somewhere. This &quot;somewhere&quot; is what I&#39;m looking for. BTW, when I create a VENV then do a &quot;pip3 list&quot; after activating the virtual environment, I get the original SSL error. Weird."}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1545868801, "post_id": 53936950, "comment_id": 94716690, "body": "Again, calling <code>pip</code> with the <code>--cert</code> argument does not write any certs; you have done some other modifications to your system, persisting the certificate. On MacOS, the Keychain Access app is used for managing the certs."}, {"owner": {"reputation": 821, "user_id": 1580357, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/be0c31570adf22f27e59d7c65daf42fe?s=128&d=identicon&r=PG", "display_name": "lulezi", "link": "https://stackoverflow.com/users/1580357/lulezi"}, "edited": false, "score": 0, "creation_date": 1549398586, "post_id": 53936950, "comment_id": 95886205, "body": "I have the same issue. I ran <code>pip install --cert path&#47;to&#47;cert module-name</code> once and that <code>cert</code> value is now used for every <code>pip install</code> I try to do."}], "owner": {"reputation": 11, "user_id": 9190585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce85def84ae28983b2f98e7d654d896?s=128&d=identicon&r=PG&f=1", "display_name": "cloudevr", "link": "https://stackoverflow.com/users/9190585/cloudevr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1545856890, "creation_date": 1545856890, "question_id": 53936950, "link": "https://stackoverflow.com/questions/53936950/where-does-pip-save-cert-data", "title": "Where does pip save --cert data?", "body": "<p>After trying to do a \"pip3 list\" on MacOS after installing Python3 with Homebrew and while connected to a corporate network and firewall, I got the below error:</p>\n\n<pre><code>Could not fetch URL https://pypi.org/simple/pip/: There was a problem confirming the ssl certificate: HTTPSConnectionPool(host='pypi.org', port=443): Max retries exceeded with url: /simple/pip/ (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self signed certificate in certificate chain (_ssl.c:1051)'))) - skipping\n</code></pre>\n\n<p>After some digging, I found this <a href=\"https://superuser.com/questions/727924/pip-and-ssl-certificate-errors\">article</a>. It works! Converting the company's .CER file to .PEM and then doing a \"pip3 --cert root-cert.pem list\" resolved the issue. However, where does the data get saved? Meaning, how does one revert the setting back to NULL or modify the setting without actually executing the command again using some phony .PEM file?</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 3670, "user_id": 2681057, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c2135aa4c462b83c2844bf35d03c447?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Chapman", "link": "https://stackoverflow.com/users/2681057/nick-chapman"}, "edited": false, "score": 0, "creation_date": 1545857145, "post_id": 53936946, "comment_id": 94713958, "body": "Are you sure you&#39;re not just being a goof? Shouldn&#39;t it be <code>data&#47;algeria.csv</code>? The fact that the string is a binary representation shouldn&#39;t actually matter."}, {"owner": {"reputation": 3670, "user_id": 2681057, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7c2135aa4c462b83c2844bf35d03c447?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Chapman", "link": "https://stackoverflow.com/users/2681057/nick-chapman"}, "edited": false, "score": 0, "creation_date": 1545857321, "post_id": 53936946, "comment_id": 94714000, "body": "Oh and to clarify, the <code>b</code> prefix in front of the string just means that it&#39;s a binary string, which you can read more about here: <a href=\"https://stackoverflow.com/questions/17615414/how-to-convert-binary-string-to-normal-string-in-python3\" title=\"how to convert binary string to normal string in python3\">stackoverflow.com/questions/17615414/&hellip;</a> and here: <a href=\"https://docs.python.org/3/library/stdtypes.html#str\" rel=\"nofollow noreferrer\">docs.python.org/3/library/stdtypes.html#str</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9331478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f7acb2a2d77803366c946ed0cfea05e?s=128&d=identicon&r=PG&f=1", "display_name": "DanielK", "link": "https://stackoverflow.com/users/9331478/danielk"}, "edited": false, "score": 0, "creation_date": 1545863339, "post_id": 53937070, "comment_id": 94715667, "body": "This is the correct answer to my question. However, for anyone reading this for future reference, this generates uncallable variables so you still need to make a dictionary of dataframes."}], "tags": [], "owner": {"reputation": 1339, "user_id": 3117592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fXUjs.jpg?s=128&g=1", "display_name": "ozcanyarimdunya", "link": "https://stackoverflow.com/users/3117592/ozcanyarimdunya"}, "is_accepted": true, "score": 0, "last_activity_date": 1545857672, "creation_date": 1545857672, "answer_id": 53937070, "question_id": 53936946, "link": "https://stackoverflow.com/questions/53936946/attempting-to-read-csv-over-a-list-generates-a-b-literal-i-cant-get-rid-of/53937070#53937070", "title": "Attempting to read_csv over a list generates a b literal I can&#39;t get rid of", "body": "<p>This code may help you</p>\n\n<pre><code>import os\nimport pandas as pd\n\nfileslist = []\n\nwith open(\"data/files.txt\", mode='r', encoding=\"utf-8\") as fp:\n    for line in fp.readlines():\n        fileslist.append(line.strip())\n\nfor file in fileslist:\n    # make sure your files are in same directory\n    # if they are in data folder then don't forget to add 'data/{}.csv'.format(file)\n\n    item = '{}.csv'.format(file)\n\n    if os.path.isfile(item):\n        item = pd.read_csv(item)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9331478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f7acb2a2d77803366c946ed0cfea05e?s=128&d=identicon&r=PG&f=1", "display_name": "DanielK", "link": "https://stackoverflow.com/users/9331478/danielk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 53937070, "answer_count": 1, "score": 0, "last_activity_date": 1545857672, "creation_date": 1545856857, "question_id": 53936946, "link": "https://stackoverflow.com/questions/53936946/attempting-to-read-csv-over-a-list-generates-a-b-literal-i-cant-get-rid-of", "title": "Attempting to read_csv over a list generates a b literal I can&#39;t get rid of", "body": "<p>I have a list of countries with corresponding .csv files. When I attempt to read_csv iterated over the list with a for loop, I get an error.</p>\n\n<p>I tried generating an empty dict first and making a dict of dataframes, I tried using <code>decode</code>, I tried using <code>item = r'{}.csv'.format(file)</code> instead of just <code>item = '{}.csv'.format(file)</code>.</p>\n\n<pre><code>import pandas as pd\nimport string as str\nfileslist = []\nwith open('data/files.txt') as f:\n    for line in f:\n        fileslist.append(f.readline().strip())\nfor file in fileslist:\n    item = '{}.csv'.format(file)\n    print(item)\n    item = pd.read_csv(item)\n</code></pre>\n\n<p>This should give me a number of dataframes starting with a dataframe named algeria. Instead I get the error \"FileNotFoundError: File b'algeria.csv' does not exist\".</p>\n"}, {"tags": ["python", "scrapy"], "answers": [{"tags": [], "owner": {"reputation": 22353, "user_id": 225016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d3c3ab5ddcf93a8ca1bfe1b481be1c?s=128&d=identicon&r=PG", "display_name": "mdaniel", "link": "https://stackoverflow.com/users/225016/mdaniel"}, "is_accepted": true, "score": 0, "last_activity_date": 1545869655, "creation_date": 1545869655, "answer_id": 53938446, "question_id": 53936943, "link": "https://stackoverflow.com/questions/53936943/call-several-callback-function-in-scrapy/53938446#53938446", "title": "call several callback function in scrapy", "body": "<blockquote>\n  <p>I need to call different callback related to the <code>start_urls</code> given by the loop, but I can't give a dynamic name for the callback. I would like to put <code>callback=parse_i</code> and <code>i</code> come from the loop above.</p>\n</blockquote>\n\n<p>The callback attribute just needs to be a callable, so you can use <code>getattr</code> just like normal:</p>\n\n<pre><code>my_callback = getattr(self, 'parse_{}'.format(i))\nyield Request(u, callback=my_callback)\n</code></pre>\n\n<hr>\n\n<p>Separately, while you didn't ask this, it is highly unusual to make a URL call from within <code>start_requests</code> since (a) that's why one would use Scrapy to begin with, to deal with all that non-200 stuff and (b) doing so with <code>requests</code> will not honor any of the throttling, proxy, user-agent, resumption, or host of other knobs over which one would wish to influence a scraping job.</p>\n"}], "owner": {"reputation": 17, "user_id": 10592705, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ro1YUdrpUEk/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAZrt_yN8vEhgY7L5D3S5GAfDC5_w/mo/photo.jpg?sz=128", "display_name": "houssem gharsalli", "link": "https://stackoverflow.com/users/10592705/houssem-gharsalli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 53938446, "answer_count": 1, "score": 0, "last_activity_date": 1545898662, "creation_date": 1545856853, "question_id": 53936943, "link": "https://stackoverflow.com/questions/53936943/call-several-callback-function-in-scrapy", "title": "call several callback function in scrapy", "body": "<p>I am using scrapy and I have several problems: </p>\n\n<p>first problem: I put start_requests in a loop but the function is not started from each iteration</p>\n\n<p>second problem: I need to call different callback related to the start_urls given by the loop, but I can't give a dynamic name for the callback. I would like to put callback=parse_i and i come from the loop above.</p>\n\n<pre><code>liste [[liste1],[liste2],[liste3]]\n\nfor i in range (0, 2):\n    start_urls = liste[i]\n\n    def start_requests(self):\n        #print(self.start_urls)\n        for u in self.start_urls:\n            try:\n                req = requests.get(u)\n            except requests.exceptions.ConnectionError:\n                print(\"Connection refused\")\n            if req.status_code != 200:\n\n                print(\"Request failed, status code is :\", req.status_code)\n                continue\n            yield scrapy.Request(u, callback=self.parse, meta={'dont_merge_cookies': True}, dont_filter=False)\n</code></pre>\n\n<p>thanks</p>\n"}, {"tags": ["python", "list", "encode"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 3822222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TjYmo.jpg?s=128&g=1", "display_name": "reality stilts", "link": "https://stackoverflow.com/users/3822222/reality-stilts"}, "edited": false, "score": 0, "creation_date": 1545858407, "post_id": 53937072, "comment_id": 94714326, "body": "Thank you, I appreciate the explanation.  The list comprehension feels more concise which appeals to me as a better way"}], "tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": true, "score": 1, "last_activity_date": 1545858256, "last_edit_date": 1545858256, "creation_date": 1545857687, "answer_id": 53937072, "question_id": 53936939, "link": "https://stackoverflow.com/questions/53936939/python-encode-strings-within-a-list-of-lists/53937072#53937072", "title": "Python, encode strings within a list of lists", "body": "<p>Having realized that your first code is not actually a typographical error but a logical mistake, let me summarize my comments here. There are two problems (both related) in your approaches:</p>\n\n<p><strong>Problem with the first code</strong>: You are currently returning only the first sublist because you put the return in your for loop. Your input list contains sublists so you need to loop over them in a nested manner. One way is to do it as you are doing in your second approach. Another way is to use list comprehensions. Following is the list comprehension way where <code>i</code> will iterate through the sublists and <code>x</code> will iterate through the elements of your sublist <code>i</code>.</p>\n\n<pre><code>def testEncode(a):\n    return [[x.encode('utf-8') for x in i] for i in a]\n</code></pre>\n\n<p><strong>Problem with the second code</strong>: In this attempt of yours, you have basically solved the problem of ignoring the sublists <strong>but</strong> you forgot to put your <code>return</code> statement <em>outside</em> the for loop. So before your nested for loop iterate through all the sublists, you prematurely return the result. Therefore, you only see the first sublist modified.</p>\n\n<pre><code>def testEncode(a):\n    b = []\n    for list in a:\n        b.append([x.encode('utf-8') for x in list])\n    return b # &lt;-- Moved outside the for loop now\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 3822222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TjYmo.jpg?s=128&g=1", "display_name": "reality stilts", "link": "https://stackoverflow.com/users/3822222/reality-stilts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1742, "favorite_count": 0, "accepted_answer_id": 53937072, "answer_count": 1, "score": 0, "last_activity_date": 1545858256, "creation_date": 1545856812, "question_id": 53936939, "link": "https://stackoverflow.com/questions/53936939/python-encode-strings-within-a-list-of-lists", "title": "Python, encode strings within a list of lists", "body": "<p>Am using Python 2.7.</p>\n\n<p>I have a list of lists like:</p>\n\n<pre><code>testList2 = [[u'462', u'San Germ\\xe1n, PR'],[u'461', u'40341']]\n</code></pre>\n\n<p>I want to encode the strings in the list of lists like:</p>\n\n<pre><code>encodedList = [['462', 'San Germ\\xc3\\xa1n, PR'],['461', '40341']]\n</code></pre>\n\n<p>Tried to write a function to do this (did not work):</p>\n\n<pre><code>def testEncode(a):\n  for list in a:\n    return [x.encode('utf-8') for x in list]\n</code></pre>\n\n<p>I think that for the function to work, it needs to append each encoded list to the prior encoded list to generate an encoded list of lists.  Not sure how to do this.  If someone could explain how the function could be edited to do this, that would be awesome.</p>\n\n<p>I tried the following which did not work either</p>\n\n<pre><code>def testEncode(a):\n  b = []\n  for list in a:\n    b.append([x.encode('utf-8') for x in list])\n    return b\n</code></pre>\n"}, {"tags": ["python", "data-structures", "linked-list"], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 1330614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f6f13f39a590a6f2fb61c82724bc34b?s=128&d=identicon&r=PG", "display_name": "user1330614", "link": "https://stackoverflow.com/users/1330614/user1330614"}, "is_accepted": false, "score": 0, "last_activity_date": 1545858305, "creation_date": 1545858305, "answer_id": 53937152, "question_id": 53936903, "link": "https://stackoverflow.com/questions/53936903/merging-two-sorted-linked-lists-python/53937152#53937152", "title": "merging two sorted linked lists python", "body": "<p>taken from the accepted solution <a href=\"https://stackoverflow.com/questions/22507197/merging-two-sorted-linked-lists-into-one-linked-list-in-python\">here</a> this algorithm fixes yours:</p>\n\n<pre><code>def merge_lists(head1, head2):\nif head1 is None:\n    return head2\nif head2 is None:\n    return head1\n\n# create dummy node to avoid additional checks in loop\ns = t = node() \nwhile not (head1 is None or head2 is None):\n    if head1.value &lt; head2.value:\n        # remember current low-node\n        c = head1\n        # follow -&gt;next\n        head1 = head1.next\n    else:\n        # remember current low-node\n        c = head2\n        # follow -&gt;next\n        head2 = head2.next\n\n    # only mutate the node AFTER we have followed -&gt;next\n    t.next = c          \n    # and make sure we also advance the temp\n    t = t.next\n\nt.next = head1 or head2\n\n# return tail of dummy node\nreturn s.next\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 483, "user_id": 2584325, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3f45529aa8b723b760d2fa75cd4eb05c?s=128&d=identicon&r=PG", "display_name": "hmaxx", "link": "https://stackoverflow.com/users/2584325/hmaxx"}, "is_accepted": false, "score": 0, "last_activity_date": 1545859177, "creation_date": 1545859177, "answer_id": 53937282, "question_id": 53936903, "link": "https://stackoverflow.com/questions/53936903/merging-two-sorted-linked-lists-python/53937282#53937282", "title": "merging two sorted linked lists python", "body": "<p>I was missing checks on corner cases, here is a fix:</p>\n\n<pre><code>def merge(self,l1,l2):\n    if l1.val &lt; l2.val:\n        current = l1\n        l2 = l2\n    else:\n        current = l2\n        l2 = l1\n    while(current != None):\n        if current.next == None and l2 != None:\n            current.next = l2\n            l2 = None\n\n        elif current.next != None and l2 != None and current.next.val &gt; l2.val:\n            temp = current.next\n            current.next = l2\n            l2 = temp\n        current = current.next\n</code></pre>\n"}], "owner": {"reputation": 483, "user_id": 2584325, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3f45529aa8b723b760d2fa75cd4eb05c?s=128&d=identicon&r=PG", "display_name": "hmaxx", "link": "https://stackoverflow.com/users/2584325/hmaxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 556, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1545859177, "creation_date": 1545856558, "last_edit_date": 1545856981, "question_id": 53936903, "link": "https://stackoverflow.com/questions/53936903/merging-two-sorted-linked-lists-python", "title": "merging two sorted linked lists python", "body": "<p>I have implemented a function to merge sorted linked lists but the last node isn't merging. if I set current.next to l2, I'm getting infinite loop. if I remove that it works but without the last node attached to the new list. What am I doing wrong?</p>\n\n<pre><code>def merge(self,l1,l2):\n    if l1.val &lt; l2.val:\n        current = l1\n        l2 = l2\n    else:\n        current = l2\n        l2 = l1\n    while(current != None):\n        if current.next == None and l2 != None:\n            #current.next = l2 infinite loop if I include this\n        elif current.next.val &gt; l2.val:\n            temp = current.next\n            current.next = l2\n            l2 = temp\n        current = current.next\n\n    self.printList(current) \n</code></pre>\n\n<p>List1: <code>5 7 16</code></p>\n\n<p>list2: <code>2 4 6 8 10</code></p>\n\n<p>Expected <code>2 4 5 6 7 8 10 16</code>, Current Result <code>2 4 5 6 7 8 10</code> </p>\n"}, {"tags": ["python", "sublimetext3", "sublimetext"], "comments": [{"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 2, "creation_date": 1545887577, "post_id": 53936894, "comment_id": 94719476, "body": "Sublime shells out to the external <code>python</code> command to run your code and times how long it takes the command to run. As such, a long execution time isn&#39;t necessarily related to Sublime per se unless things like typing appearing also seem to take an extreme amount of time. That said, your question includes the output twice; did you mean to include something different the second time?"}, {"owner": {"reputation": 1038, "user_id": 6303377, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bo2YM.jpg?s=128&g=1", "display_name": "Dominique Paul", "link": "https://stackoverflow.com/users/6303377/dominique-paul"}, "reply_to_user": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 0, "creation_date": 1545901920, "post_id": 53936894, "comment_id": 94723768, "body": "@OdatNurd Thanks for your reply. So youre saying that it should be taking approximately as long as if I&#39;d be running it with &#39;python3 myapp.py&#39; in the terminal? Also, thanks for your attentiveness. I replaced the second chunk of code by the originally intended snippet"}, {"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 2, "creation_date": 1545967729, "post_id": 53936894, "comment_id": 94745068, "body": "More or less, yes; behind the scenes Sublime is using the Python <code>subprocess.Popen()</code> call to run the program and capture the output, so there may be a bit of time spent by the OS in starting a new process, but otherwise everything happens outside of Sublime. Possibly the process takes less time to run and finish than it takes Sublime to notice that it&#39;s completed, but you&#39;d notice it already being finished and not telling you the time in that case."}], "answers": [{"tags": [], "owner": {"reputation": 1038, "user_id": 6303377, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bo2YM.jpg?s=128&g=1", "display_name": "Dominique Paul", "link": "https://stackoverflow.com/users/6303377/dominique-paul"}, "is_accepted": true, "score": 3, "last_activity_date": 1547122678, "creation_date": 1547122678, "answer_id": 54128565, "question_id": 53936894, "link": "https://stackoverflow.com/questions/53936894/sublime-text-working-very-slow-on-execution/54128565#54128565", "title": "Sublime Text working very slow on execution", "body": "<p><strong>I eventually found the cause of / solution to my problem and am going to answer my own question in case somebody else might have the same problem:</strong></p>\n\n<p>My .bash_profile file contained the following snippet of code which seemed to have been added by the Anaconda installer at some point:</p>\n\n<pre><code># added by Anaconda3 5.3.0 installer\n# &gt;&gt;&gt; conda init &gt;&gt;&gt;\n# !! Contents within this block are managed by 'conda init' !!\n__conda_setup=\"$(CONDA_REPORT_ERRORS=false '/anaconda3/bin/conda' shell.bash hook 2&gt; /dev/null)\"\nif [ $? -eq 0 ]; then\n    \\eval \"$__conda_setup\"\nelse\n    if [ -f \"/anaconda3/etc/profile.d/conda.sh\" ]; then\n        . \"/anaconda3/etc/profile.d/conda.sh\"\n        CONDA_CHANGEPS1=false conda activate base\n    else\n        \\export PATH=\"/anaconda3/bin:$PATH\"\n    fi\nfi\nunset __conda_setup\n# &lt;&lt;&lt; conda init &lt;&lt;&lt;\n</code></pre>\n\n<p>It seems that this code was being executed every time I started my terminal and causing a waiting time of around 5-12 seconds which was quite annoying. I tried removing it and now my terminal would boot immediately. Also, <strong>Sublime now executed much faster after this change</strong> (the speed you would normally expect). </p>\n\n<p>It seems that sublime boots an instance of the terminal within the editor, while atom (which was not affected by the anaconda code in .bash_profile causing the slow down) seems to be doing something different.</p>\n\n<p>I was now facing the issue though that I couldnt call conda in the terminal. I was able to fix this by adding the line: </p>\n\n<pre><code>export PATH=\"/anaconda3/bin:$PATH\"\n</code></pre>\n\n<p>to my .bash_profile file. This resolved the latter issue. </p>\n"}], "owner": {"reputation": 1038, "user_id": 6303377, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bo2YM.jpg?s=128&g=1", "display_name": "Dominique Paul", "link": "https://stackoverflow.com/users/6303377/dominique-paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3011, "favorite_count": 3, "accepted_answer_id": 54128565, "answer_count": 1, "score": 4, "last_activity_date": 1547122678, "creation_date": 1545856500, "last_edit_date": 1545901800, "question_id": 53936894, "link": "https://stackoverflow.com/questions/53936894/sublime-text-working-very-slow-on-execution", "title": "Sublime Text working very slow on execution", "body": "<p>My Sublime Text editor is running very slow, which is causing some problems when working on tasks that involve a lot of iteration. </p>\n\n<p>When I run the following line in the editor:</p>\n\n<pre><code>print(\"Hello World\")\n</code></pre>\n\n<p>I receive: </p>\n\n<pre><code>hello world\n[Finished in 7.3s]\n</code></pre>\n\n<p>I am very surprised that Sublime needs 7.3 seconds to run the code. When running the same script in Atom it takes me 0.083 seconds. </p>\n\n<p>This my code I have entered in my Settings. I don't think there is any connection, but I am including it just for completeness and should I maybe be overlooking something</p>\n\n<pre><code>{\n    \"font_size\": 12,\n    \"ignored_packages\":\n    [\n        \"Package Control\",\n        \"Vintage\"\n    ]\n}\n</code></pre>\n\n<p>What might be causing this slow-down and how could I speed this up? </p>\n"}, {"tags": ["python", "pandas", "dataframe", "filtering"], "answers": [{"tags": [], "owner": {"reputation": 4301, "user_id": 10749432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wviv6.png?s=128&g=1", "display_name": "trsvchn", "link": "https://stackoverflow.com/users/10749432/trsvchn"}, "is_accepted": true, "score": 0, "last_activity_date": 1545856587, "creation_date": 1545856587, "answer_id": 53936908, "question_id": 53936862, "link": "https://stackoverflow.com/questions/53936862/how-to-drop-columns-from-a-dataframe-that-contain-specific-values-in-any-row/53936908#53936908", "title": "How to drop columns from a dataframe that contain specific values in any row", "body": "<p>Try this:</p>\n\n<p>Code:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'A': [1, 1, 1], 'B': [1, 0, 1]})\nfor col in df.columns:\n    if 0 in df[col].tolist():\n        df = df.drop(columns=col)\ndf\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 934, "user_id": 803002, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1573ae0a649448af992373870cbe44a?s=128&d=identicon&r=PG", "display_name": "Fredrik Erlandsson", "link": "https://stackoverflow.com/users/803002/fredrik-erlandsson"}, "edited": false, "score": 0, "creation_date": 1558029595, "post_id": 53936954, "comment_id": 98974910, "body": "<code>df.applymap(lambda x: x if x == 1 else np.nan).dropna(axis=1)</code> is easier to read and about half the time with timeit."}, {"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "reply_to_user": {"reputation": 934, "user_id": 803002, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b1573ae0a649448af992373870cbe44a?s=128&d=identicon&r=PG", "display_name": "Fredrik Erlandsson", "link": "https://stackoverflow.com/users/803002/fredrik-erlandsson"}, "edited": false, "score": 0, "creation_date": 1558033612, "post_id": 53936954, "comment_id": 98976817, "body": "Try with a larger dataframe @fredrik  Keep in mind that apply and applymap are just python level loops, which will make your solution scale much worse for larger dataframes"}], "tags": [], "owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "is_accepted": false, "score": 4, "last_activity_date": 1545857287, "last_edit_date": 1545857287, "creation_date": 1545856916, "answer_id": 53936954, "question_id": 53936862, "link": "https://stackoverflow.com/questions/53936862/how-to-drop-columns-from-a-dataframe-that-contain-specific-values-in-any-row/53936954#53936954", "title": "How to drop columns from a dataframe that contain specific values in any row", "body": "<p>You can use <code>.loc</code> to slice the dataframe and perform boolean indexation on the columns, checking which have <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.any.html\" rel=\"nofollow noreferrer\"><code>any</code></a> <code>0</code> in them:</p>\n\n<pre><code>df.loc[:,~(df==0).any()]\n\n   C  E  G  H\n0  1  1  1  1\n1  1  1  1  1\n</code></pre>\n\n<p>Or equivalently you can do:</p>\n\n<pre><code>df.loc[:,(df!=0).all()]\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3990291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/101c3dfc8778539655cee97c9649a73f?s=128&d=identicon&r=PG&f=1", "display_name": "Novice052", "link": "https://stackoverflow.com/users/3990291/novice052"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1226, "favorite_count": 0, "accepted_answer_id": 53936908, "answer_count": 2, "score": 2, "last_activity_date": 1545859181, "creation_date": 1545856345, "last_edit_date": 1545859181, "question_id": 53936862, "link": "https://stackoverflow.com/questions/53936862/how-to-drop-columns-from-a-dataframe-that-contain-specific-values-in-any-row", "title": "How to drop columns from a dataframe that contain specific values in any row", "body": "<p>In a pandas dataframe, I need to find columns that contain a zero in any row, and drop that whole column.</p>\n\n<p>For example, if my dataframe looks like this:</p>\n\n<pre><code>   A  B  C  D  E  F  G  H\n0  1  0  1  0  1  1  1  1\n1  0  1  1  1  1  0  1  1\n</code></pre>\n\n<p>I need to drop columns A, B, D, and F.  I know how to drop the columns, but identifying the ones with zeros programmatically is eluding me.</p>\n"}, {"tags": ["python", "numpy", "optimization", "scipy"], "answers": [{"tags": [], "owner": {"reputation": 3541, "user_id": 5625497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f200aaa56fa9cba9baa9170c514fb125?s=128&d=identicon&r=PG&f=1", "display_name": "Mstaino", "link": "https://stackoverflow.com/users/5625497/mstaino"}, "is_accepted": true, "score": 1, "last_activity_date": 1546456570, "last_edit_date": 1592644375, "creation_date": 1546456570, "answer_id": 54011959, "question_id": 53936777, "link": "https://stackoverflow.com/questions/53936777/scipy-optimize-minimize-cannot-use-2d-or-scalar-bounds/54011959#54011959", "title": "scipy.optimize.minimize cannot use 2D or scalar bounds", "body": "<p>From the <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html\" rel=\"nofollow noreferrer\">docs</a></p>\n<blockquote>\n<p>x0 : ndarray, <strong>shape (n,)</strong></p>\n<p>Initial guess. Array of real elements of size (n,), where \u2018n\u2019 is the number of independent variables.</p>\n</blockquote>\n<p>So apparently yes, only 1D arrays are accepted as inputs</p>\n"}], "owner": {"reputation": 1824, "user_id": 8704463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8fbfeed2e9c309c1c5d030eb9fe75707?s=128&d=identicon&r=PG&f=1", "display_name": "R zu", "link": "https://stackoverflow.com/users/8704463/r-zu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 54011959, "answer_count": 1, "score": 0, "last_activity_date": 1546456570, "creation_date": 1545855873, "last_edit_date": 1545857094, "question_id": 53936777, "link": "https://stackoverflow.com/questions/53936777/scipy-optimize-minimize-cannot-use-2d-or-scalar-bounds", "title": "scipy.optimize.minimize cannot use 2D or scalar bounds", "body": "<p><strong>Problem</strong></p>\n\n<p>I guess <code>scipy.optimize.minimize</code> cannot use 2D bounds.</p>\n\n<p>I can work around the problem by:</p>\n\n<ol>\n<li>reshape input to <code>minimize</code> to 1D arrays</li>\n<li>reshape the arrays back to 2D within the objective function.</li>\n</ol>\n\n<p>But that is tedious.</p>\n\n<p>Did I do something wrong? Or <code>minimize</code> really cannot use 2D bounds?</p>\n\n<p>The variables should be all between 0 and 1 in my case. </p>\n\n<p>Thanks.</p>\n\n<p><strong>Doc</strong></p>\n\n<p>The <a href=\"https://docs.scipy.org/doc/scipy-1.1.0/reference/generated/scipy.optimize.Bounds.html#scipy.optimize.Bounds\" rel=\"nofollow noreferrer\">doc</a> for version 1.1.0 says bounds can be an array:</p>\n\n<blockquote>\n  <p><strong>scipy.optimize.Bounds</strong></p>\n  \n  <p>...</p>\n  \n  <p>Parameters:   </p>\n  \n  <p>lb, ub : array_like, optional</p>\n  \n  <p>Lower and upper bounds on independent variables. <em>Each array must have \n  the same size as x or be a scalar</em>, in which case a bound will be\n  the same for all the variables.\n  ...</p>\n</blockquote>\n\n<p><strong>Versions</strong></p>\n\n<ul>\n<li>Python 3.6.2 |Anaconda custom (64-bit)</li>\n<li>numpy: 1.14.2 in anaconda</li>\n<li>scipy: 1.1.0 in anaconda</li>\n</ul>\n\n<p><strong>Test</strong></p>\n\n<pre><code>import numpy as np\nimport scipy\nimport scipy.optimize as opt \n\n\ndef obj(x):\n    return x.sum()\n\n\ndef main():\n    x = np.ones((3, 4)) \n    bounds = opt.Bounds(np.zeros(x.shape), \n                        np.ones(x.shape))\n    r = opt.minimize(obj, x, bounds=bounds)\n    print(r)\n\n\nmain()\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<pre><code>Traceback (most recent call last):\n  File \"scipy_bounds.py\", line 16, in &lt;module&gt;\n    main()\n  File \"scipy_bounds.py\", line 12, in main\n    r = opt.minimize(obj, x, bounds=bounds)\n  File \"&lt;...&gt;/site-packages/scipy/optimize/_minimize.py\", line 584, in minimize\n    bounds = new_bounds_to_old(bounds.lb, bounds.ub, x0.shape[0])\n  File \"&lt;...&gt;/site-packages/scipy/optimize/_constraints.py\", line 259, in new_bounds_to_old\n    lb = [x if x &gt; -np.inf else None for x in lb]\n  File \"&lt;...&gt;/site-packages/scipy/optimize/_constraints.py\", line 259, in &lt;listcomp&gt;\n    lb = [x if x &gt; -np.inf else None for x in lb]\nValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\n</code></pre>\n\n<p>I found that <code>minimize</code> doesn't let me use scalar bounds too. </p>\n\n<p>I get <code>'length of x0 != length of bounds'</code>.</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 2239, "user_id": 5400362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afc3721db0d3d78c446c6ae3f2b99737?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/5400362/dev"}, "edited": false, "score": 0, "creation_date": 1545860563, "post_id": 53936756, "comment_id": 94714942, "body": "try to use  <code>browser.find_element_by_xpath(&quot;&#47;&#47;button[text()=&quot;Copy to clipboard&quot;]&quot;)</code>"}, {"owner": {"reputation": 109, "user_id": 10736837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720eededd5eceb90fecdc79e7273dca6?s=128&d=identicon&r=PG&f=1", "display_name": "mexitaw", "link": "https://stackoverflow.com/users/10736837/mexitaw"}, "reply_to_user": {"reputation": 2239, "user_id": 5400362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afc3721db0d3d78c446c6ae3f2b99737?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/5400362/dev"}, "edited": false, "score": 0, "creation_date": 1545861455, "post_id": 53936756, "comment_id": 94715225, "body": "I get <code>selenium.common.exceptions.NoSuchElementException: Message: no such element: Unable to locate element: {&quot;method&quot;:&quot;xpath&quot;,&quot;selector&quot;:&quot;&#47;&#47;button[text()=&#39;Copy to clipboard&#39;]&quot;}</code>"}, {"owner": {"reputation": 109, "user_id": 10736837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720eededd5eceb90fecdc79e7273dca6?s=128&d=identicon&r=PG&f=1", "display_name": "mexitaw", "link": "https://stackoverflow.com/users/10736837/mexitaw"}, "reply_to_user": {"reputation": 2239, "user_id": 5400362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afc3721db0d3d78c446c6ae3f2b99737?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/5400362/dev"}, "edited": false, "score": 0, "creation_date": 1545861539, "post_id": 53936756, "comment_id": 94715250, "body": "This is the XPath <code>&#47;&#47;*[@id=&quot;copyBtn&quot;]</code> and yet I get the same error"}, {"owner": {"reputation": 2239, "user_id": 5400362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afc3721db0d3d78c446c6ae3f2b99737?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/5400362/dev"}, "edited": false, "score": 0, "creation_date": 1545864748, "post_id": 53936756, "comment_id": 94715952, "body": "I tried your code you just need some modifications take a look at my answer"}, {"owner": {"reputation": 109, "user_id": 10736837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720eededd5eceb90fecdc79e7273dca6?s=128&d=identicon&r=PG&f=1", "display_name": "mexitaw", "link": "https://stackoverflow.com/users/10736837/mexitaw"}, "reply_to_user": {"reputation": 2239, "user_id": 5400362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afc3721db0d3d78c446c6ae3f2b99737?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/5400362/dev"}, "edited": false, "score": 0, "creation_date": 1545875427, "post_id": 53936756, "comment_id": 94717578, "body": "worked like a charm!"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 10736837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720eededd5eceb90fecdc79e7273dca6?s=128&d=identicon&r=PG&f=1", "display_name": "mexitaw", "link": "https://stackoverflow.com/users/10736837/mexitaw"}, "edited": false, "score": 0, "creation_date": 1545874651, "post_id": 53937961, "comment_id": 94717496, "body": "Thanks so much for your help! I couldn&#39;t find it because of the <code>Shadow Content (User Agent)</code> line. Your code <b>really</b> helped me understand why."}, {"owner": {"reputation": 15697, "user_id": 458214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef09f4a6e7e0803825d17212d2dba67?s=128&d=identicon&r=PG", "display_name": "ewwink", "link": "https://stackoverflow.com/users/458214/ewwink"}, "reply_to_user": {"reputation": 109, "user_id": 10736837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720eededd5eceb90fecdc79e7273dca6?s=128&d=identicon&r=PG&f=1", "display_name": "mexitaw", "link": "https://stackoverflow.com/users/10736837/mexitaw"}, "edited": false, "score": 0, "creation_date": 1545882731, "post_id": 53937961, "comment_id": 94718644, "body": "you&#39;re welcome. It not Shadow Content or <code>#shadow-root</code> it just dynamically generated."}, {"owner": {"reputation": 109, "user_id": 10736837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720eededd5eceb90fecdc79e7273dca6?s=128&d=identicon&r=PG&f=1", "display_name": "mexitaw", "link": "https://stackoverflow.com/users/10736837/mexitaw"}, "edited": false, "score": 0, "creation_date": 1545882988, "post_id": 53937961, "comment_id": 94718683, "body": "True, btw in <code>https:&#47;&#47;www.all-hashtag.com&#47;hashtag-generator.php</code>, what would you use to <code>get_attribute</code> from a result?"}, {"owner": {"reputation": 109, "user_id": 10736837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720eededd5eceb90fecdc79e7273dca6?s=128&d=identicon&r=PG&f=1", "display_name": "mexitaw", "link": "https://stackoverflow.com/users/10736837/mexitaw"}, "edited": false, "score": 0, "creation_date": 1545883182, "post_id": 53937961, "comment_id": 94718711, "body": "From <code>&lt;div id=&quot;copy-hashtags&quot; class=&quot;copy-hashtags&quot;&gt;</code> I tried <code>hashtag.get_attribute(&#39;copy-hashtsags&#39;)</code>"}, {"owner": {"reputation": 15697, "user_id": 458214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef09f4a6e7e0803825d17212d2dba67?s=128&d=identicon&r=PG", "display_name": "ewwink", "link": "https://stackoverflow.com/users/458214/ewwink"}, "reply_to_user": {"reputation": 109, "user_id": 10736837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720eededd5eceb90fecdc79e7273dca6?s=128&d=identicon&r=PG&f=1", "display_name": "mexitaw", "link": "https://stackoverflow.com/users/10736837/mexitaw"}, "edited": false, "score": 0, "creation_date": 1545883278, "post_id": 53937961, "comment_id": 94718731, "body": "<code>get_attribute(&#39;textContent&#39;)</code> or <code>get_attribute(&#39;innerHTML&#39;)</code> or just <code>hashtag.text</code>"}], "tags": [], "owner": {"reputation": 15697, "user_id": 458214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef09f4a6e7e0803825d17212d2dba67?s=128&d=identicon&r=PG", "display_name": "ewwink", "link": "https://stackoverflow.com/users/458214/ewwink"}, "is_accepted": true, "score": 1, "last_activity_date": 1545864502, "creation_date": 1545864502, "answer_id": 53937961, "question_id": 53936756, "link": "https://stackoverflow.com/questions/53936756/button-to-clipboard-in-selenium/53937961#53937961", "title": "Button to clipboard in Selenium", "body": "<p>You don't need to click the button just get textarea <code>value</code> but It need to wait until the <code>textarea</code> located.</p>\n\n<pre><code>element.send_keys('love')\nelement.send_keys(Keys.ENTER)\n# wait until hashtags generated\nhashtags = wait(browser, delay).until(EC.presence_of_element_located((By.ID, 'hashtag_textarea')))\nprint(hashtags.get_attribute('value'))\nprint('Page is ready!')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2239, "user_id": 5400362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afc3721db0d3d78c446c6ae3f2b99737?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/5400362/dev"}, "is_accepted": false, "score": 1, "last_activity_date": 1545865152, "creation_date": 1545865152, "answer_id": 53938031, "question_id": 53936756, "link": "https://stackoverflow.com/questions/53936756/button-to-clipboard-in-selenium/53938031#53938031", "title": "Button to clipboard in Selenium", "body": "<p>after inputing value in textbox page refreshed and it takes some amount of time during that time your code tries to click on button which is not clickable or say not loaded in DOM. instead doing that wait for button until it becomes clickable check following code sample:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\nfrom selenium.webdriver.support.wait import WebDriverWait as wait\nfrom selenium.webdriver.common.by import By\nfrom selenium.common.exceptions import TimeoutException\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.support import expected_conditions as EC\n\nbrowser = webdriver.Chrome('C:\\Python27\\Scripts\\chromedriver')\nbrowser.get('https://seekmetrics.com/hashtag-generator')\ndelay = 15\nprint (\"Headless Chrome Initialized\")\nprint (\"\\n\")\n\ntry:\n    element = wait(browser, delay).until(EC.element_to_be_clickable((By.CLASS_NAME, 'el-input__inner')))\n    element.click()\n    element.send_keys('love')\n    element.send_keys(Keys.ENTER)\n    wait(browser, delay)\n    button = wait(browser, delay).until(EC.element_to_be_clickable((By.XPATH, \"//button[text()='Copy to clipboard']\")))\n    button.click()\n    print('Page is ready!')\n    # print(hashtags.text)\n    # print (browser.page_source)\nexcept TimeoutException:\n    print(\"Loading took too much time!\")\n\nbrowser.quit()\n</code></pre>\n\n<p>hope this helps you..</p>\n"}], "owner": {"reputation": 109, "user_id": 10736837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720eededd5eceb90fecdc79e7273dca6?s=128&d=identicon&r=PG&f=1", "display_name": "mexitaw", "link": "https://stackoverflow.com/users/10736837/mexitaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 841, "favorite_count": 0, "accepted_answer_id": 53937961, "answer_count": 2, "score": 1, "last_activity_date": 1545865152, "creation_date": 1545855723, "last_edit_date": 1545858470, "question_id": 53936756, "link": "https://stackoverflow.com/questions/53936756/button-to-clipboard-in-selenium", "title": "Button to clipboard in Selenium", "body": "<p>I am looking to scrape <code>hashtags</code> generated from a site using Selenium webdriver. Since the site is using <code>Shadow Content (User Agent)</code> I decided to just copy the <code>hashtags</code> using the button already in the site that copies them into my clipboard. However, I am failing to locate the <code>&lt;button&gt;</code></p>\n\n<p>This is the HTML</p>\n\n<p><code>&lt;button type=\"button\" id=\"copyBtn\" data-clipboard-target=\"#hashtag_textarea\" class=\"btn btn-success\"&gt;Copy to clipboard&lt;/button&gt;</code></p>\n\n<p>How is it that Selenium can't find the button. What am I doing wrong.</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\nfrom selenium.webdriver.support.wait import WebDriverWait as wait\nfrom selenium.webdriver.common.by import By\nfrom selenium.common.exceptions import TimeoutException\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.support import expected_conditions as EC\n\nbrowser = webdriver.Chrome('/Users/user/Documents/docs/chromedriver')\nbrowser.get('https://seekmetrics.com/hashtag-generator')\ndelay = 15\nprint (\"Headless Chrome Initialized\")\nprint (\"\\n\")\n\ntry:\n    element = wait(browser, delay).until(EC.element_to_be_clickable((By.CLASS_NAME, 'el-input__inner')))\n    element.click()\n    element.send_keys('love')\n    element.send_keys(Keys.ENTER)\n    wait(browser, delay)\n    browser.find_element_by_id('copyBtn').click()\n    print('Page is ready!')\n    # print(hashtags.text)\n    # print (browser.page_source)\nexcept TimeoutException:\n    print(\"Loading took too much time!\")\n\nbrowser.quit()\n</code></pre>\n"}, {"tags": ["python", "import"], "answers": [{"tags": [], "owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "is_accepted": false, "score": 1, "last_activity_date": 1545855989, "creation_date": 1545855989, "answer_id": 53936794, "question_id": 53936755, "link": "https://stackoverflow.com/questions/53936755/how-to-display-content-of-variables-of-file1-to-file2-in-python/53936794#53936794", "title": "how to display content of variables of file1 to file2 in python", "body": "<p>in <code>file1</code> you have <code>if __name__ == '__main__':</code> but since <code>file1</code> is imported, that's not true in this case.  Perhaps something like this for <code>file</code> would be more appropriate:</p>\n\n<pre><code>list1 = ['a','b']\np = 123\nif __name__ == '__main__':\n    print list1\n    print p\n</code></pre>\n\n<p>It seems that in your case the <code>print</code> statements are only there for debugging in the case that <code>file1</code> is invoked directly.  But <code>list1</code> and <code>p</code> must be defined to be imported, in which case the <code>print</code> statements probably aren't supposed to run (I'd assume from your code).</p>\n"}, {"tags": [], "owner": {"reputation": 110, "user_id": 8612463, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aT4ph3LSu-0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdI5pVINYwli4eI0-KAWaxv1SxxZg/photo.jpg?sz=128", "display_name": "deleted name", "link": "https://stackoverflow.com/users/8612463/deleted-name"}, "is_accepted": false, "score": 0, "last_activity_date": 1545856104, "creation_date": 1545856104, "answer_id": 53936817, "question_id": 53936755, "link": "https://stackoverflow.com/questions/53936755/how-to-display-content-of-variables-of-file1-to-file2-in-python/53936817#53936817", "title": "how to display content of variables of file1 to file2 in python", "body": "<p>Just remove the if statement:</p>\n\n<p>file1.py:</p>\n\n<pre><code>list1 = ['a','b']\np = 123\n</code></pre>\n\n<p>file2.py:</p>\n\n<pre><code>from file1 import list1,p\nprint(list1) #output: ['a', 'b']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 9196061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vg-UkvHf16Q/AAAAAAAAAAI/AAAAAAAAEtA/4KCivju-6C4/photo.jpg?sz=128", "display_name": "Gabriel Wolf", "link": "https://stackoverflow.com/users/9196061/gabriel-wolf"}, "is_accepted": false, "score": 0, "last_activity_date": 1545857097, "creation_date": 1545857097, "answer_id": 53936986, "question_id": 53936755, "link": "https://stackoverflow.com/questions/53936755/how-to-display-content-of-variables-of-file1-to-file2-in-python/53936986#53936986", "title": "how to display content of variables of file1 to file2 in python", "body": "<p>I would make your list1 and p functions instead of just variables (see below):</p>\n\n<p><strong>file1.py</strong></p>\n\n<pre><code>if __name__ == '__main__':\n    list1 = ['a','b']\n    p = 123\n    print(list1)\n    print(p)\n\ndef list1():\n    list1 = ['a','b']\n    print(list1)\n\ndef p():\n    p = 123\n    print(p)\n</code></pre>\n\n<p>And then in your second file call them like so:</p>\n\n<p><strong>file2.py</strong></p>\n\n<pre><code>from file1 import *\nif __name__ == '__main__':\n    list2 = ['p','q']\n    pb = 321\n    print(list2)\n    print(pb)\n    list1()\n    p()\n</code></pre>\n\n<p>You could also more simply just do this instead:</p>\n\n<pre><code>list1 = ['a','b']\np = 123\nif __name__ == '__main__':\n    print(list1)\n    print(p)\n</code></pre>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 506, "user_id": 2126661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t9T8p.jpg?s=128&g=1", "display_name": "Rishabh Mishra", "link": "https://stackoverflow.com/users/2126661/rishabh-mishra"}, "is_accepted": true, "score": 0, "last_activity_date": 1545857460, "creation_date": 1545857460, "answer_id": 53937031, "question_id": 53936755, "link": "https://stackoverflow.com/questions/53936755/how-to-display-content-of-variables-of-file1-to-file2-in-python/53937031#53937031", "title": "how to display content of variables of file1 to file2 in python", "body": "<p>In file1, instead of having <strong><code>if __name__ == '__main__'</code></strong> you should use <strong><code>if __name__ == 'file1'</code></strong>. This is because when you are importing this file in file2, the <code>__name__</code> of file1 is <strong>not</strong> <code>__main__</code> instead it is the name of the file which is <strong><code>file1</code></strong>.</p>\n\n<p>So, having something like this will help:</p>\n\n<p>file1:</p>\n\n<pre><code>if __name__ == 'file1':\n    list1 = ['a','b']\n    p = 123\n    print(list1)\n    print(p)\n</code></pre>\n\n<p>file2: </p>\n\n<pre><code>from file1 import list1,p\nif __name__ == '__main__':\n    list2 = ['p','q']\n    pb = 321\n    print(list2)\n    print(pb)\n    print(list1)\n    print(p)\n</code></pre>\n\n<p>Output, when running file2:</p>\n\n<pre><code>['a', 'b']\n123\n['p', 'q']\n321\n['a', 'b']\n123\n</code></pre>\n\n<p>You can remove the brackets from the print statements as I am using Python3 instead of Python2.</p>\n\n<p>But using <code>__name__ == 'file1'</code> is redundant in file1.</p>\n"}], "owner": {"reputation": 1, "user_id": 10455066, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mpPlRruTN-E/AAAAAAAAAAI/AAAAAAAAD7w/7DspgTe_qrQ/photo.jpg?sz=128", "display_name": "Pallavi Bachute", "link": "https://stackoverflow.com/users/10455066/pallavi-bachute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 53937031, "answer_count": 4, "score": 0, "last_activity_date": 1545861254, "creation_date": 1545855722, "last_edit_date": 1545861254, "question_id": 53936755, "link": "https://stackoverflow.com/questions/53936755/how-to-display-content-of-variables-of-file1-to-file2-in-python", "title": "how to display content of variables of file1 to file2 in python", "body": "<p>i want to display content of list of file1 to file 2 in python </p>\n\n<p>I am just providing a sample code in that file1 have a list and a variable. I just wanted to display content of that list in file2 by importing. the code is giving an error </p>\n\n<p>from file1 import list1,p</p>\n\n<p>ImportError: cannot import name list1</p>\n\n<p>my code is :</p>\n\n<p>file1:</p>\n\n<pre><code>if __name__ == '__main__':\n    list1 = ['a','b']\n    p = 123\n    print list1\n    print p\n</code></pre>\n\n<p>file2:</p>\n\n<pre><code>from file1 import list1,p\nif __name__ == '__main__':\n    list2 = ['p','q']\n    pb = 321\n    print list2\n    print pb\n    print list1\n    print p\n</code></pre>\n"}, {"tags": ["python", "windows", "numpy", "lambda", "serverless-framework"], "answers": [{"tags": [], "owner": {"reputation": 791, "user_id": 6421104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-KqoZR0M0BVw/AAAAAAAAAAI/AAAAAAAAAAA/kcCCfE65_Cg/photo.jpg?sz=128", "display_name": "launchpadmcquack", "link": "https://stackoverflow.com/users/6421104/launchpadmcquack"}, "is_accepted": false, "score": 3, "last_activity_date": 1546633096, "last_edit_date": 1546633096, "creation_date": 1546545140, "answer_id": 54028911, "question_id": 53936747, "link": "https://stackoverflow.com/questions/53936747/serverless-numpy-unable-to-find-good-bind-path-format/54028911#54028911", "title": "Serverless - Numpy - Unable to find good bind path format", "body": "<p>I was unable to make the plugin work but I found a better solution anyhow - Lambda Layers. This is a bonus because it reduces the size of the lambda and allows code/file reuse. There is a pre-built lambda layer for numpy and scipy that you can use, but I built my own to show myself how it all works.  Here's how I made it work:</p>\n\n<p>Create a layer package:</p>\n\n<ol>\n<li>Open an EC2 instance or Ubuntu or Linux or whatever - This is needed so we can compile the runtime binaries correctly</li>\n<li><p>Make a dependencies package zip - Must use the directory structure <code>python/lib/python3.6/site-packages</code> for python to find during runtime</p>\n\n<pre><code>mkdir -p tmpdir/python/lib/python3.6/site-packages \npip install -r requirements.txt --no-deps -t tmpdir/python/lib/python3.6/site-packages \ncd tmpdir zip -r ../py_dependencies.zip . \ncd .. \nrm -r tmpdir\n</code></pre></li>\n<li><p>Push layer zip to AWS - requires latest awscli</p>\n\n<pre><code>sudo pip install awscli --upgrade --user\nsudo aws lambda publish-layer-version\u00a0\\\n--layer-name py_dependencies \\\n--description \"Python 3.6 dependencies [numpy=0.15.4]\"\u00a0\\\n--license-info \"MIT\"\u00a0\\\n--compatible-runtimes python3.6\u00a0\\\n--zip-file fileb://py_dependencies.zip\u00a0\\\n--profile python_dev_serverless\n</code></pre></li>\n<li><p>To use in any function that requires numpy, just use the arn that is shown in the console or during the upload above</p>\n\n<pre><code>f1:\n  handler: index.handler_f_use_numpy\n  include:\n    - functions/f_use_numpy.py\n  layers:\n    - arn:aws:lambda:us-west-2:XXXXX:layer:py_dependencies:1\n</code></pre></li>\n<li><p>As an added bonus, you can push common files like constants to a layer as well.  Here's how I did it for testing use in windows and on the lambda:</p>\n\n<pre><code>import platform\n\n\\# Set common path\nCOMMON_PATH = \"../../layers/common/\"\nif platform.system() == \"Linux\": COMMON_PATH = \"/opt/common/\"\n\ndef handler_common(event, context):\n    # Read from a constants.json file\n    with open(COMMON_PATH + 'constants.json') as f:\n        return text = json.load(f)\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 6491810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f63f2b5bc6f9e4493fec26bf88a82891?s=128&d=identicon&r=PG&f=1", "display_name": "Amaioka", "link": "https://stackoverflow.com/users/6491810/amaioka"}, "is_accepted": false, "score": 0, "last_activity_date": 1551942425, "creation_date": 1551942425, "answer_id": 55037915, "question_id": 53936747, "link": "https://stackoverflow.com/questions/53936747/serverless-numpy-unable-to-find-good-bind-path-format/55037915#55037915", "title": "Serverless - Numpy - Unable to find good bind path format", "body": "<p>when I got the same issue, I opened docker went to settings/shared drive opted to reset credentials and after applied my changes and this cleared the error</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10668992, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-krWUbAIUcgM/AAAAAAAAAAI/AAAAAAAABZI/HU-Dyace8Is/photo.jpg?sz=128", "display_name": "EntropyMan", "link": "https://stackoverflow.com/users/10668992/entropyman"}, "is_accepted": false, "score": 0, "last_activity_date": 1578525811, "creation_date": 1578525811, "answer_id": 59655184, "question_id": 53936747, "link": "https://stackoverflow.com/questions/53936747/serverless-numpy-unable-to-find-good-bind-path-format/59655184#59655184", "title": "Serverless - Numpy - Unable to find good bind path format", "body": "<p>I fixed this issue by temporarily disabling Windows Firewall.</p>\n"}], "owner": {"reputation": 791, "user_id": 6421104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-KqoZR0M0BVw/AAAAAAAAAAI/AAAAAAAAAAA/kcCCfE65_Cg/photo.jpg?sz=128", "display_name": "launchpadmcquack", "link": "https://stackoverflow.com/users/6421104/launchpadmcquack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1154, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1578525811, "creation_date": 1545855644, "question_id": 53936747, "link": "https://stackoverflow.com/questions/53936747/serverless-numpy-unable-to-find-good-bind-path-format", "title": "Serverless - Numpy - Unable to find good bind path format", "body": "<p>I've been beating on this for over a week and been through all sorts of forum issues and posts and cannot resolve. I'm trying to package numpy in a function, individually building requirements (I have multiple functions with multiple requirements that I'd like to keep separate). </p>\n\n<p><strong>Environment</strong>:<br>\nWindows 10 Home  </p>\n\n<p><strong>Docker Toolbox for Windows</strong>:</p>\n\n<pre><code>Client:\nVersion:       18.03.0-ce\nAPI version:   1.37\nGo version:    go1.9.4\nGit commit:    0520e24302\n\n\nBuilt: Fri Mar 23 08:31:36 2018\n OS/Arch:       windows/amd64\n Experimental:  false\n Orchestrator:  swarm\n\nServer: Docker Engine - Community\n Engine:\n  Version:      18.09.0\n  API version:  1.39 (minimum version 1.12)\n  Go version:   go1.10.4\n  Git commit:   4d60db4\n  Built:        Wed Nov  7 00:52:55 2018\n  OS/Arch:      linux/amd64\n  Experimental: false\n</code></pre>\n\n<p><strong>Serverless Version</strong>:</p>\n\n<pre><code>serverless version 6.4.1\nserverless-python-requirements version 6.4.1\n</code></pre>\n\n<p><strong>Directory Structure</strong>:</p>\n\n<pre><code>|-test\n  |-env.yml\n  |-serverless.yml\n  |-Dockerfile\n  |-functions\n    |-f1\n      |-index.py\n      |-requirements.txt\n      |-sub_function_1.py\n      |-sub_function_2.py\n    |-f2\n      |-index.py\n      |-requirements.txt\n      |-sub_function_3.py\n      |-sub_function_4.py\n</code></pre>\n\n<p><strong>serverless.yml</strong></p>\n\n<pre><code>service: test \nplugins:\n  - serverless-python-requirements\ncustom:\n  pythonRequirements:\n    zip: true                  \n    dockerFile: Dockerfile      \n    dockerizePip: non-linux     \nprovider:\n  name: aws\n  runtime: python3.6\n  stage: dev\n  environment: ${file(./env.yml):${opt:stage, self:provider.stage}.env}\n  region: ${file(./env.yml):${opt:stage, self:provider.stage}.aws.region}\n  profile: ${file(./env.yml):${opt:stage, self:provider.stage}.aws.profile}\npackage:\n  individually: true\nfunctions:\n  f1:\n    handler:index.handler\n    module:functions/f1\n  f2:\n    handler:index.handleer\n    module:functions/f2\n</code></pre>\n\n<p>I have my project files in C:\\Serverless\\test. I run <code>npm init</code>, followed by <code>npm i --save serverless-python-requirements</code>, accepting all defaults. I get the following on <code>sls deploy -v</code>. even though I've added C:\\ to Shared Folders on the running default VM in VirtualBox, and selected auto-mount and permanent.</p>\n\n<p><img src=\"https://user-images.githubusercontent.com/24832609/50174470-811ddf00-02b7-11e9-9b46-208a0b395802.png\" alt=\"image\"></p>\n\n<p>If I comment out both dockerizePip and dockerFile I get the following as expected based on <a href=\"https://serverless.com/blog/serverless-python-packaging/\" rel=\"nofollow noreferrer\">here</a> and other SO posts:</p>\n\n<pre><code> Serverless: Invoke invoke\n{\n    \"errorMessage\": \"Unable to import module 'index'\"\n}\n</code></pre>\n\n<p>If I comment out dockerfile I get:</p>\n\n<pre><code>Serverless: Docker Image: lambci/lambda:build-python3.6\n\n      Error --------------------------------------------------\n\n    error during connect: Get https://XXXXXX/v1.37/version: dial tcp\n    XXXXXXXXXX: connectex: A connection attempt failed because the \n    connected party did not properly respond after a period of time, or\n    established connection failed because connected host has failed to \n    respond.\n\n    at dockerCommand (C:\\Serverless\\test\\node_modules\\serverless-python-requirements\\lib\\docker.js:20:11)\n    at getBindPath (C:\\Serverless\\test\\node_modules\\serverless-python-requirements\\lib\\docker.js:100:3)\n</code></pre>\n\n<p><strong>With Dockerfile</strong></p>\n\n<pre><code># AWS Lambda execution environment is based on Amazon Linux 1\nFROM amazonlinux:1\n\n# Install Python 3.6\nRUN yum -y install python36 python36-pip\n\n# Install your dependencies\nRUN curl -s https://bootstrap.pypa.io/get-pip.py | python3\nRUN yum -y install python3-devel mysql-devel gcc\n\n# Set the same WORKDIR as default image\nRUN mkdir /var/task\nWORKDIR /var/task\n</code></pre>\n\n<p>.</p>\n\n<pre><code>Serverless: Building custom docker image from Dockerfile...\nServerless: Docker Image: sls-py-reqs-custom\n\n  Error --------------------------------------------------\n\n  Unable to find good bind path format\n\n     For debugging logs, run again after setting the \"SLS_DEBUG=*\" environment variable.\n\n  Stack Trace --------------------------------------------\n\nError: Unable to find good bind path format\n    at getBindPath (C:\\Serverless\\test\\node_modules\\serverless-python-requirements\\lib\\docker.js:142:9)\n    at installRequirements (C:\\Serverless\\test\\node_modules\\serverless-python-requirements\\lib\\pip.js:152:7)\n    at installRequirementsIfNeeded (C:\\Serverless\\test\\node_modules\\serverless-python-requirements\\lib\\pip.js:451:3)\n</code></pre>\n\n<p>If I move my project to C:\\Users\\, I get this instead:</p>\n\n<pre><code>Serverless: Docker Image: sls-py-reqs-custom\nServerless: Trying bindPath /c/Users/Serverless/test/.serverless/requirements (run,--rm,-v,/c/Users/Serverless/test/.serverless/req\nuirements:/test,alpine,ls,/test/requirements.txt)\nServerless: /test/requirements.txt\n\n  Error --------------------------------------------------\n\n  docker: Error response from daemon: create \"/c/Users/Serverless/test/.serverless/requirements\": \"\\\"/c/Users/Serverless/test/.serv\nerless/requirements\\\"\" includes invalid characters for a local volume name, only \"[a-zA-Z0-9][a-zA-Z0-9_.-]\" are allowed. If you in\ntended to pass a host directory, use absolute path.\nSee 'docker run --help'.\n\n\n     For debugging logs, run again after setting the \"SLS_DEBUG=*\" environment variable.\n\n  Stack Trace --------------------------------------------\n\nError: docker: Error response from daemon: create \"/c/Users/Serverless/test/.serverless/requirements\": \"\\\"/c/Users/Serverless/test/\n.serverless/requirements\\\"\" includes invalid characters for a local volume name, only \"[a-zA-Z0-9][a-zA-Z0-9_.-]\" are allowed. If y\nou intended to pass a host directory, use absolute path.\nSee 'docker run --help'.\n\n    at dockerCommand (C:\\Users\\Serverless\\test\\node_modules\\serverless-python-requirements\\lib\\docker.js:20:11)\n    at getDockerUid (C:\\Users\\Serverless\\test\\node_modules\\serverless-python-requirements\\lib\\docker.js:162:14)\n</code></pre>\n\n<p>I've seen the Makefile style recommendation from @brianz <a href=\"http://blog.brianz.bz/post/structuring-serverless-applications-with-python/\" rel=\"nofollow noreferrer\">here</a>, but I'm not sure how to adapt that to this (Makefiles are not my strong suit). I'm a bit at a loss as to what to do next and advice would be greatly appreciated. TIA. </p>\n"}, {"tags": ["python", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 1422472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ddff3023cc205b28caff4c62f19f379?s=128&d=identicon&r=PG", "display_name": "ForDummies", "link": "https://stackoverflow.com/users/1422472/fordummies"}, "edited": false, "score": 0, "creation_date": 1545859220, "post_id": 53936912, "comment_id": 94714536, "body": "When I try that, I get  tkinter.TclError: unknown option &quot;-options&quot;"}, {"owner": {"reputation": 1243, "user_id": 9397534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/17BOy.jpg?s=128&g=1", "display_name": "Desiigner", "link": "https://stackoverflow.com/users/9397534/desiigner"}, "reply_to_user": {"reputation": 31, "user_id": 1422472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ddff3023cc205b28caff4c62f19f379?s=128&d=identicon&r=PG", "display_name": "ForDummies", "link": "https://stackoverflow.com/users/1422472/fordummies"}, "edited": false, "score": 0, "creation_date": 1545859628, "post_id": 53936912, "comment_id": 94714650, "body": "@ForDummies then try passing fg=blue . It\u2019s really simple and it doesn\u2019t require adding any lines of code"}, {"owner": {"reputation": 31, "user_id": 1422472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ddff3023cc205b28caff4c62f19f379?s=128&d=identicon&r=PG", "display_name": "ForDummies", "link": "https://stackoverflow.com/users/1422472/fordummies"}, "edited": false, "score": 0, "creation_date": 1545860387, "post_id": 53936912, "comment_id": 94714888, "body": "It&#39;s simple all right, but still doesn&#39;t work: _tkinter.TclError: unknown option &quot;-fg&quot; ---- perhaps because of the version of Python?"}], "tags": [], "owner": {"reputation": 1243, "user_id": 9397534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/17BOy.jpg?s=128&g=1", "display_name": "Desiigner", "link": "https://stackoverflow.com/users/9397534/desiigner"}, "is_accepted": false, "score": 0, "last_activity_date": 1545860395, "last_edit_date": 1545860395, "creation_date": 1545856626, "answer_id": 53936912, "question_id": 53936738, "link": "https://stackoverflow.com/questions/53936738/how-do-i-change-ttk-labelframes-header-label-to-blue-in-pythons-tkinter-on-lin/53936912#53936912", "title": "How do I change ttk.LabelFrame&#39;s header label to blue in python&#39;s tkinter on Linux?", "body": "<p>I wrote the answer but didn't notice you're using LabelFrame instead of Label.</p>\n\n<p>As the <a href=\"http://effbot.org/tkinterbook/labelframe.htm\" rel=\"nofollow noreferrer\">documentation</a> says, you need to pass an <code>options</code> argument to your <code>LabelFrame</code> class.</p>\n\n<p>Try this:</p>\n\n<pre><code>lf = ttk.LabelFrame(root, fg='blue', text=\"Now it should be blue\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6567, "user_id": 10825556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UWgVm.png?s=128&g=1", "display_name": "Bitto Bennichan", "link": "https://stackoverflow.com/users/10825556/bitto-bennichan"}, "is_accepted": true, "score": 1, "last_activity_date": 1545856945, "creation_date": 1545856945, "answer_id": 53936960, "question_id": 53936738, "link": "https://stackoverflow.com/questions/53936738/how-do-i-change-ttk-labelframes-header-label-to-blue-in-pythons-tkinter-on-lin/53936960#53936960", "title": "How do I change ttk.LabelFrame&#39;s header label to blue in python&#39;s tkinter on Linux?", "body": "<pre><code>from tkinter import *\nfrom tkinter import ttk\nroot = Tk()\nroot.title(\"My question\")\nlw = Label(root,  text=\"This is blue now\", fg=\"blue\")\nlf = ttk.LabelFrame(root,labelwidget=lw)\nlf.pack()\nlabel = ttk.Label(lf, text=\"frame contents can remain black or whatever.\")\nlabel.pack()\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 1422472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ddff3023cc205b28caff4c62f19f379?s=128&d=identicon&r=PG", "display_name": "ForDummies", "link": "https://stackoverflow.com/users/1422472/fordummies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 53936960, "answer_count": 2, "score": 1, "last_activity_date": 1545936538, "creation_date": 1545855575, "last_edit_date": 1545936538, "question_id": 53936738, "link": "https://stackoverflow.com/questions/53936738/how-do-i-change-ttk-labelframes-header-label-to-blue-in-pythons-tkinter-on-lin", "title": "How do I change ttk.LabelFrame&#39;s header label to blue in python&#39;s tkinter on Linux?", "body": "<p>I want the label text to be blue, as it is by default on Windows.</p>\n\n<p>I'm following a tutorial on Python and Tkinter that was written for Windows, but I'm doing it on Linux (Python 3.5.1 on xubuntu 16.04.5).  Right now I'm puzzled by the fact that all the LabelFrame examples in the book have a blue  header label, but when I run their code, my header labels are black.</p>\n\n<p>I see from <a href=\"https://stackoverflow.com/q/25002373/1422472\">this question</a> that  blue is default in Windows.  I'd like to see the same effect in Linux.  However, I have been unable to reverse the suggestions there.  For instance, \"foreground\" does not appear to be an option for ttk.LabelFrame(), and I also don't know how to make the text of a Label to be blue to use it as the labelwidget option.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>from tkinter import *\nfrom tkinter import ttk\n\nroot = Tk()\nroot.title(\"My question\")\n\nlf = ttk.LabelFrame(root, text=\"Why is this not blue?\")\nlf.pack()\n\nlabel = ttk.Label(lf, text=\"frame contents can remain black or whatever.\")\nlabel.pack()\n\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "heroku", "flask"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1545855788, "post_id": 53936736, "comment_id": 94713601, "body": "Please show the full traceback, and the Procfile."}, {"owner": {"reputation": 23, "user_id": 7596166, "user_type": "registered", "profile_image": "https://graph.facebook.com/1061062833991255/picture?type=large", "display_name": "Bowen", "link": "https://stackoverflow.com/users/7596166/bowen"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1545861840, "post_id": 53936736, "comment_id": 94715320, "body": "I added my full traceback and the Procfile"}, {"owner": {"reputation": 410, "user_id": 2943842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f44f6389606f4ed5690585cb1f52b663?s=128&d=identicon&r=PG", "display_name": "yusong", "link": "https://stackoverflow.com/users/2943842/yusong"}, "edited": false, "score": 0, "creation_date": 1545880854, "post_id": 53936736, "comment_id": 94718366, "body": "I have exactly the same issue!"}, {"owner": {"reputation": 410, "user_id": 2943842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f44f6389606f4ed5690585cb1f52b663?s=128&d=identicon&r=PG", "display_name": "yusong", "link": "https://stackoverflow.com/users/2943842/yusong"}, "edited": false, "score": 0, "creation_date": 1545881716, "post_id": 53936736, "comment_id": 94718497, "body": "I realize I have another <code>tokenize()</code> function defined in my <code>train_classify.py</code> (which is the place to train the model and save the pickle file), which may be the root cause. If I remove the import  of <code>tokenize</code> in <code>app.py</code>, then local flask app get the same error ad heroku"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7596166, "user_type": "registered", "profile_image": "https://graph.facebook.com/1061062833991255/picture?type=large", "display_name": "Bowen", "link": "https://stackoverflow.com/users/7596166/bowen"}, "edited": false, "score": 0, "creation_date": 1545893645, "post_id": 53940109, "comment_id": 94721106, "body": "I did, but it did not work. I don&#39;t quite understand how adding <code>from tokenizer_function import tokenize</code> helps since we are not evening calling the train function in the flask app. Could you explain the bit more? I will add your explainatiosn as the accepted answer."}, {"owner": {"reputation": 410, "user_id": 2943842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f44f6389606f4ed5690585cb1f52b663?s=128&d=identicon&r=PG", "display_name": "yusong", "link": "https://stackoverflow.com/users/2943842/yusong"}, "reply_to_user": {"reputation": 23, "user_id": 7596166, "user_type": "registered", "profile_image": "https://graph.facebook.com/1061062833991255/picture?type=large", "display_name": "Bowen", "link": "https://stackoverflow.com/users/7596166/bowen"}, "edited": false, "score": 0, "creation_date": 1545931319, "post_id": 53940109, "comment_id": 94735738, "body": "I am a bit confused too. In my code, it looks like the <code>tokenize</code> function is not serialized by pickle. So in above post, when we load the model, we have to make <code>tokenize</code> function in scope, so model know how to use it.   `     pipeline = Pipeline([         (&#39;vect&#39;, CountVectorizer(tokenizer = tokenize)),         (&#39;tfidf&#39;, TfidfTransformer()),         (&#39;clf&#39;, MultiOutputClassifier(estimator = AdaBoostClassifier()))     ]) `"}, {"owner": {"reputation": 410, "user_id": 2943842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f44f6389606f4ed5690585cb1f52b663?s=128&d=identicon&r=PG", "display_name": "yusong", "link": "https://stackoverflow.com/users/2943842/yusong"}, "reply_to_user": {"reputation": 23, "user_id": 7596166, "user_type": "registered", "profile_image": "https://graph.facebook.com/1061062833991255/picture?type=large", "display_name": "Bowen", "link": "https://stackoverflow.com/users/7596166/bowen"}, "edited": false, "score": 0, "creation_date": 1545931668, "post_id": 53940109, "comment_id": 94735869, "body": "You approach by wrapping with transform class, seems to solve the issue, so you don&#39;t need to explicitly import <code>tokenize</code> function in app.py"}, {"owner": {"reputation": 410, "user_id": 2943842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f44f6389606f4ed5690585cb1f52b663?s=128&d=identicon&r=PG", "display_name": "yusong", "link": "https://stackoverflow.com/users/2943842/yusong"}, "reply_to_user": {"reputation": 23, "user_id": 7596166, "user_type": "registered", "profile_image": "https://graph.facebook.com/1061062833991255/picture?type=large", "display_name": "Bowen", "link": "https://stackoverflow.com/users/7596166/bowen"}, "edited": false, "score": 0, "creation_date": 1545931971, "post_id": 53940109, "comment_id": 94735977, "body": "At first, I though it may be due to <code>tokenize</code> namespace collide with <code>nltk.tokenize</code>, but even if I change the function name, it still doesn&#39;t work. Another thing I am not quite understand is how <code>python app.py</code> work but <code>heroku local web</code> doesn&#39;t"}], "tags": [], "owner": {"reputation": 410, "user_id": 2943842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f44f6389606f4ed5690585cb1f52b663?s=128&d=identicon&r=PG", "display_name": "yusong", "link": "https://stackoverflow.com/users/2943842/yusong"}, "is_accepted": false, "score": 0, "last_activity_date": 1545888194, "creation_date": 1545888194, "answer_id": 53940109, "question_id": 53936736, "link": "https://stackoverflow.com/questions/53936736/my-flask-app-does-not-run-on-heroku-but-it-runs-locally/53940109#53940109", "title": "My Flask app does not run on Heroku, but it runs locally", "body": "<p>The post you mentioned <a href=\"https://stackoverflow.com/questions/49483732/why-does-my-flask-app-work-when-executing-using-python-app-py-but-not-when-usi\">Why does my Flask app work when executing using <code>python app.py</code> but not when using <code>heroku local web</code> or <code>flask run</code>?</a> actually solved my problem</p>\n\n<p>Did you also use the same format of import as your loading one in your training script?\ni.e. <code>from tokenizer_function import tokenize</code>\nin your training script too?</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 7596166, "user_type": "registered", "profile_image": "https://graph.facebook.com/1061062833991255/picture?type=large", "display_name": "Bowen", "link": "https://stackoverflow.com/users/7596166/bowen"}, "is_accepted": false, "score": 0, "last_activity_date": 1545894647, "creation_date": 1545894647, "answer_id": 53941124, "question_id": 53936736, "link": "https://stackoverflow.com/questions/53936736/my-flask-app-does-not-run-on-heroku-but-it-runs-locally/53941124#53941124", "title": "My Flask app does not run on Heroku, but it runs locally", "body": "<p>I managed to get around this problem by reformulating the pipeline defined in my train_classifier.py. I defined a customized transformer named Tokenize. Now the tokenizer_function.py looks like the following.</p>\n\n<pre><code>import re\nimport nltk \nfrom nltk.corpus import stopwords\nfrom nltk.tokenize import word_tokenize\nfrom nltk.stem.wordnet import WordNetLemmatizer\nimport pandas as pd\nfrom sklearn.base import BaseEstimator, TransformerMixin\n\nclass Tokenizer(BaseEstimator, TransformerMixin):\n    def __init__(self):\n        pass\n\n    def fit(self, X, y=None):\n        return self\n\n    def transform(self, X):\n        def tokenize(text):\n            \"\"\"\n                Tokenize the message into word level features. \n                1. replace urls\n                2. convert to lower cases\n                3. remove stopwords\n                4. strip white spaces\n            Args: \n                text: input text messages\n            Returns: \n                cleaned tokens(List)\n            \"\"\"   \n            # Define url pattern\n            url_re = 'http[s]?://(?:[a-zA-Z]|[0-9]|[$-_@.&amp;+]|[!*\\(\\), ]|(?:%[0-9a-fA-F][0-9a-fA-F]))+'\n\n            # Detect and replace urls\n            detected_urls = re.findall(url_re, text)\n            for url in detected_urls:\n                text = text.replace(url, \"urlplaceholder\")\n\n            # tokenize sentences\n            tokens = word_tokenize(text)\n            lemmatizer = WordNetLemmatizer()\n\n            # save cleaned tokens\n            clean_tokens = [lemmatizer.lemmatize(tok).lower().strip() for tok in tokens]\n\n            # remove stopwords\n            STOPWORDS = list(set(stopwords.words('english')))\n            clean_tokens = [token for token in clean_tokens if token not in STOPWORDS]\n\n            return ' '.join(clean_tokens)\n\n        return pd.Series(X).apply(tokenize).values\n</code></pre>\n\n<p>With the above transformer, I was able to wrap the tokenizer into the pipeline, which solved the issue I had. </p>\n"}], "owner": {"reputation": 23, "user_id": 7596166, "user_type": "registered", "profile_image": "https://graph.facebook.com/1061062833991255/picture?type=large", "display_name": "Bowen", "link": "https://stackoverflow.com/users/7596166/bowen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1259, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1545894647, "creation_date": 1545855537, "last_edit_date": 1545861821, "question_id": 53936736, "link": "https://stackoverflow.com/questions/53936736/my-flask-app-does-not-run-on-heroku-but-it-runs-locally", "title": "My Flask app does not run on Heroku, but it runs locally", "body": "<p>I have a machine learning app when I utilized a custom tokenize function to load a machine learning model I built using flask. When I run python app.py it runs perfectly. But it does not run on heroku. And shows the error <code>AttributeError: module '__main__' has no attribute 'tokenize'</code></p>\n\n<p>I have read the other post <a href=\"https://stackoverflow.com/questions/49483732/why-does-my-flask-app-work-when-executing-using-python-app-py-but-not-when-usi\">Why does my Flask app work when executing using `python app.py` but not when using `heroku local web` or `flask run`?</a> which seems to have the same issue, but I could not understand the solution it proposed. The error comes from the line <code>model = joblib.load(\"models/adaboost_model.pkl\")</code>. I already have a separate file that builds the customized tokenizer function in <code>tokenizer_function.py</code>, but it still does not work. </p>\n\n<p>My <code>app.py</code> file looks like the following </p>\n\n<pre><code>import json\nimport plotly\nimport pandas as pd\nimport re\nfrom collections import Counter\n\n# import NLP libraries\nfrom tokenizer_function import tokenize\n\nfrom flask import Flask\nfrom flask import render_template, request, jsonify\nfrom plotly.graph_objs import Bar\nfrom sklearn.externals import joblib\nfrom sqlalchemy import create_engine\n\n\napp = Flask(__name__)\n\n\n@app.before_first_request\n\ndef load_model_data():\n    global df\n    global model\n    # load data\n\n    engine = create_engine('sqlite:///data/DisasterResponse.db')\n    df = pd.read_sql_table('DisasterResponse', engine)\n\n    # load model\n    model = joblib.load(\"models/adaboost_model.pkl\")\n\n# index webpage displays cool visuals and receives user input text for model\n@app.route('/')\n@app.route('/index')\n\ndef index():\n\n    # extract data needed for visuals\n    # Message counts of different generes\n    genre_counts = df.groupby('genre').count()['message']\n    genre_names = list(genre_counts.index)\n\n    # Message counts for different categories\n    cate_counts_df = df.iloc[:, 4:].sum().sort_values(ascending=False)\n    cate_counts = list(cate_counts_df)\n    cate_names = list(cate_counts_df.index)\n\n    # Top keywords in Social Media in percentages\n    social_media_messages = ' '.join(df[df['genre'] == 'social']['message'])\n    social_media_tokens = tokenize(social_media_messages)\n    social_media_wrd_counter = Counter(social_media_tokens).most_common()\n    social_media_wrd_cnt = [i[1] for i in social_media_wrd_counter]\n    social_media_wrd_pct = [i/sum(social_media_wrd_cnt) *100 for i in social_media_wrd_cnt]\n    social_media_wrds = [i[0] for i in social_media_wrd_counter]\n\n    # Top keywords in Direct in percentages\n    direct_messages = ' '.join(df[df['genre'] == 'direct']['message'])\n    direct_tokens = tokenize(direct_messages)\n    direct_wrd_counter = Counter(direct_tokens).most_common()\n    direct_wrd_cnt = [i[1] for i in direct_wrd_counter]\n    direct_wrd_pct = [i/sum(direct_wrd_cnt) * 100 for i in direct_wrd_cnt]\n    direct_wrds = [i[0] for i in direct_wrd_counter]\n\n    # create visuals\n\n    graphs = [\n    # Histogram of the message genere\n        {\n            'data': [\n                Bar(\n                    x=genre_names,\n                    y=genre_counts\n                )\n            ],\n\n            'layout': {\n                'title': 'Distribution of Message Genres',\n                'yaxis': {\n                    'title': \"Count\"\n                },\n                'xaxis': {\n                    'title': \"Genre\"\n                }\n            }\n        },\n        # histogram of social media messages top 30 keywords \n        {\n            'data': [\n                    Bar(\n                        x=social_media_wrds[:50],\n                        y=social_media_wrd_pct[:50]\n                                    )\n            ],\n\n            'layout':{\n                'title': \"Top 50 Keywords in Social Media Messages\",\n                'xaxis': {'tickangle':60\n                },\n                'yaxis': {\n                    'title': \"% Total Social Media Messages\"    \n                }\n            }\n        }, \n\n        # histogram of direct messages top 30 keywords \n        {\n            'data': [\n                    Bar(\n                        x=direct_wrds[:50],\n                        y=direct_wrd_pct[:50]\n                                    )\n            ],\n\n            'layout':{\n                'title': \"Top 50 Keywords in Direct Messages\",\n                'xaxis': {'tickangle':60\n                },\n                'yaxis': {\n                    'title': \"% Total Direct Messages\"    \n                }\n            }\n        }, \n\n\n\n        # histogram of messages categories distributions\n        {\n            'data': [\n                    Bar(\n                        x=cate_names,\n                        y=cate_counts\n                                    )\n            ],\n\n            'layout':{\n                'title': \"Distribution of Message Categories\",\n                'xaxis': {'tickangle':60\n                },\n                'yaxis': {\n                    'title': \"count\"    \n                }\n            }\n        },     \n\n    ]\n\n    # encode plotly graphs in JSON\n    ids = [\"graph-{}\".format(i) for i, _ in enumerate(graphs)]\n    graphJSON = json.dumps(graphs, cls=plotly.utils.PlotlyJSONEncoder)\n\n    # render web page with plotly graphs\n    return render_template('master.html', ids=ids, graphJSON=graphJSON)\n\n\n# web page that handles user query and displays model results\n@app.route('/go')\ndef go():\n    # save user input in query\n    query = request.args.get('query', '') \n\n    # use model to predict classification for query\n    classification_labels = model.predict([query])[0]\n    classification_results = dict(zip(df.columns[4:], classification_labels))\n\n    # This will render the go.html Please see that file. \n    return render_template(\n        'go.html',\n        query=query,\n        classification_result=classification_results\n    )\n\n\ndef main():\n    app.run()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>My <code>tokenizer_function.py</code> looks like the following</p>\n\n<pre><code>import re\nimport nltk \nfrom nltk.corpus import stopwords\nfrom nltk.tokenize import word_tokenize\nfrom nltk.stem.wordnet import WordNetLemmatizer\n\n\ndef tokenize(text):\n    \"\"\"\n        Tokenize the message into word level features. \n        1. replace urls\n        2. convert to lower cases\n        3. remove stopwords\n        4. strip white spaces\n    Args: \n        text: input text messages\n    Returns: \n        cleaned tokens(List)\n    \"\"\"   \n    # Define url pattern\n    url_re = 'http[s]?://(?:[a-zA-Z]|[0-9]|[$-_@.&amp;+]|[!*\\(\\), ]|(?:%[0-9a-fA-F][0-9a-fA-F]))+'\n\n    # Detect and replace urls\n    detected_urls = re.findall(url_re, text)\n    for url in detected_urls:\n        text = text.replace(url, \"urlplaceholder\")\n\n    # tokenize sentences\n    tokens = word_tokenize(text)\n    lemmatizer = WordNetLemmatizer()\n\n    # save cleaned tokens\n    clean_tokens = [lemmatizer.lemmatize(tok).lower().strip() for tok in tokens]\n\n    # remove stopwords\n    STOPWORDS = list(set(stopwords.words('english')))\n    clean_tokens = [token for token in clean_tokens if token not in STOPWORDS]\n\n    return clean_tokens\n</code></pre>\n\n<p>Why would this still returns an error? I have already separated the tokenizer function in a separate file. Any help or explainations are much appreciated!</p>\n\n<p>Edit:</p>\n\n<p>The full traceback:</p>\n\n<pre><code>2018-12-26T19:54:46.098725+00:00 app[web.1]: model = joblib.load(\"models/rf_model.pkl\")\n2018-12-26T19:54:46.098727+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/sklearn/externals/joblib/numpy_pickle.py\", line 598, in load\n2018-12-26T19:54:46.098728+00:00 app[web.1]: obj = _unpickle(fobj, filename, mmap_mode)\n2018-12-26T19:54:46.098730+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/sklearn/externals/joblib/numpy_pickle.py\", line 526, in _unpickle\n2018-12-26T19:54:46.098732+00:00 app[web.1]: obj = unpickler.load()\n2018-12-26T19:54:46.098733+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/pickle.py\", line 1050, in load\n2018-12-26T19:54:46.098734+00:00 app[web.1]: dispatch[key[0]](self)\n2018-12-26T19:54:46.098736+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/pickle.py\", line 1338, in load_global\n2018-12-26T19:54:46.098738+00:00 app[web.1]: klass = self.find_class(module, name)\n2018-12-26T19:54:46.098739+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/pickle.py\", line 1392, in find_class\n2018-12-26T19:54:46.098741+00:00 app[web.1]: return getattr(sys.modules[module], name)\n2018-12-26T19:54:46.098752+00:00 app[web.1]: AttributeError: module '__main__' has no attribute 'tokenize'\n2018-12-26T19:54:46.103665+00:00 app[web.1]: [2018-12-26 19:54:46 +0000] [11] [INFO] Worker exiting (pid: 11)\n2018-12-26T19:54:46.253217+00:00 app[web.1]: [2018-12-26 19:54:46 +0000] [10] [ERROR] Exception in worker process\n2018-12-26T19:54:46.253221+00:00 app[web.1]: Traceback (most recent call last):\n2018-12-26T19:54:46.253222+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/arbiter.py\", line 583, in spawn_worker\n2018-12-26T19:54:46.253228+00:00 app[web.1]: worker.init_process()\n2018-12-26T19:54:46.253230+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/workers/base.py\", line 129, in init_process\n2018-12-26T19:54:46.253231+00:00 app[web.1]: self.load_wsgi()\n2018-12-26T19:54:46.253233+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/workers/base.py\", line 138, in load_wsgi\n2018-12-26T19:54:46.253234+00:00 app[web.1]: self.wsgi = self.app.wsgi()\n2018-12-26T19:54:46.253236+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/app/base.py\", line 67, in wsgi\n2018-12-26T19:54:46.253237+00:00 app[web.1]: self.callable = self.load()\n2018-12-26T19:54:46.253239+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/app/wsgiapp.py\", line 52, in load\n2018-12-26T19:54:46.253240+00:00 app[web.1]: return self.load_wsgiapp()\n2018-12-26T19:54:46.253242+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/app/wsgiapp.py\", line 41, in load_wsgiapp2018-12-26T19:54:46.253243+00:00 app[web.1]: return util.import_app(self.app_uri)\n2018-12-26T19:54:46.253245+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/gunicorn/util.py\", line 350, in import_app\n2018-12-26T19:54:46.253246+00:00 app[web.1]: __import__(module)\n2018-12-26T19:54:46.253248+00:00 app[web.1]: File \"/app/app.py\", line 59, in &lt;module&gt;\n2018-12-26T19:54:46.253249+00:00 app[web.1]: model = joblib.load(\"models/rf_model.pkl\")\n2018-12-26T19:54:46.253251+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/sklearn/externals/joblib/numpy_pickle.py\", line 598, in load\n2018-12-26T19:54:46.253253+00:00 app[web.1]: obj = _unpickle(fobj, filename, mmap_mode)\n2018-12-26T19:54:46.253254+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/sklearn/externals/joblib/numpy_pickle.py\", line 526, in _unpickle\n2018-12-26T19:54:46.253256+00:00 app[web.1]: obj = unpickler.load()\n2018-12-26T19:54:46.253257+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/pickle.py\", line 1050, in load\n2018-12-26T19:54:46.253259+00:00 app[web.1]: dispatch[key[0]](self)\n2018-12-26T19:54:46.253261+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/pickle.py\", line 1338, in load_global\n2018-12-26T19:54:46.253262+00:00 app[web.1]: klass = self.find_class(module, name)\n2018-12-26T19:54:46.253264+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/pickle.py\", line 1392, in find_class\n2018-12-26T19:54:46.253265+00:00 app[web.1]: return getattr(sys.modules[module], name)\n2018-12-26T19:54:46.253273+00:00 app[web.1]: AttributeError: module '__main__' has no attribute 'tokenize'\n2018-12-26T19:54:46.254747+00:00 app[web.1]: [2018-12-26 19:54:46 +0000] [10] [INFO] Worker exiting (pid: 10)\n2018-12-26T19:54:46.769738+00:00 heroku[web.1]: State changed from up to crashed\n2018-12-26T19:54:46.750723+00:00 heroku[web.1]: Process exited with status 3\n2018-12-26T19:55:27.000000+00:00 app[api]: Build started by user chenbowen184@gmail.com\n2018-12-26T19:57:21.400346+00:00 heroku[web.1]: State changed from crashed to starting\n2018-12-26T19:57:20.489748+00:00 app[api]: Deploy 87045c08 by user chenbowen184@gmail.com\n2018-12-26T19:57:20.489748+00:00 app[api]: Release v4 created by user chenbowen184@gmail.com\n2018-12-26T19:57:59.712871+00:00 heroku[web.1]: State changed from starting to up\n2018-12-26T19:57:59.469112+00:00 app[web.1]: [2018-12-26 19:57:59 +0000] [4] [INFO] Starting gunicorn 19.9.0\n2018-12-26T19:57:59.470292+00:00 app[web.1]: [2018-12-26 19:57:59 +0000] [4] [INFO] Listening at: http://0.0.0.0:53013 (4)\n2018-12-26T19:57:59.470476+00:00 app[web.1]: [2018-12-26 19:57:59 +0000] [4] [INFO] Using worker: sync\n2018-12-26T19:57:59.480025+00:00 app[web.1]: [2018-12-26 19:57:59 +0000] [10] [INFO] Booting worker with pid: 10\n2018-12-26T19:57:59.579014+00:00 app[web.1]: [2018-12-26 19:57:59 +0000] [11] [INFO] Booting worker with pid: 11\n2018-12-26T19:57:59.000000+00:00 app[api]: Build succeeded\n2018-12-26T20:05:53.000000+00:00 app[api]: Build started by user chenbowen184@gmail.com\n2018-12-26T20:08:05.985733+00:00 heroku[web.1]: State changed from up to starting\n2018-12-26T20:08:05.760144+00:00 app[api]: Deploy 30844f53 by user chenbowen184@gmail.com\n2018-12-26T20:08:05.760144+00:00 app[api]: Release v5 created by user chenbowen184@gmail.com\n2018-12-26T20:08:07.063086+00:00 heroku[web.1]: Stopping all processes with SIGTERM\n2018-12-26T20:08:08.397480+00:00 heroku[web.1]: Stopping all processes with SIGTERM\n2018-12-26T20:08:08.219918+00:00 app[web.1]: [2018-12-26 20:08:08 +0000] [4] [INFO] Shutting down: Master\n2018-12-26T20:08:31.717772+00:00 heroku[web.1]: Starting process with command `gunicorn app:app`\n2018-12-26T20:08:33.821758+00:00 app[web.1]: [2018-12-26 20:08:33 +0000] [4] [INFO] Starting gunicorn 19.9.0\n2018-12-26T20:08:33.822253+00:00 app[web.1]: [2018-12-26 20:08:33 +0000] [4] [INFO] Listening at: http://0.0.0.0:46765 (4)\n2018-12-26T20:08:33.822350+00:00 app[web.1]: [2018-12-26 20:08:33 +0000] [4] [INFO] Using worker: sync\n2018-12-26T20:08:33.826441+00:00 app[web.1]: [2018-12-26 20:08:33 +0000] [10] [INFO] Booting worker with pid: 10\n2018-12-26T20:08:33.894893+00:00 app[web.1]: [2018-12-26 20:08:33 +0000] [11] [INFO] Booting worker with pid: 11\n2018-12-26T20:08:35.332075+00:00 heroku[web.1]: State changed from starting to up\n2018-12-26T20:08:38.891790+00:00 heroku[router]: at=info method=GET path=\"/\" host=disaster-response-app184.herokuapp.com request_id=37e89d80-429a-4aa7-a356-781238ebecce fwd=\"76.90.60.254\" dyno=web.1 connect=0ms service=2923ms status=500 bytes=456 protocol=https\n2018-12-26T20:08:40.489401+00:00 app[web.1]: [2018-12-26 20:08:40,488] ERROR in app: Exception on /favicon.ico [GET]\n2018-12-26T20:08:40.489413+00:00 app[web.1]: Traceback (most recent call last):\n2018-12-26T20:08:40.489415+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 2292, in wsgi_app\n2018-12-26T20:08:40.489417+00:00 app[web.1]: response = self.full_dispatch_request()\n2018-12-26T20:08:40.489418+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1808, in full_dispatch_request2018-12-26T20:08:40.489420+00:00 app[web.1]: self.try_trigger_before_first_request_functions()\n2018-12-26T20:08:40.489422+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1855, in try_trigger_before_first_request_functions\n2018-12-26T20:08:40.489424+00:00 app[web.1]: func()\n2018-12-26T20:08:40.489426+00:00 app[web.1]: File \"/app/app.py\", line 31, in load_model_data\n2018-12-26T20:08:40.489427+00:00 app[web.1]: model = joblib.load(\"models/adaboost_model.pkl\")\n2018-12-26T20:08:40.489429+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/sklearn/externals/joblib/numpy_pickle.py\", line 598, in load\n2018-12-26T20:08:40.489430+00:00 app[web.1]: obj = _unpickle(fobj, filename, mmap_mode)\n2018-12-26T20:08:40.489432+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/site-packages/sklearn/externals/joblib/numpy_pickle.py\", line 526, in _unpickle\n2018-12-26T20:08:40.489434+00:00 app[web.1]: obj = unpickler.load()\n2018-12-26T20:08:40.489435+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/pickle.py\", line 1050, in load\n2018-12-26T20:08:40.489437+00:00 app[web.1]: dispatch[key[0]](self)\n2018-12-26T20:08:40.489438+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/pickle.py\", line 1338, in load_global\n2018-12-26T20:08:40.489440+00:00 app[web.1]: klass = self.find_class(module, name)\n2018-12-26T20:08:40.489441+00:00 app[web.1]: File \"/app/.heroku/python/lib/python3.6/pickle.py\", line 1392, in find_class\n2018-12-26T20:08:40.489443+00:00 app[web.1]: return getattr(sys.modules[module], name)\n2018-12-26T20:08:40.489451+00:00 app[web.1]: AttributeError: module '__main__' has no attribute 'tokenize'\n2018-12-26T20:08:40.490172+00:00 app[web.1]: 10.97.234.47 - - [26/Dec/2018:20:08:40 +0000] \"GET /favicon.ico HTTP/1.1\" 500 291 \"https://disaster-response-app184.herokuapp.com/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.87 Safari/537.36\"\n2018-12-26T20:42:17.957629+00:00 heroku[web.1]: Idling\n2018-12-26T20:42:17.961855+00:00 heroku[web.1]: State changed from up to down\n2018-12-26T20:42:19.098318+00:00 heroku[web.1]: Stopping all processes with SIGTERM\n2018-12-26T20:42:19.160640+00:00 app[web.1]: [2018-12-26 20:42:19 +0000] [4] [INFO] Handling signal: term\n2018-12-26T20:42:19.189166+00:00 app[web.1]: [2018-12-26 20:42:19 +0000] [10] [INFO] Worker exiting (pid: 10)\n2018-12-26T20:42:19.205573+00:00 app[web.1]: [2018-12-26 20:42:19 +0000] [11] [INFO] Worker exiting (pid: 11)\n2018-12-26T20:42:21.004227+00:00 heroku[web.1]: Process exited with status 0\n</code></pre>\n\n<p>The Procfile:</p>\n\n<pre><code>web: gunicorn app:app\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary", "concatenation"], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1545856376, "post_id": 53936785, "comment_id": 94713747, "body": "Do <i>not</i> use list-comprehensions for side-effects."}], "tags": [], "owner": {"reputation": 109, "user_id": 10836519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be0081b429bdc0f7c21e78d78c87c38e?s=128&d=identicon&r=PG&f=1", "display_name": "Elie Louis", "link": "https://stackoverflow.com/users/10836519/elie-louis"}, "is_accepted": false, "score": 0, "last_activity_date": 1545856548, "last_edit_date": 1545856548, "creation_date": 1545855924, "answer_id": 53936785, "question_id": 53936733, "link": "https://stackoverflow.com/questions/53936733/removing-duplicate-keys-from-python-dictionary-but-concatenating-the-values-of-d/53936785#53936785", "title": "Removing duplicate keys from python dictionary but concatenating the values of duplicated keys", "body": "<p>How about this?</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>lista = ['winter', 'fall', 'spring', 'summer', 'winter', 'spring']\nlistb = ['cold', 'rainy', 'windy', 'hot', 'chilly', 'wet']\nmydict = {k : [] for k in lista}\nfor k,v in zip(lista, listb):\n    mydict[k].append(v)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 10768692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1c177ea2ed28ce20f135425c5dac36?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/10768692/robert"}, "edited": false, "score": 0, "creation_date": 1545857121, "post_id": 53936810, "comment_id": 94713953, "body": "Thanks for this, this is exactly what I needed"}], "tags": [], "owner": {"reputation": 10314, "user_id": 6124411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4E3zE.jpg?s=128&g=1", "display_name": "cody", "link": "https://stackoverflow.com/users/6124411/cody"}, "is_accepted": true, "score": 2, "last_activity_date": 1545856616, "last_edit_date": 1545856616, "creation_date": 1545856051, "answer_id": 53936810, "question_id": 53936733, "link": "https://stackoverflow.com/questions/53936733/removing-duplicate-keys-from-python-dictionary-but-concatenating-the-values-of-d/53936810#53936810", "title": "Removing duplicate keys from python dictionary but concatenating the values of duplicated keys", "body": "<p>There's no need to explicitly initialize the values with empty lists, use <a href=\"https://docs.python.org/3/library/collections.html#collections.defaultdict\" rel=\"nofollow noreferrer\"><code>defaultdict</code></a>:</p>\n\n<pre><code>from collections import defaultdict\n\nlista = ['winter', 'fall', 'spring', 'summer', 'winter', 'spring']\nlistb = ['cold', 'rainy', 'windy', 'hot', 'chilly', 'wet']\n\nd = defaultdict(list)\nfor x, y in zip(lista, listb):\n    d[x].append(y)\n\nprint(dict(d))\n</code></pre>\n\n<p>Note that it's not necessary to cast to <code>dict</code> as I did, as <code>defaultdict</code> is a subclass of <code>dict</code>. I just did it so the output would match your requirements exactly.</p>\n\n<p>Result:</p>\n\n<pre><code>{'winter': ['cold', 'chilly'], 'fall': ['rainy'], 'spring': ['windy', 'wet'], 'summer': ['hot']}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10768692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1c177ea2ed28ce20f135425c5dac36?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/10768692/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 53936810, "answer_count": 2, "score": 2, "last_activity_date": 1545856616, "creation_date": 1545855526, "last_edit_date": 1545856185, "question_id": 53936733, "link": "https://stackoverflow.com/questions/53936733/removing-duplicate-keys-from-python-dictionary-but-concatenating-the-values-of-d", "title": "Removing duplicate keys from python dictionary but concatenating the values of duplicated keys", "body": "<p>Let's say I have two lists:</p>\n\n<pre><code>lista = ['winter', 'fall', 'spring', 'summer', 'winter', 'spring']\nlistb = ['cold', 'rainy', 'windy', 'hot', 'chilly', 'wet']\n</code></pre>\n\n<p>I want to create a dictionary that pulls the unique values from lista as the key (which it will do automatically since dictionaries can only have unique keys) and the values from list b as the dictionary value, corresponding to lista by their order. So to create the dictionary I would do:</p>\n\n<pre><code>mydict = {k: v for k, v in zip(lista, listb)}\n</code></pre>\n\n<p>If I print this, I get:</p>\n\n<pre><code>{'winter': 'chilly', 'fall': 'rainy', 'spring': 'wet', 'summer': 'hot'}\n</code></pre>\n\n<p>However, what I would like to do, is for every \"key\" from lista that is duplicate, I'd like to concatenate the values from listb to be the \"value\" in the dictionary as a list. So the goal would be:</p>\n\n<pre><code>{'winter': ['cold', 'chilly'], 'fall': ['rainy'], 'spring': ['windy', 'wet'], 'summer': ['hot']}\n</code></pre>\n\n<p>This is a dumbed down version of what I am trying to do but I think it applies - I am reading a csv file and trying to make the \"last name\" column the key, and every other row the value (as a list). So far I've created a list for last names and the list for the other rows, but I need to concatenate the values for duplicate names.</p>\n"}, {"tags": ["python", "datetime", "strptime"], "comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1545856123, "post_id": 53936732, "comment_id": 94713698, "body": "<a href=\"https://docs.python.org/3.7/library/datetime.html#strftime-strptime-behavior\" rel=\"nofollow noreferrer\">docs.python.org/3.7/library/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "is_accepted": true, "score": 7, "last_activity_date": 1545858794, "creation_date": 1545858794, "answer_id": 53937209, "question_id": 53936732, "link": "https://stackoverflow.com/questions/53936732/valueerror-time-data-2018-12-22t004130-926932z-does-not-match-format-y-m/53937209#53937209", "title": "ValueError: time data &#39;2018-12-22T00:41:30.926932Z&#39; does not match format &#39;%Y-%m-%d %H:%M:%S&#39;", "body": "<p>The first problem is that you have an ISO date in this format: <code>2018-12-22T00:41:30.926932Z</code> but the format string your code is passing to <code>strptime()</code> specifies an American-style date with month first and slashes. </p>\n\n<p>So instead of <code>\"%m/%d/%Y %H:%M:%S.%f\"</code> you need <code>\"%Y-%m-%dT%H:%M:%S.%f\"</code>. </p>\n\n<p>Things to notice about this:</p>\n\n<ol>\n<li>Year (<code>%Y</code>) comes first.</li>\n<li>Hyphens not slashes.</li>\n<li><code>T</code> between date and time, not space.</li>\n</ol>\n\n<p>The second problem is that the data ends with a timezone string <code>Z</code> for GMT, but your code doesn't include that in the format spec. The proper format directive for this is <code>%z</code>.  So, add <code>%z</code> at the end to get <code>\"%Y-%m-%dT%H:%M:%S.%f%z\"</code>.</p>\n\n<p>The function <code>strptime()</code> is accurate but not bright, and cannot work out where your format spec doesn't match the data. All you get is a generic message that says <em>data does not match format</em>. At that point, it is up to you to go back to the documentation to discover where the mismatch is.</p>\n\n<p>Finally, <code>.replace(tzinfo=pytz.utc).astimezone(local_tz)</code> will not work because (unless you have defined <code>local_tz</code> in code you haven't presented), referencing <code>local_tz</code> will give a NameError or an AttributeError: I suspect that what you want is <code>tzlocal.get_localzone()</code>. You may have to install <code>tzlocal</code> for this to work. (There are other ways to do this, but this way is closest to the code you present.)</p>\n\n<p>After fixing these three problems I get</p>\n\n<pre><code>&gt;&gt;&gt; order['created'] = \"2018-12-22T00:41:30.926932Z\"\n</code></pre>\n\n<p>Notice, you need quotes around the timestamp value, that must have been in your original code to result in the error message you report, but are not in your question. Always post the <em>exact code</em> that is giving the error message, not a retyped or redacted version.</p>\n\n<pre><code>&gt;&gt;&gt; datetime.datetime.strptime(order['created'],'%Y-%m-%dT%H:%M:%S.%f%z').replace(tzinfo=pytz.utc).astimezone(tzlocal.get_localzone())\ndatetime.datetime(2018, 12, 22, 1, 41, 30, 926932, tzinfo=&lt;DstTzInfo 'Europe/Berlin' CET+1:00:00 STD&gt;)\n</code></pre>\n\n<p>which is correct but will probably not match your result because I live in The Hague.</p>\n\n<p>Working with dates is tricky at the best of times, and it nearly always requires a surprising degree of attention to detail. </p>\n"}], "owner": {"reputation": 282, "user_id": 10750844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c055b9ecf1896d53b17f1fb3bc09cb35?s=128&d=identicon&r=PG&f=1", "display_name": "David Ramirez", "link": "https://stackoverflow.com/users/10750844/david-ramirez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5544, "favorite_count": 1, "closed_date": 1545859444, "accepted_answer_id": 53937209, "answer_count": 1, "score": 2, "last_activity_date": 1545858794, "creation_date": 1545855513, "question_id": 53936732, "link": "https://stackoverflow.com/questions/53936732/valueerror-time-data-2018-12-22t004130-926932z-does-not-match-format-y-m", "closed_reason": "Duplicate", "title": "ValueError: time data &#39;2018-12-22T00:41:30.926932Z&#39; does not match format &#39;%Y-%m-%d %H:%M:%S&#39;", "body": "<p>I'm having troubles converting a time string to datetime object:\nAnd i know this question has been asked a couple of times but i haven't been able to find a solution for my question.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>order['created'] = 2018-12-22T00:41:30.926932Z\ncreated_at = datetime.datetime.strptime(order['created'],'%m/%d/%Y %H:%M:%S.%f').replace(tzinfo=pytz.utc).astimezone(local_tz)\n</code></pre>\n\n<p>and this is the error message I get</p>\n\n<blockquote>\n  <p>ValueError: time data '2018-12-22T00:41:30.926932Z' does not match\n  format '%m/%d/%Y %H:%M:%S.%f'</p>\n</blockquote>\n"}, {"tags": ["python", "anonymous-function"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 5, "creation_date": 1545855459, "post_id": 53936716, "comment_id": 94713521, "body": "No, it is not. <code>lambda</code> expressions can only contain <i>expressions</i>, not statements."}, {"owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1545855694, "post_id": 53936716, "comment_id": 94713579, "body": "@juanpa.arrivillaga Is <code>lambda</code> the only way to construct an anonymous function in Python? I&#39;m talking about anonymous functions not <code>lambda</code>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1545855750, "post_id": 53936716, "comment_id": 94713592, "body": "Yes, it is. I rarely use <code>lambda</code> expressions, only when I&#39;m being super lazy, or for very simple one-offs that I pass to a higher-order function like <code>map</code>"}, {"owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1545855825, "post_id": 53936716, "comment_id": 94713613, "body": "@juanpa.arrivillaga So where in the doc it says <i>lambda is the only way to construct an anonymous functions</i>?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1545855887, "post_id": 53936716, "comment_id": 94713631, "body": "It doesn&#39;t say that anywhere in the docs. But you can conclude that by elimination. If you don&#39;t believe me, you are free to search the docs for another methd."}, {"owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1545856059, "post_id": 53936716, "comment_id": 94713679, "body": "@juanpa.arrivillaga Obviously I haven&#39;t found another way to do so but <i>by elimination</i> means reading all the docs, peps. Not really feasible."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1545856093, "post_id": 53936716, "comment_id": 94713689, "body": "Yes. or you could just believe people with experience in the language. Up to you."}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1545856165, "post_id": 53936716, "comment_id": 94713703, "body": "I would re-phrase your title. The question seems to center around &quot;How to hide complex functions from the global namespace without using another module?&quot; or something akin to that."}, {"owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "reply_to_user": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1545856377, "post_id": 53936716, "comment_id": 94713748, "body": "@kabanus The question is really about how to create an anonymous function and put its reference in a dict but not the current namespace. Otherwise we can just use <code>def</code> to define that function."}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1545856454, "post_id": 53936716, "comment_id": 94713773, "body": "So the requirement is using lambda? Hiding/not creating the function in/from the global namespace is not enough?"}, {"owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "reply_to_user": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1545856635, "post_id": 53936716, "comment_id": 94713819, "body": "@kabanus No, you can use anything you can think of, if Python allows it."}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1545856678, "post_id": 53936716, "comment_id": 94713835, "body": "I guess I am asking if my answer does not cover it? I explicitly do not use <code>lambda</code>s."}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1545856794, "post_id": 53936716, "comment_id": 94713867, "body": "That last comment makes it seem like you do not care about using anonymous functions (that is an explicit term for <code>lambda</code> function)."}, {"owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "reply_to_user": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1545856994, "post_id": 53936716, "comment_id": 94713919, "body": "@kabanus The essence of this question is that <code>lambda</code> doesn&#39;t allow statements. Compare this to JavaScript anonymous functions which almost allow you to do anything."}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1545857068, "post_id": 53936716, "comment_id": 94713942, "body": "OK, then @juanpa has your answer."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1545857095, "post_id": 53936716, "comment_id": 94713948, "body": "@Cyker yeah man. I don&#39;t know what other type of answer you want, but Python anonymous functions are very restricted. Indeed, Guido wanted to flat-out eliminate them in the transition to Python 3."}], "answers": [{"comments": [{"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1545856535, "post_id": 53936752, "comment_id": 94713790, "body": "By the way, and I by no means endorse this, and it may annoy you slightly, there is a hack around this - using <code>exec</code>. Now that&#39;s a recipe for bugs! Or deleting the hard-drive for that matter."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1545856705, "post_id": 53936752, "comment_id": 94713842, "body": "@kabanus sure, I had added these sorts of highly hacky options as edits."}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1545856883, "post_id": 53936752, "comment_id": 94713889, "body": "Ah I see now - disagree a bit that a &quot;function in a function&quot; is hacky, but the rest I agree with completely."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 1, "creation_date": 1545856907, "post_id": 53936752, "comment_id": 94713897, "body": "@kabanus I didn&#39;t mean that, I mean using <code>eval</code>, <code>exec</code> or the <code>function</code> constructor"}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 4, "last_activity_date": 1545856028, "last_edit_date": 1545856028, "creation_date": 1545855694, "answer_id": 53936752, "question_id": 53936716, "link": "https://stackoverflow.com/questions/53936716/python-with-statement-in-anonymous-functions/53936752#53936752", "title": "python: `with` statement in anonymous functions", "body": "<p>Lambda expressions are quite restricted in what they can do. From the <a href=\"https://docs.python.org/3/reference/expressions.html#lambda\" rel=\"nofollow noreferrer\">docs</a></p>\n\n<blockquote>\n  <p>Note that functions created with lambda expressions cannot contain statements or annotations.</p>\n</blockquote>\n\n<p>Just use a full function definition. If you really want to avoid polluting the namespace, just <code>del</code> the name afterwards.</p>\n\n<p>Or if you simply want to avoid the module namespace from having a bunch of these small functions for code-completion purposes, use <code>_</code> in the front of the function name.</p>\n\n<p>If you truly want to avoid it, you <em>could</em> use the <code>function</code> constructor and dynamically compile code, etc. Or use some other kind of dynamic code execution, e.g. using <code>eval</code> or <code>exec</code>. But that is almost certainly not worth the trouble. \n Especially if you can just <code>del</code> the name after you are done using it.</p>\n\n<p>Or perhaps the best approach is to put all these functions in another namespace, like another module.</p>\n"}, {"tags": [], "owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "is_accepted": false, "score": 1, "last_activity_date": 1545855744, "creation_date": 1545855744, "answer_id": 53936759, "question_id": 53936716, "link": "https://stackoverflow.com/questions/53936716/python-with-statement-in-anonymous-functions/53936759#53936759", "title": "python: `with` statement in anonymous functions", "body": "<p>There are not many namespaces in Python - a function is basically the local one. That gives a good hint to a possible solution:</p>\n\n<pre><code>def gen_functions():\n    def f1(i):\n        print(i)\n    def f2(i):\n        print(i+1)\n    return f1,f2\n\nmy_funcs = dict(zip(('a','b'),gen_functions()))\nmy_funcs['a'](2)\nmy_funcs['b'](7)\nf1(3)\n</code></pre>\n\n<p>Run this:</p>\n\n<pre><code>&gt;py bla.py\n2\n8\nTraceback (most recent call last):\n  File \"bla.py\", line 11, in &lt;module&gt;\n    f1(3)\nNameError: name 'f1' is not defined\n</code></pre>\n\n<p>So you can make arbitrarily complex functions - to hide them from the global namespace you just enclose them in another function.</p>\n"}], "owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 53936752, "answer_count": 2, "score": 0, "last_activity_date": 1545856750, "creation_date": 1545855375, "last_edit_date": 1545856750, "question_id": 53936716, "link": "https://stackoverflow.com/questions/53936716/python-with-statement-in-anonymous-functions", "title": "python: `with` statement in anonymous functions", "body": "<p>Is it possible to use <code>with</code> statement in Python anonymous functions? For example, I have a function that writes <code>1</code> to a file:</p>\n\n<pre><code>def write_one(filename):\n    with open(filename, 'wt') as fp:\n        fp.write('1')\n</code></pre>\n\n<p>But this function is to be organized in a dict:</p>\n\n<pre><code>my_functions = {\n    ....\n}\n</code></pre>\n\n<p>Obviously I can write this statement to add this function to the dict:</p>\n\n<pre><code>my_functions['write_one'] = write_one\n</code></pre>\n\n<p>But the problem is the name <code>write_one</code> still exists in the current scope. How can I introduce an anonymous function without polluting the current namespace?</p>\n\n<p>For simple functions, I can use <code>lambda</code>. For slightly complicated functions, I can return a tuple to execute multiple statements (to be precise, expressions). But I didn't find a way to cleverly use <code>lambda</code> so that it can work with <code>with</code> statements. If this is impossible, where it says so in its documentation?</p>\n\n<p>The solution with a <code>del write_one</code> doesn't look good to me. I don't want this name to be introduced at all in the current namespace.</p>\n\n<p>In a word, what I want is something like this:</p>\n\n<pre><code>my_functions['write_one'] = def(filename):\n    with open(filename, 'wt') as fp:\n        fp.write('1')\n</code></pre>\n\n<p>This is kind of awkward with Python's indentation-based rules, I know. But it does its job.</p>\n"}, {"tags": ["python", "model-view-controller", "django-models", "many-to-many"], "comments": [{"owner": {"reputation": 4323, "user_id": 7301455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoUuY.png?s=128&g=1", "display_name": "Sergey Pugach", "link": "https://stackoverflow.com/users/7301455/sergey-pugach"}, "edited": false, "score": 0, "creation_date": 1545855784, "post_id": 53936714, "comment_id": 94713600, "body": "Does one particular <code>EnglishCertification</code> can be owned by several users?"}, {"owner": {"reputation": 51, "user_id": 5632487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48addd8b6d2e226a06c2a7c798b03590?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/5632487/andrea"}, "reply_to_user": {"reputation": 4323, "user_id": 7301455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoUuY.png?s=128&g=1", "display_name": "Sergey Pugach", "link": "https://stackoverflow.com/users/7301455/sergey-pugach"}, "edited": false, "score": 0, "creation_date": 1545859884, "post_id": 53936714, "comment_id": 94714741, "body": "Yes, The same &quot;EnglishCertification&quot; can be owned by many people!"}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 10833079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53d7b5fbfac5181ea21766af767ab527?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio Sousa", "link": "https://stackoverflow.com/users/10833079/sergio-sousa"}, "is_accepted": false, "score": 0, "last_activity_date": 1545859405, "creation_date": 1545859405, "answer_id": 53937316, "question_id": 53936714, "link": "https://stackoverflow.com/questions/53936714/many-to-many-relationship-django-models-with-extra-attributes/53937316#53937316", "title": "Many to Many relationship Django Models with Extra Attributes", "body": "<p>If you want to create models that exactly represent the entities as you described, you could simply create an additional Model similar to:</p>\n\n<pre><code>class UserCertification(models.Model):\n    user = models.ForeignKey('User', on_delete=models.CASCADE)\n    english_certification = models.ForeignKey('EnglishCertification', on_delete=models.CASCADE)\n    date = models.DateField()\n</code></pre>\n\n<p>Of course you will need to adapt the code above depending on your needs. For more information you can have a look at:</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/2.1/topics/db/examples/many_to_one/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.1/topics/db/examples/many_to_one/</a></p>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 51, "user_id": 5632487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48addd8b6d2e226a06c2a7c798b03590?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/5632487/andrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1545859405, "creation_date": 1545855362, "question_id": 53936714, "link": "https://stackoverflow.com/questions/53936714/many-to-many-relationship-django-models-with-extra-attributes", "title": "Many to Many relationship Django Models with Extra Attributes", "body": "<p>i'm a beginner in Django development (and MVC programming in general!)\nconsidering the following example how could I translate these entities into models?</p>\n\n<p>USER (id, name, surname)</p>\n\n<p>ENGLISH_CERTIFICATION (id, code, name)</p>\n\n<p>USER_CERTIFICATION (id, id_user, id_english_certification, date)</p>\n\n<hr>\n\n<pre><code>class User(models.Model):\n    name = models.CharField(max_length=64)\n    surname = models.CharField(max_length=64)\n    ???\n\nclass EnglishCertification(models.Model):\n    code= models.CharField(max_length=2)\n    name = models.CharField(max_length=64)\n    ???\n</code></pre>\n\n<p>Where i put the relationships and the field \"date\"?\nThank you!</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 4, "creation_date": 1545855408, "post_id": 53936671, "comment_id": 94713512, "body": "Ok, so presumably you coded up your presumed approach and will share it with us. What was wrong with it? Errors?"}, {"owner": {"reputation": 864, "user_id": 8627559, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a5ba760dc2b2ec8cabee703ad415414?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Dresl", "link": "https://stackoverflow.com/users/8627559/lucas-dresl"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1545855487, "post_id": 53936671, "comment_id": 94713534, "body": "I dont even know where to start :("}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1545855604, "post_id": 53936671, "comment_id": 94713560, "body": "With Google. You have a decent enough idea of the problem description. Please don&#39;t just throw it to SO in place of doing even basic research."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 2, "creation_date": 1545855640, "post_id": 53936671, "comment_id": 94713567, "body": "maybe search <code>pct_change + 1</code>"}], "answers": [{"tags": [], "owner": {"reputation": 347, "user_id": 9233230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zS4U3.jpg?s=128&g=1", "display_name": "guru", "link": "https://stackoverflow.com/users/9233230/guru"}, "is_accepted": true, "score": 1, "last_activity_date": 1545856381, "creation_date": 1545856381, "answer_id": 53936871, "question_id": 53936671, "link": "https://stackoverflow.com/questions/53936671/iteration-of-dividing-columns-matrix/53936871#53936871", "title": "Iteration of dividing columns, matrix", "body": "<p>pct_change is giving you the relative change from row to row or here column to column (see also the comment of @W-B).</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame([[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12]])  # toy dataframe\n\nprint(df)\n\ndf_new = df.pct_change(axis=1) + 1\n\nprint(df_new)\n\n\nxxx@yyy:~/Desktop/test$ python test.py                                                  \n   0   1   2   3                                                                                      \n0  1   2   3   4                                                                                      \n1  5   6   7   8                                                                                      \n2  9  10  11  12                                                                                      \n    0         1         2         3                                                                   \n0 NaN  2.000000  1.500000  1.333333                                                                   \n1 NaN  1.200000  1.166667  1.142857                                                                   \n2 NaN  1.111111  1.100000  1.090909   \n</code></pre>\n"}], "owner": {"reputation": 864, "user_id": 8627559, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a5ba760dc2b2ec8cabee703ad415414?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Dresl", "link": "https://stackoverflow.com/users/8627559/lucas-dresl"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "closed_date": 1545876319, "accepted_answer_id": 53936871, "answer_count": 1, "score": -3, "last_activity_date": 1545867233, "creation_date": 1545855079, "last_edit_date": 1545867233, "question_id": 53936671, "link": "https://stackoverflow.com/questions/53936671/iteration-of-dividing-columns-matrix", "closed_reason": "Needs more focus", "title": "Iteration of dividing columns, matrix", "body": "<p>From the following dataframe:</p>\n\n<p><a href=\"https://i.stack.imgur.com/85tc6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/85tc6.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want to divide each column just by the column before that one: what i mean is</p>\n\n<pre><code>column[2] / column[1]\ncolumn[3] / column[2]  \ncolumn[4] / column[3]  \ncolumn[5] / column[6]  \ncolumn[7] / column[8]\n...\ncolumn[13] / column[12]  \n</code></pre>\n"}, {"tags": ["python", "python-3.x", "biopython", "fasta"], "comments": [{"owner": {"reputation": 15, "user_id": 10836491, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jhscPazNl_8/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYOxDClLMO8o2DExdVQL5EoLnM8Sw/mo/photo.jpg?sz=128", "display_name": "AT-User", "link": "https://stackoverflow.com/users/10836491/at-user"}, "reply_to_user": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "edited": false, "score": 0, "creation_date": 1545864496, "post_id": 53936640, "comment_id": 94715894, "body": "Thanks for answering, but I need the output shown below and I can&#39;t get it with my &quot;code&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "is_accepted": true, "score": 0, "last_activity_date": 1545857037, "creation_date": 1545857037, "answer_id": 53936978, "question_id": 53936640, "link": "https://stackoverflow.com/questions/53936640/read-nucleotides-in-fasta-without-using-biopython/53936978#53936978", "title": "Read nucleotides in FASTA without using BioPython", "body": "<p>This will work. First we want to parse your fasta file into headers and sequences, then flatten the list of lists of sequences to a list of strings, then count the number of each nucleotide in the string, then print:</p>\n\n<pre><code>import sys\n\nfasta = sys.argv[1]\n\ndef fastaParser(infile):\n    seqs = []\n    headers = []\n    with open(infile) as f:\n        sequence = \"\"\n        header = None\n        for line in f:\n            if line.startswith('&gt;'):\n                headers.append(line[1:-1])\n                if header:\n                    seqs.append([sequence])\n                sequence = \"\"\n                header = line[1:]\n            else:\n                sequence += line.rstrip()\n        seqs.append([sequence])\n    return headers, seqs\n\nheaders, seqs = fastaParser(fasta)\n\nflat_seqs = [item for sublist in seqs for item in sublist]\n\ndef countNucs(instring):\n    # will count upper and lower case sequences, if do not want lower case remove .upper()\n    g = instring.upper().count('G') \n    c = instring.upper().count('C')\n    a = instring.upper().count('A')\n    t = instring.upper().count('T')\n    return 'G = {}, C = {}, A = {}, T = {}'.format(g, c, a, t)\n\nfor header, seq in zip(headers, flat_seqs):\n    print(header, countNucs(seq))\n</code></pre>\n\n<p>using your example fasta to run on the command-line:</p>\n\n<pre><code>[me]$ python3.5 fasta.py infasta.fa\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>chr12_9180206_+:chr12_118582391_+:a1;2 total_counts: 115 Seed: 4 K:    20 length: 79 G = 24, C = 17, A = 14, T = 24\nchr12_9180206_+:chr12_118582391_+:a2;2 total_counts: 135 Seed: 4 K: 20 length: 80 G = 16, C = 30, A = 17, T = 17\nchr1_8969882_-:chr1_568670_-:a1;113 total_counts: 7600 Seed: 225 K: 20 length: 86 G = 12, C = 31, A = 27, T = 16\nchr1_8969882_-:chr1_568670_-:a2;69 total_counts: 6987 Seed: 197 K: 20   length: 120 G = 20, C = 41, A = 31, T = 28\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1546154140, "post_id": 53937064, "comment_id": 94789336, "body": "This code doesn&#39;t run as shown, throwing &quot;NameError: name &#39;seq_name&#39; is not defined&quot;.  It also shouldn&#39;t ouput the last sequence as written, despite what is shown in your example output, where oddly the last sequence comes first."}], "tags": [], "owner": {"reputation": 448, "user_id": 6262370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0576e3f3f7c55bce4b18862d2bb337?s=128&d=identicon&r=PG&f=1", "display_name": "vkkodali", "link": "https://stackoverflow.com/users/6262370/vkkodali"}, "is_accepted": false, "score": 0, "last_activity_date": 1546256425, "last_edit_date": 1546256425, "creation_date": 1545857645, "answer_id": 53937064, "question_id": 53936640, "link": "https://stackoverflow.com/questions/53936640/read-nucleotides-in-fasta-without-using-biopython/53937064#53937064", "title": "Read nucleotides in FASTA without using BioPython", "body": "<p>I would use the <a href=\"https://docs.python.org/3.5/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\">Counter</a> dict for this as follows: </p>\n\n<pre><code>from collections import Counter\n\nwith open('temp.fasta', 'r') as f:\n    seq_name, d = '', ''\n    for line in f:\n        if line.startswith('&gt;'):\n            print(seq_name, d)\n            seq_name = line.rstrip('\\n')\n            d = Counter()\n        else:\n            for i in line.rstrip('\\n'):\n                d[i] += 1\n</code></pre>\n\n<p>I took the example you gave and saved it as <code>temp.fasta</code> and after running the code shown above, the output looks as follows: </p>\n\n<pre><code>&gt;chr1_8969882_-:chr1_568670_-:a2;69 total_counts: 6987 Seed: 197 K: 20   length: 120 Counter({'C': 41, 'A': 31, 'T': 28, 'G': 20})\n&gt;chr12_9180206_+:chr12_118582391_+:a1;2 total_counts: 115 Seed: 4 K:    20 length: 79 Counter({'T': 24, 'G': 24, 'C': 17, 'A': 14})\n&gt;chr12_9180206_+:chr12_118582391_+:a2;2 total_counts: 135 Seed: 4 K: 20 length: 80 Counter({'C': 30, 'T': 17, 'A': 17, 'G': 16})\n&gt;chr1_8969882_-:chr1_568670_-:a1;113 total_counts: 7600 Seed: 225 K: 20 length: 86 Counter({'C': 31, 'A': 27, 'T': 16, 'G': 12})\n</code></pre>\n\n<p>I will leave the formatting up to you. </p>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1546154500, "last_edit_date": 1546154500, "creation_date": 1546153787, "answer_id": 53975856, "question_id": 53936640, "link": "https://stackoverflow.com/questions/53936640/read-nucleotides-in-fasta-without-using-biopython/53975856#53975856", "title": "Read nucleotides in FASTA without using BioPython", "body": "<p>I feel @Kayvee's suggestion about <code>Counter</code> from the <em>collections</em> library is correct but the sample code that comes with that suggestion falls short in a number of ways, i.e. doesn't run and doesn't use <code>Counter</code> well.  Here's how I would approach this problem:</p>\n\n<pre><code>from collections import Counter\n\ndef display(index, counter):\n    print(\"Sequence {}:\".format(index))\n    for nucleotide in 'ACGT':\n        print(\"Number of {}'s: {}\".format(nucleotide, counter[nucleotide]))\n    print()\n\nwith open('assembledSeqs.fa') as file:\n    index = 0\n    counter = Counter()\n\n    for line in file:\n        string = line.rstrip('\\n')\n\n        if string.startswith('&gt;'):\n\n            if index &gt; 0:\n                display(index, counter)\n\n            index += 1\n            counter.clear()\n        else:\n            counter.update(string)\n\n    if counter:  # pop out the last one in the now closed file\n        display(index, counter)\n</code></pre>\n\n<p>This output should match what you get from BioPython:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt; python3 test.py\nSequence 1:\nNumber of A's: 14\nNumber of C's: 17\nNumber of G's: 24\nNumber of T's: 24\n\nSequence 2:\nNumber of A's: 17\nNumber of C's: 30\nNumber of G's: 16\nNumber of T's: 17\n\nSequence 3:\nNumber of A's: 27\nNumber of C's: 31\nNumber of G's: 12\nNumber of T's: 16\n\nSequence 4:\nNumber of A's: 31\nNumber of C's: 41\nNumber of G's: 20\nNumber of T's: 28\n\n&gt; \n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10836491, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jhscPazNl_8/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYOxDClLMO8o2DExdVQL5EoLnM8Sw/mo/photo.jpg?sz=128", "display_name": "AT-User", "link": "https://stackoverflow.com/users/10836491/at-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 0, "accepted_answer_id": 53936978, "answer_count": 3, "score": 0, "last_activity_date": 1546256425, "creation_date": 1545854929, "last_edit_date": 1545900355, "question_id": 53936640, "link": "https://stackoverflow.com/questions/53936640/read-nucleotides-in-fasta-without-using-biopython", "title": "Read nucleotides in FASTA without using BioPython", "body": "<p>I need to obtain the same output obtained with the following code, but without using BioPython. I'm stuck... Anyone could help me? Thanks!!!</p>\n\n<pre><code>from Bio import SeqIO\nrecords = SeqIO.parse(\"data/assembledSeqs.fa\", \"fasta\")\nfor i, seq_record in enumerate(records):\n    print(\"Sequence %d:\" % i)\n    print(\"Number of A's: %d\" % seq_record.seq.count(\"A\"))\n    print(\"Number of C's: %d\" % seq_record.seq.count(\"C\"))\n    print(\"Number of G's: %d\" % seq_record.seq.count(\"G\"))\n    print(\"Number of T's: %d\" % seq_record.seq.count(\"T\"))\n    print()\n</code></pre>\n\n<p>The FASTA file looks like this:</p>\n\n<pre><code>&gt;chr12_9180206_+:chr12_118582391_+:a1;2 total_counts: 115 Seed: 4 K:    20 length: 79\nTTGGTTTCGTGGTTTTGCAAAGTATTGGCCTCCACCGCTATGTCTGGCTGGTTTACGAGC\nAGGACAGGCCGCTAAAGTG\n&gt;chr12_9180206_+:chr12_118582391_+:a2;2 total_counts: 135 Seed: 4 K: 20 length: 80\nCTAACCCCCTACTTCCCAGACAGCTGCTCGTACAGTTTGGGCACATAGTCATCCCACTCG\nGCCTGGTAACACGTGCCAGC\n&gt;chr1_8969882_-:chr1_568670_-:a1;113 total_counts: 7600 Seed: 225 K: 20 length: 86\nCACTCATGAGCTGTCCCCACATTAGGCTTAAAAACAGATGCAATTCCCGGACGTCTAAAC\nCAAACCACTTTCACCGCCACACGACC\n&gt;chr1_8969882_-:chr1_568670_-:a2;69 total_counts: 6987 Seed: 197 K: 20   length: 120\nTGAACCTACGACTACACCGACTACGGCGGACTAATCTTCAACTCCTACATACTTCCCCCA\nTTATTCCTAGAACCAGGCGACCTGCGACTCCTTGACGTTGACAATCGAGTAGTACTCCCG\n</code></pre>\n\n<p>I've tried that, but doesn't work at all</p>\n\n<pre><code>def count_bases (fasta_file_name):\n    with open(fasta_file_name) as file_content:\n        for seqs in file_content:\n            if seqs.startswith('&gt;'):\n                for i, seq in enumerate('&gt;'):\n                    print(\"Sequence %d:\" % i)\n            else:\n                print(\"Number of A's: %d\" % seqs.count(\"A\"))\n                print(\"Number of C's: %d\" % seqs.count(\"C\"))\n                print(\"Number of G's: %d\" % seqs.count(\"G\"))\n                print(\"Number of T's: %d\" % seqs.count(\"T\"))\n                print()\n    return bases\n\nresult = count_bases('data/assembledSeqs.fa')\n</code></pre>\n"}, {"tags": ["python", "scrapy", "web-crawler", "sitemap"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1545855070, "post_id": 53936631, "comment_id": 94713422, "body": "Your indentation is surely wonky. You have a function under <code>if __name__ == &#39;__main__&#39;</code>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1545855156, "post_id": 53936631, "comment_id": 94713445, "body": "In any case, I don&#39;t see where you write to a file. I could be being blind as I&#39;m on a phone, but this isn&#39;t easy to follow."}, {"owner": {"reputation": 61, "user_id": 3968870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed22dfbe0bbe1776e0709b8342dd751d?s=128&d=identicon&r=PG&f=1", "display_name": "KwodKewe", "link": "https://stackoverflow.com/users/3968870/kwodkewe"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1545855643, "post_id": 53936631, "comment_id": 94713569, "body": "I&#39;m new to Scrapy and I just started learning python..."}, {"owner": {"reputation": 61, "user_id": 3968870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed22dfbe0bbe1776e0709b8342dd751d?s=128&d=identicon&r=PG&f=1", "display_name": "KwodKewe", "link": "https://stackoverflow.com/users/3968870/kwodkewe"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1545855826, "post_id": 53936631, "comment_id": 94713614, "body": "I Just simply copied the code from StackOverflow. As the original author to the code says &quot;This spider will get all the URLs from a sitemap and save them to a list. You can easily change it to output to a file or the console.&quot;. But I don&#39;t know how to get output to file! If the code had the comments then it would be helpful to understand the code for beginner like us..."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 3968870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed22dfbe0bbe1776e0709b8342dd751d?s=128&d=identicon&r=PG&f=1", "display_name": "KwodKewe", "link": "https://stackoverflow.com/users/3968870/kwodkewe"}, "edited": false, "score": 0, "creation_date": 1545931935, "post_id": 53936973, "comment_id": 94735964, "body": "Thanks for your suggestion. Running your full code gives me an error <code>AttributeError: &#39;dict&#39; object has no attribute &#39;append&#39;</code> if replacing only <code>print(sites)</code> with <code>yield sites</code> gives an error <code>[scrapy.core.scraper] ERROR: Spider must return Request, BaseItem, dict or None, got &#39;list&#39; in &lt;GET https:&#47;&#47;example.com&#47;sitemap.xml&gt;</code> and replacing only <code>sites = []</code> with <code>sites = {}</code> gives an error <code>AttributeError: &#39;dict&#39; object has no attribute &#39;append&#39;</code>"}], "tags": [], "owner": {"reputation": 1289, "user_id": 8852408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y2Qmh.jpg?s=128&g=1", "display_name": "Joaquin", "link": "https://stackoverflow.com/users/8852408/joaquin"}, "is_accepted": false, "score": 1, "last_activity_date": 1547646361, "last_edit_date": 1547646361, "creation_date": 1545857026, "answer_id": 53936973, "question_id": 53936631, "link": "https://stackoverflow.com/questions/53936631/how-to-write-python-scrapy-code-for-extracting-urls-present-in-sitemap-of-a-sit/53936973#53936973", "title": "How to write python scrapy code for extracting url&#39;s present in sitemap of a site and export it to csv", "body": "<p>First, you aren't make any request with scrapy, also you're combining <code>scrapy</code> with <code>requests</code>, that i think it's not the best idea. Try to change <code>__init__</code> to:</p>\n\n<pre><code>    def start_requests(self):\n        l = []\n        url = \"http://www.example.com\"\n        l.append(url + '/sitemap.xml')\n        l.append(url + '/robots.txt')\n        for link in l:\n            yield Request(link, callback=self._parse_sitemap)\n</code></pre>\n\n<p>Also, your <code>self._parse_sitemap</code> <strong>SHOULD</strong> return <code>dict-like</code> or <code>Request</code>(not only your <code>self._parse_sitemap</code>, every function in your scrapy spider, see <a href=\"https://docs.scrapy.org/en/latest/topics/spiders.html\" rel=\"nofollow noreferrer\">docs</a>):</p>\n\n<pre><code>def _parse_sitemap(self, response):\n\n        # handle here status responses(200,401,etc)\n        body = self._get_sitemap_body(response)\n        if body is None:\n            self.logger.info('Ignoring invalid sitemap: %s', response.url)\n            return\n\n        s = Sitemap(body)\n        sites = {} # You should return a dict-like item!\n        if s.type == 'sitemapindex':\n            for loc in iterloc(s, self.sitemap_alternate_links):\n                if any(x.search(loc) for x in self._follow):\n                    yield Request(loc, callback=self._parse_sitemap)\n        elif s.type == 'urlset':\n            for loc in iterloc(s):\n                for r, c in self._cbs:\n                    if r.search(loc):\n                        sites.append(loc)\n                        break\n        yield sites    # Change print to yield!, this is the way to populate your .csv file\n</code></pre>\n\n<p>The whole file(probably doesn't work, but explains the idea):</p>\n\n<pre><code># -*- coding: utf-8 -*-\nimport scrapy\nfrom scrapy.spiders import SitemapSpider\nfrom scrapy.spiders import Spider\nfrom scrapy.http import Request, XmlResponse\nfrom scrapy.utils.sitemap import Sitemap, sitemap_urls_from_robots\nfrom scrapy.utils.gz import gunzip, is_gzipped\nimport re\nimport requests\n\nclass GetpagesfromsitemapSpider(SitemapSpider):\n    name = \"myspider\"\n    handle_httpstatus_list = [404]\n\n    def parse(self, response):\n       print(response.url)\n\n    def _parse_sitemap(self, response):\n        # handle here status responses(200,401,etc)\n        body = self._get_sitemap_body(response)\n        if body is None:\n            self.logger.info('Ignoring invalid sitemap: %s', response.url)\n            return\n\n        s = Sitemap(body)\n        sites = {} # You should return a dict-like item!\n        if s.type == 'sitemapindex':\n            for loc in iterloc(s, self.sitemap_alternate_links):\n                if any(x.search(loc) for x in self._follow):\n                    yield Request(loc, callback=self._parse_sitemap)\n        elif s.type == 'urlset':\n            for loc in iterloc(s):\n                for r, c in self._cbs:\n                    if r.search(loc):\n                        sites.append(loc)\n                        break\n        yield sites    # Change print to yield!, this is the way to populate your .csv file\n\n    def start_requests(self):\n        l = []\n        url = \"http://www.example.com\"\n        l.append(url + '/sitemap.xml')\n        l.append(url + '/robots.txt')\n        for link in l:\n            yield Request(link, callback=self._parse_sitemap)\n\ndef iterloc(it, alt=False):\n    for d in it:\n        yield d['loc']\n\n        # Also consider alternate URLs (xhtml:link rel=\"alternate\")\n        if alt and 'alternate' in d:\n            for l in d['alternate']:\n                yield l\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 3968870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed22dfbe0bbe1776e0709b8342dd751d?s=128&d=identicon&r=PG&f=1", "display_name": "KwodKewe", "link": "https://stackoverflow.com/users/3968870/kwodkewe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1547646361, "creation_date": 1545854849, "question_id": 53936631, "link": "https://stackoverflow.com/questions/53936631/how-to-write-python-scrapy-code-for-extracting-urls-present-in-sitemap-of-a-sit", "title": "How to write python scrapy code for extracting url&#39;s present in sitemap of a site and export it to csv", "body": "<p>I've found the working solution to write python scrapy code for extracting url's present in sitemap of a site from <a href=\"https://stackoverflow.com/a/34984609\">here</a> but don't know how to export the data to CSV file!<br><br>\nWhen I try to run <strong>scrapy crawl myspider -o mydata.csv</strong> it returns an empty csv file, but list of urls are getting printed on screen!</p>\n\n<pre><code># -*- coding: utf-8 -*-\nimport scrapy\nfrom scrapy.spiders import SitemapSpider\nfrom scrapy.spiders import Spider\nfrom scrapy.http import Request, XmlResponse\nfrom scrapy.utils.sitemap import Sitemap, sitemap_urls_from_robots\nfrom scrapy.utils.gz import gunzip, is_gzipped\nimport re\nimport requests\n\nclass GetpagesfromsitemapSpider(SitemapSpider):\n    name = \"myspider\"\n    handle_httpstatus_list = [404]\n\n    def parse(self, response):\n       print(response.url)\n\n    def _parse_sitemap(self, response):\n        if response.url.endswith('/robots.txt'):\n            for url in sitemap_urls_from_robots(response.body):\n                yield Request(url, callback=self._parse_sitemap)\n        else:\n            body = self._get_sitemap_body(response)\n            if body is None:\n                self.logger.info('Ignoring invalid sitemap: %s', response.url)\n                return\n\n            s = Sitemap(body)\n            sites = []\n            if s.type == 'sitemapindex':\n                for loc in iterloc(s, self.sitemap_alternate_links):\n                    if any(x.search(loc) for x in self._follow):\n                        yield Request(loc, callback=self._parse_sitemap)\n            elif s.type == 'urlset':\n                for loc in iterloc(s):\n                    for r, c in self._cbs:\n                        if r.search(loc):\n                            sites.append(loc)\n                            break\n            print(sites)\n\n    def __init__(self, spider=None, *a, **kw):\n            super(GetpagesfromsitemapSpider, self).__init__(*a, **kw)\n            self.spider = spider\n            l = []\n            url = \"http://www.example.com/\"\n            resp = requests.head(url + \"/sitemap.xml\")\n            if (resp.status_code != 404):\n                l.append(resp.url)\n            else:\n                resp = requests.head(url + \"/robots.txt\")\n                if (resp.status_code == 200):\n                    l.append(resp.url)\n            self.sitemap_urls = l\n            print(self.sitemap_urls)\n\ndef iterloc(it, alt=False):\n    for d in it:\n        yield d['loc']\n\n        # Also consider alternate URLs (xhtml:link rel=\"alternate\")\n        if alt and 'alternate' in d:\n            for l in d['alternate']:\n                yield l\n</code></pre>\n"}, {"tags": ["python", "pandas", "xlsxwriter", "facebook-prophet"], "answers": [{"comments": [{"owner": {"reputation": 240, "user_id": 3971643, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/a1bd29cee7be42232b3dd1f920cf8ca8?s=128&d=identicon&r=PG&f=1", "display_name": "biggboss2019", "link": "https://stackoverflow.com/users/3971643/biggboss2019"}, "edited": false, "score": 0, "creation_date": 1555809258, "post_id": 53936700, "comment_id": 98229758, "body": "@d_d_kennetz: How should one approach when there are multiple subgropus present in data frame  and the output is needed in csv or Excel file with multiple tabe/sheet with group name? See: <a href=\"https://stackoverflow.com/questions/55545501/how-to-perform-time-series-analysis-that-contains-multiple-groups-in-python-usin\" title=\"how to perform time series analysis that contains multiple groups in python usin\">stackoverflow.com/questions/55545501/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "is_accepted": false, "score": 2, "last_activity_date": 1545855578, "last_edit_date": 1545855578, "creation_date": 1545855257, "answer_id": 53936700, "question_id": 53936617, "link": "https://stackoverflow.com/questions/53936617/writing-to-excel-file-from-forecasted-data/53936700#53936700", "title": "Writing to excel file from forecasted data", "body": "<p>in pandas, <code>.to_csv()</code> is in write mode by default but has an option to change it. In your example, you are iterating through filenames when writing <code>to_csv()</code>, so as it is currently written, you will overwrite your current files with the results from your code. If you'd like to write these dataframes to a new file, with each df appended to the bottom:</p>\n\n<pre><code>forecast.to_csv('final_data.csv', mode='a')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 395, "user_id": 10449301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e526f64bbaa3aa78a89413e067e8c542?s=128&d=identicon&r=PG&f=1", "display_name": "Command", "link": "https://stackoverflow.com/users/10449301/command"}, "is_accepted": false, "score": 1, "last_activity_date": 1545868493, "creation_date": 1545868493, "answer_id": 53938335, "question_id": 53936617, "link": "https://stackoverflow.com/questions/53936617/writing-to-excel-file-from-forecasted-data/53938335#53938335", "title": "Writing to excel file from forecasted data", "body": "<p>You can use .to_csv() with mode=\"a\" to accomplish your task or you can open the file in append mode and write to it using to_csv().</p>\n\n<p><strong>Using .to_csv() with append mode</strong></p>\n\n<pre><code>df.to_csv(\"file_name.csv\", mode=\"a\")\n</code></pre>\n\n<p><strong>Opening a file in append mode and using to_csv to write to it.</strong></p>\n\n<pre><code>with open(\"filename.csv\", 'a') as file:\n    df.to_csv(file, header=False)\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10674085, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sxtd4W-W5YA/AAAAAAAAAAI/AAAAAAAAAAw/3vNZ5fGjk3s/photo.jpg?sz=128", "display_name": "Brandon Brown", "link": "https://stackoverflow.com/users/10674085/brandon-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550528038, "creation_date": 1545854733, "last_edit_date": 1550528038, "question_id": 53936617, "link": "https://stackoverflow.com/questions/53936617/writing-to-excel-file-from-forecasted-data", "title": "Writing to excel file from forecasted data", "body": "<p>So I have several csv files that I am importing in and then I use FB Prophet to give me a forecast for the coming months data. I would like all of the forecasts to go to either a different csv or all on the same one. Currently it is only writing the last csv of filenames to a csv and not doing the others.</p>\n\n<pre><code>filenames=['example1.csv','example2.csv','example3.csv']\n\nfor f in filenames:\n    df=pd.read_csv(f)\n    df.columns=['ds','y']\n    df['ds']=pd.to_datetime(df['ds'])\n    m=Prophet(seasonality_mode='multiplicative')\n    m.fit(df)\n\n    future=m.make_future_dataframe(periods=6,freq='M')\n    forecast=m.predict(future)\n    forecast[['ds','yhat','yhat_lower','yhat_upper']].tail()\n    fig1=m.plot(forecast)\n    fig2=m.plot_components(forecast)\n\n    forecast.to_csv(f)\n</code></pre>\n\n<p>I expect all of the forecasts to be on one csv or have a new csv created for each filename that is looped through.</p>\n"}, {"tags": ["python", "testing", "pytest", "aiohttp"], "comments": [{"owner": {"reputation": 6953, "user_id": 4541045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdfffa01cff641ad93fa459b26d3cdb4?s=128&d=identicon&r=PG&f=1", "display_name": "ti7", "link": "https://stackoverflow.com/users/4541045/ti7"}, "edited": false, "score": 0, "creation_date": 1545857865, "post_id": 53936599, "comment_id": 94714160, "body": "What level are you trying to test at? If you&#39;re testing your application, you could try interacting via the HTTP interface with a library like <code>requests</code>. Starting your server could be done in tests&#39; setup or teardown stages."}], "owner": {"reputation": 4581, "user_id": 3599803, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7c976bab406c2a31849cfb1a017ee616?s=128&d=identicon&r=PG&f=1", "display_name": "user3599803", "link": "https://stackoverflow.com/users/3599803/user3599803"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 558, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1545854640, "creation_date": 1545854640, "question_id": 53936599, "link": "https://stackoverflow.com/questions/53936599/how-to-test-aiohttp-server", "title": "How to test aiohttp server?", "body": "<p>This is the code I've found in aiohttp docs:</p>\n\n<pre><code>async def test_hello(aiohttp_client):\n    app = web.Application()\n    app.router.add_get('/', hello)\n    client = await aiohttp_client(app)\n</code></pre>\n\n<p>This uses aiohttp_client pytest fixture. The problem is that it creates a new <code>web.Application()</code>, while my code already have a web.Application(). so Should I import it from the testing modules? Does it mean I need to expose it as a global variable (which I prefer not to)?</p>\n\n<p>My <code>server.py</code> code looks like:</p>\n\n<pre><code>async def init():\n    app = web.Application()\n    app.add_routes(.. )\n\nloop = asyncio.get_event_loop()\nloop.create_task(init())\nloop.run_forever()\n</code></pre>\n\n<p>So my <code>app</code> is not a global variable here.</p>\n\n<p>Second, does it possible, and is it correct, to actually run the server somehow before starting pytest? Because as I see these tests just interact with <code>web.Application()</code> itself, without listening to port and spawning a server process.</p>\n"}, {"tags": ["python", "beautifulsoup", "emoji"], "answers": [{"comments": [{"owner": {"reputation": 2743, "user_id": 2378622, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cf4b70fbe45771e21394f33b673862a0?s=128&d=identicon&r=PG&f=1", "display_name": "HelpASisterOut", "link": "https://stackoverflow.com/users/2378622/helpasisterout"}, "edited": false, "score": 0, "creation_date": 1545859826, "post_id": 53936690, "comment_id": 94714724, "body": "I got the error <code>TypeError: &#39;NoneType&#39; object is not subscriptable</code>. Tried to change a bit in the code but the error persists"}, {"owner": {"reputation": 10314, "user_id": 6124411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4E3zE.jpg?s=128&g=1", "display_name": "cody", "link": "https://stackoverflow.com/users/6124411/cody"}, "reply_to_user": {"reputation": 2743, "user_id": 2378622, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cf4b70fbe45771e21394f33b673862a0?s=128&d=identicon&r=PG&f=1", "display_name": "HelpASisterOut", "link": "https://stackoverflow.com/users/2378622/helpasisterout"}, "edited": false, "score": 0, "creation_date": 1545867734, "post_id": 53936690, "comment_id": 94716525, "body": "@HelpASisterOut Hmm, I&#39;ve updated my answer with the solution in context. Can you run it successfully? Perhaps there&#39;s something peculiar about the complete data you&#39;re testing with."}], "tags": [], "owner": {"reputation": 10314, "user_id": 6124411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4E3zE.jpg?s=128&g=1", "display_name": "cody", "link": "https://stackoverflow.com/users/6124411/cody"}, "is_accepted": false, "score": 1, "last_activity_date": 1545867633, "last_edit_date": 1545867633, "creation_date": 1545855180, "answer_id": 53936690, "question_id": 53936593, "link": "https://stackoverflow.com/questions/53936593/scrape-emojis-with-text-in-beautiful-soup/53936690#53936690", "title": "scrape emojis with text in beautiful soup", "body": "<p>How about the following, returning tuples of the targeted data for each <code>p</code>? I just used your example <code>p</code> element twice as the input for this test:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\ns = \"\"\"\n&lt;p class=\"text\"&gt;I love the night&lt;img alt=\"\ud83c\udf1f\" class=\"emoji\" src=\"etc\"/&gt;&lt;span&gt;!&lt;/span&gt;&lt;/p&gt;\n&lt;p class=\"text\"&gt;I love the night&lt;img alt=\"\ud83c\udf1f\" class=\"emoji\" src=\"etc\"/&gt;&lt;span&gt;!&lt;/span&gt;&lt;/p&gt;\n\"\"\"\n\nsoup = BeautifulSoup(s, 'lxml')\n\nelements = soup.find_all('p', {'class': 'text'})\nprint(list(map(lambda e: (e.getText(), e.find('img', {'class': 'emoji'})['alt']), elements)))\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>[('I love the night!', '\ud83c\udf1f'), ('I love the night!', '\ud83c\udf1f')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15697, "user_id": 458214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef09f4a6e7e0803825d17212d2dba67?s=128&d=identicon&r=PG", "display_name": "ewwink", "link": "https://stackoverflow.com/users/458214/ewwink"}, "is_accepted": true, "score": 1, "last_activity_date": 1545871298, "last_edit_date": 1545871298, "creation_date": 1545870276, "answer_id": 53938517, "question_id": 53936593, "link": "https://stackoverflow.com/questions/53936593/scrape-emojis-with-text-in-beautiful-soup/53938517#53938517", "title": "scrape emojis with text in beautiful soup", "body": "<p>if the <code>img.emoji</code> are optional you can try below, and it will preserve emoji position</p>\n\n<pre><code>urlobject = '''&lt;p class=\"text\"&gt;I love the night&lt;img alt=\"\ud83c\udf1f\" class=\"emoji\" src=\"etc\"/&gt;&lt;span&gt;!&lt;/span&gt;&lt;/p&gt;\n&lt;p class=\"text\"&gt;I love the day&lt;span&gt;!&lt;/span&gt;&lt;/p&gt;\n&lt;p class=\"text\"&gt;I love the music&lt;img alt=\"\ud83c\udf1f\" class=\"emoji\" src=\"etc\"/&gt; &lt;img alt=\"\ud83d\udd0a\" class=\"emoji\" src=\"etc\"/&gt;&lt;span&gt;!&lt;/span&gt;&lt;/p&gt;\n'''\n\nresult = []\nfor p in soup.find_all('p', {'class': 'text'}):\n    emoji = p.select('img.emoji')\n    if emoji:\n        for em in emoji:\n            index = p.contents.index(em)\n            p.contents[index].replace_with(em['alt'])\n    result.append(p.getText())\n\nprint(result)\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>['I love the night\ud83c\udf1f!', 'I love the day!', 'I love the music\ud83c\udf1f \ud83d\udd0a!']\n</code></pre>\n"}], "owner": {"reputation": 2743, "user_id": 2378622, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cf4b70fbe45771e21394f33b673862a0?s=128&d=identicon&r=PG&f=1", "display_name": "HelpASisterOut", "link": "https://stackoverflow.com/users/2378622/helpasisterout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 53938517, "answer_count": 2, "score": 3, "last_activity_date": 1545871298, "creation_date": 1545854590, "question_id": 53936593, "link": "https://stackoverflow.com/questions/53936593/scrape-emojis-with-text-in-beautiful-soup", "title": "scrape emojis with text in beautiful soup", "body": "<p>I am trying to scrape a page using python and beautiful soup <code>bs4</code></p>\n\n<p>I want to keep the <strong>text</strong> in the <code>&lt;p&gt;</code> element in the page along with the <strong>emojis</strong> in this text.</p>\n\n<p>The first attempt was:</p>\n\n<pre><code>import urllib\nimport urllib.request\nfrom bs4 import BeautifulSoup\n\nurlobject = urllib.request.urlopen(\"https://example.com\")\n\nsoup = BeautifulSoup(urlobject, \"lxml\")\n\nresult= list(map(lambda e: e.getText(), soup.find_all(\"p\", {\"class\": \"text\"})))\n</code></pre>\n\n<p>But this doesn't include emojis. I then tried to remove <code>.getText()</code> and just keep :</p>\n\n<pre><code>result= list(map(lambda e: e, soup.find_all(\"p\", {\"class\": \"text\"})))\n</code></pre>\n\n<p>Which made me realize the emojis in this website are in the <code>alt</code> of <code>img</code> tags:</p>\n\n<pre><code>&lt;p class=\"text\"&gt;I love the night&lt;img alt=\"\ud83c\udf1f\" class=\"emoji\" src=\"etc\"/&gt;&lt;span&gt;!&lt;/span&gt;&lt;/p&gt;\n</code></pre>\n\n<p>So what I want to do is :</p>\n\n<ul>\n<li>getText() for <code>p</code> with class <code>text</code></li>\n<li>But also get <code>alt</code> for <code>img</code> with <code>class=emoji</code></li>\n</ul>\n\n<p><strong>And keep the text and the emojis as one sentence.</strong></p>\n\n<p>Is there any way to do this?</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["python", "pip", "pyaudio"], "comments": [{"owner": {"reputation": 9718, "user_id": 8186898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s0cEU.jpg?s=128&g=1", "display_name": "Nino Filiu", "link": "https://stackoverflow.com/users/8186898/nino-filiu"}, "edited": false, "score": 1, "creation_date": 1545855042, "post_id": 53936589, "comment_id": 94713411, "body": "I don&#39;t think the <i>artificial intelligence</i> tag is relevant"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1545855294, "post_id": 53936589, "comment_id": 94713485, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16573755/installing-pyaudio-on-amd64-from-exe\">Installing pyaudio on AMD64 from .exe</a>"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1545855300, "post_id": 53936589, "comment_id": 94713487, "body": "<a href=\"https://stackoverflow.com/search?tab=newest&amp;q=%5bpyaudio%5d%20%5bwindows%5d%20install\">stackoverflow.com/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5882, "user_id": 1338797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ced463f5bf7534144c2d3d8fcb5f6d81?s=128&d=identicon&r=PG", "display_name": "Tomasz Gandor", "link": "https://stackoverflow.com/users/1338797/tomasz-gandor"}, "is_accepted": false, "score": 2, "last_activity_date": 1580225062, "last_edit_date": 1580225062, "creation_date": 1580083206, "answer_id": 59923873, "question_id": 53936589, "link": "https://stackoverflow.com/questions/53936589/installing-pyaudio-on-windows/59923873#59923873", "title": "Installing PyAudio on Windows", "body": "<p>Well, I've had just this problem when I wanted to install pylisten (which has PyAudio as a dependency).</p>\n\n<p>There are two problems here - first, your MSVC can't find portaudio.h and after that there will be a problem with the <code>min</code> macro when building. But first things first.</p>\n\n<h1>Get portaudio</h1>\n\n<p>This is a C dependency for PyAudio, so you need to have include files, in particular <code>portaudio.h</code> like you see on the screenshot. It's possible to get binaries for Windows, but if your using Anaconda, the simplest way to do it is to install it using <code>conda</code>:</p>\n\n<pre><code>(base) C:\\&gt; conda search portaudio\nLoading channels: done\n# Name                       Version           Build  Channel\nportaudio                     19.6.0      h0c8e037_3  pkgs/main\nportaudio                     19.6.0      hfa6e2cd_3  pkgs/main\n\n(base) C:\\&gt; conda install portaudio\n(...)\n</code></pre>\n\n<p>Next, we would like to know where the files from portaudio library actually went. There is no <code>conda package --list</code> command... (see here: <a href=\"https://github.com/conda/conda/pull/7457\" rel=\"nofollow noreferrer\">https://github.com/conda/conda/pull/7457</a>), so we need to do some magic found elsewhere on SO:</p>\n\n<pre><code>(base) C:\\&gt;dir %CONDA_PREFIX%\\conda-meta\\portaudio*\n(...)\n26.01.2020  13:17             5\u00a0577 portaudio-19.6.0-hfa6e2cd_3.json\n</code></pre>\n\n<p>We need to check this JSON and find the <code>files</code> property:</p>\n\n<pre><code>  \"extracted_package_dir\": \"C:\\\\Users\\\\(...)\\\\Anaconda3\\\\pkgs\\\\portaudio-19.6.0-hfa6e2cd_3\",                             \n  \"features\": \"\",\n  \"files\": [\n    \"Library/bin/portaudio.dll\",\n    \"Library/include/pa_asio.h\",\n    \"Library/include/pa_jack.h\",\n    \"Library/include/pa_linux_alsa.h\",\n    \"Library/include/pa_mac_core.h\",\n    \"Library/include/pa_win_ds.h\",\n    \"Library/include/pa_win_wasapi.h\",\n    \"Library/include/pa_win_waveformat.h\",\n    \"Library/include/pa_win_wdmks.h\",\n    \"Library/include/pa_win_wmme.h\",\n    \"Library/include/portaudio.h\",\n    \"Library/lib/portaudio.lib\",\n    \"Library/lib/portaudio_static.lib\",\n    \".nonadmin\"\n  ],                                                                                                                  \n</code></pre>\n\n<p>The <code>extracted_package_dir</code> (username removed above) actually amounts to:</p>\n\n<p><code>%CONDA_PREFIX%\\pkgs\\portaudio-19.6.0-hfa6e2cd_3</code>.</p>\n\n<p>So, for this specific build, the necessary include directories (<code>-I</code>) are:</p>\n\n<p><code>%CONDA_PREFIX%\\pkgs\\portaudio-19.6.0-hfa6e2cd_3\\Library\\include</code></p>\n\n<p>And link directories (<code>-L</code>) are:</p>\n\n<p><code>%CONDA_PREFIX%\\pkgs\\portaudio-19.6.0-hfa6e2cd_3\\Library\\lib</code></p>\n\n<p>This will be useful below.</p>\n\n<h1>Simple way, which doesn't work</h1>\n\n<p>Now if your Conda environment has MSVC 14.0 for building native extensions you should be fine with:</p>\n\n<pre><code>(base) C:\\&gt; pip install --global-option=build_ext --global-option=\"-I%CONDA_PREFIX%\\pkgs\\portaudio-19.6.0-hfa6e2cd_3\\Library\\include\" --global-option=\"-L%CONDA_PREFIX%\\pkgs\\portaudio-19.6.0-hfa6e2cd_3\\Library\\lib\" pyaudio\n</code></pre>\n\n<p>Now, it will find <code>portaudio.h</code>!</p>\n\n<p>But alas, at the time of writing, this fails with a compile error. I still put this here, because maybe the incompatibility with MSVC will be fixed.</p>\n\n<h1>The hard, but successful, way</h1>\n\n<p>We need to hack the sources of PyAudio. This can be done like so:</p>\n\n<pre><code>(base) C:\\&gt;pip download pyaudio\n</code></pre>\n\n<p>This will download a file like <code>PyAudio-0.2.11.tar.gz</code> (version number may differ in the future). You need to unpack it, using <code>tar</code>. I have it in <code>C:\\Windows\\system32</code> - maybe because of WSL. You can also use 7-zip to unpack it. Anyway:</p>\n\n<pre><code>(base) C:\\&gt;tar xf PyAudio-0.2.11.tar.gz\n(... unpacked ...)\n(base) C:\\&gt;cd PyAudio-0.2.11\n(base) C:\\PyAudio-0.2.11&gt;\n</code></pre>\n\n<p>Now to get the same result as before, you need to pass the special arguments to <code>setup.py</code> (in a different way than it's done for <code>pip</code>, of course):</p>\n\n<pre><code>(base) C:\\PyAudio-0.2.11&gt;python setup.py build_ext --include-dirs=\"%CONDA_PREFIX%\\pkgs\\portaudio-19.6.0-hfa6e2cd_3\\Library\\include\" --library-dirs=\"%CONDA_PREFIX%\\pkgs\\portaudio-19.6.0-hfa6e2cd_3\\Library\\lib\" install\n(compile errors: min macro redefinition, __typeof__ undefined)\n</code></pre>\n\n<p>Now, edit the file <code>src\\_portaudiomodule.c</code>, and delete/comment out these lines (right at the top, line ~39):</p>\n\n<pre><code>#define min(a, b)           \\\n  ({                        \\\n    __typeof__(a) _a = (a); \\\n    __typeof__(b) _b = (b); \\\n    _a &lt; _b ? _a : _b;      \\\n  })\n</code></pre>\n\n<p>This trivial macro is the culprit. If you want to submit a fix to Mr Pham (<a href=\"http://people.csail.mit.edu/hubert/pyaudio/\" rel=\"nofollow noreferrer\">http://people.csail.mit.edu/hubert/pyaudio/</a>), don't delete it, but use something like \n<code>#ifndef _MSC_VER</code> ... <code>#endif</code>.</p>\n\n<p>Save the file and run this (again):</p>\n\n<pre><code>(base) C:\\PyAudio-0.2.11&gt;python setup.py build_ext --include-dirs=\"%CONDA_PREFIX%\\pkgs\\portaudio-19.6.0-hfa6e2cd_3\\Library\\include\" --library-dirs=\"%CONDA_PREFIX%\\pkgs\\portaudio-19.6.0-hfa6e2cd_3\\Library\\lib\" install\n</code></pre>\n\n<p>Everything should be fine now.</p>\n\n<h1><em>EDIT</em>: TL;DR easy way</h1>\n\n<p>After checking once again, I saw <code>pyaudio</code> in <code>https://repo.anaconda.com/pkgs/main/win-64</code>. This means, if you're using Anaconda you can just do:</p>\n\n<pre><code>conda install pyaudio\n</code></pre>\n\n<p>I'm leaving the rest of this answer for educational purposes.</p>\n"}], "owner": {"reputation": 21, "user_id": 10836479, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7DDoIUFIDxM/AAAAAAAAAAI/AAAAAAAAA8E/ZINn77nIFyo/photo.jpg?sz=128", "display_name": "RobuxKing82", "link": "https://stackoverflow.com/users/10836479/robuxking82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4357, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1580225062, "creation_date": 1545854563, "last_edit_date": 1546200072, "question_id": 53936589, "link": "https://stackoverflow.com/questions/53936589/installing-pyaudio-on-windows", "title": "Installing PyAudio on Windows", "body": "<h1>Installing PyAudio on Windows 10 error</h1>\n\n<p><b>I want to install PyAudio</b></p>\n\n<p>I have <strong>Windows 10</strong>, <strong>Python 3.7</strong>, <strong>pip 8.1</strong></p>\n\n<p>I'm installing it in Command Prompt with command <code>pip install PyAudio</code>\n<br>\nBut there's an error <code>error: command 'D:\\\\VisualStudio2017\\\\VC\\\\Tools\\\\MSVC\\\\14.16.27023\\\\bin\\\\HostX86\\\\x86\\\\cl.exe' failed with exit status 2</code></p>\n\n<pre><code>Command \"c:\\python37\\python.exe -u -c \"import setuptools, tokenize;__file__='C:\\\\Users\\\\USER\\\\AppData\\\\Local\\\\Temp\\\\pip-install-is1aobj6\\\\pyaudio\\\\setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record C:\\Users\\USER\\AppData\\Local\\Temp\\pip-record-50bh4kz0\\install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in C:\\Users\\USER\\AppData\\Local\\Temp\\pip-install-is1aobj6\\pyaudio\\\n</code></pre>\n\n<p>Here's a\n<a href=\"https://i.stack.imgur.com/hlIuq.png\" rel=\"nofollow noreferrer\">screenshot</a></p>\n\n<p><em>Thanks for reading my question. I hope you can help :D</em></p>\n"}, {"tags": ["python", "pandas", "numpy", "matplotlib", "bar-chart"], "comments": [{"owner": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "edited": false, "score": 0, "creation_date": 1545855256, "post_id": 53936536, "comment_id": 94713474, "body": "Use <code>pandas.DataFrame.reindex</code> to reindex your dataframe and set the missing ones. It&#39;ll fill with <code>NaN</code> but you can change that to <code>0</code> if you wish."}], "answers": [{"tags": [], "owner": {"reputation": 974, "user_id": 3898460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/174b86446bf20ba4d87daaccb80eb53f?s=128&d=identicon&r=PG&f=1", "display_name": "gepcel", "link": "https://stackoverflow.com/users/3898460/gepcel"}, "is_accepted": false, "score": 0, "last_activity_date": 1545876373, "creation_date": 1545876373, "answer_id": 53939000, "question_id": 53936536, "link": "https://stackoverflow.com/questions/53936536/plot-bar-graph-using-matplotlib-with-different-dataframe-shape/53939000#53939000", "title": "Plot bar graph using matplotlib with different dataframe shape", "body": "<p>@busybear gave the right answer in the comment. Your code is not runnable. If I would make a guess, you can try the following code:</p>\n\n<pre><code>glot = sample_lot_number.groupby(\"Validity\")\nvlot = sample1_lot_number.groupby(\"Validity\")\ndplot = Data_Package_Lot_Number.dplot.groupby(\"Validity\")\ndf1 = glot.Lifecycle.count()\ndf2 = vlot.Lifecycle.count().reindex(df1)\ndf3 = dplot.Lifecycle.count().reindex(df1).fillna(0)\n\nind = np.arange(4)\nwidth = 0.15\nax = plt.subplot()\np1 = ax.bar(ind+width, df1, width)\np2 = ax.bar(ind, df2, width)\np3 = ax.bar(ind-width, df3, width)\nax.set_xticks(ind + width / 2)\nax.set_xticklabels((\"Empty\",\"InValid\",\"Multiple Entries\",\"Valid\"))\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10355900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448fe0318f33f8cd41814cb0282e6364?s=128&d=identicon&r=PG&f=1", "display_name": "premganesh", "link": "https://stackoverflow.com/users/10355900/premganesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545928279, "creation_date": 1545854259, "last_edit_date": 1545928279, "question_id": 53936536, "link": "https://stackoverflow.com/questions/53936536/plot-bar-graph-using-matplotlib-with-different-dataframe-shape", "title": "Plot bar graph using matplotlib with different dataframe shape", "body": "<p>I have three different Data frame as below.first two has the shape as (4,) and the last has the shape as (2,). How to convert the shape of the data frame? </p>\n\n<p>When I try to plot all the three in a bar graph, the last DF fails with \"ValueError: shape mismatch: objects cannot be broadcast to a single shape\"</p>\n\n<p>How to plot the DF3 in the same bar graph by showing \"Empty\" and \"Invalid\" as 0.</p>\n\n<p>DF1:</p>\n\n<pre><code>Validity\n\nEmpty               2672\n\nInValid              581\n\nMultiple Entries     282\n\nValid               5526\n\nName: Lifecycle, dtype: int64\n</code></pre>\n\n<p>DF2:</p>\n\n<pre><code>Validity\n\nEmpty                1920\n\nInValid               471\n\nMultiple Entries     2325\n\nValid               33446\n\nName: Lifecycle, dtype: int64\n</code></pre>\n\n<p>DF3:</p>\n\n<pre><code>Validity\n\nMultiple Entries    10334\n\nValid               11984\n\nName: Lifecycle, dtype: int64\n</code></pre>\n\n<p>Below is my code. </p>\n\n<pre><code>glot = sample_lot_number.groupby(\"Validity\")\n\nvlot = sample1_lot_number.groupby(\"Validity\")\n\ndplot = Data_Package_Lot_Number.dplot.groupby(\"Validity\")\n\nind = np.arange(4)\n\nwidth = 0.15\n\nax = plt.subplot()\n\np1 = ax.bar(ind+width,glot.Lifecycle.count(), width)\n\np2 = ax.bar(ind,vlot.Lifecycle.count(), width)\n\np3 = ax.bar(ind-width,dplot.Lifecycle.count(), width)\n\nax.set_xticks(ind + width / 2)\n\nax.set_xticklabels((\"Empty\",\"InValid\",\"Multiple Entries\",\"Valid\"))\n</code></pre>\n"}, {"tags": ["python", "numpy", "immutability", "mutable", "in-place"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1545854175, "post_id": 53936508, "comment_id": 94713139, "body": "In general <code>x += y</code> is not equivalent to <code>x = x + y</code>. The former is defined by whatever the object&#39;s type defines for <code>__iadd__</code> and the latter by however the type defines <code>__add__</code>. The <i>convention</i> is that if the type is mutable, <code>__iadd__</code> should work <i>in-place</i>. So, for example, with a <code>list</code> object, <code>+=</code> will modify the list in-place, but for <code>tuple</code> objects or <code>int</code> objects, which are immutable, new objects will be created and assigned to <code>x</code>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1545854391, "post_id": 53936508, "comment_id": 94713200, "body": "@Juana.arrivillaga it&#39;s surely worth noting that this holds for python, and is not numpy-specific, where copies may have to be made implicitly"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1545855039, "post_id": 53936508, "comment_id": 94713408, "body": "@roganjosh yes, indeed, in my examples, I never mention <code>numpy</code> objects, but just to be explicit, this is for <i>any</i> Python object. And for user-defined objects, really, <code>__iadd__</code> and <code>__add__</code> will have behavior defined by the <i>user</i> and could really do anything."}], "owner": {"reputation": 4383, "user_id": 2593878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d48b3fc093f704b646e75703dea29107?s=128&d=identicon&r=PG", "display_name": "dkv", "link": "https://stackoverflow.com/users/2593878/dkv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "closed_date": 1545854109, "answer_count": 0, "score": 1, "last_activity_date": 1545853989, "creation_date": 1545853989, "question_id": 53936508, "link": "https://stackoverflow.com/questions/53936508/numpy-array-in-place-update-or-implicit-copy", "closed_reason": "Duplicate", "title": "Numpy array in-place update or implicit copy", "body": "<p>If I add an array to another, Numpy appears to be making a copy of the original array:</p>\n\n<pre><code>&gt;&gt;&gt; a = np.array([2,3])\n...: b = a\n...: a = a+np.array([1,1])\n...: print a, b\n[3 4] [2 3]\n</code></pre>\n\n<p>In contrast, if I use the <code>+=</code> idiom, the original array appears to be changed in place.</p>\n\n<pre><code>&gt;&gt;&gt; a = np.array([2,3])\n...: b = a\n...: a += np.array([1,1])\n...: print a, b\n[3 4] [3 4]\n</code></pre>\n\n<p>What is happening here? When are arrays changed in-place and when are they automatically copied? </p>\n"}, {"tags": ["python", "matplotlib", "grid"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1545854044, "post_id": 53936482, "comment_id": 94713098, "body": "There&#39;s far more going on in that image than simply plotting a grid. This is too broad; you haven&#39;t given the necessary data, code or context to produce that figure."}, {"owner": {"reputation": 57, "user_id": 8480300, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZZNimX3jamY/AAAAAAAAAAI/AAAAAAAABXY/ycRbNOyU8qU/photo.jpg?sz=128", "display_name": "Jonathan von Tamer", "link": "https://stackoverflow.com/users/8480300/jonathan-von-tamer"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1545855890, "post_id": 53936482, "comment_id": 94713633, "body": "I know that, I just wanted the grid for the moment. I&#39;ll try to do what&#39;s left on my own. :)"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 8480300, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZZNimX3jamY/AAAAAAAAAAI/AAAAAAAABXY/ycRbNOyU8qU/photo.jpg?sz=128", "display_name": "Jonathan von Tamer", "link": "https://stackoverflow.com/users/8480300/jonathan-von-tamer"}, "edited": false, "score": 0, "creation_date": 1545855688, "post_id": 53936532, "comment_id": 94713577, "body": "Sorry I&#39;m new, I don&#39;t find the button to accept :/"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "reply_to_user": {"reputation": 57, "user_id": 8480300, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZZNimX3jamY/AAAAAAAAAAI/AAAAAAAABXY/ycRbNOyU8qU/photo.jpg?sz=128", "display_name": "Jonathan von Tamer", "link": "https://stackoverflow.com/users/8480300/jonathan-von-tamer"}, "edited": false, "score": 0, "creation_date": 1545855895, "post_id": 53936532, "comment_id": 94713637, "body": "You can click the grey check mark next to my answer"}, {"owner": {"reputation": 4551, "user_id": 4212158, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-MeijoBfHUlw/AAAAAAAAAAI/AAAAAAAAIUo/hFq1fS9ga6U/photo.jpg?sz=128", "display_name": "crypdick", "link": "https://stackoverflow.com/users/4212158/crypdick"}, "edited": false, "score": 0, "creation_date": 1587244043, "post_id": 53936532, "comment_id": 108436701, "body": "add <code>+ 0.5</code> to the x and y arrays to get the markers in the middle of the grid cells"}], "tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": true, "score": 2, "last_activity_date": 1545856183, "last_edit_date": 1545856183, "creation_date": 1545854215, "answer_id": 53936532, "question_id": 53936482, "link": "https://stackoverflow.com/questions/53936482/how-to-make-a-grid-on-python-using-matplotlib-or-other-library/53936532#53936532", "title": "How to make a grid on python (using matplotlib or other library)", "body": "<p>Without having access to the data to reproduce your figure (without grid), it's impossible to provide a working code to you. However, below is one basic example on how to do it. The trick here is to use major ticks at spacing of 1 ranging from 1 to 13 on the x-axis and ranging from 1 to 8 on y-axis. Then you need to turn on the grid using <code>plt.grid()</code> and use <code>linestyle='dotted'</code> to get the grid similar to what you want.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nx = np.random.randint(1, 14, 50)\ny = np.random.randint(1, 9, 50)\n\nplt.plot(x, y, 'bo')\nplt.xticks(range(1, 14));\nplt.yticks(range(1, 9));\nplt.grid(linestyle='dotted')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/B9JTI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B9JTI.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 57, "user_id": 8480300, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZZNimX3jamY/AAAAAAAAAAI/AAAAAAAABXY/ycRbNOyU8qU/photo.jpg?sz=128", "display_name": "Jonathan von Tamer", "link": "https://stackoverflow.com/users/8480300/jonathan-von-tamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 53936532, "answer_count": 1, "score": 2, "last_activity_date": 1545856183, "creation_date": 1545853828, "last_edit_date": 1545854408, "question_id": 53936482, "link": "https://stackoverflow.com/questions/53936482/how-to-make-a-grid-on-python-using-matplotlib-or-other-library", "title": "How to make a grid on python (using matplotlib or other library)", "body": "<p>I want to do a grid on python. I know it's possible using <code>matplotlib</code>, but I do struggle.</p>\n\n<p>The grid I want to obtain is like the one on this graph. This means 8 row, and 13 columns.</p>\n\n<p><a href=\"https://i.stack.imgur.com/dcWQ9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dcWQ9.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pdf"], "comments": [{"owner": {"reputation": 340, "user_id": 10300416, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205248584090807/picture?type=large", "display_name": "Nick Dima", "link": "https://stackoverflow.com/users/10300416/nick-dima"}, "edited": false, "score": 0, "creation_date": 1545853769, "post_id": 53936472, "comment_id": 94713027, "body": "Look here: <a href=\"https://stackoverflow.com/q/32667398/10300416\">stackoverflow.com/q/32667398/10300416</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7231, "user_id": 1155282, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/iEBuN.png?s=128&g=1", "display_name": "Irshu", "link": "https://stackoverflow.com/users/1155282/irshu"}, "edited": false, "score": 0, "creation_date": 1555230125, "post_id": 53937195, "comment_id": 98032115, "body": "does extract support encrypted pdf?"}], "tags": [], "owner": {"reputation": 71, "user_id": 9196061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vg-UkvHf16Q/AAAAAAAAAAI/AAAAAAAAEtA/4KCivju-6C4/photo.jpg?sz=128", "display_name": "Gabriel Wolf", "link": "https://stackoverflow.com/users/9196061/gabriel-wolf"}, "is_accepted": false, "score": 4, "last_activity_date": 1545858618, "creation_date": 1545858618, "answer_id": 53937195, "question_id": 53936472, "link": "https://stackoverflow.com/questions/53936472/best-practice-to-read-pdf-into-python/53937195#53937195", "title": "Best practice to read pdf into python", "body": "<p><strong>First Option : PyPDF2</strong></p>\n\n<p>First run this in cmd to install PyPDF2: (may work better than PyPDF3 which you already tried)</p>\n\n<pre><code>pip install PyPDF2\n</code></pre>\n\n<p>Then to extract text from a pdf file use the following code:</p>\n\n<pre><code># importing required modules \nimport PyPDF2 \n\n# creating a pdf file object \npdfFileObj = open('example.pdf', 'rb') \n\n# creating a pdf reader object \npdfReader = PyPDF2.PdfFileReader(pdfFileObj) \n\n# printing number of pages in pdf file \nprint(pdfReader.numPages) \n\n# creating a page object \npageObj = pdfReader.getPage(0) \n\n# extracting text from page \nprint(pageObj.extractText()) \n\n# closing the pdf file object \npdfFileObj.close() \n</code></pre>\n\n<p><strong>2nd Option : Textract</strong></p>\n\n<p>Run this in cmd to install textract</p>\n\n<pre><code>pip install textract\n</code></pre>\n\n<p>Then to read a pdf use the following code:</p>\n\n<pre><code>import textract\ntext = textract.process('path/to/pdf/file', method='pdfminer')\n</code></pre>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 2007, "user_id": 5069119, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3b5871da6a959ec505c872df80be6631?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/5069119/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5858, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1594341117, "creation_date": 1545853690, "last_edit_date": 1589417496, "question_id": 53936472, "link": "https://stackoverflow.com/questions/53936472/best-practice-to-read-pdf-into-python", "title": "Best practice to read pdf into python", "body": "<p>I'm trying to read a pdf document ( I removed some content cause of sensitive data: <a href=\"https://ufile.io/bgghw\" rel=\"nofollow noreferrer\">https://ufile.io/bgghw</a> ) into python. I have to work with the check boxes and perform action's based on these and other text.</p>\n\n<p>I tried PyPDF3 but it only gave corrupted output, after a little research I found pdfminer which sounds promising with the downside to use python 2.7.</p>\n\n<p>I'm not sure if there are other package's or there is like a best practise for working with pdf's in python as all the information I got is several years old and most of the information is very contrary. \nOf course I could settle with the best package for my case :)</p>\n\n<p>Thanks for any advice!</p>\n"}, {"tags": ["python", "alpine", "libmagic"], "answers": [{"comments": [{"owner": {"reputation": 4597, "user_id": 231670, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1dcc53ff842226265201d8aad0627371?s=128&d=identicon&r=PG", "display_name": "Daniel Quinn", "link": "https://stackoverflow.com/users/231670/daniel-quinn"}, "edited": false, "score": 0, "creation_date": 1545858308, "post_id": 53936722, "comment_id": 94714299, "body": "Wow.  There must be an easier way than this, no?  How do other packages that need libmagic manage to be portable across distros?"}, {"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "reply_to_user": {"reputation": 4597, "user_id": 231670, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1dcc53ff842226265201d8aad0627371?s=128&d=identicon&r=PG", "display_name": "Daniel Quinn", "link": "https://stackoverflow.com/users/231670/daniel-quinn"}, "edited": false, "score": 0, "creation_date": 1545860316, "post_id": 53936722, "comment_id": 94714867, "body": "@DanielQuinn: Alpine manages to have no combination of packages that allow <code>ctypes</code>&#39;s <code>find_library</code> to work. <a href=\"https://github.com/docker-library/python/issues/111\" rel=\"nofollow noreferrer\">It&#39;s a known</a> <a href=\"https://bugs.alpinelinux.org/issues/4512\" rel=\"nofollow noreferrer\">bug</a> so you either can wait for a few months (or years in this case) for it to be fixed upstream or apply the patch yourself."}, {"owner": {"reputation": 4597, "user_id": 231670, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1dcc53ff842226265201d8aad0627371?s=128&d=identicon&r=PG", "display_name": "Daniel Quinn", "link": "https://stackoverflow.com/users/231670/daniel-quinn"}, "edited": false, "score": 0, "creation_date": 1545864580, "post_id": 53936722, "comment_id": 94715917, "body": "Wow.  Well good to know!  I guess I&#39;ll add your stuff above to my Dockerfile and include a reference to this in the documentation for my module."}], "tags": [], "owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "is_accepted": true, "score": 3, "last_activity_date": 1545857692, "last_edit_date": 1545857692, "creation_date": 1545855428, "answer_id": 53936722, "question_id": 53936467, "link": "https://stackoverflow.com/questions/53936467/how-to-get-the-file-magic-module-working-on-alpine-linux/53936722#53936722", "title": "How to get the file-magic module working on Alpine Linux?", "body": "<p>Python-Magic has <a href=\"https://github.com/ahupp/python-magic/blob/master/magic.py#L177\" rel=\"nofollow noreferrer\">a hard-coded fallback</a> for Alpine Linux so you might be in for a hard time with file-magic, which just uses <code>ctypes.util.find_library('magic')</code> and apparently can't find your library.</p>\n\n<p>The exact behavior of <code>ctypes.util.find_library</code> is <a href=\"https://github.com/python/cpython/blob/e42b705188271da108de42b55d9344642170aa2b/Lib/ctypes/util.py#L92-L313\" rel=\"nofollow noreferrer\">pretty complicated</a> but if you trace through the code and see which methods it attempts to use on your platform you will probably find a way to get it to find the library (probably one of <code>gcc</code>, <code>/sbin/ldconfig</code>, or <code>objdump</code>).</p>\n\n<p>Another solution is to patch <code>ctypes.py</code> to properly handle systems like Alpine:</p>\n\n<pre><code>wget https://patch-diff.githubusercontent.com/raw/python/cpython/pull/10461.patch -O - | patch /usr/local/lib/python3.7/ctypes/util.py\n</code></pre>\n\n<p>Now you just need to set <code>LD_LIBRARY_PATH</code> and Python can find the library:</p>\n\n<pre><code>/ # LD_LIBRARY_PATH=\"/usr/lib/\" python -c \"import ctypes.util; print(ctypes.util.find_library('magic'))\"\nlibmagic.so.1\n</code></pre>\n"}], "owner": {"reputation": 4597, "user_id": 231670, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1dcc53ff842226265201d8aad0627371?s=128&d=identicon&r=PG", "display_name": "Daniel Quinn", "link": "https://stackoverflow.com/users/231670/daniel-quinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1172, "favorite_count": 0, "accepted_answer_id": 53936722, "answer_count": 1, "score": 1, "last_activity_date": 1545857692, "creation_date": 1545853638, "question_id": 53936467, "link": "https://stackoverflow.com/questions/53936467/how-to-get-the-file-magic-module-working-on-alpine-linux", "title": "How to get the file-magic module working on Alpine Linux?", "body": "<p>I'm trying to use file-magic on Alpine Linux and it keeps blowing up with <code>AttributeError: Symbol not found: magic_open</code> whenever I import the <code>magic</code> module.</p>\n\n<p>I noted that there's two Python modules out there with the same <code>magic</code> namespace, but as most Linux distros appear to be using <code>file-magic</code> and not <code>python-magic</code>, I decided to make my module dependent on the former.  However on Alpine, only <code>python-magic</code> appears to work:</p>\n\n<p>Setup Alpine &amp; install libmagic:</p>\n\n<pre><code>$ docker run --rm -it python:3-alpine /bin/sh\n/ # apk add libmagic\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.8/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.8/community/x86_64/APKINDEX.tar.gz\n(1/1) Installing libmagic (5.32-r0)\nOK: 21 MiB in 35 packages\n</code></pre>\n\n<p>Install file-magic:</p>\n\n<pre><code>/ # pip install file-magic\nCollecting file-magic\n  Downloading https://files.pythonhosted.org/packages/bb/7e/b256e53a6558afd348387c3119dc4a1e3003d36030584a427168c8d72a7a/file_magic-0.4.0-py3-none-any.whl\nInstalling collected packages: file-magic\nSuccessfully installed file-magic-0.4.0\n</code></pre>\n\n<p>It doesn't work though:</p>\n\n<pre><code>/ # python\nPython 3.7.1 (default, Dec 21 2018, 03:21:42) \n[GCC 6.4.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import magic\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python3.7/site-packages/magic.py\", line 61, in &lt;module&gt;\n    _open = _libraries['magic'].magic_open\n  File \"/usr/local/lib/python3.7/ctypes/__init__.py\", line 369, in __getattr__\n    func = self.__getitem__(name)\n  File \"/usr/local/lib/python3.7/ctypes/__init__.py\", line 374, in __getitem__\n    func = self._FuncPtr((name_or_ordinal, self))\nAttributeError: Symbol not found: magic_open\n&gt;&gt;&gt; \n</code></pre>\n\n<p>Swap out file-magic for python-magic:</p>\n\n<pre><code>$ pip uninstall file-magic\nUninstalling file-magic-0.4.0:\n  Would remove:\n    /usr/local/lib/python3.7/site-packages/file_magic-0.4.0.dist-info/*\n    /usr/local/lib/python3.7/site-packages/magic.py\nProceed (y/n)? y\n  Successfully uninstalled file-magic-0.4.0\n\n/ # pip install python-magic\nCollecting python-magic\n  Downloading https://files.pythonhosted.org/packages/42/a1/76d30c79992e3750dac6790ce16f056f870d368ba142f83f75f694d93001/python_magic-0.4.15-py2.py3-none-any.whl\nInstalling collected packages: python-magic\nSuccessfully installed python-magic-0.4.15\n</code></pre>\n\n<p>It works:</p>\n\n<pre><code>/ # python\nPython 3.7.1 (default, Dec 21 2018, 03:21:42) \n[GCC 6.4.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import magic\n&gt;&gt;&gt; \n</code></pre>\n\n<p>I understand that every distro has it's quirks, and I want to accommodate, but I just don't know how to do that at the moment.  Is there a way to define a module's setup.py to work around this situation?  Is there a way to tweak the Docker container to work with file-magic?  What's the right thing to do in this case?</p>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt5"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 10162839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acaa6ea73d34f09db37aa4b6daeafe9f?s=128&d=identicon&r=PG&f=1", "display_name": "DS_Secret Studios", "link": "https://stackoverflow.com/users/10162839/ds-secret-studios"}, "edited": false, "score": 0, "creation_date": 1545939415, "post_id": 53936922, "comment_id": 94738585, "body": "I did this, <code>self.pushButton_eq.setShortcut(_translate(&quot;MainWindow&quot;, [&quot;Return&quot;, &quot;Enter&quot;]))</code>, but I got <code>TypeError: translate(str, str, disambiguation: str = None, n: int = -1): argument 2 has unexpected type &#39;list&#39;</code>"}, {"owner": {"reputation": 73, "user_id": 10162839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acaa6ea73d34f09db37aa4b6daeafe9f?s=128&d=identicon&r=PG&f=1", "display_name": "DS_Secret Studios", "link": "https://stackoverflow.com/users/10162839/ds-secret-studios"}, "edited": false, "score": 0, "creation_date": 1545939484, "post_id": 53936922, "comment_id": 94738603, "body": "My programs full code is available <a href=\"https://github.com/DSSecret-Studios-Dev/Virtual-Desktop\" rel=\"nofollow noreferrer\">here</a>. It&#39;s at <code>.&#47;Calculator&#47;MainWindow.py</code>."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 73, "user_id": 10162839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acaa6ea73d34f09db37aa4b6daeafe9f?s=128&d=identicon&r=PG&f=1", "display_name": "DS_Secret Studios", "link": "https://stackoverflow.com/users/10162839/ds-secret-studios"}, "edited": false, "score": 0, "creation_date": 1545939514, "post_id": 53936922, "comment_id": 94738615, "body": "@DS_SecretStudios Why do you use <code>_translate</code>?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 73, "user_id": 10162839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acaa6ea73d34f09db37aa4b6daeafe9f?s=128&d=identicon&r=PG&f=1", "display_name": "DS_Secret Studios", "link": "https://stackoverflow.com/users/10162839/ds-secret-studios"}, "edited": false, "score": 0, "creation_date": 1545939731, "post_id": 53936922, "comment_id": 94738686, "body": "@DS_SecretStudios On the other hand in your question you point to an action (QAction) not a QPushButton."}, {"owner": {"reputation": 73, "user_id": 10162839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acaa6ea73d34f09db37aa4b6daeafe9f?s=128&d=identicon&r=PG&f=1", "display_name": "DS_Secret Studios", "link": "https://stackoverflow.com/users/10162839/ds-secret-studios"}, "edited": false, "score": 0, "creation_date": 1545939873, "post_id": 53936922, "comment_id": 94738728, "body": "That one button runs a function in my program, thus I though I could hook it up to the button."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 73, "user_id": 10162839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acaa6ea73d34f09db37aa4b6daeafe9f?s=128&d=identicon&r=PG&f=1", "display_name": "DS_Secret Studios", "link": "https://stackoverflow.com/users/10162839/ds-secret-studios"}, "edited": false, "score": 0, "creation_date": 1545940967, "post_id": 53936922, "comment_id": 94739047, "body": "@DS_SecretStudios change <code>self.pushButton_eq.setShortcut(_translate(&quot;MainWindow&quot;, &quot;Return&quot;))         self.pushButton_eq.setShortcut(_translate(&quot;MainWindow&quot;, &quot;Enter&quot;))</code> to <code>for sequence in (&quot;Enter&quot;, &quot;Return&quot;,):             QtWidgets.QShortcut(sequence, self.pushButton_eq, activated=self.pushButton_eq.animateClick)</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 73, "user_id": 10162839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acaa6ea73d34f09db37aa4b6daeafe9f?s=128&d=identicon&r=PG&f=1", "display_name": "DS_Secret Studios", "link": "https://stackoverflow.com/users/10162839/ds-secret-studios"}, "edited": false, "score": 0, "creation_date": 1545941250, "post_id": 53936922, "comment_id": 94739146, "body": "@DS_SecretStudios I have updated my answer indicating the solution for your case, also do not use translate. On the other hand if my answer helps you do not forget to mark it as correct, if you do not know how to do it then review the <a href=\"https://stackoverflow.com/tour\">tour</a>, that is the best way to thank."}, {"owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 0, "creation_date": 1547231938, "post_id": 53936922, "comment_id": 95135501, "body": "<code>foo_action.setShortcuts([&quot;Ctrl+1&quot;, &quot;Ctrl+S&quot;])</code> works but only shows the first shortcut. When I swap them always the first is shown!!?? Why is that??"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 0, "creation_date": 1547232115, "post_id": 53936922, "comment_id": 95135568, "body": "@KhalilAlHooti by design, the Qt developers did not see it necessary to show all the shorcuts, only the first."}, {"owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 0, "creation_date": 1547234845, "post_id": 53936922, "comment_id": 95136684, "body": "Ahhaaa, interesting, thanks telling me. I spent hours trying to fix it. @eyllanesc is there a way to show all shortcuts??"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 5, "last_activity_date": 1545940877, "last_edit_date": 1545940877, "creation_date": 1545856692, "answer_id": 53936922, "question_id": 53936403, "link": "https://stackoverflow.com/questions/53936403/two-shortcuts-for-one-button-in-pyqt/53936922#53936922", "title": "Two Shortcuts for One Button in PyQt", "body": "<p>The only difference is that instead of using <code>QList</code> you should use the <code>list</code>:</p>\n\n<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets\n\nclass MainWindow(QtWidgets.QMainWindow):\n    def __init__(self, parent=None):\n        super(MainWindow, self).__init__(parent)\n        menubar = self.menuBar()\n        menu = menubar.addMenu(\"File\")\n        foo_action = menu.addAction(\"foo\")\n        foo_action.setShortcuts([\"Ctrl+1\", \"Ctrl+S\"])\n        foo_action.triggered.connect(self.on_triggered)\n\n    @QtCore.pyqtSlot()\n    def on_triggered(self):\n        print(\"on_triggered\")\n\nif __name__ == '__main__':\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    w = MainWindow()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<hr>\n\n<p>In the case of QWidgets they do not have the <code>setShortcuts()</code> method, so one option is to use <code>QShortcut</code>s:</p>\n\n<pre><code>for sequence in (\"Enter\", \"Return\",):\n    shorcut = QtWidgets.QShortcut(sequence, self.pushButton_eq)\n    shorcut.activated.connect(self.pushButton_eq.animateClick)\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 10162839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acaa6ea73d34f09db37aa4b6daeafe9f?s=128&d=identicon&r=PG&f=1", "display_name": "DS_Secret Studios", "link": "https://stackoverflow.com/users/10162839/ds-secret-studios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 1, "accepted_answer_id": 53936922, "answer_count": 1, "score": 3, "last_activity_date": 1545940877, "creation_date": 1545853228, "last_edit_date": 1545940750, "question_id": 53936403, "link": "https://stackoverflow.com/questions/53936403/two-shortcuts-for-one-button-in-pyqt", "title": "Two Shortcuts for One Button in PyQt", "body": "<p>In PyQt, how would you tie in two shortcuts for one button? I have scoured the QT documentation and StackOverflow, but the only thing I found was <a href=\"https://stackoverflow.com/questions/23388754/two-shortcuts-for-one-action\">Two shortcuts for one action</a>, but that was for QT and I could not wrap my head around that.</p>\n"}, {"tags": ["python", "arrays", "list", "numpy"], "comments": [{"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 0, "creation_date": 1545853319, "post_id": 53936336, "comment_id": 94712889, "body": "They have a logical way to do this... <code>x*-1</code>. apart from that I don&#39;t understand how this could be a good thing"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 1, "creation_date": 1545853382, "post_id": 53936336, "comment_id": 94712904, "body": "I really don&#39;t understand your expected output. How is it related to your input? Why is 3 unchanged?"}, {"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1545853466, "post_id": 53936336, "comment_id": 94712920, "body": "@Bazingaa the largest value <code>7</code> should become the lowest, <code>1</code>, the second largest should become the second lowerst, <code>2</code>and so on"}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 1, "creation_date": 1545853505, "post_id": 53936336, "comment_id": 94712935, "body": "why would taking the opposite sign of the numbers not solve this problem."}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 1, "creation_date": 1545853553, "post_id": 53936336, "comment_id": 94712956, "body": "Well in that case, if you are changing the scale, 3 should become 5"}], "answers": [{"comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1545853886, "post_id": 53936486, "comment_id": 94713057, "body": "Care to explain/add explanation to your logic in the code?"}], "tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": false, "score": 2, "last_activity_date": 1545854046, "last_edit_date": 1545854046, "creation_date": 1545853841, "answer_id": 53936486, "question_id": 53936336, "link": "https://stackoverflow.com/questions/53936336/invert-the-scale-of-an-array/53936486#53936486", "title": "Invert the scale of an array", "body": "<p>If the input values are unique:</p>\n\n<pre><code>import numpy as np\n\nx = np.array([3, 7, 1, 2, 6])\n\ns = sorted(x)\nlookup = {v: i for v, i in zip(s, reversed(s))}\n\nresult = np.array(list(map(lookup.get, x)))\n\nprint(result)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>[3 1 7 6 2]\n</code></pre>\n\n<p>If I understood correctly you want to assign to each value in the sorted order the value in the same position in the reverse sorted order.</p>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1545854019, "post_id": 53936504, "comment_id": 94713091, "body": "Beat me to it. +1"}], "tags": [], "owner": {"reputation": 687, "user_id": 3901216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6133069a70b73d84f51e886a6139e898?s=128&d=identicon&r=PG&f=1", "display_name": "tch", "link": "https://stackoverflow.com/users/3901216/tch"}, "is_accepted": true, "score": 4, "last_activity_date": 1545855497, "last_edit_date": 1545855497, "creation_date": 1545853953, "answer_id": 53936504, "question_id": 53936336, "link": "https://stackoverflow.com/questions/53936336/invert-the-scale-of-an-array/53936504#53936504", "title": "Invert the scale of an array", "body": "<p>Here is a numpy way:</p>\n\n<pre><code>np.sort(x)[::-1][np.argsort(np.argsort(x))]\n</code></pre>\n\n<p>Why this works: Suppose your list were already sorted, then you would just need to reverse it. Since the list isn't sorted we can first sort it, then reverse it, and then undo our sort. </p>\n\n<p>Improvment: We really only need to compute <code>argsort</code> once. Then <code>x</code> can be sorted with this list and we can compute the inverse permutation to <code>argsort(x)</code> without another sort.</p>\n\n<pre><code>ax = np.argsort(x)\naax = np.zeros(len(ax),dtype='int')\naax[ax] = np.arange(len(ax),dtype='int')\n\nx[ax[::-1]][aax]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 817, "user_id": 6087307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H61kl.jpg?s=128&g=1", "display_name": "Yasin Yousif", "link": "https://stackoverflow.com/users/6087307/yasin-yousif"}, "is_accepted": false, "score": 0, "last_activity_date": 1545855618, "last_edit_date": 1545855618, "creation_date": 1545854830, "answer_id": 53936627, "question_id": 53936336, "link": "https://stackoverflow.com/questions/53936336/invert-the-scale-of-an-array/53936627#53936627", "title": "Invert the scale of an array", "body": "<p>here's my first thought:</p>\n\n<pre><code>In [13]: xr=np.zeros_like(x)\n\nIn [14]: g=0\n\nIn [15]: f=np.unique(sorted(x))\n\nIn [16]: for b in f:\n             g-=1\n             #for repeated values:\n             for y in np.where(x==b)[0]:\n                 xr[y]=f[g]\n    ...:     \nIn [17]: xr\nOut[17]: array([3, 1, 7, 6, 2])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 99, "user_id": 11689887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23f11ccb69e32b44ba2c6de5e66acd3?s=128&d=identicon&r=PG&f=1", "display_name": "kdebugging", "link": "https://stackoverflow.com/users/11689887/kdebugging"}, "is_accepted": false, "score": 0, "last_activity_date": 1603768462, "last_edit_date": 1603768462, "creation_date": 1603768079, "answer_id": 64547797, "question_id": 53936336, "link": "https://stackoverflow.com/questions/53936336/invert-the-scale-of-an-array/64547797#64547797", "title": "Invert the scale of an array", "body": "<p>Here is how I invert np array value (biggest value-&gt;smallest value, smallest value -&gt; biggest) without sorting.</p>\n<pre class=\"lang-py prettyprint-override\"><code>np_arr_inv = np_arr * -1 + np_arr.max()\n</code></pre>\n<p>I need to keep the order since it is image data.</p>\n<p>FYI Numpy has a bit-wise inversion function <a href=\"https://numpy.org/doc/stable/reference/generated/numpy.invert.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 53936504, "answer_count": 4, "score": 4, "last_activity_date": 1603768462, "creation_date": 1545852788, "last_edit_date": 1545853886, "question_id": 53936336, "link": "https://stackoverflow.com/questions/53936336/invert-the-scale-of-an-array", "title": "Invert the scale of an array", "body": "<p>Say I have the following array:</p>\n\n<pre><code>x = np.array([3,7,1,2,6])\n</code></pre>\n\n<p>What is the simplest way to obtain the array with its scale say in the inverse way? So the minimum value would become the maximum, the maximum would become the minimum, and so on for the rest of the values.</p>\n\n<p>Expected ouput:</p>\n\n<pre><code>array[3,1,7,6,2]\n</code></pre>\n\n<p>To clarify on what I want to obtain, say my original sequence is:</p>\n\n<pre><code>y = sorted(x)\n#[1, 2, 3, 6, 7]\n</code></pre>\n\n<p>So the array sorted. If this was the case, the array that I would want is the array reversed, so <code>[7, 6, 3, 2, 1]</code>. I want to accomplish this with my current input.</p>\n\n<p>Therefore, where I had the lowest value, <code>1</code> is now a <code>7</code>, the second lowest vaule, <code>2</code> is now a <code>6</code>, and so on.</p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "classification", "decision-tree"], "answers": [{"comments": [{"owner": {"reputation": 2023, "user_id": 4406532, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d8e5fa94663fafdef7f93fcac9aedb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Avi", "link": "https://stackoverflow.com/users/4406532/avi"}, "edited": false, "score": 0, "creation_date": 1545941352, "post_id": 53948891, "comment_id": 94739168, "body": "Thanks @AI_Learning, does it work if I have ensemble of models (number of decision trees)? In addition, does it handle zero probability as well?"}, {"owner": {"reputation": 12637, "user_id": 6347629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vxdJr.jpg?s=128&g=1", "display_name": "Venkatachalam", "link": "https://stackoverflow.com/users/6347629/venkatachalam"}, "reply_to_user": {"reputation": 2023, "user_id": 4406532, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d8e5fa94663fafdef7f93fcac9aedb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Avi", "link": "https://stackoverflow.com/users/4406532/avi"}, "edited": false, "score": 0, "creation_date": 1545968101, "post_id": 53948891, "comment_id": 94745124, "body": "It can handle, if your ensemble model can give a probability distribution for each datapoint. Now added duct tape to handle zero probability."}], "tags": [], "owner": {"reputation": 12637, "user_id": 6347629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vxdJr.jpg?s=128&g=1", "display_name": "Venkatachalam", "link": "https://stackoverflow.com/users/6347629/venkatachalam"}, "is_accepted": true, "score": 1, "last_activity_date": 1545967989, "last_edit_date": 1545967989, "creation_date": 1545932649, "answer_id": 53948891, "question_id": 53936310, "link": "https://stackoverflow.com/questions/53936310/decision-tree-probability-of-prediction-inversely-proportional-in-python/53948891#53948891", "title": "Decision Tree: Probability of prediction inversely proportional in python", "body": "<p>The mentioned equation can be implemented with the following snippet. </p>\n\n<pre><code>def inverse_prob(model_probs):\n    model_probs[model_probs == 0 ] = 1e-5\n    inverse = 1/model_probs\n    return inverse/inverse.sum(axis=0)\n</code></pre>\n\n<p>Added a small value 1e-5, whenever the given probability distribution has zero values in it. </p>\n"}], "owner": {"reputation": 2023, "user_id": 4406532, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d8e5fa94663fafdef7f93fcac9aedb0a?s=128&d=identicon&r=PG&f=1", "display_name": "Avi", "link": "https://stackoverflow.com/users/4406532/avi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 1, "accepted_answer_id": 53948891, "answer_count": 1, "score": 1, "last_activity_date": 1545967989, "creation_date": 1545852574, "question_id": 53936310, "link": "https://stackoverflow.com/questions/53936310/decision-tree-probability-of-prediction-inversely-proportional-in-python", "title": "Decision Tree: Probability of prediction inversely proportional in python", "body": "<p>I would like to create probability of prediction inversely proportional to each class in my decision tree. Something like what is described <a href=\"https://doi.org/10.1016/j.inffus.2004.04.001\" rel=\"nofollow noreferrer\">here</a> in page 9 formula in 4.1. \nHow can I do it referring to my code:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nfrom sklearn.cross_validation import train_test_split\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.metrics import accuracy_score\nfrom sklearn import tree\nurl=\"https://archive.ics.uci.edu/ml/machine-learning-databases/abalone/abalone.data\"\nc=pd.read_csv(url, header=None)\nX = c.values[:,1:8]\nY = c.values[:,0]\nX_train, X_test, y_train, y_test = train_test_split( X, Y, test_size = 0.3, random_state = 100)\nclf_entropy = DecisionTreeClassifier(criterion = \"entropy\", random_state = 100,\n max_depth=3, min_samples_leaf=5)\nclf_entropy.fit(X_train, y_train)\nprobs = clf_entropy.predict_proba(X_test)\nprobs\n</code></pre>\n\n<p>The target is to replace zero probabilities with a\nsmall non-zero value and normalize the probabilities to make it a distribution.\nLabels are then selected, such that the probability of selection is inversely\nproportional to the current tree's predictions.\n<a href=\"https://i.stack.imgur.com/ZJ7pd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZJ7pd.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "selenium"], "answers": [{"tags": [], "owner": {"reputation": 356, "user_id": 10772072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb79441d39cbdf6cd725ecfa1d42c65?s=128&d=identicon&r=PG&f=1", "display_name": "Xion", "link": "https://stackoverflow.com/users/10772072/xion"}, "is_accepted": true, "score": 1, "last_activity_date": 1545852863, "creation_date": 1545852863, "answer_id": 53936345, "question_id": 53936308, "link": "https://stackoverflow.com/questions/53936308/selenium-find-elements-command-where-to-look/53936345#53936345", "title": "Selenium - find_elements command, where to look?", "body": "<p>So they way I see it xpath is basically a shortcut to finding an element on the page and its a very useful one. So in order to find the xpath of a certain element, you will go to the console on your browser. Press <code>F12</code> or right-clicking and click inspect or <code>crtl + shift + i</code>. </p>\n\n<p>Then using the top left corner you see a cursor you click on it and then select and element you want to find on the page. On the element console the select element you have selected will be highlight. Right-click and you will see copy xpath. This will directly take you to the xpath element.</p>\n\n<p>Or in your case you are give <code>//h2[@class='product-name']/a</code>, so <code>crtl +f</code> to find and paste the xpath and it will show you where it pops up. </p>\n"}], "owner": {"reputation": 1984, "user_id": 4439019, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ef8889f7e466495157e2527a85930a9c?s=128&d=identicon&r=PG&f=1", "display_name": "JD2775", "link": "https://stackoverflow.com/users/4439019/jd2775"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 53936345, "answer_count": 1, "score": 0, "last_activity_date": 1545852863, "creation_date": 1545852554, "question_id": 53936308, "link": "https://stackoverflow.com/questions/53936308/selenium-find-elements-command-where-to-look", "title": "Selenium - find_elements command, where to look?", "body": "<p>I am working through a Selenium with Python book and an confused by this specific example below.  The below test runs fine:</p>\n\n<pre><code>import unittest\nfrom ddt import ddt, data, unpack\nfrom selenium import webdriver\n\n@ddt\nclass SearchDDT(unittest.TestCase):\n    def setUp(self):\n        # create a new Chrome session\n        self.driver = webdriver.Chrome()\n        self.driver.implicitly_wait(30)\n        self.driver.maximize_window()\n\n        # navigate to application home page\n        self.driver.get('http://demo-store.seleniumacademy.com/')\n\n\n    # specify test data using @ data decorator\n    @data((\"phones\", 3), (\"music\", 5))\n    @unpack\n    def test_search(self, search_value, expected_count):\n        # get the search textbox\n        self.search_field = self.driver.find_element_by_name(\"q\")\n        self.search_field.clear()\n\n        # enter serach keyword and submit\n        # use search value argument to pass data\n        self.search_field.send_keys(search_value)\n        self.search_field.submit()\n\n        # get all the anchor elements which have product names displayed current on result page\n        products = self.driver.find_elements_by_xpath(\"//h2[@class='product-name']/a\")\n\n        # check count of products show in results\n        self.assertEqual(expected_count, len(products))\n\n    def tearDown(self):\n        self.driver.quit()\n\nif __name__ == '__main__':\n    unittest.main(verbosity=2)\n</code></pre>\n\n<p>I am confused though on this specific line:</p>\n\n<pre><code># get all the anchor elements which have product names displayed current on result page\n        products = self.driver.find_elements_by_xpath(\"//h2[@class='product-name']/a\")\n</code></pre>\n\n<p>Where exactly on the page are those elements being inspected?  A shortcut to the test page in question is here:</p>\n\n<p><a href=\"http://demo-store.seleniumacademy.com/catalogsearch/result/?q=music\" rel=\"nofollow noreferrer\">http://demo-store.seleniumacademy.com/catalogsearch/result/?q=music</a></p>\n\n<p>You can see there are 5 items returned.  My question is where is that xpath shown above found on this page that covers the 5 items and in turn makes the test pass?  I tried inspecting the individual music items themselves, that's not correct.  Basically, where should I be clicking to retrieve the 'find_elements_by_xpath' value?</p>\n"}]