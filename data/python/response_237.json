[{"tags": ["python", "keras"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 1, "creation_date": 1564013085, "post_id": 57192638, "comment_id": 100894626, "body": "The first argument for the <code>Bidirectional</code> constructor should be a <code>layer</code>. You are passing an integer (<code>256</code>)."}, {"owner": {"reputation": 117, "user_id": 8868620, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Y_1lakFi_0g/AAAAAAAAAAI/AAAAAAAAAFA/ZCyoJ4s5RTg/photo.jpg?sz=128", "display_name": "Stephen Mason", "link": "https://stackoverflow.com/users/8868620/stephen-mason"}, "edited": false, "score": 1, "creation_date": 1564013112, "post_id": 57192638, "comment_id": 100894631, "body": "You&#39;re passing the integer 256 into the layer parameter, I assume this is supposed to be a layer object?"}], "answers": [{"comments": [{"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "edited": false, "score": 0, "creation_date": 1564037743, "post_id": 57192745, "comment_id": 100900521, "body": "A well-deserved upvote for teaching fishing, not just giving the fish."}, {"owner": {"reputation": 15, "user_id": 8648266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5LNqJ.jpg?s=128&g=1", "display_name": "Nikhil Shaw", "link": "https://stackoverflow.com/users/8648266/nikhil-shaw"}, "edited": false, "score": 0, "creation_date": 1564052431, "post_id": 57192745, "comment_id": 100908691, "body": "Thanks Karl, I resolved the problem. I should have known better but got impatient and posted it."}], "tags": [], "owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "is_accepted": true, "score": 1, "last_activity_date": 1564013873, "creation_date": 1564013873, "answer_id": 57192745, "question_id": 57192638, "link": "https://stackoverflow.com/questions/57192638/how-to-fix-attributeerror-int-object-has-no-attribute-get-config-in-bidirec/57192745#57192745", "title": "How to fix AttributeError: &#39;int&#39; object has no attribute &#39;get_config&#39; in Bidirectional Layer", "body": "<p>How to read the error message:</p>\n\n<pre><code>AttributeError: 'int' object has no attribute 'get_config'\n#^^^^^^^^^^^^^-- the kind of error: something doesn't have a needed attribute.\n#                ^^^-- we had an integer...\n#          ... when we needed something with a ^^^^^^^^^^ 'get_config'.\n\nconfig = layer.get_config() # This is the line where the exception was thrown.\n#        ^^^^^ This is what was supposed to have 'get_config', but didn't.\n#        Since there are parentheses, it was a method call.\n</code></pre>\n\n<p>So, something named <code>layer</code> is supposed to have a <code>get_config</code> method, but at this point, it was an integer, and integers (unsurprisingly) don't have this method.</p>\n\n<p>Where did <code>layer</code> come from? We keep working backwards:</p>\n\n<pre><code>/usr/local/lib/python3.6/dist-packages/keras/layers/wrappers.py in __init__(self, layer, merge_mode, weights, **kwargs)\n</code></pre>\n\n<p>So, we were in the initialization of some sort of class, and <code>layer</code> is the first parameter that was passed. This also isn't within our own code but inside the library, so it's not something we can fix there. The conclusion is that something bad was passed as <code>layer</code>. We keep looking back:</p>\n\n<pre><code>bi = Bidirectional(256,  merge_mode='concat')(r)\n#    ^^^^^^^^^^^^^--- the class we tried to instantiate\n#                  ^^^--- the value passed for `layer`\n</code></pre>\n\n<p>Now we are in our code. Indeed, the value provided for <code>layer</code> is <code>256</code>, which is an integer. We tried to create an instance of the <code>Bidirectional</code> class, with something invalid. So the next step is to read the <a href=\"https://keras.io/layers/wrappers/\" rel=\"nofollow noreferrer\">documentation for that class</a>. We find that we need to have some sort of <code>Recurrent</code> layer here, for example an <code>LSTM</code> instance or a <code>GRU</code> instance. What you actually want will depend on the problem you're trying to solve; I don't know nearly enough about neural networks to help you any further. (But I'm <em>guessing</em> you want LSTM since you already <code>import</code>ed that and don't appear to be using it yet....)</p>\n"}], "owner": {"reputation": 15, "user_id": 8648266, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5LNqJ.jpg?s=128&g=1", "display_name": "Nikhil Shaw", "link": "https://stackoverflow.com/users/8648266/nikhil-shaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "accepted_answer_id": 57192745, "answer_count": 1, "score": 0, "last_activity_date": 1564013873, "creation_date": 1564012721, "question_id": 57192638, "link": "https://stackoverflow.com/questions/57192638/how-to-fix-attributeerror-int-object-has-no-attribute-get-config-in-bidirec", "title": "How to fix AttributeError: &#39;int&#39; object has no attribute &#39;get_config&#39; in Bidirectional Layer", "body": "<p>Cannot solve this attribute error in bidirectional LSTM layer in Keras</p>\n\n<p>I have tried replacing the bidirectional LSTM layer with fully connected and it works fine then.</p>\n\n<pre><code>from keras.applications.resnet50 import ResNet50\nfrom keras.models import Model, Sequential\nfrom keras.layers import Input, Bidirectional, Dense, Reshape, Lambda\nfrom keras import backend as K\nfrom keras.layers import LSTM\nfrom keras.layers import Add\n\n\nimg_w=197\nimg_h=197\nchannel=3\nnum_classes=8\n\ninput_layer = Input(name='the_input', shape=(img_w, img_h, channel), dtype='float32')\n#(None, 197, 197, 3)\nbase_model = ResNet50(include_top=False, input_shape=(img_w, img_h, channel), weights='imagenet')(input_layer)\n#(None, 7, 7, 2048)\nbase_model.trainable = False\nr= Reshape(target_shape=((32, 3136 )), name='reshape')(base_model)\n#(None, 32, 3136)\nbi = Bidirectional(256,  merge_mode='concat')(r)\nfc = Dense(64, activation='relu', kernel_initializer='he_normal', name='dense1')(bi)\n</code></pre>\n\n<p>Below is the error:</p>\n\n<pre><code>AttributeError                            Traceback (most recent call last)\n&lt;ipython-input-5-27e3a3039ec6&gt; in &lt;module&gt;()\n     19 r= Reshape(target_shape=(100352, ), name='reshape')(base_model)\n     20 #(None, 32, 3136)\n---&gt; 21 bi = Bidirectional(256,  merge_mode='concat')(r)\n     22 inner = Dense(64, activation='relu', kernel_initializer='he_normal', name='dense1')(bi)\n     23 #model = Sequential()\n\n/usr/local/lib/python3.6/dist-packages/keras/layers/wrappers.py in __init__(self, layer, merge_mode, weights, **kwargs)\n    364                              '{\"sum\", \"mul\", \"ave\", \"concat\", None}')\n    365         self.forward_layer = copy.copy(layer)\n--&gt; 366         config = layer.get_config()\n    367         config['go_backwards'] = not config['go_backwards']\n    368         self.backward_layer = layer.__class__.from_config(config)\n\nAttributeError: 'int' object has no attribute 'get_config'\n</code></pre>\n"}, {"tags": ["python", "bots", "chatterbot"], "comments": [{"owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "edited": false, "score": 0, "creation_date": 1564015145, "post_id": 57192622, "comment_id": 100894942, "body": "In your own words, what do you expect <code>ChatterBotCorpusTrainer</code> to refer to, and why?"}, {"owner": {"reputation": 61, "user_id": 11762488, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4oHm6EulSw/AAAAAAAAAAI/AAAAAAAAACQ/zb2o1FfeYNc/photo.jpg?sz=128", "display_name": "River Today", "link": "https://stackoverflow.com/users/11762488/river-today"}, "reply_to_user": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "edited": false, "score": 0, "creation_date": 1564017687, "post_id": 57192622, "comment_id": 100895389, "body": "I have attempted to update the code."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 11762488, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4oHm6EulSw/AAAAAAAAAAI/AAAAAAAAACQ/zb2o1FfeYNc/photo.jpg?sz=128", "display_name": "River Today", "link": "https://stackoverflow.com/users/11762488/river-today"}, "edited": false, "score": 0, "creation_date": 1564018156, "post_id": 57192862, "comment_id": 100895464, "body": "That helped out I updated the code, still kicking back these corpus errors&gt;&gt;"}, {"owner": {"reputation": 117, "user_id": 8868620, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Y_1lakFi_0g/AAAAAAAAAAI/AAAAAAAAAFA/ZCyoJ4s5RTg/photo.jpg?sz=128", "display_name": "Stephen Mason", "link": "https://stackoverflow.com/users/8868620/stephen-mason"}, "reply_to_user": {"reputation": 61, "user_id": 11762488, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4oHm6EulSw/AAAAAAAAAAI/AAAAAAAAACQ/zb2o1FfeYNc/photo.jpg?sz=128", "display_name": "River Today", "link": "https://stackoverflow.com/users/11762488/river-today"}, "edited": false, "score": 0, "creation_date": 1564260218, "post_id": 57192862, "comment_id": 100974200, "body": "You haven&#39;t defined <code>chatbot</code> in the line:  <code>trainer = ChatterBotCorpusTrainer(chatbot)</code>"}, {"owner": {"reputation": 117, "user_id": 8868620, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Y_1lakFi_0g/AAAAAAAAAAI/AAAAAAAAAFA/ZCyoJ4s5RTg/photo.jpg?sz=128", "display_name": "Stephen Mason", "link": "https://stackoverflow.com/users/8868620/stephen-mason"}, "reply_to_user": {"reputation": 61, "user_id": 11762488, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4oHm6EulSw/AAAAAAAAAAI/AAAAAAAAACQ/zb2o1FfeYNc/photo.jpg?sz=128", "display_name": "River Today", "link": "https://stackoverflow.com/users/11762488/river-today"}, "edited": false, "score": 0, "creation_date": 1564260307, "post_id": 57192862, "comment_id": 100974215, "body": "That line also redefines <code>trainer</code>"}, {"owner": {"reputation": 61, "user_id": 11762488, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4oHm6EulSw/AAAAAAAAAAI/AAAAAAAAACQ/zb2o1FfeYNc/photo.jpg?sz=128", "display_name": "River Today", "link": "https://stackoverflow.com/users/11762488/river-today"}, "edited": false, "score": 0, "creation_date": 1564304250, "post_id": 57192862, "comment_id": 100980230, "body": "Im still getting this error line 12     trainer.train(corpus_path + file)           ^ IndentationError: expected an indented block"}, {"owner": {"reputation": 117, "user_id": 8868620, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Y_1lakFi_0g/AAAAAAAAAAI/AAAAAAAAAFA/ZCyoJ4s5RTg/photo.jpg?sz=128", "display_name": "Stephen Mason", "link": "https://stackoverflow.com/users/8868620/stephen-mason"}, "reply_to_user": {"reputation": 61, "user_id": 11762488, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4oHm6EulSw/AAAAAAAAAAI/AAAAAAAAACQ/zb2o1FfeYNc/photo.jpg?sz=128", "display_name": "River Today", "link": "https://stackoverflow.com/users/11762488/river-today"}, "edited": false, "score": 0, "creation_date": 1564391134, "post_id": 57192862, "comment_id": 101000986, "body": "That line is part of your for loop so yes, it should be indented"}], "tags": [], "owner": {"reputation": 117, "user_id": 8868620, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Y_1lakFi_0g/AAAAAAAAAAI/AAAAAAAAAFA/ZCyoJ4s5RTg/photo.jpg?sz=128", "display_name": "Stephen Mason", "link": "https://stackoverflow.com/users/8868620/stephen-mason"}, "is_accepted": false, "score": 2, "last_activity_date": 1564015287, "creation_date": 1564015287, "answer_id": 57192862, "question_id": 57192622, "link": "https://stackoverflow.com/questions/57192622/chatter-bot-corpustrainer-missing-error/57192862#57192862", "title": "Chatter Bot Corpus&#39;Trainer&#39; missing error", "body": "<p>You need to specify the module (chatterbot.trainers). You have 2 options:</p>\n\n<p>1</p>\n\n<pre><code>from chatterbot import trainers\n</code></pre>\n\n<p>2</p>\n\n<pre><code>trainer = chatterbot.trainers.ChatterBotCorpusTrainer\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 11762488, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-S4oHm6EulSw/AAAAAAAAAAI/AAAAAAAAACQ/zb2o1FfeYNc/photo.jpg?sz=128", "display_name": "River Today", "link": "https://stackoverflow.com/users/11762488/river-today"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564018233, "creation_date": 1564012552, "last_edit_date": 1564018233, "question_id": 57192622, "link": "https://stackoverflow.com/questions/57192622/chatter-bot-corpustrainer-missing-error", "title": "Chatter Bot Corpus&#39;Trainer&#39; missing error", "body": "<p>I'm attempting to start working with building chat bot within python. I would really want to start programming one from scratch. I'm starting with the ChatterBot module to learn how it works. I have pip installed all modules but I'm still having trouble with 'ChatterBotCorpusTrainer'Im getting a missing error. I run python 3.7 and I have the updated ChatBot module.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>from chatterbot import ChatBot\r\nfrom chatterbot.trainers import ChatterBotCorpusTrainer\r\nimport os\r\n\r\nbot= ChatBot('Bot')\r\ntrainer = ChatterBotCorpusTrainer(bot)\r\n\r\n\r\ncorpus_path = '/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/chatterbot_corpus/data/english'\r\n\r\n\r\nfor file in os.listdir(corpus_path):\r\ntrainer.train(corpus_path + file)\r\n\r\n\r\n\r\n\r\n\r\nconversation = [\r\n\"Hello\",\r\n\"Hi there!\",\r\n\"How are you doing?\",\r\n\"I'm doing great.\",\r\n\"That is good to hear\",\r\n\"Thank you.\",\r\n\"You're welcome.\"\r\n]\r\n\r\ntrainer = ChatterBotCorpusTrainer(chatbot)\r\ntrainer.train('chatterbot.corpus.english')\r\n\r\nresponse = chatbot.get_response(\"Good morning!\")\r\nprint(response)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>this is the error I'm getting</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>/Users/singlefawn/Desktop/Our Realm/1997/Programs/random gallery/venv/lib/python3.7/site-packages/chatterbot/storage/jsonfile.py:26: UnsuitableForProductionWarning: The JsonFileStorageAdapter is not recommended for production environments.\r\n  self.UnsuitableForProductionWarning\r\nTraceback (most recent call last):\r\n  File \"/Users/singlefawn/Desktop/Our Realm/1997/Programs/random gallery/chat_1_1.py\", line 6, in &lt;module&gt;\r\ntrainer = ChatterBotCorpusTrainer(bot)\r\n  File \"/Users/singlefawn/Desktop/Our Realm/1997/Programs/random gallery/venv/lib/python3.7/site-packages/chatterbot/trainers.py\", line 101, in __init__\r\nfrom .corpus import Corpus\r\n  File \"/Users/singlefawn/Desktop/Our Realm/1997/Programs/random gallery/venv/lib/python3.7/site-packages/chatterbot/corpus/__init__.py\", line 6, in &lt;module&gt;\r\nfrom chatterbot_corpus import Corpus\r\nImportError: cannot import name 'Corpus' from 'chatterbot_corpus' (/Users/singlefawn/Desktop/Our Realm/1997/Programs/random gallery/venv/lib/python3.7/site-packages/chatterbot_corpus/__init__.py)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 10634888, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/97PHi.png?s=128&g=1", "display_name": "RoXeno", "link": "https://stackoverflow.com/users/10634888/roxeno"}, "edited": false, "score": 0, "creation_date": 1564014462, "post_id": 57192731, "comment_id": 100894837, "body": "<a href=\"https://imgur.com/a/5SkY582\" rel=\"nofollow noreferrer\">imgur.com/a/5SkY582</a> - Doesn&#39;t seem to work. No errors, but values are mixed up."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 123, "user_id": 10634888, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/97PHi.png?s=128&g=1", "display_name": "RoXeno", "link": "https://stackoverflow.com/users/10634888/roxeno"}, "edited": false, "score": 0, "creation_date": 1564014740, "post_id": 57192731, "comment_id": 100894879, "body": "Oh well, the above solutions all assume the data to be sorted. Of course you could sort afterwards, but I would tend to think that if the data comes unsorted there might be a problem of data integrity?"}, {"owner": {"reputation": 123, "user_id": 10634888, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/97PHi.png?s=128&g=1", "display_name": "RoXeno", "link": "https://stackoverflow.com/users/10634888/roxeno"}, "edited": false, "score": 0, "creation_date": 1564015315, "post_id": 57192731, "comment_id": 100894975, "body": "The data is already sorted in date order (I think, but I&#39;ll check again). It could because of the gaps in the data, but I doubt it."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 123, "user_id": 10634888, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/97PHi.png?s=128&g=1", "display_name": "RoXeno", "link": "https://stackoverflow.com/users/10634888/roxeno"}, "edited": false, "score": 1, "creation_date": 1564015608, "post_id": 57192731, "comment_id": 100895018, "body": "No I mean it&#39;s pretty obvious what happens, namely that you have one date of 2019 sourrounded by dates from 2015, something like <code>[[&#39;2015-01-08&#39;, &#39;174.0&#39;], [&#39;2019-01-09&#39;, &#39;172.0&#39;], [&#39;2015-01-11&#39;, &#39;170.5&#39;]]</code>"}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 3, "last_activity_date": 1564013704, "creation_date": 1564013704, "answer_id": 57192731, "question_id": 57192588, "link": "https://stackoverflow.com/questions/57192588/how-do-i-plot-dates-and-decimals-from-lists-inside-lists/57192731#57192731", "title": "How do I Plot Dates and Decimals from Lists Inside Lists?", "body": "<p>With pure matplotlib:</p>\n\n<pre><code>from datetime import datetime\nimport matplotlib.pyplot as plt\n\na = [['2015-01-08', '174.0'], ['2015-01-09', '172.0'], ['2015-01-11', '170.5']]\n\ndates = [datetime.strptime(d[0], \"%Y-%m-%d\") for d in a]\nvalues = [float(d[1]) for d in a]\n\nplt.plot(dates, values)\n\nplt.show()\n</code></pre>\n\n<p>With numpy:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\na = [['2015-01-08', '174.0'], ['2015-01-09', '172.0'], ['2015-01-11', '170.5']]\n\ndates, values = np.array(a).T\ndates = dates.astype(np.datetime64)\nvalues = values.astype(float)\n\nplt.plot(dates, values)\n\nplt.show()\n</code></pre>\n\n<p>With pandas</p>\n\n<pre><code>import pandas as pd\nimport matplotlib.pyplot as plt\n\na = [['2015-01-08', '174.0'], ['2015-01-09', '172.0'], ['2015-01-11', '170.5']]\n\ndf = pd.DataFrame(a, columns=[\"dates\", \"values\"])\ndf[\"dates\"] = pd.to_datetime(df[\"dates\"])\ndf[\"values\"] = pd.to_numeric(df[\"values\"])\n\nplt.plot(\"dates\", \"values\", data=df)\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 10634888, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/97PHi.png?s=128&g=1", "display_name": "RoXeno", "link": "https://stackoverflow.com/users/10634888/roxeno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 57192731, "answer_count": 1, "score": 1, "last_activity_date": 1564015748, "creation_date": 1564012190, "last_edit_date": 1564015748, "question_id": 57192588, "link": "https://stackoverflow.com/questions/57192588/how-do-i-plot-dates-and-decimals-from-lists-inside-lists", "title": "How do I Plot Dates and Decimals from Lists Inside Lists?", "body": "<p>I haven't used matplotlib in years, but now for a project, I wanted to use it. I have lists of dates and decimal values inside a list. There are ~300 records, so here's a small snippet of that:</p>\n\n<pre><code>[['2015-01-08', '174.0'], ['2015-01-09', '172.0'], ['2015-01-11', '170.5']]\n</code></pre>\n\n<p>As you can tell, there are some gaps in the data, which sometimes last weeks. I want to plot all these values in a graph, with the time and decimal values. I don't know what to do. All help is appreciated. If it helps, here is an example of what I want it to look like (Without all the styling, of course):\n<a href=\"https://i.stack.imgur.com/fvSpn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fvSpn.png\" alt=\"\"></a></p>\n\n<p>Also, here is all the data, if needed: <a href=\"https://pastebin.com/esEPp78j\" rel=\"nofollow noreferrer\">https://pastebin.com/esEPp78j</a></p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["python", "google-app-engine", "flask", "google-cloud-storage"], "comments": [{"owner": {"reputation": 117, "user_id": 8868620, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Y_1lakFi_0g/AAAAAAAAAAI/AAAAAAAAAFA/ZCyoJ4s5RTg/photo.jpg?sz=128", "display_name": "Stephen Mason", "link": "https://stackoverflow.com/users/8868620/stephen-mason"}, "edited": false, "score": 1, "creation_date": 1564012482, "post_id": 57192569, "comment_id": 100894521, "body": "Can you move your whole save_picture function inside the if loop? That way you guarantee that form_picture is not NoneType before calling read() on it"}, {"owner": {"reputation": 117, "user_id": 8868620, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Y_1lakFi_0g/AAAAAAAAAAI/AAAAAAAAAFA/ZCyoJ4s5RTg/photo.jpg?sz=128", "display_name": "Stephen Mason", "link": "https://stackoverflow.com/users/8868620/stephen-mason"}, "edited": false, "score": 0, "creation_date": 1564012544, "post_id": 57192569, "comment_id": 100894533, "body": "A better syntax would to be to wrap the function in a try except statement"}, {"owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "edited": false, "score": 0, "creation_date": 1564014027, "post_id": 57192569, "comment_id": 100894766, "body": "Have you tried debugging the value of <code>request.files</code>?"}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1564014776, "post_id": 57192569, "comment_id": 100894887, "body": "Moving <code>save_picture</code> into the <code>if</code> block does not guarantee that <code>form_picture</code> is not <code>NoneType</code>. The problem is <code>request.files.get(&#39;file&#39;)</code> is returning <code>NoneType</code> which means either an error or no file. Part of the solution is to check the value of <code>uploaded_file</code> and handle <code>NoneType</code>."}, {"owner": {"reputation": 1, "user_id": 11541662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa911dfd688f7877484d3f69f40f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/11541662/fred"}, "edited": false, "score": 0, "creation_date": 1564017667, "post_id": 57192569, "comment_id": 100895382, "body": "@KarlKnechtelm thanks guys for the guidance, I changed request.files.get(&#39;file&#39;) to form.picture.data and received the information that way which worked out.I don&#39;t know what was wrong with request object."}, {"owner": {"reputation": 1, "user_id": 11541662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa911dfd688f7877484d3f69f40f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/11541662/fred"}, "reply_to_user": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1564017753, "post_id": 57192569, "comment_id": 100895396, "body": "@JohnHanley thanks I explained it in the previous comment"}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1564017972, "post_id": 57192569, "comment_id": 100895433, "body": "@Fred - I completely missed the real problem. HTML forms are usually submitted by a POST and not by a GET. You were trying to process files as if called by HTTP GET. That is why your new change works. You should also remove the method <code>GET</code> from this line <code>@app.route(&#39;&#47;CreatePost&#47;amirshahedi&#39;, methods=[&#39;GET&#39;,&#39;POST&#39;])</code>"}, {"owner": {"reputation": 1, "user_id": 11541662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa911dfd688f7877484d3f69f40f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/11541662/fred"}, "reply_to_user": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1564024669, "post_id": 57192569, "comment_id": 100896480, "body": "@JohnHanley But on the google cloud documentation they have a form with action=&quot;POST&quot; an they used the request.files.get() function to get the data.This is the link to it <a href=\"https://cloud.google.com/python/getting-started/using-cloud-storage\" rel=\"nofollow noreferrer\">cloud.google.com/python/getting-started/using-cloud-storage</a>"}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1564025084, "post_id": 57192569, "comment_id": 100896544, "body": "You can support both GET and POST. Just make sure you write the code to support both HTTP methods."}], "owner": {"reputation": 1, "user_id": 11541662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa911dfd688f7877484d3f69f40f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/11541662/fred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564011977, "creation_date": 1564011977, "question_id": 57192569, "link": "https://stackoverflow.com/questions/57192569/google-app-engine-attributeerror-nonetype-object-has-no-attribute-read", "title": "Google App Engine AttributeError: &#39;NoneType&#39; object has no attribute &#39;read&#39;", "body": "<p>I want to let users to upload images to google storage through a form, but I get this error AttributeError: 'NoneType' object has no attribute 'read'.</p>\n\n<p>I have seen the <a href=\"https://cloud.google.com/appengine/docs/flexible/python/using-cloud-storage\" rel=\"nofollow noreferrer\">app engine documentation</a>\nThe same thing is done on there to upload an image.</p>\n\n<p>this is the part of my code related to uploading images</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def save_picture(form_picture):\n    if form_picture:\n        random_hex = urandom(8).hex()\n        _, f_ext = os.path.splitext(form_picture.filename)\n        picture_fn = random_hex + f_ext\n\n    gcs = storage.Client()\n    bucket = gcs.get_bucket(CLOUD_STORAGE_BUCKET)      \n    blob = bucket.blob(picture_fn)                  \n\n    blob.upload_from_string(\n    form_picture.read(),\n    content_type=form_picture.content_type\n    )\n\n    return blob.public_url\n\n@app.route('/CreatePost/amirshahedi', methods=['GET','POST'])\ndef CreatePost():\n    form = Create()\n    if form.validate_on_submit():\n        uploaded_file = request.files.get('file')\n        image_url = save_picture(uploaded_file)\n        post = Post(category=form.category.data, title=form.title.data, content=form.content.data, price=form.price.data, quantity=form.quantity.data, image_file = image_url )\n        db.session.add(post)\n        db.session.commit()\n    return render_template('CreatePost.html', title=\"CreatePost\", form1=form)\n</code></pre>\n"}, {"tags": ["python", "selenium", "button"], "comments": [{"owner": {"reputation": 1853, "user_id": 8099744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/789f02ce08565883147629e6065606e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sureshmani", "link": "https://stackoverflow.com/users/8099744/sureshmani"}, "edited": false, "score": 0, "creation_date": 1564016579, "post_id": 57192568, "comment_id": 100895185, "body": "did you try .get_Attribute(&#39;value&#39; ) on these links?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1564021034, "post_id": 57192568, "comment_id": 100895916, "body": "Do you mean <code>case_links</code> ends up as an empty list?"}, {"owner": {"reputation": 354, "user_id": 10478010, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Fe8lwY-27_4/AAAAAAAAAAI/AAAAAAAAAFo/3y7x9XA5zbM/photo.jpg?sz=128", "display_name": "PRERNA PAL", "link": "https://stackoverflow.com/users/10478010/prerna-pal"}, "edited": false, "score": 0, "creation_date": 1564030913, "post_id": 57192568, "comment_id": 100897861, "body": "The xpath seems correct. Does it return case_links list with size greater than 0? If yes, please try to loop through the list and perform .get_Attribute(&#39;value&#39;) in order to get the values for each element."}, {"owner": {"reputation": 359, "user_id": 9707286, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-29reiIaE48I/AAAAAAAAAAI/AAAAAAAANkU/ehypEL0A5YE/photo.jpg?sz=128", "display_name": "John Taylor", "link": "https://stackoverflow.com/users/9707286/john-taylor"}, "edited": false, "score": 0, "creation_date": 1564097206, "post_id": 57192568, "comment_id": 100928683, "body": "Sorry about the omission there.  The case_links list returns empty on each of the attempts above."}], "owner": {"reputation": 359, "user_id": 9707286, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-29reiIaE48I/AAAAAAAAAAI/AAAAAAAANkU/ehypEL0A5YE/photo.jpg?sz=128", "display_name": "John Taylor", "link": "https://stackoverflow.com/users/9707286/john-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564011974, "creation_date": 1564011974, "question_id": 57192568, "link": "https://stackoverflow.com/questions/57192568/cannot-get-value-of-button-using-xpath-and-selenium-despite-many-variations-trie", "title": "Cannot get value of button using xpath and selenium despite many variations tried", "body": "<p>Was able to get the value of the buttons on this page with xpath, then went to similar page on the same website, now the code comes up empty when trying to grab all the button values.  </p>\n\n<p>I have tried all of these xpath variants to try and get the value attribute of the submit buttons on the page.</p>\n\n<p>Here is the html</p>\n\n<pre><code>&lt;td&gt;&lt;input type=\"submit\" class=\"submitLink\" name=\"alinkvalue\" value=\"19 CR 003595\" onclick=\"setSearch(3);submitForm()\"&gt;&lt;/td&gt;\n</code></pre>\n\n<p>These are the xpath variants I have tried and have failed to grab the value.  They don't error, just provide no value when run.</p>\n\n<pre><code> # case_links = driver.find_elements_by_class_name('submitLink')  #does not get the buttons\n # case_links = driver.find_elements_by_xpath(\"//input[@type='submit']\")  #does not get the buttons\n#case_links = driver.find_elements_by_xpath(\"//input[@name='alinkvalue']\")\n#case_links = driver.find_elements_by_class_name('submitLink')\n#case_links = driver.find_elements_by_css_selector('#search &gt; table:nth-child(2) &gt; tbody:nth-child(1) &gt; tr:nth-child(5) &gt; td:nth-child(1) &gt; input:nth-child(1)')\n</code></pre>\n\n<p>I am expecting to retrieve '19 CR 003595' as the 'value' of the button.</p>\n"}, {"tags": ["python", "machine-learning", "cosine-similarity", "word-embedding", "machine-translation"], "comments": [{"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1564014865, "post_id": 57192563, "comment_id": 100894902, "body": "Generate a minimal example. If you can&#39;t show the words you are using try some other words that you can show."}, {"owner": {"reputation": 1804, "user_id": 7571673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GASUB.jpg?s=128&g=1", "display_name": "qmeeus", "link": "https://stackoverflow.com/users/7571673/qmeeus"}, "edited": false, "score": 0, "creation_date": 1564014997, "post_id": 57192563, "comment_id": 100894923, "body": "What is the formula for the average? I never heard of calculating vector similarities that way, it seems weird as well as you want to keep information about the position of one vector compared to the other, which you lose if you compute the average... And also, why do you expect the results to be similar?"}, {"owner": {"reputation": 486, "user_id": 3025314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/050da9584a4f98d740e86cb0951c5098?s=128&d=identicon&r=PG&f=1", "display_name": "KeyPi", "link": "https://stackoverflow.com/users/3025314/keypi"}, "reply_to_user": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1564061697, "post_id": 57192563, "comment_id": 100913916, "body": "@roadrunner66 I added an example"}, {"owner": {"reputation": 486, "user_id": 3025314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/050da9584a4f98d740e86cb0951c5098?s=128&d=identicon&r=PG&f=1", "display_name": "KeyPi", "link": "https://stackoverflow.com/users/3025314/keypi"}, "reply_to_user": {"reputation": 1804, "user_id": 7571673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GASUB.jpg?s=128&g=1", "display_name": "qmeeus", "link": "https://stackoverflow.com/users/7571673/qmeeus"}, "edited": false, "score": 0, "creation_date": 1564061834, "post_id": 57192563, "comment_id": 100913994, "body": "@qmeeus I am not sure that they should be similar. It&#39;s the first time I am doing this so I am a little confused about it: I asked around me and they said that it could be only a problem of vector dimensions. The formula of the average is a simple statistical average on values of the same word."}], "answers": [{"tags": [], "owner": {"reputation": 1804, "user_id": 7571673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GASUB.jpg?s=128&g=1", "display_name": "qmeeus", "link": "https://stackoverflow.com/users/7571673/qmeeus"}, "is_accepted": false, "score": 1, "last_activity_date": 1564415972, "creation_date": 1564415972, "answer_id": 57257504, "question_id": 57192563, "link": "https://stackoverflow.com/questions/57192563/cosine-similarities-and-totally-different-results-using-same-source/57257504#57257504", "title": "Cosine similarities and totally different results using same source", "body": "<p>From what I understand, the soft similarity between two vectors x and y is given by (avg(x) * avg(y)) / (abs(avg(x)) * abs(avg(y))) = sign(avg(x) * avg(y)), which is either 1 or -1 depending on whether the averages have the same sign or not. This is probably not very helpful.</p>\n\n<p>The cosine similarity is calculated with (x * y) / (||x|| * ||y||). 2 vectors pointing in the same direction will have a similarity of 1 (x * x = ||x||^2), 2 vectors pointing to the opposite direction, a similarity of -1 (x * -x = -||x||^2) and 2 perpendicular vectors a similarity of 0 ((1,0)*(0,1)=0). If the angle between the vectors is not equal to one of 0, 90, 180 or 270, you will have a similarity score between (but not equal to) -1 and 1.</p>\n\n<p>Bottom line: forget about the averages and only use the cosine similarity. Note that the cosine similarity compares the orientation and not the length of the vectors.</p>\n\n<p>PS: the translation of \"able\" in french is \"capable\" and not \"able\" ;) </p>\n"}, {"tags": [], "owner": {"reputation": 486, "user_id": 3025314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/050da9584a4f98d740e86cb0951c5098?s=128&d=identicon&r=PG&f=1", "display_name": "KeyPi", "link": "https://stackoverflow.com/users/3025314/keypi"}, "is_accepted": true, "score": 0, "last_activity_date": 1564504324, "creation_date": 1564504324, "answer_id": 57276182, "question_id": 57192563, "link": "https://stackoverflow.com/questions/57192563/cosine-similarities-and-totally-different-results-using-same-source/57276182#57276182", "title": "Cosine similarities and totally different results using same source", "body": "<p>After some more additional research, I found a 2014 paper (<a href=\"http://www.scielo.org.mx/pdf/cys/v18n3/v18n3a7.pdf\" rel=\"nofollow noreferrer\">Soft Similarity and Soft Cosine Measure:\nSimilarity of Features in Vector Space Model</a>) that explains when and how it could be useful to use averages of the features, and it explains also what is exactly a soft cosine measure:</p>\n\n<blockquote>\n  <p>Our idea is more general: we propose to modify the\n  manner of calculation of similarity in Vector Space Model\n  taking into account similarity of features. If we apply\n  this idea to the cosine measure, then the \u201csoft cosine\n  measure\u201d is introduced, as opposed to traditional \u201chard\n  cosine\u201d, which ignores similarity of features. Note that\n  when we consider similarity of each pair of features, it\n  is equivalent to introducing new features in the VSM.\n  Essentially, we have a matrix of similarity between pairs\n  of features and all these features represent new dimensions in the VSM.</p>\n</blockquote>\n"}], "owner": {"reputation": 486, "user_id": 3025314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/050da9584a4f98d740e86cb0951c5098?s=128&d=identicon&r=PG&f=1", "display_name": "KeyPi", "link": "https://stackoverflow.com/users/3025314/keypi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "accepted_answer_id": 57276182, "answer_count": 2, "score": 0, "last_activity_date": 1564504324, "creation_date": 1564011954, "last_edit_date": 1564061666, "question_id": 57192563, "link": "https://stackoverflow.com/questions/57192563/cosine-similarities-and-totally-different-results-using-same-source", "title": "Cosine similarities and totally different results using same source", "body": "<p>I am learning word embeddings and cosine similarity. My data is composed of two sets of same words but in 2 different languages. </p>\n\n<p>I did two tests:</p>\n\n<ol>\n<li>I measured the cosine similarity using the average of the word vectors (that I think it should be called soft cosine similarity instead)</li>\n<li>I measured the cosine similarity using the word vectors</li>\n</ol>\n\n<p>Should I expect to obtain quite the same results? I noticed that sometimes I have two opposite results. Since I am new on this, I am trying to figure out if I did something wrong or if there is an explanation behind. According to what I have been reading, soft cosine similarity should be more accurate than the usual cosine similarity.</p>\n\n<p>Now, it's time for some data to show you. Unfortunately I can't post a part of my data (the words themselves), but I will try my best to give you the max of information I can give you.</p>\n\n<p>Some other details before:</p>\n\n<ul>\n<li>I am using FastText to create the embeddings, skipgram model with\ndefault parameters.</li>\n<li>For the soft cosine similarity, I am using <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cosine.html\" rel=\"nofollow noreferrer\">Scipy\nspatial distance cosine</a>. Following some people suggestions, to measure cosine similarity it seems that I should subtract 1 from the formula, such as:</li>\n</ul>\n\n<p><code>(1-distance.cosine(data['LANG1_AVG'].iloc[i],data['LANG2_AVG'].iloc[i]))</code></p>\n\n<ul>\n<li><p>For the usual cosine similarity I am using the <a href=\"https://github.com/Babylonpartners/fastText_multilingual/blob/master/fasttext.py\" rel=\"nofollow noreferrer\">Fast Vector cosine similarity</a> from <a href=\"https://github.com/Babylonpartners/fastText_multilingual\" rel=\"nofollow noreferrer\">FastText Multilingual</a>, defined in this way:</p>\n\n<p><code>@classmethod\ndef cosine_similarity(cls, vec_a, vec_b):\n    \"\"\"Compute cosine similarity between vec_a and vec_b\"\"\"\n    return np.dot(vec_a, vec_b) / \\\n        (np.linalg.norm(vec_a) * np.linalg.norm(vec_b))</code></p></li>\n</ul>\n\n<p>As you will see from the image here, for some words I obtained the same results or quite similar using the two methods. For others I obtained two totally different results. How can I explain this? </p>\n\n<p><a href=\"https://i.stack.imgur.com/H2xYz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H2xYz.png\" alt=\"My data v2\"></a></p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 7803515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab1f774f0a2626c8deb6345d945ee4e?s=128&d=identicon&r=PG&f=1", "display_name": "Jes&#250;s M. Carrillo M.", "link": "https://stackoverflow.com/users/7803515/jes%c3%bas-m-carrillo-m"}, "edited": false, "score": 0, "creation_date": 1564021709, "post_id": 57192646, "comment_id": 100896023, "body": "It is possible to call a function to know all the possible options in a specific characteristic. For example if I want to know all the styles availables I use the print(plt.style.available) but if I want to know all the line styles, can I use a print(lines.linestyle.available)?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 29, "user_id": 7803515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab1f774f0a2626c8deb6345d945ee4e?s=128&d=identicon&r=PG&f=1", "display_name": "Jes&#250;s M. Carrillo M.", "link": "https://stackoverflow.com/users/7803515/jes%c3%bas-m-carrillo-m"}, "edited": false, "score": 0, "creation_date": 1564022232, "post_id": 57192646, "comment_id": 100896115, "body": "No, you would need to refer to the <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.lines.Line2D.html#matplotlib.lines.Line2D.set_linestyle\" rel=\"nofollow noreferrer\">documentation about linestyles</a>."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 0, "last_activity_date": 1564012828, "creation_date": 1564012828, "answer_id": 57192646, "question_id": 57192557, "link": "https://stackoverflow.com/questions/57192557/where-can-i-find-all-the-properties-for-customization-in-matplotlib/57192646#57192646", "title": "Where can I find all the properties for customization in matplotlib?", "body": "<p>Yes, the example file contains all possible parameters. This file is embedded into each documentation built; and there is a test that ensures that whenever a new parameter is added or removed, this file is updated. So you can consider it being complete. </p>\n\n<p>However, make sure to always refer to the version of the documentation that corresponds to your matplotlib version. </p>\n\n<p>The most up to date version at any time is at</p>\n\n<ul>\n<li><a href=\"https://matplotlib.org/tutorials/introductory/customizing.html\" rel=\"nofollow noreferrer\">https://matplotlib.org/tutorials/introductory/customizing.html</a></li>\n</ul>\n\n<p>while for example the version of matplotlib 3.0.3 would be available through</p>\n\n<ul>\n<li><a href=\"https://matplotlib.org/3.0.3/tutorials/introductory/customizing.html\" rel=\"nofollow noreferrer\">https://matplotlib.org/3.0.3/tutorials/introductory/customizing.html</a></li>\n</ul>\n"}], "owner": {"reputation": 29, "user_id": 7803515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eab1f774f0a2626c8deb6345d945ee4e?s=128&d=identicon&r=PG&f=1", "display_name": "Jes&#250;s M. Carrillo M.", "link": "https://stackoverflow.com/users/7803515/jes%c3%bas-m-carrillo-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 57192646, "answer_count": 1, "score": 1, "last_activity_date": 1564012914, "creation_date": 1564011869, "last_edit_date": 1564012914, "question_id": 57192557, "link": "https://stackoverflow.com/questions/57192557/where-can-i-find-all-the-properties-for-customization-in-matplotlib", "title": "Where can I find all the properties for customization in matplotlib?", "body": "<p>I'm trying to create my own style, like 'ggplot', and I'm looking for a dictionary or a guide where I can find all the customizable properties. At the end of this <a href=\"https://matplotlib.org/users/customizing.html\" rel=\"nofollow noreferrer\">page</a> of the documentation of matplotlib there is a file called 'matplotlibrc' and i want to know if that files contains all the possible options on customization or there is something else.</p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 301, "user_id": 11195850, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-69qW1AjA5gs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6vMDBPD8mkSMuPmb_H5zixIX37g/mo/photo.jpg?sz=128", "display_name": "new-dev-123", "link": "https://stackoverflow.com/users/11195850/new-dev-123"}, "edited": false, "score": 0, "creation_date": 1564011814, "post_id": 57192508, "comment_id": 100894403, "body": "The built-in json module will convert that into the appropriate python data structures through <code>json.loads()</code> (assuming that&#39;s a string). You can then proceed to manipulate as necessary."}, {"owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "edited": false, "score": 0, "creation_date": 1564014197, "post_id": 57192508, "comment_id": 100894794, "body": "It&#39;s not clear how the input is supposed to relate to the output. For example, what should happen if the innermost dicts in the input have more than one key-value pair?"}], "answers": [{"tags": [], "owner": {"reputation": 1723, "user_id": 6580543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c2d26bb59afa57a4a08d5000af6391d?s=128&d=identicon&r=PG&f=1", "display_name": "mitoRibo", "link": "https://stackoverflow.com/users/6580543/mitoribo"}, "is_accepted": false, "score": 0, "last_activity_date": 1564012663, "creation_date": 1564012663, "answer_id": 57192632, "question_id": 57192508, "link": "https://stackoverflow.com/questions/57192508/transforming-json-keys-and-values/57192632#57192632", "title": "Transforming JSON keys and values", "body": "<p>Not sure from your question if you already have the json read into a variable, or if it is in a file. This is assuming you have it in a variable already:</p>\n\n<pre><code>in_json = {\n    \"list\": [{\n            \"key1\": \"value1\"\n        },\n        {\n            \"key2\": \"value2\"\n        }\n    ]\n}\n\nout_json = {\"list\":[]}\nfor kd in in_json[\"list\"]:\n    sub_kd = {\"keys\": {}}\n    for k,v in kd.iteritems():\n        sub_kd[\"keys\"][\"name\"] = k\n        sub_kd[\"keys\"][\"value\"] = v\n\n    out_json[\"list\"].append(sub_kd)\n\nprint(out_json)\n</code></pre>\n\n<p>It just loops through the json making dictionaries to append to the <code>out_json</code> dictionary. You could make this print pretty with the json library and also save to file with it</p>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1564015740, "last_edit_date": 1564015740, "creation_date": 1564014931, "answer_id": 57192828, "question_id": 57192508, "link": "https://stackoverflow.com/questions/57192508/transforming-json-keys-and-values/57192828#57192828", "title": "Transforming JSON keys and values", "body": "<p>You didn't indicate exactly what contains the JSON data is in, so I've put it all in a string in the example code below and uses the <a href=\"https://docs.python.org/3/library/json.html#json.load\" rel=\"nofollow noreferrer\"><code>json.loads()</code></a> function to turn it into a Python dictionary. If it's in a file, you can use the module's <a href=\"https://docs.python.org/3/library/json.html#json.load\" rel=\"nofollow noreferrer\"><code>json.load()</code></a> function instead. </p>\n\n<p>It also make the assume that each sub-JSON object in the <code>\"list\"</code> list consists of only one key/value pair as shown in your question.</p>\n\n<p>The code below changes the deserialized dictionary <em>in-place</em> and pretty-prints the result of doing that by using the <a href=\"https://docs.python.org/3/library/json.html#json.dumps\" rel=\"nofollow noreferrer\"><code>json.dumps()</code></a> function to reserialize it.</p>\n\n<p>Note that I changed the keys and values in sample input JSON slightly to make it easier to see the correspondence between it and the printed results.</p>\n\n<pre><code>import json\n\n\njson_in = '''\n    {\n        \"list\": [\n            {\n                \"key1\": \"value1\"\n            },\n            {\n                \"key2\": \"value2\"\n            }\n        ]\n    }\n'''\n\njson_data = json.loads(json_in)  # Deserialize.\n\nfor i, obj in enumerate(json_data['list']):\n    # Assumes each object in list contains only one key, value pair.\n    newobj = { 'name': next(iter(obj.keys())),\n              'value': next(iter(obj.values()))}\n    json_data['list'][i] = {'keys': newobj}\n\nprint(json.dumps(json_data, indent=4))  # Reserialize and print.\n</code></pre>\n\n<p>Printed result:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>{\n    \"list\": [\n        {\n            \"keys\": {\n                \"name\": \"key1\",\n                \"value\": \"value1\"\n            }\n        },\n        {\n            \"keys\": {\n                \"name\": \"key2\",\n                \"value\": \"value2\"\n            }\n        }\n    ]\n}\n</code></pre>\n"}], "owner": {"reputation": 789, "user_id": 7002486, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/583117958527454/picture?type=large", "display_name": "Amar Singh", "link": "https://stackoverflow.com/users/7002486/amar-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564015740, "creation_date": 1564011457, "last_edit_date": 1564012135, "question_id": 57192508, "link": "https://stackoverflow.com/questions/57192508/transforming-json-keys-and-values", "title": "Transforming JSON keys and values", "body": "<p>I have a simple json in python that looks like :</p>\n\n<pre><code>{\n    \"list\": [{\n            \"key1\": \"value1\"\n        },\n        {\n            \"key1\": \"value1\"\n        }\n    ]\n}\n</code></pre>\n\n<p>I want to transform this to the following json. Any suggestions how I can do it with python without installing additional libraries?</p>\n\n<pre><code>{\n    \"list\": [{\n        \"keys\": {\n            \"name\": \"key1\",\n            \"value\": \"value1\"\n        }\n    }, {\n        \"keys\": {\n            \"name\": \"key1\",\n            \"value\": \"value1\"\n        }\n    }]\n}\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1564012434, "post_id": 57192499, "comment_id": 100894512, "body": "<code>from pandas import*</code> is never used in your code and, in general, is very dangerous. Remove it."}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 5188037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b39b1573eed150302875170d598a873d?s=128&d=identicon&r=PG&f=1", "display_name": "kesubagu", "link": "https://stackoverflow.com/users/5188037/kesubagu"}, "is_accepted": false, "score": 0, "last_activity_date": 1564012233, "creation_date": 1564012233, "answer_id": 57192594, "question_id": 57192499, "link": "https://stackoverflow.com/questions/57192499/issues-with-pandas-txt-read-and-ploting/57192594#57192594", "title": "issues with pandas txt read and ploting", "body": "<p>If you use <code>read_csv</code> with <code>header=None</code> pandas will assume there are no headers. You should set <code>header=0</code> which tells pandas the first line has the headers.</p>\n\n<p>The <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html\" rel=\"nofollow noreferrer\">docs</a> have more information</p>\n"}, {"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1564012268, "creation_date": 1564012268, "answer_id": 57192597, "question_id": 57192499, "link": "https://stackoverflow.com/questions/57192499/issues-with-pandas-txt-read-and-ploting/57192597#57192597", "title": "issues with pandas txt read and ploting", "body": "<p>You incorrectly assume that the data in the file is comma-separated and does not have headers. In reality, it <em>does</em> have headers and is space-separated. The right way to read your data is as follows:</p>\n\n<pre><code>dataframe = pd.read_csv('./brain_body.txt', sep=r'\\s+')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2271, "user_id": 8117999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eq8ZW.jpg?s=128&g=1", "display_name": "M_S_N", "link": "https://stackoverflow.com/users/8117999/m-s-n"}, "is_accepted": false, "score": 1, "last_activity_date": 1564013312, "creation_date": 1564013312, "answer_id": 57192697, "question_id": 57192499, "link": "https://stackoverflow.com/questions/57192499/issues-with-pandas-txt-read-and-ploting/57192697#57192697", "title": "issues with pandas txt read and ploting", "body": "<p>Try the following code and format you .txt file by putting tab spaces</p>\n\n<pre><code>import pandas as pd\nfrom sklearn import linear_model\nimport matplotlib.pyplot as plt\n\n#Read_data\n\ndataframe = pd.read_csv(\"./brain_body\",delimiter=\"\\t\")\ndataframe\nx_values = dataframe[[\"Brain\"]]\ny_values = dataframe[[\"Body\"]]\n\n#Training Model on data\n\nbody_reg = linear_model.LinearRegression()\nbody_reg.fit(x_values, y_values)\n\n\nplt.scatter(x_values, y_values)\nplt.plot(x_values, body_reg.predict(x_values))\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11833185, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QBlv7UrieDQ/AAAAAAAAAAI/AAAAAAAAAsg/o4S0TGCUG88/photo.jpg?sz=128", "display_name": "Mohammed Daanaa", "link": "https://stackoverflow.com/users/11833185/mohammed-daanaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "protected_date": 1564015530, "answer_count": 3, "score": 1, "last_activity_date": 1564014435, "creation_date": 1564011322, "question_id": 57192499, "link": "https://stackoverflow.com/questions/57192499/issues-with-pandas-txt-read-and-ploting", "title": "issues with pandas txt read and ploting", "body": "<p>I am trying to read values from a txt file using pandas and plotting a scatter diagram with matploitlib but i keep getting all sort of errors while trying different methods</p>\n\n<p>a summery of my txt file...</p>\n\n<pre><code>Brain   Body         \n0.37    0.117182754\n73  1.349981613\n70  0.925010921\n0.8 0.007620352\n0.15    0.001406136\n50  0.419981176\n\n\nfrom pandas import*\nimport pandas as pd\nfrom sklearn import linear_model\nimport matplotlib.pyplot as plt\n\n#Read_data\n\ndataframe = pd.read_csv('./brain_body.txt' , header = None);\nx_values = dataframe[['Brain']]\ny_values = dataframe[['Body']]\n\n#Training Model on data\n\nbody_reg = linear_model.LinearRegression()\nbody_reg.fit(x_values, y_values)\n\n\nplt.scatter(x_values, y_values)\nplt.plot(x_values, body_reg.predict(x_values))\nplt.show()\n</code></pre>\n\n<p>with this code i et the error message below</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/User/Documents/body_brain_prediction.py\", line 9, in &lt;module&gt;\n    x_values = dataframe[['Brain']]\n  File \"C:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\pandas\\core\\frame.py\", line 2981, in __getitem__\n    indexer = self.loc._convert_to_indexer(key, axis=1, raise_missing=True)\n  File \"C:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\pandas\\core\\indexing.py\", line 1271, in _convert_to_indexer\n    return self._get_listlike_indexer(obj, axis, **kwargs)[1]\n  File \"C:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\pandas\\core\\indexing.py\", line 1078, in _get_listlike_indexer\n    keyarr, indexer, o._get_axis_number(axis), raise_missing=raise_missing\n  File \"C:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\pandas\\core\\indexing.py\", line 1163, in _validate_read_indexer\n    key=key, axis=self.obj._get_axis_name(axis)\nKeyError: \"None of [Index(['Brain'], dtype='object')] are in the [columns]\"\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1564010752, "post_id": 57192412, "comment_id": 100894218, "body": "<a href=\"https://i.stack.imgur.com/r5QpK.png\" rel=\"nofollow noreferrer\">This is</a> the output when I run your code, where the line is visible. (Though it doesn&#39;t make much sense, but I suppose that&#39;s on a different level.) Maybe you want to tell how you run your code, which versions you are using etc.. such that one can reproduce this."}, {"owner": {"reputation": 3009, "user_id": 5833590, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153232467236962/picture?type=large", "display_name": "calestini", "link": "https://stackoverflow.com/users/5833590/calestini"}, "edited": false, "score": 0, "creation_date": 1564010848, "post_id": 57192412, "comment_id": 100894233, "body": "Do you expect the second plot to overlap the first, or one next to each other?"}, {"owner": {"reputation": 1306, "user_id": 8539533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/meFoo.jpg?s=128&g=1", "display_name": "khuynh", "link": "https://stackoverflow.com/users/8539533/khuynh"}, "edited": false, "score": 0, "creation_date": 1564010934, "post_id": 57192412, "comment_id": 100894246, "body": "Your line shows up on my plot when I run your code as well. Please provide some more details and context."}, {"owner": {"reputation": 35, "user_id": 11782167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d41a6b64639d4b55a62367a55edf3b97?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Carles", "link": "https://stackoverflow.com/users/11782167/peter-carles"}, "edited": false, "score": 0, "creation_date": 1564011057, "post_id": 57192412, "comment_id": 100894260, "body": "No I cannot see the lines using Python3"}, {"owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "edited": false, "score": 0, "creation_date": 1564011282, "post_id": 57192412, "comment_id": 100894298, "body": "works for me python 3.6.5...try plt.clf() and plt.close() and try again"}, {"owner": {"reputation": 35, "user_id": 11782167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d41a6b64639d4b55a62367a55edf3b97?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Carles", "link": "https://stackoverflow.com/users/11782167/peter-carles"}, "edited": false, "score": 0, "creation_date": 1564083275, "post_id": 57192412, "comment_id": 100924513, "body": "I try but it does not work :/"}], "owner": {"reputation": 35, "user_id": 11782167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d41a6b64639d4b55a62367a55edf3b97?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Carles", "link": "https://stackoverflow.com/users/11782167/peter-carles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564010653, "creation_date": 1564010321, "last_edit_date": 1564010653, "question_id": 57192412, "link": "https://stackoverflow.com/questions/57192412/why-i-cannot-see-the-plot-of-the-line", "title": "Why I cannot see the plot of the line?", "body": "<p>Hello I am programming using Python and I have this problem : </p>\n\n<p>Here is my code :</p>\n\n<pre><code>import matplotlib.pyplot as plt\ny = ['Physics','Chemistry','Economics','Philosophy','Computer \nScience','Sociology','Biology','History','Overall']\nx = [0.0,33.333333333333336,50.0,50.0,50.0,54.54545454545455,58.333333333333336,100.0,51.851851851851855]\nplt.barh(y,x)\nplt.plot(x,x) # not possible to see this plot\nplt.title('Percent Completion Rate of Each Course')\nplt.show()\n</code></pre>\n\n<p>This plot : <code>plt.plot(x,x)</code> is not visible on my figure. Here is the result of <code>plt.show()</code> :</p>\n\n<p><a href=\"https://i.stack.imgur.com/5BfAi.png\" rel=\"nofollow noreferrer\">Plot</a></p>\n\n<p>Coud you help me please ? </p>\n\n<p>Thank you very much !</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1406, "user_id": 6265630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QG6X.jpg?s=128&g=1", "display_name": "Nakor", "link": "https://stackoverflow.com/users/6265630/nakor"}, "edited": false, "score": 2, "creation_date": 1564011445, "post_id": 57192409, "comment_id": 100894336, "body": "You should check <code>df.groupby(&#39;date&#39;).agg(len)</code>, your last date has an extra item. One of your DataFrames has probably a duplicate <code>2019-07-17</code>, which is why you see the difference"}, {"owner": {"reputation": 50872, "user_id": 523612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ae512dd708a619496d36b1f681f95e0?s=128&d=identicon&r=PG", "display_name": "Karl Knechtel", "link": "https://stackoverflow.com/users/523612/karl-knechtel"}, "edited": false, "score": 0, "creation_date": 1564014370, "post_id": 57192409, "comment_id": 100894825, "body": "Can you produce a smaller dataset that exhibits the unexpected behaviour?"}, {"owner": {"reputation": 8608, "user_id": 1307020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BobEg.jpg?s=128&g=1", "display_name": "Saturnix", "link": "https://stackoverflow.com/users/1307020/saturnix"}, "edited": false, "score": 0, "creation_date": 1564018378, "post_id": 57192409, "comment_id": 100895498, "body": "You are right: the error is in my data, I have a duplicate row..."}], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 1, "last_activity_date": 1564013752, "creation_date": 1564013752, "answer_id": 57192735, "question_id": 57192409, "link": "https://stackoverflow.com/questions/57192409/pd-concatarray-groupbydate-sum-returns-unexpected-behavior/57192735#57192735", "title": "pd.concat(array).groupby(&#39;date&#39;).sum() returns unexpected behavior", "body": "<p>Let us check two things </p>\n\n<pre><code>pd.concat(_dataframes).groupby(\"date\", as_index=False).date.nunique()\n</code></pre>\n\n<p>And </p>\n\n<pre><code>pd.concat(_dataframes).groupby(\"date\", as_index=False).date.count()\n</code></pre>\n\n<p>If they are not equal , then when you do groupby you will have the different output </p>\n\n<p>Since the for loop , will only sum the max value , not all the value . To match with the output </p>\n\n<pre><code>pd.concat(_dataframes).sort_values('trade_number').drop_duplicates('date',keep='last').groupby('date')['trade_number'].sum()\n</code></pre>\n"}], "owner": {"reputation": 8608, "user_id": 1307020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BobEg.jpg?s=128&g=1", "display_name": "Saturnix", "link": "https://stackoverflow.com/users/1307020/saturnix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 57192735, "answer_count": 1, "score": 2, "last_activity_date": 1564013752, "creation_date": 1564010314, "last_edit_date": 1564010907, "question_id": 57192409, "link": "https://stackoverflow.com/questions/57192409/pd-concatarray-groupbydate-sum-returns-unexpected-behavior", "title": "pd.concat(array).groupby(&#39;date&#39;).sum() returns unexpected behavior", "body": "<p>I have 8 dataframes of the same length, with a \"date\" column that looks the same across all (though I don't use it as index).</p>\n\n<pre><code>&gt;&gt;&gt; _dataframes[0].tail(3)\n\n            date  trade_number\n4122  2019-07-15           678\n4123  2019-07-16           678\n4124  2019-07-17           678\n</code></pre>\n\n<p>They all end at index <code>4124</code> with date <code>2019-07-17</code> and have a column <code>trade_number</code> with a value that's variable but it's always sorted in ascending order.</p>\n\n<pre><code>max = 0\nfor df in _dataframes:\n    max += df [\"trade_number\"].max()\n</code></pre>\n\n<p>this gives <code>max = 4231</code>, consistent to what I find if I open a calculator and sum the last rows of every dataframe manually.</p>\n\n<p>However...</p>\n\n<pre><code>&gt;&gt;&gt; test = pd.concat(_dataframes).groupby(\"date\", as_index=False).sum()\n&gt;&gt;&gt; test.tail(10)\n\n            date  trade_number\n4115  2019-07-08          4218\n4116  2019-07-09          4219\n4117  2019-07-10          4221\n4118  2019-07-11          4223\n4119  2019-07-12          4224\n4120  2019-07-13          4224\n4121  2019-07-14          4224\n4122  2019-07-15          4230\n4123  2019-07-16          4230\n4124  2019-07-17          4512 # &lt;--- WHY?\n</code></pre>\n\n<p>How come the last line reading is <code>2019-07-17 4512</code>. Why isn't that <code>4231</code>?</p>\n\n<p><a href=\"https://privatebin.net/?381f12dbd714976c#DismWRgE4jmTwfcYnbuQzibk86s7kxiL4UjXKzuE66y7\" rel=\"nofollow noreferrer\">Here's</a> the data that results from <code>pd.concat(_dataframes).to_clipboard()</code> so that you can import it with <code>pd.read_clipboard()</code>.</p>\n"}, {"tags": ["python", "tkinter", "grid", "hide"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1564016910, "post_id": 57192405, "comment_id": 100895244, "body": "You need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> \u2014 i.e. more complete code."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1564034968, "post_id": 57192405, "comment_id": 100899305, "body": "if you used <code>grid()</code> to display then use <code>grid_forget()</code> to hide. To show something in the same window  don&#39;t create new one - <code>Tk()</code> - but use variable in which you have current  window - ie. <code>current_window.title(&quot;HOT FOOD&quot;)</code>, etc."}, {"owner": {"reputation": 1, "user_id": 11710887, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lG4d7XEKQqk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfm7fjj2fwJwgoUwm0cps6Pxz9Uzg/photo.jpg?sz=128", "display_name": "Carlos Rojas", "link": "https://stackoverflow.com/users/11710887/carlos-rojas"}, "edited": false, "score": 0, "creation_date": 1564098273, "post_id": 57192405, "comment_id": 100928878, "body": "thanks that worked perfectly but now it is removing all my widgets but not replacing them with what i want and leaving a blank screen. I have updated the code now with the new issue"}], "owner": {"reputation": 1, "user_id": 11710887, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lG4d7XEKQqk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfm7fjj2fwJwgoUwm0cps6Pxz9Uzg/photo.jpg?sz=128", "display_name": "Carlos Rojas", "link": "https://stackoverflow.com/users/11710887/carlos-rojas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564098461, "creation_date": 1564010288, "last_edit_date": 1564098461, "question_id": 57192405, "link": "https://stackoverflow.com/questions/57192405/i-am-trying-to-hide-my-main-menu-screens-widgets-when-i-select-a-submenu", "title": "I am trying to hide my main menu screens widgets when i select a submenu", "body": "<p>now the issue is that i am being left with a blank screen and my other widget are not being displayed</p>\n\n<pre><code>def hotfood():\n    shclogo.grid_forget()\n    maintitle1.grid_forget()\n    maintitle2.grid_forget()\n    hf.grid_forget()\n    cf.grid_forget()\n    frzn.grid_forget()\n    drnks.grid_forget()\n    snks.grid_forget()\n    crt.grid_forget()\n    hotfoodhome = Button(hotfood, text = 'Home', bg = 'white', fg = \n    'black', font = 'arial 20 bold')\n    hotfoodhome.grid(row = 0, column = 0, sticky = EW)\n    hotfoodtitle = Label (hotfood, text = 'HOT FOOD', bg = 'white', fg = \n    'black', font = 'arial 48 bold')\n    hotfoodtitle.grid(row = 0, column = 1, sticky = EW)\n</code></pre>\n"}, {"tags": ["python", "django", "amazon-s3", "scrapy"], "answers": [{"tags": [], "owner": {"reputation": 3401, "user_id": 408951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f82eda1711eeafd65c59205a5454458e?s=128&d=identicon&r=PG", "display_name": "Thiago Curvelo", "link": "https://stackoverflow.com/users/408951/thiago-curvelo"}, "is_accepted": false, "score": 2, "last_activity_date": 1568174178, "last_edit_date": 1592644375, "creation_date": 1564022160, "answer_id": 57193543, "question_id": 57192392, "link": "https://stackoverflow.com/questions/57192392/how-can-i-save-all-scrapy-html-files-to-s3/57193543#57193543", "title": "How can I save all Scrapy HTML files to S3?", "body": "<p>You may want to write your own <a href=\"https://docs.scrapy.org/en/latest/topics/downloader-middleware.html#writing-your-own-storage-backend\" rel=\"nofollow noreferrer\">HTTPCACHE Storage</a>.</p>\n<blockquote>\n<h1>Writing your own storage backend</h1>\n<p>You can implement a cache storage backend by creating a Python class that defines the methods described below.</p>\n<h2><code>class scrapy.extensions.httpcache.CacheStorage</code></h2>\n<h3><code>open_spider(spider)</code></h3>\n<p>This method gets called after a spider has been opened for crawling. It handles the open_spider signal.</p>\n<p>Parameters:</p>\n<ul>\n<li>spider (Spider object) \u2013 the spider which has been opened</li>\n</ul>\n<h3><code>close_spider(spider)</code></h3>\n<p>This method gets called after a spider has been closed. It handles the close_spider signal.</p>\n<p>Parameters:</p>\n<ul>\n<li>spider (Spider object) \u2013 the spider which has been closed</li>\n</ul>\n<h3><code>retrieve_response(spider, request)</code></h3>\n<p>Return response if present in cache, or None otherwise.</p>\n<p>Parameters:</p>\n<ul>\n<li><strong>spider</strong> (Spider object) \u2013 the spider which generated the request</li>\n<li><strong>request</strong> (Request object) \u2013 the request to find cached reponse for</li>\n</ul>\n<h3><code>store_response(spider, request, response)</code></h3>\n<p>Store the given response in the cache.</p>\n<p>Parameters:</p>\n<ul>\n<li>spider (Spider object) \u2013 the spider for which the response is intended</li>\n<li>request (Request object) \u2013 the corresponding request the spider generated</li>\n<li>response (Response object) \u2013 the response to store in the cache</li>\n</ul>\n<p>In order to use your storage backend, set:</p>\n<p><code>HTTPCACHE_STORAGE</code> to the Python import path of your custom storage class.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1452, "user_id": 4949165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D7VDa.png?s=128&g=1", "display_name": "Arun Augustine", "link": "https://stackoverflow.com/users/4949165/arun-augustine"}, "is_accepted": false, "score": 0, "last_activity_date": 1564028292, "creation_date": 1564028292, "answer_id": 57194257, "question_id": 57192392, "link": "https://stackoverflow.com/questions/57192392/how-can-i-save-all-scrapy-html-files-to-s3/57194257#57194257", "title": "How can I save all Scrapy HTML files to S3?", "body": "<p>Enable <code>DownloaderMiddleware</code> in settings and write the code in <code>process_response</code> where you will get all the responses.</p>\n"}], "owner": {"reputation": 457, "user_id": 9778172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df39a6415bbb6df61a855066f3c40c0?s=128&d=identicon&r=PG&f=1", "display_name": "superdee", "link": "https://stackoverflow.com/users/9778172/superdee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568174178, "creation_date": 1564010178, "question_id": 57192392, "link": "https://stackoverflow.com/questions/57192392/how-can-i-save-all-scrapy-html-files-to-s3", "title": "How can I save all Scrapy HTML files to S3?", "body": "<p>I would like to set up a system to save all HTML files Scrapy finds to s3. Then before pulling any page, I would like to check if that page has already been scraped and stores to S3.</p>\n\n<p>I have looked at scrapy's ITEM_PIPELINES, but that seems like it's only for the parse_item function?</p>\n\n<p>If I have multiple spiders, it seems silly to have to add a line like:</p>\n\n<pre><code>def parse(self, response):\n    self.push_and_save_to_s3(response.text)\n\ndef parse_item(self, response):\n    self.push_and_save_to_s3(response.text)\n</code></pre>\n\n<p>Is there some middleware I can set up that will do this automatically every time scrapy finds HTML? That way I don't have to go add this code to each parse() function and parse_item() function in my codebase.</p>\n\n<p>Once I have that setup, is there a way I can check all previous URLs to tell scrapy to either pull from the live webpage or our S3 bucket?</p>\n"}, {"tags": ["python", "logging", "argparse"], "comments": [{"owner": {"reputation": 1707, "user_id": 11832127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zsq7r.png?s=128&g=1", "display_name": "ndclt", "link": "https://stackoverflow.com/users/11832127/ndclt"}, "edited": false, "score": 0, "creation_date": 1564011470, "post_id": 57192387, "comment_id": 100894342, "body": "Why do you put <code>nargs=&#39;+&#39;</code>, the user have to choose only one level, the default notation is that your parameter is optional (<a href=\"https://docs.python.org/3.7/library/argparse.html#required\" rel=\"nofollow noreferrer\">python docs</a>)?"}, {"owner": {"reputation": 103, "user_id": 7526615, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sdoo3rMCmaw/AAAAAAAAAAI/AAAAAAAAAR0/kSG2ip-VjKQ/photo.jpg?sz=128", "display_name": "Tesla001", "link": "https://stackoverflow.com/users/7526615/tesla001"}, "reply_to_user": {"reputation": 1707, "user_id": 11832127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zsq7r.png?s=128&g=1", "display_name": "ndclt", "link": "https://stackoverflow.com/users/11832127/ndclt"}, "edited": false, "score": 0, "creation_date": 1564011945, "post_id": 57192387, "comment_id": 100894426, "body": "@ndclt you are right, nargs=&#39;+&#39; is not required and was the main reason why I was getting a list as input."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1564012892, "post_id": 57192387, "comment_id": 100894593, "body": "I often recommend <code>args = parser.parse_args()</code> followed by <code>print(args)</code>.  The gives you a clear(er) idea of what the parser has done for you."}, {"owner": {"reputation": 5013, "user_id": 1619432, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8SFy2.png?s=128&g=1", "display_name": "handle", "link": "https://stackoverflow.com/users/1619432/handle"}, "edited": false, "score": 0, "creation_date": 1575624737, "post_id": 57192387, "comment_id": 104637410, "body": "Also see <a href=\"https://stackoverflow.com/questions/14097061\">stackoverflow.com/questions/14097061</a>"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 7526615, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sdoo3rMCmaw/AAAAAAAAAAI/AAAAAAAAAR0/kSG2ip-VjKQ/photo.jpg?sz=128", "display_name": "Tesla001", "link": "https://stackoverflow.com/users/7526615/tesla001"}, "edited": false, "score": 0, "creation_date": 1564010824, "post_id": 57192445, "comment_id": 100894230, "body": "Hi, I tried your suggestion and got the following error: AttributeError: &#39;list&#39; object has no attribute &#39;lower&#39;"}, {"owner": {"reputation": 1707, "user_id": 11832127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zsq7r.png?s=128&g=1", "display_name": "ndclt", "link": "https://stackoverflow.com/users/11832127/ndclt"}, "reply_to_user": {"reputation": 103, "user_id": 7526615, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sdoo3rMCmaw/AAAAAAAAAAI/AAAAAAAAAR0/kSG2ip-VjKQ/photo.jpg?sz=128", "display_name": "Tesla001", "link": "https://stackoverflow.com/users/7526615/tesla001"}, "edited": false, "score": 0, "creation_date": 1564011312, "post_id": 57192445, "comment_id": 100894307, "body": "I forgot a <code>[0]</code> after the log (I edit my post). But I think blues solution is more elegant than mine."}, {"owner": {"reputation": 375, "user_id": 9139691, "user_type": "registered", "profile_image": "https://graph.facebook.com/1741000322585477/picture?type=large", "display_name": "Rob Ert", "link": "https://stackoverflow.com/users/9139691/rob-ert"}, "edited": false, "score": 0, "creation_date": 1573827557, "post_id": 57192445, "comment_id": 104024904, "body": "Nicely done. This one should be selected as answer!"}, {"owner": {"reputation": 9159, "user_id": 514094, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4b57e1790b695ce06f5dd9d46e0184ad?s=128&d=identicon&r=PG", "display_name": "Micah Carrick", "link": "https://stackoverflow.com/users/514094/micah-carrick"}, "edited": false, "score": 0, "creation_date": 1600258451, "post_id": 57192445, "comment_id": 113030044, "body": "As of Python 3.2 you can specify level as a string"}], "tags": [], "owner": {"reputation": 1707, "user_id": 11832127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zsq7r.png?s=128&g=1", "display_name": "ndclt", "link": "https://stackoverflow.com/users/11832127/ndclt"}, "is_accepted": false, "score": 2, "last_activity_date": 1564011329, "last_edit_date": 1564011329, "creation_date": 1564010562, "answer_id": 57192445, "question_id": 57192387, "link": "https://stackoverflow.com/questions/57192387/how-to-set-logging-level-from-command-line/57192445#57192445", "title": "how to set logging level from command line", "body": "<p>The level should be a variable from <code>logging</code> not a string, <code>logging.DEBUG</code> for example. I think you have to create a dict matching the given argument and the logging variable:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>level_config = {'debug': logging.DEBUG, 'info': logging.INFO} # etc.\nlog_level = level_config[parser.parse_args().log[0].lower()]\n</code></pre>\n\n<p>You can also add <code>choices=['debug', 'info', 'warning']</code> in your <code>add_argument</code> call.</p>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 7526615, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sdoo3rMCmaw/AAAAAAAAAAI/AAAAAAAAAR0/kSG2ip-VjKQ/photo.jpg?sz=128", "display_name": "Tesla001", "link": "https://stackoverflow.com/users/7526615/tesla001"}, "edited": false, "score": 0, "creation_date": 1564012148, "post_id": 57192456, "comment_id": 100894457, "body": "Hi @blues, after trying log_level = getattr(logging, log_level[0]), logging.basicConfig(level=log_level) I got the following error     raise TypeError(&quot;Level not an integer or a valid string: %r&quot; % level) TypeError: Level not an integer or a valid string: &lt;function info at 0x7ffff6cf0378&gt;"}, {"owner": {"reputation": 3465, "user_id": 803194, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/517b0b537f276b8dcf84c55ed078035a?s=128&d=identicon&r=PG", "display_name": "blues", "link": "https://stackoverflow.com/users/803194/blues"}, "reply_to_user": {"reputation": 103, "user_id": 7526615, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sdoo3rMCmaw/AAAAAAAAAAI/AAAAAAAAAR0/kSG2ip-VjKQ/photo.jpg?sz=128", "display_name": "Tesla001", "link": "https://stackoverflow.com/users/7526615/tesla001"}, "edited": false, "score": 0, "creation_date": 1564038506, "post_id": 57192456, "comment_id": 100900868, "body": "My guess would be that you did not capitalize the argument. Make sure to supply the argument as <code>-log=DEBUG</code> and not <code>-log=debug</code>. Or call <code>.upper()</code> on it."}], "tags": [], "owner": {"reputation": 3465, "user_id": 803194, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/517b0b537f276b8dcf84c55ed078035a?s=128&d=identicon&r=PG", "display_name": "blues", "link": "https://stackoverflow.com/users/803194/blues"}, "is_accepted": false, "score": 1, "last_activity_date": 1564010649, "creation_date": 1564010649, "answer_id": 57192456, "question_id": 57192387, "link": "https://stackoverflow.com/questions/57192387/how-to-set-logging-level-from-command-line/57192456#57192456", "title": "how to set logging level from command line", "body": "<p><code>log_level = 'logging.'+log_level[0]</code> this just makes the string <code>'logging.DEBUG'</code> which is not something that basicConfig understands. what it want's is the <code>logging.DEBUG</code> constant which you can get by <code>getattr(logging, log_level[0])</code>. Newer versions of python actually accept the textual representation as well and you can just pass in <code>'DEBUG'</code> as level.</p>\n"}, {"tags": [], "owner": {"reputation": 1495, "user_id": 1046449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11e6482dbf04152ebdab0dfdb5389bf4?s=128&d=identicon&r=PG", "display_name": "BarryPye", "link": "https://stackoverflow.com/users/1046449/barrypye"}, "is_accepted": false, "score": 7, "last_activity_date": 1584155372, "creation_date": 1584155372, "answer_id": 60679407, "question_id": 57192387, "link": "https://stackoverflow.com/questions/57192387/how-to-set-logging-level-from-command-line/60679407#60679407", "title": "how to set logging level from command line", "body": "<p>Putting these combinations together, allowing the user to name the level with upper or lower case, allowing only one level to be specified, and picking the explicit level from a dictionary with a default to the WARNING level:</p>\n\n<pre><code>import argparse\nimport logging\nparser = argparse.ArgumentParser()\nparser.add_argument(\n    \"-log\", \n    \"--log\", \n    default=\"warning\",\n    help=(\n        \"Provide logging level. \"\n        \"Example --log debug', default='warning'\"),\n    ),\n)\n\noptions = parser.parse_args()\nlevels = {\n    'critical': logging.CRITICAL,\n    'error': logging.ERROR,\n    'warn': logging.WARNING,\n    'warning': logging.WARNING,\n    'info': logging.INFO,\n    'debug': logging.DEBUG\n}\nlevel = levels.get(options.log.lower())\nif level is None:\n    raise ValueError(\n        f\"log level given: {options.log}\"\n        f\" -- must be one of: {' | '.join(levels.keys())}\")\nlogging.basicConfig(level=level)\nlogger = logging.getLogger(__name__)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1778, "user_id": 693357, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/cbfc45c654ee286339eba8664a990123?s=128&d=identicon&r=PG", "display_name": "Glazed", "link": "https://stackoverflow.com/users/693357/glazed"}, "is_accepted": false, "score": 0, "last_activity_date": 1609542745, "creation_date": 1609542745, "answer_id": 65534541, "question_id": 57192387, "link": "https://stackoverflow.com/questions/57192387/how-to-set-logging-level-from-command-line/65534541#65534541", "title": "how to set logging level from command line", "body": "<p>The <code>basicConfig</code> function can take a string argument for <code>level</code>, and it will check its validity for you, so the code can be much simpler than BarryPye's answer.</p>\n<pre><code>import argparse\nimport logging\n\nparser = argparse.ArgumentParser()\nparser.add_argument( '-log',\n                     '--loglevel',\n                     default='warning',\n                     help='Provide logging level. Example --loglevel debug, default=warning' )\n\nargs = parser.parse_args()\n\nlogging.basicConfig( level=args.loglevel.upper() )\nlogging.info( 'Logging now setup.' )\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 7526615, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sdoo3rMCmaw/AAAAAAAAAAI/AAAAAAAAAR0/kSG2ip-VjKQ/photo.jpg?sz=128", "display_name": "Tesla001", "link": "https://stackoverflow.com/users/7526615/tesla001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7941, "favorite_count": 0, "answer_count": 4, "score": 4, "last_activity_date": 1609542745, "creation_date": 1564010078, "last_edit_date": 1600920376, "question_id": 57192387, "link": "https://stackoverflow.com/questions/57192387/how-to-set-logging-level-from-command-line", "title": "how to set logging level from command line", "body": "<p>I'm using argparse to get the logging level from the command line and then passing it as input for logging.basicConfig. However, the way I'm trying to implement this is not working. Any suggestion?</p>\n<p>Desire behavior, from command line:</p>\n<pre><code>python main.py -log=DEBUG\n</code></pre>\n<p>Desire output</p>\n<pre><code>DEBUG:__main__: Debug is working\n</code></pre>\n<p>Code</p>\n<pre><code>import logging\nimport argparse\n\nparser = argparse.ArgumentParser()\nparser.add_argument(&quot;-log&quot;, &quot;--log&quot;, nargs='+', help=&quot;Provide logging level. Example --log debug'&quot;)\n\nlog_level = parser.parse_args().log\nlog_level = 'logging.'+log_level[0]\nprint(log_level)\nlogging.basicConfig(level=log_level)\nlogger = logging.getLogger(__name__) \nlogger.debug(' Debug is working')\n</code></pre>\n"}, {"tags": ["python", "sql", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 11569423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zsjiV.jpg?s=128&g=1", "display_name": "Bruno Aquino", "link": "https://stackoverflow.com/users/11569423/bruno-aquino"}, "is_accepted": false, "score": 0, "last_activity_date": 1564011889, "creation_date": 1564011889, "answer_id": 57192558, "question_id": 57192318, "link": "https://stackoverflow.com/questions/57192318/use-pandas-or-sql-to-calculate-revenue-based-on-subscription-duration/57192558#57192558", "title": "Use Pandas or SQL to calculate Revenue based on subscription duration?", "body": "<p>I don't have sure if I perfectly understood your problem, but it looks that you need a way to iteract between the current and a past date of a client value.</p>\n\n<p>see if this code can help you:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># example DataFrame\ndf = pd.DataFrame({'date':[1,2,3,1,2,3],\n                   'client':['c1', 'c1', 'c1', 'c2', 'c2', 'c2'],\n                   'value':[123, 234, 123, 456, 345, 678]})\n# Set index to access items faster\ndf.set_index(['client', 'date'], inplace=True)\n\n# iteract each item\ndelta = []\nfor client in df.index.levels[0]:\n    for date in df.index.levels[1]:\n        # if the item do not exist on index, nothing happens\n        try:\n            current = df.loc[client].loc[date]['value']\n            # if there isnt past date, delta is zero, but uou can change it\n            try:\n                before = df.loc[client].loc[date-1]['value']\n                delta.append(current - before)\n            except:\n                delta.append(0)\n        except:\n            pass\n\ndf['delta'] = delta\ndf\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11833131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dabc95f6f9cbd8af43b556a0065f4744?s=128&d=identicon&r=PG&f=1", "display_name": "Sevla", "link": "https://stackoverflow.com/users/11833131/sevla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564011889, "creation_date": 1564009546, "question_id": 57192318, "link": "https://stackoverflow.com/questions/57192318/use-pandas-or-sql-to-calculate-revenue-based-on-subscription-duration", "title": "Use Pandas or SQL to calculate Revenue based on subscription duration?", "body": "<p>I'm trying to calculate some monthly business indicators based on revenue using a csv that has the following fields: client ID, start of subscription, subscription duration and subscription value.</p>\n\n<p>Since I'll need to make comparisons on past months(if the revenue for a specific client has decresed, for example), my initial idea was to create new columns for each month and based on those columns, use panda to find the values and store them on a new table for these indicators.</p>\n\n<p>Do you guys think that this is the best way to go or it would be best to try and use SQL to obtain these metrics?</p>\n\n<p>Sorry if the question is not clear, cloudn't find a way to explain it better.</p>\n"}, {"tags": ["python", "arrays", "performance", "numpy", "interpolation"], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 9866504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8843c9a4f2c860078a0fbbde8f575eb?s=128&d=identicon&r=PG&f=1", "display_name": "T. Zaborniak", "link": "https://stackoverflow.com/users/9866504/t-zaborniak"}, "edited": false, "score": 0, "creation_date": 1564029173, "post_id": 57193284, "comment_id": 100897396, "body": "Thank-you for your response! This approach works perfectly. I need to have the final output be in an <code>nr x nt</code> array, so I modified your evaluate_fast function to loop over the radii. I&#39;ll write up a quick answer to supplement yours."}, {"owner": {"reputation": 177, "user_id": 11423283, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TBEnVFZbsr0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9gmTrP6uKB2r1XBvU1spHiPergg/mo/photo.jpg?sz=128", "display_name": "Matthew Flamm", "link": "https://stackoverflow.com/users/11423283/matthew-flamm"}, "reply_to_user": {"reputation": 97, "user_id": 9866504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8843c9a4f2c860078a0fbbde8f575eb?s=128&d=identicon&r=PG&f=1", "display_name": "T. Zaborniak", "link": "https://stackoverflow.com/users/9866504/t-zaborniak"}, "edited": false, "score": 0, "creation_date": 1564054288, "post_id": 57193284, "comment_id": 100909656, "body": "Do you see the reshape command at the last line?  Do it that way instead.  Avoid for loops AT ALL COSTS."}, {"owner": {"reputation": 177, "user_id": 11423283, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TBEnVFZbsr0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9gmTrP6uKB2r1XBvU1spHiPergg/mo/photo.jpg?sz=128", "display_name": "Matthew Flamm", "link": "https://stackoverflow.com/users/11423283/matthew-flamm"}, "reply_to_user": {"reputation": 97, "user_id": 9866504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8843c9a4f2c860078a0fbbde8f575eb?s=128&d=identicon&r=PG&f=1", "display_name": "T. Zaborniak", "link": "https://stackoverflow.com/users/9866504/t-zaborniak"}, "edited": false, "score": 0, "creation_date": 1564054346, "post_id": 57193284, "comment_id": 100909692, "body": "Note that after reshape, I get the same answer as your original code!"}, {"owner": {"reputation": 97, "user_id": 9866504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8843c9a4f2c860078a0fbbde8f575eb?s=128&d=identicon&r=PG&f=1", "display_name": "T. Zaborniak", "link": "https://stackoverflow.com/users/9866504/t-zaborniak"}, "edited": false, "score": 0, "creation_date": 1564076414, "post_id": 57193284, "comment_id": 100921518, "body": "Whoops - I totally missed that! Thanks for drawing my attention back to it. And, yes, with regard to avoiding for-loops, I&#39;ve been recently learning as much..."}], "tags": [], "owner": {"reputation": 177, "user_id": 11423283, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TBEnVFZbsr0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9gmTrP6uKB2r1XBvU1spHiPergg/mo/photo.jpg?sz=128", "display_name": "Matthew Flamm", "link": "https://stackoverflow.com/users/11423283/matthew-flamm"}, "is_accepted": true, "score": 1, "last_activity_date": 1564020714, "last_edit_date": 1564020714, "creation_date": 1564020005, "answer_id": 57193284, "question_id": 57192298, "link": "https://stackoverflow.com/questions/57192298/what-is-the-quickest-way-to-evaluate-an-interpolated-function-on-a-polar-grid-in/57193284#57193284", "title": "What is the quickest way to evaluate an interpolated function on a polar grid in Python?", "body": "<p>By examining the <code>__call__</code> method of <code>RectBivariateSpline</code> <a href=\"https://docs.scipy.org/doc/scipy-1.3.0/reference/generated/scipy.interpolate.RectBivariateSpline.__call__.html#scipy.interpolate.RectBivariateSpline.__call__\" rel=\"nofollow noreferrer\">here</a>, you can use the <code>grid=False</code> option to avoid the slow double loop here.</p>\n\n<p>This alone provides an order of magnitude speed up on the example you gave.  I would expect the speedup to be even better on larger data sets.</p>\n\n<p>Also the answers are the same between the methods as expected.</p>\n\n<pre><code>import numpy as np\nimport scipy as sp\nfrom scipy.interpolate import RectBivariateSpline\n\n# this shows the type of data/function I'm working with:\n\nn = 1000\nx = np.linspace(-10, 10, n)\ny = np.linspace(-10, 10, n)\nz = np.random.rand(n,n)\n\nfun = RectBivariateSpline(x, y, z)\n\n# this defines the polar grid and converts it to a Cartesian one:\n\nnr = 1000\nnt = 360\n\nr = np.linspace(0, 10, nr)\nt = np.linspace(0, 2*np.pi, nt)\n\nR, T = np.meshgrid(r, t, indexing = 'ij')\n\nkx = R*np.cos(T)\nky = R*np.sin(T)\n\n# this evaluates the interpolated function over the converted grid:\ndef evaluate_slow(kx, ky):\n    eval = np.empty((nr, nt))\n\n    for i in range(0, nr):\n        for j in range(0, nt):\n            eval[i][j] = fun(kx[i][j], ky[i][j])\n    return eval\n\ndef evaluate_fast(kx, ky):\n    eval = fun(kx.ravel(), ky.ravel(), grid=False)\n    return eval  \n\n%timeit evaluate_slow(kx, ky)\n%timeit evaluate_fast(kx, ky)\n\neval1 = evaluate_slow(kx, ky)\neval2 = evaluate_fast(kx, ky)\n\nprint(np.all(np.isclose(eval1, eval2.reshape((nr, nt)))))\n\n1.69 s \u00b1 73.5 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n262 ms \u00b1 2.86 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\nTrue\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 9866504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8843c9a4f2c860078a0fbbde8f575eb?s=128&d=identicon&r=PG&f=1", "display_name": "T. Zaborniak", "link": "https://stackoverflow.com/users/9866504/t-zaborniak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 57193284, "answer_count": 1, "score": 1, "last_activity_date": 1564030001, "creation_date": 1564009383, "question_id": 57192298, "link": "https://stackoverflow.com/questions/57192298/what-is-the-quickest-way-to-evaluate-an-interpolated-function-on-a-polar-grid-in", "title": "What is the quickest way to evaluate an interpolated function on a polar grid in Python?", "body": "<p>I have an interpolated function of two Cartesian variables (created using <code>RectBivariateSpline</code>), and I'm looking for the fastest means of evaluating that function over a polar grid.</p>\n\n<p>I've approached this problem by first defining spaces in <code>r</code> (the radial coordinate) and <code>t</code> (the angular coordinate), creating a meshgrid from these, converting this meshgrid to Cartesian coordinates, and then evaluating the function at each point by looping over the Cartesian meshgrid. The below code demonstrates this.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport scipy as sp\nfrom scipy.interpolate import RectBivariateSpline\n\n# this shows the type of data/function I'm working with:\n\nn = 1000\nx = np.linspace(-10, 10, n)\ny = np.linspace(-10, 10, n)\nz = np.random.rand(n,n)\n\nfun = RectBivariateSpline(x, y, z)\n\n# this defines the polar grid and converts it to a Cartesian one:\n\nnr = 1000\nnt = 360\n\nr = np.linspace(0, 10, nr)\nt = np.linspace(0, 2*np.pi, nt)\n\nR, T = np.meshgrid(r, t, indexing = 'ij')\n\nkx = R*np.cos(T)\nky = R*np.sin(T)\n\n# this evaluates the interpolated function over the converted grid:\n\neval = np.empty((nr, nt))\n\nfor i in range(0, nr):\n    for j in range(0, nt):\n        eval[i][j] = fun(kx[i][j], ky[i][j])\n</code></pre>\n\n<p>In this way, I get an array whose elements match up with the <code>R</code> and <code>T</code> arrays, where <code>i</code> corresponds to <code>R</code>, and <code>j</code> to <code>T</code>. This is important, because for each radius I need to sum the evaluated function over the angular coordinate. </p>\n\n<p>This approach works, but is dreadfully slow... in reality I am working with much, much larger arrays than those here. I'm looking for a way to speed this up. </p>\n\n<p>One thing I've noticed is that one can submit two 1D arrays to a 2-variable function and have returned a 2D array of the function evaluated at each possible combination of the input points. Because my function isn't a polar one, however, I can't just submit my radial and angular arrays to the function. Ideally there'd be a way of converting an interpolated function to accept polar arguments, but I don't think this is possible.</p>\n\n<p>I should note further that there is no way I can define the function in terms of radial coordinates in the first place: the data I'm using is output from a discrete Fourier transform, which requires rectangularly-gridded data.</p>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "csv"], "comments": [{"owner": {"reputation": 780, "user_id": 1034677, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/537e6333a0f3383d3e99a4d75c827e7e?s=128&d=identicon&r=PG", "display_name": "tim", "link": "https://stackoverflow.com/users/1034677/tim"}, "edited": false, "score": 0, "creation_date": 1564009336, "post_id": 57192270, "comment_id": 100893979, "body": "Are you looking for the average for each row from column1 through columnN, or the average of each column?"}, {"owner": {"reputation": 510, "user_id": 7762646, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9565729c9618f86e148295f0bb91032c?s=128&d=identicon&r=PG&f=1", "display_name": "G. Macia", "link": "https://stackoverflow.com/users/7762646/g-macia"}, "reply_to_user": {"reputation": 780, "user_id": 1034677, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/537e6333a0f3383d3e99a4d75c827e7e?s=128&d=identicon&r=PG", "display_name": "tim", "link": "https://stackoverflow.com/users/1034677/tim"}, "edited": false, "score": 0, "creation_date": 1564009561, "post_id": 57192270, "comment_id": 100894020, "body": "None, I am looking for a cell by cell average. So the final table will have the same dimensions in terms of rows and columns."}, {"owner": {"reputation": 780, "user_id": 1034677, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/537e6333a0f3383d3e99a4d75c827e7e?s=128&d=identicon&r=PG", "display_name": "tim", "link": "https://stackoverflow.com/users/1034677/tim"}, "edited": false, "score": 0, "creation_date": 1564009996, "post_id": 57192270, "comment_id": 100894094, "body": "Ah, my apologies. Missed the point that the filename column does not change."}], "answers": [{"tags": [], "owner": {"reputation": 1707, "user_id": 11832127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zsq7r.png?s=128&g=1", "display_name": "ndclt", "link": "https://stackoverflow.com/users/11832127/ndclt"}, "is_accepted": true, "score": 1, "last_activity_date": 1564010154, "last_edit_date": 1564010154, "creation_date": 1564009812, "answer_id": 57192354, "question_id": 57192270, "link": "https://stackoverflow.com/questions/57192270/how-to-merge-several-csv-files-averaging-fields/57192354#57192354", "title": "How to merge several csv files averaging fields?", "body": "<pre class=\"lang-py prettyprint-override\"><code>all_csv = []\nfor one_file in list_of_file:\n    all_csv.append(pd.read_csv(one_file))\ndf = pd.concat(all_csv).groupby('filename').mean()\n</code></pre>\n\n<p>should do want you want.</p>\n\n<p>As example, with two csv:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; df1 = pd.DataFrame({'name': ['a', 'b'], 'v1': [1, 2,], 'v2': [3, 4]}) # your first csv\n&gt;&gt;&gt; df2 = pd.DataFrame({'name': ['a', 'b'], 'v1': [5, 6,], 'v2': [7, 8]}) # your second csv\n&gt;&gt;&gt; df3 = pd.concat([df1, df2])\n&gt;&gt;&gt; df3\n  name  v1  v2\n0    a   1   3\n1    b   2   4\n0    a   5   7\n1    b   6   8\n&gt;&gt;&gt; df3.groupby('name').mean() \n# create sub dataframe with only the same name values (a and b) and \n# the mean compute the mean on this sub dataframe column by column.\n</code></pre>\n"}], "owner": {"reputation": 510, "user_id": 7762646, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9565729c9618f86e148295f0bb91032c?s=128&d=identicon&r=PG&f=1", "display_name": "G. Macia", "link": "https://stackoverflow.com/users/7762646/g-macia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17, "favorite_count": 0, "accepted_answer_id": 57192354, "answer_count": 1, "score": 0, "last_activity_date": 1564010154, "creation_date": 1564009136, "question_id": 57192270, "link": "https://stackoverflow.com/questions/57192270/how-to-merge-several-csv-files-averaging-fields", "title": "How to merge several csv files averaging fields?", "body": "<p>I have several csv files name file1, file2, file3, etc. They all look like this (exactly identical, only the floats change):</p>\n\n<pre><code>filename,    column1,  column2, ... columnN\nasdfasd.jpg   23.23,    21.24,        1e-06\nersdadfsd.jpg 223.23,   1.23,         1\nassd.jpg      23.23,    1e-08,       232.1\n...\n</code></pre>\n\n<p>I would like to get an indentical looking table in which all fields contain the mean. How can this be done in an efficient way?</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 3, "creation_date": 1564009137, "post_id": 57192264, "comment_id": 100893926, "body": "This is an improper example and shows no effort.  If you cant code it, explain with some sample data as to what is going on and what you want to occur."}, {"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 3, "creation_date": 1564009306, "post_id": 57192264, "comment_id": 100893970, "body": "If you update the question with the expected output and your current code that tries to implement this feature, we can try to answer your question."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1564009312, "post_id": 57192264, "comment_id": 100893971, "body": "What is the value of <code>row</code>? Isn&#39;t it as simple as <code>row[0] + row[1]</code>?"}, {"owner": {"reputation": 33, "user_id": 11108329, "user_type": "registered", "profile_image": "https://graph.facebook.com/10219101208540224/picture?type=large", "display_name": "Nazanin Shambayati", "link": "https://stackoverflow.com/users/11108329/nazanin-shambayati"}, "edited": false, "score": 0, "creation_date": 1564009662, "post_id": 57192264, "comment_id": 100894037, "body": "I just modified the question and the items in the rows I have"}, {"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1564009703, "post_id": 57192264, "comment_id": 100894043, "body": "If it&#39;s always those same rows, you could do <code>[x + y for x,y in zip(a[2], a[3])]</code>."}, {"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 1, "creation_date": 1564009754, "post_id": 57192264, "comment_id": 100894048, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/18713321/element-wise-addition-of-2-lists\">Element-wise addition of 2 lists?</a>"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 2, "creation_date": 1564010503, "post_id": 57192264, "comment_id": 100894176, "body": "Note that <a href=\"https://stackoverflow.com\">SO</a> isn&#39;t a code writing service. Please post what you&#39;ve tried so far, and where did you encounter problems. Check <a href=\"https://stackoverflow.com/help/how-to-ask\">&#91;SO&#93;: How do I ask a good question?</a> or <a href=\"https://stackoverflow.com/help/mcve\">&#91;SO&#93;: How to create a Minimal, Complete, and Verifiable example (mcve)</a> for more asking related details."}], "answers": [{"tags": [], "owner": {"reputation": 103, "user_id": 11569423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zsjiV.jpg?s=128&g=1", "display_name": "Bruno Aquino", "link": "https://stackoverflow.com/users/11569423/bruno-aquino"}, "is_accepted": false, "score": 1, "last_activity_date": 1564017510, "last_edit_date": 1564017510, "creation_date": 1564015048, "answer_id": 57192839, "question_id": 57192264, "link": "https://stackoverflow.com/questions/57192264/how-to-sum-two-rows-in-a-list/57192839#57192839", "title": "How to sum two rows in a list?", "body": "<p>Supposing that your list is like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>this_list = [[0.001, 0.017000000000000001, 4.0, 75.0],\n             [5352984.0, 23194715.0, 8.0, 150.0],\n             [2370914.0, 11533745.0, 21.0, 396.0],\n             [0.39500000000000002, 0.68100000000000005, 68.0, 1296.0],\n             [0.46400000000000002, 0.69099999999999995, 69.0, 1307.0],\n             [0.0, 0.001, 12.0, 226.0],\n             [0.0, 0.001, 10.0, 194.0],\n             [0.055, 0.22600000000000001, 7.0, 136.0],\n             [0.055, 0.109, 10.0, 181.0],\n             [0.001, 0.037999999999999999, 29.0, 556.0],\n             [0.0030000000000000001, 0.14099999999999999, 46.0, 873.0],\n             [0.0, 1.0, 15.0, 287.0],\n             [0.0, 0.0, 6.0, 108.0],\n             [0.0, 0.0, 29.0, 556.0],\n             [0.0, 0.024, 46.0, 873.0],\n             [7086684.0, 68448914.0, 3.0, 53.0]]\n</code></pre>\n\n<p>and your \"3rd row\" is this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[ 4.,  8., 21., 68., 69., 12., 10.,  7., 10., 29., 46., 15.,  6., 29., 46.,  3.]\n</code></pre>\n\n<p>Then you can simply:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nnp_list = np.array(this_list)\n# sum in a new row\nnew_row = np.sum([np_list[:,2], np_list[:,3]], axis=0)\n\n# sum each elements of the 3rd and 4rd rows separetadly\nrow3, row4 = np.sum([np_list[:,2], np_list[:,3]], axis=1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 11844902, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tPpYqKRgS6o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfv-RS2XEjnP45gl-gENeQP4jEOsg/photo.jpg?sz=128", "display_name": "Kaustabh Chakraborty", "link": "https://stackoverflow.com/users/11844902/kaustabh-chakraborty"}, "is_accepted": false, "score": 0, "last_activity_date": 1564496535, "last_edit_date": 1564496535, "creation_date": 1564413684, "answer_id": 57256861, "question_id": 57192264, "link": "https://stackoverflow.com/questions/57192264/how-to-sum-two-rows-in-a-list/57256861#57256861", "title": "How to sum two rows in a list?", "body": "<p>A function can be made for this.</p>\n\n<pre><code>def RowSum (gridlist,row):\n        sumcount=0\n        for sublist in gridlist: # iterates through every sublist\n                   sumcount+=sublist[row-1]\n        return sumcount\n</code></pre>\n\n<p>For your work of summation of row 3 and 4:</p>\n\n<pre><code>rsum= RowSum(gridlist,3)+RowSum(gridlist,4)\nprint(rsum)\n</code></pre>\n\n<p>Note that this function is designed keeping in mind that the row number starts from 1 and not from 0.</p>\n\n<p>Thank You :)</p>\n"}], "owner": {"reputation": 33, "user_id": 11108329, "user_type": "registered", "profile_image": "https://graph.facebook.com/10219101208540224/picture?type=large", "display_name": "Nazanin Shambayati", "link": "https://stackoverflow.com/users/11108329/nazanin-shambayati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1564496535, "creation_date": 1564009100, "last_edit_date": 1564017312, "question_id": 57192264, "link": "https://stackoverflow.com/questions/57192264/how-to-sum-two-rows-in-a-list", "title": "How to sum two rows in a list?", "body": "<p>I want to sum the 3rd and 4th rows in my list?\nI am looking for the easiest way to do that?\nI know it seems so easy, but I cannot find the similar examples, as I am thinking I don't use the right keywords!</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[0.001, 0.017000000000000001, 4.0, 75.0]\n[5352984.0, 23194715.0, 8.0, 150.0]\n[2370914.0, 11533745.0, 21.0, 396.0]\n[0.39500000000000002, 0.68100000000000005, 68.0, 1296.0]\n[0.46400000000000002, 0.69099999999999995, 69.0, 1307.0]\n[0.0, 0.001, 12.0, 226.0]\n[0.0, 0.001, 10.0, 194.0]\n[0.055, 0.22600000000000001, 7.0, 136.0]\n[0.055, 0.109, 10.0, 181.0]\n[0.001, 0.037999999999999999, 29.0, 556.0]\n[0.0030000000000000001, 0.14099999999999999, 46.0, 873.0]\n[0.0, 1.0, 15.0, 287.0]\n[0.0, 0.0, 6.0, 108.0]\n[0.0, 0.0, 29.0, 556.0]\n[0.0, 0.024, 46.0, 873.0]\n[7086684.0, 68448914.0, 3.0, 53.0]\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1564009166, "post_id": 57192253, "comment_id": 100893937, "body": "Are you having trouble with the typical way to create a DataFrame? For instance, <code>output = pd.DataFrame([test.a, test.b], columns=[&#39;a&#39;, &#39;b&#39;])</code>, where <code>test = Test()</code>"}, {"owner": {"reputation": 780, "user_id": 1034677, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/537e6333a0f3383d3e99a4d75c827e7e?s=128&d=identicon&r=PG", "display_name": "tim", "link": "https://stackoverflow.com/users/1034677/tim"}, "edited": false, "score": 0, "creation_date": 1564009211, "post_id": 57192253, "comment_id": 100893948, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20763012/creating-a-pandas-dataframe-from-a-numpy-array-how-do-i-specify-the-index-colum\">Creating a Pandas DataFrame from a Numpy array: How do I specify the index column and column headers?</a>"}, {"owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "reply_to_user": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1564010128, "post_id": 57192253, "comment_id": 100894120, "body": "@PyNoob: I put a concrete example with the error"}, {"owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "reply_to_user": {"reputation": 780, "user_id": 1034677, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/537e6333a0f3383d3e99a4d75c827e7e?s=128&d=identicon&r=PG", "display_name": "tim", "link": "https://stackoverflow.com/users/1034677/tim"}, "edited": false, "score": 0, "creation_date": 1564010168, "post_id": 57192253, "comment_id": 100894127, "body": "@tim: the questions may be related, but they&#39;re not exactly the same since the other question involves part of the list to become the header, which is not the case here"}, {"owner": {"reputation": 15659, "user_id": 9448090, "user_type": "registered", "profile_image": "https://graph.facebook.com/600951510246447/picture?type=large", "display_name": "Jack Fleeting", "link": "https://stackoverflow.com/users/9448090/jack-fleeting"}, "edited": false, "score": 0, "creation_date": 1564013309, "post_id": 57192253, "comment_id": 100894674, "body": "I&#39;m not sure what you intended to do, but <code>Test(10, 20)</code> evaluates to <code>&lt;__main__.Test at 0x1db821405c0&gt;</code>  - one element; so <code>pd.DataFrame(l)</code> tells panda to expect one column and two rows, while <code>columns=[&#39;a&#39;, &#39;b&#39;]</code> implies two columns. Hence the error."}, {"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "edited": false, "score": 0, "creation_date": 1564022187, "post_id": 57192253, "comment_id": 100896108, "body": "You should usually try to show an expected output as well."}, {"owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "reply_to_user": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "edited": false, "score": 0, "creation_date": 1564058503, "post_id": 57192253, "comment_id": 100911943, "body": "@Akaisteph7: yes, I am not used to formulate Pandas questions, but I&#39;m slowly realizing they require quite a lot more detail than in other fields :)"}], "answers": [{"comments": [{"owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 0, "creation_date": 1564058294, "post_id": 57193325, "comment_id": 100911820, "body": "this is working, thanks! can you explain me the [vars(t)..] section and why it works? kind of new to python, but very new to pandas (like 4 days :))"}, {"owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 0, "creation_date": 1564058915, "post_id": 57193325, "comment_id": 100912185, "body": "to clarify, I understand vars(t), but I don&#39;t understand the vars(t) for ...; I would understand for t in tests: somelist.append(vars(t))"}, {"owner": {"reputation": 72931, "user_id": 2538939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/876f7ddaf27a16c17a62b8a9705b45f1?s=128&d=identicon&r=PG&f=1", "display_name": "Code Different", "link": "https://stackoverflow.com/users/2538939/code-different"}, "reply_to_user": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 1, "creation_date": 1564059081, "post_id": 57193325, "comment_id": 100912298, "body": "It&#39;s called list comprehension. Basically a one-liner loop. <code>[vars(t) for t in tests]</code> apply the function <code>vars</code> on every element in <code>tests</code>. Since <code>vars(t)</code> returns a dictionary, <code>[vars(t) for ...]</code> return a list of dictionaries"}, {"owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 0, "creation_date": 1564064186, "post_id": 57193325, "comment_id": 100915420, "body": "I didn\u2019t know about list comprehension; I\u2019m reading about it now, thanks!"}], "tags": [], "owner": {"reputation": 72931, "user_id": 2538939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/876f7ddaf27a16c17a62b8a9705b45f1?s=128&d=identicon&r=PG&f=1", "display_name": "Code Different", "link": "https://stackoverflow.com/users/2538939/code-different"}, "is_accepted": true, "score": 1, "last_activity_date": 1564062211, "last_edit_date": 1564062211, "creation_date": 1564020390, "answer_id": 57193325, "question_id": 57192253, "link": "https://stackoverflow.com/questions/57192253/how-can-i-convert-an-array-of-class-objects-to-a-dataframe-with-columns-in-panda/57193325#57193325", "title": "How can I convert an array of class objects to a dataframe with columns in Pandas?", "body": "<p>You can call <code>vars</code> to convert all the attributes of the class into a dict:</p>\n\n<pre><code>class Test:\n    def __init__(self, a: int, b: int):\n        self.a = a\n        self.b = b\n\ntests = [Test(10, 20), Test(50, 60)]\ndf = pd.DataFrame([vars(t) for t in tests])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "is_accepted": false, "score": 1, "last_activity_date": 1564022167, "creation_date": 1564022167, "answer_id": 57193545, "question_id": 57192253, "link": "https://stackoverflow.com/questions/57192253/how-can-i-convert-an-array-of-class-objects-to-a-dataframe-with-columns-in-panda/57193545#57193545", "title": "How can I convert an array of class objects to a dataframe with columns in Pandas?", "body": "<p>Another way to achieve this is to do:</p>\n\n<pre><code>df = pd.DataFrame([test.__dict__ for test in tests])\n</code></pre>\n"}], "owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 475, "favorite_count": 0, "accepted_answer_id": 57193325, "answer_count": 2, "score": 0, "last_activity_date": 1564063049, "creation_date": 1564008981, "last_edit_date": 1564063049, "question_id": 57192253, "link": "https://stackoverflow.com/questions/57192253/how-can-i-convert-an-array-of-class-objects-to-a-dataframe-with-columns-in-panda", "title": "How can I convert an array of class objects to a dataframe with columns in Pandas?", "body": "<p>With the following class:</p>\n\n<pre><code>class Test:\n    a : str\n    b : str\n</code></pre>\n\n<p>and the following data frame:</p>\n\n<pre><code>output = pd.DataFrame(columns=['a', 'b']\n</code></pre>\n\n<p>how can I convert an array, or list, of class Test into a pandas dataframe with matching columns?</p>\n\n<hr>\n\n<p>Edit:</p>\n\n<p>Let me add a more concrete example:</p>\n\n<pre><code>class Test:\n    a: int\n    b: int\n\n    def __init__(self, a: int, b: int):\n        self.a = a\n        self.b = b\n\nl = [Test(10, 20), Test(50, 60)]\n\noutput = pd.DataFrame(l,\n                  columns=['a', 'b'],\n                  index=range(len(l)))\n</code></pre>\n\n<p>and the error I get is:</p>\n\n<blockquote>\n  <p>ValueError: Shape of passed values is (2, 1), indices imply (2, 2)</p>\n</blockquote>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 561, "user_id": 5012385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gcadm.jpg?s=128&g=1", "display_name": "Djaballah DJEDID", "link": "https://stackoverflow.com/users/5012385/djaballah-djedid"}, "is_accepted": false, "score": 2, "last_activity_date": 1564013429, "creation_date": 1564013429, "answer_id": 57192708, "question_id": 57192244, "link": "https://stackoverflow.com/questions/57192244/how-to-efficiently-get-cell-values-from-multiple-dataframes-to-insert-into-a-mas/57192708#57192708", "title": "How to efficiently get cell values from multiple DataFrames to insert into a master DataFrame", "body": "<p>Here is a solution without using a for loop, I wish it'll work for you</p>\n\n<p>firs we'll make two filter for which dataframe to use</p>\n\n<pre><code>df1_filter = (master_df[\"col1\"] == 'M') &amp; (master_df[\"col3\"] == 'X') \ndf2_filter = (master_df[\"col1\"] == 'F') &amp; (master_df[\"col3\"] == 'Z') \n</code></pre>\n\n<p>second, for each dataframe, we'll use the appropriate filter to get the values of interest\nfor df1</p>\n\n<pre><code>row1_index = master_df[df1_filter][\"col2\"]\ncol1_index = master_df[df1_filter][\"col4\"]\ndf1_values_of_interest = df1.iloc[row1_index][col1_index]\n</code></pre>\n\n<p>for df2</p>\n\n<pre><code>row2_index = master_df[df2_filter][\"col2\"]\ncol2_index = master_df[df2_filter][\"col4\"]\ndf2_values_of_interest = df2.iloc[row2_index][col2_index]\n</code></pre>\n\n<p>with this approache,the values of interest are going to be in the diagonal,so we'll try to get them (each one with it's appropriate index) and concatenate them</p>\n\n<pre><code>aa = pd.Series(np.diag(df1_values_of_interest), index=df1_values_of_interest.index)\nbb = pd.Series(np.diag(df2_values_of_interest), index=df2_values_of_interest.index)\nres = pd.concat([aa, bb])\n</code></pre>\n\n<p>finally, we'll add the result to the master df</p>\n\n<pre><code>master_df['col5'] = res\n</code></pre>\n\n<p>I hope the solution is clear,and it'll work for you.if you need more clarification don't hesitate to ask.\ngood luck !</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 11832980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2dcc56b24d81c0de8eeab95b85da960?s=128&d=identicon&r=PG&f=1", "display_name": "hbdch", "link": "https://stackoverflow.com/users/11832980/hbdch"}, "edited": false, "score": 1, "creation_date": 1564018703, "post_id": 57193025, "comment_id": 100895543, "body": "Thanks a lot, clean solution"}, {"owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "reply_to_user": {"reputation": 83, "user_id": 11832980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2dcc56b24d81c0de8eeab95b85da960?s=128&d=identicon&r=PG&f=1", "display_name": "hbdch", "link": "https://stackoverflow.com/users/11832980/hbdch"}, "edited": false, "score": 0, "creation_date": 1564026137, "post_id": 57193025, "comment_id": 100896723, "body": "@hbdch: glad I could help :)"}], "tags": [], "owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "is_accepted": true, "score": 3, "last_activity_date": 1564017139, "creation_date": 1564017139, "answer_id": 57193025, "question_id": 57192244, "link": "https://stackoverflow.com/questions/57192244/how-to-efficiently-get-cell-values-from-multiple-dataframes-to-insert-into-a-mas/57193025#57193025", "title": "How to efficiently get cell values from multiple DataFrames to insert into a master DataFrame", "body": "<p>Your <code>master_df</code> has only 2 combinations of value for <code>master_df.col1</code> and <code>master_df.col3</code>. Therefore, a simple <code>.lookup</code> and <code>np.where</code> will yield your desired output</p>\n\n<pre><code>df1_val = df1.lookup(master_df.col2, master_df.col4)\ndf2_val = df2.lookup(master_df.col2, master_df.col4)\nmaster_df['col5'] = np.where(master_df.col1.eq('M') &amp; master_df.col3.eq('X'), df1_val, df2_val)\n\nOut[595]:\n  col1  col2 col3  col4    col5\n0  M    0     X    2021  0.6320\n1  F    1     Z    2022  0.2320\n2  F    2     Z    2023  0.3700\n3  M    3     X    2024  0.5005\n</code></pre>\n\n<hr>\n\n<p><strong>Note</strong>: if <code>master_df.col1</code> and <code>master_df.col3</code> have more than 2 combinations of values, you just need <code>np.select</code> instead of <code>np.where</code></p>\n"}], "owner": {"reputation": 83, "user_id": 11832980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2dcc56b24d81c0de8eeab95b85da960?s=128&d=identicon&r=PG&f=1", "display_name": "hbdch", "link": "https://stackoverflow.com/users/11832980/hbdch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 57193025, "answer_count": 2, "score": 6, "last_activity_date": 1564017759, "creation_date": 1564008907, "last_edit_date": 1564010754, "question_id": 57192244, "link": "https://stackoverflow.com/questions/57192244/how-to-efficiently-get-cell-values-from-multiple-dataframes-to-insert-into-a-mas", "title": "How to efficiently get cell values from multiple DataFrames to insert into a master DataFrame", "body": "<p>I have 3 different DataFrames (1 master DataFrame and 2 additional DataFrames). I am trying to add a column to my master DataFrame, with the elements of the column being different cell values in the other two DataFrames. I am using two columns of the master DataFrame to figure out which of the 2 DataFrames I need to get data from, and two more columns to act as indexes to a particular cell in the selected DataFrame.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nmaster_df = pd.DataFrame({\n    'col1': ['M', 'F', 'F', 'M'],\n    'col2': [0, 1, 2, 3],\n    'col3': ['X', 'Z', 'Z', 'X'],\n    'col4': [2021, 2022, 2023, 2024]\n})\n\ndf1 = pd.DataFrame({\n    2021: [.632, .214, .987, .555],\n    2022: [.602, .232, .287, .552],\n    2023: [.932, .209, .347, .725],\n    2024: [.123, .234, .9873, .5005]\n})\n\ndf2 = pd.DataFrame({\n    2021: [.6123, .2214, .4987, .555],\n    2022: [.6702, .232, .2897, .552],\n    2023: [.9372, .2, .37, .725],\n    2024: [.23, .24, .873, .005]\n})\n\n</code></pre>\n\n<p>For each row of the <code>master_df</code>, if the <code>col1</code> value is <code>'M'</code> and the <code>col3</code> value is <code>'X'</code>, I want to choose <code>df1</code>. If the <code>col1</code> value is <code>'F'</code> and the <code>col3</code> value is <code>'Z'</code>, I want to choose <code>df2</code>. Once I have selected the appropriate <code>DataFrame</code>, I want to use <code>col2</code> of the <code>master_df</code> as a row index and <code>col4</code> of the <code>master_df</code> as a column index. Finally, I will get the selected cell value and put it into the new column to be added to the <code>master_df</code>.</p>\n\n<p>In this example, <code>master_df</code> should look like this at the end:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>master_df = pd.DataFrame({\n    'col1': ['M', 'F', 'F', 'M'],\n    'col2': [0, 1, 2, 3],\n    'col3': ['X', 'Z', 'Z', 'X'],\n    'col4': [2021, 2022, 2023, 2024],\n    'col5': [.632, .232, .37, .5005]\n})\n\n</code></pre>\n\n<p>I have tried using a for loop to iterate through the <code>master_df</code>, but it is extremely slow since the <code>DataFrame</code>s that I'm working with have millions of rows each. Any efficient pandas solutions for this?</p>\n"}, {"tags": ["python", "bioinformatics"], "comments": [{"owner": {"reputation": 4163, "user_id": 6401403, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5e6e113b3335b200f4d4946e1bcaff84?s=128&d=identicon&r=PG&f=1", "display_name": "Michael O.", "link": "https://stackoverflow.com/users/6401403/michael-o"}, "edited": false, "score": 0, "creation_date": 1564009016, "post_id": 57192239, "comment_id": 100893906, "body": "You should use <code>and</code>, not <code>or</code>. In your current state all variants are allowed."}], "answers": [{"comments": [{"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 0, "creation_date": 1564016615, "post_id": 57192280, "comment_id": 100895188, "body": "Updated answer with a better solution."}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 1, "creation_date": 1564569868, "post_id": 57192280, "comment_id": 101072434, "body": "note that testing for membership in a tuple is still <code>O(n)</code> in the number of elements in the tuple.  if you&#39;ve only got a few elements, like here, using a tuple will be similar, but generally you want to use a <code>set</code>, as @martineau suggests, as it&#39;s <code>O(1)</code>"}, {"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "reply_to_user": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1564572138, "post_id": 57192280, "comment_id": 101073729, "body": "Agreed - and something I should consider more so thank you for the comment. For codons, the set/tuple/list should never be more than 32 elements, as there are a maximum of 64 combinations of 4 letters in a sequence of length 3 in the genetic code. As the question states, there are only 3 stop codons."}, {"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "reply_to_user": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1564574808, "post_id": 57192280, "comment_id": 101075205, "body": "@SamMason thanks to your comment it occurred to me that the stop codons could be added to the main dictionary which would yield a value recognized by the loop. As the dictionary is also a hash, we can reduce two lookups to one."}], "tags": [], "owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "is_accepted": false, "score": 1, "last_activity_date": 1564574684, "last_edit_date": 1564574684, "creation_date": 1564009225, "answer_id": 57192280, "question_id": 57192239, "link": "https://stackoverflow.com/questions/57192239/if-statement-with-multiple-or-conditions/57192280#57192280", "title": "If statement with multiple &quot;or&quot; conditions?", "body": "<p>This corrects the one line.</p>\n\n<pre><code>if codon != 'UAA' and codon != 'UGA' and codon != 'UAG':\n</code></pre>\n\n<p>If you say not equal to x or not equal to y, it will always be true. Simplifying a bit</p>\n\n<pre><code>if x != 1 or x !=2:\n</code></pre>\n\n<p>No matter what x is, the statement will always be true.  Every number is not equal to <strong>both</strong> 1 and 2, including 1 and 2.</p>\n\n<p>But the clearest way to code this line is.</p>\n\n<pre><code>if codon not in ('UAA', 'UGA', 'UAG'):\n</code></pre>\n\n<p>One final thought is that you could add the stop codes to your dictionary and have them yield some value on which you trigger the break. This would address @Sam Mason's point about efficiency of hash lookups as well as saving some other steps in the main loop.</p>\n\n<pre><code>        dictionary = {'AUG': 'M',\n                      'GAA': 'E',\n                      'ACC': 'T',\n                      'UUA': '*',\n                      'UGA': '*',\n                      'UAG': '*',\n        }\n        protein = ''\n        for start in range(0, last_codon_start, 3):\n            codon = new_seq[start:start+3]\n            print(codon)\n            amino_acid = dictionary.get(codon,'X')\n            if amino_acid == '*':\n                break\n            protein += amino_acid\n</code></pre>\n\n<p>Final thought. The for loop could be simplified slightly by using the textwrap module (standard Python).</p>\n\n<pre><code>from textwrap import wrap\n...\n...\n         for codon in wrap(new_seq, 3):\n             print(codon)\n             etc.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 1, "last_activity_date": 1564011719, "creation_date": 1564011719, "answer_id": 57192544, "question_id": 57192239, "link": "https://stackoverflow.com/questions/57192239/if-statement-with-multiple-or-conditions/57192544#57192544", "title": "If statement with multiple &quot;or&quot; conditions?", "body": "<p>I think it would more readable to reverse the logic of the inner <code>if</code> that checks for stop codons with:</p>\n\n<pre><code>if codon == 'UAA' or codon == 'UGA' or codon == 'UAG':\n</code></pre>\n\n<p><strong>However</strong> it would be more efficient to do the equivalent of that by storing the all possibilities in a <code>set</code>, which will make checking for membership both simpler <em>and</em> faster. </p>\n\n<p>Here's what I mean (note that I also took the creation of the constants out of the loop):</p>\n\n<pre><code>START_CODONS = {'AUG': 'M',\n                'GAA': 'E',\n                'ACC': 'T'}\nSTOP_CODONS = {'UAA', 'UGA', 'UAG'}\n\na_seq = 'AAAAUGGAAUGAACC'\nkmer_size = 3\n\nfor start in range (0, len(a_seq)-kmer_size+1, 1):\n    kmer = a_seq[start: start+kmer_size]\n    if kmer == 'AUG':\n        start_codon = a_seq.index(kmer)\n        new_seq = a_seq[start_codon:]\n        last_codon_start = len(new_seq) - 2\n        protein = ''\n        for start in range(0, last_codon_start, 3):\n            codon = new_seq[start: start+3]\n            print(codon)\n#            if codon == 'UAA' or codon == 'UGA' or codon == 'UAG':\n            if codon in STOP_CODONS:\n                break\n            else:\n                amino_acid = START_CODONS.get(codon, 'X')\n                protein += amino_acid\n        print('protein:', protein)\n        break\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>AUG\nGAA\nUGA\nprotein: ME\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9632335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BV31S.png?s=128&g=1", "display_name": "David Dainko", "link": "https://stackoverflow.com/users/9632335/david-dainko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564574684, "creation_date": 1564008845, "last_edit_date": 1564009672, "question_id": 57192239, "link": "https://stackoverflow.com/questions/57192239/if-statement-with-multiple-or-conditions", "title": "If statement with multiple &quot;or&quot; conditions?", "body": "<p>I am trying to write a program that loops through a string of RNA bases, finds the start codon ('AUG'), groups the following codons into threes (i.e. 'GAA', 'ACC'), looks up the corresponding amino acid from the dictionary, creates a string containing the resulting amino acids, and keeps going until it hits a stop codon ('UAA', 'UGA', 'UAG'). RNA gets read in groups of threes, starting from a start codon and ending at a stop codon.</p>\n\n<p>The problem is when I want the program to check to see if it has hit one of the three stop codons, it does not work if I have all three listed in the same if statement. When checking the dictionary, it will treat the stop codon as an unknown (<code>.get(codon, 'X')</code>) and list it as an 'X' in the protein:</p>\n\n<pre><code>a_seq = 'AAAAUGGAAUGAACC'\nkmer_size = 3\nfor start in range (0,len(a_seq)- kmer_size+1,1):\n    kmer = a_seq[start:start+kmer_size]\n    if kmer == 'AUG':\n        start_codon = a_seq.index(kmer)\n        new_seq = a_seq[start_codon:]\n        last_codon_start = len(new_seq) - 2\n        dictionary = {'AUG':'M',\n                     'GAA':'E',\n                     'ACC':'T'}\n        protein = ''\n        for start in range(0, last_codon_start, 3):\n            codon = new_seq[start:start+3]\n            print(codon)\n            if codon != 'UAA' or codon != 'UGA' or codon != 'UAG':\n                amino_acid = dictionary.get(codon,'X')\n                protein += amino_acid\n            else:\n                break\n        print(protein)\n        break\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>AUG\nGAA\nUAA\nACC\nMEXT\n</code></pre>\n\n<p>If I only list a single stop codon, then it works:</p>\n\n<pre><code>if codon != 'UAA':\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>AUG\nGAA\nUAA\nME\n</code></pre>\n\n<p>Both proteins should be 'ME'. I expect it to stop as soon as it hits any of the three stop codons. What is wrong with my if statement?</p>\n"}, {"tags": ["python", "python-3.x", "string", "nested-lists"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1564008731, "post_id": 57192177, "comment_id": 100893846, "body": "The example of the file&#39;s content doesn&#39;t have any commas but you say that it does. Please edit to show the actual contents."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1564008999, "post_id": 57192177, "comment_id": 100893902, "body": "Have you tried using the cab module?"}], "answers": [{"tags": [], "owner": {"reputation": 763, "user_id": 5050285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N4QfZ.png?s=128&g=1", "display_name": "rohanphadte", "link": "https://stackoverflow.com/users/5050285/rohanphadte"}, "is_accepted": false, "score": 0, "last_activity_date": 1564009098, "creation_date": 1564009098, "answer_id": 57192263, "question_id": 57192177, "link": "https://stackoverflow.com/questions/57192177/trying-to-get-rid-of-the-commas-attached-to-the-elements-in-my-nested-list/57192263#57192263", "title": "Trying to get rid of the commas attached to the elements in my nested list", "body": "<p>Attempt #4 seems pretty close - try splitting by both a space and a comma:</p>\n\n<pre><code>file=open(\"words.txt\",\"r\")\nlineList=[line.split(\" ,\") for line in file]\nprint(lineList)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11833087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XIE8Qz8K0-g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfr5I16sp8dSvRr7HCHkTfQ_d0knw/photo.jpg?sz=128", "display_name": "Grace", "link": "https://stackoverflow.com/users/11833087/grace"}, "edited": false, "score": 0, "creation_date": 1564015977, "post_id": 57192274, "comment_id": 100895082, "body": "Thank you so much! That does work, only issue being at the end of every nested list the last element has a \\n attached to it like this:"}, {"owner": {"reputation": 523, "user_id": 11381650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7000d86a30fc29b49130068e589964ff?s=128&d=identicon&r=PG&f=1", "display_name": "eggrobot78", "link": "https://stackoverflow.com/users/11381650/eggrobot78"}, "reply_to_user": {"reputation": 11, "user_id": 11833087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XIE8Qz8K0-g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfr5I16sp8dSvRr7HCHkTfQ_d0knw/photo.jpg?sz=128", "display_name": "Grace", "link": "https://stackoverflow.com/users/11833087/grace"}, "edited": false, "score": 0, "creation_date": 1564017745, "post_id": 57192274, "comment_id": 100895395, "body": "<code>my_newList[-1] = my_newList[-1].split(&quot;\\n&quot;)[0]</code> , index[-1] get last element of the list and updates removing &#39;\\n&#39; by using split function. Please check if it works!"}], "tags": [], "owner": {"reputation": 523, "user_id": 11381650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7000d86a30fc29b49130068e589964ff?s=128&d=identicon&r=PG&f=1", "display_name": "eggrobot78", "link": "https://stackoverflow.com/users/11381650/eggrobot78"}, "is_accepted": false, "score": 0, "last_activity_date": 1564009184, "creation_date": 1564009184, "answer_id": 57192274, "question_id": 57192177, "link": "https://stackoverflow.com/questions/57192177/trying-to-get-rid-of-the-commas-attached-to-the-elements-in-my-nested-list/57192274#57192274", "title": "Trying to get rid of the commas attached to the elements in my nested list", "body": "<p>You can go element by element using split funcion.</p>\n\n<p>For example: </p>\n\n<pre><code>my_list = [\"cat,\",\"dog\",\"horse,\"]\nmy_newList = []\nfor i in my_list:\n        my_newList.append(i.split(\",\")[0])\n\nprint(my_newList)\n</code></pre>\n\n<blockquote>\n  <p>['cat','dog','horse']</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 11833087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XIE8Qz8K0-g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfr5I16sp8dSvRr7HCHkTfQ_d0knw/photo.jpg?sz=128", "display_name": "Grace", "link": "https://stackoverflow.com/users/11833087/grace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564009184, "creation_date": 1564008336, "question_id": 57192177, "link": "https://stackoverflow.com/questions/57192177/trying-to-get-rid-of-the-commas-attached-to-the-elements-in-my-nested-list", "title": "Trying to get rid of the commas attached to the elements in my nested list", "body": "<p>The contents of my file look like this when read from the file (which DOES include commas):</p>\n\n<p>dog cat bird fog 100</p>\n\n<p>animal wolf lion pterodactyl 200</p>\n\n<p>more arbitrary animals 300</p>\n\n<p>In my code I include every attempt I've made at this. Some produce a result where each individual character becomes a new string, so like [['t'],['h'],['i'],['s']], most of them however produce:</p>\n\n<pre><code>[['dog,','cat,','bird,','fog,','100']] \n</code></pre>\n\n<p>....and so on</p>\n\n<p>This is my issue. The comma in the string.</p>\n\n<p><strong>MY ATTEMPTS:</strong></p>\n\n<pre><code>data = open(\"words.txt\", \"r\")   \nfile_contents = data.read()\ndata = file_contents.replace(',','') #gets rid of commas\nprint(data)\n\nprint('\\n\\n')\n\n#1:\nfile=open(\"words.txt\",\"r\")\nlineList=[]\nfor line in file:\n    words=line.split(\" \")\n    lineList.append(words)\nprint(lineList)\n\n#2:\nfile=open(\"words.txt\",\"r\").read().replace(',',' ')\nlineList=[line.split() for line in file]\nprint(lineList)\n\n#3:\nwith open(\"words.txt\") as file_contents:\n    lineList = file_contents.read().replace(',','   ')\nprint(lineList)\n\n#4:\nfile=open(\"words.txt\",\"r\")\nlineList=[line.split() for line in file]\nprint(lineList)\n\n#5:\nfile=open(\"words.txt\",\"r\")\nlineList=[line.split() for line in file]\nprint(lineList)\n\n#6:\nfor i, elem in enumerate(lineList):\n    if elem == ',':\n        elem[i] = ' '\nprint(lineList)\n</code></pre>\n\n<p>What it looks like now:</p>\n\n<pre><code>[['dog,','cat,','bird,','fog,','100'],['animal,','wolf,','lion,','pterodactyl,','200'],['more,','arbitrary,','animals,'300]]\n</code></pre>\n\n<p>I want the end result to look like this:</p>\n\n<pre><code>[['dog','cat','bird','fog','100'],['animal','wolf','lion','pterodactyl','200'],['more','arbitrary','animals','300']]\n</code></pre>\n\n<p>Any ideas? Thanks!!</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 433, "user_id": 5405358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b7f3bba06b1943a65885501eab7a10?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity Mass", "link": "https://stackoverflow.com/users/5405358/gravity-mass"}, "is_accepted": true, "score": 0, "last_activity_date": 1564073332, "last_edit_date": 1564073332, "creation_date": 1564012226, "answer_id": 57192593, "question_id": 57192170, "link": "https://stackoverflow.com/questions/57192170/change-timezone-based-on-data-from-another-column/57192593#57192593", "title": "Change timezone based on data from another column", "body": "<p>You are assigning index to <code>data</code> which makes it <code>Int64</code>. You can accomplish the task like the following:</p>\n\n<pre><code>from pandas import Timestamp\nimport pandas as pd\n\ndata = pd.read_csv(\"/Users/user/Desktop/Book6.csv\")\ndata = data.drop_duplicates(\"SiteLog\")\n\nfor office, datetime in zip(data[\"Office\"], data[\"SiteLog\"]):\n    if office == \"DQFEMOZM - 2141\":\n        raw_time = Timestamp(datetime)\n        print(raw_time)\n        loc_raw_time = raw_time.tz_localize(\"America/Los_Angeles\")\n        print(loc_raw_time)\n        new_raw_time = loc_raw_time.tz_convert(\"America/New_York\")\n        print(new_raw_time)\n</code></pre>\n\n<p>I used first two rows for example:</p>\n\n<pre><code>                     Office  Design  ...          SiteLog Duration\n0          DQFEMOZM - 2141  ZMI_PE  ...   6/28/2019 7:59        6\n1          DQFEMOZM - 2141  ZMI_PE  ...   6/28/2019 7:47        5\n</code></pre>\n\n<p>and the code output is (for your reference I am just printing all the time zones that you transfer),</p>\n\n<pre><code>2019-06-28 07:59:00\n2019-06-28 07:59:00-07:00\n2019-06-28 10:59:00-04:00\n2019-06-28 07:47:00\n2019-06-28 07:47:00-07:00\n2019-06-28 10:47:00-04:00\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 433, "user_id": 5405358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b7f3bba06b1943a65885501eab7a10?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity Mass", "link": "https://stackoverflow.com/users/5405358/gravity-mass"}, "edited": false, "score": 0, "creation_date": 1564016278, "post_id": 57192623, "comment_id": 100895142, "body": "You are checking the conditioning cause you need to change to only specific office."}, {"owner": {"reputation": 433, "user_id": 5405358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b7f3bba06b1943a65885501eab7a10?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity Mass", "link": "https://stackoverflow.com/users/5405358/gravity-mass"}, "edited": false, "score": 0, "creation_date": 1564019006, "post_id": 57192623, "comment_id": 100895598, "body": "You need to specify why you did -1 to my answer. It is not a good practice just to demote an answer. I noticed that you did it by your score reduction."}, {"owner": {"reputation": 433, "user_id": 5405358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b7f3bba06b1943a65885501eab7a10?s=128&d=identicon&r=PG&f=1", "display_name": "Gravity Mass", "link": "https://stackoverflow.com/users/5405358/gravity-mass"}, "edited": false, "score": 0, "creation_date": 1564020076, "post_id": 57192623, "comment_id": 100895764, "body": "Your answer is not what the user asked. I produced the right answer."}], "tags": [], "owner": {"reputation": 548, "user_id": 4047444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-xRHbFjNlojg/AAAAAAAAAAI/AAAAAAAAGU0/vc870Jh0e0I/photo.jpg?sz=128", "display_name": "dreamzboy", "link": "https://stackoverflow.com/users/4047444/dreamzboy"}, "is_accepted": false, "score": 0, "last_activity_date": 1564030267, "last_edit_date": 1564030267, "creation_date": 1564012554, "answer_id": 57192623, "question_id": 57192170, "link": "https://stackoverflow.com/questions/57192170/change-timezone-based-on-data-from-another-column/57192623#57192623", "title": "Change timezone based on data from another column", "body": "<p>You can't convert time like that.  You'll need to use the pytz and the datetime module.</p>\n\n<pre><code>import pytz, datetime\n</code></pre>\n\n<p>I started out with smaller data frame to test.</p>\n\n<pre><code>&gt;&gt;&gt; data = pd.read_csv ('test.csv')\n&gt;&gt;&gt; df = pd.DataFrame (data)\n&gt;&gt;&gt; df\n              Office  Design         SiteLog  Duration\n0    DQFEMOZM - 2141  ZMI_PE  6/28/2019 7:59         6\n1      UTUXMW - 1046  ZMI_PE  6/28/2019 7:47         5\n2  YMTSZUXXQN - 1031  ZMI_PE  6/27/2019 4:58         2\n3    DQFEMOZM - 2144  ZMI_PE  6/27/2019 4:52         2\n</code></pre>\n\n<p>Next, create a date/time conversion function.</p>\n\n<pre><code>&gt;&gt;&gt; def date_conversion (df):\n...     nytimes = []\n...     for i, record in enumerate (df.Office):\n...         if 'DQFEMOZM - 2141' in record:\n...             time_obj = datetime.datetime.strptime(df.SiteLog [i], '%m/%d/%Y %H:%M')  # Convert string into date/time object for localization and conversion\n...             pacific_time = pytz.timezone('America/Los_Angeles').localize(time_obj)\n...             new_york_time = pacific_time.astimezone(pytz.timezone('America/New_York'))\n...             nytimes.append(new_york_time.strftime('%m/%d/%Y %H:%M'))  # Converting time object back to string\n...         else:\n...             nytimes.append ('-')\n...     return nytimes\n</code></pre>\n\n<p>Finally, insert the converted time to your dataframe.</p>\n\n<pre><code>&gt;&gt;&gt; df.insert (3, 'SiteLog_NY', date_conversion (df), True)\n&gt;&gt;&gt; df\n              Office  Design         SiteLog        SiteLog_NY  Duration\n0    DQFEMOZM - 2141  ZMI_PE  6/28/2019 7:59  06/28/2019 10:59         6\n1      UTUXMW - 1046  ZMI_PE  6/28/2019 7:47                 -         5\n2  YMTSZUXXQN - 1031  ZMI_PE  6/27/2019 4:58                 -         2\n3    DQFEMOZM - 2144  ZMI_PE  6/27/2019 4:52                 -         2\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 11833086, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156587272446733/picture?type=large", "display_name": "cgarrido", "link": "https://stackoverflow.com/users/11833086/cgarrido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 57192593, "answer_count": 2, "score": 1, "last_activity_date": 1564073332, "creation_date": 1564008288, "last_edit_date": 1564070149, "question_id": 57192170, "link": "https://stackoverflow.com/questions/57192170/change-timezone-based-on-data-from-another-column", "title": "Change timezone based on data from another column", "body": "<p>Here's my example dataframe:</p>\n\n<pre><code>                     Office  Design  ...          SiteLog Duration\n0          DQFEMOZM - 2141  ZMI_PE  ...   6/28/2019 7:59        6\n1          DQFEMOZM - 2141  ZMI_PE  ...   6/28/2019 7:47        5\n2          DQFEMOZM - 2141  ZMI_PE  ...   6/27/2019 4:58        2\n3          DQFEMOZM - 2141  ZMI_PE  ...   6/27/2019 4:52        2\n4        YMTSZUXXQN - 1031  ZMI_PE  ...    6/3/2019 4:10        4\n6        YMTSZUXXQN - 1031  ZMI_PE  ...   6/2/2019 22:36        6\n9            UTUXMW - 1046  ZMI_PE  ...  6/26/2019 20:01      336\n10           UTUXMW - 1046  ZMI_PE  ...  6/26/2019 14:16      828\n11           UTUXMW - 1046  ZMI_PE  ...  6/14/2019 16:33        2\n12           UTUXMW - 1046  ZMI_PE  ...  6/14/2019 15:07        2\n14  GMUH-FZAB XMHMX - 2114  ZMI_PE  ...   6/25/2019 5:35        3\n15      TSGADANXDMY - 1215  ZMI_PE  ...    6/9/2019 3:10        3\n16      TSGADANXDMY - 1215  ZMI_PE  ...   6/8/2019 19:03        2\n17      TSGADANXDMY - 1215  ZMI_PE  ...    6/8/2019 3:59        2\n18          PDARPQY - 1154  ZMI_PE  ...   6/30/2019 7:06        1\n19          PDARPQY - 1154  ZMI_PE  ...   6/18/2019 5:04      216\n21      MSGMEEUEEUY - 2027  ZMI_PE  ...  6/27/2019 17:36        2\n23      MSGMEEUEEUY - 2027  ZMI_PE  ...    6/4/2019 9:32       11\n25      MSGMEEUEEUY - 2027  ZMI_PE  ...   6/2/2019 22:37        4\n26      MSGMEEUEEUY - 2027  ZMI_PE  ...   6/2/2019 22:25        2\n28      MSGMEEUEEUY - 2027  ZMI_PE  ...  5/29/2019 23:24        2\n</code></pre>\n\n<p>All the example site logs are in PST. What I'm trying to do is take certain rows, say office \"DQFEMOZM - 2141\" and change the site log timestamp to EST. </p>\n\n<p>I've tried using the tz_localize and tz_convert functions but haven't been able to get them to work. </p>\n\n<pre><code>import pandas as pd\nfrom pytz import all_timezones\ndata = pd.read_csv('lab.csv')\ndata = data.drop_duplicates('SiteLog')\ndata = data.drop(data[data.Duration == 0].index) \nDQFEMOZM = data[data.Office == 'DQFEMOZM - 2141'].index\nDQFEMOZM = DQFEMOZM.tz_localize('America/Los_Angeles')\nDQFEMOZM = DQFEMOZM.tz_convert('America/New_York')\n</code></pre>\n\n<p>Part of the error message I'm receiving:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;pyshell#1&gt;\", line 1, in &lt;module&gt;\n    DQFEMOZM = DQFEMOZM.tz_convert('America/New_York')\nAttributeError: 'Int64Index' object has no attribute 'tz_convert'\n</code></pre>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "selenium-firefoxdriver"], "answers": [{"tags": [], "owner": {"reputation": 1853, "user_id": 8099744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/789f02ce08565883147629e6065606e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sureshmani", "link": "https://stackoverflow.com/users/8099744/sureshmani"}, "is_accepted": false, "score": 0, "last_activity_date": 1564010928, "creation_date": 1564010928, "answer_id": 57192477, "question_id": 57192152, "link": "https://stackoverflow.com/questions/57192152/selenium-not-able-to-loop-through-sub-tables-on-page-am-i-in-the-right-frame/57192477#57192477", "title": "Selenium: not able to loop through sub-tables on page, am I in the right frame?", "body": "<p>In order to loop through level 1 table , try this approach,</p>\n\n<pre><code>rows = driver.find_elements_by_xpath(\"//table[@class='Level1Table']/tbody/tr[contains(@name,'hList')]/td/img[contains(@id,'imgList')]\")\n\nfor item in rows:\n    item.click()\n    #scrape data from level2 table\n</code></pre>\n\n<p>In order to find association is postive or negative, you can scrape data from img tag attribute src. ( If it contains up arrow, then positive &amp; down arrow means negative.</p>\n"}], "owner": {"reputation": 891, "user_id": 8407951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/22ac0be4f472b5379a2175a668266f83?s=128&d=identicon&r=PG&f=1", "display_name": "Slowat_Kela", "link": "https://stackoverflow.com/users/8407951/slowat-kela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564010928, "creation_date": 1564008156, "question_id": 57192152, "link": "https://stackoverflow.com/questions/57192152/selenium-not-able-to-loop-through-sub-tables-on-page-am-i-in-the-right-frame", "title": "Selenium: not able to loop through sub-tables on page, am I in the right frame?", "body": "<p>I'm trying to scrape all the data in the food-disease section of <a href=\"http://147.8.185.62/services/NutriChem-2.0/\" rel=\"nofollow noreferrer\">this</a> database. The following script:</p>\n\n<ol>\n<li>goes to the home page</li>\n<li>types 22663 into the 'search by plant-based food' box</li>\n<li>clicks 'food-disease associations' in the 'select type of interaction'</li>\n<li>clicks submit at the bottom of the page. </li>\n<li>Then on the next page, it clicks Plant-Disease associations.</li>\n</ol>\n\n<p>There are two more steps to get the data that I want, step 6 I am stuck on, and then step 7 is 99% complete.</p>\n\n<p>For step 6, I want to loop through each row in this table, click the arrow button to produce a grey box as in the image below, and extract the info in each grey box. I've attached the code, and the two specific parts that I'm stuck on.</p>\n\n<p><a href=\"https://i.stack.imgur.com/uSlPY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uSlPY.png\" alt=\"\"></a></p>\n\n<p>The code:</p>\n\n<pre><code>import sys\nimport pandas as pd\nfrom bs4 import BeautifulSoup\nimport selenium\nfrom selenium import webdriver\nfrom selenium.webdriver.support.ui import Select\nimport csv\nfrom selenium.webdriver.firefox.firefox_binary import FirefoxBinary\nfrom selenium.webdriver.common.by import By\n\nimport pandas as pd\nfrom bs4 import BeautifulSoup\nimport selenium\nfrom selenium import webdriver\nfrom selenium.webdriver.support.ui import Select\nimport csv\nfrom selenium.webdriver.firefox.firefox_binary import FirefoxBinary\nfrom selenium.webdriver.common.by import By\n\n#binary = FirefoxBinary('/Users/kela/Desktop/scripts/scraping/geckodriver')\nurl = 'http://147.8.185.62/services/NutriChem-2.0/'\ndriver = webdriver.Firefox(executable_path='/Users/kela/Desktop/scripts/scraping/geckodriver')\ndriver.get(url)\n\n#input the tax ID\nelement = driver.find_element_by_id(\"input_food_name\")\nelement.send_keys(\"22663\")\n\n#click food-disease association\nelement = Select(driver.find_element_by_css_selector('[name=food_search_section]'))\nelement.select_by_value('food_disease')\n\n#click submit and click plant-disease associations\ndriver.find_element_by_css_selector('[value=\"Submit\"]').click()\ndriver.switch_to.frame(driver.find_element_by_css_selector('frame'))\ndriver.find_element_by_css_selector('[onclick*=\"plant-disease\"]').click()\n\n#the bit that I'm missing, how do i loop through each grey box on this page ##\n# this next part would generally work once I had access to the grey boxes, except for not telling me if association is up or down\n#scrape the resulting page:\n#sample url\n#url = 'http://147.8.185.62/services/NutriChem-1.0/cgi-bin/ListWrapper.php?file=nutrichem23820_disease.tsv&amp;mode=pla$\nr = requests.get(url)\ndata = r.text\nsoup = BeautifulSoup(data,features=\"html.parser\")\ntable = soup.find(\"table\", {\"class\":\"Level2Table\"} )\n\nfor row in table.findAll('tr'):\n        food_source = row.find_all('td')[1].text\n        pmid = row.find_all('td')[0].text\n        disease = row.find_all('td')[3].text\n        print(food_source + '\\t' + pmid + '\\t' + disease) ## how do I pull out the up or down (or the up or down.png; just something that says whether the association is positive or negative).\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "callback", "event-handling"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1564008174, "post_id": 57192141, "comment_id": 100893743, "body": "<code>time.sleep</code> lets the program sleep. It cannot do anything while sleeping."}, {"owner": {"reputation": 1149, "user_id": 4231985, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10203705295985572/picture?type=large", "display_name": "kkawabat", "link": "https://stackoverflow.com/users/4231985/kkawabat"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1564010668, "post_id": 57192141, "comment_id": 100894204, "body": "hmm that was just meant to simulate long operation process in the actual program it will just be doing calculations"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1564010854, "post_id": 57192141, "comment_id": 100894234, "body": "Yeah, but the same applies... while doing long calculations, the program cannot do anything else. Except, if you interrupt the long calculation or let it be happening in a different process or thread."}, {"owner": {"reputation": 1149, "user_id": 4231985, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10203705295985572/picture?type=large", "display_name": "kkawabat", "link": "https://stackoverflow.com/users/4231985/kkawabat"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1564010965, "post_id": 57192141, "comment_id": 100894250, "body": "I am looking for how to cancel (interrupt) the long calculation"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1564011153, "post_id": 57192141, "comment_id": 100894278, "body": "That&#39;s almost impossible. But of course you could split it up manually, like do the first 10%, then flush events, then do the next 10%, flush events... something like that."}], "owner": {"reputation": 1149, "user_id": 4231985, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10203705295985572/picture?type=large", "display_name": "kkawabat", "link": "https://stackoverflow.com/users/4231985/kkawabat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564010804, "creation_date": 1564008055, "last_edit_date": 1564010804, "question_id": 57192141, "link": "https://stackoverflow.com/questions/57192141/how-to-cancel-a-matplotlib-callback-event-when-new-event-enters-event-queue", "title": "How to cancel a matplotlib callback event when new event enters event queue?", "body": "<p>In the code below if I hover over the figure it generates, it will print \"not slept\" <em>take a couple seconds to do computation</em> then print \"slept\" and repeat until the event queue empties. What I want to happen is that during the 2 second wait if it detects a new hover position instantly cancels the sleep event and run the new hover call. or if this is not possible remove all but the very last event call and the one that it is currently working on. </p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport time\n\ndef hover(evnt):\n    print('not slept')\n    [i**i for i in range(10000)]\n    print('slept')\n\nf = plt.figure()\nplt.plot([1,2,3],[1,2,3])\nf.canvas.callbacks.connect(\"motion_notify_event\", hover)\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "image", "image-processing", "image-segmentation"], "answers": [{"tags": [], "owner": {"reputation": 435, "user_id": 1496554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fc3e2753fb73668403c8f398f900526?s=128&d=identicon&r=PG", "display_name": "Jakaria Rabbi", "link": "https://stackoverflow.com/users/1496554/jakaria-rabbi"}, "is_accepted": true, "score": 1, "last_activity_date": 1564008357, "last_edit_date": 1564008357, "creation_date": 1564008045, "answer_id": 57192139, "question_id": 57192138, "link": "https://stackoverflow.com/questions/57192138/how-to-create-separate-images-containing-one-instance-mask-per-image-from-a-sing/57192139#57192139", "title": "How to create separate images containing one instance mask per image from a single image with multiple masks in python", "body": "<p>I have an answer to this. The following code segment creates the desired output:</p>\n\n<pre><code>def create_separate_mask(path):\n    # get all the masks\n    for mask_file in glob.glob(path + '/*mask.png'): \n        mask = cv2.imread(mask_file, 1)\n        # get masks labelled with different values\n        label_im, nb_labels = ndimage.label(mask) \n\n        for i in range(nb_labels):\n\n            # create an array which size is same as the mask but filled with \n            # values that we get from the label_im. \n            # If there are three masks, then the pixels are labeled \n            # as 1, 2 and 3.\n\n            mask_compare = np.full(np.shape(label_im), i+1) \n\n            # check equality test and have the value 1 on the location of each mask\n            separate_mask = np.equal(label_im, mask_compare).astype(int) \n\n            # replace 1 with 255 for visualization as rgb image\n\n            separate_mask[separate_mask == 1] = 255 \n            base=os.path.basename(mask_file)\n\n            # give new name to the masks\n\n            file_name = os.path.splitext(base)[0]\n            file_copy = os.path.join(path, file_name + \"_\" + str(i+1) +\".png\") \n            cv2.imwrite(file_copy, separate_mask) \n\n</code></pre>\n"}], "owner": {"reputation": 435, "user_id": 1496554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fc3e2753fb73668403c8f398f900526?s=128&d=identicon&r=PG", "display_name": "Jakaria Rabbi", "link": "https://stackoverflow.com/users/1496554/jakaria-rabbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "accepted_answer_id": 57192139, "answer_count": 1, "score": 1, "last_activity_date": 1564008357, "creation_date": 1564008045, "question_id": 57192138, "link": "https://stackoverflow.com/questions/57192138/how-to-create-separate-images-containing-one-instance-mask-per-image-from-a-sing", "title": "How to create separate images containing one instance mask per image from a single image with multiple masks in python", "body": "<p>I have the following image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/11hra.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/11hra.png\" alt=\"enter image description here\"></a></p>\n\n<p>Each mask is for an individual instance. I want to have separate images which will contain only one instance mask per image. Masks are not overlapping strictly. The outputs will be as like following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vhQXN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vhQXN.png\" alt=\"enter image description here\"></a> <a href=\"https://i.stack.imgur.com/4Hlk7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4Hlk7.png\" alt=\"enter image description here\"></a> <a href=\"https://i.stack.imgur.com/rOqx1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rOqx1.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thank You.</p>\n"}, {"tags": ["python", "pandas", "numpy", "binning"], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 3259222, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a848fa75c72fc039b48550c975ecdd03?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantin", "link": "https://stackoverflow.com/users/3259222/konstantin"}, "edited": false, "score": 0, "creation_date": 1564036851, "post_id": 57194073, "comment_id": 100900112, "body": "Thanks, but the answer assumes that every interval is closed in the same way. I need full control of each individual interval to be set as either left, right, both or neither as specified in the question."}], "tags": [], "owner": {"reputation": 72931, "user_id": 2538939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/876f7ddaf27a16c17a62b8a9705b45f1?s=128&d=identicon&r=PG&f=1", "display_name": "Code Different", "link": "https://stackoverflow.com/users/2538939/code-different"}, "is_accepted": true, "score": 3, "last_activity_date": 1564116370, "last_edit_date": 1564116370, "creation_date": 1564026939, "answer_id": 57194073, "question_id": 57192123, "link": "https://stackoverflow.com/questions/57192123/bin-variable-with-pre-defined-bins-and-closed-open-intervals/57194073#57194073", "title": "Bin variable with pre-defined bins and closed/open intervals", "body": "<h1>If all intervals are closed on the same side</h1>\n\n<p>The simplest way is to use <a href=\"https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.cut.html\" rel=\"nofollow noreferrer\"><code>pd.cut</code></a>. However, there is an <a href=\"https://github.com/pandas-dev/pandas/issues/21233\" rel=\"nofollow noreferrer\">outstanding bug</a> where it ignores <code>labels</code> when <code>bins</code> is <code>IntervalIndex</code>.</p>\n\n<pre><code>def cut(array, bins, labels, closed='right'):\n    _bins = pd.IntervalIndex.from_tuples(bins, closed=closed)\n\n    x = pd.cut(array, _bins)\n    x.categories = labels # workaround for the bug\n    return x\n\narray = [3.5, 1, 0.5, 3]\nbins = [(0,1), (1,2), (3,4)]\nlabels = ['first', 'second', 'third']\n\ndf = pd.DataFrame({\n    'value': array,\n    'category': cut(array, bins, labels, closed='right')\n})\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   value category\n0    3.5    third\n1    1.0    first\n2    0.5    first\n3    3.0      NaN\n</code></pre>\n\n<hr>\n\n<h1>If every interval is different</h1>\n\n<p>Things get a lot slower because the code is not vectorized but it's conceptually simple: for each item in the array, find the first bin that it falls into and add the label of that bin.</p>\n\n<pre><code>def cut(array, bins, labels):\n    intervals = [pd.Interval(*b) for b in bins]\n\n    categories = []\n    for value in array:\n        cat = None\n        for i, interval in enumerate(intervals):\n            if value in interval:\n                cat = labels[i]\n                break\n        categories.append(cat)\n\n    return categories\n\ncut([3.5, 1, 0.5, 3], bins=[(0,1,'right'),(1,2,'right'),(3,4,'left')], labels=['first', 'second', 'third'])\n</code></pre>\n\n<p>I modified the bin tuples to include what side they are closed on. Options are <code>left</code>, <code>right</code>, <code>both</code> and <code>neither</code>.</p>\n"}], "owner": {"reputation": 173, "user_id": 3259222, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a848fa75c72fc039b48550c975ecdd03?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantin", "link": "https://stackoverflow.com/users/3259222/konstantin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 882, "favorite_count": 0, "accepted_answer_id": 57194073, "answer_count": 1, "score": 2, "last_activity_date": 1564116370, "creation_date": 1564007929, "last_edit_date": 1592644375, "question_id": 57192123, "link": "https://stackoverflow.com/questions/57192123/bin-variable-with-pre-defined-bins-and-closed-open-intervals", "title": "Bin variable with pre-defined bins and closed/open intervals", "body": "<p>I have a set of bins which can be defined by:</p>\n<ol>\n<li><p>A set of tuples of non-overlaping boundaries of each bin:</p>\n<p>Intervals: [(0,1), (1,2), (3,4)]</p>\n</li>\n<li><p>A set of indicators identifying which boundary of each tuple is closed:</p>\n<p>Closed_Boundaries: ['right','right','both']</p>\n</li>\n<li><p>A set of labels for each interval</p>\n<p>Labels: ['first','second','third']</p>\n</li>\n</ol>\n<p>I am looking for an efficient, elegant and scalable way of applying this binning to a numeric series in a pandas dataframe so that the result includes the respective labels as identified by the binning logic:</p>\n<p>Data_input: [3.5, 1, 0.5, 3]</p>\n<p>Data_result: ['third', 'first', 'first', 'third']</p>\n<p>I tried with pandas.IntervalIndex.from_tuples() followed by pandas.cut(). However, the labels argument of pandas.cut() is disabled when using IntervalIndex.from_tuples() while the name argument of the latter doesn't allow me to set labels to be used as replacement values.</p>\n<p>PS: The pandas problem with labels not supported with IntervalIndex has been discussed <a href=\"https://github.com/pandas-dev/pandas/issues/21233\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 2159, "user_id": 4930109, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10153361027378708/picture?type=large", "display_name": "J_yang", "link": "https://stackoverflow.com/users/4930109/j-yang"}, "edited": false, "score": 0, "creation_date": 1564048176, "post_id": 57192184, "comment_id": 100906244, "body": "so may I ask why it isn&#39;t just \\t= but \\x00\\t=\\x00? or why not \\x00\\t\\x00=\\x00"}, {"owner": {"reputation": 2159, "user_id": 4930109, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10153361027378708/picture?type=large", "display_name": "J_yang", "link": "https://stackoverflow.com/users/4930109/j-yang"}, "edited": false, "score": 0, "creation_date": 1564072008, "post_id": 57192184, "comment_id": 100919649, "body": "Excellent answer. Very clean and helped me understand. Thank you every so much"}], "tags": [], "owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "is_accepted": true, "score": 3, "last_activity_date": 1564050724, "last_edit_date": 1564050724, "creation_date": 1564008408, "answer_id": 57192184, "question_id": 57192122, "link": "https://stackoverflow.com/questions/57192122/can-you-help-me-understand-packed-binary-data-in-python/57192184#57192184", "title": "Can you help me understand packed binary data in python", "body": "<p>We can get the byte representation for 4000000 using this:</p>\n\n<pre><code>In [14]: x = 4000000                                                                                                                                                                \n\nIn [15]: print(\"%08X\" % x)                                                                                                                                                          \n003D0900\n</code></pre>\n\n<p>But on x86 and x64 machines, integers are stored LSB first, so the bytes in memory will be</p>\n\n<pre><code>00 09 3D 00\n</code></pre>\n\n<p>Those translate to the following characters:</p>\n\n<pre><code>In [46]: print(b\"%c%c%c%c\" % (0x00, 0x09, 0x3D, 0x00))\nb'\\x00\\t=\\x00'\n</code></pre>\n\n<p>So <code>0x09</code> is <code>\\t</code> and <code>0x3D</code> is <code>=</code>.</p>\n\n<p>We can recreate the original value using <code>ord</code>, some bit shifts, and addition:</p>\n\n<pre><code>In [52]: (ord('=') &lt;&lt; 16) + (ord('\\t') &lt;&lt; 8)\nOut[52]: 4000000\n</code></pre>\n\n<p>In the comments, you asked \"why it isn't just \\t=\". Hopefully this example answers that question:</p>\n\n<pre><code>In [8]: struct.unpack('&lt;i', b'\\t=')\n---------------------------------------------------------------------------\nerror                                     Traceback (most recent call last)\n&lt;ipython-input-8-c3b2a260fbdf&gt; in &lt;module&gt;\n----&gt; 1 struct.unpack('&lt;i', b'\\t=')\n\nerror: unpack requires a buffer of 4 bytes\n</code></pre>\n\n<p>The <code>'&lt;i'</code> tells <code>pack</code> and <code>unpack</code> that they are working with 4-byte little-endian integers, so we need to give them at least 4 bytes.</p>\n\n<p>You also asked \"why not \\x00\\t\\x00=\\x00\". This time we promise 4 bytes but deliver 5:</p>\n\n<pre><code>In [10]: struct.unpack('&lt;i', b'\\x00\\t\\x00=\\x00')\n---------------------------------------------------------------------------\nerror                                     Traceback (most recent call last)\n&lt;ipython-input-10-8f3448548a2a&gt; in &lt;module&gt;\n----&gt; 1 struct.unpack('&lt;i', b'\\x00\\t\\x00=\\x00')\n\nerror: unpack requires a buffer of 4 bytes\n</code></pre>\n\n<p>Maybe I confused you by leaving out the <code>0x00</code> bytes in the reassembly:</p>\n\n<pre><code>In [11]: (0 &lt;&lt; 24) + (ord('=') &lt;&lt; 16) + (ord('\\t') &lt;&lt; 8) + 0                                                                                                                        \nOut[11]: 4000000\n</code></pre>\n"}], "owner": {"reputation": 2159, "user_id": 4930109, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10153361027378708/picture?type=large", "display_name": "J_yang", "link": "https://stackoverflow.com/users/4930109/j-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 57192184, "answer_count": 1, "score": 2, "last_activity_date": 1564050724, "creation_date": 1564007926, "question_id": 57192122, "link": "https://stackoverflow.com/questions/57192122/can-you-help-me-understand-packed-binary-data-in-python", "title": "Can you help me understand packed binary data in python", "body": "<p>I followed an example to convert 24bit audio to bytes. </p>\n\n<p>For example: </p>\n\n<pre><code>struct.pack('&lt;i', 4000000)\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>b'\\x00\\t=\\x00'\n</code></pre>\n\n<p>Can you help me understand the packed binary data </p>\n\n<blockquote>\n  <p>\\x00\\t=\\x00</p>\n</blockquote>\n\n<p>How do we interpret it?</p>\n\n<p>Many thanks. </p>\n"}, {"tags": ["python", "google-calendar-api"], "comments": [{"owner": {"reputation": 100534, "user_id": 7108653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LH2EI.png?s=128&g=1", "display_name": "Tanaike", "link": "https://stackoverflow.com/users/7108653/tanaike"}, "edited": false, "score": 0, "creation_date": 1564014596, "post_id": 57192115, "comment_id": 100894857, "body": "Thank you for replying. In your question, I thought that you want to know about the reason of <code>KeyError: &#39;location&#39;</code>. But from your replying, it seems that my understanding was not correct. So I have to remove my answer. I deeply apologize for my poor skill."}, {"owner": {"reputation": 100534, "user_id": 7108653, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LH2EI.png?s=128&g=1", "display_name": "Tanaike", "link": "https://stackoverflow.com/users/7108653/tanaike"}, "edited": false, "score": 0, "creation_date": 1564014613, "post_id": 57192115, "comment_id": 100894862, "body": "Then, from <code>It is getting the summary and even the location just fine</code>, in your situation, even when the property of <code>location</code> is included in the object of the element, the error occurs. If my understanding is correct, can you provide the whole script and values for completely replicating your issue? By this, I would like to confirm it. Of course, please remove your personal information. If you can cooperate to resolve your issue, I&#39;m glad."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11833838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abad93dd985afafa64057cfd2ee03d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Willseed", "link": "https://stackoverflow.com/users/11833838/willseed"}, "is_accepted": false, "score": 0, "last_activity_date": 1564026313, "creation_date": 1564026313, "answer_id": 57193988, "question_id": 57192115, "link": "https://stackoverflow.com/questions/57192115/google-calendar-api-keyerror-location/57193988#57193988", "title": "Google Calendar API: KeyError: &#39;location&#39;", "body": "<p>If you want change setting on \"scope\" variable. \nmaybe you can delete credential file, And add scope array, last rerun your .py file</p>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 2134314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a7a04b833bfddfaab79a4a644e03705?s=128&d=identicon&r=PG", "display_name": "Jonathan Morales", "link": "https://stackoverflow.com/users/2134314/jonathan-morales"}, "is_accepted": true, "score": 0, "last_activity_date": 1568682154, "creation_date": 1568682154, "answer_id": 57966079, "question_id": 57192115, "link": "https://stackoverflow.com/questions/57192115/google-calendar-api-keyerror-location/57966079#57966079", "title": "Google Calendar API: KeyError: &#39;location&#39;", "body": "<p>It ended up being that I just needed to upgrade to the latest google API. I didn't end up using it anyway. But thank you for the responses!</p>\n"}], "owner": {"reputation": 55, "user_id": 2134314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a7a04b833bfddfaab79a4a644e03705?s=128&d=identicon&r=PG", "display_name": "Jonathan Morales", "link": "https://stackoverflow.com/users/2134314/jonathan-morales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 57966079, "answer_count": 2, "score": 0, "last_activity_date": 1568682154, "creation_date": 1564007857, "question_id": 57192115, "link": "https://stackoverflow.com/questions/57192115/google-calendar-api-keyerror-location", "title": "Google Calendar API: KeyError: &#39;location&#39;", "body": "<p>in using the google calendar api (with python), I've been able to get back the variables I want, so I can export events into a text file. However, one variable (the location) is triggering an error and I'm not sure why.</p>\n\n<p>This is straight from google's start code, with additions by me for the variables I want:</p>\n\n<pre><code>   if not events:\n    print('No upcoming events found.')\nfor event in events:\n    start = event['start'].get('dateTime', event['start'].get('date'))\n#    print(start, event['summary'], event['description'], event['location'],  event['iCalUID'])\n    print(start, event['summary'], event['location'], event['iCalUID'])\n</code></pre>\n\n<p>It prints a list of upcoming appointments including the location, but it stops and throws this error at me</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"tryingnewstuff.py\", line 39, in &lt;module&gt;\n    print(start, event['summary'], event['description'], event['location'],  event['iCalUID'])\nKeyError: 'location'\n</code></pre>\n\n<p>Is this a problem with credentials/json? Am I using an old version of google calendar api? How do I check that? My json file says {\"_module\": \"oauth2client.client\", \"scopes\": [\"<a href=\"https://www.googleapis.com/auth/calendar.readonly\" rel=\"nofollow noreferrer\">https://www.googleapis.com/auth/calendar.readonly</a>\"], \"</p>\n"}, {"tags": ["python", "deep-learning", "pytorch", "machine-translation", "opennmt"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12456284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d9b9dbe4cefab93dccfe45df964d6a?s=128&d=identicon&r=PG&f=1", "display_name": "xwzhang", "link": "https://stackoverflow.com/users/12456284/xwzhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1575027514, "last_edit_date": 1575027514, "creation_date": 1575026399, "answer_id": 59103822, "question_id": 57192111, "link": "https://stackoverflow.com/questions/57192111/getting-attention-weights-in-opennmt-py/59103822#59103822", "title": "Getting attention weights in opennmt-py", "body": "<p>You can add <code>--attn_debug</code> parameter in your translate script to look the attention weights.</p>\n\n<pre><code>translate.py ... \\\n             -attn_debug \\\n             ...\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 10618542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b81dc400c7b8ea68c6a5af5060f7b40?s=128&d=identicon&r=PG&f=1", "display_name": "thaumoctopus", "link": "https://stackoverflow.com/users/10618542/thaumoctopus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575027514, "creation_date": 1564007837, "question_id": 57192111, "link": "https://stackoverflow.com/questions/57192111/getting-attention-weights-in-opennmt-py", "title": "Getting attention weights in opennmt-py", "body": "<p>Specifically in opennmt-py. Now there are many questions on this topic, such as <a href=\"https://stackoverflow.com/questions/56440732/getting-alignment-attention-during-translation-in-opennmt-py\">Getting alignment/attention during translation in OpenNMT-py</a> and the following thread on the opennmt forum <a href=\"https://github.com/OpenNMT/OpenNMT-py/issues/575\" rel=\"nofollow noreferrer\">https://github.com/OpenNMT/OpenNMT-py/issues/575</a>. I use the code suggested by the latter. However none seem to address the problem I have. I try to run the following simple snippet of code. </p>\n\n<pre><code>import onmt\nimport onmt.inputters\nimport onmt.translate\nimport onmt.model_builder\nfrom collections import namedtuple\n\n\nOpt = namedtuple('Opt', ['models', 'data_type', 'reuse_copy_attn', \"gpu\"])\n\n\nopt = Opt(\"/home/Desktop/hidden-att/model/hidden-2/seed-0/LSTMlang1_step_400.pt\", \"text\",False, 0)\nfields, model, model_opt =  onmt.model_builder.load_test_model(opt,{\"reuse_copy_attn\":False})\n\n\n</code></pre>\n\n<p>I get this error trace.</p>\n\n<pre><code>Traceback (most recent call last):\n\n  File \"&lt;ipython-input-63-94c1f45c429f&gt;\", line 1, in &lt;module&gt;\n    runfile('/home/Desktop/hidden-att/graph_hidden_exp.py', wdir='/home/Desktop/hidden-att')\n\n  File \"/home/anaconda3/lib/python3.7/site-packages/spyder_kernels/customize/spydercustomize.py\", line 786, in runfile\n    execfile(filename, namespace)\n\n  File \"/home/anaconda3/lib/python3.7/site-packages/spyder_kernels/customize/spydercustomize.py\", line 110, in execfile\n    exec(compile(f.read(), filename, 'exec'), namespace)\n\n  File \"/home/Desktop/hidden-att/graph_hidden_exp.py\", line 33, in &lt;module&gt;\n    fields, model, model_opt =  onmt.model_builder.load_test_model(opt,{\"reuse_copy_attn\":False})\n\n  File \"../../Documents/NMT/OpenNMT-py/onmt/model_builder.py\", line 85, in load_test_model\n    map_location=lambda storage, loc: storage)\n\n  File \"/home/anaconda3/lib/python3.7/site-packages/torch/serialization.py\", line 387, in load\n    return _load(f, map_location, pickle_module, **pickle_load_args)\n\n  File \"/home/anaconda3/lib/python3.7/site-packages/torch/serialization.py\", line 549, in _load\n    _check_seekable(f)\n\n  File \"/home/anaconda3/lib/python3.7/site-packages/torch/serialization.py\", line 194, in _check_seekable\n    raise_err_msg([\"seek\", \"tell\"], e)\n\n  File \"/home/anaconda3/lib/python3.7/site-packages/torch/serialization.py\", line 187, in raise_err_msg\n    raise type(e)(msg)\n\nAttributeError: 'dict' object has no attribute 'seek'. You can only torch.load from a file that is seekable. Please pre-load the data into a buffer like io.BytesIO and try to load from it instead.\n</code></pre>\n\n<p>So has anyone experienced and solved this problem? Or know where to look? I guess it is something about the loaded file, but it is trained with opennmt-py in a fairly standard way.</p>\n"}, {"tags": ["javascript", "python", "django", "inline-formset"], "comments": [{"owner": {"reputation": 1, "user_id": 11833008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3268f70aa19edf49cb93e97d0e3d5fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Luis", "link": "https://stackoverflow.com/users/11833008/luis"}, "edited": false, "score": 0, "creation_date": 1564063053, "post_id": 57192108, "comment_id": 100914779, "body": "This is my script in my base template:                                                                              &lt;script type=&quot;text/javascript&quot;&gt;     &lt;!--     $(function () {     $(&#39;.add-row&#39;).click(function() {         return addForm(this, &#39;{{ form2.prefix }}&#39;);     });     $(&#39;.delete-row&#39;).click(function() {         return deleteForm(this, &#39;{{ form2.prefix }}&#39;);     }) })     //--&gt;     &lt;/script&gt;"}, {"owner": {"reputation": 1, "user_id": 11833008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3268f70aa19edf49cb93e97d0e3d5fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Luis", "link": "https://stackoverflow.com/users/11833008/luis"}, "edited": false, "score": 0, "creation_date": 1564063106, "post_id": 57192108, "comment_id": 100914804, "body": "update: I&#39;m getting NAN instead of 0 or the new number in the new row that is created"}], "owner": {"reputation": 1, "user_id": 11833008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3268f70aa19edf49cb93e97d0e3d5fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Luis", "link": "https://stackoverflow.com/users/11833008/luis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564008567, "creation_date": 1564007828, "last_edit_date": 1564008567, "question_id": 57192108, "link": "https://stackoverflow.com/questions/57192108/how-to-update-prefix-id-of-a-formset", "title": "How to update prefix id of a formset", "body": "<p>I'm new at python, but no at programing. I'm using Django to create a webapp and in some part, I have to create products. A product has a name, brand and type, but this product can have many \"inventories\". For example: The product Iphone has a brand Apple, type Phone and since I have 3 in my stock, there is another table that saves 3 individual codes for them (and the price and state as well).\nFor this solution I have used formsets, and it was working fine without the JS. What I mean is that the process is ok, but when I want to dinamically add a new row to add a new Inventory, is added visually but then when I tried to save it, it just saves the last row. I have looked into the debug console of chrome and it seems that the problem is that the name and ID, of the new row, remains the same as the original one (the prefix I believe), but I don't know how to change it.  Here is my code: <a href=\"https://i.stack.imgur.com/7eMZd.png\" rel=\"nofollow noreferrer\">Note in this image that the prefix of the second row is 0</a></p>\n\n<p>views.py:</p>\n\n<pre><code>class ProductoInline(InlineFormSetFactory):\nmodel= Inventario\nfields = ['codigo', 'Producto', 'Precio', 'Estado']\nfactory_kwargs = {'extra':1 , 'max_num': 10,\n                  'can_order': False, 'can_delete': False}\n\n\nclass InventarioCreateView(LoginRequiredMixin, CreateWithInlinesView):\nmodel = Producto\ninlines = [ProductoInline]\nfields = '__all__'\nfactory_kwargs = {'extra': 3, 'max_num': 10,'can_order': False, \n'can_delete': False}\ntemplate_name = 'ventas/inventario_form.html'\n\ndef form_valid(self, form):\n    form.instance.author = self.request.user\n    return super().form_valid(form)\n</code></pre>\n\n<p>inventario_form.html:</p>\n\n<pre><code>  {%extends \"ventas/base.html\" %}\n  {% load staticfiles %}\n  {% load crispy_forms_tags %}\n\n  {%block content %}\n\n &lt;section class=\"card\"&gt;\n\n &lt;header class=\"card-header\"&gt;Crea/actualiza producto&lt;/header&gt;\n&lt;div class=\"card-body\"&gt;\n    &lt;form method=\"POST\"&gt;\n        {% csrf_token %}\n        {{ form|crispy }}\n\n        {% for formset in inlines %}\n\n            &lt;table class=\"table table-bordered table-responsive-md table-striped text-center\"&gt;\n\n                &lt;tr&gt;\n                &lt;th class=\"text-center\"&gt;C\u00f3digo&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Precio&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Estado&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Eliminar&lt;/th&gt;\n                &lt;/tr&gt;\n\n            {{formset.management_form}}\n\n                &lt;tbody&gt;\n                        {% for form2 in formset %}\n                        &lt;tr id=\"{{ form2.prefix }}-row\" class=\"dynamic-form\"&gt;\n\n                            &lt;td&gt;{{ form2.codigo }}&lt;/td&gt;\n                            &lt;td&gt;{{ form2.Precio }}&lt;/td&gt;\n                            &lt;td&gt;{{ form2.Estado }}&lt;/td&gt;\n                            &lt;td&gt;&lt;a id=\"remove-{{ form2.prefix }}-row\" href=\"javascript:void(0)\" class=\"delete-row\"&gt;Eliminar&lt;/a&gt;&lt;/td&gt;\n\n                        &lt;/tr&gt;\n                        {% endfor %}\n\n                        &lt;tr&gt;\n                            &lt;td colspan=\"4\"&gt;&lt;a href=\"javascript:void(0)\" class=\"add-row\"&gt;A\u00f1adir producto&lt;/a&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                &lt;/tbody&gt;\n            &lt;/table&gt;\n\n        {% endfor %}\n        &lt;button type=\"submit\"&gt;Crear producto&lt;/button&gt;\n\n    &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>\n{%endblock content %}</p>\n\n<p>formset.js:</p>\n\n<pre><code>    function updateElementIndex(el, prefix, ndx) {\n    var id_regex = new RegExp('(' + prefix + '-\\\\d+)');\n    var replacement = prefix + '-' + ndx;\n    if ($(el).attr(\"for\")) $(el).attr(\"for\", \n    $(el).attr(\"for\").replace(id_regex, replacement));\n    if (el.id) el.id = el.id.replace(id_regex, replacement);\n    if (el.name) el.name = el.name.replace(id_regex, replacement);\n }\n\nfunction addForm(btn, prefix) {\n    var formCount = parseInt($('#id_' + prefix + '-TOTAL_FORMS').val());\n    var row = $('.dynamic-form:first').clone(true).get(0);\n    $(row).removeAttr('id').insertAfter($('.dynamic-form:last')).children('.hidden').removeClass('hidden');\n    $(row).children().not(':last').children().each(function() {\n        updateElementIndex(this, prefix, formCount);\n        $(this).val('');\n    });\n    $(row).find('.delete-row').click(function() {\n        deleteForm(this, prefix);\n    });\n    $('#id_' + prefix + '-TOTAL_FORMS').val(formCount + 1);\n    return false;\n}\n\nfunction deleteForm(btn, prefix) {\n    $(btn).parents('.dynamic-form').remove();\n    var forms = $('.dynamic-form');\n    $('#id_' + prefix + '-TOTAL_FORMS').val(forms.length);\n    for (var i=0, formCount=forms.length; i&lt;formCount; i++) {\n        $(forms.get(i)).children().not(':last').children().each(function() {\n            updateElementIndex(this, prefix, i);\n        });\n    }\n    return false;\n}\n</code></pre>\n"}, {"tags": ["python", "django", "unit-testing"], "answers": [{"comments": [{"owner": {"reputation": 3127, "user_id": 2275286, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/XXXAC.gif?s=128&g=1", "display_name": "HBat", "link": "https://stackoverflow.com/users/2275286/hbat"}, "edited": false, "score": 0, "creation_date": 1564009215, "post_id": 57192182, "comment_id": 100893949, "body": "This nicely works for my unit testing purposes. The content type of this is <code>audio\\x-wav</code>."}], "tags": [], "owner": {"reputation": 3465, "user_id": 803194, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/517b0b537f276b8dcf84c55ed078035a?s=128&d=identicon&r=PG", "display_name": "blues", "link": "https://stackoverflow.com/users/803194/blues"}, "is_accepted": true, "score": 1, "last_activity_date": 1564008401, "creation_date": 1564008401, "answer_id": 57192182, "question_id": 57192090, "link": "https://stackoverflow.com/questions/57192090/minimal-audio-wav-or-mp3-file-in-bytes-for-unit-testing/57192182#57192182", "title": "Minimal audio (wav or mp3) file in bytes for unit testing", "body": "<p>Here's a very simple .wav file. You can make these with python quite easily using the <a href=\"https://docs.python.org/3/library/wave.html\" rel=\"nofollow noreferrer\">wave</a> module.</p>\n\n<pre><code>b'RIFF$\\x00\\x00\\x00WAVEfmt \\x10\\x00\\x00\\x00\\x01\\x00\\x01\\x00\\x00\\x04\\x00\\x00\\x00\\x04\\x00\\x00\\x01\\x00\\x08\\x00data\\x00\\x00\\x00\\x00'\n</code></pre>\n"}], "owner": {"reputation": 3127, "user_id": 2275286, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/XXXAC.gif?s=128&g=1", "display_name": "HBat", "link": "https://stackoverflow.com/users/2275286/hbat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 57192182, "answer_count": 1, "score": 0, "last_activity_date": 1564333670, "creation_date": 1564007670, "last_edit_date": 1564333670, "question_id": 57192090, "link": "https://stackoverflow.com/questions/57192090/minimal-audio-wav-or-mp3-file-in-bytes-for-unit-testing", "title": "Minimal audio (wav or mp3) file in bytes for unit testing", "body": "<p>I want to find a minimal audio file (like the <code>testfile_gif</code> below) for unit testing. </p>\n\n<p>I don't want to load it from the hard drive (like <a href=\"https://stackoverflow.com/a/4287271/2275286\">here</a>). </p>\n\n<p>I want the second test to perform like the first one. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import magic\nfrom django.core.files.uploadedfile import SimpleUploadedFile\n\n\nclass TestFiles(TestCase):\n    def test_working(self):\n        # Test an Image File #\n        testfile_gif = (\n            b'\\x47\\x49\\x46\\x38\\x39\\x61\\x01\\x00\\x01\\x00\\x00\\x00\\x00\\x21\\xf9\\x04'\n            b'\\x01\\x0a\\x00\\x01\\x00\\x2c\\x00\\x00\\x00\\x00\\x01\\x00\\x01\\x00\\x00\\x02'\n            b'\\x02\\x4c\\x01\\x00\\x3b')\n        gif_file = SimpleUploadedFile(name='image.gif', content=testfile_gif,\n                                      content_type='image/gif')\n        mime = magic.from_buffer(gif_file.read(1024), mime=True)\n        self.assertEqual('image/gif', mime)\n\n    def test_not_working(self):\n        # Test an Audio File #\n        testfile_audio = b'What should be written in here?'\n        audio_file = SimpleUploadedFile(name='music.mp3',\n                                        content=testfile_audio,\n                                        content_type='audio/mpeg')\n        mime = magic.from_buffer(audio_file.read(1024), mime=True)\n        self.assertEqual('audio/mpeg', mime)\n</code></pre>\n\n<p>Preferably, I don't want to use any packages (like <code>import mock</code>). </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Here is an <code>mp3</code> file with <code>audio/mpeg</code> mime:</p>\n\n<pre><code>b'MM\\x00*\\x00\\x00\\x00\\x08\\x00\\x03\\x01\\x00\\x00\\x03\\x00\\x00\\x00\\x01\\x00\\x01'\nb'\\x00\\x00\\x01\\x01\\x00\\x03\\x00\\x00\\x00\\x01\\x00\\x01\\x00\\x00\\x01\\x11\\x00\\x03'\nb'\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00'\n</code></pre>\n"}, {"tags": ["python", "json", "regex", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1564008816, "post_id": 57192086, "comment_id": 100893865, "body": "It helps if you say <i>&quot;<code>parameters</code> is a JSON string column containing multiple rows and columns in pandas&quot;</i>; I edited this and tagged <a href=\"https://stackoverflow.com/questions/tagged/json\">json</a>. There are tons of existing questions on extracting/parsing JSON in pandas. Really you should start from doing <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_json.html\" rel=\"nofollow noreferrer\"><code>read_json</code></a> on your input JSON, not <code>read_csv</code>, to avoid ever having to manually extract this stuff. (Can you show us a snippet of your JSON input file? Without that link this question is not <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>)"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1564009313, "post_id": 57192086, "comment_id": 100893972, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/30088006/loading-a-file-with-more-than-one-line-of-json-into-pandas\">Loading a file with more than one line of JSON into Pandas</a>"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1564009422, "post_id": 57192086, "comment_id": 100893993, "body": "Duplicates like <a href=\"https://stackoverflow.com/questions/30088006/loading-a-file-with-more-than-one-line-of-json-into-pythons-pandas\">Loading a file with more than one line of JSON into Pandas</a>, <a href=\"https://stackoverflow.com/questions/20037430/reading-multiple-json-records-into-a-pandas-dataframe\">this</a>. <a href=\"https://stackoverflow.com/questions/39257147/convert-pandas-dataframe-to-json-format\">this</a> and <a href=\"https://stackoverflow.com/search?q=%5Bpandas%5D+JSON+votes%3A10\">many others</a>"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1564009487, "post_id": 57192086, "comment_id": 100894005, "body": "Please read the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_json.html\" rel=\"nofollow noreferrer\"><code>read_json</code> doc</a>"}], "answers": [{"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1564008455, "post_id": 57192144, "comment_id": 100893796, "body": "<code>input_data[[&#39;id&#39;,&#39;products&#39;]].explode(&#39;products&#39;)</code>"}, {"owner": {"reputation": 679, "user_id": 3116753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HE70j.jpg?s=128&g=1", "display_name": "BlackHat", "link": "https://stackoverflow.com/users/3116753/blackhat"}, "edited": false, "score": 0, "creation_date": 1564008778, "post_id": 57192144, "comment_id": 100893860, "body": "input_data[&#39;products&#39;] = input_data.parameters.str.get(&#39;product&#39;) creates the column with each field being &#39;nan&#39;. Is this expected?"}, {"owner": {"reputation": 679, "user_id": 3116753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HE70j.jpg?s=128&g=1", "display_name": "BlackHat", "link": "https://stackoverflow.com/users/3116753/blackhat"}, "edited": false, "score": 0, "creation_date": 1564008887, "post_id": 57192144, "comment_id": 100893881, "body": "input_data.parameters.apply(ast.literal_eval) yields invalid syntax error"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 1, "creation_date": 1564010909, "post_id": 57192144, "comment_id": 100894243, "body": "Reading JSON is a job for <code>read_json</code>; recommending <code>ast.literal_eval</code> is total overkill. The OP should never have read in mangled JSON via <code>read_csv</code> (or whatever) in the first place."}], "tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 2, "last_activity_date": 1564008085, "creation_date": 1564008085, "answer_id": 57192144, "question_id": 57192086, "link": "https://stackoverflow.com/questions/57192086/extracting-portions-of-json-string-column-containing-multiple-rows-and-columns-i/57192144#57192144", "title": "Extracting portions of JSON string column containing multiple rows and columns in pandas", "body": "<p>First, setup yor products and persons using <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.get.html\" rel=\"nofollow noreferrer\"><code>str.get</code></a> accessor </p>\n\n<pre><code>input_data['products'] = input_data.parameters.str.get('product')\n</code></pre>\n\n<p>Now, for <strong>pandas <code>&gt;= 0.25.0</code></strong>, you may use the <code>explode</code> method</p>\n\n<pre><code>input_data.explode('products')\n</code></pre>\n\n<p>for pandas <code>&lt;= 0.25.0</code>, you may refer <a href=\"https://stackoverflow.com/questions/53218931/how-to-unnest-explode-a-column-in-a-pandas-dataframe/53218939#53218939\">to this thread</a></p>\n\n<hr>\n\n<p>I assumed you have dictionaries in your data frames, and not <em>strings</em> as you exposed here. </p>\n\n<p>If you have strings, you may always</p>\n\n<pre><code>import ast\ninput_data.parameters.apply(ast.literal_eval)\n</code></pre>\n\n<p>to make them real dictionaries. </p>\n"}, {"tags": [], "owner": {"reputation": 3009, "user_id": 5833590, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153232467236962/picture?type=large", "display_name": "calestini", "link": "https://stackoverflow.com/users/5833590/calestini"}, "is_accepted": true, "score": 0, "last_activity_date": 1564009794, "creation_date": 1564009794, "answer_id": 57192350, "question_id": 57192086, "link": "https://stackoverflow.com/questions/57192086/extracting-portions-of-json-string-column-containing-multiple-rows-and-columns-i/57192350#57192350", "title": "Extracting portions of JSON string column containing multiple rows and columns in pandas", "body": "<p>Given the weird structure of the strings in row 2 and 3 and the final output desired below is one version:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>input_data = pd.DataFrame({'id':['0001','0002','0003'],\n                               'parameters':[\"{'product':['book','cat','fish'],'person':['me','you']}\",\n                                             \"'{'product':['book','cat'],'person':['me','you','us']}'\",\n                                             \"'{'product':['apple','snake','rabbit','octopus'],'person':['them','you','us','we','they']}'\"]})\n\ninput_data['parameters'] = input_data['parameters'].str.replace(\"'{\", '{').str.replace(\"'{\", '{').str.replace(\"}'\", '}')\ninput_data = input_data.join(pd.DataFrame(input_data['parameters'].apply(literal_eval).values.tolist()))\n</code></pre>\n\n<h2>Get length of objects for later input ids</h2>\n\n<pre class=\"lang-py prettyprint-override\"><code>products_len = input_data['product'].apply(len).values\npersons_len = input_data['person'].apply(len).values\n</code></pre>\n\n<h2>Spin each result as separate <code>df</code></h2>\n\n<pre class=\"lang-py prettyprint-override\"><code>## flatten x into a list of dictionaries\nvalues = input_data['person'].values.flatten().tolist()\nflat_results = [item for sublist in values for item in sublist]\n\n## reinsert a and b\nperson_df = pd.DataFrame(flat_results, columns = ['person'])\n\n\n## flatten x into a list of dictionaries\nvalues = input_data['product'].values.flatten().tolist()\nflat_results = [item for sublist in values for item in sublist]\n\n## reinsert a and b\nproduct_df = pd.DataFrame(flat_results, columns = ['product'])\n</code></pre>\n\n<h2>Append back the ids:</h2>\n\n<pre class=\"lang-py prettyprint-override\"><code>## person\nids = input_data['id'].repeat(persons_len).reset_index(drop=True)\nperson_df = person_df.join(ids)\n\n## product\nids = input_data['id'].repeat(products_len).reset_index(drop=True)\nproduct_df = product_df.join(ids)\n</code></pre>\n\n<h2>Result</h2>\n\n<pre class=\"lang-py prettyprint-override\"><code>person_df\nOut[57]: \n  person    id\n0     me  0001\n1    you  0001\n2     me  0002\n3    you  0002\n4     us  0002\n5   them  0003\n6    you  0003\n7     us  0003\n8     we  0003\n9   they  0003\n\nproduct_df\nOut[58]: \n   product    id\n0     book  0001\n1      cat  0001\n2     fish  0001\n3     book  0002\n4      cat  0002\n5    apple  0003\n6    snake  0003\n7   rabbit  0003\n8  octopus  0003\n</code></pre>\n"}], "owner": {"reputation": 679, "user_id": 3116753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HE70j.jpg?s=128&g=1", "display_name": "BlackHat", "link": "https://stackoverflow.com/users/3116753/blackhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 716, "favorite_count": 0, "accepted_answer_id": 57192350, "answer_count": 2, "score": 1, "last_activity_date": 1564011015, "creation_date": 1564007641, "last_edit_date": 1564011015, "question_id": 57192086, "link": "https://stackoverflow.com/questions/57192086/extracting-portions-of-json-string-column-containing-multiple-rows-and-columns-i", "title": "Extracting portions of JSON string column containing multiple rows and columns in pandas", "body": "<p>I have a dataframe where <code>parameters</code> column is JSON and contains multiple actual rows and columns:</p>\n\n<pre><code>input_data = pandas.DataFrame({'id':['0001','0002','0003'],\n                               'parameters':[\"{'product':['book','cat','fish'],'person':['me','you']}\",\n                                             \"'{'product':['book','cat'],'person':['me','you','us']}'\",\n                                             \"'{'product':['apple','snake','rabbit','octopus'],'person':['them','you','us','we','they']}'\"]})\n</code></pre>\n\n<p>... from which I'd like to extract the following data frames:</p>\n\n<pre><code>product_data = pandas.DataFrame({'id':['0001','0001','0001','0002','0002','0003','0003','0003','0003'],\n                                'product':['book','cat','fish','book','cat','apple','snake','rabbit','octopus']})\n\n\nperson_data = pandas.DataFrame({'id':['0001','0001','0002','0002','0002','0003','0003','0003','0003','0003'],\n                                'person':['me','you','me','you','us','them','you','us','we','they']})\n</code></pre>\n\n<p>Below is how I've utilized Regular Expressions to get me there. I doubt this is the best way to do it but here it goes:</p>\n\n<pre><code>for i in input_data.id.tolist():\n    s = ''.join(input_data[input_data.id == i]['parameters'])\n    product_string = re.search(r\"product':(.*?),'person\", str(s)).group(1)\n    product_data = pandas.DataFrame(product_string[1:-1].split(','))\n    person_string = re.search(r\"person':(.*?)}\", str(s)).group(1)\n    person_data = pandas.DataFrame(person_string[1:-1].split(','))\n    print(\"........\")\n    print(product_data)\n    print(\"........\")\n    print(person_data)\n</code></pre>\n\n<p>I'd like to learn a faster, more elegant, or wholesome solution that may capture unexpected nuances.</p>\n"}, {"tags": ["python", "flask", "server", "apache-kafka"], "comments": [{"owner": {"reputation": 1180, "user_id": 8620332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c048b642b942ede5b385fdab3dfd7723?s=128&d=identicon&r=PG&f=1", "display_name": "Magnus", "link": "https://stackoverflow.com/users/8620332/magnus"}, "edited": false, "score": 0, "creation_date": 1564023877, "post_id": 57192082, "comment_id": 100896359, "body": "Why do you need flask? Your python script can just read the data in and send it straight to a kafka topic. <a href=\"https://github.com/code-and-dogs/liveMaps/blob/master/busdata1.py\" rel=\"nofollow noreferrer\">Here&#39;s</a> some code that does that."}, {"owner": {"reputation": 181, "user_id": 5458890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384c2b1df607b924ad84319eb8361329?s=128&d=identicon&r=PG&f=1", "display_name": "abkf12", "link": "https://stackoverflow.com/users/5458890/abkf12"}, "reply_to_user": {"reputation": 1180, "user_id": 8620332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c048b642b942ede5b385fdab3dfd7723?s=128&d=identicon&r=PG&f=1", "display_name": "Magnus", "link": "https://stackoverflow.com/users/8620332/magnus"}, "edited": false, "score": 0, "creation_date": 1564082573, "post_id": 57192082, "comment_id": 100924234, "body": "omg thanks. But how can I control how much it outputs per second or minute?"}, {"owner": {"reputation": 1180, "user_id": 8620332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c048b642b942ede5b385fdab3dfd7723?s=128&d=identicon&r=PG&f=1", "display_name": "Magnus", "link": "https://stackoverflow.com/users/8620332/magnus"}, "edited": false, "score": 0, "creation_date": 1564084880, "post_id": 57192082, "comment_id": 100925150, "body": "In this particular code, data is being read straight from a JSON file on disk. To simulate a flow of data from a real stream, this code loops through each data point and applies a delay using <code>sleep(1)</code> between write of the producer to the topic. So, in this example, you can control how frequently the producer writes to the topic by changing the argument of <code>sleep</code>. The kafka consumer will read each message placed onto the topic as soon as it&#39;s computationally possible to do so."}], "owner": {"reputation": 181, "user_id": 5458890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384c2b1df607b924ad84319eb8361329?s=128&d=identicon&r=PG&f=1", "display_name": "abkf12", "link": "https://stackoverflow.com/users/5458890/abkf12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564007617, "creation_date": 1564007617, "question_id": 57192082, "link": "https://stackoverflow.com/questions/57192082/how-to-create-a-flask-server-to-generate-data-to-feed-into-kafka", "title": "How to create a flask server to generate data to feed into kafka?", "body": "<p>I'm trying to create a server that reads a large amount of data from the local machine or from s3 (will be json or some row-based), and then spit out each row to.. somewhere so that kafka can ingest this data.\nHow can I make this server with flask and control how much it outputs per second or minute?</p>\n"}, {"tags": ["python", "python-2.7", "dictionary", "flask", "flask-wtforms"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1564007718, "post_id": 57192056, "comment_id": 100893657, "body": "You&#39;re not using wtforms here. It&#39;s not tough to do, but you aren&#39;t using the tech you say you are"}, {"owner": {"reputation": 384, "user_id": 7934489, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/10c1efadb6cb4d50ff4e5f4a445bc61a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7934489/alex"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1564009514, "post_id": 57192056, "comment_id": 100894013, "body": "@roganjosh I am intending to use it but want to use it with a dictionary."}], "answers": [{"comments": [{"owner": {"reputation": 384, "user_id": 7934489, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/10c1efadb6cb4d50ff4e5f4a445bc61a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7934489/alex"}, "edited": false, "score": 0, "creation_date": 1564073656, "post_id": 57199174, "comment_id": 100920339, "body": "I am hopeful at this response--seems like what I may need. Will play with this now."}, {"owner": {"reputation": 384, "user_id": 7934489, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/10c1efadb6cb4d50ff4e5f4a445bc61a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7934489/alex"}, "edited": false, "score": 0, "creation_date": 1564162548, "post_id": 57199174, "comment_id": 100953797, "body": "I get NoneType is not iterable in the first if statement where I assign choices for the second form."}], "tags": [], "owner": {"reputation": 329, "user_id": 9082794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18e05d3ae757d484008312637d4411aa?s=128&d=identicon&r=PG&f=1", "display_name": "Jerome Paddick", "link": "https://stackoverflow.com/users/9082794/jerome-paddick"}, "is_accepted": true, "score": 1, "last_activity_date": 1564184545, "last_edit_date": 1564184545, "creation_date": 1564048436, "answer_id": 57199174, "question_id": 57192056, "link": "https://stackoverflow.com/questions/57192056/how-can-i-create-a-dynamic-select-form-using-a-dictionary-in-flask/57199174#57199174", "title": "How can I create a dynamic select form using a dictionary in Flask?", "body": "<p>I did something similar recently by using multiple forms in the same template with multiple render_template calls. Where each form is submitted on change and populates the next form.</p>\n\n<p>If you dont want to call the db multiple times you could store it in the session variable.</p>\n\n<p>this isnt tested, but something along the lines of:</p>\n\n<pre><code>class Firm(FlaskForm):\n    firm = SelectField('firm', coerce=str, validators=[InputRequired()])\nclass Prod(FlaskForm):\n    prod = SelectField('prod', coerce=str, validators=[InputRequired()])\nclass Spot(FlaskForm):\n    spot = SelectField('spot', coerce=str, validators=[InputRequired()])\n\n@app.route\ndef route(): \n\n    if form1.validate_on_submit():\n        form2.prod.choices = session.data.prodlistfunction\n        return render_template(\"/\", form1=form1, form2=form2, form3=form3)\n\n    if form2.validate_on_submit():\n        form3.spot.choices = session.data.spotlistfunction\n        return render_template(\"/\", form1=form1, form2=form2, form3=form3)\n\n    if form3.validate_on_submit():\n        do.something()\n\n    data=db.call()\n    session.data = data\n    form1 = Firm()\n    form2 = Prod()\n    form3 = Spot()\n    form1.choices = data.somefunction()  \n    # give other forms blank choices to start off with\n    form2.choices = [\"\",\"\"]\n    form3.choices = [\"\",\"\"]   \n\n    return render_template(\"/\", form1=form1, form2=form2, form3=form3)\n</code></pre>\n\n<p>and then for the template something like</p>\n\n<pre><code>&lt;form&gt;\n{{ form1.csrf_token }}\n{{ form1.firm(onchange='this.form.submit()') }}\n&lt;/form&gt;\n&lt;form&gt;\n{{ form2.csrf_token }}\n{{ form2.prod(onchange='this.form.submit()') }}\n&lt;/form&gt;\n&lt;form&gt;\n{{ form3.csrf_token }}\n{{ form3.spot(onchange='this.form.submit()') }}\n&lt;/form&gt;\n</code></pre>\n"}], "owner": {"reputation": 384, "user_id": 7934489, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/10c1efadb6cb4d50ff4e5f4a445bc61a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7934489/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 841, "favorite_count": 0, "accepted_answer_id": 57199174, "answer_count": 1, "score": 0, "last_activity_date": 1564184545, "creation_date": 1564007407, "question_id": 57192056, "link": "https://stackoverflow.com/questions/57192056/how-can-i-create-a-dynamic-select-form-using-a-dictionary-in-flask", "title": "How can I create a dynamic select form using a dictionary in Flask?", "body": "<p><strong>I have a list within a dictionary within a dictionary that is structured like so:</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>spotDictionary = {Firm, {Product, [Spot]}}\n</code></pre>\n\n<p>I want to have 3 select fields Firm, Product, Spot. From left to right the user should select one from each. <strong>Each select field should dynamically populate the choices with those that correspond with the Firm or Product.</strong></p>\n\n<p>In other words, when I select FirmA I should only see FirmA's products. When I select FirmA's corresponding products, I should only get the Spots for that product. Once all 3 select fields are populated, the user may submit the form.</p>\n\n<p>Below is how I created the list of Firms that I use as my first select fields (Firms) choices. I would like to use a similar logic in the select fields that follow. <strong>I do not want to query the database since I already have a spotDictionary.</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>firmList = sorted([[i, i] for i in spotDictionary.keys()]\n</code></pre>\n\n<p><strong>Once a user selects a firm, the next select field's options should be that firms products and that firms products only. This should be the same for the Spot once the user selects a Product.</strong></p>\n"}, {"tags": ["python", "regression", "linear-regression"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 2, "creation_date": 1564007966, "post_id": 57192055, "comment_id": 100893704, "body": "Theory questions like this are more on-topic for the <a href=\"https://stats.stackexchange.com\">Cross Validated</a> or <a href=\"https://datascience.stackexchange.com\">Data Science</a> stack sites. You may get better answers there."}, {"owner": {"reputation": 441, "user_id": 3777839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1552277125/picture?type=large", "display_name": "meesinlid", "link": "https://stackoverflow.com/users/3777839/meesinlid"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1564009063, "post_id": 57192055, "comment_id": 100893915, "body": "Thank you for your suggestion."}, {"owner": {"reputation": 2142, "user_id": 3308951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUOnA.png?s=128&g=1", "display_name": "SyntaxVoid supports Monica", "link": "https://stackoverflow.com/users/3308951/syntaxvoid-supports-monica"}, "edited": false, "score": 2, "creation_date": 1564013499, "post_id": 57192055, "comment_id": 100894693, "body": "You can implement your own version of k-means. Instead of grouping by distance to cluster center, group by distance to a certain line. You might assign random clusters to each point initially. Then, find the best-fit line for each cluster. Go through all of your points and assign each point to the cluster of the line it&#39;s closest to. Then find the best-fit again and repeat."}], "owner": {"reputation": 441, "user_id": 3777839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1552277125/picture?type=large", "display_name": "meesinlid", "link": "https://stackoverflow.com/users/3777839/meesinlid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564053455, "creation_date": 1564007396, "last_edit_date": 1564053455, "question_id": 57192055, "link": "https://stackoverflow.com/questions/57192055/how-to-identify-multiple-lines-clusters-in-a-single-dataset", "title": "How to identify multiple lines/clusters in a single dataset", "body": "<p>I'm currently struggling to wrap my head around how multi-linear regression could be done to find separate sets of linear models in a single data set. I can perform regression on single data set for a single regressor and coef with no problem, but what if there are a known-number of lines existing in a single data space?</p>\n\n<p>My first approach was to use hierarchical clustering to identify the points using ML first, but it doesn't seem to capture individual \ncluster variance in Euclidean space as expected. My second trial was KMeans, which still relies on Euclidean distance so it creates clusters with radii. My last thought process led to Kmedian, but at this point I was wondering what other people might think regarding this problem.\nIf this is the right direction, I know I would have to project points in a better space(i.e. an axis that captures more-or most- variance) before I apply these methods.</p>\n\n<p>I would appreciate any comments or input in any shape or form.</p>\n\n<p>Thank you,</p>\n\n<p>3-line summary:\nLinear regression on dataset with multiple lines\nClustering first, then multiple single linear regression?\nor have you guys come across a module for this such thing?</p>\n\n<p>I would truly appreciate any insights;</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 10664, "user_id": 475229, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0952c4a2c08421aecb397d3a81545f6e?s=128&d=identicon&r=PG", "display_name": "jgritty", "link": "https://stackoverflow.com/users/475229/jgritty"}, "edited": false, "score": 0, "creation_date": 1564007661, "post_id": 57192029, "comment_id": 100893636, "body": "I would break this into two problems, first you have to find the repeated words, then you have to remove the additional duplicates. I wouldn&#39;t solve either problem with regex."}], "answers": [{"tags": [], "owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": true, "score": 1, "last_activity_date": 1564009537, "last_edit_date": 1564009537, "creation_date": 1564007467, "answer_id": 57192069, "question_id": 57192029, "link": "https://stackoverflow.com/questions/57192029/how-to-use-regex-to-only-keep-first-n-repeated-words/57192069#57192069", "title": "How to use regex to only keep first n repeated words", "body": "<p>One option could be to use a capturing group with a backreference and use that in the replacement.</p>\n\n<pre><code>((\\w+)(?: \\2){2})(?: \\2)*\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n<li><code>(</code> Capture group 1\n\n<ul>\n<li><code>(\\w+)</code> capture group 2, match 1+ word chars (The example data only uses word characters. To make sure they are no part of a larger word use a word boundary <code>\\b</code>)</li>\n<li><code>(?: \\2){2}</code> Repeat 2 times matching a space and a backreference to group 2.  Instead of a single space you could use <code>[ \\t]+</code> to match 1+ spaces or tabs or use <code>\\s+</code> to match 1+ whitespace chars. (Note that that would also match a newline)</li>\n</ul></li>\n<li><code>)</code> Close group 1</li>\n<li><code>(?: \\2)*</code> Match 0+ times a space and a backreference to group 2 to match the same words that you want to remove</li>\n</ul>\n\n<p><a href=\"https://regex101.com/r/N642V6/1\" rel=\"nofollow noreferrer\">Regex demo</a> | <a href=\"https://ideone.com/LjhY6y\" rel=\"nofollow noreferrer\">Python demo</a></p>\n\n<p>For example</p>\n\n<pre><code>import re\n\nregex = r\"((\\w+)(?: \\2){2})(?: \\2)*\"\ns = \"ok ok, it is very very very very very hard\"\nresult = re.sub(regex, r\"\\1\", s)\n\nif result:\n    print (result)\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>ok ok, it is very very very hard\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 1, "creation_date": 1564008680, "post_id": 57192083, "comment_id": 100893835, "body": "Nice pattern, can you spot the similarities :)"}, {"owner": {"reputation": 3765, "user_id": 5828883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/146cf80315cf243c6e1d6bc64cfdb454?s=128&d=identicon&r=PG", "display_name": "RootTwo", "link": "https://stackoverflow.com/users/5828883/roottwo"}, "edited": false, "score": 0, "creation_date": 1564022123, "post_id": 57192083, "comment_id": 100896094, "body": "Change <code>\\s+</code> to <code>\\W+</code> and it will work for input like &quot;ok ok, it is very, very, very, very, very hard"}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 1, "last_activity_date": 1564007617, "creation_date": 1564007617, "answer_id": 57192083, "question_id": 57192029, "link": "https://stackoverflow.com/questions/57192029/how-to-use-regex-to-only-keep-first-n-repeated-words/57192083#57192083", "title": "How to use regex to only keep first n repeated words", "body": "<p>You can group a word and use a backreference to refer to it to ensure that it repeats for more than 2 times:</p>\n\n<pre><code>import re\nprint(re.sub(r'\\b((\\w+)(?:\\s+\\2){2})(?:\\s+\\2)+\\b', r'\\1', input))\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>ok ok, it is very very very hard\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 0, "last_activity_date": 1564008433, "creation_date": 1564008433, "answer_id": 57192186, "question_id": 57192029, "link": "https://stackoverflow.com/questions/57192029/how-to-use-regex-to-only-keep-first-n-repeated-words/57192186#57192186", "title": "How to use regex to only keep first n repeated words", "body": "<p>One solution with <code>re.sub</code> with custom function:</p>\n\n<pre><code>s = 'ok ok, it is very very very very very hard'\n\ndef replace(n=3):\n    last_word, cnt = '', 0\n    current_word = yield\n\n    while True:\n        if last_word == current_word:\n            cnt += 1\n        else:\n            cnt = 0\n\n        last_word = current_word\n\n        if cnt &gt;= n:\n            current_word = yield ''\n        else:\n            current_word = yield current_word\n\nimport re\n\nreplacer = replace()\nnext(replacer)\nprint(re.sub(r'\\s*[\\w]+\\s*', lambda g: replacer.send(g.group(0)), s))\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>ok ok, it is very very very hard\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 10583715, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xS1wX.jpg?s=128&g=1", "display_name": "Xiaoyi Zhang", "link": "https://stackoverflow.com/users/10583715/xiaoyi-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57192069, "answer_count": 3, "score": 1, "last_activity_date": 1564020531, "creation_date": 1564007179, "last_edit_date": 1564020531, "question_id": 57192029, "link": "https://stackoverflow.com/questions/57192029/how-to-use-regex-to-only-keep-first-n-repeated-words", "title": "How to use regex to only keep first n repeated words", "body": "<p>If I have an input sentence</p>\n\n<pre><code>input = 'ok ok, it is very very very very very hard'\n</code></pre>\n\n<p>and what I want to do is to only keep the first three replica for any repeated word:</p>\n\n<pre><code>output = 'ok ok, it is very very very hard'\n</code></pre>\n\n<p>How can I achieve this with <code>re</code> or <code>regex</code> module in python?</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "edited": false, "score": 0, "creation_date": 1564007656, "post_id": 57192026, "comment_id": 100893634, "body": "Tensorflow version? What is originally needed by the library (what type)? Have you tried with version <code>2.0</code> (which has eager execution and could be easily casted to <code>numpy</code> and other data types)?"}, {"owner": {"reputation": 1083, "user_id": 6458245, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2ec6741905a7fde013a7c33ecf1a370f?s=128&d=identicon&r=PG&f=1", "display_name": "JobHunter69", "link": "https://stackoverflow.com/users/6458245/jobhunter69"}, "reply_to_user": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "edited": false, "score": 0, "creation_date": 1564015624, "post_id": 57192026, "comment_id": 100895020, "body": "@SzymonMaszke It&#39;s tensorflow version 1.14.0 Is eager execution a requirement for this?"}], "owner": {"reputation": 1083, "user_id": 6458245, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2ec6741905a7fde013a7c33ecf1a370f?s=128&d=identicon&r=PG&f=1", "display_name": "JobHunter69", "link": "https://stackoverflow.com/users/6458245/jobhunter69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564007165, "creation_date": 1564007165, "question_id": 57192026, "link": "https://stackoverflow.com/questions/57192026/how-do-i-mix-non-tensorflow-code-with-tensorflow-ops", "title": "How do I mix Non-Tensorflow code with Tensorflow ops?", "body": "<p>I am trying to use a third party library (neural renderer) in my code alongside Tensorflow. This library has a function which I would like to run between Tensorflow executions. However, whenever I feed a placeholder into the function, it just gives me this problem:</p>\n\n<pre><code>AttributeError: 'Tensor' object has no attribute 'transpose'\n</code></pre>\n\n<p>How do I combine a Tensorflow session and a non-Tensorflow function? For example, how do I do something like this:</p>\n\n<pre><code>input = not_tensorflow(foo, bar)\nop1 = tf.assign(var, input)\nsess.run(op1, feed_dict={foo:stuff})\n</code></pre>\n\n<p>I thought I would make foo a simple Placeholder, but apparently that doesn't work.</p>\n"}, {"tags": ["python", "inheritance"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1564007160, "post_id": 57191987, "comment_id": 100893494, "body": "What exactly is your question? You need to provide some form of a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Note, you&#39;ve written no methods here, just normal functions. Try to write a small example that doesn&#39;t have anything to do with your game but demonstrates the issue. It sounds like you need to <i>return some value</i> from your function, or use global variables (which is very bad design in this case)."}, {"owner": {"reputation": 426, "user_id": 11753371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TzP6pGj-mhc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfatPEOhXByRpmq1h85P_wfdRxrIw/photo.jpg?sz=128", "display_name": "deon cagadoes", "link": "https://stackoverflow.com/users/11753371/deon-cagadoes"}, "edited": false, "score": 0, "creation_date": 1564007401, "post_id": 57191987, "comment_id": 100893557, "body": "For do it 1st make <code>currentlives</code> <b>global</b>, and later on the condition make <code>currentlives -= 1</code>"}, {"owner": {"reputation": 3515, "user_id": 3574628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W5BJ2.jpg?s=128&g=1", "display_name": "luther", "link": "https://stackoverflow.com/users/3574628/luther"}, "edited": false, "score": 1, "creation_date": 1564007587, "post_id": 57191987, "comment_id": 100893615, "body": "I notice the <code>combat</code> function stores a value to the local variable <code>fightResult</code>, but never does anything with it."}, {"owner": {"reputation": 19, "user_id": 10524519, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210149017962360/picture?type=large", "display_name": "Jeff Ryan", "link": "https://stackoverflow.com/users/10524519/jeff-ryan"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1564012923, "post_id": 57191987, "comment_id": 100894598, "body": "Hey everyone, thank you for the responses. @juanpa.arrivillaga sorry for being too vague. Here is what I asking for help with. In the function &quot;combat&quot;, it auto-generates a dice roll for the player and for the demon. If the demon wins, I want to decrement a life from the player. I have a global variable of &quot;currentLives&quot;. I would ideally like to move the global variable into a seperate function but at this point I just want to get one issue handled.   What is happening is that when I kill the demon, currentLives doesn&#39;t decrement like it&#39;s expected."}, {"owner": {"reputation": 19, "user_id": 10524519, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210149017962360/picture?type=large", "display_name": "Jeff Ryan", "link": "https://stackoverflow.com/users/10524519/jeff-ryan"}, "reply_to_user": {"reputation": 426, "user_id": 11753371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TzP6pGj-mhc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfatPEOhXByRpmq1h85P_wfdRxrIw/photo.jpg?sz=128", "display_name": "deon cagadoes", "link": "https://stackoverflow.com/users/11753371/deon-cagadoes"}, "edited": false, "score": 1, "creation_date": 1564077115, "post_id": 57191987, "comment_id": 100921857, "body": "@deoncagadoes Thank for the help. I know it&#39;s not good to use global vars but your suggestion worked. Thanks again!"}], "owner": {"reputation": 19, "user_id": 10524519, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210149017962360/picture?type=large", "display_name": "Jeff Ryan", "link": "https://stackoverflow.com/users/10524519/jeff-ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564006852, "creation_date": 1564006852, "question_id": 57191987, "link": "https://stackoverflow.com/questions/57191987/accessing-method-variables", "title": "Accessing method variables", "body": "<p>I've created a house escape game that has demons in it. When you enter a room with a demon, I call the combat method. Everything is working fine except I'm having issues understanding how to decrement lives when killed in combat. The combat is dice-based. I've tried using a boolean flag to mark when a player has been killed to decrement but I can't seem to access that result to then decrement the life for the player. Any help is appreciated. Thank you stack community. </p>\n\n<p>I've tried to also handle the life decrementation inside of the method but that doesn't work for me neither when I call the variable outside of the combat method. </p>\n\n<pre><code>import random\n\n\ndef showInstructions():\n    # Display main menu and the commands to use in the game\n    print('''\nHill House\n----------\nCommands:\ngo [direction]\nget [item] \n    ''')\n\n\ndef showStatus():\n    # Display the current player status\n    print('-----------------------------')\n    print('You are in the ' + currentRoom + ' with ' + str(currentLives) + ' lives')\n    # Display the items currently in players inventory\n    print('Inventory : ' + str(inventory))\n    # This if statement displays items in the room should there be any\n    if \"item\" in rooms[currentRoom]:\n        print('You see a ' + rooms[currentRoom]['item'])\n        print(\"--------------------------------------\")\n\n\ndef player():\n    currentLives = 5\n    return currentLives\n\n\ndef combat():\n    # combat function\n    print('DEFEND YOURSELF OR ATTEMPT TO FLEE!')\n    print('''   \n-----------------------------------------\nCommands:\nTo fight the Demon - roll \nTo attempt to escape the Demom - flee \n    ''')\n    playersCommand = input('&gt;')\n    demonsRoll = random.randrange(10)\n    if playersCommand == 'roll':\n        playersRoll = random.randrange(10)\n        if playersRoll &gt;= demonsRoll:\n            print('The Demon has rolled a ' + str(demonsRoll) + ' and you rolled a '\n                  + str(playersRoll) + '. You have killed the demon!')\n            del rooms[currentRoom]['demon']\n            fightResult = True\n\n        else:\n            print('The Demon has rolled a ' + str(demonsRoll) + ' and you rolled a '\n                  + str(playersRoll) + '. You have been killed!')\n            fightResult = False\n\n    else:\n        playersCommand == 'flee'\n        playersRoll = random.randrange(10)\n        if playersRoll &gt;= demonsRoll:\n            print('The Demon has rolled a ' + str(demonsRoll) + ' and you rolled a '\n                  + str(playersRoll) + '. YOU HAVE GOT AWAY!')\n        else:\n            print('The Demon has rolled a ' + str(demonsRoll) + ' and you rolled a '\n                  + str(playersRoll) + '. You have been killed!')\n        del inventory[:]\n        fightResult = False\n\n\n# inventory that is empty\ninventory = []\n\n# Starting lives\ncurrentLives = 5\n\n# Rooms\nrooms = {\n\n    'Master Bathroom': {\n        'west': 'Master Bedroom',\n        'item': 'Green Spirit Stone',\n        'demon': 'demon'\n    },\n    'Master Bedroom': {\n        'east': 'Master Bathroom',\n        'west': 'Up Stairs',\n        'item': 'Glowing Red Crystal'\n    },\n    'Guest Bedroom': {\n        'west': 'Library'\n    },\n    'Library': {\n        'north': 'Up Stairs',\n        'east': 'Guest Bedroom',\n        'item': 'Mirror Stone'\n    },\n    'Up Stairs': {\n        'north': 'Ball Room',\n        'east': 'Master Bedroom',\n        'west': 'Hall',\n        'south': 'Library'\n    },\n    'Ball Room': {\n        'east': 'Dinning Room',\n        'south': 'Up Stairs',\n        'west': 'Dinning Room',\n        'item': 'Pale Purple Crystal'\n    },\n    'Hall': {\n        'north': 'Dinning Room',\n        'east': 'Exit',\n        'west': 'Up Stairs',\n        'south': 'Kitchen'\n    },\n    'Dinning Room': {\n        'east': 'Ball Room',\n        'south': 'Hall',\n        'item': 'Tall Tale Heart'\n    },\n    'Kitchen': {\n        'north': 'Hall',\n        'item': 'sacred water',\n        'demon': 'demon'\n    },\n    'Exit': {\n        'east': 'Hall'\n    }\n}\n# The defined starting point\ncurrentRoom = 'Hall'\n\n# Display the instructions\nshowInstructions()\n\n# game loop\nwhile True:\n\n\n    showStatus()\n\n    # get the player's position\n    move = ''\n    while move == '':\n        move = input('&gt;')\n\n    move = move.split()\n\n    # if they type 'go' first\n    if move[0] == 'go':\n        # check that they are allowed wherever they want to go\n        if move[1] in rooms[currentRoom]:\n            # set the current room to the new room\n            currentRoom = rooms[currentRoom][move[1]]\n        # there is no door (link) to the new room\n        else:\n            print('You can\\'t go that way!')\n\n    # if they type 'get' first\n    if move[0] == 'get':\n        # if the room contains an item, and the item is the one they want to get\n        if \"item\" in rooms[currentRoom] and move[1] in rooms[currentRoom]['item']:\n            # add the item to their inventory\n            inventory += [move[1]]\n            # display a helpful message\n            print(move[1] + ' got!')\n            # delete the item from the room\n            del rooms[currentRoom]['item']\n        # otherwise, if the item isn't there to get\n        else:\n            # tell them they can't get it\n            print('Can\\'t get ' + move[1] + '!')\n\n    if 'demon' in rooms[currentRoom]:\n        print(\"YOUR UNDER ATTACK BY A DEMON!\")\n        print('')\n        combat()\n</code></pre>\n"}, {"tags": ["python", "pandas", "date"], "answers": [{"tags": [], "owner": {"reputation": 1707, "user_id": 11832127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zsq7r.png?s=128&g=1", "display_name": "ndclt", "link": "https://stackoverflow.com/users/11832127/ndclt"}, "is_accepted": true, "score": 1, "last_activity_date": 1564008969, "creation_date": 1564008969, "answer_id": 57192251, "question_id": 57191952, "link": "https://stackoverflow.com/questions/57191952/how-to-parse-irregular-date-formats-in-pandas/57192251#57192251", "title": "How to parse irregular date formats in pandas?", "body": "<p>Line by line, lots of your dates works:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; pd.to_datetime('19.8.2017, 21:23:32')\nTimestamp('2017-08-19 21:23:32')\n</code></pre>\n\n<p>But there are many matters:</p>\n\n<ul>\n<li>as your format is irregular, pandas cannot guess if 01-02-2019 is the first of february 2019 or the second of january 2019, I don't know if you can,</li>\n<li>some of your example cannot be converted into date <code>Saturday, 18. May</code>: which year?</li>\n<li>there are month and date in different languages (aprile seems Italian, Samstag is German)</li>\n<li>some of your example works without the parenthesis content:</li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; pd.to_datetime('Sat Jun 18 2011 19:46:46 GMT+0200')  # works\nTimestamp('2011-06-18 19:46:46-0200', tz='pytz.FixedOffset(-120)')\n\n&gt;&gt;&gt; pd.to_datetime('Sat Jun 18 2011 19:46:46 GMT+0200 (Romance Daylight Time) ')  # doesn't work.\n...\nValueError: ('Unknown string format:', 'Sat Jun 18 2011 19:46:46 GMT+0200 (Romance Daylight Time) ')\n</code></pre>\n\n<p>It is sure that you cannot have all the date into timestamp, I would try to create a new column with the correctly parsed date in timestamp and the other saved as <code>NaT</code>.</p>\n\n<p>For example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>date\n02-01-2019\nSaturday, 18. May\n</code></pre>\n\n<p>will become:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>date               new date\n02-01-2019         Timestamp('2019-01-02 00:00:00.00)\nSaturday, 18. May  NaT\n</code></pre>\n\n<p>For this I would  delete the parenthesis in the initial column:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df2 = df.assign(\n    date2=lambda x: x['date'].str.split('(')[0],\n    new_date=lambda x: x['date2'].apply(lambda y: pd.to_datetime(y, errors='coerce'), axis='columns')) # apply the function row by row\n# This will work with python &gt;= 3.6\n</code></pre>\n\n<p>After, you can see what's remaining with keeping <code>NaT</code> values.</p>\n\n<p>For translation, you can try to replace words but it will be really long.</p>\n\n<p>This is really slow (due to the <code>apply</code> row by row) but if your data are not consistent you cannot work directly on a column.</p>\n\n<p>I hope it will help.</p>\n"}], "owner": {"reputation": 87, "user_id": 11477736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c887e9f6951a89231239b33207dffea?s=128&d=identicon&r=PG&f=1", "display_name": "lvzxy", "link": "https://stackoverflow.com/users/11477736/lvzxy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 57192251, "answer_count": 1, "score": 1, "last_activity_date": 1564008969, "creation_date": 1564006622, "last_edit_date": 1564008427, "question_id": 57191952, "link": "https://stackoverflow.com/questions/57191952/how-to-parse-irregular-date-formats-in-pandas", "title": "How to parse irregular date formats in pandas?", "body": "<p>I'm parsing a date column that contains irregular date formats that wouldn't be interpreted by pandas'. Dates include different languages for days, months, and years as well as varying formats. The date entries often include timestamps as well. (Bonus: Would separating them by string/regex with lambda/loops be the fastest method?) What's the best option and workflow to tackle these several tens of thousands of date entries? </p>\n\n<p>The entries unknown to <code>pandas</code> and <code>dateutil.parser</code>. </p>\n\n<p>Examples include:</p>\n\n<pre><code>19.8.2017, 21:23:32 \n31/05/2015 19:41:56   \nSaturday, 18. May  \n11 - 15 July 2001 \n2019/4/28 \u4e0b\u53486:29:28 \n1 JuneMay 2000    \n19 aprile 2008 21:16:37 GMT+02:00 \nSamstag, 15. Mai 2010 20:55:10   \nSo 23 Jun 2007 23:45 CEST                                       \n28 August 1998                                                 \n30 June 2001    \n1 \u041d\u043e\u044f\u0431\u0440\u044c 2008 \u0433. 18:46:59  \nSat Jun 18 2011 19:46:46 GMT+0200 (Romance Daylight Time) \nMay-28-11 6:56:08 PM\nSat Jun 26 2010 21:55:54 GMT+0200 (West-Europa (zomertijd))\nluned\u00ec 5 maggio 2008 9.30.33 \n</code></pre>\n\n<blockquote>\n  <p>\"ValueError: ('Unknown string format:', '1 JuneMay 2000')\"</p>\n</blockquote>\n\n<p>I realize this may be a cumbersome and undesirable task. Luckily the dates are currently nonessential to my project so they may be left alone, but a solution would be favorable. Any and all replies are appreciated, thank you. </p>\n"}, {"tags": ["python", "python-3.x", "pandas", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11633672, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KZzF1SqTQ2o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_qNl4csWPu27HzPdHK2z11mfTqg/mo/photo.jpg?sz=128", "display_name": "Cajorgen", "link": "https://stackoverflow.com/users/11633672/cajorgen"}, "edited": false, "score": 0, "creation_date": 1564012149, "post_id": 57192017, "comment_id": 100894459, "body": "Wow that fixed it. Thank You!"}], "tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": true, "score": 1, "last_activity_date": 1564007057, "creation_date": 1564007057, "answer_id": 57192017, "question_id": 57191944, "link": "https://stackoverflow.com/questions/57191944/iterate-through-dataframe-categorical-columns-to-create-subplots/57192017#57192017", "title": "Iterate through DataFrame categorical columns to create subplots", "body": "<p>I am confused with your <code>plot_func</code>. Remove this and just directly plot using <code>ax.plot(X, y)</code>. The modified line is highlighted by a comment</p>\n\n<pre><code>fig, axs = plt.subplots(2, 2, figsize=(30,24))\naxs = axs.flatten()\n\nfor ax, category in zip(axs, cat_list):\n    df_grouped = grouping_for_graphs(df,x_col, y_col,category,agg_func)\n    x_col = df_grouped.columns[0]\n    y_col = df_grouped.columns[-1]\n    category = str(list(df_grouped.columns.drop([x_lab, y_lab]))[0])\n    for feature in list(df_grouped[category].unique()):\n        X = df_grouped[df_grouped[category] == feature][x_col]\n        y = df_grouped[df_grouped[category] == feature][y_col]\n        ax.plot(X,y) # &lt;--- Modified here\n        ax.set_xlabel(x_col)\n        ax.set_ylabel(y_col)\n        ax.set_title(feature)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11633672, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KZzF1SqTQ2o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_qNl4csWPu27HzPdHK2z11mfTqg/mo/photo.jpg?sz=128", "display_name": "Cajorgen", "link": "https://stackoverflow.com/users/11633672/cajorgen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 668, "favorite_count": 0, "accepted_answer_id": 57192017, "answer_count": 1, "score": 1, "last_activity_date": 1564007057, "creation_date": 1564006568, "question_id": 57191944, "link": "https://stackoverflow.com/questions/57191944/iterate-through-dataframe-categorical-columns-to-create-subplots", "title": "Iterate through DataFrame categorical columns to create subplots", "body": "<p>I am trying to create a grid of Subplots for a predetermined x &amp; y data. The functions should iterate through a pandas DataFrame, identify Categorical variables and plot the x &amp; y data with a line for each level of a given categorial variable. The number of plots is equal to the number of Categorical variables, and the number of lines on each plot should be reflective of the number of categories for that variable.   </p>\n\n<p>I initially tried to group the Dataframe in a For loop on a given categorical  variable, but I have had some mixed results. I think My issue is in how I am assigning what axis the lines are getting drawn on.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\ndef grouping_for_graphs(df,x_col, y_col,category,func):\n    '''\n    funtion to group dataframe given a variable and \n    aggregation function\n\n    '''\n    X = df[x_col].name\n    y = df[y_col].name\n    category = df[category].name\n\n    df_grouped = df.groupby([X, category])[y].apply(func)\n    return df_grouped.reset_index()\n\n\n# create a list of categorical variables to plot\ncat_list = []\ncol_list = list(df.select_dtypes(include = ['object']).columns)\n\nfor col in col_list:\n    if len(df[col].unique()) &lt; 7:\n        cat_list.append(col)\n\n\n# create plots and axes\nfig, axs = plt.subplots(2, 2, figsize=(30,24))\naxs = axs.flatten()\n# pick plot function\nplot_func = plt.plot\n\n# plot this\nfor ax, category in zip(axs, cat_list):\n    df_grouped = grouping_for_graphs(df,x_col, y_col,category,agg_func)\n    x_col = df_grouped.columns[0]\n    y_col = df_grouped.columns[-1]\n    category = str(list(df_grouped.columns.drop([x_lab, y_lab]))[0])\n    for feature in list(df_grouped[category].unique()):\n        X = df_grouped[df_grouped[category] == feature][x_col]\n        y = df_grouped[df_grouped[category] == feature][y_col]\n        ax.plot = plot_func(X,y)\n        ax.set_xlabel(x_col)\n        ax.set_ylabel(y_col)\n        ax.set_title(feature)\n\n</code></pre>\n\n<p>Other than getting an error that ax.plot is a 'list' object and is not callable, all the lines drawn are put on the final plot of the subplots.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 611, "user_id": 7747988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHOW3.jpg?s=128&g=1", "display_name": "Bob White", "link": "https://stackoverflow.com/users/7747988/bob-white"}, "edited": false, "score": 1, "creation_date": 1564007099, "post_id": 57191934, "comment_id": 100893468, "body": "look at this could be helpfull <a href=\"https://stackoverflow.com/questions/9001509/how-can-i-sort-a-dictionary-by-key\" title=\"how can i sort a dictionary by key\">stackoverflow.com/questions/9001509/&hellip;</a>"}, {"owner": {"reputation": 611, "user_id": 7747988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHOW3.jpg?s=128&g=1", "display_name": "Bob White", "link": "https://stackoverflow.com/users/7747988/bob-white"}, "edited": false, "score": 0, "creation_date": 1564007194, "post_id": 57191934, "comment_id": 100893507, "body": "please try to set data to dictionary by this way StudDict[StudToAdd] = GradesToAdd"}, {"owner": {"reputation": 2939, "user_id": 4711754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c25453f6a114ebb66aefcc27b0ab44d1?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Allen", "link": "https://stackoverflow.com/users/4711754/andrew-allen"}, "edited": false, "score": 0, "creation_date": 1564007514, "post_id": 57191934, "comment_id": 100893595, "body": "it&#39;s best to follow PEP 8 naming conventions, for functions+variables use lowercase and separated by underscores if necessary - <a href=\"https://www.python.org/dev/peps/pep-0008/#function-and-variable-names\" rel=\"nofollow noreferrer\">python.org/dev/peps/pep-0008/#function-and-variable-names</a>"}, {"owner": {"reputation": 73, "user_id": 11831138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff90cf636e39e2387c0219019c2ff36?s=128&d=identicon&r=PG&f=1", "display_name": "elder lee", "link": "https://stackoverflow.com/users/11831138/elder-lee"}, "edited": false, "score": 0, "creation_date": 1564042779, "post_id": 57191934, "comment_id": 100903204, "body": "Thanks everyone,all your suggestions worked,i appreciate this community"}], "answers": [{"comments": [{"owner": {"reputation": 1529, "user_id": 1936321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/634d8319091a309ada6d6c47c679eee6?s=128&d=identicon&r=PG", "display_name": "Sazzy", "link": "https://stackoverflow.com/users/1936321/sazzy"}, "reply_to_user": {"reputation": 73, "user_id": 11831138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff90cf636e39e2387c0219019c2ff36?s=128&d=identicon&r=PG&f=1", "display_name": "elder lee", "link": "https://stackoverflow.com/users/11831138/elder-lee"}, "edited": false, "score": 0, "creation_date": 1564063276, "post_id": 57192058, "comment_id": 100914903, "body": "You&#39;re welcome! Consider marking the issue as solved :)"}], "tags": [], "owner": {"reputation": 1529, "user_id": 1936321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/634d8319091a309ada6d6c47c679eee6?s=128&d=identicon&r=PG", "display_name": "Sazzy", "link": "https://stackoverflow.com/users/1936321/sazzy"}, "is_accepted": false, "score": 1, "last_activity_date": 1564007408, "creation_date": 1564007408, "answer_id": 57192058, "question_id": 57191934, "link": "https://stackoverflow.com/questions/57191934/how-to-add-new-details-to-dictionary-with-user-input-through-cmd/57192058#57192058", "title": "How to add new details to dictionary with user input through CMD", "body": "<p>Try using the <code>defaultdict</code>, as it seems perfect for what you are trying to do:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from collections import defaultdict\n\nStudDict = defaultdict(list)\n# Optionally, provide existing data to the object:\n# StudDict = defaultdict(list, {existing_dict_with_data})\n\ndef add_student():\n    ...\n    StudDict[StudToAdd].append(GradesToAdd)\n</code></pre>\n\n<p>See documentation for more details here:</p>\n\n<p><a href=\"https://docs.python.org/3/library/collections.html#collections.defaultdict\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/collections.html#collections.defaultdict</a></p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 11831138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff90cf636e39e2387c0219019c2ff36?s=128&d=identicon&r=PG&f=1", "display_name": "elder lee", "link": "https://stackoverflow.com/users/11831138/elder-lee"}, "edited": false, "score": 0, "creation_date": 1564042356, "post_id": 57192091, "comment_id": 100902972, "body": "ENTER LOGIN:  Admin1  ENTER PASSWORD:  Pass123@  welcome ****Admin1****       ****************WELCOME TO STUDENT GRADING SYSTEM****************      [.] - PRINT STUDENT DICTIONARY     [0] - ADD NEW STUDENT(S)     [1] - ENTER GRADES     [2] - REMOVE STUDENT     [3] - STUDENT AVERAGE GRADES     [4] - EXIT PROGRAM   ~~~~~~WHAT WOULD YOU LIKE TO DO(ENTER A NUMBER)~~~~~~:  0  ENTER STUDENT NAME TO BE ADDED:  Dreamzboy  ENTER NEW STUDENT&#39;S GRADE:  99,99,99  {&#39;James&#39;: [70, 75, 95], &#39;Adams&#39;: [75, 90, 73], &#39;Benjamin&#39;: [80, 79, 85], &#39;Dreamzboy&#39;:   [99, 99, 99]}"}, {"owner": {"reputation": 73, "user_id": 11831138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff90cf636e39e2387c0219019c2ff36?s=128&d=identicon&r=PG&f=1", "display_name": "elder lee", "link": "https://stackoverflow.com/users/11831138/elder-lee"}, "edited": false, "score": 0, "creation_date": 1564255970, "post_id": 57192091, "comment_id": 100973290, "body": "Still on the same program,im trying to code a method that can remove scores one after the other.can you help with that too.Here is what i coded.  def remove_scores():      StudNaMe=input(&quot;ENTER STUDENT&#39;S NAME WHOSE SCORE(S) WOULD BE   REMOVED:  &quot;)      Score_remove=print(&quot;ENTER SCORE TO BE REMOVED:   &quot;)      if StudNaMe in StuDict:          StuDict[StudNaMe].remove(Score_remove)          print(StuDict)      else:          print(StudNaMe,&quot;IS NOT IN OUR DATABASE &quot;)"}], "tags": [], "owner": {"reputation": 548, "user_id": 4047444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh6.googleusercontent.com/-xRHbFjNlojg/AAAAAAAAAAI/AAAAAAAAGU0/vc870Jh0e0I/photo.jpg?sz=128", "display_name": "dreamzboy", "link": "https://stackoverflow.com/users/4047444/dreamzboy"}, "is_accepted": true, "score": 2, "last_activity_date": 1564430062, "last_edit_date": 1564430062, "creation_date": 1564007675, "answer_id": 57192091, "question_id": 57191934, "link": "https://stackoverflow.com/questions/57191934/how-to-add-new-details-to-dictionary-with-user-input-through-cmd/57192091#57192091", "title": "How to add new details to dictionary with user input through CMD", "body": "<p>The reason that your code didn't work is because your new student dictionary isn't defined as a list; therefore, you can't append.</p>\n\n<p>There are couple ways of doing this but keeping it the same logic as you have now, you'll need to add a few extra steps.</p>\n\n<pre><code>&gt;&gt;&gt; students = {'James': [70, 75, 95], 'Adams': [75, 90, 73], 'Benjamin': [80, 79, 85]}\n&gt;&gt;&gt; def add_student ():\n...     new_student = input ('Enter student name to be added:' )\n...     grades = input ('Enter new student\\'s grade: ')\n...     grades = grades.split (',')  # Split grades by comma\n...     grades = [int (grade.strip (' ')) for grade in grades]  # Strip space between each grade &amp; convert to integers\n...     students [new_student] = grades  # Assign new student with grades\n... \n&gt;&gt;&gt; add_student()\nEnter student name to be added:&gt;? John\nEnter new student's grade: &gt;? 82, 79, 77\n&gt;&gt;&gt; students\n{'Benjamin': [80, 79, 85], 'Adams': [75, 90, 73], 'James': [70, 75, 95], 'John': [82, 79, 77]}\n</code></pre>\n\n<p><strong>Updating answer based on comments</strong><br>\nTo remove the students score, you'll need ensure that the name as well as the score exists in database.</p>\n\n<pre><code>&gt;&gt;&gt; def remove_scores():\n...     name = input('Enter student name whose scores would be removed: ')\n...     score = int (input('Enter score to be removed: '))\n...     # Checking both student name and score exists in database\n...     if name in students and score in students [name]:\n...         score_index = students [name].index (score)  # Obtain the index location of the score\n...         del students [name][score_index]\n...         print (students)\n...     else:\n...         print('Student %s and/or %s score is not in our database.' % (name, score))\n... \n</code></pre>\n\n<p>First, let's add one extra score '79' to Adams to be deleted.</p>\n\n<pre><code>&gt;&gt;&gt; students ['Adams'].append (79)\n&gt;&gt;&gt; students\n{'Benjamin': [80, 79, 85], 'Adams': [75, 90, 73, 79], 'James': [70, 75, 97]}\n</code></pre>\n\n<p>Next, test the name and score condition.</p>\n\n<pre><code>&gt;&gt;&gt; remove_scores()\nEnter student name whose scores would be removed: &gt;? Larry\nEnter score to be removed: &gt;? 59\nStudent Larry and/or 59 score is not in our database.\n&gt;&gt;&gt; remove_scores()\nEnter student name whose scores would be removed: &gt;? Adams\nEnter score to be removed: &gt;? 77\nStudent Adams and/or 77 score is not in our database.\n</code></pre>\n\n<p>Once we're happy with the result, let's delete and see the results.</p>\n\n<pre><code>&gt;&gt;&gt; remove_scores()\nEnter student name whose scores would be removed: &gt;? Adams\nEnter score to be removed: &gt;? 79\n{'Benjamin': [80, 79, 85], 'Adams': [75, 90, 73], 'James': [70, 75, 97]}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 11831138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff90cf636e39e2387c0219019c2ff36?s=128&d=identicon&r=PG&f=1", "display_name": "elder lee", "link": "https://stackoverflow.com/users/11831138/elder-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 1, "accepted_answer_id": 57192091, "answer_count": 2, "score": 2, "last_activity_date": 1564430062, "creation_date": 1564006514, "last_edit_date": 1564008272, "question_id": 57191934, "link": "https://stackoverflow.com/questions/57191934/how-to-add-new-details-to-dictionary-with-user-input-through-cmd", "title": "How to add new details to dictionary with user input through CMD", "body": "<p>I am new to Python programming and I created a method to accept a new student name and new grade into an existing dictionary through user input from cmd, but I am finding it difficult to sort. How do I sort that out?</p>\n\n<p>I have been able to code the other methods properly. Only the above method is giving errors at run-time:</p>\n\n<pre><code>StudDict={'James':[70,75,95,],\n\n      'Adams':[75,90,73],\n\n      'Benjamin':[80,79,85]}\n\n#The below is where im having problems.\n\ndef AddStudent(): #This method adds new student and grade to the existing Student dictionarydictionary\n\n    StudToAdd= input('ENTER STUDENT NAME TO BE ADDED:  ')\n\n    GradesToAdd=input(\"ENTER NEW STUDENT'S GRADE:  \")\n\n    StudDict[StudToAdd].append(GradesToAdd)\n\n    print(StudDict)\n</code></pre>\n\n<p>I expect to be able to add new students(keys),and grades(values) to the existing student dictionary which I have already created and find the new added details in the dictionary.</p>\n"}, {"tags": ["python", "opencv", "detection"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11832965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd3f6c9c87a623a4a88675f0fa91bd88?s=128&d=identicon&r=PG&f=1", "display_name": "josem", "link": "https://stackoverflow.com/users/11832965/josem"}, "edited": false, "score": 0, "creation_date": 1564218574, "post_id": 57192076, "comment_id": 100964719, "body": "What I understand, and looking into the thread you sent, .compute() needs to be called at some point and need to works with an image. From my first code, after the image is read, the only function called is hog.detectMultiScale(image, winStride=(4, 4), padding=(8, 8),scale=1.05). I would say that compute() is used inside detectMultiScale function, is it right?"}, {"owner": {"reputation": 11, "user_id": 11832965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd3f6c9c87a623a4a88675f0fa91bd88?s=128&d=identicon&r=PG&f=1", "display_name": "josem", "link": "https://stackoverflow.com/users/11832965/josem"}, "edited": false, "score": 0, "creation_date": 1564219036, "post_id": 57192076, "comment_id": 100964805, "body": "From another point of view, if I use the code of the other thread, it ends with hist = hog.compute(image,winStride,padding,locations). What would be the code that I need after this to get the image with detections as in my first code? Many thanks"}], "tags": [], "owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "is_accepted": false, "score": 0, "last_activity_date": 1564007528, "creation_date": 1564007528, "answer_id": 57192076, "question_id": 57191874, "link": "https://stackoverflow.com/questions/57191874/pedestrian-detection-with-hog-descriptor-and-svm-understanding-the-python-code/57192076#57192076", "title": "Pedestrian detection with HOG descriptor and SVM understanding the python code", "body": "<p>While \"explain this code\" is a bit too broad for this site, the narrow question of \"where is this function on the first code\": it's not. It is, however, discussed in the tutorial you've linked.</p>\n\n<p>At the beginning of the posted code, you instantiate the <code>cv2.HOGDescriptor()</code> object as <code>hog</code>. Once created, the object has all of the bound attributes and methods of the <code>cv2.HOGDescriptor()</code> class, including the <code>.compute()</code> method, once you invoke it.</p>\n\n<p>There's some discussion in <a href=\"https://stackoverflow.com/questions/28390614/opencv-hogdescripter-python\">this question</a> about the basic usage and <a href=\"https://docs.opencv.org/3.4.6/d5/d33/structcv_1_1HOGDescriptor.html#a723b95b709cfd3f95cf9e616de988fc8\" rel=\"nofollow noreferrer\">here is a link</a> to some of the basic documentation for the HOGDescriptor` class</p>\n"}], "owner": {"reputation": 11, "user_id": 11832965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd3f6c9c87a623a4a88675f0fa91bd88?s=128&d=identicon&r=PG&f=1", "display_name": "josem", "link": "https://stackoverflow.com/users/11832965/josem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 576, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564009829, "creation_date": 1564006087, "last_edit_date": 1564009829, "question_id": 57191874, "link": "https://stackoverflow.com/questions/57191874/pedestrian-detection-with-hog-descriptor-and-svm-understanding-the-python-code", "title": "Pedestrian detection with HOG descriptor and SVM understanding the python code", "body": "<p>I am trying to understand the code in python of pedestrian detection with HOG and SVM to accelerate it with an FPGA. </p>\n\n<p>Below the code working fine copied from a website</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>hog = cv2.HOGDescriptor()                              \nhog.setSVMDetector(cv2.HOGDescriptor_getDefaultPeopleDetector())\n\ndef detector(image):\n   rects, weights = hog.detectMultiScale(image, winStride=(4, 4), padding=(8, 8),scale=1.05)                                 \n   for (x, y, w, h) in rects:\n       cv2.rectangle(image, (x, y), (x + w, y + h), (0, 0, 255), 2)       \n       cv2.rectangle(image, (x, y), (x + w, y + h), (0, 0, 255), 2)        \n   rects = np.array([[x, y, x + w, y + h] for (x, y, w, h) in rects])      \n   result = non_max_suppression(rects, probs=None, overlapThresh=0.7)\n   return result\n\nframe = cv2.imread(\"/.../pedestrian2.jpg\")\nresult = detector(frame.copy())\nfor (xA, yA, xB, yB) in result:     # draw the final bounding boxes after non-maxima supression\n    cv2.rectangle(frame, (xA, yA), (xB, yB), (0, 255, 0), 2)\nimg = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)      \nimg_out = PIL.Image.fromarray(img)\nimg_out\n</code></pre>\n\n<p>Following the tutorial \n<a href=\"https://www.learnopencv.com/handwritten-digits-classification-an-opencv-c-python-tutorial/\" rel=\"nofollow noreferrer\">https://www.learnopencv.com/handwritten-digits-classification-an-opencv-c-python-tutorial/</a>\nI understand that the main function is <code>hog.compute(im,descriptor)</code> which compute the HOG features of an image, but where is this function on the first code? Is it inside of one of the functions?</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1564006274, "post_id": 57191870, "comment_id": 100893254, "body": "<code>a.append(..)</code> does <i>not</i> return a new list, it returns <code>None</code>."}, {"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "edited": false, "score": 0, "creation_date": 1564006306, "post_id": 57191870, "comment_id": 100893264, "body": "...and <code>out</code> variable is getting rewritten each iteration"}], "answers": [{"tags": [], "owner": {"reputation": 1529, "user_id": 1936321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/634d8319091a309ada6d6c47c679eee6?s=128&d=identicon&r=PG", "display_name": "Sazzy", "link": "https://stackoverflow.com/users/1936321/sazzy"}, "is_accepted": false, "score": 2, "last_activity_date": 1564006499, "creation_date": 1564006499, "answer_id": 57191930, "question_id": 57191870, "link": "https://stackoverflow.com/questions/57191870/why-is-not-the-code-working-for-python-dictionary/57191930#57191930", "title": "Why is not the code working for Python dictionary", "body": "<p>This should solve it:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>result = {k: v.get(1) for k, v in ranklist.items()}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 363, "user_id": 1875458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36qCY.jpg?s=128&g=1", "display_name": "aysh", "link": "https://stackoverflow.com/users/1875458/aysh"}, "edited": false, "score": 0, "creation_date": 1564006920, "post_id": 57191932, "comment_id": 100893419, "body": "my oyut is like this {2000: &#39; Sara&#39;, 2001: &#39;Saj&#39;, 2002: None}, why 2002 printing None"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 363, "user_id": 1875458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36qCY.jpg?s=128&g=1", "display_name": "aysh", "link": "https://stackoverflow.com/users/1875458/aysh"}, "edited": false, "score": 0, "creation_date": 1564007020, "post_id": 57191932, "comment_id": 100893452, "body": "@user1875458: as said, because <code>.append(..)</code> returns <code>None</code>, it changes the list, it does not return (a copy of) the list."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 1, "last_activity_date": 1564006506, "creation_date": 1564006506, "answer_id": 57191932, "question_id": 57191870, "link": "https://stackoverflow.com/questions/57191870/why-is-not-the-code-working-for-python-dictionary/57191932#57191932", "title": "Why is not the code working for Python dictionary", "body": "<p>There are two errors here:</p>\n\n<ol>\n<li>you each time \"reset\" your <code>out</code> in the outer <code>for</code> loop; and</li>\n<li><code>.append(..)</code> returns <code>None</code>, not a new list.</li>\n</ol>\n\n<p>You can however rewrite the above to:</p>\n\n<pre><code>out = { k: v.get(1) for k, v in ranklist.items() }</code></pre>\n\n<p>So here we take for each key-value pair the key and map it to the value in the corresponding dictionary with <code>1</code> as key.</p>\n\n<p>Or if you want to omit subdictionaries without a key <code>1</code>:</p>\n\n<pre><code>out = { k: v.get(1) for k, v in ranklist.items() <b>if 1 in v</b> }</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 5007750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/da97d0ae013c441b4e3cbb956756a240?s=128&d=identicon&r=PG&f=1", "display_name": "joe_Mclovin", "link": "https://stackoverflow.com/users/5007750/joe-mclovin"}, "is_accepted": false, "score": 0, "last_activity_date": 1564006900, "creation_date": 1564006900, "answer_id": 57191996, "question_id": 57191870, "link": "https://stackoverflow.com/questions/57191870/why-is-not-the-code-working-for-python-dictionary/57191996#57191996", "title": "Why is not the code working for Python dictionary", "body": "<p>What would be better is just return a dictionary with the year as the key and the name of the best performer as the value.</p>\n\n<pre><code>a = {}\nfor year in ranklist:\n    a[year] = ranklist[year][1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "is_accepted": false, "score": 1, "last_activity_date": 1564007010, "creation_date": 1564007010, "answer_id": 57192008, "question_id": 57191870, "link": "https://stackoverflow.com/questions/57191870/why-is-not-the-code-working-for-python-dictionary/57192008#57192008", "title": "Why is not the code working for Python dictionary", "body": "<p>Your doing a couple things wrong. There is no need for <code>out</code> if you want to store your results in <code>a</code>. You also keep overwriting <code>out</code>. There is no need to iterate through the dictionary, that is one of its advantages; so just get the key. Also, append returns <code>None</code> and that is not what you want. And you can do this in one line:</p>\n\n<pre><code>a={i:ranklist[i][1] for i in ranklist}\nprint(a)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{2000: ' Sara', 2001: 'Saj', 2002: 'Pap'}\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 1875458, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36qCY.jpg?s=128&g=1", "display_name": "aysh", "link": "https://stackoverflow.com/users/1875458/aysh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57191932, "answer_count": 4, "score": 0, "last_activity_date": 1564007010, "creation_date": 1564006052, "question_id": 57191870, "link": "https://stackoverflow.com/questions/57191870/why-is-not-the-code-working-for-python-dictionary", "title": "Why is not the code working for Python dictionary", "body": "<p>I have a dictionary below. I need to print the year and name who got rank 1</p>\n\n<pre><code> ranklist = { 2000 : {1: ' Sara'  , 3 : 'Saj' , 2 : 'Pap' } , \n          2001 : {2: ' Sara'  , 1 : 'Saj' , 2 : 'Pap' } ,\n          2002 : {3: ' Sara'  , 2 : 'Saj' , 1 : 'Pap' } ,\n         }\n\n\na=[]\nfor year in ranklist:   \n    out = {i: [] for i in ranklist}\n    for rank in ranklist[year] :\n        if rank == 1:\n            #a.append(ranklist[year][rank])    \n            out[year] = a.append(ranklist[year][rank])\n</code></pre>\n\n<p>out</p>\n\n<pre><code>{2000: [], 2001: [], 2002: None}\n</code></pre>\n\n<p>Expected out</p>\n\n<pre><code>{2000: 'Sara', 2001: Saj, 2002: 'Pap'}\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": true, "score": 1, "last_activity_date": 1564008771, "last_edit_date": 1564008771, "creation_date": 1564006649, "answer_id": 57191957, "question_id": 57191817, "link": "https://stackoverflow.com/questions/57191817/problem-with-plot-legend-in-matplotlib-where-i-use-colorbar/57191957#57191957", "title": "Problem with plot legend in matplotlib where I use colorbar", "body": "<p>Just assign the respective entry of <code>legends</code> to the <code>labels</code> argument while plotting the individual points as </p>\n\n<pre><code>for i in range(len(x)):\n    plt.errorbar(x[i],y[i],yerr=ye[i],linestyle='',c=time_color[i],\n                 marker=\"o\",mfc='none', label=legends[i]) # labels added here \n    plt.xscale(\"linear\")\n    plt.yscale(\"linear\")\n    plt.axis([0,70,0,15])\n    plt.xlabel(\"$L_{x}^{total}/L_{Edd}$\",fontsize='18')\n    plt.ylabel(\"$T_2$ (keV)\",fontsize='18')\nplt.legend() \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/2vBfx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2vBfx.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 43, "user_id": 11631185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2873180c1fd43cb48f1300aa3fcd61b?s=128&d=identicon&r=PG&f=1", "display_name": "elias", "link": "https://stackoverflow.com/users/11631185/elias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 57191957, "answer_count": 1, "score": 1, "last_activity_date": 1564008893, "creation_date": 1564005759, "last_edit_date": 1564006528, "question_id": 57191817, "link": "https://stackoverflow.com/questions/57191817/problem-with-plot-legend-in-matplotlib-where-i-use-colorbar", "title": "Problem with plot legend in matplotlib where I use colorbar", "body": "<p>I am trying to make a plot where the color of the points will change inside a specific range of values. \nI think that I made it but I have  a problem with legends.</p>\n\n<p>I wrote the code below where I created the array \"time\" of 28 values between 0,1.\nAfterwards I created a colorbar and I corresponded the \"time\" values with rgba values. \nFinally I plotted the data.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nlegends=['0106860101', '0150280101', '0150280301', '0150280401', '0150280501', '0150280601', '0150281101', '0205230301', '0205230401', '0205230501', '0205230601', '0301860101', '0405090101', '0693850501', '0693851201', '0722650101', '0742490101', '0742590301', '0764770101', '0764770401', '0782310101', '0794580601', '0803990101', '0803990201', '0803990301', '0803990401', '0803990501', '0803990601']\n\ntime = np.linspace(0,1,28)\nplt.figure(figsize=(15,9))\n\nx=[14.46, 34.79, 43.94, 55.81, 23.55, 17.43, 18.42, 55.6, 14.78, 15.0, 50.83, 46.4, 40.23, 30.17, 15.9, 10.93, 13.75, 26.63, 11.02, 15.66, 32.34, 22.11, 21.78, 25.64, 14.59, 19.08, 12.15, 13.32]     \n\ny=[3.596, 5.803, 4.066, 3.538, 10.0, 2.989, 3.175, 3.602, 3.459, 3.101, 3.751, 3.625, 4.343, 2.778, 2.114, 5.433, 2.549, 2.619, 4.66, 2.875, 3.774, 2.959, 2.5, 2.731, 3.623, 3.537, 2.303, 2.27]\n\nye=[0.38, 2.394, 0.322, 0.243, 3.162, 0.552, 0.682, 0.157, 0.956, 0.316, 0.169, 0.169, 0.215, 0.069, 0.065, 1.147, 0.188, 0.098, 0.281, 0.654, 0.101, 0.255, 0.073, 0.07, 0.343, 0.448, 0.356, 0.181] \n\ns=plt.scatter(x,y,c=time,cmap='plasma',marker='None',facecolors='none')\nclb = plt.colorbar(s)\ntime_color = clb.to_rgba(time)\n\nfor i in range(len(x)):\n plt.errorbar(x[i],y[i],yerr=ye[i],linestyle='',c=time_color[i],marker\n =\"o\",mfc='none')\n plt.xscale(\"linear\")\n plt.yscale(\"linear\")\n plt.axis([0,70,0,15])\n plt.xlabel(\"$L_{x}^{total}/L_{Edd}$\",fontsize='18')\n plt.ylabel(\"$T_2$ (keV)\",fontsize='18')\n plt.legend(labels=legends) \n</code></pre>\n\n<p>The result that I have is that all the points are labeled correct unless the first one. ('0106860101') .\nI tried to upload an image of my plot but I didn't make because I have not the right yet.</p>\n\n<p>What can I do in order to solve this problem ? </p>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["python", "pyqt", "pyqt5", "qthread"], "comments": [{"owner": {"reputation": 417, "user_id": 4608037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2d9aeb2d17f5f2090b661c53709d319?s=128&d=identicon&r=PG&f=1", "display_name": "woodz", "link": "https://stackoverflow.com/users/4608037/woodz"}, "edited": false, "score": 1, "creation_date": 1564006613, "post_id": 57191769, "comment_id": 100893345, "body": "hard to believe there&#39;s nothing out here for you. Make use of <a href=\"https://doc.qt.io/qt-5/qthread.html\" rel=\"nofollow noreferrer\">QThread()</a> object. Refer to <a href=\"https://doc.qt.io/qt-5/\" rel=\"nofollow noreferrer\">C++ qt5 documentation</a>, even if you devleop in python. Here are some samples: <a href=\"https://stackoverflow.com/questions/44618457/how-to-can-i-add-threading-to-pyqt5-gui\">How to can I add threading to PyQt5 GUI?</a>,  <a href=\"https://kushaldas.in/posts/pyqt5-thread-example.html\" rel=\"nofollow noreferrer\">PyQt5 thread example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1564009347, "last_edit_date": 1564009347, "creation_date": 1564008494, "answer_id": 57192195, "question_id": 57191769, "link": "https://stackoverflow.com/questions/57191769/gui-become-unresponsive-while-looping/57192195#57192195", "title": "GUI become unresponsive while looping", "body": "<p>You have to execute the heavy task (requests + BeautifulSoup) in another thread since they block the main thread where the GUI lives, preventing the GUI from working correctly and this is manifested, for example, by freezing the screen. In this case I will implement a worker-thread approach:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\nimport ssl\nimport sys\nfrom functools import partial\n\nimport requests\nfrom PyQt5.QtCore import QObject, QThread, QTimer, pyqtSignal, pyqtSlot\nfrom PyQt5.QtWidgets import QApplication, QDialog, QMessageBox\nfrom bs4 import BeautifulSoup\n\nfrom foo_module import Ui_Dialog\n\n\nclass ScrapeWorker(QObject):\n    started = pyqtSignal()\n    finished = pyqtSignal()\n    resultsChanged = pyqtSignal(str)\n    errorSignal = pyqtSignal(str)\n\n    @pyqtSlot(str)\n    def run(self, text):\n        self.started.emit()\n        sUrl = \"https://removed.com/{}/p/?section=2&amp;page=1\".format(text)\n        try:\n            sr = requests.get(sUrl)\n        except Exception as e:\n            self.errorSignal.emit(\"error: {}\".format(e))\n            self.finished.emit()\n            return\n        soup1 = BeautifulSoup(sr.text, \"html.parser\")\n        NumberOfPagesBlock = soup1.find_all(\"li\", class_=\"text-gray\")\n        if not NumberOfPagesBlock:\n            self.errorSignal.emit(\"Nothing Here\")\n        else:\n            items = re.compile(r\"[^\\d.]+\")\n            PagesCount = -(-items // 60)\n            for i in range(1, int(PagesCount + 1)):\n                itemsIdDs = soup1.find_all(\"div\", class_=\"large-single-item\")\n\n                for itemsIdD in itemsIdDs:\n                    iUrl = \"https://removed.com/{}/s\".format(itemsIdDs.get(\"data-ean\"))\n                    r = requests.get(iUrl)\n                    soup = BeautifulSoup(r.text, \"html.parser\")\n                    seller = soup.find(\"div\", id=\"productTrackingParams\")\n                    title = \"{}- Title {}\".format(ctr, seller.get(\"data-title\"))\n                    self.resultsChanged.emit(title)\n        self.finished.emit()\n\n\nclass MyForm(QDialog):\n    def __init__(self):\n        super().__init__()\n        self.ui = Ui_Dialog()\n        self.ui.setupUi(self)\n        self.ui.buttonOK.clicked.connect(self.searchAll)\n\n        thread = QThread(self)\n        thread.start()\n\n        self.m_worker = ScrapeWorker()\n        self.m_worker.moveToThread(thread)\n        self.m_worker.started.connect(self.onStarted)\n        self.m_worker.finished.connect(self.onFinished)\n        self.m_worker.resultsChanged.connect(self.onResultChanged)\n        self.m_worker.errorSignal.connect(self.onErrorSignal)\n\n    @pyqtSlot()\n    def searchAll(self):\n        sID = self.ui.txtSellerID.text()\n        wrapper = partial(self.m_worker.run, sID)\n        QTimer.singleShot(0, wrapper)\n\n    @pyqtSlot(str)\n    def onResultChanged(self, title):\n        self.ui.txtDetails.appendPlainText(title)\n\n    @pyqtSlot()\n    def onStarted(self):\n        self.ui.buttonOK.setEnabled(False)\n\n    @pyqtSlot()\n    def onFinished(self):\n        self.ui.buttonOK.setEnabled(True)\n\n    @pyqtSlot(str)\n    def onErrorSignal(self, message):\n        QMessageBox.about(self, \"Warning\", message)\n\n\nif __name__ == \"__main__\":\n\n    app = QApplication(sys.argv)\n    w = MyForm()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11832902, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-h7juaLDH0YI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfk_TRUbWNMegoy5zKpXh2KHPhLkA/photo.jpg?sz=128", "display_name": "Cesur", "link": "https://stackoverflow.com/users/11832902/cesur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 57192195, "answer_count": 1, "score": 1, "last_activity_date": 1571260530, "creation_date": 1564005450, "last_edit_date": 1571260530, "question_id": 57191769, "link": "https://stackoverflow.com/questions/57191769/gui-become-unresponsive-while-looping", "title": "GUI become unresponsive while looping", "body": "<p>After i click the button, the form become unresponsive until the parsing function finish its work.</p>\n\n<p>I'd like to move searchAll function to thread. I did read several answers to similar questions, but i didn't understand how.</p>\n\n<pre><code>class MyForm(QDialog):\n\n\n    def __init__(self):\n        super().__init__()\n        self.ui = Ui_Dialog()\n        self.ui.setupUi(self)\n        self.ui.buttonOK.clicked.connect(self.searchAll)\n        self.show()\n\n    def searchAll(self):\n\n        sID = self.ui.txtSellerID.text()\n        sUrl = \"https://removed.com/\" + sID + \"/p/?section=2&amp;page=1\"\n        sr = requests.get(sUrl)\n        soup1 = BeautifulSoup(sr.text, \"html.parser\")\n\n        NumberOfPagesBlock = soup1.find_all(\"li\", class_=\"text-gray\")\n\n        if not NumberOfPagesBlock:\n            QMessageBox.about(self, \"Warning\", \"Nothing Here\")\n        else:\n            items = re.compile(r'[^\\d.]+')\n            PagesCount = -(-items // 60)\n\n            for i in range(1, int(PagesCount + 1)):\n                itemsIdDs = soup1.find_all(\"div\", class_=\"large-single-item\")\n\n                for itemsIdD in itemsIdDs:\n                    iUrl = (\"https://removed.com/\" + itemsIdDs.get('data-ean') + \"/s\")\n                    r = requests.get(iUrl)\n                    soup = BeautifulSoup(r.text, \"html.parser\")\n                    seller = soup.find(\"div\", id=\"productTrackingParams\")\n                    title = (str(ctr) + '- ' + \"Title \" + str(seller.get('data-title')))\n                    self.ui.txtDetails.appendPlainText(title)\n\n\nif __name__ == \"__main__\":\n\n    app = QApplication(sys.argv)\n    w = MyForm()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 276, "user_id": 8895717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NRZT.jpg?s=128&g=1", "display_name": "Samantha Miller", "link": "https://stackoverflow.com/users/8895717/samantha-miller"}, "edited": false, "score": 1, "creation_date": 1564005394, "post_id": 57191741, "comment_id": 100893013, "body": "Will your variables always be inside of a <code>str()</code>?"}, {"owner": {"reputation": 31, "user_id": 11832913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5f1eccfe277e9293011f91c1d4d09fe?s=128&d=identicon&r=PG&f=1", "display_name": "cbrianfoley", "link": "https://stackoverflow.com/users/11832913/cbrianfoley"}, "reply_to_user": {"reputation": 276, "user_id": 8895717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NRZT.jpg?s=128&g=1", "display_name": "Samantha Miller", "link": "https://stackoverflow.com/users/8895717/samantha-miller"}, "edited": false, "score": 0, "creation_date": 1564005431, "post_id": 57191741, "comment_id": 100893019, "body": "They can be, yes"}, {"owner": {"reputation": 169, "user_id": 7283345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8339a9893d6084c52a5dfd104c312f89?s=128&d=identicon&r=PG&f=1", "display_name": "VersBersch", "link": "https://stackoverflow.com/users/7283345/versbersch"}, "edited": false, "score": 0, "creation_date": 1564005601, "post_id": 57191741, "comment_id": 100893065, "body": "use can use <code>eval</code> on the strings"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 1, "creation_date": 1564006103, "post_id": 57191741, "comment_id": 100893199, "body": "This feels like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a>. Try to go one step back and explain your goal here. It sounds like there could be a better way of doing this"}, {"owner": {"reputation": 31, "user_id": 11832913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5f1eccfe277e9293011f91c1d4d09fe?s=128&d=identicon&r=PG&f=1", "display_name": "cbrianfoley", "link": "https://stackoverflow.com/users/11832913/cbrianfoley"}, "edited": false, "score": 0, "creation_date": 1564018089, "post_id": 57191741, "comment_id": 100895453, "body": "You may be right, that I&#39;m asking too specific of a question. What I&#39;m doing is piping these commands to putty using pywinauto and this snip of code  <code>for cmd in commands: \tputty.type_keys(cmd) \tputty.type_keys(&#39;{ENTER}&#39;) \ttime.sleep(.3)</code> The point is to try to prompt for variables ahead of time that will be used along the way"}, {"owner": {"reputation": 506, "user_id": 10863327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e1604b54844ca72235865e7bb3bf1ca?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Parsons", "link": "https://stackoverflow.com/users/10863327/kyle-parsons"}, "edited": false, "score": 0, "creation_date": 1564021026, "post_id": 57191741, "comment_id": 100895914, "body": "It sounds like you could use the <code>format</code>.  As long as you know in advance what variables appear in your text file.  <code>&quot;variables = {&quot;variable_1&quot;: value_1, &quot;variable_2&quot;: value_2, ...}</code>.  Then <code>for line in f: line.format(**variables)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 991, "user_id": 2555108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xySgD.png?s=128&g=1", "display_name": "Michael Kolber", "link": "https://stackoverflow.com/users/2555108/michael-kolber"}, "edited": false, "score": 1, "creation_date": 1564006517, "post_id": 57191909, "comment_id": 100893317, "body": "<a href=\"https://stackoverflow.com/questions/1832940/why-is-using-eval-a-bad-practice\">Why is using &#39;eval&#39; a bad practice?</a>"}], "tags": [], "owner": {"reputation": 422, "user_id": 9517564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53efeb0d956447c5112dc3ac960cac6?s=128&d=identicon&r=PG", "display_name": "Doodle", "link": "https://stackoverflow.com/users/9517564/doodle"}, "is_accepted": false, "score": 0, "last_activity_date": 1564006333, "creation_date": 1564006333, "answer_id": 57191909, "question_id": 57191741, "link": "https://stackoverflow.com/questions/57191741/using-a-file-to-create-a-list-but-the-file-has-variables-in-it-how-do-i-make-th/57191909#57191909", "title": "Using a file to create a list but the file has variables in it. How do I make the list contain the variable&#39;s value?", "body": "<p>Try this: <strong>(This should work for your case)</strong></p>\n\n<pre><code>import os\n\nvariable = '123456'\nfile = 'C:\\whatever.txt'\n\n#make the list 'commands'\nwith open(file) as f:\n        commands = []\n        for line in f:\n                line = line.replace('\\n','')\n                if '+' in line:\n                   line = line.split('+')\n                   line = line[0] + eval(line[1])\n                commands.append(line)\n\n#make the list 'oldcommands'\noldcommands = ['thing','number'+str(variable)]\n\nprint(commands)\nprint(oldcommands)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11832913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5f1eccfe277e9293011f91c1d4d09fe?s=128&d=identicon&r=PG&f=1", "display_name": "cbrianfoley", "link": "https://stackoverflow.com/users/11832913/cbrianfoley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564006333, "creation_date": 1564005234, "last_edit_date": 1564005413, "question_id": 57191741, "link": "https://stackoverflow.com/questions/57191741/using-a-file-to-create-a-list-but-the-file-has-variables-in-it-how-do-i-make-th", "title": "Using a file to create a list but the file has variables in it. How do I make the list contain the variable&#39;s value?", "body": "<p>I'm writing a script that contains a large list. I'm trying to modify my script so that instead of needing to edit the script directly to add/remove items to this list, it reads lines from a text file. Is it possible to use variables inside of this data file?</p>\n\n<p>For example,\nIf my text file contains this:</p>\n\n<pre><code>thing\nnumber+str(variable)\n</code></pre>\n\n<p>And my script looks like this:</p>\n\n<pre><code>import os\n\nvariable = '123456'\nfile = 'C:\\whatever.txt'\n\n#make the list 'commands'\nwith open(file) as f:\n        commands = []\n        for line in f:\n                line = line.replace('\\n','')\n                commands.append(line)\n\n#make the list 'oldcommands'\noldcommands = ['thing','number'+str(variable)]\n\nprint(commands)\nprint(oldcommands)\n</code></pre>\n\n<p>How do I get both of these outputs to be the same? </p>\n\n<p>This is the result of running the script above:</p>\n\n<pre><code>['thing', 'number+str(variable)']\n['thing', 'number123456']\n</code></pre>\n\n<p>Formatting the file in a particular way is not a problem, I'm just trying to make my script more modular/portable</p>\n"}, {"tags": ["python", "python-3.x", "feedparser"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 11541001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a75708073ad80b663187dd7f3d3a41?s=128&d=identicon&r=PG&f=1", "display_name": "bluedays", "link": "https://stackoverflow.com/users/11541001/bluedays"}, "edited": false, "score": 0, "creation_date": 1564015195, "post_id": 57191789, "comment_id": 100894953, "body": "entry.published is the date in which the item was published. Entry itself is the entire blog posts, which is significantly more data."}, {"owner": {"reputation": 43, "user_id": 11541001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a75708073ad80b663187dd7f3d3a41?s=128&d=identicon&r=PG&f=1", "display_name": "bluedays", "link": "https://stackoverflow.com/users/11541001/bluedays"}, "edited": false, "score": 0, "creation_date": 1564015302, "post_id": 57191789, "comment_id": 100894971, "body": "<code>if entry.published in new_posts:</code>  The above is the code I actually needed for the second loop.  The one I had written before was   <code>if entry in new_posts:</code>  So you were on the right track and thank you, your comment helped me figure it out."}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 0, "last_activity_date": 1564005622, "creation_date": 1564005622, "answer_id": 57191789, "question_id": 57191726, "link": "https://stackoverflow.com/questions/57191726/using-feedparser-to-get-each-unique-item-from-a-blog-checking-list-membership-i/57191789#57191789", "title": "Using feedparser to get each unique item from a blog. Checking list membership in a for loop not working", "body": "<p>You're appending <code>entry.published</code> to <code>new_posts</code> when <code>entry</code> is not in <code>new_posts</code>. You should append <code>entry</code> itself to <code>new_posts</code> instead.</p>\n\n<p>Change:</p>\n\n<pre><code>new_posts.append(entry.published)\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>new_posts.append(entry)\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 11541001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a75708073ad80b663187dd7f3d3a41?s=128&d=identicon&r=PG&f=1", "display_name": "bluedays", "link": "https://stackoverflow.com/users/11541001/bluedays"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564005646, "creation_date": 1564005169, "last_edit_date": 1564005646, "question_id": 57191726, "link": "https://stackoverflow.com/questions/57191726/using-feedparser-to-get-each-unique-item-from-a-blog-checking-list-membership-i", "title": "Using feedparser to get each unique item from a blog. Checking list membership in a for loop not working", "body": "<p>For whatever reason when I am checking for membership of an item in a list it is saying that none of the items is in the list. However, whenever I print the item it is showing all of the said items. I have tried this with both lists and sets. What am I doing wrong?</p>\n\n<pre><code>import feedparser\nrss = feedparser.parse(\"https://website.com/feed\")\nnew_posts = []\ndate_time = set()\n\nfor entry in rss.entries:\n    if entry not in new_posts:\n        new_posts.append(entry.published)\n        print(\"added\")\n\n\nfor entry in rss.entries:\n    if entry in new_posts:\n        print(\"yes\")\n    else:\n        print(\"no\")\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>added\nadded\nadded\nadded\nadded\nadded\nadded\nadded\nadded\nadded\nadded\nadded\nno\nno\nno\nno\nno\nno\nno\nno\nno\nno\nno\nno\n</code></pre>\n"}, {"tags": ["python", "json", "python-3.x"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 2, "creation_date": 1564005207, "post_id": 57191718, "comment_id": 100892966, "body": "<a href=\"https://stackoverflow.com/questions/12265451/ask-forgiveness-not-permission-explain\">Ask for forgiveness instead of permission.</a> (use <code>try</code>/<code>except</code>)."}, {"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "edited": false, "score": 0, "creation_date": 1564005236, "post_id": 57191718, "comment_id": 100892982, "body": "<a href=\"https://stackoverflow.com/questions/2507808/how-to-check-whether-a-file-is-empty-or-not\">This discussion</a> might help you"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1564005998, "post_id": 57191718, "comment_id": 100893167, "body": "BTW, generally, this kind of situation is better handling by formatting your file as JSONL, not JSON. That way you can just append an extra line for the new data item and don&#39;t need to modify the content that&#39;s already there. See <a href=\"http://jsonlines.org/\" rel=\"nofollow noreferrer\">jsonlines.org</a>"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1564006072, "post_id": 57191718, "comment_id": 100893188, "body": "...the current code, even after you fix the exception, will leave you with a corrupt file if it crashes (or your system loses power) partway through operation, or if a reader tries to consume the file while the write process just started. It&#39;s possible to fix that -- by writing to a temporary file, making sure it&#39;s fully sync&#39;d to disk, and renaming it over the original, f/e -- but painful. Better to just use a format that lets you do an atomic append."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1564006188, "post_id": 57191718, "comment_id": 100893223, "body": "(Also, whereas an empty file isn&#39;t valid JSON, it&#39;s perfectly valid JSONL, so no exception handling is needed)."}], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 5646852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh6.googleusercontent.com/-oCRPt2RBCuM/AAAAAAAAAAI/AAAAAAAAACg/vgj4oF0rgrA/photo.jpg?sz=128", "display_name": "AgentM", "link": "https://stackoverflow.com/users/5646852/agentm"}, "edited": false, "score": 0, "creation_date": 1585423075, "post_id": 57191843, "comment_id": 107755485, "body": "I can imagine this could be useful if you would like to still have the program throw the JSONDecodeError for anything that isn&#39;t an empty file. As the main answer would also catch all the other decode errors. However, this answer would probably not account for files with a single space or other white space."}], "tags": [], "owner": {"reputation": 21, "user_id": 11832973, "user_type": "registered", "profile_image": "https://graph.facebook.com/10219748109521395/picture?type=large", "display_name": "Ahmed Raza Kainth", "link": "https://stackoverflow.com/users/11832973/ahmed-raza-kainth"}, "is_accepted": false, "score": 1, "last_activity_date": 1564005896, "creation_date": 1564005896, "answer_id": 57191843, "question_id": 57191718, "link": "https://stackoverflow.com/questions/57191718/how-to-json-loadfilename-on-an-empty-file/57191843#57191843", "title": "How to json.load(filename) on an empty file?", "body": "<pre><code>import os\nos.stat(\"file\").st_size == 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1529, "user_id": 1936321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/634d8319091a309ada6d6c47c679eee6?s=128&d=identicon&r=PG", "display_name": "Sazzy", "link": "https://stackoverflow.com/users/1936321/sazzy"}, "is_accepted": true, "score": 5, "last_activity_date": 1564005973, "creation_date": 1564005973, "answer_id": 57191858, "question_id": 57191718, "link": "https://stackoverflow.com/questions/57191718/how-to-json-loadfilename-on-an-empty-file/57191858#57191858", "title": "How to json.load(filename) on an empty file?", "body": "<p>To expand on @pault comment, you could use try/except, but it would work better in a better indented blocks (optionally, you can also chain the <code>with</code> statement):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from json.decoder import JSONDecodeError\n\nwith open(filename, 'a+') as infile, open(filename, 'w') as outfile:\n    try:\n        old_data = json.load(infile)\n        data = old_data + obj\n        json.dump(data, outfile)\n    except JSONDecodeError:\n        pass\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 9938597, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uT2lyenNVvE/AAAAAAAAAAI/AAAAAAAAAAA/pNkfXUP-v5o/photo.jpg?sz=128", "display_name": "PoorProgrammer", "link": "https://stackoverflow.com/users/9938597/poorprogrammer"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6872, "favorite_count": 2, "closed_date": 1564006228, "accepted_answer_id": 57191858, "answer_count": 2, "score": 3, "last_activity_date": 1564005973, "creation_date": 1564005124, "question_id": 57191718, "link": "https://stackoverflow.com/questions/57191718/how-to-json-loadfilename-on-an-empty-file", "closed_reason": "Duplicate", "title": "How to json.load(filename) on an empty file?", "body": "<p>I have a file that may or may not be empty. The goal is to read from the file an json object, append to it, and then write it back to the file. However, on the case that the file is empty, then json.load() fails. How do I resolve this without having to check if the file is empty beforehand?</p>\n\n<p>Here is my current code:</p>\n\n<pre><code>with open(filename, 'a+') as infile:\n    old_data = json.load(infile)\ndata = old_data + obj\nwith open(filename, 'w') as outfile:\n    json.dump(data, outfile)\n</code></pre>\n\n<p>Error Message is: </p>\n\n<pre><code> File \"&lt;stdin&gt;\", line 3, in &lt;module&gt;\n  File \"/usr/lib/python3.6/json/__init__.py\", line 299, in load\n    parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)\n  File \"/usr/lib/python3.6/json/__init__.py\", line 354, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/lib/python3.6/json/decoder.py\", line 339, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/lib/python3.6/json/decoder.py\", line 357, in raw_decode\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "owner": {"reputation": 31, "user_id": 11746087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483851739499d900ba5e1c81259b4cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/11746087/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1564127861, "creation_date": 1564005123, "last_edit_date": 1564127861, "question_id": 57191716, "link": "https://stackoverflow.com/questions/57191716/how-can-i-modify-a-loop-that-gets-the-daily-pivots-highs-lows-of-stock-price-t", "title": "How can I modify a loop that gets the daily pivots (highs/lows) of stock price to also get the weekly?", "body": "<p>I have daily stock price high, low, close data in a pandas data frame. It looks like this. You can ignore the close column:</p>\n\n<pre><code>\ndate            high        low         close\n2003-03-10      16.3000     15.7100     1.1236\n2003-03-11      15.7500     15.0000     1.1071\n2003-03-12      15.5100     14.9000     1.0757\n2003-03-13      16.5700     15.2500     1.1607\n2003-03-14      16.9500     16.3900     1.1821\n2003-03-17      18.0900     15.6600     1.2857\n2003-03-18      19.1800     18.0700     1.3393\n2003-03-19      19.5800     18.7000     1.3743\n</code></pre>\n\n<p>I have written a loop to get the pivots (highs/lows), similar to this graphic (except I am using highs and lows only, rather than the closing price, and don't care if the high is the next day or days later): <a href=\"https://i.stack.imgur.com/oYXR6.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/oYXR6.png</a>. I am then checking the pivots to see whether the last high pivot is higher than the previous high pivot and the last low pivot is higher than the previous low pivot (higher highs, higher lows; or the opposite)</p>\n\n<p>So this data is daily stock price data and my loop is below (I am not sure if there is a better way to do this with Pandas, as I am new to Python). I was wondering how I could modify it to also return weekly pivots (i.e. is the low of last WEEKLY low higher than the previous weekly low and is the last weekly high higher than the previous weekly high, or the opposite). I would like to do it with monthly as well, but if I know how to do weekly, I can figure out monthly. That said, if there is a better way to do all this with Pandas, I'd be very interested.</p>\n\n<p>Thanks for your help!</p>\n\n<pre><code>ltemp = [data.iloc[0].high, data.iloc[0].low]\nLPIV = []\nhtemp = [data.iloc[0].high, data.iloc[0].low]\nHPIV = []\n\ntrend_score = 0\ntrend_list = []\ntrend_length_list = []\n\ntrend_dir = 0\ntrend_length = 0\n\n#data is my dataframe\nfor i, row in data.iterrows():\n        # if the row sets a new pivot and confirms the last pivot in one days data, handle for that\n        if ltemp and row.low &lt; ltemp[1] and row.high &gt; ltemp[0]:\n            ltemp = [ltemp[0], row.low]\n            LPIV.append(ltemp[1])\n            htemp = [row.high, row.low]\n            ltemp = []\n        elif htemp and row.high &gt; htemp[0] and row.low &lt; htemp[1]:\n            htemp = [row.high, htemp[1]]\n            HPIV.append(htemp[0])\n            ltemp = [row.high, row.low]\n            htemp = []\n\n        # If row closes higher than the high of the lowest low. confirm it as a pivot\n        elif ltemp and row.high &gt; ltemp[0]:\n            LPIV.append(ltemp[1])\n            htemp = [row.high, row.low]\n            ltemp = []\n\n        # If row closes lower than the low of the highest high. confirm it as a pivot\n        elif htemp and row.low &lt; htemp[1]:\n            HPIV.append(htemp[0])\n            ltemp = [row.high, row.low]\n            htemp = []\n\n        # if row moves higher or lower than temp high or low, adjust pivot\n        elif ltemp and row.low &lt; ltemp[1]:\n            ltemp = [row.high, row.low]\n        elif htemp and row.high &gt; htemp[0]:\n            htemp = [row.high, row.low]\n\n        if trend_dir == 1 and row.close &lt; last_trend_change[1]:\n                trend_length = 0\n        elif trend_dir == -1 and row.close &gt; last_trend_change[3]:\n                trend_length = 0\n\n        if len(HPIV) == 2 and len(LPIV) == 2:\n            if LPIV[0] &lt;= LPIV[1] and HPIV[0] &lt; HPIV[1]:\n                if trend_dir == 1:\n                    trend_length+=1\n                else:\n                    trend_dir = 1\n                    trend_length=1\n                last_trend_change = [LPIV[0], LPIV[1], HPIV[0], HPIV[1]]\n            elif LPIV[1] &lt; LPIV[0] and HPIV[1] &lt;= HPIV[0]:\n                if trend_dir == -1:\n                    trend_length-=1\n                else:\n                    trend_dir = -1\n                    trend_length=-1\n                last_trend_change = [LPIV[0], LPIV[1], HPIV[0], HPIV[1]]\n\n            if not htemp:\n                LPIV.pop(0)\n            else:\n                HPIV.pop(0)\n\n\n        trend_list.append(trend_dir)\n        trend_length_list.append(trend_length)\n\n    return trend_list, trend_length_list\n</code></pre>\n\n<p>EDIT:\nI hope my code doesn't overcomplicate it. Basically, I need to run my same loop, but instead of the row being iterated containing 1 day of data (which is what the row actually contains), it needs to contain 5 days that are Mon-Fri (one trading week). That means the high is whatever the highest point was during the week, the low the lowest point in the week, the close is the close price on Friday. Maybe I need a separate loop for this and some pandas function to combine rows in that way? </p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1564005040, "post_id": 57191697, "comment_id": 100892917, "body": "Any chance you can add some sample data?"}, {"owner": {"reputation": 8415, "user_id": 505990, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QaLn2.jpg?s=128&g=1", "display_name": "Leonardo", "link": "https://stackoverflow.com/users/505990/leonardo"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1564006663, "post_id": 57191697, "comment_id": 100893359, "body": "@rafaelc i created some! tks for the interest!"}], "answers": [{"comments": [{"owner": {"reputation": 8415, "user_id": 505990, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QaLn2.jpg?s=128&g=1", "display_name": "Leonardo", "link": "https://stackoverflow.com/users/505990/leonardo"}, "edited": false, "score": 0, "creation_date": 1564006796, "post_id": 57191922, "comment_id": 100893393, "body": "will this give me N plots or a single plot with N lines? I really need just a single image..."}, {"owner": {"reputation": 169, "user_id": 7283345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8339a9893d6084c52a5dfd104c312f89?s=128&d=identicon&r=PG&f=1", "display_name": "VersBersch", "link": "https://stackoverflow.com/users/7283345/versbersch"}, "reply_to_user": {"reputation": 8415, "user_id": 505990, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QaLn2.jpg?s=128&g=1", "display_name": "Leonardo", "link": "https://stackoverflow.com/users/505990/leonardo"}, "edited": false, "score": 0, "creation_date": 1564007991, "post_id": 57191922, "comment_id": 100893714, "body": "@Leonardo - by passing the parameter <code>ax</code> to <code>plot()</code> they will all be on the same chart"}], "tags": [], "owner": {"reputation": 169, "user_id": 7283345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8339a9893d6084c52a5dfd104c312f89?s=128&d=identicon&r=PG&f=1", "display_name": "VersBersch", "link": "https://stackoverflow.com/users/7283345/versbersch"}, "is_accepted": false, "score": 2, "last_activity_date": 1564006461, "creation_date": 1564006461, "answer_id": 57191922, "question_id": 57191697, "link": "https://stackoverflow.com/questions/57191697/pandas-multiline-plot/57191922#57191922", "title": "Pandas - Multiline plot", "body": "<p>One way is to just loop through the names and plot each individually</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import matplotlib.pyplot as plt\n\nfig, ax = plt.subplots(figsize=(12, 18))\n\nfor name, group in data.groupby('name'):\n    group.date.value_counts().plot(ax=ax, label=name)\n\nplt.legend()\nplt.show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17050, "user_id": 3944322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1fb31e86bf22c094d34b240544e458ec?s=128&d=identicon&r=PG&f=1", "display_name": "Stef", "link": "https://stackoverflow.com/users/3944322/stef"}, "is_accepted": true, "score": 1, "last_activity_date": 1564009186, "last_edit_date": 1564009186, "creation_date": 1564007853, "answer_id": 57192113, "question_id": 57191697, "link": "https://stackoverflow.com/questions/57191697/pandas-multiline-plot/57192113#57192113", "title": "Pandas - Multiline plot", "body": "<pre><code>res = df.groupby(['name','day']).count().unstack().T\nres.index = res.index.droplevel()\nres.plot()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/QeiDd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QeiDd.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 571, "user_id": 1520091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e1f0f856f262912274e9a74883e3754?s=128&d=identicon&r=PG", "display_name": "checkThisOut", "link": "https://stackoverflow.com/users/1520091/checkthisout"}, "is_accepted": false, "score": 0, "last_activity_date": 1564008843, "last_edit_date": 1564008843, "creation_date": 1564008242, "answer_id": 57192164, "question_id": 57191697, "link": "https://stackoverflow.com/questions/57191697/pandas-multiline-plot/57192164#57192164", "title": "Pandas - Multiline plot", "body": "<p>i would do it like that</p>\n\n<pre><code>df.groupby(['day', 'name']).weight.count().unstack().plot()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UQqin.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UQqin.png\" alt=\"The resulting plot\"></a></p>\n"}], "owner": {"reputation": 8415, "user_id": 505990, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QaLn2.jpg?s=128&g=1", "display_name": "Leonardo", "link": "https://stackoverflow.com/users/505990/leonardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 57192113, "answer_count": 3, "score": 1, "last_activity_date": 1564009186, "creation_date": 1564004984, "last_edit_date": 1564006636, "question_id": 57191697, "link": "https://stackoverflow.com/questions/57191697/pandas-multiline-plot", "title": "Pandas - Multiline plot", "body": "<p>My data frame is composed by 3 elements: Name, Date and Weight.</p>\n\n<p>I would like to plot a line graph where the X axis is the date, the Y is the COUNT OF weights (how many times a give subject weighted himself throughout the day) and each line is a different name.</p>\n\n<p>In order to do that, i gave it a shot:</p>\n\n<pre><code>dtFrame.sort_values(['date'])\n\ndtFrame.groupby(by=[\"date\",\"name\"])\ndtFrame.plot.line()\nplt.show()\n</code></pre>\n\n<p>but that was not what I expected... basically what i want is: <code>Select name, date, count(1) FROM myTable Groupby name, date</code></p>\n\n<p>What am i doing wrong?</p>\n\n<p>Edit1: Sample csv data  </p>\n\n<p>day, name, weight<br>\n1,a,5<br>\n1,a,5<br>\n1,a,7<br>\n1,b,5<br>\n1,b,5<br>\n2,a,5<br>\n2,a,5<br>\n2,a,7<br>\n2,b,5<br>\n2,b,5<br>\n3,a,5<br>\n3,a,5<br>\n3,a,7<br>\n3,b,5<br>\n3,b,5<br>\n4,a,5<br>\n4,a,5<br>\n4,a,7<br>\n4,b,5<br>\n4,b,5  </p>\n"}, {"tags": ["python", "package", "pypi"], "comments": [{"owner": {"reputation": 1740, "user_id": 4377521, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c9d2bda5df069b64d90ce679e09986a6?s=128&d=identicon&r=PG", "display_name": "sashaaero", "link": "https://stackoverflow.com/users/4377521/sashaaero"}, "edited": false, "score": 0, "creation_date": 1564005126, "post_id": 57191689, "comment_id": 100892945, "body": "<code>from . import *</code> =D"}, {"owner": {"reputation": 743, "user_id": 10067555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23629f32bc51e9dff04aec6b8eb51123?s=128&d=identicon&r=PG&f=1", "display_name": "karamazovbros", "link": "https://stackoverflow.com/users/10067555/karamazovbros"}, "reply_to_user": {"reputation": 1740, "user_id": 4377521, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c9d2bda5df069b64d90ce679e09986a6?s=128&d=identicon&r=PG", "display_name": "sashaaero", "link": "https://stackoverflow.com/users/4377521/sashaaero"}, "edited": false, "score": 0, "creation_date": 1564009621, "post_id": 57191689, "comment_id": 100894029, "body": "@sashaaero That didn&#39;t work for me."}, {"owner": {"reputation": 743, "user_id": 10067555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23629f32bc51e9dff04aec6b8eb51123?s=128&d=identicon&r=PG&f=1", "display_name": "karamazovbros", "link": "https://stackoverflow.com/users/10067555/karamazovbros"}, "reply_to_user": {"reputation": 1740, "user_id": 4377521, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c9d2bda5df069b64d90ce679e09986a6?s=128&d=identicon&r=PG", "display_name": "sashaaero", "link": "https://stackoverflow.com/users/4377521/sashaaero"}, "edited": false, "score": 0, "creation_date": 1564009863, "post_id": 57191689, "comment_id": 100894069, "body": "from dataglove.dataglove import *       - this worked in the --init--.py"}, {"owner": {"reputation": 743, "user_id": 10067555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23629f32bc51e9dff04aec6b8eb51123?s=128&d=identicon&r=PG&f=1", "display_name": "karamazovbros", "link": "https://stackoverflow.com/users/10067555/karamazovbros"}, "reply_to_user": {"reputation": 1740, "user_id": 4377521, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c9d2bda5df069b64d90ce679e09986a6?s=128&d=identicon&r=PG", "display_name": "sashaaero", "link": "https://stackoverflow.com/users/4377521/sashaaero"}, "edited": false, "score": 0, "creation_date": 1564011457, "post_id": 57191689, "comment_id": 100894340, "body": "however, i noticed it works on python 3.6 but not 2.7"}], "answers": [{"comments": [{"owner": {"reputation": 743, "user_id": 10067555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23629f32bc51e9dff04aec6b8eb51123?s=128&d=identicon&r=PG&f=1", "display_name": "karamazovbros", "link": "https://stackoverflow.com/users/10067555/karamazovbros"}, "edited": false, "score": 0, "creation_date": 1564005236, "post_id": 57191727, "comment_id": 100892983, "body": "Seems too extensive, since I have a lot of functions."}], "tags": [], "owner": {"reputation": 1707, "user_id": 11832127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zsq7r.png?s=128&g=1", "display_name": "ndclt", "link": "https://stackoverflow.com/users/11832127/ndclt"}, "is_accepted": false, "score": 0, "last_activity_date": 1564005543, "last_edit_date": 1564005543, "creation_date": 1564005173, "answer_id": 57191727, "question_id": 57191689, "link": "https://stackoverflow.com/questions/57191689/init-py-correct-import-layout/57191727#57191727", "title": "__init__.py correct import layout?", "body": "<p>You can add a <code>__all__ = ['one_function_name', 'another_one']</code> with <code>one_function_name</code> and <code>another_one</code> imported previously in your <code>__init__.py</code>.</p>\n\n<p>The <code>from &lt;package&gt; import *</code> is not a good idea because you will import package that you import in file (the <code>__all__</code> variable protect against this, see <a href=\"https://stackoverflow.com/a/44842/11832127\">this answer</a>) but it is not a good practice.</p>\n\n<p>edit:\nsashaaero comment does want you want.</p>\n"}, {"comments": [{"owner": {"reputation": 743, "user_id": 10067555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23629f32bc51e9dff04aec6b8eb51123?s=128&d=identicon&r=PG&f=1", "display_name": "karamazovbros", "link": "https://stackoverflow.com/users/10067555/karamazovbros"}, "edited": false, "score": 0, "creation_date": 1564009149, "post_id": 57192226, "comment_id": 100893929, "body": "Hmm, can I get your input on something then. Basically, I&#39;m just making a wrapper so the API functions are handled in one file right now. Does that make device.py sorta extraneous then. I tried the 2nd option and that didn&#39;t work."}], "tags": [], "owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "is_accepted": false, "score": 0, "last_activity_date": 1564073063, "last_edit_date": 1564073063, "creation_date": 1564008729, "answer_id": 57192226, "question_id": 57191689, "link": "https://stackoverflow.com/questions/57191689/init-py-correct-import-layout/57192226#57192226", "title": "__init__.py correct import layout?", "body": "<p>Either:</p>\n\n<ul>\n<li>move the functions from <code>device.py</code> to <code>__init__.py</code>, or</li>\n<li>use <code>from .device import *</code> in <code>__init__.py</code>.</li>\n</ul>\n"}], "owner": {"reputation": 743, "user_id": 10067555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23629f32bc51e9dff04aec6b8eb51123?s=128&d=identicon&r=PG&f=1", "display_name": "karamazovbros", "link": "https://stackoverflow.com/users/10067555/karamazovbros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1564073063, "creation_date": 1564004941, "question_id": 57191689, "link": "https://stackoverflow.com/questions/57191689/init-py-correct-import-layout", "title": "__init__.py correct import layout?", "body": "<p>File Structure:</p>\n\n<pre><code>device\n   device.py\n   __init__.py\n</code></pre>\n\n<p><code>__init__.py</code> contains just one line:</p>\n\n<pre><code>from device import *\n</code></pre>\n\n<p>device.py just has a bunch of functions, and I want to include all of them with\n<code>from device import *</code>, except I have to use <code>from device.device import *</code> after pip installing. </p>\n\n<p>How can I get rid of the extra scope so it's just <code>from device import *</code>?</p>\n"}, {"tags": ["python", "dataset", "isinstance"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1564005026, "post_id": 57191681, "comment_id": 100892916, "body": "Each <i>value</i> is a <code>float</code>, that however does not make <code>rho</code> itself a <code>float</code>, since it is an array of floats."}, {"owner": {"reputation": 1, "user_id": 10212576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c977124acfa4b052fa9467a120206007?s=128&d=identicon&r=PG&f=1", "display_name": "APMATH24", "link": "https://stackoverflow.com/users/10212576/apmath24"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1564005606, "post_id": 57191681, "comment_id": 100893066, "body": "how do you suggest I convert rho into a float"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1564005863, "post_id": 57191681, "comment_id": 100893138, "body": "A <code>float</code> is a single floating-point number. You can&#39;t make an array of floats into a single float, or it ceases to be an array. You say that in the documentation, &quot;each value in rho needs to be a float&quot;, so it is explicitly asking for an array of floats, not a single float."}, {"owner": {"reputation": 1, "user_id": 10212576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c977124acfa4b052fa9467a120206007?s=128&d=identicon&r=PG&f=1", "display_name": "APMATH24", "link": "https://stackoverflow.com/users/10212576/apmath24"}, "edited": false, "score": 0, "creation_date": 1564006084, "post_id": 57191681, "comment_id": 100893195, "body": "Is there a way for me to put a value of rho into isintance and return true for float? Because when I check dtype it says float32 but when i use isinstance it returns false"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1564006383, "post_id": 57191681, "comment_id": 100893282, "body": "This is sounding like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">xy problem</a>. Is there a specific reason you need the built-in <code>isinstance()</code> function to return the wrong type? Or are you open to solutions such as <code>isinstance(rho[0,0,0], float)</code> or <code>if rho.dtype==float32: return True</code>?"}, {"owner": {"reputation": 1, "user_id": 10212576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c977124acfa4b052fa9467a120206007?s=128&d=identicon&r=PG&f=1", "display_name": "APMATH24", "link": "https://stackoverflow.com/users/10212576/apmath24"}, "edited": false, "score": 0, "creation_date": 1564006521, "post_id": 57191681, "comment_id": 100893321, "body": "in a nutshell my problem is I am getting a TypeError: &#39;float&#39; object is not subscriptable error. This error comes from another portion of the simulation code trying to access rho. I don&#39;t understand why I get this error as I am no python expert, but I noticed that if I am using the codes built in example, the data type returns true for isinstance and so I feel like that should fix things."}], "owner": {"reputation": 1, "user_id": 10212576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c977124acfa4b052fa9467a120206007?s=128&d=identicon&r=PG&f=1", "display_name": "APMATH24", "link": "https://stackoverflow.com/users/10212576/apmath24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564006142, "creation_date": 1564004893, "last_edit_date": 1564006142, "question_id": 57191681, "link": "https://stackoverflow.com/questions/57191681/how-to-change-behaviour-of-isinstance-in-python", "title": "How to change behaviour of isinstance in python", "body": "<p>I am working with a large simulation code and am having a hard time executing some iteration. I have imported data of size 262144 from a text file and reshaped into a (64,64,64) set as such</p>\n\n<pre><code>    filename = path + 'density'\n    file = open(filename, mode='rb')\n    bin_array = array.array('f')\n    bin_array.fromfile(file, 64 * 64 * 64)\n    rho = np.reshape(bin_array, (64,64,64))\n</code></pre>\n\n<p>This is then stored in self.data as:</p>\n\n<pre><code>     self.data = [rho]\n</code></pre>\n\n<p>and accessed using self.data[0][x,y,z]. According to the manual for the code I'm working with, each value in rho needs to be a float of 4 bytes. Now when I run other working examples (call the data for this 'good_data'), the data used gives the following output for isinstance:</p>\n\n<pre><code>    isinstance(good_data, float) \n    &gt;&gt; True\n</code></pre>\n\n<p>Now when I use isinstance on rho, it returns false and I believe this is whats giving me problems. Can anyone tell me how I can have my data return true for isinstance? Essentially what I want is</p>\n\n<pre><code>    isinstance(rho[x,y,z], float)\n    &gt;&gt; True\n</code></pre>\n\n<p>When I check the dtype it returns float32 but returns false for isinstance.\nThank you all!</p>\n"}, {"tags": ["python", "python-3.x", "facebook"], "comments": [{"owner": {"reputation": 1619, "user_id": 94503, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9c8dd712cbc08c6053a3f9af3866b375?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/94503/paul"}, "edited": false, "score": 0, "creation_date": 1565371486, "post_id": 57191673, "comment_id": 101347102, "body": "Did you get to the bottom of this? I&#39;m having the same issue."}, {"owner": {"reputation": 377, "user_id": 2826067, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2370b5006c2071da36243f6f2d41f8a9?s=128&d=identicon&r=PG&f=1", "display_name": "sasawatc", "link": "https://stackoverflow.com/users/2826067/sasawatc"}, "reply_to_user": {"reputation": 1619, "user_id": 94503, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9c8dd712cbc08c6053a3f9af3866b375?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/94503/paul"}, "edited": false, "score": 1, "creation_date": 1565383392, "post_id": 57191673, "comment_id": 101351271, "body": "@Paul, nope. I&#39;m still having the issue. Although it seem safe to ignore, since it&#39;s still giving me the expected results, but I rather not have unwanted warnings in my code. Hope someone in the API team could clarify this."}, {"owner": {"reputation": 1619, "user_id": 94503, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9c8dd712cbc08c6053a3f9af3866b375?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/94503/paul"}, "edited": false, "score": 1, "creation_date": 1565504871, "post_id": 57191673, "comment_id": 101371242, "body": "Looks like FB have screwed the pooch with a recent API release. Perhaps it\u2019s related. See here: <a href=\"https://developers.facebook.com/support/bugs/2388934868015239/\" rel=\"nofollow noreferrer\">developers.facebook.com/support/bugs/2388934868015239</a>"}], "owner": {"reputation": 377, "user_id": 2826067, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2370b5006c2071da36243f6f2d41f8a9?s=128&d=identicon&r=PG&f=1", "display_name": "sasawatc", "link": "https://stackoverflow.com/users/2826067/sasawatc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 468, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1564004827, "creation_date": 1564004827, "question_id": 57191673, "link": "https://stackoverflow.com/questions/57191673/facebook-insights-api-userwarning-insights-does-not-allow-field", "title": "Facebook Insights API UserWarning: insights does not allow field", "body": "<p>I'm trying to get a list of all ad sets that I created in Facebook Ads. The pasted code was able to give me an expected output (except it wouldn't give me the conversion values). However, every time I run it, I will receive a message <code>UserWarning: insights does not allow field campaign_name warnings.warn(message)</code> on every fields.</p>\n\n<p>Am I doing something wrong here?</p>\n\n<p>Apologize for not referencing the code snippet...</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>account = AdAccount('act_xxxxx')\n\ndef wait_for_async_job(async_job):\n    async_job.api_get()\n    while async_job[AdReportRun.Field.async_status] != 'Job Completed' or async_job[AdReportRun.Field.async_percent_completion] &lt; 100:\n        time.sleep(1)\n        async_job.api_get()\n\n\nparams = {\n    'time_range': {\n        'since':  \"2019-07-17\",\n        'until': \"2019-07-23\"\n    },\n    'fields': [\n        AdsInsights.Field.campaign_name,\n        AdsInsights.Field.adset_name,\n        AdsInsights.Field.adset_id,\n        AdsInsights.Field.ad_name,\n        AdsInsights.Field.spend,\n        AdsInsights.Field.conversion_values,\n        AdsInsights.Field.clicks,\n        AdsInsights.Field.action_values,\n        AdsInsights.Field.purchase_roas\n    ],\n    'sort': [\n        'date_start_ascending'\n    ],\n    'action_report_time': AdsInsights.ActionReportTime.impression,\n    'level': AdsInsights.Level.adset,\n    'time_increment': 1\n}\n\nasync_job = account.get_insights_async(fields = params.get('fields'), params=params)\nwait_for_async_job(async_job)\nx = async_job.get_result(params={\"limit\": 25})\n</code></pre>\n"}, {"tags": ["javascript", "python"], "comments": [{"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 2, "creation_date": 1564005091, "post_id": 57191657, "comment_id": 100892933, "body": "Did you try <code>data.sort()</code>?"}, {"owner": {"reputation": 308, "user_id": 548123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898d9f81cdbf03b818c90f640c8cc2a3?s=128&d=identicon&r=PG", "display_name": "Allan Deamon", "link": "https://stackoverflow.com/users/548123/allan-deamon"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1564017409, "post_id": 57191657, "comment_id": 100895338, "body": "I did, but I think I got too confused by the documentation. I really believed that I would need a key function to sort."}, {"owner": {"reputation": 462, "user_id": 1284183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ca664b5be749d2930b68fdfac7047b7?s=128&d=identicon&r=PG&f=1", "display_name": "Glushiator", "link": "https://stackoverflow.com/users/1284183/glushiator"}, "edited": false, "score": 1, "creation_date": 1609262770, "post_id": 57191657, "comment_id": 115794658, "body": "I found this question interesting regardless it&#39;s simplicity... answer below."}], "answers": [{"comments": [{"owner": {"reputation": 462, "user_id": 1284183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ca664b5be749d2930b68fdfac7047b7?s=128&d=identicon&r=PG&f=1", "display_name": "Glushiator", "link": "https://stackoverflow.com/users/1284183/glushiator"}, "edited": false, "score": 1, "creation_date": 1609263667, "post_id": 57192004, "comment_id": 115794979, "body": "data.sort() will do exactly what it&#39;s implemented to do, not necessarily what I want \ud83d\ude02"}], "tags": [], "owner": {"reputation": 41, "user_id": 11832776, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZnzhzSKW6u0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3recojCC3whIpewNpbDdoYICQdqWXA/photo.jpg?sz=128", "display_name": "Josh Maxwell", "link": "https://stackoverflow.com/users/11832776/josh-maxwell"}, "is_accepted": false, "score": 1, "last_activity_date": 1564069885, "last_edit_date": 1564069885, "creation_date": 1564006982, "answer_id": 57192004, "question_id": 57191657, "link": "https://stackoverflow.com/questions/57191657/sort-js-array-by-value-like-python/57192004#57192004", "title": "Sort JS array by value like Python", "body": "<p><code>data.sort()</code> will do exactly what you want<br>\nit only sorts the immediate level of the array<br>\n<code>data[3].sort()</code> will change <code>[1,3,0,00,14]</code> to <code>[0,00,1,14,3]</code> </p>\n"}, {"comments": [{"owner": {"reputation": 3645, "user_id": 8893827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec53638d267dd00f2ab5bd2ad65907e?s=128&d=identicon&r=PG&f=1", "display_name": "adir abargil", "link": "https://stackoverflow.com/users/8893827/adir-abargil"}, "edited": false, "score": 0, "creation_date": 1611660581, "post_id": 65496148, "comment_id": 116516772, "body": "wow thats nice!"}], "tags": [], "owner": {"reputation": 462, "user_id": 1284183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ca664b5be749d2930b68fdfac7047b7?s=128&d=identicon&r=PG&f=1", "display_name": "Glushiator", "link": "https://stackoverflow.com/users/1284183/glushiator"}, "is_accepted": false, "score": 3, "last_activity_date": 1609262557, "creation_date": 1609262557, "answer_id": 65496148, "question_id": 57191657, "link": "https://stackoverflow.com/questions/57191657/sort-js-array-by-value-like-python/65496148#65496148", "title": "Sort JS array by value like Python", "body": "<p>So... I stumbled myself wondering how the Array's sort method works and it really looks counter intuitive to me, but maybe it's just me.</p>\n<p>Anyway... considering my python background I decided to write a <code>sorted</code> function that tries to implement python's sorting logic.</p>\n<p>The function return a sorted array without modifying the original.</p>\n<p>There are two optional parameters passed as second argument in form of a <code>kwargs</code> object.</p>\n<p>Optional parameters are:</p>\n<ul>\n<li><code>reverse</code> - when <code>reverse</code> is <code>false</code> (the default) the sorting is ascending, in case it's <code>true</code> then the sorting is descending.</li>\n<li><code>key</code> - is a <code>key</code> generator function that processes the <code>items</code> array producing keys with it's original positions and then sorts keys using simple comparison between primitives or tuple like comparison similar to python's</li>\n</ul>\n<p>After sorting the key array the original array is returned ordered according to key's position in sorted output.</p>\n<p>Source:</p>\n<pre><code>function sorted(items, kwargs={}) {\n    const key = kwargs.key === undefined ? x =&gt; x : kwargs.key;\n    const reverse = kwargs.reverse === undefined ? false : kwargs.reverse;\n    const sortKeys = items.map((item, pos) =&gt; [key(item), pos]);\n    const comparator =\n        Array.isArray(sortKeys[0][0])\n        ? ((left, right) =&gt; {\n            for (var n = 0; n &lt; Math.min(left.length, right.length); n++) {\n                const vLeft = left[n], vRight = right[n];\n                const order = vLeft == vRight ? 0 : (vLeft &gt; vRight ? 1 : -1);\n                if (order != 0) return order;\n            }\n            return left.length - right.length;\n        })\n        : ((left, right) =&gt; {\n            const vLeft = left[0], vRight = right[0];\n            const order = vLeft == vRight ? 0 : (vLeft &gt; vRight ? 1 : -1);\n            return order;\n        });\n    sortKeys.sort(comparator);\n    if (reverse) sortKeys.reverse();\n    return sortKeys.map((order) =&gt; items[order[1]]);\n}\n</code></pre>\n<p>Usage examples:</p>\n<pre><code>console.log(sorted([-1, 9, -3, 4, -3, 6, 1, -7], {reverse: true}));\nconsole.log(sorted([-1, 9, -3, 4, -3, 6, 1, -7]));\nconsole.log(sorted([&quot;U&quot;, &quot;z&quot;, &quot;Z&quot;, &quot;f&quot;, &quot;F&quot;, &quot;a&quot;, &quot;c&quot;, &quot;d&quot;, &quot;x&quot;], {key: x =&gt; [x.toLowerCase(), x]}));\nconsole.log(sorted(['-1', '9', '-3', '4', '-3', '6', '1', '-7', '11111']));\nconsole.log(sorted(['-1', '9', '-3', '4', '-3', '6', '1', '-7', '11111'], {key: x =&gt; parseFloat(x)}));\n\ndata = [\n    { 'id': [2], 'other properties': null },\n    { 'id': [1,3,0,00,-15], 'other properties': null },\n    { 'id': [1,-3,0,00,15], 'other properties': null },\n    { 'id': [1,-3,0,00,-15], 'other properties': null },\n    { 'id': [1,0,0], 'other properties': null },\n    { 'id': [1,3,0,00,14], 'other properties': null },\n    { 'id': [1,3,0], 'other properties': null },\n]\n\nconsole.log(&quot;PY asc&quot;, sorted(data, {key: x=&gt;x.id}))\n\nconsole.log(&quot;JS asc&quot;, [...data].sort(x=&gt;x.id))\n\nconsole.log(&quot;PY desc&quot;, sorted(data, {key: x=&gt;x.id, reverse: true}))\n\nconsole.log(&quot;JS desc&quot;, [...data].sort(x=&gt;x.id).reverse())\n</code></pre>\n<p>Output for data provided by the original question:</p>\n<pre><code>PY asc [\n  { id: [ 1, -3, 0, 0, -15 ], 'other properties': null },\n  { id: [ 1, -3, 0, 0, 15 ], 'other properties': null },\n  { id: [ 1, 0, 0 ], 'other properties': null },\n  { id: [ 1, 3, 0 ], 'other properties': null },\n  { id: [ 1, 3, 0, 0, -15 ], 'other properties': null },\n  { id: [ 1, 3, 0, 0, 14 ], 'other properties': null },\n  { id: [ 2 ], 'other properties': null }\n]\nJS asc [\n  { id: [ 2 ], 'other properties': null },\n  { id: [ 1, 3, 0, 0, -15 ], 'other properties': null },\n  { id: [ 1, -3, 0, 0, 15 ], 'other properties': null },\n  { id: [ 1, -3, 0, 0, -15 ], 'other properties': null },\n  { id: [ 1, 0, 0 ], 'other properties': null },\n  { id: [ 1, 3, 0, 0, 14 ], 'other properties': null },\n  { id: [ 1, 3, 0 ], 'other properties': null }\n]\nPY desc [\n  { id: [ 2 ], 'other properties': null },\n  { id: [ 1, 3, 0, 0, 14 ], 'other properties': null },\n  { id: [ 1, 3, 0, 0, -15 ], 'other properties': null },\n  { id: [ 1, 3, 0 ], 'other properties': null },\n  { id: [ 1, 0, 0 ], 'other properties': null },\n  { id: [ 1, -3, 0, 0, 15 ], 'other properties': null },\n  { id: [ 1, -3, 0, 0, -15 ], 'other properties': null }\n]\nJS desc [\n  { id: [ 1, 3, 0 ], 'other properties': null },\n  { id: [ 1, 3, 0, 0, 14 ], 'other properties': null },\n  { id: [ 1, 0, 0 ], 'other properties': null },\n  { id: [ 1, -3, 0, 0, -15 ], 'other properties': null },\n  { id: [ 1, -3, 0, 0, 15 ], 'other properties': null },\n  { id: [ 1, 3, 0, 0, -15 ], 'other properties': null },\n  { id: [ 2 ], 'other properties': null }\n]\n</code></pre>\n<p>That's all folks.</p>\n"}], "owner": {"reputation": 308, "user_id": 548123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/898d9f81cdbf03b818c90f640c8cc2a3?s=128&d=identicon&r=PG", "display_name": "Allan Deamon", "link": "https://stackoverflow.com/users/548123/allan-deamon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1609262557, "creation_date": 1564004699, "last_edit_date": 1564069786, "question_id": 57191657, "link": "https://stackoverflow.com/questions/57191657/sort-js-array-by-value-like-python", "title": "Sort JS array by value like Python", "body": "<p><strong>NOTE: The question was fundamentally updated after first answers</strong></p>\n\n<p>How can I do in JS an array sorting equivalent of the python code <code>sort(array)</code> or <code>array.sort()</code> (inplace), like in this example:</p>\n\n<pre><code>data = [\n    { 'id': [2], 'other properties': ... },\n    { 'id': [1,3,0,00,15], 'other properties': ... },\n    { 'id': [1,0,0], 'other properties': ... },\n    { 'id': [1,3,0,00,14], 'other properties': ... },\n    { 'id': [1,3,0], 'other properties': ... },\n]\n\ndata.sort(key = lambda e: e['id'] )\n\n\n# output \ndata == \n    [\n        { 'id': [1, 0], 'other properties': ...},\n        { 'id': [1, 0, 0], 'other properties': ...},\n        { 'id': [1, 3, 0], 'other properties': ...},\n        { 'id': [1, 3, 0, 0, 14], 'other properties': ...},\n        { 'id': [1, 3, 0, 0, 15], 'other properties': ...},\n        { 'id': [2] 'other properties': ...},\n    ]\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "kivy", "kivy-language"], "comments": [{"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 1, "creation_date": 1564015648, "post_id": 57191616, "comment_id": 100895027, "body": "It looks like you are writing the new product to your database file, but that is not sufficient to get the new product displayed anywhere. You would need to either re-read the updated database file and re-create the product labels, or enter the new product into your <code>databaseDict</code> and add a new label for the new product."}, {"owner": {"reputation": 191, "user_id": 11787949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95682a21b784cc12dc8a4a6bee587450?s=128&d=identicon&r=PG&f=1", "display_name": "Mate", "link": "https://stackoverflow.com/users/11787949/mate"}, "reply_to_user": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1564048719, "post_id": 57191616, "comment_id": 100906571, "body": "very helpful comment thank you!"}], "owner": {"reputation": 191, "user_id": 11787949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95682a21b784cc12dc8a4a6bee587450?s=128&d=identicon&r=PG&f=1", "display_name": "Mate", "link": "https://stackoverflow.com/users/11787949/mate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1594218900, "creation_date": 1564004388, "last_edit_date": 1594218900, "question_id": 57191616, "link": "https://stackoverflow.com/questions/57191616/input-data-does-not-save-immediately-only-after-exiting-program", "title": "Input Data does not save immediately only after exiting program", "body": "<p>I am making a business tracking app where a user can type in a product's name with price and that data is turned into a dictionary and is saved in a Database (a txt  file.)</p>\n<p>Then the key and value pair is loaded into a Label's text so the user can see all of their products.</p>\n<p>I've added an 'add new product' mechanic to the program (which just saves input data from the user in the database) and it works just fine, but the problem is that after the new product is saved it does not appear on the Label's text but when I exit out of the program and run it, then new products appear.</p>\n<p>So I experimented little with the program, I created a new label where all the products amount number is showed when a button is clicked, it shows a number (amount of product stored number*) and it is also printed to the console. It showed all the products stored before the program opened but didnt show the new ones entered by the user.</p>\n<p>Lastly i checked the txt file after the user saves newly added products and after the program is closed, then the new products show in the text file.</p>\n<p>So how do I save new products immediately after user saved them?</p>\n<p>py:</p>\n<pre><code>...\nclass Screen_two(Screen):\n    def __init__(self, **kwargs):\n        super().__init__(**kwargs)\n        Clock.schedule_interval(self.update_amount_label, 5)\n\n    def update_amount_label_with_textinput(self, dt):\n        self.ids.productsamount.text = 'From Textinput: {}'.format(db.databaseDict)\n\n    def update_amount_label(self, dt):\n        n = 0\n        for i in db.databaseDict.items():\n            n += 1\n        self.ids.productsamount.text = 'Amount of goods: {}'.format(n)\n        print(n)\n\n    def addbtn(self):\n        open_addbut_popup()\n\n    def edbtn(self):\n        open_edbut_popup()\n\n    def delbtn(self):\n        open_delbut_popup()\n...\nclass GoodsView(ScrollView):\n    def __init__(self, *args,**kwargs):\n        super().__init__(*args, **kwargs)\n        Clock.schedule_once(self.post_init, 0)\n\n\n\n    def post_init(self, dt):        \n            \n                                    #here it is where new labels are generated\n\n        n = 0\n        for k, v in db.databaseDict.items():\n            n += 1\n            self.LBL1 = NicerLabel(\n                text=str(k),\n                size_hint=(1.5, 1),\n                font_size='15sp',\n                halign='right')\n\n            self.LBL3 = NicerLabel(\n                text=':',\n                font_size='18sp',\n                size_hint=(.075, 1))\n\n            self.LBL2 = NicerLabel(\n                text=str(v),\n                font_size='15sp',\n                size_hint=(.3, 1))\n\n\n            self.ids.GoodsContainer.add_widget(self.LBL1)\n            self.ids.GoodsContainer.add_widget(self.LBL3)\n            self.ids.GoodsContainer.add_widget(self.LBL2)\n...\nclass addbut_popup(FloatLayout):\n    addprodname = ObjectProperty(None)\n    addprodprice = ObjectProperty(None)\n\n             #here the new products are sent to database and saved being there \n\n\n    def add_product(self):\n        if self.addprodname.text != &quot;&quot; and '.' not in self.addprodname.text:\n            if re.findall(r'\\D', self.addprodprice.text) == []:\n                db.add_product(self.addprodname.text, self.addprodprice.text)\n\n                self.reset()\n            else:\n                invalid()\n                self.reset()\n        else:\n            invalid()\n            self.reset()\n\n    def reset(self):\n        self.addprodname.text = ''\n        self.addprodprice.text = ''\n...\n</code></pre>\n<p>Database.py:</p>\n<pre><code>class Database:\n    def __init__(self, CalculatorDatabase):\n        self.CalculatorDatabase = CalculatorDatabase\n        self.database = None\n        self.databaseDict = None\n        self.load()\n\n    def load(self):\n        self.database = open(self.CalculatorDatabase, 'r')\n        self.databaseDict = {}\n        for line in self.database:\n            name, price = line.split(':')\n            self.databaseDict[name] = price\n        self.database.close()\n\n    def add_product(self, product_name, product_price):\n        with open(self.CalculatorDatabase, 'a') as text:\n            text.write('{}: {}\\n'.format(product_name, product_price))\n</code></pre>\n<p>kv:</p>\n<pre><code>...\n         # this is the part where i experimented with label text and textinput \n         # so i could understand my problem better \n\n&lt;Screen_two&gt;:                 \n    productsamount:productsamount\n    textinput:textinput\n    Label:\n        text: 'amount'\n        font_size:'11dp'\n        id:productsamount\n        canvas.before:\n            Color:\n                rgba: 1, 0, 0, 1\n            Rectangle:\n                size: self.size\n                pos: self.pos\n        size_hint: .15, .05\n        pos_hint: {'x': .1, 'y': .95}\n    Button:\n        text:'change_amount'\n        canvas.before:\n            Color:\n                rgba: 1, 0, 0, 1\n            Rectangle:\n                size: self.size\n                pos: self.pos\n        size_hint: .15, .05\n        pos_hint: {'x': .4, 'y': .95}\n        on_release:\n            root.update_amount_label_with_textinput(None)\n    TextInput:\n        id:textinput\n        text:'enter:'\n\n        size_hint: .15, .05\n        pos_hint: {'x': .7, 'y': .95}\n\n...\n\n&lt;addbut_popup&gt;:\n    addprodname:addprodname\n    addprodprice:addprodprice\n    GridLayout:\n        size_hint: .7, .2\n        pos_hint: {'x': .15,'y': .75}\n        spacing:5\n        cols:2\n        rows:2\n        Label:\n            text: 'Aru nev:'\n            size_hint: .35, 1\n            canvas.before:\n                Color:\n                    rgba: .5, .5, .5, 1\n                Rectangle:\n                    size: self.size\n                    pos: self.pos\n        TextInput:\n            id:addprodname\n            multiline:False\n        Label:\n            text: 'Aru ar:'\n            size_hint: .35, 1\n            canvas.before:\n                Color:\n                    rgba: .5, .5, .5, 1\n                Rectangle:\n                    size: self.size\n                    pos: self.pos\n        TextInput:\n            id:addprodprice\n            multiline:False\n    Button:\n        text: 'ADD'\n        size_hint: .3, .2\n        pos_hint: {'x': .35,'y': .35}\n        on_release: root.add_product()\n...\n</code></pre>\n"}, {"tags": ["python", "sqlite", "sqlalchemy"], "comments": [{"owner": {"reputation": 1529, "user_id": 1936321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/634d8319091a309ada6d6c47c679eee6?s=128&d=identicon&r=PG", "display_name": "Sazzy", "link": "https://stackoverflow.com/users/1936321/sazzy"}, "edited": false, "score": 0, "creation_date": 1564004514, "post_id": 57191613, "comment_id": 100892786, "body": "What does your model look like? Is the column data type DateTime or Float?"}, {"owner": {"reputation": 5764, "user_id": 1336532, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/93e5830761f6e85757991d5915369349?s=128&d=identicon&r=PG", "display_name": "Mahoni", "link": "https://stackoverflow.com/users/1336532/mahoni"}, "reply_to_user": {"reputation": 1529, "user_id": 1936321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/634d8319091a309ada6d6c47c679eee6?s=128&d=identicon&r=PG", "display_name": "Sazzy", "link": "https://stackoverflow.com/users/1936321/sazzy"}, "edited": false, "score": 0, "creation_date": 1564010090, "post_id": 57191613, "comment_id": 100894110, "body": "@Sazzy It&#39;s DateTime"}, {"owner": {"reputation": 1529, "user_id": 1936321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/634d8319091a309ada6d6c47c679eee6?s=128&d=identicon&r=PG", "display_name": "Sazzy", "link": "https://stackoverflow.com/users/1936321/sazzy"}, "edited": false, "score": 0, "creation_date": 1564063166, "post_id": 57191613, "comment_id": 100914836, "body": "Consider using a <code>datetime.datetime</code> object to do a comparison with instead of the <code>float</code>. You may see the raw value stored as a float in the SQLite database, but it gets converted to a datetime object internally."}, {"owner": {"reputation": 5764, "user_id": 1336532, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/93e5830761f6e85757991d5915369349?s=128&d=identicon&r=PG", "display_name": "Mahoni", "link": "https://stackoverflow.com/users/1336532/mahoni"}, "reply_to_user": {"reputation": 1529, "user_id": 1936321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/634d8319091a309ada6d6c47c679eee6?s=128&d=identicon&r=PG", "display_name": "Sazzy", "link": "https://stackoverflow.com/users/1936321/sazzy"}, "edited": false, "score": 0, "creation_date": 1564078036, "post_id": 57191613, "comment_id": 100922251, "body": "@Sazzy Sorry, didn&#39;t realize that&#39;s what I am actually doing: <code>datetime.datetime.utcfromtimestamp(1564004268.302929)</code> I tried just using the float, too. Updating my question now."}, {"owner": {"reputation": 1529, "user_id": 1936321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/634d8319091a309ada6d6c47c679eee6?s=128&d=identicon&r=PG", "display_name": "Sazzy", "link": "https://stackoverflow.com/users/1936321/sazzy"}, "edited": false, "score": 0, "creation_date": 1564084480, "post_id": 57191613, "comment_id": 100924985, "body": "This may be helpful: <a href=\"https://gist.github.com/danielthiel/8374607#gistcomment-2377432\" rel=\"nofollow noreferrer\">gist.github.com/danielthiel/8374607#gistcomment-2377432</a>"}], "owner": {"reputation": 5764, "user_id": 1336532, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/93e5830761f6e85757991d5915369349?s=128&d=identicon&r=PG", "display_name": "Mahoni", "link": "https://stackoverflow.com/users/1336532/mahoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564078167, "creation_date": 1564004381, "last_edit_date": 1564078167, "question_id": 57191613, "link": "https://stackoverflow.com/questions/57191613/pass-timestamp-with-milliseconds-to-sqlalchemy-backed-by-sqlite3", "title": "Pass timestamp with milliseconds to SQLAlchemy backed by SQLite3", "body": "<p>It seems SQLAlchemy doesn't translate <code>filter</code> with a timestamp having fractional seconds properly to SQLite3:</p>\n\n<p><code>.filter(User.created_at &lt;= datetime.datetime.utcfromtimestamp(1564004268.302929))</code></p>\n\n<p>But from what I've observed via debugging, only the seconds are passed to SQLite3 via SQLAlchemy. What's the correct way of performing this query?</p>\n\n<p>I've also tried doing the comparison with just the float.</p>\n"}, {"tags": ["python", "pandas", "numpy", "countvectorizer"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1564013399, "post_id": 57191607, "comment_id": 100894684, "body": "The first thing <code>savetxt</code> does is <code>x = np.asarray(x)</code>, that is try to turn the input into a numpy array (if it isn&#39;t already).  What does <code>np.asarray(X)</code> do to your <code>X</code>?"}, {"owner": {"reputation": 1186, "user_id": 2458922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/becbcc9a3ace0d9238fa0329c0502b71?s=128&d=identicon&r=PG", "display_name": "user2458922", "link": "https://stackoverflow.com/users/2458922/user2458922"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1564062525, "post_id": 57191607, "comment_id": 100914437, "body": "Sorry What ? x = np.asarray(x) .. Where .. ?"}], "answers": [{"tags": [], "owner": {"reputation": 1186, "user_id": 2458922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/becbcc9a3ace0d9238fa0329c0502b71?s=128&d=identicon&r=PG", "display_name": "user2458922", "link": "https://stackoverflow.com/users/2458922/user2458922"}, "is_accepted": true, "score": 0, "last_activity_date": 1564004692, "creation_date": 1564004692, "answer_id": 57191654, "question_id": 57191607, "link": "https://stackoverflow.com/questions/57191607/python-word-vect-numpy-array-on-saving-to-csv-gave-error-on-dimension-expecte/57191654#57191654", "title": "Python Word Vect numpy array, on saving to csv gave error on dimension , Expected 1D or 2D array, got 0D array instead", "body": "<p>X.toarray() # Was missing</p>\n\n<pre><code>np.savetxt('logvect.csv', X.toarray(), delimiter=',')\n</code></pre>\n"}], "owner": {"reputation": 1186, "user_id": 2458922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/becbcc9a3ace0d9238fa0329c0502b71?s=128&d=identicon&r=PG", "display_name": "user2458922", "link": "https://stackoverflow.com/users/2458922/user2458922"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 57191654, "answer_count": 1, "score": 0, "last_activity_date": 1564004692, "creation_date": 1564004341, "question_id": 57191607, "link": "https://stackoverflow.com/questions/57191607/python-word-vect-numpy-array-on-saving-to-csv-gave-error-on-dimension-expecte", "title": "Python Word Vect numpy array, on saving to csv gave error on dimension , Expected 1D or 2D array, got 0D array instead", "body": "<p>Saving wordVect gave error,</p>\n\n<pre><code>from sklearn.feature_extraction.text import CountVectorizer\ncorpus = [\n    'This is the first document.',\n    'This document is the second document.',\n    'And this is the third one.',\n    'Is this the first document?',\n]\nvectorizer = CountVectorizer(ngram_range=()\nX = vectorizer.fit_transform(corpus)\n\n# Save The Vector \nnp.savetxt('logvect.csv', X, delimiter=',')\n</code></pre>\n\n<p>Got Error</p>\n\n<p><strong>----> 1 np.savetxt('logvect.csv', X, delimiter=',')</strong></p>\n\n<pre><code>   1375         if X.ndim == 0 or X.ndim &gt; 2:\n   1376             raise ValueError(\n-&gt; 1377                 \"Expected 1D or 2D array, got %dD array instead\" % X.ndim)\n   1378         elif X.ndim == 1:\n   1379             # Common case -- 1d array of numbers\n\nValueError: Expected 1D or 2D array, got 0D array instead\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 2703, "user_id": 3849781, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/23e4b8c555049a94eddbfcc05ec4ae69?s=128&d=identicon&r=PG&f=1", "display_name": "YohanRoth", "link": "https://stackoverflow.com/users/3849781/yohanroth"}, "edited": false, "score": 0, "creation_date": 1564008703, "post_id": 57191648, "comment_id": 100893841, "body": "this worked for me -- sum = s.div(s.sum(axis=1), axis=0)"}], "tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 3, "last_activity_date": 1564004640, "creation_date": 1564004640, "answer_id": 57191648, "question_id": 57191599, "link": "https://stackoverflow.com/questions/57191599/add-and-normalize-rows-where-keys-repeat-in-pandas/57191648#57191648", "title": "Add and normalize rows where keys repeat in pandas", "body": "<p>Simply reuse your <code>GroupBy</code> sum object</p>\n\n<pre><code>g = df.groupby('key')\ns = g.sum()\n\ns/s.sum(1).values\n</code></pre>\n\n<hr>\n\n<pre><code>    f1  f2  f3\nkey         \n1   0.5 0.5 0.0\n2   0.0 0.0 1.0\n3   0.5 0.0 0.5\n</code></pre>\n"}], "owner": {"reputation": 2703, "user_id": 3849781, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/23e4b8c555049a94eddbfcc05ec4ae69?s=128&d=identicon&r=PG&f=1", "display_name": "YohanRoth", "link": "https://stackoverflow.com/users/3849781/yohanroth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 57191648, "answer_count": 1, "score": 0, "last_activity_date": 1564004837, "creation_date": 1564004277, "last_edit_date": 1564004837, "question_id": 57191599, "link": "https://stackoverflow.com/questions/57191599/add-and-normalize-rows-where-keys-repeat-in-pandas", "title": "Add and normalize rows where keys repeat in pandas", "body": "<p>How do I add and normalize (divide by total row sum) all rows with repetitive key (having key-column sorted)? </p>\n\n<p>Consider pandas df</p>\n\n<pre><code>key | f1 | f2 | f3\n1   | 0  |  1 | 0\n1   | 1  |  0 | 0\n2   | 0  |  0 | 1\n2   | 0  |  0 | 1\n3   | 1  |  0 | 1\n</code></pre>\n\n<p>and desired output</p>\n\n<pre><code>key | f1 | f2 | f3\n1   | 0.5| 0.5| 0\n2   | 0  |  0 | 1\n3   | 0.5|  0 | 0.5\n</code></pre>\n\n<p>In output key column has unique values.</p>\n\n<p>thank you</p>\n"}, {"tags": ["python", "python-3.x", "google-app-engine", "google-cloud-platform", "google-cloud-storage"], "comments": [{"owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "edited": false, "score": 0, "creation_date": 1564004375, "post_id": 57191557, "comment_id": 100892741, "body": "Can you share your <code>requirements.txt</code> file?"}, {"owner": {"reputation": 11, "user_id": 11832900, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--xkjnouO--s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rciZHGrCnKV5lUhjkwbmC1S6pxthA/photo.jpg?sz=128", "display_name": "kdg", "link": "https://stackoverflow.com/users/11832900/kdg"}, "reply_to_user": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "edited": false, "score": 0, "creation_date": 1564005623, "post_id": 57191557, "comment_id": 100893073, "body": "Flask==1.0.2 gunicorn==19.9.0 firebase-admin==2.13.0 google-cloud-firestore==0.29.0 google-cloud-storage==1.17.0 lxml==3.7.3"}, {"owner": {"reputation": 11, "user_id": 11832900, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--xkjnouO--s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rciZHGrCnKV5lUhjkwbmC1S6pxthA/photo.jpg?sz=128", "display_name": "kdg", "link": "https://stackoverflow.com/users/11832900/kdg"}, "reply_to_user": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "edited": false, "score": 0, "creation_date": 1564005658, "post_id": 57191557, "comment_id": 100893084, "body": "Is this the problem with google-cloud-storage version? thanks"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 1573768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0af93457afff85aa5115aa3f504c15?s=128&d=identicon&r=PG", "display_name": "Pilipenok Oleg", "link": "https://stackoverflow.com/users/1573768/pilipenok-oleg"}, "edited": false, "score": 0, "creation_date": 1583000978, "post_id": 57191935, "comment_id": 106972844, "body": "I&#39;ve got the same error on the last AI Platform Prediction runtime 1.15 (google-cloud-storage 1.19.1)."}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "reply_to_user": {"reputation": 91, "user_id": 1573768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0af93457afff85aa5115aa3f504c15?s=128&d=identicon&r=PG", "display_name": "Pilipenok Oleg", "link": "https://stackoverflow.com/users/1573768/pilipenok-oleg"}, "edited": false, "score": 0, "creation_date": 1583001229, "post_id": 57191935, "comment_id": 106972929, "body": "@PilipenokOleg - Create a new question with your details."}], "tags": [], "owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "is_accepted": true, "score": 2, "last_activity_date": 1564006525, "creation_date": 1564006525, "answer_id": 57191935, "question_id": 57191557, "link": "https://stackoverflow.com/questions/57191557/failed-to-connect-to-cloud-storage-after-deploying-to-gcp-app-engine/57191935#57191935", "title": "failed to connect to cloud storage after deploying to gcp app engine", "body": "<p>You are using old libraries. Update your requirements.txt to use the current versions.</p>\n\n<p>For example:</p>\n\n<p>You are using <code>google-cloud-firestore==0.29.0</code> but the current version is <code>google-cloud-firestore==1.3.0</code></p>\n\n<p>Most of your modules are out of date and in some case not compatible (and ancient library with a current library).</p>\n"}], "owner": {"reputation": 11, "user_id": 11832900, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--xkjnouO--s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rciZHGrCnKV5lUhjkwbmC1S6pxthA/photo.jpg?sz=128", "display_name": "kdg", "link": "https://stackoverflow.com/users/11832900/kdg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 57191935, "answer_count": 1, "score": 0, "last_activity_date": 1564006525, "creation_date": 1564004025, "last_edit_date": 1564005715, "question_id": 57191557, "link": "https://stackoverflow.com/questions/57191557/failed-to-connect-to-cloud-storage-after-deploying-to-gcp-app-engine", "title": "failed to connect to cloud storage after deploying to gcp app engine", "body": "<p>I'm developing a Flask app on App Engine VM. I want to upload file to Google Cloud Storage so i use <code>storage_client = storage.Client()</code> to connect to cloud storage. My app is working perfectly without error when testing in VM alone. However, after I deployed using <code>gcloud app deploy</code> and tested the upload function on my deployed app, it failed and returned <code>Internet 500</code> error. The log showed the traceback and it is due to the line of code connecting to cloud storage: <code>storage_client = storage.Client()</code></p>\n\n<p>The specific error is <code>__init__() takes 2 positional arguments but 3 were given</code> shown in cloud storage library function. I have python 3.5 for this app and i really don't know how to resolve this. Any help would be really appreciated!</p>\n\n<pre><code>Traceback (most recent call last):\n  File \\\"/env/lib/python3.5/site-packages/flask/app.py\\\", line 2292, in wsgi_app\n    response = self.full_dispatch_request()\n  File \\\"/env/lib/python3.5/site-packages/flask/app.py\\\", line 1815, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n  File \\\"/env/lib/python3.5/site-packages/flask/app.py\\\", line 1718, in handle_user_exception\n    reraise(exc_type, exc_value, tb)\n  File \\\"/env/lib/python3.5/site-packages/flask/_compat.py\\\", line 35, in reraise\n    raise value\n  File \\\"/env/lib/python3.5/site-packages/flask/app.py\\\", line 1813, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \\\"/env/lib/python3.5/site-packages/flask/app.py\\\", line 1799, in dispatch_request\n    return self.view_functions[rule.endpoint](**req.view_args)\n  File \\\"/home/vmagent/app/main.py\\\", line 59, in select_date\n    generate_report(log_lists)\n  File \\\"/home/vmagent/app/main.py\\\", line 83, in generate_report\n    storage_client = storage.Client()\n  File \\\"/env/lib/python3.5/site-packages/google/cloud/storage/client.py\\\", line 86, in __init__\n    self._connection = Connection(self, client_info=client_info)\n  File \\\"/env/lib/python3.5/site-packages/google/cloud/storage/_http.py\\\", line 33, in __init__\n    super(Connection, self).__init__(client, client_info)\nTypeError: __init__() takes 2 positional arguments but 3 were given\n</code></pre>\n\n<p>And below is my \"requirements.txt\":</p>\n\n<pre><code>Flask==1.0.2\ngunicorn==19.9.0\nfirebase-admin==2.13.0\ngoogle-cloud-firestore==0.29.0\ngoogle-cloud-storage==1.17.0\nlxml==3.7.3\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "csv"], "comments": [{"owner": {"reputation": 573, "user_id": 3911355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a661e8c2c34e2e0b0fa6c57bfd513?s=128&d=identicon&r=PG", "display_name": "mgrollins", "link": "https://stackoverflow.com/users/3911355/mgrollins"}, "edited": false, "score": 0, "creation_date": 1564005308, "post_id": 57191535, "comment_id": 100892999, "body": "Your example output is comma separated, not tab separated. Which do you need? When confirmed, I will update my answer below"}, {"owner": {"reputation": 793, "user_id": 1538828, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/26a91fdcc5fdb54d8005bc384a317723?s=128&d=identicon&r=PG", "display_name": "Aqua267", "link": "https://stackoverflow.com/users/1538828/aqua267"}, "reply_to_user": {"reputation": 573, "user_id": 3911355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a661e8c2c34e2e0b0fa6c57bfd513?s=128&d=identicon&r=PG", "display_name": "mgrollins", "link": "https://stackoverflow.com/users/3911355/mgrollins"}, "edited": false, "score": 0, "creation_date": 1564005408, "post_id": 57191535, "comment_id": 100893014, "body": "its tab seperated. I was wondering if there&#39;s a way to do it without having to write to an output file."}, {"owner": {"reputation": 573, "user_id": 3911355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a661e8c2c34e2e0b0fa6c57bfd513?s=128&d=identicon&r=PG", "display_name": "mgrollins", "link": "https://stackoverflow.com/users/3911355/mgrollins"}, "edited": false, "score": 0, "creation_date": 1564005717, "post_id": 57191535, "comment_id": 100893103, "body": "Well, your &quot;trim_row&quot; above is a tab separated list and should give you what you want then? Try <code>print(trim_row)</code> and you should see the values separated by a tab."}], "answers": [{"tags": [], "owner": {"reputation": 573, "user_id": 3911355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a661e8c2c34e2e0b0fa6c57bfd513?s=128&d=identicon&r=PG", "display_name": "mgrollins", "link": "https://stackoverflow.com/users/3911355/mgrollins"}, "is_accepted": false, "score": 0, "last_activity_date": 1564005263, "creation_date": 1564005263, "answer_id": 57191743, "question_id": 57191535, "link": "https://stackoverflow.com/questions/57191535/building-a-tab-separated-row/57191743#57191743", "title": "Building a tab separated row", "body": "<p>I would recommend you use <code>csv.writer</code> to more easily take advantage of the standard library. The example code below expects the self.out_file_name to be added to your method:</p>\n\n<pre><code>with open(self.file_name, 'r') as input_file and open(self.out_file_name, 'w') as output_file:\n    reader = csv.reader(input_file, delimiter='\\t')\n    writer = csv.writer(output_file)\n    for row in reader:\n        writer.writerow([row[0], row[1], row[2], row[4], row[11]]) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 359, "user_id": 11796720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe2c3f1bc463738af3393207efacc50?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/11796720/pablo"}, "is_accepted": false, "score": 0, "last_activity_date": 1564005950, "creation_date": 1564005950, "answer_id": 57191853, "question_id": 57191535, "link": "https://stackoverflow.com/questions/57191535/building-a-tab-separated-row/57191853#57191853", "title": "Building a tab separated row", "body": "<p>You are appending all the columns in one string to <code>input_row</code>, not an array. Either append one by one, or put them in a list and extend. </p>\n"}], "owner": {"reputation": 793, "user_id": 1538828, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/26a91fdcc5fdb54d8005bc384a317723?s=128&d=identicon&r=PG", "display_name": "Aqua267", "link": "https://stackoverflow.com/users/1538828/aqua267"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564005950, "creation_date": 1564003918, "last_edit_date": 1564005768, "question_id": 57191535, "link": "https://stackoverflow.com/questions/57191535/building-a-tab-separated-row", "title": "Building a tab separated row", "body": "<p>The tsv file I work with has 100 columns of which I need only 10 columns.</p>\n\n<p>My task is to open the file, read one row at a time and build another tsv row with only 10 columns. I know the indexes of the columns I need.</p>\n\n<pre><code>with open(self.file_name, 'r') as input_file:\n    reader = csv.reader(input_file, delimiter='\\t')\n    for row in reader:\n         trim_row.append(str(row[0]) + \"\\t\" +  str(row[1]) + \"\\t\" + \n         str(row[2]) + \"\\t\" + str(row[4]) + \"\\t\" + str(row[11]))\n</code></pre>\n\n<p>However this is what I see</p>\n\n<p>input row: </p>\n\n<pre><code>['2019-01-13', '123'    , 'test',   '123',  '123',  'test', '123',  '123',  '3',    'abc',  'abc',  'def',  '23',   '45',   '40',   '7',    '8',    'a' , '56']\n</code></pre>\n\n<p>What I get is\ntrim_row:</p>\n\n<pre><code>['2019-01-13\\t123\\ttest\\t123\\t123']\n</code></pre>\n\n<p>What I need is a subset of columns like this:</p>\n\n<pre><code>['2019-01-13', '123'    , 'test',   '123']\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 2, "last_activity_date": 1564004871, "last_edit_date": 1564004871, "creation_date": 1564004488, "answer_id": 57191624, "question_id": 57191528, "link": "https://stackoverflow.com/questions/57191528/unable-to-create-dataframe-with-pandas-daterange-and-multiple-columns/57191624#57191624", "title": "Unable to create dataframe with pandas DateRange and multiple columns", "body": "<p>Try, pd.DataFrame constructor with a dictionary for data:</p>\n\n<pre><code> pd.concat([pd.DataFrame({'ID':Row['ID'], \n                          'Color':Row['Color'], \n                          'Type':Row['Type']}, \n                         index = pd.date_range(Row['StartDate'], \n                                               Row['EndDate'], \n                                               freq='1D', \n                                               closed = 'left')) \n            for index, Row in df.iterrows()])\n</code></pre>\n"}], "owner": {"reputation": 339, "user_id": 11224792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e21b1062a1dce63ff7d5499412f4b6c?s=128&d=identicon&r=PG&f=1", "display_name": "yeye", "link": "https://stackoverflow.com/users/11224792/yeye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 57191624, "answer_count": 1, "score": 0, "last_activity_date": 1564004871, "creation_date": 1564003878, "question_id": 57191528, "link": "https://stackoverflow.com/questions/57191528/unable-to-create-dataframe-with-pandas-daterange-and-multiple-columns", "title": "Unable to create dataframe with pandas DateRange and multiple columns", "body": "<p>I'm working on a df as follows:</p>\n\n<pre><code>df = pd.DataFrame({'ID': {0: 'S0001', 1: 'S0002', 2: 'S0003'},\n 'StartDate': {0: Timestamp('2018-01-01 00:00:00'),\n  1: Timestamp('2019-01-01 00:00:00'),\n  2: Timestamp('2019-04-01 00:00:00')},\n 'EndDate': {0: Timestamp('2019-01-02 00:00:00'),\n  1: Timestamp('2020-01-02 00:00:00'),\n  2: Timestamp('2020-04-01 00:00:00')}\n 'Color': {0: 'Blue', 1: 'Green', 2: 'Red'},\n 'Type': {0: 'Small', 1: 'Mid', 2: 'Mid'}})\n</code></pre>\n\n<p>Now I want to create a df with 366 rows between Start and End dates and I want to add the Color, Type, ID for every row between Start and End Date.</p>\n\n<p>I'm doing the following whick works well:</p>\n\n<pre><code>OutputDF = pd.concat([pd.DataFrame(data = Row['ID'], index = pd.date_range(Row['StartDate'], Row['EndDate'], freq='1D', closed = 'left'), columns = ['ID']) for index, Row in df.iterrows()])\n</code></pre>\n\n<p>and I get a df with 2 columns SiteID and days in the range Start/End Dates.</p>\n\n<p>I'm able to add the Color/Type by doing a pd.merge on 'ID' but I think there is a direct way to add the column Color and Type directly when creating the DF.</p>\n\n<p>I've tried <code>data = [Row['ID'], Row['Type'], Row['Color']]</code> or <code>data = Row[['ID', 'Color', 'Type']]</code> but neither works.</p>\n\n<p>Therefore, how should I do to create my dataframe but having the Color for every item for the whole 366 rows directly without requiring the merge ?</p>\n\n<p>Sample of current output:\n<a href=\"https://i.stack.imgur.com/7qfqq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7qfqq.png\" alt=\"enter image description here\"></a></p>\n\n<p>It goes on for all the days between Start/End dates for each item.</p>\n\n<p>Desired output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qrxKi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qrxKi.png\" alt=\"enter image description here\"></a>\nThanks</p>\n"}, {"tags": ["python", "selenium", "xpath", "figure"], "comments": [{"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1564004853, "post_id": 57191527, "comment_id": 100892859, "body": "Do you want the number of  5 start reviews or %?"}, {"owner": {"reputation": 143, "user_id": 11794532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03bf600421eab235bdc77773d2199bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Morgan", "link": "https://stackoverflow.com/users/11794532/arthur-morgan"}, "reply_to_user": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1564005387, "post_id": 57191527, "comment_id": 100893010, "body": "Hopefully I can get both images. The xpath is for the %."}, {"owner": {"reputation": 1853, "user_id": 8099744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/789f02ce08565883147629e6065606e6?s=128&d=identicon&r=PG&f=1", "display_name": "Sureshmani", "link": "https://stackoverflow.com/users/8099744/sureshmani"}, "edited": false, "score": 0, "creation_date": 1564007367, "post_id": 57191527, "comment_id": 100893549, "body": "There is not image source for these tags. You can take a selenium screenshot with coordinates around these elements. take a look at this solutions - <a href=\"https://stackoverflow.com/questions/13832322/how-to-capture-the-screenshot-of-a-specific-element-rather-than-entire-page-usin\" title=\"how to capture the screenshot of a specific element rather than entire page usin\">stackoverflow.com/questions/13832322/&hellip;</a>"}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1564010675, "post_id": 57191527, "comment_id": 100894205, "body": "You don&#39;t really want an image though, right? You just want the info that the &quot;image&quot; contains. You&#39;d be better served (and it would be WAY faster) if you just parsed out the class names and styles that actually contain the star values, e.g. <code>we-star-bar-graph__stars--5</code> at 76% and <code>we-star-bar-graph__stars--4</code> at 12%. Dump that all into a sheet and it&#39;s much faster to process than dumping a ton of screenshots and having to sort it all out by opening each one manually, examining it, and then recording the values."}, {"owner": {"reputation": 143, "user_id": 11794532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03bf600421eab235bdc77773d2199bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Morgan", "link": "https://stackoverflow.com/users/11794532/arthur-morgan"}, "reply_to_user": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1564061300, "post_id": 57191527, "comment_id": 100913689, "body": "@JeffC Is there any better way to extract the contents in the &quot;image&quot;? becuase my outputs contain a lot of &lt;div class..."}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1564069627, "post_id": 57191527, "comment_id": 100918516, "body": "@ArthurMorgan I added an answer explaining because there&#39;s not enough room in a comment."}], "answers": [{"tags": [], "owner": {"reputation": 446, "user_id": 8276905, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/643168a4ff8674dced7ced7ed49ef789?s=128&d=identicon&r=PG&f=1", "display_name": "Vignesh SP", "link": "https://stackoverflow.com/users/8276905/vignesh-sp"}, "is_accepted": false, "score": 2, "last_activity_date": 1564064303, "last_edit_date": 1564064303, "creation_date": 1564009439, "answer_id": 57192306, "question_id": 57191527, "link": "https://stackoverflow.com/questions/57191527/how-to-extract-figure-images-using-selenium-in-python/57192306#57192306", "title": "How to extract &lt;figure&gt; images using Selenium in python?", "body": "<p>Open the webpage and scroll to the element by id, as I checked the id, it is \"ember290\" for the part you want in the webpage.</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.action_chains import ActionChains\nimport pyscreenshot as ImageGrab\n\nbrowser = webdriver.Chrome()  # we are using chrome as our webbrowser\n\nbrowser.get('https://apps.apple.com/us/app/mercer-marketplace-benefits/id1041417557')\n#rating_distr = WebDriverWait(browser,30).until(EC.presence_of_element_located((By.XPATH, \"\"\"(//*[@id=\"ember290\"]/div/div[2])\"\"\")))\n\nActionChains(browser).move_to_element(browser.find_element_by_id('ember290')).perform()\n\nim=ImageGrab.grab()\nim.show()\n\nim=ImageGrab.grab(bbox=(162,650,500,500))\nim.show()\n\nImageGrab.grab_to_file('im.png')\n</code></pre>\n\n<p>Take a screenshot once the scrolling is done.</p>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 11794532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03bf600421eab235bdc77773d2199bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Morgan", "link": "https://stackoverflow.com/users/11794532/arthur-morgan"}, "edited": false, "score": 0, "creation_date": 1564070151, "post_id": 57205876, "comment_id": 100918769, "body": "Thank you so much! Your answer solved my question so well!"}, {"owner": {"reputation": 143, "user_id": 11794532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03bf600421eab235bdc77773d2199bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Morgan", "link": "https://stackoverflow.com/users/11794532/arthur-morgan"}, "edited": false, "score": 0, "creation_date": 1564070572, "post_id": 57205876, "comment_id": 100918958, "body": "I applied the code above but received &quot;TypeError: must be str, not WebElement&quot;. Not sure why I got the error..."}, {"owner": {"reputation": 143, "user_id": 11794532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03bf600421eab235bdc77773d2199bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Morgan", "link": "https://stackoverflow.com/users/11794532/arthur-morgan"}, "edited": false, "score": 0, "creation_date": 1564072661, "post_id": 57205876, "comment_id": 100919912, "body": "Thanks for the update. But I got a different output:  &quot;5-star rating: 210.275px 4-star rating: 33.2px 3-star rating: 11.0625px 2-star rating: 2.7625px 1-star rating: 16.6px&quot;"}, {"owner": {"reputation": 143, "user_id": 11794532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03bf600421eab235bdc77773d2199bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Morgan", "link": "https://stackoverflow.com/users/11794532/arthur-morgan"}, "edited": false, "score": 0, "creation_date": 1564072707, "post_id": 57205876, "comment_id": 100919934, "body": "BTW, how can I see the outputs from the &quot;find_elements_by_css_selector&quot;?"}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "reply_to_user": {"reputation": 143, "user_id": 11794532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03bf600421eab235bdc77773d2199bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Morgan", "link": "https://stackoverflow.com/users/11794532/arthur-morgan"}, "edited": false, "score": 0, "creation_date": 1564075170, "post_id": 57205876, "comment_id": 100920968, "body": "I think I&#39;ve fixed it... I don&#39;t have python locally so I was running things from the browser console and it was returning the %s. I updated the code to get the full width of the bar and then do the math to calculate the %. I think I&#39;ve got it but you&#39;ll have to test it and let me know."}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "reply_to_user": {"reputation": 143, "user_id": 11794532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03bf600421eab235bdc77773d2199bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Morgan", "link": "https://stackoverflow.com/users/11794532/arthur-morgan"}, "edited": false, "score": 0, "creation_date": 1564075309, "post_id": 57205876, "comment_id": 100921029, "body": "To see the output from the finds, in Chrome use <code>$$(&quot;figure.we-star-bar-graph div.we-star-bar-graph__bar__foreground-bar&quot;)</code> in the dev console. You can then expand the return and see each one. As you hover over each return, they will be highlighted on the page or if you click on one, that element will be selected in the DOM. <code>$$()</code> is for CSS selectors and <code>$x()</code> is for XPaths."}], "tags": [], "owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "is_accepted": true, "score": 3, "last_activity_date": 1564075095, "last_edit_date": 1564075095, "creation_date": 1564069595, "answer_id": 57205876, "question_id": 57191527, "link": "https://stackoverflow.com/questions/57191527/how-to-extract-figure-images-using-selenium-in-python/57205876#57205876", "title": "How to extract &lt;figure&gt; images using Selenium in python?", "body": "<p>As I suggested in my comment, I think a better/faster approach would be to just get the values instead of taking a screenshot. If you take a screenshot, someone will have to manually open it up and then record the values from the screenshot in some other format which is going to be a long and tedious process. Instead, just scrape the data from the page and dump it in the final desired format.</p>\n\n<p>For example, if you look at the HTML for just the 5-star rating bar</p>\n\n<pre><code>&lt;div class=\"we-star-bar-graph__row\"&gt;\n    &lt;span class=\"we-star-bar-graph__stars we-star-bar-graph__stars--5\"&gt;&lt;/span&gt;\n    &lt;div class=\"we-star-bar-graph__bar\"&gt;\n        &lt;div class=\"we-star-bar-graph__bar__foreground-bar\" style=\"width: 76%;\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>You can see that there's a class applied, <code>we-star-bar-graph__stars--5</code>, that indicates what star rating it is. You can also see that the width of the bar is set, <code>style=\"width: 76%;\"</code>, so that tells you the % of 5-star ratings. With that info, we can scrape the rating for each star.</p>\n\n<pre><code>ratings = driver.find_elements_by_css_selector(\"figure.we-star-bar-graph div.we-star-bar-graph__bar__foreground-bar\")\n# get the width of the entire bar\nwidth = float(driver.find_elements_by_css_selector(\".we-star-bar-graph__bar\").value_of_css_property(\"width\"))[:-2])\nfor i in range(len(ratings), 0, -1) :\n    # get the width of the rating\n    rating = float(ratings[len(ratings) - i].value_of_css_property(\"width\")[:-2])\n    print(str(i) + \"-star rating: \" + str(rating / width * 100) + \"%\")\n</code></pre>\n\n<p>This should dump values like</p>\n\n<pre><code>5-star rating: 76%\n4-star rating: 12%\n3-star rating: 4%\n2-star rating: 1%\n1-star rating: 6%\n</code></pre>\n\n<p>That might not be your final desired format but it should get you pointed in the right direction.</p>\n"}], "owner": {"reputation": 143, "user_id": 11794532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03bf600421eab235bdc77773d2199bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Morgan", "link": "https://stackoverflow.com/users/11794532/arthur-morgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 57205876, "answer_count": 2, "score": 2, "last_activity_date": 1564075095, "creation_date": 1564003874, "question_id": 57191527, "link": "https://stackoverflow.com/questions/57191527/how-to-extract-figure-images-using-selenium-in-python", "title": "How to extract &lt;figure&gt; images using Selenium in python?", "body": "<p>I am trying to extract the image from above xpath from app store: <a href=\"https://apps.apple.com/us/app/mercer-marketplace-benefits/id1041417557\" rel=\"nofollow noreferrer\">https://apps.apple.com/us/app/mercer-marketplace-benefits/id1041417557</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/zyK84.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zyK84.png\" alt=\"enter image description here\"></a></p>\n\n<p>I tried the following code using the xpath:</p>\n\n<pre><code>driver.get('https://apps.apple.com/us/app/mercer-marketplace-benefits/id1041417557')\nrating_distr = WebDriverWait(driver,30).until(EC.presence_of_element_located((By.XPATH, \"\"\"(//*[@id=\"ember290\"]/div/div[2])\"\"\")))\nprint(rating_distr.get_attribute('innerHTML'))\n</code></pre>\n\n<p>But the output is not an image:</p>\n\n<pre><code>    &lt;figure class=\"we-star-bar-graph\"&gt;\n    &lt;div class=\"we-star-bar-graph__row\"&gt;\n      &lt;span class=\"we-star-bar-graph__stars we-star-bar-graph__stars--5\"&gt;&lt;/span&gt;\n      &lt;div class=\"we-star-bar-graph__bar\"&gt;\n        &lt;div class=\"we-star-bar-graph__bar__foreground-bar\" style=\"width: 76%;\"&gt;&lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"we-star-bar-graph__row\"&gt;\n      &lt;span class=\"we-star-bar-graph__stars we-star-bar-graph__stars--4\"&gt;&lt;/span&gt;\n      &lt;div class=\"we-star-bar-graph__bar\"&gt;\n        &lt;div class=\"we-star-bar-graph__bar__foreground-bar\" style=\"width: 12%;\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Is there any way to extract the output as an image? Thanks for the help!</p>\n"}, {"tags": ["python", "tensorflow", "keras", "neural-network", "lstm"], "comments": [{"owner": {"reputation": 8295, "user_id": 1699075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a9c6b631a073149ec7200f8cd6378b?s=128&d=identicon&r=PG&f=1", "display_name": "thushv89", "link": "https://stackoverflow.com/users/1699075/thushv89"}, "edited": false, "score": 0, "creation_date": 1564013245, "post_id": 57191517, "comment_id": 100894660, "body": "What is the shape of the <code>test_point</code>? From what I can see, your model outputs a <code>[batch_size, 29, 29]</code> sized output. So there will be two 29s in the output shape (I&#39;m assuming that&#39;s what you&#39;re getting)."}, {"owner": {"reputation": 430, "user_id": 8322075, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1525dfaae144b4cdc881a33c52e30abd?s=128&d=identicon&r=PG&f=1", "display_name": "taurus", "link": "https://stackoverflow.com/users/8322075/taurus"}, "reply_to_user": {"reputation": 8295, "user_id": 1699075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a9c6b631a073149ec7200f8cd6378b?s=128&d=identicon&r=PG&f=1", "display_name": "thushv89", "link": "https://stackoverflow.com/users/1699075/thushv89"}, "edited": false, "score": 0, "creation_date": 1564013621, "post_id": 57191517, "comment_id": 100894703, "body": "test_point is also [1,29,1]. That is the ideal shape I would like to output too"}, {"owner": {"reputation": 8295, "user_id": 1699075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a9c6b631a073149ec7200f8cd6378b?s=128&d=identicon&r=PG&f=1", "display_name": "thushv89", "link": "https://stackoverflow.com/users/1699075/thushv89"}, "edited": false, "score": 0, "creation_date": 1564013785, "post_id": 57191517, "comment_id": 100894733, "body": "Then you will need a dense layer on top of your LSTM. I&#39;m assuming this is a regression problem. Therefore I am posting an answer with a linear Dense layer on top of the LSTM. Also I&#39;m not sure why you&#39;re applying a LeakyReLU on top of the LSTM. That seems odd to me."}], "answers": [{"comments": [{"owner": {"reputation": 430, "user_id": 8322075, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1525dfaae144b4cdc881a33c52e30abd?s=128&d=identicon&r=PG&f=1", "display_name": "taurus", "link": "https://stackoverflow.com/users/8322075/taurus"}, "edited": false, "score": 0, "creation_date": 1564062362, "post_id": 57192756, "comment_id": 100914327, "body": "That worked, thanks! I am using Leaky ReLu because my LSTM was often just predicting 0 across all time steps. I read that a leaky ReLu could fix this if the issue arose from dying ReLu and found good results. Why do you find it odd?"}, {"owner": {"reputation": 430, "user_id": 8322075, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1525dfaae144b4cdc881a33c52e30abd?s=128&d=identicon&r=PG&f=1", "display_name": "taurus", "link": "https://stackoverflow.com/users/8322075/taurus"}, "edited": false, "score": 0, "creation_date": 1564062367, "post_id": 57192756, "comment_id": 100914332, "body": "<a href=\"https://datascience.stackexchange.com/questions/5706/what-is-the-dying-relu-problem-in-neural-networks\" title=\"what is the dying relu problem in neural networks\">datascience.stackexchange.com/questions/5706/&hellip;</a>"}, {"owner": {"reputation": 430, "user_id": 8322075, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1525dfaae144b4cdc881a33c52e30abd?s=128&d=identicon&r=PG&f=1", "display_name": "taurus", "link": "https://stackoverflow.com/users/8322075/taurus"}, "edited": false, "score": 0, "creation_date": 1564068803, "post_id": 57192756, "comment_id": 100918050, "body": "Also to follow up, my <code>model.summary()</code> reports the before the <code>TimeDistributed</code> layer, the LSTM outputs a <code>(None, 29, 29)</code> tensor. I still don&#39;t understand why this isn&#39;t <code>(None, 29, 1)</code>."}, {"owner": {"reputation": 8295, "user_id": 1699075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a9c6b631a073149ec7200f8cd6378b?s=128&d=identicon&r=PG&f=1", "display_name": "thushv89", "link": "https://stackoverflow.com/users/1699075/thushv89"}, "reply_to_user": {"reputation": 430, "user_id": 8322075, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1525dfaae144b4cdc881a33c52e30abd?s=128&d=identicon&r=PG&f=1", "display_name": "taurus", "link": "https://stackoverflow.com/users/8322075/taurus"}, "edited": false, "score": 0, "creation_date": 1564100240, "post_id": 57192756, "comment_id": 100929168, "body": "Hi @taurus, The output of the LSTM is (None, 29, 29) because your LSTM&#39;s latent size (i.e. hidden size is 29). If you really want the LSTM output to be (None, 29, 1), the LSTM layer should be <code>LSTM(1, \u2026)</code>."}, {"owner": {"reputation": 8295, "user_id": 1699075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a9c6b631a073149ec7200f8cd6378b?s=128&d=identicon&r=PG&f=1", "display_name": "thushv89", "link": "https://stackoverflow.com/users/1699075/thushv89"}, "reply_to_user": {"reputation": 430, "user_id": 8322075, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1525dfaae144b4cdc881a33c52e30abd?s=128&d=identicon&r=PG&f=1", "display_name": "taurus", "link": "https://stackoverflow.com/users/8322075/taurus"}, "edited": false, "score": 0, "creation_date": 1564100355, "post_id": 57192756, "comment_id": 100929190, "body": "About your question on ReLUs, your argument is partially correct. Yes LeakyReLU does help as a non-linearity function to alleviate &quot;neurons dying&quot;. But LSTMs already have a non-linearity in the cell (e.g. tanh / sigmoid) and you&#39;re applying LeakyReLU on top of those non-linearities which is not a standard thing to do."}, {"owner": {"reputation": 430, "user_id": 8322075, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1525dfaae144b4cdc881a33c52e30abd?s=128&d=identicon&r=PG&f=1", "display_name": "taurus", "link": "https://stackoverflow.com/users/8322075/taurus"}, "edited": false, "score": 0, "creation_date": 1564122208, "post_id": 57192756, "comment_id": 100933515, "body": "Thanks, those both make perfect sense."}], "tags": [], "owner": {"reputation": 8295, "user_id": 1699075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a9c6b631a073149ec7200f8cd6378b?s=128&d=identicon&r=PG&f=1", "display_name": "thushv89", "link": "https://stackoverflow.com/users/1699075/thushv89"}, "is_accepted": true, "score": 2, "last_activity_date": 1564013983, "creation_date": 1564013983, "answer_id": 57192756, "question_id": 57191517, "link": "https://stackoverflow.com/questions/57191517/about-output-of-the-keras-lstm/57192756#57192756", "title": "About Output of the Keras LSTM", "body": "<p>Your model has few flaws. </p>\n\n<ol>\n<li><p>The last layer of your model is an LSTM. Assuming you're doing either classification / regression. This should be followed by a Dense layer (SoftMax/sigmoid - classification, linear - regression). But since this is a time-series problem, dense layer should be wrapped in a TimeDistributed wrapper.</p></li>\n<li><p>It's odd to apply a LeakyReLU on top of the LSTM.</p></li>\n</ol>\n\n<p>I've fixed the code with fixes for above issues. See if that helps.</p>\n\n<pre><code>from tensorflow.keras.layers import Embedding, Input, Bidirectional, LSTM, Dense, Concatenate, LeakyReLU, TimeDistributed\nfrom tensorflow.keras.initializers import Constant\nfrom tensorflow.keras.models import Model\nfrom tensorflow.keras.models import Sequential\ndef build_model():\n    # define model\n    model = Sequential()\n    model.add(LSTM(29, return_sequences=True, input_shape=(29, 1)))\n    model.add(TimeDistributed(Dense(1)))\n    model.compile(optimizer='sgd', loss='mse', metrics = ['mae'])\n\n\n    print(model.summary())   \n    return model \n\nmodel = build_model()\n</code></pre>\n"}], "owner": {"reputation": 430, "user_id": 8322075, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1525dfaae144b4cdc881a33c52e30abd?s=128&d=identicon&r=PG&f=1", "display_name": "taurus", "link": "https://stackoverflow.com/users/8322075/taurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 57192756, "answer_count": 1, "score": 0, "last_activity_date": 1564020532, "creation_date": 1564003808, "last_edit_date": 1564020532, "question_id": 57191517, "link": "https://stackoverflow.com/questions/57191517/about-output-of-the-keras-lstm", "title": "About Output of the Keras LSTM", "body": "<p>I have a built a LSTM architecture using Keras. My goal is to map length 29 time series input sequences of floats to length 29 output sequences of floats. I am trying to implement a \"many-to-many\" approach. I followed <a href=\"https://stackoverflow.com/questions/43034960/many-to-one-and-many-to-many-lstm-examples-in-keras\">this post</a> for implementing such a model.</p>\n\n<p>I start by reshaping each data point into an <code>np.array</code> of shape `(1, 29, 1). I have multiple data points and train the model on each one separately. The following code is how I build my model:</p>\n\n<pre><code>def build_model():\n    # define model\n    model = tf.keras.Sequential()\n    model.add(tf.keras.layers.LSTM(29, return_sequences=True, input_shape=(29, 1)))\n    model.add(tf.keras.layers.LeakyReLU(alpha=0.3))\n\n    model.compile(optimizer='sgd', loss='mse', metrics = ['mae'])\n\n    #cast data\n    for point in train_dict:\n        train_data = train_dict[point]\n\n        train_dataset = tf.data.Dataset.from_tensor_slices((\n            tf.cast(train_data[0], features_type),\n            tf.cast(train_data[1], target_type))\n        ).repeat() #cast into X, Y\n\n        # fit model\n\n\n        model.fit(train_dataset, epochs=100,steps_per_epoch = 1,verbose=0)\n\n\n        print(model.summary())   \n    return model \n</code></pre>\n\n<p>I am confused because when I call <code>model.predict(test_point, steps = 1, verbose = 1)</code> the model returns 29 length 29 sequences! I don't understand why this is happening, based on my understanding from the linked post. When I try <code>return_state=True</code> instead of <code>return_sequences=True</code> then my code raises this error: <code>ValueError: All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.</code> </p>\n\n<p>How do I solve the problem?</p>\n"}, {"tags": ["python", "pysimplegui"], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 7481520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1d2998b819a93af337335357bc5046?s=128&d=identicon&r=PG&f=1", "display_name": "Tylerr", "link": "https://stackoverflow.com/users/7481520/tylerr"}, "edited": false, "score": 0, "creation_date": 1564009380, "post_id": 57191725, "comment_id": 100893985, "body": "Ok awesome, this is what I thought might have to happen.  I should have been clearer with one aspect: is it possible to have someone actually draw the rectangle? I guess use mouse events?"}, {"owner": {"reputation": 3307, "user_id": 8743099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCygy.png?s=128&g=1", "display_name": "Mike from PSG", "link": "https://stackoverflow.com/users/8743099/mike-from-psg"}, "edited": false, "score": 0, "creation_date": 1564060381, "post_id": 57191725, "comment_id": 100913128, "body": "The Graph Element is capable of sending back mouse movement events, both click and drag events.  The docs talk about DrawImage, but don&#39;t show the detailed call signature yet <a href=\"https://pysimplegui.readthedocs.io/en/latest/#graph-element\" rel=\"nofollow noreferrer\">pysimplegui.readthedocs.io/en/latest/#graph-element</a>.   Docs are mid-update."}, {"owner": {"reputation": 1082, "user_id": 283943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e77a8983c19b7ceddc5a92abd97992?s=128&d=identicon&r=PG", "display_name": "Finlay McWalter", "link": "https://stackoverflow.com/users/283943/finlay-mcwalter"}, "edited": false, "score": 1, "creation_date": 1564080844, "post_id": 57191725, "comment_id": 100923490, "body": "Well, I got a bit carried away and implemented something like you describe (a rubber-rect drawn over an image, while we drag it around to &quot;select&quot; part of the image). I used PIL to do the drawing (as I can&#39;t seem to find double-buffering support in PySimpleGUI).  Unfortunately, at least for me, PySimpleGUI isn&#39;t reporting mouse-button-up events when it has mouse move events also enabled - without that, it&#39;s not reliable.  I&#39;ve raised a github issue: <a href=\"https://github.com/PySimpleGUI/PySimpleGUI/issues/1738\" rel=\"nofollow noreferrer\">github.com/PySimpleGUI/PySimpleGUI/issues/1738</a>"}, {"owner": {"reputation": 1082, "user_id": 283943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e77a8983c19b7ceddc5a92abd97992?s=128&d=identicon&r=PG", "display_name": "Finlay McWalter", "link": "https://stackoverflow.com/users/283943/finlay-mcwalter"}, "edited": false, "score": 0, "creation_date": 1565556549, "post_id": 57191725, "comment_id": 101381560, "body": "The maintainer  of PySimpleGUI has added some additional mouse event handling, which now makes proper drag-and-release interactive drawing work great in PySimpleGUI. It&#39;s in the GIT version now, and will be in the next version he pushes to pip. The github issue I linked above has a piece of demo code that displays and image and lets you drag a &quot;rubber rectangle&quot; over it, which it seems is just what you want."}, {"owner": {"reputation": 191, "user_id": 7481520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1d2998b819a93af337335357bc5046?s=128&d=identicon&r=PG&f=1", "display_name": "Tylerr", "link": "https://stackoverflow.com/users/7481520/tylerr"}, "edited": false, "score": 0, "creation_date": 1565722200, "post_id": 57191725, "comment_id": 101438738, "body": "Absolutely amazing! This will definitely add some awesome functionality to pysimplegui.  Cheers!"}], "tags": [], "owner": {"reputation": 1082, "user_id": 283943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e77a8983c19b7ceddc5a92abd97992?s=128&d=identicon&r=PG", "display_name": "Finlay McWalter", "link": "https://stackoverflow.com/users/283943/finlay-mcwalter"}, "is_accepted": true, "score": 4, "last_activity_date": 1564005165, "creation_date": 1564005165, "answer_id": 57191725, "question_id": 57191494, "link": "https://stackoverflow.com/questions/57191494/draw-rectangle-on-image-in-pysimplegui/57191725#57191725", "title": "Draw Rectangle on Image in Pysimplegui", "body": "<p>Draw the image into the <code>graph</code> object, then draw the rect on top:</p>\n\n<pre><code>import PySimpleGUI as sg\n\nlayout = [\n    [\n        sg.Graph(\n            canvas_size=(400, 400),\n            graph_bottom_left=(0, 0),\n            graph_top_right=(400, 400),\n            key=\"graph\"\n        )\n    ]\n]\n\nwindow = sg.Window(\"rect on image\", layout)\nwindow.Finalize()\n\ngraph = window.Element(\"graph\")\n\ngraph.DrawImage(filename=\"foo.png\", location=(0, 400))\ngraph.DrawRectangle((200, 200), (250, 300), line_color=\"red\")\n\nwhile True:\n    event, values = window.Read()\n    if event is None:\n        break\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 7481520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb1d2998b819a93af337335357bc5046?s=128&d=identicon&r=PG&f=1", "display_name": "Tylerr", "link": "https://stackoverflow.com/users/7481520/tylerr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2496, "favorite_count": 0, "accepted_answer_id": 57191725, "answer_count": 1, "score": 1, "last_activity_date": 1564005165, "creation_date": 1564003671, "question_id": 57191494, "link": "https://stackoverflow.com/questions/57191494/draw-rectangle-on-image-in-pysimplegui", "title": "Draw Rectangle on Image in Pysimplegui", "body": "<p>I am looking to draw a rectangle on an Image using Pysimplegui. I have tried to do it using the Graph object but as far as I know you can not do anything on an image object.  I found an alternative in Pygame but my script is already built up to this point in pysimplegui.  Does this functionailty/demo exist?</p>\n"}, {"tags": ["python", "dll", "module", "pypi"], "answers": [{"tags": [], "owner": {"reputation": 743, "user_id": 10067555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23629f32bc51e9dff04aec6b8eb51123?s=128&d=identicon&r=PG&f=1", "display_name": "karamazovbros", "link": "https://stackoverflow.com/users/10067555/karamazovbros"}, "is_accepted": true, "score": 0, "last_activity_date": 1564011704, "creation_date": 1564011704, "answer_id": 57192543, "question_id": 57191483, "link": "https://stackoverflow.com/questions/57191483/include-a-dll-in-python-module-pypi/57192543#57192543", "title": "Include a DLL in python module (pypi)", "body": "<p>I figured it out. You need to add the DLL to the <code>package_data</code> in the <code>setup.py</code>:</p>\n\n<pre><code>include_package_data=True,\npackage_data={\"devsys\": ['deviceSystem.dll']},\n</code></pre>\n\n<p>To get the file from within <code>wrapper.py</code> use the following:</p>\n\n<pre><code>dir = os.path.dirname(sys.modules[\"devsys\"].__file__)\npath = os.path.join(dir, \"deviceSystem.dll\")\n__lib = cdll.LoadLibrary(path)\n</code></pre>\n"}], "owner": {"reputation": 743, "user_id": 10067555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23629f32bc51e9dff04aec6b8eb51123?s=128&d=identicon&r=PG&f=1", "display_name": "karamazovbros", "link": "https://stackoverflow.com/users/10067555/karamazovbros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 0, "accepted_answer_id": 57192543, "answer_count": 1, "score": 0, "last_activity_date": 1564011704, "creation_date": 1564003628, "question_id": 57191483, "link": "https://stackoverflow.com/questions/57191483/include-a-dll-in-python-module-pypi", "title": "Include a DLL in python module (pypi)", "body": "<p>I have python module that wraps functions from a DLL in the same directory, and loads the library using ctypes.</p>\n\n<pre><code>__lib = cdll.LoadLibrary(\"deviceSys.dll\")\n</code></pre>\n\n<p>Here's my directory Layout: </p>\n\n<pre><code>deviceSys\n      - wrapper.py\n      - deviceSys.dll\n      - __init__.py\n</code></pre>\n\n<p>I'm following the package guidelines, but I'm not sure how to load the dll once my code is a module on PyPi. For instance, if I use ctypes to load the library, it produces an error, because it's searching locally:\n <code>OSError: [WinError 126] The specified module could not be found</code></p>\n\n<p>I need to somehow embed my dll or search for the file within included resources for the package. Is there a way to do this?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1564003905, "post_id": 57191481, "comment_id": 100892605, "body": "Possibly <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.rolling.html\" rel=\"nofollow noreferrer\">pandas rolling()</a> function?"}, {"owner": {"reputation": 1186, "user_id": 2458922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/becbcc9a3ace0d9238fa0329c0502b71?s=128&d=identicon&r=PG", "display_name": "user2458922", "link": "https://stackoverflow.com/users/2458922/user2458922"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1564003993, "post_id": 57191481, "comment_id": 100892640, "body": "Could you please provide a working example ?"}], "answers": [{"comments": [{"owner": {"reputation": 1186, "user_id": 2458922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/becbcc9a3ace0d9238fa0329c0502b71?s=128&d=identicon&r=PG", "display_name": "user2458922", "link": "https://stackoverflow.com/users/2458922/user2458922"}, "edited": false, "score": 0, "creation_date": 1564004441, "post_id": 57191576, "comment_id": 100892758, "body": "Thanks, Data may not be boolean, would it work ..? and could you please provide some explanation to your code."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 1186, "user_id": 2458922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/becbcc9a3ace0d9238fa0329c0502b71?s=128&d=identicon&r=PG", "display_name": "user2458922", "link": "https://stackoverflow.com/users/2458922/user2458922"}, "edited": false, "score": 0, "creation_date": 1564005651, "post_id": 57191576, "comment_id": 100893081, "body": "@user2458922 change to <code>s.mask(s==0)</code>"}, {"owner": {"reputation": 1186, "user_id": 2458922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/becbcc9a3ace0d9238fa0329c0502b71?s=128&d=identicon&r=PG", "display_name": "user2458922", "link": "https://stackoverflow.com/users/2458922/user2458922"}, "edited": false, "score": 0, "creation_date": 1564499489, "post_id": 57191576, "comment_id": 101047712, "body": "Thanks.. Is there a way to generalize, for example, this may only work when multiplication factor is 0.9999 instead if there if a function which does that ..And I could edit the function if required ?"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 2, "last_activity_date": 1564006106, "last_edit_date": 1564006106, "creation_date": 1564004135, "answer_id": 57191576, "question_id": 57191481, "link": "https://stackoverflow.com/questions/57191481/python-pandas-function-which-computes-over-previous-row-and-current-row/57191576#57191576", "title": "Python Pandas function which computes over previous row and current row", "body": "<p>Here is on way , create you own function with <code>cumsum</code> and <code>cumcount</code> , then <code>update</code> the columns </p>\n\n<pre><code>def yourfun(s):\n    s.update(s.mask(s==0).ffill()-s.groupby(s.mask(s==0).eq(1).cumsum()).cumcount()*0.0001)\n    return s\ndf.apply(yourfun)\nOut[291]: \n        1       2       3       4\n0  0.0000  0.0000  1.0000  0.0000\n1  0.0000  1.0000  0.9999  1.0000\n2  0.0000  0.9999  0.9998  0.9999\n3  1.0000  0.9998  0.9997  1.0000\n4  0.9999  1.0000  1.0000  0.9999\n5  0.9998  0.9999  0.9999  0.9998\n6  1.0000  0.9998  0.9998  0.9997\n</code></pre>\n"}], "owner": {"reputation": 1186, "user_id": 2458922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/becbcc9a3ace0d9238fa0329c0502b71?s=128&d=identicon&r=PG", "display_name": "user2458922", "link": "https://stackoverflow.com/users/2458922/user2458922"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564006106, "creation_date": 1564003625, "question_id": 57191481, "link": "https://stackoverflow.com/questions/57191481/python-pandas-function-which-computes-over-previous-row-and-current-row", "title": "Python Pandas function which computes over previous row and current row", "body": "<p><a href=\"https://i.stack.imgur.com/vF0Jg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vF0Jg.png\" alt=\"&#39;EXCEL SHEET EXAMPLE&#39;\"></a></p>\n\n<p>Give a DataFrame I would like to transform to another, where the transform function operates on previous row and current row.\nIn the Given example, </p>\n\n<p><code>RowID =1 is copied as is,</code></p>\n\n<p>but RowID 2 onward, </p>\n\n<pre><code>Current Cell = Max(CurrentCell, Previous Cell * 0.9999 )\nH4 &lt;= MAX(B4, H3*0.9999)\nwhere,\nB4  = original value, \nH3  = the previous row **'After Transformation'**\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/wUV7J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wUV7J.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "reply_to_user": {"reputation": 23, "user_id": 9686651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JcFY7.png?s=128&g=1", "display_name": "rjunior8", "link": "https://stackoverflow.com/users/9686651/rjunior8"}, "edited": false, "score": 0, "creation_date": 1564003795, "post_id": 57191471, "comment_id": 100892567, "body": "@r_junior Yes, the value <code>{&quot;name&quot;: &quot;monitor1&quot;, &quot;ip&quot;: &quot;0.0.0.0&quot;}</code> is removed from dictionary <code>d</code>"}, {"owner": {"reputation": 23, "user_id": 9686651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JcFY7.png?s=128&g=1", "display_name": "rjunior8", "link": "https://stackoverflow.com/users/9686651/rjunior8"}, "edited": false, "score": 0, "creation_date": 1564003929, "post_id": 57191471, "comment_id": 100892618, "body": "Oh yeah! Thank you very much!"}], "tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": true, "score": 1, "last_activity_date": 1564003568, "creation_date": 1564003568, "answer_id": 57191471, "question_id": 57191455, "link": "https://stackoverflow.com/questions/57191455/removing-dictionary-from-value-as-list-in-dictionary/57191471#57191471", "title": "Removing dictionary from value as list in dictionary?", "body": "<p>Using list comprehension:</p>\n\n<pre><code>d = {\"monitors\": [{\"name\": \"monitor1\", \"ip\": \"0.0.0.0\"},\n                  {\"name\": \"monitor2\", \"ip\": \"1.1.1.1\"}]}\n\nd['monitors'] = [i for i in d['monitors'] if i['name'] != 'monitor1']\n\nprint(d)\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>{'monitors': [{'ip': '1.1.1.1', 'name': 'monitor2'}]}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9686651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JcFY7.png?s=128&g=1", "display_name": "rjunior8", "link": "https://stackoverflow.com/users/9686651/rjunior8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 57191471, "answer_count": 1, "score": 0, "last_activity_date": 1564005401, "creation_date": 1564003459, "last_edit_date": 1564003625, "question_id": 57191455, "link": "https://stackoverflow.com/questions/57191455/removing-dictionary-from-value-as-list-in-dictionary", "title": "Removing dictionary from value as list in dictionary?", "body": "<p>I need to remove a dictionary from list of dictionaries as value.</p>\n\n<pre><code>d = {\"monitors\": [{\"name\": \"monitor1\", \"ip\": \"0.0.0.0\"},\n                  {\"name\": \"monitor2\", \"ip\": \"1.1.1.1\"}]}\n\nfor value in d[\"monitors\"]:\n  if value[\"name\"] == \"monitor1\":\n    # delete {\"name\": \"monitor1\", \"ip\": \"0.0.0.0\"}\n\nprint(d)\n</code></pre>\n\n<p>result must to be: {'monitors': [{'name': 'monitor2', 'ip': '1.1.1.1'}]}</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1564003524, "post_id": 57191441, "comment_id": 100892477, "body": "Why not just <code>[i for i, x in enumerate(haystack) if needle in x]</code>?"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1564003909, "post_id": 57191441, "comment_id": 100892606, "body": "Do you mean exact substring match, or do you have a specific wildcard/regex function in mind? What about &quot;fruit,red&quot;? What if one of those search terms happens to be a substring of a completely unrelated name in another term? Maybe a named tuple or a full class object would be better. You need to decide how to do that, then the rest is easy. But also you need to expect multiple matches."}, {"owner": {"reputation": 741, "user_id": 6032140, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ad27f3e00a5dcfb9e63ed02f440c7fc6?s=128&d=identicon&r=PG&f=1", "display_name": "Vimo", "link": "https://stackoverflow.com/users/6032140/vimo"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1564003973, "post_id": 57191441, "comment_id": 100892631, "body": "@WillemVanOnsem: Oh.. hmm.. will give a try.."}, {"owner": {"reputation": 741, "user_id": 6032140, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ad27f3e00a5dcfb9e63ed02f440c7fc6?s=128&d=identicon&r=PG&f=1", "display_name": "Vimo", "link": "https://stackoverflow.com/users/6032140/vimo"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1564004010, "post_id": 57191441, "comment_id": 100892648, "body": "@KennyOstrom: Well exact sub-string match. i.e. like the first two element and need the index of it."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1564004689, "post_id": 57191441, "comment_id": 100892824, "body": "wildcards are not going to work with the &quot;in&quot; operator at all. Substrings are going to bite you later but will get past this simple example. Split will help here. I caution against taking shortcuts just because the two search terms you want in this case happen to be adjacent."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 0, "last_activity_date": 1564003639, "creation_date": 1564003639, "answer_id": 57191487, "question_id": 57191441, "link": "https://stackoverflow.com/questions/57191441/how-to-find-an-index-value-for-an-element-with-wild-card-from-an-array/57191487#57191487", "title": "How to find an index value for an element [with wild card] from an array?", "body": "<p>You can use the <code>in</code> operator to check if a substring matches a string. For example:</p>\n\n<pre><code>&gt;&gt;&gt; 'oba' in 'foobar'\nTrue\n</code></pre>\n\n<p>We can exploit this in list comprehension, for example:</p>\n\n<pre><code>def find_index(needle,haystack):\n    return [i for i, x in enumerate(haystack) if <b>needle in x</b>]</code></pre>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt; find_index('fruit', ['fruit,apple,red', 'fruit,mango,yellow'])\n[0, 1]\n&gt;&gt;&gt; find_index('fruit,apple', ['fruit,apple,red', 'fruit,mango,yellow'])\n[0]\n</code></pre>\n"}], "owner": {"reputation": 741, "user_id": 6032140, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ad27f3e00a5dcfb9e63ed02f440c7fc6?s=128&d=identicon&r=PG&f=1", "display_name": "Vimo", "link": "https://stackoverflow.com/users/6032140/vimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564005103, "creation_date": 1564003396, "last_edit_date": 1564005103, "question_id": 57191441, "link": "https://stackoverflow.com/questions/57191441/how-to-find-an-index-value-for-an-element-with-wild-card-from-an-array", "title": "How to find an index value for an element [with wild card] from an array?", "body": "<p>a. Wanted to find the index of an element saved in the array. For which had this simple below code.</p>\n\n<pre><code>def find_index(self,needle,haystack):\n    if needle == haystack: return []\n    if isinstance(haystack,str) and len(haystack)&lt;=1: return None\n    try:\n      for i,e in enumerate(haystack):\n        r = self.find_index(needle,e)\n        if r is not None: \n          r.insert(0,i)\n          return r\n    except TypeError:\n      pass\n    return None\n</code></pre>\n\n<p>But this search for exact match of the string inside an array and return the index. But I wanted index for partial match of the array element and return the index value. </p>\n\n<p>For Eg:</p>\n\n<p>a. <code>Array = ['fruit,apple,red', 'fruit,mango,yellow']</code></p>\n\n<p>b. Element to be searched is <code>'fruit,apple'</code>. </p>\n\n<p>For the above program I need to pass the entire value i.e. <code>'fruit,apple,red'</code>.</p>\n\n<p>c. But for my current scenario, I don't know the value of the 3rd variable [i.e. red] of the search element. So my input is just <code>'fruit,apple'</code>.</p>\n\n<p>So, I wanted to search the array with partial element value and whichever array element matches the most, wanted to return the index value.</p>\n\n<p>Any comments on what/how that needs to be done ?</p>\n"}, {"tags": ["python", "multiprocessing"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11828353, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q4wEhpd-2Bg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfVhsXzKWLESxWSlLAKxHhQZnU1FQ/photo.jpg?sz=128", "display_name": "Adrian", "link": "https://stackoverflow.com/users/11828353/adrian"}, "edited": false, "score": 0, "creation_date": 1564005780, "post_id": 57191791, "comment_id": 100893119, "body": "I pass only a string here to the function that runs in a process. So what is the problem here? And why does it work with the fork start method and not with spawn?"}], "tags": [], "owner": {"reputation": 1246, "user_id": 4819775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MYnH2.jpg?s=128&g=1", "display_name": "Roman Miroshnychenko", "link": "https://stackoverflow.com/users/4819775/roman-miroshnychenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1597975398, "last_edit_date": 1597975398, "creation_date": 1564005631, "answer_id": 57191791, "question_id": 57191393, "link": "https://stackoverflow.com/questions/57191393/python-multiprocessing-with-start-method-spawn-doesnt-work/57191791#57191791", "title": "Python multiprocessing with start method &#39;spawn&#39; doesn&#39;t work", "body": "<p>For portability, all objects passed as arguments to a function that will be run in a process must be picklable.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11828353, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q4wEhpd-2Bg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfVhsXzKWLESxWSlLAKxHhQZnU1FQ/photo.jpg?sz=128", "display_name": "Adrian", "link": "https://stackoverflow.com/users/11828353/adrian"}, "edited": false, "score": 0, "creation_date": 1564023474, "post_id": 57192877, "comment_id": 100896307, "body": "For a second it looked like you saved my day, but unfortunately your solution works only when I call <code>asyncPlotter.saveLinePlotVec3(&quot;test&quot;)</code> once. If I call it twice in a row I get the same error again. I updated my code with your proposed changes adding the second call of <code>asyncPlotter</code> which still fails :/"}, {"owner": {"reputation": 207, "user_id": 10671313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ca7077213545d9e52aeec1932c5441?s=128&d=identicon&r=PG", "display_name": "Zach Thompson", "link": "https://stackoverflow.com/users/10671313/zach-thompson"}, "reply_to_user": {"reputation": 13, "user_id": 11828353, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q4wEhpd-2Bg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfVhsXzKWLESxWSlLAKxHhQZnU1FQ/photo.jpg?sz=128", "display_name": "Adrian", "link": "https://stackoverflow.com/users/11828353/adrian"}, "edited": false, "score": 0, "creation_date": 1564054714, "post_id": 57192877, "comment_id": 100909867, "body": "@Adrian I edited my answer with some new code and a suggestion for another approach.  It seems that wrapping the multiprocessing code in a class is causing some rather murky issues with <code>multiprocessing</code>.  HTH"}, {"owner": {"reputation": 13, "user_id": 11828353, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q4wEhpd-2Bg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfVhsXzKWLESxWSlLAKxHhQZnU1FQ/photo.jpg?sz=128", "display_name": "Adrian", "link": "https://stackoverflow.com/users/11828353/adrian"}, "edited": false, "score": 0, "creation_date": 1564094061, "post_id": 57192877, "comment_id": 100928037, "body": "thanks for your help. I made it work by refactoring my code to use <code>pool.map()</code>, it&#39;s not as nice because I have to collect all my input for all the plots I want to generate first in a list first and can&#39;t call the plotting function on the fly, but at least the code executes 10 times faster now :)"}, {"owner": {"reputation": 207, "user_id": 10671313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ca7077213545d9e52aeec1932c5441?s=128&d=identicon&r=PG", "display_name": "Zach Thompson", "link": "https://stackoverflow.com/users/10671313/zach-thompson"}, "reply_to_user": {"reputation": 13, "user_id": 11828353, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q4wEhpd-2Bg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfVhsXzKWLESxWSlLAKxHhQZnU1FQ/photo.jpg?sz=128", "display_name": "Adrian", "link": "https://stackoverflow.com/users/11828353/adrian"}, "edited": false, "score": 0, "creation_date": 1564106752, "post_id": 57192877, "comment_id": 100930200, "body": "I posted another example that should be more flexible for your case."}], "tags": [], "owner": {"reputation": 207, "user_id": 10671313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68ca7077213545d9e52aeec1932c5441?s=128&d=identicon&r=PG", "display_name": "Zach Thompson", "link": "https://stackoverflow.com/users/10671313/zach-thompson"}, "is_accepted": true, "score": 2, "last_activity_date": 1564106037, "last_edit_date": 1564106037, "creation_date": 1564015413, "answer_id": 57192877, "question_id": 57191393, "link": "https://stackoverflow.com/questions/57191393/python-multiprocessing-with-start-method-spawn-doesnt-work/57192877#57192877", "title": "Python multiprocessing with start method &#39;spawn&#39; doesn&#39;t work", "body": "<p>When using the <code>spawn</code> start method, the <code>Process</code> object itself is being pickled for use in the child process.  In your code, the <code>target=target</code> argument is a bound method of <code>AsyncPlotter</code>.  It looks like the entire <code>asyncPlotter</code> instance must also be pickled for that to work, and that includes <code>self.manager</code>, which apparently doesn't want to be pickled.</p>\n\n<p>In short, keep <code>Manager</code> outside of <code>AsyncPlotter</code>.  This works on my macOS system:</p>\n\n<pre><code>def test():\n    manager = mp.Manager()\n    asyncPlotter = AsyncPlotter(manager.Value('i', 0))\n    ...\n</code></pre>\n\n<p>Also, as noted in your comment, <code>asyncPlotter</code> did not work when reused.  I don't know the details but looks like it has something to do with how the <code>Value</code> object is shared across processes.  The <code>test</code> function would need to be like:</p>\n\n<pre><code>def test():\n    manager = mp.Manager()\n    nc = manager.Value('i', 0)\n\n    asyncPlotter1 = AsyncPlotter(nc)\n    asyncPlotter1.saveLinePlotVec3(\"test 1\")\n    asyncPlotter2 = AsyncPlotter(nc)\n    asyncPlotter2.saveLinePlotVec3(\"test 2\")\n\n    asyncPlotter1.join()\n    asyncPlotter2.join()\n</code></pre>\n\n<p>All in all, you might want to restructure your code and use <a href=\"https://docs.python.org/3/library/multiprocessing.html#module-multiprocessing.pool\" rel=\"nofollow noreferrer\">a process pool</a>.  It already handles what <code>AsyncPlotter</code> is doing with <code>cpu_count</code> and parallel execution:</p>\n\n<pre><code>from multiprocessing import Pool, set_start_method\nfrom random import random\nimport time\n\ndef linePlotVec3(test):\n    time.sleep(random())\n    print(\"test\", test)\n\nif __name__ == \"__main__\":\n    set_start_method(\"spawn\")\n    with Pool() as pool:\n        pool.map(linePlotVec3, range(20))\n</code></pre>\n\n<p>Or you could use a <a href=\"https://docs.python.org/3/library/concurrent.futures.html#processpoolexecutor\" rel=\"nofollow noreferrer\"><code>ProcessPoolExecutor</code></a> to do <a href=\"https://stackoverflow.com/questions/20776189/concurrent-futures-vs-multiprocessing-in-python-3\">pretty much the same thing</a>.  This example starts tasks one at a time instead of mapping to a list:</p>\n\n<pre><code>from concurrent.futures import ProcessPoolExecutor\nimport multiprocessing as mp\nimport time\nfrom random import random\n\ndef work(i):\n    r = random()\n    print(\"work\", i, r)\n    time.sleep(r)\n\ndef main():\n    ctx = mp.get_context(\"spawn\")\n    with ProcessPoolExecutor(mp_context=ctx) as pool:\n        for i in range(20):\n            pool.submit(work, i)\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11828353, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q4wEhpd-2Bg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfVhsXzKWLESxWSlLAKxHhQZnU1FQ/photo.jpg?sz=128", "display_name": "Adrian", "link": "https://stackoverflow.com/users/11828353/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4127, "favorite_count": 1, "accepted_answer_id": 57192877, "answer_count": 2, "score": 1, "last_activity_date": 1597975398, "creation_date": 1564003127, "last_edit_date": 1564023493, "question_id": 57191393, "link": "https://stackoverflow.com/questions/57191393/python-multiprocessing-with-start-method-spawn-doesnt-work", "title": "Python multiprocessing with start method &#39;spawn&#39; doesn&#39;t work", "body": "<p>I wrote a Python class to plot pylots in parallel. It works fine on Linux where the default start method is fork but when I tried it on Windows I ran into problems (which can be reproduced on Linux using the spawn start method - see code below). I always end up getting this error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test.py\", line 50, in &lt;module&gt;\n    test()\n  File \"test.py\", line 7, in test\n    asyncPlotter.saveLinePlotVec3(\"test\")\n  File \"test.py\", line 41, in saveLinePlotVec3\n    args=(test, ))\n  File \"test.py\", line 34, in process\n    p.start()\n  File \"C:\\Users\\adrian\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\process.py\", line 112, in start\n    self._popen = self._Popen(self)\n  File \"C:\\Users\\adrian\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\context.py\", line 223, in _Popen\n    return _default_context.get_context().Process._Popen(process_obj)\n  File \"C:\\Users\\adrian\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\context.py\", line 322, in _Popen\n    return Popen(process_obj)\n  File \"C:\\Users\\adrian\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\popen_spawn_win32.py\", line 89, in __init__\n    reduction.dump(process_obj, to_child)\n  File \"C:\\Users\\adrian\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\reduction.py\", line 60, in dump\n    ForkingPickler(file, protocol).dump(obj)\nTypeError: can't pickle weakref objects\n\nC:\\Python\\MonteCarloTools&gt;Traceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Users\\adrian\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\spawn.py\", line 99, in spawn_main\n    new_handle = reduction.steal_handle(parent_pid, pipe_handle)\n  File \"C:\\Users\\adrian\\AppData\\Local\\Programs\\Python\\Python37\\lib\\multiprocessing\\reduction.py\", line 82, in steal_handle\n    _winapi.PROCESS_DUP_HANDLE, False, source_pid)\nOSError: [WinError 87] The parameter is incorrect\n</code></pre>\n\n<p>I hope there is a way to make this code work for Windows. Here a link to the different start methods available on Linux and Windows: <a href=\"https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods</a></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import multiprocessing as mp\ndef test():\n\n    manager = mp.Manager()\n    asyncPlotter = AsyncPlotter(manager.Value('i', 0))\n\n    asyncPlotter.saveLinePlotVec3(\"test\")\n    asyncPlotter.saveLinePlotVec3(\"test\")\n\n    asyncPlotter.join()\n\n\nclass AsyncPlotter():\n\n    def __init__(self, nc, processes=mp.cpu_count()):\n\n        self.nc = nc\n        self.pids = []\n        self.processes = processes\n\n\n    def linePlotVec3(self, nc, processes, test):\n\n        self.waitOnPool(nc, processes)\n\n        print(test)\n\n        nc.value -= 1\n\n\n    def waitOnPool(self, nc, processes):\n\n        while nc.value &gt;= processes:\n            time.sleep(0.1)\n        nc.value += 1\n\n\n    def process(self, target, args):\n\n        ctx = mp.get_context('spawn') \n        p = ctx.Process(target=target, args=args)\n        p.start()\n        self.pids.append(p)\n\n\n    def saveLinePlotVec3(self, test):\n\n        self.process(target=self.linePlotVec3,\n                       args=(self.nc, self.processes, test))\n\n\n    def join(self):\n        for p in self.pids:\n            p.join()\n\n\nif __name__=='__main__':\n    test()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "cartesian-product"], "answers": [{"comments": [{"owner": {"reputation": 991, "user_id": 2555108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xySgD.png?s=128&g=1", "display_name": "Michael Kolber", "link": "https://stackoverflow.com/users/2555108/michael-kolber"}, "edited": false, "score": 0, "creation_date": 1564003495, "post_id": 57191417, "comment_id": 100892471, "body": "I was going to suggest using indices but this is far more elegant."}, {"owner": {"reputation": 22865, "user_id": 840947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9578f9865cd3433f0973aa78492a13?s=128&d=identicon&r=PG", "display_name": "Heike", "link": "https://stackoverflow.com/users/840947/heike"}, "edited": false, "score": 2, "creation_date": 1564003680, "post_id": 57191417, "comment_id": 100892526, "body": "You could also use <code>x is not y</code> instead of comparing <code>id(x)</code> and <code>id(y)</code>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 22865, "user_id": 840947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c9578f9865cd3433f0973aa78492a13?s=128&d=identicon&r=PG", "display_name": "Heike", "link": "https://stackoverflow.com/users/840947/heike"}, "edited": false, "score": 0, "creation_date": 1564006612, "post_id": 57191417, "comment_id": 100893343, "body": "@Heike: Thanks for fixing my brain freeze.  <code>is not</code> is superior for a variety of reasons."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1564006579, "last_edit_date": 1564006579, "creation_date": 1564003273, "answer_id": 57191417, "question_id": 57191386, "link": "https://stackoverflow.com/questions/57191386/can-cartesian-product-of-two-lists-return-all-the-combinations-except-the-combin/57191417#57191417", "title": "Can Cartesian product of two lists return all the combinations except the combinations involving two same elements?", "body": "<p>One simple change: use the object reference, rather than the value:</p>\n\n<pre><code>&gt;&gt;&gt; [(x,y) for x in nested for y in nested if id(x) is not id(y)]\n[([1, 2], [2, 3]), ([1, 2], [1, 2]), ([2, 3], [1, 2]), ([2, 3], [1, 2]), ([1, 2], [1, 2]), ([1, 2], [2, 3])]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 0, "last_activity_date": 1564003345, "creation_date": 1564003345, "answer_id": 57191431, "question_id": 57191386, "link": "https://stackoverflow.com/questions/57191386/can-cartesian-product-of-two-lists-return-all-the-combinations-except-the-combin/57191431#57191431", "title": "Can Cartesian product of two lists return all the combinations except the combinations involving two same elements?", "body": "<p>You can use the index instead of checking the value, like:</p>\n\n<pre><code>[(x, y) for i, x in enumerate(data) for j, y in enumerate(data) if i != j]</code></pre>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt; [(x, y) for i, x in enumerate(data) for j, y in enumerate(data) if i != j]\n[('a', 'b'), ('a', 'c'), ('b', 'a'), ('b', 'c'), ('c', 'a'), ('c', 'b')]\n&gt;&gt;&gt; data = [[1,2],[2,3],[1,2]]\n&gt;&gt;&gt; [(x, y) for i, x in enumerate(data) for j, y in enumerate(data) if i != j]\n[([1, 2], [2, 3]), ([1, 2], [1, 2]), ([2, 3], [1, 2]), ([2, 3], [1, 2]), ([1, 2], [1, 2]), ([1, 2], [2, 3])]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 571, "user_id": 1520091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e1f0f856f262912274e9a74883e3754?s=128&d=identicon&r=PG", "display_name": "checkThisOut", "link": "https://stackoverflow.com/users/1520091/checkthisout"}, "is_accepted": true, "score": 7, "last_activity_date": 1564003855, "last_edit_date": 1564003855, "creation_date": 1564003441, "answer_id": 57191451, "question_id": 57191386, "link": "https://stackoverflow.com/questions/57191386/can-cartesian-product-of-two-lists-return-all-the-combinations-except-the-combin/57191451#57191451", "title": "Can Cartesian product of two lists return all the combinations except the combinations involving two same elements?", "body": "<p>Try it with itertools permutations</p>\n\n<pre><code>import itertools\nlist(itertools.permutations(['a','b','c'], r=2))\n</code></pre>\n\n<p>The output is as you like</p>\n\n<pre><code>[('a', 'b'), ('a', 'c'), ('b', 'a'), ('b', 'c'), ('c', 'a'), ('c', 'b')]\n</code></pre>\n\n<p>This works also for your case:</p>\n\n<pre><code>list(itertools.permutations([[1,2],[2,3],[1,2]], 2))\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>[([1, 2], [2, 3]), ([1, 2], [1, 2]), ([2, 3], [1, 2]), ([2, 3], [1, 2]), ([1, 2], [1, 2]), ([1, 2], [2, 3])]\n</code></pre>\n\n<p>For reference look here:\n<a href=\"https://docs.python.org/3.7/library/itertools.html#itertools.permutations\" rel=\"nofollow noreferrer\">https://docs.python.org/3.7/library/itertools.html#itertools.permutations</a></p>\n"}], "owner": {"reputation": 426, "user_id": 7083974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de3019c5ec22dc1ddbb2dfc7eebdac12?s=128&d=identicon&r=PG&f=1", "display_name": "Bee", "link": "https://stackoverflow.com/users/7083974/bee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "closed_date": 1564007099, "accepted_answer_id": 57191451, "answer_count": 3, "score": 0, "last_activity_date": 1564006579, "creation_date": 1564003083, "question_id": 57191386, "link": "https://stackoverflow.com/questions/57191386/can-cartesian-product-of-two-lists-return-all-the-combinations-except-the-combin", "closed_reason": "Duplicate", "title": "Can Cartesian product of two lists return all the combinations except the combinations involving two same elements?", "body": "<p>For Example</p>\n\n<p><code>nested = [a,b,c]</code></p>\n\n<p>Cartesian product of the above list by itself will generate the following pairs</p>\n\n<p><code>[(a,a),(a,b),(a,c),(b,a),(b,c),(b,b),(c,a),(c,b),(c,c)]</code></p>\n\n<p>I want to find a way to generate the following</p>\n\n<p><code>[(a,b),(a,c),(b,a),(b,c),(c,a),(c,b)]</code></p>\n\n<p>I tried the following</p>\n\n<p><code>[(x,y) for x in nested for y in nested if x != y]</code></p>\n\n<p>The above code fails for the following test case</p>\n\n<pre><code>nested_testcase1 = [[1,2],[2,3],[1,2]]\n</code></pre>\n\n<p>Now the above line of code will give out the following result</p>\n\n<p><code>[([1,2],[2,3]),([2,3],[1,2]),([1,2],[2,3]),([2,3],[1,2])]</code></p>\n\n<p>But what I what is the following</p>\n\n<p><code>[([1,2],[2,3]),([2,3],[1,2]),([1,2],[2,3]),([2,3],[1,2]),([1,2],[1,2]),([1,2],[1,2])]</code></p>\n\n<p>The last two combinations coming by pairing the first and last element.</p>\n\n<p>Anyone has got any ideas?</p>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1564004186, "post_id": 57191369, "comment_id": 100892698, "body": "Just rename the columns after. You know what you&#39;ve grouped by and what you&#39;ve pivoted on."}], "answers": [{"tags": [], "owner": {"reputation": 1296, "user_id": 6350670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4e8e7ae3f81230f166b63f54904439f?s=128&d=identicon&r=PG&f=1", "display_name": "Gelerion", "link": "https://stackoverflow.com/users/6350670/gelerion"}, "is_accepted": true, "score": 1, "last_activity_date": 1564043628, "creation_date": 1564043628, "answer_id": 57197629, "question_id": 57191369, "link": "https://stackoverflow.com/questions/57191369/combine-pivoted-and-aggregated-column-in-pyspark-dataframe/57197629#57197629", "title": "Combine pivoted and aggregated column in PySpark Dataframe", "body": "<p>According to <a href=\"https://github.com/apache/spark/blob/79e204770300dab4a669b9f8e2421ef905236e7b/sql/catalyst/src/main/scala/org/apache/spark/sql/catalyst/analysis/Analyzer.scala#L544\" rel=\"nofollow noreferrer\">Spark's source code</a>, it has a special branch for pivoting with single aggregation.</p>\n\n<pre><code>    val singleAgg = aggregates.size == 1\n\n    def outputName(value: Expression, aggregate: Expression): String = {\n      val stringValue = value.name\n\n      if (singleAgg) {\n        stringValue &lt;--- Here\n      } \n      else {\n        val suffix = {...}\n        stringValue + \"_\" + suffix\n      }\n    }\n</code></pre>\n\n<p>I don't know the reason, but the single remaining option is column renaming.</p>\n\n<p>Here is a simplified version for renaming:</p>\n\n<pre><code>  def rename(identity: Set[String], suffix: String)(df: DataFrame): DataFrame = {\n    val fieldNames = df.schema.fields.map(filed =&gt; filed.name)\n    val renamed = fieldNames.map(fieldName =&gt; {\n      if (identity.contains(fieldName)) {\n        fieldName\n      } else {\n        fieldName + suffix\n      }} )\n\n  df.toDF(renamed:_*)\n  }\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>rename(Set(\"date\"), \"_percent\")(pivoted).show()\n\n+----------+---------+---------+\n|      date|A_percent|B_percent|\n+----------+---------+---------+\n|2019-01-01|    0.025|     0.05|\n|2019-01-02|     0.11|     0.06|\n+----------+---------+---------+\n</code></pre>\n"}], "owner": {"reputation": 3493, "user_id": 4913108, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7b27233db222cdabfe9c7d2c5f8bc2c6?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Bansal", "link": "https://stackoverflow.com/users/4913108/gaurav-bansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 0, "accepted_answer_id": 57197629, "answer_count": 1, "score": 0, "last_activity_date": 1564043628, "creation_date": 1564002979, "question_id": 57191369, "link": "https://stackoverflow.com/questions/57191369/combine-pivoted-and-aggregated-column-in-pyspark-dataframe", "title": "Combine pivoted and aggregated column in PySpark Dataframe", "body": "<p>My question is related to <a href=\"https://stackoverflow.com/questions/37836877/rename-pivoted-and-aggregated-column-in-pyspark-dataframe\">this one</a>. I have a PySpark DataFrame, named <code>df</code>, as shown below. </p>\n\n<pre><code> date      | recipe | percent | volume\n----------------------------------------\n2019-01-01 |   A    |  0.03   |  53\n2019-01-01 |   A    |  0.02   |  55\n2019-01-01 |   B    |  0.05   |  60\n2019-01-02 |   A    |  0.11   |  75\n2019-01-02 |   B    |  0.06   |  64\n2019-01-02 |   B    |  0.08   |  66\n</code></pre>\n\n<p>If I pivot it on <code>recipe</code> and aggregate both <code>percent</code> and <code>volume</code>, I get column names that concatenate <code>recipe</code> and the aggregated variable. I can use <code>alias</code> to clean things up. For example:</p>\n\n<pre><code>df.groupBy('date').pivot('recipe').agg(avg('percent').alias('percent'), avg('volume').alias('volume')).show()\n\n date      | A_percent | A_volume | B_percent | B_volume\n--------------------------------------------------------\n2019-01-01 |   0.025   |  54      |  0.05     |  60\n2019-01-02 |   0.11    |  75      |  0.07     |  65\n</code></pre>\n\n<p>However, if I aggregate just one variable, say <code>percent</code>, the column names don't include the aggregated variable:</p>\n\n<pre><code>df.groupBy('date').pivot('recipe').agg(avg('percent').alias('percent')).show()\n\n date      |   A   |  B\n-------------------------\n2019-01-01 | 0.025 | 0.05\n2019-01-02 | 0.11  | 0.07\n</code></pre>\n\n<p>How can I set it to include the concatenated name when there is only one variable in the <code>agg</code> function? </p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 0, "creation_date": 1564002845, "post_id": 57191326, "comment_id": 100892263, "body": "The problem is with the default empty list in <code>__init__</code>. Change that to a <code>None</code> and handle the condition within the function. That&#39;ll solve your issue"}, {"owner": {"reputation": 276, "user_id": 8895717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NRZT.jpg?s=128&g=1", "display_name": "Samantha Miller", "link": "https://stackoverflow.com/users/8895717/samantha-miller"}, "edited": false, "score": 1, "creation_date": 1564003353, "post_id": 57191326, "comment_id": 100892434, "body": "I wouldn&#39;t worry too much that your question was marked as a duplicate. I think that this was a well-formulated question with relevant code and expected/actual output, and the &quot;Least Astonishment&quot; post that was linked would be hard to find if you are a beginner."}], "answers": [{"tags": [], "owner": {"reputation": 276, "user_id": 8895717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NRZT.jpg?s=128&g=1", "display_name": "Samantha Miller", "link": "https://stackoverflow.com/users/8895717/samantha-miller"}, "is_accepted": true, "score": 3, "last_activity_date": 1564002947, "creation_date": 1564002947, "answer_id": 57191364, "question_id": 57191326, "link": "https://stackoverflow.com/questions/57191326/python-object-initialization-issue/57191364#57191364", "title": "Python Object initialization issue", "body": "<p>The problem is the mutable default argument in your constructor.  inspectorG4dget's comment is correct in that you are experiencing the same problem as the linked post describes. </p>\n\n<p>You can achieve your desired behavior by making the following change:</p>\n\n<pre><code>def __init__(self,stackA=None):\n    if stackA is None:\n        stackA = []\n    print(stackA)\n    self.stackA = stackA\n    stackA.append('x')\n    print('inside init ',stackA)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11283512, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--G-M3jV6oug/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf0KCBVz3qKsfYtZKmXOjaPQ3uDqA/mo/photo.jpg?sz=128", "display_name": "Tito Mitra", "link": "https://stackoverflow.com/users/11283512/tito-mitra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1564003155, "accepted_answer_id": 57191364, "answer_count": 1, "score": 0, "last_activity_date": 1564002947, "creation_date": 1564002747, "last_edit_date": 1564002860, "question_id": 57191326, "link": "https://stackoverflow.com/questions/57191326/python-object-initialization-issue", "closed_reason": "Duplicate", "title": "Python Object initialization issue", "body": "<p>I have a simple python class where I am initializing an instance variable. I am expecting that when I initialize two different objects of that class, each time the instance variable will be initialized afresh. But that is not the case I see in my notebook output. The initialization output of b is as if the object from the initialization of a is held onto. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class MyQueue(object):\n\n    def __init__(self,stackA=[]):\n        print(stackA)\n        self.stackA = stackA\n        stackA.append('x')\n        print('inside init ',stackA)\n\n    def addElement(self, elem):\n        print('before append ',self.stackA)\n        self.stackA.append(elem)\n        print('after append ',self.stackA)\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>a = MyQueue()\nb = MyQueue()\na==b\n</code></pre>\n\n<p>I expect </p>\n\n<pre><code>[]\ninside init  ['x']\n[]\ninside init  ['x']\nFalse\n</code></pre>\n\n<p>But get,</p>\n\n<pre><code>[]\ninside init  ['x']\n['x']\ninside init  ['x', 'x']\nFalse\n</code></pre>\n"}, {"tags": ["python", "vtk"], "answers": [{"tags": [], "owner": {"reputation": 417, "user_id": 4608037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2d9aeb2d17f5f2090b661c53709d319?s=128&d=identicon&r=PG&f=1", "display_name": "woodz", "link": "https://stackoverflow.com/users/4608037/woodz"}, "is_accepted": false, "score": 0, "last_activity_date": 1564013196, "last_edit_date": 1564013196, "creation_date": 1564010266, "answer_id": 57192403, "question_id": 57191235, "link": "https://stackoverflow.com/questions/57191235/vtkrenderwindow-does-not-open-a-graphics-window/57192403#57192403", "title": "vtkRenderWindow does not open a graphics window", "body": "<p>You are modifying your vtkRenderer object after you have added it to your vtkRenderWindow object. Plus you modify your vtkRenderWindow object after you set it to your interactor object. I would suggest to keep things ordered (follow one after another) - <strong>not tested</strong>, requires Mesa 10.6.5 or later and OpenGL 3.2. or later:</p>\n\n<pre><code># -*- coding: UTF-8 -*-\n\nimport vtk\nfrom vtk.util.colors import tomato\n\nif __name__ == '__main__':\n\n  cylinder = vtk.vtkCylinderSource()\n  cylinder.SetResolution(8)\n\n  cylinderMapper = vtk.vtkPolyDataMapper()\n  cylinderMapper.SetInputConnection(cylinder.GetOutputPort())\n\n  cylinderActor = vtk.vtkActor()\n  cylinderActor.SetMapper(cylinderMapper)\n  cylinderActor.GetProperty().SetColor(tomato)\n  cylinderActor.RotateX(30.0)\n  cylinderActor.RotateY(-45.0)\n\n  ren = vtk.vtkRenderer()\n  ren.AddActor(cylinderActor)\n  ren.SetBackground(0.1, 0.2, 0.4)\n  ren.ResetCameraClippingRange()  #instead of ren.ResetCamera()\n  #ren.GetActiveCamera().Zoom(1.5) #keep this out for a while (suspicious, because you request a zoom without doing something with it)\n\n  renWin = vtk.vtkRenderWindow()\n  renWin.AddRenderer(ren)\n  renWin.SetWindowName(\"some title\") #just a bonus\n  renWin.SetSize(200, 200)\n\n  #style = vtk.vtkInteractorStyleTrackballCamera() #later uncomment this for test\n  iren = vtk.vtkRenderWindowInteractor()\n  iren.SetRenderWindow(renWin)\n  #iren.SetInteractorStyle(style) #later uncomment this for test\n  iren.Initialize()\n\n  renWin.Render()\n  iren.Start()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11832733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65a5641e9d00a3d52fe86ed498e1c21?s=128&d=identicon&r=PG&f=1", "display_name": "DavidBenoit", "link": "https://stackoverflow.com/users/11832733/davidbenoit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564145206, "creation_date": 1564002296, "question_id": 57191235, "link": "https://stackoverflow.com/questions/57191235/vtkrenderwindow-does-not-open-a-graphics-window", "title": "vtkRenderWindow does not open a graphics window", "body": "<p>The vtkRenderWindow does not open a window after compiling my python code.</p>\n\n<p>I have found a basic vtk example to troubleshoot the problem but I can't seem to find any solutions.</p>\n\n<p>The code runs without any errors but no window well open to show the image.</p>\n\n<p>I had the same problem with matplotlib and had to change the backend to TkAgg to show any graphics.</p>\n\n<p>Thanks for your help!</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import vtk\nfrom vtk.util.colors import tomato\n\ncylinder = vtk.vtkCylinderSource()\ncylinder.SetResolution(8)\n\ncylinderMapper = vtk.vtkPolyDataMapper()\ncylinderMapper.SetInputConnection(cylinder.GetOutputPort())\n\ncylinderActor = vtk.vtkActor()\ncylinderActor.SetMapper(cylinderMapper)\ncylinderActor.GetProperty().SetColor(tomato)\ncylinderActor.RotateX(30.0)\ncylinderActor.RotateY(-45.0)\n\nren = vtk.vtkRenderer()\nrenWin = vtk.vtkRenderWindow()\nrenWin.AddRenderer(ren)\niren = vtk.vtkRenderWindowInteractor()\niren.SetRenderWindow(renWin)\n\nren.AddActor(cylinderActor)\nren.SetBackground(0.1, 0.2, 0.4)\nrenWin.SetSize(200, 200)\n\n\niren.Initialize()\n\nren.ResetCamera()\nren.GetActiveCamera().Zoom(1.5)\nrenWin.Render()\niren.Start()\n\n</code></pre>\n"}, {"tags": ["python", "pyqt", "pyqt4", "qlistwidgetitem"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1564017376, "creation_date": 1564017376, "answer_id": 57193044, "question_id": 57191224, "link": "https://stackoverflow.com/questions/57191224/call-a-function-with-clicked-item-from-qlistwidgetitem-in-python/57193044#57193044", "title": "Call a Function with clicked Item from QListWidgetItem in Python", "body": "<p>Your code has the following errors:</p>\n\n<ul>\n<li><p>The name of the QListWidget is mylist_sorted, and not mylist as you are using it.</p></li>\n<li><p>If you are going to connect with a function you must use the seconde signature: <code>QObject.connect(QObject, SIGNAL(), callable, Qt.ConnectionType=Qt.AutoConnection)</code> where the third parameter is the function.</p></li>\n<li><p>The name of the function is show_item, it is not showItem. It is the second error of the same type, that is, with the name of the variables. In Python it is very important that the name used be the same as the one that was declared. </p></li>\n</ul>\n\n<p>Considering the above the solution is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sys\nfrom PyQt4.QtCore import SIGNAL\nfrom PyQt4.QtGui import QApplication, QListWidgetItem\nfrom PyQt4.uic import loadUi\n\n\ndef show_item(item):\n    print(item)\n\n\nif __name__ == \"__main__\":\n\n    app = QApplication(sys.argv)\n    mainscreen = loadUi(\"mainscreen.ui\")\n    for x in range(4):\n        mainscreen.mylist_sorted.addItem(str(x))\n\n    mainscreen.connect(\n        mainscreen.mylist_sorted,\n        SIGNAL(\"itemClicked(QListWidgetItem*)\"),\n        show_item,\n    )\n    mainscreen.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>Although it is advisable to use <a href=\"https://www.riverbankcomputing.com/static/Docs/PyQt4/new_style_signals_slots.html\" rel=\"nofollow noreferrer\">the new connection syntax</a>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sys\nfrom PyQt4.QtCore import SIGNAL\nfrom PyQt4.QtGui import QApplication, QListWidgetItem\nfrom PyQt4.uic import loadUi\n\n\ndef show_item(item):\n    print(item)\n\n\nif __name__ == \"__main__\":\n\n    app = QApplication(sys.argv)\n    mainscreen = loadUi(\"mainscreen.ui\")\n    for x in range(4):\n        mainscreen.mylist_sorted.addItem(str(x))\n\n    mainscreen.mylist_sorted.itemClicked.connect(show_item)\n    mainscreen.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11832800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb461cc34d2b94b469acc4afb3e3f37d?s=128&d=identicon&r=PG&f=1", "display_name": "pringles", "link": "https://stackoverflow.com/users/11832800/pringles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 57193044, "answer_count": 1, "score": 1, "last_activity_date": 1598951187, "creation_date": 1564002240, "last_edit_date": 1598951187, "question_id": 57191224, "link": "https://stackoverflow.com/questions/57191224/call-a-function-with-clicked-item-from-qlistwidgetitem-in-python", "title": "Call a Function with clicked Item from QListWidgetItem in Python", "body": "<p>I am using Qt-designer and PyQt. I set up a Window with some Buttons and a QListWidget.</p>\n\n<p>I want to get the clicked item of a QListWidget.\nFor example I have 4 Items in the List and I click the first one the item should be sent to another function.</p>\n\n<p>I read some examples but they always use classes and \"self\". Since I am a total newbie I want to start simple and set everything up without a class.</p>\n\n<pre><code>def show_item(item):\n    print (item)\n\nmainscreen.connect(mainscreen.myList, SIGNAL(\"itemClicked(QListWidgetItem*)\"),QListWidgetItem, showItem(QListWidgetItem))\n</code></pre>\n\n<p>I don't really understand those errors since I thought all of the requirements are fullfilled.</p>\n\n<pre><code>TypeError: arguments did not match any overloaded call:\n  QObject.connect(QObject, SIGNAL(), QObject, SLOT(), Qt.ConnectionType=Qt.AutoConnection): argument 3 has unexpected type 'PyQt4.QtCore.pyqtWrapperType'\n  QObject.connect(QObject, SIGNAL(), callable, Qt.ConnectionType=Qt.AutoConnection): argument 4 has unexpected type 'str'\n  QObject.connect(QObject, SIGNAL(), SLOT(), Qt.ConnectionType=Qt.AutoConnection): argument 3 has unexpected type 'PyQt4.QtCore.pyqtWrapperType'\n</code></pre>\n\n<p>Edit: Code Sample</p>\n\n<pre><code>import sys\nfrom PyQt4.QtCore import *\nfrom PyQt4.QtGui import *\nfrom PyQt4.uic import \n\ndef show_item(item):\n    print (item)\n\n\n\nfor x in range(4):\n    mainscreen.mylist_sorted.addItem(x)\n\napp = QApplication(sys.argv)\nmainscreen = loadUi(\"mainscreen.ui\")\nmainscreen.connect(mainscreen.mylist_sorted, SIGNAL(\"itemClicked(QListWidgetItem*)\"),QListWidgetItem, (showItem(QListWidgetItem)))\nmainscreen.show()\nsys.exit(app.exec_())\n</code></pre>\n\n<hr>\n\n<p>mainscreen.ui file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ui version=\"4.0\"&gt;\n &lt;class&gt;mainscreen&lt;/class&gt;\n &lt;widget class=\"QMainWindow\" name=\"mainscreen\"&gt;\n  &lt;property name=\"geometry\"&gt;\n   &lt;rect&gt;\n    &lt;x&gt;0&lt;/x&gt;\n    &lt;y&gt;0&lt;/y&gt;\n    &lt;width&gt;800&lt;/width&gt;\n    &lt;height&gt;600&lt;/height&gt;\n   &lt;/rect&gt;\n  &lt;/property&gt;\n  &lt;property name=\"windowTitle\"&gt;\n   &lt;string&gt;MainWindow&lt;/string&gt;\n  &lt;/property&gt;\n  &lt;widget class=\"QWidget\" name=\"centralwidget\"&gt;\n   &lt;widget class=\"QListWidget\" name=\"mylist_sorted\"&gt;\n    &lt;property name=\"geometry\"&gt;\n     &lt;rect&gt;\n      &lt;x&gt;30&lt;/x&gt;\n      &lt;y&gt;160&lt;/y&gt;\n      &lt;width&gt;256&lt;/width&gt;\n      &lt;height&gt;192&lt;/height&gt;\n     &lt;/rect&gt;\n    &lt;/property&gt;\n   &lt;/widget&gt;\n  &lt;/widget&gt;\n  &lt;widget class=\"QMenuBar\" name=\"menubar\"&gt;\n   &lt;property name=\"geometry\"&gt;\n    &lt;rect&gt;\n     &lt;x&gt;0&lt;/x&gt;\n     &lt;y&gt;0&lt;/y&gt;\n     &lt;width&gt;800&lt;/width&gt;\n     &lt;height&gt;25&lt;/height&gt;\n    &lt;/rect&gt;\n   &lt;/property&gt;\n  &lt;/widget&gt;\n  &lt;widget class=\"QStatusBar\" name=\"statusbar\"/&gt;\n &lt;/widget&gt;\n &lt;resources/&gt;\n &lt;connections/&gt;\n&lt;/ui&gt;\n</code></pre>\n"}, {"tags": ["python", "django", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 1254, "user_id": 8382028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715c51e1e2fe595daef9d377f0f1f323?s=128&d=identicon&r=PG&f=1", "display_name": "ViaTech", "link": "https://stackoverflow.com/users/8382028/viatech"}, "edited": false, "score": 0, "creation_date": 1564093593, "post_id": 57191293, "comment_id": 100927926, "body": "This worked out pretty nicely today. Django&#39;s JSONField is nice... I once attempted to do this with MySQL and a textfield and it was inefficient as converting the json to a dict at runtime does not allow standard ORM queries... I&#39;m hoping there is a better way for that reason, if there isn&#39;t please let me know"}], "tags": [], "owner": {"reputation": 1254, "user_id": 8382028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715c51e1e2fe595daef9d377f0f1f323?s=128&d=identicon&r=PG&f=1", "display_name": "ViaTech", "link": "https://stackoverflow.com/users/8382028/viatech"}, "is_accepted": true, "score": 0, "last_activity_date": 1564002574, "creation_date": 1564002574, "answer_id": 57191293, "question_id": 57191223, "link": "https://stackoverflow.com/questions/57191223/using-model-objects-all-as-a-blueprint-for-a-secondary-table-entry/57191293#57191293", "title": "Using Model.objects.all() as a blueprint for a secondary table entry", "body": "<p>I didn't post this in my question because it was getting long, but my best option so far seems to be to use a Django JSONField (as I am using Postgres), like so:</p>\n\n<pre><code>from django.contrib.postgres.fields import JSONField\n\nclass MoveInInspections(Inspections):\n    unit = models.ForeignKey(Unit, on_delete=models.CASCADE, db_column='unit_id')\n    data = JSONField()\n\n\n\nclass MoveOutInspections(Inspections):\n    unit = models.ForeignKey(Unit, on_delete=models.CASCADE, db_column='unit_id')\n    date_notice_given = models.DateField(blank=True, null=True, default=None)\n    date_vacated = models.DateField(blank=True, null=True, default=None)\n    data = JSONField()\n\n</code></pre>\n\n<p>To where I store the values of the <code>InspectionLocations</code> object's in a Dictionary</p>\n"}], "owner": {"reputation": 1254, "user_id": 8382028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715c51e1e2fe595daef9d377f0f1f323?s=128&d=identicon&r=PG&f=1", "display_name": "ViaTech", "link": "https://stackoverflow.com/users/8382028/viatech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 57191293, "answer_count": 1, "score": 0, "last_activity_date": 1564093802, "creation_date": 1564002225, "last_edit_date": 1564093802, "question_id": 57191223, "link": "https://stackoverflow.com/questions/57191223/using-model-objects-all-as-a-blueprint-for-a-secondary-table-entry", "title": "Using Model.objects.all() as a blueprint for a secondary table entry", "body": "<p>I am having a bit of trouble with the logic of how this should work so I am hoping it is possible.</p>\n\n<p><strong>I figured out 1 possible solution that is written as an answer below, I will accept it in a few days, but if someone comes up with a better solution, I will negate any answer I post.</strong></p>\n\n<p>Overall I am working on an Apartment Move-Out/Move-In Inspection Application in Django, and in both portions I have universal <strong>Locations</strong> that must be inspected for each report. I have allowed the <code>InspectionLocations</code> objects to be updated/submitted by clients, which is presenting an issue in how submitted reports should be stored in my Database.</p>\n\n<p>What I want is to use the <code>InspectionLocations</code> table as a blueprint to build an Inspection Report for Move-Ins where the form-fields are generated based on the <code>InspectionLocations</code> objects' <code>location</code>, <code>status</code>, and <code>information</code> attributes/fields.</p>\n\n<p>My issue is right at this point, how do I reference those values as a blueprint to build a report submission when the number of fields in the <code>InspectionLocations</code> can change? </p>\n\n<pre><code>from django.db import models\nfrom apps.units.models import Unit\n\nclass Inspections(models.Model):\n    class Meta:\n        abstract = True\n    id = models.AutoField(primary_key=True)\n    inspection_date = models.DateField()\n\n\n    submitted_by = models.ForeignKey(\n        'users.CustomUser',\n        default=None,\n        null=True,\n        on_delete=models.SET_NULL,\n        db_column='submitted_by')\n\n    last_update = models.DateTimeField(auto_now=True)\n    date_added = models.DateTimeField(auto_now_add=True, editable=False)\n\n\nclass MoveInInspections(Inspections):\n    unit = models.ForeignKey(Unit, on_delete=models.CASCADE, db_column='unit_id')\n    # should have reference to all InspectionLocation items as reference for submission, how?\n\n\n\nclass MoveOutInspections(Inspections):\n    unit = models.ForeignKey(Unit, on_delete=models.CASCADE, db_column='unit_id')\n    date_notice_given = models.DateField(blank=True, null=True, default=None)\n    date_vacated = models.DateField(blank=True, null=True, default=None)\n     # should have reference to all InspectionLocation items as reference for submission, how?\n\n\n\nclass InspectionLocations(models.Model):\n    '''\n\n    Defualt Inspection Locations are created when a \n    client is created using code like this:\n\n    InspectionLocation.objects.get_or_create(location='Living Room')\n    InspectionLocation.objects.get_or_create(location='Dining Room')\n    InspectionLocation.objects.get_or_create(location='Kitchen')\n    InspectionLocation.objects.get_or_create(location='Bedroom')\n    InspectionLocation.objects.get_or_create(location='Bathroom')\n    InspectionLocation.objects.get_or_create(location='Other')\n    '''\n\n    id = models.AutoField(primary_key=True)\n    location = models.CharField(max_length=50)\n    status = models.BooleanField(default=None)\n    information = models.TextField(default=None, blank=True)\n</code></pre>\n\n<p>I have tried ManyToMany fields and FKs but I cannot seem to get the logic working as anytime an object references an <code>InspectionLocations</code> object it is universally changing data for every report, which is leading be to the idea that I somehow need to use it as a <strong>blueprint</strong>.</p>\n"}, {"tags": ["python", "python-3.x", "file", "directory"], "comments": [{"owner": {"reputation": 780, "user_id": 1034677, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/537e6333a0f3383d3e99a4d75c827e7e?s=128&d=identicon&r=PG", "display_name": "tim", "link": "https://stackoverflow.com/users/1034677/tim"}, "edited": false, "score": 0, "creation_date": 1564002085, "post_id": 57191156, "comment_id": 100892007, "body": "Please provide a minimal reproducible example <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1564053889, "post_id": 57191156, "comment_id": 100909473, "body": "Two options: make sure those modules are in a known directory, and add that directory to <code>sys.path</code>, then use <code>importlib.import_module(module_name)</code> to import the modules dynamically. Or, <code>importlib.util.spec_from_file_location()</code> as shown in the other linked post."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 7760362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b1ee7df2f896f8d0d3f1469cacefe30?s=128&d=identicon&r=PG&f=1", "display_name": "ljagodz", "link": "https://stackoverflow.com/users/7760362/ljagodz"}, "is_accepted": false, "score": -1, "last_activity_date": 1564003247, "last_edit_date": 1564003247, "creation_date": 1564002586, "answer_id": 57191296, "question_id": 57191156, "link": "https://stackoverflow.com/questions/57191156/import-file-from-file-directory-python/57191296#57191296", "title": "Import File from File Directory (Python)", "body": "<p>From: <a href=\"https://docs.python.org/3/tutorial/modules.html#the-module-search-path\" rel=\"nofollow noreferrer\">https://docs.python.org/3/tutorial/modules.html#the-module-search-path</a></p>\n\n<p>I tested this and I believe it should work for you as well. The code should look as follows:</p>\n\n<pre><code>import sys\ndirectory = '../Model.py'\ndirectory = directory[:-8]\nsys.path.append(directory)\nfrom Model import Test\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 10001607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c672290dde12010fc4a627d185ccbca9?s=128&d=identicon&r=PG&f=1", "display_name": "Ron Arel", "link": "https://stackoverflow.com/users/10001607/ron-arel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "closed_date": 1564053739, "answer_count": 1, "score": 1, "last_activity_date": 1564053803, "creation_date": 1564001930, "question_id": 57191156, "link": "https://stackoverflow.com/questions/57191156/import-file-from-file-directory-python", "closed_reason": "Duplicate", "title": "Import File from File Directory (Python)", "body": "<p>Currently, I have the directory to a file </p>\n\n<pre><code>\"../Model.py\"\n</code></pre>\n\n<p>This model has a class called <strong>Test</strong>.</p>\n\n<p>Using the string of the directory, I want to import and use the class Test.</p>\n\n<p>How do I do so?</p>\n\n<p>(The String will change dynamically)</p>\n"}, {"tags": ["python", "amazon-web-services", "soap", "aws-lambda", "serverless"], "comments": [{"owner": {"reputation": 683, "user_id": 2831135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VGNdJ.jpg?s=128&g=1", "display_name": "Nikolay Grischenko", "link": "https://stackoverflow.com/users/2831135/nikolay-grischenko"}, "edited": false, "score": 0, "creation_date": 1564003768, "post_id": 57191142, "comment_id": 100892559, "body": "I use <code>zeep</code> for SOAP client on Lambda. Works like charm with no special blackmagic. Just install it to your Lambda package. Server-side should theoretically work very similar. As for providing an endpoint, have a more detailed look at the settings of API Gateway. You can set it up to the Lambda_Proxy mode and handle all the logic in the code of your function."}, {"owner": {"reputation": 2754, "user_id": 699285, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/37511b1e65178162ce63a8920bb117b7?s=128&d=identicon&r=PG", "display_name": "Marc", "link": "https://stackoverflow.com/users/699285/marc"}, "reply_to_user": {"reputation": 683, "user_id": 2831135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VGNdJ.jpg?s=128&g=1", "display_name": "Nikolay Grischenko", "link": "https://stackoverflow.com/users/2831135/nikolay-grischenko"}, "edited": false, "score": 0, "creation_date": 1564004339, "post_id": 57191142, "comment_id": 100892735, "body": "Yes I suspected zeep would be useful but that is a client library. Can it be used on the server to parse the incoming SOAP request data? Can it be used to take a dictionary of results and create a SOAP response? If so, how?"}, {"owner": {"reputation": 683, "user_id": 2831135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VGNdJ.jpg?s=128&g=1", "display_name": "Nikolay Grischenko", "link": "https://stackoverflow.com/users/2831135/nikolay-grischenko"}, "edited": false, "score": 0, "creation_date": 1564005082, "post_id": 57191142, "comment_id": 100892928, "body": "You can definitely use <code>zeep</code> to serialize/deserialize requests on the interfaces of your Lambda SOAP application. But the actual logic you will most likely have to implement yourself anyway."}], "owner": {"reputation": 2754, "user_id": 699285, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/37511b1e65178162ce63a8920bb117b7?s=128&d=identicon&r=PG", "display_name": "Marc", "link": "https://stackoverflow.com/users/699285/marc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1593653972, "creation_date": 1564001878, "last_edit_date": 1564004252, "question_id": 57191142, "link": "https://stackoverflow.com/questions/57191142/python-3-x-soap-library-for-writing-serverless-webservice-on-aws", "title": "python 3.x SOAP library for writing serverless webservice on AWS", "body": "<p>I need to convert some legacy Java code that implements a SOAP server - I need to convert it from java to python 3.x and I need to deploy the SOAP webservices on AWS Lambda. There is plenty of documentation on how to create REST web services on AWS Lambda in python, but I'm finding it really hard to find any information on writing a SOAP service. There are some client libraries for python SOAP, but I can't seem to find any server-side libraries or examples of how one would do this on AWS Lambda. I found zeep, which is meant to be a client library, and pysimplesoap, but in neither case is it clear how to use these on AWS Lambda. Any suggestions?</p>\n\n<p>UPDATE: So I discovered that SOAP  over HTTP is simply a call to HTTP POST which passes the SOAP request message as the HTTP body. (Of course there are headers in the HTTP request too that indicate that the body is a soap/xml message). So, to deploy to AWS Lambda, I basically need to deploy an HTTP PSOT webservice, which is easy enough using Zappa and Flask (or Django). The only tricky part is inside the post() function. Inside that function I would have to:</p>\n\n<ol>\n<li>Get the request.body (SOAP/XML)</li>\n<li>Use some python library to extract the items of interest from the SOAP message, perhaps parsing the entire message using a python XML parser</li>\n<li>Execute the business logic code that creates a result, say a dictionary</li>\n<li>Use some python library to convert that result dictionary to a SOAP response and let AWS Lambda send that SOAP response back</li>\n</ol>\n\n<p>It is parts 2 and 4 that I am not quite sure how to do. I can use xml.etree.ElementTree to parse the XML, but I suspect there might be a better/faster/simpler way. For the output, is there a way I can use something like zeep to take a dictionary of inputs and create a SOAP response message? The zeep library is meant to read the WSDL document and create request SOAP messages, not response SOAP messages, so I'm not exactly sure how to create a SOAP response message using zeep. Has anyone else done this or know of a better way to do it?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1564001888, "post_id": 57191124, "comment_id": 100891936, "body": "The first one does not do anything, since it produces a new string, but you throw that away."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1564001959, "post_id": 57191124, "comment_id": 100891967, "body": "<code>str</code> objects are immutable, every <code>str</code> method <i>returns a new <code>str</code> object</i>"}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1564002035, "creation_date": 1564002035, "answer_id": 57191179, "question_id": 57191124, "link": "https://stackoverflow.com/questions/57191124/how-come-the-first-version-of-my-function-returns-a-different-value-from-the-sec/57191179#57191179", "title": "How come the first version of my function returns a different value from the second version of my function?", "body": "<p>In Python (and many other programming languages) <strong>strings are <em>immutable</em></strong>. That means that you can not change the content of a string, you can only create a new string that is a modified copy of the original one.</p>\n\n<p>This thus means that <code>address.replace('.','[.]')</code> does <em>not</em> change the <code>address</code> string, it creates a <em>new</em> string that is returned by that method. But in your first function, you ignore that result. This thus means that you simply return the original string.</p>\n\n<p>By using <code>return address.replace('.','[.]')</code>, you thus return the result of that function call, a string where the <code>.</code> is replaced by <code>[.]</code> compared to the original string.</p>\n"}], "owner": {"reputation": 33, "user_id": 11798841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/170619cfd6b3611da917d5a0c5be8a42?s=128&d=identicon&r=PG&f=1", "display_name": "Taner", "link": "https://stackoverflow.com/users/11798841/taner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "closed_date": 1564002047, "answer_count": 1, "score": 1, "last_activity_date": 1564002035, "creation_date": 1564001796, "last_edit_date": 1564001848, "question_id": 57191124, "link": "https://stackoverflow.com/questions/57191124/how-come-the-first-version-of-my-function-returns-a-different-value-from-the-sec", "closed_reason": "Duplicate", "title": "How come the first version of my function returns a different value from the second version of my function?", "body": "<p>I dont understand why the second version works. With the first paragraph of code the output is <code>\"1.1.1.1\"</code>, with the second paragraph of code the output is <code>1[.]1[.]1[.]1</code>, How come this is so? why doesnt the first paragraph print out the same thing as the second one?</p>\n\n<p>ive tried everything</p>\n\n<pre><code>class Solution:\n    def defangIPaddr(self, address: str) -&gt; str:\n        '''\n        takes in a str variable called address\n        returns a string\n        '''\n        address.replace('.','[.]')\n        return address\n\nclass Solution:\n    def defangIPaddr(self, address: str) -&gt; str:\n        '''\n        takes in a str variable called address\n        returns a string\n        '''\n        return address.replace('.','[.]')\n</code></pre>\n\n<p>I expect the output to be <code>1[.]1[.]1[.]1</code> in the first version of the function of code.</p>\n"}, {"tags": ["python", "web-scraping"], "comments": [{"owner": {"reputation": 1198, "user_id": 10643988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mg2mD.jpg?s=128&g=1", "display_name": "Bill M.", "link": "https://stackoverflow.com/users/10643988/bill-m"}, "edited": false, "score": 0, "creation_date": 1564083836, "post_id": 57191112, "comment_id": 100924737, "body": "You mean &quot;scrape&quot;?  Because &quot;scrap&quot; implies that you want to get rid of them."}, {"owner": {"reputation": 129, "user_id": 11627616, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Nzv6Rl_iY70/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcrX5WdNRwzS2rIpLYk9rfLXWz2Hg/mo/photo.jpg?sz=128", "display_name": "Mahmoud Hossam", "link": "https://stackoverflow.com/users/11627616/mahmoud-hossam"}, "reply_to_user": {"reputation": 1198, "user_id": 10643988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mg2mD.jpg?s=128&g=1", "display_name": "Bill M.", "link": "https://stackoverflow.com/users/10643988/bill-m"}, "edited": false, "score": 0, "creation_date": 1564142579, "post_id": 57191112, "comment_id": 100943562, "body": "Sorry i didn&#39;t know"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 11627616, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Nzv6Rl_iY70/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcrX5WdNRwzS2rIpLYk9rfLXWz2Hg/mo/photo.jpg?sz=128", "display_name": "Mahmoud Hossam", "link": "https://stackoverflow.com/users/11627616/mahmoud-hossam"}, "edited": false, "score": 1, "creation_date": 1564002733, "post_id": 57191266, "comment_id": 100892227, "body": "If you runned the code and printed the links, you will find that not all the images are found+ i noticed that the src of the head image (print imgs and imgs2 to understand) is empty +when i printed the page code and searched for the imgs in the code itself, most of  the images tags are not found"}, {"owner": {"reputation": 161, "user_id": 11821007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dSN4e.jpg?s=128&g=1", "display_name": "Raffa", "link": "https://stackoverflow.com/users/11821007/raffa"}, "reply_to_user": {"reputation": 129, "user_id": 11627616, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Nzv6Rl_iY70/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcrX5WdNRwzS2rIpLYk9rfLXWz2Hg/mo/photo.jpg?sz=128", "display_name": "Mahmoud Hossam", "link": "https://stackoverflow.com/users/11627616/mahmoud-hossam"}, "edited": false, "score": 1, "creation_date": 1564003913, "post_id": 57191266, "comment_id": 100892610, "body": "Please view the images info in the browser or view the page source and you will notice that 5 images reported but only two with absolute real path while the other three are dynamically introduced to the browser from an ASP script with no real path."}, {"owner": {"reputation": 129, "user_id": 11627616, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Nzv6Rl_iY70/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcrX5WdNRwzS2rIpLYk9rfLXWz2Hg/mo/photo.jpg?sz=128", "display_name": "Mahmoud Hossam", "link": "https://stackoverflow.com/users/11627616/mahmoud-hossam"}, "edited": false, "score": 1, "creation_date": 1564044819, "post_id": 57191266, "comment_id": 100904356, "body": "I putted the params in payload and added the headers, but didn&#39;t work,when i changed it with my browser one: It worked ,Now how to generate this cookie(read question Edit)"}], "tags": [], "owner": {"reputation": 161, "user_id": 11821007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dSN4e.jpg?s=128&g=1", "display_name": "Raffa", "link": "https://stackoverflow.com/users/11821007/raffa"}, "is_accepted": false, "score": 3, "last_activity_date": 1564017866, "last_edit_date": 1564017866, "creation_date": 1564002402, "answer_id": 57191266, "question_id": 57191112, "link": "https://stackoverflow.com/questions/57191112/cant-get-all-images-from-web-page/57191266#57191266", "title": "Can&#39;t get all images from web page", "body": "<p>That is because in your code you only find images inside the table tag:</p>\n\n<pre><code>obj=obj.find('table')\n</code></pre>\n\n<p>which are 2 only.</p>\n\n<p>Try searching for other images in the page as well:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as bs\nurl='https://ahara.kar.nic.in/FCS_report/ViewRC/dup_rc_view.aspx?rc_no={};'\n#var=input(\"Enter the variable to Bring Photos links:\")\nvar='240100160336'\nurl=url.format(var)\nheaders={'Accept':'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3','Cookie':'ASP.NET_SessionId=v4kd535hn3d43z0x4ttgzqit','User-Agent':'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.142 Safari/537.36'}\nres=requests.get(url,headers=headers)\nobj=bs(res.text,'html.parser')\n\n# Search for images inside tables\nobjTable=obj.find('table')\nimgs=objTable.find_all('img')\n\n# Search for other images in the page\nimgs2=obj.find_all('img')\n\nprint(len(imgs) + len(imgs2))\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The URL provided in your code is not the same as the one you want to scrape.</p>\n\n<p>The URL in your code is:</p>\n\n<pre><code>https://ahara.kar.nic.in/FCS_report/ViewRC/dup_rc_view.aspx?rc_no={};\n</code></pre>\n\n<p>The method you used to modify the URL and append a variable to it is not helping. It prints:</p>\n\n<pre><code>https://ahara.kar.nic.in/FCS_report/ViewRC/dup_rc_view.aspx?rc_no=240100160336;\n</code></pre>\n\n<p>Please look into this link for help with <a href=\"https://docs.python.org/3/library/urllib.parse.html\" rel=\"nofollow noreferrer\">Parse URLs into components</a></p>\n\n<p>The URL you linked in your post is:</p>\n\n<pre><code>https://ahara.kar.nic.in/FCS_report/ViewRC/dup_rc_view.aspx?rc_no=240100160336\n</code></pre>\n\n<p>I modified your code a bit and added the correct URL:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as bs\nurl='https://ahara.kar.nic.in/FCS_report/ViewRC/dup_rc_view.aspx?rc_no=240100160336'\n\nres=requests.get(url)\nobj=bs(res.text, 'html.parser')\n\n# Search for images in the page\nimgs=obj.find_all('img')\nimages = []\nfor img in imgs:\n    images.append(img.get('src'))\n\nprint(images)\n\nprint(len(images))\n</code></pre>\n\n<p>Please see if it works now.</p>\n"}], "owner": {"reputation": 129, "user_id": 11627616, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Nzv6Rl_iY70/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcrX5WdNRwzS2rIpLYk9rfLXWz2Hg/mo/photo.jpg?sz=128", "display_name": "Mahmoud Hossam", "link": "https://stackoverflow.com/users/11627616/mahmoud-hossam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1565870348, "creation_date": 1564001713, "last_edit_date": 1565870348, "question_id": 57191112, "link": "https://stackoverflow.com/questions/57191112/cant-get-all-images-from-web-page", "title": "Can&#39;t get all images from web page", "body": "<p>I want to Scrape all images links in this <a href=\"https://ahara.kar.nic.in/FCS_report/ViewRC/dup_rc_view.aspx?rc_no=240100160336\" rel=\"nofollow noreferrer\">Link</a>,I am using requests+Beautiful soup-python 3.7.\nMy problem is that the result is 3,while there are 6 images at the page.</p>\n\n<hr>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as bs\nurl='https://ahara.kar.nic.in/FCS_report/ViewRC/dup_rc_view.aspx'\n\nvar='240100160336'\npayload={'rc_no':var}\nheaders={'Accept':'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3','Cookie':'ASP.NET_SessionId=v4kd535hn3d43z0x4ttgzqit','User-Agent':'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.142 Safari/537.36'}\nres=requests.get(url,headers=headers,data=payload)\nobj=bs(res.text,'html.parser')\n#obj=obj.find('table')\nimgs=obj.find_all('img')\n\nprint(len(imgs))\n</code></pre>\n\n<p><strong>Edit:</strong> The server is using cookies to give me wanted pictures and the full html page ,so after adding cookies handling and add the correct url in my code it works as wanted !</p>\n"}, {"tags": ["python", "python-3.x", "pygame", "python-imaging-library"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 1, "creation_date": 1564001760, "post_id": 57191091, "comment_id": 100891890, "body": "How do you draw the image to the window? This is not enough code to answer your question. Please read <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 35, "user_id": 11200038, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Pp28OOdP1ew/AAAAAAAAAAI/AAAAAAAAAAc/hGx2L9-RTDU/photo.jpg?sz=128", "display_name": "Ethan Peck", "link": "https://stackoverflow.com/users/11200038/ethan-peck"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1564003171, "post_id": 57191091, "comment_id": 100892361, "body": "@Rabbid76 My apologies, I&#39;ve edited my post to show how I load the image now."}, {"owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "edited": false, "score": 0, "creation_date": 1564003771, "post_id": 57191091, "comment_id": 100892560, "body": "This is still not a minimal example. How are you updating <code>set_img</code>?"}, {"owner": {"reputation": 35, "user_id": 11200038, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Pp28OOdP1ew/AAAAAAAAAAI/AAAAAAAAAAc/hGx2L9-RTDU/photo.jpg?sz=128", "display_name": "Ethan Peck", "link": "https://stackoverflow.com/users/11200038/ethan-peck"}, "edited": false, "score": 0, "creation_date": 1564003850, "post_id": 57191091, "comment_id": 100892584, "body": "The image is directly modified by pillow (each pixel is changed), so essentially the only thing that remains the same after the image is updated is the name (mandelbrot.png)"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 1, "creation_date": 1564004077, "post_id": 57191091, "comment_id": 100892662, "body": "@EthanPeck Why do you not reload the image <code>set_image = pg.image.load(&#39;mandelbrot.png&#39;)</code>?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 1, "creation_date": 1564004970, "post_id": 57191091, "comment_id": 100892902, "body": "@EthanPeck Do you want to reload the image image in a function. You&#39;ve to use the <a href=\"https://docs.python.org/3/reference/simple_stmts.html?highlight=global#grammar-token-global-stmt\" rel=\"nofollow noreferrer\"><code>global</code> statement</a> to write to a variable in global namespace from a function. <code>global set_image</code>"}, {"owner": {"reputation": 35, "user_id": 11200038, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Pp28OOdP1ew/AAAAAAAAAAI/AAAAAAAAAAc/hGx2L9-RTDU/photo.jpg?sz=128", "display_name": "Ethan Peck", "link": "https://stackoverflow.com/users/11200038/ethan-peck"}, "edited": false, "score": 0, "creation_date": 1564064384, "post_id": 57191091, "comment_id": 100915545, "body": "I am trying to reload the image by calling <code>set_image = pg.image.load(&#39;mandelbrot.png&#39;)</code> again.  This is done within the same function."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1564074550, "post_id": 57191091, "comment_id": 100920701, "body": "@EthanPeck You&#39;ve to show more code. especially the part where the images  is (re)loaded"}, {"owner": {"reputation": 35, "user_id": 11200038, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Pp28OOdP1ew/AAAAAAAAAAI/AAAAAAAAAAc/hGx2L9-RTDU/photo.jpg?sz=128", "display_name": "Ethan Peck", "link": "https://stackoverflow.com/users/11200038/ethan-peck"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1564077969, "post_id": 57191091, "comment_id": 100922225, "body": "@Rabbid76 I have now included the majority of m pg_window function.  I omitted some unrelated code."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1564078626, "post_id": 57191091, "comment_id": 100922533, "body": "@EthanPeck The name of the image which is<code>blit</code> to the <code>window</code> is <code>set_img</code> rather than <code>set_image</code>."}], "answers": [{"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1564339797, "last_edit_date": 1564339797, "creation_date": 1564078775, "answer_id": 57208055, "question_id": 57191091, "link": "https://stackoverflow.com/questions/57191091/load-updated-image-using-pygame/57208055#57208055", "title": "Load Updated Image Using Pygame", "body": "<p>The name of the image which is <code>blit</code> to the window is <code>set_img</code> rather than <code>set_image</code>.<br>\nSo you've to set <code>set_img</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>while True:\n    window.fill(fill_color)\n\n    # [...]\n\n    for event in pg.event.get():\n\n        # [...]\n\n        if event.type == pg.MOUSEBUTTONDOWN:\n\n            # [...]\n\n            set_img = pg.image.load('mandelbrot.png') # &lt;--- set_img \n\n\n        window.fill(fill_color)\n        window.blit(set_img, (0, 0))\n        pg.display.flip()\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 11200038, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Pp28OOdP1ew/AAAAAAAAAAI/AAAAAAAAAAc/hGx2L9-RTDU/photo.jpg?sz=128", "display_name": "Ethan Peck", "link": "https://stackoverflow.com/users/11200038/ethan-peck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 57208055, "answer_count": 1, "score": 2, "last_activity_date": 1568179355, "creation_date": 1564001629, "last_edit_date": 1568179355, "question_id": 57191091, "link": "https://stackoverflow.com/questions/57191091/load-updated-image-using-pygame", "title": "Load Updated Image Using Pygame", "body": "<p>I am making a basic Mandelbrot zoom program using pygame that uses pillow to generate images each time a user zooms in.  When this image is updated the pygame window simply loads the original image and not the updated one.</p>\n\n<p>My current solution is to kill the pygame window with each zoom and reinitialize it which adds a fair amount of time to each zoom.  Here is my current code</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def pg_window(width, height):\n    pg.init()\n\n    fill_color = 255, 255, 255\n    window = pg.display.set_mode((width, height))\n\n    global set_image\n    set_img = pg.image.load('mandelbrot.png')\n    # The original load of the image\n    zoom_x = int(width * .15)\n    zoom_y = int(height * .15)\n\n    while True:\n        window.fill(fill_color)\n\n        ... extra code ommitted ...\n\n        for event in pg.event.get():\n            if event.type == pg.QUIT:\n                sys.exit()\n            if event.type == pg.MOUSEBUTTONDOWN:\n                zoom(*zoom_rect.center, width, height, zoom_x, zoom_y)\n                # The zoom function call modifies the image directly.\n                set_image = pg.image.load('mandelbrot.png')\n                # changing the set_image variable just loads the original image, not the updated one\n                # My current solution involves calling pg.quit() here\n                # and recalling the pg_window function to reinitialize\n\n        window.fill(fill_color)\n        window.blit(set_img, (0, 0))\n        pg.display.flip()\n</code></pre>\n\n<p>Is there anyway to load an updated image without resetting the window?</p>\n"}, {"tags": ["python", "optimization", "surface"], "comments": [{"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1564001967, "post_id": 57191073, "comment_id": 100891968, "body": "Like this: <a href=\"https://en.wikipedia.org/wiki/Polynomial_regression\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Polynomial_regression</a>?"}, {"owner": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "edited": false, "score": 0, "creation_date": 1564008325, "post_id": 57191073, "comment_id": 100893774, "body": "If you create a matrix A whose columns you fill with y^3, y^2, y, x, 1 you can use the linear regression model of <code>sklearn</code> to do the main work. Maybe this helps: <a href=\"https://scikit-learn.org/stable/auto_examples/linear_model/plot_ols.html\" rel=\"nofollow noreferrer\">scikit-learn.org/stable/auto_examples/linear_model/&hellip;</a> to start."}], "owner": {"reputation": 21, "user_id": 11777557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a78831414ad2745922f089c2aca41e66?s=128&d=identicon&r=PG&f=1", "display_name": "Hunter.Spivey", "link": "https://stackoverflow.com/users/11777557/hunter-spivey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564001539, "creation_date": 1564001539, "question_id": 57191073, "link": "https://stackoverflow.com/questions/57191073/how-can-i-find-the-equation-for-a-best-fit-surface-given-the-form-of-the-surfa", "title": "How can I find the equation for a &quot;best-fit&quot; surface given the form of the surface equation?", "body": "<p>I have a set of data (x,y,z) in which z is a function of both x and y. I also know that the function is of the form z = (C1)y^3 + (C2)y^2 + (C3)y + (C4)x + (C5). How can I optimize this equation to find values for C1 through C5 so that the equation models the data set the best it can?</p>\n"}, {"tags": ["python", "numpy", "normalize", "mfcc"], "comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1564001614, "post_id": 57191058, "comment_id": 100891835, "body": "This might be a perfect application for <a href=\"https://docs.scipy.org/doc/numpy/reference/maskedarray.html\" rel=\"nofollow noreferrer\">masked arrays</a>."}, {"owner": {"reputation": 27886, "user_id": 636626, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b18fc48caab5bf7c3e2a15292972f05b?s=128&d=identicon&r=PG", "display_name": "Nils Werner", "link": "https://stackoverflow.com/users/636626/nils-werner"}, "edited": false, "score": 0, "creation_date": 1564001848, "post_id": 57191058, "comment_id": 100891914, "body": "Can you post intermediate values too please?"}, {"owner": {"reputation": 304, "user_id": 5286467, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bdc65dc2370eebeba1f1aa52a1db688a?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo G.R.", "link": "https://stackoverflow.com/users/5286467/eduardo-g-r"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1564003052, "post_id": 57191058, "comment_id": 100892328, "body": "@Linuxios I did read about the use of masked but I&#39;m also trying to find the right way to do it with that."}, {"owner": {"reputation": 304, "user_id": 5286467, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bdc65dc2370eebeba1f1aa52a1db688a?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo G.R.", "link": "https://stackoverflow.com/users/5286467/eduardo-g-r"}, "reply_to_user": {"reputation": 27886, "user_id": 636626, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b18fc48caab5bf7c3e2a15292972f05b?s=128&d=identicon&r=PG", "display_name": "Nils Werner", "link": "https://stackoverflow.com/users/636626/nils-werner"}, "edited": false, "score": 0, "creation_date": 1564003057, "post_id": 57191058, "comment_id": 100892331, "body": "@NilsWerner Sure, I added some more examples."}, {"owner": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "edited": false, "score": 1, "creation_date": 1564003152, "post_id": 57191058, "comment_id": 100892355, "body": "All your values are almost the same, no wonder <code>stddev</code> is zero. Does the same thing happen with random 3D tensor?"}, {"owner": {"reputation": 304, "user_id": 5286467, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bdc65dc2370eebeba1f1aa52a1db688a?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo G.R.", "link": "https://stackoverflow.com/users/5286467/eduardo-g-r"}, "reply_to_user": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "edited": false, "score": 0, "creation_date": 1564004274, "post_id": 57191058, "comment_id": 100892717, "body": "@SzymonMaszke Hi, well in those examples data is very similar, yes, but is not the case for all the elements (I will update it now). And yes, with tensors that has no NaN padding values it works fine."}, {"owner": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "edited": false, "score": 0, "creation_date": 1564005020, "post_id": 57191058, "comment_id": 100892914, "body": "@EduardoG.R. All your values in normalized array are <code>np.inf</code>? And are you sure it happens after the mean is subtracted?"}, {"owner": {"reputation": 304, "user_id": 5286467, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bdc65dc2370eebeba1f1aa52a1db688a?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo G.R.", "link": "https://stackoverflow.com/users/5286467/eduardo-g-r"}, "reply_to_user": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "edited": false, "score": 0, "creation_date": 1564006694, "post_id": 57191058, "comment_id": 100893362, "body": "@SzymonMaszke Yes. In some previous attemps I didn&#39;t get the -inf values but still the result was not the expected. I think there should be an easy way to normalize a matrix with more than 2 dimensions omitting all elements introduced by padding (in this case with a value of np.nan)"}, {"owner": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "edited": false, "score": 1, "creation_date": 1564007212, "post_id": 57191058, "comment_id": 100893512, "body": "Most probably it&#39;s due to values being very close to each other in general and <code>mean - element</code> going towards numerical precision. For <code>stddev</code> you further divide that value by number of elements and take <code>sqrt</code> from that, which falls below that threshold. You should compare calculated mean to the values and see, how much is left after subtraction. And if the <code>mean</code> is close enough to zero, just input zero. What&#39;s this data anyway, looks pretty strange"}, {"owner": {"reputation": 304, "user_id": 5286467, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bdc65dc2370eebeba1f1aa52a1db688a?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo G.R.", "link": "https://stackoverflow.com/users/5286467/eduardo-g-r"}, "reply_to_user": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "edited": false, "score": 1, "creation_date": 1564007569, "post_id": 57191058, "comment_id": 100893607, "body": "@SzymonMaszke this are MFCC coefficients from audio samples. Padded was used because all audio files are of varying durations. There are many different theories on how to normalize MFCC and many even tell that normalizing MFCC, sometimes, is not really required. But I&#39;d like to do my own experiments and see how the same mode architecture performs with standard and normalized data, training for the same amount of epochs."}, {"owner": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "edited": false, "score": 0, "creation_date": 1564007914, "post_id": 57191058, "comment_id": 100893695, "body": "If tips above didn&#39;t help, you would be better off providing us your data sample generating this behavior so we could investigate on our own. You could post a link to download your saved tensor in <code>.npz</code> format or pickle of some sort."}, {"owner": {"reputation": 304, "user_id": 5286467, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bdc65dc2370eebeba1f1aa52a1db688a?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo G.R.", "link": "https://stackoverflow.com/users/5286467/eduardo-g-r"}, "reply_to_user": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "edited": false, "score": 1, "creation_date": 1564008576, "post_id": 57191058, "comment_id": 100893821, "body": "@SzymonMaszke Sure! let me get back home and I&#39;ll prepare a notebook and some saved data, thanks for your help!"}, {"owner": {"reputation": 304, "user_id": 5286467, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bdc65dc2370eebeba1f1aa52a1db688a?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo G.R.", "link": "https://stackoverflow.com/users/5286467/eduardo-g-r"}, "reply_to_user": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "edited": false, "score": 1, "creation_date": 1564080887, "post_id": 57191058, "comment_id": 100923506, "body": "@SzymonMaszke hi again, I just updated the post with a notebook and pickle data if you like to experiment with it, thanks!"}, {"owner": {"reputation": 15138, "user_id": 10886420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOSxh.png?s=128&g=1", "display_name": "Szymon Maszke", "link": "https://stackoverflow.com/users/10886420/szymon-maszke"}, "reply_to_user": {"reputation": 304, "user_id": 5286467, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bdc65dc2370eebeba1f1aa52a1db688a?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo G.R.", "link": "https://stackoverflow.com/users/5286467/eduardo-g-r"}, "edited": false, "score": 0, "creation_date": 1564082858, "post_id": 57191058, "comment_id": 100924348, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/197007/discussion-between-szymon-maszke-and-eduardo-g-r\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 5286467, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bdc65dc2370eebeba1f1aa52a1db688a?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo G.R.", "link": "https://stackoverflow.com/users/5286467/eduardo-g-r"}, "edited": false, "score": 1, "creation_date": 1564174363, "post_id": 57192667, "comment_id": 100957898, "body": "This seems to work @Soslan! Let me to some checkings and I&#39;ll come back to confirm. Thanks!"}, {"owner": {"reputation": 143, "user_id": 11786075, "user_type": "registered", "profile_image": "https://graph.facebook.com/10218862659614220/picture?type=large", "display_name": "Soslan Tabuev", "link": "https://stackoverflow.com/users/11786075/soslan-tabuev"}, "reply_to_user": {"reputation": 304, "user_id": 5286467, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bdc65dc2370eebeba1f1aa52a1db688a?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo G.R.", "link": "https://stackoverflow.com/users/5286467/eduardo-g-r"}, "edited": false, "score": 0, "creation_date": 1564346561, "post_id": 57192667, "comment_id": 100990213, "body": "Does the solution works for you, or there is another problem?"}], "tags": [], "owner": {"reputation": 143, "user_id": 11786075, "user_type": "registered", "profile_image": "https://graph.facebook.com/10218862659614220/picture?type=large", "display_name": "Soslan Tabuev", "link": "https://stackoverflow.com/users/11786075/soslan-tabuev"}, "is_accepted": true, "score": 2, "last_activity_date": 1564013008, "creation_date": 1564013008, "answer_id": 57192667, "question_id": 57191058, "link": "https://stackoverflow.com/questions/57191058/standarize-a-3d-numpy-array-that-has-been-padded-with-np-nan/57192667#57192667", "title": "Standarize a 3D NumPy array that has been padded with np.nan", "body": "<p>Please try this solution:</p>\n\n<pre><code>X_norm = np.where(np.isnan(X_nan), np.nan, X_nan - mean)\nX_norm = np.where(X_norm == 0, 0, X_norm/std)\n</code></pre>\n\n<p>also give warning, but looks like work correct.</p>\n\n<p>std can be 0 only when all elements are the same, but in this case the mean is equal to elements and after subtraction you obtain all zeros. So second np.where fix this situation.</p>\n"}], "owner": {"reputation": 304, "user_id": 5286467, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bdc65dc2370eebeba1f1aa52a1db688a?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo G.R.", "link": "https://stackoverflow.com/users/5286467/eduardo-g-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 57192667, "answer_count": 1, "score": 3, "last_activity_date": 1564087062, "creation_date": 1564001468, "last_edit_date": 1564087062, "question_id": 57191058, "link": "https://stackoverflow.com/questions/57191058/standarize-a-3d-numpy-array-that-has-been-padded-with-np-nan", "title": "Standarize a 3D NumPy array that has been padded with np.nan", "body": "<p>I have a 3D matrix with a shape like (100, 40, 170).</p>\n\n<p>This matrix has been padded to reach the max length of 170 by filling up with np.nan (NaN).</p>\n\n<p>The values in the matrix represent MFCC coefficients from audio data extracted from the <a href=\"https://urbansounddataset.weebly.com/urbansound8k.html\" rel=\"nofollow noreferrer\">UrbanSound8K dataset</a>, using LibRosa (Python).</p>\n\n<p>(Source notebook and data are shared, check the end of the post)</p>\n\n<p>I need to normalize this matrix by the axis=2, by:</p>\n\n<ol>\n<li>Compute the mean over the 3th axis, ignoring elements equal to np.nan</li>\n<li>Compute std dev over the 3th axis, ignoring elements equal to np.nan</li>\n<li>Subtract the mean to every element that is not equal to np.nan</li>\n<li>Divide by the std dev every element that is not equal to np.nan</li>\n</ol>\n\n<p>I have tried many different ways and did not worked. Other posts point to the use of sklearn but the normalization tools from that library are not friendly with 3D matrices... so, by now, this is my best approach:</p>\n\n<pre><code># Compute mean and std dev matrices (omitting NaN and keeping shapes)\nmean = np.nanmean(X_nan, axis=2, keepdims=True)\nstd = np.nanstd(X_nan, axis=2, keepdims=True)\n</code></pre>\n\n<p>But then when I subtract and divide I get errors:</p>\n\n<pre><code>X_norm -= mean\nX_norm /= std\n</code></pre>\n\n<p>The Warning message says:</p>\n\n<pre><code>RuntimeWarning: divide by zero encountered in true_divide\n</code></pre>\n\n<p>And when I check just the first elements of the normalized and original matrices, I see:</p>\n\n<pre><code># Original\narray([[[-58.95327, -58.95327,        -58.95327,       ...,          \n                     nan,             nan,            nan],\n\n# Normalized\narray([[[-inf,       -inf,            -inf,            ...,\n                     inf,             inf,             inf],\n</code></pre>\n\n<p>Note that the <strong>-inf</strong> values where introduced when subtracting the mean, not for dividing.</p>\n\n<p>Can you recommend me a way to compute both metrics and do the subtraction and division with NumPy omitting the padded values?</p>\n\n<p>Thank you very much!</p>\n\n<p>The data was generated with this notebook (note that repo is under development!): <a href=\"https://github.com/GorillaBus/urban-audio-classifier/blob/master/2-pre-processing.ipynb\" rel=\"nofollow noreferrer\">Urban sound classification with CNN</a></p>\n\n<p>I have uploaded the data (pickled X and y): <a href=\"https://transfernow.net/ddl/us8k-mfcc\" rel=\"nofollow noreferrer\">MFCC Coeffs X and Y</a></p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 2, "creation_date": 1564001877, "post_id": 57191046, "comment_id": 100891932, "body": "What do you mean by <code>join</code>, it&#39;s not so clear when both indices overlap."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1564003897, "post_id": 57191046, "comment_id": 100892602, "body": "Anyway, I think this is relevant: <a href=\"https://stackoverflow.com/questions/1373164/how-do-i-create-a-variable-number-of-variables\" title=\"how do i create a variable number of variables\">stackoverflow.com/questions/1373164/&hellip;</a> There are too many dicts and lists here. Why have 8 dicts and 2 lists when this can be organized with 2 dicts, or better yet, even just one with a tuple as the key <code>(&#39;m&#39;, 1)</code>"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1564004909, "post_id": 57191046, "comment_id": 100892878, "body": "It&#39;s likely attracting downvotes because though you&#39;ve provided sample data, there&#39;s no real indication of what the expected output should be and how it should be stored. You&#39;ve had 3 solutions that all went in totally different directions, and yet none of them seem to have solved your issue given the lack of a green check or even an upvote indicating it was helpful. In the end, this lack of clarity only wastes your time and the time spent by others trying to solve your problem. The downvotes likely act as a signal to others that it&#39;s not worth the time to answer."}, {"owner": {"reputation": 2565, "user_id": 7340948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c4f727ef85a90ec4f5ae954f8718017?s=128&d=identicon&r=PG&f=1", "display_name": "CJR", "link": "https://stackoverflow.com/users/7340948/cjr"}, "edited": false, "score": 0, "creation_date": 1564005607, "post_id": 57191046, "comment_id": 100893067, "body": "If you&#39;re scraping this data into these data structures you should probably fix the bad decisions that have taken you to this point. I can&#39;t imagine how exactly you ended up with this problem."}, {"owner": {"reputation": 49, "user_id": 10561880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/enH7Q.jpg?s=128&g=1", "display_name": "gosci", "link": "https://stackoverflow.com/users/10561880/gosci"}, "edited": false, "score": 0, "creation_date": 1564057129, "post_id": 57191046, "comment_id": 100911126, "body": "Your comment only reflects your blatant lack of experience in Data Wrangling. But sure, I can explain one of many reasons why you can end up having a list of dicts with Data Frames like I did. In order to save and read Data Frames to json files, Pandas only has the DataFrame.to_json and pd.read_json functions that work for single Data Frames. So in order to avoid having hundreds of separated json files when you are scraping lots of sites simultanously, I figured a shortcut to put all my DF&#39;s with a key value in a dict each and succeded to have them in one single json file."}, {"owner": {"reputation": 49, "user_id": 10561880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/enH7Q.jpg?s=128&g=1", "display_name": "gosci", "link": "https://stackoverflow.com/users/10561880/gosci"}, "edited": false, "score": 0, "creation_date": 1564065415, "post_id": 57191046, "comment_id": 100916184, "body": "And by the way, the above data is a representation of my real data, so that anyone can copy paste it and have a model of it in the console, it is NOT the real data. The answer given by calestini does exactly what I was looking for and my scraping project is alive and kicking. Sometimes I wonder if people participate in this forum to really help the community or just for the sake of trashing on the others."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 10561880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/enH7Q.jpg?s=128&g=1", "display_name": "gosci", "link": "https://stackoverflow.com/users/10561880/gosci"}, "edited": false, "score": 1, "creation_date": 1564008695, "post_id": 57191227, "comment_id": 100893840, "body": "Works like a charm, thank you. In fact, I edited the question because I had put indexes instead of column names. Thanks."}], "tags": [], "owner": {"reputation": 3009, "user_id": 5833590, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153232467236962/picture?type=large", "display_name": "calestini", "link": "https://stackoverflow.com/users/5833590/calestini"}, "is_accepted": true, "score": 2, "last_activity_date": 1564002937, "last_edit_date": 1564002937, "creation_date": 1564002252, "answer_id": 57191227, "question_id": 57191046, "link": "https://stackoverflow.com/questions/57191046/join-dataframes-which-are-values-in-dicts-contained-in-different-lists-of-dicts/57191227#57191227", "title": "Join DataFrames which are values in Dicts contained in different Lists of Dicts", "body": "<p>You can loop and compare (assuming performance is not an issue). In this case I am creating the result in a <code>list</code> of <code>dict</code>, so you will have 4 final <code>dict</code>, each with the joined <code>DataFrames</code>.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>results = []\n\nfor d1 in l1:\n    l1 = list(d1.keys())[0]\n    for d2 in l2:\n        if  l1 == list(d2.keys())[0]:\n            results.append({list(d1.keys())[0]: d1[l1].join(d2[l1], lsuffix='_suffix') })\n\nresults[0]['m']\nOut[44]: \n   0_suffix  1_suffix  2_suffix  ...         1         2         3\n0 -0.916366  0.340707  0.530867  ... -0.495796 -0.982780  2.354565\n1 -0.154919 -0.899602 -0.595742  ...  0.425826  1.220378  1.169143\n2  0.187701 -0.933682 -0.035998  ... -0.069469 -1.149548  1.558640\n3  0.551400 -0.059035  0.913508  ...  2.001956 -0.130476 -0.896371\n</code></pre>\n\n<p>If the final output is the original <strong>left</strong> dataframe from <code>l1</code>, then just join to the initial obj:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for d1 in l1:\n    l1 = list(d1.keys())[0]\n    for d2 in l2:\n        if  l1 == list(d2.keys())[0]:\n            d1[l1] = d1[l1].join(d2[l1], lsuffix='_suffix')\n\nd1\nOut[46]: \n{'b':    0_suffix  1_suffix  2_suffix  ...         1         2         3\n 0  0.369090  1.001815  0.576901  ... -0.886816  0.266766  1.008030\n 1  0.585813 -0.725805  0.587021  ... -0.047143  1.319553  0.137310\n 2  0.305254  0.187430  0.567565  ...  0.927931  0.923679 -0.932878\n 3 -1.648351 -0.605600 -1.614015  ... -0.100864 -0.750169  1.314675\n\n</code></pre>\n\n<p>If you meant a concatenation / append:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for d1 in l1:\n    l1 = list(d1.keys())[0]\n    for d2 in l2:\n        if  l1 == list(d2.keys())[0]:\n            d1[l1] = pd.concat([d1[l1], d2[l1]],axis=0, sort=False)\n\nd1['b']\nOut[50]: \n          0         1         2         3\n0  0.394191 -1.049085 -0.105597  1.208647\n1 -0.455081  1.093636  0.469112 -0.856876\n2  0.645717 -2.101677  0.086884 -1.038289\n3 -0.245927  0.756143  0.755207  1.249809\n0  0.518625 -0.953318 -0.069464  0.670162\n1  1.495597 -1.598482 -0.615926 -1.166068\n2 -0.534093  0.786945 -0.546304 -0.322346\n3 -0.635425 -2.574919  0.292062  0.856733\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 10561880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/enH7Q.jpg?s=128&g=1", "display_name": "gosci", "link": "https://stackoverflow.com/users/10561880/gosci"}, "edited": false, "score": 1, "creation_date": 1564002541, "post_id": 57191269, "comment_id": 100892162, "body": "I need the code to search for the key by itself, not doing it manually."}], "tags": [], "owner": {"reputation": 2271, "user_id": 8117999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eq8ZW.jpg?s=128&g=1", "display_name": "M_S_N", "link": "https://stackoverflow.com/users/8117999/m-s-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1564002571, "last_edit_date": 1564002571, "creation_date": 1564002422, "answer_id": 57191269, "question_id": 57191046, "link": "https://stackoverflow.com/questions/57191046/join-dataframes-which-are-values-in-dicts-contained-in-different-lists-of-dicts/57191269#57191269", "title": "Join DataFrames which are values in Dicts contained in different Lists of Dicts", "body": "<p>Here is simplest approach you can use</p>\n\n<pre><code>d1['m'].merge(d2['h'], how='outer')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>       0            1           2           3\n0   -0.846978   -0.103178   0.764094    -1.116666\n1   1.845743    -2.232665   1.078197    1.437294\n2   -0.244121   -0.952903   0.625375    0.907227\n3   1.217737    -0.684253   -1.661790   -0.071234\n4   1.591530    -0.098318   -0.015063   -0.210989\n5   0.382137    1.139896    -0.775984   1.022370\n6   0.182091    -1.626770   1.267648    0.987247\n7   -1.231164   0.129947    1.773350    -0.880221\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10561880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/enH7Q.jpg?s=128&g=1", "display_name": "gosci", "link": "https://stackoverflow.com/users/10561880/gosci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 57191227, "answer_count": 2, "score": -2, "last_activity_date": 1564008514, "creation_date": 1564001413, "last_edit_date": 1564008514, "question_id": 57191046, "link": "https://stackoverflow.com/questions/57191046/join-dataframes-which-are-values-in-dicts-contained-in-different-lists-of-dicts", "title": "Join DataFrames which are values in Dicts contained in different Lists of Dicts", "body": "<p>I have 2 lists of several one element dictionaries each. The dictionaries have a string as key and a DataFrame as value. The keys are not sorted alphabetically within the lists. My goal is to perform pandas join function on the DataFrames in each list corresponding to each dictionary key.</p>\n\n<p>Schematically:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\na = pd.DataFrame(np.random.randn(4, 4), columns=['h', 'i', 'j', 'k'])\nb = pd.DataFrame(np.random.randn(4, 4), columns=['h', 'i', 'j', 'k'])\nc = pd.DataFrame(np.random.randn(4, 4), columns=['h', 'i', 'j', 'k'])\nd = pd.DataFrame(np.random.randn(4, 4), columns=['h', 'i', 'j', 'k'])\ne = pd.DataFrame(np.random.randn(4, 4), columns=['n', 'o', 'p', 'q'])\nf = pd.DataFrame(np.random.randn(4, 4), columns=['n', 'o', 'p', 'q'])\ng = pd.DataFrame(np.random.randn(4, 4), columns=['n', 'o', 'p', 'q'])\nh = pd.DataFrame(np.random.randn(4, 4), columns=['n', 'o', 'p', 'q'])\n\nd1 = {'m':a}\nd2 = {'h':b}\nd3 = {'z':c}\nd4 = {'b':d}\nd5 = {'z':e}\nd6 = {'h':f}\nd7 = {'m':g}\nd8 = {'b':h}\n\nl1 = [d1, d2, d3, d4]\nl2 = [d5, d6, d7, d8]\n</code></pre>\n\n<p>My goal is to join the DataFrames which have a corresponding key on each list, through a loop, in order to have the code matching the keys, ideally:</p>\n\n<pre><code>d1.join(d7)\nd2.join(d6)\nd3.join(d5)\nd4.join(d8)\n</code></pre>\n\n<p>I cannot find a way to figure out the code to do this. Thanks for any help in advance!</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564004345, "post_id": 57191042, "comment_id": 100892736, "body": "Have you tried using the <code>winfo_containing</code> method to figure out which widget is under the cursor, and then scrolling that window? That&#39;s how the default bindings work."}, {"owner": {"reputation": 55, "user_id": 11585130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7729c8234fe89113d96cf45f8dba54?s=128&d=identicon&r=PG&f=1", "display_name": "Tristen Harr", "link": "https://stackoverflow.com/users/11585130/tristen-harr"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564005096, "post_id": 57191042, "comment_id": 100892934, "body": "That&#39;s essentially what the &quot;Enter&quot; and &quot;Leave&quot; bindings do. Whenever the mouse passes over the given frame, it calls the  method bound to enter, and when it leaves it calls the method bound to leave. I&#39;m asking for a way to scroll one particular frame by default. It already scrolls the widgets under the cursor, I want it to scroll another widget when it leaves even if it is not on the &quot;default&quot; widget."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564005512, "post_id": 57191042, "comment_id": 100893039, "body": "Can you please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? It&#39;s hard to understand what you&#39;re asking. I don&#39;t see the reason why you&#39;re not just setting the binding once on the whole window rather than changing the bindings to the canvas on enter and leave events."}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 11585130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7729c8234fe89113d96cf45f8dba54?s=128&d=identicon&r=PG&f=1", "display_name": "Tristen Harr", "link": "https://stackoverflow.com/users/11585130/tristen-harr"}, "is_accepted": false, "score": 0, "last_activity_date": 1564003122, "creation_date": 1564003122, "answer_id": 57191392, "question_id": 57191042, "link": "https://stackoverflow.com/questions/57191042/tkinter-binding-multiple-scrollbars-to-mousewheel/57191392#57191392", "title": "Tkinter Binding Multiple Scrollbar&#39;s to MouseWheel", "body": "<p>I just found a solution involving handing the function and the canvas back to the Master. </p>\n\n<pre><code>class Master(object)\n\n    def __init__(self, *args, **kwargs):\n        #Things and stuff\n        self.default_scroll = None\n</code></pre>\n\n<p>Then by setting default_scroll to hold the default parameters</p>\n\n<pre><code>def setup_view_window(self):\n    if self.default:\n        self.canvas.bind_all('&lt;MouseWheel&gt;', self.on_mousewheel)\n\n        # HERE\n        self.dynamic.stuff.MASTER.default_scroll = [self.canvas, self.on_mousewheel]\n\n    else:\n        self.view_window.bind('&lt;Enter&gt;', self.focus_in)\n        self.view_window.bind('&lt;Leave&gt;', self.focus_out)\n</code></pre>\n\n<p>You can then access it in the focus_out.</p>\n\n<pre><code>def focus_out(self, *args):\n    self.canvas.unbind_all('&lt;MouseWheel&gt;', self.on_mousewheel)\n\n    # HERE\n    if self.dynamic.stuff.MASTER.default_scroll is not None:\n        self.dynamic.stuff.MASTER.default_scroll[0].bind_all('&lt;MouseWheel&gt;', self.dynamic.stuff.MASTER.default_scroll[1])\n</code></pre>\n\n<p>Although, I would be interested to know if anyone knows of a way to access it in a more concise way, perhaps something in tkinter that lets you see all bound events in the entire application?</p>\n"}, {"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": false, "score": 0, "last_activity_date": 1564007200, "creation_date": 1564007200, "answer_id": 57192032, "question_id": 57191042, "link": "https://stackoverflow.com/questions/57191042/tkinter-binding-multiple-scrollbars-to-mousewheel/57192032#57192032", "title": "Tkinter Binding Multiple Scrollbar&#39;s to MouseWheel", "body": "<p>Arguably the simplest solution is to set a variable to be the widget you want to scroll, and then set a global binding to scroll that widget.</p>\n\n<p>For example, your app would initialize the binding like this exactly once:</p>\n\n<pre><code>self.root.bind_all(\"&lt;MouseWheel&gt;\", self.scroller)\n</code></pre>\n\n<p>Then, in scroller you scroll the default window:</p>\n\n<pre><code>def scroller(self, event):\n    self.default_window.yview(...)\n</code></pre>\n\n<p>You can also add the binding to the canvases themselves instead of calling <code>bind_all</code> if you prefer. The basic concept still works without having to adjust the bindings on enter/leave events.</p>\n"}], "owner": {"reputation": 55, "user_id": 11585130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7729c8234fe89113d96cf45f8dba54?s=128&d=identicon&r=PG&f=1", "display_name": "Tristen Harr", "link": "https://stackoverflow.com/users/11585130/tristen-harr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564007200, "creation_date": 1564001389, "question_id": 57191042, "link": "https://stackoverflow.com/questions/57191042/tkinter-binding-multiple-scrollbars-to-mousewheel", "title": "Tkinter Binding Multiple Scrollbar&#39;s to MouseWheel", "body": "<p>I'm building something that uses multiple scrollbars. This class is actually a wrapper for the tk.ScrollBar and it's used to create scrollable frames. What I want is to be able to set a \"default\" scroll-container. </p>\n\n<p>Assume 90% of the time someone using the application would want to scroll some frame (Which we will call main_frame), and 10% of the time they would want to scroll a different frame. (normal_frame) </p>\n\n<p>It would make sense to have the mousewheel scroll the normal_frame only when the user was hovering over it with the mouse, but to have the mousewheel scroll the main_frame in all instances except when hovering over normal_frame.</p>\n\n<p>The problem is that whenever you call bind_all upon \"<code>&lt;Enter&gt;</code>\"(ing) the normal_frame, when you \"<code>&lt;Leave&gt;</code>\" it, the main_frame no longer scrolls. Any suggestions?</p>\n\n<pre><code>class ScrollThing(object):\n\n    def __init__(self, some_frame, default=False):\n        self.default = default\n        self.canvas = tkinter.Canvas(some_frame)\n        self.view_window = tkinter.Frame(self.canvas)\n        #things and stuff to setup scroll bar\n\n\n    def setup_view_window(self):\n        if self.default:\n            self.canvas.bind_all('&lt;MouseWheel&gt;', self.on_mousewheel)\n        else:\n            self.view_window.bind('&lt;Enter&gt;', self.focus_in)\n            self.view_window.bind('&lt;Leave&gt;', self.focus_out)\n\n    def focus_in(self, *args):\n        del args\n        # I'm a seperate ScrollThing from main_frame\n        # I don't have access to the other ScrollThing because\n        # we are both dynamically created. \n        # I want to save the current bound arguments somehow\n        # but .bindtags() returns only MY bindings\n\n        self.canvas.bind_all('&lt;MouseWheel&gt;', self.on_mousewheel)\n\n    def focus_out(self, *args):\n        self.canvas.unbind_all('&lt;MouseWheel&gt;', self.on_mousewheel\n\n    def on_mousewheel(self, event):\n        self.canvas.yview_scroll(int(-1*(event.delta//120)), 'units')\n</code></pre>\n"}, {"tags": ["python", "selenium", "beautifulsoup"], "owner": {"reputation": 37, "user_id": 10812478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47f97b43947b47a16288d005dde94a62?s=128&d=identicon&r=PG", "display_name": "Flof", "link": "https://stackoverflow.com/users/10812478/flof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 644, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564001294, "creation_date": 1564001294, "question_id": 57191022, "link": "https://stackoverflow.com/questions/57191022/scraping-instagram-profile-with-python", "title": "Scraping instagram profile with python", "body": "<p>I'm trying to aggregate some data from every post on a given instagram profiles.</p>\n\n<p>I mixed codes found <a href=\"https://www.promptcloud.com/blog/how-to-scrape-instagram-data-using-python/\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://michaeljsanders.com/2017/05/12/scrapin-and-scrollin.html\" rel=\"nofollow noreferrer\">there</a> and decided to go with selenium to load and scroll along the page and BeautifulSoup to parse the data.</p>\n\n<p>Unfortunately, even though I'm loading the whole page with selenium, I can only access to the first twelve posts...</p>\n\n<p>I've tried to parse the html at the end of full page loading or even between each scrolling, same result.</p>\n\n<p>Here is my code, it's loading instagram usernames in the users.txt file, feel free to put your favorite account and try (it has to have more than 12 posts to see the behavior but not that much if you want it to be quick)..</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/python\n# -*- coding: utf-8 -*-\nimport requests\nimport urllib.request\nimport urllib.parse\nimport urllib.error\nfrom bs4 import BeautifulSoup\nimport ssl\nimport json\nimport time\nfrom selenium import webdriver\nfrom datetime import datetime\n\n\n\nclass Insta_Image_Links_Scraper:\n\n    def getlinks(self, user, url):\n\n        browser = webdriver.Chrome()\n        browser.get(url)\n        lenOfPage = browser.execute_script(\"window.scrollTo(0, document.body.scrollHeight);var lenOfPage=document.body.scrollHeight;return lenOfPage;\")\n        match=False\n        while(match==False):\n                lastCount = lenOfPage\n                time.sleep(3)\n                lenOfPage = browser.execute_script(\"window.scrollTo(0, document.body.scrollHeight);var lenOfPage=document.body.scrollHeight;return lenOfPage;\")\n                if lastCount==lenOfPage:\n                        match=True\n\n        soup = BeautifulSoup(browser.page_source, 'html.parser')\n        body = soup.find('body')\n        script = body.find('script')\n        page_json = script.text.strip().replace('window._sharedData =', '').replace(';', '')\n\n        data = json.loads(page_json)\n        print ('Scraping posts for user ' + user+\"...........\")\n        for post in data['entry_data']['ProfilePage'][0]['graphql']['user']['edge_owner_to_timeline_media']['edges']:\n            timestamp = post['node']['taken_at_timestamp']\n            likedby = post['node']['edge_liked_by']['count']\n            comments = post['node']['edge_media_to_comment']['count']\n            isVideo = post['node']['is_video']\n\n            print('Post on :',datetime.utcfromtimestamp(timestamp).strftime('%Y-%m-%d %H:%M:%S'))\n\n    def main(self):\n        self.ctx = ssl.create_default_context()\n        self.ctx.check_hostname = False\n        self.ctx.verify_mode = ssl.CERT_NONE\n\n        with open('users.txt') as f:\n            self.content = f.readlines()\n        self.content = [x.strip() for x in self.content]\n        for user in self.content:\n            self.getlinks(user,\n                          'https://www.instagram.com/'\n                          + user + '/')\n\n\nif __name__ == '__main__':\n    obj = Insta_Image_Links_Scraper()\n    obj.main()\n</code></pre>\n\n<p>It should output the timestamp of each post on a user profile, and not only the firsts post corresponding to what you would see without scrolling.</p>\n\n<p>Thank you !</p>\n"}, {"tags": ["python", "bamboo", "bitbucket-server"], "answers": [{"comments": [{"owner": {"reputation": 6957, "user_id": 1213364, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/O5cUR.jpg?s=128&g=1", "display_name": "Vineesh TP", "link": "https://stackoverflow.com/users/1213364/vineesh-tp"}, "edited": false, "score": 0, "creation_date": 1564036601, "post_id": 57191529, "comment_id": 100900008, "body": "Thank you for the reply. Added the environment variable. Still the same error."}, {"owner": {"reputation": 6957, "user_id": 1213364, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/O5cUR.jpg?s=128&g=1", "display_name": "Vineesh TP", "link": "https://stackoverflow.com/users/1213364/vineesh-tp"}, "edited": false, "score": 0, "creation_date": 1564037154, "post_id": 57191529, "comment_id": 100900252, "body": "I have updated the question with modified task screenshot."}, {"owner": {"reputation": 711, "user_id": 6913288, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nTBqlgPcG7A/AAAAAAAAAAI/AAAAAAAAAGU/ZI06ldQ38TM/photo.jpg?sz=128", "display_name": "Wesley Rolnick", "link": "https://stackoverflow.com/users/6913288/wesley-rolnick"}, "reply_to_user": {"reputation": 6957, "user_id": 1213364, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/O5cUR.jpg?s=128&g=1", "display_name": "Vineesh TP", "link": "https://stackoverflow.com/users/1213364/vineesh-tp"}, "edited": false, "score": 1, "creation_date": 1564054314, "post_id": 57191529, "comment_id": 100909670, "body": "@VineeshTP: Something is still wrong with your path.  It could either be you need a &quot;./&quot; in front of &quot;/ProjectName/&quot; or you do not need ProjectName at all (Depends on what the working directory looks like after the check out step).  Try navigating to your Python file on the Bamboo server with a terminal and verifying the directory there."}, {"owner": {"reputation": 6957, "user_id": 1213364, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/O5cUR.jpg?s=128&g=1", "display_name": "Vineesh TP", "link": "https://stackoverflow.com/users/1213364/vineesh-tp"}, "edited": false, "score": 0, "creation_date": 1567171164, "post_id": 57191529, "comment_id": 101895147, "body": "resolved by navigating the python file directory. Added the direcory /mydirectory"}], "tags": [], "owner": {"reputation": 711, "user_id": 6913288, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nTBqlgPcG7A/AAAAAAAAAAI/AAAAAAAAAGU/ZI06ldQ38TM/photo.jpg?sz=128", "display_name": "Wesley Rolnick", "link": "https://stackoverflow.com/users/6913288/wesley-rolnick"}, "is_accepted": true, "score": 1, "last_activity_date": 1564003896, "creation_date": 1564003896, "answer_id": 57191529, "question_id": 57191011, "link": "https://stackoverflow.com/questions/57191011/python-cant-open-file-bamboo/57191529#57191529", "title": "python: can&#39;t open file - Bamboo", "body": "<p>Even though you are specifying the directory, it is possible Python or Bamboo does not have direct access within the confines of your script task.</p>\n\n<p>Have your first task in Bamboo be to Checkout the source code from the linked repository.  You can give it a checkout directory name if you want as long as you set this in the working directory step below.</p>\n\n<p>Next, modify your script task with the following changes:</p>\n\n<ul>\n<li>Set the interpreter is shell</li>\n<li>Set the Environment varaiable to be PATH=\"$PATH:/usr/local/bin\"  This will allow Bamboo access to the Path variable for Python.</li>\n<li>Define your working directory from after \"XXXXSCRIP-XXXXSCRIP-JOB1\".  In Bamboo your default working directory will be \"XXXXSCRIP-XXXXSCRIP-JOB1\".  So if you checked out your python code to ProjectName the working directory of the script should simply be ProjectName.</li>\n</ul>\n"}], "owner": {"reputation": 6957, "user_id": 1213364, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/O5cUR.jpg?s=128&g=1", "display_name": "Vineesh TP", "link": "https://stackoverflow.com/users/1213364/vineesh-tp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 0, "accepted_answer_id": 57191529, "answer_count": 1, "score": 0, "last_activity_date": 1564038497, "creation_date": 1564001246, "last_edit_date": 1564038497, "question_id": 57191011, "link": "https://stackoverflow.com/questions/57191011/python-cant-open-file-bamboo", "title": "python: can&#39;t open file - Bamboo", "body": "<p>I have configured a task as check out source code from Bit-Bucket and it is working fine.</p>\n\n<p>As per some comments I can see the below lines is working fine.</p>\n\n<pre><code>/usr/bin/python &lt;&lt;EOF\nprint \"Hello, World!\"\nEOF\n</code></pre>\n\n<p>I an trying to run my python file from the check out source code.</p>\n\n<p>As per the documentation got the current working directory from the below code,</p>\n\n<pre><code>${bamboo.working.directory}\n\nGot the result : \n/opt/atlassian/atlassian-bamboo-home-6.4.1/xml-data/build-dir/XXXXSCRIP-XXXXSCRIP-JOB1\n</code></pre>\n\n<p>and My repository path is</p>\n\n<pre><code>ProjectName/app.py\n</code></pre>\n\n<p>Added an script task and given the below as inline comments,</p>\n\n<pre><code>/usr/bin/python /opt/atlassian/atlassian-bamboo-home-6.4.1/xml-data/build-dir/XXXXSCRIP-XXXXSCRIP-JOB1/ProjectName/app.py\n</code></pre>\n\n<p>But, failed to execute. Please see the below error message.</p>\n\n<pre><code>python: can't open file '/opt/atlassian/atlassian-bamboo-home-6.4.1/xml-data/build-dir/XXXXSCRIP-XXXXSCRIP-JOB1/ProjectName/app.py': [Errno 2] No such file or directory\n</code></pre>\n\n<p>How do I solve this issue.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/YYx4q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YYx4q.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "data-science"], "owner": {"reputation": 167, "user_id": 10870397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf5e46b47d4990d37aebf9cd318808a?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Rosen", "link": "https://stackoverflow.com/users/10870397/greg-rosen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1564003877, "creation_date": 1564001040, "last_edit_date": 1564003877, "question_id": 57190958, "link": "https://stackoverflow.com/questions/57190958/sklearn-pipeline-columntransformer-throwing-valueerror-too-many-values-to-unpac", "title": "Sklearn Pipeline/ColumnTransformer throwing ValueError: too many values to unpack (expected 2)", "body": "<p>I'm trying to run sklearn ColumnTransformer for individual Pipelines. My dataframe is called listings_prepared. All features are float or int. The dataframe is clean--the only issue is a few missing values which are marked Nan, so SimpleImputer should handle it...</p>\n\n<p>Sklearn provides documentation <a href=\"https://scikit-learn.org/stable/auto_examples/compose/plot_column_transformer_mixed_types.html\" rel=\"nofollow noreferrer\">here</a> on running pipelines through ColumnTransformer, which is what I've followed.</p>\n\n<p>First, I create the pipelines using Pipeline:</p>\n\n<pre><code>num_pipeline = Pipeline([\n    ('num_imputer', SimpleImputer(strategy='median')),\n    ('num_scaler', StandardScaler()),\n])\n\ndisc_pipeline = Pipeline([\n    ('disc_imputer', SimpleImputer(strategy='most_frequent')),\n    ('disc_scaler', StandardScaler(), disc_attribs),\n])\n\ncat_pipeline = Pipeline([\n    ('cat_imputer', SimpleImputer(strategy='most_frequent')),\n    ('cat_ohe', OneHotEncoder(categories='auto', drop='first',\n                              sparse=False)),\n])\n\namen_pipeline= Pipeline([\n    ('amen_imputer', SimpleImputer(strategy='most_frequent')),\n])\n</code></pre>\n\n<p>Then, I run them through ColumnTransformer:</p>\n\n<pre><code>    listings_pipeline = ColumnTransformer([\n    ('num', num_pipeline, num_attribs),\n    ('disc', disc_pipeline, disc_attribs),\n    ('cat', cat_pipeline, cat_attribs),\n    ('amen', amen_pipeline, amen_attribs),\n])\nX_train = listings_pipeline.fit_transform(listings_explore)\n</code></pre>\n\n<p>Here's the error:</p>\n\n<pre><code>---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-511-9d5100fe0f5d&gt; in &lt;module&gt;\n     12     ('amen', amen_pipeline, amen_attribs),\n     13 ])\n---&gt; 14 X_train = listings_pipeline.fit_transform(listings_explore_pipeline)\n\n~/anaconda3/lib/python3.7/site-packages/sklearn/compose/_column_transformer.py in fit_transform(self, X, y)\n    466         self._validate_remainder(X)\n    467 \n--&gt; 468         result = self._fit_transform(X, y, _fit_transform_one)\n    469 \n    470         if not result:\n\n~/anaconda3/lib/python3.7/site-packages/sklearn/compose/_column_transformer.py in _fit_transform(self, X, y, func, fitted)\n    410                     message=self._log_message(name, idx, len(transformers)))\n    411                 for idx, (name, trans, column, weight) in enumerate(\n--&gt; 412                         self._iter(fitted=fitted, replace_strings=True), 1))\n    413         except ValueError as e:\n    414             if \"Expected 2D array, got 1D array instead\" in str(e):\n\n~/anaconda3/lib/python3.7/site-packages/joblib/parallel.py in __call__(self, iterable)\n    922                 self._iterating = self._original_iterator is not None\n    923 \n--&gt; 924             while self.dispatch_one_batch(iterator):\n    925                 pass\n    926 \n\n~/anaconda3/lib/python3.7/site-packages/joblib/parallel.py in dispatch_one_batch(self, iterator)\n    757                 return False\n    758             else:\n--&gt; 759                 self._dispatch(tasks)\n    760                 return True\n    761 \n\n~/anaconda3/lib/python3.7/site-packages/joblib/parallel.py in _dispatch(self, batch)\n    714         with self._lock:\n    715             job_idx = len(self._jobs)\n--&gt; 716             job = self._backend.apply_async(batch, callback=cb)\n    717             # A job can complete so quickly than its callback is\n    718             # called before we get here, causing self._jobs to\n\n~/anaconda3/lib/python3.7/site-packages/joblib/_parallel_backends.py in apply_async(self, func, callback)\n    180     def apply_async(self, func, callback=None):\n    181         \"\"\"Schedule a func to be run\"\"\"\n--&gt; 182         result = ImmediateResult(func)\n    183         if callback:\n    184             callback(result)\n\n~/anaconda3/lib/python3.7/site-packages/joblib/_parallel_backends.py in __init__(self, batch)\n    547         # Don't delay the application, to avoid keeping the input\n    548         # arguments in memory\n--&gt; 549         self.results = batch()\n    550 \n    551     def get(self):\n\n~/anaconda3/lib/python3.7/site-packages/joblib/parallel.py in __call__(self)\n    223         with parallel_backend(self._backend, n_jobs=self._n_jobs):\n    224             return [func(*args, **kwargs)\n--&gt; 225                     for func, args, kwargs in self.items]\n    226 \n    227     def __len__(self):\n\n~/anaconda3/lib/python3.7/site-packages/joblib/parallel.py in &lt;listcomp&gt;(.0)\n    223         with parallel_backend(self._backend, n_jobs=self._n_jobs):\n    224             return [func(*args, **kwargs)\n--&gt; 225                     for func, args, kwargs in self.items]\n    226 \n    227     def __len__(self):\n\n~/anaconda3/lib/python3.7/site-packages/sklearn/pipeline.py in _fit_transform_one(transformer, X, y, weight, message_clsname, message, **fit_params)\n    714     with _print_elapsed_time(message_clsname, message):\n    715         if hasattr(transformer, 'fit_transform'):\n--&gt; 716             res = transformer.fit_transform(X, y, **fit_params)\n    717         else:\n    718             res = transformer.fit(X, y, **fit_params).transform(X)\n\n~/anaconda3/lib/python3.7/site-packages/sklearn/pipeline.py in fit_transform(self, X, y, **fit_params)\n    385         \"\"\"\n    386         last_step = self._final_estimator\n--&gt; 387         Xt, fit_params = self._fit(X, y, **fit_params)\n    388         with _print_elapsed_time('Pipeline',\n    389                                  self._log_message(len(self.steps) - 1)):\n\n~/anaconda3/lib/python3.7/site-packages/sklearn/pipeline.py in _fit(self, X, y, **fit_params)\n    270         fit_transform_one_cached = memory.cache(_fit_transform_one)\n    271 \n--&gt; 272         fit_params_steps = {name: {} for name, step in self.steps\n    273                             if step is not None}\n    274         for pname, pval in fit_params.items():\n\n~/anaconda3/lib/python3.7/site-packages/sklearn/pipeline.py in &lt;dictcomp&gt;(.0)\n    270         fit_transform_one_cached = memory.cache(_fit_transform_one)\n    271 \n--&gt; 272         fit_params_steps = {name: {} for name, step in self.steps\n    273                             if step is not None}\n    274         for pname, pval in fit_params.items():\n\nValueError: too many values to unpack (expected 2)\n</code></pre>\n\n<p>Why isn't this working?</p>\n"}, {"tags": ["python", "pip", "openpyxl", "python-3.7"], "comments": [{"owner": {"reputation": 1355, "user_id": 1824779, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/84a0d577edefec1ec9b76ea419425196?s=128&d=identicon&r=PG", "display_name": "Taku_", "link": "https://stackoverflow.com/users/1824779/taku"}, "edited": false, "score": 1, "creation_date": 1564001138, "post_id": 57190946, "comment_id": 100891656, "body": "In Visual Studio Code are you using a virtualenv ? if you are it will not have that module. You need to make sure your project is pointed to your systems python 3.7"}, {"owner": {"reputation": 361, "user_id": 8150822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f792f2ae77cc92ed283bba8a85465f?s=128&d=identicon&r=PG&f=1", "display_name": "Theodore Howell", "link": "https://stackoverflow.com/users/8150822/theodore-howell"}, "edited": false, "score": 0, "creation_date": 1564001179, "post_id": 57190946, "comment_id": 100891677, "body": "Agreed with Taku_, this seems like a python path issue. You need to configure your editor to agree with your path."}, {"owner": {"reputation": 6983, "user_id": 973397, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/7pwAF.jpg?s=128&g=1", "display_name": "fred randall", "link": "https://stackoverflow.com/users/973397/fred-randall"}, "reply_to_user": {"reputation": 1355, "user_id": 1824779, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/84a0d577edefec1ec9b76ea419425196?s=128&d=identicon&r=PG", "display_name": "Taku_", "link": "https://stackoverflow.com/users/1824779/taku"}, "edited": false, "score": 0, "creation_date": 1564001978, "post_id": 57190946, "comment_id": 100891969, "body": "Thanks @Taku_ How could I go about merging them? thanks for the help"}, {"owner": {"reputation": 1355, "user_id": 1824779, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/84a0d577edefec1ec9b76ea419425196?s=128&d=identicon&r=PG", "display_name": "Taku_", "link": "https://stackoverflow.com/users/1824779/taku"}, "edited": false, "score": 0, "creation_date": 1564002102, "post_id": 57190946, "comment_id": 100892013, "body": "I would start with documentation. This should get you in the right direction.  <a href=\"https://code.visualstudio.com/docs/python/environments\" rel=\"nofollow noreferrer\">code.visualstudio.com/docs/python/environments</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1355, "user_id": 1824779, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/84a0d577edefec1ec9b76ea419425196?s=128&d=identicon&r=PG", "display_name": "Taku_", "link": "https://stackoverflow.com/users/1824779/taku"}, "is_accepted": false, "score": 1, "last_activity_date": 1564057082, "creation_date": 1564057082, "answer_id": 57201800, "question_id": 57190946, "link": "https://stackoverflow.com/questions/57190946/cannot-install-and-use-module-openpyxl-in-python-3-7/57201800#57201800", "title": "cannot install and use module &#39;openpyxl&#39; in Python 3.7", "body": "<p>As discussed in comments it seems like this may be related to a pathing issue that you are experiencing within Visual Studio Code. </p>\n\n<p>My suggestion would be using the documentation from them to ensure you are pointing to your local version of python and not a virtual environment which may not have openpyxl installed.</p>\n\n<p><a href=\"https://code.visualstudio.com/docs/python/environments\" rel=\"nofollow noreferrer\">https://code.visualstudio.com/docs/python/environments</a> </p>\n"}], "owner": {"reputation": 6983, "user_id": 973397, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/7pwAF.jpg?s=128&g=1", "display_name": "fred randall", "link": "https://stackoverflow.com/users/973397/fred-randall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 922, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564057082, "creation_date": 1564000983, "question_id": 57190946, "link": "https://stackoverflow.com/questions/57190946/cannot-install-and-use-module-openpyxl-in-python-3-7", "title": "cannot install and use module &#39;openpyxl&#39; in Python 3.7", "body": "<p>For the life of me, I cannot install and use module '<code>openpyxl</code>' in Python 3.7 / Windows / and Anaconda. </p>\n\n<p>When I try to run and or debug my program I am consistently error-ed out on:</p>\n\n<pre><code>    import openpyxl\nModuleNotFoundError: No module named 'openpyxl'\n</code></pre>\n\n<p>Although within my Terminal or Anaconda Prompt: It says its installed and requirements already met. <em>i.e. the below</em></p>\n\n<pre><code>Requirement already satisfied: openpyxl in c:\\users\\MYSELF\\appdata\\local\\continuum\\anaconda3\\lib\\site-packages (2.6.2)\nRequirement already satisfied: jdcal in c:\\users\\MYSELF\\appdata\\local\\continuum\\anaconda3\\lib\\site-packages (from openpyxl) (1.4)\nRequirement already satisfied: et-xmlfile in c:\\users\\MYSELF\\appdata\\local\\continuum\\anaconda3\\lib\\site-packages (from openpyxl) (1.0.1)\n\n(base) C:\\MYSELF\\language\\python\\MLTSS-PDF-Split&gt;pip install openpyxl\nRequirement already satisfied: openpyxl in c:\\users\\MYSELF\\appdata\\local\\continuum\\anaconda3\\lib\\site-packages (2.6.2)\nRequirement already satisfied: jdcal in c:\\users\\MYSELF\\appdata\\local\\continuum\\anaconda3\\lib\\site-packages (from openpyxl) (1.4)\nRequirement already satisfied: et-xmlfile in c:\\users\\MYSELF\\appdata\\local\\continuum\\anaconda3\\lib\\site-packages (from openpyxl) (1.0.1)\n\n(base) C:\\gitViews\\language\\python\\MLTSS-PDF-Split&gt;pip3 install openpyxl\nRequirement already satisfied: openpyxl in c:\\users\\MYSELF\\appdata\\local\\continuum\\anaconda3\\lib\\site-packages (2.6.2)\nRequirement already satisfied: et-xmlfile in c:\\users\\MYSELF\\appdata\\local\\continuum\\anaconda3\\lib\\site-packages (from openpyxl) (1.0.1)\nRequirement already satisfied: jdcal in c:\\users\\MYSELF\\appdata\\local\\continuum\\anaconda3\\lib\\site-packages (from openpyxl) (1.4)\n</code></pre>\n\n<p>I have tried uninstalling and reinstalling, I have tried using <code>pip</code> and <code>pip3</code>.</p>\n\n<p>I have tried using <code>trusted host</code>.</p>\n\n<p>I get no error on the import line within Visual Studio Code; i.e.</p>\n\n<pre><code>import openpyxl\n</code></pre>\n\n<p><strong>Why cannot use this module ?</strong></p>\n"}, {"tags": ["python", "excel", "openpyxl", "win32com"], "comments": [{"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1564041279, "post_id": 57190905, "comment_id": 100902361, "body": "The exception does not relate to the code shown."}, {"owner": {"reputation": 49, "user_id": 11744301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4345092ffdfaf507420cd7dba507c2d?s=128&d=identicon&r=PG&f=1", "display_name": "Hughgent", "link": "https://stackoverflow.com/users/11744301/hughgent"}, "reply_to_user": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1564059013, "post_id": 57190905, "comment_id": 100912246, "body": "Quite true, which is why I&#39;m trying to point out that some of the time it works, and other times it doesn&#39;t. I believe this is due to something in the data I am grabbing so I am looking for ways to sanitize the data that comes in."}, {"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1564061649, "post_id": 57190905, "comment_id": 100913892, "body": "Specifically: does the except relate directly to openpyxl? If so, please include relevant code. If not, please remove the tag. You might have more success with remote controlling Excel using xlwings."}, {"owner": {"reputation": 49, "user_id": 11744301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4345092ffdfaf507420cd7dba507c2d?s=128&d=identicon&r=PG&f=1", "display_name": "Hughgent", "link": "https://stackoverflow.com/users/11744301/hughgent"}, "reply_to_user": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1564063961, "post_id": 57190905, "comment_id": 100915285, "body": "I argue that it could relate to openpyxl due to how I am grabbing the data from the data spreadsheet. Is there some openpyxl setting that makes sure cell values do not contain any associated xml tags? data_only=True doesn&#39;t help."}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 11744301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4345092ffdfaf507420cd7dba507c2d?s=128&d=identicon&r=PG&f=1", "display_name": "Hughgent", "link": "https://stackoverflow.com/users/11744301/hughgent"}, "is_accepted": false, "score": 0, "last_activity_date": 1564067419, "last_edit_date": 1564067419, "creation_date": 1564066982, "answer_id": 57205063, "question_id": 57190905, "link": "https://stackoverflow.com/questions/57190905/how-can-i-make-sure-any-data-i-grab-from-a-spreadsheet-has-no-xml-content/57205063#57205063", "title": "How can I make sure any data I grab from a spreadsheet has no xml content?", "body": "<p>Found the cause.</p>\n\n<p>I had a section where I was deleting an unused sheet using openpyxl.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>if days &gt;= 150:\n    sheet = 'MONTHLY'\n    del wb['WEEKLY']\nelse:\n    sheet = 'WEEKLY'\n    del wb['MONTHLY']\n</code></pre>\n\n<p>As it turned out. anything with days &lt;150 triggered the error above.</p>\n\n<p>a working xml section would look like this</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>-&lt;sheets&gt;\n\n&lt;sheet r:id=\"rId1\" sheetId=\"1\" name=\"MONTHLY\"/&gt;\n\n&lt;/sheets&gt;\n\n\n-&lt;definedNames&gt;\n\n&lt;definedName name=\"LOCAL_MYSQL_DATE_FORMAT\" hidden=\"1\" localSheetId=\"0\"&gt;REPT(LOCAL_YEAR_FORMAT,4)&amp;LOCAL_DATE_SEPARATOR&amp;REPT(LOCAL_MONTH_FORMAT,2)&amp;LOCAL_DATE_SEPARATOR&amp;REPT(LOCAL_DAY_FORMAT,2)&amp;\" \"&amp;REPT(LOCAL_HOUR_FORMAT,2)&amp;LOCAL_TIME_SEPARATOR&amp;REPT(LOCAL_MINUTE_FORMAT,2)&amp;LOCAL_TIME_SEPARATOR&amp;REPT(LOCAL_SECOND_FORMAT,2)&lt;/definedName&gt;\n</code></pre>\n\n<p>and a non-working xml section (pre-repair) would look like this.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>\n-&lt;sheets&gt;\n\n&lt;sheet r:id=\"rId1\" state=\"visible\" sheetId=\"1\" name=\"WEEKLY\"/&gt;\n\n&lt;/sheets&gt;\n\n\n-&lt;definedNames&gt;\n\n&lt;definedName name=\"LOCAL_MYSQL_DATE_FORMAT\" localSheetId=\"1\" hidden=\"1\"&gt;REPT(LOCAL_YEAR_FORMAT,4)&amp;LOCAL_DATE_SEPARATOR&amp;REPT(LOCAL_MONTH_FORMAT,2)&amp;LOCAL_DATE_SEPARATOR&amp;REPT(LOCAL_DAY_FORMAT,2)&amp;\" \"&amp;REPT(LOCAL_HOUR_FORMAT,2)&amp;LOCAL_TIME_SEPARATOR&amp;REPT(LOCAL_MINUTE_FORMAT,2)&amp;LOCAL_TIME_SEPARATOR&amp;REPT(LOCAL_SECOND_FORMAT,2)&lt;/definedName&gt;\n</code></pre>\n\n<p>Important to note from these two bits is the <code>localSheetId</code>. For the Monthly ones with Days >150 removing the Weekly sheet, which was in list position 1, was no issue. Weekly ones would still have their <code>localSheetId=\"1\"</code> set somewhere which would cause this section to mismatch as it became position 0 during the sheet deletion.</p>\n\n<p>in the end removing the two deletion bits has 'fixed' this problem.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>if days &gt;= 150:\n    sheet = 'MONTHLY'\nelse:\n    sheet = 'WEEKLY'\n</code></pre>\n\n<p>Although it would be nice to not have to keep the extraneous sheet.</p>\n"}], "owner": {"reputation": 49, "user_id": 11744301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4345092ffdfaf507420cd7dba507c2d?s=128&d=identicon&r=PG&f=1", "display_name": "Hughgent", "link": "https://stackoverflow.com/users/11744301/hughgent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1564067419, "creation_date": 1564000818, "question_id": 57190905, "link": "https://stackoverflow.com/questions/57190905/how-can-i-make-sure-any-data-i-grab-from-a-spreadsheet-has-no-xml-content", "title": "How can I make sure any data I grab from a spreadsheet has no xml content?", "body": "<p>I am grabbing data from an excel powerquery which is grabbing from an SQL database. (not the best way to go about it but it works for me at the moment.)</p>\n\n<p>From that data spreadsheet, I am searching for specific job numbers and related numbers to automatically enter into a custom spreadsheet.</p>\n\n<p>Then I want to automatically open, calculate, save, then close excel to have all the formula be calculated and saved.</p>\n\n<p>What I am running into is that <strong>sometimes</strong>, the data grabbed from the spreadsheet is perfectly fine, and other times it has some sort of xml content that makes the automatic excel work fail at the open step.</p>\n\n<p>The grabbing of data uses openpyxl\nMuch of it looks like this.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>wb[sheet]['E11'].value = wbd['XXXXX'].cell(row=YYYYY, column=7).value\nwb[sheet]['E12'].value = wbd['XXXXX'].cell(row=YYYYY, column=8).value\n</code></pre>\n\n<p>or like this.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#after getting a dictionary of the relevant values.\nthisCost = 0\nfor _ in costTypeDictionary[AAAAA]['BBBBB'].split():\n    thisCost += CCCCC.get(_,0)\ncosts += thisCost\n</code></pre>\n\n<p>The excel automatic bit is as follows</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>excel = win32.gencache.EnsureDispatch('Excel.Application')\nworkbook = excel.Workbooks.Open(saveLoc + \"\\\\\" + jobName + newFileXlsx)\nworkbook.Save()\nworkbook.Close()\nexcel.Quit()\n</code></pre>\n\n<p>It works some of the time. data is grabbed, no issues. But on other occasions excel produces errors such as the following.</p>\n\n<p><em>please note that there are no named ranges in any spreadsheet being opened or used by openpyxl</em>\n<code>Removed Feature: Named range from /xl/workbook.xml part (Workbook)</code></p>\n\n<p>the python automation also produces an error in the pywintypes module.\n<code>pywintypes.com_error: (-2147352567, 'Exception occurred.', (0, 'Microsoft Excel', 'Open method of Workbooks class failed', 'xlmain11.chm', 0, -2146827284), None)</code></p>\n\n<p>So from what I am seeing, as manual inspection of the data is revealing nothing noticeable/I don't know what to look for, is that there is an extra something in the <code>bad</code> set of data that isn't in the <code>good</code> set of data, even though both are from the same source and entered in the exact same way with openpyxl.</p>\n\n<p>Which brings me round again to the question above. How can I make sure that the data I am entering doesn't have any of this xml content?</p>\n"}, {"tags": ["python", "multidimensional-array", "combinations"], "answers": [{"tags": [], "owner": {"reputation": 1707, "user_id": 11832127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zsq7r.png?s=128&g=1", "display_name": "ndclt", "link": "https://stackoverflow.com/users/11832127/ndclt"}, "is_accepted": false, "score": 1, "last_activity_date": 1564001480, "last_edit_date": 1564001480, "creation_date": 1564000971, "answer_id": 57190943, "question_id": 57190890, "link": "https://stackoverflow.com/questions/57190890/elements-from-first-row-in-a-matrix-operated-with-one-element-taken-from-each-ro/57190943#57190943", "title": "elements from first row in a matrix operated with one element taken from each row, iterating with all the elements of rows", "body": "<pre class=\"lang-py prettyprint-override\"><code>for_the_product = [[0,1], [0,1,2,3], [0,1,2]]\nfor one_tuple in itertools.product(*for_the_product):\n    do_something_with(one_tuple)\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3.7/library/itertools.html#itertools.product\" rel=\"nofollow noreferrer\">More explanation in the python documentation</a>. The <code>*</code> gives each elements of your initial list (<code>for_the_product</code> in my code) as an argument to the <code>product</code> function.</p>\n"}], "owner": {"reputation": 25, "user_id": 11832575, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sFge8qOc5Ag/AAAAAAAAAAI/AAAAAAAAZI8/zq6eGWY6Cio/photo.jpg?sz=128", "display_name": "Ankita Prasad", "link": "https://stackoverflow.com/users/11832575/ankita-prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564001480, "creation_date": 1564000729, "last_edit_date": 1564001044, "question_id": 57190890, "link": "https://stackoverflow.com/questions/57190890/elements-from-first-row-in-a-matrix-operated-with-one-element-taken-from-each-ro", "title": "elements from first row in a matrix operated with one element taken from each row, iterating with all the elements of rows", "body": "<p>Consider a 2D list in python. Taking the first list of given 2D list, I want to do XOR operation of each element from the first list with one element each from subsequent lists so that I have n-1 elements operated with that one element.  </p>\n\n<p>Example - \nlist = [[0,1], [0,1,2,3], [0,1,2]]</p>\n\n<p>combinations formed will be - \n0^0^0,\n0^0^1,\n0^0^2,\n0^1^0,\n0^1^1,\n0^1^2,\n0^2^0,\n0^2^1,\n0^2^2,\n0^3^0,\n0^3^1,\n0^3^2,\n1^0^0,\n1^0^1,\n1^0^2,\n1^1^0,\n1^1^1,\n1^1^2,\n1^2^0,\n1^2^1,\n1^2^2,\n1^3^0,\n1^3^1,\n1^3^2</p>\n\n<p>condition - The size of any of the list or sublists is not predefined</p>\n"}, {"tags": ["python", "qml", "pyside2"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1564001809, "creation_date": 1564001809, "answer_id": 57191130, "question_id": 57190884, "link": "https://stackoverflow.com/questions/57190884/unable-to-connect-to-signal-in-qml-emitted-from-python/57191130#57191130", "title": "Unable to connect to signal in QML emitted from Python", "body": "<p>The signals are declared as an attribute of the class, that is, they should not be created in any method of the class. The solution is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class MyPage(QQuickItem):\n    error_encountered = Signal(str) # &lt;---\n\n    def __init__(self, parent=None) -&gt; None:\n        super().__init__(parent)\n\n    @QtCore.Slot(QUrl, result=None)\n    def load_report(self, file_path: QUrl) -&gt; None:\n        print(f\"Called with: {file_path}\")\n        self.error_encountered.emit(\"Uh oh!\")\n</code></pre>\n"}], "owner": {"reputation": 1991, "user_id": 1595510, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0d1818641779ae53f52c9c193026357f?s=128&d=identicon&r=PG", "display_name": "roundtheworld", "link": "https://stackoverflow.com/users/1595510/roundtheworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 57191130, "answer_count": 1, "score": 1, "last_activity_date": 1564001809, "creation_date": 1564000683, "last_edit_date": 1564000807, "question_id": 57190884, "link": "https://stackoverflow.com/questions/57190884/unable-to-connect-to-signal-in-qml-emitted-from-python", "title": "Unable to connect to signal in QML emitted from Python", "body": "<p>I have a <code>QQuickItem</code> class created in Python:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class MyPage(QQuickItem):\n    def __init__(self, parent=None) -&gt; None:\n        super().__init__(parent)\n        error_encountered = Signal(str)\n\n    @QtCore.Slot(QUrl, result=None)\n    def load_report(self, file_path: QUrl) -&gt; None:\n        print(f\"Called with: {file_path}\")\n        self.error_encountered.emit(\"Uh oh!\")\n</code></pre>\n\n<p>The above class is registered as:</p>\n\n<p><code>qmlRegisterType(MyPage, \"MyPage\", 1, 0, \"MyPage\")</code></p>\n\n<p>My QML looks like:</p>\n\n<pre><code>MyPage {\n    signal errorEncountered(string text)\n    Component.onCompleted: error_encountered.connect(errorEncountered)\n    onErrorEncountered: console.log(text)\n}\n</code></pre>\n\n<p>However, I get the following error:</p>\n\n<p><code>qrc:/qml/main.qml:93: ReferenceError: error_encountered is not defined</code></p>\n\n<p>The pattern for PySide2 to connect to signals from QML to the source code is a bit different in Python than C++ and I'm having trouble figuring it out.  In C++ I would have had a signal defined like <code>void errorEncountered(const QString&amp; errorMessage);</code> and in my QML I could have simply done <code>onErrorEncountered: console.log(errorMessage)</code>.</p>\n"}, {"tags": ["python", "websocket"], "answers": [{"tags": [], "owner": {"reputation": 991, "user_id": 2555108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xySgD.png?s=128&g=1", "display_name": "Michael Kolber", "link": "https://stackoverflow.com/users/2555108/michael-kolber"}, "is_accepted": false, "score": 0, "last_activity_date": 1564000952, "creation_date": 1564000952, "answer_id": 57190933, "question_id": 57190878, "link": "https://stackoverflow.com/questions/57190878/how-can-i-kill-a-python-websocket-connection-ungracefully-for-automated-testing/57190933#57190933", "title": "How can I kill a python websocket connection ungracefully for automated testing?", "body": "<p>You can <a href=\"https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt\" rel=\"nofollow noreferrer\"><code>raise KeyboardInterrupt</code></a> from your code to simulate pressing Ctrl-C.</p>\n"}, {"tags": [], "owner": {"reputation": 5119, "user_id": 4276647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a929f6537e73d7cc1ec7b533032350?s=128&d=identicon&r=PG&f=1", "display_name": "Kurtis Rader", "link": "https://stackoverflow.com/users/4276647/kurtis-rader"}, "is_accepted": false, "score": 0, "last_activity_date": 1564071536, "creation_date": 1564071536, "answer_id": 57206373, "question_id": 57190878, "link": "https://stackoverflow.com/questions/57190878/how-can-i-kill-a-python-websocket-connection-ungracefully-for-automated-testing/57206373#57206373", "title": "How can I kill a python websocket connection ungracefully for automated testing?", "body": "<pre><code>import os\nimport signal\nos.kill(os.getpid(), signal.SIGKILL);\n</code></pre>\n"}], "owner": {"reputation": 198, "user_id": 2868419, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/564374779/picture?type=large", "display_name": "Souparno", "link": "https://stackoverflow.com/users/2868419/souparno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1564071536, "creation_date": 1564000664, "last_edit_date": 1564004573, "question_id": 57190878, "link": "https://stackoverflow.com/questions/57190878/how-can-i-kill-a-python-websocket-connection-ungracefully-for-automated-testing", "title": "How can I kill a python websocket connection ungracefully for automated testing?", "body": "<p>I need to ungracefully kill a Python Websocket connection (kill -9 way) to make sure that the server removes a RabbitMQ queue associated with the connection if the client connection is lost. I am using the Python websocket client: <a href=\"https://pypi.org/project/websocket_client/\" rel=\"nofollow noreferrer\">https://pypi.org/project/websocket_client/</a>.</p>\n\n<p>I am currently actually manually killing my hacky script by interrupting it on the console by pressing <kbd>Ctrl</kbd>+<kbd>C</kbd>, but I would like to automate it. </p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import websocket\nimport select\ntoken = &lt;token&gt;\ntry:\n    obj = websocket.create_connection(\"wss://&lt;websocketurl&gt;\",\n                                  timeout=5,\n                              header={\"Authorization\": \"Bearer {0}\".format(token)})\nexcept websocket.WebSocketConnectionClosedException:\n    print (\"connection closed error\")\n    raise\n\nprint(\"created\")\nrecv_permission = \"y\"\nwhile recv_permission is \"y\":\n    recv_permission = input(\"y to receive data, n to end\")\n    ready = select.select([obj],[],[])\n    if ready[0]:\n        print (\"data or event received, ready object: \")\n        try:\n            output = obj.recv()\n\n        except websocket.WebSocketConnectionClosedException:\n            print ( \"closed while receive\" )\n            raise\n    print(f\"output: {output}\")\n\nobj.close()\n</code></pre>\n"}, {"tags": ["python", "user-interface", "networking", "tkinter"], "comments": [{"owner": {"reputation": 4923, "user_id": 4601386, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4L6cUyO_qbs/AAAAAAAAAAI/AAAAAAAAEnY/wEBT7GB8tv8/photo.jpg?sz=128", "display_name": "tglaria", "link": "https://stackoverflow.com/users/4601386/tglaria"}, "edited": false, "score": 0, "creation_date": 1564000806, "post_id": 57190851, "comment_id": 100891555, "body": "Where&#39;s your GUI code?"}, {"owner": {"reputation": 25, "user_id": 10703473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9e925a98ec2fb9581fd6025ea188ed3?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/10703473/gary"}, "edited": false, "score": 0, "creation_date": 1564001171, "post_id": 57190851, "comment_id": 100891670, "body": "pygame ? <a href=\"https://stackoverflow.com/questions/8306288/creating-dynamic-text-using-the-blit-method\" title=\"creating dynamic text using the blit method\">stackoverflow.com/questions/8306288/&hellip;</a>"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1564004642, "post_id": 57190851, "comment_id": 100892810, "body": "The posted code has indentation problems starting at line 12 of the client code. The server code also seems to have indentation issues."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11826617, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Nt85-1PAYsE/AAAAAAAAAAI/AAAAAAAAApw/keMbrInybvM/photo.jpg?sz=128", "display_name": "Angie ", "link": "https://stackoverflow.com/users/11826617/angie"}, "edited": false, "score": 0, "creation_date": 1564065816, "post_id": 57193828, "comment_id": 100916426, "body": "Thank You, I know I didn&#39;t give you much to go off of but this works and helps me understand a lot."}], "tags": [], "owner": {"reputation": 17763, "user_id": 5317403, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8TwWN.png?s=128&g=1", "display_name": "acw1668", "link": "https://stackoverflow.com/users/5317403/acw1668"}, "is_accepted": true, "score": 1, "last_activity_date": 1564024977, "creation_date": 1564024977, "answer_id": 57193828, "question_id": 57190851, "link": "https://stackoverflow.com/questions/57190851/i-need-a-gui-that-is-constantly-updating-as-my-client-receives-new-data/57193828#57193828", "title": "I need a GUI that is constantly updating as my client receives new data", "body": "<p>You can create a <code>Text</code> box to capture the messages received.  In order to not blocking the GUI mainloop, you need to use thread to handle server connection.  Below is an example:</p>\n\n<pre><code>import socket\nimport threading\nfrom tkinter import *\n\nHEADERSIZE = 10\n\n# function to handle server connection\ndef connect_server(logbox):\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    s.connect((socket.gethostname(), 1243))\n\n    while True:\n        msg = s.recv(60).decode()\n        print(msg)\n        msglen = int(msg[:HEADERSIZE])\n        if len(msg) == msglen+HEADERSIZE:\n            logbox.insert(END, f'{msg[HEADERSIZE:]}\\n')\n        else:\n            logbox.insert(END, 'Received invalid message\\n')\n        logbox.see(END)\n\n# create the GUI\nroot = Tk()\nlogbox = Text(root, width=60, height=10)\nlogbox.pack(fill=BOTH, expand=1)\n# start the server handling thread\nthreading.Thread(target=lambda:connect_server(logbox), daemon=True).start()\n# start the GUI mainloop\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11826617, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Nt85-1PAYsE/AAAAAAAAAAI/AAAAAAAAApw/keMbrInybvM/photo.jpg?sz=128", "display_name": "Angie ", "link": "https://stackoverflow.com/users/11826617/angie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 57193828, "answer_count": 1, "score": 0, "last_activity_date": 1564024977, "creation_date": 1564000502, "question_id": 57190851, "link": "https://stackoverflow.com/questions/57190851/i-need-a-gui-that-is-constantly-updating-as-my-client-receives-new-data", "title": "I need a GUI that is constantly updating as my client receives new data", "body": "<p>I have a client and a server in python, my server is consistently sending the time to my client. My client then prints the time received, the length of the message, and that the full message was received. I know how to incorporate a basic GUI, but when I do the flow of data stops exactly where the GUI was placed. I need the GUI to display the time as it receives it, constantly updating. \nThis is my first python project so I'm sure I'm missing something.</p>\n\n<p>I'm honestly unsure of how to go about this. Any ideas are helpful. </p>\n\n<p>This Is my server</p>\n\n<pre><code>import socket\nimport time\n\n\nHEADERSIZE = 10\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ns.bind((socket.gethostname(), 1243))\ns.listen(5)\n\nwhile True:\n    # now our endpoint knows about the OTHER endpoint.\n    clientsocket, address = s.accept()\n    print(f\"Connection from {address} has been established.\")\n\n    msg = \"Welcome to the server!\"\n    msg = f\"{len(msg):&lt;{HEADERSIZE}}\"+msg\n\n    clientsocket.send(bytes(msg,\"utf-8\"))\n\nwhile True:\n    time.sleep(3)\n    msg = f\"The time is {time.time()}\"\n    msg = f\"{len(msg):&lt;{HEADERSIZE}}\"+msg\n\n    print(msg)\n\n    clientsocket.send(bytes(msg,\"utf-8\"))\n</code></pre>\n\n<p>This is my client</p>\n\n<pre><code>import socket\n\nHEADERSIZE = 10\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ns.connect((socket.gethostname(), 1243))\n\nwhile True:\n    full_msg = ''\n    new_msg = True\n    while True:\n    msg = s.recv(60)\n    if new_msg:\n        print(\"new msg len:\",msg[:HEADERSIZE])\n        msglen = int(msg[:HEADERSIZE])\n        new_msg = False\n\n    print(f\"full message length: {msglen}\")\n\n    full_msg += msg.decode(\"utf-8\")\n\n    print(len(full_msg))\n\n\n    if len(full_msg)-HEADERSIZE == msglen:\n        print(\"full msg recvd\")\n        print(full_msg[HEADERSIZE:])\n        new_msg = True\n        full_msg = ''\n</code></pre>\n\n<p>This is what the server results:</p>\n\n<p>Connection from ('169.254.91.3', 64486) has been established.</p>\n\n<p>29        The time is 1563997982.918763</p>\n\n<p>30        The time is 1563997985.9197025</p>\n\n<p>0        The time is 1563997988.9197063</p>\n\n<p>This is what the client results:</p>\n\n<p>new msg len: b'22 \n       '\nfull message length: 22</p>\n\n<p>32</p>\n\n<p>full msg recvd</p>\n\n<p>Welcome to the server!</p>\n\n<p>new msg len: b'29 \n       '\nfull message length: 29</p>\n\n<p>39</p>\n\n<p>full msg recvd</p>\n\n<p>The time is 1563997982.918763</p>\n\n<p>new msg len: b'30\n        '\nfull message length: 30</p>\n\n<p>40</p>\n\n<p>full msg recvd</p>\n\n<p>The time is 1563997985.9197025</p>\n\n<p>new msg len: b'30\n        '\nfull message length: 30</p>\n\n<p>40</p>\n\n<p>full msg recvd</p>\n\n<p>The time is 1563997988.9197063</p>\n"}, {"tags": ["python", "keras", "lstm", "keras-layer", "loss-function"], "comments": [{"owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "edited": false, "score": 0, "creation_date": 1564000813, "post_id": 57190848, "comment_id": 100891562, "body": "Are you sure you have the result before <code>compute_output_shape</code> is called? I&#39;m almost sure that is the problem."}, {"owner": {"reputation": 130, "user_id": 7823013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bf9eeb06cc9586ce397895ea617a6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lufy", "link": "https://stackoverflow.com/users/7823013/lufy"}, "reply_to_user": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "edited": false, "score": 0, "creation_date": 1564058793, "post_id": 57190848, "comment_id": 100912110, "body": "@DanielM&#246;ller, My intention here is not to change the shape of the output tensor. I used similar class to calculate Manhattan distance and euclidean distance. I didn&#39;t change the shapes there. I might be wrong here.  <code>def call(self, x, **kwargs):     self.result = K.sum(K.abs(x[0] - x[1]), axis=1, keepdims=True)     return self.result  def compute_output_shape(self, input_shape):     return K.int_shape(self.result)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 130, "user_id": 7823013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bf9eeb06cc9586ce397895ea617a6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lufy", "link": "https://stackoverflow.com/users/7823013/lufy"}, "edited": false, "score": 0, "creation_date": 1564058339, "post_id": 57196180, "comment_id": 100911847, "body": "I tried your solution and didn&#39;t work. I&#39;m receiving the same error as before. I believe, I&#39;m doing something working during <code>concatenate</code> operation"}, {"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "reply_to_user": {"reputation": 130, "user_id": 7823013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bf9eeb06cc9586ce397895ea617a6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lufy", "link": "https://stackoverflow.com/users/7823013/lufy"}, "edited": false, "score": 0, "creation_date": 1564059277, "post_id": 57196180, "comment_id": 100912436, "body": "@Lufy Could you please edit your question and show how do you use this layer in the model?"}, {"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "reply_to_user": {"reputation": 130, "user_id": 7823013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bf9eeb06cc9586ce397895ea617a6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lufy", "link": "https://stackoverflow.com/users/7823013/lufy"}, "edited": false, "score": 0, "creation_date": 1564060977, "post_id": 57196180, "comment_id": 100913488, "body": "@Lufy And one more thing as well please: the full stack trace."}, {"owner": {"reputation": 130, "user_id": 7823013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bf9eeb06cc9586ce397895ea617a6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lufy", "link": "https://stackoverflow.com/users/7823013/lufy"}, "edited": false, "score": 0, "creation_date": 1564062400, "post_id": 57196180, "comment_id": 100914351, "body": "added full stack trace"}, {"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "reply_to_user": {"reputation": 130, "user_id": 7823013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bf9eeb06cc9586ce397895ea617a6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lufy", "link": "https://stackoverflow.com/users/7823013/lufy"}, "edited": false, "score": 0, "creation_date": 1564062821, "post_id": 57196180, "comment_id": 100914644, "body": "@Lufy I just updated my answer. Please take a look."}, {"owner": {"reputation": 130, "user_id": 7823013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bf9eeb06cc9586ce397895ea617a6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lufy", "link": "https://stackoverflow.com/users/7823013/lufy"}, "edited": false, "score": 0, "creation_date": 1564063430, "post_id": 57196180, "comment_id": 100915003, "body": "Thanks. That issue was resolved but I&#39;m receiving some other error. <code>InvalidArgumentError: Dimensions must be equal, but are 2000 and 500 for &#39;soft_max_custom_loss_1&#47;MatMul&#39; (op: &#39;MatMul&#39;) with input shapes: [?,2000], [500,4]</code>. I&#39;ll update full stack trace"}, {"owner": {"reputation": 130, "user_id": 7823013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bf9eeb06cc9586ce397895ea617a6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lufy", "link": "https://stackoverflow.com/users/7823013/lufy"}, "edited": false, "score": 0, "creation_date": 1564064216, "post_id": 57196180, "comment_id": 100915444, "body": "Thank you very much.. Finally it worked.. One more request, can you suggest any good resources to get familiar with Keras and TF. I can write code to create models if it doesn&#39;t require any customization. But, I fell flat if I need to create some custom layer or custom loss like this."}, {"owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "reply_to_user": {"reputation": 130, "user_id": 7823013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bf9eeb06cc9586ce397895ea617a6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lufy", "link": "https://stackoverflow.com/users/7823013/lufy"}, "edited": false, "score": 0, "creation_date": 1564064717, "post_id": 57196180, "comment_id": 100915738, "body": "@Lufy You are welcome. Actually, some of these topics have been covered in Keras doc (e.g. <a href=\"https://keras.io/layers/writing-your-own-keras-layers/\" rel=\"nofollow noreferrer\">writing custom layers</a>). Further, Keras has <a href=\"https://github.com/keras-team/keras/tree/master/examples\" rel=\"nofollow noreferrer\">a set of official examples</a> covering various problems and architectures. For TF you can use its <a href=\"https://www.tensorflow.org/tutorials/\" rel=\"nofollow noreferrer\">official tutorials</a> and <a href=\"https://www.tensorflow.org/guide/\" rel=\"nofollow noreferrer\">official guides</a> covering both basic and advanced topics. Other than these, you can rely on lots of tutorials and guides existing on the web. Good luck!"}, {"owner": {"reputation": 130, "user_id": 7823013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bf9eeb06cc9586ce397895ea617a6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lufy", "link": "https://stackoverflow.com/users/7823013/lufy"}, "edited": false, "score": 0, "creation_date": 1564066255, "post_id": 57196180, "comment_id": 100916681, "body": "Thanks for the links. :)"}], "tags": [], "owner": {"reputation": 26720, "user_id": 2099607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9208c4a1df963917bd2957c207fe519?s=128&d=identicon&r=PG", "display_name": "today", "link": "https://stackoverflow.com/users/2099607/today"}, "is_accepted": true, "score": 1, "last_activity_date": 1564064016, "last_edit_date": 1564064016, "creation_date": 1564038520, "answer_id": 57196180, "question_id": 57190848, "link": "https://stackoverflow.com/questions/57190848/concatenate-multiple-lstm-outputs-of-shape-none-m-in-keras-custom-layer/57196180#57196180", "title": "Concatenate multiple LSTM outputs of shape (None, m) in Keras custom layer", "body": "<p>This line:</p>\n\n<pre><code>self.result = keras.layer.Softmax(keras.layers.ReLU(vec) * self.weight + self.bias)\n</code></pre>\n\n<p>You can't use a layer like that. Instead use the equivalent backend functions:</p>\n\n<pre><code>self.result = K.softmax(K.bias_add(K.dot(K.relu(vec), self.weight), self.bias, data_format='channels_last'))\n</code></pre>\n\n<p>Note: I didn't read the paper, so also make sure you want to apply the <code>relu</code> on the concatenation result, and not after the dot product with weights and adding bias.</p>\n\n<p><strong>Update</strong>: there is also anther problem which is caused with the shape of weights you are creating. Since your layer gets two input tensors, then the <code>input_shape</code> argument of <code>build</code> method would be a list of two tuples, i.e. one input shape for corresponding to each input tensor. Therefore, when creating the weights, instead of writing <code>shape=(input_shape[1], 4)</code> you need to write <code>shape=(input_shape[0][1], 4)</code>.</p>\n\n<p><strong>Update 2</strong>: <code>vec</code> has a shape of <code>(?, 2000)</code> but the <code>weight</code> has a shape of <code>(500, 4)</code> and therefore they cannot be multiplied. You probably want to adjust the shape of <code>weight</code> accordingly: use <code>shape=(input_shape[0][1] * 4, 4)</code> instead.</p>\n"}], "owner": {"reputation": 130, "user_id": 7823013, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bf9eeb06cc9586ce397895ea617a6b1?s=128&d=identicon&r=PG&f=1", "display_name": "Lufy", "link": "https://stackoverflow.com/users/7823013/lufy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 57196180, "answer_count": 1, "score": 0, "last_activity_date": 1564064016, "creation_date": 1564000498, "last_edit_date": 1564063710, "question_id": 57190848, "link": "https://stackoverflow.com/questions/57190848/concatenate-multiple-lstm-outputs-of-shape-none-m-in-keras-custom-layer", "title": "Concatenate multiple LSTM outputs of shape (None, m) in Keras custom layer", "body": "<p>I'm trying to create a custom loss function using Keras custom layer template. I'm unable to perform calculations similar to what mentioned in the following paper (page 4, equation 5): <a href=\"https://web.stanford.edu/class/archive/cs/cs224n/cs224n.1174/reports/2748045.pdf\" rel=\"nofollow noreferrer\">https://web.stanford.edu/class/archive/cs/cs224n/cs224n.1174/reports/2748045.pdf</a></p>\n\n<pre><code>class CustomLoss(Layer):\n    def __init__(self, **kwargs):\n        self.result = None\n        super(CustomLoss, self).__init__(**kwargs)\n\n    def build(self, input_shape):\n#         shape_ = \n        self.weight = self.add_weight(name='trainable_weight', shape=(input_shape[1], 4), initializer='glorot_uniform',\n                                      trainable=True)\n        self.bias = self.add_weight(name='trainable_bias', shape=(4, ), initializer='zeros', trainable=True)\n        super(CustomLoss, self).build(input_shape)\n\n    def call(self, input_vec, **kwargs):\n        v1 = input_vec[0] # This is of shape (None, m)\n        v2 = input_vec[1] # This is of shape (None, m)\n        v3 = K.square(input_vec[0] - input_vec[1])\n        v4 = K.dot(input_vec[0], input_vec[1])\n        vec = concatenate([v1, v2, v3, v4])\n        self.result = keras.layer.Softmax(keras.layers.ReLU(vec) * self.weight + self.bias)\n        return self.result\n\n    def compute_output_shape(self, input_shape):\n        return K.int_shape(self.result)\n</code></pre>\n\n<p>I'm receiving following error:</p>\n\n<pre><code>TypeError: '&gt;' not supported between instances of 'tuple' and 'float'\n</code></pre>\n\n<p><strong>Edit1</strong></p>\n\n<pre><code>num = 75\nEMB_DIM = 300\nSEN_LEN = 20\n\ndef base_network(_input):\n    embd = embedding_layer(V_SIZE, EMB_DIM, SEN_LEN, embedding_matrix(_input)\n    x = Bidirectional(lstm(num), merge_mode='concat')(embd)\n    x = Bidirectional(lstm(num), merge_mode='concat')(x)\n    x = Dropout(0.2)(x)\n    y = TimeDistributed(Dense(1, activation='tanh'))(x)\n    y = Flatten()(y)\n    y = Activation('softmax')(y)\n    y = RepeatVector(num * 2)(y)\n    y = Permute([2, 1]) (y)\n    z = multiply([x, y])\n    z = Lambda(lambda xin: K.sum(xin, axis=1))(z)\n    return z\n</code></pre>\n\n<pre><code>inp1 = Input(shape=(SEN_LEN,), dtype='float32')\ninp2 = Input(shape=(SEN_LEN,), dtype='float32')\n\ns1 = base_network(inp1)\ns2 = base_network(inp1)\n\nsim_score = CustomLoss()([s1, s2])\noutput = concatenate([s1, s2 , sim_score])\nd1 = Dense(2)(output)\nsim = Dense(1, activation='sigmoid')(d1)\nmodel = Model(inputs=[inp1, inp2], outputs=[sim])\nmodel.compile(loss='mean_squared_error', optimizer=RMSprop())\n</code></pre>\n\n<p><strong>Edit 2</strong></p>\n\n<p></p>\n\n<pre><code>TypeError                                 Traceback (most recent call last)\n&lt;ipython-input-97-fa4c18ab9e4e&gt; in &lt;module&gt;\n      7 s1 = base_network(input_2)\n      8 \n----&gt; 9 sim_score = CustomLoss()([s1, s2])\n     10 output = concatenate([s1, s2 , sim_score])\n     11 d1 = Dense(2)(output)\n\n~\\.julia\\conda\\3\\lib\\site-packages\\keras\\engine\\base_layer.py in __call__(self, inputs, **kwargs)\n    429                                          'You can build it manually via: '\n    430                                          '`layer.build(batch_input_shape)`')\n--&gt; 431                 self.build(unpack_singleton(input_shapes))\n    432                 self.built = True\n    433 \n\n&lt;ipython-input-96-2f2fb52e16d0&gt; in build(self, input_shape)\n    117 #         shape_ =\n    118         self.weight = self.add_weight(name='trainable_weight', shape=(input_shape[1], 4, ), initializer='glorot_uniform',\n--&gt; 119                                       trainable=True)\n    120         self.bias = self.add_weight(name='trainable_bias', shape=(4, ), initializer='zeros', trainable=True)\n    121         super(CustomLoss, self).build(input_shape)\n\n~\\.julia\\conda\\3\\lib\\site-packages\\keras\\legacy\\interfaces.py in wrapper(*args, **kwargs)\n     89                 warnings.warn('Update your `' + object_name + '` call to the ' +\n     90                               'Keras 2 API: ' + signature, stacklevel=2)\n---&gt; 91             return func(*args, **kwargs)\n     92         wrapper._original_function = func\n     93         return wrapper\n\n~\\.julia\\conda\\3\\lib\\site-packages\\keras\\engine\\base_layer.py in add_weight(self, name, shape, dtype, initializer, regularizer, trainable, constraint)\n    247         if dtype is None:\n    248             dtype = K.floatx()\n--&gt; 249         weight = K.variable(initializer(shape),\n    250                             dtype=dtype,\n    251                             name=name,\n\n~\\.julia\\conda\\3\\lib\\site-packages\\keras\\initializers.py in __call__(self, shape, dtype)\n    203         scale = self.scale\n    204         if self.mode == 'fan_in':\n--&gt; 205             scale /= max(1., fan_in)\n    206         elif self.mode == 'fan_out':\n    207             scale /= max(1., fan_out)\n\nTypeError: '&gt;' not supported between instances of 'tuple' and 'float'\n</code></pre>\n\n<p><strong>Edit 3</strong>\nNew Error:</p>\n\n<pre><code>---------------------------------------------------------------------------\nInvalidArgumentError                      Traceback (most recent call last)\n~\\.julia\\conda\\3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py in _create_c_op(graph, node_def, inputs, control_inputs)\n   1627   try:\n-&gt; 1628     c_op = c_api.TF_FinishOperation(op_desc)\n   1629   except errors.InvalidArgumentError as e:\n\nInvalidArgumentError: Dimensions must be equal, but are 2000 and 500 for 'custom_loss_1/MatMul' (op: 'MatMul') with input shapes: [?,2000], [500,4].\n\nDuring handling of the above exception, another exception occurred:\n\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-99-fa4c18ab9e4e&gt; in &lt;module&gt;\n      7 s1 = base_network(input_2)\n      8 \n----&gt; 9 sim_score = CustomLoss()([s1, s2])\n     10 output = concatenate([s1, s2 , sim_score])\n     11 d1 = Dense(2)(output)\n\n~\\.julia\\conda\\3\\lib\\site-packages\\keras\\engine\\base_layer.py in __call__(self, inputs, **kwargs)\n    455             # Actually call the layer,\n    456             # collecting output(s), mask(s), and shape(s).\n--&gt; 457             output = self.call(inputs, **kwargs)\n    458             output_mask = self.compute_mask(inputs, previous_mask)\n    459 \n\n&lt;ipython-input-98-23434db31b00&gt; in call(self, x, **kwargs)\n    127         vec = concatenate([v1, v2, v3, v4])\n    128 #         vec = K.Flatten(vec)\n--&gt; 129         self.result = keras.layer.Softmax(keras.layers.ReLU(vec) * self.weight + self.bias)\n    130         return self.result\n    131 \n\n~\\.julia\\conda\\3\\lib\\site-packages\\keras\\backend\\tensorflow_backend.py in dot(x, y)\n   1083         out = tf.sparse_tensor_dense_matmul(x, y)\n   1084     else:\n-&gt; 1085         out = tf.matmul(x, y)\n   1086     return out\n   1087 \n\n~\\.julia\\conda\\3\\lib\\site-packages\\tensorflow\\python\\ops\\math_ops.py in matmul(a, b, transpose_a, transpose_b, adjoint_a, adjoint_b, a_is_sparse, b_is_sparse, name)\n   2055     else:\n   2056       return gen_math_ops.mat_mul(\n-&gt; 2057           a, b, transpose_a=transpose_a, transpose_b=transpose_b, name=name)\n   2058 \n   2059 \n\n~\\.julia\\conda\\3\\lib\\site-packages\\tensorflow\\python\\ops\\gen_math_ops.py in mat_mul(a, b, transpose_a, transpose_b, name)\n   4855     _, _, _op = _op_def_lib._apply_op_helper(\n   4856         \"MatMul\", a=a, b=b, transpose_a=transpose_a, transpose_b=transpose_b,\n-&gt; 4857         name=name)\n   4858     _result = _op.outputs[:]\n   4859     _inputs_flat = _op.inputs\n\n~\\.julia\\conda\\3\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py in _apply_op_helper(self, op_type_name, name, **keywords)\n    785         op = g.create_op(op_type_name, inputs, output_types, name=scope,\n    786                          input_types=input_types, attrs=attr_protos,\n--&gt; 787                          op_def=op_def)\n    788       return output_structure, op_def.is_stateful, op\n    789 \n\n~\\.julia\\conda\\3\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py in new_func(*args, **kwargs)\n    486                 'in a future version' if date is None else ('after %s' % date),\n    487                 instructions)\n--&gt; 488       return func(*args, **kwargs)\n    489     return tf_decorator.make_decorator(func, new_func, 'deprecated',\n    490                                        _add_deprecated_arg_notice_to_docstring(\n\n~\\.julia\\conda\\3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py in create_op(***failed resolving arguments***)\n   3272           input_types=input_types,\n   3273           original_op=self._default_original_op,\n-&gt; 3274           op_def=op_def)\n   3275       self._create_op_helper(ret, compute_device=compute_device)\n   3276     return ret\n\n~\\.julia\\conda\\3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py in __init__(self, node_def, g, inputs, output_types, control_inputs, input_types, original_op, op_def)\n   1790           op_def, inputs, node_def.attr)\n   1791       self._c_op = _create_c_op(self._graph, node_def, grouped_inputs,\n-&gt; 1792                                 control_input_ops)\n   1793 \n   1794     # Initialize self._outputs.\n\n~\\.julia\\conda\\3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py in _create_c_op(graph, node_def, inputs, control_inputs)\n   1629   except errors.InvalidArgumentError as e:\n   1630     # Convert to ValueError for backwards compatibility.\n-&gt; 1631     raise ValueError(str(e))\n   1632 \n   1633   return c_op\n\nValueError: Dimensions must be equal, but are 2000 and 500 for 'custom_loss_1/MatMul' (op: 'MatMul') with input shapes: [?,2000], [500,4].\n</code></pre>\n"}, {"tags": ["python", "animation", "screenshot", "gif", "vpython"], "answers": [{"tags": [], "owner": {"reputation": 699, "user_id": 1114907, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/857c808a0f355c237595a303e1000ef3?s=128&d=identicon&r=PG", "display_name": "user1114907", "link": "https://stackoverflow.com/users/1114907/user1114907"}, "is_accepted": false, "score": 0, "last_activity_date": 1564523794, "creation_date": 1564523794, "answer_id": 57280558, "question_id": 57190846, "link": "https://stackoverflow.com/questions/57190846/how-to-save-python-animation-of-glowscript-to-gif/57280558#57280558", "title": "How to save python animation of glowscript to gif?", "body": "<p>From the documentation at <a href=\"https://www.glowscript.org/docs/VPythonDocs/canvas.html\" rel=\"nofollow noreferrer\">https://www.glowscript.org/docs/VPythonDocs/canvas.html</a>:</p>\n\n<p>capture(filename) Sends to your Download folder a png screen shot of the canvas. If filename is the string \"boxes\" or \"boxes.png\" the file will be named \"boxes.png\".</p>\n"}], "owner": {"reputation": 87, "user_id": 6700176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8527c446d94538eecba78bb2295b954?s=128&d=identicon&r=PG&f=1", "display_name": "titanium", "link": "https://stackoverflow.com/users/6700176/titanium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 454, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564523794, "creation_date": 1564000486, "last_edit_date": 1564034928, "question_id": 57190846, "link": "https://stackoverflow.com/questions/57190846/how-to-save-python-animation-of-glowscript-to-gif", "title": "How to save python animation of glowscript to gif?", "body": "<p>I am trying to use <code>vpython glowscript</code> to generate some animations. </p>\n\n<p>The code works fine, but the problem is the display is through a browser, and I am not able to figure out how to save the display as <code>gif</code>. Here is a working code: </p>\n\n<pre><code>GlowScript 2.8 VPython\n\n# Bruce Sherwood\n\nN = 4 # N by N by N array of atoms\n# Surrounding the N**3 atoms is another layer of invisible fixed-position atoms\n# that provide stability to the lattice.\nk = 1\nm = 1\nspacing = 1\natom_radius = 0.3*spacing\nL0 = spacing-1.8*atom_radius\nV0 = pi*(0.5*atom_radius)**2*L0 # initial volume of spring\nscene.center = 0.5*(N-1)*vector(1,1,1)\ndt = 0.04*(2*pi*sqrt(m/k))\naxes = [vector(1,0,0), vector(0,1,0), vector(0,0,1)]\n\nscene.caption= \"\"\"A model of a solid represented as atoms connected by interatomic bonds.\n\nRight button drag or Ctrl-drag to rotate \"camera\" to view scene.\nTo zoom, drag with middle button or Alt/Option depressed, or use scroll wheel.\n  On a two-button mouse, middle is left + right.\nShift-drag to pan left/right and up/down.\nTouch screen: pinch/extend to zoom, swipe or two-finger rotate.\"\"\"\n\nclass crystal:\n\n    def __init__(self,  N, atom_radius, spacing, momentumRange ):\n        self.atoms = []\n        self.springs = []\n\n        # Create (N+2)^3 atoms in a grid; the outermost atoms are fixed and invisible\n        for z in range(-1,N+1,1):\n            for y in range(-1,N+1,1):\n                for x in range(-1,N+1,1):\n                    atom = sphere()\n                    atom.pos = vector(x,y,z)*spacing\n                    atom.radius = atom_radius\n                    atom.color = vector(0,0.58,0.69)\n                    if 0 &lt;= x &lt; N and 0 &lt;= y &lt; N and 0 &lt;= z &lt; N:\n                        p = vec.random()\n                        atom.momentum = momentumRange*p\n                    else:\n                        atom.visible = False\n                        atom.momentum = vec(0,0,0)\n                    atom.index = len(self.atoms)\n                    self.atoms.append( atom )\n        for atom in self.atoms:\n            if atom.visible:\n                if atom.pos.x == 0:\n                    self.make_spring(self.atoms[atom.index-1], atom, False)\n                    self.make_spring(atom, self.atoms[atom.index+1], True)\n                elif atom.pos.x == N-1:\n                    self.make_spring(atom, self.atoms[atom.index+1], False)\n                else:\n                    self.make_spring(atom, self.atoms[atom.index+1], True)\n\n                if atom.pos.y == 0:\n                    self.make_spring(self.atoms[atom.index-(N+2)], atom, False)\n                    self.make_spring(atom, self.atoms[atom.index+(N+2)], True)\n                elif atom.pos.y == N-1:\n                    self.make_spring(atom, self.atoms[atom.index+(N+2)], False)\n                else:\n                    self.make_spring(atom, self.atoms[atom.index+(N+2)], True)\n\n                if atom.pos.z == 0:\n                    self.make_spring(self.atoms[atom.index-(N+2)**2], atom, False)\n                    self.make_spring(atom, self.atoms[atom.index+(N+2)**2], True)\n                elif atom.pos.z == N-1:\n                    self.make_spring(atom, self.atoms[atom.index+(N+2)**2], False)\n                else:\n                    self.make_spring(atom, self.atoms[atom.index+(N+2)**2], True)\n\n    # Create a grid of springs linking each atom to the adjacent atoms\n    # in each dimension, or to invisible motionless atoms\n    def make_spring(self, start, end, visible):\n        spring = helix()\n        spring.pos = start.pos\n        spring.axis = end.pos-start.pos\n        spring.visible = visible\n        spring.thickness = 0.05\n        spring.radius = 0.5*atom_radius\n        spring.length = spacing\n        spring.start = start\n        spring.end = end\n        spring.color = color.orange\n        self.springs.append(spring)\n\nc = crystal(N, atom_radius, spacing, 0.1*spacing*sqrt(k/m))\n\nwhile True:\n    rate(60)\n    for atom in c.atoms:\n        if atom.visible:\n            atom.pos = atom.pos + atom.momentum/m*dt\n    for spring in c.springs:\n        spring.axis = spring.end.pos - spring.start.pos\n        L = mag(spring.axis)\n        spring.axis = spring.axis.norm()\n        spring.pos = spring.start.pos+0.5*atom_radius*spring.axis\n        Ls = L-atom_radius\n        spring.length = Ls\n        Fdt = spring.axis * (k*dt * (1-spacing/L))\n        if spring.start.visible:\n            spring.start.momentum = spring.start.momentum + Fdt\n        if spring.end.visible:\n            spring.end.momentum = spring.end.momentum - Fdt\n</code></pre>\n\n<p>I would like to save a series of screenshots of this output. Any help would be appreciated.</p>\n"}, {"tags": ["python", "python-3.x", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 1866, "user_id": 1183506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aba83296f9be999e2fab8eab88b4727?s=128&d=identicon&r=PG", "display_name": "mrfreester", "link": "https://stackoverflow.com/users/1183506/mrfreester"}, "edited": false, "score": 0, "creation_date": 1564000821, "post_id": 57190835, "comment_id": 100891566, "body": "Never tried this before, but I&#39;m not sure it&#39;s any more possible then switching from chrome to firefox would be. You probably <i>could</i> do it by starting up a new driver passing in session information stored in the first driver... but I&#39;m not sure what benefit you would get out of doing this."}, {"owner": {"reputation": 1866, "user_id": 1183506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aba83296f9be999e2fab8eab88b4727?s=128&d=identicon&r=PG", "display_name": "mrfreester", "link": "https://stackoverflow.com/users/1183506/mrfreester"}, "edited": false, "score": 0, "creation_date": 1564001047, "post_id": 57190835, "comment_id": 100891631, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/53296228/how-do-i-make-chrome-headless-after-i-login-manually\">How do I make Chrome Headless after I login manually</a>"}, {"owner": {"reputation": 947, "user_id": 2122950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f41d436a8d052ea4f45a8f83bdd9c40d?s=128&d=identicon&r=PG", "display_name": "Homewrecker", "link": "https://stackoverflow.com/users/2122950/homewrecker"}, "edited": false, "score": 0, "creation_date": 1564040696, "post_id": 57190835, "comment_id": 100902003, "body": "Its headless or not, you cannot switch between the modes. If you want to be creative, you could log in not headless, save the session from the cookies or HTTP headers, close the browser -&gt; launch headless browser and set the cookie and/or HTTP headers to re-use the session that was created in the non-headless mode."}], "owner": {"reputation": 635, "user_id": 10993097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GZUs1.png?s=128&g=1", "display_name": "TheRealTengri", "link": "https://stackoverflow.com/users/10993097/therealtengri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1564000434, "creation_date": 1564000434, "question_id": 57190835, "link": "https://stackoverflow.com/questions/57190835/how-could-i-change-the-current-tab-in-a-browser-from-not-headless-to-headless-in", "title": "How could I change the current tab in a browser from not headless to headless in selenium?", "body": "<p>For example, let's say I am on the stackoverflow log in page in the chrome webdriver. I want it to be not headless, but if the user signs in, I want the chrome webdriver to switch to headless.</p>\n"}, {"tags": ["python", "django", "plotly", "plotly-dash"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11825702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cb7323699127cfef51f4098e6a41447?s=128&d=identicon&r=PG&f=1", "display_name": "laddie_03", "link": "https://stackoverflow.com/users/11825702/laddie-03"}, "edited": false, "score": 0, "creation_date": 1564002379, "post_id": 57191063, "comment_id": 100892108, "body": "Thank you for your detailed answer, how can I direct message on here?"}, {"owner": {"reputation": 361, "user_id": 8150822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f792f2ae77cc92ed283bba8a85465f?s=128&d=identicon&r=PG&f=1", "display_name": "Theodore Howell", "link": "https://stackoverflow.com/users/8150822/theodore-howell"}, "reply_to_user": {"reputation": 5, "user_id": 11825702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cb7323699127cfef51f4098e6a41447?s=128&d=identicon&r=PG&f=1", "display_name": "laddie_03", "link": "https://stackoverflow.com/users/11825702/laddie-03"}, "edited": false, "score": 0, "creation_date": 1564076322, "post_id": 57191063, "comment_id": 100921479, "body": "I am not quite sure to be honest, I had someone do it with me the other day let me look!"}, {"owner": {"reputation": 5, "user_id": 11825702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cb7323699127cfef51f4098e6a41447?s=128&d=identicon&r=PG&f=1", "display_name": "laddie_03", "link": "https://stackoverflow.com/users/11825702/laddie-03"}, "edited": false, "score": 0, "creation_date": 1564508524, "post_id": 57191063, "comment_id": 101051333, "body": "@ Theodore Howell, perhaps just communicating this way is best?"}, {"owner": {"reputation": 361, "user_id": 8150822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f792f2ae77cc92ed283bba8a85465f?s=128&d=identicon&r=PG&f=1", "display_name": "Theodore Howell", "link": "https://stackoverflow.com/users/8150822/theodore-howell"}, "reply_to_user": {"reputation": 5, "user_id": 11825702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cb7323699127cfef51f4098e6a41447?s=128&d=identicon&r=PG&f=1", "display_name": "laddie_03", "link": "https://stackoverflow.com/users/11825702/laddie-03"}, "edited": false, "score": 0, "creation_date": 1564587409, "post_id": 57191063, "comment_id": 101083097, "body": "Works with me, what else are you having issues with at this point?"}, {"owner": {"reputation": 5, "user_id": 11825702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cb7323699127cfef51f4098e6a41447?s=128&d=identicon&r=PG&f=1", "display_name": "laddie_03", "link": "https://stackoverflow.com/users/11825702/laddie-03"}, "edited": false, "score": 0, "creation_date": 1564592954, "post_id": 57191063, "comment_id": 101085866, "body": "@ Theodore Howell...The way my code is currently set up, I have a python script that is accessing logs and aggregating data. This data is then being graphed to Plotly and saved as an html file. I want to take this data and create a webpage(in a different script) with a collection of similar html files. I&#39;m not sure if your answer helps me with this specifically?"}, {"owner": {"reputation": 361, "user_id": 8150822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f792f2ae77cc92ed283bba8a85465f?s=128&d=identicon&r=PG&f=1", "display_name": "Theodore Howell", "link": "https://stackoverflow.com/users/8150822/theodore-howell"}, "reply_to_user": {"reputation": 5, "user_id": 11825702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cb7323699127cfef51f4098e6a41447?s=128&d=identicon&r=PG&f=1", "display_name": "laddie_03", "link": "https://stackoverflow.com/users/11825702/laddie-03"}, "edited": false, "score": 0, "creation_date": 1565116132, "post_id": 57191063, "comment_id": 101248339, "body": "but it does, you need to create that graph inside a django view and then put it in the context data to present it in the template, or better yet query the data from the front end and use the plotly js library, much friendlier experince."}, {"owner": {"reputation": 5456, "user_id": 2897115, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2624b65b6cff84369e57413b62c75e46?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2897115/santhosh"}, "edited": false, "score": 0, "creation_date": 1610905080, "post_id": 57191063, "comment_id": 116274210, "body": "which is better approach. using javascript library and fetch only data from django or generate the offline plot in django with css and html and pass it into the template"}], "tags": [], "owner": {"reputation": 361, "user_id": 8150822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f792f2ae77cc92ed283bba8a85465f?s=128&d=identicon&r=PG&f=1", "display_name": "Theodore Howell", "link": "https://stackoverflow.com/users/8150822/theodore-howell"}, "is_accepted": true, "score": 0, "last_activity_date": 1564001508, "creation_date": 1564001508, "answer_id": 57191063, "question_id": 57190830, "link": "https://stackoverflow.com/questions/57190830/how-to-embed-a-plotly-interactive-graph-in-webpage/57191063#57191063", "title": "How to Embed a Plotly Interactive Graph in Webpage", "body": "<p>I would highly reccomend Django, its a great framework. As for this, the best option is to generate the data via JavaScript and Plotly has a great library for this. If you must use python, then Django can be used. Assuming you are familiar with Django, inside of your view you can collect your data and build your graph ( I would reccomend a celery task for something long running like this unless they are small graphs), and you can then collect the return from creating the graph in div format. This will return a string that holds all the needed html and css for the graphs. Put this inside of you get_context_data() method in your view and place it into the dictionary. You can the use that object inside of a template. I have done this before, if you are having a hard time feel free to DM me. Hope this helps some!</p>\n\n<p>In regards to your side question, I believe having False for including JS will make the graph a bit smaller assuming you have an include for the plotly JS library. They might have done this in a newer release to make the graphs faster as they were significantly slower in the browser from python that the JS rendered one.</p>\n"}], "owner": {"reputation": 5, "user_id": 11825702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cb7323699127cfef51f4098e6a41447?s=128&d=identicon&r=PG&f=1", "display_name": "laddie_03", "link": "https://stackoverflow.com/users/11825702/laddie-03"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1531, "favorite_count": 0, "accepted_answer_id": 57191063, "answer_count": 1, "score": 0, "last_activity_date": 1564001508, "creation_date": 1564000411, "last_edit_date": 1564000859, "question_id": 57190830, "link": "https://stackoverflow.com/questions/57190830/how-to-embed-a-plotly-interactive-graph-in-webpage", "title": "How to Embed a Plotly Interactive Graph in Webpage", "body": "<p>I have an interactive graph generated by Plotly in Python that I saved to an html file using <code>plotly.offline.plot(fig, filename='/tmp/interactiveGraph.html')</code></p>\n\n<p>I am now trying to embed this interactive graph into some kind of webpage, using either Dash or Django. I'm leaning toward Django at the moment, given that I have an html version of the graph. <strong>Which would be better?</strong></p>\n\n<p>My code for the webpage is in a separate file from the code where I am creating the graph. </p>\n\n<p>A lot of the tutorials I've found online just say to add a few lines to the template, but I don't know how to get those lines that they've described.</p>\n\n<p><strong>tl;dr: I'm looking for guidance as how to integrate an html file-for a Plotly interactive graph-with a web python script using Django or Dash</strong> </p>\n\n<p><em>Side Question:</em> </p>\n\n<p>what is the difference between </p>\n\n<pre><code>plotly.offline.plot(fig, include_plotlyjs=False, output_type='div')\n</code></pre>\n\n<p>and what I have above?</p>\n\n<p>Reference:</p>\n\n<p><a href=\"https://github.com/ricleal/DjangoPlotLy\" rel=\"nofollow noreferrer\">https://github.com/ricleal/DjangoPlotLy</a></p>\n\n<p><a href=\"https://www.pythonsetup.com/how-implement-data-visualization-django-and-plotly/\" rel=\"nofollow noreferrer\">https://www.pythonsetup.com/how-implement-data-visualization-django-and-plotly/</a></p>\n"}, {"tags": ["python", "node.js", "function", "child-process"], "comments": [{"owner": {"reputation": 426, "user_id": 11753371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TzP6pGj-mhc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfatPEOhXByRpmq1h85P_wfdRxrIw/photo.jpg?sz=128", "display_name": "deon cagadoes", "link": "https://stackoverflow.com/users/11753371/deon-cagadoes"}, "edited": false, "score": 0, "creation_date": 1564000839, "post_id": 57190829, "comment_id": 100891573, "body": "Looks like you want use DJango ?"}, {"owner": {"reputation": 1, "user_id": 2562500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10de3765460f66084391963e379ec5dc?s=128&d=identicon&r=PG", "display_name": "user2562500", "link": "https://stackoverflow.com/users/2562500/user2562500"}, "reply_to_user": {"reputation": 426, "user_id": 11753371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TzP6pGj-mhc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfatPEOhXByRpmq1h85P_wfdRxrIw/photo.jpg?sz=128", "display_name": "deon cagadoes", "link": "https://stackoverflow.com/users/11753371/deon-cagadoes"}, "edited": false, "score": 0, "creation_date": 1564020796, "post_id": 57190829, "comment_id": 100895877, "body": "maybe, I will learn it just in case, but I really want to use nodejs. Is there a way to do this?"}, {"owner": {"reputation": 426, "user_id": 11753371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TzP6pGj-mhc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfatPEOhXByRpmq1h85P_wfdRxrIw/photo.jpg?sz=128", "display_name": "deon cagadoes", "link": "https://stackoverflow.com/users/11753371/deon-cagadoes"}, "edited": false, "score": 0, "creation_date": 1564040092, "post_id": 57190829, "comment_id": 100901688, "body": "<a href=\"https://medium.com/@HolmesLaurence/integrating-node-and-python-6b8454bfc272\" rel=\"nofollow noreferrer\">medium.com/@HolmesLaurence/&hellip;</a>"}], "owner": {"reputation": 1, "user_id": 2562500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10de3765460f66084391963e379ec5dc?s=128&d=identicon&r=PG", "display_name": "user2562500", "link": "https://stackoverflow.com/users/2562500/user2562500"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1564008272, "creation_date": 1564000409, "last_edit_date": 1564008272, "question_id": 57190829, "link": "https://stackoverflow.com/questions/57190829/using-nodejs-electron-and-calling-python-scripts-how-can-i-create-a-python-obje", "title": "Using nodejs/electron and calling python scripts, how can I create a python object and call different methods from it along the execution?", "body": "<p>I am running an app using nodejs/electron and python.\nI have 4 files: index.html, index.js, index.py and USER.py</p>\n\n<p>In the index.html I have two buttons and a text input for specify an id of a user called 'idUser'.</p>\n\n<p>In the index.js I have:</p>\n\n<pre><code>var spawn = require('child_process').spawn, py = spawn('python', ['index.py']),dataString = '';\n\n    py.stdout.on('data', function(data){\n        dataString += data.toString();\n        console.log(dataString);\n    });  \n\n    py.stdout.on('end', function(){\n       console.log('answer=',dataString);\n    });\n\n    py.stdin.end();\n</code></pre>\n\n<p>In the index.py I have:</p>\n\n<pre><code>from USER import *\nuser=USER('user1','34')\n</code></pre>\n\n<p>And finally, in the USER.py I have:</p>\n\n<pre><code>class USER:\n   id=''\n   name=''\n   age=''\n   def __init__(self,name,age):\n        ....blah blah blah...\n\n   def getName(self,id):\n        ....blah blah blah....\n\n   def getAge(self,id):\n        ....blah blah blah....\n</code></pre>\n\n<p>At the beginning of the execution using javascript (child_process) I create a python object called 'user' executing the javascript file, works perfecty. Now, here is the question:</p>\n\n<p>I want to call <code>user.getName(idUser)</code> or <code>user.getAge(idUser)</code> with the buttons in the HTML whenever I want while I use the application.</p>\n\n<p>Sincerelly I cannot figure out how to use the same object from different javascript files in order to use the information along the app.</p>\n"}, {"tags": ["python", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": true, "score": 2, "last_activity_date": 1564001789, "last_edit_date": 1564001789, "creation_date": 1564000680, "answer_id": 57190881, "question_id": 57190826, "link": "https://stackoverflow.com/questions/57190826/extracting-a-variable-list-of-tags-with-beautifulsoup/57190881#57190881", "title": "Extracting a variable list of tags with Beautifulsoup", "body": "<pre><code>data = '''&lt;p&gt;Cake&lt;/p&gt;&lt;a&gt;Cream&lt;/a&gt;&lt;p&gt;Coffee&lt;/p&gt;'''\n\ndic = ['p', 'a', 'p']\n\nfrom bs4 import BeautifulSoup\n\nsoup = BeautifulSoup(data, 'html.parser')\n\ni = iter(dic)\n\nout = {i: tag.text for i, tag in enumerate(soup.find_all(lambda t: t.name == next(i)))}\n\nprint(out)\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>{0: 'Cake', 1: 'Cream', 2: 'Coffee'}\n</code></pre>\n\n<p>EDIT: Version if there are tags in ResultSet that aren't in search list:</p>\n\n<pre><code>data = '''&lt;span&gt;Don't search this&lt;/span&gt;\n            &lt;p&gt;Cake&lt;/p&gt;\n          &lt;span&gt;Don't search this&lt;/span&gt;\n            &lt;a&gt;Cream&lt;/a&gt;\n            &lt;p&gt;Coffee&lt;/p&gt;'''\n\nlst = ['p', 'a', 'p']\n\nfrom bs4 import BeautifulSoup\n\nsoup = BeautifulSoup(data, 'html.parser')\n\ndef search(lst):\n    lst = lst[:]\n    tag = yield\n    while lst:\n        if lst[0] == tag.name:\n            lst.pop(0)\n            tag = yield True\n            continue\n        tag = yield False\n\nit = search(lst)\nnext(it)\nout = {i: tag.text for i, tag in enumerate(soup.find_all(lambda t: it.send(t)))}\n\nprint(out)\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>{0: 'Cake', 1: 'Cream', 2: 'Coffee'}\n</code></pre>\n\n<p>EDIT 2: Using CSS selector:</p>\n\n<pre><code>data = '''&lt;span&gt;Don't search this&lt;/span&gt;\n            &lt;p&gt;Cake&lt;/p&gt;\n          &lt;span&gt;Don't search this&lt;/span&gt;\n            &lt;a&gt;Cream&lt;/a&gt;\n            &lt;p&gt;Coffee&lt;/p&gt;'''\n\nlst = ['p', 'a', 'p']\n\nfrom bs4 import BeautifulSoup\n\nsoup = BeautifulSoup(data, 'html.parser')\n\nprint({i: tag.text for i, tag in enumerate(soup.select(','.join(lst)))})\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>{0: 'Cake', 1: 'Cream', 2: 'Coffee'}\n</code></pre>\n"}], "owner": {"reputation": 1686, "user_id": 3551483, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/I4c4V.png?s=128&g=1", "display_name": "Fang", "link": "https://stackoverflow.com/users/3551483/fang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 57190881, "answer_count": 1, "score": 1, "last_activity_date": 1564001789, "creation_date": 1564000392, "question_id": 57190826, "link": "https://stackoverflow.com/questions/57190826/extracting-a-variable-list-of-tags-with-beautifulsoup", "title": "Extracting a variable list of tags with Beautifulsoup", "body": "<p>I have the following <code>Resultset</code>:</p>\n\n<pre><code>&lt;p&gt;Cake&lt;/p&gt;&lt;a&gt;Cream&lt;/a&gt;&lt;p&gt;Coffee&lt;/p&gt;\n</code></pre>\n\n<p>I also have a dictionary:</p>\n\n<pre><code>dic[0]='p'\ndic[1]='a'\ndic[2]='p'\n</code></pre>\n\n<p>How can I extract the values of my Resultset using my list? Ideally, I'd like to obtain a dictionary with </p>\n\n<pre><code>dic[0]='Cake'\ndic[1]='Cream'\ndic[2]='Coffee'\n</code></pre>\n\n<p>Basically, I want to search my <code>Resultset</code> continuously for the next tag in my list. I could use <code>find_all</code> but that means I'll manually have to map. </p>\n"}]