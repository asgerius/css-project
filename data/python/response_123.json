[{"tags": ["python"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495065650, "post_id": 44036513, "comment_id": 75099703, "body": "Shell conventions don&#39;t match Python conventions - in the shell, options go <i>first</i>."}], "answers": [{"comments": [{"owner": {"reputation": 6281, "user_id": 472695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1390f4bf73610ec1c7a4850b7c69a123?s=128&d=identicon&r=PG", "display_name": "toriningen", "link": "https://stackoverflow.com/users/472695/toriningen"}, "edited": false, "score": 0, "creation_date": 1495066019, "post_id": 44036549, "comment_id": 75099811, "body": "Do you know how is this convention called?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 6281, "user_id": 472695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1390f4bf73610ec1c7a4850b7c69a123?s=128&d=identicon&r=PG", "display_name": "toriningen", "link": "https://stackoverflow.com/users/472695/toriningen"}, "edited": false, "score": 0, "creation_date": 1495066039, "post_id": 44036549, "comment_id": 75099820, "body": "I don&#39;t think there&#39;s any standard name for it."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1495065790, "creation_date": 1495065790, "answer_id": 44036549, "question_id": 44036513, "link": "https://stackoverflow.com/questions/44036513/is-there-elegant-solution-for-mapping-shell-arguments-to-python-function-argumen/44036549#44036549", "title": "Is there elegant solution for mapping shell arguments to Python function arguments?", "body": "<p>Conventionally, options would go before positional arguments in the shell, and a bare <code>--</code> would mark an explicit end of options and beginning of positional arguments if you need positional arguments that look like options:</p>\n\n<pre><code>./frobnicate.py --quux=\"Quux here\" --buzz=\"Buzz value\" -- --nonsense=1234 bar\n</code></pre>\n"}], "owner": {"reputation": 6281, "user_id": 472695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1390f4bf73610ec1c7a4850b7c69a123?s=128&d=identicon&r=PG", "display_name": "toriningen", "link": "https://stackoverflow.com/users/472695/toriningen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 44036549, "answer_count": 1, "score": 0, "last_activity_date": 1495065790, "creation_date": 1495065492, "question_id": 44036513, "link": "https://stackoverflow.com/questions/44036513/is-there-elegant-solution-for-mapping-shell-arguments-to-python-function-argumen", "title": "Is there elegant solution for mapping shell arguments to Python function arguments?", "body": "<p>Imagine there is this Python function:</p>\n\n<pre><code>def frobnicate(foo, bar, buzz, *, quux, quuz=42, corge=None):\n    pass\n</code></pre>\n\n<p>And I have a converter that makes it possible to call this function from the shell this way:</p>\n\n<pre><code>$ ./frobnicate.py 'I am foo' 'This is bar' --quux=\"Quux here\" --buzz=\"Buzz value\"\n</code></pre>\n\n<p>So, the rules are similar to Python calling syntax conventions \u2014 positional arguments go first, then keyword arguments can follow in an arbitrary order.</p>\n\n<p>The question is \u2014 how can I allow positional arguments that have to start with double dash (<code>--</code>)? E.g. if I wanted to make <code>foo</code> equal to <code>--nonsense=1234</code>, how could I do that without forcing <code>foo</code> to be always specified as keyword argument? Are there are any more or less beautiful ways to do that without breaking the idea?</p>\n"}, {"tags": ["python", "numpy", "scipy"], "comments": [{"owner": {"reputation": 2358, "user_id": 2542091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/67BL1.jpg?s=128&g=1", "display_name": "Aleksander Lidtke", "link": "https://stackoverflow.com/users/2542091/aleksander-lidtke"}, "edited": false, "score": 0, "creation_date": 1495068058, "post_id": 44036484, "comment_id": 75100297, "body": "What&#39;s the <code>College.csv</code> dataset? What is <code>col</code> exactly when the exception is raised?"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1495068063, "post_id": 44036484, "comment_id": 75100299, "body": "When you report a Python error, always include the <i>complete</i> traceback (i.e. the full error message).  It will show which line actually raised the exception.  (In this case, I suspect it is in the call <code>stats.describe(college[col])</code>.)"}], "answers": [{"comments": [{"owner": {"reputation": 1102, "user_id": 5660197, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/97df5665e51bcf688208167c32a7bb4e?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/5660197/tony"}, "edited": false, "score": 0, "creation_date": 1495069163, "post_id": 44036713, "comment_id": 75100513, "body": "Thanks, just a simple oversight!"}], "tags": [], "owner": {"reputation": 5996, "user_id": 5917484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fafd4e82f40f116c5d2466663d8df13?s=128&d=identicon&r=PG&f=1", "display_name": "Tiny.D", "link": "https://stackoverflow.com/users/5917484/tiny-d"}, "is_accepted": true, "score": 0, "last_activity_date": 1495068974, "last_edit_date": 1495068974, "creation_date": 1495066975, "answer_id": 44036713, "question_id": 44036484, "link": "https://stackoverflow.com/questions/44036484/scipy-stats-describe-and-pandas/44036713#44036713", "title": "Scipy Stats.describe and Pandas", "body": "<p>The issue is at the <code>if condition</code>, it cannot ignore the columns <code>\"Unnamed: 0\"</code> and <code>\"Private\"</code>, it will always be True. The <code>stats.describe(college[col])</code> will apply on columns <code>\"Unnamed: 0\"</code> and <code>\"Private\"</code>. You can use <code>not in string list</code> instead to filter them:</p>\n\n<pre><code>if col not in [\"Unnamed: 0\",\"Private\"]\n</code></pre>\n"}], "owner": {"reputation": 1102, "user_id": 5660197, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/97df5665e51bcf688208167c32a7bb4e?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/5660197/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "accepted_answer_id": 44036713, "answer_count": 1, "score": 0, "last_activity_date": 1495068974, "creation_date": 1495065202, "question_id": 44036484, "link": "https://stackoverflow.com/questions/44036484/scipy-stats-describe-and-pandas", "title": "Scipy Stats.describe and Pandas", "body": "<p>I'm exploring the college.csv dataset and getting descriptive stats for each column, and it works if I drop the two categorical columns.  </p>\n\n<pre><code>college = pd.read_csv(\"C:/Users/Temple/ISLR_Datasets/College.csv\")\nfrom scipy import stats\ncollege = college.drop(\"Unnamed: 0\", 1)\ncollege = college.drop(\"Private\", 1)\n\nfor col in college.columns:\n  desc[col] = stats.describe(college[col])\n</code></pre>\n\n<p>But if I try to just ignore the columns and keep the dataset in tact it throws an operand type error:</p>\n\n<pre><code>for col in college.columns:\n  if(col!=\"Unnamed: 0\" or col!=\"Private\"):\n    desc[col] = stats.describe(college[col])\n\nunsupported operand type(s) for /: 'str' and 'int'\n</code></pre>\n\n<p>Any ideas what pandas or numpy is doing differently?</p>\n"}, {"tags": ["python", "ssl", "ssl-certificate", "python-requests"], "answers": [{"tags": [], "owner": {"reputation": 4328, "user_id": 1053021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e2837c81e20dacb4dd3112bf96590b?s=128&d=identicon&r=PG", "display_name": "michaelb958--GoFundMonica", "link": "https://stackoverflow.com/users/1053021/michaelb958-gofundmonica"}, "is_accepted": false, "score": 5, "last_activity_date": 1551400214, "creation_date": 1551400214, "answer_id": 54936302, "question_id": 44036473, "link": "https://stackoverflow.com/questions/44036473/sslerror-unknown-error-ssl-c2825-while-verifying-cer-file-in-python/54936302#54936302", "title": "SSLError: unknown error (_ssl.c:2825). While verifying .cer file in python", "body": "<p>Essentially, yes - this \"unknown error\" is a result of having a <code>.cer</code> file instead of a <code>.pem</code> file. I just ran into this, with a different line number (<code>_ssl.c:4025</code> or so) but otherwise identical symptoms, and using a <code>.pem</code> certificate file instead fixed it.</p>\n\n<p>Courtesy of <a href=\"https://serverfault.com/users/56333/hub\">HUB</a> and <a href=\"https://serverfault.com/users/243796/marcel-friedmann\">Marcel Friedmann</a> on Server Fault, <a href=\"https://serverfault.com/q/254627\">here's how to convert a certificate between those formats:</a></p>\n\n<ul>\n<li><p>Open the certificate file with Notepad++ or similar. If it starts with <code>-----BEGIN CERTIFICATE-----</code>, it's already in the right format - just rename it to <code>.pem</code>.</p></li>\n<li><p>Otherwise, If you have OpenSSL installed, it's a fairly easy matter:</p>\n\n<pre><code>openssl x509 -inform der -in certificate.cer -out certificate.pem\n</code></pre></li>\n<li><p>If you don't have OpenSSL installed, but do have Java's <code>keytool</code>, you can use that, but it's a little convoluted.</p>\n\n<p>First, find a keystore that won't mind some use. If you don't have one, create one:</p>\n\n<pre><code># create a dummy certificate in the file test.keystore, forcing the keystore to be created\nkeytool -genkey -alias test -keystore test.keystore\n# and now delete the cert\nkeytool -delete -alias test -keystore test.keystore\n# the (empty) keystore will still exist\n</code></pre>\n\n<p>Then, import the <code>.cer</code>-format cert:</p>\n\n<pre><code>keytool -import -trustcacerts -alias test -file certificate.cer -keystore test.keystore \n</code></pre>\n\n<p>Finally, export it as <code>.pem</code> (making sure it's actually in the right format):</p>\n\n<pre><code>keytool -exportcert -alias test -file certificate.pem -rfc -keystore test.keystore\n</code></pre></li>\n<li><p>If you don't have OpenSSL or Java <code>keytool</code>, you'll need to install one of them, or find another way.</p></li>\n</ul>\n"}], "owner": {"reputation": 1448, "user_id": 1652185, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/eAfTP.png?s=128&g=1", "display_name": "Codeformer", "link": "https://stackoverflow.com/users/1652185/codeformer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3164, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1551400214, "creation_date": 1495065142, "last_edit_date": 1495069345, "question_id": 44036473, "link": "https://stackoverflow.com/questions/44036473/sslerror-unknown-error-ssl-c2825-while-verifying-cer-file-in-python", "title": "SSLError: unknown error (_ssl.c:2825). While verifying .cer file in python", "body": "<p>I was getting SSL error in python while connecting to a secured url. As a quick work around I passed <code>verify=false</code> and it worked. Later I got the .cer file now that file path is given to verify. Now I get </p>\n\n<blockquote>\n  <p>SSLError: unknown error (_ssl.c:2825)</p>\n</blockquote>\n\n<p>What is the problem? </p>\n\n<p>Is it because I gave .cer instead of .pem?\nCan I convert .cer to .pem file ?</p>\n\n<p>How to fix this problem?</p>\n"}, {"tags": ["python", "apache-kafka", "confluent-platform"], "answers": [{"comments": [{"owner": {"reputation": 484, "user_id": 1084365, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/144307443f1826baa657ce891613235a?s=128&d=identicon&r=PG", "display_name": "Matyas", "link": "https://stackoverflow.com/users/1084365/matyas"}, "edited": false, "score": 0, "creation_date": 1495211139, "post_id": 44041987, "comment_id": 75173658, "body": "Thanks. But how can I do this from a program? Do I really need to use a system call (say in python) to call the shell script?"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1538027857, "post_id": 44041987, "comment_id": 91999860, "body": "Added answer for doing this from Python"}], "tags": [], "owner": {"reputation": 111, "user_id": 7890211, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Jf6wgxn_2tQ/AAAAAAAAAAI/AAAAAAAAD3Q/PPd-4UaAjcI/photo.jpg?sz=128", "display_name": "GeKo", "link": "https://stackoverflow.com/users/7890211/geko"}, "is_accepted": false, "score": 0, "last_activity_date": 1495094736, "creation_date": 1495094736, "answer_id": 44041987, "question_id": 44036398, "link": "https://stackoverflow.com/questions/44036398/setting-topic-log-retention-in-confluent-kafka-python/44041987#44041987", "title": "Setting Topic log retention in confluent-kafka-python", "body": "<p>the retention time is not a property of the producer.\nThe default retention time is set in broker configfile <em>server.properties</em> and properties like <em>log.retention.hours</em>, e.g. /etc/kafka/server.properties ...depending on your installation.</p>\n\n<p>You can alter the retention time on a per topic base via e.g.</p>\n\n<pre><code>$ &lt;path-to-kafka&gt;/bin/kafka-topics.sh --zookeeper &lt;zookeeper-quorum&gt; --alter --topic &lt;topic-name&gt; --config retention.ms=&lt;your-desired-retention-in-ms&gt;\n</code></pre>\n\n<p>HTH....</p>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 6742364, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153732195058323/picture?type=large", "display_name": "Akash Roy Choudhury", "link": "https://stackoverflow.com/users/6742364/akash-roy-choudhury"}, "edited": false, "score": 1, "creation_date": 1559306362, "post_id": 52530334, "comment_id": 99389060, "body": "I know shouldn&#39;t post thank you messages but this answer was super helpful"}, {"owner": {"reputation": 121, "user_id": 5715047, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vBpevEB37jA/AAAAAAAAAAI/AAAAAAAABXY/D4bmDG7XJ7k/photo.jpg?sz=128", "display_name": "Dhiraj Gandhi", "link": "https://stackoverflow.com/users/5715047/dhiraj-gandhi"}, "edited": false, "score": 1, "creation_date": 1609184237, "post_id": 52530334, "comment_id": 115771505, "body": "It says NewTopic has no keyword argument named config. Can you please help. Ty!"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 121, "user_id": 5715047, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vBpevEB37jA/AAAAAAAAAAI/AAAAAAAABXY/D4bmDG7XJ7k/photo.jpg?sz=128", "display_name": "Dhiraj Gandhi", "link": "https://stackoverflow.com/users/5715047/dhiraj-gandhi"}, "edited": false, "score": 1, "creation_date": 1609189781, "post_id": 52530334, "comment_id": 115773330, "body": "@Dhiraj I&#39;m not sure about any updates, but the class is documented from the github repo"}, {"owner": {"reputation": 527, "user_id": 2074859, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2847f6c1d837e6a4a98e8b1064efd9c7?s=128&d=identicon&r=PG", "display_name": "rodoherty1", "link": "https://stackoverflow.com/users/2074859/rodoherty1"}, "edited": false, "score": 0, "creation_date": 1613748871, "post_id": 52530334, "comment_id": 117179991, "body": "From what I can see, the <code>config</code> argument is no longer supported. <a href=\"https://kafka-python.readthedocs.io/en/master/_modules/kafka/admin/client.html#KafkaAdminClient.create_topics\" rel=\"nofollow noreferrer\">kafka-python.readthedocs.io/en/master/_modules/kafka/admin/&hellip;</a>"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 527, "user_id": 2074859, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2847f6c1d837e6a4a98e8b1064efd9c7?s=128&d=identicon&r=PG", "display_name": "rodoherty1", "link": "https://stackoverflow.com/users/2074859/rodoherty1"}, "edited": false, "score": 1, "creation_date": 1613828598, "post_id": 52530334, "comment_id": 117199524, "body": "@rodo This answer is for the Confluent Python library"}], "tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": false, "score": 1, "last_activity_date": 1613829029, "last_edit_date": 1613829029, "creation_date": 1538027831, "answer_id": 52530334, "question_id": 44036398, "link": "https://stackoverflow.com/questions/44036398/setting-topic-log-retention-in-confluent-kafka-python/52530334#52530334", "title": "Setting Topic log retention in confluent-kafka-python", "body": "<p>Retention time is set when you create a topic, not on the producer configuration.</p>\n<p>If your <code>server.properties</code> allows for auto-topic creation, then you will get the defaults set in there.</p>\n<p>Otherwise, you can use the <a href=\"https://github.com/confluentinc/confluent-kafka-python/blob/v0.11.5/examples/adminapi.py#L30-L48\" rel=\"nofollow noreferrer\">AdminClient API</a> to send a <code>NewTopic</code> request which supports a <code>config</code> attribute of <code>dict&lt;str,str&gt;</code></p>\n<pre><code>from confluent_kafka.admin import AdminClient, NewTopic\n\n# a = AdminClient(...) \n\ntopics = list()\nt = NewTopic(topic, num_partitions=3, replication_factor=1, config={'log.retention.hours': '168'})\ntopics.append(t)\n\n# Call create_topics to asynchronously create topics, a dict\n# of &lt;topic,future&gt; is returned.\nfs = a.create_topics(topics)\n\n# Wait for operation to finish.\n# Timeouts are preferably controlled by passing request_timeout=15.0\n# to the create_topics() call.\n# All futures will finish at the same time.\nfor topic, f in fs.items():\n    try:\n        f.result()  # The result itself is None\n        print(&quot;Topic {} created&quot;.format(topic))\n    except Exception as e:\n        print(&quot;Failed to create topic {}: {}&quot;.format(topic, e))\n</code></pre>\n<p>In the same link, you can find an alter topic request</p>\n"}], "owner": {"reputation": 484, "user_id": 1084365, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/144307443f1826baa657ce891613235a?s=128&d=identicon&r=PG", "display_name": "Matyas", "link": "https://stackoverflow.com/users/1084365/matyas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1745, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1613829029, "creation_date": 1495064621, "last_edit_date": 1538028088, "question_id": 44036398, "link": "https://stackoverflow.com/questions/44036398/setting-topic-log-retention-in-confluent-kafka-python", "title": "Setting Topic log retention in confluent-kafka-python", "body": "<p>I could not find in the documentation how to set the retention time when creating a producer using confluent-kafka.</p>\n\n<p>If I just specify 'bootstrap-servers' the default retention time is 1 day. I would like to be able to change that.</p>\n\n<p>(I want to do this in the python API not on the command line.)</p>\n"}, {"tags": ["python", "python-2.7", "numpy", "matplotlib"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1495065262, "post_id": 44036372, "comment_id": 75099602, "body": "the error doesn&#39;t seem to come from <code>matplotlib</code> but rather the error message suggests &quot;<code>Most likely you are trying to import a failed build of numpy.</code>&quot;. Have you installed <code>numpy</code>?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 8261, "user_id": 453463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5032614561a63651efc89912eb5a9e?s=128&d=identicon&r=PG", "display_name": "cgohlke", "link": "https://stackoverflow.com/users/453463/cgohlke"}, "edited": false, "score": 1, "creation_date": 1495200712, "post_id": 44036372, "comment_id": 75166832, "body": "@cgohlke The strategy you describe has never worked for me. It is therefore great to have the precompiled packages available on your site for manual download; I use them for every library update available."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 8261, "user_id": 453463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5032614561a63651efc89912eb5a9e?s=128&d=identicon&r=PG", "display_name": "cgohlke", "link": "https://stackoverflow.com/users/453463/cgohlke"}, "edited": false, "score": 1, "creation_date": 1495286715, "post_id": 44036372, "comment_id": 75194972, "body": "@cgohlke This may not be the best place to discuss this, but to give an example: This morning I updated matplotlib from version 2.0.0 to 2.0.2. This version needs a newer version of numpy than I had previously. So during the matplotlib install with pip it collected numpy 1.12 and installed it. After that nothing was working anymore. What I needed to do is download the respective wheels from your site, install numpy wheel and then matplotlib wheel and now everything works fine. So for some reason pip did not collect the correct numpy version, thus it&#39;s good to have the wheels available."}], "answers": [{"comments": [{"owner": {"reputation": 4815, "user_id": 4194079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cOfnc.jpg?s=128&g=1", "display_name": "keepAlive", "link": "https://stackoverflow.com/users/4194079/keepalive"}, "edited": false, "score": 0, "creation_date": 1495199295, "post_id": 44036421, "comment_id": 75165792, "body": "I am curious of this -1. I would be glad to know why since <b><i>this works (tested in Windows10 64 bits) and adresses the question</i></b>."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1495199949, "post_id": 44036421, "comment_id": 75166251, "body": "I think someone just downvoted all the answers and the question for no obvious reason. That can happen, don&#39;t spend too much time thinking about it. Btw. I did not upvote yours because the question already tells us that he has all the packages available (thus no reason to downvote, but also not exactly a very good answer either)."}], "tags": [], "owner": {"reputation": 4815, "user_id": 4194079, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cOfnc.jpg?s=128&g=1", "display_name": "keepAlive", "link": "https://stackoverflow.com/users/4194079/keepalive"}, "is_accepted": false, "score": 0, "last_activity_date": 1495073805, "last_edit_date": 1495073805, "creation_date": 1495064786, "answer_id": 44036421, "question_id": 44036372, "link": "https://stackoverflow.com/questions/44036372/installing-matplotlib-in-windows-10-64bits/44036421#44036421", "title": "Installing Matplotlib in Windows 10 64bits", "body": "<p>This is a <a href=\"http://pythonforengineers.com/stop-struggling-with-python-on-windows/\" rel=\"nofollow noreferrer\">common issue for windows users</a>. And you will probably need precompiled packages for some other libraries as well, e.g. scipy.</p>\n\n<p>You will find on <a href=\"https://sourceforge.net/projects/numpy/files/NumPy/\" rel=\"nofollow noreferrer\">SourceForge</a> the numpy superpack whose name structure is <em>numpy-X.X.X-win32-superpack-python2.7.exe</em>, e.g. <a href=\"https://sourceforge.net/projects/numpy/files/NumPy/1.9.2/numpy-1.9.2-win32-superpack-python2.7.exe/download\" rel=\"nofollow noreferrer\">numpy-1.9.2-win32-superpack-python2.7</a>. </p>\n\n<p>On <a href=\"https://pypi.python.org/pypi/matplotlib/\" rel=\"nofollow noreferrer\">Pypi</a> (Python Package Index), you will find the matplotlib library, whose name structure is <em>matplotlib-X.X.X.win32-py2.7.exe</em>, e.g <a href=\"https://pypi.python.org/packages/36/bc/ccf5b27210ac64215cc9083376f716c9bba570a17119cd9ea8cdeed22826/matplotlib-1.4.3.win32-py2.7.exe#md5=f43c20480a1673185afefc7d4848a1d2\" rel=\"nofollow noreferrer\">matplotlib-1.4.3.win32-py2.7.exe</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 0, "last_activity_date": 1495094376, "creation_date": 1495094376, "answer_id": 44041879, "question_id": 44036372, "link": "https://stackoverflow.com/questions/44036372/installing-matplotlib-in-windows-10-64bits/44041879#44041879", "title": "Installing Matplotlib in Windows 10 64bits", "body": "<p>Installing matplotlib through pip by automatically downloading the files from the python index as you're trying to do here will most probably fail for windows. </p>\n\n<p>There are two main options:</p>\n\n<ol>\n<li><p>Install a complete distribution like Anaconda, Canopy, WinPython, etc. which already has all the respective libraries included.</p></li>\n<li><p>Use precompiled wheels. A source for those is indeed <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"nofollow noreferrer\">this site</a> by Christoph Gohlke. You would then need to make sure to install all dependencies first and matplotlib last. Starting with numpy is the best, then other dependencies, matplotlib last. To install those use</p>\n\n<pre><code>pip install &lt;filename of wheel&gt;\n</code></pre>\n\n<p>e.g. </p>\n\n<pre><code>pip install numpy\u20111.13.0rc1+mkl\u2011cp27\u2011cp27m\u2011win_amd64.whl\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 5513436, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208054244025015/picture?type=large", "display_name": "Edu Fer", "link": "https://stackoverflow.com/users/5513436/edu-fer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 12711, "favorite_count": 0, "protected_date": 1504900492, "answer_count": 2, "score": 0, "last_activity_date": 1610175865, "creation_date": 1495064427, "last_edit_date": 1504856658, "question_id": 44036372, "link": "https://stackoverflow.com/questions/44036372/installing-matplotlib-in-windows-10-64bits", "title": "Installing Matplotlib in Windows 10 64bits", "body": "<p>Could anyone tell me what files I should download and which statements I must execute in the command line to install Matplotlib?</p>\n\n<p>I have Python 2.7.13 on Windows 10 64 bit.<br>\nThese are the files I unzipped:<br>\n<img src=\"https://i.stack.imgur.com/su4yF.jpg\" alt=\"enter image description here\"></p>\n\n<p>All downloaded from: <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy\" rel=\"nofollow noreferrer\">http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy</a></p>\n\n<p>Commands I executed:</p>\n\n<pre><code>python -m pip install -U pip setuptools\npython -m pip install matplotlib\n\npython -m pip install -U pip\n</code></pre>\n\n<p>I am getting these two errors when checking if Numpy and Matplotlib are installed.</p>\n\n<pre><code>&gt;&gt;&gt; import numpy\n\n**Traceback (most recent call last):\n  File \"&lt;pyshell#3&gt;\", line 1, in &lt;module&gt;\n    import numpy\n  File \"numpy\\__init__.py\", line 142, in &lt;module&gt;\n    from . import add_newdocs\n  File \"numpy\\add_newdocs.py\", line 13, in &lt;module&gt;\n    from numpy.lib import add_newdoc\n   File \"numpy\\lib\\__init__.py\", line 8, in &lt;module&gt;\n    from .type_check import *\n  File \"numpy\\lib\\type_check.py\", line 11, in &lt;module&gt;\n    import numpy.core.numeric as _nx\n  File \"numpy\\core\\__init__.py\", line 26, in &lt;module&gt;\n    raise ImportError(msg)\nImportError: \nImporting the multiarray numpy extension module failed.  Most\nlikely you are trying to import a failed build of numpy.\nIf you're working with a numpy git repo, try `git clean -xdf` (removes   all\nfiles not under version control).  Otherwise reinstall numpy.\nOriginal error was: DLL load failed: %1 no es una aplicaci\u00f3n Win32     v\u00e1lida.**\n\n&gt;&gt;&gt; import matplotlib\n\nTraceback (most recent call last):\n  File \"&lt;pyshell#4&gt;\", line 1, in &lt;module&gt;\n    import matplotlib\n  File \"matplotlib\\__init__.py\", line 122, in &lt;module&gt;\n    from matplotlib.cbook import is_string_like, mplDeprecation, dedent,     get_label\n  File \"matplotlib\\cbook.py\", line 33, in &lt;module&gt;\nimport numpy as np\n  File \"numpy\\__init__.py\", line 142, in &lt;module&gt;\n    from . import add_newdocs\n  File \"numpy\\add_newdocs.py\", line 13, in &lt;module&gt;\n    from numpy.lib import add_newdoc\n  File \"numpy\\lib\\__init__.py\", line 8, in &lt;module&gt;\n    from .type_check import *\n  File \"numpy\\lib\\type_check.py\", line 11, in &lt;module&gt;\n    import numpy.core.numeric as _nx\n  File \"numpy\\core\\__init__.py\", line 26, in &lt;module&gt;\n    raise ImportError(msg)\nImportError: \nImporting the multiarray numpy extension module failed.  Most\nlikely you are trying to import a failed build of numpy.\nIf you're working with a numpy git repo, try `git clean -xdf` (removes     all\nfiles not under version control).  Otherwise reinstall numpy.\n\nOriginal error was: DLL load failed: %1 no es una aplicaci\u00f3n Win32     v\u00e1lida.\n</code></pre>\n"}, {"tags": ["python", "input"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 2, "creation_date": 1495064250, "post_id": 44036347, "comment_id": 75099351, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 2, "creation_date": 1495064303, "post_id": 44036347, "comment_id": 75099363, "body": "Also, please note that this is <i>not</i> a time-critical consulting service.  If you have an immediate need, perhaps you should go to a more active Q&amp;A site; SO is built as a solutions archive."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1495064397, "post_id": 44036347, "comment_id": 75099385, "body": "Finally, please describe your problem as outlined in the posting guidelines: input you gave, result, result you want, and progress in your debugging work."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 4, "creation_date": 1495064413, "post_id": 44036347, "comment_id": 75099389, "body": "perhaps you are wanting to use <code>sys.stdin.read()</code> which will read until EOF ... <code>raw_input</code> will only read until a linebreak is encountered"}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 6833685, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1644154565897087/picture?type=large", "display_name": "Yossef Nagy", "link": "https://stackoverflow.com/users/6833685/yossef-nagy"}, "edited": false, "score": 0, "creation_date": 1495064816, "post_id": 44036391, "comment_id": 75099477, "body": "i know is there is another way of taking the input after the newline/linebreak"}, {"owner": {"reputation": 1586, "user_id": 3194722, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/kWpYQ.jpg?s=128&g=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/3194722/jeremy"}, "reply_to_user": {"reputation": 159, "user_id": 6833685, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1644154565897087/picture?type=large", "display_name": "Yossef Nagy", "link": "https://stackoverflow.com/users/6833685/yossef-nagy"}, "edited": false, "score": 0, "creation_date": 1495064900, "post_id": 44036391, "comment_id": 75099495, "body": "@YossefNagy I think this answer might help you: <a href=\"http://stackoverflow.com/a/20511221/3194722\">stackoverflow.com/a/20511221/3194722</a> :)"}, {"owner": {"reputation": 159, "user_id": 6833685, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1644154565897087/picture?type=large", "display_name": "Yossef Nagy", "link": "https://stackoverflow.com/users/6833685/yossef-nagy"}, "edited": false, "score": 0, "creation_date": 1495080742, "post_id": 44036391, "comment_id": 75103186, "body": "Thanks that helped"}, {"owner": {"reputation": 1586, "user_id": 3194722, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/kWpYQ.jpg?s=128&g=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/3194722/jeremy"}, "reply_to_user": {"reputation": 159, "user_id": 6833685, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1644154565897087/picture?type=large", "display_name": "Yossef Nagy", "link": "https://stackoverflow.com/users/6833685/yossef-nagy"}, "edited": false, "score": 0, "creation_date": 1495096206, "post_id": 44036391, "comment_id": 75110818, "body": "Awesome. If you liked the responses you could upvote and accept this as the answer to close the question, please."}], "tags": [], "owner": {"reputation": 1586, "user_id": 3194722, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/kWpYQ.jpg?s=128&g=1", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/3194722/jeremy"}, "is_accepted": true, "score": 0, "last_activity_date": 1495064587, "creation_date": 1495064587, "answer_id": 44036391, "question_id": 44036347, "link": "https://stackoverflow.com/questions/44036347/raw-input-isnt-receiving-too-much-input/44036391#44036391", "title": "raw_input isn&#39;t receiving too much input", "body": "<p>As from the docs for <code>raw_input()</code> at <a href=\"https://docs.python.org/2/library/functions.html#raw_input\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/functions.html#raw_input</a></p>\n\n<blockquote>\n  <p>The function then reads a line from input, converts it to a string <strong>(stripping a trailing newline)</strong>, and returns that.</p>\n</blockquote>\n\n<p><code>raw_input()</code> does not take anything after the newline/linebreak.</p>\n"}], "owner": {"reputation": 159, "user_id": 6833685, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1644154565897087/picture?type=large", "display_name": "Yossef Nagy", "link": "https://stackoverflow.com/users/6833685/yossef-nagy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 44036391, "answer_count": 1, "score": -2, "last_activity_date": 1495064587, "creation_date": 1495064199, "question_id": 44036347, "link": "https://stackoverflow.com/questions/44036347/raw-input-isnt-receiving-too-much-input", "title": "raw_input isn&#39;t receiving too much input", "body": "<p>This is a pretty cool code except for raw_input isn't receiving too much input i want to receive input like 5000 chars help any ideas please quick </p>\n\n<pre><code> import re\n    test_cases =  int(raw_input(\"\"))\n    input_lens = raw_input(\"\")\n    i = 0\n    for i in range(0,test_cases+1):\n        user_input = raw_input(\"\")\n        user_input = re.findall(\"\\d*\",user_input)\n        count = 0\n        for item in user_input:\n            if item.isdigit():\n                count += 1\n        print count\n        i += 1\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "hive", "pyspark", "apache-spark-sql"], "comments": [{"owner": {"reputation": 2959, "user_id": 6933215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BQEhb.jpg?s=128&g=1", "display_name": "Pushkr", "link": "https://stackoverflow.com/users/6933215/pushkr"}, "edited": false, "score": 1, "creation_date": 1495071601, "post_id": 44036307, "comment_id": 75101050, "body": "The minimum page size i.e. minimum read /write unit of parquet is defined by property <code>parquet.page.size</code> which defaults to 1048576. Its possible that data your are trying to write falls under this threshold. Thats why is throwing error may be? this is just my speculation... <a href=\"https://github.com/Parquet/parquet-mr/blob/fa8957d7939b59e8d391fa17000b34e865de015d/parquet-hadoop/src/main/java/parquet/hadoop/ParquetOutputFormat.java#L64\" rel=\"nofollow noreferrer\">check this out</a>"}, {"owner": {"reputation": 6155, "user_id": 4403872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22f9db7dbd564a7d34f76a0f3f5fbb04?s=128&d=identicon&r=PG&f=1", "display_name": "vk1011", "link": "https://stackoverflow.com/users/4403872/vk1011"}, "reply_to_user": {"reputation": 2959, "user_id": 6933215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BQEhb.jpg?s=128&g=1", "display_name": "Pushkr", "link": "https://stackoverflow.com/users/6933215/pushkr"}, "edited": false, "score": 0, "creation_date": 1495146315, "post_id": 44036307, "comment_id": 75142413, "body": "Thanks for the link. Tried your suggestion by playing with the <code>parquet.page.size</code> and <code>parquet.block.size</code> configurations, as well as by just multiplying the size of my data, but no luck. Same error :("}], "answers": [{"tags": [], "owner": {"reputation": 6155, "user_id": 4403872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22f9db7dbd564a7d34f76a0f3f5fbb04?s=128&d=identicon&r=PG&f=1", "display_name": "vk1011", "link": "https://stackoverflow.com/users/4403872/vk1011"}, "is_accepted": true, "score": 3, "last_activity_date": 1495159312, "creation_date": 1495159312, "answer_id": 44060288, "question_id": 44036307, "link": "https://stackoverflow.com/questions/44036307/memory-allocation-issue-in-writing-spark-dataframe-to-hive-table/44060288#44060288", "title": "Memory allocation issue in writing Spark DataFrame to Hive table", "body": "<p>It turns out I was partitioning with a nullable field that was throwing the <code>.saveAsTable()</code> off. When I was converting the RDD to a Spark DataFrame, the schema I was providing was generated like this:</p>\n\n<pre><code>from pyspark.sql.types import *\n\n# Define schema\nmy_schema = StructType(\n                    [StructField('col_a_str', StringType(), False),\n                     StructField('col_b_num', DoubleType(), True),\n                     StructField('col_c_num', DoubleType(), True),\n                     StructField('partition_d_str', StringType(), False),\n                     StructField('partition_e_str', StringType(), True)])\n\n# Convert RDD to Spark DataFrame\nsdf = sqlContext.createDataFrame(my_rdd, schema=my_schema)\n</code></pre>\n\n<p>Since <code>partition_e_str</code> was declared as <code>nullable=True</code> (the third argument for that <code>StructField</code>), it had issues when writing to the Hive table because it was being used as one of the partitioning fields. I changed it to:</p>\n\n<pre><code># Define schema\nmy_schema = StructType(\n                    [StructField('col_a_str', StringType(), False),\n                     StructField('col_b_num', DoubleType(), True),\n                     StructField('col_c_num', DoubleType(), True),\n                     StructField('partition_d_str', StringType(), False),\n                     StructField('partition_e_str', StringType(), False)])\n</code></pre>\n\n<p>and all was well again!</p>\n\n<p>Lesson: Make sure your partitioning fields are not nullable!</p>\n"}], "owner": {"reputation": 6155, "user_id": 4403872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/22f9db7dbd564a7d34f76a0f3f5fbb04?s=128&d=identicon&r=PG&f=1", "display_name": "vk1011", "link": "https://stackoverflow.com/users/4403872/vk1011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1935, "favorite_count": 1, "accepted_answer_id": 44060288, "answer_count": 1, "score": 4, "last_activity_date": 1495159312, "creation_date": 1495063888, "question_id": 44036307, "link": "https://stackoverflow.com/questions/44036307/memory-allocation-issue-in-writing-spark-dataframe-to-hive-table", "title": "Memory allocation issue in writing Spark DataFrame to Hive table", "body": "<p>I am trying to save a Spark DataFrame to a Hive table (Parquet) with <code>.saveAsTable()</code> in pySpark, but keep running in to memory issues like below:</p>\n\n<pre><code>org.apache.hadoop.hive.ql.metadata.HiveException: parquet.hadoop.MemoryManager$1:\nNew Memory allocation 1034931 bytes is smaller than the minimum allocation size of 1048576 bytes.\n</code></pre>\n\n<p>The first number (<code>1034931</code>) generally keeps changing in different runs. I recognize the second number (<code>1048576</code>) is <code>1024^2</code>, but I have little idea what that means here.</p>\n\n<p>I have been using the exact same technique for a few other of my projects (with much larger DataFrames), and it has worked without issue. Here I have essentially copy-pasted the structure of the process and configuration but runs in to the memory problem! It must be something trivial I am missing.</p>\n\n<p>The Spark DataFrame (let's call it <code>sdf</code>) has the structure (~10 columns and ~300k rows, but could be more if this runs correctly):</p>\n\n<pre><code>+----------+----------+----------+---------------+---------------+\n| col_a_str| col_b_num| col_c_num|partition_d_str|partition_e_str|\n+----------+----------+----------+---------------+---------------+\n|val_a1_str|val_b1_num|val_c1_num|     val_d1_str|     val_e1_str|\n|val_a2_str|val_b2_num|val_c2_num|     val_d2_str|     val_e2_str|\n|       ...|       ...|       ...|            ...|            ...|\n+----------+----------+----------+---------------+---------------+\n</code></pre>\n\n<p>The Hive table was created like this:</p>\n\n<pre><code>sqlContext.sql(\"\"\"\n                    CREATE TABLE IF NOT EXISTS my_hive_table (\n                        col_a_str string,\n                        col_b_num double,\n                        col_c_num double\n                    ) \n                    PARTITIONED BY (partition_d_str string,\n                                    partition_e_str string)\n                    STORED AS PARQUETFILE\n               \"\"\")\n</code></pre>\n\n<p>The attempt at inserting data to this table is with the following command:</p>\n\n<pre><code>sdf.write \\\n   .mode('append') \\\n   .partitionBy('partition_d_str', 'partition_e_str') \\\n   .saveAsTable('my_hive_table')\n</code></pre>\n\n<p>The Spark/Hive configuration is like this:</p>\n\n<pre><code>spark_conf = pyspark.SparkConf()\nspark_conf.setAppName('my_project')\n\nspark_conf.set('spark.executor.memory', '16g')\nspark_conf.set('spark.python.worker.memory', '8g')\nspark_conf.set('spark.yarn.executor.memoryOverhead', '15000')\nspark_conf.set('spark.dynamicAllocation.maxExecutors', '64')\nspark_conf.set('spark.executor.cores', '4')\n\nsc = pyspark.SparkContext(conf=spark_conf)\n\nsqlContext = pyspark.sql.HiveContext(sc)\nsqlContext.setConf('hive.exec.dynamic.partition', 'true')\nsqlContext.setConf('hive.exec.max.dynamic.partitions', '5000')\nsqlContext.setConf('hive.exec.dynamic.partition.mode', 'nonstrict')\nsqlContext.setConf('hive.exec.compress.output', 'true')\n</code></pre>\n\n<p>I have tried changing the <code>.partitionBy('partition_d_str', 'partition_e_str')</code> to <code>.partitionBy(['partition_d_str', 'partition_e_str'])</code>, increasing memory, splitting the DataFrame to smaller chunks, re-creating the tables and DataFrame, but nothing seems to work. I can't find any solutions online either. What would be causing the memory error (I don't fully understand where it's coming from either), and how can I change my code to write to the Hive table? Thanks.</p>\n"}, {"tags": ["python", "python-3.x", "arduino"], "comments": [{"owner": {"reputation": 171, "user_id": 5971855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UAKeO.jpg?s=128&g=1", "display_name": "ryugie", "link": "https://stackoverflow.com/users/5971855/ryugie"}, "edited": false, "score": 1, "creation_date": 1495063719, "post_id": 44036266, "comment_id": 75099212, "body": "you should <code>print(DataArray)</code> and see what it actually looks like"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1495063733, "post_id": 44036266, "comment_id": 75099216, "body": "The error means there&#39;s only one element in <code>DataArray</code>, which means there&#39;s no comma in <code>DataString</code>. Try printing it to see what it really contains."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1495063775, "post_id": 44036266, "comment_id": 75099227, "body": "What is the value of <code>DataString</code>? Are you aware that <code>[1]</code> gives you the second array element?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1495063808, "post_id": 44036266, "comment_id": 75099233, "body": "@DietrichEpp I think he&#39;s trying to get the microphone value, which should be the second element."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1495063858, "post_id": 44036266, "comment_id": 75099248, "body": "Fix the code indentation in the question. I suspect everything is supposed to be inside the <code>while True:</code> loop."}, {"owner": {"reputation": 5, "user_id": 2506317, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BsPu.jpg?s=128&g=1", "display_name": "Hammad Ullah", "link": "https://stackoverflow.com/users/2506317/hammad-ullah"}, "reply_to_user": {"reputation": 171, "user_id": 5971855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UAKeO.jpg?s=128&g=1", "display_name": "ryugie", "link": "https://stackoverflow.com/users/5971855/ryugie"}, "edited": false, "score": 0, "creation_date": 1495063918, "post_id": 44036266, "comment_id": 75099261, "body": "@ryugie This is what I get after print(DataArray)  [&#39;21.48&#39;, &#39;392.00\\n&#39;] [&#39;\\r\\n&#39;]"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 2506317, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BsPu.jpg?s=128&g=1", "display_name": "Hammad Ullah", "link": "https://stackoverflow.com/users/2506317/hammad-ullah"}, "edited": false, "score": 0, "creation_date": 1495064466, "post_id": 44036346, "comment_id": 75099397, "body": "But print(DataArray[0]) is giving me just the value of one sensor."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 5, "user_id": 2506317, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BsPu.jpg?s=128&g=1", "display_name": "Hammad Ullah", "link": "https://stackoverflow.com/users/2506317/hammad-ullah"}, "edited": false, "score": 0, "creation_date": 1495066226, "post_id": 44036346, "comment_id": 75099876, "body": "The result you listed form the <code>print</code> statement is two separate lists; I took this as the output on successive iterations of your loop.  If this is not the case, please correct that comment, and edit the proper result into your question.  It&#39;s hard to give you a complete answer when we keep getting incomplete data."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1495064172, "creation_date": 1495064172, "answer_id": 44036346, "question_id": 44036266, "link": "https://stackoverflow.com/questions/44036266/indexerror-list-index-out-of-range-i-think-issue-with-split-in-python-3-6/44036346#44036346", "title": "IndexError: list index out of range (I think issue with split(&#39;,&#39;) in python 3.6)", "body": "<blockquote>\n  <p>This is what I get after print(DataArray) ['21.48', '392.00\\n']\n  ['\\r\\n']</p>\n</blockquote>\n\n<p>There's your problem: the second <code>DataArray</code> has only one element, the string '\\r\\n', which would be <code>DataArray[0]</code>.  Subscript 1 is out of range.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 2506317, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BsPu.jpg?s=128&g=1", "display_name": "Hammad Ullah", "link": "https://stackoverflow.com/users/2506317/hammad-ullah"}, "edited": false, "score": 0, "creation_date": 1495064555, "post_id": 44036370, "comment_id": 75099412, "body": "I already know about this. DataArray[0] is giving me just one sensor value i.e 25.9"}, {"owner": {"reputation": 11, "user_id": 7988781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7481603db0428bce6f4f67eb58ad2d45?s=128&d=identicon&r=PG", "display_name": "Kurt", "link": "https://stackoverflow.com/users/7988781/kurt"}, "reply_to_user": {"reputation": 5, "user_id": 2506317, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BsPu.jpg?s=128&g=1", "display_name": "Hammad Ullah", "link": "https://stackoverflow.com/users/2506317/hammad-ullah"}, "edited": false, "score": 0, "creation_date": 1495064875, "post_id": 44036370, "comment_id": 75099490, "body": "of course, sorry I missed that. Your result is multi-dimensional, the first item is a tuple. Python decodes into tuple arrays (look up &#39;tuple&#39; if you have not used them before). So try DataArray[0][0] and DataArray[0][1] to access both items in the first entry."}, {"owner": {"reputation": 5, "user_id": 2506317, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BsPu.jpg?s=128&g=1", "display_name": "Hammad Ullah", "link": "https://stackoverflow.com/users/2506317/hammad-ullah"}, "edited": false, "score": 0, "creation_date": 1495065715, "post_id": 44036370, "comment_id": 75099714, "body": "Still not solved. Only displaying 3 and 9 which is quite strange for me."}], "tags": [], "owner": {"reputation": 11, "user_id": 7988781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7481603db0428bce6f4f67eb58ad2d45?s=128&d=identicon&r=PG", "display_name": "Kurt", "link": "https://stackoverflow.com/users/7988781/kurt"}, "is_accepted": false, "score": 0, "last_activity_date": 1495064421, "creation_date": 1495064421, "answer_id": 44036370, "question_id": 44036266, "link": "https://stackoverflow.com/questions/44036266/indexerror-list-index-out-of-range-i-think-issue-with-split-in-python-3-6/44036370#44036370", "title": "IndexError: list index out of range (I think issue with split(&#39;,&#39;) in python 3.6)", "body": "<p>python arrays start at index '0', zero relative (indexes are 0,1,2, etc). This reflects offset from the start of the array, the first item is always offset of 0.</p>\n\n<p>so if you just have one result it is in DataArray[0]. Try printing that.</p>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 2506317, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BsPu.jpg?s=128&g=1", "display_name": "Hammad Ullah", "link": "https://stackoverflow.com/users/2506317/hammad-ullah"}, "is_accepted": true, "score": 0, "last_activity_date": 1495070337, "creation_date": 1495070337, "answer_id": 44037108, "question_id": 44036266, "link": "https://stackoverflow.com/questions/44036266/indexerror-list-index-out-of-range-i-think-issue-with-split-in-python-3-6/44037108#44037108", "title": "IndexError: list index out of range (I think issue with split(&#39;,&#39;) in python 3.6)", "body": "<p>Finally I figured it out. There was a little bit problem in Arduino code. Arduino was providing the result like this [float,float\\n] which was causing problem. After removing \"\\n\", the problem get solved and the python code is working flwaless. I'm able to print(DataArray[1]) now.</p>\n"}], "owner": {"reputation": 5, "user_id": 2506317, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9BsPu.jpg?s=128&g=1", "display_name": "Hammad Ullah", "link": "https://stackoverflow.com/users/2506317/hammad-ullah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 0, "accepted_answer_id": 44037108, "answer_count": 3, "score": -1, "last_activity_date": 1495071485, "creation_date": 1495063586, "last_edit_date": 1495067190, "question_id": 44036266, "link": "https://stackoverflow.com/questions/44036266/indexerror-list-index-out-of-range-i-think-issue-with-split-in-python-3-6", "title": "IndexError: list index out of range (I think issue with split(&#39;,&#39;) in python 3.6)", "body": "<p>I'm totally new to python. I'm reading two sensor (temperature and microphone) values from Arduino UNO. The data format is like 25.3,392.9 (temperature value and microphone value respectively). The data I get through serial communication is stored in a string called \"DataArray\". Whenever I try to output DataArray[1], it gives me an error.</p>\n\n<pre><code>import serial\nimport matplotlib.pyplot as plt\nimport numpy\nfrom drawnow import *\nfrom tkinter import *\n\narduinoData = serial.Serial('/dev/cu.usbmodemFD121', 9600)\n\nwhile True:\n  while (arduinoData.inWaiting()==0):\n    pass\n\n  DataString = arduinoData.readline()\n\n  DataArray = DataString.decode().split(',')\n\n\n  print(DataArray[1])\n</code></pre>\n\n<p>This is what I get from inserting </p>\n\n<pre><code>print(DataArray)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['21.48', '392.00\\n'] \n['\\r\\n']\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "nlp"], "answers": [{"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 3, "last_activity_date": 1495065159, "last_edit_date": 1495065159, "creation_date": 1495063743, "answer_id": 44036283, "question_id": 44036229, "link": "https://stackoverflow.com/questions/44036229/how-to-filter-out-list-of-lists-which-doesnt-contain-elements-from-other-list/44036283#44036283", "title": "How to filter out list of lists which doesn&#39;t contain elements from other list?", "body": "<p>Your condition here:</p>\n\n<pre><code>if all(i in j[1] for i in a):\n</code></pre>\n\n<p>Is asking if <em>all</em> of the tags in a are in <code>j[1]</code>!, And then appending only <em>that item</em>. but at most <em>one</em> will be (given your data), which is why you are getting an empty list. Rather, you want:</p>\n\n<pre><code>In [32]: from operator import itemgetter\n    ...: list1=[]\n    ...: a = ['VBG', 'RB', 'NNP']\n    ...: for sub in data:\n    ...:     tags = set(map(itemgetter(1), sub))\n    ...:     if all(s in tags for s in a):\n    ...:         list1.append(sub)\n    ...:\n</code></pre>\n\n<p>This checks if *all the items in <code>a</code> are in the set of <code>tags</code> form the sublist...</p>\n\n<pre><code>In [33]: list1\nOut[33]:\n[[('User', 'NNP'),\n  ('is', 'VBG'),\n  ('not', 'RB'),\n  ('able', 'JJ'),\n  ('to', 'TO'),\n  ('order', 'NN'),\n  ('products', 'NNS'),\n  ('from', 'IN'),\n  ('iShopCatalog', 'NN'),\n  ('Coala', 'NNP'),\n  ('excluding', 'VBG'),\n  ('articles', 'NNS'),\n  ('from', 'IN'),\n  ('VWR', 'NNP')],\n [('But', 'CC'),\n  ('articles', 'NNP'),\n  ('from', 'VBG'),\n  ('all', 'RB'),\n  ('other', 'JJ'),\n  ('suppliers', 'NNS'),\n  ('are', 'NNP'),\n  ('not', 'VBG'),\n  ('orderable', 'RB')]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495064452, "post_id": 44036315, "comment_id": 75099393, "body": "I thought OP wanted that at first, but look at the desired output carefully!"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495065877, "post_id": 44036315, "comment_id": 75099770, "body": "Right. Changed it to something even more crazy :)"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1495066028, "post_id": 44036315, "comment_id": 75099814, "body": "Heh, nice! I would use <code>set(map(itemgetter(1), x))</code> instead of <code>set(dict(x).values())</code>, which is a little less crazy :), and on Python 3, you could actually just use <code>dict(x).values()</code>, because the values-view supports set operations!"}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 2, "last_activity_date": 1495065852, "last_edit_date": 1495065852, "creation_date": 1495063982, "answer_id": 44036315, "question_id": 44036229, "link": "https://stackoverflow.com/questions/44036229/how-to-filter-out-list-of-lists-which-doesnt-contain-elements-from-other-list/44036315#44036315", "title": "How to filter out list of lists which doesn&#39;t contain elements from other list?", "body": "<p>This solution may look totally weird, but it works:</p>\n\n<pre><code>a = set(a)\ndef match(x):\n  words,tags = zip(*x)\n  return set(tags) &amp; a == a\nlist(filter(match,data))\n#[[('User', 'NNP'), ('is', 'VBG'), ('not', 'RB'), ('Coala', 'NNP'), \n#  ('excluding', 'VBG'), ('VWR', 'NNP')], [('Arfter', 'NNP'),     \n#  ('transferring', 'VBG'), ('COALA', 'NNP'), ('Category', 'NNP'), \n#  ('S9901', 'NNP'), ('Dummy', 'NNP')], [('not', 'RB')], [], \n#  [('POETcatalog', 'NNP')], [('Vendor', 'NNP'), ('VWR', 'NNP'), \n#  ('COALA', 'NNP')], [('articles', 'NNP'), ('from', 'VBG'), ('all', 'RB'), \n#  ('are', 'NNP'), ('not', 'VBG'), ('orderable', 'RB')], [('already', 'RB'), \n#  ('COALA', 'NNP')], [('User', 'NNP'), ('Universitaet', 'NNP'), \n#  ('Regensburg', 'NNP'), ('Scout', 'NNP'), ('P17', 'NNP'), \n#  ('YESRMCDMUSER01', 'NNP'), ('Merck', 'NNP'), ('KGaA', 'NNP')], \n#  [('Please', 'NNP')]]\n</code></pre>\n"}], "owner": {"reputation": 482, "user_id": 6017391, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-39wghiRJaJY/AAAAAAAAAAI/AAAAAAAAAJs/A6mO2KnbO8c/photo.jpg?sz=128", "display_name": "sharathchandramandadi", "link": "https://stackoverflow.com/users/6017391/sharathchandramandadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 44036283, "answer_count": 2, "score": 0, "last_activity_date": 1495065852, "creation_date": 1495063345, "question_id": 44036229, "link": "https://stackoverflow.com/questions/44036229/how-to-filter-out-list-of-lists-which-doesnt-contain-elements-from-other-list", "title": "How to filter out list of lists which doesn&#39;t contain elements from other list?", "body": "<p>I'm trying to exclude lists which doesn't contain specific POS tags from the below small list, but couldn't do so. </p>\n\n<pre><code>a = ['VBG', 'RB', 'NNP']\n</code></pre>\n\n<p>I only want lists which contain above tags from the below list of list of tuples in output:\n(below tags may not be correct, but for representation purpose)</p>\n\n<pre><code>  data = [[('User', 'NNP'),\n      ('is', 'VBG'),\n      ('not', 'RB'),\n      ('able', 'JJ'),\n      ('to', 'TO'),\n      ('order', 'NN'),\n      ('products', 'NNS'),\n      ('from', 'IN'),\n      ('iShopCatalog', 'NN'),\n      ('Coala', 'NNP'),\n      ('excluding', 'VBG'),\n      ('articles', 'NNS'),\n      ('from', 'IN'),\n      ('VWR', 'NNP')],\n     [('Arfter', 'NNP'),\n      ('transferring', 'VBG'),\n      ('the', 'DT'),\n      ('articles', 'NNS'),\n      ('from', 'IN'),\n      ('COALA', 'NNP'),\n      ('to', 'TO'),\n      ('SRM', 'VB'),\n      ('the', 'DT'),\n      ('Category', 'NNP'),\n      ('S9901', 'NNP'),\n      ('Dummy', 'NNP'),\n      ('is', 'VBZ'),\n      ('maintained', 'VBN')],\n     [('Due', 'JJ'),\n      ('to', 'TO'),\n      ('this', 'DT'),\n      ('the', 'DT'),\n      ('user', 'NN'),\n      ('is', 'VBZ'),\n      ('not', 'RB'),\n      ('able', 'JJ'),\n      ('to', 'TO'),\n      ('order', 'NN'),\n      ('the', 'DT'),\n      ('product', 'NN')],\n     [('All', 'DT'),\n      ('other', 'JJ'),\n      ('users', 'NNS'),\n      ('can', 'MD'),\n      ('order', 'NN'),\n      ('these', 'DT'),\n      ('articles', 'NNS')],\n     [('She', 'PRP'),\n      ('can', 'MD'),\n      ('order', 'NN'),\n      ('other', 'JJ'),\n      ('products', 'NNS'),\n      ('from', 'IN'),\n      ('a', 'DT'),\n      ('POETcatalog', 'NNP'),\n      ('without', 'IN'),\n      ('any', 'DT'),\n      ('problems', 'NNS')],\n     [('Furtheremore', 'IN'),\n      ('she', 'PRP'),\n      ('is', 'VBZ'),\n      ('able', 'JJ'),\n      ('to', 'TO'),\n      ('order', 'NN'),\n      ('products', 'NNS'),\n      ('from', 'IN'),\n      ('the', 'DT'),\n      ('Vendor', 'NNP'),\n      ('VWR', 'NNP'),\n      ('through', 'IN'),\n      ('COALA', 'NNP')],\n     [('But', 'CC'),\n      ('articles', 'NNP'),\n      ('from', 'VBG'),\n      ('all', 'RB'),\n      ('other', 'JJ'),\n      ('suppliers', 'NNS'),\n      ('are', 'NNP'),\n      ('not', 'VBG'),\n      ('orderable', 'RB')],\n     [('I', 'PRP'),\n      ('already', 'RB'),\n      ('spoke', 'VBD'),\n      ('to', 'TO'),\n      ('anic', 'VB'),\n      ('who', 'WP'),\n      ('maintain', 'VBP'),\n      ('the', 'DT'),\n      ('catalog', 'NN'),\n      ('COALA', 'NNP'),\n      ('and', 'CC'),\n      ('they', 'PRP'),\n      ('said', 'VBD'),\n      ('that', 'IN'),\n      ('the', 'DT'),\n      ('reason', 'NN'),\n      ('should', 'MD'),\n      ('be', 'VB'),\n      ('the', 'DT'),\n      ('assignment', 'NN'),\n      ('of', 'IN'),\n      ('the', 'DT'),\n      ('plant', 'NN')],\n     [('User', 'NNP'),\n      ('is', 'VBZ'),\n      ('a', 'DT'),\n      ('assinged', 'JJ'),\n      ('to', 'TO'),\n      ('Universitaet', 'NNP'),\n      ('Regensburg', 'NNP'),\n      ('in', 'IN'),\n      ('Scout', 'NNP'),\n      ('but', 'CC'),\n      ('in', 'IN'),\n      ('P17', 'NNP'),\n      ('table', 'NN'),\n      ('YESRMCDMUSER01', 'NNP'),\n      ('she', 'PRP'),\n      ('is', 'VBZ'),\n      ('assigned', 'VBN'),\n      ('to', 'TO'),\n      ('company', 'NN'),\n      ('001500', 'CD'),\n      ('Merck', 'NNP'),\n      ('KGaA', 'NNP')],\n     [('Please', 'NNP'),\n      ('find', 'VB'),\n      ('attached', 'JJ'),\n      ('some', 'DT'),\n      ('screenshots', 'NNS')]]\n</code></pre>\n\n<p>My expected output is:</p>\n\n<pre><code>data = [[('User', 'NNP'),\n  ('is', 'VBG'),\n  ('not', 'RB'),\n  ('able', 'JJ'),\n  ('to', 'TO'),\n  ('order', 'NN'),\n  ('products', 'NNS'),\n  ('from', 'IN'),\n  ('iShopCatalog', 'NN'),\n  ('Coala', 'NNP'),\n  ('excluding', 'VBG'),\n  ('articles', 'NNS'),\n  ('from', 'IN'),\n  ('VWR', 'NNP')],\n  [('But', 'CC'),\n  ('articles', 'NNP'),\n  ('from', 'VBG'),\n  ('all', 'RB'),\n  ('other', 'JJ'),\n  ('suppliers', 'NNS'),\n  ('are', 'NNP'),\n  ('not', 'VBG'),\n  ('orderable', 'RB')]\n</code></pre>\n\n<p>I tried to do this by writing the below code, but unable to do so:</p>\n\n<pre><code>list1=[]\nfor i in data:\n    list2 = []\n    a = ['VBG', 'RB', 'NNP']\n    for j in i:\n        if all(i in j[1] for i in a):\n            list2.append(j)\n    list1.append(list2)\nlist1\n</code></pre>\n\n<p>which is returning empty list of lists.\nCan anybody provide a simple understandable code to get my expected output. Thanks.</p>\n"}, {"tags": ["python", "regex", "apache"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 645217, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77252808669025e32151869ebcff91a6?s=128&d=identicon&r=PG", "display_name": "rexbelia", "link": "https://stackoverflow.com/users/645217/rexbelia"}, "edited": false, "score": 0, "creation_date": 1495066145, "post_id": 44036371, "comment_id": 75099851, "body": "if you use multiline flag, you don&#39;t need \\n ?"}, {"owner": {"reputation": 8517, "user_id": 2336650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lpq4b.jpg?s=128&g=1", "display_name": "Mostafa Hussein", "link": "https://stackoverflow.com/users/2336650/mostafa-hussein"}, "reply_to_user": {"reputation": 149, "user_id": 645217, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77252808669025e32151869ebcff91a6?s=128&d=identicon&r=PG", "display_name": "rexbelia", "link": "https://stackoverflow.com/users/645217/rexbelia"}, "edited": false, "score": 0, "creation_date": 1495066308, "post_id": 44036371, "comment_id": 75099894, "body": "I need <code>\\n</code> if i remove it the regex will stop on <code>ServerName</code> line but using <code>(\\n.*?)+</code> make it complete the whole block until it matches <code>&lt;&#47;VirtualHost&gt;</code>. Also using <code>?</code> in <code>(\\n.*?)</code> prevent the regex from matching the whole apache conf"}, {"owner": {"reputation": 8517, "user_id": 2336650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lpq4b.jpg?s=128&g=1", "display_name": "Mostafa Hussein", "link": "https://stackoverflow.com/users/2336650/mostafa-hussein"}, "reply_to_user": {"reputation": 149, "user_id": 645217, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77252808669025e32151869ebcff91a6?s=128&d=identicon&r=PG", "display_name": "rexbelia", "link": "https://stackoverflow.com/users/645217/rexbelia"}, "edited": false, "score": 0, "creation_date": 1495066482, "post_id": 44036371, "comment_id": 75099939, "body": "Same goes for the <code>&lt;VirtualHost.*\\n</code> so <code>\\n</code> for matching the break"}, {"owner": {"reputation": 8517, "user_id": 2336650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lpq4b.jpg?s=128&g=1", "display_name": "Mostafa Hussein", "link": "https://stackoverflow.com/users/2336650/mostafa-hussein"}, "reply_to_user": {"reputation": 149, "user_id": 645217, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77252808669025e32151869ebcff91a6?s=128&d=identicon&r=PG", "display_name": "rexbelia", "link": "https://stackoverflow.com/users/645217/rexbelia"}, "edited": false, "score": 0, "creation_date": 1495066555, "post_id": 44036371, "comment_id": 75099955, "body": "@rexbelia I tried to add multiline flag and in this case \\n wont be necessary!"}, {"owner": {"reputation": 149, "user_id": 645217, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77252808669025e32151869ebcff91a6?s=128&d=identicon&r=PG", "display_name": "rexbelia", "link": "https://stackoverflow.com/users/645217/rexbelia"}, "edited": false, "score": 0, "creation_date": 1495066977, "post_id": 44036371, "comment_id": 75100056, "body": "Why didn&#39;t you get rid of \\n in (\\n.*?) if you&#39;re using multiline?"}, {"owner": {"reputation": 8517, "user_id": 2336650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lpq4b.jpg?s=128&g=1", "display_name": "Mostafa Hussein", "link": "https://stackoverflow.com/users/2336650/mostafa-hussein"}, "reply_to_user": {"reputation": 149, "user_id": 645217, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77252808669025e32151869ebcff91a6?s=128&d=identicon&r=PG", "display_name": "rexbelia", "link": "https://stackoverflow.com/users/645217/rexbelia"}, "edited": false, "score": 0, "creation_date": 1495067281, "post_id": 44036371, "comment_id": 75100120, "body": "@rexbelia, check it now please !"}, {"owner": {"reputation": 8517, "user_id": 2336650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lpq4b.jpg?s=128&g=1", "display_name": "Mostafa Hussein", "link": "https://stackoverflow.com/users/2336650/mostafa-hussein"}, "reply_to_user": {"reputation": 149, "user_id": 645217, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77252808669025e32151869ebcff91a6?s=128&d=identicon&r=PG", "display_name": "rexbelia", "link": "https://stackoverflow.com/users/645217/rexbelia"}, "edited": false, "score": 0, "creation_date": 1495067970, "post_id": 44036371, "comment_id": 75100279, "body": "I have added the IP and SSL port to regex too"}, {"owner": {"reputation": 149, "user_id": 645217, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77252808669025e32151869ebcff91a6?s=128&d=identicon&r=PG", "display_name": "rexbelia", "link": "https://stackoverflow.com/users/645217/rexbelia"}, "edited": false, "score": 0, "creation_date": 1495128924, "post_id": 44036371, "comment_id": 75133748, "body": "Could you explain this part to me (assuming there&#39;s no multiline) (\\n.*?)+?"}, {"owner": {"reputation": 149, "user_id": 645217, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77252808669025e32151869ebcff91a6?s=128&d=identicon&r=PG", "display_name": "rexbelia", "link": "https://stackoverflow.com/users/645217/rexbelia"}, "edited": false, "score": 0, "creation_date": 1495129922, "post_id": 44036371, "comment_id": 75134358, "body": "And how would you catch the entry starting from /layerv2t3.dev.ca.com     farms   {   /layerv2t3.dev.ca.com     {     $include &quot;dispatcher.headers.any&quot;     /virtualhosts       {       &quot;layerv2t3.dev.ca.com&quot;       }      $include &quot;dispatcher.renders.any&quot;     /cache       {       /docroot &quot;/etc/httpd/dispatcher_cache/layerv2t3&quot;       $include &quot;dispatcher.cache.any&quot;       }     }"}, {"owner": {"reputation": 8517, "user_id": 2336650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lpq4b.jpg?s=128&g=1", "display_name": "Mostafa Hussein", "link": "https://stackoverflow.com/users/2336650/mostafa-hussein"}, "reply_to_user": {"reputation": 149, "user_id": 645217, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77252808669025e32151869ebcff91a6?s=128&d=identicon&r=PG", "display_name": "rexbelia", "link": "https://stackoverflow.com/users/645217/rexbelia"}, "edited": false, "score": 0, "creation_date": 1495136964, "post_id": 44036371, "comment_id": 75138247, "body": "<code>(\\n.*?)</code> will match a newline and everything after it where <code>?</code> will make the match stop until it match a specific string. could you send me a gist with the last entry ? as i may write a regex that wont work in the original case you have. for example this should match the whole text in your comment <code>^\\&#47;layerv2t3\\..*</code>"}, {"owner": {"reputation": 149, "user_id": 645217, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77252808669025e32151869ebcff91a6?s=128&d=identicon&r=PG", "display_name": "rexbelia", "link": "https://stackoverflow.com/users/645217/rexbelia"}, "edited": false, "score": 0, "creation_date": 1495661508, "post_id": 44036371, "comment_id": 75353600, "body": "Thank you for the explanation of (\\n.*?) but about the +? following that, right before the close tag of &lt;/VirtualHost&gt;. What does the +? do. This is slightly confusing since you already have the ? in (\\n.*?). And how are the parenthesis helping?"}], "tags": [], "owner": {"reputation": 8517, "user_id": 2336650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lpq4b.jpg?s=128&g=1", "display_name": "Mostafa Hussein", "link": "https://stackoverflow.com/users/2336650/mostafa-hussein"}, "is_accepted": true, "score": 1, "last_activity_date": 1495067945, "last_edit_date": 1495067945, "creation_date": 1495064424, "answer_id": 44036371, "question_id": 44036222, "link": "https://stackoverflow.com/questions/44036222/apache-ssl-conf-and-regex/44036371#44036371", "title": "Apache ssl.conf and regex", "body": "<p>This should match the All virtualhost block where there server name is <code>layerv2t3</code></p>\n\n<pre><code>&lt;VirtualHost.*\\n\\s+?ServerName.*?layerv2t3.*(\\n.*?)+?&lt;\\/VirtualHost&gt;\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/J6VyEd/3\" rel=\"nofollow noreferrer\">Demo URL</a></p>\n\n<p>Update:</p>\n\n<p>Using <code>multiline</code> flag</p>\n\n<pre><code>&lt;VirtualHost.*\\s+?ServerName.*?layerv2t3.*(\\s.*?)+?&lt;\\/VirtualHost&gt;\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/J6VyEd/5\" rel=\"nofollow noreferrer\">Demo URL</a></p>\n\n<p>Matching SSL Port:</p>\n\n<pre><code>&lt;VirtualHost\\s\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}:443&gt;\\s+?ServerName.*?layerv2t3.*(\\s.*?)+?&lt;\\/VirtualHost&gt;\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/J6VyEd/7\" rel=\"nofollow noreferrer\">Demo URL</a></p>\n"}], "owner": {"reputation": 149, "user_id": 645217, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/77252808669025e32151869ebcff91a6?s=128&d=identicon&r=PG", "display_name": "rexbelia", "link": "https://stackoverflow.com/users/645217/rexbelia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 44036371, "answer_count": 1, "score": 0, "last_activity_date": 1495067945, "creation_date": 1495063292, "question_id": 44036222, "link": "https://stackoverflow.com/questions/44036222/apache-ssl-conf-and-regex", "title": "Apache ssl.conf and regex", "body": "<p>I am trying to parse and rewrite Apache's ssl.conf file. I have entries like</p>\n\n<pre><code>&lt;VirtualHost 10.0.2.165:443&gt;\n   ServerName layerv2t3.dev.ca.com\n   DocumentRoot /etc/httpd/dispatcher_cache/layerv2t3\n\n   SSLEngine on\n\n   RewriteEngine On\n   RewriteOptions Inherit\n # Redirect root to '/admin/homeRedirect' to make sure the cached version is used\n # and to satisfy the Dispatcher Filter\n RewriteRule ^/$ /admin/homeRedirect [R=302,L]\n ProxyPass /admin http://localhost:8085/admin\n ProxyPassReverse /admin http://localhost:8085/admin\n ProxyPreserveHost on\n RewriteRule system/sling/cqform/defaultlogin.html /app/login.html [R,L]\n Header edit Location ^http: https:\n    &lt;Directory /&gt;\n            &lt;IfModule disp_apache2.c&gt;\n                    SetHandler dispatcher-handler\n                    ModMimeUsePathInfo On\n            &lt;/IfModule&gt;\n            Options FollowSymLinks\n            AllowOverride None\n    &lt;/Directory&gt;\n\n&lt;/VirtualHost&gt;\n&lt;VirtualHost 10.0.2.165:443&gt;\n  ServerName layerv2t3.app.qa1.w2.saasqa.ca.com\n  DocumentRoot /etc/httpd/dispatcher_cache/layerv2t3\n\n  SSLEngine on\n\n  RewriteEngine On\n  RewriteOptions Inherit\n  # Redirect root to '/en_us/home.html' to make sure the cached version is used\n  # and to satisfy the Dispatcher Filter\n  RewriteRule ^/$ /site/en_us/home.html [R=302,L]\n  RequestHeader edit Host (layerv2t3.app.qa1.w2.saasqa.ca.com) layerv2t3.dev.ca.com\n  RequestHeader edit Origin (layerv2t3.app.qa1.w2.saasqa.ca.com) layerv2t3.dev.ca.com\n  RequestHeader edit Referer (layerv2t3.app.qa1.w2.saasqa.ca.com) layerv2t3.dev.ca.com\n  ProxyPass /admin http://localhost:8085/admin\n  ProxyPassReverse /admin http://localhost:8085/admin\n  ProxyPreserveHost on\n  RewriteRule system/sling/cqform/defaultlogin.html /app/login.html [R,L]\n  Header edit Location ^http: https:\n  Header edit Location (layerv2t3.dev.ca.com) layerv2t3.app.qa1.w2.saasqa.ca.com\n        &lt;Directory /&gt;\n                &lt;IfModule disp_apache2.c&gt;\n                        SetHandler dispatcher-handler\n                        ModMimeUsePathInfo On\n                &lt;/IfModule&gt;\n                Options FollowSymLinks\n                AllowOverride None\n        &lt;/Directory&gt;\n\n&lt;/VirtualHost&gt;\n\n&lt;VirtualHost 10.0.2.165:443&gt;\n  ServerName layerv2t5.app.qa1.w2.saasqa.ca.com\n  DocumentRoot /etc/httpd/dispatcher_cache/layerv2t5\n\n  SSLEngine on\n\n  RewriteEngine On\n  RewriteOptions Inherit\n  # Redirect root to '/en_us/home.html' to make sure the cached version is used\n  # and to satisfy the Dispatcher Filter\n  RewriteRule ^/$ /site/en_us/home.html [R=302,L]\n  RequestHeader edit Host (layerv2t5.app.qa1.w2.saasqa.ca.com) layerv2t5.dev.ca.com\n  RequestHeader edit Origin (layerv2t5.app.qa1.w2.saasqa.ca.com) layerv2t5.dev.ca.com\n  RequestHeader edit Referer (layerv2t5.app.qa1.w2.saasqa.ca.com) layerv2t5.dev.ca.com\n  ProxyPass /admin http://localhost:8085/admin\n  ProxyPassReverse /admin http://localhost:8085/admin\n  ProxyPreserveHost on\n  RewriteRule system/sling/cqform/defaultlogin.html /app/login.html [R,L]\n  Header edit Location ^http: https:\n  Header edit Location (layerv2t5.dev.ca.com) layerv2t5.app.qa1.w2.saasqa.ca.com\n        &lt;Directory /&gt;\n                &lt;IfModule disp_apache2.c&gt;\n                        SetHandler dispatcher-handler\n                        ModMimeUsePathInfo On\n                &lt;/IfModule&gt;\n                Options FollowSymLinks\n                AllowOverride None\n        &lt;/Directory&gt;\n\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>I want to be able to match 2 virtual host entries starting at \"VirtualHost\" and ending at \"/VirtualHost\" for ServerName layerv2t3. This includes the suffix dev.ca.com as well as app.qa1.w2.saasqa.ca.com but the regex I have is matching the closing VirtualHost all the way down below. I want to delete these entries and rewrite the file content, but that's the next step.</p>\n\n<pre><code>        app_host_entry = '\\&lt;VirtualHost \\d+\\.\\d+\\.\\d+\\.\\d+\\:443\\&gt;' \\\n                         '\\s+ServerName\\s{tenant_id}.app*com' \\\n                         '?\\&lt;/VirtualHost\\&gt;' \\\n                         .format(tenant_id=self.tenant_id)\n</code></pre>\n\n<p>The tenant_id in this case is layerv2t3.</p>\n"}, {"tags": ["python", "scikit-learn", "logistic-regression", "cross-validation", "roc"], "comments": [{"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1495175932, "post_id": 44036193, "comment_id": 75150565, "body": "Has your question been addressed? If so, you should mark the correct answer with the checkbox beside it. Otherwise, what can be clarified?"}], "answers": [{"tags": [], "owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "is_accepted": false, "score": 4, "last_activity_date": 1495091443, "last_edit_date": 1495091443, "creation_date": 1495083508, "answer_id": 44038896, "question_id": 44036193, "link": "https://stackoverflow.com/questions/44036193/using-cross-validation-and-auc-roc-for-a-logistic-regression-model-in-sklearn/44038896#44038896", "title": "Using cross validation and AUC-ROC for a logistic regression model in sklearn", "body": "<p><code>cross_val_score</code> trains models on inputs with true values, performs predictions, then compares those predictions to the true values\u2014the scoring step. That's why you pass in <code>y</code>: it's the <em>true</em> values, the \"ground truth\". </p>\n\n<p>The <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.metrics.roc_auc_score.html\" rel=\"nofollow noreferrer\"><code>roc_auc_score</code></a> function that is called by specifying <code>scoring='roc_auc'</code> relies on both <code>y_true</code> and <code>y_pred</code>: the ground truth and the predicted values based on <code>X</code> for your model.</p>\n"}, {"tags": [], "owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "is_accepted": true, "score": 6, "last_activity_date": 1495085202, "creation_date": 1495085202, "answer_id": 44039250, "question_id": 44036193, "link": "https://stackoverflow.com/questions/44036193/using-cross-validation-and-auc-roc-for-a-logistic-regression-model-in-sklearn/44039250#44039250", "title": "Using cross validation and AUC-ROC for a logistic regression model in sklearn", "body": "<p>All supervised learning methods (including logistic regression) need the true <code>y</code> values to fit a model.</p>\n\n<p>After fitting a model, we generally want to:</p>\n\n<ul>\n<li>Make predictions, and</li>\n<li>Score those predictions (usually on 'held out' data, such as by using cross-validation)</li>\n</ul>\n\n<p><code>cross_val_score</code> gives you cross-validated scores of a model's predictions. But to score the predictions it first needs to make the predictions, and to make the predictions it first needs to fit the model, which requires both <code>X</code> and (true) <code>y</code>.</p>\n\n<p><code>cross_val_score</code> as you note accepts different scoring metrics. So if you chose <code>f1-score</code> for example, the model predictions generated during <code>cross-val-score</code> would be class predictions (from the model's <code>predict()</code> method). And if you chose <code>roc_auc</code> as your metric, the model predictions used to score the model would be probability predictions (from the model's <code>predict_proba()</code> method).</p>\n"}], "owner": {"reputation": 979, "user_id": 1198869, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/06a1b47da4b4b20b1c6c475e14c08806?s=128&d=identicon&r=PG", "display_name": "NeonBlueHair", "link": "https://stackoverflow.com/users/1198869/neonbluehair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10271, "favorite_count": 2, "accepted_answer_id": 44039250, "answer_count": 2, "score": 9, "last_activity_date": 1495091443, "creation_date": 1495063055, "last_edit_date": 1495541901, "question_id": 44036193, "link": "https://stackoverflow.com/questions/44036193/using-cross-validation-and-auc-roc-for-a-logistic-regression-model-in-sklearn", "title": "Using cross validation and AUC-ROC for a logistic regression model in sklearn", "body": "<p>I'm using the <code>sklearn</code> package to build a logistic regression model and then evaluate it. Specifically, I want to do so using cross validation, but can't figure out the right way to do so with the <code>cross_val_score</code> function. </p>\n\n<p>According to the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.cross_val_score.html\" rel=\"noreferrer\">documentation</a> and some <a href=\"https://stackoverflow.com/questions/39163354/evaluating-logistic-regression-with-cross-validation\">examples</a> I saw, I need to pass the function the model, the features, the outcome, and a scoring method. However, the AUC doesn't need predictions, it needs probabilities, so it can try different threshold values and calculate the ROC curve based on that. So what's the right approach here? This function has <code>'roc_auc'</code> as a possible scoring method, so I'm assuming it's compatible with it, I'm just not sure about the right way to use it. Sample code snippet below. </p>\n\n<pre><code>from sklearn.linear_model import LogisticRegression\nfrom sklearn.cross_validation import cross_val_score\n\nfeatures = ['a', 'b', 'c']\noutcome = ['d']\nX = df[features]\ny = df[outcome]\ncrossval_scores = cross_val_score(LogisticRegression(), X, y, scoring='roc_auc', cv=10)\n</code></pre>\n\n<p>Basically, I don't understand why I need to pass <code>y</code> to my <code>cross_val_score</code> function here, instead of probabilities calculated using <code>X</code> in a logistic regression model. Does it just do that part on its own?</p>\n"}, {"tags": ["python", "arrays", "matplotlib", "mplot3d"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1495063640, "creation_date": 1495063640, "answer_id": 44036271, "question_id": 44036170, "link": "https://stackoverflow.com/questions/44036170/trying-to-plot-surf3d-from-2d-array/44036271#44036271", "title": "Trying to plot surf3d from 2d array", "body": "<p>The plot_surface function requires that X, Y, Z be 2D arrays, for this it converts X and Y from 1D to 2D with the meshgrid function.</p>\n\n<pre><code>X, Y = np.meshgrid(X, Y)\n</code></pre>\n\n<p><strong>Complete code:</strong></p>\n\n<pre><code>import numpy as np\nfrom mpl_toolkits.mplot3d import Axes3D\nfrom matplotlib import cm\nimport matplotlib.pyplot as plt\nfrom matplotlib.ticker import LinearLocator, FormatStrFormatter\n\ndef fourier(delX,delT):\n    xMax = 10\n    tMax = 12\n    m = int(xMax/delX)\n    n = int(tMax/delT)\n    l = 0.020875\n    t = 0.0\n    Matrix =[[0 for x in range(m+1)]for y in range(n+1)]\n    for x in range(n+1):\n        Matrix[x][0] = 100\n        Matrix[x][5] = 50\n\n    for x in range(n):\n        Matrix[x+1][1] = Matrix[x][1]+l*(Matrix[x][2]-2*Matrix[x][1]+Matrix[x][0])\n        Matrix[x+1][2] = Matrix[x][2]+l*(Matrix[x][3]-2*Matrix[x][2]+Matrix[x][1])\n        Matrix[x+1][3] = Matrix[x][3]+l*(Matrix[x][4]-2*Matrix[x][3]+Matrix[x][2])\n        Matrix[x+1][4] = Matrix[x][4]+l*(Matrix[x][5]-2*Matrix[x][4]+Matrix[x][3])\n\n    X = np.arange(0,xMax+0.1,delX)\n    Y = np.arange(0,tMax+0.1,delT)\n\n    X, Y = np.meshgrid(X, Y)\n    fig = plt.figure()\n    ax = fig.gca(projection='3d')\n\n    surf = ax.plot_surface(X,Y,Matrix,cmap=cm.coolwarm,linewidth=0,antialiased=False)\n    ax.set_zlim(0,101)\n    ax.zaxis.set_major_locator(LinearLocator(10))\n    ax.zaxis.set_major_formatter(FormatStrFormatter('%.02f'))\n\n    fig.colorbar(surf, shrink=0.5, aspect=5)\n    plt.show()\n\nfourier(0.5, 0.5)\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/yp77k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yp77k.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 3, "user_id": 8028090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85de7c53744bde957c281347e5e30c2c?s=128&d=identicon&r=PG&f=1", "display_name": "Hansel Setiadi", "link": "https://stackoverflow.com/users/8028090/hansel-setiadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 975, "favorite_count": 0, "accepted_answer_id": 44036271, "answer_count": 1, "score": 0, "last_activity_date": 1495063640, "creation_date": 1495062800, "question_id": 44036170, "link": "https://stackoverflow.com/questions/44036170/trying-to-plot-surf3d-from-2d-array", "title": "Trying to plot surf3d from 2d array", "body": "<p>I'm new to python and I'm trying to make a 3D Surface from 2D array, but it appears that I got an error:</p>\n\n<pre><code>ValueError: shape mismatch: objects cannot be broadcast to a single shape\n</code></pre>\n\n<p>Here is my full code</p>\n\n<pre><code>import numpy as np\nfrom mpl_toolkits.mplot3d import Axes3D\nfrom matplotlib import cm\nimport matplotlib.pyplot as plt\nfrom matplotlib.ticker import LinearLocator, FormatStrFormatter\n\ndef fourier(delX,delT):\nxMax = 10\ntMax = 12\nm = int(xMax/delX)\nn = int(tMax/delT)\nl = 0.020875\nt = 0.0\nMatrix =[[0 for x in range(m+1)]for y in range(n+1)]\nfor x in range(n+1):\nMatrix[x][0] = 100\nMatrix[x][5] = 50\n\nfor x in range(n):\n    Matrix[x+1][1] = Matrix[x][1]+l*(Matrix[x][2]-2*Matrix[x][1]+Matrix[x][0])\n    Matrix[x+1][2] = Matrix[x][2]+l*(Matrix[x][3]-2*Matrix[x][2]+Matrix[x][1])\n    Matrix[x+1][3] = Matrix[x][3]+l*(Matrix[x][4]-2*Matrix[x][3]+Matrix[x][2])\n    Matrix[x+1][4] = Matrix[x][4]+l*(Matrix[x][5]-2*Matrix[x][4]+Matrix[x][3])\n\nX = np.arange(0,xMax+0.1,delX)\nY = np.arange(0,tMax+0.1,delT)\n\nfig = plt.figure()\nax = fig.gca(projection='3d')\n\nsurf = ax.plot_surface(X,Y,Matrix,cmap=cm.coolwarm,linewidth=0,antialiased=False)\nax.set_zlim(0,101)\nax.zaxis.set_major_locator(LinearLocator(10))\nax.zaxis.set_major_formatter(FormatStrFormatter('%.02f'))\n\nfig.colorbar(surf, shrink=0.5, aspect=5)\nplt.show()\n</code></pre>\n\n<p>What makes the shape mismatched and how to solve the error?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1495062779, "post_id": 44036148, "comment_id": 75098957, "body": "<code>os.system()</code> doesn&#39;t return the output of the command, it returns the exit code, which is a number."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1495062781, "post_id": 44036148, "comment_id": 75098958, "body": "<code>os.system</code> returns the exit code of the command you ran, not a string of whatever that command printed."}, {"owner": {"reputation": 11899, "user_id": 7216865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X90W9.png?s=128&g=1", "display_name": "Maurice Meyer", "link": "https://stackoverflow.com/users/7216865/maurice-meyer"}, "edited": false, "score": 1, "creation_date": 1495062813, "post_id": 44036148, "comment_id": 75098970, "body": "<code>os.system</code> returns no data, just a numeric return code."}, {"owner": {"reputation": 123, "user_id": 6688669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e3346020af2b8cbc0363187fd54ac775?s=128&d=identicon&r=PG&f=1", "display_name": "DMine", "link": "https://stackoverflow.com/users/6688669/dmine"}, "edited": false, "score": 0, "creation_date": 1495064091, "post_id": 44036148, "comment_id": 75099305, "body": "Thanks you guys !"}], "answers": [{"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1495063243, "creation_date": 1495063243, "answer_id": 44036214, "question_id": 44036148, "link": "https://stackoverflow.com/questions/44036148/python-soup-error/44036214#44036214", "title": "Python soup error", "body": "<p>You were correctly told in the comments that <code>system</code> does not return the program output. But there is no need to use curl at all. Python module <code>urllib.request</code> works just fine:</p>\n\n<pre><code>from urllib.request import urlopen\nURL = \"https://it.wikipedia.o\u200c\u200brg/wiki/Coldplay\"\nsoup = BeautifulSoup(urlopen(URL), f\u200c\u200beatures=\"xml\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7988781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7481603db0428bce6f4f67eb58ad2d45?s=128&d=identicon&r=PG", "display_name": "Kurt", "link": "https://stackoverflow.com/users/7988781/kurt"}, "is_accepted": false, "score": 1, "last_activity_date": 1495063510, "last_edit_date": 1495542882, "creation_date": 1495063510, "answer_id": 44036254, "question_id": 44036148, "link": "https://stackoverflow.com/questions/44036148/python-soup-error/44036254#44036254", "title": "Python soup error", "body": "<p>To use curl, you need to import and run subprocess.check_output or subprocess.run (Python 3.5+ only) to capture the output of a system command. As stated already, os.system returns only the error status of the command you run, not its output,  which goes to console.</p>\n\n<p>See this discussion:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4760215/running-shell-command-from-python-and-capturing-the-output\">Running shell command from Python and capturing the output</a></p>\n\n<p>There may be better ways to achieve your goal, but to understand how to make your existing code work, try subprocess.</p>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 6688669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e3346020af2b8cbc0363187fd54ac775?s=128&d=identicon&r=PG&f=1", "display_name": "DMine", "link": "https://stackoverflow.com/users/6688669/dmine"}, "edited": false, "score": 0, "creation_date": 1495064033, "post_id": 44036269, "comment_id": 75099291, "body": "Thanks you for say me step by step what i do."}], "tags": [], "owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "is_accepted": true, "score": 2, "last_activity_date": 1495064700, "last_edit_date": 1495064700, "creation_date": 1495063609, "answer_id": 44036269, "question_id": 44036148, "link": "https://stackoverflow.com/questions/44036148/python-soup-error/44036269#44036269", "title": "Python soup error", "body": "<p><code>os.system</code> will return the exit code of the command. Not the return data. If the command is ran successfully, <code>string</code> will be 0.</p>\n\n<p>You should instead use <code>subprocess.call</code>:</p>\n\n<pre><code>subprocess.call([\n    'curl',\n    '-i',\n    \"https://it.wikipedia.org/wiki/Coldplay\"\n    ], shell=False, stdout=subprocess.PIPE, stderr=subprocess.PIPE)\n</code></pre>\n\n<p>But you shouldn't use curl command when using python, use <code>urllib</code> instead:</p>\n\n<pre><code>import urllib.request \nurl = \"https://it.wikipedia.org/wiki/Coldplay\"\nsoup = BeautifulSoup(urllib.request.urlopen(url), features=\"xml\")\ntag = soup.find_all(\"tbody\")\n</code></pre>\n\n<p>if you're using python 2, do <code>import urllib2</code> and use <code>urllib2.urlopen</code> instead.</p>\n\n<p>A more popular way over using <code>urllib</code> is to use the <a href=\"http://requests.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">requests</a> library, but you will need to install it, <code>pip install requests</code>.</p>\n\n<pre><code>import requests\nr = requests.get('https://it.wikipedia.org/wiki/Coldplay')\nsoup = BeautifulSoup(r.content, features=\"xml\")\ntag = soup.find_all(\"tbody\")\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 6688669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e3346020af2b8cbc0363187fd54ac775?s=128&d=identicon&r=PG&f=1", "display_name": "DMine", "link": "https://stackoverflow.com/users/6688669/dmine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1495063991, "accepted_answer_id": 44036269, "answer_count": 3, "score": 1, "last_activity_date": 1495064700, "creation_date": 1495062616, "question_id": 44036148, "link": "https://stackoverflow.com/questions/44036148/python-soup-error", "closed_reason": "Duplicate", "title": "Python soup error", "body": "<p>Hi guys this is my code:   </p>\n\n<pre><code>#! /user/bin/env python\nimport os\nimport lxml\nfrom bs4 import BeautifulSoup\nstring = os.system(\"curl -i https://it.wikipedia.org/wiki/Coldplay\")\nsoup = BeautifulSoup(string, features=\"xml\")\ntag = soup.find_all(\"tbody\")\n</code></pre>\n\n<p>and when i will execute it this is my error</p>\n\n<pre><code>  enter code hereTraceback (most recent call last):\n  File \"script_wiki.py\", line 6, in &lt;module&gt;\n  soup = BeautifulSoup(string, features=\"xml\")\n  File \"build/bdist.macosx-10.12-intel/egg/bs4/__init__.py\", line 192, in __init__\n  TypeError: object of type 'int' has no len()\n</code></pre>\n\n<p>i'm beginner and i haven't a idea what is the problem sorry </p>\n"}, {"tags": ["python", "django", "django-models", "django-admin"], "answers": [{"comments": [{"owner": {"reputation": 407, "user_id": 6857994, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/LlYSv.jpg?s=128&g=1", "display_name": "S_alj", "link": "https://stackoverflow.com/users/6857994/s-alj"}, "edited": false, "score": 0, "creation_date": 1495074244, "post_id": 44037441, "comment_id": 75101644, "body": "Meanwhile I&#39;ve been trying to get it working, creating a separate class with forms.ModelForm and using filter() there, but this is way cleaner and it works! Thank you very much :)"}], "tags": [], "owner": {"reputation": 1164, "user_id": 2036767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49e1e19cf34d24f564bfbcf1ed9e4d8c?s=128&d=identicon&r=PG", "display_name": "Diego Puente", "link": "https://stackoverflow.com/users/2036767/diego-puente"}, "is_accepted": true, "score": 1, "last_activity_date": 1495073289, "creation_date": 1495073289, "answer_id": 44037441, "question_id": 44036138, "link": "https://stackoverflow.com/questions/44036138/django-admin-limiting-foreignkey-fields-choices/44037441#44037441", "title": "Django Admin- Limiting ForeignKey Field&#39;s choices", "body": "<p>You can try something like this:</p>\n\n<pre><code>class RestrictedFormAdmin(admin.ModelAdmin):\n    def render_change_form(self, request, context, *args, **kwargs):\n        context['adminform'].form.fields['Form'].queryset = Form.objects.filter(user=request.user)\n        return super(RestrictedFormAdmin, self).render_change_form(request, context, args, kwargs)         \n</code></pre>\n"}], "owner": {"reputation": 407, "user_id": 6857994, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/LlYSv.jpg?s=128&g=1", "display_name": "S_alj", "link": "https://stackoverflow.com/users/6857994/s-alj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "accepted_answer_id": 44037441, "answer_count": 1, "score": 2, "last_activity_date": 1495073289, "creation_date": 1495062558, "last_edit_date": 1495069746, "question_id": 44036138, "link": "https://stackoverflow.com/questions/44036138/django-admin-limiting-foreignkey-fields-choices", "title": "Django Admin- Limiting ForeignKey Field&#39;s choices", "body": "<p>I've been working on my Django Project.\nI use custom Forms (a class called Form), and I've got a class called <strong>Restricted_Form</strong>. The point of this class is that an Admin user (\"staff status\" user\") has the option restrict which users or groups can have access to the Forms/submit filled Forms:</p>\n\n<pre><code>#....models.py:\nfrom django.contrib.auth.models import User, Group\n\nclass Restricted_Form(models.Model):\n    Form = models.ForeignKey('forms.Form')\n    Authorized_Users = models.ManyToManyField(User, blank=True)\n    Authorized_Groups = models.ManyToManyField(Group, blank=True)\n    user = models.ForeignKey(User, blank=True, null=True, related_name=\"restriction_owner\")\n</code></pre>\n\n<p>\"Form\" itself has:</p>\n\n<pre><code>user = models.ForeignKey(User, blank=True, null=True)\n#this is always the user who created it\n</code></pre>\n\n<p>My issue is limiting what the non-superuser admins can do. They should only be able to create <strong>Restricted_Form</strong> objects including a <strong>Form</strong> they have created themselves. In practice, when they create a Restricted_Form, only \"Forms\" that they have created themselves should appear as options to select, in the drop-down menu.\nThis is my related admin class right now:</p>\n\n<pre><code>#...admin.py\nclass RestrictedFormAdmin(admin.ModelAdmin): \n    fieldsets = [\n    (None, {\"fields\": (\"Form\", \"Authorized_Users\", \"Authorized_Groups\")}),]\n    def save_model(self, request, obj, form, change):\n        if getattr(obj, 'user', None) is None:  \n            obj.user = request.user\n        obj.save()\n    def get_queryset(self, request):\n        qs = super(RestrictedFormAdmin, self).get_queryset(request)\n        if request.user.is_superuser:\n            return qs\n        return qs.filter(user=request.user)\n    def has_change_permission(self, request, obj=None):\n        if not obj:\n            return True \n        return obj.user == request.user or request.user.is_superuser\n\nadmin.site.register(Restricted_Form, RestrictedFormAdmin)\n</code></pre>\n\n<p>Help will be greatly appreciated.</p>\n"}, {"tags": ["php", "python"], "comments": [{"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1495063225, "post_id": 44036074, "comment_id": 75099090, "body": "What&#39;s the value of <code>public_path()</code> ? You can try to provide the full path of the python binary, to find it, use, <code>which python</code>. What&#39;s the output of <code>echo &quot;python &quot;.public_path().&quot;&#47;python&#47;start_clientsim.py 2&gt;&amp;1&quot;</code> ?  does this output runs without errors if pasted on the shell?"}, {"owner": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "edited": false, "score": 2, "creation_date": 1495063695, "post_id": 44036074, "comment_id": 75099205, "body": "did you try to start the same script from the user running your webserver? It could be www-data, httpd, apache etc"}, {"owner": {"reputation": 43464, "user_id": 4480164, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Ds8pV.png?s=128&g=1", "display_name": "cyb3rZ", "link": "https://stackoverflow.com/users/4480164/cyb3rz"}, "reply_to_user": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1495064075, "post_id": 44036074, "comment_id": 75099297, "body": "@PedroLobito : <code>python &#47;Applications&#47;MAMP&#47;htdocs&#47;code&#47;benu&#47;ssc-portal&#47;public&#47;python&zwnj;&#8203;&#47;start_clientsim.py 2&gt;&amp;1</code>"}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1495064208, "post_id": 44036074, "comment_id": 75099338, "body": "if you run <code>python &#47;Applications&#47;MAMP&#47;htdocs&#47;code&#47;benu&#47;ssc-portal&#47;public&#47;python&zwnj;&#8203;\u200c\u200b&#47;start_clientsim.p&zwnj;&#8203;y 2&gt;&amp;1</code>  on the shell does it work?"}, {"owner": {"reputation": 43464, "user_id": 4480164, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Ds8pV.png?s=128&g=1", "display_name": "cyb3rZ", "link": "https://stackoverflow.com/users/4480164/cyb3rz"}, "edited": false, "score": 0, "creation_date": 1495064277, "post_id": 44036074, "comment_id": 75099357, "body": "Yes, it does work. It&#39;s SSH into the VM and start a service. Perfectly. I don&#39;t doubt my python. I doubt the way I trigger it using PHP. I don&#39;t know how to debug to see why it is not working."}, {"owner": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "edited": false, "score": 0, "creation_date": 1495064480, "post_id": 44036074, "comment_id": 75099401, "body": "Sometimes <code>exec</code>, <code>system</code>, etc are disabled . Check if <code>is_callable(&quot;exec&quot;)</code>"}, {"owner": {"reputation": 43464, "user_id": 4480164, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Ds8pV.png?s=128&g=1", "display_name": "cyb3rZ", "link": "https://stackoverflow.com/users/4480164/cyb3rz"}, "reply_to_user": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "edited": false, "score": 0, "creation_date": 1495064677, "post_id": 44036074, "comment_id": 75099437, "body": "@t.m.adam : Are you talking about <code>exec</code> , <code>system</code> in python ? or PHP ?"}, {"owner": {"reputation": 43464, "user_id": 4480164, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Ds8pV.png?s=128&g=1", "display_name": "cyb3rZ", "link": "https://stackoverflow.com/users/4480164/cyb3rz"}, "reply_to_user": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "edited": false, "score": 0, "creation_date": 1495064753, "post_id": 44036074, "comment_id": 75099460, "body": "@Marat : I would like to try your suggestion. Should I <code>chmod</code> my script to a certain permission or something ?"}, {"owner": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "edited": false, "score": 0, "creation_date": 1495065024, "post_id": 44036074, "comment_id": 75099526, "body": "PHP . You can get a list of disabled functions with <code>ini_get(&#39;disable_functions&#39;)</code>"}, {"owner": {"reputation": 43464, "user_id": 4480164, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Ds8pV.png?s=128&g=1", "display_name": "cyb3rZ", "link": "https://stackoverflow.com/users/4480164/cyb3rz"}, "reply_to_user": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "edited": false, "score": 0, "creation_date": 1495066529, "post_id": 44036074, "comment_id": 75099952, "body": "@t.m.adam : What should I do with that ? I tried <code>echo(ini_get(&#39;disable_functions&#39;)) ; </code> I got nothing. I tried <code>dd(ini_get(&#39;disable_functions&#39;))</code>"}, {"owner": {"reputation": 13885, "user_id": 7811673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc232c9c0c9748fdd3dec0d5b816fb7?s=128&d=identicon&r=PG&f=1", "display_name": "t.m.adam", "link": "https://stackoverflow.com/users/7811673/t-m-adam"}, "reply_to_user": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "edited": false, "score": 1, "creation_date": 1495066937, "post_id": 44036074, "comment_id": 75100048, "body": "That means <code>exec</code> is available . It&#39;s propably about permissons, like @Marat suggested. Use <code>chmod 0755</code>"}, {"owner": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "edited": false, "score": 1, "creation_date": 1495068386, "post_id": 44036074, "comment_id": 75100369, "body": "@ihue to check if this is the case you need to find out the username. Then change to the desired user terminal (<code>sudo su &lt;username&gt;</code>) and run the desired command. If it works, then you can either chmod 755, or chown/chgrp service script to the &lt;username&gt;, or add username to the script group - there are many ways to give exec permissions"}, {"owner": {"reputation": 43464, "user_id": 4480164, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Ds8pV.png?s=128&g=1", "display_name": "cyb3rZ", "link": "https://stackoverflow.com/users/4480164/cyb3rz"}, "edited": false, "score": 0, "creation_date": 1495069374, "post_id": 44036074, "comment_id": 75100557, "body": "If you guys have any other suggestions for me - please keep them coming. I needed them right now."}], "answers": [{"comments": [{"owner": {"reputation": 43464, "user_id": 4480164, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Ds8pV.png?s=128&g=1", "display_name": "cyb3rZ", "link": "https://stackoverflow.com/users/4480164/cyb3rz"}, "edited": false, "score": 0, "creation_date": 1495066400, "post_id": 44036621, "comment_id": 75099916, "body": "Thank-you answering, but I am not a C expert, but I&#39;ll look into it though if I got nothing in the next couple days. :)"}, {"owner": {"reputation": 124, "user_id": 7123871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ByZpW6v9znI/AAAAAAAAAAI/AAAAAAAAADY/BBB9UZqCDWs/photo.jpg?sz=128", "display_name": "NibbleBits", "link": "https://stackoverflow.com/users/7123871/nibblebits"}, "reply_to_user": {"reputation": 43464, "user_id": 4480164, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Ds8pV.png?s=128&g=1", "display_name": "cyb3rZ", "link": "https://stackoverflow.com/users/4480164/cyb3rz"}, "edited": false, "score": 0, "creation_date": 1495070370, "post_id": 44036621, "comment_id": 75100803, "body": "I mean what you basically do is make a PHP module in C that talks with the python DLL file or whatever much like the .exe file of the python interpreter would. Might need to take a look at the python source code to see how the .exe talks with the DLL though :). Or you could just invoke the execute commands in the PHP module but I dont recommend that the one I mentioned first would be much better"}, {"owner": {"reputation": 124, "user_id": 7123871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ByZpW6v9znI/AAAAAAAAAAI/AAAAAAAAADY/BBB9UZqCDWs/photo.jpg?sz=128", "display_name": "NibbleBits", "link": "https://stackoverflow.com/users/7123871/nibblebits"}, "reply_to_user": {"reputation": 43464, "user_id": 4480164, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Ds8pV.png?s=128&g=1", "display_name": "cyb3rZ", "link": "https://stackoverflow.com/users/4480164/cyb3rz"}, "edited": false, "score": 0, "creation_date": 1495070391, "post_id": 44036621, "comment_id": 75100809, "body": "Obviously if we are talking linux then .SO file."}, {"owner": {"reputation": 43464, "user_id": 4480164, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Ds8pV.png?s=128&g=1", "display_name": "cyb3rZ", "link": "https://stackoverflow.com/users/4480164/cyb3rz"}, "edited": false, "score": 0, "creation_date": 1495070535, "post_id": 44036621, "comment_id": 75100842, "body": "English please. jk. Your suggestion is very technical for me, and I completely respect that. But I just don&#39;t know where to start. I&#39;ll start with thank-you !"}, {"owner": {"reputation": 124, "user_id": 7123871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ByZpW6v9znI/AAAAAAAAAAI/AAAAAAAAADY/BBB9UZqCDWs/photo.jpg?sz=128", "display_name": "NibbleBits", "link": "https://stackoverflow.com/users/7123871/nibblebits"}, "reply_to_user": {"reputation": 43464, "user_id": 4480164, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Ds8pV.png?s=128&g=1", "display_name": "cyb3rZ", "link": "https://stackoverflow.com/users/4480164/cyb3rz"}, "edited": false, "score": 0, "creation_date": 1495070593, "post_id": 44036621, "comment_id": 75100855, "body": "I mean ive only ever written a hello world PHP module. But these things aren&#39;t designed for people not to use them. They are designed well and I am sure you could pull something off this way. Might be overkill for what your doing and no problem :)"}], "tags": [], "owner": {"reputation": 124, "user_id": 7123871, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-ByZpW6v9znI/AAAAAAAAAAI/AAAAAAAAADY/BBB9UZqCDWs/photo.jpg?sz=128", "display_name": "NibbleBits", "link": "https://stackoverflow.com/users/7123871/nibblebits"}, "is_accepted": true, "score": 1, "last_activity_date": 1495066264, "creation_date": 1495066264, "answer_id": 44036621, "question_id": 44036074, "link": "https://stackoverflow.com/questions/44036074/run-python-script-in-php/44036621#44036621", "title": "Run Python script in PHP", "body": "<p>One way of doing it is to write a PHP module in C that basically acts as a gateway to the python interpreter and then just feed everything through that. This would be much more efficient and is what I would do.</p>\n"}], "owner": {"reputation": 43464, "user_id": 4480164, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Ds8pV.png?s=128&g=1", "display_name": "cyb3rZ", "link": "https://stackoverflow.com/users/4480164/cyb3rz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 44036621, "answer_count": 1, "score": 0, "last_activity_date": 1501693743, "creation_date": 1495062154, "last_edit_date": 1592644375, "question_id": 44036074, "link": "https://stackoverflow.com/questions/44036074/run-python-script-in-php", "title": "Run Python script in PHP", "body": "<h1>My goal</h1>\n<p>is to run my python script using PHP.\nI have a start button on the front-end when I click on that button. It start a service.</p>\n<hr />\n<h1>Try #1</h1>\n<pre><code>$command = escapeshellcmd(&quot;python &quot;.public_path().'/python/start_clientsim.py 2&gt;&amp;1');\n$result = exec($command);\n</code></pre>\n<p>Still not working</p>\n<hr />\n<h1>Try #2</h1>\n<pre><code>$command = escapeshellcmd(&quot;python &quot;.public_path().'/python/start_clientsim.py 2&gt;&amp;1');\n$result = shell_exec($command);\n</code></pre>\n<p>Still not working</p>\n<hr />\n<h1>Try #3</h1>\n<p><code>chmod a+x start_clientsim.py</code></p>\n<pre><code>-rwxr-xr-x  1 bheng  staff  1154 May 17 19:42 start_clientsim.py\n</code></pre>\n<p>Re-tried still same result</p>\n<hr />\n<h1>Try #4</h1>\n<p><em>If I execute the command directly</em></p>\n<p><code>python /Applications/MAMP/htdocs/code/site/portal/public/python\u200c/start_clientsim.py 2&gt;&amp;1</code></p>\n<p>I got it to run <code>perfectly</code> fine.</p>\n<p><a href=\"https://i.stack.imgur.com/kSnKY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kSnKY.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<h1>Try #5</h1>\n<p><em>I tried with different python simple script</em></p>\n<p><code>python /Applications/MAMP/htdocs/code/site/portal/public/python/print.py</code></p>\n<p><strong>print.py</strong></p>\n<pre><code># This program prints Hello, world!\n\nprint('Hello, world!')\n</code></pre>\n<p>I got</p>\n<p>result: &quot;Hello, world!&quot;</p>\n<hr />\n<h1>Question</h1>\n<p>How would one go about and debug this further  ?</p>\n"}, {"tags": ["python", "matplotlib", "axis-labels"], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 6610946, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/116d123d9bd9b2c1ac5b76f896df6775?s=128&d=identicon&r=PG&f=1", "display_name": "pwprnt", "link": "https://stackoverflow.com/users/6610946/pwprnt"}, "edited": false, "score": 0, "creation_date": 1495066976, "post_id": 44036524, "comment_id": 75100055, "body": "I&#39;m not sure what you mean, I cannot see any xtick labels in my plot (unless I comment out those two lines you have there) and use the automatic labelling..  I am trying to avoid the automatic labelling and figure out how to do it manually"}], "tags": [], "owner": {"reputation": 5996, "user_id": 5917484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fafd4e82f40f116c5d2466663d8df13?s=128&d=identicon&r=PG&f=1", "display_name": "Tiny.D", "link": "https://stackoverflow.com/users/5917484/tiny-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1495065632, "creation_date": 1495065632, "answer_id": 44036524, "question_id": 44036061, "link": "https://stackoverflow.com/questions/44036061/x-axis-label-disappearing-in-matplotlib-and-basic-plotting-in-python/44036524#44036524", "title": "x axis label disappearing in matplotlib and basic plotting in python", "body": "<p>Based on your code, it is not disappear, it is set (overwrite) by these two functions:</p>\n\n<pre><code>ax2.set_xticks(np.arange(min(yearsTotal),max(yearsTotal)+1))\nax2.set_xticklabels(ax1.xaxis.get_majorticklabels(), rotation=90)\n</code></pre>\n\n<p><a href=\"https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_xticks.html#matplotlib.axes.Axes.set_xticks\" rel=\"nofollow noreferrer\">set_xticks()</a> on the axes will set the locations and <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_xticklabels.html#matplotlib.axes.Axes.set_xticklabels\" rel=\"nofollow noreferrer\">set_xticklabels()</a> will set the xtick labels with list of strings labels.</p>\n"}, {"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 2, "last_activity_date": 1495093077, "creation_date": 1495093077, "answer_id": 44041466, "question_id": 44036061, "link": "https://stackoverflow.com/questions/44036061/x-axis-label-disappearing-in-matplotlib-and-basic-plotting-in-python/44041466#44041466", "title": "x axis label disappearing in matplotlib and basic plotting in python", "body": "<p>Because you are using a <code>twinx</code>, it makes sense to operate only on the original axes (<code>ax1</code>).\nFurther, the ticklabels are not defined at the point where you call <code>ax1.xaxis.get_majorticklabels()</code>. </p>\n\n<p>If you want to set the ticks and ticklabels manually, you can use your own data to do so (although I wouldn't know why you'd prefer this over using the automatic labeling) by specifying a list or array </p>\n\n<pre><code>ticks = np.arange(min(yearsTotal),max(yearsTotal)+1)\nax1.set_xticks(ticks)\nax1.set_xticklabels(ticks)\n</code></pre>\n\n<p>Since the ticklabels are the same as the tickpositions here, you may also just do</p>\n\n<pre><code>ax1.set_xticks(np.arange(min(yearsTotal),max(yearsTotal)+1))\nplt.setp(ax1.get_xticklabels(), rotation=70)\n</code></pre>\n\n<p>Complete example:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np; np.random.seed(1)\n\nyearsTotal = np.arange(1977, 1999)\ntimeseries_data1 = np.cumsum(np.random.normal(size=len(yearsTotal)))+5\ntimeseries_data2 = np.cumsum(np.random.normal(size=len(yearsTotal)))+20\n\nfig, ax1 = plt.subplots()\nax1.plot(yearsTotal,timeseries_data1,'r-')\nax1.set_ylabel('Windspeed [m/s]')\nax1.tick_params('y',colors='r')\nax1.set_xticks(np.arange(min(yearsTotal),max(yearsTotal)+1))\nplt.setp(ax1.get_xticklabels(), rotation=70)\n\nax2 = ax1.twinx()\nax2.plot(yearsTotal,timeseries_data2,'b-')\nax2.set_ylabel('Open water duration [days]')\nax2.tick_params('y',colors='b')\n\nplt.title('My title')\nfig.tight_layout()\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/5qGxh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5qGxh.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 337, "user_id": 6610946, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/116d123d9bd9b2c1ac5b76f896df6775?s=128&d=identicon&r=PG&f=1", "display_name": "pwprnt", "link": "https://stackoverflow.com/users/6610946/pwprnt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6895, "favorite_count": 0, "accepted_answer_id": 44041466, "answer_count": 2, "score": 1, "last_activity_date": 1495093077, "creation_date": 1495062056, "question_id": 44036061, "link": "https://stackoverflow.com/questions/44036061/x-axis-label-disappearing-in-matplotlib-and-basic-plotting-in-python", "title": "x axis label disappearing in matplotlib and basic plotting in python", "body": "<p>I am new to matplotlib, and I am finding it very confusing.  I have spent quite a lot of time on the matplotlib tutorial website, but I still cannot really understand how to build a figure from scratch.  To me, this means doing everything manually... not using the plt.plot() function, but always setting figure, axis handles.</p>\n\n<p>Can anyone explain how to set up a figure from the ground up?  </p>\n\n<p>Right now, I have this code to generate a double y-axis plot.  But my xlabels are disappearing and I dont' know why</p>\n\n<pre><code>fig, ax1 = plt.subplots()\nax1.plot(yearsTotal,timeseries_data1,'r-')\nax1.set_ylabel('Windspeed [m/s]')\nax1.tick_params('y',colors='r')\n\nax2 = ax1.twinx()\nax2.plot(yearsTotal,timeseries_data2,'b-')\nax2.set_xticks(np.arange(min(yearsTotal),max(yearsTotal)+1))\nax2.set_xticklabels(ax1.xaxis.get_majorticklabels(), rotation=90)\nax2.set_ylabel('Open water duration [days]')\nax2.tick_params('y',colors='b')\n\nplt.title('My title')\nfig.tight_layout()\nplt.savefig('plots/my_figure.png',bbox_inches='tight')\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "list", "utf-8", "web-scraping"], "comments": [{"owner": {"reputation": 11899, "user_id": 7216865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X90W9.png?s=128&g=1", "display_name": "Maurice Meyer", "link": "https://stackoverflow.com/users/7216865/maurice-meyer"}, "edited": false, "score": 5, "creation_date": 1495062159, "post_id": 44036041, "comment_id": 75098790, "body": "<code>\\n</code> are line breaks, that you can easily replace or split at."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1495062498, "post_id": 44036041, "comment_id": 75098884, "body": "It&#39;s not ruining your data. Your data is fine. It still contains exactly the same characters as before; it&#39;s just displayed differently from how it would be if you <code>print</code>ed the strings directly."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1495062555, "post_id": 44036041, "comment_id": 75098897, "body": "Note that the code you actually ran doesn&#39;t include the <code>map(lambda x: x.strip().encode(&#39;ascii&#39;), names)</code> step, and that the <code>encode(&#39;ascii&#39;)</code> part probably isn&#39;t necessary."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1495069944, "post_id": 44036041, "comment_id": 75100700, "body": "If you <code>print(len(links))</code> you might learn something."}, {"owner": {"reputation": 273, "user_id": 7326431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1981b6b6f9d1b7cd9e822c7b822e3a8?s=128&d=identicon&r=PG&f=1", "display_name": "Impuls3H", "link": "https://stackoverflow.com/users/7326431/impuls3h"}, "edited": false, "score": 0, "creation_date": 1495070531, "post_id": 44036041, "comment_id": 75100841, "body": "As all of them have mentioned, I think splitting the string makes most sense. You can then get them into a list and splice the list into even and odd element arrays or pandas dataframe columns for your analysis."}, {"owner": {"reputation": 7, "user_id": 8028050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/296f72198c5afb23a6f2b36189c1f84b?s=128&d=identicon&r=PG", "display_name": "venkatesh subramaniam", "link": "https://stackoverflow.com/users/8028050/venkatesh-subramaniam"}, "edited": false, "score": 0, "creation_date": 1495075658, "post_id": 44036041, "comment_id": 75101943, "body": "Thank you all. I found the solution. I created a dataframe with two columns Years and Total"}, {"owner": {"reputation": 1224, "user_id": 3706356, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FfyVw.jpg?s=128&g=1", "display_name": "Ubdus Samad", "link": "https://stackoverflow.com/users/3706356/ubdus-samad"}, "edited": false, "score": 0, "creation_date": 1495082812, "post_id": 44036041, "comment_id": 75103718, "body": "list.split(&#39;\\n&#39;) may work , and then just pop the empty elements made due to simultaneous newline characters!"}], "answers": [{"tags": [], "owner": {"reputation": 239, "user_id": 4173965, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZB18I2sZQtU/AAAAAAAAAAI/AAAAAAAAABQ/PWelr2IqAGY/photo.jpg?sz=128", "display_name": "haoyu cai", "link": "https://stackoverflow.com/users/4173965/haoyu-cai"}, "is_accepted": true, "score": 1, "last_activity_date": 1495087461, "creation_date": 1495087461, "answer_id": 44039753, "question_id": 44036041, "link": "https://stackoverflow.com/questions/44036041/removing-utf-8-encoding-in-python/44039753#44039753", "title": "Removing UTF 8 encoding in python", "body": "<p>You can use find_all <code>tr</code> and <code>td</code> like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import requests\nfrom bs4 import BeautifulSoup\nimport urllib \nurl = \"https://www.faa.gov/data_research/passengers_cargo/unruly_passengers/\"\nr = requests.get(url)\nsoup = BeautifulSoup(r.content)\nlinks = soup.find_all(\"tr\")\n\ndata = []\nfor link in links:\n    tds = link.find_all('td')\n    if tds:\n        data.append({'year':tds[0].text,'total':tds[1].text})\n\nprint(data)\n</code></pre>\n\n<p>It's worked.</p>\n\n<p>Hope it helps you</p>\n"}], "owner": {"reputation": 7, "user_id": 8028050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/296f72198c5afb23a6f2b36189c1f84b?s=128&d=identicon&r=PG", "display_name": "venkatesh subramaniam", "link": "https://stackoverflow.com/users/8028050/venkatesh-subramaniam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 44039753, "answer_count": 1, "score": 0, "last_activity_date": 1495087461, "creation_date": 1495061930, "last_edit_date": 1495082297, "question_id": 44036041, "link": "https://stackoverflow.com/questions/44036041/removing-utf-8-encoding-in-python", "title": "Removing UTF 8 encoding in python", "body": "<p>I tried scraping the webpage for Passengers &amp; Cargo data. I couldn't convert them into normal data, and web encoding seems to be the challenge.</p>\n\n<p>The Code I used is: </p>\n\n<pre><code>from __future__ import print_function\nimport requests\nimport pandas as pd\nfrom bs4 import BeautifulSoup\nimport urllib \nurl = \"https://www.faa.gov/data_research/passengers_cargo/unruly_passengers/\"\nr = requests.get(url)\nsoup = BeautifulSoup(r.content)\nlinks = soup.find_all(\"tbody\")\n\nfor link in links:\n    print(link.text)\n</code></pre>\n\n<p>Output1</p>\n\n<p><img src=\"https://i.stack.imgur.com/VeYy4.png\" alt=\"\"></p>\n\n<p>This prints in the format Year and Total. But when I append it to a list, the encoding ruins the data. You can see that in Output1</p>\n\n<pre><code>names = []\nfor link in links:\n    names.append(link.text)\nnames = map(lambda x: x.strip().encode('ascii'), names)\nprint(names)\n</code></pre>\n\n<p>Output2</p>\n\n<p><img src=\"https://i.stack.imgur.com/L4E3v.png\" alt=\"\"></p>\n\n<p>The desired output should be Years and Total for me to perform analyses    </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 120, "user_id": 9899774, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Wuping Xin", "link": "https://stackoverflow.com/users/9899774/wuping-xin"}, "edited": false, "score": 0, "creation_date": 1575118012, "post_id": 44036005, "comment_id": 104462701, "body": "In the last line env.Net.VehicleNetworkPerformanceMeasurement.AttValue( &#39;DelayTot&#39; ), you should include sub attributes as"}], "answers": [{"tags": [], "owner": {"reputation": 113, "user_id": 5709763, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b5629621eebc2be51ac68c92d2066a27?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Halabi", "link": "https://stackoverflow.com/users/5709763/ryan-halabi"}, "is_accepted": true, "score": 1, "last_activity_date": 1495147147, "creation_date": 1495147147, "answer_id": 44058853, "question_id": 44036005, "link": "https://stackoverflow.com/questions/44036005/vissim-com-interface-vehiclenetworkperformancemeasurement/44058853#44058853", "title": "VISSIM COM Interface VehicleNetworkPerformanceMeasurement", "body": "<p>turns out for attributes with sub attributes you need to supply the subattributes in the query.  Here is some example code from the VISSIM documentation for how to query the TravelTimeMeasurements</p>\n\n<pre><code>Veh_TT_measurement = Vissim.Net.VehicleTravelTimeMeasurements.ItemByKey(Veh_TT_measurement_number)\n# Syntax to get the travel times:\n#   Veh_TT_measurement.AttValue('TravTm(sub_attribut_1, sub_attribut_2, sub_attribut_3)')\n#\n# sub_attribut_1: SimulationRun\n#       1, 2, 3, ... Current:     the value of one specific simulation (number according to the tribute \"No\" of Simulation Runs (see List of Simulation Runs))\n#       Avg, StdDev, Min, Max:    aggregated value of all simulations runs: Avg, StdDev, Min, Max\n# sub_attribut_2: TimeInterval\n#       1, 2, 3, ... Last:        the value of one specific time interval (number of time interval always starts at 1 (first time interval), 2 (2nd TI), 3 (3rd TI), ...)\n#       Avg, StdDev, Min, Max:    aggregated value of all time interval of one simulation: Avg, StdDev, Min, Max\n#       Total:                    sum of all time interval of one simulation\n# sub_attribut_3: VehicleClass\n#       10, 20 or All             values only from vehicles of the defined vehicle class number (according to the attribute \"No\" of Vehicle Classes)\n#                                 Note: You can only access the results of specific vehicle classes if you set it in Evaluation &gt; Configuration &gt; Result Attributes\n#\n# The value of on time interval is the arithmetic mean of all single travel times of the vehicles.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 14257620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340d35d68f2a50660b11d9827702fc87?s=128&d=identicon&r=PG&f=1", "display_name": "HyeAnn", "link": "https://stackoverflow.com/users/14257620/hyeann"}, "is_accepted": false, "score": 0, "last_activity_date": 1611885430, "creation_date": 1611885430, "answer_id": 65947778, "question_id": 44036005, "link": "https://stackoverflow.com/questions/44036005/vissim-com-interface-vehiclenetworkperformancemeasurement/65947778#65947778", "title": "VISSIM COM Interface VehicleNetworkPerformanceMeasurement", "body": "<p>Halabi said it exactly.\nMore specifically, you can query sub-attributes like</p>\n<pre><code>VNPM = env.Net.VehicleNetworkPerformanceMeasurement.AttValue( 'DelayTot(Current, Tot, All)' )\n</code></pre>\n<p>To check if there exists any sub-attributes for attributes you want to use, 'Help' &gt; 'COM Help' on Vissim toolbar will help you.</p>\n"}], "owner": {"reputation": 113, "user_id": 5709763, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b5629621eebc2be51ac68c92d2066a27?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Halabi", "link": "https://stackoverflow.com/users/5709763/ryan-halabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1346, "favorite_count": 0, "accepted_answer_id": 44058853, "answer_count": 2, "score": 0, "last_activity_date": 1611885430, "creation_date": 1495061715, "last_edit_date": 1495062560, "question_id": 44036005, "link": "https://stackoverflow.com/questions/44036005/vissim-com-interface-vehiclenetworkperformancemeasurement", "title": "VISSIM COM Interface VehicleNetworkPerformanceMeasurement", "body": "<p>I'm using Python to communicate with the VISSIM traffic simulation software using its COM interface.  </p>\n\n<p>I'm trying to access the VehicleNetworkPerformanceMeasurement total delay attribute while running a simulation</p>\n\n<pre><code>#run vissim\nenv = win32com.client.Dispatch('Vissim.Vissim.800') \n\n#load layout,network\nenv.LoadNet( r'X:\\Users\\rHalabi\\singleIntersection\\Ryan.inpx')\nenv.LoadLayout( r'X:\\Users\\rHalabi\\singleIntersection\\Ryan.layx' )\n\n#tell vissim to collect vehicle performance data\nenv.Net.Evaluation.SetAttValue( 'VehNetPerfCollectData', 1)\n\n#run a few steps\nfor i in range(10):\n    env.Simulation.RunSingleStep()\n\n#collect results\nenv.Net.VehicleNetworkPerformanceMeasurement.AttValue( 'DelayTot' )\n</code></pre>\n\n<p>The last line returns an error</p>\n\n<pre><code>com_error: (-2147352567, 'Exception occurred.', (0, 'VISSIM.Vissim.800', 'Sub-attribute not specified', None, 0, -2147352567), None)\n</code></pre>\n\n<p>I've tried other attributes besides 'DelayTot' but none work.  I've followed the documentation and been able to query other objects no problem.</p>\n\n<p>How do I access this data?</p>\n"}, {"tags": ["python", "pandas", "datetime", "matplotlib", "plot"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8028043, "user_type": "registered", "profile_image": "https://graph.facebook.com/1195599373853850/picture?type=large", "display_name": "Diego Sisalima", "link": "https://stackoverflow.com/users/8028043/diego-sisalima"}, "edited": false, "score": 0, "creation_date": 1495117463, "post_id": 44036124, "comment_id": 75126271, "body": "Excellent it works, thanks I didn&#39;t know about this function (resample)"}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 2, "last_activity_date": 1495062499, "creation_date": 1495062499, "answer_id": 44036124, "question_id": 44035958, "link": "https://stackoverflow.com/questions/44035958/plot-dataframe-by-datatime-grouping-by-month-year-day/44036124#44036124", "title": "Plot Dataframe by DataTime Grouping by Month, Year, Day", "body": "<p>Start with converting <code>Submit_Date</code> into a timedate (if it is not a timedate yet) and making it the index:</p>\n\n<pre><code>df['Submit_Date'] = pd.to_datetime(df['Submit_Date'])\ndf.set_index('Submit_Date', inplace = True)\n</code></pre>\n\n<p>Now you can resample your data at any frequency and plot it. For example, resample by 1 month (get monthly counts):</p>\n\n<pre><code>df.resample('1M').count()['Description'].plot()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8028043, "user_type": "registered", "profile_image": "https://graph.facebook.com/1195599373853850/picture?type=large", "display_name": "Diego Sisalima", "link": "https://stackoverflow.com/users/8028043/diego-sisalima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3594, "favorite_count": 1, "accepted_answer_id": 44036124, "answer_count": 1, "score": 1, "last_activity_date": 1495062499, "creation_date": 1495061486, "question_id": 44035958, "link": "https://stackoverflow.com/questions/44035958/plot-dataframe-by-datatime-grouping-by-month-year-day", "title": "Plot Dataframe by DataTime Grouping by Month, Year, Day", "body": "<p>How can I make a Plot counting the elements that are in a specific Time Group. I have a dataframe like this</p>\n\n<pre><code>Incident_Number Submit_Date Description\n001 05/04/2017 12:00:45 Problem1\n002 05/05/2017 13:00:00 Problem2\n003 05/05/2017 14:00:00 Problem3\n004 07/05/2017 19:00:00 Problem4\n005 07/06/2017 08:00:00 Problem5\n</code></pre>\n\n<p>and how could be possible to make a line plot that show me the total Incidents by month, date, weekday, or year. I tried grouping by, but this take many lines, first extracting the month, year, and date and then transforming again in datetime to visualize. Any ideas?</p>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["python", "class", "dictionary"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495061009, "post_id": 44035827, "comment_id": 75098432, "body": "<code>foo</code> is an attribute, not a property."}, {"owner": {"reputation": 5102, "user_id": 327694, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/affc703514153388019ab26f0eb6ab7d?s=128&d=identicon&r=PG", "display_name": "Josep Valls", "link": "https://stackoverflow.com/users/327694/josep-valls"}, "edited": false, "score": 0, "creation_date": 1495061077, "post_id": 44035827, "comment_id": 75098451, "body": "not sure if will suffice, but all that &quot;junk&quot; starts with __, why not filter it? <code>[i for i in dir(x) if not i.startswith(&quot;__&quot;)]</code>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1495061097, "post_id": 44035827, "comment_id": 75098458, "body": "&quot;I guess I would have to override <code>__dict__</code>&quot; - don&#39;t do that. It breaks too many expectations and too much code. They tried it with <code>namedtuple</code>, it was a bad idea, and they had to change it back."}, {"owner": {"reputation": 7411, "user_id": 2200659, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ImYIK.jpg?s=128&g=1", "display_name": "Anders", "link": "https://stackoverflow.com/users/2200659/anders"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495061208, "post_id": 44035827, "comment_id": 75098496, "body": "@juanpa.arrivillaga I was not aware of the distinction. Thanks for pointing it out."}, {"owner": {"reputation": 7411, "user_id": 2200659, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ImYIK.jpg?s=128&g=1", "display_name": "Anders", "link": "https://stackoverflow.com/users/2200659/anders"}, "reply_to_user": {"reputation": 5102, "user_id": 327694, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/affc703514153388019ab26f0eb6ab7d?s=128&d=identicon&r=PG", "display_name": "Josep Valls", "link": "https://stackoverflow.com/users/327694/josep-valls"}, "edited": false, "score": 0, "creation_date": 1495061390, "post_id": 44035827, "comment_id": 75098548, "body": "@JosepValls If I add a method, it would be included since it does not start with <code>__</code>. Maybe I should just filter out all functions?"}], "answers": [{"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 1, "last_activity_date": 1495061666, "last_edit_date": 1495061666, "creation_date": 1495061145, "answer_id": 44035900, "question_id": 44035827, "link": "https://stackoverflow.com/questions/44035827/get-dictionary-that-includes-computed-properties-from-python-object/44035900#44035900", "title": "Get dictionary that includes computed properties from Python object?", "body": "<p>The fundamental issue here is that <code>dir</code> returns:</p>\n\n<pre><code>Else, return an alphabetized list of names comprising (some of) the attributes\n    of the given object, and of attributes **reachable** from it\n</code></pre>\n\n<p>But <code>foo</code> is <em>not</em> a attribute of the instance, it is an <em>attribute of the class</em> that is <em>reachable</em> from the instance, hence its inclusion in <code>dir</code> output but absence from the instance's <code>__dict__</code> . Check <code>Example.__dict__</code>. <em>everything</em> in Python defined in the class block will <em>belong to the class</em>. But in the <code>__init__</code> method, you explicitely assign <code>self.foo = val</code>, which assigns to the <em>instance</em>.</p>\n\n<p>Consider:</p>\n\n<pre><code>In [2]: e = Example()\n\nIn [3]: e.__dict__\nOut[3]: {'foo': 1}\n\nIn [4]: Example.__dict__\nOut[4]:\nmappingproxy({'__dict__': &lt;attribute '__dict__' of 'Example' objects&gt;,\n              '__doc__': None,\n              '__init__': &lt;function __main__.Example.__init__&gt;,\n              '__module__': '__main__',\n              '__weakref__': &lt;attribute '__weakref__' of 'Example' objects&gt;,\n              'bar': &lt;property at 0x104214408&gt;})\n</code></pre>\n\n<p>Maybe the easiest solution is to take advantage of <code>dir</code>'s awareness of attributes <em>reachable</em> in combination with the following filtering operation:</p>\n\n<pre><code>In [12]: list(s for s in dir(e) if not callable(getattr(e, s)) and not s.startswith('__'))\nOut[12]: ['bar', 'foo']\n</code></pre>\n"}], "owner": {"reputation": 7411, "user_id": 2200659, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ImYIK.jpg?s=128&g=1", "display_name": "Anders", "link": "https://stackoverflow.com/users/2200659/anders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 44035900, "answer_count": 1, "score": 1, "last_activity_date": 1495061666, "creation_date": 1495060775, "last_edit_date": 1495061532, "question_id": 44035827, "link": "https://stackoverflow.com/questions/44035827/get-dictionary-that-includes-computed-properties-from-python-object", "title": "Get dictionary that includes computed properties from Python object?", "body": "<p>Lets say I have a Python class containing a mix of properties created in the constructor and computed properties created using the <code>property</code> decorator:</p>\n\n<pre><code>class Example:\n\n    def __init__(self):\n        self.foo = 1\n\n    @property\n    def bar(self):\n        return 2\n\n    def baz(self, x):\n        return x * x\n</code></pre>\n\n<p>I want to generate a dictionary containing both kinds of properties, but nothing else. However, if I do <code>vars(Example())</code> I only get <code>foo</code>. If I do <code>dir(Example())</code> I get both <code>foo</code> and <code>bar</code>, but <code>baz</code> and loads of other junk as well.</p>\n\n<p>Is it possible to automatically generate such a dictionary? I guess I would have to override <code>__dict__</code>? Perhaps by calling <code>dir</code> and somehow filtering out the unintersting parts?</p>\n\n<p>I want to avoid having to enumerate all the properties by hand.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe", "merge"], "answers": [{"comments": [{"owner": {"reputation": 7251, "user_id": 30181, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5ac3937861ef2041ad87db1c2cdf5a42?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/30181/alex"}, "edited": false, "score": 0, "creation_date": 1495061945, "post_id": 44035912, "comment_id": 75098720, "body": "Oh, very clear now! So the answer is yes though, pandas &quot;fails&quot; to rename the column, but in a very reasonable and precise way.  It just means that sequentially merging data frames with identical column names will require renaming some columns manually in the end. It would be nice to have a flag to force column renames. Thanks!"}], "tags": [], "owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "is_accepted": true, "score": 5, "last_activity_date": 1495061229, "creation_date": 1495061229, "answer_id": 44035912, "question_id": 44035777, "link": "https://stackoverflow.com/questions/44035777/does-python-pandas-merge-and-join-fail-to-rename-columns-by-suffix-argument/44035912#44035912", "title": "Does Python Pandas merge (and join) fail to rename columns by suffix argument?", "body": "<p>The <code>suffixes</code> argument is used only to distinguish names that are shared but which we're not merging on.  As the documentation explains:</p>\n\n<blockquote>\n  <p>suffixes : 2-length sequence (tuple, list, ...)\n      Suffix to apply to overlapping column names in the left and right\n      side, respectively</p>\n</blockquote>\n\n<p>The key word here is <em>overlapping</em>.</p>\n\n<p>When you merge <code>df0</code> and <code>df1</code> on <code>serial_num</code>, each frame has a <code>vals</code>,  which become <code>vals_df0</code> and <code>vals_df1</code> because of the suffixes.</p>\n\n<p>Then you merge a frame with columns <code>['serial_num', 'vals_df0', 'vals_df1']</code> with one which has <code>['serial_num', 'vals']</code>.  <code>vals</code> doesn't exist in both, so there's no need to use any suffix to distinguish it, and we get <code>['serial_num', 'vals_df0', 'vals_df1', 'vals']</code>.</p>\n\n<p>If you want a suffix to be applied to every non-shared column, you'll have to do it manually-- that's not what the <code>suffixes</code> argument is for.</p>\n"}, {"tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": false, "score": 2, "last_activity_date": 1495061342, "creation_date": 1495061342, "answer_id": 44035934, "question_id": 44035777, "link": "https://stackoverflow.com/questions/44035777/does-python-pandas-merge-and-join-fail-to-rename-columns-by-suffix-argument/44035934#44035934", "title": "Does Python Pandas merge (and join) fail to rename columns by suffix argument?", "body": "<p>Suffixes keyword is only used in case the merged dataframe has columns with same name, it ensures that each column has unique name. \nIn your second merge, you are merging df01 with columns 'serial_num', 'vals_df0', 'vals_df1' and df2 with columns 'serial_num', 'val'. \nYou don't have any duplicate column names except 'serial_no' on which you are merging so you end up getting 'serial_num', 'vals_df0', 'vals_df1', 'vals'</p>\n"}], "owner": {"reputation": 7251, "user_id": 30181, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5ac3937861ef2041ad87db1c2cdf5a42?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/30181/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2350, "favorite_count": 0, "accepted_answer_id": 44035912, "answer_count": 2, "score": 3, "last_activity_date": 1579886971, "creation_date": 1495060456, "last_edit_date": 1579886971, "question_id": 44035777, "link": "https://stackoverflow.com/questions/44035777/does-python-pandas-merge-and-join-fail-to-rename-columns-by-suffix-argument", "title": "Does Python Pandas merge (and join) fail to rename columns by suffix argument?", "body": "<p>I am sequentially merging some data frames by a key column, but I found that the columns aren't being renamed as expected with the suffix argument. I'm using Python 3.5 and Panadas 0.19.2.</p>\n\n<pre><code>import pandas as pd\ndf0 = pd.DataFrame({'serial_num': ['01', '02', '03'], 'vals': ['A2', 'A3', 'A6']})\ndf1 = pd.DataFrame({'serial_num': ['01', '02', '03'], 'vals': ['B2', 'B3', 'B6']})\ndf2 = pd.DataFrame({'serial_num': ['01', '02', '03'], 'vals': ['C2', 'C3', 'C6']})\n\ndf_01 = pd.merge(df0, df1, on=\"serial_num\", suffixes=(\"_df0\",\"_df1\"), copy=True)\nprint(df_01.columns)\ndf_012 = pd.merge(df_01, df2, on=\"serial_num\", suffixes=(\"_foobar\",\"_df2\"), copy=True)\nprint(df_012.columns)\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>Index(['serial_num', 'vals_df0', 'vals_df1'], dtype='object')\nIndex(['serial_num', 'vals_df0', 'vals_df1', 'vals'], dtype='object')\n</code></pre>\n\n<p>This is odd because the <a href=\"http://pandas.pydata.org/pandas-docs/stable/merging.html\" rel=\"nofollow noreferrer\">Pandas documentation on merge</a> doesn't suggest, that this should be the result. The expected result of <code>print(df_012.columns)</code> is <code>Index(['serial_num', 'vals_df0_foobar', 'vals_df1_foobar', 'vals_df2'], dtype='object')</code>. It does look like the data results are correct. I tried several things including <code>copy = True</code>, <code>copy.deepcopy(merged_df)</code>, and <code>copy.deepcopy(merged_df)</code>. Using join (<code>df_01 = df0.join(df1, on=\"serial_num\", lsuffix=\"_df0\", rsuffix=\"_df1\"</code>) gives similar results. And it gets stranger, sequential merges eventually do rename the columns:</p>\n\n<pre><code>df3 = pd.DataFrame({'serial_num': ['01', '02', '03'], 'vals': ['D2', 'D3', 'D6']})\ndf_0123 = pd.merge(df_012, df3, on=\"serial_num\", suffixes=(\"\",\"_df3\"), copy=True)\nprint(df_0123.columns)\ndf_01230 = pd.merge(df_0123, df1, on=\"serial_num\", suffixes=(\"_foo\",\"_bar\"), copy=True)\nprint(df_01230.columns)\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>Index(['serial_num', 'vals_df0', 'vals_df1', 'vals', 'vals_df3'], dtype='object')\nIndex(['serial_num', 'vals_df0', 'vals_df1', 'vals_foo', 'vals_df3',\n   'vals_bar'],\n  dtype='object')\n</code></pre>\n\n<p>If you followed all of that are you as surprised as me that merge suddenly renamed vals to vals_foo? Is Pandas failing to rename columns by the suffix argument in every other call?</p>\n"}, {"tags": ["python", "user-interface", "tkinter", "grid", "calculator"], "answers": [{"tags": [], "owner": {"reputation": 671, "user_id": 8022336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VsZUw.png?s=128&g=1", "display_name": "pointerless", "link": "https://stackoverflow.com/users/8022336/pointerless"}, "is_accepted": false, "score": 0, "last_activity_date": 1495060753, "creation_date": 1495060753, "answer_id": 44035823, "question_id": 44035737, "link": "https://stackoverflow.com/questions/44035737/python-grid-spacing-for-calculator-app/44035823#44035823", "title": "python grid spacing for calculator app", "body": "<p>Maybe have a dictionary of button names and size values:</p>\n\n<pre><code>bsize = {'AC':6,'0':6,'1':3,'2':3 ...}\n</code></pre>\n\n<p>then reference it when defining the size to place:</p>\n\n<pre><code>buttons = [['AC' , '%', '+' ],\n           ['7' , '8' , '9' , '-' ],\n           ['4' , '5' , '6' , '*' ],\n           ['1' , '2' , '3' , '/' ],\n           ['0' , '.' , '=' ]]\n\nfor r in range(len(buttons)):\n    for c in range(len(buttons[r])):\n\n        def cmd(x = buttons[r][c]):\n            self.click(x)\n\n        b = Button(self,\n                   text = buttons[r][c],\n                   width = bsize[buttons[r][c]],\n                   relief = RAISED,\n                   command = cmd)\n        b.grid(row = r + 1, column = c)\n</code></pre>\n\n<p>You may also need to change the b.grid() args.</p>\n"}, {"tags": [], "owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "is_accepted": false, "score": 0, "last_activity_date": 1495062436, "last_edit_date": 1495062436, "creation_date": 1495061059, "answer_id": 44035882, "question_id": 44035737, "link": "https://stackoverflow.com/questions/44035737/python-grid-spacing-for-calculator-app/44035882#44035882", "title": "python grid spacing for calculator app", "body": "<p>You need to give the AC and zero buttons a columnspan of 2. That turns out to be a little awkward with your current architecture, but you could try something like this:</p>\n\n<pre><code>buttons = [['AC' , None, '%', '+' ],\n           ['7' , '8' , '9' , '-' ],\n           ['4' , '5' , '6' , '*' ],\n           ['1' , '2' , '3' , '/' ],\n           ['0' , None '.' , '=' ]]\n\nfor r in range(len(buttons)):\n    for c in range(len(buttons[r])):\n\n        if buttons[r][c] is None:\n            continue\n        def cmd(x = buttons[r][c]):\n            self.click(x)\n\n        b = Button(self,\n                   text = buttons[r][c],\n                   width = 3,\n                   relief = RAISED,\n                   command = cmd)\n        if buttons[r][c] in ['AC', '0']:\n            b.grid(row = r + 1, column = c, columnspan=2, sticky='EW')\n        else:\n            b.grid(row = r + 1, column = c)\n</code></pre>\n\n<p>Although, I might suggest something more like this:</p>\n\n<pre><code>buttons = [\n    ('AC', 0, 0, 2),\n    ('%', 0, 2, 1),\n    ('+', 0, 3, 1),\n    ('7', 1, 0, 1),\n    ('8', 1, 1, 1),\n    ('9', 1, 2, 1),\n    ('-', 1, 3, 1),\n    ('4', 2, 0, 1),\n    ('5', 2, 1, 1),\n    ('6', 2, 2, 1),\n    ('*', 2, 3, 1),\n    ('1', 3, 0, 1),\n    ('2', 3, 1, 1),\n    ('3', 3, 2, 1),\n    ('/', 3, 3, 1),\n    ('0', 4, 0, 2),\n    ('.', 4, 2, 1),\n    ('=', 4, 3, 1)]\n\n\nfor label, row, column, span in buttons:\n    def cmd(x=label):\n        self.click(x)\n\n    b = tkinter.Button(root,\n               text = label,\n               width = 3,\n               relief = tkinter.RAISED,\n               command = cmd)\n    b.grid(row=row, column=column, columnspan=span, sticky='EW')\n\nroot.mainloop()\n</code></pre>\n\n<p>This has the benefit of being a little more explicit with a little less hacky-ness.</p>\n"}], "owner": {"reputation": 1, "user_id": 7670127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0be4c7ac76c6a269d730ecb2b0161e89?s=128&d=identicon&r=PG&f=1", "display_name": "Timothy Chang", "link": "https://stackoverflow.com/users/7670127/timothy-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495068668, "creation_date": 1495060131, "last_edit_date": 1495068668, "question_id": 44035737, "link": "https://stackoverflow.com/questions/44035737/python-grid-spacing-for-calculator-app", "title": "python grid spacing for calculator app", "body": "<p><a href=\"https://i.stack.imgur.com/sYAME.png\" rel=\"nofollow noreferrer\">What I'm trying to achieve</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/2ezrm.png\" rel=\"nofollow noreferrer\">What I have</a></p>\n\n<p>I am trying to make the AC button and the \"0\" button larger. How can I do this without messing up my for loop? I have tried columnspan and it does not work for me.</p>\n\n<pre><code>buttons = [['AC' , '%', '+' ],\n           ['7' , '8' , '9' , '-' ],\n           ['4' , '5' , '6' , '*' ],\n           ['1' , '2' , '3' , '/' ],\n           ['0' , '.' , '=' ]]\n\nfor r in range(len(buttons)):\n    for c in range(len(buttons[r])):\n\n        def cmd(x = buttons[r][c]):\n            self.click(x)\n\n        b = Button(self,\n                   text = buttons[r][c],\n                   width = 3,\n                   relief = RAISED,\n                   command = cmd)\n        b.grid(row = r + 1, column = c)\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "class"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1495060087, "post_id": 44035723, "comment_id": 75098162, "body": "In a class statement, the &quot;argument&quot; to <code>ClassName</code> are the <i>classes from which to inherit</i>."}, {"owner": {"reputation": 171, "user_id": 7304592, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e68cd4d56f25660899335af693385c19?s=128&d=identicon&r=PG&f=1", "display_name": "Programah", "link": "https://stackoverflow.com/users/7304592/programah"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495060124, "post_id": 44035723, "comment_id": 75098173, "body": "ooh, post that as an answer, ill accept it."}], "answers": [{"tags": [], "owner": {"reputation": 3072, "user_id": 6725184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40514a449959fa5e76f19afc41436221?s=128&d=identicon&r=PG&f=1", "display_name": "Christian K&#246;nig", "link": "https://stackoverflow.com/users/6725184/christian-k%c3%b6nig"}, "is_accepted": true, "score": 2, "last_activity_date": 1495060277, "creation_date": 1495060277, "answer_id": 44035754, "question_id": 44035723, "link": "https://stackoverflow.com/questions/44035723/in-what-instance-would-i-require-parameters-in-python-classes/44035754#44035754", "title": "In what instance would I require parameters in python classes?", "body": "<p>Have a look at the <a href=\"https://docs.python.org/3.6/tutorial/classes.html#inheritance\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<p><code>class foo(x):</code> means that class <code>foo</code> inherits from parent class <code>x</code>.</p>\n\n<p>When <a href=\"https://docs.python.org/3.6/tutorial/classes.html#class-and-instance-variables\" rel=\"nofollow noreferrer\">creating an instance</a> of the class, the <code>__init__</code> method is called with parameters (of which the first one should always be <code>self</code>).</p>\n"}], "owner": {"reputation": 171, "user_id": 7304592, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e68cd4d56f25660899335af693385c19?s=128&d=identicon&r=PG&f=1", "display_name": "Programah", "link": "https://stackoverflow.com/users/7304592/programah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 44035754, "answer_count": 1, "score": -1, "last_activity_date": 1495060570, "creation_date": 1495060025, "question_id": 44035723, "link": "https://stackoverflow.com/questions/44035723/in-what-instance-would-i-require-parameters-in-python-classes", "title": "In what instance would I require parameters in python classes?", "body": "<p>Let's assume I have the following code:</p>\n\n<pre><code>x = 1\ny = 1\nclass foo(x):\n    def __init__(y):\n        print x\n        print y\ntest = foo(x)\n</code></pre>\n\n<p>This code obviously will not work. But in what instance would you pass a variable through the class itself, in this case x?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 0, "creation_date": 1495059775, "post_id": 44035686, "comment_id": 75098050, "body": "First of all can you format your code ? It&#39;s not well formated."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1495059838, "post_id": 44035686, "comment_id": 75098074, "body": "Clearly, whatever is in <code>line[i]</code> is not  convertable to an <code>int</code>, so what does your file look like?"}, {"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1495061240, "post_id": 44035686, "comment_id": 75098501, "body": "All you have to do is insert a line <code>print(line)</code> before <code>for i in range...</code>.  When you see a traceback look just at what appears just before it.  Then you will know exactly what the content of <code>line</code> is that&#39;s causing the problem."}, {"owner": {"reputation": 886, "user_id": 2699475, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Zx13u.png?s=128&g=1", "display_name": "mwil.me", "link": "https://stackoverflow.com/users/2699475/mwil-me"}, "edited": false, "score": 0, "creation_date": 1495068339, "post_id": 44035686, "comment_id": 75100358, "body": "The <code>sudoku.txt</code> file is probably not looking like you expect it. You should post some lines from it as well."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8027979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aacf44bfffabe61e85c21f8d051a0c97?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique", "link": "https://stackoverflow.com/users/8027979/henrique"}, "edited": false, "score": 0, "creation_date": 1495073587, "post_id": 44035750, "comment_id": 75101487, "body": "Sorry I&#39;m new and I really suck at it. I though that my codes would work but I&#39;m still having errors and the file doesn&#39;t look like how I want it to be. Thanks for helping a lost cause like me."}, {"owner": {"reputation": 671, "user_id": 8022336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VsZUw.png?s=128&g=1", "display_name": "pointerless", "link": "https://stackoverflow.com/users/8022336/pointerless"}, "reply_to_user": {"reputation": 13, "user_id": 8027979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aacf44bfffabe61e85c21f8d051a0c97?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique", "link": "https://stackoverflow.com/users/8027979/henrique"}, "edited": false, "score": 0, "creation_date": 1495098119, "post_id": 44035750, "comment_id": 75112157, "body": "We all have to start somewhere :)"}], "tags": [], "owner": {"reputation": 671, "user_id": 8022336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VsZUw.png?s=128&g=1", "display_name": "pointerless", "link": "https://stackoverflow.com/users/8022336/pointerless"}, "is_accepted": true, "score": 0, "last_activity_date": 1495060216, "creation_date": 1495060216, "answer_id": 44035750, "question_id": 44035686, "link": "https://stackoverflow.com/questions/44035686/keep-getting-invalid-literal-for-int-with-base-10-error/44035750#44035750", "title": "Keep getting invalid literal for int() with base 10: &#39;&#39; error", "body": "<p>Depending on your file format, whitespace, newlines and many other characters will not convert to ints using the int() function. Maybe instead try:</p>\n\n<pre><code>def charge(nom_du_fichier):\n    mon_fichier=open(nom_du_fichier,\"r\")\n    x=[[0]*9 for i in range (9)]\n    for j in range(9) :\n        line=mon_fichier.readline().split(\" \")\n    for i in range(len(line)):\n        if line[i].isdigit():\n            x[j][i]=int(line[i])\n        else:\n            #either pass or deal with unused data\n    return(x)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8027979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aacf44bfffabe61e85c21f8d051a0c97?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique", "link": "https://stackoverflow.com/users/8027979/henrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 44035750, "answer_count": 1, "score": 1, "last_activity_date": 1495067390, "creation_date": 1495059715, "last_edit_date": 1495067390, "question_id": 44035686, "link": "https://stackoverflow.com/questions/44035686/keep-getting-invalid-literal-for-int-with-base-10-error", "title": "Keep getting invalid literal for int() with base 10: &#39;&#39; error", "body": "<p>I don't understand, I keep getting this error for \"x[j][i]=int(line[i])\" code... Been looking for 2 days, please help me. I don't get what's the problem just trying to do a sudoku. Thanks for the help.</p>\n\n<pre><code>def charge(nom_du_fichier):\n    mon_fichier=open(nom_du_fichier,\"r\")\n    x=[[0]*9 for i in range (9)]\n    for j in range(9) :\n        line=mon_fichier.readline().split(\" \")\n    for i in range(len(line)):\n        x[j][i]=int(line[i])\n    return(x)\n\n\ng=charge(\"sudoku.txt\")     \n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "delete-row"], "comments": [{"owner": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 0, "creation_date": 1495059694, "post_id": 44035665, "comment_id": 75098023, "body": "Can you add what have you tried ?"}, {"owner": {"reputation": 457, "user_id": 7087214, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-61TLT5pQPy0/AAAAAAAAAAI/AAAAAAAAGf8/Khtgfog0CEI/photo.jpg?sz=128", "display_name": "PyRaider", "link": "https://stackoverflow.com/users/7087214/pyraider"}, "reply_to_user": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 0, "creation_date": 1495060114, "post_id": 44035665, "comment_id": 75098171, "body": "@ChihebNexus added the info add the bottom."}, {"owner": {"reputation": 457, "user_id": 7087214, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-61TLT5pQPy0/AAAAAAAAAAI/AAAAAAAAGf8/Khtgfog0CEI/photo.jpg?sz=128", "display_name": "PyRaider", "link": "https://stackoverflow.com/users/7087214/pyraider"}, "reply_to_user": {"reputation": 7745, "user_id": 3926995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2l63X.jpg?s=128&g=1", "display_name": "Chiheb Nexus", "link": "https://stackoverflow.com/users/3926995/chiheb-nexus"}, "edited": false, "score": 0, "creation_date": 1495080984, "post_id": 44035665, "comment_id": 75103256, "body": "@Psidom can you help me here?"}], "answers": [{"tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": false, "score": 0, "last_activity_date": 1495066072, "last_edit_date": 1495066072, "creation_date": 1495065151, "answer_id": 44036475, "question_id": 44035665, "link": "https://stackoverflow.com/questions/44035665/pandas-dataframe-delete-rows-if-the-gap-is-more-than-3-days/44036475#44036475", "title": "Pandas dataframe delete rows if the gap is more than 3 days", "body": "<pre><code>#merge two DFs and get a indicator for inactive days\nmerged = pd.merge(df_all_days,df_active_days,how='left',on=['PersonID','Date'],indicator=True)\nindicators = merged._merge.tolist()\n\n#check if the inactive days last for more than 2 days\ncandidate=[]\nfinal=[]\nfor k,v in enumerate(indicators):\n    if (v!='left_only'):\n        if len(candidate)&lt;3:\n            candidate=[]\n        else:\n            final.extend(candidate)\n        candidate=[]\n    else:\n        candidate.append(k)\nif len(candidate)&gt;2:\n    final.extend(candidate) \n#remove rows where there are more than 2 consecutive inactive days.        \ndf_final = merged[~merged.index.isin(final)][['PersonID','Date']]\n\n\ndf_final\nOut[863]: \n   PersonID       Date\n0    AB-123 2016-02-01\n1    AB-123 2016-02-02\n2    AB-123 2016-02-03\n6    AB-123 2016-02-07\n7    AB-123 2016-02-08\n8    AB-123 2016-02-09\n9    AB-123 2016-02-10\n10   AB-123 2016-02-11\n11   AB-123 2016-02-12\n12   AB-123 2016-02-13\n13  DG-3465 2016-02-01\n14  DG-3465 2016-02-02\n15  DG-3465 2016-02-03\n16  DG-3465 2016-02-04\n17  DG-3465 2016-02-05\n18  DG-3465 2016-02-06\n19  DG-3465 2016-02-07\n25  DG-3465 2016-02-13\n26  TY-9456 2016-02-01\n27  TY-9456 2016-02-02\n28  TY-9456 2016-02-03\n29  TY-9456 2016-02-04\n30  TY-9456 2016-02-05\n31  TY-9456 2016-02-06\n32  TY-9456 2016-02-07\n33  TY-9456 2016-02-08\n</code></pre>\n"}], "owner": {"reputation": 457, "user_id": 7087214, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-61TLT5pQPy0/AAAAAAAAAAI/AAAAAAAAGf8/Khtgfog0CEI/photo.jpg?sz=128", "display_name": "PyRaider", "link": "https://stackoverflow.com/users/7087214/pyraider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1589337887, "creation_date": 1495059517, "last_edit_date": 1589337887, "question_id": 44035665, "link": "https://stackoverflow.com/questions/44035665/pandas-dataframe-delete-rows-if-the-gap-is-more-than-3-days", "title": "Pandas dataframe delete rows if the gap is more than 3 days", "body": "<p>So I have 2 pandas dataframe. One has all dates for a person (<code>df_all_days</code>) between given date range another has only active days for the person (<code>df_active_days</code>). I want to delete inactive rows from <code>df_all_days</code> only if the person is not active for more than 3 consecutive days. And delete only those dates that satisfy this condition, not any other active or inactive dates.</p>\n\n<p>For example in below; in <code>df_all_days</code> delete all rows for 'DG-3465' do not delete inactive dates of 2/2 - 2/3 but delete inactive dates between 2/8-2/12.\nAlso, delete all between for 'TY-9456' 2/9-2/13</p>\n\n<pre><code>df_all_days\nPersonID        Date \nAB-123      2/1/2016\nAB-123      2/2/2016\nAB-123      2/3/2016\nAB-123      2/4/2016\nAB-123      2/5/2016\nAB-123      2/6/2016\nAB-123      2/7/2016\nAB-123      2/8/2016\nAB-123      2/9/2016\nAB-123      2/10/2016\nAB-123      2/11/2016\nAB-123      2/12/2016\nAB-123      2/13/2016\nDG-3465     2/1/2016\nDG-3465     2/2/2016\nDG-3465     2/3/2016\nDG-3465     2/4/2016\nDG-3465     2/5/2016\nDG-3465     2/6/2016\nDG-3465     2/7/2016\nDG-3465     2/8/2016\nDG-3465     2/9/2016\nDG-3465     2/10/2016\nDG-3465     2/11/2016\nDG-3465     2/12/2016\nDG-3465     2/13/2016\nTY-9456     2/1/2016\nTY-9456     2/2/2016\nTY-9456     2/3/2016\nTY-9456     2/4/2016\nTY-9456     2/5/2016\nTY-9456     2/6/2016\nTY-9456     2/7/2016\nTY-9456     2/8/2016\nTY-9456     2/9/2016\nTY-9456     2/10/2016\nTY-9456     2/11/2016\nTY-9456     2/12/2016\nTY-9456     2/13/2016\n\ndf_active_days\nPersonID        Date \nAB-123      2/1/2016\nAB-123      2/2/2016\nAB-123      2/3/2016\nAB-123      2/7/2016\nAB-123      2/8/2016\nAB-123      2/9/2016\nAB-123      2/10/2016\nAB-123      2/11/2016\nAB-123      2/12/2016\nAB-123      2/13/2016\nDG-3465     2/1/2016\nDG-3465     2/4/2016\nDG-3465     2/5/2016\nDG-3465     2/6/2016\nDG-3465     2/7/2016\nDG-3465     2/13/2016\nTY-9456     2/1/2016\nTY-9456     2/2/2016\nTY-9456     2/3/2016\nTY-9456     2/4/2016\nTY-9456     2/5/2016\nTY-9456     2/6/2016\nTY-9456     2/7/2016\nTY-9456     2/8/2016\n</code></pre>\n\n<p>I tried merging both dfs and then use backfill for dates that were NaN. Then added a column with 1 in all rows. then the plan was to do a rolling sum if dates are same and then delete all rows were the sum is greater than 3. But this had 2 problems, </p>\n\n<ol>\n<li>It won't delete first 2 inactive days</li>\n<li>The rolling window for some reason won't work on dates.</li>\n</ol>\n"}, {"tags": ["python", "numpy", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 1028, "user_id": 1246462, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f91b0c4057468f63085d2168e446040e?s=128&d=identicon&r=PG", "display_name": "user1246462", "link": "https://stackoverflow.com/users/1246462/user1246462"}, "edited": false, "score": 0, "creation_date": 1495130502, "post_id": 44040616, "comment_id": 75134685, "body": "Apply gradients builds the graph? I thought it applies a new set of gradients to an already built graph. How do you recommend doing this then? I can&#39;t move this outside the look because I need to pass in modified gradients."}, {"owner": {"reputation": 1028, "user_id": 1246462, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f91b0c4057468f63085d2168e446040e?s=128&d=identicon&r=PG", "display_name": "user1246462", "link": "https://stackoverflow.com/users/1246462/user1246462"}, "edited": false, "score": 0, "creation_date": 1495130653, "post_id": 44040616, "comment_id": 75134771, "body": "Also I don&#39;t understand why the graph is being build by apply_gradients only when gradients is passed in and <i>not</i> when tensor_gradients is passed into the method."}, {"owner": {"reputation": 1028, "user_id": 1246462, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f91b0c4057468f63085d2168e446040e?s=128&d=identicon&r=PG", "display_name": "user1246462", "link": "https://stackoverflow.com/users/1246462/user1246462"}, "edited": false, "score": 0, "creation_date": 1495143355, "post_id": 44040616, "comment_id": 75141235, "body": "MaxB but this still doesn&#39;t answer the question why apply_gradients on tensor_gradients does <i>not</i> run out of memory. Here, apply_gradients is still in the loop."}, {"owner": {"reputation": 1028, "user_id": 1246462, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f91b0c4057468f63085d2168e446040e?s=128&d=identicon&r=PG", "display_name": "user1246462", "link": "https://stackoverflow.com/users/1246462/user1246462"}, "edited": false, "score": 0, "creation_date": 1495143599, "post_id": 44040616, "comment_id": 75141331, "body": "But thanks, though, I&#39;ll try moving the operation outside and only call session.run from inside the loop."}], "tags": [], "owner": {"reputation": 9601, "user_id": 1937197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cg7w6.jpg?s=128&g=1", "display_name": "bobcat", "link": "https://stackoverflow.com/users/1937197/bobcat"}, "is_accepted": true, "score": 1, "last_activity_date": 1495144706, "last_edit_date": 1495144706, "creation_date": 1495090459, "answer_id": 44040616, "question_id": 44035651, "link": "https://stackoverflow.com/questions/44035651/tensorflow-compute-gradients-and-apply-gradients-running-out-of-memory/44040616#44040616", "title": "Tensorflow compute_gradients and apply_gradients running out of memory", "body": "<blockquote>\n  <p>Any ideas at what might be happening?</p>\n</blockquote>\n\n<p>OOM happens because you're constructing the graph inside the loop: This builds a graph with 20,000x nodes, and running it may need more memory than you have.</p>\n\n<p>Move all TF operations that build the graph outside the loop, <em>i.e.</em> everything except <code>feed_dict</code> construction and <code>sess.run</code> calls.</p>\n\n<hr>\n\n<p><strong>Reply to comments</strong></p>\n\n<blockquote>\n  <p>Apply gradients builds the graph? </p>\n</blockquote>\n\n<p>Yes, if you look in the docs:</p>\n\n<pre><code>Returns:\n  An `Operation` that applies the specified gradients. If `global_step`\n  was not None, that operation also increments `global_step`.\n</code></pre>\n"}], "owner": {"reputation": 1028, "user_id": 1246462, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f91b0c4057468f63085d2168e446040e?s=128&d=identicon&r=PG", "display_name": "user1246462", "link": "https://stackoverflow.com/users/1246462/user1246462"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 0, "accepted_answer_id": 44040616, "answer_count": 1, "score": 1, "last_activity_date": 1495144706, "creation_date": 1495059426, "question_id": 44035651, "link": "https://stackoverflow.com/questions/44035651/tensorflow-compute-gradients-and-apply-gradients-running-out-of-memory", "title": "Tensorflow compute_gradients and apply_gradients running out of memory", "body": "<p>I have the following lines as part of a program: </p>\n\n<pre><code>tensor_gradients = optimizer.compute_gradients(cross_entropy)\n\nwith tf.Session() as session:\n    for step in range(20000):\n        batch = mnist.train.next_batch(train_batch_size)\n        feed = {input_x: batch[0], input_y: batch[1]}\n        gradients = session.run([tensor_gradients], feed)[0]\n        for i in range(len(gradients)):\n            gradients[i] = (gradients[i][0], tensor_gradients[i][1])\n        ... computation on gradients ...\n        training_step = optimizer.apply_gradients(gradients)\n        training = session.run([training_step], feed)\n</code></pre>\n\n<p>The reason I'm doing this is because I want to modify the gradients using numpy. The above code runs out of memory around step 800. However, if you replace the optimizer.apply_gradients step by tensor_gradients, then the code does not run out of memory. </p>\n\n<pre><code>        training_step = optimizer.apply_gradients(tensor_gradients)\n</code></pre>\n\n<p>Any ideas at what might be happening? The rest of the code remains the same except for the line above. Is it possible that the numpy arrays in gradients is not being garbage collected because they are being passed into the apply_gradients step? I have no idea where the memory leak could be or if I'm inadvertently adding to the tensorflow graph by passing modified gradients (in numpy array form) back into apply_gradients.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 4458, "user_id": 3605780, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/12e364cc0e55027057ee93be4c75e7df?s=128&d=identicon&r=PG&f=1", "display_name": "user3605780", "link": "https://stackoverflow.com/users/3605780/user3605780"}, "edited": false, "score": 0, "creation_date": 1495118344, "post_id": 44035720, "comment_id": 75126971, "body": "I accepted before but when I tried your example I get the error: TypeError: resample() got an unexpected keyword argument &#39;on&#39;        args = (&quot;resample() got an unexpected keyword argument &#39;on&#39;&quot;,)        with_traceback = &lt;built-in method with_traceback of TypeError object&gt;"}, {"owner": {"reputation": 4458, "user_id": 3605780, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/12e364cc0e55027057ee93be4c75e7df?s=128&d=identicon&r=PG&f=1", "display_name": "user3605780", "link": "https://stackoverflow.com/users/3605780/user3605780"}, "edited": false, "score": 0, "creation_date": 1495119348, "post_id": 44035720, "comment_id": 75127763, "body": "I noticed I was using pandas 0.17, after upgrading it did work."}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "reply_to_user": {"reputation": 4458, "user_id": 3605780, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/12e364cc0e55027057ee93be4c75e7df?s=128&d=identicon&r=PG&f=1", "display_name": "user3605780", "link": "https://stackoverflow.com/users/3605780/user3605780"}, "edited": false, "score": 0, "creation_date": 1495128474, "post_id": 44035720, "comment_id": 75133508, "body": "I am sorry I missed both the comments, glad that it worked out though"}], "tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": true, "score": 3, "last_activity_date": 1495059950, "creation_date": 1495059950, "answer_id": 44035720, "question_id": 44035640, "link": "https://stackoverflow.com/questions/44035640/groupby-certain-number-of-rows-pandas/44035720#44035720", "title": "Groupby certain number of rows pandas", "body": "<p>I guess you are looking for resample. consider this dataframe</p>\n\n<pre><code>rng = pd.date_range('2017-05-01', periods=18, freq='D')\nnum = np.random.randint(5,size = 18)\ndf = pd.DataFrame({'date': rng, 'val': num})\n\ndf.resample('6D', on = 'date').sum().reset_index()\n</code></pre>\n\n<p>will return</p>\n\n<pre><code>    date        val\n0   2017-05-01  14\n1   2017-05-07  11\n2   2017-05-13  16\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4458, "user_id": 3605780, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/12e364cc0e55027057ee93be4c75e7df?s=128&d=identicon&r=PG&f=1", "display_name": "user3605780", "link": "https://stackoverflow.com/users/3605780/user3605780"}, "edited": false, "score": 0, "creation_date": 1495097079, "post_id": 44035946, "comment_id": 75111395, "body": "Thanks for the extra, but how does that work when having more then 1 value columns, so a groupby would be better then x.value.sum()?"}, {"owner": {"reputation": 4505, "user_id": 3626961, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100001104558583/picture?type=large", "display_name": "titipata", "link": "https://stackoverflow.com/users/3626961/titipata"}, "reply_to_user": {"reputation": 4458, "user_id": 3605780, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/12e364cc0e55027057ee93be4c75e7df?s=128&d=identicon&r=PG&f=1", "display_name": "user3605780", "link": "https://stackoverflow.com/users/3605780/user3605780"}, "edited": false, "score": 0, "creation_date": 1495097390, "post_id": 44035946, "comment_id": 75111627, "body": "I&#39;m not sure that I completely understand your question. This is basically group the Dataframe in chunk of 6 rows and aggregate those rows. I&#39;m not sure if it&#39;s going to be better than plain summation."}, {"owner": {"reputation": 4458, "user_id": 3605780, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/12e364cc0e55027057ee93be4c75e7df?s=128&d=identicon&r=PG&f=1", "display_name": "user3605780", "link": "https://stackoverflow.com/users/3605780/user3605780"}, "edited": false, "score": 0, "creation_date": 1495118446, "post_id": 44035946, "comment_id": 75127046, "body": "Well now you have &#39;value&#39; : x.value.sum() , but if there are 12 columns in the dataframe this means you have to write this for every column and with groupby this is for all at once."}, {"owner": {"reputation": 4505, "user_id": 3626961, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100001104558583/picture?type=large", "display_name": "titipata", "link": "https://stackoverflow.com/users/3626961/titipata"}, "reply_to_user": {"reputation": 4458, "user_id": 3605780, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/12e364cc0e55027057ee93be4c75e7df?s=128&d=identicon&r=PG&f=1", "display_name": "user3605780", "link": "https://stackoverflow.com/users/3605780/user3605780"}, "edited": false, "score": 0, "creation_date": 1495128235, "post_id": 44035946, "comment_id": 75133379, "body": "Ah, I see! I will make my answer more general :)"}, {"owner": {"reputation": 4505, "user_id": 3626961, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100001104558583/picture?type=large", "display_name": "titipata", "link": "https://stackoverflow.com/users/3626961/titipata"}, "reply_to_user": {"reputation": 4458, "user_id": 3605780, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/12e364cc0e55027057ee93be4c75e7df?s=128&d=identicon&r=PG&f=1", "display_name": "user3605780", "link": "https://stackoverflow.com/users/3605780/user3605780"}, "edited": false, "score": 0, "creation_date": 1495142859, "post_id": 44035946, "comment_id": 75141047, "body": "@user3605780, I updated my solution. Hope it&#39;s more general now."}], "tags": [], "owner": {"reputation": 4505, "user_id": 3626961, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100001104558583/picture?type=large", "display_name": "titipata", "link": "https://stackoverflow.com/users/3626961/titipata"}, "is_accepted": false, "score": 1, "last_activity_date": 1495145451, "last_edit_date": 1495145451, "creation_date": 1495061402, "answer_id": 44035946, "question_id": 44035640, "link": "https://stackoverflow.com/questions/44035640/groupby-certain-number-of-rows-pandas/44035946#44035946", "title": "Groupby certain number of rows pandas", "body": "<p>This is alternative solution using <code>groupby</code> range of length of the dataframe.</p>\n\n<p><strong>Two columns</strong> using <code>agg</code></p>\n\n<pre><code>df.groupby(np.arange(len(df))//6).agg(lambda x: {'date': x.date.iloc[0], \n                                                 'value': x.value.sum()})\n</code></pre>\n\n<p><strong>Multiple columns</strong> you can use <code>first</code> (or <code>last</code>) for date and <code>sum</code> for other columns.</p>\n\n<pre><code>group = df.groupby(np.arange(len(df))//6)\npd.concat((group['date'].first(), \n           group[[c for c in df.columns if c != 'date']].sum()), axis=1)\n</code></pre>\n"}], "owner": {"reputation": 4458, "user_id": 3605780, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/12e364cc0e55027057ee93be4c75e7df?s=128&d=identicon&r=PG&f=1", "display_name": "user3605780", "link": "https://stackoverflow.com/users/3605780/user3605780"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 874, "favorite_count": 0, "accepted_answer_id": 44035720, "answer_count": 2, "score": 1, "last_activity_date": 1495145451, "creation_date": 1495059346, "question_id": 44035640, "link": "https://stackoverflow.com/questions/44035640/groupby-certain-number-of-rows-pandas", "title": "Groupby certain number of rows pandas", "body": "<p>I have a dataframe with let's say 2 columns: dates and doubles</p>\n\n<pre><code> 2017-05-01   2.5\n 2017-05-02   3.5\n ...          ...\n 2017-05-17   0.2\n 2017-05-18   2.5\n</code></pre>\n\n<p>Now I would like to do a groupby and sum with x rows. So i.e. with 6 rows it would return:</p>\n\n<pre><code> 2017-05-06  15.6\n 2017-05-12  13.4\n 2017-05-18  18.0\n</code></pre>\n\n<p>Is there a clean solution to do this without running it through a for-loop with something like this:</p>\n\n<pre><code> temp = pd.DataFrame()\n j = 0\n for i in range(0,len(df.index),6):\n      temp[df.ix[i]['date']] = df.ix[i:i+6]['value'].sum()\n</code></pre>\n"}, {"tags": ["python", "range", "spyder"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1495059448, "post_id": 44035607, "comment_id": 75097956, "body": "This seems to be an issue with <code>spyder</code>&#39;s <code>execfile</code> rather than your actual code. Try running it in a non-spyder terminal..."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1495059548, "post_id": 44035607, "comment_id": 75097985, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/39176831/very-simple-program-crashing-python-3-5-and-spyder\">Very Simple Program Crashing Python 3.5 and spyder</a>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495059558, "post_id": 44035607, "comment_id": 75097990, "body": "Seems to be a known bug in IPython, actually. Are you doing any dark magic with <code>sys.stdout</code>, by any chance? What version of Ipython are you using? It may have been fixed in recent versions, and you could try just updating Ipython..."}, {"owner": {"reputation": 21, "user_id": 6680495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6a341da784a3ef76c9dd18a7c899935?s=128&d=identicon&r=PG&f=1", "display_name": "Gimeno_2000", "link": "https://stackoverflow.com/users/6680495/gimeno-2000"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495060064, "post_id": 44035607, "comment_id": 75098155, "body": "Yeah. Using command prompt seems to work. Thanks"}, {"owner": {"reputation": 21, "user_id": 6680495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6a341da784a3ef76c9dd18a7c899935?s=128&d=identicon&r=PG&f=1", "display_name": "Gimeno_2000", "link": "https://stackoverflow.com/users/6680495/gimeno-2000"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495060277, "post_id": 44035607, "comment_id": 75098219, "body": "Dark magic? Ha. No. Not changed anything if that&#39;s what you mean. IPython 4.2.0. But the regular python console also came up with similar problems with Spyder"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495060354, "post_id": 44035607, "comment_id": 75098241, "body": "Weird. I&#39;ve used Spyder a bit, and it&#39;s a pretty decent IDE, but definitely encountered weird bugs from time to time. BTW, I would upgrade to the IPython 5.x, it is <i>much</i> better. Great <a href=\"http://ipython.readthedocs.io/en/stable/whatsnew/version5.html#ipython-5-0\" rel=\"nofollow noreferrer\">new features</a> including live-syntax highlighting, and true multiline editing!"}], "answers": [{"tags": [], "owner": {"reputation": 27032, "user_id": 438386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aceace9b2049723617a2f59f698df0ff?s=128&d=identicon&r=PG", "display_name": "Carlos Cordoba", "link": "https://stackoverflow.com/users/438386/carlos-cordoba"}, "is_accepted": false, "score": 0, "last_activity_date": 1498403968, "creation_date": 1498403968, "answer_id": 44747748, "question_id": 44035607, "link": "https://stackoverflow.com/questions/44035607/closed-file-error-while-printing-a-lot-of-content-to-the-ipython-console-in-spyd/44747748#44747748", "title": "Closed file error while printing a lot of content to the IPython console in Spyder", "body": "<p>(<em>Spyder developer here</em>) This bug is not a Spyder bug but an <code>ipykernel</code> bug. It was fixed in <code>ipykernel</code> version <strong>4.4</strong>, released in August 2016.</p>\n\n<p>So please be sure to update to the latest <code>ipykernel</code> by running this command in a terminal (i.e. <code>cmd.exe</code>)</p>\n\n<pre><code>conda update ipykernel\n</code></pre>\n\n<p><em>Note</em>: It'd be good if you could update to the latest Spyder release too because you're still using version 2.3 and our latest one is 3.1.4.</p>\n"}], "owner": {"reputation": 21, "user_id": 6680495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6a341da784a3ef76c9dd18a7c899935?s=128&d=identicon&r=PG&f=1", "display_name": "Gimeno_2000", "link": "https://stackoverflow.com/users/6680495/gimeno-2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1498404092, "creation_date": 1495059211, "last_edit_date": 1498404092, "question_id": 44035607, "link": "https://stackoverflow.com/questions/44035607/closed-file-error-while-printing-a-lot-of-content-to-the-ipython-console-in-spyd", "title": "Closed file error while printing a lot of content to the IPython console in Spyder", "body": "<p>My original script is bigger than this, but I discovered this alone causes the exact same error. First post here (I think). So apologies if format not right.</p>\n\n<pre><code>for a in range(4000):\n    for b in range(200):\n        print('4000:' + str(a))\n        print('201:' + str(b))\n</code></pre>\n\n<p>And I get all this as errors. I'm Spyder with the Ipython console.</p>\n\n<blockquote>\n  <p>File \"\", line 1, in \n      runfile('C:/Users/me/Documents/file.py', wdir='C:/Users/me/Documents')</p>\n  \n  <p>File \"C:\\Users\\me\\Anaconda3\\lib\\site-packages\\spyderlib\\widgets\\externalshell\\sitecustomize.py\", line 714, in runfile\n      execfile(filename, namespace)</p>\n  \n  <p>File \"C:\\Users\\me\\Anaconda3\\lib\\site-packages\\spyderlib\\widgets\\externalshell\\sitecustomize.py\", line 89, in execfile\n      exec(compile(f.read(), filename, 'exec'), namespace)</p>\n  \n  <p>File \"C:/Users/me/Documents/file.py\", line 35, in \n      print('4000:' + str(a))</p>\n  \n  <p>File \"C:\\Users\\me\\Anaconda3\\lib\\site-packages\\ipykernel\\iostream.py\", line 317, in write\n      self._buffer.write(string)</p>\n  \n  <p>ValueError: I/O operation on closed file</p>\n</blockquote>\n"}, {"tags": ["python", "unit-testing"], "owner": {"reputation": 11, "user_id": 7999766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba2839b31af961a445c969db3ec0f1bc?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/7999766/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1495059170, "creation_date": 1495059170, "question_id": 44035595, "link": "https://stackoverflow.com/questions/44035595/python-mock-result-of-method-call-is-getitem-instead-of-actual-value", "title": "Python Mock: Result of method call is __getitem__ instead of actual value", "body": "<p>I have a unit test and mocking an external call. Here's the abbreviated code for the function I'm trying to test in service.py file</p>\n\n<pre><code>def post_data()\n  req = request.Request()\n  response = req.post(payload, url, json.dumps({\"data\": kwargs['data']}))\n\n  if response['request']['status'] == 'SUCCESS' and response['data']:\n      run_id = response.json()['data']['run_id']\n      response = track_run_to_completion(run_id, **kwargs)\n\n  return response\n</code></pre>\n\n<p>Here's my unit test method</p>\n\n<pre><code>@patch('service.request.Request.post')\n    def test_post_data(self, mock_post):\n        kwargs = {'a':'abc'}\n        expected = json.dumps({'request':{'status':'ERROR'},'data':{}})\n        mock_post.return_value = MagicMock(status_code=200, response=expected)\nmock_post.assert_called_once_with({'action': 'trigger'}, 'a/abc', '{\"data\": {}}') # SUCCESS!\n            result = service.post_data(**kwargs)\n            print result \n</code></pre>\n\n<p>When I print the result, I was expecting to see the json, but get <code>&lt;MagicMock name='post()' id='4488707600'&gt;</code>. What am I missing here? I'm new to Python and started writing unit tests for an existing application.</p>\n"}, {"tags": ["python", "pandas", "replace"], "answers": [{"comments": [{"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1495059967, "post_id": 44035598, "comment_id": 75098124, "body": "Could I also do .str.replace(&#39;, Jr$|JR$&#39;, &#39;&#39;) to account for Jr and JR?"}, {"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1495060204, "post_id": 44035598, "comment_id": 75098198, "body": "I just verified that I can, but not working in my actual situation for some reason. I&#39;ll post another question if it&#39;s something of note. Thanks!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1495060276, "post_id": 44035598, "comment_id": 75098217, "body": "use <code>d.iloc[:, 0].str.replace(&#39;, J[rR]$&#39;, &#39;&#39;)</code>"}, {"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1495060643, "post_id": 44035598, "comment_id": 75098323, "body": "Still not working on my side. I must be doing something obviously wrong but can&#39;t see it. I&#39;m using a column name instead of .iloc[:,0] because I have &gt;1 column and only want to apply it to that column. I&#39;m assuming that wouldn&#39;t matter, though. No?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1495060704, "post_id": 44035598, "comment_id": 75098339, "body": "Could be spaces at the end of the string.   <code>d.iloc[:, 0].str.replace(&#39;, J[rR]\\s*$&#39;, &#39;&#39;)</code>"}, {"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1495061489, "post_id": 44035598, "comment_id": 75098575, "body": "I know I&#39;m pushing it, but what if it were the prefix &quot;Mr &quot; to replace? Would it just be .str.replace(&#39;,$M[rR]\\s*&#39;, &#39;&#39;)?"}, {"owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "edited": false, "score": 0, "creation_date": 1495061773, "post_id": 44035598, "comment_id": 75098664, "body": "Nevermind, I did a little digging into Regex and found ^ as the beginning of string marker.  So I just used: .str.replace(&#39;^MRS.|^MR.|^MS.|^MISS.|^MRS |^MR |^MS |^MISS &#39;,&#39;&#39;)"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1495060146, "last_edit_date": 1495060146, "creation_date": 1495059180, "answer_id": 44035598, "question_id": 44035575, "link": "https://stackoverflow.com/questions/44035575/pandas-replace-from-right-only/44035598#44035598", "title": "Pandas Replace from Right Only", "body": "<p>use <code>str.replace</code> with regex</p>\n\n<pre><code>d.iloc[:, 0].str.replace(', Jr$', '')\n#                             |\n#        matches end of line /\n\n0             Jim Jrower\n1    Chauncy Peppertooth\nName: Last, First, dtype: object\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1606, "user_id": 5079666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5Awfk.jpg?s=128&g=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/5079666/jon"}, "is_accepted": false, "score": 1, "last_activity_date": 1495061037, "creation_date": 1495061037, "answer_id": 44035879, "question_id": 44035575, "link": "https://stackoverflow.com/questions/44035575/pandas-replace-from-right-only/44035879#44035879", "title": "Pandas Replace from Right Only", "body": "<p>Using the regular expressions module, you can do something like the following</p>\n\n<p>An example:</p>\n\n<pre><code>import re\nimport pandas as pd\n\ndef example(somestring):\n    temp = somestring.lower()\n    result = re.search(r'\\sjr$', temp)\n    if result:\n        return somestring[:result.start()]\n    else:\n        return somestring\n\n\nd = pd.DataFrame({'Last, First':['Jim Jrower','Chauncy Peppertooth, Jr', 'jonathan jrureiagh, jr']})\n\nd\nOut[58]: \n            Last, First\n0               Jim Jrower\n1  Chauncy Peppertooth, Jr\n2   jonathan jrureiagh, jr\n\nd.applymap(example)\nOut[59]: \n            Last, First\n0            Jim Jrower\n1  Chauncy Peppertooth,\n2   jonathan jrureiagh,\n</code></pre>\n"}], "owner": {"reputation": 5274, "user_id": 5569314, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7f3f6d9e55774ab1f7042e94909d6b8?s=128&d=identicon&r=PG&f=1", "display_name": "Dance Party2", "link": "https://stackoverflow.com/users/5569314/dance-party2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 1, "accepted_answer_id": 44035598, "answer_count": 2, "score": 1, "last_activity_date": 1495061037, "creation_date": 1495059057, "question_id": 44035575, "link": "https://stackoverflow.com/questions/44035575/pandas-replace-from-right-only", "title": "Pandas Replace from Right Only", "body": "<p>Given the following dataframe:</p>\n\n<pre><code>import pandas as pd\nd = pd.DataFrame({'Last, First':['Jim Jrower','Chauncy Peppertooth, Jr']})\n               Last, First\n0               Jim Jrower\n1  Chauncy Peppertooth, Jr\n</code></pre>\n\n<p>I want to delete \"Jr\" if it occurs on the right side of the string only and not in the middle. </p>\n\n<p>I can't use \n<code>d['Last, First'].str.rstrip(\"Jr\")</code> </p>\n\n<p>because that will strip all instances of \"J\" and \"r\" from the right.</p>\n\n<p>I can't use </p>\n\n<pre><code>d['Last, First'].str.replace(\"Jr\",\"\")\n</code></pre>\n\n<p>because that will take \"Jr\" out if it occurs in the middle of the string. \nIf I can just get rid of that pesky \"Jr\" at the end, I can then do\n <code>d['Last, First'].str.rstrip(\", \")</code> to take care of the comma at the end.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1495059282, "post_id": 44035573, "comment_id": 75097894, "body": "Please narrow down your code to just the part you are having trouble with."}], "answers": [{"tags": [], "owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "is_accepted": false, "score": 2, "last_activity_date": 1495059368, "creation_date": 1495059368, "answer_id": 44035644, "question_id": 44035573, "link": "https://stackoverflow.com/questions/44035573/python-drivers-license-exam/44035644#44035644", "title": "Python Drivers License Exam", "body": "<p>You're iterating over <strong>all</strong> of the pairs of submitted/correct responses, while you want to be iterating over the <strong>matched</strong> pairs. Instead use:</p>\n\n<pre><code>for ans, cor in zip(submitted, correct):\n    if ans == cor:\n        # do stuff\n    else:\n        # do other stuff\n</code></pre>\n\n<p>Also, remove the <code>while</code> loop directly outside of this; it's not doing anything.</p>\n"}], "owner": {"reputation": 1, "user_id": 8027971, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qJvUI8V5sSE/AAAAAAAAAAI/AAAAAAAAABs/oUNu8r4_IPo/photo.jpg?sz=128", "display_name": "Fumetsu no Kami", "link": "https://stackoverflow.com/users/8027971/fumetsu-no-kami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1057, "favorite_count": 0, "closed_date": 1495059578, "answer_count": 1, "score": -3, "last_activity_date": 1495059454, "creation_date": 1495059030, "last_edit_date": 1495059454, "question_id": 44035573, "link": "https://stackoverflow.com/questions/44035573/python-drivers-license-exam", "closed_reason": "Not suitable for this site", "title": "Python Drivers License Exam", "body": "<p>I want this to compare the strings in the list but when I output it it compares the correct list to the same string of the other list 20 times each. I would appreciate if I could get some help to see what i'm doing wrong</p>\n\n<pre><code>def main():        \n\n        submitted = ['A','D','C','A','C','A','D','C','A','D','A','C','B','D','A','C','C','A','D','B']\n\n        outfile  = open('submitted.txt', 'w')\n\n        for item in submitted:\n\n            outfile.write(item + '\\n')\n\n        outfile.close()\n\n        infile = open('submitted.txt', 'r')\n\n        submitted = infile.readlines()\n\n        infile.close()\n\n        sub_count = 0\n\n        while sub_count &lt; len(submitted):\n            submitted[sub_count] = submitted[sub_count].rstrip('\\n')\n            sub_count += 1\n\n        print 'The answers you submitted were ', submitted\n        print '******************************************************************************************'\n\n\n        correct = ['A','C','A','A','D','B','C','A','C','B','A','D','C','A','D','C','B','B','D','A']\n\n        outfile  = open('correct.txt', 'w')\n\n        for item in correct:\n\n            outfile.write(item + '\\n')\n\n        outfile.close()\n\n        infile = open('correct.txt', 'r')\n\n        correct = infile.readlines()\n\n        infile.close()\n\n        cor_count = 0\n\n        while cor_count &lt; len(correct):\n            correct[cor_count] = correct[cor_count].rstrip('\\n')\n            cor_count += 1\n\n        print 'The correct answers are ', correct\n        print '******************************************************************************************'\n\n        print 'BELOW IS THE COMPARISON OF YOUR ANSWERS TO THE CORRECT ANSWERS'\n\n        correct_count = 0\n\n        incorrect_count = 0\n\n        number_questions = 0\n\n        while (number_questions &lt; 20):\n\n          number_questions += 1\n\n          for ans in submitted:\n              for cor in correct:\n                  if cor == ans:\n                        print cor, ans ,' = correct'\n                        correct_count += 1\n\n                  elif cor != ans:\n                      incorrect_count += 1\n                      print cor, ans ,' = wrong'\n\n\nmain()\n</code></pre>\n"}, {"tags": ["python", "pygame", "artificial-intelligence", "simulation", "pymunk"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5600443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/123aca2716d5b79576e79250e70ba699?s=128&d=identicon&r=PG&f=1", "display_name": "Skittles", "link": "https://stackoverflow.com/users/5600443/skittles"}, "edited": false, "score": 1, "creation_date": 1495231099, "post_id": 44059670, "comment_id": 75183055, "body": "Thank you very much. I simply removed all variables and dependencies with regards to Pygame&#39;s screen object and Pymunk&#39;s DrawOptions() function. All sims run in the back. To speed up the time it took I simply increased how much time is passed per Clock tick."}, {"owner": {"reputation": 137, "user_id": 14417506, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3tiryRl7OaE/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucm-9SAIy4Se-k4Aq3AHP8RkceD9nQ/s96-c/photo.jpg?sz=128", "display_name": "Ken Morison", "link": "https://stackoverflow.com/users/14417506/ken-morison"}, "reply_to_user": {"reputation": 35, "user_id": 5600443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/123aca2716d5b79576e79250e70ba699?s=128&d=identicon&r=PG&f=1", "display_name": "Skittles", "link": "https://stackoverflow.com/users/5600443/skittles"}, "edited": false, "score": 0, "creation_date": 1606551158, "post_id": 44059670, "comment_id": 114998098, "body": "@Skittles I need to exactly that. How did you do that without compromising the accuracy of the simulation"}], "tags": [], "owner": {"reputation": 3449, "user_id": 412772, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/065e54c048ddfbfd67cc6fbd8421324a?s=128&d=identicon&r=PG", "display_name": "viblo", "link": "https://stackoverflow.com/users/412772/viblo"}, "is_accepted": true, "score": 2, "last_activity_date": 1495278386, "last_edit_date": 1495278386, "creation_date": 1495153762, "answer_id": 44059670, "question_id": 44035526, "link": "https://stackoverflow.com/questions/44035526/possible-to-run-pymunk-simulation-without-screen-as-in-without-actually-seeing/44059670#44059670", "title": "Possible To Run Pymunk Simulation Without Screen (as in without actually seeing it)?", "body": "<p>Pymunk itself doesn't depend on any visualization. You move the simulation forward with the space.step method, and you can call it as many times as you want, for example 1000 times with a dt of 0.1 to move the simulation forward 100 units (seconds).</p>\n\n<p>If  you want to see something  you have the option to read out the state and draw it at that time. </p>\n\n<p>The pygame integration provided with pymunk is just for those that want an quick and easy way to get something on screen. If you don't want anything drawn you absolutely not need to use it. </p>\n\n<p>Just be aware that it is not the same to call space.step 100 times with a dt of 0.01 and calling it with a dt of 1 (the later will give a much less accurate simulation)</p>\n"}], "owner": {"reputation": 35, "user_id": 5600443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/123aca2716d5b79576e79250e70ba699?s=128&d=identicon&r=PG&f=1", "display_name": "Skittles", "link": "https://stackoverflow.com/users/5600443/skittles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 44059670, "answer_count": 1, "score": 1, "last_activity_date": 1495278386, "creation_date": 1495058798, "question_id": 44035526, "link": "https://stackoverflow.com/questions/44035526/possible-to-run-pymunk-simulation-without-screen-as-in-without-actually-seeing", "title": "Possible To Run Pymunk Simulation Without Screen (as in without actually seeing it)?", "body": "<p><strong>The question I have is, is it possible to run a Pymunk simulation without having the screen to visualize it pop up?</strong> </p>\n\n<p>I'm working on a research project that involves Pymunk and Pygame. The goal is to develop an agent that can infer certain properties about physics simulations involving objects and agents within the Pymunk space.</p>\n\n<p>Part of the project requires a comparison of many different simulations and the fact that a screen pops up so I can view each simulation causes the problem to take too much time (as I have to view each sim before being able to collect the data from it).</p>\n\n<p>I'd like to basically run each sim in the background as fast as possible to just collect the physical data. There is no need for me to actually visualize the simulations at certain points.</p>\n\n<p>Let me know if I've been clear enough or this is a duplicate. Though, I searched for an answer here, I have not found one.</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1495059172, "post_id": 44035528, "comment_id": 75097852, "body": "Both of these solutions will still update the file, they just won&#39;t truncate it completely. But you&#39;ll end up with a mix of old and new data, which is probably just as bad."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495059302, "post_id": 44035528, "comment_id": 75097903, "body": "@Barmar I was answering on the assumption that the only operation was a single simple <code>write</code>,  and the error occurs when attempting to <code>open</code>, but you are right, if you <i>really</i> want to only modify the file upon successfully exiting the <code>with</code> block, you&#39;ll have to do something like what your answer proposes."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495059456, "post_id": 44035528, "comment_id": 75097958, "body": "True, your solution works for the simple application in the question."}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 1, "last_activity_date": 1495059106, "last_edit_date": 1495541432, "creation_date": 1495058801, "answer_id": 44035528, "question_id": 44035479, "link": "https://stackoverflow.com/questions/44035479/close-a-file-without-saving-when-an-error-occurs-python/44035528#44035528", "title": "Close a file without saving when an error occurs - Python", "body": "<p>Open in a different mode than <code>w</code>. Using <code>'w'</code> will created if it does not exist, otherwise it truncates whatever is in the file already. Use <code>'a'</code> instead, which <em>does not</em> truncate by default. However, note that the file cursor will be at the end of the file. You you actually want to overwrite if there is no error, you'll have to <code>f.seek(0)</code> then <code>f.truncate()</code> manually.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Actually, it might be better to use <code>r+</code>, which will not truncate automatically either, and the stream is at the beginning of the file instead of the end (like it is with <code>'a'</code>), so only a simple <code>f.truncate()</code> will be necessary. See your options <a href=\"https://stackoverflow.com/a/1466036/5014455\">here</a>. Basically, you definitely don't want <code>'w'</code> but either one of <code>'r+'</code> or <code>'a'</code> depending on precisely the behavior you want.</p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1495059125, "creation_date": 1495059125, "answer_id": 44035587, "question_id": 44035479, "link": "https://stackoverflow.com/questions/44035479/close-a-file-without-saving-when-an-error-occurs-python/44035587#44035587", "title": "Close a file without saving when an error occurs - Python", "body": "<p>If you don't want to make any changes to the original file unless everything is successful, what you should do is write your output to a new file. Then when you're done, rename that file to the original file.</p>\n\n<p>If an error happens, you can use <code>try/except</code> to catch the error and delete the temporary file before exiting.</p>\n"}], "owner": {"reputation": 45, "user_id": 8015479, "user_type": "registered", "profile_image": "https://graph.facebook.com/1426144980762626/picture?type=large", "display_name": "Arun Padmanabhan", "link": "https://stackoverflow.com/users/8015479/arun-padmanabhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 44035528, "answer_count": 2, "score": 1, "last_activity_date": 1495059125, "creation_date": 1495058541, "last_edit_date": 1495058643, "question_id": 44035479, "link": "https://stackoverflow.com/questions/44035479/close-a-file-without-saving-when-an-error-occurs-python", "title": "Close a file without saving when an error occurs - Python", "body": "<p>I have a situation where I have a file open using 'with'. I make some edits to the file and save it if the changes are successful. However whenever an error occurs during file handling, I want the file to be close without any changes done to the file. The with seem to overwrite the file and make the file empty.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>with open(path + \"\\\\Config\\\\\"+ filename, 'wb') as configfile:\n     config.write(configfile)\n</code></pre>\n\n<p>I get the <em>\"a bytes-like object is required, not 'str'\"</em> error for the above code which is fine. But all the content from the file has been removed when the error occurs. </p>\n\n<p>How can be explicitly say the code to not save the changes and revert to the content that was existing before the change was made?</p>\n\n<p>I use active python 3.5</p>\n"}, {"tags": ["python", "lambda", "amazon-redshift", "boto3"], "comments": [{"owner": {"reputation": 2270, "user_id": 5581236, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZlTNKWNXuEI/AAAAAAAAAAI/AAAAAAAAClU/M62l7qDU5eg/photo.jpg?sz=128", "display_name": "Adam Owczarczyk", "link": "https://stackoverflow.com/users/5581236/adam-owczarczyk"}, "edited": false, "score": 0, "creation_date": 1495099024, "post_id": 44035454, "comment_id": 75112804, "body": "You are aware you are updating the entire table with just one hash value?"}, {"owner": {"reputation": 109, "user_id": 7874623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e947eda828f3d84069c40f08e2c522fd?s=128&d=identicon&r=PG&f=1", "display_name": "ruth", "link": "https://stackoverflow.com/users/7874623/ruth"}, "reply_to_user": {"reputation": 2270, "user_id": 5581236, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZlTNKWNXuEI/AAAAAAAAAAI/AAAAAAAAClU/M62l7qDU5eg/photo.jpg?sz=128", "display_name": "Adam Owczarczyk", "link": "https://stackoverflow.com/users/5581236/adam-owczarczyk"}, "edited": false, "score": 0, "creation_date": 1495272437, "post_id": 44035454, "comment_id": 75191071, "body": "@AdamOwczarczyk I know it sounds very strange but yes, I am aware of it, I have to this because of security for data."}, {"owner": {"reputation": 2270, "user_id": 5581236, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZlTNKWNXuEI/AAAAAAAAAAI/AAAAAAAAClU/M62l7qDU5eg/photo.jpg?sz=128", "display_name": "Adam Owczarczyk", "link": "https://stackoverflow.com/users/5581236/adam-owczarczyk"}, "edited": false, "score": 0, "creation_date": 1495394657, "post_id": 44035454, "comment_id": 75222054, "body": "Have you checked if the function doesn&#39;t time out? If the update is long, it may time out before finishing."}, {"owner": {"reputation": 109, "user_id": 7874623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e947eda828f3d84069c40f08e2c522fd?s=128&d=identicon&r=PG&f=1", "display_name": "ruth", "link": "https://stackoverflow.com/users/7874623/ruth"}, "reply_to_user": {"reputation": 2270, "user_id": 5581236, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZlTNKWNXuEI/AAAAAAAAAAI/AAAAAAAAClU/M62l7qDU5eg/photo.jpg?sz=128", "display_name": "Adam Owczarczyk", "link": "https://stackoverflow.com/users/5581236/adam-owczarczyk"}, "edited": false, "score": 0, "creation_date": 1495447056, "post_id": 44035454, "comment_id": 75239124, "body": "@AdamOwczarczyk yes it is, so I decided to make another table and do md5 before insert data into table"}], "owner": {"reputation": 109, "user_id": 7874623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e947eda828f3d84069c40f08e2c522fd?s=128&d=identicon&r=PG&f=1", "display_name": "ruth", "link": "https://stackoverflow.com/users/7874623/ruth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 890, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1495058411, "creation_date": 1495058411, "question_id": 44035454, "link": "https://stackoverflow.com/questions/44035454/aws-update-data-in-redshift-using-lambda-python-and-boto3", "title": "AWS: update data in redshift using lambda, python and boto3", "body": "<p>first, I am very new to python and aws.\nI have to encrypt one column in redshift. I decided to use lambda to do this update, but nothing worked and there was no error message.\nI wonder how can I update data in redshift using lambda and how can I figure out that data has been encrypted successfully.</p>\n\n<pre><code>import boto3\nimport psycopg2\nimport hashlib\n\nclient = boto3.client('redshift')\n\ndef lambda_handler(event, context):\n    con = psycopg2.connect(dbname='dbname', host='host',\n                       port='port', user='user', password='pwd')\n    cur = con.cursor()\n    cur.execute(\"\"\"SELECT * FROM table;\"\"\")\n    result = cur.fetchall()\n    for row in result:\n        code = hashlib.md5(row.get('code'))\n    cur.execute(\"\"\"UPDATE table SET code = %s;\"\"\" % code)\n    con.commit()\n    con.close()\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "matplotlib", "seaborn"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 0, "last_activity_date": 1520287997, "last_edit_date": 1520287997, "creation_date": 1495563287, "answer_id": 44142183, "question_id": 44035425, "link": "https://stackoverflow.com/questions/44035425/changing-size-of-seaborn-plots-and-matplotlib-library-plots-in-a-common-way/44142183#44142183", "title": "changing size of seaborn plots and matplotlib library plots in a common way", "body": "<p>It's not possible to change the figure size of a <code>factorplot</code> via rcParams.</p>\n\n<p>The figure size is <a href=\"https://github.com/mwaskom/seaborn/blob/master/seaborn/axisgrid.py#L280\" rel=\"nofollow noreferrer\">hardcoded inside the FacetGrid class</a> as </p>\n\n<pre><code>figsize = (ncol * size * aspect, nrow * size)\n</code></pre>\n\n<p>A new figure is then created using this <code>figsize</code>.</p>\n\n<p>This makes it impossible to change the figure size by other means than the argument in the function call to <code>factorplot</code>. It makes it also impossible to first create a figure with other parameters and plot the factorplot to this figure. However, for a workaround in case of a factorplot with a single axes see <a href=\"https://stackoverflow.com/a/49120058/4124317\">@MartinEvans' answer</a>.</p>\n\n<p>The author of seaborn <a href=\"https://stackoverflow.com/questions/23969619/plotting-with-seaborn-using-the-matplotlib-object-oriented-interface\">argues here</a> that this is because a factorplot would need to have full control over the figure. </p>\n\n<p>While one may question whether this needs to be the case, there is nothing you can do about it, other than (a) adding a feature request at the <a href=\"https://github.com/mwaskom/seaborn/issues\" rel=\"nofollow noreferrer\">GitHub site</a> and/or write your own wrapper - which wouldn't be too difficult, given that seaborn as well as matplotlib are open source.</p>\n"}, {"tags": [], "owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1520286586, "creation_date": 1520286586, "answer_id": 49120058, "question_id": 44035425, "link": "https://stackoverflow.com/questions/44035425/changing-size-of-seaborn-plots-and-matplotlib-library-plots-in-a-common-way/49120058#49120058", "title": "changing size of seaborn plots and matplotlib library plots in a common way", "body": "<p>The figure size can be modified by first creating a figure and axis and passing this as a parameter to the seaborn plot:</p>\n\n<pre><code>import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns       \n\nfig, ax = plt.subplots(figsize=(10, 10))\n\ndf = pd.DataFrame({\n    'product' : ['A', 'A', 'A', 'B', 'B', 'C', 'C'], \n    'close' : [1, 1, 0, 1, 1, 1, 0],\n    'counts' : [3, 3, 3, 2, 2, 2, 2]})\n\nsns.factorplot(y='counts', x='product', hue='close', data=df, kind='bar', palette='muted', ax=ax)\nplt.close(2)    # close empty figure\nplt.show()\n</code></pre>\n\n<p>When using an <a href=\"https://seaborn.pydata.org/api.html#axis-grids\" rel=\"nofollow noreferrer\">Axis grids</a> type plot, seaborn will automatically create another figure. A workaround is to close the empty second figure.</p>\n"}], "owner": {"reputation": 5, "user_id": 7801092, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2r9eEG1Vdn4/AAAAAAAAAAI/AAAAAAAAANU/HdRsydXWVlU/photo.jpg?sz=128", "display_name": "vikas choudhary", "link": "https://stackoverflow.com/users/7801092/vikas-choudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 0, "accepted_answer_id": 44142183, "answer_count": 2, "score": 1, "last_activity_date": 1520287997, "creation_date": 1495058288, "last_edit_date": 1495562706, "question_id": 44035425, "link": "https://stackoverflow.com/questions/44035425/changing-size-of-seaborn-plots-and-matplotlib-library-plots-in-a-common-way", "title": "changing size of seaborn plots and matplotlib library plots in a common way", "body": "<pre><code>from pylab import rcParams\nrcParams['figure.figsize'] = (10, 10)\n</code></pre>\n\n<p>This works fine for  histogram plots but not for factor plots.\nsns.factorplot (.....) still shows the default size.</p>\n\n<pre><code>sns.factorplot('Pclass','Survived',hue='person',data = titanic_df,size = 6,aspect =1)\n</code></pre>\n\n<p>I have to specify size,aspect everytime.</p>\n\n<p>Please suggest something that works for both of them globally.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 6027, "user_id": 7738328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d6eb24cbea7d5c8d4bdab21dd3d232?s=128&d=identicon&r=PG&f=1", "display_name": "JohanL", "link": "https://stackoverflow.com/users/7738328/johanl"}, "edited": false, "score": 1, "creation_date": 1495058336, "post_id": 44035361, "comment_id": 75097569, "body": "What about <code>with open(&quot;..&#47;{}.out&quot;.format(i),&#39;w&#39;) as f:</code>?"}], "owner": {"reputation": 197, "user_id": 4747561, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cabb369fd5a8fd142047e6cd563a710b?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/4747561/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1495057989, "creation_date": 1495057989, "question_id": 44035361, "link": "https://stackoverflow.com/questions/44035361/change-python-loop-to-start-from-parent-folder", "title": "Change python loop to start from parent folder", "body": "<p>I have the a loop I am using and it works great. It appears like:</p>\n\n<pre><code># Import OVITO modules.\nfrom ovito.io import *\nfrom ovito.modifiers import *\n\n# Import NumPy module.\nimport numpy\nimport sys\n\nfor i in range(1,25):\n\n    with open(\"{}.out\".format(i),'w') as f:\n        for j in range(1,401):\n\n                node = import_file(\"../Angle{}/{}eV/cascade.dump\".format(i,j),multiple_frames = True)\n                ovito.dataset.anim.current_frame = 11\n\n                mod = WignerSeitzAnalysisModifier(per_type_occupancies = True)\n                mod.reference.load(\"../../../../STP/position_perfect_300.dump\")\n                node.modifiers.append(mod)\n                node.compute()\n                node.modifiers.append(SelectExpressionModifier(expression = 'ParticleType==2 &amp;&amp; Occupancy.1==0 &amp;&amp; Occupancy.2==0'))\n                node.compute()\n\n                f.write(\"%i\\n\" % numpy.count_nonzero(node.output.particle_properties['Selection']))\nf.close()\n</code></pre>\n\n<p>Is there any way to edit this loop so that instead of looking for i in range(1,25) in current directory, it looks for it in parent directory? This would help me clean up my files a lot. Any ideas?</p>\n"}, {"tags": ["python", "security", "cryptography", "aes"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1495058386, "post_id": 44035354, "comment_id": 75097587, "body": "&quot;But I wanna get rid of initial_vector and use default one&quot; - <b>don&#39;t reuse IVs</b>."}, {"owner": {"reputation": 155, "user_id": 6685275, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2629bff2dbe0da5865a27b45c26e13c2?s=128&d=identicon&r=PG&f=1", "display_name": "Averin Maxim", "link": "https://stackoverflow.com/users/6685275/averin-maxim"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495058565, "post_id": 44035354, "comment_id": 75097637, "body": "@user2357112 yeah, I know, that I should use IV for only one pass"}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 1, "creation_date": 1495060043, "post_id": 44035354, "comment_id": 75098149, "body": "Just pre-pend the IV to the encrypted data for use on decryption, it does not need to be secret."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 2, "creation_date": 1495060072, "post_id": 44035354, "comment_id": 75098156, "body": "<b>Do not encrypt passwords</b>, when the attacker gets the DB he will also get the encryption key. Just using a hash function is not sufficient and just adding a salt does little to improve the security.  Iterate over an HMAC with a random salt for about a 100ms duration and save the salt with the hash. Use a function such as <code>password_hash</code>, <code>PBKDF2</code>, <code>Bcrypt</code> or similar functions. The point is to make the attacker spend a lot of time finding passwords by brute force."}, {"owner": {"reputation": 155, "user_id": 6685275, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2629bff2dbe0da5865a27b45c26e13c2?s=128&d=identicon&r=PG&f=1", "display_name": "Averin Maxim", "link": "https://stackoverflow.com/users/6685275/averin-maxim"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1495095728, "post_id": 44035354, "comment_id": 75110488, "body": "@zaph the problem is to generate passwords fast. Why did attacker get key, when he gets DB, cause key in .env file and DB in saparate AWS cloud"}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 1, "creation_date": 1495095755, "post_id": 44035354, "comment_id": 75110512, "body": "When using CTR mode is is imperative the same key/counter paid are <b>never reused</b>."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1495095975, "post_id": 44035354, "comment_id": 75110650, "body": "1. Passwords need to be hashed slowly so that it takes an attacker substantial CPU time to brute force them with a list or frequently used passwords. 2. Passwords need to be one-way, that is the password can not be recovered by anyone, even a server administrator. 3. A typical attacker will gain admin access so any encryption password can also be obtained. 4. Do not underestimate the attackers, they are smart and have substantial experience, they are not a curios teenager"}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1495096147, "post_id": 44035354, "comment_id": 75110775, "body": "Keep in mind that securing password access is to protect the users, they expect and deserve a secure implementation."}, {"owner": {"reputation": 155, "user_id": 6685275, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2629bff2dbe0da5865a27b45c26e13c2?s=128&d=identicon&r=PG&f=1", "display_name": "Averin Maxim", "link": "https://stackoverflow.com/users/6685275/averin-maxim"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1495098884, "post_id": 44035354, "comment_id": 75112699, "body": "@zaph I totally agree with you, but .env file and DB in different clouds, that&#39;s why getting one of two things don&#39;t give attacker anything."}, {"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1495104858, "post_id": 44035354, "comment_id": 75116812, "body": "1. Don&#39;t underestimate attackers. 2. The passwords should <b>not</b> be available to <b>anyone</b>, not even the site administrators. 3. If you do not want to follow generally accepted security procedures please such as recommended by NIST tell your users that so they can decide if they should trust your site security."}], "answers": [{"comments": [{"owner": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1495123888, "post_id": 44052459, "comment_id": 75130943, "body": "Note that NIST recommends PBKDF2 and for PHP <code>password_hash</code> and <code>password_verify</code> are a good choice."}, {"owner": {"reputation": 1262, "user_id": 1039462, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e900d325da026737779c7e4fd790d3ab?s=128&d=identicon&r=PG", "display_name": "mat", "link": "https://stackoverflow.com/users/1039462/mat"}, "reply_to_user": {"reputation": 107760, "user_id": 451475, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a632afa4c11779c0cabd7df04eb26ba6?s=128&d=identicon&r=PG", "display_name": "zaph", "link": "https://stackoverflow.com/users/451475/zaph"}, "edited": false, "score": 0, "creation_date": 1495124338, "post_id": 44052459, "comment_id": 75131201, "body": "Yes, they do recommend it. PBKDF2 is okay, but still inferiour to other options like scrypt or Argon2 (the new kid on the block) which are a lot better at slowing down an adversary with specialised hardware."}, {"owner": {"reputation": 155, "user_id": 6685275, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2629bff2dbe0da5865a27b45c26e13c2?s=128&d=identicon&r=PG&f=1", "display_name": "Averin Maxim", "link": "https://stackoverflow.com/users/6685275/averin-maxim"}, "edited": false, "score": 0, "creation_date": 1495125100, "post_id": 44052459, "comment_id": 75131624, "body": "@mat yeah, I know, that I shouldn&#39;t reuse it, but <a href=\"http://stackoverflow.com/a/43988416/6685275\">stackoverflow.com/a/43988416/6685275</a>"}, {"owner": {"reputation": 1262, "user_id": 1039462, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e900d325da026737779c7e4fd790d3ab?s=128&d=identicon&r=PG", "display_name": "mat", "link": "https://stackoverflow.com/users/1039462/mat"}, "edited": false, "score": 1, "creation_date": 1495125532, "post_id": 44052459, "comment_id": 75131865, "body": "I&#39;m not a python expert, but the documentation of the Counter class states, that if use just do <code>Counter.new(128)</code> you will always end up with a 128-bit counter with an initial value of 1 (no prefix, no suffix)."}, {"owner": {"reputation": 155, "user_id": 6685275, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2629bff2dbe0da5865a27b45c26e13c2?s=128&d=identicon&r=PG&f=1", "display_name": "Averin Maxim", "link": "https://stackoverflow.com/users/6685275/averin-maxim"}, "edited": false, "score": 0, "creation_date": 1495127235, "post_id": 44052459, "comment_id": 75132831, "body": "@mat it is absolutely true, when then it was suggested to me from crypto man with huge experience"}], "tags": [], "owner": {"reputation": 1262, "user_id": 1039462, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e900d325da026737779c7e4fd790d3ab?s=128&d=identicon&r=PG", "display_name": "mat", "link": "https://stackoverflow.com/users/1039462/mat"}, "is_accepted": false, "score": 1, "last_activity_date": 1495124242, "last_edit_date": 1495124242, "creation_date": 1495122645, "answer_id": 44052459, "question_id": 44035354, "link": "https://stackoverflow.com/questions/44035354/did-i-use-counter-for-aes-128-cipher-on-python-right/44052459#44052459", "title": "Did I use counter for AES-128 cipher on python right?", "body": "<blockquote>\n  <p>Why AES-128 ciphers encrypted/decrypted text successfully? Did I miss something in code?</p>\n</blockquote>\n\n<p>You created the same counter block twice, because you did not set any initial value. See <a href=\"https://pythonhosted.org/pycrypto/Crypto.Util.Counter-module.html\" rel=\"nofollow noreferrer\">the documentation</a> of the Counter class.\nYou must never ever use CTR mode with the same IV twice. Otherwise anyone knowing one piece of plain text can decrypt every other cipher text.</p>\n\n<blockquote>\n  <p>Is it secure to use one key for encrypting all passwords in database, using AES-128?</p>\n</blockquote>\n\n<p>It is usually safe to use one key to encrypt multiple data objects in a database.\nBut as was already mentioned in the comments. You should never encrypt passwords. Passwords are to be stored in a hashed form, so not even you can be able to read them in plaintext. The prefered function for hashing passwords these days is <em>scrypt</em>. </p>\n"}], "owner": {"reputation": 155, "user_id": 6685275, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2629bff2dbe0da5865a27b45c26e13c2?s=128&d=identicon&r=PG&f=1", "display_name": "Averin Maxim", "link": "https://stackoverflow.com/users/6685275/averin-maxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495124242, "creation_date": 1495057965, "question_id": 44035354, "link": "https://stackoverflow.com/questions/44035354/did-i-use-counter-for-aes-128-cipher-on-python-right", "title": "Did I use counter for AES-128 cipher on python right?", "body": "<p>guys. I have a code for encrypting/decrypting passwords and put them into database. As I discovered best practices for AES is to store key and initial_vector for every password. But I wanna get rid of initial_vector and use default one. As I understand we should use same counter for decrypting and encrypting. But I don't use the same, and it works. </p>\n\n<pre><code>key = os.urandom(16)\n\ndef test(str):\n ctr = Counter.new(128)\n obj = AES.new(key, AES.MODE_CTR, counter=ctr)\n\n message = str.encode('utf-8')\n ciphertext = obj.encrypt(message)\n\n ctr2 = Counter.new(128)\n obj2 = AES.new(key, AES.MODE_CTR, counter=ctr2)\n ans = obj2.decrypt(ciphertext)\n return ans.decode('utf-8')\n</code></pre>\n\n<p>Questions:</p>\n\n<ol>\n<li>Why AES-128 ciphers encrypted/decrypted text successfully? Did I miss\nsomething in code? </li>\n<li>Is it secure to use one key for encrypting all\npasswords in database, using AES-128?</li>\n</ol>\n"}, {"tags": ["python", "time"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1495058111, "post_id": 44035347, "comment_id": 75097481, "body": "It seems there is extraneous stuff in your strings, like <code>&quot;updated September 30 2016&quot;</code>, can you use a <code>try: except</code> and print the offending <code>item</code> in the <code>except</code> block?"}, {"owner": {"reputation": 361, "user_id": 1457672, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2eca838e800629862e3a9c2c0ac879c1?s=128&d=identicon&r=PG", "display_name": "John Laudun", "link": "https://stackoverflow.com/users/1457672/john-laudun"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495058694, "post_id": 44035347, "comment_id": 75097682, "body": "Thanks for catching the bad formatting in the original question @juanpa.arrivillaga."}, {"owner": {"reputation": 361, "user_id": 1457672, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2eca838e800629862e3a9c2c0ac879c1?s=128&d=identicon&r=PG", "display_name": "John Laudun", "link": "https://stackoverflow.com/users/1457672/john-laudun"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495059091, "post_id": 44035347, "comment_id": 75097814, "body": "Actually, you were right: the problem lies with the input."}], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 1457672, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2eca838e800629862e3a9c2c0ac879c1?s=128&d=identicon&r=PG", "display_name": "John Laudun", "link": "https://stackoverflow.com/users/1457672/john-laudun"}, "edited": false, "score": 0, "creation_date": 1495059266, "post_id": 44035473, "comment_id": 75097885, "body": "The minor mistake was in my transcribing the code and not simply copying and pasting: I added the error as I posted the question! Sorry!"}], "tags": [], "owner": {"reputation": 6079, "user_id": 1293700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/on9Fr.png?s=128&g=1", "display_name": "Darius", "link": "https://stackoverflow.com/users/1293700/darius"}, "is_accepted": false, "score": 1, "last_activity_date": 1495058952, "last_edit_date": 1495058952, "creation_date": 1495058507, "answer_id": 44035473, "question_id": 44035347, "link": "https://stackoverflow.com/questions/44035347/python-date-conversion-failing-in-for-loop/44035473#44035473", "title": "Python date conversion failing in for loop", "body": "<p>You have a minor mistake in the format. Just change the format from <code>\"%b %d %Y\"</code> to <code>\"%B %d %Y\"</code>. In addition I add a short snippet:</p>\n\n<pre><code>import time\n\ndates = [\n    'September 30 2016',\n    'September 6 2016',\n    'September 13 2016',\n    'October 13 2016',\n    'October 13 2014']\n\n#                                                      \u2193\nprint([time.strftime(\"%Y-%m-%d\", time.strptime(date, \"%B %d %Y\")) for date in dates])\n\n# ['2016-09-30', '2016-09-06', '2016-09-13', '2016-10-13', '2014-10-13']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 361, "user_id": 1457672, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2eca838e800629862e3a9c2c0ac879c1?s=128&d=identicon&r=PG", "display_name": "John Laudun", "link": "https://stackoverflow.com/users/1457672/john-laudun"}, "is_accepted": false, "score": 0, "last_activity_date": 1495059214, "last_edit_date": 1495541895, "creation_date": 1495059214, "answer_id": 44035608, "question_id": 44035347, "link": "https://stackoverflow.com/questions/44035347/python-date-conversion-failing-in-for-loop/44035608#44035608", "title": "Python date conversion failing in for loop", "body": "<p><a href=\"https://stackoverflow.com/users/5014455/juanpa-arrivillaga\">juanpa.arrivillaga</a> has it right. I changed the code to include <code>try/except</code>:</p>\n\n<pre><code>for item in dates:\n    try:\n        raw = time.strptime(item, \"%B %d %Y\")\n        stripped.append(raw)\n    except ValueError:\n        print(item, dates.index(item))\n</code></pre>\n\n<p>And I've got data/input issues that I hadn't seen. (That's what I get for working too quickly.)</p>\n\n<p>Here are the first three, for the record:</p>\n\n<pre><code>August 26 2016 updated September 30 2016 23\nSeptmeber 1 2016 25\n12/1/2016 46\n</code></pre>\n\n<p>Now that juanpa has me realizing I can use <code>try/except</code> I'll add some code to change those dates like the third line to the format I want and to leave the really wacky lines alone. </p>\n"}], "owner": {"reputation": 361, "user_id": 1457672, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2eca838e800629862e3a9c2c0ac879c1?s=128&d=identicon&r=PG", "display_name": "John Laudun", "link": "https://stackoverflow.com/users/1457672/john-laudun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495059214, "creation_date": 1495057935, "last_edit_date": 1495058040, "question_id": 44035347, "link": "https://stackoverflow.com/questions/44035347/python-date-conversion-failing-in-for-loop", "title": "Python date conversion failing in for loop", "body": "<p>I thought I had this done, but something fundamental is tripping me up. </p>\n\n<p>I have a list of dates that looks like this:</p>\n\n<pre><code>dates[0:5]\n\n['September 30 2016',\n 'September 6 2016',\n 'September 13 2016',\n 'October 13 2016',\n 'October 13 2014']\n</code></pre>\n\n<p>And I want not only to convert them into structured time but also back out into something Excel can understand -- because that's what my collaborators are using and Excel isn't recognizing the above entries, and the 185 others, as dates (for whatever reason ... I tried). </p>\n\n<p>So, I wrote some test code:</p>\n\n<pre><code>date_in = time.strptime(dates[3], \"%B %d %Y\")\ndate_out = time.strftime(\"%Y-%m-%d\", date_in)\nprint(date_out)\n\n2016-10-13\n</code></pre>\n\n<p>Lovely. But when I put it into a <code>for</code> loop to work through the string, I keep getting an error. </p>\n\n<p>Here's the loop:</p>\n\n<pre><code>stripped = []\nfor item in dates:\n    raw = time.strptime(item, \"%B %d %Y\")\n    stripped.append(raw)\n</code></pre>\n\n<p>And here's the error:</p>\n\n<pre><code>ValueError: unconverted data remains:  updated September 30 2016\n</code></pre>\n\n<p><em>Please note I know the <code>for</code> loop above does not do what I said I wanted to do: I was trying to get it back to the fail point. My original code was</em>:</p>\n\n<pre><code>for the_date in dates:\n    time.strftime(\"%Y-%m-%d\", time.strptime(the_date, \"%b %d %Y\"))\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1495057798, "post_id": 44035287, "comment_id": 75097357, "body": "Don&#39;t <i>iterate over a dictionary to check if a key exists</i>. That defeats the <i>whole point</i>. Just use <code>if k in d: print(&quot;the key&quot;, k, &quot;exists and the value is&quot;, d[k])</code>"}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 1, "creation_date": 1495057847, "post_id": 44035287, "comment_id": 75097378, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1602934/check-if-a-given-key-already-exists-in-a-dictionary\">Check if a given key already exists in a dictionary</a>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1495057894, "post_id": 44035287, "comment_id": 75097403, "body": "Also, note, your value will be <code>str</code>, which you seem to be aware because you use <code>v = v.strip()</code>,  so <code>if v == 20</code> will <i>never be true</i>. Use <code>if int(v) == 20</code>"}, {"owner": {"reputation": 421, "user_id": 2153380, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pBebv.jpg?s=128&g=1", "display_name": "C\u1d34\u1d00Z", "link": "https://stackoverflow.com/users/2153380/c%e1%b4%b4%e1%b4%80z"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1542796326, "post_id": 44035287, "comment_id": 93694951, "body": "@juanpa.arrivillaga I thought <code>==</code> would coerce and yield expected result for <code>v==20</code>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 421, "user_id": 2153380, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pBebv.jpg?s=128&g=1", "display_name": "C\u1d34\u1d00Z", "link": "https://stackoverflow.com/users/2153380/c%e1%b4%b4%e1%b4%80z"}, "edited": false, "score": 0, "creation_date": 1542804180, "post_id": 44035287, "comment_id": 93699219, "body": "@C\u1d34\u1d00Z No, python never coerces. Python != Javascript"}, {"owner": {"reputation": 421, "user_id": 2153380, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pBebv.jpg?s=128&g=1", "display_name": "C\u1d34\u1d00Z", "link": "https://stackoverflow.com/users/2153380/c%e1%b4%b4%e1%b4%80z"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1542869061, "post_id": 44035287, "comment_id": 93724630, "body": "@juanpa.arrivillaga To test, I ran <code>1 == True</code> and it returns <code>True</code>, but <code>1 is True</code> returns <code>False</code>. Python does low-level coercion in case of <code>==</code> operator, more discussion <a href=\"https://stackoverflow.com/questions/15008380/double-equals-vs-is-in-python\">here</a>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 421, "user_id": 2153380, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pBebv.jpg?s=128&g=1", "display_name": "C\u1d34\u1d00Z", "link": "https://stackoverflow.com/users/2153380/c%e1%b4%b4%e1%b4%80z"}, "edited": false, "score": 0, "creation_date": 1542905785, "post_id": 44035287, "comment_id": 93744583, "body": "@C\u1d34\u1d00Z No, it does not. <code>1 == True</code> because <code>isinstance(True, int)</code> in python, booleans <i>are ints</i>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 421, "user_id": 2153380, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pBebv.jpg?s=128&g=1", "display_name": "C\u1d34\u1d00Z", "link": "https://stackoverflow.com/users/2153380/c%e1%b4%b4%e1%b4%80z"}, "edited": false, "score": 0, "creation_date": 1542905974, "post_id": 44035287, "comment_id": 93744688, "body": "@C\u1d34\u1d00Z in the end, <code>==</code> will do whatever <code>__eq__</code> tells it to do."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 8015049, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/735701ad84a6dd73c8ec643a864a81c5?s=128&d=identicon&r=PG&f=1", "display_name": "pioltking", "link": "https://stackoverflow.com/users/8015049/pioltking"}, "edited": false, "score": 0, "creation_date": 1495058567, "post_id": 44035382, "comment_id": 75097640, "body": "I want to print v value as well for some reasons. will above script will work in that case?"}, {"owner": {"reputation": 699, "user_id": 399587, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1ba6f868d32cd233b08a62c24991afdd?s=128&d=identicon&r=PG", "display_name": "hizki", "link": "https://stackoverflow.com/users/399587/hizki"}, "edited": false, "score": 2, "creation_date": 1541412769, "post_id": 44035382, "comment_id": 93194857, "body": "Since python evaluates Boolean conditions lazily, you can simplify your &#39;if&#39; statement to look like this: <code>if &#39;apples&#39; in d and d[&#39;apples&#39;] == 20: ...</code>. The interpreter will check for the &#39;apples&#39; key in the dictionary, and only if it exists will the interpreter continue to fetch it."}], "tags": [], "owner": {"reputation": 2514, "user_id": 5686598, "user_type": "registered", "profile_image": "https://graph.facebook.com/1031185773610575/picture?type=large", "display_name": "Pedro von Hertwig Batista", "link": "https://stackoverflow.com/users/5686598/pedro-von-hertwig-batista"}, "is_accepted": false, "score": 55, "last_activity_date": 1534368351, "last_edit_date": 1534368351, "creation_date": 1495058106, "answer_id": 44035382, "question_id": 44035287, "link": "https://stackoverflow.com/questions/44035287/check-key-exist-in-python-dict/44035382#44035382", "title": "Check key exist in python dict", "body": "<p>Use the <code>in</code> keyword.</p>\n\n<pre><code>if 'apples' in d:\n    if d['apples'] == 20:\n        print('20 apples')\n    else:\n        print('Not 20 apples')\n</code></pre>\n\n<p>If you want to get the value only if the key exists (and avoid an exception trying to get it if it doesn't), then you can use the <code>get</code> function from a dictionary, passing an optional default value as the second argument (if you don't pass it it returns <code>None</code> instead):</p>\n\n<pre><code>if d.get('apples', 0) == 20:\n    print('20 apples.')\nelse:\n    print('Not 20 apples.')\n</code></pre>\n"}], "owner": {"reputation": 241, "user_id": 8015049, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/735701ad84a6dd73c8ec643a864a81c5?s=128&d=identicon&r=PG&f=1", "display_name": "pioltking", "link": "https://stackoverflow.com/users/8015049/pioltking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102727, "favorite_count": 2, "answer_count": 1, "score": 22, "last_activity_date": 1534368351, "creation_date": 1495057649, "question_id": 44035287, "link": "https://stackoverflow.com/questions/44035287/check-key-exist-in-python-dict", "title": "Check key exist in python dict", "body": "<p>Below is the file output:</p>\n\n<pre><code>apples:20\norange:100\n</code></pre>\n\n<p>Below is the code:</p>\n\n<pre><code>d = {}\nwith open('test1.txt') as f:\n    for line in f:\n        if \":\" not in line:\n                continue\n        key, value = line.strip().split(\":\", 1)\n        d[key] = value\n\nfor k, v in d.iteritems():\n    if k == 'apples':\n         v = v.strip()\n         if v == 20:\n             print \"Apples are equal to 20\"\n         else:\n             print \"Apples may have greater than or less than 20\"   \n    if k == 'orrange':\n         v = v.strip()\n         if v == 20:\n            print \"orange are equal to 100\"\n         else:\n            print \"orange may have greater than or less than 100\"\n</code></pre>\n\n<p>In above code i am written \"if k == 'orrange':\", but its actually \"orange\" as per output file.</p>\n\n<p>In this case I have to print orrange key is not exist in output file. Please help me. How to do this  </p>\n"}, {"tags": ["python", "scikit-learn", "grid-search"], "comments": [{"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 2, "creation_date": 1495058062, "post_id": 44035275, "comment_id": 75097461, "body": "What specifically is concerning you? You already seem to know about <code>best_estimator_</code>."}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1495087513, "post_id": 44035275, "comment_id": 75105462, "body": "You need to explain in detail what you were expecting and what is not working for you"}, {"owner": {"reputation": 11244, "user_id": 2636317, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d665de9176035b991a9c84b82a23337d?s=128&d=identicon&r=PG", "display_name": "mgoldwasser", "link": "https://stackoverflow.com/users/2636317/mgoldwasser"}, "reply_to_user": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1495103590, "post_id": 44035275, "comment_id": 75115942, "body": "@aryamccarthy perhaps I got this completely right, but I want to know what is the correct way to GridSearch on a pipeline that could consist of completely different sub steps that each might contain completely different parameters that need to be tuned (e.g. a RandomForestClassifier vs a SVC). I have attempted to do this in a nested approach, but I haven&#39;t been able to find documentation anywhere to suggest that this is a correct design pattern, and while it seems to be outputting reasonable results, I am concerned that this approach does not work as I expect."}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1495110877, "post_id": 44035275, "comment_id": 75121077, "body": "This is a fairly common approach to try different algorithms and tune them to see which algorithm is best suited for the data, just not used this way. Traditional approaches like a for loop for all algorithms are used commonly. In your case <code>grid_search_meta.best_estimator_</code> will give the best of the three approaches you used, and <code>grid_search_meta.best_estimator_.best_estimator_</code> will give the model from the above said best approach, which gave best results on your training data."}, {"owner": {"reputation": 11244, "user_id": 2636317, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d665de9176035b991a9c84b82a23337d?s=128&d=identicon&r=PG", "display_name": "mgoldwasser", "link": "https://stackoverflow.com/users/2636317/mgoldwasser"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 1, "creation_date": 1495114569, "post_id": 44035275, "comment_id": 75123864, "body": "@VivekKumar thank you, that is helpful! One quick correction, in my code above, the best estimator is a <code>Pipeline</code> containing a single <code>GridSearchCV</code> element, so it&#39;s actually <code>grid_search_meta.best_estimator_.steps[0][1].best_estimator_</code>"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1495446443, "post_id": 44035275, "comment_id": 75238757, "body": "Aah yes. My bad. I oversaw that its a pipeline."}], "owner": {"reputation": 11244, "user_id": 2636317, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d665de9176035b991a9c84b82a23337d?s=128&d=identicon&r=PG", "display_name": "mgoldwasser", "link": "https://stackoverflow.com/users/2636317/mgoldwasser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1037, "favorite_count": 2, "answer_count": 0, "score": 5, "last_activity_date": 1495104891, "creation_date": 1495057580, "last_edit_date": 1495104891, "question_id": 44035275, "link": "https://stackoverflow.com/questions/44035275/nested-gridsearchcv", "title": "Nested GridSearchCV", "body": "<p>For a given model type, I want to both 1) tune parameters for various model types and 2) find the best tuned model type. I would like to use <code>GridSearchCV</code> for this. </p>\n\n<p>I was able to run the following, but I am also concerned that this is not working the way I am expecting it to work, and I am also concerned that perhaps you do not need to do nested <code>GridSearchCV</code> - is it possible to do this using one <code>GridSearchCV</code>? </p>\n\n<p>One concern I have with a nested GridSearchCV is that I might be doing nested cross validation as well, so instead of grid searching on 66% of the train data, it might be effectively grid searching on 43.56% of the train data. Another concern I have is that I have increased the code complexity.</p>\n\n<p>Here's my nested <code>GridSearchCV</code> example using the iris dataset:</p>\n\n<pre><code>import numpy as np \nimport pandas as pd\nfrom sklearn.datasets import load_iris\nfrom sklearn.decomposition import KernelPCA\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.model_selection import GridSearchCV, train_test_split\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.pipeline import Pipeline\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn.svm import SVC\n\niris_raw_data = load_iris()\niris_df = pd.DataFrame(np.c_[iris_raw_data.data, iris_raw_data.target], \n                       columns=iris_raw_data.feature_names + ['target'])\niris_category_labels = {0:'setosa', 1:'versicolor', 2:'virginica'}\niris_df['species_name'] = iris_df['target'].apply(lambda l: iris_category_labels[int(l)])\n\nfeatures = ['sepal length (cm)', 'sepal width (cm)', 'petal length (cm)', 'petal width (cm)']\ntarget = 'target'\nX_train, X_test, y_train, y_test = train_test_split(iris_df[features], iris_df[target], test_size=.33)\n\npipe_knn = Pipeline(steps=[\n    ('scaler', StandardScaler()),\n    ('reduce_dim', KernelPCA(n_components=2)),    # select feature 2 and 4\n    ('clf', KNeighborsClassifier())   \n    ]) \nparams_knn = dict(scaler=[None, StandardScaler()],\n                  reduce_dim=[None, KernelPCA(n_components=2)],\n                  clf__n_neighbors=[2, 5, 15]) \ngrid_search_knn = GridSearchCV(pipe_knn, param_grid=params_knn)\n\npipe_svc = Pipeline(steps=[\n    ('scaler', StandardScaler()),\n    ('reduce_dim', KernelPCA(n_components=2)),    # select feature 2 and 4\n    ('clf', SVC())   \n    ]) \nparams_svc = dict(scaler=[None, StandardScaler()],\n                  reduce_dim=[None, KernelPCA(n_components=2)],\n                  clf__C=[0.1, 1, 10, 100]) \ngrid_search_svc = GridSearchCV(pipe_svc, param_grid=params_svc)\n\npipe_rf = Pipeline(steps=[\n    ('clf', RandomForestClassifier())   \n    ]) \nparams_rf = dict(clf__n_estimators=[10, 50, 100],\n                 clf__min_samples_leaf=[2, 5, 10])\n\ngrid_search_rf = GridSearchCV(pipe_rf, param_grid=params_rf)\n\npipe_meta = Pipeline(steps=[('subpipes', pipe_knn)])\nparams_meta = dict(subpipes=[grid_search_svc, grid_search_knn, grid_search_rf])\ngrid_search_meta = GridSearchCV(pipe_meta, param_grid=params_meta)\n\ngrid_search_meta.fit(X_train, y_train)\nprint(grid_search_meta.best_estimator_)\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 658058, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1495057595, "post_id": 44035268, "comment_id": 75097270, "body": "You can use <code>^123(?!\\d)</code>"}, {"owner": {"reputation": 92, "user_id": 3519936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/047cd334cc45231636f3a68613f8604d?s=128&d=identicon&r=PG&f=1", "display_name": "user3519936", "link": "https://stackoverflow.com/users/3519936/user3519936"}, "edited": false, "score": 0, "creation_date": 1495057852, "post_id": 44035268, "comment_id": 75097380, "body": "This should also work <code>^123(?:\\D|$)</code>"}, {"owner": {"reputation": 92, "user_id": 3519936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/047cd334cc45231636f3a68613f8604d?s=128&d=identicon&r=PG&f=1", "display_name": "user3519936", "link": "https://stackoverflow.com/users/3519936/user3519936"}, "reply_to_user": {"reputation": 658058, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1495058139, "post_id": 44035268, "comment_id": 75097492, "body": "@anubhava oops you&#39;re right, I edited my previous comment!"}, {"owner": {"reputation": 1406, "user_id": 3337836, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FBbZh.jpg?s=128&g=1", "display_name": "isosceleswheel", "link": "https://stackoverflow.com/users/3337836/isosceleswheel"}, "reply_to_user": {"reputation": 658058, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1495075218, "post_id": 44035268, "comment_id": 75101837, "body": "@anubhava has two options that should cover you for the range of scenarios you have put in your question."}], "answers": [{"tags": [], "owner": {"reputation": 658058, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 1, "last_activity_date": 1495057760, "creation_date": 1495057760, "answer_id": 44035304, "question_id": 44035268, "link": "https://stackoverflow.com/questions/44035268/python-regular-expression-character-following-match-does-not-equal/44035304#44035304", "title": "Python Regular Expression Character following match does not equal", "body": "<blockquote>\n  <p>I am looking for whether the character immediately following my match string is not a numeric.</p>\n</blockquote>\n\n<p>You can use this regex:</p>\n\n<pre><code>^123(?!\\d)\n</code></pre>\n\n<p><code>(?!\\d)</code> is negative lookahead that will assert failure if next character after <code>123</code> is a digit.</p>\n\n<p><a href=\"https://regex101.com/r/sWzD9t/1\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 953, "user_id": 7575796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfUQW.png?s=128&g=1", "display_name": "Master Yushi", "link": "https://stackoverflow.com/users/7575796/master-yushi"}, "is_accepted": false, "score": 1, "last_activity_date": 1495058519, "last_edit_date": 1495058519, "creation_date": 1495057894, "answer_id": 44035334, "question_id": 44035268, "link": "https://stackoverflow.com/questions/44035268/python-regular-expression-character-following-match-does-not-equal/44035334#44035334", "title": "Python Regular Expression Character following match does not equal", "body": "<p>anubhava's answer is correct, you can also use this which I think is simpler :</p>\n\n<p><code>^123\\D{1}</code></p>\n\n<p><code>\\D</code> matches any non-digit character. \nyou can replace <code>{1}</code> with any quantifier of your choice</p>\n\n<p>Maybe you want to capture the full string, in that case you can modify :</p>\n\n<p><code>^123\\D{1}.*</code></p>\n\n<p><a href=\"https://regex101.com/r/7vdnd1/2\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 2589, "user_id": 3776938, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1b19e04e44001cc1ddba3afc2212365?s=128&d=identicon&r=PG&f=1", "display_name": "AJG519", "link": "https://stackoverflow.com/users/3776938/ajg519"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1495058519, "creation_date": 1495057548, "question_id": 44035268, "link": "https://stackoverflow.com/questions/44035268/python-regular-expression-character-following-match-does-not-equal", "title": "Python Regular Expression Character following match does not equal", "body": "<p>I am trying to match a string if it starts with '123' but only if the immediate following character is not a numeric. </p>\n\n<p>For example, these would match:</p>\n\n<ul>\n<li>'123' </li>\n<li>'123.4'</li>\n<li>'123A'</li>\n</ul>\n\n<p>But these would not match:</p>\n\n<ul>\n<li>'124' </li>\n<li>'1234'</li>\n<li>'1235.3'</li>\n</ul>\n\n<p>If I was only concerned with the string not ending with a numeric I could use:</p>\n\n<pre><code>'^123(?!.*\\d$)'\n</code></pre>\n\n<p>However, this is NOT what I am looking for. I am looking for whether the character immediately following my match string is not a numeric.</p>\n"}, {"tags": ["python", "multithreading", "asynchronous", "praw", "grequests"], "answers": [{"comments": [{"owner": {"reputation": 1386, "user_id": 3331268, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4a927e8e595309dc5ae94f1704e5a9b2?s=128&d=identicon&r=PG", "display_name": "ian-campbell", "link": "https://stackoverflow.com/users/3331268/ian-campbell"}, "edited": false, "score": 0, "creation_date": 1495058636, "post_id": 44035302, "comment_id": 75097668, "body": "Is there a way to pass an argument to the <code>run_hot_upvotes()</code> and <code>run_rising_upvotes()</code> functions when they are run? Like <code>run_hot_upvotes(subreddit)</code>"}, {"owner": {"reputation": 1386, "user_id": 3331268, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4a927e8e595309dc5ae94f1704e5a9b2?s=128&d=identicon&r=PG", "display_name": "ian-campbell", "link": "https://stackoverflow.com/users/3331268/ian-campbell"}, "edited": false, "score": 0, "creation_date": 1495059408, "post_id": 44035302, "comment_id": 75097937, "body": "I get a <code>NameError: global name &#39;subreddit&#39; is not defined</code>. Need to figure out how to pass it to each function."}, {"owner": {"reputation": 1386, "user_id": 3331268, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4a927e8e595309dc5ae94f1704e5a9b2?s=128&d=identicon&r=PG", "display_name": "ian-campbell", "link": "https://stackoverflow.com/users/3331268/ian-campbell"}, "edited": false, "score": 1, "creation_date": 1495059925, "post_id": 44035302, "comment_id": 75098109, "body": "I added an <code>args</code> and it worked. <code>Thread(target=run_hot_upvotes, args=(subreddit,)).start()</code>"}, {"owner": {"reputation": 5230, "user_id": 996056, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3ddabd219208d1fbc6f5b003144ca673?s=128&d=identicon&r=PG", "display_name": "David Gomes", "link": "https://stackoverflow.com/users/996056/david-gomes"}, "reply_to_user": {"reputation": 1386, "user_id": 3331268, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4a927e8e595309dc5ae94f1704e5a9b2?s=128&d=identicon&r=PG", "display_name": "ian-campbell", "link": "https://stackoverflow.com/users/3331268/ian-campbell"}, "edited": false, "score": 1, "creation_date": 1495060000, "post_id": 44035302, "comment_id": 75098130, "body": "Great, I also updated my answer to use a <code>functools.partial</code> instead of <code>args</code> which basically ends up in being the same thing."}], "tags": [], "owner": {"reputation": 5230, "user_id": 996056, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3ddabd219208d1fbc6f5b003144ca673?s=128&d=identicon&r=PG", "display_name": "David Gomes", "link": "https://stackoverflow.com/users/996056/david-gomes"}, "is_accepted": true, "score": 1, "last_activity_date": 1495059977, "last_edit_date": 1495059977, "creation_date": 1495057743, "answer_id": 44035302, "question_id": 44035248, "link": "https://stackoverflow.com/questions/44035248/how-can-i-execute-batches-of-requests-simultaneously-in-python/44035302#44035302", "title": "How can I execute batches of requests simultaneously in python?", "body": "<pre><code>from threading import Thread\nimport functools\n\nsubreddit = reddit.subreddit(\"bookclub\")\n\ndef run_hot_upvotes(subreddit):\n    hot_upvotes = (grequests.get(submission.upvote()) for submission in subreddit.hot(limit=27))\n    grequests.map(hot_upvotes)\n\ndef run_rising_upvotes(subreddit):\n    rising_upvotes = (grequests.get(submission.upvote()) for submission in subreddit.rising(limit=27))\n    grequests.map(rising_upvotes)\n\nThread(target = functools.partial(run_rising_upvotes, subreddit)).start()\nThread(target = functools.partial(run_hot_upvotes, subreddit)).start()\n</code></pre>\n\n<p>Try the following to have both run at the same time, each in its own thread.</p>\n"}], "owner": {"reputation": 1386, "user_id": 3331268, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4a927e8e595309dc5ae94f1704e5a9b2?s=128&d=identicon&r=PG", "display_name": "ian-campbell", "link": "https://stackoverflow.com/users/3331268/ian-campbell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 44035302, "answer_count": 1, "score": 1, "last_activity_date": 1495059977, "creation_date": 1495057456, "question_id": 44035248, "link": "https://stackoverflow.com/questions/44035248/how-can-i-execute-batches-of-requests-simultaneously-in-python", "title": "How can I execute batches of requests simultaneously in python?", "body": "<p>I'm using the Reddit api to upvote some subreddits. I'd like to upvote multiple subreddits simultaneously, using the <code>praw</code> library to interact with the reddit api.</p>\n\n<p>I want to upvote the 27 \"hot\" and \"rising\" posts of /r/bookclub:</p>\n\n<pre><code>subreddit = reddit.subreddit(\"bookclub\")\n\nfor submission in subreddit.hot(limit=27):\n    submission.upvote()\n\nfor submission in subreddit.rising(limit=27):\n    submission.upvote()\n</code></pre>\n\n<p>I'd like to use async or multiprocessing to do this faster. I used the <code>grequests</code> library to do all the <code>.upvote()</code> at once, and it's working so far, but I'm not sure if it's really better:</p>\n\n<pre><code>subreddit = reddit.subreddit(\"bookclub\")\n\nhot_upvotes = (grequests.get(submission.upvote()) for submission in subreddit.hot(limit=27))\ngrequests.map(hot_upvotes)\n\nrising_upvotes = (grequests.get(submission.upvote()) for submission in subreddit.rising(limit=27))\ngrequests.map(rising_upvotes)\n</code></pre>\n\n<p>Both versions upvote the subreddit. What I am wondering is if it is possible to run the <code>hot_upvotes</code> and <code>rising_upvotes</code> portions at the same time?</p>\n"}, {"tags": ["python", "date", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1496161646, "post_id": 44035534, "comment_id": 75542907, "body": "I thought you had deleted this.  Well no matter :-)"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1496166631, "post_id": 44035534, "comment_id": 75545535, "body": "@piRSquared, frankly speaking i don&#39;t remember... ;-)"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 1, "last_activity_date": 1495060733, "last_edit_date": 1495060733, "creation_date": 1495058817, "answer_id": 44035534, "question_id": 44035247, "link": "https://stackoverflow.com/questions/44035247/determining-if-there-is-a-gap-in-dates-using-pandas/44035534#44035534", "title": "Determining if there is a gap in dates using pandas", "body": "<p>IIUC you can do something like this:</p>\n\n<pre><code>In [198]: (b.sort_values('start_date')\n     ...:   .stack()\n     ...:   .shift().diff().dt.days\n     ...:   .reset_index(name='days')\n     ...:   .dropna()\n     ...:   .query(\"level_1 == 'end_date' and days != 0\"))\n     ...:\nOut[198]:\n   level_0   level_1   days\n5        4  end_date -365.0\n7        2  end_date -731.0\n</code></pre>\n\n<p>The following code should show us indices where gaps were found:</p>\n\n<pre><code>In [199]: (b.sort_values('start_date')\n     ...:   .stack()\n     ...:   .shift().diff().dt.days\n     ...:   .reset_index(name='days')\n     ...:   .dropna()\n     ...:   .query(\"level_1 == 'end_date' and days != 0\")\n     ...:   .loc[:, 'level_0'])\n     ...:\nOut[199]:\n5    4\n7    2\nName: level_0, dtype: int64\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1495059974, "creation_date": 1495059974, "answer_id": 44035722, "question_id": 44035247, "link": "https://stackoverflow.com/questions/44035247/determining-if-there-is-a-gap-in-dates-using-pandas/44035722#44035722", "title": "Determining if there is a gap in dates using pandas", "body": "<p>This is the idea...</p>\n\n<ul>\n<li>Assign a <code>+1</code> for start dates and a <code>-1</code> for end dates.</li>\n<li>Take a cumulative sum where I order by all dates as one flat array.</li>\n<li>When cumulative sum is zero... we hit a gap.</li>\n<li>Date values are the first priority, followed by being a start_date.  This way, we don't add a negative one before adding a positive one when the end_date of one row equals the start date of the next row.</li>\n<li>I use <code>numpy</code> to sort stuff and twist and turn</li>\n<li><code>return</code> a boolean mask of where the gaps start.</li>\n</ul>\n\n<hr>\n\n<pre><code>def find_gaps(b):\n    d1 = b.values.ravel()\n    d2 = np.tile([1, -1], len(d1) // 2)\n    s = np.lexsort([-d2, d1])\n    u = np.empty_like(s)\n    r = np.arange(d1.size)\n    u[s] = r\n    return d2[s].cumsum()[u][1::2] == 0\n</code></pre>\n\n<hr>\n\n<p><strong>demo</strong>  </p>\n\n<pre><code>find_gaps(b)\n\narray([False, False, False, False,  True], dtype=bool)\n</code></pre>\n\n<hr>\n\n<pre><code>find_gaps(a)\n\narray([False,  True,  True], dtype=bool)\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 5290047, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/52f02d97356c88712ae75748c78a3f88?s=128&d=identicon&r=PG&f=1", "display_name": "Fungie", "link": "https://stackoverflow.com/users/5290047/fungie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1495060733, "creation_date": 1495057452, "question_id": 44035247, "link": "https://stackoverflow.com/questions/44035247/determining-if-there-is-a-gap-in-dates-using-pandas", "title": "Determining if there is a gap in dates using pandas", "body": "<p>I have to determine if there are gaps between date sets (determined by start and end date). I have two example dataframes:</p>\n\n<pre><code>import pandas as pd\n\na = pd.DataFrame({'start_date' : ['01-01-2014', '01-01-2015', '05-01-2016'],\n             'end_date' : ['01-01-2015', '01-01-2016', '05-01-2017']})\n\norder = ['start_date', 'end_date']\n\na = a[order]\n\na.start_date = pd.to_datetime(a.start_date, dayfirst= True)\na.end_date = pd.to_datetime(a.end_date, dayfirst= True)\n\n\nb = pd.DataFrame({'start_date' : ['01-01-2014', '01-01-2015', '05-01-2016', \n'05-01-2017', '01-01-2015'],\n             'end_date' : ['01-01-2015', '01-01-2016', '05-01-2017',\n                          '05-01-2018', '05-01-2018']})\n\norder = ['start_date', 'end_date']\n\nb = b[order]\n\nb.start_date = pd.to_datetime(b.start_date, dayfirst= True)\nb.end_date = pd.to_datetime(b.end_date, dayfirst= True)\n\na\nb\n</code></pre>\n\n<p>For dataframe <code>a</code>, the solution is simple enough. Order by <code>start_date</code>, shift <code>end_date</code> down by one and subtract the dates, if the difference is positive, there is a gap in the dates.</p>\n\n<p>However, achieving this for dataframe <code>b</code> is less obvious as there is a range that emcompases a larger range. I am unsure on a generic way of doing this that won't incorrectly find a gap. This will be done on grouped data (about 40000 groups). </p>\n"}, {"tags": ["javascript", "python", "tree"], "comments": [{"owner": {"reputation": 12410, "user_id": 5217142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57daeb5f96b7a591e3447d41e59bbc94?s=128&d=identicon&r=PG&f=1", "display_name": "traktor", "link": "https://stackoverflow.com/users/5217142/traktor"}, "edited": false, "score": 0, "creation_date": 1495065745, "post_id": 44035245, "comment_id": 75099720, "body": "As a note, the common use case for front end tree searching is searching the DOM, often done using library or helper routines such as  <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector\" rel=\"nofollow noreferrer\"><code>document.querySelector</code></a>.  <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/createTreeWalker\" rel=\"nofollow noreferrer\"><code>document.createTreeWalker</code></a>, introduced in DOM2, provides an alternative to writing a DOM search from scratch."}], "answers": [{"tags": [], "owner": {"reputation": 1078, "user_id": 1985574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QYATo.jpg?s=128&g=1", "display_name": "Patrick Barr", "link": "https://stackoverflow.com/users/1985574/patrick-barr"}, "is_accepted": true, "score": 1, "last_activity_date": 1495058621, "last_edit_date": 1495058621, "creation_date": 1495057898, "answer_id": 44035337, "question_id": 44035245, "link": "https://stackoverflow.com/questions/44035245/binary-trees-implementation-in-the-back-end-or-front-end/44035337#44035337", "title": "Binary trees implementation in the back-end or front-end", "body": "<p>Probably not, I'm no expert, you would typically see more advanced trees like <a href=\"https://en.wikipedia.org/wiki/B-tree\" rel=\"nofollow noreferrer\">B-trees</a> in database and filesystem implementations. </p>\n\n<p>This is kind of an ambiguous question because there's always some odd problem out there that can really benefit from such, but you typically want to optimize the database to avoid implementing something like a tree yourself.</p>\n\n<p>Edit: By optimizing database to avoid trees, I am referring to things like design, query optimization, and limiting results. </p>\n\n<p>You want your front-end to be as responsive as possible so using trees would imply you have large amounts of data, which will inevitably slow down your UI. You're better off limiting the amount of data and paginating the results; to understand why think of the application through a user's eyes - if it doesn't feel like it's working... then it must be broken.</p>\n"}], "owner": {"reputation": 4669, "user_id": 3709060, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/MnFyD.jpg?s=128&g=1", "display_name": "edmamerto", "link": "https://stackoverflow.com/users/3709060/edmamerto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 44035337, "answer_count": 1, "score": 0, "last_activity_date": 1495058621, "creation_date": 1495057441, "question_id": 44035245, "link": "https://stackoverflow.com/questions/44035245/binary-trees-implementation-in-the-back-end-or-front-end", "title": "Binary trees implementation in the back-end or front-end", "body": "<p>I've learned about Binary trees and how it makes searching alot efficient. I know databases support Binary tree searching, and there are libraries you can utilize to make this type of search in languages like javascript and python. My question is, would there be a common case where you'd have to implement in the front-end or back-end a binary tree search (you setup a classes like tree and node)? Given example you have RESTful APIs that you can get or insert data, would your javascript or backend language need a Binary tree implementation?</p>\n"}, {"tags": ["python", "python-2.7", "openerp", "odoo-10"], "answers": [{"comments": [{"owner": {"reputation": 120, "user_id": 7952770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04ebe8fc0029b3418fb3d7bdeb574d7?s=128&d=identicon&r=PG&f=1", "display_name": "Yeray", "link": "https://stackoverflow.com/users/7952770/yeray"}, "edited": false, "score": 0, "creation_date": 1495092500, "post_id": 44040949, "comment_id": 75108500, "body": "Thanks for your response! Can u give me an example on how to log it? Im pretty new with odoo and python :( Thanks!! Or idea on how can I manipulate data before insert?"}, {"owner": {"reputation": 1142, "user_id": 3321823, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/WQwOD.jpg?s=128&g=1", "display_name": "DexJ", "link": "https://stackoverflow.com/users/3321823/dexj"}, "reply_to_user": {"reputation": 120, "user_id": 7952770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04ebe8fc0029b3418fb3d7bdeb574d7?s=128&d=identicon&r=PG&f=1", "display_name": "Yeray", "link": "https://stackoverflow.com/users/7952770/yeray"}, "edited": false, "score": 0, "creation_date": 1495101631, "post_id": 44040949, "comment_id": 75114677, "body": "you are running develop environment then in local server then you can check by simple python Print statement and that will be print along with logs on terminal/console where you started odoo server. AND To manipulate value you can use on_change or create/write methods (check out docs&gt; <a href=\"https://www.odoo.com/documentation/10.0/reference/orm.html\" rel=\"nofollow noreferrer\">odoo.com/documentation/10.0/reference/orm.html</a>)"}, {"owner": {"reputation": 120, "user_id": 7952770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04ebe8fc0029b3418fb3d7bdeb574d7?s=128&d=identicon&r=PG&f=1", "display_name": "Yeray", "link": "https://stackoverflow.com/users/7952770/yeray"}, "edited": false, "score": 0, "creation_date": 1495102704, "post_id": 44040949, "comment_id": 75115404, "body": "Thanks! Just added create/write methods and works well. But I&#39;ve a problem. On write, if I edit value of one field, it requires to change values of all fields which I declared on write override. Any way to fix it?"}, {"owner": {"reputation": 120, "user_id": 7952770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04ebe8fc0029b3418fb3d7bdeb574d7?s=128&d=identicon&r=PG&f=1", "display_name": "Yeray", "link": "https://stackoverflow.com/users/7952770/yeray"}, "edited": false, "score": 0, "creation_date": 1495103117, "post_id": 44040949, "comment_id": 75115658, "body": "Okay, I fix it checking if key exists in values on def write(self, values). Thanks your time."}], "tags": [], "owner": {"reputation": 1142, "user_id": 3321823, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/WQwOD.jpg?s=128&g=1", "display_name": "DexJ", "link": "https://stackoverflow.com/users/3321823/dexj"}, "is_accepted": true, "score": 0, "last_activity_date": 1495091460, "creation_date": 1495091460, "answer_id": 44040949, "question_id": 44035233, "link": "https://stackoverflow.com/questions/44035233/upper-field-on-constraint-odoo-10/44040949#44040949", "title": "Upper field on constraint Odoo 10", "body": "<h1>constrain must not be used to manipulate value.</h1>\n\n<blockquote>\n  <p>Each time you try to set value of \"field\" it will trigger constrain \n  itself and this will leads to \"RECURSION\"!!</p>\n  \n  <p>here you are always end up with raise ValidationError(\"Error\") because of recursion.</p>\n  \n  <p>==>here what happening is first when you are converting value of \"field\" from 'x' to 'X' and setting it again to field doing this calls constrain again with value 'X' and your condition becomes False and raises Error.</p>\n</blockquote>\n\n<p>put print statement in if &amp; else and check console you will get better idea!</p>\n"}, {"comments": [{"owner": {"reputation": 2061, "user_id": 6692092, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1rbzDRLhrk0/AAAAAAAAAAI/AAAAAAAACiA/ta8as2voMb0/photo.jpg?sz=128", "display_name": "Ignacio Ara", "link": "https://stackoverflow.com/users/6692092/ignacio-ara"}, "edited": false, "score": 0, "creation_date": 1524812936, "post_id": 50056742, "comment_id": 87130603, "body": "Please explain your lines of code so other users can understand its functionality. Thanks!"}], "tags": [], "owner": {"reputation": 1, "user_id": 9708788, "user_type": "registered", "profile_image": "https://graph.facebook.com/1474538055985890/picture?type=large", "display_name": "Kiran Babu", "link": "https://stackoverflow.com/users/9708788/kiran-babu"}, "is_accepted": false, "score": 0, "last_activity_date": 1524817065, "last_edit_date": 1524817065, "creation_date": 1524811445, "answer_id": 50056742, "question_id": 44035233, "link": "https://stackoverflow.com/questions/44035233/upper-field-on-constraint-odoo-10/50056742#50056742", "title": "Upper field on constraint Odoo 10", "body": "<p>Check if this helps you</p>\n\n<pre><code>    @api.constrains('name')\n    def _check_name(self):     \n        if self.name:\n            final_name=''\n            for letters in self.name:\n                if re.match(r'[a-zA-Z0-9\\- .]',letters):\n                    final_name += letters\n                else:\n                    not_accept_letters = letters\n                    raise ValidationError(_('The character that you entered has not accepted %s')% not_accept_letters) \n            if self.name.islower():\n                self.name = final_name.upper()\n</code></pre>\n"}], "owner": {"reputation": 120, "user_id": 7952770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f04ebe8fc0029b3418fb3d7bdeb574d7?s=128&d=identicon&r=PG&f=1", "display_name": "Yeray", "link": "https://stackoverflow.com/users/7952770/yeray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "accepted_answer_id": 44040949, "answer_count": 2, "score": 0, "last_activity_date": 1524817065, "creation_date": 1495057406, "question_id": 44035233, "link": "https://stackoverflow.com/questions/44035233/upper-field-on-constraint-odoo-10", "title": "Upper field on constraint Odoo 10", "body": "<p>I want to upper a field before insert a record on database in Odoo 10.</p>\n\n<p>I tried this and works well:</p>\n\n<pre><code>@api.one\n@api.constrains('field')\n    def to_upper(self):\n        if self.field == \"x\":\n            self.field = self.field.upper()\n</code></pre>\n\n<p>But if I add an else like</p>\n\n<pre><code>@api.one\n@api.constrains('field')\n    def to_upper(self):\n        if self.field == \"x\":\n            self.field = self.field.upper()\n        else:\n            raise ValidationError(\"Error\")\n</code></pre>\n\n<p>Always return else's ValidationError (while if statement being true, because without else works well)</p>\n\n<p>Anybody can help me? Thanks.</p>\n"}, {"tags": ["python", "scrapy", "web-crawler"], "answers": [{"comments": [{"owner": {"reputation": 1266, "user_id": 6213939, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/36c6caa9f3569dbeaa51029a5c739c0a?s=128&d=identicon&r=PG&f=1", "display_name": "Echchama Nayak", "link": "https://stackoverflow.com/users/6213939/echchama-nayak"}, "edited": false, "score": 0, "creation_date": 1495069187, "post_id": 44035662, "comment_id": 75100521, "body": "I want to know how to create a separate csv for each url. Also I want to skip iterations for any exception. But which file should I modify for this?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 1266, "user_id": 6213939, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/36c6caa9f3569dbeaa51029a5c739c0a?s=128&d=identicon&r=PG&f=1", "display_name": "Echchama Nayak", "link": "https://stackoverflow.com/users/6213939/echchama-nayak"}, "edited": false, "score": 0, "creation_date": 1495122379, "post_id": 44035662, "comment_id": 75129965, "body": "I&#39;ve tried to reproduce what you try to achieve, is it something like that?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 1266, "user_id": 6213939, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/36c6caa9f3569dbeaa51029a5c739c0a?s=128&d=identicon&r=PG&f=1", "display_name": "Echchama Nayak", "link": "https://stackoverflow.com/users/6213939/echchama-nayak"}, "edited": false, "score": 0, "creation_date": 1495131191, "post_id": 44035662, "comment_id": 75135084, "body": "Do you mean as <code>start_urls</code>?"}, {"owner": {"reputation": 1266, "user_id": 6213939, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/36c6caa9f3569dbeaa51029a5c739c0a?s=128&d=identicon&r=PG&f=1", "display_name": "Echchama Nayak", "link": "https://stackoverflow.com/users/6213939/echchama-nayak"}, "edited": false, "score": 0, "creation_date": 1495131659, "post_id": 44035662, "comment_id": 75135321, "body": "yes. the github version works perfectly. I can create separate csv files. Is there way to create an additional csv file with urls so that if there is a break the remaning will be stored. Naturally it must read it if the file is available"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 1266, "user_id": 6213939, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/36c6caa9f3569dbeaa51029a5c739c0a?s=128&d=identicon&r=PG&f=1", "display_name": "Echchama Nayak", "link": "https://stackoverflow.com/users/6213939/echchama-nayak"}, "edited": false, "score": 0, "creation_date": 1495132234, "post_id": 44035662, "comment_id": 75135654, "body": "I think you could use the <code>errback</code> callback and use a function to perform what you need when an error occurrs. You could see <a href=\"http://stackoverflow.com/a/24572269/5025116\">this</a> short answer as reference."}, {"owner": {"reputation": 1266, "user_id": 6213939, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/36c6caa9f3569dbeaa51029a5c739c0a?s=128&d=identicon&r=PG&f=1", "display_name": "Echchama Nayak", "link": "https://stackoverflow.com/users/6213939/echchama-nayak"}, "edited": false, "score": 0, "creation_date": 1495135695, "post_id": 44035662, "comment_id": 75137558, "body": "Thanks. Would this work on something like keyboard interrupt?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 1266, "user_id": 6213939, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/36c6caa9f3569dbeaa51029a5c739c0a?s=128&d=identicon&r=PG&f=1", "display_name": "Echchama Nayak", "link": "https://stackoverflow.com/users/6213939/echchama-nayak"}, "edited": false, "score": 0, "creation_date": 1495137177, "post_id": 44035662, "comment_id": 75138350, "body": "I think yes, you could make use of the <code>scrapy.signals</code>, specifically the <a href=\"https://doc.scrapy.org/en/latest/topics/signals.html#scrapy.signals.spider_closed\" rel=\"nofollow noreferrer\"><code>spider_closed</code></a>."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1495122319, "last_edit_date": 1495122319, "creation_date": 1495059509, "answer_id": 44035662, "question_id": 44035221, "link": "https://stackoverflow.com/questions/44035221/making-a-spider-restarable/44035662#44035662", "title": "Making a spider restarable", "body": "<p>You could store the current url in which has occurred such problem and then pass it in an <code>scrapy.Request</code> using the same <code>parse</code> function to continue.</p>\n\n<p>You can see if something has been printed in the website being visited using the <code>response.body</code>, is something bad has happened then <code>yield</code> a new <code>scrapy.Request</code> if isn't then continue as normal.</p>\n\n<p>Maybe:</p>\n\n<pre><code>def parse(self, response):\n    current_url = response.request.url\n    if 'Some or none message in the body' in response.body:\n        yield scrapy.Request(current_url, callback=self.parse)\n    else:\n        item = ContentsPageSFBItem()\n        content_items = response.xpath('//ol[@class=\"detail-toc\"]//a/text()').extract()\n\n        for content_item in content_items:\n            item['content_item'] = content_item\n            item['full_url']     = response.url\n            item['title']        = response.xpath('//title[1]/text()').extract()\n            yield item\n</code></pre>\n\n<p>Note that the way you use again the <code>parse</code> function depends heavily on which \"exception\" you want to catch.</p>\n\n<p>Keeping in mind you want to write the data to different files, depending on the url you're, then I've tweaked a little bit the code:</p>\n\n<p>For first creating three global variables to store the first and second url, and the fields as an array. Nnote this would be useful for those 2 urls but if they start growing that would be difficult:</p>\n\n<pre><code>global first_url, second_url, fields\nfields = []\nfirst_url = 'https://www.safaribooksonline.com/library/view/shell-programming-in/9780134496696/'\nsecond_url = 'https://www.safaribooksonline.com/library/view/cisa-certified-information/9780134677453/'\nstart_urls = [first_url, second_url]\n</code></pre>\n\n<p>Then within your <code>parse</code> function you get the data and store it in the <code>fields</code> array, which will be passed to a second function <code>parse_and_write_csv</code>, to create and write on every file depending on the current url.</p>\n\n<pre><code>def parse(self, response):\n    item = ContentsPageSFBItem()\n    content_items = response.xpath('//ol[@class=\"detail-toc\"]//a/text()').extract()\n    url = response.request.url\n\n    for content_item in content_items:\n\n        item['content_item'] = content_item\n        item['full_url'] = response.url\n        item['title'] = response.xpath('//title[1]/text()').extract()\n\n        fields = [item['content_item'].encode('utf-8'), item['full_url'], item['title'][0]]\n\n        self.parse_and_write_csv(response, fields)\n</code></pre>\n\n<p>The <code>parse_and_write_csv</code> get the fields and depending on the url it gets the 5th element from an array created from the url and creates a csv file or opens it if it already exists.</p>\n\n<pre><code>def parse_and_write_csv(self, response, fields):\n    with open(\"%s.csv\" % response.request.url.split('/')[5], 'a+') as file:\n        file.write(\"{}\\n\".format(';'.join(str(field) \n                                      for field in fields)))\n</code></pre>\n\n<p>Hope it helps. You can see a <a href=\"https://gist.github.com/vnhnhm/942218e1ed1aa084bb5ac8f757ce6fa6\" rel=\"nofollow noreferrer\">gist</a> here.</p>\n"}], "owner": {"reputation": 1266, "user_id": 6213939, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/36c6caa9f3569dbeaa51029a5c739c0a?s=128&d=identicon&r=PG&f=1", "display_name": "Echchama Nayak", "link": "https://stackoverflow.com/users/6213939/echchama-nayak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 44035662, "answer_count": 1, "score": 0, "last_activity_date": 1495122319, "creation_date": 1495057354, "question_id": 44035221, "link": "https://stackoverflow.com/questions/44035221/making-a-spider-restarable", "title": "Making a spider restarable", "body": "<p>My intention is to scrape a few urls using a spider such as follows:</p>\n\n<pre><code>import scrapy\nfrom ..items import ContentsPageSFBItem\n\nclass BasicSpider(scrapy.Spider):\n    name = \"contentspage_sfb\"\n    #allowed_domains = [\"web\"]\n    start_urls = [\n        'https://www.safaribooksonline.com/library/view/shell-programming-in/9780134496696/',\n        'https://www.safaribooksonline.com/library/view/cisa-certified-information/9780134677453/'\n    ]\n\n    def parse(self, response):\n            item = ContentsPageSFBItem()\n\n            #from scrapy.shell import inspect_response\n            #inspect_response(response, self)\n\n            content_items = response.xpath('//ol[@class=\"detail-toc\"]//a/text()').extract()\n\n            for content_item in content_items:\n\n                item['content_item'] = content_item\n                item[\"full_url\"] = response.url\n                item['title'] = response.xpath('//title[1]/text()').extract()\n\n                yield item\n</code></pre>\n\n<p>I intend to use more urls. My intention is to create a restartable spider incase something goes wrong. My plan is to add exceptions and create a csv with the list of remaining urls. Where exactly can I add this functionality?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 2, "creation_date": 1495057440, "post_id": 44035218, "comment_id": 75097216, "body": "Use <code>elif</code> instead of <code>if</code> for all but the first condition."}, {"owner": {"reputation": 5487, "user_id": 66575, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/8aacdcef22abe926a91fe7d62a38d69f?s=128&d=identicon&r=PG", "display_name": "bedwyr", "link": "https://stackoverflow.com/users/66575/bedwyr"}, "reply_to_user": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 1, "creation_date": 1495057525, "post_id": 44035218, "comment_id": 75097246, "body": "Try logically reasoning through the code.  What happens when you input 73?  It&#39;s less than 80, so it will go into the else statement.  Track through each and every step and you&#39;ll see why @tobias_k is correct."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8021721, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkfx30feWrU/AAAAAAAAAAI/AAAAAAAAAHY/llxjS7A_EvU/photo.jpg?sz=128", "display_name": "Oscar", "link": "https://stackoverflow.com/users/8021721/oscar"}, "edited": false, "score": 0, "creation_date": 1495058036, "post_id": 44035294, "comment_id": 75097444, "body": "Thanks i tried that and it now it works perfectly. Do you have any idea how  i can do this more efficiently? like a loop or something? I&#39;m not sure if that&#39;s right or if you can even use that but i&#39;m abit of a noob :/"}], "tags": [], "owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1495058642, "last_edit_date": 1495058642, "creation_date": 1495057684, "answer_id": 44035294, "question_id": 44035218, "link": "https://stackoverflow.com/questions/44035218/if-statement-how-to-loop-problems/44035294#44035294", "title": "if statement\\how to loop problems", "body": "<p>The problem is that all those conditions in the <code>else</code> part are tested independently.</p>\n\n<pre><code>if testscore&gt;= 80:\n    print(\"You got an A!!\")\nelse:\n    if testscore&gt;= 70:\n        print(\"You got an B!\")\n    if testscore&gt;= 60:\n        print(\"You got an C.\")\n    if ...\n</code></pre>\n\n<p>If <code>testscore</code> is <code>75</code>, then the first condition is true, so <code>print(\"You got an B!\")</code> is executed. It then tests the second condition, which is also true, so it executes <code>print(\"You got an C!\")</code>, and so on. For the first two conditions (A and B) you used <code>else: if ...</code>, which went in the right direction, but using <code>else: if</code> for all would result in a huge cascade of nested blocks. Instead, you can use <code>elif</code> for all but the first condition. This way, the next condition is only tested if the previous one evaluated to false:</p>\n\n<pre><code>if testscore&gt;= 80:\n    print(\"You got an A!!\")\nelif testscore&gt;= 70:\n    print(\"You got an B!\")\nelif testscore&gt;= 60:\n    print(\"You got an C.\")\nelif ...\n</code></pre>\n\n<p>And similar for the second block of <code>if</code> statements further down. (The comparison is reversed in that block, but actually I'd guess that those blocks should be the same; in this case, you should make that a function and call the function twice instead of replicating that code.)</p>\n\n<hr>\n\n<p>Alternatively, you could e.g. create a list of grades and scores and then find the <code>next</code> score that satisfies the condition in a single line:</p>\n\n<pre><code>&gt;&gt;&gt; grades = (('A', 80), ('B', 70), ('C', 60), ('D', 50), ('F', 0))\n&gt;&gt;&gt; score = 56\n&gt;&gt;&gt; next((g for g, n in grades if score &gt;= n))\n'D'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8021721, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkfx30feWrU/AAAAAAAAAAI/AAAAAAAAAHY/llxjS7A_EvU/photo.jpg?sz=128", "display_name": "Oscar", "link": "https://stackoverflow.com/users/8021721/oscar"}, "edited": false, "score": 0, "creation_date": 1495404779, "post_id": 44035444, "comment_id": 75224725, "body": "Thanks alot for helping me out"}], "tags": [], "owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "is_accepted": false, "score": 1, "last_activity_date": 1495058910, "last_edit_date": 1495058910, "creation_date": 1495058367, "answer_id": 44035444, "question_id": 44035218, "link": "https://stackoverflow.com/questions/44035218/if-statement-how-to-loop-problems/44035444#44035444", "title": "if statement\\how to loop problems", "body": "<p>If you want to reduce the code and make it more efficient you can use a <code>dictionary</code> to store the grades and use integer divison on the grade to get the key, as the following:</p>\n\n<pre><code>    grades = {7:'B', 6:'C', 5:'D', 4:'F', 3:'G'}               \n    testscore = int(input(\"What mark did you get?\"))\n    if testscore&gt;= 80:\n        print(\"You got an A!!\")\n    elif testscore &lt; 30:\n        print(\"There is nothing this low. Maybe you should have studied more? re-think your life please.\")\n    else:\n        print(\"You got an \" + grades[testscore // 10] + \"!\")\n</code></pre>\n\n<p>and if you want to <code>loop</code> you can use:</p>\n\n<pre><code>    loop = 'yes'\n    while loop == 'yes':\n        #code here\n        loop = raw_input('Do you want to get another test score?')\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8021721, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkfx30feWrU/AAAAAAAAAAI/AAAAAAAAAHY/llxjS7A_EvU/photo.jpg?sz=128", "display_name": "Oscar", "link": "https://stackoverflow.com/users/8021721/oscar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495058910, "creation_date": 1495057340, "question_id": 44035218, "link": "https://stackoverflow.com/questions/44035218/if-statement-how-to-loop-problems", "title": "if statement\\how to loop problems", "body": "<p>Okay so when i run this code and put in 50 for example it will list all the grades under that. How do i fix this? Also how can i make this more efficient? this is quite a lot of code for quite a simple task put i'm not sure how to achieve it. thanks for all replies.</p>\n\n<pre><code>print(\"-------WELCOME-------\")\ntestscore = int(input(\"What mark did you get?\"))\nif testscore&gt;= 80:\n    print(\"You got an A!!\")\nelse:\n    if testscore&gt;= 70:\n        print(\"You got an B!\")\n    if testscore&gt;= 60:\n        print(\"You got an C.\")\n    if testscore&gt;= 50:\n        print(\"You got an D.\")\n    if testscore&gt;= 40:\n        print(\"You got an F.\")\n    if testscore&gt;= 30:\n        print(\"You got a G. Wow.\")\n    if testscore&lt;= 20:\n        print(\"There is nothing this low. Maybe you should have studied more? re-think your life please.\")\n\nsecond = input(\"do you want to get another test score?\")\nif second == \"yes\":\n    testscore = int(input(\"What mark did you get?\"))\n\nif testscore&gt;= 80:\n    print(\"You got an A!!\")\nelse:\n    if testscore&lt;= 70:\n        print(\"You got an B!\")\n    if testscore&lt;= 60:\n        print(\"You got an C.\")\n    if testscore&lt;= 50:\n        print(\"You got an D.\")\n    if testscore&lt;= 40:\n        print(\"You got an F.\")\n    if testscore&lt;= 30:\n        print(\"You got a G. Wow.\")\n    if testscore&lt;= 20:\n        print(\"There is nothing this low. Maybe you should have studied more? re-think your life please.\")\nif second == \"no\":\n    print(\"Thanks for using MARK TO GRADE CONVERTER. See you soon!\")\n</code></pre>\n"}, {"tags": ["python", "audio", "signal-processing", "frame-rate", "pydub"], "comments": [{"owner": {"reputation": 66614, "user_id": 2908, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/30e3f436d5fb8e941126a0c2c2868f84?s=128&d=identicon&r=PG", "display_name": "Jiaaro", "link": "https://stackoverflow.com/users/2908/jiaaro"}, "edited": false, "score": 1, "creation_date": 1495078167, "post_id": 44035217, "comment_id": 75102548, "body": "Have you tried AudioSegment().set_frame_rate() ?"}, {"owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "reply_to_user": {"reputation": 66614, "user_id": 2908, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/30e3f436d5fb8e941126a0c2c2868f84?s=128&d=identicon&r=PG", "display_name": "Jiaaro", "link": "https://stackoverflow.com/users/2908/jiaaro"}, "edited": false, "score": 0, "creation_date": 1495146921, "post_id": 44035217, "comment_id": 75142599, "body": "Would you post that as an answer?"}], "answers": [{"tags": [], "owner": {"reputation": 66614, "user_id": 2908, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/30e3f436d5fb8e941126a0c2c2868f84?s=128&d=identicon&r=PG", "display_name": "Jiaaro", "link": "https://stackoverflow.com/users/2908/jiaaro"}, "is_accepted": true, "score": 14, "last_activity_date": 1495165111, "creation_date": 1495165111, "answer_id": 44061032, "question_id": 44035217, "link": "https://stackoverflow.com/questions/44035217/pydub-how-to-change-frame-rate-without-changing-playback-speed/44061032#44061032", "title": "Pydub - How to change frame rate without changing playback speed", "body": "<p>You can use:</p>\n\n<pre><code>sound = AudioSegment.from_file(\u2026)\nsound = sound.set_frame_rate(16000)\n</code></pre>\n"}], "owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7779, "favorite_count": 2, "accepted_answer_id": 44061032, "answer_count": 1, "score": 7, "last_activity_date": 1495165111, "creation_date": 1495057334, "question_id": 44035217, "link": "https://stackoverflow.com/questions/44035217/pydub-how-to-change-frame-rate-without-changing-playback-speed", "title": "Pydub - How to change frame rate without changing playback speed", "body": "<p>I have a couple audio files that I open in Pydub with <code>AudioSegment</code>.   </p>\n\n<p>I want to decrease the audio quality from frame rate 22050 to 16000 Hz. (One channel files)    </p>\n\n<p>If I simply change the frame rate of AudioSegment, what I get is the exact same wave played in slower speed. Well, fair enough. </p>\n\n<p>But how do I actually change the waves to fit a lower quality, same speed playback?</p>\n\n<p>(Manual interpolation is the only thing I can think of, but I don't want to get into that trouble)</p>\n"}, {"tags": ["python", "scapy", "pcap"], "answers": [{"tags": [], "owner": {"reputation": 3191, "user_id": 119215, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hOpgo.jpg?s=128&g=1", "display_name": "Jay Atkinson", "link": "https://stackoverflow.com/users/119215/jay-atkinson"}, "is_accepted": false, "score": 0, "last_activity_date": 1495058666, "creation_date": 1495058666, "answer_id": 44035496, "question_id": 44035198, "link": "https://stackoverflow.com/questions/44035198/unable-to-extract-fields-from-tcp-dump-pcap-file-using-scapy/44035496#44035496", "title": "Unable to extract fields from TCP dump pcap file using scapy", "body": "<p>Normally if you want to extract certain fields you can index the packet via the layer plus any member variables on the layer (fields).</p>\n\n<p>Example</p>\n\n<pre><code>from scapy.all import *\na=rdpcap(\"mycapture.pcap\")\nprint(a[0][IP].dst)\nprint(a[0][IP].src)\n</code></pre>\n\n<p>The above example assumes the first packet in the capture is an IP packet and will print out the destination and source IP addresses which are fields on that layer of the packet.   </p>\n"}], "owner": {"reputation": 1840, "user_id": 4619179, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-16inNBUDudM/AAAAAAAAAAI/AAAAAAAAAFY/QCrPyUVp4_Q/photo.jpg?sz=128", "display_name": "ojas", "link": "https://stackoverflow.com/users/4619179/ojas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 409, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495058666, "creation_date": 1495057256, "question_id": 44035198, "link": "https://stackoverflow.com/questions/44035198/unable-to-extract-fields-from-tcp-dump-pcap-file-using-scapy", "title": "Unable to extract fields from TCP dump pcap file using scapy", "body": "<p>I am using scapy 2.2.3 library with python. I can get the summary of pcap file using summary method but it is not in friendly format. I want to get the fields like sequence number. ack number etc. \nI was following <a href=\"http://www.secdev.org/projects/scapy/doc/usage.html#reading-pcap-files\" rel=\"nofollow noreferrer\">this</a> documentation. Can anyone point me to the right direction. i am stuck at this point.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "edited": false, "score": 0, "creation_date": 1495057312, "post_id": 44035174, "comment_id": 75097157, "body": "So you&#39;re looking to replace the <i>0</i> measurements in the <i>CaseX</i> columns with actual measurements? Is the situation given above (there is only 1 valid measurement, and three lines total) applicable to all of your data?"}, {"owner": {"reputation": 39, "user_id": 7520733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d090fc613d5b11c9361c4301eb4d3a5b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7520733/michael"}, "reply_to_user": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "edited": false, "score": 0, "creation_date": 1495057354, "post_id": 44035174, "comment_id": 75097175, "body": "That is correct! Sorry if the question wasn&#39;t clear."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 7520733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d090fc613d5b11c9361c4301eb4d3a5b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7520733/michael"}, "edited": false, "score": 0, "creation_date": 1495057600, "post_id": 44035229, "comment_id": 75097274, "body": "Unfortunately, that seems to remove my values for Case 2 and Case 3. Thank you though"}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "reply_to_user": {"reputation": 39, "user_id": 7520733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d090fc613d5b11c9361c4301eb4d3a5b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7520733/michael"}, "edited": false, "score": 0, "creation_date": 1495057840, "post_id": 44035229, "comment_id": 75097375, "body": "What do you mean <i>remove values for Case 2 and Case 3</i>? if you mean have the <i>nans</i>, you can use <code>fillna(0)</code>."}, {"owner": {"reputation": 39, "user_id": 7520733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d090fc613d5b11c9361c4301eb4d3a5b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7520733/michael"}, "edited": false, "score": 0, "creation_date": 1495057926, "post_id": 44035229, "comment_id": 75097413, "body": "so it removes the X column but I still end up losing my values for Case 2 and 3."}, {"owner": {"reputation": 39, "user_id": 7520733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d090fc613d5b11c9361c4301eb4d3a5b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7520733/michael"}, "edited": false, "score": 0, "creation_date": 1495058016, "post_id": 44035229, "comment_id": 75097442, "body": "So I lose my values for case 2  and case 3: .541698 and .482159, which is replaced with 0."}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "reply_to_user": {"reputation": 39, "user_id": 7520733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d090fc613d5b11c9361c4301eb4d3a5b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7520733/michael"}, "edited": false, "score": 0, "creation_date": 1495058209, "post_id": 44035229, "comment_id": 75097516, "body": "Not sure. This seems to work on the sample data for me."}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 0, "last_activity_date": 1495057644, "last_edit_date": 1495057644, "creation_date": 1495057380, "answer_id": 44035229, "question_id": 44035174, "link": "https://stackoverflow.com/questions/44035174/appending-and-removing-repeated-values-on-a-column-of-a-dataframe-pandas/44035229#44035229", "title": "Appending and Removing Repeated Values on a column of a Dataframe Pandas", "body": "<p>You could try the following, if all <em>Cases</em> columns contain only one non zero values for each <em>gene</em>, this should work (assume you don't have the <code>X</code> column which looks like an index):</p>\n\n<pre><code>df.set_index('Gene_Symbol').stack()[lambda x: x != 0].unstack(level=1).reset_index()\n\n#      Gene_Symbol     Case1       Case2       Case3\n#0  GAPDHS;TMEM147  0.532672    0.541698    0.482159\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>df\n#          X       Case1       Case2       Case3       Gene_Symbol\n#8026   8025    0.532672    0.000000    0.000000    GAPDHS;TMEM147\n#32531  32530   0.000000    0.541698    0.000000    GAPDHS;TMEM147\n#57051  57050   0.000000    0.000000    0.482159    GAPDHS;TMEM147\n\ndf.drop('X', 1, inplace=True)\n\ndf.set_index('Gene_Symbol').stack()[lambda x: x != 0].unstack(level=1).reset_index()\n\u200b\n#      Gene_Symbol     Case1       Case2       Case3\n#0  GAPDHS;TMEM147  0.532672    0.541698    0.482159\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 7520733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d090fc613d5b11c9361c4301eb4d3a5b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7520733/michael"}, "edited": false, "score": 0, "creation_date": 1495059892, "post_id": 44035641, "comment_id": 75098097, "body": "Hi is there anyway to make it so that rather then writing the Case 1 and Case 2 I can have it more in a loop ? I tried doing the following                 df4 = df4.groupby(&#39;Gene_Symbol&#39;)[&quot;Case &quot;+str(index)].sum().reset_index()     but I ended up only being left with case 3. Thanks!"}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "reply_to_user": {"reputation": 39, "user_id": 7520733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d090fc613d5b11c9361c4301eb4d3a5b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7520733/michael"}, "edited": false, "score": 0, "creation_date": 1495060125, "post_id": 44035641, "comment_id": 75098174, "body": "You can use df.groupby(&#39;Gene_Symbol&#39;).sum().reset_index() if you are not bothered about column X as this would end up adding values in X as well"}, {"owner": {"reputation": 39, "user_id": 7520733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d090fc613d5b11c9361c4301eb4d3a5b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7520733/michael"}, "edited": false, "score": 0, "creation_date": 1495060287, "post_id": 44035641, "comment_id": 75098222, "body": "Thank you so much ur a genius !!"}], "tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": true, "score": 0, "last_activity_date": 1495059351, "creation_date": 1495059351, "answer_id": 44035641, "question_id": 44035174, "link": "https://stackoverflow.com/questions/44035174/appending-and-removing-repeated-values-on-a-column-of-a-dataframe-pandas/44035641#44035641", "title": "Appending and Removing Repeated Values on a column of a Dataframe Pandas", "body": "<p>How about</p>\n\n<pre><code>df = df.groupby('Gene_Symbol')['Case1', 'Case2', 'Case3'].sum().reset_index()\n\n    Gene_Symbol     Case1       Case2       Case3\n0   GAPDHS;TMEM147  0.532672    0.541698    0.482159\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7520733, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d090fc613d5b11c9361c4301eb4d3a5b?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/7520733/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 44035641, "answer_count": 2, "score": 1, "last_activity_date": 1495059351, "creation_date": 1495057107, "last_edit_date": 1495057402, "question_id": 44035174, "link": "https://stackoverflow.com/questions/44035174/appending-and-removing-repeated-values-on-a-column-of-a-dataframe-pandas", "title": "Appending and Removing Repeated Values on a column of a Dataframe Pandas", "body": "<p>so I have a dataframe that I made via df4.append(df3,ignore_index= True) ; however, I am having some issues removing repeats in my column Gene_symbol while still keeping the values in case 1, 2 and 3. I have already tried df4.drop_duplicates([\"Gene_Symbol\"]) and various other methods, all of which tend to delete the other rows and with it my Data. </p>\n\n<p>What I am getting is this:</p>\n\n<pre><code>         X       Case1       Case2       Case3       Gene_Symbol \n8026    8025    0.5326718   0.0000000   0.0000000   GAPDHS;TMEM147\n32531   32530   0.0000000   0.5416982   0.0000000   GAPDHS;TMEM147\n57051   57050   0.0000000   0.0000000   0.4821592   GAPDHS;TMEM147\n</code></pre>\n\n<p>What I would like to have is a dataframe below where my actual values are kept</p>\n\n<pre><code>     Case1       Case2       Case3       Gene_Symbol \n    0.5326718   0.5416982   0.4821592   GAPDHS;TMEM147\n</code></pre>\n\n<p>Thank you for your time! </p>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 845, "user_id": 3541922, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6a9795995dd1baf51f24d1382007f134?s=128&d=identicon&r=PG&f=1", "display_name": "MikeVelazco", "link": "https://stackoverflow.com/users/3541922/mikevelazco"}, "edited": false, "score": 1, "creation_date": 1495056811, "post_id": 44035099, "comment_id": 75096924, "body": "As far as I remember the foreign key must be related to the Model, not to the Form."}, {"owner": {"reputation": 845, "user_id": 3541922, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6a9795995dd1baf51f24d1382007f134?s=128&d=identicon&r=PG&f=1", "display_name": "MikeVelazco", "link": "https://stackoverflow.com/users/3541922/mikevelazco"}, "edited": false, "score": 1, "creation_date": 1495057082, "post_id": 44035099, "comment_id": 75097054, "body": "I don&#39;t know how much experience do you have with django, but I suggest you to check <a href=\"http://ccbv.co.uk/\" rel=\"nofollow noreferrer\">class based views</a> and <a href=\"https://docs.djangoproject.com/en/1.11/topics/forms/modelforms/\" rel=\"nofollow noreferrer\">model forms</a>, they are very useful when you know how to use them."}], "answers": [{"tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 1, "last_activity_date": 1495057579, "creation_date": 1495057579, "answer_id": 44035274, "question_id": 44035099, "link": "https://stackoverflow.com/questions/44035099/django-model-valueerror-too-many-values-to-unpack/44035274#44035274", "title": "Django Model ValueError: too many values to unpack", "body": "<p>Use the app_label <code>forms</code> instead of <code>forms_builder.forms</code>.</p>\n\n<pre><code>Form = models.ForeignKey('forms.Form')\n</code></pre>\n"}], "owner": {"reputation": 407, "user_id": 6857994, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/LlYSv.jpg?s=128&g=1", "display_name": "S_alj", "link": "https://stackoverflow.com/users/6857994/s-alj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 44035274, "answer_count": 1, "score": 0, "last_activity_date": 1495057579, "creation_date": 1495056694, "last_edit_date": 1495540039, "question_id": 44035099, "link": "https://stackoverflow.com/questions/44035099/django-model-valueerror-too-many-values-to-unpack", "title": "Django Model ValueError: too many values to unpack", "body": "<p>I've been trying to solve a Django circular import problem in my project, using the idea presented in a bunch of answers here on SO, like <a href=\"https://stackoverflow.com/a/4379094/6857994\">this one</a> </p>\n\n<p>Instead of something like:</p>\n\n<pre><code>from forms_builder.forms.models import Form\n#...\nForm = models.ForeignKey(Form)\n</code></pre>\n\n<p>This is what I'm doing:</p>\n\n<pre><code>Form = models.ForeignKey('forms_builder.forms.Form')\n</code></pre>\n\n<p>The problem is that I'm getting this error:</p>\n\n<blockquote>\n  <p>ValueError: too many values to unpack</p>\n</blockquote>\n\n<p>I'm guessing the problem stems from the 2-value <strong>forms_builder.forms</strong>. In the examples I've seen people would only have a 'simple' App name with only one value. (forms_builder is <a href=\"https://github.com/stephenmcd/django-forms-builder\" rel=\"nofollow noreferrer\">this app</a> I'm using)</p>\n\n<p>How can I solve this error?</p>\n"}, {"tags": ["python", "django", "email", "google-oauth", "django-socialauth"], "comments": [{"owner": {"reputation": 3441, "user_id": 385822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5280f15cedf540b544eecc30fcf3027c?s=128&d=identicon&r=PG", "display_name": "omab", "link": "https://stackoverflow.com/users/385822/omab"}, "edited": false, "score": 1, "creation_date": 1495489085, "post_id": 44035052, "comment_id": 75264328, "body": "What happens if you define <code>SOCIAL_AUTH_GOOGLE_OAUTH2_AUTH_EXTRA_ARGUMENTS = { &#39;prompt&#39;: &#39;select_account&#39; }</code>?"}, {"owner": {"reputation": 1455, "user_id": 2646900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t3703.jpg?s=128&g=1", "display_name": "Filipe Spindola", "link": "https://stackoverflow.com/users/2646900/filipe-spindola"}, "reply_to_user": {"reputation": 3441, "user_id": 385822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5280f15cedf540b544eecc30fcf3027c?s=128&d=identicon&r=PG", "display_name": "omab", "link": "https://stackoverflow.com/users/385822/omab"}, "edited": false, "score": 0, "creation_date": 1495490955, "post_id": 44035052, "comment_id": 75264926, "body": "same error. what is strange is that when I look in my social-auth-partil table, it shows info like this:  {&quot;kwargs&quot;: {&quot;uid&quot;: &quot;myemail@gmail.com&quot;, &quot;details&quot;: {&quot;username&quot;: &quot;gmailusername, &quot;first_name&quot;: &quot;Name&quot;, &quot;fullname&quot;: &quot;My Full Name&quot;, &quot;last_name&quot;: &quot;Last Name&quot;, &quot;email&quot;: &quot;myemail@gmail.com&quot;}, &quot;social&quot;: null, &quot;user&quot;: null, &quot;username&quot;: &quot;username91a8483897684742&quot;, &quot;is_new&quot;: true, &quot;request&quot;: {&quot;hd&quot;: [&quot;companydomain.com&quot;]  in the end, on the &quot;request&quot; key there is an &quot;companydomain.com The company domain is correct, but the email returned is my personal gmail"}, {"owner": {"reputation": 8889, "user_id": 28037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/65c06b3f346fc6eea1fb5e57a3d7451e?s=128&d=identicon&r=PG", "display_name": "culix", "link": "https://stackoverflow.com/users/28037/culix"}, "reply_to_user": {"reputation": 3441, "user_id": 385822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5280f15cedf540b544eecc30fcf3027c?s=128&d=identicon&r=PG", "display_name": "omab", "link": "https://stackoverflow.com/users/385822/omab"}, "edited": false, "score": 0, "creation_date": 1575651893, "post_id": 44035052, "comment_id": 104650667, "body": "@omab Thank you! Setting <code>SOCIAL_AUTH_GOOGLE_OAUTH2_AUTH_EXTRA_ARGUMENTS</code> was the setting that fixed this for me. I can&#39;t find that setting documented anywhere - neither <a href=\"https://python-social-auth.readthedocs.io\" rel=\"nofollow noreferrer\">python-social-auth.readthedocs.io</a> nor <a href=\"https://github.com/python-social-auth\" rel=\"nofollow noreferrer\">github.com/python-social-auth</a> . Am I missing something? How did you know about it?"}], "owner": {"reputation": 1455, "user_id": 2646900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t3703.jpg?s=128&g=1", "display_name": "Filipe Spindola", "link": "https://stackoverflow.com/users/2646900/filipe-spindola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1611323058, "creation_date": 1495056447, "last_edit_date": 1495058119, "question_id": 44035052, "link": "https://stackoverflow.com/questions/44035052/django-social-auth-error-logging-in-with-two-email-accounts", "title": "Django social auth error logging in with two email accounts", "body": "<p>My application must be accessed through an account like <strong>user@mydomain.com</strong> (Google managed email account)</p>\n\n<p>First time I launch my application I can log in normally using that account.\nThe problem starts when I log out (django log out) and try to login with my Gmail account (This is not allowed because of my email verification pipeline)</p>\n\n<p>The first account is my <strong>user@mydomain.com</strong> and the second is my <strong>user@gmail.com</strong> account</p>\n\n<p><a href=\"https://i.stack.imgur.com/mtYlO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mtYlO.png\" alt=\"Email accounts\"></a></p>\n\n<p>I have a pipeline to verify if the user email belongs to my domain</p>\n\n<p>Clicking on the <strong>@gmail.com</strong> account return an error from my pipeline</p>\n\n<pre><code>@partial\ndef require_mydomain_email(strategy, details, user=None, is_new=False, *args, **kwargs):\n    if user and user.email:\n        if '@mydomain' in user.email:\n            return\n    elif is_new and not details.get('email'):\n        email = strategy.request_data().get('email')\n        if email:\n            details['email'] = email\n        else:\n            current_partial = kwargs.get('current_partial')\n            return strategy.redirect(\n                '/email?partial_token={0}'.format(current_partial.token)\n            )\n    else:\n        email = details.get('email')\n        if email:\n            if '@mydomain' in email:\n                return\n        else:\n            current_partial = kwargs.get('current_partial')\n            messages.add_message(strategy.request, messages.WARNING, 'Your email must be an @mydomain email')\n            return strategy.redirect('/'.format(current_partial.token))\n</code></pre>\n\n<p>The Main problem:</p>\n\n<p>After trying to log in with <strong>gmail.com</strong> account doesn't matter what account I'm trying to login after, my backend always receives the <strong>@gmail</strong> data from google.</p>\n\n<p>Here are my pipeline settings:</p>\n\n<pre><code>SOCIAL_AUTH_PIPELINE = (\n    'social_core.pipeline.social_auth.social_details',\n    'social_core.pipeline.social_auth.social_uid',\n    'social_core.pipeline.social_auth.auth_allowed',\n    'social_core.pipeline.social_auth.social_user',\n    'social_core.pipeline.user.get_username',\n    'social_core.pipeline.mail.mail_validation',\n    'accounts.google_authentication.pipeline.require_psafe_email',\n    'social_core.pipeline.user.create_user',\n    'social_core.pipeline.social_auth.associate_user',\n    'social_core.pipeline.debug.debug',\n    'social_core.pipeline.social_auth.load_extra_data',\n    'social_core.pipeline.user.user_details',\n    'social_core.pipeline.debug.debug'\n)\n</code></pre>\n\n<p>Any thoughts that may be helpful?</p>\n\n<p>Edit1:</p>\n\n<p>param details from my pipeline after run application (replaced personal data):</p>\n\n<pre><code>{'fullname': 'My Name', 'email': 'user@mydomain', 'first_name': 'Name', 'username': 'user.name', 'last_name': 'LastName'}\n</code></pre>\n\n<p>Then I log out,try to log in with my @gmail account (for testing porpuses):</p>\n\n<pre><code>{'fullname': 'My Full Name', 'email': 'myuser@gmail.com', 'first_name': 'MyName', 'username': 'username', 'last_name': 'Last Name'}\n</code></pre>\n\n<p>And even if I try to log in with <strong>user@mydomain.com</strong> again, I receive <strong>@gmail</strong> data</p>\n"}, {"tags": ["python", "google-bigquery", "google-cloud-dataflow", "apache-beam"], "comments": [{"owner": {"reputation": 7955, "user_id": 1255356, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LSG5g.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1255356/pablo"}, "edited": false, "score": 0, "creation_date": 1495065851, "post_id": 44034998, "comment_id": 75099754, "body": "Looking at the code, it seems like table partitions are actually supported. (<a href=\"https://github.com/apache/beam/blob/release-0.6.0/sdks/python/apache_beam/io/gcp/bigquery.py#L268\" rel=\"nofollow noreferrer\">github.com/apache/beam/blob/release-0.6.0/sdks/python/&hellip;</a>). Is your table properly partitioned? I&#39;m checking to see if DirectRunner supports the operation."}, {"owner": {"reputation": 12372, "user_id": 2877278, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jO6Hj.jpg?s=128&g=1", "display_name": "Graham Polley", "link": "https://stackoverflow.com/users/2877278/graham-polley"}, "edited": false, "score": 0, "creation_date": 1495096250, "post_id": 44034998, "comment_id": 75110846, "body": "Is your table actually partitioned?"}, {"owner": {"reputation": 256, "user_id": 2300939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc578382039a419217d0740ecc3810dc?s=128&d=identicon&r=PG", "display_name": "Jean-Christophe Rodrigue", "link": "https://stackoverflow.com/users/2300939/jean-christophe-rodrigue"}, "reply_to_user": {"reputation": 7955, "user_id": 1255356, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LSG5g.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1255356/pablo"}, "edited": false, "score": 0, "creation_date": 1495134992, "post_id": 44034998, "comment_id": 75137201, "body": "@pablo @Graham Polley: Yes the table is partitioned. When I <code>bq show</code> the table I get           &quot;timePartitioning&quot;: {                 &quot;type&quot;: &quot;DAY&quot;          }   Now after I execute my pipeline and load data without specifying the partition, then the partition information gets removed. It&#39;s as if the BigQuerySink removes the partitioning from the table."}], "answers": [{"tags": [], "owner": {"reputation": 256, "user_id": 2300939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc578382039a419217d0740ecc3810dc?s=128&d=identicon&r=PG", "display_name": "Jean-Christophe Rodrigue", "link": "https://stackoverflow.com/users/2300939/jean-christophe-rodrigue"}, "is_accepted": false, "score": 1, "last_activity_date": 1495146923, "creation_date": 1495146923, "answer_id": 44058824, "question_id": 44034998, "link": "https://stackoverflow.com/questions/44034998/does-apache-beam-python-sdk-0-6-0-bigquerysink-support-table-partitions/44058824#44058824", "title": "Does apache_beam Python SDK 0.6.0 BigQuerySink support table partitions?", "body": "<p>The apache_beam Python SDK does accept partition decorators for the BigQuerySink. Experimenting with the different write_disposition available reveals more information.</p>\n\n<ul>\n<li><p>WRITE_TRUNCATE will not write to table partitions. Using the $YYYYmmdd partition in the table name will result in this error. This differs from the Google Python SDK behaviour which will actually accept the partition decorator.</p>\n\n<pre><code>Table IDs must be alphanumeric (plus underscores) and \nmust be at most 1024 characters long. \n</code></pre></li>\n<li>WRITE_EMPTY will accept the partition decorator.</li>\n<li>WRITE_APPEND will accept the partition decorator.</li>\n</ul>\n"}], "owner": {"reputation": 256, "user_id": 2300939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc578382039a419217d0740ecc3810dc?s=128&d=identicon&r=PG", "display_name": "Jean-Christophe Rodrigue", "link": "https://stackoverflow.com/users/2300939/jean-christophe-rodrigue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495146923, "creation_date": 1495056146, "last_edit_date": 1495058112, "question_id": 44034998, "link": "https://stackoverflow.com/questions/44034998/does-apache-beam-python-sdk-0-6-0-bigquerysink-support-table-partitions", "title": "Does apache_beam Python SDK 0.6.0 BigQuerySink support table partitions?", "body": "<p>I have been prototyping a beam pipeline using their python SDK and have been able to use the BigQuerySink to output my final pcollection just fine using this:</p>\n\n<pre><code>     beam.io.Write(beam.io.BigQuerySink('dataset.table', \n                                self.get_schema(),\n       create_disposition=beam.io.BigQueryDisposition.CREATE_IF_NEEDED,                                               \n     write_disposition=beam.io.BigQueryDisposition.WRITE_TRUNCATE))\n</code></pre>\n\n<p>modifying the table to include a partition such as this: <code>dataset.table$20170517</code> triggers the following error when trying to run this pipeline with the DirectRunner</p>\n\n<hr>\n\n<p>\"code\": 400,\n  \"message\": \"Cannot read partition information from a table that is not partitioned:</p>\n\n<hr>\n\n<p>I have studied the examples found here but found no trace of partition use\n<a href=\"https://github.com/apache/beam/tree/master/sdks/python/apache_beam/examples\" rel=\"nofollow noreferrer\">https://github.com/apache/beam/tree/master/sdks/python/apache_beam/examples</a></p>\n\n<p>How can beam sink data into partitioned bigquery tables?</p>\n"}, {"tags": ["python", "pygame"], "answers": [{"tags": [], "owner": {"reputation": 2123, "user_id": 7904315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af1e59815b9d4466a8c1527486380128?s=128&d=identicon&r=PG&f=1", "display_name": "vencaslac", "link": "https://stackoverflow.com/users/7904315/vencaslac"}, "is_accepted": false, "score": 0, "last_activity_date": 1495060376, "last_edit_date": 1495060376, "creation_date": 1495060051, "answer_id": 44035726, "question_id": 44034981, "link": "https://stackoverflow.com/questions/44034981/how-to-make-scrolling-text-without-inhibiting-the-functionality-of-a-game-pyga/44035726#44035726", "title": "How to make scrolling text, without inhibiting the functionality of a game? Pygame", "body": "<p>the issue here is that the event handler can't run a new check until your for loop is done.</p>\n\n<p>the solution is to write an animation function for your text. you can do this by adding a variable which contains the text shown on screen, you can then change the value of this variable to another part of the complete text you want to have scroll based on some time dependent value.</p>\n\n<p>this time dependent value can be the time that has passed since the event that triggered the scrolling text.</p>\n\n<p>just to make it a bit more clear here's an example:</p>\n\n<p>say i want the complete text to be \"Alice has a big basket of fruit\" but i can only fit one word in my scrolling text box and i want to show it for two seconds:</p>\n\n<pre><code>text = \"Alice has a big basket of fruit\"\ndef animate_text(text,t): #here t is current unix time minus the unix time whenthat the event that triggered the text scrolling\n    text_batches=text.split(' ')\n    return text_batches[t//2] if t//2 &lt;= len(text_batches) else return False\n</code></pre>\n\n<p>so now we've split the text into batches instead of nesting a loop in your main loop you can blit the batch corresponding to the time that has passed since the animation started</p>\n\n<pre><code>while 1!=0:\n\n    # game loopy stuff here\n\n    blit(animate_text(text,time.time()-time_when_animation_started))\n</code></pre>\n\n<p>now that's all a little messy and pseudocodey and it doesn't perfectly handle your particular situation but you should get the idea here</p>\n"}], "owner": {"reputation": 15, "user_id": 6466533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/AwbTg.jpg?s=128&g=1", "display_name": "WhoGivesAFlux", "link": "https://stackoverflow.com/users/6466533/whogivesaflux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495060376, "creation_date": 1495056041, "last_edit_date": 1495056465, "question_id": 44034981, "link": "https://stackoverflow.com/questions/44034981/how-to-make-scrolling-text-without-inhibiting-the-functionality-of-a-game-pyga", "title": "How to make scrolling text, without inhibiting the functionality of a game? Pygame", "body": "<p>Below is a snippet from a game I am currently making for A-Level coursework. I am making an intro cutscene in which I wish to make text be revealed one letter at a time (scroll, pokemon style). However my current solution requires the use of a for loop per line of text. This is fine for visual effect however it prevents the user from being able to interact with the window. I would like to add a skip button but cannot do so sue to this problem. I tried using more if statements but the code became messy, buggy, and a lot less efficient. Is there an easier, more efficient fix?</p>\n\n<pre><code>screen.blit(introImage4,(0,16))\nif flags[\"IntroStage3\"] == True:\n    for i in range(len(introText[0])):\n        introTextImage1 = myFont.render(introText[0][i], True, white)\n        screen.blit(introTextImage1,(50 + (myFont.size(introText[0][:i])[0]), 50))\n        pygame.display.update()\n        clock.tick(textFPS)\n    for i in range(len(introText[1])):\n        introTextImage2 = myFont.render(introText[1][i], True, white)\n        screen.blit(introTextImage2,(50 + (myFont.size(introText[1][:i])[0]), 100))\n        pygame.display.update()\n        clock.tick(textFPS)\n    for i in range(len(introText[2])):\n        introTextImage3 = myFont.render(introText[2][i], True, white)\n        screen.blit(introTextImage3,(50 + (myFont.size(introText[2][:i])[0]), 150))\n        pygame.display.update()\n        clock.tick(textFPS)\n    flags[\"IntroStage4\"] = True\n    flags[\"IntroStage3\"] = False\n\nif flags[\"IntroStage4\"] == True:\n    introTextImage1 = myFont.render(introText[0], True, white)\n    introTextImage2 = myFont.render(introText[1], True, white)\n    introTextImage3 = myFont.render(introText[2], True, white)\n    screen.blit(introTextImage1,(50, 50))\n    screen.blit(introTextImage2,(50, 100))\n    screen.blit(introTextImage3,(50, 150))\n    flags[\"IntroStage5\"] = True\n</code></pre>\n"}, {"tags": ["python", "xml", "function", "iterator", "api-design"], "answers": [{"comments": [{"owner": {"reputation": 2992, "user_id": 3277133, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/887c8d5491e0f4976fd0b261644f89ba?s=128&d=identicon&r=PG&f=1", "display_name": "RustyShackleford", "link": "https://stackoverflow.com/users/3277133/rustyshackleford"}, "edited": false, "score": 0, "creation_date": 1495107314, "post_id": 44035647, "comment_id": 75118502, "body": "Thank you for the response @Parfait. When you mention root do you mean something like this? see edit please"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "reply_to_user": {"reputation": 2992, "user_id": 3277133, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/887c8d5491e0f4976fd0b261644f89ba?s=128&d=identicon&r=PG&f=1", "display_name": "RustyShackleford", "link": "https://stackoverflow.com/users/3277133/rustyshackleford"}, "edited": false, "score": 0, "creation_date": 1495109281, "post_id": 44035647, "comment_id": 75119895, "body": "Yes. Is that the true response? If so, you can parse that with <code>etree</code>. And then what was the previous output?"}, {"owner": {"reputation": 2992, "user_id": 3277133, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/887c8d5491e0f4976fd0b261644f89ba?s=128&d=identicon&r=PG&f=1", "display_name": "RustyShackleford", "link": "https://stackoverflow.com/users/3277133/rustyshackleford"}, "edited": false, "score": 0, "creation_date": 1495111618, "post_id": 44035647, "comment_id": 75121631, "body": "Yes that is the true response, what do you mean by previous output? I am trying to run your code but no matter what I do to remove white spaces I keep getting error &quot;ParseError: XML or text declaration not at start of entity: line 1, column 6&quot;   error is not on line one its in the second part of the code block after the function in your last example."}, {"owner": {"reputation": 2992, "user_id": 3277133, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/887c8d5491e0f4976fd0b261644f89ba?s=128&d=identicon&r=PG&f=1", "display_name": "RustyShackleford", "link": "https://stackoverflow.com/users/3277133/rustyshackleford"}, "edited": false, "score": 0, "creation_date": 1495114969, "post_id": 44035647, "comment_id": 75124195, "body": "I fixed the above issue by putting in the root elements into the code for &#39;#BUILD XML TREE OBJECT&#39;. After running your code how come when I print the &#39;dom&#39; element it turns into &#39;&lt;Element &#39;YM_Response&#39; at 0x11678dc10&gt;&#39;?"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "reply_to_user": {"reputation": 2992, "user_id": 3277133, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/887c8d5491e0f4976fd0b261644f89ba?s=128&d=identicon&r=PG&f=1", "display_name": "RustyShackleford", "link": "https://stackoverflow.com/users/3277133/rustyshackleford"}, "edited": false, "score": 0, "creation_date": 1495117352, "post_id": 44035647, "comment_id": 75126195, "body": "What I don&#39;t understand is the output after <i>The response looks like this(no child objects)for &#39;print(r.text)&#39;:</i>. My answer is predicated on this output. I would need to update solution to your update. Why did you post this list of <code>&lt;EventID&gt;</code> nodes?"}, {"owner": {"reputation": 2992, "user_id": 3277133, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/887c8d5491e0f4976fd0b261644f89ba?s=128&d=identicon&r=PG&f=1", "display_name": "RustyShackleford", "link": "https://stackoverflow.com/users/3277133/rustyshackleford"}, "edited": false, "score": 0, "creation_date": 1495118518, "post_id": 44035647, "comment_id": 75127100, "body": "I posted the list of &lt;EventID&gt; nodes because those are the IDs I want to be able to iterate through in another function to get the information about each of those IDs. And yes no child objects you are correct."}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "reply_to_user": {"reputation": 2992, "user_id": 3277133, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/887c8d5491e0f4976fd0b261644f89ba?s=128&d=identicon&r=PG&f=1", "display_name": "RustyShackleford", "link": "https://stackoverflow.com/users/3277133/rustyshackleford"}, "edited": false, "score": 1, "creation_date": 1495119331, "post_id": 44035647, "comment_id": 75127743, "body": "Got it. See edited answer. On your next question, always provide actual data and not snippets."}, {"owner": {"reputation": 2992, "user_id": 3277133, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/887c8d5491e0f4976fd0b261644f89ba?s=128&d=identicon&r=PG&f=1", "display_name": "RustyShackleford", "link": "https://stackoverflow.com/users/3277133/rustyshackleford"}, "edited": false, "score": 0, "creation_date": 1495123174, "post_id": 44035647, "comment_id": 75130493, "body": "Thank you so much it worked perfectly. I am using this example to study and will post more actual data next time! thank you for the advice."}], "tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": true, "score": 1, "last_activity_date": 1495119086, "last_edit_date": 1495119086, "creation_date": 1495059381, "answer_id": 44035647, "question_id": 44034976, "link": "https://stackoverflow.com/questions/44034976/how-to-iterate-through-xml-values-to-make-xml-api-call-with-iterative-values/44035647#44035647", "title": "How to iterate through XML values to make XML API call with iterative values?", "body": "<p>Consider interfacing Python's built-in <a href=\"https://docs.python.org/3.4/library/xml.etree.elementtree.html\" rel=\"nofollow noreferrer\">etree</a> to parse the <em>YM_Response</em> and extract the <em>EventID</em> text as seen in example:</p>\n\n<pre><code>import xml.etree.ElementTree as et\n\ntxt=\"\"\"\n&lt;YourMembership_Response&gt;\n    &lt;ErrCode&gt;0&lt;/ErrCode&gt;\n    &lt;ExtendedErrorInfo&gt;&lt;/ExtendedErrorInfo&gt;\n    &lt;Sa.Events.All.GetIDs&gt;\n        &lt;EventID&gt;98765&lt;/EventID&gt;\n    &lt;/Sa.Events.All.GetIDs&gt;\n&lt;/YourMembership_Response&gt;\n\"\"\"\n\ndom = et.fromstring(txt)\n\nfor i in dom.iterfind('.//EventID'):    \n    print(i.text)   \n# 98765\n</code></pre>\n\n<p>Altogether, iteratively call your method passing Event IDs as a parameter that is then string formatted to XML string. See curly brace inside XML string and then <code>.format</code> in the <code>requests</code> line:</p>\n\n<pre><code>import requests\nimport xml.etree.ElementTree as et\n\ndef xml_event_info(eventID):       \n    xml ='''        \n    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;YourMembership&gt;\n       &lt;Version&gt;2.25&lt;/Version&gt;\n       &lt;ApiKey&gt;xxx-xxx&lt;/ApiKey&gt;\n       &lt;CallID&gt;001&lt;/CallID&gt;\n       &lt;&gt;&lt;/&gt;\n       &lt;SaPasscode&gt;xxxx&lt;/SaPasscode&gt;\n       &lt;Call Method = \"Sa.Events.Event.Get\"&gt;\n           &lt;EventID&gt;{}&lt;/EventID&gt;\n       &lt;/Call&gt;\n    &lt;/YourMembership&gt;        \n    '''        \n    headers = {'Content-Type': 'application/x-www-form-urlencoded'}\n    r = requests.post('https://api.yourmembership.com', \n                      data=xml.format(eventID), headers=headers)        \n    print(r.text)      \n\n\nxml ='''    \n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;YourMembership&gt;\n   &lt;Version&gt;2.25&lt;/Version&gt;\n   &lt;ApiKey&gt;xxxxx&lt;/ApiKey&gt;\n   &lt;CallID&gt;008&lt;/CallID&gt;\n   &lt;&gt;&lt;/&gt;\n   &lt;SaPasscode&gt;xxxx&lt;/SaPasscode&gt;\n   &lt;Call Method = \"Sa.Events.All.GetIDs\"&gt;\n       &lt;StartDate&gt;2017/01/1&lt;/StartDate&gt;\n       &lt;EndDate&gt;2017/12/31&lt;/EndDate&gt;\n   &lt;/Call&gt;\n&lt;/YourMembership&gt;\n'''        \nheaders = {'Content-Type': 'application/x-www-form-urlencoded'}\nr = requests.post('https://api.yourmembership.com', data=xml, headers=headers)\n\n# BUILD XML TREE OBJECT    \ndom = et.fromstring(r.text)\n\n# PARSE EVENT ID TEXT AND PASS INTO FUNCTION\nfor i in dom.iterfind('.//EventID'):    \n    xml_event_info(i.text)   \n</code></pre>\n"}], "owner": {"reputation": 2992, "user_id": 3277133, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/887c8d5491e0f4976fd0b261644f89ba?s=128&d=identicon&r=PG&f=1", "display_name": "RustyShackleford", "link": "https://stackoverflow.com/users/3277133/rustyshackleford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 1, "accepted_answer_id": 44035647, "answer_count": 1, "score": 0, "last_activity_date": 1495119086, "creation_date": 1495056015, "last_edit_date": 1495111695, "question_id": 44034976, "link": "https://stackoverflow.com/questions/44034976/how-to-iterate-through-xml-values-to-make-xml-api-call-with-iterative-values", "title": "How to iterate through XML values to make XML API call with iterative values?", "body": "<p>I am working on a project to extract data via this API (<a href=\"http://www.yourmembership.com/company/api-reference/\" rel=\"nofollow noreferrer\">http://www.yourmembership.com/company/api-reference/</a>). The API requires that the calls be made via XML. I have successfully been able to make calls and retrieve data back via HTTP response object using the 'requests' library in python. </p>\n\n<p>My question is I want to develop a function that will iterate through IDs from one API call and plug them into another function which will make iterative API calls to get more data back about each ID.</p>\n\n<p>For example the script I have now gives me a dump of all event IDs: </p>\n\n<pre><code>import requests\n\nxml =\"\"\"\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;YourMembership&gt;\n   &lt;Version&gt;2.25&lt;/Version&gt;\n   &lt;ApiKey&gt;&lt;/ApiKey&gt;\n   &lt;CallID&gt;008&lt;/CallID&gt;\n   &lt;&gt;&lt;/&gt;\n   &lt;SaPasscode&gt;&lt;/SaPasscode&gt;\n   &lt;Call Method = \"Sa.Events.All.GetIDs\"&gt;\n       &lt;StartDate&gt;2017/01/1&lt;/StartDate&gt;\n       &lt;EndDate&gt;2017/12/31&lt;/EndDate&gt;\n   &lt;/Call&gt;\n&lt;/YourMembership&gt;\n\"\"\"\n\n\nheaders = {'Content-Type': 'application/x-www-form-urlencoded'}\nr = requests.post('https://api.yourmembership.com', data=xml,headers=headers)\nprint(r.text)\n</code></pre>\n\n<p>The response looks like this(no child objects)for 'print(r.text)':</p>\n\n<pre><code>&lt;EventID&gt;12345&lt;/EventID&gt;\n&lt;EventID&gt;67890&lt;/EventID&gt;\n&lt;EventID&gt;24680&lt;/EventID&gt;\n&lt;EventID&gt;13579&lt;/EventID&gt;\n&lt;EventID&gt;08642&lt;/EventID&gt;\n</code></pre>\n\n<p>How can I take these event_IDs and iterate through the response object and plug them into this function below(function is not complete, rough draft) and get info for each event_ID by making iterative XML API calls by somehow plugging values for the  field ?</p>\n\n<pre><code>import requests\ndef xml_event_info():\nxml =\"\"\"\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;YourMembership&gt;\n   &lt;Version&gt;2.25&lt;/Version&gt;\n   &lt;ApiKey&gt;xxx-xxx&lt;/ApiKey&gt;\n   &lt;CallID&gt;001&lt;/CallID&gt;\n   &lt;&gt;&lt;/&gt;\n   &lt;SaPasscode&gt;xxxx&lt;/SaPasscode&gt;\n   &lt;Call Method = \"Sa.Events.Event.Get\"&gt;\n       &lt;EventID&gt;12345&lt;/EventID&gt;\n   &lt;/Call&gt;\n&lt;/YourMembership&gt;\n\"\"\"\n\n\nheaders = {'Content-Type': 'application/x-www-form-urlencoded'}\nr = requests.post('https://api.yourmembership.com', data=xml,headers=headers)\nprint(r.text)\n</code></pre>\n\n<p>Thank you in advance, please let me know if my question does not make sense. </p>\n\n<p>EDIT:</p>\n\n<pre><code>&lt;YourMembership_Response&gt;\n&lt;ErrCode&gt;0&lt;/ErrCode&gt;\n&lt;ExtendedErrorInfo&gt;&lt;/ExtendedErrorInfo&gt;\n&lt;Sa.Events.All.GetIDs&gt;\n&lt;EventID&gt;98765&lt;/EventID&gt;\n&lt;/Sa.Events.All.GetIDs&gt;\n&lt;/YourMembership_Response&gt;\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 1461, "user_id": 1067530, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8b1cdadd1804a128dced3531b89efc1d?s=128&d=identicon&r=PG", "display_name": "Josh Holbrook", "link": "https://stackoverflow.com/users/1067530/josh-holbrook"}, "edited": false, "score": 0, "creation_date": 1495057696, "post_id": 44034975, "comment_id": 75097316, "body": "A dead end (?) I ran into:  I unzipped my package to see what was in it. It was missing mysparklib. Very strange! So I changed 2 things: 1) I started running the sdist command inside the ./src folder; and 2) I changed the packages parameter to be hard-coded to include mysparklib, rather than counting on find_packages() to do the right thing  Now when I unzip the tarball, it contains my package, but pyspark still fails!"}, {"owner": {"reputation": 1461, "user_id": 1067530, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8b1cdadd1804a128dced3531b89efc1d?s=128&d=identicon&r=PG", "display_name": "Josh Holbrook", "link": "https://stackoverflow.com/users/1067530/josh-holbrook"}, "edited": false, "score": 0, "creation_date": 1495057859, "post_id": 44034975, "comment_id": 75097386, "body": "(I&#39;ve confirmed that I can pip install the zipball and have that do the right thing.)"}], "answers": [{"tags": [], "owner": {"reputation": 1461, "user_id": 1067530, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8b1cdadd1804a128dced3531b89efc1d?s=128&d=identicon&r=PG", "display_name": "Josh Holbrook", "link": "https://stackoverflow.com/users/1067530/josh-holbrook"}, "is_accepted": false, "score": 2, "last_activity_date": 1495144080, "creation_date": 1495144080, "answer_id": 44058289, "question_id": 44034975, "link": "https://stackoverflow.com/questions/44034975/how-can-i-use-zips-with-py-files-on-pyspark/44058289#44058289", "title": "How can I use zips with --py-files on pyspark?", "body": "<p>So I got this working! The core problem is that the directory structure of a sdist is not the structure that python is expecting when a zip is added to the module path (which is how <code>--py-files</code> works; you can confirm this by printing <code>sys.path</code>). In particular, the sdist zip has the file <code>./mysparklib-0.1/mysparklib/__init__.py</code>, but we need a zip with the file <code>./mysparklib/__init__.py</code> instead.</p>\n\n<p>So instead of running</p>\n\n<pre><code>cd ./build &amp;&amp; python ../src/setup.py sdist --formats=zip\n</code></pre>\n\n<p>I'm now running</p>\n\n<pre><code>cd ./src &amp;&amp; zip ../dist/mysparklib.zip -r ./mysparklib\n</code></pre>\n\n<p>and that works.</p>\n"}], "owner": {"reputation": 1461, "user_id": 1067530, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8b1cdadd1804a128dced3531b89efc1d?s=128&d=identicon&r=PG", "display_name": "Josh Holbrook", "link": "https://stackoverflow.com/users/1067530/josh-holbrook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495144080, "creation_date": 1495055990, "question_id": 44034975, "link": "https://stackoverflow.com/questions/44034975/how-can-i-use-zips-with-py-files-on-pyspark", "title": "How can I use zips with --py-files on pyspark?", "body": "<p>I'm trying to write some pyspark jobs that depend on a module that I want to include with the job, rather than installing on the clusters globally.</p>\n\n<p>I decided to try doing this with zip files, but I can't seem to get it to work and I can't seem to find an example of doing this in the wild either.</p>\n\n<p>I'm building the zip by running:</p>\n\n<pre><code>mkdir -p ./build\ncd ./build &amp;&amp; python ../src/setup.py sdist --formats=zip\n</code></pre>\n\n<p>This creates a file called <code>./build/dist/mysparklib-0.1.zip</code>. So far, so good.</p>\n\n<p>My job looks like this:</p>\n\n<pre><code>from pyspark import SparkContext\n\n# See: http://spark.apache.org/docs/latest/quick-start.html\n\nreadme_filename = './README.md'\n\nsc = SparkContext('local', 'helloworld app')\n\nreadme_data = sc.textFile(readme_filename).cache()\n\ndef test_a_filter(s):\n    import mysparklib\n    return 'a' in s\n\na_s = readme_data.filter(test_a_filter).count()\nb_s = readme_data.filter(lambda s: 'b' in s).count()\n\nprint(\"\"\"\n**************************************\n* Lines with a: {}; Lines with b: {} *\n**************************************\n\"\"\".format(a_s, b_s))\n\nsc.stop()\n</code></pre>\n\n<p>(this is mostly adopted from the quickstart, with the exception of me trying to import my module inside one of the filters.)</p>\n\n<p>I'm kicking off the job by running:</p>\n\n<pre><code>spark-submit --master local[4] --py-files './build/dist/mysparklib-0.1.zip' ./jobs/helloworld.py\n</code></pre>\n\n<p>and while I see that the zip file <em>is</em> included:</p>\n\n<pre><code>17/05/17 17:15:31 INFO SparkContext: Added file file:/Users/myuser/dev/mycompany/myproject/./build/dist/mysparklib-0.1.zip at file:/Users/myuser/dev/mycompany/myproject/./build/dist/mysparklib-0.1.zip with timestamp 1495055731604\n</code></pre>\n\n<p>it won't import:</p>\n\n<pre><code>17/05/17 17:15:34 INFO DAGScheduler: ResultStage 0 (count at /Users/myuser/dev/mycompany/myproject/./jobs/helloworld.py:15) failed in 1.162 s due to Job aborted due to stage failure: Task 0 in stage 0.0 failed 1 times, most recent failure: Lost task 0.0 in stage 0.0 (TID 0, localhost, executor driver): org.apache.spark.api.python.PythonException: Traceback (most recent call last):\n  File \"/Users/myuser/dev/mycompany/myproject/spark/python/lib/pyspark.zip/pyspark/worker.py\", line 174, in main\n    process()\n  File \"/Users/myuser/dev/mycompany/myproject/spark/python/lib/pyspark.zip/pyspark/worker.py\", line 169, in process\n    serializer.dump_stream(func(split_index, iterator), outfile)\n  File \"/Users/myuser/dev/mycompany/myproject/spark/python/lib/pyspark.zip/pyspark/rdd.py\", line 2408, in pipeline_func\n  File \"/Users/myuser/dev/mycompany/myproject/spark/python/lib/pyspark.zip/pyspark/rdd.py\", line 2408, in pipeline_func\n  File \"/Users/myuser/dev/mycompany/myproject/spark/python/lib/pyspark.zip/pyspark/rdd.py\", line 2408, in pipeline_func\n  File \"/Users/myuser/dev/mycompany/myproject/spark/python/lib/pyspark.zip/pyspark/rdd.py\", line 345, in func\n  File \"/Users/myuser/dev/mycompany/myproject/spark/python/lib/pyspark.zip/pyspark/rdd.py\", line 1040, in &lt;lambda&gt;\n  File \"/Users/myuser/dev/mycompany/myproject/spark/python/lib/pyspark.zip/pyspark/rdd.py\", line 1040, in &lt;genexpr&gt;\n  File \"/Users/myuser/dev/mycompany/myproject/./jobs/helloworld.py\", line 12, in test_a_filter\n    import mysparklib\nModuleNotFoundError: No module named 'mysparklib'\n\n        at org.apache.spark.api.python.PythonRunner$$anon$1.read(PythonRDD.scala:193)\n        at org.apache.spark.api.python.PythonRunner$$anon$1.&lt;init&gt;(PythonRDD.scala:234)\n        at org.apache.spark.api.python.PythonRunner.compute(PythonRDD.scala:152)\n        at org.apache.spark.api.python.PythonRDD.compute(PythonRDD.scala:63)\n        at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:323)\n        at org.apache.spark.rdd.RDD.iterator(RDD.scala:287)\n        at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:87)\n        at org.apache.spark.scheduler.Task.run(Task.scala:99)\n        at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:322)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n\n<p>For a sanity check, I ran <code>python setup.py develop</code> inside mysparklib and tried importing it on the cli, and that works swimmingly.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1495056342, "post_id": 44034964, "comment_id": 75096719, "body": "perhaps <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.isclose.html\" rel=\"nofollow noreferrer\"><code>numpy.isclose</code></a> could help?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1495057379, "post_id": 44034964, "comment_id": 75097185, "body": "why would you select the first <code>30</code> then? the previous value is <code>900</code> so the difference is much more than 10%... Following your logic it should be only <code>[29, 31]</code>"}, {"owner": {"reputation": 121, "user_id": 6616205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-87pn787PNZo/AAAAAAAAAAI/AAAAAAAAU4U/p9PALj3H3LE/photo.jpg?sz=128", "display_name": "Casey Knauss", "link": "https://stackoverflow.com/users/6616205/casey-knauss"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1495057474, "post_id": 44034964, "comment_id": 75097230, "body": "@MaxU Sorry you are right in that case, I tried to just simplify the data.  What I am trying to do is keep track of series of near / like values so i can get a baseline reading of a condition in the data."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 6616205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-87pn787PNZo/AAAAAAAAAAI/AAAAAAAAU4U/p9PALj3H3LE/photo.jpg?sz=128", "display_name": "Casey Knauss", "link": "https://stackoverflow.com/users/6616205/casey-knauss"}, "edited": false, "score": 0, "creation_date": 1495056980, "post_id": 44035091, "comment_id": 75097007, "body": "Im not sure that works.  First it shouldn&#39;t pickup the 300 and preferably i would get a list of the values like i have in my original code.  However the code is interesting.  What does lt(10).diff() do ?"}, {"owner": {"reputation": 121, "user_id": 6616205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-87pn787PNZo/AAAAAAAAAAI/AAAAAAAAU4U/p9PALj3H3LE/photo.jpg?sz=128", "display_name": "Casey Knauss", "link": "https://stackoverflow.com/users/6616205/casey-knauss"}, "edited": false, "score": 0, "creation_date": 1495058712, "post_id": 44035091, "comment_id": 75097695, "body": "Almost there, see my latest edit for the extra code.  The idea is I am trying to isolate a varying condition that varies greatly between IDs and slightly for that ID.   So i track a list then average out of the list to determine my generic &quot;value&quot; for that particular ID in the dataset"}, {"owner": {"reputation": 121, "user_id": 6616205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-87pn787PNZo/AAAAAAAAAAI/AAAAAAAAU4U/p9PALj3H3LE/photo.jpg?sz=128", "display_name": "Casey Knauss", "link": "https://stackoverflow.com/users/6616205/casey-knauss"}, "edited": false, "score": 0, "creation_date": 1495060982, "post_id": 44035091, "comment_id": 75098425, "body": "Definitely a great head start, I will work with it and post back if i completely solve it."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 121, "user_id": 6616205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-87pn787PNZo/AAAAAAAAAAI/AAAAAAAAU4U/p9PALj3H3LE/photo.jpg?sz=128", "display_name": "Casey Knauss", "link": "https://stackoverflow.com/users/6616205/casey-knauss"}, "edited": false, "score": 0, "creation_date": 1495061304, "post_id": 44035091, "comment_id": 75098522, "body": "@CaseyKnauss, i don&#39;t really understand the issue - could you elaborate?"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 1, "last_activity_date": 1495061774, "last_edit_date": 1495061774, "creation_date": 1495056649, "answer_id": 44035091, "question_id": 44034964, "link": "https://stackoverflow.com/questions/44034964/pandas-track-consecutive-near-numbers-via-compare-cumsum-groupby-pattern/44035091#44035091", "title": "Pandas track consecutive near numbers via compare-cumsum-groupby pattern", "body": "<p><strong>UPDATE:</strong></p>\n\n<pre><code>In [116]: df2.groupby(df2.interval.pct_change().abs().gt(0.1).cumsum()) \\\n             .filter(lambda x: len(x) &gt;= 3)\nOut[116]:\n    id  interval\n2    2        30\n3    2        29\n4    2        31\n5    2        30\n6    2        29\n7    2        31\n15   3        40\n16   3        39\n17   2        41\n18   2        40\n19   2        39\n20   2        41\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 6616205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-87pn787PNZo/AAAAAAAAAAI/AAAAAAAAU4U/p9PALj3H3LE/photo.jpg?sz=128", "display_name": "Casey Knauss", "link": "https://stackoverflow.com/users/6616205/casey-knauss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 1, "accepted_answer_id": 44035091, "answer_count": 1, "score": 1, "last_activity_date": 1495061774, "creation_date": 1495055943, "last_edit_date": 1495060028, "question_id": 44034964, "link": "https://stackoverflow.com/questions/44034964/pandas-track-consecutive-near-numbers-via-compare-cumsum-groupby-pattern", "title": "Pandas track consecutive near numbers via compare-cumsum-groupby pattern", "body": "<p>I am trying to extend my current pattern to accommodate extra conditions of +- a percentage of the last value rather than strict does it match previous value.</p>\n\n<pre><code>data = np.array([[2,30],[2,900],[2,30],[2,30],[2,30],[2,1560],[2,30],\n[2,300],[2,30],[2,450]])\ndf = pd.DataFrame(data)\ndf.columns = ['id','interval']\n</code></pre>\n\n<p>UPDATE 2 (id fix): Updated Data 2 with more data:</p>\n\n<pre><code>data2 = np.array([[2,30],[2,900],[2,30],[2,29],[2,31],[2,30],[2,29],[2,31],[2,1560],[2,30],[2,300],[2,30],[2,450], [3,40],[3,900],[3,40],[3,39],[3,41], [3,40],[3,39],[3,41] ,[3,1560],[3,40],[3,300],[3,40],[3,450]])\ndf2 = pd.DataFrame(data2)\ndf2.columns = ['id','interval']\n\nfor i, g in df.groupby([(df.interval != df.interval.shift()).cumsum()]):\n   if len(g.interval.tolist())&gt;=3:\n        print(g.interval.tolist())\n</code></pre>\n\n<p><strong>results in <code>[30,30,30]</code></strong></p>\n\n<p>however I really want to catch near number conditions say when a number is <strong>+-10%</strong> of the previous number.</p>\n\n<p><strong>so looking at df2 I would like to pickup the series <code>[30,29,31]</code></strong></p>\n\n<pre><code>for i, g in df2.groupby([(df2.interval != &lt;???+- 10% magic ???&gt;).cumsum()]):\n   if len(g.interval.tolist())&gt;=3:\n        print(g.interval.tolist())\n</code></pre>\n\n<p>UPDATE:  Here is the end of line processing code where I store the gathered lists into a dictionary with the ID as the key</p>\n\n<pre><code>leak_intervals = {}\nfinal_leak_intervals = {}\nserials = []\nfor i, g in df.groupby([(df.interval != df.interval.shift()).cumsum()]):\n    if len(g.interval.tolist()) &gt;= 3:\n        print(g.interval.tolist())\n        serial = g.id.values[0]\n        if serial not in serials:\n            serials.append(serial)\n        if serial not in leak_intervals:\n            leak_intervals[serial] = g.interval.tolist()\n        else:\n            leak_intervals[serial] = leak_intervals[serial] + (g.interval.tolist())\n</code></pre>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 5230, "user_id": 996056, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3ddabd219208d1fbc6f5b003144ca673?s=128&d=identicon&r=PG", "display_name": "David Gomes", "link": "https://stackoverflow.com/users/996056/david-gomes"}, "edited": false, "score": 0, "creation_date": 1495055972, "post_id": 44034922, "comment_id": 75096562, "body": "Have you tried <code>&quot;{var}&quot;.format</code> as per <a href=\"http://sebastianraschka.com/Articles/2014_sqlite_in_python_tutorial.html\" rel=\"nofollow noreferrer\">sebastianraschka.com/Articles/&hellip;</a>?"}, {"owner": {"reputation": 2299, "user_id": 559807, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ar8Fx.jpg?s=128&g=1", "display_name": "marw", "link": "https://stackoverflow.com/users/559807/marw"}, "edited": false, "score": 0, "creation_date": 1495072040, "post_id": 44034922, "comment_id": 75101148, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/25387537/sqlite3-operationalerror-near-syntax-error\">sqlite3.OperationalError: near &quot;?&quot;: syntax error</a>"}], "answers": [{"tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": false, "score": 1, "last_activity_date": 1495058932, "last_edit_date": 1495058932, "creation_date": 1495056638, "answer_id": 44035086, "question_id": 44034922, "link": "https://stackoverflow.com/questions/44034922/python-sqlite3-sqlite3-operationalerror-near-syntax-error/44035086#44035086", "title": "Python - sqlite3 sqlite3.OperationalError: near \u201c%\u201d: syntax error?", "body": "<p>Keeping in mind the possibility of <a href=\"https://en.wikipedia.org/wiki/SQL_injection\" rel=\"nofollow noreferrer\">SQL-Injection Attack</a> and making sure to sanitise your inputs you can prepare your query like this:</p>\n\n<pre><code>if opts.fields:\n    fields = \", \".join([x.strip() for x in opts.fields.split(\",\")])\nelse:\n    fields = \", \".join(rows.next())\n\nqry = \"INSERT INTO %s (%s) VALUES (%s);\" % (table,\n                                            fields,\n                                            \",\".join(\"?\"*len(rows)),)\n</code></pre>\n\n<p>Please note that for the parameter substitution in SQLite you need to use <code>?</code>s.</p>\n\n<pre><code>cur.executemany(qry, (rows,))\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6432107, "user_type": "registered", "profile_image": "https://graph.facebook.com/1025955017490132/picture?type=large", "display_name": "Chuma Atunzu", "link": "https://stackoverflow.com/users/6432107/chuma-atunzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495058932, "creation_date": 1495055753, "question_id": 44034922, "link": "https://stackoverflow.com/questions/44034922/python-sqlite3-sqlite3-operationalerror-near-syntax-error", "title": "Python - sqlite3 sqlite3.OperationalError: near \u201c%\u201d: syntax error?", "body": "<p>First, before everything, I realize this question has been asked beforehand. I've looked for several hours trying to solve my problem, but I haven't been able to correctly implement a solution and I'm still running into the error. </p>\n\n<p>I'm trying to INSERT into a table(would like the table name to be dynamic, but I believe this is also not allowed?) using a variable string. From the studying I've done it seems that this is not allowed / good practice because it leaves the code open to SQL Injection.</p>\n\n<p>I've tried to replace %s with ? but it still returns the same error with \"?\" instead of \"%?\"</p>\n\n<p>Here is the code i'm using. Most of it is credited to James Mills, I'm just trying to use the statements he makes from a CSV for sqlite3 INSERT statements, if that makes sense.</p>\n\n<pre><code>\"\"\"csv2sql\n\nTool to convert CSV data files into SQL statements that\ncan be used to populate SQL tables. Each line of text in\nthe file is read, parsed and converted to SQL and output\nto stdout (which can be piped).\n\nA table to populate is given by the -t/--table option or\nby the basename of the input file (if not standard input).\n\nFields are either given by the -f/--fields option (comma\nseparated) or determinted from the first row of data.\n\"\"\"\n\n__version__ = \"0.4\"\n__author__ = \"James Mills\"\n__date__ = \"3rd February 2011\"\n\nimport os\nimport csv\nimport sys\nimport optparse\nimport sqlite3\n\nUSAGE = \"%prog [options] &lt;file&gt;\"\nVERSION = \"%prog v\" + __version__\n\ndef parse_options():\n    parser = optparse.OptionParser(usage=USAGE, version=VERSION)\n\n    parser.add_option(\"-t\", \"--table\",\n            action=\"store\", type=\"string\",\n            default=None, dest=\"table\",\n            help=\"Specify table name (defaults to filename)\")\n\n    parser.add_option(\"-f\", \"--fields\",\n            action=\"store\", type=\"string\",\n            default=None, dest=\"fields\",\n            help=\"Specify a list of fields (comma-separated)\")\n\n    parser.add_option(\"-s\", \"--skip\",\n            action=\"append\", type=\"int\",\n            default=[], dest=\"skip\",\n            help=\"Specify records to skip (multiple allowed)\")\n\n    opts, args = parser.parse_args()\n\n    if len(args) &lt; 1:\n        parser.print_help()\n        raise SystemExit, 1\n\n    return opts, args\n\ndef generate_rows(f):\n    sniffer = csv.Sniffer()\n    dialect = sniffer.sniff(f.readline())\n    f.seek(0)\n\n    reader = csv.reader(f, dialect)\n    for line in reader:\n        yield line\n\ndef main():\n    opts, args = parse_options()\n\n    filename = args[0]\n\n    if filename == \"-\":\n        if opts.table is None:\n            print \"ERROR: No table specified and stdin used.\"\n            raise SystemExit, 1\n        fd = sys.stdin\n        table = opts.table\n    else:\n        fd = open(filename, \"rU\")\n        if opts.table is None:\n            table = os.path.splitext(filename)[0]\n        else:\n            table = opts.table\n\n    rows = generate_rows(fd)\n\n    if opts.fields:\n        fields = \", \".join([x.strip() for x in opts.fields.split(\",\")])\n    else:\n        fields = \", \".join(rows.next())\n\n    for i, row in enumerate(rows):\n        if i in opts.skip:\n            continue\n\n        values = \", \".join([\"\\\"%s\\\"\" % x for x in row])\n        print \"INSERT INTO %s (%s) VALUES (%s);\" % (table, fields, values)\n\n        con = sqlite3.connect(\"school\")\n        cur = con.cursor()\n\n        cur.executemany(\"INSERT INTO %s (%s) VALUES (%s);\", (table, fields, values))\n        con.commit()\n        con.close()\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>Here is an example of the output:</p>\n\n<pre><code>&gt; INSERT INTO data (School Name, Summer 15, Summer 16, Summer 17) VALUES (\"School One\", \"126\", \"235\", \"453\");\nTraceback (most recent call last):\n  File \"sniffer.py\", line 103, in &lt;module&gt;\n    main()\n  File \"sniffer.py\", line 98, in main\n    cur.executemany(\"INSERT INTO %s (%s) VALUES (%s);\", (table, fields, values))\nsqlite3.OperationalError: near \"%\": syntax error\n</code></pre>\n\n<p>The sniffer stuff is the get the names of the columns and their values in which I try and put into the SQL statement.</p>\n\n<p>I've tried many things, but I haven't been able to wrap my head around a solution! </p>\n\n<p>Please don't bash me! I'm new to all of this and just need a little help!</p>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["python", "django", "nginx", "amazon-ec2", "web-deployment"], "comments": [{"owner": {"reputation": 2403, "user_id": 808236, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/1017506697/picture?type=large", "display_name": "iamkhush", "link": "https://stackoverflow.com/users/808236/iamkhush"}, "edited": false, "score": 0, "creation_date": 1495056518, "post_id": 44034879, "comment_id": 75096794, "body": "I am using $http in my configuration instead of $http_host and <a href=\"http://stackoverflow.com/a/15414811/808236\">stackoverflow.com/a/15414811/808236</a> says that $http_host might be empty as well. So try switching to $host and check."}, {"owner": {"reputation": 41, "user_id": 5352330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93251e47ad45e2831641fb4b52f84ce0?s=128&d=identicon&r=PG&f=1", "display_name": "grumpyshiba", "link": "https://stackoverflow.com/users/5352330/grumpyshiba"}, "reply_to_user": {"reputation": 2403, "user_id": 808236, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/1017506697/picture?type=large", "display_name": "iamkhush", "link": "https://stackoverflow.com/users/808236/iamkhush"}, "edited": false, "score": 0, "creation_date": 1495057703, "post_id": 44034879, "comment_id": 75097321, "body": "@iamkhush Doesn&#39;t seem to work"}], "answers": [{"tags": [], "owner": {"reputation": 1570, "user_id": 328384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82c2fb478ce9145d2da1f3ac856d0fe4?s=128&d=identicon&r=PG", "display_name": "harmv", "link": "https://stackoverflow.com/users/328384/harmv"}, "is_accepted": false, "score": 0, "last_activity_date": 1521118033, "creation_date": 1521118033, "answer_id": 49299868, "question_id": 44034879, "link": "https://stackoverflow.com/questions/44034879/django-nginx-getting-csrf-verification-error-in-production-over-http/49299868#49299868", "title": "django nginx getting csrf verification error in production over http", "body": "<p>When you're issuing posts from javascript, ensure that <code>settings.CSRF_COOKIE_HTTPONLY</code> is set to <code>False</code></p>\n\n<p>Snippet from [1]: \"Whether to use HttpOnly flag on the CSRF cookie. If this is set to True, \nclient-side JavaScript will not to be able to access the CSRF cookie.\"</p>\n\n<p>[1] <a href=\"https://docs.djangoproject.com/en/2.0/ref/settings/#csrf-cookie-httponly\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.0/ref/settings/#csrf-cookie-httponly</a></p>\n"}], "owner": {"reputation": 41, "user_id": 5352330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93251e47ad45e2831641fb4b52f84ce0?s=128&d=identicon&r=PG&f=1", "display_name": "grumpyshiba", "link": "https://stackoverflow.com/users/5352330/grumpyshiba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1148, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1521118033, "creation_date": 1495055617, "last_edit_date": 1495095275, "question_id": 44034879, "link": "https://stackoverflow.com/questions/44034879/django-nginx-getting-csrf-verification-error-in-production-over-http", "title": "django nginx getting csrf verification error in production over http", "body": "<p>I've just deployed my django project on AWS with nginx. Everything works well except for when when I try to make any POST requests (over just http), I get the error: </p>\n\n<blockquote>\n  <p>\"Forbidden (403)\n  CSRF verification failed. Request aborted.\"</p>\n</blockquote>\n\n<p>CSRF verification works if I run my server directly using Django which leads me to think that I did not set up my <code>nginx.conf</code> correctly.<br> \nCan someone give some guidance as to how I can configure nginx to work with csrf? <br>\nHere's my current config:</p>\n\n<pre><code>#nginx.conf\nupstream django {\n    # connect to this socket\n    server unix:///tmp/uwsgi.sock;    # for a file socket\n    #server 127.0.0.1:8001;      # for a web port socket\n    }\nserver {\n    # the port your site will be served on\n    listen 80;\n\n    root /opt/apps/site-env/site;\n\n    # the domain name it will serve for\n    server_name mysite.org\n\n    charset     utf-8;\n\n    #Max upload size\n    client_max_body_size 75M;   # adjust to taste\n\n    location /media  {\n            alias /opt/apps/site-env/site/media; \n    }\n\n    location /static {\n            alias /opt/apps/site-env/site/static;     \n    }\n\n    location / {\n    uwsgi_pass  django;\n\n    include     /etc/nginx/uwsgi_params; \n\n    proxy_pass_header X-CSRFToken;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header X-Forwarded-Proto http;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header HOST $http_host;\n    proxy_set_header X-NginX-Proxy true;\n\n\n    }\n\n}    \n</code></pre>\n\n<p>I've also turned off both <code>SESSION_COOKIE_SECURE</code> and <code>CSRF_COOKIE_SECURE</code> in my django settings.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pandas", "dataframe", "series"], "answers": [{"comments": [{"owner": {"reputation": 1529, "user_id": 7600334, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cbdcd16db25660265573fac86e88f885?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Ginsburg", "link": "https://stackoverflow.com/users/7600334/mark-ginsburg"}, "edited": false, "score": 0, "creation_date": 1495056792, "post_id": 44034996, "comment_id": 75096914, "body": "The answer I accepted doesn&#39;t even make a dataframe - works directly with the series &#39;g&#39; - so it&#39;s terser."}], "tags": [], "owner": {"reputation": 1529, "user_id": 7600334, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cbdcd16db25660265573fac86e88f885?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Ginsburg", "link": "https://stackoverflow.com/users/7600334/mark-ginsburg"}, "is_accepted": false, "score": 0, "last_activity_date": 1495056561, "last_edit_date": 1495056561, "creation_date": 1495056145, "answer_id": 44034996, "question_id": 44034827, "link": "https://stackoverflow.com/questions/44034827/converting-a-pandas-series-to-a-well-formed-dataframe/44034996#44034996", "title": "Converting a Pandas Series to a Well-Formed Dataframe", "body": "<p>I found the hint in a related question:</p>\n\n<pre><code>gdf.unstack(level=1) \ngdf  = gdf.add_suffix('_ratio').reset_index()  # KEY STEP\n\ngdf.columns   #  friendly columns now  \nIndex([u'ID', u'isconfirm', u'isconfirm_ratio'], dtype='object')\n\ngdf[gdf['isconfirm_ratio'] &gt; 0.999]   # e.g. a filter like this works now or a sort\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 1, "last_activity_date": 1495056419, "creation_date": 1495056419, "answer_id": 44035046, "question_id": 44034827, "link": "https://stackoverflow.com/questions/44034827/converting-a-pandas-series-to-a-well-formed-dataframe/44035046#44035046", "title": "Converting a Pandas Series to a Well-Formed Dataframe", "body": "<p>You can select all rows where <code>isconfirm</code> is 0 using <code>g.loc</code>:</p>\n\n<pre><code>In [90]: g.loc[:, 0]\nOut[90]: \nID\n0    0.827957\n1    0.911111\n2    0.944954\n3    0.884956\n4    0.931373\n5    0.869048\n6    0.941176\n7    0.884615\n8    0.901961\n9    0.930693\nName: isconfirm, dtype: float64\n</code></pre>\n\n<p>The <code>0</code> in <code>[:, 0]</code> refers to the value in the second level of the index. \nThus, you could find the <code>ID</code>s corresponding to the top 100 values using:</p>\n\n<pre><code>In [93]: g.loc[:, 0].sort_values(ascending=False).head(100)\nOut[93]: \nID\n2    0.944954\n6    0.941176\n4    0.931373\n9    0.930693\n1    0.911111\n8    0.901961\n3    0.884956\n7    0.884615\n5    0.869048\n0    0.827957\nName: isconfirm, dtype: float64\n\nIn [94]: g.loc[:, 0].sort_values(ascending=False).head(100).index\nOut[94]: Int64Index([2, 6, 4, 9, 1, 8, 3, 7, 5, 0], dtype='int64', name='ID')\n</code></pre>\n\n<hr>\n\n<p>To produce the result above, I defined <code>g</code> this way:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nnp.random.seed(2017)\n\nN = 1000\ndfchurn = pd.DataFrame({'ID':np.random.randint(10, size=N),\n                        'isconfirm': np.random.choice(2, p=[0.9, 0.1], size=N)})\ng = dfchurn.groupby('ID')['isconfirm'].value_counts().groupby(level=0).apply(lambda x: x / float(x.sum())) \n</code></pre>\n"}], "owner": {"reputation": 1529, "user_id": 7600334, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cbdcd16db25660265573fac86e88f885?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Ginsburg", "link": "https://stackoverflow.com/users/7600334/mark-ginsburg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 44035046, "answer_count": 2, "score": 0, "last_activity_date": 1495056561, "creation_date": 1495055396, "last_edit_date": 1495055902, "question_id": 44034827, "link": "https://stackoverflow.com/questions/44034827/converting-a-pandas-series-to-a-well-formed-dataframe", "title": "Converting a Pandas Series to a Well-Formed Dataframe", "body": "<p>I have a groupby object:</p>\n\n<pre><code>g = dfchurn.groupby('ID')['isconfirm'].value_counts().groupby(level=0).apply(lambda x: x / float(x.sum())) \ntype(g) \nOut[230]: pandas.core.series.Series\ng.head(5)\nOut[226]: \nID         isconfirm\n0000       0            0.985981\n           1            0.014019\n0064       0            0.996448\n           1            0.003552\n0080       0            0.997137   \n</code></pre>\n\n<p>My goal is to get the top 100 ID's sorted by ratio descending (the right-most column) where isconfirm=0.<br>\nTo do this, I thought about getting to a nice dataframe with well named columns so I can query the top ID's in terms of the ratio when isconfirm=0. </p>\n\n<p>I tried, e.g., </p>\n\n<pre><code>gdf = g.to_frame() \ngdf.unstack(level=1) \ngdf.head(5) \n\n           isconfirm          \nisconfirm         0         1\nID                    \n0000       0.985981  0.014019\n0064       0.996448  0.003552\n\ngdf.columns\nOut[227]: Index([u'isconfirm'], dtype='object')\n</code></pre>\n\n<p>That didn't lead anywhere.   There must a clean and terse way to do this.</p>\n"}, {"tags": ["python", "multithreading", "python-2.7", "scheduler"], "comments": [{"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1495055716, "post_id": 44034769, "comment_id": 75096434, "body": "Where is <code>job_func</code> defined?"}, {"owner": {"reputation": 423, "user_id": 2778718, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/645aceb465580af6a67438926ec2316e?s=128&d=identicon&r=PG&f=1", "display_name": "user93726", "link": "https://stackoverflow.com/users/2778718/user93726"}, "reply_to_user": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1495056667, "post_id": 44034769, "comment_id": 75096856, "body": "Sorry it couldnt be formatted properly - Its <b>phoneidLogger.getSplunkLogs</b> where phoneidLogger is an instance of a class ."}, {"owner": {"reputation": 423, "user_id": 2778718, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/645aceb465580af6a67438926ec2316e?s=128&d=identicon&r=PG&f=1", "display_name": "user93726", "link": "https://stackoverflow.com/users/2778718/user93726"}, "reply_to_user": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1495057402, "post_id": 44034769, "comment_id": 75097193, "body": "Here phoneidLogger is actually SomeClassInstance"}], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 2778718, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/645aceb465580af6a67438926ec2316e?s=128&d=identicon&r=PG&f=1", "display_name": "user93726", "link": "https://stackoverflow.com/users/2778718/user93726"}, "edited": false, "score": 0, "creation_date": 1495059813, "post_id": 44035557, "comment_id": 75098071, "body": "<b>schedule.every(10).minutes.do(splunkLogger.getSplunkLogs,pho&zwnj;&#8203;neidLogger,arg1,arg2&zwnj;&#8203;,arg3,arg4)</b> --- is exiting me from the thread. Its not executing."}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "reply_to_user": {"reputation": 423, "user_id": 2778718, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/645aceb465580af6a67438926ec2316e?s=128&d=identicon&r=PG&f=1", "display_name": "user93726", "link": "https://stackoverflow.com/users/2778718/user93726"}, "edited": false, "score": 0, "creation_date": 1495059886, "post_id": 44035557, "comment_id": 75098091, "body": "Then you need to give a lot more detail in your question. Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 423, "user_id": 2778718, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/645aceb465580af6a67438926ec2316e?s=128&d=identicon&r=PG&f=1", "display_name": "user93726", "link": "https://stackoverflow.com/users/2778718/user93726"}, "edited": false, "score": 0, "creation_date": 1495059917, "post_id": 44035557, "comment_id": 75098106, "body": "<b>splunkLogger</b> is a class and 88pho\u200c\u200bneidLogger is its instance and getSplunkLogs is the function."}, {"owner": {"reputation": 423, "user_id": 2778718, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/645aceb465580af6a67438926ec2316e?s=128&d=identicon&r=PG&f=1", "display_name": "user93726", "link": "https://stackoverflow.com/users/2778718/user93726"}, "edited": false, "score": 0, "creation_date": 1495060137, "post_id": 44035557, "comment_id": 75098176, "body": "<code>def run(self):     print &quot;Starting &quot; + self.name     SomeClassInstance = SomeClass()      schedule.every(10).minutes.do(splunkLogger.getSplunkLogs,pho&zwnj;&#8203;\u200c\u200b     neidLogger,arg1,arg2\u200c\u200b,arg3,arg4)     print &quot;Exiting &quot; + self.name</code>"}, {"owner": {"reputation": 423, "user_id": 2778718, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/645aceb465580af6a67438926ec2316e?s=128&d=identicon&r=PG&f=1", "display_name": "user93726", "link": "https://stackoverflow.com/users/2778718/user93726"}, "edited": false, "score": 0, "creation_date": 1495060277, "post_id": 44035557, "comment_id": 75098218, "body": "The above code doesn&#39;t execute the job. It seems like it ignores the schedule instruction."}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "reply_to_user": {"reputation": 423, "user_id": 2778718, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/645aceb465580af6a67438926ec2316e?s=128&d=identicon&r=PG&f=1", "display_name": "user93726", "link": "https://stackoverflow.com/users/2778718/user93726"}, "edited": false, "score": 0, "creation_date": 1495060359, "post_id": 44035557, "comment_id": 75098242, "body": "<b>Show</b> us. &quot;Seems like&quot; isn&#39;t good enough on SO. Until you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, I&#39;m voting to close the question."}, {"owner": {"reputation": 423, "user_id": 2778718, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/645aceb465580af6a67438926ec2316e?s=128&d=identicon&r=PG&f=1", "display_name": "user93726", "link": "https://stackoverflow.com/users/2778718/user93726"}, "edited": false, "score": 0, "creation_date": 1495060415, "post_id": 44035557, "comment_id": 75098255, "body": "Is there any other way to schedule a job in python2.7?"}], "tags": [], "owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1495058913, "creation_date": 1495058913, "answer_id": 44035557, "question_id": 44034769, "link": "https://stackoverflow.com/questions/44034769/scheduler-self-job-func-functools-partialjob-func-args-kwargs/44035557#44035557", "title": "Scheduler - self.job_func = functools.partial(job_func, *args, **kwargs)", "body": "<p>You need to pass a free function to your scheduler.</p>\n\n<p>Bear in mind that </p>\n\n<pre><code>phoneidLogger.getSplunkLogs(arg1, arg2, arg3)\n</code></pre>\n\n<p>is equivalent to </p>\n\n<pre><code>PhoneLoggerClass.getSplunkLogs(phoneidLogger, arg1, arg2, arg3)\n</code></pre>\n\n<p>Knowing this, the right thing to do is pass in <code>phoneidLogger</code> as an argument to our scheduler.</p>\n\n<pre><code>schedule.every(10).minutes.do(PhoneLoggerClass.getSplunkLogs,\n                              phoneidLogger,\n                              arg1, arg2, arg3, arg4)\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 2778718, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/645aceb465580af6a67438926ec2316e?s=128&d=identicon&r=PG&f=1", "display_name": "user93726", "link": "https://stackoverflow.com/users/2778718/user93726"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495067492, "creation_date": 1495055190, "last_edit_date": 1495067492, "question_id": 44034769, "link": "https://stackoverflow.com/questions/44034769/scheduler-self-job-func-functools-partialjob-func-args-kwargs", "title": "Scheduler - self.job_func = functools.partial(job_func, *args, **kwargs)", "body": "<p>I am using library scheduler for cron jobs in python. I want to send multiple arguments to the job to be scheduled. But I am getting follwing error:</p>\n\n<pre><code>File \"/Library/Python/2.7/site-packages/schedule/__init__.py\", line 352, in do\nself.job_func = functools.partial(job_func, *args, **kwargs)\nTypeError: the first argument must be callable\n</code></pre>\n\n<p>Below is my code. I am using multithreading and want to schedule my thread tasks: </p>\n\n<pre><code>class myThread (threading.Thread):\n    def __init__(self, threadID, name, counter):\n    threading.Thread.__init__(self)\n    self.threadID = threadID\n    self.name = name\n    self.counter = counter\n\ndef run(self):\n    print \"Starting \" + self.name\n    SomeClassInstance = SomeClass() \n</code></pre>\n\n<p>This didn't work:</p>\n\n<pre><code>schedule.every(10).minutes.do(phoneidLogger.getSplunkLogs(arg1,arg2,arg3,arg4))\n</code></pre>\n\n<p>Below also didn't help:</p>\n\n<pre><code>schedule.every(10).minutes.do(phoneidLogger.getSplunkLogs,arg1,arg2,arg3,arg4)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pygame"], "comments": [{"owner": {"reputation": 6167, "user_id": 7848065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-JkP5Ml62Rfo/AAAAAAAAAAI/AAAAAAAAABY/_BvmzYvsy74/photo.jpg?sz=128", "display_name": "whackamadoodle3000", "link": "https://stackoverflow.com/users/7848065/whackamadoodle3000"}, "edited": false, "score": 0, "creation_date": 1495068019, "post_id": 44034748, "comment_id": 75100290, "body": "Where are you running your code in?"}, {"owner": {"reputation": 67, "user_id": 6549678, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b37c4b486f05e7061157a79af28604ee?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Parker", "link": "https://stackoverflow.com/users/6549678/ben-parker"}, "reply_to_user": {"reputation": 6167, "user_id": 7848065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-JkP5Ml62Rfo/AAAAAAAAAAI/AAAAAAAAABY/_BvmzYvsy74/photo.jpg?sz=128", "display_name": "whackamadoodle3000", "link": "https://stackoverflow.com/users/7848065/whackamadoodle3000"}, "edited": false, "score": 0, "creation_date": 1495073033, "post_id": 44034748, "comment_id": 75101369, "body": "I&#39;m just running it in IDLE.  Will it make a difference?"}, {"owner": {"reputation": 67, "user_id": 6549678, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b37c4b486f05e7061157a79af28604ee?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Parker", "link": "https://stackoverflow.com/users/6549678/ben-parker"}, "reply_to_user": {"reputation": 6167, "user_id": 7848065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-JkP5Ml62Rfo/AAAAAAAAAAI/AAAAAAAAABY/_BvmzYvsy74/photo.jpg?sz=128", "display_name": "whackamadoodle3000", "link": "https://stackoverflow.com/users/7848065/whackamadoodle3000"}, "edited": false, "score": 0, "creation_date": 1495073403, "post_id": 44034748, "comment_id": 75101443, "body": "Would a certain compiler work better?  Or do I have to make it into an exe?"}], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 6549678, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b37c4b486f05e7061157a79af28604ee?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Parker", "link": "https://stackoverflow.com/users/6549678/ben-parker"}, "is_accepted": false, "score": 1, "last_activity_date": 1495205923, "creation_date": 1495205923, "answer_id": 44073263, "question_id": 44034748, "link": "https://stackoverflow.com/questions/44034748/continue-tracking-mouse-with-pygame-even-when-pygame-window-isnt-active/44073263#44073263", "title": "Continue tracking mouse with Pygame even when Pygame window isn&#39;t active", "body": "<p>Okay, so I figured it out.  I was going about it the wrong way.</p>\n\n<p><code>pygame.mouse.get_pos()</code>\nis what I was using, and that only tracks the position of the mouse <em>on the Pygame surface created</em>.  So if there's another window there, the mouse isn't actually on the Pygame surface.  I ended up installing the module \"win32api\" and using</p>\n\n<p><code>import win32api\nmouse = win32api.GetCursorPos()\nx1 = mouse[0]\ny1 = mouse[1]</code></p>\n\n<p>for the x and y coordinates of the mouse position <em>on the computer display</em>.  I realized afterward that there were questions answering what I needed to know, I just wasn't asking quite the right question.</p>\n"}], "owner": {"reputation": 67, "user_id": 6549678, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b37c4b486f05e7061157a79af28604ee?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Parker", "link": "https://stackoverflow.com/users/6549678/ben-parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1495205923, "creation_date": 1495055100, "question_id": 44034748, "link": "https://stackoverflow.com/questions/44034748/continue-tracking-mouse-with-pygame-even-when-pygame-window-isnt-active", "title": "Continue tracking mouse with Pygame even when Pygame window isn&#39;t active", "body": "<p>Okay, so I'm using Pygame, and I created a code that tracks the mouse on my Pygame display.  However, when I pull up another window over the Pygame one, it stops tracking the mouse position.  I was wondering, is there any way to continue tracking the mouse even when my Pygame window is not the active one?</p>\n"}, {"tags": ["python", "logging"], "comments": [{"owner": {"reputation": 371, "user_id": 3969021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/592e9ce6597c85094c0972bdaf631f10?s=128&d=identicon&r=PG&f=1", "display_name": "archeezee", "link": "https://stackoverflow.com/users/3969021/archeezee"}, "edited": false, "score": 0, "creation_date": 1495055403, "post_id": 44034737, "comment_id": 75096288, "body": "Makes sense. I would still want it to be logging immediately. I would just like to bunch up the logs for the email that is sent out on a failure as well."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1495055750, "post_id": 44034737, "comment_id": 75096457, "body": "This sounds like a job for an additional custom logging handler added to the logger."}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1495055847, "post_id": 44034737, "comment_id": 75096508, "body": "I&#39;d add a custom log handler with a circular buffer (using <code>deque</code>) that remembers the last several messages logged, and would extract and send these lines."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1495055963, "post_id": 44034737, "comment_id": 75096560, "body": "Why not just attach your existing log file to the email?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1495055993, "post_id": 44034737, "comment_id": 75096572, "body": "Also, Windows or Unix?"}, {"owner": {"reputation": 371, "user_id": 3969021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/592e9ce6597c85094c0972bdaf631f10?s=128&d=identicon&r=PG&f=1", "display_name": "archeezee", "link": "https://stackoverflow.com/users/3969021/archeezee"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1495057515, "post_id": 44034737, "comment_id": 75097243, "body": "@MadPhysicist Unix"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1495075150, "post_id": 44034737, "comment_id": 75101827, "body": "Then you should have no problems opening the file for reading."}], "answers": [{"comments": [{"owner": {"reputation": 371, "user_id": 3969021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/592e9ce6597c85094c0972bdaf631f10?s=128&d=identicon&r=PG&f=1", "display_name": "archeezee", "link": "https://stackoverflow.com/users/3969021/archeezee"}, "edited": false, "score": 0, "creation_date": 1495057663, "post_id": 44034914, "comment_id": 75097304, "body": "Thanks! I&#39;ve actually already created an extended class for the logger module. So I&#39;ll probably end up adding a bit of functionality to that."}], "tags": [], "owner": {"reputation": 671, "user_id": 8022336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VsZUw.png?s=128&g=1", "display_name": "pointerless", "link": "https://stackoverflow.com/users/8022336/pointerless"}, "is_accepted": false, "score": 1, "last_activity_date": 1495055726, "creation_date": 1495055726, "answer_id": 44034914, "question_id": 44034737, "link": "https://stackoverflow.com/questions/44034737/python-logging-dump-upon-failure/44034914#44034914", "title": "Python logging dump upon failure", "body": "<p>Try just a custom log class?\nSomething like:</p>\n\n<pre><code>import time\n\nclass Log:\n    msgs = []\n    def __init__(self):\n        pass\n\n    def addLog(self,msg):\n        self.msgs.append(\"LOG AT \"+str(time.time())+\":\\n\"+msg)\n\n    def dumpLog(self):\n        s = \"\"\n        for each in self.msgs:\n            s+= each+\"\\n------------------------\\n\"\n        return s\n</code></pre>\n\n<p>I'm not familiar with the logging module and it looks over complicated for most use cases.</p>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 3969021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/592e9ce6597c85094c0972bdaf631f10?s=128&d=identicon&r=PG&f=1", "display_name": "archeezee", "link": "https://stackoverflow.com/users/3969021/archeezee"}, "is_accepted": true, "score": 1, "last_activity_date": 1495227467, "last_edit_date": 1495227467, "creation_date": 1495060978, "answer_id": 44035862, "question_id": 44034737, "link": "https://stackoverflow.com/questions/44034737/python-logging-dump-upon-failure/44035862#44035862", "title": "Python logging dump upon failure", "body": "<p>I ended up using riscnotcisc's suggestion but I extended the logging.Logger class</p>\n\n<pre><code>from logging import Logger\nimport logging\nimport datetime\n\nclass CustomLogger(Logger):\n    def __init__(self, process_name):\n        self.process_name = process_name\n        super(CustomLogger, self).__init__(process_name)\n        self.log_list = []\n\n        ch = logging.StreamHandler()\n        ch.setFormatter(logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s'))\n        self.handlers.append(ch)\n\n    def info(self, message, *args, **kwargs):\n        self.log_list.append('{} - {} - INFO - {}'.format(datetime.datetime.now(), self.process_name, message))\n        super(CustomLogger, self).info(message, *args, **kwargs)\n\n    def debug(self, message, *args, **kwargs):\n        self.log_list.append('{} - {} - DEBUG - {}'.format(datetime.datetime.now(), self.process_name, message))\n        super(CustomLogger, self).debug(message, *args, **kwargs)\n\n    def warning(self, message, *args, **kwargs):\n        self.log_list.append('{} - {} - WARNING - {}'.format(datetime.datetime.now(), self.process_name, message))\n        super(CustomLogger, self).warning(message, *args, **kwargs)\n\n    def dump(self):\n        return '\\n'.join(self.log_list)\n\n    def reset(self):\n        self.log_list = []\n</code></pre>\n"}], "owner": {"reputation": 371, "user_id": 3969021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/592e9ce6597c85094c0972bdaf631f10?s=128&d=identicon&r=PG&f=1", "display_name": "archeezee", "link": "https://stackoverflow.com/users/3969021/archeezee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 1, "accepted_answer_id": 44035862, "answer_count": 2, "score": 0, "last_activity_date": 1495227467, "creation_date": 1495055047, "last_edit_date": 1495055826, "question_id": 44034737, "link": "https://stackoverflow.com/questions/44034737/python-logging-dump-upon-failure", "title": "Python logging dump upon failure", "body": "<p>I'm using Python to write a service that reads from a message queue. For each message, it runs a process and upon completion will grab another message from the queue. I am using the logging package to log info, warnings, and errors. If the process fails for whatever reason, the process will catch the error and send out an email with the traceback. I would like for the email to also contain the logs from when the application began processing the message. To be clear - I would still like the application to log immediately. But, if the application fails and successfully catches the exception, I would like it to send the logs in the email as well.</p>\n\n<p>My first thought was to use a list that would just save log strings like so:</p>\n\n<pre><code>while True:\n  # Grab the message here\n  log_list = []\n  try:\n    log_msg = \"Some log message here\"\n    log_list.append(log_msg)\n    ...\n  except:\n    # send email here using log_list\n</code></pre>\n\n<p>This would kind of solve my problem except I would like to see the other info that the python logging package adds to log messages like a timestamp. I realize I could go about just manually putting this in and adding it to my log_list object. What I would like to do is:</p>\n\n<pre><code>import logging\nlogger = logging.getLogger()\nwhile True:\n  logger.reset()\n  # Grab the message here\n  try:\n    logger.info(\"Some log message here\")\n    ...\n  except:\n    # send email here using something like logger.dump()\n</code></pre>\n\n<p>So... my question - Is there a another way to go about this in which I can avoid using a list to save my logs and save other logging info such as the timestamp, logging level, etc?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 4, "last_activity_date": 1495054662, "creation_date": 1495054662, "answer_id": 44034662, "question_id": 44034627, "link": "https://stackoverflow.com/questions/44034627/pandas-groupby-cumulative-count/44034662#44034662", "title": "Pandas groupby cumulative count", "body": "<p>You can use <code>groupby.cumcount</code>:</p>\n\n<pre><code>df['cumcount'] = df.groupby(['id', 'name']).cumcount() + 1\n\ndf\n#  id   name    cumcount\n#0  1   name1   1\n#1  1   name1   2\n#2  1   name2   1\n#3  2   name3   1\n#4  2   name3   2\n#5  2   name3   3\n</code></pre>\n"}], "owner": {"reputation": 2285, "user_id": 1761521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3bf9cdee52067928d3f9aa20b18a27b6?s=128&d=identicon&r=PG", "display_name": "spitfiredd", "link": "https://stackoverflow.com/users/1761521/spitfiredd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 44034662, "answer_count": 1, "score": 2, "last_activity_date": 1566244595, "creation_date": 1495054502, "last_edit_date": 1566244595, "question_id": 44034627, "link": "https://stackoverflow.com/questions/44034627/pandas-groupby-cumulative-count", "title": "Pandas groupby cumulative count", "body": "<p>How do I do a cumcount on two groupings, id and name?  For example I have: </p>\n\n<pre><code>id  name\n1   name1\n1   name1\n1   name2\n2   name3\n2   name3\n2   name3\n</code></pre>\n\n<p>And I would like it to look like:</p>\n\n<pre><code>id  name   cumcount\n1   name1  1 \n1   name1  2\n1   name2  1\n2   name3  1\n2   name3  2\n2   name3  3\n</code></pre>\n\n<p>Basically a running tally for each name in an id.</p>\n"}, {"tags": ["python", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 1, "creation_date": 1495054974, "post_id": 44034624, "comment_id": 75096093, "body": "You need to format your code in correct way, before that it&#39;s bunch of unformatted text that hard to navigate in."}, {"owner": {"reputation": 2112, "user_id": 8023022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c3315b021ac1d71e530939df988841d?s=128&d=identicon&r=PG&f=1", "display_name": "orabis", "link": "https://stackoverflow.com/users/8023022/orabis"}, "edited": false, "score": 0, "creation_date": 1495055553, "post_id": 44034624, "comment_id": 75096364, "body": "The code needs to be formatted. What is your Keras version?   The latest Keras version did many changes.  Check the following link: <a href=\"https://github.com/fchollet/keras/wiki/Keras-2.0-release-notes\" rel=\"nofollow noreferrer\">github.com/fchollet/keras/wiki/Keras-2.0-release-notes</a>"}, {"owner": {"reputation": 1, "user_id": 8027725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aafaf3302a0ee755c66e39a8f015739?s=128&d=identicon&r=PG&f=1", "display_name": "nishat anjum", "link": "https://stackoverflow.com/users/8027725/nishat-anjum"}, "edited": false, "score": 0, "creation_date": 1495055695, "post_id": 44034624, "comment_id": 75096423, "body": "sorry for the inconvenient. I formatted the code. Thanks"}, {"owner": {"reputation": 1, "user_id": 8027725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aafaf3302a0ee755c66e39a8f015739?s=128&d=identicon&r=PG&f=1", "display_name": "nishat anjum", "link": "https://stackoverflow.com/users/8027725/nishat-anjum"}, "edited": false, "score": 0, "creation_date": 1495056295, "post_id": 44034624, "comment_id": 75096705, "body": "I don&#39;t think it&#39;s for the latest version. I am getting attribute error. It says no attribute."}], "answers": [{"tags": [], "owner": {"reputation": 2112, "user_id": 8023022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c3315b021ac1d71e530939df988841d?s=128&d=identicon&r=PG&f=1", "display_name": "orabis", "link": "https://stackoverflow.com/users/8023022/orabis"}, "is_accepted": false, "score": 0, "last_activity_date": 1495057070, "creation_date": 1495057070, "answer_id": 44035167, "question_id": 44034624, "link": "https://stackoverflow.com/questions/44034624/having-error-on-model-fit-generator/44035167#44035167", "title": "having error on model.fit_generator()", "body": "<p>Two points:</p>\n\n<p>1- train_generator and validation_generator do not have a 'shape' attribute</p>\n\n<pre><code>model.fit_generator( train_generator,\n                     samples_per_epoch=train_generator,\n                     nb_epoch=200,\n                     validation_data=validation_generator,\n                     nb_val_samples=validation_generator,\n                     callbacks=callbacks)\n</code></pre>\n\n<p>2- The latest Keras version 'samples_per_epoch' is renamed to 'steps_per_epoch' ,and 'nb_epoch' to 'epochs'</p>\n\n<p>Steps per epoch can be calculated as follow:</p>\n\n<pre><code>steps_per_epoch = int(math.ceil(float(train_ds_len) / batch_size))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8027725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aafaf3302a0ee755c66e39a8f015739?s=128&d=identicon&r=PG&f=1", "display_name": "nishat anjum", "link": "https://stackoverflow.com/users/8027725/nishat-anjum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2043, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495067862, "creation_date": 1495054491, "last_edit_date": 1495067862, "question_id": 44034624, "link": "https://stackoverflow.com/questions/44034624/having-error-on-model-fit-generator", "title": "having error on model.fit_generator()", "body": "<p>I am trying to detect traffic lights. I have images with 3 labels so I put my training data and validation data into 3 subfolders under train and validation. I am facing an error at model.fit_generator() when I` run the program. Other things are working fine.  </p>\n\n<p>`    </p>\n\n<pre><code>import os\n\nfrom keras.layers import Dense, Dropout, Flatten, MaxPooling2D, \nConvolution2D\nfrom keras.models import Sequential\nfrom keras.preprocessing.image import ImageDataGenerator\nimport keras\nfrom keras.optimizers import Adam\n\nNUM_CHANNELS = 3\nIMAGE_WIDTH = 224 # Original: 455\nIMAGE_HEIGHT = 224 # Original: 256\nNUM_CLASSES = 3\nbase_script_name = os.path.splitext(__file__)[0]\nfilepath=base_script_name + \"-{epoch:02d}-val_acc-{val_acc:.2f}.hdf5\"\n\ndef get_generator(directory, train):\nif train:\ndatagen = ImageDataGenerator(\n  rescale=1./255,\n  shear_range=0.2,\n  zoom_range=0.2,\n  horizontal_flip=True)\nelse:\ndatagen = ImageDataGenerator(rescale=1./255)\nreturn datagen.flow_from_directory(\ndirectory=directory,\ntarget_size=(IMAGE_WIDTH, IMAGE_HEIGHT),\nbatch_size=8,\nclass_mode='categorical')\n\nmodel = Sequential([\nConvolution2D(16, 3, 3, border_mode='same', subsample=(2, 2), input_shape=\n(IMAGE_WIDTH, IMAGE_HEIGHT, NUM_CLASSES), activation='relu'),\nMaxPooling2D(pool_size=(3, 3)),\nDropout(0.2),\n\nConvolution2D(32, 3, 3, border_mode='same', activation='relu'),\nMaxPooling2D(pool_size=(3, 3)),\nDropout(0.2),\n\nConvolution2D(64, 3, 3, border_mode='same', activation='relu'),\nMaxPooling2D(pool_size=(2, 2)),\nDropout(0.2),\n\nFlatten(),\nDense(128, activation='tanh'),\nDropout(0.3),\nDense(NUM_CLASSES, activation='softmax'),\n])\nmodel.summary()\n\ndirectory = '/home/nishat/traffic_light/nexar/try/data/'\ntrain_generator = get_generator(directory+'/train', True)\nvalidation_generator = get_generator(directory+'valid', False)\n\nmodel.compile(optimizer=Adam(lr=0.0003), loss='categorical_crossentropy', \nmetrics=['accuracy'])\n\n# Callbacks\ncheckpoint = keras.callbacks.ModelCheckpoint(filepath, monitor='val_acc', \nverbose=1, save_best_only=False, mode='auto')\ntensorboard = keras.callbacks.TensorBoard(log_dir='./tensorboar', \nhistogram_freq=0, write_graph=True, write_images=True)\ncallbacks = [checkpoint, tensorboard]\n\nmodel.fit_generator(\ntrain_generator,\nsamples_per_epoch=train_generator.shape,\nnb_epoch=200,\nvalidation_data=validation_generator,\nnb_val_samples=validation_generator.shape,\ncallbacks=callbacks,\n)\n\nmodel.evaluate_generator(validation_generator, \nval_samples=len(validation_generator.filenames))`\n</code></pre>\n\n<p><strong>I am getting an error like this:</strong></p>\n\n<pre><code>Found 16791 images belonging to 3 classes.\nFound 1868 images belonging to 3 classes.\nTraceback (most recent call last):\n\n  File \"&lt;ipython-input-1-303a170ea444&gt;\", line 1, in &lt;module&gt;\n    runfile('/home/nishat/traffic_light/nexar/try/train.py', wdir='/home/nishat/traffic_light/nexar/try')\n\n  File \"/home/nishat/anaconda3/lib/python3.6/site-packages/spyder/utils/site/sitecustomize.py\", line 866, in runfile\n    execfile(filename, namespace)\n\n  File \"/home/nishat/anaconda3/lib/python3.6/site-packages/spyder/utils/site/sitecustomize.py\", line 102, in execfile\n    exec(compile(f.read(), filename, 'exec'), namespace)\n\n  File \"/home/nishat/traffic_light/nexar/try/train.py\", line 69, in &lt;module&gt;\n    samples_per_epoch=train_generator.shape,\n\nAttributeError: 'DirectoryIterator' object has no attribute 'shape'\n</code></pre>\n\n<p><strong>If anyone can suggest me where I need to change my code, I will be really grateful. Thanks</strong></p>\n"}, {"tags": ["python", "string", "list", "python-3.x"], "comments": [{"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 1, "creation_date": 1495054480, "post_id": 44034603, "comment_id": 75095881, "body": "<code>foo = list(random.choice(a_list))</code>?"}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 4, "creation_date": 1495054783, "post_id": 44034603, "comment_id": 75095997, "body": "<code>random.sample(a_list, 1)</code> would be my choice (it returns a list regardless of the sample size)."}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1495055747, "post_id": 44034603, "comment_id": 75096455, "body": "Show the intended output."}, {"owner": {"reputation": 3137, "user_id": 6320655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-M4BVxTY56KE/AAAAAAAAAAI/AAAAAAAAAB4/4zNEZqhVqpI/photo.jpg?sz=128", "display_name": "ospahiu", "link": "https://stackoverflow.com/users/6320655/ospahiu"}, "edited": false, "score": 0, "creation_date": 1495056490, "post_id": 44034603, "comment_id": 75096783, "body": "What exactly do you want to output here? Choose a random element from a list and return it in a list of size 1?"}], "answers": [{"comments": [{"owner": {"reputation": 56, "user_id": 6357983, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NSvbhvubSbQ/AAAAAAAAAAI/AAAAAAAAACY/45WeImGILSA/photo.jpg?sz=128", "display_name": "Robert Hubbard", "link": "https://stackoverflow.com/users/6357983/robert-hubbard"}, "edited": false, "score": 0, "creation_date": 1495061285, "post_id": 44034637, "comment_id": 75098515, "body": "Thanks. Now that I see it the syntax looks obvious."}], "tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": true, "score": 2, "last_activity_date": 1554808962, "last_edit_date": 1554808962, "creation_date": 1495054531, "answer_id": 44034637, "question_id": 44034603, "link": "https://stackoverflow.com/questions/44034603/how-to-randomize-and-turn-a-string-into-a-list-in-python/44034637#44034637", "title": "How to randomize and turn a string into a list in python", "body": "<p>You can use :</p>\n\n<pre><code>from random import choice\nfoo = [choice(a_list)]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 56, "user_id": 6357983, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NSvbhvubSbQ/AAAAAAAAAAI/AAAAAAAAACY/45WeImGILSA/photo.jpg?sz=128", "display_name": "Robert Hubbard", "link": "https://stackoverflow.com/users/6357983/robert-hubbard"}, "edited": false, "score": 0, "creation_date": 1495209248, "post_id": 44036085, "comment_id": 75172611, "body": "thanks for this. You&#39;re trick to iterate over the word has been helpful while I&#39;m working on my version today."}], "tags": [], "owner": {"reputation": 764, "user_id": 8016691, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DPgt1.png?s=128&g=1", "display_name": "Sqoshu", "link": "https://stackoverflow.com/users/8016691/sqoshu"}, "is_accepted": false, "score": 0, "last_activity_date": 1495064010, "last_edit_date": 1495064010, "creation_date": 1495062253, "answer_id": 44036085, "question_id": 44034603, "link": "https://stackoverflow.com/questions/44034603/how-to-randomize-and-turn-a-string-into-a-list-in-python/44036085#44036085", "title": "How to randomize and turn a string into a list in python", "body": "<p>I'm also starting my journey with Python 3.x and here is my quick code which I just made (you can use it for reference if you get stuck or something):  </p>\n\n<pre><code>from random import choice as chc\n\ndef hangman(diff):\n    #Fill in the words for every difficulty type:\n    easy = ['this', 'that']\n    medium = ['bicycle', 'bathroom']\n    hard = ['superlongword', 'othersuperlongw']\n    if diff == 'easy':\n        word = chc(easy)\n    elif diff == 'medium':\n        word = chc(medium)\n    elif diff == 'hard':\n        word = chc(hard)\n    else:\n        raise ValueError('Bad difficulty choosen. Terminating.')\n    shadow = ['_' for item in word] #list which is showing the progress\n    shad_str = ''\n    for item in shadow:\n        shad_str += item\n    print('Choosen word is {} characters long and looks like this:\\n{}'.format(len(shad_str), shad_str))\n    while '_' in shadow:\n        letter = input('Type in next char: ')\n        if len(letter) == 1:    #anti-cheat - always have to give 1 char\n            if letter in word:\n                for i in range(len(word)):   #makes it work correctly even when the letter shows up more than one time\n                    if(letter == word[i]):\n                        shadow[i] = letter\n                temp = ''\n                for item in shadow:\n                    temp += item\n                print(temp)\n            else:\n                print(\"This letter isn't in the choosen word! Try again.\")\n        else:\n                print('No cheating! Only one character allowed!')\n    else:\n        shad_str = ''\n        for item in shadow:\n            shad_str += item\n        print('The game has ended. The word was \"{}\".'.format(shad_str))\n</code></pre>\n\n<p>I'm sure the whole thing with the checking can be done in a function (that's why this is a case just for 'easy' mode) so you can call the 'play' function 3 times depending on which difficulty mode you choose.<br>\nEDIT: That was not needed, I just noticed you can just decide of the diff with 3 ifs. Now the game works every time if user picks right difficulty.</p>\n"}], "owner": {"reputation": 56, "user_id": 6357983, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NSvbhvubSbQ/AAAAAAAAAAI/AAAAAAAAACY/45WeImGILSA/photo.jpg?sz=128", "display_name": "Robert Hubbard", "link": "https://stackoverflow.com/users/6357983/robert-hubbard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 44034637, "answer_count": 2, "score": 1, "last_activity_date": 1554808962, "creation_date": 1495054417, "last_edit_date": 1495059333, "question_id": 44034603, "link": "https://stackoverflow.com/questions/44034603/how-to-randomize-and-turn-a-string-into-a-list-in-python", "title": "How to randomize and turn a string into a list in python", "body": "<p>I'm building a game of Hangman as my first python project. The game is currently being run in the terminal as I build it. I'm not using PyGame. Here's more of the relevant code.</p>\n\n<pre><code>five_letters = ['birds', 'hands', 'trees']\ndifficulty = 'easy'\n\ndef get_word(foo):\n\"\"\"Based on difficulty generate a game_word, then turn it into a list to be returned\"\"\"\n    if foo == 'easy':\n        foo = random.choice(five_letters)\n        foo = list(foo)\n\n    if foo == 'medium':\n        foo = random.choice(ten_letters)\n        foo = list(foo)\n\n    if foo == 'hard':\n        foo = random.choice(fifteen_letters)\n        foo = list(foo)\n\n    return foo\n\ngame_word = get_word(difficulty)\n</code></pre>\n\n<p>I want to take the list and do the following:</p>\n\n<ul>\n<li>Check if the player's guess is in the list ( I know I can iterate over a string).</li>\n<li>If the guess is in the string place it in the appropriate space in the output.</li>\n</ul>\n\n<p>I'm returning the string as a list so that I can find the value of a correct guess within the list to place it in the correct spot in the output.</p>\n\n<p>For instance</p>\n\n<pre><code>game_word = 'birds'\nplayer_guess = 's'\n</code></pre>\n\n<p>I want to output</p>\n\n<pre><code>_ _ _ _ s\n</code></pre>\n\n<p>But maybe I'm going about this all wrong. I just felt like I could shorten the part of the function that selected a random string and then turned it into a list.</p>\n"}, {"tags": ["python", "pandas", "dictionary", "one-hot-encoding"], "answers": [{"comments": [{"owner": {"reputation": 641, "user_id": 5094480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/faa005a9fc804f66a8982a4844576825?s=128&d=identicon&r=PG&f=1", "display_name": "leon yin", "link": "https://stackoverflow.com/users/5094480/leon-yin"}, "edited": false, "score": 0, "creation_date": 1495055495, "post_id": 44034651, "comment_id": 75096338, "body": "Thanks! Wouldn&#39;t this for for ex2? pd.DataFrame([d1, d2], dtype=object).fillna(0)"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 641, "user_id": 5094480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/faa005a9fc804f66a8982a4844576825?s=128&d=identicon&r=PG&f=1", "display_name": "leon yin", "link": "https://stackoverflow.com/users/5094480/leon-yin"}, "edited": false, "score": 0, "creation_date": 1495055563, "post_id": 44034651, "comment_id": 75096369, "body": "@leonyin yes, but I&#39;d add <code>astype(int)</code>... <code>pd.DataFrame([d1, d2], dtype=object).fillna(0).astype(int)</code>"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1495055653, "last_edit_date": 1495055653, "creation_date": 1495054620, "answer_id": 44034651, "question_id": 44034600, "link": "https://stackoverflow.com/questions/44034600/concatenating-dictionaries-with-different-keys-into-pandas-dataframe/44034651#44034651", "title": "Concatenating dictionaries with different keys into Pandas dataframe", "body": "<p>If you want the same result as what you are showing...</p>\n\n<pre><code>pd.DataFrame([d1, d2], dtype=object).fillna('')\n\n   a  b  c\n0  1  2   \n1     4  3\n</code></pre>\n\n<p>If you want to fill missing values with zero and keep a <code>int</code> <code>dtype</code>...</p>\n\n<pre><code>pd.concat(dict(enumerate(map(pd.Series, [d1, d2])))).unstack(fill_value=0)\n\n   a  b  c\n0  1  2  0\n1  0  4  3\n</code></pre>\n\n<p>Or as pointed out by OP in comments</p>\n\n<pre><code>pd.DataFrame([d1, d2], dtype=object).fillna(0).astype(int)\n\n   a  b  c\n0  1  2  0\n1  0  4  3\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 5094480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/faa005a9fc804f66a8982a4844576825?s=128&d=identicon&r=PG&f=1", "display_name": "leon yin", "link": "https://stackoverflow.com/users/5094480/leon-yin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 44034651, "answer_count": 1, "score": 1, "last_activity_date": 1495055653, "creation_date": 1495054406, "question_id": 44034600, "link": "https://stackoverflow.com/questions/44034600/concatenating-dictionaries-with-different-keys-into-pandas-dataframe", "title": "Concatenating dictionaries with different keys into Pandas dataframe", "body": "<p>Let's say I have two dictionaries with shared and unshared keys:</p>\n\n<pre><code>d1 = {'a': 1, 'b': 2}\nd2 = {'b': 4, 'c': 3}\n</code></pre>\n\n<p>How would I concatenate them into a dataframe that's akin to one-hot enoding?</p>\n\n<pre><code>a   b   c\n1   2   \n    4   3\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 1, "creation_date": 1495054608, "post_id": 44034593, "comment_id": 75095932, "body": "These seem like tiny numbers where you&#39;re running into precision problems."}, {"owner": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "reply_to_user": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 0, "creation_date": 1495054807, "post_id": 44034593, "comment_id": 75096008, "body": "What I worried the most is that some results are positives and other are negatives"}, {"owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 1, "creation_date": 1495055442, "post_id": 44034593, "comment_id": 75096306, "body": "what is the average value of the rows <code>df.mean(axis=1)</code>? if it is not near 0, then  this might just be numerical error."}, {"owner": {"reputation": 6104, "user_id": 6163621, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yyhNK.jpg?s=128&g=1", "display_name": "elPastor", "link": "https://stackoverflow.com/users/6163621/elpastor"}, "edited": false, "score": 0, "creation_date": 1495107498, "post_id": 44034593, "comment_id": 75118645, "body": "How is Excel handling the NaNs? Are they just blank cells?"}], "owner": {"reputation": 477, "user_id": 6331008, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/T39oH.gif?s=128&g=1", "display_name": "PAstudilloE", "link": "https://stackoverflow.com/users/6331008/pastudilloe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495054354, "creation_date": 1495054354, "question_id": 44034593, "link": "https://stackoverflow.com/questions/44034593/unable-to-sum-column-values-on-dataframe-python", "title": "Unable to sum column values on Dataframe / Python", "body": "<p>I have a dataframe with 1000 columns and 100 rows (several NaNs). I'm trying to sum all the rows and add them in a column at the end. My script runs smoothly, however I'm not getting the right results (I had to double check random rows manually. </p>\n\n<p>This is the code I'm using </p>\n\n<pre><code>df['sum'] = df.sum(axis=1)\n</code></pre>\n\n<p>The results I'm getting by using this are: -5.198331e-11, but when I'm doing it manually (using excel) the result is so different: 4.041211e-13</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1495054402, "post_id": 44034554, "comment_id": 75095839, "body": "I don&#39;t think it&#39;s that messy. Just using melt should suffice: <code>df.melt(id_vars=[&#39;Group&#39;, &#39;Property&#39;], value_vars=[&#39;2012&#39;, &#39;2013&#39;, &#39;2014&#39;, &#39;2015&#39;, &#39;2016&#39;], var_name=&#39;Year&#39;)</code> You might need to use integers 2012, 2013.. for the column names, I cannot see the types here."}], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1495056405, "creation_date": 1495056405, "answer_id": 44035043, "question_id": 44034554, "link": "https://stackoverflow.com/questions/44034554/tidying-a-messy-dataset/44035043#44035043", "title": "Tidying a messy dataset", "body": "<p>From my understanding of tidy data, you want variables in the columns.  I'd interpret <code>Group</code> and <code>Year</code> as observations and <code>Property</code> as variables.</p>\n\n<pre><code>df.set_index(\n    ['Group', 'Property']\n).rename_axis('Year', 1).stack().unstack('Property')\n\nProperty    Flow  Pressure  Temperature\nGroup Year                             \nA     2012  1425      6057         5796\n      2013  1226      1645         1494\n      2014  1903       953         1374\n      2015  1109      6333         2013\n      2016  2805      5396         3244\nB     2012  1991     10522         4712\n      2013  5366      1209         1172\n      2014  1017      1312         1877\n      2015  1582      2253         2788\n      2016  5884      1232         1163\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "edited": false, "score": 0, "creation_date": 1495121652, "post_id": 44037959, "comment_id": 75129473, "body": "Thanks @Scott Boston! I think that <code>melt</code> is now a method in .20"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 1, "last_activity_date": 1495076877, "creation_date": 1495076877, "answer_id": 44037959, "question_id": 44034554, "link": "https://stackoverflow.com/questions/44034554/tidying-a-messy-dataset/44037959#44037959", "title": "Tidying a messy dataset", "body": "<p>There are at least three solutions to this tidying this dataset:</p>\n\n<p>Let's use: <code>set_index</code>,<code>stack</code>, <code>unstack</code></p>\n\n<pre><code>df.set_index(['Group', 'Property']).rename_axis('Year',1).stack().unstack('Property').reset_index()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Property Group  Year  Flow  Pressure  Temperature\n0            A  2012  1425      6057         5796\n1            A  2013  1226      1645         1494\n2            A  2014  1903       953         1374\n3            A  2015  1109      6333         2013\n4            A  2016  2805      5396         3244\n5            B  2012  1991     10522         4712\n6            B  2013  5366      1209         1172\n7            B  2014  1017      1312         1877\n8            B  2015  1582      2253         2788\n9            B  2016  5884      1232         1163\n</code></pre>\n\n<p>Second, let's use: <code>pivot</code>, <code>stack</code></p>\n\n<pre><code>df.pivot(index='Group',columns='Property').stack(0).reset_index().rename(columns={'level_1':'Year'})\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Property Group  Year  Flow  Pressure  Temperature\n0            A  2012  1425      6057         5796\n1            A  2013  1226      1645         1494\n2            A  2014  1903       953         1374\n3            A  2015  1109      6333         2013\n4            A  2016  2805      5396         3244\n5            B  2012  1991     10522         4712\n6            B  2013  5366      1209         1172\n7            B  2014  1017      1312         1877\n8            B  2015  1582      2253         2788\n9            B  2016  5884      1232         1163\n</code></pre>\n\n<p>Third, let's use: <code>pd.melt</code>, <code>set_index</code>, <code>unstack</code></p>\n\n<pre><code>pd.melt(df,id_vars=['Group','Property'],var_name='Year').set_index(['Group','Year','Property'])['value'].unstack('Property').reset_index()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Property Group  Year  Flow  Pressure  Temperature \n0            A  2012  1425      6057         5796\n1            A  2013  1226      1645         1494\n2            A  2014  1903       953         1374\n3            A  2015  1109      6333         2013\n4            A  2016  2805      5396         3244\n5            B  2012  1991     10522         4712\n6            B  2013  5366      1209         1172\n7            B  2014  1017      1312         1877\n8            B  2015  1582      2253         2788\n9            B  2016  5884      1232         1163\n</code></pre>\n"}], "owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "accepted_answer_id": 44035043, "answer_count": 2, "score": 2, "last_activity_date": 1495076877, "creation_date": 1495054165, "question_id": 44034554, "link": "https://stackoverflow.com/questions/44034554/tidying-a-messy-dataset", "title": "Tidying a messy dataset", "body": "<p>I'm attempting to put the following dataset in tidy format using pandas. I believe my variables are Group, Temperature, Flow, Pressure and Year but I am having trouble using pandas methods to restructure it properly.</p>\n\n<pre><code>  Group     Property   2012  2013  2014  2015  2016\n0     A     Pressure   6057  1645   953  6333  5396\n1     A  Temperature   5796  1494  1374  2013  3244\n2     A         Flow   1425  1226  1903  1109  2805\n3     B     Pressure  10522  1209  1312  2253  1232\n4     B  Temperature   4712  1172  1877  2788  1163\n5     B         Flow   1991  5366  1017  1582  5884\n</code></pre>\n"}, {"tags": ["python", "yaml", "configuration-files"], "comments": [{"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1495054666, "post_id": 44034534, "comment_id": 75095953, "body": "It is actually valid to have no value after a key, what is not valid is that you have the same key multiple times in the same mapping."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1495060261, "post_id": 44034534, "comment_id": 75098213, "body": "You also have closing quotes on some of your keys without the corresponding opening quotes. The keys need to be either fully quoted (<code>&#39;task_c_opt_1&#39;</code>) or fully unquoted (<code>task_c_opt_1</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 2, "creation_date": 1495059271, "post_id": 44034607, "comment_id": 75097889, "body": "If you are just going to print the result that is built as a string anyway, then not providing the stream parameter to <code>dump</code> is inefficient. Doing <code>dump(config, sys.stdout)</code> is both more memory efficient and faster. And <code>print</code> as statement would not work in Python3 anyway."}, {"owner": {"reputation": 1218, "user_id": 1805634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680e995b608516c75735be7cd321c778?s=128&d=identicon&r=PG", "display_name": "sphere", "link": "https://stackoverflow.com/users/1805634/sphere"}, "reply_to_user": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1495089893, "post_id": 44034607, "comment_id": 75106743, "body": "@Anthon: I put the print there for showing the result in StackOverflow. Also, he said he will use it for config-files. I am pretty sure you won&#39;t reach a size where streaming gives a significant difference in this case."}], "tags": [], "owner": {"reputation": 1218, "user_id": 1805634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680e995b608516c75735be7cd321c778?s=128&d=identicon&r=PG", "display_name": "sphere", "link": "https://stackoverflow.com/users/1805634/sphere"}, "is_accepted": false, "score": 1, "last_activity_date": 1495054427, "creation_date": 1495054427, "answer_id": 44034607, "question_id": 44034534, "link": "https://stackoverflow.com/questions/44034534/load-yaml-preserving-order/44034607#44034607", "title": "Load YAML preserving order", "body": "<p>First a quick comment: You are using a list, not an array. Also, you are using tuples inside this array.</p>\n\n<p>Anyway, you could use the yaml module for this, I also changes the tuples to lists as there are no tuples in yaml.</p>\n\n<pre><code>from yaml import dump\n\nconfig = [\n    'task_a',\n    ['task_b', {'task_b_opt_1': ' '}],\n    ['task_a', {'task_a_opt_1': 42}],\n    ['task_c', {'task_c_opt_1': 'foo', 'task_c_opt_2': 'bar'}],\n    'task_b'\n]\nprint dump(config)\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>- task_a\n- - task_b\n  - {task_b_opt_1: ' '}\n- - task_a\n  - {task_a_opt_1: 42}\n- - task_c\n  - {task_c_opt_1: foo, task_c_opt_2: bar}\n- task_b\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 1, "creation_date": 1495059477, "post_id": 44034672, "comment_id": 75097961, "body": "I was going to comment that specifying &#39;null&#39;  is not necessary, but you already changed that. You should however also remove the comment &quot;The <code>null</code> will translate to <code>None</code> in Python&quot; as that makes no longer sense now there are no explicit <code>null</code> scalars in the YAML There were some superfluous single quotes in your source, and the quotes around &#39;foo&#39; and &#39;bar&#39; are not really necessary."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1495060084, "post_id": 44034672, "comment_id": 75098160, "body": "@Anthon Ah, thanks. I removed that line, and fixed my mention of <code>: null</code> after that. I kept the quotes around the values because they were in the original question, but with your fixing the half-quoting of the keys, I could add back the syntax highlighting."}], "tags": [], "owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "is_accepted": true, "score": 2, "last_activity_date": 1495059942, "last_edit_date": 1495059942, "creation_date": 1495054718, "answer_id": 44034672, "question_id": 44034534, "link": "https://stackoverflow.com/questions/44034534/load-yaml-preserving-order/44034672#44034672", "title": "Load YAML preserving order", "body": "<p>In YAML, a mapping is defined to not be ordered. The typical solution is to make it a list of mappings. However, the values (or even keys) can be missing, in which case they are implicitly <code>null</code> (the equivalent of <code>None</code> in Python)</p>\n\n\n\n<pre class=\"lang-yaml prettyprint-override\"><code>- task_a:\n- task_b:\n    task_b_opt_1: ' '\n- task_a:\n    task_a_opt_1: 42\n- task_c:\n    task_c_opt_1: 'foo'\n    task_c_opt_2: 'bar'\n- task_b:\n</code></pre>\n\n<p>Another option is to not make the tasks without options into mappings, and instead use strings, by just removing the <code>:</code> from those lines:</p>\n\n<pre class=\"lang-yaml prettyprint-override\"><code>- task_a\n- task_b:\n    task_b_opt_1: ' '\n- task_a:\n    task_a_opt_1: 42\n- task_c:\n    task_c_opt_1: 'foo'\n    task_c_opt_2: 'bar'\n- task_b\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1495058812, "post_id": 44035494, "comment_id": 75097725, "body": "If there are many task types it is better to scan the module for <code>TaskX</code> classes and add those to a mapping automatically."}], "tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": false, "score": 0, "last_activity_date": 1495058659, "creation_date": 1495058659, "answer_id": 44035494, "question_id": 44034534, "link": "https://stackoverflow.com/questions/44034534/load-yaml-preserving-order/44035494#44035494", "title": "Load YAML preserving order", "body": "<p>I might be reading between the lines, but I assume that your string <code>'task_a'</code>, <code>'task_b'</code>, etc., each causes an object of a specific type (class) to be created. You can directly specify those object types using YAML tags resulting in the following YAML document:</p>\n\n<pre><code>- !task_a\n- !task_b\n  task_b_opt_1: ' '\n- !task_a\n  task_a_opt_1: 42\n- !task_c\n  task_c_opt_1: foo\n  task_c_opt_2: bar\n- !task_b\n</code></pre>\n\n<p>If your <code>task_X_opt_N</code> are actually <strong>positional</strong> arguments you can use: </p>\n\n<pre><code>- !task_a\n- !task_b\n  - ' '\n- !task_a\n  - 42\n- !task_c\n  - foo\n  - bar\n- !task_b\n</code></pre>\n\n<p>which is IMO more readable (and less error prone when final users edit these).</p>\n\n<p>Either of these formats can be loaded by:</p>\n\n<pre><code>import ruamel.yaml\n\nclass Task:\n    def __init__(self, *args, **kw):\n        if args: assert len(kw) == 0\n        if kw: assert len(args) == 0\n        self.args = args\n        self.opt = kw\n\n    def __repr__(self):\n        retval = str(self.__class__.__name__)\n        task_letter = retval[-1].lower()\n        for idx, k in enumerate(self.args):\n            retval += '\\n  task_{}_opt_{}: {!r}'.format(task_letter, idx, k)\n        for k in sorted(self.opt):\n            retval += '\\n  {}: {!r}'.format(k, self.opt[k])\n        return retval\n\nclass TaskA(Task):\n    pass\n\n\nclass TaskB(Task):\n    pass\n\n\nclass TaskC(Task):\n    pass\n\n\n\ndef default_constructor(loader, tag_suffix, node):\n    assert tag_suffix.startswith('!task_')\n    if tag_suffix[6] == 'a':\n        task = TaskA\n    elif tag_suffix[6] == 'b':\n        task = TaskB\n    elif tag_suffix[6] == 'c':\n        task = TaskC\n    else:\n        raise NotImplementedError('Unknown task type' + tag_suffix)\n    if isinstance(node, ruamel.yaml.ScalarNode):\n        assert node.value == ''\n        return task()\n    elif isinstance(node, ruamel.yaml.MappingNode):\n        val = loader.construct_mapping(node)\n        return task(**val)\n    elif isinstance(node, ruamel.yaml.SequenceNode):\n        val = loader.construct_sequence(node)\n        return task(*val)\n    else:\n        raise NotImplementedError('Node: ' + str(type(node)))\n\nruamel.yaml.add_multi_constructor('', default_constructor,\n                                  constructor=ruamel.yaml.SafeConstructor)\n\n\nwith open('config.yaml') as fp:\n    tasks = ruamel.yaml.safe_load(fp)\n    for task in tasks:\n        print(task)\n</code></pre>\n\n<p>resulting in the same output:</p>\n\n<pre><code>TaskA\nTaskB\n  task_b_opt_1: ' '\nTaskA\n  task_a_opt_1: 42\nTaskC\n  task_c_opt_1: 'foo'\n  task_c_opt_2: 'bar'\nTaskB\n</code></pre>\n\n<hr>\n\n<p>If for some reason you need to use the older PyYAML you can import that and add the constructor using:</p>\n\n<pre><code>ruamel.yaml.add_multi_constructor('', default_constructor,\n                                  Loader=yaml.SafeLoader)\n</code></pre>\n\n<p>You'll have to take care that PyYAML only supports YAML 1.1 and not YAML 1.2</p>\n"}], "owner": {"reputation": 3933, "user_id": 743203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f21f48e49abe4ecfb8a9d3d6fc47e5b?s=128&d=identicon&r=PG", "display_name": "David Moreno Garc&#237;a", "link": "https://stackoverflow.com/users/743203/david-moreno-garc%c3%ada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4268, "favorite_count": 1, "accepted_answer_id": 44034672, "answer_count": 3, "score": 4, "last_activity_date": 1495059942, "creation_date": 1495054093, "last_edit_date": 1495054448, "question_id": 44034534, "link": "https://stackoverflow.com/questions/44034534/load-yaml-preserving-order", "title": "Load YAML preserving order", "body": "<p>I have a Python library that defines a list like the next one:</p>\n\n<pre><code>config = [\n    'task_a',\n    ('task_b', {'task_b_opt_1': ' '}),\n    ('task_a', {'task_a_opt_1': 42}),\n    ('task_c', {'task_c_opt_1': 'foo', 'task_c_opt_2': 'bar'}),\n    'task_b'\n]\n</code></pre>\n\n<p>Basically this list defines 5 tasks that have to be applied in that specific order and using the parameters defined (if any). Also, the same task can define parameters or not (use default values).</p>\n\n<p>Now I want to extend the library to support config files. To make them easier for the final user I was thinking in using YAML files. So the code above would become something like:</p>\n\n<pre><code>task_a:\ntask_b:\n  task_b_opt_1: ' '\ntask_a:\n  task_a_opt_1: 42\ntask_c:\n  task_c_opt_1': 'foo'\n  task_c_opt_2': 'bar'\ntask_b:\n</code></pre>\n\n<p>This is not even a valid YAML file as some keys have no value. So I have two questions:</p>\n\n<ol>\n<li>How can I define empty tasks?</li>\n<li>How can I preserve the order when loading the file in Python?</li>\n</ol>\n\n<p>If none of those is possible, is there any other solution for this?</p>\n"}, {"tags": ["python", "nltk", "morphological-analysis"], "comments": [{"owner": {"reputation": 10072, "user_id": 4008056, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/0406a294c03878fd77cd34ef9f70fb84?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/4008056/toby"}, "edited": false, "score": 0, "creation_date": 1495063141, "post_id": 44034496, "comment_id": 75099067, "body": "Welcome to Stack Overflow, please review the <a href=\"https://stackoverflow.com/help/mcve\">guidelines</a> for creating a Minimal, Complete and Verifiable question."}], "answers": [{"tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": false, "score": 1, "last_activity_date": 1495062454, "creation_date": 1495062454, "answer_id": 44036117, "question_id": 44034496, "link": "https://stackoverflow.com/questions/44034496/in-nltk-can-i-do-morphological-analysis-for-specific-language/44036117#44036117", "title": "In NLTK, Can I do morphological analysis for specific language", "body": "<p>Forget it. Creating a morphological analyzer, especially for a language with complex morphology like Arabic, is extremely difficult. Look around for solutions you can install and interface with the nltk. But the nltk does come with an Arabic stemmer, see <a href=\"http://www.nltk.org/api/nltk.stem.html#module-nltk.stem.isri\" rel=\"nofollow noreferrer\">here</a>. You'll have to decide if it's any good. </p>\n"}, {"tags": [], "owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "is_accepted": false, "score": 0, "last_activity_date": 1495083681, "last_edit_date": 1495540973, "creation_date": 1495083681, "answer_id": 44038931, "question_id": 44034496, "link": "https://stackoverflow.com/questions/44034496/in-nltk-can-i-do-morphological-analysis-for-specific-language/44038931#44038931", "title": "In NLTK, Can I do morphological analysis for specific language", "body": "<p>If you're looking for Arabic processing, there's the ISRI stemmer that @alexis pointed to:</p>\n\n<pre><code>&gt;&gt;&gt; from nltk.stem.isri import ISRIStemmer\n&gt;&gt;&gt; isri = ISRIStemmer()\n&gt;&gt;&gt; isri = '\u062d\u0631\u0643\u0627\u062a'\n&gt;&gt;&gt; isri = ISRIStemmer()\n&gt;&gt;&gt; s = '\u062d\u0631\u0643\u0627\u062a'\n&gt;&gt;&gt; isri.stem(s)\n'\u062d\u0631\u0643' \n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/21492480/python-isristemmer-for-arabic-text\">Python ISRIStemmer for Arabic text</a></p>\n\n<p>If you're asking for a generic tool, <code>nltk</code> doesn't really have such a function but if you're looking at customized stemming you can try the updated customizable LancasterStemmer rules with NLTK v3.2.3, see <a href=\"https://github.com/nltk/nltk/blob/develop/nltk/stem/lancaster.py#L50\" rel=\"nofollow noreferrer\">https://github.com/nltk/nltk/blob/develop/nltk/stem/lancaster.py#L50</a> but you would have to understand how Lancaster works first.</p>\n\n<p>Possibly, <a href=\"http://morfessor.readthedocs.io/en/latest/cmdtools.html#morfessor\" rel=\"nofollow noreferrer\">Morfessor</a> might be what you're looking for if you have training data for morphologically split words/sentences.</p>\n"}], "owner": {"reputation": 1, "user_id": 4364308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b0C9Q.jpg?s=128&g=1", "display_name": "Programmer one", "link": "https://stackoverflow.com/users/4364308/programmer-one"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495083681, "creation_date": 1495053971, "question_id": 44034496, "link": "https://stackoverflow.com/questions/44034496/in-nltk-can-i-do-morphological-analysis-for-specific-language", "title": "In NLTK, Can I do morphological analysis for specific language", "body": "<p>I am trying to add some arabic features into the NLTK,\nbut some tasks such as stemming need a morphological analysis. Is there any way to define the morphological features of specific language such as Arabic to NLTK or I must to customize the analyzer?</p>\n"}, {"tags": ["python", "csv", "matplotlib"], "comments": [{"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 0, "creation_date": 1495062116, "post_id": 44034480, "comment_id": 75098777, "body": "What is this line for <code>for plotinsideloop in range(300000):</code>?"}, {"owner": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "reply_to_user": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 0, "creation_date": 1495062809, "post_id": 44034480, "comment_id": 75098968, "body": "Thats how made it to loop for very long to keep refreshing the plot"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 0, "creation_date": 1495063040, "post_id": 44034480, "comment_id": 75099031, "body": "Ok I see. Then you need the code that comes after <code>data = list(reader(f))</code> to be indented to the same level as <code>with open(newest) as f:</code>"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 0, "creation_date": 1495063174, "post_id": 44034480, "comment_id": 75099081, "body": "Please see my edited answer."}, {"owner": {"reputation": 2358, "user_id": 2542091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/67BL1.jpg?s=128&g=1", "display_name": "Aleksander Lidtke", "link": "https://stackoverflow.com/users/2542091/aleksander-lidtke"}, "edited": false, "score": 0, "creation_date": 1495068266, "post_id": 44034480, "comment_id": 75100341, "body": "@GamerDude welcome to SO. Please, next time show some work that you&#39;ve done yourself to address the problem you&#39;re facing, as well as say what other problems you came across. Also, making your code as succinct as possible will make more people take the time to read it, understand the error, and help you."}, {"owner": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "reply_to_user": {"reputation": 2358, "user_id": 2542091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/67BL1.jpg?s=128&g=1", "display_name": "Aleksander Lidtke", "link": "https://stackoverflow.com/users/2542091/aleksander-lidtke"}, "edited": false, "score": 0, "creation_date": 1495135230, "post_id": 44034480, "comment_id": 75137318, "body": "@AleksanderLidtke Hi. Will keep that in mind. Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495056794, "post_id": 44034700, "comment_id": 75096915, "body": "Thank you so much for your answer. But when I try to run the code i get syntax error on &quot;print titlename&quot;. If I comment it out, i get syntax error on the next line &quot;ax.set_xlim(firstdate1, lastdate1)&quot; . I don&#39;t get it whats wrong"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "reply_to_user": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495056864, "post_id": 44034700, "comment_id": 75096955, "body": "@GamerDude: ah there was a missing close paren. Please try now."}, {"owner": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495058247, "post_id": 44034700, "comment_id": 75097534, "body": "Thanks very much. It seems to have fixed the problem, however now the script just hangs with 100percent cpu usage, not sure what is it calculating but its taking very long. Nothing happening in Shell"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "reply_to_user": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495058380, "post_id": 44034700, "comment_id": 75097584, "body": "What is the last <code>print</code> statement it got to before spinning?"}, {"owner": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495058466, "post_id": 44034700, "comment_id": 75097603, "body": "It doesn&#39;t print anything, no action whatsoever in the Shell"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "reply_to_user": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495059025, "post_id": 44034700, "comment_id": 75097793, "body": "Can you try removing the call to <code>time.sleep(300)</code>?"}, {"owner": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495059535, "post_id": 44034700, "comment_id": 75097979, "body": "No change, same situation"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "reply_to_user": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495060429, "post_id": 44034700, "comment_id": 75098259, "body": "Weird. Would you post into the question the full, current code you&#39;re using?"}, {"owner": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495060811, "post_id": 44034700, "comment_id": 75098379, "body": "Sure thing. Thank you for your time"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "reply_to_user": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495063206, "post_id": 44034700, "comment_id": 75099087, "body": "You&#39;re welcome. I updated the code in my answer with the proper indentation. It should work as expected now..."}, {"owner": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495065345, "post_id": 44034700, "comment_id": 75099623, "body": "Again, thanks so much for your time, but now it draws the plot, but it is empty. It looks like puts all the dates but values are not there. Can it be because I have some values like 28.05 ?"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "reply_to_user": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495065532, "post_id": 44034700, "comment_id": 75099675, "body": "Hm, I&#39;m not sure why that&#39;s occurring let me think about it."}, {"owner": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495134377, "post_id": 44034700, "comment_id": 75136858, "body": "Thanks dude, the other guy posted his answer and it worked. No idea what is the difference but thanks"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "reply_to_user": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495134954, "post_id": 44034700, "comment_id": 75137183, "body": "Sure, anytime. Glad you have a working solution now."}], "tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": false, "score": 0, "last_activity_date": 1495063165, "last_edit_date": 1495063165, "creation_date": 1495054887, "answer_id": 44034700, "question_id": 44034480, "link": "https://stackoverflow.com/questions/44034480/how-to-tell-matplotlib-to-do-not-consider-anything-other-than-numbers-from-1-to/44034700#44034700", "title": "How to tell matplotlib to do not consider anything other than numbers from 1 to 1000?", "body": "<p>One issue is that you'd want to remove those problematic values but you can't just remove them from one of the list comprehensions because then your two lists will have a different number of elements.</p>\n\n<p>What you can do is <a href=\"https://docs.python.org/2/library/functions.html#zip\" rel=\"nofollow noreferrer\"><code>zip()</code></a> the two lists together and then remove the offending values. The below will do that even if there are letters in the humidity list.</p>\n\n<pre><code>def plotloop():\n    hours = (HourLocator())\n    minutes = (MinuteLocator())\n    days = (DayLocator())\n    dayFormatter = DateFormatter('%X %x')      # e.g., 12\n    for plotinsideloop in range(300000):\n        dated_files = [(os.path.getmtime(fn), os.path.basename(fn)) \n                for fn in os.listdir(\"/home/pi/csvdata\") if fn.lower().endswith('.csv')]\n        dated_files.sort()\n        dated_files.reverse()\n        newest = dated_files[0][1]\n        with open(newest) as f:\n                data = list(reader(f))\n\n        humidity = [i[1] for i in data]\n        dates1 = [i[0] for i in data]\n        humdates = zip(humidity,dates1)\n        humdatesfiltered = []\n        for humdate in humdates:\n            try:\n                if 1 &lt;= humdate[0] &lt;= 1000:\n                    humdatesfiltered.append(humdate)\n            except TypeError:\n                pass \n\n        dates = [datetime.strptime(i, '%X %x') for i in dates1]\n        #print dates\n        print dates1[0], dates1[-1]\n        fig, ax = pyplot.subplots()\n        fig.subplots_adjust(bottom=0.2)\n        ax.xaxis.set_major_locator(days)\n        ax.xaxis.set_minor_locator(hours)\n        ax.xaxis.set_major_formatter(dayFormatter)\n        firstdate = dates[0]\n        lastdate = dates[-1]\n        print \"_______\"\n\n        titlename = (firstdate1.strftime('%Y-%m-%d'), \" - \", lastdate1.strftime('%Y-%m-%d'))\n        print titlename\n\n        ax.set_xlim(firstdate1, lastdate1)\n        pyplot.ylim(10,50) \n        ax.xaxis_date()\n        ax.autoscale_view()\n        pyplot.setp(pyplot.gca().get_xticklabels(), rotation=45, horizontalalignment='right')\n        pyplot.xticks(rotation=15)\n        pyplot.plot_date([i[1] for i in humdatesfiltered], \n                         [i[0] for i in humdatesfiltered])\n        pyplot.title(titlename)\n        pyplot.savefig(newest + '_2.png', dpi=260)\n        pyplot.savefig(\"plot_2.png\", dpi=260)\n        #pyplot.savefig(\"test.pdf\")\n        print \"Done\"\n        print lastdate\n        #       time.sleep(300)    \n\nplotloop()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495134337, "post_id": 44036695, "comment_id": 75136837, "body": "Thank you so much. I had to change csf to csv and there is no &#39;bad&#39; defined so I stripped it but it works beautifully. And the code looks beautiful. Thanks so much"}, {"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "reply_to_user": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495134700, "post_id": 44036695, "comment_id": 75137022, "body": "Sorry, fixed two typos."}, {"owner": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495136468, "post_id": 44036695, "comment_id": 75137977, "body": "One question, i don&#39;t quite understand, will it check for new file everytime or only when script is launched?"}, {"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "reply_to_user": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "edited": false, "score": 0, "creation_date": 1495138789, "post_id": 44036695, "comment_id": 75139192, "body": "<code>main()</code> calls <code>plot_humidity()</code> every five minutes; each time, <code>plot_humidity()</code> finds the newest file, loads the data, and plots it."}], "tags": [], "owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "is_accepted": false, "score": 0, "last_activity_date": 1495134523, "last_edit_date": 1495134523, "creation_date": 1495066887, "answer_id": 44036695, "question_id": 44034480, "link": "https://stackoverflow.com/questions/44034480/how-to-tell-matplotlib-to-do-not-consider-anything-other-than-numbers-from-1-to/44036695#44036695", "title": "How to tell matplotlib to do not consider anything other than numbers from 1 to 1000?", "body": "<p>Here is a restructured version that might be easier to work with:</p>\n\n<pre><code>import csv\nimport datetime\nimport glob\nimport matplotlib\nmatplotlib.use('Agg')    # has to be called before pyplot is imported\nimport matplotlib.pyplot as plt\nfrom matplotlib.dates import HourLocator, DateFormatter, DayLocator, YearLocator\nimport os\n# import pylab\nfrom time import sleep\n\nCSV_DIR       = \"/home/pi/csvdata\"\nDATE_FORMAT   = \"%X %x\"         # ex \"07:06:05 09/30/13\"\nDAY_FORMAT    = \"%Y-%m-%d\"      # ex \"2013-09-30\"\nINITIAL_DELAY = 30\nREDRAW_DELAY  = 300\n\nDEBUG = True\nif DEBUG:\n    def debug_print(s):\n        print(s)\nelse:\n    def debug_print(s):\n        pass\n\ndef wait(i):\n    debug_print(\"Waiting for {} seconds\".format(i))\n    sleep(i)\n\ndef get_newest_file(dir, ext=None):\n    debug_print(\"Finding newest file\")\n    if ext is None:\n        # no ext given - match all file extensions\n        filespec = \"*\"\n    elif ext[:1] == \".\":\n        # ext starts with period - don't repeat it\n        filespec = \"*\" + ext\n    else:\n        # no period - insert one\n        filespec = \"*.\" + ext\n\n    # make full search path\n    path = os.path.join(dir, filespec)\n    # get all matching files\n    file_names = glob.glob(path)\n\n    if not file_names:\n        # no matching files found\n        debug_print(\"  nothing found\")\n        return None\n    else:\n        # find newest file\n        newest = max(file_names, key = os.path.getmtime)\n        debug_print(\"  found {}\".format(newest))\n        return newest\n\ndef get_humidity_data(csv_fname):\n    hum = []\n    dat = []\n    parsetime = datetime.datetime.strptime\n    debug_print(\"Reading data\")\n    good, skip = 0, 0\n    with open(csv_fname, \"r\") as csv_file:\n        for row in csv.reader(csv_file):\n            try:\n                h = int(row[1])\n                d = parsetime(row[0], DATE_FORMAT)\n                if 1 &lt;= h &lt;= 1000:\n                    hum.append(h)\n                    dat.append(d)\n                    good += 1\n                else:\n                    skip += 1\n            except ValueError:\n                skip += 1\n    debug_print(\"  found {} good rows, skipped {} bad rows\".format(good, skip))\n    return hum, dat\n\ndef make_graph(humidities, dates_):\n    firstdate = dates_[0]\n    lastdate = dates_[-1]\n    graph_title = \"{} - {}\".format(firstdate.strftime(DAY_FORMAT), lastdate.strftime(DAY_FORMAT))\n    debug_print(\"Making graph for {}\".format(graph_title))\n\n    # create new plot\n    fig, ax = plt.subplots()\n    fig.subplots_adjust(bottom = 0.2)\n    # configure axes\n    ax.xaxis_date()\n    ax.xaxis.set_major_locator(DayLocator())\n    ax.xaxis.set_minor_locator(HourLocator())\n    ax.xaxis.set_major_formatter(DateFormatter(DATE_FORMAT))\n    ax.set_xlim(firstdate, lastdate)\n    ax.set_ylim(10,50)\n    ax.autoscale_view()\n    plt.setp(plt.gca().get_xticklabels(), rotation=45, horizontalalignment='right')\n    plt.xticks(rotation=15)\n    # add data\n    plt.plot_date(dates_, humidities)\n    plt.title(graph_title)\n    return fig\n\ndef plot_humidity():\n    newest = get_newest_file(CSV_DIR, \"csv\")\n    if newest is None:\n        debug_print(\"No data file found!\")\n    else:\n        h, d = get_humidity_data(newest)\n        fig = make_graph(h, d)\n        fig.savefig(newest + '_2.png', dpi=260)\n        # fig.savefig(\"plot_2.png\", dpi=260)\n        # pyplot.savefig(\"test.pdf\")\n        debug_print(\"Done\")\n\ndef main():\n    wait(INITIAL_DELAY)\n    while True:\n        plot_humidity()\n        wait(REDRAW_DELAY)\n\nif __name__==\"__main__\":\n    main()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6702001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O9gRQ.jpg?s=128&g=1", "display_name": "GamerDude", "link": "https://stackoverflow.com/users/6702001/gamerdude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1495134523, "creation_date": 1495053908, "last_edit_date": 1495060795, "question_id": 44034480, "link": "https://stackoverflow.com/questions/44034480/how-to-tell-matplotlib-to-do-not-consider-anything-other-than-numbers-from-1-to", "title": "How to tell matplotlib to do not consider anything other than numbers from 1 to 1000?", "body": "<p>Noob here. I have this script that plots my data data every 5 minutes from a refreshing .csv file. Problem is that there are sometimes bugs in the .csv data. Maybe letters, maybe some other stuff. How do I tell matplotlib to do not consider anything that is not a number from 1 to 1000? Ill paste my code below. Thanks.</p>\n\n<pre><code>import matplotlib\nmatplotlib.use('Agg')\nfrom matplotlib import pyplot, dates\nfrom matplotlib.dates import HourLocator, DateFormatter, DayLocator, \nYearLocator, MinuteLocator\nfrom csv import reader\nfrom dateutil import parser\nimport os\nimport time\nimport pylab\nimport datetime\nfrom datetime import datetime, date\nos.chdir('/home/pi/csvdata')\n\ntime.sleep(30)\ndef plotloop():\nhours = (HourLocator())\nminutes = (MinuteLocator())\ndays = (DayLocator())\ndayFormatter = DateFormatter('%X %x')      # e.g., 12\nfor plotinsideloop in range(300000):\n    dated_files = [(os.path.getmtime(fn), os.path.basename(fn)) \n        for fn in os.listdir(\"/home/pi/csvdata\") if \nfn.lower().endswith('.csv')]\n    dated_files.sort()\n    dated_files.reverse()\n    newest = dated_files[0][1]\n    with open(newest) as f:\n        data = list(reader(f))\n    humidity = [i[1] for i in data]\n    dates1 = [i[0] for i in data]\n    dates = [datetime.strptime(i, '%X %x') for i in dates1]\n    #print dates\n    print dates1[0], dates1[-1]\n    fig, ax = pyplot.subplots()\n    fig.subplots_adjust(bottom=0.2)\n    ax.xaxis.set_major_locator(days)\n    ax.xaxis.set_minor_locator(hours)\n    ax.xaxis.set_major_formatter(dayFormatter)\n    firstdate = (dates[0])\n    firstdate1 = str(firstdate)#[:10]\n    print \"_______\"\n    #print firstdate\n    lastdate = (dates[-1])\n    lastdate1 = str(lastdate)\n    lastdate2 = lastdate1.replace(\" \", \" \")\n    firstdate2 = firstdate1.replace(\" \", \" \")\n    lastdate3 = lastdate2.replace(\":\", \" \")\n    firstdate3 = firstdate2.replace(\":\", \" \")\n    lastdate4 = lastdate3.replace(\"-\", \" \")\n    firstdate4 = firstdate3.replace(\"-\", \" \")\n    lastdate5 = lastdate4.split(\" \")\n    firstdate5 = firstdate4.split(\" \")\n    print lastdate4\n    print firstdate4\n    firstdate6 = map(int, firstdate5)\n    lastdate6 = map(int, lastdate5)\n    #lastdate6 = [int(z) for z in lastdate5]\n    #firstdate6 = [int(v) for v in firstdate5]\n#    firstdatey = int.firstdate4[0]\n##        firstdatem\n##        firstdated\n##        firstdateh\n##        firstdatemin\n##        firstdatesec\n\n    print lastdate6\n    print firstdate6\n    titlename = (firstdate1, \" - \", lastdate1)\n    print titlename\n    #print lastdate\n    ax.set_xlim(datetime (*firstdate6), datetime (*lastdate6))\n    pyplot.ylim(10,50) \n    ax.xaxis_date()\n    ax.autoscale_view()\n    pyplot.setp(pyplot.gca().get_xticklabels(), rotation=45, \nhorizontalalignment='right')\n    pyplot.xticks(rotation=15)\n    pyplot.plot_date(dates, humidity)\n    pyplot.title(titlename)\n    pyplot.savefig(newest + '_2.png', dpi=260)\n    pyplot.savefig(\"plot_2.png\", dpi=260)\n    #pyplot.savefig(\"test.pdf\")\n    print (\"Done\")\n    print(lastdate)\n    time.sleep(300)\n\n\n\nplotloop()\n</code></pre>\n\n<p>And here goes the updated code which hangs:</p>\n\n<pre><code>import matplotlib\nmatplotlib.use('Agg')\nfrom matplotlib import pyplot, dates\nfrom matplotlib.dates import HourLocator, DateFormatter, DayLocator, YearLocator, MinuteLocator\nfrom csv import reader\nfrom dateutil import parser\nimport os\nimport time\nimport pylab\nimport datetime\nfrom datetime import datetime, date\nos.chdir('/home/pi/csvdata')\n\n#time.sleep(30)\ndef plotloop():\n        hours = (HourLocator())\n        minutes = (MinuteLocator())\n        days = (DayLocator())\n        dayFormatter = DateFormatter('%X %x')      # e.g., 12\n        for plotinsideloop in range(300000):\n                dated_files = [(os.path.getmtime(fn), os.path.basename(fn)) \n                        for fn in os.listdir(\"/home/pi/csvdata\") if fn.lower().endswith('.csv')]\n                dated_files.sort()\n                dated_files.reverse()\n                newest = dated_files[0][1]\n                with open(newest) as f:\n                        data = list(reader(f))\n\n        humidity = [i[1] for i in data]\n        dates1 = [i[0] for i in data]\n        humdates = zip(humidity,dates1)\n        humdatesfiltered = []\n        for humdate in humdates:\n            try:\n                if 1 &lt;= humdate[0] &lt;= 1000:\n                    humdatesfiltered.append(humdate)\n            except TypeError:\n                pass \n\n        dates = [datetime.strptime(i, '%X %x') for i in dates1]\n        #print dates\n        print dates1[0], dates1[-1]\n        fig, ax = pyplot.subplots()\n        fig.subplots_adjust(bottom=0.2)\n        ax.xaxis.set_major_locator(days)\n        ax.xaxis.set_minor_locator(hours)\n        ax.xaxis.set_major_formatter(dayFormatter)\n        firstdate = dates[0]\n        lastdate = dates[-1]\n        print \"_______\"\n\n        titlename = (firstdate1.strftime('%Y-%m-%d'), \" - \", lastdate1.strftime('%Y-%m-%d'))\n        print titlename\n\n        ax.set_xlim(firstdate1, lastdate1)\n        pyplot.ylim(10,50) \n        ax.xaxis_date()\n        ax.autoscale_view()\n        pyplot.setp(pyplot.gca().get_xticklabels(), rotation=45, horizontalalignment='right')\n        pyplot.xticks(rotation=15)\n        pyplot.plot_date([i[1] for i in humdatesfiltered], \n                         [i[0] for i in humdatesfiltered])\n        pyplot.title(titlename)\n        pyplot.savefig(newest + '_2.png', dpi=260)\n        pyplot.savefig(\"plot_2.png\", dpi=260)\n        #pyplot.savefig(\"test.pdf\")\n        print \"Done\"\n        print lastdate\n       #       time.sleep(300)\n\n\n\n\nplotloop()\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": true, "score": 3, "last_activity_date": 1495054768, "creation_date": 1495054768, "answer_id": 44034682, "question_id": 44034435, "link": "https://stackoverflow.com/questions/44034435/change-column-value-if-value-is-in-another-dataframe/44034682#44034682", "title": "Change column value if value is in another dataframe", "body": "<pre><code>#check if Materials column contains any words from df2. This will also handle both lower case and upper case matching\n\ndf1.Materials = df1.apply(lambda x: 1 if np.in1d(np.array(x.Materials.lower().split()),df2.Mat.str.lower()).any() else 0, axis=1)\n\ndf1\nOut[2619]: \n   Materials   Col2  Col3 \n1          1      X      Y\n2          0      X      Y\n3          1      X      Y\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2204, "user_id": 7982275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d5ddeaf91306c9bae414dc55adc0c7?s=128&d=identicon&r=PG&f=1", "display_name": "EFT", "link": "https://stackoverflow.com/users/7982275/eft"}, "is_accepted": false, "score": 0, "last_activity_date": 1495055738, "creation_date": 1495055738, "answer_id": 44034918, "question_id": 44034435, "link": "https://stackoverflow.com/questions/44034435/change-column-value-if-value-is-in-another-dataframe/44034918#44034918", "title": "Change column value if value is in another dataframe", "body": "<p>To do this without using <code>apply</code>, you could use <code>pd.Series.str.contains</code> and <code>np.where</code></p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf1 = pd.DataFrame({'Materials': ['Wood metal', 'Rock', 'Rock Metal'],\n                    'Col2': ['X', 'X', 'X'], 'Col3': ['Y', 'Y', 'Y']})\n\ndf2 = pd.DataFrame({'Mat': ['Metal']})\n\ndf1['Materials'] = np.where(df1['Materials'].str.lower().str.contains('|'.join(df2['Mat']).lower()), 1, 0)\n</code></pre>\n"}], "owner": {"reputation": 762, "user_id": 7248562, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8475428a9ab03f342cf2ac42dff20b4?s=128&d=identicon&r=PG&f=1", "display_name": "hdatas", "link": "https://stackoverflow.com/users/7248562/hdatas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 44034682, "answer_count": 2, "score": 0, "last_activity_date": 1495055738, "creation_date": 1495053717, "question_id": 44034435, "link": "https://stackoverflow.com/questions/44034435/change-column-value-if-value-is-in-another-dataframe", "title": "Change column value if value is in another dataframe", "body": "<p>I have 2 dataframe as follow:</p>\n\n<p>df1:</p>\n\n<pre><code>       Materials      Col2       Col3 ...\n1      Wood metal      X          Y\n2        Rock          X          Y\n3      Rock Metal      X          Y\n</code></pre>\n\n<p>df2:</p>\n\n<pre><code>       Mat\n1     Metal\n2      ...\n</code></pre>\n\n<p>I would like to loop over the first dataframe, if value of Materials contains a word that I can find in df2 then I will change it to 1 so I would get:</p>\n\n<p>df1:</p>\n\n<pre><code>        Materials    Col2       Col3 ...\n1         1            X          Y\n2         0            X          Y\n3         1            X          Y\n</code></pre>\n\n<p>Any suggestions ?</p>\n\n<p>Many thanks !</p>\n"}, {"tags": ["python", "encryption"], "comments": [{"owner": {"reputation": 1218, "user_id": 1805634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680e995b608516c75735be7cd321c778?s=128&d=identicon&r=PG", "display_name": "sphere", "link": "https://stackoverflow.com/users/1805634/sphere"}, "edited": false, "score": 0, "creation_date": 1495053748, "post_id": 44034420, "comment_id": 75095514, "body": "You seem to use <code>&#39;pass&#39;</code> (a string) instead of the <code>pass</code> variable. Also please consider not naming a variable <code>pass</code> anyway, &#39;pass&#39; is a python statement, use e.g. <code>password</code>."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 4, "creation_date": 1495054079, "post_id": 44034420, "comment_id": 75095675, "body": "Erm... why mustn&#39;t the user know the password?"}, {"owner": {"reputation": 13, "user_id": 6218866, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eMdY34rk610/AAAAAAAAAAI/AAAAAAAAAZk/sAta-lx0-50/photo.jpg?sz=128", "display_name": "RV-user", "link": "https://stackoverflow.com/users/6218866/rv-user"}, "reply_to_user": {"reputation": 1218, "user_id": 1805634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680e995b608516c75735be7cd321c778?s=128&d=identicon&r=PG", "display_name": "sphere", "link": "https://stackoverflow.com/users/1805634/sphere"}, "edited": false, "score": 0, "creation_date": 1495054306, "post_id": 44034420, "comment_id": 75095794, "body": "@sphere: thanks , i actually used without single quote too, which is giving me syntax error in request.delete () line during script execution and used passwd variable (corrected it.)"}, {"owner": {"reputation": 13, "user_id": 6218866, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eMdY34rk610/AAAAAAAAAAI/AAAAAAAAAZk/sAta-lx0-50/photo.jpg?sz=128", "display_name": "RV-user", "link": "https://stackoverflow.com/users/6218866/rv-user"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1495054748, "post_id": 44034420, "comment_id": 75095983, "body": "@peter: script is kept on shared server and login user is common for all team members and don&#39;t want to expose  plain text password hard coded in script to other people for security reason."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 3, "creation_date": 1495055080, "post_id": 44034420, "comment_id": 75096144, "body": "Any way you store the password, whoever reads the script will see how you decrypt it and will be able to follow the same procedure. Store the password elsewhere or make the user type it in."}, {"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 0, "creation_date": 1495055175, "post_id": 44034420, "comment_id": 75096194, "body": "How will this script be used? If you run it manually, just use <code>getpass</code> and type it in."}, {"owner": {"reputation": 13, "user_id": 6218866, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eMdY34rk610/AAAAAAAAAAI/AAAAAAAAAZk/sAta-lx0-50/photo.jpg?sz=128", "display_name": "RV-user", "link": "https://stackoverflow.com/users/6218866/rv-user"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1495055551, "post_id": 44034420, "comment_id": 75096360, "body": "@mad physicist, Blender :  I want to run the script in non interactive  user mode and don&#39;t want to provide password manually.  script will be called and executed  by other service after getting an alert."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1495055588, "post_id": 44034420, "comment_id": 75096378, "body": "My answer covers that option too."}, {"owner": {"reputation": 2800, "user_id": 2193134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7007988a388d47491a921503d30cca07?s=128&d=identicon&r=PG&f=1", "display_name": "TehTris", "link": "https://stackoverflow.com/users/2193134/tehtris"}, "edited": false, "score": 0, "creation_date": 1495056099, "post_id": 44034420, "comment_id": 75096617, "body": "If you put an encoded string into a file... and its decoded anywhere INside of the file, then its pretty easy to figure out what the encoded string is. If its decoded OUTside of the file, then the encoded string basically just became the password that anyone with additional know-how can do whatever they want."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6218866, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eMdY34rk610/AAAAAAAAAAI/AAAAAAAAAZk/sAta-lx0-50/photo.jpg?sz=128", "display_name": "RV-user", "link": "https://stackoverflow.com/users/6218866/rv-user"}, "edited": false, "score": 0, "creation_date": 1495111983, "post_id": 44034863, "comment_id": 75121913, "body": "Thanks: i chose 1st approach to store password in file and encrypt it but i am still stuck with my second problem  passing passwd&#39;s value in rquest.delete url.    requests.delete(url, stream=True, headers=headers, verify=False,                       auth=(&#39;Administrator&#39;,passwd)) \t\t\t\t\t   \t\t\t\t\t   How can i pass the value of passwd inside the auth(). It takes passwd as a string only. ***working scenario is   requests.delete(url, stream=True, headers=headers, verify=False,                       auth=(&#39;Administrator&#39;,&#39;actual_password&#39;))"}], "tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 6, "last_activity_date": 1495055509, "creation_date": 1495055509, "answer_id": 44034863, "question_id": 44034420, "link": "https://stackoverflow.com/questions/44034420/encrypting-password-in-python-script/44034863#44034863", "title": "encrypting password in python script", "body": "<p>If your greatest risk is people who open your script, don't store the password in the script. No matter what algorithm you use to decrypt an encrypted password stored in the script, the unauthorized user will be able to figure it out and apply it just by opening the script.</p>\n\n<p>You have a couple of options at this point</p>\n\n<ol>\n<li>Store the password in a file with the appropriate permissions set, so that no one outside your group can open it. At this point you probably don't need to encrypt the password, since again, anyone reading your script would immediately know how to decrypt it.</li>\n<li>Use the <a href=\"https://docs.python.org/3.6/library/getpass.html#getpass.getpass\" rel=\"noreferrer\"><code>getpass.getpass</code></a> function to just have authorized users enter the password at a prompt. That way, you don't have to store it anywhere at all. This can not be used directly in a non-interactive script, but you can wrap your Python script in another script that pipes in the password. With the right permissions, this is roughly equivalent to option #1.</li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 6218866, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eMdY34rk610/AAAAAAAAAAI/AAAAAAAAAZk/sAta-lx0-50/photo.jpg?sz=128", "display_name": "RV-user", "link": "https://stackoverflow.com/users/6218866/rv-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3618, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495055509, "creation_date": 1495053664, "last_edit_date": 1495054947, "question_id": 44034420, "link": "https://stackoverflow.com/questions/44034420/encrypting-password-in-python-script", "title": "encrypting password in python script", "body": "<p>I have a python script where i am using username and password to to perform operation(get/delete)on server using rest api.</p>\n\n<p>I want to encrypt password used in script so that people who open the script won't be able to see plaintext password.</p>\n\n<pre><code>req = requests.delete(url, stream=True, headers=headers, verify=False,\n                      auth=('Administrator','password'))\n</code></pre>\n\n<p>second problem is if i go for xor encryption for temporary purpose like below</p>\n\n<pre><code>passwd = base64.b64decode(\"cGFzc3dvcmQ=\")\n\nreq = requests.delete(url, stream=True, headers=headers, verify=False,\n                      auth=('Administrator',passwd))\n</code></pre>\n\n<p>passwd don't work inside <code>auth()</code> function as a variable.</p>\n"}, {"tags": ["python", "function", "arguments"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4839596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61676fbf58eda9f7b85a851043335e37?s=128&d=identicon&r=PG&f=1", "display_name": "penguin02007", "link": "https://stackoverflow.com/users/4839596/penguin02007"}, "edited": false, "score": 0, "creation_date": 1495128880, "post_id": 44034437, "comment_id": 75133719, "body": "Thanks for the explanation! It makes more sense now."}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 3, "last_activity_date": 1495054151, "last_edit_date": 1495054151, "creation_date": 1495053725, "answer_id": 44034437, "question_id": 44034373, "link": "https://stackoverflow.com/questions/44034373/python-passing-variables-within-sub-functions/44034437#44034437", "title": "Python Passing variables within (sub) functions", "body": "<p>First, <code>a</code> is not \"global\" in <code>main</code>, it is <em>local to <code>main</code></em>. In any event, when you <code>return</code> a local variable from some function, it doesn't affect anything in the surrounding scope unless you <em>assign the return value in that scope</em>. </p>\n\n<pre><code>In [1]: def main():\n   ...:     a = '2'\n   ...:\n   ...:     def define_stuff():\n   ...:         b = 1 + float(a)\n   ...:         print 'returning', b\n   ...:         return b\n   ...:\n   ...:     def add_stuff():\n   ...:         print 'adding b to a ',\n   ...:         c = float(a) + float(b)\n   ...:         print 'getting', c\n   ...:         return c\n   ...:\n   ...:     b = define_stuff() # or else the value get's discarded\n   ...:     c = add_stuff() # or else the value gets discarded\n   ...:\n\nIn [2]: main()\n\nreturning 3.0\nadding b to a  getting 5.0\n</code></pre>\n\n<p>Note, this is a brittle way to write code, since your <code>add_stuff</code> function depends on some non-local <code>b</code>, so if you want to use <code>add_stuff</code>, you <em>have to make sure</em> there is a <code>b</code> somewhere in variable resolution order (local, enclosing... global). Instead, it is a better practice to <em>only deal with local variables</em> and <code>return</code> values from functions and pass values as arguments to functions if the function will make use of them. Only use <code>global</code> variables sparingly. So, this would be better:</p>\n\n<pre><code>In [5]: def main():\n   ...:\n   ...:     def define_stuff(a):\n   ...:         b = 1 + float(a)\n   ...:         print 'returning', b\n   ...:         return b\n   ...:\n   ...:     def add_stuff(a, b):\n   ...:         print 'adding b to a ',\n   ...:         c = float(a) + float(b)\n   ...:         print 'getting', c\n   ...:         return c\n   ...:\n   ...:     x = '2'\n   ...:     y = define_stuff(x) # or else the value get's discarded\n   ...:     z = add_stuff(x, y) # or else the value gets discarded\n   ...:\n\nIn [6]: main()\nreturning 3.0\nadding b to a  getting 5.0\n</code></pre>\n\n<p>Note, I've used <code>x, y, z</code> just to emphasize that these are separate, local variables, but you could have used <code>a,b,c</code>, but just remember, they don't have any intrinsic connection to the <code>a, b, c</code> in your inner function scopes.</p>\n"}, {"tags": [], "owner": {"reputation": 6027, "user_id": 7738328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d6eb24cbea7d5c8d4bdab21dd3d232?s=128&d=identicon&r=PG&f=1", "display_name": "JohanL", "link": "https://stackoverflow.com/users/7738328/johanl"}, "is_accepted": false, "score": 2, "last_activity_date": 1495053837, "creation_date": 1495053837, "answer_id": 44034470, "question_id": 44034373, "link": "https://stackoverflow.com/questions/44034373/python-passing-variables-within-sub-functions/44034470#44034470", "title": "Python Passing variables within (sub) functions", "body": "<p><code>return b</code>returns the value of <code>b</code> alright, but it needs to be stored in a variable in <code>main</code>. The variable <code>b</code> is right now local to your function <code>add_stuff</code>. What you need is a variable <code>b</code> also in <code>main</code> to catch the value you return:</p>\n\n<pre><code>def main():\n    a = '2'\n\n    def define_stuff():\n        b = 1 + float(a)\n        print 'returning', b\n        return b\n\n    def add_stuff():\n        print 'adding b to a ', \n        c = float(a) + float(b)\n        print 'getting', c\n        return c \n\n    b = define_stuff()\n    c = add_stuff()\n\nif __name__ == '__main__':\n     main()\n</code></pre>\n\n<p>And in addition you probably want to catch the result of <code>add_stuff</code> also, in <code>c</code> as I have shown above.</p>\n"}], "owner": {"reputation": 27, "user_id": 4839596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61676fbf58eda9f7b85a851043335e37?s=128&d=identicon&r=PG&f=1", "display_name": "penguin02007", "link": "https://stackoverflow.com/users/4839596/penguin02007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3752, "favorite_count": 0, "accepted_answer_id": 44034437, "answer_count": 2, "score": 2, "last_activity_date": 1495054151, "creation_date": 1495053463, "last_edit_date": 1495053677, "question_id": 44034373, "link": "https://stackoverflow.com/questions/44034373/python-passing-variables-within-sub-functions", "title": "Python Passing variables within (sub) functions", "body": "<p>I am trying to understand a basic concept about passing variables and scoping in python but I am clearly missing something as I have spent a lot time reading but not getting what I am expecting.</p>\n\n<p>I expect the following as:</p>\n\n<ol>\n<li><p>Define global a in main ()</p></li>\n<li><p>In define_stuff(), add a to 1 and assign to b, pass b or 3  back to main().</p></li>\n<li><p>In add_stuff(), add a to b and assign c, pass c or 5 back to main().</p>\n\n<p>def main():\n    a = '2'</p>\n\n<pre><code>def define_stuff():\n    b = 1 + float(a)\n    print 'returning', b\n    return b\n\ndef add_stuff():\n    print 'adding b to a ', \n    c = float(a) + float(b)\n    print 'getting', c\n    return c \n\ndefine_stuff()\nadd_stuff()\n</code></pre>\n\n<p>if <strong>name</strong> == '<strong>main</strong>':\n     main()</p></li>\n</ol>\n\n<p>I am using 2.7. Clearly \"return\" does not perform what I am expecting.</p>\n\n<p>What I need to do to pass a local variables within a (sub) function to main()?</p>\n\n<pre><code>returning 3.0\nadding b to a\nTraceback (most recent call last):\n  File \"C:\\scripts\\testscope.py\", line 19, in &lt;module&gt;\n    main()\n  File \"C:\\scripts\\testscope.py\", line 16, in main\n    add_stuff()\n  File \"C:\\scripts\\testscope.py\", line 11, in add_stuff\n    c = float(a) + float(b)\nNameError: global name 'b' is not defined\n</code></pre>\n"}, {"tags": ["python", "regex", "text", "replace", "line"], "comments": [{"owner": {"reputation": 93, "user_id": 5585465, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4f5f8adcbd28d720278a5eaa13b8161a?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/5585465/lucas"}, "edited": false, "score": 0, "creation_date": 1495053547, "post_id": 44034371, "comment_id": 75095425, "body": "i should writee on the beggining: I need to remove from every line begining from &lt;br&gt;....Point....&lt;br&gt; where inside those tags will find words listed in the external txt file (like for example word &quot;Point&quot;)"}, {"owner": {"reputation": 3930, "user_id": 1695437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/buiqY.jpg?s=128&g=1", "display_name": "Darkstarone", "link": "https://stackoverflow.com/users/1695437/darkstarone"}, "edited": false, "score": 0, "creation_date": 1495055583, "post_id": 44034371, "comment_id": 75096374, "body": "Please provide an example of what the line <b>should</b> look like when your code is correct. Also, you can edit your own question, instead of providing additional information in the comments."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5585465, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4f5f8adcbd28d720278a5eaa13b8161a?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/5585465/lucas"}, "edited": false, "score": 0, "creation_date": 1495056977, "post_id": 44034933, "comment_id": 75097004, "body": "Thanks Darkstarone. This works. I didnt thought about using line.split. Thanks. If I have other words like Point in external txt file one under another how should i loop this to find other words as well and replace them?"}, {"owner": {"reputation": 3930, "user_id": 1695437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/buiqY.jpg?s=128&g=1", "display_name": "Darkstarone", "link": "https://stackoverflow.com/users/1695437/darkstarone"}, "reply_to_user": {"reputation": 93, "user_id": 5585465, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4f5f8adcbd28d720278a5eaa13b8161a?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/5585465/lucas"}, "edited": false, "score": 0, "creation_date": 1495057147, "post_id": 44034933, "comment_id": 75097089, "body": "So is the text file with all the words you want to replace separate from <code>&#39;input.txt&#39;</code>? Or is it part of it?"}, {"owner": {"reputation": 93, "user_id": 5585465, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4f5f8adcbd28d720278a5eaa13b8161a?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/5585465/lucas"}, "edited": false, "score": 0, "creation_date": 1495057802, "post_id": 44034933, "comment_id": 75097360, "body": "its different txt file"}, {"owner": {"reputation": 3930, "user_id": 1695437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/buiqY.jpg?s=128&g=1", "display_name": "Darkstarone", "link": "https://stackoverflow.com/users/1695437/darkstarone"}, "reply_to_user": {"reputation": 93, "user_id": 5585465, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4f5f8adcbd28d720278a5eaa13b8161a?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/5585465/lucas"}, "edited": false, "score": 0, "creation_date": 1495058119, "post_id": 44034933, "comment_id": 75097483, "body": "Updated to get all the words from <code>&#39;bad_words.txt&#39;</code>, and added an <code>all</code> iterative if condition to check all words aren&#39;t in a line."}], "tags": [], "owner": {"reputation": 3930, "user_id": 1695437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/buiqY.jpg?s=128&g=1", "display_name": "Darkstarone", "link": "https://stackoverflow.com/users/1695437/darkstarone"}, "is_accepted": true, "score": 1, "last_activity_date": 1495058069, "last_edit_date": 1495058069, "creation_date": 1495055801, "answer_id": 44034933, "question_id": 44034371, "link": "https://stackoverflow.com/questions/44034371/regex-replace-text-in-line-with-multiple-tags-if-the-word-is-in-the-external-txt/44034933#44034933", "title": "regex replace text in line with multiple tags if the word is in the external txt file in python", "body": "<p>I believe this is the result you want, let me know if it needs to be modified:</p>\n\n<pre><code>bad_words = []\nwith open('bad_words.txt', 'r') as f:\n    for line in f:\n        bad_words.append(line.rstrip())\n\nwith open('input.txt', 'r') as f:\n    with open('output.txt', 'w') as output:\n        for line in f:\n            kept_parts = []\n            for chunk in line.split(\"&lt;br&gt;\"):\n                if all(bad_word not in chunk for bad_word in bad_words) :\n                    kept_parts.append(chunk)\n\n            line = \"&lt;br&gt;\".join(kept_parts)\n\n            output.write(line + \"\\n\")\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>&lt;br&gt;&amp;emsp;&amp;emsp;&lt;font size=\"4\"&gt;&amp;bull;&lt;/font&gt;&amp;emsp; Shape Removed 4&lt;br&gt;\n</code></pre>\n\n<p>In essence, you don't need regex. Just split the code into lines (<code>&lt;br&gt;</code> denotes a line); ignore any chunks that contain the undesired text; and rejoin the resulting list. </p>\n"}], "owner": {"reputation": 93, "user_id": 5585465, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4f5f8adcbd28d720278a5eaa13b8161a?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/5585465/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 44034933, "answer_count": 1, "score": 0, "last_activity_date": 1495058069, "creation_date": 1495053456, "question_id": 44034371, "link": "https://stackoverflow.com/questions/44034371/regex-replace-text-in-line-with-multiple-tags-if-the-word-is-in-the-external-txt", "title": "regex replace text in line with multiple tags if the word is in the external txt file in python", "body": "<p>i have many lines like this line (please scroll to read whole line):</p>\n\n<pre><code> &lt;br&gt;&amp;emsp;&amp;emsp;&lt;font size=\"4\"&gt;&amp;bull;&lt;/font&gt;&amp;emsp; 3 Point Updated&lt;br&gt;&amp;emsp;&amp;emsp;&lt;font size=\"4\"&gt;&amp;bull;&lt;/font&gt;&amp;emsp; Shape Removed 4&lt;br&gt;&amp;emsp;&amp;emsp;&lt;font size=\"4\"&gt;&amp;bull;&lt;/font&gt;&amp;emsp; Point 3 Added&lt;br&gt;\n</code></pre>\n\n<p>I need to remove from every line begining from <br>....Point....<br>  where inside those tags will find words listed in the external txt file (like for example word \"Point\")</p>\n\n<p>my code is now:</p>\n\n<pre><code>with open(input.txt') as input:\n    lines=input.readlines()\n    with open(output.txt', \"w\") as output:\n        for line in lines:\n            if \"Point\" in line:\n                output.write(re.sub('(&lt;br&gt;&amp;emsp;&amp;emsp;&lt;font size=\"4\"&gt;&amp;bull;&lt;/font&gt;&amp;emsp;.*?)Point(.*?&lt;br&gt;)', '&lt;br&gt;', line, flags=re.DOTALL))\n            else:\n                output.write(line)\n</code></pre>\n\n<p>when im using this code its only deleting once if it finds \"Point\" in line and leaves:</p>\n\n<pre><code>&lt;br&gt;&amp;emsp;&amp;emsp;&lt;font size=\"4\"&gt;&amp;bull;&lt;/font&gt;&amp;emsp; Shape Removed 4&lt;br&gt;&amp;emsp;&amp;emsp;&lt;font size=\"4\"&gt;&amp;bull;&lt;/font&gt;&amp;emsp; Point 3 Added&lt;br&gt;\n</code></pre>\n\n<p>How to make replace multiply instances between <br> tags of Point word?</p>\n\n<p>And second question: Right now im only using <code>if \"Point\" in line</code> but it would be great if it would search for the words loading from the external txt file.\nThanks for help!</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1495053343, "post_id": 44034297, "comment_id": 75095317, "body": "Pretty much anything that can be interpreted as a Python string escape sequence... no?"}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 2, "creation_date": 1495053898, "post_id": 44034297, "comment_id": 75095591, "body": "It useful when dealing with paths, on Windows at least... e.g. &quot;C:\\Users\\Me\\Desktop&quot; may not behave as desired."}], "answers": [{"tags": [], "owner": {"reputation": 118519, "user_id": 244297, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0e726125e86b084ffec695e845b360b7?s=128&d=identicon&r=PG", "display_name": "Eugene Yarmash", "link": "https://stackoverflow.com/users/244297/eugene-yarmash"}, "is_accepted": true, "score": 3, "last_activity_date": 1495053690, "creation_date": 1495053690, "answer_id": 44034428, "question_id": 44034297, "link": "https://stackoverflow.com/questions/44034297/when-to-use-raw-strings-in-regex-patterns/44034428#44034428", "title": "When to use raw strings in regex patterns?", "body": "<p>One another example is sequences like <code>\\1</code>, <code>\\2</code> which are octal escapes in Python strings, but reference captured groups in regular expressions.</p>\n\n<pre><code>&gt;&gt;&gt; re.search(r\"(\\w+) \\1\", \"the the\")\n&lt;_sre.SRE_Match object; span=(0, 7), match='the the'&gt;\n&gt;&gt;&gt; re.search(\"(\\w+) \\1\", \"the the\")\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 10395, "user_id": 275088, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b931a4a3164d36350c78dd67ed8a9f99?s=128&d=identicon&r=PG", "display_name": "planetp", "link": "https://stackoverflow.com/users/275088/planetp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1017, "favorite_count": 0, "accepted_answer_id": 44034428, "answer_count": 1, "score": 1, "last_activity_date": 1495053690, "creation_date": 1495053197, "question_id": 44034297, "link": "https://stackoverflow.com/questions/44034297/when-to-use-raw-strings-in-regex-patterns", "title": "When to use raw strings in regex patterns?", "body": "<p>From the documentation on <a href=\"https://docs.python.org/3/library/re.html\" rel=\"nofollow noreferrer\">regular expression</a> I understand that it's recommended to use \"raw\" strings for patterns to make sure backslashes are not handled in any special way:</p>\n\n<blockquote>\n  <p>Regular expressions use the backslash character (<code>'\\'</code>) to indicate\n  special forms or to allow special characters to be used without\n  invoking their special meaning. This collides with Python\u2019s usage of\n  the same character for the same purpose in string literals; for\n  example, to match a literal backslash, one might have to write <code>'\\\\\\\\'</code>\n  as the pattern string, because the regular expression must be <code>\\\\</code>, and\n  each backslash must be expressed as <code>\\\\</code> inside a regular Python string\n  literal.</p>\n  \n  <p>The solution is to use Python\u2019s raw string notation for regular\n  expression patterns; backslashes are not handled in any special way in\n  a string literal prefixed with <code>'r'</code>.</p>\n</blockquote>\n\n<p>I wonder what other cases (apart from the literal backslash) may require using raw strings?</p>\n"}, {"tags": ["python", "lambda", "timeout", "amazon-dynamodb"], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 8027640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vobz4.jpg?s=128&g=1", "display_name": "Doug", "link": "https://stackoverflow.com/users/8027640/doug"}, "edited": false, "score": 0, "creation_date": 1495054413, "post_id": 44034487, "comment_id": 75095846, "body": "Thank you.  This brought me to an unrelated error, so I will mark this as answered since I am no longer getting the timeout."}, {"owner": {"reputation": 119, "user_id": 3530769, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cadcef80fa80f51b5c198c751fa140?s=128&d=identicon&r=PG&f=1", "display_name": "Ronalkiha", "link": "https://stackoverflow.com/users/3530769/ronalkiha"}, "reply_to_user": {"reputation": 175, "user_id": 8027640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vobz4.jpg?s=128&g=1", "display_name": "Doug", "link": "https://stackoverflow.com/users/8027640/doug"}, "edited": false, "score": 0, "creation_date": 1567592102, "post_id": 44034487, "comment_id": 102005943, "body": "Hi @Doug, could you share more about the error which you had faced, please? I am getting the same error :("}], "tags": [], "owner": {"reputation": 2467, "user_id": 1743971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83d32c7941bf480308fb3717c2eecd5?s=128&d=identicon&r=PG", "display_name": "Yeshodhan Kulkarni", "link": "https://stackoverflow.com/users/1743971/yeshodhan-kulkarni"}, "is_accepted": true, "score": 5, "last_activity_date": 1495053942, "creation_date": 1495053942, "answer_id": 44034487, "question_id": 44034289, "link": "https://stackoverflow.com/questions/44034289/lambda-python-dynamodb-write-gets-timeout-error/44034487#44034487", "title": "lambda python dynamodb write gets timeout error", "body": "<p>The endpoint URL for DynamoDB seems to be incorrect:</p>\n\n<pre><code>endpoint_url=\"http://localhost:8000\"\n</code></pre>\n\n<p>This is used only for local testing of DynamoDB. From Lambda function, the endpoint for us-east-1 needs to be:</p>\n\n<pre><code>endpoint_url=\"https://dynamodb.us-east-1.amazonaws.com\"\n</code></pre>\n\n<p>As per the <a href=\"http://docs.aws.amazon.com/general/latest/gr/rande.html#ddb_region\" rel=\"noreferrer\">AWS Regions and Endpoints</a> document.</p>\n"}], "owner": {"reputation": 175, "user_id": 8027640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vobz4.jpg?s=128&g=1", "display_name": "Doug", "link": "https://stackoverflow.com/users/8027640/doug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1861, "favorite_count": 0, "accepted_answer_id": 44034487, "answer_count": 1, "score": 4, "last_activity_date": 1495053942, "creation_date": 1495053176, "question_id": 44034289, "link": "https://stackoverflow.com/questions/44034289/lambda-python-dynamodb-write-gets-timeout-error", "title": "lambda python dynamodb write gets timeout error", "body": "<p>I have been trying to work through my first tutorial on lambda dynamodb connections and am running into a timeout error.</p>\n\n<p>In the lambda console I have the following code:</p>\n\n<pre><code>from __future__ import print_function\nimport json\nimport boto3\n\nprint('Loading function')\n\ndef lambda_handler(event, context):\n\n    dynamodb = boto3.resource('dynamodb', region_name='us-east-1', endpoint_url=\"http://localhost:8000\")\n    print('Dynamodb loaded')\n    pages_table = dynamodb.Table('Pages')\n    print('Pages table referenced')\n\n    for item in event:\n        print('Item: {}'.format(item))\n        response = pages_table.put_item( Item=item)\n        print('Response: {}'.format(response))\n\n    return \"hi\"\n</code></pre>\n\n<p>I have created the Pages table via the dynamodb console.</p>\n\n<p>When I test run the lambda function from the lambda console, I get:</p>\n\n<pre><code>START RequestId: 4008f77f-3b3e-11e7-ad79-0713f3bd7f4e Version: $LATEST\nDynamodb loaded\nPages table referenced\nItem: {'UID': 1, 'id': 1, 'label': 'Original', 'snippet': 'Style', 'type': 'item', '$$hashKey': 'object:4'}\nEND RequestId: 4008f77f-3b3e-11e7-ad79-0713f3bd7f4e\nREPORT RequestId: 4008f77f-3b3e-11e7-ad79-0713f3bd7f4e  Duration: 3002.30 ms    \nBilled Duration: 3000 ms    Memory Size: 128 MB Max Memory Used: 36 MB  \n2017-05-17T20:20:24.159Z 4008f77f-3b3e-11e7-ad79-0713f3bd7f4e Task timed out after 3.00 seconds\n</code></pre>\n\n<p>My debugging print statements indicate that the very first <code>pages_table.put_item()</code> is where the timeout happens since there is no subsequent print of the response. (I have a few elements in my Item array for testing)</p>\n\n<p>When I check my dynamodb table there is no data in the table, even days later.</p>\n\n<p>I think I have accurately followed all the steps in the AWS documentation for creating a dynamodb accessible via lambda (IAM permissions, dynamodb table keys, etc), but have been stumped when searching for other instances of similar experiences with timeouts. The closest things I can find references VPC configuration, but that doesn't seem to make sense for me with this essentially default setup from the tutorials since the tutorials didn't mention VPC setup. Also, when I dug into the VPC console the settings there appeared to be default.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1495053796, "post_id": 44034276, "comment_id": 75095544, "body": "What if you have consecutive rows that have <code>event</code> in the column?"}, {"owner": {"reputation": 151, "user_id": 5001426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daee6b1262d8ad435f1efd33859f4f38?s=128&d=identicon&r=PG", "display_name": "nathantspencer", "link": "https://stackoverflow.com/users/5001426/nathantspencer"}, "edited": false, "score": 0, "creation_date": 1495053817, "post_id": 44034276, "comment_id": 75095553, "body": "Have you considered the case in which the first row has an event? You&#39;ll try to replace it with the previous row, but the previous row doesn&#39;t exist."}, {"owner": {"reputation": 191, "user_id": 6287439, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/eHEU3.jpg?s=128&g=1", "display_name": "Valeria Lobos Ossand&#243;n", "link": "https://stackoverflow.com/users/6287439/valeria-lobos-ossand%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1495053887, "post_id": 44034276, "comment_id": 75095586, "body": "I&#39;m sure that the event never occurs in the first row and if the event is consecutive, it is replaced by the predecesor (if there are 10 consecutive rows, the 10 will have the same values of the previous row). But also, the event never occurs consecutive times."}], "answers": [{"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 2, "last_activity_date": 1495054038, "creation_date": 1495054038, "answer_id": 44034513, "question_id": 44034276, "link": "https://stackoverflow.com/questions/44034276/replace-an-entire-row-in-pandas-with-its-predecessor-python/44034513#44034513", "title": "Replace an Entire Row in Pandas with its Predecessor (Python)", "body": "<p>If you don't have consecutive rows that have <code>event</code> in the <code>event</code> column, and the index don't duplicate, you might do; Here use <code>shift</code> to move all rows by one towards the end, and modify the data frame when the event column contains <code>event</code>;</p>\n\n<pre><code>df.loc[df.event == 'event', ['x', 'y']] = df[['x', 'y']].shift()\n\ndf\n#                        x      y   event\n#0  20150622.172807.769815  382.0   \n#1  20150622.172807.769818  327.0   \n#2  20150622.172807.769818  327.0   event\n#3  20150622.172807.769836  342.0   \n#4  20150622.172807.769899  559.0   \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 191, "user_id": 6287439, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/eHEU3.jpg?s=128&g=1", "display_name": "Valeria Lobos Ossand&#243;n", "link": "https://stackoverflow.com/users/6287439/valeria-lobos-ossand%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1495054983, "post_id": 44034611, "comment_id": 75096098, "body": "Thank you for your answer! I tried it just like you proposed it, but it tells me this error: <code>Traceback (most recent call last):   File &quot;main.py&quot;, line 3, in &lt;module&gt; KeyError: 3</code>      ...."}], "tags": [], "owner": {"reputation": 182, "user_id": 7432022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459d54eb770e4967ec3c398a48b25d16?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Hingston", "link": "https://stackoverflow.com/users/7432022/patrick-hingston"}, "is_accepted": false, "score": 0, "last_activity_date": 1495054440, "creation_date": 1495054440, "answer_id": 44034611, "question_id": 44034276, "link": "https://stackoverflow.com/questions/44034276/replace-an-entire-row-in-pandas-with-its-predecessor-python/44034611#44034611", "title": "Replace an Entire Row in Pandas with its Predecessor (Python)", "body": "<p>I do not get that error when I run your code.  However, it seems as though your code only replaces the string <code>event</code>, not the whole row.  The following code (based off of yours) worked for me (including consecutive events):</p>\n\n<pre><code>    #creating sample df    \ndf = pd.DataFrame({'x': [1,2,3,4,5], 'y':[1,2,3,4,5],\n                 'event': ['NaN','NaN','event','event','NaN']})\n\n        for i, element in enumerate(df['event']):\n            if element == 'event':\n                df.ix[i]= df.ix[i-1]\n</code></pre>\n\n<p>this gives the following output:</p>\n\n<pre><code>  event  x  y\n0   NaN  1  1\n1   NaN  2  2\n2   NaN  2  2\n3   NaN  2  2\n4   NaN  5  5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 191, "user_id": 6287439, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/eHEU3.jpg?s=128&g=1", "display_name": "Valeria Lobos Ossand&#243;n", "link": "https://stackoverflow.com/users/6287439/valeria-lobos-ossand%c3%b3n"}, "is_accepted": true, "score": 2, "last_activity_date": 1495571660, "creation_date": 1495571660, "answer_id": 44144499, "question_id": 44034276, "link": "https://stackoverflow.com/questions/44034276/replace-an-entire-row-in-pandas-with-its-predecessor-python/44144499#44144499", "title": "Replace an Entire Row in Pandas with its Predecessor (Python)", "body": "<p>I found another way to change rows, that works perfectly when changing rows of some columns (not changing all columns, but some of them).</p>\n\n<p>Consider the same dataframe:</p>\n\n<pre><code>df\n#                        x      y   event\n0  20150622.172807.769815  382.0   \n1  20150622.172807.769818  327.0   \n2  20150622.172807.769825  399.0   event\n3  20150622.172807.769836  342.0   \n4  20150622.172807.769899  559.0   \n</code></pre>\n\n<p>Suppose that you only want to change \"y\" column with its predecesor. The result will be something like this:</p>\n\n<pre><code>df\n#                        x      y   event\n0  20150622.172807.769815  382.0   \n1  20150622.172807.769818  327.0   \n2  20150622.172807.769825  327.0   event\n3  20150622.172807.769836  342.0   \n4  20150622.172807.769899  559.0   \n</code></pre>\n\n<p>So, the best solution that I found is:</p>\n\n<pre><code>df['y'] = df['y'].where(df['event']!='event',df['y'].shift())\n</code></pre>\n\n<p>\"Where\" function is very helpful for those cases. Although is similar to .loc, for me it is more friendly the sintaxis of .where.</p>\n\n<p>Thank you all again for your help!</p>\n"}], "owner": {"reputation": 191, "user_id": 6287439, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/eHEU3.jpg?s=128&g=1", "display_name": "Valeria Lobos Ossand&#243;n", "link": "https://stackoverflow.com/users/6287439/valeria-lobos-ossand%c3%b3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 973, "favorite_count": 0, "accepted_answer_id": 44144499, "answer_count": 3, "score": 0, "last_activity_date": 1495571660, "creation_date": 1495053143, "last_edit_date": 1495059339, "question_id": 44034276, "link": "https://stackoverflow.com/questions/44034276/replace-an-entire-row-in-pandas-with-its-predecessor-python", "title": "Replace an Entire Row in Pandas with its Predecessor (Python)", "body": "<p>I have the following data:</p>\n\n<pre><code>x                         y   event\n20150622.172807.769815   382\n20150622.172807.769818   327\n20150622.172807.769825   399  event\n20150622.172807.769836   342\n...\n20150622.172807.769899   559\n</code></pre>\n\n<p>In the column \"event\", if there is an event, I want to replace the entire row with the value of the previous row, like this:</p>\n\n<pre><code>x                         y   event\n20150622.172807.769815   382\n20150622.172807.769818   327\n20150622.172807.769818   327\n20150622.172807.769836   342\n...\n20150622.172807.769899   559\n</code></pre>\n\n<p>My code is:</p>\n\n<pre><code>for i, element in enumerate(df['event']):\n    if element == 'event':\n        df.ix[i,'event']= df['event'][i-1]\n    else:\n        df.ix[i,'event']= df['event'][i]\n</code></pre>\n\n<p>However, it keeps telling me the following error:</p>\n\n<pre><code>KeyError: -1\n</code></pre>\n\n<p>What is wrong with the code?\nThank you all!!!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "edited": false, "score": 0, "creation_date": 1495053237, "post_id": 44034264, "comment_id": 75095262, "body": "Try rewriting your conditions as <code>if (first_choice == &quot;r&quot; or first_choice == &quot;R&quot;) and (second_choice == &quot;s&quot; or second_choice == &quot;S&quot;)</code>."}, {"owner": {"reputation": 1218, "user_id": 1805634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/680e995b608516c75735be7cd321c778?s=128&d=identicon&r=PG", "display_name": "sphere", "link": "https://stackoverflow.com/users/1805634/sphere"}, "edited": false, "score": 0, "creation_date": 1495053291, "post_id": 44034264, "comment_id": 75095292, "body": "I only had a quick look but you are comparing wrong. <code>(first_choice == &quot;r&quot; or &quot;R&quot;</code> is always true because of the <code>or &quot;R&quot;</code> check if string &quot;R&quot; is empty. Use <code>(first_choice == &quot;r&quot; or first_choice == &quot;R&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "is_accepted": false, "score": 1, "last_activity_date": 1495053291, "creation_date": 1495053291, "answer_id": 44034329, "question_id": 44034264, "link": "https://stackoverflow.com/questions/44034264/my-program-does-not-compare-the-two-variables-first-choice-and-second-choice/44034329#44034329", "title": "My program does not compare the two variables (first_choice and second_choice)", "body": "<p>You cannot do <code>if condition == value or another_value</code> in python. It will always be evaluated to True, since the <code>another_value</code> is non-empty for all of your cases.</p>\n\n<p>You will have to evaluate them separately: </p>\n\n<pre><code>if condition == value or condition == another_value:\n</code></pre>\n\n<p>another way is to use <code>in</code> operator: </p>\n\n<pre><code>if condition in {value, another_value}:\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2023, "user_id": 3079302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d65ce13ff3ebb67092cbc09b912b88d3?s=128&d=identicon&r=PG", "display_name": "iled", "link": "https://stackoverflow.com/users/3079302/iled"}, "edited": false, "score": 0, "creation_date": 1495054989, "post_id": 44034537, "comment_id": 75096099, "body": "Your code does not seem to be correct. Maybe you meant something like <code>first_choice in [&#39;r&#39;, &#39;R&#39;]</code> or <code>first_choise.lower() == &#39;r&#39;</code>. Idem for the second condition."}], "tags": [], "owner": {"reputation": 1, "user_id": 8027781, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/aa2452eb0b08a6a77b13b601df77b203?s=128&d=identicon&r=PG", "display_name": "user8027781", "link": "https://stackoverflow.com/users/8027781/user8027781"}, "is_accepted": false, "score": 0, "last_activity_date": 1495054104, "creation_date": 1495054104, "answer_id": 44034537, "question_id": 44034264, "link": "https://stackoverflow.com/questions/44034264/my-program-does-not-compare-the-two-variables-first-choice-and-second-choice/44034537#44034537", "title": "My program does not compare the two variables (first_choice and second_choice)", "body": "<p>Try wrapping your if/elif statements like this:</p>\n\n<blockquote>\n  <p>if ((first_choice == \"r\" or \"R\") and (second_choice == \"s\" or \"S\")):</p>\n</blockquote>\n\n<p>It has to due with order of evaluation in python and it is only validating your first operation.</p>\n"}], "owner": {"reputation": 1, "user_id": 8027591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/995b1ac5dbe00948369fc2c3fdc80dc0?s=128&d=identicon&r=PG&f=1", "display_name": "jefjames", "link": "https://stackoverflow.com/users/8027591/jefjames"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1495060170, "creation_date": 1495053112, "last_edit_date": 1495060170, "question_id": 44034264, "link": "https://stackoverflow.com/questions/44034264/my-program-does-not-compare-the-two-variables-first-choice-and-second-choice", "title": "My program does not compare the two variables (first_choice and second_choice)", "body": "<p>When ever I try to run and play the game, first_player (first_choice) always wins. After trying to figure it out I replace the first if statement with random print statement and it would print that every time. I don't understand what is wrong: </p>\n\n<pre><code>while True:\n\n    import os\n\n    print(\"Welcome to the rock, paper, sisers Game\")\n    first_player = input(\"Player 1 enter your name: \")\n    second_player = input(\"Player 2 enter your name: \")\n    print(\"Use p for paper, r for rock, and s for sisers\")\n    first_choice = str(input(\"{} Pick: \".format(first_player)))\n    os.system('cls' if os.name == 'nt' else 'clear')\n    second_choice = str(input(\"{} Pick: \".format(second_player)))\n    os.system('cls' if os.name == 'nt' else 'clear')\n\n    if (first_choice == \"r\" or \"R\") and (second_choice == \"s\" or \"S\"):\n        print(\"{} Won!!!!!\".format(first_player))\n\n    elif (second_choice == \"r\" or \"R\") and (first_choice == \"s\" or \"S\"):\n        print(\"{} Won!!!!!\".format(second_player))\n\n    elif first_choice == second_choice:\n        print(\"It is a draw\")\n\n    elif (second_choice == \"s\" or \"S\") and (first_choice == \"p\" or \"P\"):\n        print(\"{} Won!!!!!\".format(second_player))\n\n    elif (second_choice == \"p\" or \"P\") and (first_choice == \"s\" or \"S\"):\n        print(\"{} Won!!!!!\".format(first_player))\n\n    elif (second_choice == \"p\" or \"P\") and (first_choice == \"r\", \"R\"):\n        print(\"{} Won!!!!!\".format(second_player))\n\n    elif (second_choice == \"r\" or \"R\") and (first_choice == \"p\" or \"P\"):\n        print(\"{} Won!!!!!\".format(first_player))\n</code></pre>\n\n<p>Replace the first if statement print function:</p>\n\n<pre><code>while True:\n\n    import os\n\n    print(\"Welcome to the rock, paper, sisers Game\")\n    first_player = input(\"Player 1 enter your name: \")\n    second_player = input(\"Player 2 enter your name: \")\n    print(\"Use p for paper, r for rock, and s for sisers\")\n    first_choice = str(input(\"{} Pick: \".format(first_player)))\n    os.system('cls' if os.name == 'nt' else 'clear')\n    second_choice = str(input(\"{} Pick: \".format(second_player)))\n    os.system('cls' if os.name == 'nt' else 'clear')\n\n    if (first_choice == \"r\" or \"R\") and (second_choice == \"s\" or \"S\"):\n      print(\"useless random text\")\n\n    elif (second_choice == \"r\" or \"R\") and (first_choice == \"s\" or \"S\"):\n      print(\"{} Won!!!!!\".format(second_player))\n\n    elif first_choice == second_choice:\n      print(\"It is a draw\")\n\n    elif (second_choice == \"s\" or \"S\") and (first_choice == \"p\" or \"P\"):\n      print(\"{} Won!!!!!\".format(second_player))\n\n    elif (second_choice == \"p\" or \"P\") and (first_choice == \"s\" or \"S\"):\n      print(\"{} Won!!!!!\".format(first_player))\n\n    elif (second_choice == \"p\" or \"P\") and (first_choice == \"r\", \"R\"):\n      print(\"{} Won!!!!!\".format(second_player))\n\n    elif (second_choice == \"r\" or \"R\") and (first_choice == \"p\" or \"P\"):\n      print(\"{} Won!!!!!\".format(first_player))\n</code></pre>\n"}, {"tags": ["python", "cuda", "pycuda"], "answers": [{"tags": [], "owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "is_accepted": true, "score": 3, "last_activity_date": 1495095696, "creation_date": 1495095696, "answer_id": 44042307, "question_id": 44034221, "link": "https://stackoverflow.com/questions/44034221/is-it-a-bad-idea-to-swap-pycuda-deviceallocation-objects/44042307#44042307", "title": "Is it a bad idea to swap PyCuda DeviceAllocation objects?", "body": "<p>No, it isn't a bad idea, quite the opposite. Pointer object exchange in PyCUDA is fully supported and is generally the right thing to do.</p>\n\n<p>In general, most device to device copies in CUDA code are unnecessary and could be replace by pointer exchange. About the only time that doesn't work is when the device to device transfer only copies part of the source memory to the destination memory (or vice versa).</p>\n"}], "owner": {"reputation": 943, "user_id": 375556, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/71b7c806c3f630c452b6eb5db0143a31?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/375556/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 44042307, "answer_count": 1, "score": 1, "last_activity_date": 1495095696, "creation_date": 1495052987, "question_id": 44034221, "link": "https://stackoverflow.com/questions/44034221/is-it-a-bad-idea-to-swap-pycuda-deviceallocation-objects", "title": "Is it a bad idea to swap PyCuda DeviceAllocation objects?", "body": "<p>Let's say we allocated the same amount of memory on the device using two calls like so:</p>\n\n<pre><code>pointerA = cuda_driver.mem_alloc(myArray.nbytes)\npointerB = cuda_driver.mem_alloc(myArray.nbytes)\n</code></pre>\n\n<p>Then we copy the same data onto the device for both DeviceAllocation objects.</p>\n\n<pre><code>cuda_driver.memcpy_htod(pointerA, myArray)\ncuda_driver.memcpy_htod(pointerB, myArray)\n</code></pre>\n\n<p>Is it a bad idea to then swap the two DeviceAllocation objects? For example they could be swapped like this:</p>\n\n<pre><code>tempPointer = pointerA\npointerA = pointerB\npointerB = tempPointer\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7481580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3xzNy.jpg?s=128&g=1", "display_name": "Tvanderb", "link": "https://stackoverflow.com/users/7481580/tvanderb"}, "edited": false, "score": 0, "creation_date": 1495313771, "post_id": 44034280, "comment_id": 75203061, "body": "Yes it did. I wanted to write the file and the user input so that it would just add the text I figured it out in my second edit."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1495053153, "creation_date": 1495053153, "answer_id": 44034280, "question_id": 44034197, "link": "https://stackoverflow.com/questions/44034197/variables-to-text-files/44034280#44034280", "title": "Variables To Text Files", "body": "<p>First, you haven't used the <code>io</code> and <code>string</code> packages at all; you can remove those lines.</p>\n\n<p>Second, you're trying to write a file descriptor into the output file.  Perhaps you mean</p>\n\n<pre><code>with open('File2.txt', 'w') as x:\n   x.write(text + '\\n')\n</code></pre>\n\n<p>Do those help your confusion?</p>\n"}, {"comments": [{"owner": {"reputation": 6027, "user_id": 7738328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84d6eb24cbea7d5c8d4bdab21dd3d232?s=128&d=identicon&r=PG&f=1", "display_name": "JohanL", "link": "https://stackoverflow.com/users/7738328/johanl"}, "edited": false, "score": 0, "creation_date": 1495053236, "post_id": 44034282, "comment_id": 75095261, "body": "Using <code>with open</code> means you should <i>not</i> close the file afterwards. That is handled automatically."}], "tags": [], "owner": {"reputation": 2123, "user_id": 7904315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af1e59815b9d4466a8c1527486380128?s=128&d=identicon&r=PG&f=1", "display_name": "vencaslac", "link": "https://stackoverflow.com/users/7904315/vencaslac"}, "is_accepted": false, "score": 0, "last_activity_date": 1495053282, "last_edit_date": 1495053282, "creation_date": 1495053158, "answer_id": 44034282, "question_id": 44034197, "link": "https://stackoverflow.com/questions/44034197/variables-to-text-files/44034282#44034282", "title": "Variables To Text Files", "body": "<p>you can do this with the standard library very easily like so:</p>\n\n<pre><code>text_to_write=input('Type text here:')\nwith open('myfile.txt','w') as file:\n     file.write(text+'\\n')\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7481580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3xzNy.jpg?s=128&g=1", "display_name": "Tvanderb", "link": "https://stackoverflow.com/users/7481580/tvanderb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495313902, "creation_date": 1495052906, "last_edit_date": 1495313902, "question_id": 44034197, "link": "https://stackoverflow.com/questions/44034197/variables-to-text-files", "title": "Variables To Text Files", "body": "<p>I'm really new to Python and I am trying to write to a text file with user input, I'm getting this error:</p>\n\n<pre><code>    Traceback (most recent call last):\n  File \"C:/Users/Tvanderb/PycharmProjects/Text Files/Add Writing.py\", line 3, in &lt;module&gt;\n    import _io.TextIOWrapper\nModuleNotFoundError: No module named '_io.TextIOWrapper'; '_io' is not a package\n</code></pre>\n\n<p>I have tried importing <code>_io.TextIOWrapper</code> and <code>_string</code> but it doesn't do anything. What I mean by user input is I ask for a string of text then I put it into a  variable and write the variable to a text file.\nHere's my code:</p>\n\n<pre><code>text = input(\"Enter Text: \")\n\n\nwith open('File2.txt', 'w') as x:\n\n   file_contents = text;\n\n   x.write(x + '\\n')\n\n   #print(x, file=x)\n   #print(\"\\n\", file=x)\n   #print(file_contents, file=x)\n</code></pre>\n\n<p>I just found out how to do what I wanted to do:</p>\n\n<pre><code>text = input(\"Enter Text: \")\n\n\nwith open('File2.txt', 'r') as x:\n     file = x.read()\n\nwith open('File2.txt', 'w') as x:\n   if file == '':\n      x.write(text)\n\n   else:\n      x.write(file + '\\n')\n      x.write(text)\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "image-processing", "python-imaging-library"], "answers": [{"tags": [], "owner": {"reputation": 671, "user_id": 8022336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VsZUw.png?s=128&g=1", "display_name": "pointerless", "link": "https://stackoverflow.com/users/8022336/pointerless"}, "is_accepted": false, "score": 1, "last_activity_date": 1495053002, "creation_date": 1495053002, "answer_id": 44034225, "question_id": 44034184, "link": "https://stackoverflow.com/questions/44034184/how-to-read-an-image-name-with-pil/44034225#44034225", "title": "How to read an image name with PIL", "body": "<p>Not totally clear on the surrounding code but surely splitting the path string and taking the final element?\nLike:</p>\n\n<pre><code>filename = path.split(\"/\")[len(path.split(\"/\")-1]\nfilenames.append(filename)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 470, "user_id": 4174973, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QluoV.jpg?s=128&g=1", "display_name": "Zailef", "link": "https://stackoverflow.com/users/4174973/zailef"}, "is_accepted": true, "score": 1, "last_activity_date": 1496059896, "last_edit_date": 1496059896, "creation_date": 1495053256, "answer_id": 44034313, "question_id": 44034184, "link": "https://stackoverflow.com/questions/44034184/how-to-read-an-image-name-with-pil/44034313#44034313", "title": "How to read an image name with PIL", "body": "<p>The following snippet will take all files in from the directory specified by the path variable and put them in the images list so long as they end with '.jpg'. You can then iterate over the images list and do whatever you like with them.</p>\n\n<pre><code>import os\nfrom PIL import Image\n\npath = 'the path to your image directory'\n# Store the image file names in a list as long as they are jpgs\nimages = [f for f in os.listdir(path) if os.path.splitext(f)[-1] == '.jpg']\n\nfor image in images:\n    Image.open(image)\n    # Do whatever you need to do with the image\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7314222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7299, "favorite_count": 1, "accepted_answer_id": 44034313, "answer_count": 2, "score": 0, "last_activity_date": 1496059896, "creation_date": 1495052798, "last_edit_date": 1495080570, "question_id": 44034184, "link": "https://stackoverflow.com/questions/44034184/how-to-read-an-image-name-with-pil", "title": "How to read an image name with PIL", "body": "<p>I'm going to open some image:</p>\n\n<p>image = Image.open(path)</p>\n\n<p>And now I want to store their names in a variable so I can use them later, how can I do this?</p>\n\n<p>The idea is to create a loop:</p>\n\n<pre><code>for i in range (0,20) # I have 20 images\n</code></pre>\n\n<p>And from there we can create a condition:</p>\n\n<pre><code>if variable_containing_image_name == 'something*.jpg'\n\nelse:\n</code></pre>\n\n<p>P.S.: I'm using:</p>\n\n<pre><code>from PIL import Image\nimport glob, os\nimport numpy as np\n</code></pre>\n"}, {"tags": ["python", "sqlalchemy", "flask-sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 1236, "user_id": 4750577, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/35005349/picture?type=large", "display_name": "Anekdotin", "link": "https://stackoverflow.com/users/4750577/anekdotin"}, "edited": false, "score": 0, "creation_date": 1495053763, "post_id": 44034423, "comment_id": 75095522, "body": "Worked ty! I was close but looking up top."}], "tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": true, "score": 3, "last_activity_date": 1495053665, "creation_date": 1495053665, "answer_id": 44034423, "question_id": 44034177, "link": "https://stackoverflow.com/questions/44034177/python-sqlalchemy-counting-duplicate-results-in-query/44034423#44034423", "title": "Python Sqlalchemy counting duplicate results in query", "body": "<p>You should be grouping by <code>Subcategory.subname1</code>: </p>\n\n<pre><code>allcategory =  db.session.query(func.count(marketItem.subcategory).label(\"help\"),\n                                Subcategories.subname1)\nallcategory = allcategory.join(Subcategories)\nallcategory = allcategory.filter(marketItem.subcategory==Subcategories.id)\nallcategory = allcategory.filter(marketItem.vendor_id==vendorprofile.id)\nallcategory = allcategory.group_by(Sucategories.subname1) # &lt; change here\nfor allcat in allcategory.all():\n    print(allcat)\n</code></pre>\n\n<p>In SQL you must group by the fields that are not being aggregated -- in this case <code>Subcategories.subname1</code>.</p>\n"}], "owner": {"reputation": 1236, "user_id": 4750577, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/35005349/picture?type=large", "display_name": "Anekdotin", "link": "https://stackoverflow.com/users/4750577/anekdotin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "accepted_answer_id": 44034423, "answer_count": 1, "score": 2, "last_activity_date": 1495053665, "creation_date": 1495052747, "question_id": 44034177, "link": "https://stackoverflow.com/questions/44034177/python-sqlalchemy-counting-duplicate-results-in-query", "title": "Python Sqlalchemy counting duplicate results in query", "body": "<p>I have a query </p>\n\n<pre><code>allcategory =  db.session.query(func.count(marketItem.subcategory).label(\"help\"),Subcategories.subname1)\nallcategory = allcategory.join(Subcategories)\nallcategory = allcategory.filter(marketItem.subcategory == Subcategories.id)\nallcategory = allcategory.filter(marketItem.vendor_id==vendorprofile.id)\nallcategory = allcategory.group_by(marketItem.id)\nfor allcat in allcategory.all():\n    print(allcat)\n</code></pre>\n\n<p>thats outputs the results as</p>\n\n<pre><code>(1, 'Consoles')\n(1, 'Consoles')\n(1, 'Paintings')\n(1, 'Paintings')\n(1, 'Paintings')\n</code></pre>\n\n<p>I would like them to be</p>\n\n<pre><code>(2, 'Consoles')\n(3, 'Paintings')\n</code></pre>\n\n<p>If it could also be explained in regular sql terms, that would help as well.</p>\n"}, {"tags": ["javascript", "python", "html", "json"], "comments": [{"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 1, "creation_date": 1495052588, "post_id": 44034100, "comment_id": 75094948, "body": "look for some examples using <a href=\"http://flask.pocoo.org/\" rel=\"nofollow noreferrer\">flask</a>"}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1495052729, "post_id": 44034100, "comment_id": 75095022, "body": "Do you need the user&#39;s response to be computed on the server hosting the page? or can you implement whatever algorithm you apply to their data in the web page, and let their computer do the heavy lifting?"}, {"owner": {"reputation": 879, "user_id": 4753072, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/1056861254343164/picture?type=large", "display_name": "Jacob Macallan", "link": "https://stackoverflow.com/users/4753072/jacob-macallan"}, "reply_to_user": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1495053031, "post_id": 44034100, "comment_id": 75095170, "body": "@Aaron I believe what my internship wants is for it to run as a backend system. I don&#39;t know exactly what they plan on doing since they were a little vague, but it does seem like it will compute server side."}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1495053301, "post_id": 44034100, "comment_id": 75095298, "body": "Javascript is sent to the client to be executed by their browser (for event driven interfaces, computation, and display graphics more advanced than css or html can handle). html and css generally handle the text, links, images, and forms (simple stuff). A very simple proof of concept would be an html form, and a server built on flask that takes the values entered in the form, and generates a response html page (flask uses a pretty good html template engine)."}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1495053432, "post_id": 44034100, "comment_id": 75095375, "body": "<a href=\"https://pythonspot.com/en/flask-web-app-with-python/\" rel=\"nofollow noreferrer\">pythonspot</a> seems to have a pretty decent beginner&#39;s tutorial for flask, but definitely do some of your own google-fu."}, {"owner": {"reputation": 879, "user_id": 4753072, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/1056861254343164/picture?type=large", "display_name": "Jacob Macallan", "link": "https://stackoverflow.com/users/4753072/jacob-macallan"}, "reply_to_user": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1495054013, "post_id": 44034100, "comment_id": 75095647, "body": "@Aaron Thank you! And will the response HTML page be a good thing to print out considering my results are of a json.dump format?"}, {"owner": {"reputation": 266, "user_id": 3817761, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/547014968c2f18b4635a30be30be28b7?s=128&d=identicon&r=PG&f=1", "display_name": "Barnabus", "link": "https://stackoverflow.com/users/3817761/barnabus"}, "edited": false, "score": 0, "creation_date": 1495062334, "post_id": 44034100, "comment_id": 75098829, "body": "If you just need to return a json response, flask can do that too <a href=\"https://blog.miguelgrinberg.com/post/designing-a-restful-api-with-python-and-flask\" rel=\"nofollow noreferrer\">blog.miguelgrinberg.com/post/&hellip;</a>"}], "owner": {"reputation": 879, "user_id": 4753072, "user_type": "registered", "accept_rate": 53, "profile_image": "https://graph.facebook.com/1056861254343164/picture?type=large", "display_name": "Jacob Macallan", "link": "https://stackoverflow.com/users/4753072/jacob-macallan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495052395, "creation_date": 1495052395, "question_id": 44034100, "link": "https://stackoverflow.com/questions/44034100/python-input-and-show-results-on-web-page", "title": "Python - Input and Show Results on Web Page", "body": "<p>I recently started an internship and have been doing relatively well with what they've been giving me; recently however, they gave me a two part task of getting some code to accept an input and return the output while communicating through a web page (I have 0 web experience). I believe I was assigned the extra web portion as a little challenge to start getting me to familiarize myself with interacting with web code.</p>\n\n<p>I was able to write the processing part in Python, where it accepts a string input and returns a json.dump.</p>\n\n<p>This is most likely too vast of a question to expect a specific answer, so if so can anyone point me to a book or some website that may have the steps to solving this issue?</p>\n\n<p><strong>Steps taken so far</strong></p>\n\n<ul>\n<li>Json output in python file (this was part of an API I was using that when called on automatically generated a Json.dump). I'm not allowed to alter this output.</li>\n<li>Did some research on trying to get Python output to a webpage. Imported CGI and got it working.</li>\n</ul>\n\n<p><strong>Overall Goal</strong></p>\n\n<p>Pass input in from a webpage input to the Python file where it will process the input and return a json.dump with results. I can try to learn how to lay all of the results out on a web page later. Looking for some quick instructions or even a book I can sit down and read for several hours.</p>\n\n<p><strong>Side Notes</strong></p>\n\n<p>I have virtually 0 knowledge of web development. This task seems easy enough, but I just don't know how things mesh together on a web side. From what I know JavaScript is used commonly in conjunction with HTML on development. Is there any way Python can fit into this? </p>\n"}, {"tags": ["python", "sql", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 18353, "user_id": 337315, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/vNdBR.jpg?s=128&g=1", "display_name": "CodeLikeBeaker", "link": "https://stackoverflow.com/users/337315/codelikebeaker"}, "is_accepted": false, "score": 3, "last_activity_date": 1495052935, "creation_date": 1495052935, "answer_id": 44034204, "question_id": 44034077, "link": "https://stackoverflow.com/questions/44034077/python-variables-in-sql-update-query/44034204#44034204", "title": "Python variables in SQL Update query", "body": "<p>According to the sqlite <a href=\"https://docs.python.org/2/library/sqlite3.html\" rel=\"nofollow noreferrer\">documentation</a> you want to use ? for your variable. Example:</p>\n\n<p>cur.execute(\"\"\"update table1 set column1=? where column2=?\"\"\", (var1, var2))</p>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 14454151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3qLL.png?s=128&g=1", "display_name": "Herker", "link": "https://stackoverflow.com/users/14454151/herker"}, "is_accepted": false, "score": 0, "last_activity_date": 1615825264, "creation_date": 1615825264, "answer_id": 66641770, "question_id": 44034077, "link": "https://stackoverflow.com/questions/44034077/python-variables-in-sql-update-query/66641770#66641770", "title": "Python variables in SQL Update query", "body": "<p>This worked for me</p>\n<pre><code>mycursor.execute(&quot;UPDATE table SET column WHERE name = '%s' AND age = %s&quot; % (&quot;Alex&quot;, 30) \n</code></pre>\n<p>When passing in a string.</p>\n<blockquote>\n<p>Use quotes</p>\n</blockquote>\n<p>And at the end of the execute statement, use</p>\n<blockquote>\n<p>%</p>\n</blockquote>\n<p>Keep in mind that if you will pass multiple variables you have to put them inside a tuple</p>\n<p><em><strong>Took me a long time just to understand that you have to have the % at the end when writing an UPDATE query</strong></em></p>\n"}], "owner": {"reputation": 434, "user_id": 7327911, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c5145eaed87b7d8085486c8c89b69a3?s=128&d=identicon&r=PG&f=1", "display_name": "Theo.Fanis", "link": "https://stackoverflow.com/users/7327911/theo-fanis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4179, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1615825264, "creation_date": 1495052293, "question_id": 44034077, "link": "https://stackoverflow.com/questions/44034077/python-variables-in-sql-update-query", "title": "Python variables in SQL Update query", "body": "<p>I'm very new to Python and I'm facing a problem with Python-SQLite connection.</p>\n\n<pre><code>con=connection()\ncur=con.cursor()\ncur.execute(\"\"\"UPDATE table1 SET column1=%s WHERE column2=%d\"\"\",(var1,var2))\nif(cur.rowcount &gt; 1):\n    cur.commit()\nelse:\n    return[\"Error\"]\n</code></pre>\n\n<p>Where <code>var1</code> stores a string, and <code>var2</code> stores an integer.</p>\n\n<p>The error is the following:</p>\n\n<blockquote>\n  <p>SQLError('SQLError: near \"%\": syntax error',)</p>\n</blockquote>\n\n<p>I've read plenty of tutorials and threads in here about how to write my query with the variables and I'm in a dead end.</p>\n"}, {"tags": ["python", "numpy", "matplotlib", "plot", "librosa"], "comments": [{"owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1495052640, "post_id": 44034062, "comment_id": 75094974, "body": "are you plotting the 30x30 using <code>plot</code> or <code>imshow</code> or what? it is not clear to me what you are asking. Do you have some sample code?"}, {"owner": {"reputation": 801, "user_id": 6614288, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8c48be2d852e63b8a6b50d3c0a2a2c48?s=128&d=identicon&r=PG&f=1", "display_name": "J.Down", "link": "https://stackoverflow.com/users/6614288/j-down"}, "reply_to_user": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1495052796, "post_id": 44034062, "comment_id": 75095054, "body": "hopes it helps.."}, {"owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1495053167, "post_id": 44034062, "comment_id": 75095228, "body": "Well, not sure if I get the question, but I will give an answer. With <code>pcolormesh</code>, you need to specify the x, y coordinates, as such: <code>plt.pcolormesh(x,y,z)</code>. Each of x, y, z are 30x30 meshes. If in your code you only specify the color values as in <code>plt.pcolormesh(z)</code>, then the x and y are automatically set to be a integer coordinates from 0 to 29."}, {"owner": {"reputation": 801, "user_id": 6614288, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8c48be2d852e63b8a6b50d3c0a2a2c48?s=128&d=identicon&r=PG&f=1", "display_name": "J.Down", "link": "https://stackoverflow.com/users/6614288/j-down"}, "reply_to_user": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1495054024, "post_id": 44034062, "comment_id": 75095653, "body": "added an example."}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1495054167, "post_id": 44034062, "comment_id": 75095729, "body": "how do we know what figure-sizing parameters and plotting methods <code>librosa</code> used?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1495091833, "post_id": 44034062, "comment_id": 75108027, "body": "You need to include a clear problem description. What would you like to achieve, what do you get and in how far does it not meet your expectations?"}], "answers": [{"comments": [{"owner": {"reputation": 801, "user_id": 6614288, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8c48be2d852e63b8a6b50d3c0a2a2c48?s=128&d=identicon&r=PG&f=1", "display_name": "J.Down", "link": "https://stackoverflow.com/users/6614288/j-down"}, "edited": false, "score": 0, "creation_date": 1495077309, "post_id": 44034597, "comment_id": 75102334, "body": "Yes... But if I stored this plot as a figure,  how do i using the new defined figure extract datapoint row 0 column 0.."}], "tags": [], "owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "is_accepted": false, "score": 0, "last_activity_date": 1495054378, "creation_date": 1495054378, "answer_id": 44034597, "question_id": 44034062, "link": "https://stackoverflow.com/questions/44034062/how-does-matplotlib-adjust-plot-to-figure-size/44034597#44034597", "title": "How does `matplotlib` adjust plot to figure size?", "body": "<p>You need to define another figure with its own size for the second figure.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib\nfrom PIL import Image\nimport librosa\nimport librosa.display\nfrom matplotlib import cm\n\n\nfig = plt.figure(figsize=(12,4))\nmin = -1.828067\nmax = 22.70058\ndata =  np.random.uniform(low=min, high=max, size=(474,40))\nlibrosa.display.specshow(data.T,sr=16000,x_axis='frames',y_axis='mel',hop_length=160,cmap=cm.jet)\nplt.show()\nraw_input(\"sadas\")\n\nconvert = plt.get_cmap(cm.jet)\nnumpy_output_static = convert(data.T)\n\nfig = plt.figure(figsize=(12,4))\nplt.imshow(numpy_output_static, aspect = 'auto')\nplt.show()\nraw_input(\"asds\")\n</code></pre>\n"}], "owner": {"reputation": 801, "user_id": 6614288, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8c48be2d852e63b8a6b50d3c0a2a2c48?s=128&d=identicon&r=PG&f=1", "display_name": "J.Down", "link": "https://stackoverflow.com/users/6614288/j-down"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1645, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1495096190, "creation_date": 1495052215, "last_edit_date": 1495096190, "question_id": 44034062, "link": "https://stackoverflow.com/questions/44034062/how-does-matplotlib-adjust-plot-to-figure-size", "title": "How does `matplotlib` adjust plot to figure size?", "body": "<p>How does <code>matplotlib</code> ensure that a dataset can be within plot with specified size. </p>\n\n<p>How do i from a plot stored as numpy, How do i read the color of the pixels illustration a datapoint (0,4) -  in the plot. </p>\n\n<p>example:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib\nfrom PIL import Image\nimport librosa\nimport librosa.display\nfrom matplotlib import cm\n\n\nfig = plt.figure(figsize=(12,4))\nmin = -1.828067\nmax = 22.70058\ndata =  np.random.uniform(low=min, high=max, size=(474,40))\nlibrosa.display.specshow(data.T,sr=16000,x_axis='frames',y_axis='mel',hop_length=160,cmap=cm.jet)\nplt.show()\nraw_input(\"sadas\")\n\nconvert = plt.get_cmap(cm.jet)\nnumpy_output_static = convert(data.T)\nplt.imshow(numpy_output_static, aspect = 'auto')\nplt.show()\nraw_input(\"asds\")\n</code></pre>\n\n<p>First plot being : </p>\n\n<p><a href=\"https://i.stack.imgur.com/GROH8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GROH8.png\" alt=\"enter image description here\"></a></p>\n\n<p>Second plot being:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jxw6M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jxw6M.png\" alt=\"enter image description here\"></a></p>\n\n<p>so the first has been resized to plot size 12,4 where the last basically plots the same data but just using the data shape as size... how do i change that?</p>\n\n<p>Librosa just performs pcolormesh according to the <a href=\"https://github.com/librosa/librosa/blob/183796037d79e98b1b20003d6a58fb34bb610ec0/librosa/display.py#L678\" rel=\"nofollow noreferrer\">GitHub source code</a></p>\n"}, {"tags": ["python", "regex", "xml"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1495052371, "post_id": 44034052, "comment_id": 75094842, "body": "Use a parser, e.g. <code>lxml</code>."}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 1346314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01852c79b21bfb66b903e37e95740b6a?s=128&d=identicon&r=PG", "display_name": "Start", "link": "https://stackoverflow.com/users/1346314/start"}, "edited": false, "score": 0, "creation_date": 1495053113, "post_id": 44034110, "comment_id": 75095208, "body": "Thanks, Now after doing that all my row vanished with &quot;New Text&quot;, is there a way to provide regex that will replace only the text between the tags ? &lt;ws:genericAction&gt;SET_STATUS&lt;/ws:genericAction&gt;"}, {"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "reply_to_user": {"reputation": 159, "user_id": 1346314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01852c79b21bfb66b903e37e95740b6a?s=128&d=identicon&r=PG", "display_name": "Start", "link": "https://stackoverflow.com/users/1346314/start"}, "edited": false, "score": 0, "creation_date": 1495053498, "post_id": 44034110, "comment_id": 75095401, "body": "@Start, it should become <code>&lt;ws:genericAction&gt;New text&lt;&#47;ws:genericAction&gt;</code>, right?"}, {"owner": {"reputation": 159, "user_id": 1346314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01852c79b21bfb66b903e37e95740b6a?s=128&d=identicon&r=PG", "display_name": "Start", "link": "https://stackoverflow.com/users/1346314/start"}, "edited": false, "score": 0, "creation_date": 1495053593, "post_id": 44034110, "comment_id": 75095440, "body": "Yes, exactly what I&#39;m trying to achieve"}, {"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "reply_to_user": {"reputation": 159, "user_id": 1346314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01852c79b21bfb66b903e37e95740b6a?s=128&d=identicon&r=PG", "display_name": "Start", "link": "https://stackoverflow.com/users/1346314/start"}, "edited": false, "score": 0, "creation_date": 1495053794, "post_id": 44034110, "comment_id": 75095542, "body": "@Start, ok, to replace simple text between tags <code>&lt;ws:genericAction&gt;</code> - use my update. But using xml parsers is much better for manipulating xml documents"}, {"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "reply_to_user": {"reputation": 159, "user_id": 1346314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01852c79b21bfb66b903e37e95740b6a?s=128&d=identicon&r=PG", "display_name": "Start", "link": "https://stackoverflow.com/users/1346314/start"}, "edited": false, "score": 0, "creation_date": 1495054124, "post_id": 44034110, "comment_id": 75095703, "body": "@Start, in my answer. Check it"}], "tags": [], "owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "is_accepted": true, "score": 1, "last_activity_date": 1495053755, "last_edit_date": 1495053755, "creation_date": 1495052445, "answer_id": 44034110, "question_id": 44034052, "link": "https://stackoverflow.com/questions/44034052/python-update-xml-value-between-2-nodes-with-regex-re-sub-not-working/44034110#44034110", "title": "Python - update xml value between 2 nodes with regex - re.sub not working", "body": "<p><code>re.sub()</code> doesn't modify a string <em>in place</em>, it returns the string after replacement:</p>\n\n<pre><code>filedata = re.sub(r'(&lt;ws:genericAction&gt;)([^&lt;&gt;]+)(?=&lt;\\/ws:genericAction&gt;)', \"\\\\1New Text\", filedata, flags=re.IGNORECASE)\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3/library/re.html#re.sub\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/re.html#re.sub</a></p>\n"}, {"comments": [{"owner": {"reputation": 159, "user_id": 1346314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01852c79b21bfb66b903e37e95740b6a?s=128&d=identicon&r=PG", "display_name": "Start", "link": "https://stackoverflow.com/users/1346314/start"}, "edited": false, "score": 0, "creation_date": 1495053791, "post_id": 44034387, "comment_id": 75095540, "body": "The problem with this solving is that if I want to give it another parameter after first iteration it will not be found, this is because he looks only for [text()=&#39;SET_STATUS&#39;] , this is the reason regex to the wrapping text is more efficient."}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "reply_to_user": {"reputation": 159, "user_id": 1346314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01852c79b21bfb66b903e37e95740b6a?s=128&d=identicon&r=PG", "display_name": "Start", "link": "https://stackoverflow.com/users/1346314/start"}, "edited": false, "score": 0, "creation_date": 1495053905, "post_id": 44034387, "comment_id": 75095595, "body": "@Start: I doubt that a regular expression alone is &quot;more efficient&quot;. You may very well use a regular expression in <i>combination</i> with <code>lxml</code>."}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1495053538, "creation_date": 1495053538, "answer_id": 44034387, "question_id": 44034052, "link": "https://stackoverflow.com/questions/44034052/python-update-xml-value-between-2-nodes-with-regex-re-sub-not-working/44034387#44034387", "title": "Python - update xml value between 2 nodes with regex - re.sub not working", "body": "<p>A solution with a parser:</p>\n\n<pre><code>from lxml import etree\n\n# our test string\nxml = '''&lt;root xmlns:ws=\"http://example.com\"&gt;\n            &lt;ws:genericAction&gt;SET_STATUS&lt;/ws:genericAction&gt;\n        &lt;/root&gt;'''\n\n# the dom\nroot = etree.fromstring(xml)\n\n# our item(s) as an xpath expression\nitem = root.xpath(\".//ws:genericAction[text()='SET_STATUS']\", namespaces = {'ws': 'http://example.com'})\n\n# modify the first one\nitem[0].text = \"Something new here\"\n\n# print the new dom\netree.tostring(root, pretty_print=True)\n</code></pre>\n\n<p>This yields</p>\n\n<pre><code>b'&lt;root xmlns:ws=\"http://example.com\"&gt;\n      &lt;ws:genericAction&gt;Something new here&lt;/ws:genericAction&gt;\n  &lt;/root&gt;'\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 1346314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01852c79b21bfb66b903e37e95740b6a?s=128&d=identicon&r=PG", "display_name": "Start", "link": "https://stackoverflow.com/users/1346314/start"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "accepted_answer_id": 44034110, "answer_count": 2, "score": 1, "last_activity_date": 1495053755, "creation_date": 1495052154, "question_id": 44034052, "link": "https://stackoverflow.com/questions/44034052/python-update-xml-value-between-2-nodes-with-regex-re-sub-not-working", "title": "Python - update xml value between 2 nodes with regex - re.sub not working", "body": "<p>I want to change value between 2 xml nodes - SET_STATUS\nfiledata is the text that this xml row exist in.</p>\n\n<pre><code>&lt;ws:genericAction&gt;SET_STATUS&lt;/ws:genericAction&gt;\n</code></pre>\n\n<p>For that wrote the regex : </p>\n\n<pre><code>re.sub(r'&lt;\\/ws:genericAction&gt;\\s*(.*)(?=\\n&lt;\\/ws:genericAction&gt;)', \"New Text\", filedata, flags=re.IGNORECASE)\n</code></pre>\n\n<p>all the program : </p>\n\n<pre><code>with open(\"createUser.txt\", 'r') as file:\n    filedata = file.read()\nre.sub(r'&lt;\\/ws:genericAction&gt;\\s*(.*)(?=\\n&lt;\\/ws:genericAction&gt;)', \"New Text\", filedata, flags=re.IGNORECASE)\nwith open(\"createUser.txt\", 'w') as file:\n    file.write(filedata)\n</code></pre>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["python", "regex", "capturing-group"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 1, "creation_date": 1495052207, "post_id": 44034016, "comment_id": 75094755, "body": "Your <a href=\"https://regex101.com/r/wHgZNz/1\" rel=\"nofollow noreferrer\"><b>expression works</b></a> - just put the modifier outside of the expression or use <a href=\"https://regex101.com/r/wHgZNz/2\" rel=\"nofollow noreferrer\"><b><code>(?i)p\\w+@t(?:-)?\\w+(?:-\\w+)?(?:\\.\\w+)?\\.at</code></b></a>"}], "answers": [{"comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1495052349, "post_id": 44034065, "comment_id": 75094829, "body": "This is included in the very first section of the &quot;EXPLANATION&quot; pane when you paste your original expression into regex101, the site you mentioned: &quot;(?i) match the remainder of the pattern with the following effective flags: gi i modifier: insensitive. Case insensitive match (ignores case of [a-zA-Z])&quot;"}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 1, "creation_date": 1495053491, "post_id": 44034065, "comment_id": 75095397, "body": "For the fish +1 ;-)"}], "tags": [], "owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "is_accepted": true, "score": 5, "last_activity_date": 1495052234, "creation_date": 1495052234, "answer_id": 44034065, "question_id": 44034016, "link": "https://stackoverflow.com/questions/44034016/regex-get-rid-of-capturing-groups/44034065#44034065", "title": "regex get rid of capturing groups", "body": "<p>The first \"group\", <code>(?i)</code>, is not a capturing group, it's a flag set, turning on case-insensitivity for the expression. The non-capturing version should be:</p>\n\n<pre><code>(?i)p\\w+@t-?\\w+(?:-\\w+)?(?:\\.\\w+)?\\.at\n</code></pre>\n\n<p>Which matches correctly.</p>\n"}, {"comments": [{"owner": {"reputation": 32095, "user_id": 7426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a562698800b535e47b68590f63c402a?s=128&d=identicon&r=PG", "display_name": "Adrian", "link": "https://stackoverflow.com/users/7426/adrian"}, "edited": false, "score": 0, "creation_date": 1495052504, "post_id": 44034080, "comment_id": 75094909, "body": "No explanation of why this works and the original does not?"}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1495053103, "last_edit_date": 1495053103, "creation_date": 1495052300, "answer_id": 44034080, "question_id": 44034016, "link": "https://stackoverflow.com/questions/44034016/regex-get-rid-of-capturing-groups/44034080#44034080", "title": "regex get rid of capturing groups", "body": "<p>You may use</p>\n\n<pre><code>(?i)p\\w+@t(?:-)?\\w+(?:-\\w+)?(?:\\.\\w+)?\\.at\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/wHgZNz/2/\" rel=\"nofollow noreferrer\"><strong>a demo on regex101.com</strong></a>.<br>\nAs pointed out by others, the <code>(?i)</code> is an inline modifier as is <code>(?s)</code> (singleline) or <code>(?m)</code> (multiline).</p>\n"}], "owner": {"reputation": 13608, "user_id": 2587904, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/31ZTY.jpg?s=128&g=1", "display_name": "Georg Heiler", "link": "https://stackoverflow.com/users/2587904/georg-heiler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 44034065, "answer_count": 2, "score": 2, "last_activity_date": 1495053103, "creation_date": 1495052010, "question_id": 44034016, "link": "https://stackoverflow.com/questions/44034016/regex-get-rid-of-capturing-groups", "title": "regex get rid of capturing groups", "body": "<p>I have the following regex:\n<code>(?i)p\\w+@t(-)?\\w+(-\\w+)?(\\.\\w+)?\\.at</code> which is matching data like</p>\n\n<pre><code>papFoo@t-bar.at\nPapBar@tfoo.ring.at\n</code></pre>\n\n<p>How can I rewrite this regex to use <strong>non-captchuring</strong> groups?</p>\n\n<ul>\n<li><code>[?i]p\\w+@t[-]?\\w+[-\\w+]?[\\.\\w+]?\\.at</code> will no longer match any results</li>\n<li><code>(?:?i)p\\w+@t(?:-)?\\w+(?:-\\w+)?(?:\\.\\w+)?\\.at</code> same here</li>\n</ul>\n\n<p>I.e. <code>(?i)p</code> should be writable as <code>?ip</code> I think but on <a href=\"https://regex101.com\" rel=\"nofollow noreferrer\">https://regex101.com</a> I only get errors when trying to use <code>(?:?i)p\\w+@t(?:-)?\\w+(?:-\\w+)?(?:\\.\\w+)?\\.at</code> with non-captchuring groups.</p>\n\n<p>In the end python3 should evaluate the regex.</p>\n"}, {"tags": ["python", "python-2.7", "list"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495052215, "post_id": 44033894, "comment_id": 75094761, "body": "Yes, this is precisely the problem you will encounter by modifying a an object while iterating over it."}, {"owner": {"reputation": 3541, "user_id": 4450721, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/fGVGo.png?s=128&g=1", "display_name": "direprobs", "link": "https://stackoverflow.com/users/4450721/direprobs"}, "edited": false, "score": 0, "creation_date": 1495052287, "post_id": 44033894, "comment_id": 75094792, "body": "Please take a look at this question: <a href=\"https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating\">Remove items from a list while iterating</a>"}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1495052461, "post_id": 44033894, "comment_id": 75094884, "body": "It&#39;s strongly discouraged to modify the value you&#39;re iterating. This can make it difficult to determine the flow of the loop for anyone trying to comprehend what your code is doing. In this cases like this it is usually advisable to make modifications to a separate copy of your list (or other iterable object) or to iterate over an index to slice into your list: <code>for i in range(len(x)): print(x[i])</code>"}], "answers": [{"comments": [{"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1495060708, "post_id": 44033956, "comment_id": 75098343, "body": "This can be condensed to <code>x, y = [i for i in x if i not in y], [i for i in y if i not in x]</code>."}], "tags": [], "owner": {"reputation": 1568, "user_id": 5338754, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/20d06c03e09644769c1c9f0d7f92a77d?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/5338754/henry"}, "is_accepted": false, "score": 3, "last_activity_date": 1495051761, "creation_date": 1495051761, "answer_id": 44033956, "question_id": 44033894, "link": "https://stackoverflow.com/questions/44033894/removing-common-values-from-two-lists-in-python/44033956#44033956", "title": "Removing common values from two lists in python", "body": "<pre><code>z=[i for i in x if i not in y]\nw=[i for i in y if i not in x]\nx=z\ny=w\n</code></pre>\n\n<p>That should do the trick? It's a bit less memory efficient.</p>\n"}, {"tags": [], "owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "is_accepted": false, "score": 2, "last_activity_date": 1495051847, "creation_date": 1495051847, "answer_id": 44033979, "question_id": 44033894, "link": "https://stackoverflow.com/questions/44033894/removing-common-values-from-two-lists-in-python/44033979#44033979", "title": "Removing common values from two lists in python", "body": "<p>If you use <code>numpy</code>, then all you need is:</p>\n\n<pre><code>x, y = np.setdiff1d(x, y), np.setdiff1d(y, x)\n</code></pre>\n\n<p>and if you don't want to use numpy:</p>\n\n<pre><code>x, y = list(set(x).difference(y)), list(set(y).difference(x))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1980, "user_id": 2085389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dbdcd661e414efd86c3d2e4f030bca1?s=128&d=identicon&r=PG", "display_name": "DSLima90", "link": "https://stackoverflow.com/users/2085389/dslima90"}, "edited": false, "score": 0, "creation_date": 1495052188, "post_id": 44033987, "comment_id": 75094743, "body": "That doesn&#39;t work if there is a duplicated value in any list, try:  <code>x = [1, 2, 3, 4, 5, 6, 7, 8, 3]</code> you have to also make a copy of y"}, {"owner": {"reputation": 9833, "user_id": 4407666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/AqwYj.jpg?s=128&g=1", "display_name": "Rahul K P", "link": "https://stackoverflow.com/users/4407666/rahul-k-p"}, "reply_to_user": {"reputation": 1980, "user_id": 2085389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dbdcd661e414efd86c3d2e4f030bca1?s=128&d=identicon&r=PG", "display_name": "DSLima90", "link": "https://stackoverflow.com/users/2085389/dslima90"}, "edited": false, "score": 0, "creation_date": 1495052575, "post_id": 44033987, "comment_id": 75094943, "body": "@DSLima90 I think that up to the OP requirement, If he want to remove the all occurance of duplicate it&#39;s won&#39;t work. But after the deletion from both list  it&#39;s made unique in the first list. So that&#39;s not a problem."}, {"owner": {"reputation": 1980, "user_id": 2085389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dbdcd661e414efd86c3d2e4f030bca1?s=128&d=identicon&r=PG", "display_name": "DSLima90", "link": "https://stackoverflow.com/users/2085389/dslima90"}, "edited": false, "score": 0, "creation_date": 1495053127, "post_id": 44033987, "comment_id": 75095213, "body": "@Rhaul Yes, you are right. I assumed that OP wants to delete all occurrences by my interpretation of the code provided. It is a valid answer, though maybe it is worth noting that it differs from the other answers in that aspect so far."}, {"owner": {"reputation": 9833, "user_id": 4407666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/AqwYj.jpg?s=128&g=1", "display_name": "Rahul K P", "link": "https://stackoverflow.com/users/4407666/rahul-k-p"}, "reply_to_user": {"reputation": 1980, "user_id": 2085389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dbdcd661e414efd86c3d2e4f030bca1?s=128&d=identicon&r=PG", "display_name": "DSLima90", "link": "https://stackoverflow.com/users/2085389/dslima90"}, "edited": false, "score": 0, "creation_date": 1495053555, "post_id": 44033987, "comment_id": 75095427, "body": "@DSLima90 May be you are right. Anyhow am updated with an alternative method"}], "tags": [], "owner": {"reputation": 9833, "user_id": 4407666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/AqwYj.jpg?s=128&g=1", "display_name": "Rahul K P", "link": "https://stackoverflow.com/users/4407666/rahul-k-p"}, "is_accepted": true, "score": 9, "last_activity_date": 1495067758, "last_edit_date": 1495067758, "creation_date": 1495051890, "answer_id": 44033987, "question_id": 44033894, "link": "https://stackoverflow.com/questions/44033894/removing-common-values-from-two-lists-in-python/44033987#44033987", "title": "Removing common values from two lists in python", "body": "<p>Just slight change your code,Iterate through the copy of <code>x</code> it's <code>x[:]</code>.You are modifying the list while iterating over it. So that's why you are missing value <code>3</code></p>\n\n<pre><code>for i in x[:]:\n      if i in y:\n          x.remove(i)\n          y.remove(i)\n</code></pre>\n\n<p>And alternative method</p>\n\n<pre><code>x,y = [i for i in x if i not in y],[j for j in y if j not in x]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "edited": false, "score": 0, "creation_date": 1495052415, "post_id": 44034051, "comment_id": 75094864, "body": "A downside of this is that it will remove all duplicate items and lose the ordering. But usually for people who wants to do this, it isn&#39;t a problem"}], "tags": [], "owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "is_accepted": false, "score": 8, "last_activity_date": 1495052293, "last_edit_date": 1495052293, "creation_date": 1495052151, "answer_id": 44034051, "question_id": 44033894, "link": "https://stackoverflow.com/questions/44033894/removing-common-values-from-two-lists-in-python/44034051#44034051", "title": "Removing common values from two lists in python", "body": "<p>You can also use difference of <code>set</code> objects. </p>\n\n<pre><code>a = list(set(y) - set(x))\nb = list(set(x) - set(y))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "is_accepted": false, "score": 2, "last_activity_date": 1495052466, "creation_date": 1495052466, "answer_id": 44034116, "question_id": 44033894, "link": "https://stackoverflow.com/questions/44033894/removing-common-values-from-two-lists-in-python/44034116#44034116", "title": "Removing common values from two lists in python", "body": "<p>I personally think Python's <code>set</code> data type is the way to go:</p>\n\n<p>You can do something like this:</p>\n\n<pre><code>&gt;&gt;&gt; x = [1, 2, 3, 4, 5, 6, 7, 8]\n&gt;&gt;&gt; y = [43, 3123, 543, 76, 879, 32, 14241, 342, 2, 3, 4]\n&gt;&gt;&gt; sx = set(x)\n&gt;&gt;&gt; sy = set(y)\n&gt;&gt;&gt; sx.union(sy)\nset([1, 2, 3, 4, 5, 6, 7, 8, 32, 43, 76, 342, 543, 879, 3123, 14241])\n</code></pre>\n\n<p>Or you can reduce it to a one liner:</p>\n\n<pre><code>list(set(x).union(set(y)))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13875711, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gjcr_YHk_sLG2cHOfb5-ciDsNeYRNC7_Ia1fVNvCg=k-s128", "display_name": "Sanjai R", "link": "https://stackoverflow.com/users/13875711/sanjai-r"}, "is_accepted": false, "score": -1, "last_activity_date": 1594032734, "last_edit_date": 1594032734, "creation_date": 1594024101, "answer_id": 62752089, "question_id": 44033894, "link": "https://stackoverflow.com/questions/44033894/removing-common-values-from-two-lists-in-python/62752089#62752089", "title": "Removing common values from two lists in python", "body": "<p>You can use <code>set</code> method to remove elements in list.</p>\n<pre><code>s1=input()\ns2=input()\nstr=list(set(s1).symmetric_difference(set(s2)))\nprint(str)\n</code></pre>\n"}], "owner": {"reputation": 437, "user_id": 7823403, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/102c82470b22f70a8981d2b9a4af098e?s=128&d=identicon&r=PG&f=1", "display_name": "MaPy", "link": "https://stackoverflow.com/users/7823403/mapy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9842, "favorite_count": 1, "accepted_answer_id": 44033987, "answer_count": 6, "score": 6, "last_activity_date": 1594032734, "creation_date": 1495051573, "last_edit_date": 1495056927, "question_id": 44033894, "link": "https://stackoverflow.com/questions/44033894/removing-common-values-from-two-lists-in-python", "title": "Removing common values from two lists in python", "body": "<p>Hi let's say that I have two lists in python and I want to remove common values from both lists. A potential solution is:</p>\n\n<pre><code>x = [1, 2, 3, 4, 5, 6, 7, 8]\ny = [43, 3123, 543, 76, 879, 32, 14241, 342, 2, 3, 4]\nfor i in x:\n    if i in y:\n        x.remove(i)\n        y.remove(i)\n</code></pre>\n\n<p>it seems correct but it is not. The reason, I guess, is because by removing an item from the list the index continues to iterate. Therefore, for two common values in the lists where the values are near each other we will be missing the later values (the code will not iterate through it).\nThe result would be:</p>\n\n<pre><code>&gt;&gt;&gt; x\n[1, 3, 5, 6, 8, 9, 10]\n&gt;&gt;&gt; y\n[43, 3123, 543, 76, 879, 32, 14241, 342, 3]\n</code></pre>\n\n<p>So we are missing the value <code>'3'</code>.</p>\n\n<p>Is the reason of that behaviour the one that I mentioned? or am I doing something else wrong?</p>\n"}, {"tags": ["java", "python", "jpype"], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 1490117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da167633d4d71972eded08954a3c1c0c?s=128&d=identicon&r=PG", "display_name": "Seung Woon Maz Lee", "link": "https://stackoverflow.com/users/1490117/seung-woon-maz-lee"}, "is_accepted": true, "score": 3, "last_activity_date": 1517970536, "last_edit_date": 1517970536, "creation_date": 1517969086, "answer_id": 48654859, "question_id": 44033891, "link": "https://stackoverflow.com/questions/44033891/jpype-python-importing-folder-of-jars/48654859#48654859", "title": "JPype (Python): importing folder of jar&#39;s", "body": "<p>You can join the list of jar files with Python code without hardcoding</p>\n\n<pre><code>f'{str.join(\":\", [\"path/to/jars/\"+name for name in os.listdir(\"path/to/jars\")])}'\n</code></pre>\n"}], "owner": {"reputation": 1752, "user_id": 6489012, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vodDy.jpg?s=128&g=1", "display_name": "ysfaran", "link": "https://stackoverflow.com/users/6489012/ysfaran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1603, "favorite_count": 0, "accepted_answer_id": 48654859, "answer_count": 1, "score": 3, "last_activity_date": 1605313627, "creation_date": 1495051569, "last_edit_date": 1495054431, "question_id": 44033891, "link": "https://stackoverflow.com/questions/44033891/jpype-python-importing-folder-of-jars", "title": "JPype (Python): importing folder of jar&#39;s", "body": "<p>i am using JPype in order to work with java classes in python.\nI have a folder that contains multiple self-written .jar files. </p>\n\n<p>I know how to import multiple .jar's on the long way: </p>\n\n<pre><code>...\nCLASSPATH = \"/path/to/jars/first.jar:/path/to/jars/second.jar\"\njpype.startJVM(jpype.getDefaultJVMPath(), \"-ea\", \"-Djava.class.path=%s\" % CLASSPATH)\nMYLIB= jpype.JPackage(\"org\").mylib\nMyClass = MYLIB.MyClass\nmyObj = MyClass()\n</code></pre>\n\n<p>This works fine, but i think there might be a better way. </p>\n\n<p>I already tried this:</p>\n\n<pre><code>CLASSPATH = \"/path/to/jars/*.jar\"\n</code></pre>\n\n<p>and this: </p>\n\n<pre><code>CLASSPATH = \"/path/to/jars/*\"\n</code></pre>\n\n<p>In both cases following error occurs:</p>\n\n<pre><code>user@user:~/path/to/python/$ python test.py\nTraceback (most recent call last):\n  File \"test.py\", line 23, in &lt;module&gt;\n    myObj = MyClass()\n  File \"/usr/local/lib/python2.7/dist-packages/JPype1-0.6.2-py2.7-linux-x86_64.egg/jpype/_jpackage.py\", line 60, in __call__\n    raise TypeError(\"Package {0} is not Callable\".format(self.__name))\nTypeError: Package org.mylib.MyClass is not Callable\n</code></pre>\n\n<p><strong>My Question:</strong></p>\n\n<p>Is there any way to easily import a folder that contains multiple .jar's in JPype?</p>\n"}, {"tags": ["python", "text-files"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5507598"}, "edited": false, "score": 2, "creation_date": 1495052340, "post_id": 44033887, "comment_id": 75094821, "body": "<b>It is not</b>. If the program is killed from the kernel (<code>kill -9</code>) you are not going to make that much since using <code>signal</code> is not able to do much after <code>SIGKILL</code> is caught. You can however catch and handle <code>SIGINT</code>and <code>SIGTERM</code>  Some useful links: <a href=\"https://en.wikipedia.org/wiki/Unix_signal#POSIX_signals\" rel=\"nofollow noreferrer\">POSIX Signals</a>, <a href=\"https://docs.python.org/3/library/signal.html\" rel=\"nofollow noreferrer\">Python Signals</a>"}, {"owner": {"reputation": 1084, "user_id": 6078026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2828ee6ae5d2f5fd4c9a3b4a89abfc43?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin K.", "link": "https://stackoverflow.com/users/6078026/kevin-k"}, "edited": false, "score": 1, "creation_date": 1495053299, "post_id": 44033887, "comment_id": 75095296, "body": "By kill, do you mean using the keyboard interrupt (i.e. Ctrl+C)? Or an actual kill command from the kernel?"}], "answers": [{"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1495054083, "post_id": 44034251, "comment_id": 75095680, "body": "Please summarize the Windows version instead of just posting a link."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5507598"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1495054286, "post_id": 44034251, "comment_id": 75095784, "body": "@MadPhysicist I&#39;d rather removing it."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1495054325, "post_id": 44034251, "comment_id": 75095802, "body": "Why? It makes your answer more complete."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5507598"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1495054404, "post_id": 44034251, "comment_id": 75095840, "body": "@MadPhysicist a matter of perspective"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5507598"}, "is_accepted": false, "score": 0, "last_activity_date": 1495054305, "last_edit_date": 1495054305, "creation_date": 1495053067, "answer_id": 44034251, "question_id": 44033887, "link": "https://stackoverflow.com/questions/44033887/how-can-you-delete-all-data-added-to-textfile-by-a-user-if-they-kill-the-program/44034251#44034251", "title": "How can you delete all data added to textfile by a user if they kill the program on python?", "body": "<p>UNIX/Linux oriented answer-</p>\n\n<p>You can write a handler for the signals, you could catch:</p>\n\n<ul>\n<li>SIGTERM (15)</li>\n<li>SIGINT (2)</li>\n<li>SIGQUIT (3)</li>\n<li>SIGABRT (6)</li>\n<li>SIGSTOP (24)</li>\n</ul>\n\n<p>Just to mention some, but if <code>kill -9</code> is used, <code>SIGKILL</code> is going to give you a hard time (see my comment). Therefore, it would be a better idea storing data encrypted (if that's good for something)</p>\n\n<pre><code>from signal import signal\n\ndef handle_signal(signum, stackframe):\n    ''' signal handler '''\n    # code to wipe or delete your file\n    return True\n\nif __name__ == '__main__':\n    # defining your handler for SIGINT\n    signal(2, handle_signal)\n    # the rest of your code\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1084, "user_id": 6078026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2828ee6ae5d2f5fd4c9a3b4a89abfc43?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin K.", "link": "https://stackoverflow.com/users/6078026/kevin-k"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1495054377, "post_id": 44034445, "comment_id": 75095829, "body": "Sorry. Meant to write <code>except</code>. I&#39;ve been writing a lot of C# lately"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5507598"}, "edited": false, "score": 0, "creation_date": 1495055095, "post_id": 44034445, "comment_id": 75096152, "body": "I do not believe this is truth for SIGTERM. You may want to rephrase and say &quot;kill signal from the kernel&quot;"}], "tags": [], "owner": {"reputation": 1084, "user_id": 6078026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2828ee6ae5d2f5fd4c9a3b4a89abfc43?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin K.", "link": "https://stackoverflow.com/users/6078026/kevin-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1495054408, "last_edit_date": 1495054408, "creation_date": 1495053749, "answer_id": 44034445, "question_id": 44033887, "link": "https://stackoverflow.com/questions/44033887/how-can-you-delete-all-data-added-to-textfile-by-a-user-if-they-kill-the-program/44034445#44034445", "title": "How can you delete all data added to textfile by a user if they kill the program on python?", "body": "<p>If by \"kill\" you mean a keyboard interrupt or another type of clean exit from the program you can use the following:</p>\n\n<pre><code>import os\n\ntry:\n    # Write to file here\nexcept KeyboardInterrupt:\n    os.remove('file.txt')\n</code></pre>\n\n<p>If you are asking if the program is receiving a kill signal from the operating system, then there is no way to handle that.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5507598"}, "edited": false, "score": 0, "creation_date": 1495055025, "post_id": 44034483, "comment_id": 75096121, "body": "You are deleting the file contents, still you&#39;re not doing it on program termination"}], "tags": [], "owner": {"reputation": 1, "user_id": 7832883, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DfKxyxTCy7o/AAAAAAAAAAI/AAAAAAAAAgA/26aTvTj_RZg/photo.jpg?sz=128", "display_name": "Khalil Preview", "link": "https://stackoverflow.com/users/7832883/khalil-preview"}, "is_accepted": false, "score": -2, "last_activity_date": 1495053917, "creation_date": 1495053917, "answer_id": 44034483, "question_id": 44033887, "link": "https://stackoverflow.com/questions/44033887/how-can-you-delete-all-data-added-to-textfile-by-a-user-if-they-kill-the-program/44034483#44034483", "title": "How can you delete all data added to textfile by a user if they kill the program on python?", "body": "<p>just open the file and close it .</p>\n\n<pre><code>f = open('myfile.dat', 'w')\nf.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 0, "last_activity_date": 1495054003, "creation_date": 1495054003, "answer_id": 44034506, "question_id": 44033887, "link": "https://stackoverflow.com/questions/44033887/how-can-you-delete-all-data-added-to-textfile-by-a-user-if-they-kill-the-program/44034506#44034506", "title": "How can you delete all data added to textfile by a user if they kill the program on python?", "body": "<p>You can use <a href=\"https://docs.python.org/3/library/tempfile.html#tempfile.TemporaryFile\" rel=\"nofollow noreferrer\"><code>tempfile.TempFile</code></a> on a Unix-like OS. It will create a file with no visible directory entry. Even if the process is killed with <code>kill -9</code>, the file will be destroyed.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8027594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ab922e618fff2b21c3237c7600c907?s=128&d=identicon&r=PG&f=1", "display_name": "user8027594", "link": "https://stackoverflow.com/users/8027594/user8027594"}, "edited": false, "score": 0, "creation_date": 1495054446, "post_id": 44034560, "comment_id": 75095865, "body": "Thanks for that answer, but would you know how to write that in python?? I am really only on basics so I wasn&#39;t looking for anything complicated."}], "tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 0, "last_activity_date": 1495054195, "creation_date": 1495054195, "answer_id": 44034560, "question_id": 44033887, "link": "https://stackoverflow.com/questions/44033887/how-can-you-delete-all-data-added-to-textfile-by-a-user-if-they-kill-the-program/44034560#44034560", "title": "How can you delete all data added to textfile by a user if they kill the program on python?", "body": "<p>From a net-result standpoint, you can treat your changes as a <em>transaction.</em></p>\n\n<pre><code>1. Make a copy of the original text file.\n2. Perform whatever changes to the copy that you wish to make.\n3. Confirm that the changes are okay, and the user wishes to save them.\n4. Replace the old text file with the new text file.\n</code></pre>\n\n<p>Step 4 can happen fairly quickly, although not atomically. Still, certainly way faster than most users can type Ctrl-C. To do this, you would:</p>\n\n<pre><code>a. 'move' the original file to a backup.\nb. 'move' the new file to the original name.\nc. 'unlink' the backup\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8027594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ab922e618fff2b21c3237c7600c907?s=128&d=identicon&r=PG&f=1", "display_name": "user8027594", "link": "https://stackoverflow.com/users/8027594/user8027594"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1495054408, "creation_date": 1495051549, "last_edit_date": 1495053583, "question_id": 44033887, "link": "https://stackoverflow.com/questions/44033887/how-can-you-delete-all-data-added-to-textfile-by-a-user-if-they-kill-the-program", "title": "How can you delete all data added to textfile by a user if they kill the program on python?", "body": "<p>I am writing a program that stores user names and passwords but I want to delete all the data stored on the text file if the user kills the program....is that possible to do in a simple way?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 1, "creation_date": 1495051605, "post_id": 44033879, "comment_id": 75094409, "body": "It only checks if the list is non-empty."}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1495051685, "post_id": 44033879, "comment_id": 75094453, "body": "Related (and in my opinion a duplicate) <a href=\"http://stackoverflow.com/questions/53513/best-way-to-check-if-a-list-is-empty\" title=\"best way to check if a list is empty\">stackoverflow.com/questions/53513/&hellip;</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1495051737, "post_id": 44033879, "comment_id": 75094495, "body": "Don&#39;t mix up the terms &quot;array&quot; and &quot;list&quot;."}, {"owner": {"reputation": 128, "user_id": 7222176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55260cb3f97a0748310112865e2a837b?s=128&d=identicon&r=PG&f=1", "display_name": "star4z", "link": "https://stackoverflow.com/users/7222176/star4z"}, "edited": false, "score": 0, "creation_date": 1495064603, "post_id": 44033879, "comment_id": 75099420, "body": "Sorry, java background peeking through there (ArrayList)"}], "answers": [{"comments": [{"owner": {"reputation": 3894, "user_id": 279355, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dd83e44550f39bea6f712af8d3aef3?s=128&d=identicon&r=PG", "display_name": "grundic", "link": "https://stackoverflow.com/users/279355/grundic"}, "edited": false, "score": 0, "creation_date": 1495051771, "post_id": 44033911, "comment_id": 75094521, "body": "why -1? My answer wasn&#39;t useful..?"}, {"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 0, "creation_date": 1495052106, "post_id": 44033911, "comment_id": 75094707, "body": "Different people downvote for different reasons such as: incomplete answers, answers without explanation, or even Python 2 links. You can&#39;t know for sure *shrug*"}, {"owner": {"reputation": 3894, "user_id": 279355, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dd83e44550f39bea6f712af8d3aef3?s=128&d=identicon&r=PG", "display_name": "grundic", "link": "https://stackoverflow.com/users/279355/grundic"}, "edited": false, "score": 1, "creation_date": 1495052290, "post_id": 44033911, "comment_id": 75094797, "body": "They should remember though, that they sacrifice (a bit) their rating as well. I can understand when the question was about python and answer was about Peppa Pig, but here... Doh.."}], "tags": [], "owner": {"reputation": 3894, "user_id": 279355, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dd83e44550f39bea6f712af8d3aef3?s=128&d=identicon&r=PG", "display_name": "grundic", "link": "https://stackoverflow.com/users/279355/grundic"}, "is_accepted": false, "score": 0, "last_activity_date": 1495051628, "creation_date": 1495051628, "answer_id": 44033911, "question_id": 44033879, "link": "https://stackoverflow.com/questions/44033879/use-boolean-array-as-condition/44033911#44033911", "title": "Use boolean array as condition", "body": "<p>Use <a href=\"https://docs.python.org/2/library/functions.html#all\" rel=\"nofollow noreferrer\">all</a>:</p>\n\n<pre><code>if all(conditions):\n  ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 4, "last_activity_date": 1495051648, "creation_date": 1495051648, "answer_id": 44033921, "question_id": 44033879, "link": "https://stackoverflow.com/questions/44033879/use-boolean-array-as-condition/44033921#44033921", "title": "Use boolean array as condition", "body": "<p>Empty lists are \"false\"; all others are \"true\". If you want to do stuff if <em>all</em> the conditions are true, use</p>\n\n<pre><code>if all(conditions):\n    &lt;do stuff&gt;\n</code></pre>\n\n<p>If you want to do stuff if <em>any</em> of the conditions are true, use</p>\n\n<pre><code>if any(conditions):\n    &lt;do stuff&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 602, "user_id": 2026132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/101e3f86793ee75940e87d204ddcaeb4?s=128&d=identicon&r=PG", "display_name": "Mark Beilfuss", "link": "https://stackoverflow.com/users/2026132/mark-beilfuss"}, "is_accepted": false, "score": 2, "last_activity_date": 1495113593, "last_edit_date": 1495113593, "creation_date": 1495051672, "answer_id": 44033931, "question_id": 44033879, "link": "https://stackoverflow.com/questions/44033879/use-boolean-array-as-condition/44033931#44033931", "title": "Use boolean array as condition", "body": "<p>A list will pass an if test if it is non empty. So <code>[]</code> will be false and all other values will be true for the purposes of the test. </p>\n\n<p>If you want to test if any value of a list is True you can use <code>any</code> to do so. If you want to test if all values are true use <code>all</code> in the same way.</p>\n\n<p>Example:</p>\n\n<pre><code>if any(conditions):\n     do something\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17500, "user_id": 3113477, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/TWIEk.jpg?s=128&g=1", "display_name": "A.J. Uppal", "link": "https://stackoverflow.com/users/3113477/a-j-uppal"}, "is_accepted": false, "score": 0, "last_activity_date": 1495051722, "creation_date": 1495051722, "answer_id": 44033944, "question_id": 44033879, "link": "https://stackoverflow.com/questions/44033879/use-boolean-array-as-condition/44033944#44033944", "title": "Use boolean array as condition", "body": "<p>Just use <a href=\"https://docs.python.org/2/library/functions.html#all\" rel=\"nofollow noreferrer\"><strong><code>all</code></strong></a>:</p>\n\n<pre><code>&gt;&gt;&gt; conditions = [True, False, True, True, False]\n&gt;&gt;&gt; all(conditions)\nFalse\n&gt;&gt;&gt; conditions = [True, True, True, True, True]\n&gt;&gt;&gt; all(conditions)\nTrue\n&gt;&gt;&gt; \n</code></pre>\n\n<p>From the docs:</p>\n\n<blockquote>\n  <p>Return True if all elements of the iterable are true (or if the iterable is empty).</p>\n</blockquote>\n"}], "owner": {"reputation": 128, "user_id": 7222176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55260cb3f97a0748310112865e2a837b?s=128&d=identicon&r=PG&f=1", "display_name": "star4z", "link": "https://stackoverflow.com/users/7222176/star4z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 44033921, "answer_count": 4, "score": 0, "last_activity_date": 1495113593, "creation_date": 1495051537, "question_id": 44033879, "link": "https://stackoverflow.com/questions/44033879/use-boolean-array-as-condition", "title": "Use boolean array as condition", "body": "<p>I was wondering if you can pass an array of conditions as a condition, specifically in Python?</p>\n\n<p>for example:</p>\n\n<pre><code>conditions = [True, False, True, True, False]\n\nif conditions:\n    &lt;do stuff&gt;\n</code></pre>\n\n<p>Python doesn't throw an error when I give it something like this, but I'm not sure if it's doing what I want it to do. Is it actually comparing the whole list? And if so, is it in an <code>and</code> or <code>or</code> fashion? Or is it doing something different, like only comparing the first item?</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 694, "user_id": 7033869, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qhp8umXBLiA/AAAAAAAAAAI/AAAAAAAAAAA/faBbkZ-N7fw/photo.jpg?sz=128", "display_name": "Francois Mockers", "link": "https://stackoverflow.com/users/7033869/francois-mockers"}, "is_accepted": false, "score": 0, "last_activity_date": 1495052255, "creation_date": 1495052255, "answer_id": 44034070, "question_id": 44033858, "link": "https://stackoverflow.com/questions/44033858/how-to-group-configs-by-environment-in-python/44034070#44034070", "title": "How to group configs by environment in python?", "body": "<p>You can have a configuration file per environment, for example with python's <a href=\"https://docs.python.org/3.6/library/configparser.html\" rel=\"nofollow noreferrer\">configparser</a>.</p>\n\n<p>To select the one you want, you can set an environment variable and <a href=\"https://docs.python.org/3.6/library/os.html#os.environ\" rel=\"nofollow noreferrer\">read it in your python code</a>.</p>\n"}], "owner": {"reputation": 3542, "user_id": 1093674, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d67b951d3ef8e9d79b4c62e3a3c52b4e?s=128&d=identicon&r=PG", "display_name": "Cristhian Boujon", "link": "https://stackoverflow.com/users/1093674/cristhian-boujon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495052255, "creation_date": 1495051456, "last_edit_date": 1495051763, "question_id": 44033858, "link": "https://stackoverflow.com/questions/44033858/how-to-group-configs-by-environment-in-python", "title": "How to group configs by environment in python?", "body": "<p>I'm developing a complex ETL process from scratch. The process uses multiprocessing and database queries with SQLAlchemy. Now I'm trying to add a file environmnet configuration where like:</p>\n\n<pre><code>dev -&gt; database config connection, folder where save temporal files, folder where save log files.\ntest -&gt; another database config connection, another folder where save temporal files, another folder where save log files.\n</code></pre>\n\n<p>The current project strucures is:</p>\n\n<pre><code>package_1\n    some_module_1.py\n    some_module_2.py\n    main_process.py &lt;-- Cron job will run it\npackage_2\n    another_some_module_1.py\n    another_main_process.py &lt;-- Another Cron job will run it\n</code></pre>\n\n<p>At runtime (maybe?) it sets the environment to take configuration set.\nHow can I do it? What is your suggestion?</p>\n"}, {"tags": ["python", "anaconda", "nvidia", "numba"], "owner": {"reputation": 96, "user_id": 4449935, "user_type": "registered", "profile_image": "https://graph.facebook.com/837986932933954/picture?type=large", "display_name": "Random Integer", "link": "https://stackoverflow.com/users/4449935/random-integer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 426, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1495051317, "creation_date": 1495051178, "last_edit_date": 1495051317, "question_id": 44033787, "link": "https://stackoverflow.com/questions/44033787/numba-error-with-target-cuda-but-works-with-target-cpu", "title": "Numba: Error with target=&quot;cuda&quot; but works with target=&quot;cpu&quot;", "body": "<p>I'm writing a program to do matrix computations on my Nvidia GPU.</p>\n\n<p>Currently, I was implementing an example shown in the video in the given link: <a href=\"https://devblogs.nvidia.com/parallelforall/cudacasts-episode-11-gpu-libraries-cuda-python/\" rel=\"nofollow noreferrer\">CUDACasts Episode #11: GPU Libraries for CUDA Python</a>.</p>\n\n<p>After this video, I followed the Anaconda's docs and got to know that <strong>NumbaPro</strong> library is deprecated, so I used <strong>Numba</strong> library instead.</p>\n\n<p>I've got a working python code like this:</p>\n\n<pre><code>from numba import vectorize\nimport numpy as np\n\n@vectorize([\"float32(float32, float32)\"], target='cpu')\ndef add(a, b):\n    return a + b\n\ndef main():\n    a = np.matrix(np.random.random([10000, 10000]), dtype=np.float32)\n    b = np.matrix(np.random.random([10000, 10000]), dtype=np.float32)\n    c = add(a, b)\n    print(c.shape)\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>But it gives an error when I change <code>target='cuda'</code> in line <strong>4</strong>.</p>\n\n<p>I have cudalib and other required libraries and SDKs installed.</p>\n\n<p><strong>Traceback:</strong></p>\n\n<pre><code>Traceback (most recent call last):\nFile \"main.py\", line 21, in &lt;module&gt;\n    main()\nFile \"main.py\", line 15, in main\n    c = add(a, b)\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/cuda/dispatcher.py\", line 88, in __call__\n    return CUDAUFuncMechanism.call(self.functions, args, kws)\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/npyufunc/deviceufunc.py\", line 300, in call\n    cr.launch(func, shape[0], stream, devarys)\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/cuda/dispatcher.py\", line 197, in launch\n    func.forall(count, stream=stream)(*args)\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/cuda/compiler.py\", line 248, in __call__\n    kernel = self.kernel.specialize(*args)\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/cuda/compiler.py\", line 717, in specialize\n    **self.targetoptions)\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/cuda/compiler.py\", line 37, in core\n    return fn(*args, **kwargs)\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/cuda/compiler.py\", line 75, in compile_kernel\n    cres = compile_cuda(pyfunc, types.void, args, debug=debug, inline=inline)\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/cuda/compiler.py\", line 37, in core\n    return fn(*args, **kwargs)\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/cuda/compiler.py\", line 64, in compile_cuda\n    locals={})\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/compiler.py\", line 693, in compile_extra\n    return pipeline.compile_extra(func)\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/compiler.py\", line 350, in compile_extra\n    return self._compile_bytecode()\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/compiler.py\", line 658, in _compile_bytecode\n    return self._compile_core()\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/compiler.py\", line 645, in _compile_core\n    res = pm.run(self.status)\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/compiler.py\", line 236, in run\n    raise patched_exception\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/compiler.py\", line 228, in run\n    stage()\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/compiler.py\", line 442, in stage_nopython_frontend\n    self.locals)\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/compiler.py\", line 794, in type_inference_stage\n    infer.propagate()\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/typeinfer.py\", line 767, in propagate\n    raise errors[0]\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/typeinfer.py\", line 128, in propagate\n    constraint(typeinfer)\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/typeinfer.py\", line 379, in __call__\n    self.resolve(typeinfer, typevars, fnty)\nFile \"/home/noisymonk/anaconda3/lib/python3.6/site-packages/numba/typeinfer.py\", line 401, in resolve\n    raise TypingError(msg, loc=self.loc)\nnumba.errors.TypingError: Failed at nopython (nopython frontend)\nInvalid usage of Function(&lt;DeviceFunction py_func=&lt;function add at 0x7f8578f96b70&gt; signature=(float32, float32) -&gt; float32&gt;) with parameters (array(float32, 1d, A), array(float32, 1d, A))\nKnown signatures:\n* (float32, float32) -&gt; float32\nFile \"&lt;string&gt;\", line 5\n[1] During: resolving callee type: Function(&lt;DeviceFunction py_func=&lt;function add at 0x7f8578f96b70&gt; signature=(float32, float32) -&gt; float32&gt;)\n[2] During: typing of call at &lt;string&gt; (5)\n</code></pre>\n"}, {"tags": ["python", "django", "python-2.7", "django-rest-framework"], "comments": [{"owner": {"reputation": 28120, "user_id": 492773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c30dea4ed3e1c2efc5e877f1f3c971?s=128&d=identicon&r=PG", "display_name": "kichik", "link": "https://stackoverflow.com/users/492773/kichik"}, "edited": false, "score": 0, "creation_date": 1495052808, "post_id": 44033737, "comment_id": 75095065, "body": "How exactly did you install it? What exactly is the error?"}, {"owner": {"reputation": 1874, "user_id": 6623650, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/2NOJH.jpg?s=128&g=1", "display_name": "Amrit", "link": "https://stackoverflow.com/users/6623650/amrit"}, "edited": false, "score": 0, "creation_date": 1495101771, "post_id": 44033737, "comment_id": 75114765, "body": "which ide are u using?are u in your specific environment?"}, {"owner": {"reputation": 1475, "user_id": 7474744, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2e530f816ed5c411e76e0e55419966e0?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7474744/joe"}, "edited": false, "score": 0, "creation_date": 1495111185, "post_id": 44033737, "comment_id": 75121311, "body": "I believe it was the normal pip install, I am inside a virtualenv, and I am using PyCharm"}], "answers": [{"comments": [{"owner": {"reputation": 1475, "user_id": 7474744, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2e530f816ed5c411e76e0e55419966e0?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7474744/joe"}, "edited": false, "score": 0, "creation_date": 1495052134, "post_id": 44033995, "comment_id": 75094723, "body": "I have it in installed apps that is not the problem"}, {"owner": {"reputation": 344, "user_id": 7808466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mHTz.jpg?s=128&g=1", "display_name": "Matheus Veleci", "link": "https://stackoverflow.com/users/7808466/matheus-veleci"}, "reply_to_user": {"reputation": 1475, "user_id": 7474744, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2e530f816ed5c411e76e0e55419966e0?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7474744/joe"}, "edited": false, "score": 0, "creation_date": 1495052437, "post_id": 44033995, "comment_id": 75094879, "body": "Did you try to run <code>makemigrations</code> and <code>migrate</code> after install it?"}, {"owner": {"reputation": 1475, "user_id": 7474744, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2e530f816ed5c411e76e0e55419966e0?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7474744/joe"}, "edited": false, "score": 0, "creation_date": 1495052792, "post_id": 44033995, "comment_id": 75095051, "body": "Yes. Am I wrong in assuming that Rest should have installed some of its own settings in the settings.py"}, {"owner": {"reputation": 344, "user_id": 7808466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mHTz.jpg?s=128&g=1", "display_name": "Matheus Veleci", "link": "https://stackoverflow.com/users/7808466/matheus-veleci"}, "reply_to_user": {"reputation": 1475, "user_id": 7474744, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2e530f816ed5c411e76e0e55419966e0?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7474744/joe"}, "edited": false, "score": 0, "creation_date": 1495053089, "post_id": 44033995, "comment_id": 75095191, "body": "Well, I am quite sure that Django Rest Framework does not generate any code into settings.py"}], "tags": [], "owner": {"reputation": 344, "user_id": 7808466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mHTz.jpg?s=128&g=1", "display_name": "Matheus Veleci", "link": "https://stackoverflow.com/users/7808466/matheus-veleci"}, "is_accepted": false, "score": 0, "last_activity_date": 1495051924, "creation_date": 1495051924, "answer_id": 44033995, "question_id": 44033737, "link": "https://stackoverflow.com/questions/44033737/cant-import-rest-framework-in-django/44033995#44033995", "title": "Can&#39;t import rest_framework in Django", "body": "<p>In your setting.py you must have :</p>\n\n<pre><code>INSTALLED_APPS = [\n   ...\n   'rest_framework',\n   ....\n]\n\nREST_FRAMEWORK = {\n'DEFAULT_AUTHENTICATION_CLASSES': (\n    'rest_framework.authentication.SessionAuthentication',\n),\n}\n</code></pre>\n\n<p>As describe at Tutorial of <a href=\"http://www.django-rest-framework.org/tutorial/quickstart/#settings\" rel=\"nofollow noreferrer\">Django Rest Framework</a></p>\n"}, {"tags": [], "owner": {"reputation": 4438, "user_id": 1609259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQIyI.jpg?s=128&g=1", "display_name": "Venu Gopal Tewari", "link": "https://stackoverflow.com/users/1609259/venu-gopal-tewari"}, "is_accepted": false, "score": 1, "last_activity_date": 1557376417, "last_edit_date": 1557376417, "creation_date": 1557375299, "answer_id": 56052100, "question_id": 44033737, "link": "https://stackoverflow.com/questions/44033737/cant-import-rest-framework-in-django/56052100#56052100", "title": "Can&#39;t import rest_framework in Django", "body": "<p><a href=\"https://i.stack.imgur.com/SQ2uM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SQ2uM.png\" alt=\"enter image description here\"></a></p>\n\n<p>Try changing appropriate python environment (Virtual Env in your project folder) if even after </p>\n\n<p>INSTALLED_APPS = [\n   ...\n   'rest_framework',\n   ....\n]</p>\n\n<p>you are unable to import rest_framework.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8551794, "user_type": "registered", "profile_image": "https://graph.facebook.com/1854011794615263/picture?type=large", "display_name": "Daniel Simeonov", "link": "https://stackoverflow.com/users/8551794/daniel-simeonov"}, "is_accepted": false, "score": 0, "last_activity_date": 1558950449, "creation_date": 1558950449, "answer_id": 56323557, "question_id": 44033737, "link": "https://stackoverflow.com/questions/44033737/cant-import-rest-framework-in-django/56323557#56323557", "title": "Can&#39;t import rest_framework in Django", "body": "<p>Recently I faced the same problem and that is not only for the rest_framework. The answer for me is answered above but not fully how to check for beginners.</p>\n\n<ul>\n<li>Make sure that you have initialized the framework to the settings.py\nYou should have it under INSTALLED_APPS and REST_FRAMEWORK</li>\n</ul>\n\n<p>The main problem you might face is the environments of python you have. For checking if you have it already installed run:\n<code>python</code> and <code>import rest_framework</code>\nThat most likely will return you an error of <code>ImportError: No module named rest_framework</code>.\nSo the fix for that is running it with <code>python3</code>.</p>\n\n<p>In case you do not have it run <code>pip install djangorestframework</code></p>\n\n<p>Side note to that: check which version of djangorestframework you have as depending on the python you are running, as versions of rest_framework 1.9 onwards wont work with Python3</p>\n"}], "owner": {"reputation": 1475, "user_id": 7474744, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2e530f816ed5c411e76e0e55419966e0?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7474744/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5265, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1558950449, "creation_date": 1495051040, "question_id": 44033737, "link": "https://stackoverflow.com/questions/44033737/cant-import-rest-framework-in-django", "title": "Can&#39;t import rest_framework in Django", "body": "<p>I'm trying to stand up a Django site and I am attempting to setup Report_builder with that. I just got the front end of report builder to work but it is not returning any data. I suspect the problem is with my rest framework. The settings did not auto create and now when I try to import it to create a serializer restframework is not recognized at all. </p>\n\n<p>Here is my settings page: </p>\n\n<pre><code>  REST_FRAMEWORK = {\n     'DEFAULT_AUTHENTICATION_CLASSES': (\n         'rest_framework.authentication.SessionAuthentication',\n     ),\n\n\n }\n</code></pre>\n\n<p>Did I possibly install rest framework in the wrong place or??<br>\nI have the latest version. </p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1495051166, "post_id": 44033731, "comment_id": 75094122, "body": "Fix your indentation, please."}, {"owner": {"reputation": 45, "user_id": 7662385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35291f0dc7c72b4085fa8c507db48fa1?s=128&d=identicon&r=PG&f=1", "display_name": "\u041a\u0438\u0440\u0438\u043b\u043b \u0422\u0438\u043c\u043e\u0444\u0435\u0435\u0432", "link": "https://stackoverflow.com/users/7662385/%d0%9a%d0%b8%d1%80%d0%b8%d0%bb%d0%bb-%d0%a2%d0%b8%d0%bc%d0%be%d1%84%d0%b5%d0%b5%d0%b2"}, "reply_to_user": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "edited": false, "score": 0, "creation_date": 1495051717, "post_id": 44033731, "comment_id": 75094482, "body": "@vishes_shell Sorry, fixed"}], "answers": [{"tags": [], "owner": {"reputation": 17319, "user_id": 3124746, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/0ihpR.jpg?s=128&g=1", "display_name": "vishes_shell", "link": "https://stackoverflow.com/users/3124746/vishes-shell"}, "is_accepted": false, "score": 1, "last_activity_date": 1495052108, "last_edit_date": 1495052108, "creation_date": 1495051729, "answer_id": 44033946, "question_id": 44033731, "link": "https://stackoverflow.com/questions/44033731/attribute-error-loginform-object-has-no-attribute-cleaned-data-where-login-i/44033946#44033946", "title": "Attribute error &#39;LoginForm&#39; object has no attribute &#39;cleaned_data&#39; where login is carried out by mail and password", "body": "<p>You need to call <code>.is_valid()</code> on form before accessing <code>cleaned_data</code> attribute.</p>\n\n<p>There is not calling <code>form.is_valid()</code> in your <em>views.py</em>.\nAlso there is no populating of your form from <em>POST</em> data, you need to do it with <code>form = LoginForm(request.POST)</code> if your <code>request.method</code> is <code>POST</code></p>\n\n<p>You can also view the source:</p>\n\n<p><a href=\"https://github.com/django/django/blob/master/django/forms/forms.py#L363-L378\" rel=\"nofollow noreferrer\"><code>full_clean()</code></a> is respected for assigning <code>self.cleaned_data</code>, and <code>full_clean()</code> is called by property <a href=\"https://github.com/django/django/blob/master/django/forms/forms.py#L170-L175\" rel=\"nofollow noreferrer\"><code>self.errors</code></a> in <a href=\"https://github.com/django/django/blob/master/django/forms/forms.py#L177-L179\" rel=\"nofollow noreferrer\"><code>is_valid()</code></a> method. So you can track from the <a href=\"https://github.com/django/django/tree/master/django\" rel=\"nofollow noreferrer\">django source code</a> what is wrong with yours.</p>\n"}, {"tags": [], "owner": {"reputation": 7973, "user_id": 7256228, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V4i9L.jpg?s=128&g=1", "display_name": "zaidfazil", "link": "https://stackoverflow.com/users/7256228/zaidfazil"}, "is_accepted": false, "score": 0, "last_activity_date": 1495092398, "last_edit_date": 1495092398, "creation_date": 1495085657, "answer_id": 44039362, "question_id": 44033731, "link": "https://stackoverflow.com/questions/44033731/attribute-error-loginform-object-has-no-attribute-cleaned-data-where-login-i/44039362#44039362", "title": "Attribute error &#39;LoginForm&#39; object has no attribute &#39;cleaned_data&#39; where login is carried out by mail and password", "body": "<p>You haven't called <code>form.is_valid()</code>.\nInorder to access form.cleaned_data, the form validation should be done first.\nForm validation is carried out only when <code>form.is_valid()</code> is called upon the form, which in turn returns a validated <code>cleaned_data</code>.</p>\n\n<p>Also, on <code>request.POST</code>, your form is not getting data, because, for that, you need to initialise your form with <code>request.POST</code>, like</p>\n\n<pre><code>form = LoginForm(request.POST)\n</code></pre>\n\n<p>The return statement before the last <code>render_to_response</code> would also raise some errors, I presume.</p>\n\n<p>You could read more about form validation <a href=\"https://docs.djangoproject.com/en/1.11/ref/forms/validation/\" rel=\"nofollow noreferrer\">here from the docs</a></p>\n"}], "owner": {"reputation": 45, "user_id": 7662385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35291f0dc7c72b4085fa8c507db48fa1?s=128&d=identicon&r=PG&f=1", "display_name": "\u041a\u0438\u0440\u0438\u043b\u043b \u0422\u0438\u043c\u043e\u0444\u0435\u0435\u0432", "link": "https://stackoverflow.com/users/7662385/%d0%9a%d0%b8%d1%80%d0%b8%d0%bb%d0%bb-%d0%a2%d0%b8%d0%bc%d0%be%d1%84%d0%b5%d0%b5%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 906, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495092398, "creation_date": 1495051023, "last_edit_date": 1495092358, "question_id": 44033731, "link": "https://stackoverflow.com/questions/44033731/attribute-error-loginform-object-has-no-attribute-cleaned-data-where-login-i", "title": "Attribute error &#39;LoginForm&#39; object has no attribute &#39;cleaned_data&#39; where login is carried out by mail and password", "body": "<p><em>views.py</em></p>\n\n<pre><code>def login_view(request):\n    form = LoginForm()\n    if request.method == 'POST':\n        user = form.authenticate_user()\n        if not user:\n            error(request, 'Wrong credentials!')\n            return render_to_response('login.html')\n        login(request, user)\n        context = user.id\n        return start(str(context))\n    return render_to_response('login.html', {'form': form})\n</code></pre>\n\n<p><em>models.py</em></p>\n\n<pre><code>class User(AbstractBaseUser):\n    phone = models.CharField(max_length=16, unique=True)\n    age = models.PositiveIntegerField(blank=True, null=True)\n    region = models.CharField(max_length=30, blank=True, null=True)\n    email = models.EmailField(unique=True)\n    first_name = models.CharField(max_length=30, unique=True)\n    last_name = models.CharField(max_length=30, unique=True)\n    USERNAME_FIELD = 'phone'\n    objects = UserManager()\n</code></pre>\n\n<p><em>forms.py</em></p>\n\n<pre><code>class LoginForm(forms.Form):\n    email = forms.CharField()\n    password = forms.CharField(\n        widget=forms.PasswordInput(render_value=False)\n    )\n\n    def clean(self):\n        user = self.authenticate_via_email()\n        if not user:\n            raise forms.ValidationError(\"Sorry, that login was invalid.        Please try again.\")\n        else:\n            self.user = user\n        return self.cleaned_data\n\n    def authenticate_user(self):\n        return authenticate(\n            email=self.cleaned_data['email'],\n            password=self.cleaned_data['password']\n         )\n\n    def authenticate_via_email(self):\n        \"\"\"\n            Authenticate user using email.\n            Returns user object if authenticated else None\n        \"\"\"\n        email = self.cleaned_data['email']\n        if email:\n            try:\n                user = User.objects.get(email__iexact=email)\n                if user.check_password(self.cleaned_data['password']):\n                    return user\n            except ObjectDoesNotExist:\n                pass\n        return None\n</code></pre>\n\n<p>why it doesn't work?\nTraceback:</p>\n\n<pre><code>AttributeError at /auth/\n'LoginForm' object has no attribute 'cleaned_data'\nTraceback:\nviews.py in login_view\n        user = form.authenticate_via_email()\n\nforms.py in authenticate_user\n        email=self.cleaned_data['email'],\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1495051263, "post_id": 44033716, "comment_id": 75094184, "body": "1. Post code, correctly formatted, <b>as text</b>. 2. SO isn&#39;t a tutorial service; if your code needs additional functionality, make an effort to implement it."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495051317, "post_id": 44033716, "comment_id": 75094221, "body": "Dictionaries are unordered, and cannot be sorted."}, {"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "edited": false, "score": 1, "creation_date": 1495051505, "post_id": 44033716, "comment_id": 75094338, "body": "Just saying, you don&#39;t even have a dict in your code, the moment you defined the dict, you override it with a str. Ie. lap_det"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1495051554, "post_id": 44033716, "comment_id": 75094367, "body": "You can&#39;t change the structure of a dictionary. Are you asking how to display the contents of a dictionary in a particular order?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1495051604, "post_id": 44033716, "comment_id": 75094406, "body": "<code>input</code> returns <code>str</code>, you don&#39;t need to convert the values."}, {"owner": {"reputation": 447, "user_id": 5556887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb86c8d689592c71cc88a42c7981c252?s=128&d=identicon&r=PG&f=1", "display_name": "bouletta", "link": "https://stackoverflow.com/users/5556887/bouletta"}, "edited": false, "score": 1, "creation_date": 1495054769, "post_id": 44033716, "comment_id": 75095991, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/613183/sort-a-python-dictionary-by-value\">Sort a Python dictionary by value</a>"}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1495051392, "post_id": 44033820, "comment_id": 75094265, "body": "Don&#39;t use <code>sorted(dic.keys())</code> In Python 2 this is inefficient, since it creates a <i>new list</i> of keys each time. In Python 3, it is merely redundant, since it returns a view of the keys. In any event, all you need is <code>sorted(dic)</code> to get a list of sorted keys."}, {"owner": {"reputation": 1614, "user_id": 2131783, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a5f7a6c30de72d289b4c4605601b0f47?s=128&d=identicon&r=PG", "display_name": "Thomas Kowalski", "link": "https://stackoverflow.com/users/2131783/thomas-kowalski"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1495051505, "post_id": 44033820, "comment_id": 75094339, "body": "I was assuming he was using Python 3 since as a beginner he has no reason not to. Also, using <code>sorted(dic)</code> may have been ambiguous, he could have though that you could sort the dictionary (since I don&#39;t think he knows iterating on a <code>dict</code> iterates on its keys...)"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1495051566, "post_id": 44033820, "comment_id": 75094379, "body": "Right, <i>even if you use Python 3, you should not use <code>dic.keys()</code> to iterate over keys...</i>. It is idiomatic to just use <code>dic</code> for that purpose. At the very least, it is adding a needless method call."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1495051631, "post_id": 44033820, "comment_id": 75094424, "body": "Right, and I don&#39;t think it is a valid reason. At the very least, it goes against Python idioms."}], "tags": [], "owner": {"reputation": 1614, "user_id": 2131783, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a5f7a6c30de72d289b4c4605601b0f47?s=128&d=identicon&r=PG", "display_name": "Thomas Kowalski", "link": "https://stackoverflow.com/users/2131783/thomas-kowalski"}, "is_accepted": false, "score": -1, "last_activity_date": 1495051705, "last_edit_date": 1495051705, "creation_date": 1495051318, "answer_id": 44033820, "question_id": 44033716, "link": "https://stackoverflow.com/questions/44033716/how-do-i-sort-a-dictionary-that-holds-variables-also-save-to-a-file/44033820#44033820", "title": "How do I sort a dictionary that holds variables? (Also save to a file)", "body": "<p>You can't sort a dictionary. </p>\n\n<p>Though, if you want to get the values of the dictionary in the same order as the keys, you can use:</p>\n\n<pre><code>for key in sorted(dic):\n    print(dic[key])\n</code></pre>\n\n<p>(Note: this will just print them)</p>\n\n<p>Please note that using <code>sorted(dic)</code> <em>will not</em> sort the dictionary, but only iterate over its keys (since iterating over a dict <code>dic</code> iterates over <code>dic.keys()</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "is_accepted": false, "score": 0, "last_activity_date": 1495051768, "last_edit_date": 1495539206, "creation_date": 1495051768, "answer_id": 44033957, "question_id": 44033716, "link": "https://stackoverflow.com/questions/44033716/how-do-i-sort-a-dictionary-that-holds-variables-also-save-to-a-file/44033957#44033957", "title": "How do I sort a dictionary that holds variables? (Also save to a file)", "body": "<p>Python's <code>dict</code> is unordered by default. However in Python 3.6, the dictionary currently keeps its insertion order. Anyway, I would recommend using an <code>OrderedDict</code>:</p>\n\n<pre><code>&gt;&gt;&gt; laps = {'foo': 12, 'bar': 10, 'fizz': 15, 'buzz': 7}\n&gt;&gt;&gt; OrderedDict(sorted(laps.items(), key=lambda k: k[1]))\nOrderedDict([('buzz', 7), ('bar', 10), ('foo', 12), ('fizz', 15)])\n</code></pre>\n\n<p>There are some other SO answers on this subject, such as this one:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/22264956/how-to-sort-dictionary-by-key-in-numerical-order-python\">How to sort dictionary by key in numerical order Python</a></li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 7998291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1bc03975c1938cc12979247ee75da2c?s=128&d=identicon&r=PG&f=1", "display_name": "James Gower", "link": "https://stackoverflow.com/users/7998291/james-gower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1495052209, "creation_date": 1495050949, "last_edit_date": 1495051560, "question_id": 44033716, "link": "https://stackoverflow.com/questions/44033716/how-do-i-sort-a-dictionary-that-holds-variables-also-save-to-a-file", "title": "How do I sort a dictionary that holds variables? (Also save to a file)", "body": "<p>I'm creating a script in python that gets the user's name and lap time, it then saves it into a dictionary which then saves it to a file. How do I sort the dictionary so it shows the lowest numbers first and then the four more scores after that? </p>\n\n<pre><code>def lap():\n\n    username = str(input(\"Name: \"))\n    time = str(input(\"Lap Time: \"))\n    lap_det = {}\n\n    lap_det = str([username + \" : \" + time])\n\n    with open(\"lap_time.txt\", \"w\") as f:\n        f.write(lap_det)\n\n    with open(\"lap_time.txt\", \"r\") as f:\n        print(f.readlines())\n\n    user_r = input(\"Press r to restart &gt;&gt;&gt; \")\n    if user_r == \"r\":\n        lap()\n    else:\n        quit()\n\nlap()\n</code></pre>\n"}, {"tags": ["python", "amazon-s3", "boto3"], "answers": [{"comments": [{"owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "edited": false, "score": 0, "creation_date": 1495054593, "post_id": 44034139, "comment_id": 75095924, "body": "How to set region? I was to set region to access via AWSCLI?"}, {"owner": {"reputation": 3609, "user_id": 3763102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2439148d94bddcda4415797c8f6afefa?s=128&d=identicon&r=PG", "display_name": "gipsy", "link": "https://stackoverflow.com/users/3763102/gipsy"}, "reply_to_user": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "edited": false, "score": 2, "creation_date": 1495056093, "post_id": 44034139, "comment_id": 75096615, "body": "boto3.resource(&#39;s3&#39;, region_name=&#39;us-west-2&#39;)"}], "tags": [], "owner": {"reputation": 3609, "user_id": 3763102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2439148d94bddcda4415797c8f6afefa?s=128&d=identicon&r=PG", "display_name": "gipsy", "link": "https://stackoverflow.com/users/3763102/gipsy"}, "is_accepted": true, "score": 2, "last_activity_date": 1495052586, "creation_date": 1495052586, "answer_id": 44034139, "question_id": 44033709, "link": "https://stackoverflow.com/questions/44033709/how-to-read-not-my-own-bucket-with-python-and-boto3/44034139#44034139", "title": "How to read not my own bucket with python and boto3?", "body": "<p>If you have access to someone else's bucket and you know the name of that bucket you can access it like </p>\n\n<pre><code>import boto3\n\ns3 = boto3.resource('s3')\nbucket = s3.Bucket('some-bucket-i-have-access-to')\nfor obj in bucket.objects.all():\n    print(obj.key)\n</code></pre>\n"}], "owner": {"reputation": 36741, "user_id": 258483, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dd4dee2094dcd427aaec8ee329d9cfd6?s=128&d=identicon&r=PG", "display_name": "Dims", "link": "https://stackoverflow.com/users/258483/dims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 44034139, "answer_count": 1, "score": 1, "last_activity_date": 1495052586, "creation_date": 1495050932, "question_id": 44033709, "link": "https://stackoverflow.com/questions/44033709/how-to-read-not-my-own-bucket-with-python-and-boto3", "title": "How to read not my own bucket with python and boto3?", "body": "<p>I know bucket name, I have access to it, I can browse it by web and by awscli.</p>\n\n<p>How access it by Python's boto3? All examples assume accessing my own buckets:</p>\n\n<pre><code>import boto3\ns3 = boto3.resource('s3')\nfor bucket in s3.buckets.all():\n    print(bucket.name)\n</code></pre>\n\n<p>How to reach other's bucket?</p>\n"}, {"tags": ["python", "excel", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1495056451, "post_id": 44033690, "comment_id": 75096765, "body": "How does python programming relate to this? There&#39;s no code in question. Can&#39;t you just copy/paste within excel to get your desired result?"}, {"owner": {"reputation": 37, "user_id": 6601482, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/635bc95087378de443c9e7b3341ae775?s=128&d=identicon&r=PG&f=1", "display_name": "shweta kapgate", "link": "https://stackoverflow.com/users/6601482/shweta-kapgate"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1495121928, "post_id": 44033690, "comment_id": 75129670, "body": "I have updated the question to include code!! Thankyou"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 6601482, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/635bc95087378de443c9e7b3341ae775?s=128&d=identicon&r=PG&f=1", "display_name": "shweta kapgate", "link": "https://stackoverflow.com/users/6601482/shweta-kapgate"}, "edited": false, "score": 0, "creation_date": 1495549830, "post_id": 44059906, "comment_id": 75293796, "body": "Thankyou!! Yeah even I could find the solution by manually arranging columns and its value. But I was wondering what if the values are not same then again its difficult to arrange manually."}], "tags": [], "owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "is_accepted": false, "score": 0, "last_activity_date": 1495155913, "creation_date": 1495155913, "answer_id": 44059906, "question_id": 44033690, "link": "https://stackoverflow.com/questions/44033690/custom-sort-all-the-rows-in-dataframe-in-one-order-excel/44059906#44059906", "title": "Custom sort all the rows in dataframe in one order excel", "body": "<p>There is probably a more \"pythonic\" and \"pandas\" way to do it but I couldn't find one, rather manually renaming the column names is the only way I could get that result:</p>\n\n<pre><code># Using your same code\ndf1 = df.apply(lambda x: sorted(x.values), axis=1)\n\ncols = df1.columns.tolist()\n\nnew_cols = [cols[4], cols[3], cols[1], cols[7], cols[5], cols[2], cols[6], cols[0]]\n\ndf2 = df1[new_cols]\n\ndf2.columns = ['Attribute_1', 'Value', 'Attribute_2', 'Value', 'Attribute_3', 'Value', 'Attribute_4', 'Value']\n</code></pre>\n\n<p>Now <code>df2</code> looks like:</p>\n\n<pre><code>    Attribute_1  Value   Attribute_2   Value Attribute_3 Value Attribute_4 Value\nNaN  Paper_size  Legal  Color_family  Yellow   Ring_type     D    Tab_type   A-Z\nNaN  Paper_size  Legal  Color_family  Yellow   Ring_type     D    Tab_type   A-Z\nNaN  Paper_size  Legal  Color_family  Yellow   Ring_type     D    Tab_type   A-Z\nNaN  Paper_size  Legal  Color_family  Yellow   Ring_type     D    Tab_type   A-Z\n</code></pre>\n\n<p>which seems to match the output in your second image.</p>\n\n<p>It's not great, but I thought I'd put it here until someone offers a better solution.</p>\n"}], "owner": {"reputation": 37, "user_id": 6601482, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/635bc95087378de443c9e7b3341ae775?s=128&d=identicon&r=PG&f=1", "display_name": "shweta kapgate", "link": "https://stackoverflow.com/users/6601482/shweta-kapgate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 335, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495583671, "creation_date": 1495050863, "last_edit_date": 1495583671, "question_id": 44033690, "link": "https://stackoverflow.com/questions/44033690/custom-sort-all-the-rows-in-dataframe-in-one-order-excel", "title": "Custom sort all the rows in dataframe in one order excel", "body": "<p>I have an excel file which contain row values in non organized manner.I want to organize every row by aligning same data dedicated to one column.\nFor example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FG7jI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FG7jI.png\" alt=\"enter image description here\"></a></p>\n\n<p>I would like to format the file as:\n<a href=\"https://i.stack.imgur.com/rbRRn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rbRRn.png\" alt=\"enter image description here\"></a></p>\n\n<p>The attribute name and its value should be copied as well  across every row and not just the attribute name.</p>\n\n<p>Python Code:</p>\n\n<pre><code>    import pandas as pd\n    import glob\n\n    for f in glob.glob(\"../Book1.xlsx\"):\n    df = pd.read_excel(f)\n\n    df1=df.apply(lambda x: sorted(x.values), axis=1)\n</code></pre>\n\n<p>But it is sorting all the values in below format:<a href=\"https://i.stack.imgur.com/am5G2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/am5G2.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want the sorting of only Attribute column and Value column should be attached to Attribute always. i.e Paper Size have value Legal so while sorting it should attached to Paper_size only and not to other attribute.</p>\n\n<p>Can this be achieved in python ?\nThankyou</p>\n"}]