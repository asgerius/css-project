[{"tags": ["python", "dom"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1420676149, "post_id": 27830834, "comment_id": 44067834, "body": "At the very bottom of <a href=\"https://docs.python.org/2/library/xml.dom.html\" rel=\"nofollow noreferrer\">the documentation</a> you can see that they warn that element collections are not live like in the real DOM. This is not usually a problem because you&#39;re not scripting in a browser on a webpage with scripts; you&#39;re just manipulating static parsed HTML. For this case and many others, you should be able to achieve your desired effect just by altering your code (e.g., iterate over <code>fonts</code> instead of always looking at the first element). Is your question how to do this particular task, or how to get completely &quot;real&quot; DOM behavior?"}, {"owner": {"reputation": 4189, "user_id": 1940394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Svi8V.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/1940394/david"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1420676216, "post_id": 27830834, "comment_id": 44067857, "body": "@BrenBarn, both. I would love real DOM behavior, but if not, then how to solve this problem. Working in v3.4 if that changes anything."}], "answers": [{"comments": [{"owner": {"reputation": 4189, "user_id": 1940394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Svi8V.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/1940394/david"}, "edited": false, "score": 0, "creation_date": 1420692046, "post_id": 27831060, "comment_id": 44071736, "body": "I agree that things not moving on me may make it easier, as sometimes it&#39;s a pain. Other times, like with my original code, I use it to my advantage. :)"}], "tags": [], "owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "is_accepted": true, "score": 1, "last_activity_date": 1420676663, "creation_date": 1420676663, "answer_id": 27831060, "question_id": 27830834, "link": "https://stackoverflow.com/questions/27830834/python-minidom-not-removing-elements-properly/27831060#27831060", "title": "Python MiniDom not removing elements properly", "body": "<p>You can see in <a href=\"https://docs.python.org/2/library/xml.dom.html\" rel=\"nofollow\">the documentation</a> for Python DOM (very bottom of the page) that it doesn't work like a \"real\" DOM in the sense that collections like you get from <code>getElementsByTagName</code> are not \"live\".  Using <code>getElementsByTagName</code> here just returns a static snapshot of the matching elements at that moment.  This isn't usually a problem with Python, because when you're using <code>xml.dom</code> you're not working with a live-updating page inside a browser; you're just manipulating a static DOM parsed from a file or string, so you know no other code is messing with the DOM while you aren't looking.</p>\n\n<p>In most cases, you can probably get what you want by changing the structure of your code to reflect this.  For this case, you should be able to accomplish your goal with something like this:</p>\n\n<pre><code>fonts = doc.getElementsByTagName('font')\n\nfor font in fonts:\n    # Create a new span\n    span = doc.createElement(\"span\")\n    # Give it a class name based on the color (colors is a map)\n    span.setAttribute(\"class\", colors[font.getAttribute(\"color\")])\n\n    # Place all the children inside\n    while(font.firstChild):\n        span.appendChild(font.firstChild)\n    # end while\n\n    # Replace the &lt;font&gt; with a the &lt;span&gt;\n    font.parentNode.replaceChild(span, font)\n</code></pre>\n\n<p>The idea is that instead of always looking at the first element in <code>fonts</code>, you iterate over each one and replace them one at a time.</p>\n\n<p>Because of these differences, if your JavaScript DOM code makes use of these sorts of on-the-fly DOM updates, you won't be able to port it \"verbatim\" to Python (using the same DOM calls).  However, sometimes doing it in this less dynamic way can be easier, because things change less under your feet.</p>\n"}], "owner": {"reputation": 4189, "user_id": 1940394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Svi8V.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/1940394/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 27831060, "answer_count": 1, "score": 1, "last_activity_date": 1420676663, "creation_date": 1420675111, "question_id": 27830834, "link": "https://stackoverflow.com/questions/27830834/python-minidom-not-removing-elements-properly", "title": "Python MiniDom not removing elements properly", "body": "<p>I'm converting a piece of JS code to Python, and I have been using mini DOM, but certain things aren't working right. They were working find when running in JavaScript. I'm converting because I want consistent changes / order (i.e. where the class attribute is added), as well as so I can use some of Pythons easier features.</p>\n\n<p>My latest issue that I've come across is this:</p>\n\n<pre><code>fonts = doc.getElementsByTagName('font')\n\nwhile(fonts.length &gt; 0):\n    # Create a new span\n    span = doc.createElement(\"span\")\n    # Give it a class name based on the color (colors is a map)\n    span.setAttribute(\"class\", colors[fonts[0].getAttribute(\"color\")])\n\n    # Place all the children inside\n    while(fonts[0].firstChild):\n        span.appendChild(fonts[0].firstChild)\n    # end while\n\n    # Replace the &lt;font&gt; with a the &lt;span&gt;\n    print(fonts[0].parentNode.toxml())\n    fonts[0].parentNode.replaceChild(span, fonts[0])\n# end while\n</code></pre>\n\n<p>The problem is that, unlike in JavaScript, the element isn't removed from <code>fonts</code> like it should be. Is there a better library I should be using that uses the standard (level 3) DOM rules, or am I going to just have to hack it out if I don't want to use xPath (what all the other DOM parsers seem to use)?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "python-2.7", "graph", "networkx", "graph-drawing"], "comments": [{"owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "edited": false, "score": 0, "creation_date": 1420675427, "post_id": 27830774, "comment_id": 44067615, "body": "Please check <code>G.order()</code> right before and right after the <code>for link in ...</code> loop"}, {"owner": {"reputation": 8907, "user_id": 1549135, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/734f78bfa617357edce993d5cbcb95f9?s=128&d=identicon&r=PG", "display_name": "Atais", "link": "https://stackoverflow.com/users/1549135/atais"}, "reply_to_user": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "edited": false, "score": 0, "creation_date": 1420675724, "post_id": 27830774, "comment_id": 44067692, "body": "Not sure if it&#39;s what you&#39;ve expected but before its printing 282 and after it is still 282 :-)"}, {"owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "edited": false, "score": 0, "creation_date": 1420675793, "post_id": 27830774, "comment_id": 44067711, "body": "hmm...  that rules out my guess for what the problem was (thought that networkx was maybe treating the end points of the edges as different objects from the nodes you had added)."}, {"owner": {"reputation": 8907, "user_id": 1549135, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/734f78bfa617357edce993d5cbcb95f9?s=128&d=identicon&r=PG", "display_name": "Atais", "link": "https://stackoverflow.com/users/1549135/atais"}, "reply_to_user": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "edited": false, "score": 0, "creation_date": 1420676031, "post_id": 27830774, "comment_id": 44067790, "body": "Whoa! the problem was stupid as hell."}, {"owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "edited": false, "score": 0, "creation_date": 1420676077, "post_id": 27830774, "comment_id": 44067809, "body": "alright - put the answer below...  I&#39;m curious.  I assume <code>pos</code> had strings or something non number in it?"}], "answers": [{"tags": [], "owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "is_accepted": true, "score": 0, "last_activity_date": 1424771793, "creation_date": 1424771793, "answer_id": 28692687, "question_id": 27830774, "link": "https://stackoverflow.com/questions/27830774/draw-graph-with-fixed-positioned-edges/28692687#28692687", "title": "Draw graph with fixed-positioned edges", "body": "<p>The X,Y data is not being treated as numbers.</p>\n\n<p>You can fix it with this:</p>\n\n<pre><code> xy = attributes.values()\n G.add_node(attributes.pop('id'), dict([('pos', (float(xy[0]),float(xy[1])) )]))\n</code></pre>\n\n<hr>\n\n<p>Note: this answer was edited into the question by the OP. I've moved it down here into the answers section and made it a community wiki so I won't earn any rep for it.</p>\n"}], "owner": {"reputation": 8907, "user_id": 1549135, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/734f78bfa617357edce993d5cbcb95f9?s=128&d=identicon&r=PG", "display_name": "Atais", "link": "https://stackoverflow.com/users/1549135/atais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 28692687, "answer_count": 1, "score": 1, "last_activity_date": 1424771839, "creation_date": 1420674721, "last_edit_date": 1424771839, "question_id": 27830774, "link": "https://stackoverflow.com/questions/27830774/draw-graph-with-fixed-positioned-edges", "title": "Draw graph with fixed-positioned edges", "body": "<p>I am trying to use NetworkX for Python and it was good so far, but I am stuck with drawing.</p>\n\n<p>My data is actually a list of crossroads in the city. Nodes are the crossroads with X,Y (Latitude, Longitude) and edges should be the roads. So far so simple.</p>\n\n<p>So I managed to draw my little city with fixed positions:</p>\n\n<pre><code>    G = nx.Graph()\n    for node in nodes:\n      attributes = dict(node.items())\n      G.add_node(attributes.pop('id'))\n      G.node[node.get('id')]['pos'] = attributes.values()\n\n    pos = nx.get_node_attributes(G, 'pos')\n    nx.draw(G,pos)\n    plt.show()\n</code></pre>\n\n<p>It looks like this:\n<img src=\"https://i.stack.imgur.com/x9ZQr.png\" alt=\"A map without edges\"></p>\n\n<p>Exactly like I want it to, but I need to add the edges.\nSo if I add them like:</p>\n\n<pre><code>    G = nx.Graph()\n    for node in nodes:\n      attributes = dict(node.items())\n      G.add_node(attributes.pop('id'))\n      G.node[node.get('id')]['pos'] = attributes.values()\n\n    for link in links:\n      attributes = dict(link.items())\n      G.add_edge(attributes.pop('from'), attributes.pop('to'))\n\n    pos = nx.get_node_attributes(G, 'pos')\n    nx.draw(G,pos)\n    plt.show()\n</code></pre>\n\n<p>I get this horrible error:</p>\n\n<pre><code>Traceback (most recent call last):\n   File \"ms/Main.py\", line 28, in &lt;module&gt;\n nx.draw(G,pos)\n   File \"/usr/local/lib/python2.7/site-packages/networkx/drawing/nx_pylab.py\", line 131, in draw\n draw_networkx(G, pos=pos, ax=ax, **kwds)\n    File \"/usr/local/lib/python2.7/site-packages/networkx/drawing/nx_pylab.py\", line 265, in draw_networkx\n edge_collection = draw_networkx_edges(G, pos, **kwds)\n    File \"/usr/local/lib/python2.7/site-packages/networkx/drawing/nx_pylab.py\", line 610, in draw_networkx_edges\n minx = numpy.amin(numpy.ravel(edge_pos[:, :, 0]))\n    File \"/usr/local/lib/python2.7/site-packages/numpy/core/fromnumeric.py\", line 2216, in amin\n out=out, keepdims=keepdims)\n    File \"/usr/local/lib/python2.7/site-packages/numpy/core/_methods.py\", line 29, in _amin\n return umr_minimum(a, axis, None, out, keepdims)\n TypeError: cannot perform reduce with flexible type\n</code></pre>\n\n<p>If I do not set the fixed positions I am able to draw it no problem, but I quite need the edges to be static. Any advice? Thanks a lot!</p>\n"}, {"tags": ["python", "function", "module", "call"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 2, "creation_date": 1420675039, "post_id": 27830767, "comment_id": 44067498, "body": "Is there an <a href=\"https://docs.python.org/2/tutorial/modules.html#importing-from-a-package\" rel=\"nofollow noreferrer\"><code>__all__</code></a> variable in <code>usual.py</code>?"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 1, "creation_date": 1420675921, "post_id": 27830767, "comment_id": 44067756, "body": "Are you importing the right <code>usual.py</code>? In <code>tankython.py</code>, add <code>import usual</code> then <code>print usual.__file__</code>."}, {"owner": {"reputation": 963, "user_id": 4350767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fb890e9162db6bd6933e58828c1cb633?s=128&d=identicon&r=PG&f=1", "display_name": "Dirty_Fox", "link": "https://stackoverflow.com/users/4350767/dirty-fox"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1420676757, "post_id": 27830767, "comment_id": 44068014, "body": "@rawing No there is no such things"}, {"owner": {"reputation": 963, "user_id": 4350767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fb890e9162db6bd6933e58828c1cb633?s=128&d=identicon&r=PG&f=1", "display_name": "Dirty_Fox", "link": "https://stackoverflow.com/users/4350767/dirty-fox"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1420676802, "post_id": 27830767, "comment_id": 44068026, "body": "@tdelaney It returns usual.pyc"}], "answers": [{"comments": [{"owner": {"reputation": 963, "user_id": 4350767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fb890e9162db6bd6933e58828c1cb633?s=128&d=identicon&r=PG&f=1", "display_name": "Dirty_Fox", "link": "https://stackoverflow.com/users/4350767/dirty-fox"}, "edited": false, "score": 0, "creation_date": 1420680881, "post_id": 27831101, "comment_id": 44069118, "body": "the problem is, I need to import other stuff from this module. I tried just to see . It now says that it cannot import check_list. Very very strange."}], "tags": [], "owner": {"reputation": 3366, "user_id": 2193418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12788df365569bd764b6c51f7ed22199?s=128&d=identicon&r=PG&f=1", "display_name": "lqhcpsgbl", "link": "https://stackoverflow.com/users/2193418/lqhcpsgbl"}, "is_accepted": false, "score": 1, "last_activity_date": 1420680611, "last_edit_date": 1420680611, "creation_date": 1420676891, "answer_id": 27831101, "question_id": 27830767, "link": "https://stackoverflow.com/questions/27830767/function-from-a-module-not-imported-in-python/27831101#27831101", "title": "function from a module not imported in python", "body": "<p>Try to put file tankython.py and usual.py in the <strong>same folder</strong> and use the </p>\n\n<pre><code>from usual import check_list\n</code></pre>\n\n<p>instead of  </p>\n\n<pre><code>from usual import *\n</code></pre>\n\n<p>May help.\nOr you can try:</p>\n\n<pre><code>import usual\n</code></pre>\n\n<p>Then change code like:</p>\n\n<pre><code>usual.check_list()\n</code></pre>\n\n<p>And </p>\n\n<pre><code>from module import *\n</code></pre>\n\n<p>is not a good way to import something if two packages have the same name functions.</p>\n"}, {"tags": [], "owner": {"reputation": 963, "user_id": 4350767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fb890e9162db6bd6933e58828c1cb633?s=128&d=identicon&r=PG&f=1", "display_name": "Dirty_Fox", "link": "https://stackoverflow.com/users/4350767/dirty-fox"}, "is_accepted": false, "score": 0, "last_activity_date": 1420681181, "creation_date": 1420681181, "answer_id": 27831675, "question_id": 27830767, "link": "https://stackoverflow.com/questions/27830767/function-from-a-module-not-imported-in-python/27831675#27831675", "title": "function from a module not imported in python", "body": "<p>I find another solution, although it is not the most elegan one, especially because it did not explain what went wrong. However, I renamed the entire module usual by f_usual and it is working perfectly fine.</p>\n\n<p>Thanks for your help</p>\n"}], "owner": {"reputation": 963, "user_id": 4350767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/fb890e9162db6bd6933e58828c1cb633?s=128&d=identicon&r=PG&f=1", "display_name": "Dirty_Fox", "link": "https://stackoverflow.com/users/4350767/dirty-fox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2002, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1420681181, "creation_date": 1420674691, "question_id": 27830767, "link": "https://stackoverflow.com/questions/27830767/function-from-a-module-not-imported-in-python", "title": "function from a module not imported in python", "body": "<p>Good evenning guys,</p>\n\n<p>I ve got that weird behavior. Any help would be appreciated. </p>\n\n<p>Here is a function from a module called tankython, calling a function from a module called usual. However, it looks like Python refuses to recognize the function. Here is the code </p>\n\n<pre><code>#tankython.py\n\nfrom usual import * \nfrom get_data import *\nfrom settings import *\nfrom actif_class import * \n\ndef tanking(list_spreads,settings):    \n####    Tanking    ####  \n    fenetre = settings.fenetre    \n    list_spread_exit,list_spread_temp= [],[]\n\n    ii= 0       \n    for spread in list_spreads : \n        avc = ii * 100/float(len(list_spreads))\n        print \"Be patient. Tanking in progress...\" , avc,\"%\"\n        info = tankython (list_spreads,fenetre,ii) \n        list_spread_temp.append(info)\n        ii = ii + 1\n    list_spread_exit = check_list(list_spread_temp)\n\n    return list_spread_exit\n\n#usual.py\n\ndef check_list(list_entry):\n    i = 0\n    while i &lt; len(list_entry):\n        if list_entry[i] == 0 :\n            list_entry.pop(i)\n        else : \n            i = i+ 1\n    return list_entry\n</code></pre>\n\n<p>Here is the error message which I found really weird as I asked Py to import everything from usual.py:</p>\n\n<pre><code>File \"tankython.py\", line 77, in tanking\n  list_spread_exit = check_list(list_spread_temp)\n\nNameError: global name 'check_list' is not defined\n</code></pre>\n\n<p>One last thing: eventually, if I put the function in tankython module, then Py accepts to goes through the entire process. However I really would like to know if there is anything I am doing wrong here. </p>\n\n<p>Cheers guys</p>\n"}, {"tags": ["python", "string"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 3, "creation_date": 1420674432, "post_id": 27830711, "comment_id": 44067329, "body": "You can&#39;t add methods to builtin types in Python.  You&#39;d have to define your own subclass of <code>str</code> and use that instead."}, {"owner": {"reputation": 199, "user_id": 3024151, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/72QXE.jpg?s=128&g=1", "display_name": "TheMountainFurnaceGabriel", "link": "https://stackoverflow.com/users/3024151/themountainfurnacegabriel"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1420674542, "post_id": 27830711, "comment_id": 44067353, "body": "Okay, thanks @BrenBarn"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user764357"}, "is_accepted": true, "score": 1, "last_activity_date": 1420676071, "creation_date": 1420676071, "answer_id": 27830972, "question_id": 27830711, "link": "https://stackoverflow.com/questions/27830711/how-do-i-give-a-string-object-a-custom-method-in-python/27830972#27830972", "title": "How do I give a string object a custom method in Python?", "body": "<p>Sadly, you can't even monkey-patch attributes onto built-in types. This:</p>\n\n<pre><code>def log(self):\n    print \"logging \"+self\nstr.log = log \n\nstr(\"hello\")\n\nprint \"hello\".log()\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>Traceback (most recent call last):\n  Line 3, in &lt;module&gt;\n    str.log = log \nTypeError: can't set attributes of built-in/extension type 'str'\n</code></pre>\n\n<p>The best way to do this is to just write a logging method, like so:</p>\n\n<pre><code>def log(s):\n    print(\"my-prefix -- \"+s)\n\nlog(\"hello\")\n</code></pre>\n\n<p>The advantage of this is that, if at a later stage, you decide to not print your logging statements, but pipe them into a file, you only need to change the <code>log</code> function, not the many places you have the print statements, for example:</p>\n\n<pre><code>def log(s):\n    with open(\"my_log.txt\",w) as f:\n        data = f.write(\"the time - \" + s)\n\nlog(\"hello\")\n</code></pre>\n\n<p>Now, all your logging statements go to the file, without having to change the actual logging call.</p>\n"}], "owner": {"reputation": 199, "user_id": 3024151, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/72QXE.jpg?s=128&g=1", "display_name": "TheMountainFurnaceGabriel", "link": "https://stackoverflow.com/users/3024151/themountainfurnacegabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 27830972, "answer_count": 1, "score": 0, "last_activity_date": 1435909963, "creation_date": 1420674338, "last_edit_date": 1435909963, "question_id": 27830711, "link": "https://stackoverflow.com/questions/27830711/how-do-i-give-a-string-object-a-custom-method-in-python", "title": "How do I give a string object a custom method in Python?", "body": "<p>Similar to \".format\", I want to be able to automatically prefix the time before a string. I really have no idea to do it but I think it might look something like this.</p>\n\n<pre><code>&gt;&gt;print(\"Function __init__ at CLASS myClass running...\".log())\n</code></pre>\n\n<p>Prints:</p>\n\n<blockquote>\n  <blockquote>\n    <p>[myPrefix] Function <strong>init</strong> at CLASS myClass running...</p>\n  </blockquote>\n</blockquote>\n\n<p>I have no idea in the world of how I would do this.</p>\n"}, {"tags": ["python", "django", "django-haystack", "xapian"], "owner": {"reputation": 414, "user_id": 1211607, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/018b2fe44f474d0e56131d4864374bf7?s=128&d=identicon&r=PG", "display_name": "jrast", "link": "https://stackoverflow.com/users/1211607/jrast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1420674305, "creation_date": 1420674305, "question_id": 27830708, "link": "https://stackoverflow.com/questions/27830708/django-haystack-xapian-case-insensitive-search-with-autoquery", "title": "Django Haystack + Xapian: Case Insensitive Search with AutoQuery", "body": "<p>I'm using Django with Haystack as Search Engine and as backend Xapian. How can I achive that all searches are performed case insensitive? For the user it would be a lot easier if the search engine ignores the case and just returns all values for the given search query.</p>\n\n<p>My search index looks like this at the moment (simplified):\n</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>def ArticleIndex(indexes.SearchIndex, indexes.Indexable):\n    text = indexes.EdgeNgramField(document=True, use_template=True)\n    name = indexes.CharField(model_attr='title')\n\n    def get_model(self):\n        return Article\n</code></pre>\n\n<p>And I'm using the <code>SearchView</code> and <code>SearchForm</code> included in django-haystack.</p>\n\n<p>At the moment a query for 'Plat' gives 3 results, which is correct, a query for 'plat' returns no results, which is also correct if the search is done case sensitive.</p>\n"}, {"tags": ["python", "xml", "python-2.7", "xml-parsing", "elementtree"], "comments": [{"owner": {"reputation": 17029, "user_id": 1669860, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/i3rVM.png?s=128&g=1", "display_name": "Kayce Basques", "link": "https://stackoverflow.com/users/1669860/kayce-basques"}, "edited": false, "score": 0, "creation_date": 1420849548, "post_id": 27830673, "comment_id": 44145379, "body": "Can you add the Python code which you are using to parse the XML?"}], "answers": [{"comments": [{"owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "edited": false, "score": 0, "creation_date": 1420852312, "post_id": 27835532, "comment_id": 44146064, "body": "i already read it and tried this namespace registration but it didn&#39;t help."}], "tags": [], "owner": {"reputation": 315, "user_id": 646402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2mstA.png?s=128&g=1", "display_name": "Sophie", "link": "https://stackoverflow.com/users/646402/sophie"}, "is_accepted": false, "score": 1, "last_activity_date": 1420704438, "creation_date": 1420704438, "answer_id": 27835532, "question_id": 27830673, "link": "https://stackoverflow.com/questions/27830673/parsing-xml-with-namespaces-using-elementtree-in-python/27835532#27835532", "title": "Parsing XML with namespaces using ElementTree in Python", "body": "<p>From what I gather, it has something to do with the namespace recognition in ET.</p>\n\n<p>from here <a href=\"http://effbot.org/zone/element-namespaces.htm\" rel=\"nofollow\">http://effbot.org/zone/element-namespaces.htm</a></p>\n\n<blockquote>\n  <p>When you save an Element tree to XML, the standard Element serializer generates unique prefixes for all URI:s that appear in the tree. The prefixes usually have the form \u201cns\u201d followed by a number. For example, the above elements might be serialized with the prefix ns0 for \u201c<a href=\"http://www.w3.org/1999/xhtml\" rel=\"nofollow\">http://www.w3.org/1999/xhtml</a>\u201d and ns1 for \u201c<a href=\"http://effbot.org/namespace/letters\" rel=\"nofollow\">http://effbot.org/namespace/letters</a>\u201d.</p>\n</blockquote>\n\n<p>If you want to use specific prefixes, you can add prefix/uri mappings to a global table in the ElementTree module. In 1.3 and later, you do this by calling the register_namespace function. In earlier versions, you can access the internal table directly:</p>\n\n<h1>ElementTree 1.3</h1>\n\n<p>ET.register_namespace(prefix, uri)</p>\n\n<h1>ElementTree 1.2 (Python 2.5)</h1>\n\n<p>ET._namespace_map[uri] = prefix</p>\n\n<p>Note the argument order; the function takes the prefix first, while the raw dictionary maps from URI:s to prefixes.</p>\n"}, {"tags": [], "owner": {"reputation": 41716, "user_id": 407651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e1f48e20177ed6c4c3197a9a92f48e5?s=128&d=identicon&r=PG", "display_name": "mzjn", "link": "https://stackoverflow.com/users/407651/mzjn"}, "is_accepted": true, "score": 5, "last_activity_date": 1420884354, "creation_date": 1420884354, "answer_id": 27874979, "question_id": 27830673, "link": "https://stackoverflow.com/questions/27830673/parsing-xml-with-namespaces-using-elementtree-in-python/27874979#27874979", "title": "Parsing XML with namespaces using ElementTree in Python", "body": "<p>This snippet from your question,</p>\n\n<pre><code>for a in root.findall('{urn:com:xml:data}image'):\n    print a.attrib\n</code></pre>\n\n<p>does not output anything because it only looks for direct <code>{urn:com:xml:data}image</code> children of the root of the tree.</p>\n\n<p>This slightly modified code,</p>\n\n<pre><code>for a in root.findall('.//{urn:com:xml:data}image'):\n    print a.attrib\n</code></pre>\n\n<p>will print <code>{'imageId': '1'}</code> because it uses <code>.//</code>, which selects matching subelements on all levels.</p>\n\n<p>Reference: <a href=\"https://docs.python.org/2/library/xml.etree.elementtree.html#supported-xpath-syntax\" rel=\"noreferrer\">https://docs.python.org/2/library/xml.etree.elementtree.html#supported-xpath-syntax</a>.</p>\n\n<hr>\n\n<p>It is a bit annoying that ElementTree does not just retain the original namespace prefixes by default, but keep in mind that it is not the prefixes that matter anyway. The <code>register_namespace()</code> function can be used to set the wanted prefix when <em>serializing</em> the XML. The function does not have any effect on parsing or searching.</p>\n"}], "owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5735, "favorite_count": 2, "accepted_answer_id": 27874979, "answer_count": 2, "score": 1, "last_activity_date": 1594327168, "creation_date": 1420674093, "last_edit_date": 1420852035, "question_id": 27830673, "link": "https://stackoverflow.com/questions/27830673/parsing-xml-with-namespaces-using-elementtree-in-python", "title": "Parsing XML with namespaces using ElementTree in Python", "body": "<p>I have an xml, small part of it looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" ?&gt;\n&lt;i:insert xmlns:i=\"urn:com:xml:insert\" xmlns=\"urn:com:xml:data\"&gt;\n  &lt;data&gt;\n    &lt;image imageId=\"1\"&gt;&lt;/image&gt;\n    &lt;content&gt;Content&lt;/content&gt;\n  &lt;/data&gt;\n&lt;/i:insert&gt;\n</code></pre>\n\n<p>When i parse it using <code>ElementTree</code> and save it to a file i see following:</p>\n\n<pre><code>&lt;ns0:insert xmlns:ns0=\"urn:com:xml:insert\" xmlns:ns1=\"urn:com:xml:data\"&gt;\n  &lt;ns1:data&gt;\n    &lt;ns1:image imageId=\"1\"&gt;&lt;/ns1:image&gt;\n    &lt;ns1:content&gt;Content&lt;/ns1:content&gt;\n  &lt;/ns1:data&gt;\n&lt;/ns0:insert&gt;\n</code></pre>\n\n<p>Why does it change prefixes and put them everywhere? Using <code>minidom</code> i don't have such problem. Is it configured? Documentation for <code>ElementTree</code> is very poor.\nThe problem is, that i can't find any node after such parsing, for example <code>image</code> - can't find it with or without namespace if i use it like <code>{namespace}image</code> or just <code>image</code>. Why's that? Any suggestions are strongly appreciated.</p>\n\n<p>What i already tried:</p>\n\n<pre><code>import xml.etree.ElementTree as ET\ntree = ET.parse('test.xml')\nroot = tree.getroot()\nfor a in root.findall('ns1:image'):\n    print a.attrib\n</code></pre>\n\n<p>This returns an error and the other one returns nothing:</p>\n\n<pre><code>for a in root.findall('{urn:com:xml:data}image'):\n    print a.attrib\n</code></pre>\n\n<p>I also tried to make namespace like this and use it:</p>\n\n<pre><code>namespaces = {'ns1': 'urn:com:xml:data'}\nfor a in root.findall('ns1:image', namespaces):\n    print a.attrib\n</code></pre>\n\n<p>It returns nothing. What am i doing wrong?</p>\n"}, {"tags": ["python", "performance", "memory", "memory-management"], "comments": [{"owner": {"reputation": 2313, "user_id": 901812, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/spPcK.jpg?s=128&g=1", "display_name": "Void Star", "link": "https://stackoverflow.com/users/901812/void-star"}, "edited": false, "score": 0, "creation_date": 1420674231, "post_id": 27830672, "comment_id": 44067268, "body": "Can we see the original code?"}, {"owner": {"reputation": 4049, "user_id": 1133802, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c77d19fe400931dea2eb52303a851bb6?s=128&d=identicon&r=PG", "display_name": "mostruash", "link": "https://stackoverflow.com/users/1133802/mostruash"}, "edited": false, "score": 0, "creation_date": 1420674621, "post_id": 27830672, "comment_id": 44067378, "body": "So each object approximately takes 1K memory. What kind of fields are they?"}, {"owner": {"reputation": 1072, "user_id": 1128609, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0c41c88167ae3bbad217cfb0657f7707?s=128&d=identicon&r=PG", "display_name": "Farzam", "link": "https://stackoverflow.com/users/1128609/farzam"}, "edited": false, "score": 0, "creation_date": 1420674629, "post_id": 27830672, "comment_id": 44067380, "body": "I Just simplified that. there are 10 other integer fields which I initialize all of them with zero. I think that&#39;s not much important. the same code in C should take about (4 * 7000000 bytes &lt; 30MB)"}], "answers": [{"comments": [{"owner": {"reputation": 1072, "user_id": 1128609, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0c41c88167ae3bbad217cfb0657f7707?s=128&d=identicon&r=PG", "display_name": "Farzam", "link": "https://stackoverflow.com/users/1128609/farzam"}, "edited": false, "score": 0, "creation_date": 1420675828, "post_id": 27830757, "comment_id": 44067727, "body": "thanks very much, I tried that and memory usage became about 1.5 GBs(originally 8GBs). but as I said in the comments, the equivalent C program should take about 300MBs. it means that python takes 5 times more memory."}, {"owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "edited": false, "score": 0, "creation_date": 1420676015, "post_id": 27830757, "comment_id": 44067784, "body": "The size of the normal class should really include the size of its <code>__dict__</code> as well. eg. <code>sys.getsizeof(n) + sys.getsizeof(vars(n))</code>. <code>getsizeof</code> doesn&#39;t count size of the dict as its a separate object."}, {"owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "reply_to_user": {"reputation": 1072, "user_id": 1128609, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0c41c88167ae3bbad217cfb0657f7707?s=128&d=identicon&r=PG", "display_name": "Farzam", "link": "https://stackoverflow.com/users/1128609/farzam"}, "edited": false, "score": 0, "creation_date": 1420676587, "post_id": 27830757, "comment_id": 44067961, "body": "@Farzam Well in Python everything is object, including classes, integers etc. Though that&#39;s not the case with C/C++."}, {"owner": {"reputation": 1072, "user_id": 1128609, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0c41c88167ae3bbad217cfb0657f7707?s=128&d=identicon&r=PG", "display_name": "Farzam", "link": "https://stackoverflow.com/users/1128609/farzam"}, "edited": false, "score": 0, "creation_date": 1420676809, "post_id": 27830757, "comment_id": 44068027, "body": "@AshwiniChaudhary I know, but even if you use class in C++, there is not much noticeable difference(compared to the difference with python). So what does python store in these extra memories?"}, {"owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "reply_to_user": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "edited": false, "score": 0, "creation_date": 1420677551, "post_id": 27830757, "comment_id": 44068229, "body": "@Dunes Oh! yes, and size of <code>__slots__</code> in case of the second one."}, {"owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "reply_to_user": {"reputation": 1072, "user_id": 1128609, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0c41c88167ae3bbad217cfb0657f7707?s=128&d=identicon&r=PG", "display_name": "Farzam", "link": "https://stackoverflow.com/users/1128609/farzam"}, "edited": false, "score": 0, "creation_date": 1420677853, "post_id": 27830757, "comment_id": 44068304, "body": "@Farzam You can read a little about CPython here: <a href=\"https://jakevdp.github.io/blog/2014/05/09/why-python-is-slow/\" rel=\"nofollow noreferrer\">jakevdp.github.io/blog/2014/05/09/why-python-is-slow</a>"}, {"owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "edited": false, "score": 0, "creation_date": 1420678318, "post_id": 27830757, "comment_id": 44068459, "body": "Not so for slots. <code>__slots__</code> exists on the class, and the additional space required to store the members is located directly on the object."}], "tags": [], "owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "is_accepted": true, "score": 3, "last_activity_date": 1420675031, "last_edit_date": 1420675031, "creation_date": 1420674649, "answer_id": 27830757, "question_id": 27830672, "link": "https://stackoverflow.com/questions/27830672/high-memory-usage-in-python/27830757#27830757", "title": "High memory usage in python", "body": "<p>If you have fixed number of fields then you can use <code>__slots__</code> to save quite a lot of memory. Note that <code>__slots__</code> do have some limitations, so make sure your read the <a href=\"https://docs.python.org/2/reference/datamodel.html#slots\" rel=\"nofollow\"><strong>Notes on using <code>__slots__</code></strong></a> carefully before choosing to use them in your application:</p>\n\n<pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; class Node(object):\n    NumberOfNodes = 0\n    def __init__(self):\n        Node.NumberOfNodes += 1\n...         \n&gt;&gt;&gt; n = Node()\n&gt;&gt;&gt; sys.getsizeof(n)\n64\n&gt;&gt;&gt; class Node(object):\n    __slots__ = ()\n    NumberOfNodes = 0\n    def __init__(self):\n        Node.NumberOfNodes += 1\n...         \n&gt;&gt;&gt; n = Node()\n&gt;&gt;&gt; sys.getsizeof(n)\n16\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "is_accepted": false, "score": 2, "last_activity_date": 1420678061, "last_edit_date": 1420678061, "creation_date": 1420677731, "answer_id": 27831219, "question_id": 27830672, "link": "https://stackoverflow.com/questions/27830672/high-memory-usage-in-python/27831219#27831219", "title": "High memory usage in python", "body": "<p>Python is an inherently memory heavy programming language. There are some ways you can get around this. <code>__slots__</code> is one way. Another, more extreme approach is to use numpy to store your data. You can use numpy to create a structured array or record -- a complex data type that uses minimal memory, but suffers a substantial loss of functionality compared to a normal python class. That is, you are working with the numpy array class, rather than your own class -- you cannot define your own methods on your array.</p>\n\n<pre><code>import numpy as np\n\n# data type for a record with three 32-bit ints called x, y and z\ndtype = [(name, np.int32) for name in 'xyz']\narr = np.zeros(1000, dtype=dtype)\n# access member of x of a record\narr[0]['x'] = 1 # name based access\n# or\nassert arr[0][0] == 1 # index based access\n# accessing all x members of records in array\nassert arr['x'].sum() == 1\n# size of array used to store elements in memory\nassert arr.nbytes == 12000 # 1000 elements * 3 members * 4 bytes per int\n</code></pre>\n\n<p>See more <a href=\"http://docs.scipy.org/doc/numpy/user/basics.rec.html\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 1072, "user_id": 1128609, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0c41c88167ae3bbad217cfb0657f7707?s=128&d=identicon&r=PG", "display_name": "Farzam", "link": "https://stackoverflow.com/users/1128609/farzam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 27830757, "answer_count": 2, "score": 0, "last_activity_date": 1420678061, "creation_date": 1420674089, "question_id": 27830672, "link": "https://stackoverflow.com/questions/27830672/high-memory-usage-in-python", "title": "High memory usage in python", "body": "<p>The following simple python code:</p>\n\n<pre><code>class Node:\n    NumberOfNodes = 0\n    def __init__(self):\n        Node.NumberOfNodes += 1\nif __name__ == '__main__':\n    nodes = []\n    for i in xrange(1, 7 * 1000 * 1000):\n        if i % 1000 == 0:\n            print i\n        nodes.append(Node())\n</code></pre>\n\n<p>takes gigabytes of memory;\nWhich I think is irrational. Is that normal in python?</p>\n\n<p>How could I fix that?(in my original code, I have about 7 million objects each with 10 fields and that takes 8 gigabytes of RAM)</p>\n"}, {"tags": ["python", "brython"], "comments": [{"owner": {"reputation": 4514, "user_id": 362754, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4f94dacdb4bdf32a0a48f4a50233dd95?s=128&d=identicon&r=PG", "display_name": "minghua", "link": "https://stackoverflow.com/users/362754/minghua"}, "edited": false, "score": 0, "creation_date": 1431022194, "post_id": 27830665, "comment_id": 48328190, "body": "how usable if the browser.py is used in a local environment (just run through a host python, without the server and browser)?"}], "answers": [{"tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": true, "score": 2, "last_activity_date": 1420766018, "creation_date": 1420766018, "answer_id": 27852392, "question_id": 27830665, "link": "https://stackoverflow.com/questions/27830665/using-same-rendering-code-for-client-side-and-server-side/27852392#27852392", "title": "Using same rendering code for client side and server side", "body": "<p>The portion of code you are using is short, elegant, and quite specific - \nit will be Python compatible on the server side, as you have noted, and you it won't be easy to find another piece of code for this kind of rendering that is so concise and able\nto work on Brython's client side (as it does not yet achieve 100% compatibility with Python).</p>\n\n<p>That said, I think it is more than ok to reuse this code on the server side on your project.</p>\n\n<p>Note that by carefully laying out files in your project directories, it <em>is</em> possible\nto have some files to be imported both on server and client side. If done correctly,\nthis can make a great deal of work simpler. </p>\n"}], "owner": {"reputation": 20870, "user_id": 40916, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/24ac39488e9c4f2833d087a1343707dc?s=128&d=identicon&r=PG", "display_name": "yairchu", "link": "https://stackoverflow.com/users/40916/yairchu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 1, "accepted_answer_id": 27852392, "answer_count": 1, "score": 2, "last_activity_date": 1420766018, "creation_date": 1420674059, "question_id": 27830665, "link": "https://stackoverflow.com/questions/27830665/using-same-rendering-code-for-client-side-and-server-side", "title": "Using same rendering code for client side and server side", "body": "<p>Does Brython has a recommended method for using the same rendering code in the server side?</p>\n\n<p>To do this currently I'm using my own <code>browser</code> module emulating Brython's on the server side for html rendering (<a href=\"https://github.com/yairchu/vote_tool/blob/master/browser.py\" rel=\"nofollow\">https://github.com/yairchu/vote_tool/blob/master/browser.py</a>), but I wonder if there's a better way..</p>\n"}, {"tags": ["python", "opencl", "gpu", "gpgpu", "pyopencl"], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 2287947, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/89d26bf0ddeb5e31fd1caea186634f16?s=128&d=identicon&r=PG", "display_name": "Bar Bokovza", "link": "https://stackoverflow.com/users/2287947/bar-bokovza"}, "edited": false, "score": 0, "creation_date": 1420814393, "post_id": 27842337, "comment_id": 44127947, "body": "after that, the code doesn&#39;t appear to run. It means that after reading from buffers the arrays are still the same."}, {"owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "reply_to_user": {"reputation": 131, "user_id": 2287947, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/89d26bf0ddeb5e31fd1caea186634f16?s=128&d=identicon&r=PG", "display_name": "Bar Bokovza", "link": "https://stackoverflow.com/users/2287947/bar-bokovza"}, "edited": false, "score": 0, "creation_date": 1420814700, "post_id": 27842337, "comment_id": 44128136, "body": "@user2287947 OK, that sounds like there is also a problem with your kernel code or the way in which you are reading data back to the host. You could open a new question if you need help investigating that."}, {"owner": {"reputation": 131, "user_id": 2287947, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/89d26bf0ddeb5e31fd1caea186634f16?s=128&d=identicon&r=PG", "display_name": "Bar Bokovza", "link": "https://stackoverflow.com/users/2287947/bar-bokovza"}, "edited": false, "score": 0, "creation_date": 1420815674, "post_id": 27842337, "comment_id": 44128831, "body": "the kernel works with opencl4py, BUT with pyOpenCL (i need to translate it later to pyCUDA) it doesn&#39;t work at all."}, {"owner": {"reputation": 6596, "user_id": 212731, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/754105f8a10a2398df45e8419688a5e2?s=128&d=identicon&r=PG", "display_name": "Hugh Perkins", "link": "https://stackoverflow.com/users/212731/hugh-perkins"}, "edited": false, "score": 0, "creation_date": 1466233946, "post_id": 27842337, "comment_id": 63242518, "body": "The author of this answer, ie James Price, has a rather neat debugger, ie <a href=\"https://github.com/jprice/Oclgrind\" rel=\"nofollow noreferrer\">github.com/jprice/Oclgrind</a> , which you could try using to debug your program interactively :-)"}], "tags": [], "owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "is_accepted": true, "score": 0, "last_activity_date": 1420726924, "creation_date": 1420726924, "answer_id": 27842337, "question_id": 27830650, "link": "https://stackoverflow.com/questions/27830650/pyopencl-fail-to-launch-a-kernel/27842337#27842337", "title": "PyOpenCL | Fail to launch a Kernel", "body": "<p>The first argument to your kernel invocation should be the command queue, not the context:</p>\n\n<p><code>program.SIMPLE_JOIN(</code><strong><code>queue</code></strong><code>, (a_col, b_col), None,  \\...</code></p>\n"}], "owner": {"reputation": 131, "user_id": 2287947, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/89d26bf0ddeb5e31fd1caea186634f16?s=128&d=identicon&r=PG", "display_name": "Bar Bokovza", "link": "https://stackoverflow.com/users/2287947/bar-bokovza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "accepted_answer_id": 27842337, "answer_count": 1, "score": 0, "last_activity_date": 1420726924, "creation_date": 1420673941, "question_id": 27830650, "link": "https://stackoverflow.com/questions/27830650/pyopencl-fail-to-launch-a-kernel", "title": "PyOpenCL | Fail to launch a Kernel", "body": "<p>When I'm using PyOpenCL to run the kernel \"SIMPLE_JOIN\" it fails.</p>\n\n<p><strong>HEADER OF THE KERNEL IN .CL FILE</strong></p>\n\n<pre><code>void SIMPLE_JOIN(__global const int* a, int a_col, __global const int* a_valuesPic,\n                 __global const int* b, int b_col, __global const int* b_valuesPic,\n                __global const int* join_valuesPic, __global int* current, const int maxVars, __global int* buffer, int joinVar)\n</code></pre>\n\n<p><strong>THE EXECUTION IN PyOpenCL</strong></p>\n\n<pre><code>program.SIMPLE_JOIN(context, (a_col, b_col), None,  \\\n                    buffer_a, np.int32(a_col), buffer_a_valPic, \\\n                    buffer_b, np.int32(b_col), buffer_b_valPic, \\\n                    buffer_join_valPic, buffer_current, np.int32(maxVars), \\\n                    buffer_result, np.int32(joinList[0]))\n</code></pre>\n\n<p><strong>THE ERROR IN THE COMMAND LINE</strong></p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Program Files (x86)\\JetBrains\\PyCharm Community Edition 4.0.2\\helpers\\pydev\\pydevd.py\", line 2199, in &lt;module&gt;\n    globals = debugger.run(setup['file'], None, None)\n  File \"C:\\Program Files (x86)\\JetBrains\\PyCharm Community Edition 4.0.2\\helpers\\pydev\\pydevd.py\", line 1638, in run\n    pydev_imports.execfile(file, globals, locals)  # execute the script\n  File \"C:/Users/\ufffd\ufffd/Documents/\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd/GAP+/gapQueryTree.py\", line 213, in &lt;module&gt;\n    res1_array, res1_ValsPic = gpu.gpu_join(p[0], p1_ValsPic, friend[0], friend1_ValsPic)\n  File \"C:/Users/\ufffd\ufffd/Documents/\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd/GAP+\\gapPyOpenCl.py\", line 107, in gpu_join\n    buffer_result, np.int32(joinList[0]))\n  File \"C:\\Python27\\lib\\site-packages\\pyopencl\\__init__.py\", line 515, in kernel_call\n    global_offset, wait_for, g_times_l=g_times_l)\nBoost.Python.ArgumentError: Python argument types in\n    pyopencl._cl.enqueue_nd_range_kernel(Context, Kernel, tuple, NoneType, NoneType, NoneType)\ndid not match C++ signature:\n    enqueue_nd_range_kernel(class pyopencl::command_queue {lvalue} queue, class pyopencl::kernel {lvalue} kernel, class boost::python::api::object global_work_size, class boost::python::api::object local_work_size, class boost::python::api::object global_work_offset=None, class boost::python::api::object wait_for=None, bool g_times_l=False)\n\nProcess finished with exit code -1\n</code></pre>\n"}, {"tags": ["python", "dijkstra"], "comments": [{"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1420673796, "post_id": 27830594, "comment_id": 44067156, "body": "<code>distances.get(k,float(&#39;inf&#39;))</code> means &quot;get the item in the <code>distances</code> dictionary with the key <code>k</code>, and if it&#39;s not there give me back infinity instead.&quot;"}, {"owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "edited": false, "score": 1, "creation_date": 1420674282, "post_id": 27830594, "comment_id": 44067286, "body": "By the way, it&#39;s worth taking a look at networkx if you&#39;re going to be doing a lot of network stuff in python."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1420674405, "post_id": 27830594, "comment_id": 44067323, "body": "<a href=\"http://stackoverflow.com/a/15534662/298607\">Here</a> is an example of Dijkstra&#39;s algorithm in Python"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 4237096, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-7tN29YNq--k/AAAAAAAAAAI/AAAAAAAAAKQ/yNINKJqT6Gs/photo.jpg?sz=128", "display_name": "WirJun", "link": "https://stackoverflow.com/users/4237096/wirjun"}, "edited": false, "score": 0, "creation_date": 1420673869, "post_id": 27830623, "comment_id": 44067174, "body": "ok but why does there is &quot;float(&#39;inf&#39;)&quot;? Do I get &quot;float(&#39;inf&#39;)&quot; if somebody calls distance??"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 101, "user_id": 4237096, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-7tN29YNq--k/AAAAAAAAAAI/AAAAAAAAAKQ/yNINKJqT6Gs/photo.jpg?sz=128", "display_name": "WirJun", "link": "https://stackoverflow.com/users/4237096/wirjun"}, "edited": false, "score": 0, "creation_date": 1420673939, "post_id": 27830623, "comment_id": 44067187, "body": "No, you get <code>inf</code> if there is no <code>k</code> key in the <code>dict</code> variable <code>distances</code>. It is a default value, not a neighbor value."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 0, "last_activity_date": 1420673770, "creation_date": 1420673770, "answer_id": 27830623, "question_id": 27830594, "link": "https://stackoverflow.com/questions/27830594/dijkstra-algorithm-with-python/27830623#27830623", "title": "Dijkstra algorithm with Python", "body": "<p><code>.get</code> is a <code>dict</code> method that gets the value based on the given key. For example</p>\n\n<pre><code>&gt;&gt;&gt; d = {'cat': 5}\n&gt;&gt;&gt; d.get('cat')\n5\n&gt;&gt;&gt; d['cat']\n5\n</code></pre>\n\n<p>The second argument is the default value to use if the key is not found.</p>\n\n<pre><code>&gt;&gt;&gt; d.get('dog', 1)\n1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 4237096, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-7tN29YNq--k/AAAAAAAAAAI/AAAAAAAAAKQ/yNINKJqT6Gs/photo.jpg?sz=128", "display_name": "WirJun", "link": "https://stackoverflow.com/users/4237096/wirjun"}, "edited": false, "score": 0, "creation_date": 1420674730, "post_id": 27830626, "comment_id": 44067408, "body": "ok, whould it be possible to write int(&#39;inf&#39;) instead of foat(&#39;inf&#39;)?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 101, "user_id": 4237096, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-7tN29YNq--k/AAAAAAAAAAI/AAAAAAAAAKQ/yNINKJqT6Gs/photo.jpg?sz=128", "display_name": "WirJun", "link": "https://stackoverflow.com/users/4237096/wirjun"}, "edited": false, "score": 1, "creation_date": 1420674853, "post_id": 27830626, "comment_id": 44067452, "body": "@WirJun, why don&#39;t you try it"}, {"owner": {"reputation": 101, "user_id": 4237096, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-7tN29YNq--k/AAAAAAAAAAI/AAAAAAAAAKQ/yNINKJqT6Gs/photo.jpg?sz=128", "display_name": "WirJun", "link": "https://stackoverflow.com/users/4237096/wirjun"}, "edited": false, "score": 0, "creation_date": 1420675191, "post_id": 27830626, "comment_id": 44067548, "body": "it&#39;s not possible, but i have no explanation why. I expected the distances in &quot;graph&quot; are int() so I can use int."}, {"owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "edited": false, "score": 0, "creation_date": 1420675289, "post_id": 27830626, "comment_id": 44067570, "body": "Python doesn&#39;t think infinity is an integer (and neither do I).  But there&#39;s no problem comparing an integer to a float.  <code>4&lt;4.5</code> will return <code>True</code>"}], "tags": [], "owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "is_accepted": true, "score": 1, "last_activity_date": 1420674155, "last_edit_date": 1420674155, "creation_date": 1420673784, "answer_id": 27830626, "question_id": 27830594, "link": "https://stackoverflow.com/questions/27830594/dijkstra-algorithm-with-python/27830626#27830626", "title": "Dijkstra algorithm with Python", "body": "<p>These all use <code>get</code>.  </p>\n\n<pre><code>D.get(key,default)\n</code></pre>\n\n<p>will look at the dict <code>D</code>.  If it has key <code>key</code> it will return <code>D[key]</code>.  If not it returns <code>default</code>.</p>\n\n<pre><code>D={'a':0}\n\nD.get('a', 4)\n&gt; 0\nD.get('b', 4)\n&gt;4 \n</code></pre>\n\n<p>So the second line </p>\n\n<pre><code>if new_distance &lt; distances.get(neighbor,float('inf')):\n</code></pre>\n\n<p>checks if the <code>new_distance</code> is less than the current best option, or if there is no a current best option, it will evaluate to <code>True</code> (since it's going to be less than infinity).</p>\n\n<p>The third line </p>\n\n<pre><code>unvisited[k] = distances.get(k,float('inf'))\n</code></pre>\n\n<p>gives <code>unvisited[k]</code> whatever the current distance is to <code>k</code> or else infinity if no distance is defined.</p>\n\n<p>Back to the first line</p>\n\n<pre><code>pred=predecessors.get(pred,None)\n</code></pre>\n\n<p>If <code>predecessors[pred]</code> is defined, it gives <code>pred = predecessors[pred]</code>.  If not, it sets <code>pred=None</code>.  <code>None</code> is a standard value used in Python to signal that something doesn't have a value.  Any function that doesn't return anything explicitly will instead return <code>None</code></p>\n"}, {"tags": [], "owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "is_accepted": false, "score": 0, "last_activity_date": 1435866866, "creation_date": 1435866866, "answer_id": 31193518, "question_id": 27830594, "link": "https://stackoverflow.com/questions/27830594/dijkstra-algorithm-with-python/31193518#31193518", "title": "Dijkstra algorithm with Python", "body": "<p><code>pred=predecessors.get(pred,None)</code> is equivalent to</p>\n\n<pre><code>pred=predecessors[pred] if pred in predecessors else None\n</code></pre>\n\n<p>which is the same as</p>\n\n<pre><code>if pred in predecessors:\n    pred = predecessors[pred]\nelse:\n    pred = None\n</code></pre>\n\n<p>Likewise, <code>if new_distance &lt; distances.get(neighbor,float('inf')):</code> is equivalent to</p>\n\n<pre><code>distance = distances[neighbor] if neighbor in distances else float('inf')\nif new_distance &lt; distance:\n</code></pre>\n\n<p>and <code>unvisited[k] = distances.get(k,float('inf'))</code> is equivalent to</p>\n\n<pre><code>unvisited[k] = distances[k] if k in distances else float('inf')\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 4237096, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-7tN29YNq--k/AAAAAAAAAAI/AAAAAAAAAKQ/yNINKJqT6Gs/photo.jpg?sz=128", "display_name": "WirJun", "link": "https://stackoverflow.com/users/4237096/wirjun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 0, "accepted_answer_id": 27830626, "answer_count": 3, "score": -1, "last_activity_date": 1435866866, "creation_date": 1420673541, "last_edit_date": 1420673687, "question_id": 27830594, "link": "https://stackoverflow.com/questions/27830594/dijkstra-algorithm-with-python", "title": "Dijkstra algorithm with Python", "body": "<p>Here is a part of a Dijkstra algorithm, i have some question  about some code, which I don't understand:</p>\n\n<p><a href=\"http://geekly-yours.blogspot.co.at/2014/03/dijkstra-algorithm-python-example-source-code-shortest-path.html\" rel=\"nofollow\">http://geekly-yours.blogspot.co.at/2014/03/dijkstra-algorithm-python-example-source-code-shortest-path.html</a></p>\n\n<p>Can somebody tell me, what these tree line do?</p>\n\n<pre><code>...\npred=predecessors.get(pred,None)\n...\n\nif new_distance &lt; distances.get(neighbor,float('inf')):\n...\n\nunvisited[k] = distances.get(k,float('inf')) #what does this .get(k,float('inf')) ??\n...\n</code></pre>\n"}, {"tags": ["python", "wxpython", "wxgrid"], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 2229838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/faeb3fd44f33ed052ca3c887b2c69a58?s=128&d=identicon&r=PG", "display_name": "user2229838", "link": "https://stackoverflow.com/users/2229838/user2229838"}, "edited": false, "score": 0, "creation_date": 1421613131, "post_id": 27928025, "comment_id": 44416157, "body": "Figured this out through some trial and error. Thanks for the answer though! This one is correct."}], "tags": [], "owner": {"reputation": 120, "user_id": 4320958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd95876ab41cf3e34059dddc6901c95?s=128&d=identicon&r=PG&f=1", "display_name": "Maxander", "link": "https://stackoverflow.com/users/4320958/maxander"}, "is_accepted": true, "score": 0, "last_activity_date": 1421170307, "creation_date": 1421170307, "answer_id": 27928025, "question_id": 27830558, "link": "https://stackoverflow.com/questions/27830558/sort-data-from-wxgrid/27928025#27928025", "title": "Sort Data from wxgrid", "body": "<p>The value returned from calling GetCellValue on an empty cell is the empty string (i.e., ''), not None; therefore, the condition in your if statement always returns as true.  Since the empty string evaluates as false, simply removing the \"!= None\" from the if statement should solve the problem.</p>\n"}], "owner": {"reputation": 189, "user_id": 2229838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/faeb3fd44f33ed052ca3c887b2c69a58?s=128&d=identicon&r=PG", "display_name": "user2229838", "link": "https://stackoverflow.com/users/2229838/user2229838"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 668, "favorite_count": 0, "accepted_answer_id": 27928025, "answer_count": 1, "score": 0, "last_activity_date": 1421170307, "creation_date": 1420673342, "last_edit_date": 1420676797, "question_id": 27830558, "link": "https://stackoverflow.com/questions/27830558/sort-data-from-wxgrid", "title": "Sort Data from wxgrid", "body": "<p>I'm attempting to get values from wxgrid for the last column in my grid (column 11) and append to a list if the cell is not empty. I can't seem to figure out why the list is being filled with a whole lot of empty values </p>\n\n<pre><code>phase_change=[]\nfor i in range(100):\n  if self.myGrid.GetCellValue(i, 11) != None:\n    phase_change.append(self.myGrid.GetCellValue(i, 11))\n  else:\n    print self.myGrid.GetCellValue(i, 11)\nfor phase in phase_change:\n  plt.axvline(x=phase, ymin=0, ymax=1.0, linewidth=12, color='w')\n  plt.axvline(x=phase, ymin=0, ymax=1.0, linewidth=1, color='k')\n</code></pre>\n\n<p>Can someone explain to me how I'm screwing this up?</p>\n"}, {"tags": ["python", "list-comprehension", "primes"], "comments": [{"owner": {"reputation": 6344, "user_id": 1084684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/32b10232489646c1940c202e91f475b9?s=128&d=identicon&r=PG", "display_name": "dstromberg", "link": "https://stackoverflow.com/users/1084684/dstromberg"}, "edited": false, "score": 1, "creation_date": 1420673583, "post_id": 27830428, "comment_id": 44067085, "body": "Just FYI: Lots of prime-related code in Python: <a href=\"http://stromberg.dnsalias.org/~dstromberg/primes/\" rel=\"nofollow noreferrer\">stromberg.dnsalias.org/~dstromberg/primes</a>"}], "answers": [{"tags": [], "owner": {"reputation": 15852, "user_id": 2294755, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/moDhz.jpg?s=128&g=1", "display_name": "Hackaholic", "link": "https://stackoverflow.com/users/2294755/hackaholic"}, "is_accepted": false, "score": 2, "last_activity_date": 1420672875, "creation_date": 1420672875, "answer_id": 27830462, "question_id": 27830428, "link": "https://stackoverflow.com/questions/27830428/primality-test-not-working-in-python/27830462#27830462", "title": "Primality Test not working in Python", "body": "<p>you can use <code>all</code>:</p>\n\n<pre><code>&gt;&gt;&gt; def prime_check(n):\n...     if n &gt; 1:\n...         return all(False for i in range(2, int(n ** 0.5) + 1) if n % i == 0)\n... \n&gt;&gt;&gt; prime_check(6)\nFalse\n&gt;&gt;&gt; prime_check(23)\nTrue\n&gt;&gt;&gt; prime_check(108)\nFalse\n&gt;&gt;&gt; prime_check(111)\nFalse\n&gt;&gt;&gt; prime_check(101)\nTrue\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "reply_to_user": {"reputation": 15852, "user_id": 2294755, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/moDhz.jpg?s=128&g=1", "display_name": "Hackaholic", "link": "https://stackoverflow.com/users/2294755/hackaholic"}, "edited": false, "score": 2, "creation_date": 1420673429, "post_id": 27830499, "comment_id": 44067030, "body": "<code>python -m timeit</code> is the best way to answer this and similar questions.  Put the alternative functions of interest with different names in <code>a.py</code>, and do <code>python -mtimeit -s&#39;import a&#39; &#39;a.isPrimeV1(248)&#39;</code> and so forth."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1420673534, "post_id": 27830499, "comment_id": 44067066, "body": "<code>not any(i for i in range if condition)</code>? Was that really necessary? Why not <code>all(n%i for i in range(2, int(n ** 0.5) + 1))</code>?"}, {"owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 2, "creation_date": 1420673749, "post_id": 27830499, "comment_id": 44067135, "body": "@Rawing, the two expressions are equivalent by De Morgan&#39;s theorem (extended to quantifiers); so neither can be &quot;really necessary&quot; as one can always substitute the other.  That&#39;s like asking if for two <code>int</code>s <code>a</code> and <code>b</code>, <code>a + b</code> &quot;is really necessary&quot; and &quot;why not <code>b + a</code>&quot;... a rather moot couple of questions:-)."}], "tags": [], "owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "is_accepted": true, "score": 3, "last_activity_date": 1420673078, "creation_date": 1420673078, "answer_id": 27830499, "question_id": 27830428, "link": "https://stackoverflow.com/questions/27830428/primality-test-not-working-in-python/27830499#27830499", "title": "Primality Test not working in Python", "body": "<p>As you want <code>False</code> if <strong>any</strong> lesser number is a divisor, code it directly that way:</p>\n\n<pre><code>def isPrime(n):\n    return n&lt;=1 or not any(i for i in range(2, int(n ** 0.5) + 1) if n % i == 0)\n</code></pre>\n\n<p>Note that this uses a <strong>genexp</strong>, not a <strong>listcomp</strong>, because that allows <code>any</code> to terminate the whole operation as soon as it finds any suitable <code>i</code> divisor and thus knows <code>n</code> cannot be prime.  List comprehensions generate an in-memory list of all their items, while generator expressions yield items one at a time, and only as long as they're being asked for \"the next one\" (by a <code>for</code> loop, an accumulator such as <code>any</code> or <code>all</code>, or directly by the <code>next</code> built-in).</p>\n"}, {"tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": false, "score": 2, "last_activity_date": 1420673338, "creation_date": 1420673338, "answer_id": 27830555, "question_id": 27830428, "link": "https://stackoverflow.com/questions/27830428/primality-test-not-working-in-python/27830555#27830555", "title": "Primality Test not working in Python", "body": "<p>The problem is that a list containg <code>False</code> evaluates to a boolean <code>True</code>:</p>\n\n<pre><code>&gt;&gt;&gt; isPrime(4)\n[False]\n&gt;&gt;&gt; bool([False])\nTrue\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 4430875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Klcx8.jpg?s=128&g=1", "display_name": "PolarBITS", "link": "https://stackoverflow.com/users/4430875/polarbits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 1, "accepted_answer_id": 27830499, "answer_count": 3, "score": 0, "last_activity_date": 1420673470, "creation_date": 1420672660, "last_edit_date": 1420673470, "question_id": 27830428, "link": "https://stackoverflow.com/questions/27830428/primality-test-not-working-in-python", "title": "Primality Test not working in Python", "body": "<p>I have been trying to compact my code for a primality test in python so that it makes use of list comprehensions, but for some reason it doesn't return the correct results:</p>\n\n<pre><code>def isPrime(n):\n    if n &gt; 1:\n        for i in range(2, int(n ** 0.5) + 1):\n            if n % i == 0:\n                return False\n        return True\n</code></pre>\n\n<p>That's the code for my current primality test, but I want to condense it:</p>\n\n<pre><code>def isPrime(n):\nif n &gt; 1:\n    return [False for i in range(2, int(n ** 0.5) + 1) if n % i == 0]\n    return True\n</code></pre>\n\n<p>I tried the above, but it outputs all non-prime integers up to n. What am I doing wrong?</p>\n"}, {"tags": ["python", "multiprocessing", "os.walk", "xlsxwriter"], "comments": [{"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1420673010, "post_id": 27830416, "comment_id": 44066893, "body": "You basically want to do the merge step of a merge-sort over two generators from the different directories..."}], "owner": {"reputation": 883, "user_id": 2505799, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a59deb710965acad69e1a60c45f1af3b?s=128&d=identicon&r=PG", "display_name": "MikG", "link": "https://stackoverflow.com/users/2505799/mikg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1420672597, "creation_date": 1420672597, "question_id": 27830416, "link": "https://stackoverflow.com/questions/27830416/alternating-or-concurrent-yet-syncd-directory-walking-in-python", "title": "Alternating or concurrent yet sync&#39;d directory walking in Python", "body": "<p>I'm not sure this question is realistic or indeed possible, but here goes.  I have two directories lets call them FIRST_DIR and SECOND_DIR, and in each folder I have matching logs and log names like below..</p>\n\n<pre><code>FIRST DIR\n  F_log1.txt\n  F_log2.txt\n  ...\n\nSECOND_DIR\n  S_log1.txt\n  S_log2.txt\n  ...\n</code></pre>\n\n<p>I have seen examples on SO like that shown below from previous posts, but this processes all logs in one directory first and then all logs in the second directory.  I'm more looking for processing F_log1.txt then S_log1.txt and F_log2.txt then S_log2.txt, so that I can gather like for like log stats to plot into an Excel chart using xlsxwriter as I go.</p>\n\n<pre><code>paths = ('C:\\FIRST_DIR', 'C:\\SECOND_DIR')\nfor path, dirs, files in chain.from_iterable(os.walk(path) for path in paths):\n</code></pre>\n\n<p>The above would normally be fine for a couple of logs, I could collect lists of stats from each log and name the lists accordingly based on log number and then refer to them at the end of processing, but these logs are 100MB in size and often 50+ in number with up to 20,000 stats collected per log, so perhaps too many stats to store in memory.</p>\n\n<p>Is there anyway around this problem?</p>\n\n<p>Thanks for reading,\nMikG</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 4303, "user_id": 86698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/485fb175406faa7e6060f88fced7be79?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew_Lvov", "link": "https://stackoverflow.com/users/86698/andrew-lvov"}, "is_accepted": false, "score": 0, "last_activity_date": 1420674803, "creation_date": 1420674803, "answer_id": 27830789, "question_id": 27830401, "link": "https://stackoverflow.com/questions/27830401/gc-content-in-dna-sequence-rosaland-how-to-improve-my-code/27830789#27830789", "title": "GC content in DNA sequence (Rosaland): how to improve my code?", "body": "<pre><code>if all([k==k.upper() for k in line]):\n</code></pre>\n\n<p>Why don't you just check that <code>line == line.upper()</code> ?</p>\n\n<pre><code>i=0\nfor k in seq:\n    if k==\"G\" or k=='C':\n        i+=1\n</code></pre>\n\n<p>can be replaced with\n    i = sum(1 for k in seq if k in ['G', 'C'])</p>\n\n<blockquote>\n  <p>is there a way to include the last sequence in the for loop?</p>\n</blockquote>\n\n<p>I think there is no better way to do that.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4630357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9e8689785909498ecba420dc0ccc3f?s=128&d=identicon&r=PG&f=1", "display_name": "deathbymonopoly", "link": "https://stackoverflow.com/users/4630357/deathbymonopoly"}, "is_accepted": false, "score": 0, "last_activity_date": 1425438960, "creation_date": 1425438960, "answer_id": 28846086, "question_id": 27830401, "link": "https://stackoverflow.com/questions/27830401/gc-content-in-dna-sequence-rosaland-how-to-improve-my-code/28846086#28846086", "title": "GC content in DNA sequence (Rosaland): how to improve my code?", "body": "<p>To avoid appending your seq list a second time remove: </p>\n\n<pre><code>if all([k==k.upper() for k in line]):\n    data=data+line\n</code></pre>\n\n<p>and add it below <code>line.strip()</code></p>\n\n<p>The problem you are facing is data is an empty string the first time you enter the <code>for i in line</code> loop.  Therefore, <code>if data:</code> is False.</p>\n"}], "owner": {"reputation": 131, "user_id": 4372890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5123afad198a7ca1938662001113a7aa?s=128&d=identicon&r=PG&f=1", "display_name": "ziweiguan", "link": "https://stackoverflow.com/users/4372890/ziweiguan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1038, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1425438960, "creation_date": 1420672514, "question_id": 27830401, "link": "https://stackoverflow.com/questions/27830401/gc-content-in-dna-sequence-rosaland-how-to-improve-my-code", "title": "GC content in DNA sequence (Rosaland): how to improve my code?", "body": "<p>Below is my code for a Rosalind question to calculate GC content without using Biopython. \nCan anyone give me some suggestions how to improve it? For example, I cannot include the last sequence in the seq_list inside the for loop and have to append one more time. \nAlso, is there a better way to pair seq_name and GC content so I can easily print out the sequence name with highest GC content?\nThank you very much</p>\n\n<pre><code># to open FASTA format sequence file:\ns=open('5_GC_content.txt','r').readlines()\n\n# to create two lists, one for names, one for sequences\nname_list=[]\nseq_list=[]\n\ndata='' # to put the sequence from several lines together\n\nfor line in s:\n    line=line.strip()\n    for i in line:\n        if i == '&gt;':\n            name_list.append(line[1:])\n            if data:\n                seq_list.append(data)\n                data=''\n            break\n        else:\n            line=line.upper()\n    if all([k==k.upper() for k in line]):\n        data=data+line\nseq_list.append(data) # is there a way to include the last sequence in the for loop?\nGC_list=[]\nfor seq in seq_list:\n    i=0\n    for k in seq:\n        if k==\"G\" or k=='C':\n            i+=1\n    GC_cont=float(i)/len(seq)*100.0\n    GC_list.append(GC_cont)\n\n\nm=max(GC_list)\nprint name_list[GC_list.index(m)] # to find the index of max GC\nprint \"{:0.6f}\".format(m)\n</code></pre>\n"}, {"tags": ["python", "import", "importerror", "python-import"], "answers": [{"comments": [{"owner": {"reputation": 4819, "user_id": 238406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e2a174af4db77595145d27eb26ffbd?s=128&d=identicon&r=PG", "display_name": "J&#252;rgen A. Erhard", "link": "https://stackoverflow.com/users/238406/j%c3%bcrgen-a-erhard"}, "edited": false, "score": 1, "creation_date": 1452128227, "post_id": 27830407, "comment_id": 57036965, "body": "The Python import system is basically not <i>that</i> good.  And it&#39;s stated in"}], "tags": [], "owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "is_accepted": true, "score": 2, "last_activity_date": 1420672869, "last_edit_date": 1420672869, "creation_date": 1420672532, "answer_id": 27830407, "question_id": 27830262, "link": "https://stackoverflow.com/questions/27830262/python-import-function-from-an-already-imported-module/27830407#27830407", "title": "Python: import function from an already imported module", "body": "<p>The Python import system just doesn't work that way.  When you do <code>from foo import bar</code>, <code>foo</code> has to be a \"real\", fully-qualified package or module name (or a relative one using dots).  That is, it has to be something that you could use in a plain <code>import foo</code>.  It can't just be a module object you have lying around.  For instance, you also can't do this:</p>\n\n<pre><code>import foo as bar\nfrom bar import someFunction\n</code></pre>\n\n<p>This is stated in <a href=\"https://docs.python.org/2/reference/simple_stmts.html#the-import-statement\" rel=\"nofollow\">the documentation</a>, although you have to read through that section to get the full picture.  It says:</p>\n\n<blockquote>\n  <p>Import statements are executed in two steps: (1) find a module, and initialize it if necessary; (2) define a name or names in the local namespace (of the scope where the import statement occurs). The statement comes in two forms differing on whether it uses the <code>from</code> keyword. The first form (without <code>from</code>) repeats these steps for each identifier in the list. The form with <code>from</code> performs step (1) once, and then performs step (2) repeatedly.</p>\n</blockquote>\n\n<p>Step (1) is \"finding the module\", and if you read on you will see that this is the process where it looks in <code>sys.modules</code>, <code>sys.path</code>, etc.  There is no point at which it looks for a name in the importing namespace that happens to have a module object as its value.  Note that the module-finding process is no different for the two kinds of imports; the way it finds <code>foo</code> when you do <code>import foo</code> is the same way it finds it when you do <code>from foo import bar</code>.  If a plain <code>import my_module</code> would not work (as in your example), then <code>from my_module import stuff</code> won't work either.</p>\n\n<p>Note that if you already imported the module and just want a shorter name for a function inside it, you can just assign a regular variable to the function:</p>\n\n<pre><code>from my_package import my_module\nmyfunc = my_module.my_function\n</code></pre>\n"}], "owner": {"reputation": 3642, "user_id": 4195568, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/w7Ogb.jpg?s=128&g=1", "display_name": "Ying Xiong", "link": "https://stackoverflow.com/users/4195568/ying-xiong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2441, "favorite_count": 0, "accepted_answer_id": 27830407, "answer_count": 1, "score": 1, "last_activity_date": 1420672869, "creation_date": 1420671819, "question_id": 27830262, "link": "https://stackoverflow.com/questions/27830262/python-import-function-from-an-already-imported-module", "title": "Python: import function from an already imported module", "body": "<p>Suppose I have a python package <code>my_package</code> which contains a module <code>my_module</code> which contains a function <code>my_function</code>.</p>\n\n<p>I was trying to do the following import in python interactive shell:</p>\n\n<pre><code>&gt;&gt;&gt; from my_package import my_module\n&gt;&gt;&gt; my_module.my_function()            # =&gt; OK\n&gt;&gt;&gt; from my_module import my_function  # =&gt; ImportError: No module named my_module\n&gt;&gt;&gt; from my_package.my_module import my_function   # =&gt; OK\n</code></pre>\n\n<p>I am quite surprised at the <code>ImportError</code> at the third line above: since the <code>my_module</code> is already imported, why can I not import a function from it? Maybe I have some miss understanding on how python import system works, and any clarification will be highly appreciated!</p>\n\n<hr>\n\n<p>Here is the directory structure and source code.</p>\n\n<pre><code>my_package\n  |- __init__.py\n  |- my_module.py\n</code></pre>\n\n<p>Here is the <code>__init__.py</code> file</p>\n\n<pre><code>all = [\"my_module\"]\n</code></pre>\n\n<p>and here is the <code>my_module.py</code> file</p>\n\n<pre><code>def my_function():\n    pass\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 16246, "user_id": 281669, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/13e0a0be03b10cd70e07e382e9e3f44e?s=128&d=identicon&r=PG", "display_name": "Allan", "link": "https://stackoverflow.com/users/281669/allan"}, "is_accepted": false, "score": 0, "last_activity_date": 1420672193, "creation_date": 1420672193, "answer_id": 27830340, "question_id": 27830223, "link": "https://stackoverflow.com/questions/27830223/how-do-i-get-my-for-loop-to-keep-from-duplicating-my-data/27830340#27830340", "title": "How do I get my for loop to keep from duplicating my data?", "body": "<p>Your problem is the lines:</p>\n\n<pre><code>    for line in current_file:        \n        for row in current_file:  \n</code></pre>\n\n<p>To the Python interpreter, these both mean the same thing: read lines from the file. Python doesn't know anything about the variables, it's just reading all of the lines once per line. Instead, just remove the first of these lines:</p>\n\n<pre><code>    for row in line:  \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4392464, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef35207b873847496f6248f8039d0a62?s=128&d=identicon&r=PG&f=1", "display_name": "bayernmunich", "link": "https://stackoverflow.com/users/4392464/bayernmunich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1420672193, "creation_date": 1420671649, "question_id": 27830223, "link": "https://stackoverflow.com/questions/27830223/how-do-i-get-my-for-loop-to-keep-from-duplicating-my-data", "title": "How do I get my for loop to keep from duplicating my data?", "body": "<p>I am new to python and I'm trying to get my script to read the right areas in a file. The script is supposed to read through the file and then create a config file with the information csv file that is uploaded with all the parameters to add, update or delete. Right now I just noticed that my loop isn't going through the file, it's only reading the last line. So I moved the called function around and I noticed that it looped through and printed out the data more than once. When it's only supposed to print it out once. Here is what a normal config file is supposed to look like when the script runs right:</p>\n\n<pre><code>define hostgroup {\n     hostgroup_name                 ISD-CR-All_Servers_group      \n     notes                                                        \n     alias                                                        \n     action_url                                                   \n     notes_url                                                    \n     members                                                      \n     hostgroup_members                                            \n}\n</code></pre>\n\n<p>Here is what it looks like with the way my script is written:</p>\n\n<pre><code>define hostgroup {\n     hostgroup_name                 ISD-CR-All_Servers            \n     notes                                                        \n     alias                                                        \n     action_url                                                   \n     notes_url                                                    \n     members                                                      \n     hostgroup_members                                            \n}\n\n# Configuration file /etc/nagios/objects/solution1/ISD-CR-All_Servers.cfg\n# Edited by PyNag on Wed Jan  7 22:47:21 2015\n\ndefine hostgroup {\n     hostgroup_name                 ISD-CR-All_Servers            \n     notes                                                        \n     alias                                                        \n     action_url                                                   \n     notes_url                                                    \n     members                                                      \n     hostgroup_members                                            \n}\n\n# Configuration file /etc/nagios/objects/solution1/ISD-CR-All_Servers.cfg\n# Edited by PyNag on Wed Jan  7 22:47:22 2015\n\ndefine hostgroup {\n     hostgroup_name                 ISD-CR-All_Servers            \n     notes                                                        \n     alias                                                        \n     action_url                                                   \n     notes_url                                                    \n     members                                                      \n     hostgroup_members                                            \n}\n</code></pre>\n\n<p>The file that is uploaded looks like this:</p>\n\n<pre><code>Add Host Group  ISD-CR  ISD-CR-All_Servers      \n\nAdd Host Group  ISD-CR  ISD-CR-All_Servers      \nUpdate  Service ISD-CR      ISD-CR-All_Servers  ISD-CR-Linux_Server\nUpdate  Service ISD-CR      ISD-CR-Db_Servers   ISD-CR-Mango_db\n\nDelete  Service Group   ISD-CR          \nDelete  Service Group   ISD-CR          \nDelete  Host Group  ISD-CR  ISD-CR-All_Servers      \nAdd Service Group   ISD-CR  ISD-CR-All_Servers_group        \nUpdate  Service ISD-CR      ISD-CR-Web_Servers  ISD-CR-Web_link\n</code></pre>\n\n<p>And here is my script:</p>\n\n<pre><code>from pynag import Model\nfrom pynag.Parsers import config\nfrom subprocess import *\nimport subprocess\nimport sys\n\ndef addHostGroup():\n\n\n            # Add hostgroup object\n            hg = Model.Hostgroup()\n\n            hg.set_filename('/etc/nagios/objects/solution1/{0}.cfg'.format(hostgroup_name))\n\n            # Adding all attributes to allow any to be added if needed\n            hg.hostgroup_name = row[3]\n            hg.alias = row[4]\n            hg.members = row[5]\n            hg.hostgroup_members = row[6]\n            hg.notes =  row[7]\n            hg.notes_url = row[8]\n            hg.action_url = row[9]\n\n            # Save\n            hg.save()\n\n            print \"hostgroup added\"\n\ndef existHostGroup():        \n\n        hostgroup = os.system('pynag list where hostgroup_name=hostgroup_name')\n        if not hostgroup:\n            logging.error(\"Hostgroup %s not found.\" % hostgroup_name)\n            print 'adding objects'\n            addHostGroup()\n\n\n        print hostgroup\ntry:\n        current_file = csv.reader(open(input_file, \"rb\"), delimiter='\\t')\n    except:  \n        logging.error('No such file or directory. Please try again')\n    else:\n        for line in current_file:        \n            for row in current_file:                        \n                hostgroup_name = row[3]               \n                if solution_id != row[2]:\n                        logging.error('Solution ID is invalid. Please check the number and try again') \n                elif addAction() != row[0] and updateAction() != row[0] and deleteAction() != row[0]:\n                        logging.error(\"Undefined action\")\n                elif object_hostgroup() != row[1] and object_service() != row[1] and object_servicegroup() != row[1]:\n                        logging.error(\"Undefined object\") \n                     # add in options checking if object(alias,hostgroup_name, etc) exists\n                     # select add, modify or delete                                                                                                                    \n                else:  \n                    print row \n                    existHostGroup()\n\n\n    finally:\n        print \"all error checks done!\"\n</code></pre>\n"}, {"tags": ["python", "list", "sorting", "python-3.x"], "comments": [{"owner": {"reputation": 2242, "user_id": 307637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f32da9568dbeb05c72c8e6454ee7889?s=128&d=identicon&r=PG", "display_name": "myrdd", "link": "https://stackoverflow.com/users/307637/myrdd"}, "edited": false, "score": 0, "creation_date": 1525273258, "post_id": 27830184, "comment_id": 87293816, "body": "possible duplicate: <a href=\"https://stackoverflow.com/q/1516249\">stackoverflow.com/q/1516249</a>"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 4430815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c9d241085fe296640e851d2dfb1ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Benya", "link": "https://stackoverflow.com/users/4430815/vlad-benya"}, "edited": false, "score": 0, "creation_date": 1420672570, "post_id": 27830209, "comment_id": 44066750, "body": "It works only for this particular case just because you can play with the sign of the integer values. reverse=True affects a whole list order that is not acceptable. I need something that can affect an order of a specific column. Like in SQL: ORDER by score ASC, USER desc, last_name ASC."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2555451"}, "reply_to_user": {"reputation": 41, "user_id": 4430815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c9d241085fe296640e851d2dfb1ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Benya", "link": "https://stackoverflow.com/users/4430815/vlad-benya"}, "edited": false, "score": 0, "creation_date": 1420673162, "post_id": 27830209, "comment_id": 44066941, "body": "See my edit.  You&#39;ll need to use two sorts in that case (one for descending, the other for ascending)."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2555451"}, "is_accepted": false, "score": 4, "last_activity_date": 1420673138, "last_edit_date": 1420673138, "creation_date": 1420671601, "answer_id": 27830209, "question_id": 27830184, "link": "https://stackoverflow.com/questions/27830184/python3-asc-desc-sorting/27830209#27830209", "title": "Python3 asc desc sorting", "body": "<p>Your current solution will work fine if you set the <code>reverse</code> parameter of <a href=\"https://docs.python.org/3/library/stdtypes.html#list.sort\" rel=\"nofollow\"><code>list.sort</code></a> to <code>True</code>:</p>\n\n<pre><code>&gt;&gt;&gt; my_list = [{'user': 'Joe', 'score': 14},\n...            {'user': 'Foo', 'score': 12},\n...            {'user': 'May', 'score': 12},\n...            {'user': 'Kat', 'score': 12},\n...            {'user': 'Doe', 'score': 13}]\n&gt;&gt;&gt; my_list.sort(key=lambda x: (-x['score'], x['user']), reverse=True)\n&gt;&gt;&gt; pprint(my_list) # pprint makes the nice output\n[{'score': 12, 'user': 'May'},\n {'score': 12, 'user': 'Kat'},\n {'score': 12, 'user': 'Foo'},\n {'score': 13, 'user': 'Doe'},\n {'score': 14, 'user': 'Joe'}]\n&gt;&gt;&gt;\n</code></pre>\n\n<p>This will sort the list in reverse order.</p>\n\n<hr>\n\n<p><strong>Edit:</strong></p>\n\n<p>Since the names and scores have two different sort orders, you will need to use two separate sorts to achieve your desired output:</p>\n\n<pre><code>&gt;&gt;&gt; my_list = [{'user': 'Joe', 'score': 14},\n...            {'user': 'Foo', 'score': 12},\n...            {'user': 'May', 'score': 12},\n...            {'user': 'Kat', 'score': 12},\n...            {'user': 'Doe', 'score': 13}]\n&gt;&gt;&gt; my_list.sort(key=lambda x: x['user'], reverse=True)\n&gt;&gt;&gt; my_list.sort(key=lambda x: x['score'])\n&gt;&gt;&gt; pprint(my_list)\n[{'score': 12, 'user': 'May'},\n {'score': 12, 'user': 'Kat'},\n {'score': 12, 'user': 'Foo'},\n {'score': 13, 'user': 'Doe'},\n {'score': 14, 'user': 'Joe'}]\n&gt;&gt;&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 4430815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c9d241085fe296640e851d2dfb1ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Benya", "link": "https://stackoverflow.com/users/4430815/vlad-benya"}, "edited": false, "score": 0, "creation_date": 1420671997, "post_id": 27830211, "comment_id": 44066516, "body": "This just a custom solution just for this example. I may have three or four fields that I need to sort on. Each of them may be descending as well as others ascending. All fields can be strings. I am looking for a generic solution."}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 41, "user_id": 4430815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c9d241085fe296640e851d2dfb1ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Benya", "link": "https://stackoverflow.com/users/4430815/vlad-benya"}, "edited": false, "score": 0, "creation_date": 1420672132, "post_id": 27830211, "comment_id": 44066570, "body": "@VladBenya what you mean ? always when you use <code>reverse=True</code> <code>sort</code> function sort the iterable reverse !"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 41, "user_id": 4430815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c9d241085fe296640e851d2dfb1ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Benya", "link": "https://stackoverflow.com/users/4430815/vlad-benya"}, "edited": false, "score": 0, "creation_date": 1420672225, "post_id": 27830211, "comment_id": 44066598, "body": "@VladBenya so for that aim you need to update your list , and couldn&#39;t just use <code>sort</code>"}, {"owner": {"reputation": 41, "user_id": 4430815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c9d241085fe296640e851d2dfb1ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Benya", "link": "https://stackoverflow.com/users/4430815/vlad-benya"}, "edited": false, "score": 0, "creation_date": 1420672376, "post_id": 27830211, "comment_id": 44066658, "body": "Just imagine that score is a user last name that is a string. I want to sort this list in ascending order by user name and descending order their last names together. reverse=True will not help here since it affect a final order of a whole list."}], "tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": false, "score": 1, "last_activity_date": 1420671610, "creation_date": 1420671610, "answer_id": 27830211, "question_id": 27830184, "link": "https://stackoverflow.com/questions/27830184/python3-asc-desc-sorting/27830211#27830211", "title": "Python3 asc desc sorting", "body": "<p>you need to add the <code>reverse=True</code> keyword for descending order.</p>\n\n<pre><code>&gt;&gt;&gt; my_list.sort(key=lambda x: (-x['score'], x['user']),reverse=True)\n&gt;&gt;&gt; my_list\n[{'score': 12, 'user': 'May'}, {'score': 12, 'user': 'Kat'}, {'score': 12, 'user': 'Foo'}, {'score': 13, 'user': 'Doe'}, {'score': 14, 'user': 'Joe'}]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 4430815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c9d241085fe296640e851d2dfb1ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Benya", "link": "https://stackoverflow.com/users/4430815/vlad-benya"}, "edited": false, "score": 0, "creation_date": 1420679455, "post_id": 27830765, "comment_id": 44068732, "body": "Haha! That definitely works! However, it is extremely slow :-|"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 41, "user_id": 4430815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c9d241085fe296640e851d2dfb1ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Benya", "link": "https://stackoverflow.com/users/4430815/vlad-benya"}, "edited": false, "score": 0, "creation_date": 1420679872, "post_id": 27830765, "comment_id": 44068837, "body": "@VladBenya, considering you don&#39;t want to use reverse, it is pretty tricky to do what you want, you could do it on the first character <code>-ord(x[&quot;user&quot;][0])</code> as a compromise"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 2, "last_activity_date": 1420674686, "creation_date": 1420674686, "answer_id": 27830765, "question_id": 27830184, "link": "https://stackoverflow.com/questions/27830184/python3-asc-desc-sorting/27830765#27830765", "title": "Python3 asc desc sorting", "body": "<p>The ord of a string can be negative:</p>\n\n<pre><code>my_list.sort(key=lambda x: (x[\"score\"],[-ord(x) for x in x[\"user\"]])))\n\n\nIn [50]:  my_list.sort(key=lambda x: (x[\"score\"],[-ord(x) for x in x[\"user\"]]))\n\nIn [51]: my_list\nOut[51]: \n[{'score': 12, 'user': 'May'},\n {'score': 12, 'user': 'Kat'},\n {'score': 12, 'user': 'Foo'},\n {'score': 13, 'user': 'Doe'},\n {'score': 14, 'user': 'Joe'}]\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4430815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c9d241085fe296640e851d2dfb1ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad Benya", "link": "https://stackoverflow.com/users/4430815/vlad-benya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1438, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1420674686, "creation_date": 1420671467, "last_edit_date": 1420672219, "question_id": 27830184, "link": "https://stackoverflow.com/questions/27830184/python3-asc-desc-sorting", "title": "Python3 asc desc sorting", "body": "<p>Lets assume I've got a following python list(this is only example):</p>\n\n<pre><code>my_list = [{'user': 'Joe', 'score': 14},\n           {'user': 'Foo', 'score': 12},\n           {'user': 'May', 'score': 12},\n           {'user': 'Kat', 'score': 12},\n           {'user': 'Doe', 'score': 13}]\n</code></pre>\n\n<p>I need to sort this list in ascending order by score and descending order by a username.\nExpected sort result:</p>\n\n<pre><code>my_list = [{'user': 'May', 'score': 12},\n           {'user': 'Kat', 'score': 12},\n           {'user': 'Foo', 'score': 12},\n           {'user': 'Doe', 'score': 13},\n           {'user': 'Joe', 'score': 14}]\n</code></pre>\n\n<p>So, I could do something like this if I want everything to be in ascending order:</p>\n\n<pre><code>my_list.sort(key=lambda x: (x['score'], x['user']))\n</code></pre>\n\n<p>For integers it is easy to solve this problem just adding <code>-</code> in front of it:</p>\n\n<pre><code>my_list.sort(key=lambda x: (-x['score'], x['user']))\n</code></pre>\n\n<p>Unfortunately, strings can not be negative :-|</p>\n\n<p>I need a generic solution that doesn't involve 'reverse=True'. Lambda function is dynamically generated based on a user config.</p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 3, "creation_date": 1420671534, "post_id": 27830164, "comment_id": 44066324, "body": "Look at <code>np.einsum</code>."}, {"owner": {"reputation": 622, "user_id": 1224002, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4dcddce38402fb5ef2c2cf390ee82a4?s=128&d=identicon&r=PG", "display_name": "Ted Pudlik", "link": "https://stackoverflow.com/users/1224002/ted-pudlik"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1420671735, "post_id": 27830164, "comment_id": 44066411, "body": "@MattDMo, this doesn&#39;t avoid generating the intermediate array.  It just avoids assigning it a name.  But it still takes up memory, and requires compute to be constructed."}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1420671850, "post_id": 27830164, "comment_id": 44066458, "body": "I&#39;m still somewhat of a numpy newbie - like I said, wild guess :)"}], "answers": [{"comments": [{"owner": {"reputation": 58707, "user_id": 110026, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/dce2259ff9b547103d54acf1ea622314?s=128&d=identicon&r=PG", "display_name": "Jaime", "link": "https://stackoverflow.com/users/110026/jaime"}, "edited": false, "score": 2, "creation_date": 1420689366, "post_id": 27830642, "comment_id": 44071068, "body": "Sometime in the not so distant future, using Python 3.5 and an upcoming numpy version, you could do: <code>out = R @ v.T[:, None, :]</code>, see <a href=\"https://www.python.org/dev/peps/pep-0465/\" rel=\"nofollow noreferrer\">here</a>."}], "tags": [], "owner": {"reputation": 622, "user_id": 1224002, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4dcddce38402fb5ef2c2cf390ee82a4?s=128&d=identicon&r=PG", "display_name": "Ted Pudlik", "link": "https://stackoverflow.com/users/1224002/ted-pudlik"}, "is_accepted": true, "score": 5, "last_activity_date": 1420673892, "creation_date": 1420673892, "answer_id": 27830642, "question_id": 27830164, "link": "https://stackoverflow.com/questions/27830164/producing-slices-of-dot-output-without-intermediates/27830642#27830642", "title": "Producing slices of dot output without intermediates", "body": "<p>Expanding on the hint provided by @hpaulj: the multiplication I described can be carried out by,</p>\n\n<pre><code>out = np.einsum('ijk,ki-&gt;ji', R, v)\n</code></pre>\n\n<p>The speedup over the approach in my question is already 3 orders of magnitude (!) for <code>n = 1000</code>:</p>\n\n<pre><code>%timeit d = np.diagonal(np.dot(R, v), axis1=0, axis2=2)\n10 loops, best of 3: 27.8 ms per loop\n\n%timeit o = np.einsum('ijk,ki-&gt;ji', R, v)\n10000 loops, best of 3: 21.9 \u00b5s per loop\n</code></pre>\n"}], "owner": {"reputation": 622, "user_id": 1224002, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4dcddce38402fb5ef2c2cf390ee82a4?s=128&d=identicon&r=PG", "display_name": "Ted Pudlik", "link": "https://stackoverflow.com/users/1224002/ted-pudlik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 27830642, "answer_count": 1, "score": 3, "last_activity_date": 1420673892, "creation_date": 1420671371, "last_edit_date": 1420671701, "question_id": 27830164, "link": "https://stackoverflow.com/questions/27830164/producing-slices-of-dot-output-without-intermediates", "title": "Producing slices of dot output without intermediates", "body": "<p>I have a large set of 3 x 3 matrices (<code>n</code> of them, say) and corresponding 3 x 1 vectors, and would like to multiply each vector by its corresponding matrix.  If I stack the matrices into a <code>n</code> x 3 x 3 <code>ndarray</code> called <code>R</code> and the vectors into a 3 x <code>n</code> <code>ndarray</code> called <code>v</code>, I can obtain the stack of multiplied vectors via,</p>\n\n<pre><code>import numpy as np\nintermediate = np.dot(R, v)\nout = np.diagonal(intermediate, axis1=0, axis2=2)\n</code></pre>\n\n<p>But this is very inefficient: <code>np.dot</code> produces the <code>n</code> x 3 x <code>n</code> <code>intermediate</code> array, out of which I then manually select a 3 x <code>n</code> slice.  Other than by looping over <code>n</code>, can I somehow produce the 3 x <code>n</code> array without making the intermediate <code>n</code> x 3 x <code>n</code> array?</p>\n"}, {"tags": ["python", "database", "sqlite", "web-scraping", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 3042850, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/82aa75b05da7904045be6a687f127400?s=128&d=identicon&r=PG&f=1", "display_name": "user3042850", "link": "https://stackoverflow.com/users/3042850/user3042850"}, "edited": false, "score": 0, "creation_date": 1420673687, "post_id": 27830495, "comment_id": 44067114, "body": "Enforcing uniqueness on a database level and handling it in my application means I would do something like creating a list in my application and passing that to my table (the table that would only house those 6 entries with their primary keys autoincremented) correct?  I&#39;m just a little confused because I have a table with these 6 unique entries, then another table that references this column via primary keys, so that means I would have to make this list just for the sake of having numbers (foreign key) in the one row rather strings."}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 313, "user_id": 3042850, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/82aa75b05da7904045be6a687f127400?s=128&d=identicon&r=PG&f=1", "display_name": "user3042850", "link": "https://stackoverflow.com/users/3042850/user3042850"}, "edited": false, "score": 1, "creation_date": 1420674173, "post_id": 27830495, "comment_id": 44067253, "body": "@user3042850 okay, let&#39;s try to clear this up. Could you please show the tables you have in the database and items you have in the scrapy project?"}, {"owner": {"reputation": 313, "user_id": 3042850, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/82aa75b05da7904045be6a687f127400?s=128&d=identicon&r=PG&f=1", "display_name": "user3042850", "link": "https://stackoverflow.com/users/3042850/user3042850"}, "edited": false, "score": 0, "creation_date": 1420674912, "post_id": 27830495, "comment_id": 44067465, "body": "So right now I&#39;m trying to fill the divs table with Unique NBA Divisions, of which there are 6. However 5 teams reside in each division, so due to normalization, I don&#39;t want to have that column have repeat data, in the Teams table, so I&#39;ve created a Divs table to house that information. I then hope to just insert the divisions as a foreign key into the Teams table. Umm if that&#39;s not the format you were hoping for, I can definitely try and put it into a format that&#39;s easier on the eyes."}, {"owner": {"reputation": 313, "user_id": 3042850, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/82aa75b05da7904045be6a687f127400?s=128&d=identicon&r=PG&f=1", "display_name": "user3042850", "link": "https://stackoverflow.com/users/3042850/user3042850"}, "edited": false, "score": 0, "creation_date": 1420676217, "post_id": 27830495, "comment_id": 44067858, "body": "Sorry to keep bombarding you with comments, but I just need help with this one thing because I&#39;m just unsure how to go about implementing this primary key thing, I think I understand how to use it and when to use it but like this will just force me to develop my code to produce outputs in certain formats."}, {"owner": {"reputation": 313, "user_id": 3042850, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/82aa75b05da7904045be6a687f127400?s=128&d=identicon&r=PG&f=1", "display_name": "user3042850", "link": "https://stackoverflow.com/users/3042850/user3042850"}, "edited": false, "score": 0, "creation_date": 1420676256, "post_id": 27830495, "comment_id": 44067872, "body": "I don&#39;t know how much experience you have with Scrapy but I was also hoping you&#39;d be able to answer the question that if my SQL column headings need to be the same as my Item properties. I ask this because I think I had one be different and it threw me an error (sqlite3.OperationalError: unrecognized token: &#39;incorrect name i inputted on purpose&#39;). It&#39;s odd though because it seems I can input an ID with no trouble."}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 313, "user_id": 3042850, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/82aa75b05da7904045be6a687f127400?s=128&d=identicon&r=PG&f=1", "display_name": "user3042850", "link": "https://stackoverflow.com/users/3042850/user3042850"}, "edited": false, "score": 0, "creation_date": 1420677354, "post_id": 27830495, "comment_id": 44068169, "body": "@user3042850 here is what I&#39;m think about it: I&#39;d create an item class for each entity you have in the database: <code>Player</code>, <code>Team</code>, <code>Division</code>. In the spider I&#39;d instantiate and yield/return different items - when you scrape the division name name - yield an item with it, same for player and team. In the pipeline, try inserting into the tables and handle integrity errors (duplicate entries). Anyway, I would start with redesigning the tables you currently have. For instance, you probably need a unique check for division name, a player should probably have a foreign key to a team etc."}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 313, "user_id": 3042850, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/82aa75b05da7904045be6a687f127400?s=128&d=identicon&r=PG&f=1", "display_name": "user3042850", "link": "https://stackoverflow.com/users/3042850/user3042850"}, "edited": false, "score": 1, "creation_date": 1420677414, "post_id": 27830495, "comment_id": 44068189, "body": "@user3042850 and this is too many questions for a single thread. Try splitting up the problem into steps and solve it step by step, starting from designing your database tables. If you have difficulties consider asking separate questions here on SO. Thanks."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 0, "last_activity_date": 1420673354, "last_edit_date": 1495541506, "creation_date": 1420673054, "answer_id": 27830495, "question_id": 27830156, "link": "https://stackoverflow.com/questions/27830156/issues-with-sqlite-table-specifically-foreign-keys/27830495#27830495", "title": "Issues with SQLite Table - Specifically foreign keys", "body": "<p>The usual approach is to <em>enforce uniqueness on the database level</em> and handle it in your application.</p>\n\n<p>For Scrapy specifically, if you insert the records <em>in the pipeline</em>, usually you have a construction like this:</p>\n\n<pre><code>import sqlite3\nfrom scrapy.exceptions import DropItem     \n\ntry:\n    cursor.execute(\"\"\"\n        INSERT INTO \n            table \n            (field1, field2) \n        VALUES (?, ?)\"\"\", (field1, field2))\nexcept sqlite3.IntegrityError:\n    raise DropItem('Duplicate entry')\n</code></pre>\n\n<p>See also examples of sqlite pipelines:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3261858/does-anyone-have-example-code-for-a-sqlite-pipeline-in-scrapy\">Does anyone have example code for a sqlite pipeline in Scrapy?</a></li>\n<li><a href=\"https://github.com/feiskyer/Scrapy-Examples/blob/master/blog_crawl/blog_crawl/pipelines.py\" rel=\"nofollow noreferrer\">pipeline from scrapy-examples</a></li>\n</ul>\n\n<hr>\n\n<p>There is also a project called <a href=\"https://pypi.python.org/pypi/scrapy-dblite\" rel=\"nofollow noreferrer\"><code>scrapy-dblite</code></a> which provides a nice abstraction - you are not going down to SQL queries, there is a simple ORM built-in. For example:</p>\n\n<pre><code>from scrapy.exceptions import DropItem\nfrom myproject.items import Product\nimport dblite\n\nclass StoreItemsPipeline(object):\n    def __init__(self):\n        self.ds = None\n\n    def open_spider(self, spider):\n        self.ds = open(Product, 'sqlite://db/products.sqlite:items', autocommit=True)\n\n    def close_spider(self, spider):\n        self.ds.commit()\n        self.ds.close()\n\n    def process_item(self, item, spider):\n        if isinstance(item, Product):\n            try:\n                self.ds.put(item)\n            except dblite.DuplicateItem:\n                raise DropItem(\"Duplicate item found: %s\" % item)\n        else:\n            raise DropItem(\"Unknown item type, %s\" % type(item))\n        return item\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 3042850, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/82aa75b05da7904045be6a687f127400?s=128&d=identicon&r=PG&f=1", "display_name": "user3042850", "link": "https://stackoverflow.com/users/3042850/user3042850"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1420676813, "creation_date": 1420671342, "last_edit_date": 1420676813, "question_id": 27830156, "link": "https://stackoverflow.com/questions/27830156/issues-with-sqlite-table-specifically-foreign-keys", "title": "Issues with SQLite Table - Specifically foreign keys", "body": "<p>Okay the main issue I am having is I have a table that should not have any duplicate entries. This is because I was hoping to have a Primary Key which would be referenced in a separate table. </p>\n\n<p>From what I understand about normalization it is better to have your database designed in this fashion. So right now I have a table that has a bunch of duplicate entries (there should be only 6 unique entries but there are 30 entries, each unique one is repeated 5 times).</p>\n\n<p>How should I fix this? Should I fix this when importing the data, or by using a UNIQUE keyword. To note when I tried to use the UNIQUE feature this time around, it gave me an error as the data that I am importing indeed has duplicates entries. </p>\n\n<p>EDIT:</p>\n\n<p>This is what my items looks like:</p>\n\n<pre><code>from scrapy.item import Item, Field\n\nclass TeamStats(Item):\n    # define the fields for your item here like:\n    # name = scrapy.Field()\n\n    team = Field()\n    division = Field()\n    rosterurl = Field()\n    player_desc = Field()\n    playerurl = Field()\n    pass\n\nclass Player(Item):\n    exp = Field()\n    pass\n</code></pre>\n\n<p>This is what my code looks like:</p>\n\n<pre><code>import scrapy\nimport string\nimport re\nfrom scrapy.selector import HtmlXPathSelector                                                                       ##needed to import xpath command\nfrom scrapy.shell import inspect_response                                                                           ##needed for Response object\nfrom nbastats.items import TeamStats, Player                                                                  ##needed to import player stats\n\n\nclass NbastatsSpider(scrapy.Spider):\n    name = \"nbaStats\"\n\n    start_urls = [\n        \"http://espn.go.com/nba/teams\"                                                                              ##only start not allowed because had some issues when navigated to team roster pages\n        ]\n    def parse(self,response):\n        items = []                                                                                                  ##array or list that stores TeamStats item\n        i=0                                                                                                         ##counter needed for older code\n\n        for division in response.xpath('//div[@id=\"content\"]//div[contains(@class, \"mod-teams-list-medium\")]'):     \n            for team in division.xpath('.//div[contains(@class, \"mod-content\")]//li'):\n                item = TeamStats()\n\n                item['division'] = division.xpath('.//div[contains(@class, \"mod-header\")]/h4/text()').extract()[0]            \n                item['team'] = team.xpath('.//h5/a/text()').extract()[0]\n                item['rosterurl'] = \"http://espn.go.com\" + team.xpath('.//div/span[2]/a[3]/@href').extract()[0]\n                items.append(item)\n                print(item['rosterurl'])\n                request = scrapy.Request(item['rosterurl'], callback = self.parseWPNow)\n                request.meta['play'] = item\n\n                yield request\n\n    def parseWPNow(self, response):\n        item = response.meta['play']\n        item = self.parseRoster(item, response)\n        return item\n\n    def parseRoster(self, item, response):\n        players1 = []\n        int = 0\n        for players in response.xpath(\"//td[@class='sortcell']\"):\n            play = {}\n            play['name'] = players.xpath(\"a/text()\").extract()[0]\n            play['position'] = players.xpath(\"following-sibling::td[1]\").extract()[0]\n            play['age'] = players.xpath(\"following-sibling::td[2]\").extract()[0]\n            play['height'] = players.xpath(\"following-sibling::td[3]\").extract()[0]\n            play['weight'] = players.xpath(\"following-sibling::td[4]\").extract()[0]\n            play['college'] = players.xpath(\"following-sibling::td[5]\").extract()[0]\n            play['salary'] = players.xpath(\"following-sibling::td[6]\").extract()[0]\n            players1.append(play)\n        item['playerurl'] = response.xpath(\"//td[@class='sortcell']/a\").extract()\n        item['player_desc']=players1\n        return item\n</code></pre>\n\n<p>This is what my pipeline looks like:</p>\n\n<pre><code>class NbastatsPipeline(object):\n\n    def __init__(self):\n        self.setupDBCon()\n        self.createTables()\n\n    def setupDBCon(self):\n        self.con = lite.connect('test.db')\n        self.cur = self.con.cursor()\n\n    def createTables(self):\n        self.dropTeamsTable()\n        self.dropPlayersTable()\n        self.dropDivsTable()\n\n        self.createTeamsTable()\n        self.createPlayersTable()\n        self.createDivsTable()\n\n    def createTeamsTable(self):\n        self.cur.execute(\"CREATE TABLE IF NOT EXISTS Teams(P_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, \\\n            team TEXT, \\\n            DivId INTEGER, \\\n            FOREIGN KEY (DivId) REFERENCES Divs1(Did) \\\n            )\")\n\n    def createDivsTable(self):\n        self.cur.execute(\"CREATE TABLE IF NOT EXISTS Divs(Did INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, \\\n            division TEXT)\")\n\n    def createPlayersTable(self):\n        self.cur.execute(\"CREATE TABLE IF NOT EXISTS Players(player_name TEXT, \\\n            salary TEXT, \\\n            weight INTEGER, \\\n            age INTEGER, \\\n            college TEXT )\")\n\n    def dropTeamsTable(self):\n        self.cur.execute(\"DROP TABLE IF EXISTS Teams\")\n    def dropPlayersTable(self):\n        self.cur.execute(\"DROP TABLE IF EXISTS Players\")\n    def dropDivsTable(self):\n        self.cur.execute(\"DROP TABLE IF EXISTS Divs\")\n\n    def closeDB(self):\n        self.con.close()\n\n    def __del__(self):\n        self.closeDB()\n\n    def process_item(self, item, spider):\n        for key, value in item.iteritems():\n            if key == \"division\":\n                print(item.get('division', \"\"))\n                self.cur.execute(\"INSERT INTO Divs( division ) VALUES(?)\", (item.get('division', \"\"),))\n                self.con.commit() \n#                self.storeInDb(item) #this is the line you'll use when ready to completely pass item through to storeInDb but it'll be lower in code\n\n        return item\n</code></pre>\n"}, {"tags": ["python", "firefox", "selenium"], "answers": [{"comments": [{"owner": {"reputation": 27929, "user_id": 171278, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0d66f79c90e4c6afb91903a1fc460e6f?s=128&d=identicon&r=PG", "display_name": "culebr&#243;n", "link": "https://stackoverflow.com/users/171278/culebr%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1420672273, "post_id": 27830329, "comment_id": 44066620, "body": "Same thing, it stars Opera that tries to work in debug mode. <b>edit</b> oops. Nevermind, it worked. Thanks!"}, {"owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "reply_to_user": {"reputation": 27929, "user_id": 171278, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0d66f79c90e4c6afb91903a1fc460e6f?s=128&d=identicon&r=PG", "display_name": "culebr&#243;n", "link": "https://stackoverflow.com/users/171278/culebr%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1420672398, "post_id": 27830329, "comment_id": 44066667, "body": "Great!  Glad it helped."}], "tags": [], "owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "is_accepted": true, "score": 3, "last_activity_date": 1420672460, "last_edit_date": 1420672460, "creation_date": 1420672131, "answer_id": 27830329, "question_id": 27830053, "link": "https://stackoverflow.com/questions/27830053/selenium-runs-the-wrong-browser-default/27830329#27830329", "title": "Selenium runs the wrong browser (default)", "body": "<p>The problem is in this line:</p>\n\n<pre><code>wd = webdriver.Remote('http://localhost:4444/wd/hub', {'browser':'firefox'})\n</code></pre>\n\n<p>Changing <code>browser</code>  to <code>browserName</code> will fix it.  Use</p>\n\n<pre><code>wd = webdriver.Remote('http://localhost:4444/wd/hub', {'browserName':'firefox'})\n</code></pre>\n\n<p>instead.</p>\n"}], "owner": {"reputation": 27929, "user_id": 171278, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0d66f79c90e4c6afb91903a1fc460e6f?s=128&d=identicon&r=PG", "display_name": "culebr&#243;n", "link": "https://stackoverflow.com/users/171278/culebr%c3%b3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "accepted_answer_id": 27830329, "answer_count": 1, "score": 3, "last_activity_date": 1420672460, "creation_date": 1420670811, "question_id": 27830053, "link": "https://stackoverflow.com/questions/27830053/selenium-runs-the-wrong-browser-default", "title": "Selenium runs the wrong browser (default)", "body": "<p>tl/dr: What am I doing wrong?</p>\n\n<p>I'm trying to run selenium tests locally and be compatible with Browserstack platform. I use this code to connect locally:</p>\n\n<pre><code>wd = webdriver.Remote('http://xxxxxxxx@hub.browserstack.com:80/wd/hub', {'browser':'firefox'})\nwd.get('http://google.com')\nwd.get_screenshot_as_file('/tmp/googl.png')\nwd.close()\n</code></pre>\n\n<p>I see a good screenshot in <code>/tmp/</code>.</p>\n\n<p>Now I try to do the same with local Selenium:</p>\n\n<pre><code>$ java -jar /usr/share/java/selenium-server-standalone-2.44.0.jar &amp;\n</code></pre>\n\n<p>The server starts nominally. I try creating a session with Firefox (30.0), it works correctly. (Default browser is Opera.)</p>\n\n<p>Then I try to run Python code:</p>\n\n<pre><code>wd = webdriver.Remote('http://localhost:4444/wd/hub', {'browser':'firefox'})\nwd.get('http://google.com')\nwd.get_screenshot_as_file('/tmp/googl2.png')\nwd.close()\n</code></pre>\n\n<p>Selenium opens Opera instead of Firefox.\n<img src=\"https://i.stack.imgur.com/kEsYT.png\" alt=\"enter image description here\"></p>\n\n<p>I see this in Python console:</p>\n\n<pre><code>Message: &lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Error 500 org/json/JSONObject&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h2&gt;HTTP ERROR: 500&lt;/h2&gt;&lt;pre&gt;org/json/JSONObject&lt;/pre&gt;\n&lt;p&gt;RequestURI=/wd/hub/session&lt;/p&gt;\n&lt;p&gt;&lt;i&gt;&lt;small&gt;&lt;a href=\"http://jetty.mortbay.org\"&gt;Powered by Jetty://&lt;/a&gt;&lt;/small&gt;&lt;/i&gt;&lt;/p&gt;\n</code></pre>\n\n<p>Why does it open Opera instead of Firefox?</p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 4, "creation_date": 1420670760, "post_id": 27830020, "comment_id": 44066022, "body": "that&#39;s not valid JSON. Please show a complete example"}], "answers": [{"tags": [], "owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "is_accepted": true, "score": 2, "last_activity_date": 1420671899, "last_edit_date": 1420671899, "creation_date": 1420671185, "answer_id": 27830121, "question_id": 27830020, "link": "https://stackoverflow.com/questions/27830020/python-get-json-object-by-index/27830121#27830121", "title": "Python get JSON object by index", "body": "<p>Very briefly:</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport json\n\nfoo = json.loads('{\"123\": null, \"234\": null, \"456\": null}')\nprint map(int, foo.keys())\n</code></pre>\n\n<p>The list <code>foo.keys()</code> will not be in the same order as presented in the JSON object (or its string representation). </p>\n\n<p>If you need to preserve ordering, you might try the following modification:</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport json, collections\n\nfoo = json.loads('{\"123\": null, \"234\": null, \"456\": null}', object_pairs_hook=collections.OrderedDict)\nprint map(int, foo.keys())\n</code></pre>\n\n<p>As you iterate over the list of keys, you can do a reverse lookup on an individual key in the usual way. </p>\n\n<p>Note that you will likely want to convert the integer-key back to a Python string with <code>str()</code>, in order to retrieve its associated value. If you just want the list of keys for lookups, however, and you don't really need the actual integer values, you can skip the initial <code>map</code> call and just preserve the keys as strings.</p>\n"}], "owner": {"reputation": 31, "user_id": 1539141, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/51d263ba646a7bee67bbbb0b1a145396?s=128&d=identicon&r=PG", "display_name": "zylski", "link": "https://stackoverflow.com/users/1539141/zylski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2782, "favorite_count": 0, "accepted_answer_id": 27830121, "answer_count": 1, "score": 0, "last_activity_date": 1420671899, "creation_date": 1420670689, "question_id": 27830020, "link": "https://stackoverflow.com/questions/27830020/python-get-json-object-by-index", "title": "Python get JSON object by index", "body": "<p>I have a JSON file that looks something like this:</p>\n\n<pre><code>{ data:\n      { 123:\n\n      { 212:\n\n      { 343: \n</code></pre>\n\n<p>In python I load the JSON using json.loads(r.text). The strings inside the data object are not guaranteed to be those but can be any number. What I want to be able to do is to be able to get those numbers so I can store then in an array. In this example I want the array to look like [123,212,343]. Is there anyway to do this since they are nested objects and not a JSON array?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 19246, "user_id": 51577, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cbfaeb8d0e2ee5da976331d2cb13d0ec?s=128&d=identicon&r=PG", "display_name": "tddmonkey", "link": "https://stackoverflow.com/users/51577/tddmonkey"}, "edited": false, "score": 1, "creation_date": 1420670727, "post_id": 27830014, "comment_id": 44066008, "body": "What do you mean by &quot;centrally aligned&quot;?"}, {"owner": {"reputation": 31116, "user_id": 2670792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Jjhe7.jpg?s=128&g=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/2670792/christian"}, "edited": false, "score": 0, "creation_date": 1420670920, "post_id": 27830014, "comment_id": 44066084, "body": "What is the exact <b>string</b> that you want to parse?"}], "answers": [{"tags": [], "owner": {"reputation": 366, "user_id": 1139841, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/HNz2Z.jpg?s=128&g=1", "display_name": "Germar", "link": "https://stackoverflow.com/users/1139841/germar"}, "is_accepted": false, "score": 0, "last_activity_date": 1420673211, "last_edit_date": 1420673211, "creation_date": 1420672692, "answer_id": 27830431, "question_id": 27830014, "link": "https://stackoverflow.com/questions/27830014/how-to-write-a-regex-for-centrally-aligned-upper-case-words/27830431#27830431", "title": "How to write a Regex for centrally aligned upper case words?", "body": "<p>I prefer to use re.match:</p>\n\n<pre><code>import re\n\nexample = '''                         THE COMPANY\n\nABCD is a new company in the field of Marketing. bla bla bla.\n\nDESCRIPTION\n\nxyz....                         \n\n                         SUMMARY\n\nasdf.......'''\n\nheadlines = []\nfor line in example.split('\\n'):\n    m = re.match(r'^\\s{4,}([A-Z0-9 \\t\\._-]+)', line)\n    if m:\n        headlines.append(m.group(1))\nprint(headlines)\n</code></pre>\n\n<p>An other way is re.findall:</p>\n\n<pre><code>headlines = [x.lstrip(' \\n') for x in re.findall(r'^\\s{4,}[A-Z0-9 \\t\\._-]+', example, re.M)]\nprint(headlines)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 622, "user_id": 1708800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a38efe3bef7fd343631035a2849980?s=128&d=identicon&r=PG", "display_name": "Tutleman", "link": "https://stackoverflow.com/users/1708800/tutleman"}, "is_accepted": false, "score": 1, "last_activity_date": 1420672921, "creation_date": 1420672921, "answer_id": 27830469, "question_id": 27830014, "link": "https://stackoverflow.com/questions/27830014/how-to-write-a-regex-for-centrally-aligned-upper-case-words/27830469#27830469", "title": "How to write a Regex for centrally aligned upper case words?", "body": "<p>If I understand you correctly, you want to match lines composed of some sort of indentation, followed by some number of upper case words.</p>\n\n<p>If so, the following regex should do the trick:</p>\n\n<pre><code>(?m)^(?: +)[A-Z\\s]+$\n</code></pre>\n\n<p>Let's take that piece by piece.</p>\n\n<p><code>(?m)</code> tells the regex matcher to treat <code>^</code> and <code>$</code> as the beginning and end of the line instead of the beginning and end of the string.</p>\n\n<p><code>^</code> matches the beginning of the line.</p>\n\n<p><code>(?: +)</code> is a non-capturing group of one or more spaces. In other words, this part of the pattern finds as many spaces as possible, and then ignores them. After all, we're not looking for the spaces, we're looking for the text. If you want the spaces too, just remove the <code>(?:</code> and <code>)</code>, leaving you with <code>\\s+</code>. If you prefer tabs, replace <code>\\s</code> with <code>\\t</code>.</p>\n\n<p><code>[A-Z\\s]+</code> matches one or more uppercase letters or whitespace characters.</p>\n\n<p><code>$</code> matches the end of the line.</p>\n\n<p>Putting it all together (and into Python) we get:</p>\n\n<pre><code>import re\nheaders = re.findall('(?m)^(?:\\s+)[A-Z\\s]+$', your_string)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4430795, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001225746489/picture?type=large", "display_name": "TypeError", "link": "https://stackoverflow.com/users/4430795/typeerror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1420673711, "creation_date": 1420670658, "last_edit_date": 1420673711, "question_id": 27830014, "link": "https://stackoverflow.com/questions/27830014/how-to-write-a-regex-for-centrally-aligned-upper-case-words", "title": "How to write a Regex for centrally aligned upper case words?", "body": "<pre>\n                         THE COMPANY\n\nABCD is a new company in the field of Marketing. bla bla bla.\n\nDESCRIPTION\n\nxyz....                         \n\n                         SUMMARY\n\nasdf.......\n</pre>\n\n<p>For text like above, I want to pick up headings like THE COMPANY and SUMMARY. I would like to write a code in Python. I have been trying to use RegEx but have not found a way to write a pattern that matches centrally aligned words. I am open to any new method as long as it can be implemented in Python.</p>\n"}, {"tags": ["python", "c", "python-2.7", "numpy", "wrapper"], "comments": [{"owner": {"reputation": 58707, "user_id": 110026, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/dce2259ff9b547103d54acf1ea622314?s=128&d=identicon&r=PG", "display_name": "Jaime", "link": "https://stackoverflow.com/users/110026/jaime"}, "edited": false, "score": 0, "creation_date": 1420687968, "post_id": 27829946, "comment_id": 44070717, "body": "The call in you edit should be <code>PyArray_SimpleNewFromData(1, dims, NPY_DOUBLE, vector)</code>. Does it not work like that either?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2379410"}, "edited": false, "score": 1, "creation_date": 1420703066, "post_id": 27829946, "comment_id": 44075221, "body": "<code>dims[1] = 2</code> is an indexing error"}], "answers": [{"comments": [{"owner": {"reputation": 753, "user_id": 3670097, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IkADC.jpg?s=128&g=1", "display_name": "Yair Daon", "link": "https://stackoverflow.com/users/3670097/yair-daon"}, "edited": false, "score": 0, "creation_date": 1420671777, "post_id": 27830120, "comment_id": 44066423, "body": "Thanks for the input but this does not help. Shouldn&#39;t the example become simpler by removing the *args and not giving the function any variable?"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "reply_to_user": {"reputation": 753, "user_id": 3670097, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IkADC.jpg?s=128&g=1", "display_name": "Yair Daon", "link": "https://stackoverflow.com/users/3670097/yair-daon"}, "edited": false, "score": 2, "creation_date": 1420671981, "post_id": 27830120, "comment_id": 44066511, "body": "No--the python interpreter has no idea that you have defined <code>_aux_error</code> with a nonstandard signature.  It will be called with the two C arguments."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "reply_to_user": {"reputation": 753, "user_id": 3670097, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IkADC.jpg?s=128&g=1", "display_name": "Yair Daon", "link": "https://stackoverflow.com/users/3670097/yair-daon"}, "edited": false, "score": 1, "creation_date": 1420672008, "post_id": 27830120, "comment_id": 44066518, "body": "Note that I updated my answer with a comment about a fundamental problem with your example."}, {"owner": {"reputation": 753, "user_id": 3670097, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IkADC.jpg?s=128&g=1", "display_name": "Yair Daon", "link": "https://stackoverflow.com/users/3670097/yair-daon"}, "edited": false, "score": 0, "creation_date": 1420672514, "post_id": 27830120, "comment_id": 44066729, "body": "Using your advice I tried to change the way arrays are created. I use <code>calloc</code>. Is this the right way to do it? I am still getting garbage (not to mention the fact that I&#39;ll have to deallocate that memory from within python somehow)."}, {"owner": {"reputation": 58707, "user_id": 110026, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/dce2259ff9b547103d54acf1ea622314?s=128&d=identicon&r=PG", "display_name": "Jaime", "link": "https://stackoverflow.com/users/110026/jaime"}, "edited": false, "score": 1, "creation_date": 1420688854, "post_id": 27830120, "comment_id": 44070937, "body": "The dimensions are copied by the array constructor, but the array  data isn&#39;t."}, {"owner": {"reputation": 753, "user_id": 3670097, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IkADC.jpg?s=128&g=1", "display_name": "Yair Daon", "link": "https://stackoverflow.com/users/3670097/yair-daon"}, "edited": false, "score": 0, "creation_date": 1420729013, "post_id": 27830120, "comment_id": 44089686, "body": "Thank you so much! Last thing, if you may: in my real program I want to dynamically allocate memory for the array vector. Should I free that memory after using memcpy? Again, thank you for your time."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 1, "creation_date": 1420751092, "post_id": 27830120, "comment_id": 44102870, "body": "If in <code>_aux_error</code> you have something like <code>vector = malloc(...);</code>, then you fill <code>vector</code> with some computed values, and then call <code>PyObject *ret = PyArray_SimpleNew(...); memcpy(PyArray_DATA(ret), vector, sizeof(vector));</code>, then yes, you should free <code>vector</code> before you return.  But if you know the length of the array, you could call <code>PyObject *ret = PyArray_SimpleNew(...)</code>, and then use <code>double *vector = PyArray_DATA(ret)</code>, and fill in <code>vector</code>.  Then you wouldn&#39;t need to malloc any memory--since <code>PyArray_SimpleNew</code> did that for you--and you wouldn&#39;t free <code>vector</code>."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1420752310, "post_id": 27830120, "comment_id": 44103544, "body": "See the latest addition to my answer for an example."}], "tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": true, "score": 8, "last_activity_date": 1420752258, "last_edit_date": 1420752258, "creation_date": 1420671184, "answer_id": 27830120, "question_id": 27829946, "link": "https://stackoverflow.com/questions/27829946/extend-python-with-c-return-numpy-array-gives-garbage/27830120#27830120", "title": "Extend python with C, return numpy array gives garbage", "body": "<p>Try changing this:</p>\n\n<pre><code>static PyObject *_aux_error(PyObject *self) {\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>static PyObject *_aux_error(PyObject *self, PyObject *args) {\n</code></pre>\n\n<p>Python will pass the <code>args</code> argument, even if you don't define your function with it.</p>\n\n<p>There's still a fundamental problem with your code.  You have created a numpy array using an array, <code>vector</code>, that is on the stack.  When <code>_aux_error</code> returns, that memory is reclaimed and might be reused.</p>\n\n<p>You could create the array using <code>PyArray_SimpleNew()</code> to allocate the numpy array, and then copy <code>vector</code> to the array's data:</p>\n\n<pre><code>static PyObject *_aux_error(PyObject *self, PyObject *args)\n{\n    double vector[2] = {1.0 , 2.0};\n    npy_intp dims[1] = {2};\n\n    PyObject *ret = PyArray_SimpleNew(1, dims, NPY_DOUBLE);\n    memcpy(PyArray_DATA(ret), vector, sizeof(vector));\n    return ret;\n}\n</code></pre>\n\n<p>Note that I changed the type to <code>NPY_DOUBLE</code>; <code>NPY_FLOAT</code> is the 32 bit floating point type.</p>\n\n<hr>\n\n<p>In a comment, you asked about dynamically allocating the memory in <code>_aux_error</code>.  Here's a variation of the example that might be useful.  The length of the array is still hardcoded in <code>dims</code>, so it isn't completely general, but it might be enough to address the question from the comments.</p>\n\n<pre><code>static PyObject *_aux_error(PyObject *self, PyObject *args)\n{\n    double *vector;\n    npy_intp dims[1] = {5};\n    npy_intp k;\n\n    PyObject *ret = PyArray_SimpleNew(1, dims, NPY_DOUBLE);\n    vector = (double *) PyArray_DATA(ret);\n    /*\n     *  NOTE: Treating PyArray_DATA(ret) as if it were a contiguous one-dimensional C\n     *  array is safe, because we just created it with PyArray_SimpleNew, so we know\n     *  that it is, in fact, a one-dimensional contiguous array.\n     */\n    for (k = 0; k &lt; dims[0]; ++k) {\n        vector[k] = 1.0 + k;\n    }\n    return ret;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 753, "user_id": 3670097, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IkADC.jpg?s=128&g=1", "display_name": "Yair Daon", "link": "https://stackoverflow.com/users/3670097/yair-daon"}, "is_accepted": false, "score": 3, "last_activity_date": 1420734221, "last_edit_date": 1420734221, "creation_date": 1420677077, "answer_id": 27831120, "question_id": 27829946, "link": "https://stackoverflow.com/questions/27829946/extend-python-with-c-return-numpy-array-gives-garbage/27831120#27831120", "title": "Extend python with C, return numpy array gives garbage", "body": "<p>Here is my full solution, for your amusement. Copy, paste and modify. Obviously the problem I was faced with is a bit more complicated than the question above. I used some of \n<a href=\"http://dan.iel.fm/posts/python-c-extensions/\" rel=\"nofollow\">Dan Foreman Mackay's online code</a>.</p>\n\n<p>The goal of my code is to return a covariance vector (whatever that is). I have a C file  named <code>aux.c</code> that returns a newly allocated array:</p>\n\n<pre><code>#include \"aux.h\"\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\ndouble *covVec(double *X, double *x, int nvecs, int veclen) {\n\n\n    double r = 1.3;\n    double d = 1.0;\n\n    double result;\n    double dist;\n    int n;\n\n    double *k;\n    k = malloc(nvecs * sizeof(double));\n\n    int row;\n    for( row = 0 ; row &lt; nvecs ; row++) {\n\n        result = 0.0;\n        for (n = 0; n &lt; veclen; n++) {\n                dist = x[n] - X[row*veclen + n];\n                result += dist * dist;\n        }\n\n        result = d*exp(  -result/(2.0*r*r)  );\n        k[row] = result;\n    }\n    return k;\n}\n</code></pre>\n\n<p>Then, I need a very short header file named <code>aux.h</code>:</p>\n\n<pre><code>double *covVec(double *X, double *x, int nvecs, int veclen);\n</code></pre>\n\n<p>To wrap this to python I have <code>_aux.c</code>:</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;numpy/arrayobject.h&gt;\n#include \"aux.h\"\n#include &lt;stdio.h&gt;\n\nstatic char module_docstring[] =\n    \"This module provides an interface for calculating covariance using C.\";\n\nstatic char cov_vec_docstring[] =\n    \"Calculate the covariances between a vector and a list of vectors.\";\n\nstatic PyObject *_aux_covVec(PyObject *self, PyObject *args);\n\nstatic PyMethodDef module_methods[] = {\n        {\"cov_vec\", _aux_covVec, METH_VARARGS, cov_vec_docstring},\n        {NULL, NULL, 0, NULL}\n};\n\nPyMODINIT_FUNC init_aux(void) {\n\n    PyObject *m = Py_InitModule3(\"_aux\", module_methods, module_docstring);\n    if (m == NULL)\n        return;\n\n    /* Load `numpy` functionality. */\n    import_array();\n}\n\n\nstatic PyObject *_aux_covVec(PyObject *self, PyObject *args)\n{\n    PyObject *X_obj, *x_obj;\n\n    /* Parse the input tuple */\n    if (!PyArg_ParseTuple(args, \"OO\", &amp;X_obj, &amp;x_obj ))\n        return NULL;\n\n    /* Interpret the input objects as numpy arrays. */\n    PyObject *X_array = PyArray_FROM_OTF(X_obj, NPY_DOUBLE, NPY_IN_ARRAY);\n    PyObject *x_array = PyArray_FROM_OTF(x_obj, NPY_DOUBLE, NPY_IN_ARRAY);\n\n\n    /* If that didn't work, throw an exception. */\n    if (X_array == NULL || x_array == NULL ) {\n        Py_XDECREF(X_array);\n        Py_XDECREF(x_array);\n        return NULL;\n    }\n\n    /* What are the dimensions? */\n    int nvecs  = (int)PyArray_DIM(X_array, 0);\n    int veclen = (int)PyArray_DIM(X_array, 1);\n    int xlen   = (int)PyArray_DIM(x_array, 0);\n\n    /* Get pointers to the data as C-types. */\n    double *X    = (double*)PyArray_DATA(X_array);\n    double *x    = (double*)PyArray_DATA(x_array);\n\n\n    /* Call the external C function to compute the covariance. */\n    double *k = covVec(X, x, nvecs, veclen);\n\n\n\n    if ( veclen !=  xlen ) {\n        PyErr_SetString(PyExc_RuntimeError,\n                                \"Dimensions don't match!!\");\n        return NULL;\n    }\n\n    /* Clean up. */\n    Py_DECREF(X_array);\n    Py_DECREF(x_array);\n\n    int i;\n    for(i = 0 ; i &lt; nvecs ; i++) {\n        printf(\"k[%d]   = %f\\n\",i,k[i]);\n        if (k[i] &lt; 0.0) {\n            PyErr_SetString(PyExc_RuntimeError,\n                        \"Covariance should be positive but it isn't.\");\n            return NULL;\n        }\n    }\n\n    npy_intp dims[1] = {nvecs};\n\n    PyObject *ret = PyArray_SimpleNew(1, dims, NPY_DOUBLE);\n    memcpy(PyArray_DATA(ret), k, nvecs*sizeof(double));\n    free(k);\n\n    return ret;\n}\n</code></pre>\n\n<p>I have a python file called <code>setup_cov.py</code>:</p>\n\n<pre><code>from distutils.core import setup, Extension\nimport numpy.distutils.misc_util\n\nsetup(\n    ext_modules=[Extension(\"_aux\", [\"_aux.c\", \"aux.c\"])],\n    include_dirs=numpy.distutils.misc_util.get_numpy_include_dirs(),\n)\n</code></pre>\n\n<p>I compile from command line using <code>python2.7 setup_cov.py build_ext --inplace</code>.\nThen I run the following python test file:</p>\n\n<pre><code>import numpy as np\nimport _aux as a\n\nnvecs  = 6\nveclen = 9\nX= []\nfor _ in range(nvecs):\n    X.append(np.random.normal(size= veclen))\nX = np.asarray(X)\n\nx = np.random.normal(size=veclen)\nk = a.cov_vec(X,x)\nprint(k)\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4382923"}, "is_accepted": false, "score": 2, "last_activity_date": 1437758725, "creation_date": 1437758725, "answer_id": 31616376, "question_id": 27829946, "link": "https://stackoverflow.com/questions/27829946/extend-python-with-c-return-numpy-array-gives-garbage/31616376#31616376", "title": "Extend python with C, return numpy array gives garbage", "body": "<p>Warren's solution seems to be working, although freeing the C array memory block results in a error on compilation for me. I got the memcopy trick to work in the minimalistic function below (copying a 1D C array to numpy via the pointer), which, for simplicity, does not take any arguments, and should give the reader a good idea how to apply this to C arrays instead of vectors:</p>\n\n<pre><code>static PyObject *_cmod_test(PyObject *self, PyObject *args)\n    {\n    double f[5] = {0,1,2,3,4};\n    int d[1] = {5};\n    PyObject *c = PyArray_FromDims(1,d,NPY_DOUBLE);\n    memcpy(PyArray_DATA(c), f, 5*sizeof(double));\n    return c;    \n    };\n</code></pre>\n\n<p>The launch.py script is simple</p>\n\n<pre><code>import _cmod\n_cmod.test()\n</code></pre>\n\n<p>Don't forget to declare the functions</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;numpy/arrayobject.h&gt;\n#define NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION\nstatic PyObject *_cmod_test(PyObject *self, PyObject *args);\n</code></pre>\n\n<p>Any suggestions for the use with PyArray_SimpleNewFromData (whilst avoiding the memory leak pittfall)? Perhaps something similar to the broken code below.</p>\n\n<pre><code>static PyObject *_cmod_test(PyObject *self, PyObject *args)\n    {\n    double f[5] = {0,1,2,3,4};\n    npy_intp dims[1] = {5};\n    PyObject *c = PyArray_SimpleNewFromData(1, dims, NPY_DOUBLE ,f);\n    PyArray_ENABLEFLAGS(c, NPY_ARRAY_OWNDATA);\n    return c;\n    };\n</code></pre>\n\n<p>I also recommend Dan Foreman Mackay's blog on the python C API.</p>\n"}], "owner": {"reputation": 753, "user_id": 3670097, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IkADC.jpg?s=128&g=1", "display_name": "Yair Daon", "link": "https://stackoverflow.com/users/3670097/yair-daon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3439, "favorite_count": 5, "accepted_answer_id": 27830120, "answer_count": 3, "score": 5, "last_activity_date": 1437758725, "creation_date": 1420670340, "last_edit_date": 1420672705, "question_id": 27829946, "link": "https://stackoverflow.com/questions/27829946/extend-python-with-c-return-numpy-array-gives-garbage", "title": "Extend python with C, return numpy array gives garbage", "body": "<p>I am wrapping a C file so I can use it in python. The output of the C function is an array of doubles. I want this to be a numpy array in python. I get garbage. Here's an example that generates the error. </p>\n\n<p>First, the C file (focus on the last function definition, everything else should be OK):</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;numpy/arrayobject.h&gt;\n#include &lt;stdio.h&gt;\n\nstatic char module_docstring[] =\n    \"docstring\";\n\nstatic char error_docstring[] =\n        \"generate the error\";\n\nstatic PyObject *_aux_error(PyObject *self, PyObject *args);\n\nstatic PyMethodDef module_methods[] = {\n        {\"error\", _aux_error, METH_VARARGS, error_docstring},\n        {NULL, NULL, 0, NULL}\n};\n\nPyMODINIT_FUNC init_tmp(void) {\n\n    PyObject *m = Py_InitModule3(\"_tmp\", module_methods, module_docstring);\n    if (m == NULL)\n        return;\n\n    /* Load `numpy` functionality. */\n    import_array();\n}\n\nstatic PyObject *_aux_error(PyObject *self ,PyObject *args) {\n\n    double vector[2] = {1.0 , 2.0};\n\n    npy_intp dims[1] = { 2 };\n\n    PyObject *ret  = PyArray_SimpleNewFromData(1, dims, (int)NPY_FLOAT , vector );\n    return ret;\n}\n</code></pre>\n\n<p>Compilation goes OK (from what I understand - I used a python script that compiles everything).</p>\n\n<p>In python, I run the following script to test my new module:</p>\n\n<pre><code>try:\n    import _tmp\n    res = _tmp.error()\n    print(res)\nexcept:\n    print(\"fail\")\n</code></pre>\n\n<p>The result I see on the screen is garbage. I tried substituting <code>(int)NPY_FLOAT</code> with <code>(int)NPY_FLOAT32, (int)NPY_FLOAT64, (int)NPY_DOUBLE</code> and I still get garbage.\nI am using python2.7.</p>\n\n<p>Thanks!!!</p>\n\n<p><strong>EDIT</strong>: following the answer below, I changed the last function to:</p>\n\n<pre><code>static PyObject *_aux_error(PyObject *self, PyObject *args) {\n\n\n    double *vector = calloc(2, sizeof(double));\n    vector[0] = 1.0;\n    vector[1] = 2.0;\n\n\n    npy_intp *dims = calloc(1 , sizeof(npy_intp));\n    dims[1] = 2;\n\n\n    PyObject *ret  = PyArray_SimpleNewFromData(1, dims, (int)NPY_FLOAT , &amp;vector );\n    return ret;\n}\n</code></pre>\n\n<p>Now python shows an empty array.</p>\n"}, {"tags": ["python", "pygame", "collision-detection", "sprite"], "comments": [{"owner": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "edited": false, "score": 0, "creation_date": 1420674651, "post_id": 27829900, "comment_id": 44067386, "body": "What goes wrong? Is there an error? Does <code>lives</code> change? Where have you placed your new code?"}, {"owner": {"reputation": 251, "user_id": 4241195, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/609b5c9dd8cc6b97a74c8d7b565e19cf?s=128&d=identicon&r=PG&f=1", "display_name": "alfiej12", "link": "https://stackoverflow.com/users/4241195/alfiej12"}, "reply_to_user": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "edited": false, "score": 0, "creation_date": 1420675801, "post_id": 27829900, "comment_id": 44067716, "body": "@SanjayManohar I have just updated my question with the whole code so you can see where i am maybe going wrong. It brings the error that self is not defined in the livestext."}, {"owner": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "edited": false, "score": 0, "creation_date": 1420721004, "post_id": 27829900, "comment_id": 44084322, "body": "OK. since you have defined <code>lives</code> inside <code>player</code>, you should use <code>player.lives</code> when you create <code>livestext</code>"}, {"owner": {"reputation": 251, "user_id": 4241195, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/609b5c9dd8cc6b97a74c8d7b565e19cf?s=128&d=identicon&r=PG&f=1", "display_name": "alfiej12", "link": "https://stackoverflow.com/users/4241195/alfiej12"}, "reply_to_user": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "edited": false, "score": 0, "creation_date": 1420763193, "post_id": 27829900, "comment_id": 44107947, "body": "Thats updates fine now thank you! The only problem i have now is that the lives is minus by one every time the player moves, could you suggest where to but the collision code in, so that the lives is only minus when the player touches a monster? @sanjaymanohar"}, {"owner": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "edited": false, "score": 1, "creation_date": 1420764950, "post_id": 27829900, "comment_id": 44108441, "body": "Yes, you have included <code>player</code> in the sprite group <code>group</code> (when you created the group at the start). In your <code>for monster in group</code> loop, you should check to ensure not <code>monster==group</code>. <code>player</code> always intersects <code>player</code>!"}, {"owner": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "edited": false, "score": 0, "creation_date": 1420813607, "post_id": 27829900, "comment_id": 44127435, "body": "sorry I meant <code>monster is not player</code>"}, {"owner": {"reputation": 251, "user_id": 4241195, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/609b5c9dd8cc6b97a74c8d7b565e19cf?s=128&d=identicon&r=PG&f=1", "display_name": "alfiej12", "link": "https://stackoverflow.com/users/4241195/alfiej12"}, "reply_to_user": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "edited": false, "score": 0, "creation_date": 1420818351, "post_id": 27829900, "comment_id": 44130592, "body": "So what would the code be in the for monster in group?  @sanjaymanohar"}, {"owner": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "edited": false, "score": 0, "creation_date": 1420819333, "post_id": 27829900, "comment_id": 44131247, "body": "<code>for monster in group:             if player.rect.colliderect(monster.rect) and monster is not player:                 player.lives -= 1</code>"}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 4241195, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/609b5c9dd8cc6b97a74c8d7b565e19cf?s=128&d=identicon&r=PG&f=1", "display_name": "alfiej12", "link": "https://stackoverflow.com/users/4241195/alfiej12"}, "edited": false, "score": 0, "creation_date": 1420675441, "post_id": 27830813, "comment_id": 44067618, "body": "i&#39;ve just done this but in the livestext it says &#39;self is not defined&#39;"}], "tags": [], "owner": {"reputation": 6594, "user_id": 93910, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bcd3c9d1bdca6ce813053f420ebced02?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay Manohar", "link": "https://stackoverflow.com/users/93910/sanjay-manohar"}, "is_accepted": true, "score": 1, "last_activity_date": 1420674972, "creation_date": 1420674972, "answer_id": 27830813, "question_id": 27829900, "link": "https://stackoverflow.com/questions/27829900/minus-lives-when-collide-with-enemy-not-working-pygame/27830813#27830813", "title": "minus lives when collide with enemy not working pygame", "body": "<p>I suspect the problem is that you only create <code>livestext</code> at the beginning. The should be  re-created each time you print it on the screen.\nYou seem to be drawing the text right at the end, after the game (why then?). So move the <code>livestext=...</code> line to before the <code>blit</code>. The lives may well be doing what you want, but perhaps you can't see it?</p>\n\n<p>Also, I'd recommend making <code>lives</code> an instance member:</p>\n\n<p>Do <code>self.lives=5</code> in the <code>__init__</code> </p>\n\n<p>and use <code>self.lives</code> instead of <code>lives</code> every time it occurs.</p>\n"}], "owner": {"reputation": 251, "user_id": 4241195, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/609b5c9dd8cc6b97a74c8d7b565e19cf?s=128&d=identicon&r=PG&f=1", "display_name": "alfiej12", "link": "https://stackoverflow.com/users/4241195/alfiej12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 27830813, "answer_count": 1, "score": 2, "last_activity_date": 1420819511, "creation_date": 1420670111, "last_edit_date": 1420819511, "question_id": 27829900, "link": "https://stackoverflow.com/questions/27829900/minus-lives-when-collide-with-enemy-not-working-pygame", "title": "minus lives when collide with enemy not working pygame", "body": "<p>I am making a pacman style game in pygame using python and i am trying to make it so that when the <code>player</code> collides with an enemy sprite (<code>monster</code>) the score gets reduced by 1. The code for the monster and player are below and also the code i have tried to minus the score. Any help would be appreciated. I can post the whole game code if this will help.</p>\n\n<p>The code i have tried to minus the player lives when colliding with a monster is below.</p>\n\n<pre><code>for monster in group:\n    if player.rect.colliderect(monster.rect):\n        player.lives -= 1\n</code></pre>\n"}, {"tags": ["python", "neo4j", "cypher", "py2neo"], "answers": [{"comments": [{"owner": {"reputation": 703, "user_id": 1638537, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7fd5bc6ee586ebbe86974138478c8af1?s=128&d=identicon&r=PG", "display_name": "Izack", "link": "https://stackoverflow.com/users/1638537/izack"}, "edited": false, "score": 0, "creation_date": 1420721791, "post_id": 27830649, "comment_id": 44084827, "body": "Thanks, I up voted this answer because it is in the right direction. Two minor issues: You have to count from 1 and not from 0, and this will return answer for specific node only."}, {"owner": {"reputation": 10388, "user_id": 632454, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94593f750fbdbcfe459d7d16f45780e1?s=128&d=identicon&r=PG", "display_name": "Brian Underwood", "link": "https://stackoverflow.com/users/632454/brian-underwood"}, "reply_to_user": {"reputation": 703, "user_id": 1638537, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7fd5bc6ee586ebbe86974138478c8af1?s=128&d=identicon&r=PG", "display_name": "Izack", "link": "https://stackoverflow.com/users/1638537/izack"}, "edited": false, "score": 0, "creation_date": 1420804430, "post_id": 27830649, "comment_id": 44122342, "body": "Ah, good point about the 0/1.  I put in the <code>id</code> though because that seems to have been what you wanted from your question."}], "tags": [], "owner": {"reputation": 10388, "user_id": 632454, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94593f750fbdbcfe459d7d16f45780e1?s=128&d=identicon&r=PG", "display_name": "Brian Underwood", "link": "https://stackoverflow.com/users/632454/brian-underwood"}, "is_accepted": false, "score": 1, "last_activity_date": 1420673930, "creation_date": 1420673930, "answer_id": 27830649, "question_id": 27829850, "link": "https://stackoverflow.com/questions/27829850/neo4j-in-a-forum-structure-how-to-find-how-many-response-each-post-got-includ/27830649#27830649", "title": "neo4j, in a forum structure, how to find how many response each post got (including child of child...)", "body": "<p>This should return all distinct children in the tree:</p>\n\n<pre><code>MATCH (message:MSG {id: {message_id}})&lt;-[:CHILD_OF*0..]-(child:MSG)\nRETURN DISTINCT child\n</code></pre>\n\n<p>If you want a count, you can do <code>RETURN COUNT(DISTINCT child)</code></p>\n"}, {"comments": [{"owner": {"reputation": 703, "user_id": 1638537, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7fd5bc6ee586ebbe86974138478c8af1?s=128&d=identicon&r=PG", "display_name": "Izack", "link": "https://stackoverflow.com/users/1638537/izack"}, "edited": false, "score": 0, "creation_date": 1420791168, "post_id": 27830984, "comment_id": 44115727, "body": "Thanks! this is a perfect answer."}], "tags": [], "owner": {"reputation": 57206, "user_id": 974731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG", "display_name": "cybersam", "link": "https://stackoverflow.com/users/974731/cybersam"}, "is_accepted": true, "score": 3, "last_activity_date": 1420676126, "creation_date": 1420676126, "answer_id": 27830984, "question_id": 27829850, "link": "https://stackoverflow.com/questions/27829850/neo4j-in-a-forum-structure-how-to-find-how-many-response-each-post-got-includ/27830984#27830984", "title": "neo4j, in a forum structure, how to find how many response each post got (including child of child...)", "body": "<p>This query should return a result set similar to your table (but without the first column):</p>\n\n<pre><code>MATCH (m:MSG)\nOPTIONAL MATCH (c:MSG)-[:CHILD_OF*1..]-&gt;(m)\nWITH m, COLLECT(DISTINCT c.id) AS childMsgIds\nRETURN m.id AS `msg id`, LENGTH(childMsgIds) AS Rank, childMsgIds AS `List of all responses`\n</code></pre>\n\n<p>Does this suit your needs?</p>\n"}], "owner": {"reputation": 703, "user_id": 1638537, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7fd5bc6ee586ebbe86974138478c8af1?s=128&d=identicon&r=PG", "display_name": "Izack", "link": "https://stackoverflow.com/users/1638537/izack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 27830984, "answer_count": 2, "score": 2, "last_activity_date": 1420676126, "creation_date": 1420669921, "question_id": 27829850, "link": "https://stackoverflow.com/questions/27829850/neo4j-in-a-forum-structure-how-to-find-how-many-response-each-post-got-includ", "title": "neo4j, in a forum structure, how to find how many response each post got (including child of child...)", "body": "<p>I'm writing a program that analyse posts in a forum.<br>\nAfter loading forum threads into <strong>neo4j DB</strong>,<br>\nI'm trying to <strong>\"Rank\" posts</strong> by the <strong>number of responses</strong> they got. </p>\n\n<p><strong>Responses</strong> include direct responses as well as the entire sub-tree for each direct response.<br>\nThe idea is to count all children down the tree (the tree is a simple tree <strong>without any loops</strong>)  </p>\n\n<p>Every post is a <strong>neo4j node</strong>   </p>\n\n<blockquote>\n<pre><code># Create MSG nodes:\nstatement = \"CREATE (c:MSG {id:{N}, title:{T}}) RETURN c\"\nfor msg in msgs:\n    graph.cypher.execute(statement, {\"N\": msg[0], \"T\": msg[1]})\n</code></pre>\n</blockquote>\n\n<p>Node that represent a post which is a response to another post has a relation <strong>r:CHILD_OF</strong> to his parent node.<br>\nroot nodes will not have r:CHILD_OF relation, but will have a \"0\" as their parent ID  </p>\n\n<pre><code>|parent id | msg id | Rank | List of all responses\n+----------+--------+------+----------------------\n|0         | 1051   | 3    | (1054, 1056, 1060)\n|1051      | 1054   | 0    |\n|1051      | 1056   | 1    | (1060)\n|1056      | 1060   | 0    |\n|0         | 1052   | 0    |\n</code></pre>\n\n<p>in this table,   </p>\n\n<ul>\n<li>msg 1051 is a first post in a thread</li>\n<li>msg 1052 is a first post in another thread</li>\n<li>msg 1051 got 2 direct responses (1054, 1056) and another in-direct response (1060)</li>\n<li>msg 1056 got 1 direct response (1060)</li>\n</ul>\n\n<p><strong>I need to get the cypher that can create this ranking</strong>.<br>\nBut not sure how to write it.<br>\nThe project is in python and I'm using python 2.7, py2neo 2.0.3, neo4j 2.1.6</p>\n"}, {"tags": ["python", "linux", "pip", "virtualenv", "python-3.4"], "comments": [{"owner": {"reputation": 45398, "user_id": 873145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ab6f2836e0722ea0cbfeb97a74f131d?s=128&d=identicon&r=PG", "display_name": "Thomas Orozco", "link": "https://stackoverflow.com/users/873145/thomas-orozco"}, "edited": false, "score": 0, "creation_date": 1420670492, "post_id": 27829783, "comment_id": 44065901, "body": "How did you install Python 3? Can you run <code>ls -lLa $(which python3)</code>"}, {"owner": {"reputation": 2322, "user_id": 666130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/737423db0bb92afe67867d54a282c90b?s=128&d=identicon&r=PG", "display_name": "staticdev", "link": "https://stackoverflow.com/users/666130/staticdev"}, "reply_to_user": {"reputation": 45398, "user_id": 873145, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ab6f2836e0722ea0cbfeb97a74f131d?s=128&d=identicon&r=PG", "display_name": "Thomas Orozco", "link": "https://stackoverflow.com/users/873145/thomas-orozco"}, "edited": false, "score": 0, "creation_date": 1420758986, "post_id": 27829783, "comment_id": 44106600, "body": "I followed to python docs: ./configure; make; sudo make install; Command result: -rwxr-xr-x 2 root root 11598453 Jan 7 19:20 /usr/local/bin/python3"}, {"owner": {"reputation": 60360, "user_id": 1860929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6UcuF.jpg?s=128&g=1", "display_name": "Anshul Goyal", "link": "https://stackoverflow.com/users/1860929/anshul-goyal"}, "edited": false, "score": 1, "creation_date": 1421071895, "post_id": 27829783, "comment_id": 44206885, "body": "@StaticX Is that a shared partition that you have mounted? Check <a href=\"http://stackoverflow.com/a/14761023/1860929\">this answer</a>."}, {"owner": {"reputation": 2322, "user_id": 666130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/737423db0bb92afe67867d54a282c90b?s=128&d=identicon&r=PG", "display_name": "staticdev", "link": "https://stackoverflow.com/users/666130/staticdev"}, "reply_to_user": {"reputation": 60360, "user_id": 1860929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6UcuF.jpg?s=128&g=1", "display_name": "Anshul Goyal", "link": "https://stackoverflow.com/users/1860929/anshul-goyal"}, "edited": false, "score": 0, "creation_date": 1421275315, "post_id": 27829783, "comment_id": 44302676, "body": "@mu \u7121 it certainly has to do with the shared partition. I tried on a non-shared partition and worked. But, I couldn&#39;t find this partition mounted in /etc/fstab."}, {"owner": {"reputation": 60360, "user_id": 1860929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6UcuF.jpg?s=128&g=1", "display_name": "Anshul Goyal", "link": "https://stackoverflow.com/users/1860929/anshul-goyal"}, "edited": false, "score": 0, "creation_date": 1421306029, "post_id": 27829783, "comment_id": 44310776, "body": "@StaticX Does the shared partition have a different filesystem then the non-shared one you tried upon? If yes, then IMO, that will definitely cause an error since you are making and compiling binaries for python on one filesystem, and so it will not work on another filesystem."}, {"owner": {"reputation": 60360, "user_id": 1860929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6UcuF.jpg?s=128&g=1", "display_name": "Anshul Goyal", "link": "https://stackoverflow.com/users/1860929/anshul-goyal"}, "edited": false, "score": 0, "creation_date": 1421306436, "post_id": 27829783, "comment_id": 44310911, "body": "@StaticX Also, can you add the output of <code>sudo fdisk -l</code> to the question?"}, {"owner": {"reputation": 2322, "user_id": 666130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/737423db0bb92afe67867d54a282c90b?s=128&d=identicon&r=PG", "display_name": "staticdev", "link": "https://stackoverflow.com/users/666130/staticdev"}, "reply_to_user": {"reputation": 60360, "user_id": 1860929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6UcuF.jpg?s=128&g=1", "display_name": "Anshul Goyal", "link": "https://stackoverflow.com/users/1860929/anshul-goyal"}, "edited": false, "score": 0, "creation_date": 1421362859, "post_id": 27829783, "comment_id": 44341814, "body": "@mu \u7121 answer edited for the outputs. The shared partition is a NTFS and the non-shared is EXT4. But, when I create a new environment the binaries are recompiled? Does the binaries depend on the filesystem? (I thought it only depended on the system instructions architecture - I am not very good at compilers interns). Shouldn&#39;t NTFS run on Linux because of the compatibility layers?"}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1421365848, "post_id": 27829783, "comment_id": 44342842, "body": "I don&#39;t know if it can solve your problem, but have you considered using <a href=\"https://docs.python.org/3/library/venv.html\" rel=\"nofollow noreferrer\">pyvenv</a> from the python3 standard library. It&#39;s more or less an improved version of virtualenv."}, {"owner": {"reputation": 2322, "user_id": 666130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/737423db0bb92afe67867d54a282c90b?s=128&d=identicon&r=PG", "display_name": "staticdev", "link": "https://stackoverflow.com/users/666130/staticdev"}, "reply_to_user": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1421625368, "post_id": 27829783, "comment_id": 44419703, "body": "@H&#229;ken Lid I tried that, as shown in my answer."}, {"owner": {"reputation": 2322, "user_id": 666130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/737423db0bb92afe67867d54a282c90b?s=128&d=identicon&r=PG", "display_name": "staticdev", "link": "https://stackoverflow.com/users/666130/staticdev"}, "reply_to_user": {"reputation": 60360, "user_id": 1860929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6UcuF.jpg?s=128&g=1", "display_name": "Anshul Goyal", "link": "https://stackoverflow.com/users/1860929/anshul-goyal"}, "edited": false, "score": 0, "creation_date": 1421625431, "post_id": 27829783, "comment_id": 44419716, "body": "@mu \u7121 please put the shared partition as the answer for me to give you the bounty."}], "answers": [{"comments": [{"owner": {"reputation": 2322, "user_id": 666130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/737423db0bb92afe67867d54a282c90b?s=128&d=identicon&r=PG", "display_name": "staticdev", "link": "https://stackoverflow.com/users/666130/staticdev"}, "edited": false, "score": 0, "creation_date": 1421274801, "post_id": 27951468, "comment_id": 44302438, "body": "Nice script, but still didn&#39;t solve my problem. I also forked and updated the Python and Django versions for you on GitHub. Thanks anyhow!"}, {"owner": {"reputation": 2322, "user_id": 666130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/737423db0bb92afe67867d54a282c90b?s=128&d=identicon&r=PG", "display_name": "staticdev", "link": "https://stackoverflow.com/users/666130/staticdev"}, "edited": false, "score": 0, "creation_date": 1421275849, "post_id": 27951468, "comment_id": 44302916, "body": "Actually, your script uses RPM (mkenv3: line 17: rpm: command not found).. and I am using Debian. But I already know that it has something to do with shared partition as @mu \u7121 wrote above. We could work out a way for this script being compatible with multiple distributions."}], "tags": [], "owner": {"reputation": 1025, "user_id": 1698426, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/01fc68ff8e5babbe4e81075539a4b3ab?s=128&d=identicon&r=PG", "display_name": "John Schmitt", "link": "https://stackoverflow.com/users/1698426/john-schmitt"}, "is_accepted": false, "score": 4, "last_activity_date": 1421287468, "last_edit_date": 1495539880, "creation_date": 1421265903, "answer_id": 27951468, "question_id": 27829783, "link": "https://stackoverflow.com/questions/27829783/couldnt-create-working-virtual-environment-for-python-3-4/27951468#27951468", "title": "Couldn&#39;t create working virtual environment for Python 3.4", "body": "<p>I struggled with this as well so I wrote an <a href=\"https://github.com/marmalodak/centos_python3_django_setup/blob/master/mkenv3\" rel=\"nofollow noreferrer\" title=\"ugly bash script\">ugly bash script</a> to help me with this.  The only salient difference between what you do and what I do is on line 133:</p>\n\n<pre><code>/path/to/python/bin/python3.4 /path/to/python/bin/pyvenv /path/to/venv\n</code></pre>\n\n<p>That is, explicitly name the instance of python and the venv tool.  Then</p>\n\n<pre><code>/path/to/venv/bin/pip install django # or whatever\n</code></pre>\n\n<hr>\n\n<h2>Edit</h2>\n\n<p>I installed Linux Mint in a VM to try and build a Python 3.4 virtual environment.  Based on the error messages I saw and <a href=\"https://stackoverflow.com/a/22594608/1698426\" title=\"this answer\">this answer</a>, I learned that I must do the following to get a complete Python 3.4 build:</p>\n\n<pre><code>apt-get install build-essential libssl-dev openssl\n</code></pre>\n\n<p>Without this, my Python 3.4 build did not contain pip.  Note that you probably want to install readline and other development packages. </p>\n\n<hr>\n\n<h2>Unsolicited Advice</h2>\n\n<ol>\n<li>Do not do this as root, create a user dedicated to running your venv</li>\n<li>Create a script to create your environment</li>\n<li>Check that script into your source code repo</li>\n</ol>\n\n<p>I deleted my python binaries and venvs multiple times and then recreated all of with this script to make sure that my script reproduced my environment and then stripped the identifying information and saved that on github to share it.  I should really be using a more formal tool for this like docker/puppet/chef.</p>\n"}, {"comments": [{"owner": {"reputation": 2322, "user_id": 666130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/737423db0bb92afe67867d54a282c90b?s=128&d=identicon&r=PG", "display_name": "staticdev", "link": "https://stackoverflow.com/users/666130/staticdev"}, "edited": false, "score": 0, "creation_date": 1421593339, "post_id": 27979294, "comment_id": 44409702, "body": "This change had just crashed my system, turning it to a readonly filesystem. I couldn&#39;t open most of my programs and had to use a linux live-dvd to change back /etc/fstab."}], "tags": [], "owner": {"reputation": 60360, "user_id": 1860929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6UcuF.jpg?s=128&g=1", "display_name": "Anshul Goyal", "link": "https://stackoverflow.com/users/1860929/anshul-goyal"}, "is_accepted": true, "score": 4, "last_activity_date": 1421642408, "last_edit_date": 1495540340, "creation_date": 1421394163, "answer_id": 27979294, "question_id": 27829783, "link": "https://stackoverflow.com/questions/27829783/couldnt-create-working-virtual-environment-for-python-3-4/27979294#27979294", "title": "Couldn&#39;t create working virtual environment for Python 3.4", "body": "<p>Is that a shared partition that you have mounted? Does the shared partition have a different filesystem then the non-shared one you tried upon? If yes, then IMO, that will definitely cause an error since you are making and compiling binaries for python on one filesystem, and so it will not work on another filesystem. </p>\n\n<p>As mentioned in <a href=\"https://stackoverflow.com/a/14761023/1860929\">this answer</a>, adding to your /etc/fstab with an entry with <code>exec</code> flag might make it work for you, i.e., you might need to add another entry for the NTFS disk here to make it automount:</p>\n\n<pre><code>&lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;\n-&gt; was on /dev/sdaX during installation\nUUID=&lt;uid_of_NTFS&gt; /     ntfs    auto,user,exec,nodev,rw,errors=remount-ro 0       1\n</code></pre>\n"}], "owner": {"reputation": 2322, "user_id": 666130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/737423db0bb92afe67867d54a282c90b?s=128&d=identicon&r=PG", "display_name": "staticdev", "link": "https://stackoverflow.com/users/666130/staticdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2183, "favorite_count": 1, "accepted_answer_id": 27979294, "answer_count": 2, "score": 5, "last_activity_date": 1421642408, "creation_date": 1420669642, "last_edit_date": 1421393890, "question_id": 27829783, "link": "https://stackoverflow.com/questions/27829783/couldnt-create-working-virtual-environment-for-python-3-4", "title": "Couldn&#39;t create working virtual environment for Python 3.4", "body": "<p>I <a href=\"https://docs.python.org/3/using/unix.html#building-python\" rel=\"nofollow\">installed Python 3.4.2</a> and Virtualenv 12.0.5 in my Linux Mint 17.1</p>\n\n<p>Then I tried creating:\n<code>$ virtualenv venv</code></p>\n\n<p>And also using --clear and/or -p /usr/bin/python3.4, always getting the messages:</p>\n\n<p><code>Using base prefix '/usr'\nNew python executable in venv/bin/python3\nAlso creating executable in venv/bin/python\nERROR: The executable venv/bin/python3 could not be run: [Errno 13] Permission denied</code></p>\n\n<p>Another try was:\n<code>$ pyvenv-3.4 venv</code></p>\n\n<p>It gave no errors on creation, but in the venv/bin file the python3.4 is a symbolic link to /usr/local/bin/python3.4. Then when I activate and install any lib using pip or pip3, then try to import it, I get the error:\n<code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named 'anymoduledownloaded'</code></p>\n\n<p>I always used virtualenv in Python 2.X and never got this kind of errors. Any thoughts on what am I doing wrong?</p>\n\n<p>Thanks!!</p>\n\n<p>=======EDITED=======</p>\n\n<p>This is the output of my partitions (fdisk -l):</p>\n\n<pre><code>Device Boot      Start         End      Blocks   Id  System\n/dev/sda1            2048    98707455    49352704   83  Linux\n/dev/sda2       303507456  3890644991  1793568768    5  Extended\n/dev/sda3   *    98707456   303507455   102400000    7  HPFS/NTFS/exFAT\n/dev/sda4      3890644992  3907028991     8192000   82  Linux swap / Solaris\n/dev/sda5       303509504  3890644991  1793567744    7  HPFS/NTFS/exFAT`\n</code></pre>\n\n<p>And also my fstab:</p>\n\n<pre><code>&lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;\n-&gt; was on /dev/sda1 during installation\nUUID=a38f9c6d-3cd9-4486-b896-acbc6182ec61 /               ext4    errors=remount-ro 0       1\n-&gt; swap was on /dev/sda4 during installation\nUUID=efad7b53-79a8-4230-8226-9ca90c68ea9d none            swap    sw              0       0`\n</code></pre>\n"}, {"tags": ["python", "variables"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 2, "creation_date": 1420669590, "post_id": 27829756, "comment_id": 44065498, "body": "use a dictionary instead"}, {"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 1, "creation_date": 1420669764, "post_id": 27829756, "comment_id": 44065579, "body": "<code>data = [fn(x) for x in range(3)]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 15852, "user_id": 2294755, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/moDhz.jpg?s=128&g=1", "display_name": "Hackaholic", "link": "https://stackoverflow.com/users/2294755/hackaholic"}, "is_accepted": true, "score": 8, "last_activity_date": 1420669795, "creation_date": 1420669795, "answer_id": 27829821, "question_id": 27829756, "link": "https://stackoverflow.com/questions/27829756/dynamically-create-variable-names/27829821#27829821", "title": "Dynamically create variable names?", "body": "<p>you can use dictionary like this: examples</p>\n\n<pre><code>&gt;&gt;&gt; a = ['hello', 'banana', 'apple']\n&gt;&gt;&gt; my_dict = {}\n&gt;&gt;&gt; for x in range(len(a)):\n...     my_dict[x] = a[x]\n... \n&gt;&gt;&gt; my_dict\n{0: 'hello', 1: 'banana', 2: 'apple'}\n\n&gt;&gt;&gt; my_dict[1]\n'banana' \n</code></pre>\n"}], "owner": {"reputation": 5357, "user_id": 928017, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f4cd38032c44248783f3ae749a65c0f0?s=128&d=identicon&r=PG", "display_name": "Goran", "link": "https://stackoverflow.com/users/928017/goran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23295, "favorite_count": 3, "closed_date": 1420669608, "accepted_answer_id": 27829821, "answer_count": 1, "score": 5, "last_activity_date": 1582070253, "creation_date": 1420669527, "last_edit_date": 1582070253, "question_id": 27829756, "link": "https://stackoverflow.com/questions/27829756/dynamically-create-variable-names", "closed_reason": "Duplicate", "title": "Dynamically create variable names?", "body": "<p>I have some logic which I need to repeat 6 times. Result is stored in variable at the end, but I need variable name to be something as <code>data1</code>, <code>data2</code>, <code>data3</code>, etc. So if I have:</p>\n\n<pre><code>for x in range(0, 3):\n   ...some logic...\n   data = result\n</code></pre>\n\n<p>How can I get data variable named as <code>data1</code>, <code>data2</code> etc based on the loop number?</p>\n"}, {"tags": ["python", "setup.py"], "answers": [{"tags": [], "owner": {"reputation": 586, "user_id": 945856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08bf7b4fad941e9ae7446353d309b57e?s=128&d=identicon&r=PG", "display_name": "deadbeef404", "link": "https://stackoverflow.com/users/945856/deadbeef404"}, "is_accepted": true, "score": 1, "last_activity_date": 1420670831, "creation_date": 1420670831, "answer_id": 27830055, "question_id": 27829754, "link": "https://stackoverflow.com/questions/27829754/include-entire-directory-in-python-setup-py-data-files/27830055#27830055", "title": "Include entire directory in python setup.py data_files", "body": "<blockquote>\n  <p>I don't know how to do that with relative paths</p>\n</blockquote>\n\n<p>You need to get the path of the directory first, so...</p>\n\n<p>Say you have this directory structure:</p>\n\n<pre><code>cur_directory\n|- setup.py\n|- inner_dir\n   |- file2.py\n</code></pre>\n\n<p>To get the directory of the current file (in this case setup.py), use this:</p>\n\n<pre><code>cur_directory_path = os.path.abspath(os.path.dirname(__file__))\n</code></pre>\n\n<p>Then, to get a directory path relative to <code>current_directory</code>, just join some other directories, eg:</p>\n\n<pre><code>inner_dir_path = os.path.join(cur_directory_path, 'inner_dir')\n</code></pre>\n\n<p>If you want to move up a directory, just use \"<code>..</code>\", for example:</p>\n\n<pre><code>parent_dir_path = os.path.join(current_directory, '..')\n</code></pre>\n\n<p>Once you have that path, you can do <code>os.listdir</code></p>\n\n<p>For completeness:</p>\n\n<p>If you want the path of a file, in this case \"<code>file2.py</code>\" relative to <code>setup.py</code>, you could do:</p>\n\n<pre><code>file2_path = os.path.join(cur_directory_path, 'inner_dir', 'file2.py') \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 604, "user_id": 2491604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7da750a74394504a82120da86eb8b930?s=128&d=identicon&r=PG", "display_name": "karelv", "link": "https://stackoverflow.com/users/2491604/karelv"}, "is_accepted": false, "score": 4, "last_activity_date": 1507031663, "creation_date": 1507031663, "answer_id": 46544001, "question_id": 27829754, "link": "https://stackoverflow.com/questions/27829754/include-entire-directory-in-python-setup-py-data-files/46544001#46544001", "title": "Include entire directory in python setup.py data_files", "body": "<pre><code>import glob\n\nfor filename in glob.iglob('inner_dir/**/*', recursive=True):\n    print (filename)\n</code></pre>\n\n<p>Doing this, you get directly a list of files relative to current directory.</p>\n"}, {"comments": [{"owner": {"reputation": 2730, "user_id": 185510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/604d54fe0ba81afc693c64b9a66b0960?s=128&d=identicon&r=PG", "display_name": "Andre Miras", "link": "https://stackoverflow.com/users/185510/andre-miras"}, "edited": false, "score": 0, "creation_date": 1588528233, "post_id": 54337574, "comment_id": 108926489, "body": "the first <code>glob(&#39;source_dir&#47;**&#39;)</code> should be with <code>recursive=True</code> or it just shows top level <a href=\"https://docs.python.org/3/library/glob.html#glob.glob\" rel=\"nofollow noreferrer\">docs.python.org/3/library/glob.html#glob.glob</a>"}], "tags": [], "owner": {"reputation": 2628, "user_id": 1508243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c55ab140c6839baef28a70686f4b8bda?s=128&d=identicon&r=PG", "display_name": "Pete Baughman", "link": "https://stackoverflow.com/users/1508243/pete-baughman"}, "is_accepted": false, "score": 12, "last_activity_date": 1594093936, "last_edit_date": 1594093936, "creation_date": 1548288666, "answer_id": 54337574, "question_id": 27829754, "link": "https://stackoverflow.com/questions/27829754/include-entire-directory-in-python-setup-py-data-files/54337574#54337574", "title": "Include entire directory in python setup.py data_files", "body": "<p>karelv has the right idea, but to answer the stated question more directly:</p>\n<pre><code>from glob import glob\n\nsetup(\n    #...\n    data_files = [\n        ('target_directory_1', glob('source_dir/*')), # source_dir only - not recursive\n        ('target_directory_2', glob('nested_source_dir/**/*', recursive=True)), # recursive\n        # etc...\n    ],\n    #...\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 11355043, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7I-_Jl1iPeI/AAAAAAAAAAI/AAAAAAAAAFU/kcPCGOg-0T4/photo.jpg?sz=128", "display_name": "Paul Mundt", "link": "https://stackoverflow.com/users/11355043/paul-mundt"}, "is_accepted": false, "score": 0, "last_activity_date": 1608770426, "creation_date": 1608770426, "answer_id": 65432634, "question_id": 27829754, "link": "https://stackoverflow.com/questions/27829754/include-entire-directory-in-python-setup-py-data-files/65432634#65432634", "title": "Include entire directory in python setup.py data_files", "body": "<p>I ran into the same problem with directories containing nested subdirectories. The glob solutions didn't work, as they would include the directory in the list, which setup would blow up on, and in cases where I excluded matched directories, it still dumped them all in the same directory, which is not what I wanted, either. I ended up just falling back on <code>os.walk()</code>:</p>\n<pre><code>def generate_data_files():\n    data_files = []\n    data_dirs = ('data', 'plugins')\n    for path, dirs, files in chain.from_iterable(os.walk(data_dir) for data_dir in data_dirs):\n        install_dir = os.path.join(sys.prefix, 'share/&lt;my-app&gt;/' + path)    \n        list_entry = (install_dir, [os.path.join(path, f) for f in files if not f.startswith('.')])\n        data_files.append(list_entry)\n\n    return data_files\n</code></pre>\n<p>and then setting <code>data_files=generate_data_files()</code> in the <code>setup()</code> block.</p>\n"}], "owner": {"reputation": 169, "user_id": 1456323, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b54209e6a655e2838fccede27455a9b?s=128&d=identicon&r=PG", "display_name": "disambiguator", "link": "https://stackoverflow.com/users/1456323/disambiguator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6898, "favorite_count": 1, "accepted_answer_id": 27830055, "answer_count": 4, "score": 13, "last_activity_date": 1608770426, "creation_date": 1420669517, "question_id": 27829754, "link": "https://stackoverflow.com/questions/27829754/include-entire-directory-in-python-setup-py-data-files", "title": "Include entire directory in python setup.py data_files", "body": "<p>The data_files parameter for setup takes input in the following format:</p>\n\n<pre><code>setup(...\n    data_files = [(target_directory, [list of files to be put there])]\n    ....)\n</code></pre>\n\n<p>Is there a way for me to specify an entire directory of data instead, so I don't have to name each file individually and update it as I change implementation in my project?</p>\n\n<p>I attempted to use <code>os.listdir()</code>, but I don't know how to do that with relative paths, I couldn't use <code>os.getcwd()</code> or <code>os.realpath(__file__)</code> since those don't point to my repository root correctly.</p>\n"}, {"tags": ["python", "regex", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": false, "score": 3, "last_activity_date": 1420723067, "last_edit_date": 1420723067, "creation_date": 1420671226, "answer_id": 27830130, "question_id": 27829732, "link": "https://stackoverflow.com/questions/27829732/replace-text-with-numbers-using-dictionary-in-pandas/27830130#27830130", "title": "Replace text with numbers using dictionary in pandas", "body": "<p>Let me suggest a different approach: You could parse the date strings into a column of pandas TimeStamps like this:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.read_table('data', sep='\\s+')\nfor col in ('ltouch_datetime', 'conversion_datetime'):\n    df[col] = pd.to_datetime(df[col], format='%d%b%y:%H:%M:%S')\n\nprint(df)\n\n#    User_ID     ltouch_datetime conversion_datetime\n# 0        1 2014-11-11 13:12:56 2014-11-11 16:12:00\n# 1        2 2014-11-07 17:46:14 2014-11-08 13:10:00\n# 2        3 2014-12-04 17:46:14 2015-12-04 13:12:00\n</code></pre>\n\n<p>I would stop right here, since representing dates as TimeStamps is the ideal\nform for the data in Pandas.</p>\n\n<p>However, if you need/want date strings with 3-letter months like <code>'NOV'</code> converted to <code>-11-</code>, then you can convert the Timestamps with <code>strftime</code> and <code>apply</code>:</p>\n\n<pre><code>for col in ('ltouch_datetime', 'conversion_datetime'):\n    df[col] = df[col].apply(lambda x: x.strftime('%d-%m-%y:%H:%M:%S'))\n\nprint(df)\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>   User_ID    ltouch_datetime conversion_datetime\n0        1  11-11-14:13:12:56   11-11-14:16:12:00\n1        2  07-11-14:17:46:14   08-11-14:13:10:00\n2        3  04-12-14:17:46:14   04-12-15:13:12:00\n</code></pre>\n\n<hr>\n\n<p>To answer your question literally, in order to use <code>Series.str.replace</code> you need a column with the month string abbreviations all by themselves. You can arrange for that by first calling <code>Series.str.extract</code>. Then you can join the columns back into one using <code>apply</code>:</p>\n\n<pre><code>import pandas as pd\nimport calendar\nmonth_map = {calendar.month_abbr[m].upper():'-{:02d}-'.format(m) \n             for m in range(1,13)}\n\ndf = pd.read_table('data', sep='\\s+')\nfor col in ('ltouch_datetime', 'conversion_datetime'):\n    tmp = df[col].str.extract(r'(.*?)(\\D+)(.*)')\n    tmp[1] = tmp[1].replace(month_map)\n    df[col] = tmp.apply(''.join, axis=1)\n\nprint(df)\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>   User_ID    ltouch_datetime conversion_datetime\n0        1  11-11-14:13:12:56   11-11-14:16:12:00\n1        2  07-11-14:17:46:14   08-11-14:13:10:00\n2        3  04-12-14:17:46:14   04-12-15:13:12:00\n</code></pre>\n\n<hr>\n\n<p>Finally, although you haven't asked for this directly, it's good to be aware\nthat if your data is in a file, you can parse the datestring columns into\nTimeStamps <em>directly</em> using</p>\n\n<pre><code>import pandas as pd\nimport datetime as DT\ndf = pd.read_table(\n    'data', sep='\\s+', parse_dates=[1,2],\n    date_parser=lambda x: DT.datetime.strptime(x, '%d%b%y:%H:%M:%S'))\n</code></pre>\n\n<p>This might be the most convenient method of all (assuming you want TimeStamps).</p>\n"}], "owner": {"reputation": 76, "user_id": 3466236, "user_type": "registered", "profile_image": "https://graph.facebook.com/10100722324452806/picture?type=large", "display_name": "gsilv", "link": "https://stackoverflow.com/users/3466236/gsilv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1420723067, "creation_date": 1420669434, "question_id": 27829732, "link": "https://stackoverflow.com/questions/27829732/replace-text-with-numbers-using-dictionary-in-pandas", "title": "Replace text with numbers using dictionary in pandas", "body": "<p>I'm trying to replace months represented as a character (e.g. 'NOV') for their numerical counterparts ('-11-'). I can get the following piece of code to work properly.</p>\n\n<pre><code>df_cohorts['ltouch_datetime'] = df_cohorts['ltouch_datetime'].str.replace('NOV','-11-')\ndf_cohorts['ltouch_datetime'] = df_cohorts['ltouch_datetime'].str.replace('DEC','-12-')\ndf_cohorts['ltouch_datetime'] = df_cohorts['ltouch_datetime'].str.replace('JAN','-01-')\n</code></pre>\n\n<p>However, to avoid redundancy, I'd like to use a dictionary and .replace to replace the character variable for all months. </p>\n\n<pre><code>r_month1 = {'JAN':'-01-','FEB':'-02-','MAR':'-03-','APR':'-04-','MAY':'-05-','JUN':'-06-','JUL':'-07-','AUG':'-08-','SEP':'-09-','OCT':'-10-','NOV':'-11-','DEC':'-12-'}\ndf_cohorts.replace({'conversion_datetime': r_month1,'ltouch_datetime': r_month1})\n</code></pre>\n\n<p>When I enter the code above, my output dataset is unchanged. For reference, please see my sample data below.</p>\n\n<pre><code>User_ID    ltouch_datetime     conversion_datetime\n\n001        11NOV14:13:12:56     11NOV14:16:12:00 \n002        07NOV14:17:46:14     08NOV14:13:10:00 \n003        04DEC14:17:46:14     04DEC15:13:12:00\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "list", "pandas"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 1, "creation_date": 1420669345, "post_id": 27829635, "comment_id": 44065385, "body": "Not sure what you are trying to achieve here but you could just change your line to this: <code>s.iloc[ i ]=[&#39;prime&#39;]</code>"}, {"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 1, "creation_date": 1420669447, "post_id": 27829635, "comment_id": 44065434, "body": "Be warned: having lists (or, more generally, non-scalars) as elements in Series and DataFrames usually leads to headaches, even though it&#39;s sometimes useful as an intermediate step."}], "answers": [{"tags": [], "owner": {"reputation": 33681, "user_id": 1330293, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/76742a2b36b2e174181679118274e2e7?s=128&d=identicon&r=PG", "display_name": "elyase", "link": "https://stackoverflow.com/users/1330293/elyase"}, "is_accepted": false, "score": 1, "last_activity_date": 1420669374, "creation_date": 1420669374, "answer_id": 27829722, "question_id": 27829635, "link": "https://stackoverflow.com/questions/27829635/append-item-to-list-in-pandas-by-index/27829722#27829722", "title": "append item to list in pandas by index", "body": "<p>Try this:</p>\n\n<pre><code>s = pd.Series([[] for _ in range(20)], index= range(0,20) )\n</code></pre>\n\n<p>Your problem is that instead of having several different empty lists you have a reference to the same list several times. An example so that you see the problem:</p>\n\n<pre><code>&gt;&gt;&gt; lists = [[]] * 5\n&gt;&gt;&gt; lists\n[[], [], [], [], []]\n&gt;&gt;&gt; lists[0].append(1)\n&gt;&gt;&gt; lists\n[[1], [1], [1], [1], [1]]\n</code></pre>\n"}], "owner": {"reputation": 617, "user_id": 2547342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dd9lM.jpg?s=128&g=1", "display_name": "rawkintrevo", "link": "https://stackoverflow.com/users/2547342/rawkintrevo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 0, "closed_date": 1420670057, "answer_count": 1, "score": 1, "last_activity_date": 1420669640, "creation_date": 1420669066, "last_edit_date": 1420669640, "question_id": 27829635, "link": "https://stackoverflow.com/questions/27829635/append-item-to-list-in-pandas-by-index", "closed_reason": "Duplicate", "title": "append item to list in pandas by index", "body": "<p>I have a Series in pandas consisting of empty lists.</p>\n\n<p><code>&gt;&gt;&gt; s = pd.Series( [[]] * 20, index= range(0,20) )</code></p>\n\n<p>I want to add tags to certain elements by index. </p>\n\n<pre><code>&gt;&gt;&gt; for i in [1,3,5,7,11]:\n...     s.loc[ i ].append('prime')\n</code></pre>\n\n<p>but this is what I keep getting:</p>\n\n<pre><code>&gt;&gt;&gt; s\n0     [prime, prime, prime, prime, prime]\n1     [prime, prime, prime, prime, prime]\n2     [prime, prime, prime, prime, prime]\n3     [prime, prime, prime, prime, prime]\n4     [prime, prime, prime, prime, prime]\n5     [prime, prime, prime, prime, prime]\n6     [prime, prime, prime, prime, prime]\n7     [prime, prime, prime, prime, prime]\n8     [prime, prime, prime, prime, prime]\n9     [prime, prime, prime, prime, prime]\n10    [prime, prime, prime, prime, prime]\n11    [prime, prime, prime, prime, prime]\n12    [prime, prime, prime, prime, prime]\n13    [prime, prime, prime, prime, prime]\n14    [prime, prime, prime, prime, prime]\n15    [prime, prime, prime, prime, prime]\n16    [prime, prime, prime, prime, prime]\n17    [prime, prime, prime, prime, prime]\n18    [prime, prime, prime, prime, prime]\n19    [prime, prime, prime, prime, prime]\ndtype: object\n</code></pre>\n\n<p>Which is not what I want.  </p>\n\n<p>I would like it to be like this:</p>\n\n<pre><code>&gt;&gt;&gt; s\n0     []\n1     [prime]\n2     []\n3     [prime]\n4     []\n5     [prime]\n6     []\n7     [prime]\n8     []\n9     []\n10    []\n11    [prime]\n12    []\n...\n</code></pre>\n\n<p>I've been banging my head against the desk for an hour on this.  Total pandas newb. </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>The following works as expected.</p>\n\n<pre><code> s = pd.Series( [[]] * 20, index= range(0,20) )\n&gt;&gt;&gt; for i in [1,3,5,7,11]:\n...     s.loc[ i ] = s.loc[ i ] + ['prime']\n</code></pre>\n\n<p>I will eventually want multiple 'tags' on each index, this is a fall back for the moment.  I still would like to know why the append doesn't work. </p>\n"}, {"tags": ["python", "django", "apache", "mod-wsgi"], "answers": [{"comments": [{"owner": {"reputation": 31513, "user_id": 903790, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zaCIr.png?s=128&g=1", "display_name": "doniyor", "link": "https://stackoverflow.com/users/903790/doniyor"}, "reply_to_user": {"reputation": 125, "user_id": 3550366, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9fedab6e97c4c8c75172a2d11b0438d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3550366", "link": "https://stackoverflow.com/users/3550366/user3550366"}, "edited": false, "score": 0, "creation_date": 1420670177, "post_id": 27829771, "comment_id": 44065762, "body": "@user3550366 then you need to give path to your project and to site-packages where django lives like this: /path/to/project:/path/to/site-packages/"}, {"owner": {"reputation": 125, "user_id": 3550366, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9fedab6e97c4c8c75172a2d11b0438d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3550366", "link": "https://stackoverflow.com/users/3550366/user3550366"}, "edited": false, "score": 0, "creation_date": 1420670346, "post_id": 27829771, "comment_id": 44065843, "body": "where should i put that? i am really new to this. i am so sorry for my dumb questions."}, {"owner": {"reputation": 31513, "user_id": 903790, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zaCIr.png?s=128&g=1", "display_name": "doniyor", "link": "https://stackoverflow.com/users/903790/doniyor"}, "reply_to_user": {"reputation": 125, "user_id": 3550366, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9fedab6e97c4c8c75172a2d11b0438d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3550366", "link": "https://stackoverflow.com/users/3550366/user3550366"}, "edited": false, "score": 0, "creation_date": 1420670398, "post_id": 27829771, "comment_id": 44065864, "body": "@user3550366 just before wsgialias"}, {"owner": {"reputation": 125, "user_id": 3550366, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9fedab6e97c4c8c75172a2d11b0438d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3550366", "link": "https://stackoverflow.com/users/3550366/user3550366"}, "edited": false, "score": 0, "creation_date": 1420670997, "post_id": 27829771, "comment_id": 44066118, "body": "so i added this right on top of wsgialis /var/www/firstweb: /usr/lib/python2.7/site-packages  is that right?"}, {"owner": {"reputation": 125, "user_id": 3550366, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9fedab6e97c4c8c75172a2d11b0438d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3550366", "link": "https://stackoverflow.com/users/3550366/user3550366"}, "edited": false, "score": 0, "creation_date": 1420672338, "post_id": 27829771, "comment_id": 44066647, "body": "i put that in my configuration file and i get an error  Invalid command &#39;/usr/local/lib/python2.7/site-packages/&#39;"}], "tags": [], "owner": {"reputation": 31513, "user_id": 903790, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zaCIr.png?s=128&g=1", "display_name": "doniyor", "link": "https://stackoverflow.com/users/903790/doniyor"}, "is_accepted": false, "score": 0, "last_activity_date": 1420670361, "last_edit_date": 1420670361, "creation_date": 1420669587, "answer_id": 27829771, "question_id": 27829631, "link": "https://stackoverflow.com/questions/27829631/internal-500-error-with-django-trying-to-set-up-mod-wsgi/27829771#27829771", "title": "Internal 500 error with Django: trying to set up mod_wsgi", "body": "<p>You need to give </p>\n\n<pre><code> WSGIPythonPath /path/to/mysite.com\n</code></pre>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.7/howto/deployment/wsgi/modwsgi/#basic-configuration\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.7/howto/deployment/wsgi/modwsgi/#basic-configuration</a></p>\n"}, {"tags": [], "owner": {"reputation": 231, "user_id": 2604914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51bad702f2d86b8b783bd46a4e99a7ef?s=128&d=identicon&r=PG", "display_name": "elpaquete", "link": "https://stackoverflow.com/users/2604914/elpaquete"}, "is_accepted": true, "score": 0, "last_activity_date": 1420805984, "creation_date": 1420805984, "answer_id": 27860433, "question_id": 27829631, "link": "https://stackoverflow.com/questions/27829631/internal-500-error-with-django-trying-to-set-up-mod-wsgi/27860433#27860433", "title": "Internal 500 error with Django: trying to set up mod_wsgi", "body": "<p>It seems that the python path is incomplete. \nIn ubuntu is something like this if you use the global Python installation.</p>\n\n<pre><code>WSGIPythonPath /var/www/firstweb/:/usr/local/lib/python3.4/dist-packages\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 3550366, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9fedab6e97c4c8c75172a2d11b0438d1?s=128&d=identicon&r=PG&f=1", "display_name": "user3550366", "link": "https://stackoverflow.com/users/3550366/user3550366"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2261, "favorite_count": 0, "accepted_answer_id": 27860433, "answer_count": 2, "score": 0, "last_activity_date": 1420805984, "creation_date": 1420669045, "question_id": 27829631, "link": "https://stackoverflow.com/questions/27829631/internal-500-error-with-django-trying-to-set-up-mod-wsgi", "title": "Internal 500 error with Django: trying to set up mod_wsgi", "body": "<p>I created a website using django and am trying to set up mod_wsgi with my apache server.</p>\n\n<p>When I go to my website I get this error:</p>\n\n<pre><code>Internal Server Error\n\nThe server encountered an internal error or misconfiguration and was unable to complete your request.\n\nPlease contact the server administrator, root@localhost and inform them of the time the error occurred, and anything you might have done that may have caused the error.\n\nMore information about this error may be available in the server error log.\n</code></pre>\n\n<p>This is the <strong>error log file</strong> I get when I try setting up mod_wsgi:</p>\n\n<pre><code>[Wed Jan 07 16:08:01 2015] [error] [client 108.200.246.4] mod_wsgi (pid=18513): Target WSGI script '/var/www/firstweb/firstweb/wsgi.py' cannot be loaded as Python module.\n[Wed Jan 07 16:08:01 2015] [error] [client 108.200.246.4] mod_wsgi (pid=18513): Exception occurred processing WSGI script '/var/www/firstweb/firstweb/wsgi.py'.\n[Wed Jan 07 16:08:01 2015] [error] [client 108.200.246.4] Traceback (most recent call last):\n[Wed Jan 07 16:08:01 2015] [error] [client 108.200.246.4]   File \"/var/www/firstweb/firstweb/wsgi.py\", line 13, in &lt;module&gt;\n[Wed Jan 07 16:08:01 2015] [error] [client 108.200.246.4]     from django.core.wsgi import get_wsgi_application\n[Wed Jan 07 16:08:01 2015] [error] [client 108.200.246.4] ImportError: No module named django.core.wsgi\n</code></pre>\n\n<p>Below is my httpd.conf file:</p>\n\n<pre><code>WSGIScriptAlias /mahi/ /var/www/firstweb/firstweb/wsgi.py\nWSGIPythonPath /var/www/firstweb/ \n\n&lt;Directory \"/var/www/firstweb/firstweb\"&gt;\n&lt;Files wsgi.py&gt;\n    Order allow,deny\n    Allow from all\n&lt;/Files&gt;\n\n&lt;/Directory&gt;\n</code></pre>\n\n<p>Please help me. I have no direction on where to go.</p>\n"}, {"tags": ["python", "jinja2", "salt-stack"], "comments": [{"owner": {"reputation": 4321, "user_id": 114866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23099f6d1eaab5470c1504a9f0a45e0?s=128&d=identicon&r=PG", "display_name": "Utah_Dave", "link": "https://stackoverflow.com/users/114866/utah-dave"}, "edited": false, "score": 0, "creation_date": 1420838552, "post_id": 27829614, "comment_id": 44141297, "body": "Is there a &quot;pillar&quot; key in your pillar data? It doesn&#39;t by default."}], "answers": [{"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": false, "score": 3, "last_activity_date": 1420770961, "creation_date": 1420770961, "answer_id": 27853001, "question_id": 27829614, "link": "https://stackoverflow.com/questions/27829614/salt-pillar-data-is-empty-when-using-for-loop/27853001#27853001", "title": "Salt pillar data is empty when using for loop", "body": "<p>You're trying to use a Jinja variable expression inside a method call.  Instead, just use the variable directly with string concatenation, like normal Python.</p>\n\n<pre><code>{% for something in salt['pillar.get']('pillar:' + type + ':subtype') %}\n</code></pre>\n\n<p>Notice that it's <code>+ type +</code> rather than <code>{{ type }}</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4321, "user_id": 114866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23099f6d1eaab5470c1504a9f0a45e0?s=128&d=identicon&r=PG", "display_name": "Utah_Dave", "link": "https://stackoverflow.com/users/114866/utah-dave"}, "is_accepted": false, "score": 0, "last_activity_date": 1420841718, "creation_date": 1420841718, "answer_id": 27870117, "question_id": 27829614, "link": "https://stackoverflow.com/questions/27829614/salt-pillar-data-is-empty-when-using-for-loop/27870117#27870117", "title": "Salt pillar data is empty when using for loop", "body": "<p>The <code>salt['pillar.get']</code> function requires a key. By default, there is no <code>pillar</code> key. Just the keys of the key/value pairs in your pillar dictionary.</p>\n\n<p>If you just want to iterate over all the key/value pairs in your pillar data, just iterate directly over the pillar dictionary</p>\n\n<p>Something like this:</p>\n\n<pre><code>{% for type in pillar %}\n\n{% if type in [Action', 'Queue', 'Data', 'Number'] %}\n{% for something in salt['pillar.get']('pillar:{{ type }}:subtype') %}\n\n copy_init_script_{{ type }}_{{ something }}:\n   file.managed:\n - name: /blah/blah/somefile-{{ ptype }}-{{ something }}\n - source: salt:/folder/anothertemplate.jinja\n - template: jinja\n - context:\n    something: {{ something }}\n    atype: {{ type }}\n - timeout: 10\n {% endfor %}\n {% endif %}\n {% endfor %}\n</code></pre>\n\n<p>I haven't tested this code, but it should be something close to that.</p>\n"}], "owner": {"reputation": 49, "user_id": 2462320, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6e579355fc6b0d6d913691e21f4485d6?s=128&d=identicon&r=PG", "display_name": "user2462320", "link": "https://stackoverflow.com/users/2462320/user2462320"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 955, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1420841718, "creation_date": 1420668988, "last_edit_date": 1420771218, "question_id": 27829614, "link": "https://stackoverflow.com/questions/27829614/salt-pillar-data-is-empty-when-using-for-loop", "title": "Salt pillar data is empty when using for loop", "body": "<p>I am grabbing data via salt and I'm trying to iterate through all the types of pillars.  It runs but doesn't render anything.</p>\n\n<pre class=\"lang-jinja2 prettyprint-override\"><code>{% for type in salt['pillar.get']('pillar') %}\n\n{% if type in [Action', 'Queue', 'Data', 'Number'] %}\n{% for something in salt['pillar.get']('pillar:{{ type }}:subtype') %}\n\n copy_init_script_{{ type }}_{{ something }}:\n   file.managed:\n - name: /blah/blah/somefile-{{ ptype }}-{{ something }}\n - source: salt:/folder/anothertemplate.jinja\n - template: jinja\n - context:\n    something: {{ something }}\n    atype: {{ type }}\n - timeout: 10\n {% endfor %}\n {% endif %}\n {% endfor %}\n</code></pre>\n\n<p>Why doesn't the for loop seem to be getting any data?</p>\n"}, {"tags": ["python", "xml"], "answers": [{"tags": [], "owner": {"reputation": 904, "user_id": 1470459, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cc25086f44e4417abfb24a777ec584a9?s=128&d=identicon&r=PG&f=1", "display_name": "datah4ck3r", "link": "https://stackoverflow.com/users/1470459/datah4ck3r"}, "is_accepted": true, "score": 1, "last_activity_date": 1420725480, "creation_date": 1420725480, "answer_id": 27841843, "question_id": 27829606, "link": "https://stackoverflow.com/questions/27829606/xml-etree-elementtree-oserror-errno-22-when-parsing-multiple-files/27841843#27841843", "title": "xml.etree.ElementTree: OSError: [Errno 22] when parsing multiple files", "body": "<p>It was the <code>\\n</code> newline character that was causing issues. Had to <code>strip()</code> the <code>filename</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2202, "user_id": 3179169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ff0167d99069678064f633be190b386?s=128&d=identicon&r=PG&f=1", "display_name": "clinomaniac", "link": "https://stackoverflow.com/users/3179169/clinomaniac"}, "edited": false, "score": 1, "creation_date": 1522431698, "post_id": 49578773, "comment_id": 86165448, "body": "Please explain what you are doing and how it will fix the problem."}, {"owner": {"reputation": 1, "user_id": 9439367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/690b907b2f37e59932105f062c6ad14a?s=128&d=identicon&r=PG&f=1", "display_name": "G.Gokkaya", "link": "https://stackoverflow.com/users/9439367/g-gokkaya"}, "reply_to_user": {"reputation": 2202, "user_id": 3179169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ff0167d99069678064f633be190b386?s=128&d=identicon&r=PG&f=1", "display_name": "clinomaniac", "link": "https://stackoverflow.com/users/3179169/clinomaniac"}, "edited": false, "score": 0, "creation_date": 1522433285, "post_id": 49578773, "comment_id": 86166187, "body": "if ElementTree can not parse xml document about non-Unicode issues, StringIO handles it, by keeping string in memory it handles unicode, this will cover encoding problem. Additionally, I added .text after filename. we need to get text attr. from XML to parse it first. it woks on me python 3.6"}], "tags": [], "owner": {"reputation": 1, "user_id": 9439367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/690b907b2f37e59932105f062c6ad14a?s=128&d=identicon&r=PG&f=1", "display_name": "G.Gokkaya", "link": "https://stackoverflow.com/users/9439367/g-gokkaya"}, "is_accepted": false, "score": 0, "last_activity_date": 1522431123, "creation_date": 1522431123, "answer_id": 49578773, "question_id": 27829606, "link": "https://stackoverflow.com/questions/27829606/xml-etree-elementtree-oserror-errno-22-when-parsing-multiple-files/49578773#49578773", "title": "xml.etree.ElementTree: OSError: [Errno 22] when parsing multiple files", "body": "<p>Hope this will fix</p>\n\n<pre><code>import io\nimport xml.etree.ElementTree as ET\n...\nfile_list = open('datasets\\files.txt','r')\nfor filename in file_list:\n    tree = ET.parse(io.StringIO(filename.text))\n</code></pre>\n"}], "owner": {"reputation": 904, "user_id": 1470459, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cc25086f44e4417abfb24a777ec584a9?s=128&d=identicon&r=PG&f=1", "display_name": "datah4ck3r", "link": "https://stackoverflow.com/users/1470459/datah4ck3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1306, "favorite_count": 0, "accepted_answer_id": 27841843, "answer_count": 2, "score": 0, "last_activity_date": 1522431123, "creation_date": 1420668954, "question_id": 27829606, "link": "https://stackoverflow.com/questions/27829606/xml-etree-elementtree-oserror-errno-22-when-parsing-multiple-files", "title": "xml.etree.ElementTree: OSError: [Errno 22] when parsing multiple files", "body": "<p>I am trying to parse multiple files (paths listed in a file, one in each line) using the ElementTree.parse as follows:</p>\n\n<pre><code>import xml.etree.ElementTree as ET\n...\nfile_list = open('datasets\\files.txt','r')\nfor filename in file_list:\n    tree = ET.parse(filename)\n</code></pre>\n\n<p>If my files.txt has only one line, the program runs and data is parsed. If I have more than one lines, I get the error:</p>\n\n<pre><code>OSError: [Errno 22] Invalid argument: 'datasets/data1.xml'\n</code></pre>\n\n<p>Example content of the files.txt is:</p>\n\n<pre><code>datasets/data1.xml\ndatasets/data2.xml\n</code></pre>\n\n<p>Removing either line will make the program work correctly. But when I have both I get the error.\nMy thoughts were maybe I would have to set <code>tree = None</code> to fix it, but it doesn't.</p>\n"}, {"tags": ["python", "io"], "comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1420669014, "post_id": 27829575, "comment_id": 44065248, "body": "You can close it and open it again."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1420669501, "post_id": 27829575, "comment_id": 44065459, "body": "are you writing to the file each time?"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1420671763, "post_id": 27829575, "comment_id": 44066418, "body": "Hey, are you still there? Its quite likely that the system program deletes the old <code>out.txt</code> and writes a new one. On linux at least, the open file handle will point to the old unlinked file and will never see the new data. Since closing/opening is the obvious solution, can you tell us if it worked?"}, {"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1420672943, "post_id": 27829575, "comment_id": 44066868, "body": "@tdelaney It is supposed to overwrite out.txt. I am using minisat to count the number of solutions to a SAT problem by multiplying the old solution by -1 and appending it to the input file. So the algorithm is minisat input output, multiply output by -1, append to input, repeat. The problem is that output doesn&#39;t change after the initial read. And I did close it at the end of the loop and reopen, it didn&#39;t work. I posted code in my question."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1420673619, "post_id": 27829575, "comment_id": 44067095, "body": "A couple of things to try... do <code>if os.path.isfile(&quot;out&quot;): os.remove(&quot;out&quot;)</code> before running and temporarily pipe stdout and err to a file to see if some other bad thing is going on."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1420673722, "post_id": 27829575, "comment_id": 44067129, "body": "And do a <code>foo.flush()</code> after the write."}, {"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1420677111, "post_id": 27829575, "comment_id": 44068101, "body": "@tdelaney Thanks! foo.flush() was necessary, the rest didn&#39;t matter. I didn&#39;t realize you had to flush your writes in python!"}, {"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1420677138, "post_id": 27829575, "comment_id": 44068109, "body": "@tdelaney feel free to post your answer"}], "answers": [{"comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1420669553, "post_id": 27829604, "comment_id": 44065480, "body": "where did <code>os.path.join(path, filename) + &#39;.skv&#39;</code> come from?"}, {"owner": {"reputation": 505, "user_id": 935713, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4e323b9abfd592e22fe45c2f6626b31a?s=128&d=identicon&r=PG", "display_name": "25r43q", "link": "https://stackoverflow.com/users/935713/25r43q"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1420669721, "post_id": 27829604, "comment_id": 44065560, "body": "Sorry, used example code from a project. I think the code is more to your liking now ;)"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1420669787, "post_id": 27829604, "comment_id": 44065589, "body": "you could just use <code>with open(out.txt) as ga_file:</code>"}, {"owner": {"reputation": 505, "user_id": 935713, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4e323b9abfd592e22fe45c2f6626b31a?s=128&d=identicon&r=PG", "display_name": "25r43q", "link": "https://stackoverflow.com/users/935713/25r43q"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1420670237, "post_id": 27829604, "comment_id": 44065796, "body": "I think the best solution would be to have a listener that gets called when the document is updated or created. Aimilar to this:  <a href=\"http://stackoverflow.com/questions/9318581/python-how-do-i-call-external-python-programs\" title=\"python how do i call external python programs\">stackoverflow.com/questions/9318581/&hellip;</a>  That way the loop only runs when the file is updated and unnecessary i/o is avoided."}, {"owner": {"reputation": 11191, "user_id": 310399, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d187650935da258c633a3a0742985891?s=128&d=identicon&r=PG", "display_name": "JS.", "link": "https://stackoverflow.com/users/310399/js"}, "edited": false, "score": 0, "creation_date": 1420670873, "post_id": 27829604, "comment_id": 44066069, "body": "@victor: Are you sure about the link you provided? The question referenced makes no mention of listeners."}, {"owner": {"reputation": 505, "user_id": 935713, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4e323b9abfd592e22fe45c2f6626b31a?s=128&d=identicon&r=PG", "display_name": "25r43q", "link": "https://stackoverflow.com/users/935713/25r43q"}, "reply_to_user": {"reputation": 11191, "user_id": 310399, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d187650935da258c633a3a0742985891?s=128&d=identicon&r=PG", "display_name": "JS.", "link": "https://stackoverflow.com/users/310399/js"}, "edited": false, "score": 0, "creation_date": 1420671589, "post_id": 27829604, "comment_id": 44066348, "body": "@JS: It describes calls to python scripts, its the poor mans solution. Ie the one I would opt for because of simplicity."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1420672855, "post_id": 27829604, "comment_id": 44066840, "body": "Quotes needed around <code>out.txt</code>."}, {"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1420679787, "post_id": 27829604, "comment_id": 44068812, "body": "That wasn&#39;t the issue."}], "tags": [], "owner": {"reputation": 505, "user_id": 935713, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4e323b9abfd592e22fe45c2f6626b31a?s=128&d=identicon&r=PG", "display_name": "25r43q", "link": "https://stackoverflow.com/users/935713/25r43q"}, "is_accepted": false, "score": 0, "last_activity_date": 1470217152, "last_edit_date": 1470217152, "creation_date": 1420668950, "answer_id": 27829604, "question_id": 27829575, "link": "https://stackoverflow.com/questions/27829575/python-refresh-file-from-disk/27829604#27829604", "title": "Python refresh file from disk", "body": "<p>You take your file_var and end the loop with file_var.close().</p>\n\n<pre><code>for ... :\n    ga_file = open(out.txt, 'r')\n    ... do stuff\n    ga_file.close()\n</code></pre>\n\n<p>Demo of an implementation below (as simple as possible, this is all of the Jython code needed)...</p>\n\n<pre><code>__author__ = ''\nimport time\n\nvar = 'false'\nwhile var == 'false':\n    out = open('out.txt', 'r')\n    content = out.read()\n    time.sleep(3)\n    print content\n    out.close()\n</code></pre>\n\n<p>generates this output:</p>\n\n<pre><code>2015-01-09, 'stuff added'\n2015-01-09, 'stuff added'           # &lt;-- this is when i just saved my update\n2015-01-10, 'stuff added again :)'  # &lt;-- my new output from file reads\n</code></pre>\n\n<p>I strongly recommend reading the error messages. They hold quite a lot of information.</p>\n\n<p>I think the full file name should be written for debug purposes.</p>\n"}, {"comments": [{"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1420679741, "post_id": 27831359, "comment_id": 44068799, "body": "You have a typo though, minista should be minisat"}], "tags": [], "owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "is_accepted": true, "score": 3, "last_activity_date": 1420679881, "last_edit_date": 1420679881, "creation_date": 1420678841, "answer_id": 27831359, "question_id": 27829575, "link": "https://stackoverflow.com/questions/27829575/python-refresh-file-from-disk/27831359#27831359", "title": "Python refresh file from disk", "body": "<p>You need to flush <code>foo</code> so that the external program can see its latest changes. When you write to a file, the data is buffered in the local process and sent to the system in larger blocks. This is done because updating the system file is relatively expensive. In your case, you need to force a flush of the data so that minisat can see it. </p>\n\n<pre><code>    foo.write('\\n'+output)\n    foo.flush()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1420684942, "post_id": 27832078, "comment_id": 44070087, "body": "Thanks! That&#39;s very useful. What is shutil?"}, {"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "reply_to_user": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "edited": false, "score": 0, "creation_date": 1420686104, "post_id": 27832078, "comment_id": 44070323, "body": "&quot;Shell utilities&quot; is a standard library module containing useful functions for copying, moving, and renaming files."}], "tags": [], "owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "is_accepted": false, "score": 1, "last_activity_date": 1420684489, "creation_date": 1420684489, "answer_id": 27832078, "question_id": 27829575, "link": "https://stackoverflow.com/questions/27829575/python-refresh-file-from-disk/27832078#27832078", "title": "Python refresh file from disk", "body": "<p>I rewrote it to hopefully be a bit easier to understand:</p>\n\n<pre><code>import os\nfrom shutil import copyfile\nimport subprocess\nimport sys\n\nTEMP_CNF = \"tmp.in\"\nTEMP_SOL = \"tmp.out\"\nNULL = open(os.devnull, \"wb\")\n\ndef all_solutions(cnf_fname):\n    \"\"\"\n    Given a file containing a set of constraints,\n    generate all possible solutions.\n    \"\"\"\n    # make a copy of original input file\n    copyfile(cnf_fname, TEMP_CNF)\n\n    while True:\n        # run minisat to solve the constraint problem\n        subprocess.call([\"minisat\", TEMP_CNF, TEMP_SOL], stdout=NULL,stderr=NULL)\n\n        # look at the result\n        with open(TEMP_SOL) as result:\n            line = next(result)\n            if line.startswith(\"SAT\"):\n                # Success - return solution\n                line = next(result)\n                solution = [int(i) for i in line.split()]\n                yield solution\n            else:\n                # Failure - no more solutions possible\n                break\n\n        # disqualify found solution\n        with open(TEMP_CNF, \"a\") as constraints:\n            new_constraint = \" \".join(str(-i) for i in sol)\n            constraints.write(\"\\n\")\n            constraints.write(new_constraint)\n\ndef main(cnf_fname):\n    \"\"\"\n    Given a file containing a set of constraints,\n    count the possible solutions.\n    \"\"\"\n    count = sum(1 for i in all_solutions(cnf_fname))\n    print(\"There are {} solutions.\".format(count))\n\nif __name__==\"__main__\":\n    if len(sys.argv) == 2:\n        main(sys.argv[1])\n    else:\n        print(\"Usage: {} cnf.in\".format(sys.argv[0]))\n</code></pre>\n"}], "owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5351, "favorite_count": 2, "accepted_answer_id": 27831359, "answer_count": 3, "score": 1, "last_activity_date": 1470217152, "creation_date": 1420668796, "last_edit_date": 1420672995, "question_id": 27829575, "link": "https://stackoverflow.com/questions/27829575/python-refresh-file-from-disk", "title": "Python refresh file from disk", "body": "<p>I have a python script that calls a system program and reads the output from a file <code>out.txt</code>, acts on that output, and loops. However, it doesn't work, and a close investigation showed that the python script just opens <code>out.txt</code> once and then keeps on reading from that old copy. How can I make the python script reread the file on each iteration? I saw a similar question here on SO but it was about a python script running alongside a program, not calling it, and the solution doesn't work. I tried closing the file before looping back but it didn't do anything.</p>\n\n<p>EDIT:\nI already tried closing and opening, it didn't work. Here's the code:</p>\n\n<pre><code>import subprocess, os, sys\n\nfilename = sys.argv[1]\nfile = open(filename,'r')\nfoo = open('foo','w')\nfoo.write(file.read().rstrip())\nfoo = open('foo','a')\ncrap = open(os.devnull,'wb')\nnumSolutions = 0\n\nwhile True:\n    subprocess.call([\"minisat\", \"foo\", \"out\"], stdout=crap,stderr=crap)\n    out = open('out','r')\n    if out.readline().rstrip() == \"SAT\":\n        numSolutions += 1\n        clause = out.readline().rstrip()\n        clause = clause.split(\" \")\n        print clause\n        clause = map(int,clause)\n        clause = map(lambda x: -x,clause)\n        output = ' '.join(map(lambda x: str(x),clause))\n        print output\n        foo.write('\\n'+output)\n        out.close()\n    else:\n        break\n\nprint \"There are \", numSolutions, \" solutions.\"\n</code></pre>\n"}, {"tags": ["python", "for-loop", "rss-reader"], "answers": [{"tags": [], "owner": {"reputation": 929, "user_id": 3599340, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/684f1fc46c99c18bc16d0d0b9d0ad541?s=128&d=identicon&r=PG&f=1", "display_name": "datasci", "link": "https://stackoverflow.com/users/3599340/datasci"}, "is_accepted": true, "score": 2, "last_activity_date": 1420669229, "creation_date": 1420669229, "answer_id": 27829677, "question_id": 27829543, "link": "https://stackoverflow.com/questions/27829543/python-print-only-latest-rss-feed-items/27829677#27829677", "title": "Python Print only latest RSS feed items", "body": "<p>Take a close look at your feed:</p>\n\n<pre><code>items = feed['entries']\n\nfor item in items:\n    print item['published']\n</code></pre>\n\n<p>Entries are already in DESC order, so you can simply grab the first few records:</p>\n\n<pre><code>items[0:3]\n</code></pre>\n"}], "owner": {"reputation": 275, "user_id": 2648270, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/oNqt6.png?s=128&g=1", "display_name": "Yanlu", "link": "https://stackoverflow.com/users/2648270/yanlu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 970, "favorite_count": 0, "accepted_answer_id": 27829677, "answer_count": 1, "score": 0, "last_activity_date": 1420669229, "creation_date": 1420668644, "question_id": 27829543, "link": "https://stackoverflow.com/questions/27829543/python-print-only-latest-rss-feed-items", "title": "Python Print only latest RSS feed items", "body": "<p>I'm using following code to get the items of an RSS feed. Unfortunately I'm not able to get only the latest three items. </p>\n\n<pre><code>import feedparser\n\nfeed = feedparser.parse('http://www.macstories.net/feed/')\n\nfor e in feed['entries']:\n        print e.get('title','')\n        print \n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 12341, "user_id": 3678068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QWjMd.png?s=128&g=1", "display_name": "Fabricator", "link": "https://stackoverflow.com/users/3678068/fabricator"}, "edited": false, "score": 1, "creation_date": 1420668749, "post_id": 27829508, "comment_id": 44065118, "body": "i think that&#39;s what <code>\\r</code> is for"}, {"owner": {"reputation": 79, "user_id": 4430716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d9ce5af5093ca363770dce9b0a232f?s=128&d=identicon&r=PG&f=1", "display_name": "deano3663", "link": "https://stackoverflow.com/users/4430716/deano3663"}, "reply_to_user": {"reputation": 12341, "user_id": 3678068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QWjMd.png?s=128&g=1", "display_name": "Fabricator", "link": "https://stackoverflow.com/users/3678068/fabricator"}, "edited": false, "score": 0, "creation_date": 1420668928, "post_id": 27829508, "comment_id": 44065205, "body": "Ive seen this being used but from what i can tell it dosent replace the line just adds to it, i could be mistaken though"}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 4430716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d9ce5af5093ca363770dce9b0a232f?s=128&d=identicon&r=PG&f=1", "display_name": "deano3663", "link": "https://stackoverflow.com/users/4430716/deano3663"}, "edited": false, "score": 0, "creation_date": 1420668804, "post_id": 27829531, "comment_id": 44065143, "body": "This dosent seem to actually replace the last printed line just adds to it?"}, {"owner": {"reputation": 21785, "user_id": 4593, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/740a837f9340e7c40b1ca01108d1afd1?s=128&d=identicon&r=PG", "display_name": "Justin R.", "link": "https://stackoverflow.com/users/4593/justin-r"}, "reply_to_user": {"reputation": 79, "user_id": 4430716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d9ce5af5093ca363770dce9b0a232f?s=128&d=identicon&r=PG&f=1", "display_name": "deano3663", "link": "https://stackoverflow.com/users/4430716/deano3663"}, "edited": false, "score": 0, "creation_date": 1420668958, "post_id": 27829531, "comment_id": 44065217, "body": "Just prefix your line with &#39;\\r&#39; to reset the cursor. I&#39;ll update my answer to show this."}, {"owner": {"reputation": 79, "user_id": 4430716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d9ce5af5093ca363770dce9b0a232f?s=128&d=identicon&r=PG&f=1", "display_name": "deano3663", "link": "https://stackoverflow.com/users/4430716/deano3663"}, "edited": false, "score": 0, "creation_date": 1420669114, "post_id": 27829531, "comment_id": 44065297, "body": "Ive tried running that code and again it just seems to print on the same line but does not remove what has already been printed, i could just be being stupid though so could you perhaps put it into an example in some way?"}, {"owner": {"reputation": 21785, "user_id": 4593, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/740a837f9340e7c40b1ca01108d1afd1?s=128&d=identicon&r=PG", "display_name": "Justin R.", "link": "https://stackoverflow.com/users/4593/justin-r"}, "reply_to_user": {"reputation": 79, "user_id": 4430716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d9ce5af5093ca363770dce9b0a232f?s=128&d=identicon&r=PG&f=1", "display_name": "deano3663", "link": "https://stackoverflow.com/users/4430716/deano3663"}, "edited": false, "score": 0, "creation_date": 1420669778, "post_id": 27829531, "comment_id": 44065584, "body": "It overwrites the current line for me. I&#39;ll update the code example with the exact code that I&#39;m using to test with."}, {"owner": {"reputation": 79, "user_id": 4430716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d9ce5af5093ca363770dce9b0a232f?s=128&d=identicon&r=PG&f=1", "display_name": "deano3663", "link": "https://stackoverflow.com/users/4430716/deano3663"}, "edited": false, "score": 0, "creation_date": 1420669856, "post_id": 27829531, "comment_id": 44065618, "body": "if i run that code the output i get is:   H M S 0 0 0  H M S 0 0 1  H M S 0 0 2  H M S 0 0 3  H M S 0 0 4  H M S 0 0 5  H M S 0 0 6  H M S 0 0 7  H M S 0 0 8  H M S 0 0 9  where as it should only display one thing at a time like a digital clock"}, {"owner": {"reputation": 21785, "user_id": 4593, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/740a837f9340e7c40b1ca01108d1afd1?s=128&d=identicon&r=PG", "display_name": "Justin R.", "link": "https://stackoverflow.com/users/4593/justin-r"}, "reply_to_user": {"reputation": 79, "user_id": 4430716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d9ce5af5093ca363770dce9b0a232f?s=128&d=identicon&r=PG&f=1", "display_name": "deano3663", "link": "https://stackoverflow.com/users/4430716/deano3663"}, "edited": false, "score": 0, "creation_date": 1420669954, "post_id": 27829531, "comment_id": 44065669, "body": "Interesting, I get each line overwritten with the last, such that in the end I get just &quot; H M S 0 0 9&quot;. What OS are you running? And what minor version of Python 3?"}, {"owner": {"reputation": 79, "user_id": 4430716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d9ce5af5093ca363770dce9b0a232f?s=128&d=identicon&r=PG&f=1", "display_name": "deano3663", "link": "https://stackoverflow.com/users/4430716/deano3663"}, "edited": false, "score": 0, "creation_date": 1420670109, "post_id": 27829531, "comment_id": 44065729, "body": "python 3.3 on windows 7"}, {"owner": {"reputation": 21785, "user_id": 4593, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/740a837f9340e7c40b1ca01108d1afd1?s=128&d=identicon&r=PG", "display_name": "Justin R.", "link": "https://stackoverflow.com/users/4593/justin-r"}, "reply_to_user": {"reputation": 79, "user_id": 4430716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d9ce5af5093ca363770dce9b0a232f?s=128&d=identicon&r=PG&f=1", "display_name": "deano3663", "link": "https://stackoverflow.com/users/4430716/deano3663"}, "edited": false, "score": 0, "creation_date": 1420741645, "post_id": 27829531, "comment_id": 44097814, "body": "Hm, same as me. Does it work after introducing a brief sleep() call, as in the code above?"}, {"owner": {"reputation": 3961, "user_id": 284272, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/01a7e1513f6178032a67ab721c51adb9?s=128&d=identicon&r=PG", "display_name": "paullb", "link": "https://stackoverflow.com/users/284272/paullb"}, "edited": false, "score": 0, "creation_date": 1561693994, "post_id": 27829531, "comment_id": 100155952, "body": "Tried as well, same for me, everything is on a new line."}], "tags": [], "owner": {"reputation": 21785, "user_id": 4593, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/740a837f9340e7c40b1ca01108d1afd1?s=128&d=identicon&r=PG", "display_name": "Justin R.", "link": "https://stackoverflow.com/users/4593/justin-r"}, "is_accepted": false, "score": 5, "last_activity_date": 1420754699, "last_edit_date": 1420754699, "creation_date": 1420668613, "answer_id": 27829531, "question_id": 27829508, "link": "https://stackoverflow.com/questions/27829508/how-to-replace-a-printed-line-in-python-3/27829531#27829531", "title": "How to replace a printed line in Python 3", "body": "<p>There is an overload of <a href=\"https://docs.python.org/3.0/library/functions.html#print\" rel=\"nofollow\">print</a>() that will do this. Combine this with <code>[\\r][2]</code> to move the cursor to the start of the line before writing each.:</p>\n\n<pre><code>import time\nfor x in range(10):\n    print('\\r H M S 0 0 ' + str(x), end='')\n    time.sleep(1)\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>for x in range(10):\n    print('\\r H M S 0 0 {}'.format(x), end='')\n    time.sleep(1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15852, "user_id": 2294755, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/moDhz.jpg?s=128&g=1", "display_name": "Hackaholic", "link": "https://stackoverflow.com/users/2294755/hackaholic"}, "is_accepted": false, "score": 1, "last_activity_date": 1420669157, "creation_date": 1420669157, "answer_id": 27829666, "question_id": 27829508, "link": "https://stackoverflow.com/questions/27829508/how-to-replace-a-printed-line-in-python-3/27829666#27829666", "title": "How to replace a printed line in Python 3", "body": "<p>Hint for you, you need sys.stdout.write with <code>\\r</code>:</p>\n\n<pre><code>import sys, time\n&gt;&gt;&gt; for x in range(10):\n...     sys.stdout.write('%d\\r' % x)\n...     sys.stdout.flush()\n...     time.sleep(1)\n... \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 199, "user_id": 8399802, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/98def4a9640578fc87768ae8d2b208b7?s=128&d=identicon&r=PG&f=1", "display_name": "rufreakde", "link": "https://stackoverflow.com/users/8399802/rufreakde"}, "edited": false, "score": 0, "creation_date": 1584356369, "post_id": 56800728, "comment_id": 107402935, "body": "The only example here that works should be accepted answer!"}], "tags": [], "owner": {"reputation": 3961, "user_id": 284272, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/01a7e1513f6178032a67ab721c51adb9?s=128&d=identicon&r=PG", "display_name": "paullb", "link": "https://stackoverflow.com/users/284272/paullb"}, "is_accepted": false, "score": 2, "last_activity_date": 1561694270, "creation_date": 1561694270, "answer_id": 56800728, "question_id": 27829508, "link": "https://stackoverflow.com/questions/27829508/how-to-replace-a-printed-line-in-python-3/56800728#56800728", "title": "How to replace a printed line in Python 3", "body": "<p>Use the end parameter to specify a \"\\r\" as the line ending.</p>\n\n<pre><code>for x in range(10):\n    print('\\r H M S 0 0 ' + str(x), end=\"\\r\")\n    time.sleep(1)\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 4430716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3d9ce5af5093ca363770dce9b0a232f?s=128&d=identicon&r=PG&f=1", "display_name": "deano3663", "link": "https://stackoverflow.com/users/4430716/deano3663"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4494, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1561694270, "creation_date": 1420668530, "last_edit_date": 1420670299, "question_id": 27829508, "link": "https://stackoverflow.com/questions/27829508/how-to-replace-a-printed-line-in-python-3", "title": "How to replace a printed line in Python 3", "body": "<p>I am trying to make a sort of stop watch thing, just to try and learn some different stuff.</p>\n\n<p>The problem is that I don't know how to make it so when you print what the time is, it just replaces what time you currently have printed.</p>\n\n<p>For example if the time was:</p>\n\n<p>H M S:\n0 0 1</p>\n\n<p>I would want it to display</p>\n\n<p>H M S:\n0 0 2</p>\n\n<p>Without having to print a new line, so it would look like it is just counting up so to speak. I've it doing this in a way by printing new lines but it still shows a sort of movement which makes it clear that there are new lines being printed. </p>\n\n<p>Here is my code as it is now, feel free to run it and your get what I mean:\n<a href=\"http://notepad.cc/woupodi42\" rel=\"nofollow\">http://notepad.cc/woupodi42</a></p>\n\n<p>Any ideas would be appreciated even better if they apply directly to this problem :)</p>\n"}, {"tags": ["python", "django", "virtualenv"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1420668252, "post_id": 27829442, "comment_id": 44064880, "body": "it doesnt matter ..."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1420668359, "post_id": 27829442, "comment_id": 44064926, "body": "None of those are default folders in a virtualenv."}, {"owner": {"reputation": 4124, "user_id": 4394418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OEtIP.png?s=128&g=1", "display_name": "Gerard Rozsavolgyi", "link": "https://stackoverflow.com/users/4394418/gerard-rozsavolgyi"}, "edited": false, "score": 0, "creation_date": 1420668416, "post_id": 27829442, "comment_id": 44064963, "body": "and django site has nothing to do with virtualenv folder"}, {"owner": {"reputation": 20382, "user_id": 2199852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/609a8dbb58ae54662d89367894520a5e?s=128&d=identicon&r=PG&f=1", "display_name": "User", "link": "https://stackoverflow.com/users/2199852/user"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1420668477, "post_id": 27829442, "comment_id": 44064991, "body": "You are right @DanielRoseman . Just updated it."}], "answers": [{"comments": [{"owner": {"reputation": 20382, "user_id": 2199852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/609a8dbb58ae54662d89367894520a5e?s=128&d=identicon&r=PG&f=1", "display_name": "User", "link": "https://stackoverflow.com/users/2199852/user"}, "edited": false, "score": 0, "creation_date": 1420668756, "post_id": 27829556, "comment_id": 44065122, "body": "So I&#39;ll just do <code>django-admin.py startproject django_project</code> right in this directory."}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 1, "last_activity_date": 1420668689, "creation_date": 1420668689, "answer_id": 27829556, "question_id": 27829442, "link": "https://stackoverflow.com/questions/27829442/where-should-i-start-my-django-site-inside-of-my-virtual-env/27829556#27829556", "title": "Where should I start my Django site inside of my virtual env?", "body": "<p>You should just start it in the main virtualenv directory.</p>\n\n<p>You certainly shouldn't remove any of those subfolders: you need them for the correct functioning of the virtualenv and the code it contains.</p>\n"}], "owner": {"reputation": 20382, "user_id": 2199852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/609a8dbb58ae54662d89367894520a5e?s=128&d=identicon&r=PG&f=1", "display_name": "User", "link": "https://stackoverflow.com/users/2199852/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1420702945, "accepted_answer_id": 27829556, "answer_count": 1, "score": 0, "last_activity_date": 1420668689, "creation_date": 1420668185, "question_id": 27829442, "link": "https://stackoverflow.com/questions/27829442/where-should-i-start-my-django-site-inside-of-my-virtual-env", "closed_reason": "Opinion-based", "title": "Where should I start my Django site inside of my virtual env?", "body": "<p>I made a virtual environment to use Python 2.7 with Django 1.7, since the system's python is 2.6.6.</p>\n\n<p>The virtual env has 5 folders inside of it by default. Should I keep all of them?</p>\n\n<pre><code>/bin/\n/include/\n/lib/\n</code></pre>\n\n<p>Where should I start my Django site? I'm thinking a new folder? Does it even matter or is there an industry standard?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1394, "user_id": 668837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/g2BHi.jpg?s=128&g=1", "display_name": "Soviero", "link": "https://stackoverflow.com/users/668837/soviero"}, "edited": false, "score": 0, "creation_date": 1420668213, "post_id": 27829431, "comment_id": 44064859, "body": "And yes, I&#39;m aware that os.system is deprecated in favor of subprocess. However, for testing purposes os.system is much easier."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1420670479, "post_id": 27829431, "comment_id": 44065892, "body": "why not just login as that user?"}, {"owner": {"reputation": 1394, "user_id": 668837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/g2BHi.jpg?s=128&g=1", "display_name": "Soviero", "link": "https://stackoverflow.com/users/668837/soviero"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1420678149, "post_id": 27829431, "comment_id": 44068392, "body": "@PadraicCunningham because it&#39;s running as a damon that will descalate it&#39;s sub processes as needed."}], "answers": [{"comments": [{"owner": {"reputation": 1394, "user_id": 668837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/g2BHi.jpg?s=128&g=1", "display_name": "Soviero", "link": "https://stackoverflow.com/users/668837/soviero"}, "edited": false, "score": 0, "creation_date": 1420669248, "post_id": 27829642, "comment_id": 44065354, "body": "I know I can set the variables manually, but I was hoping for something built into Python for this purpose. More likely to avoid bugs that way."}, {"owner": {"reputation": 1903, "user_id": 2532708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad8e40287bc8ec9a4dbe8958cf7d574f?s=128&d=identicon&r=PG", "display_name": "Henry Crutcher", "link": "https://stackoverflow.com/users/2532708/henry-crutcher"}, "reply_to_user": {"reputation": 1394, "user_id": 668837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/g2BHi.jpg?s=128&g=1", "display_name": "Soviero", "link": "https://stackoverflow.com/users/668837/soviero"}, "edited": false, "score": 0, "creation_date": 1420670151, "post_id": 27829642, "comment_id": 44065744, "body": "Good point!  Though, in principle, the shell profile variables and PAM could set the user&#39;s home directory to some arbitrarily wacky value, so this problem doesn&#39;t look solvable in principle, even if parsing /etc/passwd would work in many cases."}], "tags": [], "owner": {"reputation": 1903, "user_id": 2532708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad8e40287bc8ec9a4dbe8958cf7d574f?s=128&d=identicon&r=PG", "display_name": "Henry Crutcher", "link": "https://stackoverflow.com/users/2532708/henry-crutcher"}, "is_accepted": false, "score": 0, "last_activity_date": 1421105034, "last_edit_date": 1421105034, "creation_date": 1420669096, "answer_id": 27829642, "question_id": 27829431, "link": "https://stackoverflow.com/questions/27829431/demoting-a-python-subprocess/27829642#27829642", "title": "Demoting a Python Subprocess", "body": "<p>Try:</p>\n\n<pre><code>os.environ['HOME'] = '/home/blah'\nos.system(\"ls ~\")\n</code></pre>\n\n<p>AFAIK, this is as good as you are likely to get, because installations with network home directories, or users with bash profiles that set HOME to wacky values aren't going to be replicable in pure Python, and could have side effects.  </p>\n"}], "owner": {"reputation": 1394, "user_id": 668837, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/g2BHi.jpg?s=128&g=1", "display_name": "Soviero", "link": "https://stackoverflow.com/users/668837/soviero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1421105034, "creation_date": 1420668137, "question_id": 27829431, "link": "https://stackoverflow.com/questions/27829431/demoting-a-python-subprocess", "title": "Demoting a Python Subprocess", "body": "<p>Is it possible to have a main Python process run as root, but then start a Python subprocess (multiprocessing) run as a different user? I also want that user's home directory and shell settings to apply just like if the Python interpreter had been started by that user.</p>\n\n<p>Right now, when using os.setuid and gid, the permissions are correct, but the home directory is still incorrect as you'd expect:</p>\n\n<pre><code>&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.setgid(1000)\n&gt;&gt;&gt; os.setuid(1000)\n&gt;&gt;&gt; print os.getuid()\n1000\n&gt;&gt;&gt; print os.getgid()\n1000\n&gt;&gt;&gt; f = open('/etc/shadow')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nIOError: [Errno 13] Permission denied: '/etc/shadow'\n&gt;&gt;&gt; os.system('echo $HOME')\n/root\n0\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "django", "rest", "django-rest-framework"], "comments": [{"owner": {"reputation": 36599, "user_id": 359284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3260a8f331e6869fbf075666eb3b387a?s=128&d=identicon&r=PG", "display_name": "Kevin Brown", "link": "https://stackoverflow.com/users/359284/kevin-brown"}, "edited": false, "score": 0, "creation_date": 1420672410, "post_id": 27829413, "comment_id": 44066673, "body": "Is the httpie command in your question the exact one you are using? Or are you passing credentials along somewhere? That request should have failed if it was anonymous."}, {"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "edited": false, "score": 0, "creation_date": 1420672688, "post_id": 27829413, "comment_id": 44066796, "body": "@VisgeanSkeloru, can you try to remove your Javascript&#39;s cookie or try using <code>private</code> mode to send the ajax again?"}, {"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "edited": false, "score": 1, "creation_date": 1420675269, "post_id": 27829413, "comment_id": 44067567, "body": "@VisgeanSkeloru, I&#39;ve updated my answer accordingly, apologise I was in the wrong direction before and after discussing with other members, and re-study your request/response bodies, I realise I have missed the main point, which isn&#39;t about your <i>missing</i> CSRF token, it&#39;s about <i>incorrect</i> token"}], "answers": [{"comments": [{"owner": {"reputation": 2079, "user_id": 823281, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eacfb60b19e7f11f4abee01ac91cbcee?s=128&d=identicon&r=PG", "display_name": "Visgean Skeloru", "link": "https://stackoverflow.com/users/823281/visgean-skeloru"}, "edited": false, "score": 0, "creation_date": 1420669926, "post_id": 27829639, "comment_id": 44065650, "body": "I removed the authentication for demonstration purposes... I am kind of confused: where does http get the csrf cookie in the first place? If it is a single request there is no prior communication between server and httpie. Also would not that show up in the http request? I specified the verbose parameter and there is  no csrf mentioned."}, {"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "reply_to_user": {"reputation": 2079, "user_id": 823281, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eacfb60b19e7f11f4abee01ac91cbcee?s=128&d=identicon&r=PG", "display_name": "Visgean Skeloru", "link": "https://stackoverflow.com/users/823281/visgean-skeloru"}, "edited": false, "score": 0, "creation_date": 1420670187, "post_id": 27829639, "comment_id": 44065767, "body": "@VisgenSkeloru, can you show the full request and response body? I need to check the doc, but I think httpie will simulate a get right before a post if there is no previous session found."}, {"owner": {"reputation": 2079, "user_id": 823281, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eacfb60b19e7f11f4abee01ac91cbcee?s=128&d=identicon&r=PG", "display_name": "Visgean Skeloru", "link": "https://stackoverflow.com/users/823281/visgean-skeloru"}, "edited": false, "score": 0, "creation_date": 1420670861, "post_id": 27829639, "comment_id": 44066058, "body": "The full requests and response are in my original question. There is no get request - I would see that in the server log."}, {"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "reply_to_user": {"reputation": 2079, "user_id": 823281, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eacfb60b19e7f11f4abee01ac91cbcee?s=128&d=identicon&r=PG", "display_name": "Visgean Skeloru", "link": "https://stackoverflow.com/users/823281/visgean-skeloru"}, "edited": false, "score": 0, "creation_date": 1420671165, "post_id": 27829639, "comment_id": 44066184, "body": "@VisgeanSkeloru, have you set your httpie to be persistent, or have you done any previous GET/POST etc calls to the site? Session will be stored when you make the calls from the same host address."}, {"owner": {"reputation": 2079, "user_id": 823281, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eacfb60b19e7f11f4abee01ac91cbcee?s=128&d=identicon&r=PG", "display_name": "Visgean Skeloru", "link": "https://stackoverflow.com/users/823281/visgean-skeloru"}, "edited": false, "score": 0, "creation_date": 1420671700, "post_id": 27829639, "comment_id": 44066390, "body": "I did some get request but not with persistent cookies. I deleted .httpie/sessions but it still behaves the same."}, {"owner": {"reputation": 14498, "user_id": 380625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2fc7M.jpg?s=128&g=1", "display_name": "Jakub Roztocil", "link": "https://stackoverflow.com/users/380625/jakub-roztocil"}, "edited": false, "score": 0, "creation_date": 1420671783, "post_id": 27829639, "comment_id": 44066426, "body": "<a href=\"https://github.com/jakubroztocil/httpie#sessions\" rel=\"nofollow noreferrer\">HTTPie doesn&#39;t remember cookies by default</a>"}, {"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "reply_to_user": {"reputation": 14498, "user_id": 380625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2fc7M.jpg?s=128&g=1", "display_name": "Jakub Roztocil", "link": "https://stackoverflow.com/users/380625/jakub-roztocil"}, "edited": false, "score": 0, "creation_date": 1420672411, "post_id": 27829639, "comment_id": 44066676, "body": "@JakubRozto\u010dil, you&#39;re partially right. It doesn&#39;t by default but it will persist when custom headers are sent (which httpie does), please see my updated answer"}, {"owner": {"reputation": 14498, "user_id": 380625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2fc7M.jpg?s=128&g=1", "display_name": "Jakub Roztocil", "link": "https://stackoverflow.com/users/380625/jakub-roztocil"}, "edited": false, "score": 0, "creation_date": 1420672482, "post_id": 27829639, "comment_id": 44066715, "body": "@Anzel you need to explicitelly enable the session feature (e.g. with <code>--session=name</code>)"}, {"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "reply_to_user": {"reputation": 14498, "user_id": 380625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2fc7M.jpg?s=128&g=1", "display_name": "Jakub Roztocil", "link": "https://stackoverflow.com/users/380625/jakub-roztocil"}, "edited": false, "score": 0, "creation_date": 1420672594, "post_id": 27829639, "comment_id": 44066758, "body": "@JakubRozto\u010dil, you&#39;re correct, my apologies, I&#39;ll remove my answer if it doesn&#39;t explain the reason. We will need to investigate a little further."}, {"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "reply_to_user": {"reputation": 14498, "user_id": 380625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2fc7M.jpg?s=128&g=1", "display_name": "Jakub Roztocil", "link": "https://stackoverflow.com/users/380625/jakub-roztocil"}, "edited": false, "score": 0, "creation_date": 1420675630, "post_id": 27829639, "comment_id": 44067667, "body": "@JakubRozto\u010dil, I&#39;ve further investigated and provided a working solution for OP, and updated my explanation. I was in the wrong direction, and thanks for your guidance ;)"}, {"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "reply_to_user": {"reputation": 14498, "user_id": 380625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2fc7M.jpg?s=128&g=1", "display_name": "Jakub Roztocil", "link": "https://stackoverflow.com/users/380625/jakub-roztocil"}, "edited": false, "score": 0, "creation_date": 1420675756, "post_id": 27829639, "comment_id": 44067701, "body": "@JakubRozto\u010dil, OMG! I just checked and realise I had been debating with the author of <b>Httpie</b>? Please accept my apologies for being so arrogant before. And thanks for the awesome <i>Httpie</i> tool :)"}], "tags": [], "owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "is_accepted": false, "score": 1, "last_activity_date": 1420675509, "last_edit_date": 1420675509, "creation_date": 1420669089, "answer_id": 27829639, "question_id": 27829413, "link": "https://stackoverflow.com/questions/27829413/django-rest-framework-ignores-missing-csrf-tokens-with-httpie/27829639#27829639", "title": "Django rest framework ignores missing csrf tokens with httpie", "body": "<h3>EDITED &amp; UPDATED</h3>\n\n<p>OK apart from the explanations others already mentioned, after all that, we can conclude the reason why Httpie allows your DELETE but not Javascript:</p>\n\n<p>1) Since you have actually disabled your authentication, in theory all METHODS will be allowed from individual HTTP call, hence your Httpie works (just like when you use Curl), because Restframework doesn't require you to.</p>\n\n<p>2) Ajax call from Javascript, however is slightly different because you're using your browser console to do the call, which is in fact within the browser session. Further to this, your cookie has stored your previous GET's CSRF token which afterward when you perform the Ajax call, the CSRF token has been extracted from Django/Restframework which doesn't MATCH (because CSRF token will be automatically re-generated on each request. So this is a matter of <em>INCORRECT</em> rather than *MISSING** token.</p>\n\n<p>Hence like in my above comment, removing your browser's cookie / using a Private session has indeed resolved the issue, and successfully allowed you to perform Ajax style DELETE.</p>\n\n<p>Hope this helps, and thanks for everyone's guidance and hints leading me to this conclusion.   </p>\n"}, {"comments": [{"owner": {"reputation": 2079, "user_id": 823281, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eacfb60b19e7f11f4abee01ac91cbcee?s=128&d=identicon&r=PG", "display_name": "Visgean Skeloru", "link": "https://stackoverflow.com/users/823281/visgean-skeloru"}, "edited": false, "score": 0, "creation_date": 1420707409, "post_id": 27830276, "comment_id": 44076908, "body": "This was the problem, for testing purposes I turned off authentication in this single rest view."}], "tags": [], "owner": {"reputation": 14498, "user_id": 380625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2fc7M.jpg?s=128&g=1", "display_name": "Jakub Roztocil", "link": "https://stackoverflow.com/users/380625/jakub-roztocil"}, "is_accepted": true, "score": 5, "last_activity_date": 1420672304, "last_edit_date": 1420672304, "creation_date": 1420671882, "answer_id": 27830276, "question_id": 27829413, "link": "https://stackoverflow.com/questions/27829413/django-rest-framework-ignores-missing-csrf-tokens-with-httpie/27830276#27830276", "title": "Django rest framework ignores missing csrf tokens with httpie", "body": "<p>It's because the CSRF check is only performed when authenticated using <code>SessionAuthentication</code>, (i.e. using the <code>sessionid</code> cookie set by <code>django.contrib.auth</code>):</p>\n\n<blockquote>\n  <p>If you're using <code>SessionAuthentication</code> you'll need to include valid CSRF tokens for any <code>POST</code>, <code>PUT</code>, <code>PATCH</code> or <code>DELETE</code> operations. (<a href=\"http://www.django-rest-framework.org/topics/ajax-csrf-cors/\" rel=\"nofollow\">source</a>)</p>\n</blockquote>\n\n<p>I assume you use another auth method for the HTTPie-sent request, and therefore the CSRF check doesn't get applied there. </p>\n\n<p><a href=\"https://github.com/tomchristie/django-rest-framework/blob/master/tests/test_authentication.py\" rel=\"nofollow\">https://github.com/tomchristie/django-rest-framework/blob/master/tests/test_authentication.py</a></p>\n"}, {"tags": [], "owner": {"reputation": 36599, "user_id": 359284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3260a8f331e6869fbf075666eb3b387a?s=128&d=identicon&r=PG", "display_name": "Kevin Brown", "link": "https://stackoverflow.com/users/359284/kevin-brown"}, "is_accepted": false, "score": 2, "last_activity_date": 1420673562, "last_edit_date": 1495539949, "creation_date": 1420673562, "answer_id": 27830600, "question_id": 27829413, "link": "https://stackoverflow.com/questions/27829413/django-rest-framework-ignores-missing-csrf-tokens-with-httpie/27830600#27830600", "title": "Django rest framework ignores missing csrf tokens with httpie", "body": "<p>When the request is made through the browser, it is including the <code>sessionid</code> token in the <code>Cookie</code> header. <a href=\"https://stackoverflow.com/q/3467114/359284\">This header is automatically set by the browser</a>, and includes other cookies that have been set (like <code>djdt=hide</code> by the Django Debug Toolbar).</p>\n\n<pre><code>Cookie: ...; sessionid=kiihjh6m77jm8v9ol7xrryip89sny55i; ...\n</code></pre>\n\n<p>Because of this, <a href=\"https://docs.djangoproject.com/en/stable/topics/auth/default/#authentication-in-web-requests\" rel=\"nofollow noreferrer\">Django is authenticating the request automatically</a> (just like it normally would), which is <a href=\"http://www.django-rest-framework.org/api-guide/authentication/#sessionauthentication\" rel=\"nofollow noreferrer\">triggering the <code>SessionAuthentication</code></a> provided by Django REST framework. <code>SessionAuthentication</code> requires that the CSRF token is being validated, which is included in the <code>csrftoken</code> cookie and <code>X-CSRFToken</code> header, to ensure that nothing suspicious is happening.</p>\n\n<p>This means that you must set the <code>X-CSRFToken</code> header <a href=\"http://www.django-rest-framework.org/topics/ajax-csrf-cors/#javascript-clients\" rel=\"nofollow noreferrer\">when making your request in the browser</a>. Django includes some useful snippets of code for popular libraries in <a href=\"https://docs.djangoproject.com/en/stable/ref/csrf/#ajax\" rel=\"nofollow noreferrer\">their documentation on CSRF</a>.</p>\n\n<p>Now, when making requests through HTTPie, you are typically using a different form of authentication <a href=\"http://www.django-rest-framework.org/api-guide/authentication/#basicauthentication\" rel=\"nofollow noreferrer\">such as basic authentication</a>. By default, Django REST framework enables <code>BasicAuthentication</code> and <code>SessionAuhentication</code>, <a href=\"http://www.django-rest-framework.org/api-guide/authentication/\" rel=\"nofollow noreferrer\">unless you override them</a>, and most of the documentation expects that you are using basic authentication.</p>\n\n<p>HTTPie supports basic authentication through the <code>-a username:password</code> parameter. This would explain why you are not getting any permission issues when making the <code>DELETE</code> request, as without authentication you should be getting a <code>403</code> error. <a href=\"http://www.django-rest-framework.org/api-guide/permissions/#djangomodelpermissionsoranonreadonly\" rel=\"nofollow noreferrer\">The <code>DjangoModelPermissionsOrAnonReadOnly</code> should not allow</a> you to make the request you have provided without being authenticated.</p>\n"}], "owner": {"reputation": 2079, "user_id": 823281, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eacfb60b19e7f11f4abee01ac91cbcee?s=128&d=identicon&r=PG", "display_name": "Visgean Skeloru", "link": "https://stackoverflow.com/users/823281/visgean-skeloru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2462, "favorite_count": 0, "accepted_answer_id": 27830276, "answer_count": 3, "score": 3, "last_activity_date": 1420675509, "creation_date": 1420668068, "last_edit_date": 1420671136, "question_id": 27829413, "link": "https://stackoverflow.com/questions/27829413/django-rest-framework-ignores-missing-csrf-tokens-with-httpie", "title": "Django rest framework ignores missing csrf tokens with httpie", "body": "<p>I am using <a href=\"https://github.com/jakubroztocil/httpie\" rel=\"nofollow\">httpie</a> to play with my api written in django 1.7 and django rest framework 2.4.\nToday I was trying to delete an object:</p>\n\n<pre><code>$ http DELETE :8000/api/items/8/ --verbose\nDELETE /api/items/8/ HTTP/1.1\nAccept: */*\nAccept-Encoding: gzip, deflate, compress\nContent-Length: 0\nHost: 127.0.0.1:8000\nUser-Agent: HTTPie/0.8.0\n\n\nHTTP/1.0 204 NO CONTENT\nAllow: GET, PUT, PATCH, DELETE, HEAD, OPTIONS\nContent-Language: cs\nContent-Length: 0\nDate: Wed, 07 Jan 2015 21:47:06 GMT\nServer: WSGIServer/0.1 Python/2.7.6\nVary: Accept, Accept-Language, Cookie\n</code></pre>\n\n<p>Which was successful even though it should require CSRF token. When I try to delete the object from Chrome with following code:</p>\n\n<pre><code>$.ajax({\n    type: \"DELETE\",\n    url: \"http://127.0.0.1:8000/api/items/6/\"\n});\n</code></pre>\n\n<p>I get a following request:</p>\n\n<pre><code>DELETE /api/items/6/ HTTP/1.1\nHost: 127.0.0.1:8000\nConnection: keep-alive\nPragma: no-cache\nCache-Control: no-cache\nAccept: */*\nOrigin: http://127.0.0.1:8000\nX-Requested-With: XMLHttpRequest\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36\nDNT: 1\nReferer: http://127.0.0.1:8000/inventory\nAccept-Encoding: gzip, deflate, sdch\nAccept-Language: cs,en-US;q=0.8,en;q=0.6,es;q=0.4,pt;q=0.2,sk;q=0.2\nCookie: cc_csrf=bd9fbbc8f75cffa2e1e3d2c95c2185c5; _ga=GA1.1.2038400685.1386436341; __utma=96992031.2038400685.1386436341.1417173095.1417428975.79; __utmz=96992031.1409752584.3.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __zlcmid=MpdRtV3vZuf3D9; djdt=hide; sessionid=kiihjh6m77jm8v9ol7xrryip89sny55i; csrftoken=FtnnEWPLhMh0CAGMRMH77nB0AAno93uW\n</code></pre>\n\n<p>Response:</p>\n\n<pre><code>HTTP/1.0 403 FORBIDDEN\nDate: Wed, 07 Jan 2015 21:57:40 GMT\nServer: WSGIServer/0.1 Python/2.7.6\nVary: Accept, Accept-Language, Cookie\nContent-Type: application/json\nContent-Language: en\nAllow: GET, PUT, PATCH, DELETE, HEAD, OPTIONS\n\n{\"detail\": \"CSRF Failed: CSRF token missing or incorrect.\"}\n</code></pre>\n\n<p>My settings:</p>\n\n<pre><code>REST_FRAMEWORK = {\n    # Use hyperlinked styles by default.\n    # Only used if the `serializer_class` attribute is not set on a view.\n    'DEFAULT_MODEL_SERIALIZER_CLASS': 'rest_framework.serializers.HyperlinkedModelSerializer',\n\n    # Use Django's standard `django.contrib.auth` permissions,\n    # or allow read-only access for unauthenticated users.\n    'DEFAULT_PERMISSION_CLASSES': [\n        'rest_framework.permissions.DjangoModelPermissionsOrAnonReadOnly'\n    ],\n\n    'DEFAULT_FILTER_BACKENDS': ('rest_framework.filters.DjangoFilterBackend',),\n    'DATETIME_FORMAT': \"%B %d, %Y\"\n}\nMIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.locale.LocaleMiddleware',\n    'debug_toolbar.middleware.DebugToolbarMiddleware',\n)\n</code></pre>\n\n<p>So my question is: what is the difference between sending a DELETE request with JS ajax and with sending the request with http?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 1903, "user_id": 2532708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad8e40287bc8ec9a4dbe8958cf7d574f?s=128&d=identicon&r=PG", "display_name": "Henry Crutcher", "link": "https://stackoverflow.com/users/2532708/henry-crutcher"}, "edited": false, "score": 1, "creation_date": 1420668084, "post_id": 27829344, "comment_id": 44064808, "body": "Upvoted because many many people will have this question, and it was well stated."}, {"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "reply_to_user": {"reputation": 1903, "user_id": 2532708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad8e40287bc8ec9a4dbe8958cf7d574f?s=128&d=identicon&r=PG", "display_name": "Henry Crutcher", "link": "https://stackoverflow.com/users/2532708/henry-crutcher"}, "edited": false, "score": 0, "creation_date": 1420669129, "post_id": 27829344, "comment_id": 44065304, "body": "Thanks, I appreciate it"}], "answers": [{"comments": [{"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 0, "creation_date": 1420669066, "post_id": 27829381, "comment_id": 44065274, "body": "Thanks, os.path.sep is great."}], "tags": [], "owner": {"reputation": 1903, "user_id": 2532708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad8e40287bc8ec9a4dbe8958cf7d574f?s=128&d=identicon&r=PG", "display_name": "Henry Crutcher", "link": "https://stackoverflow.com/users/2532708/henry-crutcher"}, "is_accepted": true, "score": 2, "last_activity_date": 1420667951, "creation_date": 1420667951, "answer_id": 27829381, "question_id": 27829344, "link": "https://stackoverflow.com/questions/27829344/python-make-filename-based-on-path-and-replace-backslash/27829381#27829381", "title": "Python, make filename based on path and replace backslash", "body": "<p>Try using </p>\n\n<pre><code>import os\nout='a/b/c/'.replace(os.path.sep, '_')\nprint out\n</code></pre>\n"}], "owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "accepted_answer_id": 27829381, "answer_count": 1, "score": 1, "last_activity_date": 1420667951, "creation_date": 1420667783, "question_id": 27829344, "link": "https://stackoverflow.com/questions/27829344/python-make-filename-based-on-path-and-replace-backslash", "title": "Python, make filename based on path and replace backslash", "body": "<p>I'm using Linux and in Python, I want to create a file name based on a path.  Imagine I have the path:</p>\n\n<pre><code>'/a/b/c'\n</code></pre>\n\n<p>I want to create a string from this where the slashes are replaced with an underscore character:</p>\n\n<pre><code>'a_b_c'\n</code></pre>\n\n<p>This is easy enough with replace:</p>\n\n<pre><code>'a/b/c/.replace('/', '_')\n</code></pre>\n\n<p>But I worry that this would not work on windows.  I don't know much about windows paths. Is there a straightforward way to make this operation windows-compatible?  Either through os.path functions, or through another replace call?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "regex"], "answers": [{"tags": [], "owner": {"reputation": 15852, "user_id": 2294755, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/moDhz.jpg?s=128&g=1", "display_name": "Hackaholic", "link": "https://stackoverflow.com/users/2294755/hackaholic"}, "is_accepted": true, "score": 0, "last_activity_date": 1420668253, "last_edit_date": 1420668253, "creation_date": 1420667888, "answer_id": 27829369, "question_id": 27829309, "link": "https://stackoverflow.com/questions/27829309/writing-regular-expressions-to-a-file-python/27829369#27829369", "title": "Writing Regular Expressions to a file Python", "body": "<p>After pritinting write it to file, like this:</p>\n\n<pre><code>IfcFile = open('ifc2.ifc', 'r')\n\n#defines the string \nIfcColourData = re.compile('ifccolourrgb', re.IGNORECASE)\n\nf = open('IFC2RAD.txt', 'w')    # opne file to write here\n\nfor RadColourData in IfcFile:\n    if re.search(IfcColourData, RadColourData):\n        print(RadColourData)\n        f.write(RadColourData)      # write here to file\nIfcFile.close()       \nf.close()\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 4429636, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9f7c182a194d156c6e2776dea245ee67?s=128&d=identicon&r=PG&f=1", "display_name": "Claus", "link": "https://stackoverflow.com/users/4429636/claus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "accepted_answer_id": 27829369, "answer_count": 1, "score": 0, "last_activity_date": 1420668253, "creation_date": 1420667645, "last_edit_date": 1592644375, "question_id": 27829309, "link": "https://stackoverflow.com/questions/27829309/writing-regular-expressions-to-a-file-python", "title": "Writing Regular Expressions to a file Python", "body": "<p>For a project I have to extract the color data which is defined in an IFC file.\nIFC defines an EXPRESS based entity-relationship model consisting of several hundred entities organized into an object-based inheritance hierarchy.</p>\n<p>Section of an IFC file for as an example:</p>\n<pre><code>#3510= IFCCLOSEDSHELL((#3392,#3410,#3421,#3440,#3451,#3462,#3473,#3484,#3495,#3506));\n#3514= IFCFACETEDBREP(#3510);\n#3517= IFCCOLOURRGB($,0.9372549,0.79215686,0.44705882)\n</code></pre>\n<p>Now I want to achieve returning all colour data using Regular Expressions in Python.\nSo far I came up with this (I am new to programming)</p>\n<h1>opens ifc file</h1>\n<pre><code>IfcFile = open('ifc2.ifc', 'r')\n\n#defines the string \nIfcColourData = re.compile('ifccolourrgb', re.IGNORECASE)\n\n\n#iterating over the ifc file\nfor RadColourData in IfcFile:\n    if re.search(IfcColourData, RadColourData):\n        print(RadColourData)\nIfcFile.close()       \n\n#writing the  data to a file\nf = open('IFC2RAD.txt', 'w')\nf.write(RadColourData)\nf.close()\n</code></pre>\n<p>The code works, it returns all the lines in the ifcfile with IfcColourRGB in them. (What I can see in my console). I am using Eclipse with Pydev and Python 3.4.</p>\n<p>Only when I want to write the result of RadColourData to a file called IFC2RAD.txt it only writes the last line of the ifc file to IFC2RAD.txt file. What am I doing wrong?</p>\n"}, {"tags": ["python", "pandas"], "owner": {"reputation": 976, "user_id": 1183980, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a038d6874b9d93844c7d9235cac4fb6a?s=128&d=identicon&r=PG", "display_name": "ajkl", "link": "https://stackoverflow.com/users/1183980/ajkl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1420667596, "creation_date": 1420667596, "question_id": 27829291, "link": "https://stackoverflow.com/questions/27829291/pandas-read-json-throws-malloc-error", "title": "pandas read_json throws malloc error", "body": "<p>I have a file containing json array with 3861935 lines. </p>\n\n<pre><code>df = pandas.read_json('xyz.json')\nPython(20436,0x7fff74109310) malloc: *** error for object 0x7fff533bdec0: pointer being freed was not allocated\n*** set a breakpoint in malloc_error_break to debug\nAbort trap: 6\n</code></pre>\n\n<p>It works fine with R jsonlite's fromJSON()</p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 477, "user_id": 4289132, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4e705e1ece2a739446e748a0951ccab3?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/4289132/omar"}, "is_accepted": true, "score": 0, "last_activity_date": 1420670176, "creation_date": 1420670176, "answer_id": 27829913, "question_id": 27829259, "link": "https://stackoverflow.com/questions/27829259/organize-subplots-using-matplotlib/27829913#27829913", "title": "Organize subplots using matplotlib", "body": "<p>I got a better figure when I saved it as .png file. </p>\n\n<pre><code>fig = plt.figure(figsize=(20, 222))\nplt.subplots_adjust(top=.9, bottom=0.1, wspace=0.2, hspace=0.2)\n\nfor i in range(1, 65):\n\n    print 'E', i, ':'\n\n    plt.subplot(64, 2, i)\n    plt.ylabel('E%s' % str(i))\n\n    i += 1\n    print E[0+j:127+j]\n    plt.plot(E[0+j:127+j])\n    j += 128\nplt.savefig('foo.png', bbox_inches='tight')\nplt.show()\n</code></pre>\n\n<p>Though I believe there is a better solution.</p>\n"}], "owner": {"reputation": 477, "user_id": 4289132, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4e705e1ece2a739446e748a0951ccab3?s=128&d=identicon&r=PG&f=1", "display_name": "Omar", "link": "https://stackoverflow.com/users/4289132/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 27829913, "answer_count": 1, "score": 0, "last_activity_date": 1420670176, "creation_date": 1420667468, "last_edit_date": 1420668771, "question_id": 27829259, "link": "https://stackoverflow.com/questions/27829259/organize-subplots-using-matplotlib", "title": "Organize subplots using matplotlib", "body": "<p>I am trying to plot the content of a json file. The script should generate 64 subplots. Each subplot consists of 128 samples (voltage levels). \"ElementSig\" is a \"key\" in that json file for a list of 8192 samples. I am taking 128 samples at a time and generate a subplot of it as you see in my following script:</p>\n\n<pre><code>import json\nimport matplotlib.pyplot as plt\njson_data = open('txrx.json')\nloaded_data = json.load(json_data)\njson_data.close()\nj = 0\nE = loaded_data['ElementSig']\n\nfor i in range(64):\n    plt.ylabel('E%s' % str(i+1))\n    print 'E', i, ':'\n    plt.figure(1)\n    plt.subplot(64, 2, i+1)\n    print E[0+j:127+j]\n    plt.plot(E[0+j:127+j])\n    j += 128\nplt.show()\n</code></pre>\n\n<p>The results is very packed and the figures are overlapping.\n<img src=\"https://i.stack.imgur.com/AK5CR.png\" alt=\"enter image description here\"></p>\n\n<p>Any help is appreciated. </p>\n"}, {"tags": ["python", "pypy"], "comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 1, "creation_date": 1420667786, "post_id": 27829225, "comment_id": 44064668, "body": "@ColonelThirtyTwo if you look at the variance in the numbers, you&#39;ll see that the pypy results are always aligned on 1/30 (not 1/3) second boundaries, unlike the Python3 results."}, {"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1420670740, "post_id": 27829225, "comment_id": 44066010, "body": "I&#39;m not seeing these kinds of results. When I run this program on Windows 7 using Python 2.7, PyPy 2.4.0, and PyPy3 2.4.0, all of them appear to have the same randomness and precision (down to at least microseconds)."}], "answers": [{"tags": [], "owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 1, "last_activity_date": 1420668137, "creation_date": 1420668137, "answer_id": 27829432, "question_id": 27829225, "link": "https://stackoverflow.com/questions/27829225/why-is-pypys-clock-so-imprecise/27829432#27829432", "title": "Why is pypy&#39;s clock() so imprecise?", "body": "<p>From the <a href=\"https://docs.python.org/2/library/time.html#time.clock\" rel=\"nofollow\">Python documentation</a>:</p>\n\n<blockquote>\n  <p>The precision, and in fact the very definition of the meaning of \u201cprocessor time\u201d, depends on that of the C function of the same name.</p>\n</blockquote>\n\n<p>The precision will differ for different implementations. In this case pypy appears to be using a timer with a period of 1/30 second, so the precision will never be better than that.</p>\n"}, {"comments": [{"owner": {"reputation": 890, "user_id": 1104684, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f83a6e49b9c7292af340cf33151bb990?s=128&d=identicon&r=PG", "display_name": "Undeterminant", "link": "https://stackoverflow.com/users/1104684/undeterminant"}, "edited": false, "score": 0, "creation_date": 1420740476, "post_id": 27836214, "comment_id": 44097217, "body": "I&#39;m actually running on Arch Linux right now, so, I suppose that it&#39;s not that precise on Linux."}], "tags": [], "owner": {"reputation": 10650, "user_id": 1556290, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b37e6b4ac97453e4ba9dba37954cf79?s=128&d=identicon&r=PG", "display_name": "Armin Rigo", "link": "https://stackoverflow.com/users/1556290/armin-rigo"}, "is_accepted": true, "score": 1, "last_activity_date": 1420707392, "creation_date": 1420707392, "answer_id": 27836214, "question_id": 27829225, "link": "https://stackoverflow.com/questions/27829225/why-is-pypys-clock-so-imprecise/27836214#27836214", "title": "Why is pypy&#39;s clock() so imprecise?", "body": "<p>Mark's answer is correct in theory, but it is really a bug.  Please open a bug on the issue tracker of PyPy, specifying exactly which platform and PyPy version you're using (I seem to get the correct precision on Linux, and John on Windows).</p>\n"}], "owner": {"reputation": 890, "user_id": 1104684, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f83a6e49b9c7292af340cf33151bb990?s=128&d=identicon&r=PG", "display_name": "Undeterminant", "link": "https://stackoverflow.com/users/1104684/undeterminant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 27836214, "answer_count": 2, "score": 3, "last_activity_date": 1420707392, "creation_date": 1420667291, "question_id": 27829225, "link": "https://stackoverflow.com/questions/27829225/why-is-pypys-clock-so-imprecise", "title": "Why is pypy&#39;s clock() so imprecise?", "body": "<p>I tried timing some of my code and noticed some really weird results with pypy. Look at this example:</p>\n\n<pre><code>from time import clock\nfrom random import randint\n\ntimes = []\nfor _ in range(10):\n  start = clock()\n  sum(i * i for i in range(randint(1000000, 2000000))) # waste time\n  end = clock()\n  times.append(int((end - start) * 1000000))\n\nfor t in times:\n  print(t, \"\u00b5s\")\n</code></pre>\n\n<p>Running with <code>python3</code>, there's a bunch of random results, as expected:</p>\n\n<pre><code>506246 \u00b5s\n461735 \u00b5s\n403287 \u00b5s\n472049 \u00b5s\n651156 \u00b5s\n609496 \u00b5s\n467181 \u00b5s\n633187 \u00b5s\n562603 \u00b5s\n744360 \u00b5s\n</code></pre>\n\n<p>Running with pypy, it seems that everything is only accurate to a third of a second:</p>\n\n<pre><code>43332 \u00b5s\n36667 \u00b5s\n30000 \u00b5s\n23332 \u00b5s\n19999 \u00b5s\n23334 \u00b5s\n26665 \u00b5s\n20000 \u00b5s\n36667 \u00b5s\n26666 \u00b5s\n</code></pre>\n\n<p>Why is that?</p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-ec2", "environment-variables", "boto"], "answers": [{"comments": [{"owner": {"reputation": 19625, "user_id": 1287834, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ffykU.jpg?s=128&g=1", "display_name": "Slater Victoroff", "link": "https://stackoverflow.com/users/1287834/slater-victoroff"}, "edited": false, "score": 0, "creation_date": 1420752474, "post_id": 27831642, "comment_id": 44103615, "body": "Thanks so much John! I wasn&#39;t aware of the user-data option, but that seems like the best approach here. There&#39;ll be some hacking, but I think there&#39;s enough there for me to work with. Thanks so much!"}, {"owner": {"reputation": 2428, "user_id": 1920550, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MVkL3.jpg?s=128&g=1", "display_name": "seeiespi", "link": "https://stackoverflow.com/users/1920550/seeiespi"}, "edited": false, "score": 0, "creation_date": 1594472446, "post_id": 27831642, "comment_id": 111141264, "body": "Related to the environmental variable setting from the user_data script, does this approach always work? When I use it to set the PYTHONPATH variable as described in this issue <a href=\"https://stackoverflow.com/questions/62845062/import-error-loading-module-using-bash-script-on-ec2-instance-aws/62845502#62845502\" title=\"import error loading module using bash script on ec2 instance aws\">stackoverflow.com/questions/62845062/&hellip;</a> the python specific case still fails. I invite you to take a look as I&#39;m still trying to get to the bottom of that issue."}, {"owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "reply_to_user": {"reputation": 2428, "user_id": 1920550, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MVkL3.jpg?s=128&g=1", "display_name": "seeiespi", "link": "https://stackoverflow.com/users/1920550/seeiespi"}, "edited": false, "score": 0, "creation_date": 1594473467, "post_id": 27831642, "comment_id": 111141541, "body": "@seeiespi Please create a new Question rather than asking via a comment on an old question."}], "tags": [], "owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "is_accepted": true, "score": 4, "last_activity_date": 1420680965, "creation_date": 1420680965, "answer_id": 27831642, "question_id": 27829186, "link": "https://stackoverflow.com/questions/27829186/adding-an-environment-variable-to-an-ec2-instance-with-boto/27831642#27831642", "title": "Adding an environment variable to an ec2 instance with boto", "body": "<p>There are several ways to pass information to an Amazon EC2 instance, but not all of them would necessarily meet your requirement for it not being accessible after launch.</p>\n\n<p><strong>User Data</strong></p>\n\n<p>When launching an Amazon EC2 instance, User Data can be specified. The contents of the User Data is accessible from within the instance by accessing the URL:</p>\n\n<pre><code>http://169.254.169.254/latest/user-data/\n</code></pre>\n\n<p>Your code on the instance could query this URL (which is intercepted by the hypervisor, and viewable only from the instance itself) to access the information.</p>\n\n<p>Another use for User Data is that it can <a href=\"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html#user-data-shell-scripts\" rel=\"nofollow\">execute as a script</a>. The script could set an environment variable that your code can then access.</p>\n\n<p>However, the User Data can be viewed via the EC2 Management Console or via a <code>DescribeInstanceAttribute</code> call, so this might not meet your requirement for security.</p>\n\n<p><strong>Tags</strong></p>\n\n<p>Another option is to use Tags. These are Name-Value pairs associated with an EC2 instance (or other objects within AWS). Tags can be retrieved via a call to 'DescribeTags', but boto has some shortcuts to access them.</p>\n\n<p>Tags are a great way to associate information with an instance, and tags can also be used to identify specific instances (eg by environment, project, owner...).</p>\n\n<p>However, the values stored in Tags are viewable in the EC2 Management Console and via API calls.</p>\n\n<p><strong>Other options</strong></p>\n\n<ul>\n<li>Retrieving values from a <strong>database</strong> (but then you have the problem of how to authenticate against the database)</li>\n<li>Storing data on an <strong>AMI</strong> (but this doesn't make it easy to modify values on a per-instance basis)</li>\n<li>Storing data in <strong>Amazon S3</strong> and using an IAM role assigned to the instance to provide credentials to retrieve the data from S3</li>\n<li>Retrieving data from a code repository (but, again, security concerns)</li>\n</ul>\n"}], "owner": {"reputation": 19625, "user_id": 1287834, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ffykU.jpg?s=128&g=1", "display_name": "Slater Victoroff", "link": "https://stackoverflow.com/users/1287834/slater-victoroff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1494, "favorite_count": 1, "accepted_answer_id": 27831642, "answer_count": 1, "score": 1, "last_activity_date": 1420680965, "creation_date": 1420667060, "question_id": 27829186, "link": "https://stackoverflow.com/questions/27829186/adding-an-environment-variable-to-an-ec2-instance-with-boto", "title": "Adding an environment variable to an ec2 instance with boto", "body": "<p>Pretty simple question, but I can't find anyone addressing it, or really any mention of the problem. Basically I'm looking to add a small amount of information to a remote ec2 box by associating an environment variable with the box when I'm spinning it up.</p>\n\n<p>I've seen some mention of the concept of <code>tags</code>, but I'm looking for something that I can naively check and access from within the instance, and it's not clear if <code>tags</code> provide that functionality.</p>\n\n<p>Ideally the interface to add these environment variables would also not be accessible by any external party after the instance has been instantiated.</p>\n\n<p>I realize I could achieve a similar effect by setting up a secure database, but that seems overly involved for just trying to add a couple pieces of metadata to the instance.</p>\n\n<p>Not looking for a handout, but any link to some documentation on this would be much appreciated. I'm currently using <code>boto</code> (code below), so something that fits into the <code>boto</code> framework would be ideal, but if I have to drop down to amazon's REST api it wouldn't be the end of the world.</p>\n\n<pre><code>def create_instances(connection, type, number, **kwargs):\n    kwargs.update({\n        'min_count': number,\n        'max_count': number\n    })\n    return connection.run_instances(**kwargs).instances  # maybe if kwargs had an environment variable?\n</code></pre>\n"}, {"tags": ["python", "flask", "token", "flask-login", "flask-security"], "answers": [{"comments": [{"owner": {"reputation": 452, "user_id": 3379489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/901ee21b8726d62c9ffcc051d1d9c787?s=128&d=identicon&r=PG", "display_name": "rob123", "link": "https://stackoverflow.com/users/3379489/rob123"}, "edited": false, "score": 0, "creation_date": 1456550715, "post_id": 27853005, "comment_id": 59012023, "body": "Amazingly useful. Thanks."}, {"owner": {"reputation": 2192, "user_id": 1749551, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42a1266a75ef6e6f77c0690ab43b380d?s=128&d=identicon&r=PG", "display_name": "Nick K9", "link": "https://stackoverflow.com/users/1749551/nick-k9"}, "edited": false, "score": 1, "creation_date": 1561128670, "post_id": 27853005, "comment_id": 99974893, "body": "Four years on and this question is still helping people. Thank you Chockomonkey!"}], "tags": [], "owner": {"reputation": 3003, "user_id": 2917993, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/959de3076c527a72be57f2edfadb56a0?s=128&d=identicon&r=PG&f=1", "display_name": "Chockomonkey", "link": "https://stackoverflow.com/users/2917993/chockomonkey"}, "is_accepted": true, "score": 2, "last_activity_date": 1420770991, "creation_date": 1420770991, "answer_id": 27853005, "question_id": 27829176, "link": "https://stackoverflow.com/questions/27829176/invalid-confirmation-token-when-trying-to-confirm-user-email-manually-with-flask/27853005#27853005", "title": "Invalid Confirmation Token when trying to confirm user email manually with Flask-Security", "body": "<p>Decided to try committing to the database and then sending the confirmation, sure enough that worked. Not sure why it made a difference, because from what I can tell, none of the functions use or change anything in the db, but clearly I'm missing something. </p>\n\n<p>Changed code as follows and all is good now!</p>\n\n<pre><code>    if newform.req_conf.data:\n        db.session.add(newuser)\n        db.session.commit()\n        send_confirmation_instructions(newuser)\n    else:\n        newuser.confirmed_at = datetime.utcnow()\n        db.session.add(newuser)\n        db.session.commit()\n</code></pre>\n"}], "owner": {"reputation": 3003, "user_id": 2917993, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/959de3076c527a72be57f2edfadb56a0?s=128&d=identicon&r=PG&f=1", "display_name": "Chockomonkey", "link": "https://stackoverflow.com/users/2917993/chockomonkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 27853005, "answer_count": 1, "score": 2, "last_activity_date": 1420770991, "creation_date": 1420667021, "question_id": 27829176, "link": "https://stackoverflow.com/questions/27829176/invalid-confirmation-token-when-trying-to-confirm-user-email-manually-with-flask", "title": "Invalid Confirmation Token when trying to confirm user email manually with Flask-Security", "body": "<p>Trying to figure out what is different between when I call send_confirmation_instructions and when it gets called with the built-in resend confirmation instructions form. </p>\n\n<p>Here's the call in my new user view: </p>\n\n<pre><code>newuser = User(\n            email = newform.email.data,\n            first_name = newform.first_name.data,\n            last_name = newform.last_name.data,\n            business_name = newform.business_name.data,\n            roles = [Role.query.filter_by(id=role_id).first() for role_id in newform.roles.data],\n            active = True\n            )\n\n        if newform.req_conf.data:\n            send_confirmation_instructions(newuser)\n        else:\n            newuser.confirmed_at = datetime.utcnow()\n</code></pre>\n\n<p>and here is the built-in call from the send confirmation view:</p>\n\n<pre><code>def send_confirmation():\n    \"\"\"View function which sends confirmation instructions.\"\"\"\n\n    form_class = _security.send_confirmation_form\n\n    if request.json:\n        form = form_class(MultiDict(request.json))\n    else:\n        form = form_class()\n\n    if form.validate_on_submit():\n        send_confirmation_instructions(form.user)\n        if request.json is None:\n            do_flash(*get_message('CONFIRMATION_REQUEST', email=form.user.email))\n\n    if request.json:\n        return _render_json(form)\n\n    return _security.render_template(config_value('SEND_CONFIRMATION_TEMPLATE'),\n                                     send_confirmation_form=form,\n                                     **_ctx('send_confirmation'))\n</code></pre>\n\n<p>From what I can tell, all the magic happens with the function:\n    send_confirmation_instructions(user)</p>\n\n<p>and the only difference I can tell between how I call it and how Flask-Security calls it, is that I'm using a user instance, and the built-in function uses form.user.</p>\n\n<p>Tracking down the form it uses, I cannot see where form.user is even assigned: </p>\n\n<pre><code>class SendConfirmationForm(Form, UserEmailFormMixin):\n\n    submit = SubmitField(get_form_field_label('send_confirmation'))\n\n    def __init__(self, *args, **kwargs):\n        super(SendConfirmationForm, self).__init__(*args, **kwargs)\n        if request.method == 'GET':\n            self.email.data = request.args.get('email', None)\n\n    def validate(self):\n        if not super(SendConfirmationForm, self).validate():\n            return False\n        if self.user.confirmed_at is not None:\n            self.email.errors.append(get_message('ALREADY_CONFIRMED')[0])\n            return False\n        return True\n</code></pre>\n\n<p>I'm quite lost now, and so I turn to ya'll for assistance. Any ideas what i'm doing wrong?</p>\n"}, {"tags": ["python", "html", "web-scraping", "beautifulsoup", "html-parsing"], "answers": [{"tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 0, "last_activity_date": 1420678361, "creation_date": 1420678361, "answer_id": 27831291, "question_id": 27829034, "link": "https://stackoverflow.com/questions/27829034/beautifulsoup-passing-div/27831291#27831291", "title": "BeautifulSoup passing div", "body": "<p>Multiple issues here:</p>\n\n<ul>\n<li>there is an additional asynchronous call involved in forming the list of videos:\n<ul>\n<li>first you need to extract the <code>playlist</code> parameter value from the initial page</li>\n<li>then, make a post request to get the videos to <a href=\"http://animedigitalnetwork.fr/index.php?option=com_vodvideo&amp;view=playlist&amp;format=raw&#39;\" rel=\"nofollow\">this url</a> </li>\n</ul></li>\n<li><p>you are using an <a href=\"http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html\" rel=\"nofollow\">outdated and not maintained version</a> of <code>BeautifulSoup</code> - switch to <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/\" rel=\"nofollow\"><code>bs4</code></a>:</p>\n\n<pre><code>pip install beautifulsoup4\n</code></pre></li>\n<li><p>use <a href=\"http://docs.python-requests.org/en/latest/\" rel=\"nofollow\"><code>requests</code></a> instead of <code>urllib2</code>, maintain a <a href=\"http://docs.python-requests.org/en/latest/user/advanced/#session-objects\" rel=\"nofollow\">session</a> and pass request headers</p></li>\n</ul>\n\n<p>The complete working code:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\n\nheaders = {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36'}\n\n# initialize session\nsession = requests.Session()\n\n# getting playlist\nresponse = session.get('http://animedigitalnetwork.fr/video/naruto-shippuden', headers=headers)\nsoup = BeautifulSoup(response.content)\nplaylist = soup.find('a', {'data-playlist': True})['data-playlist']\n\n# getting list of videos\nurl = 'http://animedigitalnetwork.fr/index.php?option=com_vodvideo&amp;view=playlist&amp;format=raw'\nresponse = session.post(url, data={\n    'playlist': playlist,\n    'season': '',\n    'order': 'DESC'\n}, headers=headers)\n\nsoup = BeautifulSoup(response.content)\nfor video in soup.select('div.adn-video'):\n    print video.a.get('title')\n</code></pre>\n\n<p>Prints (list of video titles):</p>\n\n<pre><code>Naruto Shippuden 391\nNaruto Shippuden 390\nNaruto Shippuden 389\n...\nNaruto Shippuden 3\nNaruto Shippuden 2\nNaruto Shippuden 1\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4396632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c100af1b256a875fcddd05d2e78afe9?s=128&d=identicon&r=PG&f=1", "display_name": "parcal", "link": "https://stackoverflow.com/users/4396632/parcal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 27831291, "answer_count": 1, "score": 0, "last_activity_date": 1420678525, "creation_date": 1420666416, "last_edit_date": 1420678525, "question_id": 27829034, "link": "https://stackoverflow.com/questions/27829034/beautifulsoup-passing-div", "title": "BeautifulSoup passing div", "body": "<p>I would like passing this page: </p>\n\n<p><a href=\"http://animedigitalnetwork.fr/video/naruto-shippuden\" rel=\"nofollow\">http://animedigitalnetwork.fr/video/naruto-shippuden</a></p>\n\n<p>I test this:</p>\n\n<pre><code>import urllib2\nfrom BeautifulSoup import BeautifulSoup\n\npage = urllib2.urlopen('http://animedigitalnetwork.fr/video/naruto-shippuden')\nsoup = BeautifulSoup(page)\nfirst_div = soup.find('div',{\"class\" : \"adn-video\"})\n</code></pre>\n\n<p>result is not naruto !? </p>\n\n<pre><code>&lt;div class=\"adn-video\"&gt; &lt;div class=\"adn-video_screenshot\"&gt;\n&lt;img src=\"http://image.animedigitalnetwork.fr/license/claymore/tv/web/eps1_328x184.jpg\" alt=\"Claymore 1\" /&gt;&lt;span class=\"adn_video_play-button\"&gt;&lt;/span&gt; &lt;/div&gt;&lt;div class=\"adn-video_text\"&gt;&lt;div class=\"adn-video_title\"&gt;\n&lt;h4&gt;Claymore&lt;/h4&gt;&lt;span&gt;\u00c9pisode 1&lt;/span&gt;&lt;div class=\"adn-rating mobile-hide\" itemprop=\"aggregateRating\" itemscope=\"itemscope\" itemtype=\"http://schema.org/AggregateRating\"&gt;&lt;meta itemprop=\"ratingValue\" content=\"4.6667\" /&gt;&lt;meta itemprop=\"ratingCount\" content=\"10\" /&gt;&lt;div id=\"adn-rating\"&gt;&lt;ul class=\"adn-rating_empty\"&gt;&lt;li&gt;&amp;#xe002;&lt;/li&gt;&lt;li&gt;&amp;#xe002;&lt;/li&gt;&lt;li&gt;&amp;#xe002;&lt;/li&gt;&lt;li&gt;&amp;#xe002;&lt;/li&gt;&lt;li&gt;&amp;#xe002;&lt;/li&gt;&lt;/ul&gt;&lt;ul class=\"adn-rating_rating\"&gt;&lt;li&gt;&amp;#xe002;&lt;/li&gt;&lt;li&gt;&amp;#xe002;&lt;/li&gt;&lt;li&gt;&amp;#xe002;&lt;/li&gt;&lt;li&gt;&amp;#xe002;&lt;/li&gt;&lt;li&gt;&amp;#xe002;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;p class=\"adn-rating-message\"&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=\"adn-video_link\"&gt;\n&lt;a title=\"Claymore 1\" href=\"/video/claymore/1849-episode-1-la-claymore\"&gt;Voir la vid\u00e9o&lt;/a&gt;\n&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["python", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "is_accepted": false, "score": 2, "last_activity_date": 1420666766, "creation_date": 1420666766, "answer_id": 27829113, "question_id": 27829010, "link": "https://stackoverflow.com/questions/27829010/should-i-call-connect-and-close-for-every-sqlite3-transaction/27829113#27829113", "title": "Should I call connect() and close() for every Sqlite3 transaction?", "body": "<p>Using a single connection will be faster, and operationally should be fine.</p>\n\n<p>Use the <code>atexit</code> module if you want to ensure the closing eventually happens (even if your program is terminated by an exception).  Specifically, <code>import atexit</code> at the start of your program, and <code>atexit.register(conn.close)</code> right after you <code>connect</code> -- note, <strong>no</strong> <code>()</code> after <code>close</code>, you want to <strong>register</strong> the function to be called at program exist (whether normal or via an exception), <strong>not</strong> to <strong>call</strong> the function.</p>\n\n<p>Unfortunately if Python should crash due e.g to an error in a C-coded module that Python can't catch, or a <code>kill -9</code>, etc, the registered exit function(s) may end up not being called.  Fortunately in this case it shouldn't hurt anyway (besides being, one hopes, a rare and extreme occurrence).</p>\n"}, {"comments": [{"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1420666901, "post_id": 27829115, "comment_id": 44064254, "body": "Context manager is the way to go, it also gracefully catches and handles exceptions"}, {"owner": {"reputation": 300, "user_id": 11653053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459475aa76c7aa5724cdd04bfaa186c6?s=128&d=identicon&r=PG&f=1", "display_name": "howdoicode", "link": "https://stackoverflow.com/users/11653053/howdoicode"}, "edited": false, "score": 0, "creation_date": 1600002159, "post_id": 27829115, "comment_id": 112944532, "body": "If you use the <b>Connection object</b> as the expression in the <code>with</code> statement, it will automatically commit or rollback transactions, without needing to include <code>conn.commit()</code>.  See <a href=\"https://docs.python.org/3/library/sqlite3.html#using-the-connection-as-a-context-manager\" rel=\"nofollow noreferrer\">Using the connection as a context manager</a>"}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 5, "last_activity_date": 1420666769, "creation_date": 1420666769, "answer_id": 27829115, "question_id": 27829010, "link": "https://stackoverflow.com/questions/27829010/should-i-call-connect-and-close-for-every-sqlite3-transaction/27829115#27829115", "title": "Should I call connect() and close() for every Sqlite3 transaction?", "body": "<p>You can use the same connection repeatedly. You can also use the connection (and the cursor) as a context manager so that you don't need to explicitly call <code>close</code> on either.</p>\n\n<pre><code>def insert(conn, args):\n    with conn.cursor() as c:\n        c.execute(...)\n    conn.commit()\n\nwith connect('db.py') as conn:\n    insert(conn, ...)\n    insert(conn, ...)\n    insert(conn, ...)\n</code></pre>\n\n<p>There's no reason to close the connection to the database, and re-opening the connection each time can be expensive. (For example, you may need to establish a TCP session to connect to a remote database.)</p>\n"}], "owner": {"reputation": 7071, "user_id": 1830334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/db5b638e020c2d6b4c2c63df92ed150e?s=128&d=identicon&r=PG&f=1", "display_name": "gwg", "link": "https://stackoverflow.com/users/1830334/gwg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2708, "favorite_count": 2, "accepted_answer_id": 27829115, "answer_count": 2, "score": 2, "last_activity_date": 1420666797, "creation_date": 1420666315, "last_edit_date": 1420666797, "question_id": 27829010, "link": "https://stackoverflow.com/questions/27829010/should-i-call-connect-and-close-for-every-sqlite3-transaction", "title": "Should I call connect() and close() for every Sqlite3 transaction?", "body": "<p>I want to write a Python module to abstract away database transactions for my application. My question is whether I need to call <code>connect()</code> and <code>close()</code> for every transaction? In code:</p>\n\n<pre><code>import sqlite3\n\n# Can I put connect() here?\nconn = sqlite3.connect('db.py')\n\ndef insert(args):\n    # Or should I put it here?\n    conn = sqlite3.connect('db.py')\n    # Perform the transaction.\n    c = conn.cursor()\n    c.execute(''' insert args ''')\n    conn.commit()\n    # Do I close the connection here?\n    conn.close()\n\n# Or can I close the connection whenever the application restarts (ideally, very rarely)\nconn.close()\n</code></pre>\n\n<p>I have don't much experience with databases, so I'd appreciate an explanation for <em>why</em> one method is preferred over the other.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 4007, "user_id": 3161282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vkLhf.png?s=128&g=1", "display_name": "dursk", "link": "https://stackoverflow.com/users/3161282/dursk"}, "edited": false, "score": 0, "creation_date": 1420666457, "post_id": 27828999, "comment_id": 44064062, "body": "This is a very specific requirement, there isn&#39;t going to be a ready-made solution, you&#39;re going to have to loop through things."}], "answers": [{"tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": false, "score": 2, "last_activity_date": 1420703344, "last_edit_date": 1420703344, "creation_date": 1420666886, "answer_id": 27829140, "question_id": 27828999, "link": "https://stackoverflow.com/questions/27828999/remove-duplicates-from-nested-list-based-on-a-string-and-a-value/27829140#27829140", "title": "Remove duplicates from nested list based on a string and a value", "body": "<p>You can use <code>itertools.groupby</code> for grouping your elements by first index and <code>max</code> function with a proper <code>key</code> to select the max based on second element :</p>\n\n<pre><code>&gt;&gt;&gt; from itertools import groupby\n&gt;&gt;&gt; l=[['john', 14, 'USA'], ['john', 27, 'USA'], ['paul', 17, 'USA'], ['paul', 36, 'USA']]\n&gt;&gt;&gt; [max(g ,key=lambda x:x[1]) for _,g in groupby(sorted(l),lambda x: x[0])]\n[['john', 27, 'USA'], ['paul', 36, 'USA']]\n</code></pre>\n\n<p>Or as a more efficient way you can use <code>operators.itemgetter()</code> instead <code>lambda</code> :</p>\n\n<pre><code>&gt;&gt;&gt; from operators import itemgetter\n&gt;&gt;&gt; [max(g ,key=itemgetter(1)) for _,g in groupby(sorted(l),itemgetter(0))]\n[['john', 27, 'USA'], ['paul', 36, 'USA']]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 0, "last_activity_date": 1420673680, "last_edit_date": 1420673680, "creation_date": 1420666963, "answer_id": 27829161, "question_id": 27828999, "link": "https://stackoverflow.com/questions/27828999/remove-duplicates-from-nested-list-based-on-a-string-and-a-value/27829161#27829161", "title": "Remove duplicates from nested list based on a string and a value", "body": "<p>You can use an OrderedDict and replace the value if we find a sublist with the same name with a larger second subelement:</p>\n\n<pre><code>l = [['john', 14, 'USA'],['john', 27, 'USA'],['paul', 17, 'USA'],['paul', 36, 'USA']]\n\nfrom collections import OrderedDict\nd = OrderedDict()\n\nfor sub in l:\n    name = sub[0]\n    if name in d:\n        if sub[1] &gt; d[name][1]:\n            d[name] = sub\n    else:\n        d[name] = sub\nprint(list(d.values()))\n\n[['john', 27, 'USA'], ['paul', 36, 'USA']]\n</code></pre>\n\n<p>This is <code>O(n)</code> as it does not have to sort the list which is <code>n log n</code> so  this will scale better than any method using sorted.</p>\n\n<p>If order does not matter a normal dict will be fine:</p>\n\n<pre><code>d = {}\nfor sub in l:\n    name = sub[0]\n    if name in d:\n        if sub[1] &gt; d[name][1]:\n            d[name] = sub\n    else:\n        d[name] = sub\nprint(d.values())\n</code></pre>\n\n<p>If you were going to sort using <code>operator.itemgetter</code> would be more efficient:</p>\n\n<pre><code>from operator import  itemgetter    \nsorted(l,key=itemgetter(1))\n</code></pre>\n\n<p>If you wanted to sort the original list:</p>\n\n<pre><code>l.sort(key=itemgetter(1))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 984, "user_id": 2069749, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5861e5a979194471e8c3c60c269a70c0?s=128&d=identicon&r=PG", "display_name": "Prashant", "link": "https://stackoverflow.com/users/2069749/prashant"}, "is_accepted": false, "score": 1, "last_activity_date": 1420667915, "creation_date": 1420667915, "answer_id": 27829372, "question_id": 27828999, "link": "https://stackoverflow.com/questions/27828999/remove-duplicates-from-nested-list-based-on-a-string-and-a-value/27829372#27829372", "title": "Remove duplicates from nested list based on a string and a value", "body": "<p>I like Kasra's solution, but jsut to give another way to do it:</p>\n\n<pre><code>from collections import defaultdict\n\nl=[['john', 14, 'USA'], ['john', 27, 'USA'], ['paul', 17, 'USA'], ['paul', 36, 'USA']]\nkey=defaultdict(list)\nfor n,a,c in l:\n    key[(n,c)].append(a)\nf_list = [[k[0],max(la),k[1]] for k,la in key.iteritems()]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6737, "user_id": 747101, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/14902a23462e7e8570f477e03ae42f5b?s=128&d=identicon&r=PG", "display_name": "David Chan", "link": "https://stackoverflow.com/users/747101/david-chan"}, "is_accepted": false, "score": 0, "last_activity_date": 1420668557, "creation_date": 1420668557, "answer_id": 27829517, "question_id": 27828999, "link": "https://stackoverflow.com/questions/27828999/remove-duplicates-from-nested-list-based-on-a-string-and-a-value/27829517#27829517", "title": "Remove duplicates from nested list based on a string and a value", "body": "<p>trying my hand at incomprehensible level pythonic.</p>\n\n<p>using list and dictionary comprehensions i sort, merge, and reformat</p>\n\n<pre><code>a = [['john', 14, 'USA'],['john', 27, 'USA'],['paul', 17, 'USA'],['paul', 36, 'USA']]\n\nb = sorted(a, key=lambda x: x[0])\nc = { x[0] : x[1:len(x)] for x in b }\n\nresult = [[n] + c[n] for n in c]\n</code></pre>\n"}], "owner": {"reputation": 1533, "user_id": 2588860, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/66c08b30d390176ba34dc80f6f677e23?s=128&d=identicon&r=PG", "display_name": "rodrigocf", "link": "https://stackoverflow.com/users/2588860/rodrigocf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 1, "answer_count": 4, "score": 4, "last_activity_date": 1420703344, "creation_date": 1420666284, "question_id": 27828999, "link": "https://stackoverflow.com/questions/27828999/remove-duplicates-from-nested-list-based-on-a-string-and-a-value", "title": "Remove duplicates from nested list based on a string and a value", "body": "<p>I have a list like this:</p>\n\n<pre><code>[['john', 14, 'USA'],['john', 27, 'USA'],['paul', 17, 'USA'],['paul', 36, 'USA']]\n</code></pre>\n\n<p>And need to get as output:</p>\n\n<pre><code>[['john', 27, 'USA'],['paul', 36, 'USA']]\n</code></pre>\n\n<p>This means to remove duplicates based on position 0 but keep the ones with the higher value in position 1.</p>\n\n<p>I know how to remove duplicates on regular lists using <code>set()</code>, but how do I go about applying those 2 conditions? I was thinking something with a <code>for</code> but i might be very slow since the real lists I'll use are very large.</p>\n\n<p>I already tried to remove duplicates just by names but I'm puzzled about keeping the one with the higher value.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "email", "unicode", "gmail-imap"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4430594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a62207cfb863633473bdad2d9f08dba4?s=128&d=identicon&r=PG&f=1", "display_name": "user4430594", "link": "https://stackoverflow.com/users/4430594/user4430594"}, "edited": false, "score": 0, "creation_date": 1420713880, "post_id": 27829067, "comment_id": 44080415, "body": "Thank you! - and you are correct, the coding is mentioned in the header and it also says &quot;quoted printable&quot;!!  What function do I use to decode and continue to work with the text??"}, {"owner": {"reputation": 449289, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1, "user_id": 4430594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a62207cfb863633473bdad2d9f08dba4?s=128&d=identicon&r=PG&f=1", "display_name": "user4430594", "link": "https://stackoverflow.com/users/4430594/user4430594"}, "edited": false, "score": 0, "creation_date": 1420737667, "post_id": 27829067, "comment_id": 44095733, "body": "Python has <a href=\"https://docs.python.org/3.4/library/netdata.html\" rel=\"nofollow noreferrer\">Internet Data Handling</a> functionality, which includes <code>email</code>, <code>base64</code> and <code>quopri</code> libraries."}, {"owner": {"reputation": 1, "user_id": 4430594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a62207cfb863633473bdad2d9f08dba4?s=128&d=identicon&r=PG&f=1", "display_name": "user4430594", "link": "https://stackoverflow.com/users/4430594/user4430594"}, "edited": false, "score": 0, "creation_date": 1420739562, "post_id": 27829067, "comment_id": 44096735, "body": "I enternd the complete Code into the window above - please let me know how to make this work so that Umlaute can be decoded correctly"}, {"owner": {"reputation": 449289, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1, "user_id": 4430594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a62207cfb863633473bdad2d9f08dba4?s=128&d=identicon&r=PG&f=1", "display_name": "user4430594", "link": "https://stackoverflow.com/users/4430594/user4430594"}, "edited": false, "score": 0, "creation_date": 1420741302, "post_id": 27829067, "comment_id": 44097628, "body": "You are still not fetching the email header, only the email body. You need to fetch both, so you can check how the email is encoded before attempting to decode it."}], "tags": [], "owner": {"reputation": 449289, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1420741596, "last_edit_date": 1420741596, "creation_date": 1420666577, "answer_id": 27829067, "question_id": 27828997, "link": "https://stackoverflow.com/questions/27828997/trying-to-read-emails-from-gmail-using-pythonista/27829067#27829067", "title": "trying to read emails from gmail using pythonista", "body": "<p>The email's body text has been charset-encoded into bytes that are then encoded into 7bit ASCII using MIME's <a href=\"http://en.wikipedia.org/wiki/Quoted-printable\" rel=\"nofollow\"><code>quoted-printable</code></a> algorithm.  You will have to reverse the QP encoding to get the original bytes, and then you can convert them to a string using the email's charset (which is not <code>utf-8</code>, otherwise the QP encoded text would say <code>Beste Gr=C3=BC=C3=9Fe</code> instead. The charset is more likely <code>iso-8859-1</code>). The email headers will tell you the actual charset, and how the body was encoded (QP, base64, etc).  However, you are fetching only the email body, so you will need to also fetch the email headers as well, using <code>RFC822.HEADER</code>.</p>\n\n<p>Let's assume the email is encoded as <code>ISO-8859-1</code> using <code>quoted-printable</code> (fetch the email headers to verify). Try this more like this to decode it:</p>\n\n<pre><code>raw_body=data[0][1]\nraw_body=quopri.decodestring(raw_body)\nraw_body=raw_body.decode('ISO-8859-1')\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4430594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a62207cfb863633473bdad2d9f08dba4?s=128&d=identicon&r=PG&f=1", "display_name": "user4430594", "link": "https://stackoverflow.com/users/4430594/user4430594"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 607, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1420741596, "creation_date": 1420666273, "last_edit_date": 1420724517, "question_id": 27828997, "link": "https://stackoverflow.com/questions/27828997/trying-to-read-emails-from-gmail-using-pythonista", "title": "trying to read emails from gmail using pythonista", "body": "<p>I am fairly new to Python and am excited that I have access to gmail using imap4 </p>\n\n<p>Here the code I am using to access email:</p>\n\n<pre><code>from __future__ import print_function\nimport getpass\nimport imaplib\nimport console\nimport collections\nimport re\nimport email\nimport codecs\nimport quopri\n\nconsole.clear()\nmail = imaplib.IMAP4_SSL('imap.gmail.com',993)\nmy password = getpass.getpass(\"Password: \")\naddress = 'sch.e@gmail.com'\nprint('Which email address (TO) would you like to search: ',end='')\nEE = raw_input()\nSS = r\"(TO \"+\"\\\"\"+EE+\"\\\"\"+r\")\"\nmail.login(address, mypassword)\nmail.select(\"inbox\")  #select the box on gmail\nprint(\"Checking for e-mails TO \",EE)\ntyp, messageIDs = mail.search(None,'(SINCE \"01-Jan-2014\")',SS)\nMIDs=messageIDs[0].split()\nfor mailid in MIDs[::-1]:\n    resp, data = mail.fetch(mailid,'(RFC822)')\n    raw_body=data[0][1]\n    print(raw_body.decode('UTF-8','strict'))\n    print(quopri.encodestring(raw_body))\n    msg=email.message_from_string(raw_body)\n    print(msg)\n</code></pre>\n\n<p>Unfortunately none of the print statements contains correct Umlaute.</p>\n\n<p>(for example Beste Gr\u00fc\u00dfe)</p>\n\n<p>Could someone please give me a hint how to deal with encodings? It looks like Utf-8 encoded text except for the \"=' characters,</p>\n\n<p>Thank you!!\nErik</p>\n"}, {"tags": ["python", "python-3.x", "mocking"], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 893822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93991c1544c1a09dd75c6daa9fa360e0?s=128&d=identicon&r=PG", "display_name": "Dan737", "link": "https://stackoverflow.com/users/893822/dan737"}, "edited": false, "score": 0, "creation_date": 1421417369, "post_id": 27980206, "comment_id": 44362403, "body": "Thanks for mentioning weakref.WeakMethod. I was unaware of its existence!"}], "tags": [], "owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "is_accepted": true, "score": 3, "last_activity_date": 1421398386, "creation_date": 1421398386, "answer_id": 27980206, "question_id": 27828961, "link": "https://stackoverflow.com/questions/27828961/how-to-mock-bound-method-for-introspection/27980206#27980206", "title": "How to mock bound method for introspection", "body": "<p>First of all: if you are using python-3.4 why don't use <a href=\"https://docs.python.org/3/library/weakref.html#weakref.WeakMethod\" rel=\"nofollow\">WeakMethod from weakref</a> instead?</p>\n\n<p>Anyway mock framework is a powerful but sometimes can be an overkilled approach and force you to know too much of what you want to test: the side effect can be that your test become too much coupled to the implementation.</p>\n\n<p>In your case is better use real object to test it. A quite complete test of your WeakBoundMethod can be this:</p>\n\n<pre><code>class TestWeakMethod(unittest.TestCase):\n    def test_call(self):\n        class C():\n            def c(self,*args,**kwargs):\n                return (args,kwargs)\n        c=C()\n        wc = WeakBoundMethod(c.c)\n        self.assertEqual(((1,2,3),{\"a\":11,\"b\":\"33\"}), wc(1,2,3,a=11,b=\"33\"))\n\n    def test_just_bound_method(self):\n        c=object()\n        self.assertRaises(Exception, WeakBoundMethod, c)\n        self.assertRaises(Exception, WeakBoundMethod, object)\n        def f():\n            pass\n        self.assertRaises(Exception, WeakBoundMethod, f)\n\n    def test_is_really_weak(self):\n        class C():\n            DEAD=False\n            def c(self,*args,**kwargs):\n                return (args,kwargs)\n            def __del__(self):\n                C.DEAD = True\n        c=C()\n        wc = WeakBoundMethod(c.c)\n        del c\n\n        self.assertTrue(C.DEAD)\n        self.assertRaises(Exception, wc)\n</code></pre>\n\n<p>I hope is clear enough: I love <code>mock</code> framework and I'm using it quite intensely but you shouldn't use it if it is not hard to create real object that can sense and report what you want to test.</p>\n"}], "owner": {"reputation": 321, "user_id": 893822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93991c1544c1a09dd75c6daa9fa360e0?s=128&d=identicon&r=PG", "display_name": "Dan737", "link": "https://stackoverflow.com/users/893822/dan737"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1304, "favorite_count": 1, "accepted_answer_id": 27980206, "answer_count": 1, "score": 5, "last_activity_date": 1421398386, "creation_date": 1420666160, "last_edit_date": 1420823832, "question_id": 27828961, "link": "https://stackoverflow.com/questions/27828961/how-to-mock-bound-method-for-introspection", "title": "How to mock bound method for introspection", "body": "<p>I would like to test the following code</p>\n\n<pre><code>import weakref\n\nclass WeakBoundMethod:\n    \"\"\"\n    Wrapper around a method bound to a class instance. As opposed to bare\n    bound methods, it holds only a weak reference to the `self` object,\n    allowing it to be deleted.\n\n    This can be useful when implementing certain kinds of systems that\n    manage callback functions, such as an event manager.\n\n    \"\"\"\n    def __init__(self, meth):\n        \"\"\"\n        Initializes the class instance. It should be ensured that methods\n        passed through the `meth` parameter are always bound methods. Static\n        methods and free functions will produce an `AssertionError`.\n\n        \"\"\"\n        assert (hasattr(meth, '__func__') and hasattr(meth, '__self__')),\\\n               'Object is not a bound method.'\n\n        self._self = weakref.ref(meth.__self__)\n        self._func = meth.__func__\n\n    def __call__(self, *args, **kw):\n        \"\"\"\n        Calls the bound method and returns whatever object the method returns.\n        Any arguments passed to this will also be forwarded to the method.\n\n        In case an exception is raised by the bound method, it will be\n        caught and thrown again to the caller of this `WeakBoundMethod` object.\n\n        Calling this on objects that have been collected will result in\n        an `AssertionError` being raised.\n\n        \"\"\"        \n        assert self.alive(), 'Bound method called on deleted object.'\n\n        try:\n            return self._func(self._self(), *args, **kw)\n        except Exception as e:\n            raise e\n\n    def alive(self):\n        \"\"\"\n        Checks whether the `self` object the method is bound to has\n        been collected.\n\n        \"\"\"\n        return self._self() is not None\n</code></pre>\n\n<p>I thought about using mock from the standard library to check if the __call__ method calls the required arguments. The problem I face is that if I create a Mock object for a bound method, it does not have a __self__ or __func__ attribute. So I tried the following code:</p>\n\n<pre><code>class TestWeakBoundMEthod(unittest.TestCase):\n    def setUp(self):\n        self.bm = Mock(name='bound method')\n        self.bm.__self__ = Mock(name='self')\n        self.bm.__func__ = Mock(name='func')\n\n    def test_call(self):\n        wbm = events.WeakBoundMethod(self.bm)\n        wbm()\n        self.bm.__func__.assert_called_with(self.bm.__self__)\n        wbm(1, 2, 3)\n        self.bm.__func__.assert_called_with(self.bm.__self__, 1, 2, 3)\n</code></pre>\n\n<p>It works, but I feel like I'm not testing properly. I'm using too much knowledge on how the class WeakBoundMethod is working, instead of testing the actual result.</p>\n\n<p>Is there a better way to mock a bound method? Should I make a Dummy class with a dummy method instead?</p>\n"}, {"tags": ["python", "list", "sublist"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1420666006, "post_id": 27828877, "comment_id": 44063830, "body": "What is the expected output of <code>[[1,3],[1,2],[3,4]]</code>? The first sublist shares elements with both the second and third sublist, which should be merged?"}, {"owner": {"reputation": 107, "user_id": 4422547, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/74fa59d7d03b852c9b1e5cfb4936bf90?s=128&d=identicon&r=PG&f=1", "display_name": "James Harroid", "link": "https://stackoverflow.com/users/4422547/james-harroid"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1420666206, "post_id": 27828877, "comment_id": 44063926, "body": "@Cyber: sorry for being confusing,  <code>[[1,3],[1,2],[3,4]]</code> should give <code>[1,2,3,4]</code>"}, {"owner": {"reputation": 2193, "user_id": 3634936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae8318e36b2b2419c14722874087ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Eithos", "link": "https://stackoverflow.com/users/3634936/eithos"}, "edited": false, "score": 2, "creation_date": 1420666372, "post_id": 27828877, "comment_id": 44064014, "body": "Be wary of assigning names like <code>list</code> as this will override the built-in <code>list</code> type."}], "answers": [{"comments": [{"owner": {"reputation": 2193, "user_id": 3634936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae8318e36b2b2419c14722874087ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Eithos", "link": "https://stackoverflow.com/users/3634936/eithos"}, "edited": false, "score": 0, "creation_date": 1420671820, "post_id": 27829252, "comment_id": 44066447, "body": "This only flattens the list. It doesn&#39;t group them into new sequences the way the OP asked."}], "tags": [], "owner": {"reputation": 3609, "user_id": 3763102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2439148d94bddcda4415797c8f6afefa?s=128&d=identicon&r=PG", "display_name": "gipsy", "link": "https://stackoverflow.com/users/3763102/gipsy"}, "is_accepted": false, "score": 0, "last_activity_date": 1420670302, "last_edit_date": 1420670302, "creation_date": 1420667449, "answer_id": 27829252, "question_id": 27828877, "link": "https://stackoverflow.com/questions/27828877/how-to-merge-two-sublists-sharing-any-number-in-common2/27829252#27829252", "title": "how to merge two sublists sharing any number in common?(2)", "body": "<pre><code>    def merge(list_of_lists):\n        number_set = set()\n        for l in list_of_lists:\n            for item in l:\n                number_set.add(item)    \n        return sorted(number_set)  \n\n    if __name__ == '__main__':\n        list_of_lists = [[1,2,3],[3,4,5],[5,6],[6,7],[9,10],[10,11]]\n        merged = merge(list_of_lists)\n        print merged\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2193, "user_id": 3634936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae8318e36b2b2419c14722874087ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Eithos", "link": "https://stackoverflow.com/users/3634936/eithos"}, "edited": false, "score": 0, "creation_date": 1420672947, "post_id": 27830151, "comment_id": 44066869, "body": "This works for the example, but consider one more complicated like: <code>[[1,2,3],[3,4,5],[5,6],[6,7],[9,10],[10,11],[65,231,140], [13,14,51]]</code>"}, {"owner": {"reputation": 3123, "user_id": 3014930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/100002154102563/picture?type=large", "display_name": "f.rodrigues", "link": "https://stackoverflow.com/users/3014930/f-rodrigues"}, "reply_to_user": {"reputation": 2193, "user_id": 3634936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae8318e36b2b2419c14722874087ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Eithos", "link": "https://stackoverflow.com/users/3634936/eithos"}, "edited": false, "score": 0, "creation_date": 1420673033, "post_id": 27830151, "comment_id": 44066902, "body": "What should it return?"}, {"owner": {"reputation": 2193, "user_id": 3634936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae8318e36b2b2419c14722874087ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Eithos", "link": "https://stackoverflow.com/users/3634936/eithos"}, "edited": false, "score": 0, "creation_date": 1420673369, "post_id": 27830151, "comment_id": 44067006, "body": "This, I think? [[1, 2, 3, 4, 5, 6, 7], [9, 10, 11], [13, 14], [51], [65], [140], [231]]"}, {"owner": {"reputation": 3123, "user_id": 3014930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/100002154102563/picture?type=large", "display_name": "f.rodrigues", "link": "https://stackoverflow.com/users/3014930/f-rodrigues"}, "reply_to_user": {"reputation": 2193, "user_id": 3634936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae8318e36b2b2419c14722874087ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Eithos", "link": "https://stackoverflow.com/users/3634936/eithos"}, "edited": false, "score": 0, "creation_date": 1420678237, "post_id": 27830151, "comment_id": 44068426, "body": "Well, the question doesn&#39;t make that clear. It states that to make a common list current list must share at least one common number in the next list, thus <code>[1,2,3],[3,4,5]</code> becomes <code>[1,2,3,4,5]</code> because they share the number <code>3</code>. But it doesn&#39;t states that the numbers within the list must have a interval of 1, thus <code>[1,2,4]</code> becoming <code>[1,2],[4]</code>. Anyway, I see that you found the answer yourself, if you feel that it&#39;s needed to updated my answer I would gladly do it."}, {"owner": {"reputation": 2193, "user_id": 3634936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae8318e36b2b2419c14722874087ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Eithos", "link": "https://stackoverflow.com/users/3634936/eithos"}, "edited": false, "score": 0, "creation_date": 1420681944, "post_id": 27830151, "comment_id": 44069381, "body": "You&#39;re right. I made that assumption. There seem to be different ways of interpreting the intention of the OP. I may alter my answer later to reflect this; however... I apologize if it seems like I&#39;m on your case, but the OP confirmed earlier that this: [[1,3],[1,2],[3,4]] should result in [1,2,3,4]. While your algorithm does this properly, it does not handle the following: [[3,4], [1,2], [1,3]], instead giving the result `[[3, 4], [1, 2, 3]]. I see we both still have work to do... ;) (Edited: mixed up two lists)"}, {"owner": {"reputation": 107, "user_id": 4422547, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/74fa59d7d03b852c9b1e5cfb4936bf90?s=128&d=identicon&r=PG&f=1", "display_name": "James Harroid", "link": "https://stackoverflow.com/users/4422547/james-harroid"}, "reply_to_user": {"reputation": 2193, "user_id": 3634936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae8318e36b2b2419c14722874087ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Eithos", "link": "https://stackoverflow.com/users/3634936/eithos"}, "edited": false, "score": 0, "creation_date": 1420810978, "post_id": 27830151, "comment_id": 44125963, "body": "@Eithos: sorry for the late reply, <code>[[1,2,3],[3,4,5],[5,6],[6,7],[9,10],[10,11],[65,231,140], [13,14,51]</code> should return [[1,2,3,4,5,6,7],[9,10,11],[65,231,140]]"}, {"owner": {"reputation": 107, "user_id": 4422547, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/74fa59d7d03b852c9b1e5cfb4936bf90?s=128&d=identicon&r=PG&f=1", "display_name": "James Harroid", "link": "https://stackoverflow.com/users/4422547/james-harroid"}, "edited": false, "score": 0, "creation_date": 1420811116, "post_id": 27830151, "comment_id": 44126049, "body": "@f.rodrigues: sorry for the late reply, [[1,2,3],[3,4,5],[5,6],[6,7],[9,10],[10,11],[65,231,140], [13,14,51] should return [[1,2,3,4,5,6,7],[9,10,11],[65,231,140]] No one has given me the right answer yet, sorry for making a mistake"}, {"owner": {"reputation": 2193, "user_id": 3634936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae8318e36b2b2419c14722874087ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Eithos", "link": "https://stackoverflow.com/users/3634936/eithos"}, "reply_to_user": {"reputation": 107, "user_id": 4422547, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/74fa59d7d03b852c9b1e5cfb4936bf90?s=128&d=identicon&r=PG&f=1", "display_name": "James Harroid", "link": "https://stackoverflow.com/users/4422547/james-harroid"}, "edited": false, "score": 0, "creation_date": 1420842189, "post_id": 27830151, "comment_id": 44142860, "body": "@Na Lai: Plenty of people have given you an answer that works for your problem. It&#39;s not clear what more you&#39;re looking for. I misinterpreted your question at first, but my other answer (more like jonrsharpe&#39;s solution), does exactly what you&#39;ve asked. <b><i>Unless</i></b> what you&#39;re looking for (based on your example here: [[1,2,3,4,5,6,7],[9,10,11],[65,231,140]]) is a solution that also does not sort the resulting numbers: this <code>[65,231,140]</code> instead of <code>[65,140,231]</code>. The problem with this is that it wouldn&#39;t be clear when to sort;i.e should it be sorted only if it&#39;s been joined to another list"}, {"owner": {"reputation": 2193, "user_id": 3634936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae8318e36b2b2419c14722874087ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Eithos", "link": "https://stackoverflow.com/users/3634936/eithos"}, "edited": false, "score": 0, "creation_date": 1420842221, "post_id": 27830151, "comment_id": 44142873, "body": "... so that any isolated lists go unsorted? Finally, if this isn&#39;t it either: you should explain what else you&#39;re looking for, if it&#39;s further explanations on how the algorithms work, etc."}], "tags": [], "owner": {"reputation": 3123, "user_id": 3014930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/100002154102563/picture?type=large", "display_name": "f.rodrigues", "link": "https://stackoverflow.com/users/3014930/f-rodrigues"}, "is_accepted": false, "score": 1, "last_activity_date": 1420672188, "last_edit_date": 1420672188, "creation_date": 1420671324, "answer_id": 27830151, "question_id": 27828877, "link": "https://stackoverflow.com/questions/27828877/how-to-merge-two-sublists-sharing-any-number-in-common2/27830151#27830151", "title": "how to merge two sublists sharing any number in common?(2)", "body": "<pre><code>def merge_containing(input_list):\n    merged_list = [set(input_list[0])]\n    i = 0\n    for sub_list in input_list:\n        if not set(sub_list).intersection(set(merged_list[i])):  # 1\n            merged_list.append(set())  # 2\n            i += 1  # 2\n        merged_list[i].update(set(sub_list))  # 3\n\n    return [sorted(sub_list) for sub_list in merged_list]  # 4\n\nmylist=[[1,2,3],[3,4,5],[5,6],[6,7],[9,10],[10,11]]\nprint merge_containing(mylist)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[1, 2, 3, 4, 5, 6, 7], [9, 10, 11]]\n</code></pre>\n\n<p>How does it work:</p>\n\n<ol>\n<li>Check if the sub_list set shares any common member with the current\nindex set of the merged_list.</li>\n<li>If it <strong>doesn't</strong>, add a new empty set to the merged_list and increment\nthe index.</li>\n<li>Adds the sub_list set to the set at index in the merged_list.</li>\n<li>Converts from set to list and return</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 2193, "user_id": 3634936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae8318e36b2b2419c14722874087ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Eithos", "link": "https://stackoverflow.com/users/3634936/eithos"}, "is_accepted": false, "score": 0, "last_activity_date": 1420706498, "last_edit_date": 1420706498, "creation_date": 1420672909, "answer_id": 27830466, "question_id": 27828877, "link": "https://stackoverflow.com/questions/27828877/how-to-merge-two-sublists-sharing-any-number-in-common2/27830466#27830466", "title": "how to merge two sublists sharing any number in common?(2)", "body": "<p>Okay. This solution may be difficult to grasp at first, but it's quite logical and succint, IMO.</p>\n\n<p>The list comprehension basically has two layers. The outer layer will itself create separate lists\nfor each value of <code>i</code> (outer index) that satisfies the condition that the value it points to in the list is not equal to the value pointed to by the previous index + 1. So every numerical jump greater than one will create a new list within the outer list comprehension.</p>\n\n<p>The math around the second (inner list comprehension) condition is a bit more complicated to explain, but essentially the condition seeks to make sure that the inner list only begins counting from the point where the outer index is at, stopping to where once again there is a numerical jump greater than one.</p>\n\n<p>Assuming an even <em>more</em> complicated input:</p>\n\n<pre><code>listVar=[[1,2,3],[3,4,5],[5,6],[6,7],[9,10],[10,11],[65,231,140], [13,14,51]]\n\n# Flattens the lists into one sorted list with no duplicates.\nl = sorted(set([x for b in listVar for x in b]))\n\nlGen = xrange(len(l))\n\nprint [\n    [l[i2] for i2 in lGen if l[i2] + i == l[i] + i2] \n    for i in lGen if l[i] != l[i-1] + 1\n]\n\n&gt;&gt;&gt; [[1, 2, 3, 4, 5, 6, 7], [9, 10, 11], [13, 14], [51], [65], [140], [231]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3123, "user_id": 3014930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/100002154102563/picture?type=large", "display_name": "f.rodrigues", "link": "https://stackoverflow.com/users/3014930/f-rodrigues"}, "is_accepted": false, "score": 0, "last_activity_date": 1420681487, "creation_date": 1420681487, "answer_id": 27831706, "question_id": 27828877, "link": "https://stackoverflow.com/questions/27828877/how-to-merge-two-sublists-sharing-any-number-in-common2/27831706#27831706", "title": "how to merge two sublists sharing any number in common?(2)", "body": "<p>I'm posting this as a new answer since the OP already accepted my other.</p>\n\n<p>But as pointed out by @Eithos, </p>\n\n<p>the input: </p>\n\n<pre><code>[[3,4], [1,2], [1,3]] \n</code></pre>\n\n<p>should return </p>\n\n<pre><code>[[1,2,3,4]]\n</code></pre>\n\n<p>and the input </p>\n\n<pre><code>[[1,2,3],[3,4,5],[5,6],[6,7],[9,10],[10,11],[65,231,140], [13,14,51]]\n</code></pre>\n\n<p>should return </p>\n\n<pre><code>[[1, 2, 3, 4, 5, 6, 7], [9, 10, 11], [13, 14], [51], [65], [140], [231]]\n</code></pre>\n\n<p>Here's my attempt:</p>\n\n<pre><code>from itertools import chain\n\ndef merge_containing(input_list):\n    print \" input:\", input_list\n    chain_list = sorted(set(chain(*input_list))) # 1\n    print \" chain:\",chain_list\n    return_list = []\n    new_sub_list = []\n    for i, num in enumerate(chain_list):\n        try:\n            if chain_list[i + 1] == chain_list[i] + 1:  # 2\n                new_sub_list.append(num)\n            else:\n                new_sub_list.append(num)  # 3\n                return_list.append(new_sub_list)\n                new_sub_list = []\n        except IndexError:\n            new_sub_list.append(num)  # 3\n            return_list.append(new_sub_list)\n\n    print 'result:', return_list\n    return return_list\n\nmylist = [[3,4], [1,2], [1,3]]\nmerge_containing(mylist)\nprint\nmylist = [[1,2,3],[3,4,5],[5,6],[6,7],[9,10],[10,11],[65,231,140], [13,14,51]]\nmerge_containing(mylist)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code> input: [[3, 4], [1, 2], [1, 3]]\n chain: [1, 2, 3, 4]\nresult: [[1, 2, 3, 4]]\n\n input: [[1, 2, 3], [3, 4, 5], [5, 6], [6, 7], [9, 10], [10, 11], [65, 231, 140], [13, 14, 51]]\n chain: [1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 13, 14, 51, 65, 140, 231]\nresult: [[1, 2, 3, 4, 5, 6, 7], [9, 10, 11], [13, 14], [51], [65], [140], [231]]\n</code></pre>\n\n<p>Explanation: </p>\n\n<p>This one is a little hacky them the last one</p>\n\n<ol>\n<li>I use itertool.chain to flat all the lists and them I sort it.</li>\n<li>Then I check if the current number is within the range of 1 digit from the next</li>\n<li>If it is I store it in the new_sub_list, if not I store in the new_sub_list, then store new_sub_list in the return_list, and empty the new_sub_list.</li>\n</ol>\n\n<p>Note the <code>try/except Index Error</code>, it to avoid comparing the last item of the list with one that doesn't exist, </p>\n"}, {"tags": [], "owner": {"reputation": 2193, "user_id": 3634936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae8318e36b2b2419c14722874087ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Eithos", "link": "https://stackoverflow.com/users/3634936/eithos"}, "is_accepted": false, "score": 0, "last_activity_date": 1420706091, "last_edit_date": 1495542508, "creation_date": 1420704260, "answer_id": 27835496, "question_id": 27828877, "link": "https://stackoverflow.com/questions/27828877/how-to-merge-two-sublists-sharing-any-number-in-common2/27835496#27835496", "title": "how to merge two sublists sharing any number in common?(2)", "body": "<p>Well... I couldn't resist answering @f.rodrigues' last answer with one of my own.</p>\n\n<p>I have to be honest though, this final version was heavily influenced by jonrsharpe's solution (the code went through various revisions, each one more efficient until I realized his method was the only way to press the most amount of juice) over here: <a href=\"https://stackoverflow.com/questions/27802820/using-sublists-to-create-new-lists-where-numbers-dont-repeat\">Using sublists to create new lists where numbers don&#39;t repeat</a></p>\n\n<p>Which made me wonder... why are we answering the same question over and over again (from the very same person)? <strong><em>This</em></strong> question, <a href=\"https://stackoverflow.com/questions/27825639/how-to-merge-two-sublists-sharing-any-number-in-common\">how to merge two sublists sharing any number in common?</a> <strong><em>and</em></strong> the one with jonrsharpe's solution.</p>\n\n<p>Anyway, this joins lists in the way outlined in his first question, but, like the solutions he already received over there, this one also works just as well for solving this problem. </p>\n\n<pre><code>sequence = [[1, 4, 9], [2, 3, 6], [4, 13, 50], [13, 23, 29], [2, 3, 7]]\n\ndef combineSequences(seq):\n\n    for index, y in enumerate(seq):\n        while True:\n            for x in seq[index + 1:]:\n                if any(i in x for i in seq[index]):\n                    seq.remove(x)\n                    y.extend(x)\n                    break\n            else:\n                index += 1\n                break\n\n    return [sorted(set(l)) for l in seq]\n\nsequence = [[1, 4, 9], [2, 3, 6], [4, 13, 50], [13, 23, 29], [2, 3, 7]]\nprint combineSequences(sequence)\n\n&gt;&gt;&gt; [[1, 4, 9, 13, 23, 29, 50], [2, 3, 6, 7]] \n\nsequence = [[3, 4], [1, 2], [1, 3]]\nprint combineSequences(sequence)\n\n&gt;&gt;&gt; [[1, 2, 3, 4]]\n</code></pre>\n\n<p>This solution operates under a different assumption than the one I made earlier, just to clarify. This simply joins lists that have a common number. If the idea, however, was to only have them separated by intervals of 1, see my other answer.</p>\n\n<p>That's it!</p>\n"}], "owner": {"reputation": 107, "user_id": 4422547, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/74fa59d7d03b852c9b1e5cfb4936bf90?s=128&d=identicon&r=PG&f=1", "display_name": "James Harroid", "link": "https://stackoverflow.com/users/4422547/james-harroid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1420706498, "creation_date": 1420665800, "last_edit_date": 1495540256, "question_id": 27828877, "link": "https://stackoverflow.com/questions/27828877/how-to-merge-two-sublists-sharing-any-number-in-common2", "title": "how to merge two sublists sharing any number in common?(2)", "body": "<p>Given that:</p>\n\n<pre><code>list=[[1,2,3],[3,4,5],[5,6],[6,7],[9,10],[10,11]]\n</code></pre>\n\n<p>I have asked a similar question before, I have tried the code on\n<a href=\"https://stackoverflow.com/questions/27825639/how-to-merge-two-sublists-sharing-any-number-in-common\">how to merge two sublists sharing any number in common?</a>\nbut I am stuck in my code now.\nI want to merge the sublists that share a common number,\ne.g. <code>[1,2,3]</code> and <code>[3,4,5]</code> can merge to give [<code>1,2,3,4,5]</code> as they share a common number, <code>3</code>.\nIn <code>[[1,2,3],[3,4,5],[5,6]],</code> although <code>[1,2,3] and [3,4,5]</code> share a common number, <code>3</code>,\n<code>[3,4,5]</code> and <code>[5,6]</code> also share a common number, <code>5</code>, so I want all three of them to merge then gives\n<code>[1,2,3,4,5,6]</code>.</p>\n\n<p>So for list,\nmy expected result is:</p>\n\n<pre><code>[[1,2,3,4,5,6,7],[9,10,11]]\n</code></pre>\n\n<p>I have tried the following code but don't know what is wrong, can anyone help?</p>\n\n<pre><code>    s = map(set, list)\n    for i, si in enumerate(s):\n        for j, sj in enumerate(s):\n            if i != j and si &amp; sj:\n                s[i] = si | sj\n                s[j] = set()\n    list=[list(el) for el in s if el]\n    print list\n&gt;&gt;&gt;[[5, 6, 7], [9, 10, 11]]\n</code></pre>\n"}, {"tags": ["python", "regex", "utf-8"], "comments": [{"owner": {"reputation": 4692, "user_id": 4289293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d437940933d37d70f44e4091659c39?s=128&d=identicon&r=PG&f=1", "display_name": "rchang", "link": "https://stackoverflow.com/users/4289293/rchang"}, "edited": false, "score": 0, "creation_date": 1420665422, "post_id": 27828759, "comment_id": 44063542, "body": "Can you offer some sample input you&#39;ve tried which does not match your regular expression as expected?"}, {"owner": {"reputation": 29, "user_id": 4016750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba612949745a516aeffd5ec498bcc120?s=128&d=identicon&r=PG&f=1", "display_name": "jakub", "link": "https://stackoverflow.com/users/4016750/jakub"}, "reply_to_user": {"reputation": 4692, "user_id": 4289293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d437940933d37d70f44e4091659c39?s=128&d=identicon&r=PG&f=1", "display_name": "rchang", "link": "https://stackoverflow.com/users/4289293/rchang"}, "edited": false, "score": 0, "creation_date": 1420665480, "post_id": 27828759, "comment_id": 44063562, "body": "sure, i will update my post in around 5 minutes"}, {"owner": {"reputation": 976, "user_id": 3213313, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59ba364004f1e00b6fbf239d2891064d?s=128&d=identicon&r=PG&f=1", "display_name": "BarFooBar", "link": "https://stackoverflow.com/users/3213313/barfoobar"}, "edited": false, "score": 0, "creation_date": 1420667099, "post_id": 27828759, "comment_id": 44064353, "body": "Are you using Python 2 or 3?"}, {"owner": {"reputation": 29, "user_id": 4016750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba612949745a516aeffd5ec498bcc120?s=128&d=identicon&r=PG&f=1", "display_name": "jakub", "link": "https://stackoverflow.com/users/4016750/jakub"}, "edited": false, "score": 0, "creation_date": 1420669981, "post_id": 27828759, "comment_id": 44065680, "body": "It is Python 2, I will make changes in about 5 minutes"}], "owner": {"reputation": 29, "user_id": 4016750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba612949745a516aeffd5ec498bcc120?s=128&d=identicon&r=PG&f=1", "display_name": "jakub", "link": "https://stackoverflow.com/users/4016750/jakub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420670125, "creation_date": 1420665189, "last_edit_date": 1420670125, "question_id": 27828759, "link": "https://stackoverflow.com/questions/27828759/python-regexp-utf-8-chars-are-not-working-properly", "title": "Python regexp, utf-8 chars are not working properly", "body": "<p>We are working with my girlfriend on the following regexp thing. This is the entire code, but the only problem is not recognising utf-8 polish chars. Do you have any idea what should we do? I will update this post if given data are not sufficient.</p>\n\n<pre><code>#!/usr/bin/python2\n# -*- coding: utf-8 -*-\nimport re\nimport sys\nimport os\npattern= u\"^((([A-Z]|\u0106|\u0141|\u015a|\u0179|\u017b)([a-z]|\u0105|\u0107|\u0119|\u0142|\u0144|\u00f3|\u015b|\u017a|\u017c)*[^a]) ([A-Z]|\u0106|\u0141|\u015a|\u0179|\u017b)(([a-z]|\u0105|\u0107|\u0119|\u0142|\u0144|\u00f3|\u015b|\u017a|\u017c)+))\"\n\nfor line in sys.stdin:\n    #line=line.encode(\"utf-8\")\n\n    #line=unicode(line,\"utf-8\")\n    match = re.search(pattern, line,re.UNICODE)\n    if match:\n            print match.group(2)\n    else:\n            print 'no'\n</code></pre>\n\n<p>Problem is that lines with national chars, like: Pawe\u0142 are treated as they were not there.</p>\n"}, {"tags": ["python", "scipy"], "answers": [{"tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": true, "score": 2, "last_activity_date": 1420665484, "creation_date": 1420665484, "answer_id": 27828818, "question_id": 27828649, "link": "https://stackoverflow.com/questions/27828649/why-does-scipy-signal-cont2discrete-return-dt/27828818#27828818", "title": "Why does scipy.signal.cont2discrete return dt?", "body": "<p>The convention used for discrete time systems in <code>scipy.signal</code> is to represent a system using one of the following forms:</p>\n\n<pre><code>(num, den, dt)\n(zeros, poles, gain, dt)\n(A, B, C, D, dt)\n</code></pre>\n\n<p>(See, for example, the parameters accepted by <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.dlsim.html\" rel=\"nofollow\"><code>dlsim</code></a>, <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.dstep.html\" rel=\"nofollow\"><code>dstep</code></a>, etc.)\nThe return value of <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.cont2discrete.html\" rel=\"nofollow\"><code>cont2discrete</code></a> follows that convention.</p>\n"}], "owner": {"reputation": 501, "user_id": 1224602, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gfDXo.jpg?s=128&g=1", "display_name": "LGenzelis", "link": "https://stackoverflow.com/users/1224602/lgenzelis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 0, "accepted_answer_id": 27828818, "answer_count": 1, "score": 0, "last_activity_date": 1420665484, "creation_date": 1420664796, "question_id": 27828649, "link": "https://stackoverflow.com/questions/27828649/why-does-scipy-signal-cont2discrete-return-dt", "title": "Why does scipy.signal.cont2discrete return dt?", "body": "<p>The function <code>signal.cont2discrete</code> from the scipy module transforms a system defined in continuous time to its discrete version, using the time interval <code>dt</code>, which is enter as a parameter.\nThe thing is, the time interval is included among the things that the function returns. <strong>What's the sense in that?</strong> The documentation of the function says nothing about that, so I read the code of the function (using inspect.getsource), thinking that maybe the returned dt could be different from the entered dt.. But it can't. The function just take dt as a parameter and returns the exact same dt (amongst other useful returned things, of course). Anybody knows why that could be?</p>\n"}, {"tags": ["python", "django", "django-authentication", "django-testing", "django-1.7"], "answers": [{"tags": [], "owner": {"reputation": 4076, "user_id": 173630, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/N1fXR.jpg?s=128&g=1", "display_name": "nnyby", "link": "https://stackoverflow.com/users/173630/nnyby"}, "is_accepted": true, "score": 0, "last_activity_date": 1420669120, "creation_date": 1420669120, "answer_id": 27829650, "question_id": 27828597, "link": "https://stackoverflow.com/questions/27828597/logging-in-as-an-inactive-user-in-a-django-test/27829650#27829650", "title": "Logging in as an inactive user in a Django test", "body": "<p>I was able to solve this by setting the user to active right before doing the login:</p>\n\n<pre><code>class BasicTest(TestCase):\n    def setUp(self):\n        u = InactiveUserFactory()\n        u.set_password('test_pass')\n        u.save()\n        self.participant = ParticipantFactory(user=u)\n        self.u = self.participant.user\n\n        self.u.is_active = True\n        self.u.save()\n        login = self.client.login(username=self.u.username,\n                                  password='test_pass')\n        assert(login is True)\n\n        self.u.is_active = False\n        self.u.save()\n</code></pre>\n"}], "owner": {"reputation": 4076, "user_id": 173630, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/N1fXR.jpg?s=128&g=1", "display_name": "nnyby", "link": "https://stackoverflow.com/users/173630/nnyby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 27829650, "answer_count": 1, "score": 0, "last_activity_date": 1420669120, "creation_date": 1420664590, "last_edit_date": 1420665243, "question_id": 27828597, "link": "https://stackoverflow.com/questions/27828597/logging-in-as-an-inactive-user-in-a-django-test", "title": "Logging in as an inactive user in a Django test", "body": "<p>I have a <code>Participant</code> model that contains a <code>django.contrib.auth.model.User</code> with it's <code>is_active</code> property to <code>False</code>. That prevents these users from logging themselves in. An admin user has to do that for them, using some custom code I've written that uses <a href=\"https://docs.djangoproject.com/en/1.7/topics/auth/default/#django.contrib.auth.authenticate\" rel=\"nofollow\"><code>django.contrib.auth.authenticate()</code></a>.</p>\n\n<p>I need to be able to authenticate these users in my tests, </p>\n\n<pre><code>class ParticipantFactory(factory.django.DjangoModelFactory):\n    class Meta:\n        model = Participant\n\n    user = factory.SubFactory(InactiveUserFactory)\n    first_location = factory.SubFactory(LocationFactory)\n    location = factory.SubFactory(LocationFactory)\n    study_id = FuzzyText(prefix='7')\n\n\nclass BasicTest(TestCase):\n    def setUp(self):            \n        self.u = User.objects.create_user(\n            'test_user', 'test@example.com', 'test_pass')\n        self.u.is_active = False\n        self.u.save()\n        self.participant = ParticipantFactory(user=self.u)\n\n        # This works but has no effect on the tests\n        auth = authenticate(username=self.u.username, password='test_pass')\n        assert(auth is not None)\n\n        # This fails because the user is inactive\n        # login = self.client.login(username=self.u.username,\n        #                          password='test_pass')\n        # assert(login is True)\n</code></pre>\n\n<p>Does anyone have an idea how to authenticate this inactive user?</p>\n"}, {"tags": ["python", "http", "header", "request", "scrapy"], "answers": [{"tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 1, "last_activity_date": 1420665861, "creation_date": 1420665861, "answer_id": 27828893, "question_id": 27828477, "link": "https://stackoverflow.com/questions/27828477/when-crawling-with-scrapy-can-i-rely-on-requests-having-referer-headers/27828893#27828893", "title": "When crawling with Scrapy, can I rely on requests having referer headers?", "body": "<p>Yes, there is a <a href=\"http://doc.scrapy.org/en/0.22/topics/spider-middleware.html?highlight=referer#module-scrapy.contrib.spidermiddleware.referer\" rel=\"nofollow\"><code>RefererMiddleware</code></a> <em>enabled by default</em>:</p>\n\n<blockquote>\n  <p>Populates Request Referer header, based on the URL of the Response which generated it.</p>\n</blockquote>\n\n<p>FYI, here is <a href=\"https://github.com/scrapy/scrapy/blob/e748ca50ca3e83ac703e02538a27236fedd53a7d/scrapy/contrib/spidermiddleware/referer.py\" rel=\"nofollow\">the implementation</a>.</p>\n"}], "owner": {"reputation": 1453, "user_id": 2175846, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2a98ad5920c8e1c26c92f9310116a4d9?s=128&d=identicon&r=PG&f=1", "display_name": "false_azure", "link": "https://stackoverflow.com/users/2175846/false-azure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 27828893, "answer_count": 1, "score": 0, "last_activity_date": 1420665861, "creation_date": 1420664125, "question_id": 27828477, "link": "https://stackoverflow.com/questions/27828477/when-crawling-with-scrapy-can-i-rely-on-requests-having-referer-headers", "title": "When crawling with Scrapy, can I rely on requests having referer headers?", "body": "<p>I'm crawling a website and saving the url of the page that links to each page in 'Page' item fields, in order to reconstruct the site tree later. An easy way to do this is to access response.request.headers['referer'], which is the referer header for the request. Is this header actually reliable - i.e. will it always be there for requests generated by Scrapy, or is it possible for it not to be accurate / not exist for a request?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 812, "user_id": 2097159, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/25bbccaf149c63cdb3a6c5b27cb9c492?s=128&d=identicon&r=PG", "display_name": "user2097159", "link": "https://stackoverflow.com/users/2097159/user2097159"}, "edited": false, "score": 0, "creation_date": 1420663704, "post_id": 27828319, "comment_id": 44062654, "body": "It says up there it is in the test_web_events.py"}, {"owner": {"reputation": 4303, "user_id": 86698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/485fb175406faa7e6060f88fced7be79?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew_Lvov", "link": "https://stackoverflow.com/users/86698/andrew-lvov"}, "edited": false, "score": 1, "creation_date": 1420663903, "post_id": 27828319, "comment_id": 44062765, "body": "is there an <b>init</b>.py file in python_lib dir ?"}, {"owner": {"reputation": 4007, "user_id": 3161282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vkLhf.png?s=128&g=1", "display_name": "dursk", "link": "https://stackoverflow.com/users/3161282/dursk"}, "reply_to_user": {"reputation": 4303, "user_id": 86698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/485fb175406faa7e6060f88fced7be79?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew_Lvov", "link": "https://stackoverflow.com/users/86698/andrew-lvov"}, "edited": false, "score": 0, "creation_date": 1420663950, "post_id": 27828319, "comment_id": 44062791, "body": "@Andrew_Lvov That has nothing to do with it, he isn&#39;t trying to import <code>python_lib</code>"}, {"owner": {"reputation": 4303, "user_id": 86698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/485fb175406faa7e6060f88fced7be79?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew_Lvov", "link": "https://stackoverflow.com/users/86698/andrew-lvov"}, "reply_to_user": {"reputation": 4007, "user_id": 3161282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vkLhf.png?s=128&g=1", "display_name": "dursk", "link": "https://stackoverflow.com/users/3161282/dursk"}, "edited": false, "score": 0, "creation_date": 1420664065, "post_id": 27828319, "comment_id": 44062851, "body": "@mattm, you&#39;re right."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1420664804, "post_id": 27828319, "comment_id": 44063235, "body": "Andrew_Lvov meant a <code>__init__.py</code> file (it can be empty)."}], "answers": [{"comments": [{"owner": {"reputation": 4007, "user_id": 3161282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vkLhf.png?s=128&g=1", "display_name": "dursk", "link": "https://stackoverflow.com/users/3161282/dursk"}, "reply_to_user": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "edited": false, "score": 0, "creation_date": 1420666151, "post_id": 27828464, "comment_id": 44063894, "body": "<code>sys.path</code> is not the <code>PYTHONPATH</code>"}], "tags": [], "owner": {"reputation": 4007, "user_id": 3161282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vkLhf.png?s=128&g=1", "display_name": "dursk", "link": "https://stackoverflow.com/users/3161282/dursk"}, "is_accepted": false, "score": 3, "last_activity_date": 1420664080, "creation_date": 1420664080, "answer_id": 27828464, "question_id": 27828319, "link": "https://stackoverflow.com/questions/27828319/importerror-no-module-named-when-module-is-there/27828464#27828464", "title": "ImportError: No module named when module is there", "body": "<p>This is most likely because you haven't added <code>/python_lib/qe</code> to your <code>PYTHONPATH</code>.</p>\n\n<p>When you try to import a module, the interpreter will look for it only in a certain number of places, you cannot arbitrarily try to import a module from anywhere.</p>\n\n<p>The most common ways are to have a package installed via <code>pip</code>, to have the module sitting in the same directory as the <code>.py</code> file, or to have added the path to that module to the <code>PYTHONPATH</code>.</p>\n\n<p>See: <a href=\"https://docs.python.org/2/tutorial/modules.html#the-module-search-path\" rel=\"nofollow\">https://docs.python.org/2/tutorial/modules.html#the-module-search-path</a></p>\n\n<p>It seems like the latter case is most likely what you want to do. This is going to be dependent on your OS, but googling it should be straightforward.</p>\n"}, {"comments": [{"owner": {"reputation": 1406, "user_id": 1134445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f67e98e52709b4a815541838887e636?s=128&d=identicon&r=PG", "display_name": "dopstar", "link": "https://stackoverflow.com/users/1134445/dopstar"}, "reply_to_user": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "edited": false, "score": 2, "creation_date": 1420665335, "post_id": 27828626, "comment_id": 44063507, "body": "Then just fix the PYTHONPATH. by running <code>export PYTHONPATH=&#47;path&#47;to&#47;python_lib</code>."}], "tags": [], "owner": {"reputation": 1406, "user_id": 1134445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f67e98e52709b4a815541838887e636?s=128&d=identicon&r=PG", "display_name": "dopstar", "link": "https://stackoverflow.com/users/1134445/dopstar"}, "is_accepted": false, "score": 2, "last_activity_date": 1420664723, "creation_date": 1420664723, "answer_id": 27828626, "question_id": 27828319, "link": "https://stackoverflow.com/questions/27828319/importerror-no-module-named-when-module-is-there/27828626#27828626", "title": "ImportError: No module named when module is there", "body": "<p>Make sure you have <code>__init__.py</code> file in all your package folders so that you tructure looks like</p>\n\n<pre><code>/python_lib\n   Makefile\n   /qe\n      /tests\n         test_web_events.py\n      /util\n         __init__.py                &lt;------------ create this file\n         scratchstore.py\n      /trinity\n      __init__.py\n</code></pre>\n\n<p>and then the you <code>cd</code> to <code>python_lib</code> folder and run ``export PYTHONPATH=`pwd```</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4430624"}, "reply_to_user": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "edited": false, "score": 0, "creation_date": 1420665800, "post_id": 27828864, "comment_id": 44063725, "body": "All of them has this? Are you sure?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4430624"}, "reply_to_user": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "edited": false, "score": 0, "creation_date": 1420665877, "post_id": 27828864, "comment_id": 44063764, "body": "@Liondancer You are doing something wrong then. I worked with <code>modules</code> a lot, and this was the problem all the time. Make sure your all of scripts has this at the top."}, {"owner": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "edited": false, "score": 0, "creation_date": 1420666455, "post_id": 27828864, "comment_id": 44064060, "body": "I think it has to do with the python 2 and 3 paths =/ I usually use 2 but i pulled a project and its written in 3. I know I have 3 installed but im not sure how to switch back and forth"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4430624"}, "is_accepted": false, "score": -1, "last_activity_date": 1420666091, "last_edit_date": 1420666091, "creation_date": 1420665738, "answer_id": 27828864, "question_id": 27828319, "link": "https://stackoverflow.com/questions/27828319/importerror-no-module-named-when-module-is-there/27828864#27828864", "title": "ImportError: No module named when module is there", "body": "<p>Just <code>#!/usr/bin/env python</code> add this to your all scripts. Make sure it's on the top.Like;</p>\n\n<pre><code>#!/usr/bin/env python\nimport qe\n</code></pre>\n\n<p>I assume you <strong>added Python 3 to path</strong>, if you did, the only problem is this. You do <strong>not</strong> need <code>init.py</code> or sys.path or anything. This line already finding Python path automatically if you <strong>added</strong> Python 3 to path, if Python 2 still on the path then it's normal you got error.</p>\n"}, {"comments": [{"owner": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "edited": false, "score": 0, "creation_date": 1421086822, "post_id": 27838961, "comment_id": 44215885, "body": "Still getting the same error after I moved <code>&#47;tests</code> into <code>&#47;python_lib</code> =/ <a href=\"http://dpaste.com/39PBWDC\" rel=\"nofollow noreferrer\">dpaste.com/39PBWDC</a>"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "edited": false, "score": 0, "creation_date": 1421087119, "post_id": 27838961, "comment_id": 44216017, "body": "do you run it from <code>&#47;python_lib</code>? If you print <code>sys.path</code>; you should see this directory in it. Update you question and include the full traceback \u2013 you can&#39;t get the same error."}, {"owner": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "edited": false, "score": 0, "creation_date": 1421089502, "post_id": 27838961, "comment_id": 44217169, "body": "yes I did run it in <code>python_lib</code> question is updated!"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "edited": false, "score": 0, "creation_date": 1421093472, "post_id": 27838961, "comment_id": 44219289, "body": "@Liondancer: It is my mistake. I&#39;ve removed the broken <code>python tests&#47;test_web_events.py</code> command. It requires something like <a href=\"https://github.com/twisted/twisted/blob/trunk/bin/_preamble.py\" rel=\"nofollow noreferrer\"><code>_preamble.py</code></a> (in your case search for <code>qe</code> instead of <code>twisted</code>)."}, {"owner": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "edited": false, "score": 0, "creation_date": 1421095504, "post_id": 27838961, "comment_id": 44220309, "body": "Not really sure what this implies =/ <code>MTVL1289dd026:python_lib bli1$ python3 -m qe.tests.test_web_events.py  &#47;Library&#47;Frameworks&#47;Python.framework&#47;Versions&#47;3.4&#47;bin&#47;python&zwnj;&#8203;3: Error while finding spec for &#39;qe.tests.test_web_events.py&#39; (&lt;class &#39;AttributeError&#39;&gt;: &#39;module&#39; object has no attribute &#39;__path__&#39;)</code>"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "edited": false, "score": 0, "creation_date": 1421096213, "post_id": 27838961, "comment_id": 44220673, "body": "<code>__path__</code> is an attribute supported by Python packages. Make sure there are <code>__init__.py</code> files present to mark packages."}, {"owner": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "edited": false, "score": 0, "creation_date": 1421096687, "post_id": 27838961, "comment_id": 44220867, "body": "hmmm I have <code>__init__.py</code> in <code>&#47;python_lib</code> but I am getting that error still =/"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "edited": false, "score": 0, "creation_date": 1421096855, "post_id": 27838961, "comment_id": 44220932, "body": "you should not have <code>__init__.py</code> in python_lib. It is not a Python package. qe and qe.tests are packages."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "reply_to_user": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "edited": false, "score": 0, "creation_date": 1421133260, "post_id": 27838961, "comment_id": 44231817, "body": "@Liondancer: then <code>&#47;python_lib$ python -m qe.tests.test_web_events</code> should work unless there are circular imports in <code>__init__.py</code> (absolute imports such as <code>import qe.something</code> should be ok though)."}], "tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": true, "score": 3, "last_activity_date": 1421093245, "last_edit_date": 1421093245, "creation_date": 1420716202, "answer_id": 27838961, "question_id": 27828319, "link": "https://stackoverflow.com/questions/27828319/importerror-no-module-named-when-module-is-there/27838961#27838961", "title": "ImportError: No module named when module is there", "body": "<p>The issue is that <code>/python_lib</code> is not in Python path. The behavior is the same on both Python 2 and 3.</p>\n\n<p>In general, <a href=\"http://python-notes.curiousefficiency.org/en/latest/python_concepts/import_traps.html#the-double-import-trap\" rel=\"nofollow\">do not run scripts from within (inside) a Python package</a>, run them from the top-level directory instead:</p>\n\n<pre><code>/python_lib$ python -m qe.tests.test_web_events\n</code></pre>\n\n<p>Thus <code>/python_lib</code> is in Python path and <code>/python_lib/qe/tests</code> is not. It assumes that there is <code>tests/__init__.py</code> file.</p>\n\n<p>Do not modify <code>sys.path</code> manually. It may lead to subtle bugs related to importing modules. There are better alternatives e.g., if you don't want to run the scripts from <code>/python_lib</code>, just install the development version:</p>\n\n<pre><code>(your_virtualenv)/python_lib$ pip install -e .\n</code></pre>\n"}], "owner": {"reputation": 13318, "user_id": 1815710, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/dddf39759fed431cd1e8ecad2aa7dc49?s=128&d=identicon&r=PG", "display_name": "Liondancer", "link": "https://stackoverflow.com/users/1815710/liondancer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10243, "favorite_count": 1, "accepted_answer_id": 27838961, "answer_count": 4, "score": 2, "last_activity_date": 1421095134, "creation_date": 1420663507, "last_edit_date": 1421095134, "question_id": 27828319, "link": "https://stackoverflow.com/questions/27828319/importerror-no-module-named-when-module-is-there", "title": "ImportError: No module named when module is there", "body": "<p>I usually run python2 but I am playing with python3. Right now I am confused as to why I am getting this error.</p>\n\n<p>When I run the command <code>./test_web_events.py</code> in the <code>tests</code> directory, I get:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"./test_web_events.py\", line 21, in &lt;module&gt;\n    import qe.util.scratchstore as scratchstore\nImportError: No module named 'qe'\n</code></pre>\n\n<p>However my project structure has <code>qe</code> directory in it:</p>\n\n<pre><code>/python_lib\n   Makefile\n   /qe\n      __init__.py\n      /tests\n         __init__.py\n         test_web_events.py\n      /util\n         __init__.py\n         scratchstore.py\n      /trinity\n         __init__.py\n</code></pre>\n\n<p>I tried moving my <code>/tests</code> directory into <code>/python_lib</code> but I am still getting the same error:</p>\n\n<pre><code>MTVL1289dd026:python_lib bli1$ ls\nMakefile    qe      rundata     setup.sh    tests\nMTVL1289dd026:python_lib bli1$ python3 tests/test_web_events.py \nTraceback (most recent call last):\n  File \"tests/test_web_events.py\", line 21, in &lt;module&gt;\n    import qe.util.scratchstore as scratchstore\nImportError: No module named 'qe'\n</code></pre>\n\n<p>Here is my <code>sys.path</code> for python2</p>\n\n<pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; print sys.path\n['', '/Library/Python/2.7/site-packages/pip-1.5.6-py2.7.egg', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages', '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old', '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload', '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC', '/Library/Python/2.7/site-packages']\n</code></pre>\n\n<p><code>sys.path</code> for python3</p>\n\n<pre><code>&gt;&gt;&gt; print(sys.path)\n['', '/Library/Frameworks/Python.framework/Versions/3.4/lib/python34.zip', '/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4', '/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/plat-darwin', '/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/lib-dynload', '/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/site-packages']\n</code></pre>\n"}, {"tags": ["python", "replace", "translate"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 4, "creation_date": 1420663029, "post_id": 27828184, "comment_id": 44062293, "body": "What makes you think that <code>translate</code> can be used in that way?  Did you read <a href=\"https://docs.python.org/2/library/stdtypes.html#str.translate\" rel=\"nofollow noreferrer\">the documentation</a>?"}, {"owner": {"reputation": 492, "user_id": 3412518, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cYO05.jpg?s=128&g=1", "display_name": "jes516", "link": "https://stackoverflow.com/users/3412518/jes516"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1420663251, "post_id": 27828184, "comment_id": 44062397, "body": "are you thristy to downvote? it was used this way in a python cookbook so i wanted to see if it works."}, {"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 1, "creation_date": 1420663852, "post_id": 27828184, "comment_id": 44062740, "body": "@jes516: A Python cookbook with invalid code? Don&#39;t use that any longer."}], "answers": [{"comments": [{"owner": {"reputation": 492, "user_id": 3412518, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cYO05.jpg?s=128&g=1", "display_name": "jes516", "link": "https://stackoverflow.com/users/3412518/jes516"}, "edited": false, "score": 0, "creation_date": 1420663836, "post_id": 27828213, "comment_id": 44062723, "body": "im not sure what that means. is it the syntax that is incorrect or are the values inside the dictionary incorrect?"}, {"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "reply_to_user": {"reputation": 492, "user_id": 3412518, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cYO05.jpg?s=128&g=1", "display_name": "jes516", "link": "https://stackoverflow.com/users/3412518/jes516"}, "edited": false, "score": 1, "creation_date": 1420663981, "post_id": 27828213, "comment_id": 44062807, "body": "@jes516: To my eye, the documentation is very clear. It seems pretty obvious that  <i>a 256-character string</i> and <i>a dictionary</i> are not the same same thing."}, {"owner": {"reputation": 492, "user_id": 3412518, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cYO05.jpg?s=128&g=1", "display_name": "jes516", "link": "https://stackoverflow.com/users/3412518/jes516"}, "edited": false, "score": 0, "creation_date": 1420664207, "post_id": 27828213, "comment_id": 44062928, "body": "i understand that. i am confused because i am trying to &quot;correct&quot; the method of using translate() in my code, but i guess there is nothing to correct as it cannot be used with a dictionary, only string?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 492, "user_id": 3412518, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cYO05.jpg?s=128&g=1", "display_name": "jes516", "link": "https://stackoverflow.com/users/3412518/jes516"}, "edited": false, "score": 0, "creation_date": 1420665713, "post_id": 27828213, "comment_id": 44063679, "body": "@jes516: You can use <a href=\"https://docs.python.org/2/library/string.html?highlight=maketrans#string.maketrans\" rel=\"nofollow noreferrer\"><code>string.maketrans()</code></a> to make a proper translation table. Basically you pass it two equal length strings defining the character-to-character mapping you want. You can&#39;t use it to translate one word to another (which is a multi-character string substitution). Generally you&#39;ll probably need to use <a href=\"https://docs.python.org/2/library/re.html?highlight=sub#re.sub\" rel=\"nofollow noreferrer\"><code>re.sub()</code></a>."}, {"owner": {"reputation": 492, "user_id": 3412518, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cYO05.jpg?s=128&g=1", "display_name": "jes516", "link": "https://stackoverflow.com/users/3412518/jes516"}, "edited": false, "score": 0, "creation_date": 1420665875, "post_id": 27828213, "comment_id": 44063762, "body": "correct. ive used maketrans and re.sub but i saw an example of translate() being used with a dictionary in a book and i wanted to try it. thank you"}], "tags": [], "owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "is_accepted": false, "score": 0, "last_activity_date": 1420663082, "creation_date": 1420663082, "answer_id": 27828213, "question_id": 27828184, "link": "https://stackoverflow.com/questions/27828184/python-using-a-dictionary-for-translate-gives-me-typeerror-expected-a-charac/27828213#27828213", "title": "python using a dictionary for translate() gives me &#39;TypeError: expected a character buffer object&#39;", "body": "<p>From the <a href=\"https://docs.python.org/2/library/string.html#string.translate\" rel=\"nofollow\">documentation</a> (emphasis mine):</p>\n\n<blockquote>\n  <p><code>string.translate(s, table[, deletechars])</code></p>\n  \n  <p>Delete all characters from s that are in <code>deletechars</code> (if present), and then translate the characters using <code>table</code>, <strong>which must be a 256-character string giving the translation for each character value, indexed by its ordinal.</strong></p>\n</blockquote>\n\n<p>In your code, <code>remap</code> does not fulfil this requirement.</p>\n"}], "owner": {"reputation": 492, "user_id": 3412518, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/cYO05.jpg?s=128&g=1", "display_name": "jes516", "link": "https://stackoverflow.com/users/3412518/jes516"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1004, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1420663082, "creation_date": 1420662961, "question_id": 27828184, "link": "https://stackoverflow.com/questions/27828184/python-using-a-dictionary-for-translate-gives-me-typeerror-expected-a-charac", "title": "python using a dictionary for translate() gives me &#39;TypeError: expected a character buffer object&#39;", "body": "<p>why would translate() gives me <code>TypeError: expected a character buffer object</code> error when using a dictionary?</p>\n\n<pre><code>remap = {\n    'with': 'TEXT1',\n    'as': 'TEXT2',\n    'text_in': 'TEXT3'\n    }\n\ns = \"with open(loc_path + 'sample_text.txt', 'rb') as text_in:\"\n\nss = s.translate(remap)    \nprint ss\n</code></pre>\n\n<p>here is the error message:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\...\\REMAP1.py\", line 9, in &lt;module&gt;\n    ss = s.translate(remap)\nTypeError: expected a character buffer object\n[Finished in 0.1s with exit code 1]\n</code></pre>\n\n<p>using replace() works:</p>\n\n<pre><code>#ss = s.translate(remap)\n#print ss\n\ns = s.replace('with', 'TEXT1')\ns = s.replace('as', 'TEXT2')\ns = s.replace('text_in', 'TEXT3')\nprint s\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>TEXT1 open(loc_path + 'sample_text.txt', 'rb') TEXT2 TEXT3:\n[Finished in 0.1s]\n</code></pre>\n"}, {"tags": ["python", "scrapy", "web-crawler"], "comments": [{"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 1, "creation_date": 1420665694, "post_id": 27828017, "comment_id": 44063672, "body": "Setting <code>DEPTH_LIMIT</code> per domain might help here - see <a href=\"http://stackoverflow.com/questions/27805952/scrapy-set-depth-limit-per-allowed-domains/27810497#27810497\" title=\"scrapy set depth limit per allowed domains\">stackoverflow.com/questions/27805952/&hellip;</a>."}], "owner": {"reputation": 732, "user_id": 3076177, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f4aac734c854fc1520a91990af1b67bf?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Youk", "link": "https://stackoverflow.com/users/3076177/jason-youk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 321, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1420666166, "creation_date": 1420662273, "last_edit_date": 1420666166, "question_id": 27828017, "link": "https://stackoverflow.com/questions/27828017/scrapy-parse-outgoing-domain-but-do-not-follow-links", "title": "Scrapy: parse outgoing domain but do not follow links", "body": "<p>I have a set of domains I'm crawling with scrapy where I want to check if all outgoing links to 'www.ecommerce.com' are valid/invalid.  I'm using CrawlSpider, but I do not want CrawlSpider to follow the links of the 'www.ecommerce.com', only parse the http status.\nHow would I get scrapy to parse the outgoing link, but not follow the links on the outgoing link URL?</p>\n\n<pre><code>from scrapy.selector import Selector\nfrom scrapy.contrib.spiders import CrawlSpider, Rule\nfrom scrapy.contrib.linkextractors import LinkExtractor\nfrom CAP.items import Website\nfrom scrapy.mail import MailSender\n\nfrom scrapy.http import Request\nfrom selenium import webdriver\nimport time\nfrom scrapy.http import TextResponse\n\nclass HomeSpider(CrawlSpider):\n    name = \"capseleniums\"\n    allowed_domains = [\"www.ecommerce.com\", \"learn.ecommerce.com\", \"health.ecommerce.com\", \"wm15.ecommerce.com\", \"wm13.ecommerce.com\", \"wm12.ecommerce.com\" ]\n    handle_httpstatus_list = [500, 502, 503, 504, 400, 408, 404]\n\n    def start_requests(self):\n        start_urls = reversed( [\n            'http://wm12.ecommerce.com/health-wellness-center/',\n            'http://wm13.ecommerce.com/Cook/',\n            'http://wm15.ecommerce.com/electronics-resource-center/',\n            'http://health.ecommerce.com/vitamins-wellness-center/',\n            'http://learn.ecommerce.com/Tips-Ideas/',\n            ] )\n        return [ Request(url = start_url) for start_url in start_urls ]\n\n    def trim(link_text):\n        return link_text.strip(' \\t\\n\\r')\n\n    rules = (\n        Rule(\n            LinkExtractor(\n                allow=(),\n                deny=(),\n                process_value=trim,\n                restrict_xpaths=(\"//*[not(@class='GlobalFooter')]\",\"//*[not(@id='footer_links')]\")\n                ),\n                callback=\"parse_items\",\n                follow=False,),\n    )\n\n    def __init__(self, category=None, *args, **kwargs):\n        self.driver = webdriver.PhantomJS(service_args=['--load-images=no'])\n        super(HomeSpider, self).__init__(*args, **kwargs)\n\n    def __del__(self):\n       self.driver.stop()\n\n    def parse_items(self, response):\n        hxs = self.driver\n        hxs.get(response.url)\n        time.sleep(1)\n        body = hxs.page_source\n        sel_response = TextResponse(url=response.url, body=body, encoding = 'utf-8')\n        hxs = Selector(sel_response)\n        sites = hxs.xpath('//html')\n        items = []\n\n        if response.status == 404:\n            for site in sites:\n                item = Website()\n                item['url'] = response.meta.get('redirect_urls', [response.url])[0]\n                item['referer'] = response.request.headers.get('Referer')\n                item['status'] = response.status\n                items.append(item)\n\n            return items\n\n        if hxs.xpath('/html/head/title/text()[contains(.,\"invalid\")]'):\n            for site in sites:\n                item = Website()\n                item['url'] = response.meta.get('redirect_urls', [response.url])[0]\n                item['referer'] = response.request.headers.get('Referer')\n                item['status'] = response.status\n                items.append(item)\n\n            return items\n\n        elif hxs.xpath('//head/link[@rel=\"canonical\"]/@href[contains(.,\"invalid-category-id\")]'):\n            for site in sites:\n                item = Website()\n                item['url'] = response.meta.get('redirect_urls', [response.url])[0]\n                item['referer'] = response.request.headers.get('Referer')\n                item['status'] = response.status\n                items.append(item)\n\n            return items\n\n        else:\n            if hxs.xpath('//*[@class=\"result-summary-container\"]/text()[contains(.,\"Showing 0 of\")]'):\n                for site in sites:\n                    item = Website()\n                    item['url'] = response.meta.get('redirect_urls', [response.url])[0]\n                    item['referer'] = response.request.headers.get('Referer')\n                    item['status'] = response.status\n                    items.append(item)\n\n                return items\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "selenium", "selenium-webdriver"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4297732"}, "edited": false, "score": 0, "creation_date": 1420662477, "post_id": 27827982, "comment_id": 44061982, "body": "link to HTML :   <a href=\"http://jsfiddle.net/gkfqa644/2/\" rel=\"nofollow noreferrer\">jsfiddle.net/gkfqa644/2</a>"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1420665752, "post_id": 27827982, "comment_id": 44063700, "body": "None of your td&#39;s matches your description, i.e. none of the tds looks like <code>0 | 20</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4297732"}, "edited": false, "score": 0, "creation_date": 1420667333, "post_id": 27828679, "comment_id": 44064470, "body": "From your code i understand that using regular expression will help proceed further, thanks for guiding me in the right direction. It did not occur to me that python regular expressions would have helped! Appreciate your help!  I have marked your answer correct, am a newbie here and do not have privileges to upvote yet!"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1420671175, "post_id": 27828679, "comment_id": 44066188, "body": "@KK16, No worries.  I posted another example, which I think more closely matches what you are trying to do."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4297732"}, "edited": false, "score": 0, "creation_date": 1420675384, "post_id": 27828679, "comment_id": 44067603, "body": "will go through the second example too and see which one will help achieve my task better. Thanks for the prompt response!"}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 0, "last_activity_date": 1420687488, "last_edit_date": 1420687488, "creation_date": 1420664875, "answer_id": 27828679, "question_id": 27827982, "link": "https://stackoverflow.com/questions/27827982/how-to-dynamically-read-a-specific-cell-value-in-a-table-using-selenium-and-pyth/27828679#27828679", "title": "how to dynamically read a specific cell value in a table using selenium and python", "body": "<blockquote>\n  <p>I do not want to hard-code the xpath of the column that has value \"0\" </p>\n</blockquote>\n\n<pre><code>from selenium import webdriver\nimport re\n\ndriver = webdriver.PhantomJS()\ndriver.set_window_size(1120, 550) #For bug\ndriver.get(\"http://localhost:8000\")\n\npattern = r\"\"\"\n    \\s*         #Match whitespace, 0 or more times, followed by...\n    (\\d+)       #a digit, one or more times, captured, followed by\n    \\s*         #whitespace, 0 or more times, followed by...\n    [|]         #vertical bar, followed by...\n    \\s*         #whitespace, 0 or more times, followed by...\n    \\d+         #a digit, one or more times\n\"\"\"\nregex = re.compile(pattern, re.X)\n\ntable = driver.find_element_by_id('ambassadors-for-assignment')\ntrs = table.find_elements_by_tag_name('tr')\n\nfor tr in trs:\n    tds = tr.find_elements_by_tag_name('td')\n\n    for td in tds:\n        match_obj = re.search(regex, text)\n\n        if match_obj and match_obj.group(1) == '0':\n            success_button = tr.find_element_by_css_selector('button.btn-success')\n            print success_button.get_attribute('type')\n            success_button.click()\n</code></pre>\n\n<p>re.match(pattern, string, flags=0)<br>\nIf zero or more characters at the beginning of string match the regular expression pattern, return a corresponding match object. Return None if the string does not match the pattern; note that this is different from a zero-length match.</p>\n\n<p>Note that even in MULTILINE mode, re.match() will only match at the beginning of the string and not at the beginning of each line.</p>\n\n<p>If you want to locate a match anywhere in string, use search() instead (see also search() vs. match()).</p>\n\n<p><a href=\"https://docs.python.org/3/library/re.html#module-re\" rel=\"nofollow\">https://docs.python.org/3/library/re.html#module-re</a></p>\n\n<p><strong>======</strong></p>\n\n<p>Here it is with xpath, and I think it better matches what you are trying to do, i.e. given a column, look down the rows for the value 0:</p>\n\n<pre><code>from selenium import webdriver\nimport re\n\ndriver = webdriver.PhantomJS()\ndriver.set_window_size(1120, 550) #For bug\ndriver.get(\"http://localhost:8000\")\n\npattern = r\"\"\" \n    \\s*         #Match whitespace, 0 or more times, followed by...\n    (\\d+)       #a digit, one or more times, captured, followed by\n    \\s*         #whitespace, 0 or more times, followed by...\n    [|]         #vertical bar, followed by...\n    \\s*         #whitespace, 0 or more times, followed by...\n    \\d+         #a digit, one or more times\n\"\"\"\nregex = re.compile(pattern, re.X)\n\ntrs = driver.find_elements_by_xpath('//table[@id=\"ambassadors-for-assignment\"]/tbody/tr')\ntarget_columns = [3, 4]\n\nfor target_column in target_columns:\n    for tr in trs:\n        target_column_xpath = './td[{}]'.format(target_column)  #VARY COLUMN HERE ***\n        td = tr.find_element_by_xpath(target_column_xpath)\n        match_obj = re.match(regex, td.text)\n\n        if match_obj and match_obj.group(1) == '0':\n            button_xpath = './/button[contains(concat(\" \", normalize-space(@class), \" \"), \" btn-success \")]' \n            success_button = tr.find_element_by_xpath(button_xpath)\n            #success_button.click()\n\n            print \"column {}:\".format(target_column)\n            print match_obj.group(0)\n            print success_button.get_attribute('class')\n            print\n</code></pre>\n\n<p>The output will look like the following, depending on what text you are trying to match with the regex:</p>\n\n<pre><code>column 3:\n0 | 5\nbtn btn-success\n\ncolumn 4:\n0 | 61\nbtn btn-success\n</code></pre>\n\n<p>But in my opinion, having to use the following in an xpath:</p>\n\n<pre><code>'[contains(concat(\" \", normalize-space(@class), \" \"), \" btn-success \")]'\n</code></pre>\n\n<p>to match a class, means that using xpath is NOT the way to do it.  The python method:</p>\n\n<pre><code>find_element_by_csss_selector('button.btn-success')\n</code></pre>\n\n<p>...will do the same thing more succinctly and clearly.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4297732"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2826, "favorite_count": 1, "accepted_answer_id": 27828679, "answer_count": 1, "score": 0, "last_activity_date": 1420687488, "creation_date": 1420662161, "question_id": 27827982, "link": "https://stackoverflow.com/questions/27827982/how-to-dynamically-read-a-specific-cell-value-in-a-table-using-selenium-and-pyth", "title": "how to dynamically read a specific cell value in a table using selenium and python", "body": "<p>I am working on a automation script [using selenium and python] that should do the following</p>\n\n<ol>\n<li>Read the table rows and columns dynamically, look for column[this is constant) which has 0 value set in any of the rows and if found click the [assign/unassign] button column in the same row</li>\n</ol>\n\n<p>I do not want to hard-code the xpath of the column that has value \"0\" rather look for it dynamically and proceed .</p>\n\n<p>Below code is what i have written </p>\n\n<pre><code>trows = table1.find_elements_by_xpath(\"//table[@id='ambassadors-for-assignment']/tbody/tr\")\nrow_count = len(trows)\ntcols = trows.find_elements_by_xpath(\"//table[@id='ambassadors-for-assignment']/tbody/tr/td\")\ncol_count = len(tcols)\nfirst_part = \"//table[@id=ambassadors-for-assignment']/tbody/tr[\"\nsecond_part = \"]/td[\"\nthird_part = \"]\"\nfor i in range(1, len(row_count)):\n    for j in range(1, len(col_count)):\n          final_xpath = first_part+i+second_part+j+third_part      \n</code></pre>\n\n<p>HTML file structure</p>\n\n<pre><code>&lt;tbody&gt;\n  &lt;tr&gt;\n    &lt;td&gt; james &lt;/td&gt;\n    &lt;td&gt; watson &lt;/td&gt;\n    &lt;td&gt; 10 | 5 &lt;/td&gt;\n    &lt;td&gt;\n      &lt;div class=\"btn-group\" role=\"group\"&gt;\n         &lt;button class=\"btn btn-success\" type=\"button\"&gt;\n             &lt;i class=\"fa fa-plus\"&gt;&lt;/i&gt;\n         &lt;/button&gt;\n        &lt;button class=\"btn btn-danger\" type=\"button\"&gt;\n            &lt;i class=\"fa fa-minus\"&gt;&lt;/i&gt;\n        &lt;/button&gt;\n      &lt;/div&gt;\n    &lt;/td&gt;\n  &lt;/tr&gt;\n....\n</code></pre>\n\n<p>My HTML file has n number of rows with columns as given above. As i mentioned , i would like to read the third column value[i.e 10 | 5] to see whether or not its 0 [consider only the first item in the third column] and then click the button[btn btn-success] in the next column.</p>\n\n<p>Any pointers to proceed further would be appreciated!</p>\n\n<p>I will provide the link to actual HTML file in the comments section </p>\n"}, {"tags": ["python", "multithreading"], "comments": [{"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 1, "creation_date": 1420662645, "post_id": 27827976, "comment_id": 44062073, "body": "<a href=\"https://docs.python.org/2/library/time.html#time.sleep\" rel=\"nofollow noreferrer\"><code>time.sleep()</code></a>?"}, {"owner": {"reputation": 47, "user_id": 4364654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8eb1c03ee782fe8f411ebbef77f8209f?s=128&d=identicon&r=PG&f=1", "display_name": "James Bryant", "link": "https://stackoverflow.com/users/4364654/james-bryant"}, "reply_to_user": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 0, "creation_date": 1420663198, "post_id": 27827976, "comment_id": 44062373, "body": "@NPE i tried that. it doesn&#39;t stop or pause it."}], "answers": [{"tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": true, "score": 0, "last_activity_date": 1420663206, "creation_date": 1420663206, "answer_id": 27828243, "question_id": 27827976, "link": "https://stackoverflow.com/questions/27827976/pause-threading-timer-for-1hr/27828243#27828243", "title": "pause threading.Timer for 1hr", "body": "<p>The simplest approach is probably to not restart the timer until you know how long you want to wait before calling your function again:</p>\n\n<pre><code>def examplebdc():\n    wordv = 'asdfsdfm'\n\n    if any(\"m\" in s for s in wordv):\n        print(\"new post\")\n        threading.Timer(60*60, examplebdc).start()\n    else:\n        threading.Timer(50, examplebdc).start()\n\nexamplebdc()\n</code></pre>\n\n<p>If that's not possible for some reason, you can change how you create and start your timer so that you can reference it later and cancel it:</p>\n\n<pre><code>def examplebdc():\n    # lets assume we need to set up the 50 second timer immediately\n    timer = threading.Timer(50, examplebdc)   # save a reference to the Timer object\n    timer.start()                             # start it with a separate statement\n\n    wordv = 'asdfsdfm'\n\n    if any(\"m\" in s for s in wordv):\n        print(\"new post\")\n        timer.cancel()                        # cancel the previous timer\n        threading.Timer(60*60, examplebdc).start()   # maybe save this timer too?\n\nexamplebdc()\n</code></pre>\n\n<p>In your single function this is easy, you can just use a variable. If your timer was being started somewhere else, you might need to use one or more <code>global</code> statements or some other more complex logic to pass the Timer reference around.</p>\n"}], "owner": {"reputation": 47, "user_id": 4364654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8eb1c03ee782fe8f411ebbef77f8209f?s=128&d=identicon&r=PG&f=1", "display_name": "James Bryant", "link": "https://stackoverflow.com/users/4364654/james-bryant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 27828243, "answer_count": 1, "score": 1, "last_activity_date": 1420663206, "creation_date": 1420662114, "question_id": 27827976, "link": "https://stackoverflow.com/questions/27827976/pause-threading-timer-for-1hr", "title": "pause threading.Timer for 1hr", "body": "<p>What I am doing is checking for new content on a website. The threading.Timer checks every 50 seconds for new content. If found new content i want it to pause the function for 1hr.</p>\n\n<pre><code>def examplebdc ():\nthreading.Timer(50.00, examplebdc).start ();\n#content id\nwordv = 'asdfsdfm'\n\nif any(\"m\" in s for s in wordv):\n    print(\"new post\")\n    #pause this threading.Timer (or function) for 1hr. \nexamplebdc();\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1420666544, "post_id": 27827910, "comment_id": 44064097, "body": "Plain <code>import</code>ing only defines the module&#39;s name in the local namespace. You typically use it to qualify access the contents of the module, i.e. <code>bill_machine = billPayer.BillPayer()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 812, "user_id": 2097159, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/25bbccaf149c63cdb3a6c5b27cb9c492?s=128&d=identicon&r=PG", "display_name": "user2097159", "link": "https://stackoverflow.com/users/2097159/user2097159"}, "is_accepted": true, "score": 6, "last_activity_date": 1420661892, "creation_date": 1420661892, "answer_id": 27827918, "question_id": 27827910, "link": "https://stackoverflow.com/questions/27827910/nameerror-name-billpayer-is-not-defined/27827918#27827918", "title": "NameError: name &#39;BillPayer&#39; is not defined", "body": "<p>Two ways to go about it either </p>\n\n<p><code>billPayer.BillPayer()</code> </p>\n\n<p>or </p>\n\n<p><code>from billPayer import BillPayer</code></p>\n"}, {"tags": [], "owner": {"reputation": 4303, "user_id": 86698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/485fb175406faa7e6060f88fced7be79?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew_Lvov", "link": "https://stackoverflow.com/users/86698/andrew-lvov"}, "is_accepted": false, "score": 3, "last_activity_date": 1420661899, "creation_date": 1420661899, "answer_id": 27827921, "question_id": 27827910, "link": "https://stackoverflow.com/questions/27827910/nameerror-name-billpayer-is-not-defined/27827921#27827921", "title": "NameError: name &#39;BillPayer&#39; is not defined", "body": "<pre><code>bill_machine = billPayer.BillPayer()\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 4151627, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KUjovC5JVK0/AAAAAAAAAAI/AAAAAAAADtM/Isjb6qQjBtk/photo.jpg?sz=128", "display_name": "Matthew Canova", "link": "https://stackoverflow.com/users/4151627/matthew-canova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 27827918, "answer_count": 2, "score": 1, "last_activity_date": 1420661899, "creation_date": 1420661832, "question_id": 27827910, "link": "https://stackoverflow.com/questions/27827910/nameerror-name-billpayer-is-not-defined", "title": "NameError: name &#39;BillPayer&#39; is not defined", "body": "<p>I am getting the above error when trying to run my code. I believe it suffers from being a broad error, as all my googling has not brought me to anything that relates to my actual situation. I have organized the directory like this:</p>\n\n<pre><code>Project (BillPay)\n    bill.py (contains Class Bill())\n    billPayer.py (contains Class BillPayer())\n    main.py\n    __init__.py\n</code></pre>\n\n<p>I have left my <code>__init__.py</code> empty, which I understand to be ok. </p>\n\n<p>In main.py, I have:</p>\n\n<pre><code>#!/usr/bin/python\n\nimport sys\nsys.path.insert(0, \"/home/matt/Documents/Code/BillPay\")\nimport bill\nimport billPayer\n\nbill_machine = BillPayer()\nbill_machine.addBill(Google, 12345, 100.00, www.google.com)\nbill_machine.printBills()\n</code></pre>\n\n<p>If I have imported the module billPayer (which contains the BillPayer class), then I should be able create an instance of that class, right? What am I missing?</p>\n"}, {"tags": ["python", "image", "antialiasing", "pyglet"], "owner": {"reputation": 5883, "user_id": 948655, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4abf5c53b3048abbbc5b4a3d398ed86e?s=128&d=identicon&r=PG", "display_name": "Ray", "link": "https://stackoverflow.com/users/948655/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1420663728, "creation_date": 1420661757, "last_edit_date": 1420663728, "question_id": 27827890, "link": "https://stackoverflow.com/questions/27827890/displaying-images-without-antialiasing-in-pyglet", "title": "Displaying images without antialiasing in pyglet", "body": "<p>When I display an image (<em>say a bitmap</em>) using pyglet (<em>by putting the image in a sprite and then drawing the sprite</em>), it seems to me that the image is automatically antialiased. At least when I enlarge it (say by a scale factor of 2), the result is displayed antialiased. (<em>Note that a sprite can be very easily scaled by modifying the</em> <code>pyglet.sprite.Sprite.scale</code> <em>property.</em>) You see, the behaviour I want is for it to display the enlarged image honestly, without antialiasing. This should be possible if the scale factor is a positive integer right? So for example, when I enlarge the original image by 2, I want the enlarged image to be displayed as if each pixel is now 4 pixels big, but <strong>without antialiasing</strong>. How do I do that?</p>\n"}, {"tags": ["python", "arrays", "bit", "bitarray"], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 3599280, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/014w1.png?s=128&g=1", "display_name": "sstevan", "link": "https://stackoverflow.com/users/3599280/sstevan"}, "edited": false, "score": 0, "creation_date": 1420663536, "post_id": 27827906, "comment_id": 44062548, "body": "Thanks! But how to get bits6_4 as 3 bit value, or bit7 as signel bit in Python?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 427, "user_id": 3599280, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/014w1.png?s=128&g=1", "display_name": "sstevan", "link": "https://stackoverflow.com/users/3599280/sstevan"}, "edited": false, "score": 0, "creation_date": 1420666136, "post_id": 27827906, "comment_id": 44063886, "body": "@user3599280: That can be done using the logical reverse stuff -- the <code>ord()</code> function with bit-masks applied using the <code>&amp;</code> operator and shifting in the opposite direction."}, {"owner": {"reputation": 427, "user_id": 3599280, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/014w1.png?s=128&g=1", "display_name": "sstevan", "link": "https://stackoverflow.com/users/3599280/sstevan"}, "edited": false, "score": 0, "creation_date": 1420666887, "post_id": 27827906, "comment_id": 44064245, "body": "Thanks. I found this solution easier. <code>leading_byte = bytes((0xaa,)) snd = &#39;0&#39; + string_opttion[&#39;a&#39;] + string_version[&#39;b&#39;] second_byte = bitarray(snd)  msg = leading_byte + second_byte.tobytes()</code>"}], "tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 2, "last_activity_date": 1420661815, "creation_date": 1420661815, "answer_id": 27827906, "question_id": 27827836, "link": "https://stackoverflow.com/questions/27827836/forming-bytes-bit-by-bit-and-concatenating-bytes/27827906#27827906", "title": "Forming bytes bit by bit and concatenating bytes", "body": "<p>Use bit shifting and ordinary <code>chr</code>:</p>\n\n<pre><code>byte_message = chr(0xaa) + chr((bits6_4 &lt;&lt; 4) | bits3_0)\n</code></pre>\n"}], "owner": {"reputation": 427, "user_id": 3599280, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/014w1.png?s=128&g=1", "display_name": "sstevan", "link": "https://stackoverflow.com/users/3599280/sstevan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "accepted_answer_id": 27827906, "answer_count": 1, "score": 1, "last_activity_date": 1608761049, "creation_date": 1420661529, "last_edit_date": 1608761049, "question_id": 27827836, "link": "https://stackoverflow.com/questions/27827836/forming-bytes-bit-by-bit-and-concatenating-bytes", "title": "Forming bytes bit by bit and concatenating bytes", "body": "<p>I'm trying to send byte message via TCP socket. I have one static byte that is hex word <code>0xaa</code>. On static byte I need to concatenate dynamic byte which MSB is always 0 then I have bits from 6-4 which are variable (from 000 to 100) and than bits from 3-0 are also variable (from 0000 - 1000). What is the best way to do this? I've seen that I can use <code>bitarray</code> and <code>BitArray</code> class from <code>bitstring</code> but I would like to know what is the best solution for this problem. Also I'm need to know how to convert bitarray back to bytes so I can send it via TCP.</p>\n\n<p>Example of what I need:</p>\n\n<pre><code>leading_byte = 0xaa\nbit7 = 0 (bit)\n\noptions = { 'a' : 000 (bits), 'b' : 001 ...}\nversions = { 'i' : 0000 (bits), 'i' : 0001 ...} \nbits6_4 = options['a']\nbits3_0 = versions['i']\n\nbyte_message = leading_byte + bit7 + bit6_4 + bits3_0\n\nsocket.send(byte_message)\n</code></pre>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 7204, "user_id": 4333347, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b091d5e3973e6f65ec16442c3b1b16b?s=128&d=identicon&r=PG", "display_name": "buydadip", "link": "https://stackoverflow.com/users/4333347/buydadip"}, "edited": false, "score": 2, "creation_date": 1420661763, "post_id": 27827812, "comment_id": 44061606, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/6618515/sorting-list-based-on-values-from-another-list\">Sorting list based on values from another list?</a>"}, {"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "reply_to_user": {"reputation": 7204, "user_id": 4333347, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b091d5e3973e6f65ec16442c3b1b16b?s=128&d=identicon&r=PG", "display_name": "buydadip", "link": "https://stackoverflow.com/users/4333347/buydadip"}, "edited": false, "score": 1, "creation_date": 1420661963, "post_id": 27827812, "comment_id": 44061695, "body": "@Bolboa: Not quite a dupe since this question is asking to preserve both <code>A</code> and <code>B</code>. The other question doesn&#39;t address that."}, {"owner": {"reputation": 7204, "user_id": 4333347, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b091d5e3973e6f65ec16442c3b1b16b?s=128&d=identicon&r=PG", "display_name": "buydadip", "link": "https://stackoverflow.com/users/4333347/buydadip"}, "reply_to_user": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 0, "creation_date": 1420662068, "post_id": 27827812, "comment_id": 44061760, "body": "@NPE I see, perhaps your right."}], "answers": [{"tags": [], "owner": {"reputation": 118129, "user_id": 1357341, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Vzjkd.jpg?s=128&g=1", "display_name": "arshajii", "link": "https://stackoverflow.com/users/1357341/arshajii"}, "is_accepted": false, "score": 2, "last_activity_date": 1420661982, "last_edit_date": 1420661982, "creation_date": 1420661584, "answer_id": 27827854, "question_id": 27827812, "link": "https://stackoverflow.com/questions/27827812/sort-list-b-by-the-sort-of-list-a/27827854#27827854", "title": "Sort list B by the sort of list A?", "body": "<p>You can try something like this:</p>\n\n<pre><code>&gt;&gt;&gt; A = [2,3,1,4]\n&gt;&gt;&gt; B = [5,6,7,8]\n&gt;&gt;&gt;\n&gt;&gt;&gt; AB = zip(A, B)\n&gt;&gt;&gt; AB.sort()\n&gt;&gt;&gt; A[:] = [t[0] for t in AB]\n&gt;&gt;&gt; B[:] = [t[1] for t in AB]\n&gt;&gt;&gt; A\n[1, 2, 3, 4]\n&gt;&gt;&gt; B\n[7, 5, 6, 8]\n</code></pre>\n\n<p>All we're doing here is \"zipping\" the list (i.e. in your example: <code>[(2, 5), (3, 6), (1, 7), (4, 8)]</code>) and sorting <em>that</em> list by the first element of each tuple. Then from this sorted list we retrieve the desired <code>A</code> and <code>B</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "reply_to_user": {"reputation": 2476, "user_id": 1435323, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9ea82898a275911db2c2563faabd5580?s=128&d=identicon&r=PG", "display_name": "MyNameIsKhan", "link": "https://stackoverflow.com/users/1435323/mynameiskhan"}, "edited": false, "score": 1, "creation_date": 1420661857, "post_id": 27827864, "comment_id": 44061644, "body": "@MyNameIsKhan: <code>zip(*)</code> undoes the first <code>zip</code>: <a href=\"http://stackoverflow.com/questions/13635032/what-is-the-inverse-function-of-zip-in-python\" title=\"what is the inverse function of zip in python\">stackoverflow.com/questions/13635032/&hellip;</a>"}], "tags": [], "owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "is_accepted": true, "score": 10, "last_activity_date": 1420662053, "last_edit_date": 1495542898, "creation_date": 1420661639, "answer_id": 27827864, "question_id": 27827812, "link": "https://stackoverflow.com/questions/27827812/sort-list-b-by-the-sort-of-list-a/27827864#27827864", "title": "Sort list B by the sort of list A?", "body": "<p>Here is one way:</p>\n\n<pre><code>&gt;&gt;&gt; A = [2,3,1,4]\n&gt;&gt;&gt; B = [5,6,7,8]\n&gt;&gt;&gt; A, B = zip(*sorted(zip(A, B)))\n&gt;&gt;&gt; list(A)\n[1, 2, 3, 4]\n&gt;&gt;&gt; list(B)\n[7, 5, 6, 8]\n</code></pre>\n\n<p>In a nutshell:</p>\n\n<ul>\n<li>zip <code>A</code> and <code>B</code> into a list of pairs;</li>\n<li>sort the pairs;</li>\n<li><a href=\"https://stackoverflow.com/questions/13635032/what-is-the-inverse-function-of-zip-in-python\">unzip</a> back into <code>A</code> and <code>B</code>;</li>\n<li>convert tuples to lists.</li>\n</ul>\n\n<p>If you like one-liners:</p>\n\n<pre><code>A, B = map(list, zip(*sorted(zip(A, B))))\n</code></pre>\n"}], "owner": {"reputation": 2476, "user_id": 1435323, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9ea82898a275911db2c2563faabd5580?s=128&d=identicon&r=PG", "display_name": "MyNameIsKhan", "link": "https://stackoverflow.com/users/1435323/mynameiskhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "accepted_answer_id": 27827864, "answer_count": 2, "score": 3, "last_activity_date": 1420662053, "creation_date": 1420661443, "question_id": 27827812, "link": "https://stackoverflow.com/questions/27827812/sort-list-b-by-the-sort-of-list-a", "title": "Sort list B by the sort of list A?", "body": "<p>Let's say I have some list A with k elements, and list B with k elements as well. I want to sort list A, but I also want to permute list B in the same way.</p>\n\n<p>For example</p>\n\n<pre><code>A = [2,3,1,4]\nB = [5,6,7,8]\n</code></pre>\n\n<p>after sorting A:</p>\n\n<pre><code>A = [1,2,3,4]\nB = [7,5,6,8]\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "is_accepted": true, "score": 7, "last_activity_date": 1420660860, "creation_date": 1420660860, "answer_id": 27827674, "question_id": 27827651, "link": "https://stackoverflow.com/questions/27827651/getting-indices-of-elements-that-are-in-another-list-in-numpy/27827674#27827674", "title": "Getting indices of elements that are in another list in numpy", "body": "<p>You can <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" rel=\"noreferrer\"><code>numpy.where</code></a> with <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.in1d.html\" rel=\"noreferrer\"><code>numpy.in1d</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; np.where(np.in1d(x, y))\n(array([1, 2, 4]),)\n</code></pre>\n"}], "owner": {"reputation": 4335, "user_id": 330561, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/31130f7724b73c4978f4ae82131117ed?s=128&d=identicon&r=PG", "display_name": "Wesley Tansey", "link": "https://stackoverflow.com/users/330561/wesley-tansey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1412, "favorite_count": 0, "accepted_answer_id": 27827674, "answer_count": 1, "score": 1, "last_activity_date": 1420660860, "creation_date": 1420660784, "question_id": 27827651, "link": "https://stackoverflow.com/questions/27827651/getting-indices-of-elements-that-are-in-another-list-in-numpy", "title": "Getting indices of elements that are in another list in numpy", "body": "<p>I have two numpy arrays and I'd like to get the indices of all elements in the first array that are in the second array. For example:</p>\n\n<pre><code>import numpy as np\nx = np.array([0,1,1,2,3,4,5,5])\ny = np.array([1,3])\n# want to get np.array([1,2,4]) \n</code></pre>\n\n<p>If <code>y</code> were a scalar, I could just do <code>np.where(x == y)</code>. Is there an equivalent for arrays of values?</p>\n"}, {"tags": ["python", "psutil"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user948581"}, "edited": false, "score": 0, "creation_date": 1420661428, "post_id": 27827648, "comment_id": 44061425, "body": "Latest version of psutil is 2.2. Any reason you still use 0.6?"}, {"owner": {"reputation": 11, "user_id": 4297844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09eb3cfa7fa42dd291546851ff6fb96e?s=128&d=identicon&r=PG&f=1", "display_name": "Drew Morone", "link": "https://stackoverflow.com/users/4297844/drew-morone"}, "edited": false, "score": 0, "creation_date": 1420751270, "post_id": 27827648, "comment_id": 44102961, "body": "I&#39;m just using the CentOS 6 distro. I guess I should use the latest."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4297844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09eb3cfa7fa42dd291546851ff6fb96e?s=128&d=identicon&r=PG&f=1", "display_name": "Drew Morone", "link": "https://stackoverflow.com/users/4297844/drew-morone"}, "edited": false, "score": 0, "creation_date": 1420731648, "post_id": 27829685, "comment_id": 44091498, "body": "This is good info. Unfortunately for the purpose of what I&#39;m doing it doesn&#39;t help, exactly, although it might be putting me on the right path."}, {"owner": {"reputation": 11, "user_id": 4297844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09eb3cfa7fa42dd291546851ff6fb96e?s=128&d=identicon&r=PG&f=1", "display_name": "Drew Morone", "link": "https://stackoverflow.com/users/4297844/drew-morone"}, "edited": false, "score": 1, "creation_date": 1420732349, "post_id": 27829685, "comment_id": 44091999, "body": "What I need returned is % total CPU that the process is using. Back story: Boss manually eyeballs EACH srvr for long running high cpu procs. This, to me, is dumb, but he still wants it done. I figure I can automate it. cpu_times doesn&#39;t return % total cpu that the process is using."}, {"owner": {"reputation": 1337, "user_id": 2909253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0457e591dbb22636a8aa2ed9b3c2b99c?s=128&d=identicon&r=PG&f=1", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2909253/spencer"}, "reply_to_user": {"reputation": 11, "user_id": 4297844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09eb3cfa7fa42dd291546851ff6fb96e?s=128&d=identicon&r=PG&f=1", "display_name": "Drew Morone", "link": "https://stackoverflow.com/users/4297844/drew-morone"}, "edited": false, "score": 0, "creation_date": 1522566347, "post_id": 27829685, "comment_id": 86198589, "body": "@DrewMorone you ever figure this out? I&#39;m struggling with this right now"}, {"owner": {"reputation": 11, "user_id": 4297844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09eb3cfa7fa42dd291546851ff6fb96e?s=128&d=identicon&r=PG&f=1", "display_name": "Drew Morone", "link": "https://stackoverflow.com/users/4297844/drew-morone"}, "edited": false, "score": 0, "creation_date": 1524167292, "post_id": 27829685, "comment_id": 86874166, "body": "Unfortunately no. I think I ended up scrapping it all."}], "tags": [], "owner": {"reputation": 4193, "user_id": 829811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9YS9O.jpg?s=128&g=1", "display_name": "VooDooNOFX", "link": "https://stackoverflow.com/users/829811/voodoonofx"}, "is_accepted": false, "score": 0, "last_activity_date": 1420669244, "creation_date": 1420669244, "answer_id": 27829685, "question_id": 27827648, "link": "https://stackoverflow.com/questions/27827648/psutils-proc-as-dict-attribute-get-cpu-percent-returns-0-0-for-each-process/27829685#27829685", "title": "psutil&#39;s proc.as_dict attribute &quot;get_cpu_percent&quot; returns 0.0 for each process", "body": "<p>According to the docs, <code>get_cpu_percent</code> will allow you to measure the amount of CPU time a particular process is using as a blocking measurement. For example:</p>\n\n<pre><code>import psutil\nimport os\n\n# Measure the active process in a blocking method,\n#    blocks for 1 second to measure the CPU usage of the process\nprint psutil.Process(os.getpid()).get_cpu_percent(interval=1)\n# Measure the percentage of change since the last blocking measurement.\nprint psutil.Process(os.getpid()).get_cpu_percent()\n</code></pre>\n\n<p>Instead, you probably want to use <code>get_cpu_times</code> in your report.</p>\n\n<pre><code>&gt;&gt;&gt; help(proc.get_cpu_times)\nHelp on method get_cpu_times in module psutil:\n\nget_cpu_times(self) method of psutil.Process instance\n    Return a tuple whose values are process CPU user and system\n    times. The same as os.times() but per-process.\n\n&gt;&gt;&gt; pinfo = psutil.Process(os.getpid()).as_dict(attrs=['pid', 'name', 'create_time', 'get_cpu_times'])\n&gt;&gt;&gt; print (pinfo.get('cpu_times').user, pinfo.get('cpu_times').system)\n(0.155494768, 0.179424288)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4297844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09eb3cfa7fa42dd291546851ff6fb96e?s=128&d=identicon&r=PG&f=1", "display_name": "Drew Morone", "link": "https://stackoverflow.com/users/4297844/drew-morone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2009, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1420669244, "creation_date": 1420660779, "question_id": 27827648, "link": "https://stackoverflow.com/questions/27827648/psutils-proc-as-dict-attribute-get-cpu-percent-returns-0-0-for-each-process", "title": "psutil&#39;s proc.as_dict attribute &quot;get_cpu_percent&quot; returns 0.0 for each process", "body": "<p>I am trying to write a very simple python script using the psutil module to return process ID, Create time, Name and CPU %. Ultimately I will use this to monitor specific thresholds based on these returned values, but for our case, I'll use a simple example</p>\n\n<ul>\n<li>OS: CentOS 6.5</li>\n<li>Python: 2.6.6 (base CentOS 6 package)</li>\n<li>psutil: 0.6.1</li>\n</ul>\n\n<p>When I run the following script, it returns the correct values for everything but cpu_percent. It returns 0.0 for each process. I think the problem is due to the default interval being 0 for cpu_percent. I'm using psutil.process_iter() and as_dict to iterate through the running processes. I'm not sure how I would set the interval.  Is there something I'm missing?</p>\n\n<pre><code>#! /usr/bin/python\nimport psutil\n\nfor proc in psutil.process_iter():\n    try:\n        pinfo = proc.as_dict(attrs=['pid', 'name', 'create_time', 'get_cpu_percent'])\n    except psutil.NoSuchProcess:\n        pass\n    else:\n        print(pinfo)\n</code></pre>\n"}, {"tags": ["python", "while-loop"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 3, "creation_date": 1420660831, "post_id": 27827635, "comment_id": 44061120, "body": "<i>&quot;it suddenly stopped working&quot;</i> is not helpful. What is not working? Is it throwing an error message? Is it producing incorrect results?"}, {"owner": {"reputation": 812, "user_id": 2097159, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/25bbccaf149c63cdb3a6c5b27cb9c492?s=128&d=identicon&r=PG", "display_name": "user2097159", "link": "https://stackoverflow.com/users/2097159/user2097159"}, "edited": false, "score": 0, "creation_date": 1420660836, "post_id": 27827635, "comment_id": 44061123, "body": "define &quot;it suddenly stopped working&quot;.  Is it throwing an error or what?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1420660907, "post_id": 27827635, "comment_id": 44061158, "body": "A program like this doesn&#39;t just randomly stop working - more likely, <i>you changed something that broke it</i>. Change it back!"}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 1, "creation_date": 1420661005, "post_id": 27827635, "comment_id": 44061205, "body": "<code>UserHand or UserHand_Retry == &quot;Rock&quot;</code> does not do what you think it does. See <a href=\"http://stackoverflow.com/questions/15112125/how-do-i-test-one-variable-against-multiple-values\" title=\"how do i test one variable against multiple values\">stackoverflow.com/questions/15112125/&hellip;</a>"}, {"owner": {"reputation": 812, "user_id": 2097159, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/25bbccaf149c63cdb3a6c5b27cb9c492?s=128&d=identicon&r=PG", "display_name": "user2097159", "link": "https://stackoverflow.com/users/2097159/user2097159"}, "edited": false, "score": 0, "creation_date": 1420661050, "post_id": 27827635, "comment_id": 44061218, "body": "Also consider taking this over to code review once it is working.  There&#39;s a lot of clutter that could be cleaned up."}, {"owner": {"reputation": 45, "user_id": 4430347, "user_type": "registered", "profile_image": "https://graph.facebook.com/100008361334394/picture?type=large", "display_name": "Jeroen van der Wal", "link": "https://stackoverflow.com/users/4430347/jeroen-van-der-wal"}, "edited": false, "score": 0, "creation_date": 1420666633, "post_id": 27827635, "comment_id": 44064135, "body": "Sorry if I was not clear enough, but no matter what I do, if I use Rock, Paper or Scissors it gives the error message again and again."}], "answers": [{"comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1420661991, "post_id": 27827685, "comment_id": 44061717, "body": "It would be helpful to add <i>at the very least</i> where this line should go, and much better if you explained why it&#39;s better than what it&#39;s replacing."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1420662087, "post_id": 27827685, "comment_id": 44061773, "body": "@jonrsharpe, The code is self explanatory for any programmer with even a smidgen of common sense.  ++.  In fact, most answers require no explanation."}, {"owner": {"reputation": 6355, "user_id": 3755692, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/F7x32.png?s=128&g=1", "display_name": "msrd0", "link": "https://stackoverflow.com/users/3755692/msrd0"}, "edited": false, "score": 3, "creation_date": 1420662099, "post_id": 27827685, "comment_id": 44061777, "body": "While this code snippet may solve the question, <a href=\"http://meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers\">including an explanation</a> really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion."}, {"owner": {"reputation": 4303, "user_id": 86698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/485fb175406faa7e6060f88fced7be79?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew_Lvov", "link": "https://stackoverflow.com/users/86698/andrew-lvov"}, "edited": false, "score": 0, "creation_date": 1420662112, "post_id": 27827685, "comment_id": 44061783, "body": "There is only one place with while. You&#39;re right about explanation, I guess"}, {"owner": {"reputation": 4303, "user_id": 86698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/485fb175406faa7e6060f88fced7be79?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew_Lvov", "link": "https://stackoverflow.com/users/86698/andrew-lvov"}, "edited": false, "score": 0, "creation_date": 1420662268, "post_id": 27827685, "comment_id": 44061874, "body": "Added explanation, thank you for comments"}, {"owner": {"reputation": 4303, "user_id": 86698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/485fb175406faa7e6060f88fced7be79?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew_Lvov", "link": "https://stackoverflow.com/users/86698/andrew-lvov"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1420663320, "post_id": 27827685, "comment_id": 44062429, "body": "@jonrsharpe, thank your for style fixes, didn&#39;t know I can do that inline"}, {"owner": {"reputation": 45, "user_id": 4430347, "user_type": "registered", "profile_image": "https://graph.facebook.com/100008361334394/picture?type=large", "display_name": "Jeroen van der Wal", "link": "https://stackoverflow.com/users/4430347/jeroen-van-der-wal"}, "edited": false, "score": 0, "creation_date": 1420667536, "post_id": 27827685, "comment_id": 44064558, "body": "I will try to use this list tomorrow and thanks everyone for helping me, starting on this website!"}], "tags": [], "owner": {"reputation": 4303, "user_id": 86698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/485fb175406faa7e6060f88fced7be79?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew_Lvov", "link": "https://stackoverflow.com/users/86698/andrew-lvov"}, "is_accepted": true, "score": 1, "last_activity_date": 1420663152, "last_edit_date": 1420663152, "creation_date": 1420660892, "answer_id": 27827685, "question_id": 27827635, "link": "https://stackoverflow.com/questions/27827635/i-cant-fix-an-annoying-error-in-my-script/27827685#27827685", "title": "I can&#39;t fix an annoying error in my script", "body": "<p>Your <code>while</code> condition will be <code>True</code> if <code>UserHand</code> is any non-empty value, like <code>'a'</code>, or <code>'3333'</code>, because of </p>\n\n<pre><code>UserHand or UserHand_Retry....\n</code></pre>\n\n<p>since <code>or</code> needs only one of these to be <code>True</code> and <code>UserHand</code> will be evaluated as <code>True</code> if it's a non-empty string.</p>\n\n<pre><code>while UserHand not in [\"Rock\", \"Paper\", \"Scissors\"]:\n</code></pre>\n\n<p>Also, be careful with multiple <code>or</code> and <code>and</code> in your condition; that might work differently than you expected. Use <code>(</code> and <code>)</code> if you're unsure.</p>\n"}], "owner": {"reputation": 45, "user_id": 4430347, "user_type": "registered", "profile_image": "https://graph.facebook.com/100008361334394/picture?type=large", "display_name": "Jeroen van der Wal", "link": "https://stackoverflow.com/users/4430347/jeroen-van-der-wal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1420661008, "accepted_answer_id": 27827685, "answer_count": 1, "score": -6, "last_activity_date": 1420833906, "creation_date": 1420660740, "last_edit_date": 1420833906, "question_id": 27827635, "link": "https://stackoverflow.com/questions/27827635/i-cant-fix-an-annoying-error-in-my-script", "closed_reason": "Not suitable for this site", "title": "I can&#39;t fix an annoying error in my script", "body": "<p>I am making a Rock, Paper, Scissors game for my school project and it was finished but it suddenly stopped working. I think it is a problem in the <code>while</code> loop.</p>\n\n<pre><code>while UserHand or UserHand_Retry != \"Rock\" and UserHand or UserHand_Retry != \"Paper\" and UserHand or UserHand_Retry != \"Scissors\":\n    tkMessageBox.showerror(\"ERROR!\",\"You did not choose a valid object, please try again.\")\n    UserHand_Retry = raw_input(\"What do you want to choose? (Rock/Paper/Scissors):\")\n</code></pre>\n"}, {"tags": ["python", "lxml", "python-requests"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 2, "creation_date": 1420660605, "post_id": 27827559, "comment_id": 44060986, "body": "look through the rest of the page&#39;s source code and see how the XML is being added to the textarea - it&#39;s probably loaded using JavaScript and an AJAX request to a server. In that case, you&#39;ll need to approach this in a new way."}, {"owner": {"reputation": 1932, "user_id": 1450754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d260a34500731e79502ef0fa47fa5f?s=128&d=identicon&r=PG", "display_name": "Beno&#238;t Latinier", "link": "https://stackoverflow.com/users/1450754/beno%c3%aet-latinier"}, "edited": false, "score": 1, "creation_date": 1420662545, "post_id": 27827559, "comment_id": 44062019, "body": "Either the content is stored in an hidden element of the part somewhere else, in which case you can fetch this other element. Either it is loaded in AJAX in which case you can try to parse the URL called by the AJAX part. If you fail in both try selenium to have something to interpret JS an issue actions on the page."}, {"owner": {"reputation": 1114, "user_id": 1810266, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pkLOF.jpg?s=128&g=1", "display_name": "ExperimentsWithCode", "link": "https://stackoverflow.com/users/1810266/experimentswithcode"}, "edited": false, "score": 0, "creation_date": 1420662668, "post_id": 27827559, "comment_id": 44062089, "body": "I took a look and it seems that it is called from a bunch of scripts and nowhere present in the captured html. I was hoping not to need to use selenium, as it&#39;s much slower, but from the looks of it that may be my only option. Thank you."}], "owner": {"reputation": 1114, "user_id": 1810266, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pkLOF.jpg?s=128&g=1", "display_name": "ExperimentsWithCode", "link": "https://stackoverflow.com/users/1810266/experimentswithcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 436, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1420662808, "creation_date": 1420660464, "last_edit_date": 1420662808, "question_id": 27827559, "link": "https://stackoverflow.com/questions/27827559/how-to-get-the-content-of-text-area-when-content-is-not-shown-in-html", "title": "How to get the content of text area when content is not shown in html?", "body": "<p>I have a text area on a webpage that is hidden until a checkbox is clicked. It is full of xml which I would like to use. I am able to get that html anyway. The content of the text area does not appear in the html though, even when it is clicked in my browser. Is there a way for me to access that data?</p>\n\n<pre><code>&lt;header&gt;View XML&lt;/header&gt;\n  &lt;section&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"column-left label\"&gt;&lt;/div&gt;\n      &lt;div class=\"column-right xmldraft\"&gt;\n        &lt;textarea id=\"xmldraft\" class=\"text ui-widget-content ui-corner-all\" rows=\"4\" type=\"text\" style=\"height: 300px;\"&gt;&lt;/textarea&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/section&gt;\n</code></pre>\n\n<p>I am getting the text area with the following code</p>\n\n<pre><code>import requests\nfrom lxml import html\n\npayload = {'pass': 'PASSWORD', 'user': 'USER','submit':'go'}## Log in info\n\nr = requests.get(\"http://WEBSITE.com/s2/job.php?orderID=ABCDEF&amp;jobID=WXYZ\", params=payload) ## Get page\n\ntree = html.fromstring(r.text) ## break down webpage into parseable data\n\nrawdata=tree.xpath(\".//*[@id='xmldraft']\")  ## Get text area\n</code></pre>\n\n<p>but when I try any of the following I get no results</p>\n\n<pre><code>&gt;&gt;&gt;rawdata\n[&lt;TextareaElement 10ab55c00 name=None&gt;]\n&gt;&gt;&gt;rawdata[0].text\n&gt;&gt;&gt;rawdata[0].text_content()\n''\n&gt;&gt;&gt;rawdata[0].value\n''\n&gt;&gt;&gt;rawdata[0].tag\n'textarea'\n</code></pre>\n\n<p><strong>Edit:</strong> It seems the javascript which populates it is partially written here:</p>\n\n<pre><code>function update_XML() {\n  var Rserializer = new ONEGEEK.GSerializer();\n  var RserializedXML = Rserializer.serialize(website.job, 'MyRequest');\n  var serializer = new ONEGEEK.GSerializer();\n  var serializedXML = serializer.serialize(website.XMLResult, 'MyResult');\n  $('#xmldraft').css(\"height\", 300);\n  $('#xmldraft').val(RserializedXML);\n  var txt = $(\"#xmldraft\");\n  txt.val(txt.val() + \"\\n\\n\\n\");\n  txt.val(txt.val() + serializedXML);\n}\n</code></pre>\n\n<p>GSerializer doesn't have a source, so the above seems to be passing the data in.</p>\n\n<p><strong>I'm not really sure how to find a deeper source, so I'm just going to use selenium</strong></p>\n"}, {"tags": ["python", "image", "transparency", "pyglet", "cocos2d-python"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 3665789, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6fe4a9c2093df53c16e2bef35cd19ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Frothiny", "link": "https://stackoverflow.com/users/3665789/frothiny"}, "is_accepted": false, "score": 1, "last_activity_date": 1420736117, "last_edit_date": 1492085921, "creation_date": 1420736117, "answer_id": 27845446, "question_id": 27827547, "link": "https://stackoverflow.com/questions/27827547/load-image-with-pyglet-turns-some-transparency-pixels-white/27845446#27845446", "title": "Load image with pyglet turns some transparency pixels white", "body": "<p>So apparently because I wanted it pixelated it decided to mipmap it or something so it anti-aliased it kind of..\nAnyways I found this as a halfworking solution:</p>\n\n<pre><code>from pyglet.gl import *\nglEnable(GL_TEXTURE_2D)\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST)\n</code></pre>\n\n<p>Then a working solution was adding\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST)\neverytime I loaded a texture, probably not the most effecient thing to do but meh.</p>\n\n<p>Here is where I found it:\n<a href=\"https://gamedev.stackexchange.com/questions/20297/how-can-i-resize-pixel-art-in-pyglet-without-making-it-blurry\">https://gamedev.stackexchange.com/questions/20297/how-can-i-resize-pixel-art-in-pyglet-without-making-it-blurry</a></p>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 1181617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79a1bbdb02b7e6771848fd817cc7fd23?s=128&d=identicon&r=PG", "display_name": "Koraken", "link": "https://stackoverflow.com/users/1181617/koraken"}, "is_accepted": false, "score": 1, "last_activity_date": 1495828281, "creation_date": 1495828281, "answer_id": 44209206, "question_id": 27827547, "link": "https://stackoverflow.com/questions/27827547/load-image-with-pyglet-turns-some-transparency-pixels-white/44209206#44209206", "title": "Load image with pyglet turns some transparency pixels white", "body": "<p>Just to add some clarity for Frothiny's answer:</p>\n\n<p>The lines he mentioned fix the problem, but their placement is important. I was able to get the fix to work by adding the gl lines immediately after creating the sprite.</p>\n\n<p>Example</p>\n\n<pre><code># Your imports...\nfrom pyglet.gl import *\n# Your program's code...\nSprite('someimage.png')\nglEnable(GL_TEXTURE_2D)\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST)\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 3665789, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6fe4a9c2093df53c16e2bef35cd19ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Frothiny", "link": "https://stackoverflow.com/users/3665789/frothiny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1003, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1495828281, "creation_date": 1420660428, "last_edit_date": 1420713288, "question_id": 27827547, "link": "https://stackoverflow.com/questions/27827547/load-image-with-pyglet-turns-some-transparency-pixels-white", "title": "Load image with pyglet turns some transparency pixels white", "body": "<p>I'm using cocos2D-python and I am loading images with pyglet.image.load and pyglet.resource.image but it still adds some white pixels where it is suppoused to be transparent.</p>\n\n<p>I've used pygame before but never experienced it with that.</p>\n\n<p>If it matters I use paint.net and save the images as .png</p>\n\n<p>Thanks in advance</p>\n\n<p><a href=\"https://dl.dropboxusercontent.com/u/58141766/white%20pixels%20%3B(.png\" rel=\"nofollow\">https://dl.dropboxusercontent.com/u/58141766/white%20pixels%20%3B(.png</a></p>\n"}, {"tags": ["python", "macos", "terminal"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1420660793, "post_id": 27827503, "comment_id": 44061095, "body": "It&#39;s presumably related to the search software: <a href=\"http://en.wikipedia.org/wiki/Spotlight_(software)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Spotlight_(software)</a>"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1420661126, "post_id": 27827503, "comment_id": 44061257, "body": "See also: <a href=\"https://discussions.apple.com/thread/2499466?start=0&amp;tstart=0\" rel=\"nofollow noreferrer\">discussions.apple.com/thread/2499466?start=0&amp;tstart=0</a>. As this is Apple-specific, you could also consider <a href=\"http://apple.stackexchange.com/\">apple.stackexchange.com</a>"}], "owner": {"reputation": 1254, "user_id": 2737819, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/gjRoU.jpg?s=128&g=1", "display_name": "zer0Id0l", "link": "https://stackoverflow.com/users/2737819/zer0id0l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1420660260, "creation_date": 1420660260, "question_id": 27827503, "link": "https://stackoverflow.com/questions/27827503/getting-different-logged-in-user-on-mac", "title": "Getting different logged in user on mac", "body": "<p>I am fetching the loggedin user using below function in my python script on mac terminal.</p>\n\n<pre><code>user = os.getlogin()\n</code></pre>\n\n<p>This gives me correct user for most of time which my user id. But many times it also gives user as \"<code>_spotlight</code>\". I am not sure if it is an issue with mac terminal.</p>\n\n<p>Does anybody know what is a <code>_spotlight</code> user?</p>\n"}, {"tags": ["python", "casting", "xlrd"], "comments": [{"owner": {"reputation": 4007, "user_id": 3161282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vkLhf.png?s=128&g=1", "display_name": "dursk", "link": "https://stackoverflow.com/users/3161282/dursk"}, "edited": false, "score": 0, "creation_date": 1420659548, "post_id": 27827293, "comment_id": 44060394, "body": "Is every cell a <code>float</code> which should be an <code>int</code>, or are there other data types as well?"}, {"owner": {"reputation": 1680, "user_id": 3308509, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4d433ab89756d37ac8d09cbffe6621d2?s=128&d=identicon&r=PG&f=1", "display_name": "Malonge", "link": "https://stackoverflow.com/users/3308509/malonge"}, "reply_to_user": {"reputation": 4007, "user_id": 3161282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vkLhf.png?s=128&g=1", "display_name": "dursk", "link": "https://stackoverflow.com/users/3161282/dursk"}, "edited": false, "score": 0, "creation_date": 1420659608, "post_id": 27827293, "comment_id": 44060425, "body": "Each cell will be a numeric value. Either a float or an int, although they appear in excel as an int."}], "answers": [{"comments": [{"owner": {"reputation": 1680, "user_id": 3308509, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4d433ab89756d37ac8d09cbffe6621d2?s=128&d=identicon&r=PG&f=1", "display_name": "Malonge", "link": "https://stackoverflow.com/users/3308509/malonge"}, "edited": false, "score": 0, "creation_date": 1420660199, "post_id": 27827401, "comment_id": 44060780, "body": "I should have been more clear earlier. Each cell of certain columns will be all numberic. But each row is comprised of both numeric and string columns.I am only concerned with the numeric columns, which in this case are columns 1,3 and 5."}, {"owner": {"reputation": 1680, "user_id": 3308509, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4d433ab89756d37ac8d09cbffe6621d2?s=128&d=identicon&r=PG&f=1", "display_name": "Malonge", "link": "https://stackoverflow.com/users/3308509/malonge"}, "edited": false, "score": 0, "creation_date": 1420660396, "post_id": 27827401, "comment_id": 44060874, "body": "Yes that is the direction I want to go in."}], "tags": [], "owner": {"reputation": 4007, "user_id": 3161282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vkLhf.png?s=128&g=1", "display_name": "dursk", "link": "https://stackoverflow.com/users/3161282/dursk"}, "is_accepted": true, "score": 1, "last_activity_date": 1420660855, "last_edit_date": 1420660855, "creation_date": 1420659908, "answer_id": 27827401, "question_id": 27827293, "link": "https://stackoverflow.com/questions/27827293/convert-float-to-integer-during-xcel-to-tab-delimited-file-conversion/27827401#27827401", "title": "Convert Float to Integer During xcel to Tab Delimited File Conversion", "body": "<p>Use list comprehension to convert the elements of the row to <code>int</code> before writing them to the new file:</p>\n\n<pre><code>for row in range(sh.nrows):\n    new_row = [int(x) for x in sh.row_values(row)]\n    writetab.writerow(new_row)\n</code></pre>\n\n<p>EDIT: with OP's new comments below, what you need to do (although it's not pretty) is:</p>\n\n<pre><code>int_columns = [1, 3, 5]\nfor row in range(sh.nrows):\n    new_row = sh.row_values(row)\n    for col in int_columns:\n        new_row[col] = int(new_row[col])\n    writetab.writerow(new_row)\n</code></pre>\n\n<p>And I would suggest you change your naming a bit. In the outermost loop, you're iterating over integers, but you name your variable <code>row</code>. I'd write it like:</p>\n\n<pre><code>int_columns = [1, 3, 5]\nfor i in range(sh.nrows):\n    row = sh.row_values(i)\n    for col in int_columns:\n        row[col] = int(new_row[col])\n    writetab.writerow(row)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 1, "last_activity_date": 1420661125, "creation_date": 1420661125, "answer_id": 27827741, "question_id": 27827293, "link": "https://stackoverflow.com/questions/27827293/convert-float-to-integer-during-xcel-to-tab-delimited-file-conversion/27827741#27827741", "title": "Convert Float to Integer During xcel to Tab Delimited File Conversion", "body": "<p>You could do it like this:</p>\n\n<pre><code>for row in range(sh.nrows):\n    new_row = [int(x) if i in {1,3,5} else x for i, x in\n        enumerate(sh.row_values(row), start=1)]\n    writetab.writerow(new_row)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1420662799, "post_id": 27827885, "comment_id": 44062172, "body": "IMHO, type checking -- even with <code>try&#47;except</code> -- isn&#39;t Pythonic. In this case I suspect it might also be error-prone."}, {"owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1420662980, "post_id": 27827885, "comment_id": 44062271, "body": "@martineau, fair point, but I think try/except would be the more direct way to take care of the corner cases, in which using other normal string methods have."}], "tags": [], "owner": {"reputation": 16814, "user_id": 3849456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AonOf.jpg?s=128&g=1", "display_name": "Anzel", "link": "https://stackoverflow.com/users/3849456/anzel"}, "is_accepted": false, "score": 0, "last_activity_date": 1420661740, "creation_date": 1420661740, "answer_id": 27827885, "question_id": 27827293, "link": "https://stackoverflow.com/questions/27827293/convert-float-to-integer-during-xcel-to-tab-delimited-file-conversion/27827885#27827885", "title": "Convert Float to Integer During xcel to Tab Delimited File Conversion", "body": "<p>May also consider this to check if the cell is a float/integer/text and convert it using <strong>map</strong> with a custom function, like this:</p>\n\n<pre><code>def convert_int_or_string(n):\n    try:\n        float(n)\n        assert str(n).lower() != 'nan'\n        return int(float(n))\n    except (ValueError, AssertionError):\n        return n\n\ntest_row \n['3.14',\n 'nan',\n '12.143141234',\n 'hello',\n '0.13989402028',\n 'world',\n '0.26575558139',\n '11',\n '0.919189932407',\n '!']\n\nmap(convert_int_or_string, test_row)\n[3, 'nan', 12, 'hello', 0, 'world', 0, 11, 0, '!']\n</code></pre>\n\n<p>Add this <code>convert_int_or_string</code> function in your module and change this line to:</p>\n\n<pre><code>writetab.writerow(map(convert_int_or_string, sh.row_values(row)))\n</code></pre>\n"}], "owner": {"reputation": 1680, "user_id": 3308509, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4d433ab89756d37ac8d09cbffe6621d2?s=128&d=identicon&r=PG&f=1", "display_name": "Malonge", "link": "https://stackoverflow.com/users/3308509/malonge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "accepted_answer_id": 27827401, "answer_count": 3, "score": 0, "last_activity_date": 1420661822, "creation_date": 1420659477, "last_edit_date": 1420661822, "question_id": 27827293, "link": "https://stackoverflow.com/questions/27827293/convert-float-to-integer-during-xcel-to-tab-delimited-file-conversion", "title": "Convert Float to Integer During xcel to Tab Delimited File Conversion", "body": "<p>I have written the following method that converts a <code>.xlsx</code> file to a <code>.txt</code> tab delimited file.</p>\n\n<pre><code>import sys\nimport xlrd\nimport csv\n\ndef xlsx_to_tab(self, inFile):\n    ''' Convert an xlsx file to a tab delimited file. '''\n    excel_file = xlrd.open_workbook(inFile)\n    worksheet = excel_file.sheet_names()[0]\n    sh = excel_file.sheet_by_name(worksheet)\n    extentPos = inFile.rfind('.')\n    tab_file = open(inFile[:extentPos] + '.txt', 'w')\n    writetab = csv.writer(tab_file, delimiter='\\t', quoting=csv.QUOTE_ALL)\n\n    for row in range(sh.nrows):\n        writetab.writerow(sh.row_values(row))\n\n    tab_file.close()\n</code></pre>\n\n<p>This method successfully converts between the file formats, however, what appears to be integers in the original excel file are output as floats in the <code>.txt</code> file output.</p>\n\n<p>I understand this may have to do with cell format settings in excel. That being said, I would like to handle this within this script, as I would like to explicitly define elements within the file as an integer with <code>int()</code>, as opposed to checking and altering all the excel files before hand which would be tedious.</p>\n\n<p>This method processes the file row by row. Is there a way to retrieve individual elements within each row so as to type cast them as an integer?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8825681/integers-from-excel-files-become-floats?rq=1\">This question</a> kind of addresses the issue:</p>\n\n<p>But shows how to do it for one value at a time as opposed to a whole column of values.</p>\n\n<p>To be a little more clear, I am trying to cast individual columns as integers but not all of them. So only some elements of each row need to be converted.</p>\n\n<p>The numeric columns are columns 1,3, and 5</p>\n"}, {"tags": ["python", "dictionary", "key"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1420662398, "post_id": 27827172, "comment_id": 44061941, "body": "So by wrong &quot;format&quot; you mean in the wrong or random order? Also, the indenting of the code in your question is messed up."}, {"owner": {"reputation": 85, "user_id": 4240949, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/0doZM.png?s=128&g=1", "display_name": "Amy Rose", "link": "https://stackoverflow.com/users/4240949/amy-rose"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1420664092, "post_id": 27827172, "comment_id": 44062863, "body": "Both, it&#39;s not in an order I want to define. Which part is messed up?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1420664654, "post_id": 27827172, "comment_id": 44063154, "body": "You mean as in both wrong and random, right? Formatting usually applies to how the data is representated, such as upper/lowercase, placement of decimal point in floating point numbers, left- or right-justification, column-width etc."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1420664703, "post_id": 27827172, "comment_id": 44063185, "body": "Copy and past the code in your question into a .py file and try to run it to see where the indenting errors are."}], "answers": [{"tags": [], "owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "is_accepted": false, "score": 0, "last_activity_date": 1420659333, "creation_date": 1420659333, "answer_id": 27827252, "question_id": 27827172, "link": "https://stackoverflow.com/questions/27827172/printing-values-from-dictionary-in-specific-form/27827252#27827252", "title": "Printing values from dictionary in specific form", "body": "<p>If your data is added into the dict in a certain order, and you want to preserve that order, <a href=\"https://docs.python.org/2/library/collections.html#collections.OrderedDict\" rel=\"nofollow\"><code>collections.OrderedDict</code></a> is what you're looking for.</p>\n"}], "owner": {"reputation": 85, "user_id": 4240949, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/0doZM.png?s=128&g=1", "display_name": "Amy Rose", "link": "https://stackoverflow.com/users/4240949/amy-rose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1420659682, "creation_date": 1420659026, "last_edit_date": 1495542508, "question_id": 27827172, "link": "https://stackoverflow.com/questions/27827172/printing-values-from-dictionary-in-specific-form", "title": "Printing values from dictionary in specific form", "body": "<p>I have a dictionary with keys relating to various reactions and their data ie. exponentn, comment etc. I want to search and print a list of reactions concerning the atom 'BR'. My code currently prints all reactions for 'BR' and the data in random order. I am not sure which data corresponds to which reaction.</p>\n\n<p>I've had a go at trying to use the repr function to output the data as follows but I'm not having much luck:<br/> reactionName : exponentn comment<br/> I found another question which I tried to replicate but was not able to do so; <a href=\"https://stackoverflow.com/questions/27396289/printing-values-and-keys-from-a-dictionary-in-a-specific-format-python\">printing values and keys from a dictionary in a specific format (python)</a>.</p>\n\n<pre><code>class SourceNotDefinedException(Exception):\n    def __init__(self, message):\n        super(SourceNotDefinedException, self).__init__(message)\n\nclass tvorechoObject(object):\n    \"\"\"The class stores a pair of objects, \"tv\" objects, and \"echo\" objects. They are accessed simply by doing .tv, or .echo. If it does not exist, it will fall back to the other variable. If neither are present, it returns None.\"\"\"\n    def __init__(self, echo=None, tv=None):\n        self.tv = tv\n        self.echo = echo\n\n    def __repr__(self):\n        return str({\"echo\": self.echo, \"tv\": self.tv}) # Returns the respective strings\n\n    def __getattribute__(self, item):\n    \"\"\"Altered __getattribute__() function to return the alternative of .echo / .tv if the requested attribute is None.\"\"\"\n\n        if item in [\"echo\", \"tv\"]:    \n            if object.__getattribute__(self,\"echo\") is None: # Echo data not present\n                return object.__getattribute__(self,\"tv\") # Select TV data\n        elif object.__getattribute__(self,\"tv\") is None: # TV data not present\n            return object.__getattribute__(self,\"echo\") # Select Echo data\n        else:\n            return object.__getattribute__(self,item) # Return all data\n\n    else:\n        return object.__getattribute__(self,item) # Return all data\n\n\nclass Reaction(object):\n    def __init__(self, inputLine, sourceType=None):\n        #self.reactionName = QVTorQPObject()\n        self.exponentn = QVTorQPObject()\n        self.comment = QVTorQPObject()\n        self.readIn(inputLine, sourceType=sourceType)\n\n        products, reactants = self.reactionName.split(\"&gt;\")\n        self.products = [product.strip() for product in products.split(\"+\")]\n        self.reactants = [reactant.strip() for reactant in reactants.split(\"+\")]\n\n\n    def readIn(self, inputLine, sourceType=None):\n        if sourceType == \"echo\": # Parsed reaction line for combined format\n\n            echoPart           = inputLine.split(\"|\")[0]    \n            reactionName     = inputLine.split(\":\")[0].strip()\n            exponentn        = echoPart.split(\"[\")[1].split(\"]\")[0].strip() # inputLine.split(\"[\")[1].split(\"]\")[0].strip()\n            comment          = \"%\".join(echoPart.split(\"%\")[1:]).strip() # \"%\".join(inputLine.split(\"%\")[1:]).strip()\n\n            # Store the objects\n            self.reactionName = reactionName\n            self.exponentn.echo = exponentn\n            self.comment.echo = comment\n\n        elif sourceType == \"tv\": # Parsed reaction line for combined format\n\n            tvPart          = inputLine.split(\"|\")[1]\n            reactionName     = inputLine.split(\":\")[0].strip()\n            comment          = \"%\".join(tvPart.split(\"!\")[1:]).strip() # \"%\".join(inputLine.split(\"!\")[1:]).strip()\n\n            # Store the objects\n            self.reactionName = reactionName\n            self.comment.tv = comment\n\n\n        elif sourceType.lower() == \"unified\":\n\n            reaction = inputLine.split(\":\")[0]\n            echoInput, tvInput = \":\".join(inputLine.split(\":\")[1:]).split(\"|\")\n\n            echoInput = reaction + \":\" + echoInput\n            tvInput = reaction + \":\" + tvInput\n\n            if \"Not present in TV\" not in tvInput:\n                self.readIn(inputLine, sourceType=\"tv\")\n\n            if \"Not present in Echo\" not in echoInput:\n                self.readIn(inputLine, sourceType=\"echo\")\n\n        else:\n            raise SourceNotDefinedException(\"'%s' is not a valid 'sourceType'\" % sourceType) # Otherwise print\n\n    def __repr__(self):\n        return str({\"reactionName\": self.reactionName, \"exponentn\": self.exponentn, \"comment\": self.comment, })\n        return str(self.reactionName) # Returns all relevant reactions\n\n\n        keykeyDict = {}\n        for key in reactionDict.keys():\n            keykeyDict[key] = key\n\n        formatString = \"{reactionName:&lt;40s} {comment:&lt;10s}\" # TV format\n        formatString = \"{reactionName:&lt;40s} {exponentn:&lt;10s} {comment:&lt;10s}\" # Echo format \n        return formatString.format(**keykeyDict)\n        return formatString.format(**reactionDict)\n\n\n    def toDict(self, priority=\"tv\"):\n        \"\"\"Returns a dictionary of all the variables, in the form {\"comment\":&lt;&gt;, \"exponentn\":&lt;&gt;, ...}. Design used is to be passed into the echo and tv style line format statements.\"\"\"\n        if priority in [\"echo\", \"tv\"                # Creating the dictionary by a large, horrible, list comprehension, to avoid even more repeated text\n            return dict([(\"reactionName\", self.reactionName)] + [(attributeName, self.__getattribute__(attributeName).__getattribute__(priority))\n               for attributeName in [\"exponentn\", \"comment\"]])\n\n            else:\n                raise SourceNotDefinedException(\"{0} source type not recognised.\".format(priority)) # Otherwise print \n\ndef find_allReactions(allReactions, reactant_set):\n    \"\"\"\n    reactant_set is the set of reactants that you want to grab all reactions which are relevant allReactions is just the set of reactions you're considering. Need to repeatedly loop through all reactions. If the current reaction only contains reactants in the reactant_set, then add all its products to the reactant set. Repeat this until reactant_set does not get larger.\n    \"\"\"\n\n    reactant_set = set(reactant_set) # this means that we can pass a list, but it will always be treated as a set.\n    #Initialise the list of reactions that we'll eventually return\n    relevant_reactions = []\n    previous_reactant_count = None\n\n    while len(reactant_set) != previous_reactant_count:\n        previous_reactant_count = len(reactant_set)\n\n    for reaction in allReactions:\n        if set(reaction.reactants).issubset(reactant_set):\n            relevant_reactions.append(reaction)\n            reactant_set = reactant_set.union(set(reaction.products))\n\n    return relevant_reactions\n\nprint find_allReactions(allReactions, [\"BR\"])\n</code></pre>\n\n<p>Current output:</p>\n\n<pre><code>'{'exponentn': {'tv': '0', 'echo': '0'}, 'comment': {'tv': 'BR-NOT USED', 'echo': 'BR-NOT USED'},'reactionName': 'E + BR &gt; BR* + E', {'exponentn': {'qvt': '0', 'qp': '0'}, 'comment': {'qvt': 'BR+ -RECOMBINATION', 'qp': 'BR+ -RECOMBINATION'},'reactionName': 'E + BR* &gt; BR* + E'\n</code></pre>\n\n<p>Desired output:<br/>  reactionName exponentn comment<br/>\nE + BR > BR* + E  0  BR+ -RECOMBINATION<br/></p>\n\n<p>E + BR* > BR* + E 0 BR-NOT USED</p>\n"}, {"tags": ["python", "pip"], "owner": {"reputation": 1089, "user_id": 1733358, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6c86a65a129decb4e07b1075eff4f992?s=128&d=identicon&r=PG", "display_name": "cppython", "link": "https://stackoverflow.com/users/1733358/cppython"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 611, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1420658855, "creation_date": 1420658855, "question_id": 27827128, "link": "https://stackoverflow.com/questions/27827128/python-package-installation-with-pip", "title": "python package installation with pip", "body": "<p>I try to install pypcap in my windows 7</p>\n\n<p>command : pip install pypcap</p>\n\n<p>output:</p>\n\n<p>Collecting pypcap</p>\n\n<p>Using cached pypcap-1.1.1.tar.gz</p>\n\n<pre><code>pcap.h not found\nComplete output from command python setup.py egg_info:\npcap.h not found\n</code></pre>\n\n<p>I have put \"pcap.h\" on system path. where should i put the pcap.h so that pip can see it?\nThank</p>\n\n<p>ps. show me how to get rid of extra space (new line) on this post  </p>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1420658023, "post_id": 27826885, "comment_id": 44059549, "body": "Have you checked that the version of SQLite your Python installation was built against matches the one from your command-line tool?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1420658129, "post_id": 27826885, "comment_id": 44059610, "body": "That is to say -- look at the <code>sqlite3.sqlite_version</code> constant. It&#39;s also worth comparing the runtime configuration -- isolation level &amp;c."}, {"owner": {"reputation": 505, "user_id": 764065, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/HHNIv.jpg?s=128&g=1", "display_name": "jdmarino", "link": "https://stackoverflow.com/users/764065/jdmarino"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1420659760, "post_id": 27826885, "comment_id": 44060521, "body": "I&#39;m on Windoze 7.  As a python noob, I have a fresh python installation courtesy of Anaconda.  <code>sqlite3.sqlite_version</code> is &#39;3.6.21&#39;.  The command-line program (courtesy of Cygwin) <code>$ sqlite3 -version</code> returns &quot;3.8.7 2014-10-17 11:24:17&quot;."}, {"owner": {"reputation": 505, "user_id": 764065, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/HHNIv.jpg?s=128&g=1", "display_name": "jdmarino", "link": "https://stackoverflow.com/users/764065/jdmarino"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1420664343, "post_id": 27826885, "comment_id": 44062993, "body": "Just for fun I tried running the sql from python using the apsw module.  Takes half a minute.  I guess the native sqlite3 module is somehow interposing itself (could it be a commit per row??) in some way.  Hrmph.  This is not an answer, but at least I have a workaround."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1420664623, "post_id": 27826885, "comment_id": 44063141, "body": "Actually -- if you aren&#39;t manually opening a transaction, you could indeed be getting autocommit behavior."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1420664704, "post_id": 27826885, "comment_id": 44063187, "body": "In general, operating directly on a connection (rather than getting a cursor, opening a transaction within it, etc) is intended more for throwaway functionality where you don&#39;t care about the details of implementation, rather than the intended mode of use."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1420664738, "post_id": 27826885, "comment_id": 44063205, "body": "Also, as you validated above, you <i>are</i> comparing a much newer version of sqlite (3.8.7, from October 2014) against a much older one (3.6.21, from December 2009), so some amount of performance difference is to be expected on that account alone."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 1, "creation_date": 1420664755, "post_id": 27826885, "comment_id": 44063213, "body": "There is not really a &quot;native&quot; SQLite. Both Python&#39;s <code>sqlite3</code> module and the <code>apsw</code> module have a compiled-in copy of the SQLite library; Python&#39;s just happens to be much older."}, {"owner": {"reputation": 505, "user_id": 764065, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/HHNIv.jpg?s=128&g=1", "display_name": "jdmarino", "link": "https://stackoverflow.com/users/764065/jdmarino"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1420727054, "post_id": 27826885, "comment_id": 44088399, "body": "@CharlesDuffy re Autocommit: Wrapping my code in <code>begin&#47;end transaction</code> didn&#39;t help, so that must not be it."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1420732116, "post_id": 27826885, "comment_id": 44091834, "body": "Well, the obvious thing is the version difference. A lot of performance optimizations can happen in five years. If it&#39;s that important to you, you can recompile your Python interpreter (and thus its standard library, thereby including sqlite3) against a new version of SQLite."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1420732213, "post_id": 27826885, "comment_id": 44091912, "body": "You could also build a command-line version of SQLite 3.6.21, and see if you get the same <i>slow</i> performance there, as an easier way to test whether the issue comes down to versioning."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1420732418, "post_id": 27826885, "comment_id": 44092055, "body": "...that said, when you say <code>begin&#47;end transaction</code>, do you mean <code>begin transaction</code> and <code>end transaction</code> commands in your SQL, as opposed to making equivalent calls on a Python cursor object? Because you really, really should be using a cursor object (and running your code through that cursor, not through the connection)."}, {"owner": {"reputation": 505, "user_id": 764065, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/HHNIv.jpg?s=128&g=1", "display_name": "jdmarino", "link": "https://stackoverflow.com/users/764065/jdmarino"}, "edited": false, "score": 0, "creation_date": 1420749674, "post_id": 27826885, "comment_id": 44102100, "body": "I meant <code>begin transaction</code> because it&#39;s part of the larger script.  Having said that, I tried using the cursor (vs. the connection), and it did not help.  I&#39;m sticking with apsw for this bit."}], "answers": [{"comments": [{"owner": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "edited": false, "score": 0, "creation_date": 1427825423, "post_id": 29375355, "comment_id": 46931408, "body": "This would look nicer if you put the code into a code block.  See the &#39;{}&#39; button in the edit window."}], "tags": [], "owner": {"reputation": 1, "user_id": 3174550, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000202150597/picture?type=large", "display_name": "user3174550", "link": "https://stackoverflow.com/users/3174550/user3174550"}, "is_accepted": false, "score": 0, "last_activity_date": 1427827529, "last_edit_date": 1427827529, "creation_date": 1427824879, "answer_id": 29375355, "question_id": 27826885, "link": "https://stackoverflow.com/questions/27826885/sql-statements-run-much-slower-in-python-than-commandline-sqlite3/29375355#29375355", "title": "sql statements run much slower in python than commandline sqlite3", "body": "<p>Calling SQLite from Python is about 100 times slower versus a command line call in my tests.  Here is a solution. I just output my query to a text file sql.txt and invoke a command line SQLite call from Python:</p>\n\n<pre><code>import subprocess\nimport sys\n\nprint subprocess.Popen(\"sqlite3 reviews.db &lt; sql.txt\", shell=True, stdout=subprocess.PIPE).stdout.read()\n</code></pre>\n\n<p>You can add multiple queries to <strong>sql.txt</strong> and call other files by using <code>.read filename</code> command</p>\n"}], "owner": {"reputation": 505, "user_id": 764065, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/HHNIv.jpg?s=128&g=1", "display_name": "jdmarino", "link": "https://stackoverflow.com/users/764065/jdmarino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 954, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427827529, "creation_date": 1420657963, "question_id": 27826885, "link": "https://stackoverflow.com/questions/27826885/sql-statements-run-much-slower-in-python-than-commandline-sqlite3", "title": "sql statements run much slower in python than commandline sqlite3", "body": "<p>I have a sql script that creates 2 temp tables, then creates 2 permanent tables based on the temp tables (4 steps).  No rows are returned.  When that script is run from the command line using \n<code>$ sqlite3 MyDB.db -init Summarize.sql</code> \nit takes less than a minute.<br>\nWhen the sql is run as a big string in python (via the sqlite3 standard module)\n<code>connection.executescript(\"\"\"&lt;contents of Summarize.sql here&gt;\"\"\")</code>\nit takes 15 minutes.  (The first 3 steps take 1 minute, the last step takes the remaining 14.)</p>\n\n<p>Given that it's the exact same sql, what could python be doing that would slow it down so much?  How can I speed this up?\n(The last step is a <code>drop table if exists xxx; create table xxx as select ...</code>  It's a join, but it's the same join that the command line runs quickly.)  A friend suggested the apsw module, but I'm loathe to switch without strong cause.</p>\n"}, {"tags": ["python", "html", "css", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 6, "last_activity_date": 1420658025, "creation_date": 1420658025, "answer_id": 27826904, "question_id": 27826883, "link": "https://stackoverflow.com/questions/27826883/select-all-div-siblings-by-using-beautifulsoup/27826904#27826904", "title": "Select all div siblings by using BeautifulSoup", "body": "<p>You can find <em>direct</em> children of the parent element:</p>\n\n<pre><code>soup.select('body &gt; div')\n</code></pre>\n\n<p>to get all <code>div</code> elements under the top-level <code>body</code> tag.</p>\n\n<p>You could also find the <em>first</em> <code>div</code>, then grab all matching siblings with <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/#next-siblings-and-previous-siblings\" rel=\"noreferrer\"><code>Element.find_next_siblings()</code></a>:</p>\n\n<pre><code>first_div = soup.find('div')\nall_divs = [first_div] + first_div.find_next_siblings('div')\n</code></pre>\n\n<p>Or you could use the <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/#contents-and-children\" rel=\"noreferrer\"><code>element.children</code> generator</a> and filter those:</p>\n\n<pre><code>all_divs = (elem for elem in top_level.children if getattr(elem, 'name', None) == 'div')\n</code></pre>\n\n<p>where <code>top_level</code> is the element containing these <code>div</code> elements directly.</p>\n"}], "owner": {"reputation": 11185, "user_id": 1055637, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8a8b9e4daac99ea95aa3e8e246716e73?s=128&d=identicon&r=PG", "display_name": "Mazzy", "link": "https://stackoverflow.com/users/1055637/mazzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5345, "favorite_count": 1, "accepted_answer_id": 27826904, "answer_count": 1, "score": 3, "last_activity_date": 1420658025, "creation_date": 1420657957, "question_id": 27826883, "link": "https://stackoverflow.com/questions/27826883/select-all-div-siblings-by-using-beautifulsoup", "title": "Select all div siblings by using BeautifulSoup", "body": "<p>I have an html file which has a structure like the following:</p>\n\n<pre><code>&lt;div&gt;\n&lt;/div\n\n&lt;div&gt;\n&lt;/div&gt;\n\n&lt;div&gt;\n  &lt;div&gt;\n  &lt;/div&gt;\n  &lt;div&gt;\n  &lt;/div&gt;\n  &lt;div&gt;\n  &lt;/div&gt;\n&lt;div&gt;\n\n&lt;div&gt;\n  &lt;div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I would like to select all the siblings div without selecting nested div in the third and fourth block. If I use <code>find_all()</code> I get all the divs.</p>\n"}, {"tags": ["python", "imagemagick", "wand"], "comments": [{"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1527024951, "post_id": 27826854, "comment_id": 87967118, "body": "After spending half an hour on <code>wand</code> and ImageMagick, and <a href=\"https://stackoverflow.com/questions/13984357/pythonmagick-cant-find-my-pdf-files\">all the complexity needed on Windows</a>, I finally used a <a href=\"https://stackoverflow.com/a/50476765/1422096\">very short solution using <code>pdftoppm</code></a>. Inspired by <a href=\"https://askubuntu.com/a/50180/364627\">How to convert PDF to Image?</a>."}], "answers": [{"tags": [], "owner": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "is_accepted": false, "score": 9, "last_activity_date": 1420659654, "last_edit_date": 1495540015, "creation_date": 1420659654, "answer_id": 27827341, "question_id": 27826854, "link": "https://stackoverflow.com/questions/27826854/python-wand-convert-pdf-to-png-disable-transparent-alpha-channel/27827341#27827341", "title": "Python Wand convert PDF to PNG disable transparent (alpha_channel)", "body": "<p>From a <a href=\"https://stackoverflow.com/a/27568049/438117\">previous answer</a>, try creating an empty image with a background color, then composite over.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from wand.image import Image\nfrom wand.color import Color\n\nwith Image(filename=\"sample.pdf\", resolution=300) as img:\n  with Image(width=img.width, height=img.height, background=Color(\"white\")) as bg:\n    bg.composite(img,0,0)\n    bg.save(filename=\"image.png\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7383, "user_id": 303931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9e4f07d0a64294640efc6a1a47e9963?s=128&d=identicon&r=PG", "display_name": "RecursivelyIronic", "link": "https://stackoverflow.com/users/303931/recursivelyironic"}, "is_accepted": false, "score": 2, "last_activity_date": 1455591251, "creation_date": 1455591251, "answer_id": 35422827, "question_id": 27826854, "link": "https://stackoverflow.com/questions/27826854/python-wand-convert-pdf-to-png-disable-transparent-alpha-channel/35422827#35422827", "title": "Python Wand convert PDF to PNG disable transparent (alpha_channel)", "body": "<p>The other answer (compositing with a white image) works, but only on the last page, as does setting the alpha channel directly. The following works on wand 0.4.2:</p>\n\n<pre><code>im = wand_image(filename='/tmp/foo.pdf', resolution=200)\nfor i, page in enumerate(im.sequence):\n    with wand_image(page) as page_image:\n        page_image.alpha_channel = False\n        page_image.save(filename='/tmp/foo.pdf.images/page-%s.png' % i)\n</code></pre>\n\n<p>I think this is probably a bug in wand. It seems like setting the alpha channel for a PDF <em>should</em> affect all pages, but it doesn't.</p>\n"}, {"comments": [{"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1527021961, "post_id": 36279291, "comment_id": 87965920, "body": "This is useful after installing wand and imagemagick and can save hours of debugging ;) <a href=\"https://stackoverflow.com/questions/13984357/pythonmagick-cant-find-my-pdf-files\" title=\"pythonmagick cant find my pdf files\">stackoverflow.com/questions/13984357/&hellip;</a>"}, {"owner": {"reputation": 3664, "user_id": 1114506, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/S9yTM.jpg?s=128&g=1", "display_name": "Rajesh", "link": "https://stackoverflow.com/users/1114506/rajesh"}, "edited": false, "score": 0, "creation_date": 1610636126, "post_id": 36279291, "comment_id": 116199859, "body": "very simple solution and just works perfectly!"}], "tags": [], "owner": {"reputation": 2188, "user_id": 3983708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ede4dce579c3a8b0711ce8256c2b89b?s=128&d=identicon&r=PG", "display_name": "Manuel Riel", "link": "https://stackoverflow.com/users/3983708/manuel-riel"}, "is_accepted": false, "score": 15, "last_activity_date": 1459240563, "creation_date": 1459240563, "answer_id": 36279291, "question_id": 27826854, "link": "https://stackoverflow.com/questions/27826854/python-wand-convert-pdf-to-png-disable-transparent-alpha-channel/36279291#36279291", "title": "Python Wand convert PDF to PNG disable transparent (alpha_channel)", "body": "<p>I also had some PDFs to convert to PNG. This worked for me and seems simpler than compositing images, as shown above.:</p>\n\n<pre><code>all_pages = Image(blob=self.pdf)        # PDF will have several pages.\nsingle_image = all_pages.sequence[0]    # Just work on first page\nwith Image(single_image) as i:\n    i.format = 'png'\n    i.background_color = Color('white') # Set white background.\n    i.alpha_channel = 'remove'          # Remove transparency and replace with bg.\n</code></pre>\n\n<p>Reference: <a href=\"http://docs.wand-py.org/en/0.4.1/wand/image.html#wand.image.BaseImage.alpha_channel\">wand.image</a></p>\n"}, {"tags": [], "owner": {"reputation": 1443, "user_id": 6476044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496b8187789a4fdf01ec7b3eecacea98?s=128&d=identicon&r=PG&f=1", "display_name": "ands", "link": "https://stackoverflow.com/users/6476044/ands"}, "is_accepted": false, "score": 2, "last_activity_date": 1593413526, "last_edit_date": 1593413526, "creation_date": 1478630891, "answer_id": 40494320, "question_id": 27826854, "link": "https://stackoverflow.com/questions/27826854/python-wand-convert-pdf-to-png-disable-transparent-alpha-channel/40494320#40494320", "title": "Python Wand convert PDF to PNG disable transparent (alpha_channel)", "body": "<p>For those who are still having problem with this, I found solution (it works in version 0.4.1 and above, I am not sure about earlier versions).\nSo you should just use something like this:</p>\n<pre><code>from wand.image import Image\nfrom wand.color import Color\n\n\nwith Image(filename='sample.pdf', resolution=300) as img:\nimg.background_color = Color(&quot;white&quot;)\nimg.alpha_channel = 'remove'\nimg.save(filename='image.png')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 732, "user_id": 4979620, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-DEUxr1BQqKQ/AAAAAAAAAAI/AAAAAAAAG98/T2aDvXbz9vU/photo.jpg?sz=128", "display_name": "Thibaut Mattio", "link": "https://stackoverflow.com/users/4979620/thibaut-mattio"}, "is_accepted": false, "score": 9, "last_activity_date": 1536758017, "last_edit_date": 1536758017, "creation_date": 1488351163, "answer_id": 42525093, "question_id": 27826854, "link": "https://stackoverflow.com/questions/27826854/python-wand-convert-pdf-to-png-disable-transparent-alpha-channel/42525093#42525093", "title": "Python Wand convert PDF to PNG disable transparent (alpha_channel)", "body": "<p>Compiling the other answers, here is the function I use to convert a PDF into pages:</p>\n\n<pre><code>import os\nfrom wand.image import Image\nfrom wand.color import Color\n\n\ndef convert_pdf(filename, output_path, resolution=150):\n    \"\"\" Convert a PDF into images.\n\n        All the pages will give a single png file with format:\n        {pdf_filename}-{page_number}.png\n\n        The function removes the alpha channel from the image and\n        replace it with a white background.\n    \"\"\"\n    all_pages = Image(filename=filename, resolution=resolution)\n    for i, page in enumerate(all_pages.sequence):\n        with Image(page) as img:\n            img.format = 'png'\n            img.background_color = Color('white')\n            img.alpha_channel = 'remove'\n\n            image_filename = os.path.splitext(os.path.basename(filename))[0]\n            image_filename = '{}-{}.png'.format(image_filename, i)\n            image_filename = os.path.join(output_path, image_filename)\n\n            img.save(filename=image_filename)\n</code></pre>\n"}], "owner": {"reputation": 249, "user_id": 4430090, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Z9bjPif1wFg/AAAAAAAAAAI/AAAAAAAAAEo/sAZz4lt9z6U/photo.jpg?sz=128", "display_name": "Munro", "link": "https://stackoverflow.com/users/4430090/munro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33975, "favorite_count": 13, "answer_count": 5, "score": 20, "last_activity_date": 1593413526, "creation_date": 1420657851, "question_id": 27826854, "link": "https://stackoverflow.com/questions/27826854/python-wand-convert-pdf-to-png-disable-transparent-alpha-channel", "title": "Python Wand convert PDF to PNG disable transparent (alpha_channel)", "body": "<p>I'm trying to convert a PDF to PNG - this all works fine, however, the output image is still transparent even when I believe I have disabled it:</p>\n\n<pre><code>with Image(filename='sample.pdf', resolution=300) as img:\n    img.background_color = Color(\"white\")\n    img.alpha_channel = False\n    img.save(filename='image.png')\n</code></pre>\n\n<p>The above produces the images but are transparent, I also tried the below:</p>\n\n<pre><code>with Image(filename='sample.pdf', resolution=300, background=Color('white')) as img:\n    img.alpha_channel = False\n    img.save(filename='image.png')\n</code></pre>\n\n<p>which produces this error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"file_convert.py\", line 20, in &lt;module&gt;\n    with Image(filename='sample.pdf', resolution=300, background=Color('white')) as img:\n  File \"/Users/Frank/.virtualenvs/wand/lib/python2.7/site-packages/wand/image.py\", line 1943, in __init__\n    raise TypeError(\"blank image parameters can't be used with image \"\nTypeError: blank image parameters can't be used with image opening parameters\n</code></pre>\n"}, {"tags": ["python", "openssl", "aes", "py2app"], "comments": [{"owner": {"reputation": 300, "user_id": 2431569, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/76ed5db674246105760d49c31646ff08?s=128&d=identicon&r=PG", "display_name": "Lumy", "link": "https://stackoverflow.com/users/2431569/lumy"}, "reply_to_user": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1421766718, "post_id": 27826834, "comment_id": 44479563, "body": "No i couldn&#39;t, I&#39;ve found some road for this, like recompile yourself openssl and other dependencies, but that was not possible for my situation (on a mac, and not an expert mac, so recompile with all dependencies, using xcode wasn&#39;t an option. Should I add my edit as an answer or it&#39;s just a tips for the next time ?"}], "answers": [{"tags": [], "owner": {"reputation": 300, "user_id": 2431569, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/76ed5db674246105760d49c31646ff08?s=128&d=identicon&r=PG", "display_name": "Lumy", "link": "https://stackoverflow.com/users/2431569/lumy"}, "is_accepted": false, "score": 1, "last_activity_date": 1421767505, "last_edit_date": 1495539870, "creation_date": 1421767390, "answer_id": 28049021, "question_id": 27826834, "link": "https://stackoverflow.com/questions/27826834/py2app-pycrypto-aes-not-found/28049021#28049021", "title": "py2app, pycrypto, aes not found", "body": "<p>After few days of looking, I've found a post on stackoverflow where they explain that py2app will not take libraries that come either from /usr/lib  or /System\n<a href=\"https://stackoverflow.com/questions/17015490/include-openssl-in-app\">Include openssl in app</a> there is logical reason to that.</p>\n\n<p>So they propose to recompile yourself OpenSSL and other dependencies and as I'm on a mac, and not an expert of XCode and mac, i decided this was not a <strong>fast</strong> solution for me.</p>\n\n<p>After other look I've found pyinstaller <a href=\"https://github.com/pyinstaller/pyinstaller/wiki\" rel=\"nofollow noreferrer\">https://github.com/pyinstaller/pyinstaller/wiki</a> which does the same as py2app but with less trouble.</p>\n\n<p>You just have to be sure that all your package are installed on your system (or virtualenv) and it's works well.</p>\n"}, {"comments": [{"owner": {"reputation": 4546, "user_id": 2083613, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/QY0hu.png?s=128&g=1", "display_name": "dakab", "link": "https://stackoverflow.com/users/2083613/dakab"}, "edited": false, "score": 0, "creation_date": 1448145166, "post_id": 33849183, "comment_id": 55463268, "body": "What does it do? How does it help with the problem? You could improve your answer by adding information or reference."}], "tags": [], "owner": {"reputation": 929, "user_id": 1093289, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/yIIK1.jpg?s=128&g=1", "display_name": "beyondfloatingpoint", "link": "https://stackoverflow.com/users/1093289/beyondfloatingpoint"}, "is_accepted": false, "score": 0, "last_activity_date": 1448143836, "creation_date": 1448143836, "answer_id": 33849183, "question_id": 27826834, "link": "https://stackoverflow.com/questions/27826834/py2app-pycrypto-aes-not-found/33849183#33849183", "title": "py2app, pycrypto, aes not found", "body": "<p>You may try fixing the problem with </p>\n\n<pre><code>pip install slowaes\n</code></pre>\n"}], "owner": {"reputation": 300, "user_id": 2431569, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/76ed5db674246105760d49c31646ff08?s=128&d=identicon&r=PG", "display_name": "Lumy", "link": "https://stackoverflow.com/users/2431569/lumy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1448143836, "creation_date": 1420657814, "last_edit_date": 1495540745, "question_id": 27826834, "link": "https://stackoverflow.com/questions/27826834/py2app-pycrypto-aes-not-found", "title": "py2app, pycrypto, aes not found", "body": "<p>It's the first time I'm using py2app.\nI've manage to make a bundle(?)/app from my python scripts, but as said in this topics <a href=\"https://stackoverflow.com/questions/17015490/include-openssl-in-app\">Include openssl in app</a> openssl is not include in my app, but i don't understand if pycrypto can not be included also or if i'm doing wrong.\nSo when I try to execute my app, i got an ImportError telling me that aes was not found.</p>\n\n<pre><code>main[15198]:   File \"/Users/lumy-meludia/Meludia/clients/campaign_manager_gui/dist/main.app/Contents/Resources/__boot__.py\", line 351, in &lt;module&gt;\nmain[15198]:     _run()\nmain[15198]:   File \"/Users/lumy-meludia/Meludia/clients/campaign_manager_gui/dist/main.app/Contents/Resources/__boot__.py\", line 336, in _run\nmain[15198]:     exec(compile(source, path, 'exec'), globals(), globals())\nmain[15198]:   File \"/Users/lumy-meludia/Meludia/clients/campaign_manager_gui/dist/main.app/Contents/Resources/main.py\", line 16, in &lt;module&gt;\nmain[15198]:     from campaign_manager_gui.client_campaign.CampaignClient import run\nmain[15198]:   File \"campaign_manager_gui/client_campaign/CampaignClient.pyc\", line 21, in &lt;module&gt;\nmain[15198]:   File \"pymelu_client/client/ClientNetwork.pyc\", line 13, in &lt;module&gt;\nmain[15198]:   File \"OpenSSL/__init__.pyc\", line 8, in &lt;module&gt;\nmain[15198]:   File \"OpenSSL/rand.pyc\", line 11, in &lt;module&gt;\nmain[15198]:   File \"OpenSSL/_util.pyc\", line 4, in &lt;module&gt;\nmain[15198]:   File \"cryptography/hazmat/bindings/openssl/binding.pyc\", line 89, in __init__\nmain[15198]:   File \"cryptography/hazmat/bindings/openssl/binding.pyc\", line 113, in _ensure_ffi_initialized\nmain[15198]:   File \"cryptography/hazmat/bindings/utils.pyc\", line 47, in build_ffi\nmain[15198]: ImportError: No module named aes\n</code></pre>\n\n<p>i've tried to add pycrypto to the include in my setup file</p>\n\n<pre><code>APP = [\"campaign_manager_gui/gui/main.py\"]\nDATA_FILES = ['campaign_manager_gui/gui', 'campaign_manager_gui/client_campaign',]\nOPTIONS = {'argv_emulation': True, 'includes': ['pycrypto']}\nsetup(\n  app=APP,\n  data_files=DATA_FILES,\n  options={'py2app': OPTIONS},\n  setup_requires=['py2app'],\n)\n</code></pre>\n\n<p>but the result of <code>py setup.py py2app</code> give me </p>\n\n<pre><code>running py2app\ncreating /Users/lumy-meludia/Meludia/clients/campaign_manager_gui/build/bdist.macosx-10.9-x86_64/python2.7-standalone/app\ncreating /Users/lumy-meludia/Meludia/clients/campaign_manager_gui/build/bdist.macosx-10.9-x86_64/python2.7-standalone/app/collect\ncreating /Users/lumy-meludia/Meludia/clients/campaign_manager_gui/build/bdist.macosx-10.9-x86_64/python2.7-standalone/app/temp\ncreating build/bdist.macosx-10.9-x86_64/python2.7-standalone/app/lib-dynload\ncreating build/bdist.macosx-10.9-x86_64/python2.7-standalone/app/Frameworks\n/Users/lumy-meludia/.pyenv/versions/env_2.7/lib/python2.7/site-packages/modulegraph/find_modules.py:258: UserWarning: No module named pycrypto\n  warn(\"No module named %s\"%(mod,))\n*** using recipe: virtualenv ***\n*** using recipe: ftplib ***\n*** using recipe: lxml ***\n*** using recipe: xml ***\n*** using recipe: sip ***\n*** using recipe: pydoc ***\n*** using recipe: ctypes ***\n*** filtering dependencies ***\n1191 total\n46 filtered\n115 orphaned\n1145 remaining\n*** create binaries ***\n[...]\n</code></pre>\n\n<p>Could you help me to include pycrypto and Openssl in my app?</p>\n"}, {"tags": ["python", "python-2.7", "parallel-processing", "dispy"], "comments": [{"owner": {"reputation": 275, "user_id": 1267301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a9bc78ff1ddc187963b680ac6e066a?s=128&d=identicon&r=PG", "display_name": "Doug", "link": "https://stackoverflow.com/users/1267301/doug"}, "edited": false, "score": 0, "creation_date": 1420657685, "post_id": 27826800, "comment_id": 44059369, "body": "By the way, wasn&#39;t allowed to create a dispy tag, seems like that might be helpful."}, {"owner": {"reputation": 10441, "user_id": 42897, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/oDPxy.png?s=128&g=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/42897/rich"}, "edited": false, "score": 1, "creation_date": 1420658135, "post_id": 27826800, "comment_id": 44059611, "body": "Any chance the dispy versions are different between the client and slaves?"}, {"owner": {"reputation": 275, "user_id": 1267301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a9bc78ff1ddc187963b680ac6e066a?s=128&d=identicon&r=PG", "display_name": "Doug", "link": "https://stackoverflow.com/users/1267301/doug"}, "reply_to_user": {"reputation": 10441, "user_id": 42897, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/oDPxy.png?s=128&g=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/42897/rich"}, "edited": false, "score": 0, "creation_date": 1420658560, "post_id": 27826800, "comment_id": 44059840, "body": "Hey @Rich that&#39;s a good call. I just dug through dispynode.py source and saw that there is a try/except block where if the versions don&#39;t match it tosses the &quot;ignore ping&quot; message. Wouldn&#39;t it be helpful if the error message mentioned why it was being raised, lol. Oh well, Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 275, "user_id": 1267301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a9bc78ff1ddc187963b680ac6e066a?s=128&d=identicon&r=PG", "display_name": "Doug", "link": "https://stackoverflow.com/users/1267301/doug"}, "is_accepted": true, "score": 0, "last_activity_date": 1422290109, "creation_date": 1422290109, "answer_id": 28154460, "question_id": 27826800, "link": "https://stackoverflow.com/questions/27826800/why-does-dispynode-return-ignoring-ping-when-contacted-by-dispy-client/28154460#28154460", "title": "Why does dispynode return &quot;ignoring ping&quot; when contacted by dispy client?", "body": "<p>The answer is as @Rich mentioned above, versions must be the same. Dispy does not return a very helpful error message when client nodes and server nodes have different versions. They must have the same version number in order to communicate properly. I found this in the source code for dispynode.py:</p>\n\n<pre><code>try:\n                info = unserialize(msg[len('PING:'):])\n                assert info['version'] == _dispy_version\n                if info['ip_addr'] is None:\n                    addr = (addr[0], info['port'])\n                else:\n                    addr = (info['ip_addr'], info['port'])\nexcept:\n                logger.debug('Ignoring ping message from %s (%s)', addr[0], addr[1])\n                continue\n</code></pre>\n\n<p>Note the assert version line.</p>\n"}], "owner": {"reputation": 275, "user_id": 1267301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a9bc78ff1ddc187963b680ac6e066a?s=128&d=identicon&r=PG", "display_name": "Doug", "link": "https://stackoverflow.com/users/1267301/doug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 28154460, "answer_count": 1, "score": 2, "last_activity_date": 1422290109, "creation_date": 1420657637, "last_edit_date": 1420657808, "question_id": 27826800, "link": "https://stackoverflow.com/questions/27826800/why-does-dispynode-return-ignoring-ping-when-contacted-by-dispy-client", "title": "Why does dispynode return &quot;ignoring ping&quot; when contacted by dispy client?", "body": "<p>I'm working with a cluster of Centos6.5 servers, where I have one head node and the rest are slave nodes. The nodes are connected through a switch on a local network 192.168.1.x that's not visible to the outside world.</p>\n\n<p>I'm trying to use Python Dispy on the head node to distribute a Python script on the slave nodes. The slave nodes are all running dispynode.py and when I fire up the Dispy program on the client node the slaves running dispynode.py return \"ignoring ping from 192.168.1.1\". It then just hangs. Any ideas on why the slaves running dispynode are ignoring and not running the job?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1420657429, "post_id": 27826702, "comment_id": 44059231, "body": "I think <code>converted = df[[df.columns[:-10]].convert_objects(convert_numeric=True)</code> should work"}, {"owner": {"reputation": 5569, "user_id": 2690949, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/hqCRd.jpg?s=128&g=1", "display_name": "wolfsatthedoor", "link": "https://stackoverflow.com/users/2690949/wolfsatthedoor"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1420657646, "post_id": 27826702, "comment_id": 44059345, "body": "Parens is not balanced"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1420657897, "post_id": 27826702, "comment_id": 44059480, "body": "Sorry try this I can post an example: <code>df[df.columns[-10:]].convert_objects(convert_numeric=True)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": true, "score": 2, "last_activity_date": 1420662239, "last_edit_date": 1420662239, "creation_date": 1420657956, "answer_id": 27826882, "question_id": 27826702, "link": "https://stackoverflow.com/questions/27826702/how-to-convert-the-last-several-columns-to-integer-from-string-type-in-pandas/27826882#27826882", "title": "How to convert the last several columns to integer from string type in pandas", "body": "<p>I think the fastest method is to use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.convert_objects.html#pandas.DataFrame.convert_objects\" rel=\"nofollow\"><code>convert_objects</code></a> and select the last 10 columns using subscript/slicing notation, example:</p>\n\n<pre><code>In [23]:\n\ndf = pd.DataFrame({'a':['1','2','3','4','5']})\n\ndf = pd.concat([df]*11, axis=1)\ndf.columns = list('abcdefghijk')\ndf.info()\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nInt64Index: 5 entries, 0 to 4\nData columns (total 11 columns):\na    5 non-null object\nb    5 non-null object\nc    5 non-null object\nd    5 non-null object\ne    5 non-null object\nf    5 non-null object\ng    5 non-null object\nh    5 non-null object\ni    5 non-null object\nj    5 non-null object\nk    5 non-null object\ndtypes: object(11)\nmemory usage: 480.0+ bytes\nIn [21]:\n\nconverted = df[df.columns[-10:]].convert_objects(convert_numeric=True)\nconverted\nOut[21]:\n   b  c  d  e  f  g  h  i  j  k\n0  1  1  1  1  1  1  1  1  1  1\n1  2  2  2  2  2  2  2  2  2  2\n2  3  3  3  3  3  3  3  3  3  3\n3  4  4  4  4  4  4  4  4  4  4\n4  5  5  5  5  5  5  5  5  5  5\nIn [22]:\n\nconverted.info()\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nInt64Index: 5 entries, 0 to 4\nData columns (total 10 columns):\nb    5 non-null int64\nc    5 non-null int64\nd    5 non-null int64\ne    5 non-null int64\nf    5 non-null int64\ng    5 non-null int64\nh    5 non-null int64\ni    5 non-null int64\nj    5 non-null int64\nk    5 non-null int64\ndtypes: int64(10)\nmemory usage: 440.0 bytes\n</code></pre>\n\n<p>You can then either directly assign the result back:</p>\n\n<pre><code>In [31]:\n\ndf[df.columns[-10:]] = converted\ndf.info()\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nInt64Index: 5 entries, 0 to 4\nData columns (total 11 columns):\na    5 non-null object\nb    5 non-null int64\nc    5 non-null int64\nd    5 non-null int64\ne    5 non-null int64\nf    5 non-null int64\ng    5 non-null int64\nh    5 non-null int64\ni    5 non-null int64\nj    5 non-null int64\nk    5 non-null int64\ndtypes: int64(10), object(1)\nmemory usage: 480.0+ bytes\n</code></pre>\n\n<p>or do it in a 1 liner:</p>\n\n<pre><code>In [33]:\n\ndf[df.columns[-10:]] = df[df.columns[-10:]].convert_objects(convert_numeric=True)\ndf.info()\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nInt64Index: 5 entries, 0 to 4\nData columns (total 11 columns):\na    5 non-null object\nb    5 non-null int64\nc    5 non-null int64\nd    5 non-null int64\ne    5 non-null int64\nf    5 non-null int64\ng    5 non-null int64\nh    5 non-null int64\ni    5 non-null int64\nj    5 non-null int64\nk    5 non-null int64\ndtypes: int64(10), object(1)\nmemory usage: 480.0+ bytes\n</code></pre>\n"}], "owner": {"reputation": 5569, "user_id": 2690949, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/hqCRd.jpg?s=128&g=1", "display_name": "wolfsatthedoor", "link": "https://stackoverflow.com/users/2690949/wolfsatthedoor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1605, "favorite_count": 2, "accepted_answer_id": 27826882, "answer_count": 1, "score": 3, "last_activity_date": 1420662239, "creation_date": 1420657276, "question_id": 27826702, "link": "https://stackoverflow.com/questions/27826702/how-to-convert-the-last-several-columns-to-integer-from-string-type-in-pandas", "title": "How to convert the last several columns to integer from string type in pandas", "body": "<p>I have a df called <code>df</code>.</p>\n\n<p>I want to convert the last 10 columns of this dataframe from string type to integers.  How can I do this the pythonic way?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 2, "creation_date": 1420657757, "post_id": 27826693, "comment_id": 44059410, "body": "maybe it be more clear if you show an example !"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1420657899, "post_id": 27826693, "comment_id": 44059483, "body": "You are explicitly <code>insert</code>ing a new, single-element list into <code>mapxy</code>. If that&#39;s not what you want, why <code>[&quot;1&quot;]</code> rather than <code>&quot;1&quot;</code> (or <code>1</code>, an actual integer)?"}, {"owner": {"reputation": 59, "user_id": 3551254, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1050114834/picture?type=large", "display_name": "Edwin W.", "link": "https://stackoverflow.com/users/3551254/edwin-w"}, "edited": false, "score": 0, "creation_date": 1420658986, "post_id": 27826693, "comment_id": 44060079, "body": "Im sorry, my friends stressed me out so it seems I tohught i finnished the question before I did. Its suppose to say that I remove it after aswell to more or less &quot;move&quot; it. Im going to edit it soon.  The reasons to why its [&quot;1&quot;] i dont honestly know... As I said I barely get alot of this and am very new to it, thats why I am asking for someone to help me."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1420659676, "post_id": 27826693, "comment_id": 44060465, "body": "You could show an example 4x4 array before and after the operation."}], "answers": [{"tags": [], "owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "is_accepted": false, "score": 0, "last_activity_date": 1420658209, "creation_date": 1420658209, "answer_id": 27826954, "question_id": 27826693, "link": "https://stackoverflow.com/questions/27826693/moving-object-in-list/27826954#27826954", "title": "Moving object in list", "body": "<p><code>mapxy</code> is a list of lists (with apparently all \"cells\" initialized to the single item <code>mapList[o]</code>, which is slightly strange).  So <code>pop</code> and <code>insert</code> into it would remove and respectively add a whole list at a time, not a single item.</p>\n\n<p>You say you want to \"move\" an item but not what should take its place.  If you just want to <strong>copy</strong> the item, it's clearly just:</p>\n\n<pre><code>map[x+1][y] = map[x][y]\n</code></pre>\n\n<p>but if the previous <code>map[x][y]</code> must be filled w/something else you'll then have to assign to that, too, of course.  Exactly the same for \"moving\" along <code>y</code> rather than along <code>x</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "is_accepted": false, "score": 0, "last_activity_date": 1420662448, "creation_date": 1420662448, "answer_id": 27828064, "question_id": 27826693, "link": "https://stackoverflow.com/questions/27826693/moving-object-in-list/27828064#27828064", "title": "Moving object in list", "body": "<p>Use a dictionary with a tuple as key:</p>\n\n<pre><code>map = {}\nfor x in range(16):\n    for y in range(16):\n        map[x, y] = 0\n</code></pre>\n\n<p>Actually, you could avoid the initialization and check whether an element is set or use a default value. Concerning this default value, consider <code>None</code>, too. With this dict, you can \"move\" elements easily:</p>\n\n<pre><code>map[1, 2] = 42\nv = map.pop((1, 2))\nmap[3, 4] = v\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1406, "user_id": 1134445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f67e98e52709b4a815541838887e636?s=128&d=identicon&r=PG", "display_name": "dopstar", "link": "https://stackoverflow.com/users/1134445/dopstar"}, "is_accepted": false, "score": 0, "last_activity_date": 1420671222, "creation_date": 1420671222, "answer_id": 27830127, "question_id": 27826693, "link": "https://stackoverflow.com/questions/27826693/moving-object-in-list/27830127#27830127", "title": "Moving object in list", "body": "<p>Here is the full script that I think does what you want. But before I just paste it and run away, there two things worth saying. 1. You need to swap items in-place. 2. You need to cater for the out of range index errors. </p>\n\n<p>To first i envisaged using a <code>deque</code> of deques with <code>maxlen</code> field set. <code>deque</code> is available from the <code>collections</code> library. So to shift left, you pop at the right and insert at the left and to shift to the right you pop at the left and append at the right. But then I had another idea.</p>\n\n<p>You stick with the list of lists, you swap items in-place and avoid out of range errors by the new computed index is within the set of non-negative integers modulo length of the list containing the item.</p>\n\n<p>Enough talking. To swap in-place in python, given:</p>\n\n<pre><code>x = [8, 21, 100, 9, 5]\n</code></pre>\n\n<p>You do:</p>\n\n<pre><code>x[2], x[3] = x[3], x[2]\n</code></pre>\n\n<p>Resulting in:</p>\n\n<pre><code>x = [8, 21, 9, 100, 5]\n</code></pre>\n\n<p>The script below keeps track of two indices, <code>x</code>  corresponds to the index of the item, the string, being moved left and right and <code>y</code> corresponds to the index of the inner list item containing the the item to be moved left and right (the inner list itself is moved up and down). By index i mean position. So <code>x</code> points to the string, <code>y</code> points to the list. </p>\n\n<p>To move up and down the containing list, you only need to know the index of the list to move, <code>y</code>. To move left and right the item (the string), you need to know both the containing list index <code>y</code> and the item index <code>x</code>.</p>\n\n<hr>\n\n<pre><code>#!/usr/bin/python\n\nfrom collections import deque\n\ndef move_dowm(data, y):\n    old_y = y\n    y = (y + 1) % len(data)\n    data[old_y], data[y] = data[y], data[old_y]\n    return y\n\ndef move_up(data, y):\n    old_y = y\n    y = (y - 1) % len(data)\n    data[old_y], data[y] = data[y], data[old_y]\n    return y\n\ndef move_right(data, x, y):\n    old_x = x\n    x = (x + 1) % len(data[y])\n    data[y][old_x], data[y][x] = data[y][x], data[y][old_x]\n    return x\n\ndef move_left(data, x, y):\n    old_x = x\n    x = (x - 1) % len(data[y])\n    data[y][old_x], data[y][x] = data[y][x], data[y][old_x]\n    return x\n\nif __name__ == '__main__':\n    dataset = [\n        [' ', ' ', ' ', ' '],\n        ['1', ' ', ' ', ' '],\n        [' ', ' ', ' ', ' '],\n        [' ', ' ', ' ', ' '],\n    ]\n    x, y = 0, 1\n\n    print dataset\n    print '-' * 90\n\n    y = move_up(dataset, y)\n    print dataset\n    print '-' * 90\n\n    y = move_dowm(dataset, y)\n    print dataset\n    print '-' * 90\n\n    x = move_left(dataset, x, y)\n    print dataset\n    print '-' * 90\n\n    x = move_right(dataset, x, y)\n    print dataset\n    print\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 3551254, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1050114834/picture?type=large", "display_name": "Edwin W.", "link": "https://stackoverflow.com/users/3551254/edwin-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1420671222, "creation_date": 1420657242, "last_edit_date": 1420660550, "question_id": 27826693, "link": "https://stackoverflow.com/questions/27826693/moving-object-in-list", "title": "Moving object in list", "body": "<p>I made a list like this: </p>\n\n<pre><code>mapxy = [[0 for x in range(16)] for x in range(16)]\n</code></pre>\n\n<p>and I add object from another normal list like this:  </p>\n\n<pre><code>for y in range(0, 16):\n    for x in range(0, 16):\n        mapxy[x][y] = mapList[o]\n</code></pre>\n\n<p>Then I want to move one object in the list both down and just change the first index moving it left and right in the list <code>mapxy[x+1][y]</code></p>\n\n<pre><code>mapxy.pop(f_pos_x)\nmapxy.insert(f_pos_x + 1, [\"1\"])\nf_pos_x += 1\n</code></pre>\n\n<p><em>(this didn't work quite as I wanted it too, it ended up in-between/created another list inside the first list instead of inserting in the inner list like I wanted it to.)</em></p>\n\n<p>but also up and down on <code>y</code>: <code>mapxy[x][y+1]</code>.</p>\n\n<p>How I want it to look:\nOriginal</p>\n\n<pre><code> mapxy = [[\" \", \" \", \"1\",\" \"][\" \", \" \", \" \",\" \"][\" \", \" \", \" \",\" \"][\" \", \" \", \" \",\" \"]]\n</code></pre>\n\n<p>When i press right:</p>\n\n<pre><code>mapxy = [[\" \", \" \", \" \",\"1\"][\" \", \" \", \" \",\" \"][\" \", \" \", \" \",\" \"][\" \", \" \", \" \",\" \"]]\n</code></pre>\n\n<p>And when I press down:</p>\n\n<pre><code>   mapxy = [[\" \", \" \", \" \",\" \"][\" \", \" \", \" \",\"1\"][\" \", \" \", \" \",\" \"][\" \", \" \", \" \",\" \"]]\n</code></pre>\n"}, {"tags": ["python", "arrays", "matrix"], "answers": [{"tags": [], "owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "is_accepted": true, "score": 1, "last_activity_date": 1420657171, "creation_date": 1420657171, "answer_id": 27826669, "question_id": 27826641, "link": "https://stackoverflow.com/questions/27826641/simple-n-x-n-matrix-in-python-not-working/27826669#27826669", "title": "simple n x n matrix in python not working", "body": "<p>The problem is that <code>listof</code> ends up consisting of four references <em>to the same list</em>. As a result, when you change an element in one row, it changes in all rows.</p>\n"}], "owner": {"reputation": 13, "user_id": 4430170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/138d57673a719ea450155fb5d8d027fa?s=128&d=identicon&r=PG&f=1", "display_name": "overlord", "link": "https://stackoverflow.com/users/4430170/overlord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1420657275, "accepted_answer_id": 27826669, "answer_count": 1, "score": 1, "last_activity_date": 1420657171, "creation_date": 1420657061, "question_id": 27826641, "link": "https://stackoverflow.com/questions/27826641/simple-n-x-n-matrix-in-python-not-working", "closed_reason": "Duplicate", "title": "simple n x n matrix in python not working", "body": "<p>I use this to create 4x4 matrix of 'x':</p>\n\n<pre><code>listof=[] #table\nnic=[] #row\nmax = 4 #tabele size\nnic = ['x']*max #row of x-es\nlistof = [nic]*max #table of rows\nprint(listof) #it looks ok\nlistof[1][1] =\"o\" #changing one x to o\nprint(listof) # wrong since all rows have o on index 1\n</code></pre>\n\n<p>?how come?</p>\n\n<p>BTW: I know it Works if I use:</p>\n\n<pre><code>listof = [[\"x\" for x in range(max)] for y in range(max)]\n</code></pre>\n\n<p>But what is wrong with the code above?\nThanks</p>\n"}, {"tags": ["python", "c"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4096225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c40d8ede511889ba69a7b63b8a1d48?s=128&d=identicon&r=PG&f=1", "display_name": "Mikael Ljunggren", "link": "https://stackoverflow.com/users/4096225/mikael-ljunggren"}, "edited": false, "score": 0, "creation_date": 1421260535, "post_id": 27826707, "comment_id": 44295115, "body": "Thank&#39;s @Alex, that seems to work fine! However, I got stuck in another part &#180;    tbyte = 0  #     for(i=0;i&lt;7;i++) #         tbyte += bytes[i];          for i in range(0,7):         tbyte += bytes[i]&#180; that render the error: TypeError: &#39;type&#39; object has no attribute &#39;<b>getitem</b>&#39;"}, {"owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "reply_to_user": {"reputation": 43, "user_id": 4096225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c40d8ede511889ba69a7b63b8a1d48?s=128&d=identicon&r=PG&f=1", "display_name": "Mikael Ljunggren", "link": "https://stackoverflow.com/users/4096225/mikael-ljunggren"}, "edited": false, "score": 0, "creation_date": 1421260604, "post_id": 27826707, "comment_id": 44295152, "body": "@MikaelLjunggren, happy to help, but please <b>accept</b> the answer that helps, don&#39;t just thank for it!-)"}, {"owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "reply_to_user": {"reputation": 43, "user_id": 4096225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c40d8ede511889ba69a7b63b8a1d48?s=128&d=identicon&r=PG&f=1", "display_name": "Mikael Ljunggren", "link": "https://stackoverflow.com/users/4096225/mikael-ljunggren"}, "edited": false, "score": 0, "creation_date": 1421261022, "post_id": 27826707, "comment_id": 44295361, "body": "@MikaelLjunggren that&#39;s fine, we&#39;ve all been newbies at some time:-), but clicking on the checkmark you see to the left of the answer is how you accept an answer, and it&#39;s crucial to SO&#39;s functioning that the helpful answer be accepted."}], "tags": [], "owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "is_accepted": true, "score": 4, "last_activity_date": 1420657693, "last_edit_date": 1420657693, "creation_date": 1420657286, "answer_id": 27826707, "question_id": 27826610, "link": "https://stackoverflow.com/questions/27826610/converting-c-into-python/27826707#27826707", "title": "Converting C into Python", "body": "<p>C's <code>fgetc(stdin)</code> translates to Python 2's <code>ord(sys.stdin.read(1)[0])</code> -- returning a numeric value from the next byte of <code>stdin</code>.  (In Python 3, you'll have to reopen <code>sys.stdin</code> as binary to achieve that, otherwise <code>.read(1)</code> will get a Unicode character, not a byte).</p>\n\n<p>The <code>|</code> and <code>&lt;&lt;</code> operators work the same in Python as in C, so, no problem there.</p>\n\n<p>At EOF, <code>sys.stdin.read(1)</code> returns an empty list (so the <code>[0]</code> would fail, but you can check for that by \"decomposing\" the above expression).  For example:</p>\n\n<pre><code>ateof = False\n\ndef getabyte():\n    data = sys.stdin.read(1)\n    if data: return False, ord(data)\n    else: return True, 0\n\ndef getanint():\n    global ateof\n    ateof, byte1 = getabyte()\n    if not ateof:\n        ateof, byte2 = getabyte()\n    if ateof: return True, 0\n    else: return False, byte1 | (byte2&lt;&lt;8)\n</code></pre>\n\n<p>net of finicky issues wrt endianness (byte order) and character's signedness (issues common to C and Python).</p>\n"}], "owner": {"reputation": 43, "user_id": 4096225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c40d8ede511889ba69a7b63b8a1d48?s=128&d=identicon&r=PG&f=1", "display_name": "Mikael Ljunggren", "link": "https://stackoverflow.com/users/4096225/mikael-ljunggren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3078, "favorite_count": 0, "accepted_answer_id": 27826707, "answer_count": 1, "score": 0, "last_activity_date": 1420657693, "creation_date": 1420656942, "question_id": 27826610, "link": "https://stackoverflow.com/questions/27826610/converting-c-into-python", "title": "Converting C into Python", "body": "<p>I am trying to convert a C module that parses the output from the Linux library rtl_fm. It is used for catching energy usage from an Efergy meter throuh a DVB-T dongle</p>\n\n<p>The C module works fine but I want it written in python to interact with other python modules i have</p>\n\n<p>I have put the constants in constant.py</p>\n\n<p>I am totally stuck in converting the row: <strong>cursamp  = (int16_t) (fgetc(stdin) | fgetc(stdin)&lt;&lt;8);</strong> that I have tried to convert in a lot of different ways. Every try ends with an error!</p>\n\n<p>It seems to be two types of problems: 1. Type conversion of the input result 2. How to convert fgetc() into python.</p>\n\n<p>I also have troubles converting <strong>while(!feof(stdin))</strong> into python</p>\n\n<p>Anyone that could help?</p>\n\n<p>C code below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;time.h&gt;\n#include &lt;math.h&gt;\n\n#include &lt;stdlib.h&gt; // For exit function\n\n#define VOLTAGE         240 /* Refernce Voltage */\n#define CENTERSAMP      100 /* Number of samples needed to compute for the wave center */\n#define PREAMBLE_COUNT      40  /* Number of high(1) samples for a valid preamble */\n#define MINLOWBIT       3   /* Number of high(1) samples for a logic 0 */\n#define MINHIGHBIT      8   /* Number of high(1) samples for a logic 1 */\n#define E2BYTECOUNT     8   /* Efergy E2 Message Byte Count */\n#define FRAMEBITCOUNT       64  /* Number of bits for the entire frame (not including preamble) */\n\n\n#define LOGTYPE        1 // Allows changing line-endings - 0 is for Unix /n, 1 for Windows /r/n\n#define SAMPLES_TO_FLUSH  10 // Number of samples taken before writing to file.\n                 // Setting this too low will cause excessive wear to flash due to updates to\n                 // filesystem! You have been warned! Set to 10 samples for 6 seconds = every min.\n\nint loggingok;   // Global var indicating logging on or off\nint samplecount; // Global var counter for samples taken since last flush\nFILE *fp;    // Global var file handle\n\nint calculate_watts(char bytes[])\n{\n\nchar tbyte;\ndouble current_adc;\ndouble result;\nint i;\n\ntime_t ltime; \nstruct tm *curtime;\nchar buffer[80];\n\n    /* add all captured bytes and mask lower 8 bits */\n\n    tbyte = 0;\n\n    for(i=0;i&lt;7;i++)\n        tbyte += bytes[i];\n\n    tbyte &amp;= 0xff;\n\n    /* if checksum matches get watt data */\n\n    if (tbyte == bytes[7])\n    {\n        time( &amp;ltime );\n        curtime = localtime( &amp;ltime );\n        strftime(buffer,80,\"%x,%X\", curtime);\n\n        current_adc = (bytes[4] * 256) + bytes[5];\n        result  = (VOLTAGE * current_adc) / ((double) 32768 / (double) pow(2,bytes[6]));\n        printf(\"%s,%f\\n\",buffer,result);\n        if(loggingok) {\n          if(LOGTYPE) {\n            fprintf(fp,\"%s,%f\\r\\n\",buffer,result);\n          } else {\n            fprintf(fp,\"%s,%f\\n\",buffer,result);\n          }\n          samplecount++;\n          if(samplecount==SAMPLES_TO_FLUSH) {\n            samplecount=0;\n            fflush(fp);\n          }\n        }\n        fflush(stdout);\n        return 1;\n    }\n    //printf(\"Checksum Error \\n\");\n    return 0;\n}\n\nvoid  main (int argc, char**argv) \n{\n\nchar bytearray[9];\nchar bytedata;\n\nint prvsamp;\nint hctr;\nint cursamp;\nint bitpos;\nint bytecount;\n\nint i;\nint preamble;\nint frame;\nint dcenter;\nint dbit;\n\nlong center;\n\n    if(argc==2) {\n      fp = fopen(argv[1], \"a\"); // Log file opened in append mode to avoid destroying data\n      samplecount=0; // Reset sample counter\n      loggingok=1;\n      if (fp == NULL) {\n          perror(\"Failed to open log file!\"); // Exit if file open fails\n          exit(EXIT_FAILURE);\n      }\n    } else {\n      loggingok=0;\n    }\n\n    printf(\"Efergy E2 Classic decode \\n\\n\");\n\n\n    /* initialize variables */\n\n    cursamp = 0;\n    prvsamp = 0;\n\n    bytedata = 0;\n    bytecount = 0;\n    hctr = 0;\n    bitpos = 0;\n    dbit = 0;\n    preamble = 0;\n    frame = 0;\n\n    dcenter = CENTERSAMP;\n    center = 0;\n\n    while( !feof(stdin) ) \n    {\n\n        cursamp  = (int16_t) (fgetc(stdin) | fgetc(stdin)&lt;&lt;8);\n\n        /* initially capture CENTERSAMP samples for wave center computation */\n\n        if (dcenter &gt; 0)\n        {\n            dcenter--;\n            center = center + cursamp;  /* Accumulate FSK wave data */ \n\n            if (dcenter == 0)\n            {\n                /* compute for wave center and re-initialize frame variables */\n\n                center = (long) (center/CENTERSAMP);\n\n                hctr  = 0;\n                bytedata = 0;\n                bytecount = 0;\n                bitpos = 0;\n                dbit = 0;\n                preamble = 0;\n                frame = 0;\n            }\n\n        }\n        else\n        {\n            if ((cursamp &gt; center) &amp;&amp; (prvsamp &lt; center))       /* Detect for positive edge of frame data */\n                hctr = 0;\n            else \n                if ((cursamp &gt; center) &amp;&amp; (prvsamp &gt; center))       /* count samples at high logic */\n                {\n                    hctr++;\n                    if (hctr &gt; PREAMBLE_COUNT)  \n                        preamble = 1;\n                }\n                else \n                    if (( cursamp &lt; center) &amp;&amp; (prvsamp &gt; center))\n                    {\n                        /* at negative edge */\n\n                        if ((hctr &gt; MINLOWBIT) &amp;&amp; (frame == 1))\n                        {\n                            dbit++;\n                            bitpos++;   \n                            bytedata = bytedata &lt;&lt; 1;\n                            if (hctr &gt; MINHIGHBIT)\n                                bytedata = bytedata | 0x1;\n\n                            if (bitpos &gt; 7)\n                            {\n                                bytearray[bytecount] = bytedata;\n                                bytedata = 0;\n                                bitpos = 0;\n\n                                bytecount++;\n\n                                if (bytecount == E2BYTECOUNT)\n                                {\n\n                                    /* at this point check for checksum and calculate watt data */\n                                    /* if there is a checksum mismatch compute for a new wave center */\n\n                                    if (calculate_watts(bytearray) == 0)\n                                        dcenter = CENTERSAMP;   /* make dcenter non-zero to trigger center resampling */\n                                }\n                            }\n\n                            if (dbit &gt; FRAMEBITCOUNT)\n                            {   \n                                /* reset frame variables */\n\n                                bitpos = 0;\n                                bytecount = 0;\n                                dbit = 0;\n                                frame = 0;\n                                preamble = 0;\n                                bytedata = 0;\n                            }\n                        }\n\n                        hctr = 0;\n\n                    } \n                    else\n                        hctr = 0;\n\n            if ((hctr == 0) &amp;&amp; (preamble == 1))\n            {\n                /* end of preamble, start of frame data */\n                preamble = 0;\n                frame = 1;\n            }\n\n        } /* dcenter */\n\n        prvsamp = cursamp;\n\n    } /* while */\n    if(loggingok) {\n        fclose(fp); // If rtl-fm gives EOF and program terminates, close file gracefully.\n    }\n}\n</code></pre>\n\n<p>And the Python conversion (a little simplified without file logging):</p>\n\n<pre><code>from datetime import date\nfrom datetime import time\nfrom datetime import datetime\nimport cmath\nimport constant\nimport sys\nimport logging\n\nlogging.basicConfig(level=logging.DEBUG)\nlogger = logging.getLogger(__name__)\n\n\nclass _Getch:\n    \"\"\"Gets a single character from standard input.  Does not echo to the\nscreen.\"\"\"\n    def __init__(self):\n        try:\n            self.impl = _GetchWindows()\n        except ImportError:\n            self.impl = _GetchUnix()\n\n    def __call__(self): return self.impl()\n\n\nclass _GetchUnix:\n    def __init__(self):\n        import tty, sys\n\n    def __call__(self):\n        import sys, tty, termios\n        fd = sys.stdin.fileno()\n        old_settings = termios.tcgetattr(fd)\n        try:\n            tty.setraw(sys.stdin.fileno())\n            ch = sys.stdin.read(1)\n        finally:\n            termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)\n        return ch\n\n\nclass _GetchWindows:\n    def __init__(self):\n        import msvcrt\n\n    def __call__(self):\n        import msvcrt\n        return msvcrt.getch()\n\n\ngetch = _Getch()\n\ndef calculate_watts(*args):\n    logger.info('Start Calculation')\n    now = datetime.now()\n\n    tbyte = 0\n\n    for i in range(0,7):\n        tbyte += bytes[i]\n\n    tbyte = tbyte &amp; 0xff\n\n    if (tbyte == bytes[7]):\n        current_adc = (bytes[4] * 256) + bytes[5]\n        result = (constant.VOLTAGE * current_adc) / (32768 / pow(2,bytes[6]))\n        print \"%s,%f\\n\" % (now,result)\n        exit(0)\n    else:\n        print \"Checksum Error \\n\"\n        exit(1)\n\ndef  main(*argv):\n    logger.info('Starting Main')\n\n    print \"Efergy E2 Python decode \\n\\n\"\n\n    cursamp = 0\n    prvsamp = 0\n\n    bytedata = 0\n    bytecount = 0\n    hctr = 0\n    bitpos = 0\n    dbit = 0\n    preamble = 0\n    frame = 0\n\n    dcenter = constant.CENTERSAMP\n    center = 0\n\n    while (1):\n\n        cursamp  = (int)((int)(_Getch()) | (int)(_Getch())&lt;&lt;8)\n        logger.debug('cursamp: %f',cursamp)\n\n        if (dcenter &gt; 0):\n            dcenter -= 1\n            center = center + cursamp    #/* Accumulate FSK wave data */ \n            if (dcenter == 0):\n\n                center = (center/constant.CENTERSAMP)\n                hctr  = 0\n                bytedata = 0\n                bytecount = 0\n                bitpos = 0\n                dbit = 0\n                preamble = 0\n                frame = 0\n        else:\n            if ((cursamp &gt; center) and (prvsamp &lt; center)):        #/* Detect for positive edge of frame data */\n                hctr = 0\n            else: \n                if ((cursamp &gt; center) and (prvsamp &gt; center)):        #/* count samples at high logic */\n                    hctr += 1\n                    if (hctr &gt; constant.PREAMBLE_COUNT):    \n                        preamble = 1\n                else: \n                    if (( cursamp &lt; center) and (prvsamp &gt; center)):\n                        #/* at negative edge */\n                        if ((hctr &gt; constant.MINLOWBIT) and (frame == 1)):\n                            dbit += 1\n                            bitpos += 1    \n                            bytedata = bytedata &lt;&lt; 1\n                            if (hctr &gt; constant.MINHIGHBIT):\n                                bytedata = bytedata | 0x1\n                            if (bitpos &gt; 7):\n                                bytearray[bytecount] = bytedata\n                                bytedata = 0\n                                bitpos = 0\n\n                                bytecount += 1\n\n                                if (bytecount == constant.E2BYTECOUNT):\n\n                                    # /* at this point check for checksum and calculate watt data */\n                                    #  /* if there is a checksum mismatch compute for a new wave center */\n\n                                    if (calculate_watts(bytearray) == 0):\n                                        dcenter = constant.CENTERSAMP   #/* make dcenter non-zero to trigger center resampling */\n\n                            if (dbit &gt; constant.FRAMEBITCOUNT):\n                                #/* reset frame variables */\n\n                                bitpos = 0\n                                bytecount = 0\n                                dbit = 0\n                                frame = 0\n                                preamble = 0\n                                bytedata = 0\n\n                        hctr = 0\n\n                    else:\n                        hctr = 0\n\n            if ((hctr == 0) and (preamble == 1)):\n\n                #/* end of preamble, start of frame data */\n                preamble = 0\n                frame = 1\n\n         #/* dcenter */\n\n        prvsamp = cursamp\n\nif __name__ == \"__main__\":\n  main()\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1420657041, "post_id": 27826526, "comment_id": 44059010, "body": "I would first try to reproduce the error only in Python, without involving Julia (or, ideally, direct C API calls) at all.  Do you have example Python code that can do that?"}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 1, "creation_date": 1420658221, "post_id": 27826526, "comment_id": 44059654, "body": "The answer to <a href=\"http://stackoverflow.com/questions/14778407/do-something-every-time-a-module-is-imported\">this question</a> suggests overriding <code>__import__</code> might work.  I suspect the problem is due to some sort of path mixup."}], "answers": [{"comments": [{"owner": {"reputation": 1799, "user_id": 744071, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e781ae3ac16e42e4e9feb3c8f69672ef?s=128&d=identicon&r=PG", "display_name": "cberzan", "link": "https://stackoverflow.com/users/744071/cberzan"}, "edited": false, "score": 0, "creation_date": 1420657378, "post_id": 27826643, "comment_id": 44059203, "body": "Unfortunately this does not help; I tried putting your code in a file <code>sysmoduleshack.py</code>. Then from the interpreter: <code>import sysmoduleshack; import numpy</code> prints nothing. I suspect you&#39;re right that the dict is modified from C code."}, {"owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "reply_to_user": {"reputation": 1799, "user_id": 744071, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e781ae3ac16e42e4e9feb3c8f69672ef?s=128&d=identicon&r=PG", "display_name": "cberzan", "link": "https://stackoverflow.com/users/744071/cberzan"}, "edited": false, "score": 0, "creation_date": 1420657829, "post_id": 27826643, "comment_id": 44059441, "body": "@cberzan, then your life gets harder -- and 100% dependent on the exact version of Python, which you don&#39;t mention (the importing system changes often).  At least try <code>python -v</code> to tell you exactly what&#39;s being imported up to the time of the crash you observe -- again, it&#39;s a start."}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 2, "creation_date": 1420657954, "post_id": 27826643, "comment_id": 44059511, "body": "You forgot to <code>print</code> the &quot;ASSIGNED&quot; string you created.  But I think the <code>import</code> mechanism that modifies <code>sys.modules</code> does so at the C level, so I don&#39;t think this will work.  In fact, when I try it, it seems to prevent imported modules from getting into the new <code>sys.modules</code> at all."}, {"owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1420658326, "post_id": 27826643, "comment_id": 44059699, "body": "Tx @BrenBarn for spotting my <code>thinko</code>, edited now to fix that."}], "tags": [], "owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "is_accepted": false, "score": 2, "last_activity_date": 1420658296, "last_edit_date": 1420658296, "creation_date": 1420657071, "answer_id": 27826643, "question_id": 27826526, "link": "https://stackoverflow.com/questions/27826526/how-to-debug-a-sys-modules-entry-that-gets-overwritten/27826643#27826643", "title": "How to debug a sys.modules entry that gets overwritten?", "body": "<p>You can change <code>sys.modules</code> from a plain <code>dict</code> to one that <code>prints</code> out assignments, e.g:</p>\n\n<pre><code>import sys\nimport traceback\n\nclass noisydict(dict):\n    def __setitem__(self, key, value):\n        print('ASSIGNED: key={!r} value={!r} at:'.format(key, value))\n        traceback.print_stack()\n        return dict.__setitem__(self, key, value)\n\nsys.modules = noisydict(sys.modules)\n</code></pre>\n\n<p>This may or may not work if the overwriting happens in C code (such code may directly access the underlying <code>dict.__setitem__</code> rather than just do a <code>sys.modules[name] = newmodule</code> as Python code would) but it's worth a try!</p>\n"}, {"tags": [], "owner": {"reputation": 1799, "user_id": 744071, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e781ae3ac16e42e4e9feb3c8f69672ef?s=128&d=identicon&r=PG", "display_name": "cberzan", "link": "https://stackoverflow.com/users/744071/cberzan"}, "is_accepted": true, "score": 1, "last_activity_date": 1420755440, "last_edit_date": 1495541134, "creation_date": 1420755440, "answer_id": 27850540, "question_id": 27826526, "link": "https://stackoverflow.com/questions/27826526/how-to-debug-a-sys-modules-entry-that-gets-overwritten/27850540#27850540", "title": "How to debug a sys.modules entry that gets overwritten?", "body": "<p>Thanks to @BrenBarn for pointing me to <a href=\"https://stackoverflow.com/a/14778568/744071\">https://stackoverflow.com/a/14778568/744071</a>. The following worked for my purposes:</p>\n\n<p>importhack.py:</p>\n\n<pre><code>import traceback\n\nold_import = __import__\n\ndef my_import(module, *args, **kwargs):\n    print \"my_import({}) caused by:\".format(module)\n    traceback.print_stack()\n    return old_import(module, *args, **kwargs)\n\n__builtins__['__import__'] = my_import\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>&gt;&gt;&gt; import importhack\n&gt;&gt;&gt; import numpy\n</code></pre>\n\n<p>I believe the original problem in PyCall.jl was caused by calling <code>PyImport_ImportModule</code> before the Python interpreter was fully initialized.</p>\n"}], "owner": {"reputation": 1799, "user_id": 744071, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e781ae3ac16e42e4e9feb3c8f69672ef?s=128&d=identicon&r=PG", "display_name": "cberzan", "link": "https://stackoverflow.com/users/744071/cberzan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "accepted_answer_id": 27850540, "answer_count": 2, "score": 2, "last_activity_date": 1420755440, "creation_date": 1420656614, "last_edit_date": 1495541506, "question_id": 27826526, "link": "https://stackoverflow.com/questions/27826526/how-to-debug-a-sys-modules-entry-that-gets-overwritten", "title": "How to debug a sys.modules entry that gets overwritten?", "body": "<p>I'm trying to debug an issue that causes <code>sys.modules['numpy']</code> to get overwritten. I've added some print statements to <code>numpy.__init__</code>, and when I try to import numpy, I get this output:</p>\n\n<pre><code>numpy.__init__ running\nid(sys.modules) = 89034704\nid(sys.modules['numpy']) = 161528304\nnumpy.__init__ running\nid(sys.modules) = 89034704\nid(sys.modules['numpy']) = 177135864\n</code></pre>\n\n<p>Numpy has a number of circular imports, which should work as described in <a href=\"https://stackoverflow.com/a/744403/744071\">this answer</a>. But in my case, instead of getting the partially initialized numpy module from <code>sys.modules</code>, numpy gets imported again, and <code>numpy.__init__</code> gets executed a second time, leading to a crash.</p>\n\n<p><strong>How can I instrument <code>sys.modules</code> to get some visibility into who is overwriting <code>sys.modules['numpy']</code> and when?</strong> Normally I would write a dict subclass, but I don't think it's safe to change <code>sys.modules</code> to point to my own object. I tried overriding <code>sys.modules.__setattr__</code>, but that's a read-only attribute.</p>\n\n<p>Context: I'm trying to debug <a href=\"https://github.com/stevengj/PyCall.jl/issues/65#issuecomment-68964038\" rel=\"nofollow noreferrer\">this issue</a> in PyCall, a Julia library. PyCall embeds a Python interpreter in a running Julia process, and delegates the import to <code>PyImport_ImportModule</code> from cpython. The problem above happens inside a single call to <code>PyImport_ImportModule</code>, so I hope this question should be answerable with knowledge of python / cpython, but without knowledge of Julia / PyCall.</p>\n"}, {"tags": ["python", "multithreading", "python-multithreading", "peewee"], "comments": [{"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1420658252, "post_id": 27826465, "comment_id": 44059666, "body": "Could you please give examples: what goes wrong with your current approach, and what would be a correct result?"}, {"owner": {"reputation": 1, "user_id": 4430050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WvOBdIc_uPA/AAAAAAAAAAI/AAAAAAAAADk/3ginbMheIgs/photo.jpg?sz=128", "display_name": "mysuperlogin", "link": "https://stackoverflow.com/users/4430050/mysuperlogin"}, "reply_to_user": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1420660494, "post_id": 27826465, "comment_id": 44060930, "body": "@9000 <a href=\"https://gist.github.com/ismkv/b1d7021af623e886f7ec\" rel=\"nofollow noreferrer\">gist.github.com/ismkv/b1d7021af623e886f7ec</a> here an example, at the end of the result of. As can be seen from the second thread should find no records of 40 and 39, 38, 37. (\u041c\u043e\u0436\u0435\u0442 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u0431\u0443\u0434\u0435\u0442 \u043b\u0435\u0433\u0447\u0435 \u043e\u0431\u0449\u0430\u0442\u044c\u0441\u044f?)"}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1420660920, "post_id": 27826465, "comment_id": 44061166, "body": "\u041d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e, \u0435\u043b\u0441\u0438 \u0447\u0442\u043e, \u043d\u043e \u0442\u0443\u0442 \u043d\u0435 \u043f\u0440\u0438\u043d\u044f\u0442\u043e. Everyone is expected to be able to read the questions and comments, hence English."}, {"owner": {"reputation": 1, "user_id": 4430050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WvOBdIc_uPA/AAAAAAAAAAI/AAAAAAAAADk/3ginbMheIgs/photo.jpg?sz=128", "display_name": "mysuperlogin", "link": "https://stackoverflow.com/users/4430050/mysuperlogin"}, "reply_to_user": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1420661094, "post_id": 27826465, "comment_id": 44061240, "body": "\u0425\u043e\u0440\u043e\u0448\u043e, \u0442\u043e\u0433\u0434\u0430 \u0431\u0443\u0434\u0435\u043c \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0438\u0442\u044c \u043e\u0442\u0432\u0435\u0442. \u0414\u0443\u043c\u0430\u044e, \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u0443 \u043c\u0435\u043d\u044f \u043b\u0443\u0447\u0448\u0435 \u0432\u044b\u0439\u0434\u0435\u0442 \u0432\u044b\u0440\u0430\u0437\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043c\u044b\u0441\u043b\u0438. (Well, then we will translate the answer. I think in Russian I will better express their thoughts.) \u0427\u0442\u043e \u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430\u0441\u0447\u0435\u0442 \u043c\u043e\u0435\u0439 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b? (What do you say about my problems?)"}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 1, "creation_date": 1420661434, "post_id": 27826465, "comment_id": 44061431, "body": "I&#39;d say that with threads but without locks you cannot expect any order of execution. It looks like every thread yields on update, so you have 4-5 threads running a <code>select</code> before any of them runs an <code>update</code>. Or maybe it&#39;s the autocommit behavior (you don&#39;t issue an explicit <code>commit</code> anywhere), so the actual updates are visible only after a thread dies and closes the connection. (\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438?)"}, {"owner": {"reputation": 1, "user_id": 4430050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WvOBdIc_uPA/AAAAAAAAAAI/AAAAAAAAADk/3ginbMheIgs/photo.jpg?sz=128", "display_name": "mysuperlogin", "link": "https://stackoverflow.com/users/4430050/mysuperlogin"}, "reply_to_user": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1420661924, "post_id": 27826465, "comment_id": 44061674, "body": "\u0414\u0430. \u0418, \u0435\u0441\u043b\u0438 \u043d\u0435 \u0437\u0430\u0442\u0440\u0443\u0434\u043d\u0438\u0442, \u0441 \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u043c."}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1420663413, "post_id": 27826465, "comment_id": 44062483, "body": "I have commented <a href=\"https://gist.github.com/ismkv/b1d7021af623e886f7ec\" rel=\"nofollow noreferrer\">the gist</a>."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1420664131, "post_id": 27826465, "comment_id": 44062882, "body": "You need to control thread access to the shared database. A simple way to do this is with a <code>threading.Lock</code>. A trivial example for printing to stdout is shown in <a href=\"http://stackoverflow.com/a/18283388/355230\">this answer</a> of mine."}, {"owner": {"reputation": 1, "user_id": 4430050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WvOBdIc_uPA/AAAAAAAAAAI/AAAAAAAAADk/3ginbMheIgs/photo.jpg?sz=128", "display_name": "mysuperlogin", "link": "https://stackoverflow.com/users/4430050/mysuperlogin"}, "reply_to_user": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1420664878, "post_id": 27826465, "comment_id": 44063281, "body": "@9000, Also there to answer. <b>martineau</b>, Thanks for the reply, I will now look at."}, {"owner": {"reputation": 1, "user_id": 4430050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WvOBdIc_uPA/AAAAAAAAAAI/AAAAAAAAADk/3ginbMheIgs/photo.jpg?sz=128", "display_name": "mysuperlogin", "link": "https://stackoverflow.com/users/4430050/mysuperlogin"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1420666534, "post_id": 27826465, "comment_id": 44064092, "body": "@martineau Thank you very much, this is what you need."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1420666919, "post_id": 27826465, "comment_id": 44064265, "body": "You&#39;re welcome -- assuming you meant &quot;this is what <b>I</b> need&quot; ;-). In concurrent programming, access to all shared resource has to be controlled, locks are but one way."}, {"owner": {"reputation": 1, "user_id": 4430050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WvOBdIc_uPA/AAAAAAAAAAI/AAAAAAAAADk/3ginbMheIgs/photo.jpg?sz=128", "display_name": "mysuperlogin", "link": "https://stackoverflow.com/users/4430050/mysuperlogin"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1420667103, "post_id": 27826465, "comment_id": 44064356, "body": "@martineau That&#39;s just one problem in my code function call &quot;time.sleep&quot; and it &quot;slows down&quot; the trade, it can be bypassed?"}, {"owner": {"reputation": 1, "user_id": 4430050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WvOBdIc_uPA/AAAAAAAAAAI/AAAAAAAAADk/3ginbMheIgs/photo.jpg?sz=128", "display_name": "mysuperlogin", "link": "https://stackoverflow.com/users/4430050/mysuperlogin"}, "edited": false, "score": 0, "creation_date": 1420667169, "post_id": 27826465, "comment_id": 44064392, "body": "Yes, the topic of parallel programming is very interesting (especially now)."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1420667379, "post_id": 27826465, "comment_id": 44064487, "body": "If you were trying to use <code>time.sleep()</code> to control access then you can remove it or them if you are now doing it another way (as suggested). I am not familiar with <code>peewee</code>."}, {"owner": {"reputation": 1, "user_id": 4430050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WvOBdIc_uPA/AAAAAAAAAAI/AAAAAAAAADk/3ginbMheIgs/photo.jpg?sz=128", "display_name": "mysuperlogin", "link": "https://stackoverflow.com/users/4430050/mysuperlogin"}, "edited": false, "score": 0, "creation_date": 1420667563, "post_id": 27826465, "comment_id": 44064571, "body": "No. The code is a reference to a remote server and you need to wait a couple of seconds to get a response from him."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1420667763, "post_id": 27826465, "comment_id": 44064657, "body": "If you&#39;re having to wait due to slow server response, using multi-threading may be pointless."}, {"owner": {"reputation": 1, "user_id": 4430050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WvOBdIc_uPA/AAAAAAAAAAI/AAAAAAAAADk/3ginbMheIgs/photo.jpg?sz=128", "display_name": "mysuperlogin", "link": "https://stackoverflow.com/users/4430050/mysuperlogin"}, "edited": false, "score": 0, "creation_date": 1420668338, "post_id": 27826465, "comment_id": 44064922, "body": "Just the same option, which I described in the question copes well with this task, but there are difficulties with reading from the database. In your example, the problem with waiting :) So I need to dig in the direction of the correct use of the database in the trade."}], "owner": {"reputation": 1, "user_id": 4430050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WvOBdIc_uPA/AAAAAAAAAAI/AAAAAAAAADk/3ginbMheIgs/photo.jpg?sz=128", "display_name": "mysuperlogin", "link": "https://stackoverflow.com/users/4430050/mysuperlogin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1420656368, "creation_date": 1420656368, "question_id": 27826465, "link": "https://stackoverflow.com/questions/27826465/how-to-use-the-read-and-write-with-multithreading", "title": "How to use the read and write with multithreading?", "body": "<p>Good day. Please help me with a problem.</p>\n\n<p>I'm having trouble updating / reading data in a thread when using ORM.</p>\n\n<p>I've been using <a href=\"https://github.com/coleifer/peewee\" rel=\"nofollow\">peewee</a> for Python. After reading the documentation starting to initialize the object to work with the database.</p>\n\n<pre><code>db = SqliteDatabase('db.sqlite', threadlocals=True)\n\n# Next comes the creation of tables and filling.\nclass Products(Model):\n    id = IntegerField(index=True, primary_key=True)\n    count_sales = IntegerField()\n    updated = IntegerField() # default to zero\n\n    class Meta:\n        database = db\n\ndb.connect()\ndb.create_tables([Products, ...]) # I have several tables\n\n# I continue to fill the table with data from a file\n</code></pre>\n\n<p>I then create a predetermined amount of threads as follows:</p>\n\n<pre><code>class MyThread(Thread):\n    tables = None\n    db = None\n\n    def run(self):\n        products_update(self.tables, self.db)\n\nfor _ in range(1, 20):\n    t = MyThread()\n    t.tables = (Products, ...)\n    t.db = db\n    t.start()\n</code></pre>\n\n<p>The function counts the number of records in the field <code>count sales</code>, and there they are, it changes randomly one of them.</p>\n\n<pre><code>def products_update(tables, db):\n    Products, ... = tables\n\n    count = Products.select().where(Products.count_sales &lt; 10, Products.updated == 0).limit(1).count()\n    if count:\n        row = Products.select().where(Products.count_sales &lt; 10, Products.updated == 0).order_by(random()).limit(1).get()\n\n        Products.update(updated=1).where(Products.id == row.id).execute()\n</code></pre>\n\n<p>I need to make the process of finding and updating was linear.</p>\n\n<p><strong>Thank you for your attention. I apologize for the language I used a translator.</strong></p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "is_accepted": true, "score": 4, "last_activity_date": 1420657186, "creation_date": 1420657186, "answer_id": 27826675, "question_id": 27826442, "link": "https://stackoverflow.com/questions/27826442/how-to-construct-pandas-dataframe-from-dictionary-with-key-as-column-and-row-ind/27826675#27826675", "title": "How to construct pandas DataFrame from dictionary with key as column and row index", "body": "<p>The easiest thing is to first make a Series that just uses the tuples as a MultiIndex.  Then you can unstack the MultiIndex into columns:</p>\n\n<pre><code>&gt;&gt;&gt; x\n{(0, 0): 1, (0, 1): 4, (1, 0): 2, (1, 1): 5}\n&gt;&gt;&gt; pandas.Series(x).unstack()\n   0  1\n0  1  4\n1  2  5\n</code></pre>\n"}], "owner": {"reputation": 13154, "user_id": 2999675, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cb0b7c8c3b13457a7cb7749d1334d3ae?s=128&d=identicon&r=PG&f=1", "display_name": "Hello lad", "link": "https://stackoverflow.com/users/2999675/hello-lad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 27826675, "answer_count": 1, "score": 1, "last_activity_date": 1420657329, "creation_date": 1420656291, "question_id": 27826442, "link": "https://stackoverflow.com/questions/27826442/how-to-construct-pandas-dataframe-from-dictionary-with-key-as-column-and-row-ind", "title": "How to construct pandas DataFrame from dictionary with key as column and row index", "body": "<p>Dictionary</p>\n\n<pre><code>x = {(0,0):1,(0,1):4,(1,0):2,(1,1):5}\n</code></pre>\n\n<p>The key of x contains both row and col information, i.g (0,0) is row 0 and col 0</p>\n\n<p>how can I construct df from this kind of dictionary elegantly ?</p>\n"}, {"tags": ["python", "python-imaging-library"], "comments": [{"owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "edited": false, "score": 2, "creation_date": 1422359108, "post_id": 27826422, "comment_id": 44708877, "body": "Since you accepted the &quot;.tobytes&quot; question, I am leaving this comment to make clear to future readers: you actually wanted &quot;the raw pixel data&quot;, not the &quot;raw contents of the file&quot; - which is what I explained how to get."}, {"owner": {"reputation": 74982, "user_id": 128967, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6ce48656d5e39227a10b37a51754134?s=128&d=identicon&r=PG", "display_name": "Naftuli Kay", "link": "https://stackoverflow.com/users/128967/naftuli-kay"}, "reply_to_user": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "edited": false, "score": 0, "creation_date": 1422383379, "post_id": 27826422, "comment_id": 44724011, "body": "Oh, really? Then I&#39;ll accept your answer, I want the original raw file."}], "answers": [{"comments": [{"owner": {"reputation": 15722, "user_id": 56974, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6e5af3c3c57bdcf3e5fe1e7a1269a0e7?s=128&d=identicon&r=PG", "display_name": "Michael Ekoka", "link": "https://stackoverflow.com/users/56974/michael-ekoka"}, "edited": false, "score": 0, "creation_date": 1520336873, "post_id": 27826524, "comment_id": 85264616, "body": "The correct answer indeed. At creation time, there&#39;s an <code>Image.fp</code> attribute available which points to the original file used to create the <code>Image</code> object. The attribute points to the file as long as its entire contents has not been read by the <code>Image</code> object. As soon as that happens <code>Image.fp</code> will point to <code>None</code> and no more reference to the original file is kept."}], "tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": true, "score": 0, "last_activity_date": 1592248775, "last_edit_date": 1592248775, "creation_date": 1420656609, "answer_id": 27826524, "question_id": 27826422, "link": "https://stackoverflow.com/questions/27826422/get-binary-image-data-from-pil-image/27826524#27826524", "title": "Get binary image data from PIL.Image?", "body": "<p>PIL uses a lazy opening mechanism, in which the file contents are only read when needed.\nFor doing that, it probably keeps the file reference in some internal (private) attribute.</p>\n\n<p>Even if this attribute is accessible, it certainly is not exposed as part of the official PIL API - and it certainly is not meant to be used in this way.</p>\n\n<p>Once the data is read, the file contents are decoded, and kept in memory as pixel values (which is usually what is desired when dealing with images). The library certainly does not keep the undecoded file data in a data structure in memory, as it would be meaningless.</p>\n\n<p>If you want the raw file contents, you are likely processing the image with some other module, or storing it, or iterating over the data in a form that is agnostic to the actual image contents - can't you just open the file back with a regular \"open\"?</p>\n"}, {"comments": [{"owner": {"reputation": 15722, "user_id": 56974, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6e5af3c3c57bdcf3e5fe1e7a1269a0e7?s=128&d=identicon&r=PG", "display_name": "Michael Ekoka", "link": "https://stackoverflow.com/users/56974/michael-ekoka"}, "edited": false, "score": 6, "creation_date": 1520335429, "post_id": 27826580, "comment_id": 85263625, "body": "This still doesn&#39;t give you the original file&#39;s bytes, only the raw (uncompressed) image bytes from memory. Easy enough to verify if you have a small image.  <code>f = open(&#39;pic.jpg&#39;);</code> <code>img = PIL.Image.open(f).tobytes();</code> <code>f.seek(0);</code> <code>img==f.read();</code> should evaluate to <code>False</code>"}], "tags": [], "owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "is_accepted": false, "score": 7, "last_activity_date": 1420656802, "creation_date": 1420656802, "answer_id": 27826580, "question_id": 27826422, "link": "https://stackoverflow.com/questions/27826422/get-binary-image-data-from-pil-image/27826580#27826580", "title": "Get binary image data from PIL.Image?", "body": "<p>If you want to get the actual bytes of the image, just use <a href=\"http://pillow.readthedocs.org/en/latest/reference/Image.html#PIL.Image.Image.tobytes\" rel=\"noreferrer\"><code>i.tobytes()</code></a>. This is with <a href=\"http://pillow.readthedocs.org\" rel=\"noreferrer\"><code>Pillow</code></a>, I'm not sure if it's in the original <code>PIL</code> module, but from the docs it should be.</p>\n"}, {"comments": [{"owner": {"reputation": 399, "user_id": 2682667, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/L6KnJ.jpg?s=128&g=1", "display_name": "\u0411\u043e\u0458\u0430\u043d \u041c\u0430\u0442\u043e\u0432\u0441\u043a\u0438", "link": "https://stackoverflow.com/users/2682667/%d0%91%d0%be%d1%98%d0%b0%d0%bd-%d0%9c%d0%b0%d1%82%d0%be%d0%b2%d1%81%d0%ba%d0%b8"}, "edited": false, "score": 1, "creation_date": 1478918303, "post_id": 29817798, "comment_id": 68355496, "body": "I was using the Microsoft Cognition API and it requires a Binary Image Data.  I was first trying to send the data by using regular open function and also tried using encoding/decoding with base64, but it didn&#39;t work.  This did work, though, so if anyone uses it in the future, try getting the data in this form."}], "tags": [], "owner": {"reputation": 537, "user_id": 3373909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NnjzB.png?s=128&g=1", "display_name": "xiaoyu2er", "link": "https://stackoverflow.com/users/3373909/xiaoyu2er"}, "is_accepted": false, "score": 23, "last_activity_date": 1429777711, "last_edit_date": 1495535411, "creation_date": 1429777711, "answer_id": 29817798, "question_id": 27826422, "link": "https://stackoverflow.com/questions/27826422/get-binary-image-data-from-pil-image/29817798#29817798", "title": "Get binary image data from PIL.Image?", "body": "<p>you can see this answer <a href=\"https://stackoverflow.com/questions/14921055/python-image-pil-to-binary-hex\">python Image PIL to binary Hex</a></p>\n\n<blockquote>\n  <p>The img object needs to be saved again; write it to another BytesIO\n  object:</p>\n\n<pre><code>output = io.BytesIO()\nimg.save(output, format='JPEG')\n</code></pre>\n  \n  <p>then get the written data with the .getvalue() method:</p>\n\n<pre><code>hex_data = output.getvalue()\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1910, "user_id": 10305444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdffaf7c0a3d7d398e9b004acd125cd6?s=128&d=identicon&r=PG", "display_name": "Maifee Ul Asad", "link": "https://stackoverflow.com/users/10305444/maifee-ul-asad"}, "is_accepted": false, "score": 2, "last_activity_date": 1602139552, "creation_date": 1602139552, "answer_id": 64257133, "question_id": 27826422, "link": "https://stackoverflow.com/questions/27826422/get-binary-image-data-from-pil-image/64257133#64257133", "title": "Get binary image data from PIL.Image?", "body": "<p>In PIL :</p>\n<pre><code>Image.open(path).convert('1')\n</code></pre>\n<p>As mentioned in <a href=\"https://pillow.readthedocs.io/en/4.1.x/handbook/concepts.html#modes\" rel=\"nofollow noreferrer\">doc</a></p>\n<p><strong>1</strong> mode is for <em>(1-bit pixels, black and white, stored with one pixel per byte)</em></p>\n"}], "owner": {"reputation": 74982, "user_id": 128967, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6ce48656d5e39227a10b37a51754134?s=128&d=identicon&r=PG", "display_name": "Naftuli Kay", "link": "https://stackoverflow.com/users/128967/naftuli-kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25272, "favorite_count": 1, "accepted_answer_id": 27826524, "answer_count": 4, "score": 14, "last_activity_date": 1602139552, "creation_date": 1420656234, "question_id": 27826422, "link": "https://stackoverflow.com/questions/27826422/get-binary-image-data-from-pil-image", "title": "Get binary image data from PIL.Image?", "body": "<p>I've opened an image in PIL like so:</p>\n\n<pre><code>from PIL import Image\n\ni = Image.open(\"image.jpg\")\n</code></pre>\n\n<p>I need to access the raw contents of this file. How can I get the entire picture data, as if I would have done <code>open(...).read()</code>?</p>\n"}, {"tags": ["python", "hash", "hex", "byte"], "comments": [{"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 0, "creation_date": 1420656108, "post_id": 27826351, "comment_id": 44058441, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/2267362/convert-integer-to-a-string-in-a-given-numeric-base-in-python\">convert integer to a string in a given numeric base in python</a>"}, {"owner": {"reputation": 802, "user_id": 2474025, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef6ee3adf188990b216003a840d4f93e?s=128&d=identicon&r=PG", "display_name": "phobic", "link": "https://stackoverflow.com/users/2474025/phobic"}, "edited": false, "score": 2, "creation_date": 1420656559, "post_id": 27826351, "comment_id": 44058717, "body": "Check out <code>base64.b64encode</code>: <code>base64.b64encode(h.digest())</code>-&gt;&#39;rL0Y20zC+Fzt72VPzMSk2A==&#39;"}, {"owner": {"reputation": 24601, "user_id": 480608, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/03b704efdab65c446bb6a1f486f1867f?s=128&d=identicon&r=PG", "display_name": "Raine Revere", "link": "https://stackoverflow.com/users/480608/raine-revere"}, "edited": false, "score": 0, "creation_date": 1487050301, "post_id": 27826351, "comment_id": 71597852, "body": "An Aesthetic Comparison of Human-Readable  Hashing Functions: <a href=\"https://gist.github.com/raineorshine/8d67049c0aaaa082614e417660462fda\" rel=\"nofollow noreferrer\">gist.github.com/raineorshine/8d67049c0aaaa082614e417660462fd&zwnj;&#8203;a</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4794, "user_id": 2829764, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ce583a4e598d96791baf95e5e4082534?s=128&d=identicon&r=PG&f=1", "display_name": "kuzzooroo", "link": "https://stackoverflow.com/users/2829764/kuzzooroo"}, "is_accepted": true, "score": 0, "last_activity_date": 1420657507, "creation_date": 1420657507, "answer_id": 27826760, "question_id": 27826351, "link": "https://stackoverflow.com/questions/27826351/dense-human-readable-representation-of-a-string-of-bytes-using-python/27826760#27826760", "title": "Dense, human-readable representation of a string of bytes using Python", "body": "<p>Here's a modified version of one of the answers to the question that @vaultah linked to:</p>\n\n<pre><code>import hashlib, string, base64\n\n_INT_EFFICIENT_CHARS = string.letters + string.digits + string.punctuation\n_L_INT_EFFICIENT_CHARS = len(_INT_EFFICIENT_CHARS)\n# http://stackoverflow.com/questions/2267362/convert-integer-to-a-string-in-a-given-numeric-base-in-python\ndef int_efficient(x):\n    rets=''\n    while x&gt;0:\n        x,idx = divmod(x, _L_INT_EFFICIENT_CHARS)\n        rets = _INT_EFFICIENT_CHARS[idx] + rets\n    return rets\n\nh = hashlib.md5(\"foo\")\nprint h.hexdigest()\n\n# Starting in Python 3.2, use int.from_bytes rather than converting to hex\n# http://stackoverflow.com/a/9634417/2829764\ni = int(h.hexdigest(), 16)\nprint int_efficient(i)\n\nprint base64.b64encode(h.digest())\n</code></pre>\n\n<p>Using my alphabet (94 characters) only shortens the result by a few characters relative to base64:</p>\n\n<pre><code>acbd18db4cc2f85cedef654fccc4a4d8\nHpf=RjPL{_{4Q-[X$vdO\nrL0Y20zC+Fzt72VPzMSk2A==\n</code></pre>\n"}], "owner": {"reputation": 4794, "user_id": 2829764, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ce583a4e598d96791baf95e5e4082534?s=128&d=identicon&r=PG&f=1", "display_name": "kuzzooroo", "link": "https://stackoverflow.com/users/2829764/kuzzooroo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 771, "favorite_count": 0, "accepted_answer_id": 27826760, "answer_count": 1, "score": 0, "last_activity_date": 1420657507, "creation_date": 1420656020, "question_id": 27826351, "link": "https://stackoverflow.com/questions/27826351/dense-human-readable-representation-of-a-string-of-bytes-using-python", "title": "Dense, human-readable representation of a string of bytes using Python", "body": "<p>I've got a bunch of bytes I want to output in a human-friendly fashion (using characters that will be available and printable in any font/encoding/etc.). In my case, the bytes are the result of an md5 sum:</p>\n\n<pre><code>import hashlib\nh = hashlib.md5(\"foo\")\n</code></pre>\n\n<p>The <code>HASH</code> object has two ways of displaying its contents to me. </p>\n\n<pre><code>print h.digest() # Uses a bunch of unprintable characters\nprint h.hexdigest() # Readable, but 32 characters long\n</code></pre>\n\n<p>The second option gives me a well-behaved string of characters that I can read, cut and paste, or whatever. But it's an inefficient representation: it only uses 16 characters because it's hexadecimal. It could give me a shorter string if it used the whole alphabet, uppercase letters, punctuation, etc. Can I get a shorter, denser digest by expanding beyond hex?</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 5, "creation_date": 1420655812, "post_id": 27826237, "comment_id": 44058255, "body": "<code>channels_index</code> is a <i>list</i>, but <code>(program_height + program_gap + 1.5)</code> produces a float. What did you expect to happen there?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1420655916, "post_id": 27826237, "comment_id": 44058322, "body": "I&#39;m not following what you are trying to achieve, actually.If you are trying to loop over every 69 rows of <code>programs</code> there are better methods to do so, like <a href=\"http://stackoverflow.com/q/434287\">What is the most &quot;pythonic&quot; way to iterate over a list in chunks?</a>"}, {"owner": {"reputation": 159, "user_id": 4275381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999ac24f2231d1290dadf092ffbed3ce?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4275381/rob"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1420655957, "post_id": 27826237, "comment_id": 44058351, "body": "@MartijnPieters Yes <code>channels_index</code> is a list, but what I&#39;m expect them to fetch the value from the list once at a time, example: fetch the value <code>0</code> to output them, then fetch the next value <code>1</code> to output them and so on."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1420656175, "post_id": 27826237, "comment_id": 44058482, "body": "Presumably you want to <i>cycle</i> over those values? So loop from <code>0</code> to <code>16</code> then back to <code>0</code>?"}, {"owner": {"reputation": 159, "user_id": 4275381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999ac24f2231d1290dadf092ffbed3ce?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4275381/rob"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1420656493, "post_id": 27826237, "comment_id": 44058668, "body": "@MartijnPieters No I want to cycle those values that start from <code>0</code> to <code>16</code> and not to go back to <code>0</code>."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1420658253, "post_id": 27826237, "comment_id": 44059667, "body": "@Rob your code would create a <code>NameError</code> since you never define <code>programs_top</code> Please create an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> that demonstrates your error along with the expected output. You&#39;ve had several people guess at what you&#39;re trying to achieve and I guess they&#39;ve all missed the question -- can you better-define your question?"}], "answers": [{"tags": [], "owner": {"reputation": 379, "user_id": 3060280, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wx6OT.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/3060280/james"}, "is_accepted": false, "score": 0, "last_activity_date": 1420655954, "creation_date": 1420655954, "answer_id": 27826329, "question_id": 27826237, "link": "https://stackoverflow.com/questions/27826237/python-error-typeerror-cant-multiply-sequence-by-non-int-of-type-float/27826329#27826329", "title": "python error: TypeError: can&#39;t multiply sequence by non-int of type &#39;float&#39;", "body": "<p>I'm not sure I get exactly what you're asking, but if you're trying to grab indices from <code>channels_index</code> one at a time, why not just add it to your <code>for</code> loop?</p>\n\n<pre><code># same as above...\nfor (ind, row), ch_idx in zip(enumerate(programs), channels_index):\n   # continue on as before\n   position_top = programs_top + ch_idx * (program_height + program_gap + 1.5)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 159, "user_id": 4275381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999ac24f2231d1290dadf092ffbed3ce?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4275381/rob"}, "edited": false, "score": 0, "creation_date": 1420656643, "post_id": 27826370, "comment_id": 44058772, "body": "Thank you very much for that, but no I want to cycle through the values from <code>0</code> to <code>16</code> without go back to <code>0</code>. Please can you change your code."}, {"owner": {"reputation": 159, "user_id": 4275381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999ac24f2231d1290dadf092ffbed3ce?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4275381/rob"}, "edited": false, "score": 0, "creation_date": 1420657036, "post_id": 27826370, "comment_id": 44059008, "body": "Thank you very much for that, but on my code it will start to cycle from 0 to 16 at the same time. I want to cycle the values <code>0</code> for 69 times before I go to the next values <code>1</code> and so on. How I can do that?"}, {"owner": {"reputation": 159, "user_id": 4275381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999ac24f2231d1290dadf092ffbed3ce?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4275381/rob"}, "edited": false, "score": 0, "creation_date": 1420657203, "post_id": 27826370, "comment_id": 44059105, "body": "I want to cycle the values to make it 69 times like this: <code>0</code>, <code>0</code>,<code>0</code>,<code>0</code>,<code>0</code>,<code>0</code>,<code>0</code>,<code>0</code>,<code>0</code>,<code>0</code> until 69 times then cycle the next value to make it 69 times <code>1</code>, <code>1</code>,<code>1</code>,<code>1</code>,<code>1</code>,<code>1</code>,<code>1</code>,<code>1</code>,<code>1</code>,<code>1</code>..etc."}, {"owner": {"reputation": 1057, "user_id": 3856011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2ea238d1ebe2ae13d6179e0319d1dcd?s=128&d=identicon&r=PG", "display_name": "BurningKarl", "link": "https://stackoverflow.com/users/3856011/burningkarl"}, "reply_to_user": {"reputation": 159, "user_id": 4275381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999ac24f2231d1290dadf092ffbed3ce?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4275381/rob"}, "edited": false, "score": 0, "creation_date": 1420658858, "post_id": 27826370, "comment_id": 44059992, "body": "@Rob: What about itertools.repeat?"}, {"owner": {"reputation": 159, "user_id": 4275381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999ac24f2231d1290dadf092ffbed3ce?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4275381/rob"}, "edited": false, "score": 0, "creation_date": 1420660513, "post_id": 27826370, "comment_id": 44060940, "body": "@MartijnPieters I&#39;m waiting for your answer."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 159, "user_id": 4275381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999ac24f2231d1290dadf092ffbed3ce?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4275381/rob"}, "edited": false, "score": 0, "creation_date": 1420667436, "post_id": 27826370, "comment_id": 44064509, "body": "@Rob: ah, but I ran out of time; this is why you need to be clear in your question from the start what you expect. So you want to repeat <code>0</code> 69 times, then <code>1</code>, all the up to <code>16</code>?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 159, "user_id": 4275381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999ac24f2231d1290dadf092ffbed3ce?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4275381/rob"}, "edited": false, "score": 0, "creation_date": 1420668189, "post_id": 27826370, "comment_id": 44064846, "body": "@Rob: or perhaps there is no upper limit, you just want to count out each 69 rows?"}, {"owner": {"reputation": 159, "user_id": 4275381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999ac24f2231d1290dadf092ffbed3ce?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4275381/rob"}, "edited": false, "score": 0, "creation_date": 1420668889, "post_id": 27826370, "comment_id": 44065187, "body": "@MartijnPieters yes of course I do. Can you update your code please?"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 1, "last_activity_date": 1420667755, "last_edit_date": 1420667755, "creation_date": 1420656077, "answer_id": 27826370, "question_id": 27826237, "link": "https://stackoverflow.com/questions/27826237/python-error-typeerror-cant-multiply-sequence-by-non-int-of-type-float/27826370#27826370", "title": "python error: TypeError: can&#39;t multiply sequence by non-int of type &#39;float&#39;", "body": "<p>If you wanted to <em>cycle</em> through the values 0 through <code>channels_range</code>, then use a modulus:</p>\n\n<pre><code>channels_index = 0\n\nfor ...:\n    channels_index = (channels_index + 1) % channels_range\n</code></pre>\n\n<p>This will increment <code>channels_index</code> to <code>1</code>, then <code>2</code>, all the way up to <code>channels_range - 1</code>, then go back to 0.</p>\n\n<p>There is no need to produce a list of values up front here.</p>\n\n<p>If you wanted to calculate 69 times 0, then 69 times 1, etc. counting up to 16, you can still calculate that simply from the row index:</p>\n\n<pre><code>for ind, row in enumerate(programs):\n    channel_index = ind // 69\n</code></pre>\n\n<p>The row indices 0 through to 68, divided by 69 produce <code>0</code>. Indices 69 through to 137 give <code>1</code>,  etc.</p>\n"}], "owner": {"reputation": 159, "user_id": 4275381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999ac24f2231d1290dadf092ffbed3ce?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4275381/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 629, "favorite_count": 0, "accepted_answer_id": 27826370, "answer_count": 2, "score": -1, "last_activity_date": 1420667755, "creation_date": 1420655596, "question_id": 27826237, "link": "https://stackoverflow.com/questions/27826237/python-error-typeerror-cant-multiply-sequence-by-non-int-of-type-float", "title": "python error: TypeError: can&#39;t multiply sequence by non-int of type &#39;float&#39;", "body": "<p>I have got a problem with my code. I'm trying to use the variable <code>channels_index</code> under the loop to get each element from the list once at a time without keep looping but I have got an error: <code>TypeError: can't multiply sequence by non-int of type 'float'</code></p>\n\n<p>When I try this:</p>\n\n<pre><code>dbconnect = con.cursor()\ndbconnect.execute(\"SELECT COUNT(*) FROM programs\")\nx = dbconnect.fetchone()[0]\n\nfor channels_range, total_channels in enumerate(xrange(1, x + 1, 69), 1):\n    pass\nchannels_index = range(0, channels_range)   # count how many channels I have got\n\nfor ind, row in enumerate(programs):\n    program = row[1].encode('ascii'), str(row[2]), str(row[3])\n    title = row[1].encode('ascii')\n    program_start_date = str(row[2])\n    program_end_date = str(row[3])\n\n    program_height = 33\n    program_gap = 3\n    position_top = programs_top + channels_index * (program_height + program_gap + 1.5)\n</code></pre>\n\n<p>The error are highlight on this line:</p>\n\n<pre><code>position_top = programs_top + channels_index * (program_height + program_gap + 1.5)\n</code></pre>\n\n<p>Here is a list of elements:</p>\n\n<pre><code>18:22:32 T:3680  NOTICE: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]\n</code></pre>\n\n<p>I'm connecting to a database to fetch the data from every 69 rows to counts on how many rows I have got in a range. I can't put the value of <code>17</code> in the line for that code <code>position_top = programs_top + value</code>, because I won't know how many 69 rows I have got in a database.</p>\n\n<p>Can you please help me how I can use the variable <code>channels_index</code> under the loop to fetch each element from a list once at a time without keep looping?</p>\n"}, {"tags": ["python", "writing"], "comments": [{"owner": {"reputation": 812, "user_id": 2097159, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/25bbccaf149c63cdb3a6c5b27cb9c492?s=128&d=identicon&r=PG", "display_name": "user2097159", "link": "https://stackoverflow.com/users/2097159/user2097159"}, "edited": false, "score": 0, "creation_date": 1420655566, "post_id": 27826214, "comment_id": 44058130, "body": "f.write(&#39; &#39;) inbetween them is 1 of many ways"}], "answers": [{"tags": [], "owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "is_accepted": false, "score": 8, "last_activity_date": 1420655568, "creation_date": 1420655568, "answer_id": 27826228, "question_id": 27826214, "link": "https://stackoverflow.com/questions/27826214/how-do-i-make-a-space-between-words-when-writing-to-a-text-file-in-python/27826228#27826228", "title": "How do I make a space between words when writing to a text file in python", "body": "<p>You can try </p>\n\n<pre><code>f.write(name) \nf.write(' ') \nf.write(score)\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>f.write(name + ' ') \nf.write(score)\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>f.write(name ) \nf.write(' ' +score)\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>f.write(\"{} {}\".format(name,score)) \n</code></pre>\n\n<p>Or</p>\n\n<pre><code>f.write(\"%s %s\"%(name,score)) \n</code></pre>\n\n<p>Or</p>\n\n<pre><code>f.write(\" \".join([name,score]))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 4, "last_activity_date": 1420657838, "last_edit_date": 1420657838, "creation_date": 1420655575, "answer_id": 27826230, "question_id": 27826214, "link": "https://stackoverflow.com/questions/27826214/how-do-i-make-a-space-between-words-when-writing-to-a-text-file-in-python/27826230#27826230", "title": "How do I make a space between words when writing to a text file in python", "body": "<p>You'll have to write that space:</p>\n\n<pre><code>f.write(name) \nf.write(' ') \nf.write(score)\n</code></pre>\n\n<p>or use string formatting:</p>\n\n<pre><code>f.write('{} {}'.format(name, score))\n</code></pre>\n\n<p>If you are using Python 3, or used <code>from __future__ import print_function</code>, you could also use the <a href=\"https://docs.python.org/3/library/functions.html#print\" rel=\"nofollow\"><code>print()</code> function</a>, and have it add the space for you:</p>\n\n<pre><code>print(name, score, file=f, end='')\n</code></pre>\n\n<p>I set <code>end</code> to an empty string, because otherwise you'll also get a newline character. Of course, you <em>may</em> actually <em>want</em> that newline character, if you are writing multiple names and scores to the file and each entry needs to be on its own line.</p>\n"}, {"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 4, "last_activity_date": 1420655585, "creation_date": 1420655585, "answer_id": 27826233, "question_id": 27826214, "link": "https://stackoverflow.com/questions/27826214/how-do-i-make-a-space-between-words-when-writing-to-a-text-file-in-python/27826233#27826233", "title": "How do I make a space between words when writing to a text file in python", "body": "<p>A simple way would be to simply concatenate with a space character</p>\n\n<pre><code>f.write(name + ' ' + score)\n</code></pre>\n\n<p>A more robust method (for if the formatting gets more involved) is to use the <code>format</code> method</p>\n\n<pre><code>f.write('{} {}'.format(name, score))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 129, "user_id": 4430099, "user_type": "registered", "profile_image": "https://graph.facebook.com/1508802802/picture?type=large", "display_name": "Mitchell Gouzenko", "link": "https://stackoverflow.com/users/4430099/mitchell-gouzenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1420656291, "creation_date": 1420656291, "answer_id": 27826443, "question_id": 27826214, "link": "https://stackoverflow.com/questions/27826214/how-do-i-make-a-space-between-words-when-writing-to-a-text-file-in-python/27826443#27826443", "title": "How do I make a space between words when writing to a text file in python", "body": "<p>You should format a string. </p>\n\n<pre><code>output = \"%(Name)s %(Score)s\" %{'Name': name, 'Score':score}\nf.write(output)\nf.close()\n</code></pre>\n\n<p>Basically, %(Name)s is a placeholder (denoted by the %) for a string (denoted by the s following the parentheses), which we will reference by \"Name\". Following our format string, which is wrapped in \"\", we have this weird thing:</p>\n\n<p>%{'Name': name, 'Score':score}</p>\n\n<p>This is a dictionary that provides replacements for the \"Name\" and \"Score\" placeholders.</p>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 4425380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WmlOP.png?s=128&g=1", "display_name": "Cassandra", "link": "https://stackoverflow.com/users/4425380/cassandra"}, "is_accepted": false, "score": 1, "last_activity_date": 1420656417, "creation_date": 1420656417, "answer_id": 27826483, "question_id": 27826214, "link": "https://stackoverflow.com/questions/27826214/how-do-i-make-a-space-between-words-when-writing-to-a-text-file-in-python/27826483#27826483", "title": "How do I make a space between words when writing to a text file in python", "body": "<p>Bhargav and Martjin's answers are good. There are many ways to do it. I'd like to add that the <code>.format</code> way seems to be a little better because you can potentially reuse the arguments and organize your code better.</p>\n"}], "owner": {"reputation": 81, "user_id": 3662438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1468a0a0a28f5516fb97abf77249252?s=128&d=identicon&r=PG&f=1", "display_name": "user3662438", "link": "https://stackoverflow.com/users/3662438/user3662438"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38706, "favorite_count": 1, "answer_count": 5, "score": 5, "last_activity_date": 1420657838, "creation_date": 1420655529, "question_id": 27826214, "link": "https://stackoverflow.com/questions/27826214/how-do-i-make-a-space-between-words-when-writing-to-a-text-file-in-python", "title": "How do I make a space between words when writing to a text file in python", "body": "<p>The following code writes to a text file</p>\n\n<pre><code>if classno== '1':\n    f = open(\"class1.txt\", \"a\")\nif classno== '2':\n    f = open(\"class2.txt\", \"a\")\nif classno== '3':\n    f = open(\"class3.txt\", \"a\")\nf.write(name) \nf.write(score)\nf.close()\n</code></pre>\n\n<p>However, in the text file the name and score do not have space between them for example, how could I change \"James14\" in to \"James 14\"</p>\n"}, {"tags": ["python", "super"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 3, "creation_date": 1420655329, "post_id": 27826095, "comment_id": 44057959, "body": "Think about it; what if your code relies on instance attributes that are only initialised in a superclass <code>__init__</code>? The earlier you call it, the better. Also, it&#39;s <code>super</code>."}, {"owner": {"reputation": 33388, "user_id": 2437514, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/8QN0K.jpg?s=128&g=1", "display_name": "Rick supports Monica", "link": "https://stackoverflow.com/users/2437514/rick-supports-monica"}, "edited": false, "score": 0, "creation_date": 1420655453, "post_id": 27826095, "comment_id": 44058050, "body": "There are situations where you want to called it last, though. Like in <code>__new__</code>, usually."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 2, "creation_date": 1420655503, "post_id": 27826095, "comment_id": 44058088, "body": "It is <b>just a method call</b>, albeit one to a method found on a parent class. But <i>when</i> you call it has the same impact as calling any other method. Stuff happens. If you don&#39;t call it, the stuff doesn&#39;t happen."}, {"owner": {"reputation": 1753, "user_id": 2905382, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/50021811b23e7a7844c552d010d2e559?s=128&d=identicon&r=PG&f=1", "display_name": "stephan", "link": "https://stackoverflow.com/users/2905382/stephan"}, "edited": false, "score": 0, "creation_date": 1420655737, "post_id": 27826095, "comment_id": 44058204, "body": "I&#39;m guessing I&#39;ll run into less problems if I always just call it first."}], "answers": [{"comments": [{"owner": {"reputation": 4324, "user_id": 1045510, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/abde71672c5b271c778d3ed312347866?s=128&d=identicon&r=PG", "display_name": "Kroltan", "link": "https://stackoverflow.com/users/1045510/kroltan"}, "edited": false, "score": 2, "creation_date": 1420655862, "post_id": 27826265, "comment_id": 44058282, "body": "<code>super</code> itself doesn&#39;t execute nothing, only returns the current instance where any methods will be executed from the parent class."}, {"owner": {"reputation": 4591, "user_id": 3887945, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7Nb72.jpg?s=128&g=1", "display_name": "Theyouthis", "link": "https://stackoverflow.com/users/3887945/theyouthis"}, "reply_to_user": {"reputation": 4324, "user_id": 1045510, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/abde71672c5b271c778d3ed312347866?s=128&d=identicon&r=PG", "display_name": "Kroltan", "link": "https://stackoverflow.com/users/1045510/kroltan"}, "edited": false, "score": 1, "creation_date": 1420655992, "post_id": 27826265, "comment_id": 44058373, "body": "Sorry its been a while since ive used python, but still wanted to help. I edited to reflect python language better."}, {"owner": {"reputation": 4324, "user_id": 1045510, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/abde71672c5b271c778d3ed312347866?s=128&d=identicon&r=PG", "display_name": "Kroltan", "link": "https://stackoverflow.com/users/1045510/kroltan"}, "edited": false, "score": 0, "creation_date": 1420656252, "post_id": 27826265, "comment_id": 44058531, "body": "No problem, I didn&#39;t mean to offend. Just pointing out so people don&#39;t get confused down the road (&quot;But I saw a Stack overflow answer that said <code>super</code> runs the constructor!&quot;). My English is not perfect, and often i might sound unintendedly harsh. Sorry."}, {"owner": {"reputation": 4591, "user_id": 3887945, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7Nb72.jpg?s=128&g=1", "display_name": "Theyouthis", "link": "https://stackoverflow.com/users/3887945/theyouthis"}, "reply_to_user": {"reputation": 4324, "user_id": 1045510, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/abde71672c5b271c778d3ed312347866?s=128&d=identicon&r=PG", "display_name": "Kroltan", "link": "https://stackoverflow.com/users/1045510/kroltan"}, "edited": false, "score": 1, "creation_date": 1420656464, "post_id": 27826265, "comment_id": 44058658, "body": "You didn&#39;t sound harsh I was just apologetic for making a misleading answer in the context of python. thanks for pointing it out."}], "tags": [], "owner": {"reputation": 4591, "user_id": 3887945, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/7Nb72.jpg?s=128&g=1", "display_name": "Theyouthis", "link": "https://stackoverflow.com/users/3887945/theyouthis"}, "is_accepted": false, "score": 1, "last_activity_date": 1420655677, "creation_date": 1420655677, "answer_id": 27826265, "question_id": 27826095, "link": "https://stackoverflow.com/questions/27826095/what-is-the-difference-between-super-being-called-at-the-beginning-or-end-of-a/27826265#27826265", "title": "What is the difference between super() being called at the beginning or end of a method?", "body": "<p><code>super().__init__()</code> executes the constructor of the class that \"this\"(or self in py) inherits from. So if there are actions that modifies inherited variables, or variables that need to be used in the constructor of the class that inherits, it must be called before. \nOtherwise it does not matter when it is called as long as you don't need it yet. Although it is best practice to always call it in the beginning of a constructor so you always know where it is called(if it is ever needed).</p>\n"}, {"tags": [], "owner": {"reputation": 757655, "user_id": 95810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e8d5fe90f1fe2148bf130cccd4dc311c?s=128&d=identicon&r=PG", "display_name": "Alex Martelli", "link": "https://stackoverflow.com/users/95810/alex-martelli"}, "is_accepted": true, "score": 13, "last_activity_date": 1420656668, "creation_date": 1420656668, "answer_id": 27826545, "question_id": 27826095, "link": "https://stackoverflow.com/questions/27826095/what-is-the-difference-between-super-being-called-at-the-beginning-or-end-of-a/27826545#27826545", "title": "What is the difference between super() being called at the beginning or end of a method?", "body": "<p>The difference between your two versions of class <code>b</code> (if any) depends entirely on what the superclass (<code>a</code>) does.  Let's just take a simpler, sharper example:</p>\n\n<pre><code>class a(object):\n    def __init__(self):\n        self.foo = 23\n\nclass b1(a):\n    def __init__(self, name, age):\n        self.foo = 42\n        super(b, self).__init__()\n\nclass b2(a):\n    def __init__(self, name, age):\n        super(b, self).__init__()\n        self.foo = 42\n</code></pre>\n\n<p>Class <code>b1</code> first sets <code>foo</code> to 42 -- then (in practice) calls <code>a.__init__</code>, which resets the same attribute to 23.  So, <code>self.foo</code> ends up being worth 23 after <code>b1.__init__</code>.</p>\n\n<p>Class <code>b2</code> first (in practice) calls <code>a.__init__</code>, which sets <code>foo</code> to 23 -- then, it proceeds to reset the same attribute to 42.  So, <code>self.foo</code> ends up being worth 42 after <code>b2.__init__</code>.</p>\n\n<p>I find this case simpler and sharper because it boils down to two assignments of different values to the same thing -- so it's very intuitive that the second assignment overrides the effect of the first one.  Therefore, calling the superclass's <code>__init__</code> before the subclass does its own thing means the subclass gets to override some or all of the settings done in the superclass; calling it after, means exactly the reverse.</p>\n\n<p>And exactly the same reasoning applies for initialization operations that are a bit subtler than just plain assignments to <code>self</code> attributes: it's all about which class, sub or super, gets to tweak or overrule things done by the other (in as much as the two initializations matter at all).</p>\n\n<p>In OOP it's far more common to want the subclass to \"override\" the superclass, than vice versa; as a consequence, the normal time to call the superclass's <code>__init__</code> is right at the start of the subclass's -- that's just more idiomatic.  When subtler effects are wanted, then it's fine to call the superclass's <code>__init__</code> later, but in those \"slightly anomalous\" cases it would usually help a reader of the code to add comments explaining what's being done and why...</p>\n"}], "owner": {"reputation": 1753, "user_id": 2905382, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/50021811b23e7a7844c552d010d2e559?s=128&d=identicon&r=PG&f=1", "display_name": "stephan", "link": "https://stackoverflow.com/users/2905382/stephan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1543, "favorite_count": 1, "accepted_answer_id": 27826545, "answer_count": 2, "score": 5, "last_activity_date": 1420656668, "creation_date": 1420655110, "last_edit_date": 1420655330, "question_id": 27826095, "link": "https://stackoverflow.com/questions/27826095/what-is-the-difference-between-super-being-called-at-the-beginning-or-end-of-a", "title": "What is the difference between super() being called at the beginning or end of a method?", "body": "<p>I'm trying to understand how <code>super()</code> works.  I understand what it does, but I don't understand the mechanics of what's going on behind the scenes.  One thing I don't exactly understand is the difference between:</p>\n\n<pre><code>class b(a):\n    def __init__(self, name, age):\n        self.name=name\n        self.age=age\n        super(b, self).__init__(name, age)\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>class b(a):\n    def __init__(self, name, age):\n        super(b, self).__init__(name, age)\n        self.name=name\n        self.age=age\n</code></pre>\n\n<p>Maybe there is no difference in these two examples, but I know there are other situations where the placement of <code>super()</code> matters.  For example, this Django method I needed help with the other day, I was instructed to move <code>super()</code> above the if statement, rather than at the bottom.  I would like to know why this matters.</p>\n\n<pre><code>class Mymodel(models.Model):\n    photo = models.ImageField(upload_to=\"...\", blank=True)\n\ndef save(self, *args, **kwargs):\n    image_resized = kwargs.pop('image_resized',False)\n    super(Mymodel, self).save(*args, **kwargs)\n    if self.photo and image_resized:\n        basewidth = 300\n        filename = self.get_source_filename()\n                image = Image.open(filename)\n        wpercent = (basewidth/float(image.size[0]))\n        hsize = int((float(image.size[1])*float(wpercent)))\n        img = image.resize((basewidth,hsize), PIL.Image.ANTIALIAS)\n        self.photo = img\n        self.save(image_resized = True)\n</code></pre>\n"}, {"tags": ["python", "xml", "jenkins", "python-requests"], "answers": [{"tags": [], "owner": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "is_accepted": true, "score": 2, "last_activity_date": 1420657489, "last_edit_date": 1420657489, "creation_date": 1420657107, "answer_id": 27826652, "question_id": 27826080, "link": "https://stackoverflow.com/questions/27826080/jenkins-posting-job-xml-via-requests-fails-with-exception/27826652#27826652", "title": "jenkins posting job xml via requests fails with exception", "body": "<p>Use <code>requests.post(url, data=f.read(), ...)</code> instead of the <code>files</code> keyword argument.</p>\n\n<hr>\n\n<p>Using <code>requests.post(files=files)</code> will upload your file(s) as Multipart-encoded data (see the <a href=\"http://docs.python-requests.org/en/latest/user/quickstart/#post-a-multipart-encoded-file\" rel=\"nofollow\"><code>requests</code> docs</a>) - this is what you want for file upload in an HTML form, but that's not what you need in in your case.</p>\n\n<p><code>curl --data-binary @filename</code> will send the raw, unencoded contents of the file as the <code>POST</code> body. Such a request will look like this:</p>\n\n<pre><code>POST / HTTP/1.1\nHost: localhost\nContent-type: text/xml\nContent-Length: 4\n\nFOO\n</code></pre>\n\n<p>(Where <code>FOO</code> is the request body / the file contents).</p>\n\n<p>Your request with the multipart encoded data however currently looks like this:</p>\n\n<pre><code>POST / HTTP/1.1\nHost: localhost\nContent-type: text/xml\nContent-Length: 144\n\n--c225e276f4d4486fabe5770cd4f72a11\nContent-Disposition: form-data; name=\"file\"; filename=\"file\"\n\nFOO\n\n--c225e276f4d4486fabe5770cd4f72a11--\n</code></pre>\n\n<p>So the equivalent to <code>curl</code>'s <code>--data-binary</code> for the <code>requests</code> library is to simply pass the raw data in the <code>data</code> keyword argument:</p>\n\n<pre><code>data = open('foo.xml', 'rb').read()\nnewjobxml = requests.post(url, data=data, headers=headers, timeout=int(timeout))\n</code></pre>\n\n<p>BTW: You may want to take a look at the <a href=\"https://github.com/txels/autojenkins\" rel=\"nofollow\"><code>autojenkins</code></a> Python module.</p>\n"}], "owner": {"reputation": 892, "user_id": 2363318, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ZJy2C.jpg?s=128&g=1", "display_name": "user2363318", "link": "https://stackoverflow.com/users/2363318/user2363318"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 27826652, "answer_count": 1, "score": 1, "last_activity_date": 1420657489, "creation_date": 1420655066, "last_edit_date": 1420655577, "question_id": 27826080, "link": "https://stackoverflow.com/questions/27826080/jenkins-posting-job-xml-via-requests-fails-with-exception", "title": "jenkins posting job xml via requests fails with exception", "body": "<p>I have python write the file to disk for trouble shooting</p>\n\n<pre><code>Caused by: com.thoughtworks.xstream.io.StreamException:  : only whitespace content allowed before start tag and not - (position: START_DOCUMENT seen -... @1:1)\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>timeout = 3\nheaders = {'content-type': 'text/xml'}\nconfigFile = {'file': open(os.environ['NEWJOBXML'], 'rb').read()}\n\nnewjobxml = requests.post(\"http://\" + os.environ['USER'] + \":\" + os.environ['API_TOKEN'] + \"@\" + os.environ['JR_URL'] + \"/createItem?name=\" + newjob, files=configFile, headers=headers, timeout=int(timeout))\n</code></pre>\n\n<p>I get this for the header too:</p>\n\n<pre><code>{'Accept': '*/*',\n 'Accept-Encoding': 'gzip, deflate',\n 'Authorization': 'Basic ********************************************************',\n 'Connection': 'keep-alive',\n 'Content-Length': '11629',\n 'User-Agent': 'python-requests/2.5.1 CPython/2.7.5 Darwin/13.3.0',\n 'content-type': 'text/xml'}\n</code></pre>\n\n<p>When I post the same xml via curl, no errors</p>\n\n<pre><code>curl -H \"Content-type: text/xml\" -X POST http://USER:API_TOKEN@JR_URL/createItem?name=newjob --data-binary @/tmp/.config.xml\n</code></pre>\n\n<p>I am trying to migrate my code from bash to python.</p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 7296, "user_id": 2043505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Aywfv.png?s=128&g=1", "display_name": "Schorsch", "link": "https://stackoverflow.com/users/2043505/schorsch"}, "is_accepted": true, "score": 2, "last_activity_date": 1420723925, "last_edit_date": 1420723925, "creation_date": 1420722897, "answer_id": 27841028, "question_id": 27826064, "link": "https://stackoverflow.com/questions/27826064/matplotlib-make-legend-keys-square/27841028#27841028", "title": "matplotlib: make legend keys square", "body": "<p>You can define your own legend keys.  </p>\n\n<p>The bar plot in my answer is created using the <a href=\"http://matplotlib.org/examples/api/barchart_demo.html\" rel=\"nofollow noreferrer\">matplotlib barchart demo</a>. (I have removed the error bars). The <a href=\"http://matplotlib.org/users/legend_guide.html#implementing-a-custom-legend-handler\" rel=\"nofollow noreferrer\">matplotlib legend guide</a> explains how to define a class to replace legend keys with ellipses. I have modified that class to use squares (by using <a href=\"http://matplotlib.org/api/patches_api.html#matplotlib.patches.Rectangle\" rel=\"nofollow noreferrer\">rectangle patches</a>).</p>\n\n<pre><code>import numpy as np\nfrom matplotlib.legend_handler import HandlerPatch\nimport matplotlib.pyplot as plt\nimport matplotlib.patches as mpatches\n\n# Define square (rectangular) patches\n# that can be used as legend keys\n# (this code is based on the legend guide example)\n\nclass HandlerSquare(HandlerPatch):\n    def create_artists(self, legend, orig_handle,\n                       xdescent, ydescent, width, height, fontsize, trans):\n        center = xdescent + 0.5 * (width - height), ydescent\n        p = mpatches.Rectangle(xy=center, width=height,\n                               height=height, angle=0.0)\n        self.update_prop(p, orig_handle, legend)\n        p.set_transform(trans)\n        return [p]      \n\n# this example is the matplotlib barchart example:\n\nN = 5\nmenMeans = (20, 35, 30, 35, 27)\n\nind = np.arange(N)  # the x locations for the groups\nwidth = 0.35       # the width of the bars\n\nfig, ax = plt.subplots()\nrects1 = ax.bar(ind, menMeans, width, color='r')\n\nwomenMeans = (25, 32, 34, 20, 25)\nrects2 = ax.bar(ind+width, womenMeans, width, color='y')\n\n# add some text for labels, title and axes ticks\nax.set_ylabel('Scores')\nax.set_title('Scores by group and gender')\nax.set_xticks(ind+width)\nax.set_xticklabels( ('G1', 'G2', 'G3', 'G4', 'G5') )\n\n# append the new patches to the legend-call:\n\nax.legend( (rects1[0], rects2[0]), ('Men', 'Women'), \n           handler_map={rects1[0]: HandlerSquare(), rects2[0]: HandlerSquare()})\n\nplt.show()\n</code></pre>\n\n<p>Having defined the <code>class HandlerSquare</code>, one can now apply this to each legend entry as a third argument to the <code>ax.legend</code> call. Note the syntax:  </p>\n\n<pre><code>handler_map={rects1[0]: HandlerSquare(), rects2[0]: HandlerSquare()}\n</code></pre>\n\n<p>The <code>handler_map</code> has to be a dictionary.  </p>\n\n<p>This will give you this plot:  </p>\n\n<p><img src=\"https://i.stack.imgur.com/aGaSJ.png\" alt=\"enter image description here\"></p>\n"}, {"tags": [], "owner": {"reputation": 1121, "user_id": 1797327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DpZJq.jpg?s=128&g=1", "display_name": "aseagram", "link": "https://stackoverflow.com/users/1797327/aseagram"}, "is_accepted": false, "score": 7, "last_activity_date": 1427837504, "last_edit_date": 1427837504, "creation_date": 1427790607, "answer_id": 29364054, "question_id": 27826064, "link": "https://stackoverflow.com/questions/27826064/matplotlib-make-legend-keys-square/29364054#29364054", "title": "matplotlib: make legend keys square", "body": "<p>If you want a very quick and dirty solution to get an approximate square (that may require some fine-tuning depending on your plot), you can adjust the  <code>handlelength</code> kwarg in the legend call. Following Schorsch's solution (i.e. once you have a list of rectangular legend artists and corresponding labels):</p>\n\n<pre><code>ax.legend((rects1[0], rects2[0]), ('Men', 'Women'), handlelength=0.7)\n</code></pre>\n\n<p>See <a href=\"http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.legend\" rel=\"noreferrer\">matplotlib <code>legend()</code> docs</a> for more information.</p>\n"}, {"tags": [], "owner": {"reputation": 1156, "user_id": 1558754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb761d48f7c56f5c0084772c87cb6f05?s=128&d=identicon&r=PG", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/1558754/cyrus"}, "is_accepted": false, "score": 2, "last_activity_date": 1473696903, "last_edit_date": 1473696903, "creation_date": 1458865422, "answer_id": 36212221, "question_id": 27826064, "link": "https://stackoverflow.com/questions/27826064/matplotlib-make-legend-keys-square/36212221#36212221", "title": "matplotlib: make legend keys square", "body": "<p>Modifying <code>handlelength</code> globally affects the width of other markers in the legend. That solution will therefore be incompatible with, e.g. a combination of point and line patches. Instead, you can just add a square point marker to the legend using <code>Line2D</code>. You just have to set its associated line to zero-width:</p>\n\n<pre><code>rect1 = mlines.Line2D([], [], marker=\"s\", markersize=30, linewidth=0, color=\"r\")\nrect2 = mlines.Line2D([], [], marker=\"s\", markersize=30, linewidth=0, color=\"y\")\nax.legend((rect1, rect2), ('Men', 'Women'))\n</code></pre>\n"}], "owner": {"reputation": 3861, "user_id": 3578672, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c1efb9f0f98e4b76d89c9d87f7773f17?s=128&d=identicon&r=PG&f=1", "display_name": "Mageek", "link": "https://stackoverflow.com/users/3578672/mageek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4447, "favorite_count": 0, "accepted_answer_id": 27841028, "answer_count": 3, "score": 5, "last_activity_date": 1473696903, "creation_date": 1420655028, "question_id": 27826064, "link": "https://stackoverflow.com/questions/27826064/matplotlib-make-legend-keys-square", "title": "matplotlib: make legend keys square", "body": "<p>I am working with matplotlib and would like to change the keys in my legends to be squares instead of rectangles when I make, for example, bar plots. Is there a way to specify this?</p>\n\n<p>What I have now:</p>\n\n<p><img src=\"https://i.stack.imgur.com/CJruY.png\" alt=\"enter image description here\"></p>\n\n<p>What I want:</p>\n\n<p><img src=\"https://i.stack.imgur.com/9uTmO.png\" alt=\"enter image description here\"></p>\n\n<p>Thanks!</p>\n"}, {"tags": ["javascript", "python", "xml", "mongodb"], "comments": [{"owner": {"reputation": 35, "user_id": 2980480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b24cf1057f3603d8d8a15aaafcc894d0?s=128&d=identicon&r=PG&f=1", "display_name": "user2980480", "link": "https://stackoverflow.com/users/2980480/user2980480"}, "reply_to_user": {"reputation": 6443, "user_id": 861487, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/48db2402f2acc585fbce9b64e255f77b?s=128&d=identicon&r=PG", "display_name": "Abdelouahab", "link": "https://stackoverflow.com/users/861487/abdelouahab"}, "edited": false, "score": 0, "creation_date": 1420758120, "post_id": 27825990, "comment_id": 44106262, "body": "Does anyone know how to convert such a big file, text section , into csv or json"}, {"owner": {"reputation": 6443, "user_id": 861487, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/48db2402f2acc585fbce9b64e255f77b?s=128&d=identicon&r=PG", "display_name": "Abdelouahab", "link": "https://stackoverflow.com/users/861487/abdelouahab"}, "edited": false, "score": 0, "creation_date": 1420763933, "post_id": 27825990, "comment_id": 44108160, "body": "the problem of big files, can be solved with <code>fileinput</code>, because you will load only one line at once, and not the whole file will be loaded to memory, then you decide when you will write to another file (csv or json)."}, {"owner": {"reputation": 35, "user_id": 2980480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b24cf1057f3603d8d8a15aaafcc894d0?s=128&d=identicon&r=PG&f=1", "display_name": "user2980480", "link": "https://stackoverflow.com/users/2980480/user2980480"}, "reply_to_user": {"reputation": 6443, "user_id": 861487, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/48db2402f2acc585fbce9b64e255f77b?s=128&d=identicon&r=PG", "display_name": "Abdelouahab", "link": "https://stackoverflow.com/users/861487/abdelouahab"}, "edited": false, "score": 0, "creation_date": 1420764091, "post_id": 27825990, "comment_id": 44108207, "body": "Can you give me an example?"}, {"owner": {"reputation": 6443, "user_id": 861487, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/48db2402f2acc585fbce9b64e255f77b?s=128&d=identicon&r=PG", "display_name": "Abdelouahab", "link": "https://stackoverflow.com/users/861487/abdelouahab"}, "edited": false, "score": 0, "creation_date": 1420766132, "post_id": 27825990, "comment_id": 44108747, "body": "i made this, since the resulting file will be really big, then using <code>open</code> will use all memory, <a href=\"https://github.com/abdelouahabb/kouider-ezzadam/blob/master/hasher-comparer.py\" rel=\"nofollow noreferrer\">github.com/abdelouahabb/kouider-ezzadam/blob/master/&hellip;</a>"}, {"owner": {"reputation": 35, "user_id": 2980480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b24cf1057f3603d8d8a15aaafcc894d0?s=128&d=identicon&r=PG&f=1", "display_name": "user2980480", "link": "https://stackoverflow.com/users/2980480/user2980480"}, "reply_to_user": {"reputation": 6443, "user_id": 861487, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/48db2402f2acc585fbce9b64e255f77b?s=128&d=identicon&r=PG", "display_name": "Abdelouahab", "link": "https://stackoverflow.com/users/861487/abdelouahab"}, "edited": false, "score": 0, "creation_date": 1420795004, "post_id": 27825990, "comment_id": 44117389, "body": "I treid doing that and also <a href=\"http://stackoverflow.com/questions/19286118/python-convert-very-large-6-4gb-xml-files-to-json\" title=\"python convert very large 6 4gb xml files to json\">stackoverflow.com/questions/19286118/&hellip;</a> and got memory error...."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 2980480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b24cf1057f3603d8d8a15aaafcc894d0?s=128&d=identicon&r=PG&f=1", "display_name": "user2980480", "link": "https://stackoverflow.com/users/2980480/user2980480"}, "edited": false, "score": 0, "creation_date": 1420668994, "post_id": 27829242, "comment_id": 44065237, "body": "Thank you for your help, but it doesn&#39;t work. I have even installed both xmltodict modules(one that you included and 2 official but &quot;object has no atribute parse...&quot; I think I should extract and prepare the data before an upload. Sth like : <a href=\"http://stackoverflow.com/questions/18595791/parse-xml-file-to-fetch-required-data-and-store-it-in-mongodb-database-in-python\" title=\"parse xml file to fetch required data and store it in mongodb database in python\">stackoverflow.com/questions/18595791/&hellip;</a>"}, {"owner": {"reputation": 6443, "user_id": 861487, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/48db2402f2acc585fbce9b64e255f77b?s=128&d=identicon&r=PG", "display_name": "Abdelouahab", "link": "https://stackoverflow.com/users/861487/abdelouahab"}, "reply_to_user": {"reputation": 35, "user_id": 2980480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b24cf1057f3603d8d8a15aaafcc894d0?s=128&d=identicon&r=PG&f=1", "display_name": "user2980480", "link": "https://stackoverflow.com/users/2980480/user2980480"}, "edited": false, "score": 0, "creation_date": 1420670368, "post_id": 27829242, "comment_id": 44065848, "body": "i just tested it, and it works, did the example worked?"}, {"owner": {"reputation": 35, "user_id": 2980480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b24cf1057f3603d8d8a15aaafcc894d0?s=128&d=identicon&r=PG&f=1", "display_name": "user2980480", "link": "https://stackoverflow.com/users/2980480/user2980480"}, "edited": false, "score": 0, "creation_date": 1420733411, "post_id": 27829242, "comment_id": 44092809, "body": "Yes it works. I have a different idea how to import to mongodb. Could you take a look at: <a href=\"http://stackoverflow.com/questions/27841981/python-extract-words-from-xml\" title=\"python extract words from xml\">stackoverflow.com/questions/27841981/&hellip;</a>, please. If this is resolved, I will handle."}], "tags": [], "owner": {"reputation": 6443, "user_id": 861487, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/48db2402f2acc585fbce9b64e255f77b?s=128&d=identicon&r=PG", "display_name": "Abdelouahab", "link": "https://stackoverflow.com/users/861487/abdelouahab"}, "is_accepted": false, "score": 0, "last_activity_date": 1420670348, "last_edit_date": 1495542614, "creation_date": 1420667390, "answer_id": 27829242, "question_id": 27825990, "link": "https://stackoverflow.com/questions/27825990/mongodb-import-xml-into-mongodb/27829242#27829242", "title": "mongodb import xml into mongodb", "body": "<p>To save all this data, save them on <code>Gridfs</code></p>\n\n<p>And the easiest way to convert the <code>xml</code>, is to use this tool to convert it to <code>json</code> and save it:</p>\n\n<p><a href=\"https://stackoverflow.com/a/10201405/861487\">https://stackoverflow.com/a/10201405/861487</a></p>\n\n<pre><code>import xmltodict\n\ndoc = xmltodict.parse(\"\"\"\n... &lt;mydocument has=\"an attribute\"&gt;\n...   &lt;and&gt;\n...     &lt;many&gt;elements&lt;/many&gt;\n...     &lt;many&gt;more elements&lt;/many&gt;\n...   &lt;/and&gt;\n...   &lt;plus a=\"complex\"&gt;\n...     element as well\n...   &lt;/plus&gt;\n... &lt;/mydocument&gt;\n... \"\"\")\n\ndoc['mydocument']['@has']\nOut[3]: u'an attribute'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 526, "user_id": 9078344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j7O7g.jpg?s=128&g=1", "display_name": "OpSocket", "link": "https://stackoverflow.com/users/9078344/opsocket"}, "is_accepted": false, "score": 0, "last_activity_date": 1533440128, "last_edit_date": 1533440128, "creation_date": 1533319921, "answer_id": 51678027, "question_id": 27825990, "link": "https://stackoverflow.com/questions/27825990/mongodb-import-xml-into-mongodb/51678027#51678027", "title": "mongodb import xml into mongodb", "body": "<p>The XML file i'm using goes this way :</p>\n\n<pre><code>&lt;labels&gt;\n     &lt;label&gt;\n          &lt;name&gt;Bobby Nice&lt;/name&gt;\n          &lt;urls&gt;\n               &lt;url&gt;www.examplex.com&lt;/url&gt;\n               &lt;url&gt;www.exampley.com&lt;/url&gt;\n               &lt;url&gt;www.examplez.com&lt;/url&gt;\n          &lt;/urls&gt;\n     &lt;/label&gt;\n     ...\n&lt;/labels&gt;\n</code></pre>\n\n<p>and i can import it using <code>xml-stream</code> with <code>mongodb</code></p>\n\n<blockquote>\n  <p><strong>See:</strong> <a href=\"https://github.com/assistunion/xml-stream\" rel=\"nofollow noreferrer\">https://github.com/assistunion/xml-stream</a></p>\n</blockquote>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>var XmlStream = require('xml-stream');\n// Pass the ReadStream object to xml-stream\nvar stream = fs.createReadStream('20080309_labels.xml');\nvar xml = new XmlStream(stream);\n\nvar i = 1;\nvar array = [];\nxml.on('endElement: label', function(label) {\n  array.push(label);\n  db.collection('labels').update(label, label, { upsert:true }, (err, doc) =&gt; {\n    if(err) {\n      process.stdout.write(err + \"\\r\");\n    } else {\n      process.stdout.write(`Saved ${i} entries..\\r`);\n      i++;\n    }\n  });\n});\n\nxml.on('end', function() {\n  console.log('end event received, done');\n});\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 2980480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b24cf1057f3603d8d8a15aaafcc894d0?s=128&d=identicon&r=PG&f=1", "display_name": "user2980480", "link": "https://stackoverflow.com/users/2980480/user2980480"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 9072, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1610704910, "creation_date": 1420654725, "last_edit_date": 1420709021, "question_id": 27825990, "link": "https://stackoverflow.com/questions/27825990/mongodb-import-xml-into-mongodb", "title": "mongodb import xml into mongodb", "body": "<p>I have problem with importing big xml file (1.3 gb) into mongodb in order to search for most frequent words in map &amp; reduce manner. </p>\n\n<p><a href=\"http://dumps.wikimedia.org/plwiki/20141228/plwiki-20141228-pages-articles-multistream.xml.bz2\" rel=\"nofollow\">http://dumps.wikimedia.org/plwiki/20141228/plwiki-20141228-pages-articles-multistream.xml.bz2</a></p>\n\n<p>Here I enclose xml cut (first 10 000 lines) out from this big file:</p>\n\n<pre><code>http://www.filedropper.com/text2\n</code></pre>\n\n<p>I know that I can't import xml directly into mongodb. I used some tools do so. I used some python scripts and all has failed.</p>\n\n<p>Which tool or script should I use? What should be a key &amp; value?\nI think the best solution to find most frequent world would be this.</p>\n\n<pre><code>(_id : id, value: word )\n</code></pre>\n\n<p>then I would sum all the elements like in docs example:</p>\n\n<p><a href=\"http://docs.mongodb.org/manual/core/map-reduce/\" rel=\"nofollow\">http://docs.mongodb.org/manual/core/map-reduce/</a></p>\n\n<p>Any clues would be greatly appreciated, but how to import this file into mongodb to have collections like that?</p>\n\n<pre><code>(_id : id, value: word )\n</code></pre>\n\n<p>If you have any idea please share.</p>\n\n<p>Edited\nAfter research, I would use python or js to complete this task.</p>\n\n<p>I would extract only words in <code>&lt;text&gt;&lt;/text&gt;</code> section which is under <code>/&lt;page&gt;&lt;revision&gt;</code>, exlude &amp;lt, &amp;gt etc., and then separate words and upload them to mongodb with pymongo or js.</p>\n\n<p>So there are several pages with revision and text.</p>\n\n<p>Edited</p>\n"}, {"tags": ["python", "dbus"], "answers": [{"tags": [], "owner": {"reputation": 366, "user_id": 1139841, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/HNz2Z.jpg?s=128&g=1", "display_name": "Germar", "link": "https://stackoverflow.com/users/1139841/germar"}, "is_accepted": true, "score": 0, "last_activity_date": 1420816132, "creation_date": 1420816132, "answer_id": 27863524, "question_id": 27825986, "link": "https://stackoverflow.com/questions/27825986/how-to-re-init-dbus-sessionbus/27863524#27863524", "title": "How to re-init dbus SessionBus", "body": "<p>Okay, a workaround is to directly connect to the SessionBus socket.</p>\n\n<pre><code>bus = dbus.bus.BusConnection(os.environ['DBUS_SESSION_BUS_ADDRESS'])\n</code></pre>\n\n<p>(I used this before but due to other problems I thought this wasn't working)</p>\n"}], "owner": {"reputation": 366, "user_id": 1139841, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/HNz2Z.jpg?s=128&g=1", "display_name": "Germar", "link": "https://stackoverflow.com/users/1139841/germar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 27863524, "answer_count": 1, "score": 2, "last_activity_date": 1420816132, "creation_date": 1420654708, "last_edit_date": 1420728470, "question_id": 27825986, "link": "https://stackoverflow.com/questions/27825986/how-to-re-init-dbus-sessionbus", "title": "How to re-init dbus SessionBus", "body": "<p>I'm using <code>dbus-python</code> in a project which (sometimes) get started by cron or udev without any <code>environ</code>. As soon as <code>import dbus</code> is called (directly or by any other imported class) this makes <code>dbus.SessionBus()</code> connect to an (almost) empty bus. No matter if I set correct <code>environ</code> before I call <code>dbus.SessionBus()</code>.</p>\n\n<pre><code>$ env -i DISPLAY=$DISPLAY python3\nPython 3.4.0 (default, Apr 11 2014, 13:05:11) \n[GCC 4.8.2] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.environ\nenviron({'DISPLAY': ':0'})\n&gt;&gt;&gt; import dbus\n&gt;&gt;&gt; bus = dbus.SessionBus()\n&gt;&gt;&gt; bus.list_names()\ndbus.Array([dbus.String('org.freedesktop.DBus'), dbus.String(':1.2')], signature=dbus.Signature('s'))\n&gt;&gt;&gt; \n</code></pre>\n\n<p>It only works if I set correct <code>environ</code> <strong>before</strong> <code>import dbus</code> got called anywhere else.</p>\n\n<pre><code>$ env | grep ^DBUS\nDBUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-FGccmgO6TN\n$ env -i DISPLAY=$DISPLAY python3\nPython 3.4.0 (default, Apr 11 2014, 13:05:11) \n[GCC 4.8.2] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.environ['DBUS_SESSION_BUS_ADDRESS'] = 'unix:abstract=/tmp/dbus-FGccmgO6TN'\n&gt;&gt;&gt; os.environ                                                                   \nenviron({'DISPLAY': ':0', 'DBUS_SESSION_BUS_ADDRESS': 'unix:abstract=/tmp/dbus-FGccmgO6TN'})\n&gt;&gt;&gt; import dbus\n&gt;&gt;&gt; bus = dbus.SessionBus()\n&gt;&gt;&gt; bus.list_names()\ndbus.Array([dbus.String('org.freedesktop.DBus'), dbus.String('com.canonical.Unity.Launcher'), dbus.String('org.freedesktop.Notifications'), dbus.String(':1.7'), dbus.String(':1.107'), dbus.String(':1.8'), dbus.String('com.canonical.indicator.datetime'), dbus.String(':1.108'), dbus.String(':1.9'), dbus.String(':1.109'), dbus.String('com.canonical.Unity.Master.Scope.home.T6004534105088'), dbus.String('org.gtk.Private.AfcVolumeMonitor'), dbus.String('com.canonical.indicator.sound'), dbus.String('org.gtk.vfs.Daemon'), dbus.String('org.pulseaudio.Server'), dbus.String('com.canonical.indicator.application'), dbus.String('com.canonical.Unity.Webapps.Service'), dbus.String('com.ubuntu.Upstart'), dbus.String('org.gnome.SessionManager'), dbus.String('org.gnome.evolution.dataserver.Sources2'), dbus.String('com.canonical.indicator.session'), dbus.String('com.canonical.hud'), dbus.String(':1.60'), dbus.String(':1.61'), dbus.String('com.canonical.indicator.messages'), dbus.String(':1.62'), dbus.String('org.gnome.GConf'), dbus.String(':1.40'), dbus.String(':1.63'), dbus.String('org.a11y.Bus'), dbus.String('org.gnome.network_manager_applet'), dbus.String(':1.64'), dbus.String(':1.20'), dbus.String(':1.65'), dbus.String('org.gnome.SettingsDaemon.Power'), dbus.String(':1.273'), dbus.String('org.gnome.EvolutionAlarmNotify'), dbus.String(':1.66'), dbus.String('org.gnome.keyring'), dbus.String('org.gnome.Shell'), dbus.String(':1.45'), dbus.String('com.canonical.Unity.WindowStack'), dbus.String('org.gnome.Gedit'), dbus.String(':1.110'), dbus.String(':1.68'), dbus.String(':1.46'), dbus.String('com.canonical.Unity.Panel.Service.Desktop'), dbus.String(':1.24'), dbus.String(':1.133'), dbus.String(':1.69'), dbus.String(':1.47'), dbus.String(':1.25'), dbus.String(':1.134'), dbus.String('org.gnome.DejaDup.Monitor'), dbus.String(':1.112'), dbus.String(':1.48'), dbus.String(':1.26'), dbus.String(':1.135'), dbus.String(':1.113'), dbus.String('org.gtk.Private.MTPVolumeMonitor'), dbus.String(':1.49'), dbus.String(':1.27'), dbus.String(':1.136'), dbus.String(':1.114'), dbus.String('org.freedesktop.Telepathy.Client.IndicatorApprover'), dbus.String(':1.28'), dbus.String(':1.137'), dbus.String(':1.115'), dbus.String('org.freedesktop.Telepathy.ChannelDispatcher'), dbus.String('ca.desrt.dconf'), dbus.String(':1.29'), dbus.String(':1.116'), dbus.String('org.gnome.SettingsDaemon'), dbus.String('com.canonical.indicator.printers'), dbus.String('org.gnome.evolution.dataserver.Calendar4'), dbus.String('org.freedesktop.ScreenSaver'), dbus.String('org.gnome.SettingsDaemon.XRANDR'), dbus.String('com.canonical.Unity.Scope.LocalFiles'), dbus.String('org.ayatana.bamf'), dbus.String('org.freedesktop.FileManager1'), dbus.String('com.canonical.indicator.bluetooth'), dbus.String('im.pidgin.purple.PurpleService'), dbus.String('org.PulseAudio1'), dbus.String('org.gnome.Nautilus'), dbus.String('org.freedesktop.Telepathy.AccountManager'), dbus.String('com.canonical.indicator.keyboard'), dbus.String('org.freedesktop.Telepathy.Client.IndicatorObserver'), dbus.String('com.canonical.Unity'), dbus.String('org.gnome.evolution.dataserver.AddressBook5'), dbus.String(':1.70'), dbus.String(':1.71'), dbus.String('org.gnome.ScreenSaver'), dbus.String('org.gnome.zeitgeist.Engine'), dbus.String(':1.72'), dbus.String(':1.50'), dbus.String(':1.51'), dbus.String('org.gtk.vfs.Metadata'), dbus.String(':1.96'), dbus.String('org.gtk.Private.UDisks2VolumeMonitor'), dbus.String(':1.30'), dbus.String(':1.97'), dbus.String(':1.53'), dbus.String(':1.31'), dbus.String(':1.98'), dbus.String('org.gnome.SettingsDaemon.Keyboard'), dbus.String(':1.32'), dbus.String(':1.10'), dbus.String(':1.55'), dbus.String(':1.33'), dbus.String(':1.11'), dbus.String('org.freedesktop.Telepathy.MissionControl5'), dbus.String(':1.56'), dbus.String(':1.34'), dbus.String('org.kde.StatusNotifierWatcher'), dbus.String(':1.12'), dbus.String('com.canonical.AppMenu.Registrar'), dbus.String('org.gnome.Terminal.Display_0'), dbus.String('com.canonical.Unity.Scope.Home'), dbus.String(':1.79'), dbus.String('de.mh21.indicator.multiload'), dbus.String(':1.57'), dbus.String(':1.0'), dbus.String(':1.13'), dbus.String(':1.100'), dbus.String(':1.1'), dbus.String(':1.14'), dbus.String('org.gnome.zeitgeist.datahub'), dbus.String(':1.101'), dbus.String(':1.59'), dbus.String(':1.37'), dbus.String('org.freedesktop.secrets'), dbus.String(':1.2'), dbus.String(':1.15'), dbus.String(':1.102'), dbus.String('org.gnome.Nautilus.SearchProvider'), dbus.String(':1.38'), dbus.String(':1.3'), dbus.String(':1.16'), dbus.String('com.canonical.Unity.Scope.Applications'), dbus.String('org.gnome.zeitgeist.SimpleIndexer'), dbus.String(':1.103'), dbus.String(':1.4'), dbus.String(':1.17'), dbus.String('com.canonical.Unity.SmartScopes.RemoteScopesModel'), dbus.String(':1.104'), dbus.String('org.gtk.Private.GPhoto2VolumeMonitor'), dbus.String(':1.5'), dbus.String(':1.105'), dbus.String(':1.6'), dbus.String('org.freedesktop.IBus'), dbus.String(':1.19'), dbus.String('com.canonical.indicator.power')], signature=dbus.Signature('s'))\n&gt;&gt;&gt; \n</code></pre>\n\n<p>Is there anything I can do to re-initialisate <code>dbus.SessionBus()</code>? I tried with <code>imp.reload(dbus)</code> without luck...</p>\n"}, {"tags": ["python", "mysql", "database-connection", "connection-pooling", "pymysql"], "owner": {"reputation": 2614, "user_id": 907714, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/zi5h3.gif?s=128&g=1", "display_name": "postelrich", "link": "https://stackoverflow.com/users/907714/postelrich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 849, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1513221752, "creation_date": 1420654661, "last_edit_date": 1495540411, "question_id": 27825979, "link": "https://stackoverflow.com/questions/27825979/pymysql-assertionerror-result-length-not-requested-length", "title": "PyMySQL AssertionError: Result length not requested length", "body": "<p>I have a Python 3.4 application in beta that I am testing that uses PyMySQL 0.6.3 to connect to MySQL.  I have been getting occassional errors, AssertionError: Result length not requested length.  It is a multi-threaded application and this post <a href=\"https://stackoverflow.com/questions/17317344/celery-and-sqlalchemy-this-result-object-does-not-return-rows-it-has-been-clo\">Celery and SQLAlchemy - This result object does not return rows. It has been closed automatically</a> suggests that it may be due to threads sharing connections, which is probably happening.  How can I solve this?  PyMySQL doesn't provide a Connection Pool as is suggested in the post.  </p>\n"}, {"tags": ["python", "arrays", "numpy", "broadcast", "least-squares"], "comments": [{"owner": {"reputation": 21161, "user_id": 293594, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/236ff5ec4ac5714b8f28542d5299ec90?s=128&d=identicon&r=PG", "display_name": "xnx", "link": "https://stackoverflow.com/users/293594/xnx"}, "edited": false, "score": 0, "creation_date": 1420655563, "post_id": 27825935, "comment_id": 44058128, "body": "Looking at <a href=\"https://github.com/numpy/numpy/blob/master/numpy/linalg/linalg.py#L1733\" rel=\"nofollow noreferrer\">the source</a> and <a href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lstsq.html\" rel=\"nofollow noreferrer\">documentation</a>, I&#39;m not sure <code>numpy.linalg.lstsq</code> supports broadcasting.  In your test case, however, you can use <code>np.linalg.solve</code> which does support broadcasting"}, {"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "reply_to_user": {"reputation": 21161, "user_id": 293594, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/236ff5ec4ac5714b8f28542d5299ec90?s=128&d=identicon&r=PG", "display_name": "xnx", "link": "https://stackoverflow.com/users/293594/xnx"}, "edited": false, "score": 0, "creation_date": 1420656060, "post_id": 27825935, "comment_id": 44058414, "body": "Unfortunately, solve places a bit too many restrictions on the design matrix, which make it difficult for me to use. I also had issues on broadcasting over the correct axes. So, using solve, I got the correct answer whenever I did the individual pixels but wrong one when using the last example."}], "answers": [{"comments": [{"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "edited": false, "score": 0, "creation_date": 1420658872, "post_id": 27826907, "comment_id": 44060005, "body": "Of course! So, it can take an MxK array. Thanks so much!"}, {"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "edited": false, "score": 0, "creation_date": 1420660875, "post_id": 27826907, "comment_id": 44061144, "body": "There is just a small correction. In the example, it works because the number of observations and parameters is the same but one can have more observations than the parameters, in which case the reshape should be something like: sol = result[0].T.reshape(x.shape[0:-1],(2,)). Here, number of observations is 2 as well and it is not an overdetermined system, so it is fine."}], "tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": true, "score": 1, "last_activity_date": 1420660563, "last_edit_date": 1420660563, "creation_date": 1420658031, "answer_id": 27826907, "question_id": 27825935, "link": "https://stackoverflow.com/questions/27825935/broadcasting-issues-with-numpy-linalg-lstsq/27826907#27826907", "title": "Broadcasting issues with numpy.linalg.lstsq", "body": "<p>Reshape <code>x</code> to have shape (2, K), with the pairs of the pixel values in the columns. Call <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.lstsq.html\" rel=\"nofollow\"><code>lstsq</code></a>, and then restore the shape of the result.</p>\n\n<p>For example, here are <code>A</code> and <code>x</code>:</p>\n\n<pre><code>In [86]: A\n\nOut[86]: \narray([[ 1.,  5.],\n       [ 4.,  0.]])\n\nIn [87]: x\nOut[87]: \narray([[[0, 1],\n        [2, 3]],\n\n       [[4, 5],\n        [6, 7]]])\n</code></pre>\n\n<p>Reshape <code>x</code> as <code>y</code>, with pixel values in the columns:</p>\n\n<pre><code>In [88]: y = x.reshape(-1,2).T\n\nIn [89]: y\nOut[89]: \narray([[0, 2, 4, 6],\n       [1, 3, 5, 7]])\n</code></pre>\n\n<p><code>y</code> is the shape we need for <code>lstsq</code>:</p>\n\n<pre><code>In [90]: result = np.linalg.lstsq(A, y)\n\nIn [91]: result[0]\nOut[91]: \narray([[ 0.25,  0.75,  1.25,  1.75],\n       [-0.05,  0.25,  0.55,  0.85]])\n</code></pre>\n\n<p>Grab the solution, and restore the shape to match <code>x</code>:</p>\n\n<pre><code>In [92]: sol = result[0].T.reshape(x.shape)\n\nIn [93]: sol\nOut[93]: \narray([[[ 0.25, -0.05],\n        [ 0.75,  0.25]],\n\n       [[ 1.25,  0.55],\n        [ 1.75,  0.85]]])\n</code></pre>\n\n<p>Check that the solution is what we expect by solving a couple pixels individually:</p>\n\n<pre><code>In [94]: sol[0,0]\nOut[94]: array([ 0.25, -0.05])\n\nIn [95]: np.linalg.lstsq(A, x[0,0])[0]\nOut[95]: array([ 0.25, -0.05])\n\nIn [96]: sol[1,0]\nOut[96]: array([ 1.25,  0.55])\n\nIn [97]: np.linalg.lstsq(A, x[1,0])[0]\nOut[97]: array([ 1.25,  0.55])\n</code></pre>\n"}], "owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "accepted_answer_id": 27826907, "answer_count": 1, "score": 2, "last_activity_date": 1420662537, "creation_date": 1420654526, "last_edit_date": 1420662537, "question_id": 27825935, "link": "https://stackoverflow.com/questions/27825935/broadcasting-issues-with-numpy-linalg-lstsq", "title": "Broadcasting issues with numpy.linalg.lstsq", "body": "<p>I am working on some image analysis algorithm and am trying to use numpy for doing a least square fitting. To illustrate what I am trying to do, I have generated a very simple test case:</p>\n\n<pre><code>A = np.zeros((2, 2))\nA[0, 0] = 1\nA[0, 1] = 3\nA[1, 0] = 4\nA[0, 1] = 5\n</code></pre>\n\n<p>So this is my simple A matrix in the Ax = b type equation.</p>\n\n<p>Now, in this test case my image is basically a simple 2x2 image and at each of the point I have 2 measurements. So, in my case I simulate it as follows:</p>\n\n<pre><code>x = np.array([[13, 24], [13, 24], [13, 24], [13, 24]])\nx = x.reshape((2,2,2))\n</code></pre>\n\n<p>Now, this represents my 3-dimensional image where I have 2x2 grid and two values associated with each pixel. I can solve this pixel by pixel as;</p>\n\n<pre><code>np.linalg.lstsq(A, x[0, 0, :]) # fit at pixel (0, 0)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>np.linalg.lstsq(A, x[0, 1, :]) # fit at pixel (0, 1)\n</code></pre>\n\n<p>However, as soon as I try something like:</p>\n\n<pre><code>np.linalg.lstsq(A, x) # fit at all pixels together\n</code></pre>\n\n<p>It complains that x is 3-dimensional array and I am not sure how to tell it that it needs to broadcast over the first two dimensions.</p>\n"}, {"tags": ["python", "python-3.x", "xlsxwriter"], "comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 5, "creation_date": 1420654600, "post_id": 27825924, "comment_id": 44057561, "body": "That&#39;s nice. What&#39;s the problem? Is there an error? If so, please put the full text in the body of your question."}, {"owner": {"reputation": 303, "user_id": 3151007, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/ef9332a91af22abb782fc2f4b5bfcd20?s=128&d=identicon&r=PG&f=1", "display_name": "yeswecode", "link": "https://stackoverflow.com/users/3151007/yeswecode"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1420654897, "post_id": 27825924, "comment_id": 44057716, "body": "@MattDMo nothing happens after entering command (have edited the question as it possible)"}], "answers": [{"tags": [], "owner": {"reputation": 4694, "user_id": 4367228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bdee64eedba21c13b7017601c566d05?s=128&d=identicon&r=PG&f=1", "display_name": "MrAlexBailey", "link": "https://stackoverflow.com/users/4367228/mralexbailey"}, "is_accepted": false, "score": 3, "last_activity_date": 1420654919, "creation_date": 1420654919, "answer_id": 27826036, "question_id": 27825924, "link": "https://stackoverflow.com/questions/27825924/cant-create-xlsx-file/27826036#27826036", "title": "Can&#39;t create .xlsx file", "body": "<p>You need to add a worksheet:</p>\n\n<pre><code>worksheet = workbook.add_worksheet()\n</code></pre>\n\n<p>and then close the workbook:</p>\n\n<pre><code>workbook.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 379, "user_id": 3060280, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wx6OT.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/3060280/james"}, "is_accepted": false, "score": 2, "last_activity_date": 1420655423, "creation_date": 1420655423, "answer_id": 27826177, "question_id": 27825924, "link": "https://stackoverflow.com/questions/27825924/cant-create-xlsx-file/27826177#27826177", "title": "Can&#39;t create .xlsx file", "body": "<p>For completeness' sake, a short, but complete demo is shown in the docs: <a href=\"http://xlsxwriter.readthedocs.org/example_demo.html#ex-demo\" rel=\"nofollow\">http://xlsxwriter.readthedocs.org/example_demo.html#ex-demo</a></p>\n\n<p>As Jkdc mentioned, you need to add a worksheet and close it in addition to \"creating\" it.</p>\n"}], "owner": {"reputation": 303, "user_id": 3151007, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/ef9332a91af22abb782fc2f4b5bfcd20?s=128&d=identicon&r=PG&f=1", "display_name": "yeswecode", "link": "https://stackoverflow.com/users/3151007/yeswecode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1420655423, "creation_date": 1420654484, "last_edit_date": 1420654756, "question_id": 27825924, "link": "https://stackoverflow.com/questions/27825924/cant-create-xlsx-file", "title": "Can&#39;t create .xlsx file", "body": "<p>I'm trying to create '.xlxs' file via <em>xlsxwriter</em> but it doesn't create.\nAfter entering the command, nothing happens.</p>\n\n<pre><code>import xlsxwriter\nworkbook = xlsxwriter.Workbook('file.xlsx')\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "tkinter"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1420655332, "post_id": 27825902, "comment_id": 44057960, "body": "You shouldn&#39;t assume that the Start Menu bar is at the bottom of the screen. It&#39;s fairly easy to move the Taskbar and Start Menu to one of the other screen edges. I have mine at the top."}, {"owner": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1420658687, "post_id": 27825902, "comment_id": 44059897, "body": "Good point. modified, question to be on start menu, not at the bottom."}, {"owner": {"reputation": 29277, "user_id": 291641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df10b741c091f5db29f951dc9918a34?s=128&d=identicon&r=PG", "display_name": "patthoyts", "link": "https://stackoverflow.com/users/291641/patthoyts"}, "edited": false, "score": 0, "creation_date": 1420721251, "post_id": 27825902, "comment_id": 44084479, "body": "Are you actually trying to create an application that lives in the system tray along with the battery icon, volume icon and clock and so on?"}, {"owner": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "reply_to_user": {"reputation": 29277, "user_id": 291641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df10b741c091f5db29f951dc9918a34?s=128&d=identicon&r=PG", "display_name": "patthoyts", "link": "https://stackoverflow.com/users/291641/patthoyts"}, "edited": false, "score": 0, "creation_date": 1420731794, "post_id": 27825902, "comment_id": 44091616, "body": "@patthoyts yes, ultimately, but I really just want it positioned down there next to the task bar, like when you open any of the applications you mentioned."}], "answers": [{"comments": [{"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1420723376, "post_id": 27830896, "comment_id": 44085898, "body": "Does the function <code>deiconify</code> still exists for tkinter in Python 3?"}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1420767880, "post_id": 27830896, "comment_id": 44109218, "body": "I was asking because I think once I tried to use it, but the behaviour was not the expected... but thanks :)"}], "tags": [], "owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "is_accepted": false, "score": 1, "last_activity_date": 1420675575, "creation_date": 1420675575, "answer_id": 27830896, "question_id": 27825902, "link": "https://stackoverflow.com/questions/27825902/open-tkinter-window-so-it-sits-on-start-menu-bar/27830896#27830896", "title": "Open Tkinter Window so it sits on start menu bar", "body": "<p>What you are calling the 'start menu bar' is usually called the taskbar, at least on Windows.  <code>root.iconify()</code> minimizes the root window to the taskbar, wherever it happens to be, just as when one clicks [_] in the upper right of the window.  Clicking on the icon de_iconifies it, just as with any other app.</p>\n\n<pre><code>root = tk.Tk()\nroot.iconify()\n&lt;build gui&gt;\nroot.deiconify()\nroot.mainloop()\n</code></pre>\n\n<p>is a common pattern in a polished app when the  part takes long enough to cause potentially visible construction activity.  I believe putting the gui in a frame and packing the frame as the last step has the same effect (of hiding construction).</p>\n"}, {"comments": [{"owner": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "edited": false, "score": 0, "creation_date": 1420732276, "post_id": 27840321, "comment_id": 44091952, "body": "This yields an error:     <code>monitor_info = win32api.GetMonitorInfo(1) pywintypes.error: (1461, &#39;GetMonitorInfo&#39;, &#39;Invalid monitor handle.&#39;)</code> but this sounds like it would work."}, {"owner": {"reputation": 8957, "user_id": 3714930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdVoU.png?s=128&g=1", "display_name": "fhdrsdg", "link": "https://stackoverflow.com/users/3714930/fhdrsdg"}, "reply_to_user": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "edited": false, "score": 0, "creation_date": 1420732867, "post_id": 27840321, "comment_id": 44092410, "body": "Oh weird, works fine here. You can try <code>win32api.GetMonitorInfo(win32api.EnumDisplayMonitors()[0][0]&zwnj;&#8203;)</code>?"}, {"owner": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "edited": false, "score": 0, "creation_date": 1420733070, "post_id": 27840321, "comment_id": 44092557, "body": "that yields: <code>{&#39;Device&#39;: &#39;\\\\\\\\.\\\\DISPLAY1&#39;, &#39;Work&#39;: (-1920, 151, 0, 1231), &#39;Flags&#39;: 0, &#39;Monitor&#39;: (-1920, 151, 0, 1231)}</code> I&#39;m new to this and not sure what to do with this. Passing in DISPLAY1 as a string does not work."}, {"owner": {"reputation": 8957, "user_id": 3714930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdVoU.png?s=128&g=1", "display_name": "fhdrsdg", "link": "https://stackoverflow.com/users/3714930/fhdrsdg"}, "reply_to_user": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "edited": false, "score": 0, "creation_date": 1420733199, "post_id": 27840321, "comment_id": 44092648, "body": "Great, just <code>use monitor_info = win32api.GetMonitorInfo(win32api.EnumDisplayMonitors()[0][0]&zwnj;&#8203;)</code> then. On my pc &#39;Flags&#39; is 1, so maybe you could use 0 instead of 1. But using the line I just said is probably safer across pcs."}, {"owner": {"reputation": 8957, "user_id": 3714930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdVoU.png?s=128&g=1", "display_name": "fhdrsdg", "link": "https://stackoverflow.com/users/3714930/fhdrsdg"}, "reply_to_user": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "edited": false, "score": 0, "creation_date": 1420733306, "post_id": 27840321, "comment_id": 44092728, "body": "Wait, not so great. Your &#39;Work&#39; and &#39;Monitor&#39; values are the same. Also they have a negative value, so I don&#39;t really understand what&#39;s going on there.. What does <code>win32api.EnumDisplayMonitors()</code> return?"}, {"owner": {"reputation": 8957, "user_id": 3714930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdVoU.png?s=128&g=1", "display_name": "fhdrsdg", "link": "https://stackoverflow.com/users/3714930/fhdrsdg"}, "reply_to_user": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "edited": false, "score": 0, "creation_date": 1420733796, "post_id": 27840321, "comment_id": 44093075, "body": "Do you maybe have more than one monitor? Then the values you just posted could be your second monitor on which there is no taskbar? If so, <code>win32api.GetMonitorInfo(win32api.EnumDisplayMonitors()[1][0]&zwnj;&#8203;)</code>  might give you the info about your other monitor"}, {"owner": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "edited": false, "score": 0, "creation_date": 1420733942, "post_id": 27840321, "comment_id": 44093165, "body": "You&#39;re right, I have two monitors. How would I detect if someone had two monitors because if they don&#39;t this would probably yield an out of range error."}, {"owner": {"reputation": 8957, "user_id": 3714930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdVoU.png?s=128&g=1", "display_name": "fhdrsdg", "link": "https://stackoverflow.com/users/3714930/fhdrsdg"}, "reply_to_user": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "edited": false, "score": 0, "creation_date": 1420734189, "post_id": 27840321, "comment_id": 44093353, "body": "I believe you should find the one with &#39;Flags&#39;: 1, I&#39;ll update my answer. I also added an <code>else</code> for if the taskbar is hidden."}], "tags": [], "owner": {"reputation": 8957, "user_id": 3714930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdVoU.png?s=128&g=1", "display_name": "fhdrsdg", "link": "https://stackoverflow.com/users/3714930/fhdrsdg"}, "is_accepted": true, "score": 2, "last_activity_date": 1420734568, "last_edit_date": 1420734568, "creation_date": 1420720678, "answer_id": 27840321, "question_id": 27825902, "link": "https://stackoverflow.com/questions/27825902/open-tkinter-window-so-it-sits-on-start-menu-bar/27840321#27840321", "title": "Open Tkinter Window so it sits on start menu bar", "body": "<p>You can use the <code>win32api</code>'s <code>.GetMonitorInfo()</code> to find the 'working area' of the monitor, which is the area of the monitor without the taskbar. Then, seeing where the taskbar is, you can place the window in a corner of the working area. See this example:</p>\n\n<pre><code>import win32api\nimport Tkinter as tk\n\nfor monitor in win32api.EnumDisplayMonitors():\n    monitor_info = win32api.GetMonitorInfo(monitor[0])\n    if monitor_info['Flags'] == 1:\n        break\n\nwork_area = monitor_info['Work']\ntotal_area = monitor_info['Monitor']\n\nwidth = 300\nheight = 200\n\nside = [i for i in range(4) if work_area[i]!=total_area[i]]\n\n# Left\nif side ==[0]:\n    x = str(work_area[0])\n    y = str(work_area[3]-height)\n# Top\nelif side == [1]:\n    x = str(work_area[2]-width)\n    y = str(work_area[1])\n# Right\nelif side == [2]:\n    x = str(work_area[2]-width)\n    y = str(work_area[3]-height)\n# Bottom\nelif side == [3]:\n    x = str(work_area[2]-width)\n    y = str(work_area[3]-height)\nelse:\n    x = str(work_area[2]-width)\n    y = str(work_area[3]-height)\n\ngeom = '{}x{}+{}+{}'.format(width, height, x, y)\n\nroot = tk.Tk()\nroot.configure(background='red')\nroot.geometry(geom)\nroot.overrideredirect(True)\nroot.mainloop()\n</code></pre>\n\n<p>Note that I've used <code>overrideredirect</code> to get rid of the frame of the window, since this messes with the placing a bit.</p>\n"}], "owner": {"reputation": 6671, "user_id": 2242044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/220021af6dbb03bde70f36ddbabb5562?s=128&d=identicon&r=PG", "display_name": "user2242044", "link": "https://stackoverflow.com/users/2242044/user2242044"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 995, "favorite_count": 0, "accepted_answer_id": 27840321, "answer_count": 2, "score": 0, "last_activity_date": 1420734568, "creation_date": 1420654381, "last_edit_date": 1420658519, "question_id": 27825902, "link": "https://stackoverflow.com/questions/27825902/open-tkinter-window-so-it-sits-on-start-menu-bar", "title": "Open Tkinter Window so it sits on start menu bar", "body": "<p>I would like to have a Tkinter window open at the bottom right of the screen or where ever the start bar is. Much like when you click on the battery icon on your laptp and the box pops up. My code currently hides it behind the start menu bar. I would essentially like it at the bottom right but sitting on top of the start menu bar. Also, not sure how to account for things if the start menu is not at the bottom.</p>\n\n<p>My Code:</p>\n\n<pre><code>from Tkinter import *\n\ndef bottom_right(w=300, h=200):\n    # get screen width and height\n    screen_width = root.winfo_screenwidth()\n    screen_height = root.winfo_screenheight()\n    # calculate position x, y\n    x = (screen_width - w)\n    y = (screen_height-h)\n    root.geometry('%dx%d+%d+%d' % (w, h, x, y))\nroot = Tk()\nbottom_right(500, 300)\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "sorting", "loops"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1420654581, "post_id": 27825893, "comment_id": 44057553, "body": "<a href=\"http://en.wikipedia.org/wiki/Selection_sort\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Selection_sort</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1178540"}, "edited": false, "score": 0, "creation_date": 1420654835, "post_id": 27825893, "comment_id": 44057680, "body": "You cannot sort an array in linear time. For every spot in the array you search the minimum in [1..N], [2..N], [3..N], [N,N] the while loop searches the minimum, the for loop makes it sort the array. If you only would need one while loop, you would have O(n)!"}, {"owner": {"reputation": 870, "user_id": 4072850, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7gd84.jpg?s=128&g=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/4072850/jordan"}, "edited": false, "score": 0, "creation_date": 1420669429, "post_id": 27825893, "comment_id": 44065428, "body": "Neither of those help, I understand it is selection sort, hence the function name? And I was not asking about big O."}], "answers": [{"comments": [{"owner": {"reputation": 870, "user_id": 4072850, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7gd84.jpg?s=128&g=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/4072850/jordan"}, "edited": false, "score": 0, "creation_date": 1420654809, "post_id": 27825933, "comment_id": 44057665, "body": "Aha! So the while loop is simply swapping two elements that meet the if condition and then the for loop will do it again on the next element?"}, {"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "reply_to_user": {"reputation": 870, "user_id": 4072850, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7gd84.jpg?s=128&g=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/4072850/jordan"}, "edited": false, "score": 0, "creation_date": 1420654877, "post_id": 27825933, "comment_id": 44057706, "body": "@Jordan: Pretty much. The while loop find the element that should go into position <code>i</code> and the for loop repeats that for every <code>i</code>."}], "tags": [], "owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "is_accepted": true, "score": 0, "last_activity_date": 1420654936, "last_edit_date": 1420654936, "creation_date": 1420654523, "answer_id": 27825933, "question_id": 27825893, "link": "https://stackoverflow.com/questions/27825893/what-is-the-role-of-the-for-loop-in-this-sorting-function/27825933#27825933", "title": "What is the role of the for loop in this sorting function?", "body": "<blockquote>\n  <p>[What is] the role of the <code>for</code> loop on the first line of the function. Isn't the <code>while</code> loop doing the iterating and comparisons on the list?</p>\n</blockquote>\n\n<p>The <code>while</code> loop finds the right element <em>for one specific position in the list</em>, and the <code>for</code> loop repeats the search <em>for every position</em> (thereby sorting the list).</p>\n\n<p>And all the <code>if</code> condition does is find the smallest element of those that haven't yet been placed. Thus on the first iteration of the <code>for</code> loop the algorithm will find the smallest element; on the second iteration, the second smallest; and so on.</p>\n"}, {"tags": [], "owner": {"reputation": 890, "user_id": 1104684, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f83a6e49b9c7292af340cf33151bb990?s=128&d=identicon&r=PG", "display_name": "Undeterminant", "link": "https://stackoverflow.com/users/1104684/undeterminant"}, "is_accepted": false, "score": 0, "last_activity_date": 1420658219, "creation_date": 1420658219, "answer_id": 27826957, "question_id": 27825893, "link": "https://stackoverflow.com/questions/27825893/what-is-the-role-of-the-for-loop-in-this-sorting-function/27826957#27826957", "title": "What is the role of the for loop in this sorting function?", "body": "<p>Selection sort \"selects\" the smallest element in a dataset and puts it at the beginning, then repeats on the rest of the list with the smallest element removed. Worded differently, at each step of selection sort, we move along each spot in the list and figure out what number should be at that spot in the list.</p>\n\n<p>If we have the list <code>7 5 2 3 4 6 9 1 8</code>, then our first step would be to swap a <code>1</code> into the first place, a <code>2</code> into the second place, and so on. We don't have to worry about the very last spot in the list, because if we've taken everything else and put it in the right place, the last element will be in the right place because it's the only one left.</p>\n\n<p>With this code, although it's not done as clearly, the outer for loop goes through every spot in the list, minus the last one (<code>len(L) - 1</code>). Once we go through the code inside the loop once, we'll have put the right number in the first spot, then we go again to try and fill the second spot, etc. Because we've put everything in the correct place for all of the spots before this one, we can assume that the correct thing in this spot will be the smallest item between this position and the end of the list, so, the while loop helps look for it. Then, we swap the two items.</p>\n\n<p>This code is kind of messy, and it may make more sense if we reword the inner while loop to be a for loop:</p>\n\n<pre><code>def selSort(L):\n    for i in range(len(L) - 1):\n        minIndex = i\n        minValue = L[i]\n        for j in range(i + 1, len(L)):\n            if minValue &gt; L[j]:\n                minIndex = j\n                minValue = L[j]\n        temp = L[i]\n        L[i] = L[minIndex]\n        L[minIndex] = temp\n    return L\n</code></pre>\n"}], "owner": {"reputation": 870, "user_id": 4072850, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/7gd84.jpg?s=128&g=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/4072850/jordan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 27825933, "answer_count": 2, "score": 1, "last_activity_date": 1420658219, "creation_date": 1420654364, "question_id": 27825893, "link": "https://stackoverflow.com/questions/27825893/what-is-the-role-of-the-for-loop-in-this-sorting-function", "title": "What is the role of the for loop in this sorting function?", "body": "<p>I'm looking at this function while I try to learn different ways data is sorted, and I understand the main concept of it all including the while loop. The only thing I don't get is the role of the for loop on the first line of the function. Isn't the while loop doing the iterating and comparisons on the list? I tried taking the for loop out and as assumed the program failed to sort. It ran without error but simply returned the same list, unchanged. I guess I must not completely understand the sort if this doesn't make sense to me. So my question is: What is the role of the for loop in this sort function and what is it affecting each time through?</p>\n\n<pre><code>def selSort(L):\n    for i in range(len(L) - 1):\n        minIndex = i\n        minValue = L[i]\n        j = i + 1\n        while j &lt; len(L):\n            if minValue &gt; L[j]:\n                minIndex = j\n                minValue = L[j]\n            j += 1\n        temp = L[i]\n        L[i] = L[minIndex]\n        L[minIndex] = temp\n    return L\n\nQ = [2, 8, 5, 9, 1, 15, 3, 7]\nselSort(Q)\nprint Q\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[1, 2, 3, 5, 7, 8, 9, 15]\n</code></pre>\n"}]