[{"tags": ["python", "validation", "cerberus"], "answers": [{"tags": [], "owner": {"reputation": 6351, "user_id": 323269, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e3550767c858c787c35c280047ff789c?s=128&d=identicon&r=PG", "display_name": "Nicola Iarocci", "link": "https://stackoverflow.com/users/323269/nicola-iarocci"}, "is_accepted": false, "score": 5, "last_activity_date": 1527164758, "last_edit_date": 1527164758, "creation_date": 1527155749, "answer_id": 50506324, "question_id": 50499045, "link": "https://stackoverflow.com/questions/50499045/python-cerberus-multipe-schemas-for-a-single-filed/50506324#50506324", "title": "Python Cerberus: multipe schemas for a single filed?", "body": "<p>Try this:</p>\n\n<pre><code>A = {\"type\": \"dict\", \"schema\": {\"name\": {\"type\": \"string\"}}}\nB = {\"type\": \"dict\", \"schema\": {\"age\": {\"type\": \"integer\"}}}\nC = {\"type\": \"dict\", \"schema\": {\"gender\": {\"type\": \"string\"}}}\n\nschema = {'field':{'type':'list','anyof_schema':[A,B,C]}}\n\nv = Validator(schema)\n\nchallenge = {'field':[{'name':'a name'}]}\n\nv.validate(challenge)\nTrue\n</code></pre>\n\n<p>This works thanks to the <code>anyof_*</code>, which is one of the several options offered by the so-called <em>of-rules</em>. These rules allow you to define different sets of rules to validate against. The field will be considered valid if it validates against the set in the list according to the prefixes logics <em>all</em>, <em>any</em>, <em>one</em> or <em>none</em>. For details, see the <a href=\"http://docs.python-cerberus.org/en/latest/validation-rules.html#of-rules\" rel=\"nofollow noreferrer\">relevant documentation</a>.</p>\n"}], "owner": {"reputation": 49, "user_id": 9837596, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Fan Zhang", "link": "https://stackoverflow.com/users/9837596/fan-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1251, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1544468725, "creation_date": 1527119784, "last_edit_date": 1544468725, "question_id": 50499045, "link": "https://stackoverflow.com/questions/50499045/python-cerberus-multipe-schemas-for-a-single-filed", "title": "Python Cerberus: multipe schemas for a single filed?", "body": "<p>I am trying to use Cerberus to validate some data but I run into a problem.</p>\n\n<p>I defined several smaller schema such as:</p>\n\n<pre><code>A = {\"type\": \"dict\", \"required\": False, \"schema\": {\"name\": {\"type\": \"string\"}}}\n\nB = {\"type\": \"dict\", \"required\": False, \"schema\": {\"age\": {\"type\": \"integer\"}}}\n\nC = {\"type\": \"dict\", \"required\": False, \"schema\": {\"gender\": {\"type\": \"string\"}}}\n</code></pre>\n\n<p>And the higher level schema is like:</p>\n\n<pre><code>{\"something\": {\"type\": \"list\", \"schema\": \"type\": [A, B, C]}}\n</code></pre>\n\n<p>This obviously doesn't work.</p>\n\n<p>I want to validate a list, the elements in which only need to be validated by one of <code>(A, B, C)</code>. I don't know how to do that with Cerberus and am looking for some help.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "types", "pytype"], "answers": [{"tags": [], "owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "is_accepted": true, "score": 1, "last_activity_date": 1527124229, "last_edit_date": 1527124229, "creation_date": 1527123885, "answer_id": 50499465, "question_id": 50499007, "link": "https://stackoverflow.com/questions/50499007/python-pytype-compatible-type-command/50499465#50499465", "title": "Python: pytype-compatible type() command?", "body": "<p>As far as I know, no such function exist. However, it seems fairly simple to write a function as you described in your question:</p>\n\n<pre><code>from typing import Iterable, Mapping\n\n\ndef pretty_type(obj):\n    obj_type = type(obj).__name__\n    if isinstance(obj, Mapping):\n        k, v = next(iter(obj.items()))\n        return '{}[{}, {}]'.format(obj_type, pretty_type(k), pretty_type(v))\n    elif isinstance(obj, Iterable) and not isinstance(obj, str):\n        return '{}[{}]'.format(obj_type, pretty_type(obj[0]))\n    else:\n        return obj_type\n</code></pre>\n\n<p><strong>Testing</strong></p>\n\n<pre><code>&gt;&gt;&gt; print(pretty_type(0))\nint\n&gt;&gt;&gt; print(pretty_type({1:{\"a\":2.2}}))\ndict[int, dict[str, float]]\n&gt;&gt;&gt; print(pretty_type([1, 2, 3]))\nlist[int]\n&gt;&gt;&gt; print(pretty_type([{1:'a'}, {2:'b'}]))\nlist[dict[int, str]]\n&gt;&gt;&gt;\n</code></pre>\n\n<p>The above code could be extend pretty easily to suit any custom input/ouput. Of course, the code obviously assumes homogeneity between elements. As you noted in your question, heterogeneous elements would be problematic, and in my opinion it really would depend on one's tastes for how they would want to deal with such cases.</p>\n"}], "owner": {"reputation": 265978, "user_id": 116, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/f6flX.jpg?s=128&g=1", "display_name": "Mark Harrison", "link": "https://stackoverflow.com/users/116/mark-harrison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 1, "accepted_answer_id": 50499465, "answer_count": 1, "score": 2, "last_activity_date": 1527124229, "creation_date": 1527119494, "last_edit_date": 1527120070, "question_id": 50499007, "link": "https://stackoverflow.com/questions/50499007/python-pytype-compatible-type-command", "title": "Python: pytype-compatible type() command?", "body": "<p>Is there any <code>type</code>-like command that will recurse through collections to return a pytype-style declaration if such a thing exists?  I realize that collections with heterogeneous elements may be problematic.</p>\n\n<p>For example, I would like to see output similar to this:</p>\n\n<pre><code>&gt;&gt;&gt; fancy_type({1: {\"a\": 2.2}})\ndict[int, dict[str, float]]\n</code></pre>\n"}, {"tags": ["python", "list", "sorting"], "comments": [{"owner": {"reputation": 969, "user_id": 8944057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sUIkS.png?s=128&g=1", "display_name": "eugenhu", "link": "https://stackoverflow.com/users/8944057/eugenhu"}, "edited": false, "score": 1, "creation_date": 1527119489, "post_id": 50498997, "comment_id": 88010813, "body": "Have a look at <a href=\"https://stackoverflow.com/q/4806911/8944057\">String comparison technique used by Python</a>."}], "answers": [{"comments": [{"owner": {"reputation": 969, "user_id": 8944057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sUIkS.png?s=128&g=1", "display_name": "eugenhu", "link": "https://stackoverflow.com/users/8944057/eugenhu"}, "edited": false, "score": 0, "creation_date": 1527120024, "post_id": 50499026, "comment_id": 88010920, "body": "Unrelated but this seems to be trying to sort the strings in shortlex order, however this relies on <code>sorted()</code> being stable, which is what is guaranteed by the manual."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 4, "last_activity_date": 1527121031, "last_edit_date": 1527121031, "creation_date": 1527119648, "answer_id": 50499026, "question_id": 50498997, "link": "https://stackoverflow.com/questions/50498997/what-does-passing-str-lower-as-the-key-to-list-sort-do/50499026#50499026", "title": "What does passing str.lower as the key to list.sort do?", "body": "<p>It performs <em>case insensitive sorting</em>.</p>\n\n<p>Let's modify your example a bit, to include another entry \"dan\":</p>\n\n<pre><code>lst = ['Ronit', 'Dan', 'dan']\n</code></pre>\n\n<p>Naturally, you'd expect \"Dan\" and \"dan\" to occur together. But they don't, because of the properties of string ordering. Instead, a plain <code>list.sort</code> call will give you:</p>\n\n<pre><code>lst.sort()\nprint(lst)\n['Dan', 'Ronit', 'dan']\n</code></pre>\n\n<p>On the other hand, specifying <code>str.lower</code> gives you this:</p>\n\n<pre><code>lst.sort(key=str.lower)\nprint(lst)\n['Dan', 'dan', 'Ronit']\n</code></pre>\n\n<p>Here, the original list elements are sorted with respect to their lowercased equivalents.</p>\n\n<p>The second <code>list.sort</code> call with <code>len</code> should now be self-explanatory, assuming you understand what <code>key</code> does (yes, sort by length).</p>\n\n<hr>\n\n<p>To understand why the first is needed before the second, consider another contrived example:</p>\n\n<pre><code>lst = ['Ronit', 'Dan', 'ram', 'dan']\n</code></pre>\n\n<p>First, consider just <code>key=len</code>:</p>\n\n<pre><code>lst.sort(key=len)\nprint(lst)\n['Dan', 'ram', 'dan', 'Ronit']\n</code></pre>\n\n<p>That \"ram\" looks out of place here. THIS IS PRECISELY WHY WE HAVE THE FIRST STEP. Now, adding in that step makes our output a lot more sensible.</p>\n\n<pre><code>lst.sort(key=str.lower)\nlst.sort(key=len)\n\nprint(lst)\n['Dan', 'dan', 'ram', 'Ronit']\n</code></pre>\n\n<p>So, in conclusion, the elements are ordered first case-insensitively, and then ordered by length.</p>\n"}], "owner": {"reputation": 31, "user_id": 9837394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Nnii5FPfANY/AAAAAAAAAAI/AAAAAAAAASs/lxCpov3JF2A/photo.jpg?sz=128", "display_name": "Lynn Danilov", "link": "https://stackoverflow.com/users/9837394/lynn-danilov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1027, "favorite_count": 0, "accepted_answer_id": 50499026, "answer_count": 1, "score": 1, "last_activity_date": 1527121031, "creation_date": 1527119357, "last_edit_date": 1527119513, "question_id": 50498997, "link": "https://stackoverflow.com/questions/50498997/what-does-passing-str-lower-as-the-key-to-list-sort-do", "title": "What does passing str.lower as the key to list.sort do?", "body": "<pre><code>def Sorting(lst):\n    lst.sort(key=str.lower)\n    lst.sort(key=len)\n    return lst\n\nlst = [\"Ronit\", \"Dan\", \"Yael\"]\nprint Sorting(lst)\n</code></pre>\n\n<p>This code sorts the list alphabetically then by length. I was wondering why is it \"lower\"? is it not going to work with upper case letters? what is it for?</p>\n"}, {"tags": ["python", "attributeerror", "mechanicalsoup"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527119393, "post_id": 50498950, "comment_id": 88010786, "body": "The error is happening internally to MechanicalSoup, so maybe a bug in it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1527119457, "post_id": 50498950, "comment_id": 88010803, "body": "<a href=\"https://github.com/MechanicalSoup/MechanicalSoup/issues/158\" rel=\"nofollow noreferrer\">github.com/MechanicalSoup/MechanicalSoup/issues/158</a>"}, {"owner": {"reputation": 4274, "user_id": 5113071, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/27afe5aa502eb75ce05a49b47846889d?s=128&d=identicon&r=PG", "display_name": "Shawn Mehan", "link": "https://stackoverflow.com/users/5113071/shawn-mehan"}, "edited": false, "score": 0, "creation_date": 1527119492, "post_id": 50498950, "comment_id": 88010815, "body": "When you say that you know its working for the first row, you have successfully inspected the submitted form data on the other end of the wire? Because it looks to me like it&#39;s breaking on the <b>submit</b>. You should inspect the <code>browser</code> object in a debugger and look at the properties."}, {"owner": {"reputation": 11, "user_id": 9837551, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lorenzo P", "link": "https://stackoverflow.com/users/9837551/lorenzo-p"}, "edited": false, "score": 0, "creation_date": 1527120773, "post_id": 50498950, "comment_id": 88011067, "body": "I have successfully inspected the submitted form. Thank you for the tip."}, {"owner": {"reputation": 2121, "user_id": 6676101, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/GdQJN.jpg?s=128&g=1", "display_name": "Toothpick Anemone", "link": "https://stackoverflow.com/users/6676101/toothpick-anemone"}, "edited": false, "score": 0, "creation_date": 1527135444, "post_id": 50498950, "comment_id": 88014280, "body": "<code>AttributeError: &#39;str&#39; object has no attribute &#39;append&#39;</code> occurs when you try to get an <code>append</code> method for a string. Strings do not have an <code>append</code> method. For example, the following throws an error: <code>s = &quot;hello&quot;;  s.append(&quot;world&quot;)</code>"}], "owner": {"reputation": 11, "user_id": 9837551, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Lorenzo P", "link": "https://stackoverflow.com/users/9837551/lorenzo-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 472, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527120357, "creation_date": 1527119006, "last_edit_date": 1527120357, "question_id": 50498950, "link": "https://stackoverflow.com/questions/50498950/getting-attributeerror-str-object-has-no-attribute-append-with-mechanical", "title": "Getting &quot;AttributeError: &#39;str&#39; object has no attribute &#39;append&#39;&quot; with mechanicalsoup&#39;s submit function", "body": "<p>I am new to python and I'm attempting to use it to automate a manual form-filling task at work.</p>\n\n<p>I am utilizing mechanicalsoup functions to navigate a website and fill out the same form using values from a csv file. I can confirm the code below works for the first row of values from my csv, but breaks after that. My csv file has three columns. </p>\n\n<p>I would really appreciate any help with this. Thank you.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#login\nimport mechanicalsoup\nbrowser = mechanicalsoup.StatefulBrowser()\nbrowser.open(\"&lt;some website url&gt;\")\nbrowser.select_form('form[action=\"/logins\"]')\nbrowser[\"username\"] = \"***\"\nbrowser[\"password\"] = \"*****\"\nbrowser.submit_selected()\n\n#navigate to form and fill\ndef myfunction(esp, supnum, mid):\n    url_esp = \"&lt;some website url&gt;\" + esp\n    browser.open(url_esp)\n    browser.follow_link(\"&lt;some link&gt;\")\n    url_facility = browser.get_url()\n    url_facility_edit = url_facility + \"&lt;some link&gt;\"\n    browser.open(url_facility_edit)\n    browser.select_form('form[id=\"edit_facility\"]')\n    browser[\"facility[oracle_identifier]\"] = supnum\n    browser[\"facility[ffc_identifier]\"] = mid\n    response = browser.submit_selected()\n\n#import values from csv to pass into function\nimport csv\nwith open('biweekly_oracle_esp_test.csv', 'r') as csv_file:\n    reader = csv.reader(csv_file)\n    for row in reader:\n        esp = row[0]\n        supnum = row[1]\n        mid = row[2]\n        myfunction(esp, supnum, mid)\n</code></pre>\n\n<p>Here is the error:</p>\n\n<blockquote>\n<pre><code>Traceback (most recent call last):\n  File \"open_file_test2.py\", line 32, in &lt;module&gt;\n    myfunction(esp, supnum, mid)\n  File \"open_file_test2.py\", line 19, in myfunction\n    response = browser.submit_selected()\n  File \"C:\\Python\\lib\\site-packages\\mechanicalsoup\\stateful_browser.py\", line 232, in submit_selected\n    *args, **kwargs)\n  File \"C:\\Python\\lib\\site-packages\\mechanicalsoup\\browser.py\", line 213, in submit\n    response = self._request(form, url, **kwargs)\n  File \"C:\\Python\\lib\\site-packages\\mechanicalsoup\\browser.py\", line 155, in _request\n    data.setdefault(name, []).append(value)\nAttributeError: 'str' object has no attribute 'append'\n</code></pre>\n</blockquote>\n"}, {"tags": ["python", "django", "python-3.x", "unit-testing"], "answers": [{"tags": [], "owner": {"reputation": 409, "user_id": 6063882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df752c84b34f80ef4286bd8a7598ef85?s=128&d=identicon&r=PG", "display_name": "NeuroWinter", "link": "https://stackoverflow.com/users/6063882/neurowinter"}, "is_accepted": true, "score": 8, "last_activity_date": 1527119931, "creation_date": 1527119931, "answer_id": 50499060, "question_id": 50498944, "link": "https://stackoverflow.com/questions/50498944/django-requestfactory-add-http-x-forwarded-for/50499060#50499060", "title": "Django RequestFactory add HTTP_X_FORWARDED_FOR", "body": "<p>Turns out you can give the get request additional headers using the extra keyword in the get method:\n<a href=\"https://docs.djangoproject.com/en/2.0/topics/testing/tools/#django.test.Client.get\" rel=\"noreferrer\">https://docs.djangoproject.com/en/2.0/topics/testing/tools/#django.test.Client.get</a></p>\n\n<p>Working code is as follows:</p>\n\n<pre><code>    def test_get_client_ip(self):\n    \"\"\"\n    Test the get Client IP fuction with a request.\n\n    \"\"\"\n    # Create an instance of a GET request.\n    request = self.factory.get('/home')\n    ip = get_client_ip(request)\n    self.assertEqual(ip, '127.0.0.1')\n    request = self.factory.get('/home', HTTP_X_FORWARDED_FOR=\"8.8.8.8\")\n    ip = get_client_ip(request)\n    self.assertEqual(ip, '8.8.8.8')\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 6063882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df752c84b34f80ef4286bd8a7598ef85?s=128&d=identicon&r=PG", "display_name": "NeuroWinter", "link": "https://stackoverflow.com/users/6063882/neurowinter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1714, "favorite_count": 1, "accepted_answer_id": 50499060, "answer_count": 1, "score": 3, "last_activity_date": 1527119931, "creation_date": 1527118955, "question_id": 50498944, "link": "https://stackoverflow.com/questions/50498944/django-requestfactory-add-http-x-forwarded-for", "title": "Django RequestFactory add HTTP_X_FORWARDED_FOR", "body": "<p>I have this code block that I am trying to write tests for:</p>\n\n<pre><code>def get_client_ip(req):\n    \"\"\"\n    This is used to get the user's IP from the request object.\n\n    \"\"\"\n    x_forwarded_for = req.META.get('HTTP_X_FORWARDED_FOR')\n    if x_forwarded_for:\n        ip = x_forwarded_for.split(',')[0]\n    else:\n        ip = req.META.get('REMOTE_ADDR', \"unknown\")\n    return ip\n</code></pre>\n\n<p>So far I have been able to test the else section of the if statement. \nThis is what my test currently looks like:</p>\n\n<pre><code>def test_get_client_ip(self):\n    \"\"\"\n    Test the get Client IP fuction with a request.\n\n    \"\"\"\n    # Create an instance of a GET request.\n    request = self.factory.get('/home')\n    ip = get_client_ip(request)\n    self.assertEqual(ip, '127.0.0.1')\n</code></pre>\n\n<p>How would I go about adding \"HTTP_X_FORWARDED_FOR\" to META of the request object? </p>\n"}, {"tags": ["python", "django", "django-1.11"], "answers": [{"comments": [{"owner": {"reputation": 3731, "user_id": 2658554, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8d20cee119d87a566de0ea8a9d007769?s=128&d=identicon&r=PG", "display_name": "doubleo", "link": "https://stackoverflow.com/users/2658554/doubleo"}, "edited": false, "score": 1, "creation_date": 1527120942, "post_id": 50499096, "comment_id": 88011096, "body": "I cannot thank you enough. that fixed my problem. i really appreciate your help !"}], "tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": true, "score": 1, "last_activity_date": 1527120261, "creation_date": 1527120261, "answer_id": 50499096, "question_id": 50498913, "link": "https://stackoverflow.com/questions/50498913/error-loading-admin-page-after-upgrading-to-django-1-11/50499096#50499096", "title": "Error loading admin page after upgrading to django-1.11", "body": "<p>You must set <a href=\"https://docs.djangoproject.com/en/1.11/ref/settings/#app-dirs\" rel=\"nofollow noreferrer\"><code>APP_DIRS</code></a> to <code>True</code>, i.e.:</p>\n\n<pre><code>TEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'APP_DIRS': True,\n        'DIRS': [\n        ...\n</code></pre>\n"}], "owner": {"reputation": 3731, "user_id": 2658554, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8d20cee119d87a566de0ea8a9d007769?s=128&d=identicon&r=PG", "display_name": "doubleo", "link": "https://stackoverflow.com/users/2658554/doubleo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 50499096, "answer_count": 1, "score": 1, "last_activity_date": 1527120261, "creation_date": 1527118705, "last_edit_date": 1527118807, "question_id": 50498913, "link": "https://stackoverflow.com/questions/50498913/error-loading-admin-page-after-upgrading-to-django-1-11", "title": "Error loading admin page after upgrading to django-1.11", "body": "<p>So previously, I was using django-1.8 version &amp; I am in the process of upgrading to django-1.11. When I load my /admin page, I get </p>\n\n<pre><code>Exception Type: TemplateDoesNotExist\nException Value:    admin/index.html\n</code></pre>\n\n<p>I have tried multiple options and dont know why django is not loading admin templates for django-1.11. </p>\n\n<p>Few more details:\n- I use django-jet for the admin interface\n- My TEMPLATES in settings looks like this:</p>\n\n<pre><code>TEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [\n          os.path.join(BASE_DIR, 'custom_dir_1'),\n          os.path.join(BASE_DIR, 'custom_dir_2'),\n          os.path.join(BASE_DIR, 'custom_dir_3')\n        ],\n        'OPTIONS': {\n            'context_processors': [\n              'django.contrib.auth.context_processors.auth',\n              'django.template.context_processors.request',\n              'django.template.context_processors.i18n',\n              'django.contrib.messages.context_processors.messages',\n              'context_processors.base_context',\n            ],\n        }\n    }\n]\n</code></pre>\n\n<p>Let me know if I can provide any other information to debug better. Any guidance in this issue is super appreciated, Have been at this issue for 3rd consecutive day :-(</p>\n"}, {"tags": ["python", "python-3.x", "global-variables", "telegram"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 4, "creation_date": 1527118810, "post_id": 50498905, "comment_id": 88010651, "body": "This is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. It is impossible to debug your code without one. But basically, this is the problem with relying on mutable global state. Your code is now a mess, and very difficult to debug and reason about."}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1527119283, "post_id": 50498905, "comment_id": 88010767, "body": "shouldn&#39;t door be defined as global right at the beginning?"}, {"owner": {"reputation": 130, "user_id": 9836259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0f41bd10fa3d8d3f9f6686cb2740397?s=128&d=identicon&r=PG&f=1", "display_name": "Shodmoth", "link": "https://stackoverflow.com/users/9836259/shodmoth"}, "reply_to_user": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1527119407, "post_id": 50498905, "comment_id": 88010792, "body": "I agree with @SpghttCd, it seems like if you remove the global door from inside the function, it should work."}, {"owner": {"reputation": 714, "user_id": 7004463, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c8d52d44a24c7a6dcb7feeb01ffa085?s=128&d=identicon&r=PG&f=1", "display_name": "pyeR_biz", "link": "https://stackoverflow.com/users/7004463/pyer-biz"}, "edited": false, "score": 1, "creation_date": 1527119855, "post_id": 50498905, "comment_id": 88010880, "body": "@Mamiglia Please show us your function calls with your input cases. We&#39;ll need inputs, real outputs, and desired outputs."}, {"owner": {"reputation": 1, "user_id": 9419492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678ec8265b39878782a1ce958926ceb8?s=128&d=identicon&r=PG&f=1", "display_name": "Mamiglia", "link": "https://stackoverflow.com/users/9419492/mamiglia"}, "reply_to_user": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1527122010, "post_id": 50498905, "comment_id": 88011308, "body": "@SpghttCd i red <a href=\"https://stackoverflow.com/questions/423379/using-global-variables-in-a-function\">here</a> not to do it, but anyway it didn&#39;t work also if i use classes instead of global variables"}, {"owner": {"reputation": 1, "user_id": 9419492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678ec8265b39878782a1ce958926ceb8?s=128&d=identicon&r=PG&f=1", "display_name": "Mamiglia", "link": "https://stackoverflow.com/users/9419492/mamiglia"}, "reply_to_user": {"reputation": 714, "user_id": 7004463, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c8d52d44a24c7a6dcb7feeb01ffa085?s=128&d=identicon&r=PG&f=1", "display_name": "pyeR_biz", "link": "https://stackoverflow.com/users/7004463/pyer-biz"}, "edited": false, "score": 0, "creation_date": 1527122210, "post_id": 50498905, "comment_id": 88011349, "body": "@Poppinyoshi is now ok? i&#39;m sorry but the entire code enteract on telegram and it&#39;s pretty difficult to put it in clear terms. anyway you can consider chat.send() as a print on the chat, and message.text as the input received"}, {"owner": {"reputation": 2121, "user_id": 6676101, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/GdQJN.jpg?s=128&g=1", "display_name": "Toothpick Anemone", "link": "https://stackoverflow.com/users/6676101/toothpick-anemone"}, "edited": false, "score": 0, "creation_date": 1527135483, "post_id": 50498905, "comment_id": 88014287, "body": "do <b>NOT</b> use global variables."}, {"owner": {"reputation": 1, "user_id": 9419492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678ec8265b39878782a1ce958926ceb8?s=128&d=identicon&r=PG&f=1", "display_name": "Mamiglia", "link": "https://stackoverflow.com/users/9419492/mamiglia"}, "reply_to_user": {"reputation": 2121, "user_id": 6676101, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/GdQJN.jpg?s=128&g=1", "display_name": "Toothpick Anemone", "link": "https://stackoverflow.com/users/6676101/toothpick-anemone"}, "edited": false, "score": 0, "creation_date": 1527167914, "post_id": 50498905, "comment_id": 88033065, "body": "I&#39;m not using them and still doesn&#39;t work @ToothpickAnemone"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9419492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678ec8265b39878782a1ce958926ceb8?s=128&d=identicon&r=PG&f=1", "display_name": "Mamiglia", "link": "https://stackoverflow.com/users/9419492/mamiglia"}, "is_accepted": false, "score": 0, "last_activity_date": 1527194253, "creation_date": 1527194253, "answer_id": 50517808, "question_id": 50498905, "link": "https://stackoverflow.com/questions/50498905/python-mantain-old-values/50517808#50517808", "title": "Python mantain old values", "body": "<p>Solved, this was fault of Multithreading, I used Redis to store the variable</p>\n"}], "owner": {"reputation": 1, "user_id": 9419492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/678ec8265b39878782a1ce958926ceb8?s=128&d=identicon&r=PG&f=1", "display_name": "Mamiglia", "link": "https://stackoverflow.com/users/9419492/mamiglia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1527194253, "creation_date": 1527118646, "last_edit_date": 1527122340, "question_id": 50498905, "link": "https://stackoverflow.com/questions/50498905/python-mantain-old-values", "title": "Python mantain old values", "body": "<p>I have this global variable called door, at the beginning i set it to 20.<br>\nAfter I call a function that should modify the value of door:  </p>\n\n<pre><code>class Utilities:\n    door = 20  \n\ninf = Utilities()  \n\n@bot.command(\"door\", hidden=True)\ndef changereqnum(message, chat):\n    try:\n      inf.door = int(message.text[5::])\n    except ValueError:\n      chat.send('Actually still open to %s requests, Insert a valid number' % (inf.door))\n      return\n    chat.send('Now I\\'m open to %s requests' % (inf.door))\n</code></pre>\n\n<p>and then?<br>\nWhat happen here is that it says that the function says that it changed teh value of door, BUT if i call the function again it will still give me the old value of 20, and sometimes (randomly) the new value  </p>\n\n<p>I even tried to use an object from a class instead of using global values, but still doesn't work  </p>\n\n<p>Maybe i should say that I use this function in the code of a bot of telegram, but the entire code is really long (900 lines, you can find it <a href=\"https://github.com/Mamiglia/Requester-Bot\" rel=\"nofollow noreferrer\">here</a> ) so i simplified it  </p>\n\n<p>i'll try to do my best for what regarding real inputs and outputs: first i used classes instead of global variables, also beacause it's not really clear what does work, and what doesn't.<br>\nThis function is called whenever i type \"/door\" in the chat of my bot, and it sends me \"Actually still open to 20 requests...\" and this is ok.<br>\nInstead if I type \"/door X\" then the text is parsed and it SHOULD change the value of inf.door to the number X, and it reports so, i receive a message saying \"Now I'm open to X requests\".<br>\nAnyway it doesn't work, if i type \"/door\" after this it still gives me that the value of inf.door is 20 instead of X and i can't explain myself why. But there's another strange thing in this: if i repeat typing \"door\" in the chat it will give me randomly the value X, as it is storing both values.  </p>\n"}, {"tags": ["python", "django", "django-rest-framework", "django-channels"], "owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1536691425, "creation_date": 1527118547, "last_edit_date": 1527160373, "question_id": 50498884, "link": "https://stackoverflow.com/questions/50498884/authentication-with-django-channels-using-tokens-how-do-i-use-this-mixin", "title": "Authentication with Django channels using Tokens - How do I use this mixin", "body": "<p>My website hosts a lot of APIs(CRUDs) using DJR. I am using DJR Token based authentication and for testing I would add this header to postman</p>\n\n<pre><code>Key : Authorization \nvalue : Token 826fdf3067b07afdf9edd89a6c9facd9920de8b8\n</code></pre>\n\n<p>and Django Rest Framework would easily be able to authenticate the user.\nNow I inlcuded Django channels constantly 1.1.5 and wanted to know how I could do token based authentication. I read <a href=\"https://stackoverflow.com/questions/43392889/how-do-you-authenticate-a-websocket-with-token-authentication-on-django-channels\">this</a> post and it suggests that I copy <a href=\"https://gist.github.com/leonardoo/9574251b3c7eefccd84fc38905110ce4\" rel=\"nofollow noreferrer\">this</a> mixin to the project. I just started with Django-channels and am not sure how to include that mixin to my code. Currently I have something like this</p>\n\n<pre><code>@channel_session_user_from_http\ndef ws_connect(message):\n    user = message.user\n    message.reply_channel.send({\"accept\": True}) #Send back Acceptance response. \n\n@channel_session_user\ndef chat_join(message):\n    user = message.user #Get authenticated user\n</code></pre>\n\n<p>I have the following two questions </p>\n\n<p>1-How do I include that mixin in my current project ? I know you include mixins in classes using <code>class classname(SomeMixin)</code>. How would I go about including this mixin into my code ?</p>\n\n<p>2-Will I need to include an authentication token in my json message that I send to the websocket ?</p>\n\n<p>Any suggestions would be great.\n`</p>\n"}, {"tags": ["python", "arrays", "python-3.x", "nested-lists", "sublist"], "answers": [{"tags": [], "owner": {"reputation": 130, "user_id": 9836259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0f41bd10fa3d8d3f9f6686cb2740397?s=128&d=identicon&r=PG&f=1", "display_name": "Shodmoth", "link": "https://stackoverflow.com/users/9836259/shodmoth"}, "is_accepted": false, "score": 1, "last_activity_date": 1527118919, "creation_date": 1527118919, "answer_id": 50498942, "question_id": 50498879, "link": "https://stackoverflow.com/questions/50498879/how-to-add-items-to-multi-dimensional-arrays-with-expanding-values/50498942#50498942", "title": "How to add items to multi-dimensional arrays with expanding values", "body": "<p>3 dimensional lists have the ability to add on to either the main list or one of the sub-lists.</p>\n\n<pre><code>data_list.append(donation_amt)\n</code></pre>\n\n<p>would append to the main list, which would mean that if you had a list like yours, it would add to the end.</p>\n\n<pre><code>[['NAMES', 'DONATION AMOUNT', 'Number of Gifts', 'Avg Gifts'],\n     ['Rudolph S', 1500, 3, 0],  \n     ['Josef M', 250, 5, 0],\n     ['Joye A', 5000, 2, None],\n     ['Joni M', 2750, 1, None],\n     ['Rachelle L', 750, 3, None],\n     ['Vena U', 1000, 7, None],\n     ['Efrain L', 10000, 1, None],\n     ['Mee H', 15000, 2, None],\n     ['Tanya E', 50000, 1, None],\n     ['Garrett H', 800, 2, None],\n      [donation_amt]]\n</code></pre>\n\n<p>If you wanted to add a donation amount to a specific index, use </p>\n\n<pre><code>data_list[index].append(donation_amt).\n</code></pre>\n\n<p>Please let me know if this doesn't work or if you want a better explanation, then it may be a different issue.  </p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 7583950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05dce7f8e308a13a12e14649eb6953f?s=128&d=identicon&r=PG&f=1", "display_name": "McBraunie", "link": "https://stackoverflow.com/users/7583950/mcbraunie"}, "edited": false, "score": 0, "creation_date": 1527134712, "post_id": 50498967, "comment_id": 88014117, "body": "I hadn&#39;t considered moving in the JSON doc direction... but knowing that this option is somehow less complicated is helpful for me moving forward, so thank you for contributing the example and suggestion."}], "tags": [], "owner": {"reputation": 77, "user_id": 8700798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc8e5c5f4eb4c1022ceaacf0853ef79f?s=128&d=identicon&r=PG&f=1", "display_name": "bcstryker", "link": "https://stackoverflow.com/users/8700798/bcstryker"}, "is_accepted": false, "score": 1, "last_activity_date": 1527119115, "creation_date": 1527119115, "answer_id": 50498967, "question_id": 50498879, "link": "https://stackoverflow.com/questions/50498879/how-to-add-items-to-multi-dimensional-arrays-with-expanding-values/50498967#50498967", "title": "How to add items to multi-dimensional arrays with expanding values", "body": "<p>It seems you have 4 static columns and an indeterminate number of rows. </p>\n\n<p>Have you considered using a list of dictionaries, something like a json doc?</p>\n\n<pre><code>    data_list = [{\n            'NAME':'Rudolph S',\n            'DONATION AMOUNT' : 1500,\n            'Number of Gifts' : 3,\n            'Avg Gifts' :  0\n        },{\n            'NAME':'Josef M',\n            'DONATION AMOUNT' : 250,\n            'Number of Gifts' : 5,\n            'Avg Gifts' :  None\n        }]\n</code></pre>\n\n<p>And so on. I think you might have an easier time working with the data if you can reference the individual keys and update their values, instead of working with lists and index values.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 7583950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05dce7f8e308a13a12e14649eb6953f?s=128&d=identicon&r=PG&f=1", "display_name": "McBraunie", "link": "https://stackoverflow.com/users/7583950/mcbraunie"}, "edited": false, "score": 0, "creation_date": 1527134625, "post_id": 50499648, "comment_id": 88014091, "body": "Thank you for explaining this and providing an example. That really helps me with future endeavors as well as this one!"}], "tags": [], "owner": {"reputation": 1376, "user_id": 6190930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dfbba9c5af37b4eb37bc508a355fda7?s=128&d=identicon&r=PG", "display_name": "pgngp", "link": "https://stackoverflow.com/users/6190930/pgngp"}, "is_accepted": false, "score": 1, "last_activity_date": 1527125567, "creation_date": 1527125567, "answer_id": 50499648, "question_id": 50498879, "link": "https://stackoverflow.com/questions/50498879/how-to-add-items-to-multi-dimensional-arrays-with-expanding-values/50499648#50499648", "title": "How to add items to multi-dimensional arrays with expanding values", "body": "<p>In order to append <code>donation_amt</code> properly to the correct sublist, you need to first determine the index in the list where the donor belongs. Once you find the index, you can then append the donation amount to the sublist at that index. To achieve this, replace:</p>\n\n<pre><code>data_list.append(donation_amt) # difficulty HERE\n</code></pre>\n\n<p>with:</p>\n\n<pre><code># Determine index where the donor belongs\nidx = -1\nfor item in range(0, len(data_list)):\n    if data_list[item][0] == full_name:\n        idx = item\n        break\n\n# Append to the sublist\ndata_list[idx].append(donation_amt)\n</code></pre>\n\n<p>I tried this out and it works for me.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 7583950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05dce7f8e308a13a12e14649eb6953f?s=128&d=identicon&r=PG&f=1", "display_name": "McBraunie", "link": "https://stackoverflow.com/users/7583950/mcbraunie"}, "edited": false, "score": 1, "creation_date": 1527188597, "post_id": 50501192, "comment_id": 88045378, "body": "I really appreciate the time and thought that you put into this answer. Not only to discuss a better way of going about my situation but also explaining the drawbacks of my selected route and a way to do it anyway. My knowledge of data structures are elementary at best so this is immensely helpful. Thank you."}, {"owner": {"reputation": 61, "user_id": 3915742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7ad635d2cd422fc629c3ab8442c8e70?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3915742/thomas"}, "reply_to_user": {"reputation": 73, "user_id": 7583950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05dce7f8e308a13a12e14649eb6953f?s=128&d=identicon&r=PG&f=1", "display_name": "McBraunie", "link": "https://stackoverflow.com/users/7583950/mcbraunie"}, "edited": false, "score": 0, "creation_date": 1527220039, "post_id": 50501192, "comment_id": 88054596, "body": "@McBraunie Glad to hear it! One other thing to note which I didn&#39;t mention in the answer is that the dict structure I recommended is also far more efficient, in terms of time complexity when using <code>in</code>. Not only do we not have to make the additional list (requiring iterating through and copying elements) but <code>dicts</code> can determine if an element exists without looking at each element. See <a href=\"https://en.wikipedia.org/wiki/Associative_array\" rel=\"nofollow noreferrer\">the Wikipedia article on associative arrays</a> for more information on that sort of thing."}], "tags": [], "owner": {"reputation": 61, "user_id": 3915742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7ad635d2cd422fc629c3ab8442c8e70?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3915742/thomas"}, "is_accepted": true, "score": 1, "last_activity_date": 1527137326, "creation_date": 1527137326, "answer_id": 50501192, "question_id": 50498879, "link": "https://stackoverflow.com/questions/50498879/how-to-add-items-to-multi-dimensional-arrays-with-expanding-values/50501192#50501192", "title": "How to add items to multi-dimensional arrays with expanding values", "body": "<p>Two-dimensional lists in Python are merely lists of lists. Thus, each element of <code>data_list</code> is, itself, a list. Here is an example of accessing an element, the first element below your row of headers (thus, index 1):</p>\n\n<pre><code>&gt;&gt;&gt; first_entry = data_list[1]\n&gt;&gt;&gt; first_entry\n['Rudolph S', 1500, 3, 0]\n</code></pre>\n\n<p>Since <code>data_list[1]</code> (which we have stored as a variable called <code>first_entry</code>) is also a list we can access, we could access the fourth element (at index 3, since lists begin indexing at 0) of the first entry as follows:</p>\n\n<pre><code>&gt;&gt;&gt; first_entry = data_list[1]\n&gt;&gt;&gt; fourth_element = first_entry[3]\n&gt;&gt;&gt; fourth_element\n0\n</code></pre>\n\n<p>Or, more succinctly:</p>\n\n<pre><code>&gt;&gt;&gt; data_list[1][3]\n0\n</code></pre>\n\n<p>So, to begin to answer your question, if your goal was to update the donation amount of <code>\"Joye A\"</code>, you would use <code>data_list[3][1] = donation_amt</code>. This is because Joye's entry is at index 3 of the main list and donations are recorded at index 1 of her sub list.</p>\n\n<p>Unfortunately, this doesn't really solve your problem, since you want to take an arbitrary name for which to either create a new entry or update an existing entry. The real answer here is that you are using the wrong data structure. For the sake of educational value, though, I'll go ahead and describe how you could do this with your existing structure.</p>\n\n<h2>Using your matrix</h2>\n\n<p>First you would need to determine if the name already exists. As a result, it would be best to create an extra list which contains <em>only</em> the first column, a 1-d list. You could do this in any number of ways. I'll show it as a list comprehension:</p>\n\n<pre><code>&gt;&gt;&gt; names_only = [e[0] for e in data_list]\n&gt;&gt;&gt; names_only\n['NAMES', 'Rudolph S', 'Josef M', ...]\n</code></pre>\n\n<p>I won't explain this here, but there are plenty of threads explaining how list comprehensions work for any readers who aren't aware.</p>\n\n<p>First, you check if the name already exists in the matrix:</p>\n\n<pre><code>&gt;&gt;&gt; 'Josef M' in names_only\nTrue\n</code></pre>\n\n<p>If so, you now need to find the index of the name you're looking for. Lists in Python have an index function:</p>\n\n<pre><code>&gt;&gt;&gt; idx = names_only.index('Joesf M')\n&gt;&gt;&gt; idx\n2\n</code></pre>\n\n<p>You now update his donation amount as described above:</p>\n\n<pre><code>&gt;&gt;&gt; data_list[idx][1] = donation_amt\n</code></pre>\n\n<p>Now for if he wasn't in the matrix, we want to make a whole new row. Lets imagine we're processing a user named <code>'bob'</code>. He's not yet in the matrix. Here you use your append function:</p>\n\n<pre><code>&gt;&gt;&gt; data_list.append([bob, donation_amt, 1, None])\n</code></pre>\n\n<p>Where <code>1</code> and <code>None</code> can be replaced with whatever your default values are. Putting it all together as a function:</p>\n\n<pre><code>&gt;&gt;&gt; def update_or_create(name, amt):\n...   names = [e[0] for e in data_list]\n...   if name in names:\n...      idx = names.index(name)\n...      data_list[idx][1] = amt\n...   else:\n...      data_list.append([name, amt, 1, None])\n</code></pre>\n\n<p>Should do what your asking for.</p>\n\n<h2>Finally</h2>\n\n<p>It would be better to use a different structure for this. I would propose a dict structure like:</p>\n\n<pre><code>new_structure = {NAME: {'donation': DONATION_AMT, 'num_gifts': NUM_GIFTS, 'avg_amt': AVERAGE_DONATION},...}\n</code></pre>\n\n<p>Without going into too much detail, following this format would allow the following function to perform the same task:</p>\n\n<pre><code>&gt;&gt;&gt; def update_or_create(name, amt):\n...   if name in new_structure:\n...       new_structure[name]['donation'] = amt\n...   else:\n...       new_structure.update({name: {'donation': amt, 'num_gifts': 1, 'avg_amt': None}})\n</code></pre>\n\n<p>Much nicer.</p>\n"}], "owner": {"reputation": 73, "user_id": 7583950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a05dce7f8e308a13a12e14649eb6953f?s=128&d=identicon&r=PG&f=1", "display_name": "McBraunie", "link": "https://stackoverflow.com/users/7583950/mcbraunie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 50501192, "answer_count": 4, "score": 0, "last_activity_date": 1527137326, "creation_date": 1527118494, "question_id": 50498879, "link": "https://stackoverflow.com/questions/50498879/how-to-add-items-to-multi-dimensional-arrays-with-expanding-values", "title": "How to add items to multi-dimensional arrays with expanding values", "body": "<p>I am working on a project and I have a list of lists containing names, monetary values, etc. I am running into trouble trying to update the individual sub-lists within the primary list when a user enters a value. </p>\n\n<p>For example, my list contains 4 rows (constant) and an in-determinant number of columns based on user entries. I am including the whole program just for reference in case there are questions about what it all looks like:</p>\n\n<pre><code>spacing = '- ' * 45  # formatting for DONOR header\ndata_list = [['NAMES', 'DONATION AMOUNT', 'Number of Gifts', 'Avg Gifts'],\n         ['Rudolph S', 1500, 3, 0],  \n         ['Josef M', 250, 5, 0],\n         ['Joye A', 5000, 2, None],\n         ['Joni M', 2750, 1, None],\n         ['Rachelle L', 750, 3, None],\n         ['Vena U', 1000, 7, None],\n         ['Efrain L', 10000, 1, None],\n         ['Mee H', 15000, 2, None],\n         ['Tanya E', 50000, 1, None],\n         ['Garrett H', 800, 2, None]] \n\ndef addtolist():\n\"\"\"Method for sending 'Thank You' messages to Donors, using names *\"\"\"\n\n    while True:\n        print(\"Enter the name of the person you are writing to (or enter 'list' to see a list of names or Q to quit) \")\n        fname_prompt = input(\"First Name: \").strip().capitalize()\n        if fname_prompt.upper() == \"Q\":\n            break\n        elif fname_prompt.lower() == \"list\":  \n            if len(data_list) - 1 % 2 != 0:\n                for i in range(0, int(len(data_list) - 1 / 2)):\n                    cut_off = int((len(data_list)) / 2)\n                    if i == 0:               \n                        print(spacing)\n                        print('{:&gt;44s}'.format(str(data_list[i][0])))  \n                        print(spacing)\n                    elif cut_off + i &gt;= len(data_list):\n                        continue\n                    else:\n                        print('{:&gt;30s}'.format(data_list[i][0]), '{:&gt;35s}'.format(data_list[cut_off + i][0]))\n            else:\n                if i == 0:                                                  \n                    print(spacing)\n                    print('{:&gt;20s}'.format(str(data_list[i])))              \n                    print(spacing)\n                else:\n                    print('{:&gt;15s}'.format(data_list[i][0]), '{:&gt;30s}'.format(data_list[cut_off + i][0]))\n        else:\n            lname_prompt = input(\"Last Name: \").strip().capitalize()\n            if lname_prompt.upper() == \"Q\":\n                break\n            elif lname_prompt.lower() == \"list\":\n                if len(data_list) - 1 % 2 != 0:\n                    for i in range(0, int(len(data_list) - 1 / 2)):\n                        cut_off = int((len(data_list)) / 2)\n                        if i == 0:                                          \n                            print(spacing)\n                            print('{:&gt;44s}'.format(str(data_list[i][0])))  \n                            print(spacing)\n                        elif cut_off + i &gt;= len(data_list):\n                            continue\n                        else:\n                            print('{:&gt;30s}'.format(data_list[i][0]), '{:&gt;35s}'.format(data_list[cut_off + i][0]))\n                else:\n                    if i == 0:  # for each item in list / 2 (5 x)\n                        print(spacing)\n                        print('{:&gt;20s}'.format(str(data_list[i][0])))  \n                        print(spacing)\n                    else:\n                        print('{:&gt;15s}'.format(data_list[i][0]), '{:&gt;30s}'.format(data_list[cut_off + i][0]))\n            else:\n                full_name = fname_prompt + \" \" + lname_prompt\n                if full_name != \"List List\" or full_name != \"list \":\n                    name_found = False\n                    for vals in data_list:\n                        if full_name in vals:\n                            name_found = True\n                        else:\n                            name_found = False\n\n                        if name_found is False:\n                            add_name = input(\"That name is not in the Donor list. Do you want to add it to the list?  \").upper()\n                            if add_name == \"Y\":                                         \n                                data_list.append([full_name])\n                                if len(data_list) - 1 % 2 != 0:\n                                    for i in range(0, int(len(data_list) - (len(data_list) - 2) / 2)):\n                                        cut_off = int((len(data_list)) / 2)\n                                            if i == 0:                                          \n                                                print(spacing)\n                                                print('{:&gt;44s}'.format(str(data_list[i][0])))\n                                                print(spacing)\n                                            elif cut_off + i &gt;= len(data_list):\n                                                 print('{:&gt;30s}'.format(data_list[i][0]))\n                                                continue\n                                            else:\n                                                print('{:&gt;30s}'.format(data_list[i][0]), '{:&gt;35s}'.format(data_list[cut_off + i][0]))\n                                 else:\n                                     if i == 0:  # for each item in list / 2 (5 x)\n                                         print(spacing)\n                                         print('{:&gt;20s}'.format(str(data_list[i][0])))  \n                                         print(spacing)\n                                     else:\n                                         print('{:&gt;15s}'.format(data_list[i][0]), '{:&gt;30s}'.format(data_list[cut_off + i][0]))\n\n                             donation_amt = int(input(\"Enter in the donation amount from Donor {0}: $\".format(full_name)))\n                             print('{0} has donated ${1}'.format(full_name, donation_amt))\n                             data_list.append(donation_amt) # difficulty HERE\n                             print(data_list)\n</code></pre>\n\n<p>The main line(s) I am having difficult with are at the very end with a comment \"difficult HERE\". </p>\n\n<pre><code>data_list.append(donation_amt) # difficulty HERE\n</code></pre>\n\n<p>I am trying to work this so that when the user enters a new name and new donation amount (or if they simply select an existing name and attach a donation amount to it), that the program can either append/insert the monetary value to the associated sublist (the name it is attached to). the way I have it set up now it is just appending the numerical amount onto the end of the larger list but I have been unsuccessful in attaching the value to the sublist... Has anyone done anything like this before?</p>\n"}, {"tags": ["python", "operating-system", "rename"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1527118391, "post_id": 50498860, "comment_id": 88010522, "body": "You&#39;ll need to prepend the entire path to your filenames... this means adding <code>S:\\Shared\\Santa Rosa</code> as the prefix."}, {"owner": {"reputation": 69476, "user_id": 54017, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a010849a3b3a58bc7c2489f44bf22387?s=128&d=identicon&r=PG", "display_name": "Wolph", "link": "https://stackoverflow.com/users/54017/wolph"}, "edited": false, "score": 0, "creation_date": 1527118591, "post_id": 50498860, "comment_id": 88010581, "body": "To make your work a tad easier, try pathlib: <a href=\"https://docs.python.org/3/library/pathlib.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/pathlib.html</a>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1527122254, "post_id": 50498860, "comment_id": 88011360, "body": "I suggest you use <code>glob.glob()</code> instead of <code>os.listdir</code> because the former will return full pathnames if you pass it one as an argument in the call. Otherwise you&#39;ll need to <code>os.path.join()</code> the parent-folder name(s) to every filename-only that the latter returns before using it."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1527118483, "creation_date": 1527118483, "answer_id": 50498875, "question_id": 50498860, "link": "https://stackoverflow.com/questions/50498860/os-rename-not-working/50498875#50498875", "title": "os.rename not working", "body": "<p><code>os.rename()</code> needs the full path to the file:</p>\n\n<pre><code>os.rename(os.path.join(r\"S:\\Shared\\Santa Rosa\", x), os.path.join(r\"S:\\Shared\\Santa Rosa\", x.replace(\"__\", \"\"))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "is_accepted": false, "score": 0, "last_activity_date": 1527118492, "creation_date": 1527118492, "answer_id": 50498876, "question_id": 50498860, "link": "https://stackoverflow.com/questions/50498860/os-rename-not-working/50498876#50498876", "title": "os.rename not working", "body": "<p>Use <code>os.path.join</code> to get the full path.</p>\n\n<pre><code>dirPath = r\"S:\\Shared\\Santa Rosa\"\nmyDir = os.listdir(dirPath)\nfor x in myDir:\n   x = os.path.join(myDir, x)\n   os.rename(x, x.replace('__', ''))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5236, "user_id": 958118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac37c9f3e640dc3f7a79585e7bdd7bd?s=128&d=identicon&r=PG", "display_name": "Joseph Sheedy", "link": "https://stackoverflow.com/users/958118/joseph-sheedy"}, "is_accepted": true, "score": 1, "last_activity_date": 1527118614, "creation_date": 1527118614, "answer_id": 50498899, "question_id": 50498860, "link": "https://stackoverflow.com/questions/50498860/os-rename-not-working/50498899#50498899", "title": "os.rename not working", "body": "<p>You should give the full pathname to os.rename, e.g. something like</p>\n\n<pre><code>dirName = r\"S:\\Shared\\Santa Rosa\"\nmyDir = os.listdir(dirName)\nfor x in myDir:\n    oldName = os.path.join(dirName, x)\n    newName = os.path.join(dirName, x.replace('__', ''))\n    os.rename(oldName, newName)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "is_accepted": false, "score": 1, "last_activity_date": 1527118711, "creation_date": 1527118711, "answer_id": 50498914, "question_id": 50498860, "link": "https://stackoverflow.com/questions/50498860/os-rename-not-working/50498914#50498914", "title": "os.rename not working", "body": "<p>This is a job for <code>glob</code>. Use it to filter filenames. And since it returns a usable path, you don't need <code>os.path.join</code>.</p>\n\n<pre><code>&gt;&gt;&gt; from glob import glob\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; for fn in glob(\"tmp/__*.pdf\"):\n...     print(fn)\n...     os.rename(fn, fn.replace(\"__\", \"\"))\n... \ntmp/__aaa.pdf\ntmp/__bbb.pdf\n</code></pre>\n"}], "owner": {"reputation": 513, "user_id": 6273533, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/ztqm3.jpg?s=128&g=1", "display_name": "geoJshaun", "link": "https://stackoverflow.com/users/6273533/geojshaun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1557, "favorite_count": 0, "accepted_answer_id": 50498899, "answer_count": 4, "score": 1, "last_activity_date": 1527122030, "creation_date": 1527118329, "last_edit_date": 1527122030, "question_id": 50498860, "link": "https://stackoverflow.com/questions/50498860/os-rename-not-working", "title": "os.rename not working", "body": "<p>I try to rename files. Do not want file begins with \"__\". Tried using code from post:\n<a href=\"https://stackoverflow.com/questions/24297468/removing-characters-from-filename-in-batch\">Removing characters from filename in batch</a></p>\n\n<p>When making list:</p>\n\n<pre><code>myDir = os.listdir(r\"S:\\Shared\\Santa Rosa\")\nfor x in myDir:\n  ...\n</code></pre>\n\n<p>I get this output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Tuesday\nWednesday\n__1831.pdf\n__1832.pdf\n__1833.pdf\n__1834.pdf\n__1841.pdf\n__1842.pdf\n__1843.pdf\n__1844.pdf\n__1851.pdf\n__1852.pdf\n__1853.pdf\n__1854.pdf\n__1861.pdf\n__1862.pdf\n</code></pre>\n\n<p>But when do this:</p>\n\n<pre><code>for x in myDir:\n    os.rename(x, x.replace('__', ''))\n</code></pre>\n\n<p>I get error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Traceback (most recent call last):\n  File \"&lt;interactive input&gt;\", line 2, in &lt;module&gt;\nWindowsError: [Error 2] The system cannot find the file specified\n</code></pre>\n"}, {"tags": ["python", "file", "csv", "reader"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 2, "creation_date": 1527118569, "post_id": 50498851, "comment_id": 88010573, "body": "It <i>is</i> the file content, not the file size. You have a non-Unicode byte in position 7206."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1527118687, "post_id": 50498851, "comment_id": 88010621, "body": "No, Python has no such limit."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1527119445, "post_id": 50498851, "comment_id": 88010801, "body": "Are you using python 2 or 3? Do you expect to have any non-Ascii characters in the file? Do you know how its encoded? And most obviously, have you cracked open an editor and checked what&#39;s at character position 7206? You could <code>print(open(filename, &#39;rb&#39;).read(7240)[7190:])</code> to take a peek at the characters in that area."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1527122735, "post_id": 50498851, "comment_id": 88011458, "body": "@tdelaney: The fact that it&#39;s trying to decode at all indicates it&#39;s Python 3; Python 2&#39;s <code>open</code> doesn&#39;t decode, and Python 2&#39;s <code>csv</code> module doesn&#39;t handle the <code>unicode</code> type even if it did (<code>from io import open</code> would get Py3-style <code>open</code> in Py2, but it wouldn&#39;t be compatible with <code>csv</code>, which only handles <code>str</code> type in Py2)."}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1527118904, "post_id": 50498887, "comment_id": 88010672, "body": "For the record, in either <code>latin-1</code> or <code>cp1252</code>, <code>\\xa0</code> is the encoding of the non-breaking space (equivalent to HTML escape <code>&amp;nbsp;</code>). You wouldn&#39;t see it in a regular text editor or spreadsheet viewer (not in any way distinguishable from a plain space), but a hex editor should make it plain as day."}, {"owner": {"reputation": 51, "user_id": 5025473, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6400cdbc50f736e6462d67c037434ba1?s=128&d=identicon&r=PG&f=1", "display_name": "yinonby", "link": "https://stackoverflow.com/users/5025473/yinonby"}, "edited": false, "score": 0, "creation_date": 1527122038, "post_id": 50498887, "comment_id": 88011315, "body": "The f.read() trick was helpful, There was a hidden character on the 3rd-to-last line, which was the line that had the 40K-th byte (so when I removed that line and following lines I thought that by reducing to under 40k I was fixing the problem)"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 0, "last_activity_date": 1527118565, "creation_date": 1527118565, "answer_id": 50498887, "question_id": 50498851, "link": "https://stackoverflow.com/questions/50498851/why-does-csv-reader-fail-when-the-file-size-is-larger-than-40k-bytes/50498887#50498887", "title": "Why does csv.reader fail when the file size is larger than 40K bytes?", "body": "<p>You have invalid UTF-8 data in your file. This has nothing to do with the <code>csv</code> module, nor the size of the file; your larger file has invalid data in it, your smaller file does not. Simply doing:</p>\n\n<pre><code> with open(filename) as f:\n     f.read()\n</code></pre>\n\n<p>should trigger the same error, and it's purely a matter of encountering an invalid UTF-8 byte, which indicates your file either wasn't UTF-8 to start with, or has been corrupted in some way.</p>\n\n<p>If your file is actually a different encoding (e.g. <code>latin-1</code>, <code>cp1252</code>, etc.; the <code>file</code> command line utility might help with identification, but for many ASCII superset encodings, you just have to <em>know</em>), pass that as the <code>encoding</code> argument to <code>open</code> to use instead of the locale default (<code>utf-8</code> in this case), so you can decode the bytes properly, e.g.:</p>\n\n<pre><code>    # Also add newline='' to defer newline processing to csv module, where it's part\n    # of the CSV dialect\n    with open(filename, encoding='latin-1', newline='') as csvfile:\n        csvDictReader = csv.DictReader(csvfile, delimiter=',', quotechar='\"')\n        for row in csvDictReader:\n            print(row)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 1, "creation_date": 1527119509, "post_id": 50498970, "comment_id": 88010819, "body": "Assuming the csv is utf-8 encoded. That may be the default for read but it doesn&#39;t mean its correct for the file."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1527122592, "post_id": 50498970, "comment_id": 88011428, "body": "<code>errors=&quot;ignore&quot;</code> is only the correct solution when you have a file that is <i>known</i> to be UTF-8, but has been corrupted in some way. For everything else, it means &quot;I don&#39;t care about correctness, and will happily lose data all over the place.&quot; Figure out the correct encoding and use that, don&#39;t just say &quot;UTF-8 is the only possible encoding, so it <i>must</i> be ignorable corruption.&quot; Odds are, it&#39;s perfectly valid <code>cp1252</code>, produced by some Windows program that was told to use the locale encoding rather than UTF-16 (common portable encoding for Windows) or UTF-8 (portable encoding everywhere else)."}], "tags": [], "owner": {"reputation": 9, "user_id": 7324168, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MOajdO0wYWw/AAAAAAAAAAI/AAAAAAAAABY/6rZKDIraYk8/photo.jpg?sz=128", "display_name": "Albert Wang", "link": "https://stackoverflow.com/users/7324168/albert-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1527119134, "creation_date": 1527119134, "answer_id": 50498970, "question_id": 50498851, "link": "https://stackoverflow.com/questions/50498851/why-does-csv-reader-fail-when-the-file-size-is-larger-than-40k-bytes/50498970#50498970", "title": "Why does csv.reader fail when the file size is larger than 40K bytes?", "body": "<p>the file size is not the real problem\nsee the exception:</p>\n\n<blockquote>\n  <p>UnicodeDecodeError: 'utf-8' codec can't decode byte 0xa0 in position 7206: invalid start byte</p>\n</blockquote>\n\n<p>you should handle the encoding problem at first</p>\n\n<pre><code>with open(filename, 'rt', encoding='utf-8', errors='ignore') as csvfile:\n</code></pre>\n\n<p>which will ignore the encoding errors</p>\n"}], "owner": {"reputation": 51, "user_id": 5025473, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6400cdbc50f736e6462d67c037434ba1?s=128&d=identicon&r=PG&f=1", "display_name": "yinonby", "link": "https://stackoverflow.com/users/5025473/yinonby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 50498887, "answer_count": 2, "score": 0, "last_activity_date": 1527122487, "creation_date": 1527118274, "last_edit_date": 1527122487, "question_id": 50498851, "link": "https://stackoverflow.com/questions/50498851/why-does-csv-reader-fail-when-the-file-size-is-larger-than-40k-bytes", "title": "Why does csv.reader fail when the file size is larger than 40K bytes?", "body": "<p>I have the following code:</p>\n\n<pre><code>with open(filename, 'rt') as csvfile:\n    csvDictReader = csv.DictReader(csvfile, delimiter=',', quotechar='\"')\n    for row in csvDictReader:\n        print(row)\n</code></pre>\n\n<p>Whenever the file size is less than 40k bytes, the program works great.\nWhen the file size crosses 40k, I get this error while trying to read the file:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>UnicodeDecodeError: 'utf-8' codec can't decode byte 0xa0 in position 7206: invalid start byte\n</code></pre>\n\n<p>The actual file content doesn't seem to be a problem, only the size of the file itself (40k bytes is really tiny).</p>\n\n<p>When file size is greater than 40K bytes, the error always happens on the line that contains the 32K-th byte.</p>\n\n<p>I have a feeling that python fails to read the file that is more than 40K bytes without an exception, and just truncates it around the 32K-th byte, in the middle. Is that correct? Where is this limit defined?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1527118198, "post_id": 50498825, "comment_id": 88010467, "body": "There are implicit line-continuations inside of parentheses. Also, note that Python does implicit string-literal concatenation, so <code>&#39;Hello &#39; &#39;world&#39;</code> will implicitely become <code>&#39;Hello world&#39;</code>..."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1527122764, "post_id": 50498825, "comment_id": 88011465, "body": "Are all those space-separated items in the string <code>&#39;product_symbol entity unique_id as_of_date ...&#39;</code> supposed to become separate elements/members of the <code>namedtuple</code>?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1527122964, "post_id": 50498825, "comment_id": 88011492, "body": "@martineau: <code>namedtuple</code> is documented to accept a space and/or comma separated string of the property names, or a sequence of strings where each string is a property name. Either one works; I tend to use the single string for brevity when it&#39;s half a dozen short names or fewer, but for a longer set of properties, moving to a <code>list</code>/<code>tuple</code> of <code>str</code> would probably improve readability."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1527123022, "post_id": 50498825, "comment_id": 88011502, "body": "@ShadowRanger: I know that, I just want to understand what the OP wants done."}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1527118247, "post_id": 50498843, "comment_id": 88010488, "body": "You don&#39;t need to join, the second argument can be a sequence. The string version is for us lazy people :)"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 5, "last_activity_date": 1527145386, "last_edit_date": 1527145386, "creation_date": 1527118216, "answer_id": 50498843, "question_id": 50498825, "link": "https://stackoverflow.com/questions/50498825/namedtuple-declaration-indentation/50498843#50498843", "title": "namedtuple declaration indentation", "body": "<p>I propose a PEP-8 compliant version which declares your attributes as a list.</p>\n\n<pre><code>name = 'Product'\nattrs = [\n   'product_symbol',\n   'entity',\n   'unique_id',\n   ... \n]\n\nProduct = namedtuple(name, attrs)\n</code></pre>\n\n<p>Add a trailing comma to <code>attrs</code>, <a href=\"https://stackoverflow.com/questions/11597901/why-are-trailing-commas-allowed-in-a-list\">this makes it easy when doing diff comparisons</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 262, "user_id": 848077, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Fv2Bq.jpg?s=128&g=1", "display_name": "&#211;lafur Aron", "link": "https://stackoverflow.com/users/848077/%c3%93lafur-aron"}, "is_accepted": false, "score": -2, "last_activity_date": 1527118610, "creation_date": 1527118610, "answer_id": 50498896, "question_id": 50498825, "link": "https://stackoverflow.com/questions/50498825/namedtuple-declaration-indentation/50498896#50498896", "title": "namedtuple declaration indentation", "body": "<p>If you are only talking about breaking up the string so it does not exceed the 80 character limit you can use the \\ character in a string so that it will be interpreted as single string without newlines(\\n)    </p>\n\n<pre><code>from collections import namedtuple\n\nProduct = namedtuple(\n        'Product',\n        'product_symbol entity unique_id as_of_date company_name followers\\\n         linkedin_employees linkedin industry date_added date_updated\\ \n         description website sector product_industry'\n    )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": -1, "last_activity_date": 1527123636, "creation_date": 1527123636, "answer_id": 50499439, "question_id": 50498825, "link": "https://stackoverflow.com/questions/50498825/namedtuple-declaration-indentation/50499439#50499439", "title": "namedtuple declaration indentation", "body": "<p>I would suggest using Python's implicit joining of adjacent string literals to make it more readable and be PEP 8 compliant. Note I also added (optional) commas between items in the string which I think makes it even more readable.</p>\n\n<pre><code>Product = namedtuple('Product',\n                     'product_symbol, entity, unique_id, as_of_date,'\n                     'company_name, followers, linkedin_employees,'\n                     'linkedin, industry, date_added, date_updated,'\n                     'description, website, sector, product_industry')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 4, "last_activity_date": 1527181891, "last_edit_date": 1527181891, "creation_date": 1527179694, "answer_id": 50514202, "question_id": 50498825, "link": "https://stackoverflow.com/questions/50498825/namedtuple-declaration-indentation/50514202#50514202", "title": "namedtuple declaration indentation", "body": "<p>If your version of Python is modern enough (Python 3.6+), you might consider a declarative version:</p>\n\n<pre><code>from datetime import datetime\nfrom typing import NamedTuple\n\nclass Product(NamedTuple):\n    product_symbol: str\n    entity: str\n    unique_id: int\n    as_of_date: datetime\n    company_name: str\n    followers: list\n    linkedin_employees: list\n    linkedin: str\n    industry: str\n    date_added: datetime\n    date_updated: datetime\n    description: str\n    website: str\n    sector: str\n    product_industry: str\n</code></pre>\n\n<p>The generated type is equivalent to a <code>collections.namedtuple</code>, but with <code>__annotations__</code> and <code>_field_types</code> attributes added.  The implementation detail is different:</p>\n\n<ul>\n<li><code>namedtuple</code> is a factory function, it builds up a string defining the type and then uses <a href=\"https://github.com/python/cpython/blob/301e3cc8a5bc68c5347ab6ac6f83428000d31ab2/Lib/collections/__init__.py#L397\" rel=\"nofollow noreferrer\"><code>exec</code></a>, returning the generated type.</li>\n<li><code>NamedTuple</code> is a class, it uses <a href=\"https://github.com/python/cpython/blob/301e3cc8a5bc68c5347ab6ac6f83428000d31ab2/Lib/typing.py#L1386\" rel=\"nofollow noreferrer\">metaclasses</a> and a custom <code>__new__</code> to handle the annotations, and then <a href=\"https://github.com/python/cpython/blob/301e3cc8a5bc68c5347ab6ac6f83428000d31ab2/Lib/typing.py#L1336\" rel=\"nofollow noreferrer\">delegates to collections anyway</a> to build the type (with the same code generation + <code>exec</code> as above).</li>\n</ul>\n"}], "owner": {"reputation": 7303, "user_id": 260826, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/D40aN.jpg?s=128&g=1", "display_name": "gogasca", "link": "https://stackoverflow.com/users/260826/gogasca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 50498843, "answer_count": 4, "score": 3, "last_activity_date": 1527181891, "creation_date": 1527118088, "last_edit_date": 1527122619, "question_id": 50498825, "link": "https://stackoverflow.com/questions/50498825/namedtuple-declaration-indentation", "title": "namedtuple declaration indentation", "body": "<p>I have the following <code>namedtuple</code>:</p>\n\n<pre><code>from collections import namedtuple\n\nProduct = namedtuple(\n        'Product',\n        'product_symbol entity unique_id as_of_date company_name followers linkedin_employees linkedin industry date_added date_updated description website sector product_industry'\n    )\n</code></pre>\n\n<p>What is the best way to declare it, so it does not exceeds the Python line limit of 80 characters?</p>\n"}, {"tags": ["python", "python-3.x", "selenium", "selenium-webdriver", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "edited": false, "score": 0, "creation_date": 1527121674, "post_id": 50498809, "comment_id": 88011236, "body": "Please make sure your <b>Chrome/Selenium/ChromeDriver</b> are all on recommended builds. you can check which version of ChromeDriver is supported on your version of chrome <a href=\"https://sites.google.com/a/chromium.org/chromedriver/downloads\" rel=\"nofollow noreferrer\">HERE</a>. I have seen this issue when not on <b><i>up to date</i></b> combinations."}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "edited": false, "score": 1, "creation_date": 1527141791, "post_id": 50498809, "comment_id": 88016356, "body": "As @PixelEinstein mentioned update the question with you binary version information and <i>error stack trace</i>"}, {"owner": {"reputation": 762, "user_id": 9559884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/joDJA.png?s=128&g=1", "display_name": "StyleZ", "link": "https://stackoverflow.com/users/9559884/stylez"}, "edited": false, "score": 0, "creation_date": 1527164677, "post_id": 50498809, "comment_id": 88030640, "body": "Yes I have downloaded latest release, I have been even trying an older realeases to check if its some kind of a bug in the version, but no, its not a problem"}], "answers": [{"comments": [{"owner": {"reputation": 762, "user_id": 9559884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/joDJA.png?s=128&g=1", "display_name": "StyleZ", "link": "https://stackoverflow.com/users/9559884/stylez"}, "edited": false, "score": 0, "creation_date": 1527164554, "post_id": 50501475, "comment_id": 88030551, "body": "you can see on a first line that a string quotes are there , but i am going to try that driver.navige.to() function ^.^ thanks for that one"}], "tags": [], "owner": {"reputation": 3571, "user_id": 9405154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2b7yZ.jpg?s=128&g=1", "display_name": "Ishita Shah", "link": "https://stackoverflow.com/users/9405154/ishita-shah"}, "is_accepted": false, "score": 0, "last_activity_date": 1527139016, "creation_date": 1527139016, "answer_id": 50501475, "question_id": 50498809, "link": "https://stackoverflow.com/questions/50498809/selenium-webdriver-get-method-doesnt-always-work/50501475#50501475", "title": "Selenium webdriver.get() method doesnt always work", "body": "<p>You can use  <code>driver.navigate.to(\"\");</code></p>\n\n<p>Also as I see, You might missing String Double Quotes \" \" here,  <code>chrome.get(https://www.google.com)</code></p>\n"}, {"comments": [{"owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "edited": false, "score": 1, "creation_date": 1527177397, "post_id": 50509458, "comment_id": 88039618, "body": "There is no difference between using <code>&#39;&#39;</code> or <code>&quot;&quot;</code> when quoting strings in Python. I think there must be something else going on here."}, {"owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "edited": false, "score": 0, "creation_date": 1527177784, "post_id": 50509458, "comment_id": 88039861, "body": "Glad you&#39;re now up and running though!"}, {"owner": {"reputation": 762, "user_id": 9559884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/joDJA.png?s=128&g=1", "display_name": "StyleZ", "link": "https://stackoverflow.com/users/9559884/stylez"}, "reply_to_user": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "edited": false, "score": 0, "creation_date": 1527179870, "post_id": 50509458, "comment_id": 88040945, "body": "@PixelEinstein I know there is no difference, i just found out that before it wasnt doing this kind of stuff , so I looked up what I was doing before and now, and the only difference were quotes ... and I left it to run for a few hours and no error ... so for me it was a solution"}], "tags": [], "owner": {"reputation": 762, "user_id": 9559884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/joDJA.png?s=128&g=1", "display_name": "StyleZ", "link": "https://stackoverflow.com/users/9559884/stylez"}, "is_accepted": true, "score": 2, "last_activity_date": 1527164917, "creation_date": 1527164917, "answer_id": 50509458, "question_id": 50498809, "link": "https://stackoverflow.com/questions/50498809/selenium-webdriver-get-method-doesnt-always-work/50509458#50509458", "title": "Selenium webdriver.get() method doesnt always work", "body": "<p>Okay, after a few hours I decided to give it a little try and change ( \"\" ) to ( ' ' ) and as I can see it works :D I dont know why it has a problem with string \"\"</p>\n\n<p>here is edited line of my code : </p>\n\n<pre><code>chrome.get('https://www.google.com')\n</code></pre>\n\n<blockquote>\n  <p>( I ve tried it with proxies with loop that was starting the webdriver\n  100 times , and everytime after i've changed it, it passed )</p>\n</blockquote>\n"}], "owner": {"reputation": 762, "user_id": 9559884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/joDJA.png?s=128&g=1", "display_name": "StyleZ", "link": "https://stackoverflow.com/users/9559884/stylez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5879, "favorite_count": 1, "accepted_answer_id": 50509458, "answer_count": 2, "score": 3, "last_activity_date": 1608065899, "creation_date": 1527117939, "last_edit_date": 1527145751, "question_id": 50498809, "link": "https://stackoverflow.com/questions/50498809/selenium-webdriver-get-method-doesnt-always-work", "title": "Selenium webdriver.get() method doesnt always work", "body": "<pre><code>link = \"https://www.google.com\"\nchrome_options = webdriver.ChromeOptions()\nchrome_options.add_argument('--proxy-server=%s' % str(xxx))\nchrome = webdriver.Chrome(chrome_options=chrome_options)\ntime.sleep(3)\nchrome.get(link)\nprint(\"po get\")\ntime.sleep(1)\nchrome.get(link)\ntime.sleep(15)\n</code></pre>\n\n<p>Hello, I have a problem with selenium for a long time and I would like to find a way how to fix it\nThe problem is that almost everytime I run a script that's opening selenium / even when I use it like\nfor a test such as :</p>\n\n<pre><code>from selenium import webdriver\nchrome = webdriver.Chrome()\nchrome.get(https://www.google.com)\n</code></pre>\n\n<p>It still sometimes doesn't get the website, I thought it's because of how slow selenium opens but even after its nicely open it doesn't get the value, sadly it just gets stuck on an empty browser that had data in an url window... any idea what should I do to fix it?</p>\n"}, {"tags": ["python", "introspection"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1527117672, "post_id": 50498770, "comment_id": 88010349, "body": "It&#39;s not a <code>getattr</code> thing; <code>a.foo is not a.foo</code> too."}, {"owner": {"reputation": 7320, "user_id": 1175824, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GKjUX.png?s=128&g=1", "display_name": "steffen", "link": "https://stackoverflow.com/users/1175824/steffen"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1527117870, "post_id": 50498770, "comment_id": 88010389, "body": "@user2357112 Why not?"}, {"owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "edited": false, "score": 0, "creation_date": 1527118017, "post_id": 50498770, "comment_id": 88010424, "body": "Yep, <code>a.foo is a.foo</code> is <code>False</code>!"}, {"owner": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "edited": false, "score": 0, "creation_date": 1527118353, "post_id": 50498770, "comment_id": 88010515, "body": "<a href=\"https://stackoverflow.com/questions/41900639/python-unable-to-compare-bound-method-to-itself\" title=\"python unable to compare bound method to itself\">stackoverflow.com/questions/41900639/&hellip;</a>"}, {"owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "reply_to_user": {"reputation": 7154, "user_id": 1470749, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wyXz0.jpg?s=128&g=1", "display_name": "101", "link": "https://stackoverflow.com/users/1470749/101"}, "edited": false, "score": 0, "creation_date": 1527119032, "post_id": 50498770, "comment_id": 88010713, "body": "@101 That link helps but the answer by GManNickG here is better, IMO."}], "answers": [{"comments": [{"owner": {"reputation": 7320, "user_id": 1175824, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GKjUX.png?s=128&g=1", "display_name": "steffen", "link": "https://stackoverflow.com/users/1175824/steffen"}, "edited": false, "score": 0, "creation_date": 1527118358, "post_id": 50498830, "comment_id": 88010516, "body": "So there is one more layer of abstraction. A method is not actually part of a class, but an instance of class <code>method</code>, which in turn knows the function body and the &quot;hosting&quot; class. Correct?"}, {"owner": {"reputation": 7320, "user_id": 1175824, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GKjUX.png?s=128&g=1", "display_name": "steffen", "link": "https://stackoverflow.com/users/1175824/steffen"}, "edited": false, "score": 0, "creation_date": 1527118462, "post_id": 50498830, "comment_id": 88010547, "body": "mmhh... what you call &quot;regular old functions&quot; are instances of class &quot;function&quot;. So again: why the different behaviour?"}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "reply_to_user": {"reputation": 7320, "user_id": 1175824, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GKjUX.png?s=128&g=1", "display_name": "steffen", "link": "https://stackoverflow.com/users/1175824/steffen"}, "edited": false, "score": 2, "creation_date": 1527118603, "post_id": 50498830, "comment_id": 88010585, "body": "Yes, <code>A.foo</code> is a function just like any non-class function is (compare the types, for example). The difference in behavior is that <code>a.foo</code> represents, abstractly, &quot;the function <code>A.foo</code> called with <code>a</code>, as they each were at the time this was invoked&quot;. In order to actually make this call later, you must store the value of both of them for later as well, and <code>method</code> is this storage. Simply referring to <code>A.foo</code> requires no additional storage, as you already have the reference to the sole value in question, so regular Python reference semantics suffice."}, {"owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "edited": false, "score": 0, "creation_date": 1527118829, "post_id": 50498830, "comment_id": 88010658, "body": "Thank you @GManNickG for a very good answer! Just to add/confirm - see <code>new.instancemethod</code> in <a href=\"https://docs.python.org/2/library/new.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/new.html</a>"}, {"owner": {"reputation": 7320, "user_id": 1175824, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GKjUX.png?s=128&g=1", "display_name": "steffen", "link": "https://stackoverflow.com/users/1175824/steffen"}, "edited": false, "score": 0, "creation_date": 1527119504, "post_id": 50498830, "comment_id": 88010818, "body": "ok, I just played around with <code>setattr</code> and  the class and instances of the class. It is necessary to generate <code>a.foo</code> everytime again, because <code>A.foo</code> might have changed (or <code>other_instance_of_A.foo</code> for that matter) and I want to keep <code>a.foo</code> as it was when creating <code>a</code>.  Please add that just for completeness."}], "tags": [], "owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "is_accepted": true, "score": 3, "last_activity_date": 1527119900, "last_edit_date": 1527119900, "creation_date": 1527118120, "answer_id": 50498830, "question_id": 50498770, "link": "https://stackoverflow.com/questions/50498770/why-does-instance-of-object-foo-is-instance-of-object-foo-evaluate-false/50498830#50498830", "title": "Why does `instance_of_object.foo is instance_of_object.foo` evaluate False?", "body": "<p>At least in CPython, bound methods are implemented as an instance of a class <code>method</code>. Every time you ask for the value of a bound function, you get a <em>new</em> instance of this class.</p>\n\n<pre><code>x = a.foo\ny = a.foo\n\nassert x is not y\nid(x)  # E.g. 139664144271304\nid(y)  # E.g. 139664144033992\ntype(x)  # &lt;class 'method'&gt;\ntype(y)  # &lt;class 'method'&gt;\n</code></pre>\n\n<p>All this class does is store a reference to the instance and the <em>unbound</em> function, and when you call the class it calls the unbound function with the stored instance (along with your other arguments).</p>\n\n<p>Unbound functions, like <code>A.foo</code>, are just regular old functions - no new instances of proxy classes are being constructed, so identity works as you expect.</p>\n\n<p>The reason for this difference is that the semantic meaning of <code>a.foo</code> depends on <strong>two</strong> things, the value of <code>a</code> and the value of <code>A.foo</code>. In order to be able to get this meaning at any point in time later, both of these values need to be stored. This is what the <code>method</code> class does.</p>\n\n<p>Conversely, the meaning of <code>A.foo</code> depends only on a single value: <code>A.foo</code>. So no additional work is required to store anything, and the value itself is used.</p>\n\n<p>You might consider the idea of pre-allocating bound method instances, so that <code>a.foo</code> always returns the same immutable object - but given the dynamic nature of Python, it is simpler and cheaper to just construct a new one each time, even if they could be the same.</p>\n"}, {"comments": [{"owner": {"reputation": 7320, "user_id": 1175824, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GKjUX.png?s=128&g=1", "display_name": "steffen", "link": "https://stackoverflow.com/users/1175824/steffen"}, "edited": false, "score": 0, "creation_date": 1527118501, "post_id": 50498855, "comment_id": 88010560, "body": "thanks, that makes it a little clearer."}], "tags": [], "owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "is_accepted": false, "score": 3, "last_activity_date": 1527118298, "creation_date": 1527118298, "answer_id": 50498855, "question_id": 50498770, "link": "https://stackoverflow.com/questions/50498770/why-does-instance-of-object-foo-is-instance-of-object-foo-evaluate-false/50498855#50498855", "title": "Why does `instance_of_object.foo is instance_of_object.foo` evaluate False?", "body": "<p>To add to <a href=\"https://stackoverflow.com/a/50498830/8033585\">@GManNickG</a> answer:</p>\n\n<pre><code>getattr(a, 'foo').__func__ is a.foo.__func__ \n</code></pre>\n\n<p>will return <code>True</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 7320, "user_id": 1175824, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GKjUX.png?s=128&g=1", "display_name": "steffen", "link": "https://stackoverflow.com/users/1175824/steffen"}, "edited": false, "score": 0, "creation_date": 1527121074, "post_id": 50498979, "comment_id": 88011120, "body": "Found this in your link which explains the exact case <a href=\"https://docs.python.org/3/howto/descriptor.html#functions-and-methods\" rel=\"nofollow noreferrer\">docs.python.org/3/howto/descriptor.html#functions-and-method&zwnj;&#8203;s</a>"}], "tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": false, "score": 2, "last_activity_date": 1527119200, "creation_date": 1527119200, "answer_id": 50498979, "question_id": 50498770, "link": "https://stackoverflow.com/questions/50498770/why-does-instance-of-object-foo-is-instance-of-object-foo-evaluate-false/50498979#50498979", "title": "Why does `instance_of_object.foo is instance_of_object.foo` evaluate False?", "body": "<p>Some objects stored in classes are <a href=\"https://docs.python.org/3/howto/descriptor.html\" rel=\"nofollow noreferrer\">descriptors</a>, which don't follow normal rules for object lookups. The <code>foo</code> method you're dealing with in your example is one (function objects are descriptors).</p>\n\n<p>A descriptor is an instance of a class that defines a <code>__get__</code> (and optionally <code>__set__</code> and <code>__delete__</code>) method(s). Those methods control what happens when you look up the desciptor on an instance of the class it's stored in.</p>\n\n<p>I think an example will make this more clear:</p>\n\n<pre><code>class DescriptorClass:\n    def __get__(*args):\n        print(\"__get__ was called\")\n        return \"whatever\"\n\nclass OtherClass:\n    descriptor_instance = DescriptorClass() # the descriptor instance is a class variable\n\nother_instance = OtherClass()\n\n# this calls the descriptor's __get__ method, which prints \"__get__ was called\"\nresult = other_instance.descriptor_instance\n\nprint(result) # will print \"whatever\", since that's what the __get__ method returned\n</code></pre>\n\n<p>A <code>__get__</code> method doesn't need to return the same thing every time it's called. In fact, it usually won't. In the specific case of functions being used as descriptors (i.e. methods), a new \"bound method\" object will be created each time you look the function up. Thus the <code>is</code> operator will not see multiple bound methods as the same object, even though they may be binding the same function to the same instance.</p>\n"}], "owner": {"reputation": 7320, "user_id": 1175824, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/GKjUX.png?s=128&g=1", "display_name": "steffen", "link": "https://stackoverflow.com/users/1175824/steffen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "closed_date": 1527122702, "accepted_answer_id": 50498830, "answer_count": 3, "score": 5, "last_activity_date": 1527119900, "creation_date": 1527117587, "last_edit_date": 1527118144, "question_id": 50498770, "link": "https://stackoverflow.com/questions/50498770/why-does-instance-of-object-foo-is-instance-of-object-foo-evaluate-false", "closed_reason": "Duplicate", "title": "Why does `instance_of_object.foo is instance_of_object.foo` evaluate False?", "body": "<p>If I have a </p>\n\n<pre><code>class A:\n  def foo(self):\n    pass\n</code></pre>\n\n<p>this evaluates to <code>True</code>:</p>\n\n<pre><code>getattr(A, 'foo') is A.foo\n</code></pre>\n\n<p>but this evaluates to <code>False</code>:</p>\n\n<pre><code>a = A()\ngetattr(a, 'foo') is a.foo\n</code></pre>\n\n<p>as does</p>\n\n<pre><code>a.foo is a.foo\n</code></pre>\n\n<p>Why?</p>\n\n<p>I found that <code>getattr(a, 'foo')</code> and <code>a.foo</code> both are represented by </p>\n\n<pre><code>&lt;bound method A.foo of &lt;__main__.A object at 0x7a2c4de10d50&gt;&gt;)\n</code></pre>\n\n<p>So no hint there....</p>\n"}, {"tags": ["python", "tensorflow", "deep-learning"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9837430, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mwyBTWq07sk/AAAAAAAAAAI/AAAAAAAADao/T1xWbEEalZA/photo.jpg?sz=128", "display_name": "Lucas Pedro", "link": "https://stackoverflow.com/users/9837430/lucas-pedro"}, "edited": false, "score": 0, "creation_date": 1527118784, "post_id": 50498807, "comment_id": 88010648, "body": "I ended up misplacing the data here. Where .0 and .1 is 0.1 and 0.2"}, {"owner": {"reputation": 3798, "user_id": 3098092, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/12c6b0fa6ec2efc5e87e54df4e8c78ae?s=128&d=identicon&r=PG&f=1", "display_name": "DomJack", "link": "https://stackoverflow.com/users/3098092/domjack"}, "reply_to_user": {"reputation": 11, "user_id": 9837430, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mwyBTWq07sk/AAAAAAAAAAI/AAAAAAAADao/T1xWbEEalZA/photo.jpg?sz=128", "display_name": "Lucas Pedro", "link": "https://stackoverflow.com/users/9837430/lucas-pedro"}, "edited": false, "score": 0, "creation_date": 1527204123, "post_id": 50498807, "comment_id": 88051458, "body": "That makes no difference - the shapes are still inconsistent."}], "tags": [], "owner": {"reputation": 3798, "user_id": 3098092, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/12c6b0fa6ec2efc5e87e54df4e8c78ae?s=128&d=identicon&r=PG&f=1", "display_name": "DomJack", "link": "https://stackoverflow.com/users/3098092/domjack"}, "is_accepted": false, "score": 1, "last_activity_date": 1527204092, "last_edit_date": 1527204092, "creation_date": 1527117917, "answer_id": 50498807, "question_id": 50498755, "link": "https://stackoverflow.com/questions/50498755/tensorflow-error-cannot-feed-value-of-shape-4-1-for-tensor-input0-which/50498807#50498807", "title": "Tensorflow error &#39;&#39;Cannot feed value of shape (4, 1) for Tensor &#39;input:0&#39;, which has shape &#39;(?, 2)&#39;&#39;&#39;", "body": "<p>The shape of the data you feed to your placeholders is inconsistent with the shape of the placeholders.</p>\n\n<pre><code>inputs = tf.placeholder('float', [None, 2], name='input')\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>inp = [[0.1], [0.2], [1.0],[1.1]]\n</code></pre>\n\n<p>Either change your <code>inputs</code> shape to be <code>[None, 1]</code> or add a second value for each entry of <code>inp</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 9837430, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mwyBTWq07sk/AAAAAAAAAAI/AAAAAAAADao/T1xWbEEalZA/photo.jpg?sz=128", "display_name": "Lucas Pedro", "link": "https://stackoverflow.com/users/9837430/lucas-pedro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527204092, "creation_date": 1527117485, "last_edit_date": 1527118553, "question_id": 50498755, "link": "https://stackoverflow.com/questions/50498755/tensorflow-error-cannot-feed-value-of-shape-4-1-for-tensor-input0-which", "title": "Tensorflow error &#39;&#39;Cannot feed value of shape (4, 1) for Tensor &#39;input:0&#39;, which has shape &#39;(?, 2)&#39;&#39;&#39;", "body": "<p>I'm having the following error with this code: </p>\n\n<p>File \"C:/Users/lourd/Desktop/Arquivos/PROGRAMA\u00c7\u00c2O/treino/IA\", line 56, in module\n    error, _ =sess.run([cost,optimizer],feed_dict={inputs: inp,targets:out})</p>\n\n<p>File \"C:\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 900, in run\n    run_metadata_ptr)</p>\n\n<p>File \"C:\\Python\\Python36\\lib\\site-packages\\tensorflow\\python\\client\\session.py\", line 1111, in _run\n    str(subfeed_t.get_shape())))</p>\n\n<p>ValueError: Cannot feed value of shape (4, 1) for Tensor 'input:0', which has shape '(?, 2)'</p>\n\n<p>My code:</p>\n\n<pre><code> import tensorflow as tf\n\n# Espa\u00e7os reservados\n\ninputs = tf.placeholder('float', [None, 2], name='input')\ntargets = tf.placeholder('float', name='Target')\n\n# Variaveis\n\nweight1 = tf.Variable(tf.random_normal(shape= [2, 3], stddev=0.02, name='Weight1'))\nbiases1 = tf.Variable(tf.random_normal(shape= [3], stddev=0.02), name='Biases1')\n\n# Multiplicador\n\nhlayer = tf.matmul(inputs, weight1)\nhlayer += biases1\n\n# Fun\u00e7\u00e3o de ativa\u00e7\u00e3o\n\nhlayer = tf.sigmoid(hlayer, name='hAtivador')\n\n# Camada oculta crie camadas de saida e conclua a rede\n\nweight2 = tf.Variable(tf.random_normal(shape=[3, 1], stddev=0.02), name='Weight2')\nbiases2 = tf.Variable(tf.random_normal(shape=[1], stddev=0.02), name='Biases2')\n\n# Camada de saida\n\noutput = tf.matmul(hlayer, weight2)\noutput += biases2\noutput = tf.sigmoid(output, name='outActivation')\n\n# Optimiza\u00e7\u00e3o para treinar\n\ncost = tf.squared_difference(targets, output)\ncost = tf.reduce_mean(cost)\noptimizer = tf.train.AdamOptimizer().minimize(cost)\n\n# sessao TensotFlow\n\nimport numpy as np\n\ninp = [[0.1], [0.2], [1.0],[1.1]]\nout = [[0], [1], [1], [0]]\n\ninp = np.array(inp)\nout = np.array(out)\n\n# Come\u00e7ar a sess\u00e3o\n\nepochs = 4000\n\nwith tf.Session() as sess:\n    tf.global_variables_initializer().run()\n    for i in range(epochs):\n        error, _ =sess.run([cost,optimizer],feed_dict={inputs: inp,targets:out})\n        print(i,error)\n\n# Teste\n\nwith tf.Session() as sess:\n    tf.global_variables_initializer().run()\n    for i in range(epochs):\n        error, _ = sess.run([cost, optimizer], feed_dict={inputs: inp, targets: out})\n        print(i, error)\n    while True:\n        a = input('Primeira entrada: ')\n        b = input('Segunda entrada: ')\n        inp = [[a, b]]\n        inp = np.array(inp)\n        prediction = sess.run([output], feed_dict={inputs: inp})\n        print(prediction)\n</code></pre>\n"}, {"tags": ["python", "django", "grid"], "comments": [{"owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 0, "creation_date": 1527117454, "post_id": 50498744, "comment_id": 88010295, "body": "you want a stop the loop exactly at three photos?"}, {"owner": {"reputation": 3, "user_id": 7295563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zuaH.jpg?s=128&g=1", "display_name": "marci", "link": "https://stackoverflow.com/users/7295563/marci"}, "reply_to_user": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 0, "creation_date": 1527117595, "post_id": 50498744, "comment_id": 88010335, "body": "not exactly, after setting the first 3, I would like the following to be created in the next row."}, {"owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 0, "creation_date": 1527118155, "post_id": 50498744, "comment_id": 88010456, "body": "basically you need to set 3 by row, and so one"}, {"owner": {"reputation": 3, "user_id": 7295563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zuaH.jpg?s=128&g=1", "display_name": "marci", "link": "https://stackoverflow.com/users/7295563/marci"}, "reply_to_user": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 0, "creation_date": 1527118281, "post_id": 50498744, "comment_id": 88010493, "body": "as you can see in the code I create a new card object for each photo and all of them form in one row. Maybe you could show me in example how to achieve that ?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7295563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zuaH.jpg?s=128&g=1", "display_name": "marci", "link": "https://stackoverflow.com/users/7295563/marci"}, "edited": false, "score": 0, "creation_date": 1527185024, "post_id": 50498897, "comment_id": 88043582, "body": "I think it is working when I am using:  <code>{% block body_block %}      {% for thumbnail in thumb %}         {% thumbnail thumbnail.image &quot;150x150&quot; crop=&#39;center&#39; as img %}             {% if forloop.counter0|divisibleby:2 %}                 &lt;div class=&quot;row&quot;&gt;&lt;&#47;div&gt;             {% endif %}             &lt;img src=&quot;{{ img.url }}&quot;&gt;             {#            &lt;img src=&quot;{{ img.url }}&quot;&gt;#}         {% endthumbnail %}     {% endfor %} {% endblock %}</code>  without any bootstrap code.. but by adding the code which I placed in the main thread, everything goes apart.. Any ideas ?"}, {"owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "reply_to_user": {"reputation": 3, "user_id": 7295563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zuaH.jpg?s=128&g=1", "display_name": "marci", "link": "https://stackoverflow.com/users/7295563/marci"}, "edited": false, "score": 0, "creation_date": 1527185845, "post_id": 50498897, "comment_id": 88044008, "body": "why starting from zero <code>forloop.counter0</code>? break line will be after [0,2,4,6,8....]"}, {"owner": {"reputation": 3, "user_id": 7295563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zuaH.jpg?s=128&g=1", "display_name": "marci", "link": "https://stackoverflow.com/users/7295563/marci"}, "edited": false, "score": 0, "creation_date": 1527186383, "post_id": 50498897, "comment_id": 88044283, "body": "it does not achieve the intended goal after all.. I am not sure if we understand each other well. I need all images from the database to be displayed 3 times per row. So in the case of 15 photos 5 rows of 3 photos (3 columns) should be displayed one next to the other in the generated card"}, {"owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "reply_to_user": {"reputation": 3, "user_id": 7295563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zuaH.jpg?s=128&g=1", "display_name": "marci", "link": "https://stackoverflow.com/users/7295563/marci"}, "edited": false, "score": 0, "creation_date": 1527187235, "post_id": 50498897, "comment_id": 88044684, "body": "<i>With bootstrap</i> it&#39;s easy to do, <i>without it</i> what you need to do is inside the loop you add the image followed a <code>if else statement</code> whether the iteration is divisible by 3 like my above answer, you add a <b>CSS trick</b> or a <b>block HTML tag</b> to create a new row..."}, {"owner": {"reputation": 3, "user_id": 7295563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zuaH.jpg?s=128&g=1", "display_name": "marci", "link": "https://stackoverflow.com/users/7295563/marci"}, "edited": false, "score": 0, "creation_date": 1527190147, "post_id": 50498897, "comment_id": 88046132, "body": "U mentioned that with bootstrap it&#39;s easy. So why if I am using it like in main topic above, it doesn&#39;t work ? Do you see any mistakes I made ? or maybe you have any example ?"}, {"owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "reply_to_user": {"reputation": 3, "user_id": 7295563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zuaH.jpg?s=128&g=1", "display_name": "marci", "link": "https://stackoverflow.com/users/7295563/marci"}, "edited": false, "score": 0, "creation_date": 1527190844, "post_id": 50498897, "comment_id": 88046495, "body": "<code>{% for loop %} &lt;div class=&quot;col-md-4&quot;&gt;  img &lt;&#47;div&gt; {% endfor %}</code> the grid of boostrap is a grid of 12 columns, with 3 <code>4-columns</code>, bootstrap will break the row after 3 img"}, {"owner": {"reputation": 3, "user_id": 7295563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zuaH.jpg?s=128&g=1", "display_name": "marci", "link": "https://stackoverflow.com/users/7295563/marci"}, "edited": false, "score": 0, "creation_date": 1527193041, "post_id": 50498897, "comment_id": 88047571, "body": "You had completely right. The problem was with &quot;Material Design for Bootstrap 4&quot; which I had used. I am not sure what generate the problem, but if I found it, I will definitely post the answer here ! Thanks you soo much"}], "tags": [], "owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "is_accepted": true, "score": 1, "last_activity_date": 1527118611, "creation_date": 1527118611, "answer_id": 50498897, "question_id": 50498744, "link": "https://stackoverflow.com/questions/50498744/django-display-limited-images-in-grid-row/50498897#50498897", "title": "Django display limited images in grid row", "body": "<p>The build-in Django filter <code>divisibleby</code> may work, inside your loop, you check whether the iteration is divisible by (in your case) <code>3</code>, then you break the row to jump to another one:</p>\n\n<pre><code>{% for i in thumb %}\n    {% if forloop.counter|divisibleby:3 %}\n         ----------\n    {% endif %}\n{% endfor %}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7295563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zuaH.jpg?s=128&g=1", "display_name": "marci", "link": "https://stackoverflow.com/users/7295563/marci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1159, "favorite_count": 1, "accepted_answer_id": 50498897, "answer_count": 1, "score": 0, "last_activity_date": 1527118611, "creation_date": 1527117394, "question_id": 50498744, "link": "https://stackoverflow.com/questions/50498744/django-display-limited-images-in-grid-row", "title": "Django display limited images in grid row", "body": "<p>As mentioned in the title. <strong>Is it possible to display a specific number of photos in a particular grid-container?</strong> For example, a maximum of 3 columns with a card in the row using a loop?\nI was able to achieve the effect of displaying all the photos from the defined model,<strong><em>but I don't know how to set the limit</em></strong>.</p>\n\n<p>Below I present fragments of the code responsible for displaying the created model </p>\n\n<p><strong>forms.py</strong></p>\n\n<pre><code>class ProductsForm(forms.ModelForm):\nclass Meta:\n    model = Product\n    fields = ('name', 'description', 'image', 'file_type')\n</code></pre>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>class Product(models.Model):\nname = models.CharField(max_length=20, default='')\ndescription = models.CharField(max_length=100, default='')\nfile_type = models.CharField(max_length=256, choices=[('image', 'image'), ('thumbnail', 'thumbnail')], default='')\n\nimage = models.ImageField(upload_to='products', default='')\n\ndef __str__(self):\n    return self.name\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>def gallery(request):\nimage = Product.objects.filter(file_type='image')\nthumbnail = Product.objects.filter(file_type='thumbnail')\nreturn render(request, 'products/fruits.html', {'img': image, 'thumb': thumbnail})\n</code></pre>\n\n<p><strong>fruits.html</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n{% load staticfiles %}\n{% load thumbnail %}\n{% block body_block %}\n\n&lt;div class=\"grid-container\"&gt;\n    &lt;div class=\"card-deck\"&gt;\n\n\n        {% for i in thumb %}\n            {% thumbnail i.image \"150x150\" crop=\"center\" as im %}\n\n                &lt;!-- Card --&gt;\n                &lt;div class=\"card mb-4\"&gt;\n\n                    &lt;!--Card image--&gt;\n                    &lt;div class=\"view overlay\"&gt;\n\n                        &lt;img src=\"{{ im.url }}\"\n                             alt=\"Card image cap\"&gt;\n                        &lt;a href=\"#!\"&gt;\n                            &lt;div class=\"mask rgba-white-slight\"&gt;&lt;/div&gt;\n                        &lt;/a&gt;\n                    &lt;/div&gt;\n\n                    &lt;!--Card content--&gt;\n                    &lt;div class=\"card-body\"&gt;\n\n                        &lt;!--Title--&gt;\n                        &lt;h4 class=\"card-title\"&gt;Card title&lt;/h4&gt;\n                        &lt;!--Text--&gt;\n                        &lt;p class=\"card-text\"&gt;Some quick example text to build on the card title and make up\n                            the\n                            bulk\n                            of\n                            the\n                            card's\n                            content.&lt;/p&gt;\n                        &lt;!-- Provides extra visual weight and identifies the primary action in a set of buttons --&gt;\n                        &lt;button type=\"button\" class=\"btn btn-light-blue btn-md\"&gt;Read more&lt;/button&gt;\n\n                    &lt;/div&gt;\n\n                &lt;/div&gt;\n\n            {% endthumbnail %}\n        {% endfor %}\n    &lt;/div&gt;\n\n&lt;/div&gt;\n{% endblock %}\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-decorators"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 3, "creation_date": 1527117467, "post_id": 50498727, "comment_id": 88010302, "body": "A decorator has to return a callable (like a function)."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1527117789, "post_id": 50498727, "comment_id": 88010376, "body": "It is totally unclear to me what you expect this code to do. Without a clear statement of your intent, it is impossible to say what &quot;mistake&quot; you are making. You could, for example, be intending to create some code that throws an error. I don&#39;t know."}, {"owner": {"reputation": 3, "user_id": 9837462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8e77213ffab1f75434b9571959da64?s=128&d=identicon&r=PG&f=1", "display_name": "deadman", "link": "https://stackoverflow.com/users/9837462/deadman"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1527118395, "post_id": 50498727, "comment_id": 88010524, "body": "@juanpa.arrivillaga basically what im trying to do is calculate the time difference in running function f3 and f4 So i want fn f1 to note the time before and after running fn f3 and f4 and give me the difference in time. In this example, how do i call a fn using a decorator and which in turns calls another function using a decorator. I hope i&#39;m making sense, apologies for the confusion."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1527118600, "post_id": 50498727, "comment_id": 88010583, "body": "This doesn&#39;t make very much sense. Decorators <i>return functions</i>, they aren&#39;t used to call them. It sounds like you just want normal functions. Note, all your decorators return <code>None</code>."}, {"owner": {"reputation": 3, "user_id": 9837462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8e77213ffab1f75434b9571959da64?s=128&d=identicon&r=PG&f=1", "display_name": "deadman", "link": "https://stackoverflow.com/users/9837462/deadman"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1527118995, "post_id": 50498727, "comment_id": 88010706, "body": "@juanpa.arrivillaga basically i was looking for making a chain of decorators (parsing one decorator into another) I looked at couple of examples but didn&#39;t understood much about it."}, {"owner": {"reputation": 969, "user_id": 8944057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sUIkS.png?s=128&g=1", "display_name": "eugenhu", "link": "https://stackoverflow.com/users/8944057/eugenhu"}, "edited": false, "score": 0, "creation_date": 1527119222, "post_id": 50498727, "comment_id": 88010751, "body": "<code>@f1 def f3(f2): ...</code> is more or less equivalent to <code>def f3(f2): ... ; f3=f1(f3)</code>, try making your code work with the latter syntax to help you figure out what <code>f1</code> needs to be doing."}, {"owner": {"reputation": 3, "user_id": 9837462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8e77213ffab1f75434b9571959da64?s=128&d=identicon&r=PG&f=1", "display_name": "deadman", "link": "https://stackoverflow.com/users/9837462/deadman"}, "edited": false, "score": 0, "creation_date": 1527119299, "post_id": 50498727, "comment_id": 88010771, "body": "i have edited the post of what im trying to achieve but without trying to parse any argument"}], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 0, "last_activity_date": 1527122279, "creation_date": 1527122279, "answer_id": 50499296, "question_id": 50498727, "link": "https://stackoverflow.com/questions/50498727/issue-creating-decorator-in-python3/50499296#50499296", "title": "Issue creating decorator in Python3", "body": "<p>While you can wrap and function in another <em>single</em> function that does not return any callable object, bear in mind that the wrapped function is no longer callable. Thus, when timing objects that do not require reusability of the original object, then your current code works:</p>\n\n<pre><code>import time\ndef timeit(f):\n  c = time.time()\n  _ = f()\n  c2 = time.time()\n  print(f\"'{f.__name__}' took {c2-c}s\")\n\n@timeit\ndef f2():\n  return sum(range(1000))\n</code></pre>\n\n<p>Output (without calling <code>f2</code>):</p>\n\n<pre><code>'f2' took 8.988380432128906e-05s\n</code></pre>\n\n<p>However, if attempting to call <code>f2</code>:</p>\n\n<pre><code>_ = f2()\n</code></pre>\n\n<blockquote>\n  <p>Traceback (most recent call last):\n    File \"\", line 1, in \n  TypeError: 'NoneType' object is not callable</p>\n</blockquote>\n\n<p>To prevent the above error, create a wrapper function inside the decorating function:</p>\n\n<pre><code>def timeit(f):\n def wrapper(*args, **kwargs):\n    c = time.time()\n    _result = f(*args, **kwargs)\n    c2 = time.time()\n    print(f\"'{f.__name__}' took {c2-c}s\")\n    return _result\n return wrapper\n\n@timeit\ndef f2():\n  return sum(range(1000))\n</code></pre>\n\n<p><code>f2</code> will not be timed until it is called, triggering <code>wrapper</code>:</p>\n\n<pre><code>print(f2())\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>'f2' took 3.981590270996094e-05s\n499500\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9837462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8e77213ffab1f75434b9571959da64?s=128&d=identicon&r=PG&f=1", "display_name": "deadman", "link": "https://stackoverflow.com/users/9837462/deadman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 50499296, "answer_count": 1, "score": 0, "last_activity_date": 1527122279, "creation_date": 1527117220, "last_edit_date": 1592644375, "question_id": 50498727, "link": "https://stackoverflow.com/questions/50498727/issue-creating-decorator-in-python3", "title": "Issue creating decorator in Python3", "body": "<p>Can anyone let me know what mistake i'm making.</p>\n<h1>Decorator</h1>\n<pre><code>import time\n\ndef f1(f):\n\n    a = time.time()\n    f()\n    b = time.time()\n    c = b-a\n    print(&quot;time required is&quot;, c)\n@f1\n\ndef f3(f2):\n    \n    n = []\n    for i in range(1000):\n        n.append(i)\n    print(sum(n), &quot;for F3&quot;)\n    f2()\n\n@f3\n\ndef f4():\n\n    n = []\n    for i in range(1000):\n       n.append(i)\n    print(sum(n), &quot;for F4&quot;)\n\nf4\n</code></pre>\n<p>o/p:</p>\n<p>Traceback (most recent call last):</p>\n<pre><code>File &quot;C:/test.py&quot;, line 13, in &lt;module&gt;\n\n@f1\n\nFile &quot;C:/test.py&quot;, line 7, in f1\n\nf()\n\nTypeError: f3() missing 1 required positional argument: 'f2'\n\nProcess finished with exit code 1\n</code></pre>\n<p>looking to achieve something like this:</p>\n<p>def decorator_with_args(decorator_to_enhance):</p>\n<pre><code>def decorator_maker(*args, **kwargs):\n\n    def decorator_wrapper(func):\n\n        return decorator_to_enhance(func, *args, **kwargs)\n\n    return decorator_wrapper\n\nreturn decorator_maker\n</code></pre>\n<p>@decorator_with_args</p>\n<p>def decorated_decorator(func, *args, **kwargs):</p>\n<pre><code>def wrapper(function_arg1, function_arg2):\n\n    print(&quot;Decorated with {0} {1}&quot;.format(args, kwargs))\n\n    return func(function_arg1, function_arg2)\n\nreturn wrapper\n</code></pre>\n<p>@decorated_decorator(42, 404, 1024)</p>\n<p>def decorated_function(function_arg1, function_arg2):</p>\n<pre><code>print(&quot;Hello {0} {1}&quot;.format(function_arg1, function_arg2))\n</code></pre>\n<p>decorated_function(&quot;Universe and&quot;, &quot;everything&quot;)</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 7, "creation_date": 1527117312, "post_id": 50498726, "comment_id": 88010260, "body": "Let&#39;s get this straight: this is NOT how you should be writing code in python."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527117570, "post_id": 50498726, "comment_id": 88010325, "body": "The second argument to <code>reduce</code> is an element from the list <code>reversed(range(len(s) - 1))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1322, "user_id": 3225832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/645598558/picture?type=large", "display_name": "Reid Ballard", "link": "https://stackoverflow.com/users/3225832/reid-ballard"}, "is_accepted": false, "score": 1, "last_activity_date": 1527188311, "creation_date": 1527188311, "answer_id": 50516392, "question_id": 50498726, "link": "https://stackoverflow.com/questions/50498726/how-does-this-roman-to-number-function-work-reduce-lambda/50516392#50516392", "title": "How does this Roman to Number function work? (reduce, lambda)", "body": "<p><a href=\"https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions\" rel=\"nofollow noreferrer\"><code>lambda</code></a> is - in simplified terms- a simple, anonymous function. You can break it up just like a function based on the colon:</p>\n\n<pre><code>f = lambda x,*args,k = 5, **kw: print(x,args,k,kw)\n\ndef f (x, *args, k = 5, **kw): return print(x,args,k,kw)\n</code></pre>\n\n<p>The string <code>s</code> and the dictionary <code>T</code> are available in a <a href=\"https://docs.python.org/3.6/reference/executionmodel.html#resolution-of-names\" rel=\"nofollow noreferrer\">scope</a> higher than the <code>lambda</code> and neither is assigned within the <code>lambda</code> statement, so the <code>lambda</code> has access to both.</p>\n\n<p><a href=\"https://docs.python.org/3/library/functools.html#functools.reduce\" rel=\"nofollow noreferrer\"><code>functools.reduce</code></a> is a function that basically maps another callable across an iterable. As you can see in the docs, <code>reduce</code> applies the current result as the first argument to the given callable, and the current item as the second argument. A third argument can be supplied to reduce, which is the starting value; if not supplied, the first element in iterable will be used instead.</p>\n\n<pre><code>## This is just an example, obviously...\nimport functools, operator\nfunctools.reduce(operator.add,range(4))\n## Step 0: No default, so first element of range is used as the current value: 0\n## Step 1: add(0,next(range)) =&gt; add(0,1) =&gt; 1\n## Step 2: add(1,next(range)) =&gt; add(1,2) =&gt; 3\n## Step 3: add(3,next(range)) =&gt; add(3,3) =&gt; 6\n## Step 4: No more items in range, so return current value: 6\n</code></pre>\n\n<p>So, as you can see, the current element of <code>range</code> (the iterable passed to <code>reduce</code>) is passed at each Step as the second argument (<code>i</code>) to the function passed to <code>reduce</code> (<code>lambda</code>). The <code>lambda</code> function then uses the second argument (<code>i</code>) to index string <code>s</code></p>\n"}], "owner": {"reputation": 1255, "user_id": 5431568, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2aa8d0ebf28cace58d0fcba0c16273e3?s=128&d=identicon&r=PG&f=1", "display_name": "Char", "link": "https://stackoverflow.com/users/5431568/char"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527188311, "creation_date": 1527117213, "last_edit_date": 1527117846, "question_id": 50498726, "link": "https://stackoverflow.com/questions/50498726/how-does-this-roman-to-number-function-work-reduce-lambda", "title": "How does this Roman to Number function work? (reduce, lambda)", "body": "<p>This function converts string roman numerals into integers by iterating from the right and adding to the symbol on the left unless it is greater, then it subtracts. What I don't understand is how <code>i</code> gets assigned to a index in the string. How does it bind to the iterator from <code>range</code> when it reduces?</p>\n\n<pre><code>import functools\n\ndef roman_to_integer(s):\n    T = {'I': 1, 'V': 5, 'X': 10, 'L': 50, 'C': 100, 'D': 500, 'M': 1000}\n    return functools.reduce(lambda val, i: val + (-T[s[i]] if T[s[i]] &lt; T[s[i + 1]] else T[s[i]]), reversed(range(len(s) - 1)), T[s[-1]])\n</code></pre>\n\n<p>I know this is very un-Pythonic. I found this example in a book on interview questions in Python and want to understand why this works. </p>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "pycharm", "winscp"], "comments": [{"owner": {"reputation": 10924, "user_id": 731314, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/CTfHP.jpg?s=128&g=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/731314/gary"}, "edited": false, "score": 0, "creation_date": 1527117458, "post_id": 50498721, "comment_id": 88010297, "body": "WinSCP has a CLI, so it&#39;d be pretty easy to script the transfer."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4234603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d85309ecd9ef277ca2306b053cd793a?s=128&d=identicon&r=PG&f=1", "display_name": "mblackplum", "link": "https://stackoverflow.com/users/4234603/mblackplum"}, "edited": false, "score": 0, "creation_date": 1527207701, "post_id": 50502463, "comment_id": 88052188, "body": "Hello kvamesh,I couldn&#39;t find the Source synchronizer in the Browse repositories section."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5777975"}, "reply_to_user": {"reputation": 15, "user_id": 4234603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d85309ecd9ef277ca2306b053cd793a?s=128&d=identicon&r=PG&f=1", "display_name": "mblackplum", "link": "https://stackoverflow.com/users/4234603/mblackplum"}, "edited": false, "score": 0, "creation_date": 1527208001, "post_id": 50502463, "comment_id": 88052257, "body": "@mblackplum: Added a screenshot now. Could you please check and confirm again"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5777975"}, "reply_to_user": {"reputation": 15, "user_id": 4234603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d85309ecd9ef277ca2306b053cd793a?s=128&d=identicon&r=PG&f=1", "display_name": "mblackplum", "link": "https://stackoverflow.com/users/4234603/mblackplum"}, "edited": false, "score": 0, "creation_date": 1527209248, "post_id": 50502463, "comment_id": 88052527, "body": "@mblackplum: Did you got this ?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5777975"}, "is_accepted": false, "score": 3, "last_activity_date": 1527207962, "last_edit_date": 1527207962, "creation_date": 1527143521, "answer_id": 50502463, "question_id": 50498721, "link": "https://stackoverflow.com/questions/50498721/connecting-pycharm-to-winscp/50502463#50502463", "title": "Connecting PyCharm to WinSCP", "body": "<p>From pycharm,</p>\n\n<p>GoTo <code>File</code> -> <code>Settings</code></p>\n\n<p>You will get a pop-up window of settings. Select the <code>plugins</code> then click on <code>Browse repositories</code> at the bottom.</p>\n\n<p>Then you will get the pop-up window of <code>Browse repositories</code>, search for <code>Source synchronizer</code>. Then click on <code>Install</code> to install that plugin for <code>scp</code>, <code>ftp</code> ...</p>\n\n<p><strong>Restart</strong> the pycharm</p>\n\n<p>Now you can make use of it to do <code>scp</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/C3dQY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C3dQY.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 15, "user_id": 4234603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d85309ecd9ef277ca2306b053cd793a?s=128&d=identicon&r=PG&f=1", "display_name": "mblackplum", "link": "https://stackoverflow.com/users/4234603/mblackplum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1020, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1527207962, "creation_date": 1527117187, "last_edit_date": 1527207600, "question_id": 50498721, "link": "https://stackoverflow.com/questions/50498721/connecting-pycharm-to-winscp", "title": "Connecting PyCharm to WinSCP", "body": "<p>i am using Pycharm to write python code and all the time have to upload the code via WinSCP to the server.</p>\n\n<p>Is there a way to make this process easier?</p>\n"}, {"tags": ["python", "pip", "setuptools"], "comments": [{"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1527166878, "post_id": 50498672, "comment_id": 88032346, "body": "If I remember correctly, <code>pip</code> expects the package name in <code>install_requires</code> to match the egg name and link in <code>dependency_links</code>, so it must be smth like <code>install_requires=[&#39;python-api&#39;]</code> and the dep link <code>github.com&#47;shotgunsoftware&#47;python-api.git@v3.0.36#egg=python&zwnj;&#8203;-api</code>. It will still install package named <code>shotgun-api3</code> because the real name will be taken from the setup script."}, {"owner": {"reputation": 878, "user_id": 4709363, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/42SiZ.jpg?s=128&g=1", "display_name": "Ryan de Kleer", "link": "https://stackoverflow.com/users/4709363/ryan-de-kleer"}, "reply_to_user": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1527178170, "post_id": 50498672, "comment_id": 88040073, "body": "You&#39;re right about the name match, but it looks like <code>shotgun_api3</code> really is the name.  I&#39;d cloned the source and built the egg locally, and it generates <code>shotgun_api3-3.0.36-py2.7.egg</code>, so I&#39;m thinking it must be something else?"}, {"owner": {"reputation": 878, "user_id": 4709363, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/42SiZ.jpg?s=128&g=1", "display_name": "Ryan de Kleer", "link": "https://stackoverflow.com/users/4709363/ryan-de-kleer"}, "reply_to_user": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1527178270, "post_id": 50498672, "comment_id": 88040134, "body": "...again, the verbose output seems to indicate not that it can&#39;t find the package at the URL, but rather that it doesn&#39;t even look in the URL at all."}, {"owner": {"reputation": 2579, "user_id": 3637106, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hYmba.jpg?s=128&g=1", "display_name": "Hampus", "link": "https://stackoverflow.com/users/3637106/hampus"}, "edited": false, "score": 0, "creation_date": 1539161295, "post_id": 50498672, "comment_id": 92397041, "body": "Did you ever find the solution for this? I am having the same issue right now: <a href=\"https://stackoverflow.com/questions/52735269/installing-from-custom-index-setup-py\" title=\"installing from custom index setup py\">stackoverflow.com/questions/52735269/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 1580660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1071af491ecc017c14c7bffe6dd9856?s=128&d=identicon&r=PG", "display_name": "Tomas", "link": "https://stackoverflow.com/users/1580660/tomas"}, "is_accepted": false, "score": 2, "last_activity_date": 1577790870, "creation_date": 1577790870, "answer_id": 59543345, "question_id": 50498672, "link": "https://stackoverflow.com/questions/50498672/setup-py-dependency-links-not-searched-for-install-requires/59543345#59543345", "title": "setup.py dependency_links not searched for install_requires", "body": "<p>As for your setup.py:</p>\n\n<p>In <a href=\"https://pip.pypa.io/en/stable/news/#id146\" rel=\"nofollow noreferrer\"><code>pip</code> 19.0 and later</a>, <code>dependency_links</code> is ignored. Use the PEP 508 syntax to specify the URLs to be used by <code>pip</code>:</p>\n\n<pre><code>setup(\n    install_requires= ['shotgun-api3 @ git+https://github.com/shotgunsoftware/python-api.git@v3.0.36#egg=shotgun_api3']\n    dependency_links = [\n        \"git+https://github.com/shotgunsoftware/python-api.git@v3.0.36#egg=shotgun_api3\"\n    ],\n    # ...\n)\n</code></pre>\n\n<p>I've left your <code>dependency_links</code> in because nested dependencies in <code>pip</code> make use of <code>setuptools</code>, as discussed today in the comments of <a href=\"https://stackoverflow.com/a/54793503/1580660\">another StackOverflow question</a>.</p>\n\n<p>Regarding the installation:</p>\n\n<p>Since I don't have your local packages it's not possible to check if this answer solves your problem. Be sure to remove the <code>--process-dependency-links</code> part when testing it though, because that is no longer supported in the latest <code>pip</code> either.</p>\n\n<p>Alternatively, to install your local package, try <code>pip install -e .</code> instead of manually compiling and specifying everything.</p>\n"}], "owner": {"reputation": 878, "user_id": 4709363, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/42SiZ.jpg?s=128&g=1", "display_name": "Ryan de Kleer", "link": "https://stackoverflow.com/users/4709363/ryan-de-kleer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1182, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1577790870, "creation_date": 1527116748, "last_edit_date": 1527179492, "question_id": 50498672, "link": "https://stackoverflow.com/questions/50498672/setup-py-dependency-links-not-searched-for-install-requires", "title": "setup.py dependency_links not searched for install_requires", "body": "<p>This question has been asked several times around the site, but the answer frequently seems to be an omission of the <code>install_requires</code> arg.<br>\nNot the case here.</p>\n\n<p>I'm trying to build a wheel that can be pip installed in a way that also installs a required package that's <em>not</em> on PyPI.</p>\n\n<p>my <code>setup.py</code> includes: </p>\n\n<pre><code>setup(\n    install_requires= ['shotgun-api3']\n    dependency_links = [\n        \"git+https://github.com/shotgunsoftware/python-api.git@v3.0.36#egg=shotgun_api3\"\n    ],\n    # ...\n)\n</code></pre>\n\n<p>From the commandline I then run <code>python setup.py sdist bdist_wheel</code> to generate the <code>/dist/mypackage-0.1.0-py2-none-any.whl</code>.</p>\n\n<p>Rather than upload my package to an index, I'm trying to install my package from the filesystem; so in a clean virtualenv, I then run:\n<code>pip -v install mypackage --no-index --find-links file:///F:/RyDev/myproject/dist --process-dependency-links</code>.</p>\n\n<p>And I get:</p>\n\n<pre><code>DistributionNotFound: No matching distribution found for shotgun-api3 (from mypackage)\n</code></pre>\n\n<p>and because I used the verbose flag, I see:</p>\n\n<pre><code>Collecting shotgun-api3 (from mypackage)\n  0 location(s) to search for versions of shotgun-api3:\n  Skipping link file:///F:/RyDev/mypackage/dist/mypackage-4.0.0-py2-none-any.whl; wrong project name (not shotgun-api3)\n  Skipping link file:///F:/RyDev/mypackage/dist/mypackage-4.0.0.tar.gz; wrong project name (not shotgun-api3)\n</code></pre>\n\n<p>It's maybe worth noting:</p>\n\n<ul>\n<li>if I remove the <code>install_requires</code> arg from <code>setup.py</code>, <code>mypackage</code> will pip install without errors...just without the dependency.</li>\n<li>I can run <code>pip install git+https://github.com/shotgunsoftware/python-api.git@v3.0.36#egg=shotgun_api3</code> and it successfully installs the shotgun-api3 package.</li>\n</ul>\n\n<p>...but for the life of me, I can't seem to get <code>shotgun-api3</code> to install <strong><em>as a dependency</em></strong> for <code>mypackage</code>.</p>\n\n<p>It looks to me like <strong><em>the (git) URL I provided to dependency_links isn't being included in the list of locations</em></strong>, so I'm wondering if I'm missing something around that?</p>\n\n<p>Environment:</p>\n\n<ul>\n<li>Python 2.7.13 (cannot upgrade)</li>\n<li>Windows 7 (cannot switch OS)</li>\n<li>pip              10.0.1</li>\n<li>setuptools       39.2.0</li>\n<li>virtualenv       16.0.0</li>\n<li>wheel            0.31.1</li>\n</ul>\n"}, {"tags": ["python", "pandas", "python-xarray", "xarray"], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 7645392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bab980b6ab080ac89c5be15b472ab78?s=128&d=identicon&r=PG&f=1", "display_name": "ferengi", "link": "https://stackoverflow.com/users/7645392/ferengi"}, "edited": false, "score": 0, "creation_date": 1527125634, "post_id": 50499427, "comment_id": 88012013, "body": "Thanks a lot, Joe."}], "tags": [], "owner": {"reputation": 4123, "user_id": 1757464, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/FTcq2.jpg?s=128&g=1", "display_name": "jhamman", "link": "https://stackoverflow.com/users/1757464/jhamman"}, "is_accepted": true, "score": 1, "last_activity_date": 1527136346, "last_edit_date": 1527136346, "creation_date": 1527123554, "answer_id": 50499427, "question_id": 50498645, "link": "https://stackoverflow.com/questions/50498645/how-can-i-find-the-maximum-across-all-variables-corrresponding-to-the-max-in-one/50499427#50499427", "title": "How can I find the maximum across all variables corrresponding to the max in one variable?", "body": "<p>For this sort of operation, you probably want to use a custom reduce function:</p>\n\n<pre><code>def my_func(ds, dim=None):\n    return ds.isel(**{dim: ds['q_routed'].argmax(dim)})\n\n\nnew = ncdat.groupby('time.year').apply(my_func, dim='time')\n</code></pre>\n\n<p>Now, <code>argmax</code> doesn't play nice when you have a full array of nans, so you may want to either only apply this function to locations with data or pre-fill the existing nans. Something like this could work:</p>\n\n<pre><code>mask = ncdat['q_routed'].isel(time=0).notnull()  # determine where you have valid data\n\nncdat2 = ncdat.fillna(-9999)  # fill nans with a missing flag of some kind\nnew = ncdat2.groupby('time.year').apply(my_func, dim='time').where(mask)  # do the groupby operation/reduction and reapply the mask\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 7645392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bab980b6ab080ac89c5be15b472ab78?s=128&d=identicon&r=PG&f=1", "display_name": "ferengi", "link": "https://stackoverflow.com/users/7645392/ferengi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 50499427, "answer_count": 1, "score": 2, "last_activity_date": 1527136346, "creation_date": 1527116539, "question_id": 50498645, "link": "https://stackoverflow.com/questions/50498645/how-can-i-find-the-maximum-across-all-variables-corrresponding-to-the-max-in-one", "title": "How can I find the maximum across all variables corrresponding to the max in one variable?", "body": "<p>I have an xarray of daily data with a number of variables. I want to extract the maximum <code>q_routed</code> every year and the corresponding values of other variables on the day that the maximum <code>q_routed</code> happens. </p>\n\n<pre><code>    &lt;xarray.Dataset&gt;\n    Dimensions:    (latitude: 1, longitude: 1, param_set: 1, time: 17167)\n    Coordinates:\n      * time       (time) datetime64[ns] 1970-01-01 ...\n      * latitude   (latitude) float32 44.5118\n      * longitude  (longitude) float32 -111.435\n      * param_set  (param_set) |S1 b''\n    Data variables:\n        ppt        (time, param_set, latitude, longitude) float64 ...\n        pet        (time, param_set, latitude, longitude) float64 ...\n        obsq       (time, param_set, latitude, longitude) float64 ...\n        q_routed   (time, param_set, latitude, longitude) float64 ...\n</code></pre>\n\n<p>The command below gives me the maximum of <strong>every</strong> variable in a year, but that's not what I want. </p>\n\n<pre><code>ncdat['q_routed'].groupby('time.year').max( )\n</code></pre>\n\n<h3>Trial</h3>\n\n<p>I tried this</p>\n\n<pre><code>ncdat.groupby('time.year').argmax('time')\n</code></pre>\n\n<p>which leads to this error:</p>\n\n<pre><code>ValueError: All-NaN slice encountered\n</code></pre>\n\n<p>How can I do this?</p>\n"}, {"tags": ["python", "healpy"], "comments": [{"owner": {"reputation": 2207, "user_id": 4874233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAIXK.jpg?s=128&g=1", "display_name": "Daniel Lenz", "link": "https://stackoverflow.com/users/4874233/daniel-lenz"}, "edited": false, "score": 0, "creation_date": 1527149979, "post_id": 50498612, "comment_id": 88020860, "body": "Can you edit the question to include the code that you&#39;re using?"}, {"owner": {"reputation": 11, "user_id": 6594821, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EbQvGjcOuhs/AAAAAAAAAAI/AAAAAAAAAMk/lxMuW8BCv2Q/photo.jpg?sz=128", "display_name": "Albert Baloyi", "link": "https://stackoverflow.com/users/6594821/albert-baloyi"}, "reply_to_user": {"reputation": 2207, "user_id": 4874233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAIXK.jpg?s=128&g=1", "display_name": "Daniel Lenz", "link": "https://stackoverflow.com/users/4874233/daniel-lenz"}, "edited": false, "score": 0, "creation_date": 1527150885, "post_id": 50498612, "comment_id": 88021326, "body": "<code># load the mask </code>mask = hp.read_map(&#39;mask_nvss_S20-S1000_Ns64.fits&#39;)#.astype(np.bool&zwnj;&#8203;)```  <code># degrade the mask to NSIDE = 16</code> <code>mask16 = np.round(hp.ud_grade(mask, 16))</code>  <code># apply it to the map</code> <code>masked_map = hp.ma(map1)</code>  <code>masked_map.mask = np.logical_not(mask16)</code>  <code># masked map</code> <code>nvss_map = np.round(masked_map)</code>"}, {"owner": {"reputation": 2207, "user_id": 4874233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAIXK.jpg?s=128&g=1", "display_name": "Daniel Lenz", "link": "https://stackoverflow.com/users/4874233/daniel-lenz"}, "edited": false, "score": 0, "creation_date": 1527151138, "post_id": 50498612, "comment_id": 88021471, "body": "Could you also upload the data somewhere? I have an idea, but can&#39;t check that without the original data."}, {"owner": {"reputation": 11, "user_id": 6594821, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EbQvGjcOuhs/AAAAAAAAAAI/AAAAAAAAAMk/lxMuW8BCv2Q/photo.jpg?sz=128", "display_name": "Albert Baloyi", "link": "https://stackoverflow.com/users/6594821/albert-baloyi"}, "reply_to_user": {"reputation": 2207, "user_id": 4874233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAIXK.jpg?s=128&g=1", "display_name": "Daniel Lenz", "link": "https://stackoverflow.com/users/4874233/daniel-lenz"}, "edited": false, "score": 0, "creation_date": 1527152666, "post_id": 50498612, "comment_id": 88022547, "body": "Here&#39;s a link to the data  <a href=\"https://files.fm/u/py9v552q\" rel=\"nofollow noreferrer\">files.fm/u/py9v552q</a>"}, {"owner": {"reputation": 2207, "user_id": 4874233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAIXK.jpg?s=128&g=1", "display_name": "Daniel Lenz", "link": "https://stackoverflow.com/users/4874233/daniel-lenz"}, "edited": false, "score": 0, "creation_date": 1527169922, "post_id": 50498612, "comment_id": 88034456, "body": "That&#39;s the map at nside=16, we&#39;d need to have the nside=64 map to reproduce the analysis."}, {"owner": {"reputation": 11, "user_id": 6594821, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EbQvGjcOuhs/AAAAAAAAAAI/AAAAAAAAAMk/lxMuW8BCv2Q/photo.jpg?sz=128", "display_name": "Albert Baloyi", "link": "https://stackoverflow.com/users/6594821/albert-baloyi"}, "reply_to_user": {"reputation": 2207, "user_id": 4874233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAIXK.jpg?s=128&g=1", "display_name": "Daniel Lenz", "link": "https://stackoverflow.com/users/4874233/daniel-lenz"}, "edited": false, "score": 0, "creation_date": 1527171707, "post_id": 50498612, "comment_id": 88035798, "body": "@DanielLenz, what do you think could be causing this effect, even at Nside = 64, it is still visible"}, {"owner": {"reputation": 11, "user_id": 6594821, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EbQvGjcOuhs/AAAAAAAAAAI/AAAAAAAAAMk/lxMuW8BCv2Q/photo.jpg?sz=128", "display_name": "Albert Baloyi", "link": "https://stackoverflow.com/users/6594821/albert-baloyi"}, "reply_to_user": {"reputation": 2207, "user_id": 4874233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAIXK.jpg?s=128&g=1", "display_name": "Daniel Lenz", "link": "https://stackoverflow.com/users/4874233/daniel-lenz"}, "edited": false, "score": 0, "creation_date": 1527172065, "post_id": 50498612, "comment_id": 88036073, "body": "Here is a link to the nside = 64 data <a href=\"https://files.fm/u/s65se6c5\" rel=\"nofollow noreferrer\">files.fm/u/s65se6c5</a>"}, {"owner": {"reputation": 2207, "user_id": 4874233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAIXK.jpg?s=128&g=1", "display_name": "Daniel Lenz", "link": "https://stackoverflow.com/users/4874233/daniel-lenz"}, "edited": false, "score": 0, "creation_date": 1527231553, "post_id": 50498612, "comment_id": 88058376, "body": "The mask that you&#39;re reading (<code>mask_nvss_S20-S1000_Ns64.fits</code>) already has the issue that you describe. Without access to the original data and your code to processes that, we won&#39; be able to reproduce that or help you. Moreover, what is <code>map1</code> in your analysis? That&#39;s never defined."}], "answers": [{"tags": [], "owner": {"reputation": 2207, "user_id": 4874233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAIXK.jpg?s=128&g=1", "display_name": "Daniel Lenz", "link": "https://stackoverflow.com/users/4874233/daniel-lenz"}, "is_accepted": false, "score": 0, "last_activity_date": 1527862141, "creation_date": 1527862141, "answer_id": 50645308, "question_id": 50498612, "link": "https://stackoverflow.com/questions/50498612/healpy-mask-has-border/50645308#50645308", "title": "Healpy mask has border", "body": "<p>I still don't have a full picture of the problem, but I assume your problem is related to the downgrading of the mask.</p>\n\n<p>When going from a high-resolution boolean mask to a lower resolution, there are three different strategies you can follow. The choice depends on your problem.</p>\n\n<p>I'll illustrate the effect with the mask that you have provided, showing a zoom-in:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FN7ft.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FN7ft.png\" alt=\"enter image description here\"></a></p>\n\n<h3>Downgrading a mask with bool type</h3>\n\n<p>You can simply downgrade the <em>boolean</em> mask, giving you the left panel in the figure below. Note that small patches will turn out unmasked in this procedure.</p>\n\n<pre><code>map_lowres_bool = hp.ud_grade(mask_highres.astype(bool), nside=16)\n</code></pre>\n\n<h3>Downgrading a mask with float type</h3>\n\n<p>If you instead downgrade your mask of type <code>float</code>, you'll get a continuous map with weights instead (middle panel below). I assume this produces the effect you're seeing.</p>\n\n<pre><code>map_lowres_float = hp.ud_grade(mask_highres.astype(float), nside=16)\n</code></pre>\n\n<h3>Properly downgrading a mask with bool type</h3>\n\n<p>You can also downgrade a boolean mask such that all masked regions remain masked. Due to the lower resolution, your masked patches will be larger than in the original mask.</p>\n\n<pre><code>mask_lowres_proper = hp.ud_grade(mask.astype(float), nside=16).astype(float)\nmask_lowres_proper = np.where(mask_lowres_proper == 1., True, False).astype(bool)\n</code></pre>\n\n<p>This produces the right panel below.</p>\n\n<p>Hope you found this helpful, let me know if you have questions!</p>\n\n<p><a href=\"https://i.stack.imgur.com/uB1nP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uB1nP.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 11, "user_id": 6594821, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EbQvGjcOuhs/AAAAAAAAAAI/AAAAAAAAAMk/lxMuW8BCv2Q/photo.jpg?sz=128", "display_name": "Albert Baloyi", "link": "https://stackoverflow.com/users/6594821/albert-baloyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527862141, "creation_date": 1527116281, "last_edit_date": 1527157831, "question_id": 50498612, "link": "https://stackoverflow.com/questions/50498612/healpy-mask-has-border", "title": "Healpy mask has border", "body": "<p>I am trying to mask my healpy map for pixels that have no data, however when I apply the healpy mask with <code>badval=-1.6375e+30</code>, there seems to be a border around my mask.</p>\n\n<pre><code>import healpy as hp\nimport numpy as np\n\n# load the mask\nmask = hp.read_map('mask_nvss_S20-S1000_Ns64.fits')\n\n# degrade the mask to NSIDE = 16\nmask16 = np.round(hp.ud_grade(mask, 16))\n\n# apply it to the map\nmasked_map = hp.ma(map1)\nmasked_map.mask = np.logical_not(mask16)\n\n# masked map\nnvss_map = np.round(masked_map)\n</code></pre>\n\n<p>Can anyone help me remove this border effect?</p>\n\n<p><a href=\"https://i.stack.imgur.com/WvHFt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WvHFt.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "types", "mypy"], "answers": [{"tags": [], "owner": {"reputation": 40179, "user_id": 646543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/a6xF2.jpg?s=128&g=1", "display_name": "Michael0x2a", "link": "https://stackoverflow.com/users/646543/michael0x2a"}, "is_accepted": true, "score": 14, "last_activity_date": 1527124285, "creation_date": 1527124285, "answer_id": 50499509, "question_id": 50498575, "link": "https://stackoverflow.com/questions/50498575/what-does-the-asterisk-in-the-output-of-reveal-type-mean/50499509#50499509", "title": "What does the asterisk in the output of `reveal_type` mean?", "body": "<p>It means that particular type was inferred by mypy as a part of performing type variable substitution.</p>\n\n<p>For example, <code>blah[0]</code> is actually doing <code>blah.__getitem__(0)</code>: it turns out that the <code>__getitem__</code> method is defined to return some value of type <code>_T</code>, where <code>_T</code> is whatever type is contained within the list*.  </p>\n\n<p>Mypy understands that <code>blah</code> contains ints, and so inferred that the <code>_T</code> return type is of type <code>int</code>.</p>\n\n<p>In contrast, there's no type variable inference going on with just <code>1</code> and <code>blah[0] * 2</code>. The former is a literal; the latter is invoking the <code>int.__mul__(...)</code> method, which is typed to return specifically an int.</p>\n\n<p><sub>*Well, that's not actually the exact signature, but close enough.</sub></p>\n\n<hr>\n\n<p>For the most part, you can ignore this and just treat it as an implementation detail of mypy. It exists mostly because being able to tell whether or not a type was inferred is occasionally useful to have when you're tinkering with or debugging mypy internals.</p>\n"}], "owner": {"reputation": 2239, "user_id": 1080125, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/261ff136c0a206a22930c0fe921ffcb4?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/1080125/erik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 1, "accepted_answer_id": 50499509, "answer_count": 1, "score": 11, "last_activity_date": 1527124285, "creation_date": 1527116020, "question_id": 50498575, "link": "https://stackoverflow.com/questions/50498575/what-does-the-asterisk-in-the-output-of-reveal-type-mean", "title": "What does the asterisk in the output of `reveal_type` mean?", "body": "<pre><code>reveal_type(1) # Revealed type is 'builtins.int'\nbla = [1,2,3]\nreveal_type(bla[0]) # Revealed type is 'builtins.int*'\nreveal_type(bla[0] * 2) # Revealed type is 'builtins.int'\n</code></pre>\n\n<p>What is the difference between <code>int</code> and <code>int*</code>?</p>\n"}, {"tags": ["python", "python-3.x", "while-loop"], "comments": [{"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 2, "creation_date": 1527115970, "post_id": 50498557, "comment_id": 88009927, "body": "Amont other things, you have to prompt the user <i>inside</i> the loop"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1527116506, "post_id": 50498557, "comment_id": 88010051, "body": "You are calling <code>lower()</code>, so when would the input be in <code>(&quot;A&quot;, &quot;N&quot;)</code>??"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1527116550, "post_id": 50498557, "comment_id": 88010061, "body": "Also, there are no object oriented concepts here"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1527159510, "post_id": 50498557, "comment_id": 88027215, "body": "<code>if name in (&quot;A&quot;)</code> is wrong, it&#39;s testing if the entire string <code>name</code> occurs in the tuple <code>(&quot;A&quot;)</code>. So even if Name=&quot;Andy&quot; it would fail <code>if name in (&quot;A&quot;)</code>. You want <code>if name.startswith(&#39;A&#39;)</code>. You could also write <code>if name[0]==&#39;A&#39;</code> but that&#39;s not quite equivalent, it will throw IndexError if name is empty."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 1, "creation_date": 1527159627, "post_id": 50498557, "comment_id": 88027281, "body": "You shouldn&#39;t name variables uppercase, so <code>name</code> not <code>Name</code>. This is Python PEP-8 standard. Only class names can have capitals e.g. <code>WidgetFactory</code> or constants e.g. <code>LUXURY_YACHT = 666</code>"}], "answers": [{"comments": [{"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1527159161, "post_id": 50498674, "comment_id": 88026962, "body": "If name doesn&#39;t match either if-clause and doesn&#39;t break, then you know it&#39;s not N or A. Hence you could remove the else-clause and <code>except ValueError: pass</code>, and move <code>print(&quot;Sorry, my only purpose is to talk to N and A&quot;)</code> to the bottom, so it gets executed at the end of every loop."}], "tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": true, "score": 2, "last_activity_date": 1527116771, "creation_date": 1527116771, "answer_id": 50498674, "question_id": 50498557, "link": "https://stackoverflow.com/questions/50498557/input-prompt-within-a-while-true-loop/50498674#50498674", "title": "Input prompt within a while-true loop", "body": "<p>You want to repeat <code>try-except</code>... And the thing you want to <code>try</code> is <code>input()</code>, so you need to put basically all the code within the loop. </p>\n\n<p>And remove the <code>lower()</code>, or convert to <code>\"a\"</code> and <code>\"n\"</code></p>\n\n<pre><code>while True:\n    try:\n        name = input (\"What is your name ? \").strip()\n        if name.startswith(\"A\"):\n            print(\"message for A\")\n            break       \n        elif name.startswith(\"N\"):\n            print(\"message for N\")\n            break\n        else:\n            print(\"Sorry, my only purpose is to talk to N and A\")\n    except ValueError:\n        print (\"Sorry, my only purpose is to talk to N and A\")\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 6108708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jgpaAANT2dI/AAAAAAAAAAI/AAAAAAAAAKM/xdl8xOxurI4/photo.jpg?sz=128", "display_name": "Gilgamesh1401", "link": "https://stackoverflow.com/users/6108708/gilgamesh1401"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4081, "favorite_count": 0, "closed_date": 1542896760, "accepted_answer_id": 50498674, "answer_count": 1, "score": 1, "last_activity_date": 1527159219, "creation_date": 1527115809, "last_edit_date": 1527159219, "question_id": 50498557, "link": "https://stackoverflow.com/questions/50498557/input-prompt-within-a-while-true-loop", "closed_reason": "Duplicate", "title": "Input prompt within a while-true loop", "body": "<p>I want to create a program that prompts for input and based on this input provides with a tailored reply. </p>\n\n<p>As the code is, it works perfectly, with the exception that it is not looping at all. (After running the script in CMD or Powershell it terminates and dies.) </p>\n\n<p>I want the program to return to the input prompt following every run. I think I need the return function but I have no idea what kind of argument to give it.</p>\n\n<p>Also, the ValueError argument is kind of pointless, there is an issue there.</p>\n\n<pre><code>Name = input (\"What is your name ? \").strip().lower()\n\nwhile True:\n\n    try:\n        if Name in (\"A\"):\n            print(\"message for A\")\n            break       \n        else:\n            if Name in (\"N\"):\n                print(\"message for N\")\n                break\n    except ValueError:\n        print (\"Sorry, my only purpose is to talk to N and A\")\n\n    else:\n        print(\"dammit\")\n        break\n</code></pre>\n"}, {"tags": ["python", "recursion", "binary-search-tree"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 9154781, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/880ddcc3fc9ae0176be6f8cff32e4430?s=128&d=identicon&r=PG&f=1", "display_name": "anon anon", "link": "https://stackoverflow.com/users/9154781/anon-anon"}, "edited": false, "score": 0, "creation_date": 1527117944, "post_id": 50498642, "comment_id": 88010407, "body": "I was just asking how the highlighted code works the way it was written."}], "tags": [], "owner": {"reputation": 1, "user_id": 9482822, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K1JIia8kUxI/AAAAAAAAAAI/AAAAAAAAABE/clvDu65ZPU8/photo.jpg?sz=128", "display_name": "strikingLoo", "link": "https://stackoverflow.com/users/9482822/strikingloo"}, "is_accepted": false, "score": 0, "last_activity_date": 1527116518, "creation_date": 1527116518, "answer_id": 50498642, "question_id": 50498540, "link": "https://stackoverflow.com/questions/50498540/analyzing-bst-is-balanced-code/50498642#50498642", "title": "Analyzing BST is balanced Code", "body": "<p>When dealing with recursion problems, you should always pay attention to what your base cases are. In this program, there is only one base case: an empty tree, which has a trivially obtainable height of 1 and is, by definition, balanced.\nNow assuming a tree is unbalanced if its tallest half has a height of more than 1 plus the height of its other half (that is, its tallest half is taller by at least two levels), or if one of its subtrees is unbalanced, then we get a recursive way of calculating this.</p>\n\n<p>First, return 0 and True for the trivially balanced (empty) tree. We got our base case.</p>\n\n<p>Second, if either of the halves in unbalanced then the tree is unbalanced. This is checked for each subtree, and thus recursion will keep going until finding an empty tree, where it will start returning (picture the case of a tree with only one level, one node. Imagine how the code will run and you'll probably be able to extrapolate from there).</p>\n\n<p>At last, if each subtree is balanced (that's the third case, since we already got that far into the program) then the only way the tree is unbalanced is if one of its subtrees is taller than the other by more than one level. We just check that, and return the opposite of that value.</p>\n\n<p>I hope this helped you understand, feel free to ask me any other questions otherwise!</p>\n"}], "owner": {"reputation": 111, "user_id": 9154781, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/880ddcc3fc9ae0176be6f8cff32e4430?s=128&d=identicon&r=PG&f=1", "display_name": "anon anon", "link": "https://stackoverflow.com/users/9154781/anon-anon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527116518, "creation_date": 1527115663, "question_id": 50498540, "link": "https://stackoverflow.com/questions/50498540/analyzing-bst-is-balanced-code", "title": "Analyzing BST is balanced Code", "body": "<p>I was looking at this python code to check if a Binary Search Tree is balanced. However, I was wondering if someone could explain how </p>\n\n<p><code>height = max(left_height, right_height) + 1</code> comes into play. How does this line of code work to calculate the height. And finally, how this </p>\n\n<pre><code>is_left_balanced, left_height = TreeNode.is_balanced(cur_node.left)\nis_right_balanced, right_height = TreeNode.is_balanced(cur_node.right)\n</code></pre>\n\n<p>stack recursion is working because once is_balanced(cur_node.left) is called,  its called again when the second TreeNode.is_balanced(cur_node.right) is called. </p>\n\n<p>Im having trouble following the stack trace for this.</p>\n\n<p>Here is the entire code:</p>\n\n<pre><code>def is_balanced(cur_node) :\n            if (not cur_node) :\n                height = 0\n                return True, height\n\n            is_left_balanced, left_height = TreeNode.is_balanced(cur_node.left)\n            is_right_balanced, right_height = TreeNode.is_balanced(cur_node.right)\n\n            #To get the height of the current node, we find the maximum of the  \n            #left subtree height and the right subtree height and add 1 to it\n            height = max(left_height, right_height) + 1\n\n            if (not is_left_balanced or not is_right_balanced):\n                return False, height\n\n            #If the difference between height of left subtree and height of\n            #right subtree is more than 1, then the tree is unbalanced\n            if (abs(left_height - right_height) &gt; 1):\n                return False, height\n\n            return True, height \n</code></pre>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 2778, "user_id": 4704510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WBcGH.jpg?s=128&g=1", "display_name": "UsamaAmjad", "link": "https://stackoverflow.com/users/4704510/usamaamjad"}, "edited": false, "score": 0, "creation_date": 1527118907, "post_id": 50498525, "comment_id": 88010675, "body": "Please try to explain your problem clearly and add your minimal code. It will help others to understand the problem."}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 5221628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YpGFq.jpg?s=128&g=1", "display_name": "Charles Cao", "link": "https://stackoverflow.com/users/5221628/charles-cao"}, "is_accepted": false, "score": 1, "last_activity_date": 1532244352, "creation_date": 1532244352, "answer_id": 51462933, "question_id": 50498525, "link": "https://stackoverflow.com/questions/50498525/python-tensorflow-importerror/51462933#51462933", "title": "python Tensorflow ImportError", "body": "<p>You could try that\uff1a</p>\n\n<ol>\n<li><p>Confirm the python interpreter path, is anaconda or system python?</p></li>\n<li><p>export python library <code>export PYTHONPATH=xxxxx:$PYTHONPATH</code> to solve some lib couldn't find before execute a python script in terminal.  </p></li>\n</ol>\n\n<p>If you following two step, above troubles could be solved.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 9571445, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/btFmM.jpg?s=128&g=1", "display_name": "gamzeakkurt", "link": "https://stackoverflow.com/users/9571445/gamzeakkurt"}, "is_accepted": false, "score": 0, "last_activity_date": 1605107013, "creation_date": 1605107013, "answer_id": 64788915, "question_id": 50498525, "link": "https://stackoverflow.com/questions/50498525/python-tensorflow-importerror/64788915#64788915", "title": "python Tensorflow ImportError", "body": "<p>Before importing TensorFlow, you need to install TensorFlow on Python 3.6.\nFirstly, I assumed that you use the Windows operating system because you did not explain any information about your computer.\nOpen the Anaconda prompt, install TensorFlow with this command:</p>\n<pre><code>pip install tensorflow==2.0\n</code></pre>\n<p>If everything installs successfully, you can import the TensorFlow library in Python.</p>\n<pre><code>import tensorflow as tf \n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9837020, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ellibria", "link": "https://stackoverflow.com/users/9837020/ellibria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2295, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1605107013, "creation_date": 1527115585, "last_edit_date": 1527121209, "question_id": 50498525, "link": "https://stackoverflow.com/questions/50498525/python-tensorflow-importerror", "title": "python Tensorflow ImportError", "body": "<p>Please help me with this error:</p>\n\n<blockquote>\n  <p>import tensorflow as tf Traceback (most recent call last):   File\n  \"/home/user/anaconda3/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow.py\",\n  line 41, in \n      from tensorflow.python.pywrap_tensorflow_internal import *   File \"/home/user/anaconda3/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow_internal.py\",\n  line 28, in \n      _pywrap_tensorflow_internal = swig_import_helper()   File \"/home/user/anaconda3/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow_internal.py\",\n  line 24, in swig_import_helper\n      _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)   File\n  \"/home/user/anaconda3/lib/python3.6/imp.py\", line 243, in load_module\n      return load_dynamic(name, filename, file)   File \"/home/user/anaconda3/lib/python3.6/imp.py\", line 343, in load_dynamic\n      return _load(spec) ImportError: libcusolver.so.8.0: cannot open shared object file: No such file or directory</p>\n  \n  <p>During handling of the above exception, another exception occurred:</p>\n  \n  <p>Traceback (most recent call last):   File \"\", line 1, in\n     File\n  \"/home/user/anaconda3/lib/python3.6/site-packages/tensorflow/<strong>init</strong>.py\",\n  line 24, in \n      from tensorflow.python import *   File \"/home/user/anaconda3/lib/python3.6/site-packages/tensorflow/python/<strong>init</strong>.py\",\n  line 49, in \n      from tensorflow.python import pywrap_tensorflow   File \"/home/user/anaconda3/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow.py\",\n  line 52, in \n      raise ImportError(msg) ImportError: Traceback (most recent call last):   File\n  \"/home/user/anaconda3/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow.py\",\n  line 41, in \n      from tensorflow.python.pywrap_tensorflow_internal import *   File \"/home/user/anaconda3/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow_internal.py\",\n  line 28, in \n      _pywrap_tensorflow_internal = swig_import_helper()   File \"/home/user/anaconda3/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow_internal.py\",\n  line 24, in swig_import_helper\n      _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)   File\n  \"/home/user/anaconda3/lib/python3.6/imp.py\", line 243, in load_module\n      return load_dynamic(name, filename, file)   File \"/home/user/anaconda3/lib/python3.6/imp.py\", line 343, in load_dynamic\n      return _load(spec) ImportError: libcusolver.so.8.0: cannot open shared object file: No such file or directory</p>\n  \n  <p>Failed to load the native TensorFlow runtime.</p>\n  \n  <p>See\n  <a href=\"https://www.tensorflow.org/install/install_sources#common_installation_problems\" rel=\"noreferrer\">https://www.tensorflow.org/install/install_sources#common_installation_problems</a></p>\n  \n  <p>for some common reasons and solutions.  Include the entire stack trace\n  above this error message when asking for help.</p>\n</blockquote>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "neural-network", "backpropagation"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9837370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Peter Bence", "link": "https://stackoverflow.com/users/9837370/peter-bence"}, "edited": false, "score": 0, "creation_date": 1527120142, "post_id": 50498933, "comment_id": 88010943, "body": "thanks @Balle, i believe that the type of my data is a big problem when training however i also believe that i should be able to at least classify some fraudulent transaction even with a very low precision but here the neural net classified all of them as normal ones!! it looks a bit confusing for me especially when i found that someone had already succeeded in building a functional predictive model (on the same dataset) here: <a href=\"https://www.kaggle.com/currie32/predicting-fraud-with-tensorflow\" rel=\"nofollow noreferrer\">kaggle.com/currie32/predicting-fraud-with-tensorflow</a>"}], "tags": [], "owner": {"reputation": 151, "user_id": 4758539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b95aa6f886f54777e5a0c31b43dba34c?s=128&d=identicon&r=PG&f=1", "display_name": "Balle", "link": "https://stackoverflow.com/users/4758539/balle"}, "is_accepted": false, "score": 0, "last_activity_date": 1527118876, "creation_date": 1527118876, "answer_id": 50498933, "question_id": 50498481, "link": "https://stackoverflow.com/questions/50498481/tensorflow-mlp-neural-network-not-giving-reasonable-results/50498933#50498933", "title": "tensorflow MLP neural network not giving reasonable results", "body": "<p>The \"problem\" seems to be the dataset. The model trains well, with very low training loss, but training in a (fairly) high-capacity model like this MLP with such extremely unbalanced will either just teach the model to always go for the majority class, or if trained for sufficiently long and with sufficiently small learning rate, learn to exactly match the few examples from the low-probability-class and otherwise assume the default class. Either way your generalization power will be none. Several options are available to you, like oversampling the low-prob-class (for instance by generating new \"observations\" by adding some noise to the few observations you have) or change the loss to something where you penalize false negatives and false positives differently, or both... If you google \"imbalanced data\" I guess you can find some inspiration in the top results.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 9837370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Peter Bence", "link": "https://stackoverflow.com/users/9837370/peter-bence"}, "edited": false, "score": 1, "creation_date": 1527200684, "post_id": 50503836, "comment_id": 88050560, "body": "thanks for your reply @Omegastick, for now i agree with you that my problem exists in the type of my dataset so i will give your suggestion a try and i will post back for the results"}], "tags": [], "owner": {"reputation": 1216, "user_id": 5905951, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ff173749b1e47759eeecb9768c223c1?s=128&d=identicon&r=PG&f=1", "display_name": "Omegastick", "link": "https://stackoverflow.com/users/5905951/omegastick"}, "is_accepted": false, "score": 0, "last_activity_date": 1527148203, "creation_date": 1527148203, "answer_id": 50503836, "question_id": 50498481, "link": "https://stackoverflow.com/questions/50498481/tensorflow-mlp-neural-network-not-giving-reasonable-results/50503836#50503836", "title": "tensorflow MLP neural network not giving reasonable results", "body": "<p>Your problem is that your data is unbalanced, but as far as I can see you're not doing anything to remedy that. There are a few ways to fix the problem of unbalanced data, the easiest being to weight the classes differently in the loss function. </p>\n\n<p>You can use <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.utils.class_weight.compute_class_weight.html\" rel=\"nofollow noreferrer\">Sci-Kit Learn's compute_class_weight()</a> to calculate the correct weights for your problem. For actually applying the weights, see <a href=\"https://stackoverflow.com/questions/35155655/loss-function-for-class-imbalanced-binary-classifier-in-tensor-flow\">this question</a>. The gist is that you multiply the logits by the class weights. Libraries built on top of Tensorflow (Keras, etc.) usually have a class weight feature built in if you don't feel like doing everything yourself.</p>\n"}], "owner": {"reputation": 11, "user_id": 9837370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Peter Bence", "link": "https://stackoverflow.com/users/9837370/peter-bence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1530031953, "creation_date": 1527115386, "last_edit_date": 1530031953, "question_id": 50498481, "link": "https://stackoverflow.com/questions/50498481/tensorflow-mlp-neural-network-not-giving-reasonable-results", "title": "tensorflow MLP neural network not giving reasonable results", "body": "<p>I have good knowledge in the theory of machine learning and neural networks however have a little of it when working with its code. Here i am using tensorflow along with python in order to implement a Multi-layer Perceptron in order to detect fraudulent transaction out from normal ones in a labeled credit card transactions dataset. I started up from a MLP sample built using tensorflow and edited it to fit my data however it seems that it couldn't recognize any fraudulent transaction after a 1000 epoch!!. Now I'm confused, and i couldn't figure out if the problem is in the training or in the output representation (I print out both of the accuracy and the precision at the end where i'm concerned about the precision much more since i have a highly unbalanced dataset where the accuracy will be mostly about 99% in such cases).</p>\n\n<p>I highly appreciate any help in the concept or even in the code if there is any problem in it. Below is my code and its corresponding output.</p>\n\n<pre><code>import sys\nimport os.path\nimport pandas as pd\nimport numpy as np \nimport tensorflow as tf\nimport sklearn as sk\n\nfrom datetime import datetime\nfrom sklearn.model_selection import train_test_split\n\n\n# Choose device from cmd line. Options: gpu or cpu\ndevice_name = sys.argv[1]  \n\nif device_name == 'gpu':\n    device_name = '/gpu:0'\nelse:\n    device_name = '/cpu:0'\n\ntf.device(device_name)\nprint('Device used:' + str(device_name))\n\ndatasetCSVPath = sys.argv[2]\nparentPath = os.path.abspath(os.path.join(datasetCSVPath, os.pardir))\nprint(datasetCSVPath)\nprint(parentPath)\n\nprint('Reading dataset...')\ndf = pd.read_csv(datasetCSVPath, index_col=False)\n\nprint('Adding Class inverse column...')\nclsInv = [ 1 - row.Class for index, row in df.iterrows() ]\ndf = df.assign(classInverse = clsInv)\nprint('')\n\nprint('Raw Data: \\n------------------------------ \\n')\nprint(df.head())\nprint('')\nprint('Whole dataset size: ' + str(len(df)))\nprint('')\nprint('Data Discription\\n------------------------------ \\n')\nprint(df.describe())\nprint('')\n\nX = pd.DataFrame(df,columns=['Time','V1','V2','V3','V4','V5','V6','V7','V8','V9','V10','V11','V12','V13','V14','V15','V16','V17','V18','V19','V20','V21','V22','V23','V24','V25','V26','V27','V28','Amount'])\nprint('Features Vector:\\n------------------------------ \\n')\nprint(X.head())\nprint('')\n\nY = pd.DataFrame(df,columns=['Class','classInverse'])\nprint('Class Vector:\\n------------------------------ \\n')\nprint(Y.head())\nprint('')\n\n\nprint('Splitting Features and Class vectors into training and validation sets by 70/30 ratio...')\nX_train, X_test, Y_train, Y_test = train_test_split(X,Y, test_size=0.3, shuffle=False)\nprint('Train features set size: ' + str(len(X_train)))\nprint('Train Class size: ' + str(len(Y_train)))\nprint('Train fraud frequency: ')\nprint(Y_train['Class'].value_counts())\nprint('')\nprint('Test features size: ' + str(len(X_test)))\nprint('Test Class size: ' + str(len(Y_test)))\nprint('Train fraud frequency: ')\nprint(Y_test['Class'].value_counts())\n\n\n# Parameters\nlearning_rate = 0.001\ntraining_epochs = 100\nbatch_size = 100\ndisplay_step = 1\n\n\n# Network Parameters\nn_hidden_1 = 10 # 1st layer number of features\nn_hidden_2 = 10 # 2nd layer number of features\nn_input = 30 # Number of feature\nn_classes = 2 # Number of classes to predict\n\n\n# tf Graph input\n# x = tf.placeholder(tf.float32, [101, n_input])\n# y = tf.placeholder(tf.float32)\nx = tf.placeholder(tf.float32, [None, n_input])\ny = tf.placeholder(tf.float32, [None, n_classes])\n\n# Create model\ndef multilayer_perceptron(x, weights, biases):\n    # Hidden layer with RELU activation\n    layer_1 = tf.add(tf.matmul(x, weights['h1']), biases['b1'])\n    layer_1 = tf.nn.relu(layer_1)\n    # Hidden layer with RELU activation\n    layer_2 = tf.add(tf.matmul(layer_1, weights['h2']), biases['b2'])\n    layer_2 = tf.nn.relu(layer_2)\n    # Output layer with linear activation\n    out_layer = tf.matmul(layer_2, weights['out']) + biases['out']\n    return out_layer\n\n# Store layers weight &amp; bias\nweights = {\n    'h1': tf.Variable(tf.random_normal([n_input, n_hidden_1])),\n    'h2': tf.Variable(tf.random_normal([n_hidden_1, n_hidden_2])),\n    'out': tf.Variable(tf.random_normal([n_hidden_2, n_classes]))\n}\n\nbiases = {\n    'b1': tf.Variable(tf.random_normal([n_hidden_1])),\n    'b2': tf.Variable(tf.random_normal([n_hidden_2])),\n    'out': tf.Variable(tf.random_normal([n_classes]))\n}\n\n# Construct model\npred = multilayer_perceptron(x, weights, biases)\n\n# Define loss and optimizer\ncost = tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits_v2(logits=pred, labels=y))\noptimizer = tf.train.AdamOptimizer(learning_rate=learning_rate).minimize(cost)\n\n# Initializing the variables\ninit = tf.global_variables_initializer()\n\n# Implement get_GPU_tensorflow_session method, to use CPU just return tf.Session() instead\ndef get_session():\n    config = tf.ConfigProto()\n    config.gpu_options.allow_growth = True\n    return tf.Session(config=config)\n\nprint('')   \nstartTime = datetime.now()\nprint(\"Started at: \", startTime)\nprint('')\n\nsaver = tf.train.Saver()\n\n# Launch the graph\nwith get_session() as sess:\n\n    if os.path.isfile(parentPath + \"/model.ckpt\"):\n        saver.restore(sess, parentPath + \"/model.ckpt\")\n    else:\n        sess.run(init)\n\n    # Training cycle\n    for epoch in range(training_epochs):\n        avg_cost = 0.\n        total_batch = int(len(X_train)/batch_size)\n        X_batches = np.array_split(X_train, total_batch)\n        Y_batches = np.array_split(Y_train, total_batch)\n        # Loop over all batches\n        for i in range(total_batch):\n            batch_x, batch_y = X_batches[i], Y_batches[i]\n            #print(batch_x)\n            #print(batch_y)\n            # Run optimization op (backprop) and cost op (to get loss value)\n            _, c = sess.run([optimizer, cost], feed_dict={x: batch_x,\n                                                          y: batch_y})\n            # Compute average loss\n            avg_cost += c / total_batch\n        # Display logs per epoch step\n        if epoch % display_step == 0:\n            print(\"Epoch:\", '%04d' % (epoch+1), \"cost=\", \"{:.9f}\".format(avg_cost))\n    save_path = saver.save(sess, parentPath + \"/model.ckpt\")\n\n    print('')\n    print('Optimization Finished:\\n------------------------------ \\n')\n    print(\"Model saved in path: %s\" % save_path)\n\n    # Test model\n    correct_prediction = tf.equal(tf.argmax(pred, 1), tf.argmax(y, 1))\n\n    # Calculate accuracy\n    accuracy = tf.reduce_mean(tf.cast(correct_prediction, \"float\" ))\n    print(\"Accuracy:\", accuracy.eval({x: X_test, y: Y_test}))\n\n    # Calculate Precision\n    y_p = tf.argmax(pred, 1)\n    val_accuracy, y_pred = sess.run([accuracy, y_p], feed_dict={x:X_test, y:Y_test})\n\n    y_true = np.array(Y_test['classInverse'],dtype=np.int)\n    np.savetxt(parentPath + '/y_true.txt', y_true, fmt='%d')\n    np.savetxt(parentPath + '/y_pred.txt', y_pred, fmt='%d')\n\n    print('y_predicted length:',y_pred.size)\n    df_pred = pd.DataFrame(data=y_pred)\n    print(df_pred[0].value_counts())\n\n    print('')   \n\n    print('y_true labels length:',y_true.size)\n    df_true = pd.DataFrame(data=y_true)\n    print(df_true[0].value_counts())\n\n\n    # print(\"Precision,0,macro:\", sk.metrics.precision_score(y_true, y_pred, pos_label=0, average='macro'))\n    print(\"Recall\", sk.metrics.recall_score(y_true, y_pred))\n    print(\"\\nconfusion_matrix:\\n\")\n    print(sk.metrics.confusion_matrix(y_true, y_pred))\n    print('')\n    print(\"Time taken:\", datetime.now() - startTime)\n    global result \n    result = tf.argmax(pred, 1).eval({x: X_test, y: Y_test})\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>E:\\Karbala\\CreditCard&gt;python Trained.py cpu CC_All.csv\nDevice used:/cpu:0\nCC_All.csv\nE:\\Karbala\\CreditCard\nReading dataset...\nAdding Class inverse column...\n\nRaw Data:\n------------------------------\n\n   Unnamed: 0  Time        V1        V2        V3        V4        V5  \\\n0           1   0.0 -1.359807 -0.072781  2.536347  1.378155 -0.338321\n1           2   0.0  1.191857  0.266151  0.166480  0.448154  0.060018\n2           3   1.0 -1.358354 -1.340163  1.773209  0.379780 -0.503198\n3           4   1.0 -0.966272 -0.185226  1.792993 -0.863291 -0.010309\n4           5   2.0 -1.158233  0.877737  1.548718  0.403034 -0.407193\n\n         V6        V7        V8      ...            V22       V23       V24  \\\n0  0.462388  0.239599  0.098698      ...       0.277838 -0.110474  0.066928\n1 -0.082361 -0.078803  0.085102      ...      -0.638672  0.101288 -0.339846\n2  1.800499  0.791461  0.247676      ...       0.771679  0.909412 -0.689281\n3  1.247203  0.237609  0.377436      ...       0.005274 -0.190321 -1.175575\n4  0.095921  0.592941 -0.270533      ...       0.798278 -0.137458  0.141267\n\n        V25       V26       V27       V28  Amount  Class  classInverse\n0  0.128539 -0.189115  0.133558 -0.021053  149.62      0           1.0\n1  0.167170  0.125895 -0.008983  0.014724    2.69      0           1.0\n2 -0.327642 -0.139097 -0.055353 -0.059752  378.66      0           1.0\n3  0.647376 -0.221929  0.062723  0.061458  123.50      0           1.0\n4 -0.206010  0.502292  0.219422  0.215153   69.99      0           1.0\n\n[5 rows x 33 columns]\n\nWhole dataset size: 284807\n\nData Discription\n------------------------------\n\n          Unnamed: 0           Time            V1            V2            V3  \\\ncount  284807.000000  284807.000000  2.848070e+05  2.848070e+05  2.848070e+05\nmean   142404.000000   94813.859575  1.165980e-15  3.416908e-16 -1.373150e-15\nstd     82216.843396   47488.145955  1.958696e+00  1.651309e+00  1.516255e+00\nmin         1.000000       0.000000 -5.640751e+01 -7.271573e+01 -4.832559e+01\n25%     71202.500000   54201.500000 -9.203734e-01 -5.985499e-01 -8.903648e-01\n50%    142404.000000   84692.000000  1.810880e-02  6.548556e-02  1.798463e-01\n75%    213605.500000  139320.500000  1.315642e+00  8.037239e-01  1.027196e+00\nmax    284807.000000  172792.000000  2.454930e+00  2.205773e+01  9.382558e+00\n\n                 V4            V5            V6            V7            V8  \\\ncount  2.848070e+05  2.848070e+05  2.848070e+05  2.848070e+05  2.848070e+05\nmean   2.086869e-15  9.604066e-16  1.490107e-15 -5.556467e-16  1.177556e-16\nstd    1.415869e+00  1.380247e+00  1.332271e+00  1.237094e+00  1.194353e+00\nmin   -5.683171e+00 -1.137433e+02 -2.616051e+01 -4.355724e+01 -7.321672e+01\n25%   -8.486401e-01 -6.915971e-01 -7.682956e-01 -5.540759e-01 -2.086297e-01\n50%   -1.984653e-02 -5.433583e-02 -2.741871e-01  4.010308e-02  2.235804e-02\n75%    7.433413e-01  6.119264e-01  3.985649e-01  5.704361e-01  3.273459e-01\nmax    1.687534e+01  3.480167e+01  7.330163e+01  1.205895e+02  2.000721e+01\n\n           ...                 V22           V23           V24           V25  \\\ncount      ...        2.848070e+05  2.848070e+05  2.848070e+05  2.848070e+05\nmean       ...       -3.444850e-16  2.578648e-16  4.471968e-15  5.340915e-16\nstd        ...        7.257016e-01  6.244603e-01  6.056471e-01  5.212781e-01\nmin        ...       -1.093314e+01 -4.480774e+01 -2.836627e+00 -1.029540e+01\n25%        ...       -5.423504e-01 -1.618463e-01 -3.545861e-01 -3.171451e-01\n50%        ...        6.781943e-03 -1.119293e-02  4.097606e-02  1.659350e-02\n75%        ...        5.285536e-01  1.476421e-01  4.395266e-01  3.507156e-01\nmax        ...        1.050309e+01  2.252841e+01  4.584549e+00  7.519589e+00\n\n                V26           V27           V28         Amount          Class  \\\ncount  2.848070e+05  2.848070e+05  2.848070e+05  284807.000000  284807.000000\nmean   1.687098e-15 -3.666453e-16 -1.220404e-16      88.349619       0.001727\nstd    4.822270e-01  4.036325e-01  3.300833e-01     250.120109       0.041527\nmin   -2.604551e+00 -2.256568e+01 -1.543008e+01       0.000000       0.000000\n25%   -3.269839e-01 -7.083953e-02 -5.295979e-02       5.600000       0.000000\n50%   -5.213911e-02  1.342146e-03  1.124383e-02      22.000000       0.000000\n75%    2.409522e-01  9.104512e-02  7.827995e-02      77.165000       0.000000\nmax    3.517346e+00  3.161220e+01  3.384781e+01   25691.160000       1.000000\n\n        classInverse\ncount  284807.000000\nmean        0.998273\nstd         0.041527\nmin         0.000000\n25%         1.000000\n50%         1.000000\n75%         1.000000\nmax         1.000000\n\n[8 rows x 33 columns]\n\nFeatures Vector:\n------------------------------\n\n   Time        V1        V2        V3        V4        V5        V6        V7  \\\n0   0.0 -1.359807 -0.072781  2.536347  1.378155 -0.338321  0.462388  0.239599\n1   0.0  1.191857  0.266151  0.166480  0.448154  0.060018 -0.082361 -0.078803\n2   1.0 -1.358354 -1.340163  1.773209  0.379780 -0.503198  1.800499  0.791461\n3   1.0 -0.966272 -0.185226  1.792993 -0.863291 -0.010309  1.247203  0.237609\n4   2.0 -1.158233  0.877737  1.548718  0.403034 -0.407193  0.095921  0.592941\n\n         V8        V9   ...         V20       V21       V22       V23  \\\n0  0.098698  0.363787   ...    0.251412 -0.018307  0.277838 -0.110474\n1  0.085102 -0.255425   ...   -0.069083 -0.225775 -0.638672  0.101288\n2  0.247676 -1.514654   ...    0.524980  0.247998  0.771679  0.909412\n3  0.377436 -1.387024   ...   -0.208038 -0.108300  0.005274 -0.190321\n4 -0.270533  0.817739   ...    0.408542 -0.009431  0.798278 -0.137458\n\n        V24       V25       V26       V27       V28  Amount\n0  0.066928  0.128539 -0.189115  0.133558 -0.021053  149.62\n1 -0.339846  0.167170  0.125895 -0.008983  0.014724    2.69\n2 -0.689281 -0.327642 -0.139097 -0.055353 -0.059752  378.66\n3 -1.175575  0.647376 -0.221929  0.062723  0.061458  123.50\n4  0.141267 -0.206010  0.502292  0.219422  0.215153   69.99\n\n[5 rows x 30 columns]\n\nClass Vector:\n------------------------------\n\n   Class  classInverse\n0      0           1.0\n1      0           1.0\n2      0           1.0\n3      0           1.0\n4      0           1.0\n\nSplitting Features and Class vectors into training and validation sets by 70/30 ratio...\nTrain features set size: 199364\nTrain Class size: 199364\nTrain fraud frequency:\n0    198980\n1       384\nName: Class, dtype: int64\n\nTest features size: 85443\nTest Class size: 85443\nTrain fraud frequency:\n0    85335\n1      108\nName: Class, dtype: int64\n\nStarted at:  2018-05-23 16:14:59.137501\n\n2018-05-23 16:14:59.149501: I T:\\src\\github\\tensorflow\\tensorflow\\core\\platform\\cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\nEpoch: 0001 cost= 15.756240782\nEpoch: 0002 cost= 13.016147260\nEpoch: 0003 cost= 12.134617616\nEpoch: 0004 cost= 12.069568292\nEpoch: 0005 cost= 11.135412584\nEpoch: 0006 cost= 9.884679892\nEpoch: 0007 cost= 8.383180135\nEpoch: 0008 cost= 6.902679826\nEpoch: 0009 cost= 6.774688792\nEpoch: 0010 cost= 4.422019803\nEpoch: 0011 cost= 1.476535059\nEpoch: 0012 cost= 0.404204394\nEpoch: 0013 cost= 0.226037890\nEpoch: 0014 cost= 0.039981139\nEpoch: 0015 cost= 0.026224809\nEpoch: 0016 cost= 0.022262489\nEpoch: 0017 cost= 0.021467826\nEpoch: 0018 cost= 0.020389822\nEpoch: 0019 cost= 0.019285675\nEpoch: 0020 cost= 0.020210635\nEpoch: 0021 cost= 0.019544568\nEpoch: 0022 cost= 0.021737715\nEpoch: 0023 cost= 0.022598267\nEpoch: 0024 cost= 0.016776631\nEpoch: 0025 cost= 0.016166327\nEpoch: 0026 cost= 0.015632419\nEpoch: 0027 cost= 0.019071494\nEpoch: 0028 cost= 0.014936624\nEpoch: 0029 cost= 0.016047536\nEpoch: 0030 cost= 0.050594513\nEpoch: 0031 cost= 0.016173221\nEpoch: 0032 cost= 0.040230576\nEpoch: 0033 cost= 0.015785579\nEpoch: 0034 cost= 0.016168447\nEpoch: 0035 cost= 0.016222776\nEpoch: 0036 cost= 0.015788947\nEpoch: 0037 cost= 0.015013909\nEpoch: 0038 cost= 0.015142855\nEpoch: 0039 cost= 0.015545011\nEpoch: 0040 cost= 0.014925630\nEpoch: 0041 cost= 0.023263962\nEpoch: 0042 cost= 0.014892573\nEpoch: 0043 cost= 0.015483862\nEpoch: 0044 cost= 0.014753576\nEpoch: 0045 cost= 0.015170122\nEpoch: 0046 cost= 0.014410569\nEpoch: 0047 cost= 0.014892267\nEpoch: 0048 cost= 0.014679266\nEpoch: 0049 cost= 0.015411067\nEpoch: 0050 cost= 0.015130163\nEpoch: 0051 cost= 0.018912251\nEpoch: 0052 cost= 0.031489589\nEpoch: 0053 cost= 0.016441514\nEpoch: 0054 cost= 0.015934747\nEpoch: 0055 cost= 0.015185592\nEpoch: 0056 cost= 0.014962219\nEpoch: 0057 cost= 0.014789902\nEpoch: 0058 cost= 0.014183648\nEpoch: 0059 cost= 0.014771792\nEpoch: 0060 cost= 0.013984746\nEpoch: 0061 cost= 0.013986725\nEpoch: 0062 cost= 0.013990105\nEpoch: 0063 cost= 0.013991248\nEpoch: 0064 cost= 0.013991301\nEpoch: 0065 cost= 0.014417812\nEpoch: 0066 cost= 0.015127911\nEpoch: 0067 cost= 0.014091956\nEpoch: 0068 cost= 0.014594984\nEpoch: 0069 cost= 0.014839828\nEpoch: 0070 cost= 0.013982915\nEpoch: 0071 cost= 0.013986001\nEpoch: 0072 cost= 0.013989394\nEpoch: 0073 cost= 0.026697119\nEpoch: 0074 cost= 0.060450242\nEpoch: 0075 cost= 0.015880147\nEpoch: 0076 cost= 0.015730870\nEpoch: 0077 cost= 0.015402611\nEpoch: 0078 cost= 0.014916952\nEpoch: 0079 cost= 0.014984660\nEpoch: 0080 cost= 0.015820000\nEpoch: 0081 cost= 0.014817713\nEpoch: 0082 cost= 0.014412518\nEpoch: 0083 cost= 0.015078428\nEpoch: 0084 cost= 0.014607639\nEpoch: 0085 cost= 0.014731142\nEpoch: 0086 cost= 0.014768947\nEpoch: 0087 cost= 0.014705300\nEpoch: 0088 cost= 0.042353919\nEpoch: 0089 cost= 0.014150210\nEpoch: 0090 cost= 0.014066173\nEpoch: 0091 cost= 0.014510406\nEpoch: 0092 cost= 0.014101755\nEpoch: 0093 cost= 0.014870159\nEpoch: 0094 cost= 0.013983156\nEpoch: 0095 cost= 0.013988206\nEpoch: 0096 cost= 0.013990270\nEpoch: 0097 cost= 0.013990550\nEpoch: 0098 cost= 0.013990402\nEpoch: 0099 cost= 0.021223181\nEpoch: 0100 cost= 0.014299056\n\nOptimization Finished:\n------------------------------\n\nModel saved in path: E:\\Karbala\\CreditCard/model.ckpt\nAccuracy: 0.998736\ny_predicted length: 85443\n1    85443\nName: 0, dtype: int64\n\ny_true labels length: 85443\n1    85335\n0      108\nName: 0, dtype: int64\nRecall 1.0\n\nconfusion_matrix:\n\n[[    0   108]\n [    0 85335]]\n\nTime taken: 0:02:10.352000\n</code></pre>\n"}, {"tags": ["python", "pip", "setup.py"], "answers": [{"comments": [{"owner": {"reputation": 3796, "user_id": 4661625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd0caf54e0766c83f04f51f881303b?s=128&d=identicon&r=PG&f=1", "display_name": "Bumsik Kim", "link": "https://stackoverflow.com/users/4661625/bumsik-kim"}, "edited": false, "score": 0, "creation_date": 1527129760, "post_id": 50498847, "comment_id": 88012965, "body": "I didn&#39;t know there is <code>pip install .</code>, that works well thank you. BTW I&#39;m using Arch linux and <code>pip</code> seems to install the files at the correct system root path, but on Ubuntu 18.04 they are placed as you described. Very interesting."}, {"owner": {"reputation": 651, "user_id": 534674, "user_type": "registered", "profile_image": "https://graph.facebook.com/3229476579393/picture?type=large", "display_name": "Jake Stevens-Haas", "link": "https://stackoverflow.com/users/534674/jake-stevens-haas"}, "edited": false, "score": 0, "creation_date": 1586194881, "post_id": 50498847, "comment_id": 108033670, "body": "<code>pip uninstall &lt;pkgname&gt;</code> gives you the helpful <code>Would not remove (might be manually added): &lt;list of files&gt;</code>  So pip recognizes that you might want to delete those.  Are you saying that it doesn&#39;t have an option to do so?"}], "tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": true, "score": 1, "last_activity_date": 1527118250, "creation_date": 1527118250, "answer_id": 50498847, "question_id": 50498476, "link": "https://stackoverflow.com/questions/50498476/removing-files-in-setup-py-data-files-using-pip/50498847#50498847", "title": "Removing files in setup.py data_files using pip", "body": "<p>You can't.  <code>python setup.py install</code> causes your package to be installed using setuptools, not pip, and as a result pip doesn't know enough about the package to be able to uninstall it fully.  Not even setuptools can uninstall your package, as there is no <code>python setup.py uninstall</code> command!  If you want pip to be able to uninstall your package correctly, you need to install with pip (<code>pip install .</code>), but that comes with the drawback that <code>data_files</code> files will be placed next to the installed package rather than at system root (e.g., <code>myapp.desktop</code> will end up someplace like <code>~/.local/lib/python2.7/site-packages/usr/share/applications/myapp.desktop</code>).</p>\n"}], "owner": {"reputation": 3796, "user_id": 4661625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3cd0caf54e0766c83f04f51f881303b?s=128&d=identicon&r=PG&f=1", "display_name": "Bumsik Kim", "link": "https://stackoverflow.com/users/4661625/bumsik-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 50498847, "answer_count": 1, "score": 1, "last_activity_date": 1527118250, "creation_date": 1527115320, "question_id": 50498476, "link": "https://stackoverflow.com/questions/50498476/removing-files-in-setup-py-data-files-using-pip", "title": "Removing files in setup.py data_files using pip", "body": "<p>I am writing <code>setup.py</code> for my own Linux application. I added a desktop entry file, <code>myapp.desktop</code> into <code>/usr/share/applications</code>. Here is my <code>setup.py</code>:</p>\n\n<pre><code>setup(...,\n      data_files=[\n           ('/usr/share/applications', ['myapp.desktop']),\n           ('/usr/share/pixmaps', ['myapp.png'])]\n     )\n</code></pre>\n\n<p>I also included <code>myapp.desktop</code> and <code>myapp.png</code> in <code>MANIFEST.in</code>:</p>\n\n<pre><code>include myapp.png\ninclude myapp.desktop\n</code></pre>\n\n<p>So I can install the app using <code>python setup.py install</code> and it also install <code>data_files</code> in the correct path.</p>\n\n<p>The problem is, when I uninstall the app using <code>pip uninstall myapp</code>, pip dosen't remove files in <code>data_files</code>, to say, <code>/usr/share/applications/myapp.desktop</code> and <code>/usr/share/pixmaps/myapp.png</code>. I need to remove them myself.</p>\n\n<p>How can I remove these files automatically using <code>pip uninstall</code>?</p>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1527115297, "post_id": 50498464, "comment_id": 88009776, "body": "Any error message or traceback?"}, {"owner": {"reputation": 137, "user_id": 4883227, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/--uwG_ruBDAo/AAAAAAAAAAI/AAAAAAAAABE/Z4rwQbyvack/photo.jpg?sz=128", "display_name": "Ian Ling", "link": "https://stackoverflow.com/users/4883227/ian-ling"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1527115309, "post_id": 50498464, "comment_id": 88009778, "body": "Sorry, added the error."}, {"owner": {"reputation": 22043, "user_id": 87973, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abc7768058e25c1382df18414db72a10?s=128&d=identicon&r=PG", "display_name": "Jonas Bystr&#246;m", "link": "https://stackoverflow.com/users/87973/jonas-bystr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1527115781, "post_id": 50498464, "comment_id": 88009887, "body": "Works for me when using <code>app.run()</code> on Python 3.5.1 and Flask 0.12.2. What other frameworks/versions are you on?"}, {"owner": {"reputation": 743, "user_id": 2702285, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f70964e6f86aded5cd6d3e91ec97d41e?s=128&d=identicon&r=PG&f=1", "display_name": "Timothy Lombard", "link": "https://stackoverflow.com/users/2702285/timothy-lombard"}, "edited": false, "score": 0, "creation_date": 1527115848, "post_id": 50498464, "comment_id": 88009906, "body": "what happens if you add an argument as in:   def my_page(my_string):"}, {"owner": {"reputation": 45723, "user_id": 18243, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/607cfd4a5b41fe6c886c978128b9c03e?s=128&d=identicon&r=PG", "display_name": "Jean-Paul Calderone", "link": "https://stackoverflow.com/users/18243/jean-paul-calderone"}, "edited": false, "score": 0, "creation_date": 1527116000, "post_id": 50498464, "comment_id": 88009934, "body": "How are you running this?"}, {"owner": {"reputation": 137, "user_id": 4883227, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/--uwG_ruBDAo/AAAAAAAAAAI/AAAAAAAAABE/Z4rwQbyvack/photo.jpg?sz=128", "display_name": "Ian Ling", "link": "https://stackoverflow.com/users/4883227/ian-ling"}, "reply_to_user": {"reputation": 743, "user_id": 2702285, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f70964e6f86aded5cd6d3e91ec97d41e?s=128&d=identicon&r=PG&f=1", "display_name": "Timothy Lombard", "link": "https://stackoverflow.com/users/2702285/timothy-lombard"}, "edited": false, "score": 0, "creation_date": 1527116012, "post_id": 50498464, "comment_id": 88009938, "body": "@Timothy Lombard: You can&#39;t just add in arguments like that in Flask, that is not valid syntax."}, {"owner": {"reputation": 137, "user_id": 4883227, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/--uwG_ruBDAo/AAAAAAAAAAI/AAAAAAAAABE/Z4rwQbyvack/photo.jpg?sz=128", "display_name": "Ian Ling", "link": "https://stackoverflow.com/users/4883227/ian-ling"}, "reply_to_user": {"reputation": 45723, "user_id": 18243, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/607cfd4a5b41fe6c886c978128b9c03e?s=128&d=identicon&r=PG", "display_name": "Jean-Paul Calderone", "link": "https://stackoverflow.com/users/18243/jean-paul-calderone"}, "edited": false, "score": 0, "creation_date": 1527116050, "post_id": 50498464, "comment_id": 88009947, "body": "@Jean-PaulCalderone using the &quot;flask run&quot; command, as specified in the Flask quickstart documentation. It is working perfectly fine besides this one issue."}, {"owner": {"reputation": 137, "user_id": 4883227, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/--uwG_ruBDAo/AAAAAAAAAAI/AAAAAAAAABE/Z4rwQbyvack/photo.jpg?sz=128", "display_name": "Ian Ling", "link": "https://stackoverflow.com/users/4883227/ian-ling"}, "edited": false, "score": 0, "creation_date": 1527116163, "post_id": 50498464, "comment_id": 88009974, "body": "Added version information to the top of the question."}, {"owner": {"reputation": 45723, "user_id": 18243, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/607cfd4a5b41fe6c886c978128b9c03e?s=128&d=identicon&r=PG", "display_name": "Jean-Paul Calderone", "link": "https://stackoverflow.com/users/18243/jean-paul-calderone"}, "edited": false, "score": 0, "creation_date": 1527116423, "post_id": 50498464, "comment_id": 88010034, "body": "Hm.  Failed to reproduce.  I think you&#39;re probably not running the code you <i>think</i> you&#39;re running.  The <code>UnboundLocalError</code> you mentioned will only happen if you have <code>my_string = ...</code> - which the code you included in your question does not.  So, something else is running."}, {"owner": {"reputation": 9341, "user_id": 1377021, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ba1fbbd03fa9766d8ef36d54b25c3569?s=128&d=identicon&r=PG", "display_name": "nathancahill", "link": "https://stackoverflow.com/users/1377021/nathancahill"}, "edited": false, "score": 0, "creation_date": 1527116639, "post_id": 50498464, "comment_id": 88010083, "body": "There&#39;s definitely code missing. Post your full code please."}, {"owner": {"reputation": 7900, "user_id": 2259934, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/lqiMo.jpg?s=128&g=1", "display_name": "Paul Becotte", "link": "https://stackoverflow.com/users/2259934/paul-becotte"}, "edited": false, "score": 0, "creation_date": 1527122541, "post_id": 50498464, "comment_id": 88011416, "body": "and more of the traceback while you&#39;re at it"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 4883227, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/--uwG_ruBDAo/AAAAAAAAAAI/AAAAAAAAABE/Z4rwQbyvack/photo.jpg?sz=128", "display_name": "Ian Ling", "link": "https://stackoverflow.com/users/4883227/ian-ling"}, "edited": false, "score": 0, "creation_date": 1527115970, "post_id": 50498559, "comment_id": 88009928, "body": "In Python, global variables can be accessed without using the <code>global my_string</code> syntax, as I demonstrated with the first code snippet in my question. I am wondering why this stops working when using Flask."}, {"owner": {"reputation": 45723, "user_id": 18243, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/607cfd4a5b41fe6c886c978128b9c03e?s=128&d=identicon&r=PG", "display_name": "Jean-Paul Calderone", "link": "https://stackoverflow.com/users/18243/jean-paul-calderone"}, "edited": false, "score": 0, "creation_date": 1527115982, "post_id": 50498559, "comment_id": 88009932, "body": "<code>global ...</code> is to declare you want to write to a global.  It is not necessary for reading from a global."}], "tags": [], "owner": {"reputation": 1, "user_id": 9482822, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K1JIia8kUxI/AAAAAAAAAAI/AAAAAAAAABE/clvDu65ZPU8/photo.jpg?sz=128", "display_name": "strikingLoo", "link": "https://stackoverflow.com/users/9482822/strikingloo"}, "is_accepted": false, "score": -2, "last_activity_date": 1527115835, "creation_date": 1527115835, "answer_id": 50498559, "question_id": 50498464, "link": "https://stackoverflow.com/questions/50498464/python-cannot-return-a-global-variable-in-flask/50498559#50498559", "title": "python - Cannot return a global variable in Flask", "body": "<p>Try:</p>\n\n<pre><code>    my_string = \"Hello!\"\n\n    @app.route('/')\n\n    def my_page():\n        global my_string\n        return my_string\n</code></pre>\n\n<p>since you're using a global variable, the program needs to know the variable exists outside.</p>\n"}], "owner": {"reputation": 137, "user_id": 4883227, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/--uwG_ruBDAo/AAAAAAAAAAI/AAAAAAAAABE/Z4rwQbyvack/photo.jpg?sz=128", "display_name": "Ian Ling", "link": "https://stackoverflow.com/users/4883227/ian-ling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1527116150, "creation_date": 1527115232, "last_edit_date": 1527116150, "question_id": 50498464, "link": "https://stackoverflow.com/questions/50498464/python-cannot-return-a-global-variable-in-flask", "title": "python - Cannot return a global variable in Flask", "body": "<p>In Python (v3.6.4, Flask v1.0.2, Windows 10 x64), I am able to return a global variable without using the <code>global my_variable</code> syntax:</p>\n\n<pre><code>my_string = \"Hello!\"\ndef my_function():\n    return my_string\n</code></pre>\n\n<p>However, trying to do something similar when using Flask fails.</p>\n\n<pre><code>from flask import Flask\napp = Flask(__name__)\n\nmy_string = \"Hello!\"\n\n@app.route('/')\ndef my_page():\n    return my_string\n</code></pre>\n\n<p>This gives the error: \"UnboundLocalError: local variable 'my_string' referenced before assignment\"</p>\n\n<p>Why does this stop working when using Flask?</p>\n"}, {"tags": ["python", "arrays", "python-3.x", "amazon-rekognition"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 9147327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79013f8942e29d8b5ef2f603e2f3ee12?s=128&d=identicon&r=PG&f=1", "display_name": "db46", "link": "https://stackoverflow.com/users/9147327/db46"}, "edited": false, "score": 0, "creation_date": 1527255717, "post_id": 50527504, "comment_id": 88073007, "body": "Thank you Mausam. For my example what do i need to replace for \u2018newtest.json\u2019?"}, {"owner": {"reputation": 794, "user_id": 8144695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WGnre.jpg?s=128&g=1", "display_name": "Mausam Sharma", "link": "https://stackoverflow.com/users/8144695/mausam-sharma"}, "reply_to_user": {"reputation": 63, "user_id": 9147327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79013f8942e29d8b5ef2f603e2f3ee12?s=128&d=identicon&r=PG&f=1", "display_name": "db46", "link": "https://stackoverflow.com/users/9147327/db46"}, "edited": false, "score": 0, "creation_date": 1527256340, "post_id": 50527504, "comment_id": 88073394, "body": "I think you are storing your result from api call in <b>response</b>  variable, so just ignore 3 and 4th lines, and replace <b>data</b> with response everywhere.  example, change line 6 to <b>length=len(response[&#39;Persons&#39;])</b>   or you can just change your response variable to <b>data</b> variable , ignore 3,4  line and enjoy rest of code"}, {"owner": {"reputation": 63, "user_id": 9147327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79013f8942e29d8b5ef2f603e2f3ee12?s=128&d=identicon&r=PG&f=1", "display_name": "db46", "link": "https://stackoverflow.com/users/9147327/db46"}, "edited": false, "score": 0, "creation_date": 1527256548, "post_id": 50527504, "comment_id": 88073507, "body": "Perfection. Thank you sir!"}, {"owner": {"reputation": 63, "user_id": 9147327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79013f8942e29d8b5ef2f603e2f3ee12?s=128&d=identicon&r=PG&f=1", "display_name": "db46", "link": "https://stackoverflow.com/users/9147327/db46"}, "edited": false, "score": 0, "creation_date": 1527438243, "post_id": 50527504, "comment_id": 88119036, "body": "Hi Mausam. Sorry for the follow up - just a quick question. How can I find the length of FaceMatches outside the loop?"}, {"owner": {"reputation": 794, "user_id": 8144695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WGnre.jpg?s=128&g=1", "display_name": "Mausam Sharma", "link": "https://stackoverflow.com/users/8144695/mausam-sharma"}, "reply_to_user": {"reputation": 63, "user_id": 9147327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79013f8942e29d8b5ef2f603e2f3ee12?s=128&d=identicon&r=PG&f=1", "display_name": "db46", "link": "https://stackoverflow.com/users/9147327/db46"}, "edited": false, "score": 0, "creation_date": 1527523721, "post_id": 50527504, "comment_id": 88149969, "body": "can you clarify more , what are you asking about ?"}, {"owner": {"reputation": 63, "user_id": 9147327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79013f8942e29d8b5ef2f603e2f3ee12?s=128&d=identicon&r=PG&f=1", "display_name": "db46", "link": "https://stackoverflow.com/users/9147327/db46"}, "edited": false, "score": 0, "creation_date": 1527524704, "post_id": 50527504, "comment_id": 88150375, "body": "Sure. So in the previous post where you got the element at &#39;[&#39;Persons&#39;][i][&#39;FaceMatches&#39;][0][&#39;Face&#39;][&#39;FaceId&#39;])&#39;, for each person element, I need to be able to see if there was a Face Match found. That needs to happen outside the for loop, otherwise the loop fails when no matches are found. Checking to see if there is FaceMatches allows me to add an IF condition before I insert results to database. So is there something similar to the length check of Persons array that can be done for FaceMatches before beginning the loop. Does that help clarify?"}, {"owner": {"reputation": 794, "user_id": 8144695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WGnre.jpg?s=128&g=1", "display_name": "Mausam Sharma", "link": "https://stackoverflow.com/users/8144695/mausam-sharma"}, "reply_to_user": {"reputation": 63, "user_id": 9147327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79013f8942e29d8b5ef2f603e2f3ee12?s=128&d=identicon&r=PG&f=1", "display_name": "db46", "link": "https://stackoverflow.com/users/9147327/db46"}, "edited": false, "score": 0, "creation_date": 1527525129, "post_id": 50527504, "comment_id": 88150549, "body": "What you want to do is already happening in the loop , the results are only generated if and only if there is a facematch for a person , if there is no facematch in a particular iteration , then it produces an exception which i have handled with using <b>continue</b> statement and skipping that iteration, what you can do is just handle the exception as you want to do ;)"}, {"owner": {"reputation": 794, "user_id": 8144695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WGnre.jpg?s=128&g=1", "display_name": "Mausam Sharma", "link": "https://stackoverflow.com/users/8144695/mausam-sharma"}, "reply_to_user": {"reputation": 63, "user_id": 9147327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79013f8942e29d8b5ef2f603e2f3ee12?s=128&d=identicon&r=PG&f=1", "display_name": "db46", "link": "https://stackoverflow.com/users/9147327/db46"}, "edited": false, "score": 0, "creation_date": 1527525283, "post_id": 50527504, "comment_id": 88150611, "body": "By the way , the length can be checked in this way for Facematches , <b>length=len(data[&#39;Persons&#39;][i][&#39;FaceMatches&#39;])</b>  where <b>i</b> represents a particular person"}, {"owner": {"reputation": 63, "user_id": 9147327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79013f8942e29d8b5ef2f603e2f3ee12?s=128&d=identicon&r=PG&f=1", "display_name": "db46", "link": "https://stackoverflow.com/users/9147327/db46"}, "edited": false, "score": 0, "creation_date": 1527525331, "post_id": 50527504, "comment_id": 88150626, "body": "Thanks Mausam, you are very helpful."}, {"owner": {"reputation": 63, "user_id": 9147327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79013f8942e29d8b5ef2f603e2f3ee12?s=128&d=identicon&r=PG&f=1", "display_name": "db46", "link": "https://stackoverflow.com/users/9147327/db46"}, "edited": false, "score": 0, "creation_date": 1527525879, "post_id": 50527504, "comment_id": 88150834, "body": "just one thing, using the  <b>length=len(data[&#39;Persons&#39;][i][&#39;FaceMatches&#39;])</b> where <b>i</b> represents a particular person - this will only work in the same for loop right?"}, {"owner": {"reputation": 63, "user_id": 9147327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79013f8942e29d8b5ef2f603e2f3ee12?s=128&d=identicon&r=PG&f=1", "display_name": "db46", "link": "https://stackoverflow.com/users/9147327/db46"}, "edited": false, "score": 0, "creation_date": 1527528713, "post_id": 50527504, "comment_id": 88151995, "body": "but while its in the loop, it will add a record for exception where it finds no face matches - hence why I need to do it outside the loop."}, {"owner": {"reputation": 794, "user_id": 8144695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WGnre.jpg?s=128&g=1", "display_name": "Mausam Sharma", "link": "https://stackoverflow.com/users/8144695/mausam-sharma"}, "reply_to_user": {"reputation": 63, "user_id": 9147327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79013f8942e29d8b5ef2f603e2f3ee12?s=128&d=identicon&r=PG&f=1", "display_name": "db46", "link": "https://stackoverflow.com/users/9147327/db46"}, "edited": false, "score": 0, "creation_date": 1527528934, "post_id": 50527504, "comment_id": 88152102, "body": "can you show me your code ? then only i can suggest further"}, {"owner": {"reputation": 63, "user_id": 9147327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79013f8942e29d8b5ef2f603e2f3ee12?s=128&d=identicon&r=PG&f=1", "display_name": "db46", "link": "https://stackoverflow.com/users/9147327/db46"}, "edited": false, "score": 0, "creation_date": 1527529493, "post_id": 50527504, "comment_id": 88152331, "body": "Too long for comments, please see codeshare link - formatting is off so please ignore that :-)  <a href=\"https://codeshare.io/2KQoOz\" rel=\"nofollow noreferrer\">codeshare link is here</a>"}], "tags": [], "owner": {"reputation": 794, "user_id": 8144695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WGnre.jpg?s=128&g=1", "display_name": "Mausam Sharma", "link": "https://stackoverflow.com/users/8144695/mausam-sharma"}, "is_accepted": true, "score": 0, "last_activity_date": 1527245393, "creation_date": 1527245393, "answer_id": 50527504, "question_id": 50498421, "link": "https://stackoverflow.com/questions/50498421/parsing-rekognition-get-face-search-results/50527504#50527504", "title": "Parsing rekognition get_face_search results", "body": "<p>According to your needs , you have two FaceMatch objects in your response and you can extract required info in this way :</p>\n\n<pre><code>import json \n\nwith open('newtest.json') as f:\n    data = json.load(f)\n\nlength =len(data['Persons'])\n\n\nfor i in range(0,length):\n    try:\n        print(data['Persons'][i]['FaceMatches'][0]['Similarity'])\n        print(data['Persons'][i]['FaceMatches'][0]['Face']['FaceId'])\n        print(data['Persons'][i]['Timestamp'])\n    except:\n        continue\n</code></pre>\n\n<p>I have taken your json object in <strong>data</strong> variable and i have ignored <strong>timestamps</strong> where there is no corresponding <strong>facematch</strong>, if you wish you can extract then the same way</p>\n"}], "owner": {"reputation": 63, "user_id": 9147327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79013f8942e29d8b5ef2f603e2f3ee12?s=128&d=identicon&r=PG&f=1", "display_name": "db46", "link": "https://stackoverflow.com/users/9147327/db46"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 50527504, "answer_count": 1, "score": 0, "last_activity_date": 1527245393, "creation_date": 1527114944, "last_edit_date": 1527117105, "question_id": 50498421, "link": "https://stackoverflow.com/questions/50498421/parsing-rekognition-get-face-search-results", "title": "Parsing rekognition get_face_search results", "body": "<p>I am trying to parse out Face Matches from the results of the get_face_search() AWS Rekognition API. It outputs an array of Persons, within that array is another array of FaceMatches for a given person and timestamp. I want to take information from the FaceMatches array and be able to loop through the array of Face Matches. </p>\n\n<p>I have done something similar before for single arrays and looped successfully, but I am missing something trivial here perhaps.</p>\n\n<p>Here is output from API:</p>\n\n<pre><code>    Response:\n{\n  \"JobStatus\": \"SUCCEEDED\",\n  \"NextToken\": \"U5EdbZ+86xseDBfDlQ2u8QhSVzbdodDOmX/gSbwIgeO90l2BKWvJEscjUDmA6GFDCSSfpKA4\",\n  \"VideoMetadata\": {\n    \"Codec\": \"h264\",\n    \"DurationMillis\": 6761,\n    \"Format\": \"QuickTime / MOV\",\n    \"FrameRate\": 30.022184371948242,\n    \"FrameHeight\": 568,\n    \"FrameWidth\": 320\n  },\n  \"Persons\": [\n    {\n      \"Timestamp\": 0,\n      \"Person\": {\n        \"Index\": 0,\n        \"BoundingBox\": {\n          \"Width\": 0.987500011920929,\n          \"Height\": 0.7764084339141846,\n          \"Left\": 0.0031250000465661287,\n          \"Top\": 0.2042253464460373\n        },\n        \"Face\": {\n          \"BoundingBox\": {\n            \"Width\": 0.6778846383094788,\n            \"Height\": 0.3819068372249603,\n            \"Left\": 0.10096154361963272,\n            \"Top\": 0.2654387652873993\n          },\n          \"Landmarks\": [\n            {\n              \"Type\": \"eyeLeft\",\n              \"X\": 0.33232420682907104,\n              \"Y\": 0.4194057583808899\n            },\n            {\n              \"Type\": \"eyeRight\",\n              \"X\": 0.5422032475471497,\n              \"Y\": 0.41616082191467285\n            },\n            {\n              \"Type\": \"nose\",\n              \"X\": 0.45633792877197266,\n              \"Y\": 0.4843473732471466\n            },\n            {\n              \"Type\": \"mouthLeft\",\n              \"X\": 0.37002310156822205,\n              \"Y\": 0.567118763923645\n            },\n            {\n              \"Type\": \"mouthRight\",\n              \"X\": 0.5330674052238464,\n              \"Y\": 0.5631639361381531\n            }\n          ],\n          \"Pose\": {\n            \"Roll\": -2.2475271224975586,\n            \"Yaw\": 4.371307373046875,\n            \"Pitch\": 6.83940315246582\n          },\n          \"Quality\": {\n            \"Brightness\": 40.40004348754883,\n            \"Sharpness\": 99.95819854736328\n          },\n          \"Confidence\": 99.87971496582031\n        }\n      },\n      \"FaceMatches\": [\n        {\n          \"Similarity\": 99.81229400634766,\n          \"Face\": {\n            \"FaceId\": \"4699a1eb-9f6e-415d-8716-eef141d23433a\",\n            \"BoundingBox\": {\n              \"Width\": 0.6262923432480737,\n              \"Height\": 0.46972032423490747,\n              \"Left\": 0.130435005324523403604,\n              \"Top\": 0.13354002343240603\n            },\n            \"ImageId\": \"1ac790eb-615a-111f-44aa-4017c3c315ad\",\n            \"Confidence\": 99.19400024414062\n          }\n        }\n      ]\n    },\n    {\n      \"Timestamp\": 66,\n      \"Person\": {\n        \"Index\": 0,\n        \"BoundingBox\": {\n          \"Width\": 0.981249988079071,\n          \"Height\": 0.7764084339141846,\n          \"Left\": 0.0062500000931322575,\n          \"Top\": 0.2042253464460373\n        }\n      }\n    },\n    {\n      \"Timestamp\": 133,\n      \"Person\": {\n        \"Index\": 0,\n        \"BoundingBox\": {\n          \"Width\": 0.9781249761581421,\n          \"Height\": 0.783450722694397,\n          \"Left\": 0.0062500000931322575,\n          \"Top\": 0.19894365966320038\n        }\n      }\n    },\n    {\n      \"Timestamp\": 199,\n      \"Person\": {\n        \"Index\": 0,\n        \"BoundingBox\": {\n          \"Width\": 0.981249988079071,\n          \"Height\": 0.783450722694397,\n          \"Left\": 0.0031250000465661287,\n          \"Top\": 0.19894365966320038\n        },\n        \"Face\": {\n          \"BoundingBox\": {\n            \"Width\": 0.6706730723381042,\n            \"Height\": 0.3778440058231354,\n            \"Left\": 0.10817307233810425,\n            \"Top\": 0.26679307222366333\n          },\n          \"Landmarks\": [\n            {\n              \"Type\": \"eyeLeft\",\n              \"X\": 0.33244985342025757,\n              \"Y\": 0.41591548919677734\n            },\n            {\n              \"Type\": \"eyeRight\",\n              \"X\": 0.5446155667304993,\n              \"Y\": 0.41204410791397095\n            },\n            {\n              \"Type\": \"nose\",\n              \"X\": 0.4586191177368164,\n              \"Y\": 0.479543000459671\n            },\n            {\n              \"Type\": \"mouthLeft\",\n              \"X\": 0.37614554166793823,\n              \"Y\": 0.5639738440513611\n            },\n            {\n              \"Type\": \"mouthRight\",\n              \"X\": 0.5334802865982056,\n              \"Y\": 0.5592300891876221\n            }\n          ],\n          \"Pose\": {\n            \"Roll\": -2.4899401664733887,\n            \"Yaw\": 3.7596628665924072,\n            \"Pitch\": 6.3544135093688965\n          },\n          \"Quality\": {\n            \"Brightness\": 40.46360778808594,\n            \"Sharpness\": 99.95819854736328\n          },\n          \"Confidence\": 99.89802551269531\n        }\n      },\n      \"FaceMatches\": [\n        {\n          \"Similarity\": 99.80543518066406,\n          \"Face\": {\n            \"FaceId\": \"4699a1eb-9f6e-415d-8716-eef141d9223a\",\n            \"BoundingBox\": {\n              \"Width\": 0.626294234234737,\n              \"Height\": 0.469234234890747,\n              \"Left\": 0.130435002334234604,\n              \"Top\": 0.13354023423449180603\n            },\n            \"ImageId\": \"1ac790eb-615a-111f-44aa-4017c3c315ad\",\n            \"Confidence\": 99.19400024414062\n          }\n        }\n      ]\n    },\n    {\n      \"Timestamp\": 266,\n      \"Person\": {\n        \"Index\": 0,\n        \"BoundingBox\": {\n          \"Width\": 0.984375,\n          \"Height\": 0.7852112650871277,\n          \"Left\": 0,\n          \"Top\": 0.19718310236930847\n        }\n      }\n    }\n  ],\n</code></pre>\n\n<p>I have isolated the timestamps (just testing my approach) using the following:</p>\n\n<pre><code>timestamps = [m['Timestamp'] for m in response['Persons']]\nOutput is this, as expected - [0, 66, 133, 199, 266]\n</code></pre>\n\n<p>However, when I try the same thing with FaceMatches, I get an error.</p>\n\n<pre><code>[0, 66, 133, 199, 266]\nlist indices must be integers or slices, not str: TypeError\nTraceback (most recent call last):\n  File \"/var/task/lambda_function.py\", line 40, in lambda_handler\n    matches = [m['FaceMatches']['Face']['FaceId'] for m in response['Persons']]\n  File \"/var/task/lambda_function.py\", line 40, in &lt;listcomp&gt;\n    matches = [m['FaceMatches']['Face']['FaceId'] for m in response['Persons']]\nTypeError: list indices must be integers or slices, not str\n</code></pre>\n\n<p>What I need to end up with is for each face that is matched:</p>\n\n<pre><code>Timestamp\nFaceID\nSimilarity\n</code></pre>\n\n<p>Can anybody shed some light on this for me?</p>\n"}, {"tags": ["python", "pandas", "machine-learning", "time-series", "statsmodels"], "comments": [{"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1527115464, "post_id": 50498387, "comment_id": 88009824, "body": "Please provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. There is a particularly helpful guide for how to create such an example for a pandas question, <a href=\"https://stackoverflow.com/a/32536193/7480990\">here</a>."}, {"owner": {"reputation": 11, "user_id": 4382675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3797fd0003b87fe85862648eae2e9453?s=128&d=identicon&r=PG&f=1", "display_name": "dj007", "link": "https://stackoverflow.com/users/4382675/dj007"}, "reply_to_user": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1527116914, "post_id": 50498387, "comment_id": 88010156, "body": "@tobsecret I hope this is better! Thank you"}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1527117797, "post_id": 50498387, "comment_id": 88010379, "body": "Can you please make it copy-pasteable? i.e. use df.to_dict() in your console and copy it so it looks something like this: <code>d = pd.DataFrame.from_dict({&#39;your&#39;:&#39;dictionary&#39;, &#39;goes&#39;:&#39;here&#39;})</code>."}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1527118145, "post_id": 50498387, "comment_id": 88010453, "body": "Also, this may be a naive question but isn&#39;t it expected that you do not get residuals and trend for the beginning and end of your time period as an effect of the window size? i.e. you do not get those values at the beginning and end of your time series for the length of one window size."}, {"owner": {"reputation": 11, "user_id": 4382675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3797fd0003b87fe85862648eae2e9453?s=128&d=identicon&r=PG&f=1", "display_name": "dj007", "link": "https://stackoverflow.com/users/4382675/dj007"}, "reply_to_user": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1527118508, "post_id": 50498387, "comment_id": 88010563, "body": "Yes it is, I&#39;m checking after 156 values, and still get a NA."}, {"owner": {"reputation": 2014, "user_id": 7480990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4d77695a75bd92bb2da36de7ae7d917?s=128&d=identicon&r=PG&f=1", "display_name": "tobsecret", "link": "https://stackoverflow.com/users/7480990/tobsecret"}, "edited": false, "score": 0, "creation_date": 1527176837, "post_id": 50498387, "comment_id": 88039264, "body": "Are there any non-nan values in s.resid? You can check by using <code>s.resid.dropna()</code>."}], "owner": {"reputation": 11, "user_id": 4382675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3797fd0003b87fe85862648eae2e9453?s=128&d=identicon&r=PG&f=1", "display_name": "dj007", "link": "https://stackoverflow.com/users/4382675/dj007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 640, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1527118463, "creation_date": 1527114649, "last_edit_date": 1527118463, "question_id": 50498387, "link": "https://stackoverflow.com/questions/50498387/stl-decomposition-python-graph-is-plotted-values-are-n-a", "title": "STL decomposition Python - graph is plotted, values are N/A", "body": "<p>I have a time series with 1hr time interval, which I'm trying to decompose - with seasonality of a week.</p>\n\n<pre><code>Time                    Total_request\n2018-04-09 22:00:00     1019656 \n2018-04-09 23:00:00     961867  \n2018-04-10 00:00:00     881291  \n2018-04-10 01:00:00     892974  \n\nimport pandas as pd\nimport statsmodels as sm\n\nd.reset_index(inplace=True)\nd['env_time'] = pd.to_datetime(d['env_time'])\nd = d.set_index('env_time')\ns=sm.tsa.seasonal_decompose(d.total_request, freq = 24*7)\n</code></pre>\n\n<p>This gives me a resulting graphs of Seasonal, Trend, Residue - <a href=\"https://imgur.com/a/CjhWphO\" rel=\"nofollow noreferrer\">https://imgur.com/a/CjhWphO</a></p>\n\n<p>But on trying to extract the residual values using s.resid I get this - </p>\n\n<pre><code>env_time\n2018-04-09 20:00:00   NaN\n2018-04-09 21:00:00   NaN\n2018-04-09 22:00:00   NaN\n</code></pre>\n\n<p>I get values when I modify it to a lower frequency. What's strange is why I can't derive the values, when it's being plotted. I have found similar questions being asked, none of the answers were relevant to this case. </p>\n"}, {"tags": ["python", "xml", "elementtree"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1527114122, "post_id": 50498261, "comment_id": 88009449, "body": "What is the value of <code>e</code>  after the execution of the <i>first</i> statement? Is it a <code>None</code> by chance? Also, what is the value of <code>ET.parse(&#39;fileName.xml&#39;)</code>? Is <i>that one</i> a <code>None</code> by chance?"}, {"owner": {"reputation": 842, "user_id": 6394941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-c87IOIWr0QU/AAAAAAAAAAI/AAAAAAAAB-g/i2VM2saO040/photo.jpg?sz=128", "display_name": "Guido Muscioni", "link": "https://stackoverflow.com/users/6394941/guido-muscioni"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1527114230, "post_id": 50498261, "comment_id": 88009484, "body": "@DyZ If i print e after reading the xml I get this: &quot;&lt;Element TrainingCenterDatabase&#39; at 0x0000022AF1469B38&gt;&quot;"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1527114504, "post_id": 50498261, "comment_id": 88009548, "body": "I cannot reproduce your error. I get the printout <code>&lt;Element &#39;Track&#39; at 0x7f7e3712ca48&gt;</code> on the last line of your snippet."}], "owner": {"reputation": 842, "user_id": 6394941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-c87IOIWr0QU/AAAAAAAAAAI/AAAAAAAAB-g/i2VM2saO040/photo.jpg?sz=128", "display_name": "Guido Muscioni", "link": "https://stackoverflow.com/users/6394941/guido-muscioni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527113794, "creation_date": 1527113794, "question_id": 50498261, "link": "https://stackoverflow.com/questions/50498261/get-a-list-of-dictionary-from-an-xml-and-value-of-single-items", "title": "Get a list of dictionary from an XML and value of single items", "body": "<p>I am trying to get information in an XML file. I am trying to do that with ElementTree, however it seems that what I am currently doing breaks the xml structure in python.</p>\n\n<p>Here there is the XML:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;TrainingCenterDatabase&gt;\n    &lt;Activities&gt;\n        &lt;Activity&gt;\n            &lt;Id&gt;2018-05-23&lt;/Id&gt;\n            &lt;Lap&gt;\n                &lt;TotalTimeSeconds&gt;19204.0&lt;/TotalTimeSeconds&gt;\n                &lt;MaximumHeartRateBpm&gt;\n                    &lt;Value&gt;137&lt;/Value&gt;\n                &lt;/MaximumHeartRateBpm&gt;\n                &lt;Track&gt;\n                    &lt;Trackpoint&gt;\n                        &lt;Time&gt;2018-05-23&lt;/Time&gt;\n                        &lt;HeartRateBpm&gt;\n                            &lt;Value&gt;79&lt;/Value&gt;\n                        &lt;/HeartRateBpm&gt;\n                        &lt;SensorState&gt;Present&lt;/SensorState&gt;\n                    &lt;/Trackpoint&gt;\n                    &lt;Trackpoint&gt;\n                        &lt;Time&gt;2018-05-23&lt;/Time&gt;\n                        &lt;HeartRateBpm&gt;\n                            &lt;Value&gt;80&lt;/Value&gt;\n                        &lt;/HeartRateBpm&gt;\n                        &lt;SensorState&gt;Present&lt;/SensorState&gt;\n                    &lt;/Trackpoint&gt;\n                &lt;/Track&gt;\n            &lt;/Lap&gt;            \n        &lt;/Activity&gt;\n    &lt;/Activities&gt;\n&lt;/TrainingCenterDatabase&gt;\n</code></pre>\n\n<p>My really simple code is the following:</p>\n\n<pre><code>e = ET.parse('fileName.xml').getroot()\ne = e.find('./Activities/Activity/Lap/Track')    \nprint(e)\n</code></pre>\n\n<p>This code returns the following error:</p>\n\n<pre><code>AttributeError: 'NoneType' object has no attribute 'iter'\n</code></pre>\n\n<p>I have followed the documentation and some question on stack, as <a href=\"https://stackoverflow.com/questions/1912434/how-do-i-parse-xml-in-python?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">1</a>. My final output would be some variables that contain the one time information as: MaximumHeartRateBpm, TotalTimeSeconds and Id. Moreover I would like to get a list of dictionaries for the Track item with the following structure:</p>\n\n<pre><code>[{\"Time\": val, \"HeartRateBpm\": val, \"SensorState\": val},\n...,\n{\"Time\": val, \"HeartRateBpm\": val, \"SensorState\": val}]\n</code></pre>\n\n<p>I cannot attempt the second one as I am not able to look into the xml.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "scala", "apache-spark"], "answers": [{"tags": [], "owner": {"reputation": 2940, "user_id": 3443998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UYaov.png?s=128&g=1", "display_name": "soote", "link": "https://stackoverflow.com/users/3443998/soote"}, "is_accepted": true, "score": 3, "last_activity_date": 1527176722, "last_edit_date": 1527176722, "creation_date": 1527176186, "answer_id": 50513220, "question_id": 50498260, "link": "https://stackoverflow.com/questions/50498260/change-type-of-complex-array-and-struct-columns-spark/50513220#50513220", "title": "Change type of complex (array and struct) columns spark", "body": "<p>You can cast arbitrarily deep array and struct columns with the cast operator like so:</p>\n\n<pre><code>.withColumn(\"my_array_col\", col(\"my_array_col\")\n    .cast(\"array&lt;struct&lt;col_a: string, col_b: string&gt;&gt;\")\n</code></pre>\n"}], "owner": {"reputation": 2940, "user_id": 3443998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UYaov.png?s=128&g=1", "display_name": "soote", "link": "https://stackoverflow.com/users/3443998/soote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1023, "favorite_count": 0, "accepted_answer_id": 50513220, "answer_count": 1, "score": 0, "last_activity_date": 1527177167, "creation_date": 1527113794, "last_edit_date": 1527177167, "question_id": 50498260, "link": "https://stackoverflow.com/questions/50498260/change-type-of-complex-array-and-struct-columns-spark", "title": "Change type of complex (array and struct) columns spark", "body": "<p>I have a Dataframe with the following schema:</p>\n\n<pre><code>root\n |-- id: long (nullable = true)\n |-- ... (other columns)\n |-- my_array_col: array (nullable = true)\n |    |-- element: struct (containsNull = true)\n |    |    |-- col_a: string (nullable = true)\n |    |    |-- col_b: date (nullable = true)\n</code></pre>\n\n<p>How can I change the type of col_b to a StringType?</p>\n"}, {"tags": ["python", "python-2.7", "pandas", "time-series"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1527117489, "post_id": 50498254, "comment_id": 88010309, "body": "What happens if you just execute <code>df[&#39;t_delta&#39;]=(df[&#39;et_utc&#39;] - df[&#39;ts_utc&#39;]).seconds</code>?"}, {"owner": {"reputation": 2571, "user_id": 3476463, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/102f066d7cd421c7bf6d5611a7d6f161?s=128&d=identicon&r=PG&f=1", "display_name": "user3476463", "link": "https://stackoverflow.com/users/3476463/user3476463"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1527118628, "post_id": 50498254, "comment_id": 88010594, "body": "@wwii thank you for getting back to me.  When I try your suggestion I get the error &quot;AttributeError: &#39;Series&#39; object has no attribute &#39;seconds&#39;&quot;"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1527133595, "post_id": 50498254, "comment_id": 88013801, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/26456825/convert-timedelta64ns-column-to-seconds-in-python-pandas-dataframe\">Convert timedelta64&#91;ns&#93; column to seconds in Python Pandas DataFrame</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21903, "user_id": 9274732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2713715b9156a66c16d7c1331528dce8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben.T", "link": "https://stackoverflow.com/users/9274732/ben-t"}, "is_accepted": true, "score": 1, "last_activity_date": 1527124878, "creation_date": 1527124878, "answer_id": 50499579, "question_id": 50498254, "link": "https://stackoverflow.com/questions/50498254/pandas-timedelta-error-with-datetime64ns-utc-fields/50499579#50499579", "title": "Pandas Timedelta error with datetime64[ns, UTC] Fields", "body": "<p>If you want to get the timedelta in seconds,according to the <a href=\"https://pandas.pydata.org/pandas-docs/stable/timedeltas.html#frequency-conversion\" rel=\"nofollow noreferrer\">official documentation</a>, you can do:</p>\n\n<pre><code>df['t_delta']=(df['et_utc'] - df['ts_utc']).astype('timedelta64[s]')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "reply_to_user": {"reputation": 21903, "user_id": 9274732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2713715b9156a66c16d7c1331528dce8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben.T", "link": "https://stackoverflow.com/users/9274732/ben-t"}, "edited": false, "score": 1, "creation_date": 1527182701, "post_id": 50500366, "comment_id": 88042443, "body": "@Ben.T - the link in your answer also shows true division by a <i><code>timedelta64[s]</code></i>"}], "tags": [], "owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "is_accepted": false, "score": 2, "last_activity_date": 1527132716, "last_edit_date": 1527132716, "creation_date": 1527131632, "answer_id": 50500366, "question_id": 50498254, "link": "https://stackoverflow.com/questions/50498254/pandas-timedelta-error-with-datetime64ns-utc-fields/50500366#50500366", "title": "Pandas Timedelta error with datetime64[ns, UTC] Fields", "body": "<p>Use the <a href=\"https://pandas.pydata.org/pandas-docs/stable/basics.html?highlight=accessor#dt-accessor\" rel=\"nofollow noreferrer\">Series <code>dt</code> accessor</a> to get access to the methods and attributes of a datetime (timedelta) series.</p>\n\n<pre><code>&gt;&gt;&gt; (df['et_utc'] - df['ts_utc']).dt.total_seconds()\n0   -885.696\n1   -782.868\n2   -634.087\n3    -11.087\n4      0.820\ndtype: float64\n&gt;&gt;&gt; df['t_delta'] = (df['et_utc'] - df['ts_utc']).dt.total_seconds()\n&gt;&gt;&gt;\n&gt;&gt;&gt; print(df)\n                   et_utc              ts_utc  t_delta\n0 2018-05-02 09:24:29.304 2018-05-02 09:39:15 -885.696\n1 2018-05-02 09:26:12.132 2018-05-02 09:39:15 -782.868\n2 2018-05-02 09:28:37.913 2018-05-02 09:39:12 -634.087\n3 2018-05-02 09:28:37.913 2018-05-02 09:28:49  -11.087\n4 2018-05-02 10:39:48.820 2018-05-02 10:39:48    0.820\n&gt;&gt;&gt; \n</code></pre>\n\n<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/api.html#datetimelike-properties\" rel=\"nofollow noreferrer\">Datetimelike properties</a></p>\n\n<hr>\n\n<p><em>astyping</em> is equivalent to floor division, it looses a bit of resolution.</p>\n\n<pre><code>&gt;&gt;&gt; (df['et_utc'] - df['ts_utc']).astype('timedelta64[s]')\n0   -886.0\n1   -783.0\n2   -635.0\n3    -12.0\n4      0.0\ndtype: float64\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 2571, "user_id": 3476463, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/102f066d7cd421c7bf6d5611a7d6f161?s=128&d=identicon&r=PG&f=1", "display_name": "user3476463", "link": "https://stackoverflow.com/users/3476463/user3476463"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 0, "accepted_answer_id": 50499579, "answer_count": 2, "score": 0, "last_activity_date": 1527132716, "creation_date": 1527113754, "last_edit_date": 1527114363, "question_id": 50498254, "link": "https://stackoverflow.com/questions/50498254/pandas-timedelta-error-with-datetime64ns-utc-fields", "title": "Pandas Timedelta error with datetime64[ns, UTC] Fields", "body": "<p>I have a dataframe with the two time fields shown below.  When I try to take the Timedelta between them I'm getting the error message below.  I've included the .info() for the fields.  Does anyone see what the issue is and can you suggest how to fix it?  Any tips greatly appreciated.</p>\n\n<pre><code>Data:\n\n                            et_utc                    ts_utc\n0 2018-05-02 09:24:29.304000+00:00 2018-05-02 09:39:15+00:00\n1 2018-05-02 09:26:12.132000+00:00 2018-05-02 09:39:15+00:00\n2 2018-05-02 09:28:37.913000+00:00 2018-05-02 09:39:12+00:00\n3 2018-05-02 09:28:37.913000+00:00 2018-05-02 09:28:49+00:00\n4 2018-05-02 10:39:48.820000+00:00 2018-05-02 10:39:48+00:00\n\n\nData description:\n\ndf[[\u2018et_utc','ts_utc']].info()\n\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nInt64Index: 25625 entries, 0 to 25624\nData columns (total 2 columns):\net_utc    25625 non-null datetime64[ns, UTC]\nts_utc    25625 non-null datetime64[ns, UTC]\ndtypes: datetime64[ns, UTC](2)\nmemory usage: 1.8 MB\n\n\nCode:\n\ndf['t_delta']=pd.Timedelta(df['et_utc'] - df['ts_utc']).seconds\n\n\nError:\n\nValueError: Value must be Timedelta, string, integer, float, timedelta or convertible\n</code></pre>\n"}, {"tags": ["python", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 9571, "user_id": 2770850, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/fwn9J.jpg?s=128&g=1", "display_name": "Nabin", "link": "https://stackoverflow.com/users/2770850/nabin"}, "edited": false, "score": 0, "creation_date": 1527133817, "post_id": 50500541, "comment_id": 88013847, "body": "Are you answering your own question?"}], "tags": [], "owner": {"reputation": 57, "user_id": 7478542, "user_type": "registered", "profile_image": "https://graph.facebook.com/1247956445286203/picture?type=large", "display_name": "Ayyuce Demirbas", "link": "https://stackoverflow.com/users/7478542/ayyuce-demirbas"}, "is_accepted": true, "score": -2, "last_activity_date": 1527133125, "creation_date": 1527133125, "answer_id": 50500541, "question_id": 50498246, "link": "https://stackoverflow.com/questions/50498246/crawling-all-comments-on-a-website-with-scrapy/50500541#50500541", "title": "Crawling all comments on a website with scrapy", "body": "<p>Here is the code:  </p>\n\n<pre><code>import scrapy\nfrom scrapy.spiders import CrawlSpider, Rule\nfrom scrapy.linkextractors import LinkExtractor\n\nclass deneme(CrawlSpider):\n    name = 'yorum'\n    allowed_domains = ['hepsiburada.com']\n    start_urls = ['https://www.hepsiburada.com/']\n    rules = (\n        Rule(LinkExtractor(), callback='parse_item', follow=True),\n    )\n\n\n    def parse_item(self, response):\n\n\n\n\n        print(response.xpath('//p[@class=\"review-text\"]/text()').extract())\n</code></pre>\n\n<p>scrapy crawl yorum > output.txt</p>\n"}], "owner": {"reputation": 57, "user_id": 7478542, "user_type": "registered", "profile_image": "https://graph.facebook.com/1247956445286203/picture?type=large", "display_name": "Ayyuce Demirbas", "link": "https://stackoverflow.com/users/7478542/ayyuce-demirbas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 642, "favorite_count": 1, "accepted_answer_id": 50500541, "answer_count": 1, "score": 0, "last_activity_date": 1527133125, "creation_date": 1527113703, "question_id": 50498246, "link": "https://stackoverflow.com/questions/50498246/crawling-all-comments-on-a-website-with-scrapy", "title": "Crawling all comments on a website with scrapy", "body": "<p>I am trying to crawl all of the comments on a shopping website using Scrapy. I found this code:</p>\n\n<pre><code>import scrapy\nfrom scrapy.spiders import CrawlSpider, Rule\nfrom scrapy.linkextractors import LinkExtractor\n\nclass deneme(CrawlSpider):\nname = 'deneme'\nallowed_domains = ['hepsiburada.com']\nstart_urls = ['https://www.hepsiburada.com/']\n\nrules = (\n    Rule(LinkExtractor(), callback='parse_item', follow=True),\n)\n\ndef parse_item(self, response):\n    filename = response.url.split(\"/\")[-2] + '.html'\n    with open(filename, 'wb') as f:\n        f.write(response.body)\n</code></pre>\n\n<p>This code crawls all of the website. But I would like to crawl only comments on the website and write them to a MongoDB database. I am not good at Python. How can I do this? Thank you! </p>\n"}, {"tags": ["python", "python-3.x", "syntax-error", "pam"], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 7994141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GSESY.jpg?s=128&g=1", "display_name": "Anjana Shivangi", "link": "https://stackoverflow.com/users/7994141/anjana-shivangi"}, "edited": false, "score": 0, "creation_date": 1527114137, "post_id": 50498257, "comment_id": 88009452, "body": "The pam.py file is from the package and not self written. I tried to resolve this issue by just changing the print statement to print(...) , which is suitable to python3. But this just temporarily solves the issue.  Later I am getting more issues as the functions and references in pam.py are suitable for python2 and not 3."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 307, "user_id": 7994141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GSESY.jpg?s=128&g=1", "display_name": "Anjana Shivangi", "link": "https://stackoverflow.com/users/7994141/anjana-shivangi"}, "edited": false, "score": 0, "creation_date": 1527114257, "post_id": 50498257, "comment_id": 88009491, "body": "@AnjanaShivangi Then you&#39;ll need to convert all the sources that you intend to use with 3 to be compatible with 3. There&#39;s a tool available via pip called (iirc) py2to3, but it was pretty bad last time I tried to use it. If the entirety of the source is aimed at 2, and conversion isn&#39;t feasible, you&#39;ll have to run it under a Python 2 interpreter."}, {"owner": {"reputation": 307, "user_id": 7994141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GSESY.jpg?s=128&g=1", "display_name": "Anjana Shivangi", "link": "https://stackoverflow.com/users/7994141/anjana-shivangi"}, "edited": false, "score": 0, "creation_date": 1527278852, "post_id": 50498257, "comment_id": 88084426, "body": "Thanks for your response. Yes, I am aware of Py2to3 and used it on rest of my project as I has to upgrade from Python2.6 to 3.5. Like you said, it&#39;s not that great and also not ideal to use Py2to3 on a file from any python package, as it may have many functions that Py2to3 may not replace.  However, after more digging I found that there is a pam available for python3 , but it is called as simplepam -0.1.5 . I guess this should be a probable fix for my question.  [link] (<a href=\"https://pypi.org/project/simplepam/\" rel=\"nofollow noreferrer\">pypi.org/project/simplepam</a>)"}], "tags": [], "owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "is_accepted": false, "score": 0, "last_activity_date": 1527113769, "creation_date": 1527113769, "answer_id": 50498257, "question_id": 50498236, "link": "https://stackoverflow.com/questions/50498236/python-pam-errors-out-syntaxerror-invalid-syntax/50498257#50498257", "title": "Python-Pam Errors out- SyntaxError: invalid syntax", "body": "<p><code>print</code> is a function in Python 3.</p>\n\n<p>Change it to</p>\n\n<pre><code>print(authenticate(getpass.getuser(), getpass.getpass()))\n#    ^ Note the braces that make it a function call\n</code></pre>\n\n<p>The way you have it written is valid only in Python 2. </p>\n"}, {"tags": [], "owner": {"reputation": 307, "user_id": 7994141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GSESY.jpg?s=128&g=1", "display_name": "Anjana Shivangi", "link": "https://stackoverflow.com/users/7994141/anjana-shivangi"}, "is_accepted": true, "score": 0, "last_activity_date": 1527279025, "creation_date": 1527279025, "answer_id": 50536216, "question_id": 50498236, "link": "https://stackoverflow.com/questions/50498236/python-pam-errors-out-syntaxerror-invalid-syntax/50536216#50536216", "title": "Python-Pam Errors out- SyntaxError: invalid syntax", "body": "<p>Pam 0.1.4 is for python2, hence the error. There is a pam available for python3 , but it is called as simplepam -0.1.5 . I guess this should be a probable fix for my question. \n[link] (pypi.org/project/simplepam)</p>\n"}], "owner": {"reputation": 307, "user_id": 7994141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GSESY.jpg?s=128&g=1", "display_name": "Anjana Shivangi", "link": "https://stackoverflow.com/users/7994141/anjana-shivangi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "accepted_answer_id": 50536216, "answer_count": 2, "score": 0, "last_activity_date": 1527279025, "creation_date": 1527113619, "last_edit_date": 1527114383, "question_id": 50498236, "link": "https://stackoverflow.com/questions/50498236/python-pam-errors-out-syntaxerror-invalid-syntax", "title": "Python-Pam Errors out- SyntaxError: invalid syntax", "body": "<p>I am working on Python 3 and tried installing pam, which was successful. It installed the pam-0.1.4 version. </p>\n\n<pre><code>C:\\Users\\anjan&gt;pip install pam\nCollecting pam\n  Downloading https://files.pythonhosted.org/packages/d6/cb/73c7725f4c7ee14205d85c6777a44f9b33e51d31fd5fc1bb0aa7f35cf8d2/pam-0.1.4.tar.gz\nBuilding wheels for collected packages: pam\n  Running setup.py bdist_wheel for pam ... done\n  Stored in directory: C:\\Users\\anjan\\AppData\\Local\\pip\\Cache\\wheels\\24\\8d\\30\\48fca5978b858d699565ee0cde875798229022bbb4e86e8b43\nSuccessfully built pam\nInstalling collected packages: pam\nSuccessfully installed pam-0.1.4\n</code></pre>\n\n<p>Next when I try to import pam it throws out the following syntax error. Looks like the pam.py file is still on Python2.x. </p>\n\n<p>Does anyone know how to resolve this issue?</p>\n\n<pre><code>    &gt;&gt;&gt; import pam\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Users\\anjan\\Anaconda3\\lib\\site-packages\\pam.py\", line 129\n    print authenticate(getpass.getuser(), getpass.getpass())\n                     ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>The pam.py file looks like as shown below.</p>\n\n<pre><code># (c) 2007 Chris AtLee &lt;chris@atlee.ca&gt;\n# Licensed under the MIT license:\n# http://www.opensource.org/licenses/mit-license.php\n\"\"\"\nPAM module for python\n\nProvides an authenticate function that will allow the caller to authenticate\na user against the Pluggable Authentication Modules (PAM) on the system.\n\nImplemented using ctypes, so no compilation is necessary.\n\"\"\"\n__all__ = ['authenticate']\n\nfrom ctypes import CDLL, POINTER, Structure, CFUNCTYPE, cast, pointer, sizeof\nfrom ctypes import c_void_p, c_uint, c_char_p, c_char, c_int\nfrom ctypes.util import find_library\n\nLIBPAM = CDLL(find_library(\"pam\"))\nLIBC = CDLL(find_library(\"c\"))\n\nCALLOC = LIBC.calloc\nCALLOC.restype = c_void_p\nCALLOC.argtypes = [c_uint, c_uint]\n\nSTRDUP = LIBC.strdup\nSTRDUP.argstypes = [c_char_p]\nSTRDUP.restype = POINTER(c_char) # NOT c_char_p !!!!\n\n# Various constants\nPAM_PROMPT_ECHO_OFF = 1\nPAM_PROMPT_ECHO_ON = 2\nPAM_ERROR_MSG = 3\nPAM_TEXT_INFO = 4\n\nclass PamHandle(Structure):\n    \"\"\"wrapper class for pam_handle_t\"\"\"\n    _fields_ = [\n            (\"handle\", c_void_p)\n            ]\n\n    def __init__(self):\n        Structure.__init__(self)\n        self.handle = 0\n\nclass PamMessage(Structure):\n    \"\"\"wrapper class for pam_message structure\"\"\"\n    _fields_ = [\n            (\"msg_style\", c_int),\n            (\"msg\", POINTER(c_char)),\n            ]\n\n    def __repr__(self):\n        return \"&lt;PamMessage %i '%s'&gt;\" % (self.msg_style, self.msg)\n\nclass PamResponse(Structure):\n    \"\"\"wrapper class for pam_response structure\"\"\"\n    _fields_ = [\n            (\"resp\", POINTER(c_char)),\n            (\"resp_retcode\", c_int),\n            ]\n\n    def __repr__(self):\n        return \"&lt;PamResponse %i '%s'&gt;\" % (self.resp_retcode, self.resp)\n\nCONV_FUNC = CFUNCTYPE(c_int,\n        c_int, POINTER(POINTER(PamMessage)),\n               POINTER(POINTER(PamResponse)), c_void_p)\n\nclass PamConv(Structure):\n    \"\"\"wrapper class for pam_conv structure\"\"\"\n    _fields_ = [\n            (\"conv\", CONV_FUNC),\n            (\"appdata_ptr\", c_void_p)\n            ]\n\nPAM_START = LIBPAM.pam_start\nPAM_START.restype = c_int\nPAM_START.argtypes = [c_char_p, c_char_p, POINTER(PamConv),\n        POINTER(PamHandle)]\n\nPAM_END = LIBPAM.pam_end\nPAM_END.restpe = c_int\nPAM_END.argtypes = [PamHandle, c_int]\n\nPAM_AUTHENTICATE = LIBPAM.pam_authenticate\nPAM_AUTHENTICATE.restype = c_int\nPAM_AUTHENTICATE.argtypes = [PamHandle, c_int]\n\ndef authenticate(username, password, service='login'):\n    \"\"\"Returns True if the given username and password authenticate for the\n    given service.  Returns False otherwise\n\n    ``username``: the username to authenticate\n\n    ``password``: the password in plain text\n\n    ``service``: the PAM service to authenticate against.\n                 Defaults to 'login'\"\"\"\n    @CONV_FUNC\n    def my_conv(n_messages, messages, p_response, app_data):\n        \"\"\"Simple conversation function that responds to any\n        prompt where the echo is off with the supplied password\"\"\"\n        # Create an array of n_messages response objects\n        addr = CALLOC(n_messages, sizeof(PamResponse))\n        p_response[0] = cast(addr, POINTER(PamResponse))\n        for i in range(n_messages):\n            if messages[i].contents.msg_style == PAM_PROMPT_ECHO_OFF:\n                pw_copy = STRDUP(str(password))\n                p_response.contents[i].resp = pw_copy\n                p_response.contents[i].resp_retcode = 0\n        return 0\n\n    handle = PamHandle()\n    conv = PamConv(my_conv, 0)\n    retval = PAM_START(service, username, pointer(conv), pointer(handle))\n\n    if retval != 0:\n        # TODO: This is not an authentication error, something\n        # has gone wrong starting up PAM\n        PAM_END(handle, retval)\n        return False\n\n    retval = PAM_AUTHENTICATE(handle, 0)\n    e = PAM_END(handle, retval)\n    return retval == 0 and e == 0\n\nif __name__ == \"__main__\":\n    import getpass\n    print authenticate(getpass.getuser(), getpass.getpass())\n</code></pre>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1527115696, "post_id": 50498213, "comment_id": 88009873, "body": "Personally I would just record each vote as a new row. Then you can use <code>annotate</code> and <code>Sum</code> to group the categories and their totals. For example as a property method."}, {"owner": {"reputation": 199, "user_id": 5419227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j4eXG.jpg?s=128&g=1", "display_name": "seleniumappiumnewbie", "link": "https://stackoverflow.com/users/5419227/seleniumappiumnewbie"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1527127865, "post_id": 50498213, "comment_id": 88012548, "body": "I tried to add this to my views.py pastrys = Pastry.objects.values(&#39;pastry&#39;).aggregate(total=Sum(&#39;vote&#39;)) and I added this to my pastry_list.html template &lt;p&gt;Muffins: {% for pastry in pastrys %}   {{ pastry.pastry }} total: {{ pastry.total }} {% endfor %} But it is not displaying any data. Can you advise me where I went wrong? Thanks for your help. Much appreciated."}, {"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1527129260, "post_id": 50498213, "comment_id": 88012855, "body": "I recommend you use <code>pdb</code> to inspect your vars, to see what that queryset actually returns. Make sure you have data in your table. And you probably wanna use <code>annotate</code> instead of <code>aggregate</code>."}, {"owner": {"reputation": 199, "user_id": 5419227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j4eXG.jpg?s=128&g=1", "display_name": "seleniumappiumnewbie", "link": "https://stackoverflow.com/users/5419227/seleniumappiumnewbie"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1527182483, "post_id": 50498213, "comment_id": 88042312, "body": "I tried with pdb but can&#39;t find the error. I changed it to this but still doesn&#39;t work. Is it because my field has choices? In views.py I only have this line as a variable ps = Pastry.objects.values(&#39;pastry&#39;).annotate(total=Count(&#39;pastry&zwnj;&#8203;&#39;)) In the template I have the following, but it seems it is being ignored. Am I missing something? {% for p in ps %}   {% for k, v in p.items %}     {{v}}   {% endfor %} {% endfor %}"}, {"owner": {"reputation": 199, "user_id": 5419227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j4eXG.jpg?s=128&g=1", "display_name": "seleniumappiumnewbie", "link": "https://stackoverflow.com/users/5419227/seleniumappiumnewbie"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1527198918, "post_id": 50498213, "comment_id": 88050051, "body": "The annotate line in views does have correct data, but somehow my template is not retrieving the data. {&#39;pastry&#39;: &#39;Brownie&#39;, &#39;total&#39;: 1} {&#39;pastry&#39;: &#39;Cake&#39;, &#39;total&#39;: 1} {&#39;pastry&#39;: &#39;Cupcake&#39;, &#39;total&#39;: 1} {&#39;pastry&#39;: &#39;Fruit Tart&#39;, &#39;total&#39;: 1} {&#39;pastry&#39;: &#39;Muffin&#39;, &#39;total&#39;: 2}"}, {"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1527240887, "post_id": 50498213, "comment_id": 88063727, "body": "Looks like it&#39;s a list. So just iterate over it and access it through the dictionary keys. I.e <code>{{ foo.pastry }}</code> and <code>{{ foo.total }}</code>."}], "owner": {"reputation": 199, "user_id": 5419227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j4eXG.jpg?s=128&g=1", "display_name": "seleniumappiumnewbie", "link": "https://stackoverflow.com/users/5419227/seleniumappiumnewbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 384, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527199974, "creation_date": 1527113485, "last_edit_date": 1527199974, "question_id": 50498213, "link": "https://stackoverflow.com/questions/50498213/how-do-i-get-annotate-variable-in-view-to-display-data-on-django-template", "title": "How do I get annotate variable in view to display data on django template?", "body": "<p>How do I get annotate to display data on django template when I load the pastry_list.html page? I have a variable set to the annotate line in views.py. I have a for loop running through the variable in template. Am I missing something or doing something wrong? For some reason it seems that the template is not recognizing the views.py variable. Thanks.</p>\n\n<pre><code> from django.db import models\n from django.utils import timezone\n from django.urls import reverse\n from collections import OrderedDict\n\nclass IntegerRangeField(models.IntegerField):\ndef __init__(self, verbose_name=None, name=None, min_value=None, \nmax_value=None, **kwargs):\n    self.min_value, self.max_value = min_value, max_value\n    models.IntegerField.__init__(self, verbose_name, name, **kwargs)\ndef formfield(self, **kwargs):\n    defaults = {'min_value': self.min_value, \n'max_value':self.max_value}\n    defaults.update(kwargs)\n    return super(IntegerRangeField, self).formfield(**defaults)\n\nclass Pastry(models.Model):\nCHOICES_DICT = OrderedDict((\n    (\"Muffin\", \"Muffin\"),\n    (\"Cupcake\", \"Cupcake\"),\n    (\"Brownie\", \"Brownie\"),\n    (\"Cake\", \"Cake\"),\n    (\"Fruit Tart\", \"Fruit Tart\")\n))\npastry = models.CharField(max_length=20, default=\"muffin\",   \nchoices=CHOICES_DICT.items())\nvote = IntegerRangeField(default=1, min_value=1, max_value=1)\n\ndef get_absolute_url(self):\n    return reverse(\"pastry_detail\", kwargs={'pk': self.pk})\n\ndef __str__(self):\n    return self.pastry\n\n\nVIEWS.PY\nfrom django.shortcuts import render\nfrom django.views.generic import (TemplateView,ListView,\n                              DetailView,CreateView,\n                              UpdateView,DeleteView)\nfrom django.urls import reverse_lazy\nfrom myapp.models import Pastry\nfrom myapp.forms import PastryForm\nfrom django.db.models import F\n\n\nps = Pastry.objects.values('pastry').annotate(total=Count('pastry'))\n\nclass PollsListView(ListView):\nmodel = Pastry\n\ndef get_queryset(self):\n    return Pastry.objects.all()\n\nclass PollsDetailView(DetailView):\nmodel = Pastry\n\nclass PollsCreateView(CreateView):\nsuccess_url = reverse_lazy('pastry_list')\nform_class = PastryForm\nmodel = Pastry\n\nclass PollsUpdateView(UpdateView):\nsuccess_url = reverse_lazy('pastry_list')\nform_class = PastryForm\nmodel = Pastry\n\n\nclass PollsDeleteView(DeleteView):\nmodel = Pastry\nsuccess_url = reverse_lazy('pastry_list')\n\npastry_list.html  (template) \n{% extends \"base.html\" %}\n{% block content %}\n&lt;div class=\"jumbotron\"&gt;\n\n&lt;a href=\"{% url 'pastry_new' %}\"&gt;New Poll&lt;/a&gt;\n&lt;h1&gt;Voting for the favorite pastry&lt;/h1&gt;\n\n{% for p in ps %}\n {% for k, v in p.items %}\n   {{v}}\n {% endfor %}\n{% endfor %}\n\n{% for pastry in pastry_list %}\n    &lt;div class=\"pastry\"&gt;\n        &lt;h3&gt;&lt;a href=\"{% url 'pastry_detail' pk=pastry.pk %}\"&gt;\n  {{ pastry.pastry }}&lt;/a&gt;&lt;/h3&gt;\n    &lt;/div&gt;\n  {% endfor %}\n\n &lt;/div&gt;\n\n  {% endblock %}\n\n\nFORMS.PY\nfrom django import forms\nfrom myapp.models import Pastry\nfrom django.forms import ModelForm\n\nclass PastryForm(ModelForm):\n\nclass Meta():\n    model = Pastry\n    fields = ['pastry', 'vote']\n\n PASTRY_FORM.HTML\n {% extends \"base.html\" %}\n {% load widget_tweaks %}\n {% block content %}\n &lt;div class=\"jumbotron\"&gt;\n &lt;h1&gt;New Poll&lt;/h1&gt;\n &lt;form class=\"post-form\" method=\"POST\"&gt;\n {% csrf_token %}\n {{ form.as_p }}\n &lt;button type=\"submit\" class=\"save btn btn-default\"&gt;Save&lt;/button&gt;\n &lt;/form&gt;\n &lt;/div&gt;\n {% endblock %}\n &lt;/body&gt;\n &lt;/html&gt;\n</code></pre>\n"}, {"tags": ["python", "multithreading", "thread-safety"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1527113548, "post_id": 50498175, "comment_id": 88009278, "body": "You are aware that <code>x</code> is only overwritten locally in <code>set_x</code> and will stay <code>None</code> in the global scope?"}, {"owner": {"reputation": 3, "user_id": 9837271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf084a62340963e78272f8a76bb1e81?s=128&d=identicon&r=PG&f=1", "display_name": "John Copella", "link": "https://stackoverflow.com/users/9837271/john-copella"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1527114961, "post_id": 50498175, "comment_id": 88009687, "body": "Yes! Good catch. Thank you Klaus. For the purposes of this question, assume that each function that references x has the necessary global statement at the top."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9837271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf084a62340963e78272f8a76bb1e81?s=128&d=identicon&r=PG&f=1", "display_name": "John Copella", "link": "https://stackoverflow.com/users/9837271/john-copella"}, "edited": false, "score": 0, "creation_date": 1527119595, "post_id": 50498653, "comment_id": 88010834, "body": "Yes, x is global -- please see the updated example. And yes, the race condition between setting x and testing its value was my point of concern. This solution looks pretty robust. Assuming x is a string (immutable in Python IIRC) would we still be in &quot;mostly/always? harmless&quot; territory with the original code?"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "reply_to_user": {"reputation": 3, "user_id": 9837271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf084a62340963e78272f8a76bb1e81?s=128&d=identicon&r=PG&f=1", "display_name": "John Copella", "link": "https://stackoverflow.com/users/9837271/john-copella"}, "edited": false, "score": 0, "creation_date": 1527120060, "post_id": 50498653, "comment_id": 88010925, "body": "Mostly harmless. If its a hard-coded string then it has the same id even if set multiple times. But if its constructed, even identical strings have different ids. So, code can&#39;t use &quot;is&quot; (but they shouldn&#39;t anyway). <code>None</code> always has the same id, so <code>x is None</code> is fine but usually its a bad idea."}, {"owner": {"reputation": 3, "user_id": 9837271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf084a62340963e78272f8a76bb1e81?s=128&d=identicon&r=PG&f=1", "display_name": "John Copella", "link": "https://stackoverflow.com/users/9837271/john-copella"}, "edited": false, "score": 0, "creation_date": 1527120273, "post_id": 50498653, "comment_id": 88010972, "body": "Strictly speaking, are two tests required for x is None, one prior to obtaining the lock, and the other after?"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "reply_to_user": {"reputation": 3, "user_id": 9837271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf084a62340963e78272f8a76bb1e81?s=128&d=identicon&r=PG&f=1", "display_name": "John Copella", "link": "https://stackoverflow.com/users/9837271/john-copella"}, "edited": false, "score": 0, "creation_date": 1527120462, "post_id": 50498653, "comment_id": 88011015, "body": "You need to do a test inside the lock to make sure testing plus changing can&#39;t be interrupted by another thread. The outer <code>if</code> is just for performance. Its quicker and once <code>x</code> has been set there is no need to grab the lock."}, {"owner": {"reputation": 3, "user_id": 9837271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf084a62340963e78272f8a76bb1e81?s=128&d=identicon&r=PG&f=1", "display_name": "John Copella", "link": "https://stackoverflow.com/users/9837271/john-copella"}, "edited": false, "score": 0, "creation_date": 1527120995, "post_id": 50498653, "comment_id": 88011105, "body": "Thank you! (and thanks for the numerous other Python tips embedded in your answer; e.g., use of the leading underscore, x is None vs. not x, etc.)"}], "tags": [], "owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "is_accepted": true, "score": 0, "last_activity_date": 1527137238, "last_edit_date": 1527137238, "creation_date": 1527116624, "answer_id": 50498653, "question_id": 50498175, "link": "https://stackoverflow.com/questions/50498175/is-the-following-code-thread-safe-in-python/50498653#50498653", "title": "Is the following code thread-safe in Python?", "body": "<p>Assuming you are using a global variable in <code>set_x</code>:</p>\n\n<pre><code>x = None\n\ndef set_x():\n    global x\n    x = \"foo\"\n\ndef worker():\n    if not x:\n        set_x()\n</code></pre>\n\n<p>There is a race condition between <code>if not x</code> and actually setting x. So multiple threads may assign a value to <code>x</code>. That's mostly harmless for immutable objects but problematic for mutable objects like lists where reassignment loses values in the existing <code>x</code>. And by \"mostly\", even objects whose values compare may have different id's, so <code>==</code> may work but <code>is</code> may fail:</p>\n\n<pre><code>&gt;&gt;&gt; a = \"foo\"\n&gt;&gt;&gt; b = \"bar\"\n&gt;&gt;&gt; c = a + b\n&gt;&gt;&gt; d = a + b\n&gt;&gt;&gt; c == d\nTrue\n&gt;&gt;&gt; c is d\nFalse\n</code></pre>\n\n<p>And of course code paths that don't play the <code>set_x</code> game may find that <code>x</code> changes from <code>None</code> to your expected value while they execute.</p>\n\n<p>Especially because <code>x</code> is expensive to calculate, a good approach is to hide it behind a getter. Now everyone has to play the same game and only one of the threads will actually do the work.</p>\n\n<pre><code>_x = None\n_x_lock = threading.Lock()\n\ndef get_x():\n    global _x\n    if _x is None:\n        with _x_lock:\n            if _x is None:\n                _x = \"foobar\"\n    return _x\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9837271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf084a62340963e78272f8a76bb1e81?s=128&d=identicon&r=PG&f=1", "display_name": "John Copella", "link": "https://stackoverflow.com/users/9837271/john-copella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 50498653, "answer_count": 1, "score": 0, "last_activity_date": 1527137238, "creation_date": 1527113275, "last_edit_date": 1527121073, "question_id": 50498175, "link": "https://stackoverflow.com/questions/50498175/is-the-following-code-thread-safe-in-python", "title": "Is the following code thread-safe in Python?", "body": "<p>I have code similar to the following in a Python module:</p>\n\n<pre><code>_x = None\n\ndef set_x():\n global _x\n _x = # some value (will always be the same)\n\ndef worker():\n if _x is None:\n  set_x()\n</code></pre>\n\n<p>Can threads created in a client of this module safely call worker()?</p>\n\n<p>X is used in a read-only mode elsewhere in the module; once set it is never changed.</p>\n\n<p>Yes, I realize that x could be encapsulated in a class and the threads could create their own instances of that class on the stack and thus obtain thread-safety, but assume for the purposes of this question that a class-based implementation is not feasible or desirable (e.g., the module represents a Singleton where the cost of setting x is relatively high and we want to set it as infrequently as is practical).</p>\n"}, {"tags": ["python", "qt", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 1490, "user_id": 7965770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sbWIH.jpg?s=128&g=1", "display_name": "AndrejH", "link": "https://stackoverflow.com/users/7965770/andrejh"}, "edited": false, "score": 4, "creation_date": 1527113395, "post_id": 50498162, "comment_id": 88009231, "body": "Similar question was asked <a href=\"https://askubuntu.com/questions/339723/can-i-sell-my-pyqt4-app-without-having-a-pyqt-license\">here</a>."}, {"owner": {"reputation": 301, "user_id": 7572104, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/i976n.png?s=128&g=1", "display_name": "Tearzz", "link": "https://stackoverflow.com/users/7572104/tearzz"}, "reply_to_user": {"reputation": 1490, "user_id": 7965770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sbWIH.jpg?s=128&g=1", "display_name": "AndrejH", "link": "https://stackoverflow.com/users/7965770/andrejh"}, "edited": false, "score": 1, "creation_date": 1527765640, "post_id": 50498162, "comment_id": 88255941, "body": "Yeah sorry about that. The license is extremely expensive though. I&#39;ve gone to WxPython now."}], "answers": [{"tags": [], "owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "is_accepted": true, "score": 2, "last_activity_date": 1527113481, "creation_date": 1527113481, "answer_id": 50498211, "question_id": 50498162, "link": "https://stackoverflow.com/questions/50498162/am-i-allowed-to-sell-software-made-with-pyqt/50498211#50498211", "title": "Am I allowed to sell software made with PyQt?", "body": "<p>Yes in order to produce non-open source software in PyQt5 you will need to buy a license.  See last question on <a href=\"https://www.riverbankcomputing.com/commercial/license-faq\" rel=\"nofollow noreferrer\">https://www.riverbankcomputing.com/commercial/license-faq</a></p>\n"}], "owner": {"reputation": 301, "user_id": 7572104, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/i976n.png?s=128&g=1", "display_name": "Tearzz", "link": "https://stackoverflow.com/users/7572104/tearzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1273, "favorite_count": 1, "accepted_answer_id": 50498211, "answer_count": 1, "score": -1, "last_activity_date": 1527251818, "creation_date": 1527113210, "last_edit_date": 1527251818, "question_id": 50498162, "link": "https://stackoverflow.com/questions/50498162/am-i-allowed-to-sell-software-made-with-pyqt", "title": "Am I allowed to sell software made with PyQt?", "body": "<p>So basically I want to create some software using the PyQt library, but do I have to make it open-source because it's under some kind of license? For the purpose of my software, making it open-source defeats the whole purpose of charging money for it. </p>\n"}, {"tags": ["python", "matrix"], "comments": [{"owner": {"reputation": 461, "user_id": 9808870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BUCJG.jpg?s=128&g=1", "display_name": "s3n0", "link": "https://stackoverflow.com/users/9808870/s3n0"}, "edited": false, "score": 0, "creation_date": 1527113900, "post_id": 50498134, "comment_id": 88009373, "body": "Better to use is maybe &quot;two-dimensional array&quot; for Matrix, like as here: <a href=\"https://stackoverflow.com/questions/6667201/how-to-define-a-two-dimensional-array-in-python\" title=\"how to define a two dimensional array in python\">stackoverflow.com/questions/6667201/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 605, "user_id": 6401457, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/c85a1441ebfad860d9e1c8100a5df4fa?s=128&d=identicon&r=PG&f=1", "display_name": "Naografix", "link": "https://stackoverflow.com/users/6401457/naografix"}, "edited": false, "score": 0, "creation_date": 1527114862, "post_id": 50498357, "comment_id": 88009651, "body": "Thanks for your answer, but it didn&#39;t working for me actually. I try your code with <a href=\"https://www.jdoodle.com/python3-programming-online\" rel=\"nofollow noreferrer\">jdoodle.com/python3-programming-online</a> Check my original post to copy past my code"}, {"owner": {"reputation": 605, "user_id": 6401457, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/c85a1441ebfad860d9e1c8100a5df4fa?s=128&d=identicon&r=PG&f=1", "display_name": "Naografix", "link": "https://stackoverflow.com/users/6401457/naografix"}, "edited": false, "score": 0, "creation_date": 1527115076, "post_id": 50498357, "comment_id": 88009712, "body": "I think your &quot;for _ in range()&quot; is too much to move list to the left :)!"}, {"owner": {"reputation": 536, "user_id": 8767168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Tthwq.jpg?s=128&g=1", "display_name": "Austin A", "link": "https://stackoverflow.com/users/8767168/austin-a"}, "reply_to_user": {"reputation": 605, "user_id": 6401457, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/c85a1441ebfad860d9e1c8100a5df4fa?s=128&d=identicon&r=PG&f=1", "display_name": "Naografix", "link": "https://stackoverflow.com/users/6401457/naografix"}, "edited": false, "score": 1, "creation_date": 1527115096, "post_id": 50498357, "comment_id": 88009718, "body": "after each iteration of the <code>for _ in range(8)</code>, the matrix will be shifted one to the left. That is why I left the comment <code># code to update display here and sleep for a bit</code>"}, {"owner": {"reputation": 605, "user_id": 6401457, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/c85a1441ebfad860d9e1c8100a5df4fa?s=128&d=identicon&r=PG&f=1", "display_name": "Naografix", "link": "https://stackoverflow.com/users/6401457/naografix"}, "edited": false, "score": 0, "creation_date": 1527115978, "post_id": 50498357, "comment_id": 88009930, "body": "Really cool! Thank you for your job! I&#39;m going to try this with my RPI! My other problem will be I want to make the text appear gradually. For the moment our letter is displayed in full, it is necessary that I make it appear progressively! I will use your shifter"}], "tags": [], "owner": {"reputation": 536, "user_id": 8767168, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Tthwq.jpg?s=128&g=1", "display_name": "Austin A", "link": "https://stackoverflow.com/users/8767168/austin-a"}, "is_accepted": true, "score": 1, "last_activity_date": 1527115608, "last_edit_date": 1527115608, "creation_date": 1527114445, "answer_id": 50498357, "question_id": 50498134, "link": "https://stackoverflow.com/questions/50498134/python-and-matrix-move-columns-rows/50498357#50498357", "title": "Python and matrix, move columns &amp; rows", "body": "<p>(As s3n0 suggested) First, you want to have a 2D array declared</p>\n\n<pre><code> my2dArray = [[\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\"],\n    [\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\"],\n    [\"1\",\"1\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\"],\n    [\"1\",\"1\",\"1\",\"1\",\"1\",\"0\",\"0\",\"0\"],\n    [\"1\",\"1\",\"1\",\"1\",\"1\",\"0\",\"0\",\"0\"],\n    [\"1\",\"1\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\"],\n    [\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\"],\n    [\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\"]]\n</code></pre>\n\n<p>Then, for the sake of a simple algorithm, you can do the following... (assuming an 8x8 grid):</p>\n\n<pre><code>def shift_left(my2dArray):\n    for _ in range(8): # shift to the left 8 times - brute force\n        for row in my2dArray:\n            row.pop(0) # removes first element of each row\n            row.append(\"0\") # add \"0\" to the end of the row\n        # code to update display here and sleep for a bit\n</code></pre>\n\n<p>This is an example of shifting your display to the left, I'm going to leave the rest (other directions) to you to figure out, as they are very similar to this algorithm.</p>\n\n<p>For shifting up and down, simply call the list functions one layer up in the algorithm:</p>\n\n<pre><code>def shift_up(my2dArray):\n    for _ in range(8): # shift to the left 8 times - brute force\n        my2dArray.pop(0) # removes first element of each column\n        my2dArray.append([\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\"]) # add \"0\" to the end of the columns\n        # code to update display here and sleep for a bit\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1244, "user_id": 9822401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5fa63a04daa021f18c426c2e09428b8?s=128&d=identicon&r=PG&f=1", "display_name": "A_kat", "link": "https://stackoverflow.com/users/9822401/a-kat"}, "is_accepted": false, "score": 0, "last_activity_date": 1527116269, "creation_date": 1527116269, "answer_id": 50498609, "question_id": 50498134, "link": "https://stackoverflow.com/questions/50498134/python-and-matrix-move-columns-rows/50498609#50498609", "title": "Python and matrix, move columns &amp; rows", "body": "<p>Another way is with numpy. Which is also scalable. No matter the dimension of your array. You just change the shapes. The code i run is below and works fine. Just replace number 8 in the for loop with the same as the shape of the array.</p>\n\n<pre><code>import numpy as np\nimport time\narray = np.random.randint(2,size=(8,8))\nprint(array)\noriginalarray = array.copy()\nprint(\"------------------------------\")\nfor i in range(8):\n endposition = 8-i-1; # the 8th first iter, the 7th in second iter etc               \nfor j in range(endposition):\n    column = array[:,j+1]\n    array[:,j] = column\narray[:,endposition:] = np.zeros((8,1)) # all the columns to the right are zeros\ntime.sleep(1)   # 1 second delay\nprint(array)\nprint(\"----------------------------------\")\ntime.sleep(1)   # 1 second delay\nprint(originalarray)\n</code></pre>\n"}], "owner": {"reputation": 605, "user_id": 6401457, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/c85a1441ebfad860d9e1c8100a5df4fa?s=128&d=identicon&r=PG&f=1", "display_name": "Naografix", "link": "https://stackoverflow.com/users/6401457/naografix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2712, "favorite_count": 0, "accepted_answer_id": 50498357, "answer_count": 2, "score": 3, "last_activity_date": 1527116269, "creation_date": 1527113074, "last_edit_date": 1527114896, "question_id": 50498134, "link": "https://stackoverflow.com/questions/50498134/python-and-matrix-move-columns-rows", "title": "Python and matrix, move columns &amp; rows", "body": "<p>I have a little issue with my python script.</p>\n\n<p>Actually, I'm working on real led matrix 8x8 and I want to draw a text with animation (right to left, left to right, up to down, down to up).</p>\n\n<p>For example, I want to write the E letter. So I created the E matrix:</p>\n\n<pre><code>matrix =[\n\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\n\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\n\"1\",\"1\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\n\"1\",\"1\",\"1\",\"1\",\"1\",\"0\",\"0\",\"0\",\n\"1\",\"1\",\"1\",\"1\",\"1\",\"0\",\"0\",\"0\",\n\"1\",\"1\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\n\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\n\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\",\"1\"]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/zICy1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zICy1.png\" alt=\"Like this\"></a></p>\n\n<p>But now, imagine I want to move my E to make animation. If I move my E to the left, the eighth column will be empty, and after 1s, the seventh too etc...\nAnd when my matrix will be completely empty, my E letter will start in right position again... </p>\n\n<p>Do you have an idea how can I do that with array, matrix or whatever?</p>\n\n<p>Thank you</p>\n\n<p>EDIT, code test with <a href=\"https://www.jdoodle.com/python3-programming-online\" rel=\"nofollow noreferrer\">https://www.jdoodle.com/python3-programming-online</a>:</p>\n\n<pre><code>matrix = [  [0, 0, 0, 1, 0], \n            [0, 0, 0, 1, 0],\n            [0, 0, 0, 1, 0], \n            [0, 0, 0, 1, 0], \n            [0, 0, 0, 1, 0]]\n\nprint(matrix)\n\ndef shift(my2dArray):\n    for _ in range(5): # shift to the left 8 times - brute force\n        for row in my2dArray:\n            row.pop(0) # removes first element of each row\n            row.append(\"0\") # add \"0\" to the end of the row\n        # code to update display here and sleep for a bit\n\nshift(matrix)\n\nprint(matrix)\n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "edited": false, "score": 0, "creation_date": 1527112961, "post_id": 50498091, "comment_id": 88009090, "body": "show your dataframe"}], "answers": [{"tags": [], "owner": {"reputation": 6003, "user_id": 3063243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88a5195a59ff5fd55255f185f518fdc?s=128&d=identicon&r=PG&f=1", "display_name": "phi", "link": "https://stackoverflow.com/users/3063243/phi"}, "is_accepted": true, "score": 1, "last_activity_date": 1527113680, "creation_date": 1527113680, "answer_id": 50498242, "question_id": 50498091, "link": "https://stackoverflow.com/questions/50498091/plot-aggregate-groupby-count-data-in-seaborn-python/50498242#50498242", "title": "Plot aggregate groupby Count data in SeaBorn Python?", "body": "<p>Seaborn just doesn't work that way. In seaborn, you specify the x and y columns as well as the data frame. Seaborn will do the aggregation itself.</p>\n\n<pre><code>import seaborn as sns\nsns.striplot('column1', 'column2', data=df)\n</code></pre>\n\n<p>For the count, maybe what you need is <code>countplot</code></p>\n\n<pre><code>sns.countplot('column1', data=df)\n</code></pre>\n\n<p>The equivalent pandas code is:</p>\n\n<pre><code>df.groupby('column1').size().plot(kind='bar')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 892, "user_id": 4001177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TEikv.jpg?s=128&g=1", "display_name": "Golden Lion", "link": "https://stackoverflow.com/users/4001177/golden-lion"}, "is_accepted": false, "score": 0, "last_activity_date": 1613517095, "creation_date": 1613517095, "answer_id": 66233504, "question_id": 50498091, "link": "https://stackoverflow.com/questions/50498091/plot-aggregate-groupby-count-data-in-seaborn-python/66233504#66233504", "title": "Plot aggregate groupby Count data in SeaBorn Python?", "body": "<p>this code will create a count plot with horizontal bar equivalent and descending sorted values</p>\n<pre><code>fig,ax = plt.subplots(figsize=(10,16))\ngrouped=df.groupby('Age').size(). \\\nsort_values(ascending=False).plot(kind='barh',ax=ax)\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 9837278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d13080499cbe1d20a71f21795c606709?s=128&d=identicon&r=PG&f=1", "display_name": "New", "link": "https://stackoverflow.com/users/9837278/new"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4602, "favorite_count": 0, "accepted_answer_id": 50498242, "answer_count": 2, "score": 0, "last_activity_date": 1613517095, "creation_date": 1527112834, "question_id": 50498091, "link": "https://stackoverflow.com/questions/50498091/plot-aggregate-groupby-count-data-in-seaborn-python", "title": "Plot aggregate groupby Count data in SeaBorn Python?", "body": "<p>how to use groupby function in the y-axis? the below code doesn't display what i expect, due to y = df.groupby('column1')['column2'].count()</p>\n\n<pre><code>import seaborn as sns\nimport pandas as pd\n\nsns.set(style=\"whitegrid\", color_codes=True)\n\nsns.stripplot(x=\"column1\", y = df.groupby('column1')['column2'].count(), data=df)\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527113138, "post_id": 50498073, "comment_id": 88009144, "body": "<code>findall</code> doesn&#39;t return overlapping matches."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527113186, "post_id": 50498073, "comment_id": 88009161, "body": "I don&#39;t know of any built-in function that will do what you want. I don&#39;t think it exists in any programming language I&#39;m familiar with."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1527113447, "post_id": 50498073, "comment_id": 88009246, "body": "Dup: <a href=\"//stackoverflow.com/q/33437177\">python regex match more than once per index of search string</a>"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1527115019, "post_id": 50498073, "comment_id": 88009698, "body": "Are you able to import <code>regex</code> module instead <code>re</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527113263, "post_id": 50498167, "comment_id": 88009191, "body": "Question mark after <code>*</code> makes it non-greedy."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527113298, "post_id": 50498167, "comment_id": 88009203, "body": "If he doesn&#39;t use question mark it will return <code>[&#39;dcc&#39;]</code>, still not the desired result."}, {"owner": {"reputation": 452, "user_id": 3904619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vhjdq.jpg?s=128&g=1", "display_name": "Saeed Bolhasani", "link": "https://stackoverflow.com/users/3904619/saeed-bolhasani"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527116655, "post_id": 50498167, "comment_id": 88010092, "body": "As Barmer mentioned in comments, it seem there is no builtin-function for this thad do it."}, {"owner": {"reputation": 452, "user_id": 3904619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vhjdq.jpg?s=128&g=1", "display_name": "Saeed Bolhasani", "link": "https://stackoverflow.com/users/3904619/saeed-bolhasani"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527277447, "post_id": 50498167, "comment_id": 88083814, "body": "Probably you should define your own engine.If you want implement an engine to do this work, let me to know"}], "tags": [], "owner": {"reputation": 452, "user_id": 3904619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vhjdq.jpg?s=128&g=1", "display_name": "Saeed Bolhasani", "link": "https://stackoverflow.com/users/3904619/saeed-bolhasani"}, "is_accepted": false, "score": -2, "last_activity_date": 1527276877, "last_edit_date": 1527276877, "creation_date": 1527113234, "answer_id": 50498167, "question_id": 50498073, "link": "https://stackoverflow.com/questions/50498073/regex-for-search-specific-substring/50498167#50498167", "title": "Regex for search specific substring", "body": "<p>This is a very important point to understand: a regex engine always returns the leftmost match, even if a \"better\" match could be found later. When applying a regex to a string, the engine starts at the first character of the string. It tries all possible permutations of the regular expression at the first character. Only if all possibilities have been tried and found to fail, does the engine continue with the second character in the text. So when it find ['dc'] then engine pass 'dc' and continues with second 'c'. So it is impossible to match with ['dcc'].</p>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527113409, "post_id": 50498195, "comment_id": 88009235, "body": "How can that return multiple matches if it&#39;s anchored to the beginning and end?"}], "tags": [], "owner": {"reputation": 51, "user_id": 6066226, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dc3f414d5a84131005d96599de474e06?s=128&d=identicon&r=PG&f=1", "display_name": "sdavis891", "link": "https://stackoverflow.com/users/6066226/sdavis891"}, "is_accepted": false, "score": -1, "last_activity_date": 1527113387, "creation_date": 1527113387, "answer_id": 50498195, "question_id": 50498073, "link": "https://stackoverflow.com/questions/50498073/regex-for-search-specific-substring/50498195#50498195", "title": "Regex for search specific substring", "body": "<p>Try this regex:</p>\n\n<pre><code>^d.*c$\n</code></pre>\n\n<p>Essentially, you are looking for the start of the string to be d and the end of the string to be c.</p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1527113796, "creation_date": 1527113796, "answer_id": 50498262, "question_id": 50498073, "link": "https://stackoverflow.com/questions/50498073/regex-for-search-specific-substring/50498262#50498262", "title": "Regex for search specific substring", "body": "<p>What you're looking for isn't possible using any built-in regexp functions that I know of. <code>re.findall()</code> only returns non-overlapping matches. After it matches <code>dc</code>, it looks for another match starting after that. Since the rest of the string is just <code>c</code>, and that doesn't match, it's done, so it just returns <code>[\"dc\"]</code>.</p>\n\n<p>When you use a quantifier like <code>*</code>, you have a choice of making it greedy, or non-greedy -- either it finds the longest or shortest match of the regexp. To do what you want, you need a way of telling it to look for successively longer matches until it can't find anything. There's no simple way to do this. You can use a quantifier with a specific count, but you'd have to loop it in your code:</p>\n\n<pre><code>d.{0}c\nd.{1}c\nd.{2}c\nd.{3}c\n...\n</code></pre>\n\n<p>If you have a regexp with multiple quantified sub-patterns, you'd have to try all combinations of lengths.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2844090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d6b617b95209037c055f52e2801d0d4?s=128&d=identicon&r=PG", "display_name": "user149485", "link": "https://stackoverflow.com/users/2844090/user149485"}, "is_accepted": false, "score": 0, "last_activity_date": 1527115569, "last_edit_date": 1527115569, "creation_date": 1527115262, "answer_id": 50498469, "question_id": 50498073, "link": "https://stackoverflow.com/questions/50498073/regex-for-search-specific-substring/50498469#50498469", "title": "Regex for search specific substring", "body": "<p>Your two problems are that <code>.*</code> is greedy while <code>.*?</code> is minimal, and that re.findall() only returns <em>non-overlapping</em> matches. Here's a possible solution:</p>\n\n<pre><code>def findall_inner(expr, text):\n    explore = list(re.findall(expr, text))\n    matches = set()\n    while explore:\n        word = explore.pop()\n        if len(word) &gt;= 2 and word not in matches:\n            explore.extend(re.findall(expr, word[1:])) # try more removing first letter\n            explore.extend(re.findall(expr, word[:-1])) # try more removing last letter\n        matches.add(word)\n    return list(matches)\n\nfound = findall_inner(r\"d.*c\", \"dcc\")\nprint(found)\n</code></pre>\n\n<p>This is a little bit of overkill, using findall instead of search and using <code>&gt;= 2</code> instead of <code>&gt; 2</code>, as in this case there can only be one non-overlapping match of <code>d.*c</code> and one-character strings cannot match the pattern. But there is some flexibility in it depending on what other kinds of patterns you might want.</p>\n"}], "owner": {"reputation": 9, "user_id": 9837246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/421bb7b7b9e361bbe6204e884460cdbd?s=128&d=identicon&r=PG&f=1", "display_name": "Onion123", "link": "https://stackoverflow.com/users/9837246/onion123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "closed_date": 1527277369, "answer_count": 4, "score": 0, "last_activity_date": 1527276877, "creation_date": 1527112731, "last_edit_date": 1527113212, "question_id": 50498073, "link": "https://stackoverflow.com/questions/50498073/regex-for-search-specific-substring", "closed_reason": "Duplicate", "title": "Regex for search specific substring", "body": "<p>I tried this code:</p>\n\n<pre><code>re.findall(r\"d.*?c\", \"dcc\")\n</code></pre>\n\n<p>to search for substrings with first letter d and last letter c.</p>\n\n<p>But I get output <code>['dc']</code></p>\n\n<p>The correct output should be <code>['dc', 'dcc']</code>. </p>\n\n<p>What did i do wrong?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10169, "user_id": 6017840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0178fd0ada940a400e40867315020b2?s=128&d=identicon&r=PG&f=1", "display_name": "mootmoot", "link": "https://stackoverflow.com/users/6017840/mootmoot"}, "edited": false, "score": 0, "creation_date": 1527158714, "post_id": 50498063, "comment_id": 88026615, "body": "This has nothing to do with s3 but about plain data parsing using python"}], "answers": [{"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 1, "last_activity_date": 1527113487, "creation_date": 1527113487, "answer_id": 50498214, "question_id": 50498063, "link": "https://stackoverflow.com/questions/50498063/reading-a-file-line-wise/50498214#50498214", "title": "Reading a file line-wise", "body": "<p>The body is <a href=\"http://botocore.readthedocs.io/en/latest/reference/response.html\" rel=\"nofollow noreferrer\">streaming</a>, but when you do this you consume it all to EOF:</p>\n\n<pre><code>objectcontent['Body'].read()\n</code></pre>\n\n<p>So, don't do that.  Instead:</p>\n\n<pre><code>import encodings\nstream = encodings.utf_8.StreamReader(objectcontent['Body'])\nfor line in stream:\n    ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10169, "user_id": 6017840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0178fd0ada940a400e40867315020b2?s=128&d=identicon&r=PG&f=1", "display_name": "mootmoot", "link": "https://stackoverflow.com/users/6017840/mootmoot"}, "is_accepted": false, "score": 0, "last_activity_date": 1527159133, "creation_date": 1527159133, "answer_id": 50507489, "question_id": 50498063, "link": "https://stackoverflow.com/questions/50498063/reading-a-file-line-wise/50507489#50507489", "title": "Reading a file line-wise", "body": "<p>This is just plain string parsing, regardless of the storage.</p>\n\n<p>So back to python, the object <code>contentsins3</code> contains the whole file data, together with the <strong><code>line break</code></strong>.</p>\n\n<p>You can use splitlines() which will deal with <code>\\n</code>, <code>\\r\\n</code>. </p>\n\n<pre><code>for i in contentsins3.splitlines():\n    print(i)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 9059151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3cd4a8771a3954ab6f6e8adb90aa31a?s=128&d=identicon&r=PG&f=1", "display_name": "Crazywolf", "link": "https://stackoverflow.com/users/9059151/crazywolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 681, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1527159133, "creation_date": 1527112667, "last_edit_date": 1527158690, "question_id": 50498063, "link": "https://stackoverflow.com/questions/50498063/reading-a-file-line-wise", "title": "Reading a file line-wise", "body": "<p>I have a file named <code>data.dat</code> in an S3 bucket, the contents of the file are in 3 lines</p>\n\n<pre>\nfruit\njavaisnotafruit\nxyq\n</pre>\n\n<p>I am reading from s3 this way</p>\n\n<pre><code>objectcontent = s3.get_object(Bucket=\"contents-bucket\", Key=obj['Key'])\ncontentsins3 = objectcontent['Body'].read().decode('utf-8')\nprint(contentsins3)\n</code></pre>\n\n<p>When I do <code>print(contentsins3)</code> I am getting</p>\n\n<pre>\nfruit\njavaisnotafruit\nxyq\n</pre>\n\n<p>I have code for looping through the contents and read each line, how would I do that?</p>\n\n<pre><code>for i in contentsins3:\n    print(i)\n</code></pre>\n\n<p>How would I get each line in S3 line by line?</p>\n"}, {"tags": ["python", "arrays", "numpy", "indexing"], "answers": [{"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 1, "last_activity_date": 1527117257, "creation_date": 1527117257, "answer_id": 50498734, "question_id": 50497999, "link": "https://stackoverflow.com/questions/50497999/fast-way-to-extract-rois-in-3d-numpy-array/50498734#50498734", "title": "Fast way to extract ROIs in 3D numpy array", "body": "<p>It seems one can save at least a bit of time by sorting the ROI pixels and working with transposed coordinates:</p>\n\n<pre><code>&gt;&gt;&gt; def f_pp(im2D, idx):\n...     s = np.argsort(idx.ravel())\n...     out = np.empty((*idx.shape, im2D.shape[0]), im2D.dtype)\n...     out.reshape(-1, im2D.shape[0])[s] = im2D.T[idx.ravel()[s]]\n...     return out\n... \n\n# results are the same:\n&gt;&gt;&gt; np.all(f_pp(imgs.reshape(100, -1), idx) == np.moveaxis(imgs.reshape(100, -1)[:, idx], 0, 2))\nTrue\n\n&gt;&gt;&gt; timeit(\"imgs.reshape(100, -1)[:, idx]\", globals=globals(), number=100)\n1.3392871069954708\n# transposing alone is not enough:\n&gt;&gt;&gt; timeit(\"imgs.reshape(100, -1).T[idx]\", globals=globals(), number=100)\n1.3336799899989273\n# but together with sorting I see a 2x speedup\n&gt;&gt;&gt; timeit(\"f_pp(imgs.reshape(100, -1), idx)\", globals=globals(), number=100)\n0.5874412529956317\n# still much worse than if we had a more favorable memory layout in\n# the first place\n&gt;&gt;&gt; timeit(\"imgs.reshape(-1, 100)[idx]\", globals=globals(), number=100)\n0.06296327701420523\n</code></pre>\n"}], "owner": {"reputation": 1299, "user_id": 6091318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19ba977bdc5fd3605858aa4c8df1ef2b?s=128&d=identicon&r=PG&f=1", "display_name": "Brenlla", "link": "https://stackoverflow.com/users/6091318/brenlla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527117257, "creation_date": 1527112333, "question_id": 50497999, "link": "https://stackoverflow.com/questions/50497999/fast-way-to-extract-rois-in-3d-numpy-array", "title": "Fast way to extract ROIs in 3D numpy array", "body": "<p>I have a 1D array that contains some video data:</p>\n\n<pre><code>data=np.random.randint(0,high=255,size=(500*500*100),dtype=np.uint8)\nimgs=np.reshape(data,(100, 500,500)) # 100 frames, 500x500 pixels\n</code></pre>\n\n<p>I want to extract certain regions of interest (roi) along all the frames</p>\n\n<pre><code>idx=np.random.randint(0,high=500*500,size=(49, 300)) #300 rois, 49 points each\nrois=imgs.reshape(100, -1)[:,idx]\n</code></pre>\n\n<p>I flattened each frame and then took rois along 1st dimension. The real <code>imgs</code> array is larger than the shown here and the previous indexing operation can be a bit slow. If I reshape <code>imgs</code> in a different way (se below), <code>rois.size</code> is the same and the indexing is much faster, but this retrieves the wrong data</p>\n\n<pre><code>%timeit imgs.reshape(100, -1)[:,idx] # 13 ms\n%timeit imgs.reshape(-1, 100)[idx, :] # 1.2 ms, much faster but wrong data\n</code></pre>\n\n<p>In my real code the difference is almost 50x. Is there any way to index <code>imgs</code> fast?</p>\n"}, {"tags": ["python", "matplotlib", "plot", "legend"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1527115851, "post_id": 50497990, "comment_id": 88009908, "body": "It&#39;s sure possible. You may start by reading the <a href=\"https://matplotlib.org/tutorials/intermediate/legend_guide.html\" rel=\"nofollow noreferrer\">legend guide</a> and search for similar questions on SO."}, {"owner": {"reputation": 985, "user_id": 7390366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f01960502c9e2fdab7c996a2d20d9e?s=128&d=identicon&r=PG&f=1", "display_name": "pcu", "link": "https://stackoverflow.com/users/7390366/pcu"}, "edited": false, "score": 0, "creation_date": 1527137002, "post_id": 50497990, "comment_id": 88014660, "body": "You have to make your ouw legend marker. I.e., <a href=\"https://stackoverflow.com/questions/38647370/table-legend-in-matplotlib\" title=\"table legend in matplotlib\">stackoverflow.com/questions/38647370/table-legend-in-matplot&zwnj;&#8203;lib</a>"}, {"owner": {"reputation": 447, "user_id": 6135182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/689ff073d382aeecde2ab95f96961fea?s=128&d=identicon&r=PG&f=1", "display_name": "Zaus", "link": "https://stackoverflow.com/users/6135182/zaus"}, "edited": false, "score": 0, "creation_date": 1582315385, "post_id": 50497990, "comment_id": 106748703, "body": "I&#39;ve created a tablelegend function <a href=\"https://stackoverflow.com/a/60345118/6135182\">in this answer</a> that might be useful for this purpose. You can use it without <code>col_labels</code> for the plots here."}], "owner": {"reputation": 185, "user_id": 2081118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x45lb.jpg?s=128&g=1", "display_name": "Sam Bader", "link": "https://stackoverflow.com/users/2081118/sam-bader"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527112265, "creation_date": 1527112265, "question_id": 50497990, "link": "https://stackoverflow.com/questions/50497990/matplotlib-legends-with-multiple-curves-per-line", "title": "Matplotlib legends with multiple curves per line", "body": "<p>I've included two potential plot legend styles below.  The first, where each curve/marker gets its own description, is pretty typical in matplotlib.  But is there a way in matplotlib to achieve the second plot legend, where multiple curves are combined into one line of description?  Thank you!</p>\n\n<p><a href=\"https://i.stack.imgur.com/c0YL5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c0YL5.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 497, "user_id": 6871833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fe8d6c50412f3f618dd6716255401f?s=128&d=identicon&r=PG&f=1", "display_name": "Ywapom", "link": "https://stackoverflow.com/users/6871833/ywapom"}, "edited": false, "score": 0, "creation_date": 1527112877, "post_id": 50497987, "comment_id": 88009064, "body": "Did you try matrix.append(item)?"}, {"owner": {"reputation": 299, "user_id": 3047143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87db5dac2e899b66815a44fcb348c4fa?s=128&d=identicon&r=PG&f=1", "display_name": "Highness", "link": "https://stackoverflow.com/users/3047143/highness"}, "reply_to_user": {"reputation": 497, "user_id": 6871833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fe8d6c50412f3f618dd6716255401f?s=128&d=identicon&r=PG&f=1", "display_name": "Ywapom", "link": "https://stackoverflow.com/users/6871833/ywapom"}, "edited": false, "score": 0, "creation_date": 1527113262, "post_id": 50497987, "comment_id": 88009189, "body": "But I want them in the columns"}], "answers": [{"tags": [], "owner": {"reputation": 142, "user_id": 9830069, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HbliX.png?s=128&g=1", "display_name": "Tane", "link": "https://stackoverflow.com/users/9830069/tane"}, "is_accepted": false, "score": 2, "last_activity_date": 1527114548, "last_edit_date": 1527114548, "creation_date": 1527113968, "answer_id": 50498288, "question_id": 50497987, "link": "https://stackoverflow.com/questions/50497987/numpy-how-to-stack-arrays-in-columns/50498288#50498288", "title": "Numpy: How to stack arrays in columns?", "body": "<p>You could try putting all your arrays (or lists) into a matrix and then transposing it. This will work if all arrays are the same length.</p>\n\n<pre><code>mymatrix = np.asmatrix((array1, array2, array3)) #... putting arrays into matrix.\nmymatrix = mymatrix.transpose()\n</code></pre>\n\n<p>This should output a matrix with each array as a column. Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 2192, "user_id": 3106565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59de4b3d6299b5b375e072efd690870d?s=128&d=identicon&r=PG&f=1", "display_name": "Osman Mamun", "link": "https://stackoverflow.com/users/3106565/osman-mamun"}, "is_accepted": false, "score": 1, "last_activity_date": 1527114760, "creation_date": 1527114760, "answer_id": 50498401, "question_id": 50497987, "link": "https://stackoverflow.com/questions/50497987/numpy-how-to-stack-arrays-in-columns/50498401#50498401", "title": "Numpy: How to stack arrays in columns?", "body": "<p>If you have a, b, c, d np array of same length, the following code will accomplish what you want:</p>\n\n<pre><code>out_matrix = np.vstack([a, b, c, d]).transpose()\n</code></pre>\n\n<p>An example:</p>\n\n<pre><code>In [3]: a = np.array([1, 2, 3, 4])\n\nIn [4]: b = np.array([5, 6, 7, 8])\n\nIn [5]: c = np.array([2, 3, 4, 5])\n\nIn [6]: d = np.array([6, 8, 2, 4])\n\nIn [10]: np.vstack([a, b, c, d]).transpose()\nOut[10]: \n        array([[1, 5, 2, 6],\n               [2, 6, 3, 8],\n               [3, 7, 4, 2],\n               [4, 8, 5, 4]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1527115216, "last_edit_date": 1527115216, "creation_date": 1527114835, "answer_id": 50498410, "question_id": 50497987, "link": "https://stackoverflow.com/questions/50497987/numpy-how-to-stack-arrays-in-columns/50498410#50498410", "title": "Numpy: How to stack arrays in columns?", "body": "<p>Time and again, we recommend collecting the arrays in a list, and making the final array with one call.  That's more efficient, and usually easier to get right.</p>\n\n<pre><code>alist = []\nfor item in sorted_arrays:\n    alist.append(get_array(item)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>alist = [get_array(item) for item in sorted_arrays]\n</code></pre>\n\n<p>There are various ways of assembling the list.  Since you want columns, and assuming <code>get_array</code> produces equal sized 1d arrays:</p>\n\n<pre><code>arr = np.column_stack(alist)\n</code></pre>\n\n<p>Collecting them in rows and transposing that works too:</p>\n\n<pre><code>arr = np.array(alist).T\narr = np.vstack(alist).T\narr = np.stack(alist).T\narr = np.stack(alist, axis=1)\n</code></pre>\n\n<p>If the arrays are already 2d</p>\n\n<pre><code>arr = np.concatenate(alist, axis=1)\n</code></pre>\n\n<p>All the <code>stack</code> variations use <code>concatenate</code>, just varying in how they tweak the shape(s) of the input arrays.  The key to using <code>concatenate</code> is to understand the dimensions and shapes, and how to add dimensions as needed.  That should, soon or later, become fluent in that kind of coding.</p>\n\n<p>If they vary in shape or dimensions, things get messier.</p>\n\n<p>Equally good is to put the arrays in a pre-allocated array.  But  you need to know the desired final shape</p>\n\n<pre><code>arr = np.zeros((m,n), dtype)\nfor i, item in enumerate(sorted_arrays):\n    arr[:,i] = get_array(item)\n</code></pre>\n\n<p><code>n</code> is <code>len(sorted_arrays)</code>, and <code>m</code> is the length of one of <code>get_array(item)</code>.  You also need to know the expected <code>dtype</code> (int, float etc).</p>\n"}], "owner": {"reputation": 299, "user_id": 3047143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87db5dac2e899b66815a44fcb348c4fa?s=128&d=identicon&r=PG&f=1", "display_name": "Highness", "link": "https://stackoverflow.com/users/3047143/highness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1318, "favorite_count": 0, "accepted_answer_id": 50498410, "answer_count": 3, "score": 0, "last_activity_date": 1527115216, "creation_date": 1527112247, "question_id": 50497987, "link": "https://stackoverflow.com/questions/50497987/numpy-how-to-stack-arrays-in-columns", "title": "Numpy: How to stack arrays in columns?", "body": "<p>Let's say that I have n numpy arrays of the same length. I would like to now create a numpy matrix, sucht that each column of the matrix is one of the numpy arrays. How can I achieve this? Now I'm doing this in a loop and it produces the wrong results. </p>\n\n<p>Note: I have to be able to stack them next to each other one by one iteratively.</p>\n\n<p>my code looks like assume that get_array is a function that returns a certain array based on its argument. I don't know until after the loop, how many columns that I'm going to have.</p>\n\n<pre><code>matrix = np.empty((n_rows,))\nfor item in sorted_arrays:\n    array = get_array(item)\n    matrix = np.vstack((matrix,array))\n</code></pre>\n\n<p>any help would be appreciated</p>\n"}, {"tags": ["python", "python-2.7", "subprocess"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1527113626, "post_id": 50497978, "comment_id": 88009299, "body": "If you don&#39;t mind my asking, what is it you can&#39;t do with paramiko? (On Linux, you&#39;d want to take out the <code>shell=True</code> to fix this, but on Windows I&#39;m not much help on that end of the problem; that said, I&#39;m fairly familiar with both paramiko and OpenSSH, and quite curious what functionality you&#39;re looking for but can&#39;t find)."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1527115265, "post_id": 50497978, "comment_id": 88009769, "body": "It appears the error is coming from <code>ssh</code> itself and not from Python, correct? That implies an error in the parameters supplied to <code>ssh</code>. Maybe something missing?"}, {"owner": {"reputation": 33, "user_id": 7637391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ca7bb5a72bd9ff94a7f94f9d41a89b?s=128&d=identicon&r=PG&f=1", "display_name": "UnlimitedQuestions", "link": "https://stackoverflow.com/users/7637391/unlimitedquestions"}, "edited": false, "score": 0, "creation_date": 1527172994, "post_id": 50497978, "comment_id": 88036737, "body": "This is a shot in the dark but basically I&#39;m using paramiko to configure a switch remotely. Whenever I add a vlan (and ports to the vlan) to this switch, it automatically gets disabled even though the settings on the switch are to enable the ports. If I run the same commands locally on the switch, everything is fine. I&#39;m not sure if it&#39;s the interface between my python script and the switch. This is why I&#39;m now trying to use subprocess to see if it&#39;s paramiko that&#39;s causing the issue."}], "owner": {"reputation": 33, "user_id": 7637391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ca7bb5a72bd9ff94a7f94f9d41a89b?s=128&d=identicon&r=PG&f=1", "display_name": "UnlimitedQuestions", "link": "https://stackoverflow.com/users/7637391/unlimitedquestions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 418, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527112217, "creation_date": 1527112217, "question_id": 50497978, "link": "https://stackoverflow.com/questions/50497978/permission-denied-using-subprocess-in-windows", "title": "permission denied using subprocess in windows", "body": "<pre><code>import subprocess\n\nssh = subprocess.Popen(['ssh', '-o', 'BatchMode=yes', &lt;myhostname&gt;], shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)\n\nprint ssh.stderr.readlines()\n</code></pre>\n\n<p>When I run the code above I get the error <strong>\"Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\\r\\n\"</strong></p>\n\n<p>Most of the similar questions I've read are using linux, but I am using windows. I've also used paramiko and didn't have this permission issue, but I need to use subprocess to try something different that I can't do with paramiko.</p>\n"}, {"tags": ["python", "pycharm", "mypy"], "answers": [{"comments": [{"owner": {"reputation": 2239, "user_id": 1080125, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/261ff136c0a206a22930c0fe921ffcb4?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/1080125/erik"}, "edited": false, "score": 0, "creation_date": 1527148993, "post_id": 50498012, "comment_id": 88020321, "body": "The <a href=\"https://github.com/python/mypy\" rel=\"nofollow noreferrer\">Mypy README</a> mentions that &quot;PyCharm integrates its own implementation of PEP 484&quot; as well."}], "tags": [], "owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "is_accepted": true, "score": 8, "last_activity_date": 1602396182, "last_edit_date": 1602396182, "creation_date": 1527112399, "answer_id": 50498012, "question_id": 50497956, "link": "https://stackoverflow.com/questions/50497956/does-pycharm-use-mypy/50498012#50498012", "title": "Does PyCharm use Mypy?", "body": "<p><a href=\"https://github.com/python/mypy#ide-linter-integrations-and-pre-commit\" rel=\"nofollow noreferrer\">It appears that they went with their own implementation.</a></p>\n<p>Ultimately I would conjecture whether or not they use another open source library instead matters little; so long as <a href=\"https://www.jetbrains.com/help/pycharm/type-hinting-in-product.html\" rel=\"nofollow noreferrer\">they maintain their support for it</a>, their choice of implementation is inconsequential.</p>\n"}], "owner": {"reputation": 2239, "user_id": 1080125, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/261ff136c0a206a22930c0fe921ffcb4?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/1080125/erik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 868, "favorite_count": 2, "accepted_answer_id": 50498012, "answer_count": 1, "score": 8, "last_activity_date": 1602396182, "creation_date": 1527112060, "question_id": 50497956, "link": "https://stackoverflow.com/questions/50497956/does-pycharm-use-mypy", "title": "Does PyCharm use Mypy?", "body": "<p>Does PyCharm use Mypy or did JetBrains implement <a href=\"https://www.python.org/dev/peps/pep-0484/\" rel=\"noreferrer\">PEP 484</a> separately?</p>\n"}, {"tags": ["python", "io"], "comments": [{"owner": {"reputation": 497, "user_id": 6871833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fe8d6c50412f3f618dd6716255401f?s=128&d=identicon&r=PG&f=1", "display_name": "Ywapom", "link": "https://stackoverflow.com/users/6871833/ywapom"}, "edited": false, "score": 1, "creation_date": 1527112256, "post_id": 50497946, "comment_id": 88008837, "body": "read in reverse. see: <a href=\"https://stackoverflow.com/questions/2301789/read-a-file-in-reverse-order-using-python\" title=\"read a file in reverse order using python\">stackoverflow.com/questions/2301789/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 5927986, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/01211eeb54f499c26a59b161b4d3edf2?s=128&d=identicon&r=PG&f=1", "display_name": "yiping", "link": "https://stackoverflow.com/users/5927986/yiping"}, "is_accepted": true, "score": 0, "last_activity_date": 1527536053, "last_edit_date": 1527536053, "creation_date": 1527116456, "answer_id": 50498635, "question_id": 50497946, "link": "https://stackoverflow.com/questions/50497946/using-the-last-one-element-in-a-large-text-file-in-python/50498635#50498635", "title": "Using the last one element in a large text file in Python", "body": "<p>I found a library called <code>tailer</code> (<code>pip install tailer</code>) which is similar to linux <code>tail file_path --lines=1</code> command and it meets my goal.</p>\n\n<pre><code>import tailer\n# Read the last n lines\ntail = tailer.tail(open(file_path), last_n_lines))\n# tail is a list of last n lines\n</code></pre>\n\n<p>Or, using the <code>linechache</code> package, which is able to get the line by line number. To get the last line, first to count the number of lines in a text file. </p>\n\n<pre><code>total_line_number = sum(1 for line in open(file_path))\n</code></pre>\n\n<p>and then get the last line</p>\n\n<pre><code>import linecache\ntail = linecache.getline(file_path, total_line_number)\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5927986, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/01211eeb54f499c26a59b161b4d3edf2?s=128&d=identicon&r=PG&f=1", "display_name": "yiping", "link": "https://stackoverflow.com/users/5927986/yiping"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 50498635, "answer_count": 1, "score": 0, "last_activity_date": 1527536053, "creation_date": 1527112004, "question_id": 50497946, "link": "https://stackoverflow.com/questions/50497946/using-the-last-one-element-in-a-large-text-file-in-python", "title": "Using the last one element in a large text file in Python", "body": "<p>I have a 100 MB log file, but I only need the last element (all the elements are separated by '\\n'.), the structure of the file is</p>\n\n<pre><code>{JSON}\\n{JSON}\\n...{JSON}\\n\n</code></pre>\n\n<p>And the goal is to get the last JSON unit. </p>\n\n<p>How to do this efficiently?</p>\n\n<p>Thansk!</p>\n"}, {"tags": ["python", "opencv", "barcode", "barcode-scanner", "zbar"], "comments": [{"owner": {"reputation": 497, "user_id": 6871833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fe8d6c50412f3f618dd6716255401f?s=128&d=identicon&r=PG&f=1", "display_name": "Ywapom", "link": "https://stackoverflow.com/users/6871833/ywapom"}, "edited": false, "score": 0, "creation_date": 1527114345, "post_id": 50497945, "comment_id": 88009515, "body": "There is an article on what you are asking here: <a href=\"https://www.pyimagesearch.com/2014/11/24/detecting-barcodes-images-python-opencv/\" rel=\"nofollow noreferrer\">pyimagesearch.com/2014/11/24/&hellip;</a>"}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "reply_to_user": {"reputation": 497, "user_id": 6871833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8fe8d6c50412f3f618dd6716255401f?s=128&d=identicon&r=PG&f=1", "display_name": "Ywapom", "link": "https://stackoverflow.com/users/6871833/ywapom"}, "edited": false, "score": 1, "creation_date": 1527114530, "post_id": 50497945, "comment_id": 88009556, "body": "@Ywapom I mentioned it in the question already."}, {"owner": {"reputation": 2686, "user_id": 9705687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7dmz.jpg?s=128&g=1", "display_name": "bfris", "link": "https://stackoverflow.com/users/9705687/bfris"}, "edited": false, "score": 0, "creation_date": 1527176814, "post_id": 50497945, "comment_id": 88039250, "body": "Is your goal with this Question to find the barcode region, rotate it , and feed it to zbar? Do you expect the barcode to be a similar size in every image? How much variation do you expect in your images? I&#39;m guessing a cut down version of the last code snippet could be made to work, but you might have to search more than one found rectangle to find the barcode."}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "reply_to_user": {"reputation": 2686, "user_id": 9705687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7dmz.jpg?s=128&g=1", "display_name": "bfris", "link": "https://stackoverflow.com/users/9705687/bfris"}, "edited": false, "score": 0, "creation_date": 1527188643, "post_id": 50497945, "comment_id": 88045403, "body": "The goal @bfris is 1) to read the barcode-encoded number with zbar, this works already all the time and is easy, but above all 2) use the corners of the paper sheet&#39;s top left barcode and bottom right barcode to perform a perspective correction"}, {"owner": {"reputation": 2686, "user_id": 9705687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7dmz.jpg?s=128&g=1", "display_name": "bfris", "link": "https://stackoverflow.com/users/9705687/bfris"}, "edited": false, "score": 0, "creation_date": 1527190554, "post_id": 50497945, "comment_id": 88046326, "body": "You want perspective correction on barcode(s) or the whole sheet of paper? If it is the whole sheet of paper, then you need 4 corners of the paper. The sample photo you provided does not have the whole sheet of paper and we cannot see the second barcode."}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "reply_to_user": {"reputation": 2686, "user_id": 9705687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7dmz.jpg?s=128&g=1", "display_name": "bfris", "link": "https://stackoverflow.com/users/9705687/bfris"}, "edited": false, "score": 0, "creation_date": 1527192418, "post_id": 50497945, "comment_id": 88047263, "body": "Of the whole sheet of paper @bfris. Top left corner of top left barcode + top right corner of top left barcode + bottom left corner of bottom right barcode + bottom right corner of bottom right barcode = 4 points and it&#39;s enough to do a perspective correction / homography (I tried it by manually enter the coordinates and it works)."}], "answers": [{"comments": [{"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1527242247, "post_id": 50519348, "comment_id": 88064571, "body": "Thank you very much. A few remarks: 1) <code>If you drop the parameter 225 way down to 55</code>: is there a way to use the best thresh parameter automatically? Because the images have to be processed automatically without any manual thresholding slider parameter to set."}, {"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1527242360, "post_id": 50519348, "comment_id": 88064653, "body": "2) The page will potentially contain a lot of text, and the morphology filter could also detect a big block of text with high density as a rectangle. So are there additional features that we can test to be sure it&#39;s a barcode (like distance between consecutive bars, or start/stop symbol) and not a block of text?"}, {"owner": {"reputation": 2686, "user_id": 9705687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7dmz.jpg?s=128&g=1", "display_name": "bfris", "link": "https://stackoverflow.com/users/9705687/bfris"}, "reply_to_user": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1527259224, "post_id": 50519348, "comment_id": 88075290, "body": "@Basj: the CLAHE equalization step is meant to make the lighting more uniform. But you could also use <a href=\"https://docs.opencv.org/master/d7/d4d/tutorial_py_thresholding.html\" rel=\"nofollow noreferrer\">adaptive thresholding</a>. Regarding text, the morphology operations should thin the text way out. If remaining blobs are sufficiently larger or smaller, you can reject by size. You could also pass the rectangular parts to zbar to see if they&#39;re barcodes ( seems like this could be expensive). You may also give <a href=\"https://docs.opencv.org/master/d1/de0/tutorial_py_feature_homography.html\" rel=\"nofollow noreferrer\">feature matching and homography</a> a try."}, {"owner": {"reputation": 1133, "user_id": 6283073, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c7ae026b1a93bc8fadfb78934acdd2b7?s=128&d=identicon&r=PG&f=1", "display_name": "e.iluf", "link": "https://stackoverflow.com/users/6283073/e-iluf"}, "edited": false, "score": 0, "creation_date": 1606756823, "post_id": 50519348, "comment_id": 115051832, "body": "How can this method be apply to real time video capture? <a href=\"https://stackoverflow.com/questions/65078167/how-to-reliably-detect-a-barcodes-4-corners-in-real-time-video-capture\" title=\"how to reliably detect a barcodes 4 corners in real time video capture\">stackoverflow.com/questions/65078167/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2686, "user_id": 9705687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7dmz.jpg?s=128&g=1", "display_name": "bfris", "link": "https://stackoverflow.com/users/9705687/bfris"}, "is_accepted": true, "score": 7, "last_activity_date": 1527203066, "creation_date": 1527203066, "answer_id": 50519348, "question_id": 50497945, "link": "https://stackoverflow.com/questions/50497945/how-to-reliably-detect-a-barcodes-4-corners/50519348#50519348", "title": "How to reliably detect a barcode&#39;s 4 corners?", "body": "<p>Solution 2 is pretty good. The critical factor that made it fail on your image was the thresholding. If you drop the parameter <code>225</code> way down to <code>55</code>, you'll get much better results.</p>\n\n<p>I've reworked the code, making some tweaks here and there. The original code is fine if you prefer. The <a href=\"https://docs.opencv.org/master/\" rel=\"noreferrer\">documentation for OpenCV is quite good</a>, and there are very good <a href=\"https://docs.opencv.org/master/d6/d00/tutorial_py_root.html\" rel=\"noreferrer\">Python tutorials</a>.</p>\n\n<pre><code>import numpy as np\nimport cv2\n\nimage = cv2.imread(\"barcode.jpg\")\ngray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n\n# equalize lighting\nclahe = cv2.createCLAHE(clipLimit=2.0, tileGridSize=(8,8))\ngray = clahe.apply(gray)\n\n# edge enhancement\nedge_enh = cv2.Laplacian(gray, ddepth = cv2.CV_8U, \n                         ksize = 3, scale = 1, delta = 0)\ncv2.imshow(\"Edges\", edge_enh)\ncv2.waitKey(0)\nretval = cv2.imwrite(\"edge_enh.jpg\", edge_enh)\n\n# bilateral blur, which keeps edges\nblurred = cv2.bilateralFilter(edge_enh, 13, 50, 50)\n\n# use simple thresholding. adaptive thresholding might be more robust\n(_, thresh) = cv2.threshold(blurred, 55, 255, cv2.THRESH_BINARY)\ncv2.imshow(\"Thresholded\", thresh)\ncv2.waitKey(0)\nretval = cv2.imwrite(\"thresh.jpg\", thresh)\n\n# do some morphology to isolate just the barcode blob\nkernel = cv2.getStructuringElement(cv2.MORPH_RECT, (9, 9))\nclosed = cv2.morphologyEx(thresh, cv2.MORPH_CLOSE, kernel)\nclosed = cv2.erode(closed, None, iterations = 4)\nclosed = cv2.dilate(closed, None, iterations = 4)\ncv2.imshow(\"After morphology\", closed)\ncv2.waitKey(0)\nretval = cv2.imwrite(\"closed.jpg\", closed)\n\n# find contours left in the image\n(_, cnts, _) = cv2.findContours(closed.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)\nc = sorted(cnts, key = cv2.contourArea, reverse = True)[0]\nrect = cv2.minAreaRect(c)\nbox = np.int0(cv2.boxPoints(rect))\ncv2.drawContours(image, [box], -1, (0, 255, 0), 3)\nprint(box)\ncv2.imshow(\"found barcode\", image)\ncv2.waitKey(0)\nretval = cv2.imwrite(\"found.jpg\", image)\n</code></pre>\n\n<p>edge.jpg\n<a href=\"https://i.stack.imgur.com/o5ced.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/o5ced.jpg\" alt=\"enter image description here\"></a> </p>\n\n<p>thresh.jpg\n<a href=\"https://i.stack.imgur.com/GDTVg.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GDTVg.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>closed.jpg\n<a href=\"https://i.stack.imgur.com/42JWw.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/42JWw.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>found.jpg<a href=\"https://i.stack.imgur.com/c2oDF.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/c2oDF.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>output from console:</p>\n\n<pre><code>[[596 249]\n [470 213]\n [482 172]\n [608 209]]\n</code></pre>\n"}], "owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9038, "favorite_count": 4, "protected_date": 1610867585, "accepted_answer_id": 50519348, "answer_count": 1, "score": 9, "last_activity_date": 1610861039, "creation_date": 1527112003, "last_edit_date": 1527116085, "question_id": 50497945, "link": "https://stackoverflow.com/questions/50497945/how-to-reliably-detect-a-barcodes-4-corners", "title": "How to reliably detect a barcode&#39;s 4 corners?", "body": "<p>I'm trying to detect this <a href=\"https://en.wikipedia.org/wiki/Code_128\" rel=\"noreferrer\">Code128</a> barcode with Python + <code>zbar</code>  module: </p>\n\n<p><img src=\"https://i.stack.imgur.com/xgnHE.jpg\" width=\"300\"></p>\n\n<p>(Image download link <a href=\"https://i.stack.imgur.com/xgnHE.jpg\" rel=\"noreferrer\">here</a>).</p>\n\n<p>This works:</p>\n\n<pre><code>import cv2, numpy\nimport zbar\nfrom PIL import Image \nimport matplotlib.pyplot as plt\n\nscanner = zbar.ImageScanner()\npil = Image.open(\"000.jpg\").convert('L')\nwidth, height = pil.size    \nplt.imshow(pil); plt.show()\nimage = zbar.Image(width, height, 'Y800', pil.tobytes())\nresult = scanner.scan(image)\n\nfor symbol in image:\n    print symbol.data, symbol.type, symbol.quality, symbol.location, symbol.count, symbol.orientation\n</code></pre>\n\n<p>but only one point is detected: <code>(596, 210)</code>.</p>\n\n<p>If I apply a black and white thresholding:</p>\n\n<pre><code>pil = Image.open(\"000.jpg\").convert('L')\npil = pil .point(lambda x: 0 if x&lt;100 else 255, '1').convert('L')    \n</code></pre>\n\n<p>it's better, and we have 3 points: (596, 210), (482, 211), (596, 212). But it adds one more difficulty (finding the optimal threshold - here 100 - automatically for every new image).</p>\n\n<p>Still, we don't have the 4 corners of the barcode.</p>\n\n<p><strong>Question: how to reliably find the 4 corners of a barcode on an image, with Python?</strong> (and maybe OpenCV, or another library?)</p>\n\n<p>Notes:</p>\n\n<ul>\n<li><p>It <em>is</em> possible, this is a great example (but sadly not open-source as mentioned in the comments): </p>\n\n<p><a href=\"https://www.youtube.com/watch?v=sM7cOo4R-fE\" rel=\"noreferrer\">Object detection, very fast and robust blurry 1D barcode detection for real-time applications</a> </p>\n\n<p>The corners detection seems to be excellent and very fast, <strong>even if the barcode is only a small part of the whole image</strong> (this is important for me).</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=sM7cOo4R-fE\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zFlIu.jpg\" alt=\"\"></a></p></li>\n<li><p>Interesting solution: <a href=\"https://www.pyimagesearch.com/2014/12/15/real-time-barcode-detection-video-python-opencv/\" rel=\"noreferrer\">Real-time barcode detection in video with Python and OpenCV</a> but there are limitations of the method (see in the article: the barcode should be close up, etc.) that limit the potential use. Also I'm more looking for a ready-to-use library for this.</p></li>\n<li><p>Interesting solution 2: <a href=\"https://www.pyimagesearch.com/2014/11/24/detecting-barcodes-images-python-opencv/\" rel=\"noreferrer\">Detecting Barcodes in Images with Python and OpenCV</a> but again, it does not seem like a production-ready solution, but more a research in progress. Indeed, I tried their code on this image but the detection does not yield successful result. It has to be noted that it doesn't take any spec of the barcode in consideration for the detection (the fact there's a <a href=\"https://en.wikipedia.org/wiki/Code_128#Start/stop_and_encoded_data\" rel=\"noreferrer\">start/stop symbol</a>, etc.)</p>\n\n<pre><code>import numpy as np\nimport cv2\nimage = cv2.imread(\"000.jpg\")\ngray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\ngradX = cv2.Sobel(gray, ddepth = cv2.CV_32F, dx = 1, dy = 0, ksize = -1)\ngradY = cv2.Sobel(gray, ddepth = cv2.CV_32F, dx = 0, dy = 1, ksize = -1)\ngradient = cv2.subtract(gradX, gradY)\ngradient = cv2.convertScaleAbs(gradient)\nblurred = cv2.blur(gradient, (9, 9))\n(_, thresh) = cv2.threshold(blurred, 225, 255, cv2.THRESH_BINARY)\nkernel = cv2.getStructuringElement(cv2.MORPH_RECT, (21, 7))\nclosed = cv2.morphologyEx(thresh, cv2.MORPH_CLOSE, kernel)\nclosed = cv2.erode(closed, None, iterations = 4)\nclosed = cv2.dilate(closed, None, iterations = 4)\n(_, cnts, _) = cv2.findContours(closed.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)\nc = sorted(cnts, key = cv2.contourArea, reverse = True)[0]\nrect = cv2.minAreaRect(c)\nbox = np.int0(cv2.boxPoints(rect))\ncv2.drawContours(image, [box], -1, (0, 255, 0), 3)\ncv2.imshow(\"Image\", image)\ncv2.waitKey(0)\n</code></pre></li>\n</ul>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1527112137, "post_id": 50497930, "comment_id": 88008801, "body": "Ok, but what&#39;s the problem? Do you know how to access keys in a dict? Do you know how to check if a string contains a backslash? Do you know how to assign values to a dict?"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 9531581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abdf1c9be1cdb929b7d7bf1299afa59e?s=128&d=identicon&r=PG&f=1", "display_name": "zgallien", "link": "https://stackoverflow.com/users/9531581/zgallien"}, "is_accepted": false, "score": 0, "last_activity_date": 1527114765, "last_edit_date": 1527114765, "creation_date": 1527112863, "answer_id": 50498095, "question_id": 50497930, "link": "https://stackoverflow.com/questions/50497930/replace-a-specific-value-of-a-key-in-dictionary-using-python/50498095#50498095", "title": "Replace a specific value of a key in dictionary using python", "body": "<p>If you would like to simply replace the value of <code>'name'</code> with <code>'other'</code>:</p>\n\n<pre><code>dictionary['name'] = 'other'\n</code></pre>\n\n<p>If you would like to replace the value of <code>'name'</code> with <code>'other'</code> if the value of <code>'name'</code> contains <code>'\\\\'</code>:</p>\n\n<pre><code>if '\\\\' in dictionary['name']:\n    dictionary['name'] = 'other'\n</code></pre>\n\n<p>If you would like to search all dictionary values for one that contains <code>'\\\\'</code>, and then replace that value with <code>'other'</code>:</p>\n\n<pre><code>for k, v in dictionary.items():\n    if '\\\\' in str(v):\n        dictionary[k] = 'other'\n</code></pre>\n\n<p><code>v</code> is cast to a string to make it iterable.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 447, "user_id": 9366597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-0dmBQ5bfmXY/AAAAAAAAAAI/AAAAAAAAKwg/8jtV13ZFyTQ/photo.jpg?sz=128", "display_name": "kumar", "link": "https://stackoverflow.com/users/9366597/kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1527114765, "creation_date": 1527111924, "last_edit_date": 1527112634, "question_id": 50497930, "link": "https://stackoverflow.com/questions/50497930/replace-a-specific-value-of-a-key-in-dictionary-using-python", "title": "Replace a specific value of a key in dictionary using python", "body": "<p>Am having troubles with replacing a certain value for a key in dictionary. </p>\n\n<pre><code>dictionary = {'accesskey': 4567, 'name': u'D:\\\\PROG'}\n</code></pre>\n\n<p>Am trying to replace the value for <code>'name'</code> when name has <code>'\\'</code> in it, with <code>'other'</code>.</p>\n\n<p>Appreciate any little help.</p>\n\n<p>Thanks in advance!!</p>\n"}, {"tags": ["python", "interface", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1527112022, "post_id": 50497926, "comment_id": 88008756, "body": "what is <code>janela</code>? provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 609, "user_id": 9632639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f46c6e3bb22be35dd5b4486521a867?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/9632639/julio"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1527112335, "post_id": 50497926, "comment_id": 88008873, "body": "is a parameter I need. I just want to know, what can I use to change de background image of the push button, without clicking on it with the mouse."}], "answers": [{"comments": [{"owner": {"reputation": 609, "user_id": 9632639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f46c6e3bb22be35dd5b4486521a867?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/9632639/julio"}, "edited": false, "score": 0, "creation_date": 1527114120, "post_id": 50498131, "comment_id": 88009448, "body": "I LOVE YOU. Worked perfectly."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 0, "last_activity_date": 1527113065, "creation_date": 1527113065, "answer_id": 50498131, "question_id": 50497926, "link": "https://stackoverflow.com/questions/50497926/how-to-send-a-pressed-event-to-a-qpushbutton-pyqt5/50498131#50498131", "title": "How to send a pressed event to a QPushButton PyQT5?", "body": "<p>You have to use <code>setDown()</code> and a <code>QTimer</code>.</p>\n\n<pre><code>import sys\n\nfrom PyQt5 import QtCore, QtWidgets\n\nclass Widget(QtWidgets.QWidget):\n    def __init__(self):\n        QtWidgets.QWidget.__init__(self)\n        lay = QtWidgets.QVBoxLayout(self)\n        self.botaoVermelho = QtWidgets.QPushButton()\n        self.botaoVermelho.setObjectName(\"botaoVermelho\")\n        self.botaoVermelho.setStyleSheet(\"#botaoVermelho{\\n\"\n                                         \"border-image: url(\\\"src/images/bt_vermelho.png\\\");\\n\"\n                                         \"}\\n\"\n                                         \"\\n\"\n                                         \"#botaoVermelho:pressed{\\n\"\n                                         \"border-image: url(\\\"src/images/bt_vermelhoAct.png\\\");\\n\"\n                                         \"}\")\n        lay.addWidget(self.botaoVermelho)\n        self.emulate_clicked(self.botaoVermelho, 1000)\n\n    def emulate_clicked(self, button, ms):\n        button.setDown(True)\n        QtCore.QTimer.singleShot(ms, lambda: button.setDown(False))\n\nif __name__ == '__main__':\n    app = QtWidgets.QApplication(sys.argv)\n    w = Widget()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 609, "user_id": 9632639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f46c6e3bb22be35dd5b4486521a867?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/9632639/julio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "accepted_answer_id": 50498131, "answer_count": 1, "score": 0, "last_activity_date": 1527113065, "creation_date": 1527111897, "question_id": 50497926, "link": "https://stackoverflow.com/questions/50497926/how-to-send-a-pressed-event-to-a-qpushbutton-pyqt5", "title": "How to send a pressed event to a QPushButton PyQT5?", "body": "<p>I need help with something. I'm using PyQT to make a game in Python. So, I'm trying to change the background image of the <strong>self.botaoVermelho</strong> for 1 second (basically, the button \"activates\" and after 1 second it \"deactivates\"), but I don't know how to do it because I need to do this WITHOUT clicking on the button.</p>\n\n<p>This is my code:</p>\n\n<pre><code>class Interface(Mediado):\n    def __init__(self, janela):\n        self.janela = janela\n        self.centralwidget = QtWidgets.QWidget(self.janela)\n        self.botaoVermelho = QtWidgets.QPushButton(self.centralwidget)\n        self.menubar = QtWidgets.QMenuBar(self.janela)\n        self.statusbar = QtWidgets.QStatusBar(self.janela)\n\n        self.configuraUi()\n\n    def configuraUi(self):\n        self.janela.setObjectName(\"Genius\")\n        self.janela.resize(451, 498)\n        self.janela.setStyleSheet(\"background-color:#1d1d1d;\")\n        self.centralwidget.setObjectName(\"centralwidget\")\n        self.botaoVermelho.setGeometry(QtCore.QRect(230, 20, 200, 200))\n        self.botaoVermelho.setStyleSheet(\"#botaoVermelho{\\n\"\n                                         \"background-color:transparent;\\n\"\n                                         \"border-image: url(\\\"src/images/bt_vermelho.png\\\");\\n\"\n                                         \"}\\n\"\n                                         \"\\n\"\n                                         \"#botaoVermelho:pressed{\\n\"\n                                         \"background-color:transparent;\\n\"\n                                         \"border-image: url(\\\"src/images/bt_vermelhoAct.png\\\");\\n\"\n                                         \"}\")\n        self.botaoVermelho.setObjectName(\"botaoVermelho\")\n        self.botaoVermelho.raise_()\n        self.janela.setCentralWidget(self.centralwidget)\n        self.menubar.setGeometry(QtCore.QRect(0, 0, 451, 21))\n        self.menubar.setObjectName(\"menubar\")\n        self.janela.setMenuBar(self.menubar)\n        self.statusbar.setObjectName(\"statusbar\")\n        self.janela.setStatusBar(self.statusbar)\n        _translate = QtCore.QCoreApplication.translate\n        self.janela.setWindowTitle(_translate(\"Genius\", \"MainWindow\"))\n        QtCore.QMetaObject.connectSlotsByName(self.janela)\n</code></pre>\n\n<p>I'm using QtDesigner/QtCreator to create the design of interface and using a terminal command to convert .ui -> .py</p>\n\n<p>Thanks if you can help me.</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1527115661, "post_id": 50497922, "comment_id": 88009865, "body": "Of course you would need to call <code>plt.subplots_adjust</code> for every figure you have, not only the last one."}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 9836518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/352ccfe5e59e99c4913ceb2be8d48faa?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmet", "link": "https://stackoverflow.com/users/9836518/ahmet"}, "is_accepted": true, "score": 0, "last_activity_date": 1527149991, "creation_date": 1527149991, "answer_id": 50504359, "question_id": 50497922, "link": "https://stackoverflow.com/questions/50497922/configure-plots-in-matplotlib/50504359#50504359", "title": "Configure Plots in Matplotlib", "body": "<p>I found the solution. The problem was with the <code>45\u00b0</code> in <code>label.set_rotation()</code>. I have changed it to <code>15\u00b0</code> and it works.</p>\n"}], "owner": {"reputation": 55, "user_id": 9836518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/352ccfe5e59e99c4913ceb2be8d48faa?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmet", "link": "https://stackoverflow.com/users/9836518/ahmet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 50504359, "answer_count": 1, "score": 1, "last_activity_date": 1527149991, "creation_date": 1527111879, "last_edit_date": 1527112055, "question_id": 50497922, "link": "https://stackoverflow.com/questions/50497922/configure-plots-in-matplotlib", "title": "Configure Plots in Matplotlib", "body": "<p>The two plot must be set tight to the figure window so that the date axis will be showen appropriate with it x label. I have tried <code>plt.subplots_adjust(..)</code> but in this case the changes will be applied just on one plot. Another soluation that I 've tried <code>fig1.tight_layout()</code> but it didn't work. </p>\n\n<p>Code: </p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport time\nfrom datetime import datetime, timedelta\nimport matplotlib.dates as mdates\n\nEQ = {'2017-08-23 02:04:00':(18,1),'2017-08-23 02:05:00':(20,2),'2017-08-23 02:06:00':(12,3),'2017-08-23 02:07:00':(22,4)}\nLIST_P1=[];LIST_P2=[];Time_P=[]\nfor j_p in EQ.keys():\n        LIST_P1.append(EQ[j_p][1])\n        LIST_P2.append(EQ[j_p][0])\n        Time_P.append(time.mktime(time.strptime(j_p, \"%Y-%m-%d %H:%M:%S\")))\n\ndateconv=np.vectorize(datetime.fromtimestamp)\nDate_F1=dateconv(Time_P)\nfig1 = plt.figure(1)\nax1 = plt.gca()\nax1.xaxis.set_major_formatter(mdates.DateFormatter(\"%Y-%m-%d %H:%M:%S\"))\nax1.plot_date(Date_F1,LIST_P1,'g-')\nax1.set_ylabel('Y-axis',fontsize=14)\nax1.set_xlabel('X-axis',fontsize=14)\nax1.grid(True)\nfor label in ax1.xaxis.get_ticklabels():\n    label.set_rotation(45)\n\nfig2 = plt.figure(2)\nax2 = plt.gca()\nax2.xaxis.set_major_formatter(mdates.DateFormatter(\"%Y-%m-%d %H:%M:%S\"))\nax2.plot_date(Date_F1,LIST_P2,'g-')\nax2.set_ylabel('Y-axis',fontsize=14)\nax2.set_xlabel('X-axis',fontsize=14)\nax2.grid(True)\nfor label in ax2.xaxis.get_ticklabels():\n    label.set_rotation(45)\nplt.subplots_adjust(left = 0.07,right=0.985,bottom=0.16,top=0.955,hspace=0.200,wspace=0.200)\nplt.show()\n</code></pre>\n\n<p>The plots should look like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/sehss.jpg\" alt=\"Fig.1\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/dDyzi.jpg\" alt=\"Fig.2\"></p>\n"}, {"tags": ["python", "html", "django"], "answers": [{"comments": [{"owner": {"reputation": 1149, "user_id": 4231985, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10203705295985572/picture?type=large", "display_name": "kkawabat", "link": "https://stackoverflow.com/users/4231985/kkawabat"}, "edited": false, "score": 0, "creation_date": 1527113943, "post_id": 50497972, "comment_id": 88009387, "body": "I am new to Django so this is immensely helpful! Thank you."}], "tags": [], "owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "is_accepted": true, "score": 1, "last_activity_date": 1527112184, "creation_date": 1527112184, "answer_id": 50497972, "question_id": 50497871, "link": "https://stackoverflow.com/questions/50497871/django-get-id-of-posted-form-in-post-method-of-view-that-contains-list-of-form/50497972#50497972", "title": "Django - get id of posted form in post method of view that contains list of forms", "body": "<p>To have the <code>pk</code> of the object you can send it via an <code>hidden input</code></p>\n\n<pre><code>&lt;input type='hidden' value='{{lecture.pk}}' name='pk'&gt;\n</code></pre>\n\n<p>by the way, you will never get the audio with the key <code>audio</code>, since that name does not exist in your form, you should provide the name in the <code>input file</code></p>\n\n<pre><code>&lt;input type=\"file\" name='audio' onchange=\"$('#upload_{{lecture.pk}}').submit();\" value=\"Upload Audio...\"/&gt;\n</code></pre>\n\n<p>Since your form is to send files, you miss to provide the header with <code>enctype='multipart/form-data'</code>, so your whole form would be like the following:</p>\n\n<pre><code>{% for lecture in past_lectures %}\n&lt;form method = \"post\" id=upload_{{lecture.pk}} action=\"\"  enctype='multipart/form-data'&gt;\n    {% csrf_token %}\n    &lt;input type='hidden' value='{{lecture.pk}}' name='id'&gt;\n    &lt;input type=\"file\" name='audio' onchange=\"$('#upload_{{lecture.pk}}').submit();\" value=\"Upload Audio...\"/&gt;\n&lt;/form&gt;\n{% endfor %}\n</code></pre>\n\n<p>Data available for your view:</p>\n\n<pre><code>pk = request.POST.get('id')\naudio = request.FILES.get('audio')\n</code></pre>\n"}], "owner": {"reputation": 1149, "user_id": 4231985, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10203705295985572/picture?type=large", "display_name": "kkawabat", "link": "https://stackoverflow.com/users/4231985/kkawabat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2822, "favorite_count": 0, "accepted_answer_id": 50497972, "answer_count": 1, "score": 0, "last_activity_date": 1527112184, "creation_date": 1527111614, "question_id": 50497871, "link": "https://stackoverflow.com/questions/50497871/django-get-id-of-posted-form-in-post-method-of-view-that-contains-list-of-form", "title": "Django - get id of posted form in post method of view that contains list of forms", "body": "<p>I have a view that display a list of Lecture object each lecture has a file select button that automatically submits the selected file.</p>\n\n<p>The relevant part in html template:</p>\n\n<pre><code>{% for lecture in past_lectures %}\n    &lt;form method = \"post\" id=upload_{{lecture.pk}} action=\"\"&gt;\n        {% csrf_token %}\n        &lt;input type=\"file\" onchange=\"$('#upload_{{lecture.pk}}').submit();\" value=\"Upload Audio...\"/&gt;\n    &lt;/form&gt;\n{% endfor %}\n</code></pre>\n\n<p>The view class:</p>\n\n<pre><code>class LectureListView(ListView):\n    model = Lecture\n    ordering = ('name', )\n    context_object_name = 'past_lectures'\n    template_name = 'professor/home.html'\n\n    def get_queryset(self):\n        professor = self.request.user.professor\n        lecture_queryset = Lecture.objects.filter(course__professor = professor)\n\n        return lecture_queryset\n\n    def post(self, request,):\n        pk = int(request.POST['id'].split('_').[-1]) #return the pk portion of the id of the form\n        lecture = Lecture.objects.get(pk=pk)\n        lecture.audio = request.FILES['audio'] #audio is the name of the filefield in Lecture model\n        lecture.save()\n        return reverse('professor:home')\n</code></pre>\n\n<p>The problem is that request.POST['id'] does not return the id of the form but rather looks for any element with the name 'id' which doesn't exist.</p>\n\n<p>How do I get the lecture.pk value based on the form submitted?</p>\n"}, {"tags": ["python", "python-2.7", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 1277, "user_id": 1339820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e3a347c5e4ca2fc3b6b5e0baf971302?s=128&d=identicon&r=PG", "display_name": "pcurry", "link": "https://stackoverflow.com/users/1339820/pcurry"}, "is_accepted": false, "score": 1, "last_activity_date": 1527112971, "last_edit_date": 1527112971, "creation_date": 1527112415, "answer_id": 50498014, "question_id": 50497863, "link": "https://stackoverflow.com/questions/50497863/beautifulsoup-can-access-string-indices-but-my-program-cant/50498014#50498014", "title": "BeautifulSoup can access string indices, but my program cant", "body": "<p>Basically, it's not indexing with a string, it's using the string as a key to a hash table. What you are getting from Beautiful Soup is a mapping type, rather than a sequential type.</p>\n\n<p>Try opening the example code that you displayed in an interpreter. Print the type of each one of the <code>t</code>'s that the soup call returns. I expect you'll find that they are dictionaries rather than lists or strings.</p>\n\n<p>What you are trying to do is index inside a string using a string index, which won't work - sequential types like strings and lists can be indexed by an integer, but not by a string.</p>\n\n<p>Mapping types, on the other hand, hold key-value pairs. They take something that can generate a consistent hash, and use it to look up a value. Dictionaries are the most common mapping type in Python. Other objects and classes can also implement key lookup behavior by implementing the <code>__getitem__(x)</code> magic method.</p>\n\n<p>Here are links into the Python 2 standard library documentation:</p>\n\n<p>Sequential types: <a href=\"https://docs.python.org/2/library/stdtypes.html?highlight=sequential%20types#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/stdtypes.html?highlight=sequential%20types#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange</a></p>\n\n<p>Mapping types - <a href=\"https://docs.python.org/2/library/stdtypes.html#mapping-types-dict\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/stdtypes.html#mapping-types-dict</a> </p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 7366692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae5440e760575ac78556d33341851c7d?s=128&d=identicon&r=PG&f=1", "display_name": "nikniknik", "link": "https://stackoverflow.com/users/7366692/nikniknik"}, "is_accepted": false, "score": 0, "last_activity_date": 1527112653, "creation_date": 1527112653, "answer_id": 50498060, "question_id": 50497863, "link": "https://stackoverflow.com/questions/50497863/beautifulsoup-can-access-string-indices-but-my-program-cant/50498060#50498060", "title": "BeautifulSoup can access string indices, but my program cant", "body": "<p><code>soup.find_all</code> returns a list of <code>bs4.element.Tag</code> objects. In your loop you access this list's objects and by writing you get the <em>title</em> attribute of an element.</p>\n\n<p><code>lister = [\"hello\", \"how are you\"]</code> is just a list of strings</p>\n"}], "owner": {"reputation": 1, "user_id": 9673241, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Cameron Nelson", "link": "https://stackoverflow.com/users/9673241/cameron-nelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1527118588, "creation_date": 1527111570, "last_edit_date": 1527118588, "question_id": 50497863, "link": "https://stackoverflow.com/questions/50497863/beautifulsoup-can-access-string-indices-but-my-program-cant", "title": "BeautifulSoup can access string indices, but my program cant", "body": "<p>When I run this BeautifulSoup function in a loop to find the tag titles I can print the indices from the list it returns. When I saw this I was confused because I thought you could not put strings into any type of indices.</p>\n\n<pre><code>geturl = \nrequests.get(\"https://www.techbargains.com/category/359/laptops\").text\nsoup = bs(geturl, \"html.parser\")\n\nfor t in soup.find_all(\"a\", class_ = \"details\"):\n    print t[\"title\"]\n</code></pre>\n\n<p>This code works fine, here is the code I wrote to try to understand how this works.</p>\n\n<pre><code>def listo():\n    lister = [\"hello\", \"how are you\"]\n    return lister\n\n\nfor a in listo():\n    print a[\"hello\"]\n</code></pre>\n\n<p>When I try and run it I get this error:</p>\n\n<pre><code>print a[\"hello\"]\nTypeError: string indices must be integers, not str\n</code></pre>\n\n<p>What is the difference between the two? Why can Beautiful Soups function access that data but mine cant.</p>\n"}, {"tags": ["python", "tkinter", "label", "tkinter-entry"], "comments": [{"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1527111845, "post_id": 50497841, "comment_id": 88008679, "body": "You have a method called <code>.totalSum</code>, but you shadow that with a Label called <code>.totalSum</code>."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1527111880, "post_id": 50497841, "comment_id": 88008692, "body": "Your <code>totalSum</code> method is never called. If I understand correctly, you want the sum to update automatically every time one of the 3 numbers changes?"}, {"owner": {"reputation": 141, "user_id": 9413211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yag32.jpg?s=128&g=1", "display_name": "Math", "link": "https://stackoverflow.com/users/9413211/math"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1527112418, "post_id": 50497841, "comment_id": 88008900, "body": "Arh I can see that @Aran-Fey And your right, thats exactly what I want.I tried to change my function name to sumTotal, but dosent work."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 9413211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yag32.jpg?s=128&g=1", "display_name": "Math", "link": "https://stackoverflow.com/users/9413211/math"}, "edited": false, "score": 0, "creation_date": 1527112961, "post_id": 50497977, "comment_id": 88009091, "body": "Isent it possible to get it to update automatic? Without a button."}, {"owner": {"reputation": 455, "user_id": 9360556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed09d3a7fcc77f566dfc9e6d7492d674?s=128&d=identicon&r=PG", "display_name": "Flaming_Dorito", "link": "https://stackoverflow.com/users/9360556/flaming-dorito"}, "reply_to_user": {"reputation": 141, "user_id": 9413211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yag32.jpg?s=128&g=1", "display_name": "Math", "link": "https://stackoverflow.com/users/9413211/math"}, "edited": false, "score": 0, "creation_date": 1527113169, "post_id": 50497977, "comment_id": 88009153, "body": "@Math There is no event that happens when the values of an EntryBox value is changed. If there was it could be possible to call the method, but it isn&#39;t possible as it require&#39;s an event."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "reply_to_user": {"reputation": 141, "user_id": 9413211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yag32.jpg?s=128&g=1", "display_name": "Math", "link": "https://stackoverflow.com/users/9413211/math"}, "edited": false, "score": 0, "creation_date": 1527113569, "post_id": 50497977, "comment_id": 88009286, "body": "@Math Sort of. You can bind Event handlers to each Entry that call the summing method whenever a key or mousebutton is pressed. Eg, using your original method name, <code>self.entry1.bind(&quot;&lt;Key&gt;&quot;, self.totalSum);  self.entry1.bind(&quot;&lt;Button&gt;&quot;, self.totalSum)</code> Etc."}, {"owner": {"reputation": 455, "user_id": 9360556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed09d3a7fcc77f566dfc9e6d7492d674?s=128&d=identicon&r=PG", "display_name": "Flaming_Dorito", "link": "https://stackoverflow.com/users/9360556/flaming-dorito"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1527113752, "post_id": 50497977, "comment_id": 88009329, "body": "@PM2Ring Yes but that still wouldn&#39;t be automatic and requires a key press."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1527114238, "post_id": 50497977, "comment_id": 88009488, "body": "How can you change the value of an Entry without using a key press or a mousebutton press?"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1527114456, "post_id": 50497977, "comment_id": 88009540, "body": "Why do you say &quot;the method <code>calculateTotalSum</code> needs to be called inside the <code>__init__</code> method&quot;? You <i>can</i> define a callback function inside <code>__init__</code>  like your version does, but it&#39;s also possible to use a method like the OP&#39;s <code>totalSum</code> as the callback. Of course, it needs to have the appropriate argument signature."}, {"owner": {"reputation": 455, "user_id": 9360556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed09d3a7fcc77f566dfc9e6d7492d674?s=128&d=identicon&r=PG", "display_name": "Flaming_Dorito", "link": "https://stackoverflow.com/users/9360556/flaming-dorito"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1527114593, "post_id": 50497977, "comment_id": 88009581, "body": "@PM2Ring I tried but it didn&#39;t work."}], "tags": [], "owner": {"reputation": 455, "user_id": 9360556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed09d3a7fcc77f566dfc9e6d7492d674?s=128&d=identicon&r=PG", "display_name": "Flaming_Dorito", "link": "https://stackoverflow.com/users/9360556/flaming-dorito"}, "is_accepted": false, "score": 0, "last_activity_date": 1527112216, "creation_date": 1527112216, "answer_id": 50497977, "question_id": 50497841, "link": "https://stackoverflow.com/questions/50497841/add-and-get-the-sum-off-floats-from-entry-in-label/50497977#50497977", "title": "Add and get the sum off floats from entry in label", "body": "<p>The <code>totalSum</code> method is never called.</p>\n\n<p>Ive created a button that calls the method and calculates the sum.</p>\n\n<p>Also, ive changed the method name since you already have a label called <code>totalSum</code>.</p>\n\n<p>And the method <code>calculateTotalSum</code> needs to be called inside the <code>__init__</code> method.</p>\n\n<p>Here's the working code:</p>\n\n<pre><code>from tkinter import *\n\nclass App(Frame):\n\n    def __init__(self, root=None):\n        Frame.__init__(self, root)\n\n        self.var = DoubleVar()\n        self.var.set(float(0.00))\n        self.var2 = DoubleVar()\n        self.var2.set(float(0.00))\n        self.var3 = DoubleVar()\n        self.var3.set(float(0.00))\n\n        self.entry1 = Entry(root, textvariable=self.var)\n        self.entry1.grid(row=2, column=1)\n        self.entry2 = Entry(root, textvariable=self.var2)\n        self.entry2.grid(row=3, column=1)\n        self.entry3 = Entry(root, textvariable=self.var3)\n        self.entry3.grid(row=4, column=1)\n\n\n        self.total = DoubleVar()\n        self.total.set(float(0.00))\n\n        self.totalSum = Label(root, textvariable=self.total, relief='sunken')\n        self.totalSum.grid(row=5, column=1)\n\n        def calculateTotalSum():\n            self.total.set(self.var.get() + self.var2.get() + self.var3.get())\n\n        self.button = Button(root, text=\"Calculate\", command=calculateTotalSum)\n        self.button.grid(row=6, column=1)\n\n\nroot = Tk()\napp = App(root)\nroot.title(\"help\")\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 9413211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yag32.jpg?s=128&g=1", "display_name": "Math", "link": "https://stackoverflow.com/users/9413211/math"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "closed_date": 1527112231, "answer_count": 1, "score": 1, "last_activity_date": 1527112216, "creation_date": 1527111444, "question_id": 50497841, "link": "https://stackoverflow.com/questions/50497841/add-and-get-the-sum-off-floats-from-entry-in-label", "closed_reason": "Duplicate", "title": "Add and get the sum off floats from entry in label", "body": "<p>I got a bit of a noob question. </p>\n\n<p>I want  to add the floats from the 3 entries, so the total float is shown in the label.</p>\n\n<p>My solution is this and I can't get it to work, what I'm doing wrong? </p>\n\n<p>Thx in advance..</p>\n\n<pre><code>from tkinter import *\n\nclass App(Frame):\n    def __init__(self, root=None):\n        Frame.__init__(self, root)\n\n        self.var = DoubleVar()\n        self.var.set(float(0.00))\n        self.var2 = DoubleVar()\n        self.var2.set(float(0.00))\n        self.var3 = DoubleVar()\n        self.var3.set(float(0.00))\n\n        self.entry1 = Entry(root, textvariable=self.var)\n        self.entry1.grid(row=2, column=1)\n        self.entry2 = Entry(root, textvariable=self.var2)\n        self.entry2.grid(row=3, column=1)\n        self.entry3 = Entry(root, textvariable=self.var3)\n        self.entry3.grid(row=4, column=1)\n\n\n        self.total = DoubleVar()\n        self.total.set(float(0.00))\n\n        self.totalSum = Label(root, textvariable=self.total, relief='sunken')\n        self.totalSum.grid(row=5, column=1)\n\n\n    def totalSum(self):\n        self.total.set(self.var.get() + self.var2.get() + self.var3.get())\n\n\n\nroot = Tk()\napp = App(root)\nroot.title(\"help\")\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "regex"], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1527111362, "creation_date": 1527111362, "answer_id": 50497821, "question_id": 50497777, "link": "https://stackoverflow.com/questions/50497777/splitting-string-into-words-with-regex/50497821#50497821", "title": "Splitting string into words with regex", "body": "<p>You can use <code>re.split</code>:</p>\n\n<pre><code>import re\ns = \"ads1323z123123c123123890sdfakslk123klaad,313ks\"\nresults = list(filter(lambda x:len(x) &lt;= 3, re.split('[^a-zA-Z]+', s)))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['ads', 'z', 'c', 'ks']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1729, "user_id": 13099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d8c0312aba4b30a918e49932051d48de?s=128&d=identicon&r=PG", "display_name": "Ed L", "link": "https://stackoverflow.com/users/13099/ed-l"}, "is_accepted": true, "score": -1, "last_activity_date": 1527175872, "last_edit_date": 1527175872, "creation_date": 1527113047, "answer_id": 50498129, "question_id": 50497777, "link": "https://stackoverflow.com/questions/50497777/splitting-string-into-words-with-regex/50498129#50498129", "title": "Splitting string into words with regex", "body": "<p>You can also use lookahead and lookbehind expressions to match only 3-character words:</p>\n\n<pre><code>import re\ns = \"ads1323z123123c123123890sdfakslk123klaad,313ks\"\nre.findall('(?&lt;![a-zA-Z])[a-zA-Z]{1,3}(?![a-zA-Z])', s)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['ads', 'z', 'c', 'ks']\n</code></pre>\n\n<p>The regular expression works like this: the middle part <code>[a-zA-Z]{1,3}</code> says \"match 1 to 3 alphabetic characters\". The first part <code>(?&lt;![a-z][A-Z])</code> is a negative lookbehind assertion that asserts that the 3 alphabetic characters are not preceded by an alphabetic character.  the last part <code>(?![a-zA-Z])</code> is a negative lookahead assertion that asserts that the 3 alphabetic characters are not followed by an alphabetic character.</p>\n"}], "owner": {"reputation": 3, "user_id": 9837183, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kreer", "link": "https://stackoverflow.com/users/9837183/kreer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 50498129, "answer_count": 2, "score": -5, "last_activity_date": 1527175872, "creation_date": 1527111099, "last_edit_date": 1527111214, "question_id": 50497777, "link": "https://stackoverflow.com/questions/50497777/splitting-string-into-words-with-regex", "title": "Splitting string into words with regex", "body": "<p>How can I split string with regex into words not longer than 3 characters like:</p>\n\n<p><strong>Input</strong></p>\n\n<pre><code>\"ads1323z123123c123123890sdfakslk123klaad,313ks\"\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>['ads', 'z', 'c', 'ks']\n</code></pre>\n"}, {"tags": ["python", "boost", "yocto"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9837166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525170979214db0ca4e9236e07c1c9dd?s=128&d=identicon&r=PG&f=1", "display_name": "DoyDoy", "link": "https://stackoverflow.com/users/9837166/doydoy"}, "edited": false, "score": 0, "creation_date": 1527178414, "post_id": 50499470, "comment_id": 88040196, "body": "That explains it, thank you. I managed to get my packages that use boost-python to build by linking libboost_python.so to libboost_python3.so. Unexpected, surely. Wise?"}, {"owner": {"reputation": 23, "user_id": 9837166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525170979214db0ca4e9236e07c1c9dd?s=128&d=identicon&r=PG&f=1", "display_name": "DoyDoy", "link": "https://stackoverflow.com/users/9837166/doydoy"}, "edited": false, "score": 0, "creation_date": 1528495725, "post_id": 50499470, "comment_id": 88545460, "body": "No, not wise it turns out, unsurprisingly. What did work for me was to (sticking with Rocko) using an earlier commit of the recipe for boost, before the upgrade to Python3. Suppress the standard recipe with <code>BBMASK += &quot;.*recipes-support&#47;boost.*&quot;</code>."}], "tags": [], "owner": {"reputation": 974, "user_id": 5828092, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-penVrDtGqSY/AAAAAAAAAAI/AAAAAAAADoA/yymVGPU2s1U/photo.jpg?sz=128", "display_name": "Khem", "link": "https://stackoverflow.com/users/5828092/khem"}, "is_accepted": true, "score": 1, "last_activity_date": 1527123928, "creation_date": 1527123928, "answer_id": 50499470, "question_id": 50497738, "link": "https://stackoverflow.com/questions/50497738/how-to-configure-yocto-boost-to-support-python-2/50499470#50499470", "title": "How to configure Yocto / Boost to support Python 2?", "body": "<p>Support for python2 in boost has been removed in rocko onwards, see this <a href=\"https://bugzilla.yoctoproject.org/show_bug.cgi?id=11104\" rel=\"nofollow noreferrer\">bug</a></p>\n\n<p>Its not easy to make both python2 and python3 support to keep together for boost</p>\n\n<p>I think you might want to revert.</p>\n\n<p><a href=\"http://git.openembedded.org/openembedded-core/commit/?id=0f5418eb0ce12811b16d2e3c28c28140a509f685\" rel=\"nofollow noreferrer\">http://git.openembedded.org/openembedded-core/commit/?id=0f5418eb0ce12811b16d2e3c28c28140a509f685</a></p>\n"}], "owner": {"reputation": 23, "user_id": 9837166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525170979214db0ca4e9236e07c1c9dd?s=128&d=identicon&r=PG&f=1", "display_name": "DoyDoy", "link": "https://stackoverflow.com/users/9837166/doydoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 50499470, "answer_count": 1, "score": 1, "last_activity_date": 1527123928, "creation_date": 1527110898, "last_edit_date": 1527111565, "question_id": 50497738, "link": "https://stackoverflow.com/questions/50497738/how-to-configure-yocto-boost-to-support-python-2", "title": "How to configure Yocto / Boost to support Python 2?", "body": "<p>I can build Yocto Morty for our embedded target and include \"libboost_python.so\". Now I'm switching over to Rocko (for unrelated reasons) and I can't get that library to be included in the build.</p>\n\n<p>In local.conf, I have:</p>\n\n<pre><code>IMAGE_INSTALL_append = \" boost\"\nPACKAGECONFIG_pn-boost = \"python\"\n</code></pre>\n\n<p>which used to be enough on Morty. On Rocko, no matter what I try (variants of PACKAGECONFIG, hacking the boost.inc file - which is mostly greek to me) I can get libboost_python3.so but not libboost_python.so. Presumably, the recipe has changed since Morty to default to not providing Python 2, and I can't find the foo to re-enable it.</p>\n\n<p>What instruction should I put in local.conf in order to force the inclusion of Python 2 support?</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1527133256, "post_id": 50497649, "comment_id": 88013725, "body": "That recipe uses the fairly uncommon Message widget for table cells, which normally tries to achieve a certain aspect ratio of the text (width 50% greater than height, by default), without taking into account the width available.  I&#39;m having a hard time imagining situations in which that&#39;s actually the most desirable behavior.  You might want to experiment with modifying the <code>Data_Cell</code> class to use a Label or read-only Text widget, instead."}, {"owner": {"reputation": 11, "user_id": 9831947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148f5452f976c3e65e3959467d9a2568?s=128&d=identicon&r=PG&f=1", "display_name": "TSolo315", "link": "https://stackoverflow.com/users/9831947/tsolo315"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1527136516, "post_id": 50497649, "comment_id": 88014537, "body": "Thanks @jasonharper switching from the message widget to a label widget seemed to do the trick. I think it was set to message so text would wrap automatically? Just adding a wraplength in the label options seems to work fine though."}], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 1859871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae6772ccc21c2816e80124cb3ab1502c?s=128&d=identicon&r=PG", "display_name": "user1859871", "link": "https://stackoverflow.com/users/1859871/user1859871"}, "is_accepted": false, "score": 0, "last_activity_date": 1613851863, "creation_date": 1613851863, "answer_id": 66296083, "question_id": 50497649, "link": "https://stackoverflow.com/questions/50497649/information-not-filling-the-row-of-a-table-in-a-tkinter-gui/66296083#66296083", "title": "Information not filling the row of a table in a tkinter gui", "body": "<p>I swapped the tkinter.Message for a simple tkinter.Label with a &quot;wraplength&quot; parameter of 300.  That fixed it for me.</p>\n<p>Here is the modified DataCell class</p>\n<pre><code>class Data_Cell(Cell):\n    def __init__(self, master, variable, anchor=W, bordercolor=None, \n             borderwidth=1, padx=0, pady=0, \n             background=None, foreground=None, font=None):\n    Cell.__init__(self, master, background=background,\n                  highlightbackground=bordercolor, \n                  highlightcolor=bordercolor, \n                  highlightthickness=borderwidth, bd=0)\n\n    self._message_widget = Label(self, textvariable=variable, \n                                 font=font, background=background,\n                                 foreground=foreground,\n                                 wraplength=300)\n    self._message_widget.pack(expand=True, padx=padx, pady=pady,\n                              anchor=anchor)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9831947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/148f5452f976c3e65e3959467d9a2568?s=128&d=identicon&r=PG&f=1", "display_name": "TSolo315", "link": "https://stackoverflow.com/users/9831947/tsolo315"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1712, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1613851863, "creation_date": 1527110474, "last_edit_date": 1527121612, "question_id": 50497649, "link": "https://stackoverflow.com/questions/50497649/information-not-filling-the-row-of-a-table-in-a-tkinter-gui", "title": "Information not filling the row of a table in a tkinter gui", "body": "<p>I'm writing a program that will scrape data from a website and will place the data in a table in a tkinter gui.</p>\n\n<p>I found this recipe for making the table: <a href=\"https://code.activestate.com/recipes/580793-tkinter-table-with-scrollbars/\" rel=\"nofollow noreferrer\">https://code.activestate.com/recipes/580793-tkinter-table-with-scrollbars/</a> which is perfect for what I am trying to do.</p>\n\n<p>The problem is that the values I input do not fill the row. They wrap far too early making the information difficult to read. How do I fix this? </p>\n\n<p>Example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/yK9O6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yK9O6.png\" alt=\"Picture of a table\"></a></p>\n\n<p>Relevant code:</p>\n\n<pre><code>from tkinter import *\nimport tabless # Name of the script linked above\n\nroot = Tk()\ntable = tabless.Table(root, [\"Title 1\", \"Title 2\", \"Title 3\", \"Title 4\"], column_minwidths=[200, 350, 100, 100])\ntable.pack(padx=10,pady=10,side=LEFT)\ntable.set_data([[1,2,3,4],[5,6,7,8], [9,10,11,12], [13,14,15,16], [17,18,19,20],[21,22,23,24], [25,26,27,28], [29,30,31,32], [33,34,35,36], [37,38,39,40], [41,42,43,44], [45,46,47,48], [49,50,51,52], [53,54,55,56], [57,58,59,60], [61,62,63,64], [65,66,67,68], [69,70,71,72], [73,74,75,76], [77,78,79,80], [81,82,83,84], [85,86,87,88], [89,90,91,92], [93,94,95,96], [97,98,99,100], [101,102,103,104], [105,106,107,108], [109,110,111,112], [113,114,115,116], [117,118,119,120], [121,122,123,124], [125,126,127,128], [129,130,131,132], [133,134,135,136], [137,138,139,140], [141,142,143,144], [145,146,147,148], [149,150,151,152], [153,154,155,156], [157,158,159,160], [161,162,163,164], [165,166,167,168], [169,170,171,172], [173,174,175,176], [177,178,179,180], [181,182,183,184], [185,186,187,188], [189,190,191,192], [193,194,195,196], [197,198,199,200]])\nexample_list = []\nfor i in range(0, 50):\n    example_list.append(['thisisalongnumber12123123123', True, 'thisisashorternumber12123123123', 'thisisaname', 'thisisaverylongtitle12345678901111', 'number', 'number'])\nfor count, i in enumerate(example_list):\n    table.cell(count, 0, i[3])\n    table.cell(count, 1, i[4])\n    table.cell(count, 2, i[5])\n    table.cell(count, 3, i[6])\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "google-colaboratory"], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 5073526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64cc9cd2a20ba080c4daa83b3f6c1fe4?s=128&d=identicon&r=PG&f=1", "display_name": "Nagarjun", "link": "https://stackoverflow.com/users/5073526/nagarjun"}, "is_accepted": true, "score": 2, "last_activity_date": 1551958302, "last_edit_date": 1551958302, "creation_date": 1527159717, "answer_id": 50507681, "question_id": 50497648, "link": "https://stackoverflow.com/questions/50497648/training-tensorflow-detection-api-on-colaboratory/50507681#50507681", "title": "Training tensorflow detection api on colaboratory", "body": "<p>The below snippet is for setting up the tensorflow object detection api on colab specifically. </p>\n\n<p>`</p>\n\n<pre><code>!apt-get install protobuf-compiler python-pil python-lxml python-tk\n!pip install Cython\n!pip install jupyter\n!pip install matplotlib\n\n!git clone https://github.com/tensorflow/models.git\n\n%cd /content/models/research\n\n!protoc object_detection/protos/*.proto --python_out=.\n\n%set_env PYTHONPATH=/content/models/research:/content/models/research/slim\n\n!python object_detection/builders/model_builder_test.py\n</code></pre>\n\n<p>`</p>\n\n<p>On google colab, the above series of lines need to be executed in order to have your object detection api up and running.\nThe actual details for installation are found <a href=\"https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/installation.md\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>The below line specifies how to run the train script</p>\n\n<pre><code>%run object_detection/train.py \\\n    --logtostderr \\\n    --pipeline_config_path=${PATH_TO_YOUR_PIPELINE_CONFIG} \\\n    --train_dir=${PATH_TO_TRAIN_DIR}\n</code></pre>\n\n<p>From the official documentation, all these scripts are run from within the </p>\n\n<blockquote>\n  <p>/models/research</p>\n</blockquote>\n\n<p>directory. Not from within the object detection folder itself.</p>\n"}], "owner": {"reputation": 23, "user_id": 9732446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5451993cc5b3046684848d1517e4c0d4?s=128&d=identicon&r=PG&f=1", "display_name": "eColumbia99", "link": "https://stackoverflow.com/users/9732446/ecolumbia99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 888, "favorite_count": 2, "accepted_answer_id": 50507681, "answer_count": 1, "score": 2, "last_activity_date": 1551958302, "creation_date": 1527110471, "last_edit_date": 1527114485, "question_id": 50497648, "link": "https://stackoverflow.com/questions/50497648/training-tensorflow-detection-api-on-colaboratory", "title": "Training tensorflow detection api on colaboratory", "body": "<p>I'm trying to train tensorflow object detection api on colaboratory. </p>\n\n<p>When I run train.py as '%run train.py ...'  I receive the error 'Duplicate flag error: the flag 'master' is defined twice.</p>\n\n<p>When I run train.py as '!python train.py ...' I receive the error 'no module named deployment'. </p>\n\n<p>I have set the path using: \nimport sys</p>\n\n<pre><code>sys.path.append('/content/models/research/slim')\nsys.path.append('/content/models/research')\nsys.path.append('/content/models/research/object_detection') \n</code></pre>\n\n<p>In addition I am running train from the object_detection directory. I'm not sure what else I need to do to run the train.py script successfully. </p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 1, "last_activity_date": 1527111553, "last_edit_date": 1527111553, "creation_date": 1527110941, "answer_id": 50497746, "question_id": 50497646, "link": "https://stackoverflow.com/questions/50497646/column-names-changing-after-a-pandas-groupby/50497746#50497746", "title": "column names changing after a pandas groupby", "body": "<p>Since dictionary renaming in agg is deprecated we can create multiindex and flatten as one way.</p>\n\n<pre><code>aggregation = {\n        'payload_size': [\n            'mean',\n            'std',\n            'var',\n            'max',\n            'min',\n            'count'\n            ],\n        'frame_time_delta': [\n            'mean',\n            'std',\n            'var',\n        ]\n    }\n\ndf_out = df.groupby(by=['ip_src', 'ip_dst']).agg(aggregation)\ndf_out.columns = df_out.columns.map('{0[1]}_{0[0]}'.format)\nprint(df_out.reset_index())\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>         ip_src         ip_dst  mean_payload_size  std_payload_size  var_payload_size  max_payload_size  min_payload_size  count_payload_size  mean_frame_time_delta  std_frame_time_delta  var_frame_time_delta\n0  192.168.1.101    31.13.94.53              172.0               0.0               0.0             172.0             172.0                   2               0.006474              0.009156              0.000084\n1    31.13.94.53  192.168.1.101              176.0               NaN               NaN             176.0             176.0                   1               0.006656                   NaN                   NaN\n</code></pre>\n\n<hr>\n\n<p>If you want to go a little further and shorted column names you can use <code>replace</code>:</p>\n\n<pre><code>aggregation = {\n        'payload_size': [\n            'mean',\n            'std',\n            'var',\n            'max',\n            'min',\n            'count'\n            ],\n        'frame_time_delta': [\n            'mean',\n            'std',\n            'var',\n        ]\n    }\n\ndf_out = df.groupby(by=['ip_src', 'ip_dst']).agg(aggregation)\ndf_out.columns = df_out.columns.map('{0[1]}_{0[0]}'.format)\ndf_out = df_out.rename(columns=lambda x: x.replace('payload_size','PLS').replace('frame_time_delta','FTD'))\nprint(df_out.reset_index())\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>          ip_src         ip_dst  mean_PLS  std_PLS  var_PLS  max_PLS  min_PLS  count_PLS  mean_FTD   std_FTD   var_FTD\n0  192.168.1.101    31.13.94.53     172.0      0.0      0.0    172.0    172.0          2  0.006474  0.009156  0.000084\n1    31.13.94.53  192.168.1.101     176.0      NaN      NaN    176.0    176.0          1  0.006656       NaN       NaN\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 9164661, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9ec46cf78ed417e97a1fcdb402f0ae55?s=128&d=identicon&r=PG&f=1", "display_name": "sooaran", "link": "https://stackoverflow.com/users/9164661/sooaran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 50497746, "answer_count": 1, "score": 0, "last_activity_date": 1527111553, "creation_date": 1527110463, "question_id": 50497646, "link": "https://stackoverflow.com/questions/50497646/column-names-changing-after-a-pandas-groupby", "title": "column names changing after a pandas groupby", "body": "<p>I've got a dataframe like:</p>\n\n<pre><code>ip_src         ip_dst         ip_proto  frame_time_delta payload_size  \n192.168.1.101  31.13.94.53    17.0      0.000000         172.0   \n31.13.94.53    192.168.1.101  17.0      0.006656         176.0   \n192.168.1.101  31.13.94.53    17.0      0.012948         172.0  \n</code></pre>\n\n<p>Then, I applied a groupby using some of th columns using:</p>\n\n<pre><code>aggregation = {\n        'payload_size': {\n            'mean_payload_size': 'mean',\n            'std_payload_size': 'std',\n            'var_payload_size': 'var',\n            'max_payload_size': 'max',\n            'min_payload_size': 'min',\n            'quantity': 'count'\n        },\n        'frame_time_delta': {\n            'mean_frame_time_delta': 'mean',\n            'sd_frame_time_delta': 'std',\n            'var_frame_time_delta': 'var',\n        }\n    }\n\n    df = df.groupby(by=['ip_src', 'ip_dst'],as_index=False,).agg(aggregation)\n</code></pre>\n\n<p>but the columns names are awfull, I mean, I get this:</p>\n\n<pre><code>ip_src,ip_dst,payload_size,payload_size,payload_size,payload_size,payload_size,payload_size,frame_time_delta,frame_time_delta,frame_time_delta,..... \n</code></pre>\n\n<p>and after that, the names I pointed out in the aggregation dictionary.</p>\n\n<p>How can I fix that?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527110673, "post_id": 50497642, "comment_id": 88008253, "body": "Why is the <code>name</code> entry in your desired result a list of a dictionary instead of just a dictionary?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527110858, "post_id": 50497642, "comment_id": 88008310, "body": "You need to write a function that parses the name into the dictionary you want. You can&#39;t just use <code>split()</code>, because that won&#39;t extract the prefix, and won&#39;t put <code>Missing Value</code> into all the missing fields."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527110951, "post_id": 50497642, "comment_id": 88008349, "body": "Names have many different formats, so this is likely to be complicated and produce errors for cases you don&#39;t handle properly. This is why forms usually have separate input fields for first name, last name, title, etc."}, {"owner": {"reputation": 785, "user_id": 8055932, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H7J5tVWHAmc/AAAAAAAAAAI/AAAAAAAABco/2UxuTrYVxeQ/photo.jpg?sz=128", "display_name": "Ryan Tam", "link": "https://stackoverflow.com/users/8055932/ryan-tam"}, "edited": false, "score": 0, "creation_date": 1527111309, "post_id": 50497642, "comment_id": 88008472, "body": "For the final output, check this out <a href=\"https://github.com/datamade/probablepeople\" rel=\"nofollow noreferrer\">github.com/datamade/probablepeople</a>. I am using it at the moment, not perfect but certainly beats implementing it from scratch."}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 8765205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k6uwS.jpg?s=128&g=1", "display_name": "marcel.js", "link": "https://stackoverflow.com/users/8765205/marcel-js"}, "edited": false, "score": 0, "creation_date": 1527137662, "post_id": 50501215, "comment_id": 88014836, "body": "If the name dict really has to be in a list, you easy could implement this by changing the line where the row_dict is created."}], "tags": [], "owner": {"reputation": 313, "user_id": 8765205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k6uwS.jpg?s=128&g=1", "display_name": "marcel.js", "link": "https://stackoverflow.com/users/8765205/marcel-js"}, "is_accepted": true, "score": 1, "last_activity_date": 1527137465, "creation_date": 1527137465, "answer_id": 50501215, "question_id": 50497642, "link": "https://stackoverflow.com/questions/50497642/python-split-and-create-json-data-from-csv/50501215#50501215", "title": "python: split and create json data from csv", "body": "<p>Just use <code>.split()</code> some times and create a new dict.</p>\n\n<pre><code>import json\n\ncsv = '''1, \"Smith, Mr. Adams\"\n2, \"McAdams, Mrs. Audrey\"\n3, \"McAdams, Doctor John\"\n4, \"Missing Value\"'''\n\ncsv_lines = csv.split('\\n')\n\n\nfor line in csv_lines:\n  id = line.split(',')[0]\n  name = line[len(id)+3:-1]\n  split = name.split(', ')\n  last_name = split[0]\n  if len(split) &lt; 2:\n    first_name = last_name\n    prefix = last_name\n  else:\n    prefix = split[1].split(' ')[0]\n    first_name = split[1][len(prefix)+1:]\n\n  row_dict = {'id': id, 'name': {'last_name': last_name, 'prefix': prefix, 'first_name': first_name}}\n\n  json_data = json.dumps(row_dict)\n  print(json_data)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\"id\": \"1\", \"name\": {\"last_name\": \"Smith\", \"prefix\": \"Mr.\", \"first_name\": \"Adams\"}}\n{\"id\": \"2\", \"name\": {\"last_name\": \"McAdams\", \"prefix\": \"Mrs.\", \"first_name\": \"Audrey\"}}\n{\"id\": \"3\", \"name\": {\"last_name\": \"McAdams\", \"prefix\": \"Doctor\", \"first_name\": \"John\"}}\n{\"id\": \"4\", \"name\": {\"last_name\": \"Missing Value\", \"prefix\": \"Missing Value\", \"first_name\": \"Missing Value\"}}\n</code></pre>\n"}], "owner": {"reputation": 1772, "user_id": 4150078, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/VvMca.png?s=128&g=1", "display_name": "sharp", "link": "https://stackoverflow.com/users/4150078/sharp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 50501215, "answer_count": 1, "score": 0, "last_activity_date": 1527137465, "creation_date": 1527110451, "question_id": 50497642, "link": "https://stackoverflow.com/questions/50497642/python-split-and-create-json-data-from-csv", "title": "python: split and create json data from csv", "body": "<p>How do I create a nested field from csv to json? I looked at the other stackoverflow, but they are not quite what I am trying to format. I have a data set with 1 column that I have to convert into a nested field. </p>\n\n<p>Data:</p>\n\n<pre><code>ID, NAME\n1, \"Smith, Mr. Adams\"\n2, \"McAdams, Mrs. Audrey\"\n3, \"McAdams, Doctor John\"\n4, \"Missing Value\"\n</code></pre>\n\n<p>CODE: </p>\n\n<pre><code>with open('test.csv', 'r') as file:\n            headers = next(file) #skip the headers\n            fieldnames = headers.rstrip().split(\",\")\n            csv_reader = csv.DictReader(file, fieldnames) #creating a dictionary\n            import datetime\n            for row_dict in csv_reader:\n                row_dict['name'] = row_dict['name'].split(\",\")\n                json_data = json.dumps(row_dict)\n                print(json_data)\n</code></pre>\n\n<p>I am getting output in a list but it is not nested.</p>\n\n<pre><code>{\"id\": \"1\", \"name\": [\"Smith\", \" Mr. Adams\"]}\n{\"id\": \"2\", \"name\": [\"McAdams\", \" Mrs. Audrey\"]}\n{\"id\": \"3\", \"name\": [\"McAdams\", \" Doctor John\"]}\n{\"id\": \"4\", \"name\": [\"Missing Value\"]}\n</code></pre>\n\n<p>Final output: Is there any way to do this?</p>\n\n<pre><code>{\"id\": \"1\", \"name\": [{\"last_name\": \"Smith\",\n                      \"prefix\": \"Mr.\",\n                      \"first_name\":  \"Adams\"}]}\n{\"id\": \"1\", \"name\": [{\"last_name\": \"McAdams\",\n                      \"prefix\": \"Mrs.\",\n                      \"first_name\":  \"Audrey\"}]}\n{\"id\": \"1\", \"name\": [{\"last_name\": \"McAdams\",\n                      \"prefix\": \"Dr.\",\n                      \"first_name\":  \"John\"}]}\n{\"id\": \"1\", \"name\": [{\"last_name\": \"Missing Value\",\n                      \"prefix\": \"Missing Value\",\n                      \"first_name\":  \"Missing Value\"}]}                   \n</code></pre>\n"}, {"tags": ["python", "macos", "ctypes", "messagebox"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1527110616, "post_id": 50497479, "comment_id": 88008230, "body": "Calling <code>windll.user32.MessageBoxA()</code> is most definitely Windows-specific. There are ways of doing the equivalent on almost <i>any</i> system using the <code>tkinter</code> module."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1527142823, "post_id": 50497479, "comment_id": 88016827, "body": "I forgot to say, you can also do <code>.... display dialog &quot;blah blah&quot; with title &quot;Put your title here&quot;</code>"}, {"owner": {"reputation": 401, "user_id": 8677167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b7aae2e1d0db1d93f590e09fe3280d?s=128&d=identicon&r=PG&f=1", "display_name": "themthem", "link": "https://stackoverflow.com/users/8677167/themthem"}, "edited": false, "score": 0, "creation_date": 1591780247, "post_id": 50497479, "comment_id": 110183074, "body": "I know that this question is answered, but I wanted to tell you that I&#39;ve made a simple package that does this: <a href=\"https://github.com/ninest/notipy_osx\" rel=\"nofollow noreferrer\">github.com/ninest/notipy_osx</a>  It is basically a wrapper around apple script"}], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 8705841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LOfrN.jpg?s=128&g=1", "display_name": "elkshadow5", "link": "https://stackoverflow.com/users/8705841/elkshadow5"}, "edited": false, "score": 1, "creation_date": 1527118899, "post_id": 50497906, "comment_id": 88010670, "body": "Ok that&#39;s pretty cool. Currently though, I have to run <code>system(&quot;osascript -e &#39;Tell application \\&quot;System Events\\&quot; to display dialog \\&quot;&quot;+body+&quot;\\&quot;&#39;&quot;)</code> to get it to work. <code>subprocess</code> is being funky."}], "tags": [], "owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": true, "score": 4, "last_activity_date": 1527149076, "last_edit_date": 1527149076, "creation_date": 1527111794, "answer_id": 50497906, "question_id": 50497479, "link": "https://stackoverflow.com/questions/50497479/create-a-messagebox-in-python-for-mac/50497906#50497906", "title": "Create a MessageBox in Python for Mac?", "body": "<p>If you type this into a Terminal on any Mac, you'll get a dialog box:</p>\n\n<pre><code>osascript -e 'Tell application \"System Events\" to display dialog \"Some Funky Message\" with title \"Hello Matey\"'\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/I4wfg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I4wfg.png\" alt=\"enter image description here\"></a></p>\n\n<p>See <a href=\"https://stackoverflow.com/a/28749940/2836621\">here</a> for further examples.</p>\n\n<p>So, just use a Python subprocess call to run that... <a href=\"https://docs.python.org/3/library/subprocess.html\" rel=\"nofollow noreferrer\">subprocess documentation</a>, or use <code>system()</code>.</p>\n\n<p>Nothing to install. No dependencies. You can also ask user for values, select files or directories and pick colours using the same technique. The dialog boxes are all native Mac ones - not some ugly imitation.</p>\n"}, {"comments": [{"owner": {"reputation": 4521, "user_id": 10041823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gJ8EW.jpg?s=128&g=1", "display_name": "Alexandre B.", "link": "https://stackoverflow.com/users/10041823/alexandre-b"}, "edited": false, "score": 0, "creation_date": 1565252594, "post_id": 57408155, "comment_id": 101296952, "body": "Please, explain (even briefly) what you code does and how it answer the question. Have a look at <a href=\"https://stackoverflow.com/help/how-to-answer\"><i>How do I write a good answer?</i></a>."}], "tags": [], "owner": {"reputation": 11, "user_id": 10669193, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-r_3tqI8p14o/AAAAAAAAAAI/AAAAAAAAAWY/I73z4qsiWXg/photo.jpg?sz=128", "display_name": "ch9473", "link": "https://stackoverflow.com/users/10669193/ch9473"}, "is_accepted": false, "score": 1, "last_activity_date": 1565252544, "last_edit_date": 1565252544, "creation_date": 1565252274, "answer_id": 57408155, "question_id": 50497479, "link": "https://stackoverflow.com/questions/50497479/create-a-messagebox-in-python-for-mac/57408155#57408155", "title": "Create a MessageBox in Python for Mac?", "body": "<pre><code>import os\n\nbody_Str=\"Body of Dialog\"\n\ntitle_Str=\"Title\"\n\nos.system(\"\"\"osascript -e \\'Tell application \\\"System Events\\\" to display dialog \\\"\"+body_Str+\"\\\" with title \\\"\"+title_Str+\"\\\"\\'\"\"\")\n</code></pre>\n\n<p>this is much better</p>\n"}], "owner": {"reputation": 170, "user_id": 8705841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LOfrN.jpg?s=128&g=1", "display_name": "elkshadow5", "link": "https://stackoverflow.com/users/8705841/elkshadow5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2774, "favorite_count": 1, "accepted_answer_id": 50497906, "answer_count": 2, "score": 4, "last_activity_date": 1565252544, "creation_date": 1527109654, "last_edit_date": 1527119111, "question_id": 50497479, "link": "https://stackoverflow.com/questions/50497479/create-a-messagebox-in-python-for-mac", "title": "Create a MessageBox in Python for Mac?", "body": "<p>Currently working through a free online class for Python from Cybrary (I'm coding in 3.6), but I use a Mac while the presenter uses Windows. So far, there have been very few differences if any.</p>\n\n<p>The current section deals with learning and using Ctypes however, and the \"assignment\" says to <code>Write a function which takes two arguments, title and body and creates a MessageBox with those arguments</code>.</p>\n\n<p>The code used in the video as an example of creating a Message Box:</p>\n\n<pre><code>from ctypes import *\n\nwindll.user32.MessageBoxA(0, \"Click Yes or No\\n\", \"This is a title\\n\", 4)\n</code></pre>\n\n<hr>\n\n<p>My code:</p>\n\n<pre><code># 2.1 Ctypes: Write a function which takes two arguments, title and body\n#  and creates a MessageBox with those arguments\ndef python_message_box(title, body):\n    return windll.user32.MessageBoxA(0, body, title, 0)\n</code></pre>\n\n<p>Running this gives the error:</p>\n\n<pre><code>File \".../AdvancedActivities.py\", line 9, in python_message_box\n   return windll.user32.MessageBoxA(0, body, title, 0)\nNameError: name 'windll' is not defined\n</code></pre>\n\n<p>I don't believe I need to say that I get the same error trying to run</p>\n\n<pre><code>windll.user32.MessageBoxW(0, body, title, 0)\n</code></pre>\n\n<hr>\n\n<p>I haven't been able to find any examples anywhere of people creating Message Boxes on Mac computers. Is it a Windows-specific function? If so, what would be the Mac equivalent of this?</p>\n\n<p>EDIT: Mark Setchell's solution is to have Python run terminal functions that accomplish <code>windll</code> tasks, so instead of <code>windll.user32.MessageBoxA(0, body, title, 0)</code>, use:</p>\n\n<pre><code>command = \"osascript -e 'Tell application \\\"System Events\\\" to\n           display dialog \\\"\"+body+\"\\\"'\"\nsystem(command)\n</code></pre>\n"}, {"tags": ["python", "c++", "dll", "wrapper", "ctypes"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1527110529, "post_id": 50497472, "comment_id": 88008195, "body": "The ABI of C++ object files/libraries is usually not stable across compiler vendors/versions. Are you sure the dll was compiled with the exact same compiler as the program you are running that tries to load the dll? If not, you <i>may</i> have some fun trouble."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1527112445, "post_id": 50497472, "comment_id": 88008912, "body": "Changing the header file to have <code>extern &quot;C&quot;</code>, <code>EXPORTED_FUNCTION</code>, etc., without recompiling the DLL won&#39;t work.  If those were missing, likely the functions are exported as C++-mangled names instead of C names.  Use <code>dumpbin &#47;EXPORTS your.dll</code> to see what the names look like.  Also <code>LOAD_LIBRARY_AS_DATAFILE</code> doesn&#39;t load the function table from the DLL, IIRC."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1527158209, "post_id": 50497472, "comment_id": 88026264, "body": "The fact that it can be loaded by <i>pywin32</i> but not  by <i>ctypes</i> doesn&#39;t make sense. You&#39;re definitely doing smth wrong (maybe not using the same path)? So what is your <i>Python</i> (also <i>ctypes</i>, and <i>pywin32</i>) version? What tools are used to compile the <i>.dll</i> by the other person? The 2nd case it&#39;s normal not to find the symbol, based on how you load the dll. So with the test dll which loads the dll (everything compiled by you) everything works? What about with test dll which loads the external compiled dll?"}, {"owner": {"reputation": 41, "user_id": 8353724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a45aa901d852f8f6d9b78e3c4adb8?s=128&d=identicon&r=PG&f=1", "display_name": "ilbi", "link": "https://stackoverflow.com/users/8353724/ilbi"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1527175225, "post_id": 50497472, "comment_id": 88038216, "body": "@MarkTolonen The DLL was indeed compiled by the other person with <code>extern &quot;C&quot;</code>, <code>EXPORTED_FUNCTION</code> already in the header file. Using <code>dumpbin &#47;exports aa_Function.dll</code> I could see the function names, which match the names shown in Dependency Walker. I am making function calls in Python using the same function names in Python - unsuccessfully. Your point about <code>LOAD_LIBRARY_AS_DATAFILE</code> not loading the DLL function table is interesting. Couldn&#39;t find anything in the documentation about this method of loading. This would make sense as the DLLS are loaded, but functions can&#39;t be called."}, {"owner": {"reputation": 41, "user_id": 8353724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a45aa901d852f8f6d9b78e3c4adb8?s=128&d=identicon&r=PG&f=1", "display_name": "ilbi", "link": "https://stackoverflow.com/users/8353724/ilbi"}, "edited": false, "score": 0, "creation_date": 1527175717, "post_id": 50497472, "comment_id": 88038540, "body": "I&#39;m using Python 3.6.4 64-bit, (built using MSC v.1900 on win32, which is Visual Studio 2013 ver 14.0) through module Ctypes to try and load DLLs compiled using Visual Studio 2013. The person who compiled the DLLs said this difference in compiler versions should not cause any conflicts... Unsure what next steps should be..."}, {"owner": {"reputation": 41, "user_id": 8353724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a45aa901d852f8f6d9b78e3c4adb8?s=128&d=identicon&r=PG&f=1", "display_name": "ilbi", "link": "https://stackoverflow.com/users/8353724/ilbi"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1527176148, "post_id": 50497472, "comment_id": 88038820, "body": "@CristiFati <i>Python</i> version: 3.6.4 <i>Ctypes</i> version: 1.1.0 <i>pywin32</i> version: 222. From my understanding, the other person used Visual Studio 2013 to compile the <i>.dll</i>. The test <i>.dll</i> I wrote from scratch and loaded in Python works successfully, I can also call its functions. The <i>.dll</i> compiled by the other person does not load through <code>ctypes.CDLL(dll_path)</code>. However, this <i>.dll</i> will load using the <code>LOAD_LIBRARY_AS_DATAFILE</code>, but as Mark suggested, loading DLL this way may not load its function table, which may explain why functions cannot be called given this DLL load method."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1527177410, "post_id": 50497472, "comment_id": 88039623, "body": "Read about <code>LOAD_LIBRARY_AS_DATAFILE</code> <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684179(v=vs.85).aspx\" rel=\"nofollow noreferrer\">here</a>.  It simply maps the DLL into memory and does no other preparation like looking for other dependencies or preparing the functions to be called.  If method 1 doesn&#39;t work, it looks like a dependency is missing."}, {"owner": {"reputation": 41, "user_id": 8353724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a45aa901d852f8f6d9b78e3c4adb8?s=128&d=identicon&r=PG&f=1", "display_name": "ilbi", "link": "https://stackoverflow.com/users/8353724/ilbi"}, "edited": false, "score": 0, "creation_date": 1527257921, "post_id": 50497472, "comment_id": 88074460, "body": "Update: may <i>potentially</i> be a MATLAB (dependency) issue. Prior to any MATLAB license configurations, the dependency <i>libmx.dll</i> could not be loaded in Python via <code>ctypes.CDLL()</code>. However, after initial license configurations, the <i>libmx.dll</i> is able to be loaded. But given that MATLAB is not 100% configured yet, the <i>aa_Functions.dll</i> still cannot be loaded. Will provide further updates as they&#39;re received and verified."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 8353724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a45aa901d852f8f6d9b78e3c4adb8?s=128&d=identicon&r=PG&f=1", "display_name": "ilbi", "link": "https://stackoverflow.com/users/8353724/ilbi"}, "is_accepted": false, "score": 0, "last_activity_date": 1527774734, "creation_date": 1527774734, "answer_id": 50625960, "question_id": 50497472, "link": "https://stackoverflow.com/questions/50497472/python-ctypes-loading-c-dll-module-not-found-or-function-fn-123-not-fo/50625960#50625960", "title": "Python Ctypes: Loading C++ DLL - &quot;module not found&quot; or &quot;function &#39;fn_123&#39; not found&quot;", "body": "<p>The solution to my specific problem was:</p>\n\n<ol>\n<li>Ensure a proper installation of MATLAB</li>\n<li>Ensure the dependent MATLAB DLL (libmx.dll) directory is added to PATH and can be loaded using <code>ctypes</code> PRIOR to loading the actual DLL</li>\n</ol>\n\n<p>In hindsight, this was a very straightforward issue - missing DLL dependency. But it can be a challenge to find the SPECIFIC missing DLL.</p>\n"}], "owner": {"reputation": 41, "user_id": 8353724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a45aa901d852f8f6d9b78e3c4adb8?s=128&d=identicon&r=PG&f=1", "display_name": "ilbi", "link": "https://stackoverflow.com/users/8353724/ilbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1112, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527774734, "creation_date": 1527109637, "last_edit_date": 1527165277, "question_id": 50497472, "link": "https://stackoverflow.com/questions/50497472/python-ctypes-loading-c-dll-module-not-found-or-function-fn-123-not-fo", "title": "Python Ctypes: Loading C++ DLL - &quot;module not found&quot; or &quot;function &#39;fn_123&#39; not found&quot;", "body": "<p>I'm trying to load AND call functions from an already compiled (not by me) C++ DLL file.</p>\n\n<p>I'm faced with two problematic scenarios:</p>\n\n<ol>\n<li><p>Loading DLL by using CDLL():</p>\n\n<pre><code>from ctypes import *\n__path_aa_Fn_dll__ = r'C:\\user\\aacad_2017\\aa_Functions.dll' # DLL file path\naa_Fn_dll = CDLL(__path_aa_Fn_dll__) # load DLL\n</code></pre>\n\n<p>which gives me the module not found OSError:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"C:/user/aacad_2017/cadClass.py\", line 189, in &lt;module&gt;\naa_Fn_dll = CDLL(__path_aa_Fn_dll__)\nFile \"C:\\Users\\user\\AppData\\Local\\Continuum\\anaconda3\\lib\\ctypes\\__init__.py\", line 348, in __init__\nself._handle = _dlopen(self._name, mode)\nOSError: [WinError 126] The specified module could not be found\n</code></pre></li>\n<li><p>Loading the same DLL by using win32api.LoadLibraryEx() then CDLL()</p>\n\n<pre><code>aa_Fn_dll_handle = win32api.LoadLibraryEx(__path_aa_Fn_dll__, 0, win32con.LOAD_LIBRARY_AS_DATAFILE) # get DLL handle\naa_Fn_dll = CDLL(__path_aa_Fn_dll__, handle=aa_Fn_dll_handle) # load DLL\n</code></pre>\n\n<p>which is able to load the DLL.</p>\n\n<p>However, when attempting to call functions within this DLL, the following AttributeError is raised:</p>\n\n<pre><code>aa_Fn_dll.aaBIN2iv.restype = c_double # set function return type\naa_Fn_dll.aaBIN2iv.argtypes = [c_double, c_double, c_double, c_double, c_double, c_double, c_double, c_char_p] # set function argument types\naa_Fn_dll.aaBIN2iv(10, 10, 10, 10, 10, 10, 10, b\"C\") # call DLL function\n\n\nTraceback (most recent call last):\nFile \"C:/user/aacadMatlabWrap_2017_new_test/cadClass.py\", line 196, in &lt;module&gt;\naa_Fn_dll.aaBIN2iv.restype = c_double\nFile \"C:\\Users\\user\\AppData\\Local\\Continuum\\anaconda3\\lib\\ctypes\\__init__.py\", line 361, in __getattr__\nfunc = self.__getitem__(name)\nFile \"C:\\Users\\user\\AppData\\Local\\Continuum\\anaconda3\\lib\\ctypes\\__init__.py\", line 366, in __getitem__\nfunc = self._FuncPtr((name_or_ordinal, self))\nAttributeError: function 'aaBIN2iv' not found\n</code></pre></li>\n</ol>\n\n<p>After extensive online research and consulting the Ctypes documentation, I have tried the following historical solutions:</p>\n\n<ul>\n<li>Use Dependency Walker to check dependencies</li>\n<li>Ensure all DLL dependencies are placed in the same directory</li>\n<li>Add the DLL directory to system PATH</li>\n<li>Ensure <code>extern \"C\"</code> is added to the C++ header file to prevent name mangling</li>\n<li>Using keyword <code>EXPORTED_FUNCTION</code> in the C++ header file</li>\n<li>Setting the current working directory in Python to that of the DLL file directory prior to loading DLLs</li>\n</ul>\n\n<p>without any success...</p>\n\n<p>I've also compiled my own SEPARATE 64-bit C++ DLL file (completely independent from the aa_Functions.dll file previously mentioned) in Microsoft Visual Studio 2010 in both Debug and Release modes, with test functions included inside.</p>\n\n<p>This test DLL is able to be loaded, and its functions called successfully, per the following:</p>\n\n<pre><code>__path_test_dll__ = r'C:\\user\\dllTest\\x64\\Release\\dllTest.dll' # test DLL file path\ntest_dll = CDLL(__path_test_dll__) # load test DLL\ntest_dll.fn4.restype = c_void_p # set test DLL function return type\ntest_dll.fn4.argtypes = [c_double, c_double, c_double, c_char_p, c_bool] # set test DLL function argument types\ntest_dll.fn4(10, 12, 1, b\"Pay\", True) # make test DLL function call\n</code></pre>\n\n<p>With the expected console output:</p>\n\n<pre><code>Min_P * Rate == $10\nPay: 1 Min_P: 10 Max_P: 12 Iteration #: 1\nMin_P * Rate == $11\nPay: 0 Min_P: 11 Max_P: 12 Iteration #: 2\nMin_P * Rate == $12\nPay: 1 Min_P: 12 Max_P: 12 Iteration #: 3\n\nProcess finished with exit code 0\n</code></pre>\n\n<p>I've spent the last several days on this issue and a point in the right direction would be tremendously appreciated.</p>\n"}, {"tags": ["python", "debugging", "pycharm", "lektor"], "owner": {"reputation": 994, "user_id": 3374676, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/701E4.png?s=128&g=1", "display_name": "barrios", "link": "https://stackoverflow.com/users/3374676/barrios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1545335902, "creation_date": 1527109542, "last_edit_date": 1527110700, "question_id": 50497451, "link": "https://stackoverflow.com/questions/50497451/running-lektor-server-under-pycharm-debugger", "title": "Running &#39;lektor server&#39; under Pycharm Debugger?", "body": "<p>I try to get started with Lektor CMS internals and would like to run it under the great Pycharm debugger. In particular I want to run </p>\n\n<pre><code>$ lektor server\n</code></pre>\n\n<p>I followed the steps </p>\n\n<pre><code>$ git clone https://github.com/lektor/lektor\n$ cd lektor\n$ virtualenv venv\n$ . venv/bin/activate\n$ pip install --editable .\n$ make build-js\n$ make install-git-hooks\n$ export LEKTOR_DEV=1\n$ lektor quickstart --path example-project\n$ lektor --project example-project server\n</code></pre>\n\n<p>in the Github readme about development and they work just fine in the terminal. Then I created the following Pycharm debug-config:</p>\n\n<p><a href=\"https://i.stack.imgur.com/C3wCA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C3wCA.png\" alt=\"\"></a></p>\n\n<p>However this throws the following RuntimeException:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/barrios/IDEs/pycharm-community-2018.1.1/helpers/pydev/pydevd.py\", line 1664, in &lt;module&gt;\n    main()\n  File \"/home/barrios/IDEs/pycharm-community-2018.1.1/helpers/pydev/pydevd.py\", line 1658, in main\n    globals = debugger.run(setup['file'], None, None, is_module)\n  File \"/home/barrios/IDEs/pycharm-community-2018.1.1/helpers/pydev/pydevd.py\", line 1085, in run\n    runpy._run_module_as_main(module_name, alter_argv=False)\n  File \"/usr/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\n    \"__main__\", fname, loader, pkg_name)\n  File \"/usr/lib/python2.7/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/home/barrios/code/lektor/lektor/__main__.py\", line 3, in &lt;module&gt;\n    main(as_module=True)\n  File \"/home/barrios/code/lektor/lektor/cli.py\", line 627, in main\n    cli.main(args=args, prog_name=name)\n  File \"/home/barrios/code/lektor/venv/local/lib/python2.7/site-packages/click/core.py\", line 697, in main\n    rv = self.invoke(ctx)\n  File \"/home/barrios/code/lektor/venv/local/lib/python2.7/site-packages/click/core.py\", line 1066, in invoke\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\n  File \"/home/barrios/code/lektor/venv/local/lib/python2.7/site-packages/click/core.py\", line 895, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/home/barrios/code/lektor/venv/local/lib/python2.7/site-packages/click/core.py\", line 535, in invoke\n    return callback(*args, **kwargs)\n  File \"/home/barrios/code/lektor/venv/local/lib/python2.7/site-packages/click/decorators.py\", line 64, in new_func\n    return ctx.invoke(f, obj, *args[1:], **kwargs)\n  File \"/home/barrios/code/lektor/venv/local/lib/python2.7/site-packages/click/core.py\", line 535, in invoke\n    return callback(*args, **kwargs)\n  File \"/home/barrios/code/lektor/lektor/cli.py\", line 387, in server_cmd\n    browse=browse)\n  File \"/home/barrios/code/lektor/lektor/devserver.py\", line 124, in run_server\n    dt.start()\n  File \"/home/barrios/code/lektor/lektor/devserver.py\", line 75, in start\n    portable_popen(['npm', 'install', '.'], cwd=admin).wait()\n  File \"/home/barrios/code/lektor/lektor/utils.py\", line 486, in portable_popen\n    raise RuntimeError('Could not locate executable \"%s\"' % cmd[0])\nRuntimeError: Could not locate executable \"npm\"\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>Obviously it can't find npm to init the Web-UI. When replacing the parameter 'server' with 'build', debugging works fine. Is it impossible to run this Javascript code via subprocess from inside Pycharm debugger?</p>\n\n<p>Or what else am I doing wrong? Any ideas how to fix this? TNX in advance.</p>\n\n<p>EDIT: I read in some other SO-thread Pycharm is probably running a subprocess under the system Python interpreter outside the virtualenv?!? This would explain why it messes up dependencies, but the npm command IS available anywhere on the system... So why is it not found???</p>\n"}, {"tags": ["python", "snakemake"], "answers": [{"comments": [{"owner": {"reputation": 2739, "user_id": 3815432, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3523270d3d2bdb908089a05957ccc711?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Vlasenko", "link": "https://stackoverflow.com/users/3815432/nikita-vlasenko"}, "edited": false, "score": 0, "creation_date": 1527183352, "post_id": 50511319, "comment_id": 88042746, "body": "Not working, not sure why. I actually already tried that before. Now it is failing with another error than before."}], "tags": [], "owner": {"reputation": 1571, "user_id": 7070491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eade0a909d590f9ddc24cb7fd93aed66?s=128&d=identicon&r=PG&f=1", "display_name": "Johannes K&#246;ster", "link": "https://stackoverflow.com/users/7070491/johannes-k%c3%b6ster"}, "is_accepted": false, "score": 0, "last_activity_date": 1527170528, "creation_date": 1527170528, "answer_id": 50511319, "question_id": 50497442, "link": "https://stackoverflow.com/questions/50497442/conda-snakemake-installation-issue-unsatisfiableerror/50511319#50511319", "title": "Conda Snakemake installation issue: UnsatisfiableError", "body": "<p>It should work fine if you follow the official installation instructions: <a href=\"http://snakemake.readthedocs.io/en/stable/getting_started/installation.html#installation-via-conda\" rel=\"nofollow noreferrer\">http://snakemake.readthedocs.io/en/stable/getting_started/installation.html#installation-via-conda</a></p>\n\n<p>You need both -c bioconda and -c conda-forge in the installation command, because some dependencies come from conda-forge.</p>\n"}, {"tags": [], "owner": {"reputation": 2739, "user_id": 3815432, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3523270d3d2bdb908089a05957ccc711?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Vlasenko", "link": "https://stackoverflow.com/users/3815432/nikita-vlasenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1527274213, "creation_date": 1527274213, "answer_id": 50535253, "question_id": 50497442, "link": "https://stackoverflow.com/questions/50497442/conda-snakemake-installation-issue-unsatisfiableerror/50535253#50535253", "title": "Conda Snakemake installation issue: UnsatisfiableError", "body": "<p>It was solved by (it is <code>SLURM</code> cluster):</p>\n\n<pre><code>module load anaconda3\nconda create -n snakemake\nsource activate snakemake\nconda install -c bioconda snakemake\n\nUse\nmodule load anaconda3\nsource activate snakemake\n</code></pre>\n"}], "owner": {"reputation": 2739, "user_id": 3815432, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/3523270d3d2bdb908089a05957ccc711?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Vlasenko", "link": "https://stackoverflow.com/users/3815432/nikita-vlasenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 852, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1527274213, "creation_date": 1527109485, "last_edit_date": 1527183310, "question_id": 50497442, "link": "https://stackoverflow.com/questions/50497442/conda-snakemake-installation-issue-unsatisfiableerror", "title": "Conda Snakemake installation issue: UnsatisfiableError", "body": "<p>I am trying to install <code>snakemake</code> on linux machine. When running <code>conda install -c bioconda snakemake</code> I am getting the error:</p>\n\n<blockquote>\n  <p>-bash-4.2$ conda install -c bioconda snakemake\n  Solving environment: failed\n  UnsatisfiableError: The following specifications were found to be in conflict:\n    - backports.functools_lru_cache\n    - snakemake\n  Use \"conda info \" to see the dependencies for each package.</p>\n</blockquote>\n\n<p>Python version is <code>3.4.5</code>. OS info:</p>\n\n<pre><code>lsb_release -a\nLSB Version:    :core-4.1-amd64:core-4.1-noarch:cxx-4.1-amd64:cxx-4.1- \nnoarch:desktop-4.1-amd64:desktop-4.1-noarch:languages-4.1- \namd64:languages-4.1-noarch:printing-4.1-amd64:printing-4.1-noarch\nDistributor ID: CentOS\nDescription:    CentOS Linux release 7.3.1611 (Core) \nRelease:    7.3.1611\nCodename:   Core\n</code></pre>\n\n<p>Any suggestions would be greatly appreciated</p>\n\n<blockquote>\n  <p>Update</p>\n</blockquote>\n\n<p>I tried <code>conda install -c conda-forge backports</code>, it installed successfully, but did not help.</p>\n\n<blockquote>\n  <p>Update</p>\n</blockquote>\n\n<p>I tried before also using the long command: <code>conda install -c bioconda -c conda-forge snakemake</code> but it failed for some dependencies conflicts. Right now I tried it again and got <code>unexpected error</code> of a different kind:</p>\n\n<pre><code>-bash-4.2$ conda install -c bioconda -c conda-forge snakemake\nSolving environment: failed\n\n# &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; ERROR REPORT &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n\nTraceback (most recent call last):\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/exceptions.py\", line 819, in __call__\n    return func(*args, **kwargs)\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/cli/main.py\", line 78, in _main\n    exit_code = do_call(args, p)\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/cli/conda_argparse.py\", line 77, in do_call\n    exit_code = getattr(module, func_name)(args, parser)\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/cli/main_install.py\", line 11, in execute\n    install(args, parser, 'install')\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/cli/install.py\", line 235, in install\n    force_reinstall=context.force,\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/core/solve.py\", line 505, in solve_for_transaction\n    force_remove, force_reinstall)\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/core/solve.py\", line 438, in solve_for_diff\n    final_precs = self.solve_final_state(deps_modifier, prune, ignore_pinned, force_remove)\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/core/solve.py\", line 179, in solve_final_state\n    index, r = self._prepare(prepared_specs)\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/core/solve.py\", line 560, in _prepare\n    self.subdirs, prepared_specs)\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/core/index.py\", line 215, in get_reduced_index\n    new_records = query_all(spec)\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/core/index.py\", line 184, in query_all\n    return tuple(concat(future.result() for future in as_completed(futures)))\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/core/subdir_data.py\", line 94, in query\n    self.load()\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/core/subdir_data.py\", line 148, in load\n    _internal_state = self._load()\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/core/subdir_data.py\", line 222, in _load\n    mod_etag_headers.get('_mod'))\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/core/subdir_data.py\", line 269, in _read_local_repdata\n    _internal_state = self._process_raw_repodata_str(raw_repodata_str)\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/site-packages/conda/core/subdir_data.py\", line 306, in _process_raw_repodata_str\n    json_obj = json.loads(raw_repodata_str or '{}')\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/json/__init__.py\", line 339, in loads\n    return _default_decoder.decode(s)\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/json/decoder.py\", line 364, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/sfs/nfs/blue/nv4e/anaconda2/lib/python2.7/json/decoder.py\", line 380, in raw_decode\n    obj, end = self.scan_once(s, idx)\nValueError: Expecting : delimiter: line 1 column 8388609 (char 8388608)\n\n`$ /sfs/nfs/blue/nv4e/anaconda2/bin/conda install -c bioconda -c conda-forge snakemake`\n\nenvironment variables:\n             CIO_TEST=&lt;not set&gt;\n           CONDA_ROOT=/sfs/nfs/blue/nv4e/anaconda2\n\nLD_INCLUDE_PATH=/opt/slurm/17.02.1b/include:/share/rci_apps/common/inc\n\nLD_LIBRARY_PATH=/opt/slurm/17.02.1b/lib:/share/rci_apps/common/lib64\n              MANPATH=/usr/share/lmod/lmod/share/man::\n\n MODULEPATH=/apps/modulefiles/standard/core:/apps/modulefiles/standard/\ntoolchains\n\n\n\nPATH=/scratch/nv4e/cellranger:/scratch/nv4e/bcl2fastq/build/bin:\n/scratch/nv\n                      4e/spark/bin:/scratch/nv4e/scala/bin:/sfs/nfs/blue/nv4e/private/bin:/s\n                      fs/nfs/blue/nv4e/anaconda2/bin:/sfs/nfs/blue/nv4e/.local/bin:/usr/lib6\n                      4/qt-3.3/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/sl\n                      urm/current/bin:/opt/slurm/current/sbin:/opt/singularity/current/bin:/\n                      opt/rci/bin:/opt/rci/sbin:/opt/nhc/current/sbin:/share/rci_apps/common\n                      /bin:/share/resources/HPCtools/\n       QT_PLUGIN_PATH=/usr/lib64/kde4/plugins:/usr/lib/kde4/plugins\n   REQUESTS_CA_BUNDLE=&lt;not set&gt;\n        SSL_CERT_FILE=&lt;not set&gt;\n\n active environment : None\n   user config file : /home/nv4e/.condarc\n populated config files : \n      conda version : 4.5.4\n conda-build version : 3.0.27\n     python version : 2.7.14.final.0\n   base environment : /sfs/nfs/blue/nv4e/anaconda2  (writable)\n       channel URLs : https://conda.anaconda.org/bioconda/linux-64\n                      https://conda.anaconda.org/bioconda/noarch\n                      https://conda.anaconda.org/conda-forge/linux-64\n                      https://conda.anaconda.org/conda-forge/noarch\n                      https://repo.anaconda.com/pkgs/main/linux-64\n                      https://repo.anaconda.com/pkgs/main/noarch\n                      https://repo.anaconda.com/pkgs/free/linux-64\n                      https://repo.anaconda.com/pkgs/free/noarch\n                      https://repo.anaconda.com/pkgs/r/linux-64\n                      https://repo.anaconda.com/pkgs/r/noarch\n                      https://repo.anaconda.com/pkgs/pro/linux-64\n                      https://repo.anaconda.com/pkgs/pro/noarch\n      package cache : /sfs/nfs/blue/nv4e/anaconda2/pkgs\n                      /home/nv4e/.conda/pkgs\n   envs directories : /sfs/nfs/blue/nv4e/anaconda2/envs\n                      /home/nv4e/.conda/envs\n           platform : linux-64\n         user-agent : conda/4.5.4 requests/2.18.4 CPython/2.7.14 Linux/3.10.0-514.21.2.el7.x86_64 centos/7 glibc/2.17\n            UID:GID : 1096641:100\n         netrc file : None\n       offline mode : False\n\n\nAn unexpected error has occurred. Conda has prepared the above report.\nIf submitted, this report will be used by core maintainers to improve\nfuture releases of conda.\nWould you like conda to send this report to the core maintainers?\n[y/N]: \n</code></pre>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7070832, "user_type": "registered", "profile_image": "https://graph.facebook.com/1118962841472291/picture?type=large", "display_name": "Mitchell T. Diedrich", "link": "https://stackoverflow.com/users/7070832/mitchell-t-diedrich"}, "edited": false, "score": 0, "creation_date": 1527126899, "post_id": 50499071, "comment_id": 88012310, "body": "I&#39;ll try it tomorrow and mark it as solved if it gets me there. Thank you!"}], "tags": [], "owner": {"reputation": 3798, "user_id": 3098092, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/12c6b0fa6ec2efc5e87e54df4e8c78ae?s=128&d=identicon&r=PG&f=1", "display_name": "DomJack", "link": "https://stackoverflow.com/users/3098092/domjack"}, "is_accepted": true, "score": 0, "last_activity_date": 1527120012, "creation_date": 1527120012, "answer_id": 50499071, "question_id": 50497432, "link": "https://stackoverflow.com/questions/50497432/how-can-i-make-inferences-using-the-tensorflow-cifar10-tutorial-code/50499071#50499071", "title": "How can I make inferences using the Tensorflow Cifar10 tutorial code?", "body": "<ol>\n<li>Train the model using base CIFAR10 dataset exactly as per the tutorial.</li>\n<li>Create a new graph with your own inputs - probably easiest to just use a <code>tf.placeholder</code> and feed the data as per below, but there's lots of other ways.</li>\n<li>Start a session, load previously saved weights.</li>\n<li>Run the session (with a <code>feed_dict</code> if you're using a <code>placeholder</code> as above).</li>\n</ol>\n\n<p>.</p>\n\n<pre><code>import tensorflow as tf\n\ntrain_dir = '/tmp/cifar10_train'  # or use FLAGS as in the train example\nbatch_size = 8\nheight = 32\nwidth = 32\n\nimage = tf.placeholder(shape=(batch_size, height, width, 3), dtype=tf.uint8)\nstd_img = tf.image.per_image_standardization(image)\nlogits = cifar10.inference(std_img)\npredictions = tf.argmax(logits, axis=-1)\n\ndef get_image_data_batches():\n    n_batchs = 100\n    for i in range(n_batchs):\n        yield (np.random.uniform(size=(batch_size, height, width, 3)*255).astype(np.uint8)\n\ndef do_stuff_with(logit_vals, prediction_vals):\n    pass\n\nwith tf.Session() as sess:\n    # restore variables\n    saver = tf.train.Saver()\n    saver.restore(sess, tf.train.latest_checkpoint(train_dir))\n    # run inference\n    for batch_data in get_image_data_batches():\n        logit_vals, prediction_vals = sess.run([logits, predictions], feed_dict={image: image_data})\n        do_stuff_with(logit_vals, prediction_vals)\n</code></pre>\n\n<p>There are better ways of getting data into the graph (see <code>tf.data.Dataset</code>), but I believe <code>tf.placeholder</code>s are the easiest way for learning and getting something up and running initially.</p>\n\n<p>Also check out <code>tf.estimator.Estimator</code>s for a cleaner way of managing sessions. It's very different to the way it's done in this tutorial and -slightly- less flexible, but for standard networks they save you writing a lot of boilerplate code.</p>\n"}], "owner": {"reputation": 3, "user_id": 7070832, "user_type": "registered", "profile_image": "https://graph.facebook.com/1118962841472291/picture?type=large", "display_name": "Mitchell T. Diedrich", "link": "https://stackoverflow.com/users/7070832/mitchell-t-diedrich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 50499071, "answer_count": 1, "score": 0, "last_activity_date": 1527120012, "creation_date": 1527109448, "question_id": 50497432, "link": "https://stackoverflow.com/questions/50497432/how-can-i-make-inferences-using-the-tensorflow-cifar10-tutorial-code", "title": "How can I make inferences using the Tensorflow Cifar10 tutorial code?", "body": "<p>I am an absolute beginner to TensorFlow.</p>\n\n<p>If I have a picture (or set of pictures) that I would like to attempt to classify using the code from the Cifar10 TensorFlow tutorial, how would I do so?</p>\n\n<p>I have absolutely no idea where to start.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 757, "user_id": 1760729, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/C6ZAN.png?s=128&g=1", "display_name": "Aaron Krajeski", "link": "https://stackoverflow.com/users/1760729/aaron-krajeski"}, "is_accepted": false, "score": 1, "last_activity_date": 1527110210, "creation_date": 1527110210, "answer_id": 50497597, "question_id": 50497409, "link": "https://stackoverflow.com/questions/50497409/how-can-i-open-some-unbounded-of-files-so-that-i-can-send-them-in-a-request/50497597#50497597", "title": "How can I open some unbounded # of files so that I can send them in a request?", "body": "<p>Can you send the files one at a time? Or maybe send them in batches? You can increase the number of allowed open files here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/18280612/ioerror-errno-24-too-many-open-files\">IOError: [Errno 24] Too many open files:</a></p>\n\n<p>But in general that's finicky and not recommended.</p>\n\n<p>You can send your requests in batches, ala:</p>\n\n<pre><code>BATCH_SIZE = 10 # Just an example batch size\nwhile len(all_files) &gt; 0:\n    files_to_send = []\n    while len(files_to_send) &lt; BATCH_SIZE:\n        files_to_send.append(all_files.pop())\n        file_obj = open(file_path, \"rb\")\n    requests.post(url, files=files_to_send)\n    for f in files_to_send:\n        f.close()\n</code></pre>\n\n<p>This will send files in batches of 10 at a time. If one at a time works:</p>\n\n<pre><code>for file in all_files:\n    with open(file, \"rb\") as outfile:\n        requests.post(url, files=[outfile])\n</code></pre>\n\n<p>It's generally bad practice to open too many files at once.</p>\n"}], "owner": {"reputation": 1248, "user_id": 3715648, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/127fb47b5b0b348ba8c4098e939f2c16?s=128&d=identicon&r=PG&f=1", "display_name": "user3715648", "link": "https://stackoverflow.com/users/3715648/user3715648"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527110210, "creation_date": 1527109334, "question_id": 50497409, "link": "https://stackoverflow.com/questions/50497409/how-can-i-open-some-unbounded-of-files-so-that-i-can-send-them-in-a-request", "title": "How can I open some unbounded # of files so that I can send them in a request?", "body": "<p>I need to take the contents of a user's directory and send them in a request. Unfortunately I cannot modify the service i'm making the request to, and so I CANNOT zip all the files and send that, I must send all the files. </p>\n\n<p>There's a limit on the total size of the files, but not on the # of files. Unfortunately once I try and open too many, Python will error out with: <code>[Errno 24] Too many open files</code>. Here's my current code:</p>\n\n<pre><code>files_to_send = []\nfiles_to_close = []\nfor file_path in all_files:\n    file_obj = open(file_path, \"rb\")\n    files_to_send.append((\"files\", (file_path, file_obj)))\n    files_to_close.append(file_obj)\n\nrequests.post(url, files=files_to_send)\n\nfor file_to_close in files_to_close:\n    file_to_close.close()\n</code></pre>\n\n<p>Is there any way to get around this open file limit given my circumstances?</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "xls"], "answers": [{"comments": [{"owner": {"reputation": 453, "user_id": 9494334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cy4EL.png?s=128&g=1", "display_name": "Misieq", "link": "https://stackoverflow.com/users/9494334/misieq"}, "edited": false, "score": 0, "creation_date": 1527110691, "post_id": 50497459, "comment_id": 88008258, "body": "How can i convert it further so this data will fix into tf Dataset? Sory if this questions are stupid but it&#39;s my first tensorflow(with xls) program and i can&#39;t figure it out :/"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 1, "last_activity_date": 1527109576, "creation_date": 1527109576, "answer_id": 50497459, "question_id": 50497398, "link": "https://stackoverflow.com/questions/50497398/how-to-read-xls-files-in-tensorflow-python/50497459#50497459", "title": "How to read .xls files in tensorflow-python", "body": "<p>Try to use Pandas module:</p>\n\n<pre><code>import pandas as pd\n\nIn [24]: df = pd.read_excel(r'D:\\download\\BreastTissue.xls', sheet_name='Data')\n\nIn [25]: df\nOut[25]:\n     Case # Class           I0     PA500       HFS           DA           Area        A/DA      Max IP          DR            P\n0         1   car   524.794072  0.187448  0.032114   228.800228    6843.598481   29.910803   60.204880  220.737212   556.828334\n1         2   car   330.000000  0.226893  0.265290   121.154201    3163.239472   26.109202   69.717361   99.084964   400.225776\n2         3   car   551.879287  0.232478  0.063530   264.804935   11888.391827   44.894903   77.793297  253.785300   656.769449\n3         4   car   380.000000  0.240855  0.286234   137.640111    5402.171180   39.248524   88.758446  105.198568   493.701814\n4         5   car   362.831266  0.200713  0.244346   124.912559    3290.462446   26.342127   69.389389  103.866552   424.796503\n5         6   car   389.872978  0.150098  0.097738   118.625814    2475.557078   20.868620   49.757149  107.686164   429.385788\n6         7   car   290.455141  0.144164  0.053058    74.635067    1189.545213   15.938154   35.703331   65.541324   330.267293\n7         8   car   275.677393  0.153938  0.187797    91.527893    1756.234837   19.187974   39.305183   82.658682   331.588302\n8         9   car   470.000000  0.213105  0.225497   184.590057    8185.360837   44.343455   84.482483  164.122511   603.315715\n9        10   car   423.000000  0.219562  0.261799   172.371241    6108.106297   35.435762   79.056351  153.172903   558.274515\n..      ...   ...          ...       ...       ...          ...            ...         ...         ...         ...          ...\n96       97   adi  1650.000000  0.047647  0.043284   274.426177    5824.895192   21.225727   81.239571  262.125656  1603.070348\n97       98   adi  2800.000000  0.083078  0.184307   583.259257   31388.652882   53.815953  298.582977  501.038494  2896.582483\n98       99   adi  2329.840138  0.066148  0.353255   377.253368   25369.039925   67.246689  336.075165  171.387227  2686.435346\n99      100   adi  2400.000000  0.084125  0.220610   596.041956   37939.255571   63.651988  261.348175  535.689409  2447.772353\n100     101   adi  2000.000000  0.067195  0.124267   330.271646   15381.097687   46.571051  169.197983  283.639564  2063.073212\n101     102   adi  2000.000000  0.106989  0.105418   520.222649   40087.920984   77.059161  204.090347  478.517223  2088.648870\n102     103   adi  2600.000000  0.200538  0.208043  1063.441427  174480.476218  164.071543  418.687286  977.552367  2664.583623\n103     104   adi  1600.000000  0.071908 -0.066323   436.943603   12655.342135   28.963331  103.732704  432.129749  1475.371534\n104     105   adi  2300.000000  0.045029  0.136834   185.446044    5086.292497   27.427344  178.691742   49.593290  2480.592151\n105     106   adi  2600.000000  0.069988  0.048869   745.474369   39845.773698   53.450226  154.122604  729.368395  2545.419744\n\n[106 rows x 11 columns]\n\nIn [26]: df.dtypes\nOut[26]:\nCase #      int64\nClass      object\nI0        float64\nPA500     float64\nHFS       float64\nDA        float64\nArea      float64\nA/DA      float64\nMax IP    float64\nDR        float64\nP         float64\ndtype: object\n\nIn [27]: df.shape\nOut[27]: (106, 11)\n</code></pre>\n"}], "owner": {"reputation": 453, "user_id": 9494334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cy4EL.png?s=128&g=1", "display_name": "Misieq", "link": "https://stackoverflow.com/users/9494334/misieq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527109576, "creation_date": 1527109300, "question_id": 50497398, "link": "https://stackoverflow.com/questions/50497398/how-to-read-xls-files-in-tensorflow-python", "title": "How to read .xls files in tensorflow-python", "body": "<p>I have a quite big problem with reading xls. file to my machine learning project. Data that i need to extract is saved in .xls file and i can't find any option to easy extract to tensorflow dataset model, can anyone help?</p>\n\n<p>link to this data:\n\"<a href=\"http://archive.ics.uci.edu/ml/machine-learning-databases/00192/BreastTissue.xls\" rel=\"nofollow noreferrer\">http://archive.ics.uci.edu/ml/machine-learning-databases/00192/BreastTissue.xls</a>\"</p>\n"}, {"tags": ["python", "python-3.x", "matlab", "jupyter-notebook", "jupyter"], "comments": [{"owner": {"reputation": 18546, "user_id": 5698672, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PIdQn.jpg?s=128&g=1", "display_name": "Sardar Usama", "link": "https://stackoverflow.com/users/5698672/sardar-usama"}, "edited": false, "score": 0, "creation_date": 1527111343, "post_id": 50497374, "comment_id": 88008484, "body": "No idea why it is happening. Probably that&#39;s how they made it. Btw the second example in the <a href=\"https://www.mathworks.com/help/matlab/matlab_external/call-user-script-and-function-from-python.html\" rel=\"nofollow noreferrer\">linked</a> MATLAB doc-page does what you want"}, {"owner": {"reputation": 43, "user_id": 8774029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c517ad3b524c9807f2224b3118a60c?s=128&d=identicon&r=PG&f=1", "display_name": "sdrinz23", "link": "https://stackoverflow.com/users/8774029/sdrinz23"}, "reply_to_user": {"reputation": 18546, "user_id": 5698672, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PIdQn.jpg?s=128&g=1", "display_name": "Sardar Usama", "link": "https://stackoverflow.com/users/5698672/sardar-usama"}, "edited": false, "score": 0, "creation_date": 1527111821, "post_id": 50497374, "comment_id": 88008671, "body": "It doesn&#39;t quite do what I want. The second example requires that the Matlab function returns the value I want to print.  This also means that I can&#39;t see output from a Matlab script, because scripts don&#39;t have return values."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 4089166, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RXwdqJnNHmU/AAAAAAAAAAI/AAAAAAAADvs/SuzUCtJAZPQ/photo.jpg?sz=128", "display_name": "mscipio", "link": "https://stackoverflow.com/users/4089166/mscipio"}, "is_accepted": true, "score": 2, "last_activity_date": 1549373809, "creation_date": 1549373809, "answer_id": 54535683, "question_id": 50497374, "link": "https://stackoverflow.com/questions/50497374/viewing-output-of-matlab-code-run-from-python-using-jupyter-notebook/54535683#54535683", "title": "Viewing Output of MATLAB Code run from Python Using Jupyter Notebook", "body": "<p>If you still have the terminal open (i.e. the one in which the Jupyter Server is running) you will find there the output you are expecting.</p>\n\n<p>Btw, this is not a solution but just a workaround ... still looking for a way to make the terminal output appear directly in the notebook.</p>\n"}], "owner": {"reputation": 43, "user_id": 8774029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c517ad3b524c9807f2224b3118a60c?s=128&d=identicon&r=PG&f=1", "display_name": "sdrinz23", "link": "https://stackoverflow.com/users/8774029/sdrinz23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 54535683, "answer_count": 1, "score": 3, "last_activity_date": 1549373809, "creation_date": 1527109180, "question_id": 50497374, "link": "https://stackoverflow.com/questions/50497374/viewing-output-of-matlab-code-run-from-python-using-jupyter-notebook", "title": "Viewing Output of MATLAB Code run from Python Using Jupyter Notebook", "body": "<p>I am attempting to run MATLAB functions from python. I am following the \n<a href=\"https://www.mathworks.com/help/matlab/matlab_external/call-user-script-and-function-from-python.html\" rel=\"nofollow noreferrer\">MathWorks Tutorial</a>. In that tutorial they specify that output from a MATLAB script can be viewed in python.  The example they give has the following code</p>\n\n<pre><code>% This code is in a MATLAB script called triarea.m\nb = 5;\nh = 3;\na = 0.5*(b.* h) % Notice that there is no semicolon to suppress output.\n</code></pre>\n\n<p>The python portion: </p>\n\n<pre><code>import matlab.engine\neng = matlab.engine.start_matlab()\neng.triarea(nargout=0)\n</code></pre>\n\n<p>The python script is supposed to print </p>\n\n<pre><code>a =\n\n    7.5000\n</code></pre>\n\n<p>This works perfectly when running it as a normal python script (for example, using PyCharm). However, nothing is printed when this python code is run using Jupyter notebook.</p>\n\n<p>How does one get the correct output when running the python code using Jupyter notebook?</p>\n\n<p>So far, I have tried specifying standard out (as suggested in <a href=\"https://www.mathworks.com/help/matlab/matlab_external/redirect-standard-output-and-error-to-python.html\" rel=\"nofollow noreferrer\">here</a>).  Namely my python code now reads</p>\n\n<pre><code>import io\nout = io.StringIO()\neng.triareaf(nargout=0, stdout=out)\n</code></pre>\n\n<p>However, I still am not able to get the correct output. I am using Python 3.5, MATLAB R2017a, Jupyter version 4.4.0 and Windows 10.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 4, "last_activity_date": 1527109402, "creation_date": 1527109402, "answer_id": 50497422, "question_id": 50497328, "link": "https://stackoverflow.com/questions/50497328/pandas-groupby-for-non-missing-values/50497422#50497422", "title": "pandas groupby for non missing values", "body": "<p>You could try using <code>dropna</code>:</p>\n\n<pre><code>df.groupby('t1', as_index=False)\\\n  .agg(lambda x: ';'.join(x.dropna().astype(str)))\\\n  .replace('',np.nan)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   t1  c1          c2\n0  20 NaN  xyz;x1y1z1\n</code></pre>\n"}], "owner": {"reputation": 713, "user_id": 7566673, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eeb05101a3ba876d62613a7edb708f32?s=128&d=identicon&r=PG&f=1", "display_name": "Bharat Sharma", "link": "https://stackoverflow.com/users/7566673/bharat-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 50497422, "answer_count": 1, "score": 1, "last_activity_date": 1527109412, "creation_date": 1527108961, "last_edit_date": 1527109412, "question_id": 50497328, "link": "https://stackoverflow.com/questions/50497328/pandas-groupby-for-non-missing-values", "title": "pandas groupby for non missing values", "body": "<p>I have a df like this.</p>\n\n<pre><code>&gt;&gt;&gt; df\n    c1  t1      c2\n0  NaN  20     xyz\n1  NaN  20  x1y1z1\n2  NaN  20     NaN\n&gt;&gt;&gt; df.groupby(['t1'], as_index=False).agg(lambda x: ';'.join(x.astype(str)))\n  t1           c1              c2\n0  20  nan;nan;nan  xyz;x1y1z1;nan\n</code></pre>\n\n<p>But I don't want to join columns values if it's np.nan</p>\n\n<pre><code>desired o/p\n\n   t1         c1              c2\n0  20        NaN        xyz;x1y1z1\n</code></pre>\n\n<p>How this check can be done here?</p>\n\n<p>Thanks </p>\n"}, {"tags": ["python", "ffmpeg", "exit", "spyder"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527110032, "post_id": 50497327, "comment_id": 88008017, "body": "Try running the command and capturing <code>stderr</code> to see the error message."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1527111311, "post_id": 50497327, "comment_id": 88008473, "body": "BTW, this code is dangerous -- someone who could give you a video file with an arbitrary name could thus cause chosen code to be run on your machine. Consider what happens if you call this for every file in an uploads directory that contains <code>$(rm -rf ~).mkv</code>. Much, <b>much</b> safer to take out the <code>shell=True</code> and make it <code>[&#39;ffmpeg&#39;, &#39;-i&#39;, fileName, &#39;-vf&#39;, &#39;fps=1&#39;, &#39;frame-%d.jpg&#39;]</code>; that&#39;ll also fix simpler cases, like filenames with spaces."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1527111623, "post_id": 50497327, "comment_id": 88008596, "body": "BTW, to adjust the latter command to work without a shell, it would be <code>[&#39;ffprobe&#39;, &#39;-i&#39;, fileName, &#39;-show_entries&#39;, &#39;format=duration&#39;, &#39;-v&#39;, &#39;quiet&#39;, &#39;-of&#39;, &#39;csv=p=0&#39;]</code> -- note that the quotes around <code>p=0</code> are gone. This is because in the original shell code those were <i>syntactic</i> quotes, not <i>literal</i> ones, so they weren&#39;t actually passed to <code>ffprobe</code> but were instead taken out by the shell during the <a href=\"https://www.gnu.org/software/bash/manual/html_node/Quote-Removal.html\" rel=\"nofollow noreferrer\">quote removal</a> stage of <a href=\"http://stuff.lhunath.com/parser.png\" rel=\"nofollow noreferrer\">parsing</a>."}, {"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527118085, "post_id": 50497327, "comment_id": 88010438, "body": "@Barmar How do I see that?"}, {"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1527118098, "post_id": 50497327, "comment_id": 88010443, "body": "@CharlesDuffy If I remove &quot;shell=True&quot;, then I always get &quot;FileNotFoundError: [WinError 2] The system cannot find the file specified.&quot; I understand it is bad but it seems like it runs at least."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527118206, "post_id": 50497327, "comment_id": 88010472, "body": "@Akaisteph7 <code>stderr=subprocess.STDOUT</code> should do it"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527118256, "post_id": 50497327, "comment_id": 88010490, "body": "That &quot;file not found&quot; error is presumably the reason it&#39;s not working in the first place. You probably need to give a full pathname to the file, because it&#39;s not in the current directory."}, {"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527119467, "post_id": 50497327, "comment_id": 88010806, "body": "@Barmar The path is in the current directory though. And I tried the stderr=subprocess.STDOUT, it does not change anything in the output. Since I am using Spyder, do I have to install ffmpeg a different way? I know Spyder has its own python so can it maybe not find ffmpeg?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1527119567, "post_id": 50497327, "comment_id": 88010826, "body": "Maybe. Try using the full pathname to the ffmpeg command."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1527125620, "post_id": 50497327, "comment_id": 88012008, "body": "@Akaisteph7, ...ahh, <b>Windows</b>. The rules are different there. (Wildly different -- on UNIX, everything gets converted to an array, so using a string is adding a bunch of extra complexity; on Windows, everything gets converted to a string, so using an array is depending on other code to do the conversion). Going forward, you might want to include the platform in the question proper."}, {"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1527216673, "post_id": 50497327, "comment_id": 88053852, "body": "@CharlesDuffy ok thanks so much for the help!"}], "answers": [{"tags": [], "owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "is_accepted": true, "score": 0, "last_activity_date": 1527122150, "creation_date": 1527122150, "answer_id": 50499286, "question_id": 50497327, "link": "https://stackoverflow.com/questions/50497327/why-am-i-getting-an-exit-status-of-1/50499286#50499286", "title": "Why am I getting an exit status of 1?", "body": "<p>So, I figured the problem. I installed ffmpeg on my computer but for some reason Anaconda does not seem to use the environment variables to look for the programs it should run. It seems Anaconda has its own set of installed programs and I had to install it through conda using<br>\n    \"conda install -c menpo ffmpeg\"  (from <a href=\"https://anaconda.org/menpo/ffmpeg\" rel=\"nofollow noreferrer\">https://anaconda.org/menpo/ffmpeg</a>).</p>\n"}], "owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1249, "favorite_count": 1, "accepted_answer_id": 50499286, "answer_count": 1, "score": 0, "last_activity_date": 1527122150, "creation_date": 1527108959, "question_id": 50497327, "link": "https://stackoverflow.com/questions/50497327/why-am-i-getting-an-exit-status-of-1", "title": "Why am I getting an exit status of 1?", "body": "<p>So, I am writing this code to analyze this video but I am facing this issue when I try to run it in Spyder, Anaconda:</p>\n\n<pre><code>import subprocess\nfrom subprocess import call\nimport math\n\n##Converts the given file into a series of images\ndef Video_to_Image_Converter(fileName):\n    res1 = call(\"ffmpeg -i \" + fileName + \" -vf fps=1 frame-%d.jpg\", shell=True)\n    print(res1)\n    result = subprocess.Popen('ffprobe -i '+ fileName +' -show_entries format=duration -v quiet -of csv=\"p=0\"', stdout=subprocess.PIPE,stderr=subprocess.STDOUT, shell=True)\n    output = result.communicate()\n    print(output)\n    #return math.ceil(float(output[0])) + 1\n\n\nif __name__ == '__main__':\n    videoLength = Video_to_Image_Converter('sampleVideo.wmv')\n    print(videoLength)\n</code></pre>\n\n<p>So, this code worked fine in iPython but I started having issues when trying to use Spyder. res1 should have an exit status of 0 if everything went well but it is 1. However, I do not know what went wrong. All it says when running subprocess.check_output on call is:</p>\n\n<pre><code>Command 'ffmpeg -i sampleVideo.wmv -vf fps=1 frame-%d.jpg' returned non-zero exit status 1\n</code></pre>\n\n<p>Please help. </p>\n"}, {"tags": ["python", "memory", "memory-leaks", "raspberry-pi"], "comments": [{"owner": {"reputation": 21495, "user_id": 62288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01239dcaa443502ce71059f5308bca74?s=128&d=identicon&r=PG", "display_name": "Dave W. Smith", "link": "https://stackoverflow.com/users/62288/dave-w-smith"}, "edited": false, "score": 0, "creation_date": 1527137571, "post_id": 50497280, "comment_id": 88014814, "body": "&quot;I have a cron that runs a python script every minute that decides how many photos to take and then imports a function from another python script that takes the actual photos.&quot; Show us the importing script. What you&#39;ve shown us shouldn&#39;t cause memory leaks."}, {"owner": {"reputation": 11, "user_id": 9813648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad0f6b574839ae1efe9a9c050e8aa20?s=128&d=identicon&r=PG&f=1", "display_name": "ic198", "link": "https://stackoverflow.com/users/9813648/ic198"}, "reply_to_user": {"reputation": 21495, "user_id": 62288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01239dcaa443502ce71059f5308bca74?s=128&d=identicon&r=PG", "display_name": "Dave W. Smith", "link": "https://stackoverflow.com/users/62288/dave-w-smith"}, "edited": false, "score": 0, "creation_date": 1527143648, "post_id": 50497280, "comment_id": 88017237, "body": "Thanks Dave, I&#39;ve added the cron script to my original post, but note the first script seems to cause the memory leak when run as a standalone program taking single photos."}, {"owner": {"reputation": 21495, "user_id": 62288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01239dcaa443502ce71059f5308bca74?s=128&d=identicon&r=PG", "display_name": "Dave W. Smith", "link": "https://stackoverflow.com/users/62288/dave-w-smith"}, "edited": false, "score": 0, "creation_date": 1527179174, "post_id": 50497280, "comment_id": 88040596, "body": "A standalone script releases memory when it exits, unless something extraordinary is going on.  Is <code>gettimes()</code> doing something that uses a non-constant amount of memory?"}, {"owner": {"reputation": 11, "user_id": 9813648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad0f6b574839ae1efe9a9c050e8aa20?s=128&d=identicon&r=PG&f=1", "display_name": "ic198", "link": "https://stackoverflow.com/users/9813648/ic198"}, "reply_to_user": {"reputation": 21495, "user_id": 62288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01239dcaa443502ce71059f5308bca74?s=128&d=identicon&r=PG", "display_name": "Dave W. Smith", "link": "https://stackoverflow.com/users/62288/dave-w-smith"}, "edited": false, "score": 0, "creation_date": 1527197259, "post_id": 50497280, "comment_id": 88049441, "body": "<code>gettimes()</code> uses the Astral module (<a href=\"https://astral.readthedocs.io/en/stable/index.html\" rel=\"nofollow noreferrer\">astral.readthedocs.io/en/stable/index.html</a>) to work out whether the sun is up and whether to take photos. I have added a screenshot of the memory issue to the end of the post. &#39;SunTimesA.py` is the python script that contains the <code>gettimes()</code> function. You can see after running this memory use increases slightly, but this winds back as memory gets released. &#39;ShutterTimestamp.py` is the python script that contains the <code>ShutterTS()</code> function. After running this multiple times the memory use goes up markedly, and it doesn&#39;t wind back over time."}, {"owner": {"reputation": 11, "user_id": 9813648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad0f6b574839ae1efe9a9c050e8aa20?s=128&d=identicon&r=PG&f=1", "display_name": "ic198", "link": "https://stackoverflow.com/users/9813648/ic198"}, "reply_to_user": {"reputation": 21495, "user_id": 62288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01239dcaa443502ce71059f5308bca74?s=128&d=identicon&r=PG", "display_name": "Dave W. Smith", "link": "https://stackoverflow.com/users/62288/dave-w-smith"}, "edited": false, "score": 0, "creation_date": 1574292208, "post_id": 50497280, "comment_id": 104184953, "body": "An update in case anyone reads this question. I never found a satisfactory answer to this problem. However I &#39;solved&#39; it when I formatted the memory card and installed a new version of the OS. Once it was all up and running again the memory leak problem didn&#39;t exist."}, {"owner": {"reputation": 21495, "user_id": 62288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01239dcaa443502ce71059f5308bca74?s=128&d=identicon&r=PG", "display_name": "Dave W. Smith", "link": "https://stackoverflow.com/users/62288/dave-w-smith"}, "edited": false, "score": 0, "creation_date": 1574366108, "post_id": 50497280, "comment_id": 104218115, "body": "I&#39;m wondering if perhaps basing your assumption of a leak on that screenshot might be misleading. It also shows a progressively larger OS cache, which is what the OS does when it needs to and there&#39;s memory available.  See <a href=\"https://serverfault.com/questions/85470/meaning-of-the-buffers-cache-line-in-the-output-of-free\" title=\"meaning of the buffers cache line in the output of free\">serverfault.com/questions/85470/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1796, "user_id": 5763327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051c8032c315fd540790929f1d6a6510?s=128&d=identicon&r=PG&f=1", "display_name": "Setop", "link": "https://stackoverflow.com/users/5763327/setop"}, "is_accepted": false, "score": 0, "last_activity_date": 1527109954, "creation_date": 1527109954, "answer_id": 50497538, "question_id": 50497280, "link": "https://stackoverflow.com/questions/50497280/python-raspberry-pi-timelapse-memory-leak/50497538#50497538", "title": "Python raspberry Pi timelapse memory leak?", "body": "<p>I suppose you have a wrapping python script which import the script you provide in the question and call <code>ShutterTS</code> in a loop. This function does not return any output to main script (just <code>return</code>).</p>\n\n<p>If you can observe a memory leak it probably is located in the picamera module.\nA workaround it to call this script as a sub-process, not as a function call in the main process. It can be done in a shell script or in the python script using <a href=\"https://docs.python.org/3/library/subprocess.html\" rel=\"nofollow noreferrer\">subprocess</a> module.</p>\n\n<p>Thus the memory will be released after each capture.</p>\n"}], "owner": {"reputation": 11, "user_id": 9813648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad0f6b574839ae1efe9a9c050e8aa20?s=128&d=identicon&r=PG&f=1", "display_name": "ic198", "link": "https://stackoverflow.com/users/9813648/ic198"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 513, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1527222642, "creation_date": 1527108711, "last_edit_date": 1527222642, "question_id": 50497280, "link": "https://stackoverflow.com/questions/50497280/python-raspberry-pi-timelapse-memory-leak", "title": "Python raspberry Pi timelapse memory leak?", "body": "<p>I am using my raspberry Pi3 to create timelapse videos. I have a cron that runs a python script every minute that decides how many photos to take and then imports a function from another python script that takes the actual photos. The problem is that after running for about 4 hours the camera stops taking photos- if I try and take one manually it says it is out of memory, and <code>top</code> confirms this. If I watch <code>top</code> while the timelapse is running the memory usage steadily climbs.</p>\n\n<p>I think I have narrowed the problem down to the python script that takes the photos. I can run this on its own, and if I start up the pi and run it a few times I see that the memory used climbs by about 10MB the first run and about 1MB every subsequent run (screenshot at the bottom of the post). This is the script</p>\n\n<pre><code>import time\nimport picamera\nimport os\n\ndef ShutterTS(dirname):\n    with picamera.PiCamera() as cam:\n        cam.resolution=(1920,1440)\n        cam.rotation=180\n        cam.hflip=True\n        # camera warm up time\n        time.sleep(2)  \n        FNfmt = \"%4d%02d%02d_%02d:%02d:%02d.JPG\"\n        Fname = FNfmt % time.localtime()[0:6]\n        framename = os.path.join(dirname, Fname)\n        cam.capture(framename)\n        return\n\ndef main():\n    dirname = [insert path here, my path hidden]\n    ShutterTS(dirname)\n    return\n\nif __name__ == '__main__':\n    import sys\n    sys.exit(main())\n</code></pre>\n\n<p>I'm not a good coder, I basically cobble stuff together from bits I find on the internet so I'm hoping this is something really simple that I've missed. The <code>with</code> is the raspberry pi recommended way of calling the camera. I know this should close the camera instance on exit but I'm guessing something is hanging around in memory? I tried adding <code>close.cam()</code> at the end of the function and it made no difference (didn't think it would). I've tried <code>del</code> on all the variables at the end of the function and it made no difference. I think the <code>return</code> at the end of the function is redundant but adding it made no difference.</p>\n\n<p>This website <a href=\"https://www.linuxatemyram.com/\" rel=\"nofollow noreferrer\">https://www.linuxatemyram.com/</a> suggests that <code>top</code> showing the memory climbing is normal and <code>free -m</code> is a better gauge, and that shows plenty available- but the fact remains the camera stops working, saying it is out of memory. Any clues would be much appreciated!</p>\n\n<p>This is the cron script (some other imports cropped)</p>\n\n<pre><code>from ShutterTimestamp import ShutterTS\nfrom makedirectory import testmakedir\nfrom SunTimesA import gettimes\n\ndef Timer(dirname,FRAMES_PER_MINUTE):\n    # I take a picture first and then loop so the program isn't\n    # sleeping pointlessly to the end of the minute\n    start = time.time()\n    ShutterTS(dirname)\n    if FRAMES_PER_MINUTE&gt;1:\n        for frame in range(FRAMES_PER_MINUTE-1):\n            time.sleep(int(60 / FRAMES_PER_MINUTE) - (time.time() - start))\n            start = time.time()\n            ShutterTS(dirname)\n    return\n\ndef main():\n    dirfmt = []\n    dirname = dirfmt % time.localtime()[0:3]\n    FPM=gettimes()\n    if FPM &gt; 0:\n        testmakedir(dirname)\n        Timer(dirname,FPM)\n    return\n\nif __name__ == '__main__':\n    sys.exit(main())\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/RO7mz.jpg\" rel=\"nofollow noreferrer\">Screenshot of memory use</a></p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 785, "user_id": 8055932, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H7J5tVWHAmc/AAAAAAAAAAI/AAAAAAAABco/2UxuTrYVxeQ/photo.jpg?sz=128", "display_name": "Ryan Tam", "link": "https://stackoverflow.com/users/8055932/ryan-tam"}, "edited": false, "score": 1, "creation_date": 1527111983, "post_id": 50497274, "comment_id": 88008742, "body": "Any time you a for loop in conjunction with pandas, it&#39;s very likely it will degrade the performance because it will not be vectorised properly. It&#39;s one of the reason why Pandas is fast in some aspect. As for the other question, could you elaborate what exactly is a pairwise slope?"}, {"owner": {"reputation": 3581, "user_id": 742172, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/09f8e52a0e6ebe8bdf8e9f56be396ea7?s=128&d=identicon&r=PG", "display_name": "SamFisher83", "link": "https://stackoverflow.com/users/742172/samfisher83"}, "reply_to_user": {"reputation": 785, "user_id": 8055932, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H7J5tVWHAmc/AAAAAAAAAAI/AAAAAAAABco/2UxuTrYVxeQ/photo.jpg?sz=128", "display_name": "Ryan Tam", "link": "https://stackoverflow.com/users/8055932/ryan-tam"}, "edited": false, "score": 0, "creation_date": 1527168155, "post_id": 50497274, "comment_id": 88033223, "body": "if you have column A: 0,1 and Column B: 0,1 then then slope of those two columns is 1. Its y=Mx+b."}, {"owner": {"reputation": 785, "user_id": 8055932, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H7J5tVWHAmc/AAAAAAAAAAI/AAAAAAAABco/2UxuTrYVxeQ/photo.jpg?sz=128", "display_name": "Ryan Tam", "link": "https://stackoverflow.com/users/8055932/ryan-tam"}, "edited": false, "score": 0, "creation_date": 1527169002, "post_id": 50497274, "comment_id": 88033825, "body": "Could you update your question with your attempt with the for loop please? I would have thought (0,1) and (0,1) together has undefined slope but guess I am thinking about something else."}], "owner": {"reputation": 3581, "user_id": 742172, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/09f8e52a0e6ebe8bdf8e9f56be396ea7?s=128&d=identicon&r=PG", "display_name": "SamFisher83", "link": "https://stackoverflow.com/users/742172/samfisher83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527172135, "creation_date": 1527108705, "last_edit_date": 1527172135, "question_id": 50497274, "link": "https://stackoverflow.com/questions/50497274/is-there-a-way-to-do-cross-beta-matrix-with-pandas", "title": "Is there a way to do cross beta matrix with pandas?", "body": "<p>The pandas corr function is really fast. Even for a table with a 1000 columns x 200 rows it doesn't take more than a minute to calculate a cross correlation matrix. </p>\n\n<p>I was trying to use a for loop to compute the slope between each pair of columns and it was taking much longer. I went back and tried to just use correlation in a loop and that was also taking a long time.</p>\n\n<p>So I guess I have two part question. How is the pandas corr function working so fast. Is there a similar method to to compute the pairwise slope between each column?</p>\n\n<p>Here is an example:</p>\n\n<p>here is table</p>\n\n<p>a b\n0 0</p>\n\n<p>1 1</p>\n\n<p>In that case slope(a,b)=1</p>\n\n<p>a b\n0 0\n1 2</p>\n\n<p>In that case slope(a,b)=2</p>\n"}, {"tags": ["python", "database", "multithreading", "mariadb"], "comments": [{"owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1527535412, "post_id": 50497250, "comment_id": 88154401, "body": "You must not have the same connection thread being used in two different threads."}, {"owner": {"reputation": 3, "user_id": 1750428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nsDM1.jpg?s=128&g=1", "display_name": "Samuel Archibald", "link": "https://stackoverflow.com/users/1750428/samuel-archibald"}, "reply_to_user": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1527795565, "post_id": 50497250, "comment_id": 88273209, "body": "So start a new connection at the start of every thread?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 1750428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nsDM1.jpg?s=128&g=1", "display_name": "Samuel Archibald", "link": "https://stackoverflow.com/users/1750428/samuel-archibald"}, "edited": false, "score": 0, "creation_date": 1527870743, "post_id": 50634340, "comment_id": 88305937, "body": "I&#39;m coding server software for IoT devices, this code takes information from a MQTT server, and puts it into a database. There&#39;s a lot of stuff going on in the background, and the code connects to an external database, however, if the database goes down, the script records to a local database then detects when the main db is up and recovers automatically like nothing happened. I&#39;m just not very experienced with MySQL/MariaDB so having a bit of issue but the MQTT thread has to be separate and start other DB threads so the computation of the data doesn&#39;t hold up the MQTT handling."}, {"owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "reply_to_user": {"reputation": 3, "user_id": 1750428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nsDM1.jpg?s=128&g=1", "display_name": "Samuel Archibald", "link": "https://stackoverflow.com/users/1750428/samuel-archibald"}, "edited": false, "score": 0, "creation_date": 1527871677, "post_id": 50634340, "comment_id": 88306360, "body": "@SamuelArchibald - In web-based apps, each user connection (insert row, run report, etc) is a separate thread, hence necessarily a separate connection to MySQL.  I am not familiar with MQTT; sounds like it works differently?"}, {"owner": {"reputation": 3, "user_id": 1750428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nsDM1.jpg?s=128&g=1", "display_name": "Samuel Archibald", "link": "https://stackoverflow.com/users/1750428/samuel-archibald"}, "edited": false, "score": 0, "creation_date": 1527872199, "post_id": 50634340, "comment_id": 88306576, "body": "Thank you for the information, MQTT is a common IoT protocol that allows entities to connect and authenticate, then publish and subscribe to a topic based system. (ie, publishing to &quot;devices/1&quot; will make all devices or code subscribed to the topic see the message posted) So MQTT doesn&#39;t have anything to do with the database itself, my code acts as the middleman between MQTT and a database and adds a bunch of extra features."}, {"owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "reply_to_user": {"reputation": 3, "user_id": 1750428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nsDM1.jpg?s=128&g=1", "display_name": "Samuel Archibald", "link": "https://stackoverflow.com/users/1750428/samuel-archibald"}, "edited": false, "score": 0, "creation_date": 1527873102, "post_id": 50634340, "comment_id": 88306942, "body": "@SamuelArchibald - OK, then I need to better understand the &quot;client&quot; that interfaces with MySQL.  Is your Python code?  Or some package that uses python?  Does MQTT send things via a &quot;queue&quot; and your single process then acts on?  What advantages are there of multi-threading here?  Etc."}], "tags": [], "owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "is_accepted": false, "score": 0, "last_activity_date": 1527810867, "creation_date": 1527810867, "answer_id": 50634340, "question_id": 50497250, "link": "https://stackoverflow.com/questions/50497250/calling-database-handler-class-in-a-python-thread/50634340#50634340", "title": "Calling database handler class in a python thread", "body": "<p>Writing code that is \"thread safe\" can be tricky.  I doubt if the Python connector to MySQL is thread safe; there is very little need for it.</p>\n\n<p>MySQL is quite happy to have multiple connections to it from clients.  But they must be <em>separate</em> connections, not the same connection running in separate threads.</p>\n\n<p>Very few projects need multi-threaded access to the database.  Do you have a particular need?  If so let's hear about it, and discuss the 'right' way to do it.</p>\n\n<p>For now, each of your threads <em>that needs to talk to the database</em> should create its own connection.  Generally, such a connection can be created soon after starting the thread (or process) and kept open until close to the end of the thread.  That is, normally you should have only one connection per thread.</p>\n"}], "owner": {"reputation": 3, "user_id": 1750428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nsDM1.jpg?s=128&g=1", "display_name": "Samuel Archibald", "link": "https://stackoverflow.com/users/1750428/samuel-archibald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527810867, "creation_date": 1527108592, "question_id": 50497250, "link": "https://stackoverflow.com/questions/50497250/calling-database-handler-class-in-a-python-thread", "title": "Calling database handler class in a python thread", "body": "<p>I'm programming a bit of server code and the MQTT side of it runs in it's own thread using the threading module which works great and no issues but now I'm wondering how to proceed. </p>\n\n<p>I have two MariaDB databases, one of them is local and the other is remote (There is a good and niche reason for this.) and I'm writing a class which handles the databases. This class will start new threads of classes that submits the data to their respected databases. If conditions are true, then it tells the data to start a new thread to push data to one database, if they are false, the data will go to the other database. The MQTT thread has a instance of the \"Database handler\" class and passes data to it through different calling functions within the class.</p>\n\n<p>Will this work to allow a thread to concentrate on MQTT tasks while another does the database work? There are other threads as well, I've just never combined databases and threads before so I'd like an opinion or any information that would help me out from more seasoned programmers.</p>\n"}, {"tags": ["python", "pygame", "sprite"], "comments": [{"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 0, "creation_date": 1527109285, "post_id": 50497212, "comment_id": 88007667, "body": "Please post a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete and verifiable example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 9820669, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iyTOduDczd0/AAAAAAAAAAI/AAAAAAAABA8/iPnVBYybJGQ/photo.jpg?sz=128", "display_name": "Noobles", "link": "https://stackoverflow.com/users/9820669/noobles"}, "edited": false, "score": 1, "creation_date": 1527263523, "post_id": 50509573, "comment_id": 88077700, "body": "I got it to work! I filled the blocks&#39; image layer with the BG color (like you said), then killed the block, then re-blitted the block layer to the screen. Thanks for the help! Edit: To clarify, I actually filled the block layer with a transparent color, but still, your answer helped a bunch"}], "tags": [], "owner": {"reputation": 42, "user_id": 7538058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P52DW.png?s=128&g=1", "display_name": "Zekii", "link": "https://stackoverflow.com/users/7538058/zekii"}, "is_accepted": true, "score": 0, "last_activity_date": 1527165187, "creation_date": 1527165187, "answer_id": 50509573, "question_id": 50497212, "link": "https://stackoverflow.com/questions/50497212/trying-to-delete-sprite-with-kill-but-sprite-isnt-disappearing/50509573#50509573", "title": "Trying to delete sprite with kill(), but sprite isn&#39;t disappearing", "body": "<p>From just a glance, it looks like you might not be clearing the screen at any point in the update loop, but rather drawing over what was already there. This would result in the block still being visible, but not actually there. Try adding <code>screen.fill(#Color here)</code> before flipping the display. Also try using <code>pygame.display.update()</code> instead of <code>pygame.display.flip()</code></p>\n"}], "owner": {"reputation": 97, "user_id": 9820669, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iyTOduDczd0/AAAAAAAAAAI/AAAAAAAABA8/iPnVBYybJGQ/photo.jpg?sz=128", "display_name": "Noobles", "link": "https://stackoverflow.com/users/9820669/noobles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 1, "accepted_answer_id": 50509573, "answer_count": 1, "score": 2, "last_activity_date": 1530548744, "creation_date": 1527108358, "last_edit_date": 1530548744, "question_id": 50497212, "link": "https://stackoverflow.com/questions/50497212/trying-to-delete-sprite-with-kill-but-sprite-isnt-disappearing", "title": "Trying to delete sprite with kill(), but sprite isn&#39;t disappearing", "body": "<p>This is my first time asking here, so sorry if I don't ask very well.</p>\n\n<p>Lately I've been trying to make a Terraria-type game where you can break/place blocks in a randomly generated landscape. While trying to implement the breaking-block mechanic (which is triggered by clicking on a block), I ran into an issue. The block no longer became solid (that's a good thing), but the block's image is still there, and I can walk right through it.</p>\n\n<p>A visual example:\n<a href=\"https://i.stack.imgur.com/znEBt.png\" rel=\"nofollow noreferrer\">Before breaking block</a> vs. \n<a href=\"https://i.stack.imgur.com/TKfU6.png\" rel=\"nofollow noreferrer\">After breaking block</a></p>\n\n<p>Here's the code</p>\n\n<p>Main file (hopefully only the relevant bits):</p>\n\n<pre><code># Imports\nimport pygame as pg\nimport json\nimport sys\nimport random\nimport os\nfrom settings import *\nfrom world_handler import *\n\n# Initialize pygame\npg.mixer.pre_init()\npg.init()\n\n# Fonts\n# NOTE: put fonts in here\n\n# Helper functions\ndef load_image(file_path):\n    # Loads an image\n    img = pg.image.load(file_path)\n    return img\n\ndef play_sound(sound, loops=0, maxtime=0, fade_ms=0):\n    # Plays some audio\n    if sound_on:\n        sound.play(loops, maxtime, fade_ms)\n\ndef play_music():\n    # Plays background music\n    if sound_on:\n        pg.mixer.music.play(-1)\n\n# File paths\ncurrent_path = os.path.dirname(__file__)\nassets_path = os.path.join(current_path, \"assets\")\nimage_path = os.path.join(assets_path, \"img\")\n\n# Images\nplayer_standing = load_image((os.path.join(image_path, \"player\", \"standing\", \"player-standing.png\")))\nplayer_walking1 = load_image((os.path.join(image_path, \"player\", \"walking\", \"player-walking1.png\")))\nplayer_walking2 = load_image((os.path.join(image_path, \"player\", \"walking\", \"player-walking2.png\")))\nplayer_walking3 = load_image((os.path.join(image_path, \"player\", \"walking\", \"player-walking3.png\")))\nplayer_walking4 = load_image((os.path.join(image_path, \"player\", \"walking\", \"player-walking4.png\")))\nplayer_jumping = load_image((os.path.join(image_path, \"player\", \"jumping\", \"player-jumping.png\")))\nplayer_images = {\"walking\": [player_walking1, player_walking2, player_walking3, player_walking4],\n                 \"jumping\": player_jumping,\n                 \"standing\": player_standing}\n\nblock_images = {\"Grass\": load_image((os.path.join(image_path, \"blocks\", \"grass.png\"))),\n                \"Dirt\": load_image((os.path.join(image_path, \"blocks\", \"dirt.png\"))),\n                \"Stone\": load_image((os.path.join(image_path, \"blocks\", \"stone.png\")))}\n\ncursor_tracker = load_image((os.path.join(image_path, \"misc\", \"clear-single-pixel.png\")))\n\n\n\nclass Entity(pg.sprite.Sprite):\n\n    def __init__(self, x, y, image):\n        # Initialize an entity\n        super().__init__()\n\n        self.image = image\n        self.rect = self.image.get_rect()\n        self.rect.x = x\n        self.rect.y = y\n\n        self.vx = 0\n        self.vy = 0\n\n    def apply_gravity(self, world):\n        # Let the enemy be affected by gravity\n        self.vy += world.gravity\n        self.vy = min(self.vy, world.terminal_velocity)\n\n\n\nclass Block(Entity):\n\n    def __init__(self, x, y, image):\n        # Initialize the block\n        super().__init__(x, y, image)\n\n\n\nclass Cursor(Entity):\n\n    def __init__(self, x, y, image):\n        # Initialize the invisible mouse cursor object\n        # This will be used to track where the mouse goes and if the mouse is on a block\n        super().__init__(x, y, image)\n\n        self.on_block = False\n\n    def follow_mouse(self):\n        # Make object follow the mouse\n        self.mouse_x, self.mouse_y = pg.mouse.get_pos()\n        self.rect.x = self.mouse_x\n        self.rect.y = self.mouse_y\n\n    def detect_block_collision(self, world):\n        # Detects collsion between cursor tracker and a block\n        hit_list = pg.sprite.spritecollide(self, world.blocks, True)\n\n        if len(hit_list) &gt; 0:\n            pass\n\n    def update(self, world):\n        # Update the cursor object\n        self.follow_mouse()\n        world.active_sprites.add(self)\n\n\n\nclass Player(Entity):\n\n    def __init__(self, images):\n        # Initialize the player\n        super().__init__(0, 0, images[\"standing\"])\n\n        # Images in each direction\n        self.image_standing_right = images[\"standing\"]\n        self.image_standing_left = pg.transform.flip(self.image_standing_right, 1, 0)\n        self.images_walking_right = images[\"walking\"]\n        self.images_walking_left = [pg.transform.flip(img, 1, 0) for img in self.images_walking_right]\n        self.image_jumping_right = images[\"jumping\"]\n        self.image_jumping_left = pg.transform.flip(self.image_jumping_right, 1, 0)\n\n        # Player variables\n        self.running_images = self.images_walking_right\n        self.image_index = 0\n        self.steps = 0\n        self.speed = 3.5\n        self.jump_power = 12\n\n        self.vx = 0\n        self.vy = 0\n        self.direction = \"right\"\n        self.on_ground = True\n\n        self.score = 0\n        self.health = 100\n        self.max_health = 100\n        self.invincibility = 0\n\n    def move_left(self):\n        # Move to the left\n        self.vx = -self.speed + 0.9\n        self.direction = \"left\"\n\n    def move_right(self):\n        # Move to the rightS\n        self.vx = self.speed\n        self.direction = \"right\"\n\n    def stop(self):\n        # Stop it right there\n        self.vx = 0\n\n    def jump(self, blocks):\n        # Jump up, jump up, and get down\n        self.rect.y += 1\n\n        hit_list = pg.sprite.spritecollide(self, blocks, False)\n\n        if len(hit_list) &gt; 0:\n            self.vy = -1 * self.jump_power\n\n        self.rect.y -= 1\n\n    def check_world_boundaries(self, world):\n        # Make sure the player doesn\"t walk off the world\n        if self.rect.left &lt; 0:\n            self.rect.left = 0\n        elif self.rect.right &gt; world.width:\n            self.rect.right = world.width\n\n    def move_and_process_blocks(self, blocks):\n        # Detect block collisions\n        # Block side collisions\n        self.rect.x += self.vx\n        hit_list = pg.sprite.spritecollide(self, blocks, False)\n\n        for block in hit_list:\n            if self.vx &gt; 0:\n                self.rect.right = block.rect.left\n                self.vx = 0\n            elif self.vx &lt; 0:\n                self.rect.left = block.rect.right\n                self.vx = 0\n\n        self.on_ground = False\n\n        # Block top and bottom collisions\n        self.rect.y += self.vy + 1 # The +1 isn\"t necessary, but it helps\n        hit_list = pg.sprite.spritecollide(self, blocks, False)\n\n        for block in hit_list:\n            if self.vy &gt; 0:\n                self.rect.bottom = block.rect.top\n                self.on_ground = True\n                self.vy = 0\n            elif self.vy &lt; 0:\n                self.rect.top = block.rect.bottom\n                self.on_ground = True\n                self.vy = 0\n\n    def set_image(self):\n        # Set images and animate\n        if self.on_ground:\n            if self.vx != 0:\n                if self.direction == \"right\":\n                    self.walking_images = self.images_walking_right\n                elif self.direction == \"left\":\n                    self.walking_images = self.images_walking_left\n\n                self.steps = (self.steps + 1) % self.speed\n\n                if self.steps == 0:\n                    self.image_index = (self.image_index + 1) % len(self.walking_images)\n                    self.image = self.walking_images[self.image_index]\n            else:\n                if self.direction == \"right\":\n                    self.image = self.image_standing_right\n                elif self.direction == \"left\":\n                    self.image = self.image_standing_left\n        else:\n            if self.direction == \"right\":\n                self.image = self.image_jumping_right\n            elif self.direction == \"left\":\n                self.image = self.image_jumping_left\n\n    def die(self):\n        # D E D\n        pass\n\n    def check_block_breaks(self, blocks):\n        # Break a block\n        # mouse_pos = pg.mouse.get_pos()\n        # for block in blocks:\n        #     if block.rect.collidepoint(mouse_pos):\n        #         print(\"hi\")\n        pass\n\n    def respawn(self, world):\n        # Hey, you\"re back!\n        self.rect.x = world.start_x\n        self.rect.y = world.start_y\n        self.health = self.max_health\n        self.invincibility = 0\n        self.direction = \"right\"\n\n    def update(self, world):\n        # Constantly update the player\n        self.apply_gravity(world)\n        self.move_and_process_blocks(world.blocks)\n        self.check_world_boundaries(world)\n        self.set_image()\n        self.check_block_breaks(world.blocks)\n\n        if self.health &gt; 0:\n            if self.invincibility &gt; 0:\n                self.invincibility -= 1\n        else:\n            self.die()\n\n\n\nclass Game():\n\n    def __init__(self):\n        # Initialize the game itself\n        self.window = pg.display.set_mode([WINDOWWIDTH, WINDOWHEIGHT])\n        pg.display.set_caption(TITLE)\n        self.clock = pg.time.Clock()\n        self.done = False\n        self.reset()\n\n    def start(self):\n        # Start the whole thing up\n        self.world = World(worlds[self.current_world])\n        self.cursor = Cursor(0, 0, cursor_tracker)\n        self.world.reset()\n        self.player.respawn(self.world)\n\n    def reset(self):\n        # Reset the game\n        self.player = Player(player_images)\n        self.current_world = 0\n        self.start()\n\n    def update(self):\n        # Update things in the game\n        self.player.update(self.world)\n        self.cursor.update(self.world)\n\n        if self.player.health &lt;= 0:\n            self.player.respawn(self.world)\n\n    def calculate_offset(self):\n        # Calculate x/y coordinates after screen scrolls\n        x = -1 * self.player.rect.centerx + WINDOWWIDTH / 2\n\n        if self.player.rect.centerx &lt; WINDOWWIDTH / 2:\n            x = 0\n        elif self.player.rect.centerx &gt; self.world.width - WINDOWWIDTH / 2:\n            x = -1 * self.world.width + WINDOWWIDTH\n\n        y = -1 * self.player.rect.centery + WINDOWHEIGHT / 2\n\n        if self.player.rect.centery &lt; WINDOWHEIGHT / 2:\n            y = 0\n        elif self.player.rect.centery &gt; self.world.height - WINDOWHEIGHT / 2:\n            y = -1 * self.world.height + WINDOWHEIGHT\n\n        return x, y\n\n    def draw(self):\n        # Draw sprites to the screen\n        self.offset_x, self.offset_y = self.calculate_offset()\n\n        self.world.active_layer.fill(TRANSPARENT)\n        self.world.active_sprites.draw(self.world.active_layer)\n\n        if self.player.invincibility % 3 &lt; 2:\n            self.world.active_layer.blit(self.player.image, [self.player.rect.x, self.player.rect.y])\n\n        self.window.blit(self.world.background_layer, [self.offset_x / 3, self.offset_y])\n        self.window.blit(self.world.inactive_layer, [self.offset_x, self.offset_y])\n        self.window.blit(self.world.active_layer, [self.offset_x, self.offset_y])\n\n        self.offset_cursor_x = self.cursor.rect.x - self.offset_x\n        self.offset_cursor_y = self.cursor.rect.y - self.offset_y\n\n        self.cursor.rect.x = self.offset_cursor_x\n        self.cursor.rect.y = self.offset_cursor_y\n\n        pg.display.update(0, 0, WINDOWWIDTH, WINDOWHEIGHT)\n\n    def process_events(self):\n        # Handle events (key presses, mouse clicks, etc)\n        for event in pg.event.get():\n            if event.type == pg.QUIT:\n                self.done = True\n\n            elif event.type == pg.KEYDOWN:\n                # Jump\n                if event.key == JUMP:\n                    self.player.jump(self.world.blocks)\n                # Debug reset\n                elif event.key == pg.K_r:\n                    self.reset()\n                # Debug close\n                elif event.key == pg.K_q:\n                    self.done = True\n\n            # Break a block if you click on it\n            if event.type == pg.MOUSEBUTTONDOWN:\n                # for block in self.world.blocks:\n                #     if block.rect.collidepoint(self.offset_cursor_x, self.offset_cursor_y):\n                #         block.kill()\n                self.cursor.detect_block_collision(self.world)\n\n        pressed = pg.key.get_pressed()\n\n        if pressed[LEFT]:\n            self.player.move_left()\n        elif pressed[RIGHT]:\n            self.player.move_right()\n        else:\n            self.player.stop()\n\n    def loop(self):\n        # Loop through essential functions\n        while not self.done:\n            self.process_events()\n            self.update()\n            self.draw()\n            self.clock.tick(FPS)\n\n\n\nif __name__ == \"__main__\":\n    # Begin the loop and pre-initialize the game\n    game = Game()\n    game.start()\n    game.loop()\n    pg.quit()\n    sys.exit()\n</code></pre>\n\n<p>World Handler (generated blocks and adds them to groups):\nSome parts are commented out because they serve no purpose yet, but will soon.</p>\n\n<pre><code># Imports\nimport pygame as pg\nimport json\nimport random\nimport os\nfrom settings import *\nfrom main import *\n\n# Initialize pygame\npg.init()\n\n\n\nclass World():\n\n    def __init__(self, file_path):\n        # Initialize the world\n        # Starting entities\n        self.starting_blocks = []\n\n        # Entity groups\n        self.blocks = pg.sprite.Group()\n\n        # Sprite groups (active/inactive)\n        self.active_sprites = pg.sprite.Group()\n        self.inactive_sprites = pg.sprite.Group()\n\n        # Read the world json file\n        with open(file_path, \"r\") as f:\n            data = f.read()\n\n        map_data = json.loads(data)\n\n        # World width and height\n        self.width = map_data[\"width\"] * GRID_SIZE\n        self.height = map_data[\"height\"] * GRID_SIZE\n\n        # Player start position\n        self.start_x = map_data[\"start\"][0] * GRID_SIZE\n        self.start_y = map_data[\"start\"][1] * GRID_SIZE\n\n        # Load blocks\n        for item in map_data[\"blocks\"]:\n            x, y = item[0] * GRID_SIZE, item[1] * GRID_SIZE\n            img = block_images[item[2]]\n            self.starting_blocks.append(Block(x, y, img))\n\n        # Layers\n        self.background_layer = pg.Surface([self.width, self.height], pg.SRCALPHA, 32)\n        self.inactive_layer = pg.Surface([self.width, self.height], pg.SRCALPHA, 32)\n        self.active_layer = pg.Surface([self.width, self.height], pg.SRCALPHA, 32)\n\n        # Load background color\n        if map_data[\"bg-color\"] != \"\":\n            self.background_layer.fill(map_data[\"bg-color\"])\n\n        # Load background image\n        # if map_data[\"bg-image\"] != \"\":\n        #     bg_image = pg.image.load(map_data[\"bg-image\"]).convert_alpha()\n        #\n        #     if map_data[\"bg-fill-y\"]:\n        #         h = bg_image.get_height()\n        #         w = int(bg_image.get_width() * WINDOWHEIGHT / h)\n        #         bg_image = pg.transform.scale(bg_image, (w, WINDOWHEIGHT))\n        #\n        #     if \"top\" in map_data[\"bg-position\"]:\n        #         start_y = 0\n        #     elif \"bottom\" in map_data[\"bg-postion\"]:\n        #         start_y = self.height = bg_image.get_height()\n        #\n        #     if map_data[\"bg-repeat-x\"]:\n        #         for x in range(0, self.width, bg_image.get_width()):\n        #             self.background_layer.blit(bg_image, [x, start_y])\n        #     else:\n        #         self.background_layer.blit(bg_image, [0, start_y])\n\n        # Load background music\n        # pg.mixer.music.load(map_data[\"music\"])\n\n        # Set the world's gravity strength and terminal velocity\n        self.gravity = map_data[\"gravity\"]\n        self.terminal_velocity = map_data[\"terminal-velocity\"]\n\n        # Grass generator\n        if map_data[\"gen-type\"] == \"earth\":\n            gen_loop = map_data[\"width\"]\n            x = 0\n            y = 56 * GRID_SIZE # The general y coordinate for block placing\n            y_gen = 56 * GRID_SIZE # Stored to be referenced in order to make a smoother landscape\n\n            for i in range (0, map_data[\"width\"]):\n                # Generate grass\n                img = block_images[\"Grass\"]\n                self.starting_blocks.append(Block(x, y, img))\n                y += GRID_SIZE\n                # Generate dirt\n                for i in range(0, 6):\n                    img = block_images[\"Dirt\"]\n                    self.starting_blocks.append(Block(x, y, img))\n                    y += GRID_SIZE\n                # Generate stone\n                for i in range(1, int((self.height / GRID_SIZE))):\n                    img = block_images[\"Stone\"]\n                    self.starting_blocks.append(Block(x, y, img))\n                    y += GRID_SIZE\n\n                y = y_gen\n                x += GRID_SIZE\n                gen_loop -= 1\n\n                # Randomly decide what the next grass' y will be in relation to the previous one\n                random_grass = random.randint(0, 5)\n                # The lowest point you'll find a block of grass\n                lowest_grass_y = 53 * GRID_SIZE\n                # How extreme the changes in block heights will be\n                # 0 is flat, 1 will have pretty smooth terrain, while something like 10 would be super steep\n                gen_extremity = 1\n\n                # Keep the grass at the same y\n                if random_grass == 0 or random_grass == 1 or random_grass == 2 or random_grass == 3:\n                    gen_loop -= 1\n                    if y &lt;= lowest_grass_y:\n                        y += GRID_SIZE\n\n                # Increase y\n                elif random_grass == 4:\n                    y_gen += GRID_SIZE * gen_extremity\n                    if y &lt;= lowest_grass_y:\n                        y += GRID_SIZE\n\n                # Decrease y\n                elif random_grass == 5:\n                    y_gen -= GRID_SIZE * gen_extremity\n                    if y &lt;= lowest_grass_y:\n                        y += GRID_SIZE\n                else:\n                    raise ValueError(\"How did we get here? Grass generator somehow generated an invalid number.\")\n\n        # Add starting entities to their groups\n        self.blocks.add(self.starting_blocks)\n\n        # Add sprites to inactive/active sprite groups\n        self.inactive_sprites.add(self.blocks)\n\n        # Does... something?\n        for s in self.active_sprites:\n            s.image.convert()\n\n        for s in self.inactive_sprites:\n            s.image.convert()\n\n        # Draw inactive sprites to the inactive layer\n        self.inactive_sprites.draw(self.inactive_layer)\n\n        # Convert layers\n        self.background_layer.convert()\n        self.inactive_layer.convert()\n        self.active_layer.convert()\n</code></pre>\n\n<p>Setting file (to help you recreate the issue and find out what's going on</p>\n\n<pre><code># Imports\nimport pygame as pg\nimport os\n\n# File paths\ncurrent_path = os.path.dirname(__file__)\nassets_path = os.path.join(current_path, 'assets')\nimage_path = os.path.join(assets_path, 'img')\n\n# Window settings\nTITLE = \"Mooncraft\"\nWINDOWWIDTH = 960\nWINDOWHEIGHT = 640\nFPS = 60\nGRID_SIZE = 32\n\n# Options\nsound_on = True\n\n# Controls\nLEFT = pg.K_a\nRIGHT = pg.K_d\nJUMP = pg.K_SPACE\n\n# Colors\nTRANSPARENT = (0, 0, 0, 0)\nWHITE = (255, 255, 255)\nBLACK = (0, 0, 0)\nRED = (255, 0, 0)\nGREEN = (0, 255, 0)\nBLUE = (0, 0, 255)\n\n# World files\nworlds = [(os.path.join(assets_path, 'worlds', 'earth.json'))]\n</code></pre>\n\n<p>If someone could explain what I'm doing wrong, it would be much appreciated.</p>\n\n<p>Update 2: Added player class and settings file to help anyone willing to assist me find the issue.</p>\n"}, {"tags": ["python", "postgresql"], "comments": [{"owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "edited": false, "score": 0, "creation_date": 1527110491, "post_id": 50497202, "comment_id": 88008180, "body": "See <a href=\"http://initd.org/psycopg/docs/usage.html\" rel=\"nofollow noreferrer\">initd.org/psycopg/docs/usage.html</a> It gives an example INSERT with placeholder values."}, {"owner": {"reputation": 412, "user_id": 3803991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5ab3133c145a7489a30eaff0f6e0670?s=128&d=identicon&r=PG&f=1", "display_name": "Slumdog", "link": "https://stackoverflow.com/users/3803991/slumdog"}, "edited": false, "score": 0, "creation_date": 1527120324, "post_id": 50497202, "comment_id": 88010985, "body": "shouldn&#39;t you include the execution semicolon? And try single quote like .. VALUES (&#39;{}&#39;, &#39;{}&#39;, &#39;{}&#39;, &#39;{}&#39;) ; &quot;.format(etc"}], "answers": [{"tags": [], "owner": {"reputation": 4645, "user_id": 978676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d119c37b35cff2131c7d8180aa439656?s=128&d=identicon&r=PG", "display_name": "bimsapi", "link": "https://stackoverflow.com/users/978676/bimsapi"}, "is_accepted": false, "score": 0, "last_activity_date": 1527429798, "creation_date": 1527429798, "answer_id": 50552913, "question_id": 50497202, "link": "https://stackoverflow.com/questions/50497202/inputting-var-into-an-insert-using-python/50552913#50552913", "title": "inputting var into an insert using python", "body": "<p>The code, as pasted, looks wrong. You have <code>with conn</code> and <code>c.execute</code>. Assuming <code>c</code> is the cursor, and <code>conn</code> is the connection, the way to use them would look like this: <code>with conn.cursor() as c:</code>. The cursor is a context manager that will properly clean itself up when the <code>with</code> block exits.</p>\n\n<p>Also, don't get in the habit of using <code>.format()</code> on your SQL. That will 1) be a vector for SQL injection vulnerabilities and 2) it will break if the input contains a single quote character. </p>\n\n<p>So, combining those two points, your code should look like this:</p>\n\n<pre><code>with conn.cursor() as c:\n    c.execute(\"INSERT INTO people(person_first, person_last, person_email, \n        person_age) VALUES (%s, %s, %s, %s)\", (person_first, person_last, \n        person_email, person_age,))\n</code></pre>\n\n<p>Note that the parameters are passed as a tuple directly to <code>execute</code>; the driver will parse the query, translate to appropriate SQL/parameter for the server, manage quoting, etc. If you are still seeing errors, post the traceback.</p>\n\n<p>See also - </p>\n\n<ul>\n<li><a href=\"http://initd.org/psycopg/docs/usage.html#with-statement\" rel=\"nofollow noreferrer\">http://initd.org/psycopg/docs/usage.html#with-statement</a></li>\n<li><a href=\"http://initd.org/psycopg/docs/usage.html#the-problem-with-the-query-parameters\" rel=\"nofollow noreferrer\">http://initd.org/psycopg/docs/usage.html#the-problem-with-the-query-parameters</a></li>\n</ul>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 37, "user_id": 6824601, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205130964832719/picture?type=large", "display_name": "twokdavey", "link": "https://stackoverflow.com/users/6824601/twokdavey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527429798, "creation_date": 1527108317, "question_id": 50497202, "link": "https://stackoverflow.com/questions/50497202/inputting-var-into-an-insert-using-python", "title": "inputting var into an insert using python", "body": "<p>I am using python 2.7 and postgresql 10.0.</p>\n\n<p>For learning purposes I am attempting to get user raw_input and place into an insert execute, but no matter what I do, either it be %s or {} and using .format i am receiving errors.\nall values are string except age (int)</p>\n\n<p>specifically</p>\n\n<pre><code>    with conn:\n        c.execute(\"INSERT INTO people(person_first, person_last, person_email, \n            person_age) VALUES ({}, {}, {}, {})\".format(person_first, person_last, \n            person_email, person_age))\n</code></pre>\n\n<p>gives me non-string values (from the inputs)</p>\n\n<p>and %s method gives me an error at the first '%' VALUES(%s, %s, %s, %s)</p>\n\n<p>also have attempted VALUES (?, ?, ?, ?) and also unsuccessful similar to %s</p>\n"}, {"tags": ["python", "python-3.x", "networkx"], "comments": [{"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1527455605, "post_id": 50497186, "comment_id": 88123987, "body": "It seems that your question got cut off. In any case, have you tried reading the Wikipedia article on betweenness centrality? What\u2019s the output when you use <code>betweenness_centrality</code> on your graph?"}], "answers": [{"tags": [], "owner": {"reputation": 98, "user_id": 6719642, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154592141164560/picture?type=large", "display_name": "Tara Eicher", "link": "https://stackoverflow.com/users/6719642/tara-eicher"}, "is_accepted": true, "score": 2, "last_activity_date": 1568643425, "creation_date": 1568643425, "answer_id": 57958789, "question_id": 50497186, "link": "https://stackoverflow.com/questions/50497186/networkx-meaning-of-weight-in-betwenness-and-current-flow-betweenness/57958789#57958789", "title": "networkx - meaning of weight in betwenness and current flow betweenness", "body": "<p>This probably isn't of much help to you now, but for others who have the same question...</p>\n\n<p>Looking into the source code reveals that, if weights are provided, Dijkstra's algorithm is used for computing the shortest paths. Dijkstra's algorithm typically treats weights as distances (i.e. \"bad\"), and this implementation is no exception. Taking the reciprocal of edge weights would therefore be the correct approach. I'm not sure what you mean by \"on larger graphs the two measures correlate more\". That's going to depend on how similar your large graphs are to one another.</p>\n\n<p>Source code: <a href=\"https://networkx.github.io/documentation/latest/_modules/networkx/algorithms/centrality/betweenness.html\" rel=\"nofollow noreferrer\">https://networkx.github.io/documentation/latest/_modules/networkx/algorithms/centrality/betweenness.html</a></p>\n"}], "owner": {"reputation": 339, "user_id": 3146365, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/EzXgs.jpg?s=128&g=1", "display_name": "Forinstance", "link": "https://stackoverflow.com/users/3146365/forinstance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1404, "favorite_count": 2, "accepted_answer_id": 57958789, "answer_count": 1, "score": 6, "last_activity_date": 1568643425, "creation_date": 1527108276, "last_edit_date": 1531759152, "question_id": 50497186, "link": "https://stackoverflow.com/questions/50497186/networkx-meaning-of-weight-in-betwenness-and-current-flow-betweenness", "title": "networkx - meaning of weight in betwenness and current flow betweenness", "body": "<p>I'm using Python Networkx 2.1 to calculate Betweenness Centrality and Current Flow Betweenness Centrality on an undirected graph, with <strong>weighted</strong> edges.\nMy concern is about the meaning of the parameter 'weight' in the networkx functions. Please consider the graph given by the following example</p>\n\n<pre><code>G= nx.Graph()\nG.add_path([1, 2,4])\nG.add_path([1, 3,4])\nG[1][2]['weight'] = 20\nG[1][3]['weight'] = 1\nG[2][4]['weight'] = 1\nG[3][4]['weight'] = 1\n\nfor u,v,d in G.edges(data=True):\n    if 'weight' in d:\n        if d['weight'] != 0:\n            d['reciprocal'] = 1/d['weight']\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/bvyZI.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bvyZI.jpg\" alt=\"enter image description here\"></a>\nEdges weight in my case is strength of relationship, therefore <strong>something positive</strong>. The idea is that edges with higher weights should contribute more to betweenness.\nGiven this idea, am I correct in saying that the right formulas to calculate node Weighted Betweenness Centrality and Weighted Current Flow Betweenness Centrality are the following?</p>\n\n<pre><code>b = nx.betweenness_centrality(G, weight= 'reciprocal', normalized=False)\nOut[46]: {1: 1.0, 2: 1.0, 3: 0.0, 4: 0.0}\n\nf = nx.current_flow_betweenness_centrality(G, normalized= False, weight= 'weight', solver='lu')\nOut[48]: \n{1: 1.3114754098360655,\n 2: 1.3114754098360657,\n 3: 0.6885245901639343,\n 4: 0.6885245901639347}\n</code></pre>\n\n<p>Please note that in the <strong>first formula I used the reciprocal of edge weights</strong> as it is my feeling that these are interpreted by the algorithm as distances, so something 'bad'.\nIn the <strong>second formula</strong>, on the other hand, <strong>I used the original weight</strong>, as in the algorithm of current flow betweenness it seems this gives more importance to nodes 1 and 2, as in betweenness. Therefore here weights seems to be 'positive'.</p>\n\n<p>I'm wondering if I do something wrong. In fact, on larger graphs the two measures correlate more if I use the same weight parameter, and not the reciprocal.\n<strong>How is weight treated in these two algorithms?</strong></p>\n"}, {"tags": ["python", "pandas", "date"], "comments": [{"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 1, "creation_date": 1527108199, "post_id": 50497155, "comment_id": 88007115, "body": "It looks like you want us to write some code for you. While many users are willing to produce code for a coder in distress, they usually only help when the poster has already tried to solve the problem on their own. A good way to demonstrate this effort is to include the code you&#39;ve written so far, example input (if there is any), the expected output, and the output you actually get (console output, tracebacks, etc.). The more detail you provide, the more answers you are likely to receive. Check the <a href=\"https://stackoverflow.com/tour\">FAQ</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 0, "creation_date": 1527108594, "post_id": 50497155, "comment_id": 88007322, "body": "I assume you mean <code>pandas</code>, not <code>numpy</code> in your tags, right? Your dataframe looks like a <code>pandas</code> dataframe and not like a <code>numpy</code> array. Let me know if I&#39;m wrong, I&#39;ll delete my answer"}, {"owner": {"reputation": 115, "user_id": 9836861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f5a73746984a8d7434fcc5df0ab73c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex_MN", "link": "https://stackoverflow.com/users/9836861/alex-mn"}, "reply_to_user": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "edited": false, "score": 1, "creation_date": 1527108971, "post_id": 50497155, "comment_id": 88007514, "body": "@sacul You are right! It was supposed to be numpy"}, {"owner": {"reputation": 115, "user_id": 9836861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f5a73746984a8d7434fcc5df0ab73c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex_MN", "link": "https://stackoverflow.com/users/9836861/alex-mn"}, "reply_to_user": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 1, "creation_date": 1527109037, "post_id": 50497155, "comment_id": 88007545, "body": "@MooingRawr Thanks for your comment! I will make sure that I will post what I have tried"}], "answers": [{"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": true, "score": 1, "last_activity_date": 1527109022, "last_edit_date": 1527109022, "creation_date": 1527108449, "answer_id": 50497229, "question_id": 50497155, "link": "https://stackoverflow.com/questions/50497155/integer-to-date-format-based-on-business-month/50497229#50497229", "title": "Integer to Date Format based on Business Month", "body": "<p>There are lots of built in datetime functionalities in <code>pandas</code>. Getting what you need is straightforward using <a href=\"https://pandas.pydata.org/pandas-docs/stable/timeseries.html#dateoffset-objects\" rel=\"nofollow noreferrer\"><code>offsets</code></a>. You first have to pass your date in the correct format to <code>pd.to_datetime</code>:</p>\n\n<pre><code>df['Date2'] = pd.to_datetime(df['Date'], format='%Y%m') + pd.offsets.BMonthEnd(1)\n\n&gt;&gt;&gt; df\n  Product    Date Country      Date2\n0       A  200801     USA 2008-01-31\n1       C  201503     AUS 2015-03-31\n2       B  201002      UK 2010-02-26\n3       B  201704     FIN 2017-04-28\n4       C  200605     IRE 2006-05-31\n5       A  200805     CAN 2008-05-30\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 9836861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1f5a73746984a8d7434fcc5df0ab73c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex_MN", "link": "https://stackoverflow.com/users/9836861/alex-mn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 50497229, "answer_count": 1, "score": 0, "last_activity_date": 1527109022, "creation_date": 1527108096, "last_edit_date": 1527108942, "question_id": 50497155, "link": "https://stackoverflow.com/questions/50497155/integer-to-date-format-based-on-business-month", "title": "Integer to Date Format based on Business Month", "body": "<p>I have a Dataframe with a column <code>Date</code> of type <code>int</code>. I wanted to convert the <code>Date</code> of <code>Input_DF</code> to  last business day of particular month and store in new column as <code>Date2</code>. Is there any way possible to do this. Thanks in advance.  </p>\n\n<p>Input_DF: </p>\n\n<pre><code>Product Date    Country\nA      200801   USA\nC      201503   AUS\nB      201002   UK\nB      201704   FIN\nC      200605   IRE\nA      200805   CAN\n</code></pre>\n\n<p>Output_DF:</p>\n\n<pre><code>Product Date  Country  Date2\nA      200801   USA     2008-01-31 \nC      201503   AUS     2015-03-31\nB      201002   UK      2010-02-26\nB      201704   FIN     2017-04-28\nC      200605   IRE     2006-05-31\nA      200805   CAN     2008-05-30\n</code></pre>\n"}, {"tags": ["python", "autodesk", "motionbuilder"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 8308838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9b9e2d8ab66c0d7da0f539813640256?s=128&d=identicon&r=PG&f=1", "display_name": "Purp", "link": "https://stackoverflow.com/users/8308838/purp"}, "edited": false, "score": 0, "creation_date": 1529011381, "post_id": 50600890, "comment_id": 88734656, "body": "Thanks Paul, this works. Do you happen to know the reason why creating the device with Python\\C++ doesn&#39;t work? Or what the difference is between that and a user click and dragging it into the scene is?"}, {"owner": {"reputation": 16, "user_id": 5282032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T9n6y.jpg?s=128&g=1", "display_name": "Paul Boots", "link": "https://stackoverflow.com/users/5282032/paul-boots"}, "reply_to_user": {"reputation": 81, "user_id": 8308838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9b9e2d8ab66c0d7da0f539813640256?s=128&d=identicon&r=PG&f=1", "display_name": "Purp", "link": "https://stackoverflow.com/users/8308838/purp"}, "edited": false, "score": 0, "creation_date": 1535659636, "post_id": 50600890, "comment_id": 91160336, "body": "Hi MB, No, I haven&#39;t been able to figure out why this doesn&#39;t work. The template based work around is good enough for me as well."}], "tags": [], "owner": {"reputation": 16, "user_id": 5282032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T9n6y.jpg?s=128&g=1", "display_name": "Paul Boots", "link": "https://stackoverflow.com/users/5282032/paul-boots"}, "is_accepted": true, "score": 0, "last_activity_date": 1527671903, "creation_date": 1527671903, "answer_id": 50600890, "question_id": 50497136, "link": "https://stackoverflow.com/questions/50497136/set-up-vicon-stream-device-via-python/50600890#50600890", "title": "Set up Vicon stream device via Python", "body": "<p>I had similar issues with adding devices in a c++ tool.\nMy work around was to create a template file containing my device and open that from the c++ code. You can try same trick using python.</p>\n"}], "owner": {"reputation": 81, "user_id": 8308838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9b9e2d8ab66c0d7da0f539813640256?s=128&d=identicon&r=PG&f=1", "display_name": "Purp", "link": "https://stackoverflow.com/users/8308838/purp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 50600890, "answer_count": 1, "score": 0, "last_activity_date": 1529012077, "creation_date": 1527108040, "last_edit_date": 1529012077, "question_id": 50497136, "link": "https://stackoverflow.com/questions/50497136/set-up-vicon-stream-device-via-python", "title": "Set up Vicon stream device via Python", "body": "<p>I'd like to use python to setup a Vicon streaming device in Motionbuilder 2017.</p>\n\n<p><a href=\"https://www.vicon.com/downloads/third-party/motion-builder/archive/motion-builder-2017-win64\" rel=\"nofollow noreferrer\">Vicon Stream Device | Download Page</a></p>\n\n<pre><code>from pyfbsdk import*\n\napp = FBApplication()\nscene = FBSystem().Scene\n\n# Find the device\nviconStreamingDevice = FBCreateObject( 'Browsing/Templates/Devices','Vicon Stream Device', \"Vicon Stream Device\")\n\n# Import the device to the current file\nscene.Devices.append(viconStreamingDevice)\n\n# Execute the Device?\n# ...\n</code></pre>\n\n<p>When I click\\drag the device into my scene from the asset browser it works correctly. If I use the python script above, the device appears in the scene but doesn't work properly. The images below show what the navigator looks like when I select the device.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4M1si.jpg\" rel=\"nofollow noreferrer\">Vicon Stream Device | Click\\Drag Into Scene</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/KfTKF.jpg\" rel=\"nofollow noreferrer\">Vicon Stream Device | Python Script</a></p>\n\n<p>Device information is missing and \"model binding:\" is greyed out. In addition the scene becomes very fragile and will crash soon after running the script.</p>\n\n<p>What's the difference between click\\dragging and using the python script above? Is there a way to import the Vicon Streaming Device to Motionbuilder using python?</p>\n\n<hr>\n\n<p><strong>Answer Info Below</strong> ( Based on Paul Boots Suggestion )</p>\n\n<p>I ended up initializing the device manually and connecting it to a Vicon Shogun session I had open. I set the device offline and saved the file. Below is the code I used in my script to merge the device into the required scenes.</p>\n\n<pre><code>viconStreamDevice = r\"D:\\ViconStreamDevice.fbx\"\nMOptions = FBFbxOptions( True, viconStreamDevice )\napp.FileMerge( viconStreamDevice, False, MOptions )\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 5981, "user_id": 7003620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9caf46ce1c06de4a3307511b57c5d2?s=128&d=identicon&r=PG", "display_name": "Druta Ruslan", "link": "https://stackoverflow.com/users/7003620/druta-ruslan"}, "edited": false, "score": 0, "creation_date": 1527108345, "post_id": 50497125, "comment_id": 88007194, "body": "you have only one <code>print</code> and this print is in <code>ocr_space_url()</code> function, but you don&#39;t call this function anywhere"}, {"owner": {"reputation": 9, "user_id": 8400183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a345cd8bc9b1bb10132f5673c6b2349?s=128&d=identicon&r=PG&f=1", "display_name": "johnnyo1012", "link": "https://stackoverflow.com/users/8400183/johnnyo1012"}, "reply_to_user": {"reputation": 5981, "user_id": 7003620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9caf46ce1c06de4a3307511b57c5d2?s=128&d=identicon&r=PG", "display_name": "Druta Ruslan", "link": "https://stackoverflow.com/users/7003620/druta-ruslan"}, "edited": false, "score": 0, "creation_date": 1527121275, "post_id": 50497125, "comment_id": 88011163, "body": "I fixed it. I fixed the last line in the code. Here is my new last line- (ocr_space_file(filename=&#39;example_image.png&#39;, language=&#39;eng&#39;))"}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 8400183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a345cd8bc9b1bb10132f5673c6b2349?s=128&d=identicon&r=PG&f=1", "display_name": "johnnyo1012", "link": "https://stackoverflow.com/users/8400183/johnnyo1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1527121310, "creation_date": 1527121310, "answer_id": 50499202, "question_id": 50497125, "link": "https://stackoverflow.com/questions/50497125/ocr-space-api-python-not-printing-text/50499202#50499202", "title": "OCR Space API Python Not Printing Text", "body": "<p>I fixed it. I fixed the last line in the code. Here is my new last line- (ocr_space_file(filename='example_image.png', language='eng')) </p>\n"}], "owner": {"reputation": 9, "user_id": 8400183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a345cd8bc9b1bb10132f5673c6b2349?s=128&d=identicon&r=PG&f=1", "display_name": "johnnyo1012", "link": "https://stackoverflow.com/users/8400183/johnnyo1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527121310, "creation_date": 1527108005, "last_edit_date": 1527108221, "question_id": 50497125, "link": "https://stackoverflow.com/questions/50497125/ocr-space-api-python-not-printing-text", "title": "OCR Space API Python Not Printing Text", "body": "<p>I am trying to send an image to <code>ocr.space</code> using their api with python. Here is my code. The code runs without errors but doesn't print anything. Why? How can I make it <code>print</code>??</p>\n\n<pre><code>import requests\nimport json\n\ndef ocr_space_file(filename, overlay=False, api_key='helloworld', language='eng'):\n    \"\"\" OCR.space API request with local file.\n        Python3.5 - not tested on 2.7\n       :param filename: Your file path &amp; name.\n       :param overlay: Is OCR.space overlay required in your response.\n                Defaults to False.\n       :param api_key: 2fe3ae129e88957\n                Defaults to 'helloworld'.\n       :param language: Language code to be used in OCR.\n                List of available language codes can be found on https://ocr.space/OCRAPI\n                Defaults to 'en'.\n       :return: Result in JSON format.\n    \"\"\"\n\n    payload = {'isOverlayRequired': overlay,\n           'apikey': api_key,\n           'language': language,\n           }\n    with open(filename, 'rb') as f:\n        r = requests.post('https://api.ocr.space/parse/image',\n                      files={filename: f},\n                      data=payload,\n                      )\n    return r.content.decode()\n\n\ndef ocr_space_url(url, overlay=False, api_key='helloworld', language='eng'):\n    \"\"\" OCR.space API request with remote file.\n        Python3.5 - not tested on 2.7\n    :param url: Image url.\n    :param overlay: Is OCR.space overlay required in your response.\n                Defaults to False.\n    :param api_key: 2fe3ae129e88957\n                Defaults to 'helloworld'.\n    :param language: Language code to be used in OCR.\n                List of available language codes can be found on https://ocr.space/OCRAPI\n                Defaults to 'en'.\n    :return: Result in JSON format.\n    \"\"\"\n\n    payload = {'url': url,\n           'isOverlayRequired': overlay,\n           'apikey': api_key,\n           'language': language,\n           }\n    m = r.content.decode()\n    jsonstr = json.loads(m)\n    print (jsonstr[\"ParsedResults\"][0][\"ParsedText\"])\n\nocr_space_file(filename='example_image.png', language='eng')\n</code></pre>\n\n<p>Here is a <a href=\"https://pastebin.com/E7M5WWXC\" rel=\"nofollow noreferrer\">pastebin</a> to my code.</p>\n"}, {"tags": ["python", "python-3.x", "plotly", "plotly-dash"], "answers": [{"tags": [], "owner": {"reputation": 2481, "user_id": 5359797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b192666442865ace0d34a18c175a810?s=128&d=identicon&r=PG&f=1", "display_name": "PieCot", "link": "https://stackoverflow.com/users/5359797/piecot"}, "is_accepted": false, "score": 5, "last_activity_date": 1529000586, "creation_date": 1529000586, "answer_id": 50863700, "question_id": 50497104, "link": "https://stackoverflow.com/questions/50497104/python-dash-creating-a-stacked-bar-chart-from-excel-file/50863700#50863700", "title": "Python - Dash creating a stacked bar chart from Excel file", "body": "<p>I think the problem is how you create the figure attribute and layout of the Graph component.</p>\n\n<p>Try this code, it should solve your problem.</p>\n\n<pre><code>import dash\nimport dash_core_components as dcc\nimport dash_html_components as html\nimport plotly.graph_objs as go\n\napp = dash.Dash()\n\ntrace1 = go.Bar(\n    x=['giraffes', 'orangutans', 'monkeys'],\n    y=[20, 14, 23],\n    name='SF Zoo'\n)\ntrace2 = go.Bar(\n    x=['giraffes', 'orangutans', 'monkeys'],\n    y=[12, 18, 29],\n    name='LA Zoo'\n)\n\napp.layout = html.Div([\n    dcc.Graph(id='bar_plot',\n              figure=go.Figure(data=[trace1, trace2],\n                               layout=go.Layout(barmode='stack'))\n              )\n    ])\n</code></pre>\n\n<p>It produces the following result:\n<a href=\"https://i.stack.imgur.com/GK9xB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GK9xB.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 239, "user_id": 8150532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/89dec06313f6bbc60ebe2f35b6fd0608?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8150532/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5516, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1529000586, "creation_date": 1527107882, "question_id": 50497104, "link": "https://stackoverflow.com/questions/50497104/python-dash-creating-a-stacked-bar-chart-from-excel-file", "title": "Python - Dash creating a stacked bar chart from Excel file", "body": "<p>How can I converte a graph like this:</p>\n\n<pre><code>df1 = pd.read_excel(\"C:/Users/Tim/PycharmProjects/firstdash/Analysis.xlsx\")\n\n     html.Div(\n                [\n                    html.H3(\"Graph 1\"),\n                    dcc.Graph(\n                        id=\"g1\",\n                        figure={\n                            \"data\": [\n                                go.Bar(\n                                    x=df1[\"Marketsegment\"],\n                                    y=df1[\"test\"],\n                                )]})],)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/6gT0e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6gT0e.png\" alt=\"sdasdasdsadasdasda\"></a></p>\n\n<p>Into a stacked Bar Chart. So one Bar that includes Total Residential and Business stacked up with different colors.</p>\n\n<p>Somehow I cant seem to get it to work.</p>\n\n<p>All I found was this syntax, which has not worked for me:</p>\n\n<pre><code>trace1 = go.Bar(\n    x=['giraffes', 'orangutans', 'monkeys'],\n    y=[20, 14, 23],\n    name='SF Zoo'\n)\ntrace2 = go.Bar(\n    x=['giraffes', 'orangutans', 'monkeys'],\n    y=[12, 18, 29],\n    name='LA Zoo'\n)\n\ndata = [trace1, trace2]\nlayout = go.Layout(\n    barmode='group'\n)\n</code></pre>\n"}, {"tags": ["python", "gurobi"], "answers": [{"tags": [], "owner": {"reputation": 555, "user_id": 9864503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5356b5bd50ddc927b72e659f83bcdf64?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/9864503/robert"}, "is_accepted": false, "score": 1, "last_activity_date": 1527599823, "creation_date": 1527599823, "answer_id": 50585405, "question_id": 50497074, "link": "https://stackoverflow.com/questions/50497074/gurobi-get-status-message-by-status-code/50585405#50585405", "title": "Gurobi - Get status message by status code?", "body": "<p>There is no API function to retrieve the internal status message, but it's fairly simple to set up a message dict yourself for that purpose.  Assuming that you have imported <code>GRB</code>, one could do:</p>\n\n<pre><code>&gt;&gt;&gt; # TODO add more status codes here...\n&gt;&gt;&gt; msgdict = {GRB.OPTIMAL : 'Optimal', GRB.INFEASIBLE : 'Infeasible model'}\n&gt;&gt;&gt; model.optimize()\n&gt;&gt;&gt; print msgdict[m.status]\nOptimal\n</code></pre>\n"}], "owner": {"reputation": 84240, "user_id": 283863, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vItjB.png?s=128&g=1", "display_name": "Derek \u6715\u6703\u529f\u592b", "link": "https://stackoverflow.com/users/283863/derek-%e6%9c%95%e6%9c%83%e5%8a%9f%e5%a4%ab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 717, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1527599823, "creation_date": 1527107775, "question_id": 50497074, "link": "https://stackoverflow.com/questions/50497074/gurobi-get-status-message-by-status-code", "title": "Gurobi - Get status message by status code?", "body": "<p>Is there a way to get the status message using a status code? For error codes I can easily get the message by catching the exception and accessing its <code>.message</code> attribute, however for statuses I only get the code from:</p>\n\n<pre><code>model.status\n</code></pre>\n\n<p>It seems like the messages are stored in the Gurobi library since it prints out a message when something happens, for example encountering an infeasible model, but I don't see a way of accessing the message itself, i.e. storing it in a variable.</p>\n"}, {"tags": ["python", "excel"], "comments": [{"owner": {"reputation": 510, "user_id": 9791398, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156375049162838/picture?type=large", "display_name": "Tim Johns", "link": "https://stackoverflow.com/users/9791398/tim-johns"}, "edited": false, "score": 0, "creation_date": 1527107639, "post_id": 50496994, "comment_id": 88006865, "body": "If you print <code>cell2</code> and <code>pvalue</code>, what do you see, and what do you want to see?"}, {"owner": {"reputation": 510, "user_id": 9791398, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156375049162838/picture?type=large", "display_name": "Tim Johns", "link": "https://stackoverflow.com/users/9791398/tim-johns"}, "edited": false, "score": 0, "creation_date": 1527107878, "post_id": 50496994, "comment_id": 88006988, "body": "Oh I think I understand... So <code>pvalue</code> is a list of items that were comma-separated in <code>cell2</code>, and you want to write each element of <code>pvalue</code> into its own column starting at column 1?  If so, just do a <code>for</code> loop like this:  <code>for col, element in enumerate(pvalue): row.write(col+1, element)</code>"}, {"owner": {"reputation": 19, "user_id": 9154572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c1a2406d084eae731a3a0d29e03b8?s=128&d=identicon&r=PG&f=1", "display_name": "azryel6500", "link": "https://stackoverflow.com/users/9154572/azryel6500"}, "reply_to_user": {"reputation": 510, "user_id": 9791398, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156375049162838/picture?type=large", "display_name": "Tim Johns", "link": "https://stackoverflow.com/users/9791398/tim-johns"}, "edited": false, "score": 0, "creation_date": 1527108141, "post_id": 50496994, "comment_id": 88007088, "body": "Thanks Tim Johns, that did it, if you could make your comment an answer I can mark it as the answer"}], "answers": [{"tags": [], "owner": {"reputation": 510, "user_id": 9791398, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156375049162838/picture?type=large", "display_name": "Tim Johns", "link": "https://stackoverflow.com/users/9791398/tim-johns"}, "is_accepted": true, "score": 0, "last_activity_date": 1527108235, "creation_date": 1527108235, "answer_id": 50497175, "question_id": 50496994, "link": "https://stackoverflow.com/questions/50496994/i-am-trying-to-split-contents-of-an-excel-spreadsheet-cell/50497175#50497175", "title": "I am trying to split contents of an excel spreadsheet cell", "body": "<p><code>pvalue</code> is a list of items that were comma-separated in <code>cell2</code>, and you want to write each element of <code>pvalue</code> into its own column starting at column 1.  To do so, just do a <code>for</code> loop like this:</p>\n\n<pre><code>for col, element in enumerate(pvalue):\n    row.write(col+1, element)\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 9154572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c1a2406d084eae731a3a0d29e03b8?s=128&d=identicon&r=PG&f=1", "display_name": "azryel6500", "link": "https://stackoverflow.com/users/9154572/azryel6500"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2094, "favorite_count": 0, "accepted_answer_id": 50497175, "answer_count": 1, "score": 0, "last_activity_date": 1527108235, "creation_date": 1527107389, "question_id": 50496994, "link": "https://stackoverflow.com/questions/50496994/i-am-trying-to-split-contents-of-an-excel-spreadsheet-cell", "title": "I am trying to split contents of an excel spreadsheet cell", "body": "<p>I am trying to split the contents of a cell from an excel spreadsheet, being new to Python, I can't quite figure out the syntax for it.  I am using the <code>xlrd</code> and <code>xlwt</code> libraries.  So far I can get the correct columns I need and would like to split out the contents of the cell <code>pvalue</code> similar to the excel function <code>text to columns</code>, is this a practical thing to do in python? Everything I can find on line, already has data neatly formatted with all data points in a seperate column, I was wondering if I could get a point in the right direction.  Here is the code I have so far</p>\n\n<pre><code>import xlrd\nimport xlwt\n\n# open and create workbook\nworkbook = xlrd.open_workbook('myexcelfile.xlsx')\nworkbookwrite = xlwt.Workbook('output.xlsx')\n\n# open and create sheets\nworksheet = workbook.sheet_by_index(0)\nsheet = workbookwrite.add_sheet('Sheet1')\n\ni = 1\n\n# iterate through rows in worksheet, get columns completed_at and name\nfor rows in range(worksheet.nrows):\n   cell1 = worksheet.cell(rows, 3).value\n   cell2 = worksheet.cell(rows, 15).value\n   row = sheet.row(i)\n\n# if a completed_at date is empty, don't write data to new workbook\n    if cell1 != '':\n       value = cell2\n       pvalue = cell2.split(',')\n       row.write(0, cell1)\n       row.write(1, pvalue)\n   i += 1\n\nworkbookwrite.save('output.xls')\n</code></pre>\n\n<p>If I could get direction on a different library to use, if there is a better one out there that would be great.  Thanks</p>\n"}, {"tags": ["python", "tensorflow"], "owner": {"reputation": 103, "user_id": 8523800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a279a28a112c5e2272e84b034cca7379?s=128&d=identicon&r=PG&f=1", "display_name": "Viviane", "link": "https://stackoverflow.com/users/8523800/viviane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527107211, "creation_date": 1527107211, "question_id": 50496942, "link": "https://stackoverflow.com/questions/50496942/how-to-expand-tf-nn-sparse-softmax-cross-entropy-with-logits-numclasses", "title": "How to expand tf.nn.sparse_softmax_cross_entropy_with_logits numClasses", "body": "<p>I'm working on a network which should be able to learn new classes on the fly. This means that the number of output classes increases during training. To do this I reinitialize the last layer of the network once a new class appears with one node more. It all works well and the last layer increases in size during training. The problem I have now is whenever a new label shows up which is out of the initial range tf.nn.sparse_softmax_cross_entropy_with_logits throws this error: </p>\n\n<p>\"<em>Received a label value of 7 which is outside the valid range of [0, 7).  Label values: 0 6 5 2 0 2 1 6 4 2 6 4 3 4 5 7 5 7 1 4 5 4 6 1 1 6 7 6 7 5 6 3 4 0 7 0 0 1 7 3 1 2 4 3 2 7 3 3 4 7 0 0 7 3 6 5 0 3 0 7 2 2 2 3 2 2 0 7 2 3 4 2 2 6 0 3 6 5 4 1 6 5 0 6 1 7 4 7 7 2 3 0 5 6 3 7 1 1 1 0 0 3 7 6 5 1 4 6 0 0 4 7 1 0 3 0 1 4 4 6 1 0 6 6 2 3 0 7 2 7 6 2 7 0 2 6 1 5 2 7 6 4 6 6 7 5 2 2 0 7 6 7 7 4 1 7 3 5 2 5 2 3 7 6 2 0 3 6 7 6 5 3 5 4 4 7 5 7 5 7 6 3 6 5 4 4 7 7 1 0 4 3 7 5 6 2 7 2 3 0</em>\" </p>\n\n<p>I am testing on the CIFAR-10 dataset and started training with 6 classes. After adding the 7th class the last layer has size [batchsize,8] but tf.nn.sparse_softmax_cross_entropy_with_logits does not recognize that there is another output node now. When I just grow the last layer without adding new classes to the input batches everything works fine. Is there some kind of trick to tell tf.nn.sparse_softmax_cross_entropy_with_logits that numClasses has increased?</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1527107441, "post_id": 50496938, "comment_id": 88006766, "body": "try <code>writer.writerow(myData+myData2)</code> but <code>myData2</code> is assigned in a loop just above. That&#39;s clearly a code smell"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1527107484, "post_id": 50496938, "comment_id": 88006789, "body": "also note that you can use append mode all the time: if file doesn&#39;t exist, it creates it."}], "answers": [{"tags": [], "owner": {"reputation": 528, "user_id": 5446449, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-INdy0aXH9Bo/AAAAAAAAAAI/AAAAAAAAACA/hDTtkxDDtvM/photo.jpg?sz=128", "display_name": "James Russo", "link": "https://stackoverflow.com/users/5446449/james-russo"}, "is_accepted": false, "score": 1, "last_activity_date": 1527107744, "last_edit_date": 1527107744, "creation_date": 1527107408, "answer_id": 50496999, "question_id": 50496938, "link": "https://stackoverflow.com/questions/50496938/skip-row-when-writing-to-csv/50496999#50496999", "title": "Skip row when writing to CSV", "body": "<p>I think the fix is pretty simple, just change </p>\n\n<pre><code>writer.writerow(myData)\nwriter.writerow(myData2)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>writer.writerow(myData + myData2)\n</code></pre>\n\n<p>Every time you call the <code>writerow</code> function it will write to a new row. But if you want to write all your information to one row you need to perform it in a single <code>writerow</code> call. So combine your two lists into one list and call <code>writerow</code> on that single list</p>\n\n<p>This bit of code though is slightly concerning</p>\n\n<pre><code>for z in range (len(response2)):\n  myData2 = [(response2[z]['model']),(response2[z]['status']),datetime.datetime.now()]\n</code></pre>\n\n<p>This is looping over the array that is the json body of your second response, but it's overwriting <code>myData2</code> each time. So <code>myData2</code> is only ever going to equal the last model and status of your response.</p>\n\n<p>You also don't have a timestamp column in your CSV but you are adding the time to <code>myData2</code> and writing it to your CSV.</p>\n"}], "owner": {"reputation": 9, "user_id": 9772446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d2732d64f17a08f506ae5291b57522?s=128&d=identicon&r=PG&f=1", "display_name": "Daftyler", "link": "https://stackoverflow.com/users/9772446/daftyler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1527107744, "creation_date": 1527107192, "last_edit_date": 1527107281, "question_id": 50496938, "link": "https://stackoverflow.com/questions/50496938/skip-row-when-writing-to-csv", "title": "Skip row when writing to CSV", "body": "<p>I have written a script that collects data from 2 seperate API's and I am having trouble getting it to all show up on one row, instead it is showing up like this:</p>\n\n<pre><code>Device  Status  Model   StatusSub  \n\nd8d     Online      \n122  Disconnected   \n</code></pre>\n\n<p>When I want it to look like this;</p>\n\n<pre><code>Device  Status  Model   StatusSub\n\nd8d    Online    1202   Disconnected        \n</code></pre>\n\n<p>Here is my code, the API is password protected so you will not be able to run it directly:</p>\n\n<pre><code>while True:#always run\nif datetime.datetime.now().minute % 15 == 0 or True:#once every 15 minutes\n    name = [('Device'), ('Status'), ('Model'), ('StatusSub')]\n    space = [(''),('')]\n    print (datetime.datetime.now())\n    today = datetime.date.today().strftime('E.Subdevice.Logs.%m-%d-%Y')#file name\n    if os.path.exists(today + '.csv'):#Create new file if its a new day\n        Append_write = 'ab'\n    else:\n        Append_write = 'wb'\n\n    with open(today + '.csv',Append_write) as myFile:#open todays csv file, set to write. \n        writer = csv.writer(myFile)\n        writer.writerow(name)\n        writer.writerow(space)\n        #Loop to collect device name and status 500 at a time and print all 2080 in the file specified above.     \n        for x in range(5):\n            string1 = \"https://api.raincloud.com/rest/device?networkName=Company&amp;take=500&amp;skip=\"+str(x*500)\n            response = requests.get(string1,headers=headers).json()\n            for y in range (len(response)):\n                myData = [(response[y]['device']),(response[y]['status'])]\n                string2= 'https://api.raincloud.com/rest/device/'+str(myData[0])+'/subdevice'\n                response2 = requests.get(string2,headers=headers).json()\n                for z in range (len(response2)):\n                     myData2 = [(response2[z]['model']),(response2[z]['status']),datetime.datetime.now()]\n\n\n                writer.writerow(myData)\n                writer.writerow(myData2) \n</code></pre>\n\n<p>Any help is appreciated. </p>\n"}, {"tags": ["python", "django", "modelform", "modelchoicefield"], "comments": [{"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1527114273, "post_id": 50496895, "comment_id": 88009499, "body": "Pass in the <code>help_text</code> as an argument to <code>CategoryModelChoiceField</code>. Maybe you can access it like <code>help_text=self._meta.model.category.help_text</code> or something similar."}], "answers": [{"comments": [{"owner": {"reputation": 3094, "user_id": 2700631, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/L6mRr.jpg?s=128&g=1", "display_name": "43Tesseracts", "link": "https://stackoverflow.com/users/2700631/43tesseracts"}, "edited": false, "score": 0, "creation_date": 1527130156, "post_id": 50499448, "comment_id": 88013037, "body": "How about getting the help text that already exists on the model field?"}], "tags": [], "owner": {"reputation": 2252, "user_id": 7654215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81374f7e9b250cdaf75cf92b6a6e883f?s=128&d=identicon&r=PG&f=1", "display_name": "seuling", "link": "https://stackoverflow.com/users/7654215/seuling"}, "is_accepted": false, "score": 1, "last_activity_date": 1569334147, "last_edit_date": 1569334147, "creation_date": 1527123722, "answer_id": 50499448, "question_id": 50496895, "link": "https://stackoverflow.com/questions/50496895/how-to-get-help-text-on-a-custom-django-modelchoicefield/50499448#50499448", "title": "How to get help_text on a custom Django ModelChoiceField", "body": "<p>You can add it inside <code>Meta</code>.</p>\n\n<pre><code>from django.utils.translation import gettext_lazy as _\n\nclass AuthorForm(ModelForm):\n    class Meta:\n        model = Author\n        fields = ('name', 'title', 'birth_date')\n        labels = {\n            'name': _('Writer'),\n        }\n        help_texts = {\n            'name': _('Some useful help text.'),\n        }\n        error_messages = {\n            'name': {\n                'max_length': _(\"This writer's name is too long.\"),\n            },\n        }\n</code></pre>\n\n<p>See <a href=\"https://docs.djangoproject.com/en/2.0/topics/forms/modelforms/#overriding-the-default-fields\" rel=\"nofollow noreferrer\">django docs</a>.</p>\n\n<p>Also, you can add with <code>__init__</code> method.</p>\n\n<pre><code>class EventForm(forms.ModelForm):\n\n    def __init__(self, *args, **kwargs):\n        super(EventForm, self).__init__(*args, **kwargs)\n        self.fields['category'].help_text = ''\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3094, "user_id": 2700631, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/L6mRr.jpg?s=128&g=1", "display_name": "43Tesseracts", "link": "https://stackoverflow.com/users/2700631/43tesseracts"}, "is_accepted": true, "score": 1, "last_activity_date": 1527559320, "creation_date": 1527559320, "answer_id": 50575370, "question_id": 50496895, "link": "https://stackoverflow.com/questions/50496895/how-to-get-help-text-on-a-custom-django-modelchoicefield/50575370#50575370", "title": "How to get help_text on a custom Django ModelChoiceField", "body": "<p>With help from the comment below the question, here's how I got my custom form field to get the default help text back from the model:</p>\n\n<pre><code>class EventForm(forms.ModelForm):\n    category = CategoryModelChoiceField(\n        queryset=Category.objects.all(),\n        help_text=Event._meta.get_field('category').help_text,\n)\n</code></pre>\n"}], "owner": {"reputation": 3094, "user_id": 2700631, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/L6mRr.jpg?s=128&g=1", "display_name": "43Tesseracts", "link": "https://stackoverflow.com/users/2700631/43tesseracts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1012, "favorite_count": 0, "accepted_answer_id": 50575370, "answer_count": 2, "score": 1, "last_activity_date": 1569334147, "creation_date": 1527107048, "question_id": 50496895, "link": "https://stackoverflow.com/questions/50496895/how-to-get-help-text-on-a-custom-django-modelchoicefield", "title": "How to get help_text on a custom Django ModelChoiceField", "body": "<p>I'm creating a <a href=\"https://stackoverflow.com/questions/6836740/django-admin-change-foreignkey-display-text\">custom</a> <code>ModelChoiceField</code> so I can display custom labels for my foreign key, but in doing so Django no longer displays the <code>help_text</code> on the form.  How can I get the help text back?</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>class Event(models.Model):\n\n    title = models.CharField(max_length=120)\n    category = models.ForeignKey(Category, default=Category.DEFAULT_CATEGORY_ID, on_delete=models.SET_NULL, null=True,\n                                 help_text=\"By default, events are sorted by category in the events list.\")\n</code></pre>\n\n<p><strong>forms.py</strong></p>\n\n<pre><code>class CategoryModelChoiceField(forms.ModelChoiceField):\n    def label_from_instance(self, obj):\n        return \"%s (%s)\" % (obj.name, obj.description)\n\nclass EventForm(forms.ModelForm):\n\n    category = CategoryModelChoiceField(\n        queryset=Category.objects.all(),\n    )\n\n    class Meta:\n        model = Event\n        fields = [...]\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1527107754, "post_id": 50496846, "comment_id": 88006917, "body": "See <a href=\"https://stackoverflow.com/questions/33582162/backslashes-in-python-regular-expressions\">Backslashes in Python Regular Expressions</a>, too."}], "answers": [{"tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": true, "score": 11, "last_activity_date": 1527107485, "last_edit_date": 1527107485, "creation_date": 1527107042, "answer_id": 50496892, "question_id": 50496846, "link": "https://stackoverflow.com/questions/50496846/why-are-double-backslashes-for-word-boundary-regular-expressions-but-single-bac/50496892#50496892", "title": "Why are double backslashes for word boundary regular expressions, but single backslash works for other expressions?", "body": "<p><code>\\b</code> has a special meaning: it's the backspace character. <code>\\s</code> and many other <code>\\&lt;something&gt;</code> sequences have no special meaning so <code>\\</code> is then interpreted as a literal slash.</p>\n\n<pre><code>&gt;&gt;&gt; '\\b'\n'\\x08'\n&gt;&gt;&gt; print('123\\b456')\n12456\n&gt;&gt;&gt; '\\s'\n'\\\\s'\n&gt;&gt;&gt; print('\\s')\n\\s\n&gt;&gt;&gt; print('\\b')\n\n&gt;&gt;&gt; # nothing visible printed above\n</code></pre>\n\n<p>To make things easier, you should usually use raw string literals when writing regexes. This generally prevents <code>\\</code> from being interpreted as an escape character in the Python string sense, so that it works properly in your regex. For example:</p>\n\n<pre><code>&gt;&gt;&gt; r'\\b'\n'\\\\b'\n&gt;&gt;&gt; print(r'\\b')\n\\b\n</code></pre>\n"}], "owner": {"reputation": 381, "user_id": 5988669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62063fd62bdd50f4e616df325be4ed89?s=128&d=identicon&r=PG", "display_name": "sdMarth", "link": "https://stackoverflow.com/users/5988669/sdmarth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 50496892, "answer_count": 1, "score": 2, "last_activity_date": 1527110741, "creation_date": 1527106861, "last_edit_date": 1527110741, "question_id": 50496846, "link": "https://stackoverflow.com/questions/50496846/why-are-double-backslashes-for-word-boundary-regular-expressions-but-single-bac", "title": "Why are double backslashes for word boundary regular expressions, but single backslash works for other expressions?", "body": "<p>Example:</p>\n\n<pre><code>def searchResult(expr, inputStr):\n    if (re.search(expr, inputStr)):\n        return True\n    return False\n\nprint(searchResult(\"\\s\", \"the quick brown fox\")) # True\nprint(searchResult(\"\\bfox\", \"the quick brown fox\")) # False\nprint(searchResult(\"\\\\bfox\", \"the quick brown fox\")) # True\n</code></pre>\n\n<p>I need double backslash <code>\"\\\\b\"</code> for word boundaries, but just single backslash <code>\"\\s\"</code> is acceptable for whitespace characters. Why is the double backslash required for word boundaries?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1527107498, "post_id": 50496842, "comment_id": 88006801, "body": "So your question is.... ?"}, {"owner": {"reputation": 321, "user_id": 5447286, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/VOG7t.jpg?s=128&g=1", "display_name": "adamczi", "link": "https://stackoverflow.com/users/5447286/adamczi"}, "edited": false, "score": 1, "creation_date": 1527107800, "post_id": 50496842, "comment_id": 88006941, "body": "your <code>else</code> block is unnecessary btw."}, {"owner": {"reputation": 1, "user_id": 7554646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9326fcb6f239cf07e26cd5298ba9e0a8?s=128&d=identicon&r=PG&f=1", "display_name": "lz975545", "link": "https://stackoverflow.com/users/7554646/lz975545"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1527107937, "post_id": 50496842, "comment_id": 88007011, "body": "@barny How would I go about tweeting multiple lines at a time?"}, {"owner": {"reputation": 321, "user_id": 5447286, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/VOG7t.jpg?s=128&g=1", "display_name": "adamczi", "link": "https://stackoverflow.com/users/5447286/adamczi"}, "edited": false, "score": 0, "creation_date": 1527107946, "post_id": 50496842, "comment_id": 88007013, "body": "is it your problem, that it posts one line per tweet instead of posting many lines in one tweet from file up to a newline? if so, try to concatenate lines like <code>&#39;\\n&#39;.join([line1, line2])</code> and then post those joined lines at once."}, {"owner": {"reputation": 1, "user_id": 7554646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9326fcb6f239cf07e26cd5298ba9e0a8?s=128&d=identicon&r=PG&f=1", "display_name": "lz975545", "link": "https://stackoverflow.com/users/7554646/lz975545"}, "reply_to_user": {"reputation": 321, "user_id": 5447286, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/VOG7t.jpg?s=128&g=1", "display_name": "adamczi", "link": "https://stackoverflow.com/users/5447286/adamczi"}, "edited": false, "score": 0, "creation_date": 1527112060, "post_id": 50496842, "comment_id": 88008774, "body": "@adamczi for each tweet, i want it to print each line but break at a blank line. how could i implement that?"}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1527112140, "post_id": 50496842, "comment_id": 88008803, "body": "does blank line&#39;s length is zero?"}, {"owner": {"reputation": 321, "user_id": 5447286, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/VOG7t.jpg?s=128&g=1", "display_name": "adamczi", "link": "https://stackoverflow.com/users/5447286/adamczi"}, "edited": false, "score": 0, "creation_date": 1527157936, "post_id": 50496842, "comment_id": 88026093, "body": "@lz975545 then join lines with a <code>\\n</code> until you find an empty line. Then post this comibnation of lines at once, and continue with following lines."}], "owner": {"reputation": 1, "user_id": 7554646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9326fcb6f239cf07e26cd5298ba9e0a8?s=128&d=identicon&r=PG&f=1", "display_name": "lz975545", "link": "https://stackoverflow.com/users/7554646/lz975545"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 365, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527107548, "creation_date": 1527106845, "last_edit_date": 1527107548, "question_id": 50496842, "link": "https://stackoverflow.com/questions/50496842/print-paragraphs-from-text-file-in-python", "title": "Print paragraphs from text file in python", "body": "<p>I'm trying to make a twitter bot that tweets from a text file but can't figure out how to paragraphs. I want it to be able to print text separately from each line. Like this:</p>\n\n<pre><code>example tweet\nand some text to accompany it\n\nanother example tweet\nwith some more text\n</code></pre>\n\n<p>Here is my supporting code. Note this is only setup for reading/tweeting each individual line.</p>\n\n<pre><code>import tweepy\nfrom time import sleep\nfrom credentials import*\n\nauth = tweepy.OAuthHandler(consumer_key, consumer_secret)\nauth.set_access_token(access_token, access_token_secret)\napi = tweepy.API(auth)\n\nmy_file = open('quotes.txt')\nfile_lines = my_file.readlines()\nmy_file.close()\n\n# Tweet a line every hour\ndef tweet():\nfor line in file_lines:\n    try:\n         print(line)\n         if line != '\\n':\n             api.update_status(line)\n             sleep(3600)\n         else:\n            pass\n    except tweepy.TweepError as e:\n        print(e.reason)\n        sleep(2)\n\ntweet()\n</code></pre>\n"}, {"tags": ["python", "azure", "sdk", "avatar"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 2514161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e785be2b287bba2b3af38b75058476?s=128&d=identicon&r=PG", "display_name": "Anders Sandblad", "link": "https://stackoverflow.com/users/2514161/anders-sandblad"}, "edited": false, "score": 0, "creation_date": 1527321479, "post_id": 50499208, "comment_id": 88092620, "body": "Thank you for the pointer. I think I&#39;ve tried the graph api in the past but didn&#39;t understand one main point, the auth using sign in via web seems strange to me, I want to run these scripts commandline and not have to re-auth every now and then."}, {"owner": {"reputation": 41, "user_id": 2514161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e785be2b287bba2b3af38b75058476?s=128&d=identicon&r=PG", "display_name": "Anders Sandblad", "link": "https://stackoverflow.com/users/2514161/anders-sandblad"}, "edited": false, "score": 0, "creation_date": 1528015966, "post_id": 50499208, "comment_id": 88339495, "body": "Wow, according to <a href=\"https://stackoverflow.com/questions/37396426/cant-update-profilephoto-with-microsoft-graph-api\">this</a> and <a href=\"https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/api/profilephoto_update\" rel=\"nofollow noreferrer\">Note To update the photo of any user in the organization, your app must have the User.ReadWrite.All application permission and call this API under its own identity, not on behalf of a user.</a> it&#39;s not possible to update a user photo as admin without the user signing in?? Or am I misunderstanding?"}], "tags": [], "owner": {"reputation": 3035, "user_id": 4074838, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8gS08_lyG7s/AAAAAAAAAAI/AAAAAAAAHqA/rU0O1y51fto/photo.jpg?sz=128", "display_name": "Laurent Mazuel", "link": "https://stackoverflow.com/users/4074838/laurent-mazuel"}, "is_accepted": false, "score": 0, "last_activity_date": 1527121350, "creation_date": 1527121350, "answer_id": 50499208, "question_id": 50496835, "link": "https://stackoverflow.com/questions/50496835/how-to-change-an-office-365-user-avatar-with-azure-sdk-for-python/50499208#50499208", "title": "How to change an Office 365 user avatar with Azure SDK for Python", "body": "<p>Office 365 is not Azure, so you won't find anything for that in this repo (I own that repo, so I know it :)).</p>\n\n<p>However, in my understanding this is perflectly doable with Microsoft Graph\n<a href=\"https://developer.microsoft.com/en-us/graph/docs/concepts/python\" rel=\"nofollow noreferrer\">https://developer.microsoft.com/en-us/graph/docs/concepts/python</a></p>\n\n<p>There is a sample called:</p>\n\n<blockquote>\n  <p>profile_photo() returns the user's profile photo and optionally saves a copy to a local file.</p>\n</blockquote>\n\n<p>which probably gives a good idea of the API (even if it's not a write sample as you need).</p>\n"}], "owner": {"reputation": 41, "user_id": 2514161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e785be2b287bba2b3af38b75058476?s=128&d=identicon&r=PG", "display_name": "Anders Sandblad", "link": "https://stackoverflow.com/users/2514161/anders-sandblad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1527121350, "creation_date": 1527106809, "question_id": 50496835, "link": "https://stackoverflow.com/questions/50496835/how-to-change-an-office-365-user-avatar-with-azure-sdk-for-python", "title": "How to change an Office 365 user avatar with Azure SDK for Python", "body": "<p>I've successfully been using <a href=\"https://github.com/sfonteneau/script_modify_password_googleapps_and_office365\" rel=\"nofollow noreferrer\">this</a> script to sync passwords for users on our local Samba server and our Office 365. The script uses <a href=\"https://github.com/Azure/azure-sdk-for-python\" rel=\"nofollow noreferrer\">Azure SDK for Python</a>.\nI would also like to update the user image/avatar for the users in Office 365 with some script that doesn't need a windows host (like powershell with 365-modules seems to do) but I'm having a hard time navigating the documentation for <a href=\"https://github.com/Azure/azure-sdk-for-python\" rel=\"nofollow noreferrer\">Azure SDK for Python</a>.</p>\n"}, {"tags": ["python", "function"], "comments": [{"owner": {"reputation": 695, "user_id": 2178649, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/I4l2W.jpg?s=128&g=1", "display_name": "Gratus D.", "link": "https://stackoverflow.com/users/2178649/gratus-d"}, "edited": false, "score": 0, "creation_date": 1527106889, "post_id": 50496821, "comment_id": 88006452, "body": "it is probably possible by calling exec(), but maybe there is a better way? Can you provide more details about what you are actually trying to achieve?"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1527107227, "post_id": 50496821, "comment_id": 88006648, "body": "You are aware of <code>f(*args)</code> syntax?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1527111167, "post_id": 50496821, "comment_id": 88008426, "body": "What determines the arguments you want to <i>pass</i> to the various functions when one is called?"}], "answers": [{"comments": [{"owner": {"reputation": 1505, "user_id": 7889061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1f0b0cecc400ddaa8a9f4f15018726?s=128&d=identicon&r=PG&f=1", "display_name": "Feodoran", "link": "https://stackoverflow.com/users/7889061/feodoran"}, "edited": false, "score": 0, "creation_date": 1527107259, "post_id": 50496896, "comment_id": 88006665, "body": "You could just use the <code>*</code> syntax to pass arbitrary numbers of arguments: <code>dictionary[&quot;1&quot;](*args)</code>, where <code>args</code> is a list of the arguments."}, {"owner": {"reputation": 2620, "user_id": 5335649, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9650fd24c7432056ab9e7c892bc38523?s=128&d=identicon&r=PG&f=1", "display_name": "Rockybilly", "link": "https://stackoverflow.com/users/5335649/rockybilly"}, "reply_to_user": {"reputation": 1505, "user_id": 7889061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1f0b0cecc400ddaa8a9f4f15018726?s=128&d=identicon&r=PG&f=1", "display_name": "Feodoran", "link": "https://stackoverflow.com/users/7889061/feodoran"}, "edited": false, "score": 0, "creation_date": 1527107426, "post_id": 50496896, "comment_id": 88006759, "body": "@Feodoran Of course, after the correct implementation, both calling methods can be used. It depends on how the programmer stores his/her arguments."}], "tags": [], "owner": {"reputation": 2620, "user_id": 5335649, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9650fd24c7432056ab9e7c892bc38523?s=128&d=identicon&r=PG&f=1", "display_name": "Rockybilly", "link": "https://stackoverflow.com/users/5335649/rockybilly"}, "is_accepted": false, "score": -1, "last_activity_date": 1527107053, "creation_date": 1527107053, "answer_id": 50496896, "question_id": 50496821, "link": "https://stackoverflow.com/questions/50496821/how-to-call-functions-in-a-dict-that-take-different-numbers-of-arguments/50496896#50496896", "title": "How to call functions in a dict that take different numbers of arguments?", "body": "<ol>\n<li><p>You can make all the functions take a list of arguments.</p>\n\n<pre><code>[arg1, arg2] or [] # empty, etc...\n</code></pre></li>\n<li><p>You could also store the number of arguments in the dict values.</p>\n\n<pre><code>\"1\": (func1, 0), etc...\n</code></pre></li>\n</ol>\n\n<p>Then you can call the functions like,</p>\n\n<pre><code>dictionary[\"1\"]([arg1, arg2]) # Or with other implementation style you used.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 1, "creation_date": 1527109343, "post_id": 50496902, "comment_id": 88007701, "body": "I think OP&#39;s problem is that when they&#39;re writing the code, they don&#39;t know which function will be called, hence the dictionary. Your answer assumes that the functions are accessed statically, e.g. <code>d[&quot;1&quot;]</code> instead of <code>d[some_key]</code>."}, {"owner": {"reputation": 8201, "user_id": 3690024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2d5067f52318f0ed4db9eca0b2cda1?s=128&d=identicon&r=PG", "display_name": "AJNeufeld", "link": "https://stackoverflow.com/users/3690024/ajneufeld"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1527109683, "post_id": 50496902, "comment_id": 88007866, "body": "@AlexHall  I didn&#39;t think it was much of a stretch to go from <code>d[&quot;1&quot;]()</code> to <code>d[func_name]()</code>.  The question of which, and how many arguments to pass really needs clarification from the OP.  But using <code>sig.bind(...)</code>, which returns <a href=\"https://docs.python.org/3/library/inspect.html#inspect.BoundArguments\" rel=\"nofollow noreferrer\"><code>BoundArguments</code></a> allows the function to provide default values for arguments which aren&#39;t specified, could simplify the problem some what."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1527109803, "post_id": 50496902, "comment_id": 88007923, "body": "But <code>d[func_name]()</code> won&#39;t work if <code>func_name = &quot;3&quot;</code>. And I don&#39;t see how the bound arguments help."}, {"owner": {"reputation": 8201, "user_id": 3690024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2d5067f52318f0ed4db9eca0b2cda1?s=128&d=identicon&r=PG", "display_name": "AJNeufeld", "link": "https://stackoverflow.com/users/3690024/ajneufeld"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1527109874, "post_id": 50496902, "comment_id": 88007952, "body": "@AlexHall  But I only called <code>func_name = &quot;3&quot;</code> with 2 arguments ... well, one argument and one keyword argument ... it defaulted the third."}], "tags": [], "owner": {"reputation": 8201, "user_id": 3690024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2d5067f52318f0ed4db9eca0b2cda1?s=128&d=identicon&r=PG", "display_name": "AJNeufeld", "link": "https://stackoverflow.com/users/3690024/ajneufeld"}, "is_accepted": false, "score": 0, "last_activity_date": 1527108454, "last_edit_date": 1527108454, "creation_date": 1527107069, "answer_id": 50496902, "question_id": 50496821, "link": "https://stackoverflow.com/questions/50496821/how-to-call-functions-in-a-dict-that-take-different-numbers-of-arguments/50496902#50496902", "title": "How to call functions in a dict that take different numbers of arguments?", "body": "<p>Store the functions in the dictionary, and call the functions with the correct number of arguments.  Nothing special needs to be done.</p>\n\n<pre><code>def func1():\n   print(\"Function 1 - no args\")\n\ndef func2(a):\n   print(\"Function 2 got arg\", a)\n\ndef func3(r, g=\"green\", b=\"blue\"):\n   print(\"Function 3 got %r, %r and %r\" % (r,g,b))\n\nd = { \"1\": func1,\n      \"2\": func2,\n      \"3\": func3 }\n\nd[\"1\"]()\nd[\"2\"](\"Hello\")\n</code></pre>\n\n<p>You can even <code>inspect</code> the functions in the dictionary, to get the method's signature (positional arguments and keyword arguments, and default values).</p>\n\n<pre><code>import inspect\n\nf = d[\"3\"]\nsig = inspect.signature(f)\nba = sig.bind(\"red\", g=\"gray\")\nba.apply_defaults()\nf(*ba.args, **ba.kwargs)\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Function 1 - no args<br>\n  Function 2 got arg Hello<br>\n  Function 3 got 'red', 'gray' and 'blue'</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 8201, "user_id": 3690024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2d5067f52318f0ed4db9eca0b2cda1?s=128&d=identicon&r=PG", "display_name": "AJNeufeld", "link": "https://stackoverflow.com/users/3690024/ajneufeld"}, "edited": false, "score": 0, "creation_date": 1527109149, "post_id": 50497246, "comment_id": 88007594, "body": "We should combine our answers.  Nice demonstration of retrieving and using the number of parameters."}, {"owner": {"reputation": 55, "user_id": 9110411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZsck.png?s=128&g=1", "display_name": "Tomdrc1", "link": "https://stackoverflow.com/users/9110411/tomdrc1"}, "edited": false, "score": 0, "creation_date": 1527154771, "post_id": 50497246, "comment_id": 88023955, "body": "Thank you! that really helped me!"}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": true, "score": 2, "last_activity_date": 1527108569, "creation_date": 1527108569, "answer_id": 50497246, "question_id": 50496821, "link": "https://stackoverflow.com/questions/50496821/how-to-call-functions-in-a-dict-that-take-different-numbers-of-arguments/50497246#50497246", "title": "How to call functions in a dict that take different numbers of arguments?", "body": "<p>Assuming this setup:</p>\n\n<pre><code>def foo():\n    print('foo')\n\ndef bar(a):\n    print('bar %s' % a)\n\ndef spam(a, b):\n    print('spam %s %s' % (a, b))\n\nfunctions = dict(foo=foo, bar=bar, spam=spam)\n</code></pre>\n\n<p>Here is what you can do:</p>\n\n<pre><code>import inspect\n\nfor func in functions.values():\n    num_args = len(inspect.signature(func).parameters)\n    args = [1, 2, 3]\n    func(*args[:num_args])\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9110411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZsck.png?s=128&g=1", "display_name": "Tomdrc1", "link": "https://stackoverflow.com/users/9110411/tomdrc1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 50497246, "answer_count": 3, "score": 0, "last_activity_date": 1527110973, "creation_date": 1527106732, "last_edit_date": 1527110973, "question_id": 50496821, "link": "https://stackoverflow.com/questions/50496821/how-to-call-functions-in-a-dict-that-take-different-numbers-of-arguments", "title": "How to call functions in a dict that take different numbers of arguments?", "body": "<p>I want to have a <code>dict</code> of functions, but some of the functions take more arguments than others.</p>\n\n<pre><code>\"1\":func1, # This takes 0 arguments\n\"2\":func2 # This takes 1 argument `\n</code></pre>\n\n<p>I don't know how to call the function through the <code>dict</code>. Am I supposed to have an <code>if</code> statment or is there something I am missing?</p>\n"}, {"tags": ["python", "windows", "python-3.x", "performance", "process"], "comments": [{"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 1, "creation_date": 1527107807, "post_id": 50496756, "comment_id": 88006944, "body": "How often do you need to access this information?  If you need to track the processes ten times per second, for example, you can simply insert <code>time.sleep(0.1)</code> after your <code>while True:</code> statement.  You are using CPU resources because your while True loop runs all the time."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1527116499, "post_id": 50496756, "comment_id": 88010049, "body": "Use <a href=\"http://timgolden.me.uk/python/wmi\" rel=\"nofollow noreferrer\">wmi</a> to create two <a href=\"https://msdn.microsoft.com/en-us/library/aa394372\" rel=\"nofollow noreferrer\"><code>Win32_Process</code></a>  watchers for &quot;creation&quot; and &quot;deletion&quot; events, polling them sequentially in a loop, e.g. <code>for watcher in itertools.cycle([process_creation_watcher, process_deletion_watcher])</code>. Call the watcher with a timeout such as <code>process = watcher(timeout_ms=50)</code> and ignore the <code>wmi.x_wmi_timed_out</code> exception. The object has <code>event_type</code> and <code>timestamp</code> attributes in addition to <code>Win32_Process</code> methods (e.g. <code>Terminate</code>) and properties (e.g. <code>Name</code>, <code>ProcessId</code>)."}], "owner": {"reputation": 1, "user_id": 9836589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/211f90187605131738b77fe77c19e312?s=128&d=identicon&r=PG&f=1", "display_name": "ActualUser", "link": "https://stackoverflow.com/users/9836589/actualuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527111312, "creation_date": 1527106458, "last_edit_date": 1527111312, "question_id": 50496756, "link": "https://stackoverflow.com/questions/50496756/efficiently-track-windows-processes-loading-and-unloading", "title": "Efficiently track Windows processes (loading and unloading)", "body": "<p>I am struggling to find a way to dynamically keep track of windows processes as they spawn (load) and die (unload) using as little of the CPU as possible.</p>\n\n<p>My current solution uses the <code>K32EnumProcesses</code> to get all running pids (Process Ids) and basic set operations to deduce the dead and spawned pids.</p>\n\n<pre><code>class Procs:\n\n    def __init__(self):\n        pass\n\n    def get_all_processes(self):\n        pProcessIds = (c_ulong * 4096)()\n        pBytesReturned = c_ulong()\n        hModule = c_ulong()\n        count = c_ulong()\n        kernel32.K32EnumProcesses(byref(pProcessIds), sizeof(pProcessIds), byref(pBytesReturned))\n        nReturned = pBytesReturned.value/sizeof(c_ulong())\n        for pid in [i for i in pProcessIds][:int(nReturned)]:\n            yield int(pid)\n\n    def find_dead(self, prev_pids, curr_pids):\n        return prev_pids - curr_pids\n\n    def find_live(self, prev_pids, curr_pids):\n        return curr_pids - prev_pids\n\nif __name__ == '__main__':\n    proc_obj = Procs()\n    prev_procs = set()\n    while True:\n        curr_procs = set(proc_obj.get_all_processes())\n        dead = proc_obj.find_dead(prev_procs, curr_procs)\n        live = proc_obj.find_live(prev_procs, curr_procs)\n        [print(f'died: {d}') for d in dead]\n        [print(f'live: {l}') for l in live]\n        dead = None\n        live = None\n        prev_procs = curr_procs\n</code></pre>\n\n<p>The problem with this solution is that it uses around 50% of the CPU.</p>\n\n<p><a href=\"https://i.stack.imgur.com/IsrfA.png\" rel=\"nofollow noreferrer\">CPU and memory usage</a> (image)</p>\n\n<p>I've tried piping to cmd tasklist and parsing the output but it isn't any better.</p>\n\n<p>I don't know if there is a way to get windows to notify the program when a new process has loaded or if I might have to resort to a driver.</p>\n\n<p>To give a bit of context this solution will be part of a program which will scan processes as they load for malware, and will run on older systems which don't have much processing power or available memory.</p>\n"}, {"tags": ["python", "integer"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 2, "creation_date": 1527106481, "post_id": 50496753, "comment_id": 88006238, "body": "What does it even mean to &quot;<i>call a random integer</i>&quot;? Do you want to produce an integer that is not equal to any number on the list? (<i>List</i>, not <i>array</i>.) If so, would that number have any other limitations?"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1527106677, "post_id": 50496753, "comment_id": 88006347, "body": "Does &quot;random&quot; mean random as in &quot;a different one every time&quot;, or random as in &quot;it doesn&#39;t matter which one&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 1809, "user_id": 9801728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LXQkV.jpg?s=128&g=1", "display_name": "MoxieBall", "link": "https://stackoverflow.com/users/9801728/moxieball"}, "edited": false, "score": 1, "creation_date": 1527106737, "post_id": 50496787, "comment_id": 88006383, "body": "Just for clarity, using <code>()</code> instead of <code>[]</code> will create a <a href=\"https://wiki.python.org/moin/Generators\" rel=\"nofollow noreferrer\">generator</a> instead of a <a href=\"http://www.pythonforbeginners.com/basics/list-comprehensions-in-python\" rel=\"nofollow noreferrer\">list comprehension</a>, which might not be abundantly clear from this (correct) answer."}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": true, "score": 2, "last_activity_date": 1527106862, "last_edit_date": 1527106862, "creation_date": 1527106593, "answer_id": 50496787, "question_id": 50496753, "link": "https://stackoverflow.com/questions/50496753/get-a-random-value-from-a-list-which-is-not-equal-to-a-particular-number/50496787#50496787", "title": "Get a random value from a list which is not equal to a particular number?", "body": "<pre><code>import random\n\nk = random.choice([i for i in array if i != x])\n</code></pre>\n\n<p>Note that the <code>[]</code> are required in this case, as:</p>\n\n<pre><code>random.choice(i for i in array if i != x)\n</code></pre>\n\n<p>which is equivalent to</p>\n\n<pre><code>gen = (i for i in array if i != x)\nrandom.choice(gen)\n</code></pre>\n\n<p>doesn't work since <code>choice</code> requires a sequence, which a generator is not.</p>\n"}, {"comments": [{"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1527106831, "post_id": 50496791, "comment_id": 88006428, "body": "How this will give a random indexed number in the list?"}], "tags": [], "owner": {"reputation": 357, "user_id": 5815692, "user_type": "registered", "profile_image": "https://graph.facebook.com/508703950/picture?type=large", "display_name": "Nicholas James Bailey", "link": "https://stackoverflow.com/users/5815692/nicholas-james-bailey"}, "is_accepted": false, "score": 0, "last_activity_date": 1527106609, "creation_date": 1527106609, "answer_id": 50496791, "question_id": 50496753, "link": "https://stackoverflow.com/questions/50496753/get-a-random-value-from-a-list-which-is-not-equal-to-a-particular-number/50496791#50496791", "title": "Get a random value from a list which is not equal to a particular number?", "body": "<p>You just need to use square brackets on your list comprehension! Then you can get the first value with [0].</p>\n\n<p>e.g.</p>\n\n<pre><code>array = [1,2,3]\nx = 2\nk = [i for i in array if i !=x][0]\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 6839211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5556c68556a540fa5517dfa1e4ae5f45?s=128&d=identicon&r=PG&f=1", "display_name": "Lyam", "link": "https://stackoverflow.com/users/6839211/lyam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "accepted_answer_id": 50496787, "answer_count": 2, "score": -2, "last_activity_date": 1527111418, "creation_date": 1527106449, "last_edit_date": 1527111418, "question_id": 50496753, "link": "https://stackoverflow.com/questions/50496753/get-a-random-value-from-a-list-which-is-not-equal-to-a-particular-number", "title": "Get a random value from a list which is not equal to a particular number?", "body": "<p>I have list of numbers:</p>\n\n<pre><code>list = [1,2,3]\n</code></pre>\n\n<p>and would like to get a random integer, k, that does not equal to x from the above list</p>\n\n<p>I've tried:</p>\n\n<pre><code>x = 2\nk = (i for i in array if i !=x)\n</code></pre>\n\n<p>but this returns a generator object instead of an integer. Is there a way to fix this?</p>\n"}, {"tags": ["python", "function"], "answers": [{"tags": [], "owner": {"reputation": 607, "user_id": 8225336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418c2e0a00933c6e12a63c1bca55ea27?s=128&d=identicon&r=PG&f=1", "display_name": "tangoal", "link": "https://stackoverflow.com/users/8225336/tangoal"}, "is_accepted": false, "score": 0, "last_activity_date": 1527106238, "creation_date": 1527106238, "answer_id": 50496711, "question_id": 50496654, "link": "https://stackoverflow.com/questions/50496654/name-function-name-is-not-defined/50496711#50496711", "title": "Name &quot;function name&quot; is not defined", "body": "<p>If add is a method of your class Complex, then you must write x.add(y) instead of add(x, y). </p>\n\n<p>I know that it is confusing in Python. You need always to apply the \"self\" as first argument of a method, although it is not an argument, but the object whose method you call.</p>\n"}, {"tags": [], "owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "is_accepted": true, "score": 1, "last_activity_date": 1527106251, "creation_date": 1527106251, "answer_id": 50496715, "question_id": 50496654, "link": "https://stackoverflow.com/questions/50496654/name-function-name-is-not-defined/50496715#50496715", "title": "Name &quot;function name&quot; is not defined", "body": "<p>The <code>add()</code> function is a member of the <code>Complex</code> class but you are calling it on its own.</p>\n\n<p>You need to call it like this</p>\n\n<pre><code>x.add(y)\n</code></pre>\n\n<p>When a function is a member of a class like below:</p>\n\n<pre><code>class Complex(object):\n    def add (self, other):\n        # Do stuff\n</code></pre>\n\n<p>The object the function is called on automatically gets passed as <code>self</code>.</p>\n\n<p>So if you call <code>x.add(y)</code>, <code>self</code> will be <code>x</code> and <code>other</code> will be <code>y</code>.</p>\n"}], "owner": {"reputation": 47, "user_id": 9836851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Angel Draghici", "link": "https://stackoverflow.com/users/9836851/angel-draghici"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 50496715, "answer_count": 2, "score": 3, "last_activity_date": 1527108422, "creation_date": 1527106033, "last_edit_date": 1527108422, "question_id": 50496654, "link": "https://stackoverflow.com/questions/50496654/name-function-name-is-not-defined", "title": "Name &quot;function name&quot; is not defined", "body": "<p>I've been attempting to complete one of my subjects for the OOP, but I couldn't manage to figure out what's wrong with the definition of my functions. I'm a newbie in this language, already searched the forums but I couldn't find anything useful.   </p>\n\n<blockquote>\n  <p>Error message:\n     Traceback (most recent call last):<br>\n       File \"/home/main.py\", line 44, in <br>\n         add(x, y)<br>\n     NameError: name 'add' is not defined  </p>\n</blockquote>\n\n<p>This is the program I wrote.</p>\n\n<pre><code>class Complex(object):\ndef __init__(self, r = 0, i = 0):\n   self.r = r\n   self.i = i\n\ndef __str__ (self):\n   return \"%s + i%s\" % (self.r, self.i)\n\ndef add (self, other):\n   summ = Complex()\n   summ.r = self.r + other.r\n   summ.i = self.i + other.i\n   return \"Sum is %d\" % summ\n\ndef dif (self, other):\n   dif = Complex()\n   dif.r = self.r - other.r\n   dif.i = self.i - other.i \n   return dif\n\ndef multiply (self, other):\n   multiply = Complex()\n   multiply.r = self.r * other.r \n   multiply.i = self.i * other.i\n   return \"%d\" % (-1 * multiply.r * multiply.i)\n\ndef divide (self, other):\n   divide = Complex()\n   divide.r = self.r / other.r\n   divide.i = self.i / other.i \n   return \"%d\" % (divide.r / divide.i)\n\nx = Complex()\ny = Complex()\nx.r = int(input(\"Type in real part of x: \\n\"))\nx.i = int(input(\"Type in imaginary of x: \\n\"))\nprint (x, \"\\n\")\ny.r = int(input(\"Type in real part of y: \\n\"))\ny.i = int(input(\"Type in imaginary of y: \\n\"))\nprint (y, \"\\n\")\nadd(x, y)\n</code></pre>\n"}, {"tags": ["python", "macos", "pip"], "answers": [{"comments": [{"owner": {"reputation": 4832, "user_id": 5661594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbbbec01ce0c53edbdf4001d81bb4865?s=128&d=identicon&r=PG", "display_name": "Harry_pb", "link": "https://stackoverflow.com/users/5661594/harry-pb"}, "edited": false, "score": 0, "creation_date": 1527106905, "post_id": 50496789, "comment_id": 88006461, "body": "I got error :-  error: command &#39;/usr/bin/clang&#39; failed with exit status 1      ----------------------------------------   Failed building wheel for regex  failed with error code 1 in /private/var/folders/7k/3qybm9cj5tz_thhs_05kt26w0000gn/T/pip&zwnj;&#8203;-install-z2xxv4kx/re&zwnj;&#8203;gex/"}], "tags": [], "owner": {"reputation": 8789, "user_id": 539465, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2acba600ecfbe1cc2e7f3c94b686ac84?s=128&d=identicon&r=PG", "display_name": "Valentin Lorentz", "link": "https://stackoverflow.com/users/539465/valentin-lorentz"}, "is_accepted": false, "score": 7, "last_activity_date": 1527106597, "creation_date": 1527106597, "answer_id": 50496789, "question_id": 50496637, "link": "https://stackoverflow.com/questions/50496637/spacy-2-0-11-has-requirement-regex-2017-4-5-but-youll-have-regex-2017-11-9-wh/50496789#50496789", "title": "Spacy 2.0.11 has requirement regex==2017.4.5, but you&#39;ll have regex 2017.11.9 which is incompatible", "body": "<p>Like this:</p>\n\n<pre><code>pip install regex==2017.4.5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 10168880, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZvVV0nu1OYE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rrmNGYHzVN0BWGoheor_1hXZfjaw/mo/photo.jpg?sz=128", "display_name": "CY Quah", "link": "https://stackoverflow.com/users/10168880/cy-quah"}, "is_accepted": false, "score": 4, "last_activity_date": 1533188369, "last_edit_date": 1533188369, "creation_date": 1533182513, "answer_id": 51645293, "question_id": 50496637, "link": "https://stackoverflow.com/questions/50496637/spacy-2-0-11-has-requirement-regex-2017-4-5-but-youll-have-regex-2017-11-9-wh/51645293#51645293", "title": "Spacy 2.0.11 has requirement regex==2017.4.5, but you&#39;ll have regex 2017.11.9 which is incompatible", "body": "<p>A possibility is that both <code>spacy</code> and <code>regex</code> <code>packages</code> were not updated together, causing discrepancies.</p>\n\n<p>Try upgrading <code>pip</code> and install <code>spacy</code> again.</p>\n\n<pre><code>pip install --upgrade pip\n\npip install spacy\n</code></pre>\n"}], "owner": {"reputation": 4832, "user_id": 5661594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbbbec01ce0c53edbdf4001d81bb4865?s=128&d=identicon&r=PG", "display_name": "Harry_pb", "link": "https://stackoverflow.com/users/5661594/harry-pb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2235, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1533188369, "creation_date": 1527105932, "question_id": 50496637, "link": "https://stackoverflow.com/questions/50496637/spacy-2-0-11-has-requirement-regex-2017-4-5-but-youll-have-regex-2017-11-9-wh", "title": "Spacy 2.0.11 has requirement regex==2017.4.5, but you&#39;ll have regex 2017.11.9 which is incompatible", "body": "<p>I am using <code>MacOS High Sierra</code> and recently got this issue while any <code>python</code> related installations. I am trying to update setup tools </p>\n\n<pre><code>pip install --upgrade setuptools\n\n&gt;&gt;&gt;spacy 2.0.11 has requirement regex==2017.4.5, but you'll have regex 2017.11.9 which is incompatible.\n</code></pre>\n\n<p>Please suggest how to fix this issue </p>\n"}, {"tags": ["python", "regex", "string", "python-3.x"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1527106074, "post_id": 50496586, "comment_id": 88006050, "body": "<code>Command|exited|with|status|0</code>: <code>|</code> is &quot;or&quot; not a word separator."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1527106134, "post_id": 50496586, "comment_id": 88006088, "body": "you don&#39;t even need regexes here. Just use <code>your_string = your_string.replace(&quot;=== stdout ===&quot;,&quot;&quot;)</code>, same thing for the other example"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1527106156, "post_id": 50496586, "comment_id": 88006101, "body": "Is single quote a typo? otherwise it matches words in that string."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1527107750, "post_id": 50496586, "comment_id": 88006915, "body": "Create/debug your regex by starting from just the first element of the pattern and ONLY once that matches what you expect THEN add the next element of the pattern."}], "answers": [{"comments": [{"owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 0, "creation_date": 1527106409, "post_id": 50496696, "comment_id": 88006206, "body": "Downvoted because you replace any instance of \u201cwith\u201d or \u201ccommand\u201d, not the requested string \u201cCommand exited with status\u201d"}, {"owner": {"reputation": 74, "user_id": 8452041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JFoJo.png?s=128&g=1", "display_name": "never_comment", "link": "https://stackoverflow.com/users/8452041/never-comment"}, "reply_to_user": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 0, "creation_date": 1527106674, "post_id": 50496696, "comment_id": 88006341, "body": "I changed the code slightly to better match the requested string. I did not realize the was using &#39;|&#39; in place of &#39; &#39;(spaces)."}, {"owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1527108439, "post_id": 50496696, "comment_id": 88007240, "body": "Thanks guys, let me try this one sec."}, {"owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "edited": false, "score": 0, "creation_date": 1527108615, "post_id": 50496696, "comment_id": 88007334, "body": "Ok so that did work however I did forget one more, specifically (no stderr), when I tried re.sub(&#39;(nostder)&#39;, &#39;&#39;, string) it works, however, it leaves the () and just removes the nostder."}], "tags": [], "owner": {"reputation": 74, "user_id": 8452041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JFoJo.png?s=128&g=1", "display_name": "never_comment", "link": "https://stackoverflow.com/users/8452041/never-comment"}, "is_accepted": false, "score": 1, "last_activity_date": 1527106549, "last_edit_date": 1527106549, "creation_date": 1527106195, "answer_id": 50496696, "question_id": 50496586, "link": "https://stackoverflow.com/questions/50496586/regex-to-remove-statment-from-string/50496696#50496696", "title": "Regex to remove statment from string", "body": "<p>Use 'string = re.sub('=== stdout ===', '', string)' to sub your desired text for nothing (''). Here is some example code:</p>\n\n<pre><code>import re\n\nstring = 'i think New Roman\"=== stdout ===&gt;but I don\\'t he=Command exited with status 0\"Arial\"&gt;fun stuff'\n\nstring = re.sub('Command exited with status 0', '', string)\nstring = re.sub('=== stdout ===', '', string)\n\nprint(string)\n</code></pre>\n\n<p>Remember to use '\\|' in your string instead of just '|'</p>\n"}], "owner": {"reputation": 71, "user_id": 8067957, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d73188a010a31f6ea995f3e05572f116?s=128&d=identicon&r=PG&f=1", "display_name": "xxen0nxx", "link": "https://stackoverflow.com/users/8067957/xxen0nxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "closed_date": 1527106269, "answer_count": 1, "score": 0, "last_activity_date": 1527106549, "creation_date": 1527105758, "last_edit_date": 1527106025, "question_id": 50496586, "link": "https://stackoverflow.com/questions/50496586/regex-to-remove-statment-from-string", "closed_reason": "Duplicate", "title": "Regex to remove statment from string", "body": "<p>I'm pretty new to regex and am having some issues trying to remove 2 strings from a string of text. </p>\n\n<p>I'm using python3 and have tried the following. </p>\n\n<pre><code>'\\W*(Command|exited|with|status|0)\\W*\n</code></pre>\n\n<p>To match the string: <code>Command exited with status 0</code></p>\n\n<p>I am also looking for the regex to match the following. </p>\n\n<pre><code>=== stdout ===\n</code></pre>\n\n<p>I have tried:</p>\n\n<pre><code>'\\W*(===|stdout|===)\\W*\n</code></pre>\n\n<p>Any help with this would be greatly appreciated. \nThanks!</p>\n"}, {"tags": ["python", "dictionary", "beautifulsoup", "web-crawler"], "comments": [{"owner": {"reputation": 4227, "user_id": 8200485, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f6663ff2d61581b26bd021b3ce6b6376?s=128&d=identicon&r=PG", "display_name": "hyper-neutrino", "link": "https://stackoverflow.com/users/8200485/hyper-neutrino"}, "edited": false, "score": 0, "creation_date": 1527105663, "post_id": 50496549, "comment_id": 88005871, "body": "You mean value with two keys?"}, {"owner": {"reputation": 5981, "user_id": 7003620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9caf46ce1c06de4a3307511b57c5d2?s=128&d=identicon&r=PG", "display_name": "Druta Ruslan", "link": "https://stackoverflow.com/users/7003620/druta-ruslan"}, "edited": false, "score": 0, "creation_date": 1527105742, "post_id": 50496549, "comment_id": 88005911, "body": "you need to have one <code>key</code> and many <code>values</code>"}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1527105747, "post_id": 50496549, "comment_id": 88005913, "body": "<i>&quot;Im now wondering if its possible to sum up all IDs (values) which are related to e.g. London into one key&quot;</i>, I don&#39;t really understand what you&#39;re asking, do you want to use the sum? a tuple? have each key work individually?"}, {"owner": {"reputation": 7147, "user_id": 5464747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60df21c4da5e9dbe92aff62b4ded3b2?s=128&d=identicon&r=PG", "display_name": "dfundako", "link": "https://stackoverflow.com/users/5464747/dfundako"}, "edited": false, "score": 0, "creation_date": 1527105757, "post_id": 50496549, "comment_id": 88005917, "body": "Do you mean sum them or have those 3 numbers still broken out?"}, {"owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 1, "creation_date": 1527105890, "post_id": 50496549, "comment_id": 88005973, "body": "I don&#39;t see where you are using the values (London for instance) in your code."}], "answers": [{"comments": [{"owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 1, "creation_date": 1527105795, "post_id": 50496579, "comment_id": 88005930, "body": "Wait now... you should use setdefault or collections defaultdict for this. But it is not what OP wants."}, {"owner": {"reputation": 4227, "user_id": 8200485, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f6663ff2d61581b26bd021b3ce6b6376?s=128&d=identicon&r=PG", "display_name": "hyper-neutrino", "link": "https://stackoverflow.com/users/8200485/hyper-neutrino"}, "reply_to_user": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 0, "creation_date": 1527106993, "post_id": 50496579, "comment_id": 88006509, "body": "@AntonvBR Then what did OP want"}], "tags": [], "owner": {"reputation": 4227, "user_id": 8200485, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f6663ff2d61581b26bd021b3ce6b6376?s=128&d=identicon&r=PG", "display_name": "hyper-neutrino", "link": "https://stackoverflow.com/users/8200485/hyper-neutrino"}, "is_accepted": false, "score": -1, "last_activity_date": 1527105745, "creation_date": 1527105745, "answer_id": 50496579, "question_id": 50496549, "link": "https://stackoverflow.com/questions/50496549/python-dictionary-key-with-two-values-possible/50496579#50496579", "title": "Python Dictionary: Key with two values possible?", "body": "<p>What you can do is make a reverse lookup table from the values to all working keys, like so:</p>\n\n<pre><code>def reverse(ids):\n    table = {}\n    for key in ids:\n        if ids[key] not in table:\n            table[ids[key]] = []\n        table[ids[key]].append(key)\n    return table\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1527105899, "creation_date": 1527105899, "answer_id": 50496625, "question_id": 50496549, "link": "https://stackoverflow.com/questions/50496549/python-dictionary-key-with-two-values-possible/50496625#50496625", "title": "Python Dictionary: Key with two values possible?", "body": "<p>You can do this in 2 steps:</p>\n\n<ol>\n<li>Create a dictionary mapping locations to list of IDs.</li>\n<li>Reverse this dictionary, taking care to ensure your keys are hashable.</li>\n</ol>\n\n<p>The first step is optimally processed via <code>collections.defaultdict</code>.</p>\n\n<p>For the second step, you can use either <code>tuple</code> or <code>frozenset</code>. I opt for the latter since it is not clear that ordering is relevant.</p>\n\n<pre><code>from collections import defaultdict\n\nRegionIDArray = {522: \"London\", 4745: \"London\", 2718: \"London\", 3487: \"Tokio\"}\n\nd = defaultdict(list)\n\nfor k, v in RegionIDArray.items():\n    d[v].append(k)\n\nres = {frozenset(v): k for k, v in d.items()}\n\nprint(res)\n\n{frozenset({522, 2718, 4745}): 'London',\n frozenset({3487}): 'Tokio'}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1527107213, "creation_date": 1527107213, "answer_id": 50496945, "question_id": 50496549, "link": "https://stackoverflow.com/questions/50496549/python-dictionary-key-with-two-values-possible/50496945#50496945", "title": "Python Dictionary: Key with two values possible?", "body": "<p>You can use <code>itertools.groupby</code>:</p>\n\n<pre><code>import itertools\nRegionIDArray = {522: \"London\", 4745: \"London\", 2718: \"London\", 3487: \"Tokio\"}\nnew_results = {tuple(c for c, _ in b):a for a, b in itertools.groupby(sorted(RegionIDArray.items(), key=lambda x:x[-1]), key=lambda x:x[-1])}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{(3487,): 'Tokio', (4745, 522, 2718): 'London'}\n</code></pre>\n"}], "owner": {"reputation": 517, "user_id": 5165095, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8c9a0f900e44d54ac973a40c563fc66d?s=128&d=identicon&r=PG&f=1", "display_name": "Serious Ruffy", "link": "https://stackoverflow.com/users/5165095/serious-ruffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1527107213, "creation_date": 1527105620, "question_id": 50496549, "link": "https://stackoverflow.com/questions/50496549/python-dictionary-key-with-two-values-possible", "title": "Python Dictionary: Key with two values possible?", "body": "<p>For a test program I'm crawling a webpage. I'd like to crawl all activites for specifid ID\u00b4s which are associated to the respective cities.</p>\n\n<p>For example, my initial code:</p>\n\n<pre><code>RegionIDArray = {522: \"London\", 4745: \"London\", 2718: \"London\", 3487: \"Tokio\"}\n</code></pre>\n\n<p>Im now wondering if its possible to sum up all IDs (values) which are related to e.g. London into one key:</p>\n\n<pre><code>RegionIDArray = {522, 4745, 2718: \"London}\n</code></pre>\n\n<p>If I\u00b4m trying this, I get no results</p>\n\n<p>My full code so far</p>\n\n<pre><code>RegionIDArray = {522: \"London\", 4745: \"London\", 2718: \"London\", 3487: \"Tokio\"}\n\nfor reg in RegionIDArray:\n    r = requests.get(\"https://www.getyourguide.de/-l\" +str(reg) +\"/\")\n    soup = BeautifulSoup(r.content, \"lxml\")\n\n    g_data = soup.find_all(\"span\", {\"class\": \"intro-title\"})\n    for item in g_data:\n        POI_final = (str(item.text))\n\n        end_final = (\"POI: \" + POI_final)\n        if end_final not in already_printed:\n           print(end_final)\n           already_printed.add(end_final)\n</code></pre>\n\n<p>Is there any smart way.Appreciate any feedback.</p>\n"}, {"tags": ["python", "class", "python-nonlocal", "function-attributes"], "comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 4, "creation_date": 1527106048, "post_id": 50496545, "comment_id": 88006036, "body": "I would always choose a class, because of the way it is used, rather than the way it is implemented. When I instantiate a class, I expect that the instance may keep some state information. That is what class instances do. When I call a function I generally expect that it returns the same result whenever it is called with the same arguments, so if it keeps a state, that will be unexpected and may cause bugs in my (caller&#39;s) code, although even that behaviour is not completely wrong if well documented."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1527106094, "post_id": 50496545, "comment_id": 88006062, "body": "The question is probably too broad, but as a general rule, you should probably have a solid, concrete reason <i>not</i> to use a class before worrying about the other two. (And function attributes are almost an accident of whatever implementation you are using, rather than something to be intentionally used.)"}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1527106203, "post_id": 50496545, "comment_id": 88006123, "body": "BTW don&#39;t worry about <i>&quot;classes might introduce more complexity than is needed&quot;</i>. Most complexity comes from lack of clarity in my experience."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1527106210, "post_id": 50496545, "comment_id": 88006126, "body": "Keep in mind that your function <code>bar</code> is defined anew every time you <i>call</i> <code>foo</code>."}, {"owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 0, "creation_date": 1527106328, "post_id": 50496545, "comment_id": 88006173, "body": "Agree that a class is the most clear. I find <code>nonlocal</code> very hard to reason about. In addition your use of a function attribute looks like a poor man&#39;s class. A better use of a function attribute is documentation: <a href=\"https://stackoverflow.com/questions/338101/python-function-attributes-uses-and-abuses\" title=\"python function attributes uses and abuses\">stackoverflow.com/questions/338101/&hellip;</a>"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1527111193, "post_id": 50496545, "comment_id": 88008432, "body": "I think function attributes are cute, but they aren&#39;t popular. Partly, that&#39;s for the reason given by zvone, and partly it&#39;s because they&#39;re obscure, so many people don&#39;t even realise that they&#39;re possible (apart from <code>.__doc__</code> and <code>.__name__</code>). I sometimes use them for state that doesn&#39;t affect the return value, eg tracking how many times the function gets called. I once thought they&#39;d be ok for a memoizing cache, but they&#39;re slow (lookup time for the global function name, then lookup of the attribute)."}], "owner": {"reputation": 1, "user_id": 1521762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae67dc4de4b54a9001e4542d50f2c823?s=128&d=identicon&r=PG", "display_name": "DrMag", "link": "https://stackoverflow.com/users/1521762/drmag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1517, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527105605, "creation_date": 1527105605, "question_id": 50496545, "link": "https://stackoverflow.com/questions/50496545/state-variables-in-python-when-to-choose-classes-nonlocal-variables-or-functi", "title": "State variables in Python: when to choose classes, nonlocal variables, or function attributes", "body": "<p>There are (at least) three different ways to track state information for functions in python (examples presented without any meaningful way to use the state information, obviously):</p>\n\n<p>OOP Classes:</p>\n\n<pre><code>class foo:\n    def __init__(self, start):\n        self.state = start\n    # whatever needs to be done with the state information\n</code></pre>\n\n<p>nonlocal variables (Python 3):</p>\n\n<pre><code>def foo(start):\n    state = start\n    def bar():\n        nonlocal state\n        # whatever needs to be done with the state information\n    return bar\n</code></pre>\n\n<p>or function attributes:</p>\n\n<pre><code>def foo(start):\n    def bar(bar.state):\n        # whatever needs to be done with the state information\n    bar.state = start\n    return bar\n</code></pre>\n\n<p>I understand how each method works, but what I've not been able to reason is why (aside from familiarity) you would ever choose one method over another. Following the Zen of Python, classes would seem to be the most elegant technique, as it removes the need to nest function definitions.  However, at the same time, classes might introduce more complexity than is needed.</p>\n\n<p>What should one be considering when weighing which method to use in a program?</p>\n"}, {"tags": ["python", "r", "scipy", "delaunay"], "answers": [{"tags": [], "owner": {"reputation": 851, "user_id": 9702190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Iddo Hanniel", "link": "https://stackoverflow.com/users/9702190/iddo-hanniel"}, "is_accepted": true, "score": 4, "last_activity_date": 1527151968, "creation_date": 1527151968, "answer_id": 50505009, "question_id": 50496471, "link": "https://stackoverflow.com/questions/50496471/how-to-set-a-maximum-distance-of-a-delaunay-triangle-side-in-python/50505009#50505009", "title": "How to set a maximum distance of a Delaunay triangle side in Python", "body": "<p>Here is some code that separates large edges from small:</p>\n\n<pre><code># Computing Delaunay\ntri = Delaunay(points)\n\n# Separating small and large edges:\nthresh = 1.0  # user defined threshold\nsmall_edges = set()\nlarge_edges = set()\nfor tr in tri.vertices:\n    for i in xrange(3):\n        edge_idx0 = tr[i]\n        edge_idx1 = tr[(i+1)%3]\n        if (edge_idx1, edge_idx0) in small_edges:\n            continue  # already visited this edge from other side\n        if (edge_idx1, edge_idx0) in large_edges:\n            continue\n        p0 = points[edge_idx0]\n        p1 = points[edge_idx1]\n        if np.linalg.norm(p1 - p0) &lt;  thresh:\n            small_edges.add((edge_idx0, edge_idx1))\n        else:\n            large_edges.add((edge_idx0, edge_idx1))\n\n# Plotting the output\nfigure()\nplot(points[:, 0], points[:, 1], '.')\nfor i, j in small_edges:\n    plot(points[[i, j], 0], points[[i, j], 1], 'b')\nfor i, j in large_edges:\n    plot(points[[i, j], 0], points[[i, j], 1], 'c')\n</code></pre>\n\n<p>On the data generated from the following code, I get this figure:\n<a href=\"https://i.stack.imgur.com/it05A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/it05A.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code># Constructing the input point set\nnp.random.seed(0)\nx = 3.0 * np.random.rand(1000)\ny = 2.0 * np.random.rand(1000) - 1.0\ninside = ((x ** 2 + y ** 2 &gt; 1.0) &amp; ((x - 3) ** 2 + y ** 2 &gt; 1.0) &amp; ((x-1.5) ** 2 + y ** 2 &gt; 0.09))\npoints = np.vstack([x[inside], y[inside]]).T\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 8819047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523b7532633a06af3c913e0d7faaaa22?s=128&d=identicon&r=PG&f=1", "display_name": "Krogiar", "link": "https://stackoverflow.com/users/8819047/krogiar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 911, "favorite_count": 0, "accepted_answer_id": 50505009, "answer_count": 1, "score": 4, "last_activity_date": 1610569737, "creation_date": 1527105294, "last_edit_date": 1610569737, "question_id": 50496471, "link": "https://stackoverflow.com/questions/50496471/how-to-set-a-maximum-distance-of-a-delaunay-triangle-side-in-python", "title": "How to set a maximum distance of a Delaunay triangle side in Python", "body": "<p>I'm trying to work on some datasets using the <code>scipy.spatial.Delaunay</code> object.\nBut the problem is that I'm not able to set a maximum triangle side lenght. I would like to do something like <a href=\"https://stackoverflow.com/questions/17672252/how-to-set-maximum-length-of-triangle-side-in-delaunay-triangulation-in-r\">How to set maximum length of triangle side in Delaunay triangulation?</a>, but in Python</p>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "answers": [{"comments": [{"owner": {"reputation": 441, "user_id": 7323296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbt6x.png?s=128&g=1", "display_name": "Tibberzz", "link": "https://stackoverflow.com/users/7323296/tibberzz"}, "edited": false, "score": 1, "creation_date": 1527203937, "post_id": 50496663, "comment_id": 88051413, "body": "That was perfect, thank you! I added .orderBy(&quot;id&quot;, &quot;year&quot;) to the end and got it to look exactly how I needed it."}], "tags": [], "owner": {"reputation": 29493, "user_id": 3269809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRvqq.jpg?s=128&g=1", "display_name": "Alper t. Turker", "link": "https://stackoverflow.com/users/3269809/alper-t-turker"}, "is_accepted": true, "score": 3, "last_activity_date": 1527106739, "last_edit_date": 1527106739, "creation_date": 1527106072, "answer_id": 50496663, "question_id": 50496448, "link": "https://stackoverflow.com/questions/50496448/pyspark-expand-one-row-into-multiple-rows-by-column-header/50496663#50496663", "title": "Pyspark Expand One Row into Multiple Rows By Column Header", "body": "<p>First <code>melt</code> <code>DataFrame</code> (<a href=\"https://stackoverflow.com/q/41670103/8371915\">How to melt Spark DataFrame?</a>): </p>\n\n<pre><code>df = spark.createDataFrame(\n    [(1, \"a001\", 0, 32, 14, 108), (2, \"a02\", 80, 0, 0, 92)],\n    (\"id\", \"name\", \"01-Jan-10\", \"01-Feb-10\", \"01-Jan-11\", \"01-Feb-11\")\n)\n\ndf_long = melt(df, df.columns[:2], df.columns[2:])\n\n# +---+----+---------+-----+\n# | id|name| variable|value|\n# +---+----+---------+-----+\n# |  1|a001|01-Jan-10|    0|\n# |  1|a001|01-Feb-10|   32|\n# |  1|a001|01-Jan-11|   14|\n# |  1|a001|01-Feb-11|  108|\n# |  2| a02|01-Jan-10|   80|\n# |  2| a02|01-Feb-10|    0|\n# |  2| a02|01-Jan-11|    0|\n# |  2| a02|01-Feb-11|   92|\n# +---+----+---------+-----+\n</code></pre>\n\n<p>Next parse date and extract year and month:</p>\n\n<pre><code>from pyspark.sql.functions import to_date, date_format, year\n\ndate = to_date(\"variable\", \"dd-MMM-yy\")\n\nparsed = df_long.select(\n    \"id\", \"name\", \"value\", \n    year(date).alias(\"year\"), date_format(date, \"MMM\").alias(\"month\")\n)\n\n# +---+----+-----+----+-----+\n# | id|name|value|year|month|\n# +---+----+-----+----+-----+\n# |  1|a001|    0|2010|  Jan|\n# |  1|a001|   32|2010|  Feb|\n# |  1|a001|   14|2011|  Jan|\n# |  1|a001|  108|2011|  Feb|\n# |  2| a02|   80|2010|  Jan|\n# |  2| a02|    0|2010|  Feb|\n# |  2| a02|    0|2011|  Jan|\n# |  2| a02|   92|2011|  Feb|\n# +---+----+-----+----+-----+\n</code></pre>\n\n<p>Finally <code>pivot</code> (<a href=\"https://stackoverflow.com/q/30244910/8371915\">How to pivot Spark DataFrame?</a>):</p>\n\n<pre><code># Providing a list of levels is not required but will make the process faster\n# months = [\n#     \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \n#     \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"\n# ]\n\nmonths = [\"Jan\", \"Feb\"]\n\nparsed.groupBy(\"id\", \"name\", \"year\").pivot(\"month\", months).sum(\"value\")\n\n# +---+----+----+---+---+       \n# | id|name|year|Feb|Jan|\n# +---+----+----+---+---+\n# |  2| a02|2011| 92|  0|\n# |  1|a001|2010| 32|  0|\n# |  1|a001|2011|108| 14|\n# |  2| a02|2010|  0| 80|\n# +---+----+----+---+---+\n</code></pre>\n"}], "owner": {"reputation": 441, "user_id": 7323296, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbt6x.png?s=128&g=1", "display_name": "Tibberzz", "link": "https://stackoverflow.com/users/7323296/tibberzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1246, "favorite_count": 0, "accepted_answer_id": 50496663, "answer_count": 1, "score": 0, "last_activity_date": 1539248445, "creation_date": 1527105180, "last_edit_date": 1527204160, "question_id": 50496448, "link": "https://stackoverflow.com/questions/50496448/pyspark-expand-one-row-into-multiple-rows-by-column-header", "title": "Pyspark Expand One Row into Multiple Rows By Column Header", "body": "<p>Let's say I have a dataframe with the following columns:</p>\n\n<pre><code># id  | name  | 01-Jan-10 | 01-Feb-10 | ... | 01-Jan-11 | 01-Feb-11\n# -----------------------------------------------------------------\n# 1   | a001  |     0     |    32     | ... |     14    |    108\n# 1   | a002  |    80     |     0     | ... |      0    |     92\n</code></pre>\n\n<p>I want to expand this into a table like this:</p>\n\n<pre><code># id  | name  | Jan | Feb | ... | Year\n# -----------------------------------\n# 1   | a001  |   0 |  32 | ... | 2010\n# 1   | a001  |  14 | 108 | ... | 2011\n# 1   | a002  |  80 |   0 | ... | 2010\n# 1   | a002  |   0 |  92 | ... | 2011\n</code></pre>\n\n<p>I'd like to split the dates into rows by year and capture the values per month.</p>\n\n<p>In pyspark (python + spark) how might this be accomplished? I've been attempting to collect the df data to iterate over and extract each field to write to each row, but I wondered if there were a more clever spark function that would help with this. (new to spark)</p>\n"}]