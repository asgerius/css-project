[{"tags": ["python", "python-3.x", "python-c-api", "python-c-extension"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 2034216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7af69d9100f7d8e5677a426947af534d?s=128&d=identicon&r=PG", "display_name": "Mahesh Ravishankar", "link": "https://stackoverflow.com/users/2034216/mahesh-ravishankar"}, "edited": false, "score": 0, "creation_date": 1452197254, "post_id": 34646190, "comment_id": 57073812, "body": "Thanks ShadowRanger. I just figured out the answer myself too by looking at the code in Python."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 2, "last_activity_date": 1452182655, "last_edit_date": 1452182655, "creation_date": 1452132058, "answer_id": 34646190, "question_id": 34645136, "link": "https://stackoverflow.com/questions/34645136/pycfunctionwithkeywords-being-called-incorrectly-from-python/34646190#34646190", "title": "PYCFunctionWithKeywords being called incorrectly from python", "body": "<p>You didn't define all the keywords. Even if the argument is non-optional, it still needs to have a name defined, so it can be passed by keyword or positionally (and so <code>PyArg_ParseTupleAndKeywords</code> can match up positions with keywords, in case the optional arguments are passed positionally). Basically, the number of keyword names must always match the maximum number of arguments to parse.</p>\n\n<p>Change:</p>\n\n<pre><code>static const char *keywordList[] = { \"kw1\", \"kw2\", NULL};\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>static const char *keywordList[] = { \"input\", \"kw1\", \"kw2\", NULL};\n</code></pre>\n\n<p>Obviously, you can name the first argument whatever you want; I just matched the C variable name.</p>\n"}], "owner": {"reputation": 113, "user_id": 2034216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7af69d9100f7d8e5677a426947af534d?s=128&d=identicon&r=PG", "display_name": "Mahesh Ravishankar", "link": "https://stackoverflow.com/users/2034216/mahesh-ravishankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 34646190, "answer_count": 1, "score": 1, "last_activity_date": 1452182655, "creation_date": 1452124776, "last_edit_date": 1495540746, "question_id": 34645136, "link": "https://stackoverflow.com/questions/34645136/pycfunctionwithkeywords-being-called-incorrectly-from-python", "title": "PYCFunctionWithKeywords being called incorrectly from python", "body": "<p>I am trying to write a C-extension module for python3, say <code>foo</code> and I am trying to define method that can take keyword arguments.</p>\n\n<pre><code>static PyObject* fooImpl(PyObject*, PyObject*, PyObject*);\nstatic PyObject* fooImpl2(PyObject, PyObject*);\nstatic PyMethodDef fooMethods[] = {\n    {\"foo_impl\", (PyCFunction) fooImpl, METH_VARARGS | METH_KEYWORDS, \"Some description\"},\n    {\"foo_impl2\", fooImpl2, METH_VARARGS, \"Some description\"},\n    {NULL, NULL, 0, NULL}\n};\n\nPyObject* fooImpl(PyObject* self, PyObject* args, PyObject* kwds) {\n    static const char *keywordList[] = { \"kw1\", \"kw2\", NULL};\n    PyObject *input = nullptr;\n    PyObject *kw1Val = nullptr;\n    PyObject *kw2Val = nullptr;\n    PyObject *returnVal = nullptr;\n    int err = PyArg_ParseTupleAndKeywords(args, kwds, \"O|OO\",\n                                          const_cast&lt;char**&gt;(keywordList),\n                                          &amp;input, &amp;kw1Val, &amp;kw2Val);\n    if (!err) {\n       return NULL;\n    }\n    //// Do something with args to compute returnVal\n    return returnVal;\n}\n</code></pre>\n\n<p>When I try this within python, I get the following error</p>\n\n<pre><code>&gt;&gt;&gt; import foo as fp\n&gt;&gt;&gt; arg1 = ...\n&gt;&gt;&gt; arg2 = ...\n&gt;&gt;&gt; arg3 = ...\n&gt;&gt;&gt; a = fp.foo_impl(arg1, kw1 = arg2, kw2 = arg3);\nTypeError: function takes at most 2 arguments (3 given)\n</code></pre>\n\n<p>Seems like the interpreter is not registering the <code>METH_KEYWORDS</code> flag in the <code>PyMethodDef</code> . Is there someother way to add <code>PyCFunctionWithKeywords</code> methods to C-extension in Python3 . The only source I found was <a href=\"https://stackoverflow.com/questions/10264080/python-c-extension-why-are-methods-that-use-keyword-arguments-cast-to-pycfunct\">this</a> stackoverflow post that goes back to the Python documentation <a href=\"https://docs.python.org/2/extending/extending.html#a-simple-example]\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Any help is deeply appreciated</p>\n"}, {"tags": ["python", "r", "apache-spark", "pyspark", "rpy2"], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 3808067, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/aea0c6bccf0b2c98c7223ecc8215c532?s=128&d=identicon&r=PG&f=1", "display_name": "retrocookie", "link": "https://stackoverflow.com/users/3808067/retrocookie"}, "edited": false, "score": 0, "creation_date": 1452228889, "post_id": 34645906, "comment_id": 57085100, "body": "See the related question here: <a href=\"http://stackoverflow.com/questions/34669751/\">How can I partition pyspark RDDs holding R functions</a>"}], "tags": [], "owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "is_accepted": true, "score": 1, "last_activity_date": 1452130764, "last_edit_date": 1495542266, "creation_date": 1452130091, "answer_id": 34645906, "question_id": 34645130, "link": "https://stackoverflow.com/questions/34645130/can-i-connect-an-external-r-process-to-each-pyspark-worker-during-setup/34645906#34645906", "title": "Can I connect an external (R) process to each pyspark worker during setup", "body": "<p>Something like this should work just fine:</p>\n\n<pre><code>import rpy2.robjects as robjects\nfrom  rpy2.robjects.packages import importr\n\ndef length_(s):\n    stringi = importr(\"stringi\")  \n    return stringi.stri_length(s)[0]\n\nsc.parallelize([\"foo\", \"bar\", \"foobar\"]).map(length_)\n</code></pre>\n\n<p><a href=\"https://bitbucket.org/rpy2/rpy2/src/fe7b154143bcc0316a036f2fef85cea90b2963ec/rpy/robjects/__init__.py?at=default&amp;fileviewer=file-view-default#__init__.py-302\" rel=\"nofollow noreferrer\"><code>R</code> object</a>, which represents R interpreter, <a href=\"https://bitbucket.org/rpy2/rpy2/src/fe7b154143bcc0316a036f2fef85cea90b2963ec/rpy/robjects/__init__.py?at=default&amp;fileviewer=file-view-default#__init__.py-347\" rel=\"nofollow noreferrer\">is a singleton</a> so it will be initialized only once and R doesn't re-import already attached libraries. There is some overhead from calling <code>require</code> multiple times but it should be negligible compared to the cost of passing your data to and from R.</p>\n\n<p>If you want something more sophisticated you can create your own <a href=\"https://stackoverflow.com/q/10936709/1560062\">singleton module</a> or use <a href=\"https://stackoverflow.com/q/1318406/1560062\">Borg pattern</a> to handle imports but it could be an overkill. </p>\n\n<blockquote>\n  <p>I assume this would happen when you import a python module to be used for later executor tasks</p>\n</blockquote>\n\n<p>It actually depends on a configuration. By default Spark reuses interpreters between tasks but this behavior can be modified. </p>\n\n<p>I've provided some examples as an answer to <a href=\"https://stackoverflow.com/q/34501334/1560062\">In Apache spark, what is the difference between using mapPartitions and combine use of broadcast variable and map</a>. Maybe you'll find these useful.</p>\n"}], "owner": {"reputation": 199, "user_id": 3808067, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/aea0c6bccf0b2c98c7223ecc8215c532?s=128&d=identicon&r=PG&f=1", "display_name": "retrocookie", "link": "https://stackoverflow.com/users/3808067/retrocookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 1, "accepted_answer_id": 34645906, "answer_count": 1, "score": 1, "last_activity_date": 1452130843, "creation_date": 1452124748, "last_edit_date": 1452130843, "question_id": 34645130, "link": "https://stackoverflow.com/questions/34645130/can-i-connect-an-external-r-process-to-each-pyspark-worker-during-setup", "title": "Can I connect an external (R) process to each pyspark worker during setup", "body": "<p>I want to have each python worker start an R shell using rpy2. Can I do this during some sort of setup phase similar to how I assume this would happen when you import a Python module to be used for later executor tasks? For example:</p>\n\n<pre><code>import numpy as np\n\ndf.mapPartitions(lambda x: np.zeros(x))\n</code></pre>\n\n<p>In my case I want to instead start an R shell on each executor and import R libraries, which would look something like this:</p>\n\n<pre><code>import rpy2.robjects as robjects\nfrom  rpy2.robjects.packages import importr\nrlibrary = importr('testrlibrary')\n\ndf.mapPartitions(lambda x: rlibrary.rfunc(x))\n</code></pre>\n\n<p>But I don't want this to occur inside the call to <code>mapPartitions</code>, because then it would happen at the task-level as opposed to once per executor core. That approach works and looks more like the example below but is not useful for me.</p>\n\n<pre><code>def model(partition):\n    import rpy2.robjects as robjects\n    from  rpy2.robjects.packages import importr\n    rlibrary = importr('testrlibrary')\n    rlibrary.rfunc(partition)\n\ndf.mapPartitions(model)\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "python-3.x"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1452124768, "post_id": 34645027, "comment_id": 57036081, "body": "What are the unknown functions? You don&#39;t show their definitions, nor the full traceback for the error."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1452124821, "post_id": 34645027, "comment_id": 57036098, "body": "Note: use 4 spaces for indentation, and do <i>not</i> use a double underscore starting a variable or function name; those are reserved for Python&#39;s magic methods and such."}, {"owner": {"reputation": 553, "user_id": 5438474, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh5.googleusercontent.com/-GqXzpZO7Y5E/AAAAAAAAAAI/AAAAAAAABxw/zIjT2CFHs7w/photo.jpg?sz=128", "display_name": "Abhishek Patel", "link": "https://stackoverflow.com/users/5438474/abhishek-patel"}, "edited": false, "score": 0, "creation_date": 1452133916, "post_id": 34645027, "comment_id": 57038583, "body": "@Evert fixed, and I&#39;ll change the name of the function, thanks for the info"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1452134849, "post_id": 34645027, "comment_id": 57038825, "body": "Side-note: If <code>terms</code> is a <code>list</code>, deleting the first elements one at a time is incurring massive copy overhead, as is inserting one element in the front. If possible, you might want to switch to a <code>collections.deque</code>, or <code>.reverse()</code> the input list and pop/append to the right side (which is cheap) indexing to <code>-1</code> and <code>-2</code> instead of <code>0</code> and <code>1</code>. Or if you like it the way it is, at least limited to one massive copy per loop, not three, by replacing both <code>del</code>s and the <code>insert</code> with: <code>terms[:2] = [z]</code> which deletes the first two elements, replacing them with the single value <code>z</code> in one op."}, {"owner": {"reputation": 553, "user_id": 5438474, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh5.googleusercontent.com/-GqXzpZO7Y5E/AAAAAAAAAAI/AAAAAAAABxw/zIjT2CFHs7w/photo.jpg?sz=128", "display_name": "Abhishek Patel", "link": "https://stackoverflow.com/users/5438474/abhishek-patel"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1452135028, "post_id": 34645027, "comment_id": 57038858, "body": "I understand, thanks for the insight @ShadowRanger"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1452135426, "post_id": 34645027, "comment_id": 57038937, "body": "@Evert: Only using both leading and trailing double underscores is reserved for magic methods. Leading underscores is completely different; for methods, it provides interpreter support for private attributes and methods (by seamlessly name mangling). You&#39;re <i>supposed</i> to use dunder prefixed (but not suffixed) names when you want private methods/attributes, and they never conflict with other names in an inheritance hierarchy because of the mangling; the exact opposite of being reserved. So <code>__sortbylen__</code> would be bad, <code>__sortbylen</code> is pointless if not on a class/instance, but not reserved."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1452137548, "post_id": 34645027, "comment_id": 57039434, "body": "@ShadowRanger True, I simplified it because I don&#39;t 100% know the underlying mechanics. But I&#39;d refrain from anything starting with a <i>double</i> underscore and just use a single underscore if I want something to be private. Functions or variables written this way could be considered private to their module."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1452137845, "post_id": 34645027, "comment_id": 57039507, "body": "@Evert: The general rule is that module private stuff gets a single underscore (or if you use <code>__all__</code> to list exports, just don&#39;t include it in <code>__all__</code>). But for methods/attributes of a class, you use a single underscore to indicate protected (shouldn&#39;t be used by outside libs), and a double underscore to indicate private (even subclasses shouldn&#39;t be messing with it). This is covered explicitly in the official Python style guide, <a href=\"https://www.python.org/dev/peps/pep-0008/#designing-for-inheritance\" rel=\"nofollow noreferrer\">PEP8, under &quot;Designing for inheritance&quot; and &quot;Public and internal interfaces&quot;</a>."}], "answers": [{"comments": [{"owner": {"reputation": 553, "user_id": 5438474, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh5.googleusercontent.com/-GqXzpZO7Y5E/AAAAAAAAAAI/AAAAAAAABxw/zIjT2CFHs7w/photo.jpg?sz=128", "display_name": "Abhishek Patel", "link": "https://stackoverflow.com/users/5438474/abhishek-patel"}, "edited": false, "score": 0, "creation_date": 1452133777, "post_id": 34645147, "comment_id": 57038548, "body": "This got rid of the error, but it added another one &quot;TypeError: __sortByLen() missing 1 required positional argument: &#39;y&#39;&quot;"}], "tags": [], "owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1452124828, "creation_date": 1452124828, "answer_id": 34645147, "question_id": 34645027, "link": "https://stackoverflow.com/questions/34645027/run-function-without-specifying-parameters-in-python-2-and-3/34645147#34645147", "title": "Run Function Without Specifying Parameters in Python 2 and 3", "body": "<p>Change <code>z.sort(__sortByLen)</code> to <code>z.sort(key=__sortByLen)</code></p>\n\n<p>Though you should also be sure that <code>__sortByLen</code> has the right behavior for a key function and not a cmp function (which was used by python2)</p>\n"}, {"comments": [{"owner": {"reputation": 553, "user_id": 5438474, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh5.googleusercontent.com/-GqXzpZO7Y5E/AAAAAAAAAAI/AAAAAAAABxw/zIjT2CFHs7w/photo.jpg?sz=128", "display_name": "Abhishek Patel", "link": "https://stackoverflow.com/users/5438474/abhishek-patel"}, "edited": false, "score": 0, "creation_date": 1452134786, "post_id": 34646552, "comment_id": 57038803, "body": "Ok i see how that works. So if i had a def that sorts by cost (This is Quine McCluskey Simplification)  def __sortByCost(x,y):  cx=__getCost(x) #cost of the first  cy=__getCost(y) #cost of the second  if cx &gt; cy:   return 1  elif cx &lt; cy:   return -1  else:   return 0  This is also by len correct?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 553, "user_id": 5438474, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh5.googleusercontent.com/-GqXzpZO7Y5E/AAAAAAAAAAI/AAAAAAAABxw/zIjT2CFHs7w/photo.jpg?sz=128", "display_name": "Abhishek Patel", "link": "https://stackoverflow.com/users/5438474/abhishek-patel"}, "edited": false, "score": 0, "creation_date": 1452135167, "post_id": 34646552, "comment_id": 57038890, "body": "@AbhishekPatel: Well, that comparator is comparing by the result of a call to <code>__getcost</code>, so you&#39;d do <code>someseq.sort(key=__getcost)</code>. And again, it would save a whole lot of calls to <code>__getcost</code> by computing once up front, then sorting based on the cached value. It&#39;s why <code>cmp</code> was removed in Py3; <code>key</code> based sorting is almost always simpler and faster; it&#39;s giving you the <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow noreferrer\">Schwartzian Transform</a> for free, no need to decorate, sort, and undecorate manually."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1452144393, "post_id": 34646552, "comment_id": 57041345, "body": "you mean <code>O(n * log(n))</code>, not <code>log(n)</code> times."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1452182771, "post_id": 34646552, "comment_id": 57064803, "body": "@J.F.Sebastian: Nope, meant <code>log(n)</code>; I was referring to how many times the <code>len</code> was checked for <i>each</i> element, not the total number of <code>len</code> checks. It&#39;s a total of <code>O(n log n)</code> <code>len</code> checks, but any given element is only <code>log n</code>. I will edit to make that a little more clear by comparison."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 3, "last_activity_date": 1452184114, "last_edit_date": 1452184114, "creation_date": 1452134543, "answer_id": 34646552, "question_id": 34645027, "link": "https://stackoverflow.com/questions/34645027/run-function-without-specifying-parameters-in-python-2-and-3/34646552#34646552", "title": "Run Function Without Specifying Parameters in Python 2 and 3", "body": "<p>Python 3 only handles <code>key</code> functions, not <code>cmp</code> functions. And in this case (like many cases), this makes it much simpler. You want to sort by length, so sort using a <code>key</code> of <code>len</code> directly (and as the error notes, it must be passed by keyword, not positionally):</p>\n\n<pre><code>z.sort(key=len)\n</code></pre>\n\n<p>That does a one-time precompute of all the lengths in <code>z</code>, computing each <code>len</code> just once (a total of <code>n</code> <code>len</code> calls); it then sorts <code>z</code> using those lengths. The old <code>cmp</code> approach would have been computing <em>each</em> <code>len</code> approximately <code>log2(n)</code> times, for <code>n * log2(n)</code> total <code>len</code> calls (actually, up to twice that, since you weren't saving the <code>len</code> in your <code>cmp</code> function).</p>\n\n<p>So with 1024 elements, the <code>key</code> based approach calls <code>len</code> exactly 1024 times, no more, no less; the <code>cmp</code> based approach you attempted could have ended up performing up to 20x more calls to <code>len</code> (in practice, a little lower, roughly 8000-18,000 calls, with an absolute minimum 2046 times if the data is already sorted thanks to <a href=\"https://en.wikipedia.org/wiki/Timsort\" rel=\"nofollow\">TimSort galloping mode</a>, but still double the <code>key</code> number because you'd need 1023 <code>cmp</code> calls, each of which computes two <code>len</code>s).</p>\n\n<p>And if the result of the <code>key</code> function is a Python built-in (your <code>key</code> functions return <code>int</code>, so this is the case here) and you're using the Python reference interpreter, then the savings are even greater; sorting runs faster when it doesn't need to execute Python byte code during the sort. When using <code>key</code>s that return built-ins, after the pre-sort <code>key</code> computation, no byte code is executed during the actual sorting, and so all the work is done at the C layer and runs even faster than the strict algorithmic analysis would indicate. With <code>cmp</code>, a custom <code>cmp</code> function is almost always written in Python, so every comparison involves calling back into the bytecode interpreter, slowing things down.</p>\n"}], "owner": {"reputation": 553, "user_id": 5438474, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh5.googleusercontent.com/-GqXzpZO7Y5E/AAAAAAAAAAI/AAAAAAAABxw/zIjT2CFHs7w/photo.jpg?sz=128", "display_name": "Abhishek Patel", "link": "https://stackoverflow.com/users/5438474/abhishek-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1452184114, "creation_date": 1452124143, "last_edit_date": 1452134947, "question_id": 34645027, "link": "https://stackoverflow.com/questions/34645027/run-function-without-specifying-parameters-in-python-2-and-3", "title": "Run Function Without Specifying Parameters in Python 2 and 3", "body": "<p>I have some code:</p>\n\n<pre><code>def __petric(terms):\n    while len(terms) &gt; 1:\n        z = []\n        for i in terms[0]:\n            for j in terms[1]:\n                z.append(list(set(i+j)))\n        del terms[0]\n        del terms[0]\n        z.sort(__sortByLen)\n        __simplify(z)\n        terms.insert(0, z)\n    return terms\n</code></pre>\n\n<p>the <code>z.sort</code> line is calling a function, which has 2 parameters.</p>\n\n<p>In Python 2, this runs and gives the expected result.</p>\n\n<p>But in Python 3, this gives an error:</p>\n\n<pre><code>'TypeError: must use keyword argument for key function'\n</code></pre>\n\n<p>My __sortByLen function</p>\n\n<pre><code>def __sortByLen(x,y):\n    if len(x) &gt; len(y):\n        return 1\n    elif len(x) &lt; len(y):\n        return -1\n    else:\n        return 0\n</code></pre>\n\n<p>and a different function, same concept</p>\n\n<pre><code>def __sortByCost(x,y):\n    cx=__getCost(x) #cost of the first\n    cy=__getCost(y) #cost of the second\n    if cx &gt; cy:\n        return 1\n    elif cx &lt; cy:\n        return -1\n    else:\n        return 0\n</code></pre>\n\n<p>When i changed it to <code>z.sort(key=__sortByLen)</code> I got another error</p>\n\n<pre><code>TypeError: __sortByLen() missing 1 required positional argument: 'y'\n</code></pre>\n"}, {"tags": ["python", "html", "css", "django", "fonts"], "comments": [{"owner": {"reputation": 10169, "user_id": 117268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7960f43b3a2012753afecc0e4591217c?s=128&d=identicon&r=PG", "display_name": "Emil Stenstr&#246;m", "link": "https://stackoverflow.com/users/117268/emil-stenstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1458437147, "post_id": 34644989, "comment_id": 59860460, "body": "Have you installed the correct package on your production server too?"}, {"owner": {"reputation": 35, "user_id": 3436280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f97cb07171fe343f7209f8012352223?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Palashikar", "link": "https://stackoverflow.com/users/3436280/pratik-palashikar"}, "reply_to_user": {"reputation": 10169, "user_id": 117268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7960f43b3a2012753afecc0e4591217c?s=128&d=identicon&r=PG", "display_name": "Emil Stenstr&#246;m", "link": "https://stackoverflow.com/users/117268/emil-stenstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1458487538, "post_id": 34644989, "comment_id": 59871764, "body": "This problem i solved myself, no one answered on stackoverflow."}], "owner": {"reputation": 35, "user_id": 3436280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f97cb07171fe343f7209f8012352223?s=128&d=identicon&r=PG&f=1", "display_name": "Pratik Palashikar", "link": "https://stackoverflow.com/users/3436280/pratik-palashikar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458437054, "creation_date": 1452123951, "last_edit_date": 1458437054, "question_id": 34644989, "link": "https://stackoverflow.com/questions/34644989/monosocial-font-library-for-python-django-project-not-working-in-live-environmen", "title": "Monosocial font library for python django project not working in live environment", "body": "<p>I have installed the mono-social font using pip in django framework. Then after the installation of the package I have included the url to use these fonts in base.html like this </p>\n\n<pre><code>&lt;link href=\"{% static 'social_media_links/css/styles.css' %}\" rel=\"stylesheet\" media=\"screen\"&gt;\n&lt;link href=\"{% static 'social_media_links/css/styles.css' %}\" rel=\"stylesheet\" media=\"screen\"&gt;\n</code></pre>\n\n<p>And I have used the fonts in this ways:</p>\n\n<pre><code>&lt;a href=\"{% url 'social:begin' backend='linkedin-oauth2' %}\"  style=\"font-size:30px\" class=\"symbol\"&gt;&amp;#xe252&lt;/a&gt;\n&lt;a href=\"{% url 'social:begin' 'twitter' %}\" style=\"font-size:30px\" class=\"symbol\"&gt;&amp;#xe286\n&lt;a href=\"{% url 'social:begin' backend='google-oauth2'%}\" style=\"font-size:30px\" class=\"symbol\"&gt;&amp;#xe239\n&lt;a href=\"{% url 'social:begin' 'facebook' %}?next={{ request.path }}\" style=\"font-size:30px\" class=\"symbol\"&gt;&amp;#xe227\n</code></pre>\n\n<p>The font works fine on local but when the project is deployed using wsgi file the fonts appears as weird characters.</p>\n\n<p>Please help me out with this problem </p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 2336, "user_id": 1288767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dfa278e6dc2f916937a4bae8db49538?s=128&d=identicon&r=PG", "display_name": "Remi Smirra", "link": "https://stackoverflow.com/users/1288767/remi-smirra"}, "is_accepted": true, "score": 0, "last_activity_date": 1452161783, "last_edit_date": 1452161783, "creation_date": 1452160578, "answer_id": 34652124, "question_id": 34644958, "link": "https://stackoverflow.com/questions/34644958/django-iterate-over-queryset-by-content-of-a-field/34652124#34652124", "title": "Django: Iterate over QuerySet by content of a field", "body": "<p>I think you are looking for something like this:</p>\n\n<pre><code>for group in WidgetGroup.objects.prefetch_related('widget_set').all():\n    for group_style_widgets in group.widget_set.all():\n        # Do something with group_style_widgets\n</code></pre>\n\n<p>Or if you want to specifically use the styles:</p>\n\n<pre><code>styles = Widget.objects.all().values_list('style', flat=True).distinct()\nfor group in WidgetGroup.objects.prefetch_related('widget_set').all():\n    for style in styles:\n        group_style_widgets = group.widget_set.filter(style=style)\n        # Do something with group_style_widgets\n</code></pre>\n"}], "owner": {"reputation": 5049, "user_id": 284120, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/l4Pau.jpg?s=128&g=1", "display_name": "tobygriffin", "link": "https://stackoverflow.com/users/284120/tobygriffin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 34652124, "answer_count": 1, "score": 2, "last_activity_date": 1452161783, "creation_date": 1452123773, "last_edit_date": 1452124635, "question_id": 34644958, "link": "https://stackoverflow.com/questions/34644958/django-iterate-over-queryset-by-content-of-a-field", "title": "Django: Iterate over QuerySet by content of a field", "body": "<p>I need to iterate over a set of model objects, by the content of two fields. Code may make more sense.</p>\n\n<p>This is my model definition:</p>\n\n<pre><code>class Widget(models.Model):\n    group = models.ForeignKey(WidgetGroup)\n    style = models.CharField(max_length=40, blank=True)\n</code></pre>\n\n<p>I want to act on widgets of the same group and style, so I use the following code. It works, but it doesn't seem 'neat' enough for typical python and Django. Is there a better way to do it?</p>\n\n<pre><code>widgets = Widget.objects.all()\nfor group in WidgetGroup.objects.all():\n    group_widgets = widgets.filter(group=group)\n    for style in set(group_widgets.values_list('style', flat=True)):\n        group_style_widgets = group_widgets.filter(style=style)\n        # Do something with group_style_widgets\n</code></pre>\n\n<p>Edit: it <em>is</em> important to me that I iterate by group first, and then style. Think intended output like this Markdown:</p>\n\n<pre><code># Group1\n## Style1\n## Style2\n# Group2\n## Style2\n## Style3\n</code></pre>\n"}, {"tags": ["python", "tkinter", "pygame"], "comments": [{"owner": {"reputation": 5410, "user_id": 1390022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d29e994a1301613f40c4cc99909edb0?s=128&d=identicon&r=PG", "display_name": "derricw", "link": "https://stackoverflow.com/users/1390022/derricw"}, "edited": false, "score": 0, "creation_date": 1452124172, "post_id": 34644912, "comment_id": 57035897, "body": "What is the error?  Is is simply that <code>screen</code> is not in the method&#39;s scope?  Where is <code>screen</code> created?"}, {"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "edited": false, "score": 0, "creation_date": 1452124186, "post_id": 34644912, "comment_id": 57035898, "body": "It is not entirely clear where screen here is defined.. please provide a MVE"}, {"owner": {"reputation": 3, "user_id": 4202435, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/2I4dO.jpg?s=128&g=1", "display_name": "Harnell", "link": "https://stackoverflow.com/users/4202435/harnell"}, "edited": false, "score": 0, "creation_date": 1452124530, "post_id": 34644912, "comment_id": 57036009, "body": "Added code where screen is created."}, {"owner": {"reputation": 3, "user_id": 4202435, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/2I4dO.jpg?s=128&g=1", "display_name": "Harnell", "link": "https://stackoverflow.com/users/4202435/harnell"}, "edited": false, "score": 0, "creation_date": 1452124747, "post_id": 34644912, "comment_id": 57036076, "body": "And I fixed it anyway. Sorry if I wasted your time."}, {"owner": {"reputation": 5693, "user_id": 254830, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/ykFfl.png?s=128&g=1", "display_name": "doppelgreener", "link": "https://stackoverflow.com/users/254830/doppelgreener"}, "edited": false, "score": 2, "creation_date": 1516815552, "post_id": 34644912, "comment_id": 83847507, "body": "Please don&#39;t vandalise your posts."}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 4202435, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/2I4dO.jpg?s=128&g=1", "display_name": "Harnell", "link": "https://stackoverflow.com/users/4202435/harnell"}, "is_accepted": false, "score": 0, "last_activity_date": 1452125214, "creation_date": 1452125214, "answer_id": 34645198, "question_id": 34644912, "link": "https://stackoverflow.com/questions/34644912/python-how-to-fill-a-pygame-screen-from-a-different-method/34645198#34645198", "title": "Python - how to fill a pygame screen from a different method", "body": "<p>Fixed.</p>\n\n<pre><code>#button - reset\n    btn_reset = Button(simFrame)\n    btn_reset.config(text = \"Reset\", borderwidth = 2, padx = 0, pady=0, width = 8)\n    btn_reset.bind(\"&lt;Button-1&gt;\", self.reset) #left click to acvtivate\n    btn_reset.grid(row = 8, column = 0, sticky = W)\n</code></pre>\n\n<p>is button</p>\n\n<pre><code>def display(self):\n    pygame.init()                                #initialises pygame\n    screen = pygame.display.set_mode((800,900))  #creates pygame display  (x, y)\n    self.screen = screen\n    screen.fill(black)                           #clears screen\n\ndef reset(self, event):\n    (self.screen).fill(black)\n    pygame.display.update()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91141, "user_id": 142637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9SiZh.png?s=128&g=1", "display_name": "sloth", "link": "https://stackoverflow.com/users/142637/sloth"}, "is_accepted": false, "score": 0, "last_activity_date": 1452154030, "creation_date": 1452154030, "answer_id": 34650080, "question_id": 34644912, "link": "https://stackoverflow.com/questions/34644912/python-how-to-fill-a-pygame-screen-from-a-different-method/34650080#34650080", "title": "Python - how to fill a pygame screen from a different method", "body": "<p>Another way is to use <a href=\"http://pygame.org/docs/ref/display.html#pygame.display.get_surface\" rel=\"nofollow\"><code>pygame.display.get_surface</code></a>:</p>\n\n<blockquote>\n  <p><strong>pygame.display.get_surface()</strong><br>\n  <em>Get a reference to the currently set display surface</em><br>\n  <code>get_surface() -&gt; Surface</code>  </p>\n  \n  <p>Return a reference to the currently set display Surface. If no display mode has been set this will return None.</p>\n</blockquote>\n\n<p>to get the screen surface.</p>\n"}], "owner": {"reputation": 3, "user_id": 4202435, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/2I4dO.jpg?s=128&g=1", "display_name": "Harnell", "link": "https://stackoverflow.com/users/4202435/harnell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516815542, "creation_date": 1452123426, "last_edit_date": 1516815542, "question_id": 34644912, "link": "https://stackoverflow.com/questions/34644912/python-how-to-fill-a-pygame-screen-from-a-different-method", "title": "Python - how to fill a pygame screen from a different method", "body": "<p>I am trying to have a reset button in my tkinter form for a program that uses pygame.</p>\n\n<p>The reset button must reset the pygame screen, which means filling it in with one colour, which in my case is black.</p>\n\n<p>I will not show the full code as it is long, but snippets.</p>\n\n<pre><code>btn_reset = Button(simFrame)\n    btn_reset.config(text = \"Reset\", borderwidth = 2, padx = 0, pady=0, width = 8)\n    btn_reset.bind(\"&lt;Button-1&gt;\", self.reset) #left click to acvtivate\n    btn_reset.grid(row = 8, column = 0, sticky = W)\n</code></pre>\n\n<p>The button activates 'self.reset', which is the method I am trying to fill the screen from (if there is a way to fill the screen within the method that pygame is in let me know, I am new to tkinter/pygame and only know how to start a method from a button).</p>\n\n<pre><code>def reset(self, event):\n    screen.fill(black)\n    pygame.display.update()\n</code></pre>\n\n<p>This is what I want to do, obviously this doesn't work.</p>\n\n<p>The screen has already been made in another method, how do I fill it from this one? </p>\n\n<p>Or even better, can I fill the screen from within the pygame method when activating the button?</p>\n\n<p>EDIT:</p>\n\n<pre><code>def display(self):\n    #moving variables from method to method\n    megatonVar = self.megatonVar\n    locationVar = self.locationVar\n    populationVar = self.populationVar\n\n    #resets circle widths\n    locCircleWidth = 2\n    fireCircleWidth = 2\n    air20CircleWidth = 2\n    radCircleWidth = 2\n    air5CircleWidth = 2\n    thermCircleWidth = 2\n\n    constantK = (float(megatonVar)) ** (1/3) #creates a constant variable that can be used later\n\n    #does blast radius equations using the megaton input to calculate the blast radius'\n    #R = K x cuberoot(Y)\n    #R = radius  K = constant  Y = yield\n    locCircleRadius = (locationVar) / 1\n    fireCircleRadius = 0.0912 * (constantK)\n    radCircleRadius = 0.3683 * (constantK)\n    thermCircleRadius = 0.9910 * (constantK)\n    air20CircleRadius = 0.2182 * (constantK)\n    air5CircleRadius = 0.4545 * (constantK)\n\n    #calculate population affected\n    #population affected by blast radius\n    if (air5CircleRadius / locCircleRadius) &gt;= 1:\n        self.popBlastValue.set(\"%.2f\" %(populationVar))\n    else:\n        self.popBlastValue.set(\"%.2f\" %((air5CircleRadius / locCircleRadius)*(populationVar)))\n    #population affected by radiation radius\n    if (thermCircleRadius / locCircleRadius) &gt;= 1:\n        self.popRadValue.set(\"%.2f\" %(populationVar))\n    else:\n        self.popRadValue.set(\"%.2f\" %((thermCircleRadius / locCircleRadius)*(populationVar)))\n\n    pygame.init()                                #initialises pygame\n    screen = pygame.display.set_mode((800,900))  #creates pygame display  (x, y)\n    screen.fill(black)                           #clears screen\n\n    #updates the text displaying the screen scale depending on scale\n    if (locCircleRadius &gt;= 20) or (thermCircleRadius &gt;= 20):\n        screenScale = \"60km\"\n    elif (locCircleRadius &gt; 10 and locCircleRadius &lt; 20) or (thermCircleRadius &gt; 10 and thermCircleRadius &lt; 20):\n        screenScale = \"40km\"\n    else:\n        screenScale = \"20km\"\n\n    #draws scale line\n    pygame.draw.rect(screen, white, (0, 35, 800, 2)) #x, y, w, h\n\n    #adds increments to scale depending on size\n    if (locCircleRadius &gt;= 20) or (thermCircleRadius &gt;= 20):\n        pygame.draw.rect(screen, white, (66, 35, 2, 10))\n        pygame.draw.rect(screen, white, (133, 35, 2, 10))\n        pygame.draw.rect(screen, white, (201, 35, 2, 10))\n        pygame.draw.rect(screen, white, (268, 35, 2, 10))\n        pygame.draw.rect(screen, white, (334, 35, 2, 10))\n        pygame.draw.rect(screen, white, (400, 35, 2, 10))\n        pygame.draw.rect(screen, white, (467, 35, 2, 10))\n        pygame.draw.rect(screen, white, (534, 35, 2, 10))\n        pygame.draw.rect(screen, white, (601, 35, 2, 10))\n        pygame.draw.rect(screen, white, (667, 35, 2, 10))\n        pygame.draw.rect(screen, white, (734, 35, 2, 10))\n    elif (locCircleRadius &gt; 10 and locCircleRadius &lt; 20) or (thermCircleRadius &gt; 10 and thermCircleRadius &lt; 20):\n        pygame.draw.rect(screen, white, (100, 35, 2, 10))\n        pygame.draw.rect(screen, white, (200, 35, 2, 10))\n        pygame.draw.rect(screen, white, (300, 35, 2, 10))\n        pygame.draw.rect(screen, white, (400, 35, 2, 10))\n        pygame.draw.rect(screen, white, (500, 35, 2, 10))\n        pygame.draw.rect(screen, white, (600, 35, 2, 10))\n        pygame.draw.rect(screen, white, (700, 35, 2, 10))            \n    else:\n        pygame.draw.rect(screen, white, (200, 35, 2, 10))\n        pygame.draw.rect(screen, white, (400, 35, 2, 10))\n        pygame.draw.rect(screen, white, (600, 35, 2, 10))\n\n    #scales the screen with radius      \n    if (locCircleRadius &gt;= 20) or (thermCircleRadius &gt;= 20):\n        locCircleRadius *= 10\n        fireCircleRadius *= 10\n        radCircleRadius *= 10\n        thermCircleRadius *= 10\n        air20CircleRadius *= 10\n        air5CircleRadius *= 10\n    elif (locCircleRadius &gt; 10 and locCircleRadius &lt; 20) or (thermCircleRadius &gt; 10 and thermCircleRadius &lt; 20):\n        locCircleRadius *= 20\n        fireCircleRadius *= 20\n        radCircleRadius *= 20\n        thermCircleRadius *= 20\n        air20CircleRadius *= 20\n        air5CircleRadius *= 20\n    else:\n        locCircleRadius *= 40\n        fireCircleRadius *= 40\n        radCircleRadius *= 40\n        thermCircleRadius *= 40\n        air20CircleRadius *= 40\n        air5CircleRadius *= 40\n\n    #if the circle radius is smaller than the width pygame gives an error,\n    #so the width must become lower than the radius if radius is lower than width\n    if locCircleRadius &lt; locCircleWidth:\n        locCircleWidth = (locCircleRadius - 0.1)\n\n    if fireCircleRadius &lt; fireCircleWidth:\n        fireCircleWidth = (fireCircleRadius - 0.1)\n\n    if air20CircleRadius &lt; air20CircleWidth:\n        air20CircleWidth = (air20CircleRadius - 0.1)\n\n    if radCircleRadius &lt; radCircleWidth:\n        radCircleWidth = (radCircleRadius - 0.1)\n\n    if air5CircleRadius &lt; air5CircleWidth:\n        air5CircleWidth = (air5CircleRadius - 0.1)\n\n    if thermCircleRadius &lt; thermCircleWidth:\n        thermCircleWidth = (thermCircleRadius - 0.1)\n\n    #draws the circles on the pygame display.   (colour, (x,y midpoint), radius, width)\n    pygame.draw.circle(screen, white, (400,500), int(locCircleRadius), int(locCircleWidth))              #location - white\n    pygame.draw.circle(screen, orange, (400,500), int(fireCircleRadius), int(fireCircleWidth))           #fireball - orange\n    pygame.draw.circle(screen, lightGreen, (400,500), int(radCircleRadius), int(radCircleWidth))         #radiation - light green\n    pygame.draw.circle(screen, lightOrange, (400,500), int(thermCircleRadius), int(thermCircleWidth))    #thermalradiation - light orange\n    pygame.draw.circle(screen, red, (400,500), int(air20CircleRadius), int(air20CircleWidth))            #airblast20psi - red\n    pygame.draw.circle(screen, grey, (400,500), int(air5CircleRadius), int(air5CircleWidth))             #airblast5psi - grey\n\n    #initialize font; must be called after 'pygame.init()' to avoid 'Font not Initialized' error\n    myfont = pygame.font.SysFont(\"courier\", 20)\n\n    #render text\n    widthLabel = myfont.render((\"Screen width = {}\".format(screenScale)), 1, white)\n    screen.blit(widthLabel, (10, 10))\n    scaleLabel = myfont.render((\"Scale increment = 5km\"), 1, white)\n    screen.blit(scaleLabel, (540, 10))\n\n    #updates the display so the circles are shown\n    pygame.display.update()\n</code></pre>\n\n<p>Welp. Since you wanted it, here is where the screen is made. Has a lot of irrelevant stuff, but you cant see it. I didn't see the point in showing that I had actually created a screen. Also at this point there is no error, I just don't know how to fill the pygame method by pressing a tkinter button.</p>\n"}, {"tags": ["python", "r", "indexing"], "answers": [{"tags": [], "owner": {"reputation": 732, "user_id": 5726529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06337fe914a1febe01bd65a805f9c92?s=128&d=identicon&r=PG&f=1", "display_name": "Niemerds", "link": "https://stackoverflow.com/users/5726529/niemerds"}, "is_accepted": true, "score": 2, "last_activity_date": 1452123916, "creation_date": 1452123916, "answer_id": 34644983, "question_id": 34644840, "link": "https://stackoverflow.com/questions/34644840/shifting-indexes-in-python-comparison-to-r/34644983#34644983", "title": "Shifting Indexes in Python (Comparison to R)", "body": "<p>You could use numpy.nonzero to get the indices and then shift them:</p>\n\n<pre><code># two random arrays as an example\nX = numpy.random.random(100)\nY = numpy.random.random(100)\nids = numpy.nonzero(X &gt; Y)[0]\nprint ids\nprint ids + 2\n</code></pre>\n"}], "owner": {"reputation": 361, "user_id": 5753591, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/382d35db609b12c924b931bf6a970e8b?s=128&d=identicon&r=PG&f=1", "display_name": "jay2020", "link": "https://stackoverflow.com/users/5753591/jay2020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 34644983, "answer_count": 1, "score": 0, "last_activity_date": 1452123916, "creation_date": 1452123035, "last_edit_date": 1452123122, "question_id": 34644840, "link": "https://stackoverflow.com/questions/34644840/shifting-indexes-in-python-comparison-to-r", "title": "Shifting Indexes in Python (Comparison to R)", "body": "<p>I check using two series X and Y if ones is bigger than another. By using loc, I can get the index of my series where <code>X&gt;Y</code> is <code>TRUE</code>. For example:</p>\n\n<pre><code>X.loc[X&gt;Y]\n</code></pre>\n\n<p>Using this indexing, I want to shift the indexes n periods. For instance, if <code>X.loc[X&gt;Y]</code> gives us <code>{1,5,8,9}</code>, I am interested in shifting these to <code>{1+2,5+2,8+2,9+2}</code>. I will appreciate any kind of advice on this matter!</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 7421, "user_id": 1382766, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0620b7fe3d25636d899cc2a11f130fa2?s=128&d=identicon&r=PG", "display_name": "heinst", "link": "https://stackoverflow.com/users/1382766/heinst"}, "edited": false, "score": 0, "creation_date": 1452123798, "post_id": 34644875, "comment_id": 57035766, "body": "It is better to use <code>with open(&#39;&#47;Users&#47;ericxx&#47;Desktop&#47;dest.txt&#39;, &#39;r+&#39;) as p:</code> rather than how you did it"}], "tags": [], "owner": {"reputation": 21075, "user_id": 196206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b3e5f05b6457facb417239ce03739cb?s=128&d=identicon&r=PG", "display_name": "Messa", "link": "https://stackoverflow.com/users/196206/messa"}, "is_accepted": false, "score": 5, "last_activity_date": 1452123207, "creation_date": 1452123207, "answer_id": 34644875, "question_id": 34644830, "link": "https://stackoverflow.com/questions/34644830/how-to-put-a-string-at-the-front-of-a-file-in-python/34644875#34644875", "title": "How to put a string at the front of a file in python", "body": "<p>You have to \"rewind\" the file between reading and writing:</p>\n\n<pre><code>p.seek(0)\n</code></pre>\n\n<p>The whole code will look like this (with other minor changes):</p>\n\n<pre><code>p = open('/Users/ericxx/Desktop/dest.txt','r+')\nxx = p.read()\nxx = \"How many roads must a man walk down\\nBefore they call him a man\" + xx\np.seek(0)\np.write(xx)\np.close()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "reply_to_user": {"reputation": 21, "user_id": 5746491, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/4rn1I.jpg?s=128&g=1", "display_name": "ericxxcc", "link": "https://stackoverflow.com/users/5746491/ericxxcc"}, "edited": false, "score": 0, "creation_date": 1455865915, "post_id": 34645229, "comment_id": 58690430, "body": "@ericxxcc yw, I added to the example on how to use <code>r+</code> and truncating the file to avoid trailing old data. Don&#39;t forget to mark this question as answered/solved if you think any of our answers solves your question."}], "tags": [], "owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "is_accepted": false, "score": 1, "last_activity_date": 1455865787, "last_edit_date": 1455865787, "creation_date": 1452125447, "answer_id": 34645229, "question_id": 34644830, "link": "https://stackoverflow.com/questions/34644830/how-to-put-a-string-at-the-front-of-a-file-in-python/34645229#34645229", "title": "How to put a string at the front of a file in python", "body": "<p>Adding to @messas answer, \nwhile doing seek to add the data in the front it can also leave you with old data at the end of your file if you ever shortened <code>xx</code> at any point. </p>\n\n<p>This is because <code>p.seek(0)</code> puts the input pointer in the file at the beginning of the file and any <code>.write()</code> operation will overwrite content as it goes. However a shorter content written vs content already in the file will result in som old data being left at the end, not overwritten. </p>\n\n<p>To avoid this you could open and close the file twice with <code>, 'w')</code> as the opening parameter the second time around or store/fetch the file contents length and pad your new content. Or truncate the file to your new desired length.</p>\n\n<p>To <strong>truncate</strong> the file, simply add <code>p.flush()</code> after you've written the data. </p>\n\n<h2>Also, use the with operator</h2>\n\n<pre><code>with open('/Users/ericxx/Desktop/dest.txt','r+') as p:\n    xx = p.read()\n    xx = \"How many roads must a man walk down\\nBefore they call him a man\" + xx\n    p.seek(0)\n    p.write(xx)\n    p.flush()\n</code></pre>\n\n<p>I'm on my phone so apologies if the explanation is some what short and blunt and lacking code. Can update more tomorrow. </p>\n"}], "owner": {"reputation": 21, "user_id": 5746491, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/4rn1I.jpg?s=128&g=1", "display_name": "ericxxcc", "link": "https://stackoverflow.com/users/5746491/ericxxcc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1455865787, "creation_date": 1452122993, "last_edit_date": 1452123072, "question_id": 34644830, "link": "https://stackoverflow.com/questions/34644830/how-to-put-a-string-at-the-front-of-a-file-in-python", "title": "How to put a string at the front of a file in python", "body": "<p>this is my code:</p>\n\n<pre><code>&gt;&gt;&gt; p = open(r'/Users/ericxx/Desktop/dest.txt','r+')\n&gt;&gt;&gt; xx = p.read()\n&gt;&gt;&gt; xx =  xx[:0]+\"How many roads must a man walk down\\nBefore they call him a man\" +xx[0:]\n&gt;&gt;&gt; p.writelines(xx)\n&gt;&gt;&gt; p.close()\n</code></pre>\n\n<p>the original file content looks like:</p>\n\n<p>How many seas must a white dove sail\nBefore she sleeps in the sand</p>\n\n<hr>\n\n<p>the result looks like :</p>\n\n<p>How many seas must a white dove sail\nBefore she sleeps in the sand\nHow many roads must a man walk down\nBefore they call him a man\nHow many seas must a white dove sail\nBefore she sleeps in the sand</p>\n\n<hr>\n\n<p>expected output :</p>\n\n<p>How many roads must a man walk down\nBefore they call him a man\nHow many seas must a white dove sail\nBefore she sleeps in the sand</p>\n"}, {"tags": ["python", "list", "loops", "python-3.x", "filter"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1452122250, "post_id": 34644663, "comment_id": 57035201, "body": "You say <i>500 lists and 72 entries per list</i>, shouldn&#39;t this by <i>72 lists and 500 entries per list</i>?"}, {"owner": {"reputation": 4630, "user_id": 4316405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fE1Rf.jpg?s=128&g=1", "display_name": "N. Wouda", "link": "https://stackoverflow.com/users/4316405/n-wouda"}, "edited": false, "score": 0, "creation_date": 1452122685, "post_id": 34644663, "comment_id": 57035371, "body": "Not an answer, but I would definitely suggest looking into using a library like e.g. <a href=\"http://www.numpy.org/\" rel=\"nofollow noreferrer\"><code>numpy</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 0, "creation_date": 1452122676, "post_id": 34644728, "comment_id": 57035368, "body": "OP wants the elements of the sublists which are greater than the <i>corresponding</i> element of <code>list</code>."}, {"owner": {"reputation": 4679, "user_id": 2199801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FvLFC.png?s=128&g=1", "display_name": "karlson", "link": "https://stackoverflow.com/users/2199801/karlson"}, "reply_to_user": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 0, "creation_date": 1452122856, "post_id": 34644728, "comment_id": 57035432, "body": "Alright, fixed that. I think that wasn&#39;t totally clear from the question."}], "tags": [], "owner": {"reputation": 4679, "user_id": 2199801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FvLFC.png?s=128&g=1", "display_name": "karlson", "link": "https://stackoverflow.com/users/2199801/karlson"}, "is_accepted": false, "score": 0, "last_activity_date": 1452122829, "last_edit_date": 1452122829, "creation_date": 1452122459, "answer_id": 34644728, "question_id": 34644663, "link": "https://stackoverflow.com/questions/34644663/compare-elements-of-list-to-elements-of-list-of-lists-and-conditionally-create-n/34644728#34644728", "title": "compare elements of list to elements of list of lists and conditionally create new lists", "body": "<p>You could use a list comprehension:</p>\n\n<pre><code>list = [4, 3, 2, 3, 4, 5]\nlist_of_lists = [[6, 1, 3, 7, 2, 5], [1, 2, 6, 3, 8, 1], [1, 2, 3, 2, 7, 6]]\n\nabove = [[ret for i, ret in enumerate(lst) if ret &gt; list[i]] for lst in list_of_lists]\n</code></pre>\n\n<blockquote>\n  <p>[[6, 3, 7], [6, 8], [3, 7, 6]]</p>\n</blockquote>\n\n<p>This will remove all entries in your lists in <code>list_of_lists</code> that are less or equal to the corresponding element of <code>list</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 5754771, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-TjyY2Arj3iw/AAAAAAAAAAI/AAAAAAAAARo/ro2lw31vAXo/photo.jpg?sz=128", "display_name": "Alexander Eser", "link": "https://stackoverflow.com/users/5754771/alexander-eser"}, "edited": false, "score": 0, "creation_date": 1452165080, "post_id": 34644751, "comment_id": 57052360, "body": "How would I apply this in python 3? I get a TypeError: &#39;list&#39; object is not callable."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 111, "user_id": 5754771, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-TjyY2Arj3iw/AAAAAAAAAAI/AAAAAAAAARo/ro2lw31vAXo/photo.jpg?sz=128", "display_name": "Alexander Eser", "link": "https://stackoverflow.com/users/5754771/alexander-eser"}, "edited": false, "score": 0, "creation_date": 1452165767, "post_id": 34644751, "comment_id": 57052834, "body": "@AlexanderEser: I do not get this error, see updated answer."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1452165756, "last_edit_date": 1452165756, "creation_date": 1452122533, "answer_id": 34644751, "question_id": 34644663, "link": "https://stackoverflow.com/questions/34644663/compare-elements-of-list-to-elements-of-list-of-lists-and-conditionally-create-n/34644751#34644751", "title": "compare elements of list to elements of list of lists and conditionally create new lists", "body": "<p>You could do this with list comprehension I think:</p>\n\n<pre><code>thresholds = [0.11,0.12,0.125]\nquotes = [[0.09,0.08,0.15],[0.09,0.08,0.15],[0.1,0.34,0.01]]\n[filter(lambda x: x &gt; thresholds[idx],qts) for idx,qts in enumerate(quotes)]\n</code></pre>\n\n<p>I made some real lists out of the given ones (omitting the <code>...</code>) such that this is an example that compiles.</p>\n\n<p>The list comprehension works as follows: we iterate over the <code>qts</code> from <code>quotes</code> (and also obtain the corresponding index <code>idx</code>, which is used to obtain the threshold). Next we perform a <code>filter</code> operation on the <code>qts</code> and only allow elements that are larger than the <code>threshold[idx]</code> (the threshold for that timestamp).</p>\n\n<p>Running this with <code>python</code> gives:</p>\n\n<pre><code>$ python\nPython 2.7.9 (default, Apr  2 2015, 15:33:21) \n[GCC 4.9.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; thresholds = [0.11,0.12,0.125]\n&gt;&gt;&gt; quotes = [[0.09,0.08,0.15],[0.09,0.08,0.15],[0.1,0.34,0.01]]\n&gt;&gt;&gt; [filter(lambda x: x &gt; thresholds[idx],qts) for idx,qts in enumerate(quotes)]\n[[0.15], [0.15], [0.34]]\n</code></pre>\n\n<p>which seems to be what you want.</p>\n\n<p><strong>EDIT</strong> In <a href=\"/questions/tagged/python-3.x\" class=\"post-tag\" title=\"show questions tagged &#39;python-3.x&#39;\" rel=\"tag\">python-3.x</a>, this should work as well, although the filter is \"delayed\":</p>\n\n<pre><code>$ python3\nPython 3.4.3 (default, Mar 26 2015, 22:03:40) \n[GCC 4.9.2] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; thresholds = [0.11,0.12,0.125]\n&gt;&gt;&gt; quotes = [[0.09,0.08,0.15],[0.09,0.08,0.15],[0.1,0.34,0.01]]\n&gt;&gt;&gt; res=[filter(lambda x: x &gt; thresholds[idx],qts) for idx,qts in enumerate(quotes)]\n&gt;&gt;&gt; res[0]\n&lt;filter object at 0x7f0d3fbc2be0&gt;\n&gt;&gt;&gt; list(res[0])\n[0.15]\n</code></pre>\n\n<p>If you want to <em>materialize</em> the lists straight away, you can slightly alter the list comprehension to:</p>\n\n<pre><code>[list(filter(lambda x: x &gt; thresholds[idx],qts)) for idx,qts in enumerate(quotes)]\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>&gt;&gt;&gt; [list(filter(lambda x: x &gt; thresholds[idx],qts)) for idx,qts in enumerate(quotes)]\n[[0.15], [0.15], [0.34]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 5754771, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-TjyY2Arj3iw/AAAAAAAAAAI/AAAAAAAAARo/ro2lw31vAXo/photo.jpg?sz=128", "display_name": "Alexander Eser", "link": "https://stackoverflow.com/users/5754771/alexander-eser"}, "edited": false, "score": 0, "creation_date": 1452150563, "post_id": 34644762, "comment_id": 57043812, "body": "This is exactly what I wanted. Thank you!"}], "tags": [], "owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "is_accepted": false, "score": 3, "last_activity_date": 1452125137, "last_edit_date": 1495542682, "creation_date": 1452122634, "answer_id": 34644762, "question_id": 34644663, "link": "https://stackoverflow.com/questions/34644663/compare-elements-of-list-to-elements-of-list-of-lists-and-conditionally-create-n/34644762#34644762", "title": "compare elements of list to elements of list of lists and conditionally create new lists", "body": "<p>If I understand your question correctly, you have 500 lists of 72 values and 72 threshold values. You want to compare the <em>n</em><sup>th</sup> value of <em>each</em> list with the <em>n</em><sup>th</sup> value of your list of thresholds. In other words, you want to proceed column-wise. It's easiest to first <a href=\"https://en.wikipedia.org/wiki/Transpose\" rel=\"nofollow noreferrer\">transpose</a> <code>list_of_lists</code> using <a href=\"https://stackoverflow.com/a/17037588/1523776\">this one cool trick</a>, so that each column in <code>list_of_lists</code> becomes a row:</p>\n\n<pre><code>transposed = zip(*list_of_lists)\n</code></pre>\n\n<p>Now we can work with rows. Pair each number in your list of thresholds with its corresponding row in <code>transposed</code>.</p>\n\n<pre><code>lists_with_thresholds = zip(list, transposed)\n</code></pre>\n\n<p>Each item in <code>lists_with_thresholds</code> is a pair containing a cutoff point and the values to which we want to compare it. The ducks are lined up in a row; we just have to find the values in the second part of the pair which exceed the corresponding cutoff point.</p>\n\n<pre><code>result = []\nfor threshold, values in lists_with_thresholds:\n    values_over_threshold = []\n    for x in values:\n        if x &gt; threshold:\n            values_over_threshold.append(x)\n    result.append(values_over_threshold)\n</code></pre>\n\n<p>Or, squishing the nested <code>for</code> loops up into a nested <a href=\"https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow noreferrer\">list comprehension</a>:</p>\n\n<pre><code>result = [[x for x in values if x &gt; threshold]\n          for threshold, values in zip(list, zip(*list_of_lists))]\n</code></pre>\n\n<p>These two versions are exactly equivalent - they compile into the same byte code, for all intents and purposes - but I like the list comprehension better because it's shorter and it has a more functional feel.</p>\n"}, {"comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1452122709, "post_id": 34644766, "comment_id": 57035379, "body": "Although I think this works, it&#39;s a but <i>un-pythonic</i> to call list modifiers. That&#39;s why they invented list comprehension. +1 nevertheless ;)."}, {"owner": {"reputation": 37219, "user_id": 1523776, "user_type": "moderator", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b3e0b5c8e42a8c38009ef2d969f8dabb?s=128&d=identicon&r=PG", "display_name": "Benjamin Hodgson", "link": "https://stackoverflow.com/users/1523776/benjamin-hodgson"}, "edited": false, "score": 0, "creation_date": 1452122993, "post_id": 34644766, "comment_id": 57035480, "body": "OP wants the elements of the sublists which are greater than the <i>corresponding</i> element of <code>list</code>, not <code>list[0]</code>. Also, this will produce a flat list whereas OP wants a list of lists."}, {"owner": {"reputation": 240, "user_id": 5708752, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f7d4437f3cd1d79670e401017aea3d9?s=128&d=identicon&r=PG&f=1", "display_name": "laserpython", "link": "https://stackoverflow.com/users/5708752/laserpython"}, "edited": false, "score": 0, "creation_date": 1452123040, "post_id": 34644766, "comment_id": 57035492, "body": "Thanks! I did it like this since I knew there would be plenty of list comprehension answers, and for beginners list comp is harder to read (at least for me it was). And I guess misunderstood the OP...."}], "tags": [], "owner": {"reputation": 240, "user_id": 5708752, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f7d4437f3cd1d79670e401017aea3d9?s=128&d=identicon&r=PG&f=1", "display_name": "laserpython", "link": "https://stackoverflow.com/users/5708752/laserpython"}, "is_accepted": false, "score": 1, "last_activity_date": 1452122655, "creation_date": 1452122655, "answer_id": 34644766, "question_id": 34644663, "link": "https://stackoverflow.com/questions/34644663/compare-elements-of-list-to-elements-of-list-of-lists-and-conditionally-create-n/34644766#34644766", "title": "compare elements of list to elements of list of lists and conditionally create new lists", "body": "<p>I think this is what you want:</p>\n\n<pre><code>new_list = []\nfor i in lists_of_lists:\n    for j in i:\n        if j &gt; list[0]:\n            new_list.append(j)\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 5754771, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-TjyY2Arj3iw/AAAAAAAAAAI/AAAAAAAAARo/ro2lw31vAXo/photo.jpg?sz=128", "display_name": "Alexander Eser", "link": "https://stackoverflow.com/users/5754771/alexander-eser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "accepted_answer_id": 34644751, "answer_count": 4, "score": 2, "last_activity_date": 1452165802, "creation_date": 1452122090, "last_edit_date": 1452165802, "question_id": 34644663, "link": "https://stackoverflow.com/questions/34644663/compare-elements-of-list-to-elements-of-list-of-lists-and-conditionally-create-n", "title": "compare elements of list to elements of list of lists and conditionally create new lists", "body": "<p>It is about financial data. I have a list of the 70% percentiles of return data at 72 dates:</p>\n\n<pre><code>list = [0.11,0.12,...,0.125]\n</code></pre>\n\n<p>Furthermore I have a list of lists which contains the 72 returns at the different dates for 500 companies (= 500 lists and 72 entries per list):</p>\n\n<pre><code>list_of_lists = [[0.09,0.08,...,0.15],...,[0.1,0.34,...,0.01]]\n</code></pre>\n\n<p>What I want to do now is compare the first entry of my list (<code>0.11</code>) to all the entries in my first list in the list of lists. If the entry in the first list exceeds the <code>0.11</code> threshold (so in this case the <code>0.15</code> above) I want to add this number to a new list. Then I want to do the same with the second entry in <code>list</code> (<code>0.12</code>) and the second list in <code>list_of_lists</code>. In the end I basically want to obtain 72 lists (or a new list of lists) which contain the returns that are above the respective 70% percentile.</p>\n"}, {"tags": ["python", "multiprocessing"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 1, "creation_date": 1452122848, "post_id": 34644660, "comment_id": 57035431, "body": "Works for me. You either have not enough CPUs/cores available, or your processes run so fast that starting the second job takes long enough for the first job to have finished. You can test the second premise by putting a <code>time.sleep(2)</code> as the first line of <code>doSomething(x)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 7421, "user_id": 1382766, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0620b7fe3d25636d899cc2a11f130fa2?s=128&d=identicon&r=PG", "display_name": "heinst", "link": "https://stackoverflow.com/users/1382766/heinst"}, "is_accepted": true, "score": 4, "last_activity_date": 1452123316, "creation_date": 1452123316, "answer_id": 34644894, "question_id": 34644660, "link": "https://stackoverflow.com/questions/34644660/cant-call-multiple-functions-in-the-same-time-with-multiprocessing/34644894#34644894", "title": "Can&#39;t call multiple functions in the same time with multiprocessing", "body": "<p>What is happening, is that the background thread is finishing even before the program can create and start the next thread, so that is why you are getting each worker separated. To get the output you want. You can add a sleep, like Evert mentioned:</p>\n\n<pre><code>def doSomething (x):\n    time.sleep(.01)\n    for num in range(3):\n        print (num, x)\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 4138694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/9IcOA.png?s=128&g=1", "display_name": "sabiv", "link": "https://stackoverflow.com/users/4138694/sabiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 0, "accepted_answer_id": 34644894, "answer_count": 1, "score": 2, "last_activity_date": 1452126408, "creation_date": 1452122083, "last_edit_date": 1452126408, "question_id": 34644660, "link": "https://stackoverflow.com/questions/34644660/cant-call-multiple-functions-in-the-same-time-with-multiprocessing", "title": "Can&#39;t call multiple functions in the same time with multiprocessing", "body": "<p>I'm trying to figure out how could I run the same function multiple times in the same time. I could implement something with the multiprocessing that based on other SO questions, but unfortunately it doesn't work as I wanted. Actually when I run it I get something like this (the functions are running after each osther):  </p>\n\n<pre><code>Worker1\n0 1\n1 1\n2 1\nWorker2\n0 2\n1 2\n2 2\nWorker3\n0 3\n1 3\n2 3  \n</code></pre>\n\n<p>And I would like to achieve this (or something like this):</p>\n\n<pre><code>Worker1\nWorker2\nWorker3\n0 1\n0 2\n0 3\n1 1\n1 2\n1 3\n2 1\n2 2\n2 3\n</code></pre>\n\n<p>I'm really new to Python so it's possible that've made some trivial mistakes, but unfortunately I can't figure out where's the problem, so I would really appreciate if somebody could show me the right solution.</p>\n\n<pre><code>import multiprocessing\n\ndef worker():\n    print (\"Worker1\")\n    doSomething(1)\n    return\n\ndef worker2():\n    print (\"Worker2\")\n    doSomething(2)\n    return              \n\n\ndef worker3():\n    print (\"Worker3\")\n    doSomething(3)\n    return    \n\n\ndef doSomething (x):\n    for num in range(3): \n        print (num, x)\n\n\ndef runInParallel(*fns):\n  proc = []\n  for fn in fns:\n    p = multiprocessing.Process(target=fn)\n    p.start()\n    proc.append(p)\n  for p in proc:\n    p.join()\n\n\nif __name__ == '__main__':\n    runInParallel(worker, worker2, worker3)\n\n # 2. ATTEMPT - it does the same\nif __name__ == '__main__':\n    p = multiprocessing.Process(target=worker)\n    jobs.append(p)\n    p.start()\n    p2 = multiprocessing.Process(target=worker2)\n    jobs.append(p2)\n    p2.start()\n    p3 = multiprocessing.Process(target=worker3)\n    jobs.append(p3)\n    p3.start()\n</code></pre>\n"}, {"tags": ["python", "conda", "installation-package", "miniconda"], "answers": [{"comments": [{"owner": {"reputation": 6015, "user_id": 643821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8604b32053024d582a89d3da8b2921e2?s=128&d=identicon&r=PG", "display_name": "mattexx", "link": "https://stackoverflow.com/users/643821/mattexx"}, "edited": false, "score": 13, "creation_date": 1452140127, "post_id": 34644925, "comment_id": 57040108, "body": "you can throw in <code>-q</code> and skip all the garbage to stdout as well"}, {"owner": {"reputation": 3401, "user_id": 7769076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Gxb6.jpg?s=128&g=1", "display_name": "Agile Bean", "link": "https://stackoverflow.com/users/7769076/agile-bean"}, "edited": false, "score": 1, "creation_date": 1562225385, "post_id": 34644925, "comment_id": 100313089, "body": "The above link doesn\u2019t work any more. Here\u2019s the direct link to the official conda documentation that contains the -y / \u2014yes flag: <a href=\"https://docs.conda.io/projects/conda/en/latest/commands/install.html#Output,%20Prompt,%20and%20Flow%20Control%20Options\" rel=\"nofollow noreferrer\">docs.conda.io/projects/conda/en/latest/commands/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5045, "user_id": 3469521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b1ea16472234c4b480dd7d5e9a2c4b9c?s=128&d=identicon&r=PG&f=1", "display_name": "activelearner", "link": "https://stackoverflow.com/users/3469521/activelearner"}, "is_accepted": true, "score": 128, "last_activity_date": 1568724587, "last_edit_date": 1568724587, "creation_date": 1452123528, "answer_id": 34644925, "question_id": 34644612, "link": "https://stackoverflow.com/questions/34644612/conda-silently-installing-a-package/34644925#34644925", "title": "Conda - Silently installing a package", "body": "<p>Used <code>$conda install -y pandas</code> and it installed without any prompts (see <a href=\"https://docs.conda.io/projects/conda/en/latest/commands/install.html#Output,%20Prompt,%20and%20Flow%20Control%20Options\" rel=\"noreferrer\">documentation</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 901, "user_id": 3179698, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/27f80be3ec6ad179b550c3136d5922da?s=128&d=identicon&r=PG&f=1", "display_name": "cloudscomputes", "link": "https://stackoverflow.com/users/3179698/cloudscomputes"}, "reply_to_user": {"reputation": 61, "user_id": 3102832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5IyXD.jpg?s=128&g=1", "display_name": "mosemos", "link": "https://stackoverflow.com/users/3102832/mosemos"}, "edited": false, "score": 2, "creation_date": 1559114301, "post_id": 54777748, "comment_id": 99314186, "body": "I just try to help people with what I see and run into,while you can always choose not to accept the suggestion"}], "tags": [], "owner": {"reputation": 901, "user_id": 3179698, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/27f80be3ec6ad179b550c3136d5922da?s=128&d=identicon&r=PG&f=1", "display_name": "cloudscomputes", "link": "https://stackoverflow.com/users/3179698/cloudscomputes"}, "is_accepted": false, "score": 3, "last_activity_date": 1561404298, "last_edit_date": 1561404298, "creation_date": 1550628043, "answer_id": 54777748, "question_id": 34644612, "link": "https://stackoverflow.com/questions/34644612/conda-silently-installing-a-package/54777748#54777748", "title": "Conda - Silently installing a package", "body": "<p>I suggest not to pass the confirmation process.</p>\n\n<p>because it always has important info regarding this installation(which package will be updated and which dependency package will be installed and which package will be downgraded)</p>\n\n<p>I once corrupt my environment due to not notice the update some of the package and took a long time to figure out some package need to stay in a older version to make some other package run properly.And that confirmation details will always makes you informed and tell you where to debug once you corrupt your package environment after installation</p>\n\n<p>Anyway, here is the solution. Just use <code>-y</code> flag :</p>\n\n<pre><code>conda install -y PACKAGE_NAME\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10843, "user_id": 5101148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc92fb51fd3b1f946847ccd36d63aee6?s=128&d=identicon&r=PG&f=1", "display_name": "Simba", "link": "https://stackoverflow.com/users/5101148/simba"}, "is_accepted": false, "score": 24, "last_activity_date": 1569688445, "creation_date": 1569688445, "answer_id": 58148301, "question_id": 34644612, "link": "https://stackoverflow.com/questions/34644612/conda-silently-installing-a-package/58148301#58148301", "title": "Conda - Silently installing a package", "body": "<h3>One-time Use</h3>\n\n<p><code>-y</code>, <code>--yes</code> option.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code># e.g. No.1\nconda create -n myenv python=3.6 -y\n\n# e.g. No.2\n# install into a specific environment\nconda install -n myenv requests -y\n# install into the \"base\" env\nconda install flake8 --yes\n</code></pre>\n\n<hr>\n\n<h3>Script Use</h3>\n\n<p><strong>Warning</strong>. This method confirms <strong>any</strong> type of prompt.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>export CONDA_ALWAYS_YES=\"true\"\n\n# confirm all following \"conda\" commands\nconda create -n myenv\nconda install -n myenv requests\n# ...\n\n# Disable yes to all\nunset CONDA_ALWAYS_YES \n</code></pre>\n\n<p>You may need to check <a href=\"https://stackoverflow.com/a/58081608/5101148\">How to activate conda env through shell script</a>.</p>\n\n<hr>\n\n<h3>Environment Specific Use</h3>\n\n<p><strong>Warning</strong>. This method confirms <strong>any</strong> type of prompt.</p>\n\n<p>Enable \"yes\" to any prompt within <strong>current active env</strong>.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code># enable yes to all in current env\nconda config --env --set always_yes true\n\n# disable it in current env\nconda config --env --remove always_yes\n</code></pre>\n"}], "owner": {"reputation": 5045, "user_id": 3469521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b1ea16472234c4b480dd7d5e9a2c4b9c?s=128&d=identicon&r=PG&f=1", "display_name": "activelearner", "link": "https://stackoverflow.com/users/3469521/activelearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39618, "favorite_count": 10, "accepted_answer_id": 34644925, "answer_count": 3, "score": 79, "last_activity_date": 1569688445, "creation_date": 1452121877, "question_id": 34644612, "link": "https://stackoverflow.com/questions/34644612/conda-silently-installing-a-package", "title": "Conda - Silently installing a package", "body": "<p>I am trying to automate the process of setting up a development environment with pandas package using conda. </p>\n\n<p>I installed conda, created and activated a dev environment. When I tried to install a package as follows, I noticed that there was a prompt to which a user had to key in Y or N (Proceed ([y]/n)?) for the installation to proceed successfully. </p>\n\n<pre><code>$ conda install pandas\nFetching package metadata: ....\nSolving package specifications: ..................\nPackage plan for installation in environment /home/miniconda2/envs/pandas_env:\n\nThe following packages will be downloaded:\n\n    package                    |            build\n    ---------------------------|-----------------\n    libgfortran-1.0            |                0         170 KB\n    openblas-0.2.14            |                3         3.5 MB\n    numpy-1.10.2               |           py27_0         5.9 MB\n    pytz-2015.7                |           py27_0         174 KB\n    six-1.10.0                 |           py27_0          16 KB\n    python-dateutil-2.4.2      |           py27_0         219 KB\n    pandas-0.17.1              |      np110py27_0        12.4 MB\n    ------------------------------------------------------------\n                                           Total:        22.3 MB\n\nThe following NEW packages will be INSTALLED:\n\n    libgfortran:     1.0-0             \n    numpy:           1.10.2-py27_0     \n    openblas:        0.2.14-3          \n    pandas:          0.17.1-np110py27_0\n    python-dateutil: 2.4.2-py27_0      \n    pytz:            2015.7-py27_0     \n    six:             1.10.0-py27_0     \n\nProceed ([y]/n)? y\n\nFetching packages ...\nlibgfortran-1. 100% |###################################################################################################################################################################| Time: 0:00:00 457.23 kB/s\nopenblas-0.2.1 100% |###################################################################################################################################################################| Time: 0:00:02   1.68 MB/s\nnumpy-1.10.2-p 100% |###################################################################################################################################################################| Time: 0:00:02   2.42 MB/s\npytz-2015.7-py 100% |###################################################################################################################################################################| Time: 0:00:00 388.35 kB/s\nsix-1.10.0-py2 100% |###################################################################################################################################################################| Time: 0:00:00 224.69 kB/s\npython-dateuti 100% |###################################################################################################################################################################| Time: 0:00:00 493.15 kB/s\npandas-0.17.1- 100% |###################################################################################################################################################################| Time: 0:00:04   3.24 MB/s\nExtracting packages ...\n[      COMPLETE      ]|######################################################################################################################################################################################| 100%\nLinking packages ...\n[      COMPLETE      ]|######################################################################################################################################################################################| 100%\n</code></pre>\n\n<p>How can I override these prompts so that the installation takes place silently? I tried using the -f flag but it does not seem to be existing with the conda install command.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "cron", "python-requests", "crontab", "cron-task"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452121883, "post_id": 34644577, "comment_id": 57035060, "body": "Is this cron job running on a laptop that you carry with you from home to office?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "reply_to_user": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 0, "creation_date": 1452122260, "post_id": 34644577, "comment_id": 57035206, "body": "@Hugh are you sure about that?  When I set up cron jobs as myself, they run as myself.  It would be a giant security hole otherwise, wouldn&#39;t it?"}, {"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452123510, "post_id": 34644577, "comment_id": 57035666, "body": "@JohnGordon: you are right; I was thinking about system cron jobs which default to root unless you specify a run-as user."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 5597611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-W3yjzmFO59k/AAAAAAAAAAI/AAAAAAAABHI/gze_Vj0FlY4/photo.jpg?sz=128", "display_name": "Andrew Schmitt", "link": "https://stackoverflow.com/users/5597611/andrew-schmitt"}, "edited": false, "score": 0, "creation_date": 1452125874, "post_id": 34644737, "comment_id": 57036382, "body": "That makes perfect sense, I only set those variables via .bash_profile. Cool beans. I&#39;ll set it up tonight and test tomorrow when I go back and in and report back. Thank you sir."}], "tags": [], "owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "is_accepted": true, "score": 3, "last_activity_date": 1452122479, "creation_date": 1452122479, "answer_id": 34644737, "question_id": 34644577, "link": "https://stackoverflow.com/questions/34644577/python-requests-urllib3-newconnectionerror-only-when-script-runs-on-a-cronjob-fr/34644737#34644737", "title": "Python requests/urllib3 NewConnectionError only when script runs on a cronjob from the office", "body": "<p>Probably there is a proxy involved.</p>\n\n<p>When the script is run from your home there is no proxy, or the proxy is properly configured, so there is no problem.</p>\n\n<p>When run from the command line at your office the shell environment is properly configured to set a HTTP/S proxy via environment variables:</p>\n\n<pre><code>export http_proxy=\"http://proxy.com:3128\"\nexport https_proxy=\"https://proxy.com:3128\"\n</code></pre>\n\n<p>(upper case variables are also effective, i.e. HTTP_PROXY, HTTPS_PROXY)</p>\n\n<p>However, when the script is run from <code>cron</code> the environment does not have the proxy variables set, and the connection request times out. You create a wrapper for the script and then execute the wrapper script from cron. e.g.</p>\n\n<pre><code>#!/bin/sh\nexport HTTP_PROXY=\"http://proxy:1234\"\nexport HTTPS_PROXY=\"https://proxy:1234\"\npython your_script.py\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 5597611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-W3yjzmFO59k/AAAAAAAAAAI/AAAAAAAABHI/gze_Vj0FlY4/photo.jpg?sz=128", "display_name": "Andrew Schmitt", "link": "https://stackoverflow.com/users/5597611/andrew-schmitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2081, "favorite_count": 0, "accepted_answer_id": 34644737, "answer_count": 1, "score": 3, "last_activity_date": 1452122479, "creation_date": 1452121700, "question_id": 34644577, "link": "https://stackoverflow.com/questions/34644577/python-requests-urllib3-newconnectionerror-only-when-script-runs-on-a-cronjob-fr", "title": "Python requests/urllib3 NewConnectionError only when script runs on a cronjob from the office", "body": "<p>Weird issue I can't figure out. </p>\n\n<p>I have a script that uses Python's request library and is run on a cronjob. When I'm at home over a VPN it works fine. </p>\n\n<p>If I'm at the office the cronjob returns a connection error, more specifically a NewConnectionError[error 60: connection timeout] (which is raised by urllib3). The weird thing is if I run the script manually from the command line it doesn't have a problem.</p>\n\n<p>I only have a high level understanding of how requests/urllib3/cron works. I'm guessing the connection is cached in some way but I'm not sure. Does anyone know what could be causing this? </p>\n\n<p>The script itself is a sync utility that creates a connection to bitbucket's api. I created an api-wrapper to achieve this, which is essentially just an object to build queries with. Here is a snippet from the wrapper:</p>\n\n<pre><code>def __init__(self, username, password):\n    s = requests.Session()\n    s.auth = (username, password)\n    self._bitbucket_session = s\n\ndef _get_context(self, url, paging):\n    try:\n        r = self._bitbucket_session.get(url)\n        if r.status_code == 403:\n            raise self.BitbucketAPIError('BitbucketAPIError: {}'.format(r.reason))\n        if 'error' in r.json():\n            raise self.BitbucketAPIError('BitbucketAPIError: {}'.format(r.json()['error']['message']))\n    except HTTPError as e:\n        print(\"HTTP Error: {}\".format(e))\n    except ConnectTimeout as e:\n        print(\"The request timed out while trying to connect to the remote server: {}\".format(e))\n    except ConnectionError as e:\n        print(\"Connection Error: {}\".format(e))\n    except Timeout as e:\n        print(\"Connection Timed out: {}\".format(e))\n    except RequestException as e:\n        print(\"Unhandled exception: {}\".format(e))\n</code></pre>\n\n<p>And here is a simplified version of the sync client that is being \"croned\":</p>\n\n<pre><code>bapi = BitbucketApi(username, password)\n# blah blah blah \nupdate_members()\nupdate_repository()\n\nbapi.close()\n</code></pre>\n\n<p>Here is the close method:</p>\n\n<pre><code>def close(self):\n    self._bitbucket_session.close()\n</code></pre>\n"}, {"tags": ["python", "html", "selenium", "xpath", "css-selectors"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452121994, "post_id": 34644551, "comment_id": 57035102, "body": "Why is the xpath a problem if the cell isn&#39;t empty?  What happens?"}, {"owner": {"reputation": 349, "user_id": 5145073, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f99ee4e1bdaf7d2701e9229cd7d4481f?s=128&d=identicon&r=PG&f=1", "display_name": "royalblue", "link": "https://stackoverflow.com/users/5145073/royalblue"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452122627, "post_id": 34644551, "comment_id": 57035348, "body": "I want to click on an empty cell. Not a cell that contains information."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452122933, "post_id": 34644551, "comment_id": 57035460, "body": "So if the sixth cell contains information, what do you want to do?  Click on a different cell, or not click any cell at all?"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1452122935, "post_id": 34644551, "comment_id": 57035464, "body": "Are you getting any errors? What do you expect to see?"}, {"owner": {"reputation": 349, "user_id": 5145073, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f99ee4e1bdaf7d2701e9229cd7d4481f?s=128&d=identicon&r=PG&f=1", "display_name": "royalblue", "link": "https://stackoverflow.com/users/5145073/royalblue"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452123105, "post_id": 34644551, "comment_id": 57035530, "body": "If the 6th contains information I want to click on the next empty cell @JohnGordon"}, {"owner": {"reputation": 349, "user_id": 5145073, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f99ee4e1bdaf7d2701e9229cd7d4481f?s=128&d=identicon&r=PG&f=1", "display_name": "royalblue", "link": "https://stackoverflow.com/users/5145073/royalblue"}, "reply_to_user": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1452123154, "post_id": 34644551, "comment_id": 57035542, "body": "I expect for it to click on an empty cell. I believe looping seems logical @alecxe"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1452123427, "post_id": 34644551, "comment_id": 57035634, "body": "What is currently happening? Any errors?"}], "answers": [{"tags": [], "owner": {"reputation": 13000, "user_id": 3190347, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Fsjd6.jpg?s=128&g=1", "display_name": "Shubham Jain", "link": "https://stackoverflow.com/users/3190347/shubham-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1452174984, "last_edit_date": 1452174984, "creation_date": 1452173626, "answer_id": 34656479, "question_id": 34644551, "link": "https://stackoverflow.com/questions/34644551/click-a-block-on-a-table-selenium-python/34656479#34656479", "title": "Click a block on a table SELENIUM PYTHON", "body": "<p>Try below xpath :-</p>\n\n<pre><code>//*[@id='timeline_data']//table[@class='data_table']//td[6]\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>//table[@class='data_table']//td[6]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8893163, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qzHJAqflNEU/AAAAAAAAAAI/AAAAAAAAAKQ/sA4flbBgZhM/photo.jpg?sz=128", "display_name": "Marius-Costin Dr\u0103cea", "link": "https://stackoverflow.com/users/8893163/marius-costin-dr%c4%83cea"}, "is_accepted": false, "score": -1, "last_activity_date": 1509961120, "last_edit_date": 1509961120, "creation_date": 1509958868, "answer_id": 47133131, "question_id": 34644551, "link": "https://stackoverflow.com/questions/34644551/click-a-block-on-a-table-selenium-python/47133131#47133131", "title": "Click a block on a table SELENIUM PYTHON", "body": "<p>Why not use variables in your xpath? Every cell should have a number which differentiates it from others.\nFor example: </p>\n\n<pre><code>\"/table/tbody/tr[4]/td[\"+ str(x) + \"]/div/table/tbody/tr/td[6]\"\n</code></pre>\n\n<p>You can equate <code>x = 1</code> and make a while loop to check the cell to be empty and if not empty make <code>x = x + 1</code> and so on. Hence when the cell is going to be empty, the row will be given by <code>x</code> and you can define you <code>xpath.click()</code> as the above example, but not with the correct variable/row.</p>\n\n<p>This worked for me.</p>\n"}], "owner": {"reputation": 349, "user_id": 5145073, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f99ee4e1bdaf7d2701e9229cd7d4481f?s=128&d=identicon&r=PG&f=1", "display_name": "royalblue", "link": "https://stackoverflow.com/users/5145073/royalblue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1108, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1509961120, "creation_date": 1452121581, "question_id": 34644551, "link": "https://stackoverflow.com/questions/34644551/click-a-block-on-a-table-selenium-python", "title": "Click a block on a table SELENIUM PYTHON", "body": "<p>I am trying to click an empty block on a table. Here is the HTML code</p>\n\n<pre><code>&lt;table class= \"data_table\" cellspacing=\"0\"&gt;\n &lt;tbody&gt;\n  &lt;tr&gt;\n   &lt;td class=\"matrix_cell\" sytle= \"width:32\"&gt;&lt;/td&gt;\n   &lt;td class=\"matrix_cell\" sytle= \"width:32\"&gt;&lt;/td&gt;\n   &lt;td class=\"matrix_cell\" sytle= \"width:32\"&gt;&lt;/td&gt;\n   &lt;td class=\"matrix_cell\" sytle= \"width:32\"&gt;&lt;/td&gt;\n   &lt;td class=\"matrix_cell\" sytle= \"width:32\"&gt;&lt;/td&gt;\n   &lt;td class=\"matrix_cell\" sytle= \"width:32\"&gt;&lt;/td&gt; #the cell I want to click\n   &lt;td class=\"matrix_cell\" sytle= \"width:32\"&gt;&lt;/td&gt;\n</code></pre>\n\n<p>the xpath of this cell is  </p>\n\n<pre><code>cellclick=driver.find_element_by_xpath(\"id('timeline_data')/table/tbody/tr[4]/td[2]/div/table/tbody/tr/td[6]\").click()\n</code></pre>\n\n<p>The problem with the xpath is that cell may not always be empty.</p>\n\n<p>I tried to loop through the table:</p>\n\n<pre><code> cells=driver.find_element_by_class_name(\"data_table\")\n        for block in cells:\n            if block ==6:\n                block.click\n</code></pre>\n\n<p>I also tried using css_selector:</p>\n\n<pre><code>cells=driver.find_element_by_css_selector(\"td.matrix_cell:last-child\").click()\n</code></pre>\n\n<p><strong>How can I click an empty cell (aka the 6th cell) on the table using selenium?</strong></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 3857, "user_id": 3552063, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/H6Z98.png?s=128&g=1", "display_name": "Mirek D\u0142ugosz", "link": "https://stackoverflow.com/users/3552063/mirek-d%c5%82ugosz"}, "edited": false, "score": 0, "creation_date": 1452122015, "post_id": 34644538, "comment_id": 57035113, "body": "I am not going to flag it as such, but I have feeling that this question would be better suited to <a href=\"http://programmers.stackexchange.com/help/on-topic\">Programmers Stack Exchange</a>; or maybe <a href=\"http://codereview.stackexchange.com/\">Code Review</a> if you can add some working code that can be discussed."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1452122142, "post_id": 34644538, "comment_id": 57035154, "body": "Consider what would happen if something tested <code>__dict__</code> of the class you defined <code>__getattr__</code> for. It wouldn&#39;t see the same members that <code>hasattr</code> would."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 3857, "user_id": 3552063, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/H6Z98.png?s=128&g=1", "display_name": "Mirek D\u0142ugosz", "link": "https://stackoverflow.com/users/3552063/mirek-d%c5%82ugosz"}, "edited": false, "score": 0, "creation_date": 1452122439, "post_id": 34644538, "comment_id": 57035276, "body": "@Miros\u0142awZalewski: It would be best suited <i>here</i> if the OP can add the broken code under discussion."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1452123639, "post_id": 34644538, "comment_id": 57035712, "body": "It&#39;s fragile and error prone.  What&#39;s wrong with try/except instead, as Martian Peters has already suggested for you there.  Much more elegant and pythonic!"}, {"owner": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "reply_to_user": {"reputation": 3857, "user_id": 3552063, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/H6Z98.png?s=128&g=1", "display_name": "Mirek D\u0142ugosz", "link": "https://stackoverflow.com/users/3552063/mirek-d%c5%82ugosz"}, "edited": false, "score": 0, "creation_date": 1452131856, "post_id": 34644538, "comment_id": 57038023, "body": "@Miros\u0142awZalewski: I think you are correct that Code Review would have been a better choice. I actually wasn&#39;t aware of that sister site."}, {"owner": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1452132168, "post_id": 34644538, "comment_id": 57038108, "body": "@wim It&#39;s fragile and error prone perhaps but why? I can except that it might be poor form I&#39;m just trying to understand why that might be."}, {"owner": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1452132267, "post_id": 34644538, "comment_id": 57038135, "body": "@LightnessRacesinOrbit There is no broken code. I&#39;m just trying to understand why this might be a problem."}], "answers": [{"comments": [{"owner": {"reputation": 17238, "user_id": 240490, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/536433ff8bf7f50dcab75a920a11d30a?s=128&d=identicon&r=PG", "display_name": "Jonathan Eunice", "link": "https://stackoverflow.com/users/240490/jonathan-eunice"}, "edited": false, "score": 2, "creation_date": 1452122817, "post_id": 34644635, "comment_id": 57035420, "body": "And <code>__dict__</code> doesn&#39;t necessarily even contain the attributes of an instance (or even exist), if the class uses the rarer, more efficient <code>__slots__</code> storage strategy."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 17238, "user_id": 240490, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/536433ff8bf7f50dcab75a920a11d30a?s=128&d=identicon&r=PG", "display_name": "Jonathan Eunice", "link": "https://stackoverflow.com/users/240490/jonathan-eunice"}, "edited": false, "score": 0, "creation_date": 1452126077, "post_id": 34644635, "comment_id": 57036422, "body": "@JonathanEunice -- Yep, but those are more exotic objects.  I wanted to show a more simple example where there is a difference."}, {"owner": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1452132658, "post_id": 34644635, "comment_id": 57038236, "body": "@mgilson I wasn&#39;t thinking about the distinction between class and instance members so I appreciate the clarification. In this particular case I am only using <code>__g&#47;setattr__</code> to look for the names of the children so it will be OK to look for attributes of the instance. <code>hasattr</code> calls <code>__getattr__</code> and causes a recursion error for my design."}], "tags": [], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "is_accepted": false, "score": 2, "last_activity_date": 1452121994, "creation_date": 1452121994, "answer_id": 34644635, "question_id": 34644538, "link": "https://stackoverflow.com/questions/34644538/why-is-testing-membership-of-dict-poor-form/34644635#34644635", "title": "Why is testing membership of `__dict__` poor form?", "body": "<p>I'm not completely sure that I understand your other post, but note that <code>__dict__</code> only contains the attributes of the instance -- not the class.  e.g.</p>\n\n<pre><code>&gt;&gt;&gt; class Foo(object):\n...   x = 1\n... \n&gt;&gt;&gt; Foo().__dict__\n{}\n</code></pre>\n\n<p>However, a <code>hasattr</code> call will tell you that an instance of <code>Foo</code> does have an <code>x</code> attribute:</p>\n\n<pre><code>&gt;&gt;&gt; hasattr(Foo(), 'x')\nTrue\n</code></pre>\n\n<p>So, whatever the case, we can see that these two idioms have different meanings -- even under certain pretty common circumstances.</p>\n"}], "owner": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452121994, "creation_date": 1452121450, "last_edit_date": 1495542197, "question_id": 34644538, "link": "https://stackoverflow.com/questions/34644538/why-is-testing-membership-of-dict-poor-form", "title": "Why is testing membership of `__dict__` poor form?", "body": "<p>I asked this <a href=\"https://stackoverflow.com/q/34642695/873389\">question</a> regarding eliminating a test of membership of <code>__dict__</code> for an object. A solution was provided but it was somewhat less elegant that using <code>if x in __dict__</code>.</p>\n\n<p>As I mentioned in that post I would have preferred to use <code>hasattr</code> but it led to a <code>RecursionError</code>.</p>\n\n<p>What is wrong with the test of membership?</p>\n"}, {"tags": ["python", "excel", "numpy", "scipy", "mathematical-optimization"], "comments": [{"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 1, "creation_date": 1452124654, "post_id": 34644484, "comment_id": 57036048, "body": "<i>&quot;while I technically have it working I&#39;m running into slight differences with the results&quot;</i> - what does that mean? Are the SLSQP solutions better, worse, or just different? It would help if you gave some example input data."}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1452128655, "post_id": 34644484, "comment_id": 57037093, "body": "You might also try COBYLA, which also uses linear rather than quadratic approximations to the objective function (unlike SLSQP). All of the constraint functions must be of the form <code>f(x) &gt;= 0</code>, but you can implement an equality constraint using a pair of such inequalities."}, {"owner": {"reputation": 147, "user_id": 1243520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/618df20d87b50d375ae105cce9066d32?s=128&d=identicon&r=PG", "display_name": "Adam Bickford", "link": "https://stackoverflow.com/users/1243520/adam-bickford"}, "reply_to_user": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1452130434, "post_id": 34644484, "comment_id": 57037591, "body": "Edited to include same data, and I will try out the COBYLA algo, thanks. The differences between the Excel sheet and the program are as you said &quot;just different&quot;. Sometimes the values would be higher, sometimes lower, sometimes barely off, sometimes off by like 10-20 percentage points."}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1452131057, "post_id": 34644484, "comment_id": 57037787, "body": "If the SLSQP solutions are just as good then why would you care if they are different to the GRG ones?"}, {"owner": {"reputation": 10888, "user_id": 5625534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d4mCF.jpg?s=128&g=1", "display_name": "Erwin Kalvelagen", "link": "https://stackoverflow.com/users/5625534/erwin-kalvelagen"}, "edited": false, "score": 0, "creation_date": 1452141272, "post_id": 34644484, "comment_id": 57040403, "body": "Note that Excel&#39;s GRG code is not super precise, it has fairly loose tolerances and it may use finite difference gradients. Am I correct that you want to solve a quadratic portfolio optimization problem? In that case you can also look into specialized solvers like  <a href=\"http://cvxopt.org/\" rel=\"nofollow noreferrer\">cvxopt</a>."}, {"owner": {"reputation": 1695, "user_id": 2108433, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d734ef97ea8fececa4988dcc738f2e1d?s=128&d=identicon&r=PG", "display_name": "TimChippingtonDerrick", "link": "https://stackoverflow.com/users/2108433/timchippingtonderrick"}, "edited": false, "score": 1, "creation_date": 1452150495, "post_id": 34644484, "comment_id": 57043775, "body": "Still not clear if the &#39;differences&#39; are in the details of the solution or the objective function value. If the solutions are similar but not identical they may both be valid. Many problems have internal symmetries that allow for many different detailed choices that are in fact equivalent. We usually try to impose one solver&#39;s solution on the other solver to &#39;prove&#39; their equivalence, so in your case try forcing the Excel solver&#39;s solution on your new implementation, and vice versa. This can be as simple as adding (many) constraints like var1 = value1 etc."}, {"owner": {"reputation": 147, "user_id": 1243520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/618df20d87b50d375ae105cce9066d32?s=128&d=identicon&r=PG", "display_name": "Adam Bickford", "link": "https://stackoverflow.com/users/1243520/adam-bickford"}, "reply_to_user": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1452153293, "post_id": 34644484, "comment_id": 57045038, "body": "@ali_m unfortunately the client did not think they were just as good, so I have to care haha. Someone else told us about some proprietary GRG ones so we may have to look into that more if they don&#39;t like the results we get with SciPy"}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 1, "creation_date": 1452154611, "post_id": 34644484, "comment_id": 57045649, "body": "In that case, do I need to interpret your requirement as being that the result must be <i>exactly</i> the same as that of the Excel GRG solver?"}, {"owner": {"reputation": 147, "user_id": 1243520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/618df20d87b50d375ae105cce9066d32?s=128&d=identicon&r=PG", "display_name": "Adam Bickford", "link": "https://stackoverflow.com/users/1243520/adam-bickford"}, "edited": false, "score": 0, "creation_date": 1452207673, "post_id": 34644484, "comment_id": 57079321, "body": "I don&#39;t think it needs to be <i>exactly</i> the same as the Excel GRG solver, just much closer than what we were getting. Today I am changing the current program to run both SLSQP and COBYLA side by side to run a closer comparison, and then looking more at the cvxopt solver that was suggested."}, {"owner": {"reputation": 147, "user_id": 1243520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/618df20d87b50d375ae105cce9066d32?s=128&d=identicon&r=PG", "display_name": "Adam Bickford", "link": "https://stackoverflow.com/users/1243520/adam-bickford"}, "reply_to_user": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1452208381, "post_id": 34644484, "comment_id": 57079576, "body": "@ali_m could you please provide an example of an inequality constraint pair using the format you mentioned earlier that gives the equivalent of the equality constraint where <code>sum(x) == 1</code>? I&#39;m having trouble wrapping my head around that piece."}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1452208920, "post_id": 34644484, "comment_id": 57079758, "body": "<i>&quot;I don&#39;t think it needs to be exactly the same as the Excel GRG solver, just much closer than what we were getting.&quot;</i> I think you should talk to your client about this and pin down exactly what they would find acceptable. Unless you exactly recapitulated Excel&#39;s GRG solver it would be very difficult to make any general claims about the closeness of your solutions. You should make the case that it is the value of the objective function that counts, not how close the solution happens to be to Excel&#39;s. Suppose SLSQP consistently gave <i>better</i> solutions than Excel?"}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1452209202, "post_id": 34644484, "comment_id": 57079859, "body": "<code>({&#39;type&#39;: &#39;ineq&#39;, &#39;fun&#39;: lambda x:  1 - sum(x)}, {&#39;type&#39;: &#39;ineq&#39;, &#39;fun&#39;: lambda x:  -(1 - sum(x))})</code>"}], "owner": {"reputation": 147, "user_id": 1243520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/618df20d87b50d375ae105cce9066d32?s=128&d=identicon&r=PG", "display_name": "Adam Bickford", "link": "https://stackoverflow.com/users/1243520/adam-bickford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1395, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1510677285, "creation_date": 1452121123, "last_edit_date": 1452130291, "question_id": 34644484, "link": "https://stackoverflow.com/questions/34644484/scipy-minimize-function-with-eq-constraints-but-not-slsqp-algo-preferably-grg", "title": "SciPy minimize function with &#39;eq&#39; constraints but not SLSQP algo (preferably GRG)", "body": "<p>I'm working on converting an Excel solver to python using NumPy and SciPy and while I technically have it working I'm running into slight differences with the results.</p>\n\n<p>Sample data being put through formula:</p>\n\n<pre><code>array_1 = [\n  0.0943417538897551,\n  0.0799476059590533,\n  0.0486689860368342,\n  0.052434296201351 ,\n  0.231614207638357,\n  0.0808322159046283,\n  0.0819215585688325,\n  0.140991841045595,\n  0.189247534431047\n]\n\nmatrix_1 = [\n  [0.0235147682238835,    0.0194641686338689,    0.0116344823277316,    0.0214041868628604,    0.010980242438382,     0.013085897256736,     0.0107928914491097,      -0.000350116147653561, 0.000323182155233255],\n  [0.0194641686338689,    0.0227374787807333,    0.0147128129866735,    0.023168038099643,     0.00899606198312112,   0.0108035747784655,    0.00989996824509696,     -0.000271072225966624, 0.000337765823991017],\n  [0.0116344823277316,    0.0147128129866735,    0.0265282312707786,    0.0140689757522423,    0.021443195995926,     0.0252024393105442,    0.0187159868856209,      0.000969972826332724,  -0.0000408711850838449],\n  [0.0214041868628604,    0.023168038099643,     0.0140689757522423,    0.0288819629130722,    0.00890430456025532,   0.00987603454385401,   0.00914278195359995,     -0.000127719476583381, 0.000340663672172775],\n  [0.010980242438382,     0.00899606198312111,   0.021443195995926,     0.00890430456025532,   0.029544562002381,     0.0314280240062057,    0.017176083705661,       0.00103517056623238,   0.0000307234067635423],\n  [0.013085897256736,     0.0108035747784655,    0.0252024393105442,    0.00987603454385401,   0.0314280240062057,    0.0552293560476392,    0.0198882118118466,      0.000830285068544538,  -0.000328125366438888],\n  [0.0107928914491097,    0.00989996824509696,   0.0187159868856209,    0.00914278195359995,   0.017176083705661,     0.0198882118118466,    0.0174188411860936,      0.000638033896492422,  -0.00000837412076787606],\n  [-0.000350116147653561, -0.000271072225966624, 0.000969972826332724,  -0.000127719476583381, 0.00103517056623238,   0.000830285068544538,  0.000638033896492422,    0.00207309710065845,   0.00038309084175021],\n  [0.000323182155233255,  0.000337765823991017,  -0.0000408711850838449, 0.000340663672172775, 0.0000307234067635422, -0.000328125366438888, -0.00000837412076787614, 0.00038309084175021,   0.000315889643542944]\n]\n\nuser_input_number = 0.2 # fluctuates between 0 and 1\n\narray_2 = [\n  0.0555192520462957,\n  0.0521964263617645,\n  0.0727151670043896,\n  0.0541841497069959,\n  0.0797919901829936,\n  0.0972924758058667,\n  0.057466786568159,\n  0.00266000663087858,\n  0.000440591301372533,\n]\n</code></pre>\n\n<p>and my calculation function looks like this:</p>\n\n<pre><code>def calculate(array_1):\n  step_one = np.dot(np.dot(array_1, matrix_1), array_1)\n  step_two = user_input_number * np.dot(array_2, array_1)\n  return step_one - step_two \n\n# matrix_1, array_2, and user_input_number are defined outside of this scope\n</code></pre>\n\n<p>The bounds on <code>array_1</code> numbers need to stay within 0 and 1:</p>\n\n<pre><code>myBounds = ((0,1),(0,1),(0,1),(0,1),(0,1),(0,1),(0,1),(0,1),(0,1))\n</code></pre>\n\n<p>and I need to pass a constraint, where the <code>sum(array_1)</code> would equal 1:</p>\n\n<pre><code>myConstraint = ({'type': 'eq', 'fun': lambda x:  1 - sum(x)})\n</code></pre>\n\n<p>so my SciPy <code>minimize</code> call ends up something like this:</p>\n\n<pre><code>result = minimize(calculate, myArray, method=\"SLSQP\", bounds=myBounds, constraints=myConstraint)\n\n# 'SLSQP' is used because I read it is the only one that allows a constraint.\n</code></pre>\n\n<p>and like I mentioned this works, but not accurately to the results we are getting in Excel. </p>\n\n<p>Here is a screen shot of the solver settings:</p>\n\n<p><a href=\"https://i.stack.imgur.com/MxSER.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MxSER.png\" alt=\"excel solver\"></a></p>\n\n<p>and you can see it's using the solving method \"GRG Nonlinear\" but that option is not in the <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html#scipy.optimize.minimize\" rel=\"nofollow noreferrer\" title=\"minimize docs\">minimize docs</a> under available methods. I saw 'BFGS' and 'L-BFGS-B' recommended which were much closer results but I couldn't do a great comparison since it did not allow for a constraint to be put on the resulting array.</p>\n\n<p>My overall question would be what is the best way to replicate the \"GRG Nonlinear\" method of minimizing with a constraint?</p>\n"}, {"tags": ["python", "logging", "stdout", "stderr"], "comments": [{"owner": {"reputation": 4011, "user_id": 989126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aeae36f54d0086fb3bb01229877b0a3?s=128&d=identicon&r=PG", "display_name": "brunsgaard", "link": "https://stackoverflow.com/users/989126/brunsgaard"}, "edited": false, "score": 4, "creation_date": 1452121091, "post_id": 34644410, "comment_id": 57034743, "body": "Use the logging module that comes with Python. Create a logger and register a streamhandler and a filehandler. What you are doing is not the pythonic way to solve your problem"}, {"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "reply_to_user": {"reputation": 4011, "user_id": 989126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aeae36f54d0086fb3bb01229877b0a3?s=128&d=identicon&r=PG", "display_name": "brunsgaard", "link": "https://stackoverflow.com/users/989126/brunsgaard"}, "edited": false, "score": 0, "creation_date": 1452121135, "post_id": 34644410, "comment_id": 57034763, "body": "@brunsgaard is correct. Use <a href=\"https://docs.python.org/3/library/logging.html\" rel=\"nofollow noreferrer\">logging</a>"}, {"owner": {"reputation": 1442, "user_id": 2454374, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NVmHC.png?s=128&g=1", "display_name": "Son of a Beach", "link": "https://stackoverflow.com/users/2454374/son-of-a-beach"}, "edited": false, "score": 0, "creation_date": 1452123953, "post_id": 34644410, "comment_id": 57035829, "body": "The logging module doesn&#39;t appear to write to the terminal, as far as I can tell (from a quick skim through the doco).  I need to write to both terminal and to log file for every &#39;print&#39; (or equivalent).  Can the logging module do this?"}], "answers": [{"comments": [{"owner": {"reputation": 1442, "user_id": 2454374, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NVmHC.png?s=128&g=1", "display_name": "Son of a Beach", "link": "https://stackoverflow.com/users/2454374/son-of-a-beach"}, "edited": false, "score": 1, "creation_date": 1452121484, "post_id": 34644508, "comment_id": 57034904, "body": "So the &#39;print&#39; command uses a separate call for the &quot;\\n&quot;?  I didn&#39;t realise that.  Your answer seems to be spot on.  I also need to investigate the logger class, I think."}, {"owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "reply_to_user": {"reputation": 1442, "user_id": 2454374, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NVmHC.png?s=128&g=1", "display_name": "Son of a Beach", "link": "https://stackoverflow.com/users/2454374/son-of-a-beach"}, "edited": false, "score": 0, "creation_date": 1452121598, "post_id": 34644508, "comment_id": 57034952, "body": "@SonofaBeach   Cool, Accept it then :). I also think the most pythonic way is the logging module..."}, {"owner": {"reputation": 1442, "user_id": 2454374, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NVmHC.png?s=128&g=1", "display_name": "Son of a Beach", "link": "https://stackoverflow.com/users/2454374/son-of-a-beach"}, "edited": false, "score": 0, "creation_date": 1452124033, "post_id": 34644508, "comment_id": 57035864, "body": "I agree that it&#39;s not the most pythonic way, but (as above) does the logging module provide the functionality to log to both the terminal and to a log file simultaneously for each &#39;print&#39; (or equivalent)?"}, {"owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "reply_to_user": {"reputation": 1442, "user_id": 2454374, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NVmHC.png?s=128&g=1", "display_name": "Son of a Beach", "link": "https://stackoverflow.com/users/2454374/son-of-a-beach"}, "edited": false, "score": 0, "creation_date": 1452151967, "post_id": 34644508, "comment_id": 57044470, "body": "Yes, please refer to the logging module docs for superb examples"}], "tags": [], "owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "is_accepted": true, "score": 2, "last_activity_date": 1452121288, "creation_date": 1452121288, "answer_id": 34644508, "question_id": 34644410, "link": "https://stackoverflow.com/questions/34644410/python-logger-class-repeats-timestamp/34644508#34644508", "title": "Python &#39;Logger&#39; class repeats timestamp", "body": "<p>When you are doing</p>\n\n<pre><code>print \"some log test\"\n</code></pre>\n\n<p>python will call your object twice</p>\n\n<pre><code>yourlogger.write(\"some log test\") #this will output BLAH  some log text\nyourlogger.write(\"\\n\") #this will output BLAH \\n\n</code></pre>\n\n<blockquote>\n  <blockquote>\n    <p>BLAH  some log textoutput BLAH \\n</p>\n  </blockquote>\n</blockquote>\n\n<p>Got it? :)</p>\n\n<p>To avoid this bug you may add a special case for \\n or just use a real logging.Logger :)</p>\n"}], "owner": {"reputation": 1442, "user_id": 2454374, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NVmHC.png?s=128&g=1", "display_name": "Son of a Beach", "link": "https://stackoverflow.com/users/2454374/son-of-a-beach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 34644508, "answer_count": 1, "score": 2, "last_activity_date": 1452124181, "creation_date": 1452120824, "last_edit_date": 1452124181, "question_id": 34644410, "link": "https://stackoverflow.com/questions/34644410/python-logger-class-repeats-timestamp", "title": "Python &#39;Logger&#39; class repeats timestamp", "body": "<p>I'm using a 'Logger' class (sourced from another SO answer) in order to write to both a log file and to the terminal simultaneously whenever a print (or similar) command is used.</p>\n\n<p>I've modified the logger so that it prepends all messages with a timestamp.  However, it is also appending the timestamp, which is not desired.  So I end up with the timestamp at both the beginning and the end of every line.</p>\n\n<p>The example code below is modified to replace the actual timestamp code with the literal text \"BLAH\", to demonstrate that it occurs for any text, and it unrelated to the method used to obtain the timestamp.</p>\n\n<pre><code>class Logger(object):\n    def __init__(self):\n        self.terminal = sys.stdout\n        self.log = open(r\"C:\\Temp\\gis_list2reference.txt\", \"a\")\n\n    def write(self, msg):\n        line = \"%s  %s\" % (\"BLAH\", msg)\n        self.terminal.write(line)\n        self.terminal.flush()\n        self.log.write(line)\n        self.log.flush()\n\n##    #this flush method is needed for python 3 compatibility.\n##    def flush(self):\n##        pass\n\nsys.stdout = Logger()\n\nprint \"some log text\"\n</code></pre>\n\n<p>The output, to both the terminal and the log file, is:</p>\n\n<pre><code>BLAH  some log textBLAH\n</code></pre>\n\n<p>How can I avoid the extra \"BLAH\" (or timestamp) at the end of each line logged?</p>\n\n<p>Why is it getting logged?</p>\n\n<p>EDIT:</p>\n\n<p>As per the accepted answer below, the following code works (although it's clearly not a 'pythonic' neat way to do it:</p>\n\n<pre><code>class Logger(object):\n    def __init__(self):\n        self.terminal = sys.stdout\n        self.log = open(r\"C:\\Temp\\gis_list2reference.txt\", \"a\")\n\n    def write(self, msg):\n        if msg != \"\\n\":\n            msg = \"%s  %s\" % (strftime(\"%Y-%m-%d %H:%M:%S\"), msg)\n        self.terminal.write(msg)\n        #self.terminal.flush()\n        self.log.write(msg)\n        self.log.flush()\n\n##    #this flush method is needed for python 3 compatibility.\n##    def flush(self):\n##        pass\n\nsys.stdout = Logger()\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 767, "user_id": 1305706, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5Mjsd.jpg?s=128&g=1", "display_name": "astromonerd", "link": "https://stackoverflow.com/users/1305706/astromonerd"}, "reply_to_user": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1452121417, "post_id": 34644338, "comment_id": 57034874, "body": "Your description is accurate about what I am trying to achieve but don&#39;t know how."}], "answers": [{"tags": [], "owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1452121920, "creation_date": 1452121920, "answer_id": 34644625, "question_id": 34644338, "link": "https://stackoverflow.com/questions/34644338/how-do-i-compare-non-zero-values-over-multiple-2d-numpy-arrays/34644625#34644625", "title": "How do I compare non-zero values over multiple 2D numpy arrays?", "body": "<p>You <em>are</em> retaining only the indices where both tables have non-zero values - that's why when you index into <code>table1</code> and <code>table2</code> with <code>nonzero_i</code>, you return only the first row (which contains only non-zero values).</p>\n\n<p>This logic could be expressed more simply by constructing a <a href=\"http://docs.scipy.org/doc/numpy-1.10.1/user/basics.indexing.html#boolean-or-mask-index-arrays\" rel=\"nofollow\">boolean index array</a>:</p>\n\n<pre><code># boolean array that is True wherever both table1 &amp; table2 are nonzero\nvalid = (table1 != 0) &amp; (table2 != 0)\n\n# or alternatively:\n# valid = np.logical_and(table1, table2)\n</code></pre>\n\n<p>You could use this to index directly into <code>table1</code> and <code>table2</code>.</p>\n\n<hr>\n\n<p>It seems that what you <em>actually</em> want to do is to assign a value of 0 to any location where either <code>table1</code> or <code>table2</code> is 0.</p>\n\n<p>If you want a copy, you could use the <code>np.where(condition, val_where_true, val_where_false)</code> syntax of <a href=\"http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.where.html\" rel=\"nofollow\"><code>np.where</code></a>:</p>\n\n<pre><code>print(repr(np.where(valid, table1, 0)))\n# array([[1, 3],\n#        [0, 0]])\n\nprint(repr(np.where(valid, table2, 0)))\n# array([[2, 4],\n#        [0, 0]])\n</code></pre>\n\n<p>Or if you wanted to modify <code>table1</code> and <code>table2</code> in place, you could do</p>\n\n<pre><code>table1[~valid] = 0\n\ntable2[~valid] = 0\n</code></pre>\n\n<p>(<code>~</code> is the \"bitwise not\" operator, which inverts the boolean index array).</p>\n"}, {"tags": [], "owner": {"reputation": 1833, "user_id": 1064565, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/78fccb87609688340853e58676c0a7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Jamie", "link": "https://stackoverflow.com/users/1064565/jamie"}, "is_accepted": false, "score": 0, "last_activity_date": 1452122068, "creation_date": 1452122068, "answer_id": 34644652, "question_id": 34644338, "link": "https://stackoverflow.com/questions/34644338/how-do-i-compare-non-zero-values-over-multiple-2d-numpy-arrays/34644652#34644652", "title": "How do I compare non-zero values over multiple 2D numpy arrays?", "body": "<p>Get all indices where table 1 is 0:</p>\n\n<p><code>table1_zeros = np.where(table1[:,:] == 0)</code></p>\n\n<p>Get all indices where table 2 is 0:</p>\n\n<p><code>table2_zeros = np.where(table2[:,:] == 0)</code></p>\n\n<p>Set values on both tables to 0:</p>\n\n<pre><code>table1[table1_zeros] = 0\ntable1[table2_zeros] = 0\ntable2[table1_zeros] = 0\ntable2[table2_zeros] = 0\n</code></pre>\n\n<p>You could also do this in one step by using <code>tableX_tol_i</code> in place of <code>tableX_zeros</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5508573, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xp2QW44VoFU/AAAAAAAAAAI/AAAAAAAAAB0/Wq2_shcA7ug/photo.jpg?sz=128", "display_name": "Salih Celik", "link": "https://stackoverflow.com/users/5508573/salih-celik"}, "is_accepted": false, "score": -1, "last_activity_date": 1452126333, "creation_date": 1452126333, "answer_id": 34645375, "question_id": 34644338, "link": "https://stackoverflow.com/questions/34644338/how-do-i-compare-non-zero-values-over-multiple-2d-numpy-arrays/34645375#34645375", "title": "How do I compare non-zero values over multiple 2D numpy arrays?", "body": "<pre><code>table1 = np.array(([1,3],[5,7]))\ntable2  = np.array(([2,4],[6,8]))\ntable3  = np.zeros((2,2))\nfor k in range(0,2):\n    for j in range(0,2):\n        if table1[k][j] &gt; 5:\n            table1[k][j] = 0\n        if table1[k][j] &lt;= 5:\n            table1[k][j] = table1[k][j]\n        if table2[k][j] &gt; 6:\n            table2[k][j] = 0\n        if table2[k][j] &lt;= 6:\n            table2[k][j] = table2[k][j]\nx=0\ny=0\nfor k in range(0,2):\n    for j in range(0,2):\n        if table1[k][j] != 0:\n            table3[x,y] = table1[k][j] \n            x = x+1\nx=0\ny=1\nfor k in range(0,2):\n    for j in range(0,2):\n        if table2[k][j] != 0:\n            table3[x,y] = table2[k][j] \n            x = x+1   \nprint (table3)   \n</code></pre>\n\n<p>I think it is the simplest way, what you want. You can modify the code, if your array size changes.</p>\n"}], "owner": {"reputation": 767, "user_id": 1305706, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5Mjsd.jpg?s=128&g=1", "display_name": "astromonerd", "link": "https://stackoverflow.com/users/1305706/astromonerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 34644625, "answer_count": 3, "score": 0, "last_activity_date": 1452126333, "creation_date": 1452120512, "last_edit_date": 1452122025, "question_id": 34644338, "link": "https://stackoverflow.com/questions/34644338/how-do-i-compare-non-zero-values-over-multiple-2d-numpy-arrays", "title": "How do I compare non-zero values over multiple 2D numpy arrays?", "body": "<p>Let's say I have two 2D arrays filled with random integers. \nI want the first array to retain all indices with values leq 5, and the second array to retain all indices with values leq 6. For simplicity, all other indices can be set to zero. </p>\n\n<pre><code>table1 = np.array(([1,3],[5,7]))\ntable2  = np.array(([2,4],[6,8]))\n\nprint table1\nprint table2 ,'\\n'\n\ntable1_tol_i = np.where(table1[:,:] &gt; 5)\ntable1[table1_tol_i] = 0\nprint table1 \n\ntable2_tol_i = np.where(table2[:,:] &gt; 4)\ntable2[table2_tol_i] = 0\nprint table2, '\\n'\n\n[[1 3]\n [5 7]]\n[[2 4]\n [6 8]] \n\n[[1 3]\n [5 0]]\n[[2 4]\n [0 0]]\n</code></pre>\n\n<p>I then want to retain only the indices where both tables have non-zero values. I want</p>\n\n<pre><code>[[1 3]\n [0 0]]\n[[2 4]\n [0 0]]\n</code></pre>\n\n<p>I tried the following but it doesn't give me what I want</p>\n\n<pre><code>nonzero_i = (np.where(table1 != 0) and (np.where(table2 != 0 )))\nprint table1[nonzero_i]\nprint table2[nonzero_i]\n\n[1 3]\n[2 4]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 45878, "user_id": 180368, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0653dbf97ca1e0829fc3ae822d289f1?s=128&d=identicon&r=PG", "display_name": "Larry Lustig", "link": "https://stackoverflow.com/users/180368/larry-lustig"}, "edited": false, "score": 0, "creation_date": 1452120530, "post_id": 34644291, "comment_id": 57034520, "body": "Almost without question, it is possible.  What is it?  We haven&#39;t got the faintest idea how you&#39;re even reading the sensor."}, {"owner": {"reputation": 938, "user_id": 4951096, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/b61a485cb682ddf00bf756e3680b3c50?s=128&d=identicon&r=PG&f=1", "display_name": "lofcek", "link": "https://stackoverflow.com/users/4951096/lofcek"}, "edited": false, "score": 0, "creation_date": 1452120617, "post_id": 34644291, "comment_id": 57034552, "body": "How do you read output from sensor? Is there any way how to detect, that new number appears or just try to read number every two seconds (or shorter interval should be better)?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452120839, "post_id": 34644291, "comment_id": 57034641, "body": "When you read a number from the sensor and print it, do you also save it somewhere?  Like in a text file, or a python list?"}], "answers": [{"comments": [{"owner": {"reputation": 4011, "user_id": 989126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aeae36f54d0086fb3bb01229877b0a3?s=128&d=identicon&r=PG", "display_name": "brunsgaard", "link": "https://stackoverflow.com/users/989126/brunsgaard"}, "edited": false, "score": 0, "creation_date": 1452120835, "post_id": 34644386, "comment_id": 57034637, "body": "Python fail no one, do not initiate mutable objects in kwargs ;) Or are you actaully using it as a feature here."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "reply_to_user": {"reputation": 4011, "user_id": 989126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aeae36f54d0086fb3bb01229877b0a3?s=128&d=identicon&r=PG", "display_name": "brunsgaard", "link": "https://stackoverflow.com/users/989126/brunsgaard"}, "edited": false, "score": 0, "creation_date": 1452121472, "post_id": 34644386, "comment_id": 57034902, "body": "of coarse im using it as a feature ... (as I said his co-workers will hate him)"}], "tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 0, "last_activity_date": 1452120717, "creation_date": 1452120717, "answer_id": 34644386, "question_id": 34644291, "link": "https://stackoverflow.com/questions/34644291/if-number-patter-for-x-times/34644386#34644386", "title": "If number patter for x times", "body": "<pre><code>def read_sensor(data={}):\n    value = get_next_value()\n    data[\"sum\"] = (data.get(\"sum\",0)+(value&gt;400))*(value&gt;400)\n    return data[\"sum\"]\n\nlist(iter(read_sensor,5))\nprint \"OK I got 5 values all over 400\"\n</code></pre>\n\n<p>is one possible way ... I guess ... your co workers might hate you ...</p>\n"}], "owner": {"reputation": 7, "user_id": 5651831, "user_type": "registered", "profile_image": "https://graph.facebook.com/1276778542347870/picture?type=large", "display_name": "Augustas Jackevic", "link": "https://stackoverflow.com/users/5651831/augustas-jackevic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520401295, "creation_date": 1452120356, "last_edit_date": 1520401295, "question_id": 34644291, "link": "https://stackoverflow.com/questions/34644291/if-number-patter-for-x-times", "title": "If number patter for x times", "body": "<p>The situation is that I have a sensor that gives of numbers from the distance on 0cm to 700cm every 2 seconds.</p>\n\n<p>Is it possible to execute a code that reads the last five printed numbers and if they are all above 400cm for it to print something?</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 2, "creation_date": 1452120663, "post_id": 34644275, "comment_id": 57034566, "body": "If answer is neither <code>yes</code> or <code>no</code>, this function will return <code>None</code>."}], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 1, "last_activity_date": 1452121263, "last_edit_date": 1452121263, "creation_date": 1452120407, "answer_id": 34644308, "question_id": 34644275, "link": "https://stackoverflow.com/questions/34644275/how-do-i-check-to-see-if-a-function-returned-t-or-f-after-the-fact/34644308#34644308", "title": "How do I check to see if a function returned T or F after the fact?", "body": "<p>Just test for truth:</p>\n\n<pre><code>if yes_or_no(answer):\n    # user picked yes\nelse:\n    # user picked no\n</code></pre>\n\n<p>You may want to think about what should happen if <code>answer</code> is neither <code>'yes'</code> or <code>'no'</code> however. Perhaps you already have checked earlier on in your code this is the case, but you may as well just use:</p>\n\n<pre><code>def yes_or_no(answer):\n    return answer == 'yes'\n</code></pre>\n\n<p>and be done with it; now it'll <em>always</em> return a boolean. <code>True</code> in case of <code>'yes'</code>, and <code>False</code> otherwise, regardless.</p>\n"}, {"tags": [], "owner": {"reputation": 2602, "user_id": 5565170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d110c1241538fcf7c1fd6b6ebfa6153f?s=128&d=identicon&r=PG&f=1", "display_name": "Stidgeon", "link": "https://stackoverflow.com/users/5565170/stidgeon"}, "is_accepted": false, "score": 0, "last_activity_date": 1452120519, "creation_date": 1452120519, "answer_id": 34644342, "question_id": 34644275, "link": "https://stackoverflow.com/questions/34644275/how-do-i-check-to-see-if-a-function-returned-t-or-f-after-the-fact/34644342#34644342", "title": "How do I check to see if a function returned T or F after the fact?", "body": "<p>I agree with the other answer - it's a cleaner approach by far. But if you're determined to do something with your function:</p>\n\n<pre><code>def yes_or_no(answer):\n    if answer == 'yes':\n        return True\n    elif answer == 'no':\n        return False\n\nanswer = raw_input('yes or no?')\nx = yes_or_no(answer)\nprint x\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5753268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69dbddd867667346b7e68caf4914730a?s=128&d=identicon&r=PG&f=1", "display_name": "PenguinMasterOfDisguise", "link": "https://stackoverflow.com/users/5753268/penguinmasterofdisguise"}, "edited": false, "score": 0, "creation_date": 1452133148, "post_id": 34644974, "comment_id": 57038356, "body": "Why did someone downvote me? If it didn&#39;t work then tell me why at least."}], "tags": [], "owner": {"reputation": 1, "user_id": 5753268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69dbddd867667346b7e68caf4914730a?s=128&d=identicon&r=PG&f=1", "display_name": "PenguinMasterOfDisguise", "link": "https://stackoverflow.com/users/5753268/penguinmasterofdisguise"}, "is_accepted": false, "score": -1, "last_activity_date": 1452123829, "creation_date": 1452123829, "answer_id": 34644974, "question_id": 34644275, "link": "https://stackoverflow.com/questions/34644275/how-do-i-check-to-see-if-a-function-returned-t-or-f-after-the-fact/34644974#34644974", "title": "How do I check to see if a function returned T or F after the fact?", "body": "<p>Im really new here so i ight be totally wrong (or just posting a different, and probably worse, version of what someone else already said, but you could do:</p>\n\n<pre><code>yes_or_no = raw_input(\"say yes or no\")\n\nif yes_or_no == \"yes\":\n    variable = True\nelif yes_or_no == \"no\":\n    variable = False\n\nprint variable\n</code></pre>\n\n<p>If this is totally wrong or not what you were looking for then i am sorry.</p>\n"}, {"tags": [], "owner": {"reputation": 27454, "user_id": 1079110, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/07tNg.jpg?s=128&g=1", "display_name": "danijar", "link": "https://stackoverflow.com/users/1079110/danijar"}, "is_accepted": false, "score": 0, "last_activity_date": 1452125075, "last_edit_date": 1452125075, "creation_date": 1452124189, "answer_id": 34645036, "question_id": 34644275, "link": "https://stackoverflow.com/questions/34644275/how-do-i-check-to-see-if-a-function-returned-t-or-f-after-the-fact/34645036#34645036", "title": "How do I check to see if a function returned T or F after the fact?", "body": "<p>As others already pointed out, you should validate the user input. Never expect user input to match your expectations if they are not enforced. This code below uses a loop that keeps asking the user until the input matches <code>yes</code> or <code>no</code>.</p>\n\n<pre><code>def yes_or_no():\n    while True:\n        text = input('yes or no? ')\n        if text == 'yes':\n            return True\n        elif text == 'no':\n            return False\n        else:\n            print('Invalid input')\n</code></pre>\n\n<p>You can now assign the return value of the function to a new variable and use that inside of an if-statement.</p>\n\n<pre><code>answer = yes_or_no()\nif answer == True:\n    print('Answered yes')\nelse:\n    print('Answered no')\n</code></pre>\n\n<p>You can also directly use the return value inside of an if-statement.</p>\n\n<pre><code>if yes_or_no() == True:\n    print('Answered yes')\nelse:\n    print('Answered no')\n</code></pre>\n\n<p>The Python interpreter evaluates the condition of an if-statement to a boolean value, <code>True</code> or <code>False</code>. In the above case, the <code>==</code> is either true or false. But since <code>yes_or_no()</code> already returns a boolean, we can use it directly.</p>\n\n<pre><code>if yes_or_no():\n    print('Answered yes')\nelse:\n    print('Answered no')\n</code></pre>\n\n<p>Since your function returns a boolean value representing a confirmation of the user, you might also rename the function to something like <code>user_confirmed()</code>. Intuitively, <code>user_confirmed()</code> is something that can be true or false, while <code>yes_or_no()</code> can't since one of them always happens. The if-statement reads more natural then.</p>\n"}], "owner": {"reputation": 1, "user_id": 5754728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e0f9bf507a78a7b16dd3a7ee19e437?s=128&d=identicon&r=PG&f=1", "display_name": "Commodore Cam", "link": "https://stackoverflow.com/users/5754728/commodore-cam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1452125075, "creation_date": 1452120273, "last_edit_date": 1452121169, "question_id": 34644275, "link": "https://stackoverflow.com/questions/34644275/how-do-i-check-to-see-if-a-function-returned-t-or-f-after-the-fact", "title": "How do I check to see if a function returned T or F after the fact?", "body": "<p>Here is what I am working with:</p>\n\n<pre><code>def yes_or_no(answer):\n    if answer == 'yes':\n        return True\n    elif answer == 'no':\n        return False\n</code></pre>\n\n<p>How would I get some later code to check and see what this returns?\nAka what would I write?</p>\n"}, {"tags": ["python", "python-import", "restart", "pytest"], "answers": [{"comments": [{"owner": {"reputation": 21748, "user_id": 869951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/63uk6.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/869951/oliver"}, "edited": false, "score": 0, "creation_date": 1453327270, "post_id": 34892833, "comment_id": 57558538, "body": "Thanks, sounds promising so I will try that out, then I can vote/close"}], "tags": [], "owner": {"reputation": 4677, "user_id": 54056, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/81daa523dc7fbbd9c083121d564db86c?s=128&d=identicon&r=PG", "display_name": "pfctdayelise", "link": "https://stackoverflow.com/users/54056/pfctdayelise"}, "is_accepted": false, "score": 0, "last_activity_date": 1453270668, "last_edit_date": 1495540757, "creation_date": 1453270668, "answer_id": 34892833, "question_id": 34644252, "link": "https://stackoverflow.com/questions/34644252/testing-incompatible-configurations-with-py-test/34892833#34892833", "title": "testing incompatible configurations with py.test", "body": "<p>Does running py.test with the <code>--boxed</code> option solve your problem? (You need to <a href=\"https://github.com/pytest-dev/pytest-xdist#installation\" rel=\"nofollow noreferrer\">install the xdist plugin</a> for this.)</p>\n\n<p>There is also a detailed example of how it is used in this answer by the founder of pytest, hpk42: <a href=\"https://stackoverflow.com/a/11806997/54056\">https://stackoverflow.com/a/11806997/54056</a></p>\n"}], "owner": {"reputation": 21748, "user_id": 869951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/63uk6.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/869951/oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453270668, "creation_date": 1452120144, "question_id": 34644252, "link": "https://stackoverflow.com/questions/34644252/testing-incompatible-configurations-with-py-test", "title": "testing incompatible configurations with py.test", "body": "<p>Is there a way to have one py.test re-import classes? This is possible in Nose: each test module is imported only when it is run, so it can unload anything currently loaded, configure something at test module level, and any imports that appear after use the new configuration, and test code can use what has been imported. </p>\n\n<p>This does not work in py.test because all test modules are imported at discovery time, so any import-time configuration done at module level affects all subsequently imported tests. Is there a way to tell py.test to \"start afresh\", i.e. unload everything? Is there a way to test py.test to restart itself (spawn a child process and parent exits)?</p>\n\n<p>We could have two separate test suites (run py.test once on one folder, and run it a second time on another folder), but this is asking developers to remember to run two test suites every time they test (which can happen quite a bit if local mods affect features modified by others).</p>\n"}, {"tags": ["python", "django", "email"], "comments": [{"owner": {"reputation": 1217, "user_id": 1036433, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e71f4be853a25e54690d4079e0da11f1?s=128&d=identicon&r=PG", "display_name": "javapapo", "link": "https://stackoverflow.com/users/1036433/javapapo"}, "edited": false, "score": 0, "creation_date": 1452120191, "post_id": 34644180, "comment_id": 57034383, "body": "Can you explain your exact problem?"}, {"owner": {"reputation": 1, "user_id": 5708624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7155ec060e1b851dd29a27f7634aab03?s=128&d=identicon&r=PG&f=1", "display_name": "nouh huon", "link": "https://stackoverflow.com/users/5708624/nouh-huon"}, "reply_to_user": {"reputation": 1217, "user_id": 1036433, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e71f4be853a25e54690d4079e0da11f1?s=128&d=identicon&r=PG", "display_name": "javapapo", "link": "https://stackoverflow.com/users/1036433/javapapo"}, "edited": false, "score": 0, "creation_date": 1452120495, "post_id": 34644180, "comment_id": 57034505, "body": "@javapapo has instead sent an email by email , I want to send mass emails ."}, {"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 0, "creation_date": 1501014020, "post_id": 34644180, "comment_id": 77588073, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/24474316/sending-bulk-email-in-django\">Sending Bulk email in Django</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5708624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7155ec060e1b851dd29a27f7634aab03?s=128&d=identicon&r=PG&f=1", "display_name": "nouh huon", "link": "https://stackoverflow.com/users/5708624/nouh-huon"}, "edited": false, "score": 0, "creation_date": 1452124743, "post_id": 34644599, "comment_id": 57036074, "body": "thanks bro, please edit for me because i don&#39;t know how :)"}], "tags": [], "owner": {"reputation": 1307, "user_id": 4463175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b81d71c174e986329fe2d7e3fac26df?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Marinakis", "link": "https://stackoverflow.com/users/4463175/nick-marinakis"}, "is_accepted": false, "score": 0, "last_activity_date": 1452121807, "creation_date": 1452121807, "answer_id": 34644599, "question_id": 34644180, "link": "https://stackoverflow.com/questions/34644180/hellp-sending-bulk-email-in-django/34644599#34644599", "title": "hellp: Sending Bulk email in Django", "body": "<p>Try using <code>send_mail</code> or <code>send_mass_mail</code>, documented here: <a href=\"https://docs.djangoproject.com/en/1.9/topics/email/\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.9/topics/email/</a></p>\n\n<p>There's a parameter for an array of emails. <code>send_mass_mail</code> will even send all the mails using just one connection, which seems to be what you want.</p>\n"}], "owner": {"reputation": 1, "user_id": 5708624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7155ec060e1b851dd29a27f7634aab03?s=128&d=identicon&r=PG&f=1", "display_name": "nouh huon", "link": "https://stackoverflow.com/users/5708624/nouh-huon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 537, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1452121807, "creation_date": 1452119811, "question_id": 34644180, "link": "https://stackoverflow.com/questions/34644180/hellp-sending-bulk-email-in-django", "title": "hellp: Sending Bulk email in Django", "body": "<p>I have an application send mail via smtp. Its works fine and sends mail in 3-4 seconds.i want him to send with (bulk email).\nCan you please help me.</p>\n\n<p>views.py</p>\n\n<pre><code>    # -*- coding: utf-8 -*-\nfrom __future__ import absolute_import\n# import json\nimport smtplib\nfrom django.views.generic import TemplateView, View\nfrom django.views.generic.edit import UpdateView\nfrom django.shortcuts import get_object_or_404, redirect\nfrom django.core.urlresolvers import reverse_lazy\nfrom django.http import JsonResponse\nfrom django.contrib.auth.decorators import login_required\nfrom django.views.decorators.csrf import csrf_exempt\nfrom django.views.decorators.http import require_POST\nfrom braces.views import LoginRequiredMixin\nfrom .forms import ServerForm, SettingForm, MailerForm\nfrom .models import Server, Setting\nfrom .tasks import sender\n\n\nclass HomeView(LoginRequiredMixin, TemplateView):\n    template_name = 'core/home.jinja'\n\n    def get_context_data(self, **kwargs):\n        context = super(HomeView, self).get_context_data(**kwargs)\n        context['form'] = MailerForm(initial={'headers': '{}'})\n        return context\n\n    def post(self, request, *args, **kwargs):\n        context = self.get_context_data(**kwargs)\n        form = MailerForm(request.POST, request.FILES)\n        if form.is_valid():\n\n            sender_name = form.cleaned_data['sender_name']\n            sender_email = form.cleaned_data['sender_email']\n            mail_list = form.cleaned_data['mail_list']\n            subject = form.cleaned_data['subject']\n            encoding = form.cleaned_data['encoding']\n            headers = form.cleaned_data['headers']\n\n            message = form.cleaned_data['message']\n\n            servers = Server.objects.all()\n            configuration = Setting.objects.first()\n\n            email_number = configuration.email_number\n            time_delay = configuration.time_delay\n\n            # Parsing the email list and spliting it by configured emails\n            # number\n            recipients = [l.strip() for l in mail_list.readlines()]\n            splitted_emails = [list(recipients[i:i + email_number])\n                               for i in range(0, len(recipients), email_number)]\n\n            sender.delay(sender_name, sender_email, splitted_emails,\n                         servers, subject, message, encoding, headers, time_delay)\n\n        context['form'] = form\n        return self.render_to_response(context)\n</code></pre>\n\n<p>tasks.py </p>\n\n<pre><code> # -*- coding: utf-8 -*-\nfrom __future__ import absolute_import\nimport time\nimport uuid\nfrom django.core.mail import EmailMessage\nfrom django.template import Context, Template\nfrom celery.decorators import task\nfrom app.utils import get_next_server, smtp_connection\nfrom app.core.encoders import encode_base64, qpencode, encode_quopri\n# from django.core.mail import send_mail\n\n\n@task(name=\"Sending Emails\")\ndef sender(sender_name, sender_email, splitted_emails, servers, subject, message, encoding, headers, dt,):\n    s = get_next_server(servers)\n\n\n    for l in splitted_emails:\n        server = s.next()\n        print server.host, server.port\n        # if server.status:\n        message = Template(message).render(Context({'link': str(uuid.uuid4())}))\n        connection = smtp_connection(server)\n        for email in l:\n            print \"Sending to {}\".format(email)\n\n            mail = EmailMessage(\n                subject,\n                message,\n                \"{} &lt;{}&gt;\".format(sender_name, sender_email),\n                [email, ],\n                connection=connection,\n                headers=headers,\n            )\n\n\n            mail.content_subtype = 'html'\n            mail.send(fail_silently=False)\n        connection.close()\n</code></pre>\n\n<p>Can you please help me.\nCan you please help me.</p>\n"}, {"tags": ["python", "design-patterns", "matching"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 1, "creation_date": 1452119801, "post_id": 34644161, "comment_id": 57034198, "body": "The code you posted cannot produce the error message you indicate."}], "answers": [{"tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": true, "score": 3, "last_activity_date": 1452129845, "last_edit_date": 1452129845, "creation_date": 1452120042, "answer_id": 34644231, "question_id": 34644161, "link": "https://stackoverflow.com/questions/34644161/matching-lines-in-files-like-grep-f/34644231#34644231", "title": "Matching lines in files like grep -f", "body": "<p>You will want to read the file that contains the lines you want to match into memory; otherwise you will have to read the entire file being searched for each line of the file containing the search terms. We'll do this using a <code>set</code> because checking to see if something is in a <code>set</code> is very fast.</p>\n\n<pre><code>with open(\"f.txt\") as f:\n    terms = set(line.strip() for line in f)\n\nwith open(\"g.txt\") as g:\n    for line in g:\n       line = line.strip()\n       if line in terms:\n           print line\n</code></pre>\n\n<p>It doesn't matter in this case which file you consider the file containing the search terms and which you consider the file you're searching, since you are looking only for matches. To minimize memory use, you might choose the smaller one to be <code>f</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 5754681, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QTrcnFKj9uk/AAAAAAAAAAI/AAAAAAAAAB8/lonh0C6DwMw/photo.jpg?sz=128", "display_name": "Melissa Randel", "link": "https://stackoverflow.com/users/5754681/melissa-randel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "accepted_answer_id": 34644231, "answer_count": 1, "score": 2, "last_activity_date": 1452129845, "creation_date": 1452119710, "last_edit_date": 1452121656, "question_id": 34644161, "link": "https://stackoverflow.com/questions/34644161/matching-lines-in-files-like-grep-f", "title": "Matching lines in files like grep -f", "body": "<p>I am trying to find matching lines in two large files, much like grep -f.<br>\nLet's say the file f.txt contains 3 lines:</p>\n\n<pre><code>1  \n2  \n3  \n</code></pre>\n\n<p>and the file g.txt contains 3 lines:</p>\n\n<pre><code>3  \n4  \n5  \n</code></pre>\n\n<p>and I want to print the matching line(s):</p>\n\n<pre><code>3\n</code></pre>\n\n<p>This is what I have tried:</p>\n\n<pre><code>f=open('f.txt', 'r')  \ng=open('g.txt', 'r')  \ni=0  \nfor line in f:  \n    search = g.readlines()[i]  \n    if line.strip() == search :  \n        print line  \n    i += 1\n</code></pre>\n\n<p>This returns the error</p>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>'AttributeError: 'file' object has no attribute 'split'  </p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2167, "user_id": 2118067, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Q6M8I.jpg?s=128&g=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/2118067/erica"}, "edited": false, "score": 2, "creation_date": 1452119728, "post_id": 34644125, "comment_id": 57034158, "body": "Can you include the part of code that you&#39;re having trouble with in this question, and clarify what isn&#39;t working?"}, {"owner": {"reputation": 62, "user_id": 5754627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d2aa2325f640c7d78dfcdfa6a433a4b?s=128&d=identicon&r=PG&f=1", "display_name": "Marius", "link": "https://stackoverflow.com/users/5754627/marius"}, "reply_to_user": {"reputation": 2167, "user_id": 2118067, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Q6M8I.jpg?s=128&g=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/2118067/erica"}, "edited": false, "score": 0, "creation_date": 1452119856, "post_id": 34644125, "comment_id": 57034228, "body": "All money ammont is going to one bill"}, {"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 0, "creation_date": 1452119931, "post_id": 34644125, "comment_id": 57034267, "body": "<i>seriously</i> atrocious variable names. Try something descriptive!"}, {"owner": {"reputation": 2167, "user_id": 2118067, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Q6M8I.jpg?s=128&g=1", "display_name": "Erica", "link": "https://stackoverflow.com/users/2118067/erica"}, "edited": false, "score": 0, "creation_date": 1452119983, "post_id": 34644125, "comment_id": 57034289, "body": "If you <code>print sk</code> within each of your <code>while</code> loops, I suspect you&#39;ll notice quite quickly what isn&#39;t working. Part of the reason for homework is for you to work out why code isn&#39;t working, not just to get the right answer ;) <b>How can you keep <code>sk</code> from going to a negative balance?</b>"}, {"owner": {"reputation": 62, "user_id": 5754627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d2aa2325f640c7d78dfcdfa6a433a4b?s=128&d=identicon&r=PG&f=1", "display_name": "Marius", "link": "https://stackoverflow.com/users/5754627/marius"}, "edited": false, "score": 0, "creation_date": 1452120013, "post_id": 34644125, "comment_id": 57034298, "body": "Tried everything.... I&#39;m working all day with this code..."}, {"owner": {"reputation": 62, "user_id": 5754627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d2aa2325f640c7d78dfcdfa6a433a4b?s=128&d=identicon&r=PG&f=1", "display_name": "Marius", "link": "https://stackoverflow.com/users/5754627/marius"}, "edited": false, "score": 0, "creation_date": 1452120294, "post_id": 34644125, "comment_id": 57034432, "body": "Huh.. Why print is showing me 2 different numbers... Tired 560 and got 60 and -440. But still I don&#39;t get it..."}], "answers": [{"comments": [{"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 1, "creation_date": 1452154568, "post_id": 34644259, "comment_id": 57045631, "body": "That&#39;s a very fine explanation. In the next step you could use <a href=\"https://docs.python.org/3/library/functions.html#divmod\" rel=\"nofollow noreferrer\">divmod</a> for the integer division and the remainder."}], "tags": [], "owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "is_accepted": true, "score": 2, "last_activity_date": 1452121587, "last_edit_date": 1452121587, "creation_date": 1452120190, "answer_id": 34644259, "question_id": 34644125, "link": "https://stackoverflow.com/questions/34644125/all-cash-change-is-only-for-one-bill/34644259#34644259", "title": "All cash change is only for one bill", "body": "<p>First let's start with variable names that mean something; instead of <code>a</code> make it <code>fivehundreds</code>, instead of <code>b</code> make it <code>twohundreds</code>, etc.</p>\n\n<p>Now your code starts to look like</p>\n\n<pre><code>if amount &gt;= 500:\n    while 0 &lt; amount:\n        amount -= 500\n        fivehundreds += 1\n</code></pre>\n\n<p>which reads, \"while amount is greater than 0 repeatedly subtract five hundred\". So if amount is (for example) $37 - greater than $0 - you subtract, and now have one $500 bill and $-463 remaining. Instead, try</p>\n\n<pre><code>if 500 &lt;= amount:\n    while 500 &lt;= amount:\n        amount -= 500\n        fivehundreds += 1\n</code></pre>\n\n<p>I rearranged the <code>if</code> condition to emphasize that it is redundant - if the <code>if</code> fails, the <code>while</code> wouldn't have done anything anyway. Let's get rid of that <code>if</code>. The same is true of your initial <code>if 10 &lt;= sk</code>; if it fails, all of the <code>while</code> conditions would have failed anyway.</p>\n\n<p>Now, with a bit of rearranging, your code looks like</p>\n\n<pre><code>fivehundreds = 0\nwhile 500 &lt;= amount:\n    amount -= 500\n    fivehundreds += 1\nprint(\"500 USD x\", fivehundreds)\n\ntwohundreds = 0\nwhile 200 &lt;= amount:\n    amount -= 200\n    twohundreds += 1\nprint(\"200 USD x\", twohundreds)\n\nonehundreds = 0\nwhile 100 &lt;= amount:\n    amount -= 100\n    onehundreds += 1\nprint(\"100 USD x\", onehundreds)\n</code></pre>\n\n<p>... you may notice a certain amount of similarity in these operations! This is usually a sign that you should use a loop. We want to do this with 500s, then 200s, then 100s, etc...</p>\n\n<pre><code>for denom in [500, 200, 100, 50, 20, 10]:\n    num_bills = 0\n    while amount &gt;= denom:\n        amount -= denom\n        num_bills += 1\n    print(denom, \"USD x\", num_bills)\n</code></pre>\n\n<p>Now there is one more change to make: instead of using a <code>while</code> loop to inch our way up to the right number of bills, we can use the <code>//</code> (integer divison) and <code>%</code> (modulus) operators to get the answer directly. I am also going to make the <code>print</code> statement optional - if we have 0 $500 bills, we don't really need to be told about it.</p>\n\n<pre><code>amount = int(input(\"How many dollars? \"))\n\nprint(\"Bill list:\")\nfor denom in [500, 200, 100, 50, 20, 10]:\n    num_bills = amount // denom     # integer division\n    amount %= denom                 # get remainder\n    if num_bills:\n        print(\"{} USD x {}\".format(denom, num_bills))\n\nif amount:\n    print(\"Remainder: {} dollars\".format(amount))\n</code></pre>\n"}], "owner": {"reputation": 62, "user_id": 5754627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d2aa2325f640c7d78dfcdfa6a433a4b?s=128&d=identicon&r=PG&f=1", "display_name": "Marius", "link": "https://stackoverflow.com/users/5754627/marius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 34644259, "answer_count": 1, "score": -9, "last_activity_date": 1452121587, "creation_date": 1452119540, "last_edit_date": 1452120048, "question_id": 34644125, "link": "https://stackoverflow.com/questions/34644125/all-cash-change-is-only-for-one-bill", "title": "All cash change is only for one bill", "body": "<p>All money amount is going to one bill. Example: sum is 1550, but it's going to 4x500 bill with -50 balance. What I need to change in this code? Do I need to add percents where \"price\" is? Don't pay attention to how large bills are. I have tried to make <code>sk%10 == 0</code>, but it didn't worked.</p>\n\n<pre><code>a=0\nb=0\nc=0\nd=0\ne=0\nf=0\n\nsk=0\nsk=int(input(\"Enter money quanty: \"))\nif 10 &lt;= sk:\n    if sk &gt;= 500:\n        while 0 &lt; sk:\n            sk = sk - 500\n            a = a + 1\n    if sk &gt;= 200:\n        while 0 &lt; sk:\n            sk = sk - 200\n            b = b + 1\n    if sk &gt;= 100:\n        while 0 &lt; sk:\n            sk = sk - 100\n            c = c + 1\n\n    if sk &gt;= 50:\n        while 0 &lt; sk:\n            sk = sk - 50\n            d = d + 1\n\n    if sk &gt;= 20:\n        while 0 &lt; sk:\n            sk = sk - 20\n            e = e + 1\n\n    if sk &gt;= 10:\n        while 0 &lt; sk:\n            sk = sk - 10\n            f = f + 1\n    print(\"Bill list:\")\n    print(\"500 USD x\", a)\n    print(\"200 USD x\", b)\n    print(\"100 USD x\", c)\n    print(\"50 USD x\", d)\n    print(\"20 USD x\", e)\n    print(\"10 USD x\", f)\n\n\nelse:\n    print(\"Too small cash return\")\n</code></pre>\n"}, {"tags": ["python", "multithreading", "python-2.7", "python-requests"], "comments": [{"owner": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1452125922, "post_id": 34644111, "comment_id": 57036396, "body": "My best guess is that you&#39;re on a WiFi or otherwise swaying connection and that these threads are simply waiting for a handshake request to come in but none is ever received. You could set a timeout and kill off the threads to ensure resourced isn&#39;t getting wasted."}, {"owner": {"reputation": 6220, "user_id": 2216621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/10c8cf1cdc1383558bd4b78a19d1b524?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Watts", "link": "https://stackoverflow.com/users/2216621/rob-watts"}, "reply_to_user": {"reputation": 19728, "user_id": 929999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e38b941717ff6f519095ee81fcd09a7?s=128&d=identicon&r=PG", "display_name": "Torxed", "link": "https://stackoverflow.com/users/929999/torxed"}, "edited": false, "score": 0, "creation_date": 1452144142, "post_id": 34644111, "comment_id": 57041264, "body": "@Torxed not WiFi. It&#39;s actually running in AWS."}, {"owner": {"reputation": 3524, "user_id": 2178164, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4529c09c2cac2e476c9388b08a1c0346?s=128&d=identicon&r=PG", "display_name": "jumbopap", "link": "https://stackoverflow.com/users/2178164/jumbopap"}, "edited": false, "score": 0, "creation_date": 1452304972, "post_id": 34644111, "comment_id": 57124434, "body": "It&#39;s possible that library cannot run in a threadsafe manner. You should consider using a library designed for asynchronous web tasks, like Twisted or aiohttp."}, {"owner": {"reputation": 6220, "user_id": 2216621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/10c8cf1cdc1383558bd4b78a19d1b524?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Watts", "link": "https://stackoverflow.com/users/2216621/rob-watts"}, "edited": false, "score": 0, "creation_date": 1452312636, "post_id": 34644111, "comment_id": 57125584, "body": "<a href=\"http://docs.python-requests.org/en/latest/\" rel=\"nofollow noreferrer\">docs.python-requests.org/en/latest</a> says it is thread-safe"}], "owner": {"reputation": 6220, "user_id": 2216621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/10c8cf1cdc1383558bd4b78a19d1b524?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Watts", "link": "https://stackoverflow.com/users/2216621/rob-watts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1452294994, "creation_date": 1452119472, "last_edit_date": 1452294994, "question_id": 34644111, "link": "https://stackoverflow.com/questions/34644111/python-threads-stuck-at-ssl-sslwrap", "title": "Python threads stuck at _ssl.sslwrap", "body": "<p>I have a multithreaded Python (2.7.6) application that sometimes get stuck when calling <code>requests.post</code> (the library is at version 2.5.1). Here's what I get for the stack trace (found by calling <code>sys._current_frames()</code>):</p>\n\n<pre><code>\"/usr/local/lib/python2.7/dist-packages/requests/api.py\", line 99 in post\n  return request('post', url, data=data, json=json, **kwargs)\n\"/usr/local/lib/python2.7/dist-packages/requests/api.py\", line 49 in request\n  response = session.request(method=method, url=url, **kwargs)\n\"/usr/local/lib/python2.7/dist-packages/requests/sessions.py\", line 461 in request\n  resp = self.send(prep, **send_kwargs)\n\"/usr/local/lib/python2.7/dist-packages/requests/sessions.py\", line 573 in send\n  r = adapter.send(request, **kwargs)\n\"/usr/local/lib/python2.7/dist-packages/requests/adapters.py\", line 370 in send\n  timeout=timeout\n\"/usr/local/lib/python2.7/dist-packages/requests/packages/urllib3/connectionpool.py\", line 518 in urlopen\n  body=body, headers=headers)\n\"/usr/local/lib/python2.7/dist-packages/requests/packages/urllib3/connectionpool.py\", line 322 in _make_request\n  self._validate_conn(conn)\n\"/usr/local/lib/python2.7/dist-packages/requests/packages/urllib3/connectionpool.py\", line 727 in _validate_conn\n  conn.connect()\n\"/usr/local/lib/python2.7/dist-packages/requests/packages/urllib3/connection.py\", line 238 in connect\n  ssl_version=resolved_ssl_version)\n\"/usr/local/lib/python2.7/dist-packages/requests/packages/urllib3/util/ssl_.py\", line 254 in ssl_wrap_socket\n  return context.wrap_socket(sock)\n\"/usr/local/lib/python2.7/dist-packages/requests/packages/urllib3/util/ssl_.py\", line 80 in wrap_socket\n  return wrap_socket(socket, ciphers=self.ciphers, **kwargs)\n\"/usr/lib/python2.7/ssl.py\", line 487 in wrap_socket\n  ciphers=ciphers)\n\"/usr/lib/python2.7/ssl.py\", line 241 in __init__\n  ciphers)\n</code></pre>\n\n<p>Checking line 241 of ssl.py, I find it's the last line of this call:</p>\n\n<pre><code>self._sslobj = _ssl.sslwrap(self._sock, server_side,\n                            keyfile, certfile,\n                            cert_reqs, ssl_version, ca_certs,\n                            ciphers)\n</code></pre>\n\n<p>When threads get stuck here, it appears that they are stuck permanently. I was able to see 24 threads stuck here for about two days before I had to restart my application. I'm using <code>requests</code> quite a bit and the vast majority of the time there is no problem, but for some reason the 24 threads all got stuck within the space of a couple minutes. Does anyone know what is going on here?</p>\n\n<p>Note: I can't consistently reproduce it other than just letting it run and waiting for a batch of threads to eventually get stuck.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 4679, "user_id": 2199801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FvLFC.png?s=128&g=1", "display_name": "karlson", "link": "https://stackoverflow.com/users/2199801/karlson"}, "edited": false, "score": 3, "creation_date": 1452119335, "post_id": 34644051, "comment_id": 57034006, "body": "Please provide code that shows what you have tried so far."}, {"owner": {"reputation": 11, "user_id": 5754682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40357f5c6d4d809739307aa386bb9a28?s=128&d=identicon&r=PG&f=1", "display_name": "Sukalyan Roy", "link": "https://stackoverflow.com/users/5754682/sukalyan-roy"}, "reply_to_user": {"reputation": 4679, "user_id": 2199801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FvLFC.png?s=128&g=1", "display_name": "karlson", "link": "https://stackoverflow.com/users/2199801/karlson"}, "edited": false, "score": 0, "creation_date": 1452119640, "post_id": 34644051, "comment_id": 57034133, "body": "import pandas as pd  Location = r&#39;F:\\Analytics Materials\\files\\paymenttransactions.csv&#39; df = pd.read_csv(Location)                                                                          time = df[&#39;Creation Date&#39;].tolist() print (time)  I have been able to take the column and convert that into the list. A small portion of the list is  as below.  [&#39;11/12/2015 18:59&#39;, &#39;22/12/2015 07:42&#39;, &#39;17/12/2015 22:44&#39;, &#39;28/12/2015 22:50&#39;, &#39;17/12/2015 19:35&#39;, &#39;5/12/2015 18:46&#39;, &#39;8/12/2015 20:28&#39;, &#39;8/12/2015 0:36&#39;, &#39;27/12/2015 17:57&#39;, &#39;10/12/2015 12:19&#39;, &#39;10/12/2015 12:16&#39;"}, {"owner": {"reputation": 4679, "user_id": 2199801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FvLFC.png?s=128&g=1", "display_name": "karlson", "link": "https://stackoverflow.com/users/2199801/karlson"}, "edited": false, "score": 0, "creation_date": 1452119825, "post_id": 34644051, "comment_id": 57034212, "body": "You can always edit your question. It&#39;d be a lot nicer if you could add that example to the actual question instead. Code in comments is quite unreadable as you can see."}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1452120143, "post_id": 34644051, "comment_id": 57034351, "body": "<a href=\"http://www.python-excel.org/\" rel=\"nofollow noreferrer\">python-excel.org</a>"}, {"owner": {"reputation": 11, "user_id": 5754682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40357f5c6d4d809739307aa386bb9a28?s=128&d=identicon&r=PG&f=1", "display_name": "Sukalyan Roy", "link": "https://stackoverflow.com/users/5754682/sukalyan-roy"}, "edited": false, "score": 0, "creation_date": 1452120144, "post_id": 34644051, "comment_id": 57034353, "body": "Apologies for the inconvenience.I have pasted the code in the questions now."}], "answers": [{"tags": [], "owner": {"reputation": 4679, "user_id": 2199801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FvLFC.png?s=128&g=1", "display_name": "karlson", "link": "https://stackoverflow.com/users/2199801/karlson"}, "is_accepted": false, "score": 1, "last_activity_date": 1452121118, "last_edit_date": 1452121118, "creation_date": 1452120800, "answer_id": 34644401, "question_id": 34644051, "link": "https://stackoverflow.com/questions/34644051/extract-date-from-excel-and-append-it-in-a-list-using-python/34644401#34644401", "title": "Extract Date from excel and append it in a list using python", "body": "<p>You could extract the day of each timestamp like</p>\n\n<pre><code>from datetime import datetime\nimport pandas as pd\n\nlocation = r'F:\\Analytics Materials\\files\\paymenttransactions.csv'\ndf = pd.read_csv(location)\n\ntimestamps = df['Creation Date'].tolist()\ndates = [datetime.strptime(timestamp, '%d-%m-%Y %H:%M') for timestamp in timestamps]\ndays = [date.strftime('%d') for date in dates]\n\nprint(days)\n</code></pre>\n\n<p>The <code>'%d-%m-%Y %H:%M'</code>and <code>'%d'</code> bits are format specififers, that describe how your timestamp is formatted. See e.g. <a href=\"https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior\" rel=\"nofollow\">here</a> for a complete list of directives.</p>\n\n<p><code>datetime.strptime</code> parses a string into a <code>datetime</code>object using such a specifier. <code>dates</code>will thus hold a list of <code>datetime</code> instances instead of strings.</p>\n\n<p><code>datetime.strftime</code> does the opposite: It turns a <code>datetime</code> object into string, again using a format specifier. <code>%d</code> simply instructs <code>strftime</code> to only output the day of a date.</p>\n"}], "owner": {"reputation": 11, "user_id": 5754682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40357f5c6d4d809739307aa386bb9a28?s=128&d=identicon&r=PG&f=1", "display_name": "Sukalyan Roy", "link": "https://stackoverflow.com/users/5754682/sukalyan-roy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452121118, "creation_date": 1452119242, "last_edit_date": 1452120582, "question_id": 34644051, "link": "https://stackoverflow.com/questions/34644051/extract-date-from-excel-and-append-it-in-a-list-using-python", "title": "Extract Date from excel and append it in a list using python", "body": "<p>I have an column in excel which has dates in the format ''17-12-2015 19:35\". How can I extract the first 2 digits as integers and append it to a list? In this case I need to extract 17 and append it to a list. Can it be done using pandas also?</p>\n\n<p>Code thus far:</p>\n\n<pre><code>import pandas as pd\nLocation = r'F:\\Analytics Materials\\files\\paymenttransactions.csv'\ndf = pd.read_csv(Location)\ntime = df['Creation Date'].tolist()\nprint (time)\n</code></pre>\n"}, {"tags": ["python", "eclipse-rcp", "pydev"], "answers": [{"comments": [{"owner": {"reputation": 1669, "user_id": 2036650, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7f780c32382a9e1a96a367d362506359?s=128&d=identicon&r=PG", "display_name": "MidnightJava", "link": "https://stackoverflow.com/users/2036650/midnightjava"}, "edited": false, "score": 0, "creation_date": 1452181048, "post_id": 34652628, "comment_id": 57063475, "body": "Thanks for replying, Fabio. I discovered that the problem wasn&#39;t in the structure, but the way I was doing the import.  I was doing: &lt;import AAA&gt; And code completion was not working on &lt;AAA.BBB.xx&gt; (but the functions in xx are called successfully when the program runs.  When I did: &lt;from AAA.BBB import xx&gt; then the code completion on xx works, and it executes successfully.  Is this expected behavior? Is the syntax for importing modules more restrictive for predefs than for python in general?"}, {"owner": {"reputation": 1669, "user_id": 2036650, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7f780c32382a9e1a96a367d362506359?s=128&d=identicon&r=PG", "display_name": "MidnightJava", "link": "https://stackoverflow.com/users/2036650/midnightjava"}, "edited": false, "score": 0, "creation_date": 1452181201, "post_id": 34652628, "comment_id": 57063611, "body": "However, when I have the structure &lt;AAA.xx&gt; instead of &lt;AAA.BBB.xx&gt;, then I can use &lt;import AAA&gt; and code completion works for AAA.xx.  I have two modules with the same signature. One of them is in AAA, and the other is in AAA.BBB. So I&#39;m trying to add a predef for each of them, but the one with a nested package only works with the import syntax I mentioned above."}, {"owner": {"reputation": 23516, "user_id": 110451, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70fc26faedcbfc82344a0b347053aaa0?s=128&d=identicon&r=PG", "display_name": "Fabio Zadrozny", "link": "https://stackoverflow.com/users/110451/fabio-zadrozny"}, "reply_to_user": {"reputation": 1669, "user_id": 2036650, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7f780c32382a9e1a96a367d362506359?s=128&d=identicon&r=PG", "display_name": "MidnightJava", "link": "https://stackoverflow.com/users/2036650/midnightjava"}, "edited": false, "score": 1, "creation_date": 1452181274, "post_id": 34652628, "comment_id": 57063679, "body": "Actually, this is expected even for Python: you have to import the whole module to access it (some modules such as &#39;os.path&#39; don&#39;t need that because &#39;os&#39; puts &#39;path&#39; as an attribute, but in general, if you don&#39;t import the full module name, it won&#39;t be accessible even in regular python -- pypredef files should work the same way)."}, {"owner": {"reputation": 1669, "user_id": 2036650, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7f780c32382a9e1a96a367d362506359?s=128&d=identicon&r=PG", "display_name": "MidnightJava", "link": "https://stackoverflow.com/users/2036650/midnightjava"}, "edited": false, "score": 0, "creation_date": 1452182672, "post_id": 34652628, "comment_id": 57064726, "body": "OK thanks. Sorry, I&#39;m fairly new to python. I wonder why it seemed to work for me with a partial import. I just want to make sure the code completion doesn&#39;t have more restrictive requirements than python itself, so thanks for setting me straight on that."}, {"owner": {"reputation": 1669, "user_id": 2036650, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7f780c32382a9e1a96a367d362506359?s=128&d=identicon&r=PG", "display_name": "MidnightJava", "link": "https://stackoverflow.com/users/2036650/midnightjava"}, "edited": false, "score": 0, "creation_date": 1452192108, "post_id": 34652628, "comment_id": 57070913, "body": "On further reflection, it seems desirable for PyDev to support partial imports. My code works with partial imports because the submodules are imported within the parent module. So I have to restrict the user&#39;s usage of import if they want custom code completion. I created a feature request for this at <a href=\"https://sw-brainwy.rhcloud.com/tracker/PyDev/\" rel=\"nofollow noreferrer\">sw-brainwy.rhcloud.com/tracker/PyDev</a> (inbox item 647)."}, {"owner": {"reputation": 1669, "user_id": 2036650, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7f780c32382a9e1a96a367d362506359?s=128&d=identicon&r=PG", "display_name": "MidnightJava", "link": "https://stackoverflow.com/users/2036650/midnightjava"}, "edited": false, "score": 0, "creation_date": 1452203011, "post_id": 34652628, "comment_id": 57077169, "body": "Per Fabio&#39;s instructions on the PyDev ticket I opened, partial module import is supported by defining a pypredef file for each package level. So AAA.pypredef contians &quot;from AAA import BBB&quot;, and AAA.BBB.pypredef contains &quot;from AAA.BBB import xx&quot;. Then code completion for AAA.BBB.xx works after import AAA."}], "tags": [], "owner": {"reputation": 23516, "user_id": 110451, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70fc26faedcbfc82344a0b347053aaa0?s=128&d=identicon&r=PG", "display_name": "Fabio Zadrozny", "link": "https://stackoverflow.com/users/110451/fabio-zadrozny"}, "is_accepted": true, "score": 1, "last_activity_date": 1452162068, "creation_date": 1452162068, "answer_id": 34652628, "question_id": 34644049, "link": "https://stackoverflow.com/questions/34644049/pydev-predefined-module-not-recognized-beyond-2-level-package-structure/34652628#34652628", "title": "PyDeV Predefined Module Not recognized beyond 2 -level package structure", "body": "<p>I've just checked it here and the structure:</p>\n\n<pre><code>AAA\\\n\n  |----__init__.py\n  |\n  |----BBB\\\n  |      |\n  |      |---__init__.py\n  |\nAAA.xx.pypredef \nAAA.BBB.xx.pypredef \n</code></pre>\n\n<p>does work for me (given that the parent folder of AAA, AAA.xx.pypredef and AAA.BBB.xx.pypredef is added to the predefined completions at pydev > interpreters > python interpreter > select interpreter > predefined).</p>\n\n<p>One thing to note is that the information won't be updated if you just change the .pypredef files... you have to go to the interpreters preferences page (pydev > interpreters > python interpreter), press 'apply' and select which interpreters should be restored (at that point it'll reparse the .pypredef files).</p>\n"}], "owner": {"reputation": 1669, "user_id": 2036650, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7f780c32382a9e1a96a367d362506359?s=128&d=identicon&r=PG", "display_name": "MidnightJava", "link": "https://stackoverflow.com/users/2036650/midnightjava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 34652628, "answer_count": 1, "score": 0, "last_activity_date": 1452162068, "creation_date": 1452119229, "question_id": 34644049, "link": "https://stackoverflow.com/questions/34644049/pydev-predefined-module-not-recognized-beyond-2-level-package-structure", "title": "PyDeV Predefined Module Not recognized beyond 2 -level package structure", "body": "<p>I'm programmatically adding predefined modules to my interpreter in PyDev. It works for a module with a single level package structure, but not for one with two levels.</p>\n\n<p>This works</p>\n\n<pre><code>AAA\\\n  |---__init__.py\n  |\nAAA.xx.pypredef\n</code></pre>\n\n<p>from AAA import xx #code completion for AAA.xx.pypredef works</p>\n\n<p>This does not work</p>\n\n<pre><code>AAA\\\n  |----__init__.py\n  |\n  |----BBB\\\n  |      |\n  |      |---__init__.py\n  |\nAAA.BBB.xx.pypredef \n</code></pre>\n\n<p>from AAA.BBB import xx #code completion for AAA.BBB.xx.pypredef does not work</p>\n\n<p>I also tried</p>\n\n<pre><code>AAA\\\n  |----__init__.py\n  |\n  |---BBB\\\n        |---__init__.py\n  |\n  |BBB.xx.pypredef\n</code></pre>\n\n<p>and</p>\n\n<pre><code>AAA\\\n  |----__init__.py\n  |\n  |---BBB\\\n        |---__init__.py\n        |xx.pypredef \n</code></pre>\n\n<p>In all cases from AAA.BBB import xx code completion does not work</p>\n\n<p>WWhat is the proper structure needed to enable me to provide code completion for module AA.BB.xx?</p>\n"}, {"tags": ["python", "python-3.x", "iterator", "itertools"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1452119168, "post_id": 34644010, "comment_id": 57033912, "body": "Did you read <a href=\"https://docs.python.org/2/library/itertools.html#itertools.groupby\" rel=\"nofollow noreferrer\">the documentation</a>?"}, {"owner": {"reputation": 28095, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 3, "creation_date": 1452119576, "post_id": 34644010, "comment_id": 57034102, "body": "@BrenBarn obviously not thoroughly enough. You mean this section? <i>&quot;when the groupby() object is advanced, the previous group is no longer visible. So, if that data is needed later, it should be stored as a list&quot;</i>"}, {"owner": {"reputation": 28095, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1452119823, "post_id": 34644010, "comment_id": 57034210, "body": "@BrenBarn Then it must be essentially this: <a href=\"http://stackoverflow.com/q/16598244/1025391\">stackoverflow.com/q/16598244/1025391</a> - But wait - that&#39;s still somehow different. I need to think about it..."}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1452120643, "post_id": 34644010, "comment_id": 57034558, "body": "why not yield the values in each group as a list, as mentioned in the code?"}, {"owner": {"reputation": 28095, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "reply_to_user": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1452121062, "post_id": 34644010, "comment_id": 57034729, "body": "@Pynchia I actually do that, but I thought I should try to understand why I have to do that."}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1452121912, "post_id": 34644010, "comment_id": 57035075, "body": "you have to do that because <code>groupby</code> gives you the values in each group as an iterator, which can be consumed (i.e. iterated on) once only. A <code>list</code> on the other hand is an iterable which generates a new iterator when iterated on. Try doing <code>lst=[1,2,3]; iter(lst) is lst</code>"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 1, "creation_date": 1452143810, "post_id": 34644010, "comment_id": 57041149, "body": "unrelated: use <code>x.month</code> instead of <code>x.strftime(&#39;%B&#39;)</code> to group by month and <a href=\"http://stackoverflow.com/q/2600775/4279\">use <code>x.isocalendar()[1]</code> for a week number</a>."}], "answers": [{"comments": [{"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1452143959, "post_id": 34644411, "comment_id": 57041195, "body": "the iterators are consumed (if they are not exhausted yet) when you call <code>next()</code> (explicitly or implicitly e.g., via a <code>for</code>-loop) on the <code>groupby()</code> object. When the code later accesses the returned iterators out of order they are already exhausted."}], "tags": [], "owner": {"reputation": 28095, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "is_accepted": true, "score": 3, "last_activity_date": 1452155262, "last_edit_date": 1452155262, "creation_date": 1452120848, "answer_id": 34644411, "question_id": 34644010, "link": "https://stackoverflow.com/questions/34644010/iterator-produced-by-itertools-groupby-is-consumed-unexpectedly/34644411#34644411", "title": "Iterator produced by itertools.groupby() is consumed unexpectedly", "body": "<p>As the docs state (<a href=\"https://docs.python.org/3.4/library/itertools.html#itertools.groupby\" rel=\"nofollow\">c.f.</a>): </p>\n\n<blockquote>\n  <p>when the groupby() object is advanced, the previous group is no longer visible. So, if that data is needed later, it should be stored as a list</p>\n</blockquote>\n\n<p>That means the iterators are consumed, when the code later accesses the returned iterators out of order, i.e., when the groupby is actually iterated. The iteration happens out of order because of the chunking and interleaving that is done here.</p>\n\n<p>We observe this specific pattern (i.e., only the last column is fully displayed) because of the way we iterate. That is:</p>\n\n<ol>\n<li><p>The month names for the first line are printed. Thereby the iterators for up to the last column's month are consumed (and their content discarded). The groupby() object produces the last column's month name only after the first columns' data.</p></li>\n<li><p>We print the first week line. Thereby the already exhausted iterators for the first columns are filled up automatically using the default value passed to <code>zip_longest()</code>. Only the last column still provides actual data.</p></li>\n<li><p>The same happens for the next lines of month names.</p></li>\n</ol>\n"}], "owner": {"reputation": 28095, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 1, "accepted_answer_id": 34644411, "answer_count": 1, "score": 2, "last_activity_date": 1452240364, "creation_date": 1452119065, "last_edit_date": 1452240364, "question_id": 34644010, "link": "https://stackoverflow.com/questions/34644010/iterator-produced-by-itertools-groupby-is-consumed-unexpectedly", "title": "Iterator produced by itertools.groupby() is consumed unexpectedly", "body": "<p>I have written a small program based on iterators to display a multicolumn calendar.</p>\n\n<p>In that code I am using <code>itertools.groupby</code> to group the dates by month by the function <code>group_by_months()</code>. There I yield the month name and the grouped dates as a list for every month.  However, when I let that function directly return the grouped dates as an iterator (instead of a list) the program leaves the days of all but the last column blank.</p>\n\n<p>I can't figure out why that might be. Am I using groupby wrong? Can anyone help me to spot the place where the iterator is consumed or its output is ignored? Why is it especially the last column that \"survives\"?</p>\n\n<p>Here's the code:</p>\n\n<pre><code>import datetime\nfrom itertools import zip_longest, groupby\n\ndef grouper(iterable, n, fillvalue=None):\n    \"\"\"\\\n    copied from the docs:\n    https://docs.python.org/3.4/library/itertools.html#itertools-recipes\n    \"\"\"\n    args = [iter(iterable)] * n\n    return zip_longest(*args, fillvalue=fillvalue)\n\ndef generate_dates(start_date, end_date, step=datetime.timedelta(days=1)):\n    while start_date &lt; end_date:\n        yield start_date\n        start_date += step\n\ndef group_by_months(seq):\n    for k,v in groupby(seq, key=lambda x:x.strftime(\"%B\")):\n        yield k, v # Why does it only work when list(v) is yielded here?\n\ndef group_by_weeks(seq):\n    yield from groupby(seq, key=lambda x:x.strftime(\"%2U\"))\n\ndef format_month(month, dates_of_month):\n    def format_week(weeknum, dates_of_week):\n        def format_day(d):\n            return d.strftime(\"%3e\")\n        weekdays = {d.weekday(): format_day(d) for d in dates_of_week}\n        return \"{0} {7} {1} {2} {3} {4} {5} {6}\".format(\n            weeknum, *[weekdays.get(i, \"   \") for i in range(7)])\n    yield \"{:^30}\".format(month)\n    weeks = group_by_weeks(dates_of_month)\n    yield from map(lambda x:format_week(*x), weeks)\n\nstart, end = datetime.date(2016,1,1), datetime.date(2017,1,1)\ndates = generate_dates(start, end)\nmonths = group_by_months(dates)\nformatted_months = map(lambda x: (format_month(*x)), months)\nncolumns = 3\nquarters = grouper(formatted_months, ncolumns)\ninterleaved = map(lambda x: zip_longest(*x, fillvalue=\" \"*30), quarters)\nformatted = map(lambda x: \"\\n\".join(map(\"   \".join, x)), interleaved)\nlist(map(print, formatted))\n</code></pre>\n\n<p>This is the failing output:</p>\n\n<pre><code>           January                          February                          March             \n                                                                  09           1   2   3   4   5\n                                                                  10   6   7   8   9  10  11  12\n                                                                  11  13  14  15  16  17  18  19\n                                                                  12  20  21  22  23  24  25  26\n                                                                  13  27  28  29  30  31        \n            April                             May                              June             \n                                                                  22               1   2   3   4\n                                                                  23   5   6   7   8   9  10  11\n                                                                  24  12  13  14  15  16  17  18\n                                                                  25  19  20  21  22  23  24  25\n                                                                  26  26  27  28  29  30        \n             July                            August                         September           \n                                                                  35                   1   2   3\n                                                                  36   4   5   6   7   8   9  10\n                                                                  37  11  12  13  14  15  16  17\n                                                                  38  18  19  20  21  22  23  24\n                                                                  39  25  26  27  28  29  30    \n           October                          November                         December           \n                                                                  48                   1   2   3\n                                                                  49   4   5   6   7   8   9  10\n                                                                  50  11  12  13  14  15  16  17\n                                                                  51  18  19  20  21  22  23  24\n                                                                  52  25  26  27  28  29  30  31\n</code></pre>\n\n<p>This is the expected output:</p>\n\n<pre><code>           January                          February                          March             \n00                       1   2   05       1   2   3   4   5   6   09           1   2   3   4   5\n01   3   4   5   6   7   8   9   06   7   8   9  10  11  12  13   10   6   7   8   9  10  11  12\n02  10  11  12  13  14  15  16   07  14  15  16  17  18  19  20   11  13  14  15  16  17  18  19\n03  17  18  19  20  21  22  23   08  21  22  23  24  25  26  27   12  20  21  22  23  24  25  26\n04  24  25  26  27  28  29  30   09  28  29                       13  27  28  29  30  31        \n05  31                                                                                          \n            April                             May                              June             \n13                       1   2   18   1   2   3   4   5   6   7   22               1   2   3   4\n14   3   4   5   6   7   8   9   19   8   9  10  11  12  13  14   23   5   6   7   8   9  10  11\n15  10  11  12  13  14  15  16   20  15  16  17  18  19  20  21   24  12  13  14  15  16  17  18\n16  17  18  19  20  21  22  23   21  22  23  24  25  26  27  28   25  19  20  21  22  23  24  25\n17  24  25  26  27  28  29  30   22  29  30  31                   26  26  27  28  29  30        \n             July                            August                         September           \n26                       1   2   31       1   2   3   4   5   6   35                   1   2   3\n27   3   4   5   6   7   8   9   32   7   8   9  10  11  12  13   36   4   5   6   7   8   9  10\n28  10  11  12  13  14  15  16   33  14  15  16  17  18  19  20   37  11  12  13  14  15  16  17\n29  17  18  19  20  21  22  23   34  21  22  23  24  25  26  27   38  18  19  20  21  22  23  24\n30  24  25  26  27  28  29  30   35  28  29  30  31               39  25  26  27  28  29  30    \n31  31                                                                                          \n           October                          November                         December           \n39                           1   44           1   2   3   4   5   48                   1   2   3\n40   2   3   4   5   6   7   8   45   6   7   8   9  10  11  12   49   4   5   6   7   8   9  10\n41   9  10  11  12  13  14  15   46  13  14  15  16  17  18  19   50  11  12  13  14  15  16  17\n42  16  17  18  19  20  21  22   47  20  21  22  23  24  25  26   51  18  19  20  21  22  23  24\n43  23  24  25  26  27  28  29   48  27  28  29  30               52  25  26  27  28  29  30  31\n</code></pre>\n"}, {"tags": ["python", "linear-algebra", "numerical-methods", "eigenvalue"], "comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 3, "creation_date": 1452119383, "post_id": 34643993, "comment_id": 57034028, "body": "Is your matrix sparse (<a href=\"https://en.wikipedia.org/wiki/Sparse_matrix\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Sparse_matrix</a>)?  I hope so!"}, {"owner": {"reputation": 18120, "user_id": 242848, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ba9d86de42b1555f3879adbfa8b774ae?s=128&d=identicon&r=PG", "display_name": "brainjam", "link": "https://stackoverflow.com/users/242848/brainjam"}, "edited": false, "score": 0, "creation_date": 1452119407, "post_id": 34643993, "comment_id": 57034037, "body": "<a href=\"http://docs.scipy.org/doc/scipy-0.16.0/reference/generated/scipy.sparse.linalg.eigs.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/scipy-0.16.0/reference/generated/&hellip;</a>"}, {"owner": {"reputation": 43, "user_id": 5754617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h91Tl.jpg?s=128&g=1", "display_name": "MeNoureddine", "link": "https://stackoverflow.com/users/5754617/menoureddine"}, "edited": false, "score": 0, "creation_date": 1452119514, "post_id": 34643993, "comment_id": 57034075, "body": "no it&#39;s not sparse :( that&#39;s the problem."}, {"owner": {"reputation": 43, "user_id": 5754617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h91Tl.jpg?s=128&g=1", "display_name": "MeNoureddine", "link": "https://stackoverflow.com/users/5754617/menoureddine"}, "reply_to_user": {"reputation": 18120, "user_id": 242848, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ba9d86de42b1555f3879adbfa8b774ae?s=128&d=identicon&r=PG", "display_name": "brainjam", "link": "https://stackoverflow.com/users/242848/brainjam"}, "edited": false, "score": 0, "creation_date": 1452119770, "post_id": 34643993, "comment_id": 57034177, "body": "Thank you @brainjam but this uses RAM too, and my problem is with memory usage, such a matrix can&#39;t be loaded on RAM (in my knowledge)"}, {"owner": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "edited": false, "score": 0, "creation_date": 1452128883, "post_id": 34643993, "comment_id": 57037156, "body": "Doesn&#39;t your OS have swap space? Have you tried it? If so then what is the error?"}, {"owner": {"reputation": 43, "user_id": 5754617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h91Tl.jpg?s=128&g=1", "display_name": "MeNoureddine", "link": "https://stackoverflow.com/users/5754617/menoureddine"}, "reply_to_user": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "edited": false, "score": 0, "creation_date": 1452199354, "post_id": 34643993, "comment_id": 57075094, "body": "@GuyCoder yes it has (8Gb), but how can i explicitly use it? there is no specific error but it&#39;s consuming a lot of Memory till the OS freezes. (I&#39;m using Linux)"}, {"owner": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "edited": false, "score": 0, "creation_date": 1452199905, "post_id": 34643993, "comment_id": 57075452, "body": "Linux is not my primary OS, but the concept should be same. It is there by default and automatically used. However in rare cases you need to increase the size of the reserved disk space if you run out; that is OS specific. Start with <a href=\"http://www.tldp.org/LDP/sag/html/using-swap.html\" rel=\"nofollow noreferrer\">Using a swap space</a>.  I do know that on Linux you can also use the resource monitor and on my Ubuntu it does show how much RAM and how much swap space are being used in real time. At this point I can not give more details because it would be guessing and not from actual usage."}, {"owner": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "edited": false, "score": 0, "creation_date": 1452200049, "post_id": 34643993, "comment_id": 57075552, "body": "I just calculated 1M x 1M and realized you will need 1T to hold that. I have never seen a swap space that large, but it should work in theory."}, {"owner": {"reputation": 43, "user_id": 5754617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h91Tl.jpg?s=128&g=1", "display_name": "MeNoureddine", "link": "https://stackoverflow.com/users/5754617/menoureddine"}, "edited": false, "score": 0, "creation_date": 1452200944, "post_id": 34643993, "comment_id": 57076086, "body": "I am getting MemoryError,  <code>&gt;&gt;&gt; a = np.random.randint(0, 2, (100000,100000)) Traceback (most recent call last):   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;   File &quot;mtrand.pyx&quot;, line 953, in mtrand.RandomState.randint (numpy&#47;random&#47;mtrand&#47;mtrand.c:10897) MemoryError </code>  although the swap is free (90%)."}, {"owner": {"reputation": 43, "user_id": 5754617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h91Tl.jpg?s=128&g=1", "display_name": "MeNoureddine", "link": "https://stackoverflow.com/users/5754617/menoureddine"}, "reply_to_user": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "edited": false, "score": 0, "creation_date": 1452201999, "post_id": 34643993, "comment_id": 57076636, "body": "oups! yeah that was a bad exemple to test on cauz it needed more than RAM+SWAP that i have, so yes @GuyCoder i think I should increase the SWAP size then try again. Thank you :)"}], "answers": [{"tags": [], "owner": {"reputation": 21891, "user_id": 1243762, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b9b83cf6ca76699d7abfbba07f4675a3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy Coder", "link": "https://stackoverflow.com/users/1243762/guy-coder"}, "is_accepted": true, "score": 2, "last_activity_date": 1452203381, "creation_date": 1452203381, "answer_id": 34665794, "question_id": 34643993, "link": "https://stackoverflow.com/questions/34643993/finding-eigenvalues-of-a-very-huge-matrix/34665794#34665794", "title": "finding eigenvalues of a very huge matrix", "body": "<p>Increase the size of your swap file.</p>\n\n<p>See: \n<a href=\"http://www.tldp.org/LDP/sag/html/vm-intro.html\" rel=\"nofollow noreferrer\">What is virtual memory?</a><br>\n<a href=\"http://www.tldp.org/LDP/sag/html/swap-space.html\" rel=\"nofollow noreferrer\">Creating a swap space</a><br>\n<a href=\"http://www.tldp.org/LDP/sag/html/using-swap.html\" rel=\"nofollow noreferrer\">Using a swap space</a>  </p>\n\n<p>Also systems typically report on in real time in the resource monitor.</p>\n\n<p>For Ubuntu</p>\n\n<p>[<img src=\"https://i.stack.imgur.com/3Rrbb.png\" alt=\"Example of resource monitor showing swap space usage\">]</p>\n"}], "owner": {"reputation": 43, "user_id": 5754617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h91Tl.jpg?s=128&g=1", "display_name": "MeNoureddine", "link": "https://stackoverflow.com/users/5754617/menoureddine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 34665794, "answer_count": 1, "score": 2, "last_activity_date": 1577314962, "creation_date": 1452118988, "last_edit_date": 1452128078, "question_id": 34643993, "link": "https://stackoverflow.com/questions/34643993/finding-eigenvalues-of-a-very-huge-matrix", "title": "finding eigenvalues of a very huge matrix", "body": "<p>I am trying to implement spectral clustering algorithm for a community detection in graph problem.</p>\n\n<p>I have very huge matrix to calculates its Eigenvectors, matrix of > 1Mx1M.</p>\n\n<p>Numpy and Scipy needs the matrix to be on memory to calculate it, which is impossible in my case.</p>\n\n<p>Is there any other lib or package that calculates Eigenvectors and values on disk instead of memory (just like <a href=\"http://www.h5py.org/\" rel=\"nofollow\">HDF5</a> allows us to store and manipulate data on disk)?</p>\n\n<p>Or is there any solution you can suggest?</p>\n"}, {"tags": ["python", "django", "django-authentication"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452119340, "post_id": 34643976, "comment_id": 57034010, "body": "Why are you returning <code>HttpResponse(request.user)</code>?  What effect do you expect this to have?"}, {"owner": {"reputation": 57, "user_id": 3925972, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/100001909485149/picture?type=large", "display_name": "Rajat Sharma", "link": "https://stackoverflow.com/users/3925972/rajat-sharma"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452119716, "post_id": 34643976, "comment_id": 57034153, "body": "just want to know whether user is logged in or not"}], "answers": [{"tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 2, "last_activity_date": 1452123767, "last_edit_date": 1452123767, "creation_date": 1452119245, "answer_id": 34644053, "question_id": 34643976, "link": "https://stackoverflow.com/questions/34643976/django-custom-authentication-doesnt-redirect-as-expected/34644053#34644053", "title": "Django custom authentication doesn&#39;t redirect as expected", "body": "<p><a href=\"https://docs.djangoproject.com/en/1.9/ref/request-response/#httpresponse-objects\" rel=\"nofollow\"><code>HttpResponse</code></a> expects a string, or an iterable. You are getting the error because you have passed the <code>user</code> instance. </p>\n\n<pre><code>return HttpResponse(request.user)\n</code></pre>\n\n<p>Django tries to iterate over <code>request.user</code> and you get the error because model instances are not iterable.</p>\n\n<p>You could change the view to return the username instead.</p>\n\n<pre><code>return HttpResponse(request.user.username)\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 3925972, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/100001909485149/picture?type=large", "display_name": "Rajat Sharma", "link": "https://stackoverflow.com/users/3925972/rajat-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 34644053, "answer_count": 1, "score": 1, "last_activity_date": 1452123767, "creation_date": 1452118917, "last_edit_date": 1452119483, "question_id": 34643976, "link": "https://stackoverflow.com/questions/34643976/django-custom-authentication-doesnt-redirect-as-expected", "title": "Django custom authentication doesn&#39;t redirect as expected", "body": "<p>from Signin When i redirect to Logged_IN to get request.user it gives me error <strong>'User' object is not iterable</strong>.i think login request is not passed to Logged_IN.\n<br>\nBut it works well with in Signin View.It responses request.user.\n<br><br>\nIn Index it request.user.is_authenticated() is always true even when i dont signed in.\nAlso I have created custom user instead of using default user.\n<br>\n<br>\nHere is my views.py</p>\n\n<pre><code>from django.shortcuts import render,render_to_response, redirect\nfrom django.template import RequestContext\nfrom django.contrib.auth import authenticate\nfrom signup.forms import AuthenticationForm, RegistrationForm\nfrom django.contrib.auth import login , logout\n\n# Create your views here.\nfrom django.http import HttpResponse,HttpResponseRedirect,Http404\nfrom django.core.urlresolvers import reverse\nfrom .models import User\nfrom django.contrib.auth.decorators import login_required\n\n#@login_required\ndef Index(request):\n    if request.user.is_authenticated():\n        return HttpResponse(\"Welcome\")\n    else:\n        return render(request,'signup/index.html',{'form':AuthenticationForm,})\n\ndef Signin(request):\n    if request.method == 'POST':\n        form = AuthenticationForm(data=request.POST)\n        if form.is_valid():\n            user = authenticate(username=request.POST['username'], password=request.POST['password'])\n            if user is not None:\n                if user.is_active:\n                    login(request, user)\n                    #return HttpResponse(request.user)\n                    return HttpResponseRedirect(reverse('signup:logged_in',args=()))\n    else:\n        form = AuthenticationForm()\n\ndef Signup(request):\n    return render(request,'signup/signup.html',{'form': RegistrationForm,})\n\n\ndef Logged_IN(request):\n    if request.user.is_authenticated():\n        return HttpResponse(request.user)\n        #return render(request,'signup/user.html',{})\n</code></pre>\n\n<p>Here is my backends.py</p>\n\n<pre><code>from django.conf import settings\nfrom django.utils.translation import ugettext_lazy as _\n#from django.contrib.auth.models import  check_password\nfrom django.contrib.auth.models import User\nfrom .models import User\n\nclass UserAuthBackend(object):\n    \"\"\"\n    A custom authentication backend. Allows users to log in using their username.\n    \"\"\"\n    def authenticate(self, username=None, password=None):\n        \"\"\"\n        Authentication method\n        \"\"\"\n        try:\n            user = User.objects.get(username=username)\n            if user.check_password(password):\n                return user\n        except User.DoesNotExist:\n            return None\n\n    def get_user(self, user_id):\n        try:\n            user = User.objects.get(pk=user_id)\n            if user.is_active:\n                return user\n            return None\n        except User.DoesNotExist:\n            return None\n</code></pre>\n\n<p>Here is my Custom user models.py</p>\n\n<pre><code>from __future__ import unicode_literals\nfrom django.utils import timezone\nfrom django.db import models\nfrom django.contrib.auth.models import AbstractBaseUser,PermissionsMixin,BaseUserManager\nfrom django.utils.translation import ugettext_lazy as _\n\n# Create your models here.\nclass UserManager(BaseUserManager):\n    use_in_migrations = True\n\n    def _create_user(self, username, password, **extra_fields):\n        \"\"\"\n        Creates and saves a User with the given username, email and password.\n        \"\"\"\n        if not username:\n            raise ValueError('The given username must be set')\n        user = self.model(username=username, **extra_fields)\n        user.set_password(password)\n        user.save(using=self._db)\n        return user\n\n    def create_user(self, username, password=None, **extra_fields):\n        extra_fields.setdefault('is_staff', False)\n        extra_fields.setdefault('is_superuser', False)\n        return self._create_user(username, password, **extra_fields)\n\n    def create_superuser(self, username, password, **extra_fields):\n        extra_fields.setdefault('is_staff', True)\n        extra_fields.setdefault('is_superuser', True)\n\n        if extra_fields.get('is_staff') is not True:\n            raise ValueError('Superuser must have is_staff=True.')\n        if extra_fields.get('is_superuser') is not True:\n            raise ValueError('Superuser must have is_superuser=True.')\n\n        return self._create_user(username, password, **extra_fields)\n\nclass User(AbstractBaseUser,PermissionsMixin):\n    def __unicode__(self):\n        return str(self.username)\n    username=models.CharField(\"UserName\",max_length=100,unique=True)\n    is_active = models.BooleanField(default=True)\n    is_staff = models.BooleanField(default=False)\n    id=models.AutoField(primary_key=True)\n    USERNAME_FIELD='username'\n\n    objects = UserManager()\n\n    class Meta:\n        verbose_name = _('User')\n        verbose_name_plural = _('Users')\n\n    def get_full_name(self):\n        \"\"\"\n        Returns the first_name plus the last_name, with a space in between.\n        \"\"\"\n        pass\n\n    def get_short_name(self):\n        \"Returns the short name for the user.\"\n        pass\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "printing"], "comments": [{"owner": {"reputation": 4621, "user_id": 1939638, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vu1kQ.jpg?s=128&g=1", "display_name": "Matt Cremeens", "link": "https://stackoverflow.com/users/1939638/matt-cremeens"}, "edited": false, "score": 1, "creation_date": 1452118932, "post_id": 34643921, "comment_id": 57033802, "body": "You wouldn&#39;t actually have to remove the <code>print line</code> from everywhere. Maybe just set <code>line = &#39;&#39;</code> instead."}, {"owner": {"reputation": 3846, "user_id": 5420829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4eePO.jpg?s=128&g=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u0435\u043d\u044c\u043a\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/5420829/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%b5%d0%bd%d1%8c%d0%ba%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "edited": false, "score": 0, "creation_date": 1452121271, "post_id": 34643921, "comment_id": 57034816, "body": "<code>def print_separator(): print(line)</code> and latter replace the body of the function with <code>pass</code> or add a conditional operator into it when you want to get rid of the separator."}], "answers": [{"comments": [{"owner": {"reputation": 201, "user_id": 5582349, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/312bc7d6f5cd54323756aeb7fe349ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/5582349/dave"}, "edited": false, "score": 0, "creation_date": 1452118923, "post_id": 34643953, "comment_id": 57033797, "body": "I have already mentioned this in my question as a &quot;another solution&quot;. i don&#39;t want to put if condition 100&#39;s of times."}, {"owner": {"reputation": 2070, "user_id": 1044698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KWnHV.png?s=128&g=1", "display_name": "Energya", "link": "https://stackoverflow.com/users/1044698/energya"}, "reply_to_user": {"reputation": 201, "user_id": 5582349, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/312bc7d6f5cd54323756aeb7fe349ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/5582349/dave"}, "edited": false, "score": 0, "creation_date": 1452119035, "post_id": 34643953, "comment_id": 57033847, "body": "Sorry, must have missed it while reading your question. This is the simplest solution I use for these kinds of things."}], "tags": [], "owner": {"reputation": 2070, "user_id": 1044698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KWnHV.png?s=128&g=1", "display_name": "Energya", "link": "https://stackoverflow.com/users/1044698/energya"}, "is_accepted": false, "score": 1, "last_activity_date": 1452118847, "creation_date": 1452118847, "answer_id": 34643953, "question_id": 34643921, "link": "https://stackoverflow.com/questions/34643921/dynamic-way-to-print-same-line-multiple-times-in-python/34643953#34643953", "title": "dynamic way to print same line multiple times in python", "body": "<p>Add a boolean variable at the top and use it to control the print statements:</p>\n\n<pre><code>print_lines = True  # Change to False when you no longer want to print\nif print_lines:\n    print line\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3846, "user_id": 5420829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4eePO.jpg?s=128&g=1", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u0435\u043d\u044c\u043a\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/5420829/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%b5%d0%bd%d1%8c%d0%ba%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "edited": false, "score": 0, "creation_date": 1452121092, "post_id": 34644279, "comment_id": 57034744, "body": "The second solution (looping over a tuple of functions) looks nice. It won&#39;t fit all tasks though."}, {"owner": {"reputation": 201, "user_id": 5582349, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/312bc7d6f5cd54323756aeb7fe349ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/5582349/dave"}, "edited": false, "score": 0, "creation_date": 1452121641, "post_id": 34644279, "comment_id": 57034974, "body": "@Artyer : All the # do somethings are different functions and prints different  output to console."}, {"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "reply_to_user": {"reputation": 201, "user_id": 5582349, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/312bc7d6f5cd54323756aeb7fe349ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/5582349/dave"}, "edited": false, "score": 0, "creation_date": 1452121852, "post_id": 34644279, "comment_id": 57035046, "body": "@Dave Would the second solution be appropriate? Otherwise, I&#39;m afraid you are going to have to go with the global flag."}], "tags": [], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "is_accepted": false, "score": 2, "last_activity_date": 1452120293, "creation_date": 1452120293, "answer_id": 34644279, "question_id": 34643921, "link": "https://stackoverflow.com/questions/34643921/dynamic-way-to-print-same-line-multiple-times-in-python/34644279#34644279", "title": "dynamic way to print same line multiple times in python", "body": "<p>You may have fallen into the trap of copy pasting the same things 100s of time. I can't comment and ask, but if you're <code># do somethings</code> are the same, you can do:</p>\n\n<pre><code>if __name__ == \"__main__\":\n    line = '-' * 100\n    for _ in range(&lt;how many times&gt;):\n        print line\n        # do something\n</code></pre>\n\n<p>If they're not the same, they should really be functions as there shouldn't be too much code outside functions. For example,</p>\n\n<pre><code>if __name__ == '__main__':\n    line = '-' * 100\n\n    print line\n    function_a()\n\n    print line\n    function_b()\n\n    print line\n    function_c()\n\n    # etc\n</code></pre>\n\n<p>becomes:</p>\n\n<pre><code>if __name__ == '__main__':\n    line = '-' * 100\n\n    for function in (function_a, function_b,  # etc\n                     function_c):\n        print line\n        function()\n</code></pre>\n"}], "owner": {"reputation": 201, "user_id": 5582349, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/312bc7d6f5cd54323756aeb7fe349ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/5582349/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1452120293, "creation_date": 1452118729, "last_edit_date": 1452119275, "question_id": 34643921, "link": "https://stackoverflow.com/questions/34643921/dynamic-way-to-print-same-line-multiple-times-in-python", "title": "dynamic way to print same line multiple times in python", "body": "<p>I have some set of operations and I want to display a seperation line after completing each operation. (For better readability) </p>\n\n<p>My code:  </p>\n\n<pre><code> if __name__ == '__main__':\n     line='-'*100\n\n     print line\n     #do something\n\n     print line\n     #do something\n\n     print line\n     #do something\n</code></pre>\n\n<p>This exactly does what I want. But the problem here is I have 100's of operations. Later, if I want to stop displaying lines, I have to remove <code>print line</code> from everywhere. </p>\n\n<p>Another solution might be managing some global flag to check whether to display line or not.  </p>\n\n<p>Is there any other simple &amp; dynamic solution to this issue ? </p>\n"}, {"tags": ["c#", "python"], "answers": [{"tags": [], "owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "is_accepted": false, "score": 2, "last_activity_date": 1452119098, "creation_date": 1452119098, "answer_id": 34644022, "question_id": 34643903, "link": "https://stackoverflow.com/questions/34643903/odd-behavior-c-vs-python-byte-ops/34644022#34644022", "title": "Odd Behavior C# vs Python byte ops", "body": "<p>It seems that C# is using a 32 bit int so 3743347868 is -551619428\nAn <strong>unsigned int</strong> should make C# behave more like python in this matter.</p>\n"}, {"tags": [], "owner": {"reputation": 13828, "user_id": 4588915, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CTCr8.png?s=128&g=1", "display_name": "Jakub Lortz", "link": "https://stackoverflow.com/users/4588915/jakub-lortz"}, "is_accepted": true, "score": 6, "last_activity_date": 1452119109, "creation_date": 1452119109, "answer_id": 34644025, "question_id": 34643903, "link": "https://stackoverflow.com/questions/34643903/odd-behavior-c-vs-python-byte-ops/34644025#34644025", "title": "Odd Behavior C# vs Python byte ops", "body": "<p>In C# <code>int</code> is a signed 32-bit integer. The maximum value of <code>int</code> is <code>2147483647</code> - that's lower than <code>3743347868</code>. The operations you perform cause an overflow, resulting in a negative value.</p>\n\n<p>The C# code will give the same results as Python if you change the type of <code>result</code> to unsigned int (<code>uint</code>) or a 64-bit integer (<code>long</code>):</p>\n\n<pre><code>byte[] vals = new byte[] {223, 30, 244, 156};\nuint result = 0;\nfor(int i = 0; i &lt;= 3; ++i) {\n  result &lt;&lt;= 8;\n  result |= vals[i];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16598, "user_id": 4767498, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-u6daZXYwzxs/AAAAAAAAAAI/AAAAAAAAABI/0xXoH0XUtkc/photo.jpg?sz=128", "display_name": "M.kazem Akhgary", "link": "https://stackoverflow.com/users/4767498/m-kazem-akhgary"}, "is_accepted": false, "score": 3, "last_activity_date": 1452119573, "creation_date": 1452119573, "answer_id": 34644136, "question_id": 34643903, "link": "https://stackoverflow.com/questions/34643903/odd-behavior-c-vs-python-byte-ops/34644136#34644136", "title": "Odd Behavior C# vs Python byte ops", "body": "<p>This calculator tells everything.</p>\n\n<p><a href=\"https://i.stack.imgur.com/DiPtA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DiPtA.png\" alt=\"enter image description here\"></a></p>\n\n<p>The left side is showing the result in int 64(it will show same result when using unsigned int 32). while the right side is using int 32. because the top bit is used for negative it will show different number.</p>\n\n<p>note that all bits are same. thats just difference between signed and unsigned integer.</p>\n"}], "owner": {"reputation": 2681, "user_id": 2123176, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZaQ1l.png?s=128&g=1", "display_name": "slumtrimpet", "link": "https://stackoverflow.com/users/2123176/slumtrimpet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 34644025, "answer_count": 3, "score": 2, "last_activity_date": 1452166826, "creation_date": 1452118654, "last_edit_date": 1452166826, "question_id": 34643903, "link": "https://stackoverflow.com/questions/34643903/odd-behavior-c-vs-python-byte-ops", "title": "Odd Behavior C# vs Python byte ops", "body": "<p>Why does C#:</p>\n\n<pre><code>byte[] vals = new byte[] {223, 30, 244, 156};\nint result = 0;\nfor(int i = 0; i &lt;= 3; ++i) {\n  result &lt;&lt;= 8;\n  result |= vals[i];\n}\nprint(\"RESULT: \" + result);\n</code></pre>\n\n<p>Yield: </p>\n\n<pre><code>RESULT: -551619428\n</code></pre>\n\n<p>While Python:</p>\n\n<pre><code>vals = array.array('B', [223, 30, 244, 156])\nresult = 0\nfor val in vals:\n  result &lt;&lt;= 8\n  result |= val\nprint 'RESULT: %s' % result\n</code></pre>\n\n<p>Yields:</p>\n\n<pre><code>RESULT: 3743347868\n</code></pre>\n\n<p>While... throwing array values of:</p>\n\n<pre><code>[37, 120, 244, 167]\n</code></pre>\n\n<p>at both languages yields:</p>\n\n<pre><code>RESULT: 628683943\n</code></pre>\n\n<p><strong>EDIT: I didn't include this in the original question, but my actual goal was to make Python behave like C# in this case.  Per the answers below I see I need to force the int overflow on the Python side.</strong></p>\n\n<p><strong>This seems to work:</strong></p>\n\n<pre><code>import numpy\nresult = numpy.int32(result)\n</code></pre>\n"}, {"tags": ["python", "loops", "vectorization"], "comments": [{"owner": {"reputation": 14299, "user_id": 791713, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1d51e358999bd31439d3810486942e9b?s=128&d=identicon&r=PG", "display_name": "Niklas R", "link": "https://stackoverflow.com/users/791713/niklas-r"}, "edited": false, "score": 2, "creation_date": 1452118333, "post_id": 34643792, "comment_id": 57033512, "body": "Search for &quot;python list comprehension&quot;"}, {"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 3, "creation_date": 1452118419, "post_id": 34643792, "comment_id": 57033558, "body": "There&#39;s a reason Python calls them &quot;lists&quot; and not &quot;vectors&quot;.  Numpy is absolutely the way to go if what you want to do is vectorized numerical operations."}], "answers": [{"tags": [], "owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "is_accepted": false, "score": 4, "last_activity_date": 1452118674, "last_edit_date": 1452118674, "creation_date": 1452118370, "answer_id": 34643826, "question_id": 34643792, "link": "https://stackoverflow.com/questions/34643792/pythonic-alternative-to-rs-vectorized-functions/34643826#34643826", "title": "Pythonic alternative to R&#39;s vectorized functions", "body": "<p>You should use the <a href=\"http://www.numpy.org/\" rel=\"nofollow\"><code>numpy</code></a> library, and possibly other libraries based on it, like <a href=\"http://pandas.pydata.org/\" rel=\"nofollow\"><code>pandas</code></a>.  If what you want to do is vectorized numerical operations, these are the way to do it.</p>\n\n<p>You're right in a way that you're bumping up against the strengths and weaknesses of the two languages.  In R everything is a vector, even single numeric values.  This makes vectorized operations easy but can make it awkward to do anything where you <em>don't</em> want vectorized numerical computations.  Python has greater flexibility by virtue of not building things like vectorization into the core language types; you can still do it, but you need a library</p>\n\n<p>In other words, a strength of R is that everything is vectorized and a weakness is that everything is vectorized; a strength of Python is that things are not vectorized by default and a weakness is that things are not vectorized by default.  Using numpy to do vectorized operations isn't so much \"Python with an R accent\" as \"Python with a vector accent\", which is exactly what you want if you want vectorized operations.  If you're doing a lot of stats, you may find R's strengths helpful.  In my experience, if you're doing almost anything but stats, you'll find Python much more adaptable to a variety of tasks.</p>\n"}, {"tags": [], "owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "is_accepted": true, "score": 4, "last_activity_date": 1452118376, "creation_date": 1452118376, "answer_id": 34643828, "question_id": 34643792, "link": "https://stackoverflow.com/questions/34643792/pythonic-alternative-to-rs-vectorized-functions/34643828#34643828", "title": "Pythonic alternative to R&#39;s vectorized functions", "body": "<p>You can either use <code>map</code></p>\n\n<pre><code>&gt;&gt;&gt; lst = ['1', '2', '3']\n&gt;&gt;&gt; map(int, lst)\n[1, 2, 3]\n</code></pre>\n\n<p>or a list comprehension:</p>\n\n<pre><code>&gt;&gt;&gt; [int(x) for x in lst]\n[1, 2, 3]\n</code></pre>\n\n<p>Which one to use? Primarily opinion based. Personally, I prefer <code>map</code> if the function that is mapped already exists as a built-in.</p>\n\n<p>Note that in Python3, <code>map</code> will yield a map object, which - if you want to have a list - you would have to cast to list explicitly. So the comprehension is probably preferred in Python3:</p>\n\n<pre><code>&gt;&gt;&gt; result = map(int, ['1', '2', '3'])\n&gt;&gt;&gt; result\n&lt;map object at 0x7f35c4c3af98&gt;\n&gt;&gt;&gt; list(result)\n[1, 2, 3]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23806, "user_id": 4542359, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a6ea331ac684b52563d13e6ee44e03be?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Protopopov", "link": "https://stackoverflow.com/users/4542359/anton-protopopov"}, "is_accepted": false, "score": 2, "last_activity_date": 1452118376, "creation_date": 1452118376, "answer_id": 34643829, "question_id": 34643792, "link": "https://stackoverflow.com/questions/34643792/pythonic-alternative-to-rs-vectorized-functions/34643829#34643829", "title": "Pythonic alternative to R&#39;s vectorized functions", "body": "<p>You could use list comprehension:</p>\n\n<pre><code>x = ['1', '2', '3']\nl = [int(i) for i in x]\nprint(l)\n[1, 2, 3]\n</code></pre>\n\n<p>If you are going to use something complex with vectors, dataframes you should check <a href=\"http://www.numpy.org/\" rel=\"nofollow\"><code>numpy</code></a>, <a href=\"http://pandas.pydata.org\" rel=\"nofollow\"><code>pandas</code></a> and <a href=\"http://scipy.org/\" rel=\"nofollow\"><code>scipy</code></a> libraries.</p>\n"}, {"tags": [], "owner": {"reputation": 4679, "user_id": 2199801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FvLFC.png?s=128&g=1", "display_name": "karlson", "link": "https://stackoverflow.com/users/2199801/karlson"}, "is_accepted": false, "score": 2, "last_activity_date": 1452118495, "creation_date": 1452118495, "answer_id": 34643856, "question_id": 34643792, "link": "https://stackoverflow.com/questions/34643792/pythonic-alternative-to-rs-vectorized-functions/34643856#34643856", "title": "Pythonic alternative to R&#39;s vectorized functions", "body": "<p>I strongly recommend using <code>numpy</code> for working with vector data. That's exactly what it is there for. It's a very mature library, widely used by other libraries and has nothing to do with \"speaking Python in a very heavy R accent\".</p>\n\n<p>An alternative for this particular example would be a list comprehension:</p>\n\n<pre><code>[int(e) for e in x]\n</code></pre>\n"}], "owner": {"reputation": 3174, "user_id": 5347093, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/24ea41e9476832447c7898e935c7127a?s=128&d=identicon&r=PG&f=1", "display_name": "Empiromancer", "link": "https://stackoverflow.com/users/5347093/empiromancer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 0, "accepted_answer_id": 34643828, "answer_count": 4, "score": 2, "last_activity_date": 1452118674, "creation_date": 1452118247, "question_id": 34643792, "link": "https://stackoverflow.com/questions/34643792/pythonic-alternative-to-rs-vectorized-functions", "title": "Pythonic alternative to R&#39;s vectorized functions", "body": "<p>I'm working in Python, but coming from an R background - where, if I want to take an array of strings <code>x = ['1', '2', '3']</code> and get the corresponding array of integers <code>[1, 2, 3]</code>, the natural thing to do would be to run something like <code>int(x)</code>. Of course, this syntax doesn't work because I'm in Python and functions aren't automatically vectorized. Seems like I can maybe use NumPy to create a vectorized version of functions, but that feels like speaking Python in a very heavy R accent.</p>\n\n<p>Looping over the contents of the vector works</p>\n\n<pre><code>x2 = []\nfor y in x:\n    x2.append(int(y))\n</code></pre>\n\n<p>but doesn't seem at all elegant - it's a three line construction for something I could do in six characters in R. Surely there's a Pythonic way to do this that's more compact? Or is this butting up against the respective strengths and weaknesses of Python vs. R?</p>\n"}, {"tags": ["python", "opencv", "plot", "ipython"], "comments": [{"owner": {"reputation": 313, "user_id": 5754595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0081f93f7f89e582ceddc658caa27188?s=128&d=identicon&r=PG", "display_name": "Fire", "link": "https://stackoverflow.com/users/5754595/fire"}, "edited": false, "score": 0, "creation_date": 1452177219, "post_id": 34643747, "comment_id": 57060708, "body": "I have found that the command &quot;cv2.waitKey()&quot; after the &quot;cv2.imshow()&quot; command gets around the freezing issue for external windows - but do not know why. I have also seen a few other commands mentioned here: <a href=\"http://txt.arboreus.com/2012/07/11/highgui-opencv-window-from-ipython.html\" rel=\"nofollow noreferrer\">txt.arboreus.com/2012/07/11/&hellip;</a>"}, {"owner": {"reputation": 2412, "user_id": 566035, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b5221617fa468fca3c288903a7e23bc8?s=128&d=identicon&r=PG&f=1", "display_name": "otterb", "link": "https://stackoverflow.com/users/566035/otterb"}, "edited": false, "score": 0, "creation_date": 1452814890, "post_id": 34643747, "comment_id": 57346951, "body": "I am not sure if you can embed cv2 namedWindow in IPython notebook as it is a C++ frame. Probably there is no backend written for cv2.imshow. I would use imshow from pylab for embedding. Did this cv2.startWindowThread() work for notebook? I am curious."}, {"owner": {"reputation": 313, "user_id": 5754595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0081f93f7f89e582ceddc658caa27188?s=128&d=identicon&r=PG", "display_name": "Fire", "link": "https://stackoverflow.com/users/5754595/fire"}, "reply_to_user": {"reputation": 2412, "user_id": 566035, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b5221617fa468fca3c288903a7e23bc8?s=128&d=identicon&r=PG&f=1", "display_name": "otterb", "link": "https://stackoverflow.com/users/566035/otterb"}, "edited": false, "score": 0, "creation_date": 1453128744, "post_id": 34643747, "comment_id": 57454431, "body": "It didn&#39;t work for me. A blank external window pops up and freezes."}], "answers": [{"comments": [{"owner": {"reputation": 3628, "user_id": 6802252, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/93aac7d4f79b7275d62dc21cfe248ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Moondra", "link": "https://stackoverflow.com/users/6802252/moondra"}, "edited": false, "score": 0, "creation_date": 1494104237, "post_id": 36136972, "comment_id": 74688650, "body": "What can h,w be used for?"}, {"owner": {"reputation": 2037, "user_id": 2137364, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/qAVkA.jpg?s=128&g=1", "display_name": "themadmax", "link": "https://stackoverflow.com/users/2137364/themadmax"}, "edited": false, "score": 0, "creation_date": 1494864162, "post_id": 36136972, "comment_id": 74997219, "body": "h and w corresponding to Height and Width image size"}, {"owner": {"reputation": 426, "user_id": 2597852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8cc97734b1afcbeb767144375574c0?s=128&d=identicon&r=PG", "display_name": "Maunesh Ahir", "link": "https://stackoverflow.com/users/2597852/maunesh-ahir"}, "edited": false, "score": 1, "creation_date": 1546840565, "post_id": 36136972, "comment_id": 94971284, "body": "Be careful if you are reading images using <i><code>cv2</code></i> and displaying the image using <i><code>plt</code></i>.  <i><code>cv2</code></i> reads images as BGR by default, where as <i><code>plt</code></i> uses RGB format. So your Blue and Red color will get flipped.  Here, you&#39;re reading the image in grayscale with <code>0</code> parameter in <code>cv2.imread</code>, so you won&#39;t see this issue."}, {"owner": {"reputation": 2037, "user_id": 2137364, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/qAVkA.jpg?s=128&g=1", "display_name": "themadmax", "link": "https://stackoverflow.com/users/2137364/themadmax"}, "edited": false, "score": 2, "creation_date": 1546879919, "post_id": 36136972, "comment_id": 94990451, "body": "You&#39;re right, we must use <code>cv2.cvtColor(image, cv2.COLOR_BGR2RGB)</code> to display color image"}], "tags": [], "owner": {"reputation": 2037, "user_id": 2137364, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/qAVkA.jpg?s=128&g=1", "display_name": "themadmax", "link": "https://stackoverflow.com/users/2137364/themadmax"}, "is_accepted": true, "score": 37, "last_activity_date": 1550478258, "last_edit_date": 1550478258, "creation_date": 1458578775, "answer_id": 36136972, "question_id": 34643747, "link": "https://stackoverflow.com/questions/34643747/ipython-notebook-jupyter-opencv-cv2-and-plotting/36136972#36136972", "title": "Ipython notebook (jupyter),opencv (cv2) and plotting?", "body": "<p>This is my empty template:</p>\n\n<pre><code>import cv2\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport sys\n%matplotlib inline\n\nim = cv2.imread('IMG_FILENAME',0)\nh,w = im.shape[:2]\nprint(im.shape)\nplt.imshow(im,cmap='gray')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://colab.research.google.com/drive/1WbOfcIwShtxaw7-Ig5YppNINWgLucQ4i#scrollTo=vy7Be3RMreWG\" rel=\"noreferrer\">See online sample</a></p>\n"}, {"comments": [{"owner": {"reputation": 3260, "user_id": 786559, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e3e079a622decf7ca77827a222c8f8ce?s=128&d=identicon&r=PG", "display_name": "Ciprian Tomoiag\u0103", "link": "https://stackoverflow.com/users/786559/ciprian-tomoiag%c4%83"}, "edited": false, "score": 2, "creation_date": 1531234850, "post_id": 48738145, "comment_id": 89515247, "body": "this is a great way to avoid <a href=\"https://stackoverflow.com/q/33174359/786559\">problems in <code>pyplot</code>s rendering</a>. Just <a href=\"https://stackoverflow.com/a/18284900/786559\">be mindful</a> of Python 3 compatibility"}], "tags": [], "owner": {"reputation": 1739, "user_id": 5075502, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ffa5cb896797f515c5c275cfe37a6a60?s=128&d=identicon&r=PG", "display_name": "snoob dogg", "link": "https://stackoverflow.com/users/5075502/snoob-dogg"}, "is_accepted": false, "score": 2, "last_activity_date": 1518397148, "last_edit_date": 1518397148, "creation_date": 1518396754, "answer_id": 48738145, "question_id": 34643747, "link": "https://stackoverflow.com/questions/34643747/ipython-notebook-jupyter-opencv-cv2-and-plotting/48738145#48738145", "title": "Ipython notebook (jupyter),opencv (cv2) and plotting?", "body": "<p>\nThere is also that little function that was used into the Google Deepdream Notebook:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import cv2\nimport numpy as np\nfrom IPython.display import clear_output, Image, display\nfrom cStringIO import StringIO\nimport PIL.Image\n\ndef showarray(a, fmt='jpeg'):\n    a = np.uint8(np.clip(a, 0, 255))\n    f = StringIO()\n    PIL.Image.fromarray(a).save(f, fmt)\n    display(Image(data=f.getvalue()))\n</code></pre>\n\n<p>Then you can do : </p>\n\n<pre class=\"lang-python prettyprint-override\"><code>img = cv2.imread(\"an_image.jpg\") \n</code></pre>\n\n<p>And simply : </p>\n\n<pre class=\"lang-python prettyprint-override\"><code>showarray(img)\n</code></pre>\n\n<p>Each time you need to render the image in a cell</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 8935101, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qkV2mUt_euY/AAAAAAAAAAI/AAAAAAAAAAA/kQet2S1HnnQ/photo.jpg?sz=128", "display_name": "Darren Gallagher", "link": "https://stackoverflow.com/users/8935101/darren-gallagher"}, "is_accepted": false, "score": 5, "last_activity_date": 1542792859, "creation_date": 1542792859, "answer_id": 53409008, "question_id": 34643747, "link": "https://stackoverflow.com/questions/34643747/ipython-notebook-jupyter-opencv-cv2-and-plotting/53409008#53409008", "title": "Ipython notebook (jupyter),opencv (cv2) and plotting?", "body": "<p>For a Jupyter notebook running on Python 3.5 I had to modify this to:</p>\n\n<pre><code>import io\nimport cv2\nimport numpy as np\nfrom IPython.display import clear_output, Image, display\nimport PIL.Image\n\ndef showarray(a, fmt='jpeg'):\n    a = np.uint8(np.clip(a, 0, 255))\n    f = io.BytesIO()\n    PIL.Image.fromarray(a).save(f, fmt)\n    display(Image(data=f.getvalue()))\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 5754595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0081f93f7f89e582ceddc658caa27188?s=128&d=identicon&r=PG", "display_name": "Fire", "link": "https://stackoverflow.com/users/5754595/fire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31422, "favorite_count": 7, "accepted_answer_id": 36136972, "answer_count": 3, "score": 26, "last_activity_date": 1550478258, "creation_date": 1452118064, "last_edit_date": 1518407610, "question_id": 34643747, "link": "https://stackoverflow.com/questions/34643747/ipython-notebook-jupyter-opencv-cv2-and-plotting", "title": "Ipython notebook (jupyter),opencv (cv2) and plotting?", "body": "<p><strong>Is there a way to use and plot with opencv2 with ipython notebook?</strong></p>\n\n<p>I am fairly new to python image analysis. I decided to go with the notebook work flow to make nice record as I process and it has been working out quite well using matplotlib/pylab to plot things.</p>\n\n<p>An initial hurdle I had was how to plot things within the notebook. Easy, just use magic:</p>\n\n<pre><code>%matplotlib inline\n</code></pre>\n\n<p>Later, I wanted to perform manipulations with interactive plots but plotting in a dedicated window would always freeze. Fine, I learnt again that you need to use magic. Instead of just importing the modules:</p>\n\n<pre><code>%pylab\n</code></pre>\n\n<p>Now I have moved onto working with opencv. I am now back to the same problem, where I either want to plot inline or use dedicated, interactive windows depending on the task at hand. Is there similar magic to use? Is there another way to get things working? Or am I stuck and need to just go back to running a program from IDLE?</p>\n\n<p>As a side note: I know that opencv has installed correctly. Firstly, because I got no errors either installing or importing the cv2 module. Secondly, because I can read in images with cv2 and then plot them with something else.</p>\n"}, {"tags": ["python", "xpath", "scrapy"], "comments": [{"owner": {"reputation": 6419, "user_id": 1141356, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8807954e084bcf3c7dd691d5ad27c478?s=128&d=identicon&r=PG", "display_name": "intelis", "link": "https://stackoverflow.com/users/1141356/intelis"}, "edited": false, "score": 0, "creation_date": 1452117890, "post_id": 34643664, "comment_id": 57033288, "body": "Why aren&#39;t you using something like PyQuery or BeautifulSoup?"}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1452181350, "post_id": 34643664, "comment_id": 57063727, "body": "is <code>positie</code> working?"}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1452181441, "post_id": 34643664, "comment_id": 57063793, "body": "looks like it shouldn&#39;t, now to get <code>naam</code>, use <code>&#47;&#47;img&#47;@title</code>"}], "answers": [{"comments": [{"owner": {"reputation": 511, "user_id": 1131881, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/42odU.jpg?s=128&g=1", "display_name": "Martijn", "link": "https://stackoverflow.com/users/1131881/martijn"}, "edited": false, "score": 0, "creation_date": 1452150692, "post_id": 34643994, "comment_id": 57043875, "body": "This doesn&#39;t seems to work :-( Still getting no value returned."}, {"owner": {"reputation": 4511, "user_id": 3565015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/002df8537b9483e359a96c116702d986?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Roszkowiak", "link": "https://stackoverflow.com/users/3565015/rados%c5%82aw-roszkowiak"}, "reply_to_user": {"reputation": 511, "user_id": 1131881, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/42odU.jpg?s=128&g=1", "display_name": "Martijn", "link": "https://stackoverflow.com/users/1131881/martijn"}, "edited": false, "score": 0, "creation_date": 1452156621, "post_id": 34643994, "comment_id": 57046623, "body": "When I loaded this via lxml.html I got the expected result with this xpath. Do you have result for &quot;positie&quot; and &quot;leeftijd&quot;?"}, {"owner": {"reputation": 511, "user_id": 1131881, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/42odU.jpg?s=128&g=1", "display_name": "Martijn", "link": "https://stackoverflow.com/users/1131881/martijn"}, "edited": false, "score": 0, "creation_date": 1452186907, "post_id": 34643994, "comment_id": 57067816, "body": "I got the value from &quot;leeftijd&quot; but thats because it is not within the nested table. You used lxml.html? Could you share this?"}, {"owner": {"reputation": 4511, "user_id": 3565015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/002df8537b9483e359a96c116702d986?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Roszkowiak", "link": "https://stackoverflow.com/users/3565015/rados%c5%82aw-roszkowiak"}, "reply_to_user": {"reputation": 511, "user_id": 1131881, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/42odU.jpg?s=128&g=1", "display_name": "Martijn", "link": "https://stackoverflow.com/users/1131881/martijn"}, "edited": false, "score": 0, "creation_date": 1452189295, "post_id": 34643994, "comment_id": 57069278, "body": "No magic there, just wanted to test this particular xpath: <a href=\"https://gist.github.com/radoslawroszkowiak/8ecf53c618488a7bf3e9\" rel=\"nofollow noreferrer\">gist.github.com/radoslawroszkowiak/8ecf53c618488a7bf3e9</a>. It works, whereas your version with <code>text()</code> does not. Are you sure your problem is really related to xpath, then?"}, {"owner": {"reputation": 4511, "user_id": 3565015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/002df8537b9483e359a96c116702d986?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Roszkowiak", "link": "https://stackoverflow.com/users/3565015/rados%c5%82aw-roszkowiak"}, "reply_to_user": {"reputation": 511, "user_id": 1131881, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/42odU.jpg?s=128&g=1", "display_name": "Martijn", "link": "https://stackoverflow.com/users/1131881/martijn"}, "edited": false, "score": 0, "creation_date": 1452199362, "post_id": 34643994, "comment_id": 57075099, "body": "Actually one more thing comes to my mind. Maybe you could try xpath without <code>tbody</code>, like that: <code>td[1]&#47;table&#47;&#47;tr[1]&#47;td[1]&#47;img&#47;@title</code>?"}, {"owner": {"reputation": 511, "user_id": 1131881, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/42odU.jpg?s=128&g=1", "display_name": "Martijn", "link": "https://stackoverflow.com/users/1131881/martijn"}, "edited": false, "score": 0, "creation_date": 1452240360, "post_id": 34643994, "comment_id": 57089500, "body": "losing tbody seems to work, but why? could you pls explain."}, {"owner": {"reputation": 4511, "user_id": 3565015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/002df8537b9483e359a96c116702d986?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Roszkowiak", "link": "https://stackoverflow.com/users/3565015/rados%c5%82aw-roszkowiak"}, "reply_to_user": {"reputation": 511, "user_id": 1131881, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/42odU.jpg?s=128&g=1", "display_name": "Martijn", "link": "https://stackoverflow.com/users/1131881/martijn"}, "edited": false, "score": 0, "creation_date": 1452262171, "post_id": 34643994, "comment_id": 57103098, "body": "Some browsers (Firefox, I think Chrome too, I don&#39;t know how about the rest) add &lt;tbody&gt; to the table, even if the original HTML does not contain it. So if you inspect page you can see &lt;tbody&gt; as it&#39;s added by the browser, but when your crawler visits the page, there&#39;s no &lt;tbody&gt;"}, {"owner": {"reputation": 511, "user_id": 1131881, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/42odU.jpg?s=128&g=1", "display_name": "Martijn", "link": "https://stackoverflow.com/users/1131881/martijn"}, "edited": false, "score": 0, "creation_date": 1452273021, "post_id": 34643994, "comment_id": 57110787, "body": "Aahh never knew that. Thx the info."}], "tags": [], "owner": {"reputation": 4511, "user_id": 3565015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/002df8537b9483e359a96c116702d986?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Roszkowiak", "link": "https://stackoverflow.com/users/3565015/rados%c5%82aw-roszkowiak"}, "is_accepted": true, "score": 1, "last_activity_date": 1452199918, "last_edit_date": 1452199918, "creation_date": 1452119004, "answer_id": 34643994, "question_id": 34643664, "link": "https://stackoverflow.com/questions/34643664/scrapy-get-text-from-image-title-attribute-inside-a-nested-table/34643994#34643994", "title": "scrapy get text from image title attribute inside a nested table", "body": "<p>It seems you can just use</p>\n\n<pre><code>        item['naam'] = transfer.xpath(\n           'td[1]/table/tbody/tr[1]/td[1]/img/@title'\n        )\n</code></pre>\n\n<p>This will return a list.</p>\n\n<p><code>text()</code> is not useful for getting tag attribute values.\n<code>extract()</code> I think can also be omitted here.</p>\n\n<p>EDIT:\nsome more possibility, if the above is still not working, would be the <code>tbody</code> problem, i.e. <a href=\"http://doc.scrapy.org/en/latest/topics/firefox.html\" rel=\"nofollow\">http://doc.scrapy.org/en/latest/topics/firefox.html</a>. You can try like that:\n<code>td[1]/table//tr[1]/td[1]/img/@title</code></p>\n\n<p>If that doesn't help, then based on the data we've got here, I think I'm out of ideas :)</p>\n"}], "owner": {"reputation": 511, "user_id": 1131881, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/42odU.jpg?s=128&g=1", "display_name": "Martijn", "link": "https://stackoverflow.com/users/1131881/martijn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 0, "accepted_answer_id": 34643994, "answer_count": 1, "score": 1, "last_activity_date": 1452199918, "creation_date": 1452117744, "question_id": 34643664, "link": "https://stackoverflow.com/questions/34643664/scrapy-get-text-from-image-title-attribute-inside-a-nested-table", "title": "scrapy get text from image title attribute inside a nested table", "body": "<p>I am new to scrapy and I am trying to get the text value from the title attribute of a image inside a nested table. Below is a sample of a table </p>\n\n<pre><code>&lt;html&gt;\n     &lt;body&gt;\n      &lt;div id=yw1&gt;\n      &lt;table id=\"x\"&gt;\n        &lt;thead&gt;&lt;/thead&gt;\n         &lt;tbody&gt;\n          &lt;tr&gt;\n           &lt;td&gt;\n             &lt;table id=\"y\"&gt;\n               &lt;thead&gt;&lt;/thead&gt;\n               &lt;tbody&gt;\n                &lt;tr&gt;\n                 &lt;td&gt;&lt;img src=\"..\" title=\"Sample\"&gt;&lt;/td&gt;\n                 &lt;td&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n               &lt;/tbody&gt;\n             &lt;/table&gt;\n           &lt;/td&gt;\n           &lt;td&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n         &lt;/tbody&gt;\n      &lt;/table&gt;\n      &lt;/div&gt;\n     &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I use the following scrapy code to get the text from the title attribute.</p>\n\n<pre><code>def parse(self, response):\n    transfers = Selector(response).xpath('//*[@id=\"yw1\"]/table/tbody/tr')\n\n    for transfer in transfers:\n        item = TransfermarktItem()\n        item['naam'] = transfer.xpath('td[1]/table/tbody/tr[1]/td[1]/img/@title/text()').extract()\n        item['positie'] = transfer.xpath('td[1]/table/tbody/tr[1]/td[2]/a/text()').extract()\n        item['leeftijd'] = transfer.xpath('td[2]/text()').extract()\n        yield item\n</code></pre>\n\n<p>For some reason the text value of the title attribute is not extracted. What is it I am doing wrong??</p>\n\n<p>Cheers!</p>\n"}, {"tags": ["python", "scipy", "interpolation"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1452124136, "post_id": 34643642, "comment_id": 57035886, "body": "Which function, or subcall, is returning the ValueError?  I dont&#39; see such a <code>raise</code> in <code>bisplrep</code>.  This function is a front end to FITPACK, a FORTRAN library.  Libraries like that are not known for being user friendly.  They were written by specialists for their own use and for other specialists."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1452128712, "post_id": 34643642, "comment_id": 57037105, "body": "I&#39;m pretty sure this is OK like this. Consider bilinear interpolation: you interpolate along <code>x</code> and along <code>y</code>, essentially independently. This means that the input data has to be valid for interpolation. However, if in your input data one of the axes is constant, you can&#39;t interpolate along that direction. You&#39;re simply missing information in that case."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1452131182, "post_id": 34643642, "comment_id": 57037826, "body": "Just to make my point clearer: the orientation of the coordinate axes give a very strong bias in the usual 2d interpolation. Consider the bilinear case: the discontinuities in the partial derivatives of the interpolated function are determined by the orientation of the Cartesian axes. So it matters <i>a lot</i> whether your data are oriented along the axes, or in some different configuration. This is why having a skewed line of input (with <code>interp2d(x,x,z)</code>) is much better computationally: there are both a bunch of <code>x</code> and <code>y</code> values, even though geometrically you&#39;re still using a line."}], "answers": [{"comments": [{"owner": {"reputation": 5510, "user_id": 1078391, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kSwTY.jpg?s=128&g=1", "display_name": "DanHickstein", "link": "https://stackoverflow.com/users/1078391/danhickstein"}, "edited": false, "score": 1, "creation_date": 1456869858, "post_id": 34656728, "comment_id": 59143394, "body": "Wow, it&#39;s not just me. scipy.interpolate.interp2d does some crazy stuff! Have you considered posting this as an issue on the scipy GitHub page? <a href=\"https://github.com/scipy/scipy/issues\" rel=\"nofollow noreferrer\">github.com/scipy/scipy/issues</a>"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 5510, "user_id": 1078391, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kSwTY.jpg?s=128&g=1", "display_name": "DanHickstein", "link": "https://stackoverflow.com/users/1078391/danhickstein"}, "edited": false, "score": 0, "creation_date": 1456870475, "post_id": 34656728, "comment_id": 59143684, "body": "@DanHickstein thank you, I haven&#39;t considered that. Honestly, I always use <code>griddata</code>, and I mostly looked into this behaviour when I saw this question, out of curiosity. I&#39;ll consider posting it though (unless you beat me to it;) <a href=\"https://github.com/scipy/scipy/issues/5890\" rel=\"nofollow noreferrer\">This might be related though</a>. Nevermind, I realized that the main issue is the haywire output with fairly decent input points..."}, {"owner": {"reputation": 5510, "user_id": 1078391, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kSwTY.jpg?s=128&g=1", "display_name": "DanHickstein", "link": "https://stackoverflow.com/users/1078391/danhickstein"}, "edited": false, "score": 0, "creation_date": 1456870716, "post_id": 34656728, "comment_id": 59143803, "body": "I had always used griddata as well (since I typically wanted a grid), but for a single-point interpolation, it seems like interp2d is the tool that is designed for this. For my data, interp2d doesn&#39;t even provide correct values at the very same points that I provided to interp2d in the first place. Seems like a bug to me. Make a minimal example and post it on the Scipy GitHub."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 5510, "user_id": 1078391, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kSwTY.jpg?s=128&g=1", "display_name": "DanHickstein", "link": "https://stackoverflow.com/users/1078391/danhickstein"}, "edited": false, "score": 0, "creation_date": 1456871596, "post_id": 34656728, "comment_id": 59144211, "body": "@DanHickstein if it doesn&#39;t even interpolate the base points, that&#39;s a huge problem, and <i>you</i> should report it:) And I think it&#39;s the other way around: <code>interp2d</code> will return values for you on a mesh, and despite its name, <code>griddata</code> accepts arbitrary-shaped points for interpolation. But I&#39;d stick with <code>griddata</code> after the above..."}], "tags": [], "owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "is_accepted": true, "score": 10, "last_activity_date": 1452174342, "creation_date": 1452174342, "answer_id": 34656728, "question_id": 34643642, "link": "https://stackoverflow.com/questions/34643642/scipy-interp2d-bisplrep-unexpected-output-when-given-1d-input/34656728#34656728", "title": "scipy interp2d/bisplrep unexpected output when given 1D input", "body": "<p>I was originally going to show you how much of a difference it makes for 2d interpolation if your input data are oriented along the coordinate axes rather than in some general direction, but it turns out that the result would be even messier than I had anticipated. I tried using a random dataset over an interpolated rectangular mesh, and comparing that to a case where the same <code>x</code> and <code>y</code> coordinates were rotated by 45 degrees for interpolation. The result was abysmal.</p>\n\n<p>I then tried doing a comparison with a smoother dataset: turns out <code>scipy.interpolate.interp2d</code> has quite a few issues. So my bottom line will be \"use <code>scipy.interpolate.griddata</code>\".</p>\n\n<p>For instructive purposes, here's my (quite messy) code:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.cm as cm\n\nn = 10                            # rough number of points\ndom = np.linspace(-2,2,n+1)       # 1d input grid\nx1,y1 = np.meshgrid(dom,dom)      # 2d input grid\nz = np.random.rand(*x1.shape)     # ill-conditioned sample\n#z = np.cos(x1)*np.sin(y1)        # smooth sample\n\n# first interpolator with interp2d:\nfun1 = interp.interp2d(x1,y1,z,kind='linear')\n\n# construct twice finer plotting and interpolating mesh\nplotdom = np.linspace(-1,1,2*n+1)             # for interpolation and plotting\nplotx1,ploty1 = np.meshgrid(plotdom,plotdom)\nplotz1 = fun1(plotdom,plotdom)                # interpolated points\n\n\n# construct 45-degree rotated input and interpolating meshes\nrotmat = np.array([[1,-1],[1,1]])/np.sqrt(2)           # 45-degree rotation\nx2,y2 = rotmat.dot(np.vstack([x1.ravel(),y1.ravel()])) # rotate input mesh\nplotx2,ploty2 = rotmat.dot(np.vstack([plotx1.ravel(),ploty1.ravel()])) # rotate plotting/interp mesh\n\n# interpolate on rotated mesh with interp2d\n# (reverse rotate by using plotx1, ploty1 later!)\nfun2 = interp.interp2d(x2,y2,z.ravel(),kind='linear')\n\n# I had to generate the rotated points element-by-element\n# since fun2() accepts only rectangular meshes as input\nplotz2 = np.array([fun2(xx,yy) for (xx,yy) in zip(plotx2.ravel(),ploty2.ravel())])\n\n# try interpolating with griddata\nplotz3 = interp.griddata(np.array([x1.ravel(),y1.ravel()]).T,z.ravel(),np.array([plotx1.ravel(),ploty1.ravel()]).T,method='linear')\nplotz4 = interp.griddata(np.array([x2,y2]).T,z.ravel(),np.array([plotx2,ploty2]).T,method='linear')\n\n\n# function to plot a surface\ndef myplot(X,Y,Z):\n    fig = plt.figure()\n    ax = Axes3D(fig)\n    ax.plot_surface(X, Y, Z,rstride=1, cstride=1,\n                    linewidth=0, antialiased=False,cmap=cm.coolwarm)\n    plt.show()\n\n\n# plot interp2d versions\nmyplot(plotx1,ploty1,plotz1)                    # Cartesian meshes\nmyplot(plotx1,ploty1,plotz2.reshape(2*n+1,-1))  # rotated meshes\n\n# plot griddata versions\nmyplot(plotx1,ploty1,plotz3.reshape(2*n+1,-1))  # Cartesian meshes\nmyplot(plotx1,ploty1,plotz4.reshape(2*n+1,-1))  # rotated meshes\n</code></pre>\n\n<p>So here's a gallery of the results. Using random input <code>z</code> data, and <code>interp2d</code>, Cartesian (left) vs rotated interpolation (right):</p>\n\n<p><a href=\"https://i.stack.imgur.com/fGrej.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/fGrejm.png\" alt=\"interp2d random input\"></a><a href=\"https://i.stack.imgur.com/4G6pH.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/4G6pHm.png\" alt=\"interp2 rotated random input\"></a></p>\n\n<p>Note the horrible scale on the right side, noting that the input points are between <code>0</code> and <code>1</code>. Even its mother wouldn't recognize the data set. Note that there are runtime warnings during the evaluation of the rotated data set, so we're being warned that it's all crap.</p>\n\n<p>Now let's do the same with <code>griddata</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rlwUX.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/rlwUXm.png\" alt=\"griddata random input\"></a><a href=\"https://i.stack.imgur.com/H5YuD.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/H5YuDm.png\" alt=\"griddata rotated random input\"></a></p>\n\n<p>We should note that these figures are much closer to each other, and they seem to make <em>way</em> more sense than the output of <code>interp2d</code>. For instance, note the overshoot in the scale of the very first figure.</p>\n\n<p>These artifacts always arise between input data points. Since it's still interpolation, the input points have to be reproduced by the interpolating function, but it's pretty weird that a linear interpolating function overshoots between data points. It's clear that <code>griddata</code> doesn't suffer from this issue.</p>\n\n<p>Consider an even more clear case: the other set of <code>z</code> values, which are smooth and deterministic. The surfaces with <code>interp2d</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oU46V.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/oU46Vm.png\" alt=\"interp2d smooth input\"></a><a href=\"https://i.stack.imgur.com/TiqRi.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/TiqRim.png\" alt=\"interp2d rotated smooth input\"></a></p>\n\n<p>HELP! Call the interpolation police! Already the Cartesian input case has inexplicable (well, at least by me) spurious features in it, and the rotated input case poses the threat of s\u0363\u0301\u0308\u0312\u0366\u0300\u0300\u0354\u0316\u0330\u0355\u031e\u0356\u0347u\u0308\u036d\u030a\u0313\u030e\u0308\u0347\u0339\u031e\u0333m\u0306\u031a\u0310\u0366\u0325\u0320\u0348\u0323m\u0351\u0352\u0314\u0313\u0366\u0307\u033bo\u0363\u0310\u0363n\u0306\u034b\u0331\u031f\u0356\u0359i\u0313\u0313\u036d\u0312\u035b\u0349n\u0364\u0364\u0364\u0304\u0339\u0319\u0325\u0329\u0325\u032f\u032dg\u0348\u0347\u033c\u0356\u0356\u032d\u0319 \u0310z\u0309\u036c\u036a\u0311\u036d\u0368\u034a\u033ba\u0344\u0304\u0365\u033c\u0323\u032c\u0317\u0316l\u035b\u034a\u030f\u0368\u0357\u030e\u032b\u0323\u0354\u0353\u031fg\u035b\u036b\u035b\u0305\u034b\u0352\u033b\u0347\u0348\u035a\u031f\u033bo\u033e\u0342\u0348\u0353\u0331\u0325\u0319\u032b\u035a.</p>\n\n<p>So let's do the same with <code>griddata</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wazDi.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/wazDim.png\" alt=\"griddata smooth input\"></a><a href=\"https://i.stack.imgur.com/6EP65.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/6EP65m.png\" alt=\"griddata rotated smooth input\"></a></p>\n\n<p>The day is saved, thanks to <strike>The Powerpuff Girls</strike> <code>scipy.interpolate.griddata</code>. Homework: check the same with <code>cubic</code> interpolation.</p>\n\n<hr>\n\n<p>By the way, a very short answer to your original question is in <code>help(interp.interp2d)</code>:</p>\n\n<pre><code> |  Notes\n |  -----\n |  The minimum number of data points required along the interpolation\n |  axis is ``(k+1)**2``, with k=1 for linear, k=3 for cubic and k=5 for\n |  quintic interpolation.\n</code></pre>\n\n<p>For linear interpolation you need <em>at least 4 points along the interpolation axis</em>, i.e. at least 4 unique <code>x</code> and <code>y</code> values have to be present to get a meaningful result. Check these:</p>\n\n<pre><code>nvals = 3  # -&gt; RuntimeWarning\nx = np.linspace(0,1,10)\ny = np.random.randint(low=0,high=nvals,size=x.shape)\nz = x\ninterp.interp2d(x,y,z)\n\nnvals = 4  # -&gt; no problem here\nx = np.linspace(0,1,10)\ny = np.random.randint(low=0,high=nvals,size=x.shape)\nz = x\ninterp.interp2d(x,y,z)\n</code></pre>\n\n<p>And of course this all ties in to you question like this: it makes a huge difference if your geometrically 1d data set is along one of the Cartesian axes, or if it's in a general way such that the coordinate values assume various different values. It's probably meaningless (or at least very ill-defined) to try 2d interpolation from a geometrically 1d data set, but at least the algorithm shouldn't break if your data are along a general direction of the <code>x,y</code> plane.</p>\n"}], "owner": {"reputation": 1104, "user_id": 5622825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/51DTw.jpg?s=128&g=1", "display_name": "erwanp", "link": "https://stackoverflow.com/users/5622825/erwanp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3210, "favorite_count": 1, "accepted_answer_id": 34656728, "answer_count": 1, "score": 5, "last_activity_date": 1452174342, "creation_date": 1452117650, "last_edit_date": 1452120616, "question_id": 34643642, "link": "https://stackoverflow.com/questions/34643642/scipy-interp2d-bisplrep-unexpected-output-when-given-1d-input", "title": "scipy interp2d/bisplrep unexpected output when given 1D input", "body": "<p>I've been having invalid input errors when working with scipy <code>interp2d</code> function. It turns out the problem comes from the <code>bisplrep</code> function, as showed here:</p>\n\n<pre><code>import numpy as np\nfrom scipy import interpolate\n\n# Case 1\nx = np.linspace(0,1)\ny = np.zeros_like(x)\nz = np.ones_like(x)\n\ntck = interpolate.bisplrep(x,y,z)  # or interp2d\n</code></pre>\n\n<p>Returns: <code>ValueError: Invalid inputs</code></p>\n\n<p>It turned out the test data I was giving <code>interp2d</code> contained only one distinct value for the 2nd axis, as in the test sample above. The <code>bisplrep</code> function inside <code>interp2d</code> considers it as an invalid output: \nThis may be considered as an acceptable behaviour: <code>interp2d</code> &amp; <code>bisplrep</code> expect a 2D grid, and I'm only giving them values <strong>along one line</strong>. </p>\n\n<p><em>On a side note, I find the error message quite unclear. One could include a test in <code>interp2d</code> to deal with such cases: something along the lines of</em></p>\n\n<pre><code>if len(np.unique(x))==1 or len(np.unique(y))==1: \n    ValueError (\"Can't build 2D splines if x or y values are all the same\")\n</code></pre>\n\n<p><em>may be enough to detect this kind of invalid input, and raise a more explicit error message, or even directly call the more appropriate <code>interp1d</code> function (which works perfectly here)</em></p>\n\n<hr>\n\n<p>I thought I had correctly understood the problem. However, consider the following code sample:</p>\n\n<pre><code># Case 2\nx = np.linspace(0,1)\ny = x\nz = np.ones_like(x)\n\ntck = interpolate.bisplrep(x,y,z)\n</code></pre>\n\n<p>In that case, <code>y</code> being proportional to <code>x</code>, I'm also feeding <code>bisplrep</code> with data along one line. But, surprisingly, <code>bisplrep</code> is able to compute a 2D spline interpolation in that case. I plotted it: </p>\n\n<pre><code># Plot\ndef plot_0to1(tck):\n    import matplotlib.pyplot as plt\n    from mpl_toolkits.mplot3d import Axes3D\n\n    X = np.linspace(0,1,10)\n    Y = np.linspace(0,1,10)\n    Z = interpolate.bisplev(X,Y,tck)\n\n    X,Y = np.meshgrid(X,Y)\n\n    fig = plt.figure()\n    ax = Axes3D(fig)\n    ax.plot_surface(X, Y, Z,rstride=1, cstride=1, cmap=cm.coolwarm,\n                    linewidth=0, antialiased=False)\n    plt.show()\n\nplot_0to1(tck)\n</code></pre>\n\n<p>The result is the following:</p>\n\n<p><img src=\"https://i.stack.imgur.com/EmPC5.png\" alt=\"Case2.png\"></p>\n\n<p>where <code>bisplrep</code> seems to fill the gaps with 0's, as better showed when I extend the plot below:</p>\n\n<p><img src=\"https://i.stack.imgur.com/bL0jD.png\" alt=\"Case2bis.png\"></p>\n\n<p>Regarding of whether adding 0 is expected, my real question is: <strong>why does <code>bisplrep</code> work in Case 2 but not in Case 1?</strong></p>\n\n<p>Or, in other words: do we want it to return an error when 2D interpolation is fed with input along one direction only (Case 1 &amp; 2 fail), or not? (Case 1 &amp; 2 should return something, even if unpredicted).</p>\n"}, {"tags": ["python", "arrays", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 3, "creation_date": 1452117929, "post_id": 34643636, "comment_id": 57033307, "body": "Sorry, I could not understand what you wrote. Could you post the script that does not work, the expected output and the error you are getting?"}, {"owner": {"reputation": 3364, "user_id": 1525423, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/xkRry.png?s=128&g=1", "display_name": "Finwood", "link": "https://stackoverflow.com/users/1525423/finwood"}, "edited": false, "score": 2, "creation_date": 1452118072, "post_id": 34643636, "comment_id": 57033385, "body": "<code>A</code>, <code>I</code> and <code>L</code> are one-dimensional arrays, so eg. <code>A[0, 1]</code> fails. Take a look at <a href=\"http://docs.scipy.org/doc/numpy-1.8.1/reference/arrays.indexing.html\" rel=\"nofollow noreferrer\">NumPy Indexing</a>"}, {"owner": {"reputation": 29, "user_id": 4658392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v2uIWIHBJRA/AAAAAAAAAAI/AAAAAAAAA_w/wwwdLQIlKKo/photo.jpg?sz=128", "display_name": "Justin Kordas", "link": "https://stackoverflow.com/users/4658392/justin-kordas"}, "edited": false, "score": 0, "creation_date": 1452119433, "post_id": 34643636, "comment_id": 57034045, "body": "I shall repost again once I get back to my computer this time with some more clarity"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 4658392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v2uIWIHBJRA/AAAAAAAAAAI/AAAAAAAAA_w/wwwdLQIlKKo/photo.jpg?sz=128", "display_name": "Justin Kordas", "link": "https://stackoverflow.com/users/4658392/justin-kordas"}, "edited": false, "score": 0, "creation_date": 1452129477, "post_id": 34644968, "comment_id": 57037311, "body": "HAHA you caught me.  I am coming from MATLAB.  I am doing my Masters in Structural Engineering and we use MATLAB for all academic work but I have been told by many people that firms don&#39;t use MATLAB to much because of the price.  I am trying to convert my MATLAB code to Python.  The variables E, A, I, and L are meant to be 1xn matrices that correspond to individual elements.  The function will go in a while loop and create a 3D matrix (6x6xnum_of_elements)."}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "reply_to_user": {"reputation": 29, "user_id": 4658392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v2uIWIHBJRA/AAAAAAAAAAI/AAAAAAAAA_w/wwwdLQIlKKo/photo.jpg?sz=128", "display_name": "Justin Kordas", "link": "https://stackoverflow.com/users/4658392/justin-kordas"}, "edited": false, "score": 0, "creation_date": 1452129864, "post_id": 34644968, "comment_id": 57037420, "body": "@JustinKordas you can use <a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.r_.html\" rel=\"nofollow noreferrer\"><code>np.r_</code></a> to emulate MATLAB&#39;s <code>[]</code> array construction syntax, e.g.  <code>np.r_[A, 0, 0, -A, 0, 0]</code>. Also, read <a href=\"https://docs.scipy.org/doc/numpy-dev/user/numpy-for-matlab-users.html\" rel=\"nofollow noreferrer\">this</a>."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1452134309, "last_edit_date": 1452134309, "creation_date": 1452123802, "answer_id": 34644968, "question_id": 34643636, "link": "https://stackoverflow.com/questions/34643636/python-3-and-numpy-array/34644968#34644968", "title": "python 3 and numpy array", "body": "<p>Your <code>k_frame_local_6x6</code> - which is ugly, virtually unreadable for ordinary humans, produces a 6x6 array when given 4 numbers.</p>\n\n<p>But as best I can tell, none of the terms is designed to work with arrays:</p>\n\n<pre><code>def k_frame_local_6x6(E, I, A, L):\n    temp = np.array([[A, 0, 0, -A, 0, 0], \n                     [0, (12*I)/(L**2), (6*I)/L, 0, (-12*I)/(L**2), (6*I)/L], \n                     [0, (6*I)/L, 4*I, 0, (-6*I)/L, 2*I], \n                     [-A, 0, 0, A, 0, 0], \n                     [0, (-12*I)/(L**2), (-6*I)/L, 0, (12*I)/(L**2), (-6*I)/L], \n                     [0, (6*I)/L, 2*I, 0, (-6*I)/L, 4*I]\n                     ])\n     return (E/L)*temp\n</code></pre>\n\n<p>Try, just for example the simplest row of terms</p>\n\n<p>np.array([-A, 0,0,A,0,0])</p>\n\n<p>That's fine if <code>A</code> is a number.  But it does not work if <code>A</code> is an array.  Well it does work, but does not return something meaningful</p>\n\n<pre><code>In [105]: A = 1000*np.array([20, 30, 20])\n\nIn [106]: np.array([A, 0, 0, -A, 0, 0])\nOut[106]: \narray([array([20000, 30000, 20000]), 0, 0, array([-20000, -30000, -20000]),\n       0, 0], dtype=object)\n</code></pre>\n\n<p>You try to pass <code>A[0, 1]</code>.  Have you tried that expression?</p>\n\n<pre><code>In [107]: A[0,1]\n---------------------------------------------------------------------------\nIndexError                                Traceback (most recent call last)\n&lt;ipython-input-107-33f18b7a38c5&gt; in &lt;module&gt;()\n----&gt; 1 A[0,1]\n\nIndexError: too many indices\n\nIn [108]: A.shape\nOut[108]: (3,)\n</code></pre>\n\n<p>It does not work because <code>A</code> is defined as 1d 3 element array.  You can't index it with 2 values.</p>\n\n<p><code>E</code> is defined as 2d array, but all the rest are 1d.  Is that intentional, or a mistake?</p>\n\n<p>It looks like you are jumping into defining a complex array without understanding the basics of <code>numpy</code> array creation and indexing.  Or are you coming from a MATLAB world where everything is 2d (or more)?  In numpy arrays can be 1d.</p>\n"}], "owner": {"reputation": 29, "user_id": 4658392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v2uIWIHBJRA/AAAAAAAAAAI/AAAAAAAAA_w/wwwdLQIlKKo/photo.jpg?sz=128", "display_name": "Justin Kordas", "link": "https://stackoverflow.com/users/4658392/justin-kordas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452134309, "creation_date": 1452117627, "last_edit_date": 1452123562, "question_id": 34643636, "link": "https://stackoverflow.com/questions/34643636/python-3-and-numpy-array", "title": "python 3 and numpy array", "body": "<p>I am trying write a code to work with arrays.  I have arrays for variables and I am trying to call certain numbers from those variables for a defined function.  I have attached a simplified snip of what I am trying to accomplish.  The code works fine when I just have the variables as a single number but when I incorporate arrays it doesn't work.</p>\n\n<pre><code>import numpy as np\n\nnoe = 3\n\n\n# E of members ksi\nE = 29000*np.ones((1, noe))\n# Area of members in^2\nA = 1000*np.array([20, 30, 20])\n# length of members in\nL = np.array([144, 240, 144])\n# moment of inertia of members in^4\nI = np.array([600, 1200, 600])\n\ndef k_frame_local_6x6(E, I, A, L):\n    return (E/L)*np.array([[A, 0, 0, -A, 0, 0], [0, (12*I)/(L**2), (6*I)/L, 0, (-12*I)/(L**2), (6*I)/L], [0, (6*I)/L, 4*I, 0, (-6*I)/L, 2*I], [-A, 0, 0, A, 0, 0], [0, (-12*I)/(L**2), (-6*I)/L, 0, (12*I)/(L**2), (-6*I)/L], [0, (6*I)/L, 2*I, 0, (-6*I)/L, 4*I]])\n\n\nm=k_frame_local_6x6(E[0, 1], I[0, 1], A[0, 1], L[0, 1])\n\nprint(m)\n</code></pre>\n\n<p>The Error I receive is \"IndexError: too many indices for array\"</p>\n\n<p>When I manually enter the values I am trying to get the function to read it works, that looks like this:</p>\n\n<pre><code>def k_frame_local_6x6(E, I, A, L):\n    return (E/L)*np.array([[A, 0, 0, -A, 0, 0], [0, (12*I)/(L**2), (6*I)/L, 0, (-12*I)/(L**2), (6*I)/L], [0, (6*I)/L, 4*I, 0, (-6*I)/L, 2*I], [-A, 0, 0, A, 0, 0], [0, (-12*I)/(L**2), (-6*I)/L, 0, (12*I)/(L**2), (-6*I)/L], [0, (6*I)/L, 2*I, 0, (-6*I)/L, 4*I]])\n\nm=k_frame_local_6x6(29000, 1200, 30000, 240)\n\nprint(m)\n</code></pre>\n\n<p>and the results I get are:</p>\n\n<pre><code>[[  3.62500000e+06   0.00000000e+00   0.00000000e+00  -3.62500000e+06\n    0.00000000e+00   0.00000000e+00]\n [  0.00000000e+00   3.02083333e+01   3.62500000e+03   0.00000000e+00\n   -3.02083333e+01   3.62500000e+03]\n [  0.00000000e+00   3.62500000e+03   5.80000000e+05   0.00000000e+00\n   -3.62500000e+03   2.90000000e+05]\n [ -3.62500000e+06   0.00000000e+00   0.00000000e+00   3.62500000e+06\n    0.00000000e+00   0.00000000e+00]\n [  0.00000000e+00  -3.02083333e+01  -3.62500000e+03   0.00000000e+00\n    3.02083333e+01  -3.62500000e+03]\n [  0.00000000e+00   3.62500000e+03   2.90000000e+05   0.00000000e+00\n   -3.62500000e+03   5.80000000e+05]]\n</code></pre>\n\n<p>One thing I have just noticed is with my ones array I have two sets of brackets:</p>\n\n<pre><code>E = 29000*np.ones((1, noe))\n</code></pre>\n\n<p>and the result is:</p>\n\n<pre><code>array([[ 29000.,  29000.,  29000.]])\n</code></pre>\n\n<p>However with the rest of the arrays I only get one bracket set:</p>\n\n<pre><code>A = 1000*np.array([20, 30, 20])\n</code></pre>\n\n<p>gives me:</p>\n\n<pre><code>array([20000, 30000, 20000])\n</code></pre>\n\n<p>Let me know if I need to clarify anything else.  Thank you all!!!</p>\n"}, {"tags": ["python", "command-line-interface", "python-click"], "answers": [{"tags": [], "owner": {"reputation": 14335, "user_id": 110963, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/096c2c331fa0c946d103e9038930f80e?s=128&d=identicon&r=PG", "display_name": "Achim", "link": "https://stackoverflow.com/users/110963/achim"}, "is_accepted": false, "score": 0, "last_activity_date": 1457540319, "creation_date": 1457540319, "answer_id": 35896955, "question_id": 34643620, "link": "https://stackoverflow.com/questions/34643620/how-can-i-split-my-click-commands-each-with-a-set-of-sub-commands-into-multipl/35896955#35896955", "title": "How can I split my Click commands, each with a set of sub-commands, into multiple files?", "body": "<p>I'm not an click expert, but it should work by just importing your files into the main one. I would move all commands in separate files and have one main file importing the other ones. That way it is easier to control the exact order, in case it is important for you. So your main file would just look like:</p>\n\n<pre><code>import commands_main\nimport commands_cloudflare\nimport commands_uptimerobot\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3894, "user_id": 279355, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dd83e44550f39bea6f712af8d3aef3?s=128&d=identicon&r=PG", "display_name": "grundic", "link": "https://stackoverflow.com/users/279355/grundic"}, "edited": false, "score": 0, "creation_date": 1472128806, "post_id": 36023703, "comment_id": 65634988, "body": "Can you please tell, what to put into the sub-command files? I have to import main <code>cli</code> from init.py, but this leads to circular imports. Could you please explain how to do it?"}, {"owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "reply_to_user": {"reputation": 3894, "user_id": 279355, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dd83e44550f39bea6f712af8d3aef3?s=128&d=identicon&r=PG", "display_name": "grundic", "link": "https://stackoverflow.com/users/279355/grundic"}, "edited": false, "score": 0, "creation_date": 1472561888, "post_id": 36023703, "comment_id": 65793417, "body": "@grundic Check out my answer if you haven&#39;t figured out a solution yet. It might put you on the right track."}, {"owner": {"reputation": 669, "user_id": 1091929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99c1ef33edd5b697cebcd9b04aa01321?s=128&d=identicon&r=PG", "display_name": "Oscar David Arbel&#225;ez", "link": "https://stackoverflow.com/users/1091929/oscar-david-arbel%c3%a1ez"}, "reply_to_user": {"reputation": 3894, "user_id": 279355, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/87dd83e44550f39bea6f712af8d3aef3?s=128&d=identicon&r=PG", "display_name": "grundic", "link": "https://stackoverflow.com/users/279355/grundic"}, "edited": false, "score": 1, "creation_date": 1477861660, "post_id": 36023703, "comment_id": 67922279, "body": "@grundic I hope you figured already, but in your sub command files you just create a new <code>click.group</code> that&#39;s the one you import in the top level CLI."}], "tags": [], "owner": {"reputation": 669, "user_id": 1091929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99c1ef33edd5b697cebcd9b04aa01321?s=128&d=identicon&r=PG", "display_name": "Oscar David Arbel&#225;ez", "link": "https://stackoverflow.com/users/1091929/oscar-david-arbel%c3%a1ez"}, "is_accepted": false, "score": 10, "last_activity_date": 1556288027, "last_edit_date": 1556288027, "creation_date": 1458082069, "answer_id": 36023703, "question_id": 34643620, "link": "https://stackoverflow.com/questions/34643620/how-can-i-split-my-click-commands-each-with-a-set-of-sub-commands-into-multipl/36023703#36023703", "title": "How can I split my Click commands, each with a set of sub-commands, into multiple files?", "body": "<p>I'm looking for something like this at the moment, in your case is simple because you have groups in each of the files, you can solve this problem as explained in the <a href=\"http://click.pocoo.org/5/commands/#merging-multi-commands\" rel=\"nofollow noreferrer\" title=\"documentation\">documentation</a>:</p>\n\n<p>In the <code>init.py</code> file:</p>\n\n<pre><code>import click\n\nfrom command_cloudflare import cloudflare\nfrom command_uptimerobot import uptimerobot\n\ncli = click.CommandCollection(sources=[cloudflare, uptimerobot])\n\nif __name__ == '__main__':\n    cli()\n</code></pre>\n\n<p>The best part of this solution is that is totally compliant with pep8 and other linters because you don't need to import something you wouldn't use and you don't need to import * from anywhere.</p>\n"}, {"comments": [{"owner": {"reputation": 3623, "user_id": 1191081, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/fa3d5087efdc3a9005f4891def65d01f?s=128&d=identicon&r=PG", "display_name": "vishal", "link": "https://stackoverflow.com/users/1191081/vishal"}, "edited": false, "score": 0, "creation_date": 1489159793, "post_id": 39228156, "comment_id": 72563839, "body": "how to pass context to  subcommand if they are in separate modules?"}, {"owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "reply_to_user": {"reputation": 3623, "user_id": 1191081, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/fa3d5087efdc3a9005f4891def65d01f?s=128&d=identicon&r=PG", "display_name": "vishal", "link": "https://stackoverflow.com/users/1191081/vishal"}, "edited": false, "score": 2, "creation_date": 1489250551, "post_id": 39228156, "comment_id": 72593535, "body": "@vishal, have a look at this section of the documentation: <a href=\"http://click.pocoo.org/6/commands/#nested-handling-and-contexts\" rel=\"nofollow noreferrer\">click.pocoo.org/6/commands/#nested-handling-and-contexts</a> You can pass the context object to any command using the decorator <code>@click.pass_context</code>. Alternatively, there is also something called <i>Global Context Access</i>: <a href=\"http://click.pocoo.org/6/advanced/#global-context-access\" rel=\"nofollow noreferrer\">click.pocoo.org/6/advanced/#global-context-access</a>."}, {"owner": {"reputation": 9808, "user_id": 671013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2d735ca95ae6d53fa8fd9fa79814e514?s=128&d=identicon&r=PG", "display_name": "Dror", "link": "https://stackoverflow.com/users/671013/dror"}, "edited": false, "score": 6, "creation_date": 1506440064, "post_id": 39228156, "comment_id": 79818300, "body": "I compiled a MWE using @jdno guidelines. You can find it <a href=\"https://github.com/drorata/mwe-subcommands-click\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 10209, "user_id": 1637673, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/102059d423f2265e737117ce0947e7ee?s=128&d=identicon&r=PG", "display_name": "Mithril", "link": "https://stackoverflow.com/users/1637673/mithril"}, "edited": false, "score": 0, "creation_date": 1540890285, "post_id": 39228156, "comment_id": 93019865, "body": "How can I flat all group command ? I mean, all commands in first level ."}, {"owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "reply_to_user": {"reputation": 10209, "user_id": 1637673, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/102059d423f2265e737117ce0947e7ee?s=128&d=identicon&r=PG", "display_name": "Mithril", "link": "https://stackoverflow.com/users/1637673/mithril"}, "edited": false, "score": 3, "creation_date": 1540891061, "post_id": 39228156, "comment_id": 93020287, "body": "@Mithril Use a <code>CommandCollection</code>. Oscar&#39;s answer has an example, and there is a really nice one in click&#39;s documentation: <a href=\"https://click.palletsprojects.com/en/7.x/commands/#merging-multi-commands\" rel=\"nofollow noreferrer\">click.palletsprojects.com/en/7.x/commands/&hellip;</a>."}, {"owner": {"reputation": 108, "user_id": 1289093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a6c29d28cfef0083a51a0296060520b?s=128&d=identicon&r=PG", "display_name": "yolabingo", "link": "https://stackoverflow.com/users/1289093/yolabingo"}, "edited": false, "score": 0, "creation_date": 1545184319, "post_id": 39228156, "comment_id": 94535063, "body": "<code>from inspect import getmembers; </code>  <code>for (mname, mvalue) in getmembers(group1): if isinstance(mvalue, click.core.Command): entry_point.add_command(mvalue)</code> forgive formatting"}], "tags": [], "owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "is_accepted": true, "score": 102, "last_activity_date": 1474532333, "last_edit_date": 1474532333, "creation_date": 1472561843, "answer_id": 39228156, "question_id": 34643620, "link": "https://stackoverflow.com/questions/34643620/how-can-i-split-my-click-commands-each-with-a-set-of-sub-commands-into-multipl/39228156#39228156", "title": "How can I split my Click commands, each with a set of sub-commands, into multiple files?", "body": "<p>The downside of using <code>CommandCollection</code> for this is that it merges your commands and works only with command groups. The imho better alternative is to use <code>add_command</code> to achieve the same result.</p>\n\n<p>I have a project with the following tree:</p>\n\n<pre><code>cli/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 cli.py\n\u251c\u2500\u2500 group1\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 commands.py\n\u2514\u2500\u2500 group2\n    \u251c\u2500\u2500 __init__.py\n    \u2514\u2500\u2500 commands.py\n</code></pre>\n\n<p>Each subcommand has its own module, what makes it incredibly easy to manage even complex implementations with many more helper classes and files. In each module, the <code>commands.py</code> file contains the <code>@click</code> annotations. Example <code>group2/commands.py</code>:</p>\n\n<pre><code>import click\n\n\n@click.command()\ndef version():\n    \"\"\"Display the current version.\"\"\"\n    click.echo(_read_version())\n</code></pre>\n\n<p>If necessary, you could easily create more classes in the module, and <code>import</code> and use them here, thus giving your CLI the full power of Python's classes and modules.</p>\n\n<p>My <code>cli.py</code> is the entry point for the whole CLI:</p>\n\n<pre><code>import click\n\nfrom .group1 import commands as group1\nfrom .group2 import commands as group2\n\n@click.group()\ndef entry_point():\n    pass\n\nentry_point.add_command(group1.command_group)\nentry_point.add_command(group2.version)\n</code></pre>\n\n<p>With this setup, it is very easy to separate your commands by concerns, and also build additional functionality around them that they might need. It has served me very well so far...</p>\n\n<p>Reference:\n<a href=\"http://click.pocoo.org/6/quickstart/#nesting-commands\" rel=\"noreferrer\">http://click.pocoo.org/6/quickstart/#nesting-commands</a></p>\n"}, {"comments": [{"owner": {"reputation": 595, "user_id": 2915625, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000942385899/picture?type=large", "display_name": "Simon Kemper", "link": "https://stackoverflow.com/users/2915625/simon-kemper"}, "edited": false, "score": 7, "creation_date": 1530738984, "post_id": 39416589, "comment_id": 89344080, "body": "Agree. So minimal that it should be part of the documentation. Exactly what I was looking for to build complex tools! Thanks \ud83d\ude4f!"}, {"owner": {"reputation": 1683, "user_id": 2926992, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/2w3LT.jpg?s=128&g=1", "display_name": "Erdin Eray", "link": "https://stackoverflow.com/users/2926992/erdin-eray"}, "edited": false, "score": 0, "creation_date": 1568805455, "post_id": 39416589, "comment_id": 102390032, "body": "It sure is great but got a question: Considering your example, should I remove <code>@cloudflare.command()</code> from <code>zone</code> function <b>if</b> I import <code>zone</code> from somewhere else?"}, {"owner": {"reputation": 371, "user_id": 3906786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80f70bcf659761b21fdb4c08dc6e931c?s=128&d=identicon&r=PG", "display_name": "Thomas Klinger", "link": "https://stackoverflow.com/users/3906786/thomas-klinger"}, "edited": false, "score": 0, "creation_date": 1584009471, "post_id": 39416589, "comment_id": 107306638, "body": "This is an excellent information I was looking for. Another good example on how to distinguish between command groups can be found here: <a href=\"https://github.com/dagster-io/dagster/tree/master/python_modules/dagster\" rel=\"nofollow noreferrer\">github.com/dagster-io/dagster/tree/master/python_modules/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1596, "user_id": 1913837, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/704505135272c18219c2e168eac2a56b?s=128&d=identicon&r=PG", "display_name": "Diego Castro", "link": "https://stackoverflow.com/users/1913837/diego-castro"}, "is_accepted": false, "score": 40, "last_activity_date": 1560520066, "last_edit_date": 1560520066, "creation_date": 1473441011, "answer_id": 39416589, "question_id": 34643620, "link": "https://stackoverflow.com/questions/34643620/how-can-i-split-my-click-commands-each-with-a-set-of-sub-commands-into-multipl/39416589#39416589", "title": "How can I split my Click commands, each with a set of sub-commands, into multiple files?", "body": "<p>Suppose your project have the following structure:</p>\n\n<pre><code>project/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 init.py\n\u2514\u2500\u2500 commands\n    \u251c\u2500\u2500 __init__.py\n    \u2514\u2500\u2500 cloudflare.py\n</code></pre>\n\n<p>Groups are nothing more than multiple commands and groups can be nested. You can separate your groups into modules and import them on you <code>init.py</code> file and add them to the <code>cli</code> group using the add_command.</p>\n\n<p>Here is a <code>init.py</code> example:</p>\n\n<pre><code>import click\nfrom .commands.cloudflare import cloudflare\n\n\n@click.group()\ndef cli():\n    pass\n\n\ncli.add_command(cloudflare)\n</code></pre>\n\n<p>You have to import the cloudflare group which lives inside the cloudflare.py file.  Your <code>commands/cloudflare.py</code> would look like this:</p>\n\n<pre><code>import click\n\n\n@click.group()\ndef cloudflare():\n    pass\n\n\n@cloudflare.command()\ndef zone():\n    click.echo('This is the zone subcommand of the cloudflare command')\n</code></pre>\n\n<p>Then you can run the cloudflare command like this:</p>\n\n<pre><code>$ python init.py cloudflare zone\n</code></pre>\n\n<p>This information is not very explicit on the documentation but if you look at the source code, which is very well commented, you can see how groups can be nested.</p>\n"}, {"comments": [{"owner": {"reputation": 4617, "user_id": 260229, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HEr55.png?s=128&g=1", "display_name": "Mahmoud K.", "link": "https://stackoverflow.com/users/260229/mahmoud-k"}, "edited": false, "score": 0, "creation_date": 1618497222, "post_id": 61353240, "comment_id": 118623511, "body": "does this work if your function are split into different modules?"}, {"owner": {"reputation": 91, "user_id": 12993667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66033c14160f62f21364c90b7b500c87?s=128&d=identicon&r=PG&f=1", "display_name": "garlicbread", "link": "https://stackoverflow.com/users/12993667/garlicbread"}, "reply_to_user": {"reputation": 4617, "user_id": 260229, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HEr55.png?s=128&g=1", "display_name": "Mahmoud K.", "link": "https://stackoverflow.com/users/260229/mahmoud-k"}, "edited": false, "score": 1, "creation_date": 1618499546, "post_id": 61353240, "comment_id": 118624751, "body": "I&#39;ve had options split over different modules, the idea being you can have a top level menu in one module, then more sub options underneath in other modules."}], "tags": [], "owner": {"reputation": 91, "user_id": 12993667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66033c14160f62f21364c90b7b500c87?s=128&d=identicon&r=PG&f=1", "display_name": "garlicbread", "link": "https://stackoverflow.com/users/12993667/garlicbread"}, "is_accepted": false, "score": 6, "last_activity_date": 1587503112, "creation_date": 1587503112, "answer_id": 61353240, "question_id": 34643620, "link": "https://stackoverflow.com/questions/34643620/how-can-i-split-my-click-commands-each-with-a-set-of-sub-commands-into-multipl/61353240#61353240", "title": "How can I split my Click commands, each with a set of sub-commands, into multiple files?", "body": "<p>It took me a while to figure this out\nbut I figured I'd put this here to remind myself when I forget how to do i again\nI think part of the problem is that the add_command function is mentioned on click's github page but not the main examples page</p>\n\n<p>first lets create an initial python file called root.py</p>\n\n<pre><code>import click\nfrom cli_compile import cli_compile\nfrom cli_tools import cli_tools\n\n@click.group()\ndef main():\n    \"\"\"Demo\"\"\"\n\nif __name__ == '__main__':\n    main.add_command(cli_tools)\n    main.add_command(cli_compile)\n    main()\n\n</code></pre>\n\n<p>Next lets put some tools commands in a file called cli_tools.py</p>\n\n<pre><code>import click\n\n# Command Group\n@click.group(name='tools')\ndef cli_tools():\n    \"\"\"Tool related commands\"\"\"\n    pass\n\n@cli_tools.command(name='install', help='test install')\n@click.option('--test1', default='1', help='test option')\ndef install_cmd(test1):\n    click.echo('Hello world')\n\n@cli_tools.command(name='search', help='test search')\n@click.option('--test1', default='1', help='test option')\ndef search_cmd(test1):\n    click.echo('Hello world')\n\nif __name__ == '__main__':\n    cli_tools()\n</code></pre>\n\n<p>Next lets put some compile commands in a file called cli_compile.py</p>\n\n<pre><code>import click\n\n@click.group(name='compile')\ndef cli_compile():\n    \"\"\"Commands related to compiling\"\"\"\n    pass\n\n@cli_compile.command(name='install2', help='test install')\ndef install2_cmd():\n    click.echo('Hello world')\n\n@cli_compile.command(name='search2', help='test search')\ndef search2_cmd():\n    click.echo('Hello world')\n\nif __name__ == '__main__':\n    cli_compile()\n</code></pre>\n\n<p>running root.py should now give us</p>\n\n<pre><code>Usage: root.py [OPTIONS] COMMAND [ARGS]...\n\n  Demo\n\nOptions:\n  --help  Show this message and exit.\n\nCommands:\n  compile  Commands related to compiling\n  tools    Tool related commands\n</code></pre>\n\n<p>running \"root.py compile\" should give us</p>\n\n<pre><code>Usage: root.py compile [OPTIONS] COMMAND [ARGS]...\n\n  Commands related to compiling\n\nOptions:\n  --help  Show this message and exit.\n\nCommands:\n  install2  test install\n  search2   test search\n</code></pre>\n\n<p>You'll also notice you can run the cli_tools.py or cli_compile.py directly as well as I included a main statement in there</p>\n"}, {"tags": [], "owner": {"reputation": 2710, "user_id": 160863, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YMMma.jpg?s=128&g=1", "display_name": "dancow", "link": "https://stackoverflow.com/users/160863/dancow"}, "is_accepted": false, "score": 1, "last_activity_date": 1596826687, "last_edit_date": 1596826687, "creation_date": 1596822080, "answer_id": 63306791, "question_id": 34643620, "link": "https://stackoverflow.com/questions/34643620/how-can-i-split-my-click-commands-each-with-a-set-of-sub-commands-into-multipl/63306791#63306791", "title": "How can I split my Click commands, each with a set of sub-commands, into multiple files?", "body": "<p><strong>edit:</strong> just realized that my answer/comment is little more than a rehash of what Click's official docs offer in the &quot;Custom Multi Commands&quot; section: <a href=\"https://click.palletsprojects.com/en/7.x/commands/#custom-multi-commands\" rel=\"nofollow noreferrer\">https://click.palletsprojects.com/en/7.x/commands/#custom-multi-commands</a></p>\n<p>Just to add to the excellent, accepted answer by @jdno, I came up with a helper function that auto-imports and auto-adds subcommand modules, which vastly cut down on the boilerplate in my <code>cli.py</code>:</p>\n<p>My project structure is this:</p>\n<pre><code>projectroot/\n    __init__.py\n    console/\n    \u2502\n    \u251c\u2500\u2500 cli.py\n    \u2514\u2500\u2500 subcommands\n    \u00a0\u00a0 \u251c\u2500\u2500 bar.py\n    \u00a0\u00a0 \u251c\u2500\u2500 foo.py\n       \u2514\u2500\u2500 hello.py\n</code></pre>\n<p>Each subcommand file looks something like this:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import click\n\n@click.command()\ndef foo():\n    &quot;&quot;&quot;foo this is for foos!&quot;&quot;&quot;\n    click.secho(&quot;FOO&quot;, fg=&quot;red&quot;, bg=&quot;white&quot;)\n\n</code></pre>\n<p>(for now, I just have one subcommand per file)</p>\n<p>In <code>cli.py</code>, I've written a <code>add_subcommand()</code> function that loops through every filepath globbed by &quot;subcommands/*.py&quot; and then does the import and add command.</p>\n<p>Here's what the body of the cli.py script is simplified to:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import click\nimport importlib\nfrom pathlib import Path\nimport re\n\n@click.group()\ndef entry_point():\n    &quot;&quot;&quot;whats up, this is the main function&quot;&quot;&quot;\n    pass\n\ndef main():\n    add_subcommands()\n    entry_point()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n<p>And this is what the <code>add_subcommands()</code> function looks like:</p>\n<pre class=\"lang-py prettyprint-override\"><code>\nSUBCOMMAND_DIR = Path(&quot;projectroot/console/subcommands&quot;)\n\ndef add_subcommands(maincommand=entry_point):\n    for modpath in SUBCOMMAND_DIR.glob('*.py'):\n        modname = re.sub(f'/', '.',  str(modpath)).rpartition('.py')[0]\n        mod = importlib.import_module(modname)\n        # filter out any things that aren't a click Command\n        for attr in dir(mod):\n            foo = getattr(mod, attr)\n            if callable(foo) and type(foo) is click.core.Command:\n                maincommand.add_command(foo)\n</code></pre>\n<p>I don't know how robust this is if I were to design a command that had several levels of nesting and context switching. But it seems to work all right for now :)</p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 5945646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41a4b0a8b55df292d41735cf52afb7d3?s=128&d=identicon&r=PG&f=1", "display_name": "Pulia Zlaya", "link": "https://stackoverflow.com/users/5945646/pulia-zlaya"}, "is_accepted": false, "score": 0, "last_activity_date": 1618912183, "creation_date": 1618912183, "answer_id": 67176507, "question_id": 34643620, "link": "https://stackoverflow.com/questions/34643620/how-can-i-split-my-click-commands-each-with-a-set-of-sub-commands-into-multipl/67176507#67176507", "title": "How can I split my Click commands, each with a set of sub-commands, into multiple files?", "body": "<p>When you want your user to pip install &quot;your_module&quot;, and then use commands, you can add them in setup.py <code>entry_points</code> as a list:</p>\n<pre><code>entry_points={\n    'console_scripts': [\n        'command_1 = src.cli:function_command_1',\n        'command_2 = src.cli:function_command_2',\n    ]\n</code></pre>\n<p>each command is bounded to function in a cli file.</p>\n"}], "owner": {"reputation": 1223, "user_id": 5719837, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/04f626512fb8ea181b03933496027bb2?s=128&d=identicon&r=PG&f=1", "display_name": "Brad T", "link": "https://stackoverflow.com/users/5719837/brad-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40320, "favorite_count": 25, "accepted_answer_id": 39228156, "answer_count": 7, "score": 91, "last_activity_date": 1618912183, "creation_date": 1452117527, "question_id": 34643620, "link": "https://stackoverflow.com/questions/34643620/how-can-i-split-my-click-commands-each-with-a-set-of-sub-commands-into-multipl", "title": "How can I split my Click commands, each with a set of sub-commands, into multiple files?", "body": "<p>I have one large click application that I've developed, but navigating through the different commands/subcommands is getting rough. How do I organize my commands into separate files? Is it possible to organize commands and their subcommands into separate classes?</p>\n\n<p>Here's an example of how I would like to separate it:</p>\n\n<h2><strong>init</strong></h2>\n\n<pre><code>import click\n\n@click.group()\n@click.version_option()\ndef cli():\n    pass #Entry Point\n</code></pre>\n\n<h2>command_cloudflare.py</h2>\n\n<pre><code>@cli.group()\n@click.pass_context\ndef cloudflare(ctx):\n    pass\n\n@cloudflare.group('zone')\ndef cloudflare_zone():\n    pass\n\n@cloudflare_zone.command('add')\n@click.option('--jumpstart', '-j', default=True)\n@click.option('--organization', '-o', default='')\n@click.argument('url')\n@click.pass_obj\n@__cf_error_handler\ndef cloudflare_zone_add(ctx, url, jumpstart, organization):\n    pass\n\n@cloudflare.group('record')\ndef cloudflare_record():\n    pass\n\n@cloudflare_record.command('add')\n@click.option('--ttl', '-t')\n@click.argument('domain')\n@click.argument('name')\n@click.argument('type')\n@click.argument('content')\n@click.pass_obj\n@__cf_error_handler\ndef cloudflare_record_add(ctx, domain, name, type, content, ttl):\n    pass\n\n@cloudflare_record.command('edit')\n@click.option('--ttl', '-t')\n@click.argument('domain')\n@click.argument('name')\n@click.argument('type')\n@click.argument('content')\n@click.pass_obj\n@__cf_error_handler\ndef cloudflare_record_edit(ctx, domain):\n    pass\n</code></pre>\n\n<h2>command_uptimerobot.py</h2>\n\n<pre><code>@cli.group()\n@click.pass_context\ndef uptimerobot(ctx):\n    pass\n\n@uptimerobot.command('add')\n@click.option('--alert', '-a', default=True)\n@click.argument('name')\n@click.argument('url')\n@click.pass_obj\ndef uptimerobot_add(ctx, name, url, alert):\n    pass\n\n@uptimerobot.command('delete')\n@click.argument('names', nargs=-1, required=True)\n@click.pass_obj\ndef uptimerobot_delete(ctx, names):\n    pass\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "plot"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5754487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1520a66d9984524dcc29db7af5d559b?s=128&d=identicon&r=PG&f=1", "display_name": "Gina", "link": "https://stackoverflow.com/users/5754487/gina"}, "is_accepted": false, "score": 0, "last_activity_date": 1452124607, "creation_date": 1452124607, "answer_id": 34645104, "question_id": 34643594, "link": "https://stackoverflow.com/questions/34643594/plotting-error-when-plotting-multiple-points-with-asymmetric-errorbars-using-pyt/34645104#34645104", "title": "Plotting error when plotting multiple points with asymmetric errorbars using Python", "body": "<p>Turned out that the transforms should not be performed because the errors array is already in the correct format.</p>\n\n<pre><code>plt.errorbar(x[:2]+0.5,y[:2]+0.5,np.array(errors)[:2,:],fmt='d')\nplt.errorbar(x,y,np.array(errors),fmt='o')\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5754487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1520a66d9984524dcc29db7af5d559b?s=128&d=identicon&r=PG&f=1", "display_name": "Gina", "link": "https://stackoverflow.com/users/5754487/gina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 553, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452124607, "creation_date": 1452117456, "question_id": 34643594, "link": "https://stackoverflow.com/questions/34643594/plotting-error-when-plotting-multiple-points-with-asymmetric-errorbars-using-pyt", "title": "Plotting error when plotting multiple points with asymmetric errorbars using Python", "body": "<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\nx=np.array([1,2,3])\ny=np.array([2,4,5])\nerrors = [[0.1,0.2,0.3],[0.5,0.1,0.4]] #[lower_errorbars, upper_errorbars]\n</code></pre>\n\n<p>When I plot just two points, they look fine (see dimond points on plot below)</p>\n\n<pre><code>plt.errorbar(x[:2]+0.5,y[:2]+0.5,np.array(errors).T[:2,:],fmt='d')\n</code></pre>\n\n<p>But when I plot three points, an end cap is shown at each errorbar length with the line wandering somewhere else (see round points).</p>\n\n<pre><code>plt.errorbar(x,y,np.array(errors).T,fmt='o')\nplt.show()\n</code></pre>\n\n<p>Please help me fix this issue! </p>\n\n<p>I don't have enough reputation at the moment to attach the plot that this code makes. I'll work on it, but would really appreciate some help in the meantime. </p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 8784, "user_id": 786223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fi4pw.jpg?s=128&g=1", "display_name": "Chris Nauroth", "link": "https://stackoverflow.com/users/786223/chris-nauroth"}, "edited": false, "score": 3, "creation_date": 1452117564, "post_id": 34643579, "comment_id": 57033126, "body": "Have you looked at the contents of realtime.json to see if it is valid JSON?  The error message points out specifically where in the file it had trouble."}, {"owner": {"reputation": 4308, "user_id": 3466196, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/680028743/picture?type=large", "display_name": "bobbyz", "link": "https://stackoverflow.com/users/3466196/bobbyz"}, "edited": false, "score": 3, "creation_date": 1452117736, "post_id": 34643579, "comment_id": 57033215, "body": "Check out <a href=\"http://jsonlint.com/\" rel=\"nofollow noreferrer\">jsonlint.com</a>. Paste in your JSON file and see if it&#39;s valid."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1452118885, "post_id": 34643579, "comment_id": 57033782, "body": "The question is incomplete without enough information to reproduce the problem -- in this case, that means a JSON file cut down to contain minimum necessary contents that repro the bug."}, {"owner": {"reputation": 45, "user_id": 5405217, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-dWPGZ6mJmH0/AAAAAAAAAAI/AAAAAAAAACA/G9BymsxVLhE/photo.jpg?sz=128", "display_name": "manchester77", "link": "https://stackoverflow.com/users/5405217/manchester77"}, "edited": false, "score": 0, "creation_date": 1452123315, "post_id": 34643579, "comment_id": 57035598, "body": "Thank you for the quick response. I double check the file, it&#39;s not a json file, instead it&#39;s a file with line-delimited json object."}], "answers": [{"comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1452118132, "post_id": 34643713, "comment_id": 57033414, "body": "No. This has nothing to do with encoding, and even if it did putting that declaration would not help in any way at all."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1452118932, "post_id": 34643713, "comment_id": 57033801, "body": "...particularly, has nothing to do with the <i>source file</i>&#39;s encoding, as it&#39;s occurring when parsing content which is not itself Python source."}], "tags": [], "owner": {"reputation": 11, "user_id": 5728186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uNsUf.jpg?s=128&g=1", "display_name": "stackfy", "link": "https://stackoverflow.com/users/5728186/stackfy"}, "is_accepted": false, "score": -3, "last_activity_date": 1452117975, "creation_date": 1452117975, "answer_id": 34643713, "question_id": 34643579, "link": "https://stackoverflow.com/questions/34643579/reading-a-file-containing-a-stream-of-json-documents/34643713#34643713", "title": "Reading a file containing a stream of JSON documents", "body": "<p>Ussualy this error could be due an unicode encoding, </p>\n\n<p>Try to put this directive in the first line of your code file</p>\n\n<pre><code># -*- coding: utf-8 -*-\n</code></pre>\n\n<p>Otherwise try to open the file, edit the line with troublemaker char and add the error in the question to help you better</p>\n"}, {"tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": false, "score": 0, "last_activity_date": 1452125435, "creation_date": 1452125435, "answer_id": 34645227, "question_id": 34643579, "link": "https://stackoverflow.com/questions/34643579/reading-a-file-containing-a-stream-of-json-documents/34645227#34645227", "title": "Reading a file containing a stream of JSON documents", "body": "<p>If you're parsing a string (as what you get in <code>for line in file</code>), use <code>json.loads()</code>, not <code>json.load()</code> [which expects a file-like object, and is thus complaining when you pass it a string instead].</p>\n\n<p>Thus something like:</p>\n\n<pre><code>for line in infile:\n    auth.append(json.loads(line))\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 5405217, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-dWPGZ6mJmH0/AAAAAAAAAAI/AAAAAAAAACA/G9BymsxVLhE/photo.jpg?sz=128", "display_name": "manchester77", "link": "https://stackoverflow.com/users/5405217/manchester77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452125435, "creation_date": 1452117382, "last_edit_date": 1452125401, "question_id": 34643579, "link": "https://stackoverflow.com/questions/34643579/reading-a-file-containing-a-stream-of-json-documents", "title": "Reading a file containing a stream of JSON documents", "body": "<p>I have an input file with a JSON document per line. I'm trying to read it as follows:</p>\n\n<pre><code>import json\nauth = []\nwith open(\"test.json\",'rb') as authfile:\n    infile=authfile.readlines()\n    for line in infile:  \n        auth_record = json.load(line)\n        auth.append(auth_record)\n</code></pre>\n\n<p>And I got the below error. What went wrong?</p>\n\n<pre><code>auth_record = json.load(line)\n  File \"/opt/anaconda/anaconda/lib/python2.7/json/__init__.py\", line 286, in load\n    return loads(fp.read(),\n AttributeError: 'str' object has no attribute 'read'\n</code></pre>\n"}, {"tags": ["python", "arrays", "scikit-learn", "mahalanobis"], "answers": [{"comments": [{"owner": {"reputation": 7423, "user_id": 2605112, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/MpAe0.png?s=128&g=1", "display_name": "makansij", "link": "https://stackoverflow.com/users/2605112/makansij"}, "edited": false, "score": 1, "creation_date": 1452206069, "post_id": 34650347, "comment_id": 57078626, "body": "how do you use the distance metric, in, say <code>nearest neighbors</code> or clustering?  When I try to use it, I get <code>ValueError: Metric not valid for algorithm &#39;auto&#39;</code>."}, {"owner": {"reputation": 5359, "user_id": 1150479, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JcgbZ.jpg?s=128&g=1", "display_name": "tttthomasssss", "link": "https://stackoverflow.com/users/1150479/tttthomasssss"}, "reply_to_user": {"reputation": 7423, "user_id": 2605112, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/MpAe0.png?s=128&g=1", "display_name": "makansij", "link": "https://stackoverflow.com/users/2605112/makansij"}, "edited": false, "score": 1, "creation_date": 1452240661, "post_id": 34650347, "comment_id": 57089643, "body": "@Sother I&#39;ve added a <code>NearestNeighbor</code> example to my answer."}, {"owner": {"reputation": 7423, "user_id": 2605112, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/MpAe0.png?s=128&g=1", "display_name": "makansij", "link": "https://stackoverflow.com/users/2605112/makansij"}, "edited": false, "score": 0, "creation_date": 1452266873, "post_id": 34650347, "comment_id": 57106477, "body": "Works for <code>NearestNeighbors</code>, but I don&#39;t see a <code>&quot;metric_params&quot;</code> for <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html\" rel=\"nofollow noreferrer\"><code>DBSCAN</code></a> and clustering algos?"}, {"owner": {"reputation": 7423, "user_id": 2605112, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/MpAe0.png?s=128&g=1", "display_name": "makansij", "link": "https://stackoverflow.com/users/2605112/makansij"}, "edited": false, "score": 0, "creation_date": 1452267382, "post_id": 34650347, "comment_id": 57106839, "body": "I tried using <code>dm = DistanceMetric.get_metric(&#39;mahalanobis&#39;,VI=icov)</code> distance function, and then <code>db = DBSCAN(eps=x, min_samples=1, metric=&#39;pyfunc&#39;, func=&#39;dm&#39;, algorithm=&#39;brute&#39;).fit(np.array(X_train_numeric))</code> but it doesn&#39;t recognize the <code>&quot;func&quot;</code> as a parameter."}, {"owner": {"reputation": 5359, "user_id": 1150479, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JcgbZ.jpg?s=128&g=1", "display_name": "tttthomasssss", "link": "https://stackoverflow.com/users/1150479/tttthomasssss"}, "reply_to_user": {"reputation": 7423, "user_id": 2605112, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/MpAe0.png?s=128&g=1", "display_name": "makansij", "link": "https://stackoverflow.com/users/2605112/makansij"}, "edited": false, "score": 1, "creation_date": 1452274296, "post_id": 34650347, "comment_id": 57111559, "body": "@Sother I&#39;ve never used <code>mahalanobis</code> distance with <code>DBSCAN</code>, but it looks like as if it is not yet properly supported for <code>DBSCAN</code> - I&#39;d recommend opening an issue on github or asking on the <code>sklearn</code> mailing list."}, {"owner": {"reputation": 475, "user_id": 6008271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3195d3bb817bc594f1e2f3d41fbf21d?s=128&d=identicon&r=PG&f=1", "display_name": "OscarVanL", "link": "https://stackoverflow.com/users/6008271/oscarvanl"}, "edited": false, "score": 0, "creation_date": 1584038451, "post_id": 34650347, "comment_id": 107321461, "body": "I get the error &#39;DeprecationWarning: Got unexpected kwarg V. This will raise an error in a future version.&#39; using your code snippet in the edit.  This is because Scikit Learn has depreciated the &#39;V&#39; argument for Mahalanobis distance. Now &#39;VI&#39; must be used. This argument is documented <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.pdist.html\" rel=\"nofollow noreferrer\">here</a>. This is set to inv(cov(X.T)).T, or <code>np.linalg.inv(np.cov(X_train.transpose())).transpose()</code> in python."}, {"owner": {"reputation": 5359, "user_id": 1150479, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JcgbZ.jpg?s=128&g=1", "display_name": "tttthomasssss", "link": "https://stackoverflow.com/users/1150479/tttthomasssss"}, "reply_to_user": {"reputation": 475, "user_id": 6008271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3195d3bb817bc594f1e2f3d41fbf21d?s=128&d=identicon&r=PG&f=1", "display_name": "OscarVanL", "link": "https://stackoverflow.com/users/6008271/oscarvanl"}, "edited": false, "score": 0, "creation_date": 1584096543, "post_id": 34650347, "comment_id": 107337890, "body": "@OscarVanL Whats your use-case? When you&#39;re using <code>DBSCAN</code>, you might need to precompute the pairwise distances yourself, then pass the distance matrix together with ` metric=&#39;precomputed&#39;` to the algorithm."}, {"owner": {"reputation": 475, "user_id": 6008271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3195d3bb817bc594f1e2f3d41fbf21d?s=128&d=identicon&r=PG&f=1", "display_name": "OscarVanL", "link": "https://stackoverflow.com/users/6008271/oscarvanl"}, "edited": false, "score": 0, "creation_date": 1584373403, "post_id": 34650347, "comment_id": 107410896, "body": "I&#39;m not using DBSCAN, I&#39;m using K-NN with Mahalanobis distance as the distance metric."}, {"owner": {"reputation": 367, "user_id": 5166390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b7bb9209afde46b6198b112c991011?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Conway", "link": "https://stackoverflow.com/users/5166390/ian-conway"}, "edited": false, "score": 0, "creation_date": 1598639894, "post_id": 34650347, "comment_id": 112535054, "body": "Do you know if it&#39;s possible to use kd tree or ball tree with mahalanobis distance in sklearn? brute force is not an option at the scale I&#39;m working with"}, {"owner": {"reputation": 67, "user_id": 7787894, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gnu0a.jpg?s=128&g=1", "display_name": "Vandana Chandola", "link": "https://stackoverflow.com/users/7787894/vandana-chandola"}, "edited": false, "score": 0, "creation_date": 1600106941, "post_id": 34650347, "comment_id": 112977655, "body": "<code>np.cov(X)</code> gave the following  error when I used it to find LOF with Mahalanobis metric : &quot;size of V does not match&quot;. Changed it to <code>np.cov(X.T)</code>."}], "tags": [], "owner": {"reputation": 5359, "user_id": 1150479, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JcgbZ.jpg?s=128&g=1", "display_name": "tttthomasssss", "link": "https://stackoverflow.com/users/1150479/tttthomasssss"}, "is_accepted": false, "score": 20, "last_activity_date": 1475291001, "last_edit_date": 1475291001, "creation_date": 1452155030, "answer_id": 34650347, "question_id": 34643548, "link": "https://stackoverflow.com/questions/34643548/how-to-use-mahalanobis-distance-in-sklearn-distancemetrics/34650347#34650347", "title": "How to use mahalanobis distance in sklearn DistanceMetrics?", "body": "<p><code>MahalanobisDistance</code> is expecting a parameter <code>V</code> which is the covariance matrix, and optionally another parameter <code>VI</code> which is the inverse of the covariance matrix. Furthermore, both of these parameters are <em>named</em> and not positional.</p>\n\n<p>Also check the docstring for the class <code>MahalanobisDistance</code> in the file <code>scikit-learn/sklearn/neighbors/dist_metrics.pyx</code> in the <a href=\"https://github.com/scikit-learn/scikit-learn\" rel=\"noreferrer\">sklearn repo</a>.</p>\n\n<p>Example: </p>\n\n<pre><code>In [18]: import numpy as np\nIn [19]: from sklearn.datasets import make_classification\nIn [20]: from sklearn.neighbors import DistanceMetric\nIn [21]: X, y = make_classification()\nIn [22]: DistanceMetric.get_metric('mahalanobis', V=np.cov(X))\nOut[22]: &lt;sklearn.neighbors.dist_metrics.MahalanobisDistance at 0x107aefa58&gt;\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>For some reasons (bug?), you can't pass the distance object to the <code>NearestNeighbor</code> constructor, but need to use the name of the distance metric. Also, setting <code>algorithm='auto'</code> (which defaults to <code>'ball_tree'</code>) doesn't seem to work; so given <code>X</code> from the code above you can do:</p>\n\n<pre><code>In [23]: nn = NearestNeighbors(algorithm='brute', \n                               metric='mahalanobis', \n                               metric_params={'V': np.cov(X)})\n# returns the 5 nearest neighbors of that sample\nIn [24]: nn.fit(X).kneighbors(X[0, :])     \nOut[24]: (array([[ 0., 3.21120892, 3.81840748, 4.18195987, 4.21977517]]), \n          array([[ 0, 36, 46,  5, 17]])) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11343403, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tP-lgh4FL_E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfvwIXh5pi_hhhq2b_Xa6Vvme3-wA/mo/photo.jpg?sz=128", "display_name": "Jaewoolee", "link": "https://stackoverflow.com/users/11343403/jaewoolee"}, "is_accepted": false, "score": 2, "last_activity_date": 1554943669, "creation_date": 1554943669, "answer_id": 55623162, "question_id": 34643548, "link": "https://stackoverflow.com/questions/34643548/how-to-use-mahalanobis-distance-in-sklearn-distancemetrics/55623162#55623162", "title": "How to use mahalanobis distance in sklearn DistanceMetrics?", "body": "<p>in creating cov matrix using matrix M (X x Y), you need to transpose your matrix M.\nmahalanobis formula is (x-x1)^t * inverse covmatrix * (x-x1). and as you see first argument  is transposed, which means matrix XY changed to YX. in order to product first argument and cov matrix, cov matrix should be in form of YY.</p>\n\n<p>If you just use np.cov(M), it will be XX,\nusing np.cov(M.T), it will be YY.</p>\n"}], "owner": {"reputation": 7423, "user_id": 2605112, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/MpAe0.png?s=128&g=1", "display_name": "makansij", "link": "https://stackoverflow.com/users/2605112/makansij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18960, "favorite_count": 4, "answer_count": 2, "score": 11, "last_activity_date": 1591373544, "creation_date": 1452117259, "last_edit_date": 1452156935, "question_id": 34643548, "link": "https://stackoverflow.com/questions/34643548/how-to-use-mahalanobis-distance-in-sklearn-distancemetrics", "title": "How to use mahalanobis distance in sklearn DistanceMetrics?", "body": "<p>Perhaps this is elementary, but I cannot find a good example of using <code>mahalanobis</code> distance in <code>sklearn</code>.  </p>\n\n<p>I can't even get the metric like this:</p>\n\n<pre><code>from sklearn.neighbors import DistanceMetric\nDistanceMetric.get_metric('mahalanobis')\n</code></pre>\n\n<p>This throws an error:  <code>TypeError: 0-dimensional array given.  Array must be at least two-dimensional</code>.</p>\n\n<p>But, I can't even seem to get it to take an array:</p>\n\n<pre><code>DistanceMetric.get_metric('mahalanobis', [[0.5],[0.7]])\n</code></pre>\n\n<p>throws:  </p>\n\n<pre><code>TypeError: get_metric() takes exactly 1 positional argument (2 given)\n</code></pre>\n\n<p>I checked out the docs <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.DistanceMetric.html\" rel=\"noreferrer\">here</a> and <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.neighbors.DistanceMetric.html\" rel=\"noreferrer\">here</a>.  But, I don't see what types of arguments it is expecting.<br>\nIs there an example of using the Mahalanobis distance that I can see?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3385, "user_id": 4555249, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh3.googleusercontent.com/-Cn5zv2Ynjq4/AAAAAAAAAAI/AAAAAAAAAGE/TMgHJCU_uVQ/photo.jpg?sz=128", "display_name": "G&#225;bor Erd\u0151s", "link": "https://stackoverflow.com/users/4555249/g%c3%a1bor-erd%c5%91s"}, "edited": false, "score": 0, "creation_date": 1452117885, "post_id": 34643542, "comment_id": 57033284, "body": "Maybe the space causes problems?"}], "answers": [{"comments": [{"owner": {"reputation": 8946, "user_id": 4374739, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/292ca74d572d7871fbae034b12ace389?s=128&d=identicon&r=PG", "display_name": "SuperBiasedMan", "link": "https://stackoverflow.com/users/4374739/superbiasedman"}, "edited": false, "score": 0, "creation_date": 1452165755, "post_id": 34643935, "comment_id": 57052825, "body": "Note that <code>\\U</code>, <code>\\O</code>, <code>\\D</code> and <code>\\P</code>aren&#39;t escape characters, so this wasn&#39;t a problem with the previous path as Python just left those as backslashes."}], "tags": [], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "is_accepted": false, "score": 2, "last_activity_date": 1452118791, "creation_date": 1452118791, "answer_id": 34643935, "question_id": 34643542, "link": "https://stackoverflow.com/questions/34643542/directory-string-in-python-not-working/34643935#34643935", "title": "directory string in python not working", "body": "<p>The problem is that you are not escaping your backslashes. In the directory, you see <code>'C:\\\\Users\\\\Owner\\\\Documents\\\\Py\\test destination folder</code>, where <code>'\\\\'</code> is just one backslash and <code>'\\t'</code> is a tab.<br>\nCorrect this to a raw string, <code>r'C:\\Users\\Owner\\Documents\\Py\\test destination folder\\*.*'</code> or just escaping the backslashes (<code>'C:\\\\Users\\\\Owner\\\\Documents\\\\Py\\\\test destination folder\\\\*.*'</code>)</p>\n"}], "owner": {"reputation": 95, "user_id": 4382942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b22308f2f02a9163f802c3d6b73c16ed?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/4382942/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1452118791, "creation_date": 1452117238, "last_edit_date": 1452117538, "question_id": 34643542, "link": "https://stackoverflow.com/questions/34643542/directory-string-in-python-not-working", "title": "directory string in python not working", "body": "<p>I am looking to set a directory path to source string but I am getting back an odd result.</p>\n\n<p>Firstly, this works fine</p>\n\n<pre><code> source = \"C:\\Users\\Owner\\Documents\\Py\"\n os.listdir(source)\n</code></pre>\n\n<p>and lists:</p>\n\n<pre><code>['python vocab - files.txt', 'test destination folder', 'test source folder']\n</code></pre>\n\n<p>but if I want to drill in an additional level I get an error</p>\n\n<pre><code>source = \"C:\\Users\\Owner\\Documents\\Py\\test destination folder\"\n os.listdir(source)\nTraceback (most recent call last):\n  File \"&lt;pyshell#26&gt;\", line 1, in &lt;module&gt;\n    mylist = os.listdir(source)\nWindowsError: [Error 123] The filename, directory name or volume label syntax is incorrect: 'C:\\\\Users\\\\Owner\\\\Documents\\\\Py\\test destination folder/*.*'`\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 23806, "user_id": 4542359, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a6ea331ac684b52563d13e6ee44e03be?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Protopopov", "link": "https://stackoverflow.com/users/4542359/anton-protopopov"}, "edited": false, "score": 0, "creation_date": 1452117178, "post_id": 34643500, "comment_id": 57032926, "body": "Where are you declaring <code>i</code>? Could you make a reproducible example for your dataframes?"}, {"owner": {"reputation": 3067, "user_id": 3902926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/SdotH.jpg?s=128&g=1", "display_name": "economy", "link": "https://stackoverflow.com/users/3902926/economy"}, "edited": false, "score": 0, "creation_date": 1452117549, "post_id": 34643500, "comment_id": 57033115, "body": "to access the column names directly, use <code>df1.columns</code>"}], "answers": [{"tags": [], "owner": {"reputation": 23806, "user_id": 4542359, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a6ea331ac684b52563d13e6ee44e03be?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Protopopov", "link": "https://stackoverflow.com/users/4542359/anton-protopopov"}, "is_accepted": false, "score": 2, "last_activity_date": 1452117742, "creation_date": 1452117742, "answer_id": 34643663, "question_id": 34643500, "link": "https://stackoverflow.com/questions/34643500/iterate-through-all-dataframe-columns/34643663#34643663", "title": "iterate through all dataframe columns", "body": "<p>IIUC you need to check whether whole row of one dataframe is equal to another one. You could compare for equality two dataframes then use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.all.html?highlight=all#pandas.DataFrame.all\" rel=\"nofollow\"><code>all</code></a> method for that with <code>axis=1</code> to check rows and then summing the result:</p>\n\n<pre><code>df1 = pd.DataFrame({'a': [1, 2, 3, 4, 5], 'b': [2, 3, 4, 5, 6]})\ndf2 = pd.DataFrame({'a': [1, 5, 3, 7, 5], 'b': [2, 3, 8, 5, 6]})\n\nIn [1531]: df1 == df2\nOut[1531]: \n       a      b\n0   True   True\n1  False   True\n2   True  False\n3  False   True\n4   True   True\n\nIn [1532]: (df1 == df2).all(axis=1)\nOut[1532]: \n0     True\n1    False\n2    False\n3    False\n4     True\ndtype: bool\n\nIn [1533]: (df1 == df2).all(axis=1).sum()\nOut[1533]: 2\n\nresult = (df1 == df2).all(axis=1).sum()\n\nIn [1535]: print(\"# same values: \"+str(result))\n# same values: 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1452133430, "last_edit_date": 1452133430, "creation_date": 1452122409, "answer_id": 34644714, "question_id": 34643500, "link": "https://stackoverflow.com/questions/34643500/iterate-through-all-dataframe-columns/34644714#34644714", "title": "iterate through all dataframe columns", "body": "<p>Your nested <code>for</code> loop suggests that you are comparing all <code>rows</code> of the first <code>DataFrame</code> to all <code>rows</code> of the second <code>DataFrame</code>, and count the cases where values in corresponding columns match.</p>\n\n<p>If so, you can fall back on <code>numpy</code> broadcasting to <code>sum</code> the equal cases for each <code>row</code> in <code>df1</code> relative to all <code>rows</code> in <code>df2</code>, and then <code>sum</code> these for all <code>rows</code> in <code>df1</code> to get the total like so:</p>\n\n<pre><code>df1.apply(lambda x: np.sum(df2.values == x.values), axis=1)\n</code></pre>\n\n<p>To illustrate, two randomly sampled <code>DataFrames</code>:</p>\n\n<pre><code>df1 = pd.DataFrame(np.random.randint(1, 5, (10, 2)))\n\n   0  1\n0  2  4\n1  2  3\n2  4  1\n3  3  3\n4  3  3\n5  4  4\n6  2  4\n7  3  4\n8  3  4\n9  4  1\n\ndf2 = pd.DataFrame(np.random.randint(1, 5, (10, 2)))\n\n   0  1\n0  3  2\n1  3  4\n2  4  4\n3  2  3\n4  4  3\n5  4  1\n6  4  1\n7  3  4\n8  3  1\n9  1  4\n</code></pre>\n\n<p>Get the <code>sum</code> of equal values for all <code>df1</code> <code>rows</code> after comparing each to all <code>df2</code> <code>rows</code>:</p>\n\n<pre><code>df1.apply(lambda x: np.sum(df2.values == x.values), axis=1)\n\n0    5\n1    3\n2    7\n3    6\n4    6\n5    8\n6    5\n7    8\n8    8\n9    7\n</code></pre>\n\n<p>And you could then sum the cases, or do it all in one go:</p>\n\n<pre><code>df1.apply(lambda x: np.sum(df2.values == x.values), axis=1).sum()\n\n63\n</code></pre>\n"}], "owner": {"reputation": 1447, "user_id": 3846860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vbkvj.jpg?s=128&g=1", "display_name": "lowrin", "link": "https://stackoverflow.com/users/3846860/lowrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 673, "favorite_count": 0, "accepted_answer_id": 34644714, "answer_count": 2, "score": 1, "last_activity_date": 1452133430, "creation_date": 1452117054, "question_id": 34643500, "link": "https://stackoverflow.com/questions/34643500/iterate-through-all-dataframe-columns", "title": "iterate through all dataframe columns", "body": "<p>I want to compare all rows of 2 given dataframes</p>\n\n<p>how can i optimize the following code to dynamically iterate through all columns of the given pandas dataframe?</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>df1,df2 = pd.read_csv(...)\n\nfor index2, row2 in df2.iterrows():\n    for index1, row1 in df1.iterrows():\n        if row1[0]==row2[0]: i = i+1\n        if row1[1]==row2[1]: i = i+1\n        if row1[2]==row2[2]: i = i+1\n        if row1[3]==row2[3]: i = i+1\n        print(\"# same values: \"+str(i))\n        i = 0\n</code></pre>\n"}, {"tags": ["python", "python-import"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1452117159, "post_id": 34643488, "comment_id": 57032916, "body": "I suggest you have a read through e.g. <a href=\"https://docs.python.org/2/tutorial/modules.html\" rel=\"nofollow noreferrer\">docs.python.org/2/tutorial/modules.html</a>"}, {"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 1, "creation_date": 1452126021, "post_id": 34643488, "comment_id": 57036414, "body": "@Bryce93: just import the names inside your <code>__init__.py</code>. If you want to use <code>__all__</code>, the answer is below. If you hate star-imports (as I do), import the names explicitly"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1452126137, "post_id": 34643488, "comment_id": 57036440, "body": "Top tip: if <code>__all__</code> is the same as everything you&#39;d get anyway, there&#39;s no need to include it. <code>Bar&#47;__init__.py</code> should contain e.g. <code>import spam</code>, <code>Foo&#47;__init__.py</code> should contain nothing."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1452126753, "post_id": 34643488, "comment_id": 57036596, "body": "Note also that, using section 6.4 as an example, if you <code>from sound import effects</code>, then access to <code>effects.echo</code>, etc., is <i>precisely what you get</i>."}], "answers": [{"tags": [], "owner": {"reputation": 3364, "user_id": 1525423, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/xkRry.png?s=128&g=1", "display_name": "Finwood", "link": "https://stackoverflow.com/users/1525423/finwood"}, "is_accepted": false, "score": 0, "last_activity_date": 1452167700, "last_edit_date": 1495539892, "creation_date": 1452117654, "answer_id": 34643644, "question_id": 34643488, "link": "https://stackoverflow.com/questions/34643488/python-accessing-modules-in-a-folder-using-import-module-instead-of-from-mod/34643644#34643644", "title": "Python: Accessing Modules in a Folder using import &lt;module&gt; instead of from &lt;module&gt; import *", "body": "<p>You could hack your way around it by modifying your <code>Foo/Bar/__init__.py</code>:</p>\n\n<pre><code>__all__ = ['spam', 'eggs']\n\nfrom . import *\n</code></pre>\n\n<p>It works, but it definitely isn't elegant.</p>\n\n<p><strong>EDIT</strong>:<br>\nAs <a href=\"https://stackoverflow.com/users/1913824/andrea-corbellini\">Andrea Corbellini</a> pointed out in the comment above, you can avoid the star-import:</p>\n\n<pre><code>from . import spam\nfrom . import eggs\n</code></pre>\n"}], "owner": {"reputation": 271, "user_id": 5531625, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/61e1c90a3eb4265e78cc0b2f2db1c842?s=128&d=identicon&r=PG&f=1", "display_name": "Bryce93", "link": "https://stackoverflow.com/users/5531625/bryce93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1452167700, "creation_date": 1452116986, "question_id": 34643488, "link": "https://stackoverflow.com/questions/34643488/python-accessing-modules-in-a-folder-using-import-module-instead-of-from-mod", "title": "Python: Accessing Modules in a Folder using import &lt;module&gt; instead of from &lt;module&gt; import *", "body": "<p>I have a nested class that is similar to</p>\n\n<pre><code>/Foo\n    __init__.py\n    pitythefoo.py\n    kungfoo.py\n    /Bar\n        __init__.py\n        spam.py\n        eggs.py\n</code></pre>\n\n<p>My <code>__init__.py</code> files currently have</p>\n\n<p><code>__all__ = ['pitythefoo', 'kungfoo']</code> for the <code>/Foo/__init__.py</code> file and</p>\n\n<p><code>__all__ = ['spam', 'eggs']</code> for the <code>/Foo/Bar/__init__.py</code> file,</p>\n\n<p>so I can access spam and eggs using</p>\n\n<pre><code>from Foo.Bar import *\nspam\neggs\n</code></pre>\n\n<p>However, I would like to access spam and eggs using</p>\n\n<pre><code>from Foo import Bar\nBar.spam\nBar.eggs\n</code></pre>\n\n<p>Is there some code that I can use in my <code>__init__.py</code> files to have this sort of import?</p>\n"}, {"tags": ["python", "django", "lazy-evaluation"], "comments": [{"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 1, "creation_date": 1452118658, "post_id": 34643463, "comment_id": 57033678, "body": "Are you using an older version of Django? It sounds like you might be hitting <a href=\"https://code.djangoproject.com/ticket/21840\" rel=\"nofollow noreferrer\">this bug</a>, which was fixed in Django 1.7."}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1453191538, "post_id": 34643463, "comment_id": 57481532, "body": "Glad you solved the problem. By the way, the second thing you tried, <code>{{ notifications[0].headline }}</code>, isn&#39;t valid Django template code. It should be <code>{{ notifications.0.headline }}</code>."}], "answers": [{"tags": [], "owner": {"reputation": 16434, "user_id": 411954, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/57add37bd3cf27dccb5d50174bd02697?s=128&d=identicon&r=PG&f=1", "display_name": "maxedison", "link": "https://stackoverflow.com/users/411954/maxedison"}, "is_accepted": true, "score": 0, "last_activity_date": 1453160530, "creation_date": 1453160530, "answer_id": 34866155, "question_id": 34643463, "link": "https://stackoverflow.com/questions/34643463/trying-to-loop-over-simplelazyobject-in-template-throws-an-error/34866155#34866155", "title": "Trying to loop over SimpleLazyObject in template throws an error", "body": "<p>@Alasdair's comment was right on. It's a bug in Django &lt; 1.7. My hacky solution was to subclass SimpleLazyObject:</p>\n\n<pre><code>class SimpleLazyObjectFix(SimpleLazyObject):\n    def __len__(self, *args, **kwargs):\n        return 1\n</code></pre>\n"}], "owner": {"reputation": 16434, "user_id": 411954, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/57add37bd3cf27dccb5d50174bd02697?s=128&d=identicon&r=PG&f=1", "display_name": "maxedison", "link": "https://stackoverflow.com/users/411954/maxedison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 34866155, "answer_count": 1, "score": 1, "last_activity_date": 1453160530, "creation_date": 1452116893, "question_id": 34643463, "link": "https://stackoverflow.com/questions/34643463/trying-to-loop-over-simplelazyobject-in-template-throws-an-error", "title": "Trying to loop over SimpleLazyObject in template throws an error", "body": "<p>I have created a template context processor to query the database on every page for any global notifications. I'm using <code>SimpleLazyObject</code> to provide the results to the template, which is necessary since the function in question ultimately depends on another <code>SimpleLazyObject</code> from a different template context processor. Here's the function:</p>\n\n<pre><code>def company_notifications(request):\n    def get_notifications():\n        from app.services.companies import CompanyNotificationService\n        notifications = CompanyNotificationService().company_notifications(request.profile.company)\n        return notifications\n\n    return {\n        'notifications': SimpleLazyObject(get_notifications),\n    }\n</code></pre>\n\n<p>When I try looping over the <code>notifications</code> variable in a template (i.e. <code>for notification in notifications</code>), I get the following error:</p>\n\n<blockquote>\n  <p>TypeError at /staff/notifications object of type 'SimpleLazyObject'\n  has no len()</p>\n</blockquote>\n\n<p>If instead I simply try printing the variable to the template using <code>{{ notifications }}</code>, I get what I would expect:</p>\n\n<pre><code>[&lt;CompanyNotification: 57&gt;, &lt;CompanyNotification: 55&gt;, &lt;CompanyNotification: 59&gt;]\n</code></pre>\n\n<p>But If I try instead to print a property of one of those objects, i.e. <code>{{ notifications[0].headline }}</code> I get a new error:</p>\n\n<blockquote>\n  <p>TemplateSyntaxError at /staff/notifications\n  Could not parse the remainder: '[0].headline' from 'notifications[0].headline'</p>\n</blockquote>\n\n<p>How can I access this variable in my template?</p>\n"}, {"tags": ["python", "mysql", "database-performance"], "comments": [{"owner": {"reputation": 7303, "user_id": 260826, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/D40aN.jpg?s=128&g=1", "display_name": "gogasca", "link": "https://stackoverflow.com/users/260826/gogasca"}, "edited": false, "score": 0, "creation_date": 1452116681, "post_id": 34643333, "comment_id": 57032636, "body": "What about using a retries parameter under the OperationalError and increment it as it fails?"}, {"owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "reply_to_user": {"reputation": 7303, "user_id": 260826, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/D40aN.jpg?s=128&g=1", "display_name": "gogasca", "link": "https://stackoverflow.com/users/260826/gogasca"}, "edited": false, "score": 0, "creation_date": 1452116925, "post_id": 34643333, "comment_id": 57032789, "body": "@spicyramen could you please explain what you mean here?"}, {"owner": {"reputation": 7303, "user_id": 260826, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/D40aN.jpg?s=128&g=1", "display_name": "gogasca", "link": "https://stackoverflow.com/users/260826/gogasca"}, "edited": false, "score": 1, "creation_date": 1452119201, "post_id": 34643333, "comment_id": 57033931, "body": "When the script fails that specific transaction and reach OperationalError, since you are using continue and return the control to the beginning of the while loop, I would use a retries parameter flag when we hit that exception and that will attempt the SQL transaction X amount of times before consider it a failure. Other option will be put it to sleep and then retry."}, {"owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "reply_to_user": {"reputation": 7303, "user_id": 260826, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/D40aN.jpg?s=128&g=1", "display_name": "gogasca", "link": "https://stackoverflow.com/users/260826/gogasca"}, "edited": false, "score": 0, "creation_date": 1452119248, "post_id": 34643333, "comment_id": 57033962, "body": "@spicyramen -- makes sense. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "edited": false, "score": 0, "creation_date": 1452116950, "post_id": 34643432, "comment_id": 57032799, "body": "yes it wouldn&#39;t be possible to do this at the end. This is sort of &#39;streaming ingest&#39; with one item/file at a time."}, {"owner": {"reputation": 502, "user_id": 1154932, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6f5391c6e52959a3b2bdfd5342827cc5?s=128&d=identicon&r=PG", "display_name": "thomasw_lrd", "link": "https://stackoverflow.com/users/1154932/thomasw-lrd"}, "reply_to_user": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "edited": false, "score": 0, "creation_date": 1452116984, "post_id": 34643432, "comment_id": 57032818, "body": "I should&#39;ve made that a comment, not an answer"}], "tags": [], "owner": {"reputation": 502, "user_id": 1154932, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6f5391c6e52959a3b2bdfd5342827cc5?s=128&d=identicon&r=PG", "display_name": "thomasw_lrd", "link": "https://stackoverflow.com/users/1154932/thomasw-lrd"}, "is_accepted": true, "score": 0, "last_activity_date": 1452116765, "creation_date": 1452116765, "answer_id": 34643432, "question_id": 34643333, "link": "https://stackoverflow.com/questions/34643333/handling-mysql-deadlock/34643432#34643432", "title": "Handling mysql deadlock", "body": "<p>Can you break your values into something like this?</p>\n\n<pre><code>INSERT INTO main_item_instance (...) VALUE (...), (....), ....\n</code></pre>\n\n<p>Do you have to do individual inserts or can you do one big insert at the end of the script?</p>\n"}], "owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "accepted_answer_id": 34643432, "answer_count": 1, "score": 1, "last_activity_date": 1452117342, "creation_date": 1452116446, "last_edit_date": 1452117342, "question_id": 34643333, "link": "https://stackoverflow.com/questions/34643333/handling-mysql-deadlock", "title": "Handling mysql deadlock", "body": "<p>I have the following SQL statement:</p>\n\n<pre><code>self.cursor.execute('''INSERT INTO main_iteminstance (...) VALUES (...)''')\n</code></pre>\n\n<p>This operation runs several million times in a two-hour script. However, about once every ten script runs, it runs into a deadlock:</p>\n\n<pre><code>OperationalError: (1205, 'Lock wait timeout exceeded; try restarting transaction')\n</code></pre>\n\n<p>How should I deal with this? My thinking was to do the following --</p>\n\n<pre><code>while True:\n    try:\n        self.cursor.execute('''INSERT INTO main_iteminstance (...) VALUES (...)''')\n    except MySQLdb.OperationalError:\n        continue\n    else:\n        break\n</code></pre>\n\n<p>Is this the best pattern to use? Or is there a better way to do this?</p>\n"}, {"tags": ["python", "tkinter", "tkmessagebox"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1452117569, "post_id": 34643309, "comment_id": 57033130, "body": "create own messagebox using <code>TopLevel()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 524, "user_id": 4242180, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ddcdac4de4d5e8177e3620370eba86f5?s=128&d=identicon&r=PG&f=1", "display_name": "terratunaz", "link": "https://stackoverflow.com/users/4242180/terratunaz"}, "edited": false, "score": 0, "creation_date": 1452121585, "post_id": 34643602, "comment_id": 57034946, "body": "Thanks, that&#39;s a good idea. Great examples too. I just wanted to make sure there wasn&#39;t already a way to do it with the message boxes."}], "tags": [], "owner": {"reputation": 436, "user_id": 5693681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddffacdb658f064755c695f1a6fb66b6?s=128&d=identicon&r=PG&f=1", "display_name": "BenJ", "link": "https://stackoverflow.com/users/5693681/benj"}, "is_accepted": true, "score": 4, "last_activity_date": 1452117482, "creation_date": 1452117482, "answer_id": 34643602, "question_id": 34643309, "link": "https://stackoverflow.com/questions/34643309/is-there-a-way-to-destroy-the-tkinter-messagebox-without-clicking-ok/34643602#34643602", "title": "Is there a way to destroy the tkinter messagebox without clicking OK?", "body": "<p>Maybe a message box is not what you require in this context.  If you would just like to show a message then have it automatically disappear you could use a new TopLevel or frame and then destroy the frame after a timeout.  In terms of user interaction and experience, message boxes are designed to wait for user input?</p>\n\n<p>This is a good example of using a new TopLevel</p>\n\n<p><a href=\"https://stackoverflow.com/questions/30235587/closing-tkmessagebox-after-some-time-in-python?rq=1\">closing tkmessagebox after some time in python</a></p>\n\n<p>I found this page that describes what can be done to customise message boxes, though what I could find is somewhat limited.</p>\n\n<p><a href=\"http://effbot.org/tkinterbook/tkinter-standard-dialogs.htm\" rel=\"nofollow\">http://effbot.org/tkinterbook/tkinter-standard-dialogs.htm</a></p>\n"}], "owner": {"reputation": 524, "user_id": 4242180, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ddcdac4de4d5e8177e3620370eba86f5?s=128&d=identicon&r=PG&f=1", "display_name": "terratunaz", "link": "https://stackoverflow.com/users/4242180/terratunaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11589, "favorite_count": 0, "accepted_answer_id": 34643602, "answer_count": 1, "score": 3, "last_activity_date": 1452117482, "creation_date": 1452116360, "question_id": 34643309, "link": "https://stackoverflow.com/questions/34643309/is-there-a-way-to-destroy-the-tkinter-messagebox-without-clicking-ok", "title": "Is there a way to destroy the tkinter messagebox without clicking OK?", "body": "<p>I know you can use something like,\nself.root.after(1000, self.update_clock)</p>\n\n<p>But could I some how replace that second function with a function that's similar to messagebox.showinfo.destroy()? I'm basically trying to put these message boxes on a timer so that the user will see them but won't have to do anything themselves. </p>\n\n<pre><code>response = tkinter.messagebox.showinfo(\"Warning!\", \"New artist object has been     created: \"\n                                                       + \"\\n\" + \"$oid: \" + str(self.artistObjectId))\n\nif response == \"ok\":\n            self.currentState += 1\n            self.states[self.currentState](importedTracks[self.currentTrack])\n</code></pre>\n"}, {"tags": ["python", "linux", "filesystems", "stat", "inode"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452116864, "post_id": 34643289, "comment_id": 57032745, "body": "You say you&#39;re using a proprietary filesystem.  Perhaps that&#39;s the problem?  That inode number looks awfully big."}, {"owner": {"reputation": 3627, "user_id": 1460849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f8e4125e72fd9a100f62da3324a3635?s=128&d=identicon&r=PG", "display_name": "kalhartt", "link": "https://stackoverflow.com/users/1460849/kalhartt"}, "edited": false, "score": 0, "creation_date": 1452116916, "post_id": 34643289, "comment_id": 57032783, "body": "Those numbers are equivalent mod 2**64"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1452117384, "post_id": 34643289, "comment_id": 57033028, "body": "&quot;I can handle that its treating it as a signed value and hence the negative sign,&quot;. Converting from signed to unsigned is not just adding/removing the sign prefix. Those two numbers are the same if you do the correct conversion. Have a read of some of these resources: <a href=\"https://stackoverflow.com/questions/1049722/what-is-2s-complement\">What is \u201c2&#39;s Complement\u201d?</a> and <a href=\"https://en.wikipedia.org/wiki/Two&#39;s_complement\" rel=\"nofollow noreferrer\">wikipedia Two&#39;s complement page</a>."}, {"owner": {"reputation": 740, "user_id": 2755116, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/18ac781101ea75e34e41cb56407f5313?s=128&d=identicon&r=PG&f=1", "display_name": "somenxavier", "link": "https://stackoverflow.com/users/2755116/somenxavier"}, "edited": false, "score": 0, "creation_date": 1605476514, "post_id": 34643289, "comment_id": 114655582, "body": "This happens in python 2.x because in python 3.8.6 it works properly"}], "answers": [{"comments": [{"owner": {"reputation": 1781, "user_id": 4515566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bOOZ7.jpg?s=128&g=1", "display_name": "arainone", "link": "https://stackoverflow.com/users/4515566/arainone"}, "edited": false, "score": 0, "creation_date": 1452122905, "post_id": 34644782, "comment_id": 57035446, "body": "You are probably right, but that does not answer the question because in that case you would simply bypass python &#39;os.stat()&#39; command"}, {"owner": {"reputation": 2186, "user_id": 4143840, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7f2e835583e38a4f4c69f6f947496410?s=128&d=identicon&r=PG&f=1", "display_name": "jersey bean", "link": "https://stackoverflow.com/users/4143840/jersey-bean"}, "edited": false, "score": 0, "creation_date": 1453396528, "post_id": 34644782, "comment_id": 57593300, "body": "Thanks for your response.  Yes, that&#39;s probably a good workaround.  But still doesn&#39;t answer the question."}], "tags": [], "owner": {"reputation": 308, "user_id": 5754755, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2d5wQ9QBex4/AAAAAAAAAAI/AAAAAAAAABM/U0wjXv-uoow/photo.jpg?sz=128", "display_name": "Hendri Tobing", "link": "https://stackoverflow.com/users/5754755/hendri-tobing"}, "is_accepted": false, "score": 0, "last_activity_date": 1452122734, "creation_date": 1452122734, "answer_id": 34644782, "question_id": 34643289, "link": "https://stackoverflow.com/questions/34643289/pythons-os-stat-is-returning-wrong-inode-value/34644782#34644782", "title": "Python&#39;s os stat is returning wrong inode value", "body": "<p>Use commands modules, it will return the same result.</p>\n\n<pre><code>   import commands\n   commands.getstatusoutput('stat /fooDir')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2186, "user_id": 4143840, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7f2e835583e38a4f4c69f6f947496410?s=128&d=identicon&r=PG&f=1", "display_name": "jersey bean", "link": "https://stackoverflow.com/users/4143840/jersey-bean"}, "is_accepted": true, "score": 5, "last_activity_date": 1503513988, "creation_date": 1503513988, "answer_id": 45847284, "question_id": 34643289, "link": "https://stackoverflow.com/questions/34643289/pythons-os-stat-is-returning-wrong-inode-value/45847284#45847284", "title": "Python&#39;s os stat is returning wrong inode value", "body": "<p>I figured out the inode number was intended to be \nan unsigned long, but om.stat was interpreting \nas a negative number because the MSB was set.  </p>\n\n<p>So now that I know its supposed to be an unsigned,\nI can solve this issue as follows:</p>\n\n<pre><code>import ctypes\nctypes.c_ulong(os.stat(&lt;dir here&gt;).st_ino).value\n</code></pre>\n\n<p>This returns the same value as reported by 'stat' \nand 'ls -li'.</p>\n"}], "owner": {"reputation": 2186, "user_id": 4143840, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7f2e835583e38a4f4c69f6f947496410?s=128&d=identicon&r=PG&f=1", "display_name": "jersey bean", "link": "https://stackoverflow.com/users/4143840/jersey-bean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 1, "accepted_answer_id": 45847284, "answer_count": 2, "score": 4, "last_activity_date": 1503513988, "creation_date": 1452116297, "question_id": 34643289, "link": "https://stackoverflow.com/questions/34643289/pythons-os-stat-is-returning-wrong-inode-value", "title": "Python&#39;s os stat is returning wrong inode value", "body": "<p>I'm running CentOS Linux.  </p>\n\n<p>I create a directory as follows using a proprietary filesystem:</p>\n\n<pre><code>$ mkdir fooDir\n</code></pre>\n\n<p>First, I check the inode value using \"ls -ldi\":</p>\n\n<pre><code>$ ls -ldi\ntotal 4\n9223372036854783200 drwxrwxrwx 2 root root 4096 Jan  6 20:58 fooDir\n</code></pre>\n\n<p>Then, I confirm same inode is being reported by 'stat':</p>\n\n<pre><code>$ stat /fooDir\n  File: `/fooDir'\n  Size: 4096        Blocks: 8          IO Block: 4096   directory\nDevice: 14h/20d Inode: 9223372036854783200  Links: 2\nAccess: (0777/drwxrwxrwx)  Uid: (    0/    root)   Gid: (    0/    root)\nAccess: 2016-01-06 20:58:13.000000000 +0000\nModify: 2016-01-06 20:58:13.000000000 +0000\nChange: 2016-01-06 20:58:23.000000000 +0000\n</code></pre>\n\n<p>But then I switch over to run in python's interactive prompt and run om.stat against the directory:</p>\n\n<pre><code>$ python\nPython 2.6.6 (r266:84292, Jun 18 2012, 14:18:47) \n[GCC 4.4.6 20110731 (Red Hat 4.4.6-3)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.stat(\"/fooDir\")\nposix.stat_result(st_mode=16895, st_ino=-9223372036854768416, st_dev=20L, st_nlink=2, st_uid=0, st_gid=0, st_size=4096, st_atime=1452113893, st_mtime=1452113893, st_ctime=1452113903)\n&gt;&gt;&gt; \n</code></pre>\n\n<p>The inode value being returned by Python's om.stat does not match the value as reported by stat command. </p>\n\n<p>The filesystem has assigned the inode value of 9223372036854783200 to the directory 'fooDir', however Python's om.stat is returning \"-9223372036854768416\".  </p>\n\n<p>I can handle that its treating it as a signed value and hence the negative sign, but I'm confused about why its a completely different value.  </p>\n\n<p>Any ideas on what's happening here?  Why Python's os stat returning the wrong inode value? (or wrong according to 'stat' command)</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 353, "user_id": 2818584, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/338715d0e19393335d6d7456e3e9289c?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Allo", "link": "https://stackoverflow.com/users/2818584/patrick-allo"}, "is_accepted": true, "score": 1, "last_activity_date": 1452188859, "creation_date": 1452188859, "answer_id": 34661821, "question_id": 34643281, "link": "https://stackoverflow.com/questions/34643281/modifying-bar-width-and-bar-position-in-matplotlib-bar-plot-looping-over-contai/34661821#34661821", "title": "Modifying bar-width and bar-position in matplotlib bar-plot (looping over containers)", "body": "<p>Apparently the following approach works better when modifying vertical bar-plots:</p>\n\n<pre><code>for container in axes.containers:\n        for i, child in enumerate(container.get_children()):\n            child.set_x(df.index[i] - sizes[i]/2)\n            plt.setp(child, width=sizes[i])\n</code></pre>\n\n<p>So the main difference with the original approach I was adapting is that I do not get the current x_position of the container, but re-use the index of the DataFrame to set the x_position of the container at the index minus half of its new width.</p>\n\n<p><a href=\"https://i.stack.imgur.com/wgKlp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wgKlp.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 353, "user_id": 2818584, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/338715d0e19393335d6d7456e3e9289c?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Allo", "link": "https://stackoverflow.com/users/2818584/patrick-allo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2195, "favorite_count": 1, "accepted_answer_id": 34661821, "answer_count": 1, "score": 2, "last_activity_date": 1452188859, "creation_date": 1452116270, "last_edit_date": 1452153508, "question_id": 34643281, "link": "https://stackoverflow.com/questions/34643281/modifying-bar-width-and-bar-position-in-matplotlib-bar-plot-looping-over-contai", "title": "Modifying bar-width and bar-position in matplotlib bar-plot (looping over containers)", "body": "<p>I'm trying to adapt the following strategy (taken from <a href=\"https://datasciencelab.wordpress.com/2013/12/21/beautiful-plots-with-pandas-and-matplotlib/\" rel=\"nofollow noreferrer\">here</a>) to adjust the sizes of bars in matplotlib barplots</p>\n\n<pre><code># Iterate over bars\nfor container in ax.containers:\n    # Each bar has a Rectangle element as child\n    for i,child in enumerate(container.get_children()):\n        # Reset the lower left point of each bar so that bar is centered\n        child.set_y(child.get_y()- 0.125 + 0.5-hs[i]/2)\n        # Attribute height to each Recatangle according to country's size\n        plt.setp(child, height=hs[i])\n</code></pre>\n\n<p>but have encountered a strange behaviour when using this on a plot based on a two-columns DataFrame. The relevant part of the code is almost identical:</p>\n\n<pre><code>for container in axes.containers:\n        for size, child in zip(sizes, container.get_children()):\n            child.set_x(child.get_x()- 0.50 + 0.5-size/2)\n            plt.setp(child, width=size)\n</code></pre>\n\n<p>The effect I get is that the size of the width of the bars (I'm using in in bar-chart; not an hbar) is changed as intended, but that the re-centering is only applied to the bars that correspond to the second column of the DataFrame (I've swapped them to check), which corresponds to the lighter blue in the figure below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/CmpWl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CmpWl.png\" alt=\"enter image description here\"></a></p>\n\n<p>I don't quite see how this could happen, since both changes seem to be applied as part of the same loop. I also find it difficult to trouble-shoot since in my case the outer-loop goes through two containers, and the inner-loop goes through as many children as there are bars (and this for each container).</p>\n\n<p>How could I start troubleshooting this? And how could I find out what I'm actually looping through? (I know each child is a rectangle-object, but this doesn't yet tell me the difference between the rectangles in both containers)</p>\n"}, {"tags": ["python", "postgresql", "python-2.7", "psycopg2", "python-2.x"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user773737"}, "edited": false, "score": 0, "creation_date": 1452116660, "post_id": 34643257, "comment_id": 57032628, "body": "Are you sure the error is coming from those two lines you posted, and not from where you&#39;re referencing <code>psycopg2</code>?"}, {"owner": {"reputation": 25, "user_id": 5754510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkYoBwfaCUU/AAAAAAAAAAI/AAAAAAAAACk/8-oDI0X-rH8/photo.jpg?sz=128", "display_name": "Bilal Mussa", "link": "https://stackoverflow.com/users/5754510/bilal-mussa"}, "edited": false, "score": 0, "creation_date": 1452117566, "post_id": 34643257, "comment_id": 57033128, "body": "I wasnt successful in install psycopg2"}, {"owner": {"user_type": "does_not_exist", "display_name": "user773737"}, "edited": false, "score": 0, "creation_date": 1452117713, "post_id": 34643257, "comment_id": 57033202, "body": "Then you should be asking &quot;How do I install psycopg2 on Windows 32bit?&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5754510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkYoBwfaCUU/AAAAAAAAAAI/AAAAAAAAACk/8-oDI0X-rH8/photo.jpg?sz=128", "display_name": "Bilal Mussa", "link": "https://stackoverflow.com/users/5754510/bilal-mussa"}, "edited": false, "score": 0, "creation_date": 1452117537, "post_id": 34643474, "comment_id": 57033108, "body": "Just ran the above and got this  from sqlalchemy import create_engine  engine = create_engine(&#39;postgresql+psycopg2://postgres:password@local&zwnj;&#8203;host/bilal&#39;)   ImportError: No module named &#39;psycopg2&#39;  pip didnt install the module. Anaconda only shows it available for win64"}, {"owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "reply_to_user": {"reputation": 25, "user_id": 5754510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkYoBwfaCUU/AAAAAAAAAAI/AAAAAAAAACk/8-oDI0X-rH8/photo.jpg?sz=128", "display_name": "Bilal Mussa", "link": "https://stackoverflow.com/users/5754510/bilal-mussa"}, "edited": false, "score": 0, "creation_date": 1452117609, "post_id": 34643474, "comment_id": 57033153, "body": "try the first link it for win specifically, the error says your psycopg2 is not installed, that&#39;s why it can&#39;t be imported"}, {"owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "reply_to_user": {"reputation": 25, "user_id": 5754510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkYoBwfaCUU/AAAAAAAAAAI/AAAAAAAAACk/8-oDI0X-rH8/photo.jpg?sz=128", "display_name": "Bilal Mussa", "link": "https://stackoverflow.com/users/5754510/bilal-mussa"}, "edited": false, "score": 0, "creation_date": 1452117686, "post_id": 34643474, "comment_id": 57033190, "body": "download it from here <a href=\"http://www.stickpeople.com/projects/python/win-psycopg/2.6.1/psycopg2-2.6.1.win32-py3.4-pg9.4.4-release.exe\" rel=\"nofollow noreferrer\">stickpeople.com/projects/python/win-psycopg/2.6.1/&hellip;</a>"}, {"owner": {"reputation": 25, "user_id": 5754510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkYoBwfaCUU/AAAAAAAAAAI/AAAAAAAAACk/8-oDI0X-rH8/photo.jpg?sz=128", "display_name": "Bilal Mussa", "link": "https://stackoverflow.com/users/5754510/bilal-mussa"}, "edited": false, "score": 0, "creation_date": 1452117741, "post_id": 34643474, "comment_id": 57033218, "body": "do you have a link for python 3.4 / 3.5 ?"}, {"owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "reply_to_user": {"reputation": 25, "user_id": 5754510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkYoBwfaCUU/AAAAAAAAAAI/AAAAAAAAACk/8-oDI0X-rH8/photo.jpg?sz=128", "display_name": "Bilal Mussa", "link": "https://stackoverflow.com/users/5754510/bilal-mussa"}, "edited": false, "score": 0, "creation_date": 1452117800, "post_id": 34643474, "comment_id": 57033251, "body": "i gave it to you twice, check above"}, {"owner": {"reputation": 25, "user_id": 5754510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkYoBwfaCUU/AAAAAAAAAAI/AAAAAAAAACk/8-oDI0X-rH8/photo.jpg?sz=128", "display_name": "Bilal Mussa", "link": "https://stackoverflow.com/users/5754510/bilal-mussa"}, "edited": false, "score": 0, "creation_date": 1452118081, "post_id": 34643474, "comment_id": 57033394, "body": "Thanks got it. Seems to be a problem with my iPython running v3.5. However, psycopg2 works in Python 3.4"}], "tags": [], "owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "is_accepted": true, "score": 1, "last_activity_date": 1452116947, "creation_date": 1452116947, "answer_id": 34643474, "question_id": 34643257, "link": "https://stackoverflow.com/questions/34643257/python-3-4-connect-to-postgres-sql-using-sqlalchemy-win32/34643474#34643474", "title": "Python 3.4 -&gt; Connect to PostGres SQL using SQLAlchemy win32", "body": "<p>Did you install it correctly?\nUse this link to download and install it <a href=\"http://www.stickpeople.com/projects/python/win-psycopg/\" rel=\"nofollow\">win-psycopg</a> or using <code>pip install psycopg2</code></p>\n\n<p>And you could specify it in the connection string:</p>\n\n<pre><code>from sqlalchemy import create_engine\n\nengine = create_engine('postgresql+psycopg2://postgres:password@localhost/bilal')\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5754510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkYoBwfaCUU/AAAAAAAAAAI/AAAAAAAAACk/8-oDI0X-rH8/photo.jpg?sz=128", "display_name": "Bilal Mussa", "link": "https://stackoverflow.com/users/5754510/bilal-mussa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 0, "accepted_answer_id": 34643474, "answer_count": 1, "score": 1, "last_activity_date": 1454740272, "creation_date": 1452116201, "last_edit_date": 1454740272, "question_id": 34643257, "link": "https://stackoverflow.com/questions/34643257/python-3-4-connect-to-postgres-sql-using-sqlalchemy-win32", "title": "Python 3.4 -&gt; Connect to PostGres SQL using SQLAlchemy win32", "body": "<p>I am using Postgres and Pandas and having trouble with connecting the two.\nI have created the enginestr using SQLAlchemy as below</p>\n\n<pre><code>from sqlalchemy import create_engine\nengine = create_engine('postgresql://postgres:password@localhost:5432/bilal')\n</code></pre>\n\n<p>However, when i run that statement i get the following error</p>\n\n<pre><code>ImportError : No module names 'psycopg2'\n</code></pre>\n\n<p>I have tried installing the module but dont have any luck. Is it because i am using a 32 bit Windows machine ?</p>\n\n<p>Thanks,</p>\n\n<p>Bilal</p>\n"}, {"tags": ["python", "unicode"], "comments": [{"owner": {"reputation": 40404, "user_id": 282912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bmLJq.png?s=128&g=1", "display_name": "msw", "link": "https://stackoverflow.com/users/282912/msw"}, "edited": false, "score": 0, "creation_date": 1452116453, "post_id": 34643218, "comment_id": 57032517, "body": "&quot;in the python interpreter or a text editor&quot; The interpreter runs in a shell, that shell has an encoding associated with it, it is either Unicode encoding or it is something else. Your editor displays (and stores) in an encoding; it is Unicode or not. The problem is with your terminal or editor, which are probably using one of dozens of encodings that are not Unicode. Fix that, and you&#39;ll find that Python is working fine."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 40404, "user_id": 282912, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bmLJq.png?s=128&g=1", "display_name": "msw", "link": "https://stackoverflow.com/users/282912/msw"}, "edited": false, "score": 1, "creation_date": 1452116557, "post_id": 34643218, "comment_id": 57032567, "body": "@msw: this is perfectly on topic here. Python is a commonly used programming tool, debugging issues with I/O in the interactive interpreter is a common topic."}], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 0, "last_activity_date": 1452117164, "last_edit_date": 1452117164, "creation_date": 1452116492, "answer_id": 34643344, "question_id": 34643218, "link": "https://stackoverflow.com/questions/34643218/python-unicode-displayed-in-editor-and-stored-in-memory/34643344#34643344", "title": "Python unicode displayed in editor and stored in memory", "body": "<p>You apparently pasted <a href=\"https://en.wikipedia.org/wiki/GBK\" rel=\"nofollow\"><em>GBK</em> data</a>:</p>\n\n<pre><code>&gt;&gt;&gt; u'\\u6ce8'.encode('gbk')\n'\\xd7\\xa2'\n</code></pre>\n\n<p>GBK uses multiple bytes to encode codepoints; how many depends on the exact codepoint, but it'll either be one or two bytes.</p>\n\n<p>However, your console or terminal is telling Python it is configured to handle Latin-1 or another 8-bit codec, so Python decoded the bytes straight to Unicode:</p>\n\n<pre><code>&gt;&gt;&gt; '\\xd7\\xa2'.decode('latin1')\nu'\\xd7\\xa2'\n</code></pre>\n\n<p>You can see what codec Python thinks needs to be used by printing the <code>sys.stdin.encoding</code> attribute; my terminal is configured for UTF-8:</p>\n\n<pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.stdin.encoding\n'UTF-8'\n</code></pre>\n\n<p>This is ultimately determined from your system locale configuration. Python queries this with the <a href=\"https://docs.python.org/2/library/locale.html#locale.getpreferredencoding\" rel=\"nofollow\"><code>locale.getpreferredencoding()</code> function</a>. On POSIX systems (Linux, OS X) you can check your locale with the <code>locale</code> command.</p>\n"}], "owner": {"reputation": 13, "user_id": 5703790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceae756ecb13f21f8c3826f04a8d1ef4?s=128&d=identicon&r=PG&f=1", "display_name": "D. Zhai", "link": "https://stackoverflow.com/users/5703790/d-zhai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 34643344, "answer_count": 1, "score": 0, "last_activity_date": 1452117164, "creation_date": 1452116047, "question_id": 34643218, "link": "https://stackoverflow.com/questions/34643218/python-unicode-displayed-in-editor-and-stored-in-memory", "title": "Python unicode displayed in editor and stored in memory", "body": "<p>I am python new learner.<br/>\nHere is a question confused me. <br/>\nMy intention is to store a Chinese character in a variable.<br/>\nI tried two different ways:<br/>\nMethod 1:<br/></p>\n\n<pre><code>&gt;&gt;&gt; x = u'\\u6ce8'\n&gt;&gt;&gt; print x\n\u6ce8\n</code></pre>\n\n<p>Method 2:<br/></p>\n\n<pre><code>&gt;&gt;&gt; y = u'\u6ce8'\n&gt;&gt;&gt; y\nu'\\xd7\\xa2'\n&gt;&gt;&gt; print y\n\u00d7\u00a2\n</code></pre>\n\n<p>If i use method 2, in the python interpreter or a text editor, the character is displayed as I typed in.<br/></p>\n\n<p>But actually in the memory, this unicode character is converted into two bytes.\nAnd the byte value is different from the real value for that character (in method 1)<br/></p>\n\n<p>Question:<br/></p>\n\n<ol>\n<li>In method 2, who does this conversion from the chinese character I typed in to those two bytes? OS, python interpreter?</li>\n<li>Why the conversion seems wrong? (should be 6ce8 not d7a2)</li>\n<li>Why if I save the script to a .py file and open it again, I can\nsee the correct character as I typed in?</li>\n<li>What is your solution for method 2 that I can print the right character?\n<br/>\nThanks in advance!</li>\n</ol>\n"}, {"tags": ["python", "json", "django", "httpresponse", "djangular"], "answers": [{"tags": [], "owner": {"reputation": 6430, "user_id": 1075247, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6de7362951ec5bf3d40fa02de7175552?s=128&d=identicon&r=PG", "display_name": "Pureferret", "link": "https://stackoverflow.com/users/1075247/pureferret"}, "is_accepted": true, "score": 0, "last_activity_date": 1454236043, "last_edit_date": 1454236043, "creation_date": 1454235465, "answer_id": 35112702, "question_id": 34643195, "link": "https://stackoverflow.com/questions/34643195/is-there-a-way-to-return-a-httpresponseservererror-for-a-djangular-djangormi-met/35112702#35112702", "title": "Is there a way to return a HttpResponseServerError for a Djangular djangoRMI method call?", "body": "<p><strong><a href=\"https://github.com/jrief/django-angular/blob/master/djangular/views/mixins.py#L23\" rel=\"nofollow\">JSONResponseException</a></strong></p>\n\n<p>It's thrown like a regular django exception, but the message kwarg can take JSON content. It defaults to a response status of 400, but that can be set with another kwarg.</p>\n\n<p>So now you can write:</p>\n\n<pre><code>@allow_remote_invocation\ndef do_a_thing(self):\n    if not thing.do():\n        return thing.do()\n    message = {'error':'oops', 'description':'the thing broke'}\n    status = 500\n    raise JSONResponseException(message=message,status=status)\n</code></pre>\n"}], "owner": {"reputation": 6430, "user_id": 1075247, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6de7362951ec5bf3d40fa02de7175552?s=128&d=identicon&r=PG", "display_name": "Pureferret", "link": "https://stackoverflow.com/users/1075247/pureferret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 35112702, "answer_count": 1, "score": 0, "last_activity_date": 1454236043, "creation_date": 1452115976, "question_id": 34643195, "link": "https://stackoverflow.com/questions/34643195/is-there-a-way-to-return-a-httpresponseservererror-for-a-djangular-djangormi-met", "title": "Is there a way to return a HttpResponseServerError for a Djangular djangoRMI method call?", "body": "<p>I have several methods that use <a href=\"https://github.com/jrief/django-angular\" rel=\"nofollow\">djangular</a> remote method invocation. </p>\n\n<p>Currently when one of these fails, I just return a dict/json with an error property that I check for on the JavaScript side if my app.</p>\n\n<pre><code>@allow_remote_invocation\ndef do_a_thing(self):\n    return {'error':'oops', 'description':'the thing broke'}\n</code></pre>\n\n<p>This is fine,  but occasionally the method breaks outside of Python's control,  and I need to use the error_callback on the JavaScript side. </p>\n\n<p>I end up replicating the error handling,  which makes me cry at night.</p>\n\n<pre><code>function call_the_thing(){\n    djangoRMI.do_a_thing().then(function(data){\n        if(data.error){\n            handleError(data.error)\n        }else{\n            ....\n        }\n    },function(rejectReason){\n        handleError(rejectReason)\n    }\n} \n</code></pre>\n\n<p>What I thought the day,  is that there had to be a way to return and error from the python side,  not just a success with error data. </p>\n\n<p>I was hoping I could wrap by python dict in a <code>HttpResponseServerError</code> but I can't fathom how to do more than return more than string, nor how to make it for with Djangular. </p>\n\n<p>Is this the correct way to return a server error (as <code>HttpResponseServerError</code>)? Or because of djangular I need to treat it as a nation ah I have been doing? </p>\n\n<p>n.b. I haven't been able to spend/waste time at work <em>yet</em>. When I do, if there's not a decent answer here I'll self-answer. But I'm also interested in what is good practice add returning JSON feels like a hack. </p>\n"}, {"tags": ["python", "sorting", "key", "tuples"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1452116196, "post_id": 34643186, "comment_id": 57032380, "body": "There are dozens of questions on sorting with <code>key</code>; all you need is a function that maps the input (in this case, a tuple <code>((keypart1, keypart2), value)</code>) to the thing you want to sort on (<code>keypart2</code>). This is trivial."}], "answers": [{"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 0, "last_activity_date": 1452116660, "creation_date": 1452116660, "answer_id": 34643400, "question_id": 34643186, "link": "https://stackoverflow.com/questions/34643186/python-sorting-dict-using-tuple-keys/34643400#34643400", "title": "Python - Sorting dict using tuple keys", "body": "<p>Just sort the keys and do a lookup, sorting the keys by the second element:</p>\n\n<pre><code>d = {(-2929109664628200379, 10): \"table\", (-3884855813103006483, 15): \"chair\"}\n\nsted = [(k, d[k]) for k in sorted(d,key=itemgetter(1))]\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5688411, "user_type": "registered", "profile_image": "https://graph.facebook.com/924179281005363/picture?type=large", "display_name": "Adriano Ferrari Cardoso", "link": "https://stackoverflow.com/users/5688411/adriano-ferrari-cardoso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452121764, "creation_date": 1452115933, "last_edit_date": 1495535298, "question_id": 34643186, "link": "https://stackoverflow.com/questions/34643186/python-sorting-dict-using-tuple-keys", "title": "Python - Sorting dict using tuple keys", "body": "<p>My question is related to the answer of this one:<br>\n<a href=\"https://stackoverflow.com/questions/613183/sort-a-python-dictionary-by-value\">Sort a Python dictionary by value</a></p>\n\n<blockquote>\n  <p>And for those wishing to sort on keys instead of values:</p>\n\n<pre><code>import operator\nx = {1: 2, 3: 4, 4: 3, 2: 1, 0: 0}\nsorted_x = sorted(x.items(), key=operator.itemgetter(0))\n</code></pre>\n</blockquote>\n\n<p>How do I sort on keys like above when my keys are tuples? For example, <code>A:  {(-2929109664628200379, 10): table, (-3884855813103006483, 15): chair}</code>, sorting using the second number from the key.</p>\n\n<p><strong>Edit</strong><br>\nMade it by creating a function <code>getKey</code> to return the value I wanted, now I realize it was a trivial question, thank you @jonrsharpe</p>\n"}, {"tags": ["python", "django", "input", "amazon-ec2", "output"], "answers": [{"comments": [{"owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "edited": false, "score": 0, "creation_date": 1452118975, "post_id": 34643524, "comment_id": 57033824, "body": "thanks for read and chek the ticket, but this is not mine, I&#39;ve edit my question for add more details about of my doubt, but when I read your response here, I understood that the ticket reported was one case of error of the application of the user and not of Amazon EC2 in relation to Django. I am right really? I cannot take an screen of my specific error related, but this did reference to one function of my application ... Although as said below I restart my server and all it&#39;s solved ... I follow checking my app deployen in EC2 for detail their behavior. :D"}, {"owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "edited": false, "score": 0, "creation_date": 1452181302, "post_id": 34643524, "comment_id": 57063697, "body": "I&#39;ve edit my question due to the error appear again today. Any orientation will be appreciated."}, {"owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "edited": false, "score": 0, "creation_date": 1452192452, "post_id": 34643524, "comment_id": 57071112, "body": "I&#39;ve been exploring and in this post describe a related situation (not with the same error or traceback), but this person also says that he restart your server and all it&#39;s solved  <a href=\"http://stackoverflow.com/questions/31083103/aws-ec2-t2-micro-instance-very-unstable\" title=\"aws ec2 t2 micro instance very unstable\">stackoverflow.com/questions/31083103/&hellip;</a>  IN this thread, in one answer, speak about of review the autosacaling section and health checks schedule (may be was useful for their case) , although i think so that my project deployed is too small for this alternative."}], "tags": [], "owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "is_accepted": false, "score": 0, "last_activity_date": 1452117165, "last_edit_date": 1592644375, "creation_date": 1452117165, "answer_id": 34643524, "question_id": 34643170, "link": "https://stackoverflow.com/questions/34643170/amazon-django-each-12-hours-appears-that-errno-5-input-output-error/34643524#34643524", "title": "Amazon + Django each 12 hours appears that [Errno 5] Input/output error", "body": "<blockquote>\n<p>File &quot;./my_api/to/Credit.py&quot;, line 17, in get_credit_from_response</p>\n<p>print xml_response</p>\n</blockquote>\n<p>The stack trace is clear enough. You have a function named <code>get_credit_from_response</code> - inside it the I/O Error is happening. It is probably scheduled every 6/12 hours and causes the issue. Please double check your code.</p>\n"}, {"tags": [], "owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "is_accepted": false, "score": 16, "last_activity_date": 1452214292, "last_edit_date": 1452214292, "creation_date": 1452209877, "answer_id": 34667148, "question_id": 34643170, "link": "https://stackoverflow.com/questions/34643170/amazon-django-each-12-hours-appears-that-errno-5-input-output-error/34667148#34667148", "title": "Amazon + Django each 12 hours appears that [Errno 5] Input/output error", "body": "<p>I have been exploring, and I should say that the origin of this error were in my code</p>\n\n<p>I have two newbie errors: </p>\n\n<ol>\n<li><code>print</code> <strong>sentence in production</strong></li>\n</ol>\n\n<p>In the traceback that I shown above in my question, I had a <code>print</code> sentence inside my <code>get_context_data()</code> function of this way:</p>\n\n<pre><code>File \"/home/ubuntu/workspace/neurorehabilitation-system/userprofile/views.py\" in get_context_data\n  50.             print (user.is_physiotherapist)\n</code></pre>\n\n<p>Is possible that each time that this print sentence is executed, the process try write to the stdout file in my amazon ec2 machine instance.</p>\n\n<p>I remove this print sentence in that line, and retrieve the changes into my production servers via git and restart gunicorn server and all it's works perfect.</p>\n\n<ol start=\"2\">\n<li><strong>I have the</strong> <code>DEBUG=True</code> <strong>in production</strong></li>\n</ol>\n\n<p>I have the following settings files:</p>\n\n<pre><code>settings/\n    base.py # --- without DEBUG\n    development.py # --- DEBUG=True\n    testing.py # --- DEBUG=True\n    production.py # --- DEBUG=False\n    staging.py # --- DEBUG=False  \n</code></pre>\n\n<p>All files (<code>development.py, testing.py, production.py, staging.py</code>) inherit from <code>base.py</code></p>\n\n<p>But I don't know how to make that in my ec2 instance, the production.py be executed, this inherit all from base.py and override DEBUG to False.</p>\n\n<p>I've been exploring and one possibility is change their value (True or False) according to the name of the host in which is running my application, <a href=\"https://nicksergeant.com/automatically-setting-debug-in-your-django-app-based-on-server-hostname/\" rel=\"noreferrer\">such as shown in this post</a></p>\n\n<p>In my case this is the value of my hostname</p>\n\n<pre><code>(nrb_dev)ubuntu@ip-172-31-27-249:~$ python\nPython 3.4.3 (default, Oct 14 2015, 20:28:29) \n[GCC 4.8.4] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import socket\n&gt;&gt;&gt; a=socket.gethostname()\n&gt;&gt;&gt; a\n'ip-172-31-27-249'\n&gt;&gt;&gt; \n&gt;&gt;&gt; if a != 'ip-172-31-27-249':\n...     DEBUG = print ('Caleno juiciocito')\n... \n&gt;&gt;&gt; DEBUG\nTrue\n&gt;&gt;&gt; \n</code></pre>\n\n<p>This mean, put into my base.py the following:</p>\n\n<pre><code>import socket\n\nif socket.gethostname() == 'ip-172-31-27-249':\n    DEBUG = False\nelse:\n    DEBUG = True\n</code></pre>\n\n<p>Although I am hardcoding the hostname of the production server in my code.\nThis mean that I am adding a point thar after will have modified manually when we want deploy my project in other machine with other hostname</p>\n\n<p>Is this a best practice despite to it's works? </p>\n\n<p>Another option which I think that it's the most suited alternative is fix the value of my <code>DJANGO_SETTINGS_MODULE</code> environment variables</p>\n\n<p>In my  particular situation I am using <code>virtualenvwrapper</code> and I have two virtual environments so:</p>\n\n<p><code>nrb_dev</code> for my development environment</p>\n\n<p><code>nrb_test</code> for my testing environment .\nI have some hooks which are activated when the virtual environments are activated</p>\n\n<p>In <code>nrb_dev</code> in <code>$VIRTUAL_ENV/bin/postactivate</code> I have this:</p>\n\n<pre><code>export DJANGO_SETTINGS_MODULE=\"neurorehabilitation.settings.development\"\n</code></pre>\n\n<p>In the same way, in <code>nrb_test</code> in <code>$VIRTUAL_ENV/bin/postactivate</code> I have this:</p>\n\n<pre><code>export DJANGO_SETTINGS_MODULE=\"neurorehabilitation.settings.testing\"\n</code></pre>\n\n<p>This mean that in my amazon EC2 production machine I should change the hook in <code>$VIRTUAL_ENV/bin/postactivate</code> to choose the <code>settings/production.py</code> of this way:</p>\n\n<pre><code>export DJANGO_SETTINGS_MODULE=\"neurorehabilitation.settings.production\"\n</code></pre>\n\n<p>Just for test effects and the temporal way, I print the <code>DEBUG</code> value in my <code>settings/production.py</code> </p>\n\n<pre><code>from .base import *\n\n# SECURITY WARNING: don't run with debug turned on in production!\nDEBUG = False\nprint (DEBUG) # just for now.\n</code></pre>\n\n<p>And when I start my gunicorn daemon server, I can see that DEBUG value is set to <code>False</code> </p>\n\n<pre><code>(nrb_dev)ubuntu@ip-172-31-27-249:~/workspace/neurorehabilitation-system$ gunicorn -c neurorehabilitation/gunicorn_config.py neurorehabilitation.wsgi \n[2016-01-08 00:26:15 +0000] [6691] [INFO] Starting gunicorn 19.4.5\n[2016-01-08 00:26:15 +0000] [6691] [INFO] Listening at: http://127.0.0.1:8000 (6691)\n[2016-01-08 00:26:15 +0000] [6691] [INFO] Using worker: sync\n[2016-01-08 00:26:15 +0000] [6694] [INFO] Booting worker with pid: 6694\nFalse\n^C[2016-01-08 00:26:19 +0000] [6691] [INFO] Handling signal: int\n</code></pre>\n\n<p><strong>Additional Notes</strong></p>\n\n<p>I can explore the Django <a href=\"https://docs.djangoproject.com/en/1.9/topics/logging/\" rel=\"noreferrer\">Logging functionality</a> for register events and others things of my application.</p>\n\n<p>I should explore the <a href=\"http://docs.gunicorn.org/en/latest/deploy.html#supervisor\" rel=\"noreferrer\">supervisor service</a> for manage the gunicorn procees of a better way in production. </p>\n\n<p>Other resources for supervisor:</p>\n\n<p><a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-manage-supervisor-on-ubuntu-and-debian-vps\" rel=\"noreferrer\">How to install and manage supervisor in Ubuntu</a></p>\n\n<p><a href=\"http://michal.karzynski.pl/blog/2013/06/09/django-nginx-gunicorn-virtualenv-supervisor/\" rel=\"noreferrer\">Setting up Django with Nginx, Gunicorn, virtualenv, supervisor and PostgreSQL</a> </p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 7760056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zh1nI.jpg?s=128&g=1", "display_name": "mapleflow", "link": "https://stackoverflow.com/users/7760056/mapleflow"}, "is_accepted": false, "score": 0, "last_activity_date": 1534143910, "last_edit_date": 1534143910, "creation_date": 1534129363, "answer_id": 51814683, "question_id": 34643170, "link": "https://stackoverflow.com/questions/34643170/amazon-django-each-12-hours-appears-that-errno-5-input-output-error/51814683#51814683", "title": "Amazon + Django each 12 hours appears that [Errno 5] Input/output error", "body": "<p>some possible causes and suggestions for this problem.</p>\n\n<p>Causes:</p>\n\n<ol>\n<li>circular references</li>\n<li>hard disk bad sector error</li>\n<li>complex process, user, network, permission and other raise mixed error</li>\n</ol>\n\n<p>Suggestions:</p>\n\n<ol>\n<li>use logging replace print, it is best way!!!</li>\n<li>redirect IO to a file or to null: <code>python test.py &gt; test.log 2&gt;&amp;1 &amp;</code>, <code>python test.py &gt; /dev/null 2&gt;&amp;1 &amp;</code></li>\n</ol>\n"}], "owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4889, "favorite_count": 2, "answer_count": 3, "score": 11, "last_activity_date": 1534143910, "creation_date": 1452115887, "last_edit_date": 1452181540, "question_id": 34643170, "link": "https://stackoverflow.com/questions/34643170/amazon-django-each-12-hours-appears-that-errno-5-input-output-error", "title": "Amazon + Django each 12 hours appears that [Errno 5] Input/output error", "body": "<p>I recently setup and deploy an Amazon EC2 instance for deploy my django project.</p>\n\n<p>I  was interacting with my application via browser when I get this error in the browser:</p>\n\n<pre><code>errno 5 input/output error django\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/e7PvN.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/e7PvN.png\" alt=\"enter image description here\"></a></p>\n\n<p>This error did reference to some function of my application</p>\n\n<pre><code>Environment:\n\nRequest Method: GET\nRequest URL: http://localhost:8000/accounts/profile/\n\nDjango Version: 1.9\nPython Version: 3.4.3\nInstalled Applications:\n['django.contrib.admin',\n 'django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'crispy_forms',\n 'django_extensions',\n 'storages',\n 'userprofile']\nInstalled Middleware:\n['django.middleware.security.SecurityMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.common.CommonMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.auth.middleware.SessionAuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'django.middleware.clickjacking.XFrameOptionsMiddleware']\n\n\n\nTraceback:\n\nFile \"/home/ubuntu/.virtualenvs/nrb_dev/lib/python3.4/site-packages/django/core/handlers/base.py\" in get_response\n  149.                     response = self.process_exception_by_middleware(e, request)\n\nFile \"/home/ubuntu/.virtualenvs/nrb_dev/lib/python3.4/site-packages/django/core/handlers/base.py\" in get_response\n  147.                     response = wrapped_callback(request, *callback_args, **callback_kwargs)\n\nFile \"/home/ubuntu/.virtualenvs/nrb_dev/lib/python3.4/site-packages/django/views/generic/base.py\" in view\n  68.             return self.dispatch(request, *args, **kwargs)\n\nFile \"/home/ubuntu/.virtualenvs/nrb_dev/lib/python3.4/site-packages/django/utils/decorators.py\" in _wrapper\n  67.             return bound_func(*args, **kwargs)\n\nFile \"/home/ubuntu/.virtualenvs/nrb_dev/lib/python3.4/site-packages/django/contrib/auth/decorators.py\" in _wrapped_view\n  23.                 return view_func(request, *args, **kwargs)\n\nFile \"/home/ubuntu/.virtualenvs/nrb_dev/lib/python3.4/site-packages/django/utils/decorators.py\" in bound_func\n  63.                 return func.__get__(self, type(self))(*args2, **kwargs2)\n\nFile \"/home/ubuntu/workspace/neurorehabilitation-system/userprofile/mixins.py\" in dispatch\n  7.         return super(LoginRequiredMixin, self).dispatch(request, *args, **kwargs)\n\nFile \"/home/ubuntu/.virtualenvs/nrb_dev/lib/python3.4/site-packages/django/views/generic/base.py\" in dispatch\n  88.         return handler(request, *args, **kwargs)\n\nFile \"/home/ubuntu/.virtualenvs/nrb_dev/lib/python3.4/site-packages/django/views/generic/base.py\" in get\n  157.         context = self.get_context_data(**kwargs)\n\nFile \"/home/ubuntu/workspace/neurorehabilitation-system/userprofile/views.py\" in get_context_data\n  50.             print (user.is_physiotherapist)\n\nException Type: OSError at /accounts/profile/\nException Value: [Errno 5] Input/output error\n</code></pre>\n\n<p>At the end in the line 50 is referenced a <code>get_context_data()</code> function which is inside of a class based view that inherit of <code>TemplateView</code> CBV</p>\n\n<p>but in my console the server require restart and when I did this, the error was solved of a magic way ..</p>\n\n<p>I've search this error and I found this ticket reported <a href=\"https://code.djangoproject.com/ticket/23284\" rel=\"noreferrer\">https://code.djangoproject.com/ticket/23284</a></p>\n\n<p>This report is very similar to my error ...</p>\n\n<p>In addition I had this error yesterday, I restart my server, and today I have again the error.</p>\n\n<p>There is some problem with EC2 infraestructure with Django (I don't think so) or the problem is more for my application side?</p>\n\n<p>I don't think so that the function <code>get_context_data()</code> of my application be the problem ...</p>\n"}, {"tags": ["python", "regex", "scrapy"], "comments": [{"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1452180934, "post_id": 34643138, "comment_id": 57063396, "body": "rules only work for the requests made of the <code>start_urls</code>, and the work on the <code>parse</code> method, so as you are overrinding that method, they are there for no reason"}, {"owner": {"reputation": 37, "user_id": 5095048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QBS5m.jpg?s=128&g=1", "display_name": "SuperNoobAttack", "link": "https://stackoverflow.com/users/5095048/supernoobattack"}, "reply_to_user": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1452199537, "post_id": 34643138, "comment_id": 57075219, "body": "Ah, so the rule I wrote was just being ignored. I figured the rules would apply to any links scraped. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5095048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QBS5m.jpg?s=128&g=1", "display_name": "SuperNoobAttack", "link": "https://stackoverflow.com/users/5095048/supernoobattack"}, "edited": false, "score": 0, "creation_date": 1452185779, "post_id": 34643433, "comment_id": 57067001, "body": "Although if I placed this code snippet in that function it would only execute if the username or password was incorrect since the <code>for</code> loop is nested inside of the <code>if</code> statement that checks the validity of the login credentials. I should be able to use that code snippet in a different place in the code pretty easily though. Thanks!"}, {"owner": {"reputation": 37, "user_id": 5095048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QBS5m.jpg?s=128&g=1", "display_name": "SuperNoobAttack", "link": "https://stackoverflow.com/users/5095048/supernoobattack"}, "edited": false, "score": 0, "creation_date": 1452186917, "post_id": 34643433, "comment_id": 57067825, "body": "Also, if the code is posted anywhere else, I get an error reading <code>globalname urljoin is not defined</code> I included all of my imports at the top of my code. Is there any import that I am missing to include urljoin?"}, {"owner": {"reputation": 1442, "user_id": 766955, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2GlZq.png?s=128&g=1", "display_name": "Frederic Bazin", "link": "https://stackoverflow.com/users/766955/frederic-bazin"}, "reply_to_user": {"reputation": 37, "user_id": 5095048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QBS5m.jpg?s=128&g=1", "display_name": "SuperNoobAttack", "link": "https://stackoverflow.com/users/5095048/supernoobattack"}, "edited": false, "score": 0, "creation_date": 1452210727, "post_id": 34643433, "comment_id": 57080368, "body": "Thanks for your feedback. Fixed the code. urljoin requires <code>from urlparse import urljoin</code>. but last release of scrapy now provides response.urljoin () method which is more elegant"}], "tags": [], "owner": {"reputation": 1442, "user_id": 766955, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2GlZq.png?s=128&g=1", "display_name": "Frederic Bazin", "link": "https://stackoverflow.com/users/766955/frederic-bazin"}, "is_accepted": true, "score": 1, "last_activity_date": 1452210664, "last_edit_date": 1452210664, "creation_date": 1452116767, "answer_id": 34643433, "question_id": 34643138, "link": "https://stackoverflow.com/questions/34643138/scrapy-link-extractors/34643433#34643433", "title": "Scrapy Link Extractors", "body": "<p>I recommend skipping rules and explicitly creating the request from <code>after_login()</code></p>\n\n<p>i.e. :</p>\n\n<pre><code>def after_login(self, response):\n    # check login succeed before going on\n    if \"Invalid user or password. Please try again.\" in response.body:\n        self.logger.error(\"Login failed\")\n    for href in response.selector.xpath('//a/@href').extract():\n        url = response.urljoin(href)\n        yield request(url, callback=self.parse_item)\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5095048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QBS5m.jpg?s=128&g=1", "display_name": "SuperNoobAttack", "link": "https://stackoverflow.com/users/5095048/supernoobattack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1086, "favorite_count": 0, "accepted_answer_id": 34643433, "answer_count": 1, "score": 1, "last_activity_date": 1452210664, "creation_date": 1452115786, "question_id": 34643138, "link": "https://stackoverflow.com/questions/34643138/scrapy-link-extractors", "title": "Scrapy Link Extractors", "body": "<p>I am attempting to write some code using scrapy that will follow specific links to back up data on an adobe breeze web server. However, I am fairly new to scrapy and it's usage. The code is still in its early stages and much of what I have so far has been cobbled from the scrapy tutorial </p>\n\n<p>My biggest issue so far has been scraping pages for links after initially logging in.</p>\n\n<pre><code>import scrapy\nfrom scrapy.spiders import CrawlSpider, Rule\nfrom scrapy.linkextractors import LinkExtractor\n\nclass LoginSpider(CrawlSpider):\n    name = 'example.com'\n    start_urls = [\n    'https://conted.breeze.und.nodak.edu/admin/meeting/folder/list?filter-rows=100&amp;filter-start=0&amp;sco-id=10003&amp;tab-id=10003'\n    ]\n\n    def parse(self, response):\n        return scrapy.FormRequest.from_response(\n            response,\n            formdata={'login' : 'jake', 'password' : 'password'},\n        callback=self.after_login\n    )\n\n    def after_login(self, response):\n        # check login succeed before going on\n        if \"Invalid user or password. Please try again.\" in response.body:\n            self.logger.error(\"Login failed\")\n            return\n\n    rules = (\n        # Rule(LinkExtractor(deny_domains=['/admin/meeting?sco-id=10003&amp;amp;tab-id=10003',\n        #   '/admin/meeting?sco-id=10004&amp;amp;tab-id=10004'])),\n        #Rule(LinkExtractor(allow=['/admin/meeting?sco-id=\\w+']), callback='parse_item'),\n        Rule(LinkExtractor(allow=[r'\\w+']), callback='parse_item'),\n    )\n\n    def parse_item(self, response):\n        self.logger.info('response.url=%s' % response.url)\n</code></pre>\n\n<p>the starting URL is the actual page I want to scrape links from but the server will prompt the user to log in with their credentials before being able to access that specific page. So in theory the response to this page would contain the links I am looking for. Although I am not receiving any results for my broad regex.</p>\n\n<hr>\n\n<h2>Commented out code</h2>\n\n<p>the commented out rules were for specifiers for the links I needed to find in the following page. As you can see, I instead added a completely open regex to test for any links on the page. This returned the following <a href=\"http://pastebin.com/RkSWjwik\" rel=\"nofollow\">result</a></p>\n\n<h2>Page Source</h2>\n\n<p>Although the actual page is behind a login, the source HTML for the main directory I am attempting to receive links from can be found <a href=\"http://pastebin.com/kbByjYbV\" rel=\"nofollow\">here</a></p>\n"}, {"tags": ["python", "excel", "openpyxl"], "comments": [{"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1452152560, "post_id": 34643052, "comment_id": 57044741, "body": "This is horrible code. Please try and write something that is closer to the style of the openpyxl docs."}, {"owner": {"reputation": 27, "user_id": 2129977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69c65f005c94c33658d6657c24f87f47?s=128&d=identicon&r=PG", "display_name": "Heisenberg", "link": "https://stackoverflow.com/users/2129977/heisenberg"}, "reply_to_user": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1460408209, "post_id": 34643052, "comment_id": 60718657, "body": "God forbid anyone try to ya know....learn something here. Please try to be constructive instead of just a jerk. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "is_accepted": true, "score": 1, "last_activity_date": 1452127360, "creation_date": 1452127360, "answer_id": 34645505, "question_id": 34643052, "link": "https://stackoverflow.com/questions/34643052/using-openpyxl-python-to-add-information-to-existing-cell/34645505#34645505", "title": "Using Openpyxl (Python) to add information to existing cell", "body": "<p>Excel isn't really built to store collections of values in a single cell. Each cell holds at most one value, and that value is fundamentally either numeric or string. (Dates, times, and truth values are variations on numeric.)</p>\n\n<p>In your case, if you really want a comma-separated list of values in a <em>single</em> cell, then your only choice is to make the cell store a string representation of that list. (So to Excel, it's just one value, which is a string.) Then, each time you want to add an entry to that cell, you have to append the comma and the string representation of that new entry onto the end of the existing string value.</p>\n\n<p>There are a few ways to do this. Most experienced Python programmers would probably use</p>\n\n<pre><code>ws[cell_address] = ', '.join(ws[cell_address], str(new_value))\n</code></pre>\n\n<p>You might also see</p>\n\n<pre><code>ws[cell_address] = ws[cell_address] + ', ' + str(new_value)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>ws[cell_address] += ', ' + str(new_value)\n</code></pre>\n\n<p>(I've purposely used names other than what's in the text of your question, to hopefully better illustrate the general concept.)</p>\n\n<p>Now, taking a closer look at your actual code, it seems to me that you really don't need to repeatedly assign that cell at all, because the list of values is already fully formed by the time you are trying to assign it the first time. So you can just take the string representation of the entire list and assign it to that cell in one shot, without using a loop.</p>\n\n<p>I would probably do it this way:</p>\n\n<pre><code>ws[cell_address] = str(my_list)[1:-1]\n</code></pre>\n\n<p>where the <code>[1:-1]</code> is skipping the first and last character, which would be the leading and trailing brackets in Python's standard string representation of a list. Another possibility would be</p>\n\n<pre><code>ws[cell_address] = ', '.join(str(elem) for elem in my_list)\n</code></pre>\n\n<p>Now, if you know all your elements will already be strings, then that latter one can be simplified to</p>\n\n<pre><code>ws[cell_address] = ', '.join(my_list)\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 2129977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69c65f005c94c33658d6657c24f87f47?s=128&d=identicon&r=PG", "display_name": "Heisenberg", "link": "https://stackoverflow.com/users/2129977/heisenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1558, "favorite_count": 0, "accepted_answer_id": 34645505, "answer_count": 1, "score": -1, "last_activity_date": 1452127360, "creation_date": 1452115460, "question_id": 34643052, "link": "https://stackoverflow.com/questions/34643052/using-openpyxl-python-to-add-information-to-existing-cell", "title": "Using Openpyxl (Python) to add information to existing cell", "body": "<p>I'm writing a script that will pull data from an API and store it in an Excel spreadsheet. I'm using Openpyxl for this process. The only issue I'm running into is that when I try to add to the end of an existing cell, that cell is just deleted and replaced by what I'm adding in. Can someone please tell me a great way that I can comma separate these values in the same cell instead of having them replace one another, I'd really appreciate it.</p>\n\n<pre><code>#Make sure that there is a game listed for them\n    try:\n        while games['games'][x]['name']:\n            alist.append(games['games'][x]['name'])\n            x = x + 1\n    #After there are no more games, iterate through the list of games\n    # and add them to the spreadsheet\n    except IndexError:\n        y = 0\n        try:\n            while alist[y]:\n                ws['B'+str(namecount+1)] = alist[y]\n                y = y + 1\n        except IndexError:\n            alist.clear()\n</code></pre>\n\n<p>It looks like whenever it's going through the 2nd while loop, instead of adding to the existing cell it's just deleting it. I've looked through the Openpyxl documentation and cannot find anything that will help me iterate through my list and then add each entry in the list, separated by commas, into the same cell. Any help would be greatly appreciated!</p>\n"}, {"tags": ["python", "python-2.7", "api", "twitter"], "comments": [{"owner": {"reputation": 537, "user_id": 4246412, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/3oYN4.jpg?s=128&g=1", "display_name": "Jeffrey Swan", "link": "https://stackoverflow.com/users/4246412/jeffrey-swan"}, "edited": false, "score": 0, "creation_date": 1452115956, "post_id": 34643016, "comment_id": 57032248, "body": "Is there just nothing there, or is it writing the &quot;No screen name&quot; message?"}, {"owner": {"reputation": 13, "user_id": 5750579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20b06b1a316ae85947a5afb166b93b2?s=128&d=identicon&r=PG&f=1", "display_name": "some data guy", "link": "https://stackoverflow.com/users/5750579/some-data-guy"}, "reply_to_user": {"reputation": 537, "user_id": 4246412, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/3oYN4.jpg?s=128&g=1", "display_name": "Jeffrey Swan", "link": "https://stackoverflow.com/users/4246412/jeffrey-swan"}, "edited": false, "score": 0, "creation_date": 1452116151, "post_id": 34643016, "comment_id": 57032350, "body": "@Jefe There is a &quot;no screen name&quot; message in the CSV because I put it under a try and except function. I guess that means that it went to the except condition off an AttributeError."}, {"owner": {"reputation": 13, "user_id": 5750579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20b06b1a316ae85947a5afb166b93b2?s=128&d=identicon&r=PG&f=1", "display_name": "some data guy", "link": "https://stackoverflow.com/users/5750579/some-data-guy"}, "reply_to_user": {"reputation": 537, "user_id": 4246412, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/3oYN4.jpg?s=128&g=1", "display_name": "Jeffrey Swan", "link": "https://stackoverflow.com/users/4246412/jeffrey-swan"}, "edited": false, "score": 0, "creation_date": 1452116203, "post_id": 34643016, "comment_id": 57032385, "body": "@Jefe however, when I printed the tweets outside of the CSV file, there is a screen_name under a list inside the list of tweets. I was wondering how to access that."}, {"owner": {"reputation": 537, "user_id": 4246412, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/3oYN4.jpg?s=128&g=1", "display_name": "Jeffrey Swan", "link": "https://stackoverflow.com/users/4246412/jeffrey-swan"}, "edited": false, "score": 0, "creation_date": 1452116312, "post_id": 34643016, "comment_id": 57032444, "body": "In that case I&#39;d make sure screen_name is actually the correct attribute to call. A glance at the docs makes me wonder if user.screen_name might not be what you want."}, {"owner": {"reputation": 13, "user_id": 5750579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20b06b1a316ae85947a5afb166b93b2?s=128&d=identicon&r=PG&f=1", "display_name": "some data guy", "link": "https://stackoverflow.com/users/5750579/some-data-guy"}, "reply_to_user": {"reputation": 537, "user_id": 4246412, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/3oYN4.jpg?s=128&g=1", "display_name": "Jeffrey Swan", "link": "https://stackoverflow.com/users/4246412/jeffrey-swan"}, "edited": false, "score": 0, "creation_date": 1452117986, "post_id": 34643016, "comment_id": 57033342, "body": "I tried calling that. But it appears that the screen name is such inside another variable called &quot;user&quot; when I retrieve the data. I try indexing to get it out of the variable, but it&#39;s not working. The data does not appear to be iterable."}, {"owner": {"reputation": 537, "user_id": 4246412, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/3oYN4.jpg?s=128&g=1", "display_name": "Jeffrey Swan", "link": "https://stackoverflow.com/users/4246412/jeffrey-swan"}, "edited": false, "score": 0, "creation_date": 1452118169, "post_id": 34643016, "comment_id": 57033430, "body": "Check the type of the &quot;user&quot; attribute. It could be returning a dict, in which case user[&quot;screen_name&quot;] would be the correct call."}, {"owner": {"reputation": 13, "user_id": 5750579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20b06b1a316ae85947a5afb166b93b2?s=128&d=identicon&r=PG&f=1", "display_name": "some data guy", "link": "https://stackoverflow.com/users/5750579/some-data-guy"}, "reply_to_user": {"reputation": 537, "user_id": 4246412, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/3oYN4.jpg?s=128&g=1", "display_name": "Jeffrey Swan", "link": "https://stackoverflow.com/users/4246412/jeffrey-swan"}, "edited": false, "score": 0, "creation_date": 1452118677, "post_id": 34643016, "comment_id": 57033687, "body": "all of the tweets are &lt;class &#39;twitter.status.Status&#39;&gt; and the screen name is inside the User which is in &lt;class &#39;twitter.user.User&#39;&gt;"}, {"owner": {"reputation": 537, "user_id": 4246412, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/3oYN4.jpg?s=128&g=1", "display_name": "Jeffrey Swan", "link": "https://stackoverflow.com/users/4246412/jeffrey-swan"}, "edited": false, "score": 0, "creation_date": 1452119427, "post_id": 34643016, "comment_id": 57034044, "body": "You&#39;re using python-twitter, right? Looking at the code, screen_name is actually an attribute of the userstatus class. Can you remove the try/except and provide the actual attribute error please?"}, {"owner": {"reputation": 13, "user_id": 5750579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20b06b1a316ae85947a5afb166b93b2?s=128&d=identicon&r=PG&f=1", "display_name": "some data guy", "link": "https://stackoverflow.com/users/5750579/some-data-guy"}, "reply_to_user": {"reputation": 537, "user_id": 4246412, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/3oYN4.jpg?s=128&g=1", "display_name": "Jeffrey Swan", "link": "https://stackoverflow.com/users/4246412/jeffrey-swan"}, "edited": false, "score": 0, "creation_date": 1452707713, "post_id": 34643016, "comment_id": 57292418, "body": "@Jefe I was able to fix this error after some tinkering. I put the try/except there in order to avoid an AttributeError because sometimes some Twitter are missing attributes like &quot;Description&quot;, &quot;Cover Photo&quot;, etc. I know that every twitter should have a screen name, but sometimes in my UTF-8 encoding doesn&#39;t pick up foreign names, so that&#39;s why it&#39;s there."}], "owner": {"reputation": 13, "user_id": 5750579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20b06b1a316ae85947a5afb166b93b2?s=128&d=identicon&r=PG&f=1", "display_name": "some data guy", "link": "https://stackoverflow.com/users/5750579/some-data-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452115337, "creation_date": 1452115337, "question_id": 34643016, "link": "https://stackoverflow.com/questions/34643016/screen-name-on-twitter-api-not-coming-up", "title": "Screen_name on Twitter API not coming up", "body": "<p>This is my code: </p>\n\n<pre><code>downloads = api.GetSearch(#something) \nwith open(\"twitter downloads.csv\", \"w\") as myfile:\nfor tweets in downloads:\n      try:\n           myfile.write('\"{0}\", '.format(tweets.screen_name))\n      except AttributeError:\n           myfile.write('\"No screen name\",')\n</code></pre>\n\n<p>When I print out the tweets, there are the people's screen names. However, it is not coming up on my CSV file. Everything else is written in my CSV file from their tweets, language, description, etc. (Those portions of the code are not featured). </p>\n\n<p>I don't know why screen name isn't coming up. Is there some kind of UTC-encoding that I need to put at the end of <code>format(tweets.screen_name))</code>.encode? </p>\n\n<p>I did that for location and it works. I tried doing UTC encoding for screen names, and it didn't work. I tried it without any UTC encoding, and it still didn't work. </p>\n"}, {"tags": ["python", "spyder"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5754359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d605da45e1fc726b956d7ea356a1587e?s=128&d=identicon&r=PG&f=1", "display_name": "Maxence1402", "link": "https://stackoverflow.com/users/5754359/maxence1402"}, "edited": false, "score": 1, "creation_date": 1452116378, "post_id": 34643242, "comment_id": 57032480, "body": "Thanks for your response but it only deletes last line, I&#39;m currently writing 13 lines + 1 line for CR so i&#39;m still writing 13 lines with &#39;\\r&#39; and putting &#39;\\r&#39;*13 does not work..."}, {"owner": {"reputation": 537, "user_id": 4246412, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/3oYN4.jpg?s=128&g=1", "display_name": "Jeffrey Swan", "link": "https://stackoverflow.com/users/4246412/jeffrey-swan"}, "reply_to_user": {"reputation": 115, "user_id": 5754359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d605da45e1fc726b956d7ea356a1587e?s=128&d=identicon&r=PG&f=1", "display_name": "Maxence1402", "link": "https://stackoverflow.com/users/5754359/maxence1402"}, "edited": false, "score": 0, "creation_date": 1452116597, "post_id": 34643242, "comment_id": 57032590, "body": "Yes, that&#39;s my mistake. Sorry about that. Why not just insert a sys.stdout.flush() call?"}], "tags": [], "owner": {"reputation": 537, "user_id": 4246412, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/3oYN4.jpg?s=128&g=1", "display_name": "Jeffrey Swan", "link": "https://stackoverflow.com/users/4246412/jeffrey-swan"}, "is_accepted": false, "score": 1, "last_activity_date": 1452116147, "creation_date": 1452116147, "answer_id": 34643242, "question_id": 34642990, "link": "https://stackoverflow.com/questions/34642990/delete-several-lines-in-ipython-console/34643242#34643242", "title": "Delete several lines in IPython console", "body": "<p>Add the following to your print statement:</p>\n\n<pre><code>print(sudoku_pp(SUD1), flush=True, end='\\r')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 5754359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d605da45e1fc726b956d7ea356a1587e?s=128&d=identicon&r=PG&f=1", "display_name": "Maxence1402", "link": "https://stackoverflow.com/users/5754359/maxence1402"}, "edited": false, "score": 0, "creation_date": 1452287018, "post_id": 34643606, "comment_id": 57118558, "body": "sorry, that didn&#39;t work, and in fact it added one more blank line between grids :( Don&#39;t go too much trouble."}, {"owner": {"reputation": 3661, "user_id": 4352108, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/F0nIA.png?s=128&g=1", "display_name": "Arcturus B", "link": "https://stackoverflow.com/users/4352108/arcturus-b"}, "reply_to_user": {"reputation": 115, "user_id": 5754359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d605da45e1fc726b956d7ea356a1587e?s=128&d=identicon&r=PG&f=1", "display_name": "Maxence1402", "link": "https://stackoverflow.com/users/5754359/maxence1402"}, "edited": false, "score": 0, "creation_date": 1452425014, "post_id": 34643606, "comment_id": 57155351, "body": "@Maxence1402, what platform are you working with (Windows, *nix, etc.)? I might be able to test the solution further if you give me more details on this. Also, you should consider using <a href=\"https://docs.python.org/3.5/library/curses.html\" rel=\"nofollow noreferrer\">curses</a>."}, {"owner": {"reputation": 115, "user_id": 5754359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d605da45e1fc726b956d7ea356a1587e?s=128&d=identicon&r=PG&f=1", "display_name": "Maxence1402", "link": "https://stackoverflow.com/users/5754359/maxence1402"}, "edited": false, "score": 0, "creation_date": 1452636980, "post_id": 34643606, "comment_id": 57255770, "body": "I use Windows 10, 64 bits, and Spyder 2.7, Python 3.4. I tried once using curses but I only were able to rewrite the last line.."}], "tags": [], "owner": {"reputation": 3661, "user_id": 4352108, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/F0nIA.png?s=128&g=1", "display_name": "Arcturus B", "link": "https://stackoverflow.com/users/4352108/arcturus-b"}, "is_accepted": false, "score": 2, "last_activity_date": 1452117923, "last_edit_date": 1495540749, "creation_date": 1452117494, "answer_id": 34643606, "question_id": 34642990, "link": "https://stackoverflow.com/questions/34642990/delete-several-lines-in-ipython-console/34643606#34643606", "title": "Delete several lines in IPython console", "body": "<p>In bash you would simply have to use <code>tput</code>, but I know no equivalent to this tool in Python. However, you can still print the escape codes that would do the job. </p>\n\n<p>The <code>tput</code> command for moving the cursor to the previous line and erasing it is, according to <a href=\"https://stackoverflow.com/a/16745408/4352108\">this post</a>: </p>\n\n<pre><code>tput cuu1\ntput el\n</code></pre>\n\n<p>Which translates in term of escape codes into <code>\\033[K\\033[A</code>.</p>\n\n<p>So basically, you\u2019d just have to do this 13 times based on your example to erase the full sudoku:</p>\n\n<pre><code>print(13 * \"\\033[K\\033[A\")\nprint(sudoku_pp(SUD1))\n</code></pre>\n\n<p>I have only tested this solution in a iPython terminal in Linux, but not in Spyder itself, let me know if it works.  </p>\n\n<p>EDIT: Also note this answer about <a href=\"https://stackoverflow.com/a/6212096/4352108\">using <code>curses</code></a>. </p>\n"}], "owner": {"reputation": 115, "user_id": 5754359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d605da45e1fc726b956d7ea356a1587e?s=128&d=identicon&r=PG&f=1", "display_name": "Maxence1402", "link": "https://stackoverflow.com/users/5754359/maxence1402"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1146, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452117923, "creation_date": 1452115221, "question_id": 34642990, "link": "https://stackoverflow.com/questions/34642990/delete-several-lines-in-ipython-console", "title": "Delete several lines in IPython console", "body": "<p>I'm quite new to Pyhton, I use it since September in Spyder (Python 3.4). and I would like to create a program that solves a sudoku grid and displays it (in IPython console) during its completion.\nI hopefully did successfully the sudoku solver and I get a printable grid in output (I only post the printable grid code):</p>\n\n<pre><code>def sudoku_pp(g):\n    c = g.replace(\"0\",\"_\")\n    s = \"\"\n    l = 0\n    for i in range(13):\n        if i % 4 == 0:\n            for _ in range(25):\n                s += \"-\"        \n        else:\n            k = 9*l \n            s += \"|\"           \n            for j in range(9):\n                s += \" \"+c[k+j]\n                if j%3 == 2:\n                    s += \" |\"\n            l += 1\n        s += \"\\n\"\n    return(s)\n</code></pre>\n\n<p>where g is a string containing every number line to line, e.g. <code>SUD1 = '530070000600195000098000060800060003400803001700020006060000280000419005000080079'</code> and </p>\n\n<pre><code>&gt;&gt;&gt;print(sudoku_pp(SUD1))\n-------------------------\n| 5 3 _ | _ 7 _ | _ _ _ |\n| 6 _ _ | 1 9 5 | _ _ _ |\n| _ 9 8 | _ _ _ | _ 6 _ |\n-------------------------\n| 8 _ _ | _ 6 _ | _ _ 3 |\n| 4 _ _ | 8 _ 3 | _ _ 1 |\n| 7 _ _ | _ 2 _ | _ _ 6 |\n-------------------------\n| _ 6 _ | _ _ _ | 2 8 _ |\n| _ _ _ | 4 1 9 | _ _ 5 |\n| _ _ _ | _ 8 _ | _ 7 9 |\n-------------------------\n</code></pre>\n\n<p>My sudoku solver prints a full grid each step, how to erase it entirely and rewrite another one on it?</p>\n\n<p>Thanks a lot and sorry for bad language.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "edited": false, "score": 0, "creation_date": 1452114676, "post_id": 34642787, "comment_id": 57031567, "body": "Why would you have that array? rather than just <code>array([ 1.16179327, -0.1721163 ])</code>. To extract it just type <code>RCoeff[0][0]</code>"}, {"owner": {"reputation": 2070, "user_id": 1044698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KWnHV.png?s=128&g=1", "display_name": "Energya", "link": "https://stackoverflow.com/users/1044698/energya"}, "edited": false, "score": 0, "creation_date": 1452115455, "post_id": 34642787, "comment_id": 57031998, "body": "Just to be sure, which Python/numpy version are you using?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1452116560, "post_id": 34642787, "comment_id": 57032568, "body": "I suspect the downvote(s) come from people who don&#39;t understand the structure of your array.  But you really should have told us something about where it came from."}, {"owner": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "edited": false, "score": 0, "creation_date": 1452116731, "post_id": 34642787, "comment_id": 57032669, "body": "(I didn&#39;t downvote it :P) But I&#39;m also curious on how did the OP get that array, or why is he using that structure."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1452117820, "post_id": 34642787, "comment_id": 57033258, "body": "Is it an import from MATLAB?"}, {"owner": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "edited": false, "score": 0, "creation_date": 1452117871, "post_id": 34642787, "comment_id": 57033277, "body": "Yes it was originally a mat file which is imported in python. The mat file is a struct with different size arrays."}, {"owner": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "edited": false, "score": 0, "creation_date": 1452118563, "post_id": 34642787, "comment_id": 57033635, "body": "That makes this question much more valuable, as is a common mistake when using scipy&#39;s <code>io.loadmat</code>!"}, {"owner": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "edited": false, "score": 0, "creation_date": 1452118672, "post_id": 34642787, "comment_id": 57033684, "body": "Any suggestion as to how this import of the mat file be done ?"}, {"owner": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "edited": false, "score": 1, "creation_date": 1452120672, "post_id": 34642787, "comment_id": 57034569, "body": "You are loading it in the proper way. Is just the way scipy imports matlab&#39;s <code>.mat</code> files. You need to be careful when loading them."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1452200845, "post_id": 34642787, "comment_id": 57076032, "body": "And <code>loadmat</code> is just coping with the complex data structure that MATLAB saves."}], "answers": [{"comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1452115762, "post_id": 34642822, "comment_id": 57032152, "body": "Print your <code>a</code>.  It won&#39;t display the same as the OP <code>RCoeff</code>.  Your <code>a</code> has shape <code>(1,1,2)</code>."}, {"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1452115907, "post_id": 34642822, "comment_id": 57032223, "body": "Weird, maybe the display is different because of that ide/interpreter OP is using? Looking at the output the OP is getting, I wonder if <code>RCoeff.flatten().flatten().tolist()</code> will do it. Waiting for clarification."}, {"owner": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "edited": false, "score": 1, "creation_date": 1452116257, "post_id": 34642822, "comment_id": 57032414, "body": "&gt;&gt;&gt; z = ARCoeff.flatten().flatten().tolist() &gt;&gt;&gt; type(z) Out[38]: list &gt;&gt;&gt; z1 = z[0] &gt;&gt;&gt; type(z1) Out[40]: numpy.ndarray"}], "tags": [], "owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "is_accepted": false, "score": 3, "last_activity_date": 1452114712, "creation_date": 1452114712, "answer_id": 34642822, "question_id": 34642787, "link": "https://stackoverflow.com/questions/34642787/python-flatten-ndarray/34642822#34642822", "title": "Python: Flatten ndarray", "body": "<p><code>ndarray.flatten</code> exists for this purpose.</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; a = np.array([np.array([[ 1.16179327, -0.1721163 ]])], dtype=object)\n&gt;&gt;&gt; a.flatten()\narray([1.16179327, -0.1721163], dtype=object)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&gt;&gt;&gt; a.flatten().tolist()\n[1.16179327, -0.1721163]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 3, "creation_date": 1452114870, "post_id": 34642856, "comment_id": 57031667, "body": "this will give you a nested list <code>[[[1.16179327, -0.1721163]]]</code>."}], "tags": [], "owner": {"reputation": 2070, "user_id": 1044698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KWnHV.png?s=128&g=1", "display_name": "Energya", "link": "https://stackoverflow.com/users/1044698/energya"}, "is_accepted": false, "score": 1, "last_activity_date": 1452115414, "last_edit_date": 1452115414, "creation_date": 1452114808, "answer_id": 34642856, "question_id": 34642787, "link": "https://stackoverflow.com/questions/34642787/python-flatten-ndarray/34642856#34642856", "title": "Python: Flatten ndarray", "body": "<p>Have you tried the built-in <a href=\"https://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.ndarray.tolist.html\" rel=\"nofollow\">.tolist()</a> method?</p>\n\n<pre><code>&gt;&gt;&gt; RCoeff.tolist()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "edited": false, "score": 0, "creation_date": 1452116780, "post_id": 34643232, "comment_id": 57032701, "body": "&gt;&gt;&gt; x[0].flatten() Out[65]: array([ 1.16179327, -0.1721163 ]) &gt;&gt;&gt; z = x[0].flatten() &gt;&gt;&gt; type(z) Out[67]: numpy.ndarray"}, {"owner": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "edited": false, "score": 0, "creation_date": 1452116880, "post_id": 34643232, "comment_id": 57032756, "body": "So, it still stays ndarry ?"}, {"owner": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "reply_to_user": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "edited": false, "score": 0, "creation_date": 1452117031, "post_id": 34643232, "comment_id": 57032838, "body": "@user1243255 you can append <code>.tolist()</code> if you want a list."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 5, "last_activity_date": 1452117955, "last_edit_date": 1452117955, "creation_date": 1452116118, "answer_id": 34643232, "question_id": 34642787, "link": "https://stackoverflow.com/questions/34642787/python-flatten-ndarray/34643232#34643232", "title": "Python: Flatten ndarray", "body": "<p>To reproduce the display of the OP, I have to use:</p>\n\n<pre><code>In [83]: x=np.zeros((1,),dtype=object)    \nIn [84]: x[0]=np.array([[ 1.16179327, -0.1721163 ]])\nIn [85]: x\nOut[85]: array([array([[ 1.16179327, -0.1721163 ]])], dtype=object)\n</code></pre>\n\n<p>This is not the same as</p>\n\n<pre><code>In [75]: a = np.array([np.array([[ 1.16179327, -0.1721163 ]])], dtype=object)\n\nIn [76]: a\nOut[76]: array([[[1.16179327, -0.1721163]]], dtype=object)\n\nIn [78]: a.shape\nOut[78]: (1, 1, 2)\n</code></pre>\n\n<p><code>np.array</code> tries to convert its inputs into a high dimensional array, and removes most evidence of nested arrays.</p>\n\n<p>From the names, I'm guessing this array comes from a library with a name like <code>ARC</code> - I believe that's a mapping library.</p>\n\n<p>In any case, we can pull the inner array out just by indexing:</p>\n\n<pre><code>In [86]: x[0]\nOut[86]: array([[ 1.16179327, -0.1721163 ]])\n</code></pre>\n\n<p>That is now a simple 2d array, which can be flattened or raveled, or reshaped:</p>\n\n<pre><code>In [87]: x[0].flatten()\nOut[87]: array([ 1.16179327, -0.1721163 ])\n</code></pre>\n\n<p><code>flatten</code> does nothing to the original <code>x</code> since that is 1d already.</p>\n\n<hr>\n\n<p>I found <code>ARCoeff</code> in a MATLAB document</p>\n\n<p><a href=\"http://www.mathworks.com/help/econ/modify-regarima-model-properties.html\" rel=\"nofollow\">http://www.mathworks.com/help/econ/modify-regarima-model-properties.html</a></p>\n\n<p>A 2d array within an object array is characteristic of how <code>scipy</code> loads MATLAB files.</p>\n\n<p>In Octave I can do</p>\n\n<pre><code>octave:11&gt; ARCoeff={[1,2,3]};\noctave:12&gt; save -7 test.mat ARCoeff\n</code></pre>\n\n<p>and in IPython load the file with <code>scipy.io.loadmat</code></p>\n\n<pre><code>In [99]: from scipy.io import loadmat\n\nIn [100]: M=loadmat('test.mat')\n\nIn [101]: M['ARCoeff']\nOut[101]: array([[array([[ 1.,  2.,  3.]])]], dtype=object)\n</code></pre>\n"}], "owner": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 34643232, "answer_count": 3, "score": 0, "last_activity_date": 1452117955, "creation_date": 1452114578, "last_edit_date": 1452116688, "question_id": 34642787, "link": "https://stackoverflow.com/questions/34642787/python-flatten-ndarray", "title": "Python: Flatten ndarray", "body": "<p>I have inherited some python code which has a ndarray which looks as:</p>\n\n<pre><code>&gt;&gt;&gt; ARCoeff\nOut[6]: array([array([[ 1.16179327, -0.1721163 ]])], dtype=object)\n\n&gt;&gt;&gt; ARCoeff.dtype\nOut[7]: dtype('O')\n\n&gt;&gt;&gt; ARCoeff.shape\nOut[8]: (1,)\n\n&gt;&gt;&gt; type( ARCoeff )\nOut[2]: numpy.ndarray\n</code></pre>\n\n<p>How do I extract the array out to something like </p>\n\n<pre><code>[ 1.16179327, -0.1721163 ]\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Based on the suggestion provided this is what I get:</p>\n\n<pre><code>&gt;&gt;&gt; z = ARCoeff.flatten().tolist()\n\n&gt;&gt;&gt; z[0]\nOut[19]: array([[ 1.16179327, -0.1721163 ]])\n\n&gt;&gt;&gt; z1 = z[0]\n\n&gt;&gt;&gt; type(z1)\nOut[21]: numpy.ndarray\n</code></pre>\n\n<p>So, I am back to having an ndarray.</p>\n\n<p>Edit2:</p>\n\n<pre><code>&gt;&gt;&gt; np.version.version\nOut[31]: '1.8.0'\n</code></pre>\n\n<p>Edit3:</p>\n\n<pre><code>&gt;&gt;&gt; z = ARCoeff.flatten().flatten().tolist()\n&gt;&gt;&gt; type(z)\nOut[38]: list\n&gt;&gt;&gt; z1 = z[0]\n&gt;&gt;&gt; type(z1)\nOut[40]: numpy.ndarray\n</code></pre>\n\n<p>May I please know why my question is being voted down ? I am very new to Python so please bear with me.</p>\n"}, {"tags": ["python", "input", "caret"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 2, "creation_date": 1452114901, "post_id": 34642775, "comment_id": 57031681, "body": "You need do nothing. Most of your users won&#39;t be running the script in PyCharm, but in a terminal window. You can&#39;t move the cursor in a terminal window without the program moving it for you."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5703761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1a364d4e12294d3750ab93a8b223d6?s=128&d=identicon&r=PG&f=1", "display_name": "Pollik", "link": "https://stackoverflow.com/users/5703761/pollik"}, "edited": false, "score": 0, "creation_date": 1452185213, "post_id": 34643492, "comment_id": 57066618, "body": "Let me give another example.  &quot;nameSelf = input(&quot;What is your name? &quot;) print (nameSelf)  nameFriend = input(&quot;What is the name of your friend? &quot;) print (nameFriend)&quot;  If I run this code, I get this output:  &quot;What is your name? Penny Penny What is the name of your friend? &quot;  The caret at the beginning of the last line.  In other words, when the second call for Input is processed, the caret appears ahead of the text question, rather than after it."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "reply_to_user": {"reputation": 11, "user_id": 5703761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1a364d4e12294d3750ab93a8b223d6?s=128&d=identicon&r=PG&f=1", "display_name": "Pollik", "link": "https://stackoverflow.com/users/5703761/pollik"}, "edited": false, "score": 0, "creation_date": 1452199380, "post_id": 34643492, "comment_id": 57075112, "body": "@Polik:  it works fine for me, and there is no carat <code>^</code> anywhere.  How are you running your program?  It could be a side-effect of PyCharm if you are using that.  I suggest you test it as your users will run it.   One possibility is that your environment is doing something strange with stderr.  <code>input()</code> prompt is written to stderr, <code>print()</code> is written to stdout."}, {"owner": {"reputation": 11, "user_id": 5703761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1a364d4e12294d3750ab93a8b223d6?s=128&d=identicon&r=PG&f=1", "display_name": "Pollik", "link": "https://stackoverflow.com/users/5703761/pollik"}, "edited": false, "score": 0, "creation_date": 1452268118, "post_id": 34643492, "comment_id": 57107314, "body": "Dang....caret has more than one meaning, I now realise.  I meant caret as in a text insertion point (which is probably a safer way to describe it.)"}], "tags": [], "owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "is_accepted": false, "score": 2, "last_activity_date": 1452117002, "creation_date": 1452117002, "answer_id": 34643492, "question_id": 34642775, "link": "https://stackoverflow.com/questions/34642775/python-3-5-1-input-position-of-caret-cursor/34643492#34643492", "title": "Python 3.5.1 Input + position of caret/cursor", "body": "<p>Simple user I/O, like <code>input()</code> and <code>print()</code>, use text terminals (the exact details vary depending on which platform you are on).  </p>\n\n<p>Although the user may be running a graphical desktop, a terminal window is used by the Python runtime.  On Microsoft Windows that is called a console, on operating systems like Linux that is a terminal emulator like xterm.</p>\n\n<p>These terminal windows act like a typewriter, in that (normally) the cursor is advanced automatically when a <code>print()</code> is done, or the prompt specified by <code>input()</code>.</p>\n\n<p>You can see the effect of this, notice that you placed a space after the <code>?</code> in your prompt <code>\"What is your name? \"</code>.  If you had not done that then the cursor would be hard up against the <code>?</code>.</p>\n\n<p>It is possible to control the cursor using packages like <code>curses</code>, but with straightforward text I/O there is no need.  Usually if that type of control is required then a full GUI package would be used like Tk or PyQt.</p>\n"}], "owner": {"reputation": 11, "user_id": 5703761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1a364d4e12294d3750ab93a8b223d6?s=128&d=identicon&r=PG&f=1", "display_name": "Pollik", "link": "https://stackoverflow.com/users/5703761/pollik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6245, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452117002, "creation_date": 1452114553, "question_id": 34642775, "link": "https://stackoverflow.com/questions/34642775/python-3-5-1-input-position-of-caret-cursor", "title": "Python 3.5.1 Input + position of caret/cursor", "body": "<p>I am at the start of learning coding, am starting with Pycharm 5.0.2 and Python 3.5.1.</p>\n\n<p>Even so, I am a bit embarrassed about asking this question, it feels like it should be obvious.</p>\n\n<pre><code>name = input(\"What is your name? \")\n</code></pre>\n\n<p>How do I ensure that focus is on the input field when I run it?</p>\n\n<p>Put another way, when I run it, how do I make so that all the user needs to do is type their name and press Enter, that they do not need to use the mouse to position the cursor in the right place.</p>\n"}, {"tags": ["python", "while-loop", "finance", "montecarlo"], "comments": [{"owner": {"reputation": 4676, "user_id": 30105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a1dc4bddf38de8351ae70e98845242e9?s=128&d=identicon&r=PG", "display_name": "PyNEwbie", "link": "https://stackoverflow.com/users/30105/pynewbie"}, "edited": false, "score": 0, "creation_date": 1452114560, "post_id": 34642753, "comment_id": 57031508, "body": "What is not working, can you explain specifically what you input, what was output and what you expected as output?"}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 2, "creation_date": 1452114740, "post_id": 34642753, "comment_id": 57031602, "body": "<code>if value &gt; value * 1.4:</code> is definitely not going to work. Python has no way of guessing which of those <code>value</code>s means &quot;the new value&quot; and which means &quot;the previous value&quot;. Hint: maybe you need to explicitly make a <code>previous_value</code> variable..."}, {"owner": {"reputation": 4621, "user_id": 1939638, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vu1kQ.jpg?s=128&g=1", "display_name": "Matt Cremeens", "link": "https://stackoverflow.com/users/1939638/matt-cremeens"}, "edited": false, "score": 0, "creation_date": 1452114744, "post_id": 34642753, "comment_id": 57031603, "body": "Don&#39;t you want <code>vY.append(A)</code>?"}, {"owner": {"reputation": 303, "user_id": 5555739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-m0ymqen3WTU/AAAAAAAAAAI/AAAAAAAAALI/V7wR-lImNnA/photo.jpg?sz=128", "display_name": "DavidV", "link": "https://stackoverflow.com/users/5555739/davidv"}, "reply_to_user": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1452115129, "post_id": 34642753, "comment_id": 57031808, "body": "@Kevin ...yup..I think that there should be a problem..it&#39;s just that I don&#39;t know how to add it into the code. Tried a lot of things. And the problem is because <code>previous_value</code> should change at every iteration. Any suggestion?"}], "answers": [{"comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1452115785, "post_id": 34643059, "comment_id": 57032165, "body": "I think this is a great answer, but I think you need <code>range(1, period+1)</code> to match the <code>&gt;=</code> in the original code&#39;s <code>while</code> loop. I might also use <code>value</code> and <code>new_value</code> as variable names, rather than differentiating between <code>index</code> and <code>value</code> which are really just the same thing in different periods."}, {"owner": {"reputation": 4630, "user_id": 4316405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fE1Rf.jpg?s=128&g=1", "display_name": "N. Wouda", "link": "https://stackoverflow.com/users/4316405/n-wouda"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1452115958, "post_id": 34643059, "comment_id": 57032251, "body": "@Blckknght quite correct, I&#39;ll update my answer. With regard to <code>value</code> vs <code>index</code>: not sure, but that would work too (having everything start at <code>100</code> as in OP&#39;s code seemed very <code>indexy</code> to me)."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1452116249, "post_id": 34643059, "comment_id": 57032408, "body": "My point is mostly that the two variables in your code really represent the same thing at different times and should have related names. Whether that&#39;s <code>value</code> and <code>new_value</code> or <code>index</code> and <code>new_index</code> is a separate issue that I have no opinion on."}, {"owner": {"reputation": 303, "user_id": 5555739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-m0ymqen3WTU/AAAAAAAAAAI/AAAAAAAAALI/V7wR-lImNnA/photo.jpg?sz=128", "display_name": "DavidV", "link": "https://stackoverflow.com/users/5555739/davidv"}, "edited": false, "score": 0, "creation_date": 1452116645, "post_id": 34643059, "comment_id": 57032617, "body": "Wow, that&#39;s a great answer :) and it really works.. thanks @N.Wouda, I really appreciate your help. While checking your answer I came across a new question - what if I want to compare my value to some other previous value (not only the last one, but let&#39;s say to three or five periods before this one)?"}, {"owner": {"reputation": 4630, "user_id": 4316405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fE1Rf.jpg?s=128&g=1", "display_name": "N. Wouda", "link": "https://stackoverflow.com/users/4316405/n-wouda"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1452116926, "post_id": 34643059, "comment_id": 57032791, "body": "@Blckknght makes perfect sense when put like that. I updated my answer accordingly, thanks for pointing that out!"}, {"owner": {"reputation": 4630, "user_id": 4316405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fE1Rf.jpg?s=128&g=1", "display_name": "N. Wouda", "link": "https://stackoverflow.com/users/4316405/n-wouda"}, "reply_to_user": {"reputation": 303, "user_id": 5555739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-m0ymqen3WTU/AAAAAAAAAAI/AAAAAAAAALI/V7wR-lImNnA/photo.jpg?sz=128", "display_name": "DavidV", "link": "https://stackoverflow.com/users/5555739/davidv"}, "edited": false, "score": 0, "creation_date": 1452117018, "post_id": 34643059, "comment_id": 57032830, "body": "@DavidV I updated my code so that <code>investor()</code> now returns the data, rather than just plot it. That should allow you to do with it whatever you like :)."}, {"owner": {"reputation": 303, "user_id": 5555739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-m0ymqen3WTU/AAAAAAAAAAI/AAAAAAAAALI/V7wR-lImNnA/photo.jpg?sz=128", "display_name": "DavidV", "link": "https://stackoverflow.com/users/5555739/davidv"}, "edited": false, "score": 0, "creation_date": 1452117304, "post_id": 34643059, "comment_id": 57032995, "body": "@N.Wouda..and just to add another comment: two-sigma events should be really rare in real life (5 % or less of the time), but they are not so rare in financial world. With this simulation I would just like to prove to my co-workers that sometimes shit just happens :) and we do not have any chance to tell when it&#39;s going to happen."}, {"owner": {"reputation": 4630, "user_id": 4316405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fE1Rf.jpg?s=128&g=1", "display_name": "N. Wouda", "link": "https://stackoverflow.com/users/4316405/n-wouda"}, "reply_to_user": {"reputation": 303, "user_id": 5555739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-m0ymqen3WTU/AAAAAAAAAAI/AAAAAAAAALI/V7wR-lImNnA/photo.jpg?sz=128", "display_name": "DavidV", "link": "https://stackoverflow.com/users/5555739/davidv"}, "edited": false, "score": 0, "creation_date": 1452117650, "post_id": 34643059, "comment_id": 57033173, "body": "@DavidV I just looked it up in a normal table, and sampling <code>&gt;40</code> from an <code>N(7, 19)</code> distribution happens in about 4% of all cases."}, {"owner": {"reputation": 303, "user_id": 5555739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-m0ymqen3WTU/AAAAAAAAAAI/AAAAAAAAALI/V7wR-lImNnA/photo.jpg?sz=128", "display_name": "DavidV", "link": "https://stackoverflow.com/users/5555739/davidv"}, "edited": false, "score": 0, "creation_date": 1452285529, "post_id": 34643059, "comment_id": 57117760, "body": "@N.Wouda.. true :) but finances are not normal distribution event..eheheh..btw, I have another question: what if I want to compare my value to some other previous value (not only the last one, but let&#39;s say to three or five periods before this one)? how could that be done? thanks in advance.."}, {"owner": {"reputation": 4630, "user_id": 4316405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fE1Rf.jpg?s=128&g=1", "display_name": "N. Wouda", "link": "https://stackoverflow.com/users/4316405/n-wouda"}, "reply_to_user": {"reputation": 303, "user_id": 5555739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-m0ymqen3WTU/AAAAAAAAAAI/AAAAAAAAALI/V7wR-lImNnA/photo.jpg?sz=128", "display_name": "DavidV", "link": "https://stackoverflow.com/users/5555739/davidv"}, "edited": false, "score": 0, "creation_date": 1452286018, "post_id": 34643059, "comment_id": 57118030, "body": "@DavidV you have all data per investor available to you where I placed the comment in my code. Alternatively, if you have a specific requirement, I&#39;d suggest opening a new question and maybe linking me in a comment to it (so that I can see it too :))."}], "tags": [], "owner": {"reputation": 4630, "user_id": 4316405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fE1Rf.jpg?s=128&g=1", "display_name": "N. Wouda", "link": "https://stackoverflow.com/users/4316405/n-wouda"}, "is_accepted": true, "score": 2, "last_activity_date": 1452118277, "last_edit_date": 1452118277, "creation_date": 1452115487, "answer_id": 34643059, "question_id": 34642753, "link": "https://stackoverflow.com/questions/34642753/previous-value-in-while-loop-in-python/34643059#34643059", "title": "Previous value in while loop in Python", "body": "<p>Well, I tried best I could to interpret what you were after. It helped that you provided a solid basis to work with :).</p>\n\n<p>Ok so, here we go: obviously, Kevin's remark that <code>value &gt; value * 1.4</code> will never evaluate to <code>True</code> is a solid one. I did rename some variables (for example, normally we compare stocks as <code>indices</code>, so I renamed <code>A</code> to <code>index</code>). Time is generally referred to as <code>t</code>, not <code>x</code>. The <code>while</code> loops were a little quirky, so I got rid of those.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\n\nmean = 7.0\nstd = 19.0\n\n\ndef investment_return():\n    return (np.random.normal(mean, std)) / 100\n\n\ndef investor(index, period):\n    wT = []\n    vY = []\n\n    for t in range(1, period + 1):\n        new_index = index + index * investment_return()\n        if new_index &gt; index * 1.4:\n            index = new_index * 0.1\n        else:\n            index = new_index\n        wT.append(t)\n        vY.append(index)\n    return wT, vY\n\n\nfor i in range(0, 10):\n    wT, vY = investor(100, 20)\n\n    # do something with your data\n\n    plt.plot(wT, vY)\n\nplt.ylabel('Investment_value')\nplt.xlabel('Investment_period')\nplt.show()\n</code></pre>\n\n<p>This occasionally does have a stock crash, as can clearly be seen (do keep in mind that this requires you to sample <code>&gt;40</code> from an <code>N(7,19)</code> distribution: that should not happen in a little over <code>95%</code> of all cases).</p>\n"}], "owner": {"reputation": 303, "user_id": 5555739, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-m0ymqen3WTU/AAAAAAAAAAI/AAAAAAAAALI/V7wR-lImNnA/photo.jpg?sz=128", "display_name": "DavidV", "link": "https://stackoverflow.com/users/5555739/davidv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1401, "favorite_count": 0, "accepted_answer_id": 34643059, "answer_count": 1, "score": 1, "last_activity_date": 1452118751, "creation_date": 1452114471, "last_edit_date": 1452118751, "question_id": 34642753, "link": "https://stackoverflow.com/questions/34642753/previous-value-in-while-loop-in-python", "title": "Previous value in while loop in Python", "body": "<p>I tried to make simple monte carlo simulation for stock investments where you start with some investment value, investment period (in years) and mean and std of stock mutual fund. I also wanted to implement an easy way for stock market crash - I did it so that whenever new calculated value was for 40 % higher than previous one, the new value should fall for 90 % - like some kind of crash. I managed to make it working and here is the code, but I think that it is not working right. The problem is probably hidden where I call previous value. Could you try to make it working?</p>\n\n<pre><code>import matplotlib\nimport matplotlib.pyplot as plt\nimport random\nimport numpy as np\n\nmean = 7.0 #mean for stock mutual fund\nstd = 19.0 #std for stock mutual fund\n\ndef investment_return(): #random normal distribution of returns\n    investment_return = (np.random.normal(mean,std))/100\n    return investment_return\n\ndef investor(A, B):\n    investment_value = A\n    investment_period = B\n\n    wX = []\n    vY = []\n\n    x = 1\n\n    while x &lt;= investment_period:\n        value = A + A*investment_return()\n        if value &gt; value * 1.4: #if new value is 1.4x bigger than previous\n            A = value * 0.1 #than make -90 percent adjustment\n        else:\n            A = value #else use new value\n        wX.append(x)\n        vY.append(value)\n        x += 1\n    #print(value)\n\n    plt.plot(wX,vY)\n\ni = 0\nwhile i &lt; 10: #number of investors\n    investor(100,20) #starting value and investment period\n    i += 1\n\nplt.ylabel('Investment_value')\nplt.xlabel('Investment_period')\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 1, "creation_date": 1452117399, "post_id": 34642733, "comment_id": 57033036, "body": "Could you show an example input array and your desired output? It&#39;s hard to understand what you&#39;re trying to do here, or what it has to do with finding &quot;mirror images&quot;."}, {"owner": {"reputation": 2045, "user_id": 3722211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9459c782595393b1ad1eb9d3f49607ce?s=128&d=identicon&r=PG&f=1", "display_name": "Fourier", "link": "https://stackoverflow.com/users/3722211/fourier"}, "reply_to_user": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1452119292, "post_id": 34642733, "comment_id": 57033978, "body": "@ali_m thanks for your input. please have a look at the edited post. Thank you."}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1452119873, "post_id": 34642733, "comment_id": 57034237, "body": "What exactly do those &quot;pairs&quot; correspond to? I want you to show me an actual example of a <code>pckLst</code> array, and what the corresponding output should be."}], "answers": [{"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": true, "score": 1, "last_activity_date": 1452115933, "last_edit_date": 1452115933, "creation_date": 1452115067, "answer_id": 34642938, "question_id": 34642733, "link": "https://stackoverflow.com/questions/34642733/boolean-sum-with-numpy-finding-matching-pairs/34642938#34642938", "title": "Boolean sum with numpy finding matching pairs", "body": "<p>Rather than commenting on your code here is a simpler implementation</p>\n\n<pre><code>a=np.array([[1,1,10],[1,2,20],[2,1,30],[1,3,40],[2,3,50]])\nxy= a[:,:2].tolist()\n[[x,y,z] for [x,y,z] in a if [y,x] in xy and x!=y]\n\n[[1, 2, 20], [2, 1, 30]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 732, "user_id": 5726529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06337fe914a1febe01bd65a805f9c92?s=128&d=identicon&r=PG&f=1", "display_name": "Niemerds", "link": "https://stackoverflow.com/users/5726529/niemerds"}, "is_accepted": false, "score": 0, "last_activity_date": 1452168120, "last_edit_date": 1452168120, "creation_date": 1452118160, "answer_id": 34643770, "question_id": 34642733, "link": "https://stackoverflow.com/questions/34642733/boolean-sum-with-numpy-finding-matching-pairs/34643770#34643770", "title": "Boolean sum with numpy finding matching pairs", "body": "<p>The arguments to \"and\" in your example are python-lists. The truth value of a list is True if it is not empty. Thats why you get a bigger sum in the latter case.\nThis will return the sum of elements with (x,y) == (y,x). It obviously only works if your just interested in the sum and not particular indices:</p>\n\n<pre><code>import numpy\npckLst = numpy.array([[ 112.066,    6.946,    6.938],\n       [ 111.979,    6.882,    7.634],\n       [ 112.014,    6.879,    7.587],\n       [ 112.005,    6.887,    7.554],\n       [ 111.995,    6.88,    6.88 ],\n       [ 112.048,    6.774,    6.88 ],\n       [ 111.808,    7.791,    7.566],\n       [ 111.802,    6.88,    6.774]])\n\ncoords = pckLst[:,1:]\nequal_ids = numpy.ravel(coords[:,:1] != coords[:,1:])\nunequal_coords = coords[equal_ids]\nflipped = numpy.fliplr(unequal_coords)\ncoords_tuple_set = set(tuple(map(tuple, unequal_coords)))\nflipped_tuple_set = set(tuple(map(tuple, flipped)))\n\nprint coords_tuple_set\nprint flipped_tuple_set\n# need to devide by two, because we get (x,y) and (y,x) by the intersection\nprint \"number of mirrored points:\", \nprint len(coords_tuple_set.intersection(flipped_tuple_set))/2\n</code></pre>\n"}], "owner": {"reputation": 2045, "user_id": 3722211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9459c782595393b1ad1eb9d3f49607ce?s=128&d=identicon&r=PG&f=1", "display_name": "Fourier", "link": "https://stackoverflow.com/users/3722211/fourier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 34642938, "answer_count": 2, "score": 0, "last_activity_date": 1452168120, "creation_date": 1452114348, "last_edit_date": 1452157914, "question_id": 34642733, "link": "https://stackoverflow.com/questions/34642733/boolean-sum-with-numpy-finding-matching-pairs", "title": "Boolean sum with numpy finding matching pairs", "body": "<p>I am trying to find mirror images in a numpy array. In particular, <code>(x,y) == (y,x)</code> but I want to rule out tuples with identical values <code>(x,x)</code>.</p>\n\n<p>Given a numpy array <code>pckList</code> with the size <code>(198L,3L)</code> containing floats.</p>\n\n<p>I have the following code:</p>\n\n<pre><code>np.sum([x==pckLst[:,2] for x in pckLst[:,1]])\n</code></pre>\n\n<p>Which returns a given number, lets say 73</p>\n\n<pre><code>np.sum([x==pckLst[:,2] for x in pckLst[:,1]] and [x==pckLst[:,1] for x in pckLst[:,1]])\n</code></pre>\n\n<p>Returns a larger number, lets say 266.</p>\n\n<p>Can someone please explain how this comes about?</p>\n\n<p>I thought the first line returns True, when seen as tuples <code>(x,y) == (any,y)</code> and the second line returns only true when <code>(x,y) == (y,x)</code>.</p>\n\n<p>Is this correct?</p>\n\n<p>EDIT:\nFurther explaination:</p>\n\n<p><code>pckLst=[[ 112.066,    6.946,    6.938],\n       [ 111.979,    6.882,    7.634],\n       [ 112.014,    6.879,    7.587],\n       [ 112.005,    6.887,    7.554],\n       [ 111.995,    6.88,    6.88 ],\n       [ 112.048,    6.774,    6.88 ],\n       [ 111.808,    7.791,    7.566],\n       [ 111.802,    6.88,    6.774]]</code></p>\n\n<p>Now I would like to find <code>[ 112.048, 6.774, 6.88 ]</code>, since <code>(6.88, 6.774) == (6.774, 6.88)</code>. However, <code>[ 111.995, 6.88, 6.88 ]</code> should not be considered a match. </p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1452114861, "post_id": 34642766, "comment_id": 57031663, "body": "I tried defining <code>_children</code> first and declared victory then ran in to a recursion issue when using <code>copy.deepcopy</code>!"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1452114886, "post_id": 34642766, "comment_id": 57031672, "body": "I don&#39;t think the special case for <code>_children</code> in <code>__setattr__</code> is necessary, since the <code>__getattr__</code> call in the <code>try</code> block will fail with an <code>AttributeError</code> if the attribute doesn&#39;t exist."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1452114946, "post_id": 34642766, "comment_id": 57031708, "body": "@Kenny: what issue was that?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1452115083, "post_id": 34642766, "comment_id": 57031784, "body": "@Blckknght: I prefer to be explicit about this; future attempts to set <code>instance._children</code> should not need to iterate over all the <code>_children</code> iterable first."}, {"owner": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1452115125, "post_id": 34642766, "comment_id": 57031805, "body": "There was another recursion limit exception that I didn&#39;t quite understand. It was down in the pickling routines. When I add a child I deep copy the child."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1452115177, "post_id": 34642766, "comment_id": 57031838, "body": "@Kenny: without seeing the traceback that&#39;s not something I can help with I fear."}, {"owner": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1452115453, "post_id": 34642766, "comment_id": 57031997, "body": "@MartijnPieters I understand. I&#39;ll see if I can re-create it."}, {"owner": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1452116889, "post_id": 34642766, "comment_id": 57032766, "body": "@MartijnPieters: Updated question to include recursion error."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1452117242, "post_id": 34642766, "comment_id": 57032962, "body": "@Kenny: note the <code>hasattr()</code> call for <code>__setstate__</code>. You could ignore all attributes that start with <code>_</code> in <code>__getattr__</code> to avoid that one."}, {"owner": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1452117529, "post_id": 34642766, "comment_id": 57033100, "body": "@MartijnPieters I could and this would help me avoid testing membership in <code>__dict__</code> but what is fundamentally wrong with testing <code>__dict__</code>? I&#39;ll revise my question to include this."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1452117691, "post_id": 34642766, "comment_id": 57033193, "body": "@Kenny: you don&#39;t need to at all, because <code>__getattr__</code> will not be called for attributes that are in <code>__dict__</code>."}, {"owner": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "edited": false, "score": 0, "creation_date": 1452120730, "post_id": 34642766, "comment_id": 57034596, "body": "@MartijnPieters Thanks. I&#39;ll mark this as a solution as it does eliminate the <code>__dict__</code> check and I&#39;ll post another question asking why this is a bad idea."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 1, "last_activity_date": 1452117799, "last_edit_date": 1452117799, "creation_date": 1452114529, "answer_id": 34642766, "question_id": 34642695, "link": "https://stackoverflow.com/questions/34642695/hasattr-v-membership-testing-of-dict/34642766#34642766", "title": "hasattr v. membership testing of __dict__", "body": "<p><code>hasattr()</code> uses <code>getattr()</code> to test for the presence of an attribute, so yes, using <code>hasattr()</code> in <code>getattr()</code> will lead to infinite recursion.</p>\n\n<p>Test for <code>_children</code> in <code>__setattr__</code>:</p>\n\n<pre><code>def __setattr__(self, key, value):\n    if key == '_children':\n        return super().__setattr__(key, value)\n    try:\n        self.__getattr__(key).value(value)\n    except AttributeError:\n        super().__setattr__(key, value)\n</code></pre>\n\n<p>because <em>at some point</em> you'll want to be able to do <code>self._children = []</code>.</p>\n\n<p>If you set <code>self._children</code> as the first attribute in <code>__init__</code> you  don't need to test for <code>_children</code> in <code>__getattr__</code> anymore; all instances will have that attribute then (and <code>__setattr__</code> ensured it was set):</p>\n\n<pre><code>def __getattr__(self, key):\n    for child in self._children:\n        if child.name() == key:\n            return child\n    raise AttributeError\n</code></pre>\n\n<p>Remember, <code>__getattr__</code> is only called for attributes that are missing from the instance, while <code>__setattr__</code> is called for <em>all</em> attributes.</p>\n\n<p>To avoid your infinite recursion problem, I'd simply ignore all attributes that start with <code>_</code>:</p>\n\n<pre><code>def __getattr__(self, key):\n    # ignore private attributes\n    if key[:1] != '_':\n        for child in self._children:\n            if child.name() == key:\n                return child\n    raise AttributeError\n</code></pre>\n\n<p>This neatly avoids all issues with attempted access to <code>self._children</code> as well, since it starts with an underscore.</p>\n"}], "owner": {"reputation": 586, "user_id": 873389, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c256eb7df3685e3d906de0d8bbd45ca0?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/873389/kenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "accepted_answer_id": 34642766, "answer_count": 1, "score": 0, "last_activity_date": 1452117799, "creation_date": 1452114177, "last_edit_date": 1452117591, "question_id": 34642695, "link": "https://stackoverflow.com/questions/34642695/hasattr-v-membership-testing-of-dict", "title": "hasattr v. membership testing of __dict__", "body": "<p>I'm defining a Field class instances of which may be nested. The ultimate goal is to interact with memory mapped hardware registers on an embedded device from the command line. As an example here is the result of <code>print(nop)</code>:</p>\n\n<pre><code>nop       1000000001000000 0X8040 32832    \n  error   ........0100.... 0X4    4     CIP\n    bit_0 ...........0.... 0X0    0     NO \n    bit_1 ..........0..... 0X0    0     NO \n    bit_2 .........1...... 0X1    1     YES\n    bit_3 ........0....... 0X0    0     NO \n  fault   1............... 0X1    1 \n</code></pre>\n\n<p>My first attempt was to implement <code>__getitem__</code> and <code>__setitem__</code> but that lead to this kind of interaction:</p>\n\n<pre><code>&gt; nop['error']['bit_0'] = 'NO'\n\n&gt; nop['fault'] = 1\n</code></pre>\n\n<p>This will be pretty cumbersome so it occurred to me that I might use <code>__getattr__</code> instead as it would allow me to interact as follows:</p>\n\n<pre><code>&gt; nop.error.bit_0 = 'NO'\n\n&gt; nop.fault = 1\n</code></pre>\n\n<p>With a shell that supports autocomplete things will be even easier.</p>\n\n<p>Basically I need to identify a child field by name and return or assign its value. Here's my implementation of these methods:</p>\n\n<pre><code>def __setattr__(self, key, value):\n    try:\n        self.__getattr__(key).value(value)\n    except AttributeError:\n        super().__setattr__(key, value)\n\ndef __getattr__(self, key):\n    if '_children' in self.__dict__:\n        for child in self._children:\n            if child.name() == key:\n                return child\n\n    raise AttributeError\n</code></pre>\n\n<p>I'm pretty happy with this but notice that I am testing membership of <code>_children</code> in <code>__dict__</code>. If I use <code>hasattr</code> I get infinite recursion.</p>\n\n<p>Is this a flawed approach? What is fundamentally wrong with testing <code>__dict__</code> membership.</p>\n\n<p>Update:</p>\n\n<p>Per Martijn Pieters I added the check for <code>_children</code> to <code>__setattr__</code>, I removed the check for <code>_children</code> from <code>__getattr__</code>, and I assign <code>_children</code> first in <code>__init__</code>. The result is <code>RecursionError</code> during a deep copy which I perform when a child is added:</p>\n\n<pre><code>def add_child(self, child, position):\n\n    assert position &gt;= 0\n\n    child = copy.deepcopy(child)\n\n    # Coerce the child to be orphaned and positioned at 0 for the following tests.\n\n    child._position = 0\n\n    child._parent = None\n\n    ...\n</code></pre>\n\n<p>Results in</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/kenny/Development/CCL/OCE/field.py\", line 308, in &lt;module&gt;\n    error.add_child(child_child, i)\n  File \"/home/kenny/Development/CCL/OCE/field.py\", line 140, in add_child\n    child = copy.deepcopy(child)\n  File \"/home/kenny/Miniconda/envs/python3/lib/python3.5/copy.py\", line 182, in deepcopy\n    y = _reconstruct(x, rv, 1, memo)\n  File \"/home/kenny/Miniconda/envs/python3/lib/python3.5/copy.py\", line 299, in _reconstruct\n    if hasattr(y, '__setstate__'):\n  File \"/home/kenny/Development/CCL/OCE/field.py\", line 18, in __getattr__\n    for child in self._children:\n  File \"/home/kenny/Development/CCL/OCE/field.py\", line 18, in __getattr__\n    for child in self._children:\n    .\n    .\n    .\nRecursionError: maximum recursion depth exceeded while calling a Python object\n[Finished in 0.1s with exit code 1]\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "python", "django"], "comments": [{"owner": {"reputation": 14254, "user_id": 1663383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3aaf8438a71124d393af5af486a7e78b?s=128&d=identicon&r=PG", "display_name": "Draco18s no longer trusts SE", "link": "https://stackoverflow.com/users/1663383/draco18s-no-longer-trusts-se"}, "edited": false, "score": 0, "creation_date": 1452114388, "post_id": 34642686, "comment_id": 57031423, "body": "Well.  You&#39;d want to make those numbers supplied by the script, but that would require knowing the <i>native resolution</i> of the image.  Is it being passed via the AJAX? If not, then make it."}, {"owner": {"reputation": 615, "user_id": 1372313, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/ixtB6.png?s=128&g=1", "display_name": "DaMaGeX", "link": "https://stackoverflow.com/users/1372313/damagex"}, "edited": false, "score": 0, "creation_date": 1452115230, "post_id": 34642686, "comment_id": 57031872, "body": "You can wrap your <code>&lt;img&gt;</code> tag inside <code>&lt;div&gt;</code> tags. Then you can set the width and height of the <code>&lt;div&gt;</code> to the amount you want and the width and height of the <code>&lt;img&gt;</code> to 100%."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5719239"}, "reply_to_user": {"reputation": 615, "user_id": 1372313, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/ixtB6.png?s=128&g=1", "display_name": "DaMaGeX", "link": "https://stackoverflow.com/users/1372313/damagex"}, "edited": false, "score": 0, "creation_date": 1452124003, "post_id": 34642686, "comment_id": 57035848, "body": "@DaMaGeX, I think I kinda get what you mean, can you provide some example please...not sure how img tag can be inside div tag"}, {"owner": {"reputation": 20414, "user_id": 2532070, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/XA5Jn.jpg?s=128&g=1", "display_name": "YPCrumble", "link": "https://stackoverflow.com/users/2532070/ypcrumble"}, "reply_to_user": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1452196760, "post_id": 34642686, "comment_id": 57073572, "body": "@ShangWang I&#39;m confused - you can use javascript in a Django template, see my answer."}], "answers": [{"comments": [{"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1452197357, "post_id": 34664063, "comment_id": 57073863, "body": "Yea I lost my my mind when I commented that, but I guess the blame doesn&#39;t belong to an answer. You need some correction as well, it&#39;s <code>var image = &quot;{{post.image}}&quot;;</code> with the quotes."}], "tags": [], "owner": {"reputation": 20414, "user_id": 2532070, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/XA5Jn.jpg?s=128&g=1", "display_name": "YPCrumble", "link": "https://stackoverflow.com/users/2532070/ypcrumble"}, "is_accepted": false, "score": 0, "last_activity_date": 1452197439, "last_edit_date": 1452197439, "creation_date": 1452196723, "answer_id": 34664063, "question_id": 34642686, "link": "https://stackoverflow.com/questions/34642686/using-jquery-and-javascript-to-change-the-size-of-an-image/34664063#34664063", "title": "using jquery and javascript to change the size of an image", "body": "<p>You can mix <code>{{ post.image }}</code> with your javascript without any problems in a Django template.</p>\n\n<p>For instance, you could do this in your Django template:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n  var image = \"{{post.image}}\";\n  // Beginning of the javascript implementation here.\n  $(\"#result\").append(\"&lt;img src='\"+image+\"' height='300' width='300'&lt;/img&gt;\");\n  // More javascript.\n&lt;/script&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5719239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1452197439, "creation_date": 1452114109, "question_id": 34642686, "link": "https://stackoverflow.com/questions/34642686/using-jquery-and-javascript-to-change-the-size-of-an-image", "title": "using jquery and javascript to change the size of an image", "body": "<p>first of all let me say I have a very short knowledge of javascript and jquery. I'm currently following a tutorial for those topics. With that being said, I was wondering if I can change the size of an image with jquery. For example, I have a code ` this displays image fine, but size is sometimes big and sometimes small. I was looking over some article here <a href=\"https://blog.openshift.com/day-16-goose-extractor-an-article-extractor-that-just-works/\" rel=\"nofollow\">https://blog.openshift.com/day-16-goose-extractor-an-article-extractor-that-just-works/</a>\nThe have this code; </p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"static/js/jquery.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    $(\"#myform\").on(\"submit\", function(event){\n        $(\"#result\").empty();\n        event.preventDefault();\n        $('#loading').show();\n        var url = $(\"#url\").val()\n        $.get('/api/v1/extract?url='+url,function(result){\n            $('#loading').hide(); \n            $(\"#result\").append(\"&lt;h4&gt;\"+result.title+\"&lt;/h4&gt;\");\n            $(\"#result\").append(\"&lt;img src='\"+result.image+\"' height='300' width='300'&lt;/img&gt;\");\n            $(\"#result\").append(\"&lt;p class='lead'&gt;\"+result.text+\"&lt;/p&gt;\");\n    })\n\n\n    });\n\n&lt;/script&gt;\n</code></pre>\n\n<p>what interests me is <code>\"#result\").append(\"&lt;img src='\"+result.image+\"' height='300' width='300'&lt;/img&gt;\");</code>would I be able to do the same thing with my code {{post.image}}? \n    `</p>\n"}, {"tags": ["python", "timer"], "comments": [{"owner": {"reputation": 1288, "user_id": 2517631, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dbf0c108fa47fbabfd3b92e7b9cb211a?s=128&d=identicon&r=PG", "display_name": "RevanProdigalKnight", "link": "https://stackoverflow.com/users/2517631/revanprodigalknight"}, "edited": false, "score": 0, "creation_date": 1452114337, "post_id": 34642662, "comment_id": 57031405, "body": "Could you share some of the code you&#39;ve written? It&#39;s hard for us to help without that."}, {"owner": {"reputation": 2751, "user_id": 939352, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/62a10ac78079a78abaace3f11f793b92?s=128&d=identicon&r=PG", "display_name": "Ben Glasser", "link": "https://stackoverflow.com/users/939352/ben-glasser"}, "edited": false, "score": 0, "creation_date": 1452114337, "post_id": 34642662, "comment_id": 57031406, "body": "seriously?! what language? what code do you have so far?  what have you tried?"}, {"owner": {"reputation": 1390, "user_id": 2427263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59704067f4952d5dd82b49d1bde5f7dc?s=128&d=identicon&r=PG", "display_name": "BrianO", "link": "https://stackoverflow.com/users/2427263/briano"}, "edited": false, "score": 0, "creation_date": 1452119313, "post_id": 34642662, "comment_id": 57033990, "body": "The <code>time</code> module contains functions you can use. <code>time.time()</code>, and on Py3.3+, <code>time.perf_counter()</code>. See <a href=\"https://docs.python.org/3/library/time.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/time.html</a>"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1452141711, "post_id": 34642662, "comment_id": 57040510, "body": "related: <a href=\"http://stackoverflow.com/q/7370801/4279\">Measure time elapsed in Python?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "is_accepted": false, "score": 2, "last_activity_date": 1452119564, "creation_date": 1452119564, "answer_id": 34644131, "question_id": 34642662, "link": "https://stackoverflow.com/questions/34642662/how-do-i-create-a-timer/34644131#34644131", "title": "How do I create a timer?", "body": "<p>The simplest way to time how long it takes to do something is take the time before you do it and take it away from the time after you do it.</p>\n\n<p>In python, there is a <a href=\"https://docs.python.org/3.5/library/time.html#time.time\" rel=\"nofollow\">time module</a>. <code>time.time()</code> gives you how many seconds it has been since the epoch (1 January 1970).</p>\n\n<pre><code>import time\n\nstart = time.time()  # Time at the beginning of the script\nmain()               # What you want to time\nend = time.time()    # Time at the end\n\nprint(\"You took\", int(end - start), \"seconds!\")\n</code></pre>\n\n<p>You can even do it for multiple things at a time and store the timings in a list. The total time taken would be the list's sum.</p>\n"}, {"comments": [{"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1452194063, "post_id": 34646572, "comment_id": 57072066, "body": "This wouldn&#39;t work, as when you sleep / raw_input, it stops and doesn&#39;t continue untill x time / input is received. Your current script will sleep for a second, ask the question and then do it again 10 times."}, {"owner": {"reputation": 1, "user_id": 5753268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69dbddd867667346b7e68caf4914730a?s=128&d=identicon&r=PG&f=1", "display_name": "PenguinMasterOfDisguise", "link": "https://stackoverflow.com/users/5753268/penguinmasterofdisguise"}, "reply_to_user": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1452871895, "post_id": 34646572, "comment_id": 57370934, "body": "oh sorry, i didnt have time to test it"}], "tags": [], "owner": {"reputation": 1, "user_id": 5753268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69dbddd867667346b7e68caf4914730a?s=128&d=identicon&r=PG&f=1", "display_name": "PenguinMasterOfDisguise", "link": "https://stackoverflow.com/users/5753268/penguinmasterofdisguise"}, "is_accepted": false, "score": 0, "last_activity_date": 1452195867, "last_edit_date": 1452195867, "creation_date": 1452134677, "answer_id": 34646572, "question_id": 34642662, "link": "https://stackoverflow.com/questions/34642662/how-do-i-create-a-timer/34646572#34646572", "title": "How do I create a timer?", "body": "<p>You could use sleep\nLike,</p>\n\n<pre><code>print \"what's 3+2?\"\n\nTime = 0\n\nCorrectanswer = 5\n\nwhile Time &lt;= 10:\n\n    if Time &lt;= 10:\n        Time += 1\n        sleep(1)\n\n    answer = raw_input (\"\")\n\n    if answer == Correctanswer:\n        Time = 11\n        print \"you got the right answer\"\n\n    if answer == Correctanswer or time &gt; 10:\n        break\n        print \"what's 8 +2?\"\n\n\n\nTime = 0\n\nCorrectanswer = 10\n\nwhile Time &lt;= 10:\n\n    if Time &lt;= 10:\n        Time += 1\n        sleep(1)\n\n    answer = raw_input (\"\")\n\n    if answer == Correctanswer:\n        Time = 11\n        print \"you got the right answer\"\n</code></pre>\n\n<p>Sorry if this doesn't work, I came up with it on the spot</p>\n"}], "owner": {"reputation": 1, "user_id": 5754058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6017c758e36d5797583fdf953c438b0?s=128&d=identicon&r=PG&f=1", "display_name": "Tanveer Sidhu", "link": "https://stackoverflow.com/users/5754058/tanveer-sidhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "closed_date": 1453145933, "answer_count": 2, "score": -3, "last_activity_date": 1452195867, "creation_date": 1452113980, "last_edit_date": 1452122165, "question_id": 34642662, "link": "https://stackoverflow.com/questions/34642662/how-do-i-create-a-timer", "closed_reason": "Not suitable for this site", "title": "How do I create a timer?", "body": "<p>I have created a quiz and I would like to create a timer so that it displays how long the user has taken for each question?\nI want to implement the timer beside each question but I can't find help anywhere as I want the timer to reset after each question</p>\n"}, {"tags": ["python", "hadoop", "mapreduce", "cloudera-quickstart-vm"], "comments": [{"owner": {"reputation": 4621, "user_id": 1939638, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vu1kQ.jpg?s=128&g=1", "display_name": "Matt Cremeens", "link": "https://stackoverflow.com/users/1939638/matt-cremeens"}, "edited": false, "score": 0, "creation_date": 1452114141, "post_id": 34642659, "comment_id": 57031312, "body": "Don&#39;t you need toolrunner to be able to run a jar file from the command line?"}, {"owner": {"reputation": 4621, "user_id": 1939638, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vu1kQ.jpg?s=128&g=1", "display_name": "Matt Cremeens", "link": "https://stackoverflow.com/users/1939638/matt-cremeens"}, "edited": false, "score": 0, "creation_date": 1452114311, "post_id": 34642659, "comment_id": 57031389, "body": "Also, aren&#39;t jar files for Java programs?"}, {"owner": {"reputation": 81, "user_id": 5754240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FAVqb.jpg?s=128&g=1", "display_name": "Marco P.", "link": "https://stackoverflow.com/users/5754240/marco-p"}, "reply_to_user": {"reputation": 4621, "user_id": 1939638, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vu1kQ.jpg?s=128&g=1", "display_name": "Matt Cremeens", "link": "https://stackoverflow.com/users/1939638/matt-cremeens"}, "edited": false, "score": 0, "creation_date": 1452114696, "post_id": 34642659, "comment_id": 57031577, "body": "I&#39;m not executing a jar file myself, I&#39;m executing hadoop command and tell hadoop to execute the declared jar file. The rest following the library path are parameters related to the hadoop-streaming.jar and are related to the MapReduce action which is executed. yes, jar files are java programs"}], "answers": [{"comments": [{"owner": {"reputation": 1488, "user_id": 1990514, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/JyFNT.png?s=128&g=1", "display_name": "Amir Pournasserian", "link": "https://stackoverflow.com/users/1990514/amir-pournasserian"}, "edited": false, "score": 0, "creation_date": 1455759217, "post_id": 34644727, "comment_id": 58637697, "body": "I&#39;m having the same problem! It&#39;s working perfect in serial mode."}], "tags": [], "owner": {"reputation": 81, "user_id": 5754240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FAVqb.jpg?s=128&g=1", "display_name": "Marco P.", "link": "https://stackoverflow.com/users/5754240/marco-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1452122449, "creation_date": 1452122449, "answer_id": 34644727, "question_id": 34642659, "link": "https://stackoverflow.com/questions/34642659/why-is-hadoop-mapreduce-with-python-failing-but-the-scripts-are-working-on-comma/34644727#34644727", "title": "Why is hadoop mapReduce with python failing but the scripts are working on command line?", "body": "<p>What a lucky punch, fighting with that one for days and know I got it working:</p>\n\n<p>Since the local (unix) execution of </p>\n\n<pre><code>cat join2_gen*.txt | ./join2_mapper.py | sort | ./join2_reducer.py\n</code></pre>\n\n<p>worked fine I had the idea to use 1 merged input file, instead of the provided 6 input files, so:</p>\n\n<pre><code>cat join2_gen*.txt &gt;&gt; mergedinputFile.txt\n\nhdfs dfs -put mergedInputFile.txt /user/cloudera/input\n</code></pre>\n\n<p>then executing the very same hadoop command again, directing the input to the mergedInputFile in the input folder --> <strong>perfect result</strong>, no problem, no exception job done. </p>\n\n<p>For me it raises the question:</p>\n\n<ul>\n<li>Why is it working with one merged input file but now with providing the smaller 6 files ?? No idea (yet)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 6755658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee8698df7bdb5120c352bd1806b440a8?s=128&d=identicon&r=PG&f=1", "display_name": "alpha", "link": "https://stackoverflow.com/users/6755658/alpha"}, "is_accepted": false, "score": 1, "last_activity_date": 1486195562, "creation_date": 1486195562, "answer_id": 42038043, "question_id": 34642659, "link": "https://stackoverflow.com/questions/34642659/why-is-hadoop-mapreduce-with-python-failing-but-the-scripts-are-working-on-comma/42038043#42038043", "title": "Why is hadoop mapReduce with python failing but the scripts are working on command line?", "body": "<p>Try putting all the input text files in one directory and then passing the directory as the input. This way you won't have to merge all your input files</p>\n"}], "owner": {"reputation": 81, "user_id": 5754240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FAVqb.jpg?s=128&g=1", "display_name": "Marco P.", "link": "https://stackoverflow.com/users/5754240/marco-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 2, "answer_count": 2, "score": 3, "last_activity_date": 1486195562, "creation_date": 1452113969, "last_edit_date": 1452116126, "question_id": 34642659, "link": "https://stackoverflow.com/questions/34642659/why-is-hadoop-mapreduce-with-python-failing-but-the-scripts-are-working-on-comma", "title": "Why is hadoop mapReduce with python failing but the scripts are working on command line?", "body": "<p>I'm trying to implement a simple Hadoop map reduce example using Cloudera 5.5.0\nThe map &amp; reduce steps should be implemented using Python 2.6.6</p>\n\n<p>Problem:</p>\n\n<ul>\n<li>If the scripts are being executed on the unix command line they're working perfectly fine and producing the expected output.</li>\n</ul>\n\n<p>cat join2*.txt | ./join3_mapper.py | sort | ./join3_reducer.py</p>\n\n<ul>\n<li><strong>But</strong> executing the scripts as a hadoop task <strong>terribly fails</strong>:</li>\n</ul>\n\n<p>hadoop jar /usr/lib/hadoop-mapreduce/hadoop-streaming.jar -input /user/cloudera/inputTV/join2_gen*.txt -output /user/cloudera/output_tv -mapper /home/cloudera/join3_mapper.py -reducer /home/cloudera/join3_reducer.py -numReduceTasks 1</p>\n\n<p><code>16/01/06 12:32:32 INFO mapreduce.Job: Task Id : attempt_1452069211060_0026_r_000000_0, Status : FAILED\nError: java.lang.RuntimeException: PipeMapRed.waitOutputThreads(): subprocess failed with code 1\n    at org.apache.hadoop.streaming.PipeMapRed.waitOutputThreads(PipeMapRed.java:325)\n    at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:538)\n    at org.apache.hadoop.streaming.PipeReducer.close(PipeReducer.java:134)\n    at org.apache.hadoop.io.IOUtils.cleanup(IOUtils.java:244)\n    at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:459)\n    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:392)\n    at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:163)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at javax.security.auth.Subject.doAs(Subject.java:415)\n    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1671)\n    at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:158)</code></p>\n\n<ul>\n<li><p>The mapper works, if the hadoop command is executed with -numReduceTasks 0,\nthe hadoop job is executing only map step, ends successfully and the output directory contains the result files from map step.</p></li>\n<li><p>I guess there must be something wrong with the reduce step then ?</p></li>\n<li>The stderr logs in Hue shows nothing relevant:</li>\n</ul>\n\n<p>Log Upload Time: Wed Jan 06 12:33:10 -0800 2016\nLog Length: 222\nlog4j:WARN No appenders could be found for logger (org.apache.hadoop.ipc.Server).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See <a href=\"http://logging.apache.org/log4j/1.2/faq.html#noconfig\" rel=\"nofollow\">http://logging.apache.org/log4j/1.2/faq.html#noconfig</a> for more info.</p>\n\n<p>Code of the scripts:\n1st file: join3_mapper.py</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport sys\n\nfor line in sys.stdin:\n   line       = line.strip()   #strip out carriage return\n   tuple2  = line.split(\",\")   #split line, into key and value, returns a list\n\n   if len(tuple2) == 2:\n      key = tuple2[0]\n      value = tuple2[1]\n      if value == 'ABC':\n         print('%s\\t%s' % (key, value) )\n      elif value.isdigit():\n         print('%s\\t%s' % (key, value) ) \n</code></pre>\n\n<p>The 2nd file: join3_reducer.py</p>\n\n<pre><code>#!/usr/bin/env python\nimport sys\n\nlast_key      = None              #initialize these variables\nrunning_total = 0\nabcFound =False;\nthis_key      = None\n\n# -----------------------------------\n# Loop the file\n#  --------------------------------\nfor input_line in sys.stdin:\n    input_line = input_line.strip()\n\n    # --------------------------------\n    # Get Next Key value pair, splitting at tab\n    # --------------------------------\n    tuple2 = input_line.split(\"\\t\") \n\n    this_key = tuple2[0]    \n    value = tuple2[1]\n    if value.isdigit():\n        value = int(value) \n\n    # ---------------------------------\n    # Key Check part\n    #    if this current key is same \n    #          as the last one Consolidate\n    #    otherwise  Emit\n    # ---------------------------------\n    if last_key == this_key:     \n        if value == 'ABC':  # filter for only ABC in TV shows\n            abcFound=True;\n        else:\n            if isinstance(value, (int,long) ): \n                running_total += value   \n\n    else:\n        if last_key:         #if this key is different from last key, and the previous \n                             #   (ie last) key is not empy,\n                             #   then output \n                             #   the previous &lt;key running-count&gt;\n           if abcFound:\n              print('%s\\t%s' % (last_key, running_total) )\n              abcFound=False;\n\n        running_total = value    #reset values\n        last_key = this_key\n\nif last_key == this_key:\n    print('%s\\t%s' % (last_key, running_total) )\n</code></pre>\n\n<p>I have tried various different ways of declaring the input file to the hadoop command, no difference, no success. </p>\n\n<p>What am I doing wrong ?  Hints, ideas are very appreciated thank you</p>\n"}, {"tags": ["python", "neural-network", "convolution", "tensorflow", "conv-neural-network"], "answers": [{"tags": [], "owner": {"reputation": 6049, "user_id": 5543198, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w8QH5HwZv-c/AAAAAAAAAAI/AAAAAAAAA6c/BUg7enrJUeU/photo.jpg?sz=128", "display_name": "Rafa\u0142 J&#243;zefowicz", "link": "https://stackoverflow.com/users/5543198/rafa%c5%82-j%c3%b3zefowicz"}, "is_accepted": false, "score": 17, "last_activity_date": 1542012690, "last_edit_date": 1542012690, "creation_date": 1452115222, "answer_id": 34642991, "question_id": 34642595, "link": "https://stackoverflow.com/questions/34642595/tensorflow-strides-argument/34642991#34642991", "title": "Tensorflow Strides Argument", "body": "<p>The inputs are 4 dimensional and are of form: <code>[batch_size, image_rows, image_cols, number_of_colors]</code></p>\n\n<p>Strides, in general, define an overlap between applying operations. In the case of conv2d, it specifies what is the distance between consecutive applications of convolutional filters. The value of 1 in a specific dimension means that we apply the operator at every row/col, the value of 2 means every second, and so on.</p>\n\n<p><strong>Re 1)</strong> The values that matter for convolutions are 2nd and 3rd and they represent the overlap in the application of the convolutional filters along rows and columns. The value of [1, 2, 2, 1] says that we want to apply the filters on every second row and column.</p>\n\n<p><strong>Re 2)</strong> I don't know the technical limitations (might be CuDNN requirement) but typically people use strides along the rows or columns dimensions. It doesn't necessarily make sense to do it over batch size. Not sure of the \nlast dimension.</p>\n\n<p><strong>Re 3)</strong> Setting -1 for one of the dimension means, \"set the value for the first dimension so that the total number of elements in the tensor is unchanged\". In our case, the -1 will be equal to the batch_size.</p>\n"}, {"comments": [{"owner": {"reputation": 15751, "user_id": 524436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5336a2844502fe58c2c06bc12c32ed?s=128&d=identicon&r=PG", "display_name": "etarion", "link": "https://stackoverflow.com/users/524436/etarion"}, "reply_to_user": {"reputation": 6485, "user_id": 665023, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/19de47c795aeb4440bcf2097e83e02a4?s=128&d=identicon&r=PG", "display_name": "derek", "link": "https://stackoverflow.com/users/665023/derek"}, "edited": false, "score": 5, "creation_date": 1490625462, "post_id": 34643081, "comment_id": 73183027, "body": "@derek because (from the text) &quot;We&#39;ll give the convolution an output channel depth of 8.&quot;. It&#39;s something you can pick when setting up the convolution, and the answerer picked 8."}], "tags": [], "owner": {"reputation": 20711, "user_id": 5545260, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bKB2xg1RkdE/AAAAAAAAAAI/AAAAAAAAgnM/sdLgfXnDtwM/photo.jpg?sz=128", "display_name": "dga", "link": "https://stackoverflow.com/users/5545260/dga"}, "is_accepted": true, "score": 225, "last_activity_date": 1484862427, "last_edit_date": 1484862427, "creation_date": 1452115557, "answer_id": 34643081, "question_id": 34642595, "link": "https://stackoverflow.com/questions/34642595/tensorflow-strides-argument/34643081#34643081", "title": "Tensorflow Strides Argument", "body": "<p>The pooling and convolutional ops slide a \"window\" across the input tensor.  Using <a href=\"https://www.tensorflow.org/versions/master/api_docs/python/nn.html#conv2d\"><code>tf.nn.conv2d</code></a> as an example: If the input tensor has 4 dimensions:  <code>[batch, height, width, channels]</code>, then the convolution operates on a 2D window on the <code>height, width</code> dimensions.</p>\n\n<p><code>strides</code> determines how much the window shifts by in each of the dimensions.  The typical use sets the first (the batch) and last (the depth) stride to 1.</p>\n\n<p>Let's use a very concrete example:  Running a 2-d convolution over a 32x32 greyscale input image.  I say greyscale because then the input image has depth=1, which helps keep it simple.  Let that image look like this:</p>\n\n<pre><code>00 01 02 03 04 ...\n10 11 12 13 14 ...\n20 21 22 23 24 ...\n30 31 32 33 34 ...\n...\n</code></pre>\n\n<p>Let's run a 2x2 convolution window over a single example (batch size = 1).  We'll give the convolution an output channel depth of 8.</p>\n\n<p>The input to the convolution has <code>shape=[1, 32, 32, 1]</code>.</p>\n\n<p>If you specify <code>strides=[1,1,1,1]</code> with <code>padding=SAME</code>, then the output of the filter will be [1, 32, 32, 8].</p>\n\n<p>The filter will first create an output for:</p>\n\n<pre><code>F(00 01\n  10 11)\n</code></pre>\n\n<p>And then for:</p>\n\n<pre><code>F(01 02\n  11 12)\n</code></pre>\n\n<p>and so on.  Then it will move to the second row, calculating:</p>\n\n<pre><code>F(10, 11\n  20, 21)\n</code></pre>\n\n<p>then</p>\n\n<pre><code>F(11, 12\n  21, 22)\n</code></pre>\n\n<p>If you specify a stride of [1, 2, 2, 1] it won't do overlapping windows.  It will compute:</p>\n\n<pre><code>F(00, 01\n  10, 11)\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>F(02, 03\n  12, 13)\n</code></pre>\n\n<p>The stride operates similarly for the pooling operators.</p>\n\n<p><strong>Question 2:  Why strides [1, x, y, 1] for convnets</strong></p>\n\n<p>The first 1 is the batch:  You don't usually want to skip over examples in your batch, or you shouldn't have included them in the first place. :)</p>\n\n<p>The last 1 is the depth of the convolution:  You don't usually want to skip inputs, for the same reason.</p>\n\n<p>The conv2d operator is more general, so you <em>could</em> create convolutions that slide the window along other dimensions, but that's not a typical use in convnets.  The typical use is to use them spatially.</p>\n\n<p><strong>Why reshape to -1</strong>  -1 is a placeholder that says \"adjust as necessary to match the size needed for the full tensor.\"  It's a way of making the code be independent of the input batch size, so that you can change your pipeline and not have to adjust the batch size everywhere in the code.</p>\n"}, {"tags": [], "owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "is_accepted": false, "score": 11, "last_activity_date": 1518546753, "last_edit_date": 1592644375, "creation_date": 1495413121, "answer_id": 44103110, "question_id": 34642595, "link": "https://stackoverflow.com/questions/34642595/tensorflow-strides-argument/44103110#44103110", "title": "Tensorflow Strides Argument", "body": "<h3>Let's start with what stride does in 1-dim case.</h3>\n<p>Let's assume your <code>input = [1, 0, 2, 3, 0, 1, 1]</code> and <code>kernel = [2, 1, 3]</code> the result of the convolution is <code>[8, 11, 7, 9, 4]</code>, which is calculated by sliding your kernel over the input, performing element-wise multiplication and summing everything. <a href=\"http://www.riptutorial.com/tensorflow/example/30750/math-behind-1d-convolution-with-advanced-examples-in-tf\" rel=\"noreferrer\">Like this</a>:</p>\n<ul>\n<li>8  = 1 * 2 + 0 * 1 + 2 * 3</li>\n<li>11 = 0 * 2 + 2 * 1 + 3 * 3</li>\n<li>7  = 2 * 2 + 3 * 1 + 0 * 3</li>\n<li>9  = 3 * 2 + 0 * 1 + 1 * 3</li>\n<li>4  = 0 * 2 + 1 * 1 + 1 * 3</li>\n</ul>\n<p>Here we slide by one element, but nothing stops you by using any other number. This number is your stride. You can think about it as downsampling the result of the 1-strided convolution by just taking every s-th result.</p>\n<p>Knowing the input size <strong>i</strong>, kernel size <strong>k</strong>, stride <strong>s</strong> and padding <strong>p</strong> you can easily calculate the output size of the convolution as:</p>\n<p><a href=\"https://i.stack.imgur.com/OC5Tk.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/OC5Tk.png\" alt=\"enter image description here\" /></a></p>\n<p>Here || operator means ceiling operation. For a pooling layer s = 1.</p>\n<hr />\n<h2>N-dim case.</h2>\n<p>Knowing the math for a 1-dim case, n-dim case is easy once you see that each dim is independent. So you just slide each dimension separately. Here is an <a href=\"http://www.riptutorial.com/tensorflow/example/30756/padding-and-strides--the-most-general-case-\" rel=\"noreferrer\">example for 2-d</a>. Notice that you do not need to have the same stride at all the dimensions. So for an N-dim input/kernel you should provide N strides.</p>\n<hr />\n<h2>So now it is easy to answer all your questions:</h2>\n<ol>\n<li><strong>What do each of the 4+ integers represent?</strong>. <a href=\"https://www.tensorflow.org/api_docs/python/tf/nn/conv2d\" rel=\"noreferrer\">conv2d</a>, <a href=\"https://www.tensorflow.org/api_docs/python/tf/nn/max_pool\" rel=\"noreferrer\">pool</a> tells you that this list represents the strides among each dimension. Notice that the length of strides list is the same as the rank of kernel tensor.</li>\n<li><strong>Why must they have strides[0] = strides<a href=\"http://www.riptutorial.com/tensorflow/example/30756/padding-and-strides--the-most-general-case-\" rel=\"noreferrer\">3</a> = 1 for convnets?</strong>. The first dimension is batch size, the last is channels. There is no point of skipping neither batch nor channel. So you make them 1. For width/height you can skip something and that's why they might be not 1.</li>\n<li><strong>tf.reshape(_X,shape=[-1, 28, 28, 1]). Why -1?</strong> <a href=\"https://www.tensorflow.org/api_docs/python/tf/reshape\" rel=\"noreferrer\">tf.reshape</a> has it covered for you:\n<blockquote>\n<p>If one component of shape is the special value -1, the size of that dimension is computed so that the total size remains constant. In particular, a shape of [-1] flattens into 1-D. At most one component of shape can be -1.</p>\n</blockquote>\n</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 976, "user_id": 3901871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/266cfb7444bd7bc19404945eac5398f1?s=128&d=identicon&r=PG&f=1", "display_name": "rocksyne", "link": "https://stackoverflow.com/users/3901871/rocksyne"}, "is_accepted": false, "score": 2, "last_activity_date": 1533094016, "last_edit_date": 1533094016, "creation_date": 1533089375, "answer_id": 51624458, "question_id": 34642595, "link": "https://stackoverflow.com/questions/34642595/tensorflow-strides-argument/51624458#51624458", "title": "Tensorflow Strides Argument", "body": "<p>@dga has done a wonderful job explaining and I can't be thankful enough how helpful it has been. In the like manner, I will like to share my findings on how <code>stride</code> works in 3D convolution.</p>\n\n<p>According to the <a href=\"https://www.tensorflow.org/api_docs/python/tf/nn/conv3d\" rel=\"nofollow noreferrer\">TensorFlow documentation</a> on conv3d, the shape of the input must be in this order: </p>\n\n<p><code>[batch, in_depth, in_height, in_width, in_channels]</code></p>\n\n<p>Let's explain the variables from the extreme right to the left using an example. Assuming the input shape is \n<code>input_shape = [1000,16,112,112,3]</code></p>\n\n<pre><code>input_shape[4] is the number of colour channels (RGB or whichever format it is extracted in)\ninput_shape[3] is the width of the image\ninput_shape[2] is the height of the image\ninput_shape[1] is the number of frames that have been lumped into 1 complete data\ninput_shape[0] is the number of lumped frames of images we have.\n</code></pre>\n\n<p>Below is a summary documentation for how stride is used.</p>\n\n<blockquote>\n  <p>strides: A list of ints that has length >= 5. 1-D tensor of length 5.\n  The stride of the sliding window for each dimension of input. Must\n  have <code>strides[0] = strides[4] = 1</code></p>\n</blockquote>\n\n<p>As indicated in many works, strides simply mean how many steps away a window or kernel jumps away from the closest element, be it a data frame or pixel (this is paraphrased by the way).</p>\n\n<p>From the above documentation, a stride in 3D will look like this strides = (1,<strong>X</strong>,<strong>Y</strong>,<strong>Z</strong>,1). </p>\n\n<p>The documentation emphasizes that <code>strides[0] = strides[4] = 1</code>. </p>\n\n<pre><code>strides[0]=1 means that we do not want to skip any data in the batch \nstrides[4]=1 means that we do not want to skip in the channel \n</code></pre>\n\n<p>strides[X] means how many skips we should make in the lumped frames. So for example, if we have 16 frames, X=1 means use every frame. X=2 means use every second frame and it goes and on</p>\n\n<p>strides[y] and strides[z] follow the explanation by <a href=\"https://stackoverflow.com/a/34643081/3901871\">@dga</a> so I will not redo that part.</p>\n\n<p>In keras however, you only need to specify a tuple/list of 3 integers, specifying the strides of the convolution along each spatial dimension, where spatial dimension is stride[x], strides[y] and strides[z]. strides[0] and strides[4] is already defaulted to 1.</p>\n\n<p>I hope someone finds this helpful!</p>\n"}], "owner": {"reputation": 1680, "user_id": 3908247, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O6c16.jpg?s=128&g=1", "display_name": "jfbeltran", "link": "https://stackoverflow.com/users/3908247/jfbeltran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42617, "favorite_count": 61, "accepted_answer_id": 34643081, "answer_count": 4, "score": 119, "last_activity_date": 1542012690, "creation_date": 1452113786, "question_id": 34642595, "link": "https://stackoverflow.com/questions/34642595/tensorflow-strides-argument", "title": "Tensorflow Strides Argument", "body": "<p>I am trying to understand the <strong>strides</strong> argument in tf.nn.avg_pool, tf.nn.max_pool, tf.nn.conv2d. </p>\n\n<p>The <a href=\"https://www.tensorflow.org/versions/master/api_docs/python/nn.html#max_pool\" rel=\"noreferrer\">documentation</a> repeatedly says </p>\n\n<blockquote>\n  <p>strides: A list of ints that has length >= 4. The stride of the sliding window for each dimension of the input tensor.</p>\n</blockquote>\n\n<p>My questions are:</p>\n\n<ol>\n<li>What do each of the 4+ integers represent?</li>\n<li>Why must they have strides[0] = strides[3] = 1 for convnets?</li>\n<li>In <a href=\"https://github.com/aymericdamien/TensorFlow-Examples/blob/master/notebooks/3%20-%20Neural%20Networks/convolutional_network.ipynb\" rel=\"noreferrer\">this example</a> we see <code>tf.reshape(_X,shape=[-1, 28, 28, 1])</code>. Why -1?</li>\n</ol>\n\n<p>Sadly the examples in the docs for reshape using -1 don't translate too well to this scenario.</p>\n"}, {"tags": ["python", "hash", "checksum"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 1, "creation_date": 1452114232, "post_id": 34642552, "comment_id": 57031357, "body": "Have a look at the <a href=\"https://pypi.python.org/pypi/pyhash/0.6.2\" rel=\"nofollow noreferrer\">PyHash library</a>. It includes MurmurHash 3 (which has 32- and 128-bit variants) and Google&#39;s CityHash (which has 64- and 128-bit variants)."}, {"owner": {"reputation": 77031, "user_id": 44743, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9af6bab469df2f4e1486c3a608446f3b?s=128&d=identicon&r=PG", "display_name": "recursive", "link": "https://stackoverflow.com/users/44743/recursive"}, "edited": false, "score": 1, "creation_date": 1452114425, "post_id": 34642552, "comment_id": 57031438, "body": "Here&#39;s a nice list.  <a href=\"https://en.wikipedia.org/wiki/List_of_hash_functions#Non-cryptographic_hash_functions\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"}, {"owner": {"reputation": 1137, "user_id": 3395374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/285a4a5200f609969d811d471ae2c846?s=128&d=identicon&r=PG&f=1", "display_name": "Muposat", "link": "https://stackoverflow.com/users/3395374/muposat"}, "edited": false, "score": 0, "creation_date": 1452116136, "post_id": 34642552, "comment_id": 57032340, "body": "Why not use python built-in hash() function? It generated 64-bit numbers on my 64 bit machine. I assume it is pretty fast."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1452189880, "post_id": 34642552, "comment_id": 57069632, "body": "<code>hash()</code> is 32 bits on a 32-bit Python, looks like, although this is an implementation detail that could change."}], "owner": {"reputation": 4435, "user_id": 2801069, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b7f58afbd866da432633593302fe79c4?s=128&d=identicon&r=PG&f=1", "display_name": "kyrenia", "link": "https://stackoverflow.com/users/2801069/kyrenia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1596, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1452113629, "creation_date": 1452113629, "question_id": 34642552, "link": "https://stackoverflow.com/questions/34642552/quick-64-bit-deterministic-hash-in-python", "title": "Quick 64-bit deterministic hash in python", "body": "<p>I have previously been using a <code>adler32</code> to produce a 32-bit hash of blocks of text (which i then use as a filename for saving a cache of the processed version of that text). e.g.</p>\n\n<pre><code>  hashed_file_name = adler32(pragraph.encode())\n</code></pre>\n\n<p>I am looking to increase the hash size, to reduce the likelihood of collisions [i.e. two different blocks of text getting the same hashed-code, which given I have around 10-million text bocks, i think would give a collisions in about 0.2% of cases - i.e. 10 million / 2^32 ]</p>\n\n<p>My question is, what is the fastest hash generator which produces at least a  64-bit hash? Would sha1 be an efficient option [which produces a 160-bit hash]? i.e.</p>\n\n<pre><code>  hashed_file_name  = hashlib.sha1(pragraph.encode()).hexdigest()\n</code></pre>\n\n<p>While this is a over-kill for my neads, are other versions/options more efficient in terms of processing time?</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452114118, "post_id": 34642653, "comment_id": 57031308, "body": "To expand a little bit on this answer, functions without an explicit return statement will return <code>None</code> by default, which can be evaluated the same as a <code>0</code>."}, {"owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452114198, "post_id": 34642653, "comment_id": 57031339, "body": "Thanks for explaining, I was actually updating the answer to explain the same thing."}], "tags": [], "owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "is_accepted": true, "score": 1, "last_activity_date": 1452114164, "last_edit_date": 1452114164, "creation_date": 1452113947, "answer_id": 34642653, "question_id": 34642418, "link": "https://stackoverflow.com/questions/34642418/applying-python-logging-filter/34642653#34642653", "title": "Applying Python logging filter", "body": "<p>You have to return something from the <code>filter</code> method. If you return <code>0</code> like values, it will not log anything. If you return a non zero value, it will log the value. </p>\n\n<p>In your case you did not explicitly return anything so it returns <code>None</code> which is a non zero value - this is why it's not logging anything. You can change it to the following:</p>\n\n<pre><code>class ErrorFilter(logging.Filter):\n  def __init__(self,level):\n    self.level = level\n\n  def filter(self,record):\n    if record.levelno == self.level:\n        os.environ[\"ERROR_FLAG\"] = \"True\"\n        return True\n</code></pre>\n"}], "owner": {"reputation": 808, "user_id": 4851728, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/10155525332165154/picture?type=large", "display_name": "kdubs", "link": "https://stackoverflow.com/users/4851728/kdubs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 34642653, "answer_count": 1, "score": 0, "last_activity_date": 1452114164, "creation_date": 1452113132, "question_id": 34642418, "link": "https://stackoverflow.com/questions/34642418/applying-python-logging-filter", "title": "Applying Python logging filter", "body": "<p>I created a logging filter for my error messages that sets an environment variable.  However, when I apply the filter to my logger it stops printing my error messages to the terminal/writing them to my logging file.</p>\n\n<p>Filter looks like this:</p>\n\n<pre><code>class ErrorFilter(logging.Filter):\n  def __init__(self,level):\n    self.level = level\n\n  def filter(self,record):\n    if record.levelno == self.level:\n        os.environ[\"ERROR_FLAG\"] = \"True\"\n</code></pre>\n\n<p>Applied like this:</p>\n\n<pre><code>logger     = Utils.getLogger() \nlogger.addFilter(ErrorFilter(logging.ERROR))\n</code></pre>\n\n<p>If I don't apply the filter then I get the error message printed in my terminal and written to a file, but when I add the filter that stops.  How do I fix this?</p>\n"}, {"tags": ["python", "rest"], "answers": [{"comments": [{"owner": {"reputation": 1145, "user_id": 164545, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b3e8be884ca4ff5e8e75030bff50d99c?s=128&d=identicon&r=PG", "display_name": "Seanonymous", "link": "https://stackoverflow.com/users/164545/seanonymous"}, "edited": false, "score": 1, "creation_date": 1452117192, "post_id": 34642879, "comment_id": 57032932, "body": "D&#39;oh!  Thanks for the help!"}], "tags": [], "owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "is_accepted": true, "score": 0, "last_activity_date": 1452114856, "creation_date": 1452114856, "answer_id": 34642879, "question_id": 34642386, "link": "https://stackoverflow.com/questions/34642386/request-to-edgecast-rest-api-from-python-return-405-method-not-allowed/34642879#34642879", "title": "Request to EdgeCast REST API from Python return 405 &#39;Method not allowed&#39;", "body": "<p>The target API expects a <code>PUT</code> request. You're sending a <code>POST</code> request. That's why it's throwing this error. </p>\n\n<p>You can add this to send the data as a <code>PUT</code> request:</p>\n\n<pre><code>c.setopt(pycurl.CUSTOMREQUEST, \"PUT\")\n</code></pre>\n\n<p>But I strongly recommend using the awesome <a href=\"http://docs.python-requests.org/en/latest/\" rel=\"nofollow\"><code>requests</code></a> library to handle REST calls. A sample <code>PUT</code> request would look like this:</p>\n\n<pre><code>requests.put(\"http://httpbin.org/put\", data = {\"key\":\"value\"})\n</code></pre>\n"}], "owner": {"reputation": 1145, "user_id": 164545, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b3e8be884ca4ff5e8e75030bff50d99c?s=128&d=identicon&r=PG", "display_name": "Seanonymous", "link": "https://stackoverflow.com/users/164545/seanonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "accepted_answer_id": 34642879, "answer_count": 1, "score": 0, "last_activity_date": 1452114856, "creation_date": 1452113002, "question_id": 34642386, "link": "https://stackoverflow.com/questions/34642386/request-to-edgecast-rest-api-from-python-return-405-method-not-allowed", "title": "Request to EdgeCast REST API from Python return 405 &#39;Method not allowed&#39;", "body": "<p>I'm trying to automate purging of files on Edgecast through their REST API.</p>\n\n<p>This code works within a Bash script:</p>\n\n<pre><code>curl -s  -H \"Authorization: tok:$EC_AUTH_TOKEN\" -H 'Accept: application/json' -H 'Content-Type: application/json' -X PUT -d \"{ \\\"MediaPath\\\":\\\"$PURGE_PATH\\\", \\\"MediaType\\\":3 }\"  https://api.edgecast.com/v2/mcc/customers/$ACCT_ID/edge/purge\n</code></pre>\n\n<p>But this Python version does not:</p>\n\n<pre><code>def purge_file(file_path):\nbuff = StringIO()\nc = pycurl.Curl()\npost_data = {'MediaPath': file_path, 'MediaType': 3}\n# Form data must be provided already urlencoded.\npostfields = json.dumps(post_data, separators=(',', ':'))\nc.setopt(c.POSTFIELDS, postfields)\nc.setopt(c.URL, PURGE_URL)\nc.setopt(pycurl.HTTPHEADER, ['Authorization: tok:' + EC_AUTH_TOKEN,\n                             'Accept: application/json',\n                             'Content-Type: application/json'])\nc.setopt(c.WRITEDATA, buff)\nc.perform()\nc.close()\nbody = buff.getvalue()\nprint (body)\n</code></pre>\n\n<p>Nor does this:</p>\n\n<pre><code>def purge_file(file_path):\nvalues = {'MediaPath': urllib.quote_plus(file_path),\n          'MediaType': 3}\npost_data = json.dumps(values, separators=(',', ':'))\nrequest = urllib2.Request(PURGE_URL, data=post_data, headers={'Accept': 'application/json',\n                                                              'Content-Type': 'application/json',\n                                                              'Authorization': 'tok:' + EC_AUTH_TOKEN})\nresponse = urllib2.urlopen(request)\nprint response.read()\n</code></pre>\n\n<p>Both of the Python versions return an error 405: Method not allowed.</p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["python", "python-2.7", "oop", "inheritance"], "comments": [{"owner": {"reputation": 4923, "user_id": 4601386, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4L6cUyO_qbs/AAAAAAAAAAI/AAAAAAAAEnY/wEBT7GB8tv8/photo.jpg?sz=128", "display_name": "tglaria", "link": "https://stackoverflow.com/users/4601386/tglaria"}, "edited": false, "score": 1, "creation_date": 1452113153, "post_id": 34642371, "comment_id": 57030789, "body": "Have you tried using the &#39;super&#39; function ?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5586518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9100c2186fa6c525092f0dbf99aa7e0c?s=128&d=identicon&r=PG&f=1", "display_name": "Gal Cesana", "link": "https://stackoverflow.com/users/5586518/gal-cesana"}, "edited": false, "score": 1, "creation_date": 1452113525, "post_id": 34642462, "comment_id": 57030975, "body": "Thanks alot Yoav! but can you explain me the meaning of &quot; *args, **kw &quot; how does this conect to the memorycard?"}, {"owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "reply_to_user": {"reputation": 1, "user_id": 5586518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9100c2186fa6c525092f0dbf99aa7e0c?s=128&d=identicon&r=PG&f=1", "display_name": "Gal Cesana", "link": "https://stackoverflow.com/users/5586518/gal-cesana"}, "edited": false, "score": 0, "creation_date": 1452113732, "post_id": 34642462, "comment_id": 57031084, "body": "@Gal Cesana This is called parameter packing/unpacking. please see <a href=\"http://hangar.runway7.net/python/packing-unpacking-arguments\" rel=\"nofollow noreferrer\">hangar.runway7.net/python/packing-unpacking-arguments</a>"}, {"owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "reply_to_user": {"reputation": 1, "user_id": 5586518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9100c2186fa6c525092f0dbf99aa7e0c?s=128&d=identicon&r=PG&f=1", "display_name": "Gal Cesana", "link": "https://stackoverflow.com/users/5586518/gal-cesana"}, "edited": false, "score": 0, "creation_date": 1452118744, "post_id": 34642462, "comment_id": 57033713, "body": "@Gal Cesana Sababa, Please up-vote/accept the answer,,,"}], "tags": [], "owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "is_accepted": false, "score": 0, "last_activity_date": 1452113281, "creation_date": 1452113281, "answer_id": 34642462, "question_id": 34642371, "link": "https://stackoverflow.com/questions/34642371/how-can-i-make-a-class-that-inherits-methods-from-another-class-in-python-but-al/34642462#34642462", "title": "How can I make a class that inherits methods from another class in python but also change only some part of a certain method?", "body": "<p>An example:</p>\n\n<pre><code>class MemoryCard(object):\n    def __init__(self, size):\n        print ('MemoryCard size is ', size)\n\nclass MicroSDCard(MemoryCard):\n    def __init__(self, max_freq, *args, **kw):\n        MemoryCard.__init__(self, *args, **kw)\n        self.max_freq = max_freq\n\n\nprint (\"MicroSDCard max_freq is \", MicroSDCard(5, size=3).max_freq)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 5703790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceae756ecb13f21f8c3826f04a8d1ef4?s=128&d=identicon&r=PG&f=1", "display_name": "D. Zhai", "link": "https://stackoverflow.com/users/5703790/d-zhai"}, "is_accepted": false, "score": 0, "last_activity_date": 1452114899, "last_edit_date": 1452114899, "creation_date": 1452113677, "answer_id": 34642567, "question_id": 34642371, "link": "https://stackoverflow.com/questions/34642371/how-can-i-make-a-class-that-inherits-methods-from-another-class-in-python-but-al/34642567#34642567", "title": "How can I make a class that inherits methods from another class in python but also change only some part of a certain method?", "body": "<p>Maybe I didn't understand you correctly, but I would do the following:</p>\n\n<ol>\n<li>re-write the <code>__init__</code> method in <code>MicroSDCard</code> class with the new attribute.</li>\n<li>for any method that utilize this new attribute, you need to re-write (overload) it in the <code>MicroSDCard</code> class definition.</li>\n</ol>\n\n<p>That looks too simple, so I guess I didn't get your question :)</p>\n"}], "owner": {"reputation": 1, "user_id": 5586518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9100c2186fa6c525092f0dbf99aa7e0c?s=128&d=identicon&r=PG&f=1", "display_name": "Gal Cesana", "link": "https://stackoverflow.com/users/5586518/gal-cesana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452114899, "creation_date": 1452112940, "question_id": 34642371, "link": "https://stackoverflow.com/questions/34642371/how-can-i-make-a-class-that-inherits-methods-from-another-class-in-python-but-al", "title": "How can I make a class that inherits methods from another class in python but also change only some part of a certain method?", "body": "<p>example:\nI have a class that is called \"MicroSDCard\" this class inherits from a class that is called \"MemoryCard\", but there is one change between them. MicroSDCard can get another value that is called Frequency, and should retrurn it using the <strong>init</strong> method like this \"self.max_freq\". How can I make it happen?\nThank you in advance </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 400, "user_id": 1108616, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4HTAL.jpg?s=128&g=1", "display_name": "Greg Smethells", "link": "https://stackoverflow.com/users/1108616/greg-smethells"}, "edited": false, "score": 0, "creation_date": 1452112877, "post_id": 34642333, "comment_id": 57030645, "body": "This appears to be the first question of its kind? <a href=\"http://stackoverflow.com/search?q=%40cached_property+inspect\">stackoverflow.com/search?q=%40cached_property+inspect</a>"}, {"owner": {"reputation": 400, "user_id": 1108616, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4HTAL.jpg?s=128&g=1", "display_name": "Greg Smethells", "link": "https://stackoverflow.com/users/1108616/greg-smethells"}, "edited": false, "score": 0, "creation_date": 1452112895, "post_id": 34642333, "comment_id": 57030653, "body": "I&#39;ve scoured the web and the docs and I do not see a way to do it."}, {"owner": {"reputation": 400, "user_id": 1108616, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4HTAL.jpg?s=128&g=1", "display_name": "Greg Smethells", "link": "https://stackoverflow.com/users/1108616/greg-smethells"}, "edited": false, "score": 0, "creation_date": 1452114086, "post_id": 34642333, "comment_id": 57031287, "body": "I wager that @AlexMartelli will get first post."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1452116364, "post_id": 34642333, "comment_id": 57032470, "body": "While I don&#39;t think there&#39;s an <code>inspect</code> function to do this automatically, you could quite easily write your own code iterating over the class&#39;s attributes: <code>[name for name, obj in vars(some_class).items() if isinstance(obj, property)]</code>. This might not work for other decorators though, if they don&#39;t create objects of some easy to recognize type."}], "answers": [{"tags": [], "owner": {"reputation": 10017, "user_id": 301107, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2c87e8db57897b08332340b2c4b508ff?s=128&d=identicon&r=PG", "display_name": "masnun", "link": "https://stackoverflow.com/users/301107/masnun"}, "is_accepted": true, "score": 3, "last_activity_date": 1452116661, "last_edit_date": 1495539891, "creation_date": 1452115912, "answer_id": 34643176, "question_id": 34642333, "link": "https://stackoverflow.com/questions/34642333/lookup-property-methods-with-inspect-module/34643176#34643176", "title": "Lookup @property methods with inspect module", "body": "<p>My version:</p>\n\n<pre><code>import inspect\n\n\nclass A(object):\n    @property \n    def name():\n        return \"Masnun\"\n\n\ndef method_with_property(klass):\n    props = []\n\n    for x in inspect.getmembers(klass):\n\n        if isinstance(x[1], property):\n            props.append(x[0])\n\n    return props\n\nprint method_with_property(A)\n</code></pre>\n\n<p>Another version from another thread: </p>\n\n<pre><code>import inspect\n\ndef methodsWithDecorator(cls, decoratorName):\n    sourcelines = inspect.getsourcelines(cls)[0]\n    for i,line in enumerate(sourcelines):\n        line = line.strip()\n        if line.split('(')[0].strip() == '@'+decoratorName: # leaving a bit out\n            nextLine = sourcelines[i+1]\n            name = nextLine.split('def')[1].split('(')[0].strip()\n            yield(name)\n\nclass A(object):\n    @property \n    def name():\n        return \"Masnun\"\n\n\n\nprint list(methodsWithDecorator(A, 'property'))\n</code></pre>\n\n<p>The code of <code>methodsWithDecorator</code> is taken from the accepted answer on this thread: <a href=\"https://stackoverflow.com/questions/5910703/howto-get-all-methods-of-a-python-class-with-given-decorator\">Howto get all methods of a python class with given decorator</a></p>\n"}], "owner": {"reputation": 400, "user_id": 1108616, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4HTAL.jpg?s=128&g=1", "display_name": "Greg Smethells", "link": "https://stackoverflow.com/users/1108616/greg-smethells"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 1, "accepted_answer_id": 34643176, "answer_count": 1, "score": 2, "last_activity_date": 1452116661, "creation_date": 1452112779, "last_edit_date": 1452115527, "question_id": 34642333, "link": "https://stackoverflow.com/questions/34642333/lookup-property-methods-with-inspect-module", "title": "Lookup @property methods with inspect module", "body": "<p>Is there a way to programmatically lookup the names of all <code>@property</code> decorated methods in a class using the <code>inspect</code> module? </p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 3843, "user_id": 2735009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/38a795fbd4a70b92d3ea5596dc8beb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Patthebug", "link": "https://stackoverflow.com/users/2735009/patthebug"}, "edited": false, "score": 0, "creation_date": 1452114600, "post_id": 34642294, "comment_id": 57031531, "body": "<code>pd.pivot_table(df, index=&#39;Sequence&#39;, columns=&#39;Level&#39;, values=&#39;Count&#39;)</code> gives me the following error:  pandas\\index.pyx in pandas.index.IndexEngine.get_loc (pandas\\index.c:3979)()  pandas\\index.pyx in pandas.index.IndexEngine.get_loc (pandas\\index.c:3843)()  pandas\\hashtable.pyx in pandas.hashtable.PyObjectHashTable.get_item (pandas\\hashtable.c:12265)()  pandas\\hashtable.pyx in pandas.hashtable.PyObjectHashTable.get_item (pandas\\hashtable.c:12216)()  KeyError: &#39;Sequence&#39;"}, {"owner": {"reputation": 23806, "user_id": 4542359, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a6ea331ac684b52563d13e6ee44e03be?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Protopopov", "link": "https://stackoverflow.com/users/4542359/anton-protopopov"}, "reply_to_user": {"reputation": 3843, "user_id": 2735009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/38a795fbd4a70b92d3ea5596dc8beb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Patthebug", "link": "https://stackoverflow.com/users/2735009/patthebug"}, "edited": false, "score": 0, "creation_date": 1452114666, "post_id": 34642294, "comment_id": 57031563, "body": "What pandas version are you using? Are you sure that in your dataframe you have column <code>Sequence</code>? Is you <code>Sequence</code> is an index for the dataframe?"}, {"owner": {"reputation": 23806, "user_id": 4542359, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a6ea331ac684b52563d13e6ee44e03be?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Protopopov", "link": "https://stackoverflow.com/users/4542359/anton-protopopov"}, "reply_to_user": {"reputation": 3843, "user_id": 2735009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/38a795fbd4a70b92d3ea5596dc8beb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Patthebug", "link": "https://stackoverflow.com/users/2735009/patthebug"}, "edited": false, "score": 0, "creation_date": 1452115118, "post_id": 34642294, "comment_id": 57031803, "body": "If you have it as index you first need to do <code>reset_index</code>."}, {"owner": {"reputation": 3843, "user_id": 2735009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/38a795fbd4a70b92d3ea5596dc8beb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Patthebug", "link": "https://stackoverflow.com/users/2735009/patthebug"}, "edited": false, "score": 0, "creation_date": 1452115167, "post_id": 34642294, "comment_id": 57031833, "body": "I figured it out. I&#39;m connecting to <code>Redshift</code> which returns all column names in lower case by default. After I changed the column names to lower case i nthe <code>pivot_table</code> call, it started working as expected. Thanks a lot for your help."}], "tags": [], "owner": {"reputation": 23806, "user_id": 4542359, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a6ea331ac684b52563d13e6ee44e03be?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Protopopov", "link": "https://stackoverflow.com/users/4542359/anton-protopopov"}, "is_accepted": true, "score": 1, "last_activity_date": 1452113314, "last_edit_date": 1592644375, "creation_date": 1452112572, "answer_id": 34642294, "question_id": 34642180, "link": "https://stackoverflow.com/questions/34642180/convert-categorical-data-into-various-columns-for-plotting-in-pandas/34642294#34642294", "title": "Convert categorical data into various columns for plotting in pandas", "body": "<p>You could use pandas <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.pivot_table.html\" rel=\"nofollow noreferrer\"><code>pivot_table</code></a>:</p>\n<pre><code>In [1436]: pd.pivot_table(df, index='Sequence', columns='Level', values='Count')\nOut[1436]: \nLevel     Easy  Hard  Medium\nSequence                    \n1            5     9       7\n</code></pre>\n<p>Then you could plot it:</p>\n<pre><code>df1 = pd.pivot_table(df, index='Sequence', columns='Level', values='Count')\ndf1.plot(kind='bar', stacked=True)\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Zmtlh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zmtlh.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 3843, "user_id": 2735009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/38a795fbd4a70b92d3ea5596dc8beb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Patthebug", "link": "https://stackoverflow.com/users/2735009/patthebug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "accepted_answer_id": 34642294, "answer_count": 1, "score": 0, "last_activity_date": 1452114100, "creation_date": 1452112205, "last_edit_date": 1452114100, "question_id": 34642180, "link": "https://stackoverflow.com/questions/34642180/convert-categorical-data-into-various-columns-for-plotting-in-pandas", "title": "Convert categorical data into various columns for plotting in pandas", "body": "<p>I'm new to <code>python</code> and <code>pandas</code> but I've used <code>R</code> in the past for data analysis. I have a simple dataset:</p>\n\n<pre><code>df.head()\n\nSequence      Level    Count\n       1       Easy        5\n       1     Medium        7\n       1       Hard        9\n</code></pre>\n\n<p>I would like to convert this to:</p>\n\n<pre><code>Sequence    Easy    Medium    Hard\n       1       5         7       9\n</code></pre>\n\n<p>In <code>R</code>, I could simply do this by using the <code>reshape2</code> package. In <code>python</code> it seems like one of my options is to create dummy variables using <code>get_dummies</code> but that would still generate multiple rows for the same <code>Sequence</code> in my case. Is there an easy way of achieving my resultset?</p>\n\n<p>I'm finally trying to plot it using:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\n\ndf.plot(kind='bar', stacked=True)\n\nplt.show()\n</code></pre>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["python", "list", "hash", "set", "time-complexity"], "comments": [{"owner": {"reputation": 9263, "user_id": 1536976, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc2372591e00f2ab504b59b4f7cbed43?s=128&d=identicon&r=PG", "display_name": "Trilarion", "link": "https://stackoverflow.com/users/1536976/trilarion"}, "edited": false, "score": 0, "creation_date": 1452113556, "post_id": 34642155, "comment_id": 57030988, "body": "You could kind of test it... Just time it for increasing n. (I don&#39;t know but I guess it should be since insertion in a hash table is most of the time O(1).)."}, {"owner": {"reputation": 810, "user_id": 5026399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7acd38a399fc347c2ea7749ce669de3e?s=128&d=identicon&r=PG&f=1", "display_name": "lxuechen", "link": "https://stackoverflow.com/users/5026399/lxuechen"}, "reply_to_user": {"reputation": 9263, "user_id": 1536976, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc2372591e00f2ab504b59b4f7cbed43?s=128&d=identicon&r=PG", "display_name": "Trilarion", "link": "https://stackoverflow.com/users/1536976/trilarion"}, "edited": false, "score": 0, "creation_date": 1452114446, "post_id": 34642155, "comment_id": 57031453, "body": "Thanks I guess I was just too lazy I should get used to using the timer module"}, {"owner": {"reputation": 352, "user_id": 439905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d73b3f65f1c3479983efdb0c3e116eb4?s=128&d=identicon&r=PG", "display_name": "Jacob Lee", "link": "https://stackoverflow.com/users/439905/jacob-lee"}, "edited": false, "score": 3, "creation_date": 1568916295, "post_id": 34642155, "comment_id": 102437003, "body": "Time complexity questions should be answered in reference to algorithms, not observed timing of operations on your machine."}], "answers": [{"comments": [{"owner": {"reputation": 9263, "user_id": 1536976, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc2372591e00f2ab504b59b4f7cbed43?s=128&d=identicon&r=PG", "display_name": "Trilarion", "link": "https://stackoverflow.com/users/1536976/trilarion"}, "edited": false, "score": 12, "creation_date": 1452117005, "post_id": 34642209, "comment_id": 57032826, "body": "In the really worse case when you get a hash collision every time, insertion in a hash table would be O(n) and O(n^2) overall but fortunately this almost never happens."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 9263, "user_id": 1536976, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc2372591e00f2ab504b59b4f7cbed43?s=128&d=identicon&r=PG", "display_name": "Trilarion", "link": "https://stackoverflow.com/users/1536976/trilarion"}, "edited": false, "score": 0, "creation_date": 1452127134, "post_id": 34642209, "comment_id": 57036687, "body": "Also, if you have very poor memory management or hash binning and a very large list, your performance will not be O(n)."}], "tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": true, "score": 72, "last_activity_date": 1452112297, "creation_date": 1452112297, "answer_id": 34642209, "question_id": 34642155, "link": "https://stackoverflow.com/questions/34642155/what-is-time-complexity-of-a-list-to-set-conversion/34642209#34642209", "title": "What is time complexity of a list to set conversion?", "body": "<p>Yes. Iterating over a list is <code>O(n)</code> and adding each element to the hash set is <code>O(1)</code>, so the total operation is <code>O(n)</code>.</p>\n"}], "owner": {"reputation": 810, "user_id": 5026399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7acd38a399fc347c2ea7749ce669de3e?s=128&d=identicon&r=PG&f=1", "display_name": "lxuechen", "link": "https://stackoverflow.com/users/5026399/lxuechen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32306, "favorite_count": 6, "accepted_answer_id": 34642209, "answer_count": 1, "score": 63, "last_activity_date": 1595791342, "creation_date": 1452112108, "last_edit_date": 1516678537, "question_id": 34642155, "link": "https://stackoverflow.com/questions/34642155/what-is-time-complexity-of-a-list-to-set-conversion", "title": "What is time complexity of a list to set conversion?", "body": "<p>I've noticed the table of the time complexity of set operations on the python official website. But i just wanna ask what's the time complexity of converting a list to a set, for instance,</p>\n\n<pre><code>l = [1, 2, 3, 4, 5]\ns = set(l)\n</code></pre>\n\n<p>I kind of know that this is actually a hash table, but how exactly does it work? Is it O(n) then?</p>\n"}, {"tags": ["python", "mysql", "sql-server", "sqlalchemy", "left-join"], "answers": [{"tags": [], "owner": {"reputation": 667, "user_id": 895289, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/272bf05318db7aa098884b44301283c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/895289/jimmy"}, "is_accepted": false, "score": 1, "last_activity_date": 1452112883, "last_edit_date": 1495541309, "creation_date": 1452112883, "answer_id": 34642354, "question_id": 34642053, "link": "https://stackoverflow.com/questions/34642053/sqlalchemy-left-join-where-clause-being-converted-to-zeros-and-ones/34642354#34642354", "title": "SQLAlchemy Left join WHERE clause being converted to zeros and ones", "body": "<p>Howdie do,</p>\n\n<p>I figured it out</p>\n\n<p>The Python 'is' operator doesn't play nice with SQLAlchemy</p>\n\n<p>I found this out thanks to the following S/O question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5602918/postgresql-select-null-values-in-sqlalchemy\">Selecting Null values SQLAlchemy</a></p>\n\n<p>I've since updated my query to the following:</p>\n\n<pre><code>tracking_updates = db.session.query(tUAlias1.order_id, tUAlias1.status_type).\\\n            outerjoin(tUalias2, (tUAlias1.order_id == tUalias2.order_id) &amp; (tUAlias1.last_updated &lt; tUalias2.last_updated)).\\\n            filter(tUAlias1.order_id == '21757').filter(tUalias2.last_updated == None)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1454, "user_id": 5245893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JVjQ.png?s=128&g=1", "display_name": "Mikhail Berlinkov", "link": "https://stackoverflow.com/users/5245893/mikhail-berlinkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1526179079, "creation_date": 1526179079, "answer_id": 50312276, "question_id": 34642053, "link": "https://stackoverflow.com/questions/34642053/sqlalchemy-left-join-where-clause-being-converted-to-zeros-and-ones/50312276#50312276", "title": "SQLAlchemy Left join WHERE clause being converted to zeros and ones", "body": "<p>The problem is not in how SqlAlchemy processes null values, the problem is that you use an operator which is not supported for <code>instrumented' columns and thus the expression</code>tUalias2.last_updated is None<code>evaluates to a value (False), which is then translated to either</code>and 0=1<code>. You should write</code>tUalias2.last_updated.is_(None)<code>instead of</code>tUalias2.last_updated is None` to make your code work.</p>\n"}], "owner": {"reputation": 667, "user_id": 895289, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/272bf05318db7aa098884b44301283c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/895289/jimmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1508, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1526179079, "creation_date": 1452111777, "question_id": 34642053, "link": "https://stackoverflow.com/questions/34642053/sqlalchemy-left-join-where-clause-being-converted-to-zeros-and-ones", "title": "SQLAlchemy Left join WHERE clause being converted to zeros and ones", "body": "<p>Howdie do,</p>\n\n<p>I have the following SQL, that I'm converting to SQLAlchemy:</p>\n\n<pre><code>select t1.`order_id`, t1.`status_type`\nfrom `tracking_update` AS t1 LEFT JOIN `tracking_update` AS t2\nON (t1.`order_id` = t2.`order_id` AND t1.`last_updated` &lt; t2.`last_updated`)\nwhere t1.`order_id` = '21757'and t2.`last_updated` IS NULL\n</code></pre>\n\n<p>The SQL is just returning the latest tracking update for order id 21757. I'm accomplishing this by doing a left join back to the same table. In order to do this, I'm aliasing the table first:</p>\n\n<pre><code>        tUAlias1 = aliased(TrackingUpdate)\n        tUalias2 = aliased(TrackingUpdate)\n</code></pre>\n\n<p>So far, this is what I have for my conversion to SQLAlchemy:</p>\n\n<pre><code>tracking_updates = db.session.query(tUAlias1.order_id, tUAlias1.status_type).\\\n            outerjoin(tUalias2, (tUAlias1.order_id == tUalias2.order_id) &amp; (tUAlias1.last_updated &lt; tUalias2.last_updated)).\\\n            filter(and_(tUAlias1.order_id == '21757', tUalias2.last_updated is None))\n</code></pre>\n\n<p>And this is the result of the SQLAlchemy code that is executed on the server via log:</p>\n\n<pre><code>SELECT tracking_update_1.order_id AS tracking_update_1_order_id, tracking_update_1.status_type AS tracking_update_1_status_type \nFROM tracking_update AS tracking_update_1 LEFT OUTER JOIN tracking_update AS tracking_update_2 ON tracking_update_1.order_id = tracking_update_2.order_id AND tracking_update_1.last_updated &lt; tracking_update_2.last_updated \nWHERE 0 = 1\n</code></pre>\n\n<p>As you can see, the filter(WHERE clause) is now 0 = 1.</p>\n\n<p>Now, if I remove the and_ statement and try two filters like so:</p>\n\n<pre><code>tracking_updates = db.session.query(tUAlias1.order_id, tUAlias1.status_type).\\\n            outerjoin(tUalias2, (tUAlias1.order_id == tUalias2.order_id) &amp; (tUAlias1.last_updated &lt; tUalias2.last_updated)).\\\n            filter(tUAlias1.order_id == '21757').filter(tUalias2.last_updated is None)\n</code></pre>\n\n<p>I receive the same result. I know the SQL itself is fine as I can run it with no issue via MySQL workbench.</p>\n\n<p>When SQL run directly, I will receive the following</p>\n\n<pre><code>order ID | Status\n21757      D\n</code></pre>\n\n<p>Also, if I remove the tUalias2.last_updated is None, I actually receive some results, but they are not correct. This is the SQL Log for that:</p>\n\n<p>Python code</p>\n\n<pre><code>tracking_updates = db.session.query(tUAlias1.order_id, tUAlias1.status_type).\\\n            outerjoin(tUalias2, (tUAlias1.order_id == tUalias2.order_id) &amp; (tUAlias1.last_updated &lt; tUalias2.last_updated)).\\\n            filter(tUAlias1.order_id == '21757')\n</code></pre>\n\n<p>SQLAlchemy run:</p>\n\n<pre><code>SELECT tracking_update_1.order_id AS tracking_update_1_order_id, tracking_update_1.status_type AS tracking_update_1_status_type \nFROM tracking_update AS tracking_update_1 LEFT OUTER JOIN tracking_update AS tracking_update_2 ON tracking_update_1.order_id = tracking_update_2.order_id AND tracking_update_1.last_updated &lt; tracking_update_2.last_updated \nWHERE tracking_update_1.order_id = '21757'\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "python-2.7", "ipython-notebook"], "comments": [{"owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "edited": false, "score": 1, "creation_date": 1452111859, "post_id": 34641998, "comment_id": 57030090, "body": "Possible duplicate: <a href=\"http://stackoverflow.com/questions/6796492/temporarily-redirect-stdout-stderr\" title=\"temporarily redirect stdout stderr\">stackoverflow.com/questions/6796492/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 1, "last_activity_date": 1452112043, "creation_date": 1452112043, "answer_id": 34642126, "question_id": 34641998, "link": "https://stackoverflow.com/questions/34641998/redirecting-external-function-stdout-to-log-file-as-they-happen/34642126#34642126", "title": "Redirecting external function stdout to log file as they happen", "body": "<p>It's probably better to perform the redirection in your shell, not from within the python code.</p>\n\n<p>From a typical Unix command line, you can use the <code>tee</code> command:</p>\n\n<pre><code>python program.py | tee logfile\n</code></pre>\n"}], "owner": {"reputation": 976, "user_id": 1183980, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a038d6874b9d93844c7d9235cac4fb6a?s=128&d=identicon&r=PG", "display_name": "ajkl", "link": "https://stackoverflow.com/users/1183980/ajkl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452112043, "creation_date": 1452111571, "question_id": 34641998, "link": "https://stackoverflow.com/questions/34641998/redirecting-external-function-stdout-to-log-file-as-they-happen", "title": "Redirecting external function stdout to log file as they happen", "body": "<p>Using python 2.7\nI am calling an external library function and I want to print all the logs/prints that this function generates to a file. I would like to update the file with the logs as they happen.\nI am using ipython notebook so if there is an easier way which is notebook specific I will be ok with that too.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "is_accepted": true, "score": 1, "last_activity_date": 1452111708, "creation_date": 1452111708, "answer_id": 34642032, "question_id": 34641989, "link": "https://stackoverflow.com/questions/34641989/python-recursive-return-using-dict-get/34642032#34642032", "title": "Python recursive return using dict.get", "body": "<p>Because the second argument of <code>get</code> gets executed regardless of whether it will ultimately be used by <code>get</code>. You ought to break it up into multiple lines so it only recursively calls when necessary:</p>\n\n<pre><code>d = {'s':0,'r':1,'p':2}\nif u in d:\n    return d[u]\nelse:\n    return self.recept()\n</code></pre>\n\n<hr>\n\n<p>But really, it would be preferable to not use recursion at all, since you'll hit the maximum recursion depth and crash after the user chooses an invalid input enough times in a row.</p>\n\n<pre><code>def recept(self):\n    d = {'s':0,'r':1,'p':2}\n    while True:\n        u = input('choose..r or s or p: ')\n        print('choice: ',{'r':'rock','s':'scissor','p':'p'}.get(u,'{} (wrong input)'.format(u)))\n        if u in d:\n            return d[u]\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5234927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82bb3d3e31a89bebccfb37145d5ce3d?s=128&d=identicon&r=PG&f=1", "display_name": "Eli", "link": "https://stackoverflow.com/users/5234927/eli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 34642032, "answer_count": 1, "score": 1, "last_activity_date": 1452111724, "creation_date": 1452111537, "last_edit_date": 1452111724, "question_id": 34641989, "link": "https://stackoverflow.com/questions/34641989/python-recursive-return-using-dict-get", "title": "Python recursive return using dict.get", "body": "<p>I'm writting a code for rock scissor paper game. But when I run it, it falls into infinite loop.</p>\n\n<p>The problem happened in following code. Why this code result in infinite loop for any input value?\n(my python version is 3.5.0)</p>\n\n<pre><code>class Peoples(object):            \n    def recept(self):\n        u = input('choose..r or s or p: ')\n        print('choice: ',{'r':'rock','s':'scissor','p':'p'}.get(u,'{} (wrong input)'.format(u)))\n        return {'s':0,'r':1,'p':2}.get(u,self.recept())\n\nP=Peoples()\nP.recept()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1452111481, "post_id": 34641967, "comment_id": 57029841, "body": "So... What&#39;s your question? If you want to write a program, <i>write a program</i>."}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 0, "creation_date": 1452112184, "post_id": 34641967, "comment_id": 57030266, "body": "You need to provide an example of what you <i>tried to do</i> but didn&#39;t work. Otherwise you are just asking people here to do your work for you. See: <a href=\"http://meta.stackoverflow.com/q/288133/1391441\">meta.stackoverflow.com/q/288133/1391441</a>"}, {"owner": {"reputation": 6639, "user_id": 1157100, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/1f9W9.png?s=128&g=1", "display_name": "200_success", "link": "https://stackoverflow.com/users/1157100/200-success"}, "edited": false, "score": 0, "creation_date": 1452112870, "post_id": 34641967, "comment_id": 57030641, "body": "Can you make your question match your code? What numbered files are you referring to? And where are these apples of which you speak?"}, {"owner": {"reputation": 21, "user_id": 5754162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/733bb4924651127f64b8c3a559160c40?s=128&d=identicon&r=PG&f=1", "display_name": "setarkos", "link": "https://stackoverflow.com/users/5754162/setarkos"}, "edited": false, "score": 0, "creation_date": 1452113640, "post_id": 34641967, "comment_id": 57031030, "body": "Edited as much and as best as I was able to..."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5754162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/733bb4924651127f64b8c3a559160c40?s=128&d=identicon&r=PG&f=1", "display_name": "setarkos", "link": "https://stackoverflow.com/users/5754162/setarkos"}, "edited": false, "score": 0, "creation_date": 1452119496, "post_id": 34643295, "comment_id": 57034069, "body": "Thanks! That works almost perfectly. I don&#39;t fully undestand the argument of re.compile() though. Can I specify as a pattern <i>&#39;the first integer in line x after <code>string</code>&#39;</i>?  Edit: I don&#39;t have to specify the line as long as I can specify the string preceding the integer."}], "tags": [], "owner": {"reputation": 521, "user_id": 5754521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c4a9ed77478e834cdc6c28669a4eed?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/5754521/benjamin"}, "is_accepted": true, "score": 0, "last_activity_date": 1452116309, "creation_date": 1452116309, "answer_id": 34643295, "question_id": 34641967, "link": "https://stackoverflow.com/questions/34641967/how-to-pick-certain-values-from-text-files-and-print-as-array-into-a-single-outp/34643295#34643295", "title": "How to pick certain values from text files and print as array into a single output file", "body": "<p>If your files are in the same directory you could use os.listdir() (<a href=\"https://docs.python.org/2/library/os.html#files-and-directories\" rel=\"nofollow\">https://docs.python.org/2/library/os.html#files-and-directories</a>) to get a list of your files you can then loop through. </p>\n\n<p>To retrieve a value from a certain position you could use regular expressions (<a href=\"https://docs.python.org/3.4/library/re.html\" rel=\"nofollow\">https://docs.python.org/3.4/library/re.html</a>):</p>\n\n<pre><code>import os\nimport re\n\npath = your_file_path\nd = os.listdir(path) # get list of file names\n\ngraphdata = []\npat = re.compile('(?&lt;=\\w\\:\\s)\\d+')\nfor f in d:\n    with open(path + f, 'r') as file:\n        file = file.read()\n        num = re.findall(pat, file)\n        graphdata.append((f, num))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5754162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/733bb4924651127f64b8c3a559160c40?s=128&d=identicon&r=PG&f=1", "display_name": "setarkos", "link": "https://stackoverflow.com/users/5754162/setarkos"}, "is_accepted": false, "score": 0, "last_activity_date": 1452166648, "creation_date": 1452166648, "answer_id": 34654188, "question_id": 34641967, "link": "https://stackoverflow.com/questions/34641967/how-to-pick-certain-values-from-text-files-and-print-as-array-into-a-single-outp/34654188#34654188", "title": "How to pick certain values from text files and print as array into a single output file", "body": "<p>For the sake of completeness, here is my final solution (thanks to @Benjamin):</p>\n\n<pre><code>import re\n\ngraphdata = []\npat = re.compile('\\d+')\nfor i in range(1,n):\n  f = open('RA512_mono_1_M2_C'+str(i)+'_lex.stat').readlines()[k-1]\n  match = re.findall(pat, f)\n  x = int(match[j-1])\n  datapoint = (i,x)\n  graphdata.append(datapoint)\n\nwith open('graph.out', 'w') as f:\n  f.write(str(graphdata))\n</code></pre>\n\n<p>Picking the jth number in the kth line of every file in range(1,n) and printing the data as datapoints for a graph. </p>\n"}], "owner": {"reputation": 21, "user_id": 5754162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/733bb4924651127f64b8c3a559160c40?s=128&d=identicon&r=PG&f=1", "display_name": "setarkos", "link": "https://stackoverflow.com/users/5754162/setarkos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 34643295, "answer_count": 2, "score": -2, "last_activity_date": 1452166648, "creation_date": 1452111438, "last_edit_date": 1452113582, "question_id": 34641967, "link": "https://stackoverflow.com/questions/34641967/how-to-pick-certain-values-from-text-files-and-print-as-array-into-a-single-outp", "title": "How to pick certain values from text files and print as array into a single output file", "body": "<p>I only have very basic knowledge of python and the following problem:</p>\n\n<p>I have a number of numbered text files <em>RA512_mono_1_M2_Ci_lex.stat</em> for i in [1..n].\nAll these files have the same format with lines such as </p>\n\n<blockquote>\n  <p>Number of apples in sample:    x</p>\n</blockquote>\n\n<p>(The line is always the same in every file, only x is different)</p>\n\n<p>I would like to write a program that reads all n of these files and gives an output text file of the form</p>\n\n<blockquote>\n  <p>[(1,x1),(2,x2),...,(n,xn)]</p>\n</blockquote>\n\n<p>so that I can plot them.</p>\n\n<p>I have a few problems, that I haven't figured out yet:</p>\n\n<ol>\n<li>How do I read a value at a certain position in the input file</li>\n<li>How do I loop over the counter in the filenames</li>\n</ol>\n\n<p>What I have so far is not much:</p>\n\n<pre><code>graphdata = []\nfor i in range(1,n):\n    with open('RA512_mono_1_M2_Ci_lex.stat') as file_in: #What is the correct syntax for looping over i?\n        datapoint = #How do I pick the value I want?\n            graphdata.append(datapoint)\n\nnp.savetxt('graph.out', graphdata, delimiter=',') #There might be a better way without numpy?\n</code></pre>\n\n<p>Of course, there is more syntax to be fixed.</p>\n"}, {"tags": ["python", "mongodb", "mongodb-query", "pymongo"], "answers": [{"comments": [{"owner": {"reputation": 291, "user_id": 1673121, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45c786cba12dc4aa4b28f674db9a1e7c?s=128&d=identicon&r=PG", "display_name": "Edik Mkoyan", "link": "https://stackoverflow.com/users/1673121/edik-mkoyan"}, "edited": false, "score": 0, "creation_date": 1452113339, "post_id": 34642315, "comment_id": 57030872, "body": "No I didn&#39;t, I am going to take many text files and insert all English words to that collection, so I will not drop it.  and it python drops this error message Traceback (most recent call last):   File &quot;main.py&quot;, line 14, in &lt;module&gt;     except pymongo.errors.DuplicateKeyError: NameError: name &#39;pymongo&#39; is not defined"}, {"owner": {"reputation": 291, "user_id": 1673121, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45c786cba12dc4aa4b28f674db9a1e7c?s=128&d=identicon&r=PG", "display_name": "Edik Mkoyan", "link": "https://stackoverflow.com/users/1673121/edik-mkoyan"}, "edited": false, "score": 0, "creation_date": 1452113562, "post_id": 34642315, "comment_id": 57030990, "body": "I added import pymongo at the beginning and it worked, thanks."}], "tags": [], "owner": {"reputation": 23077, "user_id": 492620, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/23e8d9c545b0a9d603765abaadc3f499?s=128&d=identicon&r=PG", "display_name": "oz123", "link": "https://stackoverflow.com/users/492620/oz123"}, "is_accepted": true, "score": 2, "last_activity_date": 1452112707, "creation_date": 1452112707, "answer_id": 34642315, "question_id": 34641958, "link": "https://stackoverflow.com/questions/34641958/insert-to-mongodb-collection-that-has-unique-key-with-python/34642315#34642315", "title": "Insert to MongoDB collection that has unique key with Python", "body": "<p>You could do the following:</p>\n\n<pre><code>for word in f.read().split():\n    try:\n        coll.insert( { \"word\": word } } )\n    except pymongo.errors.DuplicateKeyError:\n        continue\n</code></pre>\n\n<p>This will ignore errors.</p>\n\n<p>And also, did you drop the collection before trying?</p>\n"}, {"tags": [], "owner": {"reputation": 295, "user_id": 5415084, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5344f72c35ec5bd569c6ca541607dddb?s=128&d=identicon&r=PG&f=1", "display_name": "Leustad", "link": "https://stackoverflow.com/users/5415084/leustad"}, "is_accepted": false, "score": 0, "last_activity_date": 1452113497, "creation_date": 1452113497, "answer_id": 34642518, "question_id": 34641958, "link": "https://stackoverflow.com/questions/34641958/insert-to-mongodb-collection-that-has-unique-key-with-python/34642518#34642518", "title": "Insert to MongoDB collection that has unique key with Python", "body": "<p>I've just run your code and everything looks good except that you have an extra <code>}</code> at the last line. Delete that, and you don't have the drop any collection. Every <code>insert</code>, creates it's own batch of data, so there is no need for dropping the previous collection. </p>\n\n<p>Well, error msg indicates that the key <code>Harry</code> is already inserted and you are trying to insert again with the same key. Looks like this in not your entire code? </p>\n"}, {"comments": [{"owner": {"reputation": 291, "user_id": 1673121, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45c786cba12dc4aa4b28f674db9a1e7c?s=128&d=identicon&r=PG", "display_name": "Edik Mkoyan", "link": "https://stackoverflow.com/users/1673121/edik-mkoyan"}, "edited": false, "score": 0, "creation_date": 1452114035, "post_id": 34642583, "comment_id": 57031252, "body": "sorry but is upsert efficient in this case?"}, {"owner": {"reputation": 4906, "user_id": 1045904, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2T5e6.jpg?s=128&g=1", "display_name": "matehat", "link": "https://stackoverflow.com/users/1045904/matehat"}, "reply_to_user": {"reputation": 291, "user_id": 1673121, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45c786cba12dc4aa4b28f674db9a1e7c?s=128&d=identicon&r=PG", "display_name": "Edik Mkoyan", "link": "https://stackoverflow.com/users/1673121/edik-mkoyan"}, "edited": false, "score": 0, "creation_date": 1452115148, "post_id": 34642583, "comment_id": 57031817, "body": "It is since you have a unique index on the <code>word</code> column. If you want efficiency over the long list of words, I&#39;ll update my answer to provide a even quicker variant."}, {"owner": {"reputation": 4906, "user_id": 1045904, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2T5e6.jpg?s=128&g=1", "display_name": "matehat", "link": "https://stackoverflow.com/users/1045904/matehat"}, "reply_to_user": {"reputation": 291, "user_id": 1673121, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45c786cba12dc4aa4b28f674db9a1e7c?s=128&d=identicon&r=PG", "display_name": "Edik Mkoyan", "link": "https://stackoverflow.com/users/1673121/edik-mkoyan"}, "edited": false, "score": 0, "creation_date": 1452115549, "post_id": 34642583, "comment_id": 57032046, "body": ".. on the <code>word</code> *property, not column :)"}, {"owner": {"reputation": 291, "user_id": 1673121, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45c786cba12dc4aa4b28f674db9a1e7c?s=128&d=identicon&r=PG", "display_name": "Edik Mkoyan", "link": "https://stackoverflow.com/users/1673121/edik-mkoyan"}, "edited": false, "score": 0, "creation_date": 1452236612, "post_id": 34642583, "comment_id": 57087802, "body": "the second variant returns this  Traceback (most recent call last):   File &quot;main.py&quot;, line 31, in &lt;module&gt;     bulkop.execute()   File &quot;/Library/Python/2.7/site-packages/pymongo-3.2-py2.7-macosx-&zwnj;&#8203;10.9-intel.egg/pymon&zwnj;&#8203;go/bulk.py&quot;, line 628, in execute   File &quot;/Library/Python/2.7/site-packages/pymongo-3.2-py2.7-macosx-&zwnj;&#8203;10.9-intel.egg/pymon&zwnj;&#8203;go/bulk.py&quot;, line 450, in execute pymongo.errors.InvalidOperation: No operations to execute"}, {"owner": {"reputation": 4906, "user_id": 1045904, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2T5e6.jpg?s=128&g=1", "display_name": "matehat", "link": "https://stackoverflow.com/users/1045904/matehat"}, "reply_to_user": {"reputation": 291, "user_id": 1673121, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45c786cba12dc4aa4b28f674db9a1e7c?s=128&d=identicon&r=PG", "display_name": "Edik Mkoyan", "link": "https://stackoverflow.com/users/1673121/edik-mkoyan"}, "edited": false, "score": 0, "creation_date": 1452363878, "post_id": 34642583, "comment_id": 57140556, "body": "Does it return that every time or just after the first time?"}], "tags": [], "owner": {"reputation": 4906, "user_id": 1045904, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2T5e6.jpg?s=128&g=1", "display_name": "matehat", "link": "https://stackoverflow.com/users/1045904/matehat"}, "is_accepted": false, "score": 2, "last_activity_date": 1452115308, "last_edit_date": 1452115308, "creation_date": 1452113716, "answer_id": 34642583, "question_id": 34641958, "link": "https://stackoverflow.com/questions/34641958/insert-to-mongodb-collection-that-has-unique-key-with-python/34642583#34642583", "title": "Insert to MongoDB collection that has unique key with Python", "body": "<p>To avoid unnecessary exception handling, you could do an upsert:</p>\n\n<pre><code>from pymongo import MongoClient\n\ntasovshik = MongoClient()\ndb = tasovshik.tongler\ncoll = db.englishWords\n\nfor word in f.read().split():\n    coll.replace_one({'word': word}, {'word': word}, True)\n</code></pre>\n\n<p>The last argument specifies that MongoDB should insert the value if it does not already exist.</p>\n\n<p>Here's <a href=\"http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.replace_one\" rel=\"nofollow\">the documentation</a>.</p>\n\n<hr>\n\n<p><strong>EDIT</strong>: For even faster performances for a long list of words, you could do it in bulk like this:</p>\n\n<pre><code>from pymongo import MongoClient\n\ntasovshik = MongoClient()\ndb = tasovshik.tongler\ncoll = db.englishWords\n\nbulkop = coll.initialize_unordered_bulk_op()\nfor word in f.read().split():\n    bulkop.find({'word':word}).upsert()\n\nbulkop.execute()\n</code></pre>\n\n<p>Taken from <a href=\"http://api.mongodb.org/python/current/examples/bulk.html\" rel=\"nofollow\">bulk operations documentation</a></p>\n"}], "owner": {"reputation": 291, "user_id": 1673121, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/45c786cba12dc4aa4b28f674db9a1e7c?s=128&d=identicon&r=PG", "display_name": "Edik Mkoyan", "link": "https://stackoverflow.com/users/1673121/edik-mkoyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1245, "favorite_count": 0, "accepted_answer_id": 34642315, "answer_count": 3, "score": 1, "last_activity_date": 1452115308, "creation_date": 1452111401, "last_edit_date": 1452112125, "question_id": 34641958, "link": "https://stackoverflow.com/questions/34641958/insert-to-mongodb-collection-that-has-unique-key-with-python", "title": "Insert to MongoDB collection that has unique key with Python", "body": "<p>I have a collection called englishWords, and the unique index is the \"word\" field.\nWhen I do this</p>\n\n<pre><code>from pymongo import MongoClient\n\ntasovshik = MongoClient()\ndb = tasovshik.tongler\ncoll = db.englishWords\n\nf = open('book.txt')\nfor word in f.read().split():\n    coll.insert( { \"word\": word } } )\n</code></pre>\n\n<p>I get this error message <pre>pymongo.errors.DuplicateKeyError: E11000 duplicate key error index: tongler.englishWords.$word_1 dup key: { : \"Harry\" }</pre>, but it stops to insert when the first existing word is to be inserted.</p>\n\n<p>I do not want to implement the check of existence, I want to use the benefits of unique index with no problems. </p>\n"}, {"tags": ["python", "numpy", "text-files"], "comments": [{"owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "edited": false, "score": 2, "creation_date": 1452111709, "post_id": 34641952, "comment_id": 57030003, "body": "More info is needed: your input file (or part of it) and the full error"}, {"owner": {"reputation": 8490, "user_id": 674064, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bf2cf5a797565e548088053644704e7?s=128&d=identicon&r=PG", "display_name": "das-g", "link": "https://stackoverflow.com/users/674064/das-g"}, "edited": false, "score": 1, "creation_date": 1452111754, "post_id": 34641952, "comment_id": 57030024, "body": "On what line of your code does that error occur?"}, {"owner": {"reputation": 85, "user_id": 4887103, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5f520e876ddeda9c22c3ddab376fdde2?s=128&d=identicon&r=PG&f=1", "display_name": "aeengineer", "link": "https://stackoverflow.com/users/4887103/aeengineer"}, "edited": false, "score": 0, "creation_date": 1452111790, "post_id": 34641952, "comment_id": 57030045, "body": "the error occurs at the line mm=table[:,0], the textfile consists of six columns of numbers. I have added an image of the textfile"}, {"owner": {"reputation": 8490, "user_id": 674064, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bf2cf5a797565e548088053644704e7?s=128&d=identicon&r=PG", "display_name": "das-g", "link": "https://stackoverflow.com/users/674064/das-g"}, "edited": false, "score": 0, "creation_date": 1452111994, "post_id": 34641952, "comment_id": 57030169, "body": "Then <code>table</code> isn&#39;t 2-dimensional, so indexing it with two indices can&#39;t work. <code>print table</code> to see what it contains or <code>print table.shape</code> to see the <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.shape.html\" rel=\"nofollow noreferrer\">sizes of its dimensions</a>."}, {"owner": {"reputation": 4630, "user_id": 4316405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fE1Rf.jpg?s=128&g=1", "display_name": "N. Wouda", "link": "https://stackoverflow.com/users/4316405/n-wouda"}, "edited": false, "score": 0, "creation_date": 1452112004, "post_id": 34641952, "comment_id": 57030179, "body": "Not comma delimited, is it? Appears to be tab-delimited to me."}, {"owner": {"reputation": 85, "user_id": 4887103, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5f520e876ddeda9c22c3ddab376fdde2?s=128&d=identicon&r=PG&f=1", "display_name": "aeengineer", "link": "https://stackoverflow.com/users/4887103/aeengineer"}, "edited": false, "score": 0, "creation_date": 1452112259, "post_id": 34641952, "comment_id": 57030314, "body": "It is comma delimited, I printed out the table, I just get a huge list with al the elements from my textfile. Even the lines which start with a &quot;%&quot;, which shoud be deleted because I included comments = &quot;%&quot;."}, {"owner": {"reputation": 4630, "user_id": 4316405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fE1Rf.jpg?s=128&g=1", "display_name": "N. Wouda", "link": "https://stackoverflow.com/users/4316405/n-wouda"}, "edited": false, "score": 0, "creation_date": 1452112345, "post_id": 34641952, "comment_id": 57030357, "body": "@aeengineer if it is comma delimited, then where did the commas go?"}, {"owner": {"reputation": 85, "user_id": 4887103, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5f520e876ddeda9c22c3ddab376fdde2?s=128&d=identicon&r=PG&f=1", "display_name": "aeengineer", "link": "https://stackoverflow.com/users/4887103/aeengineer"}, "edited": false, "score": 0, "creation_date": 1452112381, "post_id": 34641952, "comment_id": 57030378, "body": "Haha, I am wondering that as well, I tried using your lines, but it gives me the same result"}], "answers": [{"tags": [], "owner": {"reputation": 23035, "user_id": 401828, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ea104f2947e580667d15b7403829b1ec?s=128&d=identicon&r=PG", "display_name": "heltonbiker", "link": "https://stackoverflow.com/users/401828/heltonbiker"}, "is_accepted": false, "score": 1, "last_activity_date": 1452112734, "last_edit_date": 1452112734, "creation_date": 1452112081, "answer_id": 34642145, "question_id": 34641952, "link": "https://stackoverflow.com/questions/34641952/reading-a-txt-file-in-python/34642145#34642145", "title": "Reading a txt file in Python", "body": "<p>Since the default for <code>genfromtxt</code> is to use (possibly multiple) whitespace as delimiter, you can have what you need with just:</p>\n\n<pre><code>table = numpy.genfromtxt('testfile.txt', comments=\"%\")\n\n# etc.\n</code></pre>\n\n<p>From the <a href=\"http://docs.scipy.org/doc/numpy-dev/user/basics.io.genfromtxt.html\" rel=\"nofollow\">docs</a>:</p>\n\n<blockquote>\n  <p>By default, genfromtxt assumes <code>delimiter=None</code>, meaning that the line is split along white spaces (including tabs) and that consecutive white spaces are considered as a single white space.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 23035, "user_id": 401828, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ea104f2947e580667d15b7403829b1ec?s=128&d=identicon&r=PG", "display_name": "heltonbiker", "link": "https://stackoverflow.com/users/401828/heltonbiker"}, "edited": false, "score": 0, "creation_date": 1452112189, "post_id": 34642156, "comment_id": 57030272, "body": "<code>comments</code> is indeed a better parameter than <code>skip_header</code> in this case :o)"}, {"owner": {"reputation": 85, "user_id": 4887103, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5f520e876ddeda9c22c3ddab376fdde2?s=128&d=identicon&r=PG&f=1", "display_name": "aeengineer", "link": "https://stackoverflow.com/users/4887103/aeengineer"}, "edited": false, "score": 0, "creation_date": 1452112647, "post_id": 34642156, "comment_id": 57030529, "body": "I managed to get it to work: table = np.genfromtxt(&quot;testfile.txt&quot;, dtype=&quot;float&quot;, delimiter=&quot; &quot;, comments=&quot;%&quot;)  mm = table[:,0] ppt = table[:,1] C4 = table[:,2] C5 = table[:,3] C4raw = table[:,4] C5raw = table[:,5] print mm"}, {"owner": {"reputation": 4630, "user_id": 4316405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fE1Rf.jpg?s=128&g=1", "display_name": "N. Wouda", "link": "https://stackoverflow.com/users/4316405/n-wouda"}, "reply_to_user": {"reputation": 85, "user_id": 4887103, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5f520e876ddeda9c22c3ddab376fdde2?s=128&d=identicon&r=PG&f=1", "display_name": "aeengineer", "link": "https://stackoverflow.com/users/4887103/aeengineer"}, "edited": false, "score": 0, "creation_date": 1452112742, "post_id": 34642156, "comment_id": 57030581, "body": "@aeengineer do you see those <code>\\t</code>? Your file is not comma delimited, it is tab-delimited. Use the second line in my answer above, that should work."}, {"owner": {"reputation": 23035, "user_id": 401828, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ea104f2947e580667d15b7403829b1ec?s=128&d=identicon&r=PG", "display_name": "heltonbiker", "link": "https://stackoverflow.com/users/401828/heltonbiker"}, "edited": false, "score": 1, "creation_date": 1452112802, "post_id": 34642156, "comment_id": 57030608, "body": "You can simply omit the <code>delimiter</code> parameter. From the docs:  <i>By default, genfromtxt assumes delimiter=None, meaning that the line is split along white spaces (including tabs) and that consecutive white spaces are considered as a single white space.</i> <a href=\"http://docs.scipy.org/doc/numpy-dev/user/basics.io.genfromtxt.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy-dev/user/basics.io.genfromtxt.html</a>"}, {"owner": {"reputation": 85, "user_id": 4887103, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5f520e876ddeda9c22c3ddab376fdde2?s=128&d=identicon&r=PG&f=1", "display_name": "aeengineer", "link": "https://stackoverflow.com/users/4887103/aeengineer"}, "edited": false, "score": 0, "creation_date": 1452113395, "post_id": 34642156, "comment_id": 57030911, "body": "Okay, I was a bit too enthusiastic. The first column works out fine, but for the other, I get arrays like this: [nan nan ... nan nan]"}, {"owner": {"reputation": 4630, "user_id": 4316405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fE1Rf.jpg?s=128&g=1", "display_name": "N. Wouda", "link": "https://stackoverflow.com/users/4316405/n-wouda"}, "reply_to_user": {"reputation": 85, "user_id": 4887103, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5f520e876ddeda9c22c3ddab376fdde2?s=128&d=identicon&r=PG&f=1", "display_name": "aeengineer", "link": "https://stackoverflow.com/users/4887103/aeengineer"}, "edited": false, "score": 0, "creation_date": 1452114004, "post_id": 34642156, "comment_id": 57031228, "body": "@aeengineer see my update!"}], "tags": [], "owner": {"reputation": 4630, "user_id": 4316405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fE1Rf.jpg?s=128&g=1", "display_name": "N. Wouda", "link": "https://stackoverflow.com/users/4316405/n-wouda"}, "is_accepted": false, "score": 1, "last_activity_date": 1452113985, "last_edit_date": 1452113985, "creation_date": 1452112112, "answer_id": 34642156, "question_id": 34641952, "link": "https://stackoverflow.com/questions/34641952/reading-a-txt-file-in-python/34642156#34642156", "title": "Reading a txt file in Python", "body": "<p>Your file is not comma delimited. Try this instead:</p>\n\n<p><code>table = np.genfromtxt(\"test1.txt\", dtype=\"float\", comments=\"%\")</code></p>\n\n<p>With the example you provided, this returns the correct values for me.</p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 4887103, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5f520e876ddeda9c22c3ddab376fdde2?s=128&d=identicon&r=PG&f=1", "display_name": "aeengineer", "link": "https://stackoverflow.com/users/4887103/aeengineer"}, "is_accepted": false, "score": 0, "last_activity_date": 1452113714, "creation_date": 1452113714, "answer_id": 34642582, "question_id": 34641952, "link": "https://stackoverflow.com/questions/34641952/reading-a-txt-file-in-python/34642582#34642582", "title": "Reading a txt file in Python", "body": "<p>Allright, after some trial and error I now solved the problem. \nThanks for helping me out, omitting the delimiter was indeed the final solution as suggested by heltonbiker.\nThis is my code:</p>\n\n<pre><code>#Read the textfile \"testfile.txt\" and place all columns in a separate array\ntable = np.genfromtxt(\"testfile.txt\", comments=\"%\")\n\nmm = table[:,0]\nppt = table[:,1]\nC4 = table[:,2]\nC5 = table[:,3]\nC4raw = table[:,4]\nC5raw = table[:,5]\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4887103, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5f520e876ddeda9c22c3ddab376fdde2?s=128&d=identicon&r=PG&f=1", "display_name": "aeengineer", "link": "https://stackoverflow.com/users/4887103/aeengineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "closed_date": 1452144974, "answer_count": 3, "score": -2, "last_activity_date": 1452116367, "creation_date": 1452111385, "last_edit_date": 1452116367, "question_id": 34641952, "link": "https://stackoverflow.com/questions/34641952/reading-a-txt-file-in-python", "closed_reason": "Not suitable for this site", "title": "Reading a txt file in Python", "body": "<p>I'm trying to read a text file named <code>testfile.txt</code>.\nI use the NumPy function <code>genfromtext</code>, however I get an <code>Index error: Too many indices</code>.</p>\n\n<p>The textfile consists of 6 columns of numbers:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>% Notes: 1A\n% Mach Number: \n% Barometric Pressure: 1036 bar\n% Load using MATLAB command: data = load('filename')\n% Columns: mm, p/pt, C4, C5, C4raw, C5raw\n     44.800000          0.781381        804.605260       1029.721933         -0.015945         -0.001723\n     56.800000          0.681254        699.772376       1027.182448         -0.022291         -0.001977\n     59.800000          0.627379        643.578986       1025.821491         -0.025692         -0.002113\n     62.800000          0.572096        586.082966       1024.447808         -0.029170         -0.002250\n     74.800000          0.440294        449.643875       1021.234840         -0.037422         -0.002571\n     79.800000          0.384134        391.777963       1019.900507         -0.040921         -0.002705\n     84.800000          0.336203        342.518031       1018.784082         -0.043898         -0.002816\n     96.800000          0.270190        274.847768       1017.238791         -0.047987         -0.002971\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>import numpy as np\ntable = np.genfromtxt(\"testfile.txt\",dtype = \"float\",delimiter = \",\",comments = \"%\")\n\nmm = table[:,0]\nppt = table[:,1]\nC4 = table[:,2]\nC5 = table[:,3]\nC4raw = table[:,4]\nC5raw = table[:,5]\n\nprint ppt\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "queue", "multiprocessing"], "answers": [{"tags": [], "owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "is_accepted": false, "score": 0, "last_activity_date": 1452111901, "last_edit_date": 1452111901, "creation_date": 1452111271, "answer_id": 34641919, "question_id": 34641807, "link": "https://stackoverflow.com/questions/34641807/why-does-pythons-multiprocessing-queue-have-a-buffer-and-a-pipe/34641919#34641919", "title": "Why does Python&#39;s multiprocessing Queue have a buffer and a Pipe", "body": "<p>A dequeue can only be in one process memory so using it to pass data between processes is impossible(...*)</p>\n\n<p>You could use just a <code>Pipe</code> but then you would need to protect it with locks, and I guess this is why a dequeue was introduced.</p>\n"}, {"tags": [], "owner": {"reputation": 11520, "user_id": 1794497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t6y5r.png?s=128&g=1", "display_name": "noxdafox", "link": "https://stackoverflow.com/users/1794497/noxdafox"}, "is_accepted": false, "score": 3, "last_activity_date": 1452328795, "last_edit_date": 1452328795, "creation_date": 1452185472, "answer_id": 34660777, "question_id": 34641807, "link": "https://stackoverflow.com/questions/34641807/why-does-pythons-multiprocessing-queue-have-a-buffer-and-a-pipe/34660777#34660777", "title": "Why does Python&#39;s multiprocessing Queue have a buffer and a Pipe", "body": "<p>The <code>multiprocessing.Queue</code> is a port of the standard <code>Queue</code> capable of running on multiple processes. Therefore it tries to reproduce the same behaviour.</p>\n\n<p>A <code>deque</code> is a list with fast insertion/extraction on both sides with, theoretically, infinite size. It's very well suited for representing a stack or a queue. It does not work across different processes though.</p>\n\n<p>A <code>Pipe</code> works more like a socket and allows to transfer data across processes. Pipes are Operating System objects and their implementation differs from OS to OS. Moreover, <strong>pipes have a limited size</strong>. If you fill a pipe your next call to <code>send</code> will block until the other side of it does not get drained.</p>\n\n<p>If you want to expose a <code>Queue</code> capable to work across multiple processes in a similar fashion than the standard one, you need the following features.</p>\n\n<ul>\n<li>A buffer capable of storing messages in arrival order which have not been consumed yet.</li>\n<li>A channel capable of transferring such messages across different processes.</li>\n<li>Atomic <code>put</code> and <code>get</code> methods able to leave the control to the User on when to block the program flow.</li>\n</ul>\n\n<p>The use of a <code>deque</code> a <code>Thread</code> and a <code>Pipe</code> is one of the simplest way to deliver these features but it's not the only one.</p>\n\n<p>I personally prefer the use of bare pipes to let processes communicate as it gives me more control on my application. </p>\n"}], "owner": {"reputation": 624, "user_id": 3545433, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Usphh.png?s=128&g=1", "display_name": "WraithWireless", "link": "https://stackoverflow.com/users/3545433/wraithwireless"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2578, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1452328795, "creation_date": 1452110800, "last_edit_date": 1452111135, "question_id": 34641807, "link": "https://stackoverflow.com/questions/34641807/why-does-pythons-multiprocessing-queue-have-a-buffer-and-a-pipe", "title": "Why does Python&#39;s multiprocessing Queue have a buffer and a Pipe", "body": "<p><strong>Context</strong></p>\n\n<p>I have been looking at the source code  <a href=\"http://code.metager.de/source/xref/python/pypy/lib-python/2.7/multiprocessing/queues.py\" rel=\"nofollow\">SEE HERE</a> for multiprocessing Queue <code>Python 2.7</code> and have some questions. </p>\n\n<ul>\n<li><p>A deque is used for a buffer and any items put on the Queue are appended to the deque but for get(), a pipe is used. </p></li>\n<li><p>We can see that during put, if the feeder thread has not been started yet it will start. </p></li>\n<li><p>The thread will pop objects off the thread and send them on the read side of the above pipe. </p></li>\n</ul>\n\n<p><strong>Questions</strong></p>\n\n<ul>\n<li><p>So, why use a deque and a pipe? </p></li>\n<li><p>Couldn't one just use a deque (or any other data structure with FIFO behavior) and synchronize push and pop? </p></li>\n<li><p>Likewise couldn't one also just use a Pipe, wrapping send and recv? </p></li>\n</ul>\n\n<p>Maybe there is something here that I am missing but the feeder thread popping items and putting them on the Pipe seems like overkill.</p>\n"}, {"tags": ["python", "bash", "zip", "ziparchive"], "comments": [{"owner": {"reputation": 3807, "user_id": 263989, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f23764d7a9cccf6a06c2fd40f0a5e59d?s=128&d=identicon&r=PG", "display_name": "fasouto", "link": "https://stackoverflow.com/users/263989/fasouto"}, "edited": false, "score": 0, "creation_date": 1452111013, "post_id": 34641694, "comment_id": 57029547, "body": "There&#39;s a <code>zipfile</code> module in python and lots of examples on how to use it"}], "answers": [{"tags": [], "owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "is_accepted": true, "score": 1, "last_activity_date": 1452111036, "creation_date": 1452111036, "answer_id": 34641855, "question_id": 34641694, "link": "https://stackoverflow.com/questions/34641694/zip-only-files-starting-with-mprm-into-mprm-zip-in-python/34641855#34641855", "title": "Zip only files starting with mprm* into mprm.zip in python", "body": "<p>Something like this should work: </p>\n\n<p>(worked on python34)</p>\n\n<pre><code>import glob\nfrom zipfile import ZipFile, ZIP_DEFLATED\n\nfiles = glob.glob('mprm*') #find your stuff\nz = ZipFile('mprm.zip', mode='w', compression=ZIP_DEFLATED) #change if needed\nfor f in files:\n    z.write(f, f)\nprint ('done')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 2103571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/710e1bf4a43bc83b2e2bbf20f34b4ce8?s=128&d=identicon&r=PG", "display_name": "user2103571", "link": "https://stackoverflow.com/users/2103571/user2103571"}, "is_accepted": false, "score": 1, "last_activity_date": 1452112082, "creation_date": 1452112082, "answer_id": 34642147, "question_id": 34641694, "link": "https://stackoverflow.com/questions/34641694/zip-only-files-starting-with-mprm-into-mprm-zip-in-python/34642147#34642147", "title": "Zip only files starting with mprm* into mprm.zip in python", "body": "<p>'</p>\n\n<p>You have a couple of ways in Python to get a list of files. The easiest is probably to use the 'glob' module, like this:</p>\n\n<pre><code>import glob\nfilelist = glob.glob('/home/tryeverylanguage/mprm*')\n</code></pre>\n\n<p>For details on glob, start an interactive Python session by typing 'python' at the command prompt and then typing <code>import glob</code>, then <code>help(glob)</code></p>\n\n<p>To get the files you list into a zip file, you'll probably want to use the 'zipfile' module. For details on this module, in your Python interactive session type <code>import zipfile</code> and then <code>help(zipfile)</code></p>\n\n<p>By the way, don't confuse the Python built-in 'zip' function with the command to create zip files -- it's completely unrelated.</p>\n\n<p>Hopefully, this will be enough to get you started. Have fun with Python!</p>\n"}], "owner": {"reputation": 321, "user_id": 3328802, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/1a2225e6cf6e2e1dd0341d638afcc913?s=128&d=identicon&r=PG&f=1", "display_name": "learnningprogramming", "link": "https://stackoverflow.com/users/3328802/learnningprogramming"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "closed_date": 1452193856, "accepted_answer_id": 34641855, "answer_count": 2, "score": -3, "last_activity_date": 1452112082, "creation_date": 1452110362, "question_id": 34641694, "link": "https://stackoverflow.com/questions/34641694/zip-only-files-starting-with-mprm-into-mprm-zip-in-python", "closed_reason": "Needs more focus", "title": "Zip only files starting with mprm* into mprm.zip in python", "body": "<p>I am trying to write a code to zip files starting with <code>mprm*</code> to <code>mprm.zip</code> file. My directory has 100 different files with all different types of extension. </p>\n\n<p>As in Bash we can do </p>\n\n<pre><code>zip -r pathtofile/mprm path2Destination/mprm*\n</code></pre>\n\n<p>is there something in python that can achieve same?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-2.7", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "is_accepted": true, "score": 4, "last_activity_date": 1618362476, "last_edit_date": 1618362476, "creation_date": 1452110476, "answer_id": 34641725, "question_id": 34641615, "link": "https://stackoverflow.com/questions/34641615/concatenate-multiple-rows-to-one-single-row-in-pandas/34641725#34641725", "title": "concatenate multiple rows to one single row in pandas", "body": "<p>I'd drop down to <code>numpy</code> via <code>values</code>, <code>reshape</code> it to one row, and then make a new frame from that:</p>\n<pre><code>&gt;&gt;&gt; pd.DataFrame(df.values.reshape(1, -1))\n          0          1         2    3         4          5          6     7   \\\n0  33.142857  52.714286  0.031429  114  0.102857  40.142857  66.857143  0.28   \n\n           8         9          10         11        12          13        14  \n0  172.714286  0.192857  41.714286  67.142857  0.001429  179.714286  0.191429  \n</code></pre>\n<p><code>.reshape(1, -1)</code> basically means &quot;reshape to 1 row and as many columns as necessary (-1)&quot;.</p>\n<p>The same applies when you want to create one column with many rows:</p>\n<pre><code>&gt;&gt;&gt; pd.DataFrame(df.values.reshape(-1, 1))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1452110635, "creation_date": 1452110635, "answer_id": 34641765, "question_id": 34641615, "link": "https://stackoverflow.com/questions/34641615/concatenate-multiple-rows-to-one-single-row-in-pandas/34641765#34641765", "title": "concatenate multiple rows to one single row in pandas", "body": "<pre><code>df = df.stack().to_frame().T\ndf.columns = list(range(len(df.columns)))\n</code></pre>\n\n<p>or</p>\n\n<pre><code>df = pd.DataFrame(df.stack().to_frame().values).T\n</code></pre>\n\n<p>will give you:</p>\n\n<pre><code>          0          1         2    3         4          5          6     7   \\\n0  33.142857  52.714286  0.031429  114  0.102857  40.142857  66.857143  0.28   \n\n           8         9          10         11        12          13        14  \n0  172.714286  0.192857  41.714286  67.142857  0.001429  179.714286  0.191429  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "is_accepted": false, "score": 0, "last_activity_date": 1452112596, "last_edit_date": 1452112596, "creation_date": 1452110749, "answer_id": 34641798, "question_id": 34641615, "link": "https://stackoverflow.com/questions/34641615/concatenate-multiple-rows-to-one-single-row-in-pandas/34641798#34641798", "title": "concatenate multiple rows to one single row in pandas", "body": "<p>If you don't really need a dataframe, you can use <code>numpy.array.flatten</code>:</p>\n\n<pre><code>&gt;&gt;&gt; d = pandas.DataFrame([[1, 2], [3, 4], [5, 6]])\n&gt;&gt;&gt; d\n   0  1\n0  1  2\n1  3  4\n2  5  6\n&gt;&gt;&gt; d.as_matrix().flatten()\narray([1, 2, 3, 4, 5, 6])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23806, "user_id": 4542359, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a6ea331ac684b52563d13e6ee44e03be?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Protopopov", "link": "https://stackoverflow.com/users/4542359/anton-protopopov"}, "is_accepted": false, "score": 2, "last_activity_date": 1452113013, "last_edit_date": 1452113013, "creation_date": 1452112240, "answer_id": 34642193, "question_id": 34641615, "link": "https://stackoverflow.com/questions/34641615/concatenate-multiple-rows-to-one-single-row-in-pandas/34642193#34642193", "title": "concatenate multiple rows to one single row in pandas", "body": "<p>You could use pandas <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.melt.html\" rel=\"nofollow\"><code>melt</code></a> then you won't need to call <code>pd.DataFrame</code> for that:</p>\n\n<pre><code>In [1470]: pd.melt(df, var_name='var', value_name='0').drop('var', axis=1).T\nOut[1470]: \n          0          1          2          3          4          5         6   \\\n0  33.142857  40.142857  41.714286  52.714286  66.857143  67.142857  0.031429   \n\n     7         8    9           10          11        12        13        14  \n0  0.28  0.001429  114  172.714286  179.714286  0.102857  0.192857  0.191429 \n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 3119875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/50a5974982127d24afc40a09ff90c678?s=128&d=identicon&r=PG&f=1", "display_name": "user3119875", "link": "https://stackoverflow.com/users/3119875/user3119875"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7714, "favorite_count": 1, "accepted_answer_id": 34641725, "answer_count": 4, "score": 1, "last_activity_date": 1618362476, "creation_date": 1452110033, "question_id": 34641615, "link": "https://stackoverflow.com/questions/34641615/concatenate-multiple-rows-to-one-single-row-in-pandas", "title": "concatenate multiple rows to one single row in pandas", "body": "<p>I have the following data (this is just a small part, there are 21 rows in actual data):</p>\n\n<pre><code>    wt_tmin    wt_tmax   wt_prec  wt_sol_rad     wt_ET   \n0  33.142857  52.714286  0.031429  114.000000  0.102857    \n1  40.142857  66.857143  0.280000  172.714286  0.192857\n2  41.714286  67.142857  0.001429  179.714286  0.191429         \n</code></pre>\n\n<p>I want to concatenate all the rows to one row like as follows: </p>\n\n<pre><code>0            1          2          3           4       5         6             7       8        9          11        12          13       14         15        \n33.142857  52.714286  0.031429  114.000000  0.102857 40.142857  66.857143  0.280000  172.714286  0.192857 41.714286  67.142857  0.001429  179.714286  0.191429\n</code></pre>\n\n<p>Here's what I tried to do: </p>\n\n<pre><code> # K is a pandas dataframe with the  data\n KE = pd.concat([K.icol(0), K.icol(1), K.icol(2), K.icol(3), K.icol(4)], axis=1).T\n</code></pre>\n\n<p>but this does not give me the desired result. Please help</p>\n"}, {"tags": ["python", "linux"], "comments": [{"owner": {"reputation": 150862, "user_id": 790387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/450fd2737dd0355700a574bd12842509?s=128&d=identicon&r=PG", "display_name": "Burhan Khalid", "link": "https://stackoverflow.com/users/790387/burhan-khalid"}, "edited": false, "score": 0, "creation_date": 1452110031, "post_id": 34641558, "comment_id": 57028911, "body": "You mentioned the problem is reading the configuration file - but you didn&#39;t post the code that reads the configuration file. Please edit your question and add the relevant bits."}, {"owner": {"reputation": 8490, "user_id": 674064, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bf2cf5a797565e548088053644704e7?s=128&d=identicon&r=PG", "display_name": "das-g", "link": "https://stackoverflow.com/users/674064/das-g"}, "edited": false, "score": 2, "creation_date": 1452110910, "post_id": 34641558, "comment_id": 57029486, "body": "Please provide a <a href=\"http://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>, or, even better, learn <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">how to debug small programs</a>."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452111275, "post_id": 34641558, "comment_id": 57029726, "body": "Do the files actually end with <code>.HPL</code> on Windows, instead of <code>.hpl</code>?"}, {"owner": {"reputation": 97, "user_id": 5526427, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c0061bdfeb3e2cebac275a9e85040c96?s=128&d=identicon&r=PG&f=1", "display_name": "zemone", "link": "https://stackoverflow.com/users/5526427/zemone"}, "edited": false, "score": 0, "creation_date": 1452111704, "post_id": 34641558, "comment_id": 57029994, "body": "Sorry, new to stack overflow and python. Just edited code to show how I&#39;m reading the config file. I think it reads the config file fine, since SRC in the config file is correctly printed out later in the code.   Example: src = /home/data/ and file name in that folder = User1_2015.hpl. Code outputs: src = /home/data , filenames = []  The files end with .hpl (lowercase) on both systems"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452112611, "post_id": 34641558, "comment_id": 57030508, "body": "In listFiles(), uncomment the two print statements so you can see the directories and files as it reads them.  Also, add an <code>else:</code> branch after the <code>if</code> with a print statement something like <code>print(&#39;filename %s did not end with extension %s&#39; % (fname.lower(), ext))</code>.  With that debugging output, I bet you&#39;ll see the problem right away."}, {"owner": {"reputation": 97, "user_id": 5526427, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c0061bdfeb3e2cebac275a9e85040c96?s=128&d=identicon&r=PG&f=1", "display_name": "zemone", "link": "https://stackoverflow.com/users/5526427/zemone"}, "edited": false, "score": 0, "creation_date": 1452113014, "post_id": 34641558, "comment_id": 57030723, "body": "They&#39;re commented out in this case because the code never gets that far (never reaches those print commands).  As far as I can tell, the code reaches:  for dirName, subdirList, fileList in os.walk(src, topdown=True):  line and then stops"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452113463, "post_id": 34641558, "comment_id": 57030943, "body": "If it gets no results from the os.walk() call, then something is amiss.  Do you have permission to read the <code>&#47;home&#47;data</code> directory?"}, {"owner": {"reputation": 97, "user_id": 5526427, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c0061bdfeb3e2cebac275a9e85040c96?s=128&d=identicon&r=PG&f=1", "display_name": "zemone", "link": "https://stackoverflow.com/users/5526427/zemone"}, "edited": false, "score": 0, "creation_date": 1452114091, "post_id": 34641558, "comment_id": 57031294, "body": "Yup. Permissions aren&#39;t an issue."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1452114373, "post_id": 34641558, "comment_id": 57031418, "body": "Print <code>src</code> at the top of <code>listFiles()</code>, just as a basic sanity check.  Put quotes around it to make sure there aren&#39;t trailing spaces or some such."}, {"owner": {"reputation": 97, "user_id": 5526427, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c0061bdfeb3e2cebac275a9e85040c96?s=128&d=identicon&r=PG&f=1", "display_name": "zemone", "link": "https://stackoverflow.com/users/5526427/zemone"}, "edited": false, "score": 0, "creation_date": 1452185768, "post_id": 34641558, "comment_id": 57066995, "body": "Print src outputs /home/data/{note} Does anyone know what that means? Maybe it&#39;s the problem. By {Note} I mean it looks like a tiny musical note followed immediately after the /.  The config file only has src = /home/data/ (with no spaces after it) so I&#39;m not sure where this is coming from."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 3760859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b236a61c3180b2d30b43e6e0599164cb?s=128&d=identicon&r=PG&f=1", "display_name": "EmmanuelM", "link": "https://stackoverflow.com/users/3760859/emmanuelm"}, "is_accepted": false, "score": 0, "last_activity_date": 1452114393, "last_edit_date": 1452114393, "creation_date": 1452110749, "answer_id": 34641797, "question_id": 34641558, "link": "https://stackoverflow.com/questions/34641558/python-code-works-on-win-not-on-linux/34641797#34641797", "title": "Python code works on Win, not on Linux", "body": "<p>You can try:</p>\n\n<pre><code>import os\nfn = os.path.realpath(fn)\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 5526427, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c0061bdfeb3e2cebac275a9e85040c96?s=128&d=identicon&r=PG&f=1", "display_name": "zemone", "link": "https://stackoverflow.com/users/5526427/zemone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1452114393, "creation_date": 1452109799, "last_edit_date": 1452111593, "question_id": 34641558, "link": "https://stackoverflow.com/questions/34641558/python-code-works-on-win-not-on-linux", "title": "Python code works on Win, not on Linux", "body": "<p>I've got a python code to read a data file that runs perfectly fine on Windows. Sorry if this is easy - I'm new to Python. </p>\n\n<p>Now I'm trying to run it on Linux and it won't work. I changed all paths accordingly and the problem seems to be after reading variables in the configuration text file, when it tries to list the file names. </p>\n\n<p>Here's segments of the code and the result: </p>\n\n<pre><code>{This is called to read the configuration file at the beginning of the code. It runs and seems to work fine:}\n def readConfig(fn):\n # dynamically create the dictionary from the config file\n # check for duplication  \n\n    config = {}\n    file = open(fn,'r')\n    lines = file.readlines()\n    for x in lines:\n#        print x ,re.search(\"=\",x)\n        if re.search('=',x) &gt; 0:\n#           print x\n            parts = x.split(\"=\")\n            key = parts[0]\n            parts = parts[1].split(\" \")\n            parts = parts[0].split(\"\\n\")\n            value = parts[0]\n            config[key]=value   #this appends, if key exists it will take \n    print ''\n    print config\n    print ''\n    file.close()\n    return config\n\n\n\n{Here's where it tries to list the files in the source directory. Source directory src is defined in the configuration file:}\n# 5. scan in the src directory and process those files\n    src = halo1Config['SRC']\n    files = listFiles(src,\".hpl\")\n    print src\n    print files\n\n\n\n{This is what Listfiles does:}\ndef listFiles(src,ext):\n# get list of files from directory src and subdir below with ext\n# ext =\"\" is okay\n    fns=[]\n    for dirName, subdirList, fileList in os.walk(src, topdown=True):\n#    print('Found directory: %s' % dirName)\n        for fname in fileList:\n#        print('\\t%s' % fname)\n            if fname.lower().endswith(ext):\n                fn = os.path.join(dirName,fname)\n                fns.append(fn)\n    return fns\n</code></pre>\n\n<p>In this code, SRC = /home/data/, and inside this folder there are files with names like User1_2015.hpl - these are the data files (text). The code outputs src correctly, but it outputs [] for files, even though there is a long list of files in the src directory. Hence the problem must be with ListFiles, but I can't see what's wrong with it... and it works fine when I use it on Windows! </p>\n\n<p>Does anyone know what I'm doing wrong? </p>\n\n<p>Thanks! </p>\n"}, {"tags": ["python", "interface", "tkinter"], "answers": [{"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": false, "score": 1, "last_activity_date": 1452111286, "creation_date": 1452111286, "answer_id": 34641926, "question_id": 34641515, "link": "https://stackoverflow.com/questions/34641515/resizing-image-when-projecting-into-a-tv-my-python-tkinter-code/34641926#34641926", "title": "Resizing image when projecting into a TV my python tkinter code", "body": "<p>Images are a specific size. If you want the image to grow or shrink you'll have to manually adjust the image yourself when the window resizes. Tkinter  can only halve or double the size of an image. For anything fancier you'll need something like PIL or pillow. </p>\n\n<p>Since you know the maximum size is (I'm guessing) an HD display, you should probably start with an image that is 1920x1080 and then scale it down when you aren't projecting. </p>\n"}], "owner": {"reputation": 972, "user_id": 1760693, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8c3def23cfa2cf7e3fc2ccc2a4189c1b?s=128&d=identicon&r=PG", "display_name": "Andrea Diaz", "link": "https://stackoverflow.com/users/1760693/andrea-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452111286, "creation_date": 1452109651, "question_id": 34641515, "link": "https://stackoverflow.com/questions/34641515/resizing-image-when-projecting-into-a-tv-my-python-tkinter-code", "title": "Resizing image when projecting into a TV my python tkinter code", "body": "<p>I am trying to project my laptop screen into a 52\" TV. I need the background image to fill the entire screen (independent of the size of the TV in which I am projecting). The window is able to resize when projecting, but the image does not. What I am missing ? </p>\n\n<p>I am using python and tkinter</p>\n\n<pre><code>from Tkinter import *\n\nroot = Tk()\n\nphoto = PhotoImage(file= r\"a.gif\")\nw = Label(root, text=\"Hello, world!\")\nroot.overrideredirect(True)\nroot.geometry(\"{0}x{1}+0+0\".format(root.winfo_screenwidth(), root.winfo_screenheight()))\nroot.focus_set()  # &lt;-- move focus to this widget\nroot.bind(\"&lt;Escape&gt;\", lambda e: e.widget.quit())\n\ncanvas = Canvas(root) #, width=root.winfo_screenwidth(), height=root.winfo_screenheight())\ncanvas.pack(side='top', fill='both', expand='True') \ncanvas.create_image(0, 0, image=photo, anchor='nw')\n\nw.pack()\n\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "svn", "pip"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1452109643, "post_id": 34641417, "comment_id": 57028676, "body": "What does this have to do with Django?"}, {"owner": {"reputation": 53, "user_id": 4845812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ilBAKzSn-VE/AAAAAAAAAAI/AAAAAAAAHEc/_gFKZ8ZZ6mk/photo.jpg?sz=128", "display_name": "Florek Gesina", "link": "https://stackoverflow.com/users/4845812/florek-gesina"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1452110132, "post_id": 34641417, "comment_id": 57028972, "body": "Right, my mistake. I&#39;m just using it in Django environment."}, {"owner": {"reputation": 26602, "user_id": 761095, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6qOuP.png?s=128&g=1", "display_name": "bahrep", "link": "https://stackoverflow.com/users/761095/bahrep"}, "edited": false, "score": 0, "creation_date": 1452113942, "post_id": 34641417, "comment_id": 57031191, "body": "FYI: SVN 1.6 is very old, outdated and no longer supported. Upgrade to SVN 1.9 or at least 1.8."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4845812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ilBAKzSn-VE/AAAAAAAAAAI/AAAAAAAAHEc/_gFKZ8ZZ6mk/photo.jpg?sz=128", "display_name": "Florek Gesina", "link": "https://stackoverflow.com/users/4845812/florek-gesina"}, "edited": false, "score": 0, "creation_date": 1452110523, "post_id": 34641647, "comment_id": 57029233, "body": "Locally or on the server side?"}, {"owner": {"reputation": 3807, "user_id": 263989, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f23764d7a9cccf6a06c2fd40f0a5e59d?s=128&d=identicon&r=PG", "display_name": "fasouto", "link": "https://stackoverflow.com/users/263989/fasouto"}, "reply_to_user": {"reputation": 53, "user_id": 4845812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ilBAKzSn-VE/AAAAAAAAAAI/AAAAAAAAHEc/_gFKZ8ZZ6mk/photo.jpg?sz=128", "display_name": "Florek Gesina", "link": "https://stackoverflow.com/users/4845812/florek-gesina"}, "edited": false, "score": 0, "creation_date": 1452110584, "post_id": 34641647, "comment_id": 57029266, "body": "Depends where you are executing the code, I guess locally."}, {"owner": {"reputation": 53, "user_id": 4845812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ilBAKzSn-VE/AAAAAAAAAAI/AAAAAAAAHEc/_gFKZ8ZZ6mk/photo.jpg?sz=128", "display_name": "Florek Gesina", "link": "https://stackoverflow.com/users/4845812/florek-gesina"}, "edited": false, "score": 2, "creation_date": 1452111261, "post_id": 34641647, "comment_id": 57029721, "body": "You were right. I didin&#39;t have a subversion at local."}], "tags": [], "owner": {"reputation": 3807, "user_id": 263989, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f23764d7a9cccf6a06c2fd40f0a5e59d?s=128&d=identicon&r=PG", "display_name": "fasouto", "link": "https://stackoverflow.com/users/263989/fasouto"}, "is_accepted": true, "score": 6, "last_activity_date": 1452110147, "creation_date": 1452110147, "answer_id": 34641647, "question_id": 34641417, "link": "https://stackoverflow.com/questions/34641417/pip-install-from-svn-error-2/34641647#34641647", "title": "pip install from SVN [error 2]", "body": "<p>Seems like you don't have subversion installed or is misconfigured. </p>\n\n<p>You can try <code>svn --version</code> in the terminal to check if you have subversion installed.</p>\n\n<p>If you don't have it installed you can <a href=\"https://subversion.apache.org/packages.html\" rel=\"noreferrer\">install Subversion</a> via apt, brew or whatever package manager you use and try again.</p>\n"}], "owner": {"reputation": 53, "user_id": 4845812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ilBAKzSn-VE/AAAAAAAAAAI/AAAAAAAAHEc/_gFKZ8ZZ6mk/photo.jpg?sz=128", "display_name": "Florek Gesina", "link": "https://stackoverflow.com/users/4845812/florek-gesina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2164, "favorite_count": 0, "accepted_answer_id": 34641647, "answer_count": 1, "score": 5, "last_activity_date": 1452110147, "creation_date": 1452109243, "last_edit_date": 1452109999, "question_id": 34641417, "link": "https://stackoverflow.com/questions/34641417/pip-install-from-svn-error-2", "title": "pip install from SVN [error 2]", "body": "<p>Im trying to install my package via pip from a SVN repository.\nVersion of subversion server is 1.6.11.</p>\n\n<p>I'm using the command below:</p>\n\n<pre><code>pip install -e svn+http://svn.mysite.com/svn/project/project#egg=project\n\n\nError [Error 2] Can not find the file while executing command svn checkout -q http://svn.mysite.com/svn/project/project/\nCan not find command 'svn'\n</code></pre>\n\n<p>How can I solve this problem?</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "bit-representation"], "comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1452109448, "post_id": 34641374, "comment_id": 57028529, "body": "If you want more accuracy than floats can provide, consider using the <code>decimal</code> or <code>fraction</code> modules."}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 7, "creation_date": 1452109500, "post_id": 34641374, "comment_id": 57028568, "body": "No, you <i>don&#39;t</i> get the &quot;proper&quot; result from the <code>round</code> operation! It might <i>look</i> like <code>12510.4225</code> when printed, but the value that Python&#39;s storing is actually <code>12510.422500000000582076609134674072265625</code>. Now you need to ask yourself whether that&#39;s really any better for your purposes than the original result of <code>12510.422499999998763087205588817596435546875</code>. (And the answer is &#39;probably not&#39;.)"}, {"owner": {"reputation": 2553, "user_id": 1903784, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a2eda4e1496650b3cebc58c25f3eae9c?s=128&d=identicon&r=PG", "display_name": "gerosalesc", "link": "https://stackoverflow.com/users/1903784/gerosalesc"}, "reply_to_user": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1452109579, "post_id": 34641374, "comment_id": 57028623, "body": "@Kevin I need those values to be supported by <i>Numpy</i> for some matrix operations, and I think decimal/fraction are still not supported"}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1452109604, "post_id": 34641374, "comment_id": 57028642, "body": "(And for more ranting along the lines above, see <a href=\"http://stackoverflow.com/a/22155830/270986.\">stackoverflow.com/a/22155830/270986.</a>)"}, {"owner": {"reputation": 1887, "user_id": 747654, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3ac73c99a3aa3ec0c423849fae6c0b26?s=128&d=identicon&r=PG", "display_name": "William", "link": "https://stackoverflow.com/users/747654/william"}, "edited": false, "score": 1, "creation_date": 1452109644, "post_id": 34641374, "comment_id": 57028678, "body": "A possible solution is to move the <code>.</code> to the right until you have an integer (in your example, you will move 2 positions to get <code>11185</code>) and then you can multiply integers, and will manually add a <code>.</code> in the correct place (which will be 2+2=4 positions to the left)"}, {"owner": {"reputation": 1704, "user_id": 4241180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y8rWG.png?s=128&g=1", "display_name": "vrs", "link": "https://stackoverflow.com/users/4241180/vrs"}, "edited": false, "score": 0, "creation_date": 1452109648, "post_id": 34641374, "comment_id": 57028680, "body": "Sometimes using <code>decimal</code> module may be a much better idea. Check out <a href=\"https://docs.python.org/3/library/decimal.html\" rel=\"nofollow noreferrer\">this</a> to decide if it fits your goal."}, {"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "reply_to_user": {"reputation": 1887, "user_id": 747654, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3ac73c99a3aa3ec0c423849fae6c0b26?s=128&d=identicon&r=PG", "display_name": "William", "link": "https://stackoverflow.com/users/747654/william"}, "edited": false, "score": 0, "creation_date": 1452114937, "post_id": 34641374, "comment_id": 57031706, "body": "@wil93 Generally, if you&#39;re doing calculations with floating point numbers (like with matrices), they&#39;re not really interchangeable with integers because many math operations (eg. division, square root) will require floats to represent the result.  Moving the decimal doesn&#39;t really change the inaccuracy, it just changes which parts of the float are more significant."}], "answers": [{"comments": [{"owner": {"reputation": 2553, "user_id": 1903784, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a2eda4e1496650b3cebc58c25f3eae9c?s=128&d=identicon&r=PG", "display_name": "gerosalesc", "link": "https://stackoverflow.com/users/1903784/gerosalesc"}, "edited": false, "score": 0, "creation_date": 1452110083, "post_id": 34641550, "comment_id": 57028943, "body": "Is not actually a displaying human-readable values, I use those values for calculations but for this case I would like more accuracy, and i would like to use Decimals but Numpy doesn&#39;t support this type as long as i know."}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "reply_to_user": {"reputation": 2553, "user_id": 1903784, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a2eda4e1496650b3cebc58c25f3eae9c?s=128&d=identicon&r=PG", "display_name": "gerosalesc", "link": "https://stackoverflow.com/users/1903784/gerosalesc"}, "edited": false, "score": 2, "creation_date": 1452110419, "post_id": 34641550, "comment_id": 57029162, "body": "@GermanRosales: Your original pre-rounded answer is already accurate to less than 0.7 ulps. If that level of accuracy isn&#39;t good enough (why not?) then float64 isn&#39;t going to meet your needs. But you should figure out whether you really do need that level of accuracy."}, {"owner": {"reputation": 2553, "user_id": 1903784, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a2eda4e1496650b3cebc58c25f3eae9c?s=128&d=identicon&r=PG", "display_name": "gerosalesc", "link": "https://stackoverflow.com/users/1903784/gerosalesc"}, "reply_to_user": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1452110727, "post_id": 34641550, "comment_id": 57029355, "body": "@MarkDickinson I am afraid float64 doesn&#39;t fit my needs, but I can&#39;t do matrix inverse operation with float128 (I am getting an error with numpy&#39;s inverse operation)"}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "reply_to_user": {"reputation": 2553, "user_id": 1903784, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a2eda4e1496650b3cebc58c25f3eae9c?s=128&d=identicon&r=PG", "display_name": "gerosalesc", "link": "https://stackoverflow.com/users/1903784/gerosalesc"}, "edited": false, "score": 1, "creation_date": 1452111368, "post_id": 34641550, "comment_id": 57029775, "body": "@GermanRosales: Hmm, then it sounds like you&#39;ve got a hard problem to solve. At any rate, <code>round</code> isn&#39;t going to help you: I think there are already a couple of good answers to your posted question here. Maybe you should ask a new question about high-precision matrix inversion? (Or maybe there are numerical reformulations of your problem that would avoid the need for the high precision in the first place.)"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1452111470, "post_id": 34641550, "comment_id": 57029835, "body": "In my experience, almost all of the time when guys think they need higher precision arithmetic they actually don&#39;t.  They just need smarter maths"}, {"owner": {"reputation": 2553, "user_id": 1903784, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a2eda4e1496650b3cebc58c25f3eae9c?s=128&d=identicon&r=PG", "display_name": "gerosalesc", "link": "https://stackoverflow.com/users/1903784/gerosalesc"}, "reply_to_user": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1452111620, "post_id": 34641550, "comment_id": 57029943, "body": "@MarkDickinson Yep I will open a new question regarding the problem with the inverse matrix function and the float128 type and a possible solution for matrix inversion outside numpy, thanks"}, {"owner": {"reputation": 2553, "user_id": 1903784, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a2eda4e1496650b3cebc58c25f3eae9c?s=128&d=identicon&r=PG", "display_name": "gerosalesc", "link": "https://stackoverflow.com/users/1903784/gerosalesc"}, "edited": false, "score": 0, "creation_date": 1452111772, "post_id": 34641550, "comment_id": 57030036, "body": "@wim I am not the math guy in this project, but you may still be right"}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "reply_to_user": {"reputation": 2553, "user_id": 1903784, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a2eda4e1496650b3cebc58c25f3eae9c?s=128&d=identicon&r=PG", "display_name": "gerosalesc", "link": "https://stackoverflow.com/users/1903784/gerosalesc"}, "edited": false, "score": 0, "creation_date": 1452118883, "post_id": 34641550, "comment_id": 57033781, "body": "@GermanRosales <i>&quot;I am afraid float64 doesn&#39;t fit my needs, but I can&#39;t do matrix inverse operation with float128 (I am getting an error with numpy&#39;s inverse operation)&quot;</i> - this is the question you should be asking"}, {"owner": {"reputation": 2553, "user_id": 1903784, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a2eda4e1496650b3cebc58c25f3eae9c?s=128&d=identicon&r=PG", "display_name": "gerosalesc", "link": "https://stackoverflow.com/users/1903784/gerosalesc"}, "reply_to_user": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1452121022, "post_id": 34641550, "comment_id": 57034716, "body": "@ali_m Yep i figured out thanks to comments and answers, so I will be asking again"}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 5, "last_activity_date": 1452109780, "creation_date": 1452109780, "answer_id": 34641550, "question_id": 34641374, "link": "https://stackoverflow.com/questions/34641374/rounding-floats-with-representation-error-to-the-closest-and-correct-result/34641550#34641550", "title": "Rounding floats with representation error to the closest and correct result", "body": "<p>The real issue here is to identify how the representation error could start to be a problem in the first place.  </p>\n\n<p>You should not be using the representation for human-readable printing of floats, you should be using for example <code>str.format</code> or some other presentation method.  </p>\n\n<p>Keep your numbers as numbers for all calculations (whether you do that with floats or Decimals or whatever...) and only round or truncate things at presentation.  </p>\n"}, {"tags": [], "owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "is_accepted": true, "score": 6, "last_activity_date": 1452111367, "last_edit_date": 1452111367, "creation_date": 1452110279, "answer_id": 34641678, "question_id": 34641374, "link": "https://stackoverflow.com/questions/34641374/rounding-floats-with-representation-error-to-the-closest-and-correct-result/34641678#34641678", "title": "Rounding floats with representation error to the closest and correct result", "body": "<p>Even if you round the number, the decimal still won't be <em>exactly</em> what you expect it to be.  Python may display only the most significant bits, but the underlying decimal inaccuracy is still there. </p>\n\n<p>The python docs <a href=\"https://docs.python.org/3/tutorial/floatingpoint.html#floating-point-arithmetic-issues-and-limitations\" rel=\"nofollow\">devote a section to it</a></p>\n\n<blockquote>\n  <p>Many users are not aware of the approximation because of the way\n  values are displayed. Python only prints a decimal approximation to\n  the true decimal value of the binary approximation stored by the\n  machine. On most machines, if Python were to print the true decimal\n  value of the binary approximation stored for 0.1, it would have to\n  display</p>\n\n<pre><code>&gt;&gt;&gt; 0.1\n0.1000000000000000055511151231257827021181583404541015625\n</code></pre>\n  \n  <p>That is more digits than most people find useful, so Python keeps the\n  number of digits manageable by displaying a rounded value instead</p>\n\n<pre><code>&gt;&gt;&gt; 1 / 10\n0.1\n</code></pre>\n</blockquote>\n\n<p>For most use cases, the inaccuracy can safely be ignored.  If you are\ndealing with extremely small or extremely large numbers or need\naccuracy out to many decimal places, you can use the <a href=\"https://docs.python.org/2/library/decimal.html#module-decimal\" rel=\"nofollow\">decimal</a>\nlibrary</p>\n\n<pre><code> &gt;&gt;&gt; Decimal('111.85') * Decimal('111.85')\n Decimal('12510.4225')\n</code></pre>\n"}], "owner": {"reputation": 2553, "user_id": 1903784, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a2eda4e1496650b3cebc58c25f3eae9c?s=128&d=identicon&r=PG", "display_name": "gerosalesc", "link": "https://stackoverflow.com/users/1903784/gerosalesc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 1, "accepted_answer_id": 34641678, "answer_count": 2, "score": 7, "last_activity_date": 1452111367, "creation_date": 1452109089, "last_edit_date": 1452110294, "question_id": 34641374, "link": "https://stackoverflow.com/questions/34641374/rounding-floats-with-representation-error-to-the-closest-and-correct-result", "title": "Rounding floats with representation error to the closest and correct result", "body": "<p>I have a situation when the classic <a href=\"https://docs.python.org/3/tutorial/floatingpoint.html#representation-error\" rel=\"nofollow\">representation error</a> in Python started to be a problem: I need them to be used for Matrix operations in Numpy and the <strong>decimal</strong> type is not supported yet. </p>\n\n<p>You all know that if I do <code>111.85 * 111.85</code> I will get <code>12510.422499999999</code> but if I <code>round(12510.422499999999, 4)</code> I can get the proper result which is of course <code>12510.4225</code>.</p>\n\n<p>But the actual questions are: </p>\n\n<ul>\n<li>Is this round stuff a good idea and a good practice?</li>\n<li>Will this work for all cases? sometimes the decimals position where the ..999 decimals could be more</li>\n<li>And finally, How to get the appropriate number of decimal positions to use with the round for all possible values?</li>\n</ul>\n"}, {"tags": ["python", "python-3.x", "coroutine", "python-asyncio"], "answers": [{"comments": [{"owner": {"reputation": 722, "user_id": 211081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d960efea0acdeefdfde2df97d923c879?s=128&d=identicon&r=PG", "display_name": "PsyKzz", "link": "https://stackoverflow.com/users/211081/psykzz"}, "edited": false, "score": 0, "creation_date": 1452166969, "post_id": 34647675, "comment_id": 57053614, "body": "Thanks <code>asyncio.ensure_future(api.say(..)) </code> fixed the issue. My client didn&#39;t handle the callbacks as coroutines so <code>.ensure_future(...)</code> sorted it out."}], "tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": true, "score": 1, "last_activity_date": 1452142821, "creation_date": 1452142821, "answer_id": 34647675, "question_id": 34641341, "link": "https://stackoverflow.com/questions/34641341/running-asyncio-coroutine-out-of-the-event-flow/34647675#34647675", "title": "Running asyncio coroutine out of the event flow", "body": "<p>The Client API might handle callbacks that are coroutines too i.e., you can convert <code>print_all()</code> into a coroutine (prepend <code>async</code> before <code>def</code>, add <code>await</code> before <code>api.say()</code>).</p>\n\n<p>Otherwise, you could call <code>asyncio.ensure_future(api.say(..))</code> to schedule the coroutine. It assumes that <code>loop.run_until_complete(api.run())</code> won't return before <code>api.say()</code> is done i.e., there is <code>loop.run_forever()</code> equivalent in your program or you wait for all tasks -- either collected explicitly or implicitly (<code>asyncio.Task.all_tasks()</code>).</p>\n"}], "owner": {"reputation": 722, "user_id": 211081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d960efea0acdeefdfde2df97d923c879?s=128&d=identicon&r=PG", "display_name": "PsyKzz", "link": "https://stackoverflow.com/users/211081/psykzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 34647675, "answer_count": 1, "score": 1, "last_activity_date": 1452142821, "creation_date": 1452108996, "question_id": 34641341, "link": "https://stackoverflow.com/questions/34641341/running-asyncio-coroutine-out-of-the-event-flow", "title": "Running asyncio coroutine out of the event flow", "body": "<p>I'm having issues where my call to <code>api.say()</code> fails. I understand its a coroutine and needs to be yielded from but is that valid if my <code>print_all</code> is a standard function.</p>\n\n<p>What is the correct way to structure this example?</p>\n\n<p>Please assume that the Client isn't changeable, only the code in my example.</p>\n\n<pre><code>from .client import Client\nimport asyncio\n\napi = Client()\nlogin = ('', '')\n\ndef print_all(b=None, m=None):\n    print(\"Buffer!\", b)\n    print(\"Message\", m)\n\n    if b and m:\n        if b.name == 'bat':\n            print(\"-sending to\", b)\n            api.say(b, \"Hey yo.\"):    # &lt;----\n\n\ndef main():\n    api.login(*login)\n    api.register_message_callback(print_all)\n    api.register_state_callback(print_all)\n\n    loop = asyncio.get_event_loop()\n    loop.run_until_complete(api.run())\n    loop.close()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python", "selenium", "web-scraping", "beautifulsoup", "phantomjs"], "answers": [{"tags": [], "owner": {"reputation": 883, "user_id": 5683455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/0c6e2a8763391f35c9e6b1742cfde4ff?s=128&d=identicon&r=PG&f=1", "display_name": "PoweredByCoffee", "link": "https://stackoverflow.com/users/5683455/poweredbycoffee"}, "is_accepted": false, "score": 0, "last_activity_date": 1452114181, "creation_date": 1452114181, "answer_id": 34642698, "question_id": 34641304, "link": "https://stackoverflow.com/questions/34641304/python-phantomjs-beautifulsoup-scraping-java-whats-missing-here/34642698#34642698", "title": "Python PhantomJS &amp; Beautifulsoup Scraping Java - What&#39;s Missing Here?", "body": "<p>Turns out nothing wrong with the code.</p>\n\n<p>Malformed HTML on the site was causing problems with lxml resulting in no results being read.</p>\n"}], "owner": {"reputation": 883, "user_id": 5683455, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/0c6e2a8763391f35c9e6b1742cfde4ff?s=128&d=identicon&r=PG&f=1", "display_name": "PoweredByCoffee", "link": "https://stackoverflow.com/users/5683455/poweredbycoffee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452114181, "creation_date": 1452108863, "last_edit_date": 1452110331, "question_id": 34641304, "link": "https://stackoverflow.com/questions/34641304/python-phantomjs-beautifulsoup-scraping-java-whats-missing-here", "title": "Python PhantomJS &amp; Beautifulsoup Scraping Java - What&#39;s Missing Here?", "body": "<p>Scraping static pages works fine like this:</p>\n\n<pre><code>soup = BeautifulSoup(driver.page_source, \"lxml\")\n\n\nfor results in soup.findAll(\"li\", {\"class\" : \"open\"}):\n    print(results.get_text())\n</code></pre>\n\n<p>But Javascript sites are causing me a problem.</p>\n\n<p>So I'm using PhantomJS and the obvious thought at the start was \"it's just not loaded when I'm trying to scrape\".</p>\n\n<p>So I stuck in a time.sleep (not ideal - I know I'll swap to a presence_of_element_locate) and a:</p>\n\n<pre><code>driver.save_screenshot('screenshot.png') # save a screenshot to disk\n</code></pre>\n\n<p>That screenshot shows the data I'm looking for has loaded. I'm able to scrape other bits of data off that page using the same code as above for the elements loaded without Java.</p>\n\n<p>According to the screenshot the data is there on the page. And I use the same data as I do on .Net libs which read the same site fine.</p>\n\n<pre><code>for names in soup.findAll(\"span\", {\"class\" : \"the-name ng-name ng-big-scope\"}):\n        print(names)\n</code></pre>\n\n<p>I removed the .get_text() here just in case that was causing something to break. But either way this returns nothing. And I can't work out why.</p>\n\n<p>I can use the exact same data in vb.net:</p>\n\n<pre><code> For Each element As HtmlElement In Me.Browser.Document.GetElementsByTagName(\"span\")\n   If element.GetAttribute(\"className\").Contains(\"the-name ng-name ng-big-scope\") Then\n                    print(element.innertext)\n   End If\nNext\n</code></pre>\n\n<p>I know I use a .contains in the .net example there but I've triple checked it's the right class name in this case.</p>\n\n<p>So the syntax works on static data.\nI have the class names etc... right because I can scrape it on .Net.\nThe data I'm looking for has loaded (according to the screenshot it takes).</p>\n\n<p>I'm stumped. Would really appreciate anyone who can point out where I'm messing up here.</p>\n\n<p>/Edit:</p>\n\n<p>I ran a test on a different Javascript based site and it got the first result and a little of the second. When there was a dozen results there. Again .Net handled this without a problem.</p>\n\n<p>So I'm considering the possibility that my syntax is fine and the problem is BF handling malformed code on the site. Going to try with an alternative or two and see if that changes anything.</p>\n"}, {"tags": ["python", "sql-server", "multithreading", "concurrency"], "comments": [{"owner": {"reputation": 8374, "user_id": 20703, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1r2le.jpg?s=128&g=1", "display_name": "TToni", "link": "https://stackoverflow.com/users/20703/ttoni"}, "edited": false, "score": 0, "creation_date": 1452108693, "post_id": 34641105, "comment_id": 57028029, "body": "The bottleneck might very well be in SQL Server. Have you tried executing the SP parallel in multiple sessions (i.e. in multiple tabs in SQL Management Studio)?"}, {"owner": {"reputation": 380, "user_id": 4119010, "user_type": "registered", "profile_image": "https://graph.facebook.com/597021875/picture?type=large", "display_name": "Arin Taylor", "link": "https://stackoverflow.com/users/4119010/arin-taylor"}, "edited": false, "score": 0, "creation_date": 1452108715, "post_id": 34641105, "comment_id": 57028043, "body": "One reason you might not be seeing a huge speed increase is because all of the threads are writing to the same table and SQL Server will have a lock preventing simultaneous table access.  I think the best solution is to change the Stored Procedure."}, {"owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "edited": false, "score": 0, "creation_date": 1452108753, "post_id": 34641105, "comment_id": 57028072, "body": "yes and i get the speedup i&#39;d expect, which is basically 1:1 - for every tab it takes the expected 30 minutes.  It&#39;s hard to test with a large range though."}, {"owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "reply_to_user": {"reputation": 380, "user_id": 4119010, "user_type": "registered", "profile_image": "https://graph.facebook.com/597021875/picture?type=large", "display_name": "Arin Taylor", "link": "https://stackoverflow.com/users/4119010/arin-taylor"}, "edited": false, "score": 0, "creation_date": 1452108808, "post_id": 34641105, "comment_id": 57028109, "body": "@ArinTaylor they all write to the same table, but all for different dates"}, {"owner": {"reputation": 3627, "user_id": 1460849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f8e4125e72fd9a100f62da3324a3635?s=128&d=identicon&r=PG", "display_name": "kalhartt", "link": "https://stackoverflow.com/users/1460849/kalhartt"}, "edited": false, "score": 2, "creation_date": 1452109076, "post_id": 34641105, "comment_id": 57028285, "body": "Also, you are calling <code>join()</code> inside the loop, so your threads run in serial."}, {"owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "reply_to_user": {"reputation": 3627, "user_id": 1460849, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1f8e4125e72fd9a100f62da3324a3635?s=128&d=identicon&r=PG", "display_name": "kalhartt", "link": "https://stackoverflow.com/users/1460849/kalhartt"}, "edited": false, "score": 0, "creation_date": 1452122007, "post_id": 34641105, "comment_id": 57035108, "body": "@kalhartt I&#39;ll admit i&#39;m not very knowledgeable on threading in Python, but I&#39;m not sure it makes a difference here as I have no other processes that would be blocked due to waiting on the join.  In any event I removed it and didn&#39;t notice much difference."}], "owner": {"reputation": 2444, "user_id": 3462509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d081277a16d009abe7b9447ed8171f84?s=128&d=identicon&r=PG&f=1", "display_name": "Solaxun", "link": "https://stackoverflow.com/users/3462509/solaxun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1452108168, "creation_date": 1452108168, "question_id": 34641105, "link": "https://stackoverflow.com/questions/34641105/execute-slow-sql-simultaneously-using-python-threads", "title": "Execute slow sql simultaneously using python threads", "body": "<p>I have a very slow stored procedure (~30 min each run) that writes to an output table for each date it is passed.  It's only argument is that input date, and it needs to be run for each day in a range.  Using cursors or a for-loop results in no speedup since it is run sequentially and each run of the proc must wait on the prior one to  complete.</p>\n\n<p>I have attempted to use threads to execute the proc for every date in a range, but I am not noticing the speedup I would expect.  Please let me know if I am either doing something wrong, or if there is a more generally accepted way to run concurrent SQL.  I would expect that since one execution takes 30 minutes, if I am running procedures concurrently then 100 dates should take a bit longer than the 30 minutes one date takes, but definitely not a linear increase.</p>\n\n<p>Here are the relevant portions of the code:</p>\n\n<pre><code>def query(table_name,prod_dt):\n    cur.execute(\"exec {} '{}';\".format(table_name,prod_dt))\n    conn.commit()\n\ndef next_workday(start_date,end_date):\n    start_date=datetime.strptime(start_date,'%Y-%m-%d')\n    end_date=datetime.strptime(end_date,'%Y-%m-%d')\n    yield datetime.strftime(start_date,'%Y-%m-%d')\n    while start_date&lt;end_date:\n        start_date+=BDay(1)\n        yield datetime.strftime(start_date+BDay(0),'%Y-%m-%d')\n\ndef main():\n    ''' \n    change func call in line 1 to last_workday_of_month or next_workday\n    depending on what you need, monthly vs daily business days\n    '''\n    for date in next_workday('2014-12-31','2015-03-31'):\n        t1=Thread(target=query,args=('slow_proc',date))\n        t1.start()\n        t1.join()\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "input", "raspberry-pi", "raspberry-pi2"], "answers": [{"comments": [{"owner": {"reputation": 5479, "user_id": 1823740, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/JQ1F0.jpg?s=128&g=1", "display_name": "Dipak", "link": "https://stackoverflow.com/users/1823740/dipak"}, "edited": false, "score": 0, "creation_date": 1452108740, "post_id": 34641175, "comment_id": 57028063, "body": "Thanks. <code>configured the input with a pull-up&#47;pull-down resistor</code>."}], "tags": [], "owner": {"reputation": 4923, "user_id": 4601386, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4L6cUyO_qbs/AAAAAAAAAAI/AAAAAAAAEnY/wEBT7GB8tv8/photo.jpg?sz=128", "display_name": "tglaria", "link": "https://stackoverflow.com/users/4601386/tglaria"}, "is_accepted": true, "score": 4, "last_activity_date": 1452108384, "creation_date": 1452108384, "answer_id": 34641175, "question_id": 34641071, "link": "https://stackoverflow.com/questions/34641071/raspberry-pi-b-gpio-input-value-is-changing-without-connecting/34641175#34641175", "title": "Raspberry Pi B+ GPIO input value is changing without connecting", "body": "<p>This has nothing to do with software, it's hardware.  </p>\n\n<p>Why do you expect the input to be <code>LOW</code> when not connected, why not <code>HIGH</code>.\nIf there's nothing pulling the value <code>HIGH</code> or <code>LOW</code>, the noise (in the air?) can move the input to any voltage, so the input will not be defined.  </p>\n\n<p>Now, if you configure the input with a pull-up/pull-down resistor, then it will have a stable value even when nothing is connected to it.</p>\n\n<p>So, regarding your question:</p>\n\n<blockquote>\n  <p>So, how can I read a input signal through these PIN?  </p>\n</blockquote>\n\n<p>To read an input signal you first have to have an input signal, so connect one to your input pins.  </p>\n\n<blockquote>\n  <p>Is it any problem on my Raspberry Pi Board?  </p>\n</blockquote>\n\n<p>This is not enough to know if it has.</p>\n"}, {"tags": [], "owner": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "is_accepted": false, "score": 3, "last_activity_date": 1452108421, "creation_date": 1452108421, "answer_id": 34641190, "question_id": 34641071, "link": "https://stackoverflow.com/questions/34641071/raspberry-pi-b-gpio-input-value-is-changing-without-connecting/34641190#34641190", "title": "Raspberry Pi B+ GPIO input value is changing without connecting", "body": "<p>That is normal, you didn't connected the GPIO pins to anything, so they're \"floating\", meaning it will change randomly.</p>\n\n<p>Tie a pull-down resistor to the GPIO and it will be stabilized.</p>\n"}], "owner": {"reputation": 5479, "user_id": 1823740, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/JQ1F0.jpg?s=128&g=1", "display_name": "Dipak", "link": "https://stackoverflow.com/users/1823740/dipak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 0, "accepted_answer_id": 34641175, "answer_count": 2, "score": 2, "last_activity_date": 1534228847, "creation_date": 1452108067, "question_id": 34641071, "link": "https://stackoverflow.com/questions/34641071/raspberry-pi-b-gpio-input-value-is-changing-without-connecting", "title": "Raspberry Pi B+ GPIO input value is changing without connecting", "body": "<p>I am new to <strong>Raspberry Pi</strong> programming. Using <strong>Raspberry Pi Model B+</strong> I was trying to read input value through <code>GPIO</code> pins. But it end up with GPIO pin value is going <code>HIGH and LOW</code> alternatively (without any uniform pattern).</p>\n\n<p>Why its like that? Is it supposed to be like that? I was expecting until a power is supplied to the <code>GPIO</code> pin with <code>setup GPIO.IN</code> its value will be <code>0</code> and only when power is conncted it will be <code>1</code>. </p>\n\n<p>Here is the sample python code I have written for to check the status of the PIN:</p>\n\n<pre><code>import RPi.GPIO as GPIO\nimport time\n\nPINS = [11,13,15,16,18,22,36,37]\nGPIO.setmode(GPIO.BOARD)\n\nfor pin in PINS:\n    GPIO.setup(pin,GPIO.IN)\n\nwhile True:\n    try:\n        for pin in PINS:\n            print  pin, \u201c input value is  : \u201c, GPIO.input(pin)\n        time.sleep(2)\n        print \u201cchecking pin status \"\n    except (KeyboardInterrupt, SystemExt)\n        GPIO.cleanup()\n</code></pre>\n\n<p>And output is as follows:</p>\n\n<pre><code>checking pin status \n11 input value is  : 1\n13 input value is  : 1\n15 input value is  : 1 \n16 input value is  : 1\n18 input value is  : 1\n22 input value is  : 1\n36 input value is  : 1\n37 input value is  : 1\nchecking pin status \n11 input value is  : 0\n13 input value is  : 0\n15 input value is  : 0 \n16 input value is  : 0\n18 input value is  : 0\n22 input value is  : 0\n36 input value is  : 0\n37 input value is  : 1\nchecking pin status \n11 input value is  : 1\n13 input value is  : 1\n15 input value is  : 1 \n16 input value is  : 1\n18 input value is  : 1\n22 input value is  : 0\n36 input value is  : 0\n37 input value is  : 0\nchecking pin status \n11 input value is  : 1\n13 input value is  : 1\n15 input value is  : 1 \n16 input value is  : 1\n18 input value is  : 1\n22 input value is  : 1\n36 input value is  : 1\n37 input value is  : 1\n</code></pre>\n\n<p>So, how can I read a input signal through these PIN? Is it any problem on my Raspberry Pi Board?</p>\n"}, {"tags": ["python", "r", "pandas", "series"], "comments": [{"owner": {"reputation": 3058, "user_id": 3291744, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f55d948da6d30b6650c8f2ff6fb2e8fc?s=128&d=identicon&r=PG", "display_name": "jwdink", "link": "https://stackoverflow.com/users/3291744/jwdink"}, "edited": false, "score": 0, "creation_date": 1452108984, "post_id": 34641056, "comment_id": 57028242, "body": "Does x.idx[-1,] do what you want?"}, {"owner": {"reputation": 361, "user_id": 5753591, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/382d35db609b12c924b931bf6a970e8b?s=128&d=identicon&r=PG&f=1", "display_name": "jay2020", "link": "https://stackoverflow.com/users/5753591/jay2020"}, "reply_to_user": {"reputation": 3058, "user_id": 3291744, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f55d948da6d30b6650c8f2ff6fb2e8fc?s=128&d=identicon&r=PG", "display_name": "jwdink", "link": "https://stackoverflow.com/users/3291744/jwdink"}, "edited": false, "score": 0, "creation_date": 1452109578, "post_id": 34641056, "comment_id": 57028622, "body": "It says &#39;Series&#39; object has no attribute &#39;idx&#39;"}, {"owner": {"reputation": 3058, "user_id": 3291744, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f55d948da6d30b6650c8f2ff6fb2e8fc?s=128&d=identicon&r=PG", "display_name": "jwdink", "link": "https://stackoverflow.com/users/3291744/jwdink"}, "edited": false, "score": 0, "creation_date": 1452113973, "post_id": 34641056, "comment_id": 57031209, "body": "I&#39;m sorry, I meant iloc, not idx."}], "answers": [{"comments": [{"owner": {"reputation": 10123, "user_id": 3639023, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/RkSU9.png?s=128&g=1", "display_name": "johnchase", "link": "https://stackoverflow.com/users/3639023/johnchase"}, "edited": false, "score": 0, "creation_date": 1452113636, "post_id": 34641859, "comment_id": 57031028, "body": "Using <code>drop</code> here is a really nice solution. I already upvoted your first answer, but I think this edit is even better."}], "tags": [], "owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "is_accepted": true, "score": 26, "last_activity_date": 1452113338, "last_edit_date": 1452113338, "creation_date": 1452111044, "answer_id": 34641859, "question_id": 34641056, "link": "https://stackoverflow.com/questions/34641056/removing-elements-from-pandas-series-in-python/34641859#34641859", "title": "Removing elements from pandas series in python", "body": "<p>Using <code>integer</code> based slicing should work - (<a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#selection-by-position\" rel=\"noreferrer\">see docs</a>):</p>\n\n<pre><code>s.iloc[1:]\n</code></pre>\n\n<p>If you prefer to <code>drop</code> rather than <code>slice</code>, you could use the built-in <code>drop</code> method:</p>\n\n<pre><code>s.drop(s.index[0])\n</code></pre>\n\n<p>To remove several items, you would include a <code>list</code> of <code>index</code> positions:</p>\n\n<pre><code>s.drop(s.index[[0, 2, 4]])\n</code></pre>\n\n<p>or a <code>slice</code>:</p>\n\n<pre><code>s.drop(s.index[1: 4])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34745, "user_id": 1494637, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a50559f059e0621b4f543bcda9aad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/1494637/stefan"}, "edited": false, "score": 0, "creation_date": 1452113148, "post_id": 34641992, "comment_id": 57030787, "body": "There&#39;s x.drop(x.index[[0, 3, 4]])."}], "tags": [], "owner": {"reputation": 10123, "user_id": 3639023, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/RkSU9.png?s=128&g=1", "display_name": "johnchase", "link": "https://stackoverflow.com/users/3639023/johnchase"}, "is_accepted": false, "score": 1, "last_activity_date": 1452113695, "last_edit_date": 1452113695, "creation_date": 1452111553, "answer_id": 34641992, "question_id": 34641056, "link": "https://stackoverflow.com/questions/34641056/removing-elements-from-pandas-series-in-python/34641992#34641992", "title": "Removing elements from pandas series in python", "body": "<p>Python doesn't have a way of slicing out a position the way that R does. If you only need to remove the first or last element, the previous posted solution: <code>s.iloc[1:]</code> is probably the best. If you need to remove multiple elements, or an element in the middle of your series you can do so with the following:</p>\n\n<pre><code>In [29]: x = pd.Series(np.random.randn(10))\n\nIn [34]: x[~x.index.isin([0, 3, 4])]\nOut[34]: 1    0.884089\n         2    0.921271\n         5   -0.847967\n         6   -0.088892\n         7   -0.765241\n         8   -0.084489\n         9   -0.581152\n         dtype: float64\n</code></pre>\n\n<p>In this case we removed the 0, 3 and 4 positions.</p>\n\n<p>This is a bit messier, so like I said the previous solution may be the best for what you need, however this does have some additional functionality.</p>\n\n<p>It's worth noting that this solution will only work if your index is numeric and consecutive starting with 0.</p>\n"}], "owner": {"reputation": 361, "user_id": 5753591, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/382d35db609b12c924b931bf6a970e8b?s=128&d=identicon&r=PG&f=1", "display_name": "jay2020", "link": "https://stackoverflow.com/users/5753591/jay2020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42091, "favorite_count": 2, "accepted_answer_id": 34641859, "answer_count": 2, "score": 16, "last_activity_date": 1519232572, "creation_date": 1452108015, "last_edit_date": 1472985539, "question_id": 34641056, "link": "https://stackoverflow.com/questions/34641056/removing-elements-from-pandas-series-in-python", "title": "Removing elements from pandas series in python", "body": "<p>I have a series data type which was generated by subtracting two columns from pandas data frame.</p>\n\n<p>I want to remove the first element from the series which would be <code>x[-1]</code> in R. I can get it to work in np array class but series class doesn't work.</p>\n"}, {"tags": ["python", "struct"], "comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 1, "creation_date": 1452108848, "post_id": 34641026, "comment_id": 57028141, "body": "The ordering of format characters may have an impact on size since the padding needed to satisfy alignment requirements is different:  &gt;&gt;&gt; pack(&#39;ci&#39;, &#39;<i>&#39;, 0x12131415) &#39;*\\x00\\x00\\x00\\x12\\x13\\x14\\x15&#39; &gt;&gt;&gt; pack(&#39;ic&#39;, 0x12131415, &#39;</i>&#39;) &#39;\\x12\\x13\\x14\\x15*&#39; &gt;&gt;&gt; calcsize(&#39;ci&#39;) 8 &gt;&gt;&gt; calcsize(&#39;ic&#39;) 5"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 1, "creation_date": 1452108867, "post_id": 34641026, "comment_id": 57028157, "body": "This is right from the manual"}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 3552819, "user_type": "registered", "profile_image": "https://graph.facebook.com/585923559/picture?type=large", "display_name": "user3552819", "link": "https://stackoverflow.com/users/3552819/user3552819"}, "is_accepted": false, "score": 2, "last_activity_date": 1452109128, "creation_date": 1452109128, "answer_id": 34641384, "question_id": 34641026, "link": "https://stackoverflow.com/questions/34641026/reading-4-bytes-with-struct-unpack/34641384#34641384", "title": "Reading 4 bytes with struct.unpack", "body": "<p>It looks like you're running afoul of the alignment requirement: integers must be on a 4-byte boundary on your machine.</p>\n\n<p>You can turn off alignment by starting your format string with an equals sign:</p>\n\n<p>PACK_FORMAT = '=8s2si2s16B96s40B40B'</p>\n"}, {"comments": [{"owner": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "edited": false, "score": 0, "creation_date": 1452109425, "post_id": 34641388, "comment_id": 57028511, "body": "If I use <code>=</code>, I get an absurd value for the integer: ` (Pdb)PACK_FORMAT  &#39;=8s2si2s16B96s40B40B&#39;  (Pdb) foo (&#39;MAGICSTR&#39;, &#39;01&#39;, 808464944, &#39;a0&#39;,.....)` Trying to understand why this happens?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "edited": false, "score": 1, "creation_date": 1452109699, "post_id": 34641388, "comment_id": 57028705, "body": "Sounds like it could be a byte order issue, try using <code>&gt;</code> and <code>&lt;</code> instead of <code>=</code> and see which one gives reasonable looking results (or look at the raw data and figure it yourself)."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "edited": false, "score": 1, "creation_date": 1452110043, "post_id": 34641388, "comment_id": 57028918, "body": "P.S. Most binary formats specify whether the data in them is in big or little-endian format (or have a flag somewhere in a header that says indicates which is being used)."}, {"owner": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "edited": false, "score": 0, "creation_date": 1452110504, "post_id": 34641388, "comment_id": 57029220, "body": "Hexdump from my file is below. The 4 bytes I want to read and upack are 0200 <code>0000000   M   A   G   I   C   S   T   R   0   1   0   2   0   0   a   0</code> <code>0000010   0   0   0   0   0   0   0   0   1   e   1   0   0   0   1   0</code>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "edited": false, "score": 1, "creation_date": 1452111053, "post_id": 34641388, "comment_id": 57029566, "body": "If the <code>0200</code> is supposed to represent 512 decimal, then it looks like the value is in big-endian format, so try using <code>&gt;</code> instead of <code>=</code>. The latter means whatever is native to your computer which obviously can be different than the data in the file."}, {"owner": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "edited": false, "score": 0, "creation_date": 1452111273, "post_id": 34641388, "comment_id": 57029725, "body": "<code>(Pdb) PACK_FORMAT &#39;&gt;8s2si2s16B96s40B40B&#39;</code>  <code>(Pdb) foo (&#39;MAGICSTR&#39;, &#39;01&#39;, 808595504, ........)</code>"}, {"owner": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1452111475, "post_id": 34641388, "comment_id": 57029837, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/99977/discussion-between-linuxfan-and-martineau\">continue this discussion in chat</a>."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "edited": false, "score": 1, "creation_date": 1452112274, "post_id": 34641388, "comment_id": 57030320, "body": "I figured-out the problem, the 0200 is an ASCII string not binary data. <code>808595504</code> decimal is <code>0x30323030</code> in binary which is <code>&quot;0200&quot;</code> if interpreted as string \u2014 so what you want is <code>4c</code> in the format string and you&#39;d need to convert that to a decimal number manually with <code>int(foo[2])</code>."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "edited": false, "score": 1, "creation_date": 1452113149, "post_id": 34641388, "comment_id": 57030788, "body": "You&#39;re welcome. On further reflection, <i>all</i> your data appears to be in string format, so you&#39;ll need to revise your entire format string accordingly (using <code>c</code> format characters for each substring) and then convert those representing decimal or hex numbers accordingly \u2014 <code>int()</code> can convert both types of numbers from strings if you specify a base. ie <code>int(foo[2], 16)</code>"}, {"owner": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "edited": false, "score": 0, "creation_date": 1452114089, "post_id": 34641388, "comment_id": 57031289, "body": "Perfect. I&#39;ll also check why the file-format has ascii instead of bytes for all fields."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "edited": false, "score": 0, "creation_date": 1452123138, "post_id": 34641388, "comment_id": 57035539, "body": "Good idea since sending binary data as ASCII hexadecimal digits is doubling the size of the file."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 1, "last_activity_date": 1452109137, "creation_date": 1452109137, "answer_id": 34641388, "question_id": 34641026, "link": "https://stackoverflow.com/questions/34641026/reading-4-bytes-with-struct-unpack/34641388#34641388", "title": "Reading 4 bytes with struct.unpack", "body": "<p>It has to do with alignment \u2014 see the <a href=\"https://docs.python.org/2/library/struct.html#byte-order-size-and-alignment\" rel=\"nofollow\">docs</a>.</p>\n\n<pre><code>import struct\n\nPACK_FORMAT1 = '8s 2s 4B 2s 16B 96s 40B 40B'\nprint(struct.Struct(PACK_FORMAT1).size)  # -&gt; 208\n\nPACK_FORMAT2 = '8s 2s i 2s 16B 96s 40B 40B'\nprint(struct.Struct(PACK_FORMAT2).size)  # -&gt; 210\n\nPACK_FORMAT3 = '=8s 2s i 2s 16B 96s 40B 40B'\nprint(struct.Struct(PACK_FORMAT3).size)  # -&gt; 208\n</code></pre>\n"}], "owner": {"reputation": 1010, "user_id": 3326103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06afeeee747f8c3245b1dc74f634db88?s=128&d=identicon&r=PG&f=1", "display_name": "linuxfan", "link": "https://stackoverflow.com/users/3326103/linuxfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1501, "favorite_count": 0, "accepted_answer_id": 34641388, "answer_count": 2, "score": 0, "last_activity_date": 1452111886, "creation_date": 1452107929, "last_edit_date": 1452111886, "question_id": 34641026, "link": "https://stackoverflow.com/questions/34641026/reading-4-bytes-with-struct-unpack", "title": "Reading 4 bytes with struct.unpack", "body": "<p>I have a file whose bytes #11-15 hold an integer that is 4 bytes long. Using <code>struct.unpack</code>, I want to read it as a 4-byte integer. Right now, with PACK_FORMAT set to <code>8s2s4B2s16B96s40B40B</code>, I read 4 separate bytes:</p>\n\n<pre><code>PACK_FORMAT = '8s2s4B2s16B96s40B40B'\nfd = open('./myfile', 'r')\nhdrBytes = fd.read(208)\nprint(repr(hdrBytes))\n\nfoo = struct.unpack(PACK_FORMAT, hdrBytes)\n\n(Pdb) foo[0]\n'MAGICSTR'\n(Pdb) foo[1]\n'01'\n(Pdb) foo[2:6]\n(48, 50, 48, 48)\n(Pdb) print repr(hdrBytes)\n'MAGICSTR010200a0000000001e100010........`\n</code></pre>\n\n<p>Now I can convert these 4 bytes to an int as:</p>\n\n<pre><code>(Pdb) int(''.join([chr(x) for x in foo[2:6]]), 16)\n512\n</code></pre>\n\n<p>When I modified <code>PACK_FORMAT</code> to use using <code>i</code> instead of <code>4B</code> to read 4 bytes, but always get an error:</p>\n\n<pre><code>foo = struct.unpack(PACK_FORMAT, hdrBytes)\nerror: unpack requires a string argument of length 210\n</code></pre>\n"}, {"tags": ["python", "django", "shell", "server"], "comments": [{"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1452108057, "post_id": 34641019, "comment_id": 57027635, "body": "<code>runserver</code> is only used in development, so it&#39;s always safe to kill or <code>ctrl + c</code>. It&#39;s nothing of a big deal and you shouldn&#39;t do it often, I wonder why do you bother by that. Technically you don&#39;t need to quit your server, because when your python code is updated, the server will reload."}, {"owner": {"reputation": 261, "user_id": 5411915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3fb4ab04f588d225edac29a0d31e0ac?s=128&d=identicon&r=PG&f=1", "display_name": "JTFouquier", "link": "https://stackoverflow.com/users/5411915/jtfouquier"}, "reply_to_user": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1452108202, "post_id": 34641019, "comment_id": 57027730, "body": "Hmm, then how do I ensure the &quot;previous Django processes&quot; you mention are finished before I &quot;ctrl + c&quot;? It&#39;s more of an annoyance to me. Glad I&#39;m not doing anything to bad though. Thanks!"}, {"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1452108395, "post_id": 34641019, "comment_id": 57027833, "body": "There&#39;s nothing to ensure, as I mentioned before, you shouldn&#39;t exit/restart your server very often, because the server will reload itself. I&#39;m not sure what&#39;s your level of tolerance, but it might happen to me only once a week, because I almost never stop my server."}, {"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1452108526, "post_id": 34641019, "comment_id": 57027921, "body": "Or you are looking for solution of how to get rid of the error? Just <code>ps aux | grep runserver_plus</code> and kill the process that&#39;s still running."}, {"owner": {"reputation": 261, "user_id": 5411915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3fb4ab04f588d225edac29a0d31e0ac?s=128&d=identicon&r=PG&f=1", "display_name": "JTFouquier", "link": "https://stackoverflow.com/users/5411915/jtfouquier"}, "reply_to_user": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 0, "creation_date": 1452108651, "post_id": 34641019, "comment_id": 57027997, "body": "Yeah I start/stop it a lot since I&#39;m working on different projects. I guess I could keep it going. New to a lot of this. Thanks, Shang!"}, {"owner": {"reputation": 21174, "user_id": 636625, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EuUH4.jpg?s=128&g=1", "display_name": "Shang Wang", "link": "https://stackoverflow.com/users/636625/shang-wang"}, "edited": false, "score": 1, "creation_date": 1452108875, "post_id": 34641019, "comment_id": 57028160, "body": "Run your projects on different ports then. They shouldn&#39;t step into each other: <code>python manage.py runserver_plus 0.0.0.0:8000</code>."}], "owner": {"reputation": 261, "user_id": 5411915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3fb4ab04f588d225edac29a0d31e0ac?s=128&d=identicon&r=PG&f=1", "display_name": "JTFouquier", "link": "https://stackoverflow.com/users/5411915/jtfouquier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452107909, "creation_date": 1452107909, "question_id": 34641019, "link": "https://stackoverflow.com/questions/34641019/how-to-prevent-address-already-in-use-error-errno-48-for-python-django-proje", "title": "How to prevent &quot;Address already in use&quot; error (errno 48) for Python Django Project", "body": "<p>I want to know how to <em>prevent</em> this error from always happening to me, <em>not</em> how to kill it when it does happen. </p>\n\n<p>When I do \"python manage.py runserver_plus\", I usually get the error \"Address already in use\" when I run this command again after using the shell_plus.  I am often switching back and forth from \"python manage.py shell_plus\" and \"runserver_plus\". Am I quitting my server correctly? I quit the server via \"ctrl + C\" and I quit the shell using quit().  </p>\n\n<p>Thank you very much!   </p>\n"}, {"tags": ["python", "scrapy", "scrapy-spider"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 1577239, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/69e614b91ebce0d33d8a9e293adb550e?s=128&d=identicon&r=PG", "display_name": "Mubashir Kamran SW Engineer", "link": "https://stackoverflow.com/users/1577239/mubashir-kamran-sw-engineer"}, "edited": false, "score": 0, "creation_date": 1452281182, "post_id": 34641069, "comment_id": 57115401, "body": "then can you please tell me, how can i simulate the request that is sent on email button when clicked in the above url?"}], "tags": [], "owner": {"reputation": 722, "user_id": 211081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d960efea0acdeefdfde2df97d923c879?s=128&d=identicon&r=PG", "display_name": "PsyKzz", "link": "https://stackoverflow.com/users/211081/psykzz"}, "is_accepted": true, "score": 1, "last_activity_date": 1452108065, "creation_date": 1452108065, "answer_id": 34641069, "question_id": 34640989, "link": "https://stackoverflow.com/questions/34640989/extract-email-from-the-webpage-in-scrapy/34641069#34641069", "title": "Extract email from the webpage in scrapy", "body": "<p>The email is handled server side which means you will never be able to tell from the page what email your details were sent to.</p>\n"}], "owner": {"reputation": 163, "user_id": 1577239, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/69e614b91ebce0d33d8a9e293adb550e?s=128&d=identicon&r=PG", "display_name": "Mubashir Kamran SW Engineer", "link": "https://stackoverflow.com/users/1577239/mubashir-kamran-sw-engineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 0, "accepted_answer_id": 34641069, "answer_count": 1, "score": -1, "last_activity_date": 1452108065, "creation_date": 1452107768, "question_id": 34640989, "link": "https://stackoverflow.com/questions/34640989/extract-email-from-the-webpage-in-scrapy", "title": "Extract email from the webpage in scrapy", "body": "<p>I want to know what will be the way to extract email address from the page where it is not obvious in the html. e.g. in the page \"<a href=\"http://www.hotfrog.com.au/business/Blacktrac/SendEmail.aspx?company=Blacktrac\" rel=\"nofollow\">http://www.hotfrog.com.au/business/Blacktrac/SendEmail.aspx?company=Blacktrac</a>\" i want to know what email address the message is sent to when we click \"Send Email\" button?</p>\n"}, {"tags": ["python", "image", "python-imaging-library"], "comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1452108061, "post_id": 34640982, "comment_id": 57027642, "body": "What version? PIL or Pillow?"}, {"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 1, "creation_date": 1452108070, "post_id": 34640982, "comment_id": 57027649, "body": "Funky! I thought <code>base.save(&#39;base.bmp&#39;)</code> would simply work?"}, {"owner": {"reputation": 155, "user_id": 3623808, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fbbbb2ccfd9a35bd1a0fa4a17a548447?s=128&d=identicon&r=PG&f=1", "display_name": "mnowak", "link": "https://stackoverflow.com/users/3623808/mnowak"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1452108173, "post_id": 34640982, "comment_id": 57027710, "body": "@kindall Pillow 3.1.0"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1452108719, "post_id": 34640982, "comment_id": 57028047, "body": "<code>&#39;w&#39;</code> is text mode. BMP is a binary format."}], "answers": [{"comments": [{"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 1, "creation_date": 1452108422, "post_id": 34641108, "comment_id": 57027844, "body": "<a href=\"http://pillow.readthedocs.org/en/3.0.x/reference/Image.html#PIL.Image.Image.save\" rel=\"nofollow noreferrer\">Documentation link</a>. Either use the filename, such as <code>base.bmp</code>, or open a file in binary mode, such as <code>open(base.bmp, &#39;wb&#39;)</code>."}, {"owner": {"reputation": 722, "user_id": 211081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d960efea0acdeefdfde2df97d923c879?s=128&d=identicon&r=PG", "display_name": "PsyKzz", "link": "https://stackoverflow.com/users/211081/psykzz"}, "edited": false, "score": 1, "creation_date": 1452108465, "post_id": 34641108, "comment_id": 57027869, "body": "Don&#39;t forget the quotes on <code>open(&#39;base.bmp&#39;, &#39;wb&#39;)</code>"}], "tags": [], "owner": {"reputation": 722, "user_id": 211081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d960efea0acdeefdfde2df97d923c879?s=128&d=identicon&r=PG", "display_name": "PsyKzz", "link": "https://stackoverflow.com/users/211081/psykzz"}, "is_accepted": true, "score": 5, "last_activity_date": 1452108190, "last_edit_date": 1495535298, "creation_date": 1452108190, "answer_id": 34641108, "question_id": 34640982, "link": "https://stackoverflow.com/questions/34640982/python-pil-image-saving/34641108#34641108", "title": "Python PIL image saving", "body": "<p>As <a href=\"https://stackoverflow.com/users/2243104/reti43\">Reti43</a> said, You just need to use <code>base.save('base.bmp')</code></p>\n"}, {"comments": [{"owner": {"reputation": 155, "user_id": 3623808, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fbbbb2ccfd9a35bd1a0fa4a17a548447?s=128&d=identicon&r=PG&f=1", "display_name": "mnowak", "link": "https://stackoverflow.com/users/3623808/mnowak"}, "reply_to_user": {"reputation": 2899, "user_id": 1755083, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5f23c2b2a3fecc91617ce3e9edf98952?s=128&d=identicon&r=PG", "display_name": "AbdealiJK", "link": "https://stackoverflow.com/users/1755083/abdealijk"}, "edited": false, "score": 0, "creation_date": 1452192501, "post_id": 34646946, "comment_id": 57071133, "body": "@AJK with <code>base.save(open(&#39;base.bmp&#39;, &#39;w&#39;), &#39;BMP&#39;)</code> I&#39;ve opened file in text, instead of binary mode"}], "tags": [], "owner": {"reputation": 21, "user_id": 5755297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5287fff01d56f1f3802fb266f2f8d2ff?s=128&d=identicon&r=PG", "display_name": "Wuilkys", "link": "https://stackoverflow.com/users/5755297/wuilkys"}, "is_accepted": false, "score": 2, "last_activity_date": 1452138759, "last_edit_date": 1452138759, "creation_date": 1452137696, "answer_id": 34646946, "question_id": 34640982, "link": "https://stackoverflow.com/questions/34640982/python-pil-image-saving/34646946#34646946", "title": "Python PIL image saving", "body": "<p>This works :</p>\n\n<pre><code>base = Image.open('sam.bmp')\nbase.save('base.bmp')\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 3623808, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fbbbb2ccfd9a35bd1a0fa4a17a548447?s=128&d=identicon&r=PG&f=1", "display_name": "mnowak", "link": "https://stackoverflow.com/users/3623808/mnowak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4944, "favorite_count": 2, "accepted_answer_id": 34641108, "answer_count": 2, "score": 5, "last_activity_date": 1452138759, "creation_date": 1452107755, "question_id": 34640982, "link": "https://stackoverflow.com/questions/34640982/python-pil-image-saving", "title": "Python PIL image saving", "body": "<p>I'm new to PIL library and have some problem. </p>\n\n<pre><code>base = Image.open('sam.bmp')\nbase.save(open('base.bmp', 'w'), 'BMP')\n</code></pre>\n\n<p>when I execute that block of code, saved image is distorted in some strange way.</p>\n\n<p>original image:\n<a href=\"https://i.stack.imgur.com/LbnAN.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/LbnAN.png\" alt=\"original image\"></a></p>\n\n<p>opened and saved image:\n<a href=\"https://i.stack.imgur.com/C75mm.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/C75mm.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see, I'm not doing any transformations with the image - only load and save. Do you have any clue, why is it working that way?</p>\n"}, {"tags": ["python", "arguments"], "answers": [{"comments": [{"owner": {"reputation": 1680, "user_id": 3308509, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4d433ab89756d37ac8d09cbffe6621d2?s=128&d=identicon&r=PG&f=1", "display_name": "Malonge", "link": "https://stackoverflow.com/users/3308509/malonge"}, "edited": false, "score": 0, "creation_date": 1452109618, "post_id": 34641159, "comment_id": 57028656, "body": "Well I would like to tell the user which arguments are required, with a description of each, though your point is well taken."}], "tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 1, "last_activity_date": 1452108346, "creation_date": 1452108346, "answer_id": 34641159, "question_id": 34640980, "link": "https://stackoverflow.com/questions/34640980/how-to-raise-more-helpful-error-message-than-takes-exactly-x-arguments-y-give/34641159#34641159", "title": "How to raise more helpful error message than &quot;takes exactly x arguments ( y given)&quot;", "body": "<p>The standard error message seems quite adequate, in my opinion.  What more would you want to tell the user?</p>\n\n<p>But to answer the question, you could have your method take a variable number of arguments (i.e. <code>*args</code> or <code>**kwargs</code>) and then count the number of arguments within the method and raise your own error if necessary.</p>\n\n<p>Or you could provide default (but nonsensical) values for each argument, and then check for the nonsense values within the method.</p>\n"}], "owner": {"reputation": 1680, "user_id": 3308509, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4d433ab89756d37ac8d09cbffe6621d2?s=128&d=identicon&r=PG&f=1", "display_name": "Malonge", "link": "https://stackoverflow.com/users/3308509/malonge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452108346, "creation_date": 1452107753, "question_id": 34640980, "link": "https://stackoverflow.com/questions/34640980/how-to-raise-more-helpful-error-message-than-takes-exactly-x-arguments-y-give", "title": "How to raise more helpful error message than &quot;takes exactly x arguments ( y given)&quot;", "body": "<p>When a user calls a method and does not provide the proper number of arguments, I would like to be able to tell them which arguments they are missing.</p>\n\n<p>However, my understanding is that the method that is causing the error is not actually being called, so then I can't write code within the method itself that would raise such an error. </p>\n\n<p>Ultimately, I would like to be able to catch this error, and print a message that states the required arguments. This way, a user can find out which requirement they didn't meet. </p>\n"}, {"tags": ["python", "string", "integer"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1452107631, "post_id": 34640834, "comment_id": 57027374, "body": "<code>if hyp == (&#39;&#39;)</code> will never happen, if the string is empty you will get an error, if you want to validate input use a try/except. <a href=\"http://stackoverflow.com/questions/23294658/asking-the-user-for-input-until-they-give-a-valid-response\" title=\"asking the user for input until they give a valid response\">stackoverflow.com/questions/23294658/&hellip;</a>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1452107865, "post_id": 34640834, "comment_id": 57027520, "body": "Write your own input function that checks the length of the string the user enters and uses a try/except clause to see if it can be converted to an integer with <code>int()</code> \u2014 and then use it everywhere in place of of the <code>int(input(&quot;name:&quot;))</code>."}], "answers": [{"comments": [{"owner": {"reputation": 818, "user_id": 4449542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aab40e761d370d2ee5919821a9d224c?s=128&d=identicon&r=PG&f=1", "display_name": "wolfsgang", "link": "https://stackoverflow.com/users/4449542/wolfsgang"}, "reply_to_user": {"reputation": 15, "user_id": 5749164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1106678219345076/picture?type=large", "display_name": "Alexander &#211;lafsson", "link": "https://stackoverflow.com/users/5749164/alexander-%c3%93lafsson"}, "edited": false, "score": 0, "creation_date": 1452109566, "post_id": 34641330, "comment_id": 57028611, "body": "I hope its clear that the need to convert them to strings will not be needed with those redundant checks. Thus your program will straight away go to the check in those while loops."}], "tags": [], "owner": {"reputation": 818, "user_id": 4449542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aab40e761d370d2ee5919821a9d224c?s=128&d=identicon&r=PG&f=1", "display_name": "wolfsgang", "link": "https://stackoverflow.com/users/4449542/wolfsgang"}, "is_accepted": true, "score": 0, "last_activity_date": 1452110248, "last_edit_date": 1452110248, "creation_date": 1452108960, "answer_id": 34641330, "question_id": 34640834, "link": "https://stackoverflow.com/questions/34640834/how-to-ask-for-both-an-integer-and-an-string/34641330#34641330", "title": "how to ask for both an integer and an string", "body": "<p>In python 2.7 , you simply use <code>raw_input()</code> like</p>\n\n<pre><code>hyp = raw_input(\"hypotenuse length:\")\nadj = raw_input(\"adjacent length:\")\nopp = raw_input(\"opposite length:\")\n</code></pre>\n\n<p>And then your checks will work as they will be empty strings if nothing is entered.</p>\n\n<p>Also you should  preferably use <code>raw_input</code> for all inputs, wherever you would need the value as <code>int</code> you explicitly covert it then, like</p>\n\n<pre><code>temp = int(adj) \n</code></pre>\n\n<p><code>raw_input()</code> returns a string, and <code>input()</code> tries to run the input as a Python expression.    </p>\n\n<p>In python 3,  <code>raw_input</code> is just renamed as <code>input</code> and hence can be use directly to get input as string.</p>\n"}, {"tags": [], "owner": {"reputation": 6036, "user_id": 1717828, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b52e6a27ec5f0cee4f12713f058923f2?s=128&d=identicon&r=PG", "display_name": "user1717828", "link": "https://stackoverflow.com/users/1717828/user1717828"}, "is_accepted": false, "score": 0, "last_activity_date": 1452111422, "creation_date": 1452111422, "answer_id": 34641964, "question_id": 34640834, "link": "https://stackoverflow.com/questions/34640834/how-to-ask-for-both-an-integer-and-an-string/34641964#34641964", "title": "how to ask for both an integer and an string", "body": "<p>You could use a <code>try</code>/<code>except</code> block as shown, and add additional conditions to validate for (I checked for number of blank sides in <code>validate_input()</code>, but you could extend to positive numbers, etc).</p>\n\n<pre><code>#!/usr/bin/python\n\nimport math\n\n#Triangle has three sides; two can be defined and the third is calculated\nclass Triangle:\n\n    def __init__(self):\n        self.side={\"adjacent\":0,\"opposite\":0,\"hypotenuse\":0}\n\n    def define_sides(self):\n        for i in self.side:\n            self.side[i]=self.get_side(i)\n\n    def print_sides(self):\n        for i in self.side:\n            print \"side\",i,\"equals\",self.side[i]\n\n    #return user integer or None if they enter nothing\n    def get_side(self,one_side):\n        prompt = \"Enter length of \"+one_side+\": \"\n        try:\n            return input(prompt)\n        except SyntaxError:\n            return None\n\n    def count_nones(self):\n        nones=0\n        for side, length in self.side.iteritems():\n            if self.side[side] == None:\n                nones+=1\n        return nones\n\n    def validate_input(self):\n        nNones=self.count_nones()\n\n        if nNones &lt; 1:\n            print \"You must leave one side blank.\"\n            quit()\n        if nNones &gt; 1:\n            print \"Only one side can be left blank.\"\n\n    def calculate_missing_length(self):\n        h=self.side[\"hypotenuse\"]\n        a=self.side[\"adjacent\"]\n        o=self.side[\"opposite\"]\n\n        #hypotenuse is missing\n        if h == None:\n            self.side[\"hypotenuse\"] = math.sqrt(a*a+o*o)\n\n        #adjacent is missing\n        if a == None:\n            self.side[\"adjacent\"] = math.sqrt(h*h-o*o)\n\n        #opposite is missing\n        if o == None:\n            self.side[\"opposite\"] = math.sqrt(h*h-a*a)\n\n#begin program\ntriangle=Triangle()\ntriangle.define_sides()\ntriangle.print_sides()\ntriangle.validate_input()\ntriangle.calculate_missing_length()\ntriangle.print_sides()\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5749164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1106678219345076/picture?type=large", "display_name": "Alexander &#211;lafsson", "link": "https://stackoverflow.com/users/5749164/alexander-%c3%93lafsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 34641330, "answer_count": 2, "score": 1, "last_activity_date": 1452111422, "creation_date": 1452107351, "question_id": 34640834, "link": "https://stackoverflow.com/questions/34640834/how-to-ask-for-both-an-integer-and-an-string", "title": "how to ask for both an integer and an string", "body": "<pre><code>print(\"welcome to the Pythagoras calculator\")\nprint(\"please leave empty whenever asked for any sides of the triangle you do not have data for\")\nprint(\"please answer every question with integers only\")\n\nside = input(\"which side would you like to be found?\")\n\nhyp = int(input(\"hypotenuse length:\"))\nif hyp == (''):\n    hyp = str(hyp)\nadj = int(input(\"adjacent length:\"))\nif adj ==(''):\n    adj = str(adj)\nopp = int(input(\"opposite length:\"))\nif opp == (''):\n    opp = str(opp)\n\nwhile hyp == (\"\") and adj == (\"\"):\n    print(\"you need to insert two values\")\n    hyp = int(input(\"hypotenuse length:\"))\n    adj = int(input(\"adjacent length:\"))\n    opp = int(input(\"opposite length:\"))\n\nwhile hyp == (\"\") and opp == (\"\"):\n             print(\"you need to insert two values\")\n             hyp = int(input(\"hypotenuse length:\"))\n             adj = int(input(\"adjacent length:\"))\n             opp = int(input(\"opposite length:\"))\n\nwhile adj == (\"\") and opp == (\"\"):\n             print(\"you need to insert two values\")\n             hyp = int(input(\"hypotenuse length:\"))\n             adj = int(input(\"adjacent length:\"))\n             opp = int(input(\"opposite length:\"))\n\nwhile adj == (\"\") and opp == (\"\"):\n             print(\"you need to insert two values\")\n             hyp = int(input(\"hypotenuse length:\"))\n             adj = int(input(\"adjacent length:\"))\n             opp = int(input(\"opposite length:\"))\n\nwhile hyp == (\"\") and adj == (\"\") and opp == (\"\"):\n             print(\"you need to insert two values\")\n             hyp = int(input(\"hypotenuse length:\"))\n             adj = int(input(\"adjacent length:\"))\n             opp = int(input(\"opposite length:\"))\n</code></pre>\n\n<p>I'm trying to create a Pythagoras calculator yet when I ask people to insert the length of the sides it pops up an error which says that basically I'm trying to use an int as a string ( in validation), I'm aware that I can\u00b4t use an int as a string I just can\u00b4t figure out how to operate with both string and integers in the same input ( I ask for an input and it is both a string and an integer).</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 3891, "user_id": 2326911, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/173ece6e1a474bf45d2dee00f651b543?s=128&d=identicon&r=PG&f=1", "display_name": "\u1d00\u0280\u1d0d\u1d00\u0274", "link": "https://stackoverflow.com/users/2326911/%e1%b4%80%ca%80%e1%b4%8d%e1%b4%80%c9%b4"}, "reply_to_user": {"reputation": 197, "user_id": 4071069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d893d72b5b6a526398e9d9569f36cd?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Josh", "link": "https://stackoverflow.com/users/4071069/roger-josh"}, "edited": false, "score": 0, "creation_date": 1452107665, "post_id": 34640810, "comment_id": 57027395, "body": "@RogerJosh when you use 1.next its the link to 2 when you change it to 3 the link to 2 is removing"}, {"owner": {"reputation": 197, "user_id": 4071069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d893d72b5b6a526398e9d9569f36cd?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Josh", "link": "https://stackoverflow.com/users/4071069/roger-josh"}, "edited": false, "score": 0, "creation_date": 1452107742, "post_id": 34640810, "comment_id": 57027440, "body": "Thank you so much, Arman. Just one last question. I understand that the 1&#39;s next would now be 3, but wouldn&#39;t there also be a link from 2 to 3 still? How does 2 get garbage collected?"}, {"owner": {"reputation": 3891, "user_id": 2326911, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/173ece6e1a474bf45d2dee00f651b543?s=128&d=identicon&r=PG&f=1", "display_name": "\u1d00\u0280\u1d0d\u1d00\u0274", "link": "https://stackoverflow.com/users/2326911/%e1%b4%80%ca%80%e1%b4%8d%e1%b4%80%c9%b4"}, "reply_to_user": {"reputation": 197, "user_id": 4071069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d893d72b5b6a526398e9d9569f36cd?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Josh", "link": "https://stackoverflow.com/users/4071069/roger-josh"}, "edited": false, "score": 1, "creation_date": 1452107809, "post_id": 34640810, "comment_id": 57027485, "body": "@RogerJosh the link between 2 and 3 is not important now , cause 2 is now deleted and when you trace throw nodes you never reach 2 node"}, {"owner": {"reputation": 197, "user_id": 4071069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d893d72b5b6a526398e9d9569f36cd?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Josh", "link": "https://stackoverflow.com/users/4071069/roger-josh"}, "edited": false, "score": 0, "creation_date": 1452107912, "post_id": 34640810, "comment_id": 57027547, "body": "Thank you! That makes sense"}], "tags": [], "owner": {"reputation": 3891, "user_id": 2326911, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/173ece6e1a474bf45d2dee00f651b543?s=128&d=identicon&r=PG&f=1", "display_name": "\u1d00\u0280\u1d0d\u1d00\u0274", "link": "https://stackoverflow.com/users/2326911/%e1%b4%80%ca%80%e1%b4%8d%e1%b4%80%c9%b4"}, "is_accepted": false, "score": 1, "last_activity_date": 1452107575, "last_edit_date": 1452107575, "creation_date": 1452107271, "answer_id": 34640810, "question_id": 34640782, "link": "https://stackoverflow.com/questions/34640782/deleting-node-from-a-singly-linked-list-except-for-the-tail/34640810#34640810", "title": "Deleting node from a singly linked list (except for the tail)", "body": "<p>It means that the link to next node is removed and this node links to next.next node , it means the next node is deleted and its value replace with this node value.\nfor example we have following list:</p>\n\n<pre><code>1-&gt;2-&gt;3-&gt;4\n1.next(2) = 1.next.next(3)\n</code></pre>\n\n<p>so list updatedt to:</p>\n\n<pre><code>1-&gt;3-&gt;4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 5744199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37074cdf0f6c47a5cf52bf7508cc0b58?s=128&d=identicon&r=PG&f=1", "display_name": "LiamG", "link": "https://stackoverflow.com/users/5744199/liamg"}, "is_accepted": false, "score": 2, "last_activity_date": 1452107421, "creation_date": 1452107421, "answer_id": 34640856, "question_id": 34640782, "link": "https://stackoverflow.com/questions/34640782/deleting-node-from-a-singly-linked-list-except-for-the-tail/34640856#34640856", "title": "Deleting node from a singly linked list (except for the tail)", "body": "<p>NodeA -> NodeB -> NodeC</p>\n\n<p>So currently NodeA.next is NodeB </p>\n\n<p>by assinging NodeA.next = NodeA.next.next we get NodeA.next = NodeB.next which makes</p>\n\n<p>NodeA.next = NodeC </p>\n\n<p>so the chain is now </p>\n\n<p>NodeA -> NodeC</p>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 4071069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d893d72b5b6a526398e9d9569f36cd?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Josh", "link": "https://stackoverflow.com/users/4071069/roger-josh"}, "edited": false, "score": 0, "creation_date": 1452107975, "post_id": 34640941, "comment_id": 57027590, "body": "Perfect explanation! Thank you"}, {"owner": {"reputation": 197, "user_id": 4071069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d893d72b5b6a526398e9d9569f36cd?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Josh", "link": "https://stackoverflow.com/users/4071069/roger-josh"}, "edited": false, "score": 0, "creation_date": 1452108042, "post_id": 34640941, "comment_id": 57027629, "body": "So for the case of the tail in the linked list, this wouldn&#39;t work because when the node is the tail, node.next would be None, right?"}, {"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "reply_to_user": {"reputation": 197, "user_id": 4071069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d893d72b5b6a526398e9d9569f36cd?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Josh", "link": "https://stackoverflow.com/users/4071069/roger-josh"}, "edited": false, "score": 0, "creation_date": 1452108634, "post_id": 34640941, "comment_id": 57027986, "body": "If the <code>node.next</code> (the node we&#39;re deleting) is the tail, then <code>node.next.next</code> is <code>None</code>, but the logic above is fine because then <code>node.next</code> will be set to <code>None</code> and <code>node</code> will be the new tail"}, {"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "reply_to_user": {"reputation": 197, "user_id": 4071069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d893d72b5b6a526398e9d9569f36cd?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Josh", "link": "https://stackoverflow.com/users/4071069/roger-josh"}, "edited": false, "score": 1, "creation_date": 1452108678, "post_id": 34640941, "comment_id": 57028021, "body": "That being said, I&#39;m not sure why you&#39;re moving the <code>node.val</code> around. You shouldn&#39;t need to do that."}], "tags": [], "owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "is_accepted": true, "score": 3, "last_activity_date": 1452107659, "creation_date": 1452107659, "answer_id": 34640941, "question_id": 34640782, "link": "https://stackoverflow.com/questions/34640782/deleting-node-from-a-singly-linked-list-except-for-the-tail/34640941#34640941", "title": "Deleting node from a singly linked list (except for the tail)", "body": "<p>Imagine the following linked list nodes (where n2 is the node you're removing)</p>\n\n<pre><code>... -&gt; n1 -&gt; n2 -&gt; n3 -&gt; ...\n node -^     ^     ^- node.next.next\n             |\n     node.next\n</code></pre>\n\n<p>So if you set <code>node.next = node.next.next</code> you get this:</p>\n\n<pre><code>             n2\n             |\n             v\n... -&gt; n1 -&gt; n3 -&gt; ...\n node -^     ^     \n             |      \n     node.next\n</code></pre>\n\n<p>And since now nothing is referring to n2 once the function returns it will be garbage collected.</p>\n"}], "owner": {"reputation": 197, "user_id": 4071069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d893d72b5b6a526398e9d9569f36cd?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Josh", "link": "https://stackoverflow.com/users/4071069/roger-josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 34640941, "answer_count": 3, "score": 0, "last_activity_date": 1452107659, "creation_date": 1452107157, "question_id": 34640782, "link": "https://stackoverflow.com/questions/34640782/deleting-node-from-a-singly-linked-list-except-for-the-tail", "title": "Deleting node from a singly linked list (except for the tail)", "body": "<p>I'm a beginner to programming and I'm trying to understand the following code:</p>\n\n<pre><code>    # class ListNode(object):\n    #     def __init__(self, x):\n    #         self.val = x\n    #         self.next = None\n\n    class Solution(object):\n        def deleteNode(self, node):\n            node.val = node.next.val\n            node.next = node.next.next\n</code></pre>\n\n<p>My intuition for the code is the following: \nI understand that node is a reference to an element in the linked list and node.next is a pointer to the next node. I also understand that node.val sets the value of the current node to the value of the next node. What exactly is the purpose of </p>\n\n<pre><code>    node.next = node.next.next?\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 4365, "user_id": 5050917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10a198ba2d53839818a33b751eca2404?s=128&d=identicon&r=PG", "display_name": "mgc", "link": "https://stackoverflow.com/users/5050917/mgc"}, "edited": false, "score": 0, "creation_date": 1452107868, "post_id": 34640779, "comment_id": 57027525, "body": "Do you need to have these extras infos &quot;nested&quot; on the same row of the matrix ? Coulnd&#39;t you do something like <code>a[0,0]=(1,2,&#39;abcde&#39;)</code>; <code>a[0,1]=(5,2,&#39;fghij&#39;)</code>;<code>a[0,2]=(7,9,&#39;klmno&#39;)</code> and know which row are linked (using a <i>dict</i>, or maybe an 4th element in your tuple as an identifier ?). Alternatively you can probably complete with 0/null values, like this : <code>a[1]=[(5,2,&#39;fghij&#39;),(7,9,&#39;klmno&#39;), (0, 0, None)]</code>"}, {"owner": {"reputation": 11, "user_id": 5753882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d078389015e95f2ece016b94de4819b2?s=128&d=identicon&r=PG&f=1", "display_name": "Chris0304", "link": "https://stackoverflow.com/users/5753882/chris0304"}, "reply_to_user": {"reputation": 4365, "user_id": 5050917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10a198ba2d53839818a33b751eca2404?s=128&d=identicon&r=PG", "display_name": "mgc", "link": "https://stackoverflow.com/users/5050917/mgc"}, "edited": false, "score": 0, "creation_date": 1452109422, "post_id": 34640779, "comment_id": 57028509, "body": "Hi, thank you for the question and suggestion! -- I could also use an identifier or another variable to reference. in case I use another cross-reference, I wouldn&#39;t need a 2-dimensional matrix anymore. I will have to write the fields of a[x,y] into a excel sheet, which is why I would prefer a 2-dimensional solution."}, {"owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "edited": false, "score": 0, "creation_date": 1452110354, "post_id": 34640779, "comment_id": 57029110, "body": "<i>&quot;I will have to write the fields of a[x,y] into a excel sheet, which is why I would prefer a 2-dimensional solution&quot;</i> - could you explain what you mean by this? I don&#39;t see how a 2D array would help in this case. Your data is still fundamentally &quot;3D&quot; in the sense that each individual &quot;element&quot; in the 2D array contains multiple values. Since a single cell can&#39;t contain two integers and a string, there&#39;s still no obvious way to represent <code>a</code> in a single 2D spreadsheet."}, {"owner": {"reputation": 11, "user_id": 5753882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d078389015e95f2ece016b94de4819b2?s=128&d=identicon&r=PG&f=1", "display_name": "Chris0304", "link": "https://stackoverflow.com/users/5753882/chris0304"}, "edited": false, "score": 0, "creation_date": 1452158509, "post_id": 34640779, "comment_id": 57047808, "body": "hi ali_m, I agree with you, there is not obvious way to represent a in a single 2D spreadsheet, since it has some 3D characteristics...  But I have to fit it in a Excel sheet in this non-intuitive way: All the entries of for example a[0,1] will be in one excel field, and in this excel sheet I write them into a new line inside the same field... Thats how they want it!"}, {"owner": {"reputation": 7977, "user_id": 3604159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32946c257cb4802dea738db1ecbf0c6?s=128&d=identicon&r=PG&f=1", "display_name": "TheBlackCat", "link": "https://stackoverflow.com/users/3604159/theblackcat"}, "edited": false, "score": 0, "creation_date": 1452169232, "post_id": 34640779, "comment_id": 57055061, "body": "Have you looked at <code>pandas.DataFrame</code>?  I think it is more suited to this sort of structure, especially if you want to convert it to an excel spreadsheet"}, {"owner": {"reputation": 11, "user_id": 5753882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d078389015e95f2ece016b94de4819b2?s=128&d=identicon&r=PG&f=1", "display_name": "Chris0304", "link": "https://stackoverflow.com/users/5753882/chris0304"}, "reply_to_user": {"reputation": 7977, "user_id": 3604159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32946c257cb4802dea738db1ecbf0c6?s=128&d=identicon&r=PG&f=1", "display_name": "TheBlackCat", "link": "https://stackoverflow.com/users/3604159/theblackcat"}, "edited": false, "score": 0, "creation_date": 1452176639, "post_id": 34640779, "comment_id": 57060263, "body": "@TheBlackCat, I haven&#39;t looked at it yet, but I will. Thanks for the tip."}], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1452113843, "last_edit_date": 1452113843, "creation_date": 1452109874, "answer_id": 34641574, "question_id": 34640779, "link": "https://stackoverflow.com/questions/34640779/dynamically-increase-number-of-fields-in-numpy-array/34641574#34641574", "title": "Dynamically increase number of fields in numpy array", "body": "<p>A numpy array is probably the wrong data structure for this kind of flexibility.  Once created your array <code>a</code> takes up a fixed amount of memory.  It has 15 (5*3) records, and each record contains the 2 ints and one string with 5 characters. You can modify values, but you can't add new records, or change one record into a composite of two records.</p>\n\n<p>Lists give you the flexibility to add elements and to change their nature.  A list contains pointers to objects located else where in memory.</p>\n\n<p>An array of dtype=object behaves much like a list.  Its data buffer is the same sort of pointers.  <code>a=np.zeros((3,5), dtype=object)</code> is a 2d array, where each element can be a tuple, list, number, None, tuple of tuples, etc.  But with that kind of array you loose a lot of the 2d numeric calculation abilities.</p>\n\n<p>With your structured array, the only way to increase its size or add fields is to make a new array and copy data over.  There are functions that assist in adding fields, but they do, in one way or other, what I just described.</p>\n\n<hr>\n\n<p>With your definition, there are 3 fields, <code>['Int1','Int2','Str1']</code></p>\n\n<pre><code>a=np.zeros(s, dtype=[('Int1', int),\n                     ('Int2', int),\n                     ('Str1', '|S5')])\n</code></pre>\n\n<p>Increasing the number of fields (by that concept of fields) would be something like</p>\n\n<pre><code>a1=np.zeros(s, dtype=[('Int1', int),\n                     ('Int2', int),\n                     ('Str1', '|S5'),\n                     ('Str2', '|S5')])\n</code></pre>\n\n<p>That is adding a field named 'Str2'.  You could fill it with</p>\n\n<p>for name in a.dtype.fields:\n       a1[name] = a[name]</p>\n\n<p>Now all records in a <code>a2</code> have the same data as in <code>a</code>, but they also have a blank <code>Str2</code> field.  You could set that field for each element individually, or as group with:</p>\n\n<pre><code>a['Str2'] = ...\n</code></pre>\n\n<p>But your attempt to change <code>A[0,1]</code> into a tuple of tuples is quite different.  It's like trying to replace an element of a regular numeric array with two numbers:</p>\n\n<pre><code>x = np.arange(10)\nx[3] = [3,5]\n</code></pre>\n\n<p>That works for lists, <code>x=range(10)</code>, but not for arrays.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5753882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d078389015e95f2ece016b94de4819b2?s=128&d=identicon&r=PG&f=1", "display_name": "Chris0304", "link": "https://stackoverflow.com/users/5753882/chris0304"}, "is_accepted": false, "score": 0, "last_activity_date": 1452254904, "creation_date": 1452254904, "answer_id": 34676799, "question_id": 34640779, "link": "https://stackoverflow.com/questions/34640779/dynamically-increase-number-of-fields-in-numpy-array/34676799#34676799", "title": "Dynamically increase number of fields in numpy array", "body": "<p>My code would look like this now: </p>\n\n<pre><code>s=(5,3)   \na=np.zeros(s, dtype=object)  \na[0,0]=(1,2,'abcde')  \na[0,1]=((5,2,'fghij'),(7,9,'klmno'))\n</code></pre>\n\n<p>I can see/access the entries with:</p>\n\n<pre><code>print(a[0,1])\nprint(a[0,1][0])\nprint(a[0,1][1])\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5753882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d078389015e95f2ece016b94de4819b2?s=128&d=identicon&r=PG&f=1", "display_name": "Chris0304", "link": "https://stackoverflow.com/users/5753882/chris0304"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1452254904, "creation_date": 1452107147, "last_edit_date": 1495540746, "question_id": 34640779, "link": "https://stackoverflow.com/questions/34640779/dynamically-increase-number-of-fields-in-numpy-array", "title": "Dynamically increase number of fields in numpy array", "body": "<p>With the help of \"<a href=\"https://stackoverflow.com/questions/11637045/complex-matlab-like-data-structure-in-python-numpy-scipy\">Complex matlab-like data structure in python (numpy/scipy)</a>\" I came up with:</p>\n\n<pre><code>s=(5,3)\na=np.zeros(s, dtype=[('Int1', int),\n                     ('Int2', int),\n                     ('Str1', '|S5')])\n\na[0,0]=(1,2,'abcde')\na[0,1]=((5,2,'fghij'),(7,9,'klmno'))\n</code></pre>\n\n<p>The problem is, that in some fields of my array <code>a</code>, just like in field <code>a[0,1]</code>, I want to add <em>one or more</em> extra \"information\" just like in my code  example.  I don't know how many extra information I have to write into which part of my matrix, but I will always have to write tuples with the <code>dtype=[(int, int, string)]</code>.</p>\n\n<p>Of course, I get an error when I try to write into <code>a[0,1]</code> the way I do. </p>\n\n<p>I would like to keep my matrix <code>a</code> 2-dimensional, but I would like to write several instances of my <code>dtype=[int, int, str]</code> into one field, similar to what I tried in field <code>a[0,1]</code>.</p>\n\n<p>Hopefully, I could explain my problem in a comprehensible way. </p>\n"}, {"tags": ["python", "compiler-errors", "raspberry-pi", "sensors", "raspberry-pi2"], "comments": [{"owner": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1452108664, "post_id": 34640777, "comment_id": 57028010, "body": "Define stop1 and start1 outside the while loop"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5753910, "user_type": "registered", "profile_image": "https://graph.facebook.com/1936584419900612/picture?type=large", "display_name": "Haydon Alexander", "link": "https://stackoverflow.com/users/5753910/haydon-alexander"}, "edited": false, "score": 0, "creation_date": 1452195624, "post_id": 34641579, "comment_id": 57072927, "body": "Thanks so much for your help, this solved the problem."}], "tags": [], "owner": {"reputation": 748, "user_id": 3105062, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/alOD9.jpg?s=128&g=1", "display_name": "Svend Feldt", "link": "https://stackoverflow.com/users/3105062/svend-feldt"}, "is_accepted": true, "score": 0, "last_activity_date": 1452109910, "creation_date": 1452109910, "answer_id": 34641579, "question_id": 34640777, "link": "https://stackoverflow.com/questions/34640777/ultrasonic-sensors-with-raspberry-pi-2b-creates-compilation-error/34641579#34641579", "title": "Ultrasonic Sensors with Raspberry pi 2b+ creates compilation error", "body": "<p>I think you have a timing issue, that causes your code to run differently depending on \"small\" timing changes. </p>\n\n<p>Your code fails due to not having initialized start1. </p>\n\n<p>When you have a delay in your code (print \"anything\") is a significant delay, the while loop will run and initialize start1</p>\n\n<p>When you do not have the delay, </p>\n\n<pre><code>GPIO.input(ECHO1)\n</code></pre>\n\n<p>will not equal zero, the while loop will not run and you get the error. </p>\n\n<p>I think you should initialie your variables and you should check if there are timing requirements you are not aware of. </p>\n\n<p>Also please note running python on a raspberry pi, will not be a real time system, so please be aware of real time constraints and be careful of making code that is timing sensitive. </p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 6868538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nOIHV9fkUkM/AAAAAAAAAAI/AAAAAAAAATg/Rl76PrHIqRo/photo.jpg?sz=128", "display_name": "Borhan Uddin", "link": "https://stackoverflow.com/users/6868538/borhan-uddin"}, "is_accepted": false, "score": 0, "last_activity_date": 1521692252, "creation_date": 1521692252, "answer_id": 49420470, "question_id": 34640777, "link": "https://stackoverflow.com/questions/34640777/ultrasonic-sensors-with-raspberry-pi-2b-creates-compilation-error/49420470#49420470", "title": "Ultrasonic Sensors with Raspberry pi 2b+ creates compilation error", "body": "<p>I think you have declaration issue. At first you need to declare then declare global. I changed line number 6,7,40 and 44. you see</p>\n\n<pre><code>import RPi.GPIO as GPIO\nimport time\n\nTRIG1 = 13\nECHO1 = 15\nstart1=0.00\nstop1=0.00\n##TRIG2 = 22\n##ECHO2 = 18\n##\n##TRIG3 = 37\n##ECHO3 = 40\n\nGPIO.setmode(GPIO.BOARD)\nGPIO.setwarnings(False)\n\nGPIO.setup(TRIG1, GPIO.OUT)\nGPIO.output(TRIG1, 0)\n\n##GPIO.setup(TRIG2, GPIO.OUT)\n##GPIO.output(TRIG2, 0)\n##\n##GPIO.setup(TRIG3, GPIO.OUT)\n##GPIO.output(TRIG3, 0)\n\nGPIO.setup(ECHO1, GPIO.IN)\n##GPIO.setup(ECHO2, GPIO.IN)\n##GPIO.setup(ECHO3, GPIO.IN)\n\nwhile True:\n    time.sleep(0.1)\n\n    GPIO.output(TRIG1, 1)\n    time.sleep(0.00001)\n    GPIO.output(TRIG1, 0)\n    print(\"anything\")\n    while GPIO.input(ECHO1) == 0:\n        print(\"Works\")\n        time.sleep(1)\n        global start1\n        start1 = time.time()\n\n    while GPIO.input(ECHO1) == 1:\n        global stop1\n        stop1 = time.time()\n    print(\"sensor 1:\")\n    print (stop1 - start1) * 17000\n\n##        time.sleep(0.1)\n##\n##        GPIO.output(TRIG2, 1)\n##        time.sleep(0.00001)\n##        GPIO.output(TRIG2, 0)\n##\n##        while GPIO.input(ECHO2) == 0:\n##                start2 = time.time()\n##\n##        while GPIO.input(ECHO2) == 1:\n##                stop2 = time.time()\n##        print(\"sensor 2:\")\n##        print (stop2-start2) * 17000\n##\n##        time.sleep(0.1)\n##\n##        GPIO.output(TRIG3, 1)\n##        time.sleep(0.00001)\n##        GPIO.output(TRIG3, 0)\n##\n##        while GPIO.input(ECHO3) == 0:\n##                start3 = time.time()\n##\n##        while GPIO.input(ECHO3) == 1:\n##                stop3 = time.time()\n##        print(\"sensor 3:\")\n##        print (stop3-start3) * 17000\n\nGPIO.cleanup()\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5753910, "user_type": "registered", "profile_image": "https://graph.facebook.com/1936584419900612/picture?type=large", "display_name": "Haydon Alexander", "link": "https://stackoverflow.com/users/5753910/haydon-alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "accepted_answer_id": 34641579, "answer_count": 2, "score": 0, "last_activity_date": 1521692252, "creation_date": 1452107132, "question_id": 34640777, "link": "https://stackoverflow.com/questions/34640777/ultrasonic-sensors-with-raspberry-pi-2b-creates-compilation-error", "title": "Ultrasonic Sensors with Raspberry pi 2b+ creates compilation error", "body": "<p>I have set up 3 HC-SR04 ultrasonic sensors to operate continuously with raspberry pi. Two of the sensors work perfectly while one is being very inconsistent. I have replaced the wires, sensor, and breadboard multiple times, as well as changing the trig and echo pins associated with the sensor. I have debugged the code and have isolated the problem sensor in the code below:</p>\n\n<pre><code>import RPi.GPIO as GPIO\nimport time\n\nTRIG1 = 13\nECHO1 = 15\n\n##TRIG2 = 22\n##ECHO2 = 18\n##\n##TRIG3 = 37\n##ECHO3 = 40\n\nGPIO.setmode(GPIO.BOARD)\nGPIO.setwarnings(False)\n\nGPIO.setup(TRIG1, GPIO.OUT)\nGPIO.output(TRIG1, 0)\n\n##GPIO.setup(TRIG2, GPIO.OUT)\n##GPIO.output(TRIG2, 0)\n##\n##GPIO.setup(TRIG3, GPIO.OUT)\n##GPIO.output(TRIG3, 0)\n\nGPIO.setup(ECHO1, GPIO.IN)\n##GPIO.setup(ECHO2, GPIO.IN)\n##GPIO.setup(ECHO3, GPIO.IN)\n\nwhile True:\n        time.sleep(0.1)\n\n        GPIO.output(TRIG1, 1)\n        time.sleep(0.00001)\n        GPIO.output(TRIG1, 0)\n        print(\"anything\")\n        while GPIO.input(ECHO1) == 0:\n                print(\"Works\")\n                time.sleep(1)\n                start1 = time.time()\n\n        while GPIO.input(ECHO1) ==1:\n                stop1 = time.time()\n        print(\"sensor 1:\")\n        print (stop1-start1) * 17000\n\n##        time.sleep(0.1)\n##\n##        GPIO.output(TRIG2, 1)\n##        time.sleep(0.00001)\n##        GPIO.output(TRIG2, 0)\n##\n##        while GPIO.input(ECHO2) == 0:\n##                start2 = time.time()\n##\n##        while GPIO.input(ECHO2) == 1:\n##                stop2 = time.time()\n##        print(\"sensor 2:\")\n##        print (stop2-start2) * 17000\n##\n##        time.sleep(0.1)\n##\n##        GPIO.output(TRIG3, 1)\n##        time.sleep(0.00001)\n##        GPIO.output(TRIG3, 0)\n##\n##        while GPIO.input(ECHO3) == 0:\n##                start3 = time.time()\n##\n##        while GPIO.input(ECHO3) == 1:\n##                stop3 = time.time()\n##        print(\"sensor 3:\")\n##        print (stop3-start3) * 17000\n\nGPIO.cleanup()\n</code></pre>\n\n<p>The line that reads \"print(\"anything\")\" allows the code to compile, but take no distance reading and will continue to print \"Works\" indicating that it is running continuously in the first while loop. Unexpectedly when the \"print(\"anything\")\" line is removed, the error:</p>\n\n<pre><code>print (stop1-start1) * 17000\nNameError: name 'start1' is not defined\n</code></pre>\n\n<p>prints to the terminal. The code that is commented out above, which is identical to the code for the functioning sensors works without error when isolated from the code that is currently uncommented. Any thoughts or suggestions would be greatly appreciated.</p>\n\n<p>Thanks.</p>\n"}]