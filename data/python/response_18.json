[{"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 286, "user_id": 3408454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff230afe71e06b8852fae0371213e2a6?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Witschey", "link": "https://stackoverflow.com/users/3408454/jim-witschey"}, "edited": false, "score": 4, "creation_date": 1431560923, "post_id": 30227017, "comment_id": 48557812, "body": "The title concerns duplicate keys (which are not possible in Python dictionaries), but the question mentions multiple keys. Which do you mean?"}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1431560938, "post_id": 30227017, "comment_id": 48557814, "body": "You already know the answer."}, {"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 1, "creation_date": 1431561110, "post_id": 30227017, "comment_id": 48557873, "body": "Try to <code>print name_to_age</code> and see what happens when you override a key..."}, {"owner": {"reputation": 248, "user_id": 2850938, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100002066524668/picture?type=large", "display_name": "Fernando Karpinski", "link": "https://stackoverflow.com/users/2850938/fernando-karpinski"}, "edited": false, "score": 0, "creation_date": 1431561128, "post_id": 30227017, "comment_id": 48557876, "body": "At least in Python 3.4.3, in the interactive console, I was able to issue the command <code>A = { &#39;a&#39;: 1, &#39;a&#39;: 2 }</code> without raising an error. The result was the dictionary with the second combination only, which I believe replaced the first one."}, {"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "reply_to_user": {"reputation": 248, "user_id": 2850938, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100002066524668/picture?type=large", "display_name": "Fernando Karpinski", "link": "https://stackoverflow.com/users/2850938/fernando-karpinski"}, "edited": false, "score": 2, "creation_date": 1431561169, "post_id": 30227017, "comment_id": 48557885, "body": "@FernandoKarpinski it shouldn&#39;t raise an error because overriding an existing key is perfectly valid. As I wrote in the comment above - try to print your dictionary and see how it looks like."}, {"owner": {"reputation": 248, "user_id": 2850938, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100002066524668/picture?type=large", "display_name": "Fernando Karpinski", "link": "https://stackoverflow.com/users/2850938/fernando-karpinski"}, "edited": false, "score": 0, "creation_date": 1431561199, "post_id": 30227017, "comment_id": 48557892, "body": "I see. Thanks for pointing that out."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1431563214, "post_id": 30227017, "comment_id": 48558461, "body": "The usual way to have a &quot;multidict&quot; in python is just using a normal dict using lists as the values.  Some web frameworks implement a custom class for this because it&#39;s a common structure for query strings / GET params - e.g. Django&#39;s <code>QueryDict</code>"}, {"owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "edited": false, "score": 0, "creation_date": 1431665197, "post_id": 30227017, "comment_id": 48603799, "body": "Updated my answer to allow for the possibility of duplicate keys and provided a function to detect them."}], "answers": [{"comments": [{"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 1, "creation_date": 1431562609, "post_id": 30227242, "comment_id": 48558289, "body": "Disagree.  The keys are the memory location of each object, which is unique. &gt;&gt;&gt; [id(a) for a in alternate] Out[168]: [4489414544, 4489414352, 4489414480]"}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 0, "creation_date": 1431563355, "post_id": 30227242, "comment_id": 48558498, "body": "If the keys were truly identical, then doing a check with <code>is</code> would yield True (e.g. person(&quot;Andrew&quot;) is person(&quot;Andrew&quot;) yields False because two separate objects are created, each residing at their own memory location)."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1431563480, "post_id": 30227242, "comment_id": 48558529, "body": "Also you need to maintain a reference to the exact instance used for the key, because <code>person.__eq__</code> isn&#39;t defined.  That makes this approach more or less useless."}, {"owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "edited": false, "score": 0, "creation_date": 1431584611, "post_id": 30227242, "comment_id": 48564323, "body": "How about now, with the <code>__eq__</code> method?"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1431607750, "post_id": 30227242, "comment_id": 48577186, "body": "You&#39;ve now violated the contract of <code>__eq__</code>, ie that <code>x.__eq__(y)</code> must imply <code>x.__hash__() == y.__hash__()</code>"}, {"owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "edited": false, "score": 0, "creation_date": 1431611823, "post_id": 30227242, "comment_id": 48579855, "body": "OK, now it&#39;s back in the contract."}, {"owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1431612934, "post_id": 30227242, "comment_id": 48580652, "body": "Updated to use any dictionary key.  Don&#39;t know about this contract, @Eric, can you show a reference to it?"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1431620704, "post_id": 30227242, "comment_id": 48585889, "body": "See <a href=\"https://docs.python.org/2/reference/datamodel.html#object.__hash__\" rel=\"nofollow noreferrer\"><code>__hash__</code></a>: <i>&quot;The only required property is that objects which compare equal have the same hash value&quot;</i>. You&#39;re inheriting <code>object.__hash__</code>, which conflicts with your <code>__eq__</code>. I&#39;d argue that you do not want an <code>__eq__</code> here at all"}, {"owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1431624008, "post_id": 30227242, "comment_id": 48587868, "body": "That&#39;s how it started, in fact.  @wim thought otherwise."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1431649141, "post_id": 30227242, "comment_id": 48599575, "body": "I don&#39;t think otherwise - my point is that to have a useful dict, you need a useful <code>__eq__</code> method (i.e. something better than identity).  But if you implement <code>__eq__</code> you have to take care to implement <code>__hash__</code> correctly.  There is no way to win with the approach proposed in this answer, if you need a multidict you should use a dict with lists as the values."}], "tags": [], "owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "is_accepted": false, "score": 1, "last_activity_date": 1431665105, "last_edit_date": 1495540959, "creation_date": 1431562211, "answer_id": 30227242, "question_id": 30227017, "link": "https://stackoverflow.com/questions/30227017/python-check-duplicates-key-in-dictionary/30227242#30227242", "title": "python check duplicates key in dictionary", "body": "<p>The original question is about writing a function that can detect duplicate keys in a dictionary.  Strictly speaking, a dictionary cannot contain duplicate keys but it can contain objects with identical values: <a href=\"http://www.wellho.net/mouth/3934_Multiple-identical-keys-in-a-Python-dict-yes-you-can-.html\" rel=\"nofollow noreferrer\">Multiple identical keys in a Python dict - yes, you can!</a></p>\n\n<p>The trick is to use objects instead of strings as keys, and to override the hash comparison (see <a href=\"http://www.shutupandship.com/2012/02/how-hash-collisions-are-resolved-in.html\" rel=\"nofollow noreferrer\">How hash collisions are resolved in Python dictionaries</a>):</p>\n\n<pre><code>class person(object):\n    def __init__(self,name):\n        self.name = name\n    def __eq__(self, other):\n        return False\n\n\nalternate = {person(\"Andrew\") : \"Cambridge\", person(\"Barbara\") : \"Bloomsbury\", person(\"Andrew\"): \"Corsica\"}\nprint alternate\n</code></pre>\n\n<p>The comments below debate the technical aspects of whether these are duplicate keys or not, but this is a side issue.  Back to the original question, if a dictionary could actually hold duplicate keys, what function would detect them?</p>\n\n<p>To find duplicate keys, you could do this:</p>\n\n<pre><code>def list_duplicates(d):\n    seen = set()\n    duplicates = set( x.name for x in d if x.name in seen or seen.add(x.name) )\n    return list( duplicates )\n</code></pre>\n\n<p>(adapted from another question: <a href=\"https://stackoverflow.com/q/9835762/584846\">Find and list duplicates in Python list</a>)</p>\n\n<p>Yes, multidict and querydict structures create lists of values for each key, but those don't address the original question's supposition of duplicate keys.  This answer creates a scenario where duplicate \"keys\" are possible and provides a function to detect them.</p>\n"}], "owner": {"reputation": 427, "user_id": 1741339, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/31771476843f0cbdd4b52c5d144c4e00?s=128&d=identicon&r=PG", "display_name": "user1741339", "link": "https://stackoverflow.com/users/1741339/user1741339"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12103, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1431665105, "creation_date": 1431560644, "question_id": 30227017, "link": "https://stackoverflow.com/questions/30227017/python-check-duplicates-key-in-dictionary", "title": "python check duplicates key in dictionary", "body": "<p>I need help trying to write a function for detecting if there is a dictionary which contains multiple keys. So im stuck since when using name_to_age the dictionary will already be unique so I am not sure how I can apply this check.</p>\n\n<p>for e.g</p>\n\n<pre><code># the test function should raise an error since there is 2 duplicate keys\nname_to_age = {'Sam': 2, 'Sam': 4, 'Alex: 14}\n</code></pre>\n"}, {"tags": ["python", "django", "orm", "foreign-keys"], "answers": [{"tags": [], "owner": {"reputation": 86856, "user_id": 1628832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090ce0cca74f8cc6766366460b956a0f?s=128&d=identicon&r=PG&f=1", "display_name": "karthikr", "link": "https://stackoverflow.com/users/1628832/karthikr"}, "is_accepted": true, "score": 1, "last_activity_date": 1431561259, "creation_date": 1431561259, "answer_id": 30227099, "question_id": 30226977, "link": "https://stackoverflow.com/questions/30226977/create-two-foreignkey-to-one-class/30227099#30227099", "title": "Create two ForeignKey to one class", "body": "<p>Very clearly, you need to add a <a href=\"https://docs.djangoproject.com/en/1.8/ref/models/fields/#django.db.models.ForeignKey.related_name\" rel=\"nofollow\"><code>related_name</code> attribute</a></p>\n\n<pre><code>cuentaOrigen = models.OneToOneField(Cuenta, related_name=\"cuentaOrigen\")\ncuentaDestino = models.OneToOneField(Cuenta, related_name=\"cuentaDestino\")\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4897796, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qt58Bb4Vr6E/AAAAAAAAAAI/AAAAAAAABYg/CQt_Qw8HTE0/photo.jpg?sz=128", "display_name": "Fiser", "link": "https://stackoverflow.com/users/4897796/fiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 30227099, "answer_count": 1, "score": -1, "last_activity_date": 1431561286, "creation_date": 1431560346, "last_edit_date": 1431561286, "question_id": 30226977, "link": "https://stackoverflow.com/questions/30226977/create-two-foreignkey-to-one-class", "title": "Create two ForeignKey to one class", "body": "<p>I have this problem in this class of the model.</p>\n\n<pre><code>class Transferencia(models.Model):\n    descripcion = models.CharField(max_length=200)\n    importe = models.FloatField()\n    tipo = models.ManyToManyField(Tipo)\n    cuentaOrigen = models.OneToOneField(Cuenta)\n    cuentaDestino = models.OneToOneField(Cuenta)\n    monedaReferencia = models.ForeignKey(Moneda)\n    fechaApunte = models.DateTimeField('date published')\n    factura = models.ForeignKey(Factura)\n    def __str__(self):\n        return \"Importe: \" + self.importe\n</code></pre>\n\n<p>And I've this error</p>\n\n<pre><code>ERRORS: walletGestor.Transferencia.cuentaDestino: (fields.E304) Reverse accessor for 'Transferencia.cuentaDestino' clashes with reverse accessor for 'Transferencia.cuentaOrigen'.  HINT: Add or change a related_name argument to the definition for 'Transferencia.cuentaDestino' or 'Transferencia.cuentaOrigen'. walletGestor.Transferencia.cuentaDestino: (fields.E305) Reverse query name for 'Transferencia.cuentaDestino' clashes with reverse query name for 'Transferencia.cuentaOrigen'.     HINT: Add or change a related_name argument to the definition for 'Transferencia.cuentaDestino' or 'Transferencia.cuentaOrigen'. walletGestor.Transferencia.cuentaOrigen: (fields.E304) Reverse accessor for 'Transferencia.cuentaOrigen' clashes with reverse accessor for 'Transferencia.cuentaDestino'.  HINT: Add or change a related_name argument to the definition for 'Transferencia.cuentaOrigen' or 'Transferencia.cuentaDestino'. walletGestor.Transferencia.cuentaOrigen: (fields.E305) Reverse query name for 'Transferencia.cuentaOrigen' clashes with reverse query name for 'Transferencia.cuentaDestino'.  HINT: Add or change a related_name argument to the definition for 'Transferencia.cuentaOrigen' or 'Transferencia.cuentaDestino'.\n\nSystem check identified 4 issues (0 silenced).\n</code></pre>\n\n<p>Help me please, I need determinate the origin account and the destiny account.</p>\n\n<p>This is the class account</p>\n\n<pre><code>class Cuenta(models.Model):\n    nombreCuenta = models.CharField(max_length=200)\n    tipoCuenta = models.CharField(max_length=200)\n    importeInicial = models.FloatField()\n    excluirEstadisticas = models.BooleanField()\n    def __str__(self):\n        return self.nombreCuenta +\": \" + self.importeInicial\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "edited": false, "score": 1, "creation_date": 1431560172, "post_id": 30226891, "comment_id": 48557603, "body": "You could write out the current hash to a file and then read that file on start."}, {"owner": {"reputation": 17046, "user_id": 364980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf8ae304409c53b006b47101fe61e34?s=128&d=identicon&r=PG", "display_name": "James Mills", "link": "https://stackoverflow.com/users/364980/james-mills"}, "edited": false, "score": 0, "creation_date": 1431562256, "post_id": 30226891, "comment_id": 48558181, "body": "Way to long IHMO to post here; but here&#39;s a <a href=\"https://gist.github.com/prologic/aa6e46a096e8a0c835d5\" rel=\"nofollow noreferrer\">simplevcs.py</a>"}], "answers": [{"tags": [], "owner": {"reputation": 94, "user_id": 4513904, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100001743495392/picture?type=large", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/4513904/cannon-moyer"}, "is_accepted": true, "score": 2, "last_activity_date": 1431560178, "creation_date": 1431560178, "answer_id": 30226943, "question_id": 30226891, "link": "https://stackoverflow.com/questions/30226891/how-to-compare-two-versions-of-same-file-old-and-new-and-detect-if-there-were/30226943#30226943", "title": "How to compare two versions of same file (old and new), and detect if there were some changes?", "body": "<p>Just simply save the hash to a file like file.txt and then when you need to compare a hash just read from your file.txt and compare the two strings. \nHere is an example of how to read and write to files in python. \n<a href=\"http://www.pythonforbeginners.com/files/reading-and-writing-files-in-python\" rel=\"nofollow\">http://www.pythonforbeginners.com/files/reading-and-writing-files-in-python</a></p>\n"}, {"tags": [], "owner": {"reputation": 5903, "user_id": 790107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4de1c480ed937e9291c4dcbf252e6d1f?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/790107/david"}, "is_accepted": false, "score": 1, "last_activity_date": 1431560864, "creation_date": 1431560864, "answer_id": 30227046, "question_id": 30226891, "link": "https://stackoverflow.com/questions/30226891/how-to-compare-two-versions-of-same-file-old-and-new-and-detect-if-there-were/30227046#30227046", "title": "How to compare two versions of same file (old and new), and detect if there were some changes?", "body": "<p>For relatively simple comparisons, use <a href=\"https://docs.python.org/2/library/filecmp.html\" rel=\"nofollow\">filecmp</a>.  For finer control and feedback, use <a href=\"https://docs.python.org/2/library/difflib.html#module-difflib\" rel=\"nofollow\">difflib</a>, which is similar to the *nix utility, <code>diff</code>.</p>\n"}], "owner": {"reputation": 325, "user_id": 4897764, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8bd3b47484d9e3f79075fea81c485963?s=128&d=identicon&r=PG&f=1", "display_name": "bobby", "link": "https://stackoverflow.com/users/4897764/bobby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 2, "accepted_answer_id": 30226943, "answer_count": 2, "score": 2, "last_activity_date": 1431560864, "creation_date": 1431559963, "question_id": 30226891, "link": "https://stackoverflow.com/questions/30226891/how-to-compare-two-versions-of-same-file-old-and-new-and-detect-if-there-were", "title": "How to compare two versions of same file (old and new), and detect if there were some changes?", "body": "<p>I am new at both, python and stackoverflow, so please have that on mind. I tried to do this myself and manage to do it, but it works only if i hardcode hash number of previous version like this one in hash1, and then compare with hash number of currently version. I wolud like that program every time save hash number of currently version and then with every run compare it with newer version, and if the file is changed do something.</p>\n\n<p>This is my code</p>\n\n<pre><code>import hashlib\n\nhash1 = '3379b3b9b9c82650831db2aba0cf4e99'\n\nhasher = hashlib.md5()\n    with open('word.txt', 'rb') as afile:\n    buf = afile.read()\n    hasher.update(buf)\n    hash2 = hasher.hexdigest()\n\nif hash1 == hash2:\n    print('same version')\nelse\n    print('diffrent version')\n</code></pre>\n"}, {"tags": ["python", "paypal", "payflowpro", "returnurl", "payflowlink"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431560347, "post_id": 30226872, "comment_id": 48557647, "body": "aparently paypal appends some kind of action to the url .... at least thats what it looks like ... just make a route rule to handle it ..."}, {"owner": {"reputation": 85, "user_id": 1163937, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/TC2Iu.jpg?s=128&g=1", "display_name": "Tobias", "link": "https://stackoverflow.com/users/1163937/tobias"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431560982, "post_id": 30226872, "comment_id": 48557831, "body": "yes I could do that, but since I can pass the return url as parameter to paypal I expect the answer to be send to the url I specified. Also I can&#39;t find anything about this action in any documentation."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431561300, "post_id": 30226872, "comment_id": 48557925, "body": "well i guarantee you arent ending up there by magic so A. paypal is redirecting to that url or B. you are redirecting to that url, those are really the only two possibilities ... (are you using some weird paypal for python library that might be doing this for you perhaps?) are you using <code>action</code> which was previously defined somehow to redirect? without seeing your code i doubt I can be much more help :/"}, {"owner": {"reputation": 85, "user_id": 1163937, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/TC2Iu.jpg?s=128&g=1", "display_name": "Tobias", "link": "https://stackoverflow.com/users/1163937/tobias"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431563969, "post_id": 30226872, "comment_id": 48558658, "body": "I am pretty sure its paypal sending me there because I set the url in the paypal manager and not in my code. But anyways here is my code"}], "owner": {"reputation": 85, "user_id": 1163937, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/TC2Iu.jpg?s=128&g=1", "display_name": "Tobias", "link": "https://stackoverflow.com/users/1163937/tobias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 579, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1433681053, "creation_date": 1431559840, "last_edit_date": 1431563928, "question_id": 30226872, "link": "https://stackoverflow.com/questions/30226872/paypal-payflow-pro-return-url-does-not-work-correctly-processtransaction-do", "title": "Paypal Payflow Pro return url does not work correctly - &#39;processTransaction.do&#39; appended - raises 404", "body": "<p>currently I am trying to migrate a working php paypal payflow implementation to a new python-based system. </p>\n\n<p>I use secure token together with hosted checkout pages. The secure token works fine and I get redirected to the checkout page as well (although it has horrible formatting errors).</p>\n\n<p>THE PROBLEM: after the payment it should redirect to the return url. This works BUT 'processTransaction.do' is appended to it. So my return url is defined as:<br>\n<code>'<a href=\"https://mywebsite.com/paypal/succes/\" rel=\"nofollow\">https://mywebsite.com/paypal/succes/</a>'</code><br>\nbut i get redirected to<br>\n<code>'<a href=\"https://mywebsite.com/paypal/succes/processTransaction.do\" rel=\"nofollow\">https://mywebsite.com/paypal/succes/processTransaction.do</a>'</code><br>\nand this raises a 404.</p>\n\n<p>My secure token request parameters:</p>\n\n<pre><code>params = {}\nparams[\"PARTNER\"] = \"paypal\"\nparams[\"VENDOR\"] = \"....\"\nparams[\"TRXTYPE\"] = \"S\"\nparams[\"AMT\"] = payment_amount    #amount to pay\nparams[\"CREATESECURETOKEN\"] = \"Y\"\nparams[\"SECURETOKENID\"] = time.time() #needs to be unique\nparams[\"USER\"] = \"....\"\nparams[\"PWD\"] = \"....\"\n</code></pre>\n\n<p>Then I send the request and catch the return which looks like this:</p>\n\n<pre><code>RESULT=0&amp;SECURETOKEN=QQQc0rQZ8TkKSNMqU3Mg2og7o\nSECURETOKENID=1431563231.24&amp;RESPMSG=Approved  \n</code></pre>\n\n<p>Afterwards I send the request for the checkout page with the following paramters:</p>\n\n<pre><code>params[\"SECURETOKEN\"] = securetoken\nparams[\"SECURETOKENID\"] = securetokenid\n</code></pre>\n\n<p>to: <a href=\"https://payflowpro.paypal.com\" rel=\"nofollow\">https://payflowpro.paypal.com</a></p>\n\n<p>I use this code to send the requests:</p>\n\n<pre><code>data = urllib.urlencode(params)\nrequest = urllib2.Request(url, data)\nresponse = urllib2.urlopen(request)\nresponse_text = response.read()\n</code></pre>\n\n<p>The return url is set in the paypal manager with return type as POST and \"Show Confirmation Page\" is set to \"On my website\".</p>\n\n<p>Does somebody know what is wrong and how to fix it?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1431560133, "post_id": 30226845, "comment_id": 48557591, "body": "Don&#39;t know if it will solve your problem, but I think you should change most of your <code>if</code>s to <code>elif</code>s."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431560451, "post_id": 30226845, "comment_id": 48557674, "body": "you dont have right_cave defined... what do you expect to happen?"}, {"owner": {"reputation": 1, "user_id": 4897770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46827ad8b551dcc6c08c3c24f326c42b?s=128&d=identicon&r=PG&f=1", "display_name": "tannerplague", "link": "https://stackoverflow.com/users/4897770/tannerplague"}, "edited": false, "score": 0, "creation_date": 1431560823, "post_id": 30226845, "comment_id": 48557778, "body": "I added another function but I was mainly referring to me trying to enter the left cave.  I didn&#39;t even try to enter the right."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431561013, "post_id": 30226845, "comment_id": 48557837, "body": "call <code>main()</code> at the bottom ... after you define <code>left_cave</code>"}, {"owner": {"reputation": 1, "user_id": 4897770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46827ad8b551dcc6c08c3c24f326c42b?s=128&d=identicon&r=PG&f=1", "display_name": "tannerplague", "link": "https://stackoverflow.com/users/4897770/tannerplague"}, "edited": false, "score": 0, "creation_date": 1431561053, "post_id": 30226845, "comment_id": 48557858, "body": "I found out what was wrong, I was calling main at the end of the first bit and after moving it to the bottom it worked.  Well, I guess that&#39;s why I&#39;m in an intro class.  -_- Thanks for the help!"}, {"owner": {"reputation": 1, "user_id": 4897770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46827ad8b551dcc6c08c3c24f326c42b?s=128&d=identicon&r=PG&f=1", "display_name": "tannerplague", "link": "https://stackoverflow.com/users/4897770/tannerplague"}, "edited": false, "score": 0, "creation_date": 1431561151, "post_id": 30226845, "comment_id": 48557882, "body": "Yeah, that was the problem.  Thanks!"}], "owner": {"reputation": 1, "user_id": 4897770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46827ad8b551dcc6c08c3c24f326c42b?s=128&d=identicon&r=PG&f=1", "display_name": "tannerplague", "link": "https://stackoverflow.com/users/4897770/tannerplague"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 418, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431561332, "creation_date": 1431559698, "last_edit_date": 1431561332, "question_id": 30226845, "link": "https://stackoverflow.com/questions/30226845/trouble-going-to-different-rooms-in-my-basic-python-text-adventure", "title": "Trouble going to different rooms in my basic Python text adventure", "body": "<p>I am in a intro to programming class and have been trying to create a simple text adventure but every time that I (try) to go to a different room I get a name error saying that particular room isn't defined. I initially thought it was because I called the room after the else statement at the end and again right underneath it but that didn't change anything.</p>\n\n<pre><code>#This is a random text adventure game. Enjoy!\n\ndef main():\n    print(\"You wake up in a cave without a clue of how you got there. Your head is throbbing. \\nInsistent on figuring out what happened to you, you decide to explore the cave in search of answers. \\n\")\n    print(\"You can do the following things: \\n\"\n        \"'go left' - Explore the tunnel on your left. \\n\"\n        \"'go right' - Explore the tunnel on your right. \\n\")\n#Evaluates the player's choice.\n    choice = input(\"What do you do?: \")\n    if choice == 'go left':\n        print(\"You stumble your way down the left tunnel.\\n\")\n        left_cave()\n    if choice == 'go right':\n        print(\"You stumble your way down the right tunnel.\\n\")\n        right_cave()\n    else:\n        print(\"That's not a direction.. Maybe your head is hurting because you don't know what left and right means. :D\\n\")\nmain()\n\n#Defines the left cave.\ndef left_cave():\n    print(\"After a short walk you find yourself in smaller room then the room you woke up in. \\n There is some writing on the walls.\")\n    print(\"You can do the following things: \\n\"\n        \"'examine' - Examine the writing on the wall. \\n\"\n        \"'look around' - Take a look around the room. \\n\"\n        \"'go back' - Go back to the main room. \\n\")\n    choice = input(\"What will you do?: \")\n    if choice == 'examine':\n        print(\"I see you have made it this far.  If you want to know what really happened to you then you will have to make it to the end of the cave.\")\n        middle_room()\n    if choice == 'look around':\n        print(\"You see just another darkly lit room.  This room smells.  You notice the writing on the wall again.\")\n        left_cave()\n    if choice == 'go back':\n        print(\"You make your way back to the room you woke up in.\")\n        main()\n    else:\n        print(\"There is nothing in this room that matches that.. C'mon.\")\nleft_cave()\n</code></pre>\n"}, {"tags": ["python", "join", "pandas", "left-join", "concatenation"], "answers": [{"tags": [], "owner": {"reputation": 104532, "user_id": 653364, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7a7a675bc479a30c1389d4c64f612a95?s=128&d=identicon&r=PG", "display_name": "joris", "link": "https://stackoverflow.com/users/653364/joris"}, "is_accepted": true, "score": 2, "last_activity_date": 1431559627, "creation_date": 1431559627, "answer_id": 30226831, "question_id": 30226812, "link": "https://stackoverflow.com/questions/30226812/how-to-use-join-to-fill-missing-values-of-a-column-python-pandas/30226831#30226831", "title": "How to use join to fill missing values of a column - Python Pandas?", "body": "<p>You can use <code>combine_first</code> (only the columns names should match, therefore I first rename the column B in df2):</p>\n\n<pre><code>In [8]: df2 = df2.rename(columns={'B':'A'})\n\nIn [9]: df1.combine_first(df2)\nOut[9]:\n          A\n12/1/14   3\n12/2/14  20\n12/2/14  20\n12/3/14   2\n12/4/14  30\n12/6/14   5\n</code></pre>\n"}], "owner": {"reputation": 781, "user_id": 4797348, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/gPYUQ.jpg?s=128&g=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/4797348/osiris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 30226831, "answer_count": 1, "score": 2, "last_activity_date": 1431559627, "creation_date": 1431559460, "question_id": 30226812, "link": "https://stackoverflow.com/questions/30226812/how-to-use-join-to-fill-missing-values-of-a-column-python-pandas", "title": "How to use join to fill missing values of a column - Python Pandas?", "body": "<p>To be concrete, say we have two DataFrames:</p>\n\n<p>df1:</p>\n\n<pre><code>date    A\n12/1/14 3\n12/2/14 NaN\n12/3/14 2\n12/2/14 NaN\n12/4/14 NaN\n12/6/14 5\n</code></pre>\n\n<p>df2:</p>\n\n<pre><code>        B\n12/2/14 20\n12/4/14 30\n</code></pre>\n\n<p>I want to do kind of a left outer join to fill the missing values in df1, and generate</p>\n\n<p>df3:</p>\n\n<pre><code>date    A\n12/1/14 3\n12/2/14 20\n12/3/14 2\n12/2/14 20\n12/4/14 30\n12/6/14 5\n</code></pre>\n\n<p>Any efficient way to make it?</p>\n"}, {"tags": ["python", "operating-system", "imagemagick"], "comments": [{"owner": {"reputation": 21720, "user_id": 1520841, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PXzxR.jpg?s=128&g=1", "display_name": "Joel Hinz", "link": "https://stackoverflow.com/users/1520841/joel-hinz"}, "edited": false, "score": 0, "creation_date": 1431559155, "post_id": 30226739, "comment_id": 48557320, "body": "There are actually several ImageMagick API bindings for Python, I would recommend using one of them. Here&#39;s Wand, for instance: <a href=\"http://docs.wand-py.org/en/0.4.0/\" rel=\"nofollow noreferrer\">docs.wand-py.org/en/0.4.0</a>"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1431559311, "post_id": 30226739, "comment_id": 48557362, "body": "Use one of the API&#39;s or simply use subprocess"}, {"owner": {"reputation": 65, "user_id": 4835715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-IiMkoyEVys8/AAAAAAAAAAI/AAAAAAAAABE/Hu8VQFagaoM/photo.jpg?sz=128", "display_name": "Owen Lyons", "link": "https://stackoverflow.com/users/4835715/owen-lyons"}, "edited": false, "score": 0, "creation_date": 1431559598, "post_id": 30226739, "comment_id": 48557443, "body": "Thanks for the quick responses. Padraic, could I ask you to show me some example code of how to implement this code using subprocess?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1431559855, "post_id": 30226739, "comment_id": 48557510, "body": "So you really need sudo?"}, {"owner": {"reputation": 65, "user_id": 4835715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-IiMkoyEVys8/AAAAAAAAAAI/AAAAAAAAABE/Hu8VQFagaoM/photo.jpg?sz=128", "display_name": "Owen Lyons", "link": "https://stackoverflow.com/users/4835715/owen-lyons"}, "edited": false, "score": 0, "creation_date": 1431560150, "post_id": 30226739, "comment_id": 48557596, "body": "I&#39;m not sure, pretty new to code. This is one step of a program I hope to write, I have all the necessary code for every step I just don&#39;t know how to link it together. Hopefully if I can figure this out it will help me link the rest of the program."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1431560315, "post_id": 30226739, "comment_id": 48557638, "body": "@OwenLyons, I doubt you need sudo, I added working subprocess code, try removing the sudo and I am pretty sure it will be fine"}], "answers": [{"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1431560275, "last_edit_date": 1431560275, "creation_date": 1431559955, "answer_id": 30226890, "question_id": 30226739, "link": "https://stackoverflow.com/questions/30226739/imagemagick-code-in-python-script/30226890#30226890", "title": "ImageMagick code in Python script", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/subprocess.html#subprocess.check_call\" rel=\"nofollow\">subprocess.check_call</a>, passing the args as a list:</p>\n\n<pre><code>from subprocess import  check_call\n\ncheck_call([\"sudo\",\"convert\",\"imgIn.jpg\", \"-posterize\",\"2\",\"imgOut.jpg\"])\n\ncheck_call([ \"sudo\",'convert', 'imgIn.jpg', '-matte', '(', '+clone', '-fuzz', '57%', '-opaque', 'black', '-transparent', 'blue', ')', '-compose', 'DstOut', '-composite', 'imgOut.jpg'])\n</code></pre>\n\n<p>You will have to run the script with sudo, if you want to pass the password also you can use Popen writing the password to stdin:</p>\n\n<pre><code>from subprocess import Popen, PIPE\n\np1 = Popen([\"sudo\", \"-S\", \"convert\", \"imgIn.jpg\", \"-posterize\", \"2\", \"imgOut.jp\"], stdin=PIPE, stdout=PIPE)\n\np1.stdin.write(\"password\\n\")\nout, err = p1.communicate()\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 4835715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-IiMkoyEVys8/AAAAAAAAAAI/AAAAAAAAABE/Hu8VQFagaoM/photo.jpg?sz=128", "display_name": "Owen Lyons", "link": "https://stackoverflow.com/users/4835715/owen-lyons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 1, "accepted_answer_id": 30226890, "answer_count": 1, "score": 1, "last_activity_date": 1431560275, "creation_date": 1431559016, "last_edit_date": 1431559177, "question_id": 30226739, "link": "https://stackoverflow.com/questions/30226739/imagemagick-code-in-python-script", "title": "ImageMagick code in Python script", "body": "<p>I need to convert an image so as it only shows the color blue as a blob, is there any way I can run this code in a python script? Or how could I go about it?</p>\n\n<p>The following code does the job but I don't know how to link it together, \nNew to code, any advice, direction, links etc would be much appreciated.</p>\n\n<h1>posterize</h1>\n\n<p><code>sudo convert imgIn.jpg -posterize 2 imgOut.jpg</code></p>\n\n<h1>convert to blob</h1>\n\n<p><code>sudo convert imgIn.jpg -matte \\( +clone -fuzz 57% -opaque black -transparent blue \\) -compose DstOut -composite imgOut.jpg</code></p>\n"}, {"tags": ["python", "pygame"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 3162117, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8038309f28e950d77dbb5e2932485780?s=128&d=identicon&r=PG&f=1", "display_name": "user655321", "link": "https://stackoverflow.com/users/3162117/user655321"}, "edited": false, "score": 0, "creation_date": 1431559983, "post_id": 30226843, "comment_id": 48557542, "body": "This is making sense to me, but i don&#39;t quite understand the last line of your response, can you possible expand on what your saying. Thank you."}, {"owner": {"reputation": 1716, "user_id": 3757614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56bd133b7feaee7fde836a20e59d9e49?s=128&d=identicon&r=PG&f=1", "display_name": "user3757614", "link": "https://stackoverflow.com/users/3757614/user3757614"}, "reply_to_user": {"reputation": 143, "user_id": 3162117, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8038309f28e950d77dbb5e2932485780?s=128&d=identicon&r=PG&f=1", "display_name": "user655321", "link": "https://stackoverflow.com/users/3162117/user655321"}, "edited": false, "score": 1, "creation_date": 1431560495, "post_id": 30226843, "comment_id": 48557691, "body": "The general idea is that if you want to loop through the frames in 2 seconds, and there are 10 frames, each frame should be displayed for 0.2 seconds. This says that you are 1.2s into a 2s loop, and so should be displaying the 6th frame. The calculation given is to find the index in self.coin_spin_frames that should be displayed. (I might have an off-by-one error in there.)"}, {"owner": {"reputation": 143, "user_id": 3162117, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8038309f28e950d77dbb5e2932485780?s=128&d=identicon&r=PG&f=1", "display_name": "user655321", "link": "https://stackoverflow.com/users/3162117/user655321"}, "edited": false, "score": 0, "creation_date": 1431561135, "post_id": 30226843, "comment_id": 48557880, "body": "I understand that now. thank you. Now I&#39;m trying to get it to work but i can&#39;t call time.time()"}, {"owner": {"reputation": 1716, "user_id": 3757614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56bd133b7feaee7fde836a20e59d9e49?s=128&d=identicon&r=PG&f=1", "display_name": "user3757614", "link": "https://stackoverflow.com/users/3757614/user3757614"}, "reply_to_user": {"reputation": 143, "user_id": 3162117, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8038309f28e950d77dbb5e2932485780?s=128&d=identicon&r=PG&f=1", "display_name": "user655321", "link": "https://stackoverflow.com/users/3162117/user655321"}, "edited": false, "score": 0, "creation_date": 1431561744, "post_id": 30226843, "comment_id": 48558039, "body": "Did you remember to import time?"}], "tags": [], "owner": {"reputation": 1716, "user_id": 3757614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56bd133b7feaee7fde836a20e59d9e49?s=128&d=identicon&r=PG&f=1", "display_name": "user3757614", "link": "https://stackoverflow.com/users/3757614/user3757614"}, "is_accepted": true, "score": 1, "last_activity_date": 1431559682, "creation_date": 1431559682, "answer_id": 30226843, "question_id": 30226708, "link": "https://stackoverflow.com/questions/30226708/pygame-moving-sprites-at-different-speeds/30226843#30226843", "title": "Pygame - Moving Sprites at Different Speeds", "body": "<p>First, determine how fast you want the coin to spin. Let's say you want it to take 2 seconds to make a complete loop.</p>\n\n<p>The update() function can call time.time(), and mod it by the amount of time to make a loop, then divide that by the loop time. (123121213.2 % 2 = 1.2. 1.2 / 2 = 0.6). Now, display the image that is 60% of the way through the self.coin_spin_frames list. (int(len(self.coin_spin_frames) * 0.6))</p>\n"}], "owner": {"reputation": 143, "user_id": 3162117, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8038309f28e950d77dbb5e2932485780?s=128&d=identicon&r=PG&f=1", "display_name": "user655321", "link": "https://stackoverflow.com/users/3162117/user655321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 30226843, "answer_count": 1, "score": 0, "last_activity_date": 1431559682, "creation_date": 1431558817, "question_id": 30226708, "link": "https://stackoverflow.com/questions/30226708/pygame-moving-sprites-at-different-speeds", "title": "Pygame - Moving Sprites at Different Speeds", "body": "<p>I am working on the mechanics of several sprites i am using. I am working on game that involves collecting coins. I have sprite image of a spinning coin. I created a class for the coin sprite and I wrote an update function which switches from one image sprite to the next. The coin is spinning but the problem I'm having is that it is spinning too fast. How can i slow dow the spinning of the coin? Any help would be greatly appreciated. Thanks!</p>\n\n<p>Here is the coin class:</p>\n\n<pre><code>class coins (pygame.sprite.Sprite):\ncoin_spin_frames = []\ndef __init__(self, x, y):\n    pygame.sprite.Sprite.__init__(self)\n    sprite_sheet = SpriteSheet('stuff/coins_1.png')\n\n    image = sprite_sheet.get_image(0, 0, 40, 42)\n    self.coin_spin_frames.append(image)\n    image = sprite_sheet.get_image(0, 42, 40, 42)\n    self.coin_spin_frames.append(image)\n    image = sprite_sheet.get_image(0, 84, 40, 42)\n    self.coin_spin_frames.append(image)\n    image = sprite_sheet.get_image(0, 130, 40, 42)\n    self.coin_spin_frames.append(image)\n\n    self.image = self.coin_spin_frames[0]\n\n    self.rect = self.image.get_rect()\n\n    self.rect.x = x\n    self.rect.y = y\ndef update(self):\n    if self.image == self.coin_spin_frames[0]:\n        self.image = self.coin_spin_frames[1]\n    elif self.image == self.coin_spin_frames[1]:\n        self.image = self.coin_spin_frames[2]\n    elif self.image == self.coin_spin_frames[2]:\n        self.image = self.coin_spin_frames[3]\n    elif self.image == self.coin_spin_frames[3]:\n        self.image = self.coin_spin_frames[0]\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 7526, "user_id": 1405425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g6RUg.jpg?s=128&g=1", "display_name": "Charlesthk", "link": "https://stackoverflow.com/users/1405425/charlesthk"}, "is_accepted": true, "score": 1, "last_activity_date": 1431691622, "last_edit_date": 1431691622, "creation_date": 1431560168, "answer_id": 30226942, "question_id": 30226616, "link": "https://stackoverflow.com/questions/30226616/order-by-average-django/30226942#30226942", "title": "order by average - Django", "body": "<p>The following should give you the answer:</p>\n\n<pre><code>from django.db import Avg\n\nPunctuation.objects.values('pelis_id').annotate(average=Avg('valor'))\n</code></pre>\n"}], "owner": {"reputation": 254, "user_id": 4856868, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/41c842b73ba7dcd24a560647bca077ee?s=128&d=identicon&r=PG&f=1", "display_name": "tipiwiny", "link": "https://stackoverflow.com/users/4856868/tipiwiny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 30226942, "answer_count": 1, "score": 0, "last_activity_date": 1431691622, "creation_date": 1431558201, "question_id": 30226616, "link": "https://stackoverflow.com/questions/30226616/order-by-average-django", "title": "order by average - Django", "body": "<p><strong>I am trying calculate the score average of \"Pelicula\". the Puntuacion Table is formed by \"pelis(foreign key of Pelicula) \" , \"User(foreign key of Pelicula)\" and valor(this is the score)\n this is models.py</strong></p>\n\n<pre><code>class Usuario(models.Model):\n    Nombre = models.CharField(max_length=50)\n    apellidos = models.CharField(max_length=50)\n    usuario = models.CharField(max_length=50)\n    password = models.CharField(max_length=50)\n    email = models.EmailField()\n    fechaNacimiento = models.DateField()\n    categorias = models.CharField(max_length=50)\n    def __unicode__(self):\n        return self.usuario\n\nclass Pelicula(models.Model):\n    titulo = models.CharField(max_length=50)\n    anyo = models.CharField(max_length=50)\n    actores = models.ManyToManyField('Actor')\n    resumen = models.CharField(max_length=300)\n    categoria = models.CharField(max_length=50)\n    puntuacionMed = models.CharField(max_length=50)\n    director = models.ForeignKey('Director');\n    def __unicode__(self):\n        return self.titulo\n\nclass Actor(models.Model):\n    Nombre = models.CharField(max_length=50)\n    apellidos = models.CharField(max_length=50)\n    biografia = models.CharField(max_length=300)\n    def __unicode__(self):\n        return self.Nombre\n\nclass Director(models.Model):\n    Nombre = models.CharField(max_length=50)\n    apellidos = models.CharField(max_length=50)\n    biografia = models.CharField(max_length=300)\n    def __unicode__(self):\n        return self.Nombre\n\nclass Puntuacion (models.Model):\n    user = models.ForeignKey('Usuario')\n    pelis = models.ForeignKey('Pelicula')\n    valor = models.IntegerField() \n</code></pre>\n"}, {"tags": ["python", "function", "sorting"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user764357"}, "edited": false, "score": 0, "creation_date": 1431559922, "post_id": 30226503, "comment_id": 48557527, "body": "I&#39;m voting to close this question as off-topic because &quot;give me the codes&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 1, "last_activity_date": 1431557910, "creation_date": 1431557910, "answer_id": 30226570, "question_id": 30226503, "link": "https://stackoverflow.com/questions/30226503/sort-ages-into-certain-age-groups-using-function/30226570#30226570", "title": "Sort ages into certain age groups using function?", "body": "<p>first create a bunch of age groups</p>\n\n<pre><code>groups = {(0,6):[],(7,15):[],(16,18):[],(19,30):[],(31,50):[],(51,5100):[]]\n</code></pre>\n\n<p>then just iterate over it putting each person in their group</p>\n\n<pre><code>for person in people:\n    for (min_age,max_age),my_people in groups.iteritems():\n        if min_age &lt;= person.age &lt;= max_age:\n           my_people.append(person)\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 4886603, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c5a98ca908b4bc3123c691df4e036e91?s=128&d=identicon&r=PG&f=1", "display_name": "Hyun", "link": "https://stackoverflow.com/users/4886603/hyun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1431557910, "creation_date": 1431557461, "question_id": 30226503, "link": "https://stackoverflow.com/questions/30226503/sort-ages-into-certain-age-groups-using-function", "title": "Sort ages into certain age groups using function?", "body": "<p>I need a program that would read from a .txt file, for example:</p>\n\n<pre><code>Mary 15\nGeorge 35\nHarry 18\nSuu 18\nStacy 6\nJohn 56\n</code></pre>\n\n<p>And after reading the file, the program would sort the ages into certain age groups, which are: </p>\n\n<p><code>[0-6], [7-15], [16-18], [19-30], [31-50], [51-)</code></p>\n\n<p>I know how to make Python read from a file. I'm just really not sure how to  sort people into certain age groups that are shown above.</p>\n\n<p>Could anyone help me or suggest something? </p>\n\n<p><strong>Not asking to write me the program. I just need some starters.</strong></p>\n"}, {"tags": ["python", "matplotlib", "graph", "boxplot"], "comments": [{"owner": {"reputation": 7758, "user_id": 221794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1f02cce059c0fc8ca0f4012900bd00f0?s=128&d=identicon&r=PG", "display_name": "Dyno Fu", "link": "https://stackoverflow.com/users/221794/dyno-fu"}, "edited": false, "score": 0, "creation_date": 1431558056, "post_id": 30226484, "comment_id": 48557035, "body": "<a href=\"http://stackoverflow.com/questions/16592222/matplotlib-group-boxplots\" title=\"matplotlib group boxplots\">stackoverflow.com/questions/16592222/matplotlib-group-boxplo&zwnj;&#8203;ts</a>"}, {"owner": {"reputation": 12860, "user_id": 1168043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IBdCH.jpg?s=128&g=1", "display_name": "cphlewis", "link": "https://stackoverflow.com/users/1168043/cphlewis"}, "edited": false, "score": 3, "creation_date": 1431564826, "post_id": 30226484, "comment_id": 48558867, "body": "The matplotlib gallery has an example: <a href=\"http://matplotlib.org/examples/pylab_examples/boxplot_demo2.html\" rel=\"nofollow noreferrer\">matplotlib.org/examples/pylab_examples/boxplot_demo2.html</a>"}], "owner": {"reputation": 834, "user_id": 3476791, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/d6949acac21b3cd29c728ea19a2358ce?s=128&d=identicon&r=PG&f=1", "display_name": "user3476791", "link": "https://stackoverflow.com/users/3476791/user3476791"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431564875, "creation_date": 1431557357, "last_edit_date": 1431564875, "question_id": 30226484, "link": "https://stackoverflow.com/questions/30226484/different-colours-for-different-boxes-for-box-plot-generated-by-matplotlib", "title": "Different colours for different boxes for box plot generated by matplotlib", "body": "<p>I am using matplotlib in Python to generate box plot. I want to make different boxes in different colours. Is there a way to do that?</p>\n\n<p><a href=\"http://matplotlib.org/_images/boxplot_demo_00_00.png\" rel=\"nofollow\">Figure</a></p>\n"}, {"tags": ["python", "dictionary", "error-handling"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431557477, "post_id": 30226469, "comment_id": 48556878, "body": "because you dont know how to <code>str.split(&quot;-&quot;)</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 821764, "user_id": 893, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/747ffa5da3538e66840ebc0548b8fd58?s=128&d=identicon&r=PG", "display_name": "Greg Hewgill", "link": "https://stackoverflow.com/users/893/greg-hewgill"}, "is_accepted": true, "score": 1, "last_activity_date": 1431557455, "creation_date": 1431557455, "answer_id": 30226502, "question_id": 30226469, "link": "https://stackoverflow.com/questions/30226469/why-getting-invalid-literal-when-running-this-script/30226502#30226502", "title": "Why getting invalid literal when running this script?", "body": "<p>Your <code>create_date()</code> function is not returning two-digit day and month numbers in all cases.</p>\n\n<p>Try formatting the values explicitly instead of using <code>str()</code>:</p>\n\n<pre><code>date_string = \"{0:04}-{1:02}-{2:02}\".format(year, month, day)\n</code></pre>\n"}], "owner": {"reputation": 1669, "user_id": 1261831, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/19fd83faee182a915d252cdda5b6f89c?s=128&d=identicon&r=PG", "display_name": "Shankar Kumar", "link": "https://stackoverflow.com/users/1261831/shankar-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 30226502, "answer_count": 1, "score": 0, "last_activity_date": 1431557455, "creation_date": 1431557255, "question_id": 30226469, "link": "https://stackoverflow.com/questions/30226469/why-getting-invalid-literal-when-running-this-script", "title": "Why getting invalid literal when running this script?", "body": "<p>When I run the following script, I get ValueError: invalid literal for int() with base 10: '2-' when the date only contains 1 digit (ie 02-02-2011). However it works fine when the date has 2 digits (ie 11-11-2011). What is the reason for this, and how can I fix it?               </p>\n\n<pre><code>from __future__ import division\nfrom easygui import *\nimport ystockquote\nimport datetime\nimport math\n\ndef main():\n    stock = 'NFLX'\n    name = ystockquote.get_company_name(stock)\n    start_date = create_date(02,13,2009)\n    end_date = create_date(10,21,2014)\n    start_price = get_price_on_date(stock,start_date)\n    end_price = get_price_on_date(stock,end_date)\n    if not isinstance(start_price,str):\n        print \"Please enter a different start date, the market was closed on the day you chose!\"\n        quit()\n    else:\n        start_price = float(start_price)\n    if not isinstance(end_price,str):\n        print \"Please enter a different end date, the market was closed on the day you chose!\"\n        quit()\n    else:\n        end_price = float(end_price)\n    no_of_shares = math.floor(10000/float(start_price))\n    profit = (end_price-start_price)*no_of_shares\n    print \"The profit resulting from investing $10,000 in \" + name + \" from \" + start_date + \" to \" + end_date + \" would have been \" + \"$\" + str(profit) + \" or a return of {:.2%}\".format(profit/10000) + \" .\"\n\ndef get_price_on_date(stock,date):\n    a = ystockquote.get_historical_prices(stock,date,date)\n    for key, value in a.iteritems() :\n        for key, value in value.iteritems() :\n            if key == 'Close':\n               return value\n\ndef create_date(month,day,year):\n    date_string = str(year) + \"-\" + str(month) + \"-\" + str(day)\n    return date_string\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python", "scipy", "minimize"], "answers": [{"tags": [], "owner": {"reputation": 2155, "user_id": 1992167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rusHD.png?s=128&g=1", "display_name": "chappers", "link": "https://stackoverflow.com/users/1992167/chappers"}, "is_accepted": false, "score": 0, "last_activity_date": 1431557999, "creation_date": 1431557999, "answer_id": 30226588, "question_id": 30226464, "link": "https://stackoverflow.com/questions/30226464/scipy-optimize-minimize-giving-error-when-passed-a-single-parameter-with-args/30226588#30226588", "title": "Scipy.optimize.minimize giving error when passed a single parameter with args", "body": "<p>Right now Python thinks the <code>args</code> argument is a float, not a tuple so you just have to add a comma.</p>\n\n<pre><code>print optimize.minimize( excessRevenue2,c,args=(a,)).x\n</code></pre>\n\n<p>So then, now the function would work as expected, i.e.:</p>\n\n<pre><code>from scipy import optimize\n\na = 100.0\nb = 50.0\nc = 199.9\n\ndef excessRevenue1(taxH,blah1,blah2):\n    return taxH**2 + blah1 + blah2\n\ndef excessRevenue2(taxH,blah1):\n    return taxH**2 + blah1\n\nprint optimize.minimize( excessRevenue2,c,args=(a,)).x\nprint optimize.minimize(excessRevenue1,c,args=(a,b)).x\n</code></pre>\n\n<p>Would return:</p>\n\n<pre><code>&gt;&gt;&gt; print optimize.minimize( excessRevenue2,c,args=(a,)).x\n[ -1.65480420e-07]\n&gt;&gt;&gt; print optimize.minimize(excessRevenue1,c,args=(a,b)).x\n[ -1.65480420e-07]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4897693, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KNCdLG5bSD8/AAAAAAAAAAI/AAAAAAAAAAA/rzNdMsLCbrI/photo.jpg?sz=128", "display_name": "Kent Smetters", "link": "https://stackoverflow.com/users/4897693/kent-smetters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463069380, "creation_date": 1431557202, "last_edit_date": 1463069380, "question_id": 30226464, "link": "https://stackoverflow.com/questions/30226464/scipy-optimize-minimize-giving-error-when-passed-a-single-parameter-with-args", "title": "Scipy.optimize.minimize giving error when passed a single parameter with args", "body": "<p>Given the following values</p>\n\n<pre><code>a = 100.0\nb = 50.0\nc = 200.0\n</code></pre>\n\n<p>The following code works (it doesn't do anything interesting)</p>\n\n<pre><code>def excessRevenue1(taxH,blah1,blah2):\n    return taxH**2 + blah1 + blah2\n    print optimize.minimize( excessRevenue1,c,args=(a,b) ).x\n</code></pre>\n\n<p>But the following code produces error &lt;&lt; TypeError: can only concatenate tuple (not \"float\") to tuple >>. But the only difference seems to be that I am passing just one argument instead of two.</p>\n\n<pre><code>def excessRevenue2(taxH,blah1):\n    return taxH**2 + blah1\nprint optimize.minimize( excessRevenue2,c,args=(a) ).x\n</code></pre>\n"}, {"tags": ["python", "virtualenv", "virtualenvwrapper", "install.packages"], "answers": [{"comments": [{"owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "edited": false, "score": 0, "creation_date": 1431575191, "post_id": 30226653, "comment_id": 48561250, "body": "I&#39;ve moved under taskbuster project and now I get this message: (tb_dev)\u279c  taskbuster_project  python manage.py runserver Traceback (most recent call last):   File &quot;manage.py&quot;, line 10, in &lt;module&gt;     execute_from_command_line(sys.argv)      File &quot;/home/bgarcial/.virtualenvs/tb_dev/lib/python3.4/site-packa&zwnj;&#8203;ges/django/conf/__in&zwnj;&#8203;it__.py&quot;, line 113, in <b>init</b>     raise ImproperlyConfigured(&quot;The SECRET_KEY setting must not be empty.&quot;) django.core.exceptions.ImproperlyConfigured: The SECRET_KEY setting must not be empty. (tb_dev)\u279c  taskbuster_project"}, {"owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "edited": false, "score": 0, "creation_date": 1431575347, "post_id": 30226653, "comment_id": 48561306, "body": "I have looking this post but I don&#39;t understand my specific case  <a href=\"http://stackoverflow.com/questions/19128540/django-improperlyconfigured-the-secret-key-setting-must-not-be-empty\" title=\"django improperlyconfigured the secret key setting must not be empty\">stackoverflow.com/questions/19128540/&hellip;</a> and  <a href=\"http://stackoverflow.com/questions/29455057/django-core-exceptions-improperlyconfigured-the-secret-key-setting-must-not-be\" title=\"django core exceptions improperlyconfigured the secret key setting must not be\">stackoverflow.com/questions/29455057/&hellip;</a>"}, {"owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "edited": false, "score": 0, "creation_date": 1431576606, "post_id": 30226653, "comment_id": 48561627, "body": "I follow the recommendation in this post (<a href=\"http://stackoverflow.com/questions/19128540/django-improperlyconfigured-the-secret-key-setting-must-not-be-empty\" title=\"django improperlyconfigured the secret key setting must not be empty\">stackoverflow.com/questions/19128540/&hellip;</a>) of add from .base import in the taskbuster/settings/__init__.py (this file was empty) and all works  and I also understand why? Anyone could explain to me what is going here too? Thanks"}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "reply_to_user": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "edited": false, "score": 1, "creation_date": 1431587328, "post_id": 30226653, "comment_id": 48565550, "body": "if your SECRET_KEY comes from an env variable, make sure you set it (export it). And when you change such vars, always remember to re-source the file where you set the variables (e.g. ~/.bashrc) and/or deactivate-reactivate the venv in your case."}], "tags": [], "owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "is_accepted": false, "score": 1, "last_activity_date": 1431558439, "creation_date": 1431558439, "answer_id": 30226653, "question_id": 30226431, "link": "https://stackoverflow.com/questions/30226431/different-settings-py-for-each-virtual-environment-in-a-project/30226653#30226653", "title": "Different settings.py for each virtual environment in a project", "body": "<p>You have set <code>export DJANGO_SETTINGS_MODULE=\"taskbuster.settings.testing\"</code>, but above you say the settings sit under <code>root_project/settings</code>. So, if I understand your setup correctly, you need to move the settings directory under one called <code>taskbuster</code>. </p>\n\n<p>Of course, the quicker alternative is to change the env var to <code>export DJANGO_SETTINGS_MODULE=\"settings.testing\"</code></p>\n\n<p>It depends on what you desire in terms of directory structure.</p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 533996, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/7T7fo.jpg?s=128&g=1", "display_name": "Blueice", "link": "https://stackoverflow.com/users/533996/blueice"}, "is_accepted": false, "score": 0, "last_activity_date": 1450462080, "creation_date": 1450462080, "answer_id": 34361537, "question_id": 30226431, "link": "https://stackoverflow.com/questions/30226431/different-settings-py-for-each-virtual-environment-in-a-project/34361537#34361537", "title": "Different settings.py for each virtual environment in a project", "body": "<p>After editing the postactivate and predeactivate you have to reactivate the environment.\nWhen you are in env_dev, you can either do:</p>\n\n<pre><code>$workon env_test   //change to another env and come back\n$Workon env_dev\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>$deactivate  //just deactivate and activate the concerned env\n$workon env_dev\n</code></pre>\n\n<p>This should work.</p>\n"}], "owner": {"reputation": 2095, "user_id": 2773461, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PJykN.jpg?s=128&g=1", "display_name": "bgarcial", "link": "https://stackoverflow.com/users/2773461/bgarcial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1450462080, "creation_date": 1431557034, "question_id": 30226431, "link": "https://stackoverflow.com/questions/30226431/different-settings-py-for-each-virtual-environment-in-a-project", "title": "Different settings.py for each virtual environment in a project", "body": "<p>I have a project in where exist two virtual environments such as follow:</p>\n\n<ul>\n<li><code>(env_dev)</code> for development</li>\n<li><code>(env_test)</code> for testing</li>\n</ul>\n\n<p>I want perform in these two virtual environments different configurations.\nIn my testing environment would go libraries or packets (like selenium), that possibly don't will be needed in the development environment and so...  </p>\n\n<p>According to above mentioned I have the following directory structure in relation to the requirements files and settings files of this way:</p>\n\n<p><strong>Requirements files (root_project/requirements)</strong></p>\n\n<p>I have the files:</p>\n\n<ul>\n<li>root_project/requirements/base.txt in where will be all packages that are commons to all environments. The other requirements files will inherit of it</li>\n<li>root_project/requirements/development.txt, just the packages needed for the development local environment</li>\n<li>root_project/requirements/production.txt, just the packages for the production environment</li>\n<li>root_project/requirements/testing.txt, just the packages needed for the testing environment</li>\n<li>root_project/requirements/staging.txt, packages for the staging environment just in case </li>\n</ul>\n\n<p>In addition, after that I've write the packages in each requirements file, \nI proceed to install the packages in the testing and development environments of this way:</p>\n\n<pre><code>$ workon env_dev\n$ pip install -r requirements/development.txt\n\n$ workon env_test\n$ pip install -r requirements/testing.txt\n</code></pre>\n\n<p><strong>Differents settings for each virtual environment (testing and development)</strong></p>\n\n<p>Then, I proceed to create the settings folder inside my root_project folder for manage different  settings files por each environment</p>\n\n<p><strong>root_project/settings</strong> will have:</p>\n\n<p><code>__init__.py</code> file to make this folder a Python package</p>\n\n<p><code>base.py</code> will contain all the settings that are common in all environments. The other setting files inherit from this one.</p>\n\n<p><code>development.py</code> is for local development.</p>\n\n<p><code>testing.py</code> is for testing.</p>\n\n<p><code>production.py</code> will be used in the production environment.</p>\n\n<p><code>staging.py</code> just in case of run a staging version on the production server of my project.</p>\n\n<p>The files <code>__init__.py</code> , <code>development.py</code> , <code>testing.py</code> , <code>production.py</code> and <code>staging.py</code> , I have edited with these lines for that  inherit from base.py (which still don't create):</p>\n\n<pre><code># -*- coding: utf-8 -*-\nfrom .base import * \n</code></pre>\n\n<p>And, in my root_project/name_project/ django create by default the <code>settings.py</code> file. \nThis file, I've moved to root_project/settings directory and I've renamed to base.py, because this file settings.py will be my base.py</p>\n\n<p>With virtualenvwrapper, I specify that file will work with a virtual environment specific:</p>\n\n<p><code>env_test</code> will work with testing with testing.py</p>\n\n<p><code>env_dev</code> will work with development.py</p>\n\n<p>In each path [$VIRTUAL_ENV/bin] of each virtual environment (testing and development) I configure this files (development.py and settings.py) to use, focus me in the postactivate file and predeactivate file such as follow</p>\n\n<p><strong>In env_dev environment</strong></p>\n\n<p>Go to <code>$VIRTUAL_ENV/bin</code> path and I edit the postactivate file adding:</p>\n\n<pre><code>export DJANGO_SETTINGS_MODULE=\"taskbuster.settings.development\"\n</code></pre>\n\n<p>And I also go to <code>$VIRTUAL_ENV/bin</code> path and I edit the predeactivate file adding:</p>\n\n<pre><code>unset DJANGO_SETTINGS_MODULE\n</code></pre>\n\n<p><strong>In env_test environment</strong></p>\n\n<p>Go to <code>$VIRTUAL_ENV/bin</code> path and I edit the postactivate file adding:</p>\n\n<pre><code>export DJANGO_SETTINGS_MODULE=\"taskbuster.settings.testing\"\n</code></pre>\n\n<p>I've just adding in postactivate file, not in predeactivate.</p>\n\n<p>When I want check if all this process works, activating the env_dev environment I get this output</p>\n\n<pre><code>(env_dev)\u279c  taskbuster_project  ./manage.py runserver\nTraceback (most recent call last):\n  File \"./manage.py\", line 10, in &lt;module&gt;\n    execute_from_command_line(sys.argv)\n  File \"/home/bgarcial/.virtualenvs/tb_dev/lib/python3.4/site-packages/django/core/management/__init__.py\", line 338, in execute_from_command_line\n    utility.execute()\n  File \"/home/bgarcial/.virtualenvs/tb_dev/lib/python3.4/site-packages/django/core/management/__init__.py\", line 303, in execute\n    settings.INSTALLED_APPS\n  File \"/home/bgarcial/.virtualenvs/tb_dev/lib/python3.4/site-packages/django/conf/__init__.py\", line 48, in __getattr__\n    self._setup(name)\n  File \"/home/bgarcial/.virtualenvs/tb_dev/lib/python3.4/site-packages/django/conf/__init__.py\", line 44, in _setup\n    self._wrapped = Settings(settings_module)\n  File \"/home/bgarcial/.virtualenvs/tb_dev/lib/python3.4/site-packages/django/conf/__init__.py\", line 92, in __init__\n    mod = importlib.import_module(self.SETTINGS_MODULE)\n  File \"/home/bgarcial/.virtualenvs/tb_dev/lib/python3.4/importlib/__init__.py\", line 109, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 2231, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 2214, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 2189, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 321, in _call_with_frames_removed\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 2231, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 2214, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 2201, in _find_and_load_unlocked\nImportError: No module named 'taskbuster.settings'\n(env_dev)\u279c  taskbuster_project\n</code></pre>\n\n<p>With my env_test environment occur the same situation\nCan I have some error configuration.</p>\n\n<p>Excuse me to everyone for the amount of lines in this question.\nAs an additional data all this process I have been doing based in this full complete tutorial <a href=\"http://www.marinamele.com/taskbuster-django-tutorial/settings-different-environments-version-control\" rel=\"nofollow\">http://www.marinamele.com/taskbuster-django-tutorial/settings-different-environments-version-control</a> just in case.</p>\n\n<p>Thanks. \nBest Regards  </p>\n"}, {"tags": ["python", "list", "tuples"], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 0, "last_activity_date": 1431557169, "creation_date": 1431557169, "answer_id": 30226458, "question_id": 30226429, "link": "https://stackoverflow.com/questions/30226429/find-the-index-of-a-list-of-tuples-with-nondistinct-values-in-first-index-of-tup/30226458#30226458", "title": "Find the index of a list of tuples with nondistinct values in first index of tuple", "body": "<pre><code>for x,y in enumerate(my_tuples):\n    print x,\"=x\"\n    print y,\"=y\"\n</code></pre>\n\n<p>you should immediatly see the problem with <code>x[0] == 'a'</code></p>\n\n<p>I believe </p>\n\n<pre><code>index_list = [x for x, y in enumerate(list_of_tuples) if y[0] == 'a']\n</code></pre>\n\n<p>should work better for you</p>\n"}, {"tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": true, "score": 1, "last_activity_date": 1431557238, "creation_date": 1431557238, "answer_id": 30226468, "question_id": 30226429, "link": "https://stackoverflow.com/questions/30226429/find-the-index-of-a-list-of-tuples-with-nondistinct-values-in-first-index-of-tup/30226468#30226468", "title": "Find the index of a list of tuples with nondistinct values in first index of tuple", "body": "<p>Use the value <code>y</code> to compare not the index <code>x</code>:</p>\n\n<pre><code>list_of_tuples = [('a', 1), ('a', 2), ('a', 3)]\nindex_list = [x for x, y in enumerate(list_of_tuples) if y[0] == 'a']\n</code></pre>\n\n<p>Now <code>index_list</code> is <code>[0, 1, 2]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 1, "last_activity_date": 1431558772, "creation_date": 1431558772, "answer_id": 30226699, "question_id": 30226429, "link": "https://stackoverflow.com/questions/30226429/find-the-index-of-a-list-of-tuples-with-nondistinct-values-in-first-index-of-tup/30226699#30226699", "title": "Find the index of a list of tuples with nondistinct values in first index of tuple", "body": "<p><code>x</code> is the index. You should be accessing the first element of <code>y -&gt; y[0]</code>.  <code>y</code> is each tuple in your list. You can also unpack:</p>\n\n<pre><code>list_of_tuples = [('a', 1), ('a', 2), ('a', 3)]\nindex_list = [ind for ind,  (a, _) in enumerate(list_of_tuples) if a == 'a']\nprint(index_list)\n[0, 1, 2]\n</code></pre>\n\n<p>If you <code>print(list(enumerate(list_of_tuples)))</code> you can see the first element is the index and the second your tuple:</p>\n\n<pre><code>[(0, ('a', 1)), (1, ('a', 2)), (2, ('a', 3))]\n</code></pre>\n\n<p>So you are trying to index <code>0 -&gt; 0[0]</code> with <code>x[0]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2647, "user_id": 4060551, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/eqUxo.jpg?s=128&g=1", "display_name": "Burger King", "link": "https://stackoverflow.com/users/4060551/burger-king"}, "is_accepted": false, "score": 1, "last_activity_date": 1431568872, "creation_date": 1431568872, "answer_id": 30228111, "question_id": 30226429, "link": "https://stackoverflow.com/questions/30226429/find-the-index-of-a-list-of-tuples-with-nondistinct-values-in-first-index-of-tup/30228111#30228111", "title": "Find the index of a list of tuples with nondistinct values in first index of tuple", "body": "<p>First I recommend you verify your data.</p>\n\n<pre><code>list_of_tuples = [('a', 1), ('a', 2), ('a', 3)]\nprint list(enumerate(list_of_tuples))\n# [(0, ('a', 1)), (1, ('a', 2)), (2, ('a', 3))]\n    ^   ^-----^\n    x     y\n</code></pre>\n\n<p>When you understand how to unpack to use the data, it's easy to do it.</p>\n\n<pre><code>index_list = [x for x, y in enumerate(list_of_tuples) if y[0] == 'a']\nprint index_list\n</code></pre>\n"}], "owner": {"reputation": 1607, "user_id": 6491192, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10206519571806574/picture?type=large", "display_name": "Adam Freymiller", "link": "https://stackoverflow.com/users/6491192/adam-freymiller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2277, "favorite_count": 0, "accepted_answer_id": 30226468, "answer_count": 4, "score": 3, "last_activity_date": 1482925117, "creation_date": 1431557031, "last_edit_date": 1482925117, "question_id": 30226429, "link": "https://stackoverflow.com/questions/30226429/find-the-index-of-a-list-of-tuples-with-nondistinct-values-in-first-index-of-tup", "title": "Find the index of a list of tuples with nondistinct values in first index of tuple", "body": "<p>I'm trying to get the index of a list of 2-tuples in Python, where the 0 index of each tuple is <code>'a'</code>:</p>\n\n<pre><code>list_of_tuples = [('a', 1), ('a', 2), ('a', 3)]\n</code></pre>\n\n<p>So I use the following list comprehension to try to find out which index is returned, correct?</p>\n\n<pre><code>index_list = [x for x, y in enumerate(list_of_tuples) if x[0] == 'a']\n</code></pre>\n\n<p>Which gives the following error: </p>\n\n<pre><code>TypeError                                 Traceback (most recent call last)\n&lt;ipython-input-22-5d47328b7d9a&gt; in &lt;module&gt;()\n----&gt; 1 index_list = [x for x, y in enumerate(list_of_tuples) if x[0] ==     'a']\n\nTypeError: 'int' object is not subscriptable\n</code></pre>\n\n<p>How do I find out the index associated with searching the list of tuples for the value in the 0th index being equal to <code>'a'</code>? </p>\n"}, {"tags": ["python", "django", "inheritance"], "answers": [{"comments": [{"owner": {"reputation": 374, "user_id": 4897652, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10205386924404851/picture?type=large", "display_name": "jnowak", "link": "https://stackoverflow.com/users/4897652/jnowak"}, "edited": false, "score": 0, "creation_date": 1431697796, "post_id": 30247530, "comment_id": 48622219, "body": "No reason at all, I thought it&#39;s the only solution. Ok, now I know general idea about composition but still don&#39;t have idea how to apply this to django models? Could you provide some example?"}], "tags": [], "owner": {"reputation": 1003, "user_id": 908328, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/44fc35444833ed5d6a92708e8c6538a5?s=128&d=identicon&r=PG", "display_name": "pbhowmick", "link": "https://stackoverflow.com/users/908328/pbhowmick"}, "is_accepted": true, "score": 1, "last_activity_date": 1431705615, "last_edit_date": 1431705615, "creation_date": 1431638354, "answer_id": 30247530, "question_id": 30226377, "link": "https://stackoverflow.com/questions/30226377/django-multiple-model-inheritance-django-push-notifications/30247530#30247530", "title": "Django multiple model inheritance, django-push-notifications", "body": "<p>Any reason why it is necessary to inherit? Could composition be a substitute for what you are trying to do by inheritance?</p>\n\n<p>----------------- Edited answer -----------------</p>\n\n<pre><code>class Device(models.Model):\n    ...\n    gcm_device = models.OneToOneField(GCMDevice)\n</code></pre>\n\n<p>I have given the most simple case, you could make the GCM device your primary key as well. </p>\n"}], "owner": {"reputation": 374, "user_id": 4897652, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10205386924404851/picture?type=large", "display_name": "jnowak", "link": "https://stackoverflow.com/users/4897652/jnowak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 30247530, "answer_count": 1, "score": 4, "last_activity_date": 1431705680, "creation_date": 1431556694, "last_edit_date": 1431705680, "question_id": 30226377, "link": "https://stackoverflow.com/questions/30226377/django-multiple-model-inheritance-django-push-notifications", "title": "Django multiple model inheritance, django-push-notifications", "body": "<p>I am writing a back end for a mobile app using Django 1.8. The <code>django-push-notifications</code> lib provides the <code>GCMDevice</code> model. The problem is I already have a <code>Device</code> model with some mandatory field and some logic I don't want to lose.</p>\n\n<p>What I wanted to do is to inherit whole <code>GCMDevice</code> functionality and adjust them to my Device model(which btw inherits another mixin providing spatial data fields, with custom object Manager set which I want to keep). I read about 3 different django model inheritance ideas but none of them seem to solve my problem (keeping managers, provide <code>django-push-notifications</code> functionality, keeping my <code>Device</code> model fields). Maybe OneToOne association will do the work?</p>\n\n<p>IDEA:</p>\n\n<pre><code>class Device(MyMixin):\n    gcm_device = models.OneToOneField(GCMDevice)\n    my_other_field = models.TextField()\n\n    def send_message(self, payload):\n        self.gcm_device.send_message(payload)\n</code></pre>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 3731, "user_id": 753160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/039a383a7ed35c227fd8f2bf24fafe0a?s=128&d=identicon&r=PG", "display_name": "Carl Groner", "link": "https://stackoverflow.com/users/753160/carl-groner"}, "edited": false, "score": 2, "creation_date": 1431556787, "post_id": 30226367, "comment_id": 48556661, "body": "Try <code>int(i)</code>, not <code>int[i]</code>. With <code>()</code> your calling the function <code>int</code>."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1431559429, "post_id": 30226367, "comment_id": 48557395, "body": "<code>list(map(int, mask.split(&quot;.&quot;)))</code>"}, {"owner": {"reputation": 2571, "user_id": 2149974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb21c41d027acd90bb86547189a7da7?s=128&d=identicon&r=PG", "display_name": "marcadian", "link": "https://stackoverflow.com/users/2149974/marcadian"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1431622140, "post_id": 30226367, "comment_id": 48586734, "body": "@PadraicCunningham map already returning a list."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 2571, "user_id": 2149974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb21c41d027acd90bb86547189a7da7?s=128&d=identicon&r=PG", "display_name": "marcadian", "link": "https://stackoverflow.com/users/2149974/marcadian"}, "edited": false, "score": 0, "creation_date": 1431622219, "post_id": 30226367, "comment_id": 48586796, "body": "@marcadian not in python3"}, {"owner": {"reputation": 2571, "user_id": 2149974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb21c41d027acd90bb86547189a7da7?s=128&d=identicon&r=PG", "display_name": "marcadian", "link": "https://stackoverflow.com/users/2149974/marcadian"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1431622347, "post_id": 30226367, "comment_id": 48586865, "body": "@PadraicCunningham ah interesting, I don&#39;t know it&#39;s changed, still using 2.7"}], "answers": [{"tags": [], "owner": {"reputation": 2571, "user_id": 2149974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb21c41d027acd90bb86547189a7da7?s=128&d=identicon&r=PG", "display_name": "marcadian", "link": "https://stackoverflow.com/users/2149974/marcadian"}, "is_accepted": false, "score": 1, "last_activity_date": 1431556768, "creation_date": 1431556768, "answer_id": 30226388, "question_id": 30226367, "link": "https://stackoverflow.com/questions/30226367/changing-variable-type-in-list/30226388#30226388", "title": "changing variable type in list", "body": "<p>use <code>int(i)</code> instead of <code>int[i]</code>, int is not subscriptable</p>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1431556988, "post_id": 30226399, "comment_id": 48556728, "body": "No, you used <code>int[i]</code>, not <code>int(i)</code>."}], "tags": [], "owner": {"reputation": 2643, "user_id": 2444293, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/12e2df5d1a7f43ca9123592dbf8f9f99?s=128&d=identicon&r=PG", "display_name": "VHarisop", "link": "https://stackoverflow.com/users/2444293/vharisop"}, "is_accepted": false, "score": 1, "last_activity_date": 1431556821, "creation_date": 1431556821, "answer_id": 30226399, "question_id": 30226367, "link": "https://stackoverflow.com/questions/30226367/changing-variable-type-in-list/30226399#30226399", "title": "changing variable type in list", "body": "<p><code>int</code> is a builtin-class that provides no implementation for subscription in array-like fashion.</p>\n\n<p>To convert to an integer you should use <code>int</code> like this:</p>\n\n<pre><code>toInt = [int(i) for i in string]\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 4785752, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/RQMG4.jpg?s=128&g=1", "display_name": "Sean Klaus", "link": "https://stackoverflow.com/users/4785752/sean-klaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "closed_date": 1431561740, "answer_count": 2, "score": 0, "last_activity_date": 1431556821, "creation_date": 1431556667, "question_id": 30226367, "link": "https://stackoverflow.com/questions/30226367/changing-variable-type-in-list", "closed_reason": "Not suitable for this site", "title": "changing variable type in list", "body": "<p>I am trying to take 4 numbers as string and split them into 4 elements. and convert each of them into integer and save it in a list. What am I doing wrong here? </p>\n\n<pre><code>mask = \"250.250.0.0\"\nstring = mask.split(\".\")\ntoInt = [int[i] for i in string]\nprint(toInt)\n</code></pre>\n\n<p>error message says type object is not subscriptable</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 7758, "user_id": 221794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1f02cce059c0fc8ca0f4012900bd00f0?s=128&d=identicon&r=PG", "display_name": "Dyno Fu", "link": "https://stackoverflow.com/users/221794/dyno-fu"}, "edited": false, "score": 0, "creation_date": 1431556260, "post_id": 30226270, "comment_id": 48556499, "body": "can you provide some sample data?"}], "answers": [{"comments": [{"owner": {"reputation": 16278, "user_id": 4421474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b931f645dc56015b93aeaa5e20d0b5f7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4421474/alex"}, "edited": false, "score": 1, "creation_date": 1431563922, "post_id": 30226319, "comment_id": 48558642, "body": "While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes."}, {"owner": {"reputation": 7758, "user_id": 221794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1f02cce059c0fc8ca0f4012900bd00f0?s=128&d=identicon&r=PG", "display_name": "Dyno Fu", "link": "https://stackoverflow.com/users/221794/dyno-fu"}, "reply_to_user": {"reputation": 16278, "user_id": 4421474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b931f645dc56015b93aeaa5e20d0b5f7?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4421474/alex"}, "edited": false, "score": 0, "creation_date": 1431569669, "post_id": 30226319, "comment_id": 48560008, "body": "true. i was just a little bit lazy to include code without sample data."}], "tags": [], "owner": {"reputation": 7758, "user_id": 221794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1f02cce059c0fc8ca0f4012900bd00f0?s=128&d=identicon&r=PG", "display_name": "Dyno Fu", "link": "https://stackoverflow.com/users/221794/dyno-fu"}, "is_accepted": false, "score": 0, "last_activity_date": 1431556351, "creation_date": 1431556351, "answer_id": 30226319, "question_id": 30226270, "link": "https://stackoverflow.com/questions/30226270/sum-rainfall-over-last-60-days-in-pandas/30226319#30226319", "title": "Sum rainfall over last 60 days in Pandas?", "body": "<p>i think rolling windows is what you need. <a href=\"http://pandas.pydata.org/pandas-docs/stable/computation.html#moving-rolling-statistics-moments\" rel=\"nofollow\">http://pandas.pydata.org/pandas-docs/stable/computation.html#moving-rolling-statistics-moments</a></p>\n"}, {"tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": true, "score": 1, "last_activity_date": 1431558387, "creation_date": 1431558387, "answer_id": 30226641, "question_id": 30226270, "link": "https://stackoverflow.com/questions/30226270/sum-rainfall-over-last-60-days-in-pandas/30226641#30226641", "title": "Sum rainfall over last 60 days in Pandas?", "body": "<p>If df is your Pandas DataFrame where each row contains values for temp, wind, rainfall, etc., then you can get a rolling 60 day total as follows:</p>\n\n<pre><code>pd.rolling_sum(df, 60)\n</code></pre>\n"}], "owner": {"reputation": 540, "user_id": 1492373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5vyma.jpg?s=128&g=1", "display_name": "Keith", "link": "https://stackoverflow.com/users/1492373/keith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 30226641, "answer_count": 2, "score": 0, "last_activity_date": 1431558387, "creation_date": 1431556129, "question_id": 30226270, "link": "https://stackoverflow.com/questions/30226270/sum-rainfall-over-last-60-days-in-pandas", "title": "Sum rainfall over last 60 days in Pandas?", "body": "<p>I'm preprocessing weather data where each row is one day with temp, wind, rainfall, etc. I'd like to compute the total rainfall in past 60 days for a new column.</p>\n\n<p>It seems like <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.shift.html#pandas.Series.shift\" rel=\"nofollow\">shift</a> is close: I could get the rainfall 60 days ago, 59 days ago, etc. I could possibly create 60 series objects and sum them this way but it feels like there's probably a better way.</p>\n"}, {"tags": ["python", "python-2.7", "iteration", "glob", "os.walk"], "comments": [{"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1431558724, "post_id": 30226267, "comment_id": 48557222, "body": "What is <code>f.dest_dir</code> supposed to be? Because I can guarantee that it&#39;s not that."}, {"owner": {"reputation": 1, "user_id": 4813259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a57bdcfec12765fa6e020fe23fd2d6?s=128&d=identicon&r=PG&f=1", "display_name": "PeeledPotatoes", "link": "https://stackoverflow.com/users/4813259/peeledpotatoes"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1431560354, "post_id": 30226267, "comment_id": 48557650, "body": "Well i am not much into python but i hoped it would generate all &quot;.proj&quot; files as i described in text. This code neads modification it is only a sketch."}], "owner": {"reputation": 1, "user_id": 4813259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a57bdcfec12765fa6e020fe23fd2d6?s=128&d=identicon&r=PG&f=1", "display_name": "PeeledPotatoes", "link": "https://stackoverflow.com/users/4813259/peeledpotatoes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431558507, "creation_date": 1431556110, "last_edit_date": 1431558507, "question_id": 30226267, "link": "https://stackoverflow.com/questions/30226267/how-to-select-specific-filenames-nested-within-several-folders", "title": "How to select specific filenames nested within several folders?", "body": "<p>I have a working folder on \"C:\\Users\\userName\\Desktop\\test\" where my python test script is located. My idea was to import directory from another drive (\"D:\\mydir\\mytests\\Projects\") to my current working directory:</p>\n\n<pre><code>import os\nfrom os import getcwd\ncurdir=os.getcwd()\npath = os.chdir(os.path.join(curdir,\"D:\\mydir\\mytests\\Projects\"))\n</code></pre>\n\n<p>Under \"Projects\" directory there are several folders which my contain also subfolders (but not every). I am trieng to make some kind of a generic code that will iterate over \"Projects\" directory access every folder or subfolder if it exist and find specific files with \".proj\" extension. Found files (\".proj\") should than be writen out in a form of a list (maybe) so i can run each of them one by one with a for loop. I tried to write down some code but not successfully. Any suggestion will be appreciated a lot.</p>\n\n<pre><code>proj_list = []\nfor dirpath, dirnames, files in os.walk(path):\n    for f in files:\n        dest_dir = glob.glob('*.proj')\n        fullpath = os.path.join(dirpath, f.dest_dir)\n        proj_list.append(fullpath)\n\n\ndef activate_approval(dialog):\n    dialog.activate_button('yes')\n\n\nclass OpenAllProjectsFromListAndRun(script.TestScript):\n\n    def test_run (self):\n\n        for project in fullpath:\n\n                with self.handle_dialog(activate_yes):\n                    self.open_project(project)\n\n\n                    '''nothing in particular'''\n\nif __name__ == '__main__':\n    test = OpenAllProjectsFromListAndRun()\n    test.run()\n</code></pre>\n\n<p>PS: I'm using Python 2.7</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 60033, "user_id": 102302, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd9c8a33bbb45d398ad8777e619c7a3?s=128&d=identicon&r=PG", "display_name": "tom10", "link": "https://stackoverflow.com/users/102302/tom10"}, "edited": false, "score": 6, "creation_date": 1431555562, "post_id": 30226094, "comment_id": 48556241, "body": "How about just converting the number to binary?"}, {"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 4, "creation_date": 1431555644, "post_id": 30226094, "comment_id": 48556276, "body": "what is a closest power of 2?"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 6, "creation_date": 1431555807, "post_id": 30226094, "comment_id": 48556338, "body": "I believe this exercise is supposed to teach you the fundamentals of binary arithmetic. There&#39;s no answer that won&#39;t wreck that lesson."}, {"owner": {"reputation": 169, "user_id": 4788595, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92a5db44ac1be9da7e3739b70024d4a5?s=128&d=identicon&r=PG&f=1", "display_name": "stacker", "link": "https://stackoverflow.com/users/4788595/stacker"}, "reply_to_user": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 0, "creation_date": 1431555999, "post_id": 30226094, "comment_id": 48556407, "body": "@njzk2 what i mean by this is if the user enters 3 then my function needs to append 2 and 1.... 2^0=1 and 2^2=2....2+1=3 so my list will then have a 2 and a 1 inside. If the user entered a number that is already a power of 2 then the function will just append it to the list right away."}, {"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 0, "creation_date": 1431556352, "post_id": 30226094, "comment_id": 48556533, "body": "do you mean the decomposition in unique powers of 2? (as in, any power of 2 can only appear once? otherwise, <code>n*2^0 = n</code>, bam solved)"}, {"owner": {"reputation": 169, "user_id": 4788595, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92a5db44ac1be9da7e3739b70024d4a5?s=128&d=identicon&r=PG&f=1", "display_name": "stacker", "link": "https://stackoverflow.com/users/4788595/stacker"}, "reply_to_user": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 0, "creation_date": 1431557155, "post_id": 30226094, "comment_id": 48556783, "body": "@njzk2 that wouldn&#39;t work because if the user enters 14....14*2^0=14...when it needs to be 8, 4, 2 because those are all powers of 2 that make up 14."}, {"owner": {"reputation": 36814, "user_id": 671543, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2145962377da9419f2446cd565f614ee?s=128&d=identicon&r=PG", "display_name": "njzk2", "link": "https://stackoverflow.com/users/671543/njzk2"}, "edited": false, "score": 0, "creation_date": 1431612048, "post_id": 30226094, "comment_id": 48580009, "body": "hence my question. &quot;do you mean the decomposition in unique powers of 2? as in, any power of 2 can only appear once?&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 5368, "user_id": 2286508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PEk18.png?s=128&g=1", "display_name": "aldeb", "link": "https://stackoverflow.com/users/2286508/aldeb"}, "is_accepted": false, "score": 2, "last_activity_date": 1431593658, "last_edit_date": 1431593658, "creation_date": 1431556676, "answer_id": 30226369, "question_id": 30226094, "link": "https://stackoverflow.com/questions/30226094/how-do-i-decompose-a-number-into-powers-of-2/30226369#30226369", "title": "How do I decompose a number into powers of 2?", "body": "<p>One simple (but really not effective) way of doing this is to use backtracking. Note that the closest power of two is easily founded by using <a href=\"https://docs.python.org/2/library/math.html#math.log\" rel=\"nofollow\"><code>math.log</code></a> function (The closest power of two of <strong>n</strong> is <code>2^round(log(n, 2))</code>):</p>\n\n<pre><code>from math import log\n\ndef powers_finder(n):\n    return powers_finder_rec(n, [2**x for x in range(round(log(n, 2)+1))])\n\ndef powers_finder_rec(n, powers):\n    if sum(powers) == n:\n        return powers\n\n    for i, j in enumerate(powers):\n        (res1, res2) = (powers_finder_rec(n-j, powers[:i] + powers[i+1:]),  \n                                    powers_finder_rec(n, powers[:i] + powers[i+1:]))\n        if res1 or res2:\n            return [j] + res1 if res1 else res2\n\n    return []\n\nprint(powers_finder(13))\nprint(powers_finder(112))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[1, 4, 8]\n[16, 32, 64]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 90304, "user_id": 562769, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e86681e49622d52817b36fd2a4c936b7?s=128&d=identicon&r=PG", "display_name": "Martin Thoma", "link": "https://stackoverflow.com/users/562769/martin-thoma"}, "is_accepted": false, "score": 1, "last_activity_date": 1431557370, "creation_date": 1431557370, "answer_id": 30226490, "question_id": 30226094, "link": "https://stackoverflow.com/questions/30226094/how-do-i-decompose-a-number-into-powers-of-2/30226490#30226490", "title": "How do I decompose a number into powers of 2?", "body": "<p>The idea is to convert the number to binary and then get powers of two from the binary representation:</p>\n\n<pre><code>#!/usr/bin/env python\n\n\ndef get_powers(n):\n    \"\"\"Get positive powers of two which add up to n.\n\n    Parameters\n    ----------\n    n : positive integer\n\n    Returns\n    -------\n    list of integers which are powers of 2\n\n    Examples\n    --------\n    &gt;&gt;&gt; get_powers(14)\n    [2, 4, 8]\n\n    &gt;&gt;&gt; get_powers(5)\n    [1, 4]\n    \"\"\"\n    get_bin = lambda x: x &gt;= 0 and str(bin(x))[2:] or \"-\" + str(bin(x))[3:]\n    bin_str = get_bin(n)  # convert n to a binary string\n    powers = []\n    for i, digit in enumerate(bin_str[::-1]):\n        if digit == '1':\n            powers.append(2**i)\n    return powers\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 456, "user_id": 2494765, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6d07b9bc85950f45e981dc1d6af2efac?s=128&d=identicon&r=PG", "display_name": "gbriones.gdl", "link": "https://stackoverflow.com/users/2494765/gbriones-gdl"}, "edited": false, "score": 0, "creation_date": 1431557523, "post_id": 30226506, "comment_id": 48556889, "body": "It can also be reduced to one line, but will result in a very long line."}, {"owner": {"reputation": 169, "user_id": 4788595, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92a5db44ac1be9da7e3739b70024d4a5?s=128&d=identicon&r=PG&f=1", "display_name": "stacker", "link": "https://stackoverflow.com/users/4788595/stacker"}, "edited": false, "score": 1, "creation_date": 1431559075, "post_id": 30226506, "comment_id": 48557299, "body": "To be honest i have never seen it been done this way before...it also seems like the shortest and most simple way. Starting to go through python int to binary conversion and try to attempt to reconstruct this on me own!"}], "tags": [], "owner": {"reputation": 456, "user_id": 2494765, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6d07b9bc85950f45e981dc1d6af2efac?s=128&d=identicon&r=PG", "display_name": "gbriones.gdl", "link": "https://stackoverflow.com/users/2494765/gbriones-gdl"}, "is_accepted": false, "score": 2, "last_activity_date": 1431557476, "creation_date": 1431557476, "answer_id": 30226506, "question_id": 30226094, "link": "https://stackoverflow.com/questions/30226094/how-do-i-decompose-a-number-into-powers-of-2/30226506#30226506", "title": "How do I decompose a number into powers of 2?", "body": "<p>Try with binaries:</p>\n\n<pre><code>def power_find(n):\n    result = []\n    binary = bin(n)[:1:-1]\n    for x in range(len(binary)):\n        if int(binary[x]):\n            result.append(2**x)\n    return result\n\n&gt;&gt;&gt; power_find(11)\n[1, 2, 8]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 2, "last_activity_date": 1431558112, "creation_date": 1431558112, "answer_id": 30226599, "question_id": 30226094, "link": "https://stackoverflow.com/questions/30226094/how-do-i-decompose-a-number-into-powers-of-2/30226599#30226599", "title": "How do I decompose a number into powers of 2?", "body": "<p>The best and fastest way to do this is, of course, with binary numbers, but here's a way with a generator:</p>\n\n<pre><code>def powers_finder(num):\n    d = []\n    while sum(d) &lt; num:\n        p = powers_of_2()\n        a=b=1\n        while sum(d)+a&lt;=num:\n            b=a\n            a = next(p)\n        d.append(b)\n    d.reverse()\n    return d\n\ndef powers_of_2():\n    n=1\n    while 1:\n        yield n\n        n*=2\n</code></pre>\n\n<hr>\n\n<pre><code>&gt;&gt;&gt; print(powers_finder(5))\n[1, 4]\n&gt;&gt;&gt; print(powers_finder(8))\n[8]\n&gt;&gt;&gt; print(powers_finder(9))\n[1, 8]\n&gt;&gt;&gt; print(powers_finder(14))\n[2, 4, 8]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "is_accepted": false, "score": -1, "last_activity_date": 1431559793, "creation_date": 1431559793, "answer_id": 30226860, "question_id": 30226094, "link": "https://stackoverflow.com/questions/30226094/how-do-i-decompose-a-number-into-powers-of-2/30226860#30226860", "title": "How do I decompose a number into powers of 2?", "body": "<p>Rather than solve the problem, how about some information to help you solve it? Take a look at a few examples, and solve them.  Here are a few,</p>\n\n<p>Suppose N=2, then the answer is = {2=2^1}.</p>\n\n<p>Suppose N=3, then the answer is = {2=2^1,1=2^0} (note that 2**0=1)</p>\n\n<p>Suppose N=4, then the answer is = {4=2^2}</p>\n\n<p>...</p>\n\n<p>Suppose N=63, then the answer is = {32=2^5, 16=2^4, 8=2^3, 4=2^2, 2=2^1, 1=2^0}</p>\n\n<p>Suppose N=64, then the answer is = {64=2^6}</p>\n\n<p>...</p>\n\n<p>Suppose N=259, then the answer is = {256=2^8, 2=2^1, 1=2^0}</p>\n\n<p>Do you see the pattern?</p>\n\n<hr>\n\n<p>Want an algorithm?</p>\n\n<p>Think about these simple steps, and combine them together in a loop,</p>\n\n<p>Can you check if the number is odd? When the number is odd, then you have detected a bit 'on'. Subtract one (make the number even).</p>\n\n<p>Can you divide by 2? What do you do with the result?</p>\n"}, {"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 1, "last_activity_date": 1431561430, "creation_date": 1431561430, "answer_id": 30227116, "question_id": 30226094, "link": "https://stackoverflow.com/questions/30226094/how-do-i-decompose-a-number-into-powers-of-2/30227116#30227116", "title": "How do I decompose a number into powers of 2?", "body": "<p>The following binary solution combines @moose's use of <code>enumerate()</code> with @gbriones.gdl's use of stride indexing and @gbriones.gdl's comment about one-lining it (actually, it was a comment about <em>not</em> one-lining it, but one-lining is fun).</p>\n\n<pre><code>def powers(n):\n    return [2**p for p,v in enumerate(bin(n)[:1:-1]) if int(v)]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1431629567, "post_id": 30227161, "comment_id": 48591099, "body": "As <a href=\"http://stackoverflow.com/a/30233499/2617068\">tested</a>, this was the fastest solution by far."}], "tags": [], "owner": {"reputation": 565, "user_id": 4890269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RAxAl.png?s=128&g=1", "display_name": "nullptr", "link": "https://stackoverflow.com/users/4890269/nullptr"}, "is_accepted": false, "score": 18, "last_activity_date": 1431562862, "last_edit_date": 1431562862, "creation_date": 1431561638, "answer_id": 30227161, "question_id": 30226094, "link": "https://stackoverflow.com/questions/30226094/how-do-i-decompose-a-number-into-powers-of-2/30227161#30227161", "title": "How do I decompose a number into powers of 2?", "body": "<p>Most efficient way of doing this:</p>\n\n<pre><code>def myfunc(x):\n    powers = []\n    i = 1\n    while i &lt;= x:\n        if i &amp; x:\n            powers.append(i)\n        i &lt;&lt;= 1\n    return powers\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1435, "user_id": 1177288, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/677d15e29e9ac8c839e0531f446fd6f8?s=128&d=identicon&r=PG", "display_name": "tsionyx", "link": "https://stackoverflow.com/users/1177288/tsionyx"}, "edited": false, "score": 0, "creation_date": 1534334629, "post_id": 30233499, "comment_id": 90668724, "body": "I asked the similar question recently and some solutions could be faster than mentioned here, for example, <a href=\"https://stackoverflow.com/a/51786517/1177288\">stackoverflow.com/a/51786517/1177288</a>"}], "tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 2, "last_activity_date": 1431594854, "creation_date": 1431594854, "answer_id": 30233499, "question_id": 30226094, "link": "https://stackoverflow.com/questions/30226094/how-do-i-decompose-a-number-into-powers-of-2/30233499#30233499", "title": "How do I decompose a number into powers of 2?", "body": "<p>We have some nice answers for this question now. I figured I'd analyze them a bit with <code>dis</code> and <code>timeit</code>.</p>\n\n<p>Here is the test code I used:</p>\n\n<pre><code>import dis\nimport timeit\n\ndef gbriones_gdl(num):\n    result = []\n    binary = bin(num)[:1:-1]\n    for x in range(len(binary)):\n        if int(binary[x]):\n            result.append(2**x)\n    return result\n\ndef nullptr(num):\n    powers = []\n    i = 1\n    while i &lt;= num:\n        if i &amp; num:\n            powers.append(i)\n        i &lt;&lt;= 1\n    return powers\n\ndef t3_gen(num):\n    d = []\n    while sum(d) &lt; num:\n        p = powers_of_2()\n        a=b=1\n        while sum(d)+a&lt;=num:\n            b=a\n            a = next(p)\n        d.append(b)\n    d.reverse()\n    return d\n\ndef powers_of_2():\n    n=1\n    while 1:\n        yield n\n        n*=2\n\ndef t3_enum(num):\n    return [2**p for p,v in enumerate(bin(num)[:1:-1]) if int(v)]\n\ndef moose(num):\n    get_bin = lambda x: x &gt;= 0 and str(bin(x))[2:] or \"-\" + str(bin(x))[3:]\n    bin_str = get_bin(num)  # convert num to a binary string\n    powers = []\n    for i, digit in enumerate(bin_str[::-1]):\n        if digit == '1':\n            powers.append(2**i)\n    return powers\n\nprint('Each function gives correct results:', nullptr(1048575) == moose(1048575) ==\nt3_enum(1048575) == gbriones_gdl(1048575) ==\nt3_gen(1048575))\nprint()\n\nprint('nullptr'.ljust(15), timeit.timeit('nullptr(1048575)', 'from __main__ import nullptr', number=100000))\nprint('moose'.ljust(15), timeit.timeit('moose(1048575)', 'from __main__ import moose', number=100000))\nprint('t3_enum'.ljust(15), timeit.timeit('t3_enum(1048575)', 'from __main__ import t3_enum', number=100000))\nprint('gbriones_gdl'.ljust(15), timeit.timeit('gbriones_gdl(1048575)', 'from __main__ import gbriones_gdl', number=100000))\nprint('t3_gen'.ljust(15), timeit.timeit('t3_gen(1048575)', 'from __main__ import t3_gen', number=100000))\nprint('\\nnullptr:\\n===========================')\nprint(dis.dis(nullptr))\nprint('\\nmoose:\\n===========================')\nprint(dis.dis(moose))\nprint('\\nt3_enum:\\n===========================')\nprint(dis.dis(t3_gen))\nprint('gbriones_gdl:\\n===========================')\nprint(dis.dis(t3_enum))\nprint('\\nt3_gen:\\n===========================')\nprint(dis.dis(gbriones_gdl))\n</code></pre>\n\n<hr>\n\n<p>And here are the results:</p>\n\n<pre><code>Each function gives correct results: True\n\nnullptr         0.7847449885390462\nmoose           1.810839785503465\nt3_enum         2.898256901365956\ngbriones_gdl    3.0904670146624778\nt3_gen          21.366890624367063\n\nnullptr:\n===========================\n 14           0 BUILD_LIST               0\n              3 STORE_FAST               1 (powers)\n\n 15           6 LOAD_CONST               1 (1)\n              9 STORE_FAST               2 (i)\n\n 16          12 SETUP_LOOP              52 (to 67)\n        &gt;&gt;   15 LOAD_FAST                2 (i)\n             18 LOAD_FAST                0 (num)\n             21 COMPARE_OP               1 (&lt;=)\n             24 POP_JUMP_IF_FALSE       66\n\n 17          27 LOAD_FAST                2 (i)\n             30 LOAD_FAST                0 (num)\n             33 BINARY_AND\n             34 POP_JUMP_IF_FALSE       53\n\n 18          37 LOAD_FAST                1 (powers)\n             40 LOAD_ATTR                0 (append)\n             43 LOAD_FAST                2 (i)\n             46 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             49 POP_TOP\n             50 JUMP_FORWARD             0 (to 53)\n\n 19     &gt;&gt;   53 LOAD_FAST                2 (i)\n             56 LOAD_CONST               1 (1)\n             59 INPLACE_LSHIFT\n             60 STORE_FAST               2 (i)\n             63 JUMP_ABSOLUTE           15\n        &gt;&gt;   66 POP_BLOCK\n\n 20     &gt;&gt;   67 LOAD_FAST                1 (powers)\n             70 RETURN_VALUE\nNone\n\nmoose:\n===========================\n 44           0 LOAD_CONST               1 (&lt;code object &lt;lambda&gt; at 0x0000000002A8E660, file \"power_2_adder.py\", line 44&gt;)\n              3 LOAD_CONST               2 ('moose.&lt;locals&gt;.&lt;lambda&gt;')\n              6 MAKE_FUNCTION            0\n              9 STORE_FAST               1 (get_bin)\n\n 45          12 LOAD_FAST                1 (get_bin)\n             15 LOAD_FAST                0 (num)\n             18 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             21 STORE_FAST               2 (bin_str)\n\n 46          24 BUILD_LIST               0\n             27 STORE_FAST               3 (powers)\n\n 47          30 SETUP_LOOP              71 (to 104)\n             33 LOAD_GLOBAL              0 (enumerate)\n             36 LOAD_FAST                2 (bin_str)\n             39 LOAD_CONST               0 (None)\n             42 LOAD_CONST               0 (None)\n             45 LOAD_CONST               6 (-1)\n             48 BUILD_SLICE              3\n             51 BINARY_SUBSCR\n             52 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             55 GET_ITER\n        &gt;&gt;   56 FOR_ITER                44 (to 103)\n             59 UNPACK_SEQUENCE          2\n             62 STORE_FAST               4 (i)\n             65 STORE_FAST               5 (digit)\n\n 48          68 LOAD_FAST                5 (digit)\n             71 LOAD_CONST               4 ('1')\n             74 COMPARE_OP               2 (==)\n             77 POP_JUMP_IF_FALSE       56\n\n 49          80 LOAD_FAST                3 (powers)\n             83 LOAD_ATTR                1 (append)\n             86 LOAD_CONST               5 (2)\n             89 LOAD_FAST                4 (i)\n             92 BINARY_POWER\n             93 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             96 POP_TOP\n             97 JUMP_ABSOLUTE           56\n            100 JUMP_ABSOLUTE           56\n        &gt;&gt;  103 POP_BLOCK\n\n 50     &gt;&gt;  104 LOAD_FAST                3 (powers)\n            107 RETURN_VALUE\nNone\n\nt3_enum:\n===========================\n 23           0 BUILD_LIST               0\n              3 STORE_FAST               1 (d)\n\n 24           6 SETUP_LOOP             101 (to 110)\n        &gt;&gt;    9 LOAD_GLOBAL              0 (sum)\n             12 LOAD_FAST                1 (d)\n             15 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             18 LOAD_FAST                0 (num)\n             21 COMPARE_OP               0 (&lt;)\n             24 POP_JUMP_IF_FALSE      109\n\n 25          27 LOAD_GLOBAL              1 (powers_of_2)\n             30 CALL_FUNCTION            0 (0 positional, 0 keyword pair)\n             33 STORE_FAST               2 (p)\n\n 26          36 LOAD_CONST               1 (1)\n             39 DUP_TOP\n             40 STORE_FAST               3 (a)\n             43 STORE_FAST               4 (b)\n\n 27          46 SETUP_LOOP              44 (to 93)\n        &gt;&gt;   49 LOAD_GLOBAL              0 (sum)\n             52 LOAD_FAST                1 (d)\n             55 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             58 LOAD_FAST                3 (a)\n             61 BINARY_ADD\n             62 LOAD_FAST                0 (num)\n             65 COMPARE_OP               1 (&lt;=)\n             68 POP_JUMP_IF_FALSE       92\n\n 28          71 LOAD_FAST                3 (a)\n             74 STORE_FAST               4 (b)\n\n 29          77 LOAD_GLOBAL              2 (next)\n             80 LOAD_FAST                2 (p)\n             83 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             86 STORE_FAST               3 (a)\n             89 JUMP_ABSOLUTE           49\n        &gt;&gt;   92 POP_BLOCK\n\n 30     &gt;&gt;   93 LOAD_FAST                1 (d)\n             96 LOAD_ATTR                3 (append)\n             99 LOAD_FAST                4 (b)\n            102 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n            105 POP_TOP\n            106 JUMP_ABSOLUTE            9\n        &gt;&gt;  109 POP_BLOCK\n\n 31     &gt;&gt;  110 LOAD_FAST                1 (d)\n            113 LOAD_ATTR                4 (reverse)\n            116 CALL_FUNCTION            0 (0 positional, 0 keyword pair)\n            119 POP_TOP\n\n 32         120 LOAD_FAST                1 (d)\n            123 RETURN_VALUE\nNone\ngbriones_gdl:\n===========================\n 41           0 LOAD_CONST               1 (&lt;code object &lt;listcomp&gt; at 0x0000000002A8E540, file \"power_2_adder.py\", line 41&gt;)\n              3 LOAD_CONST               2 ('t3_enum.&lt;locals&gt;.&lt;listcomp&gt;')\n              6 MAKE_FUNCTION            0\n              9 LOAD_GLOBAL              0 (enumerate)\n             12 LOAD_GLOBAL              1 (bin)\n             15 LOAD_FAST                0 (num)\n             18 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             21 LOAD_CONST               0 (None)\n             24 LOAD_CONST               3 (1)\n             27 LOAD_CONST               4 (-1)\n             30 BUILD_SLICE              3\n             33 BINARY_SUBSCR\n             34 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             37 GET_ITER\n             38 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             41 RETURN_VALUE\nNone\n\nt3_gen:\n===========================\n  6           0 BUILD_LIST               0\n              3 STORE_FAST               1 (result)\n\n  7           6 LOAD_GLOBAL              0 (bin)\n              9 LOAD_FAST                0 (num)\n             12 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             15 LOAD_CONST               0 (None)\n             18 LOAD_CONST               1 (1)\n             21 LOAD_CONST               3 (-1)\n             24 BUILD_SLICE              3\n             27 BINARY_SUBSCR\n             28 STORE_FAST               2 (binary)\n\n  8          31 SETUP_LOOP              62 (to 96)\n             34 LOAD_GLOBAL              1 (range)\n             37 LOAD_GLOBAL              2 (len)\n             40 LOAD_FAST                2 (binary)\n             43 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             46 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             49 GET_ITER\n        &gt;&gt;   50 FOR_ITER                42 (to 95)\n             53 STORE_FAST               3 (x)\n\n  9          56 LOAD_GLOBAL              3 (int)\n             59 LOAD_FAST                2 (binary)\n             62 LOAD_FAST                3 (x)\n             65 BINARY_SUBSCR\n             66 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             69 POP_JUMP_IF_FALSE       50\n\n 10          72 LOAD_FAST                1 (result)\n             75 LOAD_ATTR                4 (append)\n             78 LOAD_CONST               2 (2)\n             81 LOAD_FAST                3 (x)\n             84 BINARY_POWER\n             85 CALL_FUNCTION            1 (1 positional, 0 keyword pair)\n             88 POP_TOP\n             89 JUMP_ABSOLUTE           50\n             92 JUMP_ABSOLUTE           50\n        &gt;&gt;   95 POP_BLOCK\n\n 11     &gt;&gt;   96 LOAD_FAST                1 (result)\n             99 RETURN_VALUE\nNone\n</code></pre>\n\n<hr>\n\n<p>From the <code>timeit</code> results, we can see that @nullptr's solution is quite nice, as I suspected, followed by @moose's solution. After that came my combination of @moose's and @gbriones.gdl's solutions, followed very closely by @gbriones.gdl's solution. My generator solution was, shall we say, very suboptimal, but I kind of expected that.</p>\n\n<p><code>dis</code> results are included for completeness.</p>\n"}], "owner": {"reputation": 169, "user_id": 4788595, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92a5db44ac1be9da7e3739b70024d4a5?s=128&d=identicon&r=PG&f=1", "display_name": "stacker", "link": "https://stackoverflow.com/users/4788595/stacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10467, "favorite_count": 1, "answer_count": 8, "score": 9, "last_activity_date": 1431630946, "creation_date": 1431555218, "last_edit_date": 1431630946, "question_id": 30226094, "link": "https://stackoverflow.com/questions/30226094/how-do-i-decompose-a-number-into-powers-of-2", "title": "How do I decompose a number into powers of 2?", "body": "<p>I'm trying to create a function that receives a number as an argument and performs actions on that number to find out its closest powers of 2 that will then add up to that number. For example, if the user enters 4, the function will append 4 because it is already a power of 2. If the user enters a 14 the function should see that 14 is not a power of 2 and the closest powers of 2 that make up 14 are 2,4, and 8.</p>\n\n<p>Key notes:\nI am only going up to 2^9.</p>\n\n<p>What i have so far:</p>\n\n<pre><code>def powers_finder(n):\n    powers=[]\n    i=0\n    total=0\n    while i&lt;10:\n         value=2**i\n         total=total+value\n         i=i+1\n         #This if statement is for if the user enters a power of 2 as n\n         #Then the number will be appended right away into my powers list.\n         if value==n:\n            powers.append(value)\n</code></pre>\n\n<p>The problem here being if the user enters in lets say 5 as (n) 5 is made up of the power 2^2=4 and 2^0=1 4+1=5. How can i extend my function to include this process? </p>\n\n<p>thank you!</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1431561531, "post_id": 30226074, "comment_id": 48557983, "body": "Probably [<a href=\"https://docs.python.org/2/howto/sockets.html]\" rel=\"nofollow noreferrer\">docs.python.org/2/howto/sockets.html]</a> would be a good start."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 4704650, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vE9fVpxQpA4/AAAAAAAAAAI/AAAAAAAABoA/TPtmRerL_MM/photo.jpg?sz=128", "display_name": "taher ali rangwala", "link": "https://stackoverflow.com/users/4704650/taher-ali-rangwala"}, "edited": false, "score": 0, "creation_date": 1431588418, "post_id": 30227215, "comment_id": 48566133, "body": "replaced self.rfile.readline() with self.request.recv(10) still getting same error however if I write self.request.recv() then I receive data max of 10 characters and I get this error <b>recv() takes at least 1 argument (0 given)</b> I get it that function needs one argument but what I am not able to understand as soon as I give some arguments why am I getting time out exception"}], "tags": [], "owner": {"reputation": 865, "user_id": 892369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21701303a36caabf99d08866eb7356d5?s=128&d=identicon&r=PG", "display_name": "Alex Pertsev", "link": "https://stackoverflow.com/users/892369/alex-pertsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1431633814, "last_edit_date": 1431633814, "creation_date": 1431562005, "answer_id": 30227215, "question_id": 30226074, "link": "https://stackoverflow.com/questions/30226074/python-socketserver-connection-timeout/30227215#30227215", "title": "python socketserver connection timeout", "body": "<p>Your problem is because you need to control messages length when you are using stream-sockets.</p>\n\n<p>What happends there:</p>\n\n<p>Your client sending some data (N bytes).\nYour server reading data from socket, but it does not know is your \"message\" complete or some additional data will be sent.</p>\n\n<p>What can you do?\nIf you will replace </p>\n\n<blockquote>\n  <p>self.rfile.readline()</p>\n</blockquote>\n\n<p>with self.request.recv(10) - your server will read 10 bytes and will send them back. So you can set some message size for messages your server and client will be sending to each other.</p>\n\n<p>Also some usefull info is here:\n<a href=\"https://docs.python.org/2/howto/sockets.html#using-a-socket\" rel=\"nofollow\">https://docs.python.org/2/howto/sockets.html#using-a-socket</a></p>\n\n<p>Here is example of simplest chat:</p>\n\n<p><em>CLIENT</em></p>\n\n<pre><code>def handler(req):\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    s.connect((\"localhost\", PORT))\n    message = req\n    s.send(req)\n    print s.recv(1024)\n    s.close()\n</code></pre>\n\n<p><em>SERVER</em></p>\n\n<pre><code>def handle(self):\n    while True:\n        line = self.request.recv(1024)\n        if line:\n            print(\"data in handle method-\\n\", line.strip())\n            self.wfile.write(line)\n</code></pre>\n\n<p>But probably you will face some problens later and python documentation can help you with understanding how does it works.</p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 4704650, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vE9fVpxQpA4/AAAAAAAAAAI/AAAAAAAABoA/TPtmRerL_MM/photo.jpg?sz=128", "display_name": "taher ali rangwala", "link": "https://stackoverflow.com/users/4704650/taher-ali-rangwala"}, "is_accepted": false, "score": 0, "last_activity_date": 1431611818, "creation_date": 1431611818, "answer_id": 30239273, "question_id": 30226074, "link": "https://stackoverflow.com/questions/30226074/python-socketserver-connection-timeout/30239273#30239273", "title": "python socketserver connection timeout", "body": "<p>The real problem was that server was waiting for more message to be sent from client which caused timeout. I have found a solution which is working \nIn the client program add this line </p>\n\n<pre><code>s.shutdown(1)\n</code></pre>\n\n<p>after </p>\n\n<pre><code>s.send(req)\n</code></pre>\n\n<p>and in server program replace </p>\n\n<pre><code>line = self.rfile.readline()\n</code></pre>\n\n<p>with</p>\n\n<pre><code>line = self.request.recv(1024)\n</code></pre>\n\n<p>shutdown(1) tells the server \u201cThis client is done sending, but can still receive.\u201d</p>\n"}], "owner": {"reputation": 65, "user_id": 4704650, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vE9fVpxQpA4/AAAAAAAAAAI/AAAAAAAABoA/TPtmRerL_MM/photo.jpg?sz=128", "display_name": "taher ali rangwala", "link": "https://stackoverflow.com/users/4704650/taher-ali-rangwala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1765, "favorite_count": 0, "accepted_answer_id": 30227215, "answer_count": 2, "score": 4, "last_activity_date": 1431633814, "creation_date": 1431555143, "question_id": 30226074, "link": "https://stackoverflow.com/questions/30226074/python-socketserver-connection-timeout", "title": "python socketserver connection timeout", "body": "<p>I am new to python socket programming. I am trying to create a simple chat application I am trying to send data from client program to server but in server program while receiving the data I am encountering \"timed out\" </p>\n\n<p>My client program-</p>\n\n<pre><code>import socket\nPORT = 3017\n\ndef handler(req):\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    try:\n        s.connect((\"localhost\", PORT))\n    except socket.error, msg:\n        print(\"error connecting socket\")\n        s = None\n    finally:\n        f.close()\n    s.settimeout(10.0)\n    s.send(req)\n    line = s.recv(1024)\n    s.close()\n    return line\n\n\nif __name__ == '__main__':\n    while(1):\n        input = raw_input(\"&gt;\")\n        resp = handler(input)\n        print resp\n</code></pre>\n\n<p>My server program-</p>\n\n<pre><code>import socket\nimport SocketServer\n\nclass echo_server(SocketServer.StreamRequestHandler):\n    def handle(self):\n        timeout_telnet = float(2.0)\n        self.connection.settimeout(timeout_telnet)\n\n        data = []\n        # Read in all the lines.\n        while 1:\n            try:\n                line = self.rfile.readline()\n            except BaseException, e:\n                # Timeout.\n                print(\"error\", e)\n                break\n            data.append(line)\n            print(\"data in handle method-\\n\", data)\n            self.wfile.write((\"echo data- \".join(data)))\n            break\n\n        # Goodbye\n\n\ndef main():\n    s = SocketServer.ThreadingTCPServer((\"\", 3017), echo_server)\n    try:\n        s.serve_forever()\n    except KeyboardInterrupt:\n        print(\"Shutting down.\")\n        s.socket.close() \n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n"}, {"tags": ["python", "xml", "gzip", "compression"], "comments": [{"owner": {"reputation": 3013, "user_id": 779412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aacaa7c7b38b42bf34bb95244230a5?s=128&d=identicon&r=PG&f=1", "display_name": "nymk", "link": "https://stackoverflow.com/users/779412/nymk"}, "edited": false, "score": 1, "creation_date": 1431555520, "post_id": 30225997, "comment_id": 48556222, "body": "It should be <code>f = open(&quot;test.xml.gz&quot;, &quot;wb&quot;)</code>."}, {"owner": {"reputation": 1, "user_id": 4181742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823bc1e3786fcbc4fedb377c677d41f8?s=128&d=identicon&r=PG&f=1", "display_name": "TKire", "link": "https://stackoverflow.com/users/4181742/tkire"}, "reply_to_user": {"reputation": 3013, "user_id": 779412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68aacaa7c7b38b42bf34bb95244230a5?s=128&d=identicon&r=PG&f=1", "display_name": "nymk", "link": "https://stackoverflow.com/users/779412/nymk"}, "edited": false, "score": 0, "creation_date": 1431556282, "post_id": 30225997, "comment_id": 48556509, "body": "Yep, there it is. Thank you."}], "owner": {"reputation": 1, "user_id": 4181742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/823bc1e3786fcbc4fedb377c677d41f8?s=128&d=identicon&r=PG&f=1", "display_name": "TKire", "link": "https://stackoverflow.com/users/4181742/tkire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 535, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431554729, "creation_date": 1431554729, "question_id": 30225997, "link": "https://stackoverflow.com/questions/30225997/decompressing-an-xml-in-python-from-an-api-request", "title": "Decompressing an XML in python from an API request", "body": "<p>I am trying to use the API from <a href=\"https://neweden-dev.com/ZKillboard_API\" rel=\"nofollow\">https://neweden-dev.com/ZKillboard_API</a> in python.</p>\n\n<p>My code works up to this point:</p>\n\n<pre><code>import xml.etree.ElementTree as ET\nimport urllib2\nimport gzip\nimport zlib\n\n\nurl = 'https://zkillboard.com/api/kills/characterID/95089021/xml/'\nrequest = urllib2.Request(url)\nrequest.add_header('Accept-encoding', 'gzip,deflate')\n\ndata = urllib2.urlopen(request)\n</code></pre>\n\n<p>After this point, I get very confused.</p>\n\n<pre><code>contents = data.read()\nf = open(\"export.xml\",\"w\")\nf.write(contents)\nf.close()\n</code></pre>\n\n<p>Above was my first step. Opening the file made me realize that it was compressed (duh).</p>\n\n<p>So from this point I tried two things:</p>\n\n<pre><code>f = open(\"test.xml.gz\", \"w\")\nf.write(data.read())\nf.close()\ng = gzip.open(\"test.xml.gz\", \"rb\")\nfile_content = g.read()\ng.close()\n</code></pre>\n\n<p>which gives me the error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\[filepath]\", line 19, in &lt;module&gt;\n    file_content = g.read()\n  File \"C:\\Python27\\lib\\gzip.py\", line 254, in read\n    self._read(readsize)\n  File \"C:\\Python27\\lib\\gzip.py\", line 312, in _read\n    uncompress = self.decompress.decompress(buf)\nerror: Error -3 while decompressing: invalid distance too far back\n</code></pre>\n\n<p>My next step was to use zlib:</p>\n\n<pre><code>x = zlib.decompress(data.read())\n</code></pre>\n\n<p>which gives me the error of:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\[filepath]\", line 15, in &lt;module&gt;\n    x = zlib.decompress(data.read())\nerror: Error -3 while decompressing data: incorrect header check\n</code></pre>\n\n<p>I know I am missing something super simple here, any thoughts? Thanks.</p>\n"}, {"tags": ["python", "simpy"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431554659, "post_id": 30225915, "comment_id": 48555828, "body": "I would recommend using <code>runsnakerun</code> , which uses cProfile(there are directions on runsnakerun&#39;s webpage)"}, {"owner": {"reputation": 757, "user_id": 2755084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/x0iZH.jpg?s=128&g=1", "display_name": "josiekre", "link": "https://stackoverflow.com/users/2755084/josiekre"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431555386, "post_id": 30225915, "comment_id": 48556161, "body": "I will try this out. In the meantime, I found information in the docs about the <a href=\"http://simpy.readthedocs.org/en/latest/topical_guides/real-time-simulations.html\" rel=\"nofollow noreferrer\">real time environment</a>. It specifically states it can be used to analyze the real-time behavior of an algorithm. Any experience with this?"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431555501, "post_id": 30225915, "comment_id": 48556210, "body": "I dont think that does what you think it does :P ... I stand by my earlier suggestion :P"}, {"owner": {"reputation": 757, "user_id": 2755084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/x0iZH.jpg?s=128&g=1", "display_name": "josiekre", "link": "https://stackoverflow.com/users/2755084/josiekre"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431555657, "post_id": 30225915, "comment_id": 48556283, "body": "It probably doesn&#39;t since I can&#39;t wrap my brain around quite how it would work. You might be your comment in an answer below."}], "answers": [{"comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431554857, "post_id": 30226003, "comment_id": 48555918, "body": "ummm while this is true for simple stuff I dont think this is going to be very helpful to the OP ... time/memory profiling <code>simpy</code> is going to take significantly more work :P)"}, {"owner": {"reputation": 759, "user_id": 3578820, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/VNwE8.jpg?s=128&g=1", "display_name": "JGerulskis", "link": "https://stackoverflow.com/users/3578820/jgerulskis"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431555022, "post_id": 30226003, "comment_id": 48555995, "body": "Regardless of the code complexity, this will time it and that is what the OP has asked for @JoranBeasley. Care to clarify OP?"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431555173, "post_id": 30226003, "comment_id": 48556061, "body": "sympy is implemented largely in C ... please advise what parts of sympy are taking up most of the time, using this method"}, {"owner": {"reputation": 757, "user_id": 2755084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/x0iZH.jpg?s=128&g=1", "display_name": "josiekre", "link": "https://stackoverflow.com/users/2755084/josiekre"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431555303, "post_id": 30226003, "comment_id": 48556113, "body": "This is a way to look at it. It has me thinking. But @JoranBeasley is right in that gaining actionable knowledge about the methods within the <code>simpy</code> simulation using this method would take a heck of a lot of <code>time.time()</code> statements and a sophisticated system to track them all."}, {"owner": {"reputation": 759, "user_id": 3578820, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/VNwE8.jpg?s=128&g=1", "display_name": "JGerulskis", "link": "https://stackoverflow.com/users/3578820/jgerulskis"}, "edited": false, "score": 0, "creation_date": 1431555359, "post_id": 30226003, "comment_id": 48556148, "body": "Alright my apologizes i&#39;ll remove the post shortly. Thanks for the clarification"}, {"owner": {"reputation": 757, "user_id": 2755084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/x0iZH.jpg?s=128&g=1", "display_name": "josiekre", "link": "https://stackoverflow.com/users/2755084/josiekre"}, "edited": false, "score": 0, "creation_date": 1431619350, "post_id": 30226003, "comment_id": 48585115, "body": "Don&#39;t remove the post. I am actually using both answers to get at what I need. So I think it&#39;s worth keeping here."}, {"owner": {"reputation": 824, "user_id": 4545530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b31967fe4702f501fc7ef3df61d408e?s=128&d=identicon&r=PG&f=1", "display_name": "mkiever", "link": "https://stackoverflow.com/users/4545530/mkiever"}, "edited": false, "score": 0, "creation_date": 1489181087, "post_id": 30226003, "comment_id": 72575558, "body": "@JGerulskis : Hi, can&#39;t fix your typo in <code>t2 - t2</code>. (Edits must be at least 6 characters). Can you?"}], "tags": [], "owner": {"reputation": 759, "user_id": 3578820, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/VNwE8.jpg?s=128&g=1", "display_name": "JGerulskis", "link": "https://stackoverflow.com/users/3578820/jgerulskis"}, "is_accepted": false, "score": 1, "last_activity_date": 1611154408, "last_edit_date": 1611154408, "creation_date": 1431554777, "answer_id": 30226003, "question_id": 30225915, "link": "https://stackoverflow.com/questions/30225915/how-does-one-identify-the-time-consuming-tasks-in-a-simpy-simulation/30226003#30226003", "title": "How does one identify the time consuming tasks in a SimPy simulation?", "body": "<pre><code>import time\nt1 = time.time()\n#code to time\nt2 = time.time()\nprint(t2 - t1)\n</code></pre>\n<p>You can use this and compare the times with all code samples you want to test</p>\n"}, {"comments": [{"owner": {"reputation": 757, "user_id": 2755084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/x0iZH.jpg?s=128&g=1", "display_name": "josiekre", "link": "https://stackoverflow.com/users/2755084/josiekre"}, "edited": false, "score": 0, "creation_date": 1431612973, "post_id": 30226245, "comment_id": 48580680, "body": "Unfortunately <code>runsnakerun</code> is not compatible with Python 3.x; nor is it being maintained anymore. I&#39;ve found <code>snakeviz</code> that is, and it is still in active development. Consider updating your answer? Thanks"}], "tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": true, "score": 1, "last_activity_date": 1431618142, "last_edit_date": 1431618142, "creation_date": 1431556017, "answer_id": 30226245, "question_id": 30225915, "link": "https://stackoverflow.com/questions/30225915/how-does-one-identify-the-time-consuming-tasks-in-a-simpy-simulation/30226245#30226245", "title": "How does one identify the time consuming tasks in a SimPy simulation?", "body": "<p>I would recommend using <a href=\"http://www.vrplumber.com/programming/runsnakerun/\" rel=\"nofollow\">runsnakerun</a> (or I guess snakeviz in py3x),  which uses cProfile(there are directions on runsnakerun's webpage) </p>\n\n<p>basically you just run your program</p>\n\n<pre><code>python -m cProfile -o profile.dump my_main.py \n</code></pre>\n\n<p>then you can get a nice visual view of your profile with runsnake (or snakeviz if using py3)</p>\n\n<pre><code>python runsnakerun.py profile.dump\n</code></pre>\n\n<p>(note that running it in profile mode will probably slow down your code even more ... but its really just to identify slow parts)</p>\n"}], "owner": {"reputation": 757, "user_id": 2755084, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/x0iZH.jpg?s=128&g=1", "display_name": "josiekre", "link": "https://stackoverflow.com/users/2755084/josiekre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 30226245, "answer_count": 2, "score": 1, "last_activity_date": 1611154408, "creation_date": 1431554380, "question_id": 30225915, "link": "https://stackoverflow.com/questions/30225915/how-does-one-identify-the-time-consuming-tasks-in-a-simpy-simulation", "title": "How does one identify the time consuming tasks in a SimPy simulation?", "body": "<p>I would like to speed up a SimPy simulation (if possible), but I'm not sure the best way to insert timers to even see what is taking long.</p>\n\n<p>Is there a way to do this?</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1431557175, "post_id": 30226021, "comment_id": 48556788, "body": "You don&#39;t need the backslash; <code>$$1</code> is sufficient."}], "tags": [], "owner": {"reputation": 27355, "user_id": 902885, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fc74acf73e1261de1f71cc5987258771?s=128&d=identicon&r=PG", "display_name": "frazman", "link": "https://stackoverflow.com/users/902885/frazman"}, "is_accepted": false, "score": 2, "last_activity_date": 1431554849, "creation_date": 1431554849, "answer_id": 30226021, "question_id": 30225909, "link": "https://stackoverflow.com/questions/30225909/how-to-use-templating-library-in-python/30226021#30226021", "title": "How to use templating library in python", "body": "<p>OP here.. Answering the question:\nThere is a '$' in the pattern.. which needs to be escaped as '$var' is used for variable substitution.\nSo, </p>\n\n<pre><code>fleh = map(lambda (load_identifier,feature_name):Template(\"FLATTEN((IsEmpty($load_identifier.\\$$1) ? null : BagToTuple($load_identifier.\\$$1))) AS $feature_name \").substitute(load_identifier=load_identifier, feature_name=feature_name), zip(load_identifiers, feature_names))\n</code></pre>\n\n<p>works</p>\n"}, {"tags": [], "owner": {"reputation": 1318, "user_id": 229181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ysZuf.jpg?s=128&g=1", "display_name": "Victor Olex", "link": "https://stackoverflow.com/users/229181/victor-olex"}, "is_accepted": false, "score": 0, "last_activity_date": 1431557150, "creation_date": 1431557150, "answer_id": 30226452, "question_id": 30225909, "link": "https://stackoverflow.com/questions/30225909/how-to-use-templating-library-in-python/30226452#30226452", "title": "How to use templating library in python", "body": "<p>No Template import needed.</p>\n\n<pre><code>feature_names = ['f1','f2']\nload_identifiers = [\"foo\",\"bar\"]\nts = \"FLATTEN((IsEmpty(%(load_identifier)s.$1) ? null : BagToTuple(%(load_identifier)s.$1))) AS %(feature_name)s\"\n\nfleh = [ts % d for d in [{'feature_name': fn, 'load_identifier': li} \n    for fn, li in zip(feature_names, load_identifiers)]]\n</code></pre>\n"}], "owner": {"reputation": 27355, "user_id": 902885, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fc74acf73e1261de1f71cc5987258771?s=128&d=identicon&r=PG", "display_name": "frazman", "link": "https://stackoverflow.com/users/902885/frazman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1431557150, "creation_date": 1431554353, "question_id": 30225909, "link": "https://stackoverflow.com/questions/30225909/how-to-use-templating-library-in-python", "title": "How to use templating library in python", "body": "<p>I am using inbuilt python template library..</p>\n\n<pre><code>from string import Template\nfeature_names = ['f1','f2']\nload_identifiers = [\"foo\",\"bar\"]\nfleh = map(lambda (load_identifier,feature_name):Template(\"FLATTEN((IsEmpty($load_identifier.\\$1) ? null : BagToTuple($load_identifier.\\$1))) AS $feature_name \").substitute(load_identifier=load_identifier, feature_name=feature_name), zip(load_identifiers, feature_names))\n</code></pre>\n\n<p>But I am getting the following error:</p>\n\n<pre><code>---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-177-ddbfd32ef884&gt; in &lt;module&gt;()\n----&gt; 1 fleh = map(lambda (load_identifier,feature_name):Template(\"FLATTEN((IsEmpty($load_identifier.\\$1) ? null : BagToTuple($load_identifier.\\$1))) AS $feature_name \").substitute(load_identifier=load_identifier, feature_name=feature_name), zip(load_identifiers, feature_names))\n\n&lt;ipython-input-177-ddbfd32ef884&gt; in &lt;lambda&gt;((load_identifier, feature_name))\n----&gt; 1 fleh = map(lambda (load_identifier,feature_name):Template(\"FLATTEN((IsEmpty($load_identifier.\\$1) ? null : BagToTuple($load_identifier.\\$1))) AS $feature_name \").substitute(load_identifier=load_identifier, feature_name=feature_name), zip(load_identifiers, feature_names))\n\n/anaconda/lib/python2.7/string.pyc in substitute(self, *args, **kws)\n    170             raise ValueError('Unrecognized named group in pattern',\n    171                              self.pattern)\n--&gt; 172         return self.pattern.sub(convert, self.template)\n    173 \n    174     def safe_substitute(self, *args, **kws):\n\n/anaconda/lib/python2.7/string.pyc in convert(mo)\n    167                 return self.delimiter\n    168             if mo.group('invalid') is not None:\n--&gt; 169                 self._invalid(mo)\n    170             raise ValueError('Unrecognized named group in pattern',\n    171                              self.pattern)\n\n/anaconda/lib/python2.7/string.pyc in _invalid(self, mo)\n    144             lineno = len(lines)\n    145         raise ValueError('Invalid placeholder in string: line %d, col %d' %\n--&gt; 146                          (lineno, colno))\n    147 \n    148     def substitute(self, *args, **kws):\n\nValueError: Invalid placeholder in string: line 1, col 36\n</code></pre>\n"}, {"tags": ["python", "list", "sorting", "tuples"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1431554233, "post_id": 30225839, "comment_id": 48555632, "body": "Your code should work, but only if you have named tuples. You can just use <code>(x[1] == &quot;special_string&quot;, x[0])</code> as the sort value. How is it not working for you?"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431554470, "post_id": 30225839, "comment_id": 48555738, "body": "what about the case of <code>[(4,&quot;A&quot;),(4,&quot;B&quot;)]</code> do you want it to move onto the second value in the event that the first value is a tie? (and the second value is not your <code>&quot;special_string&quot;</code>"}, {"owner": {"reputation": 1511, "user_id": 2680879, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1207905/picture?type=large", "display_name": "Atul Bhatia", "link": "https://stackoverflow.com/users/2680879/atul-bhatia"}, "edited": false, "score": 0, "creation_date": 1431554732, "post_id": 30225839, "comment_id": 48555860, "body": "Martijn you are correct, it does work. I accidentally reversed the order in my named tuple when I was testing in the interpreter, which screwed it up.   Joran, I don&#39;t care about that tie when ti doesn&#39;t involve special string."}, {"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1431554922, "post_id": 30225839, "comment_id": 48555950, "body": "Dear @AtulBhatia Could you please add your silly mistake as an answer (of course in a better manner) instead of adding that to your question"}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 0, "last_activity_date": 1431554222, "creation_date": 1431554222, "answer_id": 30225874, "question_id": 30225839, "link": "https://stackoverflow.com/questions/30225839/python-sort-list-of-tuples-by-first-value-of-tuple-except-for-special-case/30225874#30225874", "title": "Python sort list of tuples by first value of tuple except for special case", "body": "<pre><code>li = [(5, \"dummmy_string1\"), (6, \"dummy_string2\"), (3, \"special_string\")]\nprint sorted(li,key=lambda x:(x[-1]==\"special_string\",)+x)\n</code></pre>\n\n<p>should work fine ... no idea what you <code>x.string_value</code> is (other than perhaps an <code>AttributeError</code>)</p>\n\n<p>in the event there are several <code>special_string</code>'s it will sort them in the same order as the other strings (that is standard Left2Right tuple sorting)</p>\n"}, {"comments": [{"owner": {"reputation": 1738, "user_id": 803975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea5ec84f7ef1898ff9810f4e9980ce2?s=128&d=identicon&r=PG", "display_name": "whaleberg", "link": "https://stackoverflow.com/users/803975/whaleberg"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431555329, "post_id": 30225949, "comment_id": 48556132, "body": "@Joran True, this will likely be slower."}], "tags": [], "owner": {"reputation": 1738, "user_id": 803975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea5ec84f7ef1898ff9810f4e9980ce2?s=128&d=identicon&r=PG", "display_name": "whaleberg", "link": "https://stackoverflow.com/users/803975/whaleberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1431554519, "creation_date": 1431554519, "answer_id": 30225949, "question_id": 30225839, "link": "https://stackoverflow.com/questions/30225839/python-sort-list-of-tuples-by-first-value-of-tuple-except-for-special-case/30225949#30225949", "title": "Python sort list of tuples by first value of tuple except for special case", "body": "<p>Since sort is stable you can just sort the list twice.  Once for the first key and then a second time for the special case</p>\n\n<pre><code>In [2]: li = [(5, \"dummmy_string1\"), (6, \"dummy_string2\"), (3, \"special_string\")]\n\nIn [3]: sorted(li, key = lambda x : x[0])\nOut[3]: [(3, 'special_string'), (5, 'dummmy_string1'), (6, 'dummy_string2')]\n\nIn [4]: sorted(li, key = lambda x : x[1] == \"special_string\")\nOut[4]: [(5, 'dummmy_string1'), (6, 'dummy_string2'), (3, 'special_string')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1511, "user_id": 2680879, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1207905/picture?type=large", "display_name": "Atul Bhatia", "link": "https://stackoverflow.com/users/2680879/atul-bhatia"}, "is_accepted": false, "score": 0, "last_activity_date": 1431613405, "creation_date": 1431613405, "answer_id": 30239829, "question_id": 30225839, "link": "https://stackoverflow.com/questions/30225839/python-sort-list-of-tuples-by-first-value-of-tuple-except-for-special-case/30239829#30239829", "title": "Python sort list of tuples by first value of tuple except for special case", "body": "<p>The solution posted in the question does indeed work:</p>\n\n<p><code>sorted(li, key=lambda x: (x.string_value == \"special_string\", x.int_value))</code></p>\n"}], "owner": {"reputation": 1511, "user_id": 2680879, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1207905/picture?type=large", "display_name": "Atul Bhatia", "link": "https://stackoverflow.com/users/2680879/atul-bhatia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1431613405, "creation_date": 1431554068, "last_edit_date": 1431554757, "question_id": 30225839, "link": "https://stackoverflow.com/questions/30225839/python-sort-list-of-tuples-by-first-value-of-tuple-except-for-special-case", "title": "Python sort list of tuples by first value of tuple except for special case", "body": "<p>Hey I have a list of tuples that looks something like:</p>\n\n<p><code>[(5, \"dummmy_string1\"), (6, \"dummy_string2\"), (3, \"special_string\")]</code></p>\n\n<p>I want to order this in ascending order of the first value of the tuple, except for the case where the string is equal to <code>special_string</code>. I want <code>special_string</code> to be ordered last regardless of the integer value in the tuple. </p>\n\n<p>I have this right now which doesn't seem to be working:</p>\n\n<p><code>sorted(li, key=lambda x: (x.string_value == \"special_string\", x.int_value))</code></p>\n\n<p>I could easily find all the tuples that have <code>special_string</code>, remove them from the list, sort the list, and then append them to the end, but looking for a cleaner solution.</p>\n\n<p>EDIT:</p>\n\n<p>I made a silly mistake and realized that my solution does work...=)</p>\n"}, {"tags": ["python", "python-2.7", "winapi", "leap-motion"], "comments": [{"owner": {"reputation": 1218, "user_id": 3799589, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/923410dc14addf105b3d6cecf91226bc?s=128&d=identicon&r=PG&f=1", "display_name": "IronManMark20", "link": "https://stackoverflow.com/users/3799589/ironmanmark20"}, "edited": false, "score": 0, "creation_date": 1431554284, "post_id": 30225823, "comment_id": 48555652, "body": "try adding the location of the DLL (and the Leap modules) to the PYTHONPATH. See <a href=\"https://stackoverflow.com/questions/3701646/how-to-add-to-the-pythonpath-in-windows-7\">here</a>"}, {"owner": {"reputation": 1378, "user_id": 2574758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d89f72f0c01307c2e0cb47c6d43e20?s=128&d=identicon&r=PG", "display_name": "Charles Ward", "link": "https://stackoverflow.com/users/2574758/charles-ward"}, "edited": false, "score": 0, "creation_date": 1431613073, "post_id": 30225823, "comment_id": 48580759, "body": "There&#39;s documentation on setting this up here: <a href=\"https://developer.leapmotion.com/documentation/python/devguide/Project_Setup.html\" rel=\"nofollow noreferrer\">developer.leapmotion.com/documentation/python/devguide/&hellip;</a>"}], "owner": {"reputation": 145, "user_id": 4872230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/94331ee27e7686ece09f852aa2d820ef?s=128&d=identicon&r=PG&f=1", "display_name": "Qutaiba", "link": "https://stackoverflow.com/users/4872230/qutaiba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 757, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1431554032, "creation_date": 1431554032, "question_id": 30225823, "link": "https://stackoverflow.com/questions/30225823/leap-motion-using-python-error", "title": "Leap Motion using python error", "body": "<p>this is my first leap Motion application using python. \nthis is my code : </p>\n\n<pre><code>    import Leap,sys,thread,time\n    from Leap import CircleGesture,KeyTapGesture,ScreenTapGesture,SwipeGesture,\\\n    Listener\n\n\nclass LeapMotionListener(Leap,Listener):\n    finger_name = ['a','b','c','d','e']\n    bone_name = ['a1','b1','c1','d1']\n    state_name =['s1','s2','s3','s4']\n\n    def on_init(self, controller):\n        print('initialized')\n\n    def on_connect(self, controller):\n        print('connected')\n        controller.enable_gesture(Leap.Gesture.TYPE_CIRCLE)\n        controller.enable_gesture(Leap.Gesture.TYPE_KEY_TAP)\n        controller.enable_gesture(Leap.Gesture.TYPE_SCREEN_TAP)\n        controller.enable_gesture(Leap.Gesture.TYPE_SWIPE)\n\n    def on_disconnect(self, controller):\n        print('disconnected')\n\n    def on_exit(self, controller):\n        print('Exited')\n\n    def on_frame(self, controller):\n        pass\n\n    def main(self):\n        listener = LeapMotionListener()\n        controller = Leap.Controller()\n        controller.add_listener(listener)\n\n        print('press enter to quit')\n        try:\n            sys.stdin.readline()\n        except KeyboardInterrupt:\n            pass\n        finally:\n            controller.remove_listener(listener)\n\nif __name__ == \"__main__\":\n    LeapMotionListener.main()\n</code></pre>\n\n<p>but i get this error : </p>\n\n<blockquote>\n  <p>Traceback (most recent call last):\n    File \"C:\\Users\\Qutaiba\\workspace\\3D_Painter\\src\\aa.py\", line 1, in \n      import Leap,sys,thread,time\n    File \"C:\\Users\\Qutaiba\\workspace\\3D_Painter\\src\\Leap.py\", line 28, in \n      LeapPython = swig_import_helper()\n    File \"C:\\Users\\Qutaiba\\workspace\\3D_Painter\\src\\Leap.py\", line 24, in swig_import_helper\n      _mod = imp.load_module('LeapPython', fp, pathname, description)\n  ImportError: DLL load failed: %1 is not a valid Win32 application.</p>\n</blockquote>\n\n<p>i tried python 2.7 and 3.4 and the same error shows ! \ni read that i should install win32api, i installed it but nothing changed .. \ncan anyone help ?</p>\n"}, {"tags": ["python", "numpy", "theano"], "answers": [{"tags": [], "owner": {"reputation": 31975, "user_id": 127480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e30eaf17e40708aa4ef81be518564572?s=128&d=identicon&r=PG", "display_name": "Daniel Renshaw", "link": "https://stackoverflow.com/users/127480/daniel-renshaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1432545468, "creation_date": 1432545468, "answer_id": 30434928, "question_id": 30225633, "link": "https://stackoverflow.com/questions/30225633/cross-entropy-for-batch-with-theano/30434928#30434928", "title": "Cross Entropy for batch with Theano", "body": "<p>You need to use advanced indexing (search for \"advanced indexing\" <a href=\"http://deeplearning.net/software/theano/library/tensor/basic.html\" rel=\"nofollow\">here</a>). But Theano advanced indexing behaves differently to numpy so knowing how to do this in numpy may not be all that helpful!</p>\n\n<p>Here's a function which does this for my setup, but note that the order of my dimensions differs from yours. I use (time points, batch_size, num_classes). This also assumes you want to use the 1-of-N categorical cross-entropy variant. You may not want sequence length padding either.</p>\n\n<pre><code>def categorical_crossentropy_3d(coding_dist, true_dist, lengths):\n    # Zero out the false probabilities and sum the remaining true probabilities to remove the third dimension.\n    indexes = theano.tensor.arange(coding_dist.shape[2])\n    mask = theano.tensor.neq(indexes, true_dist.reshape((true_dist.shape[0], true_dist.shape[1], 1)))\n    predicted_probabilities = theano.tensor.set_subtensor(coding_dist[theano.tensor.nonzero(mask)], 0.).sum(axis=2)\n\n    # Pad short sequences with 1's (the pad locations are implicitly correct!)\n    indexes = theano.tensor.arange(predicted_probabilities.shape[0]).reshape((predicted_probabilities.shape[0], 1))\n    mask = indexes &gt;= lengths\n    predicted_probabilities = theano.tensor.set_subtensor(predicted_probabilities[theano.tensor.nonzero(mask)], 1.)\n\n    return -theano.tensor.log(predicted_probabilities)\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 3998122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae9dfcaa43d2c24998df797911f98599?s=128&d=identicon&r=PG&f=1", "display_name": "questionnaire", "link": "https://stackoverflow.com/users/3998122/questionnaire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1391, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1432545468, "creation_date": 1431553167, "question_id": 30225633, "link": "https://stackoverflow.com/questions/30225633/cross-entropy-for-batch-with-theano", "title": "Cross Entropy for batch with Theano", "body": "<p>I am attempting to implement an RNN and have output predictions p_y of shape (batch_size, time_points, num_classes). I also have a target_output of shape (batch_size, time_points), where the value at a given index of target_output is an integer denoting the class (a value between 0 and num_classes-1). How can I index p_y with target_output to get the probabilities of the given class I need to compute Cross-Entropy?</p>\n\n<p>I'm not even sure how to do this in numpy. The expression p_y[target_output] does not give the desired results.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1431553230, "post_id": 30225568, "comment_id": 48555230, "body": "Well I can only think that <code>lcd_raw_clean</code> is a view or slice of your original df, can you post how <code>lcd_raw_clean</code> was created"}, {"owner": {"reputation": 1925, "user_id": 4897557, "user_type": "registered", "accept_rate": 66, "profile_image": "https://lh6.googleusercontent.com/-6zUCOJzQroc/AAAAAAAAAAI/AAAAAAAABZQ/Lg15Hj2Ji8g/photo.jpg?sz=128", "display_name": "GPB", "link": "https://stackoverflow.com/users/4897557/gpb"}, "edited": false, "score": 0, "creation_date": 1431570771, "post_id": 30225568, "comment_id": 48560250, "body": "&gt; lcd_raw_clean = lcd_raw[:-4]"}, {"owner": {"reputation": 1925, "user_id": 4897557, "user_type": "registered", "accept_rate": 66, "profile_image": "https://lh6.googleusercontent.com/-6zUCOJzQroc/AAAAAAAAAAI/AAAAAAAABZQ/Lg15Hj2Ji8g/photo.jpg?sz=128", "display_name": "GPB", "link": "https://stackoverflow.com/users/4897557/gpb"}, "edited": false, "score": 0, "creation_date": 1431570823, "post_id": 30225568, "comment_id": 48560262, "body": "I  sliced the last 4 rows off as the data represented a footer."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1431592814, "post_id": 30225568, "comment_id": 48568200, "body": "Could you try <code>lcd_raw.iloc[:-4] = lcd_raw[:-4][&#39;issue_d&#39;].apply(lambda x: x.strftime(&#39;%Y%m&#39;)) </code>"}], "owner": {"reputation": 1925, "user_id": 4897557, "user_type": "registered", "accept_rate": 66, "profile_image": "https://lh6.googleusercontent.com/-6zUCOJzQroc/AAAAAAAAAAI/AAAAAAAABZQ/Lg15Hj2Ji8g/photo.jpg?sz=128", "display_name": "GPB", "link": "https://stackoverflow.com/users/4897557/gpb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 1, "closed_date": 1431641884, "answer_count": 0, "score": 0, "last_activity_date": 1431553172, "creation_date": 1431552858, "last_edit_date": 1431553172, "question_id": 30225568, "link": "https://stackoverflow.com/questions/30225568/setting-with-copy-warning", "closed_reason": "Duplicate", "title": "&quot;Setting with copy warning&quot;", "body": "<p>I'm recently new to python.  I've been trying to transform the date contents of a column into a new column containing the month and year which can the be grouped by a seaborn box plot function.   Assume <code>lcd_raw_clean</code> is a pandas dataframe containing feature <code>'issue_d'</code> which is <code>datetime</code> dtype.  </p>\n\n<p>The code I'm using</p>\n\n<pre><code>lcd_raw_clean['issue_YYMM'] = lcd_raw_clean['issue_d'].apply(lambda x: x.strftime('%Y%m')) \n</code></pre>\n\n<p>Generates the warning: </p>\n\n<pre><code>/Applications/anaconda/lib/python2.7/site-packages/IPython/kernel/__main__.py:7: SettingWithCopyWarning: \nA value is trying to be set on a copy of a slice from a DataFrame.\nTry using .loc[row_indexer,col_indexer] = value instead\n</code></pre>\n\n<p>I cannot understand why this generates this warning and how to get around it.   </p>\n"}, {"tags": ["python", "numpy", "matrix"], "answers": [{"tags": [], "owner": {"reputation": 244, "user_id": 4625567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5daa7b06eb64656bf2b704b3f0e8b275?s=128&d=identicon&r=PG&f=1", "display_name": "AniaG", "link": "https://stackoverflow.com/users/4625567/aniag"}, "is_accepted": false, "score": 0, "last_activity_date": 1431560991, "creation_date": 1431560991, "answer_id": 30227066, "question_id": 30225539, "link": "https://stackoverflow.com/questions/30225539/indexing-tensor-with-binary-matrix-in-numpy/30227066#30227066", "title": "Indexing tensor with binary matrix in numpy", "body": "<p>You can do it using list comprehension: </p>\n\n<pre><code>C = np.array([[A[i, j, B[i, j]] for j in range(A.shape[1])] for i in range(A.shape[0])])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29791, "user_id": 120261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2f78d64b265cf0c1c5781c1ea7a39?s=128&d=identicon&r=PG", "display_name": "mtrw", "link": "https://stackoverflow.com/users/120261/mtrw"}, "is_accepted": false, "score": 0, "last_activity_date": 1431562165, "creation_date": 1431562165, "answer_id": 30227232, "question_id": 30225539, "link": "https://stackoverflow.com/questions/30225539/indexing-tensor-with-binary-matrix-in-numpy/30227232#30227232", "title": "Indexing tensor with binary matrix in numpy", "body": "<p><code>C = A[:,:,0]*(B==0) + A[:,:,1]*(B==1)</code> should work. You can generalize this as <code>np.sum([A[:,:,k]*(B==k) for k in np.arange(A.shape[-1])], axis=0)</code> if you need to index more planes.</p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 2, "last_activity_date": 1431564223, "last_edit_date": 1431564223, "creation_date": 1431562697, "answer_id": 30227315, "question_id": 30225539, "link": "https://stackoverflow.com/questions/30225539/indexing-tensor-with-binary-matrix-in-numpy/30227315#30227315", "title": "Indexing tensor with binary matrix in numpy", "body": "<p><code>np.where</code> to the rescue.  It's the same principle as <code>mtrw's</code> answer:</p>\n\n<pre><code>In [344]: A=np.arange(4*3*2).reshape(4,3,2)\n\nIn [345]: B=np.zeros((4,3),dtype=int)\n\nIn [346]: B[[0,1,1,2,3],[0,0,1,2,2]]=1\n\nIn [347]: B\nOut[347]: \narray([[1, 0, 0],\n       [1, 1, 0],\n       [0, 0, 1],\n       [0, 0, 1]])\n\nIn [348]: np.where(B,A[:,:,1],A[:,:,0])\nOut[348]: \narray([[ 1,  2,  4],\n       [ 7,  9, 10],\n       [12, 14, 17],\n       [18, 20, 23]])\n</code></pre>\n\n<p><code>np.choose</code> can be used if the last dimension is larger than 2 (but smaller than 32).  (<code>choose</code> operates on a list or the 1st dimension, hence the <code>rollaxis</code>.</p>\n\n<pre><code>In [360]: np.choose(B,np.rollaxis(A,2))\nOut[360]: \narray([[ 1,  2,  4],\n       [ 7,  9, 10],\n       [12, 14, 17],\n       [18, 20, 23]])\n</code></pre>\n\n<p><code>B</code> can also be used directly as an index.  The trick is to specify the other dimensions in a way that broadcasts to the same shape.</p>\n\n<pre><code>In [373]: A[np.arange(A.shape[0])[:,None], np.arange(A.shape[1])[None,:], B]\nOut[373]: \narray([[ 1,  2,  4],\n       [ 7,  9, 10],\n       [12, 14, 17],\n       [18, 20, 23]])\n</code></pre>\n\n<p>This last approach can be modified to work when <code>B</code> does not match the 1st 2 dimensions of <code>A</code>. </p>\n\n<p><code>np.ix_</code> may simplify this indexing</p>\n\n<pre><code>I, J = np.ix_(np.arange(4),np.arange(3))\nA[I, J, B]\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 3998122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae9dfcaa43d2c24998df797911f98599?s=128&d=identicon&r=PG&f=1", "display_name": "questionnaire", "link": "https://stackoverflow.com/users/3998122/questionnaire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1431564223, "creation_date": 1431552784, "question_id": 30225539, "link": "https://stackoverflow.com/questions/30225539/indexing-tensor-with-binary-matrix-in-numpy", "title": "Indexing tensor with binary matrix in numpy", "body": "<p>I have a tensor A such that A.shape = (32, 19, 2) and a binary matrix B such that B.shape = (32, 19). Is there a one-line operation I can perform to get a matrix C, where C.shape = (32, 19) and C(i,j) = A[i, j, B[i,j]]?</p>\n\n<p>Essentially, I want to use B as an indexing matrix, where if B[i,j] = 1 I take A[i,j,1] to form C(i,j).</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 58628, "user_id": 227267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b03410a67ad6b9cf3fce7b0bf45084c8?s=128&d=identicon&r=PG", "display_name": "Matti Virkkunen", "link": "https://stackoverflow.com/users/227267/matti-virkkunen"}, "edited": false, "score": 7, "creation_date": 1431552574, "post_id": 30225477, "comment_id": 48554921, "body": "This begs the question though, is it a good idea to break the interface of a parent class in a child class?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1431552651, "post_id": 30225477, "comment_id": 48554955, "body": "<code>callable(obj)</code> checks <code>hasattr(obj, &#39;__call__&#39;)</code>; I don&#39;t think there&#39;s any way you can make <code>Child</code> appear to not have the attribute, as that would break inheritance."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1431552732, "post_id": 30225477, "comment_id": 48554998, "body": "Would it work to <code>del</code> the <code>__call__</code> reference?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1431552820, "post_id": 30225477, "comment_id": 48555042, "body": "@TigerhawkT3 you can&#39;t do that: <code>AttributeError: __call__</code> on the class, <code>&#39;Child&#39; object attribute &#39;__call__&#39; is read-only</code> on the instance"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1431552835, "post_id": 30225477, "comment_id": 48555053, "body": "You could write a wrapper for the class but then <code>isinstance</code> would fail."}, {"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1431552868, "post_id": 30225477, "comment_id": 48555070, "body": "@TigerhawkT3: if the Child-class has no attribute <code>__call__</code>, it is looked up in the parent class."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1431553478, "post_id": 30225477, "comment_id": 48555329, "body": "Maybe you could have the child define its own <code>__call__</code> to mask the parent&#39;s, and define it in a way that makes it look uncallable?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1431553685, "post_id": 30225477, "comment_id": 48555398, "body": "@TigerhawkT3 that would work to prevent calling <i>in practice</i>, but <b>won&#39;t</b> affect the result of <code>callable</code>"}, {"owner": {"reputation": 7673, "user_id": 3004881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lFgVw.jpg?s=128&g=1", "display_name": "Dan Getz", "link": "https://stackoverflow.com/users/3004881/dan-getz"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1431553818, "post_id": 30225477, "comment_id": 48555446, "body": "@TigerhawkT3 it looks callable if it&#39;s there. So if it&#39;s there, there&#39;s nothing it could be such that it wouldn&#39;t look callable."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 3, "creation_date": 1431553949, "post_id": 30225477, "comment_id": 48555497, "body": "Why do you want the class to be uncallable?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1431554155, "post_id": 30225477, "comment_id": 48555597, "body": "So, it&#39;ll appear callable as long as there&#39;s a <code>__call__</code> somewhere, and <code>__call__</code> can&#39;t be taken out? Sounds a bit intractable."}, {"owner": {"reputation": 50130, "user_id": 247542, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c125f576c3a08c0c1d4330bc565ae28c?s=128&d=identicon&r=PG", "display_name": "Cerin", "link": "https://stackoverflow.com/users/247542/cerin"}, "reply_to_user": {"reputation": 58628, "user_id": 227267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b03410a67ad6b9cf3fce7b0bf45084c8?s=128&d=identicon&r=PG", "display_name": "Matti Virkkunen", "link": "https://stackoverflow.com/users/227267/matti-virkkunen"}, "edited": false, "score": 1, "creation_date": 1431564725, "post_id": 30225477, "comment_id": 48558838, "body": "@MattiVirkkunen, In general, I agree, this is usually not what you want to do. In my case, I&#39;m working with a peak.CallbackProxy object that does a pretty good job almost seamlessly wrapping the object. The only caveat is that the proxy appears callable even if the object isn&#39;t, which can alter that way other code treats it."}], "answers": [{"comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431554860, "post_id": 30225611, "comment_id": 48555921, "body": "It might be useful to bring more of the logic into the answer, noting that <code>__call__ = property()</code> would make <code>hasattr(Child(), &#39;__call__&#39;)</code> return <code>False</code>, but not affect <code>callable</code> as it checks the class, not the instance, for the a attribute."}, {"owner": {"reputation": 79623, "user_id": 18515, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/f9375b447dd668a10c19891379b9db2a?s=128&d=identicon&r=PG", "display_name": "Devin Jeanpierre", "link": "https://stackoverflow.com/users/18515/devin-jeanpierre"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431556200, "post_id": 30225611, "comment_id": 48556472, "body": "@jonrsharpe Done so. How&#39;s it look?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1431567202, "post_id": 30225611, "comment_id": 48559434, "body": "Isn&#39;t the question actually asking how to make <i>instances</i> of a subclass uncallable, not how to make a class itself uncallable?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1431587549, "post_id": 30225611, "comment_id": 48565657, "body": "@user2357112 yes, but <code>callable</code> looks for <code>__call__</code> <i>on the class</i>, not the instance"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1431589516, "post_id": 30225611, "comment_id": 48566631, "body": "@jonrsharpe: All the example code and descriptions in this answer are about making the class itself uncallable. <code>callable(Child)</code>, <code>callable(Class)</code>, <code>callable(someclass)</code>, etc., rather than <code>callable(Child())</code> or <code>callable(Class())</code>."}, {"owner": {"reputation": 79623, "user_id": 18515, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/f9375b447dd668a10c19891379b9db2a?s=128&d=identicon&r=PG", "display_name": "Devin Jeanpierre", "link": "https://stackoverflow.com/users/18515/devin-jeanpierre"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1431624448, "post_id": 30225611, "comment_id": 48588152, "body": "@user2357112 Oops. Yes. I misread drastically. Fixed.  The answer remains the same, but some wording differs, and example code changes. (Basically my answer talked about the specific case of where Parent = type.)"}], "tags": [], "owner": {"reputation": 79623, "user_id": 18515, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/f9375b447dd668a10c19891379b9db2a?s=128&d=identicon&r=PG", "display_name": "Devin Jeanpierre", "link": "https://stackoverflow.com/users/18515/devin-jeanpierre"}, "is_accepted": true, "score": 14, "last_activity_date": 1431624617, "last_edit_date": 1431624617, "creation_date": 1431553052, "answer_id": 30225611, "question_id": 30225477, "link": "https://stackoverflow.com/questions/30225477/how-to-make-an-python-subclass-uncallable/30225611#30225611", "title": "How to make an Python subclass uncallable", "body": "<p>You can't. As jonrsharpe points out, there's no way to make <code>Child</code> appear to not have the attribute, and that's what <code>callable(Child())</code> relies on to produce its answer. Even making it a descriptor that raises <code>AttributeError</code> won't work, per this bug report: <a href=\"https://bugs.python.org/issue23990\" rel=\"nofollow noreferrer\">https://bugs.python.org/issue23990</a> . A python 2 example:</p>\n\n<pre><code>&gt;&gt;&gt; class Parent(object):\n...     def __call__(self): pass\n... \n&gt;&gt;&gt; class Child(Parent):\n...     __call__ = property()\n...\n&gt;&gt;&gt; c = Child()\n&gt;&gt;&gt; c()\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: unreadable attribute\n&gt;&gt;&gt; c.__call__\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: unreadable attribute\n&gt;&gt;&gt; callable(c)\nTrue\n</code></pre>\n\n<p>This is because <code>callable(...)</code> doesn't act out the descriptor protocol. Actually calling the object, or accessing a <code>__call__</code> attribute, involves retrieving the method even if it's behind a property, through the normal descriptor protocol. But <code>callable(...)</code> doesn't bother going that far, if it finds anything at all it is satisfied, and every subclass of Parent will have <em>something</em> for <code>__call__</code> -- either an attribute in a subclass, or the definition from <code>Parent</code>.</p>\n\n<p>So while you can make actually calling the instance fail with any exception you want, you can't ever make <code>callable(some_instance_of_parent)</code> return False.</p>\n"}, {"comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431554455, "post_id": 30225916, "comment_id": 48555731, "body": "Per the comments, none of this affects the result of <code>callable</code>"}], "tags": [], "owner": {"reputation": 11342, "user_id": 1936075, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/keYz5.jpg?s=128&g=1", "display_name": "theodox", "link": "https://stackoverflow.com/users/1936075/theodox"}, "is_accepted": false, "score": 1, "last_activity_date": 1431609620, "last_edit_date": 1431609620, "creation_date": 1431554382, "answer_id": 30225916, "question_id": 30225477, "link": "https://stackoverflow.com/questions/30225477/how-to-make-an-python-subclass-uncallable/30225916#30225916", "title": "How to make an Python subclass uncallable", "body": "<p>It's a bad idea to change the public interface of the class so radically from the parent to the base.  </p>\n\n<p>As pointed out elsewhere, you <em>cant</em> uninherit <code>__call__</code>.  If you really need to mix in callable and non callable classes you should use another test (adding a class attribute) or simply making it safe to call the variants with no functionality.</p>\n\n<p>To do the latter, You could override the <code>__call__</code> to raise <code>NotImplemented</code> (or better, a custom exception of your own) if for some reason you wanted to mix a non-callable class in with the callable variants:</p>\n\n<pre><code>class Parent(object):\n    def __call__(self):\n        print \"called\"\n\nclass Child (Parent):\n    def __call__(self):\n        raise NotACallableInstanceException()\n\nfor child_or_parent in list_of_children_and_parents():\n   try:  \n      child_or_parent()\n   except NotACallableInstanceException:\n      pass\n</code></pre>\n\n<p>Or, just override call with pass:</p>\n\n<pre><code>class Parent(object):\n    def __call__(self):\n        print \"called\"\n\nclass Child (Parent):\n    def __call__(self):\n        pass\n</code></pre>\n\n<p>Which will still be callable but just be a nullop. </p>\n"}], "owner": {"reputation": 50130, "user_id": 247542, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c125f576c3a08c0c1d4330bc565ae28c?s=128&d=identicon&r=PG", "display_name": "Cerin", "link": "https://stackoverflow.com/users/247542/cerin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 2, "accepted_answer_id": 30225611, "answer_count": 2, "score": 18, "last_activity_date": 1431624617, "creation_date": 1431552465, "last_edit_date": 1431552735, "question_id": 30225477, "link": "https://stackoverflow.com/questions/30225477/how-to-make-an-python-subclass-uncallable", "title": "How to make an Python subclass uncallable", "body": "<p>How do you \"disable\" the <code>__call__</code> method on a subclass so the following would be true:</p>\n\n<pre><code>class Parent(object):\n    def __call__(self):\n        return\n\nclass Child(Parent):\n    def __init__(self):\n        super(Child, self).__init__()\n        object.__setattr__(self, '__call__', None)\n\n&gt;&gt;&gt; c = Child()\n&gt;&gt;&gt; callable(c)\nFalse\n</code></pre>\n\n<p>This and other ways of trying to set <code>__call__</code> to some non-callable value still result in the child appearing as callable.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1431552030, "post_id": 30225368, "comment_id": 48554629, "body": "Yes, that&#39;s correct (except that small integers are <i>interned</i> in CPython, so <code>x = 5</code> would assign an existing <code>int</code> instance to the identifier <code>x</code>)."}, {"owner": {"reputation": 3925, "user_id": 732973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf7f32088ada37e7b24af7fa17984e94?s=128&d=identicon&r=PG", "display_name": "alfakini", "link": "https://stackoverflow.com/users/732973/alfakini"}, "edited": false, "score": 0, "creation_date": 1431552235, "post_id": 30225368, "comment_id": 48554739, "body": "Please take a look in the Python documentation: <a href=\"https://docs.python.org/2/library/stdtypes.html#built-in-types\" rel=\"nofollow noreferrer\">docs.python.org/2/library/stdtypes.html#built-in-types</a>"}], "owner": {"reputation": 405, "user_id": 4788487, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-0Px8PKHs_jo/AAAAAAAAAAI/AAAAAAAAAD4/yJ0bkrocyFc/photo.jpg?sz=128", "display_name": "trollpidor", "link": "https://stackoverflow.com/users/4788487/trollpidor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 1, "closed_date": 1431552148, "answer_count": 0, "score": 2, "last_activity_date": 1431551936, "creation_date": 1431551936, "question_id": 30225368, "link": "https://stackoverflow.com/questions/30225368/int-float-classes", "closed_reason": "Duplicate", "title": "Int, float - classes?", "body": "<p>Little question: are <code>int</code>, <code>float</code>, <code>bool</code>, <code>list</code>, <code>str</code>, etc. actual classes in python? For example, if we write <code>x = 5</code> we create an instance of a class <code>int</code> and assign this instance to a variable <code>x</code>. Am I correct?</p>\n"}, {"tags": ["python", "sympy"], "comments": [{"owner": {"reputation": 1593, "user_id": 220371, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c144e36a6be180b43397ccedfeb11762?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/220371/dave"}, "reply_to_user": {"reputation": 18845, "user_id": 838992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJyNd.png?s=128&g=1", "display_name": "J Richard Snape", "link": "https://stackoverflow.com/users/838992/j-richard-snape"}, "edited": false, "score": 0, "creation_date": 1431553179, "post_id": 30225348, "comment_id": 48555205, "body": "I don&#39;t believe it is a duplicate.  Calling simplify on my example expression does nothing,  The answer given on your question is to solve for a variable.  The equivalent in my case is to solve for all the constant terms on one side of the relational operator, and to simplify them by combining all the constants.  I don&#39;t know how to do this in sympy."}, {"owner": {"reputation": 18845, "user_id": 838992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJyNd.png?s=128&g=1", "display_name": "J Richard Snape", "link": "https://stackoverflow.com/users/838992/j-richard-snape"}, "edited": false, "score": 0, "creation_date": 1431553395, "post_id": 30225348, "comment_id": 48555289, "body": "OK - I haven&#39;t flagged it because I wasn&#39;t sure (thanks for the response) and am currently on a machine where I can&#39;t install Sympy.  I&#39;ll have a look on my machine that does have it later if you don&#39;t get an answer in the meantime"}], "answers": [{"comments": [{"owner": {"reputation": 1593, "user_id": 220371, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c144e36a6be180b43397ccedfeb11762?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/220371/dave"}, "edited": false, "score": 0, "creation_date": 1431800194, "post_id": 30235596, "comment_id": 48656628, "body": "Thanks Richard; does exactly what I wanted."}], "tags": [], "owner": {"reputation": 18845, "user_id": 838992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AJyNd.png?s=128&g=1", "display_name": "J Richard Snape", "link": "https://stackoverflow.com/users/838992/j-richard-snape"}, "is_accepted": true, "score": 1, "last_activity_date": 1431601060, "last_edit_date": 1495542109, "creation_date": 1431601060, "answer_id": 30235596, "question_id": 30225348, "link": "https://stackoverflow.com/questions/30225348/how-to-rearrange-sympy-expressions-containing-a-relational-operator/30235596#30235596", "title": "How to rearrange sympy expressions containing a relational operator", "body": "<p>Somewhat surprisingly, I couldn't find a way to do this \"out of the box\".  You can use the method in <a href=\"https://stackoverflow.com/questions/27825581/sympy-simplify-relational-inequality-expression\">this question</a> to make any one variable the sole subject of the left hand side (LHS) of the inequality but I can't seem to make the constant term the subject.</p>\n\n<p>So, I wrote my own version and reproduce it below.  I've tested it on the example given and a couple of other examples.  It tries to make the right hand side (RHS) consist of either zero or only constant terms based on an optional parameter.  There may well be corner cases where it fails - use / modify with caution.</p>\n\n<h3>Code:</h3>\n\n<pre><code>import sympy\nfrom sympy.core.relational import Relational\n\nmult_by_minus_one_map = {\n    None: '==',\n    '==': '==',\n    'eq': '==',\n    '!=': '!=',\n    '&lt;&gt;': '!=',\n    'ne': '!=',\n    '&gt;=': '&lt;=',\n    'ge': '&lt;=',\n    '&lt;=': '&gt;=',\n    'le': '&gt;=',\n    '&gt;': '&lt;',\n    'gt': '&lt;',\n    '&lt;': '&gt;',\n    'lt': '&gt;',\n}\n\ndef move_inequality_constants(ineq, zero_on_right=False):\n    l = ineq.lhs\n    r = ineq.rhs\n    op = ineq.rel_op\n    all_on_left = l - r\n    if zero_on_right:\n        return Relational(all_on_left, sympy.sympify(0), op)\n    else:\n        coeff_dict = all_on_left.as_coefficients_dict()\n        var_types = coeff_dict.keys()\n        new_rhs = sympy.sympify(0)\n        for s in var_types:\n            if s == 1:\n                all_on_left = all_on_left - coeff_dict[s]\n                new_rhs = new_rhs - coeff_dict[s]\n        if new_rhs &lt; 0:\n            all_on_left = all_on_left * -1\n            new_rhs = new_rhs * -1\n            op = mult_by_minus_one_map[op]\n        return Relational(all_on_left,new_rhs,op)\n\n# test code to demo function below    \nfrom sympy.abc import x,y,z\n\ntest_ineqs = [ x - 5 &gt; y - z,\n               x**2 + x - 5 &gt; y + x**2 - z,\n               x + 5 &gt; y - z,\n               x**3 + y**2 &gt;= x + 5*y - z - 15]\n\nfor k in test_ineqs:\n    print('Re-arranging '+ str(k))\n    kn = move_inequality_constants(k)\n    print('Gives '+str(kn))\n    print('Or equivalently ' + str(move_inequality_constants(k, True)))\n    print('====')\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre><code>Re-arranging x - 5 &gt; y - z\nGives x - y + z &gt; 5\nOr equivalently x - y + z - 5 &gt; 0\n====\nRe-arranging x**2 + x - 5 &gt; x**2 + y - z\nGives x - y + z &gt; 5\nOr equivalently x - y + z - 5 &gt; 0\n====\nRe-arranging x + 5 &gt; y - z\nGives -x + y - z &lt; 5\nOr equivalently x - y + z + 5 &gt; 0\n====\nRe-arranging x**3 + y**2 &gt;= x + 5*y - z - 15\nGives -x**3 + x - y**2 + 5*y - z &lt;= 15\nOr equivalently x**3 - x + y**2 - 5*y + z + 15 &gt;= 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10115, "user_id": 1089161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61e106a28e171b4407171702b182759f?s=128&d=identicon&r=PG", "display_name": "smichr", "link": "https://stackoverflow.com/users/1089161/smichr"}, "is_accepted": false, "score": 0, "last_activity_date": 1431947333, "creation_date": 1431947333, "answer_id": 30301606, "question_id": 30225348, "link": "https://stackoverflow.com/questions/30225348/how-to-rearrange-sympy-expressions-containing-a-relational-operator/30301606#30301606", "title": "How to rearrange sympy expressions containing a relational operator", "body": "<p>The omission of this from the <code>canonical</code> method was probably an oversight. </p>\n\n<p>Perhaps the following would work for your <code>else</code> clause </p>\n\n<pre><code>r, l = (ineq.lhs - ineq.rhs).as_coeff_Add()\nif r &lt; 0:\n    l, r = -r, -l\nreturn Relational(l, r, ineq.rel_op).canonical\n</code></pre>\n\n<p>One might imagine that canonical would remove common factors, too, so <code>2x&lt;4y</code> would become <code>x&lt;2*y</code>. SymPy would be open to a pull request implementing such changes.</p>\n"}], "owner": {"reputation": 1593, "user_id": 220371, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c144e36a6be180b43397ccedfeb11762?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/220371/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 0, "accepted_answer_id": 30235596, "answer_count": 2, "score": 4, "last_activity_date": 1431947333, "creation_date": 1431551843, "question_id": 30225348, "link": "https://stackoverflow.com/questions/30225348/how-to-rearrange-sympy-expressions-containing-a-relational-operator", "title": "How to rearrange sympy expressions containing a relational operator", "body": "<p>I have expressions containing a relational operator, symbols, and constants. I'd like to rearrange the expressions so that (to the extent possible) all the constant terms are on one side of the relational operator, and the remaining terms on the other side.  For example, I'd like to rearrange:</p>\n\n<p>x - 5 > y - z</p>\n\n<p>to:</p>\n\n<p>x - y + z > 5</p>\n\n<p>Is there an existing sympy method for doing this?  If not, where should I start in extending sympy?</p>\n"}, {"tags": ["python", "loops", "while-loop", "infinite-loop"], "comments": [{"owner": {"reputation": 959, "user_id": 4027401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UzJqV.jpg?s=128&g=1", "display_name": "clesiemo3", "link": "https://stackoverflow.com/users/4027401/clesiemo3"}, "edited": false, "score": 0, "creation_date": 1431552298, "post_id": 30225286, "comment_id": 48554774, "body": "If you&#39;re using While True loops you will run forever unless you have a break statement inside your loop to end it. Typically this will be done with some sort of logic. i.e. <code>if variable &gt; 2: Break</code> Breaks will take you up 1 level if you have nested loops. To break out of a nested loop completely in python there are some methods such as repeatedly Breaking or using return. Check out the answers below which seem to have captured a good solution."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1431552380, "post_id": 30225286, "comment_id": 48554825, "body": "Is there a reason you are using two infinite loops in two separate functions? What you want is technically possible, but it requires a little work and an understanding of coroutines."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 4897385, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-3m0ABGmPQQU/AAAAAAAAAAI/AAAAAAAAAC8/kQrF4DhzTPA/photo.jpg?sz=128", "display_name": "zeurosis", "link": "https://stackoverflow.com/users/4897385/zeurosis"}, "edited": false, "score": 0, "creation_date": 1431552016, "post_id": 30225323, "comment_id": 48554619, "body": "that sounds great except I have no idea what that means.  I seriously don&#39;t know any of the programming lingo, aside from the words you actually type.  I could really use an example"}], "tags": [], "owner": {"reputation": 697, "user_id": 202891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed15e526de056b3fe7d84760f131c8f6?s=128&d=identicon&r=PG", "display_name": "maniak1982", "link": "https://stackoverflow.com/users/202891/maniak1982"}, "is_accepted": false, "score": 0, "last_activity_date": 1431551698, "creation_date": 1431551698, "answer_id": 30225323, "question_id": 30225286, "link": "https://stackoverflow.com/questions/30225286/how-do-i-run-multiple-while-loops-that-switch-off-after-each-loop-round/30225323#30225323", "title": "How do I run multiple while loops that switch off after each loop round?", "body": "<p>I don't know Python, but it would seem to be a good idea to define each loop instead as a function and call them sequentially in a single loop.</p>\n"}, {"tags": [], "owner": {"reputation": 8155, "user_id": 1431244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/21b31222e990b631fee5484a7115a991?s=128&d=identicon&r=PG", "display_name": "Oliver Dain", "link": "https://stackoverflow.com/users/1431244/oliver-dain"}, "is_accepted": false, "score": 2, "last_activity_date": 1431551868, "creation_date": 1431551868, "answer_id": 30225354, "question_id": 30225286, "link": "https://stackoverflow.com/questions/30225286/how-do-i-run-multiple-while-loops-that-switch-off-after-each-loop-round/30225354#30225354", "title": "How do I run multiple while loops that switch off after each loop round?", "body": "<p>It looks to me like you don't really want to run 2 loops, you want to do 2 things inside a single loop. Something like:</p>\n\n<pre><code>def loop():\n  rounds = 0\n  while True:\n    doThing1(rounds)\n    doThing2(rounds)\n    rounds = rounds + 1\n    # Look up the mod function for an easier way to do this\n    if rounds &gt; 2:\n        rounds = 1\n\ndef doThing1(rounds):\n    if rounds == 1:\n        print('A')\n    elif rounds == 2:\n        print('B')\n\ndef doThing2(rounds):\n    if rounds == 1:\n        print('a')\n    elif rounds == 2:\n        print('b')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 173, "user_id": 4897385, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-3m0ABGmPQQU/AAAAAAAAAAI/AAAAAAAAAC8/kQrF4DhzTPA/photo.jpg?sz=128", "display_name": "zeurosis", "link": "https://stackoverflow.com/users/4897385/zeurosis"}, "edited": false, "score": 0, "creation_date": 1431552358, "post_id": 30225356, "comment_id": 48554814, "body": "when I use the the output is &quot;A B a b...&quot; and I need it to be &quot;A a B b&quot;"}, {"owner": {"reputation": 1942, "user_id": 3772464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51cd977ddf14eaa3c9e9ab1d9510e652?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3772464/ryan"}, "reply_to_user": {"reputation": 173, "user_id": 4897385, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-3m0ABGmPQQU/AAAAAAAAAAI/AAAAAAAAAC8/kQrF4DhzTPA/photo.jpg?sz=128", "display_name": "zeurosis", "link": "https://stackoverflow.com/users/4897385/zeurosis"}, "edited": false, "score": 0, "creation_date": 1431552427, "post_id": 30225356, "comment_id": 48554843, "body": "Yeah, I looked back at your question and edited my answer. You just need to switch a and B like I have above."}], "tags": [], "owner": {"reputation": 1942, "user_id": 3772464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51cd977ddf14eaa3c9e9ab1d9510e652?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/3772464/ryan"}, "is_accepted": false, "score": 5, "last_activity_date": 1431551875, "creation_date": 1431551875, "answer_id": 30225356, "question_id": 30225286, "link": "https://stackoverflow.com/questions/30225286/how-do-i-run-multiple-while-loops-that-switch-off-after-each-loop-round/30225356#30225356", "title": "How do I run multiple while loops that switch off after each loop round?", "body": "<p>Why not combine them to one loop?</p>\n\n<pre><code>rounds = 0\nwhile True:\n    if rounds == 0:\n        print('A')\n    elif rounds == 1:\n        print('a')\n    elif rounds == 2:\n        print('B')\n    elif rounds == 3:\n        print('b')\n    rounds = (rounds + 1) % 4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1431551937, "creation_date": 1431551937, "answer_id": 30225369, "question_id": 30225286, "link": "https://stackoverflow.com/questions/30225286/how-do-i-run-multiple-while-loops-that-switch-off-after-each-loop-round/30225369#30225369", "title": "How do I run multiple while loops that switch off after each loop round?", "body": "<p>You have a infinite loop without a break or return statement. The best thing to do is to replace the while with a for rounds in range(3).</p>\n\n<p>Replacing the rounds = 0 with a return statment will also work.</p>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 4607670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2db06874f3e072ec1a0a53b262349ee?s=128&d=identicon&r=PG&f=1", "display_name": "Hadri&#225;n", "link": "https://stackoverflow.com/users/4607670/hadri%c3%a1n"}, "is_accepted": true, "score": 0, "last_activity_date": 1431552235, "creation_date": 1431552235, "answer_id": 30225425, "question_id": 30225286, "link": "https://stackoverflow.com/questions/30225286/how-do-i-run-multiple-while-loops-that-switch-off-after-each-loop-round/30225425#30225425", "title": "How do I run multiple while loops that switch off after each loop round?", "body": "<p>Yo can try this, I don't know if it's what you are looking for but it will have your output.</p>\n\n<pre><code>rounds = 0\nrounds2= 0\nloop=1\nwhile True:\n    if loop==1:\n        if rounds == 1:\n            print('A')\n        elif rounds == 2:\n            print('B')\n        else:\n            rounds = 0\n        rounds = rounds + 1\n        loop=2\n    if loop==2:\n        if rounds2 == 1:\n            print('a')\n        elif rounds2 == 2:\n            print('b')\n        else:\n            rounds2 = 0\n        rounds2 = rounds2 + 1\n        loop=1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12710, "user_id": 2653390, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ArNxx.jpg?s=128&g=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/2653390/shashank"}, "edited": false, "score": 0, "creation_date": 1431553697, "post_id": 30225589, "comment_id": 48555400, "body": "We had the same idea, nice :)"}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1431552960, "creation_date": 1431552960, "answer_id": 30225589, "question_id": 30225286, "link": "https://stackoverflow.com/questions/30225286/how-do-i-run-multiple-while-loops-that-switch-off-after-each-loop-round/30225589#30225589", "title": "How do I run multiple while loops that switch off after each loop round?", "body": "<p>Ignoring the reason you have two separate functions (if you have one, you should put it in your question), you can do this using a single loop and the <code>itertools</code> module.</p>\n\n<pre><code>import itertools\nfor c in itertools.cycle(\"AaBb\"):\n    print(c)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12710, "user_id": 2653390, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ArNxx.jpg?s=128&g=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/2653390/shashank"}, "is_accepted": false, "score": 0, "last_activity_date": 1431553255, "creation_date": 1431553255, "answer_id": 30225651, "question_id": 30225286, "link": "https://stackoverflow.com/questions/30225286/how-do-i-run-multiple-while-loops-that-switch-off-after-each-loop-round/30225651#30225651", "title": "How do I run multiple while loops that switch off after each loop round?", "body": "<p>I would do it like this:</p>\n\n<pre><code>from itertools import cycle\n\ncycler = cycle(zip((1, 1, 2, 2), 'AaBb'))\n\nfor round, letter in cycler:\n    # infinite loop-body here\n</code></pre>\n\n<p>By using <a href=\"https://docs.python.org/3/library/itertools.html#itertools.cycle\" rel=\"nofollow\"><code>itertools.cycle</code></a>, you maintain the original structure of your program. Every iteration of your loop corresponds to a round number and a letter, which you are distributing through tuple unpacking.</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 4897544, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7i_qfeH0D44/AAAAAAAAAAI/AAAAAAAAAAA/_aANlaWOg0s/photo.jpg?sz=128", "display_name": "Chris Guida", "link": "https://stackoverflow.com/users/4897544/chris-guida"}, "is_accepted": false, "score": 1, "last_activity_date": 1431553504, "creation_date": 1431553504, "answer_id": 30225712, "question_id": 30225286, "link": "https://stackoverflow.com/questions/30225286/how-do-i-run-multiple-while-loops-that-switch-off-after-each-loop-round/30225712#30225712", "title": "How do I run multiple while loops that switch off after each loop round?", "body": "<p>What you're describing can be boiled down to a state machine. The machine has one variable, which we could call 'letter', so the machine has two states depending on whether this variable is 'A' or 'B' (you could also just make this a True/False boolean variable).  It also has two output variables, the uppercase letter followed by the lowercase one. After printing the current state, we alter the state and print again.</p>\n\n<pre><code>letter = 'A'\n\nwhile True:\n  if letter == 'A':\n    print('A')\n    print('a')\n    letter = 'B'\n  else:\n    print('B')\n    print('b')\n    letter = 'A'\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 4897385, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-3m0ABGmPQQU/AAAAAAAAAAI/AAAAAAAAAC8/kQrF4DhzTPA/photo.jpg?sz=128", "display_name": "zeurosis", "link": "https://stackoverflow.com/users/4897385/zeurosis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1718, "favorite_count": 0, "accepted_answer_id": 30225425, "answer_count": 8, "score": 1, "last_activity_date": 1431553504, "creation_date": 1431551531, "question_id": 30225286, "link": "https://stackoverflow.com/questions/30225286/how-do-i-run-multiple-while-loops-that-switch-off-after-each-loop-round", "title": "How do I run multiple while loops that switch off after each loop round?", "body": "<p>I'm fairly new to Python (and programming in general) and I was wondering if there's a way to run 2 or more while loops at the same time so that after each round of one loop it switches to the other, without necessarily starting over at round zero.  Here's what I have so far:</p>\n\n<pre><code>def loop1():\nrounds = 0\nwhile True:\n    if rounds == 1:\n        print('A')\n    elif rounds == 2:\n        print('B')\n    else:\n        rounds = 0\n    rounds = rounds + 1\n\ndef loop2():\n    rounds = 0\n    while True:\n        if rounds == 1:\n            print('a')\n        elif rounds == 2:\n            print('b')\n        else:\n            rounds = 0\n        rounds = rounds + 1\n\nloop1()\nloop2()\n</code></pre>\n\n<p>Now when I do this all it does is run loop1() infinitely and never gets to loop2(), but I'd like to know a way to get the output to say:</p>\n\n<pre><code>A\na\nB\nb\nA\na\nB\nb\nA\na\n... and so on. \n</code></pre>\n\n<p>Anyone know how I can do this? </p>\n\n<p>also please note that I am beginner and am not really caught up on all the programming terminology, so please use small word :) Thanks in advance.\n(also I'm using Python 3 (though I think you can probably already tell?))</p>\n"}, {"tags": ["python", "python-2.7", "pyinstaller"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431551508, "post_id": 30225112, "comment_id": 48554372, "body": "I use it all the time ... I have never <code>pip installed pyinstaller</code> just download the bundle extract it to anywhere you want and call it directly ... <code>~&#47;pyinstaller_installed_folder&#47;pyinstaller.py --onefile my_main.py</code>"}, {"owner": {"reputation": 1218, "user_id": 3799589, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/923410dc14addf105b3d6cecf91226bc?s=128&d=identicon&r=PG&f=1", "display_name": "IronManMark20", "link": "https://stackoverflow.com/users/3799589/ironmanmark20"}, "edited": false, "score": 1, "creation_date": 1431554710, "post_id": 30225112, "comment_id": 48555850, "body": "Oops, realized your on Windows. Open an administrator command prompt and try the command again."}, {"owner": {"reputation": 33, "user_id": 3826987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9725b015f258f27358fde49cbf93dcf?s=128&d=identicon&r=PG&f=1", "display_name": "compass", "link": "https://stackoverflow.com/users/3826987/compass"}, "edited": false, "score": 0, "creation_date": 1431646746, "post_id": 30225112, "comment_id": 48598932, "body": "Thanks IronManMark20, I feel a little silly for not thinking to try that."}], "owner": {"reputation": 33, "user_id": 3826987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9725b015f258f27358fde49cbf93dcf?s=128&d=identicon&r=PG&f=1", "display_name": "compass", "link": "https://stackoverflow.com/users/3826987/compass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1488, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1431550899, "creation_date": 1431550899, "question_id": 30225112, "link": "https://stackoverflow.com/questions/30225112/python-pyinstaller-permission-denied-while-unpacking", "title": "Python pyinstaller Permission Denied while unpacking", "body": "<p>I'm getting a permission denied error when trying to unpack pyinstaller. Is there anything specific about this line? I've tried to look up add-ons I need. I have pip, PyWin32, and PYODBC.</p>\n\n<p>I ran the command <code>pip install PyInstaller</code> and at first it looked good, then I got:</p>\n\n<blockquote>\n  <p>error: [Errno 13] Permission denied:\n  'build\\lib\\Pyinstaller\\utils\\git.py'</p>\n  \n  <p>Cleaning up... //...Storing debug log for failure in\n  C:\\Users\\gc\\pip\\pip.log</p>\n</blockquote>\n\n<p>Here's what the log has:</p>\n\n<blockquote>\n  <p>InstallationError: Command C:\\Python27\\python.exe -c \"import\n  setuptools,\n  tokenize;<strong>file</strong>='c:\\users\\gc\\appdata\\local\\temp\\pip_build_gc\\pyinstaller\\setup.py';exec(compile(getattr(tokenize,\n  'open', open)(<strong>file</strong>).read().replace('\\r\\n', '\\n'), <strong>file</strong>,\n  'exec'))\" install --record\n  c:\\users\\gc\\appdata\\local\\temp\\pip-3xxb4l-record\\install-record.txt\n  --single-version-externally-managed --compile failed with error code 1 in c:\\users\\gc\\appdata\\local\\temp\\pip_build_gc\\pyinstaller</p>\n</blockquote>\n"}, {"tags": ["python", "bash", "curl", "python-requests"], "answers": [{"comments": [{"owner": {"reputation": 1743, "user_id": 1884140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z8kyn.jpg?s=128&g=1", "display_name": "1.618", "link": "https://stackoverflow.com/users/1884140/1-618"}, "edited": false, "score": 0, "creation_date": 1431551236, "post_id": 30225140, "comment_id": 48554222, "body": "Maybe this is obvious enough that it doesn&#39;t need to be pointed out, but it should be <code>post()</code> instead of <code>get()</code>."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "reply_to_user": {"reputation": 1743, "user_id": 1884140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z8kyn.jpg?s=128&g=1", "display_name": "1.618", "link": "https://stackoverflow.com/users/1884140/1-618"}, "edited": false, "score": 0, "creation_date": 1431551305, "post_id": 30225140, "comment_id": 48554262, "body": "it should work identically regardless of post/get/push"}, {"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1431552198, "post_id": 30225140, "comment_id": 48554721, "body": "Thanks Joran, but I still don&#39;t get what I am doing wrong in my python script.  I have updated my question with my attempt to write this in python. Please take a look. Thank you"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 1, "creation_date": 1431553715, "post_id": 30225140, "comment_id": 48555409, "body": "<code>headers = {&quot;Content-Type: application&#47;json&quot;}</code> is not the same as <code>headers = {&quot;Content-Type&quot;: &quot;application&#47;json&quot;}</code> one is a dictionary with one key/value pair, the other is a set with a single string element ..."}], "tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 2, "last_activity_date": 1431551274, "last_edit_date": 1431551274, "creation_date": 1431550983, "answer_id": 30225140, "question_id": 30225085, "link": "https://stackoverflow.com/questions/30225085/what-is-the-python-requests-api-equivalent-to-my-shell-scripts-curl-command/30225140#30225140", "title": "What is the python &#39;requests&#39; api equivalent to my shell scripts curl command?", "body": "<pre><code>result = requests.get(url,\n        data=data, #whatever data\n        headers=headers, #dict {\"Content-Type\":\"application/json\"}\n        cert=(cacert,key),#key/cert pair \n        verify=\"cert_chain.pem\" \n        )\nprint result.json() #depending on version of requests, json may be a function or a property\n</code></pre>\n\n<p>this link will be helpful</p>\n\n<p><a href=\"http://docs.python-requests.org/en/latest/user/advanced/#ssl-cert-verification\" rel=\"nofollow\">http://docs.python-requests.org/en/latest/user/advanced/#ssl-cert-verification</a></p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 4897544, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7i_qfeH0D44/AAAAAAAAAAI/AAAAAAAAAAA/_aANlaWOg0s/photo.jpg?sz=128", "display_name": "Chris Guida", "link": "https://stackoverflow.com/users/4897544/chris-guida"}, "is_accepted": false, "score": 3, "last_activity_date": 1431553935, "creation_date": 1431553935, "answer_id": 30225801, "question_id": 30225085, "link": "https://stackoverflow.com/questions/30225085/what-is-the-python-requests-api-equivalent-to-my-shell-scripts-curl-command/30225801#30225801", "title": "What is the python &#39;requests&#39; api equivalent to my shell scripts curl command?", "body": "<pre><code>headers = {\"Content-Type: application/json\"}\n</code></pre>\n\n<p>should be changed to </p>\n\n<pre><code>headers = {\"Content-Type\": \"application/json\"}\n</code></pre>\n\n<p>Looks like the requests API is expecting a dictionary, and {\"Content-Type: application/json\"} is apparently a Python set.</p>\n"}], "owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1967, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1431929641, "creation_date": 1431550792, "last_edit_date": 1431552127, "question_id": 30225085, "link": "https://stackoverflow.com/questions/30225085/what-is-the-python-requests-api-equivalent-to-my-shell-scripts-curl-command", "title": "What is the python &#39;requests&#39; api equivalent to my shell scripts curl command?", "body": "<p>I have this curl command I use a shell script:</p>\n\n<pre><code>curl -X POST -H 'Content-Type: application/json' \\\n--cert /etc/puppetlabs/puppet/ssl/certs/${PEFQDN}.pem \\\n--key /etc/puppetlabs/puppet/ssl/private_keys/${PEFQDN}.pem \\\n--cacert /etc/puppetlabs/puppet/ssl/certs/ca.pem \\\n--data \"{ \\\"name\\\": \\\"$GROUP\\\", \\\"parent\\\": \\\"00000000-0000-4000-8000-000000000000\\\", \\\"environment\\\": \\\"production\\\", \\\"classes\\\": { \\\"$CLASS\\\": {}} }\" \\\nhttps://${PEFQDN}:4433/classifier-api/v1/groups | python -m json.tool\n</code></pre>\n\n<p>I want to get away from my shell script as I need to be able to process some complex json that comes back from the REST API. I figure I'd use <code>python</code> and the <code>requests</code> package.  I was looking at this documentation:</p>\n\n<p><a href=\"http://docs.python-requests.org/en/latest/user/quickstart/\" rel=\"nofollow\">http://docs.python-requests.org/en/latest/user/quickstart/</a></p>\n\n<p>But I do not see where I can specify my certificate info. In my shell script I can pass <code>curl</code> these options: <code>--cert</code>, <code>--key</code>, <code>--cacert</code>. I do not know how to accomplish the same with python's <code>requests</code> API.  Does anyone out know how I can accomplish this?</p>\n\n<p>UPDATE:  Thanks Joran.  Here is my attempt to write a python script to do this:</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport requests\n\n# curl https://${PEFQDN}:4433/classifier-api/v1/groups \\\n# -H \"Content-Type: application/json\" \\\n# --cert /etc/puppetlabs/puppet/ssl/certs/${PEFQDN}.pem \\\n# --key /etc/puppetlabs/puppet/ssl/private_keys/${PEFQDN}.pem \\\n# --cacert /etc/puppetlabs/puppet/ssl/certs/ca.pem | python -m json.tool\n\nurl='https://my-pm.example.com:4433/classifier-api/v1/groups'\nheaders = {\"Content-Type: application/json\"}\ndata={}\ncacert='/etc/puppetlabs/puppet/ssl/certs/ca.pem'\nkey='/etc/puppetlabs/puppet/ssl/private_keys/my-pm.example.com.pem'\ncert='/etc/puppetlabs/puppet/ssl/certs/my-pm.example.com.pem'\nresult = requests.get(url,\n        data=data, #whatever data\n        headers=headers, #dict {\"Content-Type\":\"application/json\"}\n        verify=cert,\n        cert=(cacert,key) #key/cert pair \n        )\nprint result.json()\n</code></pre>\n\n<p>And I must be doing something wrong because this is the output I get ...</p>\n\n<pre><code># ./add-group.py \nTraceback (most recent call last):\n  File \"./add-group.py\", line 21, in &lt;module&gt;\n    cert=(cacert,key) #key/cert pair \n  File \"/usr/lib/python2.7/site-packages/requests-2.7.0-py2.7.egg/requests/api.py\", line 69, in get\n    return request('get', url, params=params, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/requests-2.7.0-py2.7.egg/requests/api.py\", line 50, in request\n    response = session.request(method=method, url=url, **kwargs)\n  File \"/usr/lib/python2.7/site-packages/requests-2.7.0-py2.7.egg/requests/sessions.py\", line 451, in request\n    prep = self.prepare_request(req)\n  File \"/usr/lib/python2.7/site-packages/requests-2.7.0-py2.7.egg/requests/sessions.py\", line 382, in prepare_request\n    hooks=merge_hooks(request.hooks, self.hooks),\n  File \"/usr/lib/python2.7/site-packages/requests-2.7.0-py2.7.egg/requests/models.py\", line 293, in prepare\n    self.prepare_headers(headers)\n  File \"/usr/lib/python2.7/site-packages/requests-2.7.0-py2.7.egg/requests/models.py\", line 401, in prepare_headers\n    self.headers = CaseInsensitiveDict((to_native_string(name), value) for name, value in headers.items())\nAttributeError: 'set' object has no attribute 'items'\n</code></pre>\n\n<p>What I am doing wrong here?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "user-interface", "wxpython"], "comments": [{"owner": {"reputation": 51584, "user_id": 839246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9b0573c2b936b12828dd1e4cc04206dc?s=128&d=identicon&r=PG&f=1", "display_name": "bheklilr", "link": "https://stackoverflow.com/users/839246/bheklilr"}, "edited": false, "score": 0, "creation_date": 1431551150, "post_id": 30225070, "comment_id": 48554174, "body": "Have you tried using <code>wx.MessageBox</code> instead?  It has pretty much the same arguments, but acts as a function that shows a <code>MessageDialog</code> then returns the result."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1431551598, "post_id": 30225070, "comment_id": 48554430, "body": "unable to duplicate ... if I copy your code (replace-ing self with None) it works fine ... that said you should just do <code>wx.MessageBox(&quot;Please Choose A browser&quot;,&quot;ERROR&quot;)</code> you should not need to &quot;show&quot; it as it should just work"}, {"owner": {"reputation": 781, "user_id": 4696214, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/bea909dd9b61ea4c4f79192fb97d3f1f?s=128&d=identicon&r=PG&f=1", "display_name": "ohbrobig", "link": "https://stackoverflow.com/users/4696214/ohbrobig"}, "edited": false, "score": 0, "creation_date": 1431551866, "post_id": 30225070, "comment_id": 48554557, "body": "Whether I use a MessageBox or MessageDialog I get the same result. See above for more code..."}, {"owner": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "edited": false, "score": 0, "creation_date": 1431552598, "post_id": 30225070, "comment_id": 48554938, "body": "Can you provide a small runnable example that demonstrates the issue? Also what OS and wxPython version are you using?"}, {"owner": {"reputation": 781, "user_id": 4696214, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/bea909dd9b61ea4c4f79192fb97d3f1f?s=128&d=identicon&r=PG&f=1", "display_name": "ohbrobig", "link": "https://stackoverflow.com/users/4696214/ohbrobig"}, "edited": false, "score": 0, "creation_date": 1431552774, "post_id": 30225070, "comment_id": 48555019, "body": "This is wxPython 3.0 and im using windows. Don&#39;t think I would be able to provide a runnable example without posting my entire code..."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 1, "creation_date": 1431553595, "post_id": 30225070, "comment_id": 48555366, "body": "you should be able to provide a runnable example ... it looks like that method gets called from an event Binding ....? but you are calling it excplicitly in at least one place ? what is event argument for? this code does not demonstrate your problem... ... but the answer to your question is <b>you must be calling nobrowser from multiple places ...</b>"}], "answers": [{"tags": [], "owner": {"reputation": 781, "user_id": 4696214, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/bea909dd9b61ea4c4f79192fb97d3f1f?s=128&d=identicon&r=PG&f=1", "display_name": "ohbrobig", "link": "https://stackoverflow.com/users/4696214/ohbrobig"}, "is_accepted": false, "score": 0, "last_activity_date": 1431554546, "creation_date": 1431554546, "answer_id": 30225954, "question_id": 30225070, "link": "https://stackoverflow.com/questions/30225070/wxpython-message-dialogs-shown-twice/30225954#30225954", "title": "wxPython Message Dialogs Shown Twice", "body": "<p>I called it twice...looks like it ws being called again later in the code.</p>\n"}], "owner": {"reputation": 781, "user_id": 4696214, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/bea909dd9b61ea4c4f79192fb97d3f1f?s=128&d=identicon&r=PG&f=1", "display_name": "ohbrobig", "link": "https://stackoverflow.com/users/4696214/ohbrobig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431554546, "creation_date": 1431550730, "last_edit_date": 1431552271, "question_id": 30225070, "link": "https://stackoverflow.com/questions/30225070/wxpython-message-dialogs-shown-twice", "title": "wxPython Message Dialogs Shown Twice", "body": "<p>I've noticed that all my dialogs are being shown twice. So instead of them being destroyed immediately after the user presses 'OK', another message dialog pops up and the user has to press 'OK' again before it destroys.</p>\n\n<p>A bit annoying considering that these dialogs can show up somewhat often.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>class windowClass(wx.Frame):\n\n    def noBrowser(self, event):\n        dlg = wx.MessageDialog(self,\n                               \"Please choose a browser!\",\n                               \"Error\", wx.OK)\n        dlg.ShowModal()\n        dlg.Destroy()\n</code></pre>\n\n<p>This is part of a function in another class that calls this function...</p>\n\n<pre><code>if searchrow &lt; numrows:\n        try:\n            search=startSearch(file)\n            search.findDomains(searchrow, numrows, sheet, wbook, file)\n            myClass.finderStarted=True\n        except AttributeError:\n             myClass.noBrowser(self)\n</code></pre>\n\n<p>myClass is an instance of the windowClass</p>\n"}, {"tags": ["python", "c"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431550944, "post_id": 30225067, "comment_id": 48554050, "body": "Are you looking for something like <a href=\"http://stackoverflow.com/q/60208/3001761\">stackoverflow.com/q/60208/3001761</a>? For those of us not <i>au fait</i> with C, it might be helpful to provide more information about what you&#39;re talking about."}, {"owner": {"reputation": 12710, "user_id": 2653390, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ArNxx.jpg?s=128&g=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/2653390/shashank"}, "edited": false, "score": 1, "creation_date": 1431551136, "post_id": 30225067, "comment_id": 48554165, "body": "Maybe you want a dictionary mapping string keys to functions? I don&#39;t understand why you would need to use a while loop in C."}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "reply_to_user": {"reputation": 12710, "user_id": 2653390, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ArNxx.jpg?s=128&g=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/2653390/shashank"}, "edited": false, "score": 0, "creation_date": 1431551234, "post_id": 30225067, "comment_id": 48554220, "body": "@Shashank you could use a while loop if the array of function pointers was NULL terminated."}, {"owner": {"reputation": 627, "user_id": 4897472, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3648b49657a7c112c7be5f19c84215b4?s=128&d=identicon&r=PG&f=1", "display_name": "Roger", "link": "https://stackoverflow.com/users/4897472/roger"}, "edited": false, "score": 0, "creation_date": 1431551416, "post_id": 30225067, "comment_id": 48554317, "body": "Yes, a dictionary is what I need apparently, thank you!  (and yes I use a NULL terminated array for my loop in C)"}, {"owner": {"reputation": 12710, "user_id": 2653390, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ArNxx.jpg?s=128&g=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/2653390/shashank"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1431551515, "post_id": 30225067, "comment_id": 48554379, "body": "@PaulRooney Ah, makes sense. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": true, "score": 8, "last_activity_date": 1431553788, "last_edit_date": 1431553788, "creation_date": 1431551102, "answer_id": 30225178, "question_id": 30225067, "link": "https://stackoverflow.com/questions/30225067/reproduce-a-c-function-pointer-array-in-python/30225178#30225178", "title": "Reproduce a C function pointer array in Python", "body": "<p>In Python you use a <a href=\"https://docs.python.org/2/tutorial/datastructures.html#dictionaries\" rel=\"nofollow\"><strong><em>dictionary</em></strong></a>.</p>\n\n<p>Example:</p>\n\n<pre><code>keyword2func = {\n    \"word1\": function_word1,\n    \"word2\": function_word2,\n}\n\nword = input(\"\")\nkeyword2func[word]()\n</code></pre>\n"}], "owner": {"reputation": 627, "user_id": 4897472, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3648b49657a7c112c7be5f19c84215b4?s=128&d=identicon&r=PG&f=1", "display_name": "Roger", "link": "https://stackoverflow.com/users/4897472/roger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "accepted_answer_id": 30225178, "answer_count": 1, "score": 6, "last_activity_date": 1431553788, "creation_date": 1431550725, "last_edit_date": 1431551119, "question_id": 30225067, "link": "https://stackoverflow.com/questions/30225067/reproduce-a-c-function-pointer-array-in-python", "title": "Reproduce a C function pointer array in Python", "body": "<p>I have a Python program asking the user for input like a shell, and if I detect some specific keywords I want to go inside some specific functions.</p>\n\n<p>The thing is that I would like to avoid doing a lot of <code>if</code> and <code>else if</code>. Usually in C to avoid this situation I use a function pointer array that I travel with a <code>while</code> and use <code>strcmp</code> to check the input.</p>\n\n<p>I would like to know how to do that in Python if it is even possible.</p>\n"}, {"tags": ["python", "multithreading", "websocket"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1431551586, "post_id": 30225029, "comment_id": 48554422, "body": "what happens when you enter  something?"}, {"owner": {"reputation": 9341, "user_id": 1377021, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ba1fbbd03fa9766d8ef36d54b25c3569?s=128&d=identicon&r=PG", "display_name": "nathancahill", "link": "https://stackoverflow.com/users/1377021/nathancahill"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1431551790, "post_id": 30225029, "comment_id": 48554527, "body": "Currently, <code>ws.run_forever()</code> is the last line that runs. It never reaches the second loop"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1431551843, "post_id": 30225029, "comment_id": 48554548, "body": "What is the difference between <code>WebSocketApp</code> and <code>create_connection</code>?"}, {"owner": {"reputation": 9341, "user_id": 1377021, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ba1fbbd03fa9766d8ef36d54b25c3569?s=128&d=identicon&r=PG", "display_name": "nathancahill", "link": "https://stackoverflow.com/users/1377021/nathancahill"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1431551926, "post_id": 30225029, "comment_id": 48554577, "body": "WebSocketApp has a builtin keep alive ping (this is what needs to run infinitely, it pings the server every 15 seconds)"}, {"owner": {"reputation": 9341, "user_id": 1377021, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ba1fbbd03fa9766d8ef36d54b25c3569?s=128&d=identicon&r=PG", "display_name": "nathancahill", "link": "https://stackoverflow.com/users/1377021/nathancahill"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1431552026, "post_id": 30225029, "comment_id": 48554626, "body": "Instead of using WebSocketApp and run_forever, I could use my own loop that runs <code>ws.ping()</code> every 15 seconds. Still have the problem of two loops though"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1431552284, "post_id": 30225029, "comment_id": 48554764, "body": "<a href=\"http://pastebin.com/r8JJby2K\" rel=\"nofollow noreferrer\">pastebin.com/r8JJby2K</a> based on the example in the docs"}, {"owner": {"reputation": 9341, "user_id": 1377021, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ba1fbbd03fa9766d8ef36d54b25c3569?s=128&d=identicon&r=PG", "display_name": "nathancahill", "link": "https://stackoverflow.com/users/1377021/nathancahill"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1431552532, "post_id": 30225029, "comment_id": 48554899, "body": "Thank you! Works perfectly"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1431552574, "post_id": 30225029, "comment_id": 48554922, "body": "No worries, to break you might want to add <code>if not line.strip()</code> but you will probable need to  <code>ws.close()</code> if  want the code to end"}], "owner": {"reputation": 9341, "user_id": 1377021, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ba1fbbd03fa9766d8ef36d54b25c3569?s=128&d=identicon&r=PG", "display_name": "nathancahill", "link": "https://stackoverflow.com/users/1377021/nathancahill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1253, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1431552744, "creation_date": 1431550612, "last_edit_date": 1431552744, "question_id": 30225029, "link": "https://stackoverflow.com/questions/30225029/python-websocket-client-send-in-run-loop", "title": "Python websocket client send in run loop", "body": "<p>I'm piping <code>stdin</code> to a websocket using <a href=\"https://github.com/liris/websocket-client/\" rel=\"nofollow\">websocket-client</a>. I'm connecting to the websocket like this:</p>\n\n<pre><code>ws = WebSocketApp('ws://example.com/websocket')\nws.run_forever(ping_interval=15)\n</code></pre>\n\n<p><code>run_forever</code> starts an infinite loop. I'd like to simultaneously read from <code>sys.stdin</code> like this:</p>\n\n<pre><code>while True:\n    try:\n        line = sys.stdin.readline()\n        ws.send(line)\n    except KeyboardInterrupt:\n        break\n\n    if not line:\n        break\n</code></pre>\n\n<p>Is there a way to alternate between the two loops with threading? Or am I approaching this the wrong way?</p>\n\n<p>This could probably be done with Tornado or Twisted, but I'd rather keep the dependencies at a minimum if there's a way to do it with the standard lib.</p>\n"}, {"tags": ["python", "for-loop", "dictionary", "tuples"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1431550754, "post_id": 30225027, "comment_id": 48553943, "body": "<code>random.choice(verbes.items())</code> gives you a tuple <code>(key, value)</code>, <b>not</b> a dictionary. Tuples, as the error message states, don&#39;t have the <code>items</code> attribute."}, {"owner": {"reputation": 12710, "user_id": 2653390, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ArNxx.jpg?s=128&g=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/2653390/shashank"}, "edited": false, "score": 0, "creation_date": 1431550815, "post_id": 30225027, "comment_id": 48553984, "body": "You can assign it directly or indirectly: <code>verb, (pret, past, trad) = random.choice(verbes.items()) or some_var_which_holds_keyval_tuple</code>"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1431550832, "post_id": 30225027, "comment_id": 48553992, "body": ".items returns a list of tuples which are  key/value pairs, random.choice picks one of those tuples so you have a two element tuple not a dict."}, {"owner": {"reputation": 12710, "user_id": 2653390, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ArNxx.jpg?s=128&g=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/2653390/shashank"}, "edited": false, "score": 0, "creation_date": 1431550925, "post_id": 30225027, "comment_id": 48554040, "body": "What&#39;s your desired output by the way?"}, {"owner": {"reputation": 51, "user_id": 4897429, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8QHmZ-54AcY/AAAAAAAAAAI/AAAAAAAAABI/8FRo-Kiov4o/photo.jpg?sz=128", "display_name": "rEkOM", "link": "https://stackoverflow.com/users/4897429/rekom"}, "edited": false, "score": 0, "creation_date": 1431551818, "post_id": 30225027, "comment_id": 48554535, "body": "Well i would like then to print randomly the verb or the preterit or past or translation and user would have to write down the past, verb preterit if &quot;translation&quot; showed up, or past, preterit translation if &quot;verb&quot; showed up, etc."}], "answers": [{"tags": [], "owner": {"reputation": 4012, "user_id": 1458374, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f32cdceddfafef803455c819ad6fe030?s=128&d=identicon&r=PG", "display_name": "EvenLisle", "link": "https://stackoverflow.com/users/1458374/evenlisle"}, "is_accepted": false, "score": 2, "last_activity_date": 1431583832, "last_edit_date": 1431583832, "creation_date": 1431550768, "answer_id": 30225080, "question_id": 30225027, "link": "https://stackoverflow.com/questions/30225027/for-loop-iterate-tuples/30225080#30225080", "title": "for loop iterate tuples", "body": "<p><code>random.choice(verbes.items())</code> picks one tuple at random from <code>verbes.items()</code>. <code>rand</code> therefore contains one item - <code>rand[0]</code> holds the key and <code>rand[1]</code> the value.</p>\n\n<p>If what you're trying to do is iterate over the items in the value list:</p>\n\n<pre><code>for val in rand[1]:\n  print val\n</code></pre>\n\n<p>To unpack the <code>rand</code> tuple into its constituents:</p>\n\n<pre><code>verb, (pret, past, trad)\n</code></pre>\n\n<p><code>verb</code> now contains the key, and <code>pret</code>, <code>past</code> and <code>trad</code> each element in the list corresponding to the key.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 4897429, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8QHmZ-54AcY/AAAAAAAAAAI/AAAAAAAAABI/8FRo-Kiov4o/photo.jpg?sz=128", "display_name": "rEkOM", "link": "https://stackoverflow.com/users/4897429/rekom"}, "edited": false, "score": 0, "creation_date": 1431568360, "post_id": 30225114, "comment_id": 48559709, "body": "Ok thanks that works. but i don&#39;t understand this part <code>verb, (pret, past, trad) = rand</code> how do you assign all of this in one variable ?"}, {"owner": {"reputation": 23220, "user_id": 1004096, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0bd5ec4d97233e5f9f5f74bd6f02357?s=128&d=identicon&r=PG", "display_name": "Bi Rico", "link": "https://stackoverflow.com/users/1004096/bi-rico"}, "reply_to_user": {"reputation": 51, "user_id": 4897429, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8QHmZ-54AcY/AAAAAAAAAAI/AAAAAAAAABI/8FRo-Kiov4o/photo.jpg?sz=128", "display_name": "rEkOM", "link": "https://stackoverflow.com/users/4897429/rekom"}, "edited": false, "score": 1, "creation_date": 1431639548, "post_id": 30225114, "comment_id": 48596534, "body": "@rEkOM I&#39;ve added a basic explanation of python&#39;s unpacking rules."}], "tags": [], "owner": {"reputation": 23220, "user_id": 1004096, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0bd5ec4d97233e5f9f5f74bd6f02357?s=128&d=identicon&r=PG", "display_name": "Bi Rico", "link": "https://stackoverflow.com/users/1004096/bi-rico"}, "is_accepted": false, "score": 1, "last_activity_date": 1431639517, "last_edit_date": 1431639517, "creation_date": 1431550910, "answer_id": 30225114, "question_id": 30225027, "link": "https://stackoverflow.com/questions/30225027/for-loop-iterate-tuples/30225114#30225114", "title": "for loop iterate tuples", "body": "<p><code>rand</code> is an item from from <code>verbes</code> so no need to call items again:</p>\n\n<pre><code>rand = random.choice(verbes.items())\nverb, (pret, past, trad) = rand\n</code></pre>\n\n<p><code>dict.items()</code> returns a list of the \"items\" in the dict. Each item is a tuple of the form <code>(key, value)</code>. <code>random.choice</code> returns one of those tuples. I see that you're trying to loop over <code>rand</code>, maybe you want more than one random item? If so you can do something like:</p>\n\n<pre><code>for i in range(N):\n     verb, (pret, past, trad) = random.choice(verbes.items())\n     # Do more stuff\n</code></pre>\n\n<p>Update</p>\n\n<p>In python they call asigment such as <code>a, b = iterable</code> unpacking. You can use many different types on the right hand side, for example:</p>\n\n<pre><code># A tuple\na, b = (\"A\", \"B\")\n# A list\na, b = [\"A\", \"B\"]\n# A string\na, b = \"AB\"\n</code></pre>\n\n<p>In the simple case, the number or variables needs to be same same as the number of items in the iterable or python will raise an error. You can nest unpacking so:</p>\n\n<pre><code> a, (b, c, d) = (\"A\", \"BCD\")\n # is the same as\n a, temp = (\"A\", \"BCD\")\n (b, c, d) = temp\n</code></pre>\n\n<p>The <code>()</code> on the outside are optional so <code>a, b = item</code> is the same as <code>(a, b) = item</code>.</p>\n\n<p>Python 3 introduces even more advanced types of unpacking that I never use, but you can read about them <a href=\"https://www.python.org/dev/peps/pep-3132/\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 51, "user_id": 4897429, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8QHmZ-54AcY/AAAAAAAAAAI/AAAAAAAAABI/8FRo-Kiov4o/photo.jpg?sz=128", "display_name": "rEkOM", "link": "https://stackoverflow.com/users/4897429/rekom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1431639517, "creation_date": 1431550608, "question_id": 30225027, "link": "https://stackoverflow.com/questions/30225027/for-loop-iterate-tuples", "title": "for loop iterate tuples", "body": "<p>I'm a beginner in Python (and going back to coding after 20 years...)</p>\n\n<p>I'm doing a small script in order to learn irregular english verbs. \nI create my dict which look like this (it's in french)</p>\n\n<pre><code>verbes = {\n\"abide\":[\"abode\",\"abode\",\"respecter / se conformer \u00e0\"],\n\"arise\":[\"arisen\",\"arisen\",\"survenir\"],\n}\n</code></pre>\n\n<p>if i want to iterate the verbes i'm doing that for exemple:</p>\n\n<pre><code>for verb, (pret, past, trad) in verbes.items():\n    print \"Le verbe %s se conjugue au pr\u00e9t\u00e9rit par %s, au participe pass\u00e9 par %s et se traduit par %s\" % (verb, pret, past, trad)\n</code></pre>\n\n<p>Ok that works. \nThen i found out i can import random to pick up one random key and value in my dictionnary</p>\n\n<pre><code>rand = random.choice(verbes.items())\n</code></pre>\n\n<p>If i print rand i have a key, value\nbut if i iterate again i have a traceback:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \".\\exverbe1.py\", line 209, in &lt;module&gt;\n    for verb, (pret, past, trad) in rand.items(): AttributeError: 'tuple' object has no attribute 'items'\n</code></pre>\n\n<p>I'm not yet at the \"tuple\" lesson but i've tried to turn it into a list, a dict, etc. without success. I looked over \"for loop tuple\" in stackoverflow without result. So now i'm asking for help after 3 hours trying to figure it out...\nThanks </p>\n"}, {"tags": ["python", "python-2.7", "com", "win32com", "minitab"], "answers": [{"comments": [{"owner": {"reputation": 51584, "user_id": 839246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9b0573c2b936b12828dd1e4cc04206dc?s=128&d=identicon&r=PG&f=1", "display_name": "bheklilr", "link": "https://stackoverflow.com/users/839246/bheklilr"}, "edited": false, "score": 0, "creation_date": 1431925526, "post_id": 30294804, "comment_id": 48687076, "body": "I&#39;ll give it a try tomorrow morning"}, {"owner": {"reputation": 51584, "user_id": 839246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9b0573c2b936b12828dd1e4cc04206dc?s=128&d=identicon&r=PG&f=1", "display_name": "bheklilr", "link": "https://stackoverflow.com/users/839246/bheklilr"}, "edited": false, "score": 0, "creation_date": 1431955415, "post_id": 30294804, "comment_id": 48704243, "body": "Nope, no change in behavior =/"}, {"owner": {"reputation": 51584, "user_id": 839246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9b0573c2b936b12828dd1e4cc04206dc?s=128&d=identicon&r=PG&f=1", "display_name": "bheklilr", "link": "https://stackoverflow.com/users/839246/bheklilr"}, "edited": false, "score": 0, "creation_date": 1431957024, "post_id": 30294804, "comment_id": 48705366, "body": "I figured out how to do it, though!  I&#39;ll post it as an answer here so you can see it too, I only figured it out through a combination of <code>gc.set_debug(gc.DEBUG_LEAK)</code> and the <code>dis</code> module, it seems pretty specific but I imagine it could be useful for other COM objects."}], "tags": [], "owner": {"reputation": 21748, "user_id": 869951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/63uk6.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/869951/oliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1432038463, "last_edit_date": 1432038463, "creation_date": 1431920735, "answer_id": 30294804, "question_id": 30225007, "link": "https://stackoverflow.com/questions/30225007/ensure-that-process-started-by-com-connection-is-killed/30294804#30294804", "title": "Ensure that process started by COM connection is killed", "body": "<p>I don't have minitab so I can't verify but try forcing a shutdown of COM server by setting app = None just after the call to app.Quit? Python uses ref counting to manage object life cycle, so assuming there are no other refs to app then setting it to none should cause it to be finalized immediately. I have seen that cause similar issues. You should not need weak reference, something else is going on. The following, based on your answer, should work: </p>\n\n<pre><code>def process_data(mtb, data):\n    try:\n        mtb.do_something(data)\n    finally:\n        mtb.Quit()\n\ndef main(mtb):\n    data = get_data()\n    process_data(mtb, data)\n\nif __name__ == '__main__':\n    pythoncom.CoInitialize()\n    mtb = gencache.EnsureDispatch('Mtb.Application')\n    main(mtb)\n    mtb.Quit()\n    mtb = None\n    pythoncom.CoUninitialize()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21748, "user_id": 869951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/63uk6.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/869951/oliver"}, "edited": false, "score": 0, "creation_date": 1432038514, "post_id": 30305332, "comment_id": 48745566, "body": "I have never had to use a weakref with win32com app. Something else is going on. I just extended my solution, please try and let me know if that works."}, {"owner": {"reputation": 51584, "user_id": 839246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9b0573c2b936b12828dd1e4cc04206dc?s=128&d=identicon&r=PG&f=1", "display_name": "bheklilr", "link": "https://stackoverflow.com/users/839246/bheklilr"}, "reply_to_user": {"reputation": 21748, "user_id": 869951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/63uk6.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/869951/oliver"}, "edited": false, "score": 0, "creation_date": 1432038653, "post_id": 30305332, "comment_id": 48745655, "body": "@Schollii I tried something very much like that while coming to the solution I&#39;ve posted.  If I pass in the <code>mtb</code> object without <code>weakref</code> then it doesn&#39;t close, but if I do use <code>weakref</code> I can pass it around fine.  I also tried declaring it with a <code>weakref</code> inside the function that I want to use it in, but for whatever reason the GC immediately cleaned it up and the ref only returned <code>None</code>."}, {"owner": {"reputation": 21748, "user_id": 869951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/63uk6.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/869951/oliver"}, "edited": false, "score": 0, "creation_date": 1432038708, "post_id": 30305332, "comment_id": 48745696, "body": "The details matter, please try exactly what I put"}], "tags": [], "owner": {"reputation": 51584, "user_id": 839246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9b0573c2b936b12828dd1e4cc04206dc?s=128&d=identicon&r=PG&f=1", "display_name": "bheklilr", "link": "https://stackoverflow.com/users/839246/bheklilr"}, "is_accepted": true, "score": 0, "last_activity_date": 1431957862, "creation_date": 1431957862, "answer_id": 30305332, "question_id": 30225007, "link": "https://stackoverflow.com/questions/30225007/ensure-that-process-started-by-com-connection-is-killed/30305332#30305332", "title": "Ensure that process started by COM connection is killed", "body": "<p>The problem was that the the garbage collector could clean up the reference to the underlying <code>IUnknown</code> object (the base type for all COM objects), and without the gc doing it's job the process stayed alive.  I solve the problem by using the <code>weakref</code> module to immediately wrap the COM object in a weakref so it could be more easily deferenced:</p>\n\n<pre><code>from myapi import get_data\n\nimport weakref\nfrom win32com.client import gencache\nimport pythoncom\n\ndef process_data(mtb_ref, data):\n    try:\n        mtb_ref().do_something(data)\n    finally:\n        mtb_ref().Quit()\n\ndef main(mtb_ref):\n    data = get_data()\n    process_data(mtb_ref, data)\n\nif __name__ == '__main__':\n    pythoncom.CoInitialize()\n    mtb_ref = weakref.ref(gencache.EnsureDispatch('Mtb.Application'))\n    main(mtb_ref)\n    pythoncom.CoUninitialize()\n</code></pre>\n\n<p>I'm not sure I understand fully why this makes a difference, but I believe it's because there's never a direct reference to the object, only a weak reference, so all the functions that use the COM object only do so indirectly, allowing the GC to know that the object can be collected sooner.  For whatever reason it still needs to be created at the top level of the module, but this at least makes it possible for me to write more reusable code that cleanly exits.</p>\n"}, {"tags": [], "owner": {"reputation": 4429, "user_id": 1262058, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/lEl8O.jpg?s=128&g=1", "display_name": "madjardi", "link": "https://stackoverflow.com/users/1262058/madjardi"}, "is_accepted": false, "score": 0, "last_activity_date": 1493715586, "creation_date": 1493715586, "answer_id": 43733912, "question_id": 30225007, "link": "https://stackoverflow.com/questions/30225007/ensure-that-process-started-by-com-connection-is-killed/43733912#43733912", "title": "Ensure that process started by COM connection is killed", "body": "<p>after pythoncom.CoUninitialize()  i still see process<br>\nfor me it help (<a href=\"https://www.mail-archive.com/python-win32@python.org/msg09749.html\" rel=\"nofollow noreferrer\">based</a>):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from comtypes.automation import IDispatch\nfrom ctypes import c_void_p, cast, POINTER, byref\n\ndef release_reference(self, obj):\n    logger.debug(\"release com object\")\n    oleobj = obj._oleobj_\n    addr = int(repr(oleobj).split()[-1][2:-1], 16)\n\n    pointer = POINTER(IDispatch)()\n    cast(byref(pointer), POINTER(c_void_p))[0] = addr\n    pointer.Release()\n</code></pre>\n"}], "owner": {"reputation": 51584, "user_id": 839246, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9b0573c2b936b12828dd1e4cc04206dc?s=128&d=identicon&r=PG&f=1", "display_name": "bheklilr", "link": "https://stackoverflow.com/users/839246/bheklilr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1044, "favorite_count": 0, "accepted_answer_id": 30305332, "answer_count": 3, "score": 1, "last_activity_date": 1493715586, "creation_date": 1431550522, "last_edit_date": 1431550983, "question_id": 30225007, "link": "https://stackoverflow.com/questions/30225007/ensure-that-process-started-by-com-connection-is-killed", "title": "Ensure that process started by COM connection is killed", "body": "<p>I'm automating Minitab 17 using Python's <code>win32com</code> library, and while all of commands execute correctly, I can't seem to get the process started by the Minitab process to exit when my script ends.  My structure looks like</p>\n\n<pre><code>from myapi import get_data\n\nimport pythoncom\nfrom win32com.client import gencache\n\ndef process_data(data):\n    # In case of threading\n    pythoncom.CoInitialize()\n    app = gencache.EnsureDispatch('Mtb.Application')\n    try:\n        # do some processing\n        pass\n    finally:\n        # App-specific command that is supposed to close the software\n        app.Quit()\n        # Ensure the object is released\n        del mtb\n        # In case of threading\n        pythoncom.CoUninitialize()\n\ndef main():\n    data = get_data()\n    process_data(data)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>I don't get any exceptions raised or error messages printed, the <code>Mtb.exe</code> process is still listed in task manager.  Even more frustrating is if I run the following in an IPython session:</p>\n\n<pre><code>&gt;&gt;&gt; from win32com.client import gencache\n&gt;&gt;&gt; app = gencache.EnsureDispatch('Mtb.Application')\n&gt;&gt;&gt; ^D\n</code></pre>\n\n<p>The Minitab process is closed immediately.  I observe the same behavior in a normal <code>python</code> interactive session.  <strike>Why would the process get closed correctly when running in an interactive session but not in a standalone script?  What is done differently there that isn't being performed in my script?</strike></p>\n\n<p>I've also tried running <code>process_data</code> in a <code>threading.Thread</code> and in a <code>multiprocessing.Process</code> with no luck.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>If I have a script containing nothing but</p>\n\n<pre><code>from win32com.client import gencache\napp = gencache.EnsureDispatch('Mtb.Application')\n</code></pre>\n\n<p>then when I run it I see the <code>Mtb.exe</code> process in task manager, but once the script exits the process is killed.  So instead my question is why does it matter if this COM object is declared at top-level vs. inside a function?</p>\n"}, {"tags": ["python", "url", "encoding"], "comments": [{"owner": {"reputation": 1743, "user_id": 1884140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z8kyn.jpg?s=128&g=1", "display_name": "1.618", "link": "https://stackoverflow.com/users/1884140/1-618"}, "edited": false, "score": 0, "creation_date": 1431552945, "post_id": 30224991, "comment_id": 48555117, "body": "<code>https:&#47;&#47;www.google.com&#47;#q=sdfs dfs</code> isn&#39;t valid -- you can&#39;t have a space anywhere in a url, and you can&#39;t put a query string after the &#39;#&#39;.  Fragment id&#39;s have to come last."}, {"owner": {"reputation": 6882, "user_id": 458961, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UbyTU.jpg?s=128&g=1", "display_name": "adammenges", "link": "https://stackoverflow.com/users/458961/adammenges"}, "reply_to_user": {"reputation": 1743, "user_id": 1884140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z8kyn.jpg?s=128&g=1", "display_name": "1.618", "link": "https://stackoverflow.com/users/1884140/1-618"}, "edited": false, "score": 0, "creation_date": 1431553390, "post_id": 30224991, "comment_id": 48555286, "body": "I know on the space, that was done of purpose to show the %20, the &#39;#&#39; though is placed there for me by google. If you go to google.com, search for something, you&#39;ll see it there too."}, {"owner": {"reputation": 1743, "user_id": 1884140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z8kyn.jpg?s=128&g=1", "display_name": "1.618", "link": "https://stackoverflow.com/users/1884140/1-618"}, "edited": false, "score": 0, "creation_date": 1431553918, "post_id": 30224991, "comment_id": 48555483, "body": "I see that now... and frankly I&#39;m baffled why it looks like that, because the rfc seems to be saying the fragment should come at the end:  <a href=\"http://tools.ietf.org/html/rfc3986#section-3.5\" rel=\"nofollow noreferrer\">tools.ietf.org/html/rfc3986#section-3.5</a>  I guess it&#39;s not really relevant to your problem, anyway."}, {"owner": {"reputation": 1743, "user_id": 1884140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z8kyn.jpg?s=128&g=1", "display_name": "1.618", "link": "https://stackoverflow.com/users/1884140/1-618"}, "edited": false, "score": 0, "creation_date": 1431554817, "post_id": 30224991, "comment_id": 48555897, "body": "I don&#39;t see anything in here that&#39;s doing url encoding <a href=\"https://hg.python.org/cpython/file/2.7/Lib/webbrowser.py\" rel=\"nofollow noreferrer\">hg.python.org/cpython/file/2.7/Lib/webbrowser.py</a> so it might be your &quot;not a browser&quot; application that&#39;s doing it, rather than the webbrowser module.  It&#39;s also possible that the request is being proxied by your browser..."}, {"owner": {"reputation": 6882, "user_id": 458961, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UbyTU.jpg?s=128&g=1", "display_name": "adammenges", "link": "https://stackoverflow.com/users/458961/adammenges"}, "reply_to_user": {"reputation": 1743, "user_id": 1884140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z8kyn.jpg?s=128&g=1", "display_name": "1.618", "link": "https://stackoverflow.com/users/1884140/1-618"}, "edited": false, "score": 0, "creation_date": 1431555809, "post_id": 30224991, "comment_id": 48556340, "body": "Ah, yea it&#39;s probably getting proxied. It&#39;s on OSX. This starts to really stretch my knowledge on the subject, but is there a way I can hand over a uri to the system and it decides where to send it, without this browser step? Through some magic the developers have set it up so any <code>jjur:&#47;&#47;</code> links get handled by this app. There was a simple API from Apple to follow, the delegate is just passed a string. Folks here have gotten a script in Ruby land to do this, without encoding, I&#39;m move some of it over to Python and on trying to reproduce the results."}, {"owner": {"reputation": 6882, "user_id": 458961, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UbyTU.jpg?s=128&g=1", "display_name": "adammenges", "link": "https://stackoverflow.com/users/458961/adammenges"}, "reply_to_user": {"reputation": 1743, "user_id": 1884140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z8kyn.jpg?s=128&g=1", "display_name": "1.618", "link": "https://stackoverflow.com/users/1884140/1-618"}, "edited": false, "score": 0, "creation_date": 1431555948, "post_id": 30224991, "comment_id": 48556386, "body": "Though, back to the previous point, it&#39;d be weird if it was just being proxied by Safari. Opening <code>https:&#47;&#47;www.google.com&#47;#q=sdfs dfs</code> in Safari works just fine, but what happens here is the script has Safari try to open <code>https:&#47;&#47;www.google.com&#47;%23q=sdfs%20dfs</code> -- seams like something else is handling the encoding?"}, {"owner": {"reputation": 1743, "user_id": 1884140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z8kyn.jpg?s=128&g=1", "display_name": "1.618", "link": "https://stackoverflow.com/users/1884140/1-618"}, "reply_to_user": {"reputation": 6882, "user_id": 458961, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UbyTU.jpg?s=128&g=1", "display_name": "adammenges", "link": "https://stackoverflow.com/users/458961/adammenges"}, "edited": false, "score": 0, "creation_date": 1431556151, "post_id": 30224991, "comment_id": 48556455, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/77758/discussion-between-1-618-and-inbetween\">continue this discussion in chat</a>."}], "owner": {"reputation": 6882, "user_id": 458961, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UbyTU.jpg?s=128&g=1", "display_name": "adammenges", "link": "https://stackoverflow.com/users/458961/adammenges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1431550438, "creation_date": 1431550438, "question_id": 30224991, "link": "https://stackoverflow.com/questions/30224991/how-to-get-python-to-not-encode-my-urls", "title": "How to get Python to not encode my urls", "body": "<p>I've got a simple script that opens a uri in the appropriate application. It's not a web browser (not http).</p>\n\n<p>I've been using <code>webbrowser</code>, which opens it in the right application, but it url encodes everything, which is frustrating. There's another easy way to see my problem, by simply trying to open a google search:</p>\n\n<pre><code>webbrowser.open('https://www.google.com/#q=sdfs dfs')\n</code></pre>\n\n<p>This breaks because it try's to open:</p>\n\n<pre><code>https://www.google.com/%23q=sdfs%20dfs\n</code></pre>\n\n<p>And Google returns an error. I've been trying to figure out how to turn off url encoding, but haven't turned up anything. I'm not married to <code>webbrowser</code>, but whatever it is, it'd need to be able to open with different url types, <code>urllib</code> doesn't: </p>\n\n<pre><code>urllib2.URLError: &lt;urlopen error unknown url type: jjur&gt;\n</code></pre>\n\n<p>Thoughts?</p>\n"}, {"tags": ["python", "matplotlib", "ipython-notebook", "interactive", "jupyter"], "comments": [{"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "edited": false, "score": 0, "creation_date": 1431551132, "post_id": 30224979, "comment_id": 48554162, "body": "use <code>%matplotlib notebook</code> and then you can mutate your axes/artist objects and the re-draw."}], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 1877086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2tGpQ.png?s=128&g=1", "display_name": "Eric Hein", "link": "https://stackoverflow.com/users/1877086/eric-hein"}, "edited": false, "score": 0, "creation_date": 1471910641, "post_id": 30225272, "comment_id": 65528714, "body": "Putting the interactive call in its own cell is what fixed it for me, not sure why this was necessary."}], "tags": [], "owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "is_accepted": true, "score": 6, "last_activity_date": 1431551488, "creation_date": 1431551488, "answer_id": 30225272, "question_id": 30224979, "link": "https://stackoverflow.com/questions/30224979/is-it-possible-to-speed-up-interactive-ipython-notebook-plots-by-not-generating/30225272#30225272", "title": "Is it possible to speed up interactive IPython Notebook plots by not generating new figures every time?", "body": "<p>Some setup:</p>\n\n<pre><code>%matplotlib notebook\nimport matplotlib.pyplot as plt\nfrom IPython.html.widgets import interactive\nfrom IPython.display import display\nimport numpy as np\n</code></pre>\n\n<p>Create your objects:</p>\n\n<pre><code>fig, ax = plt.subplots()\nax.set_xlim(0, .25)\nax.set_ylim(-2.5, 2.5)\nax.set_title('beat frequencies')\nlnA, = ax.plot([], [], color='r', label='A')\nlnB, = ax.plot([], [], color='purple', label='B')\nlnsum, = ax.plot([], [], color='k', label='signal')\nax.legend()\nmax_time = 3\nrate = 8000\ntimes = np.linspace(0,max_time,rate*max_time)\n\ndef beat_freq(f1=220.0, f2=224.0):\n\n    A = np.sin(2*np.pi*f1*times)\n    B = np.sin(2*np.pi*f2*times)\n    sig = A + B\n\n    lnA.set_data(times, A)\n    lnB.set_data(times, B)\n    lnsum.set_data(times, sig)\n\n    plt.draw()\n\nbeat_freq(0, 0)\n</code></pre>\n\n<p>and the interactive (which I think needs to go in it's own cell)</p>\n\n<pre><code>interactive(beat_freq, f1=(200.0,300.0), f2=(200.0,300.0))\n</code></pre>\n\n<p>You can also poke at the objects from a different cell:</p>\n\n<pre><code>ax.set_xlim(0, .05)\nax.set_ylim(-2, 2)\nplt.draw()\n</code></pre>\n\n<p>or </p>\n\n<pre><code>lnB.set_color('g')\nax.legend()\nplt.draw()\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 4340151, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1092240229/picture?type=large", "display_name": "Mr. W.", "link": "https://stackoverflow.com/users/4340151/mr-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1197, "favorite_count": 2, "accepted_answer_id": 30225272, "answer_count": 1, "score": 6, "last_activity_date": 1431551488, "creation_date": 1431550382, "last_edit_date": 1495535630, "question_id": 30224979, "link": "https://stackoverflow.com/questions/30224979/is-it-possible-to-speed-up-interactive-ipython-notebook-plots-by-not-generating", "title": "Is it possible to speed up interactive IPython Notebook plots by not generating new figures every time?", "body": "<p>Every example I've seen of using widgets for interactive matplotlib plots in the notebook do something like this (adapted from <a href=\"https://stackoverflow.com/questions/27489742/ipython-notebook-interactive-function-how-to-set-the-slider-range\">here</a>):</p>\n\n<pre><code>%matplotlib inline\n\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom IPython.html.widgets import interact\nfrom IPython.display import display\n\ndef sigmoid_demo(a=5,b=1):\n    x = np.linspace(0,10,256)\n    s = 1/(1+np.exp(-(x-a)/(b+0.1))) # +0.1 to avoid dividing by 0\n    sn = 100.0*(s-min(s))/(max(s)-min(s)) # normalize sigmoid to 0-100\n\n    # Does this have to be in this function?\n    fig, ax = plt.subplots(figsize=(24,6))\n\n    ax.set_xticks([])\n    ax.set_yticks([])\n    plt.plot(x,sn,lw=2,color='black')\n    plt.xlim(x.min(), x.max())\n\nw=interact(sigmoid_demo,a=5,b=1)\n</code></pre>\n\n<p>I suspect that the responsiveness of the plot could be sped up hugely if you didn't have to create a brand new figure with <code>plt.subplots()</code> or <code>plt.figure()</code> each time a widget was adjusted.</p>\n\n<p>I've tried a few things to move figure creation outside of the function being called by <code>interact()</code> but nothing has worked.</p>\n"}, {"tags": ["python", "numpy", "pandas", "linear-regression"], "comments": [{"owner": {"reputation": 2353, "user_id": 1044561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cOjPX.jpg?s=128&g=1", "display_name": "gabe", "link": "https://stackoverflow.com/users/1044561/gabe"}, "edited": false, "score": 0, "creation_date": 1431550500, "post_id": 30224955, "comment_id": 48553814, "body": "<code>trans_amount</code> is undefined. Is that supposed to be <code>amount</code>?"}, {"owner": {"reputation": 437, "user_id": 4100141, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/m2pt8.png?s=128&g=1", "display_name": "invoker", "link": "https://stackoverflow.com/users/4100141/invoker"}, "reply_to_user": {"reputation": 2353, "user_id": 1044561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cOjPX.jpg?s=128&g=1", "display_name": "gabe", "link": "https://stackoverflow.com/users/1044561/gabe"}, "edited": false, "score": 0, "creation_date": 1431550579, "post_id": 30224955, "comment_id": 48553863, "body": "Good catch, yes, fixed that."}, {"owner": {"reputation": 2353, "user_id": 1044561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cOjPX.jpg?s=128&g=1", "display_name": "gabe", "link": "https://stackoverflow.com/users/1044561/gabe"}, "edited": false, "score": 0, "creation_date": 1431550655, "post_id": 30224955, "comment_id": 48553896, "body": "<code>x</code> is also undefined. Should we just assume that&#39;s some constant (how about <code>1</code>?"}, {"owner": {"reputation": 437, "user_id": 4100141, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/m2pt8.png?s=128&g=1", "display_name": "invoker", "link": "https://stackoverflow.com/users/4100141/invoker"}, "reply_to_user": {"reputation": 2353, "user_id": 1044561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cOjPX.jpg?s=128&g=1", "display_name": "gabe", "link": "https://stackoverflow.com/users/1044561/gabe"}, "edited": false, "score": 0, "creation_date": 1431550749, "post_id": 30224955, "comment_id": 48553940, "body": "Right you are, I forgot about the <code>x</code>.  This is the way it is in my code."}, {"owner": {"reputation": 2353, "user_id": 1044561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cOjPX.jpg?s=128&g=1", "display_name": "gabe", "link": "https://stackoverflow.com/users/1044561/gabe"}, "edited": false, "score": 0, "creation_date": 1431551409, "post_id": 30224955, "comment_id": 48554311, "body": "You don&#39;t need to call <code>tolist</code>, just replace <code>straight</code> with <code>trans</code> -- no need to cast as a list. That will save time replicating the data set (if it&#39;s real long, this takes time)."}, {"owner": {"reputation": 2353, "user_id": 1044561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cOjPX.jpg?s=128&g=1", "display_name": "gabe", "link": "https://stackoverflow.com/users/1044561/gabe"}, "edited": false, "score": 0, "creation_date": 1431552568, "post_id": 30224955, "comment_id": 48554916, "body": "How many rows and columns in the dataframe? how many location_codes? how many levels of <code>amount</code> ?"}, {"owner": {"reputation": 437, "user_id": 4100141, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/m2pt8.png?s=128&g=1", "display_name": "invoker", "link": "https://stackoverflow.com/users/4100141/invoker"}, "reply_to_user": {"reputation": 2353, "user_id": 1044561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cOjPX.jpg?s=128&g=1", "display_name": "gabe", "link": "https://stackoverflow.com/users/1044561/gabe"}, "edited": false, "score": 0, "creation_date": 1431553035, "post_id": 30224955, "comment_id": 48555150, "body": "6 columns, 92370574 rows, 2496502 locations, 37 months each, unique amounts for each value.  The dataset is organized by location code and then month, as it appears in the example."}], "answers": [{"comments": [{"owner": {"reputation": 437, "user_id": 4100141, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/m2pt8.png?s=128&g=1", "display_name": "invoker", "link": "https://stackoverflow.com/users/4100141/invoker"}, "edited": false, "score": 0, "creation_date": 1431552208, "post_id": 30225295, "comment_id": 48554725, "body": "When I call <code>tolist</code>, I&#39;m only creating a list of what is in the groupby amount, which is 6 items."}, {"owner": {"reputation": 2353, "user_id": 1044561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cOjPX.jpg?s=128&g=1", "display_name": "gabe", "link": "https://stackoverflow.com/users/1044561/gabe"}, "reply_to_user": {"reputation": 437, "user_id": 4100141, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/m2pt8.png?s=128&g=1", "display_name": "invoker", "link": "https://stackoverflow.com/users/4100141/invoker"}, "edited": false, "score": 0, "creation_date": 1431555351, "post_id": 30225295, "comment_id": 48556145, "body": "Does this do the speed up you want?"}, {"owner": {"reputation": 437, "user_id": 4100141, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/m2pt8.png?s=128&g=1", "display_name": "invoker", "link": "https://stackoverflow.com/users/4100141/invoker"}, "edited": false, "score": 0, "creation_date": 1431555954, "post_id": 30225295, "comment_id": 48556389, "body": "No, it does not.  Based on my testing it is approximately the same if not a bit slower.  I am looking for a function that can be applied to the group by object so that I do not have to iterate at all."}], "tags": [], "owner": {"reputation": 2353, "user_id": 1044561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cOjPX.jpg?s=128&g=1", "display_name": "gabe", "link": "https://stackoverflow.com/users/1044561/gabe"}, "is_accepted": false, "score": 1, "last_activity_date": 1431554644, "last_edit_date": 1431554644, "creation_date": 1431551575, "answer_id": 30225295, "question_id": 30224955, "link": "https://stackoverflow.com/questions/30224955/performing-math-on-a-python-pandas-group-by-dataframe/30225295#30225295", "title": "Performing math on a Python Pandas Group By DataFrame", "body": "<p>Without knowing more about the data, number of records, etc, this code should run faster:</p>\n\n<pre><code>import pandas as pd\nimport statsmodels.api as sm\nimport numpy as np\n\ngb = df.groupby('location_code')['amount']\n\nx = sm.add_constant(range(1,7))\n\ndef fit(stuff):\n    return sm.OLS(stuff[\"amount\"], x).fit().params[1] / stuff[\"amount\"].mean()\n\noutput = gb.apply(fit)\n</code></pre>\n"}], "owner": {"reputation": 437, "user_id": 4100141, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/m2pt8.png?s=128&g=1", "display_name": "invoker", "link": "https://stackoverflow.com/users/4100141/invoker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1527, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1431619297, "creation_date": 1431550257, "last_edit_date": 1431619297, "question_id": 30224955, "link": "https://stackoverflow.com/questions/30224955/performing-math-on-a-python-pandas-group-by-dataframe", "title": "Performing math on a Python Pandas Group By DataFrame", "body": "<p>I have a Pandas DataFrame with the following structure:</p>\n\n<pre><code>In [1]: df\nOut[1]: \n    location_code    month    amount\n0    1               1        10\n1    1               2        11\n2    1               3        12\n3    1               4        13\n4    1               5        14\n5    1               6        15\n6    2               1        23\n7    2               2        25\n8    2               3        27\n9    2               4        29\n10   2               5        31\n11   2               6        33\n</code></pre>\n\n<p>I also have a DataFrame with the following:</p>\n\n<pre><code>In [2]: output_df\nOut[2]: \n    location_code    regression_coef\n0   1                None\n1   2                None\n</code></pre>\n\n<p><strong>What I would like:</strong></p>\n\n<pre><code>output_df = df.groupby('location_code')[amount].apply(linear_regression_and_return_coefficient)\n</code></pre>\n\n<p>I would like to group by the <code>location code</code> and then perform a linear regression on the values of <code>amount</code> and store the coefficient.  I have tried the following code:</p>\n\n<pre><code>import pandas as pd\nimport statsmodels.api as sm\nimport numpy as np\n\ngb = df.groupby('location_code')['amount']\n\nx = []\nfor j in range(6): x.append(j+1)\n\nfor location_code, amount in gb:\n    trans = amount.tolist()\n    x = sm.add_constant(x)\n    model = sm.OLS(trans, x)\n    results = model.fit()\n    output_df['regression_coef'][merchant_location_code] = results.params[1]/np.mean(trans)\n</code></pre>\n\n<p>This code works, but my data set is somewhat large (about 5 gb) and a bit more complex, and this is taking a <strong>REALLY LONG TIME</strong>.  I am wondering if there is a vectorized operation that can do this more efficiently?  I know that using loops on a Pandas DataFrame is bad.</p>\n\n<p><strong>SOLUTION</strong></p>\n\n<p>After some tinkering around, I wrote a function that can be used with the <code>apply</code> method on a <code>groupby</code>.</p>\n\n<pre><code>def get_lin_reg_coef(series):\n    x=sm.add_constant(range(1,7))\n    result = sm.OLS(series, x).fit().params[1]\n    return result/series.mean()\n\ngb = df.groupby('location_code')['amount']\n\noutput_df['lin_reg_coef'] = gb.apply(get_lin_reg_coef)\n</code></pre>\n\n<p>Benchmarking this versus the iterative solution I had before, with varying input sizes gets:</p>\n\n<pre><code>DataFrame Rows    Iterative Solution (sec)    Vectorized Solution (sec)\n       370,000    81.42                       84.46\n     1,850,000    448.36                      365.66\n     3,700,000    1282.83                     715.89\n     7,400,000    5034.62                     1407.88         \n</code></pre>\n\n<p>Clearly a lot faster as the dataset grows in size!</p>\n"}, {"tags": ["python", "c++", "vector"], "comments": [{"owner": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "edited": false, "score": 1, "creation_date": 1431550558, "post_id": 30224951, "comment_id": 48553847, "body": "2D - so make a tuple of tuples?"}, {"owner": {"reputation": 263, "user_id": 4897442, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d672bfd441175c6343b835fe2e7913b6?s=128&d=identicon&r=PG&f=1", "display_name": "Sajal Jain", "link": "https://stackoverflow.com/users/4897442/sajal-jain"}, "reply_to_user": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "edited": false, "score": 0, "creation_date": 1431621812, "post_id": 30224951, "comment_id": 48586550, "body": "Thanks Nayuki. But I don&#39;t know how will it work. Can you please elaborate a little?"}, {"owner": {"reputation": 263, "user_id": 4897442, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d672bfd441175c6343b835fe2e7913b6?s=128&d=identicon&r=PG&f=1", "display_name": "Sajal Jain", "link": "https://stackoverflow.com/users/4897442/sajal-jain"}, "reply_to_user": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "edited": false, "score": 0, "creation_date": 1431628479, "post_id": 30224951, "comment_id": 48590489, "body": "As far as I am able to understand there is no direct way for this. We should break the 2-D vector into 2 1-D vectors and pass them all one by one. Just a guess. Woking on implementing it."}, {"owner": {"reputation": 263, "user_id": 4897442, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d672bfd441175c6343b835fe2e7913b6?s=128&d=identicon&r=PG&f=1", "display_name": "Sajal Jain", "link": "https://stackoverflow.com/users/4897442/sajal-jain"}, "reply_to_user": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "edited": false, "score": 0, "creation_date": 1432160994, "post_id": 30224951, "comment_id": 48814534, "body": "Tuple of tuples is very time and memory consuming. Is there any other way?"}], "owner": {"reputation": 263, "user_id": 4897442, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d672bfd441175c6343b835fe2e7913b6?s=128&d=identicon&r=PG&f=1", "display_name": "Sajal Jain", "link": "https://stackoverflow.com/users/4897442/sajal-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1431550388, "creation_date": 1431550244, "last_edit_date": 1431550388, "question_id": 30224951, "link": "https://stackoverflow.com/questions/30224951/pass-vectorvectorfloat-from-c-to-python", "title": "Pass vector&lt;vector&lt;float&gt; &gt; from C++ to Python", "body": "<p>I am calling a Python module from C++ module. In my C++ module I have a <code>vector&lt;vector&lt;float&gt;&gt; data(size)</code>\nNow, i want to pass this to python where I will be doing some manipulations onto it.\nI see that the command <code>PyFloat_FromDouble</code> returns a <code>PyObject</code> and converts double to float. Now, I want my data to be in float and I get the result in <code>PyObject</code> form which I can further pass to python by <code>PyTuple_SetItem</code>.</p>\n\n<p>Does anyone knows how to pass a <code>vector&lt;vector&lt;float&gt; &gt;</code> to Python from C++. I am able to pass a 1D <code>vector&lt;double&gt;</code> to Python from C++ but need to pass 2D vector.</p>\n"}, {"tags": ["python", "python-3.x", "chat", "lan"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431550259, "post_id": 30224933, "comment_id": 48553689, "body": "OK, try again; this time, <b>ask a question</b>. Read <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>, for example."}, {"owner": {"reputation": 119, "user_id": 4633163, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u8IFd4BoMLc/AAAAAAAAAAI/AAAAAAAADcI/1Ii2Gxg43i0/photo.jpg?sz=128", "display_name": "Kim Andr&#233;", "link": "https://stackoverflow.com/users/4633163/kim-andr%c3%a9"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431550299, "post_id": 30224933, "comment_id": 48553712, "body": "OK, I&#39;l edit, wait a sec."}, {"owner": {"reputation": 119, "user_id": 4633163, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u8IFd4BoMLc/AAAAAAAAAAI/AAAAAAAADcI/1Ii2Gxg43i0/photo.jpg?sz=128", "display_name": "Kim Andr&#233;", "link": "https://stackoverflow.com/users/4633163/kim-andr%c3%a9"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431550366, "post_id": 30224933, "comment_id": 48553745, "body": "@jonrsharpe Read it now."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1431550402, "post_id": 30224933, "comment_id": 48553764, "body": "Nope, no good. Please use the information in the Help Center; this is neither a code-writing nor tutorial service."}, {"owner": {"reputation": 119, "user_id": 4633163, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u8IFd4BoMLc/AAAAAAAAAAI/AAAAAAAADcI/1Ii2Gxg43i0/photo.jpg?sz=128", "display_name": "Kim Andr&#233;", "link": "https://stackoverflow.com/users/4633163/kim-andr%c3%a9"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431550480, "post_id": 30224933, "comment_id": 48553799, "body": "I don&#39;t understand, what do I do wrong?"}, {"owner": {"reputation": 119, "user_id": 4633163, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u8IFd4BoMLc/AAAAAAAAAAI/AAAAAAAADcI/1Ii2Gxg43i0/photo.jpg?sz=128", "display_name": "Kim Andr&#233;", "link": "https://stackoverflow.com/users/4633163/kim-andr%c3%a9"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431550986, "post_id": 30224933, "comment_id": 48554069, "body": "@jonrsharpe Is this good enough for you?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431551047, "post_id": 30224933, "comment_id": 48554114, "body": "No, sorry. <i>&quot;how do I...&quot;</i> questions are a bad fit for SO. Follow e.g. <a href=\"http://meta.stackoverflow.com/q/260648/3001761\">meta.stackoverflow.com/q/260648/3001761</a> to write a better question."}, {"owner": {"reputation": 119, "user_id": 4633163, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u8IFd4BoMLc/AAAAAAAAAAI/AAAAAAAADcI/1Ii2Gxg43i0/photo.jpg?sz=128", "display_name": "Kim Andr&#233;", "link": "https://stackoverflow.com/users/4633163/kim-andr%c3%a9"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431551219, "post_id": 30224933, "comment_id": 48554212, "body": "@jonrsharpe I have said yes to all those questions and read the hole d**n thing."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1431551746, "post_id": 30224933, "comment_id": 48554507, "body": "The code you have posted is <b>completely irrelevant</b>; it is trivial and makes no attempt to send <code>message</code> anywhere. If you have done any research on sending messages over LAN, there is <b>no evidence</b> of it in the question. It is also badly written, although I appreciate that English may not be your first language. Again, <i>this is neither a code-writing nor tutorial service</i>. I see no point in spending any longer on this."}, {"owner": {"reputation": 119, "user_id": 4633163, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u8IFd4BoMLc/AAAAAAAAAAI/AAAAAAAADcI/1Ii2Gxg43i0/photo.jpg?sz=128", "display_name": "Kim Andr&#233;", "link": "https://stackoverflow.com/users/4633163/kim-andr%c3%a9"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431551874, "post_id": 30224933, "comment_id": 48554560, "body": "@jonrsharpe OK, no need to be so harsh, why didn&#39;t you say that from the begining? I&#39;l remove the post if that makes you feel any better."}, {"owner": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 0, "creation_date": 1431552593, "post_id": 30224933, "comment_id": 48554934, "body": "He is not harsh. He is trying to explain to you how SO works and instead of getting angry with him you might want to thank him instead, because he is right"}, {"owner": {"reputation": 119, "user_id": 4633163, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u8IFd4BoMLc/AAAAAAAAAAI/AAAAAAAADcI/1Ii2Gxg43i0/photo.jpg?sz=128", "display_name": "Kim Andr&#233;", "link": "https://stackoverflow.com/users/4633163/kim-andr%c3%a9"}, "reply_to_user": {"reputation": 37983, "user_id": 1843331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aVX5R.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/1843331/tim"}, "edited": false, "score": 1, "creation_date": 1431552770, "post_id": 30224933, "comment_id": 48555015, "body": "@TimCastelijns He has at least helped me formulate questions better. I&#39;l keep these things in mind for next time I ask a question."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 4633163, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u8IFd4BoMLc/AAAAAAAAAAI/AAAAAAAADcI/1Ii2Gxg43i0/photo.jpg?sz=128", "display_name": "Kim Andr&#233;", "link": "https://stackoverflow.com/users/4633163/kim-andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1431553114, "post_id": 30225485, "comment_id": 48555181, "body": "Thank&#39;s so much, I&#39;m sorry for not being able to up vote you."}], "tags": [], "owner": {"reputation": 19107, "user_id": 216356, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dc105cdd75395154274f9da3d7612a9f?s=128&d=identicon&r=PG", "display_name": "Noctis Skytower", "link": "https://stackoverflow.com/users/216356/noctis-skytower"}, "is_accepted": true, "score": 3, "last_activity_date": 1431552516, "creation_date": 1431552516, "answer_id": 30225485, "question_id": 30224933, "link": "https://stackoverflow.com/questions/30224933/send-sync-variable-text-over-lan-in-python-3/30225485#30225485", "title": "Send/sync variable/text over LAN in Python 3", "body": "<p>Here are several files that may help you with developing a messaging system for your LAN.</p>\n\n<hr>\n\n<p><strong>Simple_Server.py</strong></p>\n\n<pre><code>#! /usr/bin/env python3\nimport socket, select\n\ndef main():\n    a = [socket.socket(socket.AF_INET, socket.SOCK_STREAM)]     # socket array\n    a[0].bind(('', 8989))\n    a[0].listen(5)\n    while True:\n        for b in select.select(a, [], [])[0]:                   # ready socket\n            if b is a[0]:\n                a.append(b.accept()[0])\n            else:\n                try:\n                    c = b.recv(1 &lt;&lt; 12)                         # sent message\n                except socket.error:\n                    b.shutdown(socket.SHUT_RDWR)\n                    b.close()\n                    a.remove(b)\n                else:\n                    for d in (d for d in a[1:] if d is not b):  # message sink\n                        d.sendall(c)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<hr>\n\n<p><strong>MultichatClient.py</strong></p>\n\n<pre><code>#! /usr/bin/env python3\nfrom safetkinter import *\nfrom tkinter.constants import *\nimport socket\nimport sys\n\nclass MultichatClient(Frame):\n\n    after_handle = None\n\n    def __init__(self, master, remote_host):\n        super().__init__(master)\n        self.message_area = ScrolledText(self, width=81, height=21,\n                                         wrap=WORD, state=DISABLED)\n        self.message_area.grid(sticky=NSEW, columnspan=2)\n        self.send_area = Entry(self)\n        self.send_area.bind('&lt;Return&gt;', self.keyPressed)\n        self.send_area.grid(sticky=EW)\n        b = Button(self, text='Send', command=self.mouseClicked)\n        b.grid(row=1, column=1)\n        self.send_area.focus_set()\n        try:\n            self.remote = socket.create_connection((remote_host, 8989))\n        except socket.gaierror:\n            print('Could not find host {}.'.format(remote_host))\n        except socket.error:\n            print('Could not connect to host {}.'.format(remote_host))\n        else:\n            self.remote.setblocking(False)\n            self.after_handle = self.after_idle(self.dataready)\n        self.grid_rowconfigure(0, weight=1)\n        self.grid_columnconfigure(0, weight=1)\n\n    @classmethod\n    def main(cls, args):\n        root = Tk()\n        root.title('MultichatClient version 1.0')\n        m = cls(root, args[0])\n        m.grid(sticky=NSEW)\n        root.grid_rowconfigure(0, weight=1)\n        root.grid_columnconfigure(0, weight=1)\n        root.mainloop()\n        return 1\n\n    def dataready(self):\n        try:\n            s = self.remote.recv(1 &lt;&lt; 12).decode()\n        except socket.error:\n            pass\n        else:\n            self.message_area['state'] = NORMAL\n            self.message_area.insert(END, s)\n            self.message_area['state'] = DISABLED\n            self.message_area.see(END)\n        self.after_handle = self.after(100, self.dataready)\n\n    def destroy(self):\n        if self.after_handle:\n            self.after_cancel(self.after_handle)\n        super().destroy()\n\n    def mouseClicked(self, e=None):\n        self.remote.sendall(self.send_area.get().encode() + b'\\r\\n')\n        self.send_area.delete(0, END)\n\n    keyPressed = mouseClicked\n\nif __name__ == '__main__':\n    sys.exit(MultichatClient.main(sys.argv[1:]))\n</code></pre>\n\n<hr>\n\n<p><strong>Simple_Client.pyw</strong></p>\n\n<pre><code>#! /usr/bin/env python3\n\n\"\"\"Provide a GUI for easy interactions with Multichat servers.\n\nThis program is an example of a first attempt at implementing a client\nfor interacting with a Multichat server through purely graphical means.\"\"\"\n\n__author__ = 'Stephen \"Zero\" Chappell &lt;Noctis.Skytower@gmail.com&gt;'\n__date__ = '11 October 2012'\n__version__ = 1, 0, 0\n\n################################################################################\n\nfrom tkinter.messagebox import *\nfrom tkinter.constants import *\nfrom safetkinter import *\nimport logging\nimport traceback\nimport _thread\nimport socket\nimport os\nimport traceback\nimport sys\nimport threadbox\n\n################################################################################\n\nclass SimpleClient(Frame):\n\n    \"SimpleClient(master, **kw) -&gt; SimpleClient instance\"\n\n    @classmethod\n    def main(cls):\n        \"Create a GUI root and demonstrate the SimpleClient widget.\"\n        root = Tk()\n        root.title('Chat Client')\n        root.minsize(675, 450)\n        root.grid_rowconfigure(0, weight=1)\n        root.grid_columnconfigure(0, weight=1)\n        root.bind_all('&lt;Control-Key-a&gt;', cls.handle_control_a)\n        frame = cls(root)\n        frame.grid(sticky=NSEW)\n        root.mainloop()\n\n    @staticmethod\n    def handle_control_a(event):\n        \"Process Ctrl-A commands by widget type.\"\n        widget = event.widget\n        if isinstance(widget, Text):\n            widget.tag_add(SEL, 1.0, END + '-1c')\n            return 'break'\n        if isinstance(widget, Entry):\n            widget.selection_range(0, END)\n            return 'break'\n\n    def __init__(self, master, **kw):\n        \"Initialize the SimpleClient instance with the widgets it contains.\"\n        super().__init__(master, **kw)\n        self.grid_rowconfigure(0, weight=1)\n        self.grid_columnconfigure(0, weight=1)\n        # Build Widgets\n        self.output_area = ScrolledText(self, width=25, height=4, wrap=WORD)\n        self.input_area = Entry(self)\n        self.corner = Sizegrip(self)\n        # Place Widgets\n        self.output_area.grid(row=0, column=0, columnspan=2, sticky=NSEW)\n        self.input_area.grid(row=1, column=0, sticky=EW)\n        self.corner.grid(row=1, column=1, sticky=SE)\n        # Setup Widgets\n        self.output_area['state'] = DISABLED\n        self.input_area.bind('&lt;Return&gt;', self.send)\n        self.after_idle(self.connect)\n\n    def connect(self):\n        \"Try connecting to a server to begin chatting.\"\n        self.connection = Connector(self, 'Chat Client').connection\n        if self.connection is None:\n            self._root().destroy()\n        else:\n            self.connection.setblocking(False)\n            self.after_idle(self.update)\n\n    def send(self, event):\n        \"Send a message across the connection from the given widget.\"\n        self.connection.sendall(event.widget.get().encode() + b'\\r\\n')\n        event.widget.delete(0, END)\n\n    def update(self):\n        \"Update the output area with any incoming messages.\"\n        self.output_area['state'] = NORMAL\n        try:\n            self.output_area.insert(END, self.connection.recv(1 &lt;&lt; 12).decode())\n        except socket.error:\n            pass\n        else:\n            self.output_area.see(END)\n        finally:\n            self.output_area['state'] = DISABLED\n        self.after(100, self.update)\n\n################################################################################\n\ndef start_thread(function, *args, **kwargs):\n    \"Start a new thread of execution while logging any errors.\"\n    _thread.start_new_thread(log_errors, (function, args, kwargs))\n\ndef log_errors(function, args=(), kwargs={}):\n    \"Execute a function with its arguments and log any exceptions.\"\n    try:\n        function(*args, **kwargs)\n    except SystemExit:\n        pass\n    except:\n        basename = os.path.basename(sys.argv[0])\n        filename = os.path.splitext(basename)[0] + '.log'\n        logging.basicConfig(filename=filename)\n        logging.error(traceback.format_exc())\n\n################################################################################\n\nclass Dialog(Toplevel): # Copies tkinter.simpledialog.Dialog\n\n    \"Dialog(parent, title=None) -&gt; Dialog instance\"\n\n    def __init__(self, parent, title=None):\n        \"Initialize a Dialog window that takes focus away from the parent.\"\n        super().__init__(parent)\n        self.withdraw()\n        if parent.winfo_viewable():\n            self.transient(parent)\n        if title:\n            self.title(title)\n        self.parent = parent\n        self.result = None\n        body = Frame(self)\n        self.initial_focus = self.body(body)\n        body.grid(sticky=NSEW, padx=5, pady=5)\n        self.buttonbox()\n        if not self.initial_focus:\n            self.initial_focus = self\n        self.protocol('WM_DELETE_WINDOW', self.cancel)\n        if self.parent is not None:\n            self.geometry('+{}+{}'.format(parent.winfo_rootx() + 50,\n                                          parent.winfo_rooty() + 50))\n        self.deiconify()\n        self.initial_focus.focus_set()\n        try:\n            self.wait_visibility()\n        except tkinter.TclError:\n            pass\n        else:\n            self.grab_set()\n            self.wait_window(self)\n\n    def destroy(self):\n        \"Destruct the Dialog window.\"\n        self.initial_focus = None\n        super().destroy()\n\n    def body(self, master):\n        \"Create the body of this Dialog window.\"\n        pass\n\n    def buttonbox(self):\n        \"Create the standard buttons and Dialog bindings.\"\n        box = Frame(self)\n        w = Button(box, text='OK', width=10, command=self.ok, default=ACTIVE)\n        w.grid(row=0, column=0, padx=5, pady=5)\n        w = Button(box, text='Cancel', width=10, command=self.cancel)\n        w.grid(row=0, column=1, padx=5, pady=5)\n        self.bind('&lt;Return&gt;', self.ok)\n        self.bind('&lt;Escape&gt;', self.cancel)\n        box.grid()\n\n    def ok(self, event=None):\n        \"Validate and apply the changes made by this Dialog.\"\n        if not self.validate():\n            self.initial_focus.focus_set()\n            return\n        self.withdraw()\n        self.update_idletasks()\n        try:\n            self.apply()\n        finally:\n            self.cancel()\n\n    def cancel(self, event=None):\n        \"Close the Dialong window and return to its parent.\"\n        if self.parent is not None:\n            self.parent.focus_set()\n        self.destroy()\n\n    def validate(self):\n        \"Verify that the Dialog is in a valid state.\"\n        return True\n\n    def apply(self):\n        \"Make any changes the Dialog wishes to accomplish.\"\n        pass\n\n################################################################################\n\nclass Connector(Dialog):\n\n    \"Connector(parent, title=None) -&gt; Connector instance\"\n\n    def body(self, master):\n        \"Customize the Dialog window with some custom widgets.\"\n        self.connection = None\n        self.resizable(False, False)\n        # Build Widgets\n        self.prompt = Label(master, text='Enter server IP address:')\n        self.address = Entry(master)\n        # Place Widgets\n        self.prompt.grid(sticky=W, padx=30, pady=2)\n        self.address.grid(sticky=W, padx=30)\n\n    def buttonbox(self):\n        \"Redefine the buttons at the bottom of the window.\"\n        w = Button(self, text='Connect', width=10, command=self.ok,\n                   default=ACTIVE)\n        w.grid(sticky=E, padx=5, pady=5)\n        self.bind('&lt;Return&gt;', self.ok)\n        self.bind('&lt;Escape&gt;', self.cancel)\n\n    def validate(self):\n        \"Ask a Consumator to make a connection with the given address.\"\n        c = Consumator(self, 'Chat Client', (self.address.get(), 8989))\n        if c.connection is None:\n            Message(self, icon=WARNING, type=OK, title='Warning',\n                    message='Could not connect to address!').show()\n            return False\n        self.connection = c.connection\n        return True\n\n################################################################################\n\nclass Consumator(Dialog):\n\n    \"Consumator(parent, title, address) -&gt; Consumator instance\"\n\n    def __init__(self, parent, title, address):\n        \"Initialize the Consumator with the server's address.\"\n        self.server_address = address\n        super().__init__(parent, title)\n\n    def body(self, master):\n        \"Create the widgets for this Dialog and start the connection process.\"\n        self.connection = None\n        self.resizable(False, False)\n        # Build Widgets\n        self.message = Label(master, text='Trying to connect to address ...')\n        self.progress = Progressbar(master, orient=HORIZONTAL)\n        # Place Widgets\n        self.message.grid(sticky=W, padx=10, pady=2)\n        self.progress.grid(sticky=EW, padx=10, pady=2)\n        # Setup Widgets\n        self.progress.configure(mode='indeterminate', maximum=30)\n        self.progress.start()\n        result = []\n        start_thread(self.connect, result)\n        self.after_idle(self.poll, result)\n\n    def buttonbox(self):\n        \"Cancel the creation of the buttons at the bottom of this Dialog.\"\n        pass\n\n    @threadbox.MetaBox.thread\n    def connect(self, result):\n        \"Try connecting to the server address that was given.\"\n        try:\n            result.append(socket.create_connection(self.server_address, 10))\n        except socket.timeout:\n            result.append(None)\n\n    def poll(self, result):\n        \"Find out if the any connection information is available yet.\"\n        if result:\n            self.connection = result[0]\n            self.cancel()\n        else:\n            self.after(100, self.poll, result)\n\n################################################################################\n\nif __name__ == '__main__':\n    log_errors(SimpleClient.main)\n</code></pre>\n\n<hr>\n\n<p><strong>affinity.py</strong></p>\n\n<pre><code>\"\"\"Allow a simple way to ensure execution is confined to one thread.\n\nThis module defines the Affinity data type that runs code on a single thread.\nAn instance of the class will execute functions only on the thread that made\nthe object in the first place. The class is useful in a GUI's main loop.\"\"\"\n\n__author__ = 'Stephen \"Zero\" Chappell &lt;Noctis.Skytower@gmail.com&gt;'\n__date__ = '4 June 2012'\n__version__ = 1, 0, 0\n\n################################################################################\n\nimport sys\nimport _thread\nimport queue\n\n################################################################################\n\ndef slots(names=''):\n    \"Sets the __slots__ variable in the calling context with private names.\"\n    sys._getframe(1).f_locals['__slots__'] = \\\n        tuple('__' + name for name in names.replace(',', ' ').split())\n\n################################################################################\n\nclass Affinity:\n\n    \"Affinity() -&gt; Affinity instance\"\n\n    slots('thread, action')\n\n    def __init__(self):\n        \"Initializes instance with thread identity and job queue.\"\n        self.__thread = _thread.get_ident()\n        self.__action = queue.Queue()\n\n    def __call__(self, func, *args, **kwargs):\n        \"Executes function on creating thread and returns result.\"\n        if _thread.get_ident() == self.__thread:\n            while not self.__action.empty():\n                self.__action.get_nowait()()\n            return func(*args, **kwargs)\n        delegate = _Delegate(func, args, kwargs)\n        self.__action.put_nowait(delegate)\n        return delegate.value\n\n################################################################################\n\nclass _Delegate:\n\n    \"_Delegate(func, args, kwargs) -&gt; _Delegate instance\"\n\n    slots('func, args, kwargs, mutex, value, error')\n\n    def __init__(self, func, args, kwargs):\n        \"Initializes instance from arguments and prepares to run.\"\n        self.__func = func\n        self.__args = args\n        self.__kwargs = kwargs\n        self.__mutex = _thread.allocate_lock()\n        self.__mutex.acquire()\n\n    def __call__(self):\n        \"Executes code with arguments and allows value retrieval.\"\n        try:\n            self.__value = self.__func(*self.__args, **self.__kwargs)\n            self.__error = False\n        except:\n            self.__value = sys.exc_info()[1]\n            self.__error = True\n        self.__mutex.release()\n\n    @property\n    def value(self):\n        \"Waits for value availability and raises or returns data.\"\n        self.__mutex.acquire()\n        if self.__error:\n            raise self.__value\n        return self.__value\n</code></pre>\n\n<hr>\n\n<p><strong>threadbox.py</strong></p>\n\n<pre><code>\"\"\"Provide a way to run instance methods on a single thread.\n\nThis module allows hierarchical classes to be cloned so that their instances\nrun on one thread. Method calls are automatically routed through a special\nexecution engine. This is helpful when building thread-safe GUI code.\"\"\"\n\n__author__ = 'Stephen \"Zero\" Chappell &lt;Noctis.Skytower@gmail.com&gt;'\n__date__ = '9 October 2012'\n__version__ = 1, 0, 1\n\n################################################################################\n\nimport functools\nimport affinity\n\n################################################################################\n\nclass _object: __slots__ = '_MetaBox__exec', '__dict__'\n\n################################################################################\n\nclass MetaBox(type):\n\n    \"MetaBox(name, bases, classdict, old=None) -&gt; MetaBox instance\"\n\n    __REGISTRY = {object: _object}\n    __SENTINEL = object()\n\n    @classmethod\n    def clone(cls, old, update=()):\n        \"Creates a class preferring thread affinity after update.\"\n        classdict = dict(old.__dict__)\n        classdict.update(update)\n        return cls(old.__name__, old.__bases__, classdict, old)\n\n    @classmethod\n    def thread(cls, func):\n        \"Marks a function to be completely threaded when running.\"\n        func.__thread = cls.__SENTINEL\n        return func\n\n    def __new__(cls, name, bases, classdict, old=None):\n        \"Allocates space for a new class after altering its data.\"\n        assert '__new__' not in classdict, '__new__ must not be defined!'\n        assert '__slots__' not in classdict, '__slots__ must not be defined!'\n        assert '__module__' in classdict, '__module__ must be defined!'\n        valid = []\n        for base in bases:\n            if base in cls.__REGISTRY:\n                valid.append(cls.__REGISTRY[base])\n            elif base in cls.__REGISTRY.values():\n                valid.append(base)\n            else:\n                valid.append(cls.clone(base))\n        for key, value in classdict.items():\n            if callable(value) and (not hasattr(value, '_MetaBox__thread') or\n                                    value.__thread is not cls.__SENTINEL):\n                classdict[key] = cls.__wrap(value)\n        classdict.update({'__new__': cls.__new, '__slots__': (), '__module__':\n                          '{}.{}'.format(__name__, classdict['__module__'])})\n        cls.__REGISTRY[object() if old is None else old] = new = \\\n            super().__new__(cls, name, tuple(valid), classdict)\n        return new\n\n    def __init__(self, name, bases, classdict, old=None):\n        \"Initializes class instance while ignoring the old class.\"\n        return super().__init__(name, bases, classdict)\n\n    @staticmethod\n    def __wrap(func):\n        \"Wraps a method so execution runs via an affinity engine.\"\n        @functools.wraps(func)\n        def box(self, *args, **kwargs):\n            return self.__exec(func, self, *args, **kwargs)\n        return box\n\n    @classmethod\n    def __new(meta, cls, *args, **kwargs):\n        \"Allocates space for instance and finds __exec attribute.\"\n        self = object.__new__(cls)\n        if 'master' in kwargs:\n            self.__exec = kwargs['master'].__exec\n        else:\n            valid = tuple(meta.__REGISTRY.values())\n            for value in args:\n                if isinstance(value, valid):\n                    self.__exec = value.__exec\n                    break\n            else:\n                self.__exec = affinity.Affinity()\n        return self\n</code></pre>\n\n<hr>\n\n<p><strong>safetkinter.py</strong></p>\n\n<pre><code>\"\"\"Register tkinter classes with threadbox for immediate usage.\n\nThis module clones several classes from the tkinter library for use with\nthreads. Instances from these new classes should run on whatever thread\nthe root was created on. Child classes inherit the parent's safety.\"\"\"\n\n__author__ = 'Stephen \"Zero\" Chappell &lt;Noctis.Skytower@gmail.com&gt;'\n__date__ = '4 June 2012'\n__version__ = 1, 0, 0\n\n################################################################################\n\nimport time\nimport tkinter.filedialog\nimport tkinter.font\nimport tkinter.messagebox\nimport tkinter.scrolledtext\nimport tkinter.ttk\nimport threadbox\n\n################################################################################\n\ntkinter.NoDefaultRoot()\n\n@threadbox.MetaBox.thread\ndef mainloop(self):\n    \"Creates a synthetic main loop so that threads can still run.\"\n    while True:\n        try:\n            self.update()\n        except tkinter.TclError:\n            break\n        else:\n            time.sleep(tkinter._tkinter.getbusywaitinterval() / 1000)\n\nthreadbox.MetaBox.clone(tkinter.Misc, {'mainloop': mainloop})\n\n################################################################################\n\nOldButton = threadbox.MetaBox.clone(tkinter.Button)\nCanvas = threadbox.MetaBox.clone(tkinter.Canvas)\nOldFrame = threadbox.MetaBox.clone(tkinter.Frame)\nMenu = threadbox.MetaBox.clone(tkinter.Menu)\nPhotoImage = threadbox.MetaBox.clone(tkinter.PhotoImage)\nSpinbox = threadbox.MetaBox.clone(tkinter.Spinbox)\nStringVar = threadbox.MetaBox.clone(tkinter.StringVar)\nText = threadbox.MetaBox.clone(tkinter.Text)\nTk = threadbox.MetaBox.clone(tkinter.Tk)\nToplevel = threadbox.MetaBox.clone(tkinter.Toplevel)\n\n################################################################################\n\nButton = threadbox.MetaBox.clone(tkinter.ttk.Button)\nCheckbutton = threadbox.MetaBox.clone(tkinter.ttk.Checkbutton)\nEntry = threadbox.MetaBox.clone(tkinter.ttk.Entry)\nFrame = threadbox.MetaBox.clone(tkinter.ttk.Frame)\nLabel = threadbox.MetaBox.clone(tkinter.ttk.Label)\nLabelframe = threadbox.MetaBox.clone(tkinter.ttk.Labelframe)\nProgressbar = threadbox.MetaBox.clone(tkinter.ttk.Progressbar)\nRadiobutton = threadbox.MetaBox.clone(tkinter.ttk.Radiobutton)\nScale = threadbox.MetaBox.clone(tkinter.ttk.Scale)\nScrollbar = threadbox.MetaBox.clone(tkinter.ttk.Scrollbar)\nSizegrip = threadbox.MetaBox.clone(tkinter.ttk.Sizegrip)\nTreeview = threadbox.MetaBox.clone(tkinter.ttk.Treeview)\n\n################################################################################\n\nDirectory = threadbox.MetaBox.clone(tkinter.filedialog.Directory)\nFont = threadbox.MetaBox.clone(tkinter.font.Font)\nMessage = threadbox.MetaBox.clone(tkinter.messagebox.Message)\nScrolledText = threadbox.MetaBox.clone(tkinter.scrolledtext.ScrolledText)\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 4633163, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u8IFd4BoMLc/AAAAAAAAAAI/AAAAAAAADcI/1Ii2Gxg43i0/photo.jpg?sz=128", "display_name": "Kim Andr&#233;", "link": "https://stackoverflow.com/users/4633163/kim-andr%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1115, "favorite_count": 0, "closed_date": 1431558579, "accepted_answer_id": 30225485, "answer_count": 1, "score": -2, "last_activity_date": 1431552516, "creation_date": 1431550182, "last_edit_date": 1431552319, "question_id": 30224933, "link": "https://stackoverflow.com/questions/30224933/send-sync-variable-text-over-lan-in-python-3", "closed_reason": "Needs more focus", "title": "Send/sync variable/text over LAN in Python 3", "body": "<p>OK, I wanted to make an python application that allows me to send a message over LAN.</p>\n\n<p>Here's the code that \"works\" \"locally\" (imagine that I'm forming 2 of my fingers to make an \" on those 2 words)</p>\n\n<pre><code>username = input(\"username: \")\n\nrun = 1\n\nwhile run == 1:\n    message = input(username + \": \")\n    if message == \"exit\":\n        print(username + \" left\")\n        run = 0\n    else:\n        print(username + \": \" + message)\n</code></pre>\n\n<p>My question how do I send the variable \"message\" over LAN?</p>\n\n<p>I wan't it to send the variable <strong>message</strong> over LAN to another PC and print it on it and the other way around.</p>\n"}, {"tags": ["python", "facebook", "facebook-graph-api", "oauth-2.0", "facebook-oauth"], "comments": [{"owner": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 1, "creation_date": 1431557826, "post_id": 30224816, "comment_id": 48556974, "body": "60 days is all you can get for user access tokens. And you need user interaction to get a new one. There is no way around this. <i>\u201cThe idea is to have the script run automatically and not have to re-code it for each run\u201d</i> \u2013 if your script runs daily, then this is hardly \u201cfor each run\u201d."}, {"owner": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1431557842, "post_id": 30224816, "comment_id": 48556982, "body": "If you like, you can add an additional step that checks the expiry time of the token from your script \u2013 and if it is less than, say X days, send an email to the user that they have to go login and get a new token. If you automate this clever enough, getting a new token, extending it and storing it somewhere could be done with a couple of clicks."}, {"owner": {"reputation": 21, "user_id": 4824814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/068e06a0cdf4ab48e5c6a1958eac2712?s=128&d=identicon&r=PG&f=1", "display_name": "Percy Greyhound", "link": "https://stackoverflow.com/users/4824814/percy-greyhound"}, "reply_to_user": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1431610409, "post_id": 30224816, "comment_id": 48578871, "body": "Thanks I appreciate the feedback. I will go the 60-day token and email reminder route. :)"}], "owner": {"reputation": 21, "user_id": 4824814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/068e06a0cdf4ab48e5c6a1958eac2712?s=128&d=identicon&r=PG&f=1", "display_name": "Percy Greyhound", "link": "https://stackoverflow.com/users/4824814/percy-greyhound"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1183, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431549706, "creation_date": 1431549706, "question_id": 30224816, "link": "https://stackoverflow.com/questions/30224816/facebook-access-token-for-automatic-script-get-token-every-time-script-runs", "title": "Facebook Access Token for Automatic Script (get token every time script runs)", "body": "<p>I'm trying to set up a script that will run every day at 7am and pull our organization's ad data from Facebook. I got the actual Python script totally working: \n(I used my actual app id, app secret, account, and user access token instead of X's of course, and wound up storing it in a csv but didn't copy that part of the code because it isn't relevant)</p>\n\n<pre><code>from facebookads.objects import AdAccount\nfrom facebookads.api import FacebookAdsApi\nimport pandas as pd\n\nmy_app_id = 'XXX'\nmy_app_secret = 'XXX'\nmy_access_token = 'XXX'\nFacebookAdsApi.init(my_app_id, my_app_secret, my_access_token)\n\naccount = AdAccount('act_XXX')\nparams = {\n    'data_columns':['adgroup_id','date_start','date_stop','campaign_name','reach', 'frequency', 'impressions', 'clicks', 'unique_clicks', 'ctr', 'unique_ctr', 'spend', 'cpm','cpp', 'cpc', 'actions'],\n'date_preset': 'last_90_days',\n    }\n\nstats = account.get_report_stats(params=params);\nprint (stats)\n</code></pre>\n\n<p>The problem is that this token expires every 60 minutes. I need a way that I won't have to modify this program every day to get authenticated in Facebook. I realize that the above token is the USER token. I've tried the App Token (which is \"app_id|app_secret\") and I've even gotten Python to give it to me through a request:</p>\n\n<pre><code>import requests\nr = requests.get(\"https://graph.facebook.com/oauth/access_token?    client_id={{my_id}}&amp;client_secret={{my_secret}}&amp;grant_type=client_credentials\")\n#print r.headers\ntoken = r.content\nprint (token)\n</code></pre>\n\n<p>But it won't take this as the actual token. It only gives me the ad data when I manually put in the USER token. If I'm understanding the situation correctly, I need either </p>\n\n<p>1) A permanent token (Don't think this exists)</p>\n\n<p>or 2) a way to request the (user?) token from the Facebook API every time the Python script runs. </p>\n\n<p>This is Facebook's page on access tokens (where I got the code from) <a href=\"https://developers.facebook.com/docs/facebook-login/access-tokens\" rel=\"nofollow\">https://developers.facebook.com/docs/facebook-login/access-tokens</a> I know there is the extended 60 day token but that won't work because then we still have to manually go in and change it every 60 days. The idea is to have the script run automatically and not have to re-code it for each run.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "csv"], "answers": [{"tags": [], "owner": {"reputation": 21720, "user_id": 1520841, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PXzxR.jpg?s=128&g=1", "display_name": "Joel Hinz", "link": "https://stackoverflow.com/users/1520841/joel-hinz"}, "is_accepted": true, "score": 3, "last_activity_date": 1431549730, "creation_date": 1431549730, "answer_id": 30224822, "question_id": 30224750, "link": "https://stackoverflow.com/questions/30224750/importing-csv-file-into-list-python/30224822#30224822", "title": "Importing CSV file into list python", "body": "<p>Python is reading the numbers as strings, so when you do the <code>*3</code> it thinks \"Ah! Matt wants me to put the the string three times in a row!\"</p>\n\n<p>If you just convert it to a float first, it'll be fine:</p>\n\n<pre><code>for i in range(0,len(columns[3])):\n    listTest.append(float(columns[3][i])*3)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 442, "user_id": 4040020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5M77D.jpg?s=128&g=1", "display_name": "M.A.K. Simanto", "link": "https://stackoverflow.com/users/4040020/m-a-k-simanto"}, "is_accepted": false, "score": 1, "last_activity_date": 1431551542, "last_edit_date": 1431551542, "creation_date": 1431549887, "answer_id": 30224863, "question_id": 30224750, "link": "https://stackoverflow.com/questions/30224750/importing-csv-file-into-list-python/30224863#30224863", "title": "Importing CSV file into list python", "body": "<p>You need to parse the <code>columns[3][i]</code> into float like</p>\n\n<pre><code>listTest.append(float(columns[3][i])*3)\n</code></pre>\n\n<p>Because</p>\n\n<pre><code>'any_string'*3\n&gt;&gt;any_stringany_stringany_string\n 100*3\n&gt;&gt;300\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "is_accepted": false, "score": -1, "last_activity_date": 1431550047, "creation_date": 1431550047, "answer_id": 30224896, "question_id": 30224750, "link": "https://stackoverflow.com/questions/30224750/importing-csv-file-into-list-python/30224896#30224896", "title": "Importing CSV file into list python", "body": "<pre><code>import csv\ndef readFile(infilepath):\n    answer = []\n    with open(infilepath) as infile:\n        for *_head, a, _b in csv.reader(infile, delimiter';'):\n            answer.append(float(a) * 3)\n    return answer\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 4897383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ff785934ff2bba785064adee7530f67?s=128&d=identicon&r=PG&f=1", "display_name": "MattGA", "link": "https://stackoverflow.com/users/4897383/mattga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 30224822, "answer_count": 3, "score": 3, "last_activity_date": 1431551542, "creation_date": 1431549466, "last_edit_date": 1431550184, "question_id": 30224750, "link": "https://stackoverflow.com/questions/30224750/importing-csv-file-into-list-python", "title": "Importing CSV file into list python", "body": "<p>I've a little problem here. I need to read a txt file and store it into a list, I'm already doing that... but the problem is that I need to manipulate some columns like multiplying then by 30 and so forth so on. (I'm still learning python) (Its python 3.4)</p>\n\n<p>The test.txt file:</p>\n\n<pre><code>Abacate;Para;PA;-1.1166667;-49.65\nAbacate;Amazonas;AM;-3.9463889;-62.9038889\n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>def readFile():\n  with open('test.txt') as f:\n    reader = csv.reader(f,delimiter=\";\")\n    #reader.next()\n    for row in reader:\n        for (i,v) in enumerate(row):\n            columns[i].append(v)\n</code></pre>\n\n<p>But, when I try to use </p>\n\n<pre><code>    for i in range(0,len(columns[3])):\n        listTest.append(columns[3][i]*3)\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>['-1.1166667-1.1166667-1.1166667']\n['-1.1166667-1.1166667-1.1166667', '-3.9463889-3.9463889-3.9463889']\n</code></pre>\n\n<p>Expected:</p>\n\n<pre><code>['-3.3500001','-11.8391667']\n</code></pre>\n\n<p>Is there a better way to do this?</p>\n"}, {"tags": ["python", "widget", "html5-audio", "ipython-notebook", "interactive"], "answers": [{"tags": [], "owner": {"reputation": 36938, "user_id": 31676, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1e5e14a22b27a69b3d9fd5c7b05126d8?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/31676/paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1431561984, "creation_date": 1431561984, "answer_id": 30227211, "question_id": 30224651, "link": "https://stackoverflow.com/questions/30224651/html5-audio-element-vanishes-in-ipythonnb-container-widget/30227211#30227211", "title": "HTML5 audio element vanishes in IPythonNB container widget", "body": "<p>This seems to be Firefox's behavior for malformed audio files.  Unfortunately both my work sample and this simple test sample were both malformed.  Firefox will hide the player if it can't play the file, Chromium will grey out the player after a short time.</p>\n"}], "owner": {"reputation": 36938, "user_id": 31676, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1e5e14a22b27a69b3d9fd5c7b05126d8?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/31676/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1431561984, "creation_date": 1431549090, "last_edit_date": 1431553440, "question_id": 30224651, "link": "https://stackoverflow.com/questions/30224651/html5-audio-element-vanishes-in-ipythonnb-container-widget", "title": "HTML5 audio element vanishes in IPythonNB container widget", "body": "<p>This code:</p>\n\n<pre><code>from IPython.display import display\nfrom IPython.html import widgets\nsnd = \"\"\"\n&lt;audio controls=\"controls\" style=\"width:600px height:100px\"&gt;\n&lt;source controls src=\"data:audio/wav;base64,UklGRiYAAABXQVZFZm10IBAAAAABAAEAYCIAAAATAQAIAEAAZGF0YQgAAAAAAA==\" type=\"audio/wav\" /&gt;\nYour browser does not support the audio element.\n&lt;/audio&gt;\"\"\"\nsnd_widget = widgets.HTML(snd)\ncontainer = widgets.Box(children=[snd_widget])\ndisplay(container)\n</code></pre>\n\n<p>...produces my audio player within the container widget like I expect, but then promptly vanishes.  It actually has a nice fade-away effect.  However, I do not wish it to disappear; I want to be able to interact with it.  It is briefly visible again if I close the interactive element, so I have to believe there is some simple display bug I hope to work around.</p>\n\n<p><code>snd_widget.disabled</code> is <code>False</code> and <code>snd_widget.visible</code> is <code>True</code></p>\n\n<p><code>display(snd_widget)</code> (without using ContainerWidget/Box) has the same effect.</p>\n\n<p>Problem seems browser-specific:  Problem exists on Firefox, but display seems fine on Chromium.</p>\n"}, {"tags": ["python", "csv", "dictionary", "arcgis"], "comments": [{"owner": {"reputation": 3023, "user_id": 2356121, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6f7f1f79998113b0beefce2d5036634f?s=128&d=identicon&r=PG", "display_name": "Karl", "link": "https://stackoverflow.com/users/2356121/karl"}, "edited": false, "score": 0, "creation_date": 1431549254, "post_id": 30224635, "comment_id": 48553207, "body": "The <code>csv</code> module would be the best place to start... <a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/csv.html</a>"}, {"owner": {"reputation": 672, "user_id": 2848281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iyg0K.jpg?s=128&g=1", "display_name": "Pete Cacioppi", "link": "https://stackoverflow.com/users/2848281/pete-cacioppi"}, "edited": false, "score": 0, "creation_date": 1431550756, "post_id": 30224635, "comment_id": 48553944, "body": "Have you looked into the <a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow noreferrer\">csv</a> package yet?"}, {"owner": {"reputation": 25, "user_id": 4843599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2f918ae561729325bd42bd784715e377?s=128&d=identicon&r=PG&f=1", "display_name": "ElizabethSchlueter", "link": "https://stackoverflow.com/users/4843599/elizabethschlueter"}, "edited": false, "score": 0, "creation_date": 1431551957, "post_id": 30224635, "comment_id": 48554590, "body": "I have tried to figure out the csv.DictWriter but I cannot seem to get it to print anything. I keep getting different errors."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4843599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2f918ae561729325bd42bd784715e377?s=128&d=identicon&r=PG&f=1", "display_name": "ElizabethSchlueter", "link": "https://stackoverflow.com/users/4843599/elizabethschlueter"}, "edited": false, "score": 0, "creation_date": 1431552009, "post_id": 30224794, "comment_id": 48554612, "body": "I have ready the docs but I am unsure how to make it work for this? how do you use this and make it look at a dictionary that is already formed?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "reply_to_user": {"reputation": 25, "user_id": 4843599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2f918ae561729325bd42bd784715e377?s=128&d=identicon&r=PG&f=1", "display_name": "ElizabethSchlueter", "link": "https://stackoverflow.com/users/4843599/elizabethschlueter"}, "edited": false, "score": 0, "creation_date": 1431554063, "post_id": 30224794, "comment_id": 48555553, "body": "Ah, I see. You need them separate."}, {"owner": {"reputation": 25, "user_id": 4843599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2f918ae561729325bd42bd784715e377?s=128&d=identicon&r=PG&f=1", "display_name": "ElizabethSchlueter", "link": "https://stackoverflow.com/users/4843599/elizabethschlueter"}, "edited": false, "score": 0, "creation_date": 1431619856, "post_id": 30224794, "comment_id": 48585413, "body": "Is there a way to do this? This would work normally but I don&#39;t know how to make it work for this."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "reply_to_user": {"reputation": 25, "user_id": 4843599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2f918ae561729325bd42bd784715e377?s=128&d=identicon&r=PG&f=1", "display_name": "ElizabethSchlueter", "link": "https://stackoverflow.com/users/4843599/elizabethschlueter"}, "edited": false, "score": 0, "creation_date": 1431620383, "post_id": 30224794, "comment_id": 48585691, "body": "You need to convert you dictionary of lists into a list of dictionaries. I don&#39;t have time to answer now, maybe in a few hours."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "reply_to_user": {"reputation": 25, "user_id": 4843599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2f918ae561729325bd42bd784715e377?s=128&d=identicon&r=PG&f=1", "display_name": "ElizabethSchlueter", "link": "https://stackoverflow.com/users/4843599/elizabethschlueter"}, "edited": false, "score": 0, "creation_date": 1431620492, "post_id": 30224794, "comment_id": 48585749, "body": "See <a href=\"http://stackoverflow.com/questions/5558418/list-of-dicts-to-from-dict-of-lists\">this question</a> for how."}, {"owner": {"reputation": 25, "user_id": 4843599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2f918ae561729325bd42bd784715e377?s=128&d=identicon&r=PG&f=1", "display_name": "ElizabethSchlueter", "link": "https://stackoverflow.com/users/4843599/elizabethschlueter"}, "edited": false, "score": 0, "creation_date": 1431629537, "post_id": 30224794, "comment_id": 48591078, "body": "I am still new to this, but what is the difference between a dictionary or lists and a list of dictionaries and how does it help?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "reply_to_user": {"reputation": 25, "user_id": 4843599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2f918ae561729325bd42bd784715e377?s=128&d=identicon&r=PG&f=1", "display_name": "ElizabethSchlueter", "link": "https://stackoverflow.com/users/4843599/elizabethschlueter"}, "edited": false, "score": 0, "creation_date": 1431629638, "post_id": 30224794, "comment_id": 48591152, "body": "The example above shows you have to write a dictionary for each line in the csv. So you need a list of dictionaries to loop over. At the moment you have a single dictionary with values which are lists (all of the same length). The linked question should show you how to get from one to the the other (and back again)."}, {"owner": {"reputation": 25, "user_id": 4843599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2f918ae561729325bd42bd784715e377?s=128&d=identicon&r=PG&f=1", "display_name": "ElizabethSchlueter", "link": "https://stackoverflow.com/users/4843599/elizabethschlueter"}, "edited": false, "score": 0, "creation_date": 1431707386, "post_id": 30224794, "comment_id": 48628877, "body": "Thank you again Peter Wood for helping me learn all of this :)"}, {"owner": {"reputation": 25, "user_id": 4843599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2f918ae561729325bd42bd784715e377?s=128&d=identicon&r=PG&f=1", "display_name": "ElizabethSchlueter", "link": "https://stackoverflow.com/users/4843599/elizabethschlueter"}, "edited": false, "score": 0, "creation_date": 1431712243, "post_id": 30224794, "comment_id": 48631602, "body": "I read the question that you sent me and found a way to create a list of dictionaries. Now can I just print like normal?"}], "tags": [], "owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "is_accepted": true, "score": 2, "last_activity_date": 1431549649, "creation_date": 1431549649, "answer_id": 30224794, "question_id": 30224635, "link": "https://stackoverflow.com/questions/30224635/how-do-i-write-a-csv-file-from-a-dictionary-with-multiple-values-per-key/30224794#30224794", "title": "How do I write a csv file from a dictionary with multiple values per key?", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/csv.html#csv.DictWriter\" rel=\"nofollow\"><code>csv.DictWriter</code></a>. From the docs:</p>\n\n<blockquote>\n<pre><code>import csv\n\nwith open('names.csv', 'w') as csvfile:\n    fieldnames = ['first_name', 'last_name']\n    writer = csv.DictWriter(csvfile, fieldnames=fieldnames)\n\n    writer.writeheader()\n    writer.writerow({'first_name': 'Baked', 'last_name': 'Beans'})\n    writer.writerow({'first_name': 'Lovely', 'last_name': 'Spam'})\n    writer.writerow({'first_name': 'Wonderful', 'last_name': 'Spam'})\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 25, "user_id": 4843599, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2f918ae561729325bd42bd784715e377?s=128&d=identicon&r=PG&f=1", "display_name": "ElizabethSchlueter", "link": "https://stackoverflow.com/users/4843599/elizabethschlueter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 785, "favorite_count": 0, "accepted_answer_id": 30224794, "answer_count": 1, "score": 1, "last_activity_date": 1431715675, "creation_date": 1431549026, "last_edit_date": 1431715675, "question_id": 30224635, "link": "https://stackoverflow.com/questions/30224635/how-do-i-write-a-csv-file-from-a-dictionary-with-multiple-values-per-key", "title": "How do I write a csv file from a dictionary with multiple values per key?", "body": "<p>I originally posted this question as part of another question. I need to write a csv file in which it gives me the name of the technician, the date they worked on a tract, and the number of tracts on that date. I already found a way to get the needed data into a dictionary with the key being the name of the technician and the value being the date and the count using a cursor to look through ArcMap to find the data, using a code like so:</p>\n\n<pre><code>desc = arcpy.Describe(inLayer)\nfields =  desc.fields\nfor field in fields:\n    for srow in cursor:\n        tech = srow.getValue(\"Technician\")\n        ModDate = srow.getValue(\"ModifiedDate\")\n        FormDate = ModDate.strftime(\"%m-%d-%Y\")\n        if tech == \"Elizabeth\":\n            EScontract = EScontract + 1\n            ESList = []            \n            ESList.append(FormDate)\n            EStech.update(ESList)\n            for date in EStech.iteritems():\n                if tech in Listedtech:\n                    Listedtech[tech].append(date)\n                else:\n                    Listedtech[tech] = [date]\n</code></pre>\n\n<p>where EStech is a Counter dictionary that was defined earlier and Listedtech is an empty dictionary defined earier as well. </p>\n\n<p>Listedtech when printed would appear to be like: </p>\n\n<pre><code>Listedtech = {u'Elizabeth': [('05-11-2015', 6), ('05-13-2015', 16), ('05-12-2015', 16)] , u'Michael': [('05-11-2015', 3)]}\n</code></pre>\n\n<p>How do I take my dictionary named Listedtech and turn it into a csv file?</p>\n\n<p><strong>Update</strong></p>\n\n<p>I have successfully made my dictionary into a list of dictionary called nl. When I print my list of dictionaries, I get something like this:</p>\n\n<pre><code>nl = [{u'Elizabeth': [('05-11-2015', 6), ('05-13-2015', 16), ('05-12-2015', 16)]} , {u'Michael': [('05-11-2015', 3)]}]\n</code></pre>\n\n<p>However, now I am having issues still getting it to a csv. When I did the DictWriter, it came out very weird were each technician had its own column but only one row with all of the associated values with it so the csv file looks something like this </p>\n\n<p>Elizabeth | Michael<br>\n('05-11-2015', 6), ('05-13-2015', 16), ('05-12-2015', 16) | ('05-11-2015', 3)</p>\n\n<p>instead of like how I want it in which each value is on a different row. The code I used is something like this:</p>\n\n<pre><code>with open(csvfilename, 'w') as f:\n    fieldnames = ['Elizabeth', 'Michael']\n    dict_writer = csv.DictWriter(f, fieldnames = fieldnames)\n    dict_writer.writeheader()\n    dict_writer.writerows(nl)\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 5496, "user_id": 2317751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lltcO.jpg?s=128&g=1", "display_name": "Liam Foley", "link": "https://stackoverflow.com/users/2317751/liam-foley"}, "is_accepted": false, "score": 0, "last_activity_date": 1431549717, "creation_date": 1431549717, "answer_id": 30224820, "question_id": 30224626, "link": "https://stackoverflow.com/questions/30224626/how-can-i-join-columns-in-pandas/30224820#30224820", "title": "How can I join columns in Pandas?", "body": "<pre><code>date_cols = ['YEAR','MONTH','DAY','HOUR','MIN']\ndf[date_cols] = df[date_cols].astype(str)\ndf['the_date'] = df[date_cols].apply(lambda x: '-'.join(x),axis=1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   IDENT  YEAR MONTH DAY HOUR MIN   XXXX  YYYY  GPS  SNR        the_date\n0      0  2015     5  13    5   0  20.45    16    0   44   2015-5-13-5-0\n1      0  2015     5  13    4   0  20.43    16    0   44   2015-5-13-4-0\n2      0  2015     5  13    3   0  20.42    16    0   44   2015-5-13-3-0\n3      0  2015     5  13    2   0  20.47    16    0   40   2015-5-13-2-0\n4      0  2015     5  13    1   0  20.50    16    0   44   2015-5-13-1-0\n5      0  2015     5  13    0   0  20.54    16    0   44   2015-5-13-0-0\n6      0  2015     5  12   23   0  20.56    16    0   40  2015-5-12-23-0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": false, "score": 0, "last_activity_date": 1431559219, "creation_date": 1431559219, "answer_id": 30226766, "question_id": 30224626, "link": "https://stackoverflow.com/questions/30224626/how-can-i-join-columns-in-pandas/30226766#30226766", "title": "How can I join columns in Pandas?", "body": "<pre><code>df.loc[:, 'DATE-TIME'] = df.apply(lambda x: \"{0}-{1}-{2}-{3}-{4}\"\n                                            .format(int(x.YEAR), \n                                                    int(x.MONTH), \n                                                    int(x.DAY), \n                                                    int(x.HOUR), \n                                                    int(x.MIN)), \n                                  axis=1)\n\n&gt;&gt;&gt; df\n   IDENT  YEAR  MONTH  DAY  HOUR  MIN   XXXX  YYYY  GPS  SNR       DATE-TIME\n0      0  2015      5   13     5    0  20.45    16    0   44   2015-5-13-5-0\n1      0  2015      5   13     4    0  20.43    16    0   44   2015-5-13-4-0\n2      0  2015      5   13     3    0  20.42    16    0   44   2015-5-13-3-0\n3      0  2015      5   13     2    0  20.47    16    0   40   2015-5-13-2-0\n4      0  2015      5   13     1    0  20.50    16    0   44   2015-5-13-1-0\n5      0  2015      5   13     0    0  20.54    16    0   44   2015-5-13-0-0\n6      0  2015      5   12    23    0  20.56    16    0   40  2015-5-12-23-0\n</code></pre>\n"}], "owner": {"reputation": 614, "user_id": 3726270, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZhjuG.jpg?s=128&g=1", "display_name": "kamome", "link": "https://stackoverflow.com/users/3726270/kamome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1431559219, "creation_date": 1431548992, "question_id": 30224626, "link": "https://stackoverflow.com/questions/30224626/how-can-i-join-columns-in-pandas", "title": "How can I join columns in Pandas?", "body": "<p>I\u00b4ve got the following data frame:</p>\n\n<pre><code>      IDENT   YEAR   MONTH   DAY   HOUR   MIN    XXXX   YYYY  GPS   SNR      \n\n0         0   2015       5    13      5     0  20.45     16          0    44   \n1         0   2015       5    13      4     0  20.43     16          0    44   \n2         0   2015       5    13      3     0  20.42     16          0    44   \n3         0   2015       5    13      2     0  20.47     16          0    40   \n4         0   2015       5    13      1     0  20.50     16          0    44   \n5         0   2015       5    13      0     0  20.54     16          0    44   \n6         0   2015       5    12     23     0  20.56     16          0    40   \n</code></pre>\n\n<p>It comes from a csv file and I\u00b4d made the dataframe using Python Pandas.</p>\n\n<p>Now I\u00b4d like to join the columns YEAR+MONTH+DAY+HOUR+MIN to make a new one, for example </p>\n\n<pre><code>DATE-TIME    \n2015-5-13-5-0 \n</code></pre>\n\n<p>How can I do that ?</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "is_accepted": false, "score": 5, "last_activity_date": 1431549010, "creation_date": 1431549010, "answer_id": 30224629, "question_id": 30224612, "link": "https://stackoverflow.com/questions/30224612/python-how-to-find-repeat-characters-in-a-string/30224629#30224629", "title": "Python - How to find &#39;repeat&#39; characters in a string?", "body": "<pre><code>In [26]: s = 'GATTACA'\n\nIn [27]: [i for i,char in enumerate(s) if char==\"A\"]\nOut[27]: [1, 4, 6]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4765845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f8fdd1d18e4cb6f6347e93324fed6a9?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4765845/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1379, "favorite_count": 0, "closed_date": 1431549137, "answer_count": 1, "score": -2, "last_activity_date": 1431549010, "creation_date": 1431548918, "question_id": 30224612, "link": "https://stackoverflow.com/questions/30224612/python-how-to-find-repeat-characters-in-a-string", "closed_reason": "Duplicate", "title": "Python - How to find &#39;repeat&#39; characters in a string?", "body": "<p>For example in 'GATTACA' I want to find all the 'A's.</p>\n\n<p>I would want the positions 1,4,6.</p>\n\n<p>Using the '.find' method only gives me the location of the first 'A' but not the rest.</p>\n\n<p>I was wondering if there was another method that allowed you to find all 'repeat' characters in a string? </p>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "pandas", "pandasql"], "comments": [{"owner": {"reputation": 1966, "user_id": 612758, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/97d4d4ce8c458300c845c85a4b5e1ae5?s=128&d=identicon&r=PG", "display_name": "maackle", "link": "https://stackoverflow.com/users/612758/maackle"}, "edited": false, "score": 0, "creation_date": 1431554474, "post_id": 30224598, "comment_id": 48555742, "body": "This package should be helpful: <a href=\"https://pypi.python.org/pypi/jdcal\" rel=\"nofollow noreferrer\">pypi.python.org/pypi/jdcal</a>"}], "owner": {"reputation": 1135, "user_id": 2300461, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/R1qnR.jpg?s=128&g=1", "display_name": "0nir", "link": "https://stackoverflow.com/users/2300461/0nir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 715, "favorite_count": 0, "closed_date": 1613555320, "answer_count": 0, "score": 4, "last_activity_date": 1460841293, "creation_date": 1431548875, "question_id": 30224598, "link": "https://stackoverflow.com/questions/30224598/convert-julian-date-column-to-gregorian-in-python-pandas", "closed_reason": "Duplicate", "title": "Convert Julian Date Column to Gregorian in python pandas", "body": "<p>I have a bunch of columns with \"julian date\" type in pandas. What would be the best possible way to convert them to gregorian dates. My dataframe looks like -</p>\n\n<pre><code>    CODE     START_DATE     END_DATE\n0  00200         115001       115365\n1  00200         115001       115365\n2  00200         115001       115365\n3  00200         115001       115365\n4  00200         115001       115365\n</code></pre>\n\n<p>I would want to convert the START_DATE &amp; END_DATE columns to gregorian/regular datetime.</p>\n\n<p>In sql, I would use the below -</p>\n\n<pre><code>UPDATE Table1 set\nDATE_NEW = CASE WHEN ltrim(rtrim(START_DATE)) = 0 THEN '1900-01-01' \n    WHEN ltrim(rtrim(START_DATE)) IS NULL THEN NULL    \n    ELSE (CAST(DATEADD(dayofyear , ltrim(rtrim(START_DATE)) % 1000 - 1,DATEADD(year, ltrim(rtrim(START_DATE)) / 1000 , '1900-01-01')) as date)) END \n</code></pre>\n\n<p>Please suggest. Thanks.</p>\n"}, {"tags": ["python", "python-3.x", "command-line-arguments", "argparse"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1431549140, "post_id": 30224573, "comment_id": 48553143, "body": "Does it really make sense to specify <code>--files</code> with 0 arguments? You might want to use <code>nargs=&#39;+&#39;</code> instead."}, {"owner": {"reputation": 95, "user_id": 2184303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee572157a9262f82644fdf1b3ca39bbd?s=128&d=identicon&r=PG", "display_name": "KaleidoEscape", "link": "https://stackoverflow.com/users/2184303/kaleidoescape"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1431549442, "post_id": 30224573, "comment_id": 48553287, "body": "@chepner Thanks, that&#39;s a good point, I&#39;m going to do that! But I don&#39;t think that would resolve the usage message problem."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1431556401, "post_id": 30224573, "comment_id": 48556548, "body": "Well, &quot;positional&quot; doesn&#39;t mean &quot;required&quot;. You can also add a <code>help</code> tag to the <code>files</code> argument that mentions it&#39;s optional."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1431556623, "post_id": 30224573, "comment_id": 48556611, "body": "Two options or arguments with <code>nargs=&#39;*&#39;</code> is always going to cause a problem. They can&#39;t both come last in the list."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 2184303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee572157a9262f82644fdf1b3ca39bbd?s=128&d=identicon&r=PG", "display_name": "KaleidoEscape", "link": "https://stackoverflow.com/users/2184303/kaleidoescape"}, "edited": false, "score": 0, "creation_date": 1431554457, "post_id": 30224749, "comment_id": 48555734, "body": "Thanks, but I don&#39;t think this is a good solution for the confusing usage messages -- I&#39;ve edited my question to elaborate."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1431558455, "post_id": 30224749, "comment_id": 48557146, "body": "<code>argparse</code> usage puts the positional argument at the end, regardless of the definition order."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1431556433, "last_edit_date": 1431556433, "creation_date": 1431549463, "answer_id": 30224749, "question_id": 30224573, "link": "https://stackoverflow.com/questions/30224573/change-argparse-usage-message-argument-order/30224749#30224749", "title": "Change argparse usage message argument order", "body": "<p>Because <code>argparse</code> doesn't put any restrictions on where an option is used in the command line, it doesn't really make sense for an option to take an arbitrary number of arguments. Positional arguments, on the other hand, <em>do</em> have an enforced order. I'd do something like</p>\n\n<pre><code>add_argument(\"positional_arg\")\nadd_argument(\"files\", nargs='*', help=\"Optional, one or more files\")\n</code></pre>\n\n<p>instead, converting the <code>--files</code> option to a list of purely optional positional arguments. Then there is no confusion, in either the help message or in actual use, about which arguments are meant to be part of the file list.</p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 2184303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee572157a9262f82644fdf1b3ca39bbd?s=128&d=identicon&r=PG", "display_name": "KaleidoEscape", "link": "https://stackoverflow.com/users/2184303/kaleidoescape"}, "edited": false, "score": 0, "creation_date": 1431560912, "post_id": 30226456, "comment_id": 48557808, "body": "Thank you for the nice summary! I like your answer at <a href=\"http://stackoverflow.com/a/26986546/901925\">stackoverflow.com/a/26986546/901925</a>, and I think this will work best for my specific situation, but I might also consider turning the positional into a flag or take another look at the <code>argument_group</code>. Thanks!"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1431559754, "last_edit_date": 1495535549, "creation_date": 1431557155, "answer_id": 30226456, "question_id": 30224573, "link": "https://stackoverflow.com/questions/30224573/change-argparse-usage-message-argument-order/30226456#30226456", "title": "Change argparse usage message argument order", "body": "<p>There are a couple of issues here - how arguments are parsed, and how the usage is formatted.</p>\n\n<p>A couple of quick fixes:</p>\n\n<p>Use <code>--</code> to mark the end of the optionals list, and the start of the positional(s).</p>\n\n<p>Another possibility is to turn your <code>positional</code> into a <code>optional</code>.  That is, give it a simple flag, and <code>required</code> parameter if needed.  Then it can be placed anywhere in the subparser's input.</p>\n\n<hr>\n\n<p><a href=\"https://stackoverflow.com/a/26986546/901925\">https://stackoverflow.com/a/26986546/901925</a> addresses this issue of a positional following a * optional.  It makes the same quick suggestions.  It also shows how the help formatter can be changed to not move the positional to the end of the usage.  But it doesn't address the multi-line usage case.</p>\n\n<p>Usage order is also discussed in a more recent SO question, \n<a href=\"https://stackoverflow.com/a/29619171/901925\">https://stackoverflow.com/a/29619171/901925</a></p>\n\n<hr>\n\n<p>If you don't like the default argument groupings (positionals and optionals), you can use <code>argument_groups</code> with different titles and descriptions.  With nargs like '?' and '*', and 'required' parameters, names like 'optionals' and 'positionals' can be confusing.  I'm trying to use 'flagged' for 'optionals', in the hope that it is less confusing.</p>\n"}], "owner": {"reputation": 95, "user_id": 2184303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee572157a9262f82644fdf1b3ca39bbd?s=128&d=identicon&r=PG", "display_name": "KaleidoEscape", "link": "https://stackoverflow.com/users/2184303/kaleidoescape"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1467, "favorite_count": 0, "accepted_answer_id": 30226456, "answer_count": 2, "score": 1, "last_activity_date": 1431559754, "creation_date": 1431548770, "last_edit_date": 1431557403, "question_id": 30224573, "link": "https://stackoverflow.com/questions/30224573/change-argparse-usage-message-argument-order", "title": "Change argparse usage message argument order", "body": "<p>I'm using argparse in python3. In my script, I have some subparsers, a positional argument and some optional arguments. I have an optional argument to pass in any number of file paths, and it's using  <code>nargs='*'</code>. The usage message for my script displays like this:</p>\n\n<pre><code>usage: myprog.py subparser1 [-h] [--dir DIR] \n                            [--files [FILES [FILES ...]]]\n                            positional_arg\n</code></pre>\n\n<p>But if you actually put the <code>positional_arg</code> after the <code>--files</code> flag as suggested by this usage message, I think the parser ends up consuming it as a file path instead (because of the <code>nargs='*'</code>), and then throws an error since it doesn't find the required <code>positional_arg</code>.</p>\n\n<p>I think the way the usage message is printed is misleading. Since I have multiple subparsers, I would like to find a way to change all the usage messages (without typing them all by hand using the <code>usage=</code> argument) just so that the positional argument is displayed first, hopefully clearing up the confusion.</p>\n\n<p>So my main question is how do I change the way the arguments are ordered inside the usage portion of the argparse message? </p>\n\n<p>EDIT to address one possible solution that doesn't work for me.</p>\n\n<p>I don't want to add the <code>--files</code> flag as a positional argument with <code>nargs='*'</code>. Firstly, because that makes it now shows up in the \"positional arguments\" section of the help message instead of in the \"optional arguments\" section with the rest of my optional arguments so it makes it look like it is required, even though you could pass it 0 arguments.</p>\n\n<p>Secondly, because because if I wanted to have another flag that takes any number of arguments in addition to the <code>--files</code> (e.g. <code>--folders</code>), and if I made them both positional arguments, I'd run into the same problem where the first one would keep consuming arguments until the end. If I made one positional and one optional then the misleading usage message is still a problem.</p>\n"}, {"tags": ["python", "macos", "pip", "pytz"], "answers": [{"tags": [], "owner": {"reputation": 77884, "user_id": 145403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137b739a75a31399e6d07140302c8efc?s=128&d=identicon&r=PG", "display_name": "Ned Deily", "link": "https://stackoverflow.com/users/145403/ned-deily"}, "is_accepted": true, "score": 8, "last_activity_date": 1431549680, "creation_date": 1431549680, "answer_id": 30224806, "question_id": 30224539, "link": "https://stackoverflow.com/questions/30224539/pytz-install-on-mac/30224806#30224806", "title": "pytz install on Mac", "body": "<p><code>/System/Library/Frameworks/Python.framework/Versions/2.7/Extras</code> is a location associated with the Apple-supplied Python 2.7 (<code>/usr/bin/python2.7</code>).  It's not possible to tell from the traceback but chances are that Django is being run under a different instance of Python 2.7, perhaps linked to from <code>/usr/local/bin</code>.  These sorts of problems can arise when there are multiple instances of Python and you are using <code>pip</code> directly from the command line.  Make sure you have a version of <code>pip</code> installed for each Python you are using.  And, to ensure that you are using the right instance of <code>pip</code>, you can invoke it this way:</p>\n\n<p><code>python -m pip install pytz</code></p>\n\n<p>substituting for <code>python</code> the same path that is used to run Django.</p>\n\n<p>Another approach is to always use an activated <code>virtualenv</code> which should ensure that the right <code>python</code> and <code>pip</code> instances are found first on the process <code>PATH</code>. </p>\n"}], "owner": {"reputation": 1566, "user_id": 1981978, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ddaa21747ee7926b23d4b462150abf7?s=128&d=identicon&r=PG", "display_name": "Casey Perkins", "link": "https://stackoverflow.com/users/1981978/casey-perkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4079, "favorite_count": 4, "accepted_answer_id": 30224806, "answer_count": 1, "score": 3, "last_activity_date": 1431549680, "creation_date": 1431548637, "question_id": 30224539, "link": "https://stackoverflow.com/questions/30224539/pytz-install-on-mac", "title": "pytz install on Mac", "body": "<p>Django informs me \"ImportError: No module named pytz\", but when I go to use pip to install it, I get this result:</p>\n\n<pre><code>Requirement already satisfied (use --upgrade to upgrade): pytz in /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python\n</code></pre>\n\n<p>Is it possible that it is looking in the wrong location, or that I need to try to install it somewhere else? </p>\n\n<p>Here is the full stacktrace:</p>\n\n<pre><code>Internal Server Error: /basicloginwebservice/\nTraceback (most recent call last):\n  File \"/Library/Python/2.7/site-packages/django/core/handlers/base.py\", line 103, in get_response\n    resolver_match = resolver.resolve(request.path_info)\n  File \"/Library/Python/2.7/site-packages/django/core/urlresolvers.py\", line 321, in resolve\n    sub_match = pattern.resolve(new_path)\n  File \"/Library/Python/2.7/site-packages/django/core/urlresolvers.py\", line 223, in resolve\n    return ResolverMatch(self.callback, args, kwargs, self.name)\n  File \"/Library/Python/2.7/site-packages/django/core/urlresolvers.py\", line 230, in callback\n    self._callback = get_callable(self._callback_str)\n  File \"/Library/Python/2.7/site-packages/django/utils/functional.py\", line 29, in wrapper\n    result = func(*args)\n  File \"/Library/Python/2.7/site-packages/django/core/urlresolvers.py\", line 97, in get_callable\n    mod = import_module(mod_name)\n  File \"/Library/Python/2.7/site-packages/django/utils/importlib.py\", line 35, in import_module\n    __import__(name)\n  File \"/Users/&lt;redacted&gt;/django/&lt;redacted&gt;/&lt;redacted&gt;/views.py\", line 3, in &lt;module&gt;\n    import pytz\nImportError: No module named pytz\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-2.7", "libusb", "pyusb"], "comments": [{"owner": {"reputation": 18898, "user_id": 903011, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a8f2f5f292c75c5e81a6607530a0ab6?s=128&d=identicon&r=PG", "display_name": "WoJ", "link": "https://stackoverflow.com/users/903011/woj"}, "edited": false, "score": 5, "creation_date": 1431786756, "post_id": 30224519, "comment_id": 48652303, "body": "can you post the whole traceback to see where the error occurs?"}, {"owner": {"reputation": 667, "user_id": 2065479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbdc3e3126116c2f2349b7bee1619630?s=128&d=identicon&r=PG", "display_name": "Layo", "link": "https://stackoverflow.com/users/2065479/layo"}, "edited": false, "score": 0, "creation_date": 1431787068, "post_id": 30224519, "comment_id": 48652420, "body": "Just in case, make sure you add the basic control error code: <code># was it found? if device is None:     raise ValueError(&#39;Device not found&#39;)</code>"}, {"owner": {"reputation": 4371, "user_id": 2058270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a06931a6743fd9dd7c881818498b1af4?s=128&d=identicon&r=PG", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2058270/ajay"}, "edited": false, "score": 0, "creation_date": 1431865493, "post_id": 30224519, "comment_id": 48671072, "body": "<a href=\"http://ubuntuforums.org/archive/index.php/t-2044904.html\" rel=\"nofollow noreferrer\">ubuntuforums.org/archive/index.php/t-2044904.html</a> check this might be helpful Your code didn&#39;t show any errors for my external hard disk,after i&#39;ve added few permissions @ /etc/udev/rules.d/99-garmin.rules.But i got an error for my dongle."}, {"owner": {"reputation": 28120, "user_id": 492773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4c30dea4ed3e1c2efc5e877f1f3c971?s=128&d=identicon&r=PG", "display_name": "kichik", "link": "https://stackoverflow.com/users/492773/kichik"}, "edited": false, "score": 0, "creation_date": 1432232344, "post_id": 30224519, "comment_id": 48852061, "body": "What does <code>lsusb</code> show?"}], "answers": [{"tags": [], "owner": {"reputation": 8326, "user_id": 2153744, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/333a7a133c0961050fd48299bc12c8c5?s=128&d=identicon&r=PG", "display_name": "aronadaal", "link": "https://stackoverflow.com/users/2153744/aronadaal"}, "is_accepted": false, "score": 1, "last_activity_date": 1432274128, "last_edit_date": 1432274128, "creation_date": 1431981155, "answer_id": 30312320, "question_id": 30224519, "link": "https://stackoverflow.com/questions/30224519/usb-core-usberror-errno-19-no-such-device-it-may-have-been-disconnected/30312320#30312320", "title": "usb.core.USBError: [Errno 19] No such device (it may have been disconnected)", "body": "<p>well you should follow all necessary steps from the tutorial, especially the part where the device is searched.\n<a href=\"https://github.com/walac/pyusb/blob/master/docs/tutorial.rst\" rel=\"nofollow\">https://github.com/walac/pyusb/blob/master/docs/tutorial.rst</a></p>\n\n<p>and: are you sure your device matches the defined vendor and product id?\nYou can use <code>lsusb</code> to identify the USB device and grab the ids from there.\n<a href=\"http://www.linuxnix.com/2013/05/find-usb-device-details-in-linuxunix-using-lsusb-command.html\" rel=\"nofollow\">http://www.linuxnix.com/2013/05/find-usb-device-details-in-linuxunix-using-lsusb-command.html</a></p>\n"}], "owner": {"reputation": 706, "user_id": 1476637, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Bq7qe.jpg?s=128&g=1", "display_name": "James Anderson", "link": "https://stackoverflow.com/users/1476637/james-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2513, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1432274128, "creation_date": 1431548577, "question_id": 30224519, "link": "https://stackoverflow.com/questions/30224519/usb-core-usberror-errno-19-no-such-device-it-may-have-been-disconnected", "title": "usb.core.USBError: [Errno 19] No such device (it may have been disconnected)", "body": "<p>My code to retrieve a value from a USB device in Python is as follows:</p>\n\n<pre><code>import usb.core\nimport usb.util\n\nVENDOR_ID = 0x0922\nPRODUCT_ID = 0x8005\n\n# find the USB device\ndevice = usb.core.find(idVendor=VENDOR_ID,\n                       idProduct=PRODUCT_ID)\n\n# use the first/default configuration\ndevice.set_configuration()\n# first endpoint\nendpoint = device[0][(0,0)][0]\n\n# read a data packet\nattempts = 10\ndata = None\nwhile data is None and attempts &gt; 0:\n    try:\n        data = device.read(endpoint.bEndpointAddress,\n                           endpoint.wMaxPacketSize)\n    except usb.core.USBError as e:\n        data = None\n        if e.args == ('Operation timed out',):\n            attempts -= 1\n            continue\n\nprint data\n</code></pre>\n\n<p>When I run this is the error message:</p>\n\n<pre><code>File \"/Library/Python/2.7/site-packages/usb/backend/libusb1.py\", line 552, in _check\nraise USBError(_strerror(ret), ret, _libusb_errno[ret])\nusb.core.USBError: [Errno 19] No such device (it may have been disconnected)\n</code></pre>\n\n<p>Why is this happening and how can I fix it? Thanks!</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1431551206, "post_id": 30224418, "comment_id": 48554206, "body": "Why did you add an infinite loop with widget creation and a <code>time.sleep()</code> call? That&#39;s guaranteed to produce unwanted behavior."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 4897251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b14e3334e41b25177ec105b331a9a6b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nolan Porter", "link": "https://stackoverflow.com/users/4897251/nolan-porter"}, "edited": false, "score": 0, "creation_date": 1431553389, "post_id": 30224893, "comment_id": 48555285, "body": "Alright, I have implemented this code. The number increases 1 per second, but it doesn&#39;t update the number of clicks that I have until I hit the click button again. Any way that you know how to fix that?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 57, "user_id": 4897251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b14e3334e41b25177ec105b331a9a6b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nolan Porter", "link": "https://stackoverflow.com/users/4897251/nolan-porter"}, "edited": false, "score": 0, "creation_date": 1431554039, "post_id": 30224893, "comment_id": 48555539, "body": "The number increases, but doesn&#39;t update? Do you mean that it doesn&#39;t show you the new number until you hit the click button, but when you do so, it displays the correct number?"}, {"owner": {"reputation": 57, "user_id": 4897251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b14e3334e41b25177ec105b331a9a6b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nolan Porter", "link": "https://stackoverflow.com/users/4897251/nolan-porter"}, "edited": false, "score": 0, "creation_date": 1431556905, "post_id": 30224893, "comment_id": 48556694, "body": "Yes. And I dont know how to fix it"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 57, "user_id": 4897251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b14e3334e41b25177ec105b331a9a6b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nolan Porter", "link": "https://stackoverflow.com/users/4897251/nolan-porter"}, "edited": false, "score": 0, "creation_date": 1431558749, "post_id": 30224893, "comment_id": 48557229, "body": "Put a <code>if autoclickers: print(click)</code> inside <code>autoclick()</code>."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 57, "user_id": 4897251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b14e3334e41b25177ec105b331a9a6b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nolan Porter", "link": "https://stackoverflow.com/users/4897251/nolan-porter"}, "edited": false, "score": 0, "creation_date": 1431558899, "post_id": 30224893, "comment_id": 48557257, "body": "Also, I don&#39;t know if your game&#39;s autoclickers benefit from the multiplier, but if they do, you&#39;d use <code>click += autoclickers*mult</code> instead of just <code>click += autoclickers</code>."}], "tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": true, "score": 2, "last_activity_date": 1431550039, "creation_date": 1431550039, "answer_id": 30224893, "question_id": 30224418, "link": "https://stackoverflow.com/questions/30224418/python-clicker-game/30224893#30224893", "title": "Python Clicker Game", "body": "<p>The problem with using <code>sleep()</code> in a <code>tkinter</code> application is that it messes with the way the GUI is updated. Instead, call <code>after()</code> on the root <code>tkinter</code> object to tell it to execute the given command (function) after the given number of milliseconds have elapsed. This <code>after()</code> call will be placed within the function itself, so that, after calling this function normally, it will be called again one second later.</p>\n\n<pre><code>autoclickers=0 # start autoclickers at 0\n\ndef purchaseAutoClickerCommand():\n    global click\n    global autoclickers # declare global\n    if click &lt; 7:\n        print(\"Not enough clicks!\")\n        blankLine()\n    else:\n        click -= 7 # pay for an autoclicker\n        print(\"Auto clicker purchased!\")\n        autoclickers += 1 # receive an autoclicker\n\ndef autoclick():\n    global master\n    global click\n    global autoclickers\n    click += autoclickers # get clicks from autoclickers\n    master.after(1000, autoclick) # do this again 1 second later\n\nautoclick() # start benefiting from all existing autoclickers\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12853048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7e56896facc4951f828394aa98ca43?s=128&d=identicon&r=PG", "display_name": "eee", "link": "https://stackoverflow.com/users/12853048/eee"}, "is_accepted": false, "score": -3, "last_activity_date": 1581001673, "creation_date": 1581001673, "answer_id": 60098029, "question_id": 30224418, "link": "https://stackoverflow.com/questions/30224418/python-clicker-game/60098029#60098029", "title": "Python Clicker Game", "body": "<p>I downloaded an autoclicker my self and after 5 seconds of holding my mouse over the click button and ten over the double button i achieved this amount of clicks. (copy, paste)</p>\n\n<p>755556783768937868934768457868378674578897653689974322127907543098763683978387683767937784870388737657475555678376893786893476845786837867457889765368997432212790754309876368397838768376793778487038873765747555567837689378689347684578683786745788976536899743221279075430987636839783876837679377848703887376574755556783768937868934768457868378674578897653689974322127907543098763688934768457868378674578897653689974322127907543098763683978387683767937784870388737657475555678376893786893476445533384578683786745788976536899743221279075430987636839783876837679377848703887376574755556783768937868934224457684578683786745788976536899743221279075430987636839783876837679377848703887376574755556783768937868934768457868378674578897653689974322127907543098763683978387683767937784870388737657475555678376893786893476845786837867457889765368997432212790754309876366666666664344667645544448397838768376793778487038873765747555567837689378689347684578683786745788976536899743221279075430987636839783876837679377848703887333765747555567837689378689347684578683786745788976536899743221279075430987636839783876837679377848703887376574755556783768937868934768457868378674578897653689974322127907543098783978383333368376793778487038873765747555567837689378689347684578683786745788976536899743221279075430987636839783876837679377848703887376574755556783768937868934768457868378674578897653689974322127907543098763683978387683767937784870388737657475555678376893786893476845786837867457889765666536899743221279075430987636839783876837679377848703887376574755556783768937868934768457868378674578897653689974322127907543098763683978387683767937784870388737657475555678376893786893476845786837867457889765368997432212790754309876368397838768376793778487038873765747555567837689378689347684578683786745788976536899743221279075430987636839783876837679377848703887376574755556783768937868934768457868378674578897653689974322127907543098763683978387683767937784870388737657475555678376893786893476845786837867457889765368997432212790754309876368397838768376793778487038873765747555567837689378689347684578683786745788976536899743221279075430987636839783876837679377848703887376574</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 13949968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b3fcfab4480ef1c9471a49039aab5ba?s=128&d=identicon&r=PG&f=1", "display_name": "Kickokick", "link": "https://stackoverflow.com/users/13949968/kickokick"}, "is_accepted": false, "score": 0, "last_activity_date": 1610895462, "last_edit_date": 1610895462, "creation_date": 1597778697, "answer_id": 63475389, "question_id": 30224418, "link": "https://stackoverflow.com/questions/30224418/python-clicker-game/63475389#63475389", "title": "Python Clicker Game", "body": "<p>What I would recommend for just the clicking is just using a module like pyautogui or something which can type keys and click on its own, unless you were asking for like a autoclicker but you can click on the side</p>\n<p>EDIT</p>\n<p>you could use a while loop which adds 1 per second</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 14160779, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Ghk_0yCNhvhN7u_X51uWP4sOgIweadolHSUixo=k-s128", "display_name": "Techo WinMC", "link": "https://stackoverflow.com/users/14160779/techo-winmc"}, "is_accepted": false, "score": 0, "last_activity_date": 1601402110, "creation_date": 1601402110, "answer_id": 64125042, "question_id": 30224418, "link": "https://stackoverflow.com/questions/30224418/python-clicker-game/64125042#64125042", "title": "Python Clicker Game", "body": "<p>well, I noticed that using time will just lag everything. Try using timers or make it add .00001 clicks so it will make it kinda like a timer.</p>\n"}], "owner": {"reputation": 57, "user_id": 4897251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b14e3334e41b25177ec105b331a9a6b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nolan Porter", "link": "https://stackoverflow.com/users/4897251/nolan-porter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14466, "favorite_count": 0, "accepted_answer_id": 30224893, "answer_count": 4, "score": 2, "last_activity_date": 1610895462, "creation_date": 1431548189, "last_edit_date": 1431551367, "question_id": 30224418, "link": "https://stackoverflow.com/questions/30224418/python-clicker-game", "title": "Python Clicker Game", "body": "<p>I have come up with some code that I am using for a clicker game, kinda like Cookie Clicker.</p>\n\n<pre><code>from tkinter import *\nimport time\n\nmaster = Tk()\n\ndef uiPrint():\n    info()\n    print(\"\")\n    print(click)\n    blankLine()\n\ndef info():\n    print(\"Double click purchases need 50 clicks!\")\n    print(\"Auto clicker purchases need 75 clicks!\")\n\ninfo()\n\nclick = 0\nmult = 1\ndcp1 = 0\n\ndef blankLine():\n    for i in range(20):\n        print(\"\")\n\ndef purchaseDoubleClicksCommand():\n    global click\n    global mult\n    if click &lt; 5:\n        print(\"Not enough clicks!\")\n        blankLine()\n    elif click &gt;= 5:\n        mult = mult*2\n        click = click - 5\n        print(\"Double Clicks Purchased!\")\n        blankLine()\n\n\ndef purchaseAutoClickerCommand():\n    global click\n    if click &lt; 7:\n        print(\"Not enough clicks!\")\n        blankLine()\n    elif click &gt;= 7:\n        click = click - 7\n        print(\"Auto clicker purchased!\")\n        while True:\n            click = click + 1\n            time.sleep(1)\n\n\ndef buttonCommand():\n    global click\n    global mult\n    click += 1*(mult)\n    uiPrint()\n\n    if click == 100:\n        print('''Achievement Unlocked: Junior Clicker!\n        BONUS 100 clicks!''')\n        click += 100\n\n    elif click == 400:\n        print ('''Achievement Unlocked: Little Ninja Clicks!\n        BONUS 200!''')\n        click += 300\n\n    elif click == 1500:\n        print ('''Achievement Unlocked: Click Ninja Master!\n        QUAD CLICKS!''')\n        mult = mult * 4\n\n    elif click == 3000:\n        print ('''Achievement Unlocked:  Jackie Chan Style!\n        8 TIMES THE CLICKS!''')\n        mult = mult * 8\n\nmainClickButton = Button(master, text=\"Click!\", command = buttonCommand)\nmainClickButton.pack()\n\npurchaseDoubleClickButton = Button(master, text=\"Purchase Double Clicks\", command = purchaseDoubleClicksCommand)\npurchaseDoubleClickButton.pack()\n\npurchaseAutoClickerButton = Button(master, text=\"Purchase Auto Clicker\", command = purchaseAutoClickerCommand)\npurchaseAutoClickerButton.pack()\n\nmaster.title(\"Clicker! v0.0.6\")\nmaster.geometry(\"%sx%s+%s+%s\" % (200,70,512,512))\nmainloop()\n</code></pre>\n\n<p>This is the code that I have so far. I am trying to add an Auto Clicker that you can buy through a button. I have found one other post that is about this, but the solution for that uses PyMouse which 1.) I can't get installed (Trust me I've tried everything) and 2.) Don't want to imitate user input.</p>\n\n<p>So this is the code in question.</p>\n\n<pre><code>def purchaseAutoClickerCommand():\n    global click\n    if click &lt; 7:\n        print(\"Not enough clicks!\")\n        blankLine()\n    elif click &gt;= 7:\n        click = click - 7\n        print(\"Auto clicker purchased!\")\n        while True:\n            click = click + 1\n            time.sleep(1)\n</code></pre>\n\n<p>And the code in charge of the button</p>\n\n<pre><code>purchaseAutoClickerButton = Button(master, text=\"Purchase Auto Clicker\", command = purchaseAutoClickerCommand)\npurchaseAutoClickerButton.pack()\n</code></pre>\n\n<p>When I hit the button that says \"Purchase Auto Clicker\", not only do I not get the number of clicks to increase by one per second, but the entire app crashes.</p>\n\n<p>So my main question is, how can I have the number of clicks increase by one per second by the game itself (without the user needing to keep the mouse on the \"Click!\" button), and how can I have the Auto Clickers stack when more than one are bought (plus I would like to not have the program crash as soon as I try to buy it). </p>\n\n<p>Editing this for Scratso to see:</p>\n\n<p>This is what I have changed to the code</p>\n\n<pre><code>click = 0\nmult = 1\ndcp1 = 0\nautoclickers = 0\n\ndef blankLine():\n    for i in range(20):\n        print(\"\")\n\ndef purchaseDoubleClicksCommand():\n    global click\n    global mult\n    if click &lt; 5:\n        print(\"Not enough clicks!\")\n        blankLine()\n    elif click &gt;= 5:\n        mult = mult*2\n        click = click - 5\n        print(\"Double Clicks Purchased!\")\n        blankLine()\n\n\ndef purchaseAutoClickerCommand():\n    global click\n    global autoclickers\n    if click &lt; 7:\n        print(\"Not enough clicks!\")\n        blankLine()\n    elif click &gt;= 7:\n        autoclickers += 1 # add an autoclicker\n        click = click - 7\n        print(\"Auto clicker purchased!\")\n</code></pre>\n\n<p>And at the end of the code I have added </p>\n\n<pre><code>while True:\n    mainClickButton = Button(master, text=\"Click!\", command = buttonCommand)\n    mainClickButton.pack()\n\n    purchaseDoubleClickButton = Button(master, text=\"Purchase Double Clicks\", command = purchaseDoubleClicksCommand)\n    purchaseDoubleClickButton.pack()\n\n    purchaseAutoClickerButton = Button(master, text=\"Purchase Auto Clicker\", command = purchaseAutoClickerCommand)\n    purchaseAutoClickerButton.pack()\n\n    master.title(\"Clicker! v0.0.6\")\n    master.geometry(\"%sx%s+%s+%s\" % (200,70,512,512))\n    mainloop()\n\n    for autoclicker in range(autoclickers):\n        click += 1\n    time.sleep(1)\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 2224250, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5b6b29d01bb289985d43672b970a7aa0?s=128&d=identicon&r=PG&f=1", "display_name": "user2224250", "link": "https://stackoverflow.com/users/2224250/user2224250"}, "edited": false, "score": 0, "creation_date": 1431548732, "post_id": 30224493, "comment_id": 48552941, "body": "thanks..if you have time, could you write your  style of regex for stripping the spaces between the values..in the mean time, I will try myself"}, {"owner": {"reputation": 211, "user_id": 2224250, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5b6b29d01bb289985d43672b970a7aa0?s=128&d=identicon&r=PG&f=1", "display_name": "user2224250", "link": "https://stackoverflow.com/users/2224250/user2224250"}, "edited": false, "score": 1, "creation_date": 1431549636, "post_id": 30224493, "comment_id": 48553373, "body": "Thats true.we could you iregex for case insenstive. But your regex doesnt work for any value"}], "tags": [], "owner": {"reputation": 19128, "user_id": 911519, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dba27ff0b600a61269e975f4136e1ae5?s=128&d=identicon&r=PG", "display_name": "Hedde van der Heide", "link": "https://stackoverflow.com/users/911519/hedde-van-der-heide"}, "is_accepted": false, "score": 3, "last_activity_date": 1431549429, "last_edit_date": 1431549429, "creation_date": 1431548497, "answer_id": 30224493, "question_id": 30224415, "link": "https://stackoverflow.com/questions/30224415/django-how-to-strip-out-spaces-in-the-model-field-value-and-filter/30224493#30224493", "title": "Django: How to strip out spaces in the model field value and filter?", "body": "<p>No need to strip anything, regex would do the job </p>\n\n<pre><code>City.objects.filter(name__regex=r'(?i)new[\\s\\w]+')\n</code></pre>\n\n<p><code>(?i)</code> makes the expression case insensitive, although you could also simply use <code>__iregex</code></p>\n\n<p><a href=\"https://docs.djangoproject.com/en/dev/ref/models/querysets/#regex\" rel=\"nofollow\">https://docs.djangoproject.com/en/dev/ref/models/querysets/#regex</a></p>\n"}, {"comments": [{"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1431551532, "post_id": 30225141, "comment_id": 48554391, "body": "however, reading your question again, I have the impression you may be trying to match records with &#39;New York&#39; against &#39;NewYork&#39;. In that case, Django&#39;s ORM would have to be able to perform such a match, stripping/ignoring the whitespace in the field and comparing it to the key string. That would be an interesting question."}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1431552189, "post_id": 30225141, "comment_id": 48554713, "body": "See <a href=\"http://stackoverflow.com/questions/28767427/django-filter-queryset-disregarding-spaces\" title=\"django filter queryset disregarding spaces\">stackoverflow.com/questions/28767427/&hellip;</a> for some interesting info on the subject"}], "tags": [], "owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "is_accepted": false, "score": 1, "last_activity_date": 1431550985, "creation_date": 1431550985, "answer_id": 30225141, "question_id": 30224415, "link": "https://stackoverflow.com/questions/30224415/django-how-to-strip-out-spaces-in-the-model-field-value-and-filter/30225141#30225141", "title": "Django: How to strip out spaces in the model field value and filter?", "body": "<p>you already got an excellent answer, but here is another way you might want to try out:</p>\n\n<pre><code>City.objects.filter(name__icontains=''.join(s.split())\n</code></pre>\n\n<p>assuming <code>s</code> is the string you filter by (e.g. \"New York\").</p>\n\n<p>See <a href=\"https://docs.python.org/2/library/stdtypes.html#str.split\" rel=\"nofollow\">split</a> for further info</p>\n"}], "owner": {"reputation": 211, "user_id": 2224250, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/5b6b29d01bb289985d43672b970a7aa0?s=128&d=identicon&r=PG&f=1", "display_name": "user2224250", "link": "https://stackoverflow.com/users/2224250/user2224250"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3327, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1518742602, "creation_date": 1431548169, "question_id": 30224415, "link": "https://stackoverflow.com/questions/30224415/django-how-to-strip-out-spaces-in-the-model-field-value-and-filter", "title": "Django: How to strip out spaces in the model field value and filter?", "body": "<p>name = \"New York\", \"New Jersey\", \"New America\" etc</p>\n\n<p>By using the following query I will get all the results with the string contains <strong>New</strong></p>\n\n<pre><code>City.objects.filter(name__icontains=\"New\") # Perfect\n</code></pre>\n\n<p>But How to find  New York with out adding the space between new york</p>\n\n<pre><code>City.objects.filter(name__icontains=\"NewYork\") # Not getting New York\n</code></pre>\n\n<p>How to filter ? Please let me know your views</p>\n"}, {"tags": ["python", "csv", "newline"], "answers": [{"tags": [], "owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "is_accepted": false, "score": 2, "last_activity_date": 1431548338, "creation_date": 1431548338, "answer_id": 30224452, "question_id": 30224364, "link": "https://stackoverflow.com/questions/30224364/using-csv-module-to-read-ascii-delimited-text/30224452#30224452", "title": "Using csv module to read ascii delimited text?", "body": "<p><a href=\"https://docs.python.org/2/library/csv.html#csv.Dialect.lineterminator\" rel=\"nofollow\">The documentation</a> says:</p>\n\n<blockquote>\n  <p>The reader is hard-coded to recognise either '\\r' or '\\n' as end-of-line, and ignores lineterminator. This behavior may change in the future.</p>\n</blockquote>\n\n<p>So the <code>csv</code> module cannot read CSV files that use custom line terminators.</p>\n"}, {"comments": [{"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1431555134, "post_id": 30224465, "comment_id": 48556042, "body": "Boo. That&#39;s what I expected based on what I looked at/tried."}], "tags": [], "owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "is_accepted": false, "score": -1, "last_activity_date": 1431548390, "creation_date": 1431548390, "answer_id": 30224465, "question_id": 30224364, "link": "https://stackoverflow.com/questions/30224364/using-csv-module-to-read-ascii-delimited-text/30224465#30224465", "title": "Using csv module to read ascii delimited text?", "body": "<p>Per <a href=\"https://docs.python.org/3/library/functions.html#open\" rel=\"nofollow\">the docs for <code>open</code></a>:</p>\n\n<blockquote>\n  <p><em>newline</em> controls how universal newlines mode works (it only applies to text mode). It can be <code>None</code>, <code>''</code>, <code>'\\n'</code>, <code>'\\r'</code>, and <code>'\\r\\n'</code>.</p>\n</blockquote>\n\n<p>so <code>open</code> won't handle your file. Per <a href=\"https://docs.python.org/3/library/csv.html#csv.Dialect.lineterminator\" rel=\"nofollow\">the <code>csv</code> docs</a>:</p>\n\n<blockquote>\n  <p><strong>Note</strong> The <code>reader</code> is hard-coded to recognise either <code>'\\r'</code> or <code>'\\n'</code> as end-of-line, and ignores <em>lineterminator</em>.</p>\n</blockquote>\n\n<p>so that won't do it either. I also looked into whether <a href=\"https://docs.python.org/3/library/stdtypes.html#str.splitlines\" rel=\"nofollow\"><code>str.splitlines</code></a> was configurable, but it uses a defined set of boundaries.</p>\n\n<blockquote>\n  <p>Am I relegated to doing <code>line.split(chr(30))</code>?</p>\n</blockquote>\n\n<p>Looks that way, sorry!</p>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 4, "last_activity_date": 1431570888, "last_edit_date": 1431570888, "creation_date": 1431555645, "answer_id": 30226173, "question_id": 30224364, "link": "https://stackoverflow.com/questions/30224364/using-csv-module-to-read-ascii-delimited-text/30226173#30226173", "title": "Using csv module to read ascii delimited text?", "body": "<p>You can do it by effectively translating the end-of-line characters in the file into the newline characters <code>csv.reader</code> is hardcoded to recognize:</p>\n\n<pre><code>import csv\n\nwith open('ascii_delim.adt', 'w') as f:\n    writer = csv.writer(f, delimiter=chr(31), lineterminator=chr(30))\n    writer.writerow(('Sir Lancelot of Camelot', 'To seek the Holy Grail', 'blue'))\n    writer.writerow(('Sir Galahad of Camelot', 'I seek the Grail', 'blue... no yellow!'))\n\ndef readlines(f, newline='\\n'):\n    while True:\n        line = []\n        while True:\n            ch = f.read(1)\n            if ch == '':  # end of file?\n                return\n            elif ch == newline:  # end of line?\n                line.append('\\n')\n                break\n            line.append(ch)\n        yield ''.join(line)\n\nwith open('ascii_delim.adt', 'rb') as f:\n    reader = csv.reader(readlines(f, newline=chr(30)), delimiter=chr(31))\n    for row in reader:\n        print row\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>['Sir Lancelot of Camelot', 'To seek the Holy Grail', 'blue']\n['Sir Galahad of Camelot', 'I seek the Grail', 'blue... no yellow!']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5960235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7edc41467803dd5a3924111ede42f32?s=128&d=identicon&r=PG&f=1", "display_name": "Torben Noto", "link": "https://stackoverflow.com/users/5960235/torben-noto"}, "is_accepted": false, "score": 0, "last_activity_date": 1466557351, "last_edit_date": 1466557351, "creation_date": 1466552337, "answer_id": 37956283, "question_id": 30224364, "link": "https://stackoverflow.com/questions/30224364/using-csv-module-to-read-ascii-delimited-text/37956283#37956283", "title": "Using csv module to read ascii delimited text?", "body": "<p>Hey I was struggling with a similar problem all day. I wrote a function heavily inspired by @martineau that should solve it for you. My function is slower but can parse files delimited by any kind of string. Hope it helps!</p>\n\n<pre><code>import csv\n\ndef custom_CSV_reader(csv_file,row_delimiter,col_delimiter):\n\n    with open(csv_file, 'rb') as f:\n\n        row = [];\n        result = [];\n        temp_row = ''\n        temp_col = ''\n        line = ''\n        go = 1;\n\n        while go == 1:\n            while go == 1:\n                ch = f.read(1)\n\n                if ch == '':  # end of file?\n                    go = 0\n\n                if ch != '\\n' and ch != '\\t' and ch != ',':\n                    temp_row = temp_row + ch\n                    temp_col = temp_col + ch\n                    line = line + ch\n\n                if row_delimiter in temp_row:\n                    line = line[:-len(row_delimiter)]\n\n                    row.append(line)\n\n                    temp_row = ''\n                    line= ''\n\n                    break\n\n                elif col_delimiter in temp_col:\n                    line = line[:-len(col_delimiter)]\n                    row.append(line)\n                    result.append(row)\n\n                    row = [];\n                    temp_col = ''\n                    line = ''\n                    break\n    return result\n</code></pre>\n"}], "owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1005, "favorite_count": 0, "accepted_answer_id": 30226173, "answer_count": 4, "score": 3, "last_activity_date": 1466557351, "creation_date": 1431548006, "last_edit_date": 1466554477, "question_id": 30224364, "link": "https://stackoverflow.com/questions/30224364/using-csv-module-to-read-ascii-delimited-text", "title": "Using csv module to read ascii delimited text?", "body": "<p>You may or may not be <a href=\"https://ronaldduncan.wordpress.com/2009/10/31/text-file-formats-ascii-delimited-text-not-csv-or-tab-delimited-text/\" rel=\"nofollow\">aware</a> of <a href=\"http://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\" rel=\"nofollow\">ASCII delimited text</a>, which has the nice advantage of using non-keyboard characters for separating fields and lines.</p>\n\n<p>Writing this out is pretty easy:</p>\n\n<pre><code>import csv\n\nwith open('ascii_delim.adt', 'w') as f:\n    writer = csv.writer(f, delimiter=chr(31), lineterminator=chr(30))\n    writer.writerow(('Sir Lancelot of Camelot', 'To seek the Holy Grail', 'blue'))\n    writer.writerow(('Sir Galahad of Camelot', 'I seek the Grail', 'blue... no yellow!'))\n</code></pre>\n\n<p>And, sure enough, you get things dumped out properly. However, on reading, <code>lineterminator</code> does nothing, and if I try to do: </p>\n\n<pre><code>open('ascii_delim.adt', newline=chr(30))\n</code></pre>\n\n<p>It throws a <code>ValueError: illegal newline value:</code></p>\n\n<p>So how can I read in my ASCII delimited file? Am I relegated to doing <code>line.split(chr(30))</code>?</p>\n"}, {"tags": ["python", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "is_accepted": false, "score": 1, "last_activity_date": 1431547598, "creation_date": 1431547598, "answer_id": 30224247, "question_id": 30224229, "link": "https://stackoverflow.com/questions/30224229/python-dictionary-iteration-order-is-unexpectedly-sorted-why/30224247#30224247", "title": "Python dictionary iteration order is unexpectedly sorted. Why?", "body": "<p>The order is not random, it's arbitrary.  What that means is that you can't depend on it iterating in any particular order.  It may sometimes happen to be in sorted order, but you can't assume it will be.</p>\n"}, {"comments": [{"owner": {"reputation": 28272, "user_id": 45691, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2dcd7166b387588f647219ba7ded993f?s=128&d=identicon&r=PG", "display_name": "Benjamin Wohlwend", "link": "https://stackoverflow.com/users/45691/benjamin-wohlwend"}, "edited": false, "score": 2, "creation_date": 1431547791, "post_id": 30224262, "comment_id": 48552472, "body": "If insertion order is desired, <code>OrderedDict</code> would be helpful <a href=\"https://docs.python.org/3/library/collections.html#collections.OrderedDict\" rel=\"nofollow noreferrer\">docs.python.org/3/library/&hellip;</a>"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 3, "creation_date": 1431547872, "post_id": 30224262, "comment_id": 48552510, "body": "It&#39;s not an optimisation, just a natural side effect of CPython&#39;s hashing of integers. It&#39;s best not to rely on it, though!"}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431548419, "post_id": 30224262, "comment_id": 48552795, "body": "@jonrsharpe: To the extent there&#39;s a meaningful difference, I would argue CPython&#39;s hashing is itself an optimization for this exact use case.  Six of one, half a dozen of the other."}], "tags": [], "owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "is_accepted": true, "score": 2, "last_activity_date": 1431547826, "last_edit_date": 1495540260, "creation_date": 1431547637, "answer_id": 30224262, "question_id": 30224229, "link": "https://stackoverflow.com/questions/30224229/python-dictionary-iteration-order-is-unexpectedly-sorted-why/30224262#30224262", "title": "Python dictionary iteration order is unexpectedly sorted. Why?", "body": "<p>Dictionaries are not in random order.  They are in <a href=\"https://stackoverflow.com/questions/27952058/python-pop-on-unordered-sets/27952095#27952095\">arbitrary</a> order.  In this case, you got lucky and they were sorted.  Tomorrow, they might not be.  If you need randomness, use <code>random</code>.  If you need sorted order, use <code>sorted()</code>.  As @BenjaminWohlwend mentions in the comments, you can use <code>collections.OrderedDict</code> to keep track of insertion order.</p>\n\n<p>In this case, I would guess the dictionary is doing some sort of small-integer-key optimization, acting like an array (e.g. <code>hash(1) == 1</code>).  This is not a guaranteed behavior and might work differently on other Python implementations.</p>\n"}], "owner": {"reputation": 1064, "user_id": 3723031, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/acdd6dacfacd250bc86f735ae6ad4209?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/3723031/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "closed_date": 1431547640, "accepted_answer_id": 30224262, "answer_count": 2, "score": 1, "last_activity_date": 1431547826, "creation_date": 1431547522, "question_id": 30224229, "link": "https://stackoverflow.com/questions/30224229/python-dictionary-iteration-order-is-unexpectedly-sorted-why", "closed_reason": "Duplicate", "title": "Python dictionary iteration order is unexpectedly sorted. Why?", "body": "<p>A dictionary is populated with consecutive integer keys, like this:</p>\n\n<pre><code>d = dict()\nfor i in range(0, 10):\n    d[i] = 100-i\n</code></pre>\n\n<p>Later, the dictionary items are iterated like this:</p>\n\n<pre><code>for k, v in d.items():\n    print k, v\n</code></pre>\n\n<p>The result shows the items are iterated in numerical order:</p>\n\n<pre><code>0 100\n1 99\n2 98\n3 97\n4 96\n5 95\n6 94\n7 93\n8 92\n9 91\n</code></pre>\n\n<p>It turns out, this is the behavior I want, but not what I expected.  I expected dictionary iteration in random order.  What's going on here, and can I depend on this behavior in code released publicly?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "edited": false, "score": 0, "creation_date": 1431548115, "post_id": 30224215, "comment_id": 48552634, "body": "<code>[int(&#39;&#39;.join(x)) for x in zip(*(map(str, i) for i in data))]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 4103367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d455354ca65116d1099661a1ce24dba?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4103367/nick"}, "edited": false, "score": 0, "creation_date": 1431548767, "post_id": 30224290, "comment_id": 48552959, "body": "They&#39;re not actually numbers, that was just an example, should really have used:       &gt;&gt;&gt; [a,b,c,d], [e,f,g,h], [i,j,k,l]"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 17, "user_id": 4103367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d455354ca65116d1099661a1ce24dba?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4103367/nick"}, "edited": false, "score": 0, "creation_date": 1431557511, "post_id": 30224290, "comment_id": 48556885, "body": "@Nick in that case it&#39;s the same idea but a little simpler, see my edit"}, {"owner": {"reputation": 17, "user_id": 4103367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d455354ca65116d1099661a1ce24dba?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4103367/nick"}, "edited": false, "score": 0, "creation_date": 1431558393, "post_id": 30224290, "comment_id": 48557126, "body": "Cheers, that&#39;s exactly what I needed."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 1, "last_activity_date": 1431557460, "last_edit_date": 1431557460, "creation_date": 1431547739, "answer_id": 30224290, "question_id": 30224215, "link": "https://stackoverflow.com/questions/30224215/how-can-i-merge-3-lists-in-python-so-that-the-first-part-of-the-new-list-is-the/30224290#30224290", "title": "How can I merge 3 lists in Python, so that the first part of the new list is the 3 first parts from the original lists", "body": "<p><code>zip</code> the lists elementwise, convert each <code>int</code> to <code>str</code>, <code>join</code> them, then convert back to <code>int</code> within a list comprehension.</p>\n\n<pre><code>&gt;&gt;&gt; l = [[1,2,3,4], [5,6,7,8], [9,10,11,12]]\n&gt;&gt;&gt; [int(''.join(str(i) for i in j)) for j in zip(*l)]\n[159, 2610, 3711, 4812]\n</code></pre>\n\n<p>Edit:<br>\nIf you already have a list of strings</p>\n\n<pre><code>&gt;&gt;&gt; [''.join(i) for i in zip(*l)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1431548359, "last_edit_date": 1431548359, "creation_date": 1431548048, "answer_id": 30224377, "question_id": 30224215, "link": "https://stackoverflow.com/questions/30224215/how-can-i-merge-3-lists-in-python-so-that-the-first-part-of-the-new-list-is-the/30224377#30224377", "title": "How can I merge 3 lists in Python, so that the first part of the new list is the 3 first parts from the original lists", "body": "<pre><code>&gt;&gt;&gt; lists = [1,2,3,4], [5,6,7,8], [9,10,11,12]\n\n&gt;&gt;&gt; [int(''.join(map(str, x)) for x in zip(*lists)]\n[159, 2610, 3711, 4812]\n\n&gt;&gt;&gt; [int('%d' * len(x) % x) for x in zip(*lists)]\n[159, 2610, 3711, 4812]\n\n&gt;&gt;&gt; map(int, map(('{}' * len(lists)).format, *lists))\n[159, 2610, 3711, 4812]\n</code></pre>\n\n<p>(Last one is Python 2, Python 3 needs a <code>list(...)</code> around it.)</p>\n"}, {"tags": [], "owner": {"reputation": 442, "user_id": 4040020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5M77D.jpg?s=128&g=1", "display_name": "M.A.K. Simanto", "link": "https://stackoverflow.com/users/4040020/m-a-k-simanto"}, "is_accepted": false, "score": 0, "last_activity_date": 1431548759, "creation_date": 1431548759, "answer_id": 30224570, "question_id": 30224215, "link": "https://stackoverflow.com/questions/30224215/how-can-i-merge-3-lists-in-python-so-that-the-first-part-of-the-new-list-is-the/30224570#30224570", "title": "How can I merge 3 lists in Python, so that the first part of the new list is the 3 first parts from the original lists", "body": "<pre><code>x,y,z = [1,2,3,4], [5,6,7,8], [9,10,11,12]\nresult = []\nfor i in xrange(len(x)):\n    result.append(''.join(map(str, [x[i],y[i],z[i]]))\n\nIn [233]: result\nOut[233]: ['159', '2610', '3711', '4812']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2647, "user_id": 4060551, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/eqUxo.jpg?s=128&g=1", "display_name": "Burger King", "link": "https://stackoverflow.com/users/4060551/burger-king"}, "is_accepted": false, "score": 0, "last_activity_date": 1431569774, "creation_date": 1431569774, "answer_id": 30228235, "question_id": 30224215, "link": "https://stackoverflow.com/questions/30224215/how-can-i-merge-3-lists-in-python-so-that-the-first-part-of-the-new-list-is-the/30228235#30228235", "title": "How can I merge 3 lists in Python, so that the first part of the new list is the 3 first parts from the original lists", "body": "<p>I have a more compact method.</p>\n\n<p>I think it's more readable and easy to understand. You can refer as below:</p>\n\n<p>This is your var I delcare response:</p>\n\n<pre><code>data = [[1,2,3,4], [5,6,7,8], [9,10,11,12]]\n</code></pre>\n\n<p>Let's invoke <code>map</code> and <code>zip</code> functions.</p>\n\n<pre><code>new_data = zip(*(map(str, i) for i in data))\n</code></pre>\n\n<p>Check the data is renewed to distribute.</p>\n\n<pre><code>print new_data\n# [('1', '5', '9'), ('2', '6', '10'), ('3', '7', '11'), ('4', '8', '12')]\n</code></pre>\n\n<p>You can print new_list when finishing calculating result:</p>\n\n<pre><code>print [int(''.join(x)) for x in new_data]\n# [159, 2610, 3711, 4812]\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 4103367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d455354ca65116d1099661a1ce24dba?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4103367/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 30224290, "answer_count": 4, "score": -1, "last_activity_date": 1431569774, "creation_date": 1431547470, "question_id": 30224215, "link": "https://stackoverflow.com/questions/30224215/how-can-i-merge-3-lists-in-python-so-that-the-first-part-of-the-new-list-is-the", "title": "How can I merge 3 lists in Python, so that the first part of the new list is the 3 first parts from the original lists", "body": "<p>For example, if I have 3 lists such as:</p>\n\n<pre><code>[1,2,3,4], [5,6,7,8], [9,10,11,12]\n</code></pre>\n\n<p>How can I merge them into:</p>\n\n<pre><code>[159,2610,3711,4812]\n</code></pre>\n"}, {"tags": ["python", "html", "flask"], "comments": [{"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 3, "creation_date": 1431547499, "post_id": 30224191, "comment_id": 48552322, "body": "Clearly this means that it is not hitting the block of the <code>request.form[&#39;stm&#39;] == 1</code> conditional, thus I&#39;d say that&#39;s not <code>== 1</code>. My guess? It&#39;s a string, not a number."}, {"owner": {"reputation": 1815, "user_id": 4396198, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/764850e15b50a825921c737694ceafb3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam cd", "link": "https://stackoverflow.com/users/4396198/sam-cd"}, "reply_to_user": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1431547688, "post_id": 30224191, "comment_id": 48552429, "body": "(7, u&#39;fj&#39;, u&#39;jf&#39;, u&#39;2015-05-27&#39;, None, u&#39;cold&#39;, 1, 1, 1, 0, 0, 150.0, 0.0, 0.0, 400.0)"}], "answers": [{"comments": [{"owner": {"reputation": 1815, "user_id": 4396198, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/764850e15b50a825921c737694ceafb3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam cd", "link": "https://stackoverflow.com/users/4396198/sam-cd"}, "edited": false, "score": 0, "creation_date": 1431548242, "post_id": 30224286, "comment_id": 48552701, "body": "Yes, thank you. I was confused because, as you can see from the edit, they are stored in the database as int not strings. But this solved it."}, {"owner": {"reputation": 9341, "user_id": 1377021, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ba1fbbd03fa9766d8ef36d54b25c3569?s=128&d=identicon&r=PG", "display_name": "nathancahill", "link": "https://stackoverflow.com/users/1377021/nathancahill"}, "edited": false, "score": 0, "creation_date": 1431559170, "post_id": 30224286, "comment_id": 48557323, "body": "The database coerces types when it can"}], "tags": [], "owner": {"reputation": 139391, "user_id": 135978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8931e023c82f232d4d02a115710fb8fc?s=128&d=identicon&r=PG", "display_name": "Sean Vieira", "link": "https://stackoverflow.com/users/135978/sean-vieira"}, "is_accepted": true, "score": 0, "last_activity_date": 1431547724, "creation_date": 1431547724, "answer_id": 30224286, "question_id": 30224191, "link": "https://stackoverflow.com/questions/30224191/miscalculation-in-python-code-in-flask-program/30224286#30224286", "title": "Miscalculation in Python code in Flask program", "body": "<p>The issue is that <code>__getitem__</code> returns the values as strings, but you are comparing them to numbers.  In Python 3 this would helpfully have thrown a <code>TypeError</code>, but Python 2 lets you get away with this.  The solution is to either:</p>\n\n<ul>\n<li>Compare the value with a string: `request.form['stm'] == \"1\"</li>\n<li>Convert the value to a number: <code>request.form.get('stm', type=int) == 1</code></li>\n</ul>\n"}], "owner": {"reputation": 1815, "user_id": 4396198, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/764850e15b50a825921c737694ceafb3?s=128&d=identicon&r=PG&f=1", "display_name": "Sam cd", "link": "https://stackoverflow.com/users/4396198/sam-cd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 30224286, "answer_count": 1, "score": 0, "last_activity_date": 1431547981, "creation_date": 1431547371, "last_edit_date": 1431547981, "question_id": 30224191, "link": "https://stackoverflow.com/questions/30224191/miscalculation-in-python-code-in-flask-program", "title": "Miscalculation in Python code in Flask program", "body": "<p>I am using HTML input (text and buttons) to generate values for the following page in my Flask program:</p>\n\n<pre><code>@app.route('/sale/add', methods=['GET','POST'])\ndef add_sale():\n    if request.method == 'POST':\n        comp = 150\n        pen = 0\n        bonus = 0\n        base = 0\n        if request.form['stm'] == 1:\n            if request.form['call'] == 'yes':\n                comp += 150\n                if request.form['ryg'] == 0:\n                    pen += 150\n            elif request.form['call'] == 'no':\n                comp += 100\n                if request.form['ryg'] == 0:\n                    pen += 150\n        else:\n            comp = 150\n            pen = 0\n        if request.form['fee'] == 0:\n            pen += 50\n        if request.form['level'] &gt;= 1:\n            base += 400\n</code></pre>\n\n<p>I am asking for help with the Python code,because no matter what values are input through the HTML form, the variable <code>comp</code> always comes out as <code>150</code> and <code>base</code> always comes out as <code>400</code>. It is not a problem with the HTML tables, because the values are entered into the database properly. It is only the Python variables that I am having trouble with.</p>\n\n<p>For example, </p>\n\n<p><code>request.form['call']</code> is entered into the database as <code>'yes'</code> and <code>request.form['stm']</code> is entered as <code>1</code> but the variable <code>comp</code> is still calculated as <code>150</code> (instead of <code>300</code>)</p>\n\n<p><code>request.form['level']</code> is entered as <code>0</code> but the variable <code>base</code> is still calculated as <code>400</code> (instead of <code>0</code>)</p>\n\n<p>I am not including the HTML or SQL code here because I don't think that is what is affecting the outcome, but if it is helpful, I can edit and add it in.</p>\n\n<p>Sample DB entry:<br><code>(ID,name,date,date2,call,stm,ryg,fee,bonus,base,compPay,penalty,bonusPay,basePay)</code><br><code>(7, u'fj', u'2015-05-27', None, u'yes', 1, 1, 1, 0, 0, 150.0, 0.0, 0.0, 400.0)</code></p>\n"}, {"tags": ["python", "csv", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1431547594, "post_id": 30224143, "comment_id": 48552375, "body": "I don&#39;t understand the CSV format. Can you provide an explicit input/output example?"}, {"owner": {"reputation": 67, "user_id": 3199212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001349575564/picture?type=large", "display_name": "Nelis", "link": "https://stackoverflow.com/users/3199212/nelis"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1431548225, "post_id": 30224143, "comment_id": 48552690, "body": "Done. Thanks in advance!"}], "answers": [{"comments": [{"owner": {"reputation": 4420, "user_id": 1968405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/63a734a216422efeab3b81d058f1b7b5?s=128&d=identicon&r=PG", "display_name": "cwharland", "link": "https://stackoverflow.com/users/1968405/cwharland"}, "edited": false, "score": 0, "creation_date": 1431550054, "post_id": 30224634, "comment_id": 48553597, "body": "FWIW I did the same thing as above with a data set of your size (with 3330 ids) which has substantially more rows and the pivot operation still finished inside of 9 seconds.  Thumbs up to DSM&#39;s pivot solution"}], "tags": [], "owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "is_accepted": true, "score": 7, "last_activity_date": 1431549023, "creation_date": 1431549023, "answer_id": 30224634, "question_id": 30224143, "link": "https://stackoverflow.com/questions/30224143/how-to-speed-up-the-code-searching-through-a-dataframe-takes-hours/30224634#30224634", "title": "How to speed up the code - searching through a dataframe takes hours", "body": "<p>IIUC, all you need is <code>pivot</code>.  If you start from a frame like this:</p>\n\n<pre><code>df = pd.DataFrame(columns=\"InputID,TargetID,Distance\".split(\",\"))\ndf[\"InputID\"] = np.arange(36)//6 + 1\ndf[\"TargetID\"] = np.arange(36) % 6 + 1\ndf[\"Distance\"] = np.random.uniform(0, 100, len(df))\ndf = df[df.InputID != df.TargetID]\ndf = df.sort([\"InputID\", \"Distance\"])\n\n&gt;&gt;&gt; df.head()\n   InputID  TargetID   Distance\n2        1         3   6.407198\n3        1         4  43.037829\n1        1         2  52.121284\n4        1         5  86.769620\n5        1         6  96.703294\n</code></pre>\n\n<p>and we know the InputID and TargetID are unique, we can simply <code>pivot</code>:</p>\n\n<pre><code>&gt;&gt;&gt; pv = df.pivot(index=\"InputID\", columns=\"TargetID\", values=\"Distance\").fillna(0)\n&gt;&gt;&gt; pv\nTargetID          1          2          3          4          5          6\nInputID                                                                   \n1          0.000000  52.121284   6.407198  43.037829  86.769620  96.703294\n2         53.741611   0.000000  27.555296  85.328607  59.561345   8.895407\n3         96.142920  62.532984   0.000000   6.320273  37.809105  69.896308\n4         57.835249  49.350647  38.660269   0.000000   7.151053  45.017780\n5         72.758342  48.947788   4.212775  98.183169   0.000000  15.702280\n6         32.468329  83.979431  23.578347  30.212883  82.580496   0.000000\n&gt;&gt;&gt; pv.to_csv(\"out_dist.csv\", index=False, header=False)\n&gt;&gt;&gt; !cat out_dist.csv\n0.0,52.1212839519,6.40719759732,43.0378290605,86.769620064,96.7032941473\n53.7416111725,0.0,27.5552964592,85.3286070586,59.5613449796,8.89540736892\n96.1429198049,62.5329836475,0.0,6.32027280686,37.8091052942,69.8963084944\n57.8352492462,49.3506467609,38.6602692461,0.0,7.15105257546,45.0177800391\n72.7583417281,48.9477878574,4.21277494476,98.183168992,0.0,15.7022798801\n32.4683285321,83.9794307564,23.578346756,30.2128827937,82.5804959193,0.0\n</code></pre>\n\n<p>The <a href=\"http://pandas.pydata.org/pandas-docs/stable/reshaping.html\" rel=\"noreferrer\">reshaping</a> section of the tutorial might be useful.</p>\n"}], "owner": {"reputation": 67, "user_id": 3199212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001349575564/picture?type=large", "display_name": "Nelis", "link": "https://stackoverflow.com/users/3199212/nelis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 30224634, "answer_count": 1, "score": 6, "last_activity_date": 1431549023, "creation_date": 1431547206, "last_edit_date": 1431548706, "question_id": 30224143, "link": "https://stackoverflow.com/questions/30224143/how-to-speed-up-the-code-searching-through-a-dataframe-takes-hours", "title": "How to speed up the code - searching through a dataframe takes hours", "body": "<p>I've got a CSV file containing the distance between centroids in a GIS-model in the next format:</p>\n\n<pre><code>InputID,TargetID,Distance\n1,2,3050.01327866\n1,7,3334.99565217\n1,5,3390.99115304\n1,3,3613.77046864\n1,4,4182.29900892\n...\n...\n3330,3322,955927.582933\n</code></pre>\n\n<p>It is sorted on origin (<code>InputID</code>) and then on the nearest destination (<code>TargetID</code>).</p>\n\n<p>For a specific modelling tool I need this data in a CSV file, formatted as follows (the numbers are the centroid numbers):</p>\n\n<pre><code>distance1-&gt;1, distance1-&gt;2, distance1-&gt;3,.....distance1-&gt;3330\ndistance2-&gt;1, distance2-&gt;2,.....\n.....\ndistance3330-&gt;1,distance3330-&gt;2....distance3330-&gt;3330\n</code></pre>\n\n<p>So no InputID's or TargetID's, just the distances with the origins on the rows and the destinations on the columns:\n(example for the first 5 origins/destinations)</p>\n\n<pre><code> 0,3050.01327866,3613.77046864,4182.29900892,3390.99115304\n 3050.01327866,0,1326.94611797,1175.10254872,1814.45584129\n 3613.77046864,1326.94611797,0,1832.209595,3132.78725738\n 4182.29900892,1175.10254872,1832.209595,0,1935.55056767\n 3390.99115304,1814.45584129,3132.78725738,1935.55056767,0\n</code></pre>\n\n<p>I've built the next code, and it works. But it is so slow that running it will take days to get the 3330x3330 file. As I am a beginner in Python I think I am overlooking something...</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nfile=pd.read_csv('c:\\\\users\\\\Niels\\\\Dropbox\\\\Python\\\\centroid_distances.csv')\ndf=file.sort_index(by=['InputID', 'TargetID'], ascending=[True, True])\nnumber_of_zones=3330\ntext_file = open(\"c:\\\\users\\\\Niels\\\\Dropbox\\\\Python\\\\Output.csv\", \"w\")\n\nfor origin in range(1,number_of_zones):\n    output_string=''\n    print(origin)\n    for destination in range(1,number_of_zones):\n        if origin==destination:\n            distance=0\n        else:\n            distance_row=df[(df['InputID']==origin) &amp; (df['TargetID'] == destination)] \n            # I guess this is the time-consuming part\n            distance=distance_row.iloc[0]['Distance']\n        output_string=output_string+str(distance)+','\n    text_file.write(output_string[:-1]+'\\n') #strip last ',' of line\ntext_file.close()\n</code></pre>\n\n<p>Could you give me some hints to speed up this code?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1431547239, "post_id": 30224126, "comment_id": 48552178, "body": "Is this homework? I&#39;m sure I saw an almost identical question in the last day or so."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1431547281, "post_id": 30224126, "comment_id": 48552211, "body": "You&#39;re never too old to learn!"}], "owner": {"reputation": 6400, "user_id": 1245418, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7005b0353700331ae983ee90c81b2e69?s=128&d=identicon&r=PG", "display_name": "Evan Zamir", "link": "https://stackoverflow.com/users/1245418/evan-zamir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1431547261, "answer_count": 0, "score": 0, "last_activity_date": 1431547338, "creation_date": 1431547140, "question_id": 30224126, "link": "https://stackoverflow.com/questions/30224126/pythonic-way-to-convert-list-of-tuples-to-dict-of-lists", "closed_reason": "Duplicate", "title": "Pythonic way to convert list of tuples to dict of lists?", "body": "<p>Say I have a list of tuples:</p>\n\n<pre><code>[('M', 'Bob'), ('F', 'Jane'), ('F', 'Mary'), ('M', 'John'), ('M', 'Henry')]\n</code></pre>\n\n<p>I want to convert this to a dict of keys ('M' or 'F') containing lists of names:</p>\n\n<pre><code>{'M':['Bob', 'John', 'Henry'], 'F':['Jane', 'Mary']}\n</code></pre>\n\n<p>Is there any way to do this with a relatively simple comprehension? Clearly, I could initialize a dict containing empty lists for each key, and simply append names into the dict, but I thought there might be a more clever/readable way to do this.</p>\n"}, {"tags": ["python", "selenium", "selenium-chromedriver"], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 3084860, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5464b69858348b9a8b8605d09d931c68?s=128&d=identicon&r=PG&f=1", "display_name": "user3084860", "link": "https://stackoverflow.com/users/3084860/user3084860"}, "edited": false, "score": 0, "creation_date": 1431558294, "post_id": 30225362, "comment_id": 48557106, "body": "Hrm, makes sense. I had some issues with my paths. I fixed it up and am able to fire it up without even specifying a path now. But I still get the same error, sadly ( whether I specify the path or not )."}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 351, "user_id": 3084860, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5464b69858348b9a8b8605d09d931c68?s=128&d=identicon&r=PG&f=1", "display_name": "user3084860", "link": "https://stackoverflow.com/users/3084860/user3084860"}, "edited": false, "score": 0, "creation_date": 1431584147, "post_id": 30225362, "comment_id": 48564108, "body": "@user3084860 yeah, you are right, <code>chrome not reachable</code> is related to smth else. There are number of reasons according to what I&#39;ve googled. Can you check if you get the same error instantiating chrome as just <code>self.webdriver = webdriver.Chrome()</code>? Thanks."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 0, "last_activity_date": 1431551901, "creation_date": 1431551901, "answer_id": 30225362, "question_id": 30223988, "link": "https://stackoverflow.com/questions/30223988/python-selenium-chromedriver-not-reachable/30225362#30225362", "title": "Python Selenium ChromeDriver Not Reachable", "body": "<p>The path you need to specify in the <a href=\"https://selenium-python.readthedocs.org/api.html#selenium.webdriver.chrome.webdriver.WebDriver\" rel=\"nofollow\">first positional or <code>executable_path</code> keyword argument</a> is a <strong>path to the chromedriver, not the chrome itself</strong>:</p>\n\n<pre><code>self.webdriver = webdriver.Chrome('/path/to/chromedriver', chrome_options=chrome_options)\n</code></pre>\n\n<p>If <code>chromedriver</code> is in <a href=\"http://en.wikipedia.org/wiki/PATH_%28variable%29\" rel=\"nofollow\"><code>$PATH</code></a> - you don't need to specify the path at all - this is usually the case.</p>\n"}, {"tags": [], "owner": {"reputation": 342, "user_id": 4757683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QFVYL.jpg?s=128&g=1", "display_name": "Shaik", "link": "https://stackoverflow.com/users/4757683/shaik"}, "is_accepted": false, "score": 0, "last_activity_date": 1431602940, "creation_date": 1431602940, "answer_id": 30236237, "question_id": 30223988, "link": "https://stackoverflow.com/questions/30223988/python-selenium-chromedriver-not-reachable/30236237#30236237", "title": "Python Selenium ChromeDriver Not Reachable", "body": "<p>download the <a href=\"http://chromedriver.storage.googleapis.com/index.html?path=2.15/\" rel=\"nofollow\">chrome driver</a> and use this code</p>\n\n<pre><code>driver = webdriver.Chrome(\"C:\\\\chromedriver.exe\")\n</code></pre>\n"}], "owner": {"reputation": 351, "user_id": 3084860, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5464b69858348b9a8b8605d09d931c68?s=128&d=identicon&r=PG&f=1", "display_name": "user3084860", "link": "https://stackoverflow.com/users/3084860/user3084860"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 7253, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1611561900, "creation_date": 1431546630, "question_id": 30223988, "link": "https://stackoverflow.com/questions/30223988/python-selenium-chromedriver-not-reachable", "title": "Python Selenium ChromeDriver Not Reachable", "body": "<p>So I'm unable to figure out why I am getting this exception. When I run the chromedriver alone I get:</p>\n\n<blockquote>\n  <p>Starting ChromeDriver 2.15.322448 (52179c1b310fec1797c81ea9a20326839860b7d3) on port 9515</p>\n</blockquote>\n\n<p>When I try to run it from a file I get:</p>\n\n<blockquote>\n  <p>WebDriverException: Message: chrome not reachable   (Driver info:\n  chromedriver=2.15.322448\n  (52179c1b310fec1797c81ea9a20326839860b7d3),platform=Linux\n  3.13.0-52-generic x86_64)</p>\n</blockquote>\n\n<p>The code:</p>\n\n<pre><code>if self.proxy:\n    chrome_options = Options()\n    chrome_options.add_argument(\"--proxy-server=http://user:password@proxy.com:8080\")\n    self.webdriver = webdriver.Chrome('/usr/bin/google-chrome', chrome_options=chrome_options)\nelse:\n    self.webdriver = webdriver.Chrome('/usr/bin/google-chrome')\n</code></pre>\n\n<p>I'm running it without the proxy. If I don't supply the path, for some reason it won't be able to find the chrome binary. Not sure where I should go from here.</p>\n"}, {"tags": ["python", "cx-freeze"], "answers": [{"tags": [], "owner": {"reputation": 82, "user_id": 4897375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TZ9Jv.png?s=128&g=1", "display_name": "Lyrenhex", "link": "https://stackoverflow.com/users/4897375/lyrenhex"}, "is_accepted": false, "score": 1, "last_activity_date": 1431548118, "creation_date": 1431548118, "answer_id": 30224404, "question_id": 30223961, "link": "https://stackoverflow.com/questions/30223961/i-am-trying-to-compile-a-program-using-cx-freeze-but-with-a-redistribution-packa/30224404#30224404", "title": "I am trying to compile a program using cx freeze but with a redistribution package can anyone fix line 13", "body": "<pre><code>options = {\"build_exe\":  build_exe_options ,{\"packages\":[\"tkinter\"],\"include_files\":[\"Icon.ico\"]}},\n</code></pre>\n\n<p>This code is wrong, because you shouldn't put the \"build_exe_options ,\" bit.</p>\n\n<p>Corrected:</p>\n\n<pre><code>options = {\"build_exe\": {\"packages\":[\"tkinter\"],\"include_files\":[\"Icon.ico\"]}},\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3933307, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000255533455/picture?type=large", "display_name": "Charlie Waud", "link": "https://stackoverflow.com/users/3933307/charlie-waud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431548118, "creation_date": 1431546549, "question_id": 30223961, "link": "https://stackoverflow.com/questions/30223961/i-am-trying-to-compile-a-program-using-cx-freeze-but-with-a-redistribution-packa", "title": "I am trying to compile a program using cx freeze but with a redistribution package can anyone fix line 13", "body": "<pre><code>import cx_Freeze\nimport sys\n\nbase = None\nif sys.platform == \"win32\":\n    base = \"Win32GUI\"\nbuild_exe_options = {\n\"include_msvcr\": True   #skip error msvcr100.dll missing\n}\nexecutables = [cx_Freeze.Executable(\"Clock.pyw\",base=base,icon=\"Icon.ico\")]\ncx_Freeze.setup(\n    name= \"Clock client\",\n    options = {\"build_exe\":  build_exe_options ,{\"packages\":[\"tkinter\"],\"include_files\":[\"Icon.ico\"]}},\n    version = \"0\",\n    description = \"Clock program\",\n    executables = executables\n\n    )\n</code></pre>\n\n<p>how is line 13 supposed to be formatted as when I try to compile this code I get the error invalid syntax with the curly bracket highlighted what am I missing?</p>\n"}, {"tags": ["python", "django", "authentication", "django-views"], "answers": [{"comments": [{"owner": {"reputation": 1021, "user_id": 823420, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d79a9102ddd51cff8d27c2037f21ef2f?s=128&d=identicon&r=PG", "display_name": "EJay", "link": "https://stackoverflow.com/users/823420/ejay"}, "edited": false, "score": 0, "creation_date": 1431549103, "post_id": 30224274, "comment_id": 48553122, "body": "I&#39;m not concerned with how to properly catch the different failure points, I have that covered. I&#39;m wondering how to bubble the errors up to the view that called authenticate().  I&#39;m realizing now that I didn&#39;t make that overtly clear in the question, so I&#39;ve reworded to make that more clear."}, {"owner": {"reputation": 845, "user_id": 3541922, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6a9795995dd1baf51f24d1382007f134?s=128&d=identicon&r=PG&f=1", "display_name": "MikeVelazco", "link": "https://stackoverflow.com/users/3541922/mikevelazco"}, "edited": false, "score": 0, "creation_date": 1431554694, "post_id": 30224274, "comment_id": 48555841, "body": "The best thing that you coluld do is generate validator methods for the errors before they raise an exception. or maybe should generate the errors and catch the raised exception."}], "tags": [], "owner": {"reputation": 9014, "user_id": 3762142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TgKI9.png?s=128&g=1", "display_name": "Raja Simon", "link": "https://stackoverflow.com/users/3762142/raja-simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1431547679, "creation_date": 1431547679, "answer_id": 30224274, "question_id": 30223904, "link": "https://stackoverflow.com/questions/30223904/how-should-i-handle-different-failure-scenarios-during-django-authenticate/30224274#30224274", "title": "How should I handle different failure scenarios during Django authenticate()?", "body": "<p>In custom method First with <code>try except</code> you can catch the db error</p>\n\n<p>In custom method user object will have <code>check_password</code> method</p>\n\n<pre><code>&gt;&gt;&gt; try:\n     user = User.objects.get(email='lennon@thebeatles.com')\n\n    except:\n        print(\"error with connection\")\n</code></pre>\n\n<p>And after that using <code>check_password</code> method you will get the password error</p>\n\n<pre><code>    &gt;&gt;&gt; user = User.objects.get(email='lennon@thebeatles.com')\n    &gt;&gt;&gt; user\n    &lt;User: john&gt;\n    &gt;&gt;&gt; user.check_password('johnpassword')\n    True\n    &gt;&gt;&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1021, "user_id": 823420, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d79a9102ddd51cff8d27c2037f21ef2f?s=128&d=identicon&r=PG", "display_name": "EJay", "link": "https://stackoverflow.com/users/823420/ejay"}, "is_accepted": true, "score": 0, "last_activity_date": 1431639511, "creation_date": 1431639511, "answer_id": 30247824, "question_id": 30223904, "link": "https://stackoverflow.com/questions/30223904/how-should-i-handle-different-failure-scenarios-during-django-authenticate/30247824#30247824", "title": "How should I handle different failure scenarios during Django authenticate()?", "body": "<p>I ended up using try/except blocks in my View with custom errors that represent the relevant failure.</p>\n"}], "owner": {"reputation": 1021, "user_id": 823420, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d79a9102ddd51cff8d27c2037f21ef2f?s=128&d=identicon&r=PG", "display_name": "EJay", "link": "https://stackoverflow.com/users/823420/ejay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 30247824, "answer_count": 2, "score": -1, "last_activity_date": 1431639511, "creation_date": 1431546350, "last_edit_date": 1431549215, "question_id": 30223904, "link": "https://stackoverflow.com/questions/30223904/how-should-i-handle-different-failure-scenarios-during-django-authenticate", "title": "How should I handle different failure scenarios during Django authenticate()?", "body": "<p>I'm writing a custom authentication backend in Django 1.7 and it could fail for one of two reasons: invalid credentials or some kind of internal error, e.g. a database issue.  Depending on the failure, I want to provide a different error message to the user. IE \"Username or password is incorrect\" for invalid credentials, and something like \"An error occurred, please try again or contact support\".  </p>\n\n<p>Since <code>authenticate()</code> needs to return a User model, I can't just return the error, so what I'm wondering is this: what is the best way to bubble the error up to the View that called <code>authenticate()</code>?</p>\n\n<p>I'm leaning towards throwing an exception from <code>authenticate()</code> with the appropriate error message and then catching that exception in the view.  I think this is the best way to handle it, however I'm a far stretch from a Django expert so I'd love to hear what the community thinks.</p>\n\n<p>Is throwing an exception my best option here, or is there a better way to bubble up authentication failures from <code>authenticate()</code> to the View?  And if throwing an exception is my best option, is there a predefined Django exception that would fit the bill, or should I make my own?</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 1177, "user_id": 3199440, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/733b168bbb2aca39d38b3d94f3b08db9?s=128&d=identicon&r=PG&f=1", "display_name": "Tom M", "link": "https://stackoverflow.com/users/3199440/tom-m"}, "edited": false, "score": 1, "creation_date": 1431548591, "post_id": 30223915, "comment_id": 48552877, "body": "Unfortunately that doesn&#39;t work, I get &#39;UserWarning: To output multiple subplots, the figure containing the passed axes is being cleared   &quot;is being cleared&quot;, UserWarning&#39;  and then the plot that is output still has the axis"}], "tags": [], "owner": {"reputation": 12837, "user_id": 2184364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe15cfa3ec22be57f1762ba905c8eb70?s=128&d=identicon&r=PG", "display_name": "Julien Spronck", "link": "https://stackoverflow.com/users/2184364/julien-spronck"}, "is_accepted": false, "score": 0, "last_activity_date": 1431546397, "creation_date": 1431546397, "answer_id": 30223915, "question_id": 30223758, "link": "https://stackoverflow.com/questions/30223758/how-do-i-make-grid-axes-invisible-for-a-pandas-dataframe-hist/30223915#30223915", "title": "How do I make grid axes invisible for a pandas dataframe hist()?", "body": "<p>You can try:</p>\n\n<pre><code>fig = plt.figure(figsize=figsize)\nax1 = fig.add_subplot(111)\ndf.hist(bins=nbins, ax=ax1)\nax1.grid(b=False)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 941, "user_id": 6514638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96cc7f2f912174739c82085c477ebcfe?s=128&d=identicon&r=PG&f=1", "display_name": "schlump", "link": "https://stackoverflow.com/users/6514638/schlump"}, "is_accepted": false, "score": 4, "last_activity_date": 1476444096, "creation_date": 1476444096, "answer_id": 40041949, "question_id": 30223758, "link": "https://stackoverflow.com/questions/30223758/how-do-i-make-grid-axes-invisible-for-a-pandas-dataframe-hist/40041949#40041949", "title": "How do I make grid axes invisible for a pandas dataframe hist()?", "body": "<p>Even so this thread is kinda old, i'd like to add a working solution because i've just had the same issue.</p>\n\n<p>At least in pandas 0.18</p>\n\n<p>df.hist() takes all possible plotting keywords from pandas.DataFrame.plot</p>\n\n<pre><code>df.hist(grid=False) \n</code></pre>\n\n<p>works easily.. and there is no need of dealing with matplotlib axes.</p>\n"}], "owner": {"reputation": 1177, "user_id": 3199440, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/733b168bbb2aca39d38b3d94f3b08db9?s=128&d=identicon&r=PG&f=1", "display_name": "Tom M", "link": "https://stackoverflow.com/users/3199440/tom-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1257, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1476444096, "creation_date": 1431545784, "last_edit_date": 1431545949, "question_id": 30223758, "link": "https://stackoverflow.com/questions/30223758/how-do-i-make-grid-axes-invisible-for-a-pandas-dataframe-hist", "title": "How do I make grid axes invisible for a pandas dataframe hist()?", "body": "<p>Here is what i want to do, histogram plots of all columns of a dataframe but without the grid axes.  The below code works, but preferably I'd like a more elegant solution (such as passing an argument to hist)</p>\n\n<pre><code>%matplotlib inline\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\nX = np.asarray([50]*25+[30]*10)\nX2 = np.asarray([90]*10+[20]*25)\nX3 = np.asarray([10]*15+[70]*20)\n\ndf = pd.DataFrame(np.vstack([X, X2, X3]).T)\n\n\ndef plot_hists(df, nbins=10, figsize=(8, 8), disable_axis_labels = True):\n    plt.close('all')\n    grid_of_ax_hists = df.hist(bins=nbins, figsize=figsize)\n    if disable_axis_labels:\n        for row in grid_of_ax_hists:\n            for ax in row:\n                ax.xaxis.set_visible(False)\n                ax.yaxis.set_visible(False)\n    plt.show()\n\n    df.hist()\n    plt.subplots()\n\nplot_hists(df, nbins=10, figsize=(8, 8), disable_axis_labels = True)\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1431545945, "post_id": 30223709, "comment_id": 48551493, "body": "You&#39;re not likely to get help here with such a general question. Can you show your current code and give a detailed example of how it doesn&#39;t work as you need it to? With that, you might be able to get an answer. As it is, your question is likely to be closed."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 2, "creation_date": 1431546523, "post_id": 30223709, "comment_id": 48551794, "body": "Eek why are you doing this with a text file instead of a database?"}, {"owner": {"reputation": 31, "user_id": 4382871, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1214f3e8c1f1ed510017b2352594d6d2?s=128&d=identicon&r=PG&f=1", "display_name": "toby ", "link": "https://stackoverflow.com/users/4382871/toby"}, "edited": false, "score": 0, "creation_date": 1431546882, "post_id": 30223709, "comment_id": 48551976, "body": "Well i will look into that, but at present i was thinking of reading the file, opening it as a list and defining through classes and doing it that way.."}], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 9020824, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KonqeHVSanM/AAAAAAAAAAI/AAAAAAAABl4/4u7zsKcObPM/photo.jpg?sz=128", "display_name": "Prashanth K", "link": "https://stackoverflow.com/users/9020824/prashanth-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1512471431, "last_edit_date": 1512471431, "creation_date": 1512466856, "answer_id": 47650339, "question_id": 30223709, "link": "https://stackoverflow.com/questions/30223709/checking-out-books-in-a-library-management-system/47650339#47650339", "title": "Checking out books in a library management system", "body": "<p><strong>class Library</strong></p>\n\n<pre><code>Librarians=[[\"Prashanth\",\"1234\"],[\"Swetha\",\"4321\"]]\nStudents=[[\"RajaShekar\",\"1111\"],[\"Sandeep\",\"2222\"],[\"Manasa\",\"3333\"],[\"Manoj\",\"4444\"],[\"RamaKrishna\",\"5555\"],[\"Teja\",\"6666\"],[\"Bhavani\",\"7777\"],[\"Sandilya\",\"9999\"]]\nRack_Book=[[\"Physics\",\"Einstin\",\"1000\"],[\"Physics\",\"Einstin\",\"1001\"],[\"Physics\",\"Edison\",\"1002\"],[\"Physics\",\"Einstin\",\"1003\"],[\"Physics\",\"Einstin\",\"1004\"],\\\n      [\"Chemistry\",\"Einstin\",\"2000\"],[\"Chemistry\",\"Thamos\",\"2001\"],[\"Chemistry\",\"Einstin\",\"2002\"],[\"Chemistry\",\"Nobel\",\"2003\"],[\"Chemistry\",\"Einstin\",\"2004\"]]\nDispatch_Book=[]\ndef Change_Login(self,name,pin):\n    if [name,pin] not in lib.Librarians:\n        Librarians=self.Librarians.append([name,pin])\n        print(\"Successfully Changed login details\")\n    else:\n         print(\"Entered same details only\")\ndef Update_Book(self,name,author,Bid):\n    if [name,author,Bid] not in lib.Rack_Book:\n\n        Rack_Book=self.Rack_Book.append([name,author,Bid])\n        #print(lib.Rack_Book)\n        print(\"Update Successfully:\",[name,author,Bid])\n    else:\n         print(\"Book already available with same details\")\ndef Details_Books(self):\n    print(\"--------------------------------------------------\")\n    print(\"Book name\",\" \"*9,\"Author Name\",\" \"*9,\"Book ID\")\n    print(\"--------------------------------------------------\")\n\n\n    for i in range(len(lib.Rack_Book)):\n        print(lib.Rack_Book[i][0],\" \"*(20-len(lib.Rack_Book[i][0])),lib.Rack_Book[i][1],\" \"*(20-len(lib.Rack_Book[i][1])),lib.Rack_Book[i][2])\n        print(\"___________________________________________________\")\n\n    print(\"\\nNo of avaliable Books are:\",len(lib.Rack_Book))\n\ndef Add_Students(self,name,pin):\n    if [name,pin] not in lib.Students:\n        Students=self.Students.append([name,pin])\n        print(\"Successfully Added with details\",[name,pin])\n    else:\n         print(\"Students already available with details\") \ndef Delete_Students(self,name,pin):\n    if [name,pin] in lib.Students:\n        Students=self.Students.remove([name,pin])\n        print(\"Successfully deleted details\",[name,pin])\n    else:\n         print(\"No students available with details\")    \ndef Details_Students(self):\n    print(\"-------------------------------\")\n    print(\"Sudent name\",\" \"*9,\"R.No\")\n    print(\"-------------------------------\")\n\n    for i in range(len(lib.Students)):\n        print(lib.Students[i][0],\" \"*(20-len(lib.Students[i][0])),lib.Students[i][1])\n        print(\"_______________________________\")\n    print(\"\\nNo of Students are:\",len(lib.Students))\ndef Collect_Books(self,name,author,Bid):\n    if [name,author,Bid] in lib.Rack_Book:\n        Dispatch_Book=self.Dispatch_Book.append([name,author,Bid])\n        Rack_Book=self.Rack_Book.remove([name,author,Bid])\n        print(\"Book collected succesfully:\" ,[name,author,Bid])\n    else:\n       print(\"Enter details wrong:\")    \ndef Return_Book(self,name,author,Bid):\n    if [name,author,Bid] in lib.Dispatch_Book:\n        Dispatch_Book=self.Dispatch_Book.remove([name,author,Bid])\n        Rack_Book=lib.Rack_Book.append([name,author,Bid])\n        print(\"Return Successfully:\",[name,author,Bid])\n    else:\n       print(\"Enter details wrong:\")\n\n\nlib=Library()\nprint(\"Welcome to Library\")\nwhile(True):\nprint('''Select your Option\n 1:Librarian Login\n 2:Student Login\n 3:Exit''')\n\nopt1=int(input(\"Please Enter your option:\"))\n\nif opt1==1:\n    i=1\n    while (i&lt;4):\n        usrlib=input(\"Please Enter your Name:\")\n        pinlib=input(\"Please Enter your Login PIN:\")\n\n        if [usrlib,pinlib] in lib.Librarians:\n            print(\"Access Granted\")\n            i=5\n            while(True):\n                print('''Select your Option\n                 0:Change Username or Password   \n                 1:Add Books\n                 2:Books Details\n                 3:Add Students\n                 4:Remove Students\n                 5:Students details\n                 6:Exit or Back''')\n                opt2=int(input(\"Please Enter your option:\"))\n                if opt2==0:\n                    usrlib1=input(\"Please Enter User Name to chane:\")\n                    pinlib2=input(\"Please Enter Login PIN to change:\")\n                    lib.Change_Login(usrlib1,pinlib2)\n\n                elif opt2==1:\n                    name=input(\"Please Enter your Book Name:\")\n                    author=input(\"Please Enter your Book Author:\")\n                    Bid=input(\"Please Enter your Book Id:\")\n                    lib.Update_Book(name.capitalize(),author.capitalize(),Bid)\n\n                elif opt2==2:\n                    lib.Details_Books()\n\n                elif opt2==3:\n                    name=input(\"Please Enter Student Name:\")\n                    pin=input(\"Please Enter Student R.No:\")\n                    lib.Add_Students(name.capitalize(),pin)\n                elif opt2==4:\n                    name=input(\"Please Enter Student Name:\")\n                    pin=input(\"Please Enter Student R.No:\")\n                    lib.Delete_Students(name.capitalize(),pin)    \n                elif opt2==5:\n                    lib.Details_Students()\n                elif opt2==6:    \n                    print(\"Back to Menu\")\n                    break\n                else:\n                    print(\"Wrong input\")\n                    continue\n\n\n        else:\n            print(\"Access Denied \\nUser name or PIN Entered wrong\")\n            print(\"\\nYou have more\",(3-i),\"attempts\")\n            i+=1\n            if i==4:\n                print(\"Failed login within 3 attempts\")\nelif opt1==2:\n    i=1\n    while (i&lt;4):\n        usrstd=input(\"Please Enter your Name:\")\n        pinstd=input(\"Please Enter your R.No:\")\n\n        if [usrstd,pinstd] in lib.Students:\n            print(\"Access Granted\")\n            i=5\n            while(True):\n                print('''Select your Option\n                     1:Collect Book\n                     2:Return Books\n                     3:Exit or Back\n                     ''')\n                opt2=int(input(\"Please Enter your option:\"))\n                if opt2==1:\n                    print(\"Availablie Books are:\\n\")\n                    lib.Details_Books()\n                    name=input(\"Please Enter your Book Name:\")\n                    author=input(\"Please Enter your Book Author:\")\n                    Bid=input(\"Please Enter your Book Id:\")\n                    lib.Collect_Books(name.capitalize(),author.capitalize(),Bid)\n                elif opt2==2:\n                    name=input(\"Please Enter your Book Name:\")\n                    author=input(\"Please Enter your Book Author:\")\n                    Bid=input(\"Please Enter your Book Id:\")\n                    lib.Return_Book(name.capitalize(),author.capitalize(),Bid)\n                elif opt2==3:\n                    print(\"Back to Menu\")\n                    break\n\n                else:\n                    print(\"Wrong input\")\n\n\n        else:\n            print(\"Access Denied \\nUser name or PIN Entered wrong\")\n            print(\"\\nYou have more\",(3-i),\"attempts\")\n            i+=1\n            if i==4:\n                print(\"Failed login within 3 attempts\")\n\nelif opt1==3:\n    print(\"Exit Successfully\")\n    break\n\nelse:\n    print(\"Wrong input\")\n</code></pre>\n\n<p>This is Library management program , I take initially some books , some students and two librarians. Librarians can only check book details,student details and they only add or remove student logins. Students login with there details and collect the books from available books ,return books which is taken. If student collect the book , the book details append in to dispatched list and remove from the available list.</p>\n"}], "owner": {"reputation": 31, "user_id": 4382871, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1214f3e8c1f1ed510017b2352594d6d2?s=128&d=identicon&r=PG&f=1", "display_name": "toby ", "link": "https://stackoverflow.com/users/4382871/toby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11611, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1512471431, "creation_date": 1431545555, "last_edit_date": 1431546567, "question_id": 30223709, "link": "https://stackoverflow.com/questions/30223709/checking-out-books-in-a-library-management-system", "title": "Checking out books in a library management system", "body": "<p>I am writing code for a basic library management system, I have a txt file for ID number, book title and then author. I have got to the stage where I have a log in system asking for id numbers etc and I can search for books. Now I need to make it so I can check out the book... I have got it so it will search for the book but then I need to be append the ID number onto the correct book in the txt file. I have got it so at the moment it just appends to the last object. any pointers would be a great help. Thank you. </p>\n\n<p>Present code for searching for books...</p>\n\n<pre><code>while True:\n    n=float(raw_input('Please enter your ID '))\n    if n in range (1000,10000):\n\n    break\nprint 'ID is incorrect, please try again'\n\n\nwith open(\"txt.txt\") as searchfile:\n    found = False\n    while not found:\n        b=str(raw_input('please enter a book '))\n        if b == '':\n        break  # allow the search-loop to quit on no input\n        for line in searchfile:\n            if b in line:\n                print line\n                found = True\n                break\n        else:\n            print 'Please try again'\n            searchfile.seek(0)  # reset file to the beginning for next search\n\n\nsearchfile.close()\n</code></pre>\n\n<p>That all works ^^^ then i got to checking out books and got this following code:</p>\n\n<pre><code>find_book=[]\n    with open('txt.txt') as input_file:\n        lines = [line.rstrip().split('\\t')\n                 for line in input_file.readlines()]\n\n\n\nif(find_book('0',3))==0:\n    print 'availabile' \n</code></pre>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 3, "creation_date": 1431545575, "post_id": 30223703, "comment_id": 48551310, "body": "This is surely an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> if I&#39;ve ever seen one"}, {"owner": {"reputation": 457, "user_id": 4859777, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9cd956cddf8c10f9db0c2b3089292be?s=128&d=identicon&r=PG&f=1", "display_name": "james hughes", "link": "https://stackoverflow.com/users/4859777/james-hughes"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1431546049, "post_id": 30223703, "comment_id": 48551549, "body": "sorry everyone, hopefully I have made my question better :)"}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1431546083, "post_id": 30223703, "comment_id": 48551563, "body": "I bet <code>dict.copy</code> would be useful here."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1431546629, "post_id": 30223703, "comment_id": 48551841, "body": "If it has different values, why call it a copy? Where do the values come from? <i>&quot;There would be no limit on the amount of dictionary copies the user could make&quot;</i> - subject to RAM, presumably..."}, {"owner": {"reputation": 6509, "user_id": 2208850, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/mqtCW.jpg?s=128&g=1", "display_name": "Totem", "link": "https://stackoverflow.com/users/2208850/totem"}, "edited": false, "score": 0, "creation_date": 1431747412, "post_id": 30223703, "comment_id": 48642569, "body": "Removed some cruft. Shortened the lengthy title a bit. clarified language a little."}], "answers": [{"tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": 0, "last_activity_date": 1431548635, "last_edit_date": 1431548635, "creation_date": 1431546679, "answer_id": 30224000, "question_id": 30223703, "link": "https://stackoverflow.com/questions/30223703/make-unlimited-versions-of-a-dict-same-keys-different-values/30224000#30224000", "title": "Make unlimited versions of a dict, same keys, different values", "body": "<pre><code>my_keys = [\"Hello\", \"World\"]\nmy_values1 = [\"Why\", \"that\"]\n\nmy_dict1 = dict(zip(my_keys, my_values1))\n\nmy_dict2 = dict.fromkeys(my_dict1.keys())\n</code></pre>\n\n<p>Variant 1 allows simple construction of any dict from both: a list of keys and values, while my_dict2 presents a varaint to create an \"empty\" (all values are <code>None</code> dict from an existing. You can also mix both (I leave that as an exercise;-).</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1431548032, "post_id": 30224267, "comment_id": 48552588, "body": "Why would you use an interator in-between? keys already returns a view object."}], "tags": [], "owner": {"reputation": 33207, "user_id": 1399491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a1cb3dec3a6f3411ce3460276e44b292?s=128&d=identicon&r=PG", "display_name": "Alex W", "link": "https://stackoverflow.com/users/1399491/alex-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1431549046, "last_edit_date": 1431549046, "creation_date": 1431547654, "answer_id": 30224267, "question_id": 30223703, "link": "https://stackoverflow.com/questions/30223703/make-unlimited-versions-of-a-dict-same-keys-different-values/30224267#30224267", "title": "Make unlimited versions of a dict, same keys, different values", "body": "<p>You can use the <a href=\"https://docs.python.org/3/library/stdtypes.html#dict.fromkeys\" rel=\"nofollow\"><code>dict.fromkeys()</code></a> method:</p>\n\n<pre><code>def copy_keys(your_dict=None):\n    if your_dict != None:\n        return dict.fromkeys(your_dict.keys())\n    else:\n        return dict()\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code>blah = dict((('blah',1),('haha',2)))\n&gt;&gt;&gt;blah\n{'blah': 1, 'haha': 2}\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code>&gt;&gt;&gt; copy_keys(blah)\n{'blah': None, 'haha': None}\n</code></pre>\n\n<p>My example function initalizes the values as <code>None</code> but you can easily adapt it to insert your own values by passing the <code>value</code> parameter to the <code>.fromkeys(seq[,value])</code> method.</p>\n"}], "owner": {"reputation": 457, "user_id": 4859777, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9cd956cddf8c10f9db0c2b3089292be?s=128&d=identicon&r=PG&f=1", "display_name": "james hughes", "link": "https://stackoverflow.com/users/4859777/james-hughes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 30224000, "answer_count": 2, "score": 1, "last_activity_date": 1431747412, "creation_date": 1431545540, "last_edit_date": 1431747412, "question_id": 30223703, "link": "https://stackoverflow.com/questions/30223703/make-unlimited-versions-of-a-dict-same-keys-different-values", "title": "Make unlimited versions of a dict, same keys, different values", "body": "<p>If I have a dictionary, how can I take the keys, and allow a user to make unlimited versions of it with different values for each key? </p>\n"}, {"tags": ["python", "git", "bash", "perforce", "git-p4"], "answers": [{"comments": [{"owner": {"reputation": 950, "user_id": 1756183, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/435d9af13b7782cac178c60f07cbecae?s=128&d=identicon&r=PG&f=1", "display_name": "dag", "link": "https://stackoverflow.com/users/1756183/dag"}, "edited": false, "score": 0, "creation_date": 1431637320, "post_id": 30235312, "comment_id": 48595458, "body": "Perfect that did the trick (the exact change was <code>self.gitStream.write(details[&quot;desc&quot;].decode(&#39;iso-8859-1&#39;).en&zwnj;&#8203;code(&#39;utf8&#39;))</code>). I changed not only the above mentioned line, but also in the def <code>def make_email(self, userid):</code> the line <code>return self.users[userid]</code>."}, {"owner": {"reputation": 142, "user_id": 4481550, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/663bfae7090fa334e809191ad77f67f2?s=128&d=identicon&r=PG&f=1", "display_name": "Micka&#235;l B.", "link": "https://stackoverflow.com/users/4481550/micka%c3%abl-b"}, "edited": false, "score": 0, "creation_date": 1539337542, "post_id": 30235312, "comment_id": 92475228, "body": "Nice tip ! I had the same problems but with changelists filepaths too.. As an exemple, i&#39;ve uploaded the script I used.. <a href=\"https://github.com/Lemick/git-p4-for-perforce-bad-encoding\" rel=\"nofollow noreferrer\">github.com/Lemick/git-p4-for-perforce-bad-encoding</a>"}], "tags": [], "owner": {"reputation": 48881, "user_id": 3978, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d3dac9b66ba5f24a38c09e01830adab?s=128&d=identicon&r=PG", "display_name": "Douglas Leeder", "link": "https://stackoverflow.com/users/3978/douglas-leeder"}, "is_accepted": true, "score": 1, "last_activity_date": 1431600233, "creation_date": 1431600233, "answer_id": 30235312, "question_id": 30223655, "link": "https://stackoverflow.com/questions/30223655/git-p4-message-and-author-encoding/30235312#30235312", "title": "git-p4 message and author encoding", "body": "<p>I suspect the type of <code>details[\"desc\"]</code> is byte string. (str for python2).</p>\n\n<p>Therefore you need to <code>decode</code> it to Unicode before you <code>encode</code> it.</p>\n\n<pre><code>print type(details[\"desc\"])\n</code></pre>\n\n<p>to find out the type.</p>\n\n<pre><code>details[\"desc\"].decode(\"iso-8859-1\").encode(\"UTF-8\")\n</code></pre>\n\n<p>might help to convert from iso-8859-1 to UTF-8.</p>\n"}], "owner": {"reputation": 950, "user_id": 1756183, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/435d9af13b7782cac178c60f07cbecae?s=128&d=identicon&r=PG&f=1", "display_name": "dag", "link": "https://stackoverflow.com/users/1756183/dag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 758, "favorite_count": 0, "accepted_answer_id": 30235312, "answer_count": 1, "score": 4, "last_activity_date": 1431637480, "creation_date": 1431545347, "last_edit_date": 1495542604, "question_id": 30223655, "link": "https://stackoverflow.com/questions/30223655/git-p4-message-and-author-encoding", "title": "git-p4 message and author encoding", "body": "<p>today i am in the position to migrate some pretty old perforce repositories to git. While this is realy interesting there is one thing that caught my eye. All special characters in the commit messages and even the author names are not in the correct encoding.</p>\n\n<p>So i tried to investigate where the problem comes from.</p>\n\n<ul>\n<li>first of all the perforce server does not support unicode, so setting the P4CHARSET has no effect but <code>Unicode clients require a unicode enabled server.</code></li>\n<li>then i checked the output of simple commands like <code>p4 users</code> wich where indeed in ANSI (consulting notepad++, or ISO-8859-1 according to <code>file -bi</code> on redirected output)</li>\n<li>the <code>locale</code> command says LANG=en_US.UTF-8 ...</li>\n</ul>\n\n<p>after all my guess is that all p4 client output is in ISO-8859-1 but git-p4 assumes UTF-8 instead.</p>\n\n<p>I tried rewriting the commit messages with</p>\n\n<pre><code>git filter-branch --msg-filter 'iconv -f iso-8859-1 -t utf-8' -- --all\n</code></pre>\n\n<p>but that doesnt fix the issues, especialy as it is not intended to rewrite the author names.</p>\n\n<p>anyone has a guess how to force the output to be translated to UTF-8 before git-p4 recieves them?</p>\n\n<p><strong>Update:</strong> </p>\n\n<p>i tried to \"overwrite\" the default p4 commands output with a simple shell script that i prepended to PATH</p>\n\n<pre><code>/usr/bin/p4 $@ | iconv -f iso-8859-1 -t utf-8\n</code></pre>\n\n<p>but that destoys the marshalled python objects that are obviously used:</p>\n\n<pre><code>  File \"/usr/local/bin/git-p4\", line 2467, in getBranchMapping\n    for info in p4CmdList(command):\n  File \"/usr/local/bin/git-p4\", line 480, in p4CmdList\n    entry = marshal.load(p4.stdout)\nValueError: bad marshal data\n</code></pre>\n\n<p><strong>Update2:</strong></p>\n\n<p>As seen here <a href=\"https://stackoverflow.com/questions/2276200/changing-default-encoding-of-python\">Changing default encoding of Python?</a> i tried to set python encoding to ascii:</p>\n\n<pre><code>export export PYTHONIOENCODING=\"ascii\"\npython -c 'import sys; print(sys.stdin.encoding, sys.stdout.encoding)'\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>('ascii', 'ascii')\n</code></pre>\n\n<p>but still all messages and authors are not correctly migrated.</p>\n\n<p><strong>Update 3:</strong></p>\n\n<p>Even trying to patch the git-p4.py <code>def commit(self, details, files, branch, parent = \"\")</code> function did not help:\nChanging</p>\n\n<pre><code>self.gitStream.write(details[\"desc\"])\n</code></pre>\n\n<p>to one of those</p>\n\n<pre><code>self.gitStream.write(details[\"desc\"].encode('utf8', 'replace'))\nself.gitStream.write(unicode(details[\"desc\"],'utf8')\n</code></pre>\n\n<p>did just raise:</p>\n\n<pre><code>UnicodeDecodeError: 'ascii' codec can't decode byte 0xc4 in position 29: ordinal not in range(128)\n</code></pre>\n\n<p>as i am no python developer i have no idea what to try next.</p>\n"}, {"tags": ["python", "excel", "office-automation"], "comments": [{"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 0, "creation_date": 1431545312, "post_id": 30223601, "comment_id": 48551135, "body": "Please post an exact extract of your excel file, so that we know what the file looks like. Also, please provide an example of a filename before and after renaming. Further, do your files not have file extensions?"}, {"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 0, "creation_date": 1431547407, "post_id": 30223601, "comment_id": 48552279, "body": "Please edit that information into your original post. Formatting is lost in comments"}], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 1576625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127407968de50b868156e19765db174a?s=128&d=identicon&r=PG", "display_name": "Jesse Lopez", "link": "https://stackoverflow.com/users/1576625/jesse-lopez"}, "is_accepted": false, "score": 0, "last_activity_date": 1431559755, "creation_date": 1431559755, "answer_id": 30226856, "question_id": 30223601, "link": "https://stackoverflow.com/questions/30223601/renaming-multiple-files-on-a-folder-python-of-a-excel-spreadsheet/30226856#30226856", "title": "Renaming multiple files on a folder python of a excel spreadsheet", "body": "<p>Something like this may help using <code>pandas</code> to deal with the Excel spreadsheet.  I'm assuming 6C is relevant from the master spreadsheet.</p>\n\n<pre><code>import pandas\nimport shutil\n\nmaster = pandas.io.excel.read_excel('master.xlsc', 'sheet1')\nfor r in master:\n    key1 = r.split('.')[3]\n    key2 = r.split('.')[4][-2:]\n    old = 'ASSET MOVEMENT %s %s' % (key1, key2)\n    new = r\n    shutil.move(old, new)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4435088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8694c593835c944ed56c57b8d4f39f?s=128&d=identicon&r=PG&f=1", "display_name": "nitcob", "link": "https://stackoverflow.com/users/4435088/nitcob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 531, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431559755, "creation_date": 1431545164, "last_edit_date": 1431548890, "question_id": 30223601, "link": "https://stackoverflow.com/questions/30223601/renaming-multiple-files-on-a-folder-python-of-a-excel-spreadsheet", "title": "Renaming multiple files on a folder python of a excel spreadsheet", "body": "<p>I am pretty new at Python and I want to automate a process that takes a lot of my time but now. I need to rename about 200 + excel files that need to be renamed, but here is the catch they cant be consequential instead they need to be \"vlooked up\" of a master spreadsheet that contains the names and then name the files exactly how its named on the master spreadsheet. \nSo for example: </p>\n\n<pre><code>folder I got:\n\n 1. filexxxxFA9261\n 2. filexxxxFA3040\n 3. filexxxxFA5251\n</code></pre>\n\n<p>and on my master spreadsheet I got:</p>\n\n<pre><code> 1. FA9261.4586.56641.1212\n 2. FA3040.6589.65555.1516\n 3. FA5251.3562.65555.5633\n</code></pre>\n\n<p>basically I just need to vlookup the \"FA###\" string of the master spreadsheet and rename that file according to what says on the master spreadsheet. </p>\n\n<p>Can someone point me in the right direction? I have been trying to look it up everywhere but most renaming is done sequentially and not of a spreadsheet individually.</p>\n\n<p>Here is an exact example on how it should look like: </p>\n\n<p>This is how the file it\u2019s named initially (it varies depending on who sent it):</p>\n\n<p>\u201cASSET MOVEMENT <strong><em>215-156 6C</em></strong>\u201d</p>\n\n<p>And this is how it needs to look like exactly</p>\n\n<p>146543115.NC251.LM5555989565C2-.<strong><em>215-156</em></strong>.NSD6C.556562443.MRO232324564612</p>\n"}, {"tags": ["python", "pdfminer"], "answers": [{"tags": [], "owner": {"reputation": 8237, "user_id": 3489230, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zJINz.jpg?s=128&g=1", "display_name": "NorthCat", "link": "https://stackoverflow.com/users/3489230/northcat"}, "is_accepted": true, "score": 1, "last_activity_date": 1431600976, "creation_date": 1431600976, "answer_id": 30235568, "question_id": 30223595, "link": "https://stackoverflow.com/questions/30223595/how-can-i-adjust-the-word-margin-for-reading-pdfs-with-pdfminer-in-python/30235568#30235568", "title": "How can I adjust the &#39;word_margin&#39; for reading PDFs with pdfminer in python?", "body": "<p><code>word_margin</code> is a parameter of <code>LAParams</code> class. If I understand correctly, the code should look like this:</p>\n\n<pre><code>from pdfminer.pdfpage import PDFPage\nfrom pdfminer.pdfinterp import PDFResourceManager, PDFPageInterpreter\nfrom pdfminer.layout import LAParams\nfrom pdfminer.converter import TextConverter\n\nfrom StringIO import StringIO\n\ndef convert_pdf_to_txt(path):\n    rsrcmgr = PDFResourceManager()\n    retstr = StringIO()\n    codec = 'utf-8'\n\n    word_margin = 1\n    laparams = LAParams(word_margin=word_margin)\n\n    device = TextConverter(rsrcmgr, retstr, codec=codec, laparams=laparams)\n    fp = open(path, 'rb')\n\n\n    interpreter = PDFPageInterpreter(rsrcmgr, device)\n    password = \"\"\n    maxpages = 0\n    caching = True\n    pagenos=set()\n\n    for page in PDFPage.get_pages(fp, pagenos, maxpages=maxpages,password=password,caching=caching, check_extractable=True):\n\n        interpreter.process_page(page)\n\n    text = retstr.getvalue()\n\n    fp.close()\n    device.close()\n    retstr.close()\n    return text\n</code></pre>\n"}], "owner": {"reputation": 657, "user_id": 974763, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dfd062b32e2d2a0c9bb8515c037d6ded?s=128&d=identicon&r=PG", "display_name": "rmp2150", "link": "https://stackoverflow.com/users/974763/rmp2150"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1351, "favorite_count": 0, "accepted_answer_id": 30235568, "answer_count": 1, "score": 2, "last_activity_date": 1431601011, "creation_date": 1431545137, "last_edit_date": 1431601011, "question_id": 30223595, "link": "https://stackoverflow.com/questions/30223595/how-can-i-adjust-the-word-margin-for-reading-pdfs-with-pdfminer-in-python", "title": "How can I adjust the &#39;word_margin&#39; for reading PDFs with pdfminer in python?", "body": "<p>I've tried to manipulate the 'word_margin' with python using the following code but it throws me an error <code>TypeError: get_pages() got an unexpected keyword argument 'word_margin'</code>. PDFminer reads the document fine if I remove the <code>word_margin=word_margin</code>from the arguments. </p>\n\n<p>Code: </p>\n\n<pre><code>def convert_pdf_to_txt(path):\n    rsrcmgr = PDFResourceManager()\n    retstr = StringIO()\n    codec = 'utf-8'\n    laparams = LAParams()\n    device = TextConverter(rsrcmgr, retstr, codec=codec, laparams=laparams)\n    fp = open(path, 'rb')\n    interpreter = PDFPageInterpreter(rsrcmgr, device)\n    password = \"\"\n    maxpages = 0\n    caching = True\n    pagenos=set()\n    word_margin = 1\n\n    for page in PDFPage.get_pages(fp, pagenos, word_margin=word_margin,maxpages=maxpages,password=password,caching=caching, check_extractable=True):\n\n        interpreter.process_page(page)\n\n    text = retstr.getvalue()\n\n    fp.close()\n    device.close()\n    retstr.close()\n    return text\n</code></pre>\n"}, {"tags": ["python", "youtube", "youtube-api", "youtube-data-api"], "owner": {"reputation": 1006, "user_id": 2954232, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/502eb5e6a9c4bc53cdc0f4a7f1f6d93e?s=128&d=identicon&r=PG&f=1", "display_name": "corycorycory", "link": "https://stackoverflow.com/users/2954232/corycorycory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1466775882, "creation_date": 1431545124, "question_id": 30223590, "link": "https://stackoverflow.com/questions/30223590/youtube-api-v3-embed-restrictions", "title": "Youtube API V3 embed restrictions", "body": "<p>I'm using the youtube v3 data API.</p>\n\n<p>On my website, however, I often get videos that are broken, and say:</p>\n\n<p><strong>\"This video contains content from UMG. It is restricted from playback on certain sites\"</strong></p>\n\n<p>How can I check for this restriction using the youtube API?</p>\n\n<ul>\n<li><p>Under the video status, it lists 'embedable' as TRUE.</p></li>\n<li><p>I also tried search() with videoSyndicated=true parameter, but that\ndoesn't seem to work either.</p></li>\n</ul>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1431545144, "post_id": 30223551, "comment_id": 48551054, "body": "This doesn&#39;t uniquely decode. 4 could be romantic horror or zombie romance."}, {"owner": {"reputation": 6021, "user_id": 3688648, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/migGL.jpg?s=128&g=1", "display_name": "Felk", "link": "https://stackoverflow.com/users/3688648/felk"}, "edited": false, "score": 3, "creation_date": 1431545272, "post_id": 30223551, "comment_id": 48551117, "body": "It does uniquely decode. Those are powers of 2, so basically bit-flags. romantic horror is 2+4=6"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1431545577, "post_id": 30223551, "comment_id": 48551311, "body": "0=1 is dangerous. All kinds of math will implode."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1431545678, "post_id": 30223551, "comment_id": 48551357, "body": "Oh, only the number on the right is supposed to count? I thought it was saying that both <code>0</code> and <code>1</code> count as zombie, and both <code>1</code> and <code>2</code> count as horror. That should really be made more clear."}], "answers": [{"comments": [{"owner": {"reputation": 6021, "user_id": 3688648, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/migGL.jpg?s=128&g=1", "display_name": "Felk", "link": "https://stackoverflow.com/users/3688648/felk"}, "edited": false, "score": 1, "creation_date": 1431545565, "post_id": 30223643, "comment_id": 48551302, "body": "For convenience, you do not need to assign the powers of 2 yourself. You could generate a unique bitmask for every N with <code>(1 &lt;&lt; N)</code> in the comprehension"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 6021, "user_id": 3688648, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/migGL.jpg?s=128&g=1", "display_name": "Felk", "link": "https://stackoverflow.com/users/3688648/felk"}, "edited": false, "score": 0, "creation_date": 1431545759, "post_id": 30223643, "comment_id": 48551391, "body": "@Felk Good call, edited my post to use bitshifting in a <code>dict</code> comprehension to generate the keys."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 5, "last_activity_date": 1431545743, "last_edit_date": 1431545743, "creation_date": 1431545324, "answer_id": 30223643, "question_id": 30223551, "link": "https://stackoverflow.com/questions/30223551/creating-a-decode-algorithm/30223643#30223643", "title": "Creating a decode algorithm", "body": "<p>You can list all the genres</p>\n\n<pre><code>&gt;&gt;&gt; genres = ['zombie', 'horror', 'romance', 'action', 'medieval']\n</code></pre>\n\n<p>Then make a the mapping of movies by left shifting (<code>&lt;&lt;</code>) by the index</p>\n\n<pre><code>&gt;&gt;&gt; codes = {1 &lt;&lt; index : value for index, value in enumerate(genres)}\n&gt;&gt;&gt; codes \n{1: 'zombie', 2: 'horror', 4: 'romance', 8: 'action', 16: 'medieval'}\n</code></pre>\n\n<p>Then use bit-wise AND to find the matching genres</p>\n\n<pre><code>&gt;&gt;&gt; user = 7    # which is 1 + 2 + 4, or 0b111\n&gt;&gt;&gt; [movie for key,movie in codes.items() if user &amp; key]\n['zombie', 'horror', 'romance']\n</code></pre>\n\n<p>You just need to make sure that if you were to bitwise XOR your keys together, you would get back all 1's</p>\n"}, {"comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1431546098, "post_id": 30223794, "comment_id": 48551573, "body": "I&#39;d use <code>1&lt;&lt;i</code> instead of <code>2**i</code>, it makes it clearer that this is a bit operation and it should be faster (not that it matters)."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1431546262, "post_id": 30223794, "comment_id": 48551651, "body": "I think more people are familiar with powers than with bit shifts. Though honestly I just couldn&#39;t remember whether <code>&lt;&lt;</code> has higher preference than <code>&amp;</code> :-P"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1431546359, "post_id": 30223794, "comment_id": 48551711, "body": "Good point about precedence, but I often just litter my code with superfluous parentheses and stop worrying about it."}], "tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 3, "last_activity_date": 1431546721, "last_edit_date": 1431546721, "creation_date": 1431545925, "answer_id": 30223794, "question_id": 30223551, "link": "https://stackoverflow.com/questions/30223551/creating-a-decode-algorithm/30223794#30223794", "title": "Creating a decode algorithm", "body": "<p>Shamelessly stolen from Cyber and modified to not use a dictionary:</p>\n\n<pre><code>&gt;&gt;&gt; genres = 'zombie', 'horror', 'romance', 'action', 'medieval'\n&gt;&gt;&gt; user = 7\n&gt;&gt;&gt; [genre for i, genre in enumerate(genres) if user &amp; 2**i]\n['zombie', 'horror', 'romance']\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4701682, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f4ac5c2284828ec3a3148d1e36594474?s=128&d=identicon&r=PG&f=1", "display_name": "stacker", "link": "https://stackoverflow.com/users/4701682/stacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1459279664, "creation_date": 1431544958, "last_edit_date": 1459279664, "question_id": 30223551, "link": "https://stackoverflow.com/questions/30223551/creating-a-decode-algorithm", "title": "Creating a decode algorithm", "body": "<p>How can I create an algorithm to decode a number (code) and associate it with a specific genre?</p>\n\n<p>For example: </p>\n\n<pre><code>0= 1 =zombie\n\n1= 2 =horror\n\n2= 4 =romance\n\n3= 8 =action\n\n4= 16 =medieval\n</code></pre>\n\n<p>This is my genres list. The reason it is set up like this is, say the user enters 3 then what would come out is zombie, horror because 1+2=3.</p>\n\n<p>How do I create a function that will take a code (int value) and return a list of genres that associate with it. If the code is (12) I need the function to return the list L=[4,8]. </p>\n\n<p>What I have figured out so far! I know that if the user enters 12 then 12 is less than 16 (the next power of 2) and is the previous 2 genres added together. I just don't know how to translate that into my code.</p>\n\n<pre><code>def _decode(self, code):\n  codes=[] #need and empty list to add the values to\n  #need code that will take the code value and associate it to its respective genres. \n  return codes\n</code></pre>\n\n<p>What i have done so far is this:</p>\n\n<pre><code>Def _decode(self, code):\n\ncodes=[]\n\nfor i in range (0,10):\n\n i = 2**i\n\n if i==code:\n\ncodes.append(i)\n</code></pre>\n\n<p>What this is doing is, if the user enters 2 and 2 is already a power of 2 and can only be associated with 1 genera it just appends that number to the list codes=[].</p>\n\n<p>What if the user enters a 3? I know that 3 is less then the next power of 2 with is 4 and is the previous 2 numbers added together. How can I split that 3 up into a 1 and a 2 and append both those values into the codes=[] List?</p>\n"}, {"tags": ["python", "sorting", "python-3.x"], "comments": [{"owner": {"reputation": 3409, "user_id": 89346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e87907eb1ef96e4197751d45d56f7?s=128&d=identicon&r=PG", "display_name": "shantanoo", "link": "https://stackoverflow.com/users/89346/shantanoo"}, "edited": false, "score": 0, "creation_date": 1431546661, "post_id": 30223532, "comment_id": 48551868, "body": "Instead of &#39;name_age.write(repr(Name_Age),&#39;\\n&#39;)&#39; you can use &#39;name_age.write(&quot;{},{}\\n&quot;.format(Name, Age))&#39;. No need of expr."}, {"owner": {"reputation": 12668, "user_id": 95852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e215c7362074d0346612a10d3a89be9e?s=128&d=identicon&r=PG", "display_name": "John Y", "link": "https://stackoverflow.com/users/95852/john-y"}, "edited": false, "score": 0, "creation_date": 1431552082, "post_id": 30223532, "comment_id": 48554652, "body": "Not <i>exactly</i> duplicate, but definitely related, and very likely useful: <a href=\"http://stackoverflow.com/questions/4836710/does-python-have-a-built-in-function-for-string-natural-sort\" title=\"does python have a built in function for string natural sort\">stackoverflow.com/questions/4836710/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4455077, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/PMUa0.jpg?s=128&g=1", "display_name": "Hanzalah Ravat", "link": "https://stackoverflow.com/users/4455077/hanzalah-ravat"}, "edited": false, "score": 0, "creation_date": 1431601122, "post_id": 30223568, "comment_id": 48573074, "body": "I have tried it but I got the following error:Traceback (most recent call last):   File &quot;N:\\1Work\\Age.py&quot;, line 26, in &lt;module&gt;     print(sorted(name_age, key = lambda i : int(i.split()[1]))) io.UnsupportedOperation: not readable"}, {"owner": {"reputation": 13, "user_id": 4455077, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/PMUa0.jpg?s=128&g=1", "display_name": "Hanzalah Ravat", "link": "https://stackoverflow.com/users/4455077/hanzalah-ravat"}, "edited": false, "score": 0, "creation_date": 1431601175, "post_id": 30223568, "comment_id": 48573099, "body": "My Structure is: Hanzalah, 14"}, {"owner": {"reputation": 13, "user_id": 4455077, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/PMUa0.jpg?s=128&g=1", "display_name": "Hanzalah Ravat", "link": "https://stackoverflow.com/users/4455077/hanzalah-ravat"}, "edited": false, "score": 0, "creation_date": 1432058834, "post_id": 30223568, "comment_id": 48760643, "body": "That works... It displays the ages from lowest to highest. I want to know how to sort and display the ages from Highest to Lowest"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 13, "user_id": 4455077, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/PMUa0.jpg?s=128&g=1", "display_name": "Hanzalah Ravat", "link": "https://stackoverflow.com/users/4455077/hanzalah-ravat"}, "edited": false, "score": 0, "creation_date": 1432059929, "post_id": 30223568, "comment_id": 48761277, "body": "@HanzalahRavat You can use the <code>reverse</code> keyword in <code>sorted</code>. See my edit."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 2, "last_activity_date": 1432059914, "last_edit_date": 1432059914, "creation_date": 1431545027, "answer_id": 30223568, "question_id": 30223532, "link": "https://stackoverflow.com/questions/30223532/sorting-numbers-when-words-are-present/30223568#30223568", "title": "Sorting Numbers when Words are present", "body": "<p>You'd have to show us the structure of your file, but if it's something like</p>\n\n<pre><code>bob 18\nsteve 28\nmike 39\ntom 22\n</code></pre>\n\n<p>You could do</p>\n\n<pre><code>print(sorted(name_age, key = lambda i : int(i.split()[1])))\n</code></pre>\n\n<p>This works by splitting each line on whitespace, converting it to an <code>int</code>, then sorting by the number in element <code>[1]</code> instead of the first element which is their name.</p>\n\n<p>Edit:<br>\nWith the format <code>Hanzalah, 14</code> you would use</p>\n\n<pre><code>print(sorted(name_age, key = lambda i : int(i.split(',')[1])))\n</code></pre>\n\n<p>Edit 2:<br>\nTo sort highest to lowest, use the <code>reverse</code> argument</p>\n\n<pre><code>print(sorted(name_age, key = lambda i : int(i.split(',')[1]), reverse=True))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 816, "user_id": 565946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/56c4fc7140c11b3a8adf9da0dac146ff?s=128&d=identicon&r=PG", "display_name": "Paul Rigor", "link": "https://stackoverflow.com/users/565946/paul-rigor"}, "is_accepted": false, "score": 0, "last_activity_date": 1432062751, "creation_date": 1432062751, "answer_id": 30334234, "question_id": 30223532, "link": "https://stackoverflow.com/questions/30223532/sorting-numbers-when-words-are-present/30334234#30334234", "title": "Sorting Numbers when Words are present", "body": "<p>You could use a dictionary reader (DictReader) from the csv module to separate reading the input file contents and processing its contents. We use a lambda function to provide flexibility in choosing which field to sort by. Assuming the same format as @Cyber, you can use the following example.</p>\n\n<pre><code>#Sample input file, eg, /tmp/sample.csv\nname,age\nbob,12\nannie,20\nsuzie,5\nwrothgar,15\n</code></pre>\n\n<p>Here's the bit of code:</p>\n\n<pre><code>import csv\n\n# You can change the path to your file accordingly\nfinput = file(\"/tmp/sample.csv\",'r')\n\n# Usually good to have this explicitly. You can use comma or tab, etc\ndelimiter=','\n\n# Remove new line, then split the first line into the two fields\nheader = finput.readline().strip().split(delimiter) \n\n# Let's create our reader, and extract the entries in the file\nreader = csv.DictReader(finput, fieldnames=header, delimiter=delimiter)\nentries = [entry for entry in reader]\n\n# Perform additional type checking for your input and even cast the 'age' value here instead of in the lambda function below\n\n# Let's sort using sorted its two parameters 'key' and 'reverse'\nsorted(entries, key=lambda entry: int(entry['age']))  # Sort using the age field\nsorted(entries, key=lambda entry: int(entry['age']), reverse=True) # Sort using the age field, in reverse order\nsorted(entries, key=lambda entry: entry['name']))  # Sort using the name field\n</code></pre>\n\n<p>Hopefully this gives you intuition on using the 'key' parameter of sorted where the comparator of the sorted function uses the value passed to 'key'. Using the utility classes of the csv module should help out with other data processing projects, e.g., DictWriter.</p>\n\n<p>Goodluck!</p>\n"}], "owner": {"reputation": 13, "user_id": 4455077, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/PMUa0.jpg?s=128&g=1", "display_name": "Hanzalah Ravat", "link": "https://stackoverflow.com/users/4455077/hanzalah-ravat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 30223568, "answer_count": 2, "score": 0, "last_activity_date": 1435063217, "creation_date": 1431544862, "question_id": 30223532, "link": "https://stackoverflow.com/questions/30223532/sorting-numbers-when-words-are-present", "title": "Sorting Numbers when Words are present", "body": "<p>I have been trying to create a program which asks for a name and an age and stores them to a text file. My code is as follows:</p>\n\n<pre><code>name_age=open('Name Age.txt','a')\nprint('1. Writing to a text file')\nprint('2. Reading a text file')\nprint('3. Sorting')\nChoice=int(input('What do you want to do: '))\n\nif Choice==1:\n    Name=input('What is the Name: ')\n    Age=int(input('What is the age: '))\n    Name_Age=Name,Age\n    name_age.write(repr(Name_Age),'\\n')\n    print('Written result')\nif Choice==2:\n    name_age=open('Name Age.txt','r')\n    print('Reading the file')\n    print(name_age.read(1000))\nif Choice==3:\n    print('Sorting')\n    print('1. Alphabetical')\n    print('2. Age')\n    Choice=int(input('How do you want to sort(1/2): '))\n    if Choice==1:\n        print('Sorting Alphabetically')\n        print(sorted(name_age))\n    if Choice==2:\n        print('Help Me HERE')\n    #I Need Help here... How do you sort the textfile with the ages???\n</code></pre>\n\n<p>Then my code has the ability to allow the user to read the file from the program and sort the results. I can sort the results alphabetically but I cannot sort them in age order. Can you please help me do this</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 1873, "user_id": 1725553, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-CsRuoQmwqLo/AAAAAAAAAAI/AAAAAAAAAFM/hESpKGJTWZo/photo.jpg?sz=128", "display_name": "paddyg", "link": "https://stackoverflow.com/users/1725553/paddyg"}, "edited": false, "score": 0, "creation_date": 1431545235, "post_id": 30223528, "comment_id": 48551101, "body": "if there are 16 columns why do you slice 8:15? Remember python slices go up the index before the end! i.e 8:16 -&gt; 8,9,10,11,12,13,14,15"}], "answers": [{"tags": [], "owner": {"reputation": 21161, "user_id": 293594, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/236ff5ec4ac5714b8f28542d5299ec90?s=128&d=identicon&r=PG", "display_name": "xnx", "link": "https://stackoverflow.com/users/293594/xnx"}, "is_accepted": true, "score": 3, "last_activity_date": 1431545205, "creation_date": 1431545205, "answer_id": 30223613, "question_id": 30223528, "link": "https://stackoverflow.com/questions/30223528/python-numpy-array-data-manipulation/30223613#30223613", "title": "python numpy array data manipulation", "body": "<p><code>z[:,8:15]</code> indexes <em>up to but not including</em> the last column (the 16th, indexed at <code>z[:,15]</code>).</p>\n\n<p>Use <code>z[:, 8:]</code> or <code>z[:,8:16]</code></p>\n"}], "owner": {"reputation": 189, "user_id": 3285014, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/ffccdc8844598b5c3b6fa703083f777b?s=128&d=identicon&r=PG&f=1", "display_name": "user3285014", "link": "https://stackoverflow.com/users/3285014/user3285014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 30223613, "answer_count": 1, "score": 3, "last_activity_date": 1431545205, "creation_date": 1431544833, "question_id": 30223528, "link": "https://stackoverflow.com/questions/30223528/python-numpy-array-data-manipulation", "title": "python numpy array data manipulation", "body": "<p>I have 2 csv files with 16 columns and 146 rows.\nI am trying to do the following (<em>This is not actual data</em>):</p>\n\n<pre><code>a = [1, 2, 3, 4, 5, 6]\nb = [10, 20, 30, 40, 50, 60]\nfinal output of the script intended:\nx = [ 11, 22, 33, 22, 22.5, 33] # basically the last half of the array needs to be divided by 2\n</code></pre>\n\n<p>I have tried out the follwoing code:</p>\n\n<pre><code>import csv\nimport numpy as np\nimport sys    \ndata = np.genfromtxt('./test1.csv', dtype=float, delimiter=',')\ndata_sys = np.genfromtxt('.test2.csv', dtype=float, delimiter=',')\nz = np.add (data, data_sys)\nnp.savetxt(\"new_before_avg.csv\", z, delimiter= ',')\n\nz[:,8:15] = z[:,8:15]/2\n\nnp.savetxt(\"new_after_avg.csv\"], z, delimiter= \",\")\n</code></pre>\n\n<p>Problem is, I am seeing the final output as expected except for the last column (<em>column 15</em>). It is just added up, did not divide by 2. </p>\n\n<p>I thought my indexing was right. Please help.</p>\n"}, {"tags": ["python", "dns", "getdnsapi"], "comments": [{"owner": {"reputation": 1743, "user_id": 1884140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z8kyn.jpg?s=128&g=1", "display_name": "1.618", "link": "https://stackoverflow.com/users/1884140/1-618"}, "edited": false, "score": 0, "creation_date": 1431547718, "post_id": 30223526, "comment_id": 48552445, "body": "What kind of data structure is the address in?  Is it 4 bytes as a single 32-bit int?  Or a List, or a <code>bytes()</code> object or a struct?"}, {"owner": {"reputation": 24093, "user_id": 51167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/144ac0e81f73797307e5179df6ecd1f4?s=128&d=identicon&r=PG", "display_name": "vy32", "link": "https://stackoverflow.com/users/51167/vy32"}, "reply_to_user": {"reputation": 1743, "user_id": 1884140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z8kyn.jpg?s=128&g=1", "display_name": "1.618", "link": "https://stackoverflow.com/users/1884140/1-618"}, "edited": false, "score": 0, "creation_date": 1431547887, "post_id": 30223526, "comment_id": 48552514, "body": "It appears to be bytes()."}], "answers": [{"comments": [{"owner": {"reputation": 24093, "user_id": 51167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/144ac0e81f73797307e5179df6ecd1f4?s=128&d=identicon&r=PG", "display_name": "vy32", "link": "https://stackoverflow.com/users/51167/vy32"}, "edited": false, "score": 0, "creation_date": 1431690000, "post_id": 30224890, "comment_id": 48616640, "body": "This works, but I would rather do it within the getdnsapi framework."}], "tags": [], "owner": {"reputation": 1743, "user_id": 1884140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z8kyn.jpg?s=128&g=1", "display_name": "1.618", "link": "https://stackoverflow.com/users/1884140/1-618"}, "is_accepted": true, "score": 1, "last_activity_date": 1431689926, "last_edit_date": 1431689926, "creation_date": 1431550017, "answer_id": 30224890, "question_id": 30223526, "link": "https://stackoverflow.com/questions/30223526/how-do-you-make-an-ipv4-address-printable-with-the-getdnsapi-python-api/30224890#30224890", "title": "How do you make an IPv4 address printable with the getdnsapi Python API?", "body": "<pre><code>bin_addr = results.reply_tree.reply[n]['answer']['rdata']['ipv4_address']\nstring_addr = '.'.join(map(str, map(ord, bin_addr)))\n</code></pre>\n"}], "owner": {"reputation": 24093, "user_id": 51167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/144ac0e81f73797307e5179df6ecd1f4?s=128&d=identicon&r=PG", "display_name": "vy32", "link": "https://stackoverflow.com/users/51167/vy32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 30224890, "answer_count": 1, "score": 0, "last_activity_date": 1537979358, "creation_date": 1431544831, "last_edit_date": 1537979358, "question_id": 30223526, "link": "https://stackoverflow.com/questions/30223526/how-do-you-make-an-ipv4-address-printable-with-the-getdnsapi-python-api", "title": "How do you make an IPv4 address printable with the getdnsapi Python API?", "body": "<p>I'm working with the new <a href=\"https://getdnsapi.net/\" rel=\"nofollow noreferrer\">getdns</a> Python API.</p>\n\n<p>I'm specifically trying to get <code>DNSSEC_BOGUS</code> answers. To do this I need to look at the <code>results.reply_tree.reply[n]['answer']['rdata']['ipv4_address']</code> elements. This is a 4-byte binary representation of the IPv4 address. Is there an easy way within getdns to change this into a printable IPv4 address?</p>\n\n<p>I don't want to use the <code>results.just_address_answers</code> field, because there is no guarantee that the addresses are in the same order.</p>\n\n<p>Here is my sample code:</p>\n\n<pre><code>import getdns, sys\ndef get_ip(hostname, ctx, extensions):\n    print(\"host: {} extensions: {}\".format(hostname, extensions))\n    results = ctx.address(name=hostname, extensions=extensions)\n    print(\"addresses:\")\n    for addr in results.just_address_answers:\n        print(\"  {}\".format(addr['address_data']))\n    print(\"replies:\")\n    for reply in results.replies_tree:\n        for a in reply['answer']:\n            if a['type']==getdns.RRTYPE_A:\n                try:\n                    print(\"  type={} data={} dnssec_status={}\".format(a['type'], a['rdata']['ipv4_address'], reply['dnssec_status']))\n                except KeyError:\n                    print(\"  no dnssec_status\")\n    print(\"\")\n\nif __name__==\"__main__\":\n    print(\"getdns.DNSSEC_SECURE={}\".format(getdns.DNSSEC_SECURE))\n    print(\"getdns.DNSSEC_INDETERMINATE={}\".format(getdns.DNSSEC_INDETERMINATE))\n    print(\"getdns.DNSSEC_INSECURE={}\".format(getdns.DNSSEC_INSECURE))\n    print(\"getdns.DNSSEC_BOGUS={}\".format(getdns.DNSSEC_BOGUS))\n    failed = 'www.dnssec-failed.org'\n    ctx = getdns.Context()\n    get_ip(failed, ctx, {})\n    get_ip(failed, ctx, {'dnssec_return_status' : getdns.EXTENSION_TRUE })\n    get_ip(failed, ctx, {\"dnssec_return_validation_chain\" : getdns.EXTENSION_TRUE})\n</code></pre>\n\n<p>Although this works, I really want the <code>data=</code> that prints to print an IPv4 address, not just four binary bytes.</p>\n"}, {"tags": ["python", "bokeh"], "answers": [{"comments": [{"owner": {"reputation": 4069, "user_id": 3413239, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hM6rq.jpg?s=128&g=1", "display_name": "pg2455", "link": "https://stackoverflow.com/users/3413239/pg2455"}, "edited": false, "score": 0, "creation_date": 1431800509, "post_id": 30226201, "comment_id": 48656717, "body": "Can you also post the picture of your plot. Because interpreting it from the code seems to me hard. I am in to the same situation right now. This question is life saver for me."}, {"owner": {"reputation": 800, "user_id": 216880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e972f78d5037ffa8d955f003180c0a0?s=128&d=identicon&r=PG", "display_name": "osdf", "link": "https://stackoverflow.com/users/216880/osdf"}, "edited": false, "score": 1, "creation_date": 1466668667, "post_id": 30226201, "comment_id": 63415616, "body": "Would it have been an option to simply plot multiple single lines, as e.g. given in this code snippet? <a href=\"https://github.com/bokeh/bokeh/issues/3454#issuecomment-168238796\" rel=\"nofollow noreferrer\">github.com/bokeh/bokeh/issues/3454#issuecomment-168238796</a>"}], "tags": [], "owner": {"reputation": 91, "user_id": 4670598, "user_type": "registered", "profile_image": "https://graph.facebook.com/626186242/picture?type=large", "display_name": "Markus Lippus", "link": "https://stackoverflow.com/users/4670598/markus-lippus"}, "is_accepted": true, "score": 3, "last_activity_date": 1431851470, "last_edit_date": 1431851470, "creation_date": 1431555789, "answer_id": 30226201, "question_id": 30223459, "link": "https://stackoverflow.com/questions/30223459/bokeh-hovertool-in-multiple-line-plot/30226201#30226201", "title": "Bokeh hovertool in multiple_line plot", "body": "<p>I figured it out on my own. It turns out that version 0.8.2 of Bokeh doesn't allow hovertool for lines so I did the same thing using quads.</p>\n\n<pre><code>from bokeh.plotting import figure, HBox, output_file, show, VBox, ColumnDataSource\nfrom bokeh.models import Range1d, HoverTool\nfrom collections import OrderedDict\nimport random\n\n\nxscale = zip(levelsdf2[('series1', 'Start')], levelsdf2[('series1', 'Stop')])\nxscale2 = zip(levelsdf2[('series2', 'Start')], levelsdf2[('series2', 'Stop')])\nyscale2 = zip([9.2 for x in range(len(levelsdf2[(name, 'Start')]))],[9.2 for x in range(len(levelsdf2[(name, 'Start')]))])\n\nTOOLS=\"pan,wheel_zoom,box_zoom,reset,hover\"\noutput_file(\"linesandquads.html\")\nhover_tips = levelsdf2.index.values\ncolors = [\"#%06x\" % random.randint(0,0xFFFFFF) for c in range(len(xscale))]\nproc1 = 'Log'\nproc2 = 'MazF2h'\nexpression1 = levelsdf2[(proc1, 'Level')]\nexpression2 = levelsdf2[(proc2, 'Level')]\nsource = ColumnDataSource(\n    data=dict(\n        start=[min(xscale[x]) for x in range(len(xscale))],\n        stop=[max(xscale[x]) for x in range(len(xscale))],\n        start2=[min(xscale2[x]) for x in range(len(xscale2))],\n        stop2=[max(xscale2[x]) for x in range(len(xscale2))],\n        gene=hover_tips,\n        colors=colors,\n        expression1=expression1,\n        expression2=expression2,\n\n    )\n)\n\n\np1 = figure(plot_width=900, plot_height=500,y_range=[8,10.5],tools=TOOLS)\np1.quad(left=\"start\", right=\"stop\", top=[9.211 for x in range(len(xscale))],\n        bottom = [9.209 for x in range(len(xscale))], source=source, color=\"colors\")\n\np1.multi_line(xscale2,yscale2, source=source, color=\"colors\", line_width=20)\n\n\nhover = p1.select(dict(type=HoverTool))\n\nhover.tooltips = OrderedDict([\n    (proc1+\" (start,stop, expression)\", \"(@start| @stop| @expression1)\"),\n\n    (\"Gene\",\"@gene\"),\n])\n\nshow(p1)\n</code></pre>\n\n<p>Works like a charm. </p>\n\n<p><strong>EDIT:</strong>  Added a picture of the result, as requested and edited code to match the screenshot posted.</p>\n\n<p><img src=\"https://i.stack.imgur.com/boPB2.png\" alt=\"Hovertool for lines - workaround using quads\"></p>\n\n<p>It's not the best solution as it turns out it's not all that easy to plot several series of quads on one plot. It's probably possible but as it didn't matter much in my use case I didn't investigate too vigorously.</p>\n\n<p>As all genes are represented on all series at the same place I just added tooltips for all series to the quads and plotted the other series as multi_line plots on the same figure.</p>\n\n<p>This means that if you hovered on the top line at 9.21 you'd get tooltips for the line at 9.2 as well, but If you hovered on the 9.2 line you wouldn't get a tooltip at all.</p>\n"}], "owner": {"reputation": 91, "user_id": 4670598, "user_type": "registered", "profile_image": "https://graph.facebook.com/626186242/picture?type=large", "display_name": "Markus Lippus", "link": "https://stackoverflow.com/users/4670598/markus-lippus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1991, "favorite_count": 2, "accepted_answer_id": 30226201, "answer_count": 1, "score": 5, "last_activity_date": 1431851470, "creation_date": 1431544567, "question_id": 30223459, "link": "https://stackoverflow.com/questions/30223459/bokeh-hovertool-in-multiple-line-plot", "title": "Bokeh hovertool in multiple_line plot", "body": "<p>I'm new to bokeh and I just jumped right into using hovertool as that's why I wanted to use bokeh in the first place.\nNow I'm plotting genes and what I want to achieve is multiple lines with the same y-coordinate and when you hover over a line you get the name and position of this gene.</p>\n\n<p>I have tried to mimic <a href=\"http://bokeh.pydata.org/en/latest/tutorial/solutions/gallery/hover.html\" rel=\"nofollow\">this</a> example, but for some reason the I can't even get it to show coordinates.</p>\n\n<p>I'm sure that if someone who actually knows their way around bokeh looks at this code, the mistake will be apparent and I'd be very thankful if they showed it to me.</p>\n\n<pre><code>from bokeh.plotting import figure, HBox, output_file, show, VBox, ColumnDataSource\nfrom bokeh.models import Range1d, HoverTool\nfrom collections import OrderedDict\nimport random\n\nys = [10 for x in range(len(levelsdf2[(name, 'Start')]))]\nxscale = zip(levelsdf2[('Log', 'Start')], levelsdf2[('Log', 'Stop')])\nyscale = zip(ys,ys)\n\nTOOLS=\"pan,wheel_zoom,box_zoom,reset,hover\"\noutput_file(\"scatter.html\")\nhover_tips = levelsdf2.index.values\ncolors = [\"#%06x\" % random.randint(0,0xFFFFFF) for c in range(len(xscale))]\n\nsource = ColumnDataSource(\n    data=dict(\n        x=xscale,\n        y=yscale,\n        gene=hover_tips,\n        colors=colors,\n    )\n)\n\n\np1 = figure(plot_width=1750, plot_height=950,y_range=[0, 15],tools=TOOLS)\np1.multi_line(xscale[1:10],yscale[1:10], alpha=1, source=source,line_width=10, line_color=colors[1:10])\n\nhover = p1.select(dict(type=HoverTool))\nhover.tooltips = [\n    (\"index\", \"$index\"),\n    (\"(x,y)\", \"($x, $y)\"),\n]\n\nshow(p1)\n</code></pre>\n\n<p>the <code>levelsdf2</code> is a pandas.DataFrame, if it matters.</p>\n"}, {"tags": ["python", "urllib2", "url-shortener", "urlopen"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1907906"}, "edited": false, "score": 0, "creation_date": 1431544769, "post_id": 30223421, "comment_id": 48550842, "body": "Are You doing the requests in sequence?"}, {"owner": {"reputation": 25, "user_id": 4512589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de89433d60fc34e8077f174254ac40ca?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Kulkarni", "link": "https://stackoverflow.com/users/4512589/amit-kulkarni"}, "edited": false, "score": 1, "creation_date": 1431544912, "post_id": 30223421, "comment_id": 48550925, "body": "Yes I am doing the requests in sequence."}, {"owner": {"reputation": 4371, "user_id": 2058270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a06931a6743fd9dd7c881818498b1af4?s=128&d=identicon&r=PG", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2058270/ajay"}, "edited": false, "score": 0, "creation_date": 1431545014, "post_id": 30223421, "comment_id": 48550977, "body": "you want to convert a shorten url to normal url ?"}, {"owner": {"reputation": 25, "user_id": 4512589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de89433d60fc34e8077f174254ac40ca?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Kulkarni", "link": "https://stackoverflow.com/users/4512589/amit-kulkarni"}, "reply_to_user": {"reputation": 4371, "user_id": 2058270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a06931a6743fd9dd7c881818498b1af4?s=128&d=identicon&r=PG", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2058270/ajay"}, "edited": false, "score": 0, "creation_date": 1431545178, "post_id": 30223421, "comment_id": 48551078, "body": "@Ajay yes. And do this in a small amount of time."}, {"owner": {"reputation": 4371, "user_id": 2058270, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a06931a6743fd9dd7c881818498b1af4?s=128&d=identicon&r=PG", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2058270/ajay"}, "edited": false, "score": 0, "creation_date": 1431545827, "post_id": 30223421, "comment_id": 48551434, "body": "try requests module.it will be better that urllib"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1431547101, "post_id": 30223421, "comment_id": 48552103, "body": "What are the short URLs like? Can you show some examples?"}, {"owner": {"reputation": 25, "user_id": 4512589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de89433d60fc34e8077f174254ac40ca?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Kulkarni", "link": "https://stackoverflow.com/users/4512589/amit-kulkarni"}, "edited": false, "score": 0, "creation_date": 1431548306, "post_id": 30223421, "comment_id": 48552736, "body": "here are a few examples: <a href=\"https://t.co/0lka93k2zE\" rel=\"nofollow noreferrer\">t.co/0lka93k2zE</a> <a href=\"http://t.co/HB2vyuC1tn\" rel=\"nofollow noreferrer\">t.co/HB2vyuC1tn</a> <a href=\"http://t.co/6uZ9mJYPlr\" rel=\"nofollow noreferrer\">t.co/6uZ9mJYPlr</a> <a href=\"http://t.co/CwkvAfzjBT\" rel=\"nofollow noreferrer\">t.co/CwkvAfzjBT</a> <a href=\"https://t.co/ocwcnrNE06\" rel=\"nofollow noreferrer\">t.co/ocwcnrNE06</a> <a href=\"https://t.co/KhGym8fdWx\" rel=\"nofollow noreferrer\">t.co/KhGym8fdWx</a>"}], "answers": [{"comments": [{"owner": {"reputation": 85935, "user_id": 211116, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf422e96227ee42abf42188feee10d9d?s=128&d=identicon&r=PG", "display_name": "Spacedman", "link": "https://stackoverflow.com/users/211116/spacedman"}, "edited": false, "score": 3, "creation_date": 1431545308, "post_id": 30223610, "comment_id": 48551134, "body": "I suspect the URL shortening server might not be too happy with such a thrashing from a single IP address and start blocking. Beware!"}], "tags": [], "owner": {"reputation": 8155, "user_id": 1431244, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/21b31222e990b631fee5484a7115a991?s=128&d=identicon&r=PG", "display_name": "Oliver Dain", "link": "https://stackoverflow.com/users/1431244/oliver-dain"}, "is_accepted": true, "score": 5, "last_activity_date": 1431545202, "creation_date": 1431545202, "answer_id": 30223610, "question_id": 30223421, "link": "https://stackoverflow.com/questions/30223421/fast-expansion-of-shortened-urls-using-python/30223610#30223610", "title": "Fast expansion of shortened URLs using python", "body": "<p>I suspect the issue is that network calls are slow and urllib blocks until it gets a response. So, for example, say it takes 200ms to get a response from the URL shortening service, then you'll only be able to resolve 5 URLs/second using urllib. However, if you use an async library you should be able to send out lots of requests before you get the first answer. Responses are then processed as they arrive back to your code. This should dramatically increase your throughput. There's a few Python libs for this kind of thing (Twisted, gevent, etc.) so you might just want to Google for \"Python async rest\".</p>\n\n<p>You could also try to do this with lots of threads (I think urllib2 will release the GIL while it waits for a response, but not sure). That wouldn't be as fast as async, but should still speed things up quite a bit.</p>\n\n<p>Both of these solutions introduce quite a bit of complexity, but if you want to go fast...</p>\n"}], "owner": {"reputation": 25, "user_id": 4512589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de89433d60fc34e8077f174254ac40ca?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Kulkarni", "link": "https://stackoverflow.com/users/4512589/amit-kulkarni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "accepted_answer_id": 30223610, "answer_count": 1, "score": 2, "last_activity_date": 1431545202, "creation_date": 1431544416, "last_edit_date": 1431544670, "question_id": 30223421, "link": "https://stackoverflow.com/questions/30223421/fast-expansion-of-shortened-urls-using-python", "title": "Fast expansion of shortened URLs using python", "body": "<p>I am writing Python code to expand shortened URLs fetched from Twitter. I have fetched all the URLs and stored them in a text file separated by a newline.</p>\n\n<p>Currently I am using: </p>\n\n<pre><code>response = urllib2.urlopen(url)\nreturn response.url\n</code></pre>\n\n<p>to expand them.</p>\n\n<p>But the <code>urlopen()</code> method doesn't seem to be very fast in expanding the URLs.</p>\n\n<p>I have around 5.4 million URLs. Is there any faster way to expand them using Python? </p>\n"}, {"tags": ["python", "debugging", "python-3.x", "python-idle"], "comments": [{"owner": {"reputation": 662, "user_id": 3998520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d77a6e0a246452554f23ba41d0245bf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3998520/matthew"}, "edited": false, "score": 0, "creation_date": 1431544493, "post_id": 30223389, "comment_id": 48550678, "body": "<a href=\"https://docs.python.org/2/library/pdb.html\" rel=\"nofollow noreferrer\"><code>import pdb</code></a> is the built-in python debugger that will run on any and all python IDE&#39;s. If you want an IDE with more advanced / easier to use debugging features, check out Spyder or PyCharm (PyCharm has more features, Spyder is easier to use in my opinion though)"}, {"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "reply_to_user": {"reputation": 662, "user_id": 3998520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d77a6e0a246452554f23ba41d0245bf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3998520/matthew"}, "edited": false, "score": 0, "creation_date": 1431544538, "post_id": 30223389, "comment_id": 48550711, "body": "can I set break point at <code>do_GET()</code> method using spyder or pycharm?"}, {"owner": {"reputation": 662, "user_id": 3998520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d77a6e0a246452554f23ba41d0245bf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3998520/matthew"}, "edited": false, "score": 0, "creation_date": 1431544831, "post_id": 30223389, "comment_id": 48550877, "body": "certainly, <code>f9</code> is the default hotkey for that"}], "owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1431556797, "creation_date": 1431544306, "last_edit_date": 1431556797, "question_id": 30223389, "link": "https://stackoverflow.com/questions/30223389/debugging-server-code-using-idle-python", "title": "Debugging server code using IDLE - python", "body": "<p>In this python <a href=\"https://github.com/shamhub/CS61A_Fall2012/tree/master/Guitar_heroine\" rel=\"nofollow noreferrer\">code</a>, I would like to debug <code>do_GET</code> method in <code>server.py</code> immediately when I click <code>playbutton</code> to send http <code>GET</code> request after launching server <code>python server.py</code> and connect from browser <code>http://localhost:port/</code>.</p>\n\n<p>Is it possible to debug <code>do_GET</code> method using below IDLE tool?If no, Please recommend an alternative tool that helps debugging.</p>\n\n<p><img src=\"https://i.stack.imgur.com/kRXgi.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["python", "flask"], "answers": [{"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": true, "score": 5, "last_activity_date": 1431545389, "last_edit_date": 1431545389, "creation_date": 1431545008, "answer_id": 30223561, "question_id": 30223379, "link": "https://stackoverflow.com/questions/30223379/trying-to-flash-a-message-raises-an-exception/30223561#30223561", "title": "Trying to flash a message raises an exception", "body": "<p>As the error says, you have not set a secret key, so the session is unavailable.  The session relies on a secret key to sign the cookie prevent tampering.  Message flashing relies on the session.</p>\n\n<p>Set the <code>SECRET_KEY</code> config item to fix this error.</p>\n\n<pre><code># set as part of the config\nSECRET_KEY = 'many random bytes'\n\n# or set directly on the app\napp.secret_key = 'many random bytes'\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8576458"}, "is_accepted": false, "score": 0, "last_activity_date": 1537469423, "creation_date": 1537469423, "answer_id": 52431470, "question_id": 30223379, "link": "https://stackoverflow.com/questions/30223379/trying-to-flash-a-message-raises-an-exception/52431470#52431470", "title": "Trying to flash a message raises an exception", "body": "<p>In your run.py file </p>\n\n<pre><code>from tc import app\napp.secret_key='12345'\napp.run(debug=True)\n</code></pre>\n"}], "owner": {"reputation": 2596, "user_id": 1249267, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/86d167bf675611a3a0cb2d5c928302d7?s=128&d=identicon&r=PG&f=1", "display_name": "sudhishkr", "link": "https://stackoverflow.com/users/1249267/sudhishkr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4334, "favorite_count": 2, "accepted_answer_id": 30223561, "answer_count": 2, "score": 2, "last_activity_date": 1537469423, "creation_date": 1431544288, "last_edit_date": 1431545239, "question_id": 30223379, "link": "https://stackoverflow.com/questions/30223379/trying-to-flash-a-message-raises-an-exception", "title": "Trying to flash a message raises an exception", "body": "<p>I want to use <code>flash</code> to show a message, but doing so raises an exception.  The code below demonstrates the error, and works fine if the call to <code>flash</code> is removed.  How do I fix this error?</p>\n\n<pre><code>from flask import Flask, flash\n\napp = Flask(__name__)\n\n@app.route('/')\ndef index():\n    flash('Entered')\n    return 'Completed'\n\napp.run(debug=True)\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>RuntimeError: the session is unavailable because no secret key was set. Set the secret_key on the application to something unique and secret.\n</code></pre>\n"}, {"tags": ["python", "rabbitmq", "pika"], "comments": [{"owner": {"reputation": 18402, "user_id": 1858116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fQDZf.jpg?s=128&g=1", "display_name": "Gabriele Santomaggio", "link": "https://stackoverflow.com/users/1858116/gabriele-santomaggio"}, "edited": false, "score": 2, "creation_date": 1431581827, "post_id": 30223339, "comment_id": 48563133, "body": "please read this: <a href=\"http://stackoverflow.com/questions/22850546/cant-access-rabbitmq-web-management-interface-after-fresh-install\" title=\"cant access rabbitmq web management interface after fresh install\">stackoverflow.com/questions/22850546/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 23298, "user_id": 408182, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/02jXt.jpg?s=128&g=1", "display_name": "eandersson", "link": "https://stackoverflow.com/users/408182/eandersson"}, "is_accepted": true, "score": 13, "last_activity_date": 1474999987, "last_edit_date": 1474999987, "creation_date": 1431549588, "answer_id": 30224778, "question_id": 30223339, "link": "https://stackoverflow.com/questions/30223339/pika-exceptions-probableauthenticationerror-when-trying-to-send-message-to-remot/30224778#30224778", "title": "pika.exceptions.ProbableAuthenticationError when trying to send message to remote queue", "body": "<p>This is because you are trying to authenticate using the username and password <code>guest</code> remotely. Starting with <a href=\"https://www.rabbitmq.com/release-notes/README-3.3.0.txt\" rel=\"noreferrer\">RabbitMQ 3.3</a> you need to create a new account to use remotely, and <code>guest/guest</code> can only be used locally.</p>\n\n<p>This is taken from the change log <a href=\"https://www.rabbitmq.com/release-notes/README-3.3.0.txt\" rel=\"noreferrer\">here</a>.</p>\n\n<pre><code>25603 prevent access using the default guest/guest credentials except via localhost since (1.0.0)\n</code></pre>\n\n<p>It's possible to modify the RabbitMQ configuration to allow remote access using the <code>guest</code> account, by removing <code>guest</code> from loopback_users, but it's recommended to create a new user to follow best practices.</p>\n\n<pre><code>[{rabbit, [{loopback_users, []}]}].\n</code></pre>\n"}], "owner": {"reputation": 393, "user_id": 993324, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/04f0af6fe511932fe19ba041490761e8?s=128&d=identicon&r=PG", "display_name": "Damian Melniczuk", "link": "https://stackoverflow.com/users/993324/damian-melniczuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7289, "favorite_count": 1, "accepted_answer_id": 30224778, "answer_count": 1, "score": 5, "last_activity_date": 1474999987, "creation_date": 1431544153, "question_id": 30223339, "link": "https://stackoverflow.com/questions/30223339/pika-exceptions-probableauthenticationerror-when-trying-to-send-message-to-remot", "title": "pika.exceptions.ProbableAuthenticationError when trying to send message to remote queue", "body": "<p>I'm trying to run <a href=\"https://www.rabbitmq.com/tutorials/tutorial-one-python.html\" rel=\"noreferrer\">RabbitMQ Python tutorial</a> but with sender on virtualbox host machine and receiver and queue on virtualbox guest machine. So I modified mentioned <em>send.py</em> code by only replacing <strong>localhost</strong> with <strong>192.168.1.5</strong>. When I run it, i receive following error:</p>\n\n<pre><code>...\n  File \"/home/damian/.virtualenvs/kivy_1.9/local/lib/python2.7/site-packages/pika/adapters/base_connection.py\", line 153, in _check_state_on_disconnect\n    raise exceptions.ProbableAuthenticationError\npika.exceptions.ProbableAuthenticationError\n</code></pre>\n\n<p>rabbitmq-server seems to be running, because when I stop it <em>send.py</em> gives me:</p>\n\n<pre><code>...\n  File \"/home/damian/.virtualenvs/kivy_1.9/local/lib/python2.7/site-packages/pika/adapters/blocking_connection.py\", line 301, in _adapter_connect\n    raise exceptions.AMQPConnectionError(error)\npika.exceptions.AMQPConnectionError: Connection to 192.168.1.5:5672 failed: [Errno 111] Connection refused\n</code></pre>\n\n<p>which makes perfect sense.</p>\n\n<p>How to fix that <strong>ProbableAuthenticationError</strong>?</p>\n\n<p>Host machine is Debian 7 with Python 2.7.3 and pika 0.9.14, guest is Ubuntu 15.04 with rabbitmq-server 3.4.3-2</p>\n"}, {"tags": ["jquery", "python", "datatable", "pagination", "flask-sqlalchemy"], "comments": [{"owner": {"reputation": 11906, "user_id": 4842742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ExYH.jpg?s=128&g=1", "display_name": "sobolevn", "link": "https://stackoverflow.com/users/4842742/sobolevn"}, "edited": false, "score": 0, "creation_date": 1431544686, "post_id": 30223277, "comment_id": 48550796, "body": "Have a look at the docs for datatable ajax api: <a href=\"https://datatables.net/reference/api/ajax\" rel=\"nofollow noreferrer\">docs</a>. In Flask you have to add something like SQLAlchemy&#39;s <code>paginate</code> function: <a href=\"https://pythonhosted.org/Flask-SQLAlchemy/api.html\" rel=\"nofollow noreferrer\">docs</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1976, "user_id": 2787992, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EYQwO.png?s=128&g=1", "display_name": "iChux", "link": "https://stackoverflow.com/users/2787992/ichux"}, "is_accepted": false, "score": 0, "last_activity_date": 1452336033, "creation_date": 1452336033, "answer_id": 34692448, "question_id": 30223277, "link": "https://stackoverflow.com/questions/30223277/how-to-load-data-for-each-pagination-of-the-data-table/34692448#34692448", "title": "How to load data for each pagination of the data table", "body": "<p>Have you seen this project <a href=\"https://github.com/Pegase745/sqlalchemy-datatables/tree/master/examples/flask_tut\" rel=\"nofollow\">https://github.com/Pegase745/sqlalchemy-datatables/tree/master/examples/flask_tut</a>? It might be of help.</p>\n\n<p>All that's needed is you running <code>pip install sqlalchemy-datatables</code></p>\n"}], "owner": {"reputation": 1, "user_id": 4829906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73ad19e769c40d7cfec99d0eeb2e306f?s=128&d=identicon&r=PG&f=1", "display_name": "My doubts", "link": "https://stackoverflow.com/users/4829906/my-doubts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2314, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1452336033, "creation_date": 1431543953, "question_id": 30223277, "link": "https://stackoverflow.com/questions/30223277/how-to-load-data-for-each-pagination-of-the-data-table", "title": "How to load data for each pagination of the data table", "body": "<p>I have a database table which has some thousands of rows and am developing a crud admin web app. Am using datatable to show all the rows(View All). When I load all the Rows using datatable it takes some 30 seconds to load the page. I want to avoid it using ajax pagination.</p>\n\n<p>Python Code :</p>\n\n<p>My python function for fetching all the rows from a tables is looks like this</p>\n\n<pre><code> @companies.route('/list', methods=['GET'])\n @requires_session_auth\n def company_list():\n    try:\n       all_companies = Company.query.all()\n       return render_template('company_list.html', company=all_companies)\n    except:\n    logger.exception('Error rendering Company list.')\n\n\n return redirect(url_for('index'))\n</code></pre>\n\n<p>Html code:</p>\n\n<pre><code> {% extends \"base.html\" %}\n {% block subtitle %}Companies{% endblock %}\n {% block content %}\n\n &lt;h2&gt;Companies&lt;/h2&gt;\n\n &lt;table id=\"datatable\" class=\"display\" cellspacing=\"0\" width=\"100%\"&gt;\n   &lt;thead&gt;\n    &lt;tr&gt;\n        &lt;th align=\"center\"&gt;Actions&lt;/th&gt;\n        &lt;th align=\"left\"&gt;ID&lt;/th&gt;\n        &lt;th align=\"left\"&gt;Label&lt;/th&gt;\n        &lt;th align=\"left\"&gt;Company Name&lt;/th&gt;\n    &lt;/tr&gt;\n   &lt;/thead&gt;\n   &lt;tbody&gt;\n     {% for image in images %}\n     &lt;tr&gt;\n       &lt;td nowrap align=\"center\"&gt;\n        &lt;a href=\"\"&gt;Edit&lt;/a&gt;\n            &amp;nbsp;&amp;nbsp;\n         &lt;a href=\"\" class=\"del_link\"&gt;Delete&lt;/a&gt;\n          &lt;/td&gt;\n          &lt;td nowrap align=\"left\"&gt;{{ company.id }}&lt;/td&gt;\n          &lt;td nowrap align=\"left\"&gt;{{ company.label }}&lt;/td&gt;\n          &lt;td nowrap align=\"left\"&gt;{{ company.companyname }}&lt;/td&gt;\n         &lt;/tr&gt;\n       {% endfor %}\n    &lt;/tbody&gt;\n   &lt;/table&gt;\n  {% endblock %}\n  {% block afterbody %}\n  &lt;script&gt;\n      $(document).ready(function () {\n      $('#datatable').dataTable({\n         stateSave: true\n       });\n   &lt;/script&gt;\n  {% endblock %}\n</code></pre>\n\n<p>How can I create a python function which loads first 10 rows on the datatable and clicking the pagination button (2 nd page)it should load the next ten datas from the db table. How can I create python function and datatable in html. Here is the sample pagination <a href=\"https://datatables.net/examples/server_side/simple.html\" rel=\"nofollow\">https://datatables.net/examples/server_side/simple.html</a> which is in php.</p>\n"}, {"tags": ["python", "plot", "sympy"], "answers": [{"tags": [], "owner": {"reputation": 1873, "user_id": 1725553, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-CsRuoQmwqLo/AAAAAAAAAAI/AAAAAAAAAFM/hESpKGJTWZo/photo.jpg?sz=128", "display_name": "paddyg", "link": "https://stackoverflow.com/users/1725553/paddyg"}, "is_accepted": false, "score": 1, "last_activity_date": 1431546570, "creation_date": 1431546570, "answer_id": 30223966, "question_id": 30223254, "link": "https://stackoverflow.com/questions/30223254/plotting-the-output-of-a-function-gives-this-error-typeerror-unhashable-type/30223966#30223966", "title": "Plotting the output of a function gives this error-TypeError: unhashable type: &#39;numpy.ndarray&#39;", "body": "<p>You may be better off flagging your question with <code>sympy</code> - it's probably the behaviour of one of those functions that's causing the issue, and someone else might know all about it.</p>\n\n<p>It's probably a good idea to split those really long formulas up into multi lines (at least while debugging) to help you track down the error. Also put in some prints etc.</p>\n\n<p>I know it's not what you want to achieve but if I cut out the sympy (I don't have it installed!) and adjust the array lengths it plots without error:</p>\n\n<pre><code>    ...\n    H=((2/H0)*((b*(z+1)+c*(z+1)**0.5+2.0-a-b-c)*(1-0.5*a*(z+1)**(-0.5)) - ((z+1)-a*(z+1)**0.5-1.0+a)*(b+c*0.5*(z+1)**(-0.5)))/(b*(z+1)+c*(z+1)**0.5+2.0-a-b-c)**2)**(-1) \n    return ((2*(z[:-1]+1)/3)*(np.diff(np.log(H)))-1)/(1-(H[:-1]/H0)**2*omega_m0*(z[:-1]+1)**3)\n\nwz=func(z)\n\nplt.plot(z[:-1],wz)\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/qQVNP.jpg\" alt=\"enter image description here\"></p>\n"}, {"comments": [{"owner": {"reputation": 965, "user_id": 2153555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc0a2558d69375b55b5d6bfff4285b2?s=128&d=identicon&r=PG", "display_name": "etna", "link": "https://stackoverflow.com/users/2153555/etna"}, "reply_to_user": {"reputation": 11, "user_id": 4896971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662498f81f749d9af0eec9136989f595?s=128&d=identicon&r=PG&f=1", "display_name": "Kshama Kurian", "link": "https://stackoverflow.com/users/4896971/kshama-kurian"}, "edited": false, "score": 0, "creation_date": 1431854398, "post_id": 30268551, "comment_id": 48668247, "body": "no problem, you may consider accepting my answer then ;)"}], "tags": [], "owner": {"reputation": 965, "user_id": 2153555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc0a2558d69375b55b5d6bfff4285b2?s=128&d=identicon&r=PG", "display_name": "etna", "link": "https://stackoverflow.com/users/2153555/etna"}, "is_accepted": false, "score": 3, "last_activity_date": 1431724346, "last_edit_date": 1495540897, "creation_date": 1431723214, "answer_id": 30268551, "question_id": 30223254, "link": "https://stackoverflow.com/questions/30223254/plotting-the-output-of-a-function-gives-this-error-typeerror-unhashable-type/30268551#30268551", "title": "Plotting the output of a function gives this error-TypeError: unhashable type: &#39;numpy.ndarray&#39;", "body": "<p>I'm not sure what you want to do with <code>sp.var('z+1')</code>... at least I hope you were not trying to create a variable named z+1. I got the code to run but I let you make sure it does what you want and complain if not :)</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt \nimport sympy as sp\n\na=1.48185562\nb=0.57081914\nc=-0.25098188\nH0=70.32724312\n\nx=np.linspace(0.0,1.5,100)\n\nomega_m0=0.3\n\ndlabel= 'w(z) vz z'\n\nsp.var('z')\n\ndef func(z):    \n  H=((2/H0)*((b*(z+1)+c*(z+1)**0.5+2.0-a-b-c)*(1-0.5*a*(z+1)**(-0.5)) - ((z+1)-a*(z+1)**0.5-1.0+a)*(b+c*0.5*(z+1)**(-0.5)))/(b*(z+1)+c*(z+1)**0.5+2.0-a-b-c)**2)**(-1) \n  return ((2*(z+1)/3)*(sp.diff(sp.log(H)))-1)/(1-(H/H0)**2*omega_m0*(z+1)**3)\n\nwz = [func(z).evalf(subs = {z : y}) for y in x]\n\nplt.plot(x,wz)\nplt.xlabel('z')\nplt.ylabel('w(z)')\nplt.show()\n</code></pre>\n\n<p>EDIT: in order to get <code>wz</code>, the following piece is much faster ( cf <a href=\"https://stackoverflow.com/questions/10678843/evaluate-sympy-expression-from-an-array-of-values\">Evaluate sympy expression from an array of values</a> ):</p>\n\n<pre><code>from sympy.utilities.lambdify import lambdify\nfunc_np_ready = lambdify(z, func(z),'numpy') # returns a numpy-ready function\nwz = func_np_ready(x)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4896971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662498f81f749d9af0eec9136989f595?s=128&d=identicon&r=PG&f=1", "display_name": "Kshama Kurian", "link": "https://stackoverflow.com/users/4896971/kshama-kurian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1431724346, "creation_date": 1431543855, "last_edit_date": 1431718253, "question_id": 30223254, "link": "https://stackoverflow.com/questions/30223254/plotting-the-output-of-a-function-gives-this-error-typeerror-unhashable-type", "title": "Plotting the output of a function gives this error-TypeError: unhashable type: &#39;numpy.ndarray&#39;", "body": "<p>I tried to plot the output of the defined function with respect to z. However the error TypeError: unhashable type: 'numpy.ndarray' is shown. Please help.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt \nimport sympy as sp\n\na=1.48185562\nb=0.57081914\nc=-0.25098188\nH0=70.32724312\n\nz=np.linspace(0.0,1.5,100)\n\nomega_m0=0.3\n\ndlabel= 'w(z) vz z'\n\ndef func(z):    \n    sp.var('z+1')\n    H=((2/H0)*((b*(z+1)+c*(z+1)**0.5+2.0-a-b-c)*(1-0.5*a*(z+1)**(-0.5)) - ((z+1)-a*(z+1)**0.5-1.0+a)*(b+c*0.5*(z+1)**(-0.5)))/(b*(z+1)+c*(z+1)**0.5+2.0-a-b-c)**2)**(-1) \n    return ((2*(z+1)/3)*(sp.diff(sp.log(H)))-1)/(1-(H/H0)**2*omega_m0*(z+1)**3)\n\nwz=func(z)\n\nplt.plot(z,wz)\nplt.xlabel('z')\nplt.ylabel('w(z)')\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 15854, "user_id": 1634191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbda192e603ef4e51423f470f5a2cbf3?s=128&d=identicon&r=PG&f=1", "display_name": "wflynny", "link": "https://stackoverflow.com/users/1634191/wflynny"}, "edited": false, "score": 0, "creation_date": 1431544552, "post_id": 30223161, "comment_id": 48550716, "body": "Have you tried <code>set_zlim(z_min, z_max)</code>?  Or <code>set_zlim3d</code>?"}, {"owner": {"reputation": 39460, "user_id": 13009, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cc09155d4a43cc770bf1e77fd87867a?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/13009/greg"}, "reply_to_user": {"reputation": 15854, "user_id": 1634191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbda192e603ef4e51423f470f5a2cbf3?s=128&d=identicon&r=PG&f=1", "display_name": "wflynny", "link": "https://stackoverflow.com/users/1634191/wflynny"}, "edited": false, "score": 0, "creation_date": 1431544933, "post_id": 30223161, "comment_id": 48550940, "body": "Thanks for the suggestion.  what does zlim do?  I&#39;m not sure what I would put for z_min, and z_max.  I&#39;m happy with the z bounds it has, I just want it stretched."}, {"owner": {"reputation": 15854, "user_id": 1634191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbda192e603ef4e51423f470f5a2cbf3?s=128&d=identicon&r=PG&f=1", "display_name": "wflynny", "link": "https://stackoverflow.com/users/1634191/wflynny"}, "edited": false, "score": 0, "creation_date": 1431545330, "post_id": 30223161, "comment_id": 48551143, "body": "I misunderstood.  Looks like you want to change the 3d aspect ratio.  Doing this depends on the version of matplotlib you&#39;re working with. Try looking <a href=\"http://matplotlib.org/1.4.0/mpl_toolkits/mplot3d/api.html#mpl_toolkits.mplot3d.axes3d.Axes3D.autoscale_view\" rel=\"nofollow noreferrer\">here1</a> or <a href=\"https://stackoverflow.com/questions/10326371/setting-aspect-ratio-of-3d-plot\">here2</a>"}, {"owner": {"reputation": 39460, "user_id": 13009, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cc09155d4a43cc770bf1e77fd87867a?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/13009/greg"}, "reply_to_user": {"reputation": 15854, "user_id": 1634191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cbda192e603ef4e51423f470f5a2cbf3?s=128&d=identicon&r=PG&f=1", "display_name": "wflynny", "link": "https://stackoverflow.com/users/1634191/wflynny"}, "edited": false, "score": 0, "creation_date": 1431545785, "post_id": 30223161, "comment_id": 48551405, "body": "Thanks.  I guess I don&#39;t understand what the here1 link would do.  It seems like it wouldn&#39;t set the aspect ratio.  I read here2 before asking this question but I can&#39;t see how to apply the answers to my code."}, {"owner": {"reputation": 13210, "user_id": 764322, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a059b390ab24839995cfe14e261ffe41?s=128&d=identicon&r=PG", "display_name": "Imanol Luengo", "link": "https://stackoverflow.com/users/764322/imanol-luengo"}, "edited": false, "score": 0, "creation_date": 1431950994, "post_id": 30223161, "comment_id": 48701274, "body": "The <code>here1</code> <a href=\"http://stackoverflow.com/a/10328142/764322\">accepted answer</a> modifies the aspect ratio of the axis. It is a hack so you would need to modify matplotlib&#39;s files. It doesn&#39;t seem to allow different aspect ratios by default."}, {"owner": {"reputation": 27634, "user_id": 1576602, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d5132c0e702c0b50cac6aa7c56d191f?s=128&d=identicon&r=PG", "display_name": "Andrzej Pronobis", "link": "https://stackoverflow.com/users/1576602/andrzej-pronobis"}, "edited": false, "score": 1, "creation_date": 1432527782, "post_id": 30223161, "comment_id": 48946627, "body": "There is a one-liner solution to this. A very simple monkey patch which requires adding only one line to your code. Check out my answer below: <a href=\"http://stackoverflow.com/a/30419243/1576602\">stackoverflow.com/a/30419243/1576602</a>"}], "answers": [{"tags": [], "owner": {"reputation": 784, "user_id": 3565315, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f94c26f3337cd6d46fce6dcccad0b3e4?s=128&d=identicon&r=PG&f=1", "display_name": "manglano", "link": "https://stackoverflow.com/users/3565315/manglano"}, "is_accepted": false, "score": 1, "last_activity_date": 1432001212, "last_edit_date": 1432001212, "creation_date": 1431998856, "answer_id": 30315313, "question_id": 30223161, "link": "https://stackoverflow.com/questions/30223161/matplotlib-mplot3d-how-to-increase-the-size-of-an-axis-stretch-in-a-3d-plo/30315313#30315313", "title": "matplotlib (mplot3d) - how to increase the size of an axis (stretch) in a 3D Plot?", "body": "<p>Sounds like you're trying to adjust the scale of the plot. I don't think there's a way to stretch a <em>linear</em> scale to user specifications, but you can use <code>set_yscale()</code>, <code>set_xscale()</code>, <code>set_zscale()</code> to alter the scales with respect to each other.</p>\n\n<p>Intuitively, <code>set_yscale(log)</code>, <code>set_xscale(log)</code>, <code>set_zscale(linear)</code> might solve your problems. </p>\n\n<p>A likely better option: specify a stretch, set them all to symlog with the same log base and then specify the Z-axis's symlog scale with the <code>linscalex/linscaley</code> kwargs to your specifications.</p>\n\n<p>More here:</p>\n\n<p><a href=\"http://matplotlib.org/mpl_toolkits/mplot3d/api.html\" rel=\"nofollow\">http://matplotlib.org/mpl_toolkits/mplot3d/api.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 2085, "user_id": 4371080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb71c0f8f249373532fd27cc817c563?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Sarofeen", "link": "https://stackoverflow.com/users/4371080/christian-sarofeen"}, "edited": false, "score": 1, "creation_date": 1432068929, "post_id": 30327615, "comment_id": 48766367, "body": "I don&#39;t like this option as you&#39;re really just skewing the viewport. You can tell when you try to rotate this plot that the image is really just getting skewed."}], "tags": [], "owner": {"reputation": 49128, "user_id": 588071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0397d27c84e04451691ddb6c8d49c?s=128&d=identicon&r=PG&f=1", "display_name": "tmdavison", "link": "https://stackoverflow.com/users/588071/tmdavison"}, "is_accepted": false, "score": 6, "last_activity_date": 1432043361, "creation_date": 1432043361, "answer_id": 30327615, "question_id": 30223161, "link": "https://stackoverflow.com/questions/30223161/matplotlib-mplot3d-how-to-increase-the-size-of-an-axis-stretch-in-a-3d-plo/30327615#30327615", "title": "matplotlib (mplot3d) - how to increase the size of an axis (stretch) in a 3D Plot?", "body": "<p>I looks like by default, mplot3d will leave quite a bit of room at the top and bottom of a very tall plot. But, you can trick it into filling that space using <code>fig.subplots_adjust</code>, and extending the top and bottom out of the normal plotting area (i.e. <code>top &gt; 1</code> and <code>bottom &lt; 0</code>). Some trial and error here is probably needed for your particular plot. </p>\n\n<p>I've created some random arrays for x, y, and z with limits similar to your plot, and have found the parameters below (<code>bottom=-0.15</code>, <code>top = 1.2</code>) seem to work ok.</p>\n\n<p>You might also want to change <code>ax.view_init</code> to set a nice viewing angle.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import axes3d\nfrom numpy import random\n\n# Make some random data with similar limits to the OP's example\nx,y,z=random.rand(3,100)\nz*=250\ny*=800\ny+=900\nx*=350\nx+=1200\n\nfig=plt.figure(figsize=(4,35))\n\n# Set the bottom and top outside the actual figure limits, \n# to stretch the 3D axis\nfig.subplots_adjust(bottom=-0.15,top=1.2)\n\nax = fig.add_subplot(111, projection='3d')\n\n# Change the viewing angle to an agreeable one\nax.view_init(2,None)\n\nax.scatter(x, y, z, zdir='z', c= 'red')\nplt.savefig(\"plot.png\")\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/NNq3D.png\" width=\"200\"></p>\n"}, {"comments": [{"owner": {"reputation": 2085, "user_id": 4371080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb71c0f8f249373532fd27cc817c563?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Sarofeen", "link": "https://stackoverflow.com/users/4371080/christian-sarofeen"}, "reply_to_user": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "edited": false, "score": 0, "creation_date": 1432067877, "post_id": 30333984, "comment_id": 48765864, "body": "@gboffi I can. You should be able to simply copy the code and run it."}, {"owner": {"reputation": 5949, "user_id": 1322179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qDCxx.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/1322179/ben"}, "edited": false, "score": 0, "creation_date": 1432091617, "post_id": 30333984, "comment_id": 48772986, "body": "hah, beat me too it. I think this is the way to do it though. You can check out the default scaling, <code>world_transformation()</code>, <a href=\"https://github.com/matplotlib/matplotlib/blob/4314d447dfc7127daa80fa295c9bd56cf07faf01/lib/mpl_toolkits/mplot3d/proj3d.py\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 987, "user_id": 11117760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86a4ae897e611c88d692d23d4c836a66?s=128&d=identicon&r=PG&f=1", "display_name": "Prageeth Jayathissa", "link": "https://stackoverflow.com/users/11117760/prageeth-jayathissa"}, "edited": false, "score": 0, "creation_date": 1570782095, "post_id": 30333984, "comment_id": 103030361, "body": "The one limitation is that it requires the data to be centred. Otherwise, the dot product will also create a spatial transformation of the figure which may shift it off the screen"}, {"owner": {"reputation": 2024, "user_id": 2005415, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/35f51ec5260767c6e82ae50d07dcae7a?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/2005415/jason"}, "edited": false, "score": 0, "creation_date": 1608709133, "post_id": 30333984, "comment_id": 115660885, "body": "I found the result plot is always so zoomed out using this solution."}], "tags": [], "owner": {"reputation": 2085, "user_id": 4371080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb71c0f8f249373532fd27cc817c563?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Sarofeen", "link": "https://stackoverflow.com/users/4371080/christian-sarofeen"}, "is_accepted": true, "score": 35, "last_activity_date": 1432991751, "last_edit_date": 1432991751, "creation_date": 1432061987, "answer_id": 30333984, "question_id": 30223161, "link": "https://stackoverflow.com/questions/30223161/matplotlib-mplot3d-how-to-increase-the-size-of-an-axis-stretch-in-a-3d-plo/30333984#30333984", "title": "matplotlib (mplot3d) - how to increase the size of an axis (stretch) in a 3D Plot?", "body": "<p>The code example below provides a way to scale each axis relative to the others. However, to do so you need to modify the Axes3D.get_proj function. Below is an example based on the example provided by matplot lib: <a href=\"http://matplotlib.org/1.4.0/mpl_toolkits/mplot3d/tutorial.html#line-plots\" rel=\"noreferrer\">http://matplotlib.org/1.4.0/mpl_toolkits/mplot3d/tutorial.html#line-plots</a></p>\n\n<p>(There is a shorter version at the end of this answer)</p>\n\n<pre><code>from mpl_toolkits.mplot3d.axes3d import Axes3D\nfrom mpl_toolkits.mplot3d import proj3d\n\nimport matplotlib as mpl\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n#Make sure these are floating point values:                                                                                                                                                                                              \nscale_x = 1.0\nscale_y = 2.0\nscale_z = 3.0\n\n#Axes are scaled down to fit in scene                                                                                                                                                                                                    \nmax_scale=max(scale_x, scale_y, scale_z)\n\nscale_x=scale_x/max_scale\nscale_y=scale_y/max_scale\nscale_z=scale_z/max_scale\n\n#Create scaling matrix                                                                                                                                                                                                                   \nscale = np.array([[scale_x,0,0,0],\n                  [0,scale_y,0,0],\n                  [0,0,scale_z,0],\n                  [0,0,0,1]])\nprint scale\n\ndef get_proj_scale(self):\n    \"\"\"                                                                                                                                                                                                                                    \n    Create the projection matrix from the current viewing position.                                                                                                                                                                        \n\n    elev stores the elevation angle in the z plane                                                                                                                                                                                         \n    azim stores the azimuth angle in the x,y plane                                                                                                                                                                                         \n\n    dist is the distance of the eye viewing point from the object                                                                                                                                                                          \n    point.                                                                                                                                                                                                                                 \n\n    \"\"\"\n    relev, razim = np.pi * self.elev/180, np.pi * self.azim/180\n\n    xmin, xmax = self.get_xlim3d()\n    ymin, ymax = self.get_ylim3d()\n    zmin, zmax = self.get_zlim3d()\n\n    # transform to uniform world coordinates 0-1.0,0-1.0,0-1.0                                                                                                                                                                             \n    worldM = proj3d.world_transformation(\n        xmin, xmax,\n        ymin, ymax,\n        zmin, zmax)\n\n    # look into the middle of the new coordinates                                                                                                                                                                                          \n    R = np.array([0.5, 0.5, 0.5])\n\n    xp = R[0] + np.cos(razim) * np.cos(relev) * self.dist\n    yp = R[1] + np.sin(razim) * np.cos(relev) * self.dist\n    zp = R[2] + np.sin(relev) * self.dist\n    E = np.array((xp, yp, zp))\n\n    self.eye = E\n    self.vvec = R - E\n    self.vvec = self.vvec / proj3d.mod(self.vvec)\n\n    if abs(relev) &gt; np.pi/2:\n    # upside down                                                                                                                                                                                                                          \n      V = np.array((0, 0, -1))\n    else:\n      V = np.array((0, 0, 1))\n    zfront, zback = -self.dist, self.dist\n\n    viewM = proj3d.view_transformation(E, R, V)\n    perspM = proj3d.persp_transformation(zfront, zback)\n    M0 = np.dot(viewM, worldM)\n    M = np.dot(perspM, M0)\n\n    return np.dot(M, scale);\n\nAxes3D.get_proj=get_proj_scale\n\n\"\"\"\nYou need to include all the code above.\nFrom here on you should be able to plot as usual.\n\"\"\"\n\nmpl.rcParams['legend.fontsize'] = 10\n\nfig = plt.figure(figsize=(5,5))\nax = fig.gca(projection='3d')\ntheta = np.linspace(-4 * np.pi, 4 * np.pi, 100)\nz = np.linspace(-2, 2, 100)\nr = z**2 + 1\nx = r * np.sin(theta)\ny = r * np.cos(theta)\nax.plot(x, y, z, label='parametric curve')\nax.legend()\n\nplt.show()\n</code></pre>\n\n<p>Standard output:</p>\n\n<p><img src=\"https://i.stack.imgur.com/F26Fcm.png\" alt=\"Normal Scale\"></p>\n\n<p>Scaled by (1, 2, 3):</p>\n\n<p><img src=\"https://i.stack.imgur.com/cmvwqm.png\" alt=\"Scale_x=1, Scale_y=2, Scale_z=3 \"></p>\n\n<p>Scaled by (1, 1, 3):</p>\n\n<p><img src=\"https://i.stack.imgur.com/OGsTVm.png\" alt=\"Scale_x=1, Scale_y=1, Scale_z=3\"></p>\n\n<p>The reason I particularly like this method,\nSwap z and x, scale by (3, 1, 1):</p>\n\n<p><img src=\"https://i.stack.imgur.com/qXoc4.png\" alt=\"Swap z and x, scale_x=4\"></p>\n\n<p>Below is a shorter version of the code.</p>\n\n<pre><code>from mpl_toolkits.mplot3d.axes3d import Axes3D\nfrom mpl_toolkits.mplot3d import proj3d\n\nimport matplotlib as mpl\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nmpl.rcParams['legend.fontsize'] = 10\n\nfig = plt.figure(figsize=(5,5))\nax = fig.gca(projection='3d')\ntheta = np.linspace(-4 * np.pi, 4 * np.pi, 100)\nz = np.linspace(-2, 2, 100)\nr = z**2 + 1\nx = r * np.sin(theta)\ny = r * np.cos(theta)\n\n\n\"\"\"                                                                                                                                                    \nScaling is done from here...                                                                                                                           \n\"\"\"\nx_scale=1\ny_scale=1\nz_scale=2\n\nscale=np.diag([x_scale, y_scale, z_scale, 1.0])\nscale=scale*(1.0/scale.max())\nscale[3,3]=1.0\n\ndef short_proj():\n  return np.dot(Axes3D.get_proj(ax), scale)\n\nax.get_proj=short_proj\n\"\"\"                                                                                                                                                    \nto here                                                                                                                                                \n\"\"\"\n\nax.plot(z, y, x, label='parametric curve')\nax.legend()\n\nplt.show()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2085, "user_id": 4371080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfb71c0f8f249373532fd27cc817c563?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Sarofeen", "link": "https://stackoverflow.com/users/4371080/christian-sarofeen"}, "edited": false, "score": 0, "creation_date": 1432075972, "post_id": 30337053, "comment_id": 48769165, "body": "This won&#39;t make the Z-Axis taller."}], "tags": [], "owner": {"reputation": 202, "user_id": 2415735, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Z0U46.png?s=128&g=1", "display_name": "jmcmahon443", "link": "https://stackoverflow.com/users/2415735/jmcmahon443"}, "is_accepted": false, "score": -3, "last_activity_date": 1432073660, "creation_date": 1432073660, "answer_id": 30337053, "question_id": 30223161, "link": "https://stackoverflow.com/questions/30223161/matplotlib-mplot3d-how-to-increase-the-size-of-an-axis-stretch-in-a-3d-plo/30337053#30337053", "title": "matplotlib (mplot3d) - how to increase the size of an axis (stretch) in a 3D Plot?", "body": "<p>Multiply all your z values by 9,</p>\n\n<pre><code>ax.scatter(x, y, 9*z, zdir='z', c= 'red')\n</code></pre>\n\n<p>And then give the z-axis custom plot labels and spacing.</p>\n\n<pre><code>ax.ZTick = [0,-9*50, -9*100, -9*150, -9*200];\nax.ZTickLabel = {'0','-50','-100','-150','-200'};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27634, "user_id": 1576602, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d5132c0e702c0b50cac6aa7c56d191f?s=128&d=identicon&r=PG", "display_name": "Andrzej Pronobis", "link": "https://stackoverflow.com/users/1576602/andrzej-pronobis"}, "is_accepted": false, "score": 28, "last_activity_date": 1432573962, "last_edit_date": 1432573962, "creation_date": 1432431237, "answer_id": 30419243, "question_id": 30223161, "link": "https://stackoverflow.com/questions/30223161/matplotlib-mplot3d-how-to-increase-the-size-of-an-axis-stretch-in-a-3d-plo/30419243#30419243", "title": "matplotlib (mplot3d) - how to increase the size of an axis (stretch) in a 3D Plot?", "body": "<p><strong>Please note that the answer below simplifies the patch, but uses the same underlying principle as the answer by @ChristianSarofeen.</strong></p>\n\n<h3>Solution</h3>\n\n<p>As already indicated in other answers, it is not a feature that is currently implemented in matplotlib. However, since what you are requesting is simply a <strong>3D transformation</strong> that can be applied to the existing projection matrix used by matplotlib, and thanks to the wonderful features of Python, this problem can be solved with a simple <strong>oneliner</strong>:</p>\n\n<pre><code>ax.get_proj = lambda: np.dot(Axes3D.get_proj(ax), np.diag([scale_x, scale_y, scale_z, 1]))\n</code></pre>\n\n<p>where <code>scale_x</code>, <code>scale_y</code> and <code>scale_z</code> are values from 0 to 1 that will re-scale your plot along each of the axes accordingly. <code>ax</code> is simply the 3D axes which can be obtained with <code>ax = fig.gca(projection='3d')</code></p>\n\n<h3>Explanation</h3>\n\n<p>To explain, the function <code>get_proj</code> of <code>Axes3D</code> generates the projection matrix from the current viewing position. Multiplying it by a scaling matrix:</p>\n\n<pre><code>scale_x, 0,       0\n0,       scale_y, 0\n0,       0,       scale_z\n0,       0,       1\n</code></pre>\n\n<p>includes the scaling into the projection used by the renderer. So, what we are doing here is substituting the original <code>get_proj</code> function with an expression taking the result of the original <code>get_proj</code> and multiplying it by the scaling matrix. </p>\n\n<h3>Example</h3>\n\n<p>To illustrate the result with the standard parametric function example:</p>\n\n<pre><code>from mpl_toolkits.mplot3d import Axes3D\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nfig = plt.figure()\nax = fig.gca(projection='3d')\ntheta = np.linspace(-4 * np.pi, 4 * np.pi, 100)\nz = np.linspace(-2, 2, 100)\nr = z ** 2 + 1\nx = r * np.sin(theta)\ny = r * np.cos(theta)\n\n# OUR ONE LINER ADDED HERE:\nax.get_proj = lambda: np.dot(Axes3D.get_proj(ax), np.diag([0.5, 0.5, 1, 1]))\n\nax.plot(x, y, z)\nplt.show()\n</code></pre>\n\n<p>for values <code>0.5, 0.5, 1</code>, we get:</p>\n\n<p><img src=\"https://i.stack.imgur.com/pFqDp.png\" alt=\"enter image description here\"></p>\n\n<p>while for values <code>0.2, 1.0, 0.2</code>, we get:</p>\n\n<p><img src=\"https://i.stack.imgur.com/kEReL.png\" alt=\"enter image description here\"></p>\n"}, {"tags": [], "owner": {"reputation": 718, "user_id": 9275722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/14eAJ.jpg?s=128&g=1", "display_name": "aaronlhe", "link": "https://stackoverflow.com/users/9275722/aaronlhe"}, "is_accepted": false, "score": 1, "last_activity_date": 1523021700, "creation_date": 1523021700, "answer_id": 49694075, "question_id": 30223161, "link": "https://stackoverflow.com/questions/30223161/matplotlib-mplot3d-how-to-increase-the-size-of-an-axis-stretch-in-a-3d-plo/49694075#49694075", "title": "matplotlib (mplot3d) - how to increase the size of an axis (stretch) in a 3D Plot?", "body": "<p>I found this while searching on a similar problem. After experimenting a bit, perhaps I can share some of my prelim findings here..matplotlib library is VAST!! (am a newcomer). Note that quite akin to this question, all i wanted was to 'visually' stretch the chart without distorting it.</p>\n\n<p>Background story (<em>only key code snippets are shown to avoid unnecessary clutter for those who know the library, and if you want a run-able code please drop a comment</em>):\nI have three 1-d ndarrays representing the X,Y and Z data points respectively. Clearly I can't use plot_surface (as it requires 2d ndarrays for each dim) so I went for the extremely useful plot_trisurf:</p>\n\n<pre><code>fig = plt.figure()\nax = Axes3D(fig)\n3d_surf_obj = ax.plot_trisurf(X, Y, Z_defl, cmap=cm.jet,linewidth=0,antialiased=True)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/rjqid.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rjqid.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can think of the plot like a floating barge deforming in waves...As you can see, the axes stretch make it pretty deceiving visually (note that x is supposed to be at x6 times longer than y and >>>>> z). While the plot points are correct, I wanted something more visually 'stretched' at the very least. Was looking for A QUICK FIX, if I may. Long story cut short, I found a bit of success with...'figure.figsize' general setting (see snippet below). </p>\n\n<pre><code>    matplotlib.rcParams.update({'font.serif': 'Times New Roman',\n                                'font.size': 10.0,\n                                'axes.labelsize': 'Medium',\n                                'axes.labelweight': 'normal',\n                                'axes.linewidth': 0.8,\n                                 ###########################################\n                                 # THIS IS THE IMPORTANT ONE FOR STRETCHING\n                                 # default is [6,4] but...i changed it to\n                                'figure.figsize':[15,5]   # THIS ONE #\n                              })\n</code></pre>\n\n<p>For [15,5] I got something like...</p>\n\n<p><a href=\"https://i.stack.imgur.com/LrAJM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LrAJM.png\" alt=\"enter image description here\"></a></p>\n\n<p>Pretty neat!! </p>\n\n<p>So I started to push it.... and got up to [20,6] before deciding to settle there..</p>\n\n<p><a href=\"https://i.stack.imgur.com/IKn4k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IKn4k.png\" alt=\"enter image description here\"></a></p>\n\n<p>If you want to try for visually stretching the vertical axis, try with ratios like... [7,10], which in this case gives me ... </p>\n\n<p><a href=\"https://i.stack.imgur.com/qihEf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qihEf.png\" alt=\"enter image description here\"></a></p>\n\n<p>Not too shabby ! </p>\n\n<p>Should do it for visual prowess. </p>\n"}], "owner": {"reputation": 39460, "user_id": 13009, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6cc09155d4a43cc770bf1e77fd87867a?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/13009/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24386, "favorite_count": 8, "accepted_answer_id": 30333984, "answer_count": 6, "score": 30, "last_activity_date": 1523021700, "creation_date": 1431543518, "last_edit_date": 1432301077, "question_id": 30223161, "link": "https://stackoverflow.com/questions/30223161/matplotlib-mplot3d-how-to-increase-the-size-of-an-axis-stretch-in-a-3d-plo", "title": "matplotlib (mplot3d) - how to increase the size of an axis (stretch) in a 3D Plot?", "body": "<p>I have this so far:</p>\n\n<pre><code>x,y,z = data.nonzero()    \nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\nax.scatter(x, y, z, zdir='z', c= 'red')\nplt.savefig(\"plot.png\")\n</code></pre>\n\n<p>Which creates:\n<img src=\"https://i.stack.imgur.com/HKQVl.png\" alt=\"enter image description here\"></p>\n\n<p>What I'd like to do is stretch this out to make the Z axis 9 times taller and keep X and Y the same.  I'd like to keep the same coordinates though.</p>\n\n<p>So far I tried this guy:</p>\n\n<pre><code>fig = plt.figure(figsize=(4.,35.))\n</code></pre>\n\n<p>But that just stretches out the plot.png image.  </p>\n"}, {"tags": ["python", "python-2.7", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 8, "last_activity_date": 1431543558, "creation_date": 1431543558, "answer_id": 30223171, "question_id": 30223099, "link": "https://stackoverflow.com/questions/30223099/using-iteritems-to-iterate-over-key-value-in-python-dictionary/30223171#30223171", "title": "Using .iteritems() to iterate over key, value in Python dictionary", "body": "<p>Python has a feature called iterable unpacking. When you do</p>\n\n<pre><code>a, b = thing\n</code></pre>\n\n<p>Python assumes <code>thing</code> is a tuple or list or something with 2 items, and it assigns the first and second items to <code>a</code> and <code>b</code>. This also works in a <code>for</code> loop:</p>\n\n<pre><code>for a, b in thing:\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>for c in thing:\n    a, b = c\n</code></pre>\n\n<p>except it doesn't create that <code>c</code> variable.</p>\n\n<p>This means that if you do</p>\n\n<pre><code>for k, v in d:\n</code></pre>\n\n<p>Python can't look at the fact that you've said <code>k, v</code> instead of <code>k</code> and give you items instead of keys, because maybe the keys are 2-tuples. It has to iterate over the keys and try to unpack each key into the <code>k</code> and <code>v</code> variables.</p>\n"}, {"comments": [{"owner": {"reputation": 3055, "user_id": 1843248, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/63X0V.jpg?s=128&g=1", "display_name": "Doug R.", "link": "https://stackoverflow.com/users/1843248/doug-r"}, "edited": false, "score": 1, "creation_date": 1431544747, "post_id": 30223423, "comment_id": 48550828, "body": "While this is correct, it&#39;s not actually <b>helpful</b> to the OP, given the context of the question."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 3055, "user_id": 1843248, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/63X0V.jpg?s=128&g=1", "display_name": "Doug R.", "link": "https://stackoverflow.com/users/1843248/doug-r"}, "edited": false, "score": 2, "creation_date": 1431544926, "post_id": 30223423, "comment_id": 48550930, "body": "I&#39;m hoping it <b>is</b> helpful by illustrating the behaviour with some examples, particularly one that actually results in the received <code>ValueError</code>. I&#39;m adding more to my answer for this..."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 3055, "user_id": 1843248, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/63X0V.jpg?s=128&g=1", "display_name": "Doug R.", "link": "https://stackoverflow.com/users/1843248/doug-r"}, "edited": false, "score": 0, "creation_date": 1431545336, "post_id": 30223423, "comment_id": 48551147, "body": "@DougR. How is it now?"}, {"owner": {"reputation": 3055, "user_id": 1843248, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/63X0V.jpg?s=128&g=1", "display_name": "Doug R.", "link": "https://stackoverflow.com/users/1843248/doug-r"}, "edited": false, "score": 0, "creation_date": 1431547026, "post_id": 30223423, "comment_id": 48552065, "body": "Much better.  Rated a +1."}], "tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": true, "score": 11, "last_activity_date": 1431547215, "last_edit_date": 1431547215, "creation_date": 1431544418, "answer_id": 30223423, "question_id": 30223099, "link": "https://stackoverflow.com/questions/30223099/using-iteritems-to-iterate-over-key-value-in-python-dictionary/30223423#30223423", "title": "Using .iteritems() to iterate over key, value in Python dictionary", "body": "<p>The other answer explains it well. But here are some further illustrations for how it behaves, by showing cases where it actually works without error (so you can see something):</p>\n\n<pre><code>&gt;&gt;&gt; d = {(1,2): 3, (4,5): 6}\n&gt;&gt;&gt; for k, v in d:\n        print k, v\n\n1 2\n4 5\n</code></pre>\n\n<p>The loop goes through the keys <code>(1,2)</code> and <code>(4,5)</code> and since those \"happen to be\" tuples of size 2, they can be assigned to <code>k</code> and <code>v</code>.</p>\n\n<p>Works with strings as well, as long as they have exactly two characters:</p>\n\n<pre><code>&gt;&gt;&gt; d = {\"AB\":3, \"CD\":6}\n&gt;&gt;&gt; for k, v in d:\n        print k, v\n\nA B\nC D\n</code></pre>\n\n<p>I assume in your case it was something like this?</p>\n\n<pre><code>&gt;&gt;&gt; d = {\"ABC\":3, \"CD\":6}\n&gt;&gt;&gt; for k, v in d:\n        print k, v\n\nTraceback (most recent call last):\n  File \"&lt;pyshell#42&gt;\", line 1, in &lt;module&gt;\n    for k, v in d:\nValueError: too many values to unpack\n</code></pre>\n\n<p>Here, the key \"ABC\" is a triple and thus Python complains about trying to unpack it into just two variables.</p>\n"}, {"tags": [], "owner": {"reputation": 676, "user_id": 4622951, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7PycO.jpg?s=128&g=1", "display_name": "seven7e", "link": "https://stackoverflow.com/users/4622951/seven7e"}, "is_accepted": false, "score": 0, "last_activity_date": 1431934753, "creation_date": 1431934753, "answer_id": 30297543, "question_id": 30223099, "link": "https://stackoverflow.com/questions/30223099/using-iteritems-to-iterate-over-key-value-in-python-dictionary/30297543#30297543", "title": "Using .iteritems() to iterate over key, value in Python dictionary", "body": "<p>While using <code>for xx in XX</code>, you are actually using an iterator to iterates the XX, and XX must be iterable. You can use <code>iter</code> function to get an iterator, as</p>\n\n<pre><code>&gt;&gt;&gt; d = dict(a=1,b=2)\n&gt;&gt;&gt; i = iter(d)\n&gt;&gt;&gt; i\n&lt;dictionary-keyiterator object at 0x6ffff8739f0&gt;\n</code></pre>\n\n<p>and using <code>next</code> to access the elements.</p>\n\n<pre><code>&gt;&gt;&gt; next(i)\n'a'\n</code></pre>\n\n<p>So in every iteration of <code>for k in d</code>, <code>k</code> will be assigned to <code>next(i)</code>, and it's only the key without value. e.g., in the first round of iteration,</p>\n\n<pre><code>k = 'a'\n</code></pre>\n\n<p>While <code>.iteritems()</code> will return another iterator with can get a tuple of key-value combined. Let's check this</p>\n\n<pre><code>&gt;&gt;&gt; i = d.iteritems()\n&gt;&gt;&gt; i\n&lt;dictionary-itemiterator object at 0x6ffff873998&gt;\n&gt;&gt;&gt; next(i)\n('a', 1)\n</code></pre>\n\n<p>See? In the first round of <code>for k, v in d.iteritems()</code>, we actually get this assignment</p>\n\n<pre><code>k, v = ('a', 1)\n</code></pre>\n\n<p>Thus, if you using <code>for k, v in d</code>, you will get</p>\n\n<pre><code>k, v = 'a'\n</code></pre>\n\n<p>That's an illegal assignment.</p>\n"}, {"tags": [], "owner": {"reputation": 80, "user_id": 412244, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lllgZ.jpg?s=128&g=1", "display_name": "nerdfiles", "link": "https://stackoverflow.com/users/412244/nerdfiles"}, "is_accepted": false, "score": 0, "last_activity_date": 1441602452, "creation_date": 1441602452, "answer_id": 32431432, "question_id": 30223099, "link": "https://stackoverflow.com/questions/30223099/using-iteritems-to-iterate-over-key-value-in-python-dictionary/32431432#32431432", "title": "Using .iteritems() to iterate over key, value in Python dictionary", "body": "<p>In Python 2.7.6 it seems that you may want to check for subproperties of the dictionary with <code>dict.has_key(property_name)</code>.</p>\n"}], "owner": {"reputation": 1550, "user_id": 3772347, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/PXajO.jpg?s=128&g=1", "display_name": "AdjunctProfessorFalcon", "link": "https://stackoverflow.com/users/3772347/adjunctprofessorfalcon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41632, "favorite_count": 0, "accepted_answer_id": 30223423, "answer_count": 4, "score": 9, "last_activity_date": 1441602452, "creation_date": 1431543277, "last_edit_date": 1495539977, "question_id": 30223099, "link": "https://stackoverflow.com/questions/30223099/using-iteritems-to-iterate-over-key-value-in-python-dictionary", "title": "Using .iteritems() to iterate over key, value in Python dictionary", "body": "<p>Note: I have <a href=\"https://stackoverflow.com/questions/3744568/why-do-you-have-to-call-iteritems-when-iterating-over-a-dictionary-in-python\">read this post and Alex Martelli's response</a>, but I don't really/fully understand his answer. It's a bit beyond my current understanding. I would like help understanding it better.</p>\n\n<p>I understand that when you try the following for loop: </p>\n\n<pre><code>for key, value in dict:\n    print key\n    print value \n</code></pre>\n\n<p>you get: </p>\n\n<pre><code>ValueError: too many values to unpack\n</code></pre>\n\n<p>Although you can loop over a dictionary and just get the keys with the following:</p>\n\n<pre><code>for key in dict:\n    print key \n</code></pre>\n\n<p>Can anyone provide a slightly less-advanced explanation for why you cannot iterate over a dictionary using key, value without using <code>.iteritems()</code> ? </p>\n"}, {"tags": ["python", "python-3.x", "grand-central-dispatch"], "answers": [{"comments": [{"owner": {"reputation": 3874, "user_id": 1060314, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/smjhs.jpg?s=128&g=1", "display_name": "AJ Venturella", "link": "https://stackoverflow.com/users/1060314/aj-venturella"}, "edited": false, "score": 0, "creation_date": 1431610210, "post_id": 30226578, "comment_id": 48578752, "body": "This is a nice solution, and I learned something! Thank you!! After doing some more digging however, I discovered that my issue actually arose from thinking about my code I needed to execute AND the Python Interpreter incorrectly. In my case, I&#39;m performing 1-off tasks, so I don&#39;t need to worry about thread affinity. The task runs inside the GCD thread, finishes and it&#39;s done forever."}], "tags": [], "owner": {"reputation": 28469, "user_id": 438982, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b0eb92aa440068ffb941daf9a92187ed?s=128&d=identicon&r=PG", "display_name": "ipmcc", "link": "https://stackoverflow.com/users/438982/ipmcc"}, "is_accepted": false, "score": 0, "last_activity_date": 1431557934, "last_edit_date": 1495542221, "creation_date": 1431557934, "answer_id": 30226578, "question_id": 30223073, "link": "https://stackoverflow.com/questions/30223073/embedding-python-using-non-python-threads-in-grand-central-dispatch-causes-py-f/30226578#30226578", "title": "Embedding Python, using Non-Python threads in Grand Central Dispatch causes Py_Finalize errors", "body": "<p>You said:</p>\n\n<blockquote>\n  <p>But none of those specifically deal with Grand Central Dispatch. I\n  don't know if it matters or not as it's likely all just threads under\n  the hood</p>\n</blockquote>\n\n<p>Yes, ultimately, GCD blocks must execute on one OS thread or another, but GCD queues are <em>not</em> an abstraction on top of a single thread, and (with the exception of the main queue) make no promises about thread affinity at all. In other words, there's no way to guarantee that submitted blocks are executed on the same thread or any specific thread, nor is it wise to make any assumptions about the thread they end up executing on.</p>\n\n<p>The safest, most straightforward way to go about this will likely be for you to <em>explicitly</em> manage the OS threads (either via <code>NSThread</code> or the <code>pthreads</code> API) that you plan to use for running Python code. The thread management inside GCD is, at the end of the day, a private implementation detail, meaning that even if you manage to get something that works now, Apple could make some subtle change to the thread management in GCD and break your app in the future.</p>\n\n<p>In sum, GCD queues probably aren't the right tool for this job. </p>\n\n<p>I recently posted <a href=\"https://stackoverflow.com/questions/29913044/gcd-nsthread-and-performselectoronthread-issues/29928756#29928756\">another answer describing a way to manage a private thread for wrapping a third-party library that demanded thread affinity</a>. It may be of some interest to you.</p>\n"}, {"tags": [], "owner": {"reputation": 3874, "user_id": 1060314, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/smjhs.jpg?s=128&g=1", "display_name": "AJ Venturella", "link": "https://stackoverflow.com/users/1060314/aj-venturella"}, "is_accepted": false, "score": 1, "last_activity_date": 1431610961, "creation_date": 1431610961, "answer_id": 30238938, "question_id": 30223073, "link": "https://stackoverflow.com/questions/30223073/embedding-python-using-non-python-threads-in-grand-central-dispatch-causes-py-f/30238938#30238938", "title": "Embedding Python, using Non-Python threads in Grand Central Dispatch causes Py_Finalize errors", "body": "<p>As mentioned previously, I was thinking about my code and I was thinking about the embedded Python Interpreter incorrectly. It had nothing to do with GCD and everything to do with my misunderstanding of some facets of embedded Python. I may still have misunderstandings, but the logic below matches my expectations of what I thought it should be doing, and my error is gone.</p>\n\n<p>What I was attempting to do was run one-off tasks, not keep anything around. Thinking I needed threading here is what tripped me up. </p>\n\n<p>What I was doing, was acquiring the GIL and then importing some python code that used the <code>threading</code> module. When you do that, the interpreter registers that you have brought in the threading module, as when you <code>Py_Finalize</code> it jumps though some hoops to ensure all of the child threads you that may or may not be present are shut down. I was effectively pulling the rug out from under it, which was causing my error.  Instead, the work I needed done was more conducive to <code>Py_NewInterpreter</code>. It runs the exact same <code>threading</code> shutdown procedure as <code>Py_Finalize</code> when you call <code>Py_EndInterpreter</code> but is isolated to itself.</p>\n\n<p>So my final GCD one-and-done code looks as follows:</p>\n\n<p><strong>Initialization</strong></p>\n\n<pre><code>- (void)initialize\n{\n    Py_Initialize();\n    PyEval_InitThreads();\n\n    [self updateSysPath];\n\n    // Release the GIL\n    self.threadState = PyEval_SaveThread();\n    self.running = YES;\n\n}\n</code></pre>\n\n<p><strong>Task Execution</strong></p>\n\n<pre><code>- (void)beginTask:(nonnull void (^)(Runtime * __nonnull))task completion:(nullable void (^)(Runtime * __nonnull))completion\n{\n    dispatch_async(self.pythonQueue, ^{\n\n        PyInterpreterState * mainInterpreterState = self.threadState-&gt;interp;\n        PyThreadState * taskState = PyThreadState_New(mainInterpreterState);\n\n        // Acquire the GIL\n        PyEval_AcquireThread(taskState);\n\n        PyThreadState* tstate = Py_NewInterpreter();\n        [self updateSysPath];\n\n        task(self);\n\n        // when Py_EndInterpreter is called, the current \n        // thread state is set to NULL, \n        // so we need to put ourselves back on\n        // the taskState, and release the GIL\n        Py_EndInterpreter(tstate);\n        PyThreadState_Swap(taskState);\n\n        // release the GIL\n        PyEval_ReleaseThread(taskState);\n\n        // cleanup\n        PyThreadState_Clear(taskState);\n        PyThreadState_Delete(taskState);\n\n        if (completion){\n            dispatch_async(dispatch_get_main_queue(), ^{\n                completion(self);\n            });\n        }\n    });\n}\n</code></pre>\n\n<p><strong>Finalization</strong></p>\n\n<pre><code>- (void)finalize\n{\n    // acquire the GIL\n    PyEval_RestoreThread(self.threadState);\n    Py_Finalize();\n    self.running = NO;\n}\n</code></pre>\n"}], "owner": {"reputation": 3874, "user_id": 1060314, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/smjhs.jpg?s=128&g=1", "display_name": "AJ Venturella", "link": "https://stackoverflow.com/users/1060314/aj-venturella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 815, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1431610961, "creation_date": 1431543196, "last_edit_date": 1495539874, "question_id": 30223073, "link": "https://stackoverflow.com/questions/30223073/embedding-python-using-non-python-threads-in-grand-central-dispatch-causes-py-f", "title": "Embedding Python, using Non-Python threads in Grand Central Dispatch causes Py_Finalize errors", "body": "<p>This is happening in <code>Python 3.4.3</code> from non-python created threads:</p>\n\n<p><a href=\"https://docs.python.org/3.4/c-api/init.html#non-python-created-threads\" rel=\"nofollow noreferrer\">https://docs.python.org/3.4/c-api/init.html#non-python-created-threads</a></p>\n\n<p>There are a couple question on SO that take a look at a similar issue from within C/C++ applications. </p>\n\n<p><a href=\"https://stackoverflow.com/questions/27844676/assertionerror-3-x-only-when-calling-py-finalize-with-threads\">AssertionError (3.X only) when calling Py_Finalize with threads</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/27207025/fatal-error-during-py-finalize-in-embedded-python-application\">Fatal error during Py_Finalize in embedded Python application</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/15470367/pyeval-initthreads-in-python-3-how-when-to-call-it-the-saga-continues-ad-naus\">PyEval_InitThreads in Python 3: How/when to call it? (the saga continues ad nauseum)</a></p>\n\n<p>But none of those specifically deal with Grand Central Dispatch. I don't know if it matters or not as it's likely all just threads under the hood. </p>\n\n<p>Attempting to apply the knowledge from those posts however, still causes me issues.  </p>\n\n<p>So here is where I am at currently, I have an obj-c class that represents my Python Runtime, and I have the following relevant methods:</p>\n\n<pre><code>- (void)initialize\n{\n    Py_Initialize();\n    PyEval_InitThreads();\n\n    PyObject* sysPath = PySys_GetObject((char*)\"path\");\n\n    for(NSString * path in self.pythonPath){\n        PyList_Append(sysPath, objc_convert_string(path));\n    }\n\n    // not calling PyEval_SaveThread \n    // causes beginTask below to die on \n    // PyEval_AcquireThread\n\n    // self.threadState = PyThreadState_Get();\n    // release the GIL, this shouldn't need to be\n    // done, as I understand it, \n    // but as the comment above states, if I don't\n    // beginTask will fail at PyEval_AcquireThread\n    self.threadState = PyEval_SaveThread();\n    self.running = YES;\n}\n</code></pre>\n\n<p>That is how I initialize Python. I then invoke python commands via:</p>\n\n<pre><code>- (void)beginTask:(nonnull void (^)(void))task completion:(nullable void (^)(void))completion\n{\n    dispatch_async(self.pythonQueue, ^{\n\n        PyInterpreterState * mainInterpreterState = self.threadState-&gt;interp;\n        PyThreadState * myThreadState = PyThreadState_New(mainInterpreterState);\n        PyEval_AcquireThread(myThreadState);\n\n        // Perform any Py_* related functions here\n        task();\n\n        PyEval_ReleaseThread(PyThreadState_Get());\n\n        if (completion){\n            dispatch_async(dispatch_get_main_queue(), ^{\n                completion();\n            });\n        }\n\n    });\n}\n</code></pre>\n\n<p>In the case of doing a long running operation, I have some code that does quite of bit of Jinja template rendering an saving to the filesystem. I want to clean up after that is done, so I call <code>Py_Finalize</code> and then go and reinitialize, using the above method enter my issue:</p>\n\n<pre><code>- (void)finalize\n{\n    PyEval_RestoreThread(self.threadState);\n\n    // Problems here\n    Py_Finalize();\n\n    self.running = NO;\n}\n</code></pre>\n\n<p>This causes the following error in Python:</p>\n\n<pre><code>Exception ignored in: &lt;module 'threading' from '/Users/blitz6/Library/Developer/Xcode/DerivedData/Live-cblwxzmbsdpraeebpregeuhikwzh/Build/Products/Debug/LivePython.framework/Resources/python3.4/lib/python3.4/threading.py'&gt;\nTraceback (most recent call last):\n  File \"/Users/blitz6/Library/Developer/Xcode/DerivedData/Live-cblwxzmbsdpraeebpregeuhikwzh/Build/Products/Debug/LivePython.framework/Resources/python3.4/lib/python3.4/threading.py\", line 1296, in _shutdown\n    _main_thread._delete()\n  File \"/Users/blitz6/Library/Developer/Xcode/DerivedData/Live-cblwxzmbsdpraeebpregeuhikwzh/Build/Products/Debug/LivePython.framework/Resources/python3.4/lib/python3.4/threading.py\", line 1019, in _delete\n    del _active[get_ident()]\nKeyError: 140735266947840\n</code></pre>\n\n<p>I have tried to deal with this a few different ways including, using <code>PyGILState_Ensure()</code> and <code>PyGILState_Release(myState);</code> in <code>beginTask</code>:</p>\n\n<pre><code>- (void)beginTask:(nonnull void (^)(void))task completion:(nullable void (^)(void))completion\n{\n\n    dispatch_async(self.pythonQueue, ^{\n\n        PyGILState_STATE state = PyGILState_Ensure();\n\n        task();\n\n        PyGILState_Release(state);\n\n        if (completion){\n            dispatch_async(dispatch_get_main_queue(), ^{\n                completion();\n            });\n        }\n    });\n}\n</code></pre>\n\n<p>But that will cause this error in the <code>finalize</code> method above:</p>\n\n<pre><code>Exception ignored in: &lt;module 'threading' from '/Users/blitz6/Library/Developer/Xcode/DerivedData/Live-cblwxzmbsdpraeebpregeuhikwzh/Build/Products/Debug/LivePython.framework/Resources/python3.4/lib/python3.4/threading.py'&gt;\nTraceback (most recent call last):\n  File \"/Users/blitz6/Library/Developer/Xcode/DerivedData/Live-cblwxzmbsdpraeebpregeuhikwzh/Build/Products/Debug/LivePython.framework/Resources/python3.4/lib/python3.4/threading.py\", line 1289, in _shutdown\n    assert tlock.locked()\nAssertionError: \n</code></pre>\n\n<p>So I'm pretty much stuck with: How do I <code>Py_Finalize</code> without getting some kind of error. Clearly I'm not understanding something. I can also confirm, via xcode when I hit my breakpoints, that my <code>dispatch_async</code> block is being run from another thread that is not the main thread.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Tinkering a bit, I discovered that, this:</p>\n\n<pre><code>PyObject* module = PyImport_ImportModule(\"requests\");\n</code></pre>\n\n<p>while I am on another thread, will cause this error when I <code>Py_Finalize</code></p>\n\n<pre><code>Exception ignored in: &lt;module 'threading' from '/Users/blitz6/Library/Developer/Xcode/DerivedData/Live-cblwxzmbsdpraeebpregeuhikwzh/Build/Products/Debug/LivePython.framework/Resources/python3.4/lib/python3.4/threading.py'&gt;\nTraceback (most recent call last):\n  File \"/Users/blitz6/Library/Developer/Xcode/DerivedData/Live-cblwxzmbsdpraeebpregeuhikwzh/Build/Products/Debug/LivePython.framework/Resources/python3.4/lib/python3.4/threading.py\", line 1296, in _shutdown\n    _main_thread._delete()\n  File \"/Users/blitz6/Library/Developer/Xcode/DerivedData/Live-cblwxzmbsdpraeebpregeuhikwzh/Build/Products/Debug/LivePython.framework/Resources/python3.4/lib/python3.4/threading.py\", line 1019, in _delete\n    del _active[get_ident()]\nKeyError: 140735266947840\n</code></pre>\n\n<p>If I import:</p>\n\n<pre><code>PyObject* module = PyImport_ImportModule(\"os\");\nOR\nPyObject* module = PyImport_ImportModule(\"json\");\n</code></pre>\n\n<p>everything runs fine as examples. When I start importing my own modules, is where I run into the problems.</p>\n\n<p>Inside <code>Py_Finalize</code>, <code>wait_for_thread_shutdown();</code> is where I run into this issue. I guess, according to the comments, it's related to:</p>\n\n<blockquote>\n  <p>/* Wait until threading._shutdown completes, provided\n     the threading module was imported in the first place.\n     The shutdown routine will wait until all non-daemon\n     \"threading\" threads have completed. */</p>\n</blockquote>\n\n<p>Specifically in <code>wait_for_thread_shutdown</code>:</p>\n\n<pre><code>PyThreadState *tstate = PyThreadState_GET();\nPyObject *threading = PyMapping_GetItemString(tstate-&gt;interp-&gt;modules,\n                                              \"threading\");\nif (threading == NULL) {\n    /* threading not imported */\n    PyErr_Clear();\n    return;\n}\n</code></pre>\n\n<p><code>tstate</code> comes back <strong>NULL</strong> but <code>threading</code> is not <strong>NULL</strong> which skips the the <code>PyErr_Clear()</code> code path and executes:</p>\n\n<pre><code>result = _PyObject_CallMethodId(threading, &amp;PyId__shutdown, \"\");\nif (result == NULL) {\n    PyErr_WriteUnraisable(threading);\n}\nelse {\n    Py_DECREF(result);\n}\nPy_DECREF(threading);\n</code></pre>\n\n<p>If I just:</p>\n\n<pre><code>PyObject* module = PyImport_ImportModule(\"json\");\n</code></pre>\n\n<p>Then, <code>PyErr_WriteUnraisable(threading);</code> is executed in <code>wait_for_thread_shutdown</code></p>\n\n<pre><code>result = _PyObject_CallMethodId(threading, &amp;PyId__shutdown, \"\");\nif (result == NULL) {\n    PyErr_WriteUnraisable(threading);\n}\n</code></pre>\n"}, {"tags": ["python", "numpy", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 775, "user_id": 3377926, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wvNaI.jpg?s=128&g=1", "display_name": "Bendik", "link": "https://stackoverflow.com/users/3377926/bendik"}, "edited": false, "score": 0, "creation_date": 1431595942, "post_id": 30224835, "comment_id": 48570034, "body": "This looked much better, worked perfectly wit my data. Thanks!"}], "tags": [], "owner": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "is_accepted": true, "score": 2, "last_activity_date": 1431549777, "creation_date": 1431549777, "answer_id": 30224835, "question_id": 30223069, "link": "https://stackoverflow.com/questions/30223069/color-plot-with-specified-axes/30224835#30224835", "title": "Color plot with specified axes", "body": "<p>It sounds like you want <code>pcolormesh</code> instead of <code>imshow</code>.</p>\n\n<p>For example:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nm, n = 20, 30\n\n# Generate randomly spaced, but increasing time and frequency vectors\ntime = np.random.normal(0, 1, n).cumsum()\nfrequency = np.random.normal(0, 1, m).cumsum()\ndata = np.random.random((m,n))\n\nfig, ax = plt.subplots()\nax.pcolormesh(time, frequency, data, cmap='gist_earth')\nax.axis('tight')\nplt.show()\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/sADoL.png\" alt=\"enter image description here\"></p>\n"}], "owner": {"reputation": 775, "user_id": 3377926, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/wvNaI.jpg?s=128&g=1", "display_name": "Bendik", "link": "https://stackoverflow.com/users/3377926/bendik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 30224835, "answer_count": 1, "score": 2, "last_activity_date": 1431549777, "creation_date": 1431543187, "question_id": 30223069, "link": "https://stackoverflow.com/questions/30223069/color-plot-with-specified-axes", "title": "Color plot with specified axes", "body": "<p>I have a vector with time points, a vector with frequency points (log-scale) and a (M,N)-matrix where M is the number of frequencies and N is the number of time points.</p>\n\n<p>I want to make a plot where x-axis is the time vector, y-axis is the frequency vector (which is in log-scale) and each point has a color determined by the corresponding value in the matrix.</p>\n\n<p>I have been looking at matplotlib's imshow, but I can't seem to get it working, nor can I find a good example.</p>\n"}, {"tags": ["python", "macos", "keyboard"], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1431547644, "post_id": 30223439, "comment_id": 48552406, "body": "This doesn&#39;t explain how you would use the API from Python, however."}, {"owner": {"reputation": 3889, "user_id": 175320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88e42a3912a2296d240a18b5c1ffa4f9?s=128&d=identicon&r=PG", "display_name": "TkTech", "link": "https://stackoverflow.com/users/175320/tktech"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1431550128, "post_id": 30223439, "comment_id": 48553633, "body": "@chepner I believe it does. pyobjc (and the specific page linked) is how you would use these these two functions from python. Remember that stackoverflow is for helping you solve a problem, not for doing all the work for you. The resulting python should be under 6 lines."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1431550189, "post_id": 30223439, "comment_id": 48553661, "body": "Sorry, I completely overlooked the reference to pyobjc."}], "tags": [], "owner": {"reputation": 3889, "user_id": 175320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88e42a3912a2296d240a18b5c1ffa4f9?s=128&d=identicon&r=PG", "display_name": "TkTech", "link": "https://stackoverflow.com/users/175320/tktech"}, "is_accepted": true, "score": 3, "last_activity_date": 1431544471, "creation_date": 1431544471, "answer_id": 30223439, "question_id": 30223012, "link": "https://stackoverflow.com/questions/30223012/python-changing-keyboard-language-in-mac-os-x/30223439#30223439", "title": "python changing keyboard language in Mac OS X", "body": "<p>Yes, but it isn't fun.</p>\n\n<p>The method you're looking for is <code>TISSelectInputSource</code> and the related <a href=\"https://developer.apple.com/library/mac/documentation/TextFonts/Reference/TextInputSourcesReference/\" rel=\"nofollow\">TIS methods</a>. TIS is a Core Foundation library written in C. You will want to use <a href=\"https://pythonhosted.org/pyobjc/apinotes/CoreFoundation.html\" rel=\"nofollow\">pyobjc</a>.</p>\n\n<p>Once you're actually setup, the process is simple. Use <a href=\"https://developer.apple.com/library/mac/documentation/TextFonts/Reference/TextInputSourcesReference/#//apple_ref/c/func/TISCreateInputSourceList\" rel=\"nofollow\">TISCreateInputSourceList</a> to get the <code>TISInputSourceRef</code> for the language you want to use and pass it to <code>TISSelectInputSource</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15027091, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K2BWOz2kEGQ/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckpkW9tes-7AiWikiwU2kPzE59K7w/s96-c/photo.jpg?sz=128", "display_name": "Tiger J. Wang", "link": "https://stackoverflow.com/users/15027091/tiger-j-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1610938093, "creation_date": 1610938093, "answer_id": 65768195, "question_id": 30223012, "link": "https://stackoverflow.com/questions/30223012/python-changing-keyboard-language-in-mac-os-x/65768195#65768195", "title": "python changing keyboard language in Mac OS X", "body": "<p>TkTech offers some general pointers, but it appears that pyobjc doesn't actually wrap the two Carbon methods you need (<code>TISCreateInputSourceList</code> and <code>TISSelectInputSource</code>). In fact, pyobjc discontinued Carbon support altogether in Python 3.</p>\n<p>So yes, pyobjc is going to be helpful for calling Objective-C code in Python, but you're going to have to manually wrap those two methods you need, probably using <code>ctypes</code>. The code to do this is lengthier than it should be and a bit tedious, so I'll just link you to <a href=\"https://github.com/tigerjwang/pyinputlanguage/blob/main/pyinputlanguage.py\" rel=\"nofollow noreferrer\">my implementation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 2206, "user_id": 1833539, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/55cb37f839109add499ab85ac2c033be?s=128&d=identicon&r=PG", "display_name": "Denny Weinberg", "link": "https://stackoverflow.com/users/1833539/denny-weinberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1615410586, "creation_date": 1615410586, "answer_id": 66572892, "question_id": 30223012, "link": "https://stackoverflow.com/questions/30223012/python-changing-keyboard-language-in-mac-os-x/66572892#66572892", "title": "python changing keyboard language in Mac OS X", "body": "<p>Calling xkbswitch from python using subprocess would probably be easier than the other solutions you find here.</p>\n"}], "owner": {"reputation": 239, "user_id": 3482876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa5e9cc24230727af69c1b5966a51e2?s=128&d=identicon&r=PG&f=1", "display_name": "user3482876", "link": "https://stackoverflow.com/users/3482876/user3482876"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 30223439, "answer_count": 3, "score": 2, "last_activity_date": 1615410586, "creation_date": 1431543024, "question_id": 30223012, "link": "https://stackoverflow.com/questions/30223012/python-changing-keyboard-language-in-mac-os-x", "title": "python changing keyboard language in Mac OS X", "body": "<p>I wrote python software that requires both german and english input. Currently, I am using the Mac shortcut cmd-space to quickly change keyboard layouts, but I need to do this hundreds of times, which slows things down. Since I know exactly when English vs German input is needed, is there a way to programmatically change the keyboard language in python? </p>\n\n<p>I am using Mac OS X Yosemite.</p>\n"}, {"tags": ["python", "mysql", "sqlite"], "comments": [{"owner": {"reputation": 662, "user_id": 3998520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d77a6e0a246452554f23ba41d0245bf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3998520/matthew"}, "edited": false, "score": 1, "creation_date": 1431543239, "post_id": 30222964, "comment_id": 48549908, "body": "Just update the MySQL database directly, why would you write the data to a sqlite database and then write the same data to a MySQL database, unless there&#39;s something I&#39;m missing..?"}, {"owner": {"reputation": 768, "user_id": 4789843, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7b0345992a82b453ff9e68376fd3f791?s=128&d=identicon&r=PG&f=1", "display_name": "deseosuho", "link": "https://stackoverflow.com/users/4789843/deseosuho"}, "reply_to_user": {"reputation": 662, "user_id": 3998520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d77a6e0a246452554f23ba41d0245bf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3998520/matthew"}, "edited": false, "score": 0, "creation_date": 1431544503, "post_id": 30222964, "comment_id": 48550683, "body": "I imagine there may be existing methods of setting up a mysql database as a slave to a local sqlite db that would not be available for the csv option.  I would think that with the csv option you&#39;d need to upload the entire file to the server with each update, then create a table, then compare it with the existing database.  Ideally I would have architecture that supports comparing the local db to the server db and only making changes where needed."}, {"owner": {"reputation": 662, "user_id": 3998520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d77a6e0a246452554f23ba41d0245bf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3998520/matthew"}, "edited": false, "score": 0, "creation_date": 1431544731, "post_id": 30222964, "comment_id": 48550821, "body": "&quot;You imagine there may be&quot; as in you know for sure that what you want doesn&#39;t exist, or just guessing? I can&#39;t help (or at least try to!) if I don&#39;t really know what the problem is. My answer so far is: load csv into python, update/insert/whatever MySQL database in question. You can have python code to compare the differences, or sql code, or ruby code, or whatever, I don&#39;t see a reason why an sqlite middle man would be needed :/"}, {"owner": {"reputation": 768, "user_id": 4789843, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7b0345992a82b453ff9e68376fd3f791?s=128&d=identicon&r=PG&f=1", "display_name": "deseosuho", "link": "https://stackoverflow.com/users/4789843/deseosuho"}, "reply_to_user": {"reputation": 662, "user_id": 3998520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d77a6e0a246452554f23ba41d0245bf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3998520/matthew"}, "edited": false, "score": 0, "creation_date": 1431544895, "post_id": 30222964, "comment_id": 48550920, "body": "Apologies if I&#39;m not being clear.  Embedded in my question is &#39;Are there advantages in synching mysql with sqlite vs csv?&#39;  Sounds like you aren&#39;t aware of any.  Thanks."}, {"owner": {"reputation": 5102, "user_id": 327694, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/affc703514153388019ab26f0eb6ab7d?s=128&d=identicon&r=PG", "display_name": "Josep Valls", "link": "https://stackoverflow.com/users/327694/josep-valls"}, "reply_to_user": {"reputation": 662, "user_id": 3998520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d77a6e0a246452554f23ba41d0245bf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3998520/matthew"}, "edited": false, "score": 0, "creation_date": 1431637252, "post_id": 30222964, "comment_id": 48595424, "body": "I don&#39;t think the problem is @Matthew not being aware, it&#39;s just something really odd to do and if any, it&#39;s probably something ad-hoc you won&#39;t be able to reuse. If you were talking about multiple MySQL servers, that&#39;s a different scenario."}], "owner": {"reputation": 768, "user_id": 4789843, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7b0345992a82b453ff9e68376fd3f791?s=128&d=identicon&r=PG&f=1", "display_name": "deseosuho", "link": "https://stackoverflow.com/users/4789843/deseosuho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 546, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431542883, "creation_date": 1431542883, "question_id": 30222964, "link": "https://stackoverflow.com/questions/30222964/synchronize-mysql-server-to-local-db-csv-or-sqlite", "title": "synchronize mysql server to local db: csv or sqlite?", "body": "<h2>I'm looking for the most efficient way to regularly update my MySQL server with data stored across several local .csv files.</h2>\n\n<p>I have a local database of scraped and parsed data from the web.  I process it in python, and the final step is a human audit of a csv file with the help of excel vba scripts.  </p>\n\n<p>For updating the server based on this audited data, is it worthwhile to first use python to load my csv data into an sqlite database, or should I be feeding the csv's directly to my server?  What are my options for automating this synchronization?  The MySQL database serves as a master to several client databases, but will only be fed updates from a single (my local) machine.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "python-3.x", "beautifulsoup"], "comments": [{"owner": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "edited": false, "score": 0, "creation_date": 1431544139, "post_id": 30222953, "comment_id": 48550467, "body": "Do you want the text right next to <code>LINK_TO_FILE</code>?"}, {"owner": {"reputation": 572, "user_id": 4457687, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh6.googleusercontent.com/-0wfUTwt-gqo/AAAAAAAAAAI/AAAAAAAAADw/-nJ200gilJ4/photo.jpg?sz=128", "display_name": "Alex Zel", "link": "https://stackoverflow.com/users/4457687/alex-zel"}, "reply_to_user": {"reputation": 5196, "user_id": 1461896, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/cq0HM.jpg?s=128&g=1", "display_name": "Animesh Pandey", "link": "https://stackoverflow.com/users/1461896/animesh-pandey"}, "edited": false, "score": 0, "creation_date": 1431544214, "post_id": 30222953, "comment_id": 48550519, "body": "yes, on the web page it looks like this: link to file.zip Win8.1  link to file.zip Win10  so i need the WinXX right next to it"}], "answers": [{"comments": [{"owner": {"reputation": 572, "user_id": 4457687, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh6.googleusercontent.com/-0wfUTwt-gqo/AAAAAAAAAAI/AAAAAAAAADw/-nJ200gilJ4/photo.jpg?sz=128", "display_name": "Alex Zel", "link": "https://stackoverflow.com/users/4457687/alex-zel"}, "edited": false, "score": 0, "creation_date": 1431611310, "post_id": 30223689, "comment_id": 48579491, "body": "This looks like it could work, i&#39;m tried it out but sometimes the linkText is a &quot;NoneType&quot; class, and then i can&#39;t do anything with it, i assume this happens when the link has no OS version next to it (some drivers are OS independent). is there any way i can bypass that? i tried comparing &quot; type() == &#39;bs4.element.Tag&#39; &quot; but that didn&#39;t help either"}, {"owner": {"reputation": 24723, "user_id": 3150943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06074c6f020f2509f0b51a2c0ad3a9a8?s=128&d=identicon&r=PG", "display_name": "nu11p01n73R", "link": "https://stackoverflow.com/users/3150943/nu11p01n73r"}, "reply_to_user": {"reputation": 572, "user_id": 4457687, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh6.googleusercontent.com/-0wfUTwt-gqo/AAAAAAAAAAI/AAAAAAAAADw/-nJ200gilJ4/photo.jpg?sz=128", "display_name": "Alex Zel", "link": "https://stackoverflow.com/users/4457687/alex-zel"}, "edited": false, "score": 0, "creation_date": 1431612288, "post_id": 30223689, "comment_id": 48580180, "body": "I suspects you need to have conditional statements to make sure that the html structure is maintained all through out the input string. Or you can employ <code>try</code> statements to handle cases where you dont have OS version down the tree."}], "tags": [], "owner": {"reputation": 24723, "user_id": 3150943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06074c6f020f2509f0b51a2c0ad3a9a8?s=128&d=identicon&r=PG", "display_name": "nu11p01n73R", "link": "https://stackoverflow.com/users/3150943/nu11p01n73r"}, "is_accepted": true, "score": 1, "last_activity_date": 1431546244, "last_edit_date": 1431546244, "creation_date": 1431545491, "answer_id": 30223689, "question_id": 30222953, "link": "https://stackoverflow.com/questions/30222953/beautifulsoup-grab-text-with-link/30223689#30223689", "title": "Beautifulsoup, grab text with link", "body": "<p>Assuming that <code>string</code> contains the html content</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\nsoup = BeautifulSoup(string)\n\nfor pTag in soup.find_all('p'):\n        anchorTag =  pTag.findNext('a')\n        linkText =  pTag.find('span', {'class' : 'MsoHyperlink' } ).span.text\n        print \"LpTag.findNext('a')ink : \", anchorTag[\"href\"]\n        print \"Text to Link \", linkText\n        print\n</code></pre>\n\n<p>would give you an output</p>\n\n<pre><code>Link :  LINK_TO_FILE\nText to Link  Win8.1\n\nLink :  LINK_TO_FILE\nText to Link   Win10\n</code></pre>\n\n<p><strong>What it does?</strong></p>\n\n<p>By looking at the input string we can know that the anchors and text that we are interested in are present within the <code>p</code> tags. </p>\n\n<p>And that the text comes within a <code>span</code> tag which inturn comes under another <code>span</code> tag which occurs next to the anchor tag.</p>\n\n<hr>\n\n<ul>\n<li><p><code>soup.find_all('p')</code> The <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/#find-all\" rel=\"nofollow\">find_all</a> will return the list of <code>p</code> tags.</p></li>\n<li><p><code>pTag.findNext('a')</code> For each of the <code>p</code> tag, the <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/#find-all-next-and-find-next\" rel=\"nofollow\">findNext</a> will find the next occurence of the anchor tag. This anchor tag contains the relevant link</p></li>\n<li><p><code>pTag.find('span', {'class' : 'MsoHyperlink' } )</code> The <a href=\"http://www.crummy.com/software/BeautifulSoup/bs4/doc/#find\" rel=\"nofollow\">find</a> will find the <code>span</code> within the current <code>p</code> tag with the attribute <code>class</code> set as <code>MsoHyperlink</code></p>\n\n<ul>\n<li><p><code>.span</code> returns the span within the span returned bye <code>find</code></p></li>\n<li><p><code>.text</code> returns the text of the corresponding span</p></li>\n</ul></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 261, "user_id": 3078365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/983d379332efcd6195b19ad293092e1f?s=128&d=identicon&r=PG&f=1", "display_name": "Shay", "link": "https://stackoverflow.com/users/3078365/shay"}, "is_accepted": false, "score": 0, "last_activity_date": 1431546312, "creation_date": 1431546312, "answer_id": 30223899, "question_id": 30222953, "link": "https://stackoverflow.com/questions/30222953/beautifulsoup-grab-text-with-link/30223899#30223899", "title": "Beautifulsoup, grab text with link", "body": "<pre><code> os_cell = cells[4]\n os_span = os_cell.find(\"span\", class_=\"MsoHyperlink\")\n os = os_span.string\n</code></pre>\n"}], "owner": {"reputation": 572, "user_id": 4457687, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh6.googleusercontent.com/-0wfUTwt-gqo/AAAAAAAAAAI/AAAAAAAAADw/-nJ200gilJ4/photo.jpg?sz=128", "display_name": "Alex Zel", "link": "https://stackoverflow.com/users/4457687/alex-zel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 30223689, "answer_count": 2, "score": 0, "last_activity_date": 1431546312, "creation_date": 1431542841, "question_id": 30222953, "link": "https://stackoverflow.com/questions/30222953/beautifulsoup-grab-text-with-link", "title": "Beautifulsoup, grab text with link", "body": "<p>i'm making a web spider to automate some of my work.\nI have a table with lots of drivers and different version for different operating systems.\nSo far everything works fine but i'm having a hard time separating the links for each operating system.\nI'll post part of the html here, but i can't post the whole page.\nThe problem is i don't know can i grab each link and the text that's next to it, i can grab all of them but then i don't know what links if for what operating system.</p>\n\n<p>This is the content of one cell in the table, all i need is to get the link along with the OS verstion (win8.1, win10, win7)</p>\n\n<pre><code>&lt;p class=\"MsoNormal\" style=\"mso-line-height-alt:9.3pt\"&gt;&lt;span style=\"font-size:11.0pt;font-family:&amp;quot;Calibri&amp;quot;,sans-serif;color:#1F497D\"&gt;SfP/StP\n    &lt;a href=\"LINK_TO_FILE\"&gt;AHWFW0609P_WinB&lt;/a&gt;.zip\n    &lt;/span&gt;&lt;span class=\"MsoHyperlink\"&gt;&lt;b&gt;&lt;sup&gt;&lt;span style=\"font-size:11.0pt;\n    font-family:&amp;quot;Calibri&amp;quot;,sans-serif;color:#984806;background:white;text-decoration:\n    none;text-underline:none\"&gt;Win8.1&lt;/span&gt;&lt;/sup&gt;&lt;/b&gt;&lt;/span&gt;&lt;span style=\"font-size:11.0pt;font-family:&amp;quot;Calibri&amp;quot;,sans-serif\"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;\n\n&lt;p class=\"MsoNormal\" style=\"mso-line-height-alt:9.3pt\"&gt;&lt;span style=\"font-size:11.0pt;font-family:&amp;quot;Calibri&amp;quot;,sans-serif;color:#1F497D\"&gt;SfP/StP\n    &lt;a href=\"LINK_TO_FILE\"&gt;AHWFW0553P_WinT&lt;/a&gt;&lt;/span&gt;&lt;span style=\"color:#1F497D\"&gt;.&lt;/span&gt;&lt;span style=\"font-size:11.0pt;font-family:\n    &amp;quot;Calibri&amp;quot;,sans-serif;color:#1F497D\"&gt;zip&lt;/span&gt;&lt;span class=\"MsoHyperlink\"&gt;&lt;b&gt;&lt;sup&gt;&lt;span style=\"font-size:11.0pt;font-family:&amp;quot;Calibri&amp;quot;,sans-serif;color:#984806;\n    background:white;text-decoration:none;text-underline:none\"&gt; Win10&lt;/span&gt;&lt;/sup&gt;&lt;/b&gt;&lt;/span&gt;&lt;span class=\"MsoHyperlink\"&gt;&lt;b&gt;&lt;sup&gt;&lt;span style=\"color:#984806;background:white;\n    text-decoration:none;text-underline:none\"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/sup&gt;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;\n</code></pre>\n\n<p>here is the code i use to grab the names and the links.</p>\n\n<pre><code>file = open(r\"Path to HTML file\", 'rb')\ndrivers = {}\nrng_lst = [str(x) for x in range(5, 43)]\n\nsoup = bs4.BeautifulSoup(file)\n\ntable = soup.findAll('table')[0]\nfor row in table.findAll('tr'):\n    cells = row.findAll('td')\n    if len(cells) &gt; 4:\n        cell_num = cells[1].get_text(strip=True)\n        if any(cell_num == n for n in rng_lst):\n            drv_name = cells[2].get_text(strip=True)\n            drivers[drv_name] = {'links': []}\n            links = cells[4].findAll('a')\n            for link in links:\n                drivers[drv_name]['links'].append(link.get('href'))\n</code></pre>\n"}, {"tags": ["python", "cgi"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1431542625, "post_id": 30222753, "comment_id": 48549540, "body": "I don&#39;t know what you mean by &quot;called cyclically&quot;. If you have an infinite while loop, your function will never complete."}, {"owner": {"reputation": 1, "user_id": 4897092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fffbd72963efdf1cc5e53a2e43cb97a7?s=128&d=identicon&r=PG&f=1", "display_name": "Dirk van der Linden", "link": "https://stackoverflow.com/users/4897092/dirk-van-der-linden"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1431544558, "post_id": 30222753, "comment_id": 48550719, "body": "That&#39;s the point, indeed, the function remains running, but it looks like another instance of the function starts additionally, and a second, a third, and so on. In my browser the data grows and I can carry on scrolling down, the page increases always. When I remove the loop, this behaviour stops, and my page is refreshed every 5 seconds more or less. So I was thinking: what software part is deciding to refresh my page every 5 second, and re-run my function?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1431545386, "post_id": 30222753, "comment_id": 48551181, "body": "If your browser is refreshing repeatedly, then it&#39;s the browser that is calling the function repeatedly."}, {"owner": {"reputation": 1, "user_id": 4897092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fffbd72963efdf1cc5e53a2e43cb97a7?s=128&d=identicon&r=PG&f=1", "display_name": "Dirk van der Linden", "link": "https://stackoverflow.com/users/4897092/dirk-van-der-linden"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1431546094, "post_id": 30222753, "comment_id": 48551572, "body": "Possibly. I am a newbie in CGI. To be more concrete with my question, I tried in the tutorial of <a href=\"http://www.cs.virginia.edu/~lab2q/lesson_7/\" rel=\"nofollow noreferrer\">cs.virginia.edu/~lab2q/lesson_7</a>  example 7.1, and changed some things in it. I probably first need to understand what FieldStorage() does."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1431546635, "post_id": 30222753, "comment_id": 48551846, "body": "Note that that code a) has several indentation errors, which is probably the cause of your recursion, and b) is from a site that&#39;s not been updated in 15 years. You should not be using CGI these days unless you have a really good reason. Use a proper Python web framework."}, {"owner": {"reputation": 1, "user_id": 4897092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fffbd72963efdf1cc5e53a2e43cb97a7?s=128&d=identicon&r=PG&f=1", "display_name": "Dirk van der Linden", "link": "https://stackoverflow.com/users/4897092/dirk-van-der-linden"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1431551272, "post_id": 30222753, "comment_id": 48554241, "body": "Thanks! There was indeed a code error. Besides, for another project, I use django, but there I have a nice recent computer available. I tried to explore CGI because I thought this would be more suitable in a very small embedded device. Am I mistaken?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1431552694, "post_id": 30222753, "comment_id": 48554975, "body": "I don&#39;t know, to be honest. That might be the &quot;really good reason&quot;. Although it&#39;s at least plausible that the overhead of starting up a new interpreter for every page request, as CGI does, could be more expensive on such a device than keeping a long-lasting lightweight WSGI process running. It&#39;d be worth profiling."}], "owner": {"reputation": 1, "user_id": 4897092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fffbd72963efdf1cc5e53a2e43cb97a7?s=128&d=identicon&r=PG&f=1", "display_name": "Dirk van der Linden", "link": "https://stackoverflow.com/users/4897092/dirk-van-der-linden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431542182, "creation_date": 1431542182, "question_id": 30222753, "link": "https://stackoverflow.com/questions/30222753/how-often-is-my-python-program-in-cgi-bin-called", "title": "How often is my python program in CGI-BIN called?", "body": "<p>I copied a python file on my CGI-BIN folder, and expect it to run when I browse to the webserver. The python program is structured with a few function definitions (def...), and at the end the main function. So far, so good.</p>\n\n<p>At the end of the main() function, I left an infinite while loop because I wanted to let the main() function called cyclically. </p>\n\n<p>This works, but I observed however, that my main() program is called cyclically anyway. So my endless loop and another -kind of hidden- loop cross each other.</p>\n\n<p>Is an executable python file on cgi-bin always called cyclically. And if so, what is the calling frequency? Can you control this?</p>\n\n<p>Thanks for your responses. </p>\n"}, {"tags": ["python", "matplotlib", "grid", "draw", "imshow"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1431542401, "post_id": 30222747, "comment_id": 48549393, "body": "See <a href=\"https://stackoverflow.com/questions/14391959/heatmap-in-matplotlib-with-pcolor\">this post</a> and note use can use <code>ax.pcolor</code> with a user-defined mapping of colors to values, so you can get your red, blue, black."}, {"owner": {"reputation": 77, "user_id": 2844013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VbreV.png?s=128&g=1", "display_name": "Muddy", "link": "https://stackoverflow.com/users/2844013/muddy"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1431545131, "post_id": 30222747, "comment_id": 48551045, "body": "@Cyber - got it working! Thanks for the help!"}], "answers": [{"tags": [], "owner": {"reputation": 61870, "user_id": 395857, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Z99mk.jpg?s=128&g=1", "display_name": "Franck Dernoncourt", "link": "https://stackoverflow.com/users/395857/franck-dernoncourt"}, "is_accepted": false, "score": 4, "last_activity_date": 1431576138, "creation_date": 1431576138, "answer_id": 30229016, "question_id": 30222747, "link": "https://stackoverflow.com/questions/30222747/drawing-a-grid-in-python-with-colors-corresponding-to-different-values/30229016#30229016", "title": "Drawing a grid in Python, with colors corresponding to different values", "body": "<p>One solution with matplotlib and NumPy:</p>\n\n<p><img src=\"https://i.stack.imgur.com/5GgX7.png\" alt=\"enter image description here\"></p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\n\ndef show_values(pc, fmt=\"%.2f\", **kw):\n    '''\n    Heatmap with text in each cell with matplotlib's pyplot\n    Source: http://stackoverflow.com/a/25074150/395857 \n    By HYRY\n    '''\n    from itertools import izip\n    pc.update_scalarmappable()\n    ax = pc.get_axes()\n    for p, color, value in izip(pc.get_paths(), pc.get_facecolors(), pc.get_array()):\n        x, y = p.vertices[:-2, :].mean(0)\n        if np.all(color[:3] &gt; 0.5):\n            color = (0.0, 0.0, 0.0)\n        else:\n            color = (1.0, 1.0, 1.0)\n        ax.text(x, y, fmt % value, ha=\"center\", va=\"center\", color=color, **kw)\n\ndef cm2inch(*tupl):\n    '''\n    Specify figure size in centimeter in matplotlib\n    Source: http://stackoverflow.com/a/22787457/395857\n    By gns-ank\n    '''\n    inch = 2.54\n    if type(tupl[0]) == tuple:\n        return tuple(i/inch for i in tupl[0])\n    else:\n        return tuple(i/inch for i in tupl)\n\ndef heatmap(AUC, title, xlabel, ylabel, xticklabels, yticklabels):\n    '''\n    Inspired by:\n    - http://stackoverflow.com/a/16124677/395857 \n    - http://stackoverflow.com/a/25074150/395857\n    '''\n\n    # Plot it out\n    fig, ax = plt.subplots()    \n    c = ax.pcolor(AUC, edgecolors='k', linestyle= 'dashed', linewidths=0.2, cmap='YlOrRd', vmin=0.0, vmax=2.0)\n\n    # put the major ticks at the middle of each cell\n    ax.set_yticks(np.arange(AUC.shape[0]) + 0.5, minor=False)\n    ax.set_xticks(np.arange(AUC.shape[1]) + 0.5, minor=False)\n\n    # set tick labels\n    #ax.set_xticklabels(np.arange(1,AUC.shape[1]+1), minor=False)\n    ax.set_xticklabels(xticklabels, minor=False)\n    ax.set_yticklabels(yticklabels, minor=False)\n\n    # set title and x/y labels\n    plt.title(title)\n    plt.xlabel(xlabel)\n    plt.ylabel(ylabel)      \n\n    # Remove last blank column\n    plt.xlim( (0, AUC.shape[1]) )\n\n    # Turn off all the ticks\n    ax = plt.gca()    \n    for t in ax.xaxis.get_major_ticks():\n        t.tick1On = False\n        t.tick2On = False\n    for t in ax.yaxis.get_major_ticks():\n        t.tick1On = False\n        t.tick2On = False\n\n    # Add color bar\n    plt.colorbar(c)\n\n    # Add text in each cell \n    show_values(c)\n\n    # resize \n    fig = plt.gcf()\n    fig.set_size_inches(cm2inch(40, 20))\n\n\n\ndef main():\n    data = np.array([[1,1,1,1,1,1,1,1,1],    \n                     [1,0,0,0,0,0,0,0,1],    \n                     [1,0,0,0,2,2,0,0,1],    \n                     [1,0,0,0,2,2,0,0,1],    \n                     [1,1,1,1,1,1,1,1,1]])\n    x_axis_size = data.shape[1]\n    y_axis_size = data.shape[0]\n    title = \"Title\"\n    xlabel= \"xlabel\"\n    ylabel=\"ylabel\"\n    xticklabels = range(1, x_axis_size+1) # could be text\n    yticklabels = range(1, y_axis_size+1) # could be text   \n    heatmap(data, title, xlabel, ylabel, xticklabels, yticklabels)\n    plt.savefig('image_output.png', dpi=300, format='png', bbox_inches='tight') # use format='svg' or 'pdf' for vectorial pictures\n    plt.show()\n\n\nif __name__ == \"__main__\":\n    main()\n    #cProfile.run('main()') # if you want to do some profiling\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 2844013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VbreV.png?s=128&g=1", "display_name": "Muddy", "link": "https://stackoverflow.com/users/2844013/muddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3859, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1431576138, "creation_date": 1431542165, "last_edit_date": 1431542303, "question_id": 30222747, "link": "https://stackoverflow.com/questions/30222747/drawing-a-grid-in-python-with-colors-corresponding-to-different-values", "title": "Drawing a grid in Python, with colors corresponding to different values", "body": "<p>I'm attempting to draw a grid where for each value, a corresponding color is drawn. For instance:</p>\n\n<pre><code>[[1,1,1,1,1,1,1,1,1],    \n [1,0,0,0,0,0,0,0,1],    \n [1,0,0,0,2,2,0,0,1],    \n [1,0,0,0,2,2,0,0,1],    \n [1,1,1,1,1,1,1,1,1]]\n</code></pre>\n\n<p>would appear as a 9x5 grid with a blue border (for 1), filled with black (for 0), with a 2x2 block of red at the bottom (for 2).</p>\n\n<p>Apparently this can be done with <code>imshow</code> but I have no idea what the syntax would be.</p>\n\n<p>Thanks in advance for any help!</p>\n"}, {"tags": ["python", "windows", "m2crypto"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3664822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a8d0d9a4d650702cdf8f3549add3a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/3664822/ram"}, "edited": false, "score": 0, "creation_date": 1431628735, "post_id": 30240136, "comment_id": 48590637, "body": "Thanks a lot Mike, second link worked for me. I&#39;ve tried a lot to over come from this. Great help, thank you so much."}, {"owner": {"reputation": 518, "user_id": 6610330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IeMiX.png?s=128&g=1", "display_name": "alecxs", "link": "https://stackoverflow.com/users/6610330/alecxs"}, "edited": false, "score": 0, "creation_date": 1608336292, "post_id": 30240136, "comment_id": 115561820, "body": "pip install --egg M2CryptoWin64 <i>no such option: --egg</i>"}], "tags": [], "owner": {"reputation": 31264, "user_id": 393194, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/3d79d73463b194fb88957db095b92ea2?s=128&d=identicon&r=PG", "display_name": "Mike Driscoll", "link": "https://stackoverflow.com/users/393194/mike-driscoll"}, "is_accepted": true, "score": 0, "last_activity_date": 1431614314, "creation_date": 1431614314, "answer_id": 30240136, "question_id": 30222714, "link": "https://stackoverflow.com/questions/30222714/unable-to-install-m2crypto-package-in-windows-8-1-64-bit-machine/30240136#30240136", "title": "Unable to install M2Crypto package in Windows 8.1 64 bit machine", "body": "<p>Installing M2Crypto on Windows is a pain. Fortunately, some people have gone to the effort of creating Windows installers for M2Crypto:</p>\n\n<ul>\n<li><a href=\"https://pypi.python.org/pypi/M2CryptoWin64\" rel=\"nofollow\">https://pypi.python.org/pypi/M2CryptoWin64</a></li>\n<li><a href=\"http://the.randomengineer.com/2014/07/29/ssl-for-python-m2crypto-on-windows/\" rel=\"nofollow\">http://the.randomengineer.com/2014/07/29/ssl-for-python-m2crypto-on-windows/</a></li>\n</ul>\n\n<p>You can also use a slightly older version of the package directly from the maker's of M2Crypto as they actually provided Windows installable versions of it for a while:</p>\n\n<ul>\n<li><a href=\"http://chandlerproject.org/bin/view/Projects/MeTooCrypto\" rel=\"nofollow\">http://chandlerproject.org/bin/view/Projects/MeTooCrypto</a></li>\n</ul>\n\n<p>This was also a useful link:</p>\n\n<ul>\n<li><a href=\"https://geekproit.wordpress.com/2011/03/02/openssl-and-m2crypto-with-python-on-windows/\" rel=\"nofollow\">https://geekproit.wordpress.com/2011/03/02/openssl-and-m2crypto-with-python-on-windows/</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6468891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/435a7d08997023f63c35bcf8cd6849ea?s=128&d=identicon&r=PG", "display_name": "Patrik Bodin", "link": "https://stackoverflow.com/users/6468891/patrik-bodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1470978866, "creation_date": 1470978866, "answer_id": 38910386, "question_id": 30222714, "link": "https://stackoverflow.com/questions/30222714/unable-to-install-m2crypto-package-in-windows-8-1-64-bit-machine/38910386#38910386", "title": "Unable to install M2Crypto package in Windows 8.1 64 bit machine", "body": "<p>I solved the problem (in a MiniConda installation on Windows) by:</p>\n\n<ol>\n<li>conda install openssl</li>\n<li>Copy &lt;MiniConda directory&gt;\\envs\\&lt;environment&gt;\\Library\\include\\openssl to &lt;MiniConda directory&gt;\\envs\\&lt;environment&gt;\\include\\openssl (or mklink it)</li>\n</ol>\n\n<p>It would probably work in other Python environments too.</p>\n\n<p>But, I ran into further problems (which I don't know how to solve):</p>\n\n<pre><code>    building 'M2Crypto.__m2crypto' extension\n    swigging SWIG/_m2crypto.i to SWIG/_m2crypto_wrap.c\n    C:\\Program Files\\MiniConda3\\envs\\python2\\Library\\bin\\swig.exe -python \"-IC:\\Program Files\\MiniConda3\\envs\\python2\\include\" \"-IC:\\Program Files\\MiniConda3\\envs\\python2\\PC\" -Ic:\\pkg\\include -include\nall -modern -builtin -outdir build\\lib.win-amd64-2.7\\M2Crypto -o SWIG/_m2crypto_wrap.c SWIG/_m2crypto.i\n    SWIG\\_bio.i(64) : Warning 454: Setting a pointer/reference variable may leak memory.\n    SWIG\\_rand.i(23) : Warning 454: Setting a pointer/reference variable may leak memory.\n    SWIG\\_evp.i(180) : Warning 454: Setting a pointer/reference variable may leak memory.\n    SWIG\\_dh.i(36) : Warning 454: Setting a pointer/reference variable may leak memory.\n    SWIG\\_rsa.i(43) : Warning 454: Setting a pointer/reference variable may leak memory.\n    SWIG\\_dsa.i(31) : Warning 454: Setting a pointer/reference variable may leak memory.\n    SWIG\\_ssl.i(241) : Warning 454: Setting a pointer/reference variable may leak memory.\n    SWIG\\_ssl.i(242) : Warning 454: Setting a pointer/reference variable may leak memory.\n    SWIG\\_x509.i(332) : Warning 454: Setting a pointer/reference variable may leak memory.\n    SWIG\\_pkcs7.i(44) : Warning 454: Setting a pointer/reference variable may leak memory.\n    SWIG\\_pkcs7.i(44) : Warning 454: Setting a pointer/reference variable may leak memory.\n    SWIG\\_util.i(11) : Warning 454: Setting a pointer/reference variable may leak memory.\n    SWIG\\_ec.i(111) : Warning 454: Setting a pointer/reference variable may leak memory.\n    SWIG\\_engine.i(168) : Warning 454: Setting a pointer/reference variable may leak memory.\n    Traceback (most recent call last):\n      File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n      File \"c:\\users\\pal\\appdata\\local\\temp\\pip-build-reeqlh\\M2Crypto\\setup.py\", line 280, in &lt;module&gt;\n        'clean': Clean\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\core.py\", line 151, in setup\n        dist.run_commands()\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\dist.py\", line 953, in run_commands\n        self.run_command(cmd)\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\dist.py\", line 972, in run_command\n        cmd_obj.run()\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\site-packages\\setuptools\\command\\install.py\", line 53, in run\n        return _install.run(self)\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\command\\install.py\", line 563, in run\n        self.run_command('build')\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\cmd.py\", line 326, in run_command\n        self.distribution.run_command(command)\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\dist.py\", line 972, in run_command\n        cmd_obj.run()\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\command\\build.py\", line 127, in run\n        self.run_command(cmd_name)\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\cmd.py\", line 326, in run_command\n        self.distribution.run_command(command)\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\dist.py\", line 972, in run_command\n        cmd_obj.run()\n      File \"c:\\users\\pal\\appdata\\local\\temp\\pip-build-reeqlh\\M2Crypto\\setup.py\", line 148, in run\n        build_ext.build_ext.run(self)\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\site-packages\\setuptools\\command\\build_ext.py\", line 46, in run\n        _build_ext.run(self)\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\command\\build_ext.py\", line 339, in run\n        self.build_extensions()\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\command\\build_ext.py\", line 448, in build_extensions\n        self.build_extension(ext)\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\site-packages\\setuptools\\command\\build_ext.py\", line 182, in build_extension\n        _build_ext.build_extension(self,ext)\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\command\\build_ext.py\", line 498, in build_extension\n        depends=ext.depends)\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\msvc9compiler.py\", line 473, in compile\n        self.initialize()\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\msvc9compiler.py\", line 383, in initialize\n        vc_env = query_vcvarsall(VERSION, plat_spec)\n      File \"C:\\Program Files\\MiniConda3\\envs\\python2\\lib\\distutils\\msvc9compiler.py\", line 299, in query_vcvarsall\n        raise ValueError(str(list(result.keys())))\n    ValueError: [u'path']\n\n    ----------------------------------------\nCommand \"\"C:\\Program Files\\MiniConda3\\envs\\python2\\python.exe\" -u -c \"import setuptools, tokenize;__file__='c:\\\\users\\\\pal\\\\appdata\\\\local\\\\temp\\\\pip-build-reeqlh\\\\M2Crypto\\\\setup.py';exec(compile(get\nattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record c:\\users\\pal\\appdata\\local\\temp\\pip-opk8he-record\\install-record.txt --single-version-external\nly-managed --compile\" failed with error code 1 in c:\\users\\pal\\appdata\\local\\temp\\pip-build-reeqlh\\M2Crypto\\\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 3664822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a8d0d9a4d650702cdf8f3549add3a8?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/3664822/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2237, "favorite_count": 0, "accepted_answer_id": 30240136, "answer_count": 2, "score": 0, "last_activity_date": 1542478715, "creation_date": 1431542073, "last_edit_date": 1542478715, "question_id": 30222714, "link": "https://stackoverflow.com/questions/30222714/unable-to-install-m2crypto-package-in-windows-8-1-64-bit-machine", "title": "Unable to install M2Crypto package in Windows 8.1 64 bit machine", "body": "<p>I am using Win8.1 64 bit machine with Python 2.7 installed. I have installed swigwin 3.0.5. When I do \"pip install M2Crypto\" I got the following errors:</p>\n\n<pre><code>SWIG\\_m2crypto.i(30) : Error: Unable to find 'openssl\\opensslv.h'\n\nSWIG\\_m2crypto.i(33) : Error: Unable to find 'openssl\\safestack.h'\n\nSWIG\\_evp.i(12) : Error: Unable to find 'openssl\\opensslconf.h'\n\nSWIG\\_ec.i(7) : Error: Unable to find 'openssl\\o,pensslconf.h'\n</code></pre>\n\n<p>In some links I found the suggestion is to install openssl-dev. But I could not find the equivalent package for windows (pip install openssl-dev does not work and I have done pip install pyOpenSSL which did not help me).</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "django", "django-models"], "answers": [{"comments": [{"owner": {"reputation": 1305, "user_id": 1952857, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ceda969f5da14917839738d0d05516?s=128&d=identicon&r=PG&f=1", "display_name": "ealiaj", "link": "https://stackoverflow.com/users/1952857/ealiaj"}, "edited": false, "score": 1, "creation_date": 1431542868, "post_id": 30222830, "comment_id": 48549670, "body": "Hi Charlesthk, in your answer you haven&#39;t used DurationField at all. Not to mention that I cant find an example of someone using it. What is the purpose of its existence if no one uses it?"}, {"owner": {"reputation": 1305, "user_id": 1952857, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ceda969f5da14917839738d0d05516?s=128&d=identicon&r=PG&f=1", "display_name": "ealiaj", "link": "https://stackoverflow.com/users/1952857/ealiaj"}, "edited": false, "score": 0, "creation_date": 1431544025, "post_id": 30222830, "comment_id": 48550395, "body": "Thanks for the edit. I am sure it is as explicit as it can possibly get, but this is my first time using Django so you will have to excuse my ignorance. The way I know until now to add values to my model, and the way I would expect an administrator or user to do so is through the form in the admin panel?"}, {"owner": {"reputation": 7526, "user_id": 1405425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g6RUg.jpg?s=128&g=1", "display_name": "Charlesthk", "link": "https://stackoverflow.com/users/1405425/charlesthk"}, "reply_to_user": {"reputation": 1305, "user_id": 1952857, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ceda969f5da14917839738d0d05516?s=128&d=identicon&r=PG&f=1", "display_name": "ealiaj", "link": "https://stackoverflow.com/users/1952857/ealiaj"}, "edited": false, "score": 1, "creation_date": 1431544499, "post_id": 30222830, "comment_id": 48550681, "body": "Yes you can use the admin for that ! If the answer is ok to you you can accept it ;-)"}, {"owner": {"reputation": 1305, "user_id": 1952857, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ceda969f5da14917839738d0d05516?s=128&d=identicon&r=PG&f=1", "display_name": "ealiaj", "link": "https://stackoverflow.com/users/1952857/ealiaj"}, "edited": false, "score": 0, "creation_date": 1431544802, "post_id": 30222830, "comment_id": 48550859, "body": "Well the issue is that I cannot. I updated the question hopefully making it more clear."}, {"owner": {"reputation": 7526, "user_id": 1405425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g6RUg.jpg?s=128&g=1", "display_name": "Charlesthk", "link": "https://stackoverflow.com/users/1405425/charlesthk"}, "reply_to_user": {"reputation": 1305, "user_id": 1952857, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ceda969f5da14917839738d0d05516?s=128&d=identicon&r=PG&f=1", "display_name": "ealiaj", "link": "https://stackoverflow.com/users/1952857/ealiaj"}, "edited": false, "score": 0, "creation_date": 1431545361, "post_id": 30222830, "comment_id": 48551165, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/77750/discussion-between-charlesthk-and-green-leaf\">continue this discussion in chat</a>."}, {"owner": {"reputation": 1305, "user_id": 1952857, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ceda969f5da14917839738d0d05516?s=128&d=identicon&r=PG&f=1", "display_name": "ealiaj", "link": "https://stackoverflow.com/users/1952857/ealiaj"}, "edited": false, "score": 0, "creation_date": 1431545416, "post_id": 30222830, "comment_id": 48551198, "body": "In the end I made you cough up everything you knew on this :) Im sorry for that. I do realise in the end though that this is probably not what I want to use. I am interested in periods of years and months not hours."}, {"owner": {"reputation": 2043, "user_id": 2792338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/mpNol.jpg?s=128&g=1", "display_name": "Niraj Chapla", "link": "https://stackoverflow.com/users/2792338/niraj-chapla"}, "reply_to_user": {"reputation": 1305, "user_id": 1952857, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ceda969f5da14917839738d0d05516?s=128&d=identicon&r=PG&f=1", "display_name": "ealiaj", "link": "https://stackoverflow.com/users/1952857/ealiaj"}, "edited": false, "score": 0, "creation_date": 1617557517, "post_id": 30222830, "comment_id": 118332488, "body": "@ealiaj  I am also in the same need. I want to have a period input in terms of number of years and months. How you did that ? I am thinking of having integer field to store duration in months and then showing in terms of year and months to user. While saving, I will convert year + months in total months. Is this correct approach or some other options is there ?"}], "tags": [], "owner": {"reputation": 7526, "user_id": 1405425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g6RUg.jpg?s=128&g=1", "display_name": "Charlesthk", "link": "https://stackoverflow.com/users/1405425/charlesthk"}, "is_accepted": true, "score": 45, "last_activity_date": 1538167409, "last_edit_date": 1538167409, "creation_date": 1431542429, "answer_id": 30222830, "question_id": 30222660, "link": "https://stackoverflow.com/questions/30222660/how-should-i-use-durationfield-in-my-model/30222830#30222830", "title": "How should I use DurationField in my model?", "body": "<p>To use a DurationField in django 1.8 you have to use a python <code>datetime.timedelta</code> instance like this:</p>\n\n<p>Considering this model :</p>\n\n<pre><code>from django.db import models\n\nclass MyModel(models.Model):\n    duration = models.DurationField()\n</code></pre>\n\n<p>You can set a duration this way :</p>\n\n<pre><code>import datetime\n\nmy_model = MyModel()\nmy_model.duration = datetime.timedelta(days=20, hours=10)\n</code></pre>\n\n<p>And query it this way :</p>\n\n<pre><code># Equal\ndurations = MyModel.objects.filter(duration=datetime.timedelta(*args, **kwargs))\n\n# Greater than or equal\ndurations = MyModel.objects.filter(duration__gte=datetime.timedelta(*args, **kwargs))\n\n# Less than or equal\ndurations = MyModel.objects.filter(duration__lte=datetime.timedelta(*args, **kwargs))\n</code></pre>\n\n<p>More info on datetime.timedelta <a href=\"https://docs.python.org/3/library/datetime.html#datetime.timedelta\" rel=\"noreferrer\">here</a> and on DurationField <a href=\"https://docs.djangoproject.com/fr/1.8/ref/models/fields/#django.db.models.DurationField\" rel=\"noreferrer\">here</a>.</p>\n\n<p>In your admin panel, you can enter a duration with a string with following format : <code>[DD] [[hh:]mm:]ss</code></p>\n"}], "owner": {"reputation": 1305, "user_id": 1952857, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ceda969f5da14917839738d0d05516?s=128&d=identicon&r=PG&f=1", "display_name": "ealiaj", "link": "https://stackoverflow.com/users/1952857/ealiaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29097, "favorite_count": 7, "accepted_answer_id": 30222830, "answer_count": 1, "score": 32, "last_activity_date": 1538167409, "creation_date": 1431541882, "last_edit_date": 1431544783, "question_id": 30222660, "link": "https://stackoverflow.com/questions/30222660/how-should-i-use-durationfield-in-my-model", "title": "How should I use DurationField in my model?", "body": "<p>In my model I want to be able to input duration, like <em>2 years</em>, <em>5 months</em>, etc.</p>\n\n<p>In version <em>1.8</em> <code>DurationField</code> was introduced so I tried using that:</p>\n\n<p>In my model I have\n<code>user_validPeriod = models.DurationField()</code></p>\n\n<p>Trying to add a new <em>User</em> from my admin panel, If I try typing something like <em>2d</em> or <em>2 days</em> in the appearing text-field though I get <code>Enter a valid duration</code>.</p>\n\n<p><img src=\"https://i.stack.imgur.com/VszE6.png\" alt=\"enter image description here\"></p>\n\n<p>Can someone provide me with an example of how this field is supposed to be used?  </p>\n"}, {"tags": ["python", "scipy"], "owner": {"reputation": 235, "user_id": 4717823, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af7f3c50af027c3df7735a6e174a1b20?s=128&d=identicon&r=PG&f=1", "display_name": "petermaxstack", "link": "https://stackoverflow.com/users/4717823/petermaxstack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1431541517, "creation_date": 1431541517, "question_id": 30222553, "link": "https://stackoverflow.com/questions/30222553/is-there-a-simple-way-to-estimate-the-parameters-for-a-multivariate-dataset-usin", "title": "Is there a simple way to estimate the parameters for a multivariate dataset using t-distribution?", "body": "<p>For example, in Scipy, I can use the Fit() method to estimate the shape parameter using MLE of a univariate dataset. However, say I have 3 different datasets now, and I would like to use a similar method to perform a Fit on these sets to estimate a shape parameter for the conglomerated PDF. </p>\n"}, {"tags": ["python", "datetime", "pandas"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 2, "creation_date": 1431542079, "post_id": 30222533, "comment_id": 48549233, "body": "Are you wanting the integer day of the week or the string name? for the former <code>df[&#39;date&#39;].dt.dayofweek</code> will work"}, {"owner": {"reputation": 1177, "user_id": 4458393, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/605603474/picture?type=large", "display_name": "James Eaves", "link": "https://stackoverflow.com/users/4458393/james-eaves"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1431542242, "post_id": 30222533, "comment_id": 48549321, "body": "An integer.  And thanks for the formatting comment as well."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1431542398, "post_id": 30222533, "comment_id": 48549391, "body": "There is also <code>dt.weekday</code> which is the same as <code>dayofweek</code> but 2 characters shorter to type"}], "answers": [{"comments": [{"owner": {"reputation": 1177, "user_id": 4458393, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/605603474/picture?type=large", "display_name": "James Eaves", "link": "https://stackoverflow.com/users/4458393/james-eaves"}, "edited": false, "score": 0, "creation_date": 1431543499, "post_id": 30222759, "comment_id": 48550070, "body": "Liam, I&#39;ve imported the datetime module as dt, but I&#39;m receiving this new error.  Do you know what&#39;s going on?  Thanks again!  <code>df[&#39;day_of_week&#39;] = df[\u2018my_dates&#39;].dt.dayofweek</code>   AttributeError: &#39;Series&#39; object has no attribute &#39;dt&#39;"}, {"owner": {"reputation": 5496, "user_id": 2317751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lltcO.jpg?s=128&g=1", "display_name": "Liam Foley", "link": "https://stackoverflow.com/users/2317751/liam-foley"}, "reply_to_user": {"reputation": 1177, "user_id": 4458393, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/605603474/picture?type=large", "display_name": "James Eaves", "link": "https://stackoverflow.com/users/4458393/james-eaves"}, "edited": false, "score": 1, "creation_date": 1431544031, "post_id": 30222759, "comment_id": 48550402, "body": "When you run <code>df.dtypes</code> do you get <code>my_dates    datetime64[ns]</code>?"}, {"owner": {"reputation": 1177, "user_id": 4458393, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/605603474/picture?type=large", "display_name": "James Eaves", "link": "https://stackoverflow.com/users/4458393/james-eaves"}, "edited": false, "score": 0, "creation_date": 1431544380, "post_id": 30222759, "comment_id": 48550617, "body": "Yes, I get = datetime64[ns]  for my date column."}, {"owner": {"reputation": 5496, "user_id": 2317751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lltcO.jpg?s=128&g=1", "display_name": "Liam Foley", "link": "https://stackoverflow.com/users/2317751/liam-foley"}, "reply_to_user": {"reputation": 1177, "user_id": 4458393, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/605603474/picture?type=large", "display_name": "James Eaves", "link": "https://stackoverflow.com/users/4458393/james-eaves"}, "edited": false, "score": 0, "creation_date": 1431545080, "post_id": 30222759, "comment_id": 48551015, "body": "Strange.  What do you get when you run <code>pd.__version__</code> (AKA, what version are you on?)"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "reply_to_user": {"reputation": 1177, "user_id": 4458393, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/605603474/picture?type=large", "display_name": "James Eaves", "link": "https://stackoverflow.com/users/4458393/james-eaves"}, "edited": false, "score": 1, "creation_date": 1431546770, "post_id": 30222759, "comment_id": 48551919, "body": "@JamesEaves the <code>dt</code> accessor was added in <code>0.15.0</code> can you upgrade?"}, {"owner": {"reputation": 1177, "user_id": 4458393, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/605603474/picture?type=large", "display_name": "James Eaves", "link": "https://stackoverflow.com/users/4458393/james-eaves"}, "edited": false, "score": 1, "creation_date": 1431549928, "post_id": 30222759, "comment_id": 48553529, "body": "Yes, i updated and it works perfectly. Thank you all for your help!"}, {"owner": {"reputation": 2770, "user_id": 2399894, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5c80543e7c6101733769227ab3fd3228?s=128&d=identicon&r=PG", "display_name": "SARose", "link": "https://stackoverflow.com/users/2399894/sarose"}, "edited": false, "score": 0, "creation_date": 1452370618, "post_id": 30222759, "comment_id": 57142991, "body": "Now that is a nifty use of the lambdas"}, {"owner": {"reputation": 21195, "user_id": 125507, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a59853d36056b7a088f33c96e3a1619?s=128&d=identicon&r=PG", "display_name": "endolith", "link": "https://stackoverflow.com/users/125507/endolith"}, "edited": false, "score": 0, "creation_date": 1467592081, "post_id": 30222759, "comment_id": 63778328, "body": "The string names aren&#39;t built in somewhere?"}, {"owner": {"reputation": 21195, "user_id": 125507, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2a59853d36056b7a088f33c96e3a1619?s=128&d=identicon&r=PG", "display_name": "endolith", "link": "https://stackoverflow.com/users/125507/endolith"}, "edited": false, "score": 1, "creation_date": 1467594403, "post_id": 30222759, "comment_id": 63778695, "body": "answering self: <code>from calendar import day_abbr</code> and then <code>data.index = [day_abbr[x] for x in data.index]</code>"}, {"owner": {"reputation": 10225, "user_id": 3577054, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3a7c08cb0e764122426e2e3fc69b3ed9?s=128&d=identicon&r=PG", "display_name": "Peque", "link": "https://stackoverflow.com/users/3577054/peque"}, "edited": false, "score": 1, "creation_date": 1535645019, "post_id": 30222759, "comment_id": 91153290, "body": "@LiamFoley I updated your answer with the latest API updates. Hope you do not mind. Feel free to revert it if you want. I thought it would be good to have an updated answer as the most voted. ^^"}, {"owner": {"reputation": 409, "user_id": 401095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0804318a1a256d6804a1d824ad8bf6bd?s=128&d=identicon&r=PG", "display_name": "Daddy32", "link": "https://stackoverflow.com/users/401095/daddy32"}, "edited": false, "score": 0, "creation_date": 1569852379, "post_id": 30222759, "comment_id": 102720484, "body": "I suggest following optimization to make the result more memory-efficient: <code>df[&#39;day_of_week&#39;] = df[&#39;my_dates&#39;].dt.day_name().astype(&#39;category&#39;)</code> - ie. &#39;cast&#39; the series to the category type, as this consumes much less memory than the original strings."}], "tags": [], "owner": {"reputation": 5496, "user_id": 2317751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lltcO.jpg?s=128&g=1", "display_name": "Liam Foley", "link": "https://stackoverflow.com/users/2317751/liam-foley"}, "is_accepted": true, "score": 135, "last_activity_date": 1535644536, "last_edit_date": 1535644536, "creation_date": 1431542196, "answer_id": 30222759, "question_id": 30222533, "link": "https://stackoverflow.com/questions/30222533/create-a-day-of-week-column-in-a-pandas-dataframe-using-python/30222759#30222759", "title": "Create a day-of-week column in a Pandas dataframe using Python", "body": "<h2>Pandas 0.23+</h2>\n\n<p>Use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.dt.day_name.html\" rel=\"noreferrer\"><code>pandas.Series.dt.day_name()</code></a>, since <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Timestamp.weekday_name.html\" rel=\"noreferrer\"><code>pandas.Timestamp.weekday_name</code></a> has been deprecated:</p>\n\n<pre><code>import pandas as pd\n\n\ndf = pd.DataFrame({'my_dates':['2015-01-01','2015-01-02','2015-01-03'],'myvals':[1,2,3]})\ndf['my_dates'] = pd.to_datetime(df['my_dates'])\n\ndf['day_of_week'] = df['my_dates'].dt.day_name()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    my_dates  myvals day_of_week\n0 2015-01-01       1    Thursday\n1 2015-01-02       2      Friday\n2 2015-01-03       3    Saturday\n</code></pre>\n\n<h2>Pandas 0.18.1+</h2>\n\n<p>As user jezrael points out below, <code>dt.weekday_name</code> was added in version 0.18.1\n<a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.dt.weekday_name.html\" rel=\"noreferrer\">Pandas Docs</a></p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'my_dates':['2015-01-01','2015-01-02','2015-01-03'],'myvals':[1,2,3]})\ndf['my_dates'] = pd.to_datetime(df['my_dates'])\ndf['day_of_week'] = df['my_dates'].dt.weekday_name\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    my_dates  myvals day_of_week\n0 2015-01-01       1    Thursday\n1 2015-01-02       2      Friday\n2 2015-01-03       3    Saturday\n</code></pre>\n\n<h2>Original Answer:</h2>\n\n<p>Use this:</p>\n\n<p><a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.dt.dayofweek.html\" rel=\"noreferrer\">http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.dt.dayofweek.html</a></p>\n\n<p>See this:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/28009370/get-weekday-for-datetime-in-pandas-dataframe\">Get weekday/day-of-week for Datetime column of DataFrame</a></p>\n\n<p>If you want a string instead of an integer do something like this:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'my_dates':['2015-01-01','2015-01-02','2015-01-03'],'myvals':[1,2,3]})\ndf['my_dates'] = pd.to_datetime(df['my_dates'])\ndf['day_of_week'] = df['my_dates'].dt.dayofweek\n\ndays = {0:'Mon',1:'Tues',2:'Weds',3:'Thurs',4:'Fri',5:'Sat',6:'Sun'}\n\ndf['day_of_week'] = df['day_of_week'].apply(lambda x: days[x])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    my_dates  myvals day_of_week\n0 2015-01-01       1       Thurs\n1 2015-01-02       2         Fri\n2 2015-01-01       3       Thurs\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": false, "score": 13, "last_activity_date": 1462778675, "last_edit_date": 1462778675, "creation_date": 1462734604, "answer_id": 37103798, "question_id": 30222533, "link": "https://stackoverflow.com/questions/30222533/create-a-day-of-week-column-in-a-pandas-dataframe-using-python/37103798#37103798", "title": "Create a day-of-week column in a Pandas dataframe using Python", "body": "<p>In version <code>0.18.1</code> is added <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.dt.weekday_name.html\" rel=\"noreferrer\"><code>dt.weekday_name</code></a>:</p>\n\n<pre><code>print df\n    my_dates  myvals\n0 2015-01-01       1\n1 2015-01-02       2\n2 2015-01-03       3\n\nprint df.dtypes\nmy_dates    datetime64[ns]\nmyvals               int64\ndtype: object\n\ndf['day_of_week'] = df['my_dates'].dt.weekday_name\nprint df\n    my_dates  myvals day_of_week\n0 2015-01-01       1    Thursday\n1 2015-01-02       2      Friday\n2 2015-01-03       3    Saturday\n</code></pre>\n\n<p>Another solution with <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.assign.html\" rel=\"noreferrer\"><code>assign</code></a>:</p>\n\n<pre><code>print df.assign(day_of_week = df['my_dates'].dt.weekday_name)\n    my_dates  myvals day_of_week\n0 2015-01-01       1    Thursday\n1 2015-01-02       2      Friday\n2 2015-01-03       3    Saturday\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": false, "score": 6, "last_activity_date": 1533946868, "creation_date": 1533946868, "answer_id": 51795405, "question_id": 30222533, "link": "https://stackoverflow.com/questions/30222533/create-a-day-of-week-column-in-a-pandas-dataframe-using-python/51795405#51795405", "title": "Create a day-of-week column in a Pandas dataframe using Python", "body": "<p>Using <code>dt.weekday_name</code> is <a href=\"https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.Timestamp.weekday_name.html\" rel=\"noreferrer\">deprecated since <code>pandas 0.23.0</code></a>, instead, use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.dt.day_name.html\" rel=\"noreferrer\"><code>dt.day_name()</code></a>:</p>\n\n<pre><code>df = pd.DataFrame({'my_dates':['2015-01-01','2015-01-02','2015-01-03'],'myvals':[1,2,3]})\ndf['my_dates'] = pd.to_datetime(df['my_dates'])\n\ndf['my_dates'].dt.day_name()\n\n0    Thursday\n1      Friday\n2    Saturday\nName: my_dates, dtype: object\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 8947936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52bc3d9217f1be47edd0994b44bc7b5?s=128&d=identicon&r=PG&f=1", "display_name": "Catruc Iurie", "link": "https://stackoverflow.com/users/8947936/catruc-iurie"}, "is_accepted": false, "score": 4, "last_activity_date": 1551088710, "creation_date": 1551088710, "answer_id": 54863595, "question_id": 30222533, "link": "https://stackoverflow.com/questions/30222533/create-a-day-of-week-column-in-a-pandas-dataframe-using-python/54863595#54863595", "title": "Create a day-of-week column in a Pandas dataframe using Python", "body": "<pre><code>df =df['Date'].dt.dayofweek\n</code></pre>\n\n<p><code>dayofweek</code> is in numeric format</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 12276125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd55689c684eeca570d5b15916765558?s=128&d=identicon&r=PG&f=1", "display_name": "Pinkmei", "link": "https://stackoverflow.com/users/12276125/pinkmei"}, "is_accepted": false, "score": 2, "last_activity_date": 1587217724, "last_edit_date": 1587217724, "creation_date": 1582219239, "answer_id": 60325422, "question_id": 30222533, "link": "https://stackoverflow.com/questions/30222533/create-a-day-of-week-column-in-a-pandas-dataframe-using-python/60325422#60325422", "title": "Create a day-of-week column in a Pandas dataframe using Python", "body": "<p>Just in case if .dt doesn't work for you. Trying .DatetimeIndex might help. Hope the code and our test result here help you fix it. Regards,</p>\n\n<pre><code>import pandas as pd\nimport datetime\n\ndf = pd.DataFrame({'Date':['2015-01-01','2015-01-02','2015-01-03'],'Number':[1,2,3]})\n\ndf['Day'] = pd.DatetimeIndex(df['Date']).day_name() # week day name\ndf.head()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/9ucKI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9ucKI.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1177, "user_id": 4458393, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/605603474/picture?type=large", "display_name": "James Eaves", "link": "https://stackoverflow.com/users/4458393/james-eaves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126201, "favorite_count": 19, "accepted_answer_id": 30222759, "answer_count": 5, "score": 68, "last_activity_date": 1587217724, "creation_date": 1431541451, "last_edit_date": 1431541681, "question_id": 30222533, "link": "https://stackoverflow.com/questions/30222533/create-a-day-of-week-column-in-a-pandas-dataframe-using-python", "title": "Create a day-of-week column in a Pandas dataframe using Python", "body": "<p>Create a day-of-week column in a Pandas dataframe using Python</p>\n\n<p>I\u2019d like to read a csv file into a pandas dataframe, parse a column of dates from string format to a date object, and then generate a new column that indicates the day of the week.</p>\n\n<p>This is what I\u2019m trying:</p>\n\n<p>What I\u2019d like to do is something like:</p>\n\n<pre><code>import pandas as pd\n\nimport csv\n\ndf = pd.read_csv('data.csv', parse_dates=['date']))\n\ndf['day-of-week'] = df['date'].weekday()\n\n\nAttributeError: 'Series' object has no attribute 'weekday'\n</code></pre>\n\n<hr>\n\n<p>Thank you for your help.\nJames</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 2768315, "user_type": "registered", "profile_image": "https://graph.facebook.com/1569993209/picture?type=large", "display_name": "Uttam Pal", "link": "https://stackoverflow.com/users/2768315/uttam-pal"}, "edited": false, "score": 1, "creation_date": 1544091785, "post_id": 30222673, "comment_id": 94156706, "body": "What about <code>np.hstack((A, A[:, [2]]))</code>"}, {"owner": {"reputation": 21161, "user_id": 293594, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/236ff5ec4ac5714b8f28542d5299ec90?s=128&d=identicon&r=PG", "display_name": "xnx", "link": "https://stackoverflow.com/users/293594/xnx"}, "reply_to_user": {"reputation": 101, "user_id": 2768315, "user_type": "registered", "profile_image": "https://graph.facebook.com/1569993209/picture?type=large", "display_name": "Uttam Pal", "link": "https://stackoverflow.com/users/2768315/uttam-pal"}, "edited": false, "score": 0, "creation_date": 1544094662, "post_id": 30222673, "comment_id": 94158411, "body": "@UttamPal Good suggestion! I&#39;ve edited in this approach in a slightly more general form as the prefered one."}], "tags": [], "owner": {"reputation": 21161, "user_id": 293594, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/236ff5ec4ac5714b8f28542d5299ec90?s=128&d=identicon&r=PG", "display_name": "xnx", "link": "https://stackoverflow.com/users/293594/xnx"}, "is_accepted": true, "score": 2, "last_activity_date": 1544094615, "last_edit_date": 1544094615, "creation_date": 1431541920, "answer_id": 30222673, "question_id": 30222512, "link": "https://stackoverflow.com/questions/30222512/numpy-repeating-a-row-or-column/30222673#30222673", "title": "Numpy repeating a row or column", "body": "<p>For your particular example you could use <code>numpy.hstack</code> and <code>numpy.vstack</code>:</p>\n\n<pre><code>In [11]: np.vstack((A, A[-1]))\nOut[11]: \narray([[1, 2, 3],\n       [4, 5, 6],\n       [7, 8, 9],\n       [7, 8, 9]])\n\nIn [12]: np.hstack((A, A[:, [-1]]))\nOut[12]: \narray([[1, 2, 3, 3],\n       [4, 5, 6, 6],\n       [7, 8, 9, 9]])\n</code></pre>\n\n<p>An alternative to the last one is <code>np.hstack((A, np.atleast_2d(A[:,-1]).T))</code> or <code>np.vstack((A.T, A.T[-1])).T</code>): you can't <code>hstack</code> a <code>(3,)</code> array to a <code>(3,3)</code> one without putting the elements in the rows of a <code>(3,1)</code> array.</p>\n"}, {"comments": [{"owner": {"reputation": 6408, "user_id": 1596786, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b214ed5d19621e478b64851098f7dc80?s=128&d=identicon&r=PG", "display_name": "FacundoGFlores", "link": "https://stackoverflow.com/users/1596786/facundogflores"}, "edited": false, "score": 0, "creation_date": 1431543550, "post_id": 30222832, "comment_id": 48550099, "body": "Thank you for your advice. Let me see if I catch it: Do you mean I have to do something like <code>np.minimum(A[1:], A[:-1])</code> and repeat the last row after that?"}, {"owner": {"reputation": 60033, "user_id": 102302, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd9c8a33bbb45d398ad8777e619c7a3?s=128&d=identicon&r=PG", "display_name": "tom10", "link": "https://stackoverflow.com/users/102302/tom10"}, "reply_to_user": {"reputation": 6408, "user_id": 1596786, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b214ed5d19621e478b64851098f7dc80?s=128&d=identicon&r=PG", "display_name": "FacundoGFlores", "link": "https://stackoverflow.com/users/1596786/facundogflores"}, "edited": false, "score": 0, "creation_date": 1431543772, "post_id": 30222832, "comment_id": 48550249, "body": "Yes, exactly.  I wrote the wrong expression.  I&#39;ll fix it now."}, {"owner": {"reputation": 6408, "user_id": 1596786, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b214ed5d19621e478b64851098f7dc80?s=128&d=identicon&r=PG", "display_name": "FacundoGFlores", "link": "https://stackoverflow.com/users/1596786/facundogflores"}, "edited": false, "score": 0, "creation_date": 1431543822, "post_id": 30222832, "comment_id": 48550282, "body": "Thank you it was useful!"}], "tags": [], "owner": {"reputation": 60033, "user_id": 102302, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd9c8a33bbb45d398ad8777e619c7a3?s=128&d=identicon&r=PG", "display_name": "tom10", "link": "https://stackoverflow.com/users/102302/tom10"}, "is_accepted": false, "score": 2, "last_activity_date": 1431544218, "last_edit_date": 1431544218, "creation_date": 1431542435, "answer_id": 30222832, "question_id": 30222512, "link": "https://stackoverflow.com/questions/30222512/numpy-repeating-a-row-or-column/30222832#30222832", "title": "Numpy repeating a row or column", "body": "<p>A good answer to your literal question is provided by @xnx, but I wonder whether what you actually need is something else.</p>\n\n<p>This type of question comes up a lot in comparisons, and the usual solution is to <strong>take only the valid entries</strong>, rather than using a misaligned comparison.  That is, something like this is common:</p>\n\n<pre><code>import numpy as np\n\nA = np.arange(9).reshape((3,3))\n\nU = np.minimum(A[1:,:]**2, A[:-1,:]**2)\nV = np.minimum(A[:,1:]**2, A[:,:-1]**2)\n\nprint U\n# [[ 0  1  4]\n#  [ 9 16 25]]\n\nprint V\n# [[ 0  1]\n#  [ 9 16]\n#  [36 49]]\n</code></pre>\n\n<p>I suspect that you're probably thinking, \"that's a hassle, now <code>U</code> and <code>V</code> have different shapes than <code>A</code>, which is not what I want\".  But, to this I'd say, \"yes, it is a hassle, but it's better to deal with the problem up front and directly than hide it within an invalid row of an array.\"</p>\n\n<p>A standard example and typical use case of this approach would be <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.diff.html\" rel=\"nofollow\">numpy.diff</a>, where, \"the shape of the output is the same as <em>a</em> except along axis where the dimension is smaller by <em>n</em>.\"</p>\n"}], "owner": {"reputation": 6408, "user_id": 1596786, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b214ed5d19621e478b64851098f7dc80?s=128&d=identicon&r=PG", "display_name": "FacundoGFlores", "link": "https://stackoverflow.com/users/1596786/facundogflores"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2717, "favorite_count": 0, "accepted_answer_id": 30222673, "answer_count": 2, "score": 3, "last_activity_date": 1544094615, "creation_date": 1431541347, "question_id": 30222512, "link": "https://stackoverflow.com/questions/30222512/numpy-repeating-a-row-or-column", "title": "Numpy repeating a row or column", "body": "<p>Suppose we have the matrix A:</p>\n\n<pre><code>A = [1,2,3\n     4,5,6\n     7,8,9]\n</code></pre>\n\n<p>I want to know if there is a way to obtain:</p>\n\n<pre><code>B = [1,2,3\n     4,5,6\n     7,8,9\n     7,8,9]\n</code></pre>\n\n<p>As well as:</p>\n\n<pre><code>B = [1,2,3,3\n     4,5,6,6\n     7,8,9,9]\n</code></pre>\n\n<p>This is because the function I want to implement is the following:</p>\n\n<pre><code>U(i,j) = min(A(i+1,j)^2, A(i,j)^2)\nV(i,j) = min(A(i,j+1)^2, A(i,j)^2)\n</code></pre>\n\n<p>And the <code>numpy.minimum</code> seems to need two arrays with equal shapes.</p>\n\n<p>My idea is the following:</p>\n\n<pre><code>np.minimum(np.square(A[1:]), np.square(A[:]))\n</code></pre>\n\n<p>but it will fail.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1431541200, "post_id": 30222444, "comment_id": 48548729, "body": "Is this Python 2 or 3? You probably want integer division which is <code>&#47;&#47;</code>"}, {"owner": {"reputation": 51, "user_id": 4306642, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/64dfc20c1b8ff046fbd63d38e9fc39cc?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolas Pitsillos", "link": "https://stackoverflow.com/users/4306642/nikolas-pitsillos"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1431541488, "post_id": 30222444, "comment_id": 48548884, "body": "python 2 but the thing is it doesn&#39;t terminate when i call primes(4) it keeps adding 2 to the list of primes"}, {"owner": {"reputation": 19290, "user_id": 471899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ed5e532a550a0dc42404044d3f7adba4?s=128&d=identicon&r=PG", "display_name": "Alik", "link": "https://stackoverflow.com/users/471899/alik"}, "edited": false, "score": 1, "creation_date": 1431541581, "post_id": 30222444, "comment_id": 48548943, "body": "@NikolasPitsillos <code>res = num&#47;i</code> should be <code>res = res&#47;i</code>"}, {"owner": {"reputation": 51, "user_id": 4306642, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/64dfc20c1b8ff046fbd63d38e9fc39cc?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolas Pitsillos", "link": "https://stackoverflow.com/users/4306642/nikolas-pitsillos"}, "edited": false, "score": 0, "creation_date": 1431542054, "post_id": 30222444, "comment_id": 48549218, "body": "Oh thank you.  Hahah I guess time I should get a rest after after a long flight. Thank you appreciate it."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4306642, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/64dfc20c1b8ff046fbd63d38e9fc39cc?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolas Pitsillos", "link": "https://stackoverflow.com/users/4306642/nikolas-pitsillos"}, "edited": false, "score": 0, "creation_date": 1431542100, "post_id": 30222584, "comment_id": 48549249, "body": "Do you know a better one?"}], "tags": [], "owner": {"reputation": 2337, "user_id": 4380515, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1039174538/picture?type=large", "display_name": "Blusky", "link": "https://stackoverflow.com/users/4380515/blusky"}, "is_accepted": false, "score": 0, "last_activity_date": 1431541617, "creation_date": 1431541617, "answer_id": 30222584, "question_id": 30222444, "link": "https://stackoverflow.com/questions/30222444/what-is-wrong-with-my-code-to-find-the-prime-factors-of-a-number/30222584#30222584", "title": "What is wrong with my code to find the prime factors of a number?", "body": "<p>if <code>num=4</code> and <code>i=2</code> you got an infinite loop, cause \"i\" and \"res\" never changes ...</p>\n\n<p>It's python compliant, but your algorithm is not good.</p>\n\n<p>Try <code>res = res/i</code>.</p>\n"}], "owner": {"reputation": 51, "user_id": 4306642, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/64dfc20c1b8ff046fbd63d38e9fc39cc?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolas Pitsillos", "link": "https://stackoverflow.com/users/4306642/nikolas-pitsillos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1431541617, "creation_date": 1431541109, "last_edit_date": 1431541146, "question_id": 30222444, "link": "https://stackoverflow.com/questions/30222444/what-is-wrong-with-my-code-to-find-the-prime-factors-of-a-number", "title": "What is wrong with my code to find the prime factors of a number?", "body": "<p>What is wrong with this code to find the primes of a number and store them in a list?</p>\n\n<pre><code>def primes(num):\n    res = num\n    i = 2\n    z = []\n    while res != 1:\n        if num%i == 0:\n            z.append(i)\n            res = num/i\n        else:\n            i += 1\n</code></pre>\n"}, {"tags": ["python", "increment", "nested-loops"], "comments": [{"owner": {"reputation": 3711, "user_id": 3456281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fb5e6fa4617d883de24fe3cc4372898?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper", "link": "https://stackoverflow.com/users/3456281/jasper"}, "edited": false, "score": 0, "creation_date": 1431541198, "post_id": 30222431, "comment_id": 48548727, "body": "do you simply want <code>genCounter = 0</code> instead of <code>if genCounter == 0</code>?"}, {"owner": {"reputation": 81, "user_id": 4896913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f26a14387f44b4d12ec96455f5322af?s=128&d=identicon&r=PG&f=1", "display_name": "philo", "link": "https://stackoverflow.com/users/4896913/philo"}, "reply_to_user": {"reputation": 3711, "user_id": 3456281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fb5e6fa4617d883de24fe3cc4372898?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper", "link": "https://stackoverflow.com/users/3456281/jasper"}, "edited": false, "score": 0, "creation_date": 1431541953, "post_id": 30222431, "comment_id": 48549163, "body": "i want &#39;genCounter = 0&#39; every after the inner loop completes iteration <i>notice one line edit at the end</i>  @Jasper"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4896913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f26a14387f44b4d12ec96455f5322af?s=128&d=identicon&r=PG&f=1", "display_name": "philo", "link": "https://stackoverflow.com/users/4896913/philo"}, "edited": false, "score": 0, "creation_date": 1431542166, "post_id": 30222678, "comment_id": 48549281, "body": "Thank you just perfect indeed @Pete"}, {"owner": {"reputation": 672, "user_id": 2848281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iyg0K.jpg?s=128&g=1", "display_name": "Pete Cacioppi", "link": "https://stackoverflow.com/users/2848281/pete-cacioppi"}, "reply_to_user": {"reputation": 81, "user_id": 4896913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f26a14387f44b4d12ec96455f5322af?s=128&d=identicon&r=PG&f=1", "display_name": "philo", "link": "https://stackoverflow.com/users/4896913/philo"}, "edited": false, "score": 0, "creation_date": 1431545670, "post_id": 30222678, "comment_id": 48551355, "body": "i do versions of that bug all the time. you just get better at spotting it"}], "tags": [], "owner": {"reputation": 672, "user_id": 2848281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iyg0K.jpg?s=128&g=1", "display_name": "Pete Cacioppi", "link": "https://stackoverflow.com/users/2848281/pete-cacioppi"}, "is_accepted": true, "score": 1, "last_activity_date": 1431541945, "creation_date": 1431541945, "answer_id": 30222678, "question_id": 30222431, "link": "https://stackoverflow.com/questions/30222431/python-initializing-variable-in-a-nested-loop/30222678#30222678", "title": "Python initializing variable in a nested loop", "body": "<p>kawa is a generator object. Therefore, its becomes empty after the first call to </p>\n\n<pre><code>enumerate(kawa)\n</code></pre>\n\n<p>If you replace the first line of code with </p>\n\n<pre><code>kawa = tuple(self.getFile())\n</code></pre>\n\n<p>Then it probably will work. (Or at least yield a different bug ;)</p>\n"}], "owner": {"reputation": 81, "user_id": 4896913, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f26a14387f44b4d12ec96455f5322af?s=128&d=identicon&r=PG&f=1", "display_name": "philo", "link": "https://stackoverflow.com/users/4896913/philo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 0, "accepted_answer_id": 30222678, "answer_count": 1, "score": 1, "last_activity_date": 1431541945, "creation_date": 1431541055, "last_edit_date": 1431541463, "question_id": 30222431, "link": "https://stackoverflow.com/questions/30222431/python-initializing-variable-in-a-nested-loop", "title": "Python initializing variable in a nested loop", "body": "<p>i want the the variable genCounter to reset to zero when the iteration of the inner loops has completed. however it returns the first value of genreSet and does not go farther to increment the genCounter variable. kawa is a genrator object. Thanks in advance..</p>\n\n<pre><code>kawa = self.getFile()\ngenList = []\ngenCounter = 0\nfor gen in self.genreSet:\n  print(gen)\n  if genCounter == 0 :\n    for ids, row in enumerate(kawa):\n      self.genres = row['genres']\n      self.genresList = self.genres.split('|')\n      for n in self.genresList:\n        if gen == n:\n          genCounter+=1\n  print(genCounter)\n  genCounter=0\n</code></pre>\n\n<p>and this is the result</p>\n\n<pre><code>Documentary\n2471\nSci-Fi\n0\nWar\n0\nHorror\n0\nMusical\n0\nChildren\n0\nMystery\n0\nDrama\n0\nIMAX\n0\nAction\n0\nAdventure\n0\nFantasy\n0\nCrime\n0\nComedy\n0\n(no genres listed)\n0\nAnimation\n0\nThriller\n0\nRomance\n0\nWestern\n0\nFilm-Noir\n0\n</code></pre>\n"}]