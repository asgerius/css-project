[{"tags": ["python", "matplotlib", "cartopy"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6010360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c43d244f82b9d6ae20891727452af0a?s=128&d=identicon&r=PG&f=1", "display_name": "bladwig", "link": "https://stackoverflow.com/users/6010360/bladwig"}, "edited": false, "score": 0, "creation_date": 1457033265, "post_id": 35768004, "comment_id": 59233826, "body": "It works!  Thanks!  Also, do you know if the cartopy arguments for the pole latitude and pole longitude from above are the same that I would supply to the NetCDF CF rotated pole parameters:  (grid_north_pole_latitude = 36.0, grid_north_pole_longitude = -106.0 - 180, north_pole_grid_longitude = 0.)  I&#39;m guessing they are, but the documentation is somewhat limited."}], "tags": [], "owner": {"reputation": 18313, "user_id": 741316, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a3a8307ffcd780e908d042bcc97cd2f8?s=128&d=identicon&r=PG", "display_name": "pelson", "link": "https://stackoverflow.com/users/741316/pelson"}, "is_accepted": true, "score": 3, "last_activity_date": 1456997087, "creation_date": 1456997087, "answer_id": 35768004, "question_id": 35760566, "link": "https://stackoverflow.com/questions/35760566/plotting-rotated-pole-projection-in-cartopy/35768004#35768004", "title": "Plotting rotated pole projection in cartopy", "body": "<p>There is an attribute available on a cartopy CRS which gives you the proj4 parameters.</p>\n\n<pre><code>from cartopy import crs\n\n\nrp = crs.RotatedPole(pole_longitude=180.0,     \n                     pole_latitude=36.0,\n                     central_rotated_longitude=-106.0,\n                     globe=crs.Globe(semimajor_axis=6370000,\n                                     semiminor_axis=6370000))\n\nprint(rp.proj4_params)\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>{'a': 6370000, 'o_proj': 'latlon',\n 'b': 6370000, 'to_meter': 0.017453292519943295,\n 'ellps': 'WGS84', 'lon_0': 360.0,\n 'proj': 'ob_tran', 'o_lat_p': 36.0,\n 'o_lon_p': -106.0}\n</code></pre>\n\n<p>So it looks like you only need to set the pole longitude and latitude in order to match your desired projection. The important point being that pole longitude is the position of the dateline of the new projection, not its central longitude - from memory, I seem to remember that this is consistent with bodies such as the WMO, but inconsistent with proj.4:</p>\n\n<pre><code>&gt;&gt;&gt; rp = ccrs.RotatedPole(pole_longitude=-106.0 - 180,\n                         pole_latitude=36,\n                         globe=ccrs.Globe(semimajor_axis=6370000,\n                                          semiminor_axis=6370000))\n&gt;&gt;&gt; print(rp.proj4_params)\n{'a': 6370000, 'o_proj': 'latlon', 'b': 6370000, 'to_meter': 0.017453292519943295,\n 'ellps': 'WGS84', 'lon_0': -106.0, 'proj': 'ob_tran',\n 'o_lat_p': 36, 'o_lon_p': 0.0}\n</code></pre>\n\n<p>With all of that in place, the final code might look something like:</p>\n\n<pre><code>import cartopy.crs as ccrs\nimport cartopy.feature\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nrp = ccrs.RotatedPole(pole_longitude=-106.0 - 180,\n                      pole_latitude=36,\n                      globe=ccrs.Globe(semimajor_axis=6370000,\n                                       semiminor_axis=6370000))\npc = ccrs.PlateCarree()\n\nax = plt.axes(projection=rp)\nax.coastlines('50m', linewidth=0.8)\nax.add_feature(cartopy.feature.LAKES,\n               edgecolor='black', facecolor='none',\n               linewidth=0.8)\n\n# In order to reproduce the extent, we can't use cartopy's smarter\n# \"set_extent\" method, as the bounding box is computed based on a transformed\n# rectangle of given size. Instead, we want to emulate the \"lower left corner\"\n# and \"upper right corner\" behaviour of basemap.\nxs, ys, zs = rp.transform_points(pc,\n                                 np.array([-139.08, 22.66]),\n                                 np.array([-10.59, 46.59])).T\nax.set_xlim(xs)\nax.set_ylim(ys)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/czCuT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/czCuT.png\" alt=\"the resulting figure\"></a></p>\n"}], "owner": {"reputation": 13, "user_id": 6010360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c43d244f82b9d6ae20891727452af0a?s=128&d=identicon&r=PG&f=1", "display_name": "bladwig", "link": "https://stackoverflow.com/users/6010360/bladwig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2016, "favorite_count": 2, "accepted_answer_id": 35768004, "answer_count": 1, "score": 1, "last_activity_date": 1599487915, "creation_date": 1456962653, "last_edit_date": 1552279657, "question_id": 35760566, "link": "https://stackoverflow.com/questions/35760566/plotting-rotated-pole-projection-in-cartopy", "title": "Plotting rotated pole projection in cartopy", "body": "<p>I have a rotated pole projection (taken from the Rapid Refresh model parameters) that I am able to plot correctly in matplotlib-basemap, but can't figure out how to reproduce with cartopy.  Here is the Python code using basemap:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom mpl_toolkits.basemap import Basemap\n\nbm = Basemap(projection = \"rotpole\",\n                  o_lat_p = 36.0,\n                  o_lon_p = 180.0,\n                  llcrnrlat = -10.590603,\n                  urcrnrlat = 46.591976,\n                  llcrnrlon = -139.08585,\n                  urcrnrlon = 22.661009,\n                  lon_0 = -106.0,\n                  rsphere = 6370000,\n                  resolution = 'l')\n\nfig = plt.figure(figsize=(8,8))\nax = fig.add_axes([0.1,0.1,0.8,0.8])\n\nbm.drawcoastlines(linewidth=.5)\n\nprint bm.proj4string\n\nplt.savefig(\"basemap_map.png\")\nplt.close(fig)\n</code></pre>\n\n<p>The proj4 string that prints is:</p>\n\n<pre><code>+o_proj=longlat +lon_0=-106.0 +o_lat_p=36.0 +R=6370000.0 +proj=ob_tran +units=m +o_lon_p=180.0\n</code></pre>\n\n<p>If I use the RotatedPole projection in cartopy and supply the projection parameters from above, I get an image in the south pole.  Here is a snippet (manually typed in from a real example, be warned):</p>\n\n<pre><code>from cartopy import crs\nimport matplotlib.pyplot as plt\n\ncart = crs.RotatedPole(pole_longitude=180.0, \n                       pole_latitude=36.0,\n                       central_rotated_longitude=-106.0, \n                       globe = crs.Globe(semimajor_axis=6370000,\n                                semiminor_axis=6370000))\n\nfig = plt.figure(figsize=(8,8))\nax = plt.axes([0.1,0.1,0.8,0.8], projection=cart)\nax.set_extent([-139.08585, 22.661009, -10.590603, 46.591976], crs.Geodetic())\nplt.savefig(\"cartopy_map.png\")\nplt.close(fig)\n</code></pre>\n\n<p>I've also tried modifying arguments to the RotatedPole class to produce the proj4 parameters from above, and even tried making my own subclass of _CylindricalProjection and setting the proj4 parameters directly in the constructor, but still no luck.  </p>\n\n<p>What is the right way in cartopy to produce the same result as basemap?</p>\n\n<p>Here is the basemap image:</p>\n\n<p><img src=\"https://i.stack.imgur.com/DVhxk.png\" alt=\"basemap image\"></p>\n\n<p>Here is what cartopy produces for the above example:</p>\n\n<p><img src=\"https://i.stack.imgur.com/jSQRF.png\" alt=\"cartopy image\"></p>\n\n<p>Thanks for your help!</p>\n\n<p>Bill</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 4, "creation_date": 1456962767, "post_id": 35760547, "comment_id": 59194306, "body": "So why are you not using a <code>for</code> loop, exactly?"}, {"owner": {"reputation": 6472, "user_id": 3029173, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xJxwn.jpg?s=128&g=1", "display_name": "AnilRedshift", "link": "https://stackoverflow.com/users/3029173/anilredshift"}, "reply_to_user": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 0, "creation_date": 1456963305, "post_id": 35760547, "comment_id": 59194483, "body": "Because the codeflow needs to skip over N iterations next time. I don&#39;t want to visit every element (but which and how many elements to skip are determined in the loop body)"}], "answers": [{"comments": [{"owner": {"reputation": 6472, "user_id": 3029173, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xJxwn.jpg?s=128&g=1", "display_name": "AnilRedshift", "link": "https://stackoverflow.com/users/3029173/anilredshift"}, "edited": false, "score": 0, "creation_date": 1456963178, "post_id": 35760600, "comment_id": 59194431, "body": "So, the reason I&#39;m not using a normal for loop is that I need to be able to skip elements, as determined by the body of the function. The reason for not wanting to use exceptions is that this is in a (actually measured) hot loop in the code, and so I was looking for a non-exception based way."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 6472, "user_id": 3029173, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xJxwn.jpg?s=128&g=1", "display_name": "AnilRedshift", "link": "https://stackoverflow.com/users/3029173/anilredshift"}, "edited": false, "score": 2, "creation_date": 1456963325, "post_id": 35760600, "comment_id": 59194490, "body": "@AnilRedshift: You can skip elements in a for loop. If you loop over an iterator, explicitly <code>next</code>-ing the iterator inside the loop body will cause the loop to skip over the element returned by the explicit <code>next</code> call."}, {"owner": {"reputation": 6472, "user_id": 3029173, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xJxwn.jpg?s=128&g=1", "display_name": "AnilRedshift", "link": "https://stackoverflow.com/users/3029173/anilredshift"}, "edited": false, "score": 0, "creation_date": 1456963397, "post_id": 35760600, "comment_id": 59194513, "body": "Can you give an example? What do I <code>next</code>?"}, {"owner": {"reputation": 115993, "user_id": 24587, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/859e513beefbf5b330a8842d9d39b00e?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Sch&#246;lly", "link": "https://stackoverflow.com/users/24587/georg-sch%c3%b6lly"}, "reply_to_user": {"reputation": 6472, "user_id": 3029173, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xJxwn.jpg?s=128&g=1", "display_name": "AnilRedshift", "link": "https://stackoverflow.com/users/3029173/anilredshift"}, "edited": false, "score": 1, "creation_date": 1456963440, "post_id": 35760600, "comment_id": 59194525, "body": "@AnilRedshift: If you want to skip the current object, use <code>continue</code>, if you want to skip the next objects, I would use a variable <code>skip_n = 1</code> and do this: <code>if skip_n &gt; 0: skip_n -= 1; continue</code> at the start of your loop."}, {"owner": {"reputation": 115993, "user_id": 24587, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/859e513beefbf5b330a8842d9d39b00e?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Sch&#246;lly", "link": "https://stackoverflow.com/users/24587/georg-sch%c3%b6lly"}, "edited": false, "score": 2, "creation_date": 1456963591, "post_id": 35760600, "comment_id": 59194581, "body": "Or alternative (as user2357112 suggests): <code>foo_iterator = iter(foo); for val in foo_iterator: if want_to_skip_next_item: next(foo_iterator)</code>."}, {"owner": {"reputation": 6472, "user_id": 3029173, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xJxwn.jpg?s=128&g=1", "display_name": "AnilRedshift", "link": "https://stackoverflow.com/users/3029173/anilredshift"}, "edited": false, "score": 0, "creation_date": 1456963681, "post_id": 35760600, "comment_id": 59194609, "body": "Right. Must be a long day. I&#39;ll merge this with @user2357112&#39;s post and call it good. Thanks!"}, {"owner": {"reputation": 5896, "user_id": 5644961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-r4jx_ltcdtA/AAAAAAAAAAI/AAAAAAAAAAA/7RjDfLKZHxg/photo.jpg?sz=128", "display_name": "Copperfield", "link": "https://stackoverflow.com/users/5644961/copperfield"}, "edited": false, "score": 0, "creation_date": 1456967599, "post_id": 35760600, "comment_id": 59195768, "body": "instead of next, to skip elements inside a loop, use <a href=\"https://docs.python.org/3/reference/simple_stmts.html#the-continue-statement\" rel=\"nofollow noreferrer\">continue</a>"}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1456967165, "last_edit_date": 1456967165, "creation_date": 1456962853, "answer_id": 35760600, "question_id": 35760547, "link": "https://stackoverflow.com/questions/35760547/using-iter-on-a-list-with-a-default-value/35760600#35760600", "title": "Using iter on a list with a default value", "body": "<p>The Pythonic way would usually be to use a for loop:</p>\n\n<pre><code>for val in foo:\n    print(val)\n</code></pre>\n\n<p>or if that doesn't work, put the default value in the <code>next</code> call instead of attaching it to the iterator itself:</p>\n\n<pre><code>bar = iter(foo)\nval = next(bar, \"default\")\n</code></pre>\n\n<p>If you really want to do this in the iterator, you can use <code>itertools.chain</code> to chain your iterator with an infinite sequence of your sentinel value:</p>\n\n<pre><code>from itertools import chain, repeat\nbar = chain(foo, repeat(\"default\"))\n</code></pre>\n\n<p>To skip over elements inside a for loop, you could:</p>\n\n<pre><code>bar = iter(foo)\nfor val in bar:\n    if_some_condition():\n        next(bar) # skips over the next iteration of the loop\n</code></pre>\n"}], "owner": {"reputation": 6472, "user_id": 3029173, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xJxwn.jpg?s=128&g=1", "display_name": "AnilRedshift", "link": "https://stackoverflow.com/users/3029173/anilredshift"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 35760600, "answer_count": 1, "score": 0, "last_activity_date": 1456967165, "creation_date": 1456962534, "question_id": 35760547, "link": "https://stackoverflow.com/questions/35760547/using-iter-on-a-list-with-a-default-value", "title": "Using iter on a list with a default value", "body": "<p>I would like to be able to do this:</p>\n\n<pre><code>foo = ['a', 'b']\nbar = iter(foo, \"default\")\nval = next(bar)\nwhile val !== \"default\":\n    print(val)\n    val = next(bar)\n</code></pre>\n\n<p>However, that doesn't work because of the second parameter when creating the iter object. I see from the docs that this changes how the first value is used: </p>\n\n<blockquote>\n  <p>Return an iterator object. The first argument is interpreted very differently depending on the presence of the second argument. Without a second argument, object must be a collection object which supports the iteration protocol (the <code>__iter__() method</code>), or it must support the sequence protocol (the <code>__getitem__() method</code> with integer arguments starting at 0). If it does not support either of those protocols, TypeError is raised. If the second argument, sentinel, is given, then object must be a callable object. The iterator created in this case will call object with no arguments for each call to its <code>__next__() method</code>; if the value returned is equal to sentinel, StopIteration will be raised, otherwise the value will be returned.</p>\n</blockquote>\n\n<p>But I don't see a pythonic way to do what I want without resorting to <code>try/catch</code> (aka this)</p>\n\n<pre><code>bar = iter(foo)\ntry:\n    while True:\n        print(next(bar))\nexcept StopIteration:\n    pass\n</code></pre>\n"}, {"tags": ["python", "pyqt"], "comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1456965792, "post_id": 35760540, "comment_id": 59195230, "body": "<a href=\"http://doc.qt.io/qt-4.8/qdoublespinbox.html#setRange\" rel=\"nofollow noreferrer\">QDoubleSpinBox.setRange</a>."}, {"owner": {"reputation": 960, "user_id": 804329, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/LlNVC.jpg?s=128&g=1", "display_name": "BenB", "link": "https://stackoverflow.com/users/804329/benb"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1456966054, "post_id": 35760540, "comment_id": 59195307, "body": "Hi @ekhumoro , I&#39;m not looking to just set the range. The range is very dynamic. e.g. range of the first spinbox might be a function of the tan() and cos() and dot products and crossproducts of other values from other spinboxes. I could re-implement that logic, but the exceptions are being generated from another class that I&#39;d like to keep abstracted."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1456966338, "post_id": 35760540, "comment_id": 59195382, "body": "In that case, you should provide a more realistic example that properly represents the actual problem(s) you are trying to solve."}, {"owner": {"reputation": 960, "user_id": 804329, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/LlNVC.jpg?s=128&g=1", "display_name": "BenB", "link": "https://stackoverflow.com/users/804329/benb"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1456966683, "post_id": 35760540, "comment_id": 59195507, "body": "I think this does capture what I&#39;m looking for: I want to call a function when the value of a spinbox changes (via mouse or keyboard). If that function throws an exception, I want the value of the spinbox to revert to what it was."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1456969139, "post_id": 35760540, "comment_id": 59196210, "body": "I don&#39;t see any reason why you can&#39;t dynamically set the range on the spinboxes. Or at least, the example in your question doesn&#39;t provide any reason."}, {"owner": {"reputation": 960, "user_id": 804329, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/LlNVC.jpg?s=128&g=1", "display_name": "BenB", "link": "https://stackoverflow.com/users/804329/benb"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1456970328, "post_id": 35760540, "comment_id": 59196563, "body": "You could pretend that I couldn&#39;t see the code for <code>some_complicated_function</code>.  Say, if it were a static library.  But the reality is: It&#39;s easy to poll <code>some_complicated_function</code> to see if the values are valid or not. But to get the ranges that are valid given other values is a big inverse problem. Imagine factoring a number: if you give me two numbers, I can tell you their product. But, if you give me the product and tell me to find the factors, it becomes much harder. This is a similar case."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1456971548, "post_id": 35760540, "comment_id": 59196875, "body": "But you already know the value, because you passed it to the function. So why can&#39;t you use this value to <i>dynamically</i> set the maximum/minimum of the range?"}], "answers": [{"comments": [{"owner": {"reputation": 960, "user_id": 804329, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/LlNVC.jpg?s=128&g=1", "display_name": "BenB", "link": "https://stackoverflow.com/users/804329/benb"}, "edited": false, "score": 0, "creation_date": 1461957775, "post_id": 35762096, "comment_id": 61450491, "body": "Accepted for the edit. Setting max and min is not a solution because the complicated functions aren&#39;t necessarily constant or linear (e.g., changing the value of one spin box may change the acceptable values for another spinbox). However, the edit does the trick."}, {"owner": {"reputation": 960, "user_id": 804329, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/LlNVC.jpg?s=128&g=1", "display_name": "BenB", "link": "https://stackoverflow.com/users/804329/benb"}, "edited": false, "score": 0, "creation_date": 1461961382, "post_id": 35762096, "comment_id": 61452223, "body": "Though, if there was a way to bind the behaviour of clicking the up and down arrows to the behaviour of changing the text, that would be much preferred."}], "tags": [], "owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "is_accepted": true, "score": 1, "last_activity_date": 1457290455, "last_edit_date": 1457290455, "creation_date": 1456972378, "answer_id": 35762096, "question_id": 35760540, "link": "https://stackoverflow.com/questions/35760540/how-to-prevent-a-qdoublespinbox-from-changing-values/35762096#35762096", "title": "How to prevent a QDoubleSpinBox from changing values", "body": "<p>Here is a simple way to dynamically set the range on a spinbox:</p>\n\n<pre><code>class SpinBoxSpecial(QtGui.QDoubleSpinBox):\n    def __init__(self, parent=None):\n        super(SpinBoxSpecial, self).__init__(parent)\n        self._last = self.value()\n        self.valueChanged.connect(self.handleValueChanged)\n\n    def handleValueChanged(self, value):\n        try:\n            some_complicated_function(float(value))\n            print \"yup\", value\n            self._last = value\n        except:\n            print \"nope\", value\n            if value &gt; self._last:\n                self.setMaximum(self._last)\n            else:\n                self.setMinimum(self._last)\n</code></pre>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>Just realized the above won't work correctly if a value is typed in directly, because it could fix the min/max too early. So maybe this would be better:</p>\n\n<pre><code>    def handleValueChanged(self, value):\n        try:\n            some_complicated_function(float(value))\n            print \"yup\", value\n            self._last = value\n        except:\n            print \"nope\", value\n            self.setValue(self._last)\n</code></pre>\n"}], "owner": {"reputation": 960, "user_id": 804329, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/LlNVC.jpg?s=128&g=1", "display_name": "BenB", "link": "https://stackoverflow.com/users/804329/benb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "accepted_answer_id": 35762096, "answer_count": 1, "score": 1, "last_activity_date": 1457290455, "creation_date": 1456962509, "last_edit_date": 1456967155, "question_id": 35760540, "link": "https://stackoverflow.com/questions/35760540/how-to-prevent-a-qdoublespinbox-from-changing-values", "title": "How to prevent a QDoubleSpinBox from changing values", "body": "<p>I've written a GUI for a script that does some geometrical calculations. Certain ranges of values break the computation (e.g. find the intersection of two shapes that don't intersect.) I raise exceptions in those cases. I'd like to prevent the user from adjusting the spinbox value beyond the point where exceptions are raised.</p>\n\n<p>I've tried overwriting the validator method for the QDoubleSpinBox. This works great when I manually enter values with the keyboard. But, it doesn't prevent me from clicking the up and down arrows. </p>\n\n<p>How I can limit the ability of the user to run-up the values outside of the acceptable range? </p>\n\n<p>Note: The actual <code>some_complicated_function</code> involves the values from 5 different spinboxes. </p>\n\n<pre><code>from PyQt4 import QtCore, QtGui\nimport sys\n\ndef some_complicated_function(val_a):\n    if val_a + 3 &lt; 10:\n        return True\n    else:\n        raise Exception(\"Giant number!\")\n\nclass SpinBoxSpecial(QtGui.QDoubleSpinBox):\n    def validate(self, value, pos):\n#         print float(value)\n        try:\n            some_complicated_function(float(value))\n            print \"yup\"\n            return QtGui.QValidator.Acceptable, QtGui.QValidator.Acceptable\n        except:\n            print \"nope\"\n            return QtGui.QValidator.Invalid, QtGui.QValidator.Invalid\n\na = QtGui.QApplication(sys.argv)       \nw = QtGui.QMainWindow()\nw.resize(320, 100)\nw.setWindowTitle(\"PyQT Python Widget!\") \n\nspinbox = SpinBoxSpecial(w)\nspinbox.move(20, 20)\nspinbox.CorrectionMode = QtGui.QAbstractSpinBox.CorrectToPreviousValue\n\nw.show() \n\nsys.exit(a.exec_())\n</code></pre>\n\n<p><strong>Edit:</strong>\nThe basic ask is:  I want to call a function when the value of a spinbox changes (via mouse or keyboard). If that function throws an exception, I want the value of the spinbox to revert to what it was. </p>\n"}, {"tags": ["python", "django", "facebook", "facebook-graph-api", "django-rest-framework"], "comments": [{"owner": {"reputation": 126, "user_id": 4371642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/967eac17f42fee3557dcdefe4d9e6e1e?s=128&d=identicon&r=PG&f=1", "display_name": "lamdadj22", "link": "https://stackoverflow.com/users/4371642/lamdadj22"}, "edited": false, "score": 0, "creation_date": 1458171248, "post_id": 35760479, "comment_id": 59746322, "body": "you need to explicitly request it."}, {"owner": {"reputation": 195, "user_id": 1851987, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5dd6240048e4634df7df09b78a9e1093?s=128&d=identicon&r=PG", "display_name": "rostgaard", "link": "https://stackoverflow.com/users/1851987/rostgaard"}, "reply_to_user": {"reputation": 126, "user_id": 4371642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/967eac17f42fee3557dcdefe4d9e6e1e?s=128&d=identicon&r=PG&f=1", "display_name": "lamdadj22", "link": "https://stackoverflow.com/users/4371642/lamdadj22"}, "edited": false, "score": 0, "creation_date": 1458217157, "post_id": 35760479, "comment_id": 59767278, "body": "Isn&#39;t that what i&#39;m doing in &#39;SOCIAL_AUTH_FACEBOOK_PROFILE_EXTRA_PARAMS = { &#39;fields&#39;: &#39;id,first_name,last_name&#39; }&#39;? Or where do i need to request it?"}], "owner": {"reputation": 195, "user_id": 1851987, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5dd6240048e4634df7df09b78a9e1093?s=128&d=identicon&r=PG", "display_name": "rostgaard", "link": "https://stackoverflow.com/users/1851987/rostgaard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456968688, "creation_date": 1456962198, "last_edit_date": 1456968688, "question_id": 35760479, "link": "https://stackoverflow.com/questions/35760479/get-first-name-and-email-from-token-in-drf-social-oauth2", "title": "Get first name and email from token in DRF social oauth2", "body": "<p>I use <a href=\"https://github.com/PhilipGarnero/django-rest-framework-social-oauth2\" rel=\"nofollow\">https://github.com/PhilipGarnero/django-rest-framework-social-oauth2</a> for my backend. I have a custom user and it works in Django Admin. </p>\n\n<p>My frontend is an iOS app that uses the Facebook SDK to get a token, I have the rights to name and email. </p>\n\n<p>I'm currently testing on localhost without using the app, just using the user token from: <a href=\"https://developers.facebook.com/tools/accesstoken/\" rel=\"nofollow\">https://developers.facebook.com/tools/accesstoken/</a></p>\n\n<p>This is my in <code>settings.py</code>:  </p>\n\n<pre><code>SOCIAL_AUTH_FACEBOOK_PROFILE_EXTRA_PARAMS = {\n'fields': 'id,first_name,last_name'\n}\n</code></pre>\n\n<p>When I run</p>\n\n<pre><code>curl -X POST -d \"grant_type=convert_token&amp;client_id=&lt;client_id&gt;&amp;client_secret=&lt;client_secret&gt;&amp;backend=facebook&amp;token=&lt;facebook_token&gt;\" http://localhost:8000/auth/convert-token\n</code></pre>\n\n<p>I get the error</p>\n\n<pre><code>TypeError: create_user() missing 3 required positional arguments: 'email', 'first_name' and 'last_name'\n</code></pre>\n\n<p>This is leading me to believe that I don't get this information from the token, I got the name from the user before I started using my custom user as auth.</p>\n\n<p>Let me know if it is unclear and I need to provide some code.</p>\n"}, {"tags": ["python", "scrapy"], "answers": [{"tags": [], "owner": {"reputation": 458, "user_id": 4817209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/768416964539c4688125e6ed2b3f9f48?s=128&d=identicon&r=PG&f=1", "display_name": "Djunzu", "link": "https://stackoverflow.com/users/4817209/djunzu"}, "is_accepted": false, "score": 0, "last_activity_date": 1456963640, "creation_date": 1456963640, "answer_id": 35760720, "question_id": 35760370, "link": "https://stackoverflow.com/questions/35760370/scrapy-callback-function-how-to-parse-several-pages/35760720#35760720", "title": "Scrapy callback function, how to parse several pages?", "body": "<p><code>hxs.xpath(...).extract()</code> is returning a list and not a string.\nTry to iterate over the list yielding requests or select the correct url you want from the list.</p>\n\n<p>After that, it will work only if links in the page are absolute paths. If they are relative, you need to build the absolute path.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 5732362, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1111120625578357/picture?type=large", "display_name": "brrrglund", "link": "https://stackoverflow.com/users/5732362/brrrglund"}, "edited": false, "score": 0, "creation_date": 1456966462, "post_id": 35760725, "comment_id": 59195433, "body": "Thanks a lot. However, now I get a new error: &quot;TypeError: Request url must be str or unicode, got NoneType:&quot;"}, {"owner": {"reputation": 51, "user_id": 5732362, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1111120625578357/picture?type=large", "display_name": "brrrglund", "link": "https://stackoverflow.com/users/5732362/brrrglund"}, "edited": false, "score": 0, "creation_date": 1457004510, "post_id": 35760725, "comment_id": 59213255, "body": "Thanks a million for your updated answer! Now it crawls the linked pages perfectly.   However, I still got problem with the callback function &quot;callback=self.parse_link2&quot;. It doesn&#39;t scrape the page. When I run the code it only crawls but does not scrape the site. I even got identical output when I deleted the whole parse_link2 function. Am I doing the callback function correctly?"}, {"owner": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "reply_to_user": {"reputation": 51, "user_id": 5732362, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1111120625578357/picture?type=large", "display_name": "brrrglund", "link": "https://stackoverflow.com/users/5732362/brrrglund"}, "edited": false, "score": 0, "creation_date": 1457009845, "post_id": 35760725, "comment_id": 59216863, "body": "@brrrglund, inside a loop over results of a selector <code>.xpath()</code> call, you need to use <b>relative XPaths</b> (starting with <code>.&#47;</code> to be safe) instead of absolute XPaths (starting with <code>&#47;</code>) -- the latter ones start from the root of the document. Try <code>sel.xpath(&#39;.&#47;div[2]&#47;table&#47;&#47;tr[3]&#47;td&#47;h1&#39;).extract()</code> (I removed <code>tbody&#47;</code> too)"}, {"owner": {"reputation": 51, "user_id": 5732362, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1111120625578357/picture?type=large", "display_name": "brrrglund", "link": "https://stackoverflow.com/users/5732362/brrrglund"}, "edited": false, "score": 0, "creation_date": 1457011195, "post_id": 35760725, "comment_id": 59217853, "body": "I tried this too but it still does not work. I even tried &quot;sel.xpath(&#39;//h1&#39;).extract()&quot; but it still doesn&#39;t scrape any data. Could the problem be elsewhere?"}, {"owner": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "reply_to_user": {"reputation": 51, "user_id": 5732362, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1111120625578357/picture?type=large", "display_name": "brrrglund", "link": "https://stackoverflow.com/users/5732362/brrrglund"}, "edited": false, "score": 0, "creation_date": 1457011365, "post_id": 35760725, "comment_id": 59217983, "body": "Use relative XPath, such as <code>.&#47;&#47;h1</code> (notice the leading dot), not <code>&#47;&#47;h1</code>"}, {"owner": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "reply_to_user": {"reputation": 51, "user_id": 5732362, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1111120625578357/picture?type=large", "display_name": "brrrglund", "link": "https://stackoverflow.com/users/5732362/brrrglund"}, "edited": false, "score": 0, "creation_date": 1457011576, "post_id": 35760725, "comment_id": 59218137, "body": "scrapy shell example: <a href=\"https://gist.github.com/redapple/716132c832d60c4d07fe\" rel=\"nofollow noreferrer\">gist.github.com/redapple/716132c832d60c4d07fe</a> so the callback should work. If you don&#39;t get into the callback, that&#39;s another problem. Worth another question on StackOverflow"}, {"owner": {"reputation": 51, "user_id": 5732362, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1111120625578357/picture?type=large", "display_name": "brrrglund", "link": "https://stackoverflow.com/users/5732362/brrrglund"}, "edited": false, "score": 0, "creation_date": 1457013346, "post_id": 35760725, "comment_id": 59219502, "body": "Really appreciate your patience with me @paul-trmbrth. I tried inserting the following code in parse_link1, but it does not print &quot;hey&quot;. A similar crawler I did prints it perfectly when I insert it in the corresponding loop:      <code>def parse_link1(self, response):         for href in response.xpath(&#39;&#39;&#39;&#47;&#47;*[@id=&quot;printContent&quot;]&#47;div[2]&#47;table&#47;&#47;tr[4&zwnj;&#8203;]&#47;td&#47;table&#47;&#47;tr&#47;td[2]&zwnj;&#8203;&#47;a&#47;@href&#39;&#39;&#39;).extract&zwnj;&#8203;():             print &quot;hey&quot;             yield scrapy.Request(response.urljoin(href), callback=self.parse_link2)</code>"}, {"owner": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "reply_to_user": {"reputation": 51, "user_id": 5732362, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1111120625578357/picture?type=large", "display_name": "brrrglund", "link": "https://stackoverflow.com/users/5732362/brrrglund"}, "edited": false, "score": 0, "creation_date": 1457014193, "post_id": 35760725, "comment_id": 59220157, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/105263/discussion-between-paul-trmbrth-and-brrrglund\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "is_accepted": true, "score": 1, "last_activity_date": 1456999931, "last_edit_date": 1456999931, "creation_date": 1456963706, "answer_id": 35760725, "question_id": 35760370, "link": "https://stackoverflow.com/questions/35760370/scrapy-callback-function-how-to-parse-several-pages/35760725#35760725", "title": "Scrapy callback function, how to parse several pages?", "body": "<p>In <code>parse_link1</code>, you're passing a list, the result of <code>.extract()</code> on a <code>SelectorList</code> (result of calling <code>.xpath()</code> on the <code>hxs</code> selector), as value for <code>url</code>, the first argument of <code>Request</code> constructor, while a single value is expected.</p>\n\n<p>Use <code>.extract_first()</code> instead:</p>\n\n<pre><code>return Request(hxs.xpath('//*[@id=\"printContent\"]/div[2]/table/tbody/tr[4]/td/table/tbody/tr/td[2]/a').extract_first()\n</code></pre>\n\n<hr>\n\n<p>Edit after OP's comment on </p>\n\n<pre><code>\"TypeError: Request url must be str or unicode, got NoneType:\"\n</code></pre>\n\n<p>This is due to a \"too-conservative\" XPath expression, probably given by your browser Inspect tools I guess (I tested your XPath in Chrome and it works for <a href=\"http://www.allabolag.se/befattningshavare/de_Sauvage-Nolting%252C_Henri_Jacob_Jan/f6da68933af6383498691f19de7ebd4b\" rel=\"nofollow\">this example page</a>)</p>\n\n<p>The trouble is with <code>.../table/tbody/tr/...</code>. The thing is <code>&lt;tbody&gt;</code> is rarely there for real HTML pages written by people or even templates (written by people).\nHTML wants a <code>&lt;table&gt;</code> to have a <code>&lt;tbody&gt;</code> but nobody really cares, and browsers cope fine (and they inject the missing <code>&lt;tbody&gt;</code> element to host the <code>&lt;tr&gt;</code> rows.)</p>\n\n<p>So, although it's not strictly equivalent XPath, it's usually fine to:</p>\n\n<ul>\n<li>either omit <code>tbody/</code> and use the <code>table/tr</code> pattern</li>\n<li>or use <code>table//tr</code></li>\n</ul>\n\n<p>See it in action with <code>scrapy shell</code>:</p>\n\n<pre><code>$ scrapy shell http://www.allabolag.se/befattningshavare/de_Sauvage-Nolting%252C_Henri_Jacob_Jan/f6da68933af6383498691f19de7ebd4b\n&gt;&gt;&gt;\n&gt;&gt;&gt; # with XPath from browser tool (I assume), you get nothing for the \"real\" downloaded HTML \n&gt;&gt;&gt; response.xpath('//*[@id=\"printContent\"]/div[2]/table/tbody/tr[4]/td/table/tbody/tr/td[2]/a')\n[]\n&gt;&gt;&gt;\n&gt;&gt;&gt; # or, omitting `tbody/`\n&gt;&gt;&gt; response.xpath('//*[@id=\"printContent\"]/div[2]/table/tr[4]/td/table/tr/td[2]/a')\n[&lt;Selector xpath='//*[@id=\"printContent\"]/div[2]/table/tr[4]/td/table/tr/td[2]/a' data=u'&lt;a href=\"/befattningshavare/de_Sauvage-N'&gt;]\n\n&gt;&gt;&gt; # replacing \"/table/tbody/\" with \"/table//\" (tbody is added by browser to have \"correct DOM tree\")\n&gt;&gt;&gt; response.xpath('//*[@id=\"printContent\"]/div[2]/table//tr[4]/td/table//tr/td[2]/a')\n[&lt;Selector xpath='//*[@id=\"printContent\"]/div[2]/table//tr[4]/td/table//tr/td[2]/a' data=u'&lt;a href=\"/befattningshavare/de_Sauvage-N'&gt;]\n&gt;&gt;&gt;\n&gt;&gt;&gt; # suggestion: use the &lt;img&gt; tag after the &lt;a&gt; as predicate\n&gt;&gt;&gt; response.xpath('//*[@id=\"printContent\"]/div[2]/table//tr/td/table//tr/td/a[img/@alt=\"personprofil\"]')\n[&lt;Selector xpath='//*[@id=\"printContent\"]/div[2]/table//tr/td/table//tr/td/a[img/@alt=\"personprofil\"]' data=u'&lt;a href=\"/befattningshavare/de_Sauvage-N'&gt;]\n&gt;&gt;&gt; \n</code></pre>\n\n<p>Also, you need:</p>\n\n<ul>\n<li>to get the \"href\" attribute value (adding <code>@href</code> at the end of your XPath)</li>\n<li>build an absolute URL. <code>response.urljoin()</code> is a handy shortcut for this</li>\n</ul>\n\n<p>Continuing in scrapy shell:</p>\n\n<pre><code>&gt;&gt;&gt; response.xpath('//*[@id=\"printContent\"]/div[2]/table/tr[4]/td/table/tr/td[2]/a/@href').extract_first()\nu'/befattningshavare/de_Sauvage-Nolting%252C_Henri_Jacob_Jan_Personprofil/f6da68933af6383498691f19de7ebd4b'\n&gt;&gt;&gt; response.urljoin(u'/befattningshavare/de_Sauvage-Nolting%252C_Henri_Jacob_Jan_Personprofil/f6da68933af6383498691f19de7ebd4b')\nu'http://www.allabolag.se/befattningshavare/de_Sauvage-Nolting%252C_Henri_Jacob_Jan_Personprofil/f6da68933af6383498691f19de7ebd4b'\n&gt;&gt;&gt; \n</code></pre>\n\n<p>In the end, your callback could become:</p>\n\n<pre><code>def parse_link1(self, response):\n    # .extract() returns a list here, after .xpath()\n    # so you can loop, even if you have 1 result\n    #\n    # XPaths can be multiline, it's easier to read for long expressions\n    for href in response.xpath('''\n        //*[@id=\"printContent\"]\n           /div[2]\n            /table//tr[4]/td\n             /table//tr/td[2]/a/@href''').extract():\n        yield Request(response.urljoin(href),\n                      callback=self.parse_link2)\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5732362, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1111120625578357/picture?type=large", "display_name": "brrrglund", "link": "https://stackoverflow.com/users/5732362/brrrglund"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 35760725, "answer_count": 2, "score": 0, "last_activity_date": 1457017057, "creation_date": 1456961573, "last_edit_date": 1457017057, "question_id": 35760370, "link": "https://stackoverflow.com/questions/35760370/scrapy-callback-function-how-to-parse-several-pages", "title": "Scrapy callback function, how to parse several pages?", "body": "<p>I want to make a crawler that starts at a url (page1), and follows a link to a new page, page2. On page2 it should follow a link to page3. Then I want to scrape some data on page3.</p>\n\n<p>However, I'm a noob at scraping and can't get the callback function to work. Here's my code:</p>\n\n<pre><code>class allabolagnewspider(CrawlSpider):\nname=\"allabolagnewspider\"\n# allowed_domains = [\"byralistan.se\"]\nstart_urls = [\n    \"http://www.allabolag.se/5565794400/befattningar\"\n]\n\nrules = (\n    Rule(LinkExtractor(allow = \"http://www.allabolag.se\",\n                       restrict_xpaths=('//*[@id=\"printContent\"]//a[1]'),\n                       canonicalize=False),\n         callback='parse_link1'),\n)\n\ndef parse_link1(self, response):\n    hxs = HtmlXPathSelector(response)\n    return Request(hxs.xpath('//*[@id=\"printContent\"]/div[2]/table/tbody/tr[4]/td/table/tbody/tr/td[2]/a').extract(), callback=self.parse_link2)\n\ndef parse_link2(self, response):\n    for sel in response.xpath('//*[@id=\"printContent\"]'):\n        item = AllabolagnewItem()\n        item['Byra'] = sel.xpath('/div[2]/table/tbody/tr[3]/td/h1').extract()\n        item['Namn'] = sel.xpath('/div[2]/table/tbody/tr[3]/td/h1').extract()\n        item['Gender'] = sel.xpath('/div[2]/table/tbody/tr[3]/td/h1').extract()\n        item['Alder'] = sel.xpath('/div[2]/table/tbody/tr[3]/td/h1').extract()\n        yield item\n</code></pre>\n\n<p>However, when I run it I get the following error message: \n\"TypeError: Request url must be str or unicode, got list:\"</p>\n\n<p>If I got it correctly I mess up when I try to return my request for parse_link1. What should I do?</p>\n\n<p>Edit:</p>\n\n<p>Here's the working code (still got a few issues though but the specific problem was solved):</p>\n\n<pre><code>class allabolagnewspider(CrawlSpider):\nname=\"allabolagnewspider\"\n# allowed_domains = [\"byralistan.se\"]\nstart_urls = [\n    \"http://www.allabolag.se/5565794400/befattningar\"\n]\n\nrules = (\n    Rule(LinkExtractor(allow = \"http://www.allabolag.se\",\n                       restrict_xpaths=('//*[@id=\"printContent\"]//a[2]'),\n                       canonicalize=False),\n         callback='parse_link1'),\n)\n\ndef parse_link1(self, response):\n    for href in response.xpath('''//*[@id=\"printContent\"]/div[2]/table//tr[4]/td/table//tr/td[2]/a/@href''').extract():\n        print \"hey\"\n        yield Request(response.urljoin(href), callback=self.parse_link2)\n\ndef parse_link2(self, response):\n    for sel in response.xpath('//*[@id=\"printContent\"]'):\n        print \"hey2\"\n        item = AllabolagnewItem()\n        item['Byra'] = sel.xpath('./div[2]/table//tr[3]/td/h1/text()').extract()\n        item['Namn'] = sel.xpath('./div[2]/table//tr[3]/td/h1/text()').extract()\n        item['Gender'] = sel.xpath('./div[2]/table//tr[7]/td/table[1]//tr[1]/td/text()').extract()\n        item['Alder'] = sel.xpath('./div[2]/table//tr[3]/td/h1/text()').extract()\n        yield item\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "module", "zlib"], "comments": [{"owner": {"reputation": 2287, "user_id": 1797321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1862ad779accac9b8286f8ff570c918?s=128&d=identicon&r=PG", "display_name": "kchomski", "link": "https://stackoverflow.com/users/1797321/kchomski"}, "edited": false, "score": 0, "creation_date": 1456961677, "post_id": 35760335, "comment_id": 59193867, "body": "Have you tried to import zlib in python interactive session?"}, {"owner": {"reputation": 18953, "user_id": 4640209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bc12112054e578fc0bcd333cbb2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4640209/alex"}, "edited": false, "score": 0, "creation_date": 1456961801, "post_id": 35760335, "comment_id": 59193913, "body": "zlib is a dependency of <code>matplotlib</code>, you will have to install it"}, {"owner": {"reputation": 1, "user_id": 6010439, "user_type": "registered", "profile_image": "https://graph.facebook.com/974503009304319/picture?type=large", "display_name": "Nick", "link": "https://stackoverflow.com/users/6010439/nick"}, "edited": false, "score": 0, "creation_date": 1456961921, "post_id": 35760335, "comment_id": 59193960, "body": "I have already installed zlib, and import zlib in an interactive session simply gives <code>ImportError: No module named zlib</code>. When trying to import zlib, is python looking for something like zlib.py?"}, {"owner": {"reputation": 18953, "user_id": 4640209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bc12112054e578fc0bcd333cbb2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4640209/alex"}, "edited": false, "score": 0, "creation_date": 1456962156, "post_id": 35760335, "comment_id": 59194052, "body": "Do you have multiple versions of python installed ? Did you use <code>pip</code>, <code>conda</code> or <code>easy_install</code> to install the packages ?"}, {"owner": {"reputation": 1, "user_id": 6010439, "user_type": "registered", "profile_image": "https://graph.facebook.com/974503009304319/picture?type=large", "display_name": "Nick", "link": "https://stackoverflow.com/users/6010439/nick"}, "edited": false, "score": 0, "creation_date": 1456967312, "post_id": 35760335, "comment_id": 59195690, "body": "Yeah, I have 3.4 as well, but I&#39;m using 2.7 to run the interactive session (checked with <code>sys</code>). Nope, used apt-get for all packages."}], "owner": {"reputation": 1, "user_id": 6010439, "user_type": "registered", "profile_image": "https://graph.facebook.com/974503009304319/picture?type=large", "display_name": "Nick", "link": "https://stackoverflow.com/users/6010439/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 932, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456961412, "creation_date": 1456961412, "question_id": 35760335, "link": "https://stackoverflow.com/questions/35760335/python2-7-no-module-named-zlib", "title": "Python2.7: No module named zlib", "body": "<p>I'm trying to use <strong>matplotlib</strong> in Python 2.7, but am encountering the following error</p>\n\n<pre><code>    &gt;&gt;&gt; import matplotlib\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/lib/pymodules/python2.7/matplotlib/__init__.py\", line 156, in &lt;module&gt;\n  File \"/usr/lib/pymodules/python2.7/matplotlib/cbook.py\", line 15, in &lt;module&gt;\n  File \"/usr/local/lib/python2.7/gzip.py\", line 9, in &lt;module&gt;\n    import zlib\nImportError: No module named zlib\n</code></pre>\n\n<p>I installed python with <code>sudo apt-get install python2.7</code>, and other required packages similarly. I installed <strong>zlib</strong> from source, with no issues. </p>\n"}, {"tags": ["python", "django", "jenkins", "cobertura"], "comments": [{"owner": {"reputation": 353, "user_id": 3452235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/husOu.jpg?s=128&g=1", "display_name": "lealoureiro", "link": "https://stackoverflow.com/users/3452235/lealoureiro"}, "edited": false, "score": 0, "creation_date": 1457959795, "post_id": 35760314, "comment_id": 59628406, "body": "Just noticed, is not just with Covertura REST API Information but Jenkins API information itself..."}], "owner": {"reputation": 353, "user_id": 3452235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/husOu.jpg?s=128&g=1", "display_name": "lealoureiro", "link": "https://stackoverflow.com/users/3452235/lealoureiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1456961300, "creation_date": 1456961300, "question_id": 35760314, "link": "https://stackoverflow.com/questions/35760314/jenkins-cobertura-plugin-conflicting-names", "title": "jenkins cobertura plugin conflicting names", "body": "<p>I'm using Cobertura plugin for jenkins, to show the coverage of a Django project, but i have a small problem. One of my apps is called 'api', so when i click in results to that app, it goes for Cobertura REST API information. </p>\n\n<p>There is any solution for this without change the name of the app?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "web-services", "csv", "soap"], "comments": [{"owner": {"reputation": 2126, "user_id": 208930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934ebefe1d8383fd2b58ff2aa3cb6456?s=128&d=identicon&r=PG", "display_name": "Cahit", "link": "https://stackoverflow.com/users/208930/cahit"}, "edited": false, "score": 0, "creation_date": 1457053032, "post_id": 35760308, "comment_id": 59243525, "body": "Question not very clear, can you expand on the specific issue? Are you using a specific SOAP library or just the <code>requests</code> module?"}, {"owner": {"reputation": 77, "user_id": 5992671, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c70074c9163aaaed9457c60e146c9f79?s=128&d=identicon&r=PG", "display_name": "Carver Stone", "link": "https://stackoverflow.com/users/5992671/carver-stone"}, "reply_to_user": {"reputation": 2126, "user_id": 208930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934ebefe1d8383fd2b58ff2aa3cb6456?s=128&d=identicon&r=PG", "display_name": "Cahit", "link": "https://stackoverflow.com/users/208930/cahit"}, "edited": false, "score": 0, "creation_date": 1457067172, "post_id": 35760308, "comment_id": 59247223, "body": "@Cahit added some more detail in the original post. let me know if its still not clear. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 77, "user_id": 5992671, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c70074c9163aaaed9457c60e146c9f79?s=128&d=identicon&r=PG", "display_name": "Carver Stone", "link": "https://stackoverflow.com/users/5992671/carver-stone"}, "is_accepted": true, "score": 0, "last_activity_date": 1457336325, "creation_date": 1457336325, "answer_id": 35838481, "question_id": 35760308, "link": "https://stackoverflow.com/questions/35760308/python-soap-response-delete-the-response-header-keep-the-rest/35838481#35838481", "title": "Python: SOAP response. Delete the Response header, keep the rest?", "body": "<p>got it sorted</p>\n\n<p>added to the initial string definition</p>\n\n<pre><code>.rpartition('&lt;report&gt;')[-1]\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 5992671, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c70074c9163aaaed9457c60e146c9f79?s=128&d=identicon&r=PG", "display_name": "Carver Stone", "link": "https://stackoverflow.com/users/5992671/carver-stone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 35838481, "answer_count": 1, "score": 0, "last_activity_date": 1457380841, "creation_date": 1456961268, "last_edit_date": 1457380841, "question_id": 35760308, "link": "https://stackoverflow.com/questions/35760308/python-soap-response-delete-the-response-header-keep-the-rest", "title": "Python: SOAP response. Delete the Response header, keep the rest?", "body": "<p>I think this is simple.....</p>\n\n<p>I have a script that takes a bunch of data, changes some characters, splits the data into columns and rows with headers and outputs as a CSV. This worked perfectly fine in testing with the data coming in from a text file. The real use is calling to an authenticated webservice. Which also works fine. </p>\n\n<p>The issue is all the code that formats the data and makes the final CSV file doesn't work when it's called from the webservice. </p>\n\n<p>The reason is the very first line of the results</p>\n\n<pre><code>&lt;env:Envelope xmlns:env='http://schemas.xmlsoap.org/soap/envelope/'&gt;&lt;env:Header&gt;&lt;/env:Header&gt;&lt;env:Body&gt;&lt;ns1:GetACustomReportResponse xmlns:ns1=\"http://www.customurlfortesting.com/gem/services/gds\"&gt;&lt; report &gt;Header1,Header2,Header3\n</code></pre>\n\n<p>When I was testing initially, I just retrieved Header1,Header2,Header3 etc all seperated by a character thats replaceable. The same is still true now, but the rest of the formatting is failing at the beginning because of the stuff before the Header1. Is there a way to simply not get that info in the results?</p>\n\n<pre><code>r = requests.post(url,data=body,headers=headers)\ndata = str(r.text.encode('utf-8').replace(\"\\\"....etc  &lt; im guessing I can strip that first line of the reults in here since this is where my results are but I don't exactly how to remove that line dynamically without affecting anything else. I want to remove everything from &lt;env:Envelope to &lt;report&gt; including &lt;env:Envelope and &lt;report&gt;\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "algorithm", "numpy", "matplotlib"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1456964389, "post_id": 35760298, "comment_id": 59194812, "body": "Take a look at <code>scipy</code> <code>ConvexHull</code>, <a href=\"http://stackoverflow.com/questions/35664675/in-scipys-convexhull-what-does-area-measure\" title=\"in scipys convexhull what does area measure\">stackoverflow.com/questions/35664675/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 6010463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f4873a8604b7276a4e13a2854ddc61?s=128&d=identicon&r=PG&f=1", "display_name": "Zhou Hongyu", "link": "https://stackoverflow.com/users/6010463/zhou-hongyu"}, "edited": false, "score": 0, "creation_date": 1457041163, "post_id": 35760615, "comment_id": 59238522, "body": "Thanks very much! That&#39;s exactly what I wanted!"}], "tags": [], "owner": {"reputation": 8858, "user_id": 186026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/q1xfe.png?s=128&g=1", "display_name": "fjarri", "link": "https://stackoverflow.com/users/186026/fjarri"}, "is_accepted": true, "score": 7, "last_activity_date": 1456962960, "creation_date": 1456962960, "answer_id": 35760615, "question_id": 35760298, "link": "https://stackoverflow.com/questions/35760298/how-to-calculate-python-2d-scatter-points-occupied-area/35760615#35760615", "title": "How to calculate python 2D scatter points occupied area", "body": "<p>This problem is not related to <code>matplotlib</code>, and also requires a definition of the \"occupied area\", which may vary depending on the kind of data you have. If you want a kind of non-strict approximation, here's one way to do it:</p>\n\n<p>First, some test data:</p>\n\n<pre><code>import matplotlib\nimport matplotlib.pyplot as plt\n\nimport numpy\n\n\nx = numpy.random.normal(size=10000)\ny = numpy.random.normal(size=10000)\n\nfig = plt.figure()\ns = fig.add_subplot(1, 1, 1, aspect=1)\ns.set_xlim(-4, 4)\ns.set_ylim(-4, 4)\ns.scatter(x, y)\nfig.savefig('t1.png')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/RfeSg.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/RfeSg.png\" alt=\"enter image description here\"></a></p>\n\n<p>Calculate a 2D histogram to estimate the density of points. <strong>Note:</strong> the number of bins and the range is something you will have to adjust for your data. </p>\n\n<pre><code>hist, xedges, yedges = numpy.histogram2d(x, y, bins=20, range=[[-4, 4], [-4, 4]])\n\nfig = plt.figure()\ns = fig.add_subplot(1, 1, 1)\ns.set_xlim(-4, 4)\ns.set_ylim(-4, 4)\ns.imshow(\n    hist, interpolation='nearest',\n    extent=[xedges[0], xedges[-1], yedges[0], yedges[-1]],\n    cmap=matplotlib.cm.viridis)\nfig.savefig('t2.png')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1CWiE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/1CWiE.png\" alt=\"enter image description here\"></a></p>\n\n<p>Finally, find the places where the number of counts is greater than some predefined value. <strong>Note:</strong> you will have to adjust this threshold too, to get the desired distinction between \"occupied\" and \"non-occupied\" areas:</p>\n\n<pre><code>over_threshold = hist &gt; 10\n\nfig = plt.figure()\ns = fig.add_subplot(1, 1, 1)\ns.set_xlim(-4, 4)\ns.set_ylim(-4, 4)\ns.imshow(\n    over_threshold, interpolation='nearest',\n    extent=[xedges[0], xedges[-1], yedges[0], yedges[-1]],\n    cmap=matplotlib.cm.viridis)\nfig.savefig('t3.png')\n\narea = over_threshold.sum() * (xedges[1] - xedges[0]) * (yedges[1] - yedges[0])\nprint(area)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/GLQN9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GLQN9.png\" alt=\"enter image description here\"></a></p>\n\n<p>All the plotting, of course, is purely illustrative, and is not essential to the algorithm.</p>\n"}], "owner": {"reputation": 75, "user_id": 6010463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f4873a8604b7276a4e13a2854ddc61?s=128&d=identicon&r=PG&f=1", "display_name": "Zhou Hongyu", "link": "https://stackoverflow.com/users/6010463/zhou-hongyu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1365, "favorite_count": 1, "accepted_answer_id": 35760615, "answer_count": 1, "score": 4, "last_activity_date": 1456965285, "creation_date": 1456961235, "last_edit_date": 1456965285, "question_id": 35760298, "link": "https://stackoverflow.com/questions/35760298/how-to-calculate-python-2d-scatter-points-occupied-area", "title": "How to calculate python 2D scatter points occupied area", "body": "<p>I have used matplotlib to plot those two series of 2000 points. From the pictures, it seems the first 2000 points occupied area is smaller than second 2000 points. But if I want to quantitatively calculated how much area first and second serials of 2000 points occupied, how can I do?</p>\n\n<p><a href=\"https://i.stack.imgur.com/J1UDf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J1UDf.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/9Dr2e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9Dr2e.png\" alt=\"enter image description here\"></a></p>\n\n<p>I really appreciate any help, suggestions or comments.</p>\n\n<p>Thanks very much.</p>\n"}, {"tags": ["python", "django", "python-3.5"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 6010432, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0HCVpJMuD5E/AAAAAAAAAAI/AAAAAAAAPjo/sz1E6cSf5Vw/photo.jpg?sz=128", "display_name": "SoFolichon", "link": "https://stackoverflow.com/users/6010432/sofolichon"}, "edited": false, "score": 0, "creation_date": 1456962206, "post_id": 35760436, "comment_id": 59194072, "body": "Ugh, forgot to check Python 3 compatibility. Indeed, it&#39;s not according to <a href=\"https://github.com/wagnerrp/pytmdb3/issues/18\" rel=\"nofollow noreferrer\">this issue</a>. I&#39;ll be more careful to check that next time, thanks :)"}], "tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 1, "last_activity_date": 1456962233, "last_edit_date": 1456962233, "creation_date": 1456961983, "answer_id": 35760436, "question_id": 35760283, "link": "https://stackoverflow.com/questions/35760283/import-tmdb3-package-in-django-views/35760436#35760436", "title": "Import TMDB3 package in django views", "body": "<p>It looks like <a href=\"https://github.com/wagnerrp/pytmdb3\" rel=\"nofollow\">pytmdb3</a> does not support Python 3. You could try <a href=\"https://pypi.python.org/pypi/tmdbsimple\" rel=\"nofollow\">tmdbsimple</a> instead, which appears to support Python 2. Your other options are to switch to Python 2 (not ideal) or update pytmdb3 to support Python 3.</p>\n\n<p>The specific error is from this line in <code>tmdb3\\__init__.py</code></p>\n\n<pre><code>from tmdb_api import Configuration, searchMovie, searchMovieWithYear, \\\n</code></pre>\n\n<p>For Python 3, this should be either</p>\n\n<pre><code>from tmdb.tmdb_api import Configuration, searchMovie, searchMovieWithYear, \\\n</code></pre>\n\n<p>or</p>\n\n<pre><code>from .tmdb_api import Configuration, searchMovie, searchMovieWithYear, \\\n</code></pre>\n\n<p>However, you will probably get other errors once you change that line.</p>\n"}], "owner": {"reputation": 71, "user_id": 6010432, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0HCVpJMuD5E/AAAAAAAAAAI/AAAAAAAAPjo/sz1E6cSf5Vw/photo.jpg?sz=128", "display_name": "SoFolichon", "link": "https://stackoverflow.com/users/6010432/sofolichon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "accepted_answer_id": 35760436, "answer_count": 1, "score": 0, "last_activity_date": 1456962233, "creation_date": 1456961168, "last_edit_date": 1456962169, "question_id": 35760283, "link": "https://stackoverflow.com/questions/35760283/import-tmdb3-package-in-django-views", "title": "Import TMDB3 package in django views", "body": "<p>I'm trying to use IMDB3 to get some info on movies, but I can't import the package. The same happens with this other wrapper <a href=\"https://github.com/doganaydin/themoviedb/\" rel=\"nofollow\">https://github.com/doganaydin/themoviedb/</a>.</p>\n\n<p>When I try to import the tmdb3 package in views.py, I get an <code>ImportError: No module named 'tmdb_api'</code></p>\n\n<p>How could I import tmdb3 into my project?</p>\n\n<p>My django app is in <code>D:/Bureau/Django/DVDDB/DVDataBase</code>. Python is installed in <code>C:\\Program Files\\Python 3.5\\</code></p>\n\n<p>I'm using Python 3.5 and Django 1.9.3 (installed with pip) on Windows 10.</p>\n\n<p>Here's the error:</p>\n\n<pre><code>Unhandled exception in thread started by &lt;function check_errors.&lt;locals&gt;.wrapper at 0x000002C415E752F0&gt;\nTraceback (most recent call last):\n  File \"C:\\Program Files\\Python 3.5\\lib\\site-packages\\django\\utils\\autoreload.py\", line 226, in wrapper\n    fn(*args, **kwargs)\n  File \"C:\\Program Files\\Python 3.5\\lib\\site-packages\\django\\core\\management\\commands\\runserver.py\", line 116, in inner_run\n    self.check(display_num_errors=True)\n  File \"C:\\Program Files\\Python 3.5\\lib\\site-packages\\django\\core\\management\\base.py\", line 426, in check\n    include_deployment_checks=include_deployment_checks,\n  File \"C:\\Program Files\\Python 3.5\\lib\\site-packages\\django\\core\\checks\\registry.py\", line 75, in run_checks\n    new_errors = check(app_configs=app_configs)\n  File \"C:\\Program Files\\Python 3.5\\lib\\site-packages\\django\\core\\checks\\urls.py\", line 13, in check_url_config\n    return check_resolver(resolver)\n  File \"C:\\Program Files\\Python 3.5\\lib\\site-packages\\django\\core\\checks\\urls.py\", line 23, in check_resolver\n    for pattern in resolver.url_patterns:\n  File \"C:\\Program Files\\Python 3.5\\lib\\site-packages\\django\\utils\\functional.py\", line 33, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \"C:\\Program Files\\Python 3.5\\lib\\site-packages\\django\\core\\urlresolvers.py\", line 417, in url_patterns\n    patterns = getattr(self.urlconf_module, \"urlpatterns\", self.urlconf_module)\n  File \"C:\\Program Files\\Python 3.5\\lib\\site-packages\\django\\utils\\functional.py\", line 33, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \"C:\\Program Files\\Python 3.5\\lib\\site-packages\\django\\core\\urlresolvers.py\", line 410, in urlconf_module\n    return import_module(self.urlconf_name)\n  File \"C:\\Program Files\\Python 3.5\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 986, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 969, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 958, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 673, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 662, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 222, in _call_with_frames_removed\n  File \"D:\\Bureau\\Django\\DVDDB\\DVDDB\\urls.py\", line 21, in &lt;module&gt;\n    url(r'^', include('DVDataBase.urls')),\n  File \"C:\\Program Files\\Python 3.5\\lib\\site-packages\\django\\conf\\urls\\__init__.py\", line 52, in include\n    urlconf_module = import_module(urlconf_module)\n  File \"C:\\Program Files\\Python 3.5\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 986, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 969, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 958, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 673, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 662, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 222, in _call_with_frames_removed\n  File \"D:\\Bureau\\Django\\DVDDB\\DVDataBase\\urls.py\", line 3, in &lt;module&gt;\n    from . import views\n  File \"D:\\Bureau\\Django\\DVDDB\\DVDataBase\\views.py\", line 6, in &lt;module&gt;\n    import tmdb3\n  File \"C:\\Program Files\\Python 3.5\\lib\\site-packages\\tmdb3\\__init__.py\", line 3, in &lt;module&gt;\n    from tmdb_api import Configuration, searchMovie, searchMovieWithYear, \\\nImportError: No module named 'tmdb_api'\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1456961330, "post_id": 35760281, "comment_id": 59193736, "body": "Why do you need a variable number of attributes? Use a single attribute containing a list."}, {"owner": {"reputation": 51, "user_id": 5511402, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/6Xmzf.jpg?s=128&g=1", "display_name": "Andr&#233;s", "link": "https://stackoverflow.com/users/5511402/andr%c3%a9s"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1456961711, "post_id": 35760281, "comment_id": 59193881, "body": "How do I go about printing it then?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1456961767, "post_id": 35760281, "comment_id": 59193901, "body": "<a href=\"http://stackoverflow.com/questions/1535327/python-how-to-print-a-class-or-objects-of-class-using-print\" title=\"python how to print a class or objects of class using print\">stackoverflow.com/questions/1535327/&hellip;</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1456961843, "post_id": 35760281, "comment_id": 59193930, "body": "Define <code>__repr__</code> and <code>__str__</code> methods in your class that loop through the list and print the values."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5511402, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/6Xmzf.jpg?s=128&g=1", "display_name": "Andr&#233;s", "link": "https://stackoverflow.com/users/5511402/andr%c3%a9s"}, "edited": false, "score": 0, "creation_date": 1456962464, "post_id": 35760419, "comment_id": 59194167, "body": "I&#39;m sorry i do not know what <b>dict</b> or kwargs means"}, {"owner": {"reputation": 822, "user_id": 2053630, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/xRs18.jpg?s=128&g=1", "display_name": "YBathia", "link": "https://stackoverflow.com/users/2053630/ybathia"}, "reply_to_user": {"reputation": 51, "user_id": 5511402, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/6Xmzf.jpg?s=128&g=1", "display_name": "Andr&#233;s", "link": "https://stackoverflow.com/users/5511402/andr%c3%a9s"}, "edited": false, "score": 0, "creation_date": 1456962587, "post_id": 35760419, "comment_id": 59194229, "body": "@Andr&#233;sRivero: kwargs means keyword arguments , in the form of name=&quot;Sam&quot;,age=22 . These kwargs can be accessed inside a function just like a dictionary, the dictionary in this case being kwargs.  A simple explanation of python dictionary is given here: <a href=\"http://www.tutorialspoint.com/python/python_dictionary.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/python/python_dictionary.htm</a>"}, {"owner": {"reputation": 51, "user_id": 5511402, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/6Xmzf.jpg?s=128&g=1", "display_name": "Andr&#233;s", "link": "https://stackoverflow.com/users/5511402/andr%c3%a9s"}, "edited": false, "score": 0, "creation_date": 1456967605, "post_id": 35760419, "comment_id": 59195770, "body": "Ok. But what if I want to pass a list as an argument. And assign each member of the list to an attribute inside the class, whose name is going to be a letter, ascending in every attribute, as in: <code>self.a = 3</code>, <code>self.b = 4</code> etc."}, {"owner": {"reputation": 822, "user_id": 2053630, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/xRs18.jpg?s=128&g=1", "display_name": "YBathia", "link": "https://stackoverflow.com/users/2053630/ybathia"}, "reply_to_user": {"reputation": 51, "user_id": 5511402, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/6Xmzf.jpg?s=128&g=1", "display_name": "Andr&#233;s", "link": "https://stackoverflow.com/users/5511402/andr%c3%a9s"}, "edited": false, "score": 0, "creation_date": 1456979078, "post_id": 35760419, "comment_id": 59199132, "body": "@Andr&#233;sRivero: Added more content to my solution, this should answer your question"}], "tags": [], "owner": {"reputation": 822, "user_id": 2053630, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/xRs18.jpg?s=128&g=1", "display_name": "YBathia", "link": "https://stackoverflow.com/users/2053630/ybathia"}, "is_accepted": false, "score": 2, "last_activity_date": 1456979038, "last_edit_date": 1456979038, "creation_date": 1456961871, "answer_id": 35760419, "question_id": 35760281, "link": "https://stackoverflow.com/questions/35760281/python-help-defining-a-class-with-a-variable-number-of-attributes-depending-on/35760419#35760419", "title": "Python - Help defining a class with a variable number of attributes depending on the argument", "body": "<p>You can create a class with variable number of attributes:</p>\n\n<pre><code>class Var:\n    def __init__(self,**kwargs):\n        for attr in kwargs.keys():\n            self.__dict__[attr] = kwargs[attr]\n\n\n\n\nv = Var(name=\"Sam\",age=22)\nprint(v.__dict__)\nprint(v.name)\nprint(v.age)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'age': 22, 'name': 'Sam'}\nSam\n22\n</code></pre>\n\n<p>But if you want to pass a list as an argument and assign each member of the list to an attribute inside the class, whose name is going to be a letter, ascending in every attribute, you can do something like:</p>\n\n<pre><code>class Var:\n    def __init__(self,*args):\n        keyVal = 97\n        for attr in args:\n            self.__dict__[chr(keyVal)] = attr\n            keyVal+=1\n\n\n\n\nv1 = Var(1,2,3)\nprint('Attributes of v1',v1.__dict__)\nmyList = [4,5]\nv2 = Var(*myList)\nprint(\"attributes of v2\",v2.__dict__)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>('Attributes of v1', {'a': 1, 'c': 3, 'b': 2})\n('attributes of v2', {'a': 4, 'b': 5})\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5511402, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/6Xmzf.jpg?s=128&g=1", "display_name": "Andr&#233;s", "link": "https://stackoverflow.com/users/5511402/andr%c3%a9s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2080, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456979038, "creation_date": 1456961163, "question_id": 35760281, "link": "https://stackoverflow.com/questions/35760281/python-help-defining-a-class-with-a-variable-number-of-attributes-depending-on", "title": "Python - Help defining a class with a variable number of attributes depending on the argument", "body": "<p>Define a Python class Polynomial which provides methods for performing\nalgebraic operations on polynomials. Your class should behave as described\nin the following sample transcript:</p>\n\n<pre><code>&gt;&gt;&gt; p1 = Polynomial([1, 2, 3])\n&gt;&gt;&gt; p1\n1.000 z**2 + 2.000 z + 3.000\n&gt;&gt;&gt; p2 = Polynomial([100, 200])\n&gt;&gt;&gt; p1.add(p2)\n1.000 z**2 + 102.000 z + 203.000\n&gt;&gt;&gt; p1 + p2\n1.000 z**2 + 102.000 z + 203.000\n&gt;&gt;&gt; p1(1)\n6.0\n&gt;&gt;&gt; p1(-1)\n2.0\n&gt;&gt;&gt; (p1 + p2)(10)\n1323.0\n&gt;&gt;&gt; p1.mul(p1)\n1.000 z**4 + 4.000 z**3 + 10.000 z**2 + 12.000 z + 9.000\n&gt;&gt;&gt; p1 * p1\n1.000 z**4 + 4.000 z**3 + 10.000 z**2 + 12.000 z + 9.000\n&gt;&gt;&gt; p1 * p2 + p1\n100.000 z**3 + 401.000 z**2 + 702.000 z + 603.000\n&gt;&gt;&gt; p1.roots()\n[(-1+1.4142135623730947j), (-1-1.4142135623730947j)]\n&gt;&gt;&gt; p2.roots()\n[-2.0]\n&gt;&gt;&gt; p3 = Polynomial([3, 2, -1])\n&gt;&gt;&gt; p3.roots()\n[-1.0, 0.33333333333333331]\n&gt;&gt;&gt; (p1 * p1).roots()\nOrder too high to solve for roots.\n</code></pre>\n\n<p>How would you go about designing this function so it can take polynomials of different grades. I'm really lost.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "scikit-learn"], "answers": [{"comments": [{"owner": {"reputation": 2767, "user_id": 4438271, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh3.googleusercontent.com/-YEpVWeF85FA/AAAAAAAAAAI/AAAAAAAADAY/IsiUAf7h4F8/photo.jpg?sz=128", "display_name": "breezymri", "link": "https://stackoverflow.com/users/4438271/breezymri"}, "edited": false, "score": 1, "creation_date": 1456961620, "post_id": 35760313, "comment_id": 59193854, "body": "What is the purpose of the parameter <code>warm_start</code> then? I thought that&#39;s what it was for."}, {"owner": {"reputation": 2549, "user_id": 5765298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d109e4a14d083bccf645ffd660672e61?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett R", "link": "https://stackoverflow.com/users/5765298/garrett-r"}, "edited": false, "score": 0, "creation_date": 1456962132, "post_id": 35760313, "comment_id": 59194041, "body": "Just saw your <code>set_params</code> call.  I think the purpose is updating an existing classifier if you get more training data."}, {"owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "edited": false, "score": 1, "creation_date": 1456962276, "post_id": 35760313, "comment_id": 59194098, "body": "Yes, warm_start is for more training data / updating old solution, but not changing its structure"}, {"owner": {"reputation": 2767, "user_id": 4438271, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh3.googleusercontent.com/-YEpVWeF85FA/AAAAAAAAAAI/AAAAAAAADAY/IsiUAf7h4F8/photo.jpg?sz=128", "display_name": "breezymri", "link": "https://stackoverflow.com/users/4438271/breezymri"}, "reply_to_user": {"reputation": 2549, "user_id": 5765298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d109e4a14d083bccf645ffd660672e61?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett R", "link": "https://stackoverflow.com/users/5765298/garrett-r"}, "edited": false, "score": 0, "creation_date": 1456962664, "post_id": 35760313, "comment_id": 59194259, "body": "@GarrettR <code>set_param</code> is the only way I could find to update that parameter. I tried <code>clf.fit(X, y, n_estimators=2000, warm_start=True)</code> and of course it gave me an error because <code>n_estimators</code> and <code>warm_start</code> are not legal parameters for <code>fit</code>."}, {"owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "edited": false, "score": 0, "creation_date": 1456962803, "post_id": 35760313, "comment_id": 59194318, "body": "Scikit learn has many limitations. These parameters are for constructor only"}], "tags": [], "owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "is_accepted": true, "score": 0, "last_activity_date": 1456961297, "creation_date": 1456961297, "answer_id": 35760313, "question_id": 35760256, "link": "https://stackoverflow.com/questions/35760256/python-sklearn-gradientboostingclassifier-warm-start-error/35760313#35760313", "title": "python sklearn GradientBoostingClassifier warm start error", "body": "<p>You usually cannot modify sklearn classifier between fit calls and expect it to work. Number of estimators actually affect the size of internal objects of the model - thus it is not just a number of iterations (from programming point of view).</p>\n"}, {"tags": [], "owner": {"reputation": 581, "user_id": 550705, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6e6e11eef817b0cb2408020d0c896b8?s=128&d=identicon&r=PG", "display_name": "Brian Bien", "link": "https://stackoverflow.com/users/550705/brian-bien"}, "is_accepted": false, "score": 2, "last_activity_date": 1476680453, "creation_date": 1476680453, "answer_id": 40078762, "question_id": 35760256, "link": "https://stackoverflow.com/questions/35760256/python-sklearn-gradientboostingclassifier-warm-start-error/40078762#40078762", "title": "python sklearn GradientBoostingClassifier warm start error", "body": "<p><code>warm_start</code> is being used properly. There's actually a bug that's preventing this from working.</p>\n\n<p>The workaround in the meantime is to copy the array to a C-contiguous array:</p>\n\n<pre><code>X_train = np.copy(X_train, order='C')\nX_test = np.copy(X_test, order='C')\n</code></pre>\n\n<p>Reference: <a href=\"https://github.com/scikit-learn/scikit-learn/issues/6647\" rel=\"nofollow\">discussion</a> and <a href=\"https://github.com/scikit-learn/scikit-learn/pull/6756\" rel=\"nofollow\">bug</a></p>\n"}, {"comments": [{"owner": {"reputation": 581, "user_id": 550705, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6e6e11eef817b0cb2408020d0c896b8?s=128&d=identicon&r=PG", "display_name": "Brian Bien", "link": "https://stackoverflow.com/users/550705/brian-bien"}, "edited": false, "score": 0, "creation_date": 1485972768, "post_id": 40113112, "comment_id": 71151164, "body": "There&#39;s a bug that can cause this error <i>even when warm_start=True</i> is passed to the constructor. See my answer for the links."}], "tags": [], "owner": {"reputation": 179, "user_id": 6066878, "user_type": "registered", "profile_image": "https://graph.facebook.com/536480626523425/picture?type=large", "display_name": "Danila Savenkov", "link": "https://stackoverflow.com/users/6066878/danila-savenkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1476806865, "creation_date": 1476806865, "answer_id": 40113112, "question_id": 35760256, "link": "https://stackoverflow.com/questions/35760256/python-sklearn-gradientboostingclassifier-warm-start-error/40113112#40113112", "title": "python sklearn GradientBoostingClassifier warm start error", "body": "<p>It seems to me, that the problem is that you did not pass warm_start=True to the constructor. If you do:</p>\n\n<pre><code>clf = GradientBoostingClassifier(n_estimators=1000, learning_rate=0.05, subsample=0.1, max_depth=3, warm_start=True)\n</code></pre>\n\n<p>you'll be able to fit additional estimators using:</p>\n\n<pre><code>clf.set_params(n_estimators=2000)\nclf.fit(X, y, sample_weight=train_weight)\n</code></pre>\n\n<p>If it is not working may be you should try to update your sklearn version.</p>\n"}], "owner": {"reputation": 2767, "user_id": 4438271, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh3.googleusercontent.com/-YEpVWeF85FA/AAAAAAAAAAI/AAAAAAAADAY/IsiUAf7h4F8/photo.jpg?sz=128", "display_name": "breezymri", "link": "https://stackoverflow.com/users/4438271/breezymri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1946, "favorite_count": 0, "accepted_answer_id": 35760313, "answer_count": 3, "score": 3, "last_activity_date": 1476806865, "creation_date": 1456961045, "question_id": 35760256, "link": "https://stackoverflow.com/questions/35760256/python-sklearn-gradientboostingclassifier-warm-start-error", "title": "python sklearn GradientBoostingClassifier warm start error", "body": "<p>I've used the model to train a classifier on a set of data with 1000 iterations:</p>\n\n<pre><code>clf = GradientBoostingClassifier(n_estimators=1000, learning_rate=0.05, subsample=0.1, max_depth=3)\nclf.fit(X, y, sample_weight=train_weight)\n</code></pre>\n\n<p>Now I want to increase the number of iterations to 2000. So I do:</p>\n\n<pre><code>clf.set_params(n_estimators=2000, warm_start=True)\nclf.fit(X, y, sample_weight=train_weight)\n</code></pre>\n\n<p>But I get the following error:</p>\n\n<pre><code>---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-13-49cfdfd6c024&gt; in &lt;module&gt;()\n\n      1 start = time.clock()\n      2 clf.set_params(n_estimators=2000, warm_start=True)\n----&gt; 3 clf.fit(X, y, sample_weight=train_weight)\n      4 ...\n\nC:\\Anaconda3\\lib\\site-packages\\sklearn\\ensemble\\gradient_boosting.py in fit(self, X, y, sample_weight, monitor)\n   1002                                     self.estimators_.shape[0]))\n   1003             begin_at_stage = self.estimators_.shape[0]\n-&gt; 1004             y_pred = self._decision_function(X)\n   1005             self._resize_state()\n   1006 \n\nC:\\Anaconda3\\lib\\site-packages\\sklearn\\ensemble\\gradient_boosting.py in _decision_function(self, X)\n   1120         # not doing input validation.\n   1121         score = self._init_decision_function(X)\n-&gt; 1122         predict_stages(self.estimators_, X, self.learning_rate, score)\n   1123         return score\n   1124 \n\nsklearn/ensemble/_gradient_boosting.pyx in sklearn.ensemble._gradient_boosting.predict_stages (sklearn\\ensemble\\_gradient_boosting.c:2564)()\n\nValueError: ndarray is not C-contiguous\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 18953, "user_id": 4640209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bc12112054e578fc0bcd333cbb2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4640209/alex"}, "is_accepted": false, "score": 4, "last_activity_date": 1456961556, "last_edit_date": 1456961556, "creation_date": 1456961214, "answer_id": 35760291, "question_id": 35760223, "link": "https://stackoverflow.com/questions/35760223/make-multiindex-columns-in-a-pandas-dataframe/35760291#35760291", "title": "Make multiindex columns in a pandas dataframe", "body": "<p>You can use the <code>itertools</code> module to generate your <code>columns</code> variable by taking the cartesian join of gender and the age range in your data, for example:</p>\n\n<pre><code>import itertools\nmax_age = 100\nsex = ['Male','Female']\nage = range(max_age)\ncolumns=list(itertools.product(sex, age))\ndf.columns = pd.MultiIndex.from_tuples(columns)\ndf.columns.names = ['Sex', 'Age']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4592, "user_id": 1571826, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2fd1e91f14448fca131100f9c8f32f5a?s=128&d=identicon&r=PG", "display_name": "Def_Os", "link": "https://stackoverflow.com/users/1571826/def-os"}, "is_accepted": true, "score": 10, "last_activity_date": 1456968805, "creation_date": 1456968805, "answer_id": 35761500, "question_id": 35760223, "link": "https://stackoverflow.com/questions/35760223/make-multiindex-columns-in-a-pandas-dataframe/35761500#35761500", "title": "Make multiindex columns in a pandas dataframe", "body": "<p>Jaco's answer works nicely, but you can even create a <code>MultiIndex</code> from a product <em>directly</em> using <code>.from_product()</code>:</p>\n\n<pre><code>sex = ['Male', 'Female']\nage = range(100)\ndf.columns = pd.MultiIndex.from_product([sex, age], names=['Sex', 'Age'])\n</code></pre>\n"}], "owner": {"reputation": 32079, "user_id": 390388, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/NqksL.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/390388/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13713, "favorite_count": 2, "accepted_answer_id": 35761500, "answer_count": 2, "score": 8, "last_activity_date": 1456968805, "creation_date": 1456960904, "question_id": 35760223, "link": "https://stackoverflow.com/questions/35760223/make-multiindex-columns-in-a-pandas-dataframe", "title": "Make multiindex columns in a pandas dataframe", "body": "<p>I have a pandas dataframe with the following strcuture:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\ndf = pd.DataFrame(np.arange(32).reshape((4,8)), \n            index = pd.date_range('2016-01-01', periods=4),\n            columns=['male ; 0', 'male ; 1','male ; 2','male ; 4','female ; 0','female ; 1','female ; 2','female ; 3',])\n</code></pre>\n\n<p>The column names are messy with a combination of two variable in the header name, and residual punctuation from the original spreadsheet.</p>\n\n<p>What I want to do is set a column MultiIndex called sex and age in my dataframe.</p>\n\n<p>I tried using <code>pd.MultiIndex.from_tuples</code> like this:</p>\n\n<pre><code>columns = [('Male', 0),('Male', 1),('Male', 2),('Male', 3),('Female', 0),('Female', 1),('Female', 2),('Female', 3)]\ndf.columns = pd.MultiIndex.from_tuples(columns)\n</code></pre>\n\n<p>And then naming the column indexes:</p>\n\n<pre><code>df.columns.names = ['Sex', 'Age']\n</code></pre>\n\n<p>This gives the result that I would like. However, my dataframes has ages to over 100 for each sex so this is not very practical.</p>\n\n<p>Could someone please guide me on how to set MultiIndex columns from a tuple programatically.</p>\n"}, {"tags": ["python", "r"], "comments": [{"owner": {"reputation": 35, "user_id": 5948765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3c60d59577e6d8dc478063e9441be27?s=128&d=identicon&r=PG&f=1", "display_name": "user460213", "link": "https://stackoverflow.com/users/5948765/user460213"}, "reply_to_user": {"reputation": 21707, "user_id": 1832539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2972ae1ab4d157c88bc94654b96d47be?s=128&d=identicon&r=PG", "display_name": "idjaw", "link": "https://stackoverflow.com/users/1832539/idjaw"}, "edited": false, "score": 0, "creation_date": 1456962403, "post_id": 35760210, "comment_id": 59194148, "body": "I try it, but still no result with no error message."}, {"owner": {"reputation": 239591, "user_id": 1855677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ufQP.png?s=128&g=1", "display_name": "IRTFM", "link": "https://stackoverflow.com/users/1855677/irtfm"}, "edited": false, "score": 2, "creation_date": 1456966223, "post_id": 35760210, "comment_id": 59195351, "body": "What happens with a simple test program: <code>print.hw &lt;- function() {     print(&quot;hello world&quot;) };  print.hw()</code>"}, {"owner": {"reputation": 173, "user_id": 3304574, "user_type": "registered", "profile_image": "https://graph.facebook.com/1033562498/picture?type=large", "display_name": "IcarianComplex", "link": "https://stackoverflow.com/users/3304574/icariancomplex"}, "edited": false, "score": 0, "creation_date": 1456966400, "post_id": 35760210, "comment_id": 59195411, "body": "Is there a syntax error with the path to the Rscript interpreter? My intuition is that you need to escape any space characters in the path.  C:/Program\\ Files/R/R-3.2.2/bin/Rscript"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1456971775, "post_id": 35760210, "comment_id": 59196930, "body": "Does exact command run in Command Prompt or PowerShell: <code>C:&#47;Program Files&#47;R&#47;R-3.2.2&#47;bin&#47;Rscript --vanilla T:&#47;2012.R</code>?"}, {"owner": {"reputation": 35, "user_id": 5948765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3c60d59577e6d8dc478063e9441be27?s=128&d=identicon&r=PG&f=1", "display_name": "user460213", "link": "https://stackoverflow.com/users/5948765/user460213"}, "reply_to_user": {"reputation": 239591, "user_id": 1855677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ufQP.png?s=128&g=1", "display_name": "IRTFM", "link": "https://stackoverflow.com/users/1855677/irtfm"}, "edited": false, "score": 0, "creation_date": 1457023049, "post_id": 35760210, "comment_id": 59227416, "body": "@42 the test program works fine."}, {"owner": {"reputation": 239591, "user_id": 1855677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ufQP.png?s=128&g=1", "display_name": "IRTFM", "link": "https://stackoverflow.com/users/1855677/irtfm"}, "edited": false, "score": 0, "creation_date": 1457024665, "post_id": 35760210, "comment_id": 59228621, "body": "Then you need to produce the code of 2012.R."}, {"owner": {"reputation": 35, "user_id": 5948765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3c60d59577e6d8dc478063e9441be27?s=128&d=identicon&r=PG&f=1", "display_name": "user460213", "link": "https://stackoverflow.com/users/5948765/user460213"}, "reply_to_user": {"reputation": 239591, "user_id": 1855677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ufQP.png?s=128&g=1", "display_name": "IRTFM", "link": "https://stackoverflow.com/users/1855677/irtfm"}, "edited": false, "score": 0, "creation_date": 1457025644, "post_id": 35760210, "comment_id": 59229256, "body": "@42 @ Parfait First problem was with &quot;RODBC&quot; library in R which I solved it. Now, when I copy and past my code in &quot;command Prompt&quot; it works, but it does not work in python shell. Do you have any idea?"}, {"owner": {"reputation": 239591, "user_id": 1855677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ufQP.png?s=128&g=1", "display_name": "IRTFM", "link": "https://stackoverflow.com/users/1855677/irtfm"}, "edited": false, "score": 1, "creation_date": 1457025733, "post_id": 35760210, "comment_id": 59229314, "body": "Code.. code..code. Stop wasting our time vague error descriptions."}], "answers": [{"tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": true, "score": 4, "last_activity_date": 1457060579, "last_edit_date": 1457060579, "creation_date": 1457060162, "answer_id": 35787147, "question_id": 35760210, "link": "https://stackoverflow.com/questions/35760210/executing-r-script-with-python-via-subprocess-call/35787147#35787147", "title": "Executing R script with Python via subprocess.call", "body": "<p>Simply place your string command in brackets and break string into separate components as the first parameter of function expects a list of arguments, per the <a href=\"https://docs.python.org/2/library/subprocess.html\" rel=\"nofollow\">doc</a>: </p>\n\n<blockquote>\n  <p>subprocess.call(args, *, stdin=None, stdout=None, stderr=None,\n  shell=False)</p>\n</blockquote>\n\n<pre><code>import subprocess\n\nretcode = subprocess.call(['C:/Program Files/R/R-3.2.2/bin/Rscript', '--vanilla', \n                           'T:/2012.R'], shell=True)\n</code></pre>\n\n<p>Alternatively, break it up into multiple strings:</p>\n\n<pre><code>command = 'C:/Program Files/R/R-3.2.2/bin/Rscript'\narg = '--vanilla'\npath2script = 'T:/2012.R'\n\nretcode = subprocess.call([command, arg, path2script], shell=True)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 5948765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3c60d59577e6d8dc478063e9441be27?s=128&d=identicon&r=PG&f=1", "display_name": "user460213", "link": "https://stackoverflow.com/users/5948765/user460213"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4886, "favorite_count": 1, "accepted_answer_id": 35787147, "answer_count": 1, "score": 1, "last_activity_date": 1457060579, "creation_date": 1456960868, "question_id": 35760210, "link": "https://stackoverflow.com/questions/35760210/executing-r-script-with-python-via-subprocess-call", "title": "Executing R script with Python via subprocess.call", "body": "<p>I have a R script which works fine on its own but I need it to be a part of python script. So, when I run the python script the R script be executed automatically.\nI use the below command; there is no error but the R script output files are not created. </p>\n\n<pre><code>import subprocess\n\nretcode = subprocess.call(\"C:/Program Files/R/R-3.2.2/bin/Rscript --vanilla T:/2012.R\", shell=True)\n</code></pre>\n\n<p>Thank you so much in advance. </p>\n"}, {"tags": ["python", "multidimensional-array", "data-fitting", "astronomy"], "comments": [{"owner": {"reputation": 5510, "user_id": 1078391, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/kSwTY.jpg?s=128&g=1", "display_name": "DanHickstein", "link": "https://stackoverflow.com/users/1078391/danhickstein"}, "edited": false, "score": 0, "creation_date": 1457047533, "post_id": 35760171, "comment_id": 59241520, "body": "Is this helpful? <a href=\"http://stackoverflow.com/questions/7997152/python-3d-polynomial-surface-fit-order-dependent\" title=\"python 3d polynomial surface fit order dependent\">stackoverflow.com/questions/7997152/&hellip;</a>"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1457443980, "post_id": 35760171, "comment_id": 59401329, "body": "where are the control points? also add an sample to test on ..."}], "owner": {"reputation": 281, "user_id": 4995219, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/5lDmz.jpg?s=128&g=1", "display_name": "Aero", "link": "https://stackoverflow.com/users/4995219/aero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 528, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1457047425, "creation_date": 1456960687, "last_edit_date": 1457047425, "question_id": 35760171, "link": "https://stackoverflow.com/questions/35760171/python-2d-polynomial-fit-equivalent-to-irafs-surfit", "title": "Python 2D Polynomial Fit Equivalent to IRAF&#39;s &#39;surfit&#39;", "body": "<p>I'm working with some data trying to create a 2D polynomial fit just like IRAF's <code>surfit</code>(see <a href=\"http://iraf.noao.edu/irafnews/dec94/dec94-S-18.html\" rel=\"nofollow noreferrer\">here</a>). I have 16 data points distributed in a grid pattern (i.e. pixel values at 16 different x- and y-coordinates) that need to be fitted to produce a 1024x1024 array. I've tried a bunch of different methods, starting with things like <code>astropy.modeling</code> or <code>scipy.interpolate</code>, but nothing gives quite the right result compared to IRAF's <code>surfit</code>. I imagine it's because I'm only using 16 data points, but that's all I have! The result should look something like this:\n<a href=\"https://i.stack.imgur.com/RjNnH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RjNnH.png\" alt=\"enter image description here\"></a></p>\n\n<p>But what I'm getting looks more like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/5gP6g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5gP6g.png\" alt=\"enter image description here\"></a>\nor this:\n<a href=\"https://i.stack.imgur.com/XuGSt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XuGSt.png\" alt=\"enter image description here\"></a></p>\n\n<p>If you have any suggestions for how best to accomplish this task, I would very much appreciate your input! Thank you.</p>\n"}, {"tags": ["python", "xml", "sax"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5978470, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rjNUkVWywvk/AAAAAAAAAAI/AAAAAAAAABI/LrZIGywUNTU/photo.jpg?sz=128", "display_name": "Jackeriss", "link": "https://stackoverflow.com/users/5978470/jackeriss"}, "is_accepted": false, "score": 0, "last_activity_date": 1460198980, "creation_date": 1460198980, "answer_id": 36515767, "question_id": 35760157, "link": "https://stackoverflow.com/questions/35760157/how-to-get-python-xmlgenerator-to-output-cdata/36515767#36515767", "title": "how to get Python XMLGenerator to output CDATA", "body": "<p>You can use xml.dom.minidom\nlike this:</p>\n\n<pre><code>doc = xml.dom.minidom.Document()\narticle = doc.createElement('article')\ncontent = doc.createCDATASection(\u2018&lt;p&gt;Any CDATA&lt;/p&gt;\u2019)\narticle.appendChild(content)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1021, "user_id": 537598, "user_type": "registered", "profile_image": "https://graph.facebook.com/788290897/picture?type=large", "display_name": "niklasae", "link": "https://stackoverflow.com/users/537598/niklasae"}, "is_accepted": false, "score": 9, "last_activity_date": 1466170142, "creation_date": 1466170142, "answer_id": 37882866, "question_id": 35760157, "link": "https://stackoverflow.com/questions/35760157/how-to-get-python-xmlgenerator-to-output-cdata/37882866#37882866", "title": "how to get Python XMLGenerator to output CDATA", "body": "<p>You could do it straight in your code using</p>\n\n<pre><code>from xml.sax.saxutils import XMLGenerator\n\n\nxml = XMLGenerator()\nxml.startDocument()\nxml.startElement('item', {})\ncontent = '&lt;p&gt;Stuff&lt;/p&gt;'\ncdata = '&lt;![CDATA[{}]]&gt;'.format(content)\nxml.ignorableWhitespace(cdata)\nxml.endElement('item')\nxml.endDocument()\n</code></pre>\n\n<p>Or extend the XMLGenerator class with a new function</p>\n\n<pre><code>from xml.sax.saxutils import XMLGenerator\n\n\nclass _XMLGenerator(XMLGenerator):\n    def cdata(self, content):\n        cdata = '&lt;![CDATA[{}]]&gt;'.format(content)\n        self.ignorableWhitespace(cdata)\n\nxml = _XMLGenerator()\nxml.startDocument()\nxml.startElement('item', {})\ncontent = '&lt;p&gt;Stuff&lt;/p&gt;'\nxml.cdata(content)\nxml.endElement('item')\nxml.endDocument()\n</code></pre>\n\n<p>The reason I don't use <code>xml.characters(content)</code> is because it calls the <code>xml.sax.saxutils.escape</code> function, which in turns escapes &amp;, &lt; and >.</p>\n"}], "owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 791, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1466170142, "creation_date": 1456960627, "last_edit_date": 1495542787, "question_id": 35760157, "link": "https://stackoverflow.com/questions/35760157/how-to-get-python-xmlgenerator-to-output-cdata", "title": "how to get Python XMLGenerator to output CDATA", "body": "<p>This is the Python equivalent of the Java question <a href=\"https://stackoverflow.com/questions/156777/how-to-output-a-cdata-section-from-a-sax-xmlhandler\">How to output a CDATA section from a Sax XmlHandler</a></p>\n\n<p>Neither <a href=\"https://docs.python.org/2/library/xml.sax.utils.html#xml.sax.saxutils.XMLGenerator\" rel=\"nofollow noreferrer\">xml.sax.saxutils.XMLGenerator</a> or <a href=\"http://lxml.de/api/lxml.sax.ElementTreeContentHandler-class.html\" rel=\"nofollow noreferrer\">lxml.sax.ElementTreeContentHandler</a> says anything about CDATA sections. How can I get it to output CDATA?</p>\n"}, {"tags": ["javascript", "python", "django"], "comments": [{"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 3, "creation_date": 1456960591, "post_id": 35760145, "comment_id": 59193461, "body": "Render it via a JSON serializer."}, {"owner": {"reputation": 2225, "user_id": 4269730, "user_type": "registered", "profile_image": "https://graph.facebook.com/872795392/picture?type=large", "display_name": "Espen", "link": "https://stackoverflow.com/users/4269730/espen"}, "edited": false, "score": 0, "creation_date": 1456961587, "post_id": 35760145, "comment_id": 59193839, "body": "I believe this answer may give you what you need. <a href=\"http://stackoverflow.com/questions/26033239/list-of-objects-to-json-with-python\">enter link description here</a>"}], "answers": [{"tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": false, "score": 3, "last_activity_date": 1456973838, "creation_date": 1456973838, "answer_id": 35762337, "question_id": 35760145, "link": "https://stackoverflow.com/questions/35760145/passing-an-array-of-dictionary-to-javascript/35762337#35762337", "title": "Passing an array of dictionary to Javascript", "body": "<p>You can use the <a href=\"https://docs.djangoproject.com/es/1.9/ref/templates/builtins/#std:templatefilter-safe\" rel=\"nofollow\"><code>safe</code> filter</a> to prevent translation of quote characters:</p>\n\n<pre><code>var test = {{ pythonArrayObj|safe }};\n</code></pre>\n\n<p>will result in</p>\n\n<pre><code>var test = [{'a': 1, 'c': 3, 'b': 2}, {'a': 4, 'c': 6, 'b': 5}, {'a': 7, 'c': 9, 'b': 8}]\n</code></pre>\n\n<p>in your HTML source.</p>\n"}], "owner": {"reputation": 79, "user_id": 5821568, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/ec5b50ad1aad0835b8bfd8e0d2d23730?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5821568/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1246, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456973838, "creation_date": 1456960557, "last_edit_date": 1456961021, "question_id": 35760145, "link": "https://stackoverflow.com/questions/35760145/passing-an-array-of-dictionary-to-javascript", "title": "Passing an array of dictionary to Javascript", "body": "<p>I have an array of dictionary in python, and I want to pass it to my front end to use.</p>\n\n<p>This is what my <code>pythonArrayObj</code> looks like:</p>\n\n<pre><code>pythonArrayObj =[{\"a\":1,\"b\":2,\"c\":3}, {\"a\":4,\"b\":5,\"c\":6}, {\"a\":7,\"b\":8,\"c\":9}]\n</code></pre>\n\n<p>However, the problem is that when I do:</p>\n\n<pre><code>var test = {{ pythonArrayObj }};\n</code></pre>\n\n<p>It keeps giving an error due to the <code>\"</code> quotation being converted into <code>&amp;quot;</code> if I try and do <code>json.dumps(pythonArrayObj)</code> before passing it to my front-end, or <code>&amp;#39;</code> if I don't. </p>\n\n<p>Does anyone know how I can fix this? I've been stuck on it for the last few days and would really appreciate the help.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-2.7", "input"], "comments": [{"owner": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "edited": false, "score": 2, "creation_date": 1456960685, "post_id": 35760133, "comment_id": 59193494, "body": "Do this: <code>a, b, c = [raw_input() for _ in range(3)]</code>"}, {"owner": {"reputation": 2620, "user_id": 5335649, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9650fd24c7432056ab9e7c892bc38523?s=128&d=identicon&r=PG&f=1", "display_name": "Rockybilly", "link": "https://stackoverflow.com/users/5335649/rockybilly"}, "reply_to_user": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "edited": false, "score": 0, "creation_date": 1456960883, "post_id": 35760133, "comment_id": 59193558, "body": "Clever, to create the list before evaluation. I wonder if there exists a even shorter answer."}, {"owner": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "edited": false, "score": 2, "creation_date": 1456961067, "post_id": 35760133, "comment_id": 59193639, "body": "Actually yes there is shorter: <code>a, b, c = map(raw_input, range(3))</code> (for Python 2 only). But this prints some garbage now."}, {"owner": {"reputation": 2620, "user_id": 5335649, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9650fd24c7432056ab9e7c892bc38523?s=128&d=identicon&r=PG&f=1", "display_name": "Rockybilly", "link": "https://stackoverflow.com/users/5335649/rockybilly"}, "reply_to_user": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "edited": false, "score": 0, "creation_date": 1456961196, "post_id": 35760133, "comment_id": 59193687, "body": "You need to add paranthesis after that raw_input."}, {"owner": {"reputation": 2549, "user_id": 5765298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d109e4a14d083bccf645ffd660672e61?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett R", "link": "https://stackoverflow.com/users/5765298/garrett-r"}, "edited": false, "score": 0, "creation_date": 1456961262, "post_id": 35760133, "comment_id": 59193711, "body": "@Rockybilly nope, map actually takes a function as  an argument and applies it to the inputs [0,1,2] .  as such raw_input does not need parentheses."}, {"owner": {"reputation": 2620, "user_id": 5335649, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9650fd24c7432056ab9e7c892bc38523?s=128&d=identicon&r=PG&f=1", "display_name": "Rockybilly", "link": "https://stackoverflow.com/users/5335649/rockybilly"}, "edited": false, "score": 0, "creation_date": 1456961275, "post_id": 35760133, "comment_id": 59193719, "body": "Yes, I just realized(remembered actually) :D Thanks."}, {"owner": {"reputation": 2549, "user_id": 5765298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d109e4a14d083bccf645ffd660672e61?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett R", "link": "https://stackoverflow.com/users/5765298/garrett-r"}, "edited": false, "score": 1, "creation_date": 1456961320, "post_id": 35760133, "comment_id": 59193734, "body": "also, if you want to get rid of 0,1,2 print with each raw_input, you can use <code>a, b, c = map(raw_input, [&#39;&#39;]*3)</code>"}, {"owner": {"reputation": 2620, "user_id": 5335649, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9650fd24c7432056ab9e7c892bc38523?s=128&d=identicon&r=PG&f=1", "display_name": "Rockybilly", "link": "https://stackoverflow.com/users/5335649/rockybilly"}, "edited": false, "score": 0, "creation_date": 1456961590, "post_id": 35760133, "comment_id": 59193841, "body": "Or let&#39;s take the inputs with some eyecandy <code>a, b, c = map(raw_input, [&quot;-&gt; &quot;]*3)</code>  :D"}], "answers": [{"comments": [{"owner": {"reputation": 2620, "user_id": 5335649, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9650fd24c7432056ab9e7c892bc38523?s=128&d=identicon&r=PG&f=1", "display_name": "Rockybilly", "link": "https://stackoverflow.com/users/5335649/rockybilly"}, "edited": false, "score": 0, "creation_date": 1456960943, "post_id": 35760194, "comment_id": 59193588, "body": "Thank you for your answer. Well I already gave my opinion in question comments. Take my +1 sir."}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 2, "creation_date": 1456961075, "post_id": 35760194, "comment_id": 59193641, "body": "This particular trick is also quite useful when generating random numbers: <code>[random.randrange(100) for _ in range(3)]</code>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1456961198, "post_id": 35760194, "comment_id": 59193689, "body": "@Rockabilly: I was in another window editing my answer.  The best I could do was to up-vote your comment.  Most of all, I&#39;m happy to see we both used the underscore; it&#39;s a good thing to pass along."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 2, "last_activity_date": 1456960812, "creation_date": 1456960812, "answer_id": 35760194, "question_id": 35760133, "link": "https://stackoverflow.com/questions/35760133/multiplication-of-the-input/35760194#35760194", "title": "Multiplication of the input", "body": "<pre><code>a, b, c = [raw_input(\"Feed me! \") for _ in range(3)]\nprint a, b, c\n</code></pre>\n\n<p>You can't use the *3 on a one_item list; this will give you three copies of one input.  Here's the correct output from the above code:</p>\n\n<pre><code>Feed me! 6\nFeed me! hello, Jack!\nFeed me! False\n6 hello, Jack! False\n</code></pre>\n"}], "owner": {"reputation": 2620, "user_id": 5335649, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9650fd24c7432056ab9e7c892bc38523?s=128&d=identicon&r=PG&f=1", "display_name": "Rockybilly", "link": "https://stackoverflow.com/users/5335649/rockybilly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456960812, "creation_date": 1456960506, "question_id": 35760133, "link": "https://stackoverflow.com/questions/35760133/multiplication-of-the-input", "title": "Multiplication of the input", "body": "<p>For simplification purposes. I sometimes use this kind of declarations in Python2 if the number of inputs is known.</p>\n\n<pre><code>a, b, c = raw_input(), raw_input(), raw_input()\n</code></pre>\n\n<p>The created tuples handle the rest of the work. One day, I thought of trying this below.</p>\n\n<pre><code>a, b, c = [raw_input] * 3\n</code></pre>\n\n<p>It is not working as one would expect, or to put it better, it is not working like the one above. Well the reason is somewhat obvious. But is there another way exists to achieve this behavior ?</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "is_accepted": false, "score": 0, "last_activity_date": 1456962015, "creation_date": 1456962015, "answer_id": 35760442, "question_id": 35760083, "link": "https://stackoverflow.com/questions/35760083/convert-string-into-seconds-using-ctime/35760442#35760442", "title": "convert string into seconds using ctime", "body": "<p>Without using Ctime:</p>\n\n<p>There's always the unnecessary hard way that's pretty trivial to read/understand.</p>\n\n<pre><code>def safecast(newtype, value, default=None):\n    try:\n        return newtype(value)\n    except ValueError:\n        return default\n\ndef theHardWay(timestring):\n    count = timestring.count(':')\n    if type(timestring) is not str or count &gt; 2:\n        return 0\n    if count == 0:\n        return safecast(int, timestring)\n    timelist = timestring.split(\":\")\n    if len(timelist) == 2:\n        return safecast(int, timelist[0], 0) * 60 + safecast(int, timelist[1], 0)\n    if len(timelist) == 3:\n        return safecast(int, timelist[0], 0) * 3600 + safecast(int, timelist[1], 0) * 60 + safecast(int, timelist[2], 0)\n    return 0 # should never be touched\n\nassert(theHardWay(\"123:00\") == 7380)\nassert(theHardWay(\"123:ThisShouldNotFail\") == 7380)\nassert(theHardWay(\"000:00:1\") == 1)\nassert(theHardWay(\"0:00:000\") == 0)\n</code></pre>\n\n<p>And then there's a much, much easier way:</p>\n\n<pre><code>def theEasyWay(timestring):\n     return sum([safecast(int, n, 0) * 60**i for i, n in enumerate(timestring.split(\":\")[::-1])])\n\nassert(theEasyWay(\"123:00\") == 7380)\nassert(theEasyWay(\"123:ThisShouldNotFail\") == 7380)\nassert(theEasyWay(\"000:00:1\") == 1)\nassert(theEasyWay(\"0:00:000\") == 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1086, "user_id": 2305399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXLeG.jpg?s=128&g=1", "display_name": "SoreDakeNoKoto", "link": "https://stackoverflow.com/users/2305399/soredakenokoto"}, "is_accepted": true, "score": 1, "last_activity_date": 1456964105, "creation_date": 1456964105, "answer_id": 35760781, "question_id": 35760083, "link": "https://stackoverflow.com/questions/35760083/convert-string-into-seconds-using-ctime/35760781#35760781", "title": "convert string into seconds using ctime", "body": "<p>No need for <code>ctime()</code>:</p>\n\n<pre><code>def to_secs(time):\n    time = [int(i) for i in time.split(':')][::-1]\n    return sum(time[i]*(60**i) for i in range(len(time)))\n\ndef to_clock(secs):\n    time = ['']*3\n    for i in range(2, -1, -1):\n        time[i] = str(int(secs/(60**i))).zfill(2)\n        secs %= 60**i\n    return ':'.join(time[::-1])\n\nassert(to_secs('123:0') == 7380)\nassert(to_clock(1) == '00:00:01')\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 5911049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/37b9ff8d41cd5be5fcb88e15b440afed?s=128&d=identicon&r=PG&f=1", "display_name": "Co.Coo", "link": "https://stackoverflow.com/users/5911049/co-coo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 35760781, "answer_count": 2, "score": 0, "last_activity_date": 1456964105, "creation_date": 1456960299, "last_edit_date": 1456960372, "question_id": 35760083, "link": "https://stackoverflow.com/questions/35760083/convert-string-into-seconds-using-ctime", "title": "convert string into seconds using ctime", "body": "<p>I have to write a function that converts a string in the format H:MM:S into seconds using time.ctime( and convert it back to clock. How can I do this in python?</p>\n\n<p>For example:</p>\n\n<p>\"123:00\" would produce an output of 7380</p>\n\n<p>\"0:01\" would produce an output of 1</p>\n\n<p>\"0:00:00\" would produce an output of 0</p>\n\n<p>i have started with this code</p>\n\n<pre><code>def convert_to_seconds(time_as_a_string):\n    time = []\n    start = 0\n    seconds = time.ctime(seconds)\n    if seconds &gt;0:\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 4328698, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6456eea93918e00a4f967501695f9aca?s=128&d=identicon&r=PG&f=1", "display_name": "jasmok", "link": "https://stackoverflow.com/users/4328698/jasmok"}, "edited": false, "score": 0, "creation_date": 1457022738, "post_id": 35770264, "comment_id": 59227187, "body": "Thanks for your answer, but that was not what I was looking for. I added a picture to the question to make it more clear."}, {"owner": {"reputation": 132, "user_id": 4284924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5678462e79deaa813f4b0b7405fa949d?s=128&d=identicon&r=PG&f=1", "display_name": "MrCyclophil", "link": "https://stackoverflow.com/users/4284924/mrcyclophil"}, "reply_to_user": {"reputation": 63, "user_id": 4328698, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6456eea93918e00a4f967501695f9aca?s=128&d=identicon&r=PG&f=1", "display_name": "jasmok", "link": "https://stackoverflow.com/users/4328698/jasmok"}, "edited": false, "score": 0, "creation_date": 1457023875, "post_id": 35770264, "comment_id": 59228005, "body": "Of course this is not a full solution to your question. It only shows a way how to get a color from a colormap for each weight. You can then print for example each letter using <code>plt.text(x, y, &quot;H&quot;, backgroundcolor=color)</code>."}], "tags": [], "owner": {"reputation": 132, "user_id": 4284924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5678462e79deaa813f4b0b7405fa949d?s=128&d=identicon&r=PG&f=1", "display_name": "MrCyclophil", "link": "https://stackoverflow.com/users/4284924/mrcyclophil"}, "is_accepted": false, "score": 0, "last_activity_date": 1457002637, "creation_date": 1457002637, "answer_id": 35770264, "question_id": 35760076, "link": "https://stackoverflow.com/questions/35760076/coloring-a-string-according-to-character-weights/35770264#35770264", "title": "Coloring a String according to character weights", "body": "<p>Here is a code snipped that I found somewhere on SO that uses continuous colors of a chosen color map for plotting.</p>\n\n<pre><code>import matplotlib.pyplot as plt    \nimport numpy as np\nfig, ax = plt.subplots()\ncmap = plt.get_cmap('jet_r') #or other color map\nmultiplicators = np.linspace(1,10)\nx = np.linspace(1,10)\nfor idx, item in enumerate(multiplicators):\n    color = cmap(idx/len(multiplicators))\n    ax.plot(x, x*item, color=color)\n</code></pre>\n\n<p>In a similar way you could color-code your weights by saying</p>\n\n<pre><code>color = cmap(word_weight/max_weight)\n</code></pre>\n\n<p>Not sure if this is exactly what you are looking for</p>\n"}], "owner": {"reputation": 63, "user_id": 4328698, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6456eea93918e00a4f967501695f9aca?s=128&d=identicon&r=PG&f=1", "display_name": "jasmok", "link": "https://stackoverflow.com/users/4328698/jasmok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1457024666, "creation_date": 1456960266, "last_edit_date": 1592644375, "question_id": 35760076, "link": "https://stackoverflow.com/questions/35760076/coloring-a-string-according-to-character-weights", "title": "Coloring a String according to character weights", "body": "<p>I have a string in python like\n<code>text = &quot;hello world&quot;</code>\nand then I have a list containing a weight for each character of the string\n<code>weights = [25,23,51,60,11,32,34,95,4,3,55]</code>.\nNow I want to get a figure showing the string and it's background colored according to the characters weights (like a colormap that visualizes the character's weights).\nHow can I do that with Python (matplotlib)?</p>\n<p>I should look similar to this:\n<a href=\"https://i.stack.imgur.com/W9kdL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W9kdL.png\" alt=\"enter image description here\" /></a></p>\n<p>The characters could also be below the colorfields (as kind of label).</p>\n<h1>SOLUTION:</h1>\n<p>I got it working the following way now</p>\n<pre><code>fig, ax = plt.subplots()\n\nplt.set_cmap(plt.cm.autumn) \n\nweights = [[1, 6, 3, 10, 8, 3, 2, 5]]\nax.imshow(weights, interpolation='none')\nax.text(0, 0, &quot;h&quot;)\nax.text(1, 0, &quot;e&quot;)\nax.text(2, 0, &quot;l&quot;)\nax.text(3, 0, &quot;l&quot;)\nax.text(4, 0, &quot;o&quot;)\nax.text(5, 0, &quot; &quot;)\nax.text(5, 0, &quot;w&quot;)\n</code></pre>\n<p>result:\n<a href=\"https://i.stack.imgur.com/4MzYH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4MzYH.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1456961096, "post_id": 35759993, "comment_id": 59193649, "body": "In the future, take a simple debugging step: print out the offending values just ahead of the error point.  Run again; the last output will likely show your problem clearly."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3818744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cbb43891bd693072a8bd56babb2cd04?s=128&d=identicon&r=PG&f=1", "display_name": "user256107", "link": "https://stackoverflow.com/users/3818744/user256107"}, "edited": false, "score": 0, "creation_date": 1456960356, "post_id": 35760032, "comment_id": 59193362, "body": "Thank you that worked, although i had to change .iteritems to items it said the dict didn&#39;t have that attribute"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 25, "user_id": 3818744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cbb43891bd693072a8bd56babb2cd04?s=128&d=identicon&r=PG&f=1", "display_name": "user256107", "link": "https://stackoverflow.com/users/3818744/user256107"}, "edited": false, "score": 0, "creation_date": 1456960410, "post_id": 35760032, "comment_id": 59193381, "body": "Whoops!  I program in Python 2.7, and sometimes forget to switch when I&#39;m answering a question.  I&#39;m glad you figured it out.  I&#39;ll edit the answer."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 2, "last_activity_date": 1456960433, "last_edit_date": 1456960433, "creation_date": 1456960078, "answer_id": 35760032, "question_id": 35759993, "link": "https://stackoverflow.com/questions/35759993/python-function-of-a-dictionary/35760032#35760032", "title": "Python Function of a Dictionary", "body": "<p>The keys are words; your threshold is an integer.  You can't compare those types with <strong>></strong>.  I think you mean to compare the value:</p>\n\n<pre><code>for key, value in frequentwords.items():\n  if value &gt; threshold:\n    print(key)\n</code></pre>\n\n<p>This yields the desired output:</p>\n\n<pre><code>blue\norange\nhello\n</code></pre>\n\n<p>If you also want <strong>red</strong>, you need to change the comparison to <strong>>=</strong></p>\n"}, {"tags": [], "owner": {"reputation": 2549, "user_id": 5765298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d109e4a14d083bccf645ffd660672e61?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett R", "link": "https://stackoverflow.com/users/5765298/garrett-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1456960449, "creation_date": 1456960449, "answer_id": 35760118, "question_id": 35759993, "link": "https://stackoverflow.com/questions/35759993/python-function-of-a-dictionary/35760118#35760118", "title": "Python Function of a Dictionary", "body": "<p>Your functions is not quite right.  When you iterate (loop) over the dictionary, you are only accessing the key values.  You need to use the built-in <code>iteritems()</code> or <code>items()</code> functions to get both the key and the value.</p>\n\n<pre><code>   def above_thresh(someDict, thresh):\n        return [field for field, value in someDict.iteritems() if value &gt; thresh] \n\nIn [6]: above_thresh(frequentwords, 10)\nOut[6]: ['blue', 'orange', 'hello']\n</code></pre>\n\n<p>Alternatively, you can fix your approach like this:</p>\n\n<pre><code>def frequencylist(frequentwords, threshold):\n   toRet = [] \n   for keys in frequentwords: \n        if frequentWords[key] &gt; threshold:\n              toRet.append(key)\n   return toRet   \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18953, "user_id": 4640209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bc12112054e578fc0bcd333cbb2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4640209/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1456960464, "creation_date": 1456960464, "answer_id": 35760124, "question_id": 35759993, "link": "https://stackoverflow.com/questions/35759993/python-function-of-a-dictionary/35760124#35760124", "title": "Python Function of a Dictionary", "body": "<p>You can just do this:</p>\n\n<pre><code>print [k for k,v in word_freq.items() if v&gt;=10]\n</code></pre>\n\n<p>It would look like this in a method:</p>\n\n<pre><code>def frequencylist(frequentwords, threshold):\n    return [k for k,v in word_freq.items() if v&gt;=threshold]\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 3818744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cbb43891bd693072a8bd56babb2cd04?s=128&d=identicon&r=PG&f=1", "display_name": "user256107", "link": "https://stackoverflow.com/users/3818744/user256107"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 35760032, "answer_count": 3, "score": 1, "last_activity_date": 1456961043, "creation_date": 1456959931, "last_edit_date": 1456961043, "question_id": 35759993, "link": "https://stackoverflow.com/questions/35759993/python-function-of-a-dictionary", "title": "Python Function of a Dictionary", "body": "<p>I have a small homework problem, getting my Python function to return the correct values. </p>\n\n<p>Assignment:</p>\n\n<blockquote>\n  <p>Here is an example dictionary:</p>\n\n<pre><code>word_freq = {'the': 58, 'people': 6, 'beautiful': 8, 'cats': 13}\n</code></pre>\n  \n  <p>Write a function that takes as parameters: a word frequency dictionary\n  and a threshold number with is an integer. This function should return\n  a result that is a list of all the words whose frequency is greater\n  than the threshold.</p>\n  \n  <p>For example, suppose that you name your function top_words. If you\n  call the function with the dictionary above and the threshold of 10:</p>\n\n<pre><code>top_words(word_freq, 10) you should get the result [\u2018the\u2019, \u2018cats\u2019]\n</code></pre>\n</blockquote>\n\n<p>My code:</p>\n\n<pre><code>def frequencylist(frequentwords, threshold):\n    for keys in frequentwords:\n        if key &gt; threshold:\n            print(keys)\n</code></pre>\n\n<p>Test run:</p>\n\n<pre><code>frequentwords= {'hello':30, 'yellow':4, 'red':10, 'blue':35, 'orange':100}\nfrequencylist(frequentwords, 10)\n</code></pre>\n\n<p>... and I get this error:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nFile \"&lt;stdin&gt;\", line 3, in frequencylist\nTypeError: unorderable types: str() &gt; int()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 0, "creation_date": 1456960041, "post_id": 35759990, "comment_id": 59193239, "body": "Please use code blocks instead of quotation blocks. Also, provide a concrete example of what commands would be run for your set of concrete example files."}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "edited": false, "score": 0, "creation_date": 1456961221, "post_id": 35759990, "comment_id": 59193694, "body": "Is this a command line thing? You might try tagging your question with [shell] or [bash] or [batch] if it&#39;s windows. &quot;Running a command&quot; on files like that would be much easier at that level."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1456961731, "last_edit_date": 1495535308, "creation_date": 1456961731, "answer_id": 35760402, "question_id": 35759990, "link": "https://stackoverflow.com/questions/35759990/repeat-command-for-every-set-of-files/35760402#35760402", "title": "repeat command for every set of files", "body": "<p>Assuming your files are in <strong>file_list</strong> and already captive in earlier Python code, you could do something like this:</p>\n\n<p>for file_pos in range(0, len(file_list), 2):\n    command = \"illuminapairedend \" + \n              file_list[file_pos] +\n              file_list[file_pos + 1] +\n              \"> Sequence_X_pairedend.fastq\"\n    os.system(command)</p>\n\n<p>This last command is covered thoroughly <a href=\"https://stackoverflow.com/questions/89228/calling-an-external-command-in-python\">here</a></p>\n\n<hr>\n\n<p><strong>This is best only if you acquire the file list in Python.</strong>  If the file list comes from elsewhere, it's almost certainly better to write the script in your command shell: <strong>bash</strong>, for example.</p>\n"}], "owner": {"reputation": 1, "user_id": 5158484, "user_type": "registered", "profile_image": "https://graph.facebook.com/965522400154140/picture?type=large", "display_name": "Vanessa Mata", "link": "https://stackoverflow.com/users/5158484/vanessa-mata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456972696, "creation_date": 1456959924, "last_edit_date": 1456960555, "question_id": 35759990, "link": "https://stackoverflow.com/questions/35759990/repeat-command-for-every-set-of-files", "title": "repeat command for every set of files", "body": "<p>I'm working with DNA sequence data in a program called ObiTools. I would like to find a way to repeat a command for every set of files within the same folder.</p>\n\n<p>For example, if I have the files</p>\n\n<pre><code>Sequence_A1_R1.fastq,\nSequence_A1_R2.fastq,\nSequence_A2_R1.fastq,\nSequence_A2_R2.fastq,\netc.\n</code></pre>\n\n<p>I would like to run the following command for every value of X, such that X is always the same value (no combination of different values).</p>\n\n<blockquote>\n  <p>illuminapairedend Sequence_X_R1.fastq Sequence_X_R2.fastq > Sequence_X_pairedend.fastq</p>\n</blockquote>\n\n<p>Is there a python script that could easily do this?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "web-scraping", "scrapy"], "answers": [{"tags": [], "owner": {"reputation": 1386, "user_id": 6003081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5660dc35dd5e513e499f6bc08a56302f?s=128&d=identicon&r=PG&f=1", "display_name": "JeD", "link": "https://stackoverflow.com/users/6003081/jed"}, "is_accepted": true, "score": 3, "last_activity_date": 1456959972, "last_edit_date": 1456959972, "creation_date": 1456959420, "answer_id": 35759881, "question_id": 35759847, "link": "https://stackoverflow.com/questions/35759847/scrapy-extract-only-a-portion-of-the-url/35759881#35759881", "title": "Scrapy extract only a portion of the url", "body": "<p>Try</p>\n\n<pre><code>'link'=response.url.split('=')[-1]\n</code></pre>\n\n<p>This returns everything after the last '='</p>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 2, "last_activity_date": 1456959605, "creation_date": 1456959605, "answer_id": 35759920, "question_id": 35759847, "link": "https://stackoverflow.com/questions/35759847/scrapy-extract-only-a-portion-of-the-url/35759920#35759920", "title": "Scrapy extract only a portion of the url", "body": "<p>I imagine you want the full query, if you want to parse a url, use urlparse:</p>\n\n<pre><code>In [1]: import urlparse\n\nIn [2]: url = \"https://www.youtube.com/watch?v=qEybDk00rJE\"\n\nIn [3]: parsed =  urlparse.urlparse(url)\n\nIn [4]: parsed\nOut[4]: ParseResult(scheme='https', netloc='www.youtube.com', path='/watch', params='', query='v=qEybDk00rJE', fragment='')\n\nIn [5]: parsed.query\nOut[5]: 'v=qEybDk00rJE'\n</code></pre>\n\n<p>If you do really only want what comes after the <code>=</code> you can then split the query.</p>\n\n<p>. </p>\n"}], "owner": {"reputation": 2788, "user_id": 1467535, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dfba9abb6e0124bb2ecbaa6a1aafea7d?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/1467535/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3307, "favorite_count": 0, "accepted_answer_id": 35759881, "answer_count": 2, "score": 1, "last_activity_date": 1456959972, "creation_date": 1456959260, "question_id": 35759847, "link": "https://stackoverflow.com/questions/35759847/scrapy-extract-only-a-portion-of-the-url", "title": "Scrapy extract only a portion of the url", "body": "<p>I have the following spider:</p>\n\n<pre><code>start_urls = ['https://www.youtube.com/user/ZaidAliT/videos']\n\ndef parse_question(self, response):\n    yield {\n        'title': response.css('h1 span::text').extract()[0],\n        'views': response.css('div .watch-view-count::text').extract()[0],\n        'link': response.url,\n    }\n</code></pre>\n\n<p>Currently when i parse, i get the entire links of the channel in the <code>response.url</code> like the following:</p>\n\n<pre><code>\"link\": \"https://www.youtube.com/watch?v=qEybDk00rJE\"\n</code></pre>\n\n<p>How do i modify this such that i extract only the <code>qEybDk00rJE</code> part from the url?</p>\n"}, {"tags": ["python", "django", "redirect", "python-social-auth"], "comments": [{"owner": {"reputation": 1304, "user_id": 3810234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3814a1b807ce2ef96b1d530bb4073a0b?s=128&d=identicon&r=PG&f=1", "display_name": "arcegk", "link": "https://stackoverflow.com/users/3810234/arcegk"}, "edited": false, "score": 0, "creation_date": 1456960261, "post_id": 35759832, "comment_id": 59193319, "body": "Did you try set the <code>LOGIN_REDIRECT_URL</code> variable in your settings?"}, {"owner": {"reputation": 8395, "user_id": 3945375, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE10z.jpg?s=128&g=1", "display_name": "Gocht", "link": "https://stackoverflow.com/users/3945375/gocht"}, "reply_to_user": {"reputation": 1304, "user_id": 3810234, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3814a1b807ce2ef96b1d530bb4073a0b?s=128&d=identicon&r=PG&f=1", "display_name": "arcegk", "link": "https://stackoverflow.com/users/3810234/arcegk"}, "edited": false, "score": 0, "creation_date": 1456960289, "post_id": 35759832, "comment_id": 59193330, "body": "@arcegk Yes, same problem."}], "answers": [{"comments": [{"owner": {"reputation": 8395, "user_id": 3945375, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE10z.jpg?s=128&g=1", "display_name": "Gocht", "link": "https://stackoverflow.com/users/3945375/gocht"}, "edited": false, "score": 0, "creation_date": 1456960546, "post_id": 35760105, "comment_id": 59193442, "body": "I understand this, nice to know where does <code>accounts&#47;profile</code> comes from, I didn&#39;t found that in docs. Is there any way to catch the redirect and avoid it? or response just a JSON instead of a template? - This is not a full API but I wonder if it&#39;s possible. Thanks"}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "reply_to_user": {"reputation": 8395, "user_id": 3945375, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE10z.jpg?s=128&g=1", "display_name": "Gocht", "link": "https://stackoverflow.com/users/3945375/gocht"}, "edited": false, "score": 0, "creation_date": 1456960774, "post_id": 35760105, "comment_id": 59193527, "body": "The docs for the <a href=\"https://docs.djangoproject.com/en/1.9/topics/auth/default/#django.contrib.auth.views.login\" rel=\"nofollow noreferrer\">django login view</a> do say that the user will be redirected to <code>LOGIN_REDIRECT_URL</code>, which defaults to <code>&#47;accounts&#47;profile&#47;</code>. If you want to avoid the 404 error, then either change the settings to a url that does exist, or add a view and a url pattern for that <code>&#47;accounts&#47;profile&#47;</code>. That url/view could return html, json, or anything else you want. Unless you are logging in with an ajax request, it wouldn&#39;t be a good idea to return json."}], "tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 2, "last_activity_date": 1456960783, "last_edit_date": 1456960783, "creation_date": 1456960402, "answer_id": 35760105, "question_id": 35759832, "link": "https://stackoverflow.com/questions/35759832/redirect-to-another-domain-after-python-social-auth-login/35760105#35760105", "title": "Redirect to another domain after Python-social-auth login", "body": "<p>It isn't safe to redirect to a different domain, e.g. <code>https://www.google.com</code>. To understand why, imagine that I send your users a link to:</p>\n\n<pre><code>http://www.yoursite.com/login?next=http://myevilsite.com\n</code></pre>\n\n<p>If your login page trusted the <code>next</code> url, then your users will be redirected to my site after they have logged in. I could use this for phishing attacks.</p>\n\n<p>To prevent against this, Django checks that the next url is safe to redirect to. If it is not safe, then it will redirect to the <code>settings.LOGIN_REDIRECT_URL</code>, which defaults to <code>/accounts/profile/</code>. You can <a href=\"https://github.com/django/django/blob/c92123cc1dceeb800b3b8900e2e530ed19d78863/django/utils/http.py\" rel=\"nofollow\">see the code here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 7700, "user_id": 933059, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UG9mV.jpg?s=128&g=1", "display_name": "Diego Navarro", "link": "https://stackoverflow.com/users/933059/diego-navarro"}, "is_accepted": false, "score": 0, "last_activity_date": 1544024934, "creation_date": 1544024934, "answer_id": 53635995, "question_id": 35759832, "link": "https://stackoverflow.com/questions/35759832/redirect-to-another-domain-after-python-social-auth-login/53635995#53635995", "title": "Redirect to another domain after Python-social-auth login", "body": "<p>I had the same problem and I think there is some situations where it is interesting to redirect to another domain (ie: you have your backend under a different domain than your frontend).</p>\n\n<p>After some investigation I found that you can control which domains are safe to redirect to (<a href=\"https://github.com/python-social-auth/social-core/blob/1d809941ab8a99af9e1bdf12bae548202c94eaa2/social_core/actions.py#L20\" rel=\"nofollow noreferrer\">https://github.com/python-social-auth/social-core/blob/1d809941ab8a99af9e1bdf12bae548202c94eaa2/social_core/actions.py#L20</a>).</p>\n\n<p>Just add this to your <code>settings.py</code>:</p>\n\n<pre><code>SOCIAL_AUTH_ALLOWED_REDIRECT_HOSTS = ['domain1', 'domain2']\n</code></pre>\n"}], "owner": {"reputation": 8395, "user_id": 3945375, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE10z.jpg?s=128&g=1", "display_name": "Gocht", "link": "https://stackoverflow.com/users/3945375/gocht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1073, "favorite_count": 0, "accepted_answer_id": 35760105, "answer_count": 2, "score": 2, "last_activity_date": 1544024934, "creation_date": 1456959200, "last_edit_date": 1456960413, "question_id": 35759832, "link": "https://stackoverflow.com/questions/35759832/redirect-to-another-domain-after-python-social-auth-login", "title": "Redirect to another domain after Python-social-auth login", "body": "<p>Is it possible redirect to another web after login with <code>python-social-auth</code>?</p>\n\n<p>let's say:</p>\n\n<pre><code>&lt;a href=\"{% url 'social:begin' 'facebook' %}?next={{ request.path }}\"&gt;&lt;/a&gt;\n</code></pre>\n\n<p>The example above is according to the documentation and it is working well, but when I try this:</p>\n\n<pre><code>&lt;a href=\"{% url 'social:begin' 'facebook' %}?next=http://www.google.com/\"&gt;&lt;/a&gt;\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>http://example.com:8000/accounts/profile/ Not Found\n</code></pre>\n\n<p>This makes sense; I don't have this URL defined</p>\n\n<p>At this point I have been already logged in, but I see an error page.</p>\n\n<p>But with the same configuration, if I redirect to my own site, this works, I think this is something about settings, but I don't know which one.</p>\n\n<p>EDIT:</p>\n\n<p>If I remove the <code>next</code> GET param in the first configuration, it raise the same error.</p>\n"}, {"tags": ["python", "scrapy"], "comments": [{"owner": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "edited": false, "score": 0, "creation_date": 1456985058, "post_id": 35759800, "comment_id": 59201137, "body": "I made this question but wasn&#39;t detailed enough, it was necessary to make other question once I was more clear about what did i need"}], "answers": [{"tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 1, "last_activity_date": 1456960025, "creation_date": 1456960025, "answer_id": 35760021, "question_id": 35759800, "link": "https://stackoverflow.com/questions/35759800/how-to-keep-a-reference-for-the-requests-in-scrapy/35760021#35760021", "title": "how to keep a reference for the requests in scrapy", "body": "<p>This is exactly what <a href=\"http://doc.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Request.meta\" rel=\"nofollow\"><code>.meta</code></a> is for:</p>\n\n<pre><code>def parse(self, response):\n     return scrapy.Request(url, \n                           meta={\"number\": number},\n                           callback=self.parse_page)\n\ndef parse_page(self, response):\n    print(response.meta[\"number\"])\n</code></pre>\n"}], "owner": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 35760021, "answer_count": 1, "score": 0, "last_activity_date": 1456960025, "creation_date": 1456959075, "last_edit_date": 1456959873, "question_id": 35759800, "link": "https://stackoverflow.com/questions/35759800/how-to-keep-a-reference-for-the-requests-in-scrapy", "title": "how to keep a reference for the requests in scrapy", "body": "<p>I'm scraping a page from links created out from numbers,</p>\n\n<pre><code>www.some_page.com/some_number\n</code></pre>\n\n<p>when the pages exist the url changes, when I try:</p>\n\n<pre><code>response.request.url\n</code></pre>\n\n<p>I don't get the:</p>\n\n<pre><code>www.some_page.com/some_number\n</code></pre>\n\n<p>That I'm using to make the search, so I lost the number I'm using to get the page, I need to keep this number to match the data again.</p>\n\n<p>How can I pass some value, the number in this as an argument when I make the request and get it back in the response? </p>\n"}, {"tags": ["python", "sorting", "recursion", "merge"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1456959336, "post_id": 35759797, "comment_id": 59192971, "body": "If <code>len(xlist)&gt;1</code> is not true, the function does nothing, therefore it returns None.  Is this intentional?"}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "edited": false, "score": 1, "creation_date": 1456959995, "post_id": 35759797, "comment_id": 59193223, "body": "The second half of your code is not really doing a merge sort. Appending to <code>left</code> is not merging - it&#39;s relying on your cleanup code to <i>sloooowly</i> arrange the list in correct order. You have effectively implemented a <b>shell sort</b> in the guise of merge sort."}], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 5500634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f5492973d777cd6d55f79eb02f60fbe?s=128&d=identicon&r=PG&f=1", "display_name": "Hsiang", "link": "https://stackoverflow.com/users/5500634/hsiang"}, "edited": false, "score": 0, "creation_date": 1456965049, "post_id": 35759930, "comment_id": 59195022, "body": "Thank you! but actually i have tried to do the way you suggested, which shows the following error messages (I used ipython):   ..... &lt;ipython-input-51-f8eb0c21b2b6&gt; in mergeSort(xlist)      12         print (left, &#39;r&#39;, right)      13  ---&gt; 14         while len(right) &gt;0:      15             left.append(right[0])      16             right.remove(right[0])  TypeError: object of type &#39;NoneType&#39; has no len()"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1456966260, "last_edit_date": 1456966260, "creation_date": 1456959630, "answer_id": 35759930, "question_id": 35759797, "link": "https://stackoverflow.com/questions/35759797/a-bug-of-merge-sort-using-python/35759930#35759930", "title": "a bug of merge sort using Python", "body": "<p>It took me a few minutes, but I found it.  You recur on the left &amp; right halves properly, but then you throw away the results and merge the original lists.  Correction:</p>\n\n<pre><code>    print ('----------------------------')\n    left  = mergeSort(left)\n    right = mergeSort(right)\n</code></pre>\n\n<p>I expect you can see the effect now.</p>\n\n<hr>\n\n<p>Here's the working code that produced the output above:</p>\n\n<pre><code>def mergeSort(xlist):\n    print 'Splitting', xlist, len(xlist)\n    if len(xlist) &lt;= 1:\n        return xlist\n    else:\n        midpoint = len(xlist) // 2\n        left  = xlist[:midpoint]\n        right = xlist[midpoint:]\n        print ('----------------------------')\n        left  = mergeSort(left)\n        right = mergeSort(right)\n\n        print left, 'r', right\n\n        # print \"merge\", left, right\n        while len(right) &gt; 0:\n            left.append(right[0])\n            right.remove(right[0])\n            slot = len(left) - 1\n            while slot &gt; 0:\n                if left[slot] &lt; left[slot-1]:\n                    left[slot], left[slot-1] = left[slot-1], left[slot]\n                # print \"switched\", left\n                slot -= 1\n\n        print 'sorted', left, right, xlist\n        return left\n\nprint 'A',mergeSort([100,1,91,54])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>A Splitting [100, 1, 91, 54] 4\n----------------------------\nSplitting [100, 1] 2\n----------------------------\nSplitting [100] 1\nSplitting [1] 1\n[100] r [1]\nsorted [1, 100] [] [100, 1]\nSplitting [91, 54] 2\n----------------------------\nSplitting [91] 1\nSplitting [54] 1\n[91] r [54]\nsorted [54, 91] [] [91, 54]\n[1, 100] r [54, 91]\nsorted [1, 54, 91, 100] [] [100, 1, 91, 54]\n[1, 54, 91, 100]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 355, "user_id": 5500634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f5492973d777cd6d55f79eb02f60fbe?s=128&d=identicon&r=PG&f=1", "display_name": "Hsiang", "link": "https://stackoverflow.com/users/5500634/hsiang"}, "edited": false, "score": 0, "creation_date": 1456965764, "post_id": 35759969, "comment_id": 59195224, "body": "I have actually tried to revise my code as adding &quot;xlist = left&quot; just right before &quot;print (&#39;sorted&#39;,left, right,xlist)&quot; and remove &quot;return left&quot;. This is the modify-in place approach, but it still does not work."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "reply_to_user": {"reputation": 355, "user_id": 5500634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f5492973d777cd6d55f79eb02f60fbe?s=128&d=identicon&r=PG&f=1", "display_name": "Hsiang", "link": "https://stackoverflow.com/users/5500634/hsiang"}, "edited": false, "score": 0, "creation_date": 1456966771, "post_id": 35759969, "comment_id": 59195533, "body": "<code>xlist = left</code> won&#39;t modify the list pointed to by <code>xlist</code>, it just rebinds the name. You could do <code>xlist[:] = left</code>, but it would really be better to merge the values from <code>left</code> and <code>right</code> into <code>xlist</code> directly (your current merge procedure is very inefficient)."}, {"owner": {"reputation": 355, "user_id": 5500634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f5492973d777cd6d55f79eb02f60fbe?s=128&d=identicon&r=PG&f=1", "display_name": "Hsiang", "link": "https://stackoverflow.com/users/5500634/hsiang"}, "edited": false, "score": 0, "creation_date": 1456972667, "post_id": 35759969, "comment_id": 59197155, "body": "Thank you! It works now. What is the difference between xlist =left and xlist[:] = left? Also thank you for your reminder that my current merge procedure is not efficient at all."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "reply_to_user": {"reputation": 355, "user_id": 5500634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f5492973d777cd6d55f79eb02f60fbe?s=128&d=identicon&r=PG&f=1", "display_name": "Hsiang", "link": "https://stackoverflow.com/users/5500634/hsiang"}, "edited": false, "score": 0, "creation_date": 1456973658, "post_id": 35759969, "comment_id": 59197472, "body": "<code>xlist = left</code> rebinds the name <code>xlist</code> to refer to the same object as <code>left</code>. Using a slice assignment on the other hand modifies the contents of the existing <code>xlist</code> object, so it still refers to the same object, but has different contents."}], "tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": true, "score": 1, "last_activity_date": 1456959811, "creation_date": 1456959811, "answer_id": 35759969, "question_id": 35759797, "link": "https://stackoverflow.com/questions/35759797/a-bug-of-merge-sort-using-python/35759969#35759969", "title": "a bug of merge sort using Python", "body": "<p>You need to decide whether your <code>mergesort</code> code is going to modify the list it is passed in place, or if it is going to return a new list. The top part of your code is written as if it will modify the list in place. The bottom half is written as if it returns a new list. They both need to work the same way, or the sort won't work.</p>\n\n<p>If you want to stick with the modify-in-place approach, the top part of the code is fine, it's just the merging of <code>left</code> and <code>right</code> at the end that you need to fix up. Instead of merging into <code>left</code>, you need to merge into <code>xlist</code>. I'd suggest using separate indexes into each of the three lists, rather than doing costly insertions into <code>left</code> like you're currently doing.</p>\n\n<p>If you want to return a new list, you need to change the top part of the code. If you hit the base case (<code>len(xlist) &lt; 2</code>), you need to return <code>xlist</code> unmodified. You also need to save the return values from the recursive calls, perhaps with <code>left = mergesort(left)</code> and <code>right = mergesort(right)</code>. Your later merging code is probably OK, though it discards most of the performance advantages of merge sort, since the insertion logic is <code>O(N**2)</code>.</p>\n"}], "owner": {"reputation": 355, "user_id": 5500634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f5492973d777cd6d55f79eb02f60fbe?s=128&d=identicon&r=PG&f=1", "display_name": "Hsiang", "link": "https://stackoverflow.com/users/5500634/hsiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 35759969, "answer_count": 2, "score": 1, "last_activity_date": 1456966260, "creation_date": 1456959061, "question_id": 35759797, "link": "https://stackoverflow.com/questions/35759797/a-bug-of-merge-sort-using-python", "title": "a bug of merge sort using Python", "body": "<p>I am working on merge sort using recursive Python.\nI couldn't find out where I made mistake and always got wrong answers.\nThe code is as follows:</p>\n\n<pre><code>def mergeSort(xlist):\n    print ('Splitting',xlist, len(xlist))\n    if len(xlist)&gt;1:\n       midpoint = len(xlist) // 2\n       left  = xlist[:midpoint]\n       right = xlist[midpoint:]\n       print ('----------------------------')\n       mergeSort(left)\n       mergeSort(right)\n\n       print (left, 'r', right)\n\n       while len(right) &gt;0:\n          left.append(right[0])\n          right.remove(right[0])\n          slot= len(left)-1\n          while slot &gt;0:\n              if left[slot] &lt; left[slot-1]: left[slot], left[slot-1] = left[slot-1], left[slot]\n              slot -= 1\n\n       print ('sorted',left, right,xlist)\n       return left\n\nprint('A',mergeSort([100,1,91,54])) \n</code></pre>\n\n<p>When merging, the output also shows in the wrong way, like:</p>\n\n<pre><code> Splitting [100, 1, 91, 54] \n ---------------------------- \n Splitting [100, 1] 2\n ---------------------------- \n Splitting [100] 1 \n Splitting [1] 1 \n [100] r [1] \n sorted [1, 100] [] [100, 1]\n Splitting [91, 54] 2\n ---------------------------- \n Splitting [91] 1 \n Splitting [54] 1 \n [91] r [54] \n sorted [54, 91] [] [91, 54]\n [100, 1] r [91, 54] \n sorted [1, 54, 100, 91] [] [100, 1, 91, 54]\n A [1, 54, 100, 91]\n</code></pre>\n\n<p>I expect the last third line should be \"[1,100] r [54, 91]\" after return back.\nWhat is wrong here? I know there is a code in interactivePython.org, but I wish to understand where I made logical mistake. Can anyone help me? A ton of thanks! </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2480, "user_id": 2999347, "user_type": "registered", "profile_image": "https://graph.facebook.com/1393151316/picture?type=large", "display_name": "Pawe\u0142 Kordowski", "link": "https://stackoverflow.com/users/2999347/pawe%c5%82-kordowski"}, "edited": false, "score": 0, "creation_date": 1456959098, "post_id": 35759781, "comment_id": 59192861, "body": "see <a href=\"https://docs.python.org/2/library/functions.html#super\" rel=\"nofollow noreferrer\">docs.python.org/2/library/functions.html#super</a>"}, {"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 3, "creation_date": 1456959125, "post_id": 35759781, "comment_id": 59192874, "body": "Why are you prefixing <code>yell</code> as <code>__yell</code>?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1456959245, "post_id": 35759781, "comment_id": 59192931, "body": "<a href=\"https://stackoverflow.com/questions/tagged/python2\">python2</a> or <a href=\"https://stackoverflow.com/questions/tagged/python3\">python3</a>..."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1456959390, "post_id": 35759781, "comment_id": 59192998, "body": "Looks like you are trying to call a child method from the parent class... <code>d.do_stuff()</code> should work fine. It is <code>self.__yell()</code> that is the problem"}], "answers": [{"comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 1, "creation_date": 1456960348, "post_id": 35759842, "comment_id": 59193358, "body": "Actually, renaming <code>dog.yell</code> to dog.__yell` wouldn&#39;t work, since the double leading underscores trigger Python&#39;s name mangling. The rest of this answer is right on though (the solution is to not use double underscores!)."}], "tags": [], "owner": {"reputation": 5493, "user_id": 328258, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/bb68408b9aaff4ac34d5f1679bc4d363?s=128&d=identicon&r=PG", "display_name": "olofom", "link": "https://stackoverflow.com/users/328258/olofom"}, "is_accepted": false, "score": 0, "last_activity_date": 1456960569, "last_edit_date": 1456960569, "creation_date": 1456959242, "answer_id": 35759842, "question_id": 35759781, "link": "https://stackoverflow.com/questions/35759781/call-parent-method-in-child-class/35759842#35759842", "title": "Call parent method in child class", "body": "<p>Change <code>return self.__yell()</code> to <code>return self.yell()</code> and it will work. Just call it the way it's named.</p>\n\n<pre><code>In [1]: class animal(object):\n   ...:     def do_stuff(self):\n   ...:         return self.yell()\n   ...:\n\nIn [2]: class dog(animal):\n   ...:     def yell(self):\n   ...:         print(\"yelling\")\n   ...:\n\nIn [3]: d = dog()\n\nIn [4]: d.do_stuff()\nyelling\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 600, "user_id": 5699422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b07fefccf21661c86d29c371b31739ee?s=128&d=identicon&r=PG&f=1", "display_name": "antikantian", "link": "https://stackoverflow.com/users/5699422/antikantian"}, "is_accepted": false, "score": 0, "last_activity_date": 1456959384, "creation_date": 1456959384, "answer_id": 35759875, "question_id": 35759781, "link": "https://stackoverflow.com/questions/35759781/call-parent-method-in-child-class/35759875#35759875", "title": "Call parent method in child class", "body": "<p><code>do_stuff</code> calls __yell(), which doesn't exist.  Either change <code>yell</code> to <code>__yell</code> (don't do this), or change <code>__yell</code> to <code>yell</code>.    </p>\n\n<pre><code>In [24]: %paste\nclass animal(object):\n    def do_stuff(self):\n        return self.yell()\n\n\nIn [25]: %paste\nclass dog(animal):\n    def yell(self):\n        print(\"yelling\")\n\nIn [26]: d = dog()\n\nIn [27]: d.do_stuff()\nyelling\n</code></pre>\n"}], "owner": {"reputation": 2024, "user_id": 2726995, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/43b927bba59dd5210f0f12b705997407?s=128&d=identicon&r=PG&f=1", "display_name": "user2726995", "link": "https://stackoverflow.com/users/2726995/user2726995"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1456960569, "creation_date": 1456959000, "last_edit_date": 1456959260, "question_id": 35759781, "link": "https://stackoverflow.com/questions/35759781/call-parent-method-in-child-class", "title": "Call parent method in child class", "body": "<p>I have a very simple situation: </p>\n\n<p>I have this class: </p>\n\n<pre><code>class animal(object):\n    def do_stuff(self):\n        return self.__yell() \n\nclass dog(animal):\n    def yell(self):\n        print(\"yelling\")\n</code></pre>\n\n<p>I want to be able to call </p>\n\n<pre><code>d = dog() \nd.do_stuff() \n</code></pre>\n\n<p>however I get </p>\n\n<blockquote>\n  <p>AttributeError: 'dog' object has no attribute '_animal__yell' </p>\n</blockquote>\n\n<p>The parent class will implement do_stuff which will call each subclasses yell method, but this is not working</p>\n"}, {"tags": ["python", "api", "networking"], "answers": [{"tags": [], "owner": {"reputation": 10341, "user_id": 219604, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/bb54464b83f07b50e9bb7a9d3b1bfad9?s=128&d=identicon&r=PG", "display_name": "ty.", "link": "https://stackoverflow.com/users/219604/ty"}, "is_accepted": false, "score": 0, "last_activity_date": 1457112133, "creation_date": 1457112133, "answer_id": 35802229, "question_id": 35759754, "link": "https://stackoverflow.com/questions/35759754/sending-text-messages-without-formatting-using-text-belt-or-cellnumberprovider/35802229#35802229", "title": "Sending text messages without formatting using Text belt or cellnumber@provider.net", "body": "<p>I'm the creator of <a href=\"http://textbelt.com/\" rel=\"nofollow\">Textbelt</a> and unfortunately FRM and SUBJ are built in.  Some cell providers reject messages that don't have those fields set, and right now there is no way to customize them.</p>\n\n<p>Because Textbelt is <a href=\"https://github.com/typpo/textbelt\" rel=\"nofollow\">open source</a>, one alternative is to host your own Textbelt server and set the From and Subject fields yourself in <code>lib/text.js</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4334596"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 687, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457112133, "creation_date": 1456958899, "last_edit_date": 1457022626, "question_id": 35759754, "link": "https://stackoverflow.com/questions/35759754/sending-text-messages-without-formatting-using-text-belt-or-cellnumberprovider", "title": "Sending text messages without formatting using Text belt or cellnumber@provider.net", "body": "<p>Textbelt is an API for sending text messages free. Works great, but the text arrives in this format:</p>\n\n<p>FRM:root\nSUBJ:txt\nMSG:whatever your message is</p>\n\n<p>Is there a way to send just the text message using script below without FRM, SUBJ, or MSG labels?</p>\n\n<pre><code>import requests\n\nmessage = raw_input('Enter a Message: ')\nnumber = raw_input('Enter the phone number: ')\n\n    payload = {'number': number, 'message': message}\n    r = requests.post(\"http://textbelt.com/text\", data=payload)\n    if r.json()['success']:\n        print('Success!')\n    else:\n        print('Error!')\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "py2exe", "pywin32", "pythoncom"], "comments": [{"owner": {"reputation": 185, "user_id": 2709214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7760d5e812f4e917c6c4ba46b871b2bc?s=128&d=identicon&r=PG&f=1", "display_name": "user2709214", "link": "https://stackoverflow.com/users/2709214/user2709214"}, "edited": false, "score": 0, "creation_date": 1457019556, "post_id": 35759745, "comment_id": 59224595, "body": "The fact that the setup for py2exe use CImtg for the com server name is irrelevant.  I tried foo with the same result."}], "answers": [{"tags": [], "owner": {"reputation": 185, "user_id": 2709214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7760d5e812f4e917c6c4ba46b871b2bc?s=128&d=identicon&r=PG&f=1", "display_name": "user2709214", "link": "https://stackoverflow.com/users/2709214/user2709214"}, "is_accepted": true, "score": 1, "last_activity_date": 1457080045, "last_edit_date": 1457080045, "creation_date": 1457078389, "answer_id": 35790850, "question_id": 35759745, "link": "https://stackoverflow.com/questions/35759745/python-com-server-unable-to-create-instance-when-wrapped-with-py2exe-error-obj/35790850#35790850", "title": "Python Com Server unable to create instance when wrapped with py2exe - error object has no attribute", "body": "<p>I finally figured this out.  I'm hoping it will help someone else struggling with this.</p>\n\n<p>This is a problem with the import.  The way py2exe packages this it just can't find the right pieces when running as the com server.  What I'm posting below works.</p>\n\n<p>So the first piece is that the setup needs to look like this.  NOTICE the addition of \"packages\" in the options, where we include my com server.  This is important because we are going to change the <code>__reg_class_spec__</code> to point to this explicitly.</p>\n\n<p>So the full revised setup_imtg.py</p>\n\n<pre><code># This setup script builds a single-file Python inprocess COM server.\n#\nimport modulefinder\nimport win32com, sys\nfor p in win32com.__path__[1:]:\n    modulefinder.AddPackagePath(\"win32com\",p)\nfor extra in [\"win32com.shell\"]:\n    __import__(extra)\n    m = sys.modules[extra]\n    for p in m.__path__[1:]:\n        modulefinder.AddPackagePath(extra, p)\n\nfrom distutils.core import setup\nimport py2exe\nimport sys\n# If run without args, build executables, in quiet mode.\nif len(sys.argv) == 1:\n    sys.argv.append(\"py2exe\")\n    sys.argv.append(\"-q\")\n\nclass Target:\n    def __init__(self, **kw):\n        self.__dict__.update(kw)\n        # for the versioninfo resources\n        self.name = \"Python TestServer\"\n\n\n################################################################\n# pywin32 COM pulls in a lot of stuff which we don't want or need.\n\nCImtg = Target(\n    description = \"Sample COM Server\",\n    # what to build.  For COM servers, the module name (not the\n    # filename) must be specified!\n    modules = [\"imtg_server\"],\n    # we only want the inproc server.\n    )\n\nexcludes = [\"pywin\", \"pywin.debugger\", \"pywin.debugger.dbgcon\",\n            \"pywin.dialogs\", \"pywin.dialogs.list\"]\n\noptions = {\n    \"bundle_files\": 1, # create singlefile exe\n    \"packages\": [\"imtg_server\"],\n    \"compressed\": 1, # compress the library archive\n    \"excludes\": excludes,\n    \"dll_excludes\": [\"w9xpopen.exe\"] # we don't need this\n    }\n\nsetup(\n    options = {\"py2exe\": options},\n    zipfile = None, # append zip-archive to the executable.\n    com_server = [CImtg]\n    )\n</code></pre>\n\n<p>Now then I changed the server code to specify the <code>_reg_class_spec_</code> to point to imtg_server.CImtg.</p>\n\n<p>But that's not all!  We were doing this from the code to start the com server.  We don't need to do that!  The initial sample I started with used py2exe and built a CONSOLE application and not a com_server, but py2exe DOES build a com server so we do not need to start it again - so this code gets removed:</p>\n\n<pre><code>    import win32com.server\n    from win32com.server import localserver\n    print \"starting the server\"\n    localserver.main()\n</code></pre>\n\n<p>But as they say - that's not ALL!  Since we included the package itself and thats what we are executing the \"name\" isn't <code>__main__</code> instead it's imtg_server!</p>\n\n<p>So there's a check for that in here in addition to main in case you are developing but not deploying.  MOST of the code now is to determine which way you are running and to check and run appropriately because there's ONE MORE THING!  Getting the directory where we are running for building the typelib from the IDL or for registering the typelib appends the name of the exe to the path - where when running the interpreter does not!  So I had to strip that off.</p>\n\n<p>Remember when you run the exe the print statements are suppressed so don't worry when you register and nothing is displayed.  If there's a problem a .log file will be created.</p>\n\n<p>Here's the working code for imtg_server.py -- enjoy</p>\n\n<pre><code>import sys, os\nimport pythoncom\nimport win32com\nimport winerror\n# importers check was old py2exe current uses frozen\nif hasattr(sys, 'frozen'):\n    # we are running as py2exe-packed executable\n    print \"is an exe\"\n    pythoncom.frozen = 1\nelse:\n   print \"not an exe\"\n\nclass CImtg:\n    _reg_clsctx_ = pythoncom.CLSCTX_LOCAL_SERVER\n    #\n    # COM declarations    \n    #\n    _reg_clsid_ = \"{24c0e3fe-58e7-4485-87dc-9f9e823b85e1}\"\n    _reg_desc_ = \"IMTGroup Python test object\"\n    _reg_progid_ = \"ImtGroup.Test\"\n    if hasattr(sys, 'frozen'):\n        # In the py2exe-packed version, specify the module.class\n        # to use. In the python script version, python is able\n        # to figure it out itself.\n        _reg_class_spec_ = \"imtg_server.CImtg\"\n        print \"set reg_class_spec\"\n        print _reg_class_spec_\n    ###\n    ### Link to typelib - uuid matches uuid for type library in idl file\n    _typelib_guid_ = '{d665e9d0-71a9-4e23-a1b4-abe3376d5c58}'\n    _typelib_version_ = 1, 0\n    _com_interfaces_ = ['IImtGroupApp']\n\n    def __init__(self):\n    ### initialize something here if necessary\n    ### The item below is not used in this example\n        self.MyProp1 = 10\n\n    def EchoString(self,in1):\n        return \"Echoing \" + in1\n\n    def AddNumbers(self, in1, in2):\n        return in1 + in2\n\ndef BuildTypelib():\n    from distutils.dep_util import newer\n    this_dir = os.path.dirname(__file__)\n    # when running as a exe this directory includes the exe name\n    if this_dir.endswith('imtg_server.exe'):\n       this_dir = this_dir[:-15]\n    idl = os.path.abspath(os.path.join(this_dir, \"imtg.idl\"))\n    tlb=os.path.splitext(idl)[0] + '.tlb'\n    if os.path.isfile(idl): \n      # test for idl - if no idl don't create tlb assume its there\n      # Comment below for building exe as we will have type library\n      if newer(idl, tlb):\n         print \"Compiling %s\" % (idl,)\n         rc = os.system ('midl \"%s\"' % (idl,))\n         if rc:\n             raise RuntimeError(\"Compiling MIDL failed!\")\n        # Can't work out how to prevent MIDL from generating the stubs.\n        # just nuke them\n         for fname in \"dlldata.c imtg_i.c imtg_p.c imtg.h\".split():\n             os.remove(os.path.join(this_dir, fname))\n\n    print \"Registering %s\" % (tlb,)\n    tli=pythoncom.LoadTypeLib(tlb)\n    pythoncom.RegisterTypeLib(tli,tlb)\ndef UnregisterTypelib():\n    k = CImtg\n    try:\n        pythoncom.UnRegisterTypeLib(k._typelib_guid_, \n                                    k._typelib_version_[0], \n                                    k._typelib_version_[1], \n                                    0, \n                                    pythoncom.SYS_WIN32)\n        print \"Unregistered typelib\"\n    except pythoncom.error, details:\n        if details[0]==winerror.TYPE_E_REGISTRYACCESS:\n            pass\n        else:\n            raise\nif __name__=='__main__' or __name__ =='imtg_server':\n      print \"checking frozen\"\n\n      if hasattr(sys, 'frozen'):\n         # running as packed executable\n\n         if '--unregister' in sys.argv or '--register' in sys.argv:\n            if '--unregister' in sys.argv:  \n              # Unregister the type-libraries.\n              UnregisterTypelib()\n              import win32com.server.register \n              win32com.server.register.UseCommandLine(CImtg)\n            else:\n              # Build and register the type-libraries.\n              BuildTypelib()\n              import win32com.server.register \n              win32com.server.register.UseCommandLine(CImtg)\n\n      else:\n        if '--unregister' in sys.argv:\n          # Unregister the type-libraries.\n          UnregisterTypelib()\n          import win32com.server.register \n          win32com.server.register.UseCommandLine(CImtg)\n        else:\n          if '--register' in sys.argv:\n            # Build and register the type-libraries.\n            BuildTypelib()\n            import win32com.server.register \n            win32com.server.register.UseCommandLine(CImtg)\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 2709214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7760d5e812f4e917c6c4ba46b871b2bc?s=128&d=identicon&r=PG&f=1", "display_name": "user2709214", "link": "https://stackoverflow.com/users/2709214/user2709214"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1592, "favorite_count": 1, "accepted_answer_id": 35790850, "answer_count": 1, "score": 5, "last_activity_date": 1570638515, "creation_date": 1456958865, "last_edit_date": 1457019884, "question_id": 35759745, "link": "https://stackoverflow.com/questions/35759745/python-com-server-unable-to-create-instance-when-wrapped-with-py2exe-error-obj", "title": "Python Com Server unable to create instance when wrapped with py2exe - error object has no attribute", "body": "<p>I've hit a wall with this one.  I need to create a python based com server, package it as a windows exe and deploy it on windows.  It has to have a \"full\" interface - because the consumer requires idispatch and a specific interfce to function.   Now I have created the com server and have it running under the interpreter and it functions flawlessly with my picky client.  However, when packaging as an EXE - its an localserver - I get an error in the log when the system tries to instantiate it (even from a vbs script).  So here's everyting.  I searched high and low in the itnernet and it looks like an import problem but I don't know how to import my own python object for the localserver to use.  </p>\n\n<p>This is python 2.7 with pywin32 extensions installed.  </p>\n\n<p>So first - the IDL I created for the server:</p>\n\n<p>imtg.idl</p>\n\n<pre><code>// This file will be processed by the MIDL tool to\n// produce the type library (imtg.tlb) and marshalling code.\n\nimport \"oaidl.idl\";\nimport \"ocidl.idl\";\n    [\n        object,\n        uuid(4fafbb23-6a38-4613-b93b-68ea66c67043),\n        dual,\n        helpstring(\"IImtGroupApp Interface\"),\n        pointer_default(unique)\n    ]\n    interface IImtGroupApp : IDispatch\n    {\n        [id(1), helpstring(\"method EchoString\")] HRESULT EchoString([in] BSTR in1, [out, retval] BSTR *vals);\n        [id(2), helpstring(\"method AddNumbers\")] HRESULT AddNumbers([in] long in1, [in] long in2, [out, retval] long *vali);\n    };\n    [\n    uuid(d665e9d0-71a9-4e23-a1b4-abe3376d5c58),\n    version(1.0),\n    helpstring(\"ImtGroup 1.0 Type Library\")\n]\nlibrary IMTGROUPLib\n{\n    importlib(\"stdole32.tlb\");\n    importlib(\"stdole2.tlb\");\n    importlib(\"msado15.dll\");\n\n    [\n        uuid(ced66424-93fb-4307-9062-7bee76d3d8eb),\n        helpstring(\"ImtGroupApp Class\")\n    ]\n    coclass ImtGroupApp {\n        [default] interface IImtGroupApp;\n    };\n};\n</code></pre>\n\n<p>Next the Python code - now this gets a bit tricky because when I distribute this I don't want to create the .tlb - so I'm not distributing the .idy - just make sure you have the .tbl to register.  Use an as admin cmd prompt if necessary.  </p>\n\n<p>imtg_server.py</p>\n\n<pre><code>import sys, os\nimport pythoncom\nimport win32com\nimport winerror\n# importers check was old py2exe current uses frozen\nif hasattr(sys, 'frozen'):\n    # we are running as py2exe-packed executable\n    print \"is an exe\"\n    pythoncom.frozen = 1\nelse:\n   print \"not an exe\"\n\nclass CImtg:\n    _reg_clsctx_ = pythoncom.CLSCTX_LOCAL_SERVER\n    #\n    # COM declarations    \n    #\n    _reg_clsid_ = \"{24c0e3fe-58e7-4485-87dc-9f9e823b85e1}\"\n    _reg_desc_ = \"IMTGroup Python test object\"\n    _reg_progid_ = \"ImtGroup.Test\"\n    if hasattr(sys, 'frozen'):\n        # In the py2exe-packed version, specify the module.class\n        # to use. In the python script version, python is able\n        # to figure it out itself.\n        _reg_class_spec_ = \"__main__.CImtg\"\n        print \"set reg_class_spec\"\n        print _reg_class_spec_\n    ###\n    ### Link to typelib - uuid matches uuid for type library in idl file\n    _typelib_guid_ = '{d665e9d0-71a9-4e23-a1b4-abe3376d5c58}'\n    _typelib_version_ = 1, 0\n    _com_interfaces_ = ['IImtGroupApp']\n\n    def __init__(self):\n    ### initialize something here if necessary\n    ### The item below is not used in this example\n        self.MyProp1 = 10\n\n    def EchoString(self,in1):\n        return \"Echoing \" + in1\n\n    def AddNumbers(self, in1, in2):\n        return in1 + in2\n\ndef BuildTypelib():\n    from distutils.dep_util import newer\n    this_dir = os.path.dirname(__file__)\n    idl = os.path.abspath(os.path.join(this_dir, \"imtg.idl\"))\n    tlb=os.path.splitext(idl)[0] + '.tlb'\n    if os.path.isfile(idl): \n      # test for idl - if no idl don't create tlb assume its there\n      # Comment below for building exe as we will have type library\n      if newer(idl, tlb):\n         print \"Compiling %s\" % (idl,)\n         rc = os.system ('midl \"%s\"' % (idl,))\n         if rc:\n             raise RuntimeError(\"Compiling MIDL failed!\")\n        # Can't work out how to prevent MIDL from generating the stubs.\n        # just nuke them\n         for fname in \"dlldata.c imtg_i.c imtg_p.c imtg.h\".split():\n             os.remove(os.path.join(this_dir, fname))\n\n    print \"Registering %s\" % (tlb,)\n    tli=pythoncom.LoadTypeLib(tlb)\n    pythoncom.RegisterTypeLib(tli,tlb)\ndef UnregisterTypelib():\n    k = CImtg\n    try:\n        pythoncom.UnRegisterTypeLib(k._typelib_guid_, \n                                    k._typelib_version_[0], \n                                    k._typelib_version_[1], \n                                    0, \n                                    pythoncom.SYS_WIN32)\n        print \"Unregistered typelib\"\n    except pythoncom.error, details:\n        if details[0]==winerror.TYPE_E_REGISTRYACCESS:\n            pass\n        else:\n            raise\nif __name__=='__main__':\n      print \"checking frozen\"\n      if hasattr(sys, 'frozen'):\n         # running as packed executable\n         if '--unregister' in sys.argv or '--register' in sys.argv:\n            if '--unregister' in sys.argv:  \n              # Unregister the type-libraries.\n              UnregisterTypelib()\n              import win32com.server.register \n              win32com.server.register.UseCommandLine(CImtg)\n            else:\n              # Build and register the type-libraries.\n              BuildTypelib()\n              import win32com.server.register \n              win32com.server.register.UseCommandLine(CImtg)\n         else:\n            import win32com.server\n            from win32com.server import localserver\n            print \"starting the server\"\n            localserver.main()\n\n      else:\n        if '--unregister' in sys.argv:\n          # Unregister the type-libraries.\n          UnregisterTypelib()\n          import win32com.server.register \n          win32com.server.register.UseCommandLine(CImtg)\n        else:\n          if '--register' in sys.argv:\n            # Build and register the type-libraries.\n            BuildTypelib()\n            import win32com.server.register \n            win32com.server.register.UseCommandLine(CImtg)\n</code></pre>\n\n<p>Next the setup for py2exe</p>\n\n<p>I had to add the funky import of the modulefinder because win32com.shell wasn't included in the packaged executable</p>\n\n<p>setup_imtg.py</p>\n\n<pre><code># This setup script builds a single-file Python inprocess COM server.\n#\nimport modulefinder\nimport win32com, sys\nfor p in win32com.__path__[1:]:\n    modulefinder.AddPackagePath(\"win32com\",p)\nfor extra in [\"win32com.shell\"]:\n    __import__(extra)\n    m = sys.modules[extra]\n    for p in m.__path__[1:]:\n        modulefinder.AddPackagePath(extra, p)\n\nfrom distutils.core import setup\nimport py2exe\nimport sys\n# If run without args, build executables, in quiet mode.\nif len(sys.argv) == 1:\n    sys.argv.append(\"py2exe\")\n    sys.argv.append(\"-q\")\n\nclass Target:\n    def __init__(self, **kw):\n        self.__dict__.update(kw)\n        # for the versioninfo resources\n        self.name = \"IMTG Server\"\n\n\n################################################################\n# pywin32 COM pulls in a lot of stuff which we don't want or need.\n\nCImtg = Target(\n    description = \"Sample COM server\",\n    # what to build.  For COM servers, the module name (not the\n    # filename) must be specified!\n    modules = [\"imtg_server\"],\n    # we only want the inproc server.\n    )\n\nexcludes = [\"pywin\", \"pywin.debugger\", \"pywin.debugger.dbgcon\",\n            \"pywin.dialogs\", \"pywin.dialogs.list\"]\n\noptions = {\n    \"bundle_files\": 1, # create singlefile exe\n    \"compressed\": 1, # compress the library archive\n    \"excludes\": excludes,\n    \"dll_excludes\": [\"w9xpopen.exe\"] # we don't need this\n    }\n\nsetup(\n    options = {\"py2exe\": options},\n    zipfile = None, # append zip-archive to the executable.\n    com_server = [CImtg]\n    )\n</code></pre>\n\n<p>When you run the generated EXE you can register with </p>\n\n<p>imtg_server --register </p>\n\n<p>but you won't see abou output</p>\n\n<p>--unregister unregisters</p>\n\n<p>You can use this vbs file to test it.</p>\n\n<p>t.vbs</p>\n\n<pre><code>dim MD\nset MD = CreateObject(\"ImtGroup.Test\")\ndim response\nresponse = MD.EchoString(\"Really\")\nMsgBox(response)\n</code></pre>\n\n<p>When you run there will be a .log created that looks like this:</p>\n\n<pre><code>pythoncom error: ERROR: server.policy could not create an instance.\n\nTraceback (most recent call last):\n  File \"win32com\\server\\policy.pyc\", line 136, in CreateInstance\n  File \"win32com\\server\\policy.pyc\", line 194, in _CreateInstance_\n  File \"win32com\\server\\policy.pyc\", line 727, in call_func\n  File \"win32com\\server\\policy.pyc\", line 717, in resolve_func\nAttributeError: 'module' object has no attribute 'CImtg'\npythoncom error: Unexpected gateway error\n\nTraceback (most recent call last):\n  File \"win32com\\server\\policy.pyc\", line 136, in CreateInstance\n  File \"win32com\\server\\policy.pyc\", line 194, in _CreateInstance_\n  File \"win32com\\server\\policy.pyc\", line 727, in call_func\n  File \"win32com\\server\\policy.pyc\", line 717, in resolve_func\nAttributeError: 'module' object has no attribute 'CImtg'\npythoncom error: CPyFactory::CreateInstance failed to create instance. (80004005)\n</code></pre>\n\n<p>So what I need is to get around this error.  This class is certainly in my object.  I'm concerned that the value I have specified in my server as:</p>\n\n<pre><code>_reg_class_spec_ = \"__main__.CImtg\"\n</code></pre>\n\n<p>Is incorrect.  The <strong>main</strong> may refer to the wrapped exe and not my own server which has no main specified.  I did try to create main as well with no better results. I just don't know how py2exe proxies the classes.  I tried using my file name imtg_server.CImtg and that fails with module not found.  I tried just CImtg and that fails.  I tried using variations of win32com and pythoncom - but it just doesn't do it.  What I have seems \"right\" so maybe I need an additional <em>reg</em> tag or something?   Any help is greatly appreciated.  Thank you.</p>\n"}, {"tags": ["python", "astropy", "fits"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1456961028, "post_id": 35759713, "comment_id": 59193622, "body": "At what point/line does it run out of memory?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1456961294, "post_id": 35759713, "comment_id": 59193724, "body": "Note that the <a href=\"http://astropy.readthedocs.org/en/stable/io/fits/index.html#working-with-large-files\" rel=\"nofollow noreferrer\">documentation says</a>: &quot;The open() function supports a memmap=True argument that allows the array data of each HDU to be accessed with mmap, rather than being read into memory all at once&quot;. So it doesn&#39;t appear to support it automatically (the <code>memmap</code> default value is <code>None</code>, but you&#39;ll need to supply it in <code>fits.open(filename, memmap=True)</code>."}, {"owner": {"reputation": 233, "user_id": 4718101, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59fedbbbe497d3c80c0d47dd7d97bea3?s=128&d=identicon&r=PG&f=1", "display_name": "MaxG", "link": "https://stackoverflow.com/users/4718101/maxg"}, "edited": false, "score": 0, "creation_date": 1456966515, "post_id": 35759713, "comment_id": 59195447, "body": "@Evert Thanks a lot, I edited my post to include the error message. It breaks after succesfully reading the first HDU(s) (for smaller files it reads more HDUs and breaks later). Thanks for pointing out that memmap&#39;s default is None, other <a href=\"http://docs.astropy.org/en/stable/io/fits/appendix/faq.html\" rel=\"nofollow noreferrer\">astropy docs</a> actually say it is True by default, but I could confirm your point (unfortunately it did not solve the issue it though)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1456968438, "post_id": 35759713, "comment_id": 59196015, "body": "Just a note on the memmap default, because that could be a bug in the docs: the FAQ you point to has the following about <a href=\"http://docs.astropy.org/en/stable/io/fits/appendix/faq.html#how-do-i-open-a-very-large-image-that-won-t-fit-in-memory\" rel=\"nofollow noreferrer\">opening large files</a>: &quot;To ensure use of memory mapping, just add the memmap=True argument to fits.open&quot;. Could you point me to the line or quote it where you find that the default is to use memmapping? Or have you set <code>USE_MEMMAP</code> somewhere?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1456968586, "post_id": 35759713, "comment_id": 59196058, "body": "Alternatively on that memmap default, perhaps you read the sentence &quot;In PyFITS, prior to version 3.1, when the data portion of an HDU is accessed, the data is read into memory in its entirety. &quot; as meaning that since 3.1, data is not read fully into memory (But memmapped). I interpret it, however, that the default behaviour hasn&#39;t changed, but (as per the next paragraph) that a <code>memmap</code> has been added since 3.1 (with default to <code>None</code> to enable the old behaviour). Perhaps that&#39;s your confusion about the <code>memmap</code> default?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1456969320, "post_id": 35759713, "comment_id": 59196266, "body": "At a guess to the cause: numpy does require the whole array (<code>hdulist[&#39;RA&#39;].data[ind_objs]</code>) to be in memory before it can index it. Is the size of a single HDU something that could fit into memory on your machine? (It seems so, as it appears to work for the FLUX HDU.) Because then it feels that the previous data is not released/flushed (which I&#39;d think should happen when memmapped, but I&#39;m definitely no expert there)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1456969368, "post_id": 35759713, "comment_id": 59196279, "body": "The second half of this <a href=\"http://docs.astropy.org/en/stable/io/fits/appendix/faq.html#i-m-opening-many-fits-files-in-a-loop-and-getting-oserror-too-many-open-files\" rel=\"nofollow noreferrer\">io.fits FAQ</a> may have something that could work in your case (even though the FAQ is related to another problem): make sure the <code>.data</code> attribute is gone before moving to the next HDU."}, {"owner": {"reputation": 233, "user_id": 4718101, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59fedbbbe497d3c80c0d47dd7d97bea3?s=128&d=identicon&r=PG&f=1", "display_name": "MaxG", "link": "https://stackoverflow.com/users/4718101/maxg"}, "edited": false, "score": 0, "creation_date": 1457002979, "post_id": 35759713, "comment_id": 59212211, "body": "@Evert Thanks a lot, I tried the &#39;del hdulist[&#39;FLUX&#39;].data&#39; etc. before, but never in combination with the other adjustments I now have. This allows me to now read a line from a fits file that is up to 50GB, but still struggling to read a line from a 100GB fits file... (see edit 2)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1457008584, "post_id": 35759713, "comment_id": 59215981, "body": "It&#39;ll crash in the first line now, because that particular HDU is now simpy too big to fit into memory at once; which, as stated earlier, is the requirement for numpy to index it. Since astropy.io.fits uses numpy under the hood, you&#39;d have to wait until numpy allows indexing on a file directly. Which may never happen. As per Iguananaut&#39;s remark: HDF5 does allow indexing into a file on disk, and is probably capable of reading your file properly. (Unfortunately, I&#39;m guessing a simple conversion from FITS to HDF5 is impossible, as the FITS HDUs will have to be, again, read at once.)"}], "answers": [{"comments": [{"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 0, "creation_date": 1456993833, "post_id": 35766899, "comment_id": 59205679, "body": "All that said--who&#39;s making these FITS files?  FITS is not well suited for huge files, and every time someone tries to use it for such they seem to run into problems even with CFITSIO.  Part of the problem is that FITS is not well suited for manipulating data in large files.  Please consider using something like HDF5 instead."}, {"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 0, "creation_date": 1456993933, "post_id": 35766899, "comment_id": 59205736, "body": "You should also update to Astropy 1.1.x which has slightly better handling in cases like this I think."}, {"owner": {"reputation": 233, "user_id": 4718101, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59fedbbbe497d3c80c0d47dd7d97bea3?s=128&d=identicon&r=PG&f=1", "display_name": "MaxG", "link": "https://stackoverflow.com/users/4718101/maxg"}, "edited": false, "score": 0, "creation_date": 1457002783, "post_id": 35766899, "comment_id": 59212046, "body": "Thanks for your comments, I tried that before, but mode=&#39;denywrite&#39; did not solve the memory problem. I do include it now in my edited question, just to be complete. I indeed only want to read the line from the fits file, not manipulate it. Also, thanks, I&#39;ll look into the astropy update."}, {"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "reply_to_user": {"reputation": 233, "user_id": 4718101, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59fedbbbe497d3c80c0d47dd7d97bea3?s=128&d=identicon&r=PG&f=1", "display_name": "MaxG", "link": "https://stackoverflow.com/users/4718101/maxg"}, "edited": false, "score": 0, "creation_date": 1457010728, "post_id": 35766899, "comment_id": 59217514, "body": "If <code>mode=&#39;denywrite&#39;</code> doesn&#39;t work what about <code>mode=&#39;update&#39;</code> out of curiosity.  If that still doesn&#39;t work I don&#39;t know why you would be getting a memory error from mmap.  In any case all the other details are a distraction.  For whatever reason you can&#39;t mmap for than some limit on your system. Could be a variety of reasons for that.  You might consider instead reading your data in smaller chunks at a time, which <code>fitsio</code> is better at, or as I suggested earlier not using FITS for such large data."}], "tags": [], "owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "is_accepted": false, "score": 4, "last_activity_date": 1456993827, "creation_date": 1456993827, "answer_id": 35766899, "question_id": 35759713, "link": "https://stackoverflow.com/questions/35759713/astropy-io-fits-read-row-from-large-fits-file-with-mutliple-hdus/35766899#35766899", "title": "astropy.io.fits read row from large fits file with mutliple HDUs", "body": "<p>It looks like you've run across this issue: <a href=\"https://github.com/astropy/astropy/issues/1380\" rel=\"nofollow\">https://github.com/astropy/astropy/issues/1380</a></p>\n\n<p>The problem here is that even though it's using mmap, it's using mmap in copy-on-write mode which means your system needs to be able to allocate a large enough virtual memory area that <em>in principle</em> can hold as much data as the size of the mmap, in case you write data back to the mmap.</p>\n\n<p>If you pass <code>mode='denywrite'</code> to <code>fits.open()</code> it should work.  Any attempt to <em>modify</em> the array will result in an error, but that's fine if all you want to do is read the data.</p>\n\n<p>If you still can't get that to work you might also try the <a href=\"https://github.com/esheldon/fitsio\" rel=\"nofollow\">fitsio</a> module which has better support for reading files in smaller chunks.</p>\n"}], "owner": {"reputation": 233, "user_id": 4718101, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59fedbbbe497d3c80c0d47dd7d97bea3?s=128&d=identicon&r=PG&f=1", "display_name": "MaxG", "link": "https://stackoverflow.com/users/4718101/maxg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1008, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1457003330, "creation_date": 1456958696, "last_edit_date": 1457003330, "question_id": 35759713, "link": "https://stackoverflow.com/questions/35759713/astropy-io-fits-read-row-from-large-fits-file-with-mutliple-hdus", "title": "astropy.io.fits read row from large fits file with mutliple HDUs", "body": "<p>I have a fits file with ~50GB, containing multiple HDUs, which all have the same format: an (1E5 x 1E6) array with 1E5 objects and 1E6 time stamps. The HDUs describe different physical properties such as Flux, RA, DEC etc. I want to read just 5 objects from each HDU (i.e. an (5 x 1E6) array). </p>\n\n<p>python 2.7, \nastropy 1.0.3, \nlinux x86_64</p>\n\n<p>I so far tried a lot of suggestions I found, but nothing worked. My best approach is still:</p>\n\n<pre><code>#the five objects I want to read out\nobj_list = ['Star1','Star15','Star700','Star2000','Star5000'] \ndic = {}\n\nwith fits.open(fname, memmap=True, do_not_scale_image_data=True) as hdulist:\n\n    # There is a special HDU 'OBJECTS' which is an (1E5 x 1) array and contains the info which index in the fits file corresponds to which object.\n\n    # First, get the indices of the rows that describe the objects in the fits file (not necessarily in order!)\n    ind_objs = np.in1d(hdulist['OBJECTS'].data, obj_list, assume_unique=True).nonzero()[0] #indices of the candidates     \n\n    # Second, read out the 5 object's time series\n    dic['FLUX'] = hdulist['FLUX'].data[ind_objs] # (5 x 1E6) array\n    dic['RA'] = hdulist['RA'].data[ind_objs] # (5 x 1E6) array\n    dic['DEC'] = hdulist['DEC'].data[ind_objs] # (5 x 1E6) array\n</code></pre>\n\n<p>This code works well and fast for fits files up to ~20 GB, but runs out of memory for bigger ones (larger files only contain more objects, not more time stamps). I do not understand why though - astropy.io.fits intrinsically uses mmap and should only load the (5x1E6) arrays into memory as far as I understand? So independent on the file size, what I want to read out always has the same size.</p>\n\n<p>Edit - This is the error message:</p>\n\n<pre><code>  dic['RA'] = hdulist['RA'].data[ind_objs] # (5 x 1E6) array\nFile \"/usr/local/python/lib/python2.7/site-packages/astropy-1.0.3-py2.7-linux-x86_64.egg/astropy/utils/decorators.py\", line 341, in __get__\n  val = self._fget(obj)\nFile \"/usr/local/python/lib/python2.7/site-packages/astropy-1.0.3-py2.7-linux-x86_64.egg/astropy/io/fits/hdu/image.py\", line 239, in data\n  data = self._get_scaled_image_data(self._data_offset, self.shape)\nFile \"/usr/local/python/lib/python2.7/site-packages/astropy-1.0.3-py2.7-linux-x86_64.egg/astropy/io/fits/hdu/image.py\", line 585, in _get_scaled_image_data\n  raw_data = self._get_raw_data(shape, code, offset)\nFile \"/usr/local/python/lib/python2.7/site-packages/astropy-1.0.3-py2.7-linux-x86_64.egg/astropy/io/fits/hdu/base.py\", line 523, in _get_raw_data\n  return self._file.readarray(offset=offset, dtype=code, shape=shape)\nFile \"/usr/local/python/lib/python2.7/site-packages/astropy-1.0.3-py2.7-linux-x86_64.egg/astropy/io/fits/file.py\", line 248, in readarray\n  shape=shape).view(np.ndarray)\nFile \"/usr/local/python/lib/python2.7/site-packages/numpy/core/memmap.py\", line 254, in __new__\n  mm = mmap.mmap(fid.fileno(), bytes, access=acc, offset=start)\nmmap.error: [Errno 12] Cannot allocate memory\n</code></pre>\n\n<p>Edit 2:\nThanks, I now included the suggestions, it enables me to handle a fits file up to 50GB. New code:</p>\n\n<pre><code>#the five objects I want to read out\nobj_list = ['Star1','Star15','Star700','Star2000','Star5000'] \ndic = {}\n\nwith fits.open(fname, mode='denywrite', memmap=True, do_not_scale_image_data=True) as hdulist:\n\n    # There is a special HDU 'OBJECTS' which is an (1E5 x 1) array and contains the info which index in the fits file corresponds to which object.\n\n    # First, get the indices of the rows that describe the objects in the fits file (not necessarily in order!)\n    ind_objs = np.in1d(hdulist['OBJECTS'].data, obj_list, assume_unique=True).nonzero()[0] #indices of the candidates     \n\n    # Second, read out the 5 object's time series\n    dic['FLUX'] = hdulist['FLUX'].data[ind_objs] # (5 x 1E6) array\n    del hdulist['FLUX'].data\n    dic['RA'] = hdulist['RA'].data[ind_objs] # (5 x 1E6) array\n    del hdulist['RA'].data\n    dic['DEC'] = hdulist['DEC'].data[ind_objs] # (5 x 1E6) array\n    del hdulist['DEC'].data\n</code></pre>\n\n<p>The</p>\n\n<pre><code>mode='denywrite'\n</code></pre>\n\n<p>did not cause any change.</p>\n\n<pre><code>memmap=True \n</code></pre>\n\n<p>is indeed not the default and needs to be set manually.</p>\n\n<pre><code>del hdulist['FLUX'].data \n</code></pre>\n\n<p>etc now allows me to read 50GB instead of 20GB files</p>\n\n<p>New issue:\nAnything larger than 50GB still causes the same memory error - now, however, directly in the first line.</p>\n\n<pre><code>dic['FLUX'] = hdulist['FLUX'].data[ind_objs] # (5 x 1E6) array\n</code></pre>\n"}, {"tags": ["python", "csv", "search", "dictionary", "search-engine"], "comments": [{"owner": {"reputation": 2233, "user_id": 3342430, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/a9gqW.jpg?s=128&g=1", "display_name": "freddiev4", "link": "https://stackoverflow.com/users/3342430/freddiev4"}, "edited": false, "score": 0, "creation_date": 1456958860, "post_id": 35759692, "comment_id": 59192752, "body": "Have you tried memory mapping or using a SQL database?"}, {"owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "reply_to_user": {"reputation": 2233, "user_id": 3342430, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/a9gqW.jpg?s=128&g=1", "display_name": "freddiev4", "link": "https://stackoverflow.com/users/3342430/freddiev4"}, "edited": false, "score": 0, "creation_date": 1456958924, "post_id": 35759692, "comment_id": 59192779, "body": "No! I&#39;m not at all familiar with DB options."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1456959078, "post_id": 35759692, "comment_id": 59192853, "body": "how are you going to search? do you know in which column to search or do you want to search for text in all columns (like in text file)?"}, {"owner": {"reputation": 2233, "user_id": 3342430, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/a9gqW.jpg?s=128&g=1", "display_name": "freddiev4", "link": "https://stackoverflow.com/users/3342430/freddiev4"}, "edited": false, "score": 0, "creation_date": 1456959096, "post_id": 35759692, "comment_id": 59192859, "body": "You could try to use a <a href=\"https://www.sqlite.org/docs.html\" rel=\"nofollow noreferrer\">sqlite</a> database by storing the rows/columns within tables and just use the <code>sqlite3</code> Python module to search through your data, or just use the <code>Pandas</code> module (which is probably easiest?)"}, {"owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1456959208, "post_id": 35759692, "comment_id": 59192910, "body": "@MaxU I know which column to search but not which row."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1456959554, "post_id": 35759692, "comment_id": 59193063, "body": "then try pandas.read_csv() as Mark proposed."}], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1456959303, "post_id": 35759808, "comment_id": 59192960, "body": "I&#39;ve tried using the built-in CSV read module but like I hinted in the question it takes way too long!"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1456960692, "post_id": 35759808, "comment_id": 59193499, "body": "++ for the link to pd.searchsorted() - i didn&#39;t know that."}], "tags": [], "owner": {"reputation": 309, "user_id": 4938264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58dcfa1e8cfa28775ecc6c283608dfb1?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/4938264/mark"}, "is_accepted": false, "score": 3, "last_activity_date": 1456959610, "last_edit_date": 1495540230, "creation_date": 1456959096, "answer_id": 35759808, "question_id": 35759692, "link": "https://stackoverflow.com/questions/35759692/how-can-i-index-a-csv-file-to-search-efficiently/35759808#35759808", "title": "How Can I Index a CSV File to Search Efficiently?", "body": "<p>The <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html\" rel=\"nofollow noreferrer\"><code>pandas.read_csv</code></a> function makes it fairly easy. Python does have <a href=\"https://docs.python.org/3.5/library/csv.html\" rel=\"nofollow noreferrer\">csv reading/writing functions</a> too.</p>\n\n<p>Update: Here is <a href=\"https://stackoverflow.com/a/16403590/4938264\">a link to a post</a> from the <code>pandas</code> creator on fast searching in <code>pandas</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1456959606, "post_id": 35759904, "comment_id": 59193083, "body": "How would I load the CSV file into a SQLite file?"}, {"owner": {"reputation": 849, "user_id": 5848375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kliTJ.png?s=128&g=1", "display_name": "mhopeng", "link": "https://stackoverflow.com/users/5848375/mhopeng"}, "reply_to_user": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1456972549, "post_id": 35759904, "comment_id": 59197126, "body": "A tutorial on SQLite is out of scope for an SO question... But such tutorials are easy to find. Install SQLite and try it out, you&#39;ll have your solution going in a couple hours."}], "tags": [], "owner": {"reputation": 849, "user_id": 5848375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kliTJ.png?s=128&g=1", "display_name": "mhopeng", "link": "https://stackoverflow.com/users/5848375/mhopeng"}, "is_accepted": false, "score": 2, "last_activity_date": 1456959548, "creation_date": 1456959548, "answer_id": 35759904, "question_id": 35759692, "link": "https://stackoverflow.com/questions/35759692/how-can-i-index-a-csv-file-to-search-efficiently/35759904#35759904", "title": "How Can I Index a CSV File to Search Efficiently?", "body": "<p>If I was doing something like this, I would load the cvs file into an <a href=\"https://www.sqlite.org\" rel=\"nofollow\">SQLite</a> database file and then use the python bindings for SQLite to search the data. SQLite is free and widely used, so you can easily find support, code snippets, etc. This approach does require some basic database concepts, mostly simple SQL statements.</p>\n"}, {"comments": [{"owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "edited": false, "score": 0, "creation_date": 1457048952, "post_id": 35760151, "comment_id": 59242029, "body": "So how would I search for a string in the whole csv?"}], "tags": [], "owner": {"reputation": 899, "user_id": 5479963, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a26507901c8098980ce0c330696880a7?s=128&d=identicon&r=PG", "display_name": "mptevsion", "link": "https://stackoverflow.com/users/5479963/mptevsion"}, "is_accepted": true, "score": 3, "last_activity_date": 1456961881, "last_edit_date": 1456961881, "creation_date": 1456960604, "answer_id": 35760151, "question_id": 35759692, "link": "https://stackoverflow.com/questions/35759692/how-can-i-index-a-csv-file-to-search-efficiently/35760151#35760151", "title": "How Can I Index a CSV File to Search Efficiently?", "body": "<p>Assuming you can store the whole thing in RAM (i.e load it) I would use pandas.</p>\n\n<pre><code>import pandas as pd\ncsv_loc = 'C:/yourcsv.csv'\ndf = pd.read_csv(csv_loc, sep=',', header=0) #http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html\ndf['name'] # would select a column called name\n# This would show observations which start with STARBUC\nmatch = df['name'].str.contains('(^STARBUC)')\nprint(df['name'][match].value_counts())\n</code></pre>\n\n<p>Etc. <a href=\"http://pandas.pydata.org/pandas-docs/stable/10min.html\" rel=\"nofollow\">This is a great tutorial</a> <a href=\"https://plot.ly/python/big-data-analytics-with-pandas-and-sqlite/\" rel=\"nofollow\">and this</a></p>\n"}], "owner": {"reputation": 370, "user_id": 4335253, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6TrTI.jpg?s=128&g=1", "display_name": "Soroush Ghodsi", "link": "https://stackoverflow.com/users/4335253/soroush-ghodsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6698, "favorite_count": 0, "accepted_answer_id": 35760151, "answer_count": 3, "score": 2, "last_activity_date": 1456961881, "creation_date": 1456958617, "question_id": 35759692, "link": "https://stackoverflow.com/questions/35759692/how-can-i-index-a-csv-file-to-search-efficiently", "title": "How Can I Index a CSV File to Search Efficiently?", "body": "<p>I have a CSV file with over 400k rows and about 20 columns so it takes too much time for me to search the CSV when I'm looking for a certain value. I was wondering how I could map the file so that I can search it efficiently and quickly for a certain value. </p>\n\n<p>Thank you in advance! I'm happy to answer any questions!</p>\n"}, {"tags": ["python", "text-mining", "textblob"], "answers": [{"tags": [], "owner": {"reputation": 777, "user_id": 5208649, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-U-8kGHX2zU8/AAAAAAAAAAI/AAAAAAAAACM/XzOgIgrJ7pw/photo.jpg?sz=128", "display_name": "Shiv Shankar", "link": "https://stackoverflow.com/users/5208649/shiv-shankar"}, "is_accepted": true, "score": 1, "last_activity_date": 1457938319, "creation_date": 1457938319, "answer_id": 35981202, "question_id": 35759673, "link": "https://stackoverflow.com/questions/35759673/is-there-any-feature-of-textblob-to-obtain-neutral-classification/35981202#35981202", "title": "Is there any feature of TextBlob to obtain neutral classification?", "body": "<p>I am using If else Statement for this : \nlike</p>\n\n<pre><code>from textblob import TextBlob\nfrom textblob.sentiments import NaiveBayesAnalyzer\n\nblob = TextBlob(message, analyzer=NaiveBayesAnalyzer())\na = (blob.sentiment)\nif a.__getattribute__(\"p_pos\") &gt; a.__getattribute__(\"p_neg\"):\n    tag = str(a.__getattribute__(\"classification\"))\n    sentiment = str(a.__getattribute__(\"p_pos\"))\nelif a.__getattribute__(\"p_pos\") &lt; a.__getattribute__(\"p_neg\"):\n    tag = str(a.__getattribute__(\"classification\"))\n    sentiment = str(a.__getattribute__(\"p_neg\"))\nelse:\n    tag = \"N\"\n    sentiment = \"0\"\n</code></pre>\n\n<p>If their is neutral sentence, p_pos and p_neg will be equal!</p>\n\n<p>This works for me!!!\nHope it works for you</p>\n"}], "owner": {"reputation": 7, "user_id": 3918551, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/56d41ecac60a71ed138e71e564acb76d?s=128&d=identicon&r=PG&f=1", "display_name": "Pca", "link": "https://stackoverflow.com/users/3918551/pca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 35981202, "answer_count": 1, "score": 0, "last_activity_date": 1457938319, "creation_date": 1456958536, "question_id": 35759673, "link": "https://stackoverflow.com/questions/35759673/is-there-any-feature-of-textblob-to-obtain-neutral-classification", "title": "Is there any feature of TextBlob to obtain neutral classification?", "body": "<p>I am interested in building a text classifier using textBlob but from my research does not look like after you train the classifier to return neutral tags. Does anyone know a way to implement this ? Or is there a similar library which provides neutral classification ? Thank you.</p>\n"}, {"tags": ["python", "windows", "python-2.7"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 2634353, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jBBSA.jpg?s=128&g=1", "display_name": "Max", "link": "https://stackoverflow.com/users/2634353/max"}, "edited": false, "score": 0, "creation_date": 1457136382, "post_id": 35784123, "comment_id": 59285888, "body": "I appreciate you replying to my question, but I did find these resources before I asked the question. I wasn&#39;t trying to use stackoverflow as Google. If I were asked the counterpart for Java, I could give a very detailed answer to setting up Java in Windows multiple ways. But I need Python."}], "tags": [], "owner": {"reputation": 8602, "user_id": 5936628, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/67edb9182ec767573ef95539c533b0a9?s=128&d=identicon&r=PG&f=1", "display_name": "Anil_M", "link": "https://stackoverflow.com/users/5936628/anil-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1457043198, "creation_date": 1457043198, "answer_id": 35784123, "question_id": 35759635, "link": "https://stackoverflow.com/questions/35759635/how-to-add-a-library-to-an-existing-python-distribution-bundled-with-a-program/35784123#35784123", "title": "How to add a library to an existing Python distribution bundled with a program?", "body": "<p><code>I do not have enough points to comment hence writing in ANSWER section</code></p>\n\n<p>If you want libiconv , then you can follow install direction <a href=\"http://gnu.org/software/libiconv/\" rel=\"nofollow\">here</a>.<br>\nIt seems to be a dependency on mingw64 compiler that may be part of distribution you are trying to download. </p>\n\n<p>An alternate solution may be as follows,</p>\n\n<p>Install plain python from <a href=\"https://www.python.org/downloads/windows/\" rel=\"nofollow\">here</a><br>\nIt will install most of the needed modules and its an MSI installer hence installation should be seamless.    </p>\n\n<p>Install pip for python from <a href=\"https://pip.pypa.io/en/stable/installing/\" rel=\"nofollow\">here</a><br>\nOnce pip is installed , you can install any needed modules simply by running following on command prompt or on windows power shell.<br>\n<code>pip install &lt;module_namer&gt;</code><br>\nfor eg.<br>\n<code>pip install pyaudio</code><br>\nwhere pyaudio is a needed module.  </p>\n"}], "owner": {"reputation": 89, "user_id": 2634353, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jBBSA.jpg?s=128&g=1", "display_name": "Max", "link": "https://stackoverflow.com/users/2634353/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1457043198, "creation_date": 1456958368, "last_edit_date": 1456959366, "question_id": 35759635, "link": "https://stackoverflow.com/questions/35759635/how-to-add-a-library-to-an-existing-python-distribution-bundled-with-a-program", "title": "How to add a library to an existing Python distribution bundled with a program?", "body": "<p>I am a user of a program written in Python and have limited knowledge over the development side of Python. The problem I have is that under Windows, I got this error every now and then:</p>\n\n<pre><code>INFO - [Mar 03 09:00:41] GAE \"GET https://inbox.google.com/\" appid='someappid' SSLError('The read operation timed out',), retry...\n----------------------------------------\nException happened during processing of request from ('10.1.21.66', 51549)\nTraceback (most recent call last):\n  File \"C:\\goagent-3.2.3\\local\\python27.zip\\SocketServer.py\", line 595, in process_request_thread\n  File \"C:\\goagent-3.2.3\\local\\proxylib.py\", line 934, in finish_request\n  File \"proxy.py\", line 761, in __init__\n  File \"C:\\goagent-3.2.3\\local\\python27.zip\\SocketServer.py\", line 651, in __init__\n  File \"C:\\goagent-3.2.3\\local\\python27.zip\\BaseHTTPServer.py\", line 340, in handle\n  File \"C:\\goagent-3.2.3\\local\\proxylib.py\", line 2296, in handle_one_request\n  File \"C:\\goagent-3.2.3\\local\\python27.zip\\BaseHTTPServer.py\", line 328, in handle_one_request\n  File \"C:\\goagent-3.2.3\\local\\proxylib.py\", line 2327, in do_METHOD\n  File \"C:\\goagent-3.2.3\\local\\proxylib.py\", line 1031, in handle\n  File \"C:\\goagent-3.2.3\\local\\proxylib.py\", line 2327, in do_METHOD\n  File \"proxy.py\", line 452, in handle\n  File \"proxy.py\", line 452, in &lt;genexpr&gt;\nLookupError: unknown encoding: cp1252\n</code></pre>\n\n<p>I've done some research and it seems the Python installation is missing libiconv. Now the program I am using is actually goagent (<a href=\"https://github.com/goagent/goagent\" rel=\"nofollow\">https://github.com/goagent/goagent</a>). The distribution contains Python 2.7 in the form of python27.exe, python27.zip and several .py files seemingly purely to support the functionality of the program (proxy) - addto-startup.py, dnsproxy.py, goagent-gtk.py, proxy.py, proxylib.py. I did not install Python myself, and python is not directly executable under command line.</p>\n\n<p>How do make this bundled Python load libiconv? Please also point me to the right place to download libiconv for this scenario.</p>\n"}, {"tags": ["python", "matplotlib", "alpha", "matplotlib-basemap"], "answers": [{"comments": [{"owner": {"reputation": 3480, "user_id": 1764129, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2b842351820ae0b23c96d398ddff1f0e?s=128&d=identicon&r=PG", "display_name": "p-robot", "link": "https://stackoverflow.com/users/1764129/p-robot"}, "edited": false, "score": 0, "creation_date": 1456997167, "post_id": 35761549, "comment_id": 59207900, "body": "This does not work for me.  The alpha values are unchanged.  For instance, try setting them to 1:  <code>pts = map.scatter(x[0], y[0], c =&#39;b&#39;, marker = &#39;o&#39;, s = 80, alpha = 1)</code> <code>pts = map.scatter(x[1], y[1], c =&#39;g&#39;, marker = &#39;o&#39;, s = 80, alpha = 1)</code> <code>pts = map.scatter(x[2], y[2], c =&#39;r&#39;, marker = &#39;o&#39;, s = 80, alpha = 1)</code>"}, {"owner": {"reputation": 461, "user_id": 5363570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b4f099d13fa727236308deeafaa334f?s=128&d=identicon&r=PG&f=1", "display_name": "BChow", "link": "https://stackoverflow.com/users/5363570/bchow"}, "reply_to_user": {"reputation": 3480, "user_id": 1764129, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2b842351820ae0b23c96d398ddff1f0e?s=128&d=identicon&r=PG", "display_name": "p-robot", "link": "https://stackoverflow.com/users/1764129/p-robot"}, "edited": false, "score": 0, "creation_date": 1457016093, "post_id": 35761549, "comment_id": 59221720, "body": "What about setting them to 1? Using alpha=1, it looks like figure 1 now."}, {"owner": {"reputation": 3480, "user_id": 1764129, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2b842351820ae0b23c96d398ddff1f0e?s=128&d=identicon&r=PG", "display_name": "p-robot", "link": "https://stackoverflow.com/users/1764129/p-robot"}, "edited": false, "score": 0, "creation_date": 1457023174, "post_id": 35761549, "comment_id": 59227509, "body": "Thanks.  However, with alpha=1 you can still see the coast line underneath, so it&#39;s not really alpha=1.  I&#39;d like the points to have different alpha values too."}], "tags": [], "owner": {"reputation": 461, "user_id": 5363570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b4f099d13fa727236308deeafaa334f?s=128&d=identicon&r=PG&f=1", "display_name": "BChow", "link": "https://stackoverflow.com/users/5363570/bchow"}, "is_accepted": false, "score": 0, "last_activity_date": 1456969138, "creation_date": 1456969138, "answer_id": 35761549, "question_id": 35759581, "link": "https://stackoverflow.com/questions/35759581/get-working-alpha-value-of-scatter-points-in-mpl-toolkits-basemap-basemap/35761549#35761549", "title": "Get working alpha value of scatter points in mpl_toolkits.basemap.Basemap", "body": "<p>It's not clear if you can set the alpha value for each point separately but if you use multiple plot command it works.</p>\n\n<pre><code>pts = bmap.scatter(x[0], y[0], c ='b', marker = 'o', s = 80, alpha = 0.7)\npts = bmap.scatter(x[1], y[1], c ='g', marker = 'o', s = 80, alpha = 0.3)  \npts = bmap.scatter(x[2], y[2], c ='r', marker = 'o', s = 80, alpha = 0.5)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/SOcv8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SOcv8.png\" alt=\"Map with different alpha values\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 3480, "user_id": 1764129, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2b842351820ae0b23c96d398ddff1f0e?s=128&d=identicon&r=PG", "display_name": "p-robot", "link": "https://stackoverflow.com/users/1764129/p-robot"}, "is_accepted": true, "score": 0, "last_activity_date": 1457718762, "creation_date": 1457718762, "answer_id": 35946781, "question_id": 35759581, "link": "https://stackoverflow.com/questions/35759581/get-working-alpha-value-of-scatter-points-in-mpl-toolkits-basemap-basemap/35946781#35946781", "title": "Get working alpha value of scatter points in mpl_toolkits.basemap.Basemap", "body": "<p>So, <a href=\"https://github.com/matplotlib/basemap/issues/276\" rel=\"nofollow noreferrer\">after posting this as an issue on github</a>, it seems alpha values can be updated if you do not set the alpha value in the first place.  </p>\n\n<pre><code>from mpl_toolkits.basemap import Basemap\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport matplotlib\nmatplotlib.interactive(True)\n\nfig, ax = plt.subplots()\n\nmap = Basemap(projection='merc', lat_0 = 57, lon_0 = -135,\n    resolution = 'i', area_thresh = 0.1,\n    llcrnrlon=-136.25, llcrnrlat=56.0,\n    urcrnrlon=-134.25, urcrnrlat=57.75)\n\nmap.drawcoastlines(zorder = 0)\nmap.drawcountries(zorder = 0)\nmap.fillcontinents(color = 'lightgray', zorder = 0)\nmap.drawmapboundary(zorder = 0)\n\nlons = [-135.3318, -134.8331, -134.6572]\nlats = [57.0799, 57.0894, 56.2399]\nx,y = map(lons, lats)\npts = map.scatter(x, y, c ='r', marker = 'o', s = 600)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/LgRtr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LgRtr.png\" alt=\"figure 1\"></a></p>\n\n<p>And these alpha values can be updated by using <code>set_facecolor</code>, like so: </p>\n\n<pre><code>pts.set_facecolor([(0.7, 0.3, 0.3, 1.0), (1, 0.0, 1, 0.5), (1.0, 1.0, 0.2, 0.2)])\nfig.canvas.draw()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/7e8PJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7e8PJ.png\" alt=\"figure 2\"></a></p>\n"}], "owner": {"reputation": 3480, "user_id": 1764129, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2b842351820ae0b23c96d398ddff1f0e?s=128&d=identicon&r=PG", "display_name": "p-robot", "link": "https://stackoverflow.com/users/1764129/p-robot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 0, "accepted_answer_id": 35946781, "answer_count": 2, "score": 1, "last_activity_date": 1457718762, "creation_date": 1456958176, "question_id": 35759581, "link": "https://stackoverflow.com/questions/35759581/get-working-alpha-value-of-scatter-points-in-mpl-toolkits-basemap-basemap", "title": "Get working alpha value of scatter points in mpl_toolkits.basemap.Basemap", "body": "<p>Building upon an example from <a href=\"https://peak5390.wordpress.com/2012/12/08/matplotlib-basemap-tutorial-plotting-points-on-a-simple-map/\" rel=\"nofollow noreferrer\">here</a>, I'd like to plot points on a map with different alpha values as well as different facecolors (I plan to update them).  However, the alpha values do not seem to update (they seem ignored in the first place too).  </p>\n\n<p>First, create a map and plot three points, as per the example:</p>\n\n<pre><code>from mpl_toolkits.basemap import Basemap\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nfig, ax = plt.subplots()\n\nmap = Basemap(projection='merc', lat_0 = 57, lon_0 = -135,\n    resolution = 'h', area_thresh = 0.1,\n    llcrnrlon=-136.25, llcrnrlat=56.0,\n    urcrnrlon=-134.25, urcrnrlat=57.75)\n\nmap.drawcoastlines()\nmap.drawcountries()\nmap.fillcontinents(color = 'lightgray', zorder = 0)\nmap.drawmapboundary()\n\nlons = [-135.3318, -134.8331, -134.6572]\nlats = [57.0799, 57.0894, 56.2399]\nx,y = map(lons, lats)\npts = map.scatter(x, y, c ='r', marker = 'o', s = 80, alpha = 1.0)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/oT04d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oT04d.png\" alt=\"First figure\"></a></p>\n\n<p>Then update the facecolors with new rgba values.  </p>\n\n<pre><code>pts.set_facecolor([(0.7, 0.3, 0.3, 1.0), (1, 0.0, 1, 0.5), (1.0, 1.0, 0.2, 0.2)])\nfig.canvas.draw()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/6DzdJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6DzdJ.png\" alt=\"Second figure\"></a></p>\n\n<p>The colors update but the alpha values do not plot correctly.  I've tried using <code>pts.set_alpha</code> also but this doesn't allow a list as an argument.  </p>\n"}, {"tags": ["python", "pycharm"], "comments": [{"owner": {"reputation": 1327, "user_id": 1771644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QXOfw.png?s=128&g=1", "display_name": "Michal Frystacky", "link": "https://stackoverflow.com/users/1771644/michal-frystacky"}, "edited": false, "score": 0, "creation_date": 1456958201, "post_id": 35759566, "comment_id": 59192456, "body": "Doesn&#39;t spell check already do this?"}, {"owner": {"reputation": 1897, "user_id": 685808, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2d6a0a7fea57e048864abff92e2f2918?s=128&d=identicon&r=PG", "display_name": "Michael Korbakov", "link": "https://stackoverflow.com/users/685808/michael-korbakov"}, "reply_to_user": {"reputation": 1327, "user_id": 1771644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QXOfw.png?s=128&g=1", "display_name": "Michal Frystacky", "link": "https://stackoverflow.com/users/1771644/michal-frystacky"}, "edited": false, "score": 1, "creation_date": 1456958452, "post_id": 35759566, "comment_id": 59192572, "body": "Spellcheck would not work if it&#39;s a reference to our own class with weird name. It&#39;s also easy to confuse names like <code>ISomeInterface</code> and <code>SomeInterface</code>, while both are spelled correctly. Fully qualified references to classes would be broken after moving class to other package but still fine from spellchecker&#39;s point of view."}, {"owner": {"reputation": 1327, "user_id": 1771644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QXOfw.png?s=128&g=1", "display_name": "Michal Frystacky", "link": "https://stackoverflow.com/users/1771644/michal-frystacky"}, "edited": false, "score": 0, "creation_date": 1456958584, "post_id": 35759566, "comment_id": 59192638, "body": "You are correct. For such an example or more complicated examples you would need pycharm&#39;s type inference/validation check within the doc strings."}], "answers": [{"comments": [{"owner": {"reputation": 1897, "user_id": 685808, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2d6a0a7fea57e048864abff92e2f2918?s=128&d=identicon&r=PG", "display_name": "Michael Korbakov", "link": "https://stackoverflow.com/users/685808/michael-korbakov"}, "edited": false, "score": 0, "creation_date": 1462898779, "post_id": 37144384, "comment_id": 61827062, "body": "I&#39;m using 2016.1. Sure, PyCharm highlights misspelled variables and classes, but only in code, not in docstrings. Unfortunately types mentioned in docstrings are not validated."}, {"owner": {"reputation": 1978, "user_id": 4179570, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7rqjc.jpg?s=128&g=1", "display_name": "glls", "link": "https://stackoverflow.com/users/4179570/glls"}, "reply_to_user": {"reputation": 1897, "user_id": 685808, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2d6a0a7fea57e048864abff92e2f2918?s=128&d=identicon&r=PG", "display_name": "Michael Korbakov", "link": "https://stackoverflow.com/users/685808/michael-korbakov"}, "edited": false, "score": 0, "creation_date": 1462899034, "post_id": 37144384, "comment_id": 61827207, "body": "maybe you can check on their community directly <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/topics/200379535-PyCharm\" rel=\"nofollow noreferrer\">intellij-support.jetbrains.com/hc/en-us/community/topics/&hellip;</a>  and share the answer with all of us once they have replied =)   i use pycharm a lot and find this of interest"}, {"owner": {"reputation": 1897, "user_id": 685808, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2d6a0a7fea57e048864abff92e2f2918?s=128&d=identicon&r=PG", "display_name": "Michael Korbakov", "link": "https://stackoverflow.com/users/685808/michael-korbakov"}, "edited": false, "score": 0, "creation_date": 1462899605, "post_id": 37144384, "comment_id": 61827508, "body": "Good idea. Here is the link to follow: <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/207418215-Is-it-possible-to-highlight-incorrect-type-references-in-docstring-in-PyCharm-\" rel=\"nofollow noreferrer\">intellij-support.jetbrains.com/hc/en-us/community/posts/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1978, "user_id": 4179570, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7rqjc.jpg?s=128&g=1", "display_name": "glls", "link": "https://stackoverflow.com/users/4179570/glls"}, "is_accepted": false, "score": 0, "last_activity_date": 1462898501, "creation_date": 1462898501, "answer_id": 37144384, "question_id": 35759566, "link": "https://stackoverflow.com/questions/35759566/is-it-possible-to-highlight-incorrect-type-references-in-docstring-in-pycharm/37144384#37144384", "title": "Is it possible to highlight incorrect type references in docstring in PyCharm", "body": "<p>not sure if this is helpful for you, but i was unable to add it as a comment due to my reputation points</p>\n\n<p><a href=\"https://www.jetbrains.com/help/pycharm/2016.1/using-docstrings-to-specify-types.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/pycharm/2016.1/using-docstrings-to-specify-types.html</a></p>\n\n<p>additionally, when a class is misspelled or variable, etc etc, i believe it is highlighted?<a href=\"https://i.stack.imgur.com/USTBc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/USTBc.png\" alt=\"enter image description here\"></a></p>\n\n<p>what version of pycharm are you using?</p>\n"}], "owner": {"reputation": 1897, "user_id": 685808, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2d6a0a7fea57e048864abff92e2f2918?s=128&d=identicon&r=PG", "display_name": "Michael Korbakov", "link": "https://stackoverflow.com/users/685808/michael-korbakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1462898501, "creation_date": 1456958145, "question_id": 35759566, "link": "https://stackoverflow.com/questions/35759566/is-it-possible-to-highlight-incorrect-type-references-in-docstring-in-pycharm", "title": "Is it possible to highlight incorrect type references in docstring in PyCharm", "body": "<p>PyCharm type hinting is great. We use it widely in our projects. But time to time type names in method docstrings get misspelled and some bugs that could have been warned about by PyCharm at development time are missed.</p>\n\n<p>Is it possible to make PyCharm warn me about incorrect type reference in parameter type in docstring? For example if I make a typo like <code>:type num: lomg</code> instead of <code>:type num: long</code> I want <code>lomg</code> to be highlighted as a warning.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 1, "creation_date": 1456957911, "post_id": 35759470, "comment_id": 59192321, "body": "Please fix your indentation and strip everything from that wall of text that does not belong to the problem."}, {"owner": {"reputation": 2623, "user_id": 3697163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/611ce881510094605af96f479d2c0472?s=128&d=identicon&r=PG&f=1", "display_name": "DaveBensonPhillips", "link": "https://stackoverflow.com/users/3697163/davebensonphillips"}, "edited": false, "score": 1, "creation_date": 1456958017, "post_id": 35759470, "comment_id": 59192370, "body": "You need to tell us what you&#39;re actually trying to do (and NOT what your homework problem is). What happens when you run the program?"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1456958024, "post_id": 35759470, "comment_id": 59192374, "body": "If you&#39;re getting an exception, we really need to see the full traceback of the exception. (We probably don&#39;t need to know the assignment at all.)"}, {"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1456958153, "post_id": 35759470, "comment_id": 59192441, "body": "This is too much information, can you cut this down to just the parts of the problem that are related?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1456958485, "post_id": 35759470, "comment_id": 59192589, "body": "What line does the error occur on?"}, {"owner": {"reputation": 17, "user_id": 6005711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b057d80ebb5484e91188006c3e0478c1?s=128&d=identicon&r=PG&f=1", "display_name": "Dinoman979", "link": "https://stackoverflow.com/users/6005711/dinoman979"}, "edited": false, "score": 0, "creation_date": 1456958693, "post_id": 35759470, "comment_id": 59192680, "body": "Because of the feedback, I attempted this question to be more specific. The traceback is added as well. Thanks for the input so far"}, {"owner": {"reputation": 5493, "user_id": 328258, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/bb68408b9aaff4ac34d5f1679bc4d363?s=128&d=identicon&r=PG", "display_name": "olofom", "link": "https://stackoverflow.com/users/328258/olofom"}, "edited": false, "score": 0, "creation_date": 1456958815, "post_id": 35759470, "comment_id": 59192735, "body": "Nvm, your code is incorrectly indented so I missed something. Anyway, a regular list does not have a find method, which is also what the error is telling you. What do you want to do?"}, {"owner": {"reputation": 17, "user_id": 6005711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b057d80ebb5484e91188006c3e0478c1?s=128&d=identicon&r=PG&f=1", "display_name": "Dinoman979", "link": "https://stackoverflow.com/users/6005711/dinoman979"}, "edited": false, "score": 0, "creation_date": 1456958981, "post_id": 35759470, "comment_id": 59192817, "body": "i define yrList in findLocation. I&#39;m relatively new to programming so I may be misunderstanding a lot of this."}, {"owner": {"reputation": 5493, "user_id": 328258, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/bb68408b9aaff4ac34d5f1679bc4d363?s=128&d=identicon&r=PG", "display_name": "olofom", "link": "https://stackoverflow.com/users/328258/olofom"}, "edited": false, "score": 0, "creation_date": 1456959086, "post_id": 35759470, "comment_id": 59192855, "body": "If you&#39;re looking for the index of a value in a list you can use <code>yrList.index(year)</code>, which will either return the index of the element in the list or throw a ValueError which you&#39;ll have to catch."}, {"owner": {"reputation": 17, "user_id": 6005711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b057d80ebb5484e91188006c3e0478c1?s=128&d=identicon&r=PG&f=1", "display_name": "Dinoman979", "link": "https://stackoverflow.com/users/6005711/dinoman979"}, "edited": false, "score": 0, "creation_date": 1456959626, "post_id": 35759470, "comment_id": 59193092, "body": "Thanks! All I had to do was use yrList.index instead of yrList.find and I got the result I was looking for. I appreciate the help"}], "answers": [{"tags": [], "owner": {"reputation": 5493, "user_id": 328258, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/bb68408b9aaff4ac34d5f1679bc4d363?s=128&d=identicon&r=PG", "display_name": "olofom", "link": "https://stackoverflow.com/users/328258/olofom"}, "is_accepted": false, "score": 0, "last_activity_date": 1456960444, "creation_date": 1456960444, "answer_id": 35760116, "question_id": 35759470, "link": "https://stackoverflow.com/questions/35759470/python-files-indexerror/35760116#35760116", "title": "Python Files IndexError", "body": "<p>Writing my solution as an answer and not just a comment for future visitors:</p>\n\n<p>If you're looking for the index of a value in a list you can use <code>yrList.index(year)</code>, which will either return the index of the element in the list or throw a ValueError which you'll have to catch, instead of <code>.find</code> that does not exist.</p>\n"}], "owner": {"reputation": 17, "user_id": 6005711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b057d80ebb5484e91188006c3e0478c1?s=128&d=identicon&r=PG&f=1", "display_name": "Dinoman979", "link": "https://stackoverflow.com/users/6005711/dinoman979"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": -7, "last_activity_date": 1456960444, "creation_date": 1456957791, "last_edit_date": 1456959393, "question_id": 35759470, "link": "https://stackoverflow.com/questions/35759470/python-files-indexerror", "title": "Python Files IndexError", "body": "<p>My Code:</p>\n\n<pre><code>def readData(fname):\n    year = []\n    loc = []\n\n    with open(fname) as f:\n        for line in f.read():\n            curr_line = line.split('\\t')\n            print(curr_line)\n            year.append(curr_line[0])\n            loc.append(curr_line[1])\n\n    return (year,loc)\n\ndef findLocation(yrList,locList,year):\n   yrList = [str(yr) for yr in yrList]\n   if year not in yrList:\n       return \"Not found.\"\n   return locList[yrList.find(str(year))]\n\ndef main():\n    yr, loc = readData('olympics.txt')\n    print(yr)\n    print(loc)\n    x = input(\"Enter year: \")\n    print(findLocation(yr,loc,x))\n</code></pre>\n\n<p>After doing the main() function, it gives me this error after typing in the year</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;pyshell#0&gt;\", line 1, in &lt;module&gt;\n    main()\n  File \"C:\\Users\\MyName\\Downloads\\Homework5.py\", line 25, in main\n    print(findLocation(yr,loc,x))\n  File \"C:\\Users\\MyName\\Downloads\\Homework5.py\", line 18, in findLocation\n    return locList[yrList.find(year)]\nAttributeError: 'list' object has no attribute 'find'\n</code></pre>\n\n<p>Can somebody explain what is wrong with my code and why I get this error?</p>\n"}, {"tags": ["python", "sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "is_accepted": false, "score": 0, "last_activity_date": 1456965213, "creation_date": 1456965213, "answer_id": 35760959, "question_id": 35759463, "link": "https://stackoverflow.com/questions/35759463/sqlalchemy-how-to-keep-the-record-id-and-its-relationship-record-in-sync-for-ne/35760959#35760959", "title": "SQLAlchemy: How to keep the record ID and its relationship record in sync for new records (pre-commit)?", "body": "<p>You can do this by flushing:</p>\n\n<pre><code>conn.add(guitar)\nconn.add(name)\nconn.flush()\n</code></pre>\n\n<p>Flushing emits the <code>INSERT</code> queries but does not <code>COMMIT</code>, meaning you can <code>ROLLBACK</code> later if you need to.</p>\n"}], "owner": {"reputation": 171, "user_id": 6010118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/onrfj.png?s=128&g=1", "display_name": "Phuo", "link": "https://stackoverflow.com/users/6010118/phuo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456965213, "creation_date": 1456957755, "question_id": 35759463, "link": "https://stackoverflow.com/questions/35759463/sqlalchemy-how-to-keep-the-record-id-and-its-relationship-record-in-sync-for-ne", "title": "SQLAlchemy: How to keep the record ID and its relationship record in sync for new records (pre-commit)?", "body": "<p>When creating new records, I'd expect that foreign key fields, and their relationship object would stay in sync (if I change one the other would change to reflect), but this doesn't seem to be the case. Is this possible to do?</p>\n\n<p>Given the following:</p>\n\n<pre><code>Base = declarative_base();\n\nclass User(Base):\n    __tablename__ = 'user';\n    id = Column(Integer, primary_key=True);\n    name = Column(String);\n    fullname = Column(String);\n    password = Column(String);\n\n    equipment = relationship('Equipment', backref='user');\n\n\nclass Equipment(Base):\n    __tablename__ = 'equipment';\n    id = Column(Integer, primary_key=True);\n    user_id = Column(Integer, ForeignKey('user.id'), nullable=False);\n    name = Column(String);\n\n\nengine = create_engine('sqlite:///:memory:', echo=True);\nBase.metadata.create_all(engine);\nsession = sessionmaker(bind=engine);\nconn = session();\n\nconn.add_all([\n    User(name='bill', fullname='Bill W.', password='rlrrlrll'),       # id=1\n    User(name='tony', fullname='Tony I.', password='EADGBe'),         # id=2\n    User(name='ozzy', fullname='Ozzy O.', password='durrrr'),         # id=3\n    User(name='geezer', fullname='Terence B.', password='password'),  # id=4\n    ]);\n</code></pre>\n\n<p>I can create related records in either of the two ways:</p>\n\n<pre><code>guitar = Equipment(\n    user = conn.query(User).filter(User.name == 'tony').one(),\n    name = 'Gibson SG');\n\ndrums = Equipment(\n    user_id = 1,\n    name = 'Ludwigs');\n</code></pre>\n\n<p>Following these lines I'd expect guitar.user_id to be 2, and drums.user to be the 'bill' object, but in both cases they're None. After I conn.add()/conn.commit() then it starts working a little more like I'd expect (both complementary fields return non-None values).</p>\n\n<p>Is there any way for this to work pre-commit? I'd like to be able to construct new records either way (by ID or by object), and in library functions be able to reliably access the ID or object.</p>\n"}, {"tags": ["python", "algorithm", "colors", "interpolation", "linear-gradients"], "comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1456957970, "post_id": 35759355, "comment_id": 59192349, "body": "Beware that camera calibration is going to be a real issue. Even the same camera will vary its response due to lighting changes."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1456990548, "post_id": 35759355, "comment_id": 59203769, "body": "add the sample images and concentrations so we can see the dependence ..."}], "answers": [{"comments": [{"owner": {"reputation": 1206, "user_id": 1713185, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98ab31534547ec7d1a9090dc336dee0a?s=128&d=identicon&r=PG", "display_name": "Michael Molter", "link": "https://stackoverflow.com/users/1713185/michael-molter"}, "edited": false, "score": 0, "creation_date": 1457141314, "post_id": 35766531, "comment_id": 59287080, "body": "I will have to spend a little bit of time playing around with this. I had suspected that such a tool would already exist--either as a python library or an script for ImageJ. I guess I will have to build my own tool."}], "tags": [], "owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "is_accepted": true, "score": 2, "last_activity_date": 1456993415, "last_edit_date": 1495539905, "creation_date": 1456992598, "answer_id": 35766531, "question_id": 35759355, "link": "https://stackoverflow.com/questions/35759355/get-quantitative-value-for-color-on-two-color-scale/35766531#35766531", "title": "Get quantitative value for color on two-color scale", "body": "<ol>\n<li><p><strong>create table/function <code>RGB = f(concentration)</code></strong></p>\n\n<p>It is the opposite of what you want to do. The idea is to convert some continuous scalar variable (<code>concentration</code>) to <strong>RGB</strong> color (with some physical meaning). Here some examples of mine for this:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/22681410/2521214\">RGB values of visible spectrum</a></li>\n<li><a href=\"https://stackoverflow.com/a/22630970/2521214\">Star B-V color index to apparent RGB color</a></li>\n</ul></li>\n<li><p><strong>Camera calibration</strong></p>\n\n<p>As Mark Ransom suggested this step is necessary. I would try to place some markers in the view area to help with this. For example something like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XZkVd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XZkVd.png\" alt=\"markers\"></a></p>\n\n<p>Now pick the colors in the corner markers, compute how match they differ to your marker real colors and interpolate the whole image bilinear-ly. If you need bi-cubic (much better results) then use 16 markers. This process is very similar to this:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/31558803/2521214\">Enhancing dynamic range and normalizing illumination</a></li>\n</ul>\n\n<p>You will need to experiment what markers to use (just black&amp;white, or just green&amp;yellow or black&amp;red&amp;green&amp;blue or combinations ...) so your results will keep the same for varying light conditions. Also you have to make the dependency shots you will base the <strong>#1</strong> on again with markers because without them you could have errors in results ...</p>\n\n<p>Calibration step can be avoided only if your camera is pre-calibrated, the indicator is always the same color,material,roughness,shininess,... and the image is taken with uniformly constant illumination conditions (inside some box,same bulbs,same exposition,same pupil...) without any shadows,spots,etc... Setups like that are <strong>very expensive</strong>. The low cost hand held devices are around <strong>$10000 USD</strong> (usually used for color detection/testing in manufacturing to calibrate machines).</p></li>\n<li><p><strong>conversion <code>concentration = f(RGB)</code></strong></p>\n\n<p>If the dependency in <strong>#1</strong> is some kind of simple function then you can make its inverse algebraically and use it directly. If you construct the <strong>RGB</strong> diagrams as in the linked <strong>QA</strong>'s you will see which channel(s) to use as input (sometimes you need just one).</p>\n\n<p>If the dependency is too complicated or not a function then you can use:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/29166819/2521214\">approximation search</a></li>\n<li><strong>LUT</strong> (look up table) to find 2 closest matches and interpolate</li>\n<li><a href=\"https://stackoverflow.com/a/29227551/2521214\">Reverse complex 2D lookup table</a></li>\n</ul>\n\n<p>In case the dependency is strictly <strong>non-increasing</strong> or <strong>non-decreasing</strong> you can also use <strong>binary-search</strong> for this.</p></li>\n</ol>\n"}], "owner": {"reputation": 1206, "user_id": 1713185, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/98ab31534547ec7d1a9090dc336dee0a?s=128&d=identicon&r=PG", "display_name": "Michael Molter", "link": "https://stackoverflow.com/users/1713185/michael-molter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 35766531, "answer_count": 1, "score": -1, "last_activity_date": 1456993415, "creation_date": 1456957328, "question_id": 35759355, "link": "https://stackoverflow.com/questions/35759355/get-quantitative-value-for-color-on-two-color-scale", "title": "Get quantitative value for color on two-color scale", "body": "<p>I have run a chemical test that produces a color depending on how much of a given chemical is in the sample. It is green if there is no chemical, and yellow if there is a saturating amount of chemical. I have used my camera to take pictures of several samples, and also developed a standard curve, where I add known amounts of chemical to the test, and take pictures of the results to compare the color of the result of my sample to these standards.</p>\n\n<p>What I would like to do, is develop an algorithm that creates a two-color scale. One color is the test without any chemical (green), and the other color is the test saturated with chemical (yellow). And then when I input a sample color, the algorithm gives me a % Yellow output. </p>\n\n<p>I have seen people try to create a gradient between to colors, but never read of someone trying to place colors onto that gradient. </p>\n\n<p>I am already able to get the RGB color values of all my samples, so the actaul algorithm is fairly independent of any programming language (although I am familiar with C, C#, VBA, and python).</p>\n\n<p>Can someone point me to a resource to do what I want to do?</p>\n\n<p>Thank you,</p>\n\n<p>Michael</p>\n"}, {"tags": ["python", "audio", "modulation"], "answers": [{"tags": [], "owner": {"reputation": 68, "user_id": 5752638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dbdc3d160a5c259a186b93bd8d37c20?s=128&d=identicon&r=PG&f=1", "display_name": "Wei Yang", "link": "https://stackoverflow.com/users/5752638/wei-yang"}, "is_accepted": false, "score": 1, "last_activity_date": 1528915672, "last_edit_date": 1528915672, "creation_date": 1487274611, "answer_id": 42283334, "question_id": 35759353, "link": "https://stackoverflow.com/questions/35759353/demodulating-an-fsk-signal-in-python/42283334#42283334", "title": "Demodulating an FSK signal in Python", "body": "<p>Seems that you use multiple channles and the sound you need is embedded in one of them.</p>\n\n<p>So far I have found few problems in your scripts:</p>\n\n<ol>\n<li><p>Nyquist rate is not a half rate of your sound. It is the rate which could sample the original sound wave, and should be at least 2 times bigger than the sound sampling rate. Hence,</p>\n\n<pre><code>nyq = 0.5 * Fs\n</code></pre>\n\n<p>is wrong.</p></li>\n<li><p>If you take advantage of the noiseless sound to demodulate, then the <strong>Differentiator</strong> can be omitted.</p></li>\n<li><p>For the low-pass filter:</p>\n\n<pre><code>h = signal.firwin(numtaps = 10, cutoff = freq_range[1], nyq = nyq)\n</code></pre>\n\n<p>the <strong>cutoff</strong> frequency is your data sample rate, please read <a href=\"http://edge.rit.edu/edge/P09141/public/FSK.pdf\" rel=\"nofollow noreferrer\">this</a>. </p></li>\n<li><p><strong>filt</strong> is the final signal which can extract the specific data you desire.</p></li>\n<li><p>How to choose points in <strong>sampled_signal</strong> to recreate the original signal actually depends on the ratio between the original signal rate and the sampling rate. Just like the first link you provided, assuming the data were written in 11025 Hz and the sampling or recording rate is 44100 Hz, then the code you gave:</p>\n\n<pre><code>sampled_signal = env[Fs/Fbit/2:params[3]+1:]\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>sampled_signal = filt[Fs/Fbit*2:params[3]:Fs/Fbit*4]\n</code></pre>\n\n<p>where <strong>Fs/Fbit*2</strong> is the beginning, <strong>params[3]</strong> is the ending, <strong>Fs/Fbit*4</strong> is the step length.</p></li>\n</ol>\n\n<blockquote>\n  <p>The correct output derived from the encoding/decoding device has 8,280 raw binary (0 and 1) characters, the Python output has 1,344,786.</p>\n</blockquote>\n\n<p>It is normal, because of different sample rates, you can add some <em>special</em> characters acting like a start-sign and end-sign in you text, and try to find them, then you might find the data with correct lenght you need.</p>\n"}], "owner": {"reputation": 1601, "user_id": 5900093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac3f1e0e212aabaefe01f2eaeb4b408f?s=128&d=identicon&r=PG&f=1", "display_name": "Bird", "link": "https://stackoverflow.com/users/5900093/bird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4187, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528915672, "creation_date": 1456957315, "last_edit_date": 1459972727, "question_id": 35759353, "link": "https://stackoverflow.com/questions/35759353/demodulating-an-fsk-signal-in-python", "title": "Demodulating an FSK signal in Python", "body": "<p>I am trying to write a Python script that can demodulate an FSK modulated audio file and return the data encoded in the audio.  The data being transmitted is GPS NMEA strings which are embedded as the audio channel in video files.  Basically, text is encoded with FSK modulation, and I am trying to retrieve the text using Python.  The device I am using to encode the data can also decode it, so I have been able to generate the correct output, but I need to be able to do it using software.  </p>\n\n<p>I have done some background reading to introduce myself to signal processing and FSK, and I have looked at example scripts (e.g. <a href=\"http://www.allaboutcircuits.com/technical-articles/fsk-explained-with-python/\" rel=\"nofollow\">this one</a> and <a href=\"http://www.whence.com/minimodem/\" rel=\"nofollow\">minimodem</a>).  </p>\n\n<p>I managed to write a Python script that runs successfully, although the output is incorrect.  The correct output derived from the encoding/decoding device has 8,280 raw binary (0 and 1) characters, the Python output has 1,344,786.  I think I am missing a symbol synchronizer, but I'm not sure how this works.</p>\n\n<p>My question now is: how can I add symbol synchronization to the script and/or symbol timing?  Are there better examples or explanations of how to do FSK demodulation in Python?  I would appreciate any feedback or direction.  Thank you.<br>\nHere's my script so far:  </p>\n\n<pre><code>from scipy.io.wavfile import read\nimport numpy as np\nimport wave\nimport matplotlib.pyplot as plt\nimport scipy.signal as signal\nfrom scipy.signal import blackman, butter\nfrom scipy.fftpack import fft, rfft, rfftfreq, irfft\nimport scipy.signal.signaltools as sigtool\nimport binascii\n\n# Read in data; 'wav' allows getting paramters, 'wav1' is actual signal data\nwavfile = 'Sample4_160224_mono.wav'\nwavfile1 = open(wavfile, 'r')\nwav = wave.open(wavfile, 'r')\nwav_1 = read(wavfile1)\nparams = wav.getparams()\nN = params[3]  #Sample size\nwav1 = read(wavfile1)\nwav2 = wav1[1][0:N]\n\nduration = float(params[3] / params[2])\nn_samples = len(wav2)\nFs = params[2]\nnyq = 0.5 * Fs  #Nyquist rate\nFbit = (params[2]*params[0]*16)/100\nprint \"Fbit\", Fbit\n\n# Windowing function\nw = blackman(n_samples)\nprint \"W is\", w\n\n# FFT\nwfft = rfft(wav2 * w)\nwfft_norm = wfft/N\nwfft_norm = abs(wfft_norm[range(N/2)])\n\n# Working with frequencies...\nfreqs = rfftfreq(len(wfft_norm))\nindex = np.argmax(np.abs(wfft))  #Returns the index of the maximum absolute value of the windowed FFT\nfreq = freqs[index]  #Returns the frequency from the above index\nfreq_range = [freq - 0.01, freq + 0.01]\nfreq_in_Hz = abs(freq * params[2])  #Converts the Hz\nfreq_range_Hz = [abs(freq_range[0] * params[2]), abs(freq_range[1] * params[2])]\n\n# Differentiator\ndiff = np.diff(wav2)\n\n# Envelope detector\nenv = np.abs(sigtool.hilbert(diff))\nprint \"ENV\", len(env)\n# Low-pass filter\nh = signal.firwin(numtaps = 10, cutoff = freq_range[1], nyq = nyq)\nfilt = signal.lfilter(h, 1, env)\n\n# Signal's mean\nmean = np.mean(filt)\n\n#Do some crazy stuff to get binary **maybe wrong**\nrx_data = []\nsampled_signal = env[Fs/Fbit/2:params[3]+1:]\n\nfor bit in sampled_signal:\n    if bit &gt; mean:\n        rx_data.append(int(1))\n    else:\n        rx_data.append(int(0))\n\n# Save raw binary output\nrx_data1 = ''.join(map(str, (rx_data)))\noutfile1 = open('FSK_wav6_output_binary.txt', 'w')\noutfile1.write(rx_data1)\noutfile1.close()  \n</code></pre>\n"}, {"tags": ["python", "qt", "pyqt"], "answers": [{"comments": [{"owner": {"reputation": 25853, "user_id": 180783, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f586e2a9879fe0a55fd1e3ea529c664f?s=128&d=identicon&r=PG", "display_name": "astrofrog", "link": "https://stackoverflow.com/users/180783/astrofrog"}, "edited": false, "score": 0, "creation_date": 1456994460, "post_id": 35760998, "comment_id": 59206066, "body": "Thanks! This does fix it for PyQt4, however, it still doesn&#39;t work for PySide: <a href=\"https://gist.github.com/astrofrog/42c43f74b6a09fe54cf2\" rel=\"nofollow noreferrer\">gist.github.com/astrofrog/42c43f74b6a09fe54cf2</a> - do you have any ideas?"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 25853, "user_id": 180783, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f586e2a9879fe0a55fd1e3ea529c664f?s=128&d=identicon&r=PG", "display_name": "astrofrog", "link": "https://stackoverflow.com/users/180783/astrofrog"}, "edited": false, "score": 0, "creation_date": 1457049502, "post_id": 35760998, "comment_id": 59242254, "body": "Firstly, pyside&#39;s <code>QUiLoader.load</code> does not work in the same way as pyqt&#39;s <code>uic.loadUi</code>. In pyside, the second argument becomes the <i>parent</i> of the returned widget. Secondly, there are still some widgets that are lacking layouts: namely, <code>ScatterWidget</code> and <code>Widget</code>. In general, <i>every</i> container widget must have its own layout."}], "tags": [], "owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "is_accepted": true, "score": 3, "last_activity_date": 1456965397, "creation_date": 1456965397, "answer_id": 35760998, "question_id": 35759349, "link": "https://stackoverflow.com/questions/35759349/different-qt-window-behavior-depending-on-how-loadui-is-used/35760998#35760998", "title": "Different Qt window behavior depending on how loadUi is used", "body": "<p>This is readily answered by the <a href=\"http://pyqt.sourceforge.net/Docs/PyQt4/designer.html#the-uic-module\" rel=\"nofollow\">PyQt4.uic docs</a>. But to spell it out:</p>\n\n<p>This code:</p>\n\n<pre><code>    self.ui = loadUi('mywidget.ui', self)\n</code></pre>\n\n<p>will load the ui <em>into</em> the object passed as the second parameter of <code>loadUi</code>. So <code>self.ui</code> and <code>self</code> end up being exactly the same object.</p>\n\n<p>But this code:</p>\n\n<pre><code>    self.ui = loadUi('mywidget.ui', None)\n</code></pre>\n\n<p>returns a <em>new instance</em> of the ui class (which has no parent).</p>\n\n<p>However, none of this has anything to do with the resizing of the child widgets. The reason this doesn't work as expected, is because, in Qt Designer, you did not set a layout on the top-level widget (i.e. <code>ScatterWidget</code>). If you do this, the first example will work correctly.</p>\n\n<p>(Note that setting a layout on the <code>option_dashboard</code> widget is not enough - the top-level widget must have its own layout as well).</p>\n"}], "owner": {"reputation": 25853, "user_id": 180783, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f586e2a9879fe0a55fd1e3ea529c664f?s=128&d=identicon&r=PG", "display_name": "astrofrog", "link": "https://stackoverflow.com/users/180783/astrofrog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 35760998, "answer_count": 1, "score": 0, "last_activity_date": 1456965397, "creation_date": 1456957295, "last_edit_date": 1456963569, "question_id": 35759349, "link": "https://stackoverflow.com/questions/35759349/different-qt-window-behavior-depending-on-how-loadui-is-used", "title": "Different Qt window behavior depending on how loadUi is used", "body": "<p>I've come across some puzzling behavior in terms of widget resizing when using PyQt4 (and PySide) when using a <code>.ui</code> file and loading it with <code>loadUI</code>. Consider the following example:</p>\n\n<pre><code>import os\n\nfrom PyQt4 import QtGui\nfrom PyQt4.uic import loadUi\n\nclass Widget(QtGui.QWidget):\n\n    def __init__(self, parent=None):\n        super(Widget, self).__init__(parent=parent)\n        self.ui = loadUi('mywidget.ui', self)\n\n\nclass MainTest(QtGui.QWidget):\n\n    def __init__(self, parent=None):\n        super(MainTest, self).__init__(parent=parent)\n        self.layout = QtGui.QVBoxLayout()\n        self.setLayout(self.layout)\n\n    def add_widget(self):\n        self.layout.addWidget(Widget())\n\n\napp = QtGui.QApplication([])\n\nmain = MainTest()\nmain.show()\nmain.add_widget()\n\napp.exec_()\n</code></pre>\n\n<p>where <code>mywidget.ui</code> is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ui version=\"4.0\"&gt;\n &lt;class&gt;ScatterWidget&lt;/class&gt;\n &lt;widget class=\"QWidget\" name=\"ScatterWidget\"&gt;\n  &lt;property name=\"geometry\"&gt;\n   &lt;rect&gt;\n    &lt;x&gt;0&lt;/x&gt;\n    &lt;y&gt;0&lt;/y&gt;\n    &lt;width&gt;287&lt;/width&gt;\n    &lt;height&gt;230&lt;/height&gt;\n   &lt;/rect&gt;\n  &lt;/property&gt;\n    &lt;widget class=\"QWidget\" name=\"option_dashboard\" native=\"true\"&gt;\n     &lt;layout class=\"QVBoxLayout\" name=\"verticalLayout\"&gt;\n      &lt;item&gt;\n       &lt;widget class=\"QComboBox\" name=\"xAxisComboBox\"&gt;\n       &lt;/widget&gt;\n      &lt;/item&gt;\n     &lt;/layout&gt;\n    &lt;/widget&gt;\n &lt;/widget&gt;\n &lt;resources/&gt;\n &lt;connections/&gt;\n&lt;/ui&gt;\n</code></pre>\n\n<p>If we run this, this produces a window with a combo box, but the combo box always retains the same size when the window is resized:</p>\n\n<p><a href=\"https://i.stack.imgur.com/xHE1Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xHE1Y.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, if I simply change the <code>loadUI</code> line to::</p>\n\n<pre><code>        self.ui = loadUi('mywidget.ui', None)\n        self.setLayout(self.ui.verticalLayout)\n</code></pre>\n\n<p>then the combo widget is resized when resizing the widget:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VxBPu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VxBPu.png\" alt=\"enter image description here\"></a></p>\n\n<p>Why might this be happening? What is the difference between:</p>\n\n<pre><code>        self.ui = loadUi('mywidget.ui', None)\n        self.setLayout(self.ui.verticalLayout)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>        self.ui = loadUi('mywidget.ui', self)\n</code></pre>\n\n<p>? (Just to clarify, in my case, the desired behavior is the case where the combo box gets resized with the window)</p>\n\n<p>I see the same issue with PySide, so this suggests that this is expected behavior, but can someone explain the difference between the two cases?</p>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 1, "creation_date": 1456957374, "post_id": 35759343, "comment_id": 59192053, "body": "Are connections supposed to be constructed manually? Normally they&#39;re returned pre-made from somewhere else, no?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1456957820, "post_id": 35759343, "comment_id": 59192275, "body": "From the very first example in the manual: <code>conn = sqlite3.connect(&#39;example.db&#39;)</code>"}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1456959509, "post_id": 35759343, "comment_id": 59193051, "body": "@JohnGordon: if you think that examples = documentation, then we have <i>very different</i> ideas as to what the word &quot;documentation&quot; means.  Not to mention the fact that I&#39;m asking about <code>sqlite3.connection.__init__</code>, and not about <code>sqlite3.connect</code>.  If the two are related, the fact is not self-evident, and needs to be documented as well."}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "reply_to_user": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1456959670, "post_id": 35759343, "comment_id": 59193113, "body": "@Cameron: see my comment in response to chepner&#39;s answer."}], "answers": [{"comments": [{"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 0, "creation_date": 1456959372, "post_id": 35759652, "comment_id": 59192984, "body": "The documentation <a href=\"https://docs.python.org/2/library/sqlite3.html#sqlite3.connect\" rel=\"nofollow noreferrer\">explicitly says</a> (or, rather, grunts incoherently to the effect) that if one wants to modify the way <code>sqlite3.connect</code> is done, one should subclass <code>sqlite3.Connection</code> and use that instead.  In order to subclass <code>sqlite3.Connection</code> I need to know <code>sqlite3.Connection.__init__</code>&#39;s signature."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1456976460, "post_id": 35759652, "comment_id": 59198313, "body": "Granted that the documentation could be better (it almost always can), if you&#39;re going to be subclassing things, surely it&#39;s a good idea to look at the source of the class you&#39;re subclassing?"}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1456958434, "creation_date": 1456958434, "answer_id": 35759652, "question_id": 35759343, "link": "https://stackoverflow.com/questions/35759343/where-is-the-sqlite3-connection-init-method-documented/35759652#35759652", "title": "Where is the sqlite3.connection.__init__ method documented?", "body": "<p>Don't create the connection object manually. Use <a href=\"https://docs.python.org/2/library/sqlite3.html#sqlite3.connect\" rel=\"nofollow\"><code>sqlite3.connect</code></a> instead. The <code>__init__</code> method itself should be considered an implementation detail, rather than something to be used directly.</p>\n"}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1456958434, "creation_date": 1456957271, "question_id": 35759343, "link": "https://stackoverflow.com/questions/35759343/where-is-the-sqlite3-connection-init-method-documented", "title": "Where is the sqlite3.connection.__init__ method documented?", "body": "<p>The post's title says it all.</p>\n\n<hr>\n\n<p>AFAICT, neither <a href=\"https://docs.python.org/2/library/sqlite3.html#connection-objects\" rel=\"nofollow\">the fine manual</a> nor the <a href=\"https://www.python.org/dev/peps/pep-0249/#connection-objects\" rel=\"nofollow\">Python DB API</a> says <em>anything at all</em> about, or pertaining to, <code>sqlite3.connection.__init__</code>.  <em>Please correct me if I'm wrong!</em></p>\n\n<p>(I find it inexplicable that such a gaping hole in the documentation could have persisted as long as this.)</p>\n\n<p>Also, AFAICT this method is not implemented in Python, so looking at the Python source for it is not an option.</p>\n\n<p>Finally,</p>\n\n<pre><code>In [2]: import inspect\n\nIn [3]: inspect.getmro(sqlite3.Connection)\nOut[3]: (sqlite3.Connection, object)\n</code></pre>\n\n<p>IOW, the class's superclass (<code>object</code>) sheds no light on the question.</p>\n"}, {"tags": ["python", "zip", "python-requests"], "answers": [{"tags": [], "owner": {"reputation": 12091, "user_id": 1391717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oSSdx.jpg?s=128&g=1", "display_name": "Matthew Moisen", "link": "https://stackoverflow.com/users/1391717/matthew-moisen"}, "is_accepted": false, "score": 0, "last_activity_date": 1456958418, "last_edit_date": 1495542224, "creation_date": 1456958112, "answer_id": 35759552, "question_id": 35759296, "link": "https://stackoverflow.com/questions/35759296/sending-and-receving-zip-files-with-python-requests/35759552#35759552", "title": "Sending and Receving Zip files with Python Requests", "body": "<p>Changing <code>r.text</code> to <code>r.content</code> fixed this:</p>\n\n<pre><code>@app.route('/pull/', methods=['POST'])\ndef pull():\n    url = 'https://myhost.com/push/'\n    r = requests.post(url, verify=False)\n    with open(/new/path/to/zip_file.zip', 'w') as f:\n    # f.write(r.content)\n</code></pre>\n\n<p>From <a href=\"https://stackoverflow.com/questions/17011357/what-is-the-difference-between-content-and-text#\">this question</a> :</p>\n\n<blockquote>\n  <p>r.text is the content of the response in unicode, and r.content is the content of the response in bytes</p>\n</blockquote>\n"}], "owner": {"reputation": 12091, "user_id": 1391717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oSSdx.jpg?s=128&g=1", "display_name": "Matthew Moisen", "link": "https://stackoverflow.com/users/1391717/matthew-moisen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2458, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456958418, "creation_date": 1456957083, "question_id": 35759296, "link": "https://stackoverflow.com/questions/35759296/sending-and-receving-zip-files-with-python-requests", "title": "Sending and Receving Zip files with Python Requests", "body": "<p>I have two REST (Flask) APIs. The first API reads a zip file from the local disk, and returns it in the POST request. The second API calls the first API, and writes the file onto local.</p>\n\n<p>Being a bit ignorant of encodings, I'm running into issues.</p>\n\n<pre><code>@app.route('/push/', methods=['POST'])\ndef push():\n    with open('/path/to/zip_file.zip', 'r') as f:\n        foo = f.read()\n    return foo\n\n@app.route('/pull/', methods=['POST'])\ndef pull():\n    url = 'https://myhost.com/push/'\n    r = requests.post(url, verify=False)\n    with open(/new/path/to/zip_file.zip', 'w') as f:\n        # f.write(r.text)  # this fails with UnicodeEncodeDecode error\n        f.write(r.text.encode('utf-8'))  # this doesn't fail, but I can't unzip the resulting file\n</code></pre>\n\n<p>In the second API, I originally tried to <code>f.write(r.text)</code>, but this failed with:</p>\n\n<pre><code>UnicodeEncodeError: 'ascii' codec can't encode characters in position 63-64: ordinal not in range(128)\n</code></pre>\n\n<p>I tried changing it to <code>f.write(r.text.encode('utf-8'))</code> after Googling, and while the writing of the file then worked, I received the following error while attempting to <code>unzip</code> it in Linux:</p>\n\n<pre><code>error [OWBMaster_0.1.zip]:  missing 3112778871 bytes in zipfile\n  (attempting to process anyway)\nerror [OWBMaster_0.1.zip]:  start of central directory not found;\n  zipfile corrupt.\n  (please check that you have transferred or created the zipfile in the\n  appropriate BINARY mode and that you have compiled UnZip properly)\n</code></pre>\n\n<p>Is there a trick to sending zip files over REST with Requests?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 6305, "user_id": 716008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d7a3d24b39a131410082b4bc9ac50ef1?s=128&d=identicon&r=PG", "display_name": "gnychis", "link": "https://stackoverflow.com/users/716008/gnychis"}, "reply_to_user": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "edited": false, "score": 0, "creation_date": 1456957543, "post_id": 35759254, "comment_id": 59192142, "body": "I&#39;m trying to write, not read"}, {"owner": {"reputation": 6143, "user_id": 2147218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JQVSl.jpg?s=128&g=1", "display_name": "bazza", "link": "https://stackoverflow.com/users/2147218/bazza"}, "edited": false, "score": 0, "creation_date": 1456957748, "post_id": 35759254, "comment_id": 59192235, "body": "IANAPP, but maybe running proc.communicate in a separate process would work?"}, {"owner": {"reputation": 6305, "user_id": 716008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d7a3d24b39a131410082b4bc9ac50ef1?s=128&d=identicon&r=PG", "display_name": "gnychis", "link": "https://stackoverflow.com/users/716008/gnychis"}, "reply_to_user": {"reputation": 6143, "user_id": 2147218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JQVSl.jpg?s=128&g=1", "display_name": "bazza", "link": "https://stackoverflow.com/users/2147218/bazza"}, "edited": false, "score": 0, "creation_date": 1456958349, "post_id": 35759254, "comment_id": 59192516, "body": "@bazza, I&#39;d realllyyyy hate to do that if there&#39;s another way."}], "answers": [{"comments": [{"owner": {"reputation": 6305, "user_id": 716008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d7a3d24b39a131410082b4bc9ac50ef1?s=128&d=identicon&r=PG", "display_name": "gnychis", "link": "https://stackoverflow.com/users/716008/gnychis"}, "edited": false, "score": 1, "creation_date": 1456958622, "post_id": 35759631, "comment_id": 59192654, "body": "I&#39;d hate to create another process to simply run a process, and what I want to pipe is very sensitive, so I would like to avoid temporarily writing it to disk."}, {"owner": {"reputation": 6305, "user_id": 716008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d7a3d24b39a131410082b4bc9ac50ef1?s=128&d=identicon&r=PG", "display_name": "gnychis", "link": "https://stackoverflow.com/users/716008/gnychis"}, "edited": false, "score": 1, "creation_date": 1456958795, "post_id": 35759631, "comment_id": 59192727, "body": "a-ha... the key was <code>proc.stdin.close()</code> ... thank you!"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 6305, "user_id": 716008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d7a3d24b39a131410082b4bc9ac50ef1?s=128&d=identicon&r=PG", "display_name": "gnychis", "link": "https://stackoverflow.com/users/716008/gnychis"}, "edited": false, "score": 0, "creation_date": 1456958905, "post_id": 35759631, "comment_id": 59192771, "body": "@gnychis: Well, <code>threading.Thread</code> is fairly cheap to spawn, and on some OSes, a non-named <code>TemporaryFile</code> never actually ends up on disk, but I take your point. <code>.close()</code> is definitely the answer when the input is small enough that it fits in the pipe buffer and/or it&#39;s consumed immediately in the child."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 2, "last_activity_date": 1456958715, "last_edit_date": 1456958715, "creation_date": 1456958361, "answer_id": 35759631, "question_id": 35759254, "link": "https://stackoverflow.com/questions/35759254/use-subprocess-communicate-to-pipe-stdin-without-waiting-for-process/35759631#35759631", "title": "Use subprocess.communicate() to pipe stdin without waiting for process", "body": "<p>Two obvious options:</p>\n\n<ol>\n<li>Use a separate thread or process</li>\n<li>Feed <code>stdin</code> from a temporary file</li>\n</ol>\n\n<p>Option 1:</p>\n\n<pre><code>import threading\n\ndef send_data_to(proc, inp):\n    proc.communicate(inp)\n\nproc = subprocess.Popen([\"MyCommandHere\"], stdin=subprocess.PIPE)\nthreading.Thread(target=send_data_to, args=(proc, bytes(my_str_input + \"\\n\", \"ascii\"))).start()\n</code></pre>\n\n<p>Option 2:</p>\n\n<pre><code>import tempfile\n\nwith tempfile.TemporaryFile() as tf:\n    tf.write(bytes(my_str_input + \"\\n\", \"ascii\"))\n    tf.flush()\n    tf.seek(0)  # Might not be needed\n    proc = subprocess.Popen([\"MyCommandHere\"], stdin=tf)\n</code></pre>\n\n<p>The write to the temporary file can block, but usually temporary files are optimized by the OS to minimize writes to disk when possible; if the process might take some time to finish, you might block too long piping directly, but the small blocking for writing out the data won't matter. Even though Python closes the temporary file when the <code>with</code> block exits (which would normally cause it to be deleted), the process maintains a handle to it, preventing it from being cleaned up until the process completes.</p>\n\n<p>Note: All of this assumes the process might not consume your input completely immediately on launch. If the process basically reads the input immediately, then does all its work, you can simplify to just:</p>\n\n<pre><code>proc.stdin.write(bytes(my_str_input + \"\\n\", \"ascii\"))\nproc.stdin.close()  # Ensures the process knows nothing else is coming\n</code></pre>\n\n<p>This just risks blocking if the process consumes the input a little at a time, and the input is larger than the pipe buffers (so you can't write it all at once).</p>\n"}, {"comments": [{"owner": {"reputation": 6305, "user_id": 716008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d7a3d24b39a131410082b4bc9ac50ef1?s=128&d=identicon&r=PG", "display_name": "gnychis", "link": "https://stackoverflow.com/users/716008/gnychis"}, "edited": false, "score": 0, "creation_date": 1456958584, "post_id": 35759638, "comment_id": 59192637, "body": "This does not seem to work for me.  I have even tried proc.stdin.flush() after doing so."}, {"owner": {"reputation": 6305, "user_id": 716008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d7a3d24b39a131410082b4bc9ac50ef1?s=128&d=identicon&r=PG", "display_name": "gnychis", "link": "https://stackoverflow.com/users/716008/gnychis"}, "edited": false, "score": 0, "creation_date": 1456958826, "post_id": 35759638, "comment_id": 59192741, "body": "you&#39;re right, <code>.close()</code> forces it to finally go through"}, {"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 1, "creation_date": 1476721369, "post_id": 35759638, "comment_id": 67455146, "body": "If I call <code>close()</code>, is it possible to write to stdin later? If not, how can I flush stdin properly?"}], "tags": [], "owner": {"reputation": 33563, "user_id": 274466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/268c241170c7a112bbc104a8809e293c?s=128&d=identicon&r=PG", "display_name": "ig0774", "link": "https://stackoverflow.com/users/274466/ig0774"}, "is_accepted": false, "score": 0, "last_activity_date": 1456958377, "creation_date": 1456958377, "answer_id": 35759638, "question_id": 35759254, "link": "https://stackoverflow.com/questions/35759254/use-subprocess-communicate-to-pipe-stdin-without-waiting-for-process/35759638#35759638", "title": "Use subprocess.communicate() to pipe stdin without waiting for process", "body": "<p>Take a look <a href=\"https://docs.python.org/3.5/library/subprocess.html#popen-objects\" rel=\"nofollow\">at the docs on <code>Popen.stdin</code></a>. It's just a standard writable object (and, in most cases, a standard file handle anyway), so you can do:</p>\n\n<pre><code>proc.stdin.write(bytes(...))\n</code></pre>\n\n<p>To write data to stdin without needing to wait for the subprocess to complete.</p>\n"}], "owner": {"reputation": 6305, "user_id": 716008, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d7a3d24b39a131410082b4bc9ac50ef1?s=128&d=identicon&r=PG", "display_name": "gnychis", "link": "https://stackoverflow.com/users/716008/gnychis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1207, "favorite_count": 1, "accepted_answer_id": 35759631, "answer_count": 2, "score": 0, "last_activity_date": 1456958715, "creation_date": 1456956931, "last_edit_date": 1456957568, "question_id": 35759254, "link": "https://stackoverflow.com/questions/35759254/use-subprocess-communicate-to-pipe-stdin-without-waiting-for-process", "title": "Use subprocess.communicate() to pipe stdin without waiting for process", "body": "<p>I need to launch a process and pipe a string in to stdin, which I am currently doing like this:</p>\n\n<pre><code>proc = subprocess.Popen([\"MyCommandHere\"], stdin=subprocess.PIPE)\nproc.communicate(input=bytes(my_str_input + \"\\n\", \"ascii\"))\n</code></pre>\n\n<p>The problem is that when I use <code>subprocess.communicate()</code> it is a blocking call, waiting for the process to exit.  I do not want to wait.</p>\n\n<p>Is there some way to get <code>communicate()</code> to not block, or some other way to pipe my input?  I am asking about non-blocking writes, not non-blocking reads.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 23487, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1456957415, "post_id": 35759247, "comment_id": 59192073, "body": "General comment: don&#39;t use <code>is</code>, use <code>==</code> instead. <code>==</code> compares by value, while <code>is</code> compares by identity. Two strings can have the same value but <i>NOT</i> the same identity. See: <a href=\"http://stackoverflow.com/q/1504717/660921\">Why does comparing strings in Python using either &#39;==&#39; or &#39;is&#39; sometimes produce a different result?</a>."}], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 3, "last_activity_date": 1456984069, "last_edit_date": 1456984069, "creation_date": 1456983360, "answer_id": 35764034, "question_id": 35759247, "link": "https://stackoverflow.com/questions/35759247/converting-infix-to-prefix-in-python/35764034#35764034", "title": "converting infix to prefix in python", "body": "<p>What I see, with the parenthetical clauses, is a recursive problem crying out for a recursive solution.  The following is a rethink of your program that might give you some ideas of how to restructure it, even if you don't buy into my recursion argument:</p>\n\n<pre><code>import sys\nfrom enum import Enum\n\nclass Type(Enum):  # This could also be done with individual classes\n    leftparentheses = 0\n    rightparentheses = 1\n    operator = 2\n    empty = 3\n    operand = 4\n\nOPERATORS = {  # get your data out of your code...\n    \"+\": \"add\",\n    \"-\": \"subtract\",\n    \"*\": \"multiply\",\n    \"%\": \"modulus\",\n    \"/\": \"divide\",\n}\n\ndef textOperator(string):\n    if string not in OPERATORS:\n        sys.exit(\"Unknown operator: \" + string)\n    return OPERATORS[string]\n\ndef typeof(string):\n    if string == '(':\n        return Type.leftparentheses\n    elif string == ')':\n        return Type.rightparentheses\n    elif string in OPERATORS:\n        return Type.operator\n    elif string == ' ':\n        return Type.empty\n    else:\n        return Type.operand\n\ndef process(tokens):\n\n    stack = []\n\n    while tokens:\n        token = tokens.pop()\n\n        category = typeof(token)\n\n        print(\"token = \", token, \" (\" + str(category) + \")\")\n\n        if category == Type.operand:\n            stack.append(token)\n        elif category == Type.operator:\n            stack.append((textOperator(token), stack.pop(), process(tokens)))\n        elif category == Type.leftparentheses:\n            stack.append(process(tokens))\n        elif category == Type.rightparentheses:\n            return stack.pop()\n        elif category == Type.empty:\n            continue\n\n        print(\"stack = \", stack)\n\n    return stack.pop()\n\nINFIX = \"1 + ((C + A ) * (B - F))\"\n\n# pop/append work from right, so reverse, and require a real list\npostfix = process(list(INFIX[::-1]))\n\nprint(postfix)\n</code></pre>\n\n<p>The result of this program is a structure like:</p>\n\n<pre><code>('add', '1', ('multiply', ('add', 'C', 'A'), ('subtract', 'B', 'F')))\n</code></pre>\n\n<p>Which you should be able to post process into the string form you desire (again, recursively...)</p>\n\n<p>PS: <code>type</code> and <code>next</code> are Python built-ins and/or reserved words, don't use them for variable names.</p>\n\n<p>PPS: replace <code>INFIX[::-1]</code> with <code>sys.argv[1][::-1]</code> and you can pass test cases into the program to see what it does with them.</p>\n\n<p>PPPS: like your original, this only handles single digit numbers (or single letter variables), you'll need to provide a better tokenizer than list() to get that working right.</p>\n"}], "owner": {"reputation": 85, "user_id": 5977110, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/083906966bfbbf5db03938fc77d77f90?s=128&d=identicon&r=PG", "display_name": "user5977110", "link": "https://stackoverflow.com/users/5977110/user5977110"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2896, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1456984069, "creation_date": 1456956890, "question_id": 35759247, "link": "https://stackoverflow.com/questions/35759247/converting-infix-to-prefix-in-python", "title": "converting infix to prefix in python", "body": "<p>I am trying to write an Infix to Prefix Converter where e.g. I would like to convert this:</p>\n\n<pre><code>1 + ((C + A ) * (B - F))\n</code></pre>\n\n<p>to something like:</p>\n\n<pre><code>add(1, multiply(add(C, A), subtract(B, F)))\n</code></pre>\n\n<p>but I get this instead :</p>\n\n<pre><code>multiply(add(1, add(C, A), subtract(B, F)))\n</code></pre>\n\n<p>This is the code I have so far</p>\n\n<pre><code>postfix = []\ntemp = []\nnewTemp = []\n\ndef textOperator(s):\n    if s is '+':\n        return 'add('\n    elif s is '-':\n        return 'subtract('\n    elif s is '*':\n        return 'multiply('\n    else:\n        return \"\"\n\ndef typeof(s):\n    if s is '(':\n        return leftparentheses\n    elif s is ')':\n        return rightparentheses\n    elif s is '+' or s is '-' or s is '*' or s is '%' or s is '/':\n        return operator\n    elif s is ' ':\n        return empty    \n    else :\n        return operand                          \n\ninfix = \"1 + ((C + A ) * (B - F))\"\n\nfor i in infix :\n    type = typeof(i)\n    if type is operand:\n        newTemp.append(i)\n    elif type is operator:\n        postfix.append(textOperator(i))\n        postfix.append(newTemp.pop())\n        postfix.append(', ')\n    elif type is leftparentheses :\n        newTemp.append(i)\n    elif type is rightparentheses :\n        next = newTemp.pop()\n        while next is not '(':\n            postfix.append(next)\n            next = newTemp.pop()\n            postfix.append(')')\n            newTemp.append(''.join(postfix))\n            while len(postfix) &gt; 0 :\n                postfix.pop()\n    elif type is empty:\n        continue\n    print(\"newTemp = \", newTemp)\n    print(\"postfix = \", postfix)\n\nwhile len(newTemp) &gt; 0 :\n    postfix.append(newTemp.pop())\npostfix.append(')')\n\nprint(''.join(postfix)) \n</code></pre>\n\n<p>Can someone please help me figure out how I would fix this. </p>\n"}, {"tags": ["python", "pyqt4"], "answers": [{"comments": [{"owner": {"reputation": 6472, "user_id": 259538, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8zSjE.png?s=128&g=1", "display_name": "panofish", "link": "https://stackoverflow.com/users/259538/panofish"}, "edited": false, "score": 0, "creation_date": 1456960517, "post_id": 35759304, "comment_id": 59193426, "body": "Awesome, elegant &amp; simple.   Seems so obvious now.  Thanks!"}], "tags": [], "owner": {"reputation": 31, "user_id": 4144070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vfBwc.jpg?s=128&g=1", "display_name": "tink3r", "link": "https://stackoverflow.com/users/4144070/tink3r"}, "is_accepted": true, "score": 0, "last_activity_date": 1456957430, "last_edit_date": 1456957430, "creation_date": 1456957117, "answer_id": 35759304, "question_id": 35759199, "link": "https://stackoverflow.com/questions/35759199/python-pyqt4-single-child-window/35759304#35759304", "title": "Python PyQt4: Single child window", "body": "<p>Your Function creates a new instance of the class win2 each time the button is pressed. To Supress this behavior only call the show and raise_ functions instead of creating a new instance.</p>\n\n<p>I would create the class as follows, and only use the button to 'show' the window. Tested and works as intended. Also consider using self when assigning your variables so they can be accessed throughout the class instance.</p>\n\n<pre><code>class MainWindow(QMainWindow):\n    def __init__(self):\n        QMainWindow.__init__(self)\n\n        layout = QVBoxLayout()\n\n        button1 = QPushButton(\"win2\", self)\n        layout.addWidget(button1)\n        button1.clicked.connect(self.showwin2) \n        self.w2 = win2(self)\n\n     def showwin2(self):\n        self.w2.show()\n        self.w2.raise_()\n</code></pre>\n"}], "owner": {"reputation": 6472, "user_id": 259538, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8zSjE.png?s=128&g=1", "display_name": "panofish", "link": "https://stackoverflow.com/users/259538/panofish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 35759304, "answer_count": 1, "score": 0, "last_activity_date": 1456957430, "creation_date": 1456956744, "question_id": 35759199, "link": "https://stackoverflow.com/questions/35759199/python-pyqt4-single-child-window", "title": "Python PyQt4: Single child window", "body": "<p>I have a simple PyQt4 example.<br>\nWhen run, it displays a QMainWindow with a button.\nIf you click the button, then a second QMainWindow is created.\nIf you click it again, you get 2 second windows.</p>\n\n<p>What is an elegant and simple way to prevent more than 1 second window in this example?   </p>\n\n<pre><code>import sys\nfrom PyQt4.QtGui import *\n\nclass win2(QMainWindow):\n    def __init__(self, parent=None):\n        QMainWindow.__init__(self,parent)\n\n        layout = QVBoxLayout()\n\n        label = QLabel(self)\n        label.setText('This is win2')\n        layout.addWidget(label)\n\n        self.adjustSize()\n\nclass MainWindow(QMainWindow):\n    def __init__(self):\n        QMainWindow.__init__(self)\n\n        layout = QVBoxLayout()\n\n        button1 = QPushButton(\"win2\", self)\n        layout.addWidget(button1)\n\n        button1.clicked.connect(self.showwin2) \n\n    def showwin2(self):\n        w2 = win2(self)\n        w2.show()\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    mainWin = MainWindow()\n    mainWin.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "audio", "pygame"], "answers": [{"tags": [], "owner": {"reputation": 1244, "user_id": 5066567, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cc61f3214435fea14a46b867e3ed134b?s=128&d=identicon&r=PG&f=1", "display_name": "xXliolauXx", "link": "https://stackoverflow.com/users/5066567/xxliolauxx"}, "is_accepted": true, "score": 0, "last_activity_date": 1457020452, "last_edit_date": 1457020452, "creation_date": 1457010535, "answer_id": 35773103, "question_id": 35759188, "link": "https://stackoverflow.com/questions/35759188/seamlessly-playing-sound-effects-pygame/35773103#35773103", "title": "Seamlessly playing sound effects pygame", "body": "<p>In that case, using events would be more suitable. When the key is being pressed (keyDown-event), just start the sound playing infinitely with <code>carSound.play(-1)</code> and then stop it on key release (keyUp-event) with <code>carSound.stop()</code>.</p>\n"}], "owner": {"reputation": 645, "user_id": 5551722, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/xzLLW.png?s=128&g=1", "display_name": "George Willcox", "link": "https://stackoverflow.com/users/5551722/george-willcox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1281, "favorite_count": 0, "accepted_answer_id": 35773103, "answer_count": 1, "score": 1, "last_activity_date": 1545967974, "creation_date": 1456956687, "last_edit_date": 1545967974, "question_id": 35759188, "link": "https://stackoverflow.com/questions/35759188/seamlessly-playing-sound-effects-pygame", "title": "Seamlessly playing sound effects pygame", "body": "<p>I'm creating a car game, everything works completely fine except I can't get the sound effect to work properly. I'd like it to play when the car is moving, and fade when it stops, I have a short clip of an engine noise. When I run the code, the noise is very staggered and jittery. What I'm after is for the clip to play over itself and then the first to stop. This would cause a noise that stops when the button isn't pressed. Here's what I tried:</p>\n\n<pre><code>carSound = pygame.mixer.Sound('car.mp3')\neffect = 0\n\nwhile True:\n\n   keys = pygame.key.get_pressed()\n\n    if keys[K_w] or keys[K_UP]:\n        effect += 1\n        carSound.play()\n        if effect &gt;= 10:\n            carSound.stop()\n            effect = 0\n</code></pre>\n\n<p>I'm not at all used to doing this and don't know how to proceed. So how would I get the sound effect to play properly?</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 86856, "user_id": 1628832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090ce0cca74f8cc6766366460b956a0f?s=128&d=identicon&r=PG&f=1", "display_name": "karthikr", "link": "https://stackoverflow.com/users/1628832/karthikr"}, "is_accepted": true, "score": 0, "last_activity_date": 1456957005, "creation_date": 1456957005, "answer_id": 35759273, "question_id": 35759168, "link": "https://stackoverflow.com/questions/35759168/typeerror-xeger-takes-exactly-2-arguments-3-given/35759273#35759273", "title": "TypeError: xeger() takes exactly 2 arguments (3 given)", "body": "<p>Looking at their sourcecode, there are 2 things you could do:</p>\n\n<ol>\n<li><p>Do not send the <code>limit</code> argument - where it would default to 10.</p></li>\n<li><p>Initialize it slightly differently.</p></li>\n</ol>\n\n<p>Something like this</p>\n\n<pre><code>from xeger import Xeger\n\n_x = Xeger(limit=limit)\nout = _x.xeger(pattern)\n</code></pre>\n"}], "owner": {"reputation": 7410, "user_id": 3257971, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/726800b78cc5fe1f7dd61906ffd0eb1e?s=128&d=identicon&r=PG&f=1", "display_name": "The user with no hat", "link": "https://stackoverflow.com/users/3257971/the-user-with-no-hat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "accepted_answer_id": 35759273, "answer_count": 1, "score": 0, "last_activity_date": 1456957005, "creation_date": 1456956636, "question_id": 35759168, "link": "https://stackoverflow.com/questions/35759168/typeerror-xeger-takes-exactly-2-arguments-3-given", "title": "TypeError: xeger() takes exactly 2 arguments (3 given)", "body": "<p>I'm new to python and I'm trying to run a command line but it fails with error <code>TypeError: xeger() takes exactly 2 arguments (3 given)</code>.\n I can't understand the reason because I send only two params to xeger.xeger: <code>out = xeger.xeger(pattern, limit)</code>. I understand that <code>self</code> is hidden but automatically added to the arguments list so I've changed to <code>xeger.xeger(self, pattern, limit)</code> and the function signature to <code>def generate(self, limit, pattern)</code> but I still get the same error.</p>\n\n<pre><code>import xeger\nimport click\n@click.command()\n@click.option('--limit', default=10, help='Number of chars to return')\n@click.option('--pattern', prompt='pattern to match', help='regexp to match')\n\ndef generate(limit, pattern):\n    \"\"\"Simple program that receives a pattern and returns a matching string.\"\"\"\n    out = xeger.xeger(pattern, limit)\n    click.echo('%s' % out)\n\nif __name__ == '__main__':\n   generate()\n</code></pre>\n\n<p>Run and error:</p>\n\n<pre><code>python rand.py --limit 230\npattern to match: asda\nTraceback (most recent call last):\n  File \"rand.py\", line 13, in &lt;module&gt;\n    generate()\n  File \"/usr/local/lib/python2.7/site-packages/click/core.py\", line 716, in __call__\n    return self.main(*args, **kwargs)\n  File \"/usr/local/lib/python2.7/site-packages/click/core.py\", line 696, in main\n    rv = self.invoke(ctx)\n  File \"/usr/local/lib/python2.7/site-packages/click/core.py\", line 889, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n  File \"/usr/local/lib/python2.7/site-packages/click/core.py\", line 534, in invoke\n    return callback(*args, **kwargs)\n  File \"rand.py\", line 9, in generate\n    out = xeger.xeger(pattern, limit)\nTypeError: xeger() takes exactly 2 arguments (3 given)\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1456957462, "post_id": 35759097, "comment_id": 59192103, "body": "Does the html page have <code>{% csrf_token %}</code> inside the form?"}, {"owner": {"reputation": 12790, "user_id": 1767106, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0065eca502a4a798607e38cefc1ca2ed?s=128&d=identicon&r=PG", "display_name": "clay", "link": "https://stackoverflow.com/users/1767106/clay"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1456957805, "post_id": 35759097, "comment_id": 59192259, "body": "No, but my Javascript code has `xhr.setRequestHeader(&quot;X-CSRFToken&quot;, Cookies.get(&#39;csrftoken&#39;));&#39; to use the cookie token. That works when the cookie is set."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1456958033, "post_id": 35759097, "comment_id": 59192386, "body": "How is the cookie value being set?  Using the example of a login page, one would first call GET on the page, which allows the server to set the cookie value; then one would call POST on the same page.  If you&#39;re calling POST with no prior traffic, the cookie never gets set."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1456958752, "post_id": 35759097, "comment_id": 59192705, "body": "I believe Django is expecting csrf_token to be an actual submitted form field, not in a HTTP header."}], "answers": [{"tags": [], "owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "is_accepted": true, "score": 0, "last_activity_date": 1456958147, "creation_date": 1456958147, "answer_id": 35759567, "question_id": 35759097, "link": "https://stackoverflow.com/questions/35759097/no-csrf-token-for-django-web-page/35759567#35759567", "title": "No csrf token for Django web page", "body": "<p>Add ensure_csrf_cookie decorator to your view.</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.9/ref/csrf/#django.views.decorators.csrf.ensure_csrf_cookie\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.9/ref/csrf/#django.views.decorators.csrf.ensure_csrf_cookie</a></p>\n\n<p>If that doesn't help you might want to read these docs</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.9/ref/csrf/#ajax\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.9/ref/csrf/#ajax</a></p>\n"}], "owner": {"reputation": 12790, "user_id": 1767106, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0065eca502a4a798607e38cefc1ca2ed?s=128&d=identicon&r=PG", "display_name": "clay", "link": "https://stackoverflow.com/users/1767106/clay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "accepted_answer_id": 35759567, "answer_count": 1, "score": 0, "last_activity_date": 1456958147, "creation_date": 1456956382, "last_edit_date": 1456957106, "question_id": 35759097, "link": "https://stackoverflow.com/questions/35759097/no-csrf-token-for-django-web-page", "title": "No csrf token for Django web page", "body": "<p>I have a new Django app with REST endpoints and static html page that triggers <code>XMLHttpRequest</code> REST queries. POSTs fail with \"CSRF cookie not set.\".</p>\n\n<p>If I open a client debugger, document.cooke returns \"\". AFAIK, this should have \"csrftoken\".</p>\n\n<p>In <em>settings.py</em>, <code>MIDDLEWARE_CLASSES</code> contains <code>'django.middleware.csrf.CsrfViewMiddleware'</code> by default. Any idea what might be wrong?</p>\n"}, {"tags": ["python", "xml", "sax"], "answers": [{"comments": [{"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1456959064, "post_id": 35759556, "comment_id": 59192849, "body": "is there a way to get it to just print out <code>&lt;svg</code> rather than <code>&lt;ns1:svg</code> ?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 1, "creation_date": 1456959167, "post_id": 35759556, "comment_id": 59192892, "body": "Yep, <code>xmlgen.startPrefixMapping(None, ns)</code>"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1456959484, "post_id": 35759556, "comment_id": 59193038, "body": "Docs was probably a wrong choice of word, the only real examples I found were in the unittest&#39;s <a href=\"https://hg.python.org/cpython/file/2.7/Lib/test/test_sax.py#l467\" rel=\"nofollow noreferrer\">hg.python.org/cpython/file/2.7/Lib/test/test_sax.py#l467</a>"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1456958132, "creation_date": 1456958132, "answer_id": 35759556, "question_id": 35759049, "link": "https://stackoverflow.com/questions/35759049/how-to-use-xml-sax-saxutils-xmlgenerator-to-write-an-element-with-a-namespace/35759556#35759556", "title": "how to use xml.sax.saxutils.XMLGenerator to write an element with a namespace", "body": "<p>Looking at the docs seems to suggest you need something like:</p>\n\n<pre><code>from tempfile import TemporaryFile\nf = TemporaryFile()\nns = \"http://www.w3.org/2000/svg\"\nxmlgen = XMLGenerator(f)\nxmlgen.startDocument()\nxmlgen.startPrefixMapping(\"ns1\", ns)\nxmlgen.startElementNS((ns, \"svg\"), \"ns1:svg\", {})\nf.seek(0)\nprint(f.read())\n&lt;?xml version=\"1.0\" encoding=\"iso-8859-1\"?&gt;\n&lt;ns1:svg xmlns:ns1=\"http://www.w3.org/2000/svg\"&gt;\n</code></pre>\n\n<p>The <code>xmlgen.startPrefixMapping</code> seems to be necessary.</p>\n"}], "owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 0, "accepted_answer_id": 35759556, "answer_count": 1, "score": 1, "last_activity_date": 1456958132, "creation_date": 1456956178, "question_id": 35759049, "link": "https://stackoverflow.com/questions/35759049/how-to-use-xml-sax-saxutils-xmlgenerator-to-write-an-element-with-a-namespace", "title": "how to use xml.sax.saxutils.XMLGenerator to write an element with a namespace", "body": "<p>I've used XMLGenerator to write things but can't seem to figure out how to use namsepaces. I keep getting KeyErrors.</p>\n\n<p>Just as a quick example I would like to write</p>\n\n<pre><code>&lt;svg width=\"120\" height=\"120\"\n     viewBox=\"0 0 120 120\"\n     xmlns=\"http://www.w3.org/2000/svg\"&gt;\n\n  &lt;rect x=\"10\" y=\"10\"\n        width=\"100\" height=\"100\"\n        rx=\"15\" ry=\"15\"/&gt;\n\n&lt;/svg&gt;\n</code></pre>\n\n<p>How should I call startElementNS?</p>\n\n<pre><code>xmlgen.startElementNS(('http://www.w3.org/2000/svg','svg'),'svg',{})\n</code></pre>\n\n<p>gives me this error:</p>\n\n<pre><code>  File \"c:\\app\\python\\anaconda\\1.6.0\\envs\\emblaze\\lib\\xml\\sax\\saxutils.py\", line 169, in startElementNS\n    self._write(u'&lt;' + self._qname(name))\n  File \"c:\\app\\python\\anaconda\\1.6.0\\envs\\emblaze\\lib\\xml\\sax\\saxutils.py\", line 134, in _qname\n    prefix = self._current_context[name[0]]\nKeyError: 'http://www.w3.org/2000/svg'\n</code></pre>\n"}, {"tags": ["python", "legend-properties"], "comments": [{"owner": {"reputation": 675, "user_id": 3229644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54eb0acc9b37a101b382c605e1e2ca1?s=128&d=identicon&r=PG&f=1", "display_name": "phenxd", "link": "https://stackoverflow.com/users/3229644/phenxd"}, "edited": false, "score": 1, "creation_date": 1456956490, "post_id": 35759038, "comment_id": 59191587, "body": "What library are you using?"}, {"owner": {"reputation": 20027, "user_id": 1987598, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s3j3n.jpg?s=128&g=1", "display_name": "Mathias M&#252;ller", "link": "https://stackoverflow.com/users/1987598/mathias-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1456956641, "post_id": 35759038, "comment_id": 59191652, "body": "Are you using matplotlib?"}, {"owner": {"reputation": 35, "user_id": 6008996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56e3ec87aa5ede89aa76f6e49436a9a?s=128&d=identicon&r=PG&f=1", "display_name": "HopefulPhysicsMajor", "link": "https://stackoverflow.com/users/6008996/hopefulphysicsmajor"}, "edited": false, "score": 0, "creation_date": 1456958675, "post_id": 35759038, "comment_id": 59192673, "body": "My apologies, yes, I am using numpy and matplotlib. Also, someone has answered my question. Thank you for taking the time to inquire and respond."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 6008996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56e3ec87aa5ede89aa76f6e49436a9a?s=128&d=identicon&r=PG&f=1", "display_name": "HopefulPhysicsMajor", "link": "https://stackoverflow.com/users/6008996/hopefulphysicsmajor"}, "edited": false, "score": 0, "creation_date": 1456957443, "post_id": 35759182, "comment_id": 59192088, "body": "Thank You David for your help. I looked at the code and I have 2 questions  1) What was the significance to your action above commented &quot;added labels here&quot;  2) I attempted to input a different location number for the legend and it still does not move as you change the number. Is there a reason behind such?"}, {"owner": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "reply_to_user": {"reputation": 35, "user_id": 6008996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56e3ec87aa5ede89aa76f6e49436a9a?s=128&d=identicon&r=PG&f=1", "display_name": "HopefulPhysicsMajor", "link": "https://stackoverflow.com/users/6008996/hopefulphysicsmajor"}, "edited": false, "score": 0, "creation_date": 1456957523, "post_id": 35759182, "comment_id": 59192133, "body": "You have 2 more questions? If they&#39;re related to this code then ask away."}, {"owner": {"reputation": 35, "user_id": 6008996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56e3ec87aa5ede89aa76f6e49436a9a?s=128&d=identicon&r=PG&f=1", "display_name": "HopefulPhysicsMajor", "link": "https://stackoverflow.com/users/6008996/hopefulphysicsmajor"}, "edited": false, "score": 0, "creation_date": 1456957591, "post_id": 35759182, "comment_id": 59192166, "body": "I edited my original comment above to include my questions"}, {"owner": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "reply_to_user": {"reputation": 35, "user_id": 6008996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56e3ec87aa5ede89aa76f6e49436a9a?s=128&d=identicon&r=PG&f=1", "display_name": "HopefulPhysicsMajor", "link": "https://stackoverflow.com/users/6008996/hopefulphysicsmajor"}, "edited": false, "score": 0, "creation_date": 1456958164, "post_id": 35759182, "comment_id": 59192445, "body": "I have updated my answer to address your first question. As for your second, if you just copy and paste the code in my answer and only change the value of <code>loc</code> from 0 to 1, does this move the legend?"}, {"owner": {"reputation": 35, "user_id": 6008996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56e3ec87aa5ede89aa76f6e49436a9a?s=128&d=identicon&r=PG&f=1", "display_name": "HopefulPhysicsMajor", "link": "https://stackoverflow.com/users/6008996/hopefulphysicsmajor"}, "edited": false, "score": 1, "creation_date": 1456958579, "post_id": 35759182, "comment_id": 59192631, "body": "Actually, yes. When I copied and pasted the code again and then changed the number each time before running the code, the graph would show the respective change. Idk, what was going on earlier but it appears ok now. Thank you.  Also, thank you for further explaining the change regarding the label. I appreciate the help."}], "tags": [], "owner": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "is_accepted": true, "score": 1, "last_activity_date": 1456958083, "last_edit_date": 1456958083, "creation_date": 1456956669, "answer_id": 35759182, "question_id": 35759038, "link": "https://stackoverflow.com/questions/35759038/why-will-my-legend-not-move-in-python/35759182#35759182", "title": "Why will my legend not move in Python", "body": "<p>When you plot your data you need to give them a <code>label</code> in order for the legend to appear. If you do not do this then you get <code>UserWarning: No labelled objects found. Use label='...' kwarg on individual plots.</code> and you wont be able to move your legend. So you can easily change this by doing the following:</p>\n\n<pre><code>def line_plot():\n    x=np.linspace(-np.pi,np.pi,30)\n    cosx=np.cos(x)\n    sinx=np.sin(x)\n    fig1, ax1 = plt.subplots()\n    ax1.plot(x,np.sin(x), c='r', lw=3,label='cos') #added label here\n    ax1.plot(x,np.cos(x), c='b', lw=3,label='sin') #added label here\n    ax1.set_xlabel('x')\n    ax1.set_ylabel('y')\n    #ax1.legend([\"cos\",\"sin\"]) #don't need this as the plots are already labelled now\n    ax1.legend(loc=0);\n    ax1.set_xlim([-3.14, 3.14])\n    ax1.set_xticks([-np.pi, -np.pi/2, 0, np.pi/2, np.pi])\n    ax1.grid(True)\n    ax1.set_xticklabels(['-'+r'$\\pi$', '-'+r'$\\pi$'+'/2',0, r'$\\pi$'+'/2', r'$\\pi$'])\n    plt.show()\n\n    return\n\nif __name__ == \"__main__\":\n    line_plot()\n</code></pre>\n\n<p>This gives the plot below. Now changing the value of <code>loc</code> changes the position of the legend.</p>\n\n<p><a href=\"https://i.stack.imgur.com/bDy0d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bDy0d.png\" alt=\"enter image description here\"></a></p>\n\n<p>EDIT:</p>\n\n<p>1) I gave each set of data you plotted their own <code>label</code>. Then when you get to the line <code>ax1.legend(loc=0)</code> matplotlib then sets the legend to include these labels on the legend. This is the most 'pythonic' way of plotting the legend.</p>\n"}], "owner": {"reputation": 35, "user_id": 6008996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a56e3ec87aa5ede89aa76f6e49436a9a?s=128&d=identicon&r=PG&f=1", "display_name": "HopefulPhysicsMajor", "link": "https://stackoverflow.com/users/6008996/hopefulphysicsmajor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 0, "accepted_answer_id": 35759182, "answer_count": 1, "score": 1, "last_activity_date": 1456958083, "creation_date": 1456956145, "last_edit_date": 1456956432, "question_id": 35759038, "link": "https://stackoverflow.com/questions/35759038/why-will-my-legend-not-move-in-python", "title": "Why will my legend not move in Python", "body": "<p>I had to create a simple graph to learn the properties of graphing making in python. One of those properties is legend placement. The code for such is ax.legend(loc=\"some number\"). The different numbers you put in that piece of code I mention determine where the legend is placed. However, no matter what number I put, my legend never changes position. Is there a deeper issue that I am missing or could there just be something wrong with my program?   </p>\n\n<pre><code>def line_plot():\n    x=np.linspace(-np.pi,np.pi,30)\n    cosx=np.cos(x)\n    sinx=np.sin(x)\n    fig1, ax1 = plt.subplots()\n    ax1.plot(x,np.sin(x), c='r', lw=3)\n    ax1.plot(x,np.cos(x), c='b', lw=3)\n    ax1.set_xlabel('x')\n    ax1.set_ylabel('y')\n    ax1.legend([\"cos\",\"sin\"])\n    ax1.legend(loc=0);\n    ax1.set_xlim([-3.14, 3.14])\n    ax1.set_xticks([-np.pi, -np.pi/2, 0, np.pi/2, np.pi])\n    ax1.grid(True)\n    ax1.set_xticklabels(['-'+r'$\\pi$', '-'+r'$\\pi$'+'/2',0, r'$\\pi$'+'/2', r'$\\pi$'])\n    plt.show()\n\n    return\n\nif __name__ == \"__main__\":\n    line_plot()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2549, "user_id": 5765298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d109e4a14d083bccf645ffd660672e61?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett R", "link": "https://stackoverflow.com/users/5765298/garrett-r"}, "edited": false, "score": 2, "creation_date": 1456956157, "post_id": 35758971, "comment_id": 59191429, "body": "change the print(len(mylist)) to <code>return len(mylist)</code>  Your function currently returns None by default since you don&#39;t have a return statement"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1456956899, "post_id": 35758971, "comment_id": 59191783, "body": "Duplicate of <a href=\"http://stackoverflow.com/questions/34404947/my-function-returns-none\" title=\"my function returns none\">stackoverflow.com/questions/34404947/my-function-returns-non&zwnj;&#8203;e</a>"}], "answers": [{"tags": [], "owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "is_accepted": false, "score": 0, "last_activity_date": 1456956175, "creation_date": 1456956175, "answer_id": 35759046, "question_id": 35758971, "link": "https://stackoverflow.com/questions/35758971/python-print-result-shows-none-and-the-desired-result/35759046#35759046", "title": "Python-- Print result shows &quot;None&quot; and the desired result", "body": "<p>Functions return <code>None</code> unless they have a <code>return something_that_is_not_none</code> statement that gets executed in the function's body.</p>\n\n<p>You are printing the value in the function, returning <code>None</code> and then printing that return value in the caller.</p>\n"}, {"tags": [], "owner": {"reputation": 73, "user_id": 2839883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a213416374b339f171cf321c4ce27277?s=128&d=identicon&r=PG&f=1", "display_name": "Magneto", "link": "https://stackoverflow.com/users/2839883/magneto"}, "is_accepted": false, "score": 0, "last_activity_date": 1456958081, "creation_date": 1456958081, "answer_id": 35759546, "question_id": 35758971, "link": "https://stackoverflow.com/questions/35758971/python-print-result-shows-none-and-the-desired-result/35759546#35759546", "title": "Python-- Print result shows &quot;None&quot; and the desired result", "body": "<p>Following up on the previous answer, change the last line of the second function from <code>print(len(mylist))</code> to <code>return len(mylist)</code> and you're good to go.</p>\n"}], "owner": {"reputation": 61, "user_id": 6004076, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5f8d3bf443db6d4eae439b4d832ed830?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Wall", "link": "https://stackoverflow.com/users/6004076/nathan-wall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1456958081, "creation_date": 1456955949, "question_id": 35758971, "link": "https://stackoverflow.com/questions/35758971/python-print-result-shows-none-and-the-desired-result", "title": "Python-- Print result shows &quot;None&quot; and the desired result", "body": "<p>I have a piece of code that should be printing a number. But it instead prints \"None\", along with the number I anticipated it to print. Here is the snippet of code that should produce, at the very last line, just the number 3.</p>\n\n<pre><code>mylist=[]\ndef number_replied(user):\n    for z in task1dict:\n        if user in task1dict[z]:\n            mylist.append(z) \n\ndef how_many_replied_to(username):\n    del(mylist[:])\n    number_replied(username)\n    print(len(mylist))\n\nprint(how_many_replied_to('joeclarkphd'))\n</code></pre>\n\n<p>This should produce the result, \"3\", but it shows \"None\", a line break, \"3\". Is there something I need to add or change? Let me know if you need more of the code.</p>\n"}, {"tags": ["python", "list-comprehension"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 3, "creation_date": 1456956055, "post_id": 35758968, "comment_id": 59191374, "body": "Use <code>enumerate</code>. There must be numerous examples on SO and in the python docs."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 4, "creation_date": 1456956057, "post_id": 35758968, "comment_id": 59191376, "body": "What is the point of <code>count</code>? Why not just use <code>i</code>?!"}, {"owner": {"reputation": 12837, "user_id": 2184364, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe15cfa3ec22be57f1762ba905c8eb70?s=128&d=identicon&r=PG", "display_name": "Julien Spronck", "link": "https://stackoverflow.com/users/2184364/julien-spronck"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1456956257, "post_id": 35758968, "comment_id": 59191482, "body": "as suggested by @jonrsharpe, why don&#39;t you use <code>sum(i[&quot;count&quot;] for i in info)</code>?"}, {"owner": {"reputation": 415, "user_id": 2236315, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/gwbFC.jpg?s=128&g=1", "display_name": "ximiki", "link": "https://stackoverflow.com/users/2236315/ximiki"}, "edited": false, "score": 0, "creation_date": 1494518035, "post_id": 35758968, "comment_id": 74873852, "body": "In my opinion, a related but better posed question is already answered <a href=\"http://stackoverflow.com/questions/9197844/maintain-count-in-python-list-comprehension\">here</a>. One can probably extract what one needs from the answers provided to the linked page."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 0, "last_activity_date": 1456956837, "creation_date": 1456956837, "answer_id": 35759227, "question_id": 35758968, "link": "https://stackoverflow.com/questions/35758968/count-in-python-list-comprehension/35759227#35759227", "title": "count in python list comprehension", "body": "<p>I do not follow why you use <code>i</code> in <code>i in info</code> together with <code>count</code>. If <code>info</code> is enumerable and enumerating has the same effect as accessing with a zero offset index (like you seem to do with <code>count</code>, you can rewrite your loop like:</p>\n\n<pre><code>lst = []\nfor infoi in info:\n    num = infoi[\"count\"]\n    # print num\n    lst.append(num)\n\nprint sum(lst)\n</code></pre>\n\n<p>Now you can convert this to the following list comprehension:</p>\n\n<pre><code>sum([infoi[\"count\"] for infoi in info])\n</code></pre>\n\n<p>Finally you do not need to <em>materialize</em> the comprehension to a list, <code>sum</code> can work on a generator:</p>\n\n<pre><code>sum(infoi[\"count\"] for infoi in info)\n</code></pre>\n\n<p>This can be more efficient, since you will <em>not</em> construct a list first with all the values: <code>sum</code> will enumerate over all items and thus will result in constant memory usage.</p>\n"}, {"comments": [{"owner": {"reputation": 2463, "user_id": 2095131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f39cab2a4025e418e957c3ede56d0fad?s=128&d=identicon&r=PG", "display_name": "hcoat", "link": "https://stackoverflow.com/users/2095131/hcoat"}, "edited": false, "score": 1, "creation_date": 1528336258, "post_id": 50731769, "comment_id": 88471643, "body": "It is helpful to describe what is going on with your code. This will give context and help the OP as well as people that come across this answer in the future."}], "tags": [], "owner": {"reputation": 11, "user_id": 374446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5235f68060e0c51cee159c02556bafe5?s=128&d=identicon&r=PG", "display_name": "mcstafford", "link": "https://stackoverflow.com/users/374446/mcstafford"}, "is_accepted": false, "score": 1, "last_activity_date": 1528334988, "creation_date": 1528334988, "answer_id": 50731769, "question_id": 35758968, "link": "https://stackoverflow.com/questions/35758968/count-in-python-list-comprehension/50731769#50731769", "title": "count in python list comprehension", "body": "<pre><code>    &gt;&gt;&gt; a = ['a','b','c']\n    &gt;&gt;&gt; v = ['a','e','i','o','u']\n    &gt;&gt;&gt; len(a)\n    3\n    &gt;&gt;&gt; sum([1 for x in a if x in v])\n    2\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6010208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0eb0ccca425a3e9521789f29f926489?s=128&d=identicon&r=PG&f=1", "display_name": "lavidar", "link": "https://stackoverflow.com/users/6010208/lavidar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2330, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1528334988, "creation_date": 1456955941, "question_id": 35758968, "link": "https://stackoverflow.com/questions/35758968/count-in-python-list-comprehension", "title": "count in python list comprehension", "body": "<p>How do i write a list comprehension in python with an inclusion of a \ncount = count + 1?</p>\n\n<pre><code>print sum([info[count][\"count\"] for i in info])\n\n# This is the working loop: \n\ncount = 0\nlst = []\nfor i in info:\n    num = info[count][\"count\"]\n    # print num\n    count = count + 1\n    lst.append(num)\nprint sum(lst)\n</code></pre>\n"}, {"tags": ["python", "virtualenv"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1456955970, "post_id": 35758928, "comment_id": 59191323, "body": "Yes, there are several tools for creating executables from Python code. Note that if your friend has a Mac or Linux computer, they already have Python by default."}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1456956013, "post_id": 35758928, "comment_id": 59191347, "body": "Make it an executable.  A popular resource is <a href=\"http://www.pyinstaller.org\" rel=\"nofollow noreferrer\">pyinstaller</a>.  Why doesn&#39;t he have Python installed? IS HE CRAZY?"}], "answers": [{"tags": [], "owner": {"reputation": 392, "user_id": 1377151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9f7a7c5e510205c1d6d48027b81bdcb?s=128&d=identicon&r=PG", "display_name": "Gal Ben David", "link": "https://stackoverflow.com/users/1377151/gal-ben-david"}, "is_accepted": false, "score": 1, "last_activity_date": 1456957084, "creation_date": 1456957084, "answer_id": 35759297, "question_id": 35758928, "link": "https://stackoverflow.com/questions/35758928/copy-python-project-folder-to-computer-without-python-can-i-run-it/35759297#35759297", "title": "Copy Python project folder to computer without python, can I run it?", "body": "<p><code>virtualenv</code> is a good option if you are transferring the folder between two same operating systems.\nIn order to include the correspond site packages that are already installed in your computer, install them inside the <code>virtualenv</code> context by doing <code>pip install</code> in the virtualenv shell.</p>\n\n<p>You could use <code>pip freeze</code> to get a list of installed python packages from your computer.</p>\n\n<p>You could then include a <code>.bat</code> file (if it is a windows system) or <code>.sh</code> file (if its a linux system) so it would run your script with the virtualenv context.</p>\n"}], "owner": {"reputation": 1152, "user_id": 4162778, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/pOZ3w.png?s=128&g=1", "display_name": "andiwin", "link": "https://stackoverflow.com/users/4162778/andiwin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456957084, "creation_date": 1456955803, "question_id": 35758928, "link": "https://stackoverflow.com/questions/35758928/copy-python-project-folder-to-computer-without-python-can-i-run-it", "title": "Copy Python project folder to computer without python, can I run it?", "body": "<p>So I develop a python application and I plan to copy the whole folder for my friend to use it as end-user. </p>\n\n<p>But my friend does not have python installed in the computer and I don't want to make them install it since he is not a developer.\nIn my project I have set up the <code>virtualenv</code> with python.exe inside it but without the site-packages, and I copy the virtualenv together with the project folder.</p>\n\n<p>Is it possible to do this kind of setup so the application in the other end runs without python installed?</p>\n"}, {"tags": ["python", "parsing", "web-scraping", "beautifulsoup", "text-files"], "answers": [{"comments": [{"owner": {"reputation": 727, "user_id": 3628240, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/bc350bceceed289466b2151e892e19bb?s=128&d=identicon&r=PG&f=1", "display_name": "user3628240", "link": "https://stackoverflow.com/users/3628240/user3628240"}, "edited": false, "score": 0, "creation_date": 1456960198, "post_id": 35758951, "comment_id": 59193296, "body": "Thanks, that was helpful. Is there anyway to split by columns? My concern with splitting on spaces is that some of the info like the company&#39;s name is split into multiple strings, and each company has a different length name. I see that there are &lt;s&gt; and &lt;c&gt; tags, but is it possible to split based on these tags? Or getting each column in separate lists?"}, {"owner": {"reputation": 1574, "user_id": 1585957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe34b0fb6288bd44b5a32efd7afdca8?s=128&d=identicon&r=PG", "display_name": "bmcculley", "link": "https://stackoverflow.com/users/1585957/bmcculley"}, "edited": false, "score": 0, "creation_date": 1456964595, "post_id": 35758951, "comment_id": 59194874, "body": "You could do something like, look for the table, grab the dashes at the top of the columns. Count those and use that to split the rest of the data, strip white space from the beginning and end and you should end up with what you want."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 0, "last_activity_date": 1456955860, "creation_date": 1456955860, "answer_id": 35758951, "question_id": 35758772, "link": "https://stackoverflow.com/questions/35758772/how-to-parse-table-in-a-text-file/35758951#35758951", "title": "How to parse table in a text file?", "body": "<p>The problem is that this is not an HTML table and rather a space delimited set of columns which you would have to parse differently. Here is a quite naive but working solution using <code>splitlines()</code> to split the table into rows and <code>split()</code> to split into columns:</p>\n\n<pre><code>import urllib2\n\nfrom bs4 import BeautifulSoup\n\ndef scrape(url):\n    htmlfile = urllib2.urlopen(url)\n    htmltext = htmlfile.read()\n    bs = BeautifulSoup(htmltext, \"html.parser\")\n\n    data = bs.find('table').get_text().splitlines()[10:]\n    for line in data:\n        print([item for item in line.split()])\n\nif __name__ == '__main__':\n    url = 'https://www.sec.gov/Archives/edgar/data/1412093/000114036111027807/0001140361-11-027807.txt'\n    scrape(url)\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>['ADVENTRX', 'PHARMAMACEUTICALS', 'INC', 'COM', 'NEW', '00764X202', '289', '138,377', 'SH', 'SOLE', 'N/A', '138,377']\n['AMGEN', 'INC', 'COM', '31162100', '54,519', '1,020,000', 'SH', 'SOLE', 'N/A', '1,020,000']\n...\n['SOUTHERN', 'UN', 'CO', 'NEW', 'COM', '844030106', '5,328', '186,154', 'SH', 'SOLE', 'N/A', '186,154']\n['TAKE-TWO', 'INTERACTIVE', 'SOFTWAR', 'COM', '874054109', '151,310', '9,844,502', 'SH', 'SOLE', 'N/A', '9,844,502']\n</code></pre>\n\n<p>The most unreliable part is that <code>[10:]</code> slice. I'm leaving this for you to improve. </p>\n"}], "owner": {"reputation": 727, "user_id": 3628240, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/bc350bceceed289466b2151e892e19bb?s=128&d=identicon&r=PG&f=1", "display_name": "user3628240", "link": "https://stackoverflow.com/users/3628240/user3628240"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1266, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1456955860, "creation_date": 1456955335, "question_id": 35758772, "link": "https://stackoverflow.com/questions/35758772/how-to-parse-table-in-a-text-file", "title": "How to parse table in a text file?", "body": "<p>I'm trying to scrape this page for the table of the holdings at the bottom, to get the information in each column: <a href=\"https://www.sec.gov/Archives/edgar/data/1412093/000114036111027807/0001140361-11-027807.txt\" rel=\"nofollow\">https://www.sec.gov/Archives/edgar/data/1412093/000114036111027807/0001140361-11-027807.txt</a></p>\n\n<p>What I have so far is this:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport urllib2\nimport datetime\nimport sys\n\ndef scrape(url):\n    htmlfile = urllib2.urlopen(url)\n    htmltext = htmlfile.read()\n    bs = BeautifulSoup(htmltext)\n    tables =bs.find_all('table')\n    for table in tables:\n        print table\n\nif __name__ == '__main__':\n    url = 'https://www.sec.gov/Archives/edgar/data/1412093/000114036111027807/0001140361-11-027807.txt'\n    scrape(url)\n</code></pre>\n\n<p>However, this only gets me the table, and I can't seem to further parse it going line by line.\nAny help with this would be appreciated, thanks!</p>\n"}, {"tags": ["python", "pythonpath"], "comments": [{"owner": {"reputation": 591, "user_id": 4861069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca5292352f0037fa9e6250159cf7d99?s=128&d=identicon&r=PG&f=1", "display_name": "Jase Rieger", "link": "https://stackoverflow.com/users/4861069/jase-rieger"}, "edited": false, "score": 0, "creation_date": 1456955992, "post_id": 35758743, "comment_id": 59191334, "body": "Have you tried setting the path without the quotes and braces? It may be that you are setting the python path as a string representation of the path instead."}, {"owner": {"reputation": 542, "user_id": 1332561, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7a35712338ee76721b589f66a268c531?s=128&d=identicon&r=PG", "display_name": "gamda", "link": "https://stackoverflow.com/users/1332561/gamda"}, "reply_to_user": {"reputation": 591, "user_id": 4861069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca5292352f0037fa9e6250159cf7d99?s=128&d=identicon&r=PG&f=1", "display_name": "Jase Rieger", "link": "https://stackoverflow.com/users/4861069/jase-rieger"}, "edited": false, "score": 0, "creation_date": 1456956169, "post_id": 35758743, "comment_id": 59191439, "body": "I have not, I will try right now. Thanks"}, {"owner": {"reputation": 542, "user_id": 1332561, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7a35712338ee76721b589f66a268c531?s=128&d=identicon&r=PG", "display_name": "gamda", "link": "https://stackoverflow.com/users/1332561/gamda"}, "reply_to_user": {"reputation": 591, "user_id": 4861069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca5292352f0037fa9e6250159cf7d99?s=128&d=identicon&r=PG&f=1", "display_name": "Jase Rieger", "link": "https://stackoverflow.com/users/4861069/jase-rieger"}, "edited": false, "score": 0, "creation_date": 1456956572, "post_id": 35758743, "comment_id": 59191625, "body": "@JaseRieger thank you so much! That was it. Coverage and Python can run the tests again from the terminal and I can run independent modules. I am not sure why it happened since I hadn&#39;t modified the .bash files in about a week so I assumed that wasn&#39;t the problem."}, {"owner": {"reputation": 591, "user_id": 4861069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca5292352f0037fa9e6250159cf7d99?s=128&d=identicon&r=PG&f=1", "display_name": "Jase Rieger", "link": "https://stackoverflow.com/users/4861069/jase-rieger"}, "edited": false, "score": 0, "creation_date": 1456957632, "post_id": 35758743, "comment_id": 59192187, "body": "I&#39;ll make an answer for it"}], "answers": [{"tags": [], "owner": {"reputation": 591, "user_id": 4861069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca5292352f0037fa9e6250159cf7d99?s=128&d=identicon&r=PG&f=1", "display_name": "Jase Rieger", "link": "https://stackoverflow.com/users/4861069/jase-rieger"}, "is_accepted": true, "score": 1, "last_activity_date": 1456957681, "creation_date": 1456957681, "answer_id": 35759447, "question_id": 35758743, "link": "https://stackoverflow.com/questions/35758743/pythonpath-not-working-on-osx/35759447#35759447", "title": "$PYTHONPATH not working on OSX", "body": "<p>Have you tried setting the path without the quotes and braces? You are setting the python path as a string representation of the path instead of a list of paths</p>\n"}], "owner": {"reputation": 542, "user_id": 1332561, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7a35712338ee76721b589f66a268c531?s=128&d=identicon&r=PG", "display_name": "gamda", "link": "https://stackoverflow.com/users/1332561/gamda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1416, "favorite_count": 0, "accepted_answer_id": 35759447, "answer_count": 1, "score": 0, "last_activity_date": 1456957681, "creation_date": 1456955227, "last_edit_date": 1456956777, "question_id": 35758743, "link": "https://stackoverflow.com/questions/35758743/pythonpath-not-working-on-osx", "title": "$PYTHONPATH not working on OSX", "body": "<p>I have been at this for a day and have found no solution. My python project is very levels deep and some of the modules have to be run independently (no -m flag, no relative imports). For this reason we decided to add the root folder to the PYTHONPATH. I am running OSX 10.11.3. Everything had been running smoothly until yesterday. I could run independent modules from the terminal with no issues in both Python 2.7 and 3.5. Yesterday, without modifying my PYTHONPATH or any other environment setting, running any of these independent modules from the terminal now gives me import errors in both Python 2 and 3. </p>\n\n<p>Here is my working tree:</p>\n\n<pre><code>/Users/sintrafico/Documents/code/central_maestra\n- reports_server.py\n- api_server.py\n- sintrafico\n    - sql\n        - SQLConnection\n    - api\n        - incident\n            - csv (not package)\n                - independent_module\n            - tests\n</code></pre>\n\n<p>I was running my tests yesterday with coverage with no problem, but now I can't. </p>\n\n<p>Python 2 <code>python csv/independent_module.py</code> gives error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"csv/independent_module.py\", line 13, in &lt;module&gt;\n    from sintrafico.sql import SQLConnection\nImportError: No module named sintrafico.sql\n</code></pre>\n\n<p>Python 3 <code>python3 csv/independent_module.py</code> gives error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"csv/create_bemobile_csv.py\", line 13, in &lt;module&gt;\n    from sintrafico.sql import SQLConnection\nImportError: No module named 'sintrafico'\n</code></pre>\n\n<p>From within the incident folder, yesterday this command was working fine: <code>coverage run -m unittest discover</code>. Now all the tests fail because <code>ImportError: No module named 'reports_server'</code>.</p>\n\n<p>Since that started happening yesterday, I have been messing with my PYTHONPATH. I left it blank and it didn't work (as expected), I have added the path now several ways:</p>\n\n<ul>\n<li><code>export PYTHONPATH=\u201c${PYTHONPATH}:/Users/sintrafico/Documents/code/central_maestra\"</code></li>\n<li><code>export PYTHONPATH=\u201c/Users/sintrafico/Documents/code/central_maestra:${PYTHONPATH}\"</code></li>\n<li><code>export PYTHONPATH=\u201c${PYTHONPATH}:/Users/sintrafico/Documents/code/central_maestra/\"</code></li>\n<li><code>export PYTHONPATH=\u201c/Users/sintrafico/Documents/code/central_maestra:${PYTHONPATH}\"</code></li>\n</ul>\n\n<p>And also setting it without appending the PYTHONPATH since it was empty to begin with. I restarted my computer several times with no success. Also note, I have a .bash_profile and .bashrc with the following contents:</p>\n\n<pre><code># Setting PATH for Python 3.5\n# The orginal version is saved in .bash_profile.pysave\nPATH=\"/Library/Frameworks/Python.framework/Versions/3.5/bin:${PATH}\"\nexport PATH\nPYTHONPATH=\u201c/Users/sintrafico/Documents/code/central_maestra:${PYTHONPATH}\u201c\nexport PYTHONPATH\n</code></pre>\n\n<p>And lastly, what bugs me the most is that if I run the tests inside PyCharm they all run and pass, I get no import errors at all.</p>\n"}, {"tags": ["python", "html", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 1722, "user_id": 563231, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2rzat.jpg?s=128&g=1", "display_name": "David Metcalfe", "link": "https://stackoverflow.com/users/563231/david-metcalfe"}, "edited": false, "score": 0, "creation_date": 1456956414, "post_id": 35758815, "comment_id": 59191550, "body": "Fantastic. That&#39;s what I needed, thank you. There are tools that perform this function to varying degrees, but every one I can find preserves too much of the starting HTML. I want pure conversion to Wiki markup where possible."}, {"owner": {"reputation": 1439, "user_id": 7396613, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7490a33ebc405a244013b37af249ec?s=128&d=identicon&r=PG&f=1", "display_name": "M.K", "link": "https://stackoverflow.com/users/7396613/m-k"}, "edited": false, "score": 0, "creation_date": 1546509025, "post_id": 35758815, "comment_id": 94875623, "body": "Is there a way to literally change the value <code>test1</code> to <code>test 1212</code>, with the same replace_with?"}, {"owner": {"reputation": 364, "user_id": 1960853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1aea8ea3b6824da4f7971a0de69b854?s=128&d=identicon&r=PG", "display_name": "Lokal_Profil", "link": "https://stackoverflow.com/users/1960853/lokal-profil"}, "edited": false, "score": 1, "creation_date": 1548407595, "post_id": 35758815, "comment_id": 95538381, "body": "This does not handle nested tags. e.g. data = &quot;&lt;div&gt;&lt;b&gt;bold with some &lt;i&gt;italics&lt;/i&gt;&lt;/b&gt;&lt;/div&gt;&quot; would result in &#39;&#39;&#39;bold with some italics&#39;&#39;&#39;` rather than <code>&#39;&#39;&#39;bold with some &#39;&#39;italics&#39;&#39;&#39;&#39;&#39;</code>. My answer below does"}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 4, "last_activity_date": 1456955479, "creation_date": 1456955479, "answer_id": 35758815, "question_id": 35758737, "link": "https://stackoverflow.com/questions/35758737/beautifulsoup-replace-with-for-non-standard-tags/35758815#35758815", "title": "BeautifulSoup replace_with for non-standard tags", "body": "<p>I am pretty sure there are already tools that would do that for you, but if you are asking about how to do that with <code>BeautifulSoup</code>, you can use <code>replace_with()</code>, but you would need to preserve the text of the element. Naive and simple example:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\ndata = \"\"\"\n&lt;div&gt;\n    &lt;b&gt;test1&lt;/b&gt;\n    &lt;i&gt;test2&lt;/i&gt;\n&lt;/div&gt;\n\"\"\"\n\nsoup = BeautifulSoup(data, \"html.parser\")\n\nfor b in soup.find_all(\"b\"):\n    b.replace_with(\"'''%s'''\" % b.text)\n\nfor i in soup.find_all(\"i\"):\n    i.replace_with(\"''%s''\" % i.text)\n\nprint(soup.prettify())\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>&lt;div&gt;\n '''test1'''\n ''test2''\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 364, "user_id": 1960853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1aea8ea3b6824da4f7971a0de69b854?s=128&d=identicon&r=PG", "display_name": "Lokal_Profil", "link": "https://stackoverflow.com/users/1960853/lokal-profil"}, "is_accepted": false, "score": -1, "last_activity_date": 1547769268, "creation_date": 1547769268, "answer_id": 54245961, "question_id": 35758737, "link": "https://stackoverflow.com/questions/35758737/beautifulsoup-replace-with-for-non-standard-tags/54245961#54245961", "title": "BeautifulSoup replace_with for non-standard tags", "body": "<p>To also handle nested tags, e.g. <code>\"&lt;div&gt;&lt;b&gt;bold with some &lt;i&gt;italics&lt;/i&gt;&lt;/b&gt;&lt;/div&gt;\"</code> you have to be a bit more careful.</p>\n\n<p>I put together the following implementation when I needed to do something similar:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\ndef wikify_tag(tag, replacement):\n    tag.insert(0, replacement)\n    tag.append(replacement)\n    tag.unwrap()\n\ndata = \"\"\"\n&lt;div&gt;\n    &lt;b&gt;test1&lt;/b&gt;\n    &lt;i&gt;test2&lt;/i&gt;\n    &lt;b&gt;bold with some &lt;i&gt;italics&lt;/i&gt;&lt;/b&gt;\n&lt;/div&gt;\n\"\"\"\n\nsoup = BeautifulSoup(data, \"html.parser\")\n\nfor b in soup.find_all(\"b\"):\n    wikify_tag(b, \"'''\")\n\nfor i in soup.find_all(\"i\"):\n    wikify_tag(i, \"''\")\n\nprint(soup)\n</code></pre>\n\n<p>Prints (note that <code>.prettify()</code> makes it look uglier):</p>\n\n<pre><code>&lt;div&gt;\n'''test1'''\n''test2''\n'''bold with some ''italics'''''\n&lt;/div&gt;\n</code></pre>\n\n<p>If you also want to replace tags with wiki-templates you can extend <code>wikify_tag</code> to take a start and an end string.</p>\n"}], "owner": {"reputation": 1722, "user_id": 563231, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2rzat.jpg?s=128&g=1", "display_name": "David Metcalfe", "link": "https://stackoverflow.com/users/563231/david-metcalfe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1946, "favorite_count": 1, "accepted_answer_id": 35758815, "answer_count": 2, "score": 2, "last_activity_date": 1547769268, "creation_date": 1456955196, "question_id": 35758737, "link": "https://stackoverflow.com/questions/35758737/beautifulsoup-replace-with-for-non-standard-tags", "title": "BeautifulSoup replace_with for non-standard tags", "body": "<p>I'm trying to write a parser that will take HTML and convert/output to Wiki syntax (<code>&lt;b&gt;</code> = <code>'''</code>, <code>&lt;i&gt;</code> = <code>''</code>, etc). </p>\n\n<p>So far, BeautifulSoup seems only capable of replacing the contents within a tag, so <code>&lt;b&gt;</code> becomes <code>&lt;'''&gt;</code> instead of <code>'''</code>. I can use a re.sub() to swap these out, but since BS turns the document into a 'complex tree of Python objects', I can't figure out how to swap out these tags and re-insert them into the overall document.</p>\n\n<p>Does anyone have ideas?</p>\n"}, {"tags": ["python", "pyqt4", "selection", "qtreewidget"], "answers": [{"tags": [], "owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "is_accepted": true, "score": 1, "last_activity_date": 1456963424, "creation_date": 1456963424, "answer_id": 35760683, "question_id": 35758710, "link": "https://stackoverflow.com/questions/35758710/how-do-i-get-the-selected-and-deselected-items-in-a-qtreewidget/35760683#35760683", "title": "How do I get the selected and deselected items in a QTreeWidget?", "body": "<p>Try the <a href=\"http://doc.qt.io/qt-4.8/qitemselectionmodel.html#selectionChanged\" rel=\"nofollow\">selectionChanged</a> signal of the tree-widget's selection-model:</p>\n\n<pre><code>        selmodel = self.treeWidget.selectionModel()\n        selmodel.selectionChanged.connect(self.handleSelection)\n        ...\n\n    def handleSelection(self, selected, deselected):\n        for index in selected.indexes():\n            item = self.treeWidget.itemFromIndex(index)\n            print('SEL: row: %s, col: %s, text: %s' % (\n                index.row(), index.column(), item.text(0)))\n        for index in deselected.indexes():\n            item = self.treeWidget.itemFromIndex(index)\n            print('DESEL: row: %s, col: %s, text: %s' % (\n                index.row(), index.column(), item.text(0)))\n</code></pre>\n"}], "owner": {"reputation": 627, "user_id": 2059078, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ad0a5003c5624bc14d90132d964ba56d?s=128&d=identicon&r=PG", "display_name": "MiniMe", "link": "https://stackoverflow.com/users/2059078/minime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1748, "favorite_count": 1, "accepted_answer_id": 35760683, "answer_count": 1, "score": 0, "last_activity_date": 1456963596, "creation_date": 1456955091, "last_edit_date": 1456963596, "question_id": 35758710, "link": "https://stackoverflow.com/questions/35758710/how-do-i-get-the-selected-and-deselected-items-in-a-qtreewidget", "title": "How do I get the selected and deselected items in a QTreeWidget?", "body": "<p>I have a tree-widget to which I am adding items. Now I need to call a custom procedure when the item is selected or the item previously selected is unselected (Note: I am learning both Python and Qt - the later seem to by a little too much for me).</p>\n\n<pre><code>for i in vector:\n     parent = QtGui.QTreeWidgetItem(treeWidget)\n     parent.setText(0, i[0])\n     parent.setText(1, i[1])\n     parent.setText(2,i[2])\n     parent.setCheckState(0,QtCore.Qt.Unchecked)\n</code></pre>\n"}, {"tags": ["python", "numpy", "matplotlib", "stackedbarseries"], "comments": [{"owner": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 1, "creation_date": 1456960875, "post_id": 35758702, "comment_id": 59193554, "body": "Could you rewrite your example to become easily executable?"}, {"owner": {"reputation": 4457, "user_id": 3590067, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003877435114/picture?type=large", "display_name": "emax", "link": "https://stackoverflow.com/users/3590067/emax"}, "reply_to_user": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1456961061, "post_id": 35758702, "comment_id": 59193636, "body": "Rewrite in which way?"}, {"owner": {"reputation": 60801, "user_id": 670206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d285c964555cd9953d70981fd03f27?s=128&d=identicon&r=PG", "display_name": "Suever", "link": "https://stackoverflow.com/users/670206/suever"}, "edited": false, "score": 0, "creation_date": 1456967463, "post_id": 35758702, "comment_id": 59195728, "body": "@emax Write it so that we can copy/paste your code into python to generate your DataFrame <code>df</code> so we don&#39;t have to manually create it."}, {"owner": {"reputation": 4457, "user_id": 3590067, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003877435114/picture?type=large", "display_name": "emax", "link": "https://stackoverflow.com/users/3590067/emax"}, "reply_to_user": {"reputation": 60801, "user_id": 670206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d285c964555cd9953d70981fd03f27?s=128&d=identicon&r=PG", "display_name": "Suever", "link": "https://stackoverflow.com/users/670206/suever"}, "edited": false, "score": 0, "creation_date": 1457020047, "post_id": 35758702, "comment_id": 59225041, "body": "@Suever I changed the description. Is that ok in this way?"}, {"owner": {"reputation": 4457, "user_id": 3590067, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003877435114/picture?type=large", "display_name": "emax", "link": "https://stackoverflow.com/users/3590067/emax"}, "reply_to_user": {"reputation": 6738, "user_id": 906693, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba54c2f46f424128b4ba467eb8d0e138?s=128&d=identicon&r=PG", "display_name": "roadrunner66", "link": "https://stackoverflow.com/users/906693/roadrunner66"}, "edited": false, "score": 0, "creation_date": 1457042128, "post_id": 35758702, "comment_id": 59239066, "body": "@roadrunner66 is that okay?"}], "answers": [{"tags": [], "owner": {"reputation": 2378, "user_id": 2436776, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0fa92e8a60289d86a5b21ffd636e3501?s=128&d=identicon&r=PG", "display_name": "zaxliu", "link": "https://stackoverflow.com/users/2436776/zaxliu"}, "is_accepted": true, "score": 0, "last_activity_date": 1457048359, "creation_date": 1457048359, "answer_id": 35785275, "question_id": 35758702, "link": "https://stackoverflow.com/questions/35758702/matplotlib-how-to-create-stacked-bar-plot-from-pandas-data-frame/35785275#35785275", "title": "Matplotlib: how to create stacked bar plot from pandas data frame?", "body": "<p>You have to use apply for the flexible type of 'agg' after <code>groupby</code>:</p>\n\n<pre><code>df1['People'] = df1['Name_y'].apply(lambda x: tuple(x))\ndf1['Times'] = df1['Name_y'].apply(lambda x: [x.count(name) for name in list(set(x))])\ns = df1.groupby(['Name_x','People']).apply(lambda x: sum(x.iloc[0]['Times']))\n</code></pre>\n\n<p>Then you get the following</p>\n\n<pre><code>Name_x   People                                   \nFrank    (Tom,)                                       1\nJames    (Tom, John, Richard)                         3\nJohn     (Tom, Paul, Tom, Richard, James)             5\nPaul     (Tom, John)                                  2\nRichard  (Tom, John, James)                           3\nTom      (John, Paul, Frank, John, Richard, James)    6\ndtype: int64\n</code></pre>\n\n<p>And you can plot as you like</p>\n\n<pre><code>s.plot(kind='bar', stacked=True)\n</code></pre>\n"}], "owner": {"reputation": 4457, "user_id": 3590067, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100003877435114/picture?type=large", "display_name": "emax", "link": "https://stackoverflow.com/users/3590067/emax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 898, "favorite_count": 0, "accepted_answer_id": 35785275, "answer_count": 1, "score": 1, "last_activity_date": 1457048359, "creation_date": 1456955072, "last_edit_date": 1457042691, "question_id": 35758702, "link": "https://stackoverflow.com/questions/35758702/matplotlib-how-to-create-stacked-bar-plot-from-pandas-data-frame", "title": "Matplotlib: how to create stacked bar plot from pandas data frame?", "body": "<p>Starting from the following</p>\n\n<pre><code>df = pd.DataFrame( {'Item':['A','A','A','B','B','C','C','C','C'], \n    'Name': ['Tom','John','Paul','Tom','Frank','Tom', 'John', 'Richard', 'James'],\n    'Total':[3,3,3,2,2,4,4,4,4]})\nprint df\n  Item     Name\n0    A      Tom\n1    A     John\n2    A     Paul\n3    B      Tom\n4    B    Frank\n5    C      Tom\n6    C     John\n7    C  Richard\n8    C    James\n\n#merge M:N by column Item\ndf1 = pd.merge(df, df, on=['Item'])\n\n#remove duplicity - column Name_x == Name_y\ndf1 = df1[~(df1['Name_x'] == df1['Name_y'])]\n#print df1\n\n#create lists\ndf1 = df1.groupby('Name_x')['Name_y'].apply(lambda x: x.tolist()).reset_index()\nprint df1\n    Name_x                                     Name_y\n0    Frank                                      [Tom]\n1    James                       [Tom, John, Richard]\n2     John           [Tom, Paul, Tom, Richard, James]\n3     Paul                                [Tom, John]\n4  Richard                         [Tom, John, James]\n5      Tom  [John, Paul, Frank, John, Richard, James]\n</code></pre>\n\n<p>I have a dataframe as the following:</p>\n\n<pre><code>print df \n      Name                               People            times\n0    Frank                                [Tom]              [1]\n1    James                 [John, Richard, Tom]        [1, 1, 1]\n2     John          [James, Paul, Richard, Tom]     [1, 1, 1, 2]\n3     Paul                          [John, Tom]           [1, 1]\n4  Richard                   [James, John, Tom]        [1, 1, 1]\n5      Tom  [Frank, James, John, Paul, Richard]  [1, 1, 2, 1, 1]\n</code></pre>\n\n<p>I want to create a stacked bar plot for each <code>Name</code> considering <code>People</code> as bar and <code>times</code> as values.</p>\n\n<p>I want to do something like this</p>\n\n<pre><code>sub_df = df.groupby(['Name','People'])['Times'].sum().unstack()\nsub_df.plot(kind='bar',stacked=True)\n</code></pre>\n\n<p>but it returns</p>\n\n<blockquote>\n  <p>TypeError: unhashable type: 'numpy.ndarray'</p>\n</blockquote>\n"}, {"tags": ["python", "django", "django-models"], "answers": [{"comments": [{"owner": {"reputation": 688, "user_id": 1193487, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d5de3e47ec1a1d37eed65be9d8c352ad?s=128&d=identicon&r=PG", "display_name": "Ewanw", "link": "https://stackoverflow.com/users/1193487/ewanw"}, "edited": false, "score": 0, "creation_date": 1456960246, "post_id": 35759189, "comment_id": 59193312, "body": "After looking around can I not do the following (taken from <a href=\"http://stackoverflow.com/questions/20895429/how-exactly-do-django-content-types-work\" title=\"how exactly do django content types work\">stackoverflow.com/questions/20895429/&hellip;</a>):  reviews= generic.GenericRelation(&#39;Review&#39;)    As for usability. I also look up reviews for a given wine (using some kind of helper that I don&#39;t quite understand)... Wil that work?  i.e. in a template {% for review in wine.review_set.all %}"}, {"owner": {"reputation": 688, "user_id": 1193487, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d5de3e47ec1a1d37eed65be9d8c352ad?s=128&d=identicon&r=PG", "display_name": "Ewanw", "link": "https://stackoverflow.com/users/1193487/ewanw"}, "edited": false, "score": 0, "creation_date": 1456993866, "post_id": 35759189, "comment_id": 59205697, "body": "{% for review in wine.reviews.all %} and every variation I can think of no longer work :/"}], "tags": [], "owner": {"reputation": 48521, "user_id": 396300, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c0c19aef83a8c37f830d9a2f63d36b77?s=128&d=identicon&r=PG", "display_name": "Timmy O&#39;Mahony", "link": "https://stackoverflow.com/users/396300/timmy-omahony"}, "is_accepted": true, "score": 1, "last_activity_date": 1456956688, "creation_date": 1456956688, "answer_id": 35759189, "question_id": 35758692, "link": "https://stackoverflow.com/questions/35758692/django-sharing-one-model-between-two-others/35759189#35759189", "title": "Django sharing one model between two others", "body": "<p>I think <a href=\"https://docs.djangoproject.com/en/1.9/ref/contrib/contenttypes/#generic-relations\" rel=\"nofollow\">Generic Foreign Key</a> is the answer. Something like:</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.contenttypes.fields import GenericForeignKey\nfrom django.contrib.contenttypes.models import ContentType\n\nclass Product(models.Model):\n     ...\n\nclass Food(Product):\n     ...\n\nclass Wine(Product):\n     ...\n\nclass Review(models.Model):\n    ...\n\n    content_type = models.ForeignKey(ContentType)\n    object_id = models.PositiveIntegerField()\n    content_object = GenericForeignKey('content_type', 'object_id')\n</code></pre>\n\n<p>This allows us to relate a review to any single record of any model in our project. The <code>content_type</code> field tracks which model you are trying to relate to (<code>Food</code> or <code>Wine</code> in this case). The <code>object_id</code> field track which record in the <code>Wine</code> or <code>Food</code> table we are trying to track. <code>content_object</code> is a convenience attribute that allows us direct access to the object (once the review has been saved).</p>\n\n<p>When creating a new review you just assign the <code>Wine</code> or <code>Food</code> to the <code>content_object</code> field:</p>\n\n<pre><code>wine = Wine.objects.get(...)\nreview = Review(..., content_object=wine)\nreview.save()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 688, "user_id": 1193487, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d5de3e47ec1a1d37eed65be9d8c352ad?s=128&d=identicon&r=PG", "display_name": "Ewanw", "link": "https://stackoverflow.com/users/1193487/ewanw"}, "edited": false, "score": 0, "creation_date": 1457477969, "post_id": 35759484, "comment_id": 59422718, "body": "I think this is a really cool technique and I could see it working where I wanted something more &#39;OO&#39; but simple inheritence through an abstract class is enough for my code re-use"}], "tags": [], "owner": {"reputation": 9497, "user_id": 1762988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/kLQV4.jpg?s=128&g=1", "display_name": "ilse2005", "link": "https://stackoverflow.com/users/1762988/ilse2005"}, "is_accepted": false, "score": 1, "last_activity_date": 1456957847, "creation_date": 1456957847, "answer_id": 35759484, "question_id": 35758692, "link": "https://stackoverflow.com/questions/35758692/django-sharing-one-model-between-two-others/35759484#35759484", "title": "Django sharing one model between two others", "body": "<p>You could also use <a href=\"https://docs.djangoproject.com/en/1.9/topics/db/models/#multi-table-inheritance\" rel=\"nofollow\">Multi-table inheritance</a> instead of an <code>AbstractClass</code> for <code>Item</code>. Then you can set a direct <code>ForeignKey</code> to <code>Item</code> in <code>Review</code>.\nYou can also combine this with <a href=\"http://django-model-utils.readthedocs.org/en/latest/managers.html#inheritancemanager\" rel=\"nofollow\"><code>InheritanceManager</code></a>:</p>\n\n<pre><code>from model_utils.managers import InheritanceManager\n\nclass Item(models.Model):\n    name =  models.CharField(max_length=30)\n    desc = models.CharField(blank=True,max_length=100)    \n\n    objects = InheritanceManager()    \n\nclass Wine(Item):\n\n    wine_type = models.ForeignKey(WineType)\n    wine_year = models.IntegerField( choices=YEAR_CHOICES, default=datetime.datetime.now().year)\n\n    source = models.ForeignKey(WineSource)\n\n    def __str__(self): \n        return self.source.name +' '+self.name+ ' ' + str(self.wine_type)+ ' '+ str(self.wine_year)\n\n\nclass Food(Item):\n\n    source = models.ForeignKey(FoodSource)\n\n    def __str__(self): \n        return self.source.name +' - '+self.name\n\nclass Review(models.Model):\n    rating = models.CharField(max_length=30)\n    value = models.CharField(max_length=30)\n    date = models.DateField(auto_now_add=True)\n    person = models.ForeignKey(Person)\n\n    item = models.ForeignKey(Item,null=True)\n\n    class Meta():\n        ordering = ['-date']\n</code></pre>\n\n<p>Then you can filter like this:</p>\n\n<pre><code>wine_reviews = Review.objects.exclude(item__wine__isnull=True)\n\nfood_reviews = Review.objects.exclude(item__food__isnull=True)\n\n# and all item (directly sub-classed as wine or food:\nitems = Item.objects.select_subclasses().all()\n</code></pre>\n"}], "owner": {"reputation": 688, "user_id": 1193487, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d5de3e47ec1a1d37eed65be9d8c352ad?s=128&d=identicon&r=PG", "display_name": "Ewanw", "link": "https://stackoverflow.com/users/1193487/ewanw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 35759189, "answer_count": 2, "score": 0, "last_activity_date": 1456957847, "creation_date": 1456955021, "last_edit_date": 1456956822, "question_id": 35758692, "link": "https://stackoverflow.com/questions/35758692/django-sharing-one-model-between-two-others", "title": "Django sharing one model between two others", "body": "<p>I built a system to review wines and foods. I quickly found myself repeating models and templates with tiny differences.</p>\n\n<p>Fundamentally it seems I want a review to relate to either a food or a wine. And each food or wine can have many reviews.</p>\n\n<p>I had an FK (current way) to both and just left one blank but given they're so similar I decided that wasn't wise.</p>\n\n<p>I then went to abstract models to at least generify the fields (new way) but as I couldn't  link to the generic item model I had a slightly more elegant code base for the same problem.</p>\n\n<p>Researching into this I'm wondering if a generic relation from the food and wine to the review is the way to go or maybe content types but I don't get quite how they work or if they are what I'm looking for.</p>\n\n<p><strong>Current way - Wines have brands, Foods have stores and Reviews have Foods and wines</strong></p>\n\n<pre><code>class Brand(models.Model):\n    brand_name = models.CharField(max_length=30)\n    location = models.ForeignKey(Location, null=True,blank=True)\n\nimport datetime\nYEAR_CHOICES = []\nfor r in range(2005, (datetime.datetime.now().year+1)):\n    YEAR_CHOICES.append((r,r))\nYEAR_CHOICES = list(reversed(YEAR_CHOICES))\n\nclass Wine(models.Model):\n    wine_name = models.CharField(max_length=30)\n    wine_type = models.ForeignKey(WineType)\n    wine_year = models.IntegerField( choices=YEAR_CHOICES, default=datetime.datetime.now().year)\n\n    brand = models.ForeignKey(Brand)\n\nclass Store(models.Model):\n    store_name = models.CharField(max_length=30)\n\n    def __str__(self): \n        return self.store_name\n\nclass Food(models.Model):\n    food_name = models.CharField(max_length=30)\n    food_desc = models.CharField(blank=True,max_length=100)\n\n    store = models.ForeignKey(Store)\n\n    def __str__(self): \n        return self.store.store_name +' - '+self.food_name\n\nclass Review(models.Model):\n    rating = models.CharField(max_length=30)\n    value = models.CharField(max_length=30)\n    date = models.DateField(auto_now_add=True)\n    person = models.ForeignKey(Person)\n    comment = models.CharField(blank=True,max_length=100)\n    food = models.ForeignKey(Food, blank=True,default=None,null=True)\n    wine = models.ForeignKey(Wine, blank=True,default=None,null=True)\n\n    class Meta():\n        ordering = ['-date']\n</code></pre>\n\n<p><strong>New Way - Wines and Foods are Items, Stores and Brands are Sources, but reviews still need both Wines and foods</strong></p>\n\n<pre><code>class Source(models.Model):\n    name =  models.CharField(max_length=30)\n    desc = models.CharField(blank=True,max_length=100)\n    class Meta:\n        abstract = True\n\nclass Item(models.Model):\n    name =  models.CharField(max_length=30)\n    desc = models.CharField(blank=True,max_length=100)\n\n    class Meta:\n        abstract = True\n\n\n\nclass WineSource(Source):\n    location = models.ForeignKey(Location, null=True,blank=True)\n    class Meta():\n        ordering = ['location', 'name']\n\nclass FoodSource(Source):\n    def __str__(self): \n        return self.name\n\nimport datetime\nYEAR_CHOICES = []\nfor r in range(2005, (datetime.datetime.now().year+1)):\n    YEAR_CHOICES.append((r,r))\nYEAR_CHOICES = list(reversed(YEAR_CHOICES))\n\nclass Wine(Item):\n\n    wine_type = models.ForeignKey(WineType)\n    wine_year = models.IntegerField( choices=YEAR_CHOICES, default=datetime.datetime.now().year)\n\n    source = models.ForeignKey(WineSource)\n\n    def __str__(self): \n        return self.source.name +' '+self.name+ ' ' + str(self.wine_type)+ ' '+ str(self.wine_year)\n\nclass Food(Item):\n\n\n    source = models.ForeignKey(FoodSource)\n\n    def __str__(self): \n        return self.source.name +' - '+self.name\n\nclass Review(models.Model):\n    rating = models.CharField(max_length=30)\n    value = models.CharField(max_length=30)\n    date = models.DateField(auto_now_add=True)\n    person = models.ForeignKey(Person)\n\n    food = models.ForeignKey(Food, blank=True,default=None,null=True)\n    wine = models.ForeignKey(Wine, blank=True,default=None,null=True)\n    #Doesn't work as it's abstract- item = models.ForeignKey(Item,null=True)\n\n    class Meta():\n        ordering = ['-date']\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1456955313, "post_id": 35758620, "comment_id": 59190944, "body": "change go_trough_list(df) to go_trough_list(df[&#39;column_name&#39;])"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1456955455, "post_id": 35758620, "comment_id": 59191030, "body": "if you would give us more details what do you want to parse, sample input data and expected output then we could probably find another solution where you wouldn&#39;t have to iterate through your data frame..."}, {"owner": {"reputation": 453, "user_id": 6010142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/26e92880b947077a2ce7e868c5a869eb?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/6010142/ali"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1456956975, "post_id": 35758620, "comment_id": 59191835, "body": "My input data are Ids.  I want to create a list and insert additional data, which I get from another function for each id."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 1, "creation_date": 1456957103, "post_id": 35758620, "comment_id": 59191908, "body": "look at the Nick Brady&#39;s example  - it&#39;s exactly what you need, just apply <b>your</b> function instead"}], "answers": [{"comments": [{"owner": {"reputation": 453, "user_id": 6010142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/26e92880b947077a2ce7e868c5a869eb?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/6010142/ali"}, "edited": false, "score": 0, "creation_date": 1456955638, "post_id": 35758697, "comment_id": 59191131, "body": "My list looks like: 1 2 3 4, that is also my desired output.  But the program output is:  1    2 Name: 0, dtype: int64 1    3 Name: 1, dtype: int64 1    4 Name: 2, dtype: int64"}, {"owner": {"reputation": 3190, "user_id": 5496634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207922765092562/picture?type=large", "display_name": "Sam", "link": "https://stackoverflow.com/users/5496634/sam"}, "reply_to_user": {"reputation": 453, "user_id": 6010142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/26e92880b947077a2ce7e868c5a869eb?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/6010142/ali"}, "edited": false, "score": 0, "creation_date": 1456956023, "post_id": 35758697, "comment_id": 59191355, "body": "Can you post some sample rows of the dataframe?"}], "tags": [], "owner": {"reputation": 3190, "user_id": 5496634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207922765092562/picture?type=large", "display_name": "Sam", "link": "https://stackoverflow.com/users/5496634/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1456955057, "creation_date": 1456955057, "answer_id": 35758697, "question_id": 35758620, "link": "https://stackoverflow.com/questions/35758620/iterating-over-each-element-in-pandas-dataframe/35758697#35758697", "title": "Iterating over each element in pandas DataFrame", "body": "<p>Say you have one column named 'myColumn', and you have an index on the dataframe (which is automatically created with read_csv). Try using the .loc function:</p>\n\n<pre><code>for ix in df.index:\n    print(df.loc[ix]['myColumn'])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 453, "user_id": 6010142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/26e92880b947077a2ce7e868c5a869eb?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/6010142/ali"}, "edited": false, "score": 0, "creation_date": 1456956043, "post_id": 35758812, "comment_id": 59191369, "body": "My data has just a single column, so when I apply that code without [&#39;Colname&#39;] i get the error:  <code>AttributeError: &#39;DataFrame&#39; object has no attribute &#39;tolist&#39;</code>"}, {"owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "reply_to_user": {"reputation": 453, "user_id": 6010142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/26e92880b947077a2ce7e868c5a869eb?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/6010142/ali"}, "edited": false, "score": 0, "creation_date": 1456956101, "post_id": 35758812, "comment_id": 59191399, "body": "What is <code>print df.columns</code> ?"}, {"owner": {"reputation": 453, "user_id": 6010142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/26e92880b947077a2ce7e868c5a869eb?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/6010142/ali"}, "edited": false, "score": 0, "creation_date": 1456957846, "post_id": 35758812, "comment_id": 59192285, "body": "With adding <code>headings=None</code> I get:  <code>NameError: name &#39;columns&#39; is not defined</code>"}], "tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": false, "score": 4, "last_activity_date": 1456956749, "last_edit_date": 1456956749, "creation_date": 1456955471, "answer_id": 35758812, "question_id": 35758620, "link": "https://stackoverflow.com/questions/35758620/iterating-over-each-element-in-pandas-dataframe/35758812#35758812", "title": "Iterating over each element in pandas DataFrame", "body": "<p>You can convert column as <code>Series</code> <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.tolist.html\" rel=\"nofollow\"><code>tolist</code></a>:</p>\n\n<pre><code>for x in df['Colname'].tolist():\n    print x\n</code></pre>\n\n<p>Sample:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'a': pd.Series( [1, 2, 3]),\n                   'b': pd.Series( [4, 5, 6])})\nprint df\n   a  b\n0  1  4\n1  2  5\n2  3  6\n\nfor x in df['a'].tolist():\n    print x\n    1\n    2\n    3\n</code></pre>\n\n<p>If you have only one column, use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iloc.html\" rel=\"nofollow\"><code>iloc</code></a> for selecting first column:</p>\n\n<pre><code>for x in df.iloc[:,0].tolist():\n    print x\n</code></pre>\n\n<p>Sample:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({1: pd.Series( [2, 3, 4])})\nprint df\n   1\n0  2\n1  3\n2  4\n\nfor x in df.iloc[:,0].tolist():\n    print x\n    2\n    3\n    4  \n</code></pre>\n\n<p>This can work too, but it is not recommended approach, because <code>1</code> can be number or string and it can raise Key error:</p>\n\n<pre><code>for x in df[1].tolist():\n    print x\n2\n3\n4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 453, "user_id": 6010142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/26e92880b947077a2ce7e868c5a869eb?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/6010142/ali"}, "edited": false, "score": 0, "creation_date": 1456957637, "post_id": 35758940, "comment_id": 59192191, "body": "Thank you Nick, by applying your code its working. But only with the square function.  My function needs an additional parameter, which is called &#39;color&#39;. Its not part of the dataFrame."}, {"owner": {"reputation": 4578, "user_id": 5180047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Z8PTw2eJC9E/AAAAAAAAAAI/AAAAAAAAAco/2C4t6AgoQNc/photo.jpg?sz=128", "display_name": "Nick Brady", "link": "https://stackoverflow.com/users/5180047/nick-brady"}, "reply_to_user": {"reputation": 453, "user_id": 6010142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/26e92880b947077a2ce7e868c5a869eb?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/6010142/ali"}, "edited": false, "score": 0, "creation_date": 1456957901, "post_id": 35758940, "comment_id": 59192318, "body": "Hi Ali, the function can be defined however you want. I&#39;m not exactly sure what you&#39;re trying to accomplish with your function, but keep in mind what is essentially happening is mapping in python. <a href=\"https://docs.python.org/2/library/functions.html#map\" rel=\"nofollow noreferrer\">docs.python.org/2/library/functions.html#map</a> .Please accept if I answered your question :) thanks"}, {"owner": {"reputation": 453, "user_id": 6010142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/26e92880b947077a2ce7e868c5a869eb?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/6010142/ali"}, "edited": false, "score": 0, "creation_date": 1456958086, "post_id": 35758940, "comment_id": 59192415, "body": "Quick search told me that I can parse arguments with newer pandas. It actually works now. Thank you very much.!"}], "tags": [], "owner": {"reputation": 4578, "user_id": 5180047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Z8PTw2eJC9E/AAAAAAAAAAI/AAAAAAAAAco/2C4t6AgoQNc/photo.jpg?sz=128", "display_name": "Nick Brady", "link": "https://stackoverflow.com/users/5180047/nick-brady"}, "is_accepted": true, "score": 11, "last_activity_date": 1456956570, "last_edit_date": 1456956570, "creation_date": 1456955835, "answer_id": 35758940, "question_id": 35758620, "link": "https://stackoverflow.com/questions/35758620/iterating-over-each-element-in-pandas-dataframe/35758940#35758940", "title": "Iterating over each element in pandas DataFrame", "body": "<p>You can use the index as in other answers, and also iterate through the df and access the row like this:</p>\n\n<pre><code>for index, row in df.iterrows():\n    print(row['column'])\n</code></pre>\n\n<p>however, I suggest solving the problem differently if performance is of any concern. Also, if there is only one column, it is more correct to use a <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.html\" rel=\"noreferrer\">Pandas Series</a>. </p>\n\n<p>What do you mean by parse it into another function? Perhaps take the value, and do something to it and create it into another column?</p>\n\n<blockquote>\n  <p>I need to access each of the element, not to change it (with apply()) but to parse it into another function.</p>\n</blockquote>\n\n<p>Perhaps this example will help:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame([20, 21, 12])\ndef square(x):\n    return x**2\ndf['new_col'] = df[0].apply(square)  # can use a lambda here nicely\n</code></pre>\n"}], "owner": {"reputation": 453, "user_id": 6010142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/26e92880b947077a2ce7e868c5a869eb?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/6010142/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30759, "favorite_count": 1, "accepted_answer_id": 35758940, "answer_count": 3, "score": 6, "last_activity_date": 1456958373, "creation_date": 1456954733, "last_edit_date": 1456958373, "question_id": 35758620, "link": "https://stackoverflow.com/questions/35758620/iterating-over-each-element-in-pandas-dataframe", "title": "Iterating over each element in pandas DataFrame", "body": "<p>So I got a pandas DataFrame with a single column and a lot of data.</p>\n\n<p>I need to access each of the element, not to change it (with apply()) but to parse it into another function.</p>\n\n<p>When looping through the DataFrame it always stops after the first one.</p>\n\n<p>If I convert it to a list before, then my numbers are all in braces (eg. [12] instead of 12) thus breaking my code.</p>\n\n<p>Does anyone see what I am doing wrong?</p>\n\n<pre><code>import pandas as pd\n\ndef go_trough_list(df):\n  for number in df:\n    print(number)\n\ndf = pd.read_csv(\"my_ids.csv\")\ngo_trough_list(df)\n</code></pre>\n\n<p>df looks like:</p>\n\n<pre><code>   1\n0  2\n1  3\n2  4\ndtype: object\n[Finished in 1.1s]\n</code></pre>\n\n<p>Edit: I found one mistake. My first value is recognized as a header.\nSo I changed my code to:</p>\n\n<pre><code>df = pd.read_csv(\"my_ids.csv\",header=None)\n</code></pre>\n\n<p>But with </p>\n\n<pre><code>for ix in df.index:\n    print(df.loc[ix])\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>0    1\nName: 0, dtype: int64\n0    2\nName: 1, dtype: int64\n0    3\nName: 2, dtype: int64\n0    4\nName: 3, dtype: int64\n</code></pre>\n\n<p>edit: Here is my Solution thanks to jezrael and Nick!</p>\n\n<p>First I added <code>headings=None</code> because my data has no header.\nThen I changed my function to:</p>\n\n<pre><code>def go_through_list(df)\n    new_list = df[0].apply(my_function,parameter=par1)\n    return new_list\n</code></pre>\n\n<p>And it works perfectly! Thank you again guys, problem solved.</p>\n"}, {"tags": ["python", "numpy", "pandas", "matrix", "scipy"], "answers": [{"tags": [], "owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "is_accepted": false, "score": 2, "last_activity_date": 1456955802, "creation_date": 1456955802, "answer_id": 35758926, "question_id": 35758612, "link": "https://stackoverflow.com/questions/35758612/most-efficient-way-to-construct-similarity-matrix/35758926#35758926", "title": "Most efficient way to construct similarity matrix", "body": "<p>You want <code>scipy.spatial.distance.pdist</code> or <code>sklearn.metrics.pairwise.pairwise_distances</code></p>\n"}, {"comments": [{"owner": {"reputation": 16399, "user_id": 4016285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SvSVV.png?s=128&g=1", "display_name": "B. M.", "link": "https://stackoverflow.com/users/4016285/b-m"}, "edited": false, "score": 1, "creation_date": 1456957257, "post_id": 35758999, "comment_id": 59191999, "body": "Transpose first : In [247]: 1/(1+squareform(pdist(DF_var.T))) Out[247]:  array([[ 1.        ,  0.21596281,  0.05140761],        [ 0.21596281,  1.        ,  0.06302091],        [ 0.05140761,  0.06302091,  1.        ]])"}], "tags": [], "owner": {"reputation": 6320, "user_id": 4541548, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UbJoG.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/4541548/kevin"}, "is_accepted": false, "score": 2, "last_activity_date": 1456956041, "creation_date": 1456956041, "answer_id": 35758999, "question_id": 35758612, "link": "https://stackoverflow.com/questions/35758612/most-efficient-way-to-construct-similarity-matrix/35758999#35758999", "title": "Most efficient way to construct similarity matrix", "body": "<p>I think you can just use <code>pdist</code> and <a href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.spatial.distance.squareform.html\" rel=\"nofollow\"><code>squareform</code></a> to broadcast directly on your DataFrame:</p>\n\n<pre><code>from scipy.spatial.distance import pdist,squareform\n\nIn [6]: squareform(pdist(DF_var, metric='euclidean'))\n\nOut[6]:\narray([[ 0.        ,  0.6164414 ,  1.4525839 ,  0.78740079],\n       [ 0.6164414 ,  0.        ,  1.1       ,  0.24494897],\n       [ 1.4525839 ,  1.1       ,  0.        ,  0.87749644],\n       [ 0.78740079,  0.24494897,  0.87749644,  0.        ]])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1456961337, "post_id": 35759036, "comment_id": 59193739, "body": "Hey @root, thanks for clarifying the use of pdist and squareform!  Why is the diagonal matrix 0.0 after the similarity function?"}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1456962125, "post_id": 35759036, "comment_id": 59194035, "body": "Note! The  diagonal can be fixed with the comment in Kevin&#39;s answer from @B.M."}], "tags": [], "owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "is_accepted": true, "score": 11, "last_activity_date": 1456956141, "creation_date": 1456956141, "answer_id": 35759036, "question_id": 35758612, "link": "https://stackoverflow.com/questions/35758612/most-efficient-way-to-construct-similarity-matrix/35759036#35759036", "title": "Most efficient way to construct similarity matrix", "body": "<p>There are two useful function within <code>scipy.spatial.distance</code> that you can use for this: <a href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.spatial.distance.pdist.html#scipy.spatial.distance.pdist\" rel=\"noreferrer\"><code>pdist</code></a> and <a href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.spatial.distance.squareform.html#scipy.spatial.distance.squareform\" rel=\"noreferrer\"><code>squareform</code></a>.  Using <code>pdist</code> will give you the pairwise distance between observations as a one-dimensional array, and <code>squareform</code> will convert this to a distance matrix.</p>\n\n<p>One catch is that <code>pdist</code> uses distance measures by default, and not similarity, so you'll need to manually specify your similarity function. Judging by the commented output in your code, your DataFrame is also not in the orientation <code>pdist</code> expects, so I've undone the transpose you did in your code.</p>\n\n<pre><code>import pandas as pd\nfrom scipy.spatial.distance import euclidean, pdist, squareform\n\n\ndef similarity_func(u, v):\n    return 1/(1+euclidean(u,v))\n\nDF_var = pd.DataFrame.from_dict({\"s1\":[1.2,3.4,10.2],\"s2\":[1.4,3.1,10.7],\"s3\":[2.1,3.7,11.3],\"s4\":[1.5,3.2,10.9]})\nDF_var.index = [\"g1\",\"g2\",\"g3\"]\n\ndists = pdist(DF_var, similarity_func)\nDF_euclid = pd.DataFrame(squareform(dists), columns=DF_var.index, index=DF_var.index)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 184, "user_id": 9789147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ee9984ac19e3429c101012631eca166?s=128&d=identicon&r=PG&f=1", "display_name": "moritz", "link": "https://stackoverflow.com/users/9789147/moritz"}, "edited": false, "score": 0, "creation_date": 1571333347, "post_id": 49868314, "comment_id": 103215731, "body": "How would you compute the cosine distance / similarity with your method?"}, {"owner": {"reputation": 6211, "user_id": 2846766, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/36e89f13bb210e355ae8bddd1df28077?s=128&d=identicon&r=PG", "display_name": "mightypile", "link": "https://stackoverflow.com/users/2846766/mightypile"}, "reply_to_user": {"reputation": 184, "user_id": 9789147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ee9984ac19e3429c101012631eca166?s=128&d=identicon&r=PG&f=1", "display_name": "moritz", "link": "https://stackoverflow.com/users/9789147/moritz"}, "edited": false, "score": 1, "creation_date": 1571333911, "post_id": 49868314, "comment_id": 103215986, "body": "@moritz - This solution uses a function that&#39;s explicitly for Euclidean distance, which I use a lot. Possibly, scipy.spatial.distance.cosine (<a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cosine.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/scipy/reference/generated/&hellip;</a>) would do what you want. But I haven&#39;t used or tested it. You should try it out and ask a new question if just replacing the distance_matrix function with distance.cosine doesn&#39;t work out."}], "tags": [], "owner": {"reputation": 6211, "user_id": 2846766, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/36e89f13bb210e355ae8bddd1df28077?s=128&d=identicon&r=PG", "display_name": "mightypile", "link": "https://stackoverflow.com/users/2846766/mightypile"}, "is_accepted": false, "score": 1, "last_activity_date": 1523927087, "creation_date": 1523927087, "answer_id": 49868314, "question_id": 35758612, "link": "https://stackoverflow.com/questions/35758612/most-efficient-way-to-construct-similarity-matrix/49868314#49868314", "title": "Most efficient way to construct similarity matrix", "body": "<p>The simplest way I can find to get the same result as the OP is to use <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance_matrix.html\" rel=\"nofollow noreferrer\">distance_matrix</a>, also from scipy.spatial. The whole thing can be done in one sort-of-long line.</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nfrom scipy.spatial import distance_matrix\n\n# Original code from OP, slightly reformatted\nDF_var = pd.DataFrame.from_dict({\n    \"s1\":[1.2,3.4,10.2],\n    \"s2\":[1.4,3.1,10.7],\n    \"s3\":[2.1,3.7,11.3],\n    \"s4\":[1.5,3.2,10.9]\n}).T\nDF_var.columns = [\"g1\",\"g2\",\"g3\"]\n\n# Whole similarity algorithm in one line\ndf_euclid = pd.DataFrame(\n    1 / (1 + distance_matrix(DF_var.T, DF_var.T)),\n    columns=DF_var.columns, index=DF_var.columns\n)\n\n#           g1        g2        g3\n# g1  1.000000  0.215963  0.051408\n# g2  0.215963  1.000000  0.063021\n# g3  0.051408  0.063021  1.000000\n</code></pre>\n\n<p>The code above should copy-paste and run in any python IDE.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5088928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448792983b177d4210d0278fa3c77dbc?s=128&d=identicon&r=PG", "display_name": "Ha Pham", "link": "https://stackoverflow.com/users/5088928/ha-pham"}, "is_accepted": false, "score": 0, "last_activity_date": 1527929593, "creation_date": 1527929593, "answer_id": 50655166, "question_id": 35758612, "link": "https://stackoverflow.com/questions/35758612/most-efficient-way-to-construct-similarity-matrix/50655166#50655166", "title": "Most efficient way to construct similarity matrix", "body": "<p>This is what I did:</p>\n\n<pre><code>from scipy.spatial.distance import euclidean\n\nDF_var = pd.DataFrame.from_dict({\"s1\":[1.2,3.4,10.2],\"s2\":[1.4,3.1,10.7],\"s3\":[2.1,3.7,11.3],\"s4\":[1.5,3.2,10.9]}).T\nDF_var.columns = [\"g1\",\"g2\",\"g3\"]\n\ndef m_euclid(v1, v2):\n    return (1/(1 + euclidean(v1,v2)))\n\ndist_list = []\nfor j1 in DF_var.columns:\n    dist_list.append([m_euclid(DF_var[j1], DF_var[j2]) for j2 in DF_var.columns])\n\ndist_matrix = pd.DataFrame(dist_list)\n</code></pre>\n"}], "owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22693, "favorite_count": 3, "accepted_answer_id": 35759036, "answer_count": 5, "score": 11, "last_activity_date": 1527929593, "creation_date": 1456954689, "last_edit_date": 1492087453, "question_id": 35758612, "link": "https://stackoverflow.com/questions/35758612/most-efficient-way-to-construct-similarity-matrix", "title": "Most efficient way to construct similarity matrix", "body": "<p>I'm using the following links to create a \"Euclidean Similarity Matrix\" (that I convert to a DataFrame). \n<a href=\"https://stats.stackexchange.com/questions/53068/euclidean-distance-score-and-similarity\">https://stats.stackexchange.com/questions/53068/euclidean-distance-score-and-similarity</a>\n<a href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.spatial.distance.euclidean.html\" rel=\"noreferrer\">http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.spatial.distance.euclidean.html</a></p>\n\n<p>The way I'm doing it is an iterative approach which works but it takes a while when the datasets are big. The pandas pd.DataFrame.corr() is really fast and useful for pearson correlations.  </p>\n\n<p><strong>How can I perform a Euclidean Similarity measure w/o exhaustive iteration?</strong> </p>\n\n<p>My naive code below:</p>\n\n<pre><code>#Euclidean Similarity\n\n#Create DataFrame\nDF_var = pd.DataFrame.from_dict({\"s1\":[1.2,3.4,10.2],\"s2\":[1.4,3.1,10.7],\"s3\":[2.1,3.7,11.3],\"s4\":[1.5,3.2,10.9]}).T\nDF_var.columns = [\"g1\",\"g2\",\"g3\"]\n#      g1   g2    g3\n# s1  1.2  3.4  10.2\n# s2  1.4  3.1  10.7\n# s3  2.1  3.7  11.3\n# s4  1.5  3.2  10.9\n\n#Create empty matrix to fill\nM_euclid = np.zeros((DF_var.shape[1],DF_var.shape[1]))\n\n#Iterate through DataFrame columns to measure euclidean distance\nfor i in range(DF_var.shape[1]):\n    u = DF_var[DF_var.columns[i]]\n    for j in range(DF_var.shape[1]):\n        v = DF_var[DF_var.columns[j]]\n        #Euclidean distance -&gt; Euclidean similarity\n        M_euclid[i,j] = (1/(1+sp.spatial.distance.euclidean(u,v)))\nDF_euclid = pd.DataFrame(M_euclid,columns=DF_var.columns,index=DF_var.columns)\n\n#           g1        g2        g3\n# g1  1.000000  0.215963  0.051408\n# g2  0.215963  1.000000  0.063021\n# g3  0.051408  0.063021  1.000000\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1456955741, "post_id": 35758566, "comment_id": 59191179, "body": "Do you want to edit the existing dictionary or create a new dictionary? Does anything need to be done about colliding keys?"}, {"owner": {"reputation": 79, "user_id": 5495028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49046a12a2dfb147aa15263474e0c702?s=128&d=identicon&r=PG", "display_name": "GreyTek", "link": "https://stackoverflow.com/users/5495028/greytek"}, "reply_to_user": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1456955911, "post_id": 35758566, "comment_id": 59191283, "body": "All of the keys are unique, ideally the spaces would be removed from the existing dictionary keys."}], "answers": [{"comments": [{"owner": {"reputation": 3151, "user_id": 5865420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AF0Nt.jpg?s=128&g=1", "display_name": "pp_", "link": "https://stackoverflow.com/users/5865420/pp"}, "edited": false, "score": 0, "creation_date": 1456954869, "post_id": 35758583, "comment_id": 59190695, "body": "What about <code>iteritems()</code> for the Python 2 version?"}, {"owner": {"reputation": 79, "user_id": 5495028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49046a12a2dfb147aa15263474e0c702?s=128&d=identicon&r=PG", "display_name": "GreyTek", "link": "https://stackoverflow.com/users/5495028/greytek"}, "edited": false, "score": 0, "creation_date": 1456955538, "post_id": 35758583, "comment_id": 59191082, "body": "This is on Python 2.6.6 so dictionary comprehension isn&#39;t working"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 79, "user_id": 5495028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49046a12a2dfb147aa15263474e0c702?s=128&d=identicon&r=PG", "display_name": "GreyTek", "link": "https://stackoverflow.com/users/5495028/greytek"}, "edited": false, "score": 0, "creation_date": 1456955762, "post_id": 35758583, "comment_id": 59191192, "body": "@GreyTek: then use <a href=\"https://stackoverflow.com/a/21069676\">Alternative to dict comprehension prior to Python 2.7</a>"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 11, "last_activity_date": 1456959053, "last_edit_date": 1495540009, "creation_date": 1456954587, "answer_id": 35758583, "question_id": 35758566, "link": "https://stackoverflow.com/questions/35758566/remove-space-from-dictionary-keys/35758583#35758583", "title": "Remove space from dictionary keys", "body": "<p>You can process all keys in a dictionary comprehension; you could use <code>str.translate()</code> to remove the spaces; the Python 2 version for that is:</p>\n\n<pre><code>{k.translate(None, ' '): v for k, v in dictionary.iteritems()}\n</code></pre>\n\n<p>and the Python 3 version is:</p>\n\n<pre><code>{k.translate({32: None}): v for k, v in dictionary.items()}\n</code></pre>\n\n<p>You could also use <code>str.replace()</code> to remove the spaces:</p>\n\n<pre><code>{k.replace(' ', ''): v for k, v in dictionary.items()}\n</code></pre>\n\n<p>But this may be slower for longer keys; see <a href=\"https://stackoverflow.com/questions/31143290/python-str-translate-vs-str-replace\">Python str.translate VS str.replace</a></p>\n\n<p>Note that these produce a <em>new</em> dictionary.</p>\n\n<p>Demo on Python 2:</p>\n\n<pre><code>&gt;&gt;&gt; d = {'C  14': ['15263808', '13210478'], 'W   1': ['13122205']}\n&gt;&gt;&gt; {k.translate(None, ' '): v for k, v in d.iteritems()}\n{'W1': ['13122205'], 'C14': ['15263808', '13210478']}\n</code></pre>\n\n<p>And a 2.6 compatible version (using <a href=\"https://stackoverflow.com/questions/21069668/alternative-to-dict-comprehension-prior-to-python-2-7/21069676#21069676\">Alternative to dict comprehension prior to Python 2.7</a>):</p>\n\n<pre><code>dict((k.translate(None, ' '), v) for k, v in dictionary.iteritems())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 79, "user_id": 5495028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49046a12a2dfb147aa15263474e0c702?s=128&d=identicon&r=PG", "display_name": "GreyTek", "link": "https://stackoverflow.com/users/5495028/greytek"}, "edited": false, "score": 0, "creation_date": 1456955680, "post_id": 35758668, "comment_id": 59191145, "body": "This is on Python 2.6.6 so dictionary comprehension isn&#39;t working"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 79, "user_id": 5495028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49046a12a2dfb147aa15263474e0c702?s=128&d=identicon&r=PG", "display_name": "GreyTek", "link": "https://stackoverflow.com/users/5495028/greytek"}, "edited": false, "score": 0, "creation_date": 1456956673, "post_id": 35758668, "comment_id": 59191667, "body": "@GreyTek just replace it with a gen exp and a dict call"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 4, "last_activity_date": 1456956609, "last_edit_date": 1456956609, "creation_date": 1456954929, "answer_id": 35758668, "question_id": 35758566, "link": "https://stackoverflow.com/questions/35758566/remove-space-from-dictionary-keys/35758668#35758668", "title": "Remove space from dictionary keys", "body": "<p>You can also just use <code>str.replace</code>:</p>\n\n<pre><code>In [4]: d = {'C  14': ['15263808', '13210478'], 'W   1': ['13122205']}\n\nIn [5]: d = {k.replace(\" \",\"\"): v for k,v in d.items()}\n\nIn [6]: d\nOut[6]: {'C14': ['15263808', '13210478'], 'W1': ['13122205']}\n</code></pre>\n\n<p>For python2.6:</p>\n\n<pre><code>d = dict((k.replace(\" \",\"\"),v)  for k,v in d.items())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1456958268, "post_id": 35758978, "comment_id": 59192480, "body": "Drop the square brackets; no point in building a list first where a generator expression will do."}], "tags": [], "owner": {"reputation": 3055, "user_id": 735893, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5970da463301e1fb98b1b524c633b0f9?s=128&d=identicon&r=PG", "display_name": "Vader", "link": "https://stackoverflow.com/users/735893/vader"}, "is_accepted": false, "score": 1, "last_activity_date": 1456958531, "last_edit_date": 1456958531, "creation_date": 1456955968, "answer_id": 35758978, "question_id": 35758566, "link": "https://stackoverflow.com/questions/35758566/remove-space-from-dictionary-keys/35758978#35758978", "title": "Remove space from dictionary keys", "body": "<p>Without dict comprehension:</p>\n\n<pre><code>&gt;&gt;&gt; d = {'C  14': ['15263808', '13210478'], 'W   1': ['13122205']}\n&gt;&gt;&gt; dict(((k.replace(' ',''),v) for k,v in d.items()))\n{'W1': ['13122205'], 'C14': ['15263808', '13210478']}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1456958324, "post_id": 35759061, "comment_id": 59192505, "body": "Translate should actually be faster; perhaps I need to retime for single character replacements though."}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1456958426, "post_id": 35759061, "comment_id": 59192558, "body": "@StevenRumbalski I fixed the deleting key issue, the author is using Python 2.6, so no need to consider Python 3.X."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1456958708, "post_id": 35759061, "comment_id": 59192686, "body": "See <a href=\"http://stackoverflow.com/questions/31143290/python-str-translate-vs-str-replace\" title=\"python str translate vs str replace\">stackoverflow.com/questions/31143290/&hellip;</a>"}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1456958791, "post_id": 35759061, "comment_id": 59192723, "body": "@MartijnPieters From my tests, <code>replace</code> was running 1-2% faster than <code>translate</code> for a single character replacement in this scenario; good to know that in general <code>translate</code> will be faster."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1456958798, "post_id": 35759061, "comment_id": 59192732, "body": "Are your timsings still accurate with the updated code? Can you share your benchmark?"}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1456959050, "post_id": 35759061, "comment_id": 59192844, "body": "@MartijnPieters No, they are not still accurate, now <code>translate</code> is running about 3X faster than <code>replace</code>."}], "tags": [], "owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "is_accepted": false, "score": 1, "last_activity_date": 1456959003, "last_edit_date": 1456959003, "creation_date": 1456956219, "answer_id": 35759061, "question_id": 35758566, "link": "https://stackoverflow.com/questions/35758566/remove-space-from-dictionary-keys/35759061#35759061", "title": "Remove space from dictionary keys", "body": "<p>Here's a solution without a <code>dict</code> comprehension, that edits the dictionary in-place, and assumes that no two old keys will map to the same new key.</p>\n\n<pre><code>d = {'C  14': ['15263808', '13210478'], 'W   1': ['13122205']}\n\nfor key in d.keys():\n    if ' ' in key:\n        d[key.translate(None, ' ')] = d[key]\n        del d[key]\n\nprint d # {'W1': ['13122205'], 'C14': ['15263808', '13210478']}\n</code></pre>\n\n<p>After some timing, this is about 25% quicker than creating a new dictionary.</p>\n\n<p>The loop iterates over <code>d.keys()</code> rather than <code>d</code> directly to avoid revisiting keys and avoid the whole \"iterating over a changing object\" issue.</p>\n"}], "owner": {"reputation": 79, "user_id": 5495028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/49046a12a2dfb147aa15263474e0c702?s=128&d=identicon&r=PG", "display_name": "GreyTek", "link": "https://stackoverflow.com/users/5495028/greytek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8972, "favorite_count": 0, "accepted_answer_id": 35758583, "answer_count": 4, "score": 3, "last_activity_date": 1456959053, "creation_date": 1456954538, "last_edit_date": 1456954656, "question_id": 35758566, "link": "https://stackoverflow.com/questions/35758566/remove-space-from-dictionary-keys", "title": "Remove space from dictionary keys", "body": "<p>I have a dictionary with keys/values such as:</p>\n\n<pre><code>{'C  14': ['15263808', '13210478'], 'W   1': ['13122205']}\n</code></pre>\n\n<p>How can I remove the white space from all of the keys so they instead would be:</p>\n\n<pre><code>{'C14': ['15263808', '13210478'], 'W1': ['13122205']}\n</code></pre>\n"}, {"tags": ["python", "c++", "qt", "plot", "3d"], "answers": [{"tags": [], "owner": {"reputation": 3696, "user_id": 1104179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lZY6X.gif?s=128&g=1", "display_name": "Rethunk", "link": "https://stackoverflow.com/users/1104179/rethunk"}, "is_accepted": false, "score": 0, "last_activity_date": 1456981444, "creation_date": 1456981444, "answer_id": 35763603, "question_id": 35758555, "link": "https://stackoverflow.com/questions/35758555/tools-for-plotting-qvector3d-data/35763603#35763603", "title": "Tools for plotting QVector3D data?", "body": "<p>This might help, though I haven't used it:</p>\n\n<p><a href=\"http://doc.qt.io/QtDataVisualization/\" rel=\"nofollow\">http://doc.qt.io/QtDataVisualization/</a></p>\n\n<p>Spend a little time looking into <strong>OpenGL</strong>. To display OpenGL scenes in Qt you would use QGLWidget (for Qt 4.x) or QOpenGLWidget (for Qt 5.x). OpenGL allows you to write graphics that run on a GPU card, meaning you can tap into the same horsepower used for 3D video games. Given time and inclination, you can build up a good 3D graphics library.</p>\n\n<p><a href=\"https://www.opengl.org/\" rel=\"nofollow\">https://www.opengl.org/</a></p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qopenglwidget.html\" rel=\"nofollow\">http://doc.qt.io/qt-5/qopenglwidget.html</a></p>\n\n<p>The Qt tutorials can help, but you'll also want to read other OpenGL tutorials. Here are some tutorials targeting older versions of Qt:</p>\n\n<p><a href=\"ftp://ftp.informatik.hu-berlin.de/pub1/Mirrors/ftp.troll.no/QT/pub/developerguides/qtopengltutorial/OpenGLTutorial.pdf\" rel=\"nofollow\">ftp://ftp.informatik.hu-berlin.de/pub1/Mirrors/ftp.troll.no/QT/pub/developerguides/qtopengltutorial/OpenGLTutorial.pdf</a></p>\n\n<p><a href=\"http://www.decom.ufop.br/sibgrapi2012/eproceedings/tutorials/t3-survey_paper.pdf\" rel=\"nofollow\">http://www.decom.ufop.br/sibgrapi2012/eproceedings/tutorials/t3-survey_paper.pdf</a></p>\n\n<p>Tutorials tend to start with \"immediate mode\" examples, meaning the CPU is continually involved with updating data and writing that data to the GPU. As soon as you grasp the basics you'll want to implement \"retained mode\" code, meaning (very loosely) that the GPU manages the data and the need for CPU resources is minimized.</p>\n\n<p>All that said, getting into OpenGL is a commitment. If you want the user to be able to change the viewpoint of the chart, or zoom in/out, or mouse over a plot to check individual values, etc., then it will take some time to implement. For a standard that's so widely use it's odd that the documentation and available textbooks aren't better--don't expect to find the OpenGL textbook equivalent of Kernighan &amp; Ritchie or the Perl camel book.</p>\n\n<p>There may be some Qt 3D graphing project somewhere that enjoys active development, and with luck maybe some other SO user will know about one. </p>\n"}], "owner": {"reputation": 11, "user_id": 6010141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6ff99d967f9a7d02d5f5bef051523f8?s=128&d=identicon&r=PG&f=1", "display_name": "mar77", "link": "https://stackoverflow.com/users/6010141/mar77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456981444, "creation_date": 1456954513, "question_id": 35758555, "link": "https://stackoverflow.com/questions/35758555/tools-for-plotting-qvector3d-data", "title": "Tools for plotting QVector3D data?", "body": "<p>I have a series of points (x,y,z) that I would like to plot as a vector in a 3D plane. <a href=\"http://i.stack.imgur.com/xNn68.png\" rel=\"nofollow\">Something like this.</a></p>\n\n<p>I am successfully using QCustomPlot elsewhere, but the documentation says it cannot be used for 3D plots. Googling turned up QwtPlot3D, but it hasn't been maintained since 2007, as far as I can tell, and I don't want to run into any problems since I'm using Qt5. I was also looking at QtCharts but can't seem to find any example of plotting x,y,z data points.</p>\n\n<p>Does anyone have tips for including a 3D graph in my C++/Qt application? Is there a tool that would work better with Python with Qt, rather than C++? Or another technology entirely? This graph will be part of a larger UI.</p>\n"}, {"tags": ["python", "django", "selenium", "web-scraping", "search-engine"], "comments": [{"owner": {"reputation": 4879, "user_id": 954442, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/168149d073db878da990e57c891911cd?s=128&d=identicon&r=PG", "display_name": "Andrew Regan", "link": "https://stackoverflow.com/users/954442/andrew-regan"}, "edited": false, "score": 1, "creation_date": 1456956982, "post_id": 35758515, "comment_id": 59191840, "body": "Yes, of course it can be done, but it may well involve a rearchitecture of your solution. Even without that, we&#39;d need proper metrics/logs to know where the time was being spent. Not to mention something about your usage patterns: you can&#39;t satisfy every single user by magic. And your algorithm could be incredibly complex or powerful."}, {"owner": {"reputation": 233, "user_id": 775394, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/de7a84d8cbd33b597070334a04cba12f?s=128&d=identicon&r=PG", "display_name": "JBear", "link": "https://stackoverflow.com/users/775394/jbear"}, "reply_to_user": {"reputation": 4879, "user_id": 954442, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/168149d073db878da990e57c891911cd?s=128&d=identicon&r=PG", "display_name": "Andrew Regan", "link": "https://stackoverflow.com/users/954442/andrew-regan"}, "edited": false, "score": 0, "creation_date": 1456957564, "post_id": 35758515, "comment_id": 59192156, "body": "@AndrewRegan I know I can&#39;t satisfy every user, but the &quot;lengthy&quot; wait time is a common complaint. I&#39;m willing to do whatever it takes to make it better, even it means I need to scale up hardware. Which metrics, logs, and usage patterns would you need specifically?   Basically, once users hit the search button, they&#39;re taken to a loading page. After about 30s-2min, they&#39;re taken to the search results page where I lazy load chunks of the search results."}, {"owner": {"reputation": 4879, "user_id": 954442, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/168149d073db878da990e57c891911cd?s=128&d=identicon&r=PG", "display_name": "Andrew Regan", "link": "https://stackoverflow.com/users/954442/andrew-regan"}, "edited": false, "score": 0, "creation_date": 1456958279, "post_id": 35758515, "comment_id": 59192483, "body": "Realistically I don&#39;t think SO is the format for this, as it&#39;s for specific problems not s/w consultancy. However, I&#39;ll say that you&#39;ll never get ~ 3 second turnarounds with Selenium anywhere in the stack. Going further, you want that data before the user has even hit Search: your algo needs those 3 seconds, you can&#39;t waste them parsing web pages. As I said, that may radically change your solution."}, {"owner": {"reputation": 233, "user_id": 775394, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/de7a84d8cbd33b597070334a04cba12f?s=128&d=identicon&r=PG", "display_name": "JBear", "link": "https://stackoverflow.com/users/775394/jbear"}, "reply_to_user": {"reputation": 4879, "user_id": 954442, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/168149d073db878da990e57c891911cd?s=128&d=identicon&r=PG", "display_name": "Andrew Regan", "link": "https://stackoverflow.com/users/954442/andrew-regan"}, "edited": false, "score": 0, "creation_date": 1457024225, "post_id": 35758515, "comment_id": 59228274, "body": "@AndrewRegan I think this issue is definitely valid for SO bc there are programmers, besides myself, who have issues related to the topic of searching/scraping dynamic data with speed (<i>efficiency</i>). The issue is that in order to scrape the information we nee to display, we need to interact with forms and js. If not selenium, what&#39;s better? The other issue is that the information we pull isn&#39;t static (users can purchase these products and these products can be sold out) so we can&#39;t really cache for long - if that&#39;s what you&#39;re saying? I&#39;m fine with reworking this if I did it wrong."}], "owner": {"reputation": 233, "user_id": 775394, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/de7a84d8cbd33b597070334a04cba12f?s=128&d=identicon&r=PG", "display_name": "JBear", "link": "https://stackoverflow.com/users/775394/jbear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456954635, "creation_date": 1456954386, "question_id": 35758515, "link": "https://stackoverflow.com/questions/35758515/python-search-engine-with-selenium-beautifulsoup-delays-displaying-search-re", "title": "Python Search Engine with Selenium &amp; BeautifulSoup - Delays displaying Search Results", "body": "<p>Here's the basic set-up: Python 2 on Django, Selenium &amp; BeautifulSoup, MqSQL (working on replacing Chrome with PhantomJS to reduce memory usage)</p>\n\n<p>I built a search engine. Upon a user entering search criteria, I fill in forms based on the query, scrape the data from said sources, using my algorithm to sort and organize the data, and displays the results to the user.</p>\n\n<p>However, from the moment the user hits the search button to actually seeing search results takes a between 30 seconds and 2 minutes. In today's \"instant gratification\" world, this is unacceptable. So, I need to reduce this time wait time as much as possible.</p>\n\n<p>What are the ways I can speed this up? </p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 1, "creation_date": 1456954422, "post_id": 35758478, "comment_id": 59190428, "body": "Use the <a href=\"https://docs.python.org/3/library/csv.html\" rel=\"nofollow noreferrer\"><code>csv</code></a> module."}, {"owner": {"reputation": 1371, "user_id": 5798435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46e85c028ee4f738679c57821206d870?s=128&d=identicon&r=PG&f=1", "display_name": "Mukesh Ingham", "link": "https://stackoverflow.com/users/5798435/mukesh-ingham"}, "edited": false, "score": 0, "creation_date": 1456957167, "post_id": 35758478, "comment_id": 59191944, "body": "Would :&#39; [^\\s,]+(?=[,\\n])&#39; work?"}, {"owner": {"reputation": 63, "user_id": 3891645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ayEur.jpg?s=128&g=1", "display_name": "randman2011", "link": "https://stackoverflow.com/users/3891645/randman2011"}, "reply_to_user": {"reputation": 1371, "user_id": 5798435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46e85c028ee4f738679c57821206d870?s=128&d=identicon&r=PG&f=1", "display_name": "Mukesh Ingham", "link": "https://stackoverflow.com/users/5798435/mukesh-ingham"}, "edited": false, "score": 0, "creation_date": 1457012067, "post_id": 35758478, "comment_id": 59218509, "body": "@Someone if you make that an answer I will accept it. I figured that it was something stupid that I was missing."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 3891645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ayEur.jpg?s=128&g=1", "display_name": "randman2011", "link": "https://stackoverflow.com/users/3891645/randman2011"}, "edited": false, "score": 0, "creation_date": 1457027428, "post_id": 35778457, "comment_id": 59230383, "body": "It turns out that I was asking the wrong question, but this answered what I asked. Thanks!"}], "tags": [], "owner": {"reputation": 1371, "user_id": 5798435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46e85c028ee4f738679c57821206d870?s=128&d=identicon&r=PG&f=1", "display_name": "Mukesh Ingham", "link": "https://stackoverflow.com/users/5798435/mukesh-ingham"}, "is_accepted": true, "score": 0, "last_activity_date": 1457024680, "creation_date": 1457024680, "answer_id": 35778457, "question_id": 35758478, "link": "https://stackoverflow.com/questions/35758478/replace-a-substring-following-a-space-and-followed-by-commas-in-python/35778457#35778457", "title": "Replace a substring following a space and followed by commas in Python", "body": "<p>Try this instead:</p>\n\n<pre><code>/[^\\s,]+(?=[,\\n])/\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 3891645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ayEur.jpg?s=128&g=1", "display_name": "randman2011", "link": "https://stackoverflow.com/users/3891645/randman2011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 35778457, "answer_count": 1, "score": -1, "last_activity_date": 1457024680, "creation_date": 1456954257, "question_id": 35758478, "link": "https://stackoverflow.com/questions/35758478/replace-a-substring-following-a-space-and-followed-by-commas-in-python", "title": "Replace a substring following a space and followed by commas in Python", "body": "<p>I am creating a script that parses a csv file and, in an effort to remain as agnostic to formatting as possible, I am using regular expressions to replace specific substrings. I am looking to replace a line in a cell with the author's name, which can be any number of characters and will contain an email address. It is guaranteed that there will be a space before the substring and that it will be followed by either newline characters (multiple lines in a cell) or a comma (last item in a cell). </p>\n\n<p>I am using...</p>\n\n<pre><code>line = re.sub(' \\S+[^,]', \" \" + author, line)\n</code></pre>\n\n<p>...to try to replace everything between the space and a potential comma, but it is including the trailing commas in the line in the expression and replacing them with the author. I have previously tried...</p>\n\n<pre><code>line = re.sub(' \\S+(?!,)', \" \" + author, line)\n</code></pre>\n\n<p>...because this sounds like a job for a negative lookahead but I still haven't been able to retain the trailing commas.</p>\n\n<p>I am new to regular expressions so there is probably something simple that I am missing, but I haven't been able to get this to work.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1456954568, "post_id": 35758444, "comment_id": 59190521, "body": "I would use multiline RegExp for that - the code will also look much easier"}], "answers": [{"tags": [], "owner": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "is_accepted": false, "score": 1, "last_activity_date": 1456955828, "last_edit_date": 1495541269, "creation_date": 1456954222, "answer_id": 35758469, "question_id": 35758444, "link": "https://stackoverflow.com/questions/35758444/copy-section-of-text-in-file-python/35758469#35758469", "title": "copy section of text in file python", "body": "<p>The \"<code>elif</code>\" <a href=\"https://docs.python.org/2/tutorial/controlflow.html\" rel=\"nofollow noreferrer\">means</a> \"do this only if the other cases fail\". It's syntactically equivalent to \"<code>else if</code>\", <a href=\"https://stackoverflow.com/questions/2395160/what-is-the-correct-syntax-for-else-if\">if you're coming from a differnet C-like</a> language. Without it, the fall through should take care of including \"Start\" and \"End\"</p>\n\n<pre><code>with open('path/to/input') as infile, open('path/to/output', 'w') as outfile:\n    copy = False\n    for line in infile:\n        if line.strip() == \"Start\":\n            copy = True\n        if copy: # flipped to include end, as Dan H pointed out\n            outfile.write(line)\n        if line.strip() == \"End\":\n            copy = False\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 174, "user_id": 4761171, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/DB6rB.jpg?s=128&g=1", "display_name": "johnnydrama", "link": "https://stackoverflow.com/users/4761171/johnnydrama"}, "edited": false, "score": 0, "creation_date": 1457012603, "post_id": 35758525, "comment_id": 59218941, "body": "That makes a lot of sense. Is it possible to be selective and end the copy only use the 1st occurance of &#39;End&#39; after &#39;Start&#39;. My file contains a number of strings &#39;End&#39;?"}, {"owner": {"reputation": 714, "user_id": 12541916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e2aa674540d4f50b678986599c11e7?s=128&d=identicon&r=PG&f=1", "display_name": "Catalina", "link": "https://stackoverflow.com/users/12541916/catalina"}, "edited": false, "score": 0, "creation_date": 1581815871, "post_id": 35758525, "comment_id": 106562294, "body": "@Dan H what if there is a <code>Start</code> after <code>End</code> how to prevent to copy this <code>Strat</code>? and stop copying immediately"}, {"owner": {"reputation": 11378, "user_id": 701435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f482e288611253fec37cd19645b9006b?s=128&d=identicon&r=PG", "display_name": "Dan H", "link": "https://stackoverflow.com/users/701435/dan-h"}, "reply_to_user": {"reputation": 714, "user_id": 12541916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e2aa674540d4f50b678986599c11e7?s=128&d=identicon&r=PG&f=1", "display_name": "Catalina", "link": "https://stackoverflow.com/users/12541916/catalina"}, "edited": false, "score": 0, "creation_date": 1581817252, "post_id": 35758525, "comment_id": 106562509, "body": "@Catalina : options: 1) call exit() after you see &quot;End&quot;.  2) count the number of starts you see; only set copy to &quot;True&quot; if this is the first one."}], "tags": [], "owner": {"reputation": 11378, "user_id": 701435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f482e288611253fec37cd19645b9006b?s=128&d=identicon&r=PG", "display_name": "Dan H", "link": "https://stackoverflow.com/users/701435/dan-h"}, "is_accepted": true, "score": 3, "last_activity_date": 1457064272, "last_edit_date": 1457064272, "creation_date": 1456954418, "answer_id": 35758525, "question_id": 35758444, "link": "https://stackoverflow.com/questions/35758444/copy-section-of-text-in-file-python/35758525#35758525", "title": "copy section of text in file python", "body": "<p>@en_Knight has it almost right.  Here's a fix to meet the OP's request that the delimiters ARE included in the output:</p>\n\n<pre><code>with open('path/to/input') as infile, open('path/to/output', 'w') as outfile:\n    copy = False\n    for line in infile:\n        if line.strip() == \"Start\":\n            copy = True\n        if copy:\n            outfile.write(line)\n        # move this AFTER the \"if copy\"\n        if line.strip() == \"End\":\n            copy = False\n</code></pre>\n\n<p>OR simply include the write() in the case it applies to:</p>\n\n<pre><code>with open('path/to/input') as infile, open('path/to/output', 'w') as outfile:\n    copy = False\n    for line in infile:\n        if line.strip() == \"Start\":\n            outfile.write(line) # add this\n            copy = True\n        elif line.strip() == \"End\":\n            outfile.write(line) # add this\n            copy = False\n        elif copy:\n            outfile.write(line)\n</code></pre>\n\n<p><strong>Update</strong>: to answer the question in the comment \"only use the 1st occurance of 'End' after 'Start'\", change the last <code>elif line.strip() == \"End\"</code> to:</p>\n\n<pre><code>        elif line.strip() == \"End\" and copy:\n            outfile.write(line) # add this\n            copy = False\n</code></pre>\n\n<p>This works if there is only ONE \"Start\" but multiple \"End\" lines... which sounds odd, but that is what the questioner asked.</p>\n"}, {"comments": [{"owner": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "edited": false, "score": 0, "creation_date": 1456955866, "post_id": 35758703, "comment_id": 59191254, "body": "This is probably the more robust solution, but for someone who was unclear on elif v if, maybe you could include some textual description?"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1456957894, "post_id": 35758703, "comment_id": 59192314, "body": "This is better: <code>(^Start[\\s\\S]+^End)</code> <a href=\"https://regex101.com/r/gT0eR6/1\" rel=\"nofollow noreferrer\">Demo</a> (Or <code>(^Start[\\s\\S]+?^End)</code> if there is more than 1 <code>End</code>...)"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 1, "last_activity_date": 1456955073, "creation_date": 1456955073, "answer_id": 35758703, "question_id": 35758444, "link": "https://stackoverflow.com/questions/35758444/copy-section-of-text-in-file-python/35758703#35758703", "title": "copy section of text in file python", "body": "<p>RegExp approach:</p>\n\n<pre><code>import re\n\nwith open('input.txt') as f:\n    data = f.read()\n\nmatch = re.search(r'\\n(Start\\n.*?\\nEnd)\\n', data, re.M | re.S)\nif match:\n    with open('output.txt', 'w') as f:\n        f.write(match.group(1))\n</code></pre>\n"}], "owner": {"reputation": 174, "user_id": 4761171, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/DB6rB.jpg?s=128&g=1", "display_name": "johnnydrama", "link": "https://stackoverflow.com/users/4761171/johnnydrama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6206, "favorite_count": 0, "accepted_answer_id": 35758525, "answer_count": 3, "score": 0, "last_activity_date": 1457064272, "creation_date": 1456954139, "last_edit_date": 1495541732, "question_id": 35758444, "link": "https://stackoverflow.com/questions/35758444/copy-section-of-text-in-file-python", "title": "copy section of text in file python", "body": "<p>I need to extract values from the text file below:</p>\n\n<pre><code>fdsjhgjhg\nfdshkjhk\nStart\nGood Morning\nHello World\nEnd\ndashjkhjk\ndsfjkhk\n</code></pre>\n\n<p>The values I need to extract are from Start to End.</p>\n\n<pre><code>with open('path/to/input') as infile, open('path/to/output', 'w') as outfile:\n    copy = False\n    for line in infile:\n        if line.strip() == \"Start\":\n            copy = True\n        elif line.strip() == \"End\":\n            copy = False\n        elif copy:\n            outfile.write(line)\n</code></pre>\n\n<p>The code above I am using is from this question:\n<a href=\"https://stackoverflow.com/questions/18865058/extract-values-between-two-strings-in-a-text-file-using-python#\">Extract Values between two strings in a text file using python</a></p>\n\n<p>This code will not include the strings \"Start\" and \"End\" just what is inside them. How would you include the perimeter strings?</p>\n"}, {"tags": ["python", "c", "gcc"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1456955059, "post_id": 35758412, "comment_id": 59190814, "body": "Why do you want that? Is gcc compiled module not enough?"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1456956409, "post_id": 35758412, "comment_id": 59191549, "body": "For python 3.4, you will need to use VS2010. If you are using VS2015 you&#39;ll need to use python 3.5. Unfortunately it&#39;s required to use the same VS version that python itself is compiled with, when compiling extensions."}], "owner": {"reputation": 11, "user_id": 5974997, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207763826509686/picture?type=large", "display_name": "f_foldage", "link": "https://stackoverflow.com/users/5974997/f-foldage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1456954280, "creation_date": 1456954031, "last_edit_date": 1456954280, "question_id": 35758412, "link": "https://stackoverflow.com/questions/35758412/compile-a-c-extension-to-python-with-a-visual-compiler", "title": "Compile a C extension to Python with a Visual compiler", "body": "<p>I have written an extension module for Python in C. </p>\n\n<p>So far I have compiled the module with a gcc compiler. My task is now to compile my code with a MS Visual compiler from the Developer Command Prompt for VS 2015.</p>\n\n<p>To compile my program with the gcc compiler I have used the following commands in the command window:</p>\n\n<pre><code>gcc -c  extmodule.c -I/Python34/include\ngcc -shared extmodule.o -L/Python34/libs -lpython34 -o ext.dll\n</code></pre>\n\n<p>The project is then build with a setup.py file with the following command:</p>\n\n<pre><code>setup.py build -cmingw32\n</code></pre>\n\n<p>This works perfectly fine with the gcc compiler. </p>\n\n<p>Is there anyone who can help me to translate the above lines so I can compile my code with a Visual compiler ? </p>\n"}, {"tags": ["python", "xml", "python-3.x", "xpath", "lxml"], "answers": [{"tags": [], "owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "is_accepted": true, "score": 1, "last_activity_date": 1456958528, "creation_date": 1456958528, "answer_id": 35759671, "question_id": 35758359, "link": "https://stackoverflow.com/questions/35758359/lxml-xpath-gobbles-an-element-from-the-next-record/35759671#35759671", "title": "lxml XPath gobbles an element from the next record", "body": "<p>When <code>iterparse</code> emits an event that doesn't mean that it has only parsed the input up to the current element, it may actually have already parsed beyond that point as <a href=\"https://github.com/lxml/lxml/blob/35316b0/src/lxml/iterparse.pxi#L183\" rel=\"nofollow\">while you iterate over it</a> it <a href=\"https://github.com/lxml/lxml/blob/35316b0/src/lxml/iterparse.pxi#L218\" rel=\"nofollow\">parses the input file in chunks</a> of a <a href=\"https://github.com/lxml/lxml/blob/35316b0/src/lxml/iterparse.pxi#L3\" rel=\"nofollow\">fixed size</a>.</p>\n\n<p>That however means there is no guarantee how much of the input xml has already been parsed, so for a start event you shouldn't try to access an elements content (other then its attribute) as in may not have been parsed yet and you should not try to access any of the following siblings in either start or end events.</p>\n\n<p>In this case your sample xml is very short, so it's being parsed as a single chunk. Your xpath expression is rooted, so it will always return all matching elements of a document regardless of the given element.</p>\n\n<p>Given that you only handle <code>REC</code> tags anyway, your xpath expression should probably be <code>./name</code> instead.</p>\n"}], "owner": {"reputation": 1137, "user_id": 3395374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/285a4a5200f609969d811d471ae2c846?s=128&d=identicon&r=PG&f=1", "display_name": "Muposat", "link": "https://stackoverflow.com/users/3395374/muposat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "accepted_answer_id": 35759671, "answer_count": 1, "score": 0, "last_activity_date": 1456958528, "creation_date": 1456953824, "last_edit_date": 1456958414, "question_id": 35758359, "link": "https://stackoverflow.com/questions/35758359/lxml-xpath-gobbles-an-element-from-the-next-record", "title": "lxml XPath gobbles an element from the next record", "body": "<p>I am using lxml to obtain <code>name</code>s from each record via <code>XPath</code>. For some reason <code>XPath</code> always fetches first <code>name</code> from the next record, despite that I feed it only one record at a time. In addition, it also fetches the same name again when the next record is loaded. What am I doing wrong? </p>\n\n<p><strong>Example: parse the following <code>sample.xml</code>:</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; \n&lt;records&gt;\n  &lt;REC&gt;\n      &lt;name&gt;Alpha&lt;/name&gt;\n      &lt;name&gt;Beta&lt;/name&gt;\n      &lt;name&gt;Gamma&lt;/name&gt;\n  &lt;/REC&gt;\n  &lt;REC&gt;\n    &lt;name&gt;Delta&lt;/name&gt;\n  &lt;/REC&gt;\n&lt;/records&gt;\n</code></pre>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>#!/usr/bin/env python3\nfrom lxml import etree\n\nclass Nam:\n    XPATH = '/records/REC/name'\n    def __init__(self):\n        self.xp = etree.XPath(self.XPATH) \n\n    def getvals(self, doc):\n        for no, el in enumerate(self.xp(doc)):\n             print(\"{} val: {} \".format(no, el.text))\n\n        print()                    \n\n\ndef main():\n    nam = Nam()\n    context = etree.iterparse(\"sample.xml\", events=('end',), tag='REC')\n    for event, elem in context:\n        print(\"Element: {}\".format( etree.tostring(elem).decode()))\n        nam.getvals(elem)\n\n        elem.clear()\n        while elem.getprevious() is not None:\n            del elem.getparent()[0]\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Element: &lt;REC&gt;\n      &lt;name&gt;Alpha&lt;/name&gt;\n      &lt;name&gt;Beta&lt;/name&gt;\n      &lt;name&gt;Gamma&lt;/name&gt;   &lt;/REC&gt;\n\n0 val: Alpha \n1 val: Beta \n2 val: Gamma \n3 val: Delta\n\nElement: &lt;REC&gt;\n    &lt;name&gt;Delta&lt;/name&gt;   &lt;/REC&gt;\n\n0 val: Delta\n</code></pre>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["python", "windows", "pip", "virtualenv"], "comments": [{"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 0, "creation_date": 1456954948, "post_id": 35758344, "comment_id": 59190743, "body": "Does <code>virtualen --help</code> do anything?"}, {"owner": {"reputation": 582, "user_id": 3806077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JtUCR.jpg?s=128&g=1", "display_name": "bull90", "link": "https://stackoverflow.com/users/3806077/bull90"}, "reply_to_user": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 0, "creation_date": 1456955073, "post_id": 35758344, "comment_id": 59190823, "body": "No, nothing happens.. :S"}, {"owner": {"reputation": 591, "user_id": 4861069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca5292352f0037fa9e6250159cf7d99?s=128&d=identicon&r=PG&f=1", "display_name": "Jase Rieger", "link": "https://stackoverflow.com/users/4861069/jase-rieger"}, "edited": false, "score": 0, "creation_date": 1456969509, "post_id": 35758344, "comment_id": 59196320, "body": "Have you specified the directory to create the virtual environment in? &quot;virtualenv venv&quot;"}, {"owner": {"reputation": 582, "user_id": 3806077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JtUCR.jpg?s=128&g=1", "display_name": "bull90", "link": "https://stackoverflow.com/users/3806077/bull90"}, "edited": false, "score": 0, "creation_date": 1456991880, "post_id": 35758344, "comment_id": 59204520, "body": "Yes of course, but nothing..."}], "owner": {"reputation": 582, "user_id": 3806077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JtUCR.jpg?s=128&g=1", "display_name": "bull90", "link": "https://stackoverflow.com/users/3806077/bull90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 278, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530586377, "creation_date": 1456953779, "question_id": 35758344, "link": "https://stackoverflow.com/questions/35758344/running-virtualenv-nothing-happen", "title": "running virtualenv nothing happen", "body": "<p>I'm on a <strong>Windows</strong> machine, using <strong>python 2.7.11</strong>.\nI've installed virtualenv using pip\n<code>\npip install virtualenv\n</code>\nwhen I run <code>C:\\Users\\MyFolder&gt;virtualenv</code>  from command line, seems that nothing is happening. The cursor still blinking like it was working and in fact the process is still running, but just nothing happens.</p>\n\n<p>I've tried to reinstall virtualenv and python but the problem still remains.\nI also tried to import virtualenv from python and no problem of importing is reported.</p>\n\n<p>Someone has had similar issues?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 1, "creation_date": 1456953851, "post_id": 35758323, "comment_id": 59190106, "body": "It depends on what <code>whatever</code> is. What is it in this case? Is it your own module?"}, {"owner": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "reply_to_user": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1456953938, "post_id": 35758323, "comment_id": 59190158, "body": "no it&#39;s not my own module, it is a module registered from C++ code by application I don&#39;t have source code for(I know I can hook function in C++ but I&#39;m interested if it&#39;s possible straight from python)"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1456954450, "post_id": 35758323, "comment_id": 59190446, "body": "The code you&#39;ve posted looks fine, aside from perhaps <code>return oldfunc(parameter)</code> instead of just <code>oldfunc(parameter)</code>. Are you having a problem with it?"}], "answers": [{"comments": [{"owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "edited": false, "score": 0, "creation_date": 1456955365, "post_id": 35758398, "comment_id": 59190970, "body": "Good idea with the functools wraps."}], "tags": [], "owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "is_accepted": true, "score": 9, "last_activity_date": 1456954665, "last_edit_date": 1456954665, "creation_date": 1456953978, "answer_id": 35758398, "question_id": 35758323, "link": "https://stackoverflow.com/questions/35758323/hook-python-module-function/35758398#35758398", "title": "Hook python module function", "body": "<p>Something like this? It avoids using globals, which is generally a good thing.</p>\n\n<pre><code>import whatever\nimport functools\n\ndef prefix_function(function, prefunction):\n    @functools.wraps(function)\n    def run(*args, **kwargs):\n        prefunction(*args, **kwargs)\n        return function(*args, **kwargs)\n    return run\n\ndef this_is_a_function(parameter):\n    pass # Your own code here that will be run before\n\nwhatever.this_is_a_function = prefix_function(\n    whatever.this_is_a_function, this_is_a_function)\n</code></pre>\n\n<p><code>prefix_function</code> is a function that takes two functions: <code>function</code> and <code>prefunction</code>. It returns a function that takes any parameters, and calls <code>prefunction</code> followed by <code>function</code> with the same parameters. The <code>prefix_function</code> function works for any callable, so you only need to program the prefixing code once for any other hooking you might need to do.</p>\n\n<p><code>@functools.wraps</code> makes it so that the docstring and name of the returned wrapper function is the same.</p>\n\n<p>If you need <code>this_is_a_function</code> to call the old <code>whatever.this_is_a_function</code> with arguments different than what was passed to it, you could do something like this:</p>\n\n<pre><code>import whatever\nimport functools\n\ndef wrap_function(oldfunction, newfunction):\n    @functools.wraps(function)\n    def run(*args, **kwargs):\n        return newfunction(oldfunction, *args, **kwargs)\n    return run\n\ndef this_is_a_function(oldfunc, parameter):\n    # Do some processing or something to customize the parameters to pass\n    newparams = parameter * 2  # Example of a change to newparams\n    return oldfunc(newparams)\n\nwhatever.this_is_a_function = wrap_function(\n        whatever.this_is_a_function, this_is_a_function)\n</code></pre>\n\n<p>There is a problem that if <code>whatever</code> is a pure C module, it's typically impossible (or very difficult) to change its internals in the first place.</p>\n"}, {"tags": [], "owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "is_accepted": false, "score": 2, "last_activity_date": 1456954435, "last_edit_date": 1495541343, "creation_date": 1456954435, "answer_id": 35758533, "question_id": 35758323, "link": "https://stackoverflow.com/questions/35758323/hook-python-module-function/35758533#35758533", "title": "Hook python module function", "body": "<p>So, here's an example of monkey-patching the <code>time</code> function from the <code>time</code> module.</p>\n\n<pre><code>import time\n\nold_time = time.time\n\ndef time():\n    print('It is today... but more specifically the time is:')\n    return old_time()\n\ntime.time = time\n\nprint time.time()\n# Output:\n# It is today... but more specifically the time is:\n# 1456954003.2\n</code></pre>\n\n<p>However, if you are trying to do this to C code, you will most likely get an error like <code>cannot overwrite attribute</code>. In that case, you probably want to subclass the C module.</p>\n\n<p>You may want to take a look at <a href=\"https://stackoverflow.com/questions/2705964/how-do-i-extend-a-python-module-python-twitter\">this question</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 1, "creation_date": 1456955474, "post_id": 35758774, "comment_id": 59191038, "body": "Why use <code>staticmethod</code> instead of just plain functions?"}, {"owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "reply_to_user": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 0, "creation_date": 1456955552, "post_id": 35758774, "comment_id": 59191091, "body": "For the Hooker class, an instance variable is entirely unnecessary. I added an init function so it CAN be used, i.e. <code>h = Hooker()</code>, but it isn&#39;t necessary. If I don&#39;t use <code>@staticmethod</code>, then an instance would have had to have been declared."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1456955607, "post_id": 35758774, "comment_id": 59191111, "body": "No, no. Why does <code>Hooker</code> exist at all? Why is <code>hook</code> a static method of a <code>Hooker</code> class instead of just a module-level function?"}, {"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 0, "creation_date": 1456955638, "post_id": 35758774, "comment_id": 59191133, "body": "@Goodies I suppose I meant &quot;why encapsulate in a class at all&quot;? Considering this is a utility function, I feel this would make most sense as a plain function in its own module, much like <code>functools.wraps</code>."}, {"owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "edited": false, "score": 0, "creation_date": 1456955791, "post_id": 35758774, "comment_id": 59191214, "body": "Oh, I see. Well, personally, I just have this sitting in my libs. From any file I can import Hooker. The file is called Hooker.py and there are no classes in it. yes, it is unnecessary."}, {"owner": {"reputation": 671, "user_id": 473354, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/2Yyg3.jpg?s=128&g=1", "display_name": "Agey", "link": "https://stackoverflow.com/users/473354/agey"}, "edited": false, "score": 0, "creation_date": 1496309842, "post_id": 35758774, "comment_id": 75612920, "body": "Shouldn&#39;t it be the other way around? <code>Foo.bar = hook(myNewFunction, Foo.bar)</code>.  foo returns <code>oldfunc</code>"}], "tags": [], "owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "is_accepted": false, "score": 2, "last_activity_date": 1456955840, "last_edit_date": 1456955840, "creation_date": 1456955341, "answer_id": 35758774, "question_id": 35758323, "link": "https://stackoverflow.com/questions/35758323/hook-python-module-function/35758774#35758774", "title": "Hook python module function", "body": "<p>This is the perfect time to tout my super-simplistic Hooker </p>\n\n<pre><code>def hook(hookfunc, oldfunc):\n    def foo(*args, **kwargs):\n        hookfunc(*args, **kwargs)\n        return oldfunc(*args, **kwargs)\n    return foo\n</code></pre>\n\n<p>Incredibly simple. It will return a function that first runs the desired hook function (with the same parameters, mind you) and will then run the original function that you are hooking and return that original value. This also works to overwrite a class method. Say we have static method in a class.</p>\n\n<pre><code>class Foo:\n    @staticmethod\n    def bar(data):\n        for datum in data:\n            print(datum, end=\"\") # assuming python3 for this\n        print()\n</code></pre>\n\n<p>But we want to print the length of the data before we print out its elements</p>\n\n<pre><code>def myNewFunction(data):\n    print(\"The length is {}.\".format(len(data)))\n</code></pre>\n\n<p>And now we simple hook the function</p>\n\n<pre><code>Foo.bar([\"a\", \"b\", \"c\"])\n# =&gt; a b c\nFoo.bar = hook(Foo.bar, myNewFunction)\nFoo.bar([\"x\", \"y\", \"z\"])\n# =&gt; The length is 3.\n# =&gt; x y z \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7591530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e7a44fc476a90b47c92971022c134d?s=128&d=identicon&r=PG&f=1", "display_name": "Baloo", "link": "https://stackoverflow.com/users/7591530/baloo"}, "is_accepted": false, "score": 1, "last_activity_date": 1516762764, "last_edit_date": 1516762764, "creation_date": 1516761660, "answer_id": 48414012, "question_id": 35758323, "link": "https://stackoverflow.com/questions/35758323/hook-python-module-function/48414012#48414012", "title": "Hook python module function", "body": "<p>Actually, you can replace the target function's <code>func_code</code>. The example below</p>\n\n<pre><code># a normal function\ndef old_func():\n    print \"i am old\"\n\n# a class method\nclass A(object):\n    def old_method(self):\n        print \"i am old_method\"\n\n# a closure function\ndef make_closure(freevar1, freevar2):\n    def wrapper():\n        print \"i am old_clofunc, freevars:\", freevar1, freevar2\n    return wrapper\nold_clofunc = make_closure('fv1', 'fv2')\n\n# ===============================================\n\n# the new function\ndef new_func(*args):\n    print \"i am new, args:\", args\n# the new closure function\ndef make_closure2(freevar1, freevar2):\n    def wrapper():\n        print \"i am new_clofunc, freevars:\", freevar1, freevar2\n    return wrapper\nnew_clofunc = make_closure2('fv1', 'fv2')\n\n# ===============================================\n\n# hook normal function\nold_func.func_code = new_func.func_code\n# hook class method\nA.old_method.im_func.func_code = new_func.func_code\n# hook closure function\n# Note: the closure function's `co_freevars` count should be equal\nold_clofunc.func_code = new_clofunc.func_code\n\n# ===============================================\n\n# call the old\nold_func()\nA().old_method()\nold_clofunc()\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>i am new, args: ()\ni am new, args: (&lt;__main__.A object at 0x0000000004A5AC50&gt;,)\ni am new_clofunc, freevars: fv1 fv2\n</code></pre>\n"}], "owner": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15904, "favorite_count": 4, "accepted_answer_id": 35758398, "answer_count": 4, "score": 2, "last_activity_date": 1516762764, "creation_date": 1456953709, "last_edit_date": 1495539924, "question_id": 35758323, "link": "https://stackoverflow.com/questions/35758323/hook-python-module-function", "title": "Hook python module function", "body": "<p>Basically I want to do something like this:\n<a href=\"https://stackoverflow.com/questions/22933287/how-can-i-hook-a-function-in-a-python-module\">How can I hook a function in a python module?</a></p>\n\n<p>but I want to call the old function after my own code.</p>\n\n<p>like</p>\n\n<pre><code>import whatever\n\noldfunc = whatever.this_is_a_function\n\ndef this_is_a_function(parameter):\n    #my own code here\n    # and call original function back\n    oldfunc(parameter)\n\nwhatever.this_is_a_function = this_is_a_function\n</code></pre>\n\n<p>Is this possible?</p>\n\n<p>I tried <code>copy.copy</code>, <code>copy.deepcopy</code> original function but it didn't work.</p>\n"}, {"tags": ["python", "function", "machine-learning"], "comments": [{"owner": {"reputation": 2549, "user_id": 5765298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d109e4a14d083bccf645ffd660672e61?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett R", "link": "https://stackoverflow.com/users/5765298/garrett-r"}, "edited": false, "score": 1, "creation_date": 1456953744, "post_id": 35758206, "comment_id": 59190041, "body": "(f &gt;= 0.5)*(f &lt;= 4.5) returns either 0 or 1 (presuming f is a number).  Each of those expressions is boolean, and multiplying is effectively a logical <code>and</code> so you are indexing amp with either 0 or 1 each time.  what does fce look like?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1456954244, "post_id": 35758206, "comment_id": 59190344, "body": "PART B squares each value in <b>fce</b> and feeds that list as an index to <b>amp</b>.  If <b>amp</b> is a np vector, this will give you a vector as input to <b>mean</b>.  However, I question whether that&#39;s what you really want to do."}, {"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "reply_to_user": {"reputation": 2549, "user_id": 5765298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d109e4a14d083bccf645ffd660672e61?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett R", "link": "https://stackoverflow.com/users/5765298/garrett-r"}, "edited": false, "score": 0, "creation_date": 1456956311, "post_id": 35758206, "comment_id": 59191507, "body": "@GarrettR Also to note is that <code>bool</code> is a subclass of <code>int</code>. <code>False == 0</code> and <code>True == 1</code>. So yes, multiplication of <code>bool</code>s is actually an <code>and</code> which will cause either element <code>0</code> or <code>1</code> to be accessed in <code>amp</code>."}, {"owner": {"reputation": 2549, "user_id": 5765298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d109e4a14d083bccf645ffd660672e61?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett R", "link": "https://stackoverflow.com/users/5765298/garrett-r"}, "reply_to_user": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 0, "creation_date": 1456956384, "post_id": 35758206, "comment_id": 59191538, "body": "@Kupiakos yeah, i realize.  just a slightly obfuscated way of achieving that.  Just making sure that&#39;s what OP intended?"}], "answers": [{"tags": [], "owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "is_accepted": false, "score": 0, "last_activity_date": 1456960864, "creation_date": 1456960864, "answer_id": 35760209, "question_id": 35758206, "link": "https://stackoverflow.com/questions/35758206/one-command-line-in-python-to-automatize-code/35760209#35760209", "title": "One command-line in python to automatize code", "body": "<p>I am not entirely sure what you are trying to achieve, as it is really obfuscated chunk of code, but by simple code refactoring you can parametrize it through the list of pairs:</p>\n\n<pre><code>def computePowerBands(f, amp, fce):\n    return [np.mean(amp[(f &gt;= low)*(f &lt;= up)]) for low, up in fce]\n</code></pre>\n\n<p>and call it with</p>\n\n<pre><code>computePowerBands(f, amp, [(0.5, 4.5), (4.5, 8.5)])\n</code></pre>\n\n<p>and so on.</p>\n\n<p>Or if the following bands always share ends:</p>\n\n<pre><code>def computePowerBands(f, amp, fce):\n    return [np.mean(amp[(f &gt;= fce[fid])*(f &lt;= fce[fid+1])])\n            for fid in range(len(fce)-1)]\n</code></pre>\n\n<p>and call it with</p>\n\n<pre><code>computePowerBands(f, amp, [0.5, 4.5, 8.5])\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6010003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/801eaf62a17a60114fa1ea75e7883c95?s=128&d=identicon&r=PG&f=1", "display_name": "Aizzaac", "link": "https://stackoverflow.com/users/6010003/aizzaac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1456960864, "creation_date": 1456953310, "last_edit_date": 1456953829, "question_id": 35758206, "link": "https://stackoverflow.com/questions/35758206/one-command-line-in-python-to-automatize-code", "title": "One command-line in python to automatize code", "body": "<p>I am newbie in Python. I am using it for machine learning in EEG.\nThis is my function to extract the \"features\". \nIs there a way to improve it? I mean, I don't want to be changing the frequencies each time I need other range. So, in PART B you'll see my attempt.</p>\n\n<p>PART A</p>\n\n<pre><code>def computePowerBands(f, amp):\n    return (np.mean(amp[(f &gt;= 0.5)*(f &lt;= 4.5)]),\n            np.mean(amp[(f &gt;= 4.5)*(f &lt;= 8.5)]),\n            np.mean(amp[(f &gt;= 8.5)*(f &lt;= 11.5)]),\n            np.mean(amp[(f &gt;= 11.5)*(f &lt;= 15.5)]),\n            np.mean(amp[(f &gt;= 15.5)*(f &lt;= 32.5)]) )\n</code></pre>\n\n<p>PART B</p>\n\n<pre><code>def computePowerBands(f, amp, fce):\n    return (np.mean(amp[k * k for k in fce]))\n</code></pre>\n\n<p>Is there any way I can do this?</p>\n"}, {"tags": ["python", "datetime", "strptime"], "comments": [{"owner": {"reputation": 9656, "user_id": 3769451, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/hZdbF.jpg?s=128&g=1", "display_name": "apadana", "link": "https://stackoverflow.com/users/3769451/apadana"}, "reply_to_user": {"reputation": 1574, "user_id": 1585957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe34b0fb6288bd44b5a32efd7afdca8?s=128&d=identicon&r=PG", "display_name": "bmcculley", "link": "https://stackoverflow.com/users/1585957/bmcculley"}, "edited": false, "score": 0, "creation_date": 1456955894, "post_id": 35758181, "comment_id": 59191269, "body": "Thanks @bmcculley. I think the error python gives is changed since the other question was posted 6 years ago, so I couldn&#39;t find the other answer."}], "answers": [{"tags": [], "owner": {"reputation": 3151, "user_id": 5865420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AF0Nt.jpg?s=128&g=1", "display_name": "pp_", "link": "https://stackoverflow.com/users/5865420/pp"}, "is_accepted": true, "score": 2, "last_activity_date": 1456953379, "creation_date": 1456953379, "answer_id": 35758230, "question_id": 35758181, "link": "https://stackoverflow.com/questions/35758181/python-strptime-correct-format-for-sub-seconds/35758230#35758230", "title": "python strptime correct format for sub seconds", "body": "<p>This is the correct format:</p>\n\n<pre><code>datetime.strptime(date, '%Y-%m-%d %H:%M:%S.%f')\n</code></pre>\n\n<p>Breakdown:</p>\n\n<ul>\n<li><code>%H</code>: Hour (24-hour clock) as a zero-padded decimal number.</li>\n<li><code>%M</code>: Minute as a zero-padded decimal number.</li>\n<li><code>%S</code>: Second as a zero-padded decimal number.</li>\n<li><code>%f</code>: Microsecond as a decimal number, zero-padded on the left.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "is_accepted": false, "score": 3, "last_activity_date": 1456955412, "last_edit_date": 1456955412, "creation_date": 1456953408, "answer_id": 35758239, "question_id": 35758181, "link": "https://stackoverflow.com/questions/35758181/python-strptime-correct-format-for-sub-seconds/35758239#35758239", "title": "python strptime correct format for sub seconds", "body": "<p>You don't need to include two characters for hours, seconds and minutes in your format string; <code>%S</code> is \"Second as a zero-padded decimal number\", <code>%H</code> is \"  Hour (24-hour clock) as a zero-padded decimal number.\", etc. It's also worth noting that you're completely missing the symbol for microseconds (<code>%f</code>). You should add that if you want your format_string to work. </p>\n\n<p>Here is a link to the <a href=\"https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior\" rel=\"nofollow\"><code>strftime()</code> and <code>strptime()</code> behavior documentation</a></p>\n"}, {"tags": [], "owner": {"reputation": 15423, "user_id": 2069350, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4EnA0.png?s=128&g=1", "display_name": "Henry Keiter", "link": "https://stackoverflow.com/users/2069350/henry-keiter"}, "is_accepted": false, "score": 1, "last_activity_date": 1457126248, "last_edit_date": 1457126248, "creation_date": 1456953413, "answer_id": 35758242, "question_id": 35758181, "link": "https://stackoverflow.com/questions/35758181/python-strptime-correct-format-for-sub-seconds/35758242#35758242", "title": "python strptime correct format for sub seconds", "body": "<p><a href=\"https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior\" rel=\"nofollow\">Per the documentation</a> (I recommend bookmarking that link if you're planning to do any significant work with python dates and times), the correct directives for zero-padded hours, minutes, and seconds, are <code>%H</code>, <code>%M</code>, and <code>%S</code>, respectively (no doubled characters)</p>\n\n<p>Further, your input strings include microseconds, so you'll need to either remove those from the inputs or include the <code>%f</code> directive as well.</p>\n\n<p>Thus: <code>datetime.strptime(date, '%Y-%m-%d %H:%M:%S.%f')</code></p>\n"}], "owner": {"reputation": 9656, "user_id": 3769451, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/hZdbF.jpg?s=128&g=1", "display_name": "apadana", "link": "https://stackoverflow.com/users/3769451/apadana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4044, "favorite_count": 1, "closed_date": 1457014155, "accepted_answer_id": 35758230, "answer_count": 3, "score": 2, "last_activity_date": 1457126248, "creation_date": 1456953225, "last_edit_date": 1456953337, "question_id": 35758181, "link": "https://stackoverflow.com/questions/35758181/python-strptime-correct-format-for-sub-seconds", "closed_reason": "Duplicate", "title": "python strptime correct format for sub seconds", "body": "<p>My datetime data is like this: </p>\n\n<pre><code>2016-03-01 19:25:53.053404\n</code></pre>\n\n<p>I am trying to use </p>\n\n<pre><code>datetime.strptime(date, \"%Y-%m-%d %HH:%MM:%SS\")\n</code></pre>\n\n<p>But I get this error: </p>\n\n<pre><code>ValueError: time data '2016-03-01 19:24:35.165425' does not match format '%Y-%m-%d %HH:%MM:%SS'\n</code></pre>\n\n<p>How can I fix the format \"<code>%Y-%m-%d %HH:%MM:%SS</code>\" to match the datetime format that I have? </p>\n"}, {"tags": ["python", "nltk", "pickle"], "comments": [{"owner": {"reputation": 8788, "user_id": 2236401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06a91e6a7b9d4c46e5a39e18a5491a93?s=128&d=identicon&r=PG", "display_name": "sedavidw", "link": "https://stackoverflow.com/users/2236401/sedavidw"}, "edited": false, "score": 1, "creation_date": 1456953612, "post_id": 35758149, "comment_id": 59189958, "body": "Are you using a package to create your classifier?  Does it have documentation for the proper method to save it to disk?"}, {"owner": {"reputation": 1704, "user_id": 4476680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-IMkVL2_YZeU/AAAAAAAAAAI/AAAAAAAAAYU/mtLX4bj1q04/photo.jpg?sz=128", "display_name": "FredLoh", "link": "https://stackoverflow.com/users/4476680/fredloh"}, "reply_to_user": {"reputation": 8788, "user_id": 2236401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06a91e6a7b9d4c46e5a39e18a5491a93?s=128&d=identicon&r=PG", "display_name": "sedavidw", "link": "https://stackoverflow.com/users/2236401/sedavidw"}, "edited": false, "score": 0, "creation_date": 1456955914, "post_id": 35758149, "comment_id": 59191286, "body": "@sedavidw the suggestion that they have in their documentation is what I&#39;ve implemented above and what is suggested in a bunch of stack overflow questions."}, {"owner": {"reputation": 8788, "user_id": 2236401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06a91e6a7b9d4c46e5a39e18a5491a93?s=128&d=identicon&r=PG", "display_name": "sedavidw", "link": "https://stackoverflow.com/users/2236401/sedavidw"}, "edited": false, "score": 1, "creation_date": 1456956091, "post_id": 35758149, "comment_id": 59191385, "body": "what package are you using?"}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1457003617, "post_id": 35758149, "comment_id": 59212658, "body": "Your use of pickle looks correct.  I&#39;m guessing that <code>create_training_set()</code> is doing something weird, but you&#39;re not showing it. <code>create_training_set</code> is an odd name for something that should be training a classifier, which reinforces my suspicions. I suggest you run your code from the interactive console to train and save a classifier, then unpickle it into a different variable and compare the two objects. You might notice something. Or include self-sufficient, runnable code in your question (but first simplify your class by taking out irrelevant details)."}, {"owner": {"reputation": 1704, "user_id": 4476680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-IMkVL2_YZeU/AAAAAAAAAAI/AAAAAAAAAYU/mtLX4bj1q04/photo.jpg?sz=128", "display_name": "FredLoh", "link": "https://stackoverflow.com/users/4476680/fredloh"}, "reply_to_user": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1457050577, "post_id": 35758149, "comment_id": 59242621, "body": "@alexis Heres the whole file.  <a href=\"https://gist.github.com/FredLoh/58467c303200986b1f03\" rel=\"nofollow noreferrer\">gist.github.com/FredLoh/58467c303200986b1f03</a>"}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1457083987, "post_id": 35758149, "comment_id": 59254811, "body": "Well, that&#39;s complete at least. I took a quick look and nothing jumped out at me, so you&#39;re going to have to debug your program yourself. Get in the interactive console, inspect your model as I suggested, construct your classifier step by step and examine your data, etc. When you can encapsulate into a few lines of code (10-15 max) something that doesn&#39;t behave as you think it should, come back and ask again."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1457084081, "post_id": 35758149, "comment_id": 59254868, "body": "Before you do all that, though, you may want to simply adapt your script for python 3 and run it there. If it suddenly works, you&#39;re dealing with a version-dependent bug. (Why are you still doing language stuff with python 2, anyway?)"}], "owner": {"reputation": 1704, "user_id": 4476680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-IMkVL2_YZeU/AAAAAAAAAAI/AAAAAAAAAYU/mtLX4bj1q04/photo.jpg?sz=128", "display_name": "FredLoh", "link": "https://stackoverflow.com/users/4476680/fredloh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456953138, "creation_date": 1456953138, "question_id": 35758149, "link": "https://stackoverflow.com/questions/35758149/saving-naivebayes-classifier-to-disk", "title": "Saving NaiveBayes classifier to disk", "body": "<p>I've tried implementing other solutions found on stack overflow with no success.</p>\n\n<p>On the first run through I get the results I'm expecting, namely a variety of positive and negative results.  On the second run all I get are positive results no matter what it's reading in.</p>\n\n<p>Here's what my save and load function look like:</p>\n\n<pre><code>def save_classifier(self, classifier):\n    print 'Saving new classifier.'\n    try:\n        f = open(self.get_base_path_to_save_classifier(), 'wb')\n        pickle.dump(classifier, f)\n        f.close()\n    except IOError:\n        print 'Error'\n        return False\n\ndef load_classifier(self):\n    try:\n        f = open(self.get_base_path_to_save_classifier(), 'rb')\n        classifier = pickle.load(f)\n        f.close()\n        return classifier\n    except IOError:\n        print 'No classifier was found.'\n        return None\n\n@staticmethod\ndef get_base_path_to_save_classifier():\n    return os.getcwd() + '/Twitter_Utils/data/classifier.pickle\n</code></pre>\n\n<p>And my main:</p>\n\n<pre><code>def analyze_tweets(self):\n    naive_bayes_classifier = self.load_classifier()\n    if naive_bayes_classifier is None:\n        naive_bayes_classifier = self.create_training_set()\n\n    with open(os.getcwd() + '/Twitter_Utils/data/tweets/Hawks-vs-Warriors.txt') as f:\n        for line in f:\n            print naive_bayes_classifier.classify(self.extract_features(self.create_feature_vector(line)))\n</code></pre>\n"}, {"tags": ["python", "numpy", "latitude-longitude", "weighted-average"], "answers": [{"comments": [{"owner": {"reputation": 1283, "user_id": 4599066, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3b3ebaa6cb7900a39e4f71879f5c64a?s=128&d=identicon&r=PG&f=1", "display_name": "ChristineB", "link": "https://stackoverflow.com/users/4599066/christineb"}, "edited": false, "score": 0, "creation_date": 1456953944, "post_id": 35758345, "comment_id": 59190165, "body": "I mentioned that I can&#39;t use np.nanmean because it doesn&#39;t take weights in its arguments. I&#39;m trying to do a weighted average."}, {"owner": {"reputation": 18953, "user_id": 4640209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bc12112054e578fc0bcd333cbb2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4640209/alex"}, "reply_to_user": {"reputation": 1283, "user_id": 4599066, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3b3ebaa6cb7900a39e4f71879f5c64a?s=128&d=identicon&r=PG&f=1", "display_name": "ChristineB", "link": "https://stackoverflow.com/users/4599066/christineb"}, "edited": false, "score": 0, "creation_date": 1456954225, "post_id": 35758345, "comment_id": 59190335, "body": "I have updated the answer to use a masked array and <code>np.mean</code>"}, {"owner": {"reputation": 1283, "user_id": 4599066, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3b3ebaa6cb7900a39e4f71879f5c64a?s=128&d=identicon&r=PG&f=1", "display_name": "ChristineB", "link": "https://stackoverflow.com/users/4599066/christineb"}, "edited": false, "score": 0, "creation_date": 1456954615, "post_id": 35758345, "comment_id": 59190542, "body": "I was about to edit a mention into the original post that since I&#39;m doing a time series, removing the NaN from the data is also an option, but you beat me to it!"}, {"owner": {"reputation": 1283, "user_id": 4599066, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3b3ebaa6cb7900a39e4f71879f5c64a?s=128&d=identicon&r=PG&f=1", "display_name": "ChristineB", "link": "https://stackoverflow.com/users/4599066/christineb"}, "edited": false, "score": 1, "creation_date": 1456954804, "post_id": 35758345, "comment_id": 59190650, "body": "Edit: Actually, this still doesn&#39;t quite work. I still need to take a WEIGHTED average, which np.mean doesn&#39;t do. When I use np.average instead, it still outputs NaNs."}, {"owner": {"reputation": 18953, "user_id": 4640209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bc12112054e578fc0bcd333cbb2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4640209/alex"}, "reply_to_user": {"reputation": 1283, "user_id": 4599066, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3b3ebaa6cb7900a39e4f71879f5c64a?s=128&d=identicon&r=PG&f=1", "display_name": "ChristineB", "link": "https://stackoverflow.com/users/4599066/christineb"}, "edited": false, "score": 2, "creation_date": 1456955342, "post_id": 35758345, "comment_id": 59190961, "body": "I have updated my answer, it should now be working, you need to use <code>np.ma.average</code> for masked arrays. Please note the <code>.ma</code>."}], "tags": [], "owner": {"reputation": 18953, "user_id": 4640209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bc12112054e578fc0bcd333cbb2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4640209/alex"}, "is_accepted": true, "score": 18, "last_activity_date": 1544107469, "last_edit_date": 1544107469, "creation_date": 1456953779, "answer_id": 35758345, "question_id": 35758147, "link": "https://stackoverflow.com/questions/35758147/taking-np-average-while-ignoring-nans/35758345#35758345", "title": "Taking np.average while ignoring NaN&#39;s?", "body": "<p>You can create a masked array like this:</p>\n\n<pre><code>data = np.array([[1,2,3], [4,5,np.NaN], [np.NaN,6,np.NaN], [0,0,0]])\nmasked_data = np.ma.masked_array(data, np.isnan(data))\n# calculate your weighted average here instead\nweights = [1, 1, 1]\naverage = np.ma.average(masked_data, axis=1, weights=weights)\n# this gives you the result\nresult = average.filled(np.nan)\nprint(result)\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>[ 2.   4.5  6.   0. ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 7, "last_activity_date": 1596744439, "last_edit_date": 1596744439, "creation_date": 1456955489, "answer_id": 35758821, "question_id": 35758147, "link": "https://stackoverflow.com/questions/35758147/taking-np-average-while-ignoring-nans/35758821#35758821", "title": "Taking np.average while ignoring NaN&#39;s?", "body": "<p>You can simply multiply the input array with the <code>weights</code> and sum along the specified axis ignoring <code>NaNs</code> with <a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.nansum.html\" rel=\"nofollow noreferrer\"><code>np.nansum</code></a>. Thus, for your case, assuming the <code>weights</code> are to be used along <code>axis = 1</code> on the input array <code>sst_filt</code>, the summations would be -</p>\n<pre><code>np.nansum(sst_filt*weights,axis=1)\n</code></pre>\n<p>Accounting for the NaNs while averaging, we will end up with :</p>\n<pre><code>def nanaverage(A,weights,axis):\n    return np.nansum(A*weights,axis=axis)/((~np.isnan(A))*weights).sum(axis=axis)\n</code></pre>\n<p>Sample run -</p>\n<pre><code>In [200]: sst_filt  # 2D array case\nOut[200]: \narray([[  0.,   1.],\n       [ nan,   3.],\n       [  4.,   5.]])\n\nIn [201]: weights\nOut[201]: array([ 0.25,  0.75])\n\nIn [202]: nanaverage(sst_filt,weights=weights,axis=1)\nOut[202]: array([0.75, 3.  , 4.75])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 58, "user_id": 1848803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eada7305b7c30fded18b439a21b99220?s=128&d=identicon&r=PG", "display_name": "deto", "link": "https://stackoverflow.com/users/1848803/deto"}, "is_accepted": false, "score": 4, "last_activity_date": 1456956081, "last_edit_date": 1456956081, "creation_date": 1456955619, "answer_id": 35758862, "question_id": 35758147, "link": "https://stackoverflow.com/questions/35758147/taking-np-average-while-ignoring-nans/35758862#35758862", "title": "Taking np.average while ignoring NaN&#39;s?", "body": "<p>I'd probably just select the portion of the array that isn't NaN and then use those indices to select the weights too.</p>\n\n<p>For example:</p>\n\n<pre><code>import numpy as np\ndata = np.random.rand(10)\nweights = np.random.rand(10)\ndata[[2, 4, 8]] = np.nan\n\nprint data\n# [ 0.32849204,  0.90310062,         nan,  0.58580299,         nan,\n#    0.934721  ,  0.44412978,  0.78804409,         nan,  0.24942098]\n\nii = ~np.isnan(data)\nprint ii\n# [ True  True False  True False  True  True  True False  True]\n\nresult = np.average(data[ii], weights = weights[ii])\nprint result\n# .6470319\n</code></pre>\n\n<p>Edit: I realized this won't work with two dimensional arrays.  In that case, I'd probably just set the values and weights to zero for the NaNs.  This yields the same result as if those indices were just not included in the calculation.</p>\n\n<p>Before running np.average:</p>\n\n<pre><code>data[np.isnan(data)] = 0;\nweights[np.isnan(data)] = 0;\nresult = np.average(data, weights=weights)\n</code></pre>\n\n<p>Or create copies if you want to keep track of which indices were NaN.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11428087, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TUMCenRwvL0/AAAAAAAAAAI/AAAAAAAAAJU/_o4xJIeAPhc/photo.jpg?sz=128", "display_name": "Fran&#231;ois Roberge", "link": "https://stackoverflow.com/users/11428087/fran%c3%a7ois-roberge"}, "is_accepted": false, "score": 1, "last_activity_date": 1556555202, "creation_date": 1556555202, "answer_id": 55907383, "question_id": 35758147, "link": "https://stackoverflow.com/questions/35758147/taking-np-average-while-ignoring-nans/55907383#55907383", "title": "Taking np.average while ignoring NaN&#39;s?", "body": "<p>@deto</p>\n\n<p>The first line removes all the nan which will cause the second line to have incorrect results.</p>\n\n<pre><code>data[np.isnan(data)] = 0;\nweights[np.isnan(data)] = 0;\nresult = np.average(data, weights=weights)\n</code></pre>\n\n<p>A copy should be taken before running the first line</p>\n\n<pre><code>data_copy = copy.deepcopy(data)\ndata[np.isnan(data_copy)] = 0;\nweights[np.isnan(data_copy)] = 0;\nresult = np.average(data, weights=weights)\n</code></pre>\n"}], "owner": {"reputation": 1283, "user_id": 4599066, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3b3ebaa6cb7900a39e4f71879f5c64a?s=128&d=identicon&r=PG&f=1", "display_name": "ChristineB", "link": "https://stackoverflow.com/users/4599066/christineb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16223, "favorite_count": 1, "accepted_answer_id": 35758345, "answer_count": 4, "score": 12, "last_activity_date": 1596744439, "creation_date": 1456953129, "last_edit_date": 1456953382, "question_id": 35758147, "link": "https://stackoverflow.com/questions/35758147/taking-np-average-while-ignoring-nans", "title": "Taking np.average while ignoring NaN&#39;s?", "body": "<p>I have a matrix with shape (64,17) correspond to time &amp; latitude. I want to take a weighted latitude average, which I know np.average can do because, unlike np.nanmean, which I used to average the longitudes, weights can be used in the arguments. However, np.average doesn't ignore NaN like np.nanmean does, so my first 5 entries of each row are included in the latitude averaging and make the entire time series full of NaN.</p>\n\n<p>Is there a way I can take a weighted average without the NaN's being included in the calculation?</p>\n\n<pre><code>file = Dataset(\"sst_aso_1951-2014latlon_seasavgs.nc\")\nsst = file.variables['sst']\nlat = file.variables['lat']\n\nsst_filt = np.asarray(sst)\nmissing_values_indices = sst_filt &lt; -8000000   #missing values have value -infinity\nsst_filt[missing_values_indices] = np.nan      #all missing values set to NaN\n\nweights = np.cos(np.deg2rad(lat))\nsst_zonalavg = np.nanmean(sst_filt, axis=2)\nprint sst_zonalavg[0,:]\nsst_ts = np.average(sst_zonalavg, axis=1, weights=weights)\nprint sst_ts[:]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[ nan nan nan nan nan\n 27.08499908 27.33333397 28.1457119 28.32899857 28.34454346\n 28.27285767 28.18571472 28.10199928 28.10812378 28.03411865\n 28.06411552 28.16529465]\n\n[ nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan\n nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan\n nan nan nan nan nan nan nan nan nan nan nan nan nan nan nan\n nan nan nan nan]\n</code></pre>\n"}, {"tags": ["python", "python-3.5", "python-importlib"], "owner": {"reputation": 2052, "user_id": 710047, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/27b521f193b58d597edba1a15eb55296?s=128&d=identicon&r=PG", "display_name": "totowtwo", "link": "https://stackoverflow.com/users/710047/totowtwo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1071, "favorite_count": 1, "answer_count": 0, "score": 8, "last_activity_date": 1456961815, "creation_date": 1456952877, "last_edit_date": 1495541368, "question_id": 35758065, "link": "https://stackoverflow.com/questions/35758065/how-to-import-a-package-given-full-path", "title": "How to import a package given full path?", "body": "<p>My question is similar to <a href=\"https://stackoverflow.com/questions/67631/how-to-import-a-module-given-the-full-path\">How to import a module given the full path?</a> however I'm not importing a .py source file, I'm importing a package with a .pyd. </p>\n\n<p>During runtime I am creating new package modules from some dynamically generated c code. I successfully generate package Foo with a <code>__init__.py</code> file and a <code>mod.pyd</code>:</p>\n\n<pre><code>/a/temp/dir/foo/\n    __init__.py\n    bar.pyd\n</code></pre>\n\n<p>The example code I'm working with is </p>\n\n<pre><code>import importlib.util\nspec = importlib.util.spec_from_file_location(\"foo.bar\", \"/path/to/file.py\")\nfoo = importlib.util.module_from_spec(spec)\nspec.loader.exec_module(foo)\nfoo.bar()\n</code></pre>\n\n<p>If I attempt to use <code>spec_from_file_location('foo.bar', '/a/temp/dir/foo/__init__.py')</code> the module <code>bar</code> from the pyd fails to load.</p>\n\n<p>If I attempt to use <code>spec_from_file_location('foo.bar', '/a/temp/dir/foo/')</code> then <code>spec_from_file_location</code> returns <code>None</code>.</p>\n\n<p>If I attempt to use <code>spec_from_file_location('foo.bar', '/a/temp/dir/foo/bar.pyd')</code> I get the following error stack:</p>\n\n<pre><code>File \"&lt;frozen importlib._bootstrap&gt;\", line 577, in module_from_spec\nFile \"&lt;frozen importlib._bootstrap_external&gt;\", line 903, in create_module\nFile \"&lt;frozen importlib._bootstrap&gt;\", line 222, in _call_with_frames_removed\nImportError: DLL load failed: A dynamic link library (DLL) initialization routine failed.\n</code></pre>\n\n<p>An alternative to the recommended 4 line importlib solution is to create concrete classes for <code>MetaPathFinder</code> and <code>SourceLoader</code>. My following <code>MetaPathFinder</code> works fine, however, I am unsure how to implement the <code>Loader</code> correctly. <code>get_data</code> return value expects some Unicode representation of python code. How do I return the package structure or the pyd contents in the loader?</p>\n\n<pre><code>class MyLoader(importlib.abc.SourceLoader):\n    def __init__(self, fullname, path, pyd):\n        self.path = path\n        self.fullname = fullname\n        self.pyd = pyd\n\n    def get_data(self, path):\n        print('*** get_data', path)\n        with open(os.path.join(self.path, self.pyd), 'r') as f:\n            return f.read()\n\n    def get_filename(self, fullname):\n        print('*** get_filename', fullname)\n        return os.path.join(self.path, '__init__.py')\n\n    def is_package(self):\n        return True\n\nclass MyFinder(MetaPathFinder):\n    def __init__(self, this_module, workdir, pyd):\n        self._this_module = this_module\n        self._workdir = workdir\n        self._pyd = pyd\n\n    def find_spec(self, fullname, path, target=None):\n        print('find_spec', fullname, path, target, self._this_module)\n\n        if fullname != self._this_module:\n            return\n\n        filename = os.path.join(self._workdir, self._this_module)\n\n        spec = ModuleSpec(\n            name = fullname,\n            loader = MyLoader(fullname, filename, self._pyd),\n            origin = filename,\n            loader_state = 1234,\n            is_package = True,\n        )\n        return spec\n\n    def is_package(self):\n        return True\n</code></pre>\n"}, {"tags": ["python", "date", "pandas", "time"], "answers": [{"tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": true, "score": 2, "last_activity_date": 1456954254, "creation_date": 1456954254, "answer_id": 35758477, "question_id": 35758054, "link": "https://stackoverflow.com/questions/35758054/change-default-date-on-date-parser-of-pandas-on-python/35758477#35758477", "title": "Change default date on date_parser of Pandas on Python", "body": "<p>You can try first convert to <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.to_datetime.html\" rel=\"nofollow\"><code>to_datetime</code></a> and then <code>replace</code> in <code>date_parser</code>:</p>\n\n<pre><code>import pandas as pd\nimport io\n\ntemp=u\"\"\"\n08/02/2012 00:00:02;136;134\n08/02/2012 00:00:03;134;134\n08/02/2012 00:00:05;136;134\n08/02/2012 00:00:06;136;134\n08/02/2012 00:00:08;134;134\n08/02/2012 00:00:09;134;134\"\"\"\n\n\n#after testing replace io.StringIO(temp) to filename\ndf =pd.read_csv(io.StringIO(temp), names=['ts', 'P1', 'P2'], \n                  sep=';', parse_dates=[0], index_col=0, \n                  date_parser=lambda x: pd.to_datetime(x).replace(year=2010, month=1,day=1))\n\nprint df\n                      P1   P2\nts                           \n2010-01-01 00:00:02  136  134\n2010-01-01 00:00:03  134  134\n2010-01-01 00:00:05  136  134\n2010-01-01 00:00:06  136  134\n2010-01-01 00:00:08  134  134\n2010-01-01 00:00:09  134  134\n</code></pre>\n"}], "owner": {"reputation": 871, "user_id": 3423639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5XNbO.jpg?s=128&g=1", "display_name": "Fernando Wittmann", "link": "https://stackoverflow.com/users/3423639/fernando-wittmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 35758477, "answer_count": 1, "score": 1, "last_activity_date": 1456956723, "creation_date": 1456952840, "last_edit_date": 1456956723, "question_id": 35758054, "link": "https://stackoverflow.com/questions/35758054/change-default-date-on-date-parser-of-pandas-on-python", "title": "Change default date on date_parser of Pandas on Python", "body": "<p>I have a dataset that look like this: </p>\n\n<pre><code>refrigerator.csv\n08/02/2012 00:00:02;136;134\n08/02/2012 00:00:03;134;134\n08/02/2012 00:00:05;136;134\n08/02/2012 00:00:06;136;134\n08/02/2012 00:00:08;134;134\n08/02/2012 00:00:09;134;134\n...\n</code></pre>\n\n<p>I would like to change the date that is always 08/02/2012 to 01/01/2010. I tried to do the following: </p>\n\n<pre><code>import pandas as pd\nrefr=pd.read_csv('C:/refrigerator.csv', names=['ts', 'P1', 'P2'], \n                  sep=';', parse_dates=[0], index_col=0, \n                  date_parser=lambda x: pd.Timestamp('2010-01-01 %s' %x)) \n</code></pre>\n\n<p>But I get a ValueError. In short I would like to keep the time as it is, and change the date. The reason is because I have multiple datasets and each one represents a daily power profile of an appliance. I don't care about the date, only the time. I would like to read all of them with the same date in order to sync them. </p>\n"}, {"tags": ["python", "math"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 4286897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/CTU9G.jpg?s=128&g=1", "display_name": "Nillo", "link": "https://stackoverflow.com/users/4286897/nillo"}, "edited": false, "score": 0, "creation_date": 1456953849, "post_id": 35758223, "comment_id": 59190105, "body": "I think this is somewhat right. But I am getting an error... &quot;TypeError: &#39;numpy.float64&#39; object cannot be interpreted as an integer&quot;"}, {"owner": {"reputation": 1386, "user_id": 6003081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5660dc35dd5e513e499f6bc08a56302f?s=128&d=identicon&r=PG&f=1", "display_name": "JeD", "link": "https://stackoverflow.com/users/6003081/jed"}, "reply_to_user": {"reputation": 61, "user_id": 4286897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/CTU9G.jpg?s=128&g=1", "display_name": "Nillo", "link": "https://stackoverflow.com/users/4286897/nillo"}, "edited": false, "score": 0, "creation_date": 1456954348, "post_id": 35758223, "comment_id": 59190393, "body": "@Nillo I think i fixed it. If it still doesn&#39;t work, tell me which line and I&#39;ll check it out"}, {"owner": {"reputation": 1386, "user_id": 6003081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5660dc35dd5e513e499f6bc08a56302f?s=128&d=identicon&r=PG&f=1", "display_name": "JeD", "link": "https://stackoverflow.com/users/6003081/jed"}, "reply_to_user": {"reputation": 61, "user_id": 4286897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/CTU9G.jpg?s=128&g=1", "display_name": "Nillo", "link": "https://stackoverflow.com/users/4286897/nillo"}, "edited": false, "score": 0, "creation_date": 1456954918, "post_id": 35758223, "comment_id": 59190724, "body": "@Nillo yep, works now, but be careful with the linspace. If M is 1 at some point you divide by zero."}, {"owner": {"reputation": 61, "user_id": 4286897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/CTU9G.jpg?s=128&g=1", "display_name": "Nillo", "link": "https://stackoverflow.com/users/4286897/nillo"}, "edited": false, "score": 0, "creation_date": 1456955303, "post_id": 35758223, "comment_id": 59190941, "body": "I think that fixes it yes. But I think something else in my code is causing me errors now. Thanks a lot for your help you have givin me something to work with."}], "tags": [], "owner": {"reputation": 1386, "user_id": 6003081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5660dc35dd5e513e499f6bc08a56302f?s=128&d=identicon&r=PG&f=1", "display_name": "JeD", "link": "https://stackoverflow.com/users/6003081/jed"}, "is_accepted": true, "score": 0, "last_activity_date": 1456954309, "last_edit_date": 1456954309, "creation_date": 1456953350, "answer_id": 35758223, "question_id": 35758040, "link": "https://stackoverflow.com/questions/35758040/python-calculation-of-non-overlapping-avar/35758223#35758223", "title": "Python, calculation of non-overlapping AVAR", "body": "<p>Like this?</p>\n\n<pre><code>for Mvalue in M:\n#iterate over all values\n    result=0.0\n    for i in range(1,int(Mvalue)):\n        #calculate the sum (**2 is squared in python)\n        result=result+(y[i+1]-y[i])**2\n    #divide result\n    result=result/(2*(Mvalue-1))\n    print result\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4286897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/CTU9G.jpg?s=128&g=1", "display_name": "Nillo", "link": "https://stackoverflow.com/users/4286897/nillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 35758223, "answer_count": 1, "score": 0, "last_activity_date": 1456956279, "creation_date": 1456952803, "last_edit_date": 1456956279, "question_id": 35758040, "link": "https://stackoverflow.com/questions/35758040/python-calculation-of-non-overlapping-avar", "title": "Python, calculation of non-overlapping AVAR", "body": "<p>It was a bit tough to find an appropriate title for this question. I need to calculate the expression underneath with various values of <code>M</code> using Python.</p>\n\n<p>&sigma;(M)<sup> 2</sup> = <sup>1</sup>/<sub>2 (M&minus;1)</sub> &sum;<sub>i=1</sub><sup>M&minus;1</sup> [y<sub>i+1</sub> &minus; y<sub>i</sub>]<sup> 2</sup></p>\n\n<p>(LaTeX <code>$\\sigma(M)^2 = \\frac{1}{2(M-1)} \\sum_{i=1}^{M-1} [y_{i+1}-y_{i}]^2$</code>)</p>\n\n<p>(for the curious mind, this is the non-overlapping Allan Deviation)</p>\n\n<pre><code>y = [a,a1,a2,a3,a4, ... ]\ntau = p.linspace(1, len(y), len(y))\nM = tau \n</code></pre>\n\n<p>Where <code>a_i</code> are just values for example <code>a=1.02</code>, <code>a1=2.34</code>, <code>a2=8.94</code> and so on.\nI am very unsure on how to do this but I'm guessing something like a for-loop within a for-loop. Where the inner loop makes the sum and the outer loop loops over the '&sigma;'s?</p>\n"}, {"tags": ["python", "linux", "yaml", "jinja2", "salt-stack"], "comments": [{"owner": {"reputation": 775, "user_id": 335197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd6ed92f93131ec4b655858976f664b?s=128&d=identicon&r=PG", "display_name": "Christophe Drevet-Droguet", "link": "https://stackoverflow.com/users/335197/christophe-drevet-droguet"}, "edited": false, "score": 0, "creation_date": 1456991757, "post_id": 35758028, "comment_id": 59204457, "body": "Can you post the result of a <code>state.show_sls</code>? We&#39;ll see exactly what names, requires, etc... are generated by your state file."}, {"owner": {"reputation": 31, "user_id": 5504521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0641e9e734b0e7be845809af566eba24?s=128&d=identicon&r=PG&f=1", "display_name": "Dresden", "link": "https://stackoverflow.com/users/5504521/dresden"}, "reply_to_user": {"reputation": 775, "user_id": 335197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd6ed92f93131ec4b655858976f664b?s=128&d=identicon&r=PG", "display_name": "Christophe Drevet-Droguet", "link": "https://stackoverflow.com/users/335197/christophe-drevet-droguet"}, "edited": false, "score": 0, "creation_date": 1457028325, "post_id": 35758028, "comment_id": 59230945, "body": "Thanks, for your interest; I added the output to the bottom of the question."}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1457028603, "post_id": 35758028, "comment_id": 59231108, "body": "Why not simply define <code>- requires</code>? You can have a user require that their group state has been run and salt will respect that ordering."}, {"owner": {"reputation": 31, "user_id": 5504521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0641e9e734b0e7be845809af566eba24?s=128&d=identicon&r=PG&f=1", "display_name": "Dresden", "link": "https://stackoverflow.com/users/5504521/dresden"}, "edited": false, "score": 0, "creation_date": 1457028719, "post_id": 35758028, "comment_id": 59231180, "body": "I though that is what this accomplised     - require:       - group: {{ user|replace(&quot;user&quot;, &quot;group&quot;) }}, what difference are you suggesting"}, {"owner": {"reputation": 31, "user_id": 5504521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0641e9e734b0e7be845809af566eba24?s=128&d=identicon&r=PG&f=1", "display_name": "Dresden", "link": "https://stackoverflow.com/users/5504521/dresden"}, "edited": false, "score": 0, "creation_date": 1457028811, "post_id": 35758028, "comment_id": 59231229, "body": "it appeared from the output above show_sls created the requirement in the state"}, {"owner": {"reputation": 775, "user_id": 335197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd6ed92f93131ec4b655858976f664b?s=128&d=identicon&r=PG", "display_name": "Christophe Drevet-Droguet", "link": "https://stackoverflow.com/users/335197/christophe-drevet-droguet"}, "edited": false, "score": 0, "creation_date": 1457077561, "post_id": 35758028, "comment_id": 59251384, "body": "Everything seems alright, including the requisites. The error message tells us that the group requirement failed. Is there an error on the <code>group</code> states?"}, {"owner": {"reputation": 31, "user_id": 5504521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0641e9e734b0e7be845809af566eba24?s=128&d=identicon&r=PG&f=1", "display_name": "Dresden", "link": "https://stackoverflow.com/users/5504521/dresden"}, "edited": false, "score": 0, "creation_date": 1457099869, "post_id": 35758028, "comment_id": 59265321, "body": "I reviewed and have now posted the group output, It does show an error, which I don&#39;t understand yet that complains about setting the gid, but it does actually set it correctly. Also I have now noted when the require clause is in place, it fails to make the user. when I remove the clause it created the user and group as expected, although the group error probaly would still be present. So far as I can tell the require options does not work. help me better understand how the requisites is ok; also could it be failing because of what appears to be a bogus error on the group creation?"}, {"owner": {"reputation": 31, "user_id": 5504521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0641e9e734b0e7be845809af566eba24?s=128&d=identicon&r=PG&f=1", "display_name": "Dresden", "link": "https://stackoverflow.com/users/5504521/dresden"}, "edited": false, "score": 0, "creation_date": 1457099904, "post_id": 35758028, "comment_id": 59265351, "body": "I added the group output and the buggy looking error to the original post"}, {"owner": {"reputation": 775, "user_id": 335197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd6ed92f93131ec4b655858976f664b?s=128&d=identicon&r=PG", "display_name": "Christophe Drevet-Droguet", "link": "https://stackoverflow.com/users/335197/christophe-drevet-droguet"}, "edited": false, "score": 0, "creation_date": 1459252666, "post_id": 35758028, "comment_id": 60192982, "body": "@Dresden The <code>gid</code> must be given as an integer, not as a string. I&#39;ve had a hard time too with this one. Try to remove the double quotes from your group state <code>gid</code> definition. Sorry for the late answer."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 5504521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0641e9e734b0e7be845809af566eba24?s=128&d=identicon&r=PG&f=1", "display_name": "Dresden", "link": "https://stackoverflow.com/users/5504521/dresden"}, "is_accepted": true, "score": 0, "last_activity_date": 1459279906, "creation_date": 1459279906, "answer_id": 36293492, "question_id": 35758028, "link": "https://stackoverflow.com/questions/35758028/how-to-require-a-dynamically-created-salt-state-from-within-a-loop-that-is-also/36293492#36293492", "title": "How to require a dynamically created salt state from within a loop that is also dynamically creating salt states?", "body": "<p>Thanks Christophe Drevet-Drogue,</p>\n\n<p>The gid and uid in my state file was wrapped in double quotes.\nThis caused it to be interpreted as a string rather than an integer which is what it was expecting. That issue caused all the other issued.</p>\n\n<p>So the answer to the original question is, the example I posted sufficiently accomplishes what I asked in the question.</p>\n"}], "owner": {"reputation": 31, "user_id": 5504521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0641e9e734b0e7be845809af566eba24?s=128&d=identicon&r=PG&f=1", "display_name": "Dresden", "link": "https://stackoverflow.com/users/5504521/dresden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "accepted_answer_id": 36293492, "answer_count": 1, "score": 1, "last_activity_date": 1459279906, "creation_date": 1456952755, "last_edit_date": 1457099631, "question_id": 35758028, "link": "https://stackoverflow.com/questions/35758028/how-to-require-a-dynamically-created-salt-state-from-within-a-loop-that-is-also", "title": "How to require a dynamically created salt state from within a loop that is also dynamically creating salt states?", "body": "<p>Here is what I am trying to accomplish.</p>\n\n<p>I have a salt state that manages users and groups in linux, /etc/skel templates, and will later manage many other user related templates.</p>\n\n<p>In short:</p>\n\n<p>Some states are created from reading a pillar with users and properties in a for loop.</p>\n\n<p>Some states are created from reading a pillar with groups and properties.</p>\n\n<p>Groups will exist that are the the primary group for a user, not all groups will have a primary user, and all created users will have a primary group created that is named after the user. It seems that the group has to be created with salt prior to creating the user. So, for each user state, where the state is created by the loop, and the user is created by that state, needs to require a corresponding group. However the group states don't statically exist they are also created dynamically from the group pillar. So, salt doesn't necessarily render every state in the same order each time as it does an alphabetic sort, but the order is determined after all the requisites are solved. (BTW. I tried to keep this summary of the sort short and not get down a rabbit hole here on salt render topics.)</p>\n\n<p>I think the issue I am having is that the group state has not been created at the time the user states are created.</p>\n\n<p>I have posted below the state with the require configuration which generates the error. When the requirement exist it does not create the user but does create the group, when the requirement is removed, it created the group and the user.</p>\n\n<p>If I remove the require line, I currently get my expected result, but not sure that I would always get the expected result long term as this grows.</p>\n\n<p>Also, am very interested in finding a way to require something from a dynamically created state within another dynamically created stated.</p>\n\n<p>Any ideas here to revise this to solve that issue would be appreciated as always here :)</p>\n\n<p>Here is the state file:</p>\n\n<pre><code>/etc/skel:\n  file.directory:\n    - name: /etc/skel\n    - user: root\n    - group: root\n    - dir_mode: 755\n/etc/skel/.bash_logout:\n  file.managed:\n    - name: /etc/skel/.bash_logout\n    - user: root\n    - group: root\n    - mode: 644\n    - source: salt://user_management/templates/etc/skel/bash_logout.sls\n/etc/skel/.bash_profile:\n  file.managed:\n    - name: /etc/skel/.bash_profile\n    - user: root\n    - group: root\n    - mode: 644\n    - source: salt://user_management/templates/etc/skel/bash_profile.sls\n/etc/skel/.bashrc:\n  file.managed:\n    - name: /etc/skel/.bashrc\n    - user: root\n    - group: root\n    - mode: 644\n    - source: salt://user_management/templates/etc/skel/bashrc.sls\n{% for group in pillar['user_management']['groups'] %}\n{{- group }}:\n  group.present:\n    - name: \"{{ pillar['user_management']['groups'][group]['name'] }}\"\n    - gid: \"{{ pillar['user_management']['groups'][group]['gid'] }}\"\n    - system: \"{{ pillar['user_management']['groups'][group]['system'] }}\"\n  {%- if pillar['user_management']['groups'][group]['addusers'] %}\n    - addusers:\n    {%- for add_user_name in pillar['user_management']['groups'][group]['addusers'] %}\n      - {{ add_user_name }}\n    {%- endfor %}\n  {%- endif %}\n  {%- if pillar['user_management']['groups'][group]['delusers'] %}\n    - delusers:\n    {%- for del_user_name in pillar['user_management']['groups'][group]['delusers'] %}\n      - {{ del_user_name }}\n    {%- endfor %}\n  {%- endif %}\n  {%- if pillar['user_management']['groups'][group]['members'] %}\n    - members:\n    {%- for member_name in pillar['user_management']['groups'][user]['members'] %}\n      - {{ member_name }}\n    {%- endfor %}\n  {%- endif %}\n{% endfor %}\n{% for user in pillar['user_management']['users'] %}\n{{- user }}:\n  user.present:\n    - name: \"{{ pillar['user_management']['users'][user]['name'] }}\"\n    - uid: \"{{ pillar['user_management']['users'][user]['uid'] }}\"\n    - gid: \"{{ pillar['user_management']['users'][user]['gid'] }}\"\n    - gid_from_name: \"{{ pillar['user_management']['users'][user]['gid_from_name'] }}\"\n  {%- if pillar['user_management']['users'][user]['groups'] %}\n    - groups:\n    {%- for group_name in pillar['user_management']['users'][user]['groups'] %}\n      - {{ group_name }}\n    {%- endfor %}\n  {%- endif %}\n  {%- if pillar['user_management']['users'][user]['optional_groups'] %}\n    - optional_groups:\n    {%- for optional_group_name in pillar['user_management']['users'][user]['optional_groups'] %}\n      - {{ optional_group_name }}\n    {%- endfor %}\n  {%- endif %}\n  {%- if pillar['user_management']['users'][user]['remove_groups'] %}\n    - remove_groups:\n    {%- for remove_group_name in pillar['user_management']['users'][user]['remove_groups'] %}\n      - {{ remove_group_name }}\n    {%- endfor %}\n  {%- endif %}\n    - home: \"{{ pillar['user_management']['users'][user]['home'] }}\"\n    - createhome: \"{{ pillar['user_management']['users'][user]['createhome'] }}\"\n    - password: \"{{ pillar['user_management']['users'][user]['password'] }}\"\n    - enforce_password: \"{{ pillar['user_management']['users'][user]['enforce_password'] }}\"\n    - empty_password: \"{{ pillar['user_management']['users'][user]['empty_password'] }}\"\n    - shell: \"{{ pillar['user_management']['users'][user]['shell'] }}\"\n    - unique: \"{{ pillar['user_management']['users'][user]['unique'] }}\"\n    - system: \"{{ pillar['user_management']['users'][user]['system'] }}\"\n    - fullname: \"{{ pillar['user_management']['users'][user]['fullname'] }}\"\n    - require:\n      - group: {{ user|replace(\"user\", \"group\") }}\n{% endfor %}\n</code></pre>\n\n<p>Here is the user pillar file:</p>\n\n<pre><code>user_management:\n  users:\n    user_mdresden:\n      name: mdresden\n      uid: 10000\n      gid: 10000\n      gid_from_name: True\n      groups:\n        - wheel\n      optional_groups:\n        - users\n      remove_groups:\n        # - list\n      home: /home/mdresden\n      createhome: True\n      password: '$6$wBMXk1u6Jxapb5GR$o4YckBYhVjZZ28vyOkcPwBLMH2tcgWAPqdqzLLOGGY5DCM1aaz/rNfnjpMdcmE4GFt/5dzwu8z3YXViptLTMT/'\n      enforce_password: True\n      empty_password: False\n      shell: \"/bin/bash\"\n      unique: True\n      system: False\n      fullname: \"Matthew Dresden\"\n    user_csunderarajulu:\n      name: csunderarajulu\n      uid: 10001\n      gid: 10001\n      gid_from_name: True\n      groups:\n        # - list\n      optional_groups:\n        - users\n      remove_groups:\n        # - list\n      home: /home/csunderarajulu\n      createhome: True\n      password: '$6$wBMXk1u6Jxapb5GR$o4YckBYhVjZZ28vyOkcPwBLMH2tcgWAPqdqzLLOGGY5DCM1aaz/rNfnjpMdcmE4GFt/5dzwu8z3YXViptLTMT/'\n      enforce_password: True\n      empty_password: False\n      shell: \"/bin/bash\"\n      unique: True\n      system: False\n      fullname: \"Chandrasekaran Sunderarajulu\"\n</code></pre>\n\n<p>Here is the group pillar file:</p>\n\n<pre><code>user_management:\n  groups:\n    group_mdresden:\n      name: mdresden\n      gid: 10000\n      system: False\n      addusers:\n        # - list\n        # - list\n      delusers:\n        # - list\n        # - list\n      members:\n    group_csunderarajulu:\n      name: csunderarajulu\n      gid: 10001\n      system: False\n      addusers:\n        # - list\n        # - list\n      delusers:\n        # - list\n        # - list\n      members:\n</code></pre>\n\n<p>The error only seems to occur on a real run, not with test enabled.\nHere is the error for the users:</p>\n\n<pre><code>user_|-user_csunderarajulu_|-csunderarajulu_|-present:\n    ----------\n    __run_num__:\n        7\n    __sls__:\n        user_management.users.manage\n    changes:\n        ----------\n    comment:\n        One or more requisite failed: user_management.users.manage.group_csunderarajulu\n    result:\n        False\nuser_|-user_mdresden_|-mdresden_|-present:\n    ----------\n    __run_num__:\n        6\n    __sls__:\n        user_management.users.manage\n    changes:\n        ----------\n    comment:\n        One or more requisite failed: user_management.users.manage.group_mdresden\n    result:\n        False\n</code></pre>\n\n<p>Here is the result when I remove the requirement:</p>\n\n<pre><code>user_|-user_csunderarajulu_|-csunderarajulu_|-present:\n    ----------\n    __run_num__:\n        7\n    changes:\n        ----------\n        fullname:\n            Chandrasekaran Sunderarajulu\n        gid:\n            10001\n        groups:\n            - csunderarajulu\n            - users\n        home:\n            /home/csunderarajulu\n        homephone:\n        name:\n            csunderarajulu\n        passwd:\n            x\n        roomnumber:\n        shell:\n            /bin/bash\n        uid:\n            10001\n        workphone:\n    comment:\n        New user csunderarajulu created\n    duration:\n        106.136\n    name:\n        csunderarajulu\n    result:\n        True\n    start_time:\n        20:55:32.687433\nuser_|-user_mdresden_|-mdresden_|-present:\n    ----------\n    __run_num__:\n        6\n    changes:\n        ----------\n        fullname:\n            Matthew Dresden\n        gid:\n            10000\n        groups:\n            - mdresden\n            - users\n            - wheel\n        home:\n            /home/mdresden\n        homephone:\n        name:\n            mdresden\n        passwd:\n            x\n        roomnumber:\n        shell:\n            /bin/bash\n        uid:\n            10000\n        workphone:\n    comment:\n        New user mdresden created\n    duration:\n        153.671\n    name:\n        mdresden\n    result:\n        True\n    start_time:\n        20:55:32.532969\n</code></pre>\n\n<p>While the group is created seemingly successfully, the output from the the group create also shows an error.</p>\n\n<p>Here is the output for the group that shows the error:</p>\n\n<pre><code>group_|-group_csunderarajulu_|-csunderarajulu_|-present:\n        ----------\n        __run_num__:\n            5\n        changes:\n            ----------\n            Failed:\n                ----------\n                gid:\n                    10001\n        comment:\n            Group {0} has been created but, some changes could not be applied\n        duration:\n            34.491\n        name:\n            csunderarajulu\n        result:\n            False\n        start_time:\n            13:40:14.615013\n    group_|-group_mdresden_|-mdresden_|-present:\n        ----------\n        __run_num__:\n            4\n        changes:\n            ----------\n            Failed:\n                ----------\n                gid:\n                    10000\n        comment:\n            Group {0} has been created but, some changes could not be applied\n        duration:\n            168.642\n        name:\n            mdresden\n        result:\n            False\n        start_time:\n            13:40:14.445528\n</code></pre>\n\n<p>Here is the output of:\n    salt-call --local state.show_sls user_management.users.manage</p>\n\n<pre><code>local:\n    ----------\n    /etc/skel:\n        ----------\n        __env__:\n            base\n        __sls__:\n            user_management.users.manage\n        file:\n            |_\n              ----------\n              name:\n                  /etc/skel\n            |_\n              ----------\n              user:\n                  root\n            |_\n              ----------\n              group:\n                  root\n            |_\n              ----------\n              dir_mode:\n                  755\n            - directory\n            |_\n              ----------\n              order:\n                  10000\n    /etc/skel/.bash_logout:\n        ----------\n        __env__:\n            base\n        __sls__:\n            user_management.users.manage\n        file:\n            |_\n              ----------\n              name:\n                  /etc/skel/.bash_logout\n            |_\n              ----------\n              user:\n                  root\n            |_\n              ----------\n              group:\n                  root\n            |_\n              ----------\n              mode:\n                  644\n            |_\n              ----------\n              source:\n                  salt://user_management/templates/etc/skel/bash_logout.sls\n            - managed\n            |_\n              ----------\n              order:\n                  10001\n    /etc/skel/.bash_profile:\n        ----------\n        __env__:\n            base\n        __sls__:\n            user_management.users.manage\n        file:\n            |_\n              ----------\n              name:\n                  /etc/skel/.bash_profile\n            |_\n              ----------\n              user:\n                  root\n            |_\n              ----------\n              group:\n                  root\n            |_\n              ----------\n              mode:\n                  644\n            |_\n              ----------\n              source:\n                  salt://user_management/templates/etc/skel/bash_profile.sls\n            - managed\n            |_\n              ----------\n              order:\n                  10002\n    /etc/skel/.bashrc:\n        ----------\n        __env__:\n            base\n        __sls__:\n            user_management.users.manage\n        file:\n            |_\n              ----------\n              name:\n                  /etc/skel/.bashrc\n            |_\n              ----------\n              user:\n                  root\n            |_\n              ----------\n              group:\n                  root\n            |_\n              ----------\n              mode:\n                  644\n            |_\n              ----------\n              source:\n                  salt://user_management/templates/etc/skel/bashrc.sls\n            - managed\n            |_\n              ----------\n              order:\n                  10003\n    group_csunderarajulu:\n        ----------\n        __env__:\n            base\n        __sls__:\n            user_management.users.manage\n        group:\n            |_\n              ----------\n              name:\n                  csunderarajulu\n            |_\n              ----------\n              gid:\n                  10001\n            |_\n              ----------\n              system:\n                  False\n            - present\n            |_\n              ----------\n              order:\n                  10005\n    group_mdresden:\n        ----------\n        __env__:\n            base\n        __sls__:\n            user_management.users.manage\n        group:\n            |_\n              ----------\n              name:\n                  mdresden\n            |_\n              ----------\n              gid:\n                  10000\n            |_\n              ----------\n              system:\n                  False\n            - present\n            |_\n              ----------\n              order:\n                  10004\n    user_csunderarajulu:\n        ----------\n        __env__:\n            base\n        __sls__:\n            user_management.users.manage\n        user:\n            |_\n              ----------\n              name:\n                  csunderarajulu\n            |_\n              ----------\n              uid:\n                  10001\n            |_\n              ----------\n              gid:\n                  10001\n            |_\n              ----------\n              gid_from_name:\n                  True\n            |_\n              ----------\n              optional_groups:\n                  - users\n            |_\n              ----------\n              home:\n                  /home/csunderarajulu\n            |_\n              ----------\n              createhome:\n                  True\n            |_\n              ----------\n              password:\n                  $6$wBMXk1u6Jxapb5GR$o4YckBYhVjZZ28vyOkcPwBLMH2tcgWAPqdqzLLOGGY5DCM1aaz/rNfnjpMdcmE4GFt/5dzwu8z3YXViptLTMT/\n            |_\n              ----------\n              enforce_password:\n                  True\n            |_\n              ----------\n              empty_password:\n                  False\n            |_\n              ----------\n              shell:\n                  /bin/bash\n            |_\n              ----------\n              unique:\n                  True\n            |_\n              ----------\n              system:\n                  False\n            |_\n              ----------\n              fullname:\n                  Chandrasekaran Sunderarajulu\n            |_\n              ----------\n              require:\n                  |_\n                    ----------\n                    group:\n                        group_csunderarajulu\n            - present\n            |_\n              ----------\n              order:\n                  10007\n    user_mdresden:\n        ----------\n        __env__:\n            base\n        __sls__:\n            user_management.users.manage\n        user:\n            |_\n              ----------\n              name:\n                  mdresden\n            |_\n              ----------\n              uid:\n                  10000\n            |_\n              ----------\n              gid:\n                  10000\n            |_\n              ----------\n              gid_from_name:\n                  True\n            |_\n              ----------\n              groups:\n                  - wheel\n            |_\n              ----------\n              optional_groups:\n                  - users\n            |_\n              ----------\n              home:\n                  /home/mdresden\n            |_\n              ----------\n              createhome:\n                  True\n            |_\n              ----------\n              password:\n                  $6$wrBLmNvzyQcHsunt$N6qAv4QR/9A4oPb07zeBbdMQTG7dhxMt.5nXUYY3STwqyRlYvGi5G/GmItOu2M.wLzAOz0ClhEsQIUXMGwIwp1\n            |_\n              ----------\n              enforce_password:\n                  True\n            |_\n              ----------\n              empty_password:\n                  False\n            |_\n              ----------\n              shell:\n                  /bin/bash\n            |_\n              ----------\n              unique:\n                  True\n            |_\n              ----------\n              system:\n                  False\n            |_\n              ----------\n              fullname:\n                  Matthew Dresden\n            |_\n              ----------\n              require:\n                  |_\n                    ----------\n                    group:\n                        group_mdresden\n            - present\n            |_\n              ----------\n              order:\n                  10006\n</code></pre>\n\n<p>It produces the expected require group name.\ngroup_mdresden for example which is the name of the group that the state produces</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "edited": false, "score": 0, "creation_date": 1456952808, "post_id": 35757897, "comment_id": 59189509, "body": "Interesting - I get the desired result with your code. Are you sure your initial DataFrame is the one posted?"}, {"owner": {"reputation": 373, "user_id": 3166125, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d6b61a8bcb5ab33903e22b79244aead0?s=128&d=identicon&r=PG&f=1", "display_name": "gleb1783", "link": "https://stackoverflow.com/users/3166125/gleb1783"}, "reply_to_user": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "edited": false, "score": 0, "creation_date": 1456953421, "post_id": 35757897, "comment_id": 59189848, "body": "It&#39;s actually a lot bigger, and I sanitized the domains (for security sake) with [.] instead of ."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1456953538, "post_id": 35757897, "comment_id": 59189920, "body": "your code seems to be correct ..."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1456953864, "post_id": 35757897, "comment_id": 59190118, "body": "@gleb1783, try your code against your own data sample"}, {"owner": {"reputation": 373, "user_id": 3166125, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d6b61a8bcb5ab33903e22b79244aead0?s=128&d=identicon&r=PG&f=1", "display_name": "gleb1783", "link": "https://stackoverflow.com/users/3166125/gleb1783"}, "edited": false, "score": 0, "creation_date": 1456954481, "post_id": 35757897, "comment_id": 59190468, "body": "No luck (see updated answer)"}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "edited": false, "score": 0, "creation_date": 1456954683, "post_id": 35757897, "comment_id": 59190586, "body": "You are joining the column names of your dataframe per your code."}, {"owner": {"reputation": 373, "user_id": 3166125, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d6b61a8bcb5ab33903e22b79244aead0?s=128&d=identicon&r=PG&f=1", "display_name": "gleb1783", "link": "https://stackoverflow.com/users/3166125/gleb1783"}, "edited": false, "score": 0, "creation_date": 1456954818, "post_id": 35757897, "comment_id": 59190660, "body": "How do I join the columns themselves? LOL"}], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 3166125, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d6b61a8bcb5ab33903e22b79244aead0?s=128&d=identicon&r=PG&f=1", "display_name": "gleb1783", "link": "https://stackoverflow.com/users/3166125/gleb1783"}, "edited": false, "score": 0, "creation_date": 1456953297, "post_id": 35757973, "comment_id": 59189783, "body": "When I do this I get a TypeError: TypeError: sequence item 24: expected string, float found"}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "reply_to_user": {"reputation": 373, "user_id": 3166125, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d6b61a8bcb5ab33903e22b79244aead0?s=128&d=identicon&r=PG&f=1", "display_name": "gleb1783", "link": "https://stackoverflow.com/users/3166125/gleb1783"}, "edited": false, "score": 0, "creation_date": 1456953649, "post_id": 35757973, "comment_id": 59189982, "body": "means an item in the domain is a float."}, {"owner": {"reputation": 373, "user_id": 3166125, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d6b61a8bcb5ab33903e22b79244aead0?s=128&d=identicon&r=PG&f=1", "display_name": "gleb1783", "link": "https://stackoverflow.com/users/3166125/gleb1783"}, "edited": false, "score": 0, "creation_date": 1456954393, "post_id": 35757973, "comment_id": 59190417, "body": "So I just looped through my entire subset of data and printed the Python type for every item (both IP and Domain). No floats..."}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "reply_to_user": {"reputation": 373, "user_id": 3166125, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d6b61a8bcb5ab33903e22b79244aead0?s=128&d=identicon&r=PG&f=1", "display_name": "gleb1783", "link": "https://stackoverflow.com/users/3166125/gleb1783"}, "edited": false, "score": 0, "creation_date": 1456954788, "post_id": 35757973, "comment_id": 59190642, "body": "Try a smaller subset of data, eg.g <code>head()</code> and see if it works with that.  If so, keep chunking until you find the problem."}], "tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": true, "score": 2, "last_activity_date": 1456953750, "last_edit_date": 1456953750, "creation_date": 1456952568, "answer_id": 35757973, "question_id": 35757897, "link": "https://stackoverflow.com/questions/35757897/python-pandas-groupby-not-working-as-expected/35757973#35757973", "title": "Python Pandas Groupby not working as expected", "body": "<p>You need <code>domain</code> between the <code>groupby</code> and <code>agg</code> commands.  Add spacing around you pipe join if desired, e.g. <code>' | '.join(...)</code>.</p>\n\n<pre><code>pDNSPanda.groupby(\"ip\").domain.agg('|'.join)\n\nip\n46.101.214.145    cnwkabrnyld1c0[.]com|anfj63m[.]com|anf3xnem[.]com\n69.195.129.70                   cnwkabrnyld1c0[.]com|anfj63ms[.]com\nName: domain, dtype: object\n</code></pre>\n\n<p>If you have floats in your domains, it is best to convert them to strings.</p>\n\n<pre><code>df['domain'] = df.domain.astype(str)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": false, "score": 1, "last_activity_date": 1456952861, "creation_date": 1456952861, "answer_id": 35758058, "question_id": 35757897, "link": "https://stackoverflow.com/questions/35757897/python-pandas-groupby-not-working-as-expected/35758058#35758058", "title": "Python Pandas Groupby not working as expected", "body": "<p>I think this first values in column <code>ip</code> are unique like my first and second row - then you get only one value in column <code>domain</code> after <code>groupby</code>:</p>\n\n<pre><code>print pDNSPanda\n               ip                domain\n0         0.0.0.0             ip|domain\n1       1.1.1.200             ip|domain\n2  46.101.214.145  cnwkabrnyld1c0[.]com\n3  46.101.214.145         anfj63m[.]com\n4  46.101.214.145        anf3xnem[.]com\n5   69.195.129.70  cnwkabrnyld1c0[.]com\n6   69.195.129.70        anfj63ms[.]com\n\n\ng = pDNSPanda.groupby(\"ip\").agg('|'.join)\nprint g\n                                                           domain\nip                                                               \n0.0.0.0                                                 ip|domain\n1.1.1.200                                               ip|domain\n46.101.214.145  cnwkabrnyld1c0[.]com|anfj63m[.]com|anf3xnem[.]com\n69.195.129.70                 cnwkabrnyld1c0[.]com|anfj63ms[.]com\n</code></pre>\n\n<p>But I think is better use <code>groupby</code> with aggregate column, as <code>Alexander</code> mentioned in his answer.</p>\n"}], "owner": {"reputation": 373, "user_id": 3166125, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d6b61a8bcb5ab33903e22b79244aead0?s=128&d=identicon&r=PG&f=1", "display_name": "gleb1783", "link": "https://stackoverflow.com/users/3166125/gleb1783"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 0, "accepted_answer_id": 35757973, "answer_count": 2, "score": 0, "last_activity_date": 1456954604, "creation_date": 1456952338, "last_edit_date": 1456954604, "question_id": 35757897, "link": "https://stackoverflow.com/questions/35757897/python-pandas-groupby-not-working-as-expected", "title": "Python Pandas Groupby not working as expected", "body": "<p>I have a single dataframe like the following: </p>\n\n<pre><code>               ip              domain\n0  46.101.214.145  cnwkabrnyld1c0[.]com\n1  46.101.214.145        anfj63m[.]com\n2  46.101.214.145       anf3xnem[.]com\n3   69.195.129.70  cnwkabrnyld1c0[.]com\n4   69.195.129.70        anfj63ms[.]com\n</code></pre>\n\n<p>I am trying to groupby the \"ip\" column such that it will aggregate the duplicates onto the same line.</p>\n\n<p>Desired output:</p>\n\n<pre><code>               ip              domain\n0  46.101.214.145  cnwkabrnyld1c0[.]com | anfj63m[.]com | anf3xnem[.]com\n3   69.195.129.70  cnwkabrnyld1c0[.]com\n4   69.195.129.70        anfj63ms[.]com\n</code></pre>\n\n<p>This seems pretty straight forward based on the countless SOF and Panda documentation I've been reading.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>pDNSPanda = pd.read_csv('/tmp/pDNSCSV.csv', names=['ip', 'domain'])\ng = pDNSPanda.groupby(\"ip\").agg('|'.join)\n</code></pre>\n\n<p>Here's what I actually get:</p>\n\n<pre><code>                 domain\nip\n0.0.0.0       ip|domain\n1.1.1.200     ip|domain\n1.148.56.163  ip|domain\n1.167.81.129  ip|domain\n1.193.28.230  ip|domain\n</code></pre>\n\n<p>Edit: </p>\n\n<p>It was suggested that I try my own code against the above data set.</p>\n\n<pre><code>test.csv\n46.101.214.145  cnwkabrnyld1c0[.]com\n46.101.214.145        anfj63m[.]com\n46.101.214.145       anf3xnem[.]com\n69.195.129.70  cnwkabrnyld1c0[.]com\n69.195.129.70        anfj63ms[.]com\n\n&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; p = pd.read_csv('/tmp/test.csv', names=['ip', 'domain'])\n&gt;&gt;&gt; g = p.groupby(\"ip\").agg(\"|\".join)\n&gt;&gt;&gt; print g\n                                         domain\nip\n46.101.214.145        anfj63m[.]com   ip|domain\n46.101.214.145       anf3xnem[.]com   ip|domain\n46.101.214.145  cnwkabrnyld1c0[.]com  ip|domain\n69.195.129.70        anfj63ms[.]comp|domain\n69.195.129.70  cnwkabrnyld1c0[.]com   ip|domain\n</code></pre>\n"}, {"tags": ["python", "shell", "cron", "crontab"], "comments": [{"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1456952431, "post_id": 35757848, "comment_id": 59189278, "body": "Try after removing the file. If the crontab runs, it should create it."}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1456956444, "post_id": 35757848, "comment_id": 59191565, "body": "The con will not know settings from your <code>.profile</code> of <code>.bashrc</code>. Maybe you are missing something, such as a change to PATh so pythom can be found."}], "answers": [{"comments": [{"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "reply_to_user": {"reputation": 533, "user_id": 4204809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-feCyPu0lFTE/AAAAAAAAAAI/AAAAAAAAB4Q/R1Azr1C3drc/photo.jpg?sz=128", "display_name": "SinByCos", "link": "https://stackoverflow.com/users/4204809/sinbycos"}, "edited": false, "score": 0, "creation_date": 1456954806, "post_id": 35757980, "comment_id": 59190651, "body": "@AlexStone did you use the full path of where you want the file to ensure that it is put in the correct place?"}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "reply_to_user": {"reputation": 533, "user_id": 4204809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-feCyPu0lFTE/AAAAAAAAAAI/AAAAAAAAB4Q/R1Azr1C3drc/photo.jpg?sz=128", "display_name": "SinByCos", "link": "https://stackoverflow.com/users/4204809/sinbycos"}, "edited": false, "score": 0, "creation_date": 1456973574, "post_id": 35757980, "comment_id": 59197439, "body": "@AlexStone i added some more detail what my need to be done."}, {"owner": {"reputation": 533, "user_id": 4204809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-feCyPu0lFTE/AAAAAAAAAAI/AAAAAAAAB4Q/R1Azr1C3drc/photo.jpg?sz=128", "display_name": "SinByCos", "link": "https://stackoverflow.com/users/4204809/sinbycos"}, "edited": false, "score": 0, "creation_date": 1456993536, "post_id": 35757980, "comment_id": 59205493, "body": "Thanks for your detailed answer, however when I do tail /var/log/cron I get &quot;No such file or directory&quot;. But I removed the &quot;empty&quot; file, added chmod 700 permissions to the file by doing chmod 700 cron.sh, and now it&#39;s working. Thanks though ;)"}], "tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": true, "score": 1, "last_activity_date": 1457235900, "last_edit_date": 1457235900, "creation_date": 1456952586, "answer_id": 35757980, "question_id": 35757848, "link": "https://stackoverflow.com/questions/35757848/how-to-know-if-crontab-is-working/35757980#35757980", "title": "How to know if Crontab is working?", "body": "<p>Try after removing the file. If the crontab runs, it should create it</p>\n\n<p>There is a way to check if your crontab job ran successfully. Note that the log file references in the cron commands are given using full paths not relative paths. You need to make sure that your scripts use full paths or cd to the correct working directory.</p>\n\n<p><a href=\"http://www.thegeekstuff.com/2012/07/crontab-log/\" rel=\"nofollow\">Crontab Log: How to Log the Output of My Cron Script</a></p>\n\n<blockquote>\n  <p>Let us say that you\u2019ve added the backup.sh to your crontab as shown\n  below to execute it at midnight every day.</p>\n</blockquote>\n\n<pre><code>$ crontab -e 59 23 * * * /home/john/bin/backup.sh\n</code></pre>\n\n<blockquote>\n  <p>To verify whether the this job got executed successfully or not, check\n  the /var/log/cron file, which contains information about all the cron\n  jobs that gets executed in your system. As you see from the following\n  output, john\u2019s cron job got executed succesfully.</p>\n</blockquote>\n\n<pre><code>$ tail /var/log/cron\nOct  8 22:00:00 dev-db crond[18340]: (root) CMD (/bin/sh /home/root/bin/system_check &amp;)\nOct  8 23:00:00 dev-db crond[20348]: (oracle) CMD (/bin/sh /home/oracle/bin/cleanup.sh &amp;)\nOct  8 23:59:00 dev-db crond[20399]: (john) CMD (/bin/sh /home/john/bin/backup.sh &amp;)\n</code></pre>\n\n<blockquote>\n  <p>Cron log contains the following information:</p>\n  \n  <p>Timestamp \u2013 The date and time when the cron job was executed</p>\n  \n  <p>Hostname \u2013 The hostname of the server (For example, dev-db)</p>\n  \n  <p>The cron deamon name and the PID. For example, crond[20399]</p>\n  \n  <p>Username \u2013 The username under which this cron job got executed. For\n  example, john.</p>\n  \n  <p>CMD \u2013 Anything following this is the real command that got executed at\n  that time.</p>\n  \n  <p>If there are any echo statements inside the backup.sh, you might want\n  to log those into a file. In general, if the backup.sh cron script\n  throws any output (including errors), you might want to log those to a\n  log file. To do this, modify the crontab entry and add the output and\n  error redirection as shown below.</p>\n</blockquote>\n\n<pre><code>$ crontab -e 59 23 * * * /home/john/bin/backup.sh &gt; /home/john/logs/backup.log 2&gt;&amp;1\n</code></pre>\n\n<blockquote>\n  <p>In the above:</p>\n  \n  <p>/home/john/logs/backup.log indicates that the standard output of the\n  backup.sh script will be redirected to the backup.log file.</p>\n  \n  <p>2>&amp;1 indicates that the standard error (2>) is redirected to the same\n  file descriptor that is pointed by standard output (&amp;1).</p>\n  \n  <p>So, both standard output and error will be redirected to\n  /home/john/logs/backup.log</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 3346965, "user_type": "registered", "profile_image": "https://graph.facebook.com/1419025912/picture?type=large", "display_name": "Alex Bogomolov", "link": "https://stackoverflow.com/users/3346965/alex-bogomolov"}, "is_accepted": false, "score": 0, "last_activity_date": 1456956810, "creation_date": 1456956810, "answer_id": 35759222, "question_id": 35757848, "link": "https://stackoverflow.com/questions/35757848/how-to-know-if-crontab-is-working/35759222#35759222", "title": "How to know if Crontab is working?", "body": "<p>First check if you have sufficient permissions for your cron.sh file. </p>\n\n<pre><code>chmod 755 cron.sh\n</code></pre>\n\n<p>Then modify your crontab to run periodically (i.e. 1 min):</p>\n\n<pre><code> */1 * * * * /Users/tanavya.dimri/Documents/cron.sh\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15608, "user_id": 2067976, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/stSRf.jpg?s=128&g=1", "display_name": "Andriy Ivaneyko", "link": "https://stackoverflow.com/users/2067976/andriy-ivaneyko"}, "is_accepted": false, "score": 0, "last_activity_date": 1457236301, "creation_date": 1457236301, "answer_id": 35822902, "question_id": 35757848, "link": "https://stackoverflow.com/questions/35757848/how-to-know-if-crontab-is-working/35822902#35822902", "title": "How to know if Crontab is working?", "body": "<p>By default cronjobs logged into <code>/var/log/syslog\n</code> </p>\n\n<p>So you can simply grep that log CRON and checkout your job execution:</p>\n\n<pre><code>grep CRON /var/log/syslog\n</code></pre>\n"}], "owner": {"reputation": 533, "user_id": 4204809, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-feCyPu0lFTE/AAAAAAAAAAI/AAAAAAAAB4Q/R1Azr1C3drc/photo.jpg?sz=128", "display_name": "SinByCos", "link": "https://stackoverflow.com/users/4204809/sinbycos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13303, "favorite_count": 0, "accepted_answer_id": 35757980, "answer_count": 3, "score": 3, "last_activity_date": 1457236301, "creation_date": 1456952152, "last_edit_date": 1456957014, "question_id": 35757848, "link": "https://stackoverflow.com/questions/35757848/how-to-know-if-crontab-is-working", "title": "How to know if Crontab is working?", "body": "<p>I'm trying to run a simple crontab (on mac OSX Terminal)</p>\n\n<p>My cronjob thing looks like this:</p>\n\n<pre><code>* * * * * /Users/tanavya.dimri/Documents/cron.sh\n</code></pre>\n\n<p>cron.sh:</p>\n\n<pre><code>#!/bin/bash\ncd /Users/tanavya.dimri/Documents\npython hello.py &gt; empty\n</code></pre>\n\n<p>And hello.py is simply</p>\n\n<pre><code>print \"Hello\"\n</code></pre>\n\n<p>When I just run <code>sh cron.sh</code> it works. Empty, which is just an empty text file, does get changed to \"Hello\".\nHowever, I don't really know if it's working with crontab because the file doesn't change after I remove the hello from it.</p>\n"}, {"tags": ["python", "parallel-processing", "ipython-parallel", "joblib"], "owner": {"reputation": 23, "user_id": 5179411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6222dbfff55943a4148fc1a480cd0cbf?s=128&d=identicon&r=PG&f=1", "display_name": "edraizen", "link": "https://stackoverflow.com/users/5179411/edraizen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1456952039, "creation_date": 1456952039, "question_id": 35757816, "link": "https://stackoverflow.com/questions/35757816/what-is-the-correct-workflow-for-parallelization-running-on-a-cluster-or-multip", "title": "What is the correct workflow for parallelization: running on a cluster or multiproccesses?", "body": "<p>I want to call a function similar to parallelize.map(function, args) that returns a list of results and the user is blind to the actual process. One of the functions I want to parallelize calls subprocess to another unix program that benefits from multiple cores. </p>\n\n<p>I first tried ipython-cluster-helper. This works well with my setup, but I ran into problems installing it on several other machines. I also have to ask for names of clusters during setup. I haven't seen other programs start jobs on clusters for you, so I don't know if that is accepted practice.</p>\n\n<p>joblib seems to be the standard for parallelization, but it can only use one cluster or computer at a time. This works as well, but is significantly slower because it is not using the cluster. </p>\n\n<p>Also, the server I am running this code on complains if a program has run too long to ensure that people use the cluster. Do I write another script to run this program only on our cluster -- if I used joblib?</p>\n\n<p>For now, I added special parameters in setup.py to add cluster names and install ipython-cluster-helper if necessary. And when map is called, it first checks if ipython-cluster-helper and the cluster names are available, use them, else use joblib.</p>\n\n<p>What are others ways of achieving this? I'm looking for a standard way to do this that will work on most machines with or with out a cluster, so I can release the code and make it easy to use.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "user-interface", "tkinter"], "comments": [{"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1456952133, "post_id": 35757807, "comment_id": 59189094, "body": "That&#39;s because you aren&#39;t changing what arguments you give to <code>Demo2</code>.  The error will probably tell you that.  When you call <code>Demo2(self.newwindow)</code>, you need to add the <code>itext</code> argument: <code>Demo2(self.newwindow, &quot;mytext&quot;)</code>."}, {"owner": {"reputation": 65, "user_id": 6009748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c546f06520dc98ff9d879017d6a998c1?s=128&d=identicon&r=PG&f=1", "display_name": "MartinM", "link": "https://stackoverflow.com/users/6009748/martinm"}, "reply_to_user": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1456952727, "post_id": 35757807, "comment_id": 59189456, "body": "sorry I messed it up. I see the question as answered and put it in again with the &quot;correct&quot; code which shows the problem"}, {"owner": {"reputation": 7264, "user_id": 3134251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/053ef2ca2163afe33977f37371043067?s=128&d=identicon&r=PG&f=1", "display_name": "Lafexlos", "link": "https://stackoverflow.com/users/3134251/lafexlos"}, "edited": false, "score": 0, "creation_date": 1456953505, "post_id": 35757807, "comment_id": 59189899, "body": "Problem is, you are calling <code>self.new_window</code> by adding paranthesis at the end. So second window appears because of <code>Toplevel</code> in <code>self.new_window</code>. To pass arguments to button, check the duplicate target."}, {"owner": {"reputation": 65, "user_id": 6009748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c546f06520dc98ff9d879017d6a998c1?s=128&d=identicon&r=PG&f=1", "display_name": "MartinM", "link": "https://stackoverflow.com/users/6009748/martinm"}, "reply_to_user": {"reputation": 7264, "user_id": 3134251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/053ef2ca2163afe33977f37371043067?s=128&d=identicon&r=PG&f=1", "display_name": "Lafexlos", "link": "https://stackoverflow.com/users/3134251/lafexlos"}, "edited": false, "score": 1, "creation_date": 1456955128, "post_id": 35757807, "comment_id": 59190848, "body": "@Lafexlos, Bhargav: thanks so much, you saved my day (... ah ....) my night. That&#39;s exactly what I needed!"}], "owner": {"reputation": 65, "user_id": 6009748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c546f06520dc98ff9d879017d6a998c1?s=128&d=identicon&r=PG&f=1", "display_name": "MartinM", "link": "https://stackoverflow.com/users/6009748/martinm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1456953645, "answer_count": 0, "score": 0, "last_activity_date": 1456954159, "creation_date": 1456952002, "last_edit_date": 1456954159, "question_id": 35757807, "link": "https://stackoverflow.com/questions/35757807/why-does-tkinter-python-create-two-windows-at-the-same-time-if-command-called", "closed_reason": "Duplicate", "title": "Why does tkinter (python) create two windows at the same time if command called with additional parameter?", "body": "<p>(original question had incorrect code)</p>\n\n<p>Rushy Panchal in 2013 gave a nice example of a small two-windows program (click \"new window\" --> new window appears --> click \"quit\" --> new window disappears...). I wonder why this does not work anymore, if the command used to call up the second window has an additional parameter. Then the two windows appear at the same time. </p>\n\n<p>If I don't find out, I'll never be able to write a larger program.</p>\n\n<p>In short: </p>\n\n<p>def new_window(self): --> works</p>\n\n<p>def new_window(self, i_text): --> doesn't work</p>\n\n<p>There must be a not too complicated solution, but even after looking for two evenings, I just don't get  it.</p>\n\n<p>Here the original code:</p>\n\n<pre><code>import tkinter as tk\n\nclass Demo1:\n    def __init__(self, master):\n        self.master = master\n        self.frame = tk.Frame(self.master)\n        self.button1 = tk.Button(self.frame, text = 'New Window', width = 25, command = self.new_window)\n        self.button1.pack()\n        self.frame.pack()\n    def new_window(self):\n        self.newWindow = tk.Toplevel(self.master)\n        self.app = Demo2(self.newWindow)\n\nclass Demo2:\n    def __init__(self, master):\n        self.master = master\n        self.frame = tk.Frame(self.master)\n        self.quitButton = tk.Button(self.frame, text = 'Quit', width = 25, command = self.close_windows)\n        self.quitButton.pack()\n        self.frame.pack()\n    def close_windows(self):\n        self.master.destroy()\n\ndef main():\n    root = tk.Tk()\n    app = Demo1(root)\n    root.mainloop()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>This works great.\nOk and now the modified version which does not work. </p>\n\n<pre><code>import Tkinter as tk\n\nclass Demo1:\n    def __init__(self, master):\n        self.master = master\n        self.frame = tk.Frame(self.master)\n        self.button1 = tk.Button(self.frame, text = 'New Window', width = 25, command = self.new_window('hello'))\n        self.button1.pack()\n        self.frame.pack()\n    def new_window(self, i_text):\n        self.newWindow = tk.Toplevel(self.master)\n        self.app = Demo2(self.newWindow)\n\nclass Demo2:\n    def __init__(self, master):\n        self.master = master\n        self.frame = tk.Frame(self.master)\n        self.quitButton = tk.Button(self.frame, text = 'Quit', width = 25, command = self.close_windows)\n        self.quitButton.pack()\n        self.frame.pack()\n    def close_windows(self):\n        self.master.destroy()\n\ndef main():\n    root = tk.Tk()\n    app = Demo1(root) \n    root.mainloop()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python", "console-application", "progress", "python-multiprocessing"], "answers": [{"tags": [], "owner": {"reputation": 376, "user_id": 2812590, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f302462fb23707b2df15f2cefed82f0f?s=128&d=identicon&r=PG&f=1", "display_name": "gvoysey", "link": "https://stackoverflow.com/users/2812590/gvoysey"}, "is_accepted": true, "score": 0, "last_activity_date": 1457048111, "creation_date": 1457048111, "answer_id": 35785236, "question_id": 35757801, "link": "https://stackoverflow.com/questions/35757801/displaying-console-progressbars-with-multiprocesing/35785236#35785236", "title": "displaying console progressbars with multiprocesing", "body": "<p><a href=\"https://github.com/aaren/multi_progress\" rel=\"nofollow\">https://github.com/aaren/multi_progress</a>  does what I wanted. </p>\n\n<p>This has some very strange output running in a PyCharm console, but works well in a real terminal.</p>\n"}], "owner": {"reputation": 376, "user_id": 2812590, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f302462fb23707b2df15f2cefed82f0f?s=128&d=identicon&r=PG&f=1", "display_name": "gvoysey", "link": "https://stackoverflow.com/users/2812590/gvoysey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 35785236, "answer_count": 1, "score": 0, "last_activity_date": 1457048111, "creation_date": 1456951987, "last_edit_date": 1456952670, "question_id": 35757801, "link": "https://stackoverflow.com/questions/35757801/displaying-console-progressbars-with-multiprocesing", "title": "displaying console progressbars with multiprocesing", "body": "<p>I have a modeling application I'm refining, and I'm having trouble getting real-time progressbar updates across multiple threads.</p>\n\n<p>Each unit of model work is mapped to one processor: </p>\n\n<pre><code>Class Main():\n   def run(self):\n        s1 = datetime.now()\n        p = mp.Pool(mp.cpu_count(), maxtasksperchild=1)\n        p.map(self.solve_one_cochlea, self.cochlear_list)\n        p.close()\n        p.join()            \n        print(\"simulation of {} channels finished in {:0.3f}s\".format(self.channels,timedelta.total_seconds(datetime.now()-s1)))\n</code></pre>\n\n<p>Inside <code>solve_one_cochlea</code>, there's a call to The Big Compute Loop.  On average, getting through all 7000 iterations of that loop takes about 45-90 seconds per thread: </p>\n\n<pre><code>import progressbar\n Class Worker:\n      def long_running_solve:\n           with progressbar.ProgressBar(max_value=7000, redirect_stdout=True) as bar:\n                for j in range(7000):\n                   #heavy linear algebra here\n                   bar.update(j)\n</code></pre>\n\n<p>This is all well and good, but what happens is that instead of getting two or more progress bars that update in my console in real time, i get two fully-completed progress bars that <strong>suddenly</strong> appear when <strong>all</strong> instances of <code>solve_one_cochlea</code> have been completed, right before the final <code>print()</code> in <code>run</code>. This kind of defeats the point. </p>\n\n<p><strong>What's a good way to change this code flow so my progress bars update the console dynamically?</strong></p>\n"}, {"tags": ["python", "oop"], "comments": [{"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1456952240, "post_id": 35757796, "comment_id": 59189155, "body": "Make <code>__repr__()</code> return <code>str(self.date)</code>.  It needs to return a string, or else there will be an error.  If you really want to go through <code>__repr__()</code>, you will need to use <code>eval()</code> or <code>ast.literal_eval()</code>."}, {"owner": {"reputation": 2432, "user_id": 1139131, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8c9d5ca0838f355d80360c341122d04b?s=128&d=identicon&r=PG&f=1", "display_name": "Colton Allen", "link": "https://stackoverflow.com/users/1139131/colton-allen"}, "reply_to_user": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1456952286, "post_id": 35757796, "comment_id": 59189178, "body": "@zondo I don&#39;t know the best method to do this.  <code>__repr__</code> was just my initial thought.  Is there a better way?"}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1456952390, "post_id": 35757796, "comment_id": 59189247, "body": "I mean that it&#39;s just not a good idea to go from instance to string to instance.  You should just use the <code>date</code> attribute."}], "answers": [{"comments": [{"owner": {"reputation": 1327, "user_id": 1771644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QXOfw.png?s=128&g=1", "display_name": "Michal Frystacky", "link": "https://stackoverflow.com/users/1771644/michal-frystacky"}, "edited": false, "score": 0, "creation_date": 1456952865, "post_id": 35757996, "comment_id": 59189545, "body": "I haven&#39;t thought about implementing this before. Thanks for this!"}], "tags": [], "owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "is_accepted": true, "score": 2, "last_activity_date": 1456952873, "last_edit_date": 1456952873, "creation_date": 1456952640, "answer_id": 35757996, "question_id": 35757796, "link": "https://stackoverflow.com/questions/35757796/how-can-i-represent-an-instance-as-a-typed-value/35757996#35757996", "title": "How can I represent an instance as a typed value", "body": "<p>This is perfect use case for a <a href=\"https://docs.python.org/2/howto/descriptor.html\" rel=\"nofollow\">descriptor.</a> Basically define <a href=\"https://docs.python.org/2/reference/datamodel.html#object.__get__\" rel=\"nofollow\"><code>__get__</code></a> method on <code>Field</code> class and return the expected value from it. You can also define <a href=\"https://docs.python.org/2/reference/datamodel.html#object.__set__\" rel=\"nofollow\"><code>__set__</code></a> as per your requirements, for example not allowing them to set values of other types.</p>\n\n<pre><code>import datetime\n\n\nclass Field(object):\n    def __init__(self):\n        self.val = datetime.date.today()\n\n    def __get__(self, instance=None, type=None):\n        if instance is not None:\n            return self.val\n        return self\n\n\nclass Container(object):\n    value_1 = Field()\n    value_2 = Field()\n\nc = Container()\nprint c.value_1.isoformat() # 2016-03-03\nprint c.value_2.isoformat() # 2016-03-03\n</code></pre>\n"}], "owner": {"reputation": 2432, "user_id": 1139131, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8c9d5ca0838f355d80360c341122d04b?s=128&d=identicon&r=PG&f=1", "display_name": "Colton Allen", "link": "https://stackoverflow.com/users/1139131/colton-allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 35757996, "answer_count": 1, "score": 1, "last_activity_date": 1456952873, "creation_date": 1456951959, "question_id": 35757796, "link": "https://stackoverflow.com/questions/35757796/how-can-i-represent-an-instance-as-a-typed-value", "title": "How can I represent an instance as a typed value", "body": "<p>I have two classes a <code>Container</code> and a <code>Field</code> class.  I want to represent the <code>Field</code> class as the value it contains.  It needs to be typed so I can do some meaningful operations with it.</p>\n\n<pre><code>import datetime\n\nclass Field(object):\n    date = datetime.date.today()\n\n    def __repr__(self):\n        return self.date\n\nclass Container(object):\n    value = Field().date\n    value_2 = Field()\n\nc = Container()\nprint c.value.isoformat() # perfect\nprint c.value_2.isoformat() # boo fails\n</code></pre>\n\n<p>I know SQLAlchemy does something along these lines.  You define attributes as column instances which return a typed value to you.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1456951985, "post_id": 35757791, "comment_id": 59188988, "body": "Not a good idea.  Use a dictionary."}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 0, "creation_date": 1456951994, "post_id": 35757791, "comment_id": 59188992, "body": "Why? the variable name isn&#39;t very useful, were you looking for a dictionary?"}], "owner": {"reputation": 5340, "user_id": 3507127, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1a19e510094ee1cb606319eb481e00c8?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/3507127/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1456951995, "answer_count": 0, "score": 0, "last_activity_date": 1456951951, "creation_date": 1456951951, "question_id": 35757791, "link": "https://stackoverflow.com/questions/35757791/how-do-i-declare-a-variable-with-the-variable-name-based-on-a-string-python-3-4", "closed_reason": "Duplicate", "title": "How do I declare a variable with the variable name based on a string? Python 3.4", "body": "<p>Let's say I have something like</p>\n\n<pre><code>year = 2017\n</code></pre>\n\n<p>How do I declare a new variable, like <code>sales_2017</code> except the suffix is based on the variable <code>year</code>?</p>\n\n<p>For example, something like \n<code>sales_{year}.format(year=year)</code> except that would be the syntax for a string, not a variable.</p>\n"}, {"tags": ["python", "python-3.x", "beautifulsoup"], "comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "reply_to_user": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 0, "creation_date": 1456952825, "post_id": 35757714, "comment_id": 59189519, "body": "@wilbur Don&#39;t make trivial edits to closed posts. It will push them to reopen queue and add a burden to the reviewers. If the post is closed, allow the OP to edit. Regards"}, {"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "reply_to_user": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1456952924, "post_id": 35757714, "comment_id": 59189573, "body": "@BhargavRao ah of course, my mistake! I just looked at the answers and saw that people were having a hard time seeing the <code>pip install</code> line. I&#39;ll keep that in mind in the future, sorry to have inconvenienced y&#39;all"}, {"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "reply_to_user": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 0, "creation_date": 1456953036, "post_id": 35757714, "comment_id": 59189638, "body": "@wilbur Not a problem when you do it for the first time. Good that you learned it early."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5900330, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fB4mCLCuGFQ/AAAAAAAAAAI/AAAAAAAAASY/hOHZ46-uGG0/photo.jpg?sz=128", "display_name": "Ahmad Nassar", "link": "https://stackoverflow.com/users/5900330/ahmad-nassar"}, "edited": false, "score": 0, "creation_date": 1456953797, "post_id": 35757793, "comment_id": 59190077, "body": "pretty sure this solved it"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 1, "user_id": 5900330, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fB4mCLCuGFQ/AAAAAAAAAAI/AAAAAAAAASY/hOHZ46-uGG0/photo.jpg?sz=128", "display_name": "Ahmad Nassar", "link": "https://stackoverflow.com/users/5900330/ahmad-nassar"}, "edited": false, "score": 0, "creation_date": 1456953871, "post_id": 35757793, "comment_id": 59190123, "body": "Good to know. You could also make a python3 virtualenv using the same <code>python3 -m</code> command. The &quot;-m&quot; means &quot;module&quot;."}, {"owner": {"reputation": 191, "user_id": 11145533, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-haBenSzMntc/AAAAAAAAAAI/AAAAAAAAALo/emEhIsQBxFs/photo.jpg?sz=128", "display_name": "Farhan Ahmed", "link": "https://stackoverflow.com/users/11145533/farhan-ahmed"}, "edited": false, "score": 0, "creation_date": 1589054231, "post_id": 35757793, "comment_id": 109142341, "body": "Did you install python 3.5 ? If not then download 3.5 then go to terminal of python 3.5 the  try to install it. Most probably you are on python 2.7 terminal."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 191, "user_id": 11145533, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-haBenSzMntc/AAAAAAAAAAI/AAAAAAAAALo/emEhIsQBxFs/photo.jpg?sz=128", "display_name": "Farhan Ahmed", "link": "https://stackoverflow.com/users/11145533/farhan-ahmed"}, "edited": false, "score": 0, "creation_date": 1589228169, "post_id": 35757793, "comment_id": 109205414, "body": "@FarhanAhmed I would advise always using latest Python, specifically miniconda."}], "tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": false, "score": 0, "last_activity_date": 1456951954, "creation_date": 1456951954, "answer_id": 35757793, "question_id": 35757714, "link": "https://stackoverflow.com/questions/35757714/installing-beautiful-soup/35757793#35757793", "title": "Installing Beautiful Soup", "body": "<p>Assuming you have a <code>python3</code> binary on your system </p>\n\n<pre><code>python3 -m pip install beautifulsoup4\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5900330, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fB4mCLCuGFQ/AAAAAAAAAAI/AAAAAAAAASY/hOHZ46-uGG0/photo.jpg?sz=128", "display_name": "Ahmad Nassar", "link": "https://stackoverflow.com/users/5900330/ahmad-nassar"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1002, "favorite_count": 0, "closed_date": 1456952191, "answer_count": 1, "score": -4, "last_activity_date": 1456953310, "creation_date": 1456951608, "last_edit_date": 1456953310, "question_id": 35757714, "link": "https://stackoverflow.com/questions/35757714/installing-beautiful-soup", "closed_reason": "Duplicate", "title": "Installing Beautiful Soup", "body": "<p>I am trying to install the latest Beautiful Soup on Mac 10.11.3. Whenever I run <code>pip install beautifulsoup4</code> the terminal defaults to installing bs4 for python 2.7 not 3.5. How do I install Beautiful Soup for Python 3.5 not 2.7?</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1456951830, "post_id": 35757692, "comment_id": 59188900, "body": "@kindall I already edited my answer.  I noticed that, too ;)"}], "tags": [], "owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "is_accepted": false, "score": 2, "last_activity_date": 1456951491, "creation_date": 1456951491, "answer_id": 35757692, "question_id": 35757645, "link": "https://stackoverflow.com/questions/35757645/how-to-restrict-user-inputs/35757692#35757692", "title": "How to restrict user inputs?", "body": "<p>Just use <code>str.isalpha()</code>:</p>\n\n<pre><code>user_input = \"\"\nwhile not user_input.isalpha():\n    user_input = raw_input(\" enter : \")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5971330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67b91bdd1e9341c852030e2e0e9c5962?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan", "link": "https://stackoverflow.com/users/5971330/hassan"}, "edited": false, "score": 0, "creation_date": 1456951826, "post_id": 35757701, "comment_id": 59188894, "body": "Thanks you so much ! i had tried everything i could think of and it still wouldn&#39;t work"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "reply_to_user": {"reputation": 31, "user_id": 5971330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67b91bdd1e9341c852030e2e0e9c5962?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan", "link": "https://stackoverflow.com/users/5971330/hassan"}, "edited": false, "score": 1, "creation_date": 1456951904, "post_id": 35757701, "comment_id": 59188940, "body": "If you like my answer, please accept it by clicking the green checkmark :-)"}, {"owner": {"reputation": 31, "user_id": 5971330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67b91bdd1e9341c852030e2e0e9c5962?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan", "link": "https://stackoverflow.com/users/5971330/hassan"}, "edited": false, "score": 0, "creation_date": 1456952106, "post_id": 35757701, "comment_id": 59189075, "body": "yeah i will but it doesn&#39;t let me, I will have to wait"}], "tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": true, "score": 1, "last_activity_date": 1456951531, "creation_date": 1456951531, "answer_id": 35757701, "question_id": 35757645, "link": "https://stackoverflow.com/questions/35757645/how-to-restrict-user-inputs/35757701#35757701", "title": "How to restrict user inputs?", "body": "<pre><code>while True:\n    user_input = raw_input(\" enter: \")\n    if user_input.isalpha():\n        break\n    else:\n        print \"try again\"\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5971330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67b91bdd1e9341c852030e2e0e9c5962?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan", "link": "https://stackoverflow.com/users/5971330/hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 1, "closed_date": 1456952076, "accepted_answer_id": 35757701, "answer_count": 2, "score": 1, "last_activity_date": 1508576679, "creation_date": 1456951290, "last_edit_date": 1508576679, "question_id": 35757645, "link": "https://stackoverflow.com/questions/35757645/how-to-restrict-user-inputs", "closed_reason": "Duplicate", "title": "How to restrict user inputs?", "body": "<p>For example a program has the line:</p>\n\n<pre><code>user_input = raw_input(\" enter : \")\n</code></pre>\n\n<p>How do you make it so that the program will only continue once what the user enters are letters only? And is he enter anything else he will get an error. </p>\n\n<p>EDIT: Thanks for the help but it says try again if there is a space. The solution is:</p>\n\n<pre><code>while True:\n    name = raw_input(\"Enter name : \")\n    if name.replace(' ', '').isalpha():\n        break\n    else:\n        print \"Try again\"\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1456951191, "post_id": 35757609, "comment_id": 59188544, "body": "Use Python3.  That fixed it for me ;)"}, {"owner": {"reputation": 3540, "user_id": 1578356, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/16b7172bb346958c1b69e0229ba1ac4f?s=128&d=identicon&r=PG", "display_name": "newday", "link": "https://stackoverflow.com/users/1578356/newday"}, "reply_to_user": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1456951343, "post_id": 35757609, "comment_id": 59188620, "body": "Thanks but I can not change the compiler to fix this issue. I have to stick to the current version."}, {"owner": {"reputation": 18953, "user_id": 4640209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bc12112054e578fc0bcd333cbb2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4640209/alex"}, "edited": false, "score": 0, "creation_date": 1456951573, "post_id": 35757609, "comment_id": 59188754, "body": "Python 2.7 doesn&#39;t support <code>%z</code>: <a href=\"https://hg.python.org/cpython/file/tip/Lib/_strptime.py#l298\" rel=\"nofollow noreferrer\">hg.python.org/cpython/file/tip/Lib/_strptime.py#l298</a>"}, {"owner": {"reputation": 1386, "user_id": 6003081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5660dc35dd5e513e499f6bc08a56302f?s=128&d=identicon&r=PG&f=1", "display_name": "JeD", "link": "https://stackoverflow.com/users/6003081/jed"}, "edited": false, "score": 0, "creation_date": 1456951699, "post_id": 35757609, "comment_id": 59188823, "body": "Seems like it will only work on python3: <a href=\"http://stackoverflow.com/questions/2609259/converting-string-to-datetime-object-in-python\" title=\"converting string to datetime object in python\">stackoverflow.com/questions/2609259/&hellip;</a>"}, {"owner": {"reputation": 18953, "user_id": 4640209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bc12112054e578fc0bcd333cbb2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4640209/alex"}, "edited": false, "score": 1, "creation_date": 1456951954, "post_id": 35757609, "comment_id": 59188971, "body": "You can do this in Python 2.7: <code>from dateutil.parser import parse; parse(&quot;17&#47;02&#47;2016 6:01:26 am(UTC-08:00)&quot;.replace(&quot;(UTC&quot;,&quot; &quot;)[:-1])</code>"}], "owner": {"reputation": 3540, "user_id": 1578356, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/16b7172bb346958c1b69e0229ba1ac4f?s=128&d=identicon&r=PG", "display_name": "newday", "link": "https://stackoverflow.com/users/1578356/newday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "closed_date": 1456951488, "answer_count": 0, "score": 0, "last_activity_date": 1456951267, "creation_date": 1456951129, "last_edit_date": 1456951267, "question_id": 35757609, "link": "https://stackoverflow.com/questions/35757609/how-to-passe-time-zone-as-arguments-in-python", "closed_reason": "Duplicate", "title": "How to passe time-zone as arguments in python", "body": "<pre><code>from datetime import datetime, timedelta\ndt1 = datetime.strptime(\"17/02/2016 6:01:26 am(UTC-08:00)\", \"%d/%m/%Y %H:%M:%S %p(%Z%z)\")\n</code></pre>\n\n<hr>\n\n<pre><code>&gt; Traceback (most recent call last):   File \"&lt;stdin&gt;\", line 1, in\n&gt; &lt;module&gt;   File \"C:\\Python27\\lib\\_strptime.py\", line 317, in _strptime\n&gt;     (bad_directive, format)) ValueError: 'z' is a bad directive in format '%d/%m/%Y %H:%M:%S %p(%Z%z)'\n</code></pre>\n\n<p>how to fix this issue?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 16399, "user_id": 4016285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SvSVV.png?s=128&g=1", "display_name": "B. M.", "link": "https://stackoverflow.com/users/4016285/b-m"}, "edited": false, "score": 0, "creation_date": 1456951315, "post_id": 35757580, "comment_id": 59188604, "body": "the good way is <code>c=np.loadtxt(&#39;test.txt&#39;)</code> . 2 it is because youhave two line in your file. remove the Line return."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1456951323, "post_id": 35757580, "comment_id": 59188610, "body": "You have to read in the file as numbers.  Print out zxyr, and you&#39;ll see the problem.  You fed numpy the wrong information for building the array you want.  Reshaping won&#39;t help at this point."}, {"owner": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "edited": false, "score": 0, "creation_date": 1456953728, "post_id": 35757580, "comment_id": 59190032, "body": "I think that error is because the 2 rows in your text file have different numbers of columns.  Try using <code>numpy.genfromtxt</code> using information from the documentation found here <a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.genfromtxt.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy-1.10.0/reference/generated/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "reply_to_user": {"reputation": 107, "user_id": 5414341, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce463ae54fb736bdb9317c40f72e6473?s=128&d=identicon&r=PG&f=1", "display_name": "Sinisha", "link": "https://stackoverflow.com/users/5414341/sinisha"}, "edited": false, "score": 0, "creation_date": 1456955390, "post_id": 35757748, "comment_id": 59190983, "body": "@sinisha I have updated my answer. See if that helps."}], "tags": [], "owner": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "is_accepted": true, "score": 1, "last_activity_date": 1456955357, "last_edit_date": 1456955357, "creation_date": 1456951736, "answer_id": 35757748, "question_id": 35757580, "link": "https://stackoverflow.com/questions/35757580/how-to-reshape-this-array-with-numpy/35757748#35757748", "title": "How to reshape this array with numpy?", "body": "<p>As @B.M. said in the comments you need to use <code>np.loadtxt</code>. As shown below:</p>\n\n<pre><code>import numpy as np      \n\nc = np.loadtxt('mytextfile.txt)\nprint (c.shape)\n</code></pre>\n\n<p>This gets the data from the file and puts it into a numpy array.\nIf the text file in my example is the same as yours then it will have the shape <code>(9,)</code> as you require.</p>\n\n<p>Another method you can do is the following:</p>\n\n<pre><code>with open('mytextfile.txt') as f:\n    content = f.readlines()\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 5414341, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce463ae54fb736bdb9317c40f72e6473?s=128&d=identicon&r=PG&f=1", "display_name": "Sinisha", "link": "https://stackoverflow.com/users/5414341/sinisha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 35757748, "answer_count": 1, "score": -4, "last_activity_date": 1456955357, "creation_date": 1456951053, "last_edit_date": 1456952060, "question_id": 35757580, "link": "https://stackoverflow.com/questions/35757580/how-to-reshape-this-array-with-numpy", "title": "How to reshape this array with numpy?", "body": "<p>My file looks like this</p>\n\n<pre><code>3.766204987418e+00  3.016098278453e+00  2.882128625608e+00  2.789447648712e+00  2.704276250639e+00 \n 2.540138572067e+00  2.318587560199e+00  2.272640952350e+00  2.138794921589e+00 \n</code></pre>\n\n<p>I have also code to read it</p>\n\n<pre><code>import numpy as np\n\nzxyr=[]\n\nwith open('det.txt') as f:\n    zxyr=list(f)\n\nc=np.asarray(zxyr)\nprint c.shape\nprint len(c)\n</code></pre>\n\n<p>which produces</p>\n\n<pre><code>(2,)\n2\n</code></pre>\n\n<p>How to reshape array to have (9,) shape?</p>\n\n<p>EDIT\nI have tried </p>\n\n<pre><code>import numpy as np      \n\nc = np.loadtxt('det.txt')\nprint (c.shape)\n</code></pre>\n\n<p>BUt</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"kiev.py\", line 3, in &lt;module&gt;\n    c = np.loadtxt('det.txt')\n  File \"/usr/lib/python2.7/dist-packages/numpy/lib/npyio.py\", line 856, in loadtxt\n    X = np.array(X, dtype)\nValueError: setting an array element with a sequence.\n</code></pre>\n"}, {"tags": ["python", "python-requests", "http-status-code-400"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user559633"}, "reply_to_user": {"reputation": 57, "user_id": 1830828, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/767aae21b00286eddc7ca99b9bc8e2c5?s=128&d=identicon&r=PG", "display_name": "Omnomnipotent", "link": "https://stackoverflow.com/users/1830828/omnomnipotent"}, "edited": false, "score": 0, "creation_date": 1456954483, "post_id": 35757663, "comment_id": 59190469, "body": "@user1830828 yeah, no problem.  accept the answer if it solved your question"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user559633"}, "is_accepted": true, "score": 0, "last_activity_date": 1456951382, "creation_date": 1456951382, "answer_id": 35757663, "question_id": 35757565, "link": "https://stackoverflow.com/questions/35757565/400-bad-request-for-legitimate-url-when-using-pythons-request-library/35757663#35757663", "title": "400 Bad Request for legitimate url when using Python&#39;s Request library", "body": "<p>Add headers to your request:</p>\n\n<pre><code>import requests\n\nurl = 'http://stats.nba.com/stats/boxscoretraditionalv2'+\\\n'?EndPeriod=10&amp;EndRange=28800&amp;GameID=0021500893&amp;RangeType=0'+\\\n'&amp;Season=2015-16&amp;SeasonType=Regular+Season&amp;StartPeriod=1'+\\\n'&amp;StartRange=0'\n\nheaders = {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:39.0) Gecko/20100101 Firefox/39.0'}\n\nresponse = requests.get(url, headers=headers)\n</code></pre>\n\n<p>The admin of NBA.com decided to give out HTTP 400s to users without a User-Agent that looks like a normal browser (probably to reduce scraping).</p>\n"}], "owner": {"reputation": 57, "user_id": 1830828, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/767aae21b00286eddc7ca99b9bc8e2c5?s=128&d=identicon&r=PG", "display_name": "Omnomnipotent", "link": "https://stackoverflow.com/users/1830828/omnomnipotent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4742, "favorite_count": 1, "accepted_answer_id": 35757663, "answer_count": 1, "score": 0, "last_activity_date": 1456951382, "creation_date": 1456951005, "question_id": 35757565, "link": "https://stackoverflow.com/questions/35757565/400-bad-request-for-legitimate-url-when-using-pythons-request-library", "title": "400 Bad Request for legitimate url when using Python&#39;s Request library", "body": "<p>I'm trying to use Python's Requests library to obtain a JSON object from a call to requests.get():</p>\n\n<pre><code>import requests\n\nurl = 'http://stats.nba.com/stats/boxscoretraditionalv2'+\\\n'?EndPeriod=10&amp;EndRange=28800&amp;GameID=0021500893&amp;RangeType=0'+\\\n'&amp;Season=2015-16&amp;SeasonType=Regular+Season&amp;StartPeriod=1'+\\\n'&amp;StartRange=0'\n\n# is the auth necessary?\nresponse = requests.get(url, auth=('user', 'pass'))\n</code></pre>\n\n<p>And I get the following exception:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"sample.py\", line 22, in &lt;module&gt;\n    response.raise_for_status() # raise exception if invalid response\n  File \"/Library/Python/2.7/site-packages/requests/models.py\", line 840, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nrequests.exceptions.HTTPError: 400 Client Error: Bad Request for url: http://stats.nba.com/stats/boxscoretraditionalv2?EndPeriod=10&amp;EndRange=28800&amp;GameID=0021500893&amp;RangeType=0&amp;Season=2015-16&amp;SeasonType=Regular+Season&amp;StartPeriod=1&amp;StartRange=0\n</code></pre>\n\n<p>What do I need to do in order to fix this? The link works - it simply renders the JSON, and returns a 200 OK if viewed through Chrome.</p>\n"}, {"tags": ["python", "scikit-learn", "tf-idf"], "answers": [{"comments": [{"owner": {"reputation": 892, "user_id": 4001177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TEikv.jpg?s=128&g=1", "display_name": "Golden Lion", "link": "https://stackoverflow.com/users/4001177/golden-lion"}, "edited": false, "score": 0, "creation_date": 1599171398, "post_id": 35767099, "comment_id": 112699688, "body": "examine_row=tv_df.iloc[0] print(examine_row.sort_values(ascending=False))  The higher the number the more frequent its usage in the document"}], "tags": [], "owner": {"reputation": 5359, "user_id": 1150479, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JcgbZ.jpg?s=128&g=1", "display_name": "tttthomasssss", "link": "https://stackoverflow.com/users/1150479/tttthomasssss"}, "is_accepted": true, "score": 3, "last_activity_date": 1456994475, "creation_date": 1456994475, "answer_id": 35767099, "question_id": 35757560, "link": "https://stackoverflow.com/questions/35757560/sklearns-tfidfvectorizer-word-frequency/35767099#35767099", "title": "sklearn&#39;s TfidfVectorizer word frequency?", "body": "<p>TF-IDF (which means \"term frequency - inverse document frequency\"), is <em>not</em> giving you the frequency of a term in its representation. </p>\n\n<p>TF-IDF gives high scores to terms occurring in only very few documents, and low scores for terms occurring in many documents, so its roughly speaking a measure of how discriminative a term is in a given document. Take a look at <a href=\"http://nlp.stanford.edu/IR-book/html/htmledition/tf-idf-weighting-1.html\" rel=\"nofollow\">this</a> resource to find an excellent description of TF-IDF and to get a better idea of what it is doing.</p>\n\n<p>If you only want counts, you'd need to use <code>CountVectorizer</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 15112, "user_id": 623735, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/8eb2d80a35122171463f423eeec7bfa4?s=128&d=identicon&r=PG", "display_name": "hobs", "link": "https://stackoverflow.com/users/623735/hobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1520382039, "creation_date": 1520382039, "answer_id": 49142167, "question_id": 35757560, "link": "https://stackoverflow.com/questions/35757560/sklearns-tfidfvectorizer-word-frequency/49142167#49142167", "title": "sklearn&#39;s TfidfVectorizer word frequency?", "body": "<p>I think you're forgetting that TF-IDF vectors are usually normalized so they always have a magnitude (length or 2-norm) of 1.</p>\n\n<p>So the TFIDF value <code>0.75</code> is the frequency of \"ate\" multiplied by the inverse document frequency of \"ate\" then <strong>divided by the magnitude</strong> of that TF-IDF vector.</p>\n\n<p>Here are all the dirty details (skip to <code>tfidf0 =</code> for the punchline):</p>\n\n<pre><code>from sklearn.feature_extraction.text import TfidfVectorizer\ncorpus = [\"The dog ate a sandwich and I ate a sandwich\",\n          \"The wizard transfigured a sandwich\"]\nvectorizer = TfidfVectorizer(stop_words='english')\ntfidfs = vectorizer.fit_transform(corpus)\n\n\nfrom collections import Counter\nimport pandas as pd\n\ncolumns = [k for (v, k) in sorted((v, k)\n           for k, v in vectorizer.vocabulary_.items())]\ntfidfs = pd.DataFrame(tfidfs.todense(),\n                      columns=columns)\n#     ate   dog  sandwich  transfigured  wizard \n#0   0.75  0.38      0.54          0.00    0.00\n#1   0.00  0.00      0.45          0.63    0.63\n\ndf = (1 / pd.DataFrame([vectorizer.idf_], columns=columns))\n#     ate   dog  sandwich  transfigured  wizard\n#0   0.71  0.71       1.0          0.71    0.71\ncorp = [txt.lower().split() for txt in corpus]\ncorp = [[w for w in d if w in vectorizer.vocabulary_] for d in corp]\ntfs = pd.DataFrame([Counter(d) for d in corp]).fillna(0).astype(int)\n#    ate  dog  sandwich  transfigured  wizard\n#0    2    1         2             0       0\n#1    0    0         1             1       1\n\n# The first document's TFIDF vector:\ntfidf0 = tfs.iloc[0] * (1. / df)\ntfidf0 = tfidf0 / pd.np.linalg.norm(tfidf0)\n#        ate       dog  sandwich  transfigured  wizard\n#0  0.754584  0.377292  0.536893           0.0     0.0\n\ntfidf1 = tfs.iloc[1] * (1. / df)\ntfidf1 = tfidf1 / pd.np.linalg.norm(tfidf1)\n#    ate  dog  sandwich  transfigured    wizard\n#0   0.0  0.0  0.449436      0.631667  0.631667\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 1903760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Kr6N.jpg?s=128&g=1", "display_name": "Sarmad Mahar", "link": "https://stackoverflow.com/users/1903760/sarmad-mahar"}, "is_accepted": false, "score": 0, "last_activity_date": 1528277573, "last_edit_date": 1528277573, "creation_date": 1528269686, "answer_id": 50714443, "question_id": 35757560, "link": "https://stackoverflow.com/questions/35757560/sklearns-tfidfvectorizer-word-frequency/50714443#50714443", "title": "sklearn&#39;s TfidfVectorizer word frequency?", "body": "<p>Just Print below code you will see output some thing like that </p>\n\n<pre><code>#(0, 1)        0.448320873199    Document 1, term = Dog\n#(0, 3)        0.630099344518    Document 1, term = Sandwitch\n\n    print(vectorizer.fit_transform(corpus))  \n# if python 3 other wise remove () in print\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 620, "user_id": 7867539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59c35e429a6b826d2138106190c2594?s=128&d=identicon&r=PG&f=1", "display_name": "deusxmachine", "link": "https://stackoverflow.com/users/7867539/deusxmachine"}, "is_accepted": false, "score": 0, "last_activity_date": 1564378251, "last_edit_date": 1564378251, "creation_date": 1564231483, "answer_id": 57232261, "question_id": 35757560, "link": "https://stackoverflow.com/questions/35757560/sklearns-tfidfvectorizer-word-frequency/57232261#57232261", "title": "sklearn&#39;s TfidfVectorizer word frequency?", "body": "<p><strong>NOTE : Use this if you have only unigrams</strong></p>\n\n<p>sklearn's tfidfvectorizer won't directly give you count.\nTo get count you can use <code>TfidfVectorizer</code> class method <code>inverse_transform</code> and <code>build_tokenizer</code></p>\n\n<pre><code>from sklearn.feature_extraction.text import TfidfVectorizer\ncorpus = [\n    'The dog ate a sandwich and I ate a sandwich',\n    'The wizard transfigured a sandwich'\n]\n\nvectorizer = TfidfVectorizer(stop_words='english')\n\nX = vectorizer.fit_transform(corpus)\nX_words = tfidf.inverse_transform(X) ## this will give you words instead of tfidf where tfidf &gt; 0\n\ntokenizer = vectorizer.build_tokenizer() ## return tokenizer function used in tfidfvectorizer\n\nfor idx,words in enumerate(X_words):\n    for word in words:\n        count = tokenizer(corpus[idx]).count(word)\n        print(idx,word,count)\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>0 dog 1\n0 ate 2\n0 sandwich 2\n1 sandwich 1\n1 wizard 1\n1 transfigured 1\n#0 means first sentence in corpus \n</code></pre>\n\n<p>This is a work around hope might help someone :)</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12396765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1db8c3704bce1b3c0c17509960d3c57?s=128&d=identicon&r=PG", "display_name": "pinkwatermelon", "link": "https://stackoverflow.com/users/12396765/pinkwatermelon"}, "is_accepted": false, "score": 0, "last_activity_date": 1578915671, "last_edit_date": 1578915671, "creation_date": 1578912549, "answer_id": 59715131, "question_id": 35757560, "link": "https://stackoverflow.com/questions/35757560/sklearns-tfidfvectorizer-word-frequency/59715131#59715131", "title": "sklearn&#39;s TfidfVectorizer word frequency?", "body": "<p>it should be <code>vectorizer</code> in the line \n<code>X_words = tfidf.inverse_transform(X)</code>\ninstead of tfidf.</p>\n"}], "owner": {"reputation": 1003, "user_id": 3175707, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9ada198a7ba1b82e758538e543012a11?s=128&d=identicon&r=PG&f=1", "display_name": "user3175707", "link": "https://stackoverflow.com/users/3175707/user3175707"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8002, "favorite_count": 0, "accepted_answer_id": 35767099, "answer_count": 5, "score": 1, "last_activity_date": 1578915671, "creation_date": 1456951001, "question_id": 35757560, "link": "https://stackoverflow.com/questions/35757560/sklearns-tfidfvectorizer-word-frequency", "title": "sklearn&#39;s TfidfVectorizer word frequency?", "body": "<p>I have a question about sklearn's TfidfVectorizer when it's doing the frequency of the word in each documents.</p>\n\n<p>the sample code I saw is:</p>\n\n<pre><code>&gt;&gt;&gt; from sklearn.feature_extraction.text import TfidfVectorizer\n\n&gt;&gt;&gt; corpus = [\n\n&gt;&gt;&gt;     'The dog ate a sandwich and I ate a sandwich',\n&gt;&gt;&gt;     'The wizard transfigured a sandwich'\n&gt;&gt;&gt; ]\n\n&gt;&gt;&gt; vectorizer = TfidfVectorizer(stop_words='english')\n\n&gt;&gt;&gt; print vectorizer.fit_transform(corpus).todense()\n\n[[ 0.75458397  0.37729199  0.53689271  0.          0.        ]\n[ 0.          0.          0.44943642  0.6316672   0.6316672 ]]\n</code></pre>\n\n<p>my question is: how do I interpret the numbers in the matrix? I understand the 0 means that the word i.e. wizard appears 0 times in the first document therefore it's 0, but how do I interpret the number 0.75458397? Is it the frequency that the word \"ate\" appeared in the first document? Or the frequency of the word \"ate\" that occurs in the entire corpus? </p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 846, "user_id": 3874053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xr2Gk.jpg?s=128&g=1", "display_name": "Jacobr365", "link": "https://stackoverflow.com/users/3874053/jacobr365"}, "edited": false, "score": 1, "creation_date": 1456951086, "post_id": 35757525, "comment_id": 59188487, "body": "So is the question &quot;please finish developing my algorithm?&quot; Also if the first step you took was to find differences wouldn&#39;t the next step be to use the differences to calculate the cost?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1456951099, "post_id": 35757525, "comment_id": 59188497, "body": "This question needs more help than we can provide. We like helping people, but sometimes the person needs to help themselves first by reading a book on the language, the on-line documentation, or asking someone they know who can help them. Once you understand the topic a little better, we invite you to edit this question and get it re-opened."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1456951204, "post_id": 35757525, "comment_id": 59188552, "body": "More to the point, what&#39;s wrong with the plagiarism algorithms you found on line before you posted here?  Where are you stuck in choosing and implementing one of those?  What alternate method did you develop?"}, {"owner": {"reputation": 18953, "user_id": 4640209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86bc12112054e578fc0bcd333cbb2a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4640209/alex"}, "edited": false, "score": 0, "creation_date": 1456951215, "post_id": 35757525, "comment_id": 59188559, "body": "Check out this Python plagiarism checker: <a href=\"https://github.com/architshukla/Plagiarism-Checker\" rel=\"nofollow noreferrer\">github.com/architshukla/Plagiarism-Checker</a>. This checker uses ngrams"}, {"owner": {"reputation": 329, "user_id": 5892566, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b77159dc0276ad75d626bb47b6d72f8c?s=128&d=identicon&r=PG&f=1", "display_name": "TheTask1337", "link": "https://stackoverflow.com/users/5892566/thetask1337"}, "reply_to_user": {"reputation": 846, "user_id": 3874053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xr2Gk.jpg?s=128&g=1", "display_name": "Jacobr365", "link": "https://stackoverflow.com/users/3874053/jacobr365"}, "edited": false, "score": 0, "creation_date": 1456951276, "post_id": 35757525, "comment_id": 59188584, "body": "@Jacobr365 I am not asking you to finish the code, I was asking for some ideas to help me move with it, because I sort of ran out of ideas. Thank you."}, {"owner": {"reputation": 329, "user_id": 5892566, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b77159dc0276ad75d626bb47b6d72f8c?s=128&d=identicon&r=PG&f=1", "display_name": "TheTask1337", "link": "https://stackoverflow.com/users/5892566/thetask1337"}, "reply_to_user": {"reputation": 790, "user_id": 4873159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Ygmek.png?s=128&g=1", "display_name": "Burgan", "link": "https://stackoverflow.com/users/4873159/burgan"}, "edited": false, "score": 0, "creation_date": 1456951380, "post_id": 35757525, "comment_id": 59188649, "body": "@FlashDrive well if the operation Delete has lower price defined by the user, then it is better to delete instead of inserting."}], "answers": [{"comments": [{"owner": {"reputation": 1386, "user_id": 6003081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5660dc35dd5e513e499f6bc08a56302f?s=128&d=identicon&r=PG&f=1", "display_name": "JeD", "link": "https://stackoverflow.com/users/6003081/jed"}, "reply_to_user": {"reputation": 329, "user_id": 5892566, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b77159dc0276ad75d626bb47b6d72f8c?s=128&d=identicon&r=PG&f=1", "display_name": "TheTask1337", "link": "https://stackoverflow.com/users/5892566/thetask1337"}, "edited": false, "score": 0, "creation_date": 1456952973, "post_id": 35757803, "comment_id": 59189601, "body": "@TheTask1337 no Problem ;)"}], "tags": [], "owner": {"reputation": 1386, "user_id": 6003081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5660dc35dd5e513e499f6bc08a56302f?s=128&d=identicon&r=PG&f=1", "display_name": "JeD", "link": "https://stackoverflow.com/users/6003081/jed"}, "is_accepted": true, "score": 2, "last_activity_date": 1456952495, "last_edit_date": 1456952495, "creation_date": 1456951991, "answer_id": 35757803, "question_id": 35757525, "link": "https://stackoverflow.com/questions/35757525/simple-recursive-plagiarism-detector-for-arrays/35757803#35757803", "title": "Simple recursive plagiarism detector for arrays", "body": "<p>What you describe is really similar to Levenshtein distance:</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Levenshtein_distance\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Levenshtein_distance</a></p>\n\n<p>You just want array entries instead of characters.</p>\n\n<p>You could simply find a levensthein algorithm and change it to suit your needs</p>\n\n<p><a href=\"https://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Levenshtein_distance#Python\" rel=\"nofollow\">https://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Levenshtein_distance#Python</a></p>\n\n<p>This algorithm might even work for arrays ;)</p>\n\n<p>EDIT: This works:</p>\n\n<pre><code>def levenshtein(s1, s2):\n    insertionCost=1\n    deletionCost=1\n    substitutionCost=1\n\n    if len(s1) &lt; len(s2):\n        return levenshtein(s2, s1)\n\n    # len(s1) &gt;= len(s2)\n    if len(s2) == 0:\n        return min(deletionCost,insertionCost)*len(s1)\n\n    previous_row = range(len(s2) + 1)\n    for i, c1 in enumerate(s1):\n        current_row = [i + 1]\n        for j, c2 in enumerate(s2):\n            insertions = previous_row[j + 1] + insertionCost # j+1 instead of j since previous_row and current_row are one character longer\n            deletions = current_row[j] + deletionCost       # than s2\n            substitutions = previous_row[j] + substitutionCost*(c1 != c2)\n            current_row.append(min(insertions, deletions, substitutions))\n        previous_row = current_row\n\n    return previous_row[-1]\n\n\n#returns 2\nprint(levenshtein(['abc','def','ghi'],['abc','ghi','e']))\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 5892566, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b77159dc0276ad75d626bb47b6d72f8c?s=128&d=identicon&r=PG&f=1", "display_name": "TheTask1337", "link": "https://stackoverflow.com/users/5892566/thetask1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 35757803, "answer_count": 1, "score": 0, "last_activity_date": 1456952495, "creation_date": 1456950879, "question_id": 35757525, "link": "https://stackoverflow.com/questions/35757525/simple-recursive-plagiarism-detector-for-arrays", "title": "Simple recursive plagiarism detector for arrays", "body": "<p>I was thinking about a very simple plagiarism detector. For the sake of simplicity, let's say you would have two lists in the beignning, each with some string elements, for example:</p>\n\n<pre><code>l1 = [ \"I\",\"like\",\"big\",\"yellow\",\"bananas\" ]\nl2 = [ \"I\",\"like\",\"yellow\",\"bananas\" ]\n</code></pre>\n\n<p>The user could also specify, how much each operation \"costs\", let's say:</p>\n\n<pre><code>DeletePrice = 10          #deleting word from one list\nInsertPrice = 1           #insterting a word to one list\nSubstitutePrice = 24      #substituing a word for another one\n</code></pre>\n\n<p>The task is to match the lists and the combined price has to be the lowest possible. There are two obvious ways to match those arrays, one would be to delete the word \"big\" from the first array ( which would cost 10 ) or to insert a word \"big\" to the second array ( which would cost 1 ). The answer for the algorithm would be thus 1.</p>\n\n<p>I was thinking that for the beginning we should find the elements, that do not match, by using list comprehention:</p>\n\n<pre><code>def Plagiarism( l1,l2,dPrice,iPrice,sPrice ):\n    not_matching_elements = [ [ x for x in l1 if x not in l2 ],[ x for x in l2 if x not in l1 ] ]\n</code></pre>\n\n<p>The\n  <code>not_matching_elements</code>\n list would give us \n    <code>[ [ big ],[] ]</code>\nand would probably help us to move along. But I can't figure out a way to further develop that algorithm. Thank you.</p>\n"}, {"tags": ["python", "theano", "pymc3"], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 1637894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf88687e01c21b5cd0fd0c7f5d5fe2c5?s=128&d=identicon&r=PG", "display_name": "sammosummo", "link": "https://stackoverflow.com/users/1637894/sammosummo"}, "edited": false, "score": 0, "creation_date": 1479490642, "post_id": 37364615, "comment_id": 68596286, "body": "What are <code>model0</code> and <code>model1</code> here? Likelihoods? Observed nodes?"}, {"owner": {"reputation": 385, "user_id": 1637894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf88687e01c21b5cd0fd0c7f5d5fe2c5?s=128&d=identicon&r=PG", "display_name": "sammosummo", "link": "https://stackoverflow.com/users/1637894/sammosummo"}, "edited": false, "score": 0, "creation_date": 1479493282, "post_id": 37364615, "comment_id": 68597724, "body": "Also I think <code>m = pm.switch(model_index, model0, model1)</code> should be <code>m = pm.switch(model_index, model1, model0)</code>. According to the docs <code>switch(cond, ift, iff)</code>, so if <code>model_index</code> is 1, <code>model1</code> is chosen."}, {"owner": {"reputation": 1890, "user_id": 815542, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c7f19fc100f2efcfe6414ae6f06050cb?s=128&d=identicon&r=PG", "display_name": "aloctavodia", "link": "https://stackoverflow.com/users/815542/aloctavodia"}, "reply_to_user": {"reputation": 385, "user_id": 1637894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf88687e01c21b5cd0fd0c7f5d5fe2c5?s=128&d=identicon&r=PG", "display_name": "sammosummo", "link": "https://stackoverflow.com/users/1637894/sammosummo"}, "edited": false, "score": 0, "creation_date": 1479820175, "post_id": 37364615, "comment_id": 68711124, "body": "You are right, I edit the answer to make the switch statement more explicit. <code>model0</code> and <code>model1</code> could be different thinks here, like two different priors or a linear and a quadratic model."}, {"owner": {"reputation": 385, "user_id": 1637894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf88687e01c21b5cd0fd0c7f5d5fe2c5?s=128&d=identicon&r=PG", "display_name": "sammosummo", "link": "https://stackoverflow.com/users/1637894/sammosummo"}, "edited": false, "score": 0, "creation_date": 1480123080, "post_id": 37364615, "comment_id": 68848265, "body": "Have you had any issues calculating BFs this way? From my (limited) experience, fitting identical models to various amounts of data so the correct BF = 1, I generally get woeful BF estimates even with up to a million samples."}, {"owner": {"reputation": 1890, "user_id": 815542, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c7f19fc100f2efcfe6414ae6f06050cb?s=128&d=identicon&r=PG", "display_name": "aloctavodia", "link": "https://stackoverflow.com/users/815542/aloctavodia"}, "reply_to_user": {"reputation": 385, "user_id": 1637894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf88687e01c21b5cd0fd0c7f5d5fe2c5?s=128&d=identicon&r=PG", "display_name": "sammosummo", "link": "https://stackoverflow.com/users/1637894/sammosummo"}, "edited": false, "score": 0, "creation_date": 1480124282, "post_id": 37364615, "comment_id": 68848458, "body": "I have only computed BF for simple models. I do not really like BF. I think using information criteria like WAIC is a better approach. Kruschke recommends using pseudopriors to compute BF, maybe you can try with that."}], "tags": [], "owner": {"reputation": 1890, "user_id": 815542, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c7f19fc100f2efcfe6414ae6f06050cb?s=128&d=identicon&r=PG", "display_name": "aloctavodia", "link": "https://stackoverflow.com/users/815542/aloctavodia"}, "is_accepted": true, "score": 2, "last_activity_date": 1479819916, "last_edit_date": 1479819916, "creation_date": 1463843429, "answer_id": 37364615, "question_id": 35757460, "link": "https://stackoverflow.com/questions/35757460/bayes-factors-in-pymc3/37364615#37364615", "title": "Bayes factors in pymc3", "body": "<p>You could try something like this:</p>\n\n<pre><code>with pm.Model() as model:\n    p = np.array([0.5, 0.5])\n    model_index = pm.Categorical('model_index', p=p)\n    model0 # define one model here\n    model1 # define the other model here\n    m = pm.switch(pm.math.eq(model_index, 0), model0, model1)\n    # pass M to a prior or likelihood, for example\n    y = pm.SomeDistribution('y', m, observed=data)\n\n    step0 = pm.ElemwiseCategorical(vars=[model_index], values=[0,1])\n    step1 = pm.NUTS()\n    trace = pm.sample(5000, step=[step0, step1], start=start)\n</code></pre>\n\n<p>Then you compute the Bayes factors as: (add burnin if necessary)</p>\n\n<pre><code>pm.traceplot(trace);\npM1 = trace['model_index'].mean()\npM0 = 1 - pM1\npM0, pM1, (pM0/pM1)*(p[1]/p[0])\n</code></pre>\n\n<p>You may also want to check how yo use Information Criteria to compare models, see an example <a href=\"https://github.com/pymc-devs/pymc3/blob/6bbb7911787fa664373e88ae9bd0def2e5b4f7ed/pymc3/examples/notebooks/Model%20Comparison.ipynb\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 385, "user_id": 1637894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf88687e01c21b5cd0fd0c7f5d5fe2c5?s=128&d=identicon&r=PG", "display_name": "sammosummo", "link": "https://stackoverflow.com/users/1637894/sammosummo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1497, "favorite_count": 0, "accepted_answer_id": 37364615, "answer_count": 1, "score": 3, "last_activity_date": 1479819916, "creation_date": 1456950604, "last_edit_date": 1456952446, "question_id": 35757460, "link": "https://stackoverflow.com/questions/35757460/bayes-factors-in-pymc3", "title": "Bayes factors in pymc3", "body": "<p>I'm interested in computing Bayes factors to compare two models in PyMC 3. According to <a href=\"http://stronginference.com/bayes-factors-pymc.html\" rel=\"nofollow\">this website</a>, in PyMC 2, the procedure seems relatively straightforward: include a Bernoulli random variable and a custom likelihood function, which returns the likelihood of the first model when the value of the Bernoulli variable is 0, and the likelihood of the second model when the value is 1. In PyMC 3, however, things get more complicated, because the stochastic nodes need to be Theano variables.</p>\n\n<p>My two likelihood functions are Binomials, so I guess I need to re-write this class:</p>\n\n<pre><code>class Binomial(Discrete):\n    R\"\"\"\n    Binomial log-likelihood.\n    The discrete probability distribution of the number of successes\n    in a sequence of n independent yes/no experiments, each of which\n    yields success with probability p.\n    .. math:: f(x \\mid n, p) = \\binom{n}{x} p^x (1-p)^{n-x}\n    ========  ==========================================\n    Support   :math:`x \\in \\{0, 1, \\ldots, n\\}`\n    Mean      :math:`n p`\n    Variance  :math:`n p (1 - p)`\n    ========  ==========================================\n    Parameters\n    ----------\n    n : int\n        Number of Bernoulli trials (n &gt;= 0).\n    p : float\n        Probability of success in each trial (0 &lt; p &lt; 1).\n    \"\"\"\n    def __init__(self, n, p, *args, **kwargs):\n        super(Binomial, self).__init__(*args, **kwargs)\n        self.n = n\n        self.p = p\n        self.mode = T.cast(T.round(n * p), self.dtype)\n\n    def random(self, point=None, size=None, repeat=None):\n        n, p = draw_values([self.n, self.p], point=point)\n        return generate_samples(stats.binom.rvs, n=n, p=p,\n                                dist_shape=self.shape,\n                                size=size)\n\n    def logp(self, value):\n        n = self.n\n        p = self.p\n\n        return bound(\n            binomln(n, value) + logpow(p, value) + logpow(1 - p, n - value),\n            0 &lt;= value, value &lt;= n,\n            0 &lt;= p, p &lt;= 1)\n</code></pre>\n\n<p>Any suggestions on where to start?</p>\n"}, {"tags": ["python", "regex", "file-io"], "comments": [{"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1456950770, "post_id": 35757408, "comment_id": 59188308, "body": "Don&#39;t just assume that it is a bug.  That is simply because each line has a new-line character at the end that you didn&#39;t account for."}, {"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "reply_to_user": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 1, "creation_date": 1456950822, "post_id": 35757408, "comment_id": 59188342, "body": "..which means due to me not accounting for the newline the program has a bug right? I didn&#39;t say the language specification has a flaw"}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1456950878, "post_id": 35757408, "comment_id": 59188377, "body": "I&#39;m sorry; I misunderstood."}], "answers": [{"comments": [{"owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "edited": false, "score": 0, "creation_date": 1456951119, "post_id": 35757458, "comment_id": 59188508, "body": "This fixed the problem. Great effort"}], "tags": [], "owner": {"reputation": 3151, "user_id": 5865420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AF0Nt.jpg?s=128&g=1", "display_name": "pp_", "link": "https://stackoverflow.com/users/5865420/pp"}, "is_accepted": true, "score": 3, "last_activity_date": 1456951168, "last_edit_date": 1456951168, "creation_date": 1456950601, "answer_id": 35757458, "question_id": 35757408, "link": "https://stackoverflow.com/questions/35757408/bug-resulting-from-reading-file/35757458#35757458", "title": "bug resulting from reading file", "body": "<pre><code>with open('keyWords.txt','r') as f: \n    for keyword in f:\n        regexPattern = keyword.strip() + \".*\";\n</code></pre>\n\n<p>Use <a href=\"https://docs.python.org/3/library/stdtypes.html#str.strip\" rel=\"nofollow\"><code>strip()</code></a> to remove any <a href=\"https://en.wikipedia.org/wiki/Newline\" rel=\"nofollow\">newline</a> characters from <code>keyword</code>. If you know for certain that there won't be any leading whitespace, <a href=\"https://docs.python.org/3/library/stdtypes.html#str.rstrip\" rel=\"nofollow\"><code>rstrip()</code></a> is sufficient.</p>\n"}], "owner": {"reputation": 2414, "user_id": 5339529, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/4ecd2b15539f40fea4bbb59864ad9fc0?s=128&d=identicon&r=PG&f=1", "display_name": "ForeverStudent", "link": "https://stackoverflow.com/users/5339529/foreverstudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 35757458, "answer_count": 1, "score": 1, "last_activity_date": 1456951168, "creation_date": 1456950449, "question_id": 35757408, "link": "https://stackoverflow.com/questions/35757408/bug-resulting-from-reading-file", "title": "bug resulting from reading file", "body": "<p>I am facing a rather elusive bug which seems to be caused by reading from a file. \nI have simplified my program to demonstrate the issue:</p>\n\n<p>consider this program that works fine:</p>\n\n<pre><code>import re\n\nsourceString=\"Yesterday I had a pizza for lunch it was tasty\\n\";\nsourceString+=\"today I am thinking about grabbing a burger and tomorrow it\\n\"; \nsourceString+=\"will probably be some fish if I am lucky\\n\\n\\n\";\nsourceString+=\"see you later!\"\n\njj=[\"pizza\",\"steak\",\"fish\"]\n\nfor keyword in jj:\n    regexPattern= keyword+\".*\";\n    patternObject=re.compile(regexPattern,re.MULTILINE);\n    match=patternObject.search(sourceString);\n    if match:\n        print(\"Match found for \"+keyword)\n        print(match.group()+\"\\n\")\n    else:\n        print(\"warning: no match found for :\"+ keyword+\"\\n\")\n</code></pre>\n\n<p>I am using a very straightforward regex pattern but I am getting the gist of the regex from my array <code>jj</code></p>\n\n<p>the script works as expected (matches patterns containing \"pizza\" and \"fish\" but does not match \"steak\")</p>\n\n<p>now In my actual program I am trying to read these keywords from a file (I don't want to hardcode in the source) </p>\n\n<p>so far I have this:</p>\n\n<pre><code>import re\n\nsourceString=\"Yesterday I had a pizza for lunch it was tasty\\n\";\nsourceString+=\"today I am thinking about grabbing a burger and tomorrow it\\n\"; \nsourceString+=\"will probably be some fish if I am lucky\\n\\n\\n\";\nsourceString+=\"see you later!\"\n\nwith open('keyWords.txt','r') as f: \n    for keyword in f:\n        regexPattern= keyword+\".*\";\n        patternObject=re.compile(regexPattern,re.MULTILINE);\n        match=patternObject.search(sourceString);\n        if match:\n            print(\"Match found for \"+keyword)\n            print(match.group())\n        else:\n            print(\"warning: no match found for :\"+ keyword)\n</code></pre>\n\n<p>where keyWords.txt will contain the following:</p>\n\n<pre><code>pizza\nsteak\nfish\n</code></pre>\n\n<p>but this breaks the code because somehow only the LAST keyword in the file will successfully match (if a match exists). </p>\n\n<p>What gives?</p>\n"}, {"tags": ["python", "spell-checking", "pyenchant"], "answers": [{"comments": [{"owner": {"reputation": 3888, "user_id": 1789574, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/44aa4e39e0a107e8fa5490e598a1385a?s=128&d=identicon&r=PG", "display_name": "Prog1020", "link": "https://stackoverflow.com/users/1789574/prog1020"}, "edited": false, "score": 2, "creation_date": 1456955416, "post_id": 35757817, "comment_id": 59191001, "body": "I need to copy to <code>~&#47;.enchant&#47;myspell</code>. It is helpful."}], "tags": [], "owner": {"reputation": 2406, "user_id": 4089859, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fad1d93d6c12fcf85e212af3eab0de99?s=128&d=identicon&r=PG&f=1", "display_name": "user 12321", "link": "https://stackoverflow.com/users/4089859/user-12321"}, "is_accepted": true, "score": 11, "last_activity_date": 1456952042, "creation_date": 1456952042, "answer_id": 35757817, "question_id": 35757407, "link": "https://stackoverflow.com/questions/35757407/how-to-add-dictionary-to-pyenchant/35757817#35757817", "title": "How to add dictionary to PyEnchant?", "body": "<p>You can check that you have a language  available, from a Python prompt type:</p>\n\n<pre><code>import enchant\nprint enchant.list_languages()\n</code></pre>\n\n<p>Then you need to import it, lets assume german is the one I am looking for. Then, from terminal I type:</p>\n\n<pre><code>sudo apt-get install myspell-de-de\n</code></pre>\n\n<p>To check it works, from a Python prompt type:</p>\n\n<pre><code>import enchant\nd = enchant.Dict('de_DE')\nd.check(\"Hello\") # False\nd.check(\"Guten\") # True\n</code></pre>\n\n<p>For a fuller list of dictionaries see:</p>\n\n<p><a href=\"http://packages.ubuntu.com/precise/myspell-dictionary\" rel=\"noreferrer\">http://packages.ubuntu.com/precise/myspell-dictionary</a></p>\n\n<p><a href=\"http://packages.ubuntu.com/precise/aspell-dictionary\" rel=\"noreferrer\">http://packages.ubuntu.com/precise/aspell-dictionary</a></p>\n\n<p><a href=\"http://packages.ubuntu.com/source/precise/openoffice.org-dictionaries\" rel=\"noreferrer\">http://packages.ubuntu.com/source/precise/openoffice.org-dictionaries</a></p>\n\n<p><a href=\"http://packages.ubuntu.com/precise/ispell-dictionary\" rel=\"noreferrer\">http://packages.ubuntu.com/precise/ispell-dictionary</a></p>\n"}], "owner": {"reputation": 3888, "user_id": 1789574, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/44aa4e39e0a107e8fa5490e598a1385a?s=128&d=identicon&r=PG", "display_name": "Prog1020", "link": "https://stackoverflow.com/users/1789574/prog1020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8620, "favorite_count": 1, "accepted_answer_id": 35757817, "answer_count": 1, "score": 5, "last_activity_date": 1456952248, "creation_date": 1456950444, "last_edit_date": 1456952248, "question_id": 35757407, "link": "https://stackoverflow.com/questions/35757407/how-to-add-dictionary-to-pyenchant", "title": "How to add dictionary to PyEnchant?", "body": "<p>I got <a href=\"https://pypi.python.org/pypi/pyenchant/\" rel=\"noreferrer\">PyEnchant</a> with files for many languages: <code>en_US, en_AU, de_DE, fr_FR</code>. Now I call list of dictionaries and see only small set: <code>'en', 'en_US', 'en_GB', 'en_CA'</code>.\nI call:</p>\n\n<pre><code>items = enchant._broker.list_languages()\n</code></pre>\n\n<p>How to load into Enchant other langs? New files? So <code>enchant.Dict()</code> can take it.</p>\n"}, {"tags": ["python", "zipfile", "shutil", "stringio"], "comments": [{"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 1, "creation_date": 1456950480, "post_id": 35757370, "comment_id": 59188159, "body": "Note you should probably be using <code>open</code> with <code>wb</code> considering ZIP files are a binary format."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1456952081, "post_id": 35757370, "comment_id": 59189058, "body": "Is this python 2 or 3?"}], "answers": [{"comments": [{"owner": {"reputation": 8194, "user_id": 2939522, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bd19d576c9c16df4826f16f9503c03d?s=128&d=identicon&r=PG&f=1", "display_name": "duxfox--", "link": "https://stackoverflow.com/users/2939522/duxfox"}, "edited": false, "score": 0, "creation_date": 1456954132, "post_id": 35758133, "comment_id": 59190282, "body": "you&#39;re the man! I didn&#39;t close the zip file that&#39;s why it didn&#39;t work. thanks a lot"}], "tags": [], "owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "is_accepted": true, "score": 2, "last_activity_date": 1456953080, "creation_date": 1456953080, "answer_id": 35758133, "question_id": 35757370, "link": "https://stackoverflow.com/questions/35757370/writing-stringio-back-to-disk-in-python/35758133#35758133", "title": "writing StringIO back to disk in python", "body": "<p>You need to open the final file \"wb\" as suggested by @Kupiakos otherwise you will end up with a corrupted archive. Your other problem is that you need to close the zipfile before using the <code>StringIO</code> buffer. The close writes the file catalog to the zipfile. Without that, an unzipper may make assumptions such as this being only one of a multipart zip and do odd things. Nominally, just add <code>outfile.close()</code> or put it in a context manager</p>\n\n<pre><code>inMemoryZip = StringIO()\nwith zipfile.ZipFile(inMemoryZip, 'w', compression=zipfile.ZIP_DEFLATED) as output:\n    //outfile.write(stuff)\ninMemoryZip.seek(0)\nreturn inMemoryZip\n</code></pre>\n\n<p>then later</p>\n\n<pre><code>with open('pathToNewZip.zip', 'wb') as archive:\n  archive.write(inMemoryZip.getvalue())\n</code></pre>\n"}], "owner": {"reputation": 8194, "user_id": 2939522, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bd19d576c9c16df4826f16f9503c03d?s=128&d=identicon&r=PG&f=1", "display_name": "duxfox--", "link": "https://stackoverflow.com/users/2939522/duxfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2650, "favorite_count": 0, "accepted_answer_id": 35758133, "answer_count": 1, "score": -1, "last_activity_date": 1456953080, "creation_date": 1456950304, "last_edit_date": 1495540229, "question_id": 35757370, "link": "https://stackoverflow.com/questions/35757370/writing-stringio-back-to-disk-in-python", "title": "writing StringIO back to disk in python", "body": "<p>I created an in-memory zip file using <code>StringIO</code> and <code>zipfile</code>:</p>\n\n<pre><code>inMemoryZip = StringIO()\noutfile = zipfile.ZipFile(inMemoryZip, 'w', compression=zipfile.ZIP_DEFLATED)\n//outfile.write(stuff)\ninMemoryZip.seek(0)\nreturn inMemoryZip\n</code></pre>\n\n<p>This data is uploaded to a server/database. At some point, it's retrieved and I need to write it to disk as a zip file. I'm not sure how to do this. I tried the following:</p>\n\n<pre><code>with open('pathToNewZip.zip', 'w') as archive:\n  archive.write(inMemoryZip.getvalue())\n</code></pre>\n\n<p>This creates the zip file archive, but when I double click it, I can't see its contents, it basically creates a duplicate of itself (another identical .zip file, <strong><em>but the extension is .zip.cpgz</em></strong>) next to the original</p>\n\n<p>I also tried:</p>\n\n<pre><code>with open('pathToNewZip.zip', 'w') as archive:\n      shutil.copyfileobj(inMemoryZip, archive)\n</code></pre>\n\n<p>but its the same result as above.</p>\n\n<p>I guess part of the problem is I don't know how to parse this data. The <code>inMemoryZip</code> (which is an instance of <code>StringIO</code>) could have multiple files in it. </p>\n\n<p>Is each file written as a new row? </p>\n\n<p>What does <code>.getvalue()</code> return? The data for all the files in the <code>StringIO</code> instance?</p>\n\n<p>How do I determine the names of the files I zipped up previously so they can be re-created with the same name?</p>\n\n<p>There's this: <a href=\"https://stackoverflow.com/questions/6299724/how-can-i-pass-a-python-stringio-object-to-a-zipfile-or-is-it-not-supported\">How can I pass a Python StringIO() object to a ZipFile(), or is it not supported?</a> but it looks like that works if theres only 1 file being written at a time. my <code>StringIO</code> instance can have 1 file or 10 files.</p>\n"}, {"tags": ["python", "api", "twitter", "oauth"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1456951812, "post_id": 35757361, "comment_id": 59188889, "body": "Can you post the <code>hidden</code> module?  Of course feel free to leave out the actual passwords etc."}, {"owner": {"reputation": 93, "user_id": 2380332, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42ba1e8a2196ddf0d5bc7e408837963d?s=128&d=identicon&r=PG", "display_name": "jason", "link": "https://stackoverflow.com/users/2380332/jason"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1456954087, "post_id": 35757361, "comment_id": 59190255, "body": "Sure, original post edited"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1456954253, "post_id": 35757361, "comment_id": 59190347, "body": "I don&#39;t see anything named <code>oauth</code> in the <code>hidden</code> module.  Therefore, <code>hidden.oauth</code> is causing an error."}, {"owner": {"reputation": 93, "user_id": 2380332, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42ba1e8a2196ddf0d5bc7e408837963d?s=128&d=identicon&r=PG", "display_name": "jason", "link": "https://stackoverflow.com/users/2380332/jason"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1456954603, "post_id": 35757361, "comment_id": 59190534, "body": "I edited hidden to import oauth and now I receive <code>TypeError: &#39;module&#39; object is not callable</code> in reference to hidden.oauth. Or are the keys/tokens to be in a function <code>def oauth():</code>?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1456954778, "post_id": 35757361, "comment_id": 59190638, "body": "Why does hidden even need to import oauth?  As far as I can see, hidden just declares some strings with values; it doesn&#39;t need to import anything."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1456954876, "post_id": 35757361, "comment_id": 59190701, "body": "Instead of declaring secrets, can you just use the items directly from the hidden module?  i.e. instead of <code>secrets[&#39;consumer_key&#39;]</code>, use <code>hidden.consumer_key</code>."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1456954914, "post_id": 35757361, "comment_id": 59190723, "body": "In any case, there&#39;s no way the original code worked if it looked like this.  You&#39;re missing something, or the lecture code was broken to begin with."}, {"owner": {"reputation": 93, "user_id": 2380332, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42ba1e8a2196ddf0d5bc7e408837963d?s=128&d=identicon&r=PG", "display_name": "jason", "link": "https://stackoverflow.com/users/2380332/jason"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1456955289, "post_id": 35757361, "comment_id": 59190934, "body": "I was under the assumption hidden.oauth() was calling on the oauth module. If I run the twtest code with your suggestion &#39;hidden.consumer_key&#39; ,etc. I recieve <code>NameError: global name &#39;oauth&#39; is not defined</code>. I will have to review the lecture again."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8425875, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/153f9261299eedb47bd83afc3e4fc037?s=128&d=identicon&r=PG", "display_name": "PAncho", "link": "https://stackoverflow.com/users/8425875/pancho"}, "is_accepted": false, "score": 0, "last_activity_date": 1502052528, "last_edit_date": 1502052528, "creation_date": 1502051264, "answer_id": 45536295, "question_id": 35757361, "link": "https://stackoverflow.com/questions/35757361/python-oauth-to-access-twitter-no-module-oauth/45536295#45536295", "title": "Python oauth() to access twitter, &quot;No Module oauth&quot;", "body": "<p>I just came through the same problem (referring to hte twurl.py script from the Dr Chuck courses on python).</p>\n\n<p>Everything worked fine when I put all the python scripts in the same folder as twurl.py (ad particularly oauth.py).</p>\n\n<p>My understanding is that the twurl.py script required another script (oauth.py), and that installing new libraries (like oauth through pip installer) was not doing any changes.</p>\n"}, {"tags": [], "owner": {"reputation": 1946, "user_id": 8828524, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z001KmBq-2Y/AAAAAAAAAAI/AAAAAAAAIlU/paK7lD3iHuw/photo.jpg?sz=128", "display_name": "virtualdvid", "link": "https://stackoverflow.com/users/8828524/virtualdvid"}, "is_accepted": false, "score": 0, "last_activity_date": 1511376664, "creation_date": 1511376664, "answer_id": 47441947, "question_id": 35757361, "link": "https://stackoverflow.com/questions/35757361/python-oauth-to-access-twitter-no-module-oauth/47441947#47441947", "title": "Python oauth() to access twitter, &quot;No Module oauth&quot;", "body": "<p>I had the same problem. I find the solution in the book <a href=\"http://do1.dr-chuck.com/pythonlearn/EN_us/pythonlearn.pdf\" rel=\"nofollow noreferrer\">*Python for Everybody</a> page 167.</p>\n\n<blockquote>\n  <p>For this next sample program we will download the files twurl.py,\n  hidden.py, oauth.py, and twitter1.py from <a href=\"http://www.py4e.com/code\" rel=\"nofollow noreferrer\">www.py4e.com/code</a> and\n  put them all in a folder on your computer.</p>\n</blockquote>\n"}], "owner": {"reputation": 93, "user_id": 2380332, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42ba1e8a2196ddf0d5bc7e408837963d?s=128&d=identicon&r=PG", "display_name": "jason", "link": "https://stackoverflow.com/users/2380332/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 824, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1511376664, "creation_date": 1456950271, "last_edit_date": 1456954211, "question_id": 35757361, "link": "https://stackoverflow.com/questions/35757361/python-oauth-to-access-twitter-no-module-oauth", "title": "Python oauth() to access twitter, &quot;No Module oauth&quot;", "body": "<p>I am trying to test oauth to access twitter using code from a course. I have a python script called twurl.py that holds this code (hidden holds the keys/tokens):</p>\n\n<pre><code>import urllib\nimport oauth\nimport hidden\n\ndef augment(url, parameters) :\nsecrets = hidden.oauth()\nconsumer = oauth.OAuthConsumer(secrets['consumer_key'], secrets['consumer_secret'])\ntoken = oauth.OAuthToken(secrets['token_key'],secrets['token_secret'])\n\noauth_request = oauth.OAuthRequest.from_consumer_and_token(consumer, \n    token=token, http_method='GET', http_url=url, parameters=parameters)\noauth_request.sign_request(oauth.OAuthSignatureMethod_HMAC_SHA1(), consumer, token)\nreturn oauth_request.to_url()\n</code></pre>\n\n<p>I am calling on the augment function in another script twtest.py:</p>\n\n<pre><code>import urllib\nfrom twurl import augment \n\nurl = augment('https://api.twitter.com/1.1/statuses/user_timeline.json',\n{'screen_name': 'user', 'count': '2'} )\nprint url\nconnection = urllib.urlopen(url)\ndata = connection.read()\nprint data\nheaders = connection.info().dict\nprint headers\n</code></pre>\n\n<p>I am running into this error:</p>\n\n<pre><code>Traceback (most recent call last):\n File \"/Users/user/Desktop/python/twtest.py\", line 7, in &lt;module&gt;\n{'screen_name': 'user', 'count': '2'} )\nFile \"/Users/user/Desktop/Python/twurl.py\", line 6, in augment\nsecrets = hidden.oauth()\nAttributeError: 'module' object has no attribute 'oauth'\n</code></pre>\n\n<p>This code works in an online lecture I am using to learn. Oauth was pip installed by me and I can call the dir(oauth). </p>\n\n<p>What am I missing, why is oauth  not being imported along with the twurl script? Even if I import oauth in twtest.py the same error occurs. \nThanks!</p>\n\n<p>EDIT:</p>\n\n<p>Hidden module is a list of called variables:</p>\n\n<pre><code> consumer_key = 'string'\n consumer_secret = 'string'\n token_key = 'string'\n token_secret = 'string'\n</code></pre>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 136, "user_id": 2720572, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/Kqjjj.jpg?s=128&g=1", "display_name": "Srekk", "link": "https://stackoverflow.com/users/2720572/srekk"}, "edited": false, "score": 0, "creation_date": 1456952005, "post_id": 35757351, "comment_id": 59189003, "body": "Probably sometimes you need to mouse over it and then go ahead and click it. You know sometimes objects are not directly enabled, until mouse is hoovered on it."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6009759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1126287757f7151b2fef076b2cc4788?s=128&d=identicon&r=PG&f=1", "display_name": "DanPost", "link": "https://stackoverflow.com/users/6009759/danpost"}, "edited": false, "score": 0, "creation_date": 1457043561, "post_id": 35757437, "comment_id": 59239787, "body": "This helped a lot.  Thank you for the response.  This path got me to the point of realizing it won&#39;t work.  HOWEVER, the core ideas were very useful in actually solving the issue.  The code I ended up using was:  chrome.find_element_by_xpath(&quot;//tr[td[@title=&#39;&quot; + name + &quot;&#39;]]/td[1]/div&quot;).click()"}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 1, "last_activity_date": 1456950520, "creation_date": 1456950520, "answer_id": 35757437, "question_id": 35757351, "link": "https://stackoverflow.com/questions/35757351/how-to-select-a-checkbox-in-a-table-depending-on-the-row-value/35757437#35757437", "title": "how to select a checkbox in a table depending on the row value?", "body": "<p>You not using <code>contains()</code> correctly. Replace:</p>\n\n<pre><code>//tr[td[contains(text()='\" + name + \"')]]/td[1]\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>//tr[td[contains(text(), '\" + name + \"')]]/td[1]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6009759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1126287757f7151b2fef076b2cc4788?s=128&d=identicon&r=PG&f=1", "display_name": "DanPost", "link": "https://stackoverflow.com/users/6009759/danpost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 35757437, "answer_count": 1, "score": 0, "last_activity_date": 1456950520, "creation_date": 1456950223, "question_id": 35757351, "link": "https://stackoverflow.com/questions/35757351/how-to-select-a-checkbox-in-a-table-depending-on-the-row-value", "title": "how to select a checkbox in a table depending on the row value?", "body": "<p>I'm working with to automate a GWT app.  There is a table with the following columns: checkbox, userID, Username, Fname, LName, Email.</p>\n\n<p>Here's the code for a single row in the table:\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    </p>\n\n<pre><code>&lt;/div&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;/div&gt;\n&lt;/td&gt;\n&lt;td class=\"GB1F3LJFQ GB1F3LJKO\" title=\"8902\" align=\"right\" style=\"height: 19px; width: 34px;\"&gt;\n&lt;div style=\"height: 19px; width: 34px;\"&gt;\n&lt;div class=\"gwt-HTML\"&gt;8902&lt;/div&gt;\n&lt;/div&gt;\n&lt;/td&gt;\n&lt;td class=\"GB1F3LJFQ GB1F3LJKO\" title=\"Agency_Group_0_Agency_Group_Member_0_dan_all_features_6\" align=\"left\" style=\"height: 19px; width: 146px;\"&gt;\n&lt;div style=\"height: 19px; width: 146px;\"&gt;\n&lt;div class=\"gwt-HTML\"&gt;Agency_Group_0_Agency_Group_Member_0_dan_all_features_6&lt;/div&gt;\n&lt;/div&gt;\n&lt;/td&gt;\n&lt;td class=\"GB1F3LJFQ GB1F3LJKO\" title=\"\" align=\"left\" style=\"height: 19px; width: 63px;\"&gt;\n&lt;div style=\"height: 19px; width: 63px;\"&gt;\n&lt;div class=\"gwt-HTML\"&gt;\n\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/td&gt;\n&lt;td class=\"GB1F3LJFQ GB1F3LJKO\" title=\"\" align=\"left\" style=\"height: 19px; width: 28px;\"&gt;\n&lt;div style=\"height: 19px; width: 28px;\"&gt;\n&lt;div class=\"gwt-HTML\"&gt;\n\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/td&gt;\n&lt;td class=\"GB1F3LJFQ GB1F3LJKO\" title=\"Agency_Group_0_Agency_Group_Member_0_dan_all_features_6@xxx.com\" align=\"left\" style=\"height: 19px; width: 146px;\"&gt;\n&lt;div style=\"height: 19px; width: 146px;\"&gt;\n&lt;div class=\"gwt-HTML\"&gt;Agency_Group_0_Agency_Group_Member_0_dan_all_features_6@xxx.com&lt;/div&gt;\n&lt;/div&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>The xpath to the checkbox is:\n/html/body/div[6]/div/table/tbody/tr[2]/td[2]/div/div/div/div/table/tbody/tr[2]/td/div/div/div/div[1]/div/table[10]/tbody/tr/td[1]</p>\n\n<p>The xpath to the username column is:\n/html/body/div[6]/div/table/tbody/tr[2]/td[2]/div/div/div/div/table/tbody/tr[2]/td/div/div/div/div[1]/div/table[10]/tbody/tr/td[3]</p>\n\n<p>My code loops through a list of names and it is supposed to click the checkbox associated with that name:\nfor name in memberlist:\n        print 'clicking checkbox associated with %s' %name\n        chrome.find_element_by_xpath(\"//tr[td[contains(text()='\" + name + \"')]]/td[1]\").click()</p>\n\n<p>The error I'm getting is:\nselenium.common.exceptions.InvalidSelectorException: Message: invalid selector: Unable to locate an element with the xpath expression //tr[td[contains(text()='Agency_Group_0_Agency_Group_Member_0_dan_all_features_6')]]/td[1] because of the following error:\nSyntaxError: Failed to execute 'evaluate' on 'Document': The string '//tr[td[contains(text()='Agency_Group_0_Agency_Group_Member_0_dan_all_features_6')]]/td[1]' is not a valid XPath expression.\n  (Session info: chrome=48.0.2564.116)</p>\n\n<p>My question is:\nHow do I click the checkbox associated with the name?</p>\n"}, {"tags": ["python", "if-statement", "plot"], "comments": [{"owner": {"reputation": 3891, "user_id": 2326911, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/173ece6e1a474bf45d2dee00f651b543?s=128&d=identicon&r=PG&f=1", "display_name": "\u1d00\u0280\u1d0d\u1d00\u0274", "link": "https://stackoverflow.com/users/2326911/%e1%b4%80%ca%80%e1%b4%8d%e1%b4%80%c9%b4"}, "edited": false, "score": 0, "creation_date": 1456950307, "post_id": 35757337, "comment_id": 59188053, "body": "what you mean by put <code>is</code>?"}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1456950677, "post_id": 35757337, "comment_id": 59188262, "body": "Can <code>wspd_err &lt; 0</code> ever be true?"}], "answers": [{"comments": [{"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 0, "creation_date": 1456950528, "post_id": 35757373, "comment_id": 59188190, "body": "Could also do <code>if not hub_wspd_error: plot(hub_wspd)</code>."}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1456950644, "post_id": 35757373, "comment_id": 59188247, "body": "The implication on the question seems to be <code>if hub_wspd_error &lt; 0</code> then the whole processing should be skipped. Unless the value can never be negative, it should be tested."}], "tags": [], "owner": {"reputation": 3151, "user_id": 5865420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AF0Nt.jpg?s=128&g=1", "display_name": "pp_", "link": "https://stackoverflow.com/users/5865420/pp"}, "is_accepted": false, "score": 0, "last_activity_date": 1456950318, "creation_date": 1456950318, "answer_id": 35757373, "question_id": 35757337, "link": "https://stackoverflow.com/questions/35757337/if-statements-and-plotting-python/35757373#35757373", "title": "IF Statements and plotting python", "body": "<pre><code>if hub_wspd_error == 0:\n    plot(hub_wspd)\nelif hub_wspd_error &gt; 0:\n    pass\n</code></pre>\n\n<p>Note that the <code>elif</code> is not necessary.</p>\n"}], "owner": {"reputation": 605, "user_id": 5586573, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c4897b980cc6afbe084725998f2ce74e?s=128&d=identicon&r=PG&f=1", "display_name": "HM14", "link": "https://stackoverflow.com/users/5586573/hm14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456950318, "creation_date": 1456950189, "last_edit_date": 1456950272, "question_id": 35757337, "link": "https://stackoverflow.com/questions/35757337/if-statements-and-plotting-python", "title": "IF Statements and plotting python", "body": "<p>I have a variable named hub_wspd and one named hub_wspd_error and so I want to say <code>if hub_wspd_error is == 0</code>, then <code>plot(hub_wspd)</code>, <code>if hub_wspd_error is &gt; 0</code> then don't <code>plot(hub_wspd)</code>. How do I do this?</p>\n"}, {"tags": ["python", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 235, "user_id": 5636160, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/1f3eb1d185b5e8dfd0a99c4d8ebffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "J leong", "link": "https://stackoverflow.com/users/5636160/j-leong"}, "edited": false, "score": 0, "creation_date": 1456950836, "post_id": 35757419, "comment_id": 59188356, "body": "what about the text cursor? I tried this and the cursor is still black and I think it is because it is not a mouse pointer but the text cursor.  When the mouse is over the text widget, the mouse is still black."}, {"owner": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "reply_to_user": {"reputation": 235, "user_id": 5636160, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/1f3eb1d185b5e8dfd0a99c4d8ebffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "J leong", "link": "https://stackoverflow.com/users/5636160/j-leong"}, "edited": false, "score": 0, "creation_date": 1456951416, "post_id": 35757419, "comment_id": 59188669, "body": "@Jleong that better? make sure the cursor you&#39;re changing it to supports multiple colors (boat is a good guess to test that)"}, {"owner": {"reputation": 235, "user_id": 5636160, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/1f3eb1d185b5e8dfd0a99c4d8ebffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "J leong", "link": "https://stackoverflow.com/users/5636160/j-leong"}, "edited": false, "score": 0, "creation_date": 1456953219, "post_id": 35757419, "comment_id": 59189743, "body": "thanks! it worked perfectly!  just a quick question, how would you change it to the default cursor?"}, {"owner": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "reply_to_user": {"reputation": 235, "user_id": 5636160, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/1f3eb1d185b5e8dfd0a99c4d8ebffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "J leong", "link": "https://stackoverflow.com/users/5636160/j-leong"}, "edited": false, "score": 0, "creation_date": 1456954060, "post_id": 35757419, "comment_id": 59190239, "body": "No problem (you&#39;re able to &quot;accept&quot; an answer if you&#39;d like to, though you&#39;re entitled not to or to hold off for other answers). The link in the answer covers most of the available cursors; &quot;xterm&quot; is the default for my text widget, &#39;left_ptr&#39; looks like my default on root. Don&#39;t know if those have avaliable alternate colors. You can use widget.config(&#39;cursor&#39;) to get the current settings for the cursor if you want to apply it later,though this may be empty if its not set. For text it should say &#39;xterm&#39;"}], "tags": [], "owner": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "is_accepted": false, "score": 5, "last_activity_date": 1456951264, "last_edit_date": 1495542240, "creation_date": 1456950472, "answer_id": 35757419, "question_id": 35757296, "link": "https://stackoverflow.com/questions/35757296/how-to-change-the-mouse-pointer-color-tkinter/35757419#35757419", "title": "how to change the mouse pointer color tkinter?", "body": "<p>You can change the cursor using the <a href=\"http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/cursors.html\" rel=\"nofollow noreferrer\">cursor option on the root window</a>. To change the color, e.g.,</p>\n\n<pre><code>root = tk.Tk()\nroot.config(cursor='clock red red')\n</code></pre>\n\n<p>Some symbols and colors work for me, some don't, on linux, although the option should be operating system agnostic. For example, 'clock' and 'gumby' work, 'pirate' does not (but fails quietly, without throwing an error).</p>\n\n<p>Ironically, boat is supported on my machine, but pirates are not. Probably a good call not to support both</p>\n\n<p><strong>In response to comment</strong></p>\n\n<p>Sometimes you need to call this on sub-widgets, if their default behaviour is to overwrite it. For example</p>\n\n<pre><code>root = tk.Tk()\nroot.config(cursor='gumby red red')\ntext=tk.Text(root)\ntext.pack()\n# oh no cursor is boring again! That makes sense, the default\n# text cursor is slightly different than the root cursor\ntext.config(cursor='boat blue blue') # phew!\n</code></pre>\n\n<p>Note that if instead you wanted to change the insertion cursor, <a href=\"https://stackoverflow.com/questions/14284492/how-to-change-text-cursor-color-in-tkinter\">see here</a>, but tldr <code>insertbackground</code>. Note that you may be using a cursor that doesn't support changing colors, in which case try a different cursor</p>\n"}], "owner": {"reputation": 235, "user_id": 5636160, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/1f3eb1d185b5e8dfd0a99c4d8ebffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "J leong", "link": "https://stackoverflow.com/users/5636160/j-leong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3988, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1456951264, "creation_date": 1456950014, "question_id": 35757296, "link": "https://stackoverflow.com/questions/35757296/how-to-change-the-mouse-pointer-color-tkinter", "title": "how to change the mouse pointer color tkinter?", "body": "<p>is there a way to change the mouse color in Tkinter? I have a dark background and the mouse never shows over the Tkinter window.</p>\n"}]