[{"tags": ["python"], "comments": [{"owner": {"reputation": 250, "user_id": 10687053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FapdS.jpg?s=128&g=1", "display_name": "CatM", "link": "https://stackoverflow.com/users/10687053/catm"}, "edited": false, "score": 0, "creation_date": 1566432564, "post_id": 57600502, "comment_id": 101658218, "body": "If values is part of the dataframe, this may help: <a href=\"https://stackoverflow.com/questions/45155063/how-to-multiply-two-columns-of-a-pandas-data-frame-row-multiplication-and-stor\" title=\"how to multiply two columns of a pandas data frame row multiplication and stor\">stackoverflow.com/questions/45155063/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "is_accepted": false, "score": 1, "last_activity_date": 1566433395, "creation_date": 1566433395, "answer_id": 57600616, "question_id": 57600502, "link": "https://stackoverflow.com/questions/57600502/multyply-all-values-in-dataframe-by-a-column/57600616#57600616", "title": "multyply all values in dataframe by a column", "body": "<p>Try:</p>\n\n<pre><code>df.iloc[:,0:4] = df.iloc[:,0:4].multiply(df.iloc[:,4].values, axis=0)\n</code></pre>\n\n<p>example:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame(np.arange(12).reshape(3,4), columns=list('abcd'))\nprint(df)\n\ndf.iloc[:,0:3] = df.iloc[:,0:3].multiply(df.iloc[:,3].values, axis=0)\n\nprint(df)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>   a  b   c   d\n0  0  1   2   3\n1  4  5   6   7\n2  8  9  10  11\n\n\n    a   b    c   d\n0   0   3    6   3\n1  28  35   42   7\n2  88  99  110  11\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 11869856, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AwhElGcZ5Q0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd2sjdpVX1bepn8s0_xNpdsAXxZGw/photo.jpg?sz=128", "display_name": "Pedro Jesus", "link": "https://stackoverflow.com/users/11869856/pedro-jesus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566433395, "creation_date": 1566431917, "question_id": 57600502, "link": "https://stackoverflow.com/questions/57600502/multyply-all-values-in-dataframe-by-a-column", "title": "multyply all values in dataframe by a column", "body": "<p>I have the following dataframe df, </p>\n\n<pre><code>item 1   item 2   item3   item4  values\n  1        0        1      1       10\n  0        1        0      1       22\n  ...\n</code></pre>\n\n<p>How can get, </p>\n\n<pre><code>item1   item2   item3    item4   \n  10      0       10       10\n  0       22       0        22\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-3.x", "tkinter"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 3, "creation_date": 1566432604, "post_id": 57600494, "comment_id": 101658227, "body": "buttons can&#39;t get value returned by executed function so your <code>return name_list</code> in  <code>processButton</code> is useless. Better create <code>self.name_list</code> in <code>__init__</code> and append to this list. The same problem is in other functions executed by other button and checkbutton."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11890447"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1566492599, "post_id": 57600494, "comment_id": 101682837, "body": "@furas I put the traceback error."}, {"owner": {"reputation": 189, "user_id": 8088688, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/660485827479032/picture?type=large", "display_name": "Anton van der Wel", "link": "https://stackoverflow.com/users/8088688/anton-van-der-wel"}, "edited": false, "score": 0, "creation_date": 1566493247, "post_id": 57600494, "comment_id": 101683118, "body": "could you explain a bit more about what you are trying to achieve? In your function called processButton you have the following line: <code>name_list[]</code> which would clean your list each time you run the function"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11890447"}, "edited": false, "score": 0, "creation_date": 1566514302, "post_id": 57614426, "comment_id": 101690542, "body": "You have helped me so much thanks you, do you have a source where you learned how to do that, because I did it the long and wrote an even longer code with more queries as I call them such as First Name, Middle Initial, and Last Name, and Major and so on,  I am using this code as excel file builder where the GUI collects the data."}, {"owner": {"reputation": 189, "user_id": 8088688, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/660485827479032/picture?type=large", "display_name": "Anton van der Wel", "link": "https://stackoverflow.com/users/8088688/anton-van-der-wel"}, "edited": false, "score": 0, "creation_date": 1566514944, "post_id": 57614426, "comment_id": 101690678, "body": "<a href=\"https://www.w3schools.com/python/\" rel=\"nofollow noreferrer\">w3schools.com/python</a> is a good place to learn python. If you have any other questions you cant find the answer to just ask again here on StackOverflow, and if you ask another question, just send me a message so I can hopefully help you again!"}], "tags": [], "owner": {"reputation": 189, "user_id": 8088688, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/660485827479032/picture?type=large", "display_name": "Anton van der Wel", "link": "https://stackoverflow.com/users/8088688/anton-van-der-wel"}, "is_accepted": true, "score": 0, "last_activity_date": 1566495110, "creation_date": 1566495110, "answer_id": 57614426, "question_id": 57600494, "link": "https://stackoverflow.com/questions/57600494/python-destruction-of-tkinter-gui-and-loop/57614426#57614426", "title": "Python Destruction of Tkinter GUI, and loop", "body": "<p>When I tried to run the code I did not encounter any errors but I also noticed that the app was not really working. I rewrote your code a bit to make your app function the way I think you intended it. I tried to keep all the variable names the same, so you can see what I did to them.</p>\n\n<pre><code>from tkinter import *\n\nglobal name_list\nname_list = []\n\nclass Name(Frame):\n    def __init__(self, master=None):\n        super().__init__(master)\n        self.master = master\n        self.create_window()\n\n    def create_window(self):\n        label = Label(self.master, text=\"Enter a name: \")\n        self.entryname = Entry(self.master)\n        btGetName = Button(self.master, text='Get Name', command=self.processButton)\n        btFinished = Button(self.master, text='Finished', command=self.master.destroy)\n        label.grid(row=1, column=2)\n        btGetName.grid(row=1, column=3)\n        btFinished.grid(row=2, column=2)\n        self.entryname.grid(row=3, column=1)\n\n    def processButton(self):\n        name = self.entryname.get()\n        name_list.append(str(name))\n        self.entryname.delete(0, END)\n\n\nwindow = Tk()\nwindow.title('Names to be processed please: ')\napp = Name(master=window)\napp.mainloop()\n\nprint(name_list)\n</code></pre>\n\n<p>I hope this solves your problem!</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11890447"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 57614426, "answer_count": 1, "score": 0, "last_activity_date": 1566495110, "creation_date": 1566431878, "last_edit_date": 1566492261, "question_id": 57600494, "link": "https://stackoverflow.com/questions/57600494/python-destruction-of-tkinter-gui-and-loop", "title": "Python Destruction of Tkinter GUI, and loop", "body": "<p>I am trying to create a Tkinter GUI that loops, meaning it gets destroyed and recreated or if it could collect names that gets inputted into it.  I asked a question earlier and got a list however, I changed the method and would like now to get the cycle through the same window and when I click finished that it terminates the window. I hope you understand, much like when you input data, and as soon as you press finished, and gives you time to check it.</p>\n\n<pre><code>from tkinter import *\nwindow = Tk()\nclass Name:\n    def __init__(self, window):\n        window.title('Names to be processed please: ')\n        frame1 = Frame(window)\n        frame1.pack()\n        label = Label(frame1, text = \"Enter a name: \")\n        self.name = StringVar()\n        self.v2 = IntVar()\n        entryname = Entry(frame1, text = self.name)\n        btGetName = Button(frame1, text = 'Get Name', command = self.processButton)\n        btFinished = Button(frame1, text = 'Finished',\n                            command = self.processfinishedButton)\n        btNotFinished = Checkbutton(frame1, text = 'Not Finished',\n                                 variable = self.v2, command = self.unfinishedButton)\n        label.grid(row = 1, column = 2)\n        btGetName.grid(row = 1, column = 3)\n        btFinished.grid(row = 2, column = 2)\n        btNotFinished.grid(row = 2, column = 3)\n        entryname.grid(row = 3, column = 1)\n        window.mainloop()\n    def processButton(self):\n        global name_list\n        name_list = []\n        name = self.name.get()\n        name_list.append(name)\n        return name_list\n    def processfinishedButton(self):\n        global a\n        a = 1\n        return a\n    def unfinishedButton(self):\n        b = (1 if self.v2.get() == 1 else 0)\n        return b\na = 0\nc = Name(window)\nwhile a != 1:\n    Name(window)\n    window.mainloop()\nprint(name_list)\n\n</code></pre>\n\n<p>My issue is the following </p>\n\n<pre><code>Traceback (most recent call last)\n&lt;ipython-input-2-8b1e1b0bb9c1&gt; in &lt;module&gt;\n     37 c = Name(window)\n     38 while a != 1:\n---&gt; 39     Name(window)\n     40     window.mainloop()\n     41 print(name_list)\n\n&lt;ipython-input-2-8b1e1b0bb9c1&gt; in __init__(self, window)\n      3 class Name:\n      4     def __init__(self, window):\n----&gt; 5         window.title('Names to be processed please: ')\n      6         frame1 = Frame(window)\n      7         frame1.pack()\n\nC:\\ProgramData\\Anaconda3\\lib\\tkinter\\__init__.py in wm_title(self, string)\n   1983     def wm_title(self, string=None):\n   1984         \"\"\"Set the title of this widget.\"\"\"\n-&gt; 1985         return self.tk.call('wm', 'title', self._w, string)\n   1986     title = wm_title\n   1987     def wm_transient(self, master=None):\n\nTclError: can't invoke \"wm\" command: application has been destroyed\n</code></pre>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["python", "postgresql", "sqlalchemy", "postgis", "geoalchemy2"], "comments": [{"owner": {"reputation": 743, "user_id": 2913477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b126939c105b8d71b18f93c6850e55f1?s=128&d=identicon&r=PG&f=1", "display_name": "MiniMax", "link": "https://stackoverflow.com/users/2913477/minimax"}, "edited": false, "score": 0, "creation_date": 1566433927, "post_id": 57600465, "comment_id": 101658426, "body": "You can use <code>re</code> module to extract values from the string, look at answers to this question: <a href=\"https://stackoverflow.com/q/2175080/2913477\">sscanf in Python</a>"}, {"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "edited": false, "score": 1, "creation_date": 1566464767, "post_id": 57600465, "comment_id": 101667294, "body": "This question is unclear to me. First, your <code>format</code> should produce a string starting with <code>&#39;POINT(</code>, not <code>0100002076ED</code>. Second, since you already <i>have</i> <code>latitude</code> and  <code>longitude</code>, why not just store them in a tuple instead of formatting them and then converting it back?"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1566466610, "post_id": 57600465, "comment_id": 101668283, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, without truncating the model definition, inputs, or outputs. Could you also clarify the &quot;within Python&quot;, are you unwilling to use the PostGIS functions while querying, and instead want to parse (what looks like) <a href=\"https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry#Well-known_binary\" rel=\"nofollow noreferrer\">WKB</a>?"}, {"owner": {"reputation": 1641, "user_id": 4643990, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-n_qyjOQ7fvA/AAAAAAAAAAI/AAAAAAAAACo/CJe4jOwG6vA/photo.jpg?sz=128", "display_name": "IamMashed", "link": "https://stackoverflow.com/users/4643990/iammashed"}, "edited": false, "score": 0, "creation_date": 1590419459, "post_id": 57600465, "comment_id": 109665669, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/24092817/how-to-get-lng-lat-value-from-query-results-of-geoalchemy2\">How to get lng lat value from query results of geoalchemy2</a>"}], "owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 623, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1566466246, "creation_date": 1566431541, "last_edit_date": 1566466246, "question_id": 57600465, "link": "https://stackoverflow.com/questions/57600465/how-do-i-convert-a-geography-column-to-latitude-and-longitude", "title": "How do I convert a geography column to latitude and longitude?", "body": "<p>I am using <code>PostgreSQL</code>, <code>SQLAlchemy</code> and <code>GeoAlchemy2</code> libraries to store some geospatial coordinates in the database.</p>\n\n<p>I define the database column in my database as follows using Python:</p>\n\n<pre><code>import sqlalchemy as sa\nimport geoalchemy2 as ga\ngeo = sa.Column(ga.Geography('POINT', srid=4326))  # 4326 = WGS84 Lat Long\n</code></pre>\n\n<p>And I can add the geo coordinates by converting as follows:</p>\n\n<pre><code>self.geo = 'POINT({} {})'.format(latitude, longitude)\n</code></pre>\n\n<p>This encodes it as a string like: <code>0100002076ED....</code></p>\n\n<p>My question is:\nHow can I convert this string back to latitude, and longitude from within python? </p>\n"}, {"tags": ["python", "function", "loops"], "comments": [{"owner": {"reputation": 6282, "user_id": 625540, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/r279R.jpg?s=128&g=1", "display_name": "codefreak", "link": "https://stackoverflow.com/users/625540/codefreak"}, "edited": false, "score": 0, "creation_date": 1566431595, "post_id": 57600458, "comment_id": 101658074, "body": "try &quot;continue&quot; where you have break"}, {"owner": {"reputation": 11, "user_id": 11912714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88128a08ccf9c4b03e939d4dbc4c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "anon110110", "link": "https://stackoverflow.com/users/11912714/anon110110"}, "reply_to_user": {"reputation": 6282, "user_id": 625540, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/r279R.jpg?s=128&g=1", "display_name": "codefreak", "link": "https://stackoverflow.com/users/625540/codefreak"}, "edited": false, "score": 0, "creation_date": 1566431801, "post_id": 57600458, "comment_id": 101658108, "body": "That did it, could have sworn I already tried that but...live and learn. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 10464050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0XS-uJbt8kY/AAAAAAAAAAI/AAAAAAAAD04/XRKRG_1Tljk/photo.jpg?sz=128", "display_name": "Moe the Lawn", "link": "https://stackoverflow.com/users/10464050/moe-the-lawn"}, "is_accepted": false, "score": 0, "last_activity_date": 1566432420, "creation_date": 1566432420, "answer_id": 57600537, "question_id": 57600458, "link": "https://stackoverflow.com/questions/57600458/i-have-a-while-loop-that-runs-a-function-how-do-i-break-out-of-the-function-aft/57600537#57600537", "title": "I have a while loop that runs a function, how do I break out of the function after an if and return to the while loop?", "body": "<pre><code>def cmndln():\n    command = input(\"Input:&gt; \")\n    if command == 'exit':\n        clientsocket.close()\n\n    elif command == 'decrypt':\n        clientsocket.send(\"decrypt\".encode())\n        msg = clientsocket.recv(1024)\n        print(msg.decode())\n        key = input(\"Key: \")\n        clientsocket.send(key.encode())\n        msg = clientsocket.recv(1024)\n        print(msg.decode())\n        command = None\n\n    elif command == 'encrypt':\n        clientsocket.send(\"encrypt\".encode())\n        msg = clientsocket.recv(1024)\n        print(msg.decode())\n        command = None\n\ndef main():\n    while True:\n    #condition here\n         cmndln()\n\nif __name__ = '__main__':\n     main()\n</code></pre>\n\n<blockquote>\n  <p>Instead of the infinite loop twice you can call it once in the main function.</p>\n</blockquote>\n\n<p>This way the command is still being called like before. You can now break on a condition in the main to exist the function.</p>\n"}], "owner": {"reputation": 11, "user_id": 11912714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88128a08ccf9c4b03e939d4dbc4c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "anon110110", "link": "https://stackoverflow.com/users/11912714/anon110110"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566438623, "creation_date": 1566431493, "last_edit_date": 1566438623, "question_id": 57600458, "link": "https://stackoverflow.com/questions/57600458/i-have-a-while-loop-that-runs-a-function-how-do-i-break-out-of-the-function-aft", "title": "I have a while loop that runs a function, how do I break out of the function after an if and return to the while loop?", "body": "<p>I am trying to call a function inside an infinite loop. Once x happens in the function, I want it to return to the beginning of the while loop. How do you break out of the function?</p>\n\n<p>I have tried to use <i> break </i> and <i> return </i> but, no luck.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def cmndln():\n    while True:\n        command = input(\"Input:&gt; \")\n        if command == 'exit':\n            clientsocket.close()\n            break\n\n        elif command == 'decrypt':\n            clientsocket.send(\"decrypt\".encode())\n            msg = clientsocket.recv(1024)\n            print(msg.decode())\n            key = input(\"Key: \")\n            clientsocket.send(key.encode())\n            msg = clientsocket.recv(1024)\n            print(msg.decode())\n            command = None\n            break\n\n        elif command == 'encrypt':\n            clientsocket.send(\"encrypt\".encode())\n            msg = clientsocket.recv(1024)\n            print(msg.decode())\n            command = None\n            break\n    return\n\nwhile True:\n    cmndln()\n</code></pre>\n\n<p>I want to start the function again</p>\n"}, {"tags": ["python", "random", "sequence", "percentile"], "answers": [{"comments": [{"owner": {"reputation": 250, "user_id": 10687053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FapdS.jpg?s=128&g=1", "display_name": "CatM", "link": "https://stackoverflow.com/users/10687053/catm"}, "edited": false, "score": 0, "creation_date": 1566483268, "post_id": 57611218, "comment_id": 101677954, "body": "Thank you for answering but z_no is equal to 2 which does not correspond to the expected answer. There are a lot more triplets in common between the two sequences."}, {"owner": {"reputation": 11442, "user_id": 11610186, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HKHsybo6y0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdY2OjHwdlmaUkMBZsmKiCkkybzQw/mo/photo.jpg?sz=128", "display_name": "Grzegorz Skibinski", "link": "https://stackoverflow.com/users/11610186/grzegorz-skibinski"}, "reply_to_user": {"reputation": 250, "user_id": 10687053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FapdS.jpg?s=128&g=1", "display_name": "CatM", "link": "https://stackoverflow.com/users/10687053/catm"}, "edited": false, "score": 0, "creation_date": 1566483817, "post_id": 57611218, "comment_id": 101678302, "body": "does the triplet have to have 3 unique numbers, or e.g. &quot;444&quot; is ok. I edited it, so it assumes it&#39;s ok to have numbers repeated within single triplet"}, {"owner": {"reputation": 250, "user_id": 10687053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FapdS.jpg?s=128&g=1", "display_name": "CatM", "link": "https://stackoverflow.com/users/10687053/catm"}, "edited": false, "score": 0, "creation_date": 1566483992, "post_id": 57611218, "comment_id": 101678421, "body": "You cannot have consecutive repetitions. What I meant by repetitions is that in x the 123 triplet occurs twice, so in the total amount of common triplets it should be counted twice."}, {"owner": {"reputation": 11442, "user_id": 11610186, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HKHsybo6y0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdY2OjHwdlmaUkMBZsmKiCkkybzQw/mo/photo.jpg?sz=128", "display_name": "Grzegorz Skibinski", "link": "https://stackoverflow.com/users/11610186/grzegorz-skibinski"}, "reply_to_user": {"reputation": 250, "user_id": 10687053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FapdS.jpg?s=128&g=1", "display_name": "CatM", "link": "https://stackoverflow.com/users/10687053/catm"}, "edited": false, "score": 0, "creation_date": 1566484076, "post_id": 57611218, "comment_id": 101678471, "body": "ah, ok, so we take triplets from shorter string, and see how many times it appears in the longer one ? (on my example y, and x respectively) ?"}, {"owner": {"reputation": 250, "user_id": 10687053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FapdS.jpg?s=128&g=1", "display_name": "CatM", "link": "https://stackoverflow.com/users/10687053/catm"}, "edited": false, "score": 0, "creation_date": 1566484172, "post_id": 57611218, "comment_id": 101678539, "body": "Yes, so we would be looking for 213, 134, 342, 213... and so on."}, {"owner": {"reputation": 11442, "user_id": 11610186, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HKHsybo6y0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdY2OjHwdlmaUkMBZsmKiCkkybzQw/mo/photo.jpg?sz=128", "display_name": "Grzegorz Skibinski", "link": "https://stackoverflow.com/users/11610186/grzegorz-skibinski"}, "reply_to_user": {"reputation": 250, "user_id": 10687053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FapdS.jpg?s=128&g=1", "display_name": "CatM", "link": "https://stackoverflow.com/users/10687053/catm"}, "edited": false, "score": 0, "creation_date": 1566484302, "post_id": 57611218, "comment_id": 101678616, "body": "gotcha, now is better ? (14 is the number for the total sum)"}, {"owner": {"reputation": 250, "user_id": 10687053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FapdS.jpg?s=128&g=1", "display_name": "CatM", "link": "https://stackoverflow.com/users/10687053/catm"}, "edited": false, "score": 0, "creation_date": 1566485017, "post_id": 57611218, "comment_id": 101679049, "body": "You are a freaking life saver! Would never be able to come up with this!"}, {"owner": {"reputation": 11442, "user_id": 11610186, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HKHsybo6y0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdY2OjHwdlmaUkMBZsmKiCkkybzQw/mo/photo.jpg?sz=128", "display_name": "Grzegorz Skibinski", "link": "https://stackoverflow.com/users/11610186/grzegorz-skibinski"}, "reply_to_user": {"reputation": 250, "user_id": 10687053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FapdS.jpg?s=128&g=1", "display_name": "CatM", "link": "https://stackoverflow.com/users/10687053/catm"}, "edited": false, "score": 0, "creation_date": 1566485243, "post_id": 57611218, "comment_id": 101679188, "body": "no worries :) Could you upvote, and mark as an answer, if it works"}], "tags": [], "owner": {"reputation": 11442, "user_id": 11610186, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HKHsybo6y0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdY2OjHwdlmaUkMBZsmKiCkkybzQw/mo/photo.jpg?sz=128", "display_name": "Grzegorz Skibinski", "link": "https://stackoverflow.com/users/11610186/grzegorz-skibinski"}, "is_accepted": true, "score": 1, "last_activity_date": 1566484209, "last_edit_date": 1566484209, "creation_date": 1566482753, "answer_id": 57611218, "question_id": 57600445, "link": "https://stackoverflow.com/questions/57600445/common-strings-between-two-sequences/57611218#57611218", "title": "Common strings between two sequences", "body": "<p>Try something like that:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import itertools\n\nx = \"12342134213421313242123\"\ny = \"213421341232123\"\nm = [\"1\",\"2\",\"3\",\"4\"]\n\n#dict of triplet vs [no of repetitions in x, in y]\nz={k: [x.count(k), y.count(k)] for k in [\"\".join(el) for el in [a+b+c for a in m for b in m for c in m if a!=b and b!=c and a!=c]]}\n#total number of common triplets:\nz_no = sum([x.count(k) if x.count(k)&gt;0 and y.count(k)&gt;0 else 0 for k in [\"\".join(el) for el in [a+b+c for a in m for b in m for c in m if a!=b and b!=c and a!=c]]])\n#broken down by triplet\nz_final = {k: v[0] for k,v in z.items() if v[0]&gt;0 and v[1]&gt;0}\n</code></pre>\n"}], "owner": {"reputation": 250, "user_id": 10687053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FapdS.jpg?s=128&g=1", "display_name": "CatM", "link": "https://stackoverflow.com/users/10687053/catm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 57611218, "answer_count": 1, "score": 0, "last_activity_date": 1566522119, "creation_date": 1566431346, "last_edit_date": 1566522119, "question_id": 57600445, "link": "https://stackoverflow.com/questions/57600445/common-strings-between-two-sequences", "title": "Common strings between two sequences", "body": "<p>I have two questions related to the same topic. I run a simulation of 16000 sequences of 100 elements without repetitions with numbers between 1-4, for example: 124232143214223142314...</p>\n\n<p>These simulations were done to see what was the longest sequence in common between the sequences randomly generated and the pre-defined sequence. Participants were also asked to do this, to generate the sequence they had previously learned without awareness.</p>\n\n<p>I want to find all the triplets in common between both sequences. \nSo if we have sequence A: 12342134213421313242... and sequence B: 21342134123214. It would have to count all the triplets in common \nincluding repetitions: 213, 134, 342, 213, etc.</p>\n"}, {"tags": ["python", "exception"], "comments": [{"owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 1, "creation_date": 1566431118, "post_id": 57600388, "comment_id": 101657995, "body": "<code>number_1</code> will not be assigned since <code>djrgkl</code> cannot be converted into an integer. Therefore, it is not defined and thus not available to be printed!."}, {"owner": {"reputation": 2167, "user_id": 1935238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRVLR.jpg?s=128&g=1", "display_name": "DaveStSomeWhere", "link": "https://stackoverflow.com/users/1935238/davestsomewhere"}, "edited": false, "score": 0, "creation_date": 1566431146, "post_id": 57600388, "comment_id": 101658000, "body": "Your <code>try&#47;except</code> block is working - you just need to loop back and do the <code>input()</code> again."}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 1, "creation_date": 1566431282, "post_id": 57600388, "comment_id": 101658024, "body": "Possible duplicate <a href=\"https://stackoverflow.com/questions/23294658/asking-the-user-for-input-until-they-give-a-valid-response\">Functional approach or &quot;look mum no loops!&quot;:</a>"}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1566497930, "post_id": 57600388, "comment_id": 101685090, "body": "@Papy <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>  People tend to put a lot of time into answering questions thoroughly.  If a solution answers your question, check it, or leave a comment if it doesn&#39;t resolve the issue."}, {"owner": {"reputation": 11, "user_id": 11947214, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-j8Mu3Ky0PL0/AAAAAAAAAAI/AAAAAAAABZw/Q-WLcb8KaPg/photo.jpg?sz=128", "display_name": "Papy", "link": "https://stackoverflow.com/users/11947214/papy"}, "reply_to_user": {"reputation": 2167, "user_id": 1935238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRVLR.jpg?s=128&g=1", "display_name": "DaveStSomeWhere", "link": "https://stackoverflow.com/users/1935238/davestsomewhere"}, "edited": false, "score": 0, "creation_date": 1566578718, "post_id": 57600388, "comment_id": 101714078, "body": "@DaveStSomeWhere thank you. i ended up using a while true loop and it worked in this case but didnt work when i included it in the division function creation (zero error handling). it exits the code instead of looping back to the place where it asks for input."}, {"owner": {"reputation": 11, "user_id": 11947214, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-j8Mu3Ky0PL0/AAAAAAAAAAI/AAAAAAAABZw/Q-WLcb8KaPg/photo.jpg?sz=128", "display_name": "Papy", "link": "https://stackoverflow.com/users/11947214/papy"}, "reply_to_user": {"reputation": 2167, "user_id": 1935238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRVLR.jpg?s=128&g=1", "display_name": "DaveStSomeWhere", "link": "https://stackoverflow.com/users/1935238/davestsomewhere"}, "edited": false, "score": 0, "creation_date": 1566578850, "post_id": 57600388, "comment_id": 101714128, "body": "@DaveStSomeWhere <code>def divide(num1, num2):</code> \t<code>while True:</code> \t\t<code>try:</code> \t\t\t<code>return num1 &#47; num2</code> \t\t<code>except ZeroDivisionError:</code> \t\t\t<code>print(&quot;you tried to divide by zero, try something else  &quot;)</code> \t\t<code>continue</code> \t<code>else:</code> \t\t<code>break </code>"}, {"owner": {"reputation": 2167, "user_id": 1935238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRVLR.jpg?s=128&g=1", "display_name": "DaveStSomeWhere", "link": "https://stackoverflow.com/users/1935238/davestsomewhere"}, "edited": false, "score": 0, "creation_date": 1566579619, "post_id": 57600388, "comment_id": 101714447, "body": "@Papy, please update your question with your full code and your issues. Kind of tough to debug from comments."}], "answers": [{"tags": [], "owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "is_accepted": false, "score": 1, "last_activity_date": 1566432246, "last_edit_date": 1566432246, "creation_date": 1566431719, "answer_id": 57600478, "question_id": 57600388, "link": "https://stackoverflow.com/questions/57600388/exception-error-handling-disturbed-my-variables/57600478#57600478", "title": "exception error handling disturbed my variables", "body": "<ul>\n<li>See <a href=\"https://stackoverflow.com/questions/23294658/asking-the-user-for-input-until-they-give-a-valid-response\">Functional approach or \"look mum no loops!\"</a> for a detailed explanation</li>\n<li>A <code>dict</code> and <code>for-loop</code> have been added to manage multiple variables</li>\n</ul>\n\n<pre><code>from itertools import chain, repeat\n\nnum_dict = dict()\nfor x in range(2):\n    number = chain([\"Enter a number: \"], repeat(\"Not a number! Try again: \"))\n    replies = map(input, number)\n    num_dict[x] = next(filter(str.isdigit, replies))\n    print(num_dict[x])\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre><code>Enter a number:  asdf\nNot a number! Try again:  asdf\nNot a number! Try again:  cccc\nNot a number! Try again:  4\n4\nEnter a number:  adfas\nNot a number! Try again:  g4\nNot a number! Try again:  asdf\nNot a number! Try again:  asg\nNot a number! Try again:  55678\n55678\n</code></pre>\n\n<pre><code>print(num_dict)\n{0: '4', 1: '55678'}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11947214, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-j8Mu3Ky0PL0/AAAAAAAAAAI/AAAAAAAABZw/Q-WLcb8KaPg/photo.jpg?sz=128", "display_name": "Papy", "link": "https://stackoverflow.com/users/11947214/papy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567058325, "creation_date": 1566430790, "last_edit_date": 1567058325, "question_id": 57600388, "link": "https://stackoverflow.com/questions/57600388/exception-error-handling-disturbed-my-variables", "title": "exception error handling disturbed my variables", "body": "<p>tried to use exception handling to force my basic calculator to correct the user if anything other than an integer is given </p>\n\n<p>so I included ;</p>\n\n<pre><code>try:\n    number_1 = int(input(\"Enter first number: \"))\n    number_2 = int(input(\"Enter second number: \"))\n\nexcept ValueError :\n    print(\"try something else, an actual number maybe ? like actual figures?   \")\n</code></pre>\n\n<p>instead i got </p>\n\n<p>Enter first number: djrgkl</p>\n\n<p>try something else, an actual number maybe ? like actual figures. </p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File\n  \"C:/Users/Papy/.PyCharmCE2019.2/config/scratches/calc.py\", line 52, in\n   print(number_1, \"/(divided by)\", number_2, \"(equals)=\",\n  NameError: name 'number_1' is not defined</p>\n</blockquote>\n"}, {"tags": ["python", "scripting", "blender"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3250407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a36f16b233f49155231174fa8a4dbf29?s=128&d=identicon&r=PG&f=1", "display_name": "XaberTheBlade", "link": "https://stackoverflow.com/users/3250407/xabertheblade"}, "edited": false, "score": 0, "creation_date": 1567403084, "post_id": 57744292, "comment_id": 101940581, "body": "THIS very well might be exactly what I needed!! Thank you so much. I am going to rip into the archipack addon as well and see if I can glean more out of it. If nothing else you have given me the first solid footing for moving forward, I appreciate you taking to time to answer this for me!"}, {"owner": {"reputation": 6139, "user_id": 2684771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2f487264833152bb7890a4b6292d65?s=128&d=identicon&r=PG&f=1", "display_name": "sambler", "link": "https://stackoverflow.com/users/2684771/sambler"}, "reply_to_user": {"reputation": 25, "user_id": 3250407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a36f16b233f49155231174fa8a4dbf29?s=128&d=identicon&r=PG&f=1", "display_name": "XaberTheBlade", "link": "https://stackoverflow.com/users/3250407/xabertheblade"}, "edited": false, "score": 1, "creation_date": 1567412235, "post_id": 57744292, "comment_id": 101943710, "body": "@XaberTheBlade once you start your addon, have a look at <a href=\"http://blender.stackexchange.com/\">blender.stackexchange</a> for questions with blender scripting."}, {"owner": {"reputation": 25, "user_id": 3250407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a36f16b233f49155231174fa8a4dbf29?s=128&d=identicon&r=PG&f=1", "display_name": "XaberTheBlade", "link": "https://stackoverflow.com/users/3250407/xabertheblade"}, "edited": false, "score": 0, "creation_date": 1567749630, "post_id": 57744292, "comment_id": 102063643, "body": "I didn&#39;t even know there was an SE just for blender!! Thank you for this, exceedingly helpful :)"}], "tags": [], "owner": {"reputation": 6139, "user_id": 2684771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2f487264833152bb7890a4b6292d65?s=128&d=identicon&r=PG&f=1", "display_name": "sambler", "link": "https://stackoverflow.com/users/2684771/sambler"}, "is_accepted": true, "score": 1, "last_activity_date": 1567325619, "creation_date": 1567325619, "answer_id": 57744292, "question_id": 57600385, "link": "https://stackoverflow.com/questions/57600385/blender-locking-creation-radius-to-mouse-movement/57744292#57744292", "title": "blender: locking creation radius to mouse movement", "body": "<p>My first suggestion is to use a <a href=\"https://docs.blender.org/api/current/bpy.types.Operator.html#modal-execution\" rel=\"nofollow noreferrer\">modal operator</a>, this can allow you to continue to alter the object after the initial creation until an action accepts or cancels your new object.</p>\n\n<p>For a working example of something more complex, enable the archipack addon that is included with blender, then choose <em>Add->Mesh->Archipack->Wall</em>, the new wall has measurements shown around it, you can continue to adjust the object by changing the length, height, angle and number of walls, even after you do other things. You will need to find the addon scripts in blenders installation or in the <a href=\"https://developer.blender.org/diffusion/BA/browse/master/archipack/\" rel=\"nofollow noreferrer\">git repo</a> and look through it to see how it works.</p>\n"}], "owner": {"reputation": 25, "user_id": 3250407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a36f16b233f49155231174fa8a4dbf29?s=128&d=identicon&r=PG&f=1", "display_name": "XaberTheBlade", "link": "https://stackoverflow.com/users/3250407/xabertheblade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 57744292, "answer_count": 1, "score": 0, "last_activity_date": 1567325619, "creation_date": 1566430754, "question_id": 57600385, "link": "https://stackoverflow.com/questions/57600385/blender-locking-creation-radius-to-mouse-movement", "title": "blender: locking creation radius to mouse movement", "body": "<p>I am try to create a 'bullet time' style camera path for an addon I am building. I would like to create the spherical spiral and then interactive adjust the radius to fit the 'stage.' How can I immediately lock the radius value to the mouse movement and then click complete (kind of like 3ds max creations)? Also, is it possible to remove half the spiral below the 'stage'?</p>\n\n<p>I unfortunately have no code reference outside of the simple creation, I don't even know where to start and google has helped exactly nill on this one :(</p>\n"}, {"tags": ["python", "selenium", "firefox", "geckodriver"], "comments": [{"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1566431368, "post_id": 57600382, "comment_id": 101658041, "body": "out of curiosity, why do you want to open 30 tabs. Generally, you can close the tab once the operations on the tab is done."}, {"owner": {"reputation": 67, "user_id": 11959333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHXu3CVps5dByuY05L6xzV9pdfUXMjw1QzITXBOg=k-s128", "display_name": "Luis Valdez", "link": "https://stackoverflow.com/users/11959333/luis-valdez"}, "reply_to_user": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1566531383, "post_id": 57600382, "comment_id": 101693468, "body": "Well, @supputuri, I try to watch over a number of websites and the tools than I already have, it&#39;s a script that uses i macros &amp; kantu. So, I thought that using only one script and the Selenium could do it more... &#39;efficient?&#39;, than doing it almost manually. And, actually, I recently started using Selenium, so my first approach was to replicate what I already do with Kantu, and try to understand what happens...kind of. But I get your point. I know it would be more efficient if I open one tab at a time, do my stuff and move on to the other. I just don&#39;t want to keep wondering."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 11959333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHXu3CVps5dByuY05L6xzV9pdfUXMjw1QzITXBOg=k-s128", "display_name": "Luis Valdez", "link": "https://stackoverflow.com/users/11959333/luis-valdez"}, "edited": false, "score": 0, "creation_date": 1566531481, "post_id": 57611765, "comment_id": 101693487, "body": "Thanks Nickolay, that solves it! dou you know a link where I can find more documentation about this &#39;preferences&#39;? for Firefox, I was looking for it, but It&#39;s hard to find. I would appreciate."}, {"owner": {"reputation": 28156, "user_id": 1026, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ea331e778d54effc15b5fbc694bc8232?s=128&d=identicon&r=PG", "display_name": "Nickolay", "link": "https://stackoverflow.com/users/1026/nickolay"}, "reply_to_user": {"reputation": 67, "user_id": 11959333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHXu3CVps5dByuY05L6xzV9pdfUXMjw1QzITXBOg=k-s128", "display_name": "Luis Valdez", "link": "https://stackoverflow.com/users/11959333/luis-valdez"}, "edited": false, "score": 0, "creation_date": 1566558763, "post_id": 57611765, "comment_id": 101703846, "body": "There&#39;s <a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Preferences/A_brief_guide_to_Mozilla_preferences\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Mozilla/Preferences/&hellip;</a> but I&#39;m not sure documentation on what exactly are you looking for."}], "tags": [], "owner": {"reputation": 28156, "user_id": 1026, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ea331e778d54effc15b5fbc694bc8232?s=128&d=identicon&r=PG", "display_name": "Nickolay", "link": "https://stackoverflow.com/users/1026/nickolay"}, "is_accepted": true, "score": 2, "last_activity_date": 1566484456, "creation_date": 1566484456, "answer_id": 57611765, "question_id": 57600382, "link": "https://stackoverflow.com/questions/57600382/cant-open-more-than-max-number-of-tabs-with-selenium-webdriver/57611765#57611765", "title": "Can&#39;t open more than max number of tabs with Selenium Webdriver?", "body": "<p>If you look at the stackoverflow tab, you should see a yellow bar saying the rest has been blocked by the pop-up blocker. (This happens because <code>execute_script</code> runs the script in the context of the web page.)</p>\n\n<p>To override, set <a href=\"http://kb.mozillazine.org/Dom.popup_maximum\" rel=\"nofollow noreferrer\">dom.popup_maximum</a> preference to a larger value:</p>\n\n<pre><code>opts = webdriver.FirefoxOptions()\nopts.set_preference(\"dom.popup_maximum\", 50)\ndriver = webdriver.Firefox(options=opts)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 570, "user_id": 4464045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/76cd9df62d6e572ea661b99f9f5cb849?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.EU", "link": "https://stackoverflow.com/users/4464045/mr-eu"}, "edited": false, "score": 0, "creation_date": 1596560288, "post_id": 57689360, "comment_id": 111847878, "body": "AttributeError: &#39;SwitchTo&#39; object has no attribute &#39;new_window&#39;"}, {"owner": {"reputation": 101, "user_id": 8592202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf310068015ac4e9e67681e67c3abad?s=128&d=identicon&r=PG&f=1", "display_name": "Henrik", "link": "https://stackoverflow.com/users/8592202/henrik"}, "reply_to_user": {"reputation": 570, "user_id": 4464045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/76cd9df62d6e572ea661b99f9f5cb849?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.EU", "link": "https://stackoverflow.com/users/4464045/mr-eu"}, "edited": false, "score": 0, "creation_date": 1597129323, "post_id": 57689360, "comment_id": 112025169, "body": "Actually the new API was never released for the Selenium 3 Python bindings. You will have to use a Selenium 4 alpha release to actually make use of it."}], "tags": [], "owner": {"reputation": 101, "user_id": 8592202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf310068015ac4e9e67681e67c3abad?s=128&d=identicon&r=PG&f=1", "display_name": "Henrik", "link": "https://stackoverflow.com/users/8592202/henrik"}, "is_accepted": false, "score": 2, "last_activity_date": 1566985137, "creation_date": 1566985137, "answer_id": 57689360, "question_id": 57600382, "link": "https://stackoverflow.com/questions/57600382/cant-open-more-than-max-number-of-tabs-with-selenium-webdriver/57689360#57689360", "title": "Can&#39;t open more than max number of tabs with Selenium Webdriver?", "body": "<p>Please don't make use of \"window.open()\" to get new tabs or windows opened. Instead use the new WebDriver <a href=\"https://w3c.github.io/webdriver/#new-window\" rel=\"nofollow noreferrer\">New Window</a> API, which all the latest versions of the official Selenium bindings have been already integrated. Note, it's not part of all the drivers yet, but for recent Firefox releases it works.</p>\n\n<p>Given that you are using the Python bindings the following can be used:</p>\n\n<pre><code>driver.switch_to.new_window('tab')\n</code></pre>\n\n<p>By using this approach there shouldn't be a limitation for opening a lot of tabs.</p>\n"}], "owner": {"reputation": 67, "user_id": 11959333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHXu3CVps5dByuY05L6xzV9pdfUXMjw1QzITXBOg=k-s128", "display_name": "Luis Valdez", "link": "https://stackoverflow.com/users/11959333/luis-valdez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "accepted_answer_id": 57611765, "answer_count": 2, "score": 4, "last_activity_date": 1566985137, "creation_date": 1566430721, "last_edit_date": 1566484476, "question_id": 57600382, "link": "https://stackoverflow.com/questions/57600382/cant-open-more-than-max-number-of-tabs-with-selenium-webdriver", "title": "Can&#39;t open more than max number of tabs with Selenium Webdriver?", "body": "<p>I am trying to open a list of different URLs, opening one per tab, but when the number exceeds 20 ~ 21, stop opening tabs.</p>\n\n<p>I've tried to separate the list into groups of 20, and creating new instances of the webdriver, and that works fine, but I would like to know if it's a way to enable more number of tabs using the same instance? </p>\n\n<pre class=\"lang-python prettyprint-override\"><code>from selenium import webdriver\nimport time\n\ndriver = webdriver.Firefox()\ndriver.get('https://stackoverflow.com/')\n\nfor i in range(30):\n    driver.execute_script(\"window.open('');\")\n\nprint(len(driver.window_handles))\ntime.sleep(3)\ndriver.quit()\n</code></pre>\n\n<p>I was trying, to open 30 tabs at once but only opens 21.\nI'm using python 3.5.0, Firefox 68.0.2 &amp; geckodriver 0.24.0</p>\n"}, {"tags": ["python", "python-3.6"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1566431945, "post_id": 57600378, "comment_id": 101658131, "body": "I think <code>return results.get()</code> would do what you want."}, {"owner": {"reputation": 81, "user_id": 5119932, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--zMKcLSyhOc/AAAAAAAAAAI/AAAAAAAAABg/mlUdVQaQ1xE/photo.jpg?sz=128", "display_name": "Cesarin", "link": "https://stackoverflow.com/users/5119932/cesarin"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1566432222, "post_id": 57600378, "comment_id": 101658162, "body": "@martineau with .get() it returns a list of a coroutines"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1566437935, "post_id": 57600378, "comment_id": 101659072, "body": "You may need to do a <code>pool.close()</code> and <code>pool.join()</code> before the <code>return</code> \u2014 I don&#39;t the the <code>results.wait()</code> is needed in that case. If you provide some sort of <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, then I could verify a solution."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 5119932, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--zMKcLSyhOc/AAAAAAAAAAI/AAAAAAAAABg/mlUdVQaQ1xE/photo.jpg?sz=128", "display_name": "Cesarin", "link": "https://stackoverflow.com/users/5119932/cesarin"}, "edited": false, "score": 0, "creation_date": 1566474111, "post_id": 57601138, "comment_id": 101672452, "body": "Thanks for your answer, but I need for Python 3.6, I&#39;ve updated the question with your solution but the error now is:  RuntimeError: There is no current event loop in thread &#39;Thread-3&#39;."}, {"owner": {"reputation": 1634, "user_id": 3920623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5c370ff84779b0a0cd4eb3ba3386e3?s=128&d=identicon&r=PG&f=1", "display_name": "constt", "link": "https://stackoverflow.com/users/3920623/constt"}, "reply_to_user": {"reputation": 81, "user_id": 5119932, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--zMKcLSyhOc/AAAAAAAAAAI/AAAAAAAAABg/mlUdVQaQ1xE/photo.jpg?sz=128", "display_name": "Cesarin", "link": "https://stackoverflow.com/users/5119932/cesarin"}, "edited": false, "score": 0, "creation_date": 1566529625, "post_id": 57601138, "comment_id": 101693195, "body": "I&#39;ve updated the answer. Now it works for Python 3.6"}], "tags": [], "owner": {"reputation": 1634, "user_id": 3920623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5c370ff84779b0a0cd4eb3ba3386e3?s=128&d=identicon&r=PG&f=1", "display_name": "constt", "link": "https://stackoverflow.com/users/3920623/constt"}, "is_accepted": false, "score": 0, "last_activity_date": 1566529061, "last_edit_date": 1566529061, "creation_date": 1566439195, "answer_id": 57601138, "question_id": 57600378, "link": "https://stackoverflow.com/questions/57600378/how-to-implement-threadpool-with-a-async-function/57601138#57601138", "title": "How to implement ThreadPool with a async function?", "body": "<p>You have to write a wrapper sync function which will call the async function by using <code>asyncio.run</code> function. Btw, no need to use <code>pool.map_async</code> if you wait for results anyway, just use <code>pool.map</code> instead. Here is a working example:</p>\n\n<pre><code>import asyncio\nfrom multiprocess.pool import ThreadPool\n\n\nasync def sleep(t):\n    await asyncio.sleep(t)\n\n    return t\n\n\ndef process_sleep(t):\n    return asyncio.run(sleep(t))\n\n\ndef main():\n\n    with ThreadPool(4) as pool:\n        results = pool.map(process_sleep, range(1, 5))\n\n    print(results)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[1, 2, 3, 4]\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Yep, you're right, I didn't mention the above code is for Python 3.7. Sorry \u00af\\_(\u30c4)_/\u00af This version works for 3.6:</p>\n\n<pre><code>import asyncio\nfrom multiprocessing.pool import ThreadPool\n\n\nasync def sleep(t):\n    await asyncio.sleep(t)\n\n    return t\n\n\ndef process_sleep(t):\n    loop = asyncio.new_event_loop()\n\n    return loop.run_until_complete(sleep(t))\n\n\ndef main():\n\n    with ThreadPool(4) as pool:\n        results = pool.map(process_sleep, range(1, 5))\n\n    print(results)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5119932, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--zMKcLSyhOc/AAAAAAAAAAI/AAAAAAAAABg/mlUdVQaQ1xE/photo.jpg?sz=128", "display_name": "Cesarin", "link": "https://stackoverflow.com/users/5119932/cesarin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1566529061, "creation_date": 1566430676, "last_edit_date": 1566474019, "question_id": 57600378, "link": "https://stackoverflow.com/questions/57600378/how-to-implement-threadpool-with-a-async-function", "title": "How to implement ThreadPool with a async function?", "body": "<p>I would like to know how to deal with execute a map_async with a async function.</p>\n\n<p>I've tried with this code, but doesn't wait to the results:</p>\n\n<pre><code>def execute_pool_threading_async(number_of_threads, async_function, params):\n    pool = ThreadPool(processes=number_of_threads)\n    results = pool.map_async(async_function, params)\n    results.wait()\n    return results\n</code></pre>\n\n<p>I expect the output in results variable.</p>\n\n<p>UPDATE:\nThis is a wrapper for python 3.6:</p>\n\n<pre><code>import asyncio\n# from multiprocess.pool import ThreadPool # 3.7\nfrom multiprocessing.pool import ThreadPool\n\nasync def sleep(t):\n    await asyncio.sleep(t)\n\n    return t\n\n\ndef process_sleep(t):\n    #return asyncio.run(sleep(t)) # 3.7\n    loop = asyncio.get_event_loop()\n    return loop.run_until_complete(asyncio.wait(sleep(t)))\n\n\ndef main():\n\n    with ThreadPool(4) as pool:\n        results = pool.map(process_sleep, range(1, 5))\n\n    print(results)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>But it doesn't work:\nRuntimeError: There is no current event loop in thread 'Thread-3'.</p>\n"}, {"tags": ["python", "postgresql"], "comments": [{"owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "edited": false, "score": 0, "creation_date": 1566454954, "post_id": 57600351, "comment_id": 101662617, "body": "Please show details of the crash. PostgreSQL normally wouldn&#39;t have a problem with small result sets like that (the client side might have though). Normally the solution for large result sets is to use a cursor."}], "answers": [{"tags": [], "owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "is_accepted": true, "score": 0, "last_activity_date": 1566432052, "creation_date": 1566432052, "answer_id": 57600515, "question_id": 57600351, "link": "https://stackoverflow.com/questions/57600351/querying-large-data-set-from-postgresql-and-processing/57600515#57600515", "title": "Querying large data set from Postgresql and processing", "body": "<p>Must be a very wide table?  That doesn't seem like too crazy of a number of rows.  Anyway you can make a lazy function to yield the data <code>x</code> number of rows at a time.  It's not stated how you're executing your query, but this is a sqlalchemy/psycopg implementation:</p>\n\n<pre><code>with engine.connect() as conn:\n    result = conn.execute(*query*)\n    while True:\n        chunk = result.fetchmany(x)\n        if not chunk:\n            break\n        for row in chunk:\n            heavy_processing(row)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 355, "user_id": 6297800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31576c9c3dd4b067ddac1cc9384cff4e?s=128&d=identicon&r=PG&f=1", "display_name": "zyd", "link": "https://stackoverflow.com/users/6297800/zyd"}, "is_accepted": false, "score": 0, "last_activity_date": 1566508676, "creation_date": 1566508676, "answer_id": 57617166, "question_id": 57600351, "link": "https://stackoverflow.com/questions/57600351/querying-large-data-set-from-postgresql-and-processing/57617166#57617166", "title": "Querying large data set from Postgresql and processing", "body": "<p>This is pretty similar to @it's-yer-boy-chet's answer, except it's just using the lower-level psycopg2 library instead of sqlalchemy.  The iterator over <code>conn.execute()</code> will implicitly call the cursor.fetchone() method, returning one row at a time which keeps the memory footprint relatively small provided there aren't thousands and thousands of columns returned by the query.  Not sure if it necessarily provides any performance benefits over sqlalchemy, it might be doing basically the same thing under the hood.</p>\n\n<p>If you still need more performance after that I'd look into a different database connection library like <a href=\"https://github.com/MagicStack/asyncpg\" rel=\"nofollow noreferrer\">asyncpg</a></p>\n\n<pre><code>conn = psycopg2.connect(user='user', password='password', host='host', database='database')\ncursor = conn.cursor()\nfor row in cursor.execute(query):\n    message_dict = format_message(row)\n    queue_helper.put_message_on_queue('update_related_tables', message_dict)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11959563, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213137497706337/picture?type=large", "display_name": "Alex Hill", "link": "https://stackoverflow.com/users/11959563/alex-hill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 57600515, "answer_count": 2, "score": 1, "last_activity_date": 1566508676, "creation_date": 1566430433, "last_edit_date": 1566506783, "question_id": 57600351, "link": "https://stackoverflow.com/questions/57600351/querying-large-data-set-from-postgresql-and-processing", "title": "Querying large data set from Postgresql and processing", "body": "<p>My question is about memory and performance with querying large data and then processing.</p>\n\n<p>Long story short, because of a bug. I am querying a table and getting all results between two timestamps. My Python script crashed due to not enough memory - This table is very wide and holds a massive JSON object. So I changed this to only return the Primary_Key of each row.</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>select id from *table_name*\nwhere updated_on between %(date_one)s and %(date_two)s\norder by updated_on asc\n</code></pre>\n\n<p>From here I loop through and query each row one by the Primary key for the row data.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    for primary_key in *query_results*:\n        row_data = data_helper.get_by_id( primary_key )\n        # from here I do some formatting and throw a message on a queue processor,\n        # this is not heavy processing\n        Example:\n          queue_helper.put_message_on_queue('update_related_tables', message_dict)\n\n</code></pre>\n\n<p>My question is, is this a \"good\" way of doing this? Do I need to help Python with GC? or will Python clean the memory after each iteration in the loop?</p>\n"}, {"tags": ["python", "tensorflow", "pycharm"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1566430837, "post_id": 57600323, "comment_id": 101657947, "body": "you have to execute your functions."}, {"owner": {"reputation": 1, "user_id": 11102846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16da88096e6480adf62a33e9ed132738?s=128&d=identicon&r=PG&f=1", "display_name": "F.C.B Fan", "link": "https://stackoverflow.com/users/11102846/f-c-b-fan"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1566489681, "post_id": 57600323, "comment_id": 101681548, "body": "Hi, I&#39;ve tried with that but there were no changes!"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1566490989, "post_id": 57600323, "comment_id": 101682175, "body": "do you have all in one file ? You can add <code>print()</code> in functions to see if they were executed."}, {"owner": {"reputation": 1, "user_id": 11102846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16da88096e6480adf62a33e9ed132738?s=128&d=identicon&r=PG&f=1", "display_name": "F.C.B Fan", "link": "https://stackoverflow.com/users/11102846/f-c-b-fan"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1566496150, "post_id": 57600323, "comment_id": 101684306, "body": "I added two print functions, one for the first ( def ) and another for the last one, when I run the code again it shows me just the last one."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1566761909, "post_id": 57600323, "comment_id": 101748822, "body": "if you see one text then you run only one of these function. How do you run it ? Do you have it all in one script ?"}], "owner": {"reputation": 1, "user_id": 11102846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16da88096e6480adf62a33e9ed132738?s=128&d=identicon&r=PG&f=1", "display_name": "F.C.B Fan", "link": "https://stackoverflow.com/users/11102846/f-c-b-fan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566430148, "creation_date": 1566430148, "question_id": 57600323, "link": "https://stackoverflow.com/questions/57600323/how-can-i-get-full-pycharm-code-executing-results", "title": "How can I get full PyCharm Code executing results?", "body": "<p>I'm using PyCharm to execute basic classification code in TensorFlow.\nI have built the full code and the code consist of two stages: the first one for defining and compiling the model and the second one for the data visualizing.\nHowever, when I'm trying to execute the full code, it executes it successfully but without showing me the result of the visualizing part.\nI mean it shows me all training and evaluating results but without the showing the results of part two.\nplease any help !?</p>\n\n<p>part 1:</p>\n\n<pre><code>from __future__ import absolute_import, division, print_function, unicode_literals\nimport tensorflow as tf\nimport matplotlib.cm\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nprint(tf.__version__)\n\nmnist= tf.keras.datasets.fashion_mnist\n\n(training_images, training_labels), (test_images, test_labels)= mnist.load_data()\nmodel= tf.keras.models.Sequential([tf.keras.layers.Flatten(input_shape=(28,28)),\n                                   tf.keras.layers.Dense(128, activation=tf.nn.relu),\n                                   tf.keras.layers.Dense(10, activation=tf.nn.softmax)])\n\n\nmodel.compile(optimizer= tf.optimizers.Adam(),\n              loss= 'sparse_categorical_crossentropy',\n              metrics= ['accuracy'])\n\nmodel.fit(training_images, training_labels, epochs=5)\n</code></pre>\n\n<p>part two:</p>\n\n<pre><code> def plot_image(i, predictions_array, true_label, img):\n    predictions_array, true_label, img= predictions_array[i], true_label[i], img[i]\n    plt.grid(False)\n    plt.xticks([])\n    plt.yticks([])\n    plt.imshow(img, cmap= plt.binary)\n    plt.show()\n\n    predicted_label= np.argmax(predictions_array)\n    if predicted_label== true_label:\n        color= 'blue'\n    else:\n        color= 'red'\n\n    plt.xlabel(\"{} {:2.0f}% ({})\".format(class_names[predicted_label], 100*np.max(predictions_array), class_names[true_label]), color=color)\n\ndef plot_value_array(i, predictions_array, true_label):\n    predictions_array, true_label = predictions_array[i], true_label[i]\n    plt.grid(False)\n    plt.xticks([])\n    plt.yticks([])\n    thisplot= plt.bar(range(10), predictions_array, color=\"#777777\")\n    plt.ylim([0,1])\n    predicted_label= np.argmax(predictions_array)\n\n    thisplot[predicted_label].set_color('red')\n    thisplot[true_label].set_color('blue')\n\n    i=0\n    plt.figure(figsize=(6,3))\n    plt.subplot(1,2,1)\n    plot_image(i, predictions, test_labels, test_images)\n    plt.subplot(1,2,2)\n    plot_value_array(i, predictions, test_labels)\n    plt.show()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "edited": false, "score": 3, "creation_date": 1566430085, "post_id": 57600289, "comment_id": 101657790, "body": "You cannot address a position that doesn&#39;t exist yet in a list. However, if the size of the list is constant, you could create a list filled with <code>None</code>, and then update as needed. Or you could use a dictionary to simulate a sparse list, where you&#39;d have key=position, value=value."}, {"owner": {"reputation": 2966, "user_id": 3014199, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/72332b0ac6ee78bc829c378c6c747e0e?s=128&d=identicon&r=PG", "display_name": "peer", "link": "https://stackoverflow.com/users/3014199/peer"}, "edited": false, "score": 1, "creation_date": 1566430116, "post_id": 57600289, "comment_id": 101657799, "body": "Use a dictionary instead? otherwise just <code>append</code> e.g. <code>-1</code> 10-1 times."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1566430143, "post_id": 57600289, "comment_id": 101657805, "body": "You can create a list of 10 <code>None</code> with <code>[None] * 10</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 2966, "user_id": 3014199, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/72332b0ac6ee78bc829c378c6c747e0e?s=128&d=identicon&r=PG", "display_name": "peer", "link": "https://stackoverflow.com/users/3014199/peer"}, "edited": false, "score": 1, "creation_date": 1566430172, "post_id": 57600289, "comment_id": 101657807, "body": "@peer <code>[-1] * 10</code> is simpler."}], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 11073234, "user_type": "registered", "profile_image": "https://graph.facebook.com/10219372140561070/picture?type=large", "display_name": "Surya Narayanan", "link": "https://stackoverflow.com/users/11073234/surya-narayanan"}, "is_accepted": false, "score": 0, "last_activity_date": 1595717761, "creation_date": 1595717761, "answer_id": 63094414, "question_id": 57600289, "link": "https://stackoverflow.com/questions/57600289/how-to-modify-positions-of-a-list-that-dont-exist/63094414#63094414", "title": "How to modify positions of a list that don&#39;t exist?", "body": "<p>I could initialize the list as</p>\n<pre><code>[-1 for _ in range(11)]\n</code></pre>\n<p>If I cannot fill the array with -1, then</p>\n<pre><code>[None for _ in range(11)]\n</code></pre>\n<p>or</p>\n<pre><code>[np.nan for _ in range(11)]\n</code></pre>\n<p>or</p>\n<pre><code>[float('inf') for _ in range(11)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "is_accepted": true, "score": 1, "last_activity_date": 1595718391, "creation_date": 1595718391, "answer_id": 63094471, "question_id": 57600289, "link": "https://stackoverflow.com/questions/57600289/how-to-modify-positions-of-a-list-that-dont-exist/63094471#63094471", "title": "How to modify positions of a list that don&#39;t exist?", "body": "<p>You can't. Python lists are not sparse.</p>\n<p>However, you could use a dict with integer keys:</p>\n<pre><code>&gt;&gt;&gt; faux_list = {10: 'foo'}\n&gt;&gt;&gt; faux_list[10]\n'foo'\n</code></pre>\n<p>Or you could fill a list with dummy data, like in <a href=\"https://stackoverflow.com/a/63094414/4518341\">your answer</a>.</p>\n"}], "owner": {"reputation": 109, "user_id": 11073234, "user_type": "registered", "profile_image": "https://graph.facebook.com/10219372140561070/picture?type=large", "display_name": "Surya Narayanan", "link": "https://stackoverflow.com/users/11073234/surya-narayanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 63094471, "answer_count": 2, "score": 0, "last_activity_date": 1595718391, "creation_date": 1566429813, "last_edit_date": 1595717567, "question_id": 57600289, "link": "https://stackoverflow.com/questions/57600289/how-to-modify-positions-of-a-list-that-dont-exist", "title": "How to modify positions of a list that don&#39;t exist?", "body": "<p>How can I fill the 10th position of a list when it is empty?</p>\n"}, {"tags": ["python", "image", "deep-learning", "pytorch", "dataloader"], "comments": [{"owner": {"reputation": 760, "user_id": 5027315, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q3m_s4YunKg/AAAAAAAAAAI/AAAAAAAAACo/3uRkBGYDvPY/photo.jpg?sz=128", "display_name": "asymptote", "link": "https://stackoverflow.com/users/5027315/asymptote"}, "edited": false, "score": 1, "creation_date": 1566440683, "post_id": 57600276, "comment_id": 101659501, "body": "I presume that your custom crop function will output images of similar shapes. If that is the case, one solution be to extend your own <code>CustomDataset</code> class from <code>ImageFolder</code> were you may apply custom crop."}, {"owner": {"reputation": 760, "user_id": 5027315, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q3m_s4YunKg/AAAAAAAAAAI/AAAAAAAAACo/3uRkBGYDvPY/photo.jpg?sz=128", "display_name": "asymptote", "link": "https://stackoverflow.com/users/5027315/asymptote"}, "edited": false, "score": 0, "creation_date": 1566440793, "post_id": 57600276, "comment_id": 101659522, "body": "Otherwise, you can write a custom collate function for Dataloader to return list of size <code>batch_size</code> containing image tensors."}, {"owner": {"reputation": 317, "user_id": 7938316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2852dd164f7a6cbb88e472707e9b1cc?s=128&d=identicon&r=PG&f=1", "display_name": "Prithwish Jana", "link": "https://stackoverflow.com/users/7938316/prithwish-jana"}, "reply_to_user": {"reputation": 760, "user_id": 5027315, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q3m_s4YunKg/AAAAAAAAAAI/AAAAAAAAACo/3uRkBGYDvPY/photo.jpg?sz=128", "display_name": "asymptote", "link": "https://stackoverflow.com/users/5027315/asymptote"}, "edited": false, "score": 0, "creation_date": 1566464261, "post_id": 57600276, "comment_id": 101667041, "body": "But I actually want my CustomCrop function to output images based on some input parameters...parameters may differ for different images... I have edited the question now...the question may have been a little unclear earlier..."}], "owner": {"reputation": 317, "user_id": 7938316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2852dd164f7a6cbb88e472707e9b1cc?s=128&d=identicon&r=PG&f=1", "display_name": "Prithwish Jana", "link": "https://stackoverflow.com/users/7938316/prithwish-jana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1566464440, "creation_date": 1566429626, "last_edit_date": 1566464440, "question_id": 57600276, "link": "https://stackoverflow.com/questions/57600276/pytorch-parameter-based-cropping-custom-sub-images-from-dataloader-image", "title": "Pytorch Parameter-based Cropping custom sub-images from DataLoader image", "body": "<p>There are rectangular images in train &amp; validation folders, and the images are accessed via Pytorch through DataLoader module. Without performing, </p>\n\n<pre><code>transforms.CenterCrop(size) or transforms.RandomCrop(size)\n</code></pre>\n\n<p>I need to preserve their original shape and size, so that while training/testing I can input square-shaped images, via some custom cropping technique. This CustomCrop function may take as inputs certain parameters, different for different images.</p>\n\n<p>When I tried this custom-cropping approach only for testing, I had to exclude the cropping line from data_transforms for TEST. </p>\n\n<pre><code>data_transforms = {\n    TRAIN: transforms.Compose([\n        transforms.RandomCrop(size),\n        transforms.ToTensor(),\n    ]),\n    TEST: transforms.Compose([\n        #CROPPING LINE EXCLUDED FROM HERE\n        transforms.ToTensor(),\n    ])\n}\nimage_datasets = {\n    x: ImageFolder(\n        os.path.join(path, mapping[x]), \n        transform=data_transforms[x]\n    )\n    for x in [TRAIN, TEST]\n}\ndataloaders = {\n       x: DataLoader(\n       image_datasets[x], batch_size=batch_size\n       )\n    for x in [TRAIN, TEST]\n}    \n</code></pre>\n\n<p>And my intention is to do something like...</p>\n\n<pre><code>for imgs, lbls, paths in iter(dataloaders[TEST]):\n    data = (imgs, lbls)\n    inputs, labels = data\n    cropped_input = myCustomCrop(inputs, param1, param2) #this crops it to square size, compatible for my model\n    [...]  #some code      \n    optimizer.zero_grad()            \n    outputs = model(cropped_input)\n</code></pre>\n\n<p>...so that I can crop it during run-time as per my need.</p>\n\n<p>But this gives me an error message (For image size (100,75) in folder):</p>\n\n<pre><code>--&gt; 218     for imgs, lbls, paths in iter(dataloaders[TEST]):\nRuntimeError: invalid argument 0: Sizes of tensors must match except in dimension 0. Got 100 and 75 in dimension 2 at ...\n</code></pre>\n\n<p>I am understanding that, DataLoader stacks the images and they need to be equal-sized at runtime. But, how can I then implement my custom-crop function, which may be different for different images (based on input parameter to CustomCrop function). Any suggestions would be highly appreciated. Thanks.</p>\n"}, {"tags": ["python", "selenium", "google-chrome", "selenium-webdriver", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1566430384, "post_id": 57600228, "comment_id": 101657851, "body": "Somewhere else on the PATH you&#39;ve got another executable."}], "answers": [{"comments": [{"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 1, "creation_date": 1566582151, "post_id": 57603953, "comment_id": 101715433, "body": "You&#39;ve been instructed before to reduce the amount over formatting that you use in your answers (see <a href=\"https://meta.stackoverflow.com/questions/362515/is-this-formatting-overuse\">meta about your posts</a>). You&#39;ve also been told to avoid promotion of 3rd party tools and excessive explanations."}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1566590174, "post_id": 57603953, "comment_id": 101718043, "body": "@JeffC Until and unless decide to learn the Selenium related new concepts by reading the different answers it will be tough for you to understand how the discussions differs as per their respective usecase."}, {"owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 1, "creation_date": 1566609202, "post_id": 57603953, "comment_id": 101721854, "body": "Tell me that you aren&#39;t using a template with all this text and over formatting in there... <a href=\"https://stackoverflow.com/a/57622223/2386774\">one</a>, <a href=\"https://stackoverflow.com/a/57603953/2386774\">two</a>, <a href=\"https://stackoverflow.com/a/52535654/2386774\">three</a>, <a href=\"https://stackoverflow.com/a/57569478/2386774\">four</a> and those are just from the last few days."}, {"owner": {"reputation": 477, "user_id": 4552283, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e582c9db09173fe1dd8273ea186a66cd?s=128&d=identicon&r=PG&f=1", "display_name": "brianc", "link": "https://stackoverflow.com/users/4552283/brianc"}, "edited": false, "score": 0, "creation_date": 1580788675, "post_id": 57603953, "comment_id": 106203512, "body": "I found this answer helpful.  Not sure what the fuss is about."}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": true, "score": 1, "last_activity_date": 1583013458, "last_edit_date": 1583013458, "creation_date": 1566458297, "answer_id": 57603953, "question_id": 57600228, "link": "https://stackoverflow.com/questions/57600228/sessionnotcreatedexception-message-session-not-created-this-version-of-chrome/57603953#57603953", "title": "SessionNotCreatedException: Message: session not created: This version of ChromeDriver only supports Chrome version 76 with Selenium ChromeDriver", "body": "<p>This error message...</p>\n\n<pre><code>selenium.common.exceptions.SessionNotCreatedException: Message: session not created: This version of ChromeDriver only supports Chrome version 76\n</code></pre>\n\n<p>...implies that the <em>ChromeDriver</em> was unable to initiate/spawn a new <em>WebBrowser</em> i.e. <em>Chrome Browser</em> session.</p>\n\n<p>Your code trials and the error stack trace would have helped us to debug the issue in a better way. Though you mentioned about <em>compatible Chromedriver for linux</em> but your program while in execution picks up the <strong>ChromeDriver v76.0</strong>.</p>\n\n<p>Your main issue is the <strong>incompatibility</strong> between the version of the binaries you are using as follows:</p>\n\n<ul>\n<li>Release Notes of <a href=\"https://chromedriver.storage.googleapis.com/76.0.3809.12/notes.txt\" rel=\"nofollow noreferrer\"><em>chromedriver=76.0</em></a> clearly mentions the following :</li>\n</ul>\n\n<blockquote>\n  <p>Supports <strong>Chrome version 76</strong></p>\n</blockquote>\n\n<hr>\n\n<h2>Solution</h2>\n\n<p>Ensure you have:</p>\n\n<ul>\n<li>Deleted all the existing different versions of <em>Chromedriver</em> from your system.</li>\n<li><em>ChromeDriver</em> is updated to  current <em>ChromeDriver v76.0</em> level.</li>\n</ul>\n\n<blockquote>\n  <p>Additionally, ensure you pick up the latest release of <em>ChromeDriver v76.0</em> i.e. <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=76.0.3809.126/\" rel=\"nofollow noreferrer\">ChromeDriver v76.0.3809.126</a>.</p>\n</blockquote>\n\n<ul>\n<li><em>Chrome</em> is updated to  current <em>Chrome Version 76.0</em> level. (as per <a href=\"https://chromedriver.storage.googleapis.com/76.0.3809.68/notes.txt\" rel=\"nofollow noreferrer\">ChromeDriver v76.0 release notes</a>)</li>\n<li><em>Clean</em> your <em>Project Workspace</em> through your <em>IDE</em> and <em>Rebuild</em> your project with required dependencies only.</li>\n<li>If your base <em>Web Client</em> version is too old, then uninstall it through <a href=\"https://www.revouninstaller.com/revo_uninstaller_free_download.html\" rel=\"nofollow noreferrer\"><em>Revo Uninstaller</em></a> and install a recent GA and released version of <em>Web Client</em>.</li>\n<li>Take a <em>System Reboot</em>.</li>\n<li>Execute your <code>@Test</code> as <strong>non-root</strong> user.</li>\n<li>Always invoke <code>driver.quit()</code> within <code>tearDown(){}</code> method to close &amp; destroy the <em>WebDriver</em> and <em>Web Client</em> instances gracefully.</li>\n</ul>\n\n<hr>\n\n<h2>Reference</h2>\n\n<p>You can find a relevant detailed discussion in:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/50692358/how-to-work-with-a-specific-version-of-chromedriver-while-chrome-browser-gets-up/50697221#50697221\">How to work with a specific version of ChromeDriver while Chrome Browser gets updated automatically through Python selenium</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 916, "user_id": 11942970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f5e5add5299bd5d196671c804dd12?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza Lachi", "link": "https://stackoverflow.com/users/11942970/hamza-lachi"}, "is_accepted": false, "score": 1, "last_activity_date": 1566458511, "creation_date": 1566458511, "answer_id": 57604007, "question_id": 57600228, "link": "https://stackoverflow.com/questions/57600228/sessionnotcreatedexception-message-session-not-created-this-version-of-chrome/57604007#57604007", "title": "SessionNotCreatedException: Message: session not created: This version of ChromeDriver only supports Chrome version 76 with Selenium ChromeDriver", "body": "<p>This error implement:</p>\n\n<p>You need to download your version of chrome driver:</p>\n\n<p>You can download your version of chrome driver via clicking here:</p>\n\n<p><a href=\"https://chromedriver.storage.googleapis.com/index.html?path=75.0.3770.140/\" rel=\"nofollow noreferrer\">https://chromedriver.storage.googleapis.com/index.html?path=75.0.3770.140/</a></p>\n"}], "owner": {"reputation": 457, "user_id": 6949353, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/713a400d13af5d62bbf647e2eff87888?s=128&d=identicon&r=PG&f=1", "display_name": "AlexT", "link": "https://stackoverflow.com/users/6949353/alext"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5728, "favorite_count": 0, "accepted_answer_id": 57603953, "answer_count": 2, "score": 1, "last_activity_date": 1583013458, "creation_date": 1566429123, "last_edit_date": 1566458187, "question_id": 57600228, "link": "https://stackoverflow.com/questions/57600228/sessionnotcreatedexception-message-session-not-created-this-version-of-chrome", "title": "SessionNotCreatedException: Message: session not created: This version of ChromeDriver only supports Chrome version 76 with Selenium ChromeDriver", "body": "<p>I am currently using Chrome 75 and I've downloaded the <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=75.0.3770.140/\" rel=\"nofollow noreferrer\">compatible Chromedriver</a> for linux. I've also added it to the PATH variable. However, when I attempt initializing a driver with <code>driver = webdriver.Chrome()</code> I get the following error:</p>\n\n<pre><code>selenium.common.exceptions.SessionNotCreatedException: Message: session not created: This version of ChromeDriver only supports Chrome version 76\n</code></pre>\n\n<p>What I get from this message is that my Chromedriver is ment for Chrome version 76, but both my Chromedriver and Chrome browser are version 75.</p>\n\n<p>I even tried deleting the Chromedriver completely from my files and I still get the same error message</p>\n"}, {"tags": ["python", "set"], "comments": [{"owner": {"reputation": 1446, "user_id": 1930817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66Aja.jpg?s=128&g=1", "display_name": "guzmonne", "link": "https://stackoverflow.com/users/1930817/guzmonne"}, "edited": false, "score": 1, "creation_date": 1566429490, "post_id": 57600184, "comment_id": 101657648, "body": "Could you provide a sample of the code you have at the moment?"}, {"owner": {"reputation": 3240, "user_id": 10157759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c9NabIUCJts/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oyzFAfLJNxPqTgYUMTb4PPAZ7N5Q/mo/photo.jpg?sz=128", "display_name": "GZ0", "link": "https://stackoverflow.com/users/10157759/gz0"}, "edited": false, "score": 3, "creation_date": 1566434622, "post_id": 57600184, "comment_id": 101658540, "body": "Do you really need <b>all</b> combinations? If so, <b>all</b> supersets of a valid combination fufill the requirement and would need to be output as well. This makes the output size exponential."}, {"owner": {"reputation": 11, "user_id": 10066302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pp2CsWN0Wwc/AAAAAAAAAAI/AAAAAAAABJk/7wxgfK7lXJc/photo.jpg?sz=128", "display_name": "Ido Rozin", "link": "https://stackoverflow.com/users/10066302/ido-rozin"}, "edited": false, "score": 0, "creation_date": 1566464172, "post_id": 57600184, "comment_id": 101667006, "body": "Thanks for you answers guys! I am sorry about but I forgot to mention that I dont care about order (I want every possible combination at each size that matches) and the sets size should be 1-6 I am going to read your answers more deeply now"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10066302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pp2CsWN0Wwc/AAAAAAAAAAI/AAAAAAAABJk/7wxgfK7lXJc/photo.jpg?sz=128", "display_name": "Ido Rozin", "link": "https://stackoverflow.com/users/10066302/ido-rozin"}, "edited": false, "score": 0, "creation_date": 1566465367, "post_id": 57600590, "comment_id": 101667618, "body": "Thanks for your answer I will try that"}, {"owner": {"reputation": 11, "user_id": 10066302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pp2CsWN0Wwc/AAAAAAAAAAI/AAAAAAAABJk/7wxgfK7lXJc/photo.jpg?sz=128", "display_name": "Ido Rozin", "link": "https://stackoverflow.com/users/10066302/ido-rozin"}, "edited": false, "score": 0, "creation_date": 1566468385, "post_id": 57600590, "comment_id": 101669273, "body": "How can i limit the size of the sets to be between 1-6?"}, {"owner": {"reputation": 11, "user_id": 10066302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pp2CsWN0Wwc/AAAAAAAAAAI/AAAAAAAABJk/7wxgfK7lXJc/photo.jpg?sz=128", "display_name": "Ido Rozin", "link": "https://stackoverflow.com/users/10066302/ido-rozin"}, "edited": false, "score": 0, "creation_date": 1566469542, "post_id": 57600590, "comment_id": 101669925, "body": "I run that on the 500 elements array and printed len(c) it takes to much time to create all of the combinations that are in size of 5 or more. I probably just have to give up on this approach (of getting all of the possible sets) because there are just too many , thanks for your help!"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 11, "user_id": 10066302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pp2CsWN0Wwc/AAAAAAAAAAI/AAAAAAAABJk/7wxgfK7lXJc/photo.jpg?sz=128", "display_name": "Ido Rozin", "link": "https://stackoverflow.com/users/10066302/ido-rozin"}, "edited": false, "score": 0, "creation_date": 1566575020, "post_id": 57600590, "comment_id": 101712363, "body": "@IdoRozin Sorry for the late response! Unfortunately, this is a classical combinatorial problem (see <a href=\"https://en.wikipedia.org/wiki/Knapsack_problem\" rel=\"nofollow noreferrer\">Knapsack Problem</a>). It is certainly possible to continuously optimize a solution to gradually increase the sample size, however, after a point, the solution will fail. The benefit of an iterator, however, is that you can generate values on the fly. Please see my recent edit, as I provided a way to use the generator in the greater context of your problem."}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1566575106, "last_edit_date": 1566575106, "creation_date": 1566433074, "answer_id": 57600590, "question_id": 57600184, "link": "https://stackoverflow.com/questions/57600184/find-all-combinations-in-array-that-create-wanted-result/57600590#57600590", "title": "Find all combinations in array that create wanted result", "body": "<p>A possibility is to write a recursive function that can, as part of the combination formulation process, check if a tuple candidate provides a needed set of letters to help build a sequence containing all letters as required. This can partially increase efficiency:</p>\n\n<pre><code>data = [(1,'S'),(2,'P','S'),(3,'W','C'),(4,'T','C'),(5,'O','T','C'),(6,'O','S'),(7,'O'),(8,'P','O')]\nreq = ('S','P','C','T','O','W')\ndef group(d, c = []):\n   _c = {i for b in c for i in b if isinstance(i, str)}\n   if all(i in _c for i in req):\n      yield c\n   else:\n      for a, *b in d:\n         if not c or ((a, *b) not in c and any(i not in _c and i in req for i in b)) and len(c) + 1 &lt; 7:\n            yield from group(d, c+[(a, *b)])\n\n\nresult = list(group(data))\n</code></pre>\n\n<p>Output (first 22 results due to SO's post character limit):</p>\n\n<pre><code>[[(1, 'S'), (2, 'P', 'S'), (3, 'W', 'C'), (4, 'T', 'C'), (5, 'O', 'T', 'C')], [(1, 'S'), (2, 'P', 'S'), (3, 'W', 'C'), (4, 'T', 'C'), (6, 'O', 'S')], [(1, 'S'), (2, 'P', 'S'), (3, 'W', 'C'), (4, 'T', 'C'), (7, 'O')], [(1, 'S'), (2, 'P', 'S'), (3, 'W', 'C'), (4, 'T', 'C'), (8, 'P', 'O')], [(1, 'S'), (2, 'P', 'S'), (3, 'W', 'C'), (5, 'O', 'T', 'C')], [(1, 'S'), (2, 'P', 'S'), (3, 'W', 'C'), (6, 'O', 'S'), (4, 'T', 'C')], [(1, 'S'), (2, 'P', 'S'), (3, 'W', 'C'), (6, 'O', 'S'), (5, 'O', 'T', 'C')], [(1, 'S'), (2, 'P', 'S'), (3, 'W', 'C'), (7, 'O'), (4, 'T', 'C')], [(1, 'S'), (2, 'P', 'S'), (3, 'W', 'C'), (7, 'O'), (5, 'O', 'T', 'C')], [(1, 'S'), (2, 'P', 'S'), (3, 'W', 'C'), (8, 'P', 'O'), (4, 'T', 'C')], [(1, 'S'), (2, 'P', 'S'), (3, 'W', 'C'), (8, 'P', 'O'), (5, 'O', 'T', 'C')], [(1, 'S'), (2, 'P', 'S'), (4, 'T', 'C'), (3, 'W', 'C'), (5, 'O', 'T', 'C')], [(1, 'S'), (2, 'P', 'S'), (4, 'T', 'C'), (3, 'W', 'C'), (6, 'O', 'S')], [(1, 'S'), (2, 'P', 'S'), (4, 'T', 'C'), (3, 'W', 'C'), (7, 'O')], [(1, 'S'), (2, 'P', 'S'), (4, 'T', 'C'), (3, 'W', 'C'), (8, 'P', 'O')], [(1, 'S'), (2, 'P', 'S'), (4, 'T', 'C'), (5, 'O', 'T', 'C'), (3, 'W', 'C')], [(1, 'S'), (2, 'P', 'S'), (4, 'T', 'C'), (6, 'O', 'S'), (3, 'W', 'C')], [(1, 'S'), (2, 'P', 'S'), (4, 'T', 'C'), (7, 'O'), (3, 'W', 'C')], [(1, 'S'), (2, 'P', 'S'), (4, 'T', 'C'), (8, 'P', 'O'), (3, 'W', 'C')], [(1, 'S'), (2, 'P', 'S'), (5, 'O', 'T', 'C'), (3, 'W', 'C')], [(1, 'S'), (2, 'P', 'S'), (6, 'O', 'S'), (3, 'W', 'C'), (4, 'T', 'C')], [(1, 'S'), (2, 'P', 'S'), (6, 'O', 'S'), (3, 'W', 'C'), (5, 'O', 'T', 'C')]]\n</code></pre>\n\n<hr>\n\n<pre><code>for i in result:\n   _c = {a for b in i for a in b if isinstance(a, str)}\n   assert all(k in _c for k in req), i\n\nprint('successful')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>successful\n</code></pre>\n\n<p>Edit: obviously, running the solution on larger input samples will become more computationally expensive, however, a workaround to this can be to tailor the results to the greater context of your problem. Instead of loading the entire results of the generator into memory via <code>list</code>, you can use a loop to access each result from the generator on an as needed basis:</p>\n\n<pre><code>result = group(data)\nfor i in range(some_range):\n   #do something, if a combination is needed:\n   r = next(result)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 10066302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pp2CsWN0Wwc/AAAAAAAAAAI/AAAAAAAABJk/7wxgfK7lXJc/photo.jpg?sz=128", "display_name": "Ido Rozin", "link": "https://stackoverflow.com/users/10066302/ido-rozin"}, "edited": false, "score": 0, "creation_date": 1566463853, "post_id": 57600756, "comment_id": 101666850, "body": "Thanks for you answers guys! I am sorry about but I forgot to mention that I dont care about order (I want every possible combination at each size that matches) and the sets size should be 1-6 I am going to read your answers more deeply now"}, {"owner": {"reputation": 11, "user_id": 10066302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pp2CsWN0Wwc/AAAAAAAAAAI/AAAAAAAABJk/7wxgfK7lXJc/photo.jpg?sz=128", "display_name": "Ido Rozin", "link": "https://stackoverflow.com/users/10066302/ido-rozin"}, "edited": false, "score": 0, "creation_date": 1566464425, "post_id": 57600756, "comment_id": 101667138, "body": "Hi thanks for your answer! the solution your provided works great on little arrays but unfortunately it isnt going to work on bigger array ;/ (it will be very slow)"}], "tags": [], "owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "is_accepted": false, "score": 0, "last_activity_date": 1566439020, "last_edit_date": 1566439020, "creation_date": 1566435153, "answer_id": 57600756, "question_id": 57600184, "link": "https://stackoverflow.com/questions/57600184/find-all-combinations-in-array-that-create-wanted-result/57600756#57600756", "title": "Find all combinations in array that create wanted result", "body": "<pre><code>from itertools import combinations\n\ndata = [(1,'S'),(2,'P','S'),(3,'W','C'),(4,'T','C'),(5,'O','T','C'),(6,'O','S'),(7,'O'),(8,'P','O')]\nreq = ['S','P','C','T','O','W']\nreq.sort()\n\naccepted = list()\n\nfor x in range(3, 9):\n    for i in combinations(data, x):\n        value = list(set(y for x in i for y in x if str(y).isalpha()))\n        value.sort()\n        if req == value:\n            accepted.append(list(i))\n</code></pre>\n\n<ul>\n<li><code>x</code> represents the number of combination\n\n<ul>\n<li>the required condition can't be met for fewer than 3 combinations</li>\n<li>max number of combinations is 8, per the number of <code>tuples</code> in <code>data</code></li>\n</ul></li>\n<li>given <code>data</code> and <code>req</code>, <code>accepted</code> contains <strong>64</strong> combinations.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 10066302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pp2CsWN0Wwc/AAAAAAAAAAI/AAAAAAAABJk/7wxgfK7lXJc/photo.jpg?sz=128", "display_name": "Ido Rozin", "link": "https://stackoverflow.com/users/10066302/ido-rozin"}, "edited": false, "score": 0, "creation_date": 1566464305, "post_id": 57601013, "comment_id": 101667063, "body": "looks like a short and beautiful answer, since I dont care about every possible order im going to use itertools.combinations. Is there a way to limit the combinations size to 1-6?"}, {"owner": {"reputation": 11, "user_id": 10066302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pp2CsWN0Wwc/AAAAAAAAAAI/AAAAAAAABJk/7wxgfK7lXJc/photo.jpg?sz=128", "display_name": "Ido Rozin", "link": "https://stackoverflow.com/users/10066302/ido-rozin"}, "edited": false, "score": 0, "creation_date": 1566465561, "post_id": 57601013, "comment_id": 101667732, "body": "I have also made some changes and now each element in the list is an object (not a tuple) that his chars are located in a list (the name of the list is chars so if you want the chars list of the first element in start start[0].chars). is there a simple way to deal with that?"}, {"owner": {"reputation": 11, "user_id": 10066302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pp2CsWN0Wwc/AAAAAAAAAAI/AAAAAAAABJk/7wxgfK7lXJc/photo.jpg?sz=128", "display_name": "Ido Rozin", "link": "https://stackoverflow.com/users/10066302/ido-rozin"}, "edited": false, "score": 0, "creation_date": 1566467193, "post_id": 57601013, "comment_id": 101668625, "body": "I checked your answer (I changed itertools.permutations(good_sets) to itertools.combinations(good_sets,1))  and its not what I wanted (Its my bad I wasn&#39;t bright enough ) I want only the sets that have all of the letters in them which means that in this case the result should output None"}, {"owner": {"reputation": 1900, "user_id": 907872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3d38c6be9f2437c4933089adafd06658?s=128&d=identicon&r=PG", "display_name": "kagronick", "link": "https://stackoverflow.com/users/907872/kagronick"}, "reply_to_user": {"reputation": 11, "user_id": 10066302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pp2CsWN0Wwc/AAAAAAAAAAI/AAAAAAAABJk/7wxgfK7lXJc/photo.jpg?sz=128", "display_name": "Ido Rozin", "link": "https://stackoverflow.com/users/10066302/ido-rozin"}, "edited": false, "score": 0, "creation_date": 1576458129, "post_id": 57601013, "comment_id": 104894813, "body": "Then just change this part <code>len(i - good_values) != len(i)</code> to <code>not (i - good_values)</code>. It will tell you when the set is empty when you pull out all the good values."}], "tags": [], "owner": {"reputation": 1900, "user_id": 907872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3d38c6be9f2437c4933089adafd06658?s=128&d=identicon&r=PG", "display_name": "kagronick", "link": "https://stackoverflow.com/users/907872/kagronick"}, "is_accepted": false, "score": 0, "last_activity_date": 1566438417, "last_edit_date": 1566438417, "creation_date": 1566437965, "answer_id": 57601013, "question_id": 57600184, "link": "https://stackoverflow.com/questions/57600184/find-all-combinations-in-array-that-create-wanted-result/57601013#57601013", "title": "Find all combinations in array that create wanted result", "body": "<p>Python has lots of functions for dealing with stuff like this in the intertools module.</p>\n\n<pre><code>import itertools\n\nstart=[(1,'S'),(2,'P','S'),(3,'W','C'),(4,'T','C'),(5,'O','T','C'),(6,'O','S'),(7,'O'),(8,'P','O')]\ngood_values=set('S','P','C','T','O','W')\n\n# Turn the tuples into sets so you can do subtraction\nas_set=map(set, start)\n\n# If the set is smaller when you pull some good_values out it is a set you care about\ngood_sets=[i for i in as_set if len(i - good_values) != len(i)]\n\n# Now just ask Python for the permutations of these sets\nitertools.permutations(good_sets)\n</code></pre>\n\n<p>Use itertools.permutations if you care about getting every possible order of the items that match. Use itertools.combinations if you care about every possible combination at each size that matches and you don't care about order. Use combinations and then permutations on each combination if you need both but it will be very computationally expensive.</p>\n"}], "owner": {"reputation": 11, "user_id": 10066302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pp2CsWN0Wwc/AAAAAAAAAAI/AAAAAAAABJk/7wxgfK7lXJc/photo.jpg?sz=128", "display_name": "Ido Rozin", "link": "https://stackoverflow.com/users/10066302/ido-rozin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1566575106, "creation_date": 1566428747, "last_edit_date": 1566466932, "question_id": 57600184, "link": "https://stackoverflow.com/questions/57600184/find-all-combinations-in-array-that-create-wanted-result", "title": "Find all combinations in array that create wanted result", "body": "<p>Lets say we have array including id,chars like that:</p>\n\n<pre><code>[(1,'S'),(2,'P','S'),(3,'W','C'),(4,'T','C'),(5,'O','T','C'),(6,'O','S'),(7,'O'),(8,'P','O')]\n</code></pre>\n\n<p>Is there an efficient way to get all combinations that have in them all of the letters: ('S','P','C','T','O','W') ,(I don't want different orders), and their size is 1-6?</p>\n\n<p>So far I created powerset of the array and iterated through the powerset to find all combination that have all the wanted letters in them.\nIt worked perfectly until I scaled the array (the array is in size of 500+- which means that its powerset is in size of ~2^500). </p>\n\n<p>Example of a valid combination would be:</p>\n\n<pre><code>[(8,'P','O'),(2,'P','S'),(5,'O','T','C'),(3,'W','C')]'\n(Because it has ALL of the letters in it)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 1, "creation_date": 1566428851, "post_id": 57600167, "comment_id": 101657497, "body": "What about how you&#39;re calling it? what do you pass in as <code>s</code> ?"}, {"owner": {"reputation": 188, "user_id": 6713649, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e61b0eb5c34bb85c468c85f83ce8ba9c?s=128&d=identicon&r=PG&f=1", "display_name": "Munna", "link": "https://stackoverflow.com/users/6713649/munna"}, "edited": false, "score": 0, "creation_date": 1566429046, "post_id": 57600167, "comment_id": 101657548, "body": "<code>&gt;&gt;&gt; sample = Solution() &gt;&gt;&gt; sample.reverseString(&quot;hello&quot;) &#39;olleh</code> I don&#39;t get any error. Are you talking about specific case?"}, {"owner": {"reputation": 71, "user_id": 11959542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e940f5bea8938648d82b22caaa2ab9?s=128&d=identicon&r=PG&f=1", "display_name": "BigBro666", "link": "https://stackoverflow.com/users/11959542/bigbro666"}, "edited": false, "score": 0, "creation_date": 1566429070, "post_id": 57600167, "comment_id": 101657555, "body": "s is type s: List[str]"}, {"owner": {"reputation": 1216, "user_id": 2242761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde25d431468b980cd1930747112c6f1?s=128&d=identicon&r=PG", "display_name": "Dilshad Abduwali", "link": "https://stackoverflow.com/users/2242761/dilshad-abduwali"}, "edited": false, "score": 0, "creation_date": 1566429157, "post_id": 57600167, "comment_id": 101657579, "body": "doc string says modify in-place, but Python strings are immutable, so in-place modification is impossible. and the method is returning str."}, {"owner": {"reputation": 188, "user_id": 6713649, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e61b0eb5c34bb85c468c85f83ce8ba9c?s=128&d=identicon&r=PG&f=1", "display_name": "Munna", "link": "https://stackoverflow.com/users/6713649/munna"}, "edited": false, "score": 1, "creation_date": 1566429386, "post_id": 57600167, "comment_id": 101657626, "body": "s[0] is a string, not a list use s[:1] instead"}, {"owner": {"reputation": 71, "user_id": 11959542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e940f5bea8938648d82b22caaa2ab9?s=128&d=identicon&r=PG&f=1", "display_name": "BigBro666", "link": "https://stackoverflow.com/users/11959542/bigbro666"}, "edited": false, "score": 0, "creation_date": 1566429605, "post_id": 57600167, "comment_id": 101657675, "body": "Sample input and ouput: Input: [&quot;h&quot;,&quot;e&quot;,&quot;l&quot;,&quot;l&quot;,&quot;o&quot;] Output: [&quot;o&quot;,&quot;l&quot;,&quot;l&quot;,&quot;e&quot;,&quot;h&quot;]"}, {"owner": {"reputation": 71, "user_id": 11959542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e940f5bea8938648d82b22caaa2ab9?s=128&d=identicon&r=PG&f=1", "display_name": "BigBro666", "link": "https://stackoverflow.com/users/11959542/bigbro666"}, "reply_to_user": {"reputation": 188, "user_id": 6713649, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e61b0eb5c34bb85c468c85f83ce8ba9c?s=128&d=identicon&r=PG&f=1", "display_name": "Munna", "link": "https://stackoverflow.com/users/6713649/munna"}, "edited": false, "score": 0, "creation_date": 1566429896, "post_id": 57600167, "comment_id": 101657747, "body": "@Munna When i tried [:1], the error becomes &quot;TypeError: unsupported operand type(s) for +: &#39;NoneType&#39; and &#39;list&#39;&quot;"}, {"owner": {"reputation": 596, "user_id": 10837503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OVTQZ.jpg?s=128&g=1", "display_name": "Parijat Bhatt", "link": "https://stackoverflow.com/users/10837503/parijat-bhatt"}, "edited": false, "score": 0, "creation_date": 1566430479, "post_id": 57600167, "comment_id": 101657868, "body": "return s if len(s)==1. it will work"}], "answers": [{"comments": [{"owner": {"reputation": 3240, "user_id": 10157759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c9NabIUCJts/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oyzFAfLJNxPqTgYUMTb4PPAZ7N5Q/mo/photo.jpg?sz=128", "display_name": "GZ0", "link": "https://stackoverflow.com/users/10157759/gz0"}, "edited": false, "score": 1, "creation_date": 1566432331, "post_id": 57600300, "comment_id": 101658178, "body": "A minor improvement: swapping variables can be done without using a temporary variable in Python."}], "tags": [], "owner": {"reputation": 43, "user_id": 11742221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b743a31209e604e14f8ae2b685b2b5d1?s=128&d=identicon&r=PG&f=1", "display_name": "nullptr", "link": "https://stackoverflow.com/users/11742221/nullptr"}, "is_accepted": true, "score": 0, "last_activity_date": 1566433768, "last_edit_date": 1566433768, "creation_date": 1566429948, "answer_id": 57600300, "question_id": 57600167, "link": "https://stackoverflow.com/questions/57600167/reverse-the-string-by-using-recursion/57600300#57600300", "title": "Reverse the String by using recursion", "body": "<p>Your input is a list of strings and the question specifies not to return anything and modify the list in-place. In Python, strings themselves are immutable, but because lists are mutable you are able to essentially swap and move these elements around because they're in a mutable structure like a list.</p>\n\n<p>Note: This also is able to be done in an iterative manner. Based on your example, I am showing a recursive sample.</p>\n\n<pre><code>x= [\"h\",\"e\",\"l\",\"l\",\"o\"]\ndef reverseString(s,start,end):\n        \"\"\"\n        :type s: List[str]\n        :rtype: None Do not return anything, modify s in-place instead.\n        \"\"\"\n        if start &gt; end:\n            return\n\n        # swap the ends if the indices are valid\n        s[start], s[end] = s[end], s[start] \n\n        reverseString(s,start+1,end-1)\n\nreverseString(x,0,len(x)-1)\nprint(x)\n</code></pre>\n\n<pre><code>Output: ['o', 'l', 'l', 'e', 'h']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2091, "user_id": 8407784, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jd1jX.jpg?s=128&g=1", "display_name": "Roberto Gon&#231;alves", "link": "https://stackoverflow.com/users/8407784/roberto-gon%c3%a7alves"}, "is_accepted": false, "score": 0, "last_activity_date": 1566430360, "creation_date": 1566430360, "answer_id": 57600344, "question_id": 57600167, "link": "https://stackoverflow.com/questions/57600167/reverse-the-string-by-using-recursion/57600344#57600344", "title": "Reverse the String by using recursion", "body": "<p>You want to use the same recursive function to do both <strong>string</strong> and <strong>list</strong> types, but in python, those types are different from each other related to concatenation. So, in this case you need to develop two different functions OR converting a list to a string or a string to a list.</p>\n\n<p>This could do both implementations:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Solution(object):\n    def reverseString(self, s):\n\n        \"\"\"\n        :type s: List[str]\n        :rtype: None Do not return anything, modify s in-place instead.\n        \"\"\"\n        if len(s) == 0:\n            return s\n        else:\n            return self.reverseString(s[1:]) + s[0]\n    def reverseList(self, l):\n        if len(l) == 0: return []\n        return [l[-1]] + self.reverseList(l[:-1])\n\ninstance = Solution()\nmystring = \"hello\"\nmylist = ['h','e', 'l','l','o']\nprint(instance.reverseList(mylist))#['o', 'l', 'l', 'e', 'h']\nprint(instance.reverseString(mystring))#olleh\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 9416534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZuGG6s5aQsY/AAAAAAAAAAI/AAAAAAAAAKI/WkyAM8d6QRI/photo.jpg?sz=128", "display_name": "Phuong D.", "link": "https://stackoverflow.com/users/9416534/phuong-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1566432019, "creation_date": 1566432019, "answer_id": 57600511, "question_id": 57600167, "link": "https://stackoverflow.com/questions/57600167/reverse-the-string-by-using-recursion/57600511#57600511", "title": "Reverse the String by using recursion", "body": "<p>As s[0] is string type, it cannot be concatenated to list. Change to this:</p>\n\n<pre><code>    if len(s) == 0:\n        return s\n    else:\n        return self.reverseString(s[1:]) + [s[0]]\n</code></pre>\n\n<p>and the problem's solved.</p>\n"}], "owner": {"reputation": 71, "user_id": 11959542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1e940f5bea8938648d82b22caaa2ab9?s=128&d=identicon&r=PG&f=1", "display_name": "BigBro666", "link": "https://stackoverflow.com/users/11959542/bigbro666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 57600300, "answer_count": 3, "score": 0, "last_activity_date": 1566438644, "creation_date": 1566428674, "last_edit_date": 1566438644, "question_id": 57600167, "link": "https://stackoverflow.com/questions/57600167/reverse-the-string-by-using-recursion", "title": "Reverse the String by using recursion", "body": "<p>When I ran the code, the console showed the <code>TypeError</code> was: </p>\n\n<blockquote>\n  <p>TypeError: can only concatenate list (not \"unicode\") to list</p>\n</blockquote>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Solution(object):\n    def reverseString(self, s):\n        \"\"\"\n        :type s: List[str]\n        :rtype: None Do not return anything, modify s in-place instead.\n        \"\"\"\n        if len(s) == 0:\n            return s\n        else:\n            return self.reverseString(s[1:]) + s[0]\n</code></pre>\n"}, {"tags": ["python", "node.js", "sockets", "websocket", "electron"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 1885449, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bfbd2fae74b4443ed77f62b52d2bcefb?s=128&d=identicon&r=PG", "display_name": "Alroc", "link": "https://stackoverflow.com/users/1885449/alroc"}, "edited": false, "score": 1, "creation_date": 1572346102, "post_id": 57617153, "comment_id": 103522778, "body": "Yep that was it, thank you very much for this solution !"}], "tags": [], "owner": {"reputation": 459, "user_id": 4230336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/132f17aa2d18474ae116fd1ae63761ea?s=128&d=identicon&r=PG&f=1", "display_name": "Ediolot", "link": "https://stackoverflow.com/users/4230336/ediolot"}, "is_accepted": true, "score": 4, "last_activity_date": 1566508590, "creation_date": 1566508590, "answer_id": 57617153, "question_id": 57600153, "link": "https://stackoverflow.com/questions/57600153/error-400-bad-request-when-connecting-socket-from-electron-ui-to-python-server/57617153#57617153", "title": "Error 400 (Bad Request) when connecting socket from electron UI to python server", "body": "<p>In case someone hits the same problem. The answer is pretty simple, from the documentation for socket.io <a href=\"https://python-socketio.readthedocs.io/en/latest/server.html#cross-origin-controls\" rel=\"nofollow noreferrer\">here</a>: </p>\n\n<blockquote>\n  <p>For security reasons, this server enforces a same-origin policy by\n  default. In practical terms, this means the following:</p>\n  \n  <ul>\n  <li>If an incoming HTTP or WebSocket request includes the Origin header, this header must match the scheme and host of the connection\n  URL. In case of a mismatch, a 400 status code response is returned and\n  the connection is rejected.</li>\n  <li>No restrictions are imposed on incoming requests that do not include the Origin header.</li>\n  </ul>\n  \n  <p>If necessary, the cors_allowed_origins option can be used to allow\n  other origins. This argument can be set to a string to set a single\n  allowed origin, or to a list to allow multiple origins. A special\n  value of '*' can be used to instruct the server to allow all origins,\n  but this should be done with care, as this could make the server\n  vulnerable to Cross-Site Request Forgery (CSRF) attacks.</p>\n</blockquote>\n\n<p>When using electron to load the gui, the server is not the same as the python server that's doing the monitoring, thus the Bad Request (not same origin). The solution is to just modify as follows the server properties adding <code>cors_allowed_origins='*'</code>:</p>\n\n<pre><code>socketio.AsyncServer(async_mode='aiohttp', cors_allowed_origins='*')\n</code></pre>\n"}], "owner": {"reputation": 459, "user_id": 4230336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/132f17aa2d18474ae116fd1ae63761ea?s=128&d=identicon&r=PG&f=1", "display_name": "Ediolot", "link": "https://stackoverflow.com/users/4230336/ediolot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4722, "favorite_count": 0, "accepted_answer_id": 57617153, "answer_count": 1, "score": 3, "last_activity_date": 1566508590, "creation_date": 1566428571, "question_id": 57600153, "link": "https://stackoverflow.com/questions/57600153/error-400-bad-request-when-connecting-socket-from-electron-ui-to-python-server", "title": "Error 400 (Bad Request) when connecting socket from electron UI to python server", "body": "<p>Im having some problem when joining Electron and Python using web sockets (mostly as a learning experience):</p>\n\n<ul>\n<li><p>Build a desktop app using Electron <strong>Ok</strong></p></li>\n<li><p>Build a Python program that monitors <em>some things</em> <strong>Ok</strong></p></li>\n<li><p>Connect Python with Electron using socket.io <strong>Not working</strong></p></li>\n</ul>\n\n<p>First I tested socket.io in python with the 'latency' example in <a href=\"https://github.com/miguelgrinberg/python-socketio/tree/master/examples/server/aiohttp\" rel=\"nofollow noreferrer\">https://github.com/miguelgrinberg/python-socketio/tree/master/examples/server/aiohttp</a>. It worked great when I took a look at <a href=\"http://localhost:8080/\" rel=\"nofollow noreferrer\">http://localhost:8080/</a> in Chrome.</p>\n\n<p>The next step was to ask Electron to load the same url in the desktop app with <code>mainWindow.loadURL('http://localhost:8080')</code> (I used the template from the official <code>electron-quick-start</code> example). I just had to add two lines into the html as shown in here: <a href=\"https://stackoverflow.com/questions/32621988/electron-jquery-is-not-defined\">Electron: jQuery is not defined</a> for jquery to load correctly in Electron, but it again worked nicely.</p>\n\n<p>Now I tried to create an <code>index.html</code> with the same content as <code>latency.html</code> and load it with <code>mainWindow.loadFile('gui/index.html')</code>. I changed the line <code>var socket = io.connect();</code> for <code>var socket = io.connect('ws://localhost:8080');</code> (I did also tried <code>ws://127.0.0.1:8080</code> and <code>ws://192.168.&lt;x&gt;.&lt;x&gt;:8080</code>). The html file loads correctly but the socket begins to connect and disconnect repeatedly with a Bad Request error (I added two console.log lines):</p>\n\n<pre><code>(console.log) connected\n(error)       POST http://localhost:8080/socket.io/?EIO=3&amp;transport=polling&amp;t=MosNuF3&amp;sid=c62ce5a6090c4b72bf3f7c6916da6ce7 400 (Bad Request)   **polling-xhr.js:264**\n(console.log) disconnected\n(warning)     websocket.js:235 WebSocket connection to 'ws://localhost:8080/socket.io/?EIO=3&amp;transport=websocket&amp;sid=c62ce5a6090c4b72bf3f7c6916da6ce7' failed: WebSocket is closed before the connection is established.\n(error)       POST http://localhost:8080/socket.io/?EIO=3&amp;transport=polling&amp;t=MosNuFS&amp;sid=c62ce5a6090c4b72bf3f7c6916da6ce7 400 (Bad Request)   **polling-xhr.js:264**\n(console.log) connected\netc...\n(console.log) disconnected\netc...\n</code></pre>\n\n<p>On the server side there is also an error when I stop the Electron app: </p>\n\n<pre><code>Unhandled exception\nTraceback (most recent call last):\n  File \"D:\\Programming\\Tools\\Anaconda3\\lib\\site-packages\\aiohttp\\web_protocol.py\", line 447, in start\n    await resp.prepare(request)\n  File \"D:\\Programming\\Tools\\Anaconda3\\lib\\site-packages\\aiohttp\\web_response.py\", line 353, in prepare\n    return await self._start(request)\n  File \"D:\\Programming\\Tools\\Anaconda3\\lib\\site-packages\\aiohttp\\web_response.py\", line 667, in _start\n    return await super()._start(request)\n  File \"D:\\Programming\\Tools\\Anaconda3\\lib\\site-packages\\aiohttp\\web_response.py\", line 410, in _start\n    await writer.write_headers(status_line, headers)\n  File \"D:\\Programming\\Tools\\Anaconda3\\lib\\site-packages\\aiohttp\\http_writer.py\", line 112, in write_headers\n    self._write(buf)\n  File \"D:\\Programming\\Tools\\Anaconda3\\lib\\site-packages\\aiohttp\\http_writer.py\", line 67, in _write\n    raise ConnectionResetError('Cannot write to closing transport')\nConnectionResetError: Cannot write to closing transport\n</code></pre>\n\n<p>What does this Bad Request error mean in this context ? How would the connection work correctly ? </p>\n\n<p>Thanks. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 93, "user_id": 593191, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/97a5c45b5e054e0883fbc413af2d4890?s=128&d=identicon&r=PG", "display_name": "David Freeman", "link": "https://stackoverflow.com/users/593191/david-freeman"}, "edited": false, "score": 0, "creation_date": 1566428958, "post_id": 57600143, "comment_id": 101657527, "body": "You don&#39;t show your whole code so we can&#39;t see how you are creating the object.  Try something like (2 lines)  x = Product(0, 4, &#39;Personal Computers&#39;, &#39;8 inch&#39;, 104, &#39;Nvidia&#39;, 10, 299.0) and then print product.get_product_details()"}, {"owner": {"reputation": 19, "user_id": 11959548, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8R8SULEZXpo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reouFk0JkH9yAAzyn5VLXXY7uIkMw/photo.jpg?sz=128", "display_name": "Rikio", "link": "https://stackoverflow.com/users/11959548/rikio"}, "reply_to_user": {"reputation": 93, "user_id": 593191, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/97a5c45b5e054e0883fbc413af2d4890?s=128&d=identicon&r=PG", "display_name": "David Freeman", "link": "https://stackoverflow.com/users/593191/david-freeman"}, "edited": false, "score": 0, "creation_date": 1566429271, "post_id": 57600143, "comment_id": 101657602, "body": "Edited my original post, not sure if that will help."}], "answers": [{"tags": [], "owner": {"reputation": 746, "user_id": 1628053, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/886bdbe80a2f6b86b61d0ec52a890e1f?s=128&d=identicon&r=PG", "display_name": "Alex Fish", "link": "https://stackoverflow.com/users/1628053/alex-fish"}, "is_accepted": false, "score": 1, "last_activity_date": 1566429597, "creation_date": 1566429597, "answer_id": 57600273, "question_id": 57600143, "link": "https://stackoverflow.com/questions/57600143/how-to-test-a-class-and-its-method/57600273#57600273", "title": "How to Test a class and its method", "body": "<p><code>product2</code> can be passed as <a href=\"http://book.pythontips.com/en/latest/args_and_kwargs.html\" rel=\"nofollow noreferrer\">kwargs</a> dict.</p>\n\n<p>Then you can call your function for the instance you created:</p>\n\n<pre><code>prod = Product(**product2)\nprod.set_product_name('star')\nprint (prod.get_product_details())\nstar 8 inch Display (1920x1200) ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1336, "user_id": 8763097, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07748010c90ca48d262a588483d84367?s=128&d=identicon&r=PG&f=1", "display_name": "PeptideWitch", "link": "https://stackoverflow.com/users/8763097/peptidewitch"}, "edited": false, "score": 0, "creation_date": 1566430556, "post_id": 57600295, "comment_id": 101657883, "body": "Whoa. That&#39;s amazing, I didn&#39;t know you could do that with dictionary keys. What happens if there isn&#39;t a 1 for 1 match between the class keywords and the dict keys? Will it do as many as possible, or will it error out?"}], "tags": [], "owner": {"reputation": 106, "user_id": 11959567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a889f9e3da8b1de7c4dcaa27c5f50d1c?s=128&d=identicon&r=PG&f=1", "display_name": "deseuler", "link": "https://stackoverflow.com/users/11959567/deseuler"}, "is_accepted": false, "score": 3, "last_activity_date": 1566429896, "creation_date": 1566429896, "answer_id": 57600295, "question_id": 57600143, "link": "https://stackoverflow.com/questions/57600143/how-to-test-a-class-and-its-method/57600295#57600295", "title": "How to Test a class and its method", "body": "<p>Pro tip: use unpacking to deliver keyword arguments to a class method.</p>\n\n<p>This can be done by changing your class to the following:</p>\n\n<pre><code>class Product:\n    def __init__(self, discontinued=None, lead_time_days=None, product_category=None, product_description=None, product_id=None, product_name=None, reorder_level=None, unit_price=None):\n        self.discontinued = discontinued\n        self.product_category = product_category\n        self.product_description = product_description\n        self.product_id = product_id\n        self.product_name = product_name\n        self.reorder_level = reorder_level\n        self.unit_price = unit_price\n\n    def set_product_name(self, value):\n        self.product_name = value\n\n    def get_product_details(self):\n        return self.product_name + \" \" + self.product_description\n</code></pre>\n\n<p>By giving your arguments default values (e.g. discontinued=None) it makes them keyword arguments. This is helpful if you have a dictionary or a large number of inputs to a function.</p>\n\n<p>To create the object/instantiate the class you can call:</p>\n\n<pre><code>obj = Product(**product2)\n</code></pre>\n\n<p>**product2 basically means:</p>\n\n<pre><code>discontinued=0,lead_time_days=4,product_category=\"Personal Computers\",product_description=\"8 inch Display (1920x1200) ...\",product_id=104,product_name=\"NVIDIA SHIELD Tablet (WiFi)\",reorder_level=10,unit_price=299.0\n</code></pre>\n\n<p>After the object is instantiated you call its methods using dot notation:</p>\n\n<pre><code>obj.set_product_name('new name')\nprint(obj.get_product_details())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 743, "user_id": 2913477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b126939c105b8d71b18f93c6850e55f1?s=128&d=identicon&r=PG&f=1", "display_name": "MiniMax", "link": "https://stackoverflow.com/users/2913477/minimax"}, "is_accepted": false, "score": 0, "last_activity_date": 1566486557, "creation_date": 1566486557, "answer_id": 57612399, "question_id": 57600143, "link": "https://stackoverflow.com/questions/57600143/how-to-test-a-class-and-its-method/57612399#57612399", "title": "How to Test a class and its method", "body": "<p><strong>1.</strong> Your testing code doesn't comply to the requirement \"pass the whole product2 object, not individual attributes\". You pass individual attributes:</p>\n\n<pre><code>prod = Product(product2[\"discontinued\"], product2[\"product_category\"], product2['product_description'], product2['product_id'], product2['product_name'],product2['reorder_level'],product2['unit_price'])\n</code></pre>\n\n<p><strong>2.</strong> The <a href=\"https://docs.python.org/3/library/functions.html#setattr\" rel=\"nofollow noreferrer\">setattr(object, name, value)</a> function will be handy in your case.</p>\n\n<p><strong>My solution:</strong></p>\n\n<pre><code>product2 = { \n    \"discontinued\": 0,\n    \"lead_time_days\": 4,\n    \"product_category\": \"Personal Computers\",\n    \"product_description\": \"8 inch Display (1920x1200) ...\",\n    \"product_id\": 104,\n    \"product_name\": \"NVIDIA SHIELD Tablet (WiFi)\",\n    \"reorder_level\": 10, \n    \"unit_price\": 299.0\n}\n\nclass Product:\n    def __init__(self, specification):\n        for key, value in specification.items():\n            setattr(self, key, value) \n\n    def set_product_name(self, value):\n        self.product_name = value\n\n    def get_product_details(self):\n        return f'{self.product_name} - {self.product_description}'\n\n###Test\n# Instantiate an object of the class (name it prod) and pass product2 to\n# the initialiser (pass the whole product2 object, not individual attributes)\nprod = Product(product2)\n\n# Set the product_name to something different by calling set_product_name()\n# and passing it an appropriate parameter\nprod.set_product_name('Another Tablet')\n\n# Call get_product_details() to get the product name and\n# description (and print it)\nprint(prod.get_product_details())\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11959548, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8R8SULEZXpo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reouFk0JkH9yAAzyn5VLXXY7uIkMw/photo.jpg?sz=128", "display_name": "Rikio", "link": "https://stackoverflow.com/users/11959548/rikio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1566486557, "creation_date": 1566428520, "last_edit_date": 1566429085, "question_id": 57600143, "link": "https://stackoverflow.com/questions/57600143/how-to-test-a-class-and-its-method", "title": "How to Test a class and its method", "body": "<p>New to Python, Got an error that i am unsure how to fix. Trying to answer a home work question. I am a bit confused on how to test the class and its methods, Which is part 2 of the question. Is there a special way of doing it? </p>\n\n<blockquote>\n  <p>Write a class to represent a Product as per following specifications:</p>\n  \n  <p>Class name: Product (note uppercase \"P\")</p>\n  \n  <p>Define instance attributes as specified by the items in dictionary\n  object product2 i.e. discontinued, lead_time_days, etc.</p>\n  \n  <p>Define an <strong>init</strong>() method which initialises the instance attributes\n  to the value of the parameters passed to the method</p>\n  \n  <p>Define a set_product_name() method which sets the product_name in the\n  instance variable to the value of the parameter passed</p>\n  \n  <p>Define a get_product_details() method which returns the product\n  details formatted as \"product_name - product_description\"</p>\n  \n  <p>After having defined the class, you need to test the class and its\n  methods to show that it works. You can do this as follows:</p>\n  \n  <p>Instantiate an object of the class (name it prod) and pass product2 to\n  the initialiser (pass the whole product2 object, not individual\n  attributes)</p>\n  \n  <p>Set the product_name to something different by calling\n  set_product_name() and passing it an appropriate parameter</p>\n  \n  <p>Call get_product_details() to get the product name and description\n  (and print it)</p>\n</blockquote>\n\n<p>Code:</p>\n\n<pre><code>product2 = {\n    \"discontinued\": 0,\n    \"lead_time_days\": 4,\n    \"product_category\": \"Personal Computers\",\n    \"product_description\": \"8 inch Display (1920x1200) ...\",\n    \"product_id\": 104,\n    \"product_name\": \"NVIDIA SHIELD Tablet (WiFi)\",\n    \"reorder_level\": 10,\n    \"unit_price\": 299.0\n}\n# My Code\nclass Product:\n    def __init__(self, discontinued, lead_time_days, product_category, product_description, product_id, product_name, reorder_level, unit_price):\n        self.discontinued = discontinued\n        self.product_category = product_category\n        self.product_description = product_description\n        self.product_id = product_id\n        self.product_name = product_name\n        self.reorder_level = reorder_level\n        self.unit_price = unit_price\n\n    def set_product_name(self, value):\n        self.product_name = value\n\n    def get_product_details(self):\n        return self.product_name + \" \" + self.product_description\n</code></pre>\n\n<h1>Edit 1</h1>\n\n<p>I tried this but i know its wrong.</p>\n\n<pre><code>prod = Product(product2[\"discontinued\"], product2[\"product_category\"], product2['product_description'], product2['product_id'], product2['product_name'],product2['reorder_level'],product2['unit_price'])\n\nprod.set_product_name('star')\n\nprint ('get_product_details'())\n</code></pre>\n"}, {"tags": ["python", "string", "pandas", "text", "replace"], "answers": [{"comments": [{"owner": {"reputation": 633, "user_id": 6598999, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6fa0e5e15ea01d78b8cb413b2e36dcb3?s=128&d=identicon&r=PG&f=1", "display_name": "SFC", "link": "https://stackoverflow.com/users/6598999/sfc"}, "edited": false, "score": 0, "creation_date": 1566444353, "post_id": 57601576, "comment_id": 101660075, "body": "Thanks for your help. I tried running the code above and I get an error <code>NameError: name &#39;masked_tokens&#39; is not defined</code>"}], "tags": [], "owner": {"reputation": 355, "user_id": 11858455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/90RPN.jpg?s=128&g=1", "display_name": "KurtMica", "link": "https://stackoverflow.com/users/11858455/kurtmica"}, "is_accepted": true, "score": 1, "last_activity_date": 1566495189, "last_edit_date": 1566495189, "creation_date": 1566443693, "answer_id": 57601576, "question_id": 57600096, "link": "https://stackoverflow.com/questions/57600096/alter-specific-characters-in-pandas/57601576#57601576", "title": "alter specific characters in pandas", "body": "<p>You want each ordered occurrence of the <code>P_Name</code> sequence in the <code>Text</code> tokens. This can be achieved by iteratng over the <code>Text</code> tokens &amp; checking for equality on the entire <code>P_Name</code> tokens:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df[\"New_Text\"] = df[\"Text\"].apply(lambda tokens: tokens.copy())  # copy original tokens\nfor tokens, name in zip(df[\"New_Text\"], df[\"P_Name\"]):\n    for i, token in enumerate(tokens):\n        if tokens[i:i + len(name)] == name:\n            tokens[i:i + len(name)] = [\"**block**\"] * len(tokens[i:i + len(name)])\n</code></pre>\n\n<p>Depending on your use case you might have the untokenised <code>Text</code> (&amp; <code>P_name</code>) available. If so, then substring matching can be done instead, &amp; then perform tokenisation after.</p>\n"}], "owner": {"reputation": 633, "user_id": 6598999, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6fa0e5e15ea01d78b8cb413b2e36dcb3?s=128&d=identicon&r=PG&f=1", "display_name": "SFC", "link": "https://stackoverflow.com/users/6598999/sfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57601576, "answer_count": 1, "score": 1, "last_activity_date": 1566495189, "creation_date": 1566428185, "question_id": 57600096, "link": "https://stackoverflow.com/questions/57600096/alter-specific-characters-in-pandas", "title": "alter specific characters in pandas", "body": "<p><strong>Background</strong></p>\n\n<p>I have the following <code>df</code> which contains tokenized <code>Text</code> and <code>P_Name</code> columns and is a modification of <a href=\"https://stackoverflow.com/questions/57262864/including-word-boundary-in-string-modification-to-be-more-specific\">including word boundary in string modification to be more specific</a></p>\n\n<pre><code>P_Name = [list(['Steven', 'I','Jobs']),\n          list(['A', 'Ma', 'Mary']),\n          list(['U','Kar', 'Jacob'])]\n\nText =  [list(['Steven', 'I','Jobs', 'likes', 'apples','I', 'too']),\n        list(['A','i', 'like', 'A', 'lot', 'of','sports','cares', 'A', 'Ma', 'Mary']),\n        list(['the','U', 'Kar', 'Jacob', 'what', 'about', 'U', 'huh','?'])]\n\nimport pandas as pd\ndf = pd.DataFrame({'Text' : Text,  \n                  'P_ID': [1,2,3], \n                  'P_Name' : P_Name,\n\n                 })\ndf\n   P_ID    P_Name            Text\n0   1   [Steven, I, Jobs]   [Steven, I, Jobs, likes, apples, I, too]\n1   2   [A, Ma, Mary]       [A, i, like, A, lot, of, sports, cares, A, Ma, Mary]\n2   3   [U, Kar, Jacob]     [the, U, Kar, Jacob, what, about, U, huh, ?]\n</code></pre>\n\n<p><strong>Goal</strong></p>\n\n<p>1) use the name in <code>P_Name</code> to block the corresponding text in the <code>Text</code> column by placing <code>**block**</code></p>\n\n<p>2) produce a new column <code>New_Text</code></p>\n\n<p><strong>Tried</strong></p>\n\n<p>From <a href=\"https://stackoverflow.com/questions/57262864/including-word-boundary-in-string-modification-to-be-more-specific\">including word boundary in string modification to be more specific</a></p>\n\n<p>I have modified the code and tried the following</p>\n\n<pre><code>df['New_Text']=[pd.Series(x).replace(dict.fromkeys(y,'**block**') ).str.cat(sep=' ')for x , y in zip(df['Text'],df['P_Name'])]\n</code></pre>\n\n<p>Which gives close to what I want but not quite since some letters are being inappropriately labeled <code>**block**</code>  e.g <code>I</code> in row <code>0</code>  </p>\n\n<pre><code> P_ID P_Name Text New_Text\n    0             [**block**, **block**, **block**, likes, apples, **block**, too]\n    1             [**block**, i, like, **block**, lot, of, sports, cares, **block**, **block**, **block**]\n    2             [the, **block**, **block**, **block**, what, about, **block**, huh, ?]\n</code></pre>\n\n<p><strong>Desired Output</strong></p>\n\n<pre><code>P_ID P_Name Text New_Text\n    0              [**block**, **block**, **block**, likes, apples, I, too]\n    1              [A, i, like, A, lot, of, sports, cares, **block**, **block**, **block**]\n    2              [the, **block**, **block**, **block**, what, about, U, huh, ?]\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<p>How do I further modify </p>\n\n<pre><code>df['New_Text']=[pd.Series(x).replace(dict.fromkeys(y,'**block**') ).str.cat(sep=' ')for x , y in zip(df['Text'],df['P_Name'])]\n</code></pre>\n\n<p>or use new code to achieve my desired output?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 2611, "user_id": 11633355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4pV83.png?s=128&g=1", "display_name": "Anna Nevison", "link": "https://stackoverflow.com/users/11633355/anna-nevison"}, "edited": false, "score": 0, "creation_date": 1566435469, "post_id": 57600069, "comment_id": 101658651, "body": "I am reading this as <code>df1</code> is what you are hoping to get and <code>df</code> are your inputs- and you are using rows <code>T</code> and <code>t</code> to solve for the values in <code>a</code>? What is the equation that takes <code>T</code> and <code>t</code> and gives you <code>a</code>? the code you wrote is not very clear"}, {"owner": {"reputation": 173, "user_id": 8993099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7bd1cc3c66dd37deeec9b7a1fb087a?s=128&d=identicon&r=PG&f=1", "display_name": "sulphur", "link": "https://stackoverflow.com/users/8993099/sulphur"}, "reply_to_user": {"reputation": 2611, "user_id": 11633355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4pV83.png?s=128&g=1", "display_name": "Anna Nevison", "link": "https://stackoverflow.com/users/11633355/anna-nevison"}, "edited": false, "score": 0, "creation_date": 1566489389, "post_id": 57600069, "comment_id": 101681394, "body": "Yes df1 is the outcome I wish. As mentioned a grows with t as in time, for one 1 t it grows 40 but only until it reached 620 than is goes down in a rate for 40 per 1t."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 8993099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7bd1cc3c66dd37deeec9b7a1fb087a?s=128&d=identicon&r=PG&f=1", "display_name": "sulphur", "link": "https://stackoverflow.com/users/8993099/sulphur"}, "edited": false, "score": 0, "creation_date": 1566829368, "post_id": 57637955, "comment_id": 101768880, "body": "Thank you very much, this a great first step.  As you already mentioned my equation is not quite accurate."}, {"owner": {"reputation": 173, "user_id": 8993099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7bd1cc3c66dd37deeec9b7a1fb087a?s=128&d=identicon&r=PG&f=1", "display_name": "sulphur", "link": "https://stackoverflow.com/users/8993099/sulphur"}, "edited": false, "score": 0, "creation_date": 1566832975, "post_id": 57637955, "comment_id": 101770663, "body": "So now with the right equation, it got the result that I wanted. Again Thank you."}], "tags": [], "owner": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "is_accepted": true, "score": 1, "last_activity_date": 1566839640, "last_edit_date": 1566839640, "creation_date": 1566649693, "answer_id": 57637955, "question_id": 57600069, "link": "https://stackoverflow.com/questions/57600069/how-can-i-combine-multiple-if-conditions-to-create-a-new-column-and-add-or-subtr/57637955#57637955", "title": "How can I combine multiple if conditions to create a new column and add or subtract from the previous row", "body": "<p>If you want to reference multiple columns with <code>apply</code>, you have to write your function for a full row and apply it to the full data frame. For example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\n\ndf = pd.DataFrame({ \n    't' : [0, 8,32, 56, 96, 128],\n    'T' : [460, 500, 620, 500, 300, 460],\n})\n\ndef a(row):\n    a_0 = 10000\n    return a_0 + row['t'] + row['T']\n\ndf['a'] = df.apply(a, axis=1)\nprint(df)\n</code></pre>\n\n<p>Which prints:</p>\n\n<pre><code>     t    T      a\n0    0  460  10460\n1    8  500  10508\n2   32  620  10652\n3   56  500  10556\n4   96  300  10396\n5  128  460  10588\n</code></pre>\n\n<p>It's not a solution to your question, but you can see that values from both <code>row['t']</code> and <code>row['T']</code> are accessible.</p>\n\n<p>However, in your case, I think you'd better just use a for loop until <code>620</code> is reached and then another for loop for the remaining rows:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\n\ndf = pd.DataFrame({ \n    't' : [0, 8,32, 56, 96, 128],\n    'T' : [460, 500, 620, 500, 300, 460],\n})\n\na_0 = 10000\nfor i in range(len(df)):\n    df.loc[i, 'a'] = df['t'][i] * 40 + a_0\n    if df['T'][i] == 620:\n        break\n\nfor i in range(i + 1, len(df)):\n    df.loc[i, 'a'] = df['a'][i - 1] - (df['t'][i] - df['t'][i - 1]) * 40\n    if df['T'][i] == 300:\n        break\n\nfor i in range(i + 1, len(df)):\n    df.loc[i, 'a'] = df['a'][i - 1] + (df['t'][i] - df['t'][i - 1]) * 40\n    if df['T'][i] == 460:\n        break\n\nprint(df)\n</code></pre>\n\n<p>Which prints:</p>\n\n<pre><code>     t    T        a\n0    0  460  10000.0\n1    8  500  10320.0\n2   32  620  11280.0\n3   56  500  10320.0\n4   96  300   8720.0\n5  128  460  10000.0\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 8993099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db7bd1cc3c66dd37deeec9b7a1fb087a?s=128&d=identicon&r=PG&f=1", "display_name": "sulphur", "link": "https://stackoverflow.com/users/8993099/sulphur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 57637955, "answer_count": 1, "score": 1, "last_activity_date": 1566839640, "creation_date": 1566427893, "last_edit_date": 1566649688, "question_id": 57600069, "link": "https://stackoverflow.com/questions/57600069/how-can-i-combine-multiple-if-conditions-to-create-a-new-column-and-add-or-subtr", "title": "How can I combine multiple if conditions to create a new column and add or subtract from the previous row", "body": "<p>I want to create a new column in my data frame with multiple if conditions and either add value or subtract a value from the previous row depending on the conditions.</p>\n\n<p>I tried using a lambda function but I am pretty certain the syntax is wrong. So I have not really any idea to solve my problem. As <code>df['b']</code> this is just a dummy variable to test the lambda function instead of <code>df['a']</code>.</p>\n\n<p>Maybe an equation: <code>a_i = 1t* 40 + a0</code> until 620 , after is reached T = 620 is goes down one Rate of <code>a _i = a_i-1 -1t+40</code>.</p>\n\n<pre><code>import pandas as pd\n\n\ndf = pd.DataFrame({'t' : [0, 8,32, 56, 96, 128],\n               'T' : [460, 500, 620, 500, 300, 460],\n              })\ndf1 = pd.DataFrame({'t' : [0, 8,32, 56, 96, 128],\n               'T' : [460, 500, 620, 500, 300, 460],\n               'a' : [10000, 10320, 11280, 10320, 8720, 10000]})\n\nprint (df)\n\ndf.loc[0,'a']=10000\ndf['a']= df['t']*5+ df.loc[0,'a']\n\ndf.loc[0,'b']=100\ndf['b'] = df['T'].apply(lambda x: df['t']*5+ df.loc[0,'b'] if x &lt;= 500 \ndf['t']*5+ df.loc[0,'b'] if x &lt;= 620 \n-df['t']*5+ df.loc[0,'b'] if x &lt;= 300 )\n\n\n#df.loc[0,'i']=50\n#df['i'] = [5+ df.loc[0,'i'] for x in range(df.shape[0])]\n\nprint(df)\n\nprint(df1)\n</code></pre>\n\n<p>I wanted to create something like this:</p>\n\n<pre><code>     t    T      a\n0    0  460  10000\n1    8  500  10320\n2   32  620  11280\n3   56  500  10320\n4   96  300   8720\n5  128  460  10000\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 1746, "user_id": 6440589, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EpQO9.jpg?s=128&g=1", "display_name": "Sheldon", "link": "https://stackoverflow.com/users/6440589/sheldon"}, "edited": false, "score": 1, "creation_date": 1566428768, "post_id": 57600057, "comment_id": 101657482, "body": "Hey Xavier, you can use the built-in <code>astype</code> method to convert the values in <code>df1[&#39;GL From&#39;]</code> from string to integer: ` df1[&#39;GL From&#39;].astype(int)`"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 9852051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BHdIHAkNfi8/AAAAAAAAAAI/AAAAAAAAAHg/PMidUfbuM2Y/photo.jpg?sz=128", "display_name": "Xavier Sun", "link": "https://stackoverflow.com/users/9852051/xavier-sun"}, "edited": false, "score": 0, "creation_date": 1566455693, "post_id": 57600161, "comment_id": 101662906, "body": "Hi @calestini, thank you so much! This is awesome and working for the example data I provided. However, in the real business cases, the range might not be so perfect from 10000000 to 10009999. It could be like 100000199 to 100001234 in 8 digits, or 8700245 to 8889999 in 7 digits. The <code>lbound</code> column to merge with df1 will not be working. Will there be any way to fix this? Really appreciated !!!"}, {"owner": {"reputation": 3009, "user_id": 5833590, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153232467236962/picture?type=large", "display_name": "calestini", "link": "https://stackoverflow.com/users/5833590/calestini"}, "reply_to_user": {"reputation": 77, "user_id": 9852051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BHdIHAkNfi8/AAAAAAAAAAI/AAAAAAAAAHg/PMidUfbuM2Y/photo.jpg?sz=128", "display_name": "Xavier Sun", "link": "https://stackoverflow.com/users/9852051/xavier-sun"}, "edited": false, "score": 0, "creation_date": 1566490748, "post_id": 57600161, "comment_id": 101682042, "body": "That makes sense @XavierSun, and it&#39;s usual the case. How big is your dataset? Would a self join  just as proposed by Erfan be a good solution or it wouldnt fit in memory?"}, {"owner": {"reputation": 77, "user_id": 9852051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BHdIHAkNfi8/AAAAAAAAAAI/AAAAAAAAAHg/PMidUfbuM2Y/photo.jpg?sz=128", "display_name": "Xavier Sun", "link": "https://stackoverflow.com/users/9852051/xavier-sun"}, "edited": false, "score": 1, "creation_date": 1566570474, "post_id": 57600161, "comment_id": 101710070, "body": "Hi @calestini - Erfan&#39;s solution is working (at least for small to medium sized df), but the performance will probably slow down significantly on a big df. Thank you again!"}, {"owner": {"reputation": 3009, "user_id": 5833590, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153232467236962/picture?type=large", "display_name": "calestini", "link": "https://stackoverflow.com/users/5833590/calestini"}, "reply_to_user": {"reputation": 77, "user_id": 9852051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BHdIHAkNfi8/AAAAAAAAAAI/AAAAAAAAAHg/PMidUfbuM2Y/photo.jpg?sz=128", "display_name": "Xavier Sun", "link": "https://stackoverflow.com/users/9852051/xavier-sun"}, "edited": false, "score": 0, "creation_date": 1566578210, "post_id": 57600161, "comment_id": 101713836, "body": "Sure thing, updating the answer @Xavier to include a tailor solution, where you use numpy intersect with numpy where to find the correct match"}], "tags": [], "owner": {"reputation": 3009, "user_id": 5833590, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153232467236962/picture?type=large", "display_name": "calestini", "link": "https://stackoverflow.com/users/5833590/calestini"}, "is_accepted": false, "score": 0, "last_activity_date": 1566580821, "last_edit_date": 1566580821, "creation_date": 1566428611, "answer_id": 57600161, "question_id": 57600057, "link": "https://stackoverflow.com/questions/57600057/how-to-lookup-find-the-value-in-a-two-columns-range-from-another-dataframe-py/57600161#57600161", "title": "How to lookup/find the value in a two-columns range from another Dataframe? - Python Pandas Dataframe", "body": "<p>In case your data follows the pattern provided, you can create a column that has the lower bound value of each account and then merge on it:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df1['GL From'] = df1['GL From'].astype(int) #make it integer\n\n### create lower bound\ndf2['lbound'] = df2['GL Account'].astype(int)//10000000*10000000\n\n### merge\ndf2.merge(df1, left_on='lbound', right_on='GL From')\\\n               .drop(['lbound','GL From','GL To'], axis=1)\n</code></pre>\n\n<p>Output</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    Date        GL Account  Product LOB     Category\n0   1/10/19     20000456    Computer        CIT\n1   3/10/19     20004689    TV              CIT\n2   2/10/19     30000199    Mobile Phone    GST\n3   10/11/19    40008900    Fridge          Stamp Duty\n4   12/12/19    50000876    Dishwasher      Sales Tax\n5   30/08/19    10000325    Tablet          FBT Tax\n</code></pre>\n\n<p><strong>Added</strong></p>\n\n<p>In case the data does not follow a specific patter, you can use <code>np.intersect1d</code> with <code>np.where</code> to find out the lower bound and upper bound intersection, and therefore the index of the matched range.</p>\n\n<p>For instance:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>### func to get the index where account is greater or equal to `FROM` and lower or equal to `TO`\n@np.vectorize\ndef match_ix(acc_no):\n    return np.intersect1d(np.where(acc_no&gt;=df1['GL From'].values),np.where(acc_no&lt;=df1['GL To'].values))\n\n## Apply to dataframe\ndf2['right_ix'] = match_ix(df2['GL Account'])\n\n\n## Merge using the index. Use 'how=left' for the left join to preserve unmatched\ndf2.merge(df1, left_on='right_ix', right_on=df1.index, how='left')\\\n                .drop(['right_ix','GL From','GL To'], axis=1)\n</code></pre>\n\n<p>Output</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    Date        GL Account  Product LOB     Category\n0   1/10/19     20000456    Computer        CIT\n1   3/10/19     20004689    TV              CIT\n2   2/10/19     30000199    Mobile Phone    GST\n3   10/11/19    40008900    Fridge          Stamp Duty\n4   12/12/19    50000876    Dishwasher      Sales Tax\n5   30/08/19    10000325    Tablet          FBT Tax\n</code></pre>\n\n<p>In terms of performance, you will get something quicker and without the issue of <code>Memory Error</code> you might have on full joins:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>### Using 100* the sample provided\ntempdf2 = pd.concat([df2]*100)\ntempdf1 = pd.concat([df1]*100)\n\n#23 ms \u00b1 170 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 9852051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BHdIHAkNfi8/AAAAAAAAAAI/AAAAAAAAAHg/PMidUfbuM2Y/photo.jpg?sz=128", "display_name": "Xavier Sun", "link": "https://stackoverflow.com/users/9852051/xavier-sun"}, "edited": false, "score": 0, "creation_date": 1566566766, "post_id": 57600171, "comment_id": 101708058, "body": "Hi @Erfan - thank you for your help. I do have Pandas &gt;0.25, and it is working very well in the sample data. However, in actual practice, there will be some transactions out of the range, which we want to keep and can be mapped will null values. I tried to use <code>how=&#39;left&#39;</code> in <code>.merge</code>, however, I believe the rows will be eliminated in <code>.query()</code> statement, isn&#39;t it? Will there be any way to fix this problem? Thank you again!"}, {"owner": {"reputation": 77, "user_id": 9852051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BHdIHAkNfi8/AAAAAAAAAAI/AAAAAAAAAHg/PMidUfbuM2Y/photo.jpg?sz=128", "display_name": "Xavier Sun", "link": "https://stackoverflow.com/users/9852051/xavier-sun"}, "edited": false, "score": 0, "creation_date": 1566570235, "post_id": 57600171, "comment_id": 101709950, "body": "Hi @Erfan - thank you for your prompt rely. I just tried, but it didn&#39;t work. I assume it is because <code>GL From</code> column isn&#39;t null?                    <code>df2 = df2.assign(key=1).merge(df1.assign(key=1), on=&#39;key&#39;,how=&#39;left&#39;)\\                  .drop(columns=&#39;key&#39;)\\                  .query(&#39;</code>GL Account<code>.between(</code>GL From<code>, </code>GL To<code>) | </code>GL From<code>.isna()&#39;)\\                  .drop(columns=[&#39;GL From&#39;, &#39;GL To&#39;])\\                  .reset_index(drop=True)</code>"}, {"owner": {"reputation": 77, "user_id": 9852051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BHdIHAkNfi8/AAAAAAAAAAI/AAAAAAAAAHg/PMidUfbuM2Y/photo.jpg?sz=128", "display_name": "Xavier Sun", "link": "https://stackoverflow.com/users/9852051/xavier-sun"}, "edited": false, "score": 0, "creation_date": 1566824951, "post_id": 57600171, "comment_id": 101766559, "body": "Hi @Erfan - wondering if you would please help again for the GL accounts that are not in the mapped range? Thank you!!!"}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "reply_to_user": {"reputation": 77, "user_id": 9852051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BHdIHAkNfi8/AAAAAAAAAAI/AAAAAAAAAHg/PMidUfbuM2Y/photo.jpg?sz=128", "display_name": "Xavier Sun", "link": "https://stackoverflow.com/users/9852051/xavier-sun"}, "edited": false, "score": 0, "creation_date": 1566826003, "post_id": 57600171, "comment_id": 101767113, "body": "@XavierSun please edit your example data so it showcases your problem and why my solution untill now will not work. Then I can help you"}, {"owner": {"reputation": 77, "user_id": 9852051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BHdIHAkNfi8/AAAAAAAAAAI/AAAAAAAAAHg/PMidUfbuM2Y/photo.jpg?sz=128", "display_name": "Xavier Sun", "link": "https://stackoverflow.com/users/9852051/xavier-sun"}, "edited": false, "score": 0, "creation_date": 1566826292, "post_id": 57600171, "comment_id": 101767290, "body": "Hi @Erfan - Apology for that. I have just updated in my post, both <code>df2</code> and desired final result. Thank you again!"}], "tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": false, "score": 0, "last_activity_date": 1566568596, "last_edit_date": 1566568596, "creation_date": 1566428697, "answer_id": 57600171, "question_id": 57600057, "link": "https://stackoverflow.com/questions/57600057/how-to-lookup-find-the-value-in-a-two-columns-range-from-another-dataframe-py/57600171#57600171", "title": "How to lookup/find the value in a two-columns range from another Dataframe? - Python Pandas Dataframe", "body": "<h3>Pandas >= <code>0.25.0</code></h3>\n\n<p>We can do a <code>cartesian merge</code> by first assigning two artificial columns called <code>key</code> and joining on these. Then we can use <code>query</code> to filter everything <code>between</code> the correct ranges. Notice that we use backtick (<code>) to get our columns with spaces in the name, this is</code>pandas >= 0.25.0`:</p>\n\n<pre><code>df2.assign(key=1).merge(df1.assign(key=1), on='key')\\\n                 .drop(columns='key')\\\n                 .query('`GL Account`.between(`GL From`, `GL To`)')\\\n                 .drop(columns=['GL From', 'GL To'])\\\n                 .reset_index(drop=True)\n</code></pre>\n\n<p>If you use <code>left join</code>, replace the <code>.query</code> part with:</p>\n\n<pre><code>.query('`GL Account`.between(`GL From`, `GL To`) | `GL From`.isna()')\n</code></pre>\n\n<p>To keep the rows which didn't match in the join</p>\n\n<hr>\n\n<p>Or</p>\n\n<h3>Pandas &lt; <code>0.25.0</code></h3>\n\n<p>Simple boolean indexing</p>\n\n<pre><code>mrg = df2.assign(key=1).merge(df1.assign(key=1), on='key')\\\n                       .drop(columns='key')\n\nmrg[mrg['GL Account'].between(mrg['GL From'], mrg['GL To'])]\\\n                     .drop(columns=['GL From', 'GL To'])\\\n                     .reset_index(drop=True)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>       Date  GL Account   Product LOB    Category\n0   1/10/19    20000456      Computer         CIT\n1   2/10/19    30000199  Mobile Phone         GST\n2   3/10/19    20004689            TV         CIT\n3  10/11/19    40008900        Fridge  Stamp Duty\n4  12/12/19    50000876    Dishwasher   Sales Tax\n5  30/08/19    10000325        Tablet     FBT Tax\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 9852051, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BHdIHAkNfi8/AAAAAAAAAAI/AAAAAAAAAHg/PMidUfbuM2Y/photo.jpg?sz=128", "display_name": "Xavier Sun", "link": "https://stackoverflow.com/users/9852051/xavier-sun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1543, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1566826219, "creation_date": 1566427804, "last_edit_date": 1566826219, "question_id": 57600057, "link": "https://stackoverflow.com/questions/57600057/how-to-lookup-find-the-value-in-a-two-columns-range-from-another-dataframe-py", "title": "How to lookup/find the value in a two-columns range from another Dataframe? - Python Pandas Dataframe", "body": "<p>I have a question about Pandas Dataframe. There are two tables, 1 table is a mapping table, and 2nd table is a transactional date.</p>\n\n<p>In the mapping table, there are two columns with a range of From and To.</p>\n\n<p>Below are the two dataframes:</p>\n\n<p>1). The df1 is the mapping table with a range of account numbers to map to a specific tax type.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndf1 = pd.DataFrame({'Category':['FBT Tax','CIT','GST','Stamp Duty','Sales Tax'],\n          'GL From':['10000000','20000000','30000000','40000000','50000000'],\n          'GL To':['10009999','20009999','30009999','40009999','50009999']})\n\n\n     Category   GL From     GL To\n0     FBT Tax  10000000  10009999\n1         CIT  20000000  20009999\n2         GST  30000000  30009999\n3  Stamp Duty  40000000  40009999\n4   Sales Tax  50000000  50009999\n</code></pre>\n\n<p>2). The df2 is the transactional table (there should be more columns I skipped for this demo), with the account number that I want to use to search/lookup in the range in df1.</p>\n\n<pre><code>df2 = pd.DataFrame({'Date':['1/10/19','2/10/19','3/10/19','10/11/19','12/12/19','30/08/19','01/07/19'],\n          'GL Account':['20000456','30000199','20004689','40008900','50000876','10000325','70000199'],\n          'Product LOB':['Computer','Mobile Phone','TV','Fridge','Dishwasher','Tablet','Table']})\n\n       Date GL Account   Product LOB\n0   1/10/19   20000456      Computer\n1   2/10/19   30000199  Mobile Phone\n2   3/10/19   20004689            TV\n3  10/11/19   40008900        Fridge\n4  12/12/19   50000876    Dishwasher\n5  30/08/19   10000325        Tablet\n6  01/07/19   70000199        Table\n</code></pre>\n\n<p>In the df1 and df2, the account numbers are in String dtype. Hence, I created a simple function to convert into Integer.</p>\n\n<pre><code>def to_integer(col):\n    return pd.to_numeric(col,downcast='integer')\n</code></pre>\n\n<p>I have tried both np.dot and .loc to map the Category column, but I encountered this error:\n<code>ValueError: Can only compare identically-labeled Series objects</code></p>\n\n<pre><code>result = np.dot((to_integer(df2['GL Account']) &gt;= to_integer(df1['GL From'])) &amp;\n                 (to_integer(df2['GL Account']) &lt;= to_integer(df1['GL To'])),df1['Category'])\n\n\nresult = df1.loc[(to_integer(df2['GL Account']) &gt;= to_integer(df1['GL From'])) &amp;\n                 (to_integer(df2['GL Account']) &lt;= to_integer(df1['GL To'])),\"Category\"]\n</code></pre>\n\n<p>What I want to achieve  is like below:</p>\n\n<pre><code>       Date GL Account   Product LOB   Category\n0   1/10/19   20000456      Computer   CIT\n1   2/10/19   30000199  Mobile Phone   GST\n2   3/10/19   20004689            TV   CIT\n3  10/11/19   40008900        Fridge   Stamp Duty\n4  12/12/19   50000876    Dishwasher   Sales Tax\n5  30/08/19   10000325        Tablet   FBT Tax\n6  01/07/19   70000199        Table    NaN\n</code></pre>\n\n<p>Is there anyway to map between two dataframes based on From-To range?</p>\n"}, {"tags": ["python", "django", "python-3.x", "django-models"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 11564416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f01d96ef30b21cc1f65b5a7fb0cda80?s=128&d=identicon&r=PG&f=1", "display_name": "pattmax", "link": "https://stackoverflow.com/users/11564416/pattmax"}, "edited": false, "score": 0, "creation_date": 1566429251, "post_id": 57600197, "comment_id": 101657599, "body": "Forgot to mention I imported my models from my main project into an app named payments. How would the views.py look when I import my model. <code>from bullorbear.models import PurchaseHistory</code> I get the error <code>&#39;bool&#39; object is not callable</code> when it gets to <code>if request.user.is_authenticated():</code>"}, {"owner": {"reputation": 73, "user_id": 8386560, "user_type": "registered", "profile_image": "https://graph.facebook.com/408336332895341/picture?type=large", "display_name": "Mateusz Slisz", "link": "https://stackoverflow.com/users/8386560/mateusz-slisz"}, "reply_to_user": {"reputation": 47, "user_id": 11564416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f01d96ef30b21cc1f65b5a7fb0cda80?s=128&d=identicon&r=PG&f=1", "display_name": "pattmax", "link": "https://stackoverflow.com/users/11564416/pattmax"}, "edited": false, "score": 0, "creation_date": 1566429569, "post_id": 57600197, "comment_id": 101657668, "body": "So the <code>InvestingOne</code> is a Model, right? You may add a connection between those two models <a href=\"https://docs.djangoproject.com/en/2.2/topics/db/models/#relationships\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/2.2/topics/db/models/#relationship&zwnj;&#8203;s</a> I still exactly don&#39;t get it what do you want to achieve, could you show me you all code?"}, {"owner": {"reputation": 47, "user_id": 11564416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f01d96ef30b21cc1f65b5a7fb0cda80?s=128&d=identicon&r=PG&f=1", "display_name": "pattmax", "link": "https://stackoverflow.com/users/11564416/pattmax"}, "edited": false, "score": 0, "creation_date": 1566429740, "post_id": 57600197, "comment_id": 101657713, "body": "I changed my code to match yours exactly. I can add urls and html if that relevant. My goal is to have a user profile and after a purchase a boolean is marked as true for that profile so they can view premium content associated with that boolean."}, {"owner": {"reputation": 73, "user_id": 8386560, "user_type": "registered", "profile_image": "https://graph.facebook.com/408336332895341/picture?type=large", "display_name": "Mateusz Slisz", "link": "https://stackoverflow.com/users/8386560/mateusz-slisz"}, "reply_to_user": {"reputation": 47, "user_id": 11564416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f01d96ef30b21cc1f65b5a7fb0cda80?s=128&d=identicon&r=PG&f=1", "display_name": "pattmax", "link": "https://stackoverflow.com/users/11564416/pattmax"}, "edited": false, "score": 0, "creation_date": 1566430032, "post_id": 57600197, "comment_id": 101657782, "body": "Try with edited answer, didn&#39;t see you use Django higher than 1.9"}, {"owner": {"reputation": 47, "user_id": 11564416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f01d96ef30b21cc1f65b5a7fb0cda80?s=128&d=identicon&r=PG&f=1", "display_name": "pattmax", "link": "https://stackoverflow.com/users/11564416/pattmax"}, "edited": false, "score": 0, "creation_date": 1566430385, "post_id": 57600197, "comment_id": 101657852, "body": "Thank you. I have some database problem with migrations, I&#39;ll mark your answer as correct once I verify it&#39;s working. Thanks for your time, I really appreciate it."}, {"owner": {"reputation": 73, "user_id": 8386560, "user_type": "registered", "profile_image": "https://graph.facebook.com/408336332895341/picture?type=large", "display_name": "Mateusz Slisz", "link": "https://stackoverflow.com/users/8386560/mateusz-slisz"}, "reply_to_user": {"reputation": 47, "user_id": 11564416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f01d96ef30b21cc1f65b5a7fb0cda80?s=128&d=identicon&r=PG&f=1", "display_name": "pattmax", "link": "https://stackoverflow.com/users/11564416/pattmax"}, "edited": false, "score": 0, "creation_date": 1566430594, "post_id": 57600197, "comment_id": 101657894, "body": "You are welcome, if you are at begining of journey with Django, I would recommend to start with <a href=\"https://tutorial.djangogirls.org/en/\" rel=\"nofollow noreferrer\">tutorial.djangogirls.org/en</a> and django&#39;s documentation."}, {"owner": {"reputation": 47, "user_id": 11564416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f01d96ef30b21cc1f65b5a7fb0cda80?s=128&d=identicon&r=PG&f=1", "display_name": "pattmax", "link": "https://stackoverflow.com/users/11564416/pattmax"}, "edited": false, "score": 0, "creation_date": 1566431577, "post_id": 57600197, "comment_id": 101658072, "body": "Thank you very much! I have one quick question. I run makemigrations and migrate and it says nothing new exists and then when trying to execute this code I get <code>no such table: PurchaseHistory_purchasehistory</code>. I recall having an error like this in the past, is there anyway I can delete my db and nuke all my migrations. I&#39;ve looked online but haven&#39;t found a solution that&#39;s worked."}, {"owner": {"reputation": 47, "user_id": 11564416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f01d96ef30b21cc1f65b5a7fb0cda80?s=128&d=identicon&r=PG&f=1", "display_name": "pattmax", "link": "https://stackoverflow.com/users/11564416/pattmax"}, "edited": false, "score": 0, "creation_date": 1566439377, "post_id": 57600197, "comment_id": 101659293, "body": "I get the error &quot;&#39;User&#39; object has no attribute &#39;PurchaseHistory&#39;&quot; when trying both of your methods and removing the <code>if request.user.is_authenticated:</code> because I noticed it wasn&#39;t doing anything for the database. For reference I moved my model locally to the app. I&#39;m not sure if that changes anything. And yes I updated my imports."}, {"owner": {"reputation": 47, "user_id": 11564416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f01d96ef30b21cc1f65b5a7fb0cda80?s=128&d=identicon&r=PG&f=1", "display_name": "pattmax", "link": "https://stackoverflow.com/users/11564416/pattmax"}, "edited": false, "score": 0, "creation_date": 1566440792, "post_id": 57600197, "comment_id": 101659521, "body": "I got it working. I needed to create the object for the user and remove the check to see if they already exist in that model."}], "tags": [], "owner": {"reputation": 73, "user_id": 8386560, "user_type": "registered", "profile_image": "https://graph.facebook.com/408336332895341/picture?type=large", "display_name": "Mateusz Slisz", "link": "https://stackoverflow.com/users/8386560/mateusz-slisz"}, "is_accepted": true, "score": 0, "last_activity_date": 1566429751, "last_edit_date": 1566429751, "creation_date": 1566428851, "answer_id": 57600197, "question_id": 57600056, "link": "https://stackoverflow.com/questions/57600056/how-to-import-and-edit-variable-from-model-associated-with-currently-logged-in-u/57600197#57600197", "title": "How to import and edit variable from model associated with currently logged in user", "body": "<p>Firstly, your model should look like below</p>\n\n<pre><code>class PurchaseHistory(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE, related_name=\"purchase_history\")\n    is_one_invested = models.BooleanField(default=False)\n\n    def __str__(self):\n        return self.user.username\n\n    class Meta:\n        app_label = 'PurchaseHistory'\n</code></pre>\n\n<p>I see you have abstract model, which you can't use in queries <a href=\"https://docs.djangoproject.com/en/2.2/topics/db/models/#abstract-base-classes\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.2/topics/db/models/#abstract-base-classes</a></p>\n\n<p>make migrations &amp; migrate and go further</p>\n\n<pre><code>#payments/views.py\ndef charge(request):\n    if request.method == 'POST':\n        charge = stripe.Charge.create(\n            amount=500,\n            currency='usd',\n            description='A Django charge',\n            source=request.POST['stripeToken']\n        )\n        if request.user.is_authenticated:\n            if PurchaseHistory.objects.filter(user=request.user).exists():\n                request.user.purchase_history.is_one_invested = True\n                request.user.purchase_history.save()\n\n        return render(request, 'charge.html')\n</code></pre>\n\n<p>or if you want to create object instead of updating</p>\n\n<pre><code>#payments/views.py\ndef charge(request):\n    if request.method == 'POST':\n        charge = stripe.Charge.create(\n            amount=500,\n            currency='usd',\n            description='A Django charge',\n            source=request.POST['stripeToken']\n        )\n        if request.user.is_authenticated:\n            PurchaseHistory.objects.create(user=request.user, is_one_invested=True)\n\n        return render(request, 'charge.html')\n</code></pre>\n\n<p>in Django &lt;= 1.9 use <code>is_authenticated()</code> instead of <code>is_authenticated</code></p>\n"}], "owner": {"reputation": 47, "user_id": 11564416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f01d96ef30b21cc1f65b5a7fb0cda80?s=128&d=identicon&r=PG&f=1", "display_name": "pattmax", "link": "https://stackoverflow.com/users/11564416/pattmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57600197, "answer_count": 1, "score": 1, "last_activity_date": 1566430225, "creation_date": 1566427790, "last_edit_date": 1566430225, "question_id": 57600056, "link": "https://stackoverflow.com/questions/57600056/how-to-import-and-edit-variable-from-model-associated-with-currently-logged-in-u", "title": "How to import and edit variable from model associated with currently logged in user", "body": "<p>I want to import a variable from a model associated with the currently logged-in user. My model uses a one to one relationship with the built-in User model. After importing the variable I want to change it to True for whatever user is currently logged in.</p>\n\n<p>I've tried messing with my import statement and got it to work correctly It's giving me \"PurchaseHistory() got an unexpected keyword argument 'id'\" when trying to edit the variable. I know this is my misunderstanding of a code snippet I found online, and I would just like someone to help me fix it.</p>\n\n<pre><code>#models.py\nclass PurchaseHistory(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    InvestingOne = models.BooleanField(default=False)\n\n    def __str__(self):\n        return self.user.username\n\n    class Meta:\n        abstract = True\n        app_label = 'PurchaseHistory'\n</code></pre>\n\n<pre><code>#payments/views.py\ndef charge(request):\n    if request.method == 'POST':\n        charge = stripe.Charge.create(\n            amount=500,\n            currency='usd',\n            description='A Django charge',\n            source=request.POST['stripeToken']\n        )\n        post = PurchaseHistory(id=InvestingOne)\n        post.InvestingOne = True\n        post.save()\n        return render(request, 'charge.html')\n\n</code></pre>\n\n<p>I believe I provided good information to help me fix this. Let me know if there are any additional details I should provide. Thank you.</p>\n\n<p>Edit: Here is my file structure. The only thing I believe that might complicate this is that my model is in the main project folder and my view is in an app named payments.\n[img]<a href=\"https://i.imgur.com/5zs10MI.png[img]\" rel=\"nofollow noreferrer\">https://i.imgur.com/5zs10MI.png[img]</a></p>\n"}, {"tags": ["python", "module", "python-import"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1566430548, "post_id": 57600052, "comment_id": 101657881, "body": "<code>sys.append(&#39;..&#47;&#39;)</code> That is the parent of <i>the current working directory</i>, not the parent of the directory that <i>this module was imported from</i>."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1566432134, "post_id": 57600052, "comment_id": 101658153, "body": "How to call a <i>what</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1566432340, "post_id": 57600430, "comment_id": 101658180, "body": "Python 3 doesn&#39;t require <code>__init__.py</code>."}, {"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 1, "creation_date": 1566484239, "post_id": 57600430, "comment_id": 101678585, "body": "But  is <code>__init__.py</code> needed to use relative imports?"}], "tags": [], "owner": {"reputation": 51, "user_id": 11821580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/551a245d0da4d2ea4e30fb5cbdcbdfe9?s=128&d=identicon&r=PG&f=1", "display_name": "skaill", "link": "https://stackoverflow.com/users/11821580/skaill"}, "is_accepted": false, "score": 2, "last_activity_date": 1566433739, "last_edit_date": 1566433739, "creation_date": 1566431218, "answer_id": 57600430, "question_id": 57600052, "link": "https://stackoverflow.com/questions/57600052/calling-a-function-from-a-module-on-a-submodule/57600430#57600430", "title": "Calling a function from a module on a submodule", "body": "<p>In order for your directories to be interpreted as modules, you need to add __init__.py in each directory. Your directory structure will look like this.</p>\n\n<pre><code>+-- module_name\n|   +-- __init__.py\n|   +-- ml.py\n|   +-- exp_an.py\n|   +-- plotting.py\n+-- etl\n|   +-- __init__.py\n|   +-- machine_learning.py\n|   +-- data_manipulation.py\n</code></pre>\n\n<p>Then you'd use relative imports to get the modules. Example -> </p>\n\n<pre><code># Inside machine_learning.py you are importing ml.py\nimport ..ml as ml\n\nml.transform()\n</code></pre>\n\n<p>Here is an example of a larger project. You can see how relative imports are used and the directories have their __init__.py.</p>\n\n<p><a href=\"https://github.com/TileThePlane/docusign-python-client\" rel=\"nofollow noreferrer\">https://github.com/TileThePlane/docusign-python-client</a></p>\n"}, {"comments": [{"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1566484433, "post_id": 57600484, "comment_id": 101678692, "body": "Why can&#39;t I use <code>ml</code> as an attribute of <code>mn</code> ? Is the <code>__init__.py</code> file needed to do that or it isn&#39;t supported anymore?"}], "tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 0, "last_activity_date": 1566432087, "last_edit_date": 1566432087, "creation_date": 1566431780, "answer_id": 57600484, "question_id": 57600052, "link": "https://stackoverflow.com/questions/57600052/calling-a-function-from-a-module-on-a-submodule/57600484#57600484", "title": "Calling a function from a module on a submodule", "body": "<p>It sounds like you want to add the parent directory of <code>module_name</code> and <code>etl</code> (whatever that directory is) to your <code>PYTHONPATH</code>.</p>\n\n<p>After doing that, you should be able to do all the imports you asked for.</p>\n\n<p>To explain the <code>mn has no attribute called ml</code> error, that happened because you did not <em>import</em> <code>ml</code>.  You just tried to use it as an attribute of <code>mn</code>, and you can't do that.</p>\n"}], "owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1566481844, "creation_date": 1566427739, "last_edit_date": 1566481844, "question_id": 57600052, "link": "https://stackoverflow.com/questions/57600052/calling-a-function-from-a-module-on-a-submodule", "title": "Calling a function from a module on a submodule", "body": "<p>I'm quite new to working with more complex modules, but I think is about time to implement them in my work flow. Also, I don't come from a software engineering background so some of my languages might be inaccurate, please bear with me. My module folder structure is like this:</p>\n\n<pre><code>+-- module_name\n|   +-- ml.py\n|   +-- exp_an.py\n|   +-- plotting.py\n+-- etl\n|   +-- machine_learning.py\n|   +-- data_manipulation.py\n</code></pre>\n\n<p>The reason I have two folders is because the scripts directly on <code>module_name</code> are our personal library for use on most projects and the <code>etl</code> has code that is specific to this project.</p>\n\n<p>In the beginning I had both folders on the same directory but I was having trouble importing from <code>module_name</code> to <code>etl</code>.</p>\n\n<p>The thing is, in <code>machine_learning.py</code> I want to call a function from <code>ml.py</code>. I tried doing:</p>\n\n<pre><code>import sys\nsys.append('../')\nimport module_name as mn\n</code></pre>\n\n<p>But this seems to bring some recursivity issues, because when I try to call mn.ml I get a <code>mn has no attribute called ml</code> error.</p>\n\n<p>So, my question is, what is the right way to do this? Let's say I want to call a function called <code>transform()</code> that is inside <code>ml.py</code> in my <code>machine_learning.py</code> script. Is there a way to do this? Is there a better way to do this? Thanks</p>\n"}, {"tags": ["python", "flask", "waitress"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1566433703, "post_id": 57600034, "comment_id": 101658392, "body": "what you have as &quot;name_of_project&quot;?  It should be &quot;filename:function_name&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 575, "user_id": 9512964, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ywWTrTkLcjI/AAAAAAAAAAI/AAAAAAAAA1A/guiFSuUK-y0/photo.jpg?sz=128", "display_name": "Amin", "link": "https://stackoverflow.com/users/9512964/amin"}, "edited": false, "score": 0, "creation_date": 1566445737, "post_id": 57600781, "comment_id": 101660269, "body": "Thanks, this worked! I had a Flask folder I was using in the place of <code>&quot;name_of_project&quot;</code> since it linked to other python files, but I guess it should have been just the name of the main application file."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 575, "user_id": 9512964, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ywWTrTkLcjI/AAAAAAAAAAI/AAAAAAAAA1A/guiFSuUK-y0/photo.jpg?sz=128", "display_name": "Amin", "link": "https://stackoverflow.com/users/9512964/amin"}, "edited": false, "score": 0, "creation_date": 1566463533, "post_id": 57600781, "comment_id": 101666711, "body": "it has to be name of main file and <code>:</code> with name of function which returns <code>Flask</code> instance. It can&#39;t be only name of main file."}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 4, "last_activity_date": 1566435388, "creation_date": 1566435388, "answer_id": 57600781, "question_id": 57600034, "link": "https://stackoverflow.com/questions/57600034/waitress-command-line-returning-malformed-application-when-deploying-flask-web/57600781#57600781", "title": "waitress command line returning &quot;Malformed Application&quot; when deploying flask web app", "body": "<p>Minimal working example:</p>\n\n<p>If you put code in file <code>main.py</code></p>\n\n<pre><code>from flask import Flask\n\ndef create_app():\n    app = Flask(__name__)\n\n    @app.route('/')\n    def index():\n        return \"Hello World!\"\n\n    return app\n\nif __name__ == '__main__':\n    app = create_app()\n    app.run()    \n</code></pre>\n\n<p>then you can run it as</p>\n\n<pre><code>waitress-serve --call \"main:create_app\"\n</code></pre>\n\n<p>So <code>\"name_of_project\"</code> has to be <code>\"filename:function_name\"</code> which creates <code>Flask()</code> instance. </p>\n\n<p>It can't be any text. And if you forget <code>:</code> then you may see <code>\"Malformed application\"</code> </p>\n"}], "owner": {"reputation": 575, "user_id": 9512964, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ywWTrTkLcjI/AAAAAAAAAAI/AAAAAAAAA1A/guiFSuUK-y0/photo.jpg?sz=128", "display_name": "Amin", "link": "https://stackoverflow.com/users/9512964/amin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1655, "favorite_count": 0, "accepted_answer_id": 57600781, "answer_count": 1, "score": 0, "last_activity_date": 1566435388, "creation_date": 1566427522, "question_id": 57600034, "link": "https://stackoverflow.com/questions/57600034/waitress-command-line-returning-malformed-application-when-deploying-flask-web", "title": "waitress command line returning &quot;Malformed Application&quot; when deploying flask web app", "body": "<p>I'm attempting to deploy a simple web app, and I'm using command line <code>waitress-serve --call</code> command. But every time, the command immediately returns <code>1. Malformed application 'name_of_project_here'</code>.</p>\n\n<p>Here's my flask web app in python:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from flask import Flask, render_template\napp = Flask(__name__)\n\n@app.route('/')\ndef index():\n    return render_template('base.html')\n\nif __name__ == '__main__':\n   app.run(debug = True)\n</code></pre>\n\n<p>and the command I run is just</p>\n\n<pre><code>waitress-serve --call \"name_of_project\"\n</code></pre>\n\n<p>I did try looking through the documentation, and I found where the error occurs, but couldn't find an explanation of why it's occurring. What does malformed application mean?</p>\n"}, {"tags": ["python", "linear-algebra"], "comments": [{"owner": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "edited": false, "score": 0, "creation_date": 1566429210, "post_id": 57600019, "comment_id": 101657593, "body": "Isn&#39;t this just line equation? Sort of x(y) = x_0 - (dy/dx)*(y_1, y_a)?"}, {"owner": {"reputation": 77, "user_id": 6508819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ljm68.jpg?s=128&g=1", "display_name": "SkyOne", "link": "https://stackoverflow.com/users/6508819/skyone"}, "reply_to_user": {"reputation": 16707, "user_id": 341065, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=128&d=identicon&r=PG", "display_name": "wilx", "link": "https://stackoverflow.com/users/341065/wilx"}, "edited": false, "score": 0, "creation_date": 1566444365, "post_id": 57600019, "comment_id": 101660079, "body": "Yes. when transforming the equation to: (pLon1-pLon2)/(pLat1-pLat2) = (pLon1-pLon)/(pLat1-aLat), it becomes less obscure and more staightforward to understand now."}], "owner": {"reputation": 77, "user_id": 6508819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ljm68.jpg?s=128&g=1", "display_name": "SkyOne", "link": "https://stackoverflow.com/users/6508819/skyone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566427375, "creation_date": 1566427375, "question_id": 57600019, "link": "https://stackoverflow.com/questions/57600019/mind-bending-code-understanding-when-checking-if-a-point-is-in-polygon-in-python", "title": "Mind-bending code understanding when checking if a point is in polygon in python", "body": "<p>I'm studying how to check a point in a polygon. The thinking is about counting the times a horizontal line intersects with the polygon edges.</p>\n\n<p>My previous study is to find a code from the internet, which is: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def IsPtInPoly(aLon, aLat, pointList):  \n    ''''' \n    :param aLon: double Longitude \n    :param aLat: double Latitude\n    :param pointList: list [(lon, lat)...] The vertex of the polygon should be either clockwise or counter clockwise\n    '''  \n\n    iSum = 0  \n    iCount = len(pointList)  \n\n    if(iCount &lt; 3):  \n        return False  \n\n\n    for i in range(iCount):  \n\n        pLon1 = pointList[i][0]  # ith point\n        pLat1 = pointList[i][1]  # ith point\n\n        if(i == iCount - 1):  \n\n            pLon2 = pointList[0][0] # start from beginning \n            pLat2 = pointList[0][1] # start from beginning \n        else:  \n            pLon2 = pointList[i + 1][0]  #(i+1)th point\n            pLat2 = pointList[i + 1][1]  #(i+1)th point\n\n        if ((aLat &gt;= pLat1) and (aLat &lt; pLat2)) or ((aLat&gt;=pLat2) and (aLat &lt; pLat1)):  \n\n            if (abs(pLat1 - pLat2) &gt; 0):  \n\n                pLon = pLon1 - ((pLon1 - pLon2) * (pLat1 - aLat)) / (pLat1 - pLat2)\n                # That's what confuse me.\n\n                if(pLon &lt; aLon):  \n                    iSum += 1  \n\n    if(iSum % 2 != 0):  \n        return True  \n    else:  \n        return False\n</code></pre>\n\n<p>My question is: What is <code>pLon = pLon1 - ((pLon1 - pLon2) * (pLat1 - aLat)) / (pLat1 - pLat2)</code> talking about and why it can get the x coordinate with the polygon edges. I want detailed explanation. Thx</p>\n"}, {"tags": ["python", "numpy", "permutation"], "answers": [{"comments": [{"owner": {"reputation": 777, "user_id": 9235855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AaApQ.png?s=128&g=1", "display_name": "Moormanly", "link": "https://stackoverflow.com/users/9235855/moormanly"}, "edited": false, "score": 0, "creation_date": 1566427591, "post_id": 57600025, "comment_id": 101657253, "body": "I am hoping to preserve the order of the indices so that <code>all(y[idxs] == x)</code> should be <code>True</code>. Is there any way to modify your solution to achieve this?"}, {"owner": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "reply_to_user": {"reputation": 777, "user_id": 9235855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AaApQ.png?s=128&g=1", "display_name": "Moormanly", "link": "https://stackoverflow.com/users/9235855/moormanly"}, "edited": false, "score": 0, "creation_date": 1566427835, "post_id": 57600025, "comment_id": 101657310, "body": "This might be a bit slower since we are using a loop but its working and might be faster tha your first try"}, {"owner": {"reputation": 777, "user_id": 9235855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AaApQ.png?s=128&g=1", "display_name": "Moormanly", "link": "https://stackoverflow.com/users/9235855/moormanly"}, "edited": false, "score": 0, "creation_date": 1566428035, "post_id": 57600025, "comment_id": 101657351, "body": "Some quick timing experiments suggest it is about the same speed"}], "tags": [], "owner": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "is_accepted": false, "score": 1, "last_activity_date": 1566427804, "last_edit_date": 1566427804, "creation_date": 1566427430, "answer_id": 57600025, "question_id": 57599994, "link": "https://stackoverflow.com/questions/57599994/find-the-permutation-of-numpy-array-to-align-it-with-another-array/57600025#57600025", "title": "Find the permutation of numpy array to align it with another array?", "body": "<p>Use <code>np.isin</code> in combination with <code>np.argwhere</code></p>\n\n<pre><code>[np.argwhere(el==y)[0,0] for el in x]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 9848849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f95272728c8fa561159c758268cd3ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Maxwell", "link": "https://stackoverflow.com/users/9848849/maxwell"}, "is_accepted": false, "score": 3, "last_activity_date": 1566430266, "last_edit_date": 1566430266, "creation_date": 1566429012, "answer_id": 57600218, "question_id": 57599994, "link": "https://stackoverflow.com/questions/57599994/find-the-permutation-of-numpy-array-to-align-it-with-another-array/57600218#57600218", "title": "Find the permutation of numpy array to align it with another array?", "body": "<p>Using list.index() method improves the time significantly </p>\n\n<pre><code>y = y.tolist()\nindexes = [y.index(i) for i in x]\n\n</code></pre>\n\n<p>Here is a quick timing results</p>\n\n<pre><code>import numpy as np\nimport timeit\n\nx = np.array([3, 1, 4])\ny = np.array([4, 3, 2, 1])\n\ntotal_time = timeit.timeit('[np.argwhere(y == i)[0, 0] for i in x]',\n                           'from __main__ import ' + ', '.join(globals()), number=10000)\nprint(\"using argwhere = \", total_time)\n\ntotal_time = timeit.timeit('[y.tolist().index(i) for i in x]',\n                           'from __main__ import ' + ', '.join(globals()), number=10000)\nprint(\"using list index = \", total_time)\n\n</code></pre>\n\n<p>using argwhere =  0.2716948229999616</p>\n\n<p>using list index =  0.05231958099966505</p>\n"}], "owner": {"reputation": 777, "user_id": 9235855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AaApQ.png?s=128&g=1", "display_name": "Moormanly", "link": "https://stackoverflow.com/users/9235855/moormanly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 1, "closed_date": 1566429083, "answer_count": 2, "score": 1, "last_activity_date": 1566430266, "creation_date": 1566427174, "question_id": 57599994, "link": "https://stackoverflow.com/questions/57599994/find-the-permutation-of-numpy-array-to-align-it-with-another-array", "closed_reason": "Duplicate", "title": "Find the permutation of numpy array to align it with another array?", "body": "<p>I have two numpy arrays such as</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nx = np.array([3, 1, 4])\ny = np.array([4, 3, 2, 1, 0])\n</code></pre>\n\n<p>each containing unique values. The values in <code>x</code> are guaranteed to be a subset of those in <code>y</code>.</p>\n\n<p><strong>I would like to find the index of each element of <code>x</code> in the array <code>y</code></strong>.</p>\n\n<p>In the array above, this would be</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[1, 3, 0]\n</code></pre>\n\n<p>So far I have been finding the indices one at a time in a loop:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>idxs = []\nfor val in x:\n     idxs.append(np.argwhere(y == val)[0,0])\n</code></pre>\n\n<p>But this is slow when my arrays are large.</p>\n\n<p><strong>Is there a more efficient way to do this?</strong></p>\n"}, {"tags": ["python", "logging", "structlog"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4146376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90cba2973390eb61b9f9b55b4e80a418?s=128&d=identicon&r=PG&f=1", "display_name": "RSY", "link": "https://stackoverflow.com/users/4146376/rsy"}, "edited": false, "score": 0, "creation_date": 1566485488, "post_id": 57600777, "comment_id": 101679326, "body": "I am setting log level to Info for each of my module and I can change that as per module. But, then why are external libraries in site-packages are getting logged."}, {"owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "reply_to_user": {"reputation": 21, "user_id": 4146376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90cba2973390eb61b9f9b55b4e80a418?s=128&d=identicon&r=PG&f=1", "display_name": "RSY", "link": "https://stackoverflow.com/users/4146376/rsy"}, "edited": false, "score": 0, "creation_date": 1566485759, "post_id": 57600777, "comment_id": 101679472, "body": "You need to set the log level for the external libraries so that their unwanted messages to not appear."}], "tags": [], "owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1566435364, "creation_date": 1566435364, "answer_id": 57600777, "question_id": 57599977, "link": "https://stackoverflow.com/questions/57599977/logging-in-python-project-using-structlog-and-it-logs-third-party-libraries-whic/57600777#57600777", "title": "Logging in Python project using structlog and it logs third party libraries which needs to be removed", "body": "<p>Logging has a number of locations where you can filter messages. Via the log level of the specific module as in <code>logging.getLogger(...).setLevel(...)</code> or via a filter attached to a logger or attached to a handler.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4146376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90cba2973390eb61b9f9b55b4e80a418?s=128&d=identicon&r=PG&f=1", "display_name": "RSY", "link": "https://stackoverflow.com/users/4146376/rsy"}, "is_accepted": false, "score": 0, "last_activity_date": 1566847676, "creation_date": 1566847676, "answer_id": 57663839, "question_id": 57599977, "link": "https://stackoverflow.com/questions/57599977/logging-in-python-project-using-structlog-and-it-logs-third-party-libraries-whic/57663839#57663839", "title": "Logging in Python project using structlog and it logs third party libraries which needs to be removed", "body": "<p>I solved this by adding the following in my logging setup:</p>\n\n<pre><code> logging.config.dictConfig({\n    'disable_existing_loggers': True, # this disables the existing loggers from logging anything.\n... \n})\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4146376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90cba2973390eb61b9f9b55b4e80a418?s=128&d=identicon&r=PG&f=1", "display_name": "RSY", "link": "https://stackoverflow.com/users/4146376/rsy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1566847676, "creation_date": 1566427028, "question_id": 57599977, "link": "https://stackoverflow.com/questions/57599977/logging-in-python-project-using-structlog-and-it-logs-third-party-libraries-whic", "title": "Logging in Python project using structlog and it logs third party libraries which needs to be removed", "body": "<p>I am using structlog library to log for my Python project.\nI see some third party library logs which I do not want.\nHow do I remove those logs?</p>\n"}, {"tags": ["python", "pandas", "series", "notnull"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1566427032, "creation_date": 1566427032, "answer_id": 57599979, "question_id": 57599955, "link": "https://stackoverflow.com/questions/57599955/extracting-non-null-portion-of-pandas-series-from-dataframe/57599979#57599979", "title": "Extracting non-null portion of pandas series from DataFrame", "body": "<p>You are talking about <code>dropna</code></p>\n\n<pre><code>df.C2.dropna()\nOut[486]: \n0    4.4\n1    4.5\n3    3.2\nName: C2, dtype: float64\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": false, "score": 0, "last_activity_date": 1566427205, "creation_date": 1566427205, "answer_id": 57599997, "question_id": 57599955, "link": "https://stackoverflow.com/questions/57599955/extracting-non-null-portion-of-pandas-series-from-dataframe/57599997#57599997", "title": "Extracting non-null portion of pandas series from DataFrame", "body": "<p>Consider using <code>query</code> with <code>.notna</code> if you want to filter your dataframe:</p>\n\n<pre><code>df.query('C2.notna()')\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>   C1   C2   C3\n0   1  4.4   99\n1   2  4.5  200\n3   4  3.2  140\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1566427466, "post_id": 57600007, "comment_id": 101657234, "body": "Better: <code>df.loc[df[&#39;C2&#39;].notnull(), &#39;C2&#39;]</code>"}, {"owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "reply_to_user": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 1, "creation_date": 1566427607, "post_id": 57600007, "comment_id": 101657256, "body": "can you explain how this is better?"}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1566427673, "post_id": 57600007, "comment_id": 101657271, "body": "Have a <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html\" rel=\"nofollow noreferrer\">read</a>"}], "tags": [], "owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "is_accepted": false, "score": 0, "last_activity_date": 1566427272, "creation_date": 1566427272, "answer_id": 57600007, "question_id": 57599955, "link": "https://stackoverflow.com/questions/57599955/extracting-non-null-portion-of-pandas-series-from-dataframe/57600007#57600007", "title": "Extracting non-null portion of pandas series from DataFrame", "body": "<p>you can combine your two steps into one as well and drop the loc</p>\n\n<pre><code>df[df['C2'].notnull()]['C2']\n</code></pre>\n"}], "owner": {"reputation": 444, "user_id": 2502999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oF4bU.jpg?s=128&g=1", "display_name": "Vicki B", "link": "https://stackoverflow.com/users/2502999/vicki-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1566427272, "creation_date": 1566426884, "question_id": 57599955, "link": "https://stackoverflow.com/questions/57599955/extracting-non-null-portion-of-pandas-series-from-dataframe", "title": "Extracting non-null portion of pandas series from DataFrame", "body": "<p>Say I have this DataFrame:</p>\n\n<pre><code>    C1    C2    C3\n0    1   4.4    99\n1    2   4.5   200\n2    3   NaN    65\n3    4   3.2   140\n</code></pre>\n\n<p>I want to extract only the column (series) C2 and only the non-null elements of that series.</p>\n\n<p>I can do that in two steps:</p>\n\n<pre><code>d = df.loc[df['C2'].notnull()]\ns=d['C2']\n</code></pre>\n\n<p>s will be</p>\n\n<pre><code>0    4.4\n1    4.5\n3    3.2\n</code></pre>\n\n<p>Can I do this in one step?</p>\n"}, {"tags": ["python", "string"], "comments": [{"owner": {"reputation": 57412, "user_id": 236465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoAkG.jpg?s=128&g=1", "display_name": "Diego Torres Milano", "link": "https://stackoverflow.com/users/236465/diego-torres-milano"}, "edited": false, "score": 0, "creation_date": 1566426996, "post_id": 57599928, "comment_id": 101657113, "body": "take a look at <a href=\"https://www.geeksforgeeks.org/string-find-python/#targetText=Python%20String%20%7C%20find()\" rel=\"nofollow noreferrer\">geeksforgeeks.org/string-find-python/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 591, "user_id": 1322811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17079f3bc9aff7216be6a38643dbe13a?s=128&d=identicon&r=PG", "display_name": "afarley", "link": "https://stackoverflow.com/users/1322811/afarley"}, "reply_to_user": {"reputation": 4972, "user_id": 10824407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32862a03314e434224acf280c38e6e68?s=128&d=identicon&r=PG&f=1", "display_name": "Olvin Roght", "link": "https://stackoverflow.com/users/10824407/olvin-roght"}, "edited": false, "score": 0, "creation_date": 1566427261, "post_id": 57599974, "comment_id": 101657189, "body": "Couldn&#39;t you make the same point about hard-coding the alphabet itself? I&#39;m not trying to provide an industrial-grade ROT13 implementation, I&#39;m just providing an example."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1566427717, "post_id": 57599974, "comment_id": 101657282, "body": "To truly future-proof, <code>from string import ascii_lowercase as alphabet</code> :-)"}], "tags": [], "owner": {"reputation": 591, "user_id": 1322811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17079f3bc9aff7216be6a38643dbe13a?s=128&d=identicon&r=PG", "display_name": "afarley", "link": "https://stackoverflow.com/users/1322811/afarley"}, "is_accepted": false, "score": 0, "last_activity_date": 1566427018, "creation_date": 1566427018, "answer_id": 57599974, "question_id": 57599928, "link": "https://stackoverflow.com/questions/57599928/how-to-wrap-around-a-string-in-python/57599974#57599974", "title": "How to wrap around a string in python", "body": "<p>The steps are:</p>\n\n<p>1) Identify the index of 'u'  </p>\n\n<pre><code>alphabet =  'abcdefghijklmnopqrstuvwxyz'  \nindex_of_u = alphabet.index('u')\n</code></pre>\n\n<p>2) Use the modulo operator to calculate:  </p>\n\n<pre><code>offset_index = (index_of_u + 13) % 27\n</code></pre>\n\n<p>3) Look up target  </p>\n\n<pre><code>target_char = alphabet[offset_index]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10045, "user_id": 77542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2bb52913c4cebae8835bb50c03996d5?s=128&d=identicon&r=PG", "display_name": "Tordek", "link": "https://stackoverflow.com/users/77542/tordek"}, "is_accepted": true, "score": 0, "last_activity_date": 1566427053, "creation_date": 1566427053, "answer_id": 57599981, "question_id": 57599928, "link": "https://stackoverflow.com/questions/57599928/how-to-wrap-around-a-string-in-python/57599981#57599981", "title": "How to wrap around a string in python", "body": "<p>You can use the modulo operator, known as <code>%</code>. The result it gives you is the remainder of the division of both numbers.</p>\n\n<p>For example, 5%10 is 5, and 18%10 is 8.</p>\n\n<p>You find the character's position:</p>\n\n<pre><code>pos = string.find('u')\n</code></pre>\n\n<p>You move it forward:</p>\n\n<pre><code>pos += 13\n</code></pre>\n\n<p>You find the corrected position:</p>\n\n<pre><code>pos %= len(string)\n</code></pre>\n\n<p>and then you print it:</p>\n\n<pre><code>print(string[pos])\n</code></pre>\n\n<p>Of course, you can write it more concisely:</p>\n\n<pre><code>print(string[(string.find('u')+13)%len(string)])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 0, "last_activity_date": 1566427501, "creation_date": 1566427501, "answer_id": 57600033, "question_id": 57599928, "link": "https://stackoverflow.com/questions/57599928/how-to-wrap-around-a-string-in-python/57600033#57600033", "title": "How to wrap around a string in python", "body": "<p>It could be done using slices of the alphabet to create a lookup dictionary.</p>\n\n<pre><code>from string import ascii_lowercase\ns = ascii_lowercase\n\nrot13 = dict(zip(s, s[13:]+s[:13]))\n\n&gt;&gt;&gt; rot13\n{'a': 'n', 'b': 'o', 'c': 'p', 'd': 'q', 'e': 'r', 'f': 's', 'g': 't', 'h': 'u', 'i': 'v', 'j': 'w', 'k': 'x', 'l': 'y', 'm': 'z', 'n': 'a', 'o': 'b', 'p': 'c', 'q': 'd', 'r': 'e', 's': 'f', 't': 'g', 'u': 'h', 'v': 'i', 'w': 'j', 'x': 'k', 'y': 'l', 'z': 'm'}\n&gt;&gt;&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "is_accepted": false, "score": 0, "last_activity_date": 1566428638, "creation_date": 1566428638, "answer_id": 57600163, "question_id": 57599928, "link": "https://stackoverflow.com/questions/57599928/how-to-wrap-around-a-string-in-python/57600163#57600163", "title": "How to wrap around a string in python", "body": "<p>If you want a canonical answer, just use the builtins:</p>\n\n<pre><code>import codecs\ncodecs.encode('Canonical Answer', 'rot_13')\n'Pnabavpny Nafjre'\n</code></pre>\n\n<p>For a handcrafted speedy version, @Chris Charley's answer is fine.</p>\n\n<p>If you want something more generic, you can do.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def rotN(n):\n    start, end = map(ord, 'az')\n    mod = end - start + 1\n    def rot(char):\n        return chr((ord(char) - start + n) % mod + start)\n    return rot\n</code></pre>\n\n<p>then for example, <code>rot13 = rotN(13)</code> gives you a translator, and <code>rot13('u') == 'h'</code>.  Note that this still only works for lowercase.</p>\n"}, {"tags": [], "owner": {"reputation": 746, "user_id": 1628053, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/886bdbe80a2f6b86b61d0ec52a890e1f?s=128&d=identicon&r=PG", "display_name": "Alex Fish", "link": "https://stackoverflow.com/users/1628053/alex-fish"}, "is_accepted": false, "score": 0, "last_activity_date": 1566429247, "creation_date": 1566429247, "answer_id": 57600239, "question_id": 57599928, "link": "https://stackoverflow.com/questions/57599928/how-to-wrap-around-a-string-in-python/57600239#57600239", "title": "How to wrap around a string in python", "body": "<p>The proper way would be to use the <a href=\"http://code.activestate.com/recipes/65117-converting-between-ascii-numbers-and-characters/\" rel=\"nofollow noreferrer\">ascii values</a> of the characters.</p>\n\n<pre><code>def rot13_encrypt(text):\n    return ''.join(chr((ord(letter) - ord('a') + 13) % 26 + ord('a')) for letter in text)\ndef rot13_decrypt(text):\n    return ''.join(chr((ord(letter) - ord('a') - 13 + 26) % 26 + ord('a')) for letter in text)\nrot13_encrypt('helloworld')\nOut[22]: 'uryybjbeyq'\nrot13_decrypt(rot13_encrypt('helloworld'))\nOut[23]: 'helloworld'\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11959474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8yd6O.jpg?s=128&g=1", "display_name": "devxj", "link": "https://stackoverflow.com/users/11959474/devxj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "accepted_answer_id": 57599981, "answer_count": 5, "score": 0, "last_activity_date": 1566429247, "creation_date": 1566426683, "question_id": 57599928, "link": "https://stackoverflow.com/questions/57599928/how-to-wrap-around-a-string-in-python", "title": "How to wrap around a string in python", "body": "<p>So I'm trying to make my own version of the ROT13 Cipher, and I want to wrap around a string to the next character.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>string = 'abcdefghijklmnopqrstuvwxyz'\n# 'u' to 'h' and 'a' to 'n'\n</code></pre>\n\n<p>If the character was 'u' for example how would I get the character 13 steps in front of it? <br>Which would end up to be 'h'.</p>\n\n<p>I didn't know what to look up because i'm not great with words and explaining things.</p>\n"}, {"tags": ["python", "replace"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1566426669, "post_id": 57599897, "comment_id": 101657033, "body": "Where is the <code>except</code> that goes with <code>try</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1566426711, "post_id": 57599897, "comment_id": 101657044, "body": "Why are you replacing characters in a JSON file?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1566429737, "post_id": 57599897, "comment_id": 101657709, "body": "What is <code>if 1==1:</code> for? If this is a placeholder for some other condition, use <code>if True:</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11947352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65dee030354c2639237ae87117c6c169?s=128&d=identicon&r=PG&f=1", "display_name": "Giancarlo", "link": "https://stackoverflow.com/users/11947352/giancarlo"}, "edited": false, "score": 0, "creation_date": 1566428664, "post_id": 57599980, "comment_id": 101657462, "body": "I get another error, that the file is open. I need the change to be in the same file and with f.load () /invalid json: [winError 32] The process does not have access to the file because it is being used by another process."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 21, "user_id": 11947352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65dee030354c2639237ae87117c6c169?s=128&d=identicon&r=PG&f=1", "display_name": "Giancarlo", "link": "https://stackoverflow.com/users/11947352/giancarlo"}, "edited": false, "score": 0, "creation_date": 1566429566, "post_id": 57599980, "comment_id": 101657666, "body": "Try taking the code that writes to the file outside the first <code>with</code> block, so that the reading file is closed before you try to write."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1566429716, "last_edit_date": 1566429716, "creation_date": 1566427039, "answer_id": 57599980, "question_id": 57599897, "link": "https://stackoverflow.com/questions/57599897/error-recording-json-file-open-and-replace-and-save/57599980#57599980", "title": "Error recording json file. Open and replace and save", "body": "<p>If you want to read what you just wrote, you need to open the file in <code>w+</code> mode, not <code>w</code> mode. You also have to rewind the file, otherwise you start reading from the end of what you wrote, and there's nothing there.</p>\n\n<pre><code>                        with io.open(archivo,'w+',encoding='utf8')as f:\n                            f.write(file_data)\n                            f.seek(0)\n                            json_data=json.load(f)        \n</code></pre>\n\n<p>But there's no reason to read it back from the file. You already have the JSON in <code>file_data</code>, you can load that.</p>\n\n<p>Also, you should close the first file handle before writing back out to the same file. Take the second <code>with</code> block outside of the first one.</p>\n\n<pre><code>            for archivo in files:        \n                if os.path.isfile(archivo):      \n                    with io.open(archivo,'r',encoding='utf8')as file:\n                        cadenaId=(os.path.basename(archivo)).split('-') #--es una tipo lista.   \n                        print(\"Antes de leer\")   \n                        file_data=file.read().replace('\\\\\"', '\\\"').replace('\\\\n','\\n').replace('\\\\',' ')\n                    with io.open(archivo,'w',encoding='utf8')as f:\n                        f.write(file_data)\n                    json_data=json.loads(file_data)        \n</code></pre>\n\n<p>However, I think what you're doing may be misguided in the first place. You're replacing escaped characters with non-escaped characters, but escaping is necessary when special characters are embedded in JSON.</p>\n"}], "owner": {"reputation": 21, "user_id": 11947352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65dee030354c2639237ae87117c6c169?s=128&d=identicon&r=PG&f=1", "display_name": "Giancarlo", "link": "https://stackoverflow.com/users/11947352/giancarlo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 57599980, "answer_count": 1, "score": 1, "last_activity_date": 1566429716, "creation_date": 1566426466, "last_edit_date": 1566426635, "question_id": 57599897, "link": "https://stackoverflow.com/questions/57599897/error-recording-json-file-open-and-replace-and-save", "title": "Error recording json file. Open and replace and save", "body": "<p>I'm trying to replace the special python characters, but replacing is not working for me.</p>\n\n<pre><code>def enviarwebservice():\n    url = \"https://server/api/v1/a032ccb8-8c32-4c4e-976a-07f5e9a64e26\"       \n    files=ls4(\"c:/validacionFX/\",\"*.json\") #*******ruta donde se genera el json*********    \n    try:\n        r = requests.get(url)\n        if 1==1:\n            for archivo in files:        \n                if os.path.isfile(archivo):      \n                    with io.open(archivo,'r',encoding='utf8')as file:\n                        cadenaId=(os.path.basename(archivo)).split('-') #--es una tipo lista.   \n                        print(\"Antes de leer\")   \n                        file_data=file.read().replace('\\\\\"', '\\\"').replace('\\\\n','\\n').replace('\\\\',' ')\n                        with io.open(archivo,'w',encoding='utf8')as f:\n                            f.write(file_data)\n                            json_data=json.load(f)        \n                            payload=json.dumps(json_data,indent=4)\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "google-cloud-ml"], "answers": [{"tags": [], "owner": {"reputation": 1012, "user_id": 3864587, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bdd90d99f606fd0ceb3e99a9793eda47?s=128&d=identicon&r=PG&f=1", "display_name": "mikeL", "link": "https://stackoverflow.com/users/3864587/mikel"}, "is_accepted": true, "score": 0, "last_activity_date": 1566429920, "creation_date": 1566429920, "answer_id": 57600297, "question_id": 57599892, "link": "https://stackoverflow.com/questions/57599892/return-key-with-tf-estimator-model-predictions/57600297#57600297", "title": "Return key with tf.estimator model predictions", "body": "<p>The solution was to explicitly carry the key into model function and add it to the dictionary of outputs. </p>\n\n<p>The lines of code that need to be added are </p>\n\n<pre><code>def model_fn(features, labels, mode):\n\n    values = nnet(features)\n</code></pre>\n\n<p>add the key here</p>\n\n<pre><code>    key=features[\"key_column\"]\n\n    if mode == tf.estimator.ModeKeys.TRAIN:\n        is_training = True\n    else:\n        is_training = False\n\n\n    if mode == tf.estimator.ModeKeys.PREDICT:\n        predictions = {\n            'class_ids': tf.argmax(tf.nn.softmax(values),1),\n             'probabilities': tf.nn.softmax(values),\n             'logits': values,\n</code></pre>\n\n<p>add the key to the dictionary outputs              </p>\n\n<pre><code>            'key_column':key\n           }\n        export_outputs = {\n        'prediction': tf.estimator.export.PredictOutput(predictions)\n          }\n        return tf.estimator.EstimatorSpec(mode,predictions=predictions,export_outputs=export_outputs)\n</code></pre>\n"}], "owner": {"reputation": 1012, "user_id": 3864587, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bdd90d99f606fd0ceb3e99a9793eda47?s=128&d=identicon&r=PG&f=1", "display_name": "mikeL", "link": "https://stackoverflow.com/users/3864587/mikel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 57600297, "answer_count": 1, "score": 0, "last_activity_date": 1566429920, "creation_date": 1566426433, "question_id": 57599892, "link": "https://stackoverflow.com/questions/57599892/return-key-with-tf-estimator-model-predictions", "title": "Return key with tf.estimator model predictions", "body": "<p>I am using a custom tensorflow Estimator and am trying to use </p>\n\n<pre><code>tf.contrib.estimator.forward_features\n</code></pre>\n\n<p>to return a key column along with my outputs. I followed <a href=\"https://stackoverflow.com/questions/49271114/define-instance-key-index-number-for-cloud-machine-learning-prediction\">post1</a> and <a href=\"https://stackoverflow.com/questions/49542369/how-to-get-keys-in-batch-predictions-with-ml-engine-using-a-custom-model?noredirect=1&amp;lq=1\">post2</a></p>\n\n<p>and applied </p>\n\n<pre><code>tf.contrib.estimator.forward_features\n</code></pre>\n\n<p>but I am receiving the the error</p>\n\n<pre><code> Predictions should be a dict to be able to forward features. Given: &lt;class 'tensorflow.python.framework.ops.Tensor'&gt;\n</code></pre>\n\n<p>My model functions looks like this</p>\n\n<pre><code>def model_fn(features, labels, mode):\n\n    values = nnet(features)\n    if mode == tf.estimator.ModeKeys.TRAIN:\n       is_training = True\n    else:\n       is_training = False\n\n    if mode == tf.estimator.ModeKeys.PREDICT:\n       predictions = {\n        'class_ids': tf.argmax(tf.nn.softmax(values),1),\n        'probabilities': tf.nn.softmax(values),\n        'logits': values,\n        }\n        export_outputs = {\n            'prediction': tf.estimator.export.PredictOutput(predictions)\n        }\n    return tf.estimator.EstimatorSpec(mode,predictions=predictions,export_outputs=export_outputs)\n\n    labels_one_hot=tf.one_hot(labels,4)\n\n    score= tf.argmax(values,axis=1)\n\n    loss_op= tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits(logits=values,labels=labels_one_hot))\n\n    gradients = tf.gradients(loss_op, tf.trainable_variables())\n\n    optimizer = tf.train.AdamOptimizer(learning_rate=.0001)\n\n    update_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS)\n\n    if mode == tf.estimator.ModeKeys.TRAIN:\n\n        train_optimizer = optimizer.apply_gradients(zip(gradients, tf.trainable_variables()),\n\n        global_step=tf.train.get_global_step())\n\n        acc_op=tf.metrics.accuracy( labels= labels,predictions=tf.argmax(values, axis=1))\n\n        tf.summary.scalar('accuracy_rate', acc_op[1])\n        update_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS)\n\n        estim_specs = tf.estimator.EstimatorSpec(\n             mode=mode,\n             predictions=score,\n             loss=loss_op,\n             train_op=train_optimizer,\n        eval_metric_ops={'acc': acc_op})\n        return estim_specs \n\n\n    if mode == tf.estimator.ModeKeys.EVAL:\n        predicted_indices = tf.argmax(values, axis=1)\n        eval_metric_ops = {\n          'accuracy': tf.metrics.accuracy(labels, predicted_indices)}\n\n        return tf.estimator.EstimatorSpec(mode,loss=loss_op,eval_metric_ops=eval_metric_ops)\n</code></pre>\n\n<p>I am calling my estimator like this</p>\n\n<pre><code>estimator = tf.estimator.Estimator(\n    model_fn= model_fn,\n    config= tf.estimator.RunConfig(\n            save_checkpoints_steps = 2000,\n            keep_checkpoint_max = 10,\n            tf_random_seed = 101),\n          model_dir= \"tf_dir\")\n\nestimator = tf.contrib.estimator.forward_features(\n  estimator,'key')\n\ntf.estimator.train_and_evaluate(estimator, train_spec, eval_spec)\n</code></pre>\n\n<p>I am returning a dictionary for my predictions and my code runs fine if I don't call </p>\n\n<pre><code>tf.contrib.estimator.forward_features\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "geopandas"], "comments": [{"owner": {"reputation": 3413, "user_id": 9978945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931863323a8c30fa086d61604053db8?s=128&d=identicon&r=PG&f=1", "display_name": "martinfleis", "link": "https://stackoverflow.com/users/9978945/martinfleis"}, "edited": false, "score": 0, "creation_date": 1566559587, "post_id": 57599887, "comment_id": 101704288, "body": "I am not sure I fully understand. Can you give exemplar data so we can try them?"}, {"owner": {"reputation": 1410, "user_id": 9900084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97739535a689b72a0ff9a37db1a1e8df?s=128&d=identicon&r=PG&f=1", "display_name": "steven", "link": "https://stackoverflow.com/users/9900084/steven"}, "edited": false, "score": 1, "creation_date": 1566961136, "post_id": 57599887, "comment_id": 101814783, "body": "geopandas produces matplotlib axes. so you are basically looking for how to plot arrow on axes: <a href=\"https://matplotlib.org/users/annotations.html#annotating-with-arrow\" rel=\"nofollow noreferrer\">matplotlib.org/users/annotations.html#annotating-with-arrow</a>"}], "owner": {"reputation": 463, "user_id": 7458826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51f9b14377fd5e0740bc3a9496ba27f5?s=128&d=identicon&r=PG&f=1", "display_name": "donut", "link": "https://stackoverflow.com/users/7458826/donut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566426387, "creation_date": 1566426387, "question_id": 57599887, "link": "https://stackoverflow.com/questions/57599887/create-arrows-in-plot-with-geopandas", "title": "Create arrows in plot with geopandas", "body": "<p>I have a code using geopandas which plots the electrical system of my city. I have data of the average vectorial velocity of the wind, and I wish to plot this information as arrows in the same plot. I searched the documentation of geopandas and did not found anything related. Is there a way to make theses arrows in the plot using geopandas or any other python library? I know how to do something similar with OpenCV, but in my case, I have the geographic coordinates and not the position of the pixel in the images.</p>\n"}, {"tags": ["python", "pandas", "datetime"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 11919853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZACEVmmuvV8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUO5-xCdXFSCVQbxtdcr6UuI_boA/photo.jpg?sz=128", "display_name": "Matthew Lynn", "link": "https://stackoverflow.com/users/11919853/matthew-lynn"}, "edited": false, "score": 0, "creation_date": 1566435017, "post_id": 57600493, "comment_id": 101658585, "body": "Thank you so much! I&#39;ve been trying to work through this for the past few hours. Now I see what I was doing wrong."}], "tags": [], "owner": {"reputation": 1435, "user_id": 3866678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7yZyO.png?s=128&g=1", "display_name": "Michael Gardner", "link": "https://stackoverflow.com/users/3866678/michael-gardner"}, "is_accepted": true, "score": 1, "last_activity_date": 1566431872, "creation_date": 1566431872, "answer_id": 57600493, "question_id": 57599851, "link": "https://stackoverflow.com/questions/57599851/why-cant-i-successfully-extract-month-from-the-date-given/57600493#57600493", "title": "Why can&#39;t I successfully extract month from the date given?", "body": "<p>Convert the column to a string.</p>\n\n<pre><code>pharmtotal_df['date'] = pd.to_datetime(pharmtotal_df['SLS_DTE_NBR'].astype('str'))\npharmtotal_df['month'] = pharmtotal_df['date'].dt.month\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 11919853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZACEVmmuvV8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUO5-xCdXFSCVQbxtdcr6UuI_boA/photo.jpg?sz=128", "display_name": "Matthew Lynn", "link": "https://stackoverflow.com/users/11919853/matthew-lynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 57600493, "answer_count": 1, "score": 0, "last_activity_date": 1566431872, "creation_date": 1566426139, "question_id": 57599851, "link": "https://stackoverflow.com/questions/57599851/why-cant-i-successfully-extract-month-from-the-date-given", "title": "Why can&#39;t I successfully extract month from the date given?", "body": "<p>I am having issues with trying to extract MONTH from the given dates in the following table:</p>\n\n<pre><code>Out[65]: \n            PROD_NBR                             PROD_DESC  MAJOR_CAT_CD  \\\n0      -7.358821e+10                 VAL BABYS 1ST GENERAL          9687   \n1      -7.358821e+10                 VAL BABYS 1ST GENERAL          9687   \n2       7.358820e+10                FLAT WRAP BDAY GENERAL          9687   \n3       7.358821e+10            BDAY MOTHER-IN-LAW GENERAL          9687   \n4       7.358821e+10       EAS GRT-GRFATH/GRPA GRT-GRANDPA          9687   \n              ...                                   ...           ...   \n878509  8.770156e+09                GNP TUSSIN DM EXP 4 OZ          5228   \n878510  3.458024e+10  PSEUDOEPHEDRINE 30MG TABLET 24CT PER          5228   \n878511  3.458024e+10  PSEUDOEPHEDRINE 30MG TABLET 24CT PER          5228   \n878512  3.458024e+10  PSEUDOEPHEDRINE 30MG TABLET 24CT PER          5228   \n878513  3.638240e+10       MUCINEX EXPECTORANT TABLET 20CT          5228   \n                            BSKT_ID           PHRMCY_NBR  SLS_DTE_NBR  \\\n0       600010665100006106120160128   748613589991092598     20160128   \n1       600010665100006202720160208   748613589991092598     20160208   \n2       600010665100007106220160518   748613589991092598     20160518   \n3       600010665100006487120160310   748613589991092598     20160310   \n4       600010665100006626120160324   748613589991092598     20160324   \n                             ...                  ...          ...   \n878509     400071264319000620160125  4754955394504903019     20160125   \n878510     400071264319607020160318  4754955394504903019     20160318   \n878511     400071264319336120160223  4754955394504903019     20160223   \n878512     400071264319229120160213  4754955394504903019     20160213   \n878513     400071264319109920160202  4754955394504903019     20160202   \n        EXT_SLS_AMT  SLS_QTY  MAJOR_CAT_DESC         PHRMCY_NAM ST_CD  \\\n0              1.25        1  GREETING CARDS  GNP PHARMACY #860    NY   \n1              1.25        1  GREETING CARDS  GNP PHARMACY #860    NY   \n2              1.25        1  GREETING CARDS  GNP PHARMACY #860    NY   \n3              1.75        1  GREETING CARDS  GNP PHARMACY #860    NY   \n4              1.38        1  GREETING CARDS  GNP PHARMACY #860    NY   \n             ...      ...             ...                ...   ...   \n878509         3.99        1     HEALTH CARE  GNP PHARMACY #500    CT   \n878510         2.94        1     HEALTH CARE  GNP PHARMACY #500    CT   \n878511         2.94        1     HEALTH CARE  GNP PHARMACY #500    CT   \n878512         2.94        1     HEALTH CARE  GNP PHARMACY #500    CT   \n878513        14.99        1     HEALTH CARE  GNP PHARMACY #500    CT   \n                                date  month  \n0      1970-01-01 00:00:00.020160128      1  \n1      1970-01-01 00:00:00.020160208      1  \n2      1970-01-01 00:00:00.020160518      1  \n3      1970-01-01 00:00:00.020160310      1  \n4      1970-01-01 00:00:00.020160324      1  \n                              ...    ...  \n878509 1970-01-01 00:00:00.020160125      1  \n878510 1970-01-01 00:00:00.020160318      1  \n878511 1970-01-01 00:00:00.020160223      1  \n878512 1970-01-01 00:00:00.020160213      1  \n878513 1970-01-01 00:00:00.020160202      1\n</code></pre>\n\n<p>My attempt to extract the months:</p>\n\n<pre><code>pharmtotal_df['date'] = pd.to_datetime(pharmtotal_df['SLS_DTE_NBR'])\npharmtotal_df['month'] = pharmtotal_df['date'].dt.month\n</code></pre>\n\n<p>I'm not sure why the new date and month columns look so messy. Does anyone have an idea of where I'm going wrong?</p>\n"}, {"tags": ["python", "python-3.x", "function"], "comments": [{"owner": {"reputation": 591, "user_id": 1322811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17079f3bc9aff7216be6a38643dbe13a?s=128&d=identicon&r=PG", "display_name": "afarley", "link": "https://stackoverflow.com/users/1322811/afarley"}, "edited": false, "score": 0, "creation_date": 1566425974, "post_id": 57599783, "comment_id": 101656859, "body": "Not sure if python has anything liket his built-in, but I think &#39;executor&#39; is the common name for this mechanism.   It&#39;s probably hard to find a good reference because this question is actually very general and different applications solve it in different ways.   The theoretical answer to this question is probably a sequence/control/list monad."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1566425984, "post_id": 57599783, "comment_id": 101656860, "body": "The debugger maybe? With a Tcl/expect script driving it\ud83d\ude09"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "edited": false, "score": 1, "creation_date": 1566426128, "post_id": 57599783, "comment_id": 101656906, "body": "You&#39;re describing <a href=\"https://docs.python.org/3/library/pdb.html#pdb.runcall\" rel=\"nofollow noreferrer\"><code>pdb.runcall</code></a>."}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 1, "creation_date": 1566426533, "post_id": 57599783, "comment_id": 101657001, "body": "Make your function a generator and yield values when you want a &quot;stop&quot;."}, {"owner": {"reputation": 3839, "user_id": 3413092, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rp4yT.png?s=128&g=1", "display_name": "ozgeneral", "link": "https://stackoverflow.com/users/3413092/ozgeneral"}, "reply_to_user": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "edited": false, "score": 0, "creation_date": 1566426843, "post_id": 57599783, "comment_id": 101657074, "body": "@blhsing <code>pdb.runcall</code> looks like it is specifically intended for debugging. I&#39;m not sure if this would impose any performance drawbacks. (I will check and consider this as a possible solution when I start coding this)"}, {"owner": {"reputation": 3839, "user_id": 3413092, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rp4yT.png?s=128&g=1", "display_name": "ozgeneral", "link": "https://stackoverflow.com/users/3413092/ozgeneral"}, "reply_to_user": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1566426869, "post_id": 57599783, "comment_id": 101657081, "body": "@ipaleka that wouldn&#39;t be generic, see example use cases I added"}, {"owner": {"reputation": 5800, "user_id": 6163736, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/TKHBG.jpg?s=128&g=1", "display_name": "stacksonstacks", "link": "https://stackoverflow.com/users/6163736/stacksonstacks"}, "edited": false, "score": 0, "creation_date": 1566427235, "post_id": 57599783, "comment_id": 101657184, "body": "Depends on what &quot;step by step&quot; means. There are quite a few options to achieve this. You could maintain an interpreter instance per function and feed it instructions line by line. This is not far off how jupyter notebooks work."}, {"owner": {"reputation": 3839, "user_id": 3413092, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rp4yT.png?s=128&g=1", "display_name": "ozgeneral", "link": "https://stackoverflow.com/users/3413092/ozgeneral"}, "reply_to_user": {"reputation": 5800, "user_id": 6163736, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/TKHBG.jpg?s=128&g=1", "display_name": "stacksonstacks", "link": "https://stackoverflow.com/users/6163736/stacksonstacks"}, "edited": false, "score": 0, "creation_date": 1566427764, "post_id": 57599783, "comment_id": 101657295, "body": "@stacksonstacks I think executing it line by line would be fine. If desired user can always pick a specific line and execute it with the same kind of step_executor recursively in case needed. I would like to have this without having any side effects (for example if a function does access to a global variable or belongs to a class etc, it should still behave the same in each of its steps, Im not sure if this\u2019d be possible with interpreter), also efficiency is a concern which probably limits the options quite a bit"}, {"owner": {"reputation": 5800, "user_id": 6163736, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/TKHBG.jpg?s=128&g=1", "display_name": "stacksonstacks", "link": "https://stackoverflow.com/users/6163736/stacksonstacks"}, "edited": false, "score": 0, "creation_date": 1566428775, "post_id": 57599783, "comment_id": 101657483, "body": "This sounds very much like you&#39;ll want to leverage the debugger as others have mentioned"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1566430099, "post_id": 57599783, "comment_id": 101657794, "body": "@MarkSetchell You don&#39;t need to use Tcl/expect to drive the debugger. The <code>pdb.Pdb</code> constructor takes <code>stdin</code> and <code>stdout</code> as parameters so you can feed it commands and retrieve outputs directly."}], "answers": [{"comments": [{"owner": {"reputation": 3839, "user_id": 3413092, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rp4yT.png?s=128&g=1", "display_name": "ozgeneral", "link": "https://stackoverflow.com/users/3413092/ozgeneral"}, "edited": false, "score": 0, "creation_date": 1566427032, "post_id": 57599948, "comment_id": 101657130, "body": "that would cause repetition of yield, and I wouldn&#39;t be able to pass any function (function specifically needs to have a yield in every second line). this would limit it&#39;s use for functions that come from third party libraries for example (see example use cases)"}, {"owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "reply_to_user": {"reputation": 3839, "user_id": 3413092, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rp4yT.png?s=128&g=1", "display_name": "ozgeneral", "link": "https://stackoverflow.com/users/3413092/ozgeneral"}, "edited": false, "score": 0, "creation_date": 1566427509, "post_id": 57599948, "comment_id": 101657241, "body": "What about using <code>inspect.getsource(f)</code> and adding said yields, executing the result then with the above step_by_step_executor. A bit hacky. Using a debugger may make sense."}, {"owner": {"reputation": 3839, "user_id": 3413092, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rp4yT.png?s=128&g=1", "display_name": "ozgeneral", "link": "https://stackoverflow.com/users/3413092/ozgeneral"}, "edited": false, "score": 0, "creation_date": 1566427815, "post_id": 57599948, "comment_id": 101657301, "body": "If it gets to implementing myself, I was thinking getting the source and using exec for each line, but that would work too"}, {"owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "reply_to_user": {"reputation": 3839, "user_id": 3413092, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rp4yT.png?s=128&g=1", "display_name": "ozgeneral", "link": "https://stackoverflow.com/users/3413092/ozgeneral"}, "edited": false, "score": 1, "creation_date": 1566427873, "post_id": 57599948, "comment_id": 101657318, "body": "as long as you can adequately control the scope of the arguments"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "edited": false, "score": 1, "creation_date": 1566433538, "post_id": 57599948, "comment_id": 101658365, "body": "This simply isn&#39;t a safe solution. Unless you fully parse the code it is going to be hard for you to identify the end of a &quot;line&quot; to insert a <code>yield</code> statement into when the line is part of a multi-line statement."}, {"owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "reply_to_user": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "edited": false, "score": 0, "creation_date": 1566485027, "post_id": 57599948, "comment_id": 101679055, "body": "@blhsing agreed"}], "tags": [], "owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "is_accepted": false, "score": 2, "last_activity_date": 1566427061, "last_edit_date": 1566427061, "creation_date": 1566426838, "answer_id": 57599948, "question_id": 57599783, "link": "https://stackoverflow.com/questions/57599783/is-it-possible-to-control-how-a-function-will-be-executed-in-python/57599948#57599948", "title": "Is it possible to control how a function will be executed in python?", "body": "<p>How about <a href=\"https://docs.python.org/3/reference/simple_stmts.html#the-yield-statement\" rel=\"nofollow noreferrer\"><code>yield</code></a> - it does more than people think and can be used to fundamentally represent coroutines and ordering - a feature perhaps more fundamental than it's use to build iterators. Your example:</p>\n\n<pre><code>def example_function():\n    print(\"line 1\")\n    yield\n    print(\"line 2\")\n    yield\n    print(\"line 3\")\n    return 3\n\ndef step_by_step_executor(fn):\n    res = fn()\n    while True:\n        try:\n            print(next(res))\n        except StopIteration as e:\n            retval = e.value\n            break\n    return retval\n\nprint(step_by_step_executor(example_function))\n</code></pre>\n\n<p>Which results in </p>\n\n<pre><code>line 1\nNone\nline 2\nNone\nline 3\n3\n</code></pre>\n\n<p>As the return value of the generator is given as the value of the stop iteration that is raised. If you choose to intermittently <code>yield</code> values (instead of blank <code>yield</code>), you will see those printed at each iteration as well.</p>\n\n<p>One common place where this kind of code comes up is the <a href=\"https://docs.python.org/3/library/contextlib.html\" rel=\"nofollow noreferrer\"><code>contextlib</code></a> <code>contextmanager</code> decorator which is used to turn a generator into a context manager though the series of enter and exit steps.</p>\n"}, {"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 4, "last_activity_date": 1566452909, "last_edit_date": 1566452909, "creation_date": 1566432800, "answer_id": 57600567, "question_id": 57599783, "link": "https://stackoverflow.com/questions/57599783/is-it-possible-to-control-how-a-function-will-be-executed-in-python/57600567#57600567", "title": "Is it possible to control how a function will be executed in python?", "body": "<p>You can create a Python debugger <code>pdb.Pdb</code> instance and pass to it a custom file-like object that implements the <code>write</code> method to selectively output the code portions of the debugger output, and the <code>readline</code> method to always send to the debugger the <code>n</code> (short for <code>next</code>) command. Since the debugger always outputs the line that returns from a function twice, the second time of which is preceded by a <code>--Return--</code> line, you can use a flag to avoid outputting the redundant line of return:</p>\n\n<pre><code>import pdb\n\nclass PdbHandler:\n    def __init__(self):\n        self.returning = False\n\n    def write(self, buffer):\n        if buffer == '--Return--':\n            self.returning = True\n\n        # each line of code is prefixed with a '-&gt; '\n        _, *code = buffer.split('\\n-&gt; ', 1)\n        if code:\n            if self.returning:\n                self.returning = False\n            else:\n                print(code[0])\n\n    def readline(self):\n        return 'n\\n'\n\n    def flush(self):\n        pass\n\ndef example_function():\n    print(\"line 1\")\n    print(\"line 2\")\n    return (3)\n\nhandler = PdbHandler()\nprint('returns', pdb.Pdb(stdin=handler, stdout=handler).runcall(example_function))\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>print(\"line 1\")\nline 1\nprint(\"line 2\")\nline 2\nreturn (3)\nreturns 3\n</code></pre>\n"}], "owner": {"reputation": 3839, "user_id": 3413092, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rp4yT.png?s=128&g=1", "display_name": "ozgeneral", "link": "https://stackoverflow.com/users/3413092/ozgeneral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 2, "accepted_answer_id": 57600567, "answer_count": 2, "score": 3, "last_activity_date": 1566458574, "creation_date": 1566425678, "last_edit_date": 1566458574, "question_id": 57599783, "link": "https://stackoverflow.com/questions/57599783/is-it-possible-to-control-how-a-function-will-be-executed-in-python", "title": "Is it possible to control how a function will be executed in python?", "body": "<p>I know python is extremely flexible allowing -almost- anything user wants. However I have never seen nor heard of such a feature, and could not find anything related online: is it possible to execute a variable that is a function step by step?</p>\n\n<pre><code>def example_function():\n  print(\"line 1\")\n  # stuff\n  print(\"line 2\")\n  # stuff\n  return(3)\n\ndef step_by_step_executor(fn):\n  while fn.has_next_step():\n    print(fn.current_step)\n    fn.execute_step()\n  return fn.return\n\nstep_by_step_executor(example_function) \n# print(\"line 1\")\n# line 1\n# stuff\n# print(\"line 2\")\n# line 2\n# stuff\n# return(3)\n# returns 3\n</code></pre>\n\n<p>I think I can implement something like this using a combination of <code>inspect</code>, <code>exec</code> and maybe <code>__call__</code>, but I am interested to see if there is an already existing name and implementation for this.</p>\n\n<p>Example use cases:</p>\n\n<pre><code>@do_y_instead_of_x\ndef some_function():\n  do stuff\n  do x\n  do more\nsome_function()\n# does stuff\n# does y\n# does more\n\n@update_progress_bar_on_loops\ndef some_other_function():\n  do stuff\n  for x in range...:\n     ...\n  do more\nsome_other_function()\n# does stuff\n# initializes a progress bar, reports whats going on, does the loop\n# does more\n</code></pre>\n"}, {"tags": ["python", "selenium", "google-chrome", "selenium-chromedriver", "google-chrome-headless"], "comments": [{"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1566426235, "post_id": 57599776, "comment_id": 101656934, "body": "Check this: <a href=\"https://stackoverflow.com/questions/45631715/downloading-with-chrome-headless-and-selenium/47366981#47366981\" title=\"downloading with chrome headless and selenium\">stackoverflow.com/questions/45631715/&hellip;</a> (<a href=\"https://stackoverflow.com/questions/56778991/selenium-does-not-download-with-options-passed-to-the-chrome-driver/56779396#56779396\" title=\"selenium does not download with options passed to the chrome driver\">stackoverflow.com/questions/56778991/&hellip;</a>)"}, {"owner": {"reputation": 301, "user_id": 11547296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17ee34e1d0920bd8749e26349b3064ed?s=128&d=identicon&r=PG&f=1", "display_name": "CBury", "link": "https://stackoverflow.com/users/11547296/cbury"}, "reply_to_user": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1566426665, "post_id": 57599776, "comment_id": 101657032, "body": "This is exactly the code I post."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1566427921, "post_id": 57599776, "comment_id": 101657331, "body": "Just use regular mode and run it with xvfb-run"}, {"owner": {"reputation": 8717, "user_id": 3124333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MCMEh.jpg?s=128&g=1", "display_name": "SiKing", "link": "https://stackoverflow.com/users/3124333/siking"}, "edited": false, "score": 0, "creation_date": 1566429580, "post_id": 57599776, "comment_id": 101657672, "body": "Just use this: <a href=\"https://stackoverflow.com/a/24347178/3124333\">stackoverflow.com/a/24347178/3124333</a>"}], "answers": [{"comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 301, "user_id": 11547296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17ee34e1d0920bd8749e26349b3064ed?s=128&d=identicon&r=PG&f=1", "display_name": "CBury", "link": "https://stackoverflow.com/users/11547296/cbury"}, "edited": false, "score": 0, "creation_date": 1566482836, "post_id": 57606294, "comment_id": 101677708, "body": "@CBury Please ensure the <i>Chrome beta</i> version is <b>v77.0</b>"}, {"owner": {"reputation": 301, "user_id": 11547296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17ee34e1d0920bd8749e26349b3064ed?s=128&d=identicon&r=PG&f=1", "display_name": "CBury", "link": "https://stackoverflow.com/users/11547296/cbury"}, "edited": false, "score": 0, "creation_date": 1566483818, "post_id": 57606294, "comment_id": 101678303, "body": "I&#39;ve updated my chrome and chromedrive to 77 and still don&#39;t download"}, {"owner": {"reputation": 411, "user_id": 1086884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ac7c50770603b53964d44db373e8e48?s=128&d=identicon&r=PG", "display_name": "Shinichi Maeshima", "link": "https://stackoverflow.com/users/1086884/shinichi-maeshima"}, "edited": false, "score": 1, "creation_date": 1568705020, "post_id": 57606294, "comment_id": 102348692, "body": "Is there another way to set download_dir?"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 411, "user_id": 1086884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ac7c50770603b53964d44db373e8e48?s=128&d=identicon&r=PG", "display_name": "Shinichi Maeshima", "link": "https://stackoverflow.com/users/1086884/shinichi-maeshima"}, "edited": false, "score": 0, "creation_date": 1568715523, "post_id": 57606294, "comment_id": 102354268, "body": "@ShinichiMaeshima Checkout the updated answer and let me know if you need further assistance."}, {"owner": {"reputation": 1172, "user_id": 2542138, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100003243180482/picture?type=large", "display_name": "Ajay Gupta", "link": "https://stackoverflow.com/users/2542138/ajay-gupta"}, "edited": false, "score": 0, "creation_date": 1583167979, "post_id": 57606294, "comment_id": 107016766, "body": "your example is working however I have used the same piece of code for setting up selenium to download in headless chrome and it&#39;s not working"}, {"owner": {"reputation": 9353, "user_id": 1887101, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b6840488291a0b81df1e6fd0f91f7929?s=128&d=identicon&r=PG&f=1", "display_name": "Adjit", "link": "https://stackoverflow.com/users/1887101/adjit"}, "edited": false, "score": 0, "creation_date": 1585673840, "post_id": 57606294, "comment_id": 107842890, "body": "I really wish this worked... they only added the functionality to v77.0? and subsequently took it out? using chromedriver v79  and selenium 4.0 but nothing here seems to have worked for downloading a PDF"}, {"owner": {"reputation": 9353, "user_id": 1887101, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b6840488291a0b81df1e6fd0f91f7929?s=128&d=identicon&r=PG&f=1", "display_name": "Adjit", "link": "https://stackoverflow.com/users/1887101/adjit"}, "edited": false, "score": 0, "creation_date": 1585677397, "post_id": 57606294, "comment_id": 107844717, "body": "@DebanjanB Looks like a fix for this is coming in chromium v83 - <a href=\"https://bugs.chromium.org/p/chromedriver/issues/detail?id=3120#c10\" rel=\"nofollow noreferrer\">bugs.chromium.org/p/chromedriver/issues/detail?id=3120#c10</a>"}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 19, "last_activity_date": 1568888914, "last_edit_date": 1568888914, "creation_date": 1566466522, "answer_id": 57606294, "question_id": 57599776, "link": "https://stackoverflow.com/questions/57599776/download-file-through-google-chrome-in-headless-mode/57606294#57606294", "title": "Download file through Google Chrome in headless mode", "body": "<h2>First the solution</h2>\n\n<blockquote>\n  <h1>Minimum Prerequisites:</h1>\n  \n  <ul>\n  <li><em>Selenium</em> client version: <a href=\"http://selenium-release.storage.googleapis.com/index.html?path=3.141/\" rel=\"noreferrer\">Selenium v3.141.59</a></li>\n  <li><em>Chrome</em> version: Chrome v77.0</li>\n  <li><em>ChromeDriver</em> version: <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=77.0.3865.40/\" rel=\"noreferrer\">ChromeDriver v77.0</a></li>\n  </ul>\n</blockquote>\n\n<p>To download the file clicking on the element with text as <strong>Download Data</strong> within <a href=\"https://www.mockaroo.com/\" rel=\"noreferrer\">this website</a> you can use the following solution:</p>\n\n<ul>\n<li><p>Code Block:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.chrome.options import Options\n\noptions = Options()\noptions.add_argument(\"--headless\")\noptions.add_argument(\"--window-size=1920,1080\")\noptions.add_experimental_option(\"excludeSwitches\", [\"enable-automation\"])\noptions.add_experimental_option('useAutomationExtension', False)\ndriver = webdriver.Chrome(chrome_options=options, executable_path=r'C:\\Utility\\BrowserDrivers\\chromedriver.exe', service_args=[\"--log-path=./Logs/DubiousDan.log\"])\nprint (\"Headless Chrome Initialized\")\nparams = {'behavior': 'allow', 'downloadPath': r'C:\\Users\\Debanjan.B\\Downloads'}\ndriver.execute_cdp_cmd('Page.setDownloadBehavior', params)\ndriver.get(\"https://www.mockaroo.com/\")\ndriver.execute_script(\"scroll(0, 250)\"); \nWebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.CSS_SELECTOR, \"button#download\"))).click()\nprint (\"Download button clicked\")\n#driver.quit()\n</code></pre></li>\n<li><p>Console Output:</p>\n\n<pre><code>Headless Chrome Initialized\nDownload button clicked\n</code></pre></li>\n<li><p>File Downloading snapshot:</p></li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/tseNP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/tseNP.png\" alt=\"ChromeHeadlessDownload\"></a></p>\n\n<hr>\n\n<h2>Details</h2>\n\n<p>Downloading files through <a href=\"https://chromium.googlesource.com/chromium/src/+/lkgr/headless/README.md\" rel=\"noreferrer\">Headless Chromium</a> was one of the most sought functionality since <a href=\"https://developers.google.com/web/updates/2017/04/headless-chrome\" rel=\"noreferrer\">Headless Chrome</a> was introduced.</p>\n\n<p>Since then there were different work-arounds published by different contributors and some of them are:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/45631715/downloading-with-chrome-headless-and-selenium\">Downloading with chrome headless and selenium</a></li>\n<li><a href=\"https://stackoverflow.com/questions/24346872/python-equivalent-of-a-given-wget-command\">Python equivalent of a given wget command</a></li>\n</ul>\n\n<p>Now the, the good news is <em>Chromium</em> team have officially announced the arrival of the functionality <strong>Downloading file through <code>Headless Chromium</code></strong>.</p>\n\n<hr>\n\n<p>In the discussion <a href=\"https://bugs.chromium.org/p/chromedriver/issues/detail?id=2454\" rel=\"noreferrer\">Headless mode doesn't save file downloads</a> <a href=\"https://bugs.chromium.org/u/1164142555/\" rel=\"noreferrer\">@eseckler</a> mentioned:</p>\n\n<blockquote>\n  <p>Downloads in headless work a little differently. There's the <code>Page.setDownloadBehavior</code> devtools command to set a download folder. We're working on a way to use DevTools network interception to stream the downloaded file via DevTools as well.</p>\n</blockquote>\n\n<p>A detailed discussion can be found at <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=696481\" rel=\"noreferrer\">Issue 696481: Headless mode doesn't save file downloads</a></p>\n\n<p>Finally, <a href=\"https://bugs.chromium.org/u/3779532838/\" rel=\"noreferrer\">@bugdroid</a> revision seems to have nailed the issue for us.</p>\n\n<hr>\n\n<h2>[ChromeDriver] Added support for headless mode to download files</h2>\n\n<blockquote>\n  <p>Previously, Chromedriver running in headless mode would not properly download files due to the fact it sparsely parses the preference file given to it. Engineers from the headless chrome team recommended using DevTools's \"Page.setDownloadBehavior\" to fix this. This changelist implements this fix. Downloaded files default to the current directory and can be set using download_dir when instantiating a chromedriver instance. Also added tests to ensure proper download functionality.</p>\n</blockquote>\n\n<p>Here is the <a href=\"https://chromium.googlesource.com/chromium/src.git/+/8e93021e7a68321de6789f1d9efd4a722bd72ac4\" rel=\"noreferrer\">revision</a> and <a href=\"https://chromium.googlesource.com/chromium/src/+/8e93021e7a68321de6789f1d9efd4a722bd72ac4\" rel=\"noreferrer\">commit</a></p>\n\n<p>From <a href=\"https://chromedriver.storage.googleapis.com/77.0.3865.40/notes.txt\" rel=\"noreferrer\">ChromeDriver v77.0.3865.40 (2019-08-20)</a> release notes:</p>\n\n<pre><code>Resolved issue 2454: Headless mode doesn't save file downloads [Pri-2]\n</code></pre>\n\n<hr>\n\n<h2>Solution</h2>\n\n<ul>\n<li>Update <em>ChromeDriver</em> to  latest <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=77.0.3865.40/\" rel=\"noreferrer\">ChromeDriver v77.0</a> level.</li>\n<li>Update <em>Chrome</em> to  <em>Chrome Version 77.0</em> level. (as per <a href=\"https://chromedriver.storage.googleapis.com/76.0.3809.68/notes.txt\" rel=\"noreferrer\">ChromeDriver v76.0 release notes</a>)</li>\n<li><p><strong>Note</strong>: <em>Chrome v77.0</em> is yet to be GAed/pushed for release so till then you can download and install a development build and test either from:</p>\n\n<ul>\n<li><a href=\"https://www.google.com/intl/en/chrome/canary/\" rel=\"noreferrer\">Chrome Canary</a></li>\n<li>Latest build from the <a href=\"https://www.chromium.org/getting-involved/dev-channel\" rel=\"noreferrer\">Dev Channel</a></li>\n</ul></li>\n</ul>\n\n<hr>\n\n<h2>Outro</h2>\n\n<p>However <strong>Mac OSX</strong> users have a wait for their pie as <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=979847\" rel=\"noreferrer\">On Chromedriver, headless chrome crashes after sending Page.setDownloadBehavior on MacOSX</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 301, "user_id": 11547296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17ee34e1d0920bd8749e26349b3064ed?s=128&d=identicon&r=PG&f=1", "display_name": "CBury", "link": "https://stackoverflow.com/users/11547296/cbury"}, "edited": false, "score": 0, "creation_date": 1566482143, "post_id": 57610614, "comment_id": 101677237, "body": "This was my first try, but the href attribute is: href=&quot;javascript:void(0)&quot;"}], "tags": [], "owner": {"reputation": 116880, "user_id": 2897748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d278f6ada8828c902a13ee8a5e523cce?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitri T", "link": "https://stackoverflow.com/users/2897748/dmitri-t"}, "is_accepted": false, "score": -5, "last_activity_date": 1566480942, "creation_date": 1566480942, "answer_id": 57610614, "question_id": 57599776, "link": "https://stackoverflow.com/questions/57599776/download-file-through-google-chrome-in-headless-mode/57610614#57610614", "title": "Download file through Google Chrome in headless mode", "body": "<p>I don't think you should be using the browser for downloading content, leave it to Chrome developers/testers. </p>\n\n<p>I believe you should rather get <a href=\"https://www.w3schools.com/tags/att_a_href.asp\" rel=\"nofollow noreferrer\">href attribute</a> of the element you want to download and obtain it using <a href=\"https://2.python-requests.org/en/master/\" rel=\"nofollow noreferrer\">requests library</a>  </p>\n\n<p>If your site requires authentication you could fetch <a href=\"https://docs.experitest.com/display/TC/Cookies\" rel=\"nofollow noreferrer\">cookies</a> from the browser instance and pass them to <a href=\"https://2.python-requests.org/en/master/user/advanced/#session-objects\" rel=\"nofollow noreferrer\">requests.Session</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 12998153, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NCt90hCxIEg/AAAAAAAAAAI/AAAAAAAAAAA/AKF05nCYT9hZYSI4FsbOghmpsB6Qu_9xnQ/photo.jpg?sz=128", "display_name": "Justin Chetty", "link": "https://stackoverflow.com/users/12998153/justin-chetty"}, "is_accepted": false, "score": 2, "last_activity_date": 1583223583, "creation_date": 1583223583, "answer_id": 60502848, "question_id": 57599776, "link": "https://stackoverflow.com/questions/57599776/download-file-through-google-chrome-in-headless-mode/60502848#60502848", "title": "Download file through Google Chrome in headless mode", "body": "<p>For javascript use below code:</p>\n\n<pre><code>    const chrome = require('selenium-webdriver/chrome');\n    let options = new chrome.Options();\n    options.addArguments('--headless --window-size=1500,1200');\n    options.setUserPreferences({ 'plugins.always_open_pdf_externally': true,\n    \"profile.default_content_settings.popups\": 0,\n    \"download.default_directory\": Download_File_Path });\n    driver = await new webdriver.Builder().setChromeOptions(options).forBrowser('chrome').build();\n</code></pre>\n\n<p><strong>Then switch tabs as soon as you click the download button:</strong></p>\n\n<pre><code>    await driver.sleep(1000); \n    var Handle = await driver.getAllWindowHandles();\n    await driver.switchTo().window(Handle[1]);\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 11547296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17ee34e1d0920bd8749e26349b3064ed?s=128&d=identicon&r=PG&f=1", "display_name": "CBury", "link": "https://stackoverflow.com/users/11547296/cbury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15914, "favorite_count": 7, "answer_count": 3, "score": 17, "last_activity_date": 1590371123, "creation_date": 1566425640, "last_edit_date": 1590371123, "question_id": 57599776, "link": "https://stackoverflow.com/questions/57599776/download-file-through-google-chrome-in-headless-mode", "title": "Download file through Google Chrome in headless mode", "body": "<p>I'm do me code in Cromedrive in 'normal' mode and works fine. When I change to headless mode it don't download the file. I already try the code I found alround internet, but didn't work.</p>\n\n<pre><code>chrome_options = Options()\nchrome_options.add_argument(\"--headless\")\nself.driver = webdriver.Chrome(chrome_options=chrome_options, executable_path=r'{}/chromedriver'.format(os.getcwd()))\nself.driver.set_window_size(1024, 768)\nself.driver.command_executor._commands[\"send_command\"] = (\"POST\", '/session/$sessionId/chromium/send_command')\n\nparams = {'cmd': 'Page.setDownloadBehavior', 'params': {'behavior': 'allow', 'downloadPath': os.getcwd()}}\nself.driver.execute(\"send_command\", params)\n</code></pre>\n\n<p>Anyone have any idea about how solve this problem?</p>\n\n<p>PS: I don't need to use Chomedrive necessarily. If it works in another drive it's fine for me.</p>\n"}, {"tags": ["python", "oracle", "web-services", "soap", "wsdl"], "owner": {"reputation": 121, "user_id": 127671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CHMX2.jpg?s=128&g=1", "display_name": "Brent", "link": "https://stackoverflow.com/users/127671/brent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 422, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1566515347, "creation_date": 1566425633, "last_edit_date": 1566515347, "question_id": 57599774, "link": "https://stackoverflow.com/questions/57599774/using-python-3-7-obtaining-data-from-oracle-business-intelligence-wsdl", "title": "Using Python 3.7, obtaining data from Oracle Business Intelligence WSDL", "body": "<p>I'm working on a project where I need to query data from Oracle Business Intelligence (OBI) using Python. The OBI API is soap/wsdl. I've been able to list certain details from OBI but have not figured out how to get actual data.</p>\n\n<p>I'm running Windows 10, using Visual Studio Code. Python 3.7.4. Currently using the zeep module but have used suds with the same limitation.</p>\n\n<p>I've tried several different calls but usually get errors due to a type conversion issue or parameters that I'm not sure how to get.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from zeep import Client, Settings\nsettings = Settings(strict=False, xml_huge_tree=True)\nclient = Client(wsdl='http://obi_address:[port]/analytics-ws/saw.dll/wsdl/v12', settings=settings)\nSAWSessionService = client.create_service('{urn://oracle.bi.webservices/v12}SAWSessionService','http://obi_address:[port]/analytics-ws/saw.dll?SoapImpl=nQSessionService')\nsessionid = SAWSessionService.logon(obi_username,obi_password)\n\nMetadataService = client.create_service('{urn://oracle.bi.webservices/v12}MetadataService','http://obi_address:[port]/analytics-ws/saw.dll?SoapImpl=metadataService')\nsa_list=MetadataService.getSubjectAreas(sessionid)\nfor sa in sa_list:\n    sa_tbls= MetadataService.describeSubjectArea(sa.name,'IncludeTables',sessionid)\n    print(sa_tbls)\n</code></pre>\n\n<p>So here I get a list of the tables for each subject area, but I'm not sure how to go about querying the data in the tables. Does anyone have any experience with this?</p>\n\n<p>I'm using documentation found here, though not all calls are described.\n<a href=\"https://docs.oracle.com/middleware/1221/biee/BIEIT/methods.htm#BIEIT237\" rel=\"nofollow noreferrer\">https://docs.oracle.com/middleware/1221/biee/BIEIT/methods.htm#BIEIT237</a></p>\n"}, {"tags": ["python", "regex", "python-3.x", "web-scraping"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1566427816, "post_id": 57599766, "comment_id": 101657302, "body": "That section of the web site doesn&#39;t seem to be formatted in any consistent way, it&#39;s just plain text."}], "answers": [{"tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 0, "last_activity_date": 1566429722, "creation_date": 1566429722, "answer_id": 57600282, "question_id": 57599766, "link": "https://stackoverflow.com/questions/57599766/cant-parse-weird-looking-website-addresses-from-some-identical-links/57600282#57600282", "title": "Can&#39;t parse weird looking website addresses from some identical links", "body": "<p>I'm sure it won't take long to break the following</p>\n\n<pre><code>import re\nimport requests\nfrom bs4 import BeautifulSoup\n\nlinks = [\n    'https://colegios.es/2012/santisimo-rosario-mosen-rubi-avila/',\n    'https://colegios.es/2012/cra-el-valle-villarejo-del-valle/',\n    'https://colegios.es/2012/ceip-las-canadas-trescasas/',\n    'https://colegios.es/2012/cra-el-barranco-san-esteban-del-valle/'\n]\n\ndef get_website(link):\n    res = s.get(link,headers={'User-Agent':'Mozilla/5.0'})\n    soup = BeautifulSoup(res.text,\"html5lib\")\n    y = str(soup.select_one('.post-content p')).split('&lt;br/&gt;')[-2]\n    if 'Direcci\u00f3n' not in y:\n        y = re.sub(r'\\s{2,}', ' ', y).strip()\n        website = y.split(' ')[-1]\n        print(website)\n\nif __name__ == '__main__':\n    with requests.Session() as s:\n        for link in links:\n            get_website(link)\n</code></pre>\n"}], "owner": {"reputation": 140, "user_id": 10568531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e355807cad6f3abdf401e57032a6e6dc?s=128&d=identicon&r=PG&f=1", "display_name": "robots.txt", "link": "https://stackoverflow.com/users/10568531/robots-txt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566429722, "creation_date": 1566425584, "last_edit_date": 1566427426, "question_id": 57599766, "link": "https://stackoverflow.com/questions/57599766/cant-parse-weird-looking-website-addresses-from-some-identical-links", "title": "Can&#39;t parse weird looking website addresses from some identical links", "body": "<p>I'm trying to fetch the website address out of some identical webpages. I've created a regex expression to parse the same but the pattern I've defined is undoubetedly the worst one. How can I get only the website address from a webpage located within <code>p</code> tag under <code>post-content</code> class?.</p>\n\n<p>I've tried with:</p>\n\n<pre><code>import re\nimport requests\nfrom bs4 import BeautifulSoup\n\nlinks = [\n    'https://colegios.es/2012/santisimo-rosario-mosen-rubi-avila/',\n    'https://colegios.es/2012/cra-el-valle-villarejo-del-valle/',\n    'https://colegios.es/2012/ceip-las-canadas-trescasas/',\n    'https://colegios.es/2012/cra-el-barranco-san-esteban-del-valle/'\n]\n\ndef get_website(link):\n    res = requests.get(link,headers={'User-Agent':'Mozilla/5.0'})\n    soup = BeautifulSoup(res.text,\"html5lib\")\n    text = soup.select_one('.post-content &gt; p').get_text(strip=True, separator='\\n')\n    website = re.findall(r'\\s+(.*)\\n\\[', text)[0]\n    print(website)\n\nif __name__ == '__main__':\n    for link in links:\n        get_website(link)\n</code></pre>\n\n<p>Result I'm getting:</p>\n\n<pre><code>www3.planalfa.es/stmorosario\ncentros1.pntic.mec.es/elvalle/webCra\nDirecci\u00f3n: Las Pozas, 17 40194 Trescasas Segovia\nTel. 920 383 556 05005887@educa.jcyl.es   centros1.pntic.mec.es/cp.el.barranco\n</code></pre>\n\n<p>Desired results:</p>\n\n<pre><code>www3.planalfa.es/stmorosario\ncentros1.pntic.mec.es/elvalle/webCra\n\ncentros1.pntic.mec.es/cp.el.barranco\n</code></pre>\n"}, {"tags": ["python", "list", "for-loop"], "answers": [{"tags": [], "owner": {"reputation": 10045, "user_id": 77542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2bb52913c4cebae8835bb50c03996d5?s=128&d=identicon&r=PG", "display_name": "Tordek", "link": "https://stackoverflow.com/users/77542/tordek"}, "is_accepted": false, "score": 2, "last_activity_date": 1566426493, "last_edit_date": 1566426493, "creation_date": 1566426080, "answer_id": 57599843, "question_id": 57599760, "link": "https://stackoverflow.com/questions/57599760/why-below-code-is-giving-wrong-output-outside-loop/57599843#57599843", "title": "Why below code is giving wrong output outside loop", "body": "<p>You're modifying the <code>Cust</code> class instance instead of creating a new instance of it every loop:</p>\n\n<pre><code>def fetchName(surnames):\n    custinst=Cust\n    custinst.name=\"Gaurav\"+surnames\n    return custinst\n</code></pre>\n\n<p>Here <code>Cust</code> is the object that contains the class itself, not an instance of it.  You can verify this by doing <code>print(Cust.name)</code> after <code>Inside Loop</code>, which will print <code>GauravMax</code>.</p>\n\n<p>You have to create a new instance by calling the constructor:</p>\n\n<pre><code>def fetchName(surnames):\n    custinst=Cust()\n    custinst.name=\"Gaurav\"+surnames\n    return custinst\n</code></pre>\n\n<p>Currently, your constructor accesses the <code>name</code> property but it hasn't been set, so it will cause an error. You could just avoid that since it's not doing anything:</p>\n\n<pre><code>def Cust():\n    pass\n</code></pre>\n\n<p>But consider using the parameters of the constructor when instancing the object:</p>\n\n<pre><code>def Cust():\n    def __init__(self, name):\n        self.name = name\n</code></pre>\n\n<p>and then pass the name as a parameter:</p>\n\n<pre><code>def fetchName(surnames):\n    return Cust(\"Gaurav\"+surnames)\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10695407, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205214120510727/picture?type=large", "display_name": "Gaurav Agrahari", "link": "https://stackoverflow.com/users/10695407/gaurav-agrahari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1566427052, "creation_date": 1566425546, "last_edit_date": 1566425797, "question_id": 57599760, "link": "https://stackoverflow.com/questions/57599760/why-below-code-is-giving-wrong-output-outside-loop", "title": "Why below code is giving wrong output outside loop", "body": "<p>I have below python code </p>\n\n<pre><code>class Cust: \n    def __init__(self): \n        self.name \n\nsurname=[\"Lai\",\"Sharma\",\"Max\"]\ndef fetchName(surnames):\n    custinst=Cust\n    custinst.name=\"Gaurav\"+surnames\n    return custinst\n\nfinalname=[]\nprint(\"###inside loop###\")\nfor i in range(len(surname)):\n    finalname.append(fetchName(surname[i]))\n    print(finalname[i].name)\nprint(\"\\n###Outside Loop###\\n\") \nprint (finalname[0].name)\nprint (finalname[1].name)\nprint (finalname[2].name)\n</code></pre>\n\n<p>and below is the output</p>\n\n<pre><code> ###inside loop###\n GauravLai\n GauravSharma\n GauravMax\n\n ###Outside Loop###\n\n GauravMax\n GauravMax\n GauravMax\n</code></pre>\n\n<p>Issue is why outside loop all the values are coming as last assigned value i.e. GauravMax</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 12065, "user_id": 367865, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/78bdafae5cf469e2abebad372bb4e222?s=128&d=identicon&r=PG", "display_name": "Ouroborus", "link": "https://stackoverflow.com/users/367865/ouroborus"}, "edited": false, "score": 0, "creation_date": 1566426029, "post_id": 57599744, "comment_id": 101656873, "body": "It means you tried to subtract a future time from a past time (relatively) and got a negative time delta. These aren&#39;t intuitive in Python. You can do something like <code>str(abs(diff))</code> to get something human-readable."}, {"owner": {"reputation": 12065, "user_id": 367865, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/78bdafae5cf469e2abebad372bb4e222?s=128&d=identicon&r=PG", "display_name": "Ouroborus", "link": "https://stackoverflow.com/users/367865/ouroborus"}, "edited": false, "score": 1, "creation_date": 1566426057, "post_id": 57599744, "comment_id": 101656882, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8408397/python-timedelta-issue-with-negative-values\">Python timedelta issue with negative values</a>"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1566426367, "post_id": 57599744, "comment_id": 101656958, "body": "You could also parse these with <code>fromisoformat</code> <code>delta = datetime.fromisoformat(&#39;2019-08-21T22:06:58&#39;) - datetime.fromisoformat(&#39;2019-08-21T22:05:59&#39;)</code> These would produce a positive delta because the earlier date is subtracted from the later date."}], "owner": {"reputation": 73, "user_id": 11140557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90e143e86ec5bbf5912d6cb711677d9b?s=128&d=identicon&r=PG&f=1", "display_name": "Dave0", "link": "https://stackoverflow.com/users/11140557/dave0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566425440, "creation_date": 1566425440, "question_id": 57599744, "link": "https://stackoverflow.com/questions/57599744/understanding-difference-between-two-iso-8061-times", "title": "Understanding difference between two ISO 8061 times", "body": "<p>Having trouble understanding the difference between two time stamps in ISO 8061:</p>\n\n<p>I have two strings:</p>\n\n<pre><code>alert_time\n'2019-08-21T22:05:59.605Z'\n\ncurrent_time\n'2019-08-21T22:06:58'\n</code></pre>\n\n<p>i change the alert_time variable to match the formatting of current_time</p>\n\n<pre><code>alert_time = alert_time[:-5]\n\nalert_time\n'2019-08-21T22:05:59'\n</code></pre>\n\n<p>Now i want to see the difference between them</p>\n\n<pre><code>datetimeFormat = '%Y-%m-%dT%H:%M:%S'\n diff = datetime.datetime.strptime(alert_time, datetimeFormat) - datetime.datetime.strptime(current_time, datetimeFormat)\n\ndiff\ndatetime.timedelta(-1, 86341)\n</code></pre>\n\n<p>what does that output mean?  I'm looking for something to tell me the difference in seconds </p>\n"}, {"tags": ["python", "cython", "buildozer"], "comments": [{"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1566464785, "post_id": 57599710, "comment_id": 101667299, "body": "Right at the top of your C file there should be a line &quot;Generated by Cython xxxx&quot; - what doest that say? The reason I ask is that I think this was fixed in Cython a year or two ago, but it&#39;s possible that your files were generated by an old version."}, {"owner": {"reputation": 1507, "user_id": 3070181, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xMnIO.gif?s=128&g=1", "display_name": "Psionman", "link": "https://stackoverflow.com/users/3070181/psionman"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1566471924, "post_id": 57599710, "comment_id": 101671245, "body": "@DavidW I&#39;m sorry, but I don&#39;t understand what you mean by my &#39;C file&#39;"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1566472500, "post_id": 57599710, "comment_id": 101671585, "body": "jnius/jnius.c - the file that the errors are coming from"}, {"owner": {"reputation": 1507, "user_id": 3070181, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xMnIO.gif?s=128&g=1", "display_name": "Psionman", "link": "https://stackoverflow.com/users/3070181/psionman"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1566472990, "post_id": 57599710, "comment_id": 101671844, "body": "@DavidW I&#39;ve searched for jnius.c and cannot find it. Where should it be?"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1566476160, "post_id": 57599710, "comment_id": 101673572, "body": "To be honest I don&#39;t know since I don&#39;t really know anything about the android build system. It is possible that it&#39;s only created temporarily then deleted by the build system (in which case my hunch is wrong). I suspect that isn&#39;t the case though."}, {"owner": {"reputation": 1507, "user_id": 3070181, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xMnIO.gif?s=128&g=1", "display_name": "Psionman", "link": "https://stackoverflow.com/users/3070181/psionman"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1566477001, "post_id": 57599710, "comment_id": 101674038, "body": "@DavidW I think you&#39;re right. I have seen references to similar problems on various forums. I think I have and &#39;old&#39; version of something lurking around, but what? That&#39;s why I put version numbers i my question. I think I&#39;ve got the latest of all of those"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1566477201, "post_id": 57599710, "comment_id": 101674152, "body": "To try to explain a bit better: Cython is a two step process. Cython converts a py/pyx to c file. The c file is compiled to a shared library. You can do the second step without having Cython installed. My guess is that the c file has already been generated (sometime in the past) and isn&#39;t being updated. The version of Cython you have doesn&#39;t matter if it isn&#39;t being used! You therefore want to find the C file and delete it/regenerate it. On some systems it might be enough to save a change to the py/pyx file and the timestamp will be enough to force an update."}, {"owner": {"reputation": 1507, "user_id": 3070181, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xMnIO.gif?s=128&g=1", "display_name": "Psionman", "link": "https://stackoverflow.com/users/3070181/psionman"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1566479281, "post_id": 57599710, "comment_id": 101675461, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/198306/discussion-between-psionman-and-davidw\">continue this discussion in chat</a>."}], "owner": {"reputation": 1507, "user_id": 3070181, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xMnIO.gif?s=128&g=1", "display_name": "Psionman", "link": "https://stackoverflow.com/users/3070181/psionman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567006414, "creation_date": 1566425190, "last_edit_date": 1567006414, "question_id": 57599710, "link": "https://stackoverflow.com/questions/57599710/buildozer-and-cython-conflict", "title": "Buildozer and cython conflict", "body": "<p>I am trying to build an android APK using buildozer. I have the following versions of python, Cython and buildozer:</p>\n\n<pre><code>Python 3.7.4 (default, Jul  9 2019, 03:52:42) \n[GCC 5.4.0 20160609] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import Cython\n&gt;&gt;&gt; Cython.__version__\n'0.29.13'\n\nBuildozer 0.39\n</code></pre>\n\n<p>But when I try to build my APK I encounter the following error</p>\n\n<pre><code>jnius/jnius.c: In function '__pyx_f_5jnius_5jnius_create_proxy_instance':\njnius/jnius.c:34306:46: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]\n   __pyx_t_1 = __Pyx_PyInt_From_PY_LONG_LONG(((PY_LONG_LONG)((void *)__pyx_v_py_obj))); if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[1]; __pyx_lineno = 170; __pyx_clineno = __LINE__; goto __pyx_L1_error;}\n                                              ^\njnius/jnius.c: In function '__Pyx_ExceptionSave':\njnius/jnius.c:51615:19: error: 'PyThreadState' has no member named 'exc_type'\n     *type = tstate-&gt;exc_type;\n                   ^\njnius/jnius.c:51616:20: error: 'PyThreadState' has no member named 'exc_value'\n     *value = tstate-&gt;exc_value;\n                    ^\njnius/jnius.c:51617:17: error: 'PyThreadState' has no member named 'exc_traceback'\n     *tb = tstate-&gt;exc_traceback;\n                 ^\njnius/jnius.c: In function '__Pyx_ExceptionReset':\njnius/jnius.c:51629:22: error: 'PyThreadState' has no member named 'exc_type'\n     tmp_type = tstate-&gt;exc_type;\n                      ^\njnius/jnius.c:51630:23: error: 'PyThreadState' has no member named 'exc_value'\n     tmp_value = tstate-&gt;exc_value;\n                       ^\njnius/jnius.c:51631:20: error: 'PyThreadState' has no member named 'exc_traceback'\n     tmp_tb = tstate-&gt;exc_traceback;\n                    ^\njnius/jnius.c:51632:11: error: 'PyThreadState' has no member named 'exc_type'\n     tstate-&gt;exc_type = type;\n           ^\njnius/jnius.c:51633:11: error: 'PyThreadState' has no member named 'exc_value'\n     tstate-&gt;exc_value = value;\n           ^\njnius/jnius.c:51634:11: error: 'PyThreadState' has no member named 'exc_traceback'\n     tstate-&gt;exc_traceback = tb;\n           ^\njnius/jnius.c: In function '__Pyx_GetException':\njnius/jnius.c:51821:22: error: 'PyThreadState' has no member named 'exc_type'\n     tmp_type = tstate-&gt;exc_type;\n                      ^\njnius/jnius.c:51822:23: error: 'PyThreadState' has no member named 'exc_value'\n     tmp_value = tstate-&gt;exc_value;\n                       ^\njnius/jnius.c:51823:20: error: 'PyThreadState' has no member named 'exc_traceback'\n     tmp_tb = tstate-&gt;exc_traceback;\n                    ^\njnius/jnius.c:51824:11: error: 'PyThreadState' has no member named 'exc_type'\n     tstate-&gt;exc_type = local_type;\n           ^\njnius/jnius.c:51825:11: error: 'PyThreadState' has no member named 'exc_value'\n     tstate-&gt;exc_value = local_value;\n           ^\njnius/jnius.c:51826:11: error: 'PyThreadState' has no member named 'exc_traceback'\n     tstate-&gt;exc_traceback = local_tb;\n           ^\njnius/jnius.c: In function '__Pyx_ExceptionSwap':\njnius/jnius.c:51848:22: error: 'PyThreadState' has no member named 'exc_type'\n     tmp_type = tstate-&gt;exc_type;\n                      ^\njnius/jnius.c:51849:23: error: 'PyThreadState' has no member named 'exc_value'\n     tmp_value = tstate-&gt;exc_value;\n                       ^\njnius/jnius.c:51850:20: error: 'PyThreadState' has no member named 'exc_traceback'\n     tmp_tb = tstate-&gt;exc_traceback;\n                    ^\njnius/jnius.c:51851:11: error: 'PyThreadState' has no member named 'exc_type'\n     tstate-&gt;exc_type = *type;\n           ^\njnius/jnius.c:51852:11: error: 'PyThreadState' has no member named 'exc_value'\n     tstate-&gt;exc_value = *value;\n           ^\njnius/jnius.c:51853:11: error: 'PyThreadState' has no member named 'exc_traceback'\n     tstate-&gt;exc_traceback = *tb;\n           ^\n</code></pre>\n\n<p>Can someone please help me to find what the problem might be?</p>\n\n<p>[Added later]</p>\n\n<p>This looks like the command that has failed</p>\n\n<pre><code>building 'jnius' extension\n/usr/bin/ccache arm-linux-androideabi-gcc -DANDROID -fomit-frame-pointer -D__ANDROID_API__=21 -mandroid -isystem &lt;my_home&gt;.buildozer/android/platform/android-ndk-r17c/sysroot/usr/include/arm-linux-androideabi -I&lt;my_home&gt;.buildozer/android/platform/android-ndk-r17c/sysroot/usr/include/arm-linux-androideabi -isysroot &lt;my_home&gt;.buildozer/android/platform/android-ndk-r17c/sysroot -I&lt;my_home&gt;projects/bfg/bfg_kivy/.buildozer/android/platform/build/build/python-installs/bfgApp/include/python3.7 -DNDEBUG -g -fwrapv -O3 -Wall -DANDROID -fomit-frame-pointer -D__ANDROID_API__=21 -mandroid -isystem &lt;my_home&gt;.buildozer/android/platform/android-ndk-r17c/sysroot/usr/include/arm-linux-androideabi -I&lt;my_home&gt;.buildozer/android/platform/android-ndk-r17c/sysroot/usr/include/arm-linux-androideabi -isysroot &lt;my_home&gt;.buildozer/android/platform/android-ndk-r17c/sysroot -I&lt;my_home&gt;projects/bfg/bfg_kivy/.buildozer/android/platform/build/build/python-installs/bfgApp/include/python3.7 -march=armv7-a -mfloat-abi=softfp -mfpu=vfp -mthumb -I&lt;my_home&gt;projects/bfg/bfg_kivy/.buildozer/android/platform/build/build/other_builds/python3-libffi-openssl-sqlite3/armeabi-v7a__ndk_target_21/python3/Include -fPIC -I&lt;my_home&gt;projects/bfg/bfg_kivy/.buildozer/android/platform/build/build/other_builds/hostpython3/desktop/hostpython3/Include -I&lt;my_home&gt;projects/bfg/bfg_kivy/.buildozer/android/platform/build/build/other_builds/hostpython3/desktop/hostpython3/native-build -c jnius/jnius.c -o build/temp.linux-x86_64-3.7/jnius/jnius.o\n</code></pre>\n\n<p>[Update 28 Aug 2019]\nI have managed to build the APK on another computer. On the 2nd computer, the directory </p>\n\n<pre><code>.../.buildozer/android/platform/build/build/other_builds/android-python3-sdl2/armeabi-v7a__ndk_target_21 \n</code></pre>\n\n<p>contains a folder 'jnius' which contains jnius.c. I have copied that to the main computer, but the build fails with the same message.</p>\n\n<p>The jnius.c file was built with the same version of Cython as the version on the main computer.</p>\n\n<p>If I delete the file jnius.c, the build fails with the same message</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 480, "user_id": 3478797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4059db7d467d15a2eb146e4c59ef938b?s=128&d=identicon&r=PG&f=1", "display_name": "cptwonton", "link": "https://stackoverflow.com/users/3478797/cptwonton"}, "edited": false, "score": 2, "creation_date": 1566425398, "post_id": 57599699, "comment_id": 101656682, "body": "what will each element in new_lists_ look like? i.e., how will a1 be different from a?"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "reply_to_user": {"reputation": 480, "user_id": 3478797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4059db7d467d15a2eb146e4c59ef938b?s=128&d=identicon&r=PG&f=1", "display_name": "cptwonton", "link": "https://stackoverflow.com/users/3478797/cptwonton"}, "edited": false, "score": 0, "creation_date": 1566425489, "post_id": 57599699, "comment_id": 101656715, "body": "I will run some functions over it to change the data structure (the above is a simple version) but I want to keep the original lists is that clear? so <code>ABC</code> in <code>a</code>  may become <code>123</code> in <code>a1</code>"}], "answers": [{"comments": [{"owner": {"reputation": 480, "user_id": 3478797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4059db7d467d15a2eb146e4c59ef938b?s=128&d=identicon&r=PG&f=1", "display_name": "cptwonton", "link": "https://stackoverflow.com/users/3478797/cptwonton"}, "edited": false, "score": 0, "creation_date": 1566426865, "post_id": 57599835, "comment_id": 101657080, "body": "could also use the enumerate() method to grab both index and nested list in one go, rather than the outer loop plus inner loop for index and nested list, respectively."}, {"owner": {"reputation": 4972, "user_id": 10824407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32862a03314e434224acf280c38e6e68?s=128&d=identicon&r=PG&f=1", "display_name": "Olvin Roght", "link": "https://stackoverflow.com/users/10824407/olvin-roght"}, "edited": false, "score": 2, "creation_date": 1566427003, "post_id": 57599835, "comment_id": 101657115, "body": "You can also use unpacking <code>new_lists_ = [[*inner_list] for inner_list in lists_]</code>."}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "reply_to_user": {"reputation": 480, "user_id": 3478797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4059db7d467d15a2eb146e4c59ef938b?s=128&d=identicon&r=PG&f=1", "display_name": "cptwonton", "link": "https://stackoverflow.com/users/3478797/cptwonton"}, "edited": false, "score": 0, "creation_date": 1566427020, "post_id": 57599835, "comment_id": 101657125, "body": "@cptwonton You can&#39;t avoid nested loops as you&#39;re iterating a nested list. The outer loop is for iterating through the nested lists and the inner loop is for iterating each nested list. How can you avoid that?"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "reply_to_user": {"reputation": 480, "user_id": 3478797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4059db7d467d15a2eb146e4c59ef938b?s=128&d=identicon&r=PG&f=1", "display_name": "cptwonton", "link": "https://stackoverflow.com/users/3478797/cptwonton"}, "edited": false, "score": 0, "creation_date": 1566427243, "post_id": 57599835, "comment_id": 101657186, "body": "@cptwonton I still don&#39;t follow. Let&#39;s say I do <code>for i, sub in enumerate(lists_):</code>. What now? I have a sub list an its index in the main list. How will I go over its elements?"}, {"owner": {"reputation": 480, "user_id": 3478797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4059db7d467d15a2eb146e4c59ef938b?s=128&d=identicon&r=PG&f=1", "display_name": "cptwonton", "link": "https://stackoverflow.com/users/3478797/cptwonton"}, "edited": false, "score": 1, "creation_date": 1566427413, "post_id": 57599835, "comment_id": 101657224, "body": "@Tomerikoo I uhh... don&#39;t think you can haha. Nested loops are necessary. enumerate() is just an alternative. I would edit my first comment if I could"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 1, "creation_date": 1566427627, "post_id": 57599835, "comment_id": 101657262, "body": "you, sir, are a legend, thank you so much, took me a while to figure it out but this helped me greatly."}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "reply_to_user": {"reputation": 480, "user_id": 3478797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4059db7d467d15a2eb146e4c59ef938b?s=128&d=identicon&r=PG&f=1", "display_name": "cptwonton", "link": "https://stackoverflow.com/users/3478797/cptwonton"}, "edited": false, "score": 0, "creation_date": 1566427751, "post_id": 57599835, "comment_id": 101657292, "body": "@cptwonton haha all good. I just thought of another fun alternative which is using <code>zip</code>, but as you can see there are many and I can&#39;t (shouldn&#39;t) put all in the answer"}], "tags": [], "owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "is_accepted": true, "score": 2, "last_activity_date": 1566426881, "last_edit_date": 1566426881, "creation_date": 1566426006, "answer_id": 57599835, "question_id": 57599699, "link": "https://stackoverflow.com/questions/57599699/iterating-through-a-lists-of-lists-and-appending-to-a-new-list/57599835#57599835", "title": "Iterating through a lists of lists and appending to a new list", "body": "<p>I think that what you are looking for is <a href=\"https://docs.python.org/3.7/library/copy.html#copy.deepcopy\" rel=\"nofollow noreferrer\"><code>copy.deepcopy</code></a>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from copy import deepcopy\n\nnew_lists_ = deepcopy(lists_)\n</code></pre>\n\n<blockquote>\n  <p>A <em>deep copy</em> constructs a new compound object and then, recursively, inserts <em>copies</em> into it of the objects found in the original.</p>\n</blockquote>\n\n<hr>\n\n<p>Or going with your method, maybe you should iterate indices instead:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for i in range(len(lists_)):\n    for elem in lists_[i]:\n        new_lists_[i].append(elem)\n</code></pre>\n\n<p>Or as requested, a one-liner:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>new_lists_ = [[elem for elem in lists_[i]] for i in range(len(lists_))]\n</code></pre>\n\n<p><strong>Note:</strong> that in the first method, of the explicit loop, <strong>you have to make sure</strong> that all sub-lists are initialized or you will get an <code>IndexError</code>. In the second method of the list-comprehension we simply create a new list.</p>\n"}, {"comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1566427688, "post_id": 57599896, "comment_id": 101657274, "body": "I really wanted to green tick this as it was more helpful but I couldn&#39;t figure out how to implement my function into this but I will keep trying. Thanks for the advice I will start using a proper style guide!"}], "tags": [], "owner": {"reputation": 480, "user_id": 3478797, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4059db7d467d15a2eb146e4c59ef938b?s=128&d=identicon&r=PG&f=1", "display_name": "cptwonton", "link": "https://stackoverflow.com/users/3478797/cptwonton"}, "is_accepted": false, "score": 1, "last_activity_date": 1566426465, "creation_date": 1566426465, "answer_id": 57599896, "question_id": 57599699, "link": "https://stackoverflow.com/questions/57599699/iterating-through-a-lists-of-lists-and-appending-to-a-new-list/57599896#57599896", "title": "Iterating through a lists of lists and appending to a new list", "body": "<p>Nested loops are things you generally want to avoid. </p>\n\n<p>If you really wanted to stick with a super-uber pythonic way of doing this with nested loops, this should work:</p>\n\n<pre><code>new_lists_ = []\n\nfor list_ in lists_:\n  new_list_ = []\n  for l in list_:\n    #some computation on l, stored in stuff, and appended to new_list_\n    new_list_.append(stuff)\n  new_lists_.append(new_list_)\n</code></pre>\n\n<p>But this is awkward to read and follow when debugging.</p>\n\n<p>One way to help debug would be to use the enumerate(item) method in your python loops.</p>\n\n<p>But an even better way, in my opinion, is to split this processing (and nested looping) off into another method, like so:</p>\n\n<pre><code>def some_function(list_):\n  #do some stuff here, store in processed_list_\n  processed_list_ = []\n  for l in list_:\n    processed_list_.append(l) #you'll want to modify l, of course\n  return processed_list_\n\nnew_lists_ = []\n\nfor list_ in lists_:\n  new_lists_.append(some_function(list_))\n</code></pre>\n\n<p>much simpler, I think.</p>\n\n<p>If you're following some special style guide, then ignore this, but I would also recommend rethinking how you're naming variables, specifically with your appending a \"_\" underscore to every variable name. Following some sort of popular python style guide, like the google one <a href=\"http://google.github.io/styleguide/pyguide.html\" rel=\"nofollow noreferrer\">here</a>, is a good idea for two main reasons:</p>\n\n<ol>\n<li>it's easier for others to read, as they're familiar with it already</li>\n<li>it's a popular style guide BECAUSE it's naturally easy to read</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11959442, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157454143380295/picture?type=large", "display_name": "Connor Grooms", "link": "https://stackoverflow.com/users/11959442/connor-grooms"}, "is_accepted": false, "score": -1, "last_activity_date": 1566426633, "creation_date": 1566426633, "answer_id": 57599918, "question_id": 57599699, "link": "https://stackoverflow.com/questions/57599699/iterating-through-a-lists-of-lists-and-appending-to-a-new-list/57599918#57599918", "title": "Iterating through a lists of lists and appending to a new list", "body": "<p>I would utilize the while loop in order to iterate over a list of lists. Here is an example but instead of the print statement you could alter list elements. </p>\n\n<pre><code>a = [1,2,3] #example elements\nb = [4,5,6]\nc = [7,8,9]\nlists_ = [a,b,c] \n\n\nnew_lists_ = [] \ni = 0\nwhile i &lt; len(lists_):\n        for x in lists_[i]:\n            print(x) \n        i+=1\n</code></pre>\n\n<p>this will output 1-9 as each element has been looked over. </p>\n"}], "owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57599835, "answer_count": 3, "score": 1, "last_activity_date": 1566426881, "creation_date": 1566425154, "last_edit_date": 1566425627, "question_id": 57599699, "link": "https://stackoverflow.com/questions/57599699/iterating-through-a-lists-of-lists-and-appending-to-a-new-list", "title": "Iterating through a lists of lists and appending to a new list", "body": "<p>I have the following structure,</p>\n\n<pre><code>lists_ = [a,b,c,d,e,f]\n</code></pre>\n\n<p>within each list there are variables i'd like to access iterate and pass into a list. </p>\n\n<pre><code>new_lists_ = [a1,b1,c1,d1,e1,f1] # empty individual lists.\n</code></pre>\n\n<p>so from <code>lists_</code> i'd like to acess all the variables in <code>a</code> and pass these into <code>a1</code> with what I'm hoping is a simple one liner.(however I prefer readability!) </p>\n\n<p>my own attemp : </p>\n\n<pre><code>for list_ in lists_:\n    for new_list_ in new_lists_:\n        for l in list_:\n            new_list.append(l)\n</code></pre>\n\n<p>^ this adds all the items to all the lists so not what I'm after.</p>\n\n<p>naturally, I could access each list individually and iterate this way, but I feel like this isn't good practice. I'm unsure if the above is good or bad practice so any advice is appreciated.</p>\n\n<p>(also my first non pandas question, so I guess this is a milestone..?!)</p>\n"}, {"tags": ["python", "python-3.x", "ftp", "ftplib"], "comments": [{"owner": {"reputation": 661, "user_id": 7623407, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209740955735539/picture?type=large", "display_name": "R10t--", "link": "https://stackoverflow.com/users/7623407/r10t"}, "edited": false, "score": 0, "creation_date": 1566425271, "post_id": 57599698, "comment_id": 101656643, "body": "What do you mean by freeze? It&#39;s expected that if the file is being downloaded your scirpt will be blocked until the download is completed. Are you inside of a GUI that you need active while downloading? If so, then make the function async"}, {"owner": {"reputation": 156, "user_id": 9875493, "user_type": "registered", "profile_image": "https://graph.facebook.com/963734957119274/picture?type=large", "display_name": "Qiasm", "link": "https://stackoverflow.com/users/9875493/qiasm"}, "reply_to_user": {"reputation": 661, "user_id": 7623407, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209740955735539/picture?type=large", "display_name": "R10t--", "link": "https://stackoverflow.com/users/7623407/r10t"}, "edited": false, "score": 0, "creation_date": 1566428405, "post_id": 57599698, "comment_id": 101657418, "body": "@R10t-- I think I almost got it now here is my code: <code>async def update_status(self):         if connecting:             await self.updateStatusText.setText(&quot;Status: Connecting...&quot;)         elif downloading:             await self.updateStatusText.setText(&quot;Status: Downloading...&quot;)         elif downloaded:             await self.updateStatusText.setText(&quot;Status: Updated!&quot;) </code> I get a TypeError: TypeError: object NoneType can&#39;t be used in &#39;await&#39; expression.  Do you know what causes this error? I can&#39;t figure it out. I&#39;ve &#39;awaited&#39; everything and I&#39;m using asyncio."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1566431148, "post_id": 57599698, "comment_id": 101658001, "body": "it seems <code>setText()</code> returns <code>None</code> so you have <code>await None</code>"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1566431559, "post_id": 57599698, "comment_id": 101658068, "body": "<code>await</code> doesn&#39;t work with every function, it has to be <a href=\"https://docs.python.org/3/library/asyncio-task.html#awaitables\" rel=\"nofollow noreferrer\">awaitable</a> function. For example it will not work with standard <code>time.sleep()</code>, it needs special <code>asyncio.sleep()</code>"}, {"owner": {"reputation": 156, "user_id": 9875493, "user_type": "registered", "profile_image": "https://graph.facebook.com/963734957119274/picture?type=large", "display_name": "Qiasm", "link": "https://stackoverflow.com/users/9875493/qiasm"}, "edited": false, "score": 0, "creation_date": 1566435639, "post_id": 57599698, "comment_id": 101658695, "body": "Okay. Thanks for the help. Do you know how can I make it another way so it does not freeze?"}], "answers": [{"comments": [{"owner": {"reputation": 156, "user_id": 9875493, "user_type": "registered", "profile_image": "https://graph.facebook.com/963734957119274/picture?type=large", "display_name": "Qiasm", "link": "https://stackoverflow.com/users/9875493/qiasm"}, "edited": false, "score": 0, "creation_date": 1566456805, "post_id": 57603297, "comment_id": 101663406, "body": "Thanks. It&#39;s simple and I understand it and I guess it would work with prints but I&#39;m actually using PyQt 4 and the FTP download is started by a button and I want to change the text label. I forgot to mention it. Do I have to rewrite the code in like a different way or in PyQt 4 GUIs I have to use QThread?"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "reply_to_user": {"reputation": 156, "user_id": 9875493, "user_type": "registered", "profile_image": "https://graph.facebook.com/963734957119274/picture?type=large", "display_name": "Qiasm", "link": "https://stackoverflow.com/users/9875493/qiasm"}, "edited": false, "score": 0, "creation_date": 1566456961, "post_id": 57603297, "comment_id": 101663475, "body": "See <a href=\"https://stackoverflow.com/q/9957195/850848\">Updating GUI elements in MultiThreaded PyQT</a>."}, {"owner": {"reputation": 156, "user_id": 9875493, "user_type": "registered", "profile_image": "https://graph.facebook.com/963734957119274/picture?type=large", "display_name": "Qiasm", "link": "https://stackoverflow.com/users/9875493/qiasm"}, "edited": false, "score": 0, "creation_date": 1566457541, "post_id": 57603297, "comment_id": 101663714, "body": "I&#39;m quite new in Python and even more new in PyQt. I quite don&#39;t understand it. How do I convert the code to download file instead of URLs like in the question you linked?"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "reply_to_user": {"reputation": 156, "user_id": 9875493, "user_type": "registered", "profile_image": "https://graph.facebook.com/963734957119274/picture?type=large", "display_name": "Qiasm", "link": "https://stackoverflow.com/users/9875493/qiasm"}, "edited": false, "score": 0, "creation_date": 1566458634, "post_id": 57603297, "comment_id": 101664292, "body": "Well, I&#39;m new to Python as well and I do not know anything about PyQt. But I believe it&#39;s rather obvious how to modify the code. Anyway, how do you <i>&quot;want to change the text label&quot;</i>? What do you want to show there?"}, {"owner": {"reputation": 156, "user_id": 9875493, "user_type": "registered", "profile_image": "https://graph.facebook.com/963734957119274/picture?type=large", "display_name": "Qiasm", "link": "https://stackoverflow.com/users/9875493/qiasm"}, "edited": false, "score": 0, "creation_date": 1566458693, "post_id": 57603297, "comment_id": 101664321, "body": "I want to show the status of the download e.g: &quot;Connecting...&quot;,  &quot;Downloading...&quot;"}, {"owner": {"reputation": 156, "user_id": 9875493, "user_type": "registered", "profile_image": "https://graph.facebook.com/963734957119274/picture?type=large", "display_name": "Qiasm", "link": "https://stackoverflow.com/users/9875493/qiasm"}, "edited": false, "score": 0, "creation_date": 1566458957, "post_id": 57603297, "comment_id": 101664468, "body": "Well I modified the code but It doesn&#39;t work so I guess I&#39;m doing something wrong. I posted the code to hastebin so It&#39;s easier to read: <a href=\"https://hastebin.com/wilitamiye.rb\" rel=\"nofollow noreferrer\">hastebin.com/wilitamiye.rb</a>"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "reply_to_user": {"reputation": 156, "user_id": 9875493, "user_type": "registered", "profile_image": "https://graph.facebook.com/963734957119274/picture?type=large", "display_name": "Qiasm", "link": "https://stackoverflow.com/users/9875493/qiasm"}, "edited": false, "score": 0, "creation_date": 1566459469, "post_id": 57603297, "comment_id": 101664749, "body": "I&#39;ve moved the PyQt answer to your other question."}], "tags": [], "owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "is_accepted": true, "score": 2, "last_activity_date": 1566462666, "last_edit_date": 1566462666, "creation_date": 1566455785, "answer_id": 57603297, "question_id": 57599698, "link": "https://stackoverflow.com/questions/57599698/ftp-downloading-freezes-the-whole-application/57603297#57603297", "title": "FTP downloading freezes the whole application", "body": "<p>Download the file on another thread:</p>\n\n<pre><code>import threading\nimport time\nfrom ftplib import FTP\n\ndef download():\n    ftp = FTP('exampledomain.com')\n    ftp.login(user='user', passwd='password')\n\n    ftp.cwd('/main_directory/')\n\n    filename = '100MB.bin'\n\n    with open(filename, 'wb') as localfile:\n        ftp.retrbinary('RETR ' + filename, localfile.write)\n\n    ftp.quit()\n\nprint(\"Starting download...\")\n\nthread = threading.Thread(target=download)\nthread.start()\n\nprint(\"Download started\")\n\nwhile thread.isAlive():\n    print(\"Still downloading...\")\n    time.sleep(1)\n\nprint(\"Done\")\n</code></pre>\n\n<hr>\n\n<p><em>Based on:<br>\n<a href=\"https://stackoverflow.com/q/33541956/850848\">How to download a file over HTTP with multi-thread (asynchronous download) using Python 2.7</a></em></p>\n\n<p><em>Your followup question about modifying the code for PyQt:<br>\n<a href=\"https://stackoverflow.com/q/57603694/850848\">FTP download with text label showing the current status of the download</a></em></p>\n"}], "owner": {"reputation": 156, "user_id": 9875493, "user_type": "registered", "profile_image": "https://graph.facebook.com/963734957119274/picture?type=large", "display_name": "Qiasm", "link": "https://stackoverflow.com/users/9875493/qiasm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 1, "accepted_answer_id": 57603297, "answer_count": 1, "score": 2, "last_activity_date": 1566462666, "creation_date": 1566425145, "last_edit_date": 1566456975, "question_id": 57599698, "link": "https://stackoverflow.com/questions/57599698/ftp-downloading-freezes-the-whole-application", "title": "FTP downloading freezes the whole application", "body": "<p>I'm trying to download a file from FTP server which is about 100 MB. It's a test .bin file because I'm testing the app and I guess the files I will want to download in the future will weight even more. When I want to download the file the whole application just freezes and then after a few seconds it downloads the file. The file is complete and it downloads it successfully without any errors or something like that. The only problem is the freeze.</p>\n\n<p>My code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>ftp = FTP('exampledomain.com')\nftp.login(user='user', passwd='password')\n\nftp.cwd('/main_directory/')\n\nfilename = '100MB.bin'\n\nwith open(filename, 'wb') as localfile:\n    ftp.retrbinary('RETR ' + filename, localfile.write, 1024)\n\nftp.quit()\nlocalfile.close()\n</code></pre>\n\n<p>I tried using <code>sleep()</code> between some lines of the code e.g between the logging in and downloading the file but it didn't help and it also seems that <code>sleep()</code> does not work AT ALL when working with FTP.</p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11953802, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3oljs0HHuCg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfoNLz7cSBktFytamAGXWBffn-INg/photo.jpg?sz=128", "display_name": "cleopathy", "link": "https://stackoverflow.com/users/11953802/cleopathy"}, "edited": false, "score": 0, "creation_date": 1566443386, "post_id": 57600091, "comment_id": 101659922, "body": "Thank you so much for the answer! Yes, still have a lot to learn in scraping"}], "tags": [], "owner": {"reputation": 31, "user_id": 11954759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JKyX6.jpg?s=128&g=1", "display_name": "Sateesh", "link": "https://stackoverflow.com/users/11954759/sateesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1566428135, "creation_date": 1566428135, "answer_id": 57600091, "question_id": 57599673, "link": "https://stackoverflow.com/questions/57599673/how-to-scrape-the-table-from-website-with-python-scrape-h4-information/57600091#57600091", "title": "How to scrape the table from website with python-scrape h4 information", "body": "<p>I did scraping like this. </p>\n\n<pre><code># yes, you identified the right table\nright_table=soup.find('table', {\"class\":'table tabBlue tblsort tblsticky sortable'})\n\nrows = right_table.findAll(\"tr\")\n\n# header attributes of the table\nheader = [th.text.rstrip() for th in rows[0].find_all('th')]\n\n# data\nlst_data = []\nfor row in rows[1:]:\n            data = [d.text.rstrip() for d in row.find_all('td')]\n            lst_data.append(data)\n\n# your expected result\ndf = pd.DataFrame(lst_data, columns=header)\nprint(df)\n</code></pre>\n\n<p>Happy scraping !</p>\n"}], "owner": {"reputation": 1, "user_id": 11953802, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3oljs0HHuCg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfoNLz7cSBktFytamAGXWBffn-INg/photo.jpg?sz=128", "display_name": "cleopathy", "link": "https://stackoverflow.com/users/11953802/cleopathy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567451147, "creation_date": 1566424981, "last_edit_date": 1567451147, "question_id": 57599673, "link": "https://stackoverflow.com/questions/57599673/how-to-scrape-the-table-from-website-with-python-scrape-h4-information", "title": "How to scrape the table from website with python-scrape h4 information", "body": "<p>New to scrape table with python, and I would like to scrape the table of crime rates:\nthe packages I used:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nimport pandas as pd\nimport numpy as np\n</code></pre>\n\n<p>here is my code:\nloading empty array</p>\n\n<pre><code>data = []\npage = requests.get(\"http://www.city-data.com/city/Belmont-Massachusetts.html\")\nsoup = BeautifulSoup(page.content, \"html.parser\")\n</code></pre>\n\n<p>identify table we want to scrape</p>\n\n<pre><code>table = soup.find_all(\"table\",{\"class\":\"table tabBlue tblsort tblsticky sortable\"})\n</code></pre>\n\n<p>loop through table, grab each of the 13 columns shown </p>\n\n<pre><code>for row in table.find_all('tr'):\n    cols = row.find_all('h4').get_text()\n    if len(cols) == 13:\n        data.append((cols[0].text.strip(), cols[1].text.strip(), cols[2].text.strip(), cols[3].text.strip(),cols[4].text.strip(),cols[5].text.strip(),cols[6].text.strip(),cols[7].text.strip(),cols[8].text.strip(),cols[9].text.strip(),cols[10].text.strip(),cols[11].text.strip(),cols[12].text.strip(),cols[13].text.strip()))\nexcept: pass \n\n\ndata = np.asarray(data)\nlen(data)\ndf = pd.DataFrame(data)\ndf.head()\n</code></pre>\n\n<p>I use Mac os, python 3\nhowever, in the last I got an empty list. Could anyone give me some suggestions? </p>\n\n<p>The error I got I am guessing that because I had problem scrape h4 information(the header of the table is in the h4 area..)</p>\n"}, {"tags": ["python", "exec"], "answers": [{"tags": [], "owner": {"reputation": 348, "user_id": 6670005, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fDdkL.png?s=128&g=1", "display_name": "FelizNaveedad", "link": "https://stackoverflow.com/users/6670005/feliznaveedad"}, "is_accepted": false, "score": 1, "last_activity_date": 1566425234, "creation_date": 1566425234, "answer_id": 57599717, "question_id": 57599670, "link": "https://stackoverflow.com/questions/57599670/why-does-pythons-exec-seem-to-not-work-in-a-function/57599717#57599717", "title": "Why does python&#39;s exec seem to not work in a function?", "body": "<p>This question was answered here, but tl;dr the exec statement follows different rules when it comes to scope and lifecycle in your application:</p>\n\n<p><a href=\"https://stackoverflow.com/a/45535337/6670005\">https://stackoverflow.com/a/45535337/6670005</a></p>\n"}], "owner": {"reputation": 102865, "user_id": 5056, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/315b95cdcac83705c10ea14e239aeaf5?s=128&d=identicon&r=PG", "display_name": "George Mauer", "link": "https://stackoverflow.com/users/5056/george-mauer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17, "favorite_count": 0, "closed_date": 1566425407, "answer_count": 1, "score": 0, "last_activity_date": 1566425234, "creation_date": 1566424964, "question_id": 57599670, "link": "https://stackoverflow.com/questions/57599670/why-does-pythons-exec-seem-to-not-work-in-a-function", "closed_reason": "Duplicate", "title": "Why does python&#39;s exec seem to not work in a function?", "body": "<p>python 3.7</p>\n\n<pre><code>&gt;&gt;&gt; exec('foobz = 3')\n&gt;&gt;&gt; print(foobz)\n3\n</code></pre>\n\n<p>why does the above work but the below does not?</p>\n\n<pre><code>&gt;&gt;&gt; \ndef blah():\n    exec('foobz = 3')\n    print(foobz)\n&gt;&gt;&gt; ... ... ... \n&gt;&gt;&gt; blah()\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"&lt;stdin&gt;\", line 3, in blah\nNameError: name 'foobz' is not defined\n</code></pre>\n\n<p>I've verified that its not due to spacing and I'm unclear what the difference is</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "deep-learning"], "owner": {"reputation": 21, "user_id": 11959313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d040d55257369a3ea777504374ffe3?s=128&d=identicon&r=PG&f=1", "display_name": "mrdragan", "link": "https://stackoverflow.com/users/11959313/mrdragan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1566424819, "creation_date": 1566424819, "question_id": 57599641, "link": "https://stackoverflow.com/questions/57599641/using-tf-train-adamoptimizer-twice-for-same-network", "title": "Using tf.train.AdamOptimizer twice for same network", "body": "<p>I am trying to fine tune an existing neural network (resnet v2 152) for a new dataset.  The way I have training set up right now is to first train just the last fully connected layer for a few epochs and second to train the entire model for a few epochs.  In order to make this work I defined two optimizers.  When I use the gradient descent optimizer I am able to train the model. However. when I use the AdamOptimizer the model doesn't train.   </p>\n\n<p>The most important thing I have noticed is when I include <code>tf.global_variables_initializer()</code> using the gradient descent optimizer doesn't train either.  However, it appears <code>tf.global_varaibles_initializer()</code> is required to use the AdamOptimizer</p>\n\n<p>If I don't include <code>tf.global_varaibles_initializer()</code> and use gradient descent the network trains as expected.  </p>\n\n<p>I have included a snippet of the code below. This code is based on the VGG trainer available at: <a href=\"https://gist.github.com/omoindrot/dedc857cdc0e680dfb1be99762990c9c/\" rel=\"nofollow noreferrer\">https://gist.github.com/omoindrot/dedc857cdc0e680dfb1be99762990c9c/</a></p>\n\n<pre><code> variables_to_restore = tf.contrib.framework.get_variables_to_restore(exclude=['resnet_v2_152/logits'])\n\n init_fn = tf.contrib.framework.assign_from_checkpoint_fn(model_path, variables_to_restore)\n\n # Initialization operation from scratch for the new \"fc\" layers\n\n # `get_variables` will only return the variables whose name starts with the given pattern\n\n c_variables = tf.contrib.framework.get_variables('resnet_v2_152/logits')\n fc_init = tf.variables_initializer(fc_variables)\n\n full_variables =tf.contrib.framework.get_variables()\n full_init = tf.variables_initializer(full_variables)\n\n ## ---------------------------------------------------------------------\n\n ## Using tf.losses, any loss is added to the tf.GraphKeys.LOSSES collection\n\n ## We can then call the total loss easily\n\n loss = tf.nn.sparse_softmax_cross_entropy_with_logits(labels=labels, logits=logits)\n\n ## First we want to train only the reinitialized last layer fc for a few epochs.\n ## We run minimize the loss only with respect to the fc variables (weight and bias).\n fc_optimizer = tf.train.AdamOptimizer(args.learning_rate1, name=\"adam1\")\n fc_train_op = fc_optimizer.minimize(loss, var_list=[fc_variables])\n\n # Then we want to finetune the entire model for a few epochs.\n\n # We run minimize the loss only with respect to all the variables.\n\n full_optimizer = tf.train.AdamOptimizer(args.learning_rate2, name =\"adam2\")\n\n full_train_op = full_optimizer.minimize(loss, var_list=[full_variables])\n\n init = tf.global_variables_initializer()\n</code></pre>\n\n<p>No error is given when training but the training and validation accuracies don't update so it appears that the optimizer isn't actually running.</p>\n\n<p>Like I said I think it has to do with the inclusion of <code>tf.global_variables_initializer()</code>, but I am not sure how to get around that for using the AdamOptimizer.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "anaconda"], "owner": {"reputation": 11, "user_id": 11959403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gbcF8Dr9vJg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtPUfjD9eps9Xqkm7eVrjAZUsedQ/photo.jpg?sz=128", "display_name": "CafeInc", "link": "https://stackoverflow.com/users/11959403/cafeinc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566424731, "creation_date": 1566424731, "question_id": 57599631, "link": "https://stackoverflow.com/questions/57599631/installing-otbapplication-py-to-anaconda", "title": "Installing otbApplication.py to Anaconda", "body": "<p>I am trying to install otbApplication to use in my jupyter notebook on Windows. The program only has a direct path installation on linux and nothing I do seems to allow it to work.</p>\n\n<p>I have tried creating a new environment leading to the py file, appending the sys path, and seeing if anaconda.org was able to provide me with a line to plug into the prompt to install it directly. </p>\n\n<p>import otbApplication \nImportError: DLL load failed: The specified module could not be found.</p>\n\n<p>I wanted to be able to then use otb's band math functions but as it stands, it keeps telling me that the application is not defined</p>\n"}, {"tags": ["python", "python-requests", "pytest"], "answers": [{"tags": [], "owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "is_accepted": true, "score": 2, "last_activity_date": 1566428432, "creation_date": 1566428432, "answer_id": 57600130, "question_id": 57599574, "link": "https://stackoverflow.com/questions/57599574/mocking-requests-session-with-pytests-mocker-patch-object/57600130#57600130", "title": "Mocking requests.Session() with pytest&#39;s mocker.patch.object", "body": "<p>That's because the <code>ClassToTest</code> is initializing the session in a <code>with</code> context. You need to tell the session mock to return itself on entering a <code>with</code> context, mimicking what the <code>Session</code> class does:</p>\n\n<pre><code>@pytest.fixture\ndef mock_session(mocker):\n    mock_session = mocker.patch.object(requests, 'Session', autospec=True)\n    <b>mock_session.return_value.__enter__.return_value = mock_session</b>\n    return mock_session\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10724980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68f7c6062523ad1195882ddc2d1ec0d?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Bridburg", "link": "https://stackoverflow.com/users/10724980/kyle-bridburg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 1, "accepted_answer_id": 57600130, "answer_count": 1, "score": 2, "last_activity_date": 1566428576, "creation_date": 1566424411, "last_edit_date": 1566428576, "question_id": 57599574, "link": "https://stackoverflow.com/questions/57599574/mocking-requests-session-with-pytests-mocker-patch-object", "title": "Mocking requests.Session() with pytest&#39;s mocker.patch.object", "body": "<p>I'm attempting to mock a requests Session created in a class I'm testing. When the mock is created it appears to work but the mock created in the class isn't the same</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class ClassToTest:\n  def make_request(url):\n    with requests.Session() as session:\n      print(session)\n      response = session.request(url)\n    return response\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>@pytest.fixture\ndef mock_session(mocker):\n    mock_session = mocker.patch.object(requests, 'Session', autospec=True)\n    return mock_session\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>@pytest.mark.usefixtures('mock_session')\ndef test(self, mock_session):\n  mock_session.request.return_value = expected\n  print(mock_session)\n  res = ClassToTest().make_request(url)\n  assert expected == res\n</code></pre>\n\n<p>This test currently fails and the prints look like:</p>\n\n<pre><code>&lt; MagicMock name='Session' spec='Session' id='1'&gt;\n\n&lt; MagicMock name='Session().\\__enter__()' id='2'&gt;\n</code></pre>\n"}, {"tags": ["python", "jupyter-notebook", "plotly"], "comments": [{"owner": {"reputation": 168, "user_id": 11605372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c133e1c9618fc7043a257e9b74c50f0c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11605372/alex"}, "edited": false, "score": 0, "creation_date": 1566424244, "post_id": 57599542, "comment_id": 101656349, "body": "Looked at other questions with issues regarding Jupyter. As I receive no actual error codes, and my cells do actually run (just much slower), so far no questions seem to be of any help."}, {"owner": {"reputation": 21840, "user_id": 112871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c672b1a855701ccca00911a6fbf02e4?s=128&d=identicon&r=PG", "display_name": "nicolaskruchten", "link": "https://stackoverflow.com/users/112871/nicolaskruchten"}, "edited": false, "score": 0, "creation_date": 1566434457, "post_id": 57599542, "comment_id": 101658509, "body": "What happens if you <code>pip uninstall plotly</code>?"}, {"owner": {"reputation": 168, "user_id": 11605372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c133e1c9618fc7043a257e9b74c50f0c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11605372/alex"}, "reply_to_user": {"reputation": 21840, "user_id": 112871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c672b1a855701ccca00911a6fbf02e4?s=128&d=identicon&r=PG", "display_name": "nicolaskruchten", "link": "https://stackoverflow.com/users/112871/nicolaskruchten"}, "edited": false, "score": 1, "creation_date": 1566591271, "post_id": 57599542, "comment_id": 101718394, "body": "Ended up being an issue with my magic command &#39;%matplotlib&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 21840, "user_id": 112871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c672b1a855701ccca00911a6fbf02e4?s=128&d=identicon&r=PG", "display_name": "nicolaskruchten", "link": "https://stackoverflow.com/users/112871/nicolaskruchten"}, "edited": false, "score": 0, "creation_date": 1566594508, "post_id": 57632535, "comment_id": 101719367, "body": "That seems really odd. I\u2019ll look into it"}], "tags": [], "owner": {"reputation": 168, "user_id": 11605372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c133e1c9618fc7043a257e9b74c50f0c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11605372/alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1566591385, "last_edit_date": 1592644375, "creation_date": 1566591385, "answer_id": 57632535, "question_id": 57599542, "link": "https://stackoverflow.com/questions/57599542/jupyter-notebook-suddenly-very-slow-after-plotly-install/57632535#57632535", "title": "Jupyter Notebook Suddenly Very Slow after Plotly install", "body": "<h1>It was some conflict between pltoly and the magic command I had for matplot (%matplotlib).</h1>\n<ul>\n<li>Just removed the magic command and restarted the kernel. Seems to work just fine now.</li>\n</ul>\n"}], "owner": {"reputation": 168, "user_id": 11605372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c133e1c9618fc7043a257e9b74c50f0c?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11605372/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "accepted_answer_id": 57632535, "answer_count": 1, "score": 1, "last_activity_date": 1566591385, "creation_date": 1566424192, "last_edit_date": 1592644375, "question_id": 57599542, "link": "https://stackoverflow.com/questions/57599542/jupyter-notebook-suddenly-very-slow-after-plotly-install", "title": "Jupyter Notebook Suddenly Very Slow after Plotly install", "body": "<blockquote>\n<h2><strong>Jupyter Notebook suddenly much slower than before</strong></h2>\n</blockquote>\n<ul>\n<li><p>Pip installed Plotly 4.1.0</p>\n</li>\n<li><p>Imported plotly.express within Jnotebook</p>\n</li>\n<li><p>Suddenly even the <em>smallest tasks</em> take much longer to complete in Jupyter Notebook, when everything was working just fine immediately prior to download/import of plotly.express</p>\n</li>\n<li><p>No actual error codes, just running <strong>MUCH</strong> slower than before</p>\n</li>\n</ul>\n<blockquote>\n<p>I believe something happened when I downloaded Plotly(?)</p>\n</blockquote>\n<ul>\n<li>Took anything relating to Plotly or Plotly.express out of my notebook, still runs slower than before</li>\n</ul>\n<blockquote>\n<p>Installation</p>\n</blockquote>\n<p>Ran these two lines, as per instruction of Plotly.</p>\n<pre><code>pip install plotly==4.1.0\npip install &quot;notebook&gt;=5.3&quot; &quot;ipywidgets&gt;=7.2&quot;\n</code></pre>\n<p>The second one returned &quot;Requirement already satisfied&quot; for every instance, so it must have been the plotly one, right?</p>\n<p>currently running python 3.7.3 according to &quot;python --version&quot;</p>\n<p>currently running jupyter 4.4.0 according to &quot;jupyter --version&quot;</p>\n"}, {"tags": ["python", "sql", "pandas", "pyodbc"], "comments": [{"owner": {"reputation": 3653, "user_id": 6520041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-y2Mls6eJLA0/AAAAAAAAAAI/AAAAAAAAAAA/_V6LCP-xzt8/photo.jpg?sz=128", "display_name": "FatihAkici", "link": "https://stackoverflow.com/users/6520041/fatihakici"}, "edited": false, "score": 1, "creation_date": 1566424385, "post_id": 57599525, "comment_id": 101656385, "body": "Pushing data from PYODBC to SQL is a very bad idea. I would just find another solution conpletely. Such as saving your CSV and manually uploading, or some efficient bulk-upload methods from Python."}, {"owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "edited": false, "score": 0, "creation_date": 1566424654, "post_id": 57599525, "comment_id": 101656476, "body": "You&#39;re not doing anything with <code>i</code> you&#39;re just running your <code>insert_query1</code> as many times as there are rows in <code>df</code>.  Is that what you intent to do?"}, {"owner": {"reputation": 199, "user_id": 4443378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5122c4d877a8fa6ba8850415a12fcbaf?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4443378/mitch"}, "reply_to_user": {"reputation": 3653, "user_id": 6520041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-y2Mls6eJLA0/AAAAAAAAAAI/AAAAAAAAAAA/_V6LCP-xzt8/photo.jpg?sz=128", "display_name": "FatihAkici", "link": "https://stackoverflow.com/users/6520041/fatihakici"}, "edited": false, "score": 1, "creation_date": 1566475264, "post_id": 57599525, "comment_id": 101673083, "body": "@FatihAkici Why is it a bad idea? What bulk-upload method would be better?"}, {"owner": {"reputation": 199, "user_id": 4443378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5122c4d877a8fa6ba8850415a12fcbaf?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4443378/mitch"}, "reply_to_user": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "edited": false, "score": 0, "creation_date": 1566475308, "post_id": 57599525, "comment_id": 101673106, "body": "@it&#39;s-yer-boy-chet well ideally I would just load the entire column in one go, what is the best way to do that?"}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 4443378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5122c4d877a8fa6ba8850415a12fcbaf?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4443378/mitch"}, "edited": false, "score": 0, "creation_date": 1566490509, "post_id": 57599935, "comment_id": 101681928, "body": "I get an error &quot;IntegrityError: (&#39;23000&#39;, &quot;[23000] [Microsoft][ODBC SQL Server Driver][SQL Server]Cannot insert the value NULL into column&quot;. FYI there are no NULLS in the data. Is &#39;id&#39; the name of the column in SQL? And in the dataframe?"}, {"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "reply_to_user": {"reputation": 199, "user_id": 4443378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5122c4d877a8fa6ba8850415a12fcbaf?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4443378/mitch"}, "edited": false, "score": 0, "creation_date": 1566512665, "post_id": 57599935, "comment_id": 101690182, "body": "&quot;Is &#39;id&#39; the name of the column in SQL? And in the dataframe?&quot; - In the sample code above, yes, and normally we try to have the column names be the same at both ends, but that is not strictly necessary. As for nulls, there must be something in the column that maps to SQL <code>NULL</code>, perhaps <code>NaN</code>. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be very helpful."}], "tags": [], "owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "is_accepted": false, "score": 1, "last_activity_date": 1566428906, "last_edit_date": 1566428906, "creation_date": 1566426761, "answer_id": 57599935, "question_id": 57599525, "link": "https://stackoverflow.com/questions/57599525/how-to-insert-column-from-dataframe-into-sql-server-with-pyodbc/57599935#57599935", "title": "How to insert column from dataframe into SQL Server with pyodbc?", "body": "<p>You are getting that error message because you are trying to use a parameterized query but you are not passing the parameter <em>values</em> to the <code>execute</code> method.</p>\n\n<p>Besides, you don't need to insert row-by-row by calling <code>execute</code> in an explicit <code>for</code> loop. You can use <code>executemany</code> instead:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code># test data\ndf = pd.DataFrame(\n    [(1, 'Josh', 10000), (2, 'Michael', 5000), (3, 'Sara', 8000)],\n    columns=['id', 'name', 'salary'])\n#\ncrsr = cnxn.cursor()\ncrsr.fast_executemany = True\nsql = \"INSERT INTO Table_1 (id) VALUES (?)\"\n# extract column and convert to list of single-value tuples\ndata = [(x,) for x in df['id']]\ncrsr.executemany(sql, data)\ncnxn.commit()\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 4443378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5122c4d877a8fa6ba8850415a12fcbaf?s=128&d=identicon&r=PG&f=1", "display_name": "Mitch", "link": "https://stackoverflow.com/users/4443378/mitch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566428906, "creation_date": 1566424039, "last_edit_date": 1566427055, "question_id": 57599525, "link": "https://stackoverflow.com/questions/57599525/how-to-insert-column-from-dataframe-into-sql-server-with-pyodbc", "title": "How to insert column from dataframe into SQL Server with pyodbc?", "body": "<p>I'm trying to insert data from a CSV (or DataFrame) into MS SQL Server.\nThe table has already been created, and I created the columns in SQL using pyodbc.</p>\n\n<p>I'm trying to populate the first column in a table with one column from the DataFrame but I get this error:</p>\n\n<blockquote>\n  <p>Error: ('07002', '[07002] [Microsoft][ODBC SQL Server Driver]COUNT field incorrect or syntax error (0) (SQLExecDirectW)')</p>\n</blockquote>\n\n<p>I've tried adding a different column to see if it was an issue with that specific column and I get the same error. (There are no null values in the column.)</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>conn = pyodbc.connect(\"Driver={SQL Server};\" \n                      \"Server=natsqldevap2ncr\\ins2;\"\n                      \"Database=ECDWDEV;\"\n                      \"Trusted_Connection=yes;\")\n\nfor i in df.iloc[:,0]:\n    insert_query1 =  \"\"\"INSERT INTO TABLE_NAME(COLUMN_NAME) \n                   VALUES \n                   (?)\"\"\"\n\n    cursor = conn.cursor()\n    result = cursor.execute(insert_query1)\n    conn.commit()\n</code></pre>\n\n<p>Expecting all the values in the column (df.iloc[:,0]) to be inserted into the column \"COLUMN_NAME\" in the SQL table \"TABLE_NAME\".</p>\n\n<p>Instead get:</p>\n\n<blockquote>\n  <p>Error: ('07002', '[07002] [Microsoft][ODBC SQL Server Driver]COUNT field incorrect or syntax error (0) (SQLExecDirectW)')</p>\n</blockquote>\n"}, {"tags": ["python", "list", "loops", "dictionary", "concatenation"], "comments": [{"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 1, "creation_date": 1566425012, "post_id": 57599484, "comment_id": 101656574, "body": "What are your rules for concatenation? Your &quot;desired result&quot; is not valid syntax, and some of the piece that are would not work as dictionary elements."}], "answers": [{"tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": true, "score": 0, "last_activity_date": 1566424869, "creation_date": 1566424869, "answer_id": 57599655, "question_id": 57599484, "link": "https://stackoverflow.com/questions/57599484/create-new-dictionary-with-values-as-lists-and-non-empty-keys/57599655#57599655", "title": "Create new dictionary with values as lists and non-empty keys", "body": "<p>I'm not sure if I've understood you right. This script will create new dictionary with values as lists and non-empty keys:</p>\n\n<pre><code>array = [('Schedule: ', '231xxx'),\n ('Name(s): ', 'K, KEN '),\n (' ', 'K, CHRISTINA '),\n ('Address: ', '5xx 4TH LN ANYTOWN CO 81xxx-'),\n ('Description: ', 'BEG PT FT N OF COR OF SEC TH N 85 DEG 11 MIN'),\n ('  ', 'W 100.00 FT TH N'),\n ('  ', 'S 45 DEG 08 MIN E '),\n ('  ', '194.00 FT TO ')\n]\n\nout = {}\nlast_key = ''\nfor k, v in array:\n    if k.strip():\n        last_key = k\n    out.setdefault(last_key, []).append(v)\n\n\nfrom pprint import pprint\npprint(out)\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>{'Address:': ['5xx 4TH LN ANYTOWN CO 81xxx-'],\n 'Description:': ['BEG PT FT N OF COR OF SEC TH N 85 DEG 11 MIN',\n                  'W 100.00 FT TH N',\n                  'S 45 DEG 08 MIN E ',\n                  '194.00 FT TO '],\n 'Name(s):': ['K, KEN ', 'K, CHRISTINA '],\n 'Schedule:': ['231xxx']}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 11396478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d20018f9c1b6f3249c363bcd7e83bff4?s=128&d=identicon&r=PG&f=1", "display_name": "Mark M", "link": "https://stackoverflow.com/users/11396478/mark-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 57599655, "answer_count": 1, "score": -2, "last_activity_date": 1604942706, "creation_date": 1566423802, "last_edit_date": 1604942706, "question_id": 57599484, "link": "https://stackoverflow.com/questions/57599484/create-new-dictionary-with-values-as-lists-and-non-empty-keys", "title": "Create new dictionary with values as lists and non-empty keys", "body": "<p>How can I concat values to empty keys.</p>\n<pre><code>my_array = \n[('Schedule: ', '231xxx'),\n ('Name(s): ', 'K, KEN '),\n (' ', 'K, CHRISTINA '),\n ('Address: ', '5xx 4TH LN ANYTOWN CO 81xxx-'),\n ('Description: ', 'BEG PT FT N OF COR OF SEC TH N 85 DEG 11 MIN'),\n ('  ', 'W 100.00 FT TH N'),\n ('  ', 'S 45 DEG 08 MIN E '),\n ('  ', '194.00 FT TO ')\n]\n\n</code></pre>\n<p>Desired result would be:</p>\n<pre><code>dict { ('Schedule: ', '231xxx'),\n ('Name(s): ', 'K, KEN ',  'K, CHRISTINA '),\n ('Address: ', '5xx 4TH LN ANYTOWN CO 81xxx-'),\n ('Description: ', 'BEG PT FT N OF COR OF SEC TH N 85 DEG 11 MIN' W 100.00 FT TH N' S 45 DEG 08 MIN E 194.00 FT TO ')}\n</code></pre>\n"}, {"tags": ["python", "ssl", "python-requests"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 2, "creation_date": 1566424185, "post_id": 57599480, "comment_id": 101656331, "body": "1) Do not set ciphers, just say you want TLS 1.3 and 2) &quot;and used Wireshark. Here it says the requests go over 1.2 and not 1.3. &quot; this is complicated (and hence imprecise in your question) as 1.3 was <b>designed</b> to look like as 1.2 in some spots (some parts of the messages exchanged) to be able to bypass stupid middleboxes (is that a pleonasm?). See for example &quot;protocolVersion legacy_record_version = 0x0303;  /* TLS v1.2 */&quot; in RFC 8446."}, {"owner": {"reputation": 27450, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1566424340, "post_id": 57599480, "comment_id": 101656373, "body": "@PatrickMevzek I was just about to link to <a href=\"https://stackoverflow.com/a/52081241/4756299\">your older answer</a>...  :-)"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1566424345, "post_id": 57599480, "comment_id": 101656376, "body": "<code>ssl.OP_NO_TLSv1_3 | ssl.OP_NO_TLSv1_3</code> is strange on two counts. First there is an extra unneeded one as &quot;A OR A&quot; is always A, and second <code>OP_NO_TLSv1_3</code> specifically <b>prevents</b> doing TLS 1.3, see <a href=\"https://docs.python.org/2/library/ssl.html#ssl.OP_NO_TLSv1_3\" rel=\"nofollow noreferrer\">docs.python.org/2/library/ssl.html#ssl.OP_NO_TLSv1_3</a> : &quot;Prevents a TLSv1.3 connection. This option is only applicable in conjunction with PROTOCOL_TLS. It prevents the peers from choosing TLSv1.3 as the protocol version.&quot;"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "reply_to_user": {"reputation": 27450, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1566424528, "post_id": 57599480, "comment_id": 101656440, "body": "@AndrewHenle Thanks :-) I forgot I wrote that, but it can fit indeed."}, {"owner": {"reputation": 207, "user_id": 10755613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0063d45f3dd93ffc3495bac727933f0?s=128&d=identicon&r=PG&f=1", "display_name": "rocket", "link": "https://stackoverflow.com/users/10755613/rocket"}, "edited": false, "score": 0, "creation_date": 1566424548, "post_id": 57599480, "comment_id": 101656448, "body": "ok thanks a lot for this info. any chance how I can set it to TLS 1.3 without that or ?"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 1, "creation_date": 1566424687, "post_id": 57599480, "comment_id": 101656491, "body": "Either use <code>PROTOCOL_TLS</code> that will auto-negotiate highest possible version (better for upward compatibility) or if you insist on 1.3 and that only, <code>OP_NO_SSLv2 &amp; OP_NO_SSLv3 &amp; OP_NO_TLSv1 &amp; OP_NO_TLSv1_1 &amp; OP_NO_TLSv1_2</code> should prevent all of these protocols and hence it remains (today) either 1.3 or nothing at all (depending on underlying OpenSSL version and what the remote server accepts)"}], "owner": {"reputation": 207, "user_id": 10755613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0063d45f3dd93ffc3495bac727933f0?s=128&d=identicon&r=PG&f=1", "display_name": "rocket", "link": "https://stackoverflow.com/users/10755613/rocket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3270, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1566423793, "creation_date": 1566423793, "question_id": 57599480, "link": "https://stackoverflow.com/questions/57599480/python-requests-use-tls-v-1-3", "title": "Python Requests - Use TLS v.1_3", "body": "<p>I am trying to make a request in Python using TLS 1.3 as it is what the site accepts.\nI use following code:</p>\n\n<pre><code>import requests\nfrom requests.adapters import HTTPAdapter\nfrom requests.packages.urllib3.poolmanager import PoolManager\nfrom requests.packages.urllib3.util import ssl_\n\nCIPHERS = (\n    'AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:AES256-SHA'\n)\n\n\nclass TlsAdapter(HTTPAdapter):\n\n    def __init__(self, ssl_options=0, **kwargs):\n        self.ssl_options = ssl_options\n        super(TlsAdapter, self).__init__(**kwargs)\n\n    def init_poolmanager(self, *pool_args, **pool_kwargs):\n        ctx = ssl_.create_urllib3_context(ciphers=CIPHERS, cert_reqs=ssl.CERT_REQUIRED, options=self.ssl_options)\n        self.poolmanager = PoolManager(*pool_args,\n                                       ssl_context=ctx,\n                                       **pool_kwargs)\n\n\nsess = requests.session()\nadp = TlsAdapter(ssl.OP_NO_TLSv1_3 | ssl.OP_NO_TLSv1_3)\nsess.mount(\"https://\", adapter)\n</code></pre>\n\n<p>Everything looks fine until here. I started using it to send requests ecc but of pure curiosity I checked deeper and used Wireshark. Here it says the requests go over 1.2 and not 1.3. </p>\n\n<p>Anyone could help me actually to enforce 1.3 and not 1.2? It would be very appreciated. Thanks.</p>\n"}, {"tags": ["python", "django", "django-templates"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1566423712, "post_id": 57599430, "comment_id": 101656225, "body": "I&#39;m not seeing where in your view function you render that template. All the <code>return</code>s I can see use <code>redirect</code>, not <code>render_template</code>. I&#39;m assuming you&#39;ve missed off the <code>GET</code> case? I also am not sure why in your models you have both a &quot;likes&quot; <code>ManyToManyField</code> linking <code>Post</code> to <code>User</code>, and a <code>Like</code> model with foreign keys to both. Either of these on its own would create the relationships you need, you neither need nor want both."}, {"owner": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1566423957, "post_id": 57599430, "comment_id": 101656290, "body": "@RobinZigmond OP is using a &quot;through&quot; model on the ManyToMany with an additional field (<code>status</code>) which is a perfectly valid use case for having a separate model. But @djangoninja: <code>post.likes.add(user)</code> cannot be right, you&#39;ve already created the relationship with <code>like.save()</code>, this line should throw an error, you cannot add a relationship like this in a &quot;through&quot; relationship."}, {"owner": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 0, "creation_date": 1566424030, "post_id": 57599430, "comment_id": 101656304, "body": "What is the problem? You tell us what you want but you don&#39;t tell us what is the problem? What is the outcome of your code? What do you see that you don&#39;t want to see? An error?"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "reply_to_user": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 1, "creation_date": 1566424074, "post_id": 57599430, "comment_id": 101656310, "body": "@dirkgroten - oops, I didn&#39;t see the <code>through</code> kwarg, I&#39;ll delete that part of my comment [Actually I can&#39;t, it being more than 5 minutes old, so I guess I&#39;ll have to leave it as I think my other question is still very relevant.]"}, {"owner": {"reputation": 73, "user_id": 11864698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a5e0f6696df04d91f1c1890883aba3?s=128&d=identicon&r=PG&f=1", "display_name": "djangoninja", "link": "https://stackoverflow.com/users/11864698/djangoninja"}, "reply_to_user": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 0, "creation_date": 1566424182, "post_id": 57599430, "comment_id": 101656328, "body": "Hey @dirkgroten I have removed post.likes.add(user), however the functionality stays the same, and the button doesn&#39;t changed."}, {"owner": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 0, "creation_date": 1566424272, "post_id": 57599430, "comment_id": 101656355, "body": "As Robin mentioned, you&#39;re not showing the code rendering the template."}, {"owner": {"reputation": 73, "user_id": 11864698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a5e0f6696df04d91f1c1890883aba3?s=128&d=identicon&r=PG&f=1", "display_name": "djangoninja", "link": "https://stackoverflow.com/users/11864698/djangoninja"}, "reply_to_user": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 0, "creation_date": 1566424408, "post_id": 57599430, "comment_id": 101656388, "body": "Hey @dirkgroten I have edited my post and showed the code that renders the template."}, {"owner": {"reputation": 73, "user_id": 11864698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a5e0f6696df04d91f1c1890883aba3?s=128&d=identicon&r=PG&f=1", "display_name": "djangoninja", "link": "https://stackoverflow.com/users/11864698/djangoninja"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1566424430, "post_id": 57599430, "comment_id": 101656395, "body": "@RobinZigmond I have edited the original post and that shows the rendering code for the home page"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1566424538, "post_id": 57599430, "comment_id": 101656443, "body": "@djangoninja is that really the same template that&#39;s rendered by that view? My main point of confusion is that you pass no <code>tuser</code> key in the context, which appears from the template to be the key to whatever is going wrong. (Also, if as it appears the homepage is rendering all posts - something which doesn&#39;t strike me as a good idea - surely you should be checking a property on the individual post objects, not a global one?)"}, {"owner": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 0, "creation_date": 1566424571, "post_id": 57599430, "comment_id": 101656457, "body": "as you can see there&#39;s no <code>tuser</code> in your context for the &quot;home&quot; view."}, {"owner": {"reputation": 73, "user_id": 11864698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a5e0f6696df04d91f1c1890883aba3?s=128&d=identicon&r=PG&f=1", "display_name": "djangoninja", "link": "https://stackoverflow.com/users/11864698/djangoninja"}, "reply_to_user": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 0, "creation_date": 1566424673, "post_id": 57599430, "comment_id": 101656483, "body": "@dirkgroten Oh ok. When I do my redirect, I pass the tuser variable to my home view, which then I check exists within my home.html template."}, {"owner": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 1, "creation_date": 1566424752, "post_id": 57599430, "comment_id": 101656501, "body": "you can&#39;t pass a variable like that to a redirect. Actually I&#39;m surprised your redirect function doesn&#39;t throw an error, unless you have a url pattern that accepts <code>tuser</code> as a kwarg. When you redirect, your browser makes a <b>new request</b> entirely to your django app."}, {"owner": {"reputation": 73, "user_id": 11864698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a5e0f6696df04d91f1c1890883aba3?s=128&d=identicon&r=PG&f=1", "display_name": "djangoninja", "link": "https://stackoverflow.com/users/11864698/djangoninja"}, "reply_to_user": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 0, "creation_date": 1566425029, "post_id": 57599430, "comment_id": 101656580, "body": "@dirkgroten Ah ok. How would you recommend implementing this functionality within my website."}, {"owner": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 1, "creation_date": 1566425196, "post_id": 57599430, "comment_id": 101656623, "body": "In your home view you need to <b>annotate</b> each post in your query with whether or not the current user liked it. Look in the Django docs how to annotate queries."}, {"owner": {"reputation": 73, "user_id": 11864698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a5e0f6696df04d91f1c1890883aba3?s=128&d=identicon&r=PG&f=1", "display_name": "djangoninja", "link": "https://stackoverflow.com/users/11864698/djangoninja"}, "reply_to_user": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 0, "creation_date": 1566432530, "post_id": 57599430, "comment_id": 101658214, "body": "@dirkgroten You mentioned &#39;each&#39; post in my queries in the post view. How would I approach this using with the current query I am performing in my home view."}], "owner": {"reputation": 73, "user_id": 11864698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99a5e0f6696df04d91f1c1890883aba3?s=128&d=identicon&r=PG&f=1", "display_name": "djangoninja", "link": "https://stackoverflow.com/users/11864698/djangoninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566424350, "creation_date": 1566423464, "last_edit_date": 1566424350, "question_id": 57599430, "link": "https://stackoverflow.com/questions/57599430/changing-a-button-depending-on-whether-a-user-has-liked-a-post-or-not", "title": "Changing a button depending on whether a user has liked a post or not", "body": "<p>I am creating a social media website where users can like each others posts. So far, I have implemented most of this, however I am missing one vital part.</p>\n\n<p>This is changing the text within a button, depending on if a user has liked a post or not.</p>\n\n<p>The 'tuser' variable finds a user within the many to many field named 'likes' which is on the Post class. Depending on whether it exists or not.</p>\n\n<p>I pass a variable through to my 'home' template, which then if it exists, display  certain text in a button.</p>\n\n<p>models.py:</p>\n\n<pre><code>class Post(models.Model):\n    file = models.ImageField(upload_to='images/')\n    summary = models.TextField(max_length=600)\n    pub_date = models.DateTimeField(auto_now=True)\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n    likes = models.ManyToManyField(User, through='Like', related_name='likes')\n\n    def __str__(self):\n        return self.user.username\n\n    def pub_date_pretty(self):\n        return self.pub_date.strftime('%b %e %Y')\n\n    def summary_pretty(self):\n        return self.summary[:50]\n\n    @property\n    def total_likes(self):\n        return self.likes.count()\n\nclass Like(models.Model):\n    status = models.BooleanField()\n    post = models.ForeignKey(Post, on_delete=models.CASCADE)\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>def likepost(request, post_id):\n    if request.method == 'POST':\n        post = get_object_or_404(Post, pk=post_id)\n        user = request.user\n        if post.likes.filter(id=user.id).exists():\n            tuser = post.likes.filter(id=user.id)\n            post.likes.remove(user)\n            if tuser:\n                return redirect('home', {'tuser': tuser})\n            else:\n                return redirect('home')\n        else:\n            like = Like()\n            like.post = post\n            like.user = user\n            like.status = False\n            like.save()\n            post.likes.add(user)\n            return redirect('home')\n</code></pre>\n\n<p>template code:</p>\n\n<pre><code>{% if tuser %}\n         &lt;a href=\"javascript:{document.getElementById('likepost{{ post.id }}').submit()}\"&gt;&lt;button class=\"btn btn-primary btn-lg btn-block\"&gt;&lt;span class=\"oi oi-caret-top\"&gt;&lt;/span&gt; Unlike {{ post.total_likes }} &lt;/button&gt;&lt;/a&gt;\n{% else %}\n         &lt;a href=\"javascript:{document.getElementById('likepost{{ post.id }}').submit()}\"&gt;&lt;button class=\"btn btn-primary btn-lg btn-block\"&gt;&lt;span class=\"oi oi-caret-top\"&gt;&lt;/span&gt; Like {{ post.total_likes }} &lt;/button&gt;&lt;/a&gt;\n{% endif %}\n&lt;form id=\"likepost{{ post.id }}\" method=\"POST\" action=\"{% url 'likepost' post.id %}\"&gt;\n  {% csrf_token%}\n  &lt;input type=\"hidden\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>code that renders the home page:</p>\n\n<pre><code>@login_required(login_url=\"/login\")\ndef home(request):\n    posts = Post.objects.all()\n    return render(request, 'posts/home.html', {'posts': posts})\n</code></pre>\n"}, {"tags": ["python", "django", "django-urls"], "answers": [{"comments": [{"owner": {"reputation": 2039, "user_id": 2339620, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/858406bb3e274f28f148e8cc86dece68?s=128&d=identicon&r=PG", "display_name": "karlosss", "link": "https://stackoverflow.com/users/2339620/karlosss"}, "edited": false, "score": 0, "creation_date": 1566424931, "post_id": 57599538, "comment_id": 101656554, "body": "Interesting. When I do the <code>--noreload</code> flag, the problem really vanishes. However, I have NEVER done this and NEVER had these problems before..."}, {"owner": {"reputation": 3518, "user_id": 6535374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70ea39f04d72014bec677a9ff78dfaed?s=128&d=identicon&r=PG&f=1", "display_name": "Mart&#237;n De la Fuente", "link": "https://stackoverflow.com/users/6535374/mart%c3%adn-de-la-fuente"}, "reply_to_user": {"reputation": 2039, "user_id": 2339620, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/858406bb3e274f28f148e8cc86dece68?s=128&d=identicon&r=PG", "display_name": "karlosss", "link": "https://stackoverflow.com/users/2339620/karlosss"}, "edited": false, "score": 1, "creation_date": 1566425332, "post_id": 57599538, "comment_id": 101656667, "body": "Normally, there is no problem with the <code>urls.py</code> being executed twice. If this crashes your app, you probably placed some code in that file that should&#39;t be there? Note that this behaviour only occurs in development and not in production."}, {"owner": {"reputation": 2039, "user_id": 2339620, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/858406bb3e274f28f148e8cc86dece68?s=128&d=identicon&r=PG", "display_name": "karlosss", "link": "https://stackoverflow.com/users/2339620/karlosss"}, "edited": false, "score": 0, "creation_date": 1566426919, "post_id": 57599538, "comment_id": 101657091, "body": "Makes sense. Since I now know this is normal, I will try to find out what is wrong."}], "tags": [], "owner": {"reputation": 3518, "user_id": 6535374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70ea39f04d72014bec677a9ff78dfaed?s=128&d=identicon&r=PG&f=1", "display_name": "Mart&#237;n De la Fuente", "link": "https://stackoverflow.com/users/6535374/mart%c3%adn-de-la-fuente"}, "is_accepted": true, "score": 1, "last_activity_date": 1566424152, "creation_date": 1566424152, "answer_id": 57599538, "question_id": 57599405, "link": "https://stackoverflow.com/questions/57599405/djangos-urls-file-interpretes-twice/57599538#57599538", "title": "Django&#39;s urls file interpretes twice", "body": "<p>When you run your Django app using the development server, an auto-reloader process is spawned to detect changes in your code. This process is initialized the same way your main server process does, and this might be the reason your <code>urls.py</code> file is being executed twice.</p>\n\n<p>To verify if this is the cause of your problem, you could try to run the development server without the auto-reload option:</p>\n\n<pre><code>python manage.py runserver --noreload\n</code></pre>\n"}], "owner": {"reputation": 2039, "user_id": 2339620, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/858406bb3e274f28f148e8cc86dece68?s=128&d=identicon&r=PG", "display_name": "karlosss", "link": "https://stackoverflow.com/users/2339620/karlosss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 57599538, "answer_count": 1, "score": 0, "last_activity_date": 1566424152, "creation_date": 1566423239, "question_id": 57599405, "link": "https://stackoverflow.com/questions/57599405/djangos-urls-file-interpretes-twice", "title": "Django&#39;s urls file interpretes twice", "body": "<p>I spotted a really weird behavior in my Django project. My <code>urls.py</code> just gets interpreted twice for some reason, which is unfortunately causing a lot of trouble. For debugging, I put these two lines</p>\n\n<pre><code>import traceback\ntracebak.print_stack()\n</code></pre>\n\n<p>into my <code>urls.py</code> file. This is the output I get when I do <code>./manage.py runserver</code>:</p>\n\n<pre><code>  File \"/usr/lib/python3.7/threading.py\", line 890, in _bootstrap\n    self._bootstrap_inner()\n  File \"/usr/lib/python3.7/threading.py\", line 926, in _bootstrap_inner\n    self.run()\n  File \"/usr/lib/python3.7/threading.py\", line 870, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/utils/autoreload.py\", line 54, in wrapper\n    fn(*args, **kwargs)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/core/management/commands/runserver.py\", line 117, in inner_run\n    self.check(display_num_errors=True)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/core/management/base.py\", line 390, in check\n    include_deployment_checks=include_deployment_checks,\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/core/management/base.py\", line 377, in _run_checks\n    return checks.run_checks(**kwargs)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/core/checks/registry.py\", line 72, in run_checks\n    new_errors = check(app_configs=app_configs)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/core/checks/urls.py\", line 13, in check_url_config\n    return check_resolver(resolver)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/core/checks/urls.py\", line 23, in check_resolver\n    return check_method()\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/urls/resolvers.py\", line 398, in check\n    for pattern in self.url_patterns:\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/utils/functional.py\", line 80, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/urls/resolvers.py\", line 579, in url_patterns\n    patterns = getattr(self.urlconf_module, \"urlpatterns\", self.urlconf_module)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/utils/functional.py\", line 80, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/urls/resolvers.py\", line 572, in urlconf_module\n    return import_module(self.urlconf_name)\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1006, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 983, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 967, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 677, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 728, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"/home/user/project/urls.py\", line 23, in &lt;module&gt;\n    traceback.print_stack()\n</code></pre>\n\n<p>and the other stack:</p>\n\n<pre><code>  File \"/home/user/project/manage.py\", line 21, in &lt;module&gt;\n    main()\n  File \"/home/user/project/manage.py\", line 17, in main\n    execute_from_command_line(sys.argv)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/core/management/__init__.py\", line 381, in execute_from_command_line\n    utility.execute()\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/core/management/__init__.py\", line 375, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/core/management/base.py\", line 323, in run_from_argv\n    self.execute(*args, **cmd_options)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/core/management/commands/runserver.py\", line 60, in execute\n    super().execute(*args, **options)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/core/management/base.py\", line 364, in execute\n    output = self.handle(*args, **options)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/core/management/commands/runserver.py\", line 95, in handle\n    self.run(**options)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/core/management/commands/runserver.py\", line 102, in run\n    autoreload.run_with_reloader(self.inner_run, **options)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/utils/autoreload.py\", line 598, in run_with_reloader\n    start_django(reloader, main_func, *args, **kwargs)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/utils/autoreload.py\", line 583, in start_django\n    reloader.run(django_main_thread)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/utils/autoreload.py\", line 294, in run\n    get_resolver().urlconf_module\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/utils/functional.py\", line 80, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \"/home/user/project/venv/lib/python3.7/site-packages/django/urls/resolvers.py\", line 572, in urlconf_module\n    return import_module(self.urlconf_name)\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1006, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 983, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 967, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 677, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 728, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"/home/user/project/urls.py\", line 23, in &lt;module&gt;\n    traceback.print_stack()\n</code></pre>\n\n<p>Any ideas what might cause this behavior? Might it be for example some import somewhere in my project? I have completely no idea which pieces of code I should include, so if you have an idea, let me know and I will add them.</p>\n"}, {"tags": ["python", "matplotlib", "graph"], "comments": [{"owner": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "edited": false, "score": 0, "creation_date": 1566423311, "post_id": 57599384, "comment_id": 101656106, "body": "Do you want your line to be dashed instead of fully connected? The line from your picture does cross the average of each bar."}, {"owner": {"reputation": 25, "user_id": 11869856, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AwhElGcZ5Q0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd2sjdpVX1bepn8s0_xNpdsAXxZGw/photo.jpg?sz=128", "display_name": "Pedro Jesus", "link": "https://stackoverflow.com/users/11869856/pedro-jesus"}, "reply_to_user": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "edited": false, "score": 0, "creation_date": 1566424822, "post_id": 57599384, "comment_id": 101656520, "body": "@CeliusStingher A dashed line, I tried <code>plot.axhline(np.mean(df), linestyle=&#39;--&#39;,  color=&#39;blue&#39;)</code> but this is for all bar plot. Can you help me, thansk!!!"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1566430994, "post_id": 57599384, "comment_id": 101657976, "body": "Unclear what you\u2019re asking"}, {"owner": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "edited": false, "score": 0, "creation_date": 1566439629, "post_id": 57599384, "comment_id": 101659337, "body": "I&#39;ll edit your question so it&#39;s properly formatted"}], "answers": [{"tags": [], "owner": {"reputation": 13431, "user_id": 7051394, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/035a36a4ffaec4c1c1efd85e34181ace?s=128&d=identicon&r=PG&f=1", "display_name": "Right leg", "link": "https://stackoverflow.com/users/7051394/right-leg"}, "is_accepted": false, "score": 0, "last_activity_date": 1566464914, "creation_date": 1566464914, "answer_id": 57605777, "question_id": 57599384, "link": "https://stackoverflow.com/questions/57599384/show-dashed-line-of-mean-for-each-bar-plot/57605777#57605777", "title": "Show dashed line of mean for each bar plot", "body": "<p>There's no Matplotlib magic involved here; you just need to properly define what you want to plot.</p>\n\n<p>The lines you want to draw are connections between the center of the bars.\nThe center of a bar is computed by offsetting <code>x</code> by <code>width +/- 2</code>, and by dividing <code>y</code> by 2.</p>\n\n<p>You can plot those two lines with a simple <code>plt.plot</code>:</p>\n\n<pre><code># Your code\n\nplt.plot(\n    x - width/2, \n    [y / 2 for y in men_means], \n    linestyle=\"--\", \n    linewidth=3, \n    color=\"black\"\n)\nplt.plot(\n    x + width/2, \n    [y / 2 for y in women_means], \n    linestyle=\"--\", \n    linewidth=3, \n    color=\"purple\"\n)\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Nl52c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nl52c.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 25, "user_id": 11869856, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AwhElGcZ5Q0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd2sjdpVX1bepn8s0_xNpdsAXxZGw/photo.jpg?sz=128", "display_name": "Pedro Jesus", "link": "https://stackoverflow.com/users/11869856/pedro-jesus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1566464914, "creation_date": 1566423059, "last_edit_date": 1566442411, "question_id": 57599384, "link": "https://stackoverflow.com/questions/57599384/show-dashed-line-of-mean-for-each-bar-plot", "title": "Show dashed line of mean for each bar plot", "body": "<p>I would like to plot a dashed line that shows the average of value for both variables. This is my code for the bars plot:</p>\n\n<pre><code> import matplotlib\n import matplotlib.pyplot as plt\n import numpy as np\n\n men_means = [2000, 3400, 3000, 3005, 2700]\n women_means = [2500, 3200, 3004, 2000, 2005]\n\n x = np.arange(len(labels))  # the label locations\n width = 0.35  # the width of the bars\n\n fig, ax = plt.subplots()\n rects1 = ax.bar(x - width/2, men_means, width, label='Men')\n rects2 = ax.bar(x + width/2, women_means, width, label='Women')\n</code></pre>\n\n<p>This is the image of what I'm expecting as a result:\n<a href=\"https://i.stack.imgur.com/WYmmQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WYmmQ.png\" alt=\"age\"></a></p>\n"}, {"tags": ["python", "windows", "loops", "iteration", "continue"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1566423087, "post_id": 57599368, "comment_id": 101656025, "body": "Welcome to StackOverflow. Please read and follow the posting guidelines in the help documentation, as suggested when you created this account. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, complete, verifiable example</a> applies here. We cannot effectively help you until you post your MCVE code and accurately specify the problem. We should be able to paste your posted code into a text file and reproduce the problem you specified. Your posted code has several undefined symbols, and is missing set-up code."}], "answers": [{"tags": [], "owner": {"reputation": 300, "user_id": 7065753, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/39e74f09c7e972f5a9cc40cf1a3436b4?s=128&d=identicon&r=PG&f=1", "display_name": "TheSaint321", "link": "https://stackoverflow.com/users/7065753/thesaint321"}, "is_accepted": false, "score": 0, "last_activity_date": 1566423688, "creation_date": 1566423688, "answer_id": 57599464, "question_id": 57599368, "link": "https://stackoverflow.com/questions/57599368/python-nested-while-loop-will-continue-from-the-first-while-not-the-nested-w/57599464#57599464", "title": "Python: Nested while loop will &#39;continue&#39; from the first while, not the nested while", "body": "<p>I tried recreating this and wasn't able to. Please try and post a code snippet which can be run and shows this bug.</p>\n\n<p>This is my more generic version of this that I quickly wrote which doesn't seem to recreate this issue: </p>\n\n<pre><code>i = 0\nj = 0\n\n\nwhile i &lt; 10:\n    print(f'OUTER LOOP: {i}')\n    i += 1\n    while j &lt; 10:\n        print(f'INNER LOOP: {j}')\n        try:\n            j += 1\n            raise Exception(\"CRASHING!\")\n        except:\n            print(\"CATCHING\")\n            continue\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>OUTER LOOP: 0\nINNER LOOP: 0\nCATCHING\nINNER LOOP: 1\nCATCHING\nINNER LOOP: 2\nCATCHING\nINNER LOOP: 3\nCATCHING\nINNER LOOP: 4\nCATCHING\nINNER LOOP: 5\nCATCHING\nINNER LOOP: 6\nCATCHING\nINNER LOOP: 7\nCATCHING\nINNER LOOP: 8\nCATCHING\nINNER LOOP: 9\nCATCHING\nOUTER LOOP: 1\nOUTER LOOP: 2\nOUTER LOOP: 3\nOUTER LOOP: 4\nOUTER LOOP: 5\nOUTER LOOP: 6\nOUTER LOOP: 7\nOUTER LOOP: 8\nOUTER LOOP: 9\n</code></pre>\n\n<p>As you can see the continue appears to only be impacting the inner loop. </p>\n"}, {"comments": [{"owner": {"reputation": 1666, "user_id": 131795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4xBBm.jpg?s=128&g=1", "display_name": "Trevor Harrison", "link": "https://stackoverflow.com/users/131795/trevor-harrison"}, "edited": false, "score": 0, "creation_date": 1569607905, "post_id": 58139330, "comment_id": 102665617, "body": "this answer probably should be a comment to your original question."}], "tags": [], "owner": {"reputation": 28, "user_id": 813316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d340db96265d5a44a9c1ebdd763afd0?s=128&d=identicon&r=PG", "display_name": "Nick M", "link": "https://stackoverflow.com/users/813316/nick-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1569606618, "creation_date": 1569606618, "answer_id": 58139330, "question_id": 57599368, "link": "https://stackoverflow.com/questions/57599368/python-nested-while-loop-will-continue-from-the-first-while-not-the-nested-w/58139330#58139330", "title": "Python: Nested while loop will &#39;continue&#39; from the first while, not the nested while", "body": "<p>This appears to have been a one-off issue...I'm still unclear as to why it was happening but it seems to be working fine now.</p>\n"}], "owner": {"reputation": 28, "user_id": 813316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d340db96265d5a44a9c1ebdd763afd0?s=128&d=identicon&r=PG", "display_name": "Nick M", "link": "https://stackoverflow.com/users/813316/nick-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1569606618, "creation_date": 1566422920, "question_id": 57599368, "link": "https://stackoverflow.com/questions/57599368/python-nested-while-loop-will-continue-from-the-first-while-not-the-nested-w", "title": "Python: Nested while loop will &#39;continue&#39; from the first while, not the nested while", "body": "<p>I have a nested <code>while</code> statement, and inside the second statement I have a <code>try</code> block. In the <code>except</code> block I have some code and then <code>continue</code>. The problem is when it hits that <code>continue</code> it will start from the <strong>first</strong> <code>while</code>, and not the expected nested <code>while</code>.</p>\n\n<p>I've been searching for a bit, but I'm not sure if it's intended behavior?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>while iRowCount &lt; iMaxRows:\n    # ...\n    # Code here for getting information from a database\n    # ...\n\n    print(\"Iterating\")\n    while i2RowCount &lt; i2MaxRows:\n        try:\n            readUrl = \"someURL\" # This is assigned from the database\n            BrowserObj.get(readUrl) # Using Webdriver to navigate to the URL\n\n            elem = BrowserObj.find_element_by_link_text(\"Find Me\")\n            elemHref = elem.get_attribute('href')\n            BrowserObj.get(elemHref) # Navigate to new link found\n\n            # This is never reached \n            theOutput = BrowserObj.find_element_by_css_selector(\".classNames.here\")\n            print(\"Out: \" + str(theOutput))\n            exit()\n\n        except NoSuchElementException as E:\n            print(\"Not found. (Iteration: #\" + str(i2RowCount) + \")\")\n            i2RowCount += 1\n            continue\n\n        i2RowCount += 1\n    iRowCount += 1\n</code></pre>\n\n<p>The exception will throw at <code>elem = BrowserObj.find_element_by_link_text(\"Find Me\")</code>. But my output will be the following:</p>\n\n<pre><code>Iterating\nNot found. (Iteration: #0)\nIterating\nNot found. (Iteration: #0)\nIterating\nNot found. (Iteration: #0)\nIterating\nNot found. (Iteration: #0)\nIterating\nNot found. (Iteration: #0)\n...this will keep going.\n</code></pre>\n\n<p>So for some reason the <code>continue</code> seems to be going back to my first loop, and not my nested one as intended... Am I doing something wrong here?</p>\n"}, {"tags": ["python", "pip"], "comments": [{"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 2, "creation_date": 1566422958, "post_id": 57599359, "comment_id": 101655991, "body": "Use <code>python -m pip --version</code>"}, {"owner": {"reputation": 2703, "user_id": 3849781, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/23e4b8c555049a94eddbfcc05ec4ae69?s=128&d=identicon&r=PG&f=1", "display_name": "YohanRoth", "link": "https://stackoverflow.com/users/3849781/yohanroth"}, "reply_to_user": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1566423309, "post_id": 57599359, "comment_id": 101656105, "body": "@C.Nivs reply in the answer so I can accept it?"}], "answers": [{"tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": true, "score": 3, "last_activity_date": 1566423390, "creation_date": 1566423390, "answer_id": 57599421, "question_id": 57599359, "link": "https://stackoverflow.com/questions/57599359/use-anaconda-installed-pip/57599421#57599421", "title": "Use Anaconda installed pip", "body": "<p>Use <code>python -m pip &lt;operation&gt;</code></p>\n\n<p>The reason you want to use <code>python -m &lt;module&gt;</code> is that <code>pip</code> might not necessarily refer to the python installation you are referring to. Even if you have run <code>activate /some/env</code>, that still doesn't guarantee that the <code>pip</code> binary will be the one used. </p>\n\n<p>For instance, the <code>$PATH</code> environment variable might have the python paths appended rather than prepended, so <code>pip</code> might live in <code>/usr/local/bin</code> which will be searched first, giving the wrong <code>pip</code>.</p>\n\n<p>However, you <em>know</em> which python you want to use, and by using the <code>-m</code> flag, you explicitly tie that module to the python version specified by <code>python</code></p>\n"}], "owner": {"reputation": 2703, "user_id": 3849781, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/23e4b8c555049a94eddbfcc05ec4ae69?s=128&d=identicon&r=PG&f=1", "display_name": "YohanRoth", "link": "https://stackoverflow.com/users/3849781/yohanroth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 57599421, "answer_count": 1, "score": 1, "last_activity_date": 1566423390, "creation_date": 1566422831, "question_id": 57599359, "link": "https://stackoverflow.com/questions/57599359/use-anaconda-installed-pip", "title": "Use Anaconda installed pip", "body": "<p>I have</p>\n\n<pre><code>python --version\nPython 3.6.9 :: Anaconda, Inc.\n</code></pre>\n\n<p>but </p>\n\n<pre><code>pip3 --version\npip 19.2.2 from /home/ss/.local/lib/python3.5/site-packages/pip (python 3.5)\npip --version\npip 19.2.2 from /home/ss/.local/lib/python3.5/site-packages/pip (python 3.5)\n</code></pre>\n\n<p>I installed pip for anaconda as </p>\n\n<pre><code>conda install -c anaconda pip\n</code></pre>\n\n<p>But it did not change the pip path, it is still 3.5 sys path.</p>\n\n<p>How do I use pip installed in anaconda python dir for python 3.6.9?</p>\n"}, {"tags": ["python", "grpc", "grpc-python"], "answers": [{"tags": [], "owner": {"reputation": 461, "user_id": 5090364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a61fa20b81763a2fa3191b559b4a9136?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Davydov", "link": "https://stackoverflow.com/users/5090364/ilya-davydov"}, "is_accepted": false, "score": 8, "last_activity_date": 1568111052, "creation_date": 1568111052, "answer_id": 57868784, "question_id": 57599354, "link": "https://stackoverflow.com/questions/57599354/python-not-able-to-connect-to-grpc-channel-failed-to-connect-to-all-addresse/57868784#57868784", "title": "Python not able to connect to grpc channel -&gt; &quot;failed to connect to all addresses&quot; &quot;grpc_status&quot;:14", "body": "<p>This is common error, it can occured in different cases. But in most usual case decribed in \n<a href=\"https://github.com/grpc/grpc/issues/9987\" rel=\"noreferrer\">https://github.com/grpc/grpc/issues/9987</a> can be fixed by unset http_proxy enviroment variable</p>\n\n<pre><code>if os.environ.get('https_proxy'):\n del os.environ['https_proxy']\nif os.environ.get('http_proxy'):\n del os.environ['http_proxy']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149, "user_id": 3678698, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/10e0833ad1f8977ec9ce33a0c8f5d41e?s=128&d=identicon&r=PG&f=1", "display_name": "Synster", "link": "https://stackoverflow.com/users/3678698/synster"}, "is_accepted": false, "score": 6, "last_activity_date": 1598362504, "creation_date": 1598362504, "answer_id": 63580067, "question_id": 57599354, "link": "https://stackoverflow.com/questions/57599354/python-not-able-to-connect-to-grpc-channel-failed-to-connect-to-all-addresse/63580067#63580067", "title": "Python not able to connect to grpc channel -&gt; &quot;failed to connect to all addresses&quot; &quot;grpc_status&quot;:14", "body": "<p>What fixed it for me is adding the following option to client channel.</p>\n<pre><code>grpc.insecure_channel('localhost:50051', options=(('grpc.enable_http_proxy', 0),))\n</code></pre>\n<p>This is missing in the grpc quickstarts as well and is not really highlighted.</p>\n"}], "owner": {"reputation": 362, "user_id": 5431429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a6d11cbd5a6591b05ea8f776448ac6b?s=128&d=identicon&r=PG&f=1", "display_name": "gheorghi evgheniev", "link": "https://stackoverflow.com/users/5431429/gheorghi-evgheniev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13663, "favorite_count": 0, "answer_count": 2, "score": 17, "last_activity_date": 1598362504, "creation_date": 1566422810, "last_edit_date": 1566423193, "question_id": 57599354, "link": "https://stackoverflow.com/questions/57599354/python-not-able-to-connect-to-grpc-channel-failed-to-connect-to-all-addresse", "title": "Python not able to connect to grpc channel -&gt; &quot;failed to connect to all addresses&quot; &quot;grpc_status&quot;:14", "body": "<p>I'm getting the error below when trying to call a stub method. \nAny idea what is causing it? </p>\n\n<pre><code>[bolt.api.handlers] 2019-08-21 20:07:57,792 ERROR handlers:1066: 'ResourceHandler' object has no attribute 'ontology_service_handler'\nTraceback (most recent call last):\n  File \"/bolt-webserver/bolt/api/onse/onse_handlers/ontology_service.py\", line 17, in post\n    ontology_id = await self.onse_stub.createOntology()\n  File \"/bolt-webserver/bolt/api/onse/onse_stub.py\", line 41, in createOntology\n    return self.stub.CreateOntology(ontology_messages_pb2.Ontology())\n  File \"/usr/local/lib/python3.6/site-packages/grpc/_channel.py\", line 565, in __call__\n    return _end_unary_response_blocking(state, call, False, None)\n  File \"/usr/local/lib/python3.6/site-packages/grpc/_channel.py\", line 467, in _end_unary_response_blocking\n    raise _Rendezvous(state, None, None, deadline)\ngrpc._channel._Rendezvous: &lt;_Rendezvous of RPC that terminated with:\n        status = StatusCode.UNAVAILABLE\n        details = \"failed to connect to all addresses\"\n        debug_error_string = \"{\"created\":\"@1566418077.791002345\",\"description\":\"Failed to pick subchannel\",\"file\":\"src/core/ext/filters/client_channel/client_channel.cc\",\"file_line\":3818,\"referenced_errors\":[{\"created\":\"@1566418077.790965749\",\"description\":\"failed to connect to all addresses\",\"file\":\"src/core/ext/filters/client_channel/lb_policy/pick_first/pick_first.cc\",\"file_line\":395,\"grpc_status\":14}]}\"\n</code></pre>\n\n<p>I've tried to provide ip address instead of hostname but still getting the same error . The OnseStub class is initialized right before calling  createOntology method.\nThe service is up and running.\nThe failing call is done from a tornado web app (in case that might matter) </p>\n\n<pre><code>class OnseStub:\n\n    def __init__(self, ontology_service_backend):\n    self.channel = grpc.insecure_channel('localhost:51051')\n    self.stub = ontology_service_pb2_grpc.OntologyServiceStub(self.channel)\n\n    def __del__(self):\n    if self.channel != None:\n    self.channel.close() # close grpc channel\n\n    async def createOntology(self):\n    return self.stub.CreateOntology(ontology_messages_pb2.Ontology())\n</code></pre>\n"}, {"tags": ["python", "webhooks", "zapier"], "comments": [{"owner": {"reputation": 4350, "user_id": 1825390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0bb91ca3e4bded511a38e4a01c26efb2?s=128&d=identicon&r=PG", "display_name": "xavdid", "link": "https://stackoverflow.com/users/1825390/xavdid"}, "edited": false, "score": 0, "creation_date": 1566441207, "post_id": 57599338, "comment_id": 101659590, "body": "Shot in the dark, but I would guess that your post request needs to send JSON, not just the id itself. To see exactly the format that the request is sending, try pointing it at a <a href=\"https://requestbin.com/\" rel=\"nofollow noreferrer\">requestbin.com</a> instead of the other hook url."}, {"owner": {"reputation": 11, "user_id": 11959304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ndEO_D7kqbQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3revV08v_2xh0hf2-tnxRRHHr86SuQ/photo.jpg?sz=128", "display_name": "MirandaG", "link": "https://stackoverflow.com/users/11959304/mirandag"}, "reply_to_user": {"reputation": 4350, "user_id": 1825390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0bb91ca3e4bded511a38e4a01c26efb2?s=128&d=identicon&r=PG", "display_name": "xavdid", "link": "https://stackoverflow.com/users/1825390/xavdid"}, "edited": false, "score": 0, "creation_date": 1566959208, "post_id": 57599338, "comment_id": 101814492, "body": "That was absolutely the problem! Thank you for helping an ickle newbie automate their work, you&#39;ve saved me a decent chunk of time :)"}, {"owner": {"reputation": 4350, "user_id": 1825390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0bb91ca3e4bded511a38e4a01c26efb2?s=128&d=identicon&r=PG", "display_name": "xavdid", "link": "https://stackoverflow.com/users/1825390/xavdid"}, "edited": false, "score": 0, "creation_date": 1567010696, "post_id": 57599338, "comment_id": 101837899, "body": "no problem! you should post your solution as an answer to help others who may have the same question!"}, {"owner": {"reputation": 11, "user_id": 11959304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ndEO_D7kqbQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3revV08v_2xh0hf2-tnxRRHHr86SuQ/photo.jpg?sz=128", "display_name": "MirandaG", "link": "https://stackoverflow.com/users/11959304/mirandag"}, "reply_to_user": {"reputation": 4350, "user_id": 1825390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0bb91ca3e4bded511a38e4a01c26efb2?s=128&d=identicon&r=PG", "display_name": "xavdid", "link": "https://stackoverflow.com/users/1825390/xavdid"}, "edited": false, "score": 0, "creation_date": 1567104731, "post_id": 57599338, "comment_id": 101874237, "body": "Done. Thank you again!"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11959304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ndEO_D7kqbQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3revV08v_2xh0hf2-tnxRRHHr86SuQ/photo.jpg?sz=128", "display_name": "MirandaG", "link": "https://stackoverflow.com/users/11959304/mirandag"}, "is_accepted": false, "score": 1, "last_activity_date": 1567104720, "creation_date": 1567104720, "answer_id": 57716266, "question_id": 57599338, "link": "https://stackoverflow.com/questions/57599338/triggering-zap-a-by-passing-a-post-function-from-zap-b/57716266#57716266", "title": "Triggering Zap A by passing a POST function from Zap B", "body": "<p>Here's what worked:</p>\n\n<pre><code>import requests\n\nhookUrl = 'https://hooks.zapier.com/hooks/catch/123456/1abcd2/'\npayload = {'id': input.get('value')}\nr = requests.post(hookUrl, data=payload)\n\nid = int(input.get('value'))+1\n\nreturn {'value': id}\n</code></pre>\n\n<p>The error was in not defining a key for the variable now called <code>payload</code>. Once the key was added to keep the JSON formatting (thank you, xavdid!), it worked like a charm. Now, I have a Zap that sends out this webhook every day at midnight, which runs a DIFFERENT Zap with a final pathing step which either a.) terminates the Zap or b.) sends a webhook and loops the Zap again, depending on whether any entries in a Spreadsheet with a given variable still exist.</p>\n\n<p>Thanks for the help!</p>\n"}], "owner": {"reputation": 11, "user_id": 11959304, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ndEO_D7kqbQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3revV08v_2xh0hf2-tnxRRHHr86SuQ/photo.jpg?sz=128", "display_name": "MirandaG", "link": "https://stackoverflow.com/users/11959304/mirandag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567104720, "creation_date": 1566422707, "question_id": 57599338, "link": "https://stackoverflow.com/questions/57599338/triggering-zap-a-by-passing-a-post-function-from-zap-b", "title": "Triggering Zap A by passing a POST function from Zap B", "body": "<p>Using Zapier, I'm trying to set up a Zap that will run once a day and go through a spreadsheet to pick up anything with a specific keyword and add it to another sheet, remove it from the original sheet, and rinse and repeat. I'm using Daily Schedule trigger to run some Python code with a Post function to send the webhook. The URL links to another Zap with a Catch Hook trigger, which should execute when that webhook comes in to run through the steps to adjust the spreadsheets, and then concludes with an A/B path which will repeat the webhook if there are still more instances of the keyword to move/delete. However, my Zap is not triggering to the webhook, and I'm not sure why. I'm very new to webhooks and been unable to find an answer on my own.</p>\n\n<pre><code>import requests\n\nhookUrl = 'https://hooks.zapier.com/hooks/catch/123456/1abcd2/'\nid = input.get('value')\n\nresponse = requests.post(hookUrl, id)\n\nid = int(id)+1\n\nreturn {'value': id}\n</code></pre>\n\n<p>I would expect the code to execute a post to the webhook URL and trigger the Zap, but the Zap does not react. The code executes successfully otherwise with returning the incremented ID.</p>\n\n<p>Any insight?</p>\n"}, {"tags": ["python", "scipy", "statistics", "distribution", "p-value"], "comments": [{"owner": {"reputation": 4044, "user_id": 2974951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4596e20fc7b9882d10758f75da4d4b7c?s=128&d=identicon&r=PG&f=1", "display_name": "user2974951", "link": "https://stackoverflow.com/users/2974951/user2974951"}, "edited": false, "score": 0, "creation_date": 1566556020, "post_id": 57599320, "comment_id": 101702432, "body": "I can&#39;t see from your text, what is the point value, mean and sd of the normal distribution? Also, are you trying to estimate the density or the cumulative?"}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "reply_to_user": {"reputation": 4044, "user_id": 2974951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4596e20fc7b9882d10758f75da4d4b7c?s=128&d=identicon&r=PG&f=1", "display_name": "user2974951", "link": "https://stackoverflow.com/users/2974951/user2974951"}, "edited": false, "score": 0, "creation_date": 1566584679, "post_id": 57599320, "comment_id": 101716340, "body": "These are correlation values ranging from -1 to 1.  I am trying to determine if my point value is statistically significant.  My understanding is that I measure the number of occurrences below my value (-0.44) and above (0.44) then divide this by the total number of permutations (N=100).  However, this would be a probability.  Is it possible to use the scipy distribution and a point value to determine whether or not a value is signficant?"}, {"owner": {"reputation": 4044, "user_id": 2974951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4596e20fc7b9882d10758f75da4d4b7c?s=128&d=identicon&r=PG&f=1", "display_name": "user2974951", "link": "https://stackoverflow.com/users/2974951/user2974951"}, "edited": false, "score": 0, "creation_date": 1566628056, "post_id": 57599320, "comment_id": 101723982, "body": "You mentioned some new piece of information now that you did not include in the question, is this a permutation test?"}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "reply_to_user": {"reputation": 4044, "user_id": 2974951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4596e20fc7b9882d10758f75da4d4b7c?s=128&d=identicon&r=PG&f=1", "display_name": "user2974951", "link": "https://stackoverflow.com/users/2974951/user2974951"}, "edited": false, "score": 0, "creation_date": 1566702448, "post_id": 57599320, "comment_id": 101737242, "body": "Yes it is. Sorry I left that out."}], "answers": [{"comments": [{"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1566846503, "post_id": 57646462, "comment_id": 101775956, "body": "So if I was doing a similar permutation test with euclidean distance as the metric to  determine if a certain distance was significantly small, would it be a one-sided test where I&#39;m only checking the proportion of the null values being lower?"}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1566931509, "post_id": 57646462, "comment_id": 101807782, "body": "Thank you!  This is really useful.  So if I fit my null values to a distribution such as the one above, is there a way to calculate a p-value from the actual scipy distribution?  Or is this not possible and should/can only be done using the permutation test you described?"}, {"owner": {"reputation": 4044, "user_id": 2974951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4596e20fc7b9882d10758f75da4d4b7c?s=128&d=identicon&r=PG&f=1", "display_name": "user2974951", "link": "https://stackoverflow.com/users/2974951/user2974951"}, "reply_to_user": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1566982543, "post_id": 57646462, "comment_id": 101821954, "body": "@O.rka I don&#39;t really understand what you are asking, but if this is about Python then I cannot help you there."}], "tags": [], "owner": {"reputation": 4044, "user_id": 2974951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4596e20fc7b9882d10758f75da4d4b7c?s=128&d=identicon&r=PG&f=1", "display_name": "user2974951", "link": "https://stackoverflow.com/users/2974951/user2974951"}, "is_accepted": false, "score": 0, "last_activity_date": 1566739959, "creation_date": 1566739959, "answer_id": 57646462, "question_id": 57599320, "link": "https://stackoverflow.com/questions/57599320/how-to-calculate-a-p-value-for-a-point-on-a-normal-distribution/57646462#57646462", "title": "How to calculate a p-value for a point on a (normal) distribution?", "body": "<p>Based on your comments I am going to assume that these are the results from a permutation test. That is, you obtained a value from your original data set (-0.44), while all the other values were obtained by permuting your data. Now you would like to determine whether your original value is significant.</p>\n\n<p>A permutation test (in the branch of resampling) is a non-parametric statistic, so it has nothing to do with normal distributions. In your case it looks roughly normal but that is neither necessary nor required. There are different ways you could estimate a p-value from the permuted distribution, the simplest option is similar to your idea.</p>\n\n<p>In case you performed every possible permutation you would get an exact distribution, so your formula for a (two-sided) p-value is correct, <code>(|t*|&gt;=|t|)/p</code>, where <code>t*</code> is the original value, <code>t</code> are the permuted values, and <code>p</code> is the number of total permutations.</p>\n\n<p>If you performed a non-complete number of permutations then the formula is only slightly different, <code>(1+|t*|&gt;=|t|)/(1+p)</code>, to account for the randomness.</p>\n"}], "owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 700, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1566739959, "creation_date": 1566422569, "last_edit_date": 1566477315, "question_id": 57599320, "link": "https://stackoverflow.com/questions/57599320/how-to-calculate-a-p-value-for-a-point-on-a-normal-distribution", "title": "How to calculate a p-value for a point on a (normal) distribution?", "body": "<p>I'm trying to calculate a p-value for my metric (spearman) that I'm trying to generalize the method so it can work with other metrics (instead of relying on scipy.stats.spearmanr).</p>\n\n<p><strong>How can I generate a p-value of a point from this distribution?</strong></p>\n\n<p>Does the method apply to non-normal distributions? This is normally distributed and would probaly be more-so if I sampled more than 100 points. </p>\n\n<p>This post requires <code>\u00b5=0 ,std=1</code> <a href=\"https://stackoverflow.com/questions/3496656/convert-z-score-z-value-standard-score-to-p-value-for-normal-distribution-in\">Convert Z-score (Z-value, standard score) to p-value for normal distribution in Python</a></p>\n\n<pre><code>from scipy import stats\nimport seaborn as sns\nimport numpy as np\nimport matplotlib.pyplot as plt\n\ndata = np.asarray([0.027972027972027972, -0.2802197802197802, -0.21818181818181817, 0.3464285714285714, 0.15, 0.34065934065934067, -0.3216783216783217, 0.08391608391608392, -0.03496503496503497, -0.2967032967032967, 0.09090909090909091, 0.11188811188811189, 0.1181818181818182, -0.4787878787878788, -0.6923076923076923, -0.05494505494505495, 0.19090909090909092, 0.3146853146853147, -0.42727272727272725, 0.06363636363636363, 0.1978021978021978, 0.12142857142857141, 0.10303030303030303, 0.23214285714285712, -0.5804195804195805, 0.013986013986013986, 0.02727272727272727, 0.5659340659340659, 0.06363636363636363, -0.503030303030303, -0.2867132867132867, 0.07252747252747253, -0.13736263736263737, 0.21212121212121213, -0.09010989010989011, -0.2517482517482518, -0.17482517482517484, -0.3706293706293707, 0.15454545454545454, 0.01818181818181818, 0.17582417582417584, 0.3230769230769231, -0.09642857142857142, -0.5274725274725275, -0.23626373626373626, -0.2692307692307692, -0.2857142857142857, -0.19999999999999998, -0.489010989010989, -0.15454545454545454, 0.38461538461538464, 0.6, 0.37762237762237766, -0.0029411764705882353, -0.06993006993006994, -0.19999999999999998, 0.38181818181818183, 0.05454545454545455, -0.03296703296703297, 0.17272727272727273, -0.13986013986013987, -0.08241758241758242, -0.34545454545454546, 0.5252747252747253, 0.10303030303030303, 0.16783216783216784, -0.36363636363636365, -0.42857142857142855, 0.12727272727272726, -0.18181818181818182, -0.10439560439560439, -0.6083916083916084, -0.1956043956043956, 0.13846153846153847, -0.48951048951048953, -0.18881118881118883, 0.7362637362637363, -0.19090909090909092, 0.4909090909090909, 0.37142857142857144, -0.3090909090909091, -0.1098901098901099, 0.15151515151515152, -0.13636363636363635, -0.5494505494505495, 0.44755244755244755, 0.04895104895104896, -0.37142857142857144, 0.01098901098901099, 0.08131868131868132, 0.2571428571428571, -0.3076923076923077, 0.24545454545454545, 0.06043956043956044, 0.06764705882352941, 0.02727272727272727, -0.07252747252747253, 0.21818181818181817, -0.03846153846153846, 0.48571428571428577])\nquery_value = -0.44155844155844154\n\nwith plt.style.context(\"seaborn-white\"):\n    fig, ax = plt.subplots()\n    sns.distplot(data, rug=True, color=\"teal\", ax=ax)\n    ax.set_xlabel(\"$x$\", fontsize=15)\n    ax.axvline(query_value, color=\"black\", linestyle=\":\", linewidth=1.618, label=\"Query: %0.5f\"%query_value)\n    ax.legend()\n\n# Normal Test\nprint(stats.normaltest(data))\n# Fit the data\nparams = stats.norm.fit(data)\n# Generate the distribution\ndistribution = stats.norm(*params)\ndistribution\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/edjkw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/edjkw.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "geotiff", "rasterio"], "comments": [{"owner": {"reputation": 318, "user_id": 10011520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e88d59f92889fe457b24dbe58e047e?s=128&d=identicon&r=PG&f=1", "display_name": "Samha&#39;", "link": "https://stackoverflow.com/users/10011520/samha"}, "edited": false, "score": 0, "creation_date": 1566688276, "post_id": 57599273, "comment_id": 101735886, "body": "Hi Johannes, I ran into this <a href=\"https://ibb.co/SRg17tz\" rel=\"nofollow noreferrer\">error</a> after running your code. Do u have the same problem?"}, {"owner": {"reputation": 198, "user_id": 5324953, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yFt4oinZmtE/AAAAAAAAAAI/AAAAAAAAABU/jI-GnQyPOok/photo.jpg?sz=128", "display_name": "Johannes valbj&#248;rn", "link": "https://stackoverflow.com/users/5324953/johannes-valbj%c3%b8rn"}, "reply_to_user": {"reputation": 318, "user_id": 10011520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9e88d59f92889fe457b24dbe58e047e?s=128&d=identicon&r=PG&f=1", "display_name": "Samha&#39;", "link": "https://stackoverflow.com/users/10011520/samha"}, "edited": false, "score": 0, "creation_date": 1566733934, "post_id": 57599273, "comment_id": 101742614, "body": "The code is an extract, i might have messed it up but the concept is the same. I miss the ability to describe my problem in terms of seeking a standard solution to &quot;extract correctly scaled excerpts from a source raster that fits inside a boundary, result being the size of the boundary&quot;"}], "owner": {"reputation": 198, "user_id": 5324953, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yFt4oinZmtE/AAAAAAAAAAI/AAAAAAAAABU/jI-GnQyPOok/photo.jpg?sz=128", "display_name": "Johannes valbj&#248;rn", "link": "https://stackoverflow.com/users/5324953/johannes-valbj%c3%b8rn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1594295016, "creation_date": 1566422167, "last_edit_date": 1566455995, "question_id": 57599273, "link": "https://stackoverflow.com/questions/57599273/crop-same-geo-polygon-from-multiple-raster-inputs", "title": "crop same geo polygon from multiple raster inputs", "body": "<p>I am trying to position geotif rasters so i can extract raster data of the same area resulting in same sized output images.</p>\n\n<p>The idea is to be able to create a timelapse of overlapping satelite photos, some of the photos only contain fractions that overlap so i need to align and crop/whatever them.</p>\n\n<p>I am using rasterio currently but i am not locked to using it.\nI am trying to position the two rasters below:</p>\n\n<ul>\n<li><a href=\"https://github.com/sloev/satelite_thumbnails/blob/master/1_out.tif?raw=true\" rel=\"nofollow noreferrer\">geotif 1</a></li>\n<li><a href=\"https://github.com/sloev/satelite_thumbnails/blob/master/2_out.tif?raw=true\" rel=\"nofollow noreferrer\">geotif 2</a></li>\n</ul>\n\n<p>So they will be aligned in the same coordinate system.\nThe idea is to get fixed size outputs where only the pixels from the input raster that fall within the fixed size area is taken.</p>\n\n<p>Btw the coorsinate system is WGS 84 / UTM zone 32N (EPSG:32632).</p>\n\n<p>install dependencies:</p>\n\n<pre><code>pip install rasterio, numpy, pillow\n</code></pre>\n\n<p>example:</p>\n\n<pre><code>import rasterio\nfrom shapely.geometry.polygon import Polygon\nfrom rasterio.mask import mask\nfrom rasterio.plot import reshape_as_image\nfrom PIL import Image\n\n\ncoords = [(331500,6171471),(480444,6171471), (480444,6320415),(331500,6320415)]\ncopenhagen_poly = Polygon(coords)\n\nimg_1 = rasterio.open('1_out.tif')\ncropped_img_1, out_transform = mask(img_1, shapes=[copenhagen_poly], crop=True)\nimg_1 = reshape_as_image(img_1)\nimg_1 = Image.fromarray(img_1)\n\nimg_2 = rasterio.open('1_out.tif')\ncropped_img_2, out_transform = mask(img_2, shapes=[copenhagen_poly], crop=True)\nimg_2 = reshape_as_image(img_2)\nimg_2 = Image.fromarray(img_2)\n\nassert img_1.size, img_2.size == ((1803, 1997), (1948, 2000))\n</code></pre>\n\n<p>as you can see the sizes don't match which means i failed at extracting the exact same polygon, no matter if it included data or not, into a resulting image of a fixed size.</p>\n"}, {"tags": ["python", "arrays", "python-3.x", "numpy", "for-loop"], "comments": [{"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1566422251, "post_id": 57599260, "comment_id": 101655796, "body": "Check out <a href=\"https://codereview.stackexchange.com/\">code review</a>, it&#39;s targeted towards optimization problems like this"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1566426171, "post_id": 57599260, "comment_id": 101656916, "body": "@C.Nivs, have you answered questions like this on CR?"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 5655976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EvGupCZETrw/AAAAAAAAAAI/AAAAAAAAADI/LEhwu6WQ4K8/photo.jpg?sz=128", "display_name": "Bahauddin Omar", "link": "https://stackoverflow.com/users/5655976/bahauddin-omar"}, "edited": false, "score": 0, "creation_date": 1566570213, "post_id": 57621751, "comment_id": 101709940, "body": "Thank you so much for the detailed answers and your effort. I am a complete beginner in SO and thats why i don&#39;t have any reputation to upvote your answer. But I really appreciate your patience and support in solving my problem. Thanks again."}], "tags": [], "owner": {"reputation": 51, "user_id": 7084566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e4656a4cd0ec582ce1fadad3d67f354?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Hilger", "link": "https://stackoverflow.com/users/7084566/thomas-hilger"}, "is_accepted": true, "score": 0, "last_activity_date": 1566545795, "creation_date": 1566545795, "answer_id": 57621751, "question_id": 57599260, "link": "https://stackoverflow.com/questions/57599260/fast-way-to-build-array-from-originating-arrays-of-different-sizes/57621751#57621751", "title": "Fast way to build array from originating arrays of different sizes", "body": "<p>I think several issues make this difficult. First of all, your code snippet does not compile, which IMHO is problematic in any programming language and corresponding forums.\nAnd second, you do not explain what you are actually trying to calculate with your code. So I had to translate your code back to mathematics.\nThis brings me to the numpy-specific problem of this question.</p>\n\n<p>Long story short: if you would have given some kind of mathematical equation in terms of vectors and matrices it would have been much easier to answer.</p>\n\n<pre><code>randrange\nUN\nP\nPG\n</code></pre>\n\n<p>are not defined in your code.</p>\n\n<p>In each loop you are evaluating Ugreen again, but I don't see that it changes in your loop. Move it outside the loop and save time.</p>\n\n<pre><code>gw()\n</code></pre>\n\n<p>can be written vectorized (and it is easily seen now what you are calculating - this should look very similar to your handwritten equation in your notes now):</p>\n\n<pre><code>import numpy as np\nfrom scipy import sqrt\n\ndef gw(xx,yy,tt):\n    return (0&lt;=tt-sqrt(xx**2+yy**2))/(2*np.pi*sqrt(np.clip(tt**2-xx**2-yy**2,0,None))+1)\n\nUgreen = gw(x[:,None,None],y[None,:,None],t[None,None,:])\n</code></pre>\n\n<pre><code>prob = randrange(2)#I assume this is some scalar\nUtot = UN + Ugreen[None,:,:,:]/1.75*prob\nUtot = (Utot - np.min(Utot,axis=0)[None,...])/(np.max(Utot,axis=0)[None,...]-np.min(Utot,axis=0)[None,...]\n</code></pre>\n\n<p>Here is a working example of what I think you are trying to calculate</p>\n\n<pre><code>import numpy as np\nfrom scipy import sqrt\n\ndef gw(x,y,t):\n    return (0&lt;=t-sqrt(x**2+y**2))/(2*np.pi*sqrt(np.clip(t**2-x**2-y**2,0,None))+1)\n\nn_train = 1000\nNx = 100\nNy = 100\nNt = 100\n\nx = np.linspace(-Nx, Nx, 100)\ny = np.linspace(-Ny, Ny, 100)\nt = np.arange(Nt)\n\nUgreen = gw(x[:,None,None],y[None,:,None],t[None,None,:])\n\nprob = 2\n\nUtot = np.random.random((n_train,Nt,Ny,Nx))\nUtot += Ugreen[None,:,:,:]/1.75*prob\nUtot /= (np.max(Utot,axis=0)[None,...]-np.min(Utot,axis=0)[None,...])\nUtot -= np.min(Utot,axis=0)[None,...]/(np.max(Utot,axis=0)[None,...]-np.min(Utot,axis=0)[None,...])\n</code></pre>\n\n<p>I had to arange the <code>Utot</code>-evaluation in order not to run into memory-issues.\nHowever, on my machine it runs within a few seconds.\nIt is certainly possible to optimize this further and I hope for some responses from other users to learn new things.</p>\n\n<p>Some general hints on numpy:\nIMHO if you want to see the true practical power of numpy it's better to forget everything you know about numerical programming from other languages than sticking with any thoughts/ideas/loop-wise thinking you might have.\nMy experience is that, yes numpy is very fast and this is very nice and so on, but it also makes your code extremely short, compact, and best for scientific work: extremely close to whatever complicated equation you might want to solve. One should start implementing equations as close to the paper as possible and optimize only where and when necessary. </p>\n"}], "owner": {"reputation": 49, "user_id": 5655976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EvGupCZETrw/AAAAAAAAAAI/AAAAAAAAADI/LEhwu6WQ4K8/photo.jpg?sz=128", "display_name": "Bahauddin Omar", "link": "https://stackoverflow.com/users/5655976/bahauddin-omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 57621751, "answer_count": 1, "score": 0, "last_activity_date": 1566545795, "creation_date": 1566422100, "last_edit_date": 1566426100, "question_id": 57599260, "link": "https://stackoverflow.com/questions/57599260/fast-way-to-build-array-from-originating-arrays-of-different-sizes", "title": "Fast way to build array from originating arrays of different sizes", "body": "<p>I am building an array of (1000,100,100,100) from two arrays of sizes (1000,100,100,100) and (100,100,100). For this, I am using a for-loop to run the first entry (0 - 1000). However, my code (below) is still pretty slow and as a beginner, I was wondering whether there is more efficient way to do it. </p>\n\n<pre><code>n_train = 1000\nNx = 100\nNy = 100\nNt = 100\n\nx = np.linspace(-Nx, Nx, 100)\ny = np.linspace(-Ny, Ny, 100)\nt = np.linspace(0, Nt-1, 100)\n\ndef gw(xx, yy, tt):\n    num1 = tt - np.sqrt(xx**2+yy**2)\n    denom = (tt**2-xx**2-yy**2)\n\n    if denom &lt; 0:\n        denom1 = 0\n    else:\n        denom1 = np.sqrt(denom)\n\n    kk = np.heaviside(num1,1)/(2*np.pi*denom1+1)\n\nreturn (kk)\n\n# Slow FOR-LOOP\nfor i_train in range (n_train):\n\n    ugreen = np.array([gw(i, j, k) for k in t for j in y for i in x])\n    Ugreen = ugreen.reshape(Nt, Ny, Nx)\n\n    prob = randrange(2)\n    Utot = UN[i_train,:,:,:] + Ugreen/1.75*prob\n    Utot = (Utot - np.min(Utot))/(np.max(Utot)-np.min(Utot))\n\n    Utot_green = 10*Ugreen/1.75*prob\n\n\n    P[i_train,:,:,:] = Utot\n    Pg[i_train,:,:,:]= Utot_green\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "gensim"], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 3384248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M2gzc.png?s=128&g=1", "display_name": "Thomas Cleberg", "link": "https://stackoverflow.com/users/3384248/thomas-cleberg"}, "is_accepted": false, "score": 2, "last_activity_date": 1566489543, "last_edit_date": 1566489543, "creation_date": 1566424672, "answer_id": 57599620, "question_id": 57599259, "link": "https://stackoverflow.com/questions/57599259/sklearngensim-how-to-use-gensims-word2vec-embedding-for-sklearn-text-classifi/57599620#57599620", "title": "Sklearn+Gensim: How to use Gensim&#39;s Word2Vec embedding for Sklearn text classification", "body": "<p><code>x</code> here becomes a numpy array conversion of the <code>gensim.models.word2vec.Word2Vec</code> object -- it is not actually the word2vec representations of <code>textList</code> that are returned.</p>\n\n<p>Presumably, what you want to return is the corresponding vector for each word in a document (for a single vector representing each document, it would be better to use <a href=\"https://radimrehurek.com/gensim/models/doc2vec.html\" rel=\"nofollow noreferrer\">Doc2Vec</a>). </p>\n\n<p>For a set of documents in which the most verbose document contains <code>n</code> words, then, each document would be represented by an n * 120 matrix. </p>\n\n<p>Unoptimized code for illustrative purposes:</p>\n\n<pre><code>import numpy as np\n\nmodel = x = Word2Vec(textList, size=120, window=6, \n                               min_count=5, workers=7, iter=15)\n\ndocuments = []\nfor document in textList:\n    word_vectors = []\n    for word in document.split(' '): # or your logic for separating tokens\n        word_vectors.append(model.wv[word])\n    documents.append(np.concatenate(word_vectors))\n\n# resulting in an n * 120 -- that is, `Word2Vec:size`-- array\ndocument_matrix = np.concatenate(documents)\n\n</code></pre>\n"}], "owner": {"reputation": 1786, "user_id": 3950533, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/5f427f7be7b69ed5fcf890f96418f1d0?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Zhu", "link": "https://stackoverflow.com/users/3950533/henry-zhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3854, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1566489543, "creation_date": 1566422087, "last_edit_date": 1566423399, "question_id": 57599259, "link": "https://stackoverflow.com/questions/57599259/sklearngensim-how-to-use-gensims-word2vec-embedding-for-sklearn-text-classifi", "title": "Sklearn+Gensim: How to use Gensim&#39;s Word2Vec embedding for Sklearn text classification", "body": "<p>I am building a multilabel text classification program and I am trying to use OneVsRestClassifier+XGBClassifier to classify the text. Initially I used Sklearn's Tf-Idf Vectorization to vectorize the texts, which worked without error. Now I am using <strong>Gensim's Word2Vec</strong> to vectorize the texts. When I feed the vectorized data into the OneVsRestClassifier+XGBClassifier however, I get the following error on the line where I split the test and training data:</p>\n\n<blockquote>\n  <p>TypeError: Singleton array array(,\n        dtype=object) cannot be considered a valid collection.</p>\n</blockquote>\n\n<p>I have tried converting the vectorized data into a feature array (np.array), but that hasn't seemed to work.\nBelow is my code:</p>\n\n<pre><code>x = np.array(Word2Vec(textList, size=120, window=6, min_count=5, workers=7, iter=15))\n\nvectorizer2 = MultiLabelBinarizer()\nvectorizer2.fit(tagList)\ny = vectorizer2.transform(tagList)\n\n# Split test data and convert test data to arrays\nxTrain, xTest, yTrain, yTest = train_test_split(x, y, test_size=0.20)\n</code></pre>\n\n<p>The variables <code>textList</code> and <code>tagList</code> are a list of strings (textual descriptions I am trying to classify).</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib", "slurm"], "comments": [{"owner": {"reputation": 604, "user_id": 7017006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b80282f812ece11b6b796fdd2465f9a?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Davy", "link": "https://stackoverflow.com/users/7017006/robert-davy"}, "edited": false, "score": 0, "creation_date": 1566429104, "post_id": 57599248, "comment_id": 101657567, "body": "Does it help to set the matplotlib backend ? i.e. <a href=\"https://stackoverflow.com/questions/4930524/how-can-i-set-the-backend-in-matplotlib-in-python\" title=\"how can i set the backend in matplotlib in python\">stackoverflow.com/questions/4930524/&hellip;</a>"}, {"owner": {"reputation": 154, "user_id": 9470051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cbd4481e40ba92f1de4b844984fb676?s=128&d=identicon&r=PG&f=1", "display_name": "Botond", "link": "https://stackoverflow.com/users/9470051/botond"}, "reply_to_user": {"reputation": 604, "user_id": 7017006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b80282f812ece11b6b796fdd2465f9a?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Davy", "link": "https://stackoverflow.com/users/7017006/robert-davy"}, "edited": false, "score": 0, "creation_date": 1566455627, "post_id": 57599248, "comment_id": 101662877, "body": "@RobertDavy I tried a lot of mode, but it did not help."}, {"owner": {"reputation": 154, "user_id": 9470051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cbd4481e40ba92f1de4b844984fb676?s=128&d=identicon&r=PG&f=1", "display_name": "Botond", "link": "https://stackoverflow.com/users/9470051/botond"}, "reply_to_user": {"reputation": 604, "user_id": 7017006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b80282f812ece11b6b796fdd2465f9a?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Davy", "link": "https://stackoverflow.com/users/7017006/robert-davy"}, "edited": false, "score": 0, "creation_date": 1566554777, "post_id": 57599248, "comment_id": 101701843, "body": "@RobertDavy I deleted the miniconda3 folder, downloaded and installed again. I did everything the same way and it&#39;s working now. I don&#39;t understand it, but I&#39;m happy with the result."}], "owner": {"reputation": 154, "user_id": 9470051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cbd4481e40ba92f1de4b844984fb676?s=128&d=identicon&r=PG&f=1", "display_name": "Botond", "link": "https://stackoverflow.com/users/9470051/botond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566422023, "creation_date": 1566422023, "question_id": 57599248, "link": "https://stackoverflow.com/questions/57599248/huge-memory-consumption-with-slurm-matplotlib", "title": "Huge memory consumption with slurm + matplotlib", "body": "<p>I created a python script that relies heavily on the matplotlib.pyplot.contour. I tested it on my computer and on a google cloud server, and it didn't use more than 500MB ram. But when I moved it to a server with slurm, it failed with \"Exceeded job memory limit\" error, with 7000MB ram limit. The python version was 3.7.3 everywhere, with 3.1.0 matplotlib and 1.16.4 numpy. All of them were installed with conda, on the same week.</p>\n\n<p>There is a Python 3.6.1 on the slurm server as well, with 2.2.0 matplotlib and 1.14.2 numpy. It could run the script without the \"Exceeded job memory limit\" error, but it was much slower.</p>\n\n<p>Here is a simple code, which reproduces the error with the slurm, but runs well on the other places:</p>\n\n<pre><code>from matplotlib import pyplot as plt\nimport numpy as np\n\nR = np.linspace(-5, 5, 1500)\nU, V = np.meshgrid(R, R)\n\nfor r in R: D = plt.contour(U, V, U**2+V**2+r**2, levels=[21, 23, 25, 27, 29])\n</code></pre>\n\n<p>It finished running on my pc with about 818MB ram usage, but the slurm killed it at 2473MB (with 2000MB limit).</p>\n\n<p><strong>Question:</strong> How could I solve this memory problem?</p>\n"}, {"tags": ["python", "selenium"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4917861, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-___zH54lhtI/AAAAAAAAAAI/AAAAAAAAAD4/Fs6MOAHoPP0/photo.jpg?sz=128", "display_name": "Ryan Adami", "link": "https://stackoverflow.com/users/4917861/ryan-adami"}, "is_accepted": false, "score": 0, "last_activity_date": 1570332175, "last_edit_date": 1570332175, "creation_date": 1570328605, "answer_id": 58253782, "question_id": 57599228, "link": "https://stackoverflow.com/questions/57599228/quickstart-py-failed-to-run-due-to-selenium-issue/58253782#58253782", "title": "Quickstart.py failed to run due to selenium issue", "body": "<p>I had the same issue today, then realized the second File call was referencing Firefox. So, I loaded Firefox on the server and things worked perfectly. Not sure how the \"Quickstart\" missed this...</p>\n\n<p>Found out how to do that here:\n<a href=\"https://vitux.com/4-ways-to-install-mozilla-firefox-in-ubuntu/\" rel=\"nofollow noreferrer\">https://vitux.com/4-ways-to-install-mozilla-firefox-in-ubuntu/</a></p>\n\n<blockquote>\n  <p>Method 2: From the Official Ubuntu Repository-through the Command Line</p>\n</blockquote>\n\n<pre><code>$ sudo apt-get update\n\n$ sudo apt install firefox\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9397681, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eZGv39cjigg/AAAAAAAAAAI/AAAAAAAAAEM/f6rTja5atrs/photo.jpg?sz=128", "display_name": "Diego Morillas ", "link": "https://stackoverflow.com/users/9397681/diego-morillas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 689, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1570332175, "creation_date": 1566421934, "question_id": 57599228, "link": "https://stackoverflow.com/questions/57599228/quickstart-py-failed-to-run-due-to-selenium-issue", "title": "Quickstart.py failed to run due to selenium issue", "body": "<p>I cannot find anywhere solution to my issue.</p>\n\n<p>I have installed Instapy successfully in Amazon lightsail Ubuntu 18.04.3 LTS Linux. Thank you so much for any suggestion.</p>\n\n<p>When I tried to run the simple test script below.</p>\n\n<p>I get as part of the error -> selenium.common.exceptions.SessionNotCreatedException: Message: Unable to find a matching set of capabilities</p>\n\n<pre><code>This is the script I am trying to run. Full Error is further below. \n\n# imports\nfrom instapy import InstaPy\nfrom instapy import smart_run\n\n\n# login credentials -  password delete intentionally. \ninsta_username = '******'\ninsta_password = '*****'\n\n# get an InstaPy session!\n# set headless_browser=True to run InstaPy in the background\nsession = InstaPy(username=insta_username,\npassword=insta_password,\nheadless_browser=True)\n\n\nwith smart_run(session):\n\n # activity            \nsession.like_by_tags([\"natgeo\"], amount=10)\n</code></pre>\n\n<p>I get the following error...</p>\n\n<p>I can identify 2 potential errors</p>\n\n<ol>\n<li><p>File \"/usr/local/lib/python3.6/dist-packages/selenium/webdriver/remote/webdriver.py\", line 321, in execute     self.error_handler.check_response(response) </p></li>\n<li><p>selenium.common.exceptions.SessionNotCreatedException: Message: Unable to find a matching set of capabilities</p></li>\n</ol>\n\n<p>I think the errors has to be related to selenium and Firefox browser , as the error is prompted while trying to run the browser in the background (headless_browser=True)</p>\n\n<p>See full error message below</p>\n\n<pre><code> ._.  ._.  ._.  ._.  ._.  ._.  ._.  ._. \nWorkspace in use: \"/home/ubuntu/InstaPy\"\nTraceback (most recent call last):\n  File \"quickstart.py\", line 25, in &lt;module&gt;\n    headless_browser=True)\n  File \"/usr/local/lib/python3.6/dist-packages/instapy/instapy.py\", line 318, in __init__\n    self.logger,\n  File \"/usr/local/lib/python3.6/dist-packages/instapy/browser.py\", line 114, in set_selenium_local_session\n    options=firefox_options,\n  File \"/usr/local/lib/python3.6/dist-packages/selenium/webdriver/firefox/webdriver.py\", line 174, in __init__\n    keep_alive=True)\n  File \"/usr/local/lib/python3.6/dist-packages/selenium/webdriver/remote/webdriver.py\", line 157, in __init__\n    self.start_session(capabilities, browser_profile)\n  File \"/usr/local/lib/python3.6/dist-packages/selenium/webdriver/remote/webdriver.py\", line 252, in start_session\n    response = self.execute(Command.NEW_SESSION, parameters)\n  File \"/usr/local/lib/python3.6/dist-packages/selenium/webdriver/remote/webdriver.py\", line 321, in execute\n    self.error_handler.check_response(response)\n  File \"/usr/local/lib/python3.6/dist-packages/selenium/webdriver/remote/errorhandler.py\", line 242, in check_response\n    raise exception_class(message, screen, stacktrace)\nselenium.common.exceptions.SessionNotCreatedException: Message: Unable to find a matching set of capabilities\n</code></pre>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["python", "django", "csv"], "comments": [{"owner": {"reputation": 731, "user_id": 1386067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8614c1bebefdd0a606173aabb74c7deb?s=128&d=identicon&r=PG", "display_name": "Sergio Pulgarin", "link": "https://stackoverflow.com/users/1386067/sergio-pulgarin"}, "edited": false, "score": 0, "creation_date": 1566422241, "post_id": 57599217, "comment_id": 101655791, "body": "I think <code>csv.reader</code> gives you rows not columns. Add a conditional before calling <code>get_org_create</code> based on the row value at the column index."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10609286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34d201de5ca58abe3dafd0ac7ac0ec0?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/10609286/matt"}, "edited": false, "score": 0, "creation_date": 1566424694, "post_id": 57599300, "comment_id": 101656493, "body": "thanks for the reply! column worked for me (I guess just because it is a name variable), but I changed it to row and used your suggestion; worked like a charm :)"}], "tags": [], "owner": {"reputation": 5190, "user_id": 4547481, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/Xw8Bx.jpg?s=128&g=1", "display_name": "Nafees Anwar", "link": "https://stackoverflow.com/users/4547481/nafees-anwar"}, "is_accepted": true, "score": 0, "last_activity_date": 1566422459, "creation_date": 1566422459, "answer_id": 57599300, "question_id": 57599217, "link": "https://stackoverflow.com/questions/57599217/ignore-csv-column-python-django/57599300#57599300", "title": "ignore csv column python/django", "body": "<p>Firstly it should be <code>row</code> not <code>column</code>. Secondly (original question), your can make a function to validate phone number and use <code>continue</code> to skip if it is not valid. say that validation function is <code>is_valid_phone</code> and returns <code>bool</code>.</p>\n\n<pre><code>for row in csv.reader(io_string, delimiter=\",\", quotechar='\"', quoting=csv.QUOTE_ALL, skipinitialspace=True):\n    if not is_valid_phone(row[1]):\n        continue\n    # rest of code.\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10609286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34d201de5ca58abe3dafd0ac7ac0ec0?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/10609286/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57599300, "answer_count": 1, "score": 0, "last_activity_date": 1566432566, "creation_date": 1566421875, "last_edit_date": 1566432566, "question_id": 57599217, "link": "https://stackoverflow.com/questions/57599217/ignore-csv-column-python-django", "title": "ignore csv column python/django", "body": "<p>I am importing a csv into my Django web app and <code>get_or_create</code>-ing new objects per row. However, I would like to skip a row if one of its columns does not contain one of a few approved phone numbers.</p>\n\n<p>Code below, what can I add to achieve the desired result?</p>\n\n<pre><code>csv_file = request.FILES['file']\n\nif not csv_file.name.endswith('.csv'):\n    message.error(request, 'this is not a csv file')\n\ndata_set = csv_file.read().decode('UTF-8')\n\nio_string = io.StringIO(data_set)\nnext(io_string)\nfor column in csv.reader(io_string, delimiter=\",\", quotechar='\"', quoting=csv.QUOTE_ALL, skipinitialspace=True):\n    _, created = Call.objects.get_or_create(\n        name=column[0],\n        phone_number=column[1],\n\n        etc...\n\n    )\ncontext = {}\n</code></pre>\n"}, {"tags": ["python", "binary"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 3, "creation_date": 1566421919, "post_id": 57599183, "comment_id": 101655676, "body": "There is no binary search and no linear search in your posted code.  <code>del_countries</code> is undefined; there is no output, no evidence of the timing problem."}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1566421943, "post_id": 57599183, "comment_id": 101655684, "body": "Are you leaving out the time needed to build the tree?   You need to do that and ONLY time the search part after building your tree.  Search is only faster for an existing tree not always if you also add in the time to build it."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1566422876, "post_id": 57599183, "comment_id": 101655963, "body": "<code>lambda x: del_countries(x)</code> is just <code>del_countries</code>, but with an extra runtime layer."}, {"owner": {"reputation": 1, "user_id": 11934645, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qgAxeBvdKvs/AAAAAAAAAAI/AAAAAAAAABQ/XftY0Jo6V9s/photo.jpg?sz=128", "display_name": "Joeyyy", "link": "https://stackoverflow.com/users/11934645/joeyyy"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1566432595, "post_id": 57599183, "comment_id": 101658222, "body": "@Prune Is it better now?"}, {"owner": {"reputation": 1, "user_id": 11934645, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qgAxeBvdKvs/AAAAAAAAAAI/AAAAAAAAABQ/XftY0Jo6V9s/photo.jpg?sz=128", "display_name": "Joeyyy", "link": "https://stackoverflow.com/users/11934645/joeyyy"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1566432987, "post_id": 57599183, "comment_id": 101658293, "body": "@chepner I will try removing that layer, thank you."}, {"owner": {"reputation": 9307, "user_id": 705086, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbeee3d76a35f9de8847f36ee51c28a2?s=128&d=identicon&r=PG", "display_name": "Dima Tisnek", "link": "https://stackoverflow.com/users/705086/dima-tisnek"}, "edited": false, "score": 0, "creation_date": 1566437439, "post_id": 57599183, "comment_id": 101659000, "body": "3 suggestions: use <code>bisect</code> module; compare timing with larger <code>nations</code> list; use <code>frozenset(nations)</code> instead."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1566485271, "post_id": 57599183, "comment_id": 101679200, "body": "You still haven&#39;t handled all of the points I made earlier."}], "answers": [{"tags": [], "owner": {"reputation": 14, "user_id": 5699297, "user_type": "registered", "profile_image": "https://graph.facebook.com/1203869006291429/picture?type=large", "display_name": "Bret Hogg", "link": "https://stackoverflow.com/users/5699297/bret-hogg"}, "is_accepted": false, "score": 0, "last_activity_date": 1566422513, "creation_date": 1566422513, "answer_id": 57599311, "question_id": 57599183, "link": "https://stackoverflow.com/questions/57599183/why-is-my-binary-search-is-slower-then-linear-search-python/57599311#57599311", "title": "why is my binary search is slower then linear search (python)", "body": "<p>Are your lists sorted before the binary search is applied?  Binary search is only effective if it knows the string you're looking for will have smaller or bigger character values than what it finds in the middle on each subsequent binary split of the array.  </p>\n"}], "owner": {"reputation": 1, "user_id": 11934645, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qgAxeBvdKvs/AAAAAAAAAAI/AAAAAAAAABQ/XftY0Jo6V9s/photo.jpg?sz=128", "display_name": "Joeyyy", "link": "https://stackoverflow.com/users/11934645/joeyyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566451094, "creation_date": 1566421668, "last_edit_date": 1566432497, "question_id": 57599183, "link": "https://stackoverflow.com/questions/57599183/why-is-my-binary-search-is-slower-then-linear-search-python", "title": "why is my binary search is slower then linear search (python)", "body": "<p>I have a data frame containing 1,000,000 rows of list of lists of separated words like this: </p>\n\n<pre><code>kk=[['united','states'],\n    ['love','hate'],\n    ['united','states'],\n    ['apple','inc'],\n    ['united','states']]. \n</code></pre>\n\n<p>And a country list: </p>\n\n<pre><code>k=['afghanistan','albania','algeria',.......]\n</code></pre>\n\n<p>I'm trying to apply function del_countries to a this df that has 1,000,000 more rows: </p>\n\n<pre><code>df.apply(lambda x:del_countries(x))\n</code></pre>\n\n<p>Why is the binary search a little bit slower than linear search? How should I solve it?</p>\n\n<p>I have tried applying it to a single list of lists: </p>\n\n<pre><code>kk=[['united','states'],\n    ['love','hate'],\n    ['united','states'],\n    ['apple','inc'],\n    ['united','states']]. \n</code></pre>\n\n<p>And binary search took only half the time that the linear search needed.</p>\n\n<pre><code>def binary_strSearch(nations,country):\n\n    cdef int first=0\n    cdef int last=len(nations)-1\n    found=False\n    while (first&lt;=last) and found==False:\n        middle=(first+last)//2\n        if nations[middle]==country:\n            found=True\n        else:\n            if country&lt;nations[middle]:\n                last=middle-1\n            else:\n                first=middle+1\n    return found\n\n nations=['afghanistan','albania','algeria','america','andorra','angola','antigua','argentina','armenia','australia','austria','azerbaijan','bahamas','bahrain','bangladesh','barbados','belarus','belgium','belize','benin','bhutan','bissau','bolivia','bosnia','botswana','brazil','british','brunei','bulgaria','burkina','burma','burundi','cambodia','cameroon','canada','cape verde','central african republic','chad','chile','china','colombia','comoros','congo','costa rica','country debt','croatia','cuba','cyprus','czech','denmark','djibouti','dominica','east timor','ecuador','egypt','el salvador','emirate','england','eritrea','estonia','ethiopia','fiji','finland','france','gabon','gambia','georgia','germany','ghana','great britain','greece','grenada','grenadines','guatemala','guinea','guyana','haiti','herzegovina','honduras','hungary','iceland','in usa','india','indonesia','iran','iraq','ireland','israel','italy','ivory coast','jamaica','japan','jordan','kazakhstan','kenya','kiribati','korea','kosovo','kuwait','kyrgyzstan','laos','latvia','lebanon','lesotho','liberia','libya','liechtenstein','lithuania','luxembourg','macedonia','madagascar','malawi','malaysia','maldives','mali','malta','marshall','mauritania','mauritius','mexico','micronesia','moldova','monaco','mongolia','montenegro','morocco','mozambique','myanmar','namibia','nauru','nepal','netherlands','new zealand','nicaragua','niger','nigeria','norway','oman','pakistan','palau','panama','papua','paraguay','peru','philippines','poland','portugal','qatar','romania','russia','rwanda','saint kitts','samoa','san marino','santa lucia','sao tome','saudi arabia','scotland','scottish','senegal','serbia','seychelles','sierra leone','singapore','slovakia','slovenia','solomon','somalia','south africa','south sudan','spain','sri lanka','st kitts','st lucia','st. kitts','st. lucia','sudan','suriname','swaziland','sweden','switzerland','syria','taiwan','tajikistan','tanzania','thailand','tobago','togo','tonga','trinidad','tunisia','turkey','turkmenistan','tuvalu','uganda','ukraine','united kingdom','united states','uruguay','usa','uzbekistan','vanuatu','vatican','venezuela','vietnam','wales','welsh','yemen','zambia','zimbabwe']\n\ndef del_countries(x):\n    print('cleaning countries')\n    #[x.pop(i) for i,k in enumerate(x) if ' '.join(k) in nations] the linear search\n    [x.pop(i) for i,k in enumerate(x) if binary_strSearch(nations,' \n'.join(k))]\n    return x\n</code></pre>\n"}, {"tags": ["python", "string"], "answers": [{"comments": [{"owner": {"reputation": 12321, "user_id": 9958942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbfa5b660283a00f1c8b9a6ce8d67e1d?s=128&d=identicon&r=PG&f=1", "display_name": "benvc", "link": "https://stackoverflow.com/users/9958942/benvc"}, "edited": false, "score": 1, "creation_date": 1566428898, "post_id": 57599269, "comment_id": 101657512, "body": "Similarly, you could so something like <code>[u.rsplit(&#39;&#47;&#39;)[-1] for u in urls]</code>. As an aside, it is usually a good idea to avoid using built-ins like <code>list</code> as variable names."}, {"owner": {"reputation": 197, "user_id": 2443845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e25cf44b1296ef8b5dcc9273d483d21?s=128&d=identicon&r=PG", "display_name": "jgsedi", "link": "https://stackoverflow.com/users/2443845/jgsedi"}, "reply_to_user": {"reputation": 12321, "user_id": 9958942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbfa5b660283a00f1c8b9a6ce8d67e1d?s=128&d=identicon&r=PG&f=1", "display_name": "benvc", "link": "https://stackoverflow.com/users/9958942/benvc"}, "edited": false, "score": 0, "creation_date": 1566433084, "post_id": 57599269, "comment_id": 101658305, "body": "uups - you&#39;re right @benvc - it was just quick&#39;n dirty ;)"}], "tags": [], "owner": {"reputation": 197, "user_id": 2443845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e25cf44b1296ef8b5dcc9273d483d21?s=128&d=identicon&r=PG", "display_name": "jgsedi", "link": "https://stackoverflow.com/users/2443845/jgsedi"}, "is_accepted": true, "score": 2, "last_activity_date": 1566575004, "last_edit_date": 1566575004, "creation_date": 1566422152, "answer_id": 57599269, "question_id": 57599176, "link": "https://stackoverflow.com/questions/57599176/remove-substring-from-array-of-python-strings/57599269#57599269", "title": "Remove substring from array of python strings", "body": "<p>You could simply do:</p>\n\n<pre><code>listbase = [\"https://rotogrinders.com/players/charlie-culberson-13456?format=json\",\n        \"https://rotogrinders.com/players/charlie-culberson-13456?format=json\"]\n_list = [element.split(\"/\", maxsplit=4)[-1] for element in listbase]\n</code></pre>\n"}], "owner": {"reputation": 634, "user_id": 11866885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cbXoH.jpg?s=128&g=1", "display_name": "Austin Johnson", "link": "https://stackoverflow.com/users/11866885/austin-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 57599269, "answer_count": 1, "score": 0, "last_activity_date": 1566575004, "creation_date": 1566421622, "question_id": 57599176, "link": "https://stackoverflow.com/questions/57599176/remove-substring-from-array-of-python-strings", "title": "Remove substring from array of python strings", "body": "<p>I have an array of strings that I am scraping that looks like this <code>[\"https://rotogrinders.com/players/charlie-culberson-13456?format=json\",\n\"https://rotogrinders.com/players/charlie-culberson-13456?format=json\"]</code></p>\n\n<p>I want to remove the <code>https://rotogrinders.com/players/</code> part from each string in the array. How would I do this?</p>\n\n<pre><code>from selenium.webdriver.common.by import By \nfrom selenium.webdriver.support.ui import WebDriverWait \nfrom selenium.webdriver.support import expected_conditions as EC \nfrom selenium.common.exceptions import TimeoutException\n\nbrowser = webdriver.Chrome(\"/ProgramData/chocolatey/bin/chromedriver.exe\") \n\nbrowser.get(\"https://rotogrinders.com/projected-stats/mlb-hitter?site=fanduel\")\n\n# Wait 20 seconds for page to load\ntimeout = 20\ntry:\n    WebDriverWait(browser, timeout).until(EC.visibility_of_element_located((By.CLASS_NAME, 'player-popup')))\nexcept TimeoutException:\n    print(\"Timed out waiting for page to load\")\n    browser.quit()\n\n# find_elements_by_xpath returns an array of selenium objects.\n\nplayers_info = []\n\nplayers = browser.find_elements_by_css_selector('div.player')\n\nfor player in players:\n    link = player.find_element_by_class_name('player-popup')\n    players_info.append(link.get_attribute('href'))\n</code></pre>\n"}, {"tags": ["python", "scikit-learn", "tfidfvectorizer"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 1, "creation_date": 1566424518, "post_id": 57599174, "comment_id": 101656437, "body": "Can you provide a self-contained example with sample data?  As described in <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.TfidfVectorizer.html#sklearn.feature_extraction.text.TfidfVectorizer.fit_transform\" rel=\"nofollow noreferrer\">the documentation</a>, you are supposed to call <code>.fit_transform</code> on an iterable of raw documents, not some sort of table.  You should only call <code>fit_transform</code> on your X data, not the labels you&#39;re trying to predict."}, {"owner": {"reputation": 12637, "user_id": 6347629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vxdJr.jpg?s=128&g=1", "display_name": "Venkatachalam", "link": "https://stackoverflow.com/users/6347629/venkatachalam"}, "edited": false, "score": 0, "creation_date": 1566453036, "post_id": 57599174, "comment_id": 101661926, "body": "you had mentioned about only 2 columns, what about the third one?"}], "answers": [{"tags": [], "owner": {"reputation": 12637, "user_id": 6347629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vxdJr.jpg?s=128&g=1", "display_name": "Venkatachalam", "link": "https://stackoverflow.com/users/6347629/venkatachalam"}, "is_accepted": true, "score": 1, "last_activity_date": 1566452510, "creation_date": 1566452510, "answer_id": 57602676, "question_id": 57599174, "link": "https://stackoverflow.com/questions/57599174/why-does-tfidvectorizer-fit-transform-change-the-number-of-samples-and-labels/57602676#57602676", "title": "Why does TfidVectorizer.fit_transform() change the number of samples and labels for my text data?", "body": "<p>The problem is that <code>TfidfVectorizer()</code> cannot be applied on three columns at a time. </p>\n\n<p>According to the <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.TfidfVectorizer.html#sklearn.feature_extraction.text.TfidfVectorizer.fit_transform\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p><strong>fit_transform</strong>(self, raw_documents, y=None)     </p>\n  \n  <p>Learn vocabulary and idf, return term-document matrix.   </p>\n  \n  <p>This is equivalent to fit followed by transform, but more efficiently\n  implemented.    </p>\n  \n  <p><strong>Parameters:</strong>       raw_documents : iterable<br>\n  an iterable which yields either str, unicode or file objects    </p>\n  \n  <p><strong>Returns:</strong>     X : sparse matrix, [n_samples, n_features]<br>\n  Tf-idf-weighted document-term matrix.</p>\n</blockquote>\n\n<p>Hence, when apply on single column of text data only. In your code, it had just iterated through the column names and create a transform for it. </p>\n\n<p>An example to understand, what is happening:</p>\n\n<pre><code>import pandas as pd\nfrom sklearn.feature_extraction.text import TfidfVectorizer\n\ndata = pd.DataFrame({'col1':['this is first sentence','this one is the second sentence'],\n                    'col2':['this is first sentence','this one is the second sentence'],\n                    'col3':['this is first sentence','this one is the second sentence'] })\nvec = TfidfVectorizer()\nvec.fit_transform(data).todense()\n\n# \n# matrix([[1., 0., 0.],\n#         [0., 1., 0.],\n#         [0., 0., 1.]])\n\nvec.get_feature_names()\n\n# ['col1', 'col2', 'col3']\n</code></pre>\n\n<p>Now, the solution is that you have to join all the three column into one single column or \napply vectorizer separately on each column and then append them at the end.</p>\n\n<h1>Approach 1</h1>\n\n<pre><code>data.loc[:,'full_text'] = data.apply(lambda x: ' '.join(x), axis=1)\nvec = TfidfVectorizer()\nX = vec.fit_transform(data['full_text']).todense()\nprint(X.shape)\n# (2, 7)\n\nprint(vec.get_feature_names())\n# ['first', 'is', 'one', 'second', 'sentence', 'the', 'this']\n</code></pre>\n\n<h1>Approach 2</h1>\n\n<pre><code>from scipy.sparse import hstack\nimport numpy as np\n\nvec={}\nX = []\nfor col in data[['col1','col2','col3']]:\n    vec[col]= TfidfVectorizer()\n    X = np.append(X, \n                  vec[col].fit_transform(data[col]))\n\nstacked_X = hstack(X).todense()\nstacked_X.shape\n# (2, 21)\n\nfor col, v in vec.items():\n    print(col)\n    print(v.get_feature_names())\n\n# col1\n# ['first', 'is', 'one', 'second', 'sentence', 'the', 'this']\n# col2\n# ['first', 'is', 'one', 'second', 'sentence', 'the', 'this']\n# col3\n# ['first', 'is', 'one', 'second', 'sentence', 'the', 'this']\n\n</code></pre>\n"}], "owner": {"reputation": 545, "user_id": 7903466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/76c21598230104abb0c60f24ff68998a?s=128&d=identicon&r=PG&f=1", "display_name": "M Waz", "link": "https://stackoverflow.com/users/7903466/m-waz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 57602676, "answer_count": 1, "score": 1, "last_activity_date": 1566453016, "creation_date": 1566421605, "last_edit_date": 1566453016, "question_id": 57599174, "link": "https://stackoverflow.com/questions/57599174/why-does-tfidvectorizer-fit-transform-change-the-number-of-samples-and-labels", "title": "Why does TfidVectorizer.fit_transform() change the number of samples and labels for my text data?", "body": "<p>I have a data set that contains 3 columns for 310 data. The columns are all text. One column is text input by a user into an inquiry form and the second column are the labels (one of six labels) that say which inquiry category the input falls into.</p>\n\n<pre><code>&gt;&gt;&gt; data.shape\n(310 x 3)\n</code></pre>\n\n<p>I am doing the following preprocessing to my data before I run it through the <code>KMeans</code> algorithm from <code>sklearn.cluster</code></p>\n\n<pre><code>v = TfidfVectorizer()\nvectorized = v.fit_transform(data)\n</code></pre>\n\n<p>Now,</p>\n\n<pre><code>&gt;&gt;&gt; vectorized.shape\n(3,4)\n</code></pre>\n\n<p>From where I'm looking I seem to have lost data. I no longer have my 310 samples. I believe the shape of vectorized refers to <code>[n_samples, n_features]</code>.</p>\n\n<p>Why does the value of samples and features change? I would expect the number of samples to be 310 and the number of features to be 6 (the unique number of groupings for my labeled data.</p>\n"}, {"tags": ["python", "fortran", "binaryfiles"], "comments": [{"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1566422946, "post_id": 57599169, "comment_id": 101655988, "body": "An easy check is the length of the file in the filesystem... presumably it should be 721*4 bytes, if floats take 4 bytes."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1566425222, "post_id": 57599169, "comment_id": 101656631, "body": "If I create a 2884 byte file like this <code>dd if=&#47;dev&#47;zero bs=721 count=4 &gt; exp.dat</code> and run your code, I get a shape of (721,) so I suspect your Fortran..."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1566457519, "post_id": 57599169, "comment_id": 101663705, "body": "Please use tye generic tags for languages like <a href=\"https://stackoverflow.com/questions/tagged/fortran\">fortran</a> and <a href=\"https://stackoverflow.com/questions/tagged/python\">python</a>. Many more people will see your question and they will be the right people (Fortran or other  tag followers). Add a version tag if the question is version-specific."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1566457644, "post_id": 57599169, "comment_id": 101663755, "body": "Fortran sequential files contain record markers. Use stream or direct files to store data without markers, we have duplicates."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 1, "creation_date": 1566457789, "post_id": 57599169, "comment_id": 101663837, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8751185/fortran-unformatted-file-format\">Fortran unformatted file format</a> and <a href=\"https://stackoverflow.com/questions/48312718/why-is-fortran-producing-a-12-byte-binary-file-containing-an-integer-and-16-byte?noredirect=1&amp;lq=1\" title=\"why is fortran producing a 12 byte binary file containing an integer and 16 byte\">stackoverflow.com/questions/48312718/&hellip;</a>"}], "owner": {"reputation": 133, "user_id": 11959165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t8Yx9.jpg?s=128&g=1", "display_name": "Santos", "link": "https://stackoverflow.com/users/11959165/santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "closed_date": 1566463454, "answer_count": 0, "score": 2, "last_activity_date": 1566457406, "creation_date": 1566421589, "last_edit_date": 1566457406, "question_id": 57599169, "link": "https://stackoverflow.com/questions/57599169/reading-a-binary-file-in-python-and-plotting", "closed_reason": "Duplicate", "title": "Reading a binary file in python and plotting", "body": "<p>I'm generating a binary data using a Fortran code. How can I read this data, convert it to float and plot it in Python?</p>\n\n<p>I have the following code in Fortran90 that outputs the vector u data in a binary file.</p>\n\n<pre><code>program test\nimplicit none\n  integer :: i, n\n  real, allocatable :: u(:)\n\n  n = 720\n  allocate(u(0:n))\n\n  !Set the data\n  do i = 0, n\n    u(i) =  exp(-(i-360.0)**2/200.0)\n  end do\n\n  !Save the data in a binary file\n  open(3,file='exp.dat',form='unformatted',access='sequential')\n  write(3) u\n  close(3)\n\n  deallocate(u)  \nend program test\n</code></pre>\n\n<p>Then I ran this program and got a binary file called 'exp.dat'.\nI wrote the following script in Python3 to read the data from 'exp.dat'  and convert it to float.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nfilename = 'exp.dat'\ndata = np.fromfile(filename, 'float32')\nprint(np.shape(data))\n</code></pre>\n\n<p>However, when I run this script  I get</p>\n\n<pre><code>(723,)\n</code></pre>\n\n<p>I would expect (721,) since we wrote the values of a vector of length 721 in 'exp.dat'. \nAfter looking at the values in the variable data, I realized that the convertion from bytes to float is not working properly. I also tried to see how this script works for a different set of datas and I got the same thing.</p>\n\n<p>How can I fix it? Is there an easy way to read and convert this binary data to float?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1566421466, "post_id": 57599110, "comment_id": 101655537, "body": "Please an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a> of your script so we can fix it to do what you want rather than us writing an entirely new script that you can&#39;t use because it doesn&#39;t follow the same format of your current script."}, {"owner": {"reputation": 405, "user_id": 4830458, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dc026b82ce745c12e6dd32abf805f9d4?s=128&d=identicon&r=PG&f=1", "display_name": "dwb", "link": "https://stackoverflow.com/users/4830458/dwb"}, "reply_to_user": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1566421632, "post_id": 57599110, "comment_id": 101655592, "body": "@EdekiOkoh I have tried so many different variations to get this working, everything from just using the CSV library to using Pandas. I am currently back to step one as I do not know the best method to even start with."}, {"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1566421704, "post_id": 57599110, "comment_id": 101655611, "body": "Just a fyi. Unless you post a script or something we can work with most people will overlook this. You can&#39;t expect us to put in more work in your answer than what you give in your question. Post the one that got you the closest to what you wanted."}, {"owner": {"reputation": 405, "user_id": 4830458, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dc026b82ce745c12e6dd32abf805f9d4?s=128&d=identicon&r=PG&f=1", "display_name": "dwb", "link": "https://stackoverflow.com/users/4830458/dwb"}, "reply_to_user": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1566421788, "post_id": 57599110, "comment_id": 101655642, "body": "@EdekiOkoh I posted the bare-bones, but nothing to it. I understand where you are coming from tho. Let me back-date my project to give you(and others) more to work from."}], "answers": [{"comments": [{"owner": {"reputation": 405, "user_id": 4830458, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dc026b82ce745c12e6dd32abf805f9d4?s=128&d=identicon&r=PG&f=1", "display_name": "dwb", "link": "https://stackoverflow.com/users/4830458/dwb"}, "edited": false, "score": 0, "creation_date": 1566424474, "post_id": 57599502, "comment_id": 101656414, "body": "This is perfect - and sooo much easier then using Pandas. Thanks a lot!"}, {"owner": {"reputation": 405, "user_id": 4830458, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dc026b82ce745c12e6dd32abf805f9d4?s=128&d=identicon&r=PG&f=1", "display_name": "dwb", "link": "https://stackoverflow.com/users/4830458/dwb"}, "edited": false, "score": 0, "creation_date": 1566424662, "post_id": 57599502, "comment_id": 101656478, "body": "Quick learning question - what is the row with date_today for exactly(I got its to get todays date, and format it, but not sure why we are using it completely). I see its called in the line &#39;common&#39;, but have never seen that syntax being used."}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "reply_to_user": {"reputation": 405, "user_id": 4830458, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dc026b82ce745c12e6dd32abf805f9d4?s=128&d=identicon&r=PG&f=1", "display_name": "dwb", "link": "https://stackoverflow.com/users/4830458/dwb"}, "edited": false, "score": 1, "creation_date": 1566425220, "post_id": 57599502, "comment_id": 101656630, "body": "I&#39;ve posted a small explanation of  <code>common = [f&quot;{x},{date_today}&quot; for x in list(set(today) &amp; set(yesterday))]</code>. I&#39;m sorry for not being able to comment the whole code but time is of essence!"}], "tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": true, "score": 2, "last_activity_date": 1566425158, "last_edit_date": 1566425158, "creation_date": 1566423872, "answer_id": 57599502, "question_id": 57599110, "link": "https://stackoverflow.com/questions/57599110/compare-csv-files-and-return-duplicates-to-a-new-csv-file/57599502#57599502", "title": "Compare CSV files and return duplicates to a new CSV file", "body": "<p>Without pandas, you can use something like:</p>\n\n<pre><code>import time\nwith open(\"yesterday.csv\") as f1, open(\"today.csv\") as f2, open(\"output.csv\", \"w+\") as out:\n\n    yesterday = []\n    for line in list(f1)[1:]:\n        yesterday.append(\",\".join(line.split(\",\")[:-1]))\n\n    today = []\n    for line in list(f2)[1:]:\n        today.append(\",\".join(line.split(\",\")[:-1]))\n\n    date_today = time.strftime('%m-%d-%Y')\n    common = [f\"{x},{date_today}\" for x in list(set(today) &amp; set(yesterday))]\n    header = \"Access Point,MacAddress,Status,Site,Date\"\n    out.write(f\"{header}\\n\")\n    for o in common:\n        out.write(f\"{o}\\n\")\n</code></pre>\n\n<hr>\n\n<p>The <em>desired output (something similiar)</em> is:</p>\n\n<pre><code>Access Point,MacAddress,Status,Site,Date\nAP05 - 3165,5c5b352e1f04,Disconnected,Store 3165,08-21-2019\nAP07 - 1961,5c5b350eeae9,Disconnected,Store 1961,08-21-2019\nAP02 - 1161,5c5b352e4484,Disconnected,Store 1161,08-21-2019\nAP03 - 1695,5c5b352e3c9b,Disconnected,Store 1695,08-21-2019\nAP02 - 2700,5c5b352ea519,Disconnected,Store 2700,08-21-2019\nAP05 - 0249,5c5b352e40c9,Disconnected,Store 0249,08-21-2019\nAP06 - 1057,5c5b352e1ed7,Disconnected,Store 1057,08-21-2019\nAP01 - 0099,5c5b352e44b1,Disconnected,Store 0099,08-21-2019\nAP01 - 2700,5c5b353e444d,Disconnected,Store 2700,08-21-2019\n</code></pre>\n\n<p>Which are the common items (without date) between <code>yesterday.csv</code> and <code>today.csv</code> files.<br>\n<a href=\"https://trinket.io/python3/71d3a10561\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<hr>\n\n<p>Explanation of </p>\n\n<pre><code>common = [f\"{x},{date_today}\" for x in list(set(today) &amp; set(yesterday))]\n</code></pre>\n\n<ul>\n<li><code>f\"{var}\"</code> -  is called an <a href=\"https://realpython.com/python-f-strings/\" rel=\"nofollow noreferrer\">f-string</a></li>\n<li><code>list(set(today) &amp; set(yesterday)</code> -  give us the common elements  between lists</li>\n<li><code>[x for x in list]</code> is called a <a href=\"https://www.pythonforbeginners.com/basics/list-comprehensions-in-python\" rel=\"nofollow noreferrer\">list comprehension</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1566435246, "post_id": 57599693, "comment_id": 101658611, "body": "The lines aren&#39;t equal, the date changes."}, {"owner": {"reputation": 41, "user_id": 9572180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71cf1a18623ad882333942d7d212598?s=128&d=identicon&r=PG&f=1", "display_name": "croax", "link": "https://stackoverflow.com/users/9572180/croax"}, "reply_to_user": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1566480928, "post_id": 57599693, "comment_id": 101676501, "body": "Not sure what you mean about the lines aren&#39;t equal, but dates changing shouldn&#39;t be an issue if you&#39;re looking for duplicates in the MacAddress.  I edited for clarity and demonstrating output."}], "tags": [], "owner": {"reputation": 41, "user_id": 9572180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71cf1a18623ad882333942d7d212598?s=128&d=identicon&r=PG&f=1", "display_name": "croax", "link": "https://stackoverflow.com/users/9572180/croax"}, "is_accepted": false, "score": 0, "last_activity_date": 1566480721, "last_edit_date": 1566480721, "creation_date": 1566425111, "answer_id": 57599693, "question_id": 57599110, "link": "https://stackoverflow.com/questions/57599110/compare-csv-files-and-return-duplicates-to-a-new-csv-file/57599693#57599693", "title": "Compare CSV files and return duplicates to a new CSV file", "body": "<p>A way to do this with pandas would be along the lines of:</p>\n\n<pre><code>import pandas as pd\n\ndf1 = pd.read_csv(\"your_file_from_yesterday.csv\")\ndf2 = pd.read_csv(\"your_file_from_today.csv\")\n\ndf_combined = pd.concat([df1,df2], axis=0)\n\nduplicates = df_combined[\"your_column_of_interest\"].duplicated(keep=\"last\")\n#keep=\"first\" if you want the addresses from yesterday that were duplicated.\n</code></pre>\n\n<p>duplicates is now a boolean structure that you can use for indexing in the dataframe.</p>\n\n<pre><code>df_combined[duplicates]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/sj2wF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sj2wF.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can save this as a new file.</p>\n\n<pre><code>df_combined[duplicates].to_csv(\"duplicates_only.csv\")\n</code></pre>\n\n<p>docs for <a href=\"https://pandas.pydata.org/pandas-docs/version/0.24.2/reference/api/pandas.DataFrame.duplicated.html\" rel=\"nofollow noreferrer\">pd.duplicated()</a>, <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.concat.html\" rel=\"nofollow noreferrer\">pd.concat</a>, <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html\" rel=\"nofollow noreferrer\">pd.read_csv()</a></p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 11954759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JKyX6.jpg?s=128&g=1", "display_name": "Sateesh", "link": "https://stackoverflow.com/users/11954759/sateesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1566425172, "creation_date": 1566425172, "answer_id": 57599704, "question_id": 57599110, "link": "https://stackoverflow.com/questions/57599110/compare-csv-files-and-return-duplicates-to-a-new-csv-file/57599704#57599704", "title": "Compare CSV files and return duplicates to a new CSV file", "body": "<p>I think, i found a solution using pandas. </p>\n\n<pre><code>df1 = pd.read_csv('DataSources/file_today.csv')\ndf2 = pd.read_csv('DataSources/file_tomorrow.csv')\n\ndf = pd.concat([df1, df2])\n\ndf = df.sort_values(['MacAddress','Date'])\nnew_df = df.drop_duplicates(['MacAddress'], keep ='first')\n\ndrop_df = df.merge(new_df, how = 'outer' ,indicator=True).loc[lambda x : x['_merge']=='left_only']\n\n# your result\ndrop_df\n</code></pre>\n"}], "owner": {"reputation": 405, "user_id": 4830458, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/dc026b82ce745c12e6dd32abf805f9d4?s=128&d=identicon&r=PG&f=1", "display_name": "dwb", "link": "https://stackoverflow.com/users/4830458/dwb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 57599502, "answer_count": 3, "score": 1, "last_activity_date": 1566480721, "creation_date": 1566421189, "last_edit_date": 1566421739, "question_id": 57599110, "link": "https://stackoverflow.com/questions/57599110/compare-csv-files-and-return-duplicates-to-a-new-csv-file", "title": "Compare CSV files and return duplicates to a new CSV file", "body": "<p>I have a script that runs everyday and outputs a CSV file with a bunch of lines. </p>\n\n<p><strong>Example:</strong><br>\nCSV Today:</p>\n\n<pre><code>Access Point,MacAddress,Status,Site,Date\nAP03 - 1695,5c5b352e3c9b,Disconnected,Store 1695,08-21-2019\nAP01 - 0099,5c5b352e44b1,Disconnected,Store 0099,08-21-2019\nAP07 - 1961,5c5b350eeae9,Disconnected,Store 1961,08-21-2019\nAP05 - 3165,5c5b352e1f04,Disconnected,Store 3165,08-21-2019\nAP02 - 1161,5c5b352e4484,Disconnected,Store 1161,08-21-2019\nAP05 - 0249,5c5b352e40c9,Disconnected,Store 0249,08-21-2019\nAP06 - 1057,5c5b352e1ed7,Disconnected,Store 1057,08-21-2019\nAP01 - 2700,5c5b353e444d,Disconnected,Store 2700,08-21-2019\nAP02 - 2700,5c5b352ea519,Disconnected,Store 2700,08-21-2019\nAP02 - 2722,5c5b352eb446,Disconnected,Store 2722,08-21-2019\n</code></pre>\n\n<p>CSV Yesterday:</p>\n\n<pre><code>Access Point,MacAddress,Status,Site,Date\nAP03 - 1695,5c5b352e3c9b,Disconnected,Store 1695,08-20-2019\nAP01 - 0099,5c5b352e44b1,Disconnected,Store 0099,08-20-2019\nAP07 - 1961,5c5b350eeae9,Disconnected,Store 1961,08-20-2019\nAP05 - 3165,5c5b352e1f04,Disconnected,Store 3165,08-20-2019\nAP02 - 1161,5c5b352e4484,Disconnected,Store 1161,08-20-2019\nAP05 - 0249,5c5b352e40c9,Disconnected,Store 0249,08-20-2019\nAP06 - 1057,5c5b352e1ed7,Disconnected,Store 1057,08-20-2019\nAP01 - 2700,5c5b353e444d,Disconnected,Store 2700,08-20-2019\nAP02 - 2700,5c5b352ea519,Disconnected,Store 2700,08-20-2019\nAP06 - 0415,5c5b352ebdce,Disconnected,Store 0415,08-20-2019\nAP03 - 2542,5c5b353e3e94,Disconnected,Store 2542,08-20-2019\nAP03 - 0788,5c5b353e1216,Disconnected,Store 0788,08-20-2019\nAP04 - 0788,5c5b353e11e9,Disconnected,Store 0788,08-20-2019\nAP05 - 0788,5c5b353e122a,Disconnected,Store 0788,08-20-2019\nAP06 - 0788,5c5b353e1220,Disconnected,Store 0788,08-20-2019\nAP01 - 1366,5c5b353e136a,Disconnected,Store 1366,08-20-2019\nAP05 - 0671,5c5b352eb7ed,Disconnected,Store 0671,08-20-2019\n</code></pre>\n\n<p>I am trying to get a script written that compares todays generated file, with yesterdays, then returns ONLY duplicates into a new CSV file.(if possible, compare only the MacAddress section, that way the date wont throw everything off from the last column)    </p>\n\n<p>I have found dozens and dozens of articles and questions similar to this, but the majority of them are doing the opposite (removing duplicates) and I cannot get them to work for 1 reason or another. </p>\n\n<p>Can someone point me into the right direction please? </p>\n\n<p><strong>Desired Output (something similar):</strong></p>\n\n<pre><code>Access Point,MacAddress,Status,Site,Date\nAP03 - 1695,5c5b352e3c9b,Disconnected,Store 1695,08-21-2019\nAP01 - 0099,5c5b352e44b1,Disconnected,Store 0099,08-21-2019\nAP07 - 1961,5c5b350eeae9,Disconnected,Store 1961,08-21-2019\nAP05 - 3165,5c5b352e1f04,Disconnected,Store 3165,08-21-2019\nAP06 - 1057,5c5b352e1ed7,Disconnected,Store 1057,08-21-2019\nAP01 - 2700,5c5b353e444d,Disconnected,Store 2700,08-21-2019\nAP02 - 2700,5c5b352ea519,Disconnected,Store 2700,08-21-2019\n</code></pre>\n\n<p>I have tried so many variations to get this working, I just have a bare-bones script at the moment for this task, as I am not sure whats the best method to even start with. </p>\n\n<p><strong>Current:</strong></p>\n\n<pre><code>import pandas as pd\nimport csv\nfrom datetime import date, timedelta\n\n# Setting Dates\ntoday = date.today()\nyesterday = today - timedelta(days = 1)\n# Setting files with Dates\ncurrentFile = \"ap-inventory_\" + today.strftime('%m-%d-%Y') + \".csv\"\nyesterdayFile = \"ap-inventory_\" + yesterday.strftime('%m-%d-%Y') + \".csv\"\n</code></pre>\n\n<p>This was the furthest I got, however I could never get it to correctly compare the results</p>\n\n<pre><code>import csv\nfrom datetime import date, timedelta\n\n# Setting Dates\ntoday = date.today()\nyesterday = today - timedelta(days = 1)\n# Setting files with Dates\ncurrentFile = \"ap-inventory_\" + today.strftime('%m-%d-%Y') + \".csv\"\nyesterdayFile = \"ap-inventory_\" + yesterday.strftime('%m-%d-%Y') + \".csv\"\n\n\nwith open('master.csv', 'rt') as master:\n    master_indices = dict((r[1], i) for i, r in enumerate(csv.reader(master)))\n\nwith open(currentFile, 'rt') as hosts:\n    with open(yesterdayFile, 'wt') as results:\n        reader = csv.reader(hosts)\n        writer = csv.writer(results)\n\n        writer.writerow(next(reader, []) + ['RESULTS'])\n\n        for row in reader:\n            index = master_indices.get(row[3])\n            if index is not None:\n                message = 'FOUND in master list (row {})'.format(index)\n            else:\n                message = 'NOT FOUND in master list'\n            writer.writerow(row + [message])\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 581, "user_id": 5709203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab035385a8931db29144b5d31de6dba6?s=128&d=identicon&r=PG&f=1", "display_name": "Shantanu", "link": "https://stackoverflow.com/users/5709203/shantanu"}, "edited": false, "score": 0, "creation_date": 1566421723, "post_id": 57599074, "comment_id": 101655621, "body": "Thanks, calestini. Can you show me a way of doing with <code>itertuples</code> and having an <code>if else</code> condition, as I have greatly simplified what my actual data looks like."}, {"owner": {"reputation": 3009, "user_id": 5833590, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153232467236962/picture?type=large", "display_name": "calestini", "link": "https://stackoverflow.com/users/5833590/calestini"}, "reply_to_user": {"reputation": 581, "user_id": 5709203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab035385a8931db29144b5d31de6dba6?s=128&d=identicon&r=PG&f=1", "display_name": "Shantanu", "link": "https://stackoverflow.com/users/5709203/shantanu"}, "edited": false, "score": 1, "creation_date": 1566422789, "post_id": 57599074, "comment_id": 101655934, "body": "Keep in mind that <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.iterrows.html\" rel=\"nofollow noreferrer\"><code>pandas</code></a> does not recommend to change a dataframe as you iterate through it."}], "tags": [], "owner": {"reputation": 3009, "user_id": 5833590, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153232467236962/picture?type=large", "display_name": "calestini", "link": "https://stackoverflow.com/users/5833590/calestini"}, "is_accepted": true, "score": 3, "last_activity_date": 1566422057, "last_edit_date": 1566422057, "creation_date": 1566420938, "answer_id": 57599074, "question_id": 57599050, "link": "https://stackoverflow.com/questions/57599050/pandas-compare-cell-value-with-cell-value-below-in-same-column/57599074#57599074", "title": "Pandas: Compare cell value with cell value below in same column?", "body": "<p>When you use <code>shift</code> you do not need to loop, the operation is vectorized and does that for you:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df['matches?'] = df['num'].shift(-1)==df['num']\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    num    matches?\n0   1      False\n1   2      True\n2   2      False\n3   3      False\n4   4      False\n5   5      False\n6   6      False\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>If you want to keep the loop logic:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for ix, row in df.iterrows():\n    if ix &lt; len(df)-1:\n        if df.loc[ix, 'num'] == df.loc[ix+1, 'num']:\n            df.loc[ix, 'matches?'] = True\n        else:\n            df.loc[ix, 'matches?'] = False\n    else: #last observation\n        df.loc[ix, 'matches?'] = False\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    num    matches?\n0   1      False\n1   2      True\n2   2      False\n3   3      False\n4   4      False\n5   5      False\n6   6      False\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2509, "user_id": 4046274, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/f4aeF.jpg?s=128&g=1", "display_name": "Pirate X", "link": "https://stackoverflow.com/users/4046274/pirate-x"}, "is_accepted": false, "score": 1, "last_activity_date": 1566421967, "creation_date": 1566421967, "answer_id": 57599233, "question_id": 57599050, "link": "https://stackoverflow.com/questions/57599050/pandas-compare-cell-value-with-cell-value-below-in-same-column/57599233#57599233", "title": "Pandas: Compare cell value with cell value below in same column?", "body": "<p>Keeping the for loop as is. You can try this </p>\n\n<pre><code>i=0\nfor i in range(0,len(df)-1):\n    if df['num'][i] == df['num'][i+1]:\n        df['matches?'][i] = \"T\"\n    else:\n        df['matches?'][i] = \"F\"\n</code></pre>\n\n<blockquote>\n  <p>You should iterate through <code>len(df)-1</code> because when the loop reaches last row, there will be nothing to compare after it. It will throw index error there.</p>\n</blockquote>\n\n<p><strong>Output</strong></p>\n\n<pre><code>+-----+----------+\n| num | matches? |\n+-----+----------+\n|   1 | F        |\n|   2 | T        |\n|   2 | F        |\n|   3 | F        |\n|   4 | F        |\n|   5 | F        |\n|   6 | F        |\n+-----+----------+\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1566427403, "post_id": 57599363, "comment_id": 101657222, "body": "Should be top solution. +1"}], "tags": [], "owner": {"reputation": 2117, "user_id": 11747861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92db693df0ca6e7ed60791abfcf30420?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Wang", "link": "https://stackoverflow.com/users/11747861/mark-wang"}, "is_accepted": false, "score": 2, "last_activity_date": 1566422876, "creation_date": 1566422876, "answer_id": 57599363, "question_id": 57599050, "link": "https://stackoverflow.com/questions/57599050/pandas-compare-cell-value-with-cell-value-below-in-same-column/57599363#57599363", "title": "Pandas: Compare cell value with cell value below in same column?", "body": "<p>As you are working with numeric values, you could use <code>diff</code> to do the calculation between two rows, see code below</p>\n\n<pre><code>df['matches?'] = df['num'].diff(-1).eq(0)  #eq means equal to \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 11794404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9452e27617efe0883547a725106407d?s=128&d=identicon&r=PG&f=1", "display_name": "Wonderworld", "link": "https://stackoverflow.com/users/11794404/wonderworld"}, "is_accepted": false, "score": 1, "last_activity_date": 1566424547, "creation_date": 1566424547, "answer_id": 57599590, "question_id": 57599050, "link": "https://stackoverflow.com/questions/57599050/pandas-compare-cell-value-with-cell-value-below-in-same-column/57599590#57599590", "title": "Pandas: Compare cell value with cell value below in same column?", "body": "<p>You can also add elif and implement by breaking the logic 3 sections like mentioned below</p>\n\n<pre><code>df['matches?'] = ''\n\nfor i in range(0,len(df['num'])):\n    if i+1==len(df['num']):\n       df['matches?'][i] = False\n    elif df['num'][i] == df['num'][i+1]:\n       df['matches?'][i] = True\n    else:\n       df['matches?'][i] = False\n</code></pre>\n"}], "owner": {"reputation": 581, "user_id": 5709203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab035385a8931db29144b5d31de6dba6?s=128&d=identicon&r=PG&f=1", "display_name": "Shantanu", "link": "https://stackoverflow.com/users/5709203/shantanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1517, "favorite_count": 0, "accepted_answer_id": 57599074, "answer_count": 4, "score": 1, "last_activity_date": 1566424547, "creation_date": 1566420754, "question_id": 57599050, "link": "https://stackoverflow.com/questions/57599050/pandas-compare-cell-value-with-cell-value-below-in-same-column", "title": "Pandas: Compare cell value with cell value below in same column?", "body": "<p>I have a dataframe with the following column</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'num': [1, 2, 2, 3, 4, 5, 6]})\n</code></pre>\n\n<p>I want to create a column that uses df['num'].shift() to compare the current cell value with the cell value below it, and if it matches then the value should be in True or False.</p>\n\n<p>The expected output:</p>\n\n<pre><code>   num  matches?\n0    1     False\n1    2      True\n2    2     False\n3    3     False\n4    4     False\n5    5     False\n6    6     False\n</code></pre>\n\n<p>I am not able to find the best way to iterate through each cell and compare the condition and when I use the following:</p>\n\n<pre><code>\ndf['matches?'] = ''\n\nfor i in range(len(df)):\n    if df['num'] == df['num'].shift(1):\n        df['matches?'] = True\n    else:\n        df['matches?'] = False\n</code></pre>\n\n<pre><code>ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\n</code></pre>\n\n<p>How to achieve this in the simplest manner?</p>\n"}, {"tags": ["python", "pandas", "scikit-learn", "pandas-groupby", "lightgbm"], "comments": [{"owner": {"reputation": 731, "user_id": 10754505, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ieBB_4KUajY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jGsPiBx7yiJj8dR1P7N2efhC3zvw/mo/photo.jpg?sz=128", "display_name": "Benoit Drogou", "link": "https://stackoverflow.com/users/10754505/benoit-drogou"}, "edited": false, "score": 0, "creation_date": 1566421937, "post_id": 57599021, "comment_id": 101655683, "body": "Are you sure you provided all the code ? It seems that the row the creates the error is not in the code you shown"}, {"owner": {"reputation": 31, "user_id": 8523548, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T7NSI.jpg?s=128&g=1", "display_name": "TheNinjaKing", "link": "https://stackoverflow.com/users/8523548/theninjaking"}, "reply_to_user": {"reputation": 731, "user_id": 10754505, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ieBB_4KUajY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jGsPiBx7yiJj8dR1P7N2efhC3zvw/mo/photo.jpg?sz=128", "display_name": "Benoit Drogou", "link": "https://stackoverflow.com/users/10754505/benoit-drogou"}, "edited": false, "score": 0, "creation_date": 1566422583, "post_id": 57599021, "comment_id": 101655868, "body": "Yes it gives an error at the final step where I train the model. I edited the error message a little so it is more clean now I hope."}], "owner": {"reputation": 31, "user_id": 8523548, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T7NSI.jpg?s=128&g=1", "display_name": "TheNinjaKing", "link": "https://stackoverflow.com/users/8523548/theninjaking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566422409, "creation_date": 1566420603, "last_edit_date": 1566422409, "question_id": 57599021, "link": "https://stackoverflow.com/questions/57599021/lightgbmerror-invalid-stod-argument", "title": "LightGBMError: invalid stod argument", "body": "<p>I keep getting this error when I try to run this ranking model using the lightgbm package. I am trying to rank Amazon book sales by week and I am using reviews as a proxy for sales.</p>\n\n<p>I used train_test split twice to split my data into a train, test and validation set.</p>\n\n<p>I also tried the sklearn API I get the same error. How can I fix this?</p>\n\n<p>Here is an example of the data that I use.</p>\n\n<pre><code>\nindex book_nr   year    week    ratio   overall useful_review   count   thisWeek    year_week   weeks_since_start   lastWeek\n0   0   2012    1   0.092749    4.842593    0.500000    108 1   201201  787 0\n1   0   2012    51  0.628561    4.889706    9.713235    136 4   201251  837 0\n2   0   2012    52  0.118647    4.884298    0.611570    242 1   201252  838 4\n3   0   2013    1   0.199053    4.836820    0.673640    239 1   201301  839 1\n4   0   2013    2   0.099310    4.755853    0.401338    299 1   201302  840 1\n5   0   2013    3   0.044251    4.621212    0.897727    264 1   201303  841 1\n6   0   2013    4   0.041811    4.648000    0.120000    250 1   201304  842 1\n7   0   2013    5   0.115169    4.464088    1.099448    181 1   201305  843 1\n8   0   2013    6   0.033397    4.463415    0.235772    123 2   201306  844 1\n9   0   2013    7   0.019713    4.508065    0.072581    124 1   201307  845 2\n10  0   2013    8   0.045732    4.527559    0.598425    127 3   201308  846 1\n11  0   2013    9   0.061072    4.439024    0.219512    82  10  201309  847 3\n12  0   2013    10  0.039745    4.647619    0.361905    105 4   201310  848 10\n13  0   2013    11  0.038151    4.611765    0.188235    85  7   201311  849 4\n14  0   2013    12  0.044118    4.529412    0.137255    51  17  201312  850 7\n15  0   2013    13  0.032529    4.591549    0.140845    71  15  201313  851 17\n16  0   2013    14  0.041667    4.589286    0.196429    56  13  201314  852 15\n17  0   2013    15  0.023810    4.833333    0.119048    42  35  201315  853 13\n18  0   2013    16  0.017361    4.583333    0.055556    36  35  201316  854 35\n19  0   2013    17  0.034483    4.689655    0.103448    29  53  201317  855 35\n20  0   2013    18  0.045798    4.500000    0.235294    34  44  201318  856 53\n21  0   2013    19  0.002451    4.617647    0.029412    34  42  201319  857 44\n22  0   2013    20  0.000000    4.750000    0.000000    20  95  201320  858 42\n23  0   2013    21  0.000000    4.875000    0.000000    16  138 201321  859 95\n24  0   2013    22  0.166667    4.521739    0.652174    23  89  201322  860 138\n25  0   2013    23  0.060000    4.400000    0.160000    25  82  201323  861 89\n26  0   2013    24  0.058824    4.705882    0.235294    17  161 201324  862 82\n27  0   2013    25  0.038462    4.692308    0.076923    13  228 201325  863 161\n28  0   2013    26  0.000000    4.769231    0.000000    13  243 201326  864 228\n29  0   2013    27  0.253431    4.588235    0.852941    34  46  201327  865 243\n... ... ... ... ... ... ... ... ... ... ... ...\n4728941 284315  2003    38  1.000000    4.000000    1.000000    1   588 200338  354 0\n4728942 284315  2003    44  1.000000    5.000000    2.000000    1   616 200344  360 0\n4728943 284316  2003    22  1.000000    5.000000    4.000000    1   699 200322  338 0\n4728944 284316  2003    23  0.333333    5.000000    2.000000    1   672 200323  339 699\n4728945 284316  2003    24  0.900000    4.000000    9.000000    1   692 200324  340 672\n4728946 284316  2003    30  0.750000    5.000000    3.000000    1   705 200330  346 0\n4728947 284316  2003    32  0.000000    5.000000    0.000000    1   405 200332  348 0\n4728948 284317  2003    15  0.500000    4.000000    1.000000    2   107 200315  331 0\n4728949 284317  2003    16  0.833333    3.000000    5.000000    1   938 200316  332 107\n4728950 284317  2003    21  0.500000    3.000000    1.000000    1   863 200321  337 0\n4728951 284317  2003    22  0.000000    5.000000    0.000000    1   906 200322  338 863\n4728952 284318  2003    10  0.200000    4.000000    1.000000    1   849 200310  326 0\n4728953 284318  2003    11  1.000000    5.000000    3.000000    1   927 200311  327 849\n4728954 284318  2003    13  1.000000    5.000000    2.000000    1   782 200313  329 0\n4728955 284318  2003    15  1.000000    5.000000    6.000000    1   892 200315  331 0\n4728956 284318  2003    21  0.500000    4.000000    1.000000    1   830 200321  337 0\n4728957 284318  2003    28  0.500000    4.000000    1.000000    1   644 200328  344 0\n4728958 284318  2003    37  1.000000    4.000000    1.000000    1   816 200337  353 0\n4728959 284319  2003    19  0.000000    5.000000    0.000000    1   489 200319  335 0\n4728960 284319  2003    21  1.000000    5.000000    1.500000    2   78  200321  337 0\n4728961 284319  2003    25  0.000000    5.000000    0.000000    1   601 200325  341 0\n4728962 284319  2003    38  1.000000    5.000000    2.000000    1   497 200338  354 0\n4728963 284320  2003    38  1.000000    5.000000    1.500000    2   105 200338  354 0\n4728964 284320  2003    43  0.000000    5.000000    0.000000    1   587 200343  359 0\n4728965 284320  2003    48  0.000000    5.000000    0.000000    1   610 200348  364 0\n4728966 284320  2003    52  0.000000    5.000000    0.000000    1   235 200352  368 0\n4728967 284321  2003    26  1.000000    4.000000    3.000000    1   785 200326  342 0\n4728968 284321  2003    29  0.675000    4.500000    3.000000    2   121 200329  345 0\n4728969 284321  2003    31  1.000000    5.000000    5.000000    1   823 200331  347 0\n4728970 284321  2003    44  0.666667    4.000000    2.000000    1   774 200344  360 0\n</code></pre>\n\n<pre><code>train_data = lgbm.Dataset(X_train, \n                          label=y_train, \n                          categorical_feature=[0,8],\n                          group=list(X_train.groupby('year_week').count()['book_nr']))\n\nval_data = lgbm.Dataset(X_val, \n                          label=y_val, \n                          categorical_feature=[0,8],\n                          group=list(X_val.groupby('year_week').count()['book_nr']))\n\nparameters = {\n    'objective': 'lambdarank',\n    'metric': 'ndcg',\n    'ndcg_at': 5,\n    'number_of_threads': 4,\n    'max_leaves': 40,\n    'bagging_fraction': 0.85,\n    'bagging_freq': 5,\n    'feature_fraction': 0.98,\n    'learning_rate': 0.01,\n    'verbose': 1,\n    'min_data_in_leaf': 28,\n    'label_gain': list(np.ones((len(X_val),1))), # I am not sure what to put here !!!\n    'ignore_column': [0, 8],\n    'seed': 42\n}\n\nmodel = lgbm.train(parameters, \n                   train_data, \n                   valid_sets=val_data, \n                   num_boost_round=1000,\n                   early_stopping_rounds=50,\n                   categorical_feature=['book_nr', 'year_week']\n                  )\n</code></pre>\n\n<p>I keep getting the following error message.</p>\n\n<pre><code>---------------------------------------------------------------------------\nLightGBMError                             Traceback (most recent call last)\n&lt;ipython-input-23-3f47199f6228&gt; in &lt;module&gt;\n      4                    num_boost_round=20,\n      5                    early_stopping_rounds=20,\n----&gt; 6                    categorical_feature=['book_nr', 'year_week']\n      7                   )\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\lightgbm\\engine.py in train(params, train_set, num_boost_round, valid_sets, valid_names, fobj, feval, init_model, feature_name, categorical_feature, early_stopping_rounds, evals_result, verbose_eval, learning_rates, keep_training_booster, callbacks)\n    195     # construct booster\n    196     try:\n--&gt; 197         booster = Booster(params=params, train_set=train_set)\n    198         if is_valid_contain_train:\n    199             booster.set_train_data_name(train_data_name)\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\lightgbm\\basic.py in __init__(self, params, train_set, model_file, silent)\n   1550             self.handle = ctypes.c_void_p()\n   1551             _safe_call(_LIB.LGBM_BoosterCreate(\n-&gt; 1552                 train_set.construct().handle,\n   1553                 c_str(params_str),\n   1554                 ctypes.byref(self.handle)))\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\lightgbm\\basic.py in construct(self)\n    999                                 init_score=self.init_score, predictor=self._predictor,\n   1000                                 silent=self.silent, feature_name=self.feature_name,\n-&gt; 1001                                 categorical_feature=self.categorical_feature, params=self.params)\n   1002             if self.free_raw_data:\n   1003                 self.data = None\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\lightgbm\\basic.py in _lazy_init(self, data, label, reference, weight, group, init_score, predictor, silent, feature_name, categorical_feature, params)\n    789             self.__init_from_csc(data, params_str, ref_dataset)\n    790         elif isinstance(data, np.ndarray):\n--&gt; 791             self.__init_from_np2d(data, params_str, ref_dataset)\n    792         elif isinstance(data, list) and len(data) &gt; 0 and all(isinstance(x, np.ndarray) for x in data):\n    793             self.__init_from_list_np2d(data, params_str, ref_dataset)\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\lightgbm\\basic.py in __init_from_np2d(self, mat, params_str, ref_dataset)\n    853             c_str(params_str),\n    854             ref_dataset,\n--&gt; 855             ctypes.byref(self.handle)))\n    856         return self\n    857 \n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\lightgbm\\basic.py in _safe_call(ret)\n     44     \"\"\"\n     45     if ret != 0:\n---&gt; 46         raise LightGBMError(decode_string(_LIB.LGBM_GetLastError()))\n     47 \n     48 \n\nLightGBMError: invalid stod argument\n</code></pre>\n"}, {"tags": ["python", "kivy"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1566421027, "post_id": 57598992, "comment_id": 101655393, "body": "change to <code>button_list[len(button_list)-1].bind(on_release=lambda y, x=x: track_list[x].action())</code>"}, {"owner": {"reputation": 15, "user_id": 6092025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44a3937d1c4e9cd6136505d6c8f8ba4a?s=128&d=identicon&r=PG&f=1", "display_name": "Aviolin", "link": "https://stackoverflow.com/users/6092025/aviolin"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1566421365, "post_id": 57598992, "comment_id": 101655496, "body": "Thanks, that worked!"}], "owner": {"reputation": 15, "user_id": 6092025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44a3937d1c4e9cd6136505d6c8f8ba4a?s=128&d=identicon&r=PG&f=1", "display_name": "Aviolin", "link": "https://stackoverflow.com/users/6092025/aviolin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "closed_date": 1566421001, "answer_count": 0, "score": 0, "last_activity_date": 1566420438, "creation_date": 1566420438, "question_id": 57598992, "link": "https://stackoverflow.com/questions/57598992/binding-lambda-function-to-button-doesnt-work-in-a-for-loop", "closed_reason": "Duplicate", "title": "Binding lambda function to button doesn&#39;t work in a for loop", "body": "<p>I'm trying to generate a list of buttons in Kivy, binding each on_release event to the action() function of an instance of my Tracks class (stored in track_list). I have made a small example to show the problem. The first 3 buttons print the correct number, but they do not use a for loop... The last 7 buttons do not work, and they always print 9.</p>\n\n<p>bindtest.py</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.button import Button\nfrom kivy.uix.widget import Widget\n\ntrack_list = []\nbutton_list = []\n\n\nclass BindTest(Widget):\n    global track_list\n    global button_list\n\n    def initialize(self):\n        for x in range(0, 10):\n            track_list.append(Tracks(x))\n\n        #\n        # this works, and each button prints its unique 'num' when clicked\n        #\n\n        button_list.append(TrackButton())\n        button_list[len(button_list) - 1].bind(on_release=lambda y: track_list[0].action())\n        self.ids.buttons.add_widget(button_list[len(button_list)-1])\n\n        button_list.append(TrackButton())\n        button_list[len(button_list) - 1].bind(on_release=lambda y: track_list[1].action())\n        self.ids.buttons.add_widget(button_list[len(button_list) - 1])\n\n        button_list.append(TrackButton())\n        button_list[len(button_list) - 1].bind(on_release=lambda y: track_list[2].action())\n        self.ids.buttons.add_widget(button_list[len(button_list) - 1])\n\n        #\n        # this does not work. each button prints '9' when clicked\n        #\n\n        for x in range(3, 10):\n            button_list.append(TrackButton())\n            button_list[len(button_list)-1].bind(on_release=lambda y: track_list[x].action())\n            self.ids.buttons.add_widget(button_list[len(button_list)-1])\n\n\nclass TrackButton(Button):\n    pass\n\n\nclass Tracks:\n    num = ''\n\n    def action(self):\n        print(self.num)\n\n    def __init__(self, num):\n        self.num = num\n\n\nclass BindTestApp(App):\n    def build(self):\n        return BindTest()\n\n\nbindTest = BindTestApp()\nbindTest.run()\n</code></pre>\n\n<p>bindtest.kv</p>\n\n<pre><code>&lt;TrackButton&gt;:\n    text: 'button'\n\n&lt;BindTest&gt;:\n    __init__: root.initialize()\n    BoxLayout:\n        size: root.size\n        id: buttons\n    orientation: 'vertical'\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pygame"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4180727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8096a52dbe47a3c1e8a66afe285b8bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Edwards", "link": "https://stackoverflow.com/users/4180727/tom-edwards"}, "edited": false, "score": 0, "creation_date": 1566421819, "post_id": 57599049, "comment_id": 101655648, "body": "Altho saying that I dont totally get how the syntax of your statement actually works. The way i&#39;ve done it that i understand is to just stick the line &quot;self.color = [0,0,0]&quot; before my for loop in the constructor. Your code is pretty flash and i&#39;ve only got a basic understanding of lists or for loops as of this point. could you explain it please?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 83, "user_id": 4180727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8096a52dbe47a3c1e8a66afe285b8bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Edwards", "link": "https://stackoverflow.com/users/4180727/tom-edwards"}, "edited": false, "score": 1, "creation_date": 1566422130, "post_id": 57599049, "comment_id": 101655745, "body": "The issue is the difference between <a href=\"https://docs.python.org/3/tutorial/classes.html#class-and-instance-variables\" rel=\"nofollow noreferrer\">Class and Instance Variables</a>. You don&#39;t need the class attributes at all. You can delete them. For creating the list read <a href=\"https://docs.python.org/release/3.7.2/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow noreferrer\">List Comprehensions</a>. This is all is to broad to explain in a single answer or even a comment, but it is well explained in the links."}, {"owner": {"reputation": 83, "user_id": 4180727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8096a52dbe47a3c1e8a66afe285b8bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Edwards", "link": "https://stackoverflow.com/users/4180727/tom-edwards"}, "edited": false, "score": 0, "creation_date": 1566422726, "post_id": 57599049, "comment_id": 101655914, "body": "I was just about to comment that I probably don&#39;t need the attributes either then I saw your reply. Thanks very much."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 5, "last_activity_date": 1566422436, "last_edit_date": 1566422436, "creation_date": 1566420749, "answer_id": 57599049, "question_id": 57598987, "link": "https://stackoverflow.com/questions/57598987/why-doesnt-this-code-produce-shapes-with-random-colors/57599049#57599049", "title": "Why doesn&#39;t this code produce shapes with random colors?", "body": "<p>The instance attribute <code>self.color</code> is never created. The existing variable <code>color</code> is a class attribute. Read about the difference of <a href=\"https://docs.python.org/3/tutorial/classes.html#class-and-instance-variables\" rel=\"noreferrer\">Class and Instance Variables</a>. A class attribute exists only once and (of course) has the same value in each instance when it is read. An instance variable exists  per instance of the class and can have a different value in each instance.    </p>\n\n<p>Create the list of color channels by:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Rectangle():\n\n    def __init__(self):\n\n        # [...]\n\n        self.color = [0, 0, 0]\n        for i in range(3):\n            self.color[i] = random.randrange(0, 256)\n</code></pre>\n\n<p>respectively</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Rectangle():\n\n    def __init__(self):\n\n        # [...]\n\n        self.color = [random.randrange(0, 256) for _ in range(3)]\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4180727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8096a52dbe47a3c1e8a66afe285b8bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Edwards", "link": "https://stackoverflow.com/users/4180727/tom-edwards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 57599049, "answer_count": 1, "score": 5, "last_activity_date": 1566422436, "creation_date": 1566420426, "last_edit_date": 1566421558, "question_id": 57598987, "link": "https://stackoverflow.com/questions/57598987/why-doesnt-this-code-produce-shapes-with-random-colors", "title": "Why doesn&#39;t this code produce shapes with random colors?", "body": "<p>I'm working from the book \"Program Arcade Games\nWith Python And Pygame\" and working through the 'lab' at the end of Chapter 12: Introduction to Classes.</p>\n\n<p>This code I've written for it randomises the coordinates size and movement direction for each shape created in 'my_list' by calling its constructor but not the colour, all the shapes created have the same colour, why is this?</p>\n\n<pre><code>\n\nimport pygame\nimport random\n\n# Define some colors\nBLACK = (0, 0, 0)\nWHITE = (255, 255, 255)\nGREEN = (0, 255, 0)\nRED = (255, 0, 0)\n\nclass Rectangle():\n    x = 0\n    y = 0\n    width = 10\n    height = 10\n    change_x = 2\n    change_y = 2\n    color = [0, 0, 0]\n\n    def __init__(self):\n        self.x = random.randrange(0, 700)\n        self.y = random.randrange(0, 500)\n        self.change_x = random.randrange(-3., 3)\n        self.change_y = random.randrange(-3., 3)\n        self.width = random.randrange(20, 70)\n        self.height = random.randrange(20, 70)\n        for i in range(3):\n            self.color[i] = random.randrange(0, 256)\n\n\n    def draw(self, screen):\n        pygame.draw.rect(screen, self.color, [self.x, self.y, self.width, self.height], 0)\n\n    def move(self):\n        if self.x &lt; 0:\n            self.change_x *= -1\n        if self.x &gt; 700-self.width:\n            self.change_x *= -1\n        if self.y &lt; 0:\n            self.change_y *= -1\n        if self.y &gt; 500-self.height:\n            self.change_y *= -1\n        self.x += self.change_x\n        self.y += self.change_y\n\nclass Ellipse(Rectangle):\n    def draw(self, screen):\n        pygame.draw.ellipse(screen, self.color, [self.x, self.y, self.width, self.height], 0)\n\n\n\npygame.init()\n\n# Set the width and height of the screen [width, height]\nsize = (700, 500)\nscreen = pygame.display.set_mode(size)\n\npygame.display.set_caption(\"My Game\")\n\n# Loop until the user clicks the close button.\ndone = False\n\n# Used to manage how fast the screen updates\nclock = pygame.time.Clock()\n\nmy_list = []\n\nfor i in range(10):\n    my_list.append(Rectangle())\n\nfor i in range(10):\n    my_list.append(Ellipse())\n\n\n# -------- Main Program Loop -----------\nwhile not done:\n    # --- Main event loop\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            done = True\n\n    # --- Game logic should go here\n\n    # --- Screen-clearing code goes here\n\n    # Here, we clear the screen to white. Don't put other drawing commands\n    # above this, or they will be erased with this command.\n\n    # If you want a background image, replace this clear with blit'ing the\n    # background image.\n    screen.fill(WHITE)\n\n    # --- Drawing code should go here\n    for shape in my_list:\n        shape.draw(screen)\n        shape.move()\n    # --- Go ahead and update the screen with what we've drawn.\n    pygame.display.flip()\n\n    # --- Limit to 60 frames per second\n    clock.tick(60)\n\n# Close the window and quit.\npygame.quit()```\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "scipy"], "comments": [{"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1566421150, "post_id": 57598972, "comment_id": 101655436, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a>"}, {"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1566421903, "post_id": 57598972, "comment_id": 101655672, "body": "We&#39;ll have to see your code to give any kind of meaningful answer."}], "owner": {"reputation": 11, "user_id": 11959150, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BaYdu2JM_rQ/AAAAAAAAAAI/AAAAAAAAAMQ/A-s958o3pTQ/photo.jpg?sz=128", "display_name": "Chandrakala Meena", "link": "https://stackoverflow.com/users/11959150/chandrakala-meena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566420404, "creation_date": 1566420319, "last_edit_date": 1566420404, "question_id": 57598972, "link": "https://stackoverflow.com/questions/57598972/how-to-fix-step-size-and-number-of-steps-in-the-scipy-integrator-dopri5", "title": "How to fix step size and number of steps in the scipy integrator &#39;dopri5&#39;?", "body": "<p>I have written code in python to solve differential equations using scipy integrator <code>dopri5</code>. Frequently I am getting an error unsuccessful integration. Then I tried to change number of steps but again I am getting the error that step size become too small. When I am setting <code>nsteps=1</code> then error showing that more step should be needed. \nI don't know where I am wrong? And how to fix this problem?</p>\n\n<pre><code>Warning (from warnings module):\nself.messages.get(istate, unexpected_istate_msg)))\nUserWarning: dopri5: step size becomes too small\nstate = ODE.integrate(0.0001)\nFile \"/home/.local/lib/python3.6/site-packages/jitcode/_jitcode.py\", line 644, in integrate\n return self.integrator.integrate(*args,**kwargs)\n packages/jitcode/integrator_tools.py\", line 143, in integrate\n    raise UnsuccessfulIntegration\njitcode.integrator_tools.UnsuccessfulIntegration\n</code></pre>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 288, "user_id": 4763604, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/avTEa.jpg?s=128&g=1", "display_name": "tilted", "link": "https://stackoverflow.com/users/4763604/tilted"}, "edited": false, "score": 0, "creation_date": 1566420390, "post_id": 57598946, "comment_id": 101655146, "body": "Could you provide us with the data or similar example data?"}, {"owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "edited": false, "score": 0, "creation_date": 1566420490, "post_id": 57598946, "comment_id": 101655197, "body": "Probably you are checking for the int 0 in the <code>userCodes</code> when you have the string &#39;0&#39; in userCodes.  Try <code>if str(x) not in userCodes: ...</code>"}, {"owner": {"reputation": 480, "user_id": 10941659, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bbIi9eY4C74/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbeURTLdM8lgVSvE9PxNjXVJ-ktQg/mo/photo.jpg?sz=128", "display_name": "David", "link": "https://stackoverflow.com/users/10941659/david"}, "reply_to_user": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "edited": false, "score": 0, "creation_date": 1566420589, "post_id": 57598946, "comment_id": 101655244, "body": "@it&#39;s-yer-boy-chet Tried that but same result."}], "answers": [{"comments": [{"owner": {"reputation": 480, "user_id": 10941659, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bbIi9eY4C74/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbeURTLdM8lgVSvE9PxNjXVJ-ktQg/mo/photo.jpg?sz=128", "display_name": "David", "link": "https://stackoverflow.com/users/10941659/david"}, "edited": false, "score": 0, "creation_date": 1566420927, "post_id": 57599061, "comment_id": 101655362, "body": "Thank you for the response, I have tried the first fix with same results. I will try the second, What other info on csv do you need, I can add more."}, {"owner": {"reputation": 56, "user_id": 11864173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e65ffee6c3e3b67f48f52e0e943adce?s=128&d=identicon&r=PG", "display_name": "julians", "link": "https://stackoverflow.com/users/11864173/julians"}, "reply_to_user": {"reputation": 480, "user_id": 10941659, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bbIi9eY4C74/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbeURTLdM8lgVSvE9PxNjXVJ-ktQg/mo/photo.jpg?sz=128", "display_name": "David", "link": "https://stackoverflow.com/users/10941659/david"}, "edited": false, "score": 0, "creation_date": 1566421439, "post_id": 57599061, "comment_id": 101655528, "body": "Ah, looking at your CSV: you have a list of lists, each with one item. So you\u2019re trying to compare a string to a list. I\u2019ve updated my post accordingly, I hope it works now?"}], "tags": [], "owner": {"reputation": 56, "user_id": 11864173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e65ffee6c3e3b67f48f52e0e943adce?s=128&d=identicon&r=PG", "display_name": "julians", "link": "https://stackoverflow.com/users/11864173/julians"}, "is_accepted": false, "score": 1, "last_activity_date": 1566421404, "last_edit_date": 1566421404, "creation_date": 1566420826, "answer_id": 57599061, "question_id": 57598946, "link": "https://stackoverflow.com/questions/57598946/how-to-write-a-unique-value-to-a-csv-with-python/57599061#57599061", "title": "How to write a unique value to a csv with python", "body": "<p>It\u2019s tricky to answer without seeing the CSV, but when you read the CSV, all fields are strings. Therefor you need to convert either the <code>userCodes</code> to <code>int</code> or <code>x</code> to <code>string</code> for the comparison to work.</p>\n\n<p>For example:</p>\n\n<pre><code>userCodes = [int(d[0]) for d in csv.reader(csvDataFile)]\nfor x in range(0, 201):\n    if x not in userCodes:\n        return x\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": false, "score": 1, "last_activity_date": 1566421777, "last_edit_date": 1566421777, "creation_date": 1566420994, "answer_id": 57599079, "question_id": 57598946, "link": "https://stackoverflow.com/questions/57598946/how-to-write-a-unique-value-to-a-csv-with-python/57599079#57599079", "title": "How to write a unique value to a csv with python", "body": "<p>You are checking if a <code>str</code> is in an instance of <code>csv.reader</code>. This syntax doesn't work even with a normal file handle:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>with open('somefile.txt') as fh:\n    x = fh.read()\n\n x\n'Spatial Reference: 43006\\nName: Jones Tract\\n424564.620666, 4396443.55267\\n425988.30892, 4395630.01652\\n426169.09473, 4395426.63249\\n426214.291182, 4395268.4449\\n\\nName: Lewis Tract\\n427909.158152, 4393935.14955\\n428587.104939, 4393731.76552\\n428700.096071, 4393528.38148\\n428745.292523, 4393347.59567\\n\\nName: Adams Tract\\n424180.450819, 4393957.74778\\n424361.236629, 4393709.16729\\n424655.013571, 4393641.37261\\n424858.397607, 4393776.96197\\n'\n\n# now check if 'e' is in fh\n\nwith open('somefile.txt') as fh:\n    'e' in fh\n\nFalse\n\n'e' in x\nTrue\n</code></pre>\n\n<p>Also, your csv file isn't really a csv file, so I'd just use a normal file handle and ignore the csv entirely.</p>\n\n<p>The better approach may be to aggregate your codes in a <code>set</code> and check from there:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def get_codes():\n    with open('user_codes.csv') as fh:\n        # return a set to test membership quickly\n        return {line.strip() for line in fh}\n\ncodes = get_codes()\n\ndef add_code(code):\n    if code not in codes:\n        codes.add(code)\n        with open('user_codes.csv', 'a') as fh:\n            fh.write(code)\n    else:\n        raise ValueError(\"Code already exists\")\n        # or do something else\n\nadd_code(88)\nadd_code(88)\n# ValueError\n\n</code></pre>\n\n<p>To generate a user code automatically, since you are using a <code>range</code>, this becomes relatively easy:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def generate_user_code():\n    try:\n        # this returns the first number not in codes\n        return next(i for i in range(201) if i not in codes)\n    except StopIteration:\n        # you've exhausted your range, nothing is left\n        raise ValueError(\"No unique codes available\")\n\n# and your write method can be changed to\ndef add_code(code):\n    with open('user_codes.csv', 'a') as fh:\n        codes.add(code)\n        fh.write(code)\n\n\ncodes = get_codes()\nuser_code = generate_user_code()\nadd_code(user_code)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "is_accepted": false, "score": 1, "last_activity_date": 1566421047, "creation_date": 1566421047, "answer_id": 57599086, "question_id": 57598946, "link": "https://stackoverflow.com/questions/57598946/how-to-write-a-unique-value-to-a-csv-with-python/57599086#57599086", "title": "How to write a unique value to a csv with python", "body": "<p>Iterating userCodes shows each item is a list of strings:</p>\n\n<pre><code> for x in userCodes:\n     print(x)\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code> ['3']\n ['4']\n ['5']\n ['35']\n ['56']\n ['100']\n</code></pre>\n\n<p>So there are a lot of possible fixes, one would be:</p>\n\n<pre><code>def generateUserCode():\n    with open ('/MyLocation/user_codes.csv') as csvDataFile:\n        userCodes = csv.reader(csvDataFile)\n        userCodes = [int(item[0]) for item in userCodes]\n        for x in range(0, 201):\n            if x not in userCodes:\n                return x\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 38, "user_id": 8490750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0557ad5947fecdde40c321b7f56ba60?s=128&d=identicon&r=PG&f=1", "display_name": "\u5218\u5bb8\u5b87", "link": "https://stackoverflow.com/users/8490750/%e5%88%98%e5%ae%b8%e5%ae%87"}, "edited": false, "score": 0, "creation_date": 1566421558, "post_id": 57599146, "comment_id": 101655568, "body": "The other answers are great, too. I did not show how I figure out how to solve this. But I suggest you use more print command, which will help you a lot."}], "tags": [], "owner": {"reputation": 38, "user_id": 8490750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0557ad5947fecdde40c321b7f56ba60?s=128&d=identicon&r=PG&f=1", "display_name": "\u5218\u5bb8\u5b87", "link": "https://stackoverflow.com/users/8490750/%e5%88%98%e5%ae%b8%e5%ae%87"}, "is_accepted": true, "score": 1, "last_activity_date": 1566421445, "creation_date": 1566421445, "answer_id": 57599146, "question_id": 57598946, "link": "https://stackoverflow.com/questions/57598946/how-to-write-a-unique-value-to-a-csv-with-python/57599146#57599146", "title": "How to write a unique value to a csv with python", "body": "<p>The problem is with the following line:</p>\n\n<pre><code>if x not in userCodes:\n</code></pre>\n\n<p>userCodes is not a list it is a csvReader object. Also, you should use</p>\n\n<pre><code>if str(x) not in line:\n#use str(x) instead of x\n</code></pre>\n\n<p>This is the code that works for me:</p>\n\n<pre><code>import csv\ndef generateUserCode():\n    with open ('file.csv') as csvDataFile:\n        csvread = csv.reader(csvDataFile)\n        userCodes = []\n        #print(userCodes)\n        for line in csvread:\n            try:\n                userCodes.append(line[0]) # As long as the code is the first  \n                                          # element in that line, it should work\n            except:\n                IndexError # Avoid blank lines\n        print(userCodes)\n        for x in range(0, 201):\n            if str(x) not in userCodes:\n                return x\n\ndef writeUserCode(userCode):\n    with open ('file.csv', 'a') as csvDataFile:\n        csvDataFile.write('\\n' + str(userCode))\n\nuserCode = generateUserCode()\nwriteUserCode(userCode)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 7761040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59f9d40b3d7a4026f54b1436872d3b7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hovhannes Hayryan", "link": "https://stackoverflow.com/users/7761040/hovhannes-hayryan"}, "is_accepted": false, "score": 1, "last_activity_date": 1566421796, "creation_date": 1566421796, "answer_id": 57599200, "question_id": 57598946, "link": "https://stackoverflow.com/questions/57598946/how-to-write-a-unique-value-to-a-csv-with-python/57599200#57599200", "title": "How to write a unique value to a csv with python", "body": "<p>You may try to do this:</p>\n\n<pre>\n....\nuserCodes = csv.reader(csvDataFile)\nuc = []\nfor y in userCodes:\n    uc += y\nfor x in range(0, 201):\n    if str(x) not in uc:\n        return x\n....\n</pre>\n"}], "owner": {"reputation": 480, "user_id": 10941659, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bbIi9eY4C74/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbeURTLdM8lgVSvE9PxNjXVJ-ktQg/mo/photo.jpg?sz=128", "display_name": "David", "link": "https://stackoverflow.com/users/10941659/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 57599146, "answer_count": 5, "score": 0, "last_activity_date": 1566421796, "creation_date": 1566420146, "last_edit_date": 1566420519, "question_id": 57598946, "link": "https://stackoverflow.com/questions/57598946/how-to-write-a-unique-value-to-a-csv-with-python", "title": "How to write a unique value to a csv with python", "body": "<p>I am trying to writer unique values to a csv that already has a list of ints inside it.</p>\n\n<p>Currently I have tried to loop through a range of possible numbers then check if those numbers are in the csv. It appears that the checking is not working properly.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def generateUserCode():\n    with open ('/MyLocation/user_codes.csv') as csvDataFile:\n        userCodes = csv.reader(csvDataFile)\n        for x in range(0, 201):\n            if x not in userCodes:\n                return x\n\ndef writeUserCode(userCode):        \n    with open ('/MyLocation/user_codes.csv', 'a') as csvDataFile:\n        csvDataFile.write('\\n' + str(userCode))\n\nuserCode = generateUserCode()\nwriteUserCode(userCode)   \n\n</code></pre>\n\n<p>So it should print the first number not in the csv and add the number to the csv. However all it is doing is printing 0 and adding 0 to my csv every time it is run even if 0 is in the csv.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>The csv looks something like this:</p>\n\n<pre><code>3\n4\n5\n35\n56\n100\n</code></pre>\n\n<p>There are more values but it is generally the same with no repeats and values between 0 and 200</p>\n"}, {"tags": ["python", "json", "replace"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1566421955, "post_id": 57598939, "comment_id": 101655692, "body": "your problem is not <code>replace()</code> which you don&#39;t even assign to variable so it changes nothing. Your problem is <code>for line in file</code> which moves pointer in file and later <code>json.load()</code> read data from the end of file. You would have to move pointer to the beginning of file using <code>file.seek(0)</code> (or reopening file)."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1566422244, "post_id": 57598939, "comment_id": 101655793, "body": "if you want to change something then read all from file <code>data = file.read()</code>, change it <code>data = data.replace(...)</code> and then use it with <code>json.loads(data)</code> instead of using <code>json.load(file)</code>"}, {"owner": {"reputation": 21, "user_id": 11947352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65dee030354c2639237ae87117c6c169?s=128&d=identicon&r=PG&f=1", "display_name": "Giancarlo", "link": "https://stackoverflow.com/users/11947352/giancarlo"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1566423401, "post_id": 57598939, "comment_id": 101656136, "body": "Hi, thanks was the seek (0), but now I have an error in the \\\\ &quot;, it seems that replacing does not work."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1566425507, "post_id": 57598939, "comment_id": 101656719, "body": "if you have new error message then create new question and you will have more space to put full error message."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1566425581, "post_id": 57598939, "comment_id": 101656748, "body": "you have to assign result to variable <code>line = line.replace(&#39;\\\\&quot;&#39;, &#39;\\&quot;&#39;)</code> but it will not change it inside file - It is better to read all data to variable, replace text in this string and use <code>loads(string)</code> instead of <code>load(file)</code> - see code in my previous comments"}], "owner": {"reputation": 21, "user_id": 11947352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65dee030354c2639237ae87117c6c169?s=128&d=identicon&r=PG&f=1", "display_name": "Giancarlo", "link": "https://stackoverflow.com/users/11947352/giancarlo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566423287, "creation_date": 1566420079, "last_edit_date": 1566423287, "question_id": 57598939, "link": "https://stackoverflow.com/questions/57598939/open-json-replace-values-and-run-json-load", "title": "Open Json, replace values \u200band run json.load", "body": "<p>I have an error when there is a json file, I replace the content and load it with json.load (), verify that the same json shows no error if I delete the replacement lines. traceback: invalid json: Expenting value: line 1 columm 1 (char 0)</p>\n\n<pre><code>{\n    \"ope\": \"gen\",\n    \"generado\": \"\",\n    \"items\": [{\n        \"unidad_de_medida\": \"NIU\",\n        \"codigo\": \"CONS_DEL02\",\n        \"descripcion\": \"[CONS_DEL02] \\\\\"Peque\u00f1o servidor\\\\nraid 1, 512ECC ram\",\n        \"cantidad\": 1.000,\n        \"valor_unitario\": 40000.00,\n        \"precio_unitario\": 40000.00,\n        \"descuento\": 0.00,\n        \"subtotal\": 40000.00,\n        \"tipo_de_igv\": 2,\n        \"igv\": 0.00,\n        \"total\": 40000.00,\n        \"anticipo_regularizacion\": \"false\",\n        \"anticipo_documento_serie\": \"\",\n        \"anticipo_documento_numero\": \"\",\n        \"codigo_producto_sunat\": \"10000000\"\n    }, {\n        \"unidad_de_medida\": \"NIU\",\n        \"codigo\": \"CONS_DEL02\",\n        \"descripcion\": \"[CONS_DEL02] Peque\u00f1o servidor\\\\nraid 1, 512ECC ram\",\n        \"cantidad\": 1.000,\n        \"valor_unitario\": 40000.00,\n        \"precio_unitario\": 47200.00,\n        \"descuento\": 0.00,\n        \"subtotal\": 40000.00,\n        \"tipo_de_igv\": 1,\n        \"igv\": 7200.00,\n        \"total\": 47200.00,\n        \"anticipo_regularizacion\": \"false\",\n        \"anticipo_documento_serie\": \"\",\n        \"anticipo_documento_numero\": \"\",\n        \"codigo_producto_sunat\": \"10000000\"\n    }],\n    \"guias\": null\n}\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code># -*- coding: utf-8 -*-\nimport requests,datetime,time,codecs,io\nimport json\n#import bdUpdate\nfrom glob import glob\nimport os\nimport shutil\n\ndef enviarwebservice():\n    url = \"https://server1/api/v1/a0307f5e9a64e26\"       \n    files=ls4(\"c:/validacionFX/\",\"*.json\") #*******ruta donde se genera el json*********    \n    try:\n        r = requests.get(url)\n        if 1==1:\n            for archivo in files:        \n                if os.path.isfile(archivo):      \n                    with io.open(archivo,'r',encoding='utf8')as file:\n                        cadenaId=(os.path.basename(archivo)).split('-') #--es una tipo lista.\n                        for line in file:\n                            line.replace('\\\\\"', '\\\"')\n                        json_data=json.load(file)\n                        payload=json.dumps(json_data,indent=4)\n\n\ndef enviarwebservice():\n    url = \"https://server1/api/v1/a0307f5e9a64e26\"           \n    files=ls4(\"c:/validacionFX/\",\"*.json\") #*******ruta donde se genera el json*********    \n    try:\n        r = requests.get(url)\n        if 1==1:\n            for archivo in files:        \n                if os.path.isfile(archivo):      \n                    with codecs.open(archivo,'r',encoding='utf8')as file:\n                        cadenaId=(os.path.basename(archivo)).split('-') #--es una tipo lista.        \n                        json_data=json.load(file)         \n                        payload=json.dumps(json_data,indent=4)  \n</code></pre>\n\n<p>when I don't replace the characters, the json doesn't generate conflict.\nThanks your support.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "floating-point", "decimal"], "comments": [{"owner": {"reputation": 425, "user_id": 6489505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHfh5.jpg?s=128&g=1", "display_name": "Yaman Ahlawat", "link": "https://stackoverflow.com/users/6489505/yaman-ahlawat"}, "edited": false, "score": 0, "creation_date": 1566421403, "post_id": 57598863, "comment_id": 101655515, "body": "either <code>Data[Decimal(round(Data[&#39;Score&#39;],4))!=Decimal(round(Data[&#39;Sc&zwnj;&#8203;ore1&#39;],4))]</code>  or <code>Data[Float(round(Data[&#39;Score&#39;],4))!=Float(round(Data[&#39;Score1&zwnj;&#8203;&#39;],4))]</code>"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1566423016, "post_id": 57598863, "comment_id": 101656005, "body": "Can you provide the complete traceback and a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? I don&#39;t see any multiplication in the code that&#39;s claiming you tried to multiply a <code>Decimal</code> by a <code>float</code>. If I explicitly do something like <code>round(d(&#39;1.334442&#39;), 4) != round(1.334442, 4)</code> is, just returns <code>True</code> for me, which is sub-optimal (<code>float</code> doesn&#39;t represent <code>1.3344</code> precisely, so it&#39;s not actually equal), but doesn&#39;t raise an exception."}], "answers": [{"comments": [{"owner": {"reputation": 38, "user_id": 8490750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0557ad5947fecdde40c321b7f56ba60?s=128&d=identicon&r=PG&f=1", "display_name": "\u5218\u5bb8\u5b87", "link": "https://stackoverflow.com/users/8490750/%e5%88%98%e5%ae%b8%e5%ae%87"}, "edited": false, "score": 0, "creation_date": 1566420527, "post_id": 57598983, "comment_id": 101655211, "body": "If you could provide me with a sample (a part of your dataframe), I can delve into it and help you out."}, {"owner": {"reputation": 45, "user_id": 9706733, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fihNehTTIy0/AAAAAAAAAAI/AAAAAAAAABs/923DB_2TpcU/photo.jpg?sz=128", "display_name": "pingboing", "link": "https://stackoverflow.com/users/9706733/pingboing"}, "edited": false, "score": 0, "creation_date": 1566420645, "post_id": 57598983, "comment_id": 101655259, "body": "Thanks. I cannot subtract either. Same error for subtraction &quot;unsupported operand type(s) for -: &#39;float&#39; and &#39;decimal.Decimal&#39;&quot;"}, {"owner": {"reputation": 45, "user_id": 9706733, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fihNehTTIy0/AAAAAAAAAAI/AAAAAAAAABs/923DB_2TpcU/photo.jpg?sz=128", "display_name": "pingboing", "link": "https://stackoverflow.com/users/9706733/pingboing"}, "edited": false, "score": 0, "creation_date": 1566421399, "post_id": 57598983, "comment_id": 101655511, "body": "Just added some sample data"}], "tags": [], "owner": {"reputation": 38, "user_id": 8490750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0557ad5947fecdde40c321b7f56ba60?s=128&d=identicon&r=PG&f=1", "display_name": "\u5218\u5bb8\u5b87", "link": "https://stackoverflow.com/users/8490750/%e5%88%98%e5%ae%b8%e5%ae%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1566422798, "last_edit_date": 1566422798, "creation_date": 1566420408, "answer_id": 57598983, "question_id": 57598863, "link": "https://stackoverflow.com/questions/57598863/unsupported-operand-types-in-python-3-6/57598983#57598983", "title": "unsupported operand type(s) in python 3.6", "body": "<p>It seems that you are comparing two numbers (float point number rounded to a certain decimal place).\nI think you can try this (compare a with b)</p>\n\n<pre><code>a = 0.00542\nb = 0.00534\ndecimal_place = 4 #or any place you want\nround(a-b, decimal_place) # if this is zero, consider a and b as the same \n</code></pre>\n\n<p>Since I don't know what kind of data you have, I cannot implement things in pandas for you. This is what I come up with when seeing your question. Hope that it will help you out.</p>\n\n<p>Update after getting the data file:</p>\n\n<pre><code>import pandas as pd\n\nfilename = \"datafile\"\n\ndf = pd.read_csv(filename, delim_whitespace = True)\nprint(df)\nprint(df.columns)\ndf[\"Compare\"] = (round(df[\"Score\"] - df[\"Score1\"], 6) == 0)\nprint(df)\n</code></pre>\n\n<p>Somehow, my code works smoothly (after copying your data into a file named \"datafile\"). I plan to run your code and find out why.</p>\n\n<p>Unfortunately, after plugging your code into my code, I still cannot find why it did not work out. It seems just fine to run:</p>\n\n<pre><code>import pandas as pd\n\nfilename = \"datafile\"\n\ndf = pd.read_csv(filename, delim_whitespace = True)\nprint(df)\nprint(df.columns)\nprint(round(df['Score'],4)!=round(df['Score1'],4))\n#print(df[round(df['Score'],4)!=round(df['Score1'],4)])\n#I delete the df[] around the round...4)\n</code></pre>\n\n<p>Here is the output</p>\n\n<pre><code>0     False\n1     False\n2     False\n3     False\n4     False\n5     False\n6     False\n7     False\n8     False\n9     False\n10    False\n11    False\n12    False\n13    False\n14    False\n15    False\ndtype: bool\n</code></pre>\n\n<p>I guessed you did not read in the file in a correct way. I would suggest printing out the data frame to see why.\nGood luck with that!</p>\n"}, {"tags": [], "owner": {"reputation": 3240, "user_id": 10157759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c9NabIUCJts/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oyzFAfLJNxPqTgYUMTb4PPAZ7N5Q/mo/photo.jpg?sz=128", "display_name": "GZ0", "link": "https://stackoverflow.com/users/10157759/gz0"}, "is_accepted": false, "score": 1, "last_activity_date": 1566422897, "last_edit_date": 1566422897, "creation_date": 1566422493, "answer_id": 57599309, "question_id": 57598863, "link": "https://stackoverflow.com/questions/57598863/unsupported-operand-types-in-python-3-6/57599309#57599309", "title": "unsupported operand type(s) in python 3.6", "body": "<p>Here are some other common approaches for comparing floating values. They are not equivalent to what you implemented but should still be good in many scenarios.</p>\n\n<p>Using native <code>pandas</code>:</p>\n\n<pre><code>selected = data[(data[\"Score\"]-data[\"Score1\"]).abs() &gt;= 1e-4]\nprint(selected)\n</code></pre>\n\n<p>Using <code>numpy.isclose</code>:</p>\n\n<pre><code>import numpy as np\n\nselected = data[~np.isclose(data[\"Score\"], data[\"Score1\"], 0, 1e-4)]\nprint(selected)\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9706733, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fihNehTTIy0/AAAAAAAAAAI/AAAAAAAAABs/923DB_2TpcU/photo.jpg?sz=128", "display_name": "pingboing", "link": "https://stackoverflow.com/users/9706733/pingboing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1566483325, "creation_date": 1566419726, "last_edit_date": 1566483325, "question_id": 57598863, "link": "https://stackoverflow.com/questions/57598863/unsupported-operand-types-in-python-3-6", "title": "unsupported operand type(s) in python 3.6", "body": "<p>Say I have a panda dataframe and want to print rows with two particular columns (<code>Score</code> and <code>Score1</code>) that have different values. \nI am running on python 3.6</p>\n\n<p>I tried </p>\n\n<pre><code>print(Data[round(Data['Score'],4)!=round(Data['Score1'],4)])\n</code></pre>\n\n<p>and got this error:</p>\n\n<blockquote>\n  <p>unsupported operand type(s) for *: 'decimal.Decimal' and 'float'</p>\n</blockquote>\n\n<p>I also tried </p>\n\n<pre><code>from decimal import *\nprint(Data[Decimal(round(Data['Score'],4))!=round(Data['Score1'],4)])\n</code></pre>\n\n<p>and get:</p>\n\n<blockquote>\n  <p>conversion from Series to Decimal is not supported</p>\n</blockquote>\n\n<hr>\n\n<pre><code>Here is some sample data\n              Score             Score1\n0        0.00187718  0.001877000000000\n1       0.000184217  0.000184000000000\n2       0.000502648  0.000503000000000\n3          0.185124  0.185124000000000\n4        3.3589e-05  0.000034000000000\n5        0.00156229  0.001562000000000\n6        6.4937e-05  0.000065000000000\n7       4.87503e-05  0.000049000000000\n8        0.00215561  0.002156000000000\n9       3.22308e-05  0.000044000000000\n10      3.70668e-05  0.000037000000000\n11      0.000100837  0.000101000000000\n12      7.91073e-05  0.000079000000000\n13       0.00424232  0.004232000000000\n14      6.80564e-06  0.000007000000000\n15       0.00928687  0.009287000000000\n</code></pre>\n\n<p>My solution for now is to output the dataframe to csv and reload the csv into python. It looks good to me. Knowing that its definitely not a smart way, I am going with it given my tight timeline.</p>\n"}, {"tags": ["python", "image-processing"], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 8837809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53ed878e49359ce4023fdfdcb3b6f7c3?s=128&d=identicon&r=PG&f=1", "display_name": "Nereida", "link": "https://stackoverflow.com/users/8837809/nereida"}, "is_accepted": false, "score": 0, "last_activity_date": 1596101135, "creation_date": 1596101135, "answer_id": 63170121, "question_id": 57598845, "link": "https://stackoverflow.com/questions/57598845/matplotlib-keeping-the-zoom-while-changing-the-image-doesnt-work/63170121#63170121", "title": "Matplotlib: Keeping the zoom while changing the image doesn&#39;t work", "body": "<p>As answered to my question on the same subject (<a href=\"https://stackoverflow.com/a/63169926/8837809\">https://stackoverflow.com/a/63169926/8837809</a>):</p>\n<p>The key 'h', unlike 'a' and 'd', is part of matplotlib's <a href=\"https://matplotlib.org/3.1.1/users/navigation_toolbar.html#navigation-keyboard-shortcuts\" rel=\"nofollow noreferrer\">interactive navigation</a> keys.</p>\n<p>In order to avoid this problem, map the interactive navigation with other keys:</p>\n<pre><code>import matplotlib as mpl\n\nmpl.rcParams[&quot;keymap.home&quot;] = ['r', 'home']   # default value is ['h', 'r', 'home']\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5512335, "user_type": "registered", "profile_image": "https://graph.facebook.com/947847451928710/picture?type=large", "display_name": "Luca R&#252;ffert", "link": "https://stackoverflow.com/users/5512335/luca-r%c3%bcffert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1596101135, "creation_date": 1566419596, "question_id": 57598845, "link": "https://stackoverflow.com/questions/57598845/matplotlib-keeping-the-zoom-while-changing-the-image-doesnt-work", "title": "Matplotlib: Keeping the zoom while changing the image doesn&#39;t work", "body": "<p>I use matplotlib and an update function that triggers on a key press in order to cycle through a number of images in a specific folder.</p>\n\n<p>here is part of my update function:</p>\n\n<pre><code># skipping through the images with a and d\nif event.key == \"d\":\n    if photoIndex == numberOfPhotos-1:\n        photoIndex = 0\n    else:\n        photoIndex += 1\n\nelif event.key == \"a\":\n    if photoIndex == 0:\n        photoIndex = numberOfPhotos-1\n    else:\n        photoIndex -= 1\n\n# Handle key press event\nif event.key == \"h\":\n    if equalizeHistogram == False:\n        equalizeHistogram = True\n    elif equalizeHistogram == True:\n        equalizeHistogram = False\n\nif event.key == \"c\":\n    if calculateEdges == False:\n        calculateEdges = True\n    elif calculateEdges == True:\n        calculateEdges = False\n\nimagePath = imageFolder + os.listdir(imageFolder)[photoIndex]\nunprocessedImage = cv2.cvtColor(cv2.imread(imagePath), cv2.COLOR_BGR2GRAY)\n\nif equalizeHistogram == True:\n    image = np.uint8(cv2.normalize(unprocessedImage, None, 0, 255, cv2.NORM_MINMAX))\n\nelif calculateEdges == False and equalizeHistogram == False:\n    image = unprocessedImage\n\nim.set_data(image)\n</code></pre>\n\n<p>I can change the index of the image (and therefore the image that gets displayed) with the 'a' and 'd' key. Since I use set_data(), the zoom level stays the same as it should be.</p>\n\n<p>However, when I press the 'h' key to equalize the historgram it zooms out again?\nI'm confused, since the only thing that I change is the 'image' variable which I also change when I cycle through the pictures.</p>\n\n<p>So why is it, that using set_data() doesnt change the zoom in one instance, but does change the zoom in another instance?</p>\n\n<p>I would really appreciate any help!</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 0, "creation_date": 1566423526, "post_id": 57598840, "comment_id": 101656185, "body": "You seem to be doing everything correctly, <code>obj.crescator = request.user</code> should assign the user to the fk field. And you don&#39;t include <code>crescator</code> in the form so it&#39;s not part of the fields of the form, correct? (when you say &quot;set initial data to it&quot;, that&#39;s confusing, &quot;initial data&quot; means populating the fields of the form <b>before</b> it is bound to data)."}, {"owner": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 0, "creation_date": 1566423633, "post_id": 57598840, "comment_id": 101656212, "body": "how are you checking that the <code>crescator</code> field is empty?"}, {"owner": {"reputation": 45, "user_id": 11519799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2a6fbe73245e2c5997335d538aec228?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11519799/alex"}, "reply_to_user": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 0, "creation_date": 1566486703, "post_id": 57598840, "comment_id": 101680035, "body": "Now works. I set in my form: fields = &#39;<b>all</b>&#39; and it works. Thanks"}], "owner": {"reputation": 45, "user_id": 11519799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2a6fbe73245e2c5997335d538aec228?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/11519799/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566419550, "creation_date": 1566419550, "question_id": 57598840, "link": "https://stackoverflow.com/questions/57598840/request-user-as-initial-data-dont-work-in-django-forms", "title": "Request.user as initial data don&#39;t work in django forms", "body": "<p>I have a model named Porumbei, a form named AdaugaPorumbel and I want as initial data to be request.user. </p>\n\n<pre><code>#My model\nclass Porumbei(models.Model):\n    COMPARTIMENTE = [\n        ('Matc\u0103', 'Matc\u0103'),\n        ('Tineret', 'Tineret'),\n        ('Zbur\u0103tori', 'Zbur\u0103tori'),\n        ('Deceda\u021bi', 'Deceda\u021bi')\n    ]\n    SEXE = [\n        ('Mascul', 'Mascul'),\n        ('Femel\u0103', 'Femel\u0103'),\n        ('Pui', 'Pui')\n    ]\n    id_porumbel = models.AutoField(primary_key=True)\n    data_adaugare = models.DateTimeField(default=timezone.now, null=True, blank=True)\n    crescator = models.ForeignKey(get_user_model(), on_delete=models.CASCADE, null=True, blank=True)\n    serie_inel = models.CharField(max_length=25, null=False, blank=False, unique=True, help_text=\"Seria de pe inel. Ex: RO 123456\")\n\n#My form\nclass AdaugaPorumbel(forms.ModelForm):\n    class Meta:\n        model = Porumbei\n        fields = ['data_adaugare', 'serie_inel', 'anul', 'culoare', 'culoare_ochi', 'sex', 'ecloziune',\n              'rasa', 'linie', 'nume', 'tata',\n              'mama', 'compartiment', 'status', 'data', 'vaccinat', 'info', 'imagine', 'imagine_ochi']\n        widgets = {\n            'ecloziune': forms.DateInput(format='%d/%m/%Y',\n                                     attrs={'class': 'form-control', 'type': 'date'}),\n            'data': forms.DateInput(format='%d/%m/%Y',\n                                attrs={'class': 'form-control', 'type': 'date'}),\n            'vaccinat': forms.DateInput(format='%d/%m/%Y',\n                                    attrs={'class': 'form-control', 'type': 'date'}),\n\n            'info': forms.Textarea(attrs={'class': 'form-control mt-15', 'rows': '3', 'placeholder': 'Vor ap\u0103rea \u00een pedigree'}),\n\n    }\n        error_messages = {\n            'serie_inel': {\n                'required': 'Introduce\u0163i seria inelului!',\n                'unique': 'Porumbelul este deja ad\u0103ugat \u00een baza de date!',\n            },\n        }\n\n\n#My view\n@login_required(login_url='/auth/login/')\ndef porumbelnou(request):\n    if request.method == \"POST\":\n        form = AdaugaPorumbel(request.POST, request.FILES)\n        if form.is_valid():\n            obj = form.save(commit=False)\n            obj.crescator = request.user\n            obj.save()\n            return HttpResponseRedirect('/porumbei/vizualizare')\n    else:\n        form = AdaugaPorumbel()\n    context = {\n        'form': form,\n}\n    template = loader.get_template(\"adaugare-porumbel.html\")\n    return HttpResponse(template.render(context, request))\n</code></pre>\n\n<p>With these configuration, the crescator field is empty when save records. All I want is to assign a user to a created object. Crescator field is a foreignkey and how can i set initial data to it? Is there another way to do this? If it matters, I have a custom user model that extends AbstractBaseUser. Is a problem with this?Thanks</p>\n"}, {"tags": ["python", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 455, "user_id": 9236687, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210704373782614/picture?type=large", "display_name": "Eric", "link": "https://stackoverflow.com/users/9236687/eric"}, "edited": false, "score": 0, "creation_date": 1566419550, "post_id": 57598824, "comment_id": 101654842, "body": "I have seen <a href=\"https://stackoverflow.com/questions/31081067/flatten-numpy-array-but-also-keep-index-of-value-positions\">this</a> question however I&#39;m not looking to create a dataframe."}, {"owner": {"reputation": 1729, "user_id": 4321462, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/689f5fbc965c62e30e67375e34d13ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Samufi", "link": "https://stackoverflow.com/users/4321462/samufi"}, "edited": false, "score": 1, "creation_date": 1566419669, "post_id": 57598824, "comment_id": 101654880, "body": "How is the content of <code>my_matrix</code> important? The index list you provided would be valid for each 2x3 matrix, right?"}, {"owner": {"reputation": 1729, "user_id": 4321462, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/689f5fbc965c62e30e67375e34d13ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Samufi", "link": "https://stackoverflow.com/users/4321462/samufi"}, "edited": false, "score": 0, "creation_date": 1566419768, "post_id": 57598824, "comment_id": 101654914, "body": "And: Do you need the resulting index list for indexing? If so, there may be a more efficient alternative approach."}, {"owner": {"reputation": 455, "user_id": 9236687, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210704373782614/picture?type=large", "display_name": "Eric", "link": "https://stackoverflow.com/users/9236687/eric"}, "reply_to_user": {"reputation": 1729, "user_id": 4321462, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/689f5fbc965c62e30e67375e34d13ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Samufi", "link": "https://stackoverflow.com/users/4321462/samufi"}, "edited": false, "score": 0, "creation_date": 1566420070, "post_id": 57598824, "comment_id": 101655030, "body": "The matrix contains values that in obtained from a .tif file imported from the <a href=\"https://rasterio.readthedocs.io/en/stable/\" rel=\"nofollow noreferrer\">rasterio</a> package.  I would like to <a href=\"https://stackoverflow.com/questions/35215161/most-efficient-way-to-map-function-over-numpy-array\">map a function</a> on the array of index locations which will return an array of lat and lon positions."}, {"owner": {"reputation": 1729, "user_id": 4321462, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/689f5fbc965c62e30e67375e34d13ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Samufi", "link": "https://stackoverflow.com/users/4321462/samufi"}, "edited": false, "score": 0, "creation_date": 1566420157, "post_id": 57598824, "comment_id": 101655060, "body": "If you want to literally <code>map</code> a function, it may be beneficial to use a generator for the indices rather than using a list."}, {"owner": {"reputation": 455, "user_id": 9236687, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210704373782614/picture?type=large", "display_name": "Eric", "link": "https://stackoverflow.com/users/9236687/eric"}, "reply_to_user": {"reputation": 1729, "user_id": 4321462, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/689f5fbc965c62e30e67375e34d13ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Samufi", "link": "https://stackoverflow.com/users/4321462/samufi"}, "edited": false, "score": 1, "creation_date": 1566420920, "post_id": 57598824, "comment_id": 101655359, "body": "Thanks, but I&#39;ve never used a generator. rusu_ro1s solution is working well for my use case. <code>[func_pixle_to_coords(jj, ii) for ii in range(rows) for jj in range(cols)]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 27886, "user_id": 636626, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b18fc48caab5bf7c3e2a15292972f05b?s=128&d=identicon&r=PG", "display_name": "Nils Werner", "link": "https://stackoverflow.com/users/636626/nils-werner"}, "is_accepted": false, "score": 0, "last_activity_date": 1566419969, "last_edit_date": 1566419969, "creation_date": 1566419772, "answer_id": 57598875, "question_id": 57598824, "link": "https://stackoverflow.com/questions/57598824/flatten-a-matrix-into-an-array-containing-the-index-positions-of-the-values/57598875#57598875", "title": "Flatten a matrix into an array containing the index positions of the values", "body": "<p>You can use <code>numpy.indices()</code> and reshape the returned values a little bit</p>\n\n<pre><code>np.indices(my_matrix.shape).transpose(1, 2, 0).reshape(-1, 2)\n# array([[0, 0],\n#        [0, 1],\n#        [0, 2],\n#        [1, 0],\n#        [1, 1],\n#        [1, 2]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1729, "user_id": 4321462, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/689f5fbc965c62e30e67375e34d13ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Samufi", "link": "https://stackoverflow.com/users/4321462/samufi"}, "is_accepted": false, "score": 0, "last_activity_date": 1566420371, "last_edit_date": 1566420371, "creation_date": 1566419996, "answer_id": 57598921, "question_id": 57598824, "link": "https://stackoverflow.com/questions/57598824/flatten-a-matrix-into-an-array-containing-the-index-positions-of-the-values/57598921#57598921", "title": "Flatten a matrix into an array containing the index positions of the values", "body": "<p>You can create such a list easily with pure python:</p>\n\n<pre><code>from itertools import product\nlist(product(range(my_matrix.shape[0]), range(my_matrix.shape[1])))\n</code></pre>\n\n<p>Result is</p>\n\n<pre><code>[(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2)]\n</code></pre>\n\n<p>If you are not using the explicit list but only want to iterate over the indices, leave the <code>list(...)</code> away. This will save memory and computation time, as the indices will be generated when they are used only.</p>\n\n<p>However, if you want to use the result to index a numpy array, it may be more convenient to use <code>np.ix_</code>:</p>\n\n<pre><code>np.ix_(np.arange(my_matrix.shape[0]), np.arange(my_matrix.shape[1]))\n</code></pre>\n\n<p>Output is </p>\n\n<pre><code>(array([[0],\n        [1]]), array([[0, 1, 2]]))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15239, "user_id": 3161575, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/V5D7Z.png?s=128&g=1", "display_name": "kederrac", "link": "https://stackoverflow.com/users/3161575/kederrac"}, "is_accepted": true, "score": 1, "last_activity_date": 1566420272, "creation_date": 1566420272, "answer_id": 57598966, "question_id": 57598824, "link": "https://stackoverflow.com/questions/57598824/flatten-a-matrix-into-an-array-containing-the-index-positions-of-the-values/57598966#57598966", "title": "Flatten a matrix into an array containing the index positions of the values", "body": "<p>you can try:</p>\n\n<pre><code>rows, cols = my_matrix.shape\n[[i, j] for i in range(rows) for j in range(cols)]\n</code></pre>\n\n<p>output: </p>\n\n<pre><code>[[0, 0], [0, 1], [0, 2], [1, 0], [1, 1], [1, 2]]\n</code></pre>\n"}], "owner": {"reputation": 455, "user_id": 9236687, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210704373782614/picture?type=large", "display_name": "Eric", "link": "https://stackoverflow.com/users/9236687/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 57598966, "answer_count": 3, "score": 1, "last_activity_date": 1566420371, "creation_date": 1566419449, "question_id": 57598824, "link": "https://stackoverflow.com/questions/57598824/flatten-a-matrix-into-an-array-containing-the-index-positions-of-the-values", "title": "Flatten a matrix into an array containing the index positions of the values", "body": "<p>Given a numpy matrix, <code>my_matrix</code>.</p>\n\n<pre><code>import numpy as np\n\nmy_matrix = np.array([[1.2,2.3,None],[4.5,3.4,9.3]])\n</code></pre>\n\n<p>How can you efficiently flatten it into the following array containing the index positions of <code>my_matrix</code>?</p>\n\n<pre><code>[[0,0],[0,1],[0,2],[1,0],[1,1],[1,2]]\n</code></pre>\n"}, {"tags": ["python", "tkinter", "tk"], "comments": [{"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1566422897, "post_id": 57598799, "comment_id": 101655969, "body": "Read <a href=\"https://stackoverflow.com/questions/48045401/why-are-multiple-instances-of-tk-discouraged\">Why are multiple instances of Tk discouraged?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "is_accepted": false, "score": 0, "last_activity_date": 1566445190, "creation_date": 1566445190, "answer_id": 57601754, "question_id": 57598799, "link": "https://stackoverflow.com/questions/57598799/tkinter-gui-automatically-closing-despite-using-similar-structure-to-another-use/57601754#57601754", "title": "Tkinter GUI automatically closing despite using similar structure to another user", "body": "<p>As mentioned in the comments, you should only have one instance of <code>tk.Tk()</code> running at any one time.<br>\nYou need to decide whether you want your app to inherit from <code>tk.Tk</code>, or if it will be composed of a root instance of <code>tk.Tk()</code>...</p>\n\n<p>Further, asking for user input from the <code>__init__</code> method is somewhat an anti-pattern. I refactored this in a separate function.</p>\n\n<p>Last, the self-actuating powers of <code>tk.Stringvar</code> are fully expressed when you assign it to a widget <code>textvariable</code>.</p>\n\n<p>The following example of uses inheritance from <code>tk.Tk</code>:</p>\n\n<pre><code>import tkinter as tk\nfrom tkinter import simpledialog\nfrom datetime import date\n\n\nclass App(tk.Tk):\n    def __init__(self, location=None):\n        super().__init__()\n        self.title(\"Weatherman\")\n        self.geometry('700x200')\n        current_date = tk.StringVar()\n        current_date.set(str(date.today()))\n        self.location = None\n\n        self.test_label = tk.Label(self, textvariable=current_date)\n        self.test_label.pack()\n\n\ndef get_location(app):\n    location = tk.simpledialog.askstring(\"Input\",\"What's your location? Format as City, Country\")\n    return location.strip()\n\n\ndef main():\n    app = App()\n    app.location = get_location(app)\n    app.mainloop()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}], "owner": {"reputation": 308, "user_id": 11370181, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-83a5dhiW8ho/AAAAAAAAAAI/AAAAAAAAAfc/ldhwWpx-neQ/photo.jpg?sz=128", "display_name": "John Allison", "link": "https://stackoverflow.com/users/11370181/john-allison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1566445190, "creation_date": 1566419293, "question_id": 57598799, "link": "https://stackoverflow.com/questions/57598799/tkinter-gui-automatically-closing-despite-using-similar-structure-to-another-use", "title": "Tkinter GUI automatically closing despite using similar structure to another user", "body": "<p>I'm using <a href=\"https://stackoverflow.com/questions/24849265/how-do-i-create-an-automatically-updating-gui-using-tkinter\">this</a> question as a reference for how to structure a Tkinter class, but when I run the program and answer the pop-up dialog I create, the root window automatically closes.</p>\n\n<pre><code>from tkinter import *\nfrom tkinter import simpledialog as sd \nfrom datetime import datetime, date\nimport time\nimport pyowm as owm\n\n# access API key\nowm = foo\nCOUNTRY = 'US'\n\nclass App(Tk):\n    def __init__(self):\n        # create window and set size\n        self.root = Tk()\n        self.root.title(\"Weatherman\")\n        self.root.geometry('700x200')\n\n        # get location\n        self.location = sd.askstring(\"Input\",\"What's your location? Format as City, Country\",parent=self.root)\n        self.location.strip()\n\n        # get date and time \n        current_date = StringVar()\n        current_date.set(date.today)\n\n        # debug label to check variable\n        self.test_label = Label(self.root,text=current_date.get())\n        self.test_label.pack()\n\ndef main():\n    app = App()\n    app.mainloop\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python", "html", "django", "django-models"], "comments": [{"owner": {"reputation": 425, "user_id": 6489505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHfh5.jpg?s=128&g=1", "display_name": "Yaman Ahlawat", "link": "https://stackoverflow.com/users/6489505/yaman-ahlawat"}, "edited": false, "score": 0, "creation_date": 1566419281, "post_id": 57598756, "comment_id": 101654738, "body": "if you are using python3, replace <code>zip(filtered_objects)</code> with <code>list(zip(filtered_objects))</code>"}, {"owner": {"reputation": 7, "user_id": 11918287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e322aef17976186e44b4a64371de59?s=128&d=identicon&r=PG&f=1", "display_name": "t0bi", "link": "https://stackoverflow.com/users/11918287/t0bi"}, "reply_to_user": {"reputation": 425, "user_id": 6489505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHfh5.jpg?s=128&g=1", "display_name": "Yaman Ahlawat", "link": "https://stackoverflow.com/users/6489505/yaman-ahlawat"}, "edited": false, "score": 0, "creation_date": 1566419481, "post_id": 57598756, "comment_id": 101654816, "body": "@YamanAhlawat I am, but have not had any issues so far without list declaration. I made the change and no data is being rendered still. For instance, <code>{{ object.accountManager }}</code>, there is no value where there should be one."}, {"owner": {"reputation": 425, "user_id": 6489505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHfh5.jpg?s=128&g=1", "display_name": "Yaman Ahlawat", "link": "https://stackoverflow.com/users/6489505/yaman-ahlawat"}, "edited": false, "score": 0, "creation_date": 1566419929, "post_id": 57598756, "comment_id": 101654980, "body": "<code>for object in context.filtered_local_zip</code> You are passing context as a dict. You need to either iterate on dict or change the forloop to iterate on context.filtered_local_zip."}, {"owner": {"reputation": 425, "user_id": 6489505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHfh5.jpg?s=128&g=1", "display_name": "Yaman Ahlawat", "link": "https://stackoverflow.com/users/6489505/yaman-ahlawat"}, "edited": false, "score": 0, "creation_date": 1566420147, "post_id": 57598756, "comment_id": 101655054, "body": "you don&#39;t need to use zip. just do <code>list(filtered_objects)</code>"}, {"owner": {"reputation": 7, "user_id": 11918287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e322aef17976186e44b4a64371de59?s=128&d=identicon&r=PG&f=1", "display_name": "t0bi", "link": "https://stackoverflow.com/users/11918287/t0bi"}, "reply_to_user": {"reputation": 425, "user_id": 6489505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHfh5.jpg?s=128&g=1", "display_name": "Yaman Ahlawat", "link": "https://stackoverflow.com/users/6489505/yaman-ahlawat"}, "edited": false, "score": 0, "creation_date": 1566420182, "post_id": 57598756, "comment_id": 101655069, "body": "@YamanAhlawat please see my edit, apparently I am returning some data, but only a description of the database object and not the actual values of the record"}, {"owner": {"reputation": 7, "user_id": 11918287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e322aef17976186e44b4a64371de59?s=128&d=identicon&r=PG&f=1", "display_name": "t0bi", "link": "https://stackoverflow.com/users/11918287/t0bi"}, "reply_to_user": {"reputation": 425, "user_id": 6489505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHfh5.jpg?s=128&g=1", "display_name": "Yaman Ahlawat", "link": "https://stackoverflow.com/users/6489505/yaman-ahlawat"}, "edited": false, "score": 0, "creation_date": 1566420247, "post_id": 57598756, "comment_id": 101655094, "body": "@YamanAhlawat sorry, for the sake of clarity in this problem I have redacted a second database object I am rendering, hence the usage of <code>zip</code>."}, {"owner": {"reputation": 8608, "user_id": 1307020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BobEg.jpg?s=128&g=1", "display_name": "Saturnix", "link": "https://stackoverflow.com/users/1307020/saturnix"}, "edited": false, "score": 0, "creation_date": 1566420398, "post_id": 57598756, "comment_id": 101655150, "body": "What happens if you completely remove zip()? Simply pass filtered_objects and iterate over it."}, {"owner": {"reputation": 425, "user_id": 6489505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHfh5.jpg?s=128&g=1", "display_name": "Yaman Ahlawat", "link": "https://stackoverflow.com/users/6489505/yaman-ahlawat"}, "reply_to_user": {"reputation": 8608, "user_id": 1307020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BobEg.jpg?s=128&g=1", "display_name": "Saturnix", "link": "https://stackoverflow.com/users/1307020/saturnix"}, "edited": false, "score": 0, "creation_date": 1566420538, "post_id": 57598756, "comment_id": 101655217, "body": "@Saturnix thats correct."}, {"owner": {"reputation": 425, "user_id": 6489505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHfh5.jpg?s=128&g=1", "display_name": "Yaman Ahlawat", "link": "https://stackoverflow.com/users/6489505/yaman-ahlawat"}, "edited": false, "score": 0, "creation_date": 1566420630, "post_id": 57598756, "comment_id": 101655254, "body": "@t0bi if you are getting object, just access the fields <code>object.some_field</code>"}, {"owner": {"reputation": 7, "user_id": 11918287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e322aef17976186e44b4a64371de59?s=128&d=identicon&r=PG&f=1", "display_name": "t0bi", "link": "https://stackoverflow.com/users/11918287/t0bi"}, "reply_to_user": {"reputation": 8608, "user_id": 1307020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BobEg.jpg?s=128&g=1", "display_name": "Saturnix", "link": "https://stackoverflow.com/users/1307020/saturnix"}, "edited": false, "score": 0, "creation_date": 1566420659, "post_id": 57598756, "comment_id": 101655267, "body": "@Saturnix I removed <code>zip</code> and I was able to iterate over the data, however, I do need to use <code>zip</code> as I have more than one object I am rendering and iterating over in congruence. Why would <code>zip</code> be giving me issues when iterating? I have the same exact logic used elsewhere except I do not filter the object and it works fine."}, {"owner": {"reputation": 425, "user_id": 6489505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHfh5.jpg?s=128&g=1", "display_name": "Yaman Ahlawat", "link": "https://stackoverflow.com/users/6489505/yaman-ahlawat"}, "edited": false, "score": 0, "creation_date": 1566420730, "post_id": 57598756, "comment_id": 101655294, "body": "if you are using python 3, zip gives an iterator"}, {"owner": {"reputation": 8608, "user_id": 1307020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BobEg.jpg?s=128&g=1", "display_name": "Saturnix", "link": "https://stackoverflow.com/users/1307020/saturnix"}, "edited": false, "score": 0, "creation_date": 1566420748, "post_id": 57598756, "comment_id": 101655300, "body": "Then this is a different problem from the one your question asks, which is addressed here: <a href=\"https://stackoverflow.com/questions/2415865/iterating-through-two-lists-in-django-templates\" title=\"iterating through two lists in django templates\">stackoverflow.com/questions/2415865/&hellip;</a>"}, {"owner": {"reputation": 7, "user_id": 11918287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e322aef17976186e44b4a64371de59?s=128&d=identicon&r=PG&f=1", "display_name": "t0bi", "link": "https://stackoverflow.com/users/11918287/t0bi"}, "reply_to_user": {"reputation": 8608, "user_id": 1307020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BobEg.jpg?s=128&g=1", "display_name": "Saturnix", "link": "https://stackoverflow.com/users/1307020/saturnix"}, "edited": false, "score": 0, "creation_date": 1566420884, "post_id": 57598756, "comment_id": 101655349, "body": "@Saturnix no, I am able to iterate over two or more lists fine, but when I use a filter on my object, this is when I have issues accessing the key value. So, <code>{{ object.status }}</code> does not return a value while it does without the object filter."}, {"owner": {"reputation": 8608, "user_id": 1307020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BobEg.jpg?s=128&g=1", "display_name": "Saturnix", "link": "https://stackoverflow.com/users/1307020/saturnix"}, "edited": false, "score": 0, "creation_date": 1566421511, "post_id": 57598756, "comment_id": 101655550, "body": "Why do you use {{ object.status }}? The link I&#39;ve posted shows you have to either change the iterator or use {{ object.0.status }}"}, {"owner": {"reputation": 8608, "user_id": 1307020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BobEg.jpg?s=128&g=1", "display_name": "Saturnix", "link": "https://stackoverflow.com/users/1307020/saturnix"}, "edited": false, "score": 0, "creation_date": 1566421713, "post_id": 57598756, "comment_id": 101655616, "body": "@t0bi updated my answer to include a working example"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 11918287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e322aef17976186e44b4a64371de59?s=128&d=identicon&r=PG&f=1", "display_name": "t0bi", "link": "https://stackoverflow.com/users/11918287/t0bi"}, "edited": false, "score": 0, "creation_date": 1566420767, "post_id": 57599026, "comment_id": 101655310, "body": "Please see my reply to your comment, this works, however I am passing four objects to my template for iteration in congruence. Hence the usage of <code>zip</code>. If you have any ideas I would very much appreciate them."}, {"owner": {"reputation": 425, "user_id": 6489505, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHfh5.jpg?s=128&g=1", "display_name": "Yaman Ahlawat", "link": "https://stackoverflow.com/users/6489505/yaman-ahlawat"}, "reply_to_user": {"reputation": 7, "user_id": 11918287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e322aef17976186e44b4a64371de59?s=128&d=identicon&r=PG&f=1", "display_name": "t0bi", "link": "https://stackoverflow.com/users/11918287/t0bi"}, "edited": false, "score": 1, "creation_date": 1566420955, "post_id": 57599026, "comment_id": 101655368, "body": "@t0bi pass all queryset separately, create key, value pairs in context. and loop through them individually if you don&#39;t want to use zip"}], "tags": [], "owner": {"reputation": 8608, "user_id": 1307020, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/BobEg.jpg?s=128&g=1", "display_name": "Saturnix", "link": "https://stackoverflow.com/users/1307020/saturnix"}, "is_accepted": true, "score": 0, "last_activity_date": 1566421576, "last_edit_date": 1566421576, "creation_date": 1566420623, "answer_id": 57599026, "question_id": 57598756, "link": "https://stackoverflow.com/questions/57598756/django-object-filter/57599026#57599026", "title": "Django Object Filter", "body": "<p>You don't need <code>zip()</code> nor <code>list()</code> to iterate over a queryset in a Django template.</p>\n\n<p>Simply pass it to the context.</p>\n\n<pre><code>filtered_local_zip = filtered_objects\n</code></pre>\n\n<p>and in the template iterate over it like you're already doing:</p>\n\n<pre><code>{% for object in filtered_local_zip %}\n</code></pre>\n\n<p>If you need to iterate over <code>zip()</code>, read this: <a href=\"https://stackoverflow.com/a/4238261/1307020\">https://stackoverflow.com/a/4238261/1307020</a></p>\n\n<p>Which suggests either this</p>\n\n<pre><code>{% for object0, object1 in filtered_local_zip %}\n</code></pre>\n\n<p>or this</p>\n\n<pre><code>{{ object.0.property }}\n</code></pre>\n\n<p>Demonstration: <a href=\"https://repl.it/repls/UntidyLimpingCollaborativesoftware\" rel=\"nofollow noreferrer\">https://repl.it/repls/UntidyLimpingCollaborativesoftware</a></p>\n"}], "owner": {"reputation": 7, "user_id": 11918287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e322aef17976186e44b4a64371de59?s=128&d=identicon&r=PG&f=1", "display_name": "t0bi", "link": "https://stackoverflow.com/users/11918287/t0bi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 57599026, "answer_count": 1, "score": 0, "last_activity_date": 1566421576, "creation_date": 1566419028, "last_edit_date": 1566420317, "question_id": 57598756, "link": "https://stackoverflow.com/questions/57598756/django-object-filter", "title": "Django Object Filter", "body": "<p>I have a simple filter where a user enters a string, <code>term</code>, which is compared against the column <code>companyId</code> in my local database. If there is a match, the appropriate record/s are then rendered in a table within my template. However, no data is being rendered in the template, only rows of empty fields matching the number of records for a particular query. I have similar logic used for displaying these records unfiltered which works fine.</p>\n\n<p>Edit:</p>\n\n<p>When I removed the key value and tried to render only the object such as <code>{{ object }}</code>, the following is displayed: <code>(Opportunity: Opportunity object (8)</code> </p>\n\n<p>views.py</p>\n\n<pre><code>def opportunity_dashboard(request):\n    try:\n        term = request.GET.get('search_query')\n        if term:\n            filtered_objects = Opportunity.objects.filter(companyId__icontains=term)\n\nfiltered_local_zip = zip(filtered_objects)\n\ncontext = {\n    'term': term,\n    'filtered_local_zip': filtered_local_zip,\n    'filtered_connectwise_zip': filtered_connectwise_zip\n}\n\nreturn render(request, 'website/opportunity_dashboard.html', context)\n</code></pre>\n\n<p>template.html</p>\n\n<pre><code>{% if term %}\n{% for object in filtered_local_zip %}\n&lt;tr&gt;\n    &lt;th style=\"text-align: center;\"&gt;\n        &lt;a href=\"https://solutions.byteworks.com/new_opportunity/new_opportunity_review?id={{ object.id }}\"&gt;&amp;#9998;&lt;/a&gt;\n    &lt;/th&gt;\n        &lt;td&gt;\n            &lt;div class=\"select\"&gt;\n                &lt;select disabled id=\"bw_status\" name=\"status\"&gt;\n                    &lt;option value=\"{{ object.status }}\"&gt;{{ object.status }}&lt;/option&gt;\n                &lt;/select&gt;\n            &lt;/div&gt;\n        &lt;/td&gt;\n        &lt;td&gt;\n            &lt;a{{ object.opportunityName }}&lt;/a&gt;\n        &lt;/td&gt;\n        &lt;td&gt;{{ object.companyId }}&lt;/td&gt;\n        &lt;td&gt;\n            &lt;div class=\"select\"&gt;\n                &lt;select id=\"bw_account_manager\" name=\"account_manager\"&gt;\n                    &lt;option value=\"{{ object.accountManager }}\"&gt;{{ object.accountManager }}&lt;/option&gt;\n                &lt;/select&gt;\n            &lt;/div&gt;\n        &lt;/td&gt;\n</code></pre>\n"}, {"tags": ["python", "gzip"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1566419195, "post_id": 57598732, "comment_id": 101654703, "body": "Binary files don&#39;t have the concept of lines, so your code is not usable with the <i>.gz</i> files."}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1566419362, "post_id": 57598732, "comment_id": 101654773, "body": "Can you please show a minimal example of what you are doing and the desired output? It is unclear under which conditions you receive bytes. In the first case, you are wrapping the file in a TextIOWrapper (which provides strings), and in the second case you are opening in text mode (which provides strings)."}, {"owner": {"reputation": 803, "user_id": 7972789, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ea6f880c5591a28bcf798395799e7d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Cindy Almighty", "link": "https://stackoverflow.com/users/7972789/cindy-almighty"}, "edited": false, "score": 0, "creation_date": 1566419713, "post_id": 57598732, "comment_id": 101654900, "body": "Sorry, the first case was my botched attempt at reading it. I edited the code above to use only gzip.open. I basically need a way to iterate through a large gzipped file line by line."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1566425003, "post_id": 57598732, "comment_id": 101656570, "body": "@CindyAlmighty Try <code>dopenf = gzip.open()</code> or something similar"}], "answers": [{"tags": [], "owner": {"reputation": 1812, "user_id": 11432434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lYnbtUu9EOU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-9ybhwxbzBDHJNyQWMDDx97hP7g/mo/photo.jpg?sz=128", "display_name": "SimonN", "link": "https://stackoverflow.com/users/11432434/simonn"}, "is_accepted": true, "score": 0, "last_activity_date": 1566419397, "creation_date": 1566419397, "answer_id": 57598817, "question_id": 57598732, "link": "https://stackoverflow.com/questions/57598732/iterating-through-a-gzipped-object-in-python-with-strings-not-bytes/57598817#57598817", "title": "Iterating through a gzipped object in Python with strings, not bytes", "body": "<p>Perhaps I've misunderstood something here but if your gzipped file is a text file, you should be able to simply call gzip.open() with mode='r' (not 'rb') in place of the standard open(). There is no need for all the io classes.</p>\n"}], "owner": {"reputation": 803, "user_id": 7972789, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ea6f880c5591a28bcf798395799e7d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Cindy Almighty", "link": "https://stackoverflow.com/users/7972789/cindy-almighty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "closed_date": 1566424983, "accepted_answer_id": 57598817, "answer_count": 1, "score": -1, "last_activity_date": 1566420111, "creation_date": 1566418910, "last_edit_date": 1566419735, "question_id": 57598732, "link": "https://stackoverflow.com/questions/57598732/iterating-through-a-gzipped-object-in-python-with-strings-not-bytes", "closed_reason": "Not suitable for this site", "title": "Iterating through a gzipped object in Python with strings, not bytes", "body": "<p>Depending on the extension of files, I use a different opener with context manager like so:</p>\n\n<pre><code>if args.vcf_in.endswith(\".gz\"):\n    dopenf = gzip.open\n    mode = \"rb\"\nelse:\n    openf = open\n    mode = \"rt\"\n</code></pre>\n\n<p>Unfortunately, when I try to iterate through the object in one case it is bytes and in another string, and the code fails:</p>\n\n<pre><code>with openf(args.vcf_in, mode) as fin:\n    for line in fin:\n        count += 1\n        print(line)\n        if line.startswith(\"#\"):\n</code></pre>\n\n<p>Is there way to iterate through a gzipped file so that the outputted lines are strings? I know I can check if they are bytes and decode them but I am curious is there a better way using the opener, or io package.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas", "plot", "cluster-analysis", "k-means"], "answers": [{"tags": [], "owner": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "is_accepted": false, "score": 0, "last_activity_date": 1566453589, "creation_date": 1566453589, "answer_id": 57602860, "question_id": 57598729, "link": "https://stackoverflow.com/questions/57598729/k-means-clustering-how-to-divide-datas-vertically/57602860#57602860", "title": "K-means clustering, how to divide datas vertically?", "body": "<p>If you want to cluster vertically, <strong>use only the y attribute</strong> for clustering.</p>\n\n<p>If you also pass the x attribute data to the algorithm it will be used. And depending how you scale your data, it may depend mostly on the x or only the y attribute have I'd they vary a lot in scale.</p>\n"}], "owner": {"reputation": 51, "user_id": 7314121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed03fbb6850d32349e9ee374e1e1f560?s=128&d=identicon&r=PG&f=1", "display_name": "HCU", "link": "https://stackoverflow.com/users/7314121/hcu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566453589, "creation_date": 1566418898, "last_edit_date": 1566419653, "question_id": 57598729, "link": "https://stackoverflow.com/questions/57598729/k-means-clustering-how-to-divide-datas-vertically", "title": "K-means clustering, how to divide datas vertically?", "body": "<p>I tried to use K-means clustering method to divide 3 part of my Dataframes. I used same method and codes in 2 different Dataframes. In my first dataframe, I get 3 clusters and they separated vertically which I want. But in the second one, It clustered my datas horizontally. How can fix it? I also need to separate my values vertically in my second dataframe.</p>\n\n<p>The size and columns names of these Dataframes are same, but row values are different.</p>\n\n<p>(<a href=\"https://imgur.com/a/SzSdcul\" rel=\"nofollow noreferrer\">https://imgur.com/a/SzSdcul</a>)\n![dataframe1-vertical][1]</p>\n\n<p>(<a href=\"https://imgur.com/a/gaRN1Fm\" rel=\"nofollow noreferrer\">https://imgur.com/a/gaRN1Fm</a>)\n![dataframe2-horizontal(I don't want this, I need clustering like dataframe1 like above)][2]</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>kmeans = KMeans(n_clusters=3).fit(dataframe1)\ncentroidsValues = kmeans.cluster_centers_\n\nplt.scatter(dataframe1['StoreNumber'], dataframe1['SalesNumber'], c= kmeans.labels_.astype(float), s=50, alpha=0.5)\nplt.scatter(centroidsValues[:, 0], centroidsValues[:, 1], c='red', s=50)\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1566419840, "post_id": 57598724, "comment_id": 101654945, "body": "Can you give examples of the succesive text? for example, why you need <code>\\b</code> from the first place"}, {"owner": {"reputation": 1441, "user_id": 11680578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z9YaX.jpg?s=128&g=1", "display_name": "Catalina Chircu", "link": "https://stackoverflow.com/users/11680578/catalina-chircu"}, "edited": false, "score": 0, "creation_date": 1566419866, "post_id": 57598724, "comment_id": 101654950, "body": "Why don&#39;t you simply remove the <code>\\b</code> then? Please provide more input strings to match."}, {"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 1, "creation_date": 1566419866, "post_id": 57598724, "comment_id": 101654951, "body": "space or <code>.</code> are word boundaries as theirselves"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1566421383, "post_id": 57598724, "comment_id": 101655502, "body": "According to your edit, I would simply replace <code>\\b</code> with <code>$</code> or <code>\\s</code> - <a href=\"https://regex101.com/r/2uRP12/1/\" rel=\"nofollow noreferrer\">demo</a>"}, {"owner": {"reputation": 2611, "user_id": 11633355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4pV83.png?s=128&g=1", "display_name": "Anna Nevison", "link": "https://stackoverflow.com/users/11633355/anna-nevison"}, "edited": false, "score": 0, "creation_date": 1566421919, "post_id": 57598724, "comment_id": 101655675, "body": "don&#39;t replace with the <code>\\s</code>, I just tested that and it fails to match the &#39;credit card nos&#39;. The replace with the <code>$</code> works though on the first version of your code."}], "answers": [{"comments": [{"owner": {"reputation": 3672, "user_id": 1368195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f456b9f3fed14d1db444f6e91e929c50?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1368195/alex"}, "edited": false, "score": 1, "creation_date": 1566422815, "post_id": 57599317, "comment_id": 101655943, "body": "That&#39;s exactly what I was looking for. I ended up figuring it out on my own, in a slightly different form than yours. But your version is more elegant than mine. Thanks!"}], "tags": [], "owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1566422534, "creation_date": 1566422534, "answer_id": 57599317, "question_id": 57598724, "link": "https://stackoverflow.com/questions/57598724/python-unable-to-match-a-period-in-a-non-capturing-group-that-is-followed-by/57599317#57599317", "title": "Python: Unable to match a period (in a non-capturing group) that is followed by a word break", "body": "<p>You need to use <code>\\b</code> where it is expected to assert the end of words, after word chars only:</p>\n\n<pre><code>r'credit\\s+card\\s+(?:numbers?\\b|no(?:s\\b|\\b\\.)?)'\n</code></pre>\n\n<p>See the <a href=\"https://regex101.com/r/5n9nom/1\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n\n<p><code>(?:numbers?|no[s\\.]?)\\b</code> is turned into <code>(?:numbers?\\b|no(?:s\\b|\\b\\.)?)</code> and matches:</p>\n\n<ul>\n<li><code>numbers?\\b</code> - <code>number</code> or <code>numbers</code> as whole words, no word char is allowed immediately to the right of these strings</li>\n<li><code>|</code> - or</li>\n<li><code>no</code> - <code>no</code> substring followed with...</li>\n<li><code>(?:s\\b|\\b\\.)?</code> - an optional 1 or 0 occurrences of:\n\n<ul>\n<li><code>s\\b</code> - <code>s</code> not followed with a word char</li>\n<li><code>|</code> - or</li>\n<li><code>\\b\\.</code> - word boundary and a dot.</li>\n</ul></li>\n</ul>\n\n<p><strong>NOTE</strong>: If you do not want any word char to appear after the <code>.</code>, add <code>\\B</code> non-word boundary, <code>\\b\\.</code> => <code>\\b\\.\\B</code>.</p>\n"}], "owner": {"reputation": 3672, "user_id": 1368195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f456b9f3fed14d1db444f6e91e929c50?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1368195/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 57599317, "answer_count": 1, "score": 2, "last_activity_date": 1566422534, "creation_date": 1566418881, "last_edit_date": 1566420329, "question_id": 57598724, "link": "https://stackoverflow.com/questions/57598724/python-unable-to-match-a-period-in-a-non-capturing-group-that-is-followed-by", "title": "Python: Unable to match a period (in a non-capturing group) that is followed by a word break", "body": "<p>I have a regex like this one: <code>r\"credit\\s+card\\s+(?:numbers?|no[s\\.]?)\\b\"</code>. I would like to match a phrase like \"credit card no.\" (including the period). However, it currently will only match the part of the phrase <em>preceding</em> the period. </p>\n\n<pre><code>&gt;&gt;&gt; re.search(r\"credit\\s+card\\s+(?:numbers?|no[s\\.]?)\\b\", \"credit card no.\")\n# &lt;re.Match object; span=(0, 14), match='credit card no'&gt;\n</code></pre>\n\n<p>This seems to have to do with the word break sign <code>\\b</code> (and the fact that there is a word break between <code>no</code> and <code>.</code>: if I remove <code>\\b</code>, the full phrase can be matched:</p>\n\n<pre><code>&gt;&gt;&gt; re.search(r\"credit\\s+card\\s+(?:numbers?|no[s\\.]?)\", \"credit card no.\")\n# &lt;re.Match object; span=(0, 15), match='credit card no.'&gt;\n</code></pre>\n\n<p>I wonder if there is a way to modify the regex to make it capture the period (when it is actually present in text).</p>\n\n<p>EDIT:\nUpdated the regex to accommodate both singular and plural forms of \"number\"</p>\n\n<p>Possible input strings could be:</p>\n\n<ul>\n<li>credit card number </li>\n<li>credit card numbers </li>\n<li>credit card no</li>\n<li>credit card no. </li>\n<li>credit card nos</li>\n</ul>\n\n<p>I include the word boundary for potential false positive matches for \"credit card no\" as it could match strings like \"credit card notification\" without the word break</p>\n"}, {"tags": ["python", "list", "slice"], "comments": [{"owner": {"reputation": 17337, "user_id": 83605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a214bcecbc04c7c42696e55cbdea3e17?s=128&d=identicon&r=PG", "display_name": "Aziz", "link": "https://stackoverflow.com/users/83605/aziz"}, "edited": false, "score": 2, "creation_date": 1566418434, "post_id": 57598601, "comment_id": 101654426, "body": "<code>mainList = mainList[3:]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "is_accepted": false, "score": 0, "last_activity_date": 1566418705, "creation_date": 1566418705, "answer_id": 57598686, "question_id": 57598601, "link": "https://stackoverflow.com/questions/57598601/how-can-i-cut-a-list-from-given-index/57598686#57598686", "title": "How can I cut a list from given index", "body": "<p>If you want to delete the first n occurences in a list:</p>\n\n<pre><code>mainList = [3,5,2,7,0,9]\nfor i in range(0,3):\n    mainList.pop(0)\nprint(mainList)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[7, 0, 9]\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7761845, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--iVpD8s0ek8/AAAAAAAAAAI/AAAAAAAAAAA/QCzsY4cZ9GE/photo.jpg?sz=128", "display_name": "Sunil Kumar", "link": "https://stackoverflow.com/users/7761845/sunil-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "closed_date": 1566420822, "answer_count": 1, "score": -5, "last_activity_date": 1566418705, "creation_date": 1566418321, "last_edit_date": 1566418469, "question_id": 57598601, "link": "https://stackoverflow.com/questions/57598601/how-can-i-cut-a-list-from-given-index", "closed_reason": "Duplicate", "title": "How can I cut a list from given index", "body": "<p>Cut down the same list into given index</p>\n\n<p>Let's say we have a list</p>\n\n<pre><code>mainList = [3,5,2,7,0,9]\n</code></pre>\n\n<p>If I remove 3 item\nthen <code>mainList</code> should be</p>\n\n<pre><code>[7,0,9]\n</code></pre>\n\n<p>Is there a way to do that?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1566418384, "post_id": 57598583, "comment_id": 101654404, "body": "Just use a plain open. The \u2018with\u2019 closes the file."}, {"owner": {"reputation": 796, "user_id": 1643973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/198787891419681bb0932f54a502a40c?s=128&d=identicon&r=PG", "display_name": "jjramsey", "link": "https://stackoverflow.com/users/1643973/jjramsey"}, "edited": false, "score": 1, "creation_date": 1566418526, "post_id": 57598583, "comment_id": 101654457, "body": "Using a class is probably overkill for what you want to do."}, {"owner": {"reputation": 1, "user_id": 10292173, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w5bjk4JdAMI/AAAAAAAAAAI/AAAAAAAABKc/H2pUqiHg5is/photo.jpg?sz=128", "display_name": "Tack", "link": "https://stackoverflow.com/users/10292173/tack"}, "edited": false, "score": 0, "creation_date": 1566418562, "post_id": 57598583, "comment_id": 101654475, "body": "So if I omit the with it won&#39;t impact memory usage at all?"}, {"owner": {"reputation": 796, "user_id": 1643973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/198787891419681bb0932f54a502a40c?s=128&d=identicon&r=PG", "display_name": "jjramsey", "link": "https://stackoverflow.com/users/1643973/jjramsey"}, "edited": false, "score": 0, "creation_date": 1566418752, "post_id": 57598583, "comment_id": 101654543, "body": "No, it won&#39;t impact memory usage. If you insist on using a class here (which I don&#39;t recommend), then you may want to define a destructor <code>__del__(self)</code> that closes the file <code>self.k</code> when your class instance is destroyed."}], "answers": [{"comments": [{"owner": {"reputation": 1707, "user_id": 11832127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zsq7r.png?s=128&g=1", "display_name": "ndclt", "link": "https://stackoverflow.com/users/11832127/ndclt"}, "edited": false, "score": 1, "creation_date": 1566418651, "post_id": 57598638, "comment_id": 101654508, "body": "With <code>open</code> like this, you don&#39;t close the file at the end of the code."}, {"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "reply_to_user": {"reputation": 1707, "user_id": 11832127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zsq7r.png?s=128&g=1", "display_name": "ndclt", "link": "https://stackoverflow.com/users/11832127/ndclt"}, "edited": false, "score": 1, "creation_date": 1566418719, "post_id": 57598638, "comment_id": 101654527, "body": "Well, one problem at a time. The OP has a file which is not open at all."}], "tags": [], "owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "is_accepted": false, "score": -1, "last_activity_date": 1566418481, "creation_date": 1566418481, "answer_id": 57598638, "question_id": 57598583, "link": "https://stackoverflow.com/questions/57598583/how-to-dynamically-open-files-for-writing-with-a-with-statement/57598638#57598638", "title": "How to dynamically open files for writing with a with statement", "body": "<pre><code>\n def __init__(self,theFile):\n        self.k = open(theFile,'wb')\n        self.a = csv.writer(self.k)\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "is_accepted": false, "score": 2, "last_activity_date": 1566418596, "creation_date": 1566418596, "answer_id": 57598659, "question_id": 57598583, "link": "https://stackoverflow.com/questions/57598583/how-to-dynamically-open-files-for-writing-with-a-with-statement/57598659#57598659", "title": "How to dynamically open files for writing with a with statement", "body": "<p>You don't necessarily need a class for this. Let's pretend that your input file is a csv file and has the full name of the month in the first column:</p>\n\n<pre><code>with open('path/to/input') as infile:\n    for rownum,row in enumerate(csv.reader(infile),1):\n        month = row[0]\n        with open('path/to/output_{}.csv'.format(month), 'a') as outfile:\n        if not rownum%100: print(\"Processed row\", rownum, end='\\r', flush=True)\n            csv.writer(outfile).writerow(row)\n    print(\"Processed row\", rownum)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1566419272, "last_edit_date": 1566419272, "creation_date": 1566418771, "answer_id": 57598700, "question_id": 57598583, "link": "https://stackoverflow.com/questions/57598583/how-to-dynamically-open-files-for-writing-with-a-with-statement/57598700#57598700", "title": "How to dynamically open files for writing with a with statement", "body": "<blockquote>\n  <p>I can't load it all into memory</p>\n</blockquote>\n\n<p>You are not loading it all to memory by <a href=\"https://docs.python.org/3/library/functions.html#open\" rel=\"nofollow noreferrer\"><code>open</code></a>ing a file. You just create a <a href=\"https://docs.python.org/3/glossary.html#term-file-object\" rel=\"nofollow noreferrer\">file object</a>. When you do <code>f.read()</code> you load all its contents to memory as a string.</p>\n\n<p>So you can do:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class testClass:\n    def __init__(self,theFile):\n        self.k = open(theFile,'wb')\n        self.a = csv.writer(self.k)\n\n    def writeOut(self,inString):\n        self.a.writerow(inString)\n\n    def __del__(self):\n        self.k.close()\n</code></pre>\n\n<p>Because it is not guarenteed that <code>__del__</code> will be called at the end of execution you might want to add a <code>close</code> method and call it just like with files.</p>\n"}], "owner": {"reputation": 1, "user_id": 10292173, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w5bjk4JdAMI/AAAAAAAAAAI/AAAAAAAABKc/H2pUqiHg5is/photo.jpg?sz=128", "display_name": "Tack", "link": "https://stackoverflow.com/users/10292173/tack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1566419272, "creation_date": 1566418203, "question_id": 57598583, "link": "https://stackoverflow.com/questions/57598583/how-to-dynamically-open-files-for-writing-with-a-with-statement", "title": "How to dynamically open files for writing with a with statement", "body": "<p>I am trying to split out one large file into an unknown number of files based on a field on a row by row basis. In this case, I want all records with a July 2016 date to write to one file, August 2016 to another, etc. I don't want to have to comb through the file twice, first to populate a list of files that need to be created, and then to actually write to them.</p>\n\n<p>My first thought was to create a dictionary where the key was the file name (based on the date) and the return was a class that would write out to the csv files.</p>\n\n<pre><code>import csv\n\nclass testClass:\n    a = None\n    k = None\n\n    def __init__(self,theFile):\n        with open(theFile,'wb') as self.k:\n            self.a = csv.writer(self.k)\n\n\n    def writeOut(self,inString):\n        self.a.writerow(inString)\n\ntestDict = {'07m19':testClass('07m19_test2')}\n\n\ntestDict['07m19'].writeOut(['test'])\n</code></pre>\n\n<p>When i try to run this I get the following error:</p>\n\n<p><code>ValueError: I/O operation on closed file</code></p>\n\n<p>Which makes sense, by the time the class is done initializing theFile is closed. </p>\n\n<p>I think the with statement is required because the files are very big and I can't load it all into memory. That being said, I am not sure how else to approach this.</p>\n"}, {"tags": ["python", "docker-compose", "apache-zookeeper", "solrcloud"], "comments": [{"owner": {"reputation": 804, "user_id": 7102225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5uepH.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7102225/martin"}, "edited": false, "score": 0, "creation_date": 1566420530, "post_id": 57598570, "comment_id": 101655212, "body": "Where is your python code running?  External to the containers?"}, {"owner": {"reputation": 83, "user_id": 8326151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q0o6d.jpg?s=128&g=1", "display_name": "Andrew Samuelson", "link": "https://stackoverflow.com/users/8326151/andrew-samuelson"}, "reply_to_user": {"reputation": 804, "user_id": 7102225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5uepH.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7102225/martin"}, "edited": false, "score": 0, "creation_date": 1566434599, "post_id": 57598570, "comment_id": 101658532, "body": "@Martin it&#39;s running in my web container. I can post the code for that as well if it helps, but it&#39;s within the docker container. I was previously able to use just Solr within my project."}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 8326151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q0o6d.jpg?s=128&g=1", "display_name": "Andrew Samuelson", "link": "https://stackoverflow.com/users/8326151/andrew-samuelson"}, "is_accepted": false, "score": 0, "last_activity_date": 1566499121, "creation_date": 1566499121, "answer_id": 57615341, "question_id": 57598570, "link": "https://stackoverflow.com/questions/57598570/warning-cannot-resolve-hostname-errno-2-name-or-service-not-known-when-t/57615341#57615341", "title": "&#39;WARNING:: Cannot resolve hostname: [Errno -2] Name or service not known&#39; when trying to connect Zookeeper with Pysolr", "body": "<p>Found my issue. My web container did not include</p>\n\n<pre><code>networks:\n - solr\n</code></pre>\n\n<p>so it wasn't able to access zookeeper.</p>\n"}], "owner": {"reputation": 83, "user_id": 8326151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q0o6d.jpg?s=128&g=1", "display_name": "Andrew Samuelson", "link": "https://stackoverflow.com/users/8326151/andrew-samuelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566499121, "creation_date": 1566418141, "question_id": 57598570, "link": "https://stackoverflow.com/questions/57598570/warning-cannot-resolve-hostname-errno-2-name-or-service-not-known-when-t", "title": "&#39;WARNING:: Cannot resolve hostname: [Errno -2] Name or service not known&#39; when trying to connect Zookeeper with Pysolr", "body": "<p>I am trying to run a docker-compose that will let me have a Zookeeper ensemble that manages my SolrCloud. Everything runs and from every way I've checked inside the container, my Zookeeper ensemble appears to be up and running. Instead, everytime I try to connect I get an error that the name or service could not be found.</p>\n\n<p>I've tried using different <code>docker-compose.yml</code>s, I've tried changing the name of my containers in docker, I've tried changing up the ports in the connection string, I've tried changing the hostname in the connection string, and I've tried the localhost for the connection string. </p>\n\n<pre><code>    solr1:\n        container_name: solr1\n        image: solr:5-slim\n        ports:\n        - \"8981:8983\"\n        environment:\n        - ZK_HOST=zoo1:2181,zoo2:2181,zoo3:2181\n        networks:\n        - solr\n        depends_on:\n        - zoo1\n        - zoo2\n        - zoo3\n        volumes:\n        - data:/var/solr\n        command: &gt;\n            sh -c \"solr-precreate users\"\n    solr2:\n        image: solr:5-slim\n        container_name: solr2\n        ports:\n        - \"8982:8983\"\n        environment:\n        - ZK_HOST=zoo1:2181,zoo2:2181,zoo3:2181\n        networks:\n        - solr\n        depends_on:\n        - zoo1\n        - zoo2\n        - zoo3\n    solr3:\n        image: solr:5-slim\n        container_name: solr3\n        ports:\n        - \"8983:8983\"\n        environment:\n        - ZK_HOST=zoo1:2181,zoo2:2181,zoo3:2181\n        ports:\n        - 8983:8983\n        networks:\n        - solr\n        depends_on:\n        - zoo1\n        - zoo2\n        - zoo3\n    zoo1:\n        image: zookeeper:3.4\n        container_name: zoo1\n        restart: always\n        hostname: zoo1\n        ports:\n        - 2181:2181\n        environment:\n            ZOO_MY_ID: 1\n            ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888\n        networks:\n        - solr\n    zoo2:\n        image: zookeeper:3.4\n        container_name: zoo2\n        restart: always\n        hostname: zoo2\n        ports:\n        - 2182:2181\n        environment:\n            ZOO_MY_ID: 2\n            ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888\n        networks:\n        - solr\n    zoo3:\n        image: zookeeper:3.4\n        container_name: zoo3\n        restart: always\n        hostname: zoo3\n        ports:\n        - 2183:2181\n        environment:\n            ZOO_MY_ID: 3\n            ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888\n        networks:\n        - solr\n</code></pre>\n\n<p>and then my Python code is</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pysolr\n\ndef connect_solrcloud():\n    zookeeper = pysolr.ZooKeeper(\"zoo1:2181,zoo2:2181,zoo3:2181\")\n    solr = pysolr.SolrCloud(zookeeper, \"users\")\n    solr.ping()\n\nconnect_solrcloud()\n\n</code></pre>\n\n<p>I would expect that the Zookeeper object is able to connect and then I would be able to access the \"users\" core I created in my docker container. Instead I get an error saying</p>\n\n<pre><code> WARNING:: Cannot resolve zoo1: [Errno -2] Name or service not known\n WARNING:: Cannot resolve zoo2: [Errno -2] Name or service not known\n WARNING:: Cannot resolve zoo3: [Errno -2] Name or service not known\n</code></pre>\n\n<p>I don't know if this is a docker-compose issue or if it's the way I set Zookeeper up. It appears no one else online has a problem here. They either have problems standing Zookeeper up or some issue once it's connected.</p>\n"}, {"tags": ["python", "django", "django-models", "django-templates", "django-views"], "comments": [{"owner": {"reputation": 219, "user_id": 8627141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5942482475a209ef230888da8a1ea81a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/8627141/joe"}, "edited": false, "score": 0, "creation_date": 1566418311, "post_id": 57598557, "comment_id": 101654366, "body": "You have repeated the SchoolListView twice in the views provided. Is that a typo?"}, {"owner": {"reputation": 83, "user_id": 9183839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5YXf.jpg?s=128&g=1", "display_name": "Fahad Md Kamal", "link": "https://stackoverflow.com/users/9183839/fahad-md-kamal"}, "reply_to_user": {"reputation": 219, "user_id": 8627141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5942482475a209ef230888da8a1ea81a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/8627141/joe"}, "edited": false, "score": 0, "creation_date": 1566418997, "post_id": 57598557, "comment_id": 101654635, "body": "Thanks... Edited the post."}], "owner": {"reputation": 83, "user_id": 9183839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5YXf.jpg?s=128&g=1", "display_name": "Fahad Md Kamal", "link": "https://stackoverflow.com/users/9183839/fahad-md-kamal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1586654264, "creation_date": 1566418077, "last_edit_date": 1586654264, "question_id": 57598557, "link": "https://stackoverflow.com/questions/57598557/retrieving-data-from-template-using-the-foreign-key-of-related-tables", "title": "Retrieving data from template using the foreign key of related tables", "body": "<p>I'm trying to retrieve data from template level which is connected with foreign key to the derived class. But it is not working.</p>\n\n<p><strong>Models:</strong></p>\n\n<pre><code>class School(models.Model):\n    name = models.CharField(max_length = 256)\n    principal = models.CharField(max_length = 256)\n    location = models.CharField(max_length = 256)\n\nclass Student(models.Model):\n    name = models.CharField(max_length = 256)\n    age = models.PositiveIntegerField()\n    school = models.ForeignKey(School, related_name='students', on_delete = models.CASCADE)\n</code></pre>\n\n<p><strong>Views:</strong></p>\n\n<pre><code>class SchoolListView(ListView):\n    context_object_name = 'schools'\n    model = models.School\n    template_name = 'basic_app/School_list.html'\n\n\nclass SchoolDetailView(ListView):\n    context_object_name = 'school_detail'\n    model = models.School\n    template_name = \"basic_app/School_dtl.html\"\n</code></pre>\n\n<p><strong>Template</strong></p>\n\n<pre><code>&lt;div class=\"jumbotron\"&gt;\n    &lt;h1&gt;Welcome to School Detail page&lt;/h1&gt;\n    &lt;h2&gt;School Details:&lt;/h2&gt;\n    &lt;p&gt;Name: {{ school_detail.name}} &lt;/p&gt;\n    &lt;p&gt;Principal: {{ school_detail.principal}} &lt;/p&gt;\n    &lt;p&gt;Location: {{ school_detail.location}} &lt;/p&gt;\n\n    &lt;h3&gt; Students:&lt;/h3&gt;\n    {% for student in school_detail.students.all %}\n        &lt;p&gt;{{ student.name }} who is {{ student.age }} years old.&lt;/p&gt;\n    {% endfor %}\n</code></pre>\n\n<p>How can I retrieve the student data from the student table from the template?</p>\n"}, {"tags": ["python", "xml", "beautifulsoup"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11035198"}, "edited": false, "score": 0, "creation_date": 1566421008, "post_id": 57598550, "comment_id": 101655387, "body": "Realised that I just needed to do <code>item.get(&#39;x&#39;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": true, "score": 1, "last_activity_date": 1566424970, "creation_date": 1566424970, "answer_id": 57599671, "question_id": 57598550, "link": "https://stackoverflow.com/questions/57598550/how-to-retrieve-information-from-xml-tspan-tag/57599671#57599671", "title": "How to retrieve information from xml tspan tag", "body": "<p>You could have used css selectors as well - by adding in x attribute to selector you will only get elements where that attribute is present</p>\n\n<pre><code>from bs4 import BeautifulSoup as bs\n\ns = '''\n&lt;text\ntransform=\"matrix(0,-1,-1,0,7931,3626)\"\nstyle=\"font-variant:normal;font-weight:normal;font-size:92.3259964px;font-family:Arial;-inkscape-font-specification:ArialMT;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none\"\nid=\"text60264\"&gt;&lt;tspan\n x=\"0 61.581444 123.16289 184.74432 251.4037 323.23334 384.81476 410.48138 436.14801 497.72946 559.31091 625.97028 692.62964 754.21112 805.54437 831.211 918.3667 979.94818 1005.6148 1077.4445 1144.1038 1200.515 1226.1816 1256.9261 1318.5076 1390.3373 1421.0818 1446.7484 1472.415 1526.3334 1587.9149 1649.4963 1716.1556 1782.8151 1844.3965 1895.7297 1921.3964 2008.5521 2070.1335 2095.8003 2167.6299 2234.2893 2290.7004\"\n y=\"0\"\n sodipodi:role=\"line\"\n id=\"tspan60262\"&gt;APPROX. BARREL WEIGHT (KG): &amp;lt;BARREL WEIGHT&amp;gt;&lt;/tspan&gt;&lt;/text&gt;\n'''\n\nsoup = bs(s, 'lxml')\nprint([i['x'] for i in soup.select('tspan[x]')])\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11035198"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 57599671, "answer_count": 1, "score": 2, "last_activity_date": 1566424970, "creation_date": 1566418039, "question_id": 57598550, "link": "https://stackoverflow.com/questions/57598550/how-to-retrieve-information-from-xml-tspan-tag", "title": "How to retrieve information from xml tspan tag", "body": "<p>I am currently using BeautifulSoup to do xml parsing, but don't know how to get information from inside the tspan tag. The the xml I am parsing looks like this:</p>\n\n<pre><code>&lt;text\n           transform=\"matrix(0,-1,-1,0,7931,3626)\"\n           style=\"font-variant:normal;font-weight:normal;font-size:92.3259964px;font-family:Arial;-inkscape-font-specification:ArialMT;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none\"\n           id=\"text60264\"&gt;&lt;tspan\n             x=\"0 61.581444 123.16289 184.74432 251.4037 323.23334 384.81476 410.48138 436.14801 497.72946 559.31091 625.97028 692.62964 754.21112 805.54437 831.211 918.3667 979.94818 1005.6148 1077.4445 1144.1038 1200.515 1226.1816 1256.9261 1318.5076 1390.3373 1421.0818 1446.7484 1472.415 1526.3334 1587.9149 1649.4963 1716.1556 1782.8151 1844.3965 1895.7297 1921.3964 2008.5521 2070.1335 2095.8003 2167.6299 2234.2893 2290.7004\"\n             y=\"0\"\n             sodipodi:role=\"line\"\n             id=\"tspan60262\"&gt;APPROX. BARREL WEIGHT (KG): &amp;lt;BARREL WEIGHT&amp;gt;&lt;/tspan&gt;&lt;/text&gt;\n</code></pre>\n\n<p>I can get the text from the text tag, but I am trying to get the <code>x=\"0 61.581...\"</code> so that I can change it to just <code>x=\"0\"</code>. So far my code only gets the tspan xml tags</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\n\ninfile = open('1c E37 Face Electric Operation No No.svg', 'r')\ncontents = infile.read()\nsoup = BeautifulSoup(contents, 'lxml')\nitems = soup.find_all('tspan')\nfor item in items:\n    print(item) \n</code></pre>\n"}, {"tags": ["python", "selenium", "xpath", "css-selectors", "webdriverwait"], "answers": [{"comments": [{"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1566418852, "post_id": 57598602, "comment_id": 101654570, "body": "Plus their other error where they needed &quot; not &#39; i.e. date=browser.find_element_by_xpath(&quot;//span[@id= &#39;ctl00_ContentPlaceHolder1_lblIncDate&#39;]&quot;)"}], "tags": [], "owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "is_accepted": true, "score": 1, "last_activity_date": 1566418331, "creation_date": 1566418331, "answer_id": 57598602, "question_id": 57598499, "link": "https://stackoverflow.com/questions/57598499/extracting-text-with-selenium-by-id/57598602#57598602", "title": "Extracting text with selenium by ID", "body": "<p>You haven't presented the failing code, but from the traceback it's visible that you're using plural version (browser.find_element<strong>s</strong>_by_id) instead of singular <code>browser.find_element_by_id</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 1, "last_activity_date": 1566418665, "creation_date": 1566418665, "answer_id": 57598678, "question_id": 57598499, "link": "https://stackoverflow.com/questions/57598499/extracting-text-with-selenium-by-id/57598678#57598678", "title": "Extracting text with selenium by ID", "body": "<p>To retrieve the text <strong>4/20/2016</strong> you need to induce <em>WebDriverWait</em> for the <code>visibility_of_element_located</code> and you can use either of the followingcan use <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n\n<ul>\n<li><p>Using <code>CSS_SELECTOR</code>:</p>\n\n<pre><code>print(WebDriverWait(driver, 5).until(EC.visibility_of_element_located((By.CSS_SELECTOR, \"span#ctl00_ContentPlaceHolder1_lblIncDate\"))).get_attribute(\"innerHTML\"))\n</code></pre></li>\n<li><p>Using <code>XPATH</code>:</p>\n\n<pre><code>print(WebDriverWait(driver, 5).until(EC.visibility_of_element_located((By.XPATH, \"//span[@id='ctl00_ContentPlaceHolder1_lblIncDate']\"))).get_attribute(\"innerHTML\"))\n</code></pre></li>\n<li><p><strong>Note</strong> : You have to add the following imports :</p>\n\n<pre><code>from selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 139, "user_id": 10475324, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UYn_JKkXh2Y/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW6YZGvD1l-6GEvBvYHvWybRq3lpg/mo/photo.jpg?sz=128", "display_name": "Alicia Pliego", "link": "https://stackoverflow.com/users/10475324/alicia-pliego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 57598602, "answer_count": 2, "score": 0, "last_activity_date": 1566418665, "creation_date": 1566417736, "last_edit_date": 1566418646, "question_id": 57598499, "link": "https://stackoverflow.com/questions/57598499/extracting-text-with-selenium-by-id", "title": "Extracting text with selenium by ID", "body": "<p>I want to extract text using selenium in Python from an html. My text is under the id tag and when I try to retrieve the text this way gives me error.</p>\n\n<p><a href=\"https://i.stack.imgur.com/l3zum.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l3zum.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>date=browser.find_element_by_id('ctl00_ContentPlaceHolder1_lblIncDate')\ndate2=date.text\ndate1.append(date)\n</code></pre>\n\n<hr>\n\n<pre><code>AttributeError                            Traceback (most recent call last)\n&lt;ipython-input-21-20d6df14a340&gt; in &lt;module&gt;()\n     37 date1.append(date)\n     38 userid_element = browser.find_elements_by_id('ctl00_ContentPlaceHolder1_lblIncDate')\n---&gt; 39 userid = userid_element.text\n     40 userid1.append(userid)\n     41 time.sleep(20)\n\nAttributeError: 'list' object has no attribute 'text'\n</code></pre>\n\n<p>Also,\nI tried with xpath but does not really work:</p>\n\n<pre><code>date2=date.text\ndate1.append(date)\n</code></pre>\n\n<pre><code>\n  File \"&lt;ipython-input-19-8b8e7fb86782&gt;\", line 35\n    date=browser.find_element_by_xpath(''//span[@id= 'ctl00_ContentPlaceHolder1_lblIncDate' ]'')\n                                                ^\nSyntaxError: invalid syntax\n</code></pre>\n"}, {"tags": ["python", "image", "python-imaging-library"], "answers": [{"comments": [{"owner": {"reputation": 2611, "user_id": 11633355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4pV83.png?s=128&g=1", "display_name": "Anna Nevison", "link": "https://stackoverflow.com/users/11633355/anna-nevison"}, "reply_to_user": {"reputation": 85, "user_id": 11058721, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BJ6P-MvaAFs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNMcrBLQOHYMlO-gCfKF98v2NWJZA/mo/photo.jpg?sz=128", "display_name": "new_one", "link": "https://stackoverflow.com/users/11058721/new-one"}, "edited": false, "score": 0, "creation_date": 1566420109, "post_id": 57598767, "comment_id": 101655035, "body": "@new_one can you try it with <code>mode=&#39;RGB</code> - see my updated answer"}, {"owner": {"reputation": 85, "user_id": 11058721, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BJ6P-MvaAFs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNMcrBLQOHYMlO-gCfKF98v2NWJZA/mo/photo.jpg?sz=128", "display_name": "new_one", "link": "https://stackoverflow.com/users/11058721/new-one"}, "edited": false, "score": 0, "creation_date": 1566420720, "post_id": 57598767, "comment_id": 101655289, "body": "I did! Please see my update. Again, thank you so much for your time!!"}, {"owner": {"reputation": 2611, "user_id": 11633355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4pV83.png?s=128&g=1", "display_name": "Anna Nevison", "link": "https://stackoverflow.com/users/11633355/anna-nevison"}, "reply_to_user": {"reputation": 85, "user_id": 11058721, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BJ6P-MvaAFs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNMcrBLQOHYMlO-gCfKF98v2NWJZA/mo/photo.jpg?sz=128", "display_name": "new_one", "link": "https://stackoverflow.com/users/11058721/new-one"}, "edited": false, "score": 0, "creation_date": 1566421300, "post_id": 57598767, "comment_id": 101655479, "body": "@new_one no problem! can you try calling <code>mode=&#39;RGB</code> in the <code>Image.fromarray()</code> function? I updated for that. I can&#39;t find in the documents whether or not the resize from pillow will accept 3D resizing... it seems like it should"}, {"owner": {"reputation": 2611, "user_id": 11633355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4pV83.png?s=128&g=1", "display_name": "Anna Nevison", "link": "https://stackoverflow.com/users/11633355/anna-nevison"}, "reply_to_user": {"reputation": 85, "user_id": 11058721, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BJ6P-MvaAFs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNMcrBLQOHYMlO-gCfKF98v2NWJZA/mo/photo.jpg?sz=128", "display_name": "new_one", "link": "https://stackoverflow.com/users/11058721/new-one"}, "edited": false, "score": 0, "creation_date": 1566422217, "post_id": 57598767, "comment_id": 101655780, "body": "@new_one okay so the <code>.resize</code> can only resize 2 dimensions I guess. Just take out the three entirely and see if the <code>mode = &#39;RGB&#39;</code> gets ride of the unable to process that type of data error that you got when you originally tried to cut the three"}, {"owner": {"reputation": 85, "user_id": 11058721, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BJ6P-MvaAFs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNMcrBLQOHYMlO-gCfKF98v2NWJZA/mo/photo.jpg?sz=128", "display_name": "new_one", "link": "https://stackoverflow.com/users/11058721/new-one"}, "edited": false, "score": 1, "creation_date": 1566423607, "post_id": 57598767, "comment_id": 101656202, "body": "Yesssss!!!! It ran. Took the 3 out and the RGB took care of the rest. You&#39;re the best."}], "tags": [], "owner": {"reputation": 2611, "user_id": 11633355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4pV83.png?s=128&g=1", "display_name": "Anna Nevison", "link": "https://stackoverflow.com/users/11633355/anna-nevison"}, "is_accepted": true, "score": 1, "last_activity_date": 1566422058, "last_edit_date": 1566422058, "creation_date": 1566419122, "answer_id": 57598767, "question_id": 57598489, "link": "https://stackoverflow.com/questions/57598489/pillow-image-convert-typeerror-argument-1-must-be-str-not-int/57598767#57598767", "title": "Pillow Image.convert TypeError: argument 1 must be str, not int", "body": "<p>You changed the code from the original repo incorrectly. This is what they have for <code>org_img</code>:</p>\n\n<pre><code>org_img = scipy.misc.imresize(org_img, (2048, int(org_img.shape[1]*img_scale), 3))\n</code></pre>\n\n<p>The <code>imresize</code> from <code>scipy</code> is since depreciated. If you look at the code and docs for the old <code>scipy</code> function, you can see that they are passing <code>org_img</code> for the array and <code>(2048, int(org_img.shape[1]*img_scale), 3)</code> for the size- i.e. that 3 is part of the tuple specifying the resize- they are not using it as a <code>mode</code> for convert as you are trying to do in your code. </p>\n\n<p>Since this is in 3D, per the 3 dimensions on the resize, the <code>scipy</code> docs say:</p>\n\n<blockquote>\n  <p>For 3-D and 4-D arrays, mode will be set to 'RGB' and 'RGBA' respectively.</p>\n</blockquote>\n\n<p>So you want:</p>\n\n<pre><code>numpy.array(Image.fromarray(org_img, mode='RGB').resize((2048, int(org_img.shape[1]*img_scale))))\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 11058721, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BJ6P-MvaAFs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNMcrBLQOHYMlO-gCfKF98v2NWJZA/mo/photo.jpg?sz=128", "display_name": "new_one", "link": "https://stackoverflow.com/users/11058721/new-one"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 1, "accepted_answer_id": 57598767, "answer_count": 1, "score": 2, "last_activity_date": 1566428669, "creation_date": 1566417678, "last_edit_date": 1566428669, "question_id": 57598489, "link": "https://stackoverflow.com/questions/57598489/pillow-image-convert-typeerror-argument-1-must-be-str-not-int", "title": "Pillow Image.convert TypeError: argument 1 must be str, not int", "body": "<p>I'm trying to run a model from this <a href=\"https://github.com/HzFu/DENet_GlaucomaScreen/blob/master/Demo_DENet_GlaucomaScreen.py\" rel=\"nofollow noreferrer\">repo</a>. and getting the following error: </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"denet_glaucoma_screen/Demo_DENet_GlaucomaScreen.py\", line 72, in &lt;module&gt;\n    org_img = np.array(Image.fromarray(org_img).resize((2048, int(org_img.shape[1] * img_scale))).convert(3))\n  File \"/usr/local/lib/python3.6/dist-packages/PIL/Image.py\", line 975, in convert\n    im = self.im.convert(mode, dither)\nTypeError: argument 1 must be str, not int\n</code></pre>\n\n<p>I believe the part that gives the error is this:</p>\n\n<pre><code>    for lineIdx, file_test in enumerate(file_test_list):\n        temp_txt = [elt.strip() for elt in file_test.split(',')]\n        org_img = np.asarray(image.load_img(os.path.join(data_img_path, \n    temp_txt[0])))\n\n    img_scale = 2048.0 / org_img.shape[0]\n    org_img = np.array(Image.fromarray(org_img).resize((2048, int(org_img.shape[1] * img_scale))).convert(3))\n\n</code></pre>\n\n<p>Looking at <a href=\"https://pillow.readthedocs.io/en/4.2.x/reference/Image.html\" rel=\"nofollow noreferrer\">Image.convert</a> I can't figure out why there would be <code>3</code> over there</p>\n\n<p>I tried to change the <code>3</code> to <code>\"3\"</code>, <code>\"RGB\"</code>, and even take the entire <code>convert</code> off, but I got various errors like <code>unable to process that type of data</code> or something similar.</p>\n\n<ul>\n<li>Update 1:</li>\n</ul>\n\n<p>I tried changing the line:\n<code>org_img = np.array(Image.fromarray(org_img).resize((2048, int(org_img.shape[1] * img_scale))).convert(3))</code><br>\nto<br>\n<code>org_img = np.array(Image.fromarray(org_img).resize((2048, int(org_img.shape[1] *img_scale), 3)))</code><br>\nBut I got the following error:  </p>\n\n<pre><code>   File \"denet_glaucoma_screen/Demo_DENet_GlaucomaScreen.py\", line 74, in &lt;module&gt;\n    img_scale), 3)))\n  File \"/usr/local/lib/python3.6/dist-packages/PIL/Image.py\", line 1745, in resize\n    return self._new(self.im.resize(size, resample, box))\nTypeError: argument 1 must be sequence of length 2, not 3\n</code></pre>\n\n<ul>\n<li>Update 2:\nTried changing the above to:\n<code>org_img = np.array(Image.fromarray(org_img).resize((2048, int(org_img.shape[1] * img_scale), 3)), mode='RGB')</code><br>\nBut I got the following error:  </li>\n</ul>\n\n<pre><code>  File \"denet_glaucoma_screen/Demo_DENet_GlaucomaScreen.py\", line 74, in &lt;module&gt;\n    img_scale), 3)), mode='RGB')\n  File \"/usr/local/lib/python3.6/dist-packages/PIL/Image.py\", line 1745, in resize\n    return self._new(self.im.resize(size, resample, box))\nTypeError: argument 1 must be sequence of length 2, not 3\n</code></pre>\n\n<ul>\n<li>Update 3:\nTried running: </li>\n</ul>\n\n<pre><code>org_img = np.array(Image.fromarray(org_img, mode='RGB').resize((2048, int(org_img.shape[1]*img_scale), 3)))\n</code></pre>\n\n<p>But I got the following error:</p>\n\n<pre><code>  File \"denet_glaucoma_screen/Demo_DENet_GlaucomaScreen.py\", line 73, in &lt;module&gt;\n    org_img = np.array(Image.fromarray(org_img, mode='RGB').resize((2048, int(org_img.shape[1]*img_scale), 3)))\n  File \"/usr/local/lib/python3.6/dist-packages/PIL/Image.py\", line 1745, in resize\n    return self._new(self.im.resize(size, resample, box))\nTypeError: argument 1 must be sequence of length 2, not 3\n</code></pre>\n"}, {"tags": ["python", "pandas", "time-series"], "answers": [{"comments": [{"owner": {"reputation": 2903, "user_id": 1164799, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b38ca88f70d3d8f20004552d64c82c4a?s=128&d=identicon&r=PG&f=1", "display_name": "beginneR", "link": "https://stackoverflow.com/users/1164799/beginner"}, "edited": false, "score": 0, "creation_date": 1566462697, "post_id": 57598534, "comment_id": 101666308, "body": "Thanks! That&#39;s a really cool solution. One short follow-up question: For some reason, adding a new row with a date using <code>at</code> doesn&#39;t work. It says: &quot;cannot reindex from a duplicate axis&quot;. My actual dataset has multiple columns and the index title is timestamp but that&#39;s the only difference compared to the minimal example provided. It&#39;s probably tough to help if you cannot see the data but maybe you know why this happens. Thanks again!"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 3, "last_activity_date": 1566418262, "last_edit_date": 1566418262, "creation_date": 1566417894, "answer_id": 57598534, "question_id": 57598474, "link": "https://stackoverflow.com/questions/57598474/add-number-of-days-until-certain-dates-as-column/57598534#57598534", "title": "Add number of days until certain dates as column", "body": "<h3>With <code>Timedelta</code></h3>\n\n<pre><code>df.assign(\n    y=df.index - df.index.to_series().mask(df.x != 1).bfill()\n)\n\n                       x                 y\n2019-01-01 00:00:00  0.0 -2 days +00:00:00\n2019-01-01 01:00:00  0.0 -2 days +01:00:00\n2019-01-01 02:00:00  0.0 -2 days +02:00:00\n2019-01-01 03:00:00  0.0 -2 days +03:00:00\n2019-01-01 04:00:00  0.0 -2 days +04:00:00\n...                  ...               ...\n2019-01-04 19:00:00  0.0               NaT\n2019-01-04 20:00:00  0.0               NaT\n2019-01-04 21:00:00  0.0               NaT\n2019-01-04 22:00:00  0.0               NaT\n2019-01-04 23:00:00  0.0               NaT\n\n[96 rows x 2 columns]\n</code></pre>\n\n<p>If you want an event at the end... just put it there first</p>\n\n<pre><code>df.at[pd.Timestamp('2019-01-08'), 'x'] = 1\n</code></pre>\n\n<p>Then the same as above</p>\n\n<pre><code>df.assign(\n    y=df.index - df.index.to_series().mask(df.x != 1).bfill()\n)\n\n                       x                 y\n2019-01-01 00:00:00  0.0 -2 days +00:00:00\n2019-01-01 01:00:00  0.0 -2 days +01:00:00\n2019-01-01 02:00:00  0.0 -2 days +02:00:00\n2019-01-01 03:00:00  0.0 -2 days +03:00:00\n2019-01-01 04:00:00  0.0 -2 days +04:00:00\n...                  ...               ...\n2019-01-04 20:00:00  0.0 -4 days +20:00:00\n2019-01-04 21:00:00  0.0 -4 days +21:00:00\n2019-01-04 22:00:00  0.0 -4 days +22:00:00\n2019-01-04 23:00:00  0.0 -4 days +23:00:00\n2019-01-08 00:00:00  1.0   0 days 00:00:00\n\n[97 rows x 2 columns]\n</code></pre>\n\n<p>If you had your heart set on integers</p>\n\n<pre><code>df.assign(\n    y=(\n        df.index - \n        df.index.to_series().mask(df.x != 1).bfill()\n    ).dt.days\n)\n\n                       x  y\n2019-01-01 00:00:00  0.0 -2\n2019-01-01 01:00:00  0.0 -2\n2019-01-01 02:00:00  0.0 -2\n2019-01-01 03:00:00  0.0 -2\n2019-01-01 04:00:00  0.0 -2\n...                  ... ..\n2019-01-04 20:00:00  0.0 -4\n2019-01-04 21:00:00  0.0 -4\n2019-01-04 22:00:00  0.0 -4\n2019-01-04 23:00:00  0.0 -4\n2019-01-08 00:00:00  1.0  0\n\n[97 rows x 2 columns]\n</code></pre>\n"}], "owner": {"reputation": 2903, "user_id": 1164799, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b38ca88f70d3d8f20004552d64c82c4a?s=128&d=identicon&r=PG&f=1", "display_name": "beginneR", "link": "https://stackoverflow.com/users/1164799/beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 57598534, "answer_count": 1, "score": 2, "last_activity_date": 1566418262, "creation_date": 1566417625, "question_id": 57598474, "link": "https://stackoverflow.com/questions/57598474/add-number-of-days-until-certain-dates-as-column", "title": "Add number of days until certain dates as column", "body": "<p>I have a time-series dataset with hourly dates as index. There is one column indicating whether a particular day is an event (1) or not (0). I would like to add a column counting the days down until an event starts. Whenever there is an event, this column should have the value 0. After the event, it should count down again. Of course, all event dates are assumed to be known.</p>\n\n<p>Here is a minimal example where the column of interest ('y') has been added for better understanding. The example also illustrates the fact that although the dataset ends, one has to think about the next event beyond the time considered in the respective dataframe. In this example, there are 4 days until the next event (which is at 2019-01-08).</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndate_range = pd.date_range('01/01/2019 00:00:00','01/04/2019 23:00:00',freq='H')\nx = np.zeros(len(date_range))\ndf = pd.DataFrame(data=x,columns=['x'])\ndf.set_index(date_range,inplace=True)\ndf.iloc[48:72] = 1\ndf['y'] = np.repeat([-2,-1,0,-4],24)\n</code></pre>\n\n<p>I would like to find a way to generate column 'y'. </p>\n"}, {"tags": ["python", "windows"], "owner": {"reputation": 67, "user_id": 10065573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a8c3e775002779e959caf7d4fb09a8?s=128&d=identicon&r=PG&f=1", "display_name": "lara stardust", "link": "https://stackoverflow.com/users/10065573/lara-stardust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566417557, "creation_date": 1566417557, "question_id": 57598465, "link": "https://stackoverflow.com/questions/57598465/how-do-i-make-python-ask-to-be-the-default-program-for-opening-media-files", "title": "How do I make python ask to be the default program for opening media files", "body": "<p>I'm building a media player to handle ogg files using python. the media player is done, but now I would like it to be able to ask if the user would like it as their default player for audio files.</p>\n\n<p>I'm not too worried about the actual asking, but how do I make python set that up?</p>\n\n<p>In essence, how do I make python say to windows, every time the user opens bob.ogg, launch mediaplayer.exe?</p>\n\n<p>thanks a lot</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 455, "user_id": 8261605, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/nY7TU.png?s=128&g=1", "display_name": "Ghoti", "link": "https://stackoverflow.com/users/8261605/ghoti"}, "edited": false, "score": 0, "creation_date": 1566417602, "post_id": 57598439, "comment_id": 101654105, "body": "Check this out: <a href=\"https://docs.python.org/3/tutorial/floatingpoint.html\" rel=\"nofollow noreferrer\">docs.python.org/3/tutorial/floatingpoint.html</a>"}, {"owner": {"reputation": 969, "user_id": 326242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35cde28dc376b1403cf4de6cbebc80e5?s=128&d=identicon&r=PG", "display_name": "Andrew Koster", "link": "https://stackoverflow.com/users/326242/andrew-koster"}, "edited": false, "score": 0, "creation_date": 1566419199, "post_id": 57598439, "comment_id": 101654705, "body": "I had a working answer to this, but some trigger-happy moderator closed the question. Nice."}], "owner": {"reputation": 19, "user_id": 11959019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e55539ce8a3aa2dec60c24cbb2a2117?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/11959019/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1566417729, "answer_count": 0, "score": 0, "last_activity_date": 1566417809, "creation_date": 1566417443, "last_edit_date": 1566417809, "question_id": 57598439, "link": "https://stackoverflow.com/questions/57598439/new-to-coding-not-sure-why-i-get-a-weird-output", "closed_reason": "Duplicate", "title": "New to coding, not sure why i get a weird output", "body": "<p>I want to be able to work out how much change in coins is needed for each amount I enter, EG (1.74 would be 1 \u00a31, 1 50p, 1 20p and 4 1ps). This was going to be the function to work out the 20ps necessary. I know I could iterate through a list and it would make the code below easier and neater but just wanted to see if this way would work as it was how I first thought to do it.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\ndef num_20ps(x):\n    pounds = x // 1\n    num1 = x - pounds\n    if num1 &gt;= 0.50:\n        n50 = num1 / 0.50\n        n50s = int(n50)\n        num2 = num1 - (0.5 * n50s)\n        if num2 &gt;= 0.20:\n            n20 = num2 // 0.20\n            return n20\n\n\nprint(num_20ps(1.7))\n\n</code></pre>\n\n<p>What I cant understand is why when I print my num2 variable I get an output of 0.19999999999999996. Where did the 0.00000000000000004 randomly go?</p>\n"}, {"tags": ["python", "macos", "openpose"], "comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1566427825, "post_id": 57598419, "comment_id": 101657305, "body": "Did you try to <code>source ~&#47;.bashrc</code>?"}, {"owner": {"reputation": 476, "user_id": 2389196, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/d4eb3798c22c818f8eff4ee36b23b4d8?s=128&d=identicon&r=PG", "display_name": "AlexAcc", "link": "https://stackoverflow.com/users/2389196/alexacc"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1566472693, "post_id": 57598419, "comment_id": 101671688, "body": "Yes, and I get:     /Users/sm/.bashrc:export:13: not valid in this context:      /Users/sm/POCs/openpose/build/python"}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1566492501, "post_id": 57598419, "comment_id": 101682789, "body": "Please add the output of <code>sudo make install</code>."}], "owner": {"reputation": 476, "user_id": 2389196, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/d4eb3798c22c818f8eff4ee36b23b4d8?s=128&d=identicon&r=PG", "display_name": "AlexAcc", "link": "https://stackoverflow.com/users/2389196/alexacc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566417347, "creation_date": 1566417347, "question_id": 57598419, "link": "https://stackoverflow.com/questions/57598419/import-error-openpose-in-python-project-with-mac-os", "title": "Import Error Openpose in Python project with Mac OS", "body": "<p>I have installed OpenPose in MacOSX, and I can execute the examples like this:</p>\n\n<pre><code>'./build/examples/openpose/openpose.bin --video examples/media/video.avi'\n</code></pre>\n\n<p>But <strong>I cannot import/use the Openpose library in Python projects.</strong></p>\n\n<p>In Openpose folder I've done: </p>\n\n<pre><code>cd build/python\nsudo make install\n</code></pre>\n\n<p>And export variable:\nvim ~/.bashrc</p>\n\n<pre><code>#(Add this line to the end of the file)\nexport PYTHONPATH=/path/to/openpose/build/python:\n</code></pre>\n\n<p>But when I try to import from Python console:</p>\n\n<pre><code>\u279c python\nPython 2.7.10 (default, Oct  6 2017, 22:29:07)\n[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import openpose\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named openpose\n</code></pre>\n\n<p>Any ideas on how to solve this to be able to use Openpose from a Python project?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "mysql-connector-python"], "comments": [{"owner": {"reputation": 5764, "user_id": 9374673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6cBkp.jpg?s=128&g=1", "display_name": "Mihai Chelaru", "link": "https://stackoverflow.com/users/9374673/mihai-chelaru"}, "edited": false, "score": 0, "creation_date": 1566420121, "post_id": 57598406, "comment_id": 101655042, "body": "Are you doing <a href=\"https://dev.mysql.com/doc/refman/8.0/en/insert-on-duplicate.html\" rel=\"nofollow noreferrer\"><code>INSERT ... ON DUPLICATE KEY UPDATE</code></a>? Is your expected result two numbers, one for the rows that were just inserted, versus a second number of rows which were updated instead?"}, {"owner": {"reputation": 67, "user_id": 6458446, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oqnh6fR7g0E/AAAAAAAAAAI/AAAAAAAAAEU/tv4clvxt0dQ/photo.jpg?sz=128", "display_name": "brian cronrath", "link": "https://stackoverflow.com/users/6458446/brian-cronrath"}, "reply_to_user": {"reputation": 5764, "user_id": 9374673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6cBkp.jpg?s=128&g=1", "display_name": "Mihai Chelaru", "link": "https://stackoverflow.com/users/9374673/mihai-chelaru"}, "edited": false, "score": 0, "creation_date": 1566420376, "post_id": 57598406, "comment_id": 101655138, "body": "Yeah exactly, and I think the exact statement returned to me doesn&#39;t need to necessarily say if it updated or not, but if it could at least return to me what I would see in say, manually running the statement in a mysql client itself, which would be a number of rows inserted versus the count of duplicates, that would be all I&#39;m looking for.  Just that message or the values contained in that message that mysql returns is fine."}], "owner": {"reputation": 67, "user_id": 6458446, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oqnh6fR7g0E/AAAAAAAAAAI/AAAAAAAAAEU/tv4clvxt0dQ/photo.jpg?sz=128", "display_name": "brian cronrath", "link": "https://stackoverflow.com/users/6458446/brian-cronrath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566419074, "creation_date": 1566417255, "last_edit_date": 1566419074, "question_id": 57598406, "link": "https://stackoverflow.com/questions/57598406/using-the-python-mysql-connector-module-how-can-i-see-the-result-message-of-an", "title": "Using the python mysql connector module, how can I see the result message of an insert into statement?", "body": "<p>Specifically I'm referring to the results of when I commit an insert statement using this:  <a href=\"https://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlconnection.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlconnection.html</a></p>\n\n<p>So for example if I have the following (the sql variable here contains an INSERT INTO statement):</p>\n\n<pre><code>cursor = cnx.cursor()\ncursor.executemany(sql, preload_data)\ncnx.commit()\ncursor.close()\n</code></pre>\n\n<p>After that cnx.commit() how can I see the results regarding what the number of rows inserted versus the number of rows updated are?</p>\n"}, {"tags": ["python", "excel", "openpyxl"], "comments": [{"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1566469531, "post_id": 57598402, "comment_id": 101669918, "body": "<code>row_offset=1</code> looks wrong."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11958741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/458965a8a30e8b3c5fd5d1d2e987c837?s=128&d=identicon&r=PG&f=1", "display_name": "denmust", "link": "https://stackoverflow.com/users/11958741/denmust"}, "edited": false, "score": 1, "creation_date": 1566503382, "post_id": 57609683, "comment_id": 101687320, "body": "This seems to work, looks like this is the proper way to do it! Thanks a lot!"}], "tags": [], "owner": {"reputation": 322, "user_id": 11907485, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/32ab21d738c0449fb4d5f71c0b66b366?s=128&d=identicon&r=PG", "display_name": "temp123", "link": "https://stackoverflow.com/users/11907485/temp123"}, "is_accepted": true, "score": 2, "last_activity_date": 1566478903, "last_edit_date": 1566478903, "creation_date": 1566477963, "answer_id": 57609683, "question_id": 57598402, "link": "https://stackoverflow.com/questions/57598402/how-to-create-a-new-outlook-email-for-every-row-of-excel-using-python/57609683#57609683", "title": "How to create a new Outlook email for every row of Excel using Python", "body": "<p>My suggestion would be to wrap every row into an object, and push the objects into the list <code>info</code> like so:</p>\n\n<pre><code>class Recipient():\n    def __init__(self, w_order, name, email):\n        self.w_order = w_order\n        self.name = name\n        self.email = email\n\n\ndef get_info():\n\n    loc = \"Excel_file_location.xlsx\"\n    wb = load_workbook(loc)\n\n    info = []\n    ws = wb[wb.sheetnames[0]]\n    ws = wb.active\n\n    for row in range(2, 5):\n        rec = Recipient(\"\", \"\", \"\")\n        for col in range(ord('A'), ord('D')):\n            if chr(col) == 'A':\n                rec.w_order = ws[chr(col) + str(row)].value\n            elif chr(col) == 'B':\n                rec.name = ws[chr(col) + str(row)].value\n            elif chr(col) == 'C':\n                rec.email = ws[chr(col) + str(row)].value\n\n        info.append(rec)\n\n\n    return info\n</code></pre>\n\n<p>From there on you could access the information from <code>get_info()</code> in your mail function in a loop like so:</p>\n\n<pre><code>def Emailer(text1, subject, recipient): \n\n    import win32com.client as win3\n\n    outlook = win32.Dispatch('outlook.application')\n    mail = outlook.CreateItem(0)\n    mail.To = recipient\n    mail.Subject = subject\n    mail.HtmlBody = text1\n    mail.Display(False)\n\ndata = get_info()\n\n\nfor i in range(0, len(data)):\n    Emailer(text, \"Completed WO {0} | {1}\".format(data[i].w_order, data[i].name), data[i].email)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11958741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/458965a8a30e8b3c5fd5d1d2e987c837?s=128&d=identicon&r=PG&f=1", "display_name": "denmust", "link": "https://stackoverflow.com/users/11958741/denmust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 57609683, "answer_count": 1, "score": 2, "last_activity_date": 1566478903, "creation_date": 1566417222, "last_edit_date": 1566420216, "question_id": 57598402, "link": "https://stackoverflow.com/questions/57598402/how-to-create-a-new-outlook-email-for-every-row-of-excel-using-python", "title": "How to create a new Outlook email for every row of Excel using Python", "body": "<p>I'm trying to use an Excel sheet to populate an Outlook email draft and have every new row create a new email. I'm trying to achieve this using the openpyxl library.\nThe Excel file looks something like this.\n<a href=\"https://i.stack.imgur.com/XTkkr.jpg\" rel=\"nofollow noreferrer\">Excel Example</a></p>\n\n<p>I've tried to iterate over each row using list comprehension but the results are pretty much the same, I get one email created with the first row of data and but the rest of the information is not used. The only way I can use the information now is to change the row_offset number by myself, but obviously that doesn't work for doing many rows.</p>\n\n<h1>I get the information from the Excel file using the following function</h1>\n\n<p>def get_info():</p>\n\n<pre><code>loc = \"Excel_file_location.xlsx\"\nwb = load_workbook(loc)\n\ninfo = []\nws = wb[wb.sheetnames[0]]\nws = wb.active\n</code></pre>\n\n<h1>Get data starting at row 2. Possible issue here?</h1>\n\n<pre><code>for row in ws.iter_rows(row_offset=1):\n    for cell in row:\n        info.append(str(cell.value))\nreturn info\n</code></pre>\n\n<p>data = get_info()</p>\n\n<h1>Text body of email with Excel file data</h1>\n\n<p>text = \"Hello, {1}! Work order #{0} is complete\".format(data[0], data<a href=\"https://i.stack.imgur.com/XTkkr.jpg\" rel=\"nofollow noreferrer\">1</a>)</p>\n\n<h1>Create email function</h1>\n\n<p>def Emailer(text1, subject, recipient):\n    import win32com.client as win32</p>\n\n<pre><code>outlook = win32.Dispatch('outlook.application')\nmail = outlook.CreateItem(0)\nmail.To = recipient\nmail.Subject = subject\nmail.HtmlBody = text1\nmail.Display(False)\n</code></pre>\n\n<p>Afterwards I would call on the Emailer function using something like</p>\n\n<p>Emailer(text, \"Completed WO {0} | {1}\".format(data[0], data<a href=\"https://i.stack.imgur.com/XTkkr.jpg\" rel=\"nofollow noreferrer\">1</a>), data[2])</p>\n\n<p>But I'm stumped on how to make this function work separately for every row of an Excel sheet. As of now it will only keep doing writing the same email over and over again without reading the rest of the rows.</p>\n"}, {"tags": ["python", "pandas", "rolling-computation"], "answers": [{"tags": [], "owner": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "is_accepted": false, "score": 1, "last_activity_date": 1566417752, "creation_date": 1566417752, "answer_id": 57598505, "question_id": 57598355, "link": "https://stackoverflow.com/questions/57598355/calculating-median-using-rolling-window-in-pandas-across-multiple-rows-and-colum/57598505#57598505", "title": "calculating median using rolling window in pandas across multiple rows and columns", "body": "<p>Just don't use a column reference</p>\n\n<pre><code>df.rolling('2s').median()\n\n                         B       c       d\n2013-01-01 09:00:00     0.0     2.0     2.0\n2013-01-01 09:00:02     1.0     4.0     8.0\n2013-01-01 09:00:03     1.5     5.5     7.5\n2013-01-01 09:00:05     NaN     8.0     5.0\n2013-01-01 09:00:06     4.0     8.5     7.0\n</code></pre>\n\n<p>Note if you calculate the median for just 2 elements it returns the same result as the mean would. This is because there cannot be any median calculated for 2 elements since it is defined as the element that seperates a list of elements in higher and lower values.</p>\n\n<pre><code>df.rolling('2s').mean()\n\n                          B      c       d\n2013-01-01 09:00:00     0.0     2.0     2.0\n2013-01-01 09:00:02     1.0     4.0     8.0\n2013-01-01 09:00:03     1.5     5.5     7.5\n2013-01-01 09:00:05     NaN     8.0     5.0\n2013-01-01 09:00:06     4.0     8.5     7.0\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 9880430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b0847c7e43bb163df39667a5d4d1ba?s=128&d=identicon&r=PG&f=1", "display_name": "Chen", "link": "https://stackoverflow.com/users/9880430/chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1566417752, "creation_date": 1566417044, "last_edit_date": 1566417211, "question_id": 57598355, "link": "https://stackoverflow.com/questions/57598355/calculating-median-using-rolling-window-in-pandas-across-multiple-rows-and-colum", "title": "calculating median using rolling window in pandas across multiple rows and columns", "body": "<p>Have a dataset with 5 rows and 3 columns. Index is resampled at 2 seconds. So I want to calculate the rolling median at  frequency =2.</p>\n\n<p>so while calculating the median at frequency 2 it should look for first 2 rows and all 3 columns like B, c and d to come up with a median. Similarly the second window should consider both rows and all 3 columns B ,c and d to come up with the median.</p>\n\n<pre><code>df = pd.DataFrame({'B': [0, 1, 2, np.nan, 4],'c': [2,4,7,8,9],'d': [2,8,7,5,9]},\n               index = [pd.Timestamp('20130101 09:00:00'),\n                        pd.Timestamp('20130101 09:00:02'),\n                        pd.Timestamp('20130101 09:00:03'),\n                        pd.Timestamp('20130101 09:00:05'),\n                        pd.Timestamp('20130101 09:00:06')])\n</code></pre>\n\n<p>In pandas we can pass only one column in rolling window , how to pass multiple columns. so that it looks for all the elements present in that rows amongst all columns.</p>\n\n<pre><code>df.B.rolling('2s').median()\n</code></pre>\n\n<p>I expected the output to be :</p>\n\n<pre><code>2013-01-01 09:00:00     Nan\n\n2013-01-01 09:00:02     1.0\n\n2013-01-01 09:00:03      5.5\n</code></pre>\n\n<p>and so on</p>\n\n<p>how can we pass multiple columns in the pandas rolling function</p>\n"}]