[{"tags": ["python", "python-3.x", "anaconda"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1565827516, "post_id": 57503399, "comment_id": 101475564, "body": "The Anaconda distribution of Python is convenient and comes packed with and provides easy access to cool stuff, including cool stats stuff, but you do not <i>need</i> Anaconda for that.  To the best of my knowledge, there isn&#39;t anything that runs on Anaconda but not on other distributions of CPython, and I can&#39;t offhand name a Python package that is available through the <code>conda</code> package-management system but not through <code>pip</code> (though there probably are some).  Anaconda is a convenience, not a necessity."}, {"owner": {"reputation": 381, "user_id": 9078613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28a08871ca7f2846b67f78cbb2275b61?s=128&d=identicon&r=PG&f=1", "display_name": "paul41", "link": "https://stackoverflow.com/users/9078613/paul41"}, "edited": false, "score": 1, "creation_date": 1565827679, "post_id": 57503399, "comment_id": 101475588, "body": "You can have both installed without issue. Anaconda comes with many packages already installed and can make things easier, but it isn&#39;t required. For example when you talk about data frames you will use Pandas. Anaconda comes with Pandas already installed. If you don&#39;t use Anaconda you can install Pandas into a virtual environment with <code>pip install pandas</code>. So it is really up to you if you want to use Anaconda or not, and/or make it your default. There is no right or wrong answer here."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1565827848, "post_id": 57503399, "comment_id": 101475613, "body": "&quot;that to manipulate data frames and other cool stats stuff, you need Anaconda&quot; No, you don&#39;t. You need the <code>pandas</code> package installed. the Anaconda <i>Python distribution</i> comes with <code>pandas</code> (and a whole lot of other libraries) pre-installed, along with the virtual-environment/package-management system <code>conda</code>. On windows, for this sort of thing, it is generally recommended to simply use the anaconda distribution. If you&#39;d like, go ahead an uninstall the previous installation."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1565828730, "creation_date": 1565828730, "answer_id": 57503553, "question_id": 57503399, "link": "https://stackoverflow.com/questions/57503399/installing-anacondas-before-python/57503553#57503553", "title": "Installing Anacondas before Python", "body": "<blockquote>\n  <p>I understand that Question 1 is asking me essentially do you want this version as your default version of Python.</p>\n</blockquote>\n\n<p>I guess that depends on what you mean by \"default version of Python\".  This option will do exactly what it says, and as a result, the Python in the Anaconda distribution will be available to be found via a PATH search, and it will initially appear at the beginning of the PATH.  Subsequent installation of other software could put another Python ahead of Anaconda in the PATH.</p>\n\n<blockquote>\n  <p>For Question 2, does Anaconda install its own version of Python?</p>\n</blockquote>\n\n<p>Anaconda <em>is</em> Python.  More precisely, Anaconda is a distribution of standard CPython that comes with a bunch of extra packages pre-installed and some convenient extra tools that are specific to it.</p>\n\n<blockquote>\n  <p>Should I uninstall my version of Python 3.7?</p>\n</blockquote>\n\n<p>You do not need to uninstall your previous version, but if you select both of the options offered to you then it will probably go largely or completely unused.  One thing to watch out for, though, is that you're installing Anaconda 3 (which packages Python 3) as opposed to Anaconda 2 (which packages Python 2).</p>\n\n<blockquote>\n  <p>What is this asking?</p>\n</blockquote>\n\n<p>This alternative provides for a different sense of \"default Python\" than the other does: it adds or modifies entries in the Windows registry that identify Anaconda as the system's default Python.</p>\n\n<blockquote>\n  <p>In essence, what do people recommend I check? 1 and 2, just 2, just 1, or none?</p>\n</blockquote>\n\n<p>I would suggest checking both.  I would furthermore suggest not bothering with another Python, unless you need both a Python 3 and a Python 2.</p>\n"}], "owner": {"reputation": 787, "user_id": 4110765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4452a8699825258c201dba1594b278d9?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Armstrong", "link": "https://stackoverflow.com/users/4110765/jack-armstrong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 57503553, "answer_count": 1, "score": 0, "last_activity_date": 1565828730, "creation_date": 1565827173, "question_id": 57503399, "link": "https://stackoverflow.com/questions/57503399/installing-anacondas-before-python", "title": "Installing Anacondas before Python", "body": "<p>I am brand new to Python. I recently installed <code>python 3.7</code> and Visual Code. However, I learned that to manipulate data frames and other cool stats stuff, you need Anaconda. So I went and downloaded Anaconda from <a href=\"https://repo.anaconda.com/archive/\" rel=\"nofollow noreferrer\">here</a>. This link is the directory of Anaconda downloads with different versions for OS. I downloaded the 64-bit Windows <code>.exe</code> file.</p>\n\n<p>In installing it, it is asking me two questions with check boxes:</p>\n\n<ol>\n<li>Add Anaconda to my PATH environment variable</li>\n</ol>\n\n<p><em>Not recommended. Instead open Anaconda with the Windows Start menu and select \"Anaconda (64-bit)\". This \"add to PATH\" option makes Anaconda get found before previously installed software, but may cause problems requiring you to uninstall and reinstall Anaconda.</em></p>\n\n<ol start=\"2\">\n<li>Register Anaconda as my default Python 3.7</li>\n</ol>\n\n<p><em>This will allow other programs, such as Python tools for Visual Studio PyCharm, Wing IDE, PyDev, and MSI binary packages, to automatically detect Anaconda as the primary Python 3.7 on the system.</em></p>\n\n<p>I understand that Question 1 is asking me essentially do you want this version as your default version of Python. My first thought was yes, but then said no, what if Python gets updated. </p>\n\n<p>For Question 2, does Anaconda install its own version of Python? Should I uninstall my version of Python 3.7? What is this asking?</p>\n\n<p>In essence, what do people recommend I check? 1 and 2, just 2, just 1, or none? How do the options differ?</p>\n"}, {"tags": ["python", "python-3.x", "optimization", "least-squares"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1565829981, "post_id": 57503397, "comment_id": 101475933, "body": "You aren&#39;t passing a function. You are passing the result of calling a function, <code>msecost(PSI, y, X, W, q, m)</code>, which apparently is a <code>numpy.ndarray</code>. So maybe just pass the actual function, <code>fun=msecost</code>"}, {"owner": {"reputation": 59, "user_id": 11813316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc5b8915fd93ef1187b3930a7a5d3dd?s=128&d=identicon&r=PG&f=1", "display_name": "Azertux0", "link": "https://stackoverflow.com/users/11813316/azertux0"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1565859635, "post_id": 57503397, "comment_id": 101482396, "body": "When <code>res_PSI = least_squares(fun=msecost, x0=PSI, ...) </code> is used, it is saiying : <code>return np.atleast_1d(fun(x, *args, **kwargs)) TypeError: msecost() missing 5 required positional arguments: &#39;y&#39;, &#39;X&#39;, &#39;W&#39;, &#39;q&#39;, and &#39;m&#39; </code>"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 11813316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc5b8915fd93ef1187b3930a7a5d3dd?s=128&d=identicon&r=PG&f=1", "display_name": "Azertux0", "link": "https://stackoverflow.com/users/11813316/azertux0"}, "edited": false, "score": 0, "creation_date": 1565859497, "post_id": 57503801, "comment_id": 101482350, "body": "When <code>res_PSI = least_squares(fun=msecost, x0=PSI, ...) </code>is used, it is saiying :  ```   return np.atleast_1d(fun(x, *args, **kwargs)) TypeError: msecost() missing 5 required positional arguments: &#39;y&#39;, &#39;X&#39;, &#39;W&#39;, &#39;q&#39;, and &#39;m&#39; ```"}, {"owner": {"reputation": 59, "user_id": 11813316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc5b8915fd93ef1187b3930a7a5d3dd?s=128&d=identicon&r=PG&f=1", "display_name": "Azertux0", "link": "https://stackoverflow.com/users/11813316/azertux0"}, "edited": false, "score": 0, "creation_date": 1565860575, "post_id": 57503801, "comment_id": 101482733, "body": "the arguments of callable function <code>msecost</code> where missing.   The final minimazition function is :  <code>res_PSI = least_squares(fun=msecost, x0=PSI, jac=&#39;2-point&#39;, bounds=(-np.inf, np.inf), method=&#39;lm&#39;, ftol=1e-10,                         xtol=1e-10, gtol=1e-10, max_nfev=4000,args=(y, X, W, q,m))</code>  and it works, thank you very much!!"}], "tags": [], "owner": {"reputation": 5396, "user_id": 5179748, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N6Pn6ac0-tQ/AAAAAAAAAAI/AAAAAAAAB2o/LLcs2JK0DcU/photo.jpg?sz=128", "display_name": "M Newville", "link": "https://stackoverflow.com/users/5179748/m-newville"}, "is_accepted": true, "score": 0, "last_activity_date": 1565831844, "creation_date": 1565831844, "answer_id": 57503801, "question_id": 57503397, "link": "https://stackoverflow.com/questions/57503397/object-is-not-callable-in-function-of-least-squares-how-to-make-it-callable/57503801#57503801", "title": "object is not callable in function of least_squares, how to make it callable?", "body": "<p>You need to pass the reference of the function,  so</p>\n\n<pre><code>res_PSI = least_squares(fun=msecost, x0=PSI, ...)\n</code></pre>\n\n<p>That is, the fit wants to call your <code>msecost</code> function with various parameter values.  When you use</p>\n\n<pre><code>res_PSI = least_squares(fun=msecost(PSI, y, X, W, q, m), x0=PSI, ...) # Nope!\n</code></pre>\n\n<p>that sets the ndarray result of calling <code>msecost()</code> as the <em>function</em> -- that is why the exceptions are complaining about the ndarray object not being \"callable\"</p>\n"}], "owner": {"reputation": 59, "user_id": 11813316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc5b8915fd93ef1187b3930a7a5d3dd?s=128&d=identicon&r=PG&f=1", "display_name": "Azertux0", "link": "https://stackoverflow.com/users/11813316/azertux0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "accepted_answer_id": 57503801, "answer_count": 1, "score": 0, "last_activity_date": 1565831844, "creation_date": 1565827145, "question_id": 57503397, "link": "https://stackoverflow.com/questions/57503397/object-is-not-callable-in-function-of-least-squares-how-to-make-it-callable", "title": "object is not callable in function of least_squares, how to make it callable?", "body": "<p>Trying to run a <code>least_squares</code> function, i am constantly facing the same error. </p>\n\n<p>The object is never callable what ever the type of the return, from a <code>tulpe</code> to a <code>ndarray</code></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nres_PSI = least_squares(fun=msecost(PSI, y, X, W, q, m), x0=PSI, jac='2-point', bounds=(-np.inf, np.inf), method='lm', ftol=1e-10,\n                        xtol=1e-10, gtol=1e-10, max_nfev=4000)\n</code></pre>\n\n<p>The variables <code>y</code>, <code>X</code>, <code>W</code>, <code>q</code> and <code>m</code> are input variables. <code>PSI</code> is an output variable from another function actually used in <code>msecost</code>.</p>\n\n<p>The stackoverflow is giving this :</p>\n\n<pre><code>  File \"C:\\Program Files\\JetBrains\\PyCharm 2019.2\\helpers\\pydev\\pydevd.py\", line 2060, in &lt;module&gt;\n    main()\n  File \"C:\\Program Files\\JetBrains\\PyCharm 2019.2\\helpers\\pydev\\pydevd.py\", line 2054, in main\n    globals = debugger.run(setup['file'], None, None, is_module)\n  File \"C:\\Program Files\\JetBrains\\PyCharm 2019.2\\helpers\\pydev\\pydevd.py\", line 1405, in run\n    return self._exec(is_module, entry_point_fn, module_name, file, globals, locals)\n  File \"C:\\Program Files\\JetBrains\\PyCharm 2019.2\\helpers\\pydev\\pydevd.py\", line 1412, in _exec\n    pydev_imports.execfile(file, globals, locals)  # execute the script\n  File \"C:\\Program Files\\JetBrains\\PyCharm 2019.2\\helpers\\pydev\\_pydev_imps\\_pydev_execfile.py\", line 18, in execfile\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\n  File \"C:/Users/Azerty/PycharmProjects/OptionsTest/venv37/HARST/HAR.py\", line 27, in &lt;module&gt;\n    x = HARST.mrstar(y=dependent_variable,X=regressors,W=dummies,q=transition,T=T,nX=nX,nW=nW,M=M,rob=rob,flag=flag,sig=sig)\n  File \"C:\\Users\\Azerty\\PycharmProjects\\OptionsTest\\venv37\\HARST\\HARST.py\", line 216, in mrstar\n    alpha, llambda, beta, gamma, c, fX, yhat, ehat, G = parestlm(y, X, W, q, T, nX, nW, m, gamma_0, c_0)\n  File \"C:\\Users\\Azerty\\PycharmProjects\\OptionsTest\\venv37\\HARST\\HARST.py\", line 335, in parestlm\n    xtol=1e-10, gtol=1e-10, max_nfev=4000)\n  File \"C:\\Users\\Azerty\\PycharmProjects\\OptionsTest\\venv37\\lib\\site-packages\\scipy\\optimize\\_lsq\\least_squares.py\", line 807, in least_squares\n    f0 = fun_wrapped(x0)\n  File \"C:\\Users\\Azerty\\PycharmProjects\\OptionsTest\\venv37\\lib\\site-packages\\scipy\\optimize\\_lsq\\least_squares.py\", line 802, in fun_wrapped\n    return np.atleast_1d(fun(x, *args, **kwargs))\nTypeError: 'numpy.ndarray' object is not callable\n</code></pre>\n\n<p>The actual <code>msecost</code> function is this:</p>\n\n<pre><code>def msecost(PSI, y, X, W, q, m):\n    T, nX = X.shape\n    nW = W.shape[1]\n\n    gamma= getpar(PSI)[0][0]\n    c = getpar(PSI)[0][1]\n\n    Z = np.concatenate([X, W],axis=1)\n    fX = np.zeros((T, m))\n    dfX = np.zeros((T, m))\n    for i in range(m):\n        fX[:, i] = siglog(gamma * (q - c))\n        dfX[:, i] = dsiglog(fX[:, i])\n        Z = np.concatenate([Z, np.tile(fX[:, i], (nX, 1)).transpose() * X],axis=1)  # repmat\n    theta = np.linalg.pinv(Z.transpose() @ Z) @ Z.transpose() @ y\n    alpha = theta[0:nX]\n    if not (W.all):\n        beta = []\n    else:\n        beta = theta[nX:nX + nW]\n    llambda = theta[nX + nW:].reshape(nX, m, order='F').copy()  # reshape\n    if not (W.all):\n        yhat = X @ alpha + np.sum(fX @ llambda.transpose() * X, axis=1)\n    else:\n        yhat = X @ alpha + W @ beta + np.sum(fX @ llambda.transpose() * X, axis=1)\n    ehat = y - yhat\n    f = np.sum(ehat ** 2) / T\n\n    ggamma, gc = gradG(PSI, X, q, llambda, dfX, m)\n\n    J = np.sum(-2 * np.tile(ehat, (2 * m,1 )).transpose() * np.concatenate([ggamma, gc],axis=1) / T)\n\n    return np.array([f, J])\n</code></pre>\n\n<p>I excpect from <code>least_squares</code> that it takes <code>msecost</code> as a callable function and minimaze the returns <code>f</code> and <code>J</code> by using <code>PSI</code> as variable. I've absolutly no other constrain. Am I doing it wrong ?</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565827369, "post_id": 57503358, "comment_id": 101475542, "body": "what do you use: &#39;<code>tkinter</code>, <code>PyQt</code>, <code>wxPython</code>, <code>PyGTK</code>, <code>Kivy</code> or other module ?"}, {"owner": {"reputation": 93, "user_id": 11717520, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ck9BorfR-H8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGWgIqkbq73v0vRvjId9QVDsSq3w/photo.jpg?sz=128", "display_name": "rafa_rrayes", "link": "https://stackoverflow.com/users/11717520/rafa-rrayes"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565827640, "post_id": 57503358, "comment_id": 101475580, "body": "tkinter, thats what i imported"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 1, "creation_date": 1565827738, "post_id": 57503358, "comment_id": 101475594, "body": "Please show us a complete code snippet that shows the problem. In other words, read and follow <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>. For example, your code line is missing a right parenthesis."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565827806, "post_id": 57503358, "comment_id": 101475606, "body": "you didn&#39;t show full code so we don&#39;t know what you import. On Linux all buttons are gray but when I use <code>red</code> then I see it. But on some systems it may never work."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565827848, "post_id": 57503358, "comment_id": 101475612, "body": "put code in question. In comment it will be unreadable."}, {"owner": {"reputation": 93, "user_id": 11717520, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ck9BorfR-H8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGWgIqkbq73v0vRvjId9QVDsSq3w/photo.jpg?sz=128", "display_name": "rafa_rrayes", "link": "https://stackoverflow.com/users/11717520/rafa-rrayes"}, "edited": false, "score": 0, "creation_date": 1565828009, "post_id": 57503358, "comment_id": 101475645, "body": "added. filler filler filler"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565828258, "post_id": 57503358, "comment_id": 101475682, "body": "as I know on some system it may not work. You can try to use <code>ttk.Button</code> instead of <code>tkinter.Button</code>. OR If you have to problem to change normal <code>background</code> then you can use mouse events <code>Enter</code>, <code>Leave</code> to check normal background when you mouse hover it. GitHub: <a href=\"https://github.com/furas/python-examples/tree/master/tkinter/__button__/button-hover-color\" rel=\"nofollow noreferrer\">button-hover-color</a>"}], "answers": [{"comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1565841191, "post_id": 57504101, "comment_id": 101477691, "body": "You don&#39;t have to do this -- that&#39;s exactly what the <code>activebackground</code> option is for."}, {"owner": {"reputation": 18119, "user_id": 9284423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zakui.png?s=128&g=1", "display_name": "Henry Yik", "link": "https://stackoverflow.com/users/9284423/henry-yik"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1565841503, "post_id": 57504101, "comment_id": 101477740, "body": "@BryanOakley I thought <code>activebackground</code> changes the colour only when the button is being pressed, or does it work differently when not on windows?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1565844310, "post_id": 57504101, "comment_id": 101478168, "body": "This is what the official documentation says: <i>Specifies background color to use when drawing active elements. An element (a widget or portion of a widget) is active if the mouse cursor is positioned over the element and pressing a mouse button will cause some action to occur.</i>."}, {"owner": {"reputation": 18119, "user_id": 9284423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zakui.png?s=128&g=1", "display_name": "Henry Yik", "link": "https://stackoverflow.com/users/9284423/henry-yik"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1565844892, "post_id": 57504101, "comment_id": 101478274, "body": "I see. I was looking into effbot and the definition is <i>What background color to use when the button is active</i>, so I was under the impression that by <code>active</code> it has to be clicked. Still, from running the actual script on windows, <code>activebackground</code> only activate when the button is actually being pressed. Hovering does not trigger the action."}], "tags": [], "owner": {"reputation": 18119, "user_id": 9284423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zakui.png?s=128&g=1", "display_name": "Henry Yik", "link": "https://stackoverflow.com/users/9284423/henry-yik"}, "is_accepted": false, "score": 0, "last_activity_date": 1565844998, "last_edit_date": 1565844998, "creation_date": 1565835199, "answer_id": 57504101, "question_id": 57503358, "link": "https://stackoverflow.com/questions/57503358/why-is-my-button-not-getting-grey-nor-with-a-border/57504101#57504101", "title": "Why is my button not getting grey nor with a border?", "body": "<p>The proper way to do it is to set <code>activebackground</code> of the <code>Button</code> widget, however on windows this doesn't seem to work as expected. A workaround will be  binding two events to the widget, which is <code>&lt;Enter&gt;</code> and <code>&lt;Leave&gt;</code>. In this case, it will be something like this:</p>\n\n<pre><code>import tkinter as tk\n\nroot = tk.Tk()\n\na = tk.Button(root,text=\"Hover me\")\na.pack()\n\na.bind(\"&lt;Enter&gt;\",lambda e: a.config(bg=\"red\"))\na.bind(\"&lt;Leave&gt;\",lambda e: a.config(bg=root.cget('bg')))\n\nroot.mainloop()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12061, "user_id": 6415268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hHWNQ.png?s=128&g=1", "display_name": "j_4321", "link": "https://stackoverflow.com/users/6415268/j-4321"}, "is_accepted": false, "score": 0, "last_activity_date": 1565859391, "creation_date": 1565859391, "answer_id": 57507204, "question_id": 57503358, "link": "https://stackoverflow.com/questions/57503358/why-is-my-button-not-getting-grey-nor-with-a-border/57507204#57507204", "title": "Why is my button not getting grey nor with a border?", "body": "<p>Windows and Mac do not allow to change the button background color (I think because they are created from images).</p>\n\n<p>If you want to change the button background color, you can use a <code>ttk.Button</code> and change the theme for one that allows such customization, like 'clam' or 'alt'. <code>ttk.Button</code> has no <code>activebackground</code> option, the appearance is set through the style with <code>style.configure</code> for the normal appearance ('normal' state, inactive button) and <code>style.map</code> for the dynamic appearance (disabled, active, ...).</p>\n\n<pre><code>import tkinter as tk\nfrom tkinter import ttk\n\nroot = tk.Tk()\nstyle = ttk.Style(root)\nstyle.theme_use('clam')  # change theme\n# set active color to gray for the button with style 'gray.TButton', \n# if you want it to apply to all buttons, change it to 'TButton' \nstyle.map('gray.TButton', background=[('active', 'gray')]) \nttk.Button(root, text='Ok', style='gray.TButton').pack()\n\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 11717520, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ck9BorfR-H8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGWgIqkbq73v0vRvjId9QVDsSq3w/photo.jpg?sz=128", "display_name": "rafa_rrayes", "link": "https://stackoverflow.com/users/11717520/rafa-rrayes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565859391, "creation_date": 1565826690, "last_edit_date": 1565832094, "question_id": 57503358, "link": "https://stackoverflow.com/questions/57503358/why-is-my-button-not-getting-grey-nor-with-a-border", "title": "Why is my button not getting grey nor with a border?", "body": "<p>I want my button to get gray when I pass the cursor through it, but it does nothing, it doesnt have a border too</p>\n\n<p>I tried 'gray', 'grey', 'Grey', 'Gray'</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from tkinter import *\nfrom tkinter import Tk, StringVar, ttk\ndef oi():\n    print('oi')\ndef menu(cany_list):\n    #some code...\n    #lots of code...\n    #created some frames including left\n    for i in candy_list:\n        i = Button(left, text=i, width = 250, activebackground = 'Gray', command = oi,  bd = 5, font =('courier', 12))\n        i.pack(side=TOP)\n\n</code></pre>\n\n<p>i am getting a button that executes the command and has a text and the font i choosed but not a border nor a active background</p>\n"}, {"tags": ["python", "python-3.x", "list", "dictionary", "move"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 3, "creation_date": 1565826162, "post_id": 57503293, "comment_id": 101475337, "body": "They are dictionaries, not lists, and your question is not very clear."}, {"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1565826467, "post_id": 57503293, "comment_id": 101475391, "body": "Please read about <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">the xy problem</a> and improve your question."}, {"owner": {"reputation": 625, "user_id": 9868018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1MZWb.png?s=128&g=1", "display_name": "Alex Hawking", "link": "https://stackoverflow.com/users/9868018/alex-hawking"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565826490, "post_id": 57503293, "comment_id": 101475395, "body": "@Selcuk, sorry, how can I make it more clear?"}, {"owner": {"reputation": 98, "user_id": 11924650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1sXlW.png?s=128&g=1", "display_name": "Farrago-Alex", "link": "https://stackoverflow.com/users/11924650/farrago-alex"}, "edited": false, "score": 0, "creation_date": 1565826543, "post_id": 57503293, "comment_id": 101475407, "body": "Do you want the equipped sword to be removed from the <code>swords</code> dictionary? And can you clarify what exactly what your goal is (perhaps reword it to relate to the title of the question)?"}, {"owner": {"reputation": 625, "user_id": 9868018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1MZWb.png?s=128&g=1", "display_name": "Alex Hawking", "link": "https://stackoverflow.com/users/9868018/alex-hawking"}, "edited": false, "score": 0, "creation_date": 1565826637, "post_id": 57503293, "comment_id": 101475424, "body": "Does this help?"}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565826820, "post_id": 57503293, "comment_id": 101475458, "body": "@AlexHawking Not much. I, for myself, have no idea what the question is. Maybe posting some relevant parts of the code you&#39;ve already written could help."}, {"owner": {"reputation": 625, "user_id": 9868018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1MZWb.png?s=128&g=1", "display_name": "Alex Hawking", "link": "https://stackoverflow.com/users/9868018/alex-hawking"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565826879, "post_id": 57503293, "comment_id": 101475467, "body": "@selcuk, thanks for sticking with me, I&#39;ll add some code :)"}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565826927, "post_id": 57503293, "comment_id": 101475481, "body": "@AlexHawking No worries. Also check the answer posted to see if it helps."}, {"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 2, "creation_date": 1565827229, "post_id": 57503293, "comment_id": 101475529, "body": "For what it&#39;s worth, it&#39;s probably a bad idea to organize the data this way (needing to move the object between two lists when equipped and unequpped). Why not just have a list of equipped swords referenced by key, then do a look-up into the swords dictionary? This is a non-destructive way to deal with the data."}], "answers": [{"tags": [], "owner": {"reputation": 10108, "user_id": 320021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c4de32fdfcc729ae62e607c352685afb?s=128&d=identicon&r=PG", "display_name": "Sergey", "link": "https://stackoverflow.com/users/320021/sergey"}, "is_accepted": false, "score": 1, "last_activity_date": 1565826825, "creation_date": 1565826825, "answer_id": 57503368, "question_id": 57503293, "link": "https://stackoverflow.com/questions/57503293/move-and-rename-python-dictionary/57503368#57503368", "title": "Move and Rename Python Dictionary", "body": "<p>I would imagine it could be something like this:</p>\n\n<pre><code>esword = swords['wooden_sword']\ndel swords['wooden_sword']\n</code></pre>\n\n<p>this will remove the sword from the dictionary of \"all swords owned by the character\" and assign it to the <code>esword</code> variable.</p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1565827103, "creation_date": 1565827103, "answer_id": 57503391, "question_id": 57503293, "link": "https://stackoverflow.com/questions/57503293/move-and-rename-python-dictionary/57503391#57503391", "title": "Move and Rename Python Dictionary", "body": "<p>You can do an assignment like this:</p>\n\n<pre><code>sword_type = input(\"Which type of sword?\")\nesword[sword_type] = swords[sword_type]\n</code></pre>\n\n<p>If they later drop that weapon, you can do</p>\n\n<pre><code>dropped_sword = 'stone_sword'\ndel esword[dropped_sword]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "is_accepted": false, "score": 1, "last_activity_date": 1565827281, "creation_date": 1565827281, "answer_id": 57503411, "question_id": 57503293, "link": "https://stackoverflow.com/questions/57503293/move-and-rename-python-dictionary/57503411#57503411", "title": "Move and Rename Python Dictionary", "body": "<p>could make a function</p>\n\n<pre><code>def equip(sword,swords):\n    esword = swords[sword]\n    return esword\n\nesword = equip('gold_sword',swords)\n</code></pre>\n"}], "owner": {"reputation": 625, "user_id": 9868018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1MZWb.png?s=128&g=1", "display_name": "Alex Hawking", "link": "https://stackoverflow.com/users/9868018/alex-hawking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 57503391, "answer_count": 3, "score": -1, "last_activity_date": 1572303583, "creation_date": 1565826088, "last_edit_date": 1572303583, "question_id": 57503293, "link": "https://stackoverflow.com/questions/57503293/move-and-rename-python-dictionary", "title": "Move and Rename Python Dictionary", "body": "<p>I am making a text based game in python and want the character to be able to equip weapons. I have two dictionaries storing them like this (esword is equipped sword):</p>\n\n<pre><code>esword = {\n}\n\nswords = {\n        'wooden_sword': {'name': 'Wooden Sword', 'dmg': 1},\n        'stone_sword' : {'name': 'Stone Sword', 'dmg': 2},\n        'gold_sword': {'name': 'Gold Sword', 'dmg': 2.5}\n}\n</code></pre>\n\n<p>I want the character to be able to equip a sword, which involves moving it into the esword (and not removing it from swords dictionaries probably using <code>.copy()</code>) dictionary and renaming it to 'equippedsword' so that I can call it with <code>esword['equippedsword'][somekey]</code> .</p>\n\n<p>The game is similar to a dice rolling game and adds the swords attack as shown:</p>\n\n<p><code>yourRollSword = (yourRoll + esword['equipped']['dmg'])</code></p>\n\n<p>So I basically just want a way to get the keys from the equipped swords dictionary.</p>\n"}, {"tags": ["python", "dictionary", "keyerror"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1565825939, "post_id": 57503266, "comment_id": 101475301, "body": "The <code>d[&#39;key3&#39;]</code> is evaluated when the function call is made. You could do <code>d.get(&#39;key1&#39;, d.get(&#39;key3&#39;))</code> instead"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565826033, "post_id": 57503266, "comment_id": 101475317, "body": "Python passes function arguments by value, all arguments have to be evaluated before the function is called. There&#39;s no lazy evaluation."}, {"owner": {"reputation": 1, "user_id": 10451742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df07f19f9dd1aa6bb40ae55337af94b?s=128&d=identicon&r=PG&f=1", "display_name": "jsthoffman", "link": "https://stackoverflow.com/users/10451742/jsthoffman"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 1, "creation_date": 1565883866, "post_id": 57503266, "comment_id": 101492872, "body": "@Selcuk The question you linked is the one I couldn&#39;t find and has the answer I was looking for. Thanks."}], "owner": {"reputation": 1, "user_id": 10451742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df07f19f9dd1aa6bb40ae55337af94b?s=128&d=identicon&r=PG&f=1", "display_name": "jsthoffman", "link": "https://stackoverflow.com/users/10451742/jsthoffman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1565825911, "answer_count": 0, "score": 0, "last_activity_date": 1565825764, "creation_date": 1565825764, "question_id": 57503266, "link": "https://stackoverflow.com/questions/57503266/how-does-dict-get-work-when-the-default-value-is-a-different-key-in-dict", "closed_reason": "Duplicate", "title": "How does dict.get() work when the default value is a different key in dict?", "body": "<p>I'm trying to understand how python's <code>dict.get()</code> method works under the hood in an unusual situation where the default argument is <code>dict['key']</code> i.e.: <code>dict.get('key1', dict['key2'])</code>.</p>\n\n<p>When <code>'key2'</code> exists this works as expected returning the value for <code>'key1'</code>, however when <code>'key2'</code> does not exist this raises <code>KeyError: 'key2'</code> even if <code>'key1'</code> exists.</p>\n\n<p>Full example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>d = {'key1': 'value1', 'key2': 'value2'}\nd.get('key1', d['key2'])\n'value1'\nd.get('key1', d['key3'])\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nKeyError: 'key3'\n</code></pre>\n\n<p>Am I correct in assuming that <code>d['key2']</code> is evaluated and the result (<code>'value1'</code>) is passed to <code>.get()</code>? Hence <code>d['key3']</code> raises the error before the arguments are even passed to <code>.get()</code>?</p>\n\n<p>Say I do want to get the value for a different key if <code>'key1'</code> doesn't exist and I'm not sure that the second key will exist either. Is the best approach to use something like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>d.get('key1') or d.get('key2')\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565826198, "post_id": 57503256, "comment_id": 101475343, "body": "Does this have to do be done with a regexp? It can&#39;t do a variable number of space removals when the dependency is only before the first one."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565826335, "post_id": 57503256, "comment_id": 101475374, "body": "You should do this in two steps. First remove all the spaces between the asterisks, since that&#39;s not dependent on whether there&#39;s an isolated letter before them. Then merge the asterisks with the single letter before them."}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 11661880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34bb10fdea690deada471bd3dc14acd?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Tepper", "link": "https://stackoverflow.com/users/11661880/eric-tepper"}, "is_accepted": false, "score": 1, "last_activity_date": 1565840062, "last_edit_date": 1565840062, "creation_date": 1565838980, "answer_id": 57504462, "question_id": 57503256, "link": "https://stackoverflow.com/questions/57503256/catching-an-awkward-string-using-regexp/57504462#57504462", "title": "Catching an awkward string using Regexp", "body": "<p>Perhaps you could use a regular expression like </p>\n\n<pre><code>(?&lt;= )(\\w)((?: \\*)+)(?= )\n</code></pre>\n\n<p>which will give you two groups: group 1, <code>(\\w)</code> - the single character, and group 2, <code>((?: \\*)+)</code> - the asterisks with spaces. (The extras in the above regular expression are to ensure that the whole statement is both preceded and followed by a whitespace). Then strip group 2 of whitespaces and return the concatenation of group 1 and group 2?</p>\n\n<p>So, something like</p>\n\n<pre><code>import re\n\ninput_string = 'test p * * * * * test2\\nanother test c * * * * * finished test\\ntest4 * * *'\n\ndef remove_whitespaces(input):\n    start_char = input.group(1)\n    asterisks = input.group(2)\n    asterisks = asterisks.replace(' ', '')\n    return start_char + asterisks\n\nreturn_string = re.sub(r'(?&lt;= )(\\w)((?: \\*)+)(?= )', remove_whitespaces, input_string)\nprint(return_string)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>test p***** test2\nanother test c***** finished test\ntest4 * * *\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4321, "user_id": 2851685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c20f3273fea79265e19e3aafd2d11aeb?s=128&d=identicon&r=PG", "display_name": "Dev Khadka", "link": "https://stackoverflow.com/users/2851685/dev-khadka"}, "is_accepted": false, "score": 1, "last_activity_date": 1565847331, "creation_date": 1565847331, "answer_id": 57505249, "question_id": 57503256, "link": "https://stackoverflow.com/questions/57503256/catching-an-awkward-string-using-regexp/57505249#57505249", "title": "Catching an awkward string using Regexp", "body": "<p>Following code should work, it first match *'s with or without leading character. Then using <code>ptrn.sub</code> it remove spaces on matched pattern</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\nptrn = re.compile(r\"(\\s\\w)?(\\s\\*)+\")\ntext = '''test p * * * * * test2\nanother test c * * * * * finished test\ntest4 * * *'''\n\nptrn.sub(lambda x: \" %s\"%(x[0].replace(\" \",\"\")), text)\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>test p***** test2\nanother test c***** finished test\ntest4 ***\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3924, "user_id": 1234478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2feda8b3b75f074751d1e1a06a7b674b?s=128&d=identicon&r=PG&f=1", "display_name": "dantiston", "link": "https://stackoverflow.com/users/1234478/dantiston"}, "is_accepted": true, "score": 1, "last_activity_date": 1565847452, "creation_date": 1565847452, "answer_id": 57505259, "question_id": 57503256, "link": "https://stackoverflow.com/questions/57503256/catching-an-awkward-string-using-regexp/57505259#57505259", "title": "Catching an awkward string using Regexp", "body": "<p>To do this with regex, the basic process is to remove whitespace before the <code>*</code> character (<code>re.sub(r\"[^\\S\\n]\\*\", '*', value)</code>), <em>but</em> you don't want to do it immediately after another word. So, also require that a <code>*</code> or a character comes before.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python3\n\nimport re\n\ndef removeWhitespace(value: str) -&gt; str:\n    return re.sub(r\"(?&lt;=\\s(\\*|\\w))[^\\S\\n]\\*\", '*', value)\n</code></pre>\n\n<p>Some tests:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python3\n\nimport unittest\n\nfrom main import removeWhitespace\n\nclass RemoveWhitespaceTests(unittest.TestCase):\n\n    def test1(self):\n        actual = removeWhitespace(\"test p * * * * * test2\")\n        expected = \"test p***** test2\"\n        self.assertEqual(actual, expected)\n\n    def test2(self):\n        actual = removeWhitespace(\"another test c * * * * * finished test\")\n        expected = \"another test c***** finished test\"\n        self.assertEqual(actual, expected)\n\n    def test3(self):\n        actual = removeWhitespace(\"test4 * * *\")\n        expected = \"test4 ***\"\n        self.assertEqual(actual, expected)\n\n    def test4(self):\n        actual = removeWhitespace(\"hello world\")\n        expected = \"hello world\"\n        self.assertEqual(actual, expected)\n</code></pre>\n\n<p>Results</p>\n\n<pre><code>$ python3.7 -m unittest tests.py \n....\n----------------------------------------------------------------------\nRan 4 tests in 0.000s\n\nOK\n</code></pre>\n\n<p>You don't mention this in your data, but this doesn't capture at the beginning of the string. If this is needed, hopefully you're now far enough down the track to figure it out :-)</p>\n"}], "owner": {"reputation": 4210, "user_id": 2485799, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3cc0cb5d5ad70d9d6a3fb1082c1413c8?s=128&d=identicon&r=PG", "display_name": "GreenGodot", "link": "https://stackoverflow.com/users/2485799/greengodot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 57505259, "answer_count": 3, "score": 1, "last_activity_date": 1565847452, "creation_date": 1565825636, "question_id": 57503256, "link": "https://stackoverflow.com/questions/57503256/catching-an-awkward-string-using-regexp", "title": "Catching an awkward string using Regexp", "body": "<p>I have a list of strings consisting of a format such as the following:</p>\n\n<pre><code>test p * * * * * test2\nanother test c * * * * * finished test\ntest4 * * *\n</code></pre>\n\n<p>What I want to do is identify cases where the asterisks are following a single letter character and merge them with the character to form a whole \"word\" without the spaces between them. A regexp approach would be necessary to identify this specific pattern within each string.</p>\n\n<p>I do not want them to be merged if there is no isolated character before it. So taking the examples above the output should look like:</p>\n\n<pre><code>test p***** test2\nanother test c***** finished test\ntest4 ***\n</code></pre>\n\n<p>Any assistance would be appreciated, I am very rusty with my regexp in Python.</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "is_accepted": true, "score": 1, "last_activity_date": 1565859644, "creation_date": 1565859644, "answer_id": 57507259, "question_id": 57503228, "link": "https://stackoverflow.com/questions/57503228/how-to-copy-a-graph-operation-in-tensorflow-using-node-def/57507259#57507259", "title": "How to copy a graph operation in Tensorflow using node_def?", "body": "<p>You have to parse the <a href=\"https://www.tensorflow.org/api_docs/python/tf/NodeDef\" rel=\"nofollow noreferrer\"><code>tf.NodeDef</code></a> message from the text representation, and then you can build the <a href=\"https://www.tensorflow.org/api_docs/python/tf/Operation\" rel=\"nofollow noreferrer\"><code>tf.Operation</code></a> from it. You can do that like this:</p>\n\n<pre><code>import tensorflow as tf\nimport google.protobuf\n\nnode_def_message = r\"\"\"name: \"Const\"\nop: \"Const\"\nattr {\n  key: \"dtype\"\n  value {\n    type: DT_INT32\n  }\n}\nattr {\n  key: \"value\"\n  value {\n    tensor {\n      dtype: DT_INT32\n      tensor_shape {\n        dim {\n          size: 2\n        }\n      }\n      tensor_content: \"\\001\\000\\000\\000\\001\\000\\000\\000\"\n    }\n  }\n}\"\"\"\n\n# Build NodeDef message\nnode_def = tf.NodeDef()\n# Parse from the string\ngoogle.protobuf.text_format.Parse(node_def_message, node_def)\n# Build the operation\nop = tf.Operation(node_def, tf.get_default_graph())\n# Get the output from the operation\nc = op.outputs[0]\n# Check value\nwith tf.Session() as sess:\n    print(sess.run(c))\n    # [1 1]\n</code></pre>\n\n<p>Note that you may need to pass additional parameters to <a href=\"https://www.tensorflow.org/api_docs/python/tf/Operation\" rel=\"nofollow noreferrer\"><code>tf.Operation</code></a> if, for example, the operation that you are building needs some input.</p>\n"}, {"tags": [], "owner": {"reputation": 6608, "user_id": 867889, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/766cbf5cffe9872f58f00c994cd34a3f?s=128&d=identicon&r=PG", "display_name": "y.selivonchyk", "link": "https://stackoverflow.com/users/867889/y-selivonchyk"}, "is_accepted": false, "score": 1, "last_activity_date": 1565972116, "creation_date": 1565972116, "answer_id": 57527957, "question_id": 57503228, "link": "https://stackoverflow.com/questions/57503228/how-to-copy-a-graph-operation-in-tensorflow-using-node-def/57527957#57527957", "title": "How to copy a graph operation in Tensorflow using node_def?", "body": "<p>@jdehesa gave a great answer to the question. I have a little more tooling around it:</p>\n\n<pre><code>import tensorflow\nimport copy\nimport tensorflow.contrib.graph_editor as ge\nfrom copy import deepcopy\n\na = tf.constant(1)\nb = tf.constant(2)\nc = a+b\n\ndef modify(t): \n    # illustrate operation copy&amp;modification\n    new_t = deepcopy(t.op.node_def)\n    new_t.name = new_t.name+\"_but_awesome\"\n    new_t = tf.Operation(new_t, tf.get_default_graph())\n    # we got a tensor, let's return a tensor\n    return new_t.outputs[0]\n\ndef update_existing(target, updated):\n    # illustrate how to use new op\n    related_ops = ge.get_backward_walk_ops(target, stop_at_ts=updated.keys(), inclusive=True)\n    new_ops, mapping = ge.copy_with_input_replacements(related_ops, updated)\n    new_op = mapping._transformed_ops[target.op]\n    return new_op.outputs[0]\n\nnew_a = modify(a)\nnew_b = modify(b)\ninjection = new_a+39 # illustrate how to add another op to the graph\nnew_c = update_existing(c, {a:injection, b:new_b})\n\nwith tf.Session():\n    print(c.eval()) # -&gt; 3\n    print(new_c.eval()) # -&gt; 42\n</code></pre>\n"}], "owner": {"reputation": 6608, "user_id": 867889, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/766cbf5cffe9872f58f00c994cd34a3f?s=128&d=identicon&r=PG", "display_name": "y.selivonchyk", "link": "https://stackoverflow.com/users/867889/y-selivonchyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 57507259, "answer_count": 2, "score": 1, "last_activity_date": 1581618107, "creation_date": 1565825373, "last_edit_date": 1581618107, "question_id": 57503228, "link": "https://stackoverflow.com/questions/57503228/how-to-copy-a-graph-operation-in-tensorflow-using-node-def", "title": "How to copy a graph operation in Tensorflow using node_def?", "body": "<p>Lets say I have an operation <code>my_op</code> defined as follows:</p>\n\n<pre><code>name: \"Const\"\nop: \"Const\"\nattr {\n  key: \"dtype\"\n  value {\n    type: DT_INT32\n  }\n}\nattr {\n  key: \"value\"\n  value {\n    tensor {\n      dtype: DT_INT32\n      tensor_shape {\n        dim {\n          size: 2\n        }\n      }\n      tensor_content: \"\\001\\000\\000\\000\\001\\000\\000\\000\"\n    }\n  }\n}\n</code></pre>\n\n<p>I have access to operation in the graph but not to the construction code. I want to copy operation and change some of it's attributes:</p>\n\n<pre><code>name: \"PrettyConst\"\nop: \"Const\"\nattr {\n  key: \"dtype\"\n  value {\n    type: DT_INT32\n  }\n}\nattr {\n  key: \"value\"\n  value {\n    tensor {\n      dtype: DT_FLOAT32\n      tensor_shape {\n        dim {\n          size: 8\n        }\n      }\n      tensor_content: \"\\001\\000\\000\\000\\001\\000\\000\\000\\001\\000\\000\\000\\001\\000\\000\\000\\001\\000\\000\\000\\001\\000\\000\\000\\001\\000\\000\\000\\001\\000\\000\\000\"\n    }\n  }\n}\n</code></pre>\n\n<p>While I can easily do it by saving graph as txt, modifying content of the file, and restoring it back, I can not find a simple way of doing that in python. I would expect there should be possible to do something like following:</p>\n\n<pre><code>op_def_copy = op.node_def.copy()\nop_def_copy.name = \"PrettyConst\"\nop_def_copy.attr[\"dtype\"] = 0\n# and also do something with the content, whatever\ngraph.append(tf.Operation(op_def_copy))\n</code></pre>\n\n<p>The <code>tf.contrig.graph_editor</code> seems to be able to do that sort of thing, though.</p>\n"}, {"tags": ["python", "django", "view", "render", "client-side"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565827010, "post_id": 57503227, "comment_id": 101475493, "body": "We can suggest workarounds if you try to explain the actual use case for this."}], "answers": [{"comments": [{"owner": {"reputation": 48, "user_id": 10146320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KWYxe.jpg?s=128&g=1", "display_name": "PizzaPatz", "link": "https://stackoverflow.com/users/10146320/pizzapatz"}, "edited": false, "score": 0, "creation_date": 1565899164, "post_id": 57503417, "comment_id": 101499011, "body": "Thank you for pointing out about MVC rules. I&#39;ve read up on documentations you&#39;ve linked on your post and I agreed on my design being impossible. I also found one helpful <a href=\"https://djangobook.com/mdj2-django-structure/\" rel=\"nofollow noreferrer\">link</a> explaining the Django stack."}], "tags": [], "owner": {"reputation": 505, "user_id": 4238785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000627732575/picture?type=large", "display_name": "Jon Hrovat", "link": "https://stackoverflow.com/users/4238785/jon-hrovat"}, "is_accepted": true, "score": 1, "last_activity_date": 1565827382, "creation_date": 1565827382, "answer_id": 57503417, "question_id": 57503227, "link": "https://stackoverflow.com/questions/57503227/django-is-there-a-way-to-make-client-render-python-3-functions-locally/57503417#57503417", "title": "Django: Is there a way to make client render Python 3 functions locally?", "body": "<p>Django does not support ranged for loops in the template. Aside from that, what you're attempting breaks the MVC rules of design. The solution you're looking for will be hard to implement because you're going against how Django is designed to work. </p>\n\n<p>If you need more python functionality, you should learn about <a href=\"https://docs.djangoproject.com/en/2.2/howto/custom-template-tags/\" rel=\"nofollow noreferrer\">custom Django template tags</a>. If there's a specific use case you need help with, please elaborate in your post.</p>\n"}], "owner": {"reputation": 48, "user_id": 10146320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KWYxe.jpg?s=128&g=1", "display_name": "PizzaPatz", "link": "https://stackoverflow.com/users/10146320/pizzapatz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 57503417, "answer_count": 1, "score": 0, "last_activity_date": 1565829674, "creation_date": 1565825371, "last_edit_date": 1565829674, "question_id": 57503227, "link": "https://stackoverflow.com/questions/57503227/django-is-there-a-way-to-make-client-render-python-3-functions-locally", "title": "Django: Is there a way to make client render Python 3 functions locally?", "body": "<p>I have a project that I want a client to run a for/while loop on his/her machine. Is there a way to do such a thing since views are run on server-side, such as below:</p>\n\n<p>views.py</p>\n\n<pre><code>from django.shortcuts import render\n\ndef index(request):\n    for i in range(0,10000):\n        # Do stuff\nreturn render(request, 'app/index.html')\n</code></pre>\n\n<p>Javascript was one of the option for client side but I have some libraries that are from Python 3 I want to run.</p>\n\n<p><strong>Update</strong>:\nI'm building a Django app on Heroku that will implement proof-of-work function for blockchain. The concept of proof-of-work function requires a computation to be done by a client. What I want to accomplish is to have a template for a client to run their resources in Python using Crypto library (from Crypto.Hash import SHA). Here is the example repository I'm trying to follow <a href=\"https://github.com/adilmoujahid/blockchain-python-tutorial/blob/master/blockchain/blockchain.py\" rel=\"nofollow noreferrer\">blockchain-python-tutorial</a>. The repository is run locally in Flask and not meant to be run on an actual server, since the repository is theoretical and not practical. So I was wondering if there's a way to build a replica of the app with Django on Heroku. Thank you.</p>\n"}, {"tags": ["python", "image", "canvas", "kivy"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565826916, "post_id": 57503195, "comment_id": 101475477, "body": ".reload() <a href=\"https://stackoverflow.com/questions/42328063/how-can-i-reload-a-image-in-kivy-python\" title=\"how can i reload a image in kivy python\">stackoverflow.com/questions/42328063/&hellip;</a>"}, {"owner": {"reputation": 468, "user_id": 11156090, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iIVwV26iIQs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcRFG06E1nX-7yyt1hs0e96yf--Uw/mo/photo.jpg?sz=128", "display_name": "rzaratx", "link": "https://stackoverflow.com/users/11156090/rzaratx"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565828049, "post_id": 57503195, "comment_id": 101475650, "body": "That solution is not working for me."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565828797, "post_id": 57503195, "comment_id": 101475776, "body": "show minimal working code with this problem so wwe could run it and see problem."}], "answers": [{"tags": [], "owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "is_accepted": true, "score": 0, "last_activity_date": 1565876334, "creation_date": 1565876334, "answer_id": 57510534, "question_id": 57503195, "link": "https://stackoverflow.com/questions/57503195/change-the-background-canvas-kivy/57510534#57510534", "title": "change the background canvas kivy", "body": "<p>I don't think assigning <code>ids</code> within <code>canvas</code> instructions is supported. But you can accomplish the same thing by creating the <code>Rectangle</code> in <code>python</code>:</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.graphics.vertex_instructions import Rectangle\nfrom kivy.lang import Builder\nfrom kivy.uix.screenmanager import Screen, ScreenManager\n\n\nclass MazeSolution(Screen):\n    def __init__(self):\n        super(MazeSolution, self).__init__()\n        # make the Rectangle here and save a reference to it\n        with self.canvas.before:\n            self.rect = Rectangle(source='selection grass.png')\n\n    def on_pos(self, *args):\n        # update Rectangle position when MazeSolution position changes\n        self.rect.pos = self.pos\n\n    def on_size(self, *args):\n        # update Rectangle size when MazeSolution size changes\n        self.rect.size = self.size\n\n    def CheckDoor1(self):\n        if self.ids.door1.source == \"correct\":\n            print(\"correct\")\n            # use the saved reference to change the background \n            self.rect.source = 's-curvee selection.png'\n        else:\n            print(\"incorrect\")\n\nBuilder.load_string('''\n&lt;MazeSolution&gt;:\n    FloatLayout:\n        Button:\n            pos_hint: {\"top\": .8, \"right\": .75}\n            size_hint: .5, .1\n            text:\n                \"Door 1\"\n            source: \"correct\"\n            id: door1\n            on_press:\n                root.CheckDoor1()\n''')\n\nclass TestApp(App):\n    def build(self):\n        sm = ScreenManager()\n        sm.add_widget(MazeSolution())\n        return sm\n\nTestApp().run()\n</code></pre>\n\n<p>The <code>on_pos()</code> and <code>on_size()</code> methods perform the operations that <code>kv</code> would set up for you automatically, but must be set up manually since the <code>Rectangle</code> is not created in <code>kv</code>.</p>\n"}], "owner": {"reputation": 468, "user_id": 11156090, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iIVwV26iIQs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcRFG06E1nX-7yyt1hs0e96yf--Uw/mo/photo.jpg?sz=128", "display_name": "rzaratx", "link": "https://stackoverflow.com/users/11156090/rzaratx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 57510534, "answer_count": 1, "score": 1, "last_activity_date": 1565876334, "creation_date": 1565825070, "last_edit_date": 1565827582, "question_id": 57503195, "link": "https://stackoverflow.com/questions/57503195/change-the-background-canvas-kivy", "title": "change the background canvas kivy", "body": "<p>I have a canvas background but I am trying to switch the back ground when a person his a correct button to move on to the next level. I am trying to do this all within one class. Is there a way to assign an image to a canvas rectangle and then on the press of a button the canvas image will change to a new source.</p>\n\n<p>main.py</p>\n\n<pre><code>class MazeSolution(Screen):\n    def CheckDoor1(self):\n        if self.ids.door1.source == \"correct\":\n            print(\"correct\")\n            self.ids.change.source = 's-curvee selection.png'\n        else:\n            print(\"incorrect\")\n</code></pre>\n\n<p>main.kv</p>\n\n<pre><code>#:import utils kivy.utils\n&lt;MazeSolution&gt;:\n    FloatLayout:\n        canvas:\n            Rectangle:\n                id: change\n                source: 'selection grass.png'\n                pos: self.pos\n                size: self.size\n        Button:\n            pos_hint: {\"top\": .8, \"right\": .75}\n            size_hint: .5, .1\n            text:\n                \"Door 1\"\n            source: \"&lt;random_name&gt;\"\n            id: door1\n            on_press:\n                root.CheckDoor1()\n</code></pre>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565826730, "post_id": 57503188, "comment_id": 101475447, "body": "check <code>driver.page_source</code> - browser may not give access to settings."}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1565827822, "post_id": 57503188, "comment_id": 101475610, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/56380091/how-to-interact-with-the-elements-within-shadow-root-open-while-clearing-brow\">How to interact with the elements within #shadow-root (open) while Clearing Browsing Data of Chrome Browser using cssSelector</a>"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1565827927, "post_id": 57503188, "comment_id": 101475632, "body": "The above link will give the detailed explanation of the issue and solution. Check it out and upvote if you feel the answer is helpful :-)"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 11171497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfc126a189080a77fe9d5bea4afd2df4?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/11171497/kai"}, "edited": false, "score": 0, "creation_date": 1565919329, "post_id": 57511186, "comment_id": 101503672, "body": "The code is work, thank.  Other Question:  How do I print the &#39;&#39;&#39;WebElements of    settingsClearBrowsingDataDialogShadowRoot&#39;&#39;&#39;?  I did try  &#39;&#39;&#39;settingsClearBrowsingDataDialogShadowRoot.get_attribute(&#39;&zwnj;&#8203;innerHTML&#39;)&#39;&#39;&#39;  but it doesn&#39;t look like HTML format.  Another Question, I see that you find the final elements by    find_element_by_id  , is any way can find inner html by xpath, I did by using   &#39;&#39;&#39;find_element_by_xpath&#39;&#39;&#39;  , but doesn&#39;t work."}], "tags": [], "owner": {"reputation": 116880, "user_id": 2897748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d278f6ada8828c902a13ee8a5e523cce?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitri T", "link": "https://stackoverflow.com/users/2897748/dmitri-t"}, "is_accepted": false, "score": 2, "last_activity_date": 1565879294, "creation_date": 1565879294, "answer_id": 57511186, "question_id": 57503188, "link": "https://stackoverflow.com/questions/57503188/python-selenium-cant-find-elements-from-page-source-while-can-find-from-browse/57511186#57511186", "title": "python selenium, can&#39;t find elements from page_source while can find from browser", "body": "<p>Looking into Chrome Settings page source it looks like the button, you're looking for is hidden in the <a href=\"https://docs.experitest.com/display/TDB/SeeTestAutomation+-+Mobile+Web+Testing+On+Chrome+With+Android\" rel=\"nofollow noreferrer\">ShadowDOM</a> </p>\n\n<p>So you need to iterate down several levels of <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot\" rel=\"nofollow noreferrer\">ShadowRoot</a> </p>\n\n<p><a href=\"https://i.stack.imgur.com/WPSzP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WPSzP.png\" alt=\"enter image description here\"></a></p>\n\n<p>So the algorithm looks like:</p>\n\n<ol>\n<li>Locate parent <a href=\"https://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.remote.webelement\" rel=\"nofollow noreferrer\">WebElement</a> </li>\n<li>Locate its <code>shadow-root</code> and cast it to the WebElement</li>\n<li>Use <a href=\"https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webelement.WebElement.find_element\" rel=\"nofollow noreferrer\">WebElement.find_element()</a> function to locate the next WebElement which is the parent for the ShadowRoot</li>\n<li>Repeat steps 1-3 until you're in the same context with the element you want to interact with</li>\n</ol>\n\n<p>Example code:</p>\n\n<pre><code>from selenium import webdriver\n\ndef expand_root_element(element):\n    shadow_root = driver.execute_script('return arguments[0].shadowRoot', element)\n    return shadow_root\n\n\ndriver = webdriver.Chrome(\"c:\\\\apps\\\\webdriver\\\\chromedriver.exe\")\ndriver.maximize_window()\ndriver.get(\"chrome://settings/clearBrowserData\")\n\nsettingsUi = driver.find_element_by_tag_name(\"settings-ui\")\nsettingsUiShadowRoot = expand_root_element(settingsUi)\n\nsettingsMain = settingsUiShadowRoot.find_element_by_tag_name(\"settings-main\")\nsettingsShadowRoot = expand_root_element(settingsMain)\nsettingsBasicPage = settingsShadowRoot.find_element_by_tag_name(\"settings-basic-page\")\nsettingsBasicPageShadowroot = expand_root_element(settingsBasicPage)\nsettingsPrivacyPage = settingsBasicPageShadowroot.find_element_by_tag_name(\"settings-privacy-page\")\nsettingsPrivacyShadowRoot = expand_root_element(settingsPrivacyPage)\nsettingsClearBrowsingDataDialog = settingsPrivacyShadowRoot.find_element_by_tag_name(\n    \"settings-clear-browsing-data-dialog\")\nsettingsClearBrowsingDataDialogShadowRoot = expand_root_element(settingsClearBrowsingDataDialog)\nsettingsClearBrowsingDataDialogShadowRoot.find_element_by_id(\"clearBrowsingDataConfirm\").click()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2390, "user_id": 6121643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/exMvQ.jpg?s=128&g=1", "display_name": "Irony Stack", "link": "https://stackoverflow.com/users/6121643/irony-stack"}, "edited": false, "score": 0, "creation_date": 1572879069, "post_id": 58695164, "comment_id": 103688143, "body": "you can explain your answer, i.e. what the code you added does? to make your answer clear"}], "tags": [], "owner": {"reputation": 13, "user_id": 12317259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60dff56d20abe20206ec2d1f4204db2f?s=128&d=identicon&r=PG&f=1", "display_name": "martin360", "link": "https://stackoverflow.com/users/12317259/martin360"}, "is_accepted": false, "score": 1, "last_activity_date": 1572879638, "last_edit_date": 1572879638, "creation_date": 1572876612, "answer_id": 58695164, "question_id": 57503188, "link": "https://stackoverflow.com/questions/57503188/python-selenium-cant-find-elements-from-page-source-while-can-find-from-browse/58695164#58695164", "title": "python selenium, can&#39;t find elements from page_source while can find from browser", "body": "<p>I got it to work by doing this:</p>\n\n<pre><code> driver.ExecuteScript(\"return document.querySelector('body &gt; settings-ui').shadowRoot.querySelector('#main').shadowRoot.querySelector('settings-basic-page').shadowRoot.querySelector('#advancedPage &gt; settings-section:nth-child(1) &gt; settings-privacy-page').shadowRoot.querySelector('settings-clear-browsing-data-dialog').shadowRoot.querySelector('#clearBrowsingDataConfirm').click();\");\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 11171497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfc126a189080a77fe9d5bea4afd2df4?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/11171497/kai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1448, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1572879638, "creation_date": 1565825030, "question_id": 57503188, "link": "https://stackoverflow.com/questions/57503188/python-selenium-cant-find-elements-from-page-source-while-can-find-from-browse", "title": "python selenium, can&#39;t find elements from page_source while can find from browser", "body": "<p>I try find target element by xpath so that I can click on it. But can't find it when run code, although can find it by right-click option manually on chrome browser. </p>\n\n<p>detail: I am using </p>\n\n<pre><code>driver.get('chrome://settings/clearBrowserData')\n</code></pre>\n\n<p>to get history pop-up from chrome, then wait element by selenium, \nand next action I try to click it by: </p>\n\n<pre><code>driver.find_element_by_css_selector('* /deep/ #clearBrowsingDataConfirm').click()\n</code></pre>\n\n<p>or by:</p>\n\n<pre><code>driver.find_element_by_xpath(r'//paper-button[@id=\"clearBrowsingDataConfirm\"]').click()\n</code></pre>\n\n<p>both does not work</p>\n\n<p>Could you tell solution by xpath if possible because I am more familiar with it. Or any other way to clear history on chrome, thank</p>\n"}, {"tags": ["python", "matplotlib", "pyqt5"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565825257, "post_id": 57503168, "comment_id": 101475185, "body": "which line makes problem ?"}, {"owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "edited": false, "score": 0, "creation_date": 1565825455, "post_id": 57503168, "comment_id": 101475224, "body": "some info about removing plots from a figure here <a href=\"https://stackoverflow.com/questions/4981815/how-to-remove-lines-in-a-matplotlib-plot\" title=\"how to remove lines in a matplotlib plot\">stackoverflow.com/questions/4981815/&hellip;</a>"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1565825551, "post_id": 57503168, "comment_id": 101475237, "body": "problem can be because when you click it then it create always new Graphics (in btnPlot/btnLine) which doesn&#39;t have previous values - you should create Graphics only once."}], "answers": [{"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 2, "last_activity_date": 1565826295, "creation_date": 1565826295, "answer_id": 57503316, "question_id": 57503168, "link": "https://stackoverflow.com/questions/57503168/add-delete-plots-independently-on-a-matplotlib-figure/57503316#57503316", "title": "Add/Delete plots independently on a Matplotlib figure", "body": "<p>Problem is be because when you click it then it creates always new <code>Graphics</code> (in <code>btnPlot</code>/<code>btnLine</code>) which doesn't have previous values - <code>plot, vline1, vline2</code>. You have to  create <code>Graphics</code> only once and later run only <code>drawPlot(checked)</code>, <code>drawLine(checked)</code> to add or remove item.</p>\n\n<pre><code>import sys\nfrom PyQt5 import QtCore, QtGui, QtWidgets\nfrom PyQt5.QtCore import *\nfrom PyQt5.QtGui import *\nfrom PyQt5.QtWidgets import *\nfrom matplotlib.backends.backend_qt5agg import FigureCanvasQTAgg as FigureCanvas\nfrom matplotlib.pyplot import Figure\n\nclass Mainwindow(QMainWindow):\n    def __init__(self, parent=None):\n        super(Mainwindow, self).__init__(parent)\n\n        centralWidget = QWidget()\n        self.setCentralWidget(centralWidget)\n        self.fig = Figure()\n        self.axes = self.fig.add_subplot(111)\n        self.canvas = FigureCanvas(self.fig)\n        self.gridLayout = QGridLayout(centralWidget)\n        self.gridLayout.addWidget(self.canvas)   \n        self.btn_plot = QCheckBox(\"Plot\")\n        self.btn_line = QCheckBox(\"Line\")\n        self.gridLayout.addWidget(self.btn_plot, 1,0,1,1)\n        self.gridLayout.addWidget(self.btn_line, 2,0,1,1)\n        self.btn_plot.clicked.connect(self.btnPlot)\n        self.btn_line.clicked.connect(self.btnLine)\n\n        # create only once\n        self.Graphics = Graphics(self.axes)\n\n    def btnPlot(self):\n        # add or remove \n        self.Graphics.drawPlot(self.btn_plot.isChecked())\n\n    def btnLine(self):\n        # add or remove \n        self.Graphics.drawLine(self.btn_line.isChecked())\n\nclass Graphics:\n    def __init__(self, axes):\n        self.axes = axes\n        # create at start with default values (but frankly, now I don't need it)\n        self.plot = None\n        self.vline1 = None\n        self.vline2 = None\n\n    def drawPlot(self, checked):\n        if checked:\n            self.plot = self.axes.plot([10,20,30], [5,10,2], 'o')\n        else:\n            for item in self.plot:\n                item.remove()\n        self.axes.figure.canvas.draw()\n\n    def drawLine(self, checked):\n        if checked:\n            self.vline1 = self.axes.axvline(x=15, linestyle=\"dashed\", color=\"#595959\")\n            self.vline2 = self.axes.axvline(x=25, linestyle=\"dashed\", color=\"#595959\")\n        else:\n            self.vline1.remove()\n            self.vline2.remove()\n        self.axes.figure.canvas.draw()\n\nif __name__ == \"__main__\":\n    app = QtWidgets.QApplication([])\n    prog = Mainwindow()   \n    prog.show()\n    sys.exit(app.exec())\n</code></pre>\n"}], "owner": {"reputation": 411, "user_id": 5244155, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a6a65335dcd3483f9240771217882802?s=128&d=identicon&r=PG&f=1", "display_name": "H. Dave", "link": "https://stackoverflow.com/users/5244155/h-dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 57503316, "answer_count": 1, "score": 0, "last_activity_date": 1565826295, "creation_date": 1565824857, "question_id": 57503168, "link": "https://stackoverflow.com/questions/57503168/add-delete-plots-independently-on-a-matplotlib-figure", "title": "Add/Delete plots independently on a Matplotlib figure", "body": "<p>I want to generate a scatterplot (up to half a million points) and on top of that, add different statistics (e.g. Q1, median, Q3). The idea is to add/delete those statistics without replotting the scatterplot in order to speed up the process. So far I can add plots independently on the figure but I can't delete a specific plot.\nWhen I uncheck the checkbox, I get the following error:</p>\n\n<pre><code>AttributeError: 'Graphics' object has no attribute 'vline1'\n</code></pre>\n\n<p>I understand that when I create the plot, I need to store/return the plot in order to call it later when I want to delete it but I don't know how to do that.</p>\n\n<p>Here my current code:</p>\n\n<pre><code>import sys\nfrom PyQt5 import QtCore, QtGui, QtWidgets\nfrom PyQt5.QtCore import *\nfrom PyQt5.QtGui import *\nfrom PyQt5.QtWidgets import *\nfrom matplotlib.backends.backend_qt5agg import FigureCanvasQTAgg as FigureCanvas\nfrom matplotlib.pyplot import Figure\n\nclass Mainwindow(QMainWindow):\n    def __init__(self, parent=None):\n        super(Mainwindow, self).__init__(parent)\n\n        centralWidget = QWidget()\n        self.setCentralWidget(centralWidget)\n        self.fig = Figure()\n        self.axes = self.fig.add_subplot(111)\n        self.canvas = FigureCanvas(self.fig)\n        self.gridLayout = QGridLayout(centralWidget)\n        self.gridLayout.addWidget(self.canvas)   \n        self.btn_plot = QCheckBox(\"Plot\")\n        self.btn_line = QCheckBox(\"Line\")\n        self.gridLayout.addWidget(self.btn_plot, 1,0,1,1)\n        self.gridLayout.addWidget(self.btn_line, 2,0,1,1)\n        self.btn_plot.clicked.connect(self.btnPlot)\n        self.btn_line.clicked.connect(self.btnLine)\n\n    def btnPlot(self):\n        self.checked = self.btn_plot.isChecked()\n        self.Graphics = Graphics('plot', self.checked, self.axes)\n\n    def btnLine(self):\n        self.checked = self.btn_line.isChecked()\n        self.Graphics = Graphics('line', self.checked, self.axes)\n\nclass Graphics:\n    def __init__(self, typeGraph, checked, axes):\n        self.typeGraph = typeGraph\n        self.checked = checked\n        self.axes = axes\n        if self.typeGraph == 'plot': self.drawPlot()\n        if self.typeGraph == 'line': self.drawLine()\n\n    def drawPlot(self):\n        if self.checked == True:\n            self.plot = self.axes.plot([10,20,30], [5,10,2], 'o')\n        else:\n            self.plot.remove()\n        self.axes.figure.canvas.draw()\n\n    def drawLine(self):\n        if self.checked == True:\n            self.vline1 = self.axes.axvline(x=15, linestyle=\"dashed\", color=\"#595959\")\n            self.vline2 = self.axes.axvline(x=25, linestyle=\"dashed\", color=\"#595959\")\n        else:\n            self.vline1.remove()\n            self.vline2.remove()\n        self.axes.figure.canvas.draw()\n\nif __name__ == \"__main__\":\n    app = QtWidgets.QApplication(sys.argv)\n    prog = Mainwindow()   \n    prog.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "edited": false, "score": 0, "creation_date": 1565825707, "post_id": 57503163, "comment_id": 101475259, "body": "google np.arange..first hit - <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.arange.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy/reference/generated/numpy.arange.ht&zwnj;&#8203;ml</a>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1565827150, "post_id": 57503163, "comment_id": 101475518, "body": "Just add 13 to that array - <code>test += 13</code>"}], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 1762226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f246b999cc730a9d5801015ff5c70f23?s=128&d=identicon&r=PG", "display_name": "acurtis", "link": "https://stackoverflow.com/users/1762226/acurtis"}, "is_accepted": true, "score": 2, "last_activity_date": 1565825234, "creation_date": 1565825234, "answer_id": 57503213, "question_id": 57503163, "link": "https://stackoverflow.com/questions/57503163/how-do-i-initialize-a-numpy-array-starting-at-a-particular-number/57503213#57503213", "title": "How do I initialize a numpy array starting at a particular number?", "body": "<p><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.arange.html\" rel=\"nofollow noreferrer\">arange</a> takes an optional <code>start</code> argument.</p>\n\n<pre><code>start = 13 # Any number works here\nnp.arange(start, start + 32).reshape(4, 8)\n\n# array([[13, 14, 15, 16, 17, 18, 19, 20],\n#        [21, 22, 23, 24, 25, 26, 27, 28],\n#        [29, 30, 31, 32, 33, 34, 35, 36],\n#        [37, 38, 39, 40, 41, 42, 43, 44]])\n</code></pre>\n"}], "owner": {"reputation": 2355, "user_id": 6039830, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kM2Pw.jpg?s=128&g=1", "display_name": "hrokr", "link": "https://stackoverflow.com/users/6039830/hrokr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 57503213, "answer_count": 1, "score": -2, "last_activity_date": 1565825312, "creation_date": 1565824817, "last_edit_date": 1565825312, "question_id": 57503163, "link": "https://stackoverflow.com/questions/57503163/how-do-i-initialize-a-numpy-array-starting-at-a-particular-number", "title": "How do I initialize a numpy array starting at a particular number?", "body": "<p>I can initialize a numpy array and reshape it at the time of creation.</p>\n\n<pre><code>test = np.arange(32).reshape(4, 8)\n</code></pre>\n\n<p>which produces this:</p>\n\n<pre><code>array([[ 0,  1,  2,  3,  4,  5,  6,  7],\n   [ 8,  9, 10, 11, 12, 13, 14, 15],\n   [16, 17, 18, 19, 20, 21, 22, 23],\n   [24, 25, 26, 27, 28, 29, 30, 31]])\n</code></pre>\n\n<p>... but I'd like to know how to start the sequential numbering at a given point, say at 13 rather than at 0. How is that done in numpy?</p>\n\n<p>I've looked for answers and found something <a href=\"https://stackoverflow.com/questions/4535374/initialize-a-numpy-array\">somewhat similar</a> but it seems there would be a numpy command to do this.</p>\n"}, {"tags": ["python", "date", "time"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565824165, "post_id": 57503080, "comment_id": 101474995, "body": "there are other modules for date/time - maybe one of them can parse it: <a href=\"https://opensource.com/article/18/4/python-datetime-libraries\" rel=\"nofollow noreferrer\">6 Python datetime libraries</a>"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565825132, "post_id": 57503080, "comment_id": 101475155, "body": "you can also try regex: <code>re.search(&#39;(?:(\\d+)d)?(?:(\\d+)h)?(?:(\\d+)m)?(?:(\\d+)s)?&#39;, item).groups()</code> to work with <code>&#39;2d1h39m53s&#39;, &#39;1h39m53s&#39;, &#39;39m53s&#39;, &#39;53s&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 347, "user_id": 10609562, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o4O6FVaXH9g/AAAAAAAAAAI/AAAAAAAAC8I/px5338iJPDc/photo.jpg?sz=128", "display_name": "Anderson Oliveira", "link": "https://stackoverflow.com/users/10609562/anderson-oliveira"}, "is_accepted": false, "score": 0, "last_activity_date": 1565826512, "creation_date": 1565826512, "answer_id": 57503336, "question_id": 57503080, "link": "https://stackoverflow.com/questions/57503080/how-to-convert-elapsed-time-string-to-seconds-in-python/57503336#57503336", "title": "How to convert elapsed time string to seconds in Python", "body": "<p>I wrote it to days before to clearly verify the runtime. After the two defs below just write 'tic()' at the start point in your code where you want count and 'toc()' at the end point, and it will give you a clear time data to read. Hope it helps. </p>\n\n<pre><code>import time\nimport math\n\n\ndef tic():\n    global startTime_for_tictoc\n    startTime_for_tictoc = time.time()\n\n\ndef toc():\n    if 'startTime_for_tictoc' in globals():\n        tf = time.time() - startTime_for_tictoc;\n        if tf &lt; 60:\n            print(\"\\nElapsed time: %f seconds.\\n\" % tf)\n        elif 60 &lt; tf &lt; 3600:\n            mm = math.floor(tf/60)\n            ss = tf - (60*mm)\n            print(\"\\nElapsed time: %d minute(s) and %f seconds.\\n\" % (mm, ss))\n        elif 3600 &lt; tf &lt; 86400:\n            hh = math.floor(tf/3600)\n            mm = math.floor((tf-(hh*3600))/60)\n            ss = tf - (hh*3600) - (60*mm)\n            print(\"\\nElapsed time: %d hour(s) %d minute(s) and %f seconds.\\n\" % (hh, mm, ss))\n        elif tf &gt; 86400:\n            dd = math.floor(tf/86400)\n            hh = math.floor((tf-(dd*86400))/3600)\n            mm = math.floor((tf-(dd*86400)-(hh*3600))/60)\n            ss = tf - (86400*dd) - (hh*3600) - (60*mm)\n            print(\"\\nElapsed time: %d day(s) %d hour(s) %d minute(s) and %f seconds.\\n\" % (dd, hh, mm, ss))\n    else:\n        print(\"\\nToc: start time not set\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 11816508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb77ac2267b8683197f35816426b1d96?s=128&d=identicon&r=PG&f=1", "display_name": "brickbobed", "link": "https://stackoverflow.com/users/11816508/brickbobed"}, "is_accepted": false, "score": 0, "last_activity_date": 1565827030, "creation_date": 1565827030, "answer_id": 57503383, "question_id": 57503080, "link": "https://stackoverflow.com/questions/57503080/how-to-convert-elapsed-time-string-to-seconds-in-python/57503383#57503383", "title": "How to convert elapsed time string to seconds in Python", "body": "<p>Not sure if there is a function out there but this will get the job done. Will work with values such as \"2d1h53s\" as well.</p>\n\n<pre><code>d = []\nh = []\nm = []\ns = []\nsd = 0\nsh = 0\nsm = 0\nss = 0\n\nstr = \"2d1h39m53s\"\n\ni = 0\nif str.find(\"d\") &gt; 0:\n    i = str.find(\"d\")\n    d.append(str[0:i])\n    str = str[i:]\nif str.find(\"h\") &gt; 0:\n    i = str.find(\"h\")\n    h.append(str[1:i])\n    str = str[i:]\nif str.find(\"m\") &gt; 0:\n    i = str.find(\"m\")\n    m.append(str[1:i])\n    str = str[i:]\nif str.find(\"s\") &gt; 0:\n    i = str.find(\"s\")\n    s.append(str[1:i])\n    str = str[i:]\n\ntry:\n    sd = float(d[0]) * 24 * 60 * 60\nexcept:\n    sd = 0\ntry:\n    sh = float(h[0]) * 60 * 60\nexcept:\n    sh = 0\ntry:\n    sm = float(m[0]) * 60\nexcept:\n    sm = 0\ntry:\n    ss = float(s[0])\nexcept:\n    ss = 0\n\nprint(\"seconds\")\nsec = sd + sh + sm + ss\nprint(sec)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "is_accepted": false, "score": 0, "last_activity_date": 1565829422, "last_edit_date": 1565829422, "creation_date": 1565828726, "answer_id": 57503552, "question_id": 57503080, "link": "https://stackoverflow.com/questions/57503080/how-to-convert-elapsed-time-string-to-seconds-in-python/57503552#57503552", "title": "How to convert elapsed time string to seconds in Python", "body": "<p>If your datetime has exactly the given format you could do the following:</p>\n\n<pre><code>import re\nimport numpy as np\nfrom functools import reduce\n\nsplit_strings = ['D', 'h','m','s']\ndef datestring_to_seconds(datestring):\n    values_and_units = [(int(string[:-1]), string[-1]) for string in [re.search(f\"([0-9]+){split_string}\", \n                            f\"{datestring}\".replace('d', 'D')).group(0) for split_string in split_strings]]\n    return reduce(lambda x,y : x+y, [np.timedelta64(*x) for x in values_and_units])/np.timedelta64(1, 's')\n</code></pre>\n\n<p>result    </p>\n\n<pre><code>datestring_to_seconds(\"2d1h39m53s\")\n178793.0\n</code></pre>\n\n<p>Some explanation:\nFirst search in the string for any to a match of up to two digits in front of one of the <code>split_strings</code> (e.g. <code>39m</code>) then we convert this to a tuple <code>(39, \"m\")</code>. We perform this operation with every string in <code>split_strings</code> and save the result in the list <code>values_and_units</code>, which looks in our special case like this:</p>\n\n<pre><code>[(2, 'D'), (1, 'h'), (39, 'm'), (53, 's')]\n</code></pre>\n\n<p>Each element of these can now be casted to a numpy timedelta64. The reduce operation adds up all the timedeltas and dividing by a <code>np.timedelta64(1, 's')</code> gives us a float with the desired seconds.</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 8615607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bfb29fdb332015dbd6978795149159e?s=128&d=identicon&r=PG&f=1", "display_name": "user8615607", "link": "https://stackoverflow.com/users/8615607/user8615607"}, "edited": false, "score": 0, "creation_date": 1565885048, "post_id": 57503636, "comment_id": 101493417, "body": "All great answers, thank you.  This one by Chris worked great.  I just added weeks and months also to string. Thank you again"}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 0, "last_activity_date": 1565838440, "last_edit_date": 1565838440, "creation_date": 1565829911, "answer_id": 57503636, "question_id": 57503080, "link": "https://stackoverflow.com/questions/57503080/how-to-convert-elapsed-time-string-to-seconds-in-python/57503636#57503636", "title": "How to convert elapsed time string to seconds in Python", "body": "<p>Here is a pure python solution.</p>\n\n<pre><code>import re\n\ns = '2d1h39m53s'\nd = {'d':86400,'h':3600, 'm':60, 's':1}\n\nsecs = 0\nm = re.match(r'(\\d+)([dhms])', s)\n\nwhile m is not None:\n    secs += int(m.group(1)) * d[m.group(2)]\n    s = re.sub(r'\\d+[dhms]', '', s, 1)\n    m = re.match(r'(\\d+)([dhms])', s)\n\nprint(secs)\n\n\nprint(secs)\n</code></pre>\n\n<p>Prints: 178793</p>\n\n<p>EDIT: To use match.end() to locate beginning of next search. Not destructive of string, s, and a cleaner solution.</p>\n\n<pre><code>import re\n\ns = '2d1h39m53s'\nd = {'d':86400,'h':3600, 'm':60, 's':1}\n\nsecs = 0\npat = re.compile('(\\d+)([dhms])')\n\nm = pat.search(s)\n\nwhile m is not None:\n    pos = m.end()\n    secs += int(m.group(1)) * d[m.group(2)]\n    m = pat.search(s, pos)\n\nprint(secs)\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 8615607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bfb29fdb332015dbd6978795149159e?s=128&d=identicon&r=PG&f=1", "display_name": "user8615607", "link": "https://stackoverflow.com/users/8615607/user8615607"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 508, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1565838440, "creation_date": 1565823913, "question_id": 57503080, "link": "https://stackoverflow.com/questions/57503080/how-to-convert-elapsed-time-string-to-seconds-in-python", "title": "How to convert elapsed time string to seconds in Python", "body": "<p>Does anyone know if there is an \"easy\" function which will convert the following elapsed time string to seconds?\n2d1h39m53s </p>\n\n<p>Depending on how much time has elapsed, not all the fields will be present.  </p>\n\n<p>I've looked at strptime and datetime but nothing seemed to fit the bill without writing my own function for this.  Just looking to save some time.\nThx</p>\n"}, {"tags": ["python", "django", "postgresql"], "comments": [{"owner": {"reputation": 2176, "user_id": 5548239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3d4b389a1348b049b1411d2be29d5515?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Swain", "link": "https://stackoverflow.com/users/5548239/dan-swain"}, "edited": false, "score": 0, "creation_date": 1565825426, "post_id": 57503060, "comment_id": 101475216, "body": "Should <code>taxon = models.ForeignKey(&quot;Specimen&quot;)</code> on <code>Imaging</code> actually be <code>specimen = models.ForeignKey(&quot;Specimen&quot;)</code>?"}, {"owner": {"reputation": 3, "user_id": 3527854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d2764a9048509da80d16e3fdbe25760?s=128&d=identicon&r=PG&f=1", "display_name": "user3527854", "link": "https://stackoverflow.com/users/3527854/user3527854"}, "reply_to_user": {"reputation": 2176, "user_id": 5548239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3d4b389a1348b049b1411d2be29d5515?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Swain", "link": "https://stackoverflow.com/users/5548239/dan-swain"}, "edited": false, "score": 0, "creation_date": 1565829033, "post_id": 57503060, "comment_id": 101475795, "body": "No, the specimen is associated to a &#39;taxon&#39; For example, your dog Rolf is a specimen. Rolf belongs to the taxon &#39;dog&#39; and you can take several images of &#39;rolf&#39; (the specimen). So &#39;rolf&#39; has a property &#39;taxon&#39; which would return &#39;dog&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 214, "user_id": 5878036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1239661cdf9a38edbf9c2a4cb2228827?s=128&d=identicon&r=PG&f=1", "display_name": "bromosapien", "link": "https://stackoverflow.com/users/5878036/bromosapien"}, "is_accepted": true, "score": 2, "last_activity_date": 1565825572, "creation_date": 1565825572, "answer_id": 57503253, "question_id": 57503060, "link": "https://stackoverflow.com/questions/57503060/django-values-list-extremely-slow-on-large-dataset/57503253#57503253", "title": "Django values_list extremely slow on large dataset", "body": "<p>Your annotation could be more efficient if you group by specimen using <code>.values()</code> before the annotation to get a count of all the images for each specimen.</p>\n\n<pre><code>image_list = list(\n    Imaging.objects\n    .values('specimen')\n    .annotate(items_per_taxon=Count('*'))\n    .filter(items_per_taxon__gte=100)\n    .values_list('image', 'specimen__taxon')\n)\n</code></pre>\n\n<p><strong>Since you're new</strong>, please be sure to mark an answer as correct using the check mark next to the answer and to vote if it helps you.</p>\n"}], "owner": {"reputation": 3, "user_id": 3527854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d2764a9048509da80d16e3fdbe25760?s=128&d=identicon&r=PG&f=1", "display_name": "user3527854", "link": "https://stackoverflow.com/users/3527854/user3527854"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 57503253, "answer_count": 1, "score": 0, "last_activity_date": 1565825572, "creation_date": 1565823673, "question_id": 57503060, "link": "https://stackoverflow.com/questions/57503060/django-values-list-extremely-slow-on-large-dataset", "title": "Django values_list extremely slow on large dataset", "body": "<p>Getting a values_list in django is extremely slow on a large dataset (6M+ items).</p>\n\n<p>I have a Django application with a DB structure like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Taxon(models.Model):\n   name = models.TextField()\n\nclass Specimen(models.Model):\n   taxon = models.ForeignKey(\"Taxon\", related_name='specimens')\n\nclass Imaging(models.Model):\n   taxon = models.ForeignKey(\"Specimen\")\n   image = models.ImageField((\"Imaging\"))\n\n</code></pre>\n\n<p>And need to get a list of all (images, taxon) belonging to a Taxon, if there are more than \"100\" images of that taxon. </p>\n\n<p>This worked fine in development with a small database:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>image_list = list(Imaging.objects\n.annotate(items_per_taxon=Count('specimen__taxon__specimens__images'))\n                          .filter(items_per_taxon__gte=100)\n                          .values_list('image', 'specimen__taxon'))\n</code></pre>\n\n<p>But takes 30 minutes on a full dataset (6M Taxon rows, and 2M image rows).</p>\n\n<p>Is there a way of indexing the 'foreign key of a foreign key' or creating a virtual column in postgres that can make this faster?</p>\n"}, {"tags": ["python", "matplotlib", "quantitative-finance"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1565824577, "post_id": 57503038, "comment_id": 101475064, "body": "It might just be behind all other plots? I&#39;d recommend either only using <code>fig, arrayofax = plt.subplots(totalPlots+1, 1)</code> <i>or</i> <code>plt.figure()</code> followed by individual <code>plt.subplot(...)</code>. (Btw. <code>plt.subplot(totalPlots, 1, n)</code> is much more readable than the string casting you perform.) Please also read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 11, "user_id": 11929557, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--ScwjodMRzE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddm5cK7ocHg_Q_2eMGyVpoVdlb8w/photo.jpg?sz=128", "display_name": "Noah Fischer", "link": "https://stackoverflow.com/users/11929557/noah-fischer"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1565835235, "post_id": 57503038, "comment_id": 101476813, "body": "What do you mean by behind?  I tried the same thing without the scatter and it was still blank.  Thank you for the recommendation, I totally forgot about the comma syntax for subplots.  I&#39;ll also try specifying the subplots."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1565835349, "post_id": 57503038, "comment_id": 101476826, "body": "I guess I can only help further with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "owner": {"reputation": 11, "user_id": 11929557, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--ScwjodMRzE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddm5cK7ocHg_Q_2eMGyVpoVdlb8w/photo.jpg?sz=128", "display_name": "Noah Fischer", "link": "https://stackoverflow.com/users/11929557/noah-fischer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565826012, "creation_date": 1565823488, "last_edit_date": 1565826012, "question_id": 57503038, "link": "https://stackoverflow.com/questions/57503038/mpl-finance-candlestick2-ohlc-returns-a-blank-graph-when-given-a-subplot", "title": "mpl_finance.candlestick2_ohlc returns a blank graph when given a subplot?", "body": "<p>Below is my code that is giving me difficulties. I am trying to plot a line chart as the top row with a dynamically created number of subplots below, at least one of which will be a candlestick chart.</p>\n\n<p>When I graph the candlestick2_ohlc by itself, without creating a subplot for it and without graphing any other subplot, it works perfectly. When I try to use subplots and include the other graphs, however, It turns out having everything graphed perfectly, except the candlesticks are completely missing. I have no idea what would cause this behavior, however I know that no other graphs are overriding it on the same plot. Any help would be greatly appreciated. Thanks</p>\n\n<pre><code>def plot(self):\n    def mydate(x, pos):\n        '''function for labeling xticks as datetime objects'''\n        try:\n            return self.broker.data.index[int(x)]\n        except IndexError:\n            return ''\n\n    totalPlots = 1\n    plotNum = 1\n    for indicator in self.indicators:\n        if not indicator.plotWithData:\n            totalPlots += 1\n    for data in self.broker.data:\n        totalPlots += 1\n\n    fig, ax = plt.subplots()\n\n\n    ax.xaxis.set_major_locator(tickerGraph.MaxNLocator(10))  # number of xtick labels\n    ax.xaxis.set_major_formatter(tickerGraph.FuncFormatter(mydate))  # use nested method to label xticks\n    plt.subplot(int(str(str(totalPlots) + '1' + str(plotNum))))  # top plot is always account value\n    plt.title('Account Value')\n\n    plt.plot(list(self.broker.data.values())[0].df.index, self.broker.valueData)\n\n    for ticker in self.broker.data.keys():\n        plotNum += 1\n        plt.subplot(int(str(str(totalPlots) + '1' + str(plotNum))))\n        plt.title(ticker)\n        candlestick2_ohlc(ax=ax, opens=self.broker.data[ticker].df['open'], highs=self.broker.data[ticker].df['high'],\n                          lows=self.broker.data[ticker].df['low'], closes=self.broker.data[ticker].df['close'],\n                          width=.6, colorup='g', colordown='r')\n\n        for trade in self.plotTrades[ticker]:\n            plt.scatter(list(self.broker.data.values())[0].df.index[trade.index], self.broker.data[ticker].df.iloc[trade.index]['close'], c=trade.color) ##IMPROVE\n\n        for indicator in self.indicators:\n            if indicator.plotWithData:\n                plt.plot(indicator.ydata[ticker])\n\n    for indicator in self.indicators:\n        if not indicator.plotWithData:\n            plotNum += 1[enter image description here][1]\n            plt.subplot(int(str(str(totalPlots) + '1' + str(plotNum))))\n            plt.plot(indicator.ydata[ticker])\n            plt.title(indicator.name + ' ' + ticker)\n\n    plt.show()\n</code></pre>\n\n<p>Here is what the weird, blank graph looks like:</p>\n\n<p><img src=\"https://i.stack.imgur.com/OgKt4.png\" alt=\"Generated graph\"></p>\n"}, {"tags": ["javascript", "python", "jquery", "flask", "jinja2"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565823432, "post_id": 57503008, "comment_id": 101474865, "body": "Are there any errors in the console? Do you see the AJAX request being sent in the Network tab?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565823513, "post_id": 57503008, "comment_id": 101474879, "body": "I can&#39;t think of any reason why <code>console.log()</code> would log a different URL from the one that <code>jQuery.get</code> uses. I suspect there are some extra whitespace characters that you didn&#39;t notice in the log."}, {"owner": {"reputation": 2770, "user_id": 4123372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554c51966d0ad0646b8d62f8d25dccd3?s=128&d=identicon&r=PG&f=1", "display_name": "Train", "link": "https://stackoverflow.com/users/4123372/train"}, "edited": false, "score": 0, "creation_date": 1565823716, "post_id": 57503008, "comment_id": 101474917, "body": "If we can&#39;t compare them, we can only guess they are different."}, {"owner": {"reputation": 325, "user_id": 4403891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c189bd08eff508fa0010e81a7f47cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "musca999", "link": "https://stackoverflow.com/users/4403891/musca999"}, "edited": false, "score": 0, "creation_date": 1565823978, "post_id": 57503008, "comment_id": 101474965, "body": "I wrapped the console.log output in brackets and don&#39;t see any spaces:      [/static/1565823591.563554/healthCheck.txt]  That is output from the browser console. And that is what I hardcode in the url portion of the $.get() and it works."}, {"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 1, "creation_date": 1565824891, "post_id": 57503008, "comment_id": 101475121, "body": "But do you actually <i>serve</i> the js file this code is in through jinja&#39;s renderer with the appropriate context variable <code>fName</code> set? Because if you don&#39;t, that template variable isn&#39;t a template variable: it&#39;s just the literal string <code>{{ fName }}</code>."}, {"owner": {"reputation": 325, "user_id": 4403891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c189bd08eff508fa0010e81a7f47cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "musca999", "link": "https://stackoverflow.com/users/4403891/musca999"}, "reply_to_user": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1565825566, "post_id": 57503008, "comment_id": 101475243, "body": "@Mike  I&#39;m calling the template from python as follows:      <code>def hcheck():         print(&quot;hckeck get&quot;)         baseName = &#39;&#47;static&#47;&#39; + str(time.time())         createDir(appDir + baseName)         return render_template(&quot;hcheck_form.html&quot;, fName = baseName+&#39;&#47;healthCheck.txt&#39;)</code>  The code is in the hcheck_form.html. Is that what you meant?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565831984, "post_id": 57503008, "comment_id": 101476249, "body": "You still haven&#39;t said what you see in the Network tab. Is it sending the <code>GET</code> request? Is it being sent to the correct URL? Is a response being received?"}, {"owner": {"reputation": 325, "user_id": 4403891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c189bd08eff508fa0010e81a7f47cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "musca999", "link": "https://stackoverflow.com/users/4403891/musca999"}, "edited": false, "score": 0, "creation_date": 1565839069, "post_id": 57503008, "comment_id": 101477403, "body": "Sorry...got sidetracked. Here is the content of the GET:  <code>Request URL: http:&#47;&#47;bla.bla.com:5000&#47;static&#47;1565824085.5153692&#47;healthChec&zwnj;&#8203;k.txt Request Method: GET Status Code: 200 OK Remote Address: x.x.x.x:5000 Referrer Policy: no-referrer-when-downgrade Accept-Ranges: bytes Cache-Control: public, max-age=43200 Content-Length: 1 Content-Type: text&#47;plain; charset=utf-8 Date: Wed, 14 Aug 2019 23:08:10 GMT ETag: &quot;1565824089.0187044-1-885397204&quot; Expires: Thu, 15 Aug 2019 11:08:10 GMT Accept: *&#47;* Referer: http:&#47;&#47;bla.bla.com:5000&#47;hcheck?radioId=hcheck X-Requested-With: XMLHttpRequest&#39;</code>"}, {"owner": {"reputation": 325, "user_id": 4403891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c189bd08eff508fa0010e81a7f47cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "musca999", "link": "https://stackoverflow.com/users/4403891/musca999"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565977037, "post_id": 57503008, "comment_id": 101523893, "body": "@Barmar Please see updates above."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565980606, "post_id": 57503008, "comment_id": 101525218, "body": "I wouldn&#39;t worry about <code>Accept-ranges</code>, that just means that the Flask server is able to accept requests for partial data, see <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Ranges\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Ran&zwnj;&#8203;ges</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565980713, "post_id": 57503008, "comment_id": 101525257, "body": "To disable caching, use <code>$.ajax</code> instead of <code>$.get</code>, and use the <code>cache: false</code> option. Or just add a cachebuster to the URL (that&#39;s what the option does)."}, {"owner": {"reputation": 325, "user_id": 4403891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c189bd08eff508fa0010e81a7f47cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "musca999", "link": "https://stackoverflow.com/users/4403891/musca999"}, "edited": false, "score": 0, "creation_date": 1566078169, "post_id": 57503008, "comment_id": 101544431, "body": "@Barman That\u2019s what I ended up doing thanks. Tried answering my own question yesterday but was barred by the system due to my noob\u2019iness :)."}], "owner": {"reputation": 325, "user_id": 4403891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c189bd08eff508fa0010e81a7f47cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "musca999", "link": "https://stackoverflow.com/users/4403891/musca999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565987813, "creation_date": 1565823252, "last_edit_date": 1565987813, "question_id": 57503008, "link": "https://stackoverflow.com/questions/57503008/cant-use-jinja-variable-in-jquery-get", "title": "Can&#39;t use Jinja variable in jQuery.get()", "body": "<p>When I try to use a URL variable in jQuery.get, it doesn't work. But when I hardcode the contents, it works fine.</p>\n\n<p>javascript:</p>\n\n<pre><code>1 - function readFile() {\n2 -   var myurl = '{{ fName }}';         &lt;&lt;&lt; jinja variable containing filename\n3 -   console.log(myurl);                &lt;&lt;&lt; prints correct URL in console\n4 -   jQuery.get(myurl, function(data){\n5 -    console.log(data);                &lt;&lt;&lt; outputs a period (ie \".\")\n6 -    jQuery('#target').html(data);\n7 -  });\n8 - }\n</code></pre>\n\n<p>If I hardcode the output from line 3 into myurl in line 4, the function works and reads the file and displays its contents in the console.</p>\n\n<p>I tried putting single quotes, double quotes, you name it around myurl in line 4 and nothing works.</p>\n\n<p>@Mike</p>\n\n<p>I'm calling the template from python as follows:</p>\n\n<pre><code>def hcheck():\n    print(\"hckeck get\")\n    baseName = '/static/' + str(time.time())\n    createDir(appDir + baseName)\n    return render_template(\"hcheck_form.html\", fName = baseName+'/healthCheck.txt')\n</code></pre>\n\n<p>The js code is in the hcheck_form.html. Is that what you meant?</p>\n\n<p><strong>* UPDATE 1 *</strong>\nI compared the web.py Response Header (working) with the Flask Response Header, and I think that may be the root cause of my issue. Web.py returns the following:</p>\n\n<pre><code>Web.py\n======\nRequest URL:         \nhttps://&lt;url&gt;:8080/static/1565974246.91/healthCheck.txt\nRequest Method: GET\nStatus Code: 200 \nRemote Address: &lt;ip&gt;:8080\nReferrer Policy: no-referrer-when-downgrade\nContent-Length: 22\nContent-type: text/plain\nDate: Fri, 16 Aug 2019 16:50:54 GMT\nETag: \"1565974253.04\"\nLast-Modified: Fri, 16 Aug 2019 16:50:53 GMT\nServer: localhost\nProvisional headers are shown\nAccept: */*\nReferer: https://&lt;url&gt;:8080/\nSec-Fetch-Mode: cors\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 \n(KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36\nX-Requested-With: XMLHttpRequest\n\nFlask\n=====\nRequest URL: \nhttp://&lt;url&gt;:5000/static/1565974312.1353812/healthCheck.txt\nRequest Method: GET\nStatus Code: 200 OK\nRemote Address: &lt;ip&gt;:5000\nReferrer Policy: no-referrer-when-downgrade\nAccept-Ranges: bytes\nCache-Control: public, max-age=43200\nContent-Length: 1\nContent-Type: text/plain; charset=utf-8\nDate: Fri, 16 Aug 2019 16:51:58 GMT\nETag: \"1565974317.914523-1-875239115\"\nExpires: Sat, 17 Aug 2019 04:51:58 GMT\nLast-Modified: Fri, 16 Aug 2019 16:51:57 GMT\nServer: Werkzeug/0.15.4 Python/3.7.1\nProvisional headers are shown\nAccept: */*\nReferer: http://&lt;url&gt;:5000/hcheck?radioId=hcheck\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36     \n(KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36\nX-Requested-With: XMLHttpRequest\n</code></pre>\n\n<p>Not being a web expert, I have a feeling it has something to do with Accept-Ranges: bytes, which isn't in the web.py header. Not sure. Is there a way to modify the Flask header to make it match what web.py returns? Thx</p>\n\n<p><strong>* UPDATE 2 *</strong>\nWell this is embarrasing. Since I'm serving a static file, it is being cached and only shows original content, and not updated content as the function is updating it. If I manually clear the cache as the function is running, I can see the updates. No i just need to figure out how to turn off caching in Flask and I should be good to go. Thx</p>\n"}, {"tags": ["python", "apache-spark", "serialization", "pyspark", "py4j"], "comments": [{"owner": {"reputation": 59, "user_id": 5397509, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8wYUxYmYx8s/AAAAAAAAAAI/AAAAAAAAAHM/-aevIInUcm0/photo.jpg?sz=128", "display_name": "Fahad Sheikh", "link": "https://stackoverflow.com/users/5397509/fahad-sheikh"}, "edited": false, "score": 0, "creation_date": 1565897537, "post_id": 57502975, "comment_id": 101498394, "body": "After further exploration, I understand above code is launching a new gateway with the classpath, which is fine, but that gateway returns all <code>gateway._gateway_client.converters</code> as None. That is leading to the above error. Why would launching a new gateway not support any converters?"}], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 5397509, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8wYUxYmYx8s/AAAAAAAAAAI/AAAAAAAAAHM/-aevIInUcm0/photo.jpg?sz=128", "display_name": "Fahad Sheikh", "link": "https://stackoverflow.com/users/5397509/fahad-sheikh"}, "is_accepted": false, "score": 0, "last_activity_date": 1565973568, "creation_date": 1565973568, "answer_id": 57528247, "question_id": 57502975, "link": "https://stackoverflow.com/questions/57502975/py4j-serialization-attributeerror-dict-object-has-no-attribute-get-object/57528247#57528247", "title": "Py4J Serialization: AttributeError: &#39;dict&#39; object has no attribute &#39;_get_object_id&#39;", "body": "<p>Found the answer, listed here:</p>\n\n<p><a href=\"https://www.py4j.org/advanced_topics.html#converting-python-collections-to-java-collections\" rel=\"nofollow noreferrer\">https://www.py4j.org/advanced_topics.html#converting-python-collections-to-java-collections</a></p>\n\n<p>I just had to convert it manually myself.</p>\n\n<pre><code>from py4j.java_collections import MapConverter\ninput_dict = {0: 123}\nmc_run_map_dict = MapConverter().convert(input_dict, gateway_handle._gateway_client)\ntemp = jvm.com.my.code.PyUtil.fullMap(mc_run_map_dict)\n\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 5397509, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8wYUxYmYx8s/AAAAAAAAAAI/AAAAAAAAAHM/-aevIInUcm0/photo.jpg?sz=128", "display_name": "Fahad Sheikh", "link": "https://stackoverflow.com/users/5397509/fahad-sheikh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 747, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565973568, "creation_date": 1565822853, "question_id": 57502975, "link": "https://stackoverflow.com/questions/57502975/py4j-serialization-attributeerror-dict-object-has-no-attribute-get-object", "title": "Py4J Serialization: AttributeError: &#39;dict&#39; object has no attribute &#39;_get_object_id&#39;", "body": "<p>Using Py4J, I am not able to parse a Python dictionary object into the underlying JVM instance.</p>\n\n<p>I have written a PySpark code where I'm running a UDF/lambda function on a RDD. My goal is to run a piece of Python code on each row of the RDD that requires to connect to the underlying JVM, per executor core, in order to get a Java class instance from a custom jar (source code is in Scala) that I deploy using --jars function during spark submit. I've tried the below example but get the mentioned error. This code runs on each executor core in a Spark 2.3 cluster with Cloudera distribution. Masked the code a little for security reasons.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from py4j.java_gateway import JavaGateway, launch_gateway\ngateway = JavaGateway().launch_gateway(classpath='custom-code.jar:scala-library-2.11.8.jar:spark-catalyst_2.11-2.3.0.cloudera3.jar:scala-reflect-2.11.8.jar', jarpath='&lt;path-to-py4j-jar&gt;/py4j-0.10.7.jar')\njvm = gateway.jvm\ninput_dict = {0: 123}\ntemp = jvm.com.my.code.PyUtil.fullMap(input_dict)\n\n  File \"/opt/cloudera/parcels/SPARK2-2.3.0.cloudera3-1.cdh5.13.3.p0.458809/lib/spark2/python/lib/py4j-0.10.7-src.zip/py4j/java_gateway.py\", line 1248, in __call__\n    args_command, temp_args = self._build_args(*args)\n  File \"/opt/cloudera/parcels/SPARK2-2.3.0.cloudera3-1.cdh5.13.3.p0.458809/lib/spark2/python/lib/py4j-0.10.7-src.zip/py4j/java_gateway.py\", line 1218, in _build_args\n    [get_command_part(arg, self.pool) for arg in new_args])\n  File \"/opt/cloudera/parcels/SPARK2-2.3.0.cloudera3-1.cdh5.13.3.p0.458809/lib/spark2/python/lib/py4j-0.10.7-src.zip/py4j/java_gateway.py\", line 1218, in &lt;listcomp&gt;\n    [get_command_part(arg, self.pool) for arg in new_args])\n  File \"/opt/cloudera/parcels/SPARK2-2.3.0.cloudera3-1.cdh5.13.3.p0.458809/lib/spark2/python/lib/py4j-0.10.7-src.zip/py4j/protocol.py\", line 298, in get_command_part\n    command_part = REFERENCE_TYPE + parameter._get_object_id()\nAttributeError: 'dict' object has no attribute '_get_object_id'\n\n</code></pre>\n\n<p>Oddly enough, when I run the exact same code, but call a different function of my custom jar, which takes in a String rather dict, it runs perfectly fine and I get a py4j.java_gateway.JavaObject back, which is what I intend to get here.</p>\n\n<p>Looking at the release notes for py4j, I understand dictionaries have been supported since 0.5 version so I am not sure what exactly I am doing wrong here? I suspect something wrong with the gateway launch. </p>\n\n<p>Any directional help would be appreciated.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565822931, "post_id": 57502971, "comment_id": 101474775, "body": "It&#39;s probably a copying error. If this is in the real code, he&#39;d get an error from referencing a variable before assigning it."}, {"owner": {"reputation": 177, "user_id": 6143017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9108a2264a8b5addee66886d26496f08?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/6143017/adrian"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565823114, "post_id": 57502971, "comment_id": 101474809, "body": "He creates and utilizes the initial reference to <code>value</code> in the first for loop but when performing the second for loop, his intention is to overwrite the same variable. Instead, he creates a NEW <code>values</code> variable but continues to use the already existing <code>value</code> variable which is never updated, thus leading to the repeated data."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565823168, "post_id": 57502971, "comment_id": 101474817, "body": "For some reason I thought they were different functions, so the variables would be local."}, {"owner": {"reputation": 1, "user_id": 4783836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/894e35ae856c4c3239f37c233038e0c4?s=128&d=identicon&r=PG&f=1", "display_name": "leon_vynehall", "link": "https://stackoverflow.com/users/4783836/leon-vynehall"}, "edited": false, "score": 0, "creation_date": 1565970565, "post_id": 57502971, "comment_id": 101521410, "body": "Got it. Thanks Adrian!"}, {"owner": {"reputation": 177, "user_id": 6143017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9108a2264a8b5addee66886d26496f08?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/6143017/adrian"}, "edited": false, "score": 0, "creation_date": 1565970617, "post_id": 57502971, "comment_id": 101521423, "body": "Glad it worked for you, please consider marking this answer as accepted if it solved your question. Cheers!"}], "tags": [], "owner": {"reputation": 177, "user_id": 6143017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9108a2264a8b5addee66886d26496f08?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/6143017/adrian"}, "is_accepted": false, "score": 0, "last_activity_date": 1565822801, "creation_date": 1565822801, "answer_id": 57502971, "question_id": 57502945, "link": "https://stackoverflow.com/questions/57502945/for-loop-replaces-all-values-with-41/57502971#57502971", "title": "For loop replaces all values with 41", "body": "<p>It appears there may have been a typo (<code>values</code> vs <code>value</code>). Since this assignment never occurs on your expected variable, you are comparing the value set from the previous for loop's last iteraton.</p>\n\n<p>Inside your 2019 for loop:</p>\n\n<p><code>values = sites_2019.at[idx,i]</code></p>\n\n<p>Should be </p>\n\n<p><code>value = sites_2019.at[idx,i]</code></p>\n"}], "owner": {"reputation": 1, "user_id": 4783836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/894e35ae856c4c3239f37c233038e0c4?s=128&d=identicon&r=PG&f=1", "display_name": "leon_vynehall", "link": "https://stackoverflow.com/users/4783836/leon-vynehall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565822801, "creation_date": 1565822622, "question_id": 57502945, "link": "https://stackoverflow.com/questions/57502945/for-loop-replaces-all-values-with-41", "title": "For loop replaces all values with 41", "body": "<p>I have two csv files loaded into two separate dataframes which run through the same for loop. The 2018 df returns expected results, but the 2019 df does not for reasons unknown which is driving crazy. \nAfter the for loop, all values = 41.</p>\n\n<p>I've confirmed that the 2019 data is not loaded into the DF with bad values. </p>\n\n<pre><code>import pandas as pd\n#change display settings\npd.set_option('display.max_columns', 25)\npd.set_option('display.max_rows', 500)\n\n#load sites into dataframe\nsites_2018 = pd.read_csv('sites2018_cleaned.csv', index_col='Site Name')\nsites_2019 = pd.read_csv('sites2019_cleaned_copy.csv', index_col='Site Name')\n\n#drop columns with all NaN values\nsites_2018 = sites_2018.dropna(axis=1, how='all')\nsites_2019 = sites_2019.dropna(axis=0, how='all')\n\n#iterate through all cells using index and column headers to convert string values to numeric\n\n##2018\ncolumn_headers2018 = list(sites_2018.columns.values)\nfor idx in sites_2018.index:\n    for i in column_headers2018:\n        value = sites_2018.at[idx,i]\n        if value == '&lt;10':\n            value = 10\n        if value == '&gt;24196':\n            value = 24196\n        int (value)\n        sites_2018.at[idx,i] = value\n\n##2019\ncolumn_headers2019 = list(sites_2019.columns.values)\nfor idx in sites_2019.index:\n    for i in column_headers2019:\n        values = sites_2019.at[idx,i]\n        if value == '&lt;10':\n            value = 10\n        if value == '&gt;24196':\n            value = 24196\n        int (value)\n        sites_2019.at[idx,i] = value\n</code></pre>\n\n<p>Try print (sites_2019) before and after the for loop. You'll see the issue. \nHere is the source data: <a href=\"https://www.dropbox.com/sh/k2oiyq066pb9vil/AABKSM19iItvJRn-oqQ6pwM3a?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/sh/k2oiyq066pb9vil/AABKSM19iItvJRn-oqQ6pwM3a?dl=0</a></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 1, "creation_date": 1565822768, "post_id": 57502938, "comment_id": 101474736, "body": "first filter. This is equivalent to <code>for x in range(100): if x%2==0: l.append(x)</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1565823213, "post_id": 57502938, "comment_id": 101474823, "body": "Well, usually the first place to start is to consult the <a href=\"https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow noreferrer\">docs</a>. Then, you can always disassemble python into it&#39;s bytecode to see exactly what is happening: <code>import dis; print(dis.dis(&#39;[x*x for x in range(100) if x % 2  == 0]&#39;))</code> Note, in Python &gt;= 3.7, <code>dis.dis</code> automatically recurses into any code-objects encountered in the dissasmbler, making it much more user-friendly for list-comprehensions."}], "answers": [{"tags": [], "owner": {"reputation": 54931, "user_id": 758345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19136cbc4a30ad881e9d95275e9eb5a0?s=128&d=identicon&r=PG", "display_name": "Chronial", "link": "https://stackoverflow.com/users/758345/chronial"}, "is_accepted": false, "score": 1, "last_activity_date": 1565822757, "creation_date": 1565822757, "answer_id": 57502965, "question_id": 57502938, "link": "https://stackoverflow.com/questions/57502938/python-comprehensions-what-is-the-order-of-projection-vs-filtering/57502965#57502965", "title": "Python Comprehensions - what is the order of projection vs filtering?", "body": "<p>For each element in the iterator (<code>range(100)</code>), the filter expression is evaluated first and only if it evaluates to true is the projection expression evaluated.</p>\n\n<p>You can verify this with this code snippet:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[print(\"A\", x)\n for x in range(10)\n if print(\"B\", x) or x % 2 == 0]\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 10002542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db38b22e24bac666e86f6ae73efea7a1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex. A", "link": "https://stackoverflow.com/users/10002542/alex-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565823086, "creation_date": 1565822555, "last_edit_date": 1565823086, "question_id": 57502938, "link": "https://stackoverflow.com/questions/57502938/python-comprehensions-what-is-the-order-of-projection-vs-filtering", "title": "Python Comprehensions - what is the order of projection vs filtering?", "body": "<p>If I have this snippet(generate squares for even numbers in a set)</p>\n\n<p>is the projection done first and then filtered, or is the filter run on each iteration of x in range(100)?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>output_list = [x*x for x in range(100) if x % 2  == 0]\nprint(\"Output List using for loop:\", output_list)\n</code></pre>\n\n<p>Is there a way to find out which order of execution between the projection &amp; filtering?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 340, "user_id": 2631973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/88abd3aff9071d1354b30e723676f92d?s=128&d=identicon&r=PG&f=1", "display_name": "jniegsch", "link": "https://stackoverflow.com/users/2631973/jniegsch"}, "is_accepted": false, "score": 0, "last_activity_date": 1565824323, "creation_date": 1565824323, "answer_id": 57503121, "question_id": 57502911, "link": "https://stackoverflow.com/questions/57502911/can-multiple-columns-be-created-using-one-apply-call/57503121#57503121", "title": "Can multiple columns be created using one apply call", "body": "<p>First off, your <code>apply(...)</code> wouldn't work since the <code>x['col2_data']</code> is not interpreted as part of the lambda but as a second parameter to the apply function. Thus, to get both to return from the lambda you would need to wrap them in an object e.g. either a <code>list()</code> like <code>[x['col1_data'], x['col2_data']</code> or a <code>tuple</code> like <code>(x['col1_data'], x['col2_data'])</code> or a <code>set</code> like <code>{x['col1_data'], x['col2_data'}</code>.</p>\n\n<p>To achieve what you want to though you could do something like this:</p>\n\n<p><em>Given a pandas DataFrame defined as:</em></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>In[2] df = pd.DataFrame({'a': {'r1': {'k1': 1, 'k2': 2}, 'r2': {'k1': 1, 'k2': 2}}})\nIn[3] df\nOut[3]: \n                     a\nr1  {'k1': 1, 'k2': 2}\nr2  {'k1': 1, 'k2': 2}\n</code></pre>\n\n<p><em>You could do something as such:</em></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df[['b', 'c']] = pd.DataFrame(df.apply(lambda x: (x.a['k1'], x.a['k2']), axis=1).tolist(), index=df.index)\n</code></pre>\n\n<p><em>Which will yield:</em></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>Out[6]: \n                     a  b  c\nr1  {'k1': 1, 'k2': 2}  1  2\nr2  {'k1': 1, 'k2': 2}  1  2\n</code></pre>\n\n<p>You could of course also achieve the same thing in two separate line which IMHO is cleaner and more efficient.</p>\n\n<p>Hope this helps :)</p>\n"}, {"tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": false, "score": 0, "last_activity_date": 1565825410, "creation_date": 1565825410, "answer_id": 57503233, "question_id": 57502911, "link": "https://stackoverflow.com/questions/57502911/can-multiple-columns-be-created-using-one-apply-call/57503233#57503233", "title": "Can multiple columns be created using one apply call", "body": "<p>Using jniegsch's df example:</p>\n\n<pre><code>In[2] df = pd.DataFrame({'a': {'r1': {'k1': 1, 'k2': 2}, 'r2': {'k1': 1, 'k2': 2}}})\nIn[3] df\nOut[3]: \n                     a\nr1  {'k1': 1, 'k2': 2}\nr2  {'k1': 1, 'k2': 2}\n</code></pre>\n\n<p>Another way to do this is:</p>\n\n<pre><code>df[['b', 'c']] = pd.DataFrame(df.a.to_dict()).set_index(df.index)\n\n    a                   b   c\nr1  {'k1': 1, 'k2': 2}  1   1\nr2  {'k1': 1, 'k2': 2}  2   2\n</code></pre>\n"}], "owner": {"reputation": 455, "user_id": 5881326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20b7717c3632e6b3170152f0ea0c0b67?s=128&d=identicon&r=PG&f=1", "display_name": "Evan Brittain", "link": "https://stackoverflow.com/users/5881326/evan-brittain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565825410, "creation_date": 1565822291, "question_id": 57502911, "link": "https://stackoverflow.com/questions/57502911/can-multiple-columns-be-created-using-one-apply-call", "title": "Can multiple columns be created using one apply call", "body": "<p>I'm trying to create two columns based on dictionaries stored in another column</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df[[col1, col2]] = df[dict_data].apply(lambda x: x['col1_data'], x['col2_data'])\n\n</code></pre>\n\n<p>is this possible? Or should it be done in two separate lines?</p>\n"}, {"tags": ["python", "recursion", "nested-lists"], "comments": [{"owner": {"reputation": 54931, "user_id": 758345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19136cbc4a30ad881e9d95275e9eb5a0?s=128&d=identicon&r=PG", "display_name": "Chronial", "link": "https://stackoverflow.com/users/758345/chronial"}, "edited": false, "score": 0, "creation_date": 1565823580, "post_id": 57502908, "comment_id": 101474894, "body": "What is the meaning of the <code>X</code> and <code>B</code> values?"}, {"owner": {"reputation": 13, "user_id": 11476203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e6307b21da6101a42cdcd9ca0a6ba28?s=128&d=identicon&r=PG&f=1", "display_name": "azyeboo", "link": "https://stackoverflow.com/users/11476203/azyeboo"}, "reply_to_user": {"reputation": 54931, "user_id": 758345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19136cbc4a30ad881e9d95275e9eb5a0?s=128&d=identicon&r=PG", "display_name": "Chronial", "link": "https://stackoverflow.com/users/758345/chronial"}, "edited": false, "score": 0, "creation_date": 1565826841, "post_id": 57502908, "comment_id": 101475461, "body": "X and B are &#39;cause&#39; and &#39;impact&#39; values. Normally in the tuple areas second place is &#39;cause&#39; representation and third place is for &#39;effect&#39;. This code will serve to obtain failure scenarios for critical infrastructures. I&#39;m searching when a cause value matches with an impact value to find out which components will be affected successively from a possible failure cause."}], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 1, "last_activity_date": 1565846872, "creation_date": 1565846872, "answer_id": 57505203, "question_id": 57502908, "link": "https://stackoverflow.com/questions/57502908/how-to-recursively-collect-linked-information-in-nested-list-on-python/57505203#57505203", "title": "How to recursively collect linked information in nested list on Python?", "body": "<p>I believe you've seriously underestimated the amount of logic necessary to implement what you describe.  If there is more than one possibility, then at each level you need to deal with all the possibilities being returned from the recursion, your code is only thinking singletons.  And other issues:</p>\n\n<pre><code>LINKS = [ \\\n    ['V1', ('P1', 'B', 'X')], \\\n    ['R1', ('S1', 'B', 'G')], \\\n    ['V1', ('R1', 'B', 'L')], \\\n    ['R1', ('Z1', 'B', 'Z')], \\\n    ['R1', ('P1', 'X', 'A')], \\\n    ['P1', ('R1', 'X', 'B')], \\\n]\n\ndef link_search_recursive(item, links):\n    _, (first, _, effect) = item\n\n    chains = []\n\n    for idx, link in enumerate(links):\n\n        link_key, (link_first, cause, _) = link\n\n        if first == link_key and effect == cause:\n\n            sub_chains = link_search_recursive(link, links[:idx] + links[idx + 1:])\n\n            if sub_chains:\n                for chain in sub_chains:\n                    chains.append([first] + chain)\n            else:\n                chains.append([first, link_first])\n\n    return chains\n\ndef link_search(item, links):\n    chains = link_search_recursive(item, links)\n\n    key, _ = item\n\n    return [[key] + chain for chain in chains]\n\nprint(link_search(LINKS[0], LINKS[1:]))\nprint(link_search(LINKS[-1], LINKS[:-1]))\n</code></pre>\n\n<p>You need to carefully describe each structure along the way and account for <em>everything</em>.</p>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>&gt; python3 test.py\n[['V1', 'P1', 'R1', 'S1'], ['V1', 'P1', 'R1', 'Z1']]\n[['P1', 'R1', 'S1'], ['P1', 'R1', 'Z1']]\n&gt;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11476203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e6307b21da6101a42cdcd9ca0a6ba28?s=128&d=identicon&r=PG&f=1", "display_name": "azyeboo", "link": "https://stackoverflow.com/users/11476203/azyeboo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 57505203, "answer_count": 1, "score": 0, "last_activity_date": 1565846872, "creation_date": 1565822271, "question_id": 57502908, "link": "https://stackoverflow.com/questions/57502908/how-to-recursively-collect-linked-information-in-nested-list-on-python", "title": "How to recursively collect linked information in nested list on Python?", "body": "<p>i am a beginner on python and I have a problematic situation that I don't know how to handle.</p>\n\n<p>I have a nested list which have a string and a tuple of three string for each sublist:</p>\n\n<p><code>[['V1', ('P1', 'B', 'X')], ['R1', ('S1', 'B', 'G')], ['V1', ('R1', 'B', 'L')], ['R1', ('Z1', 'B', 'Z')], ['R1', ('P1', 'X', 'A')], ['P1', ('R1', 'X', 'B')]]</code></p>\n\n<p>And I need to track common information from key to key to get a stimulation chain. </p>\n\n<p>For exemple in the first sublist which belongs to 'V1' we have 'P1' in first position and 'X' in third the position of the tuple. That means we have already a link between V1 and P1. But for being able to track even further i need to search a sublist which have 'P1' as first element and 'X' in its tuple on second position, for exemple something like the last exemple of list:</p>\n\n<pre><code>['P1', ('R1', 'X', 'B')]]\n</code></pre>\n\n<p>If that connection exist that means that we have a chain between V1 -> P1 -> R1</p>\n\n<p>And i should continue with 'R1' as next first position of a sublist and 'B' as the second condition in its tuple. For exemple:</p>\n\n<pre><code>['R1', ('Z1', 'B', 'Z')]\n</code></pre>\n\n<p>And this modifies our chain as V1 -> P1 -> R1 ->Z1</p>\n\n<p>This recursion should continue until we don't get to find our first element of sublist with the condition on second position of its tuple.</p>\n\n<p>I should precise that if there is more than one possibility of connection those possibilities should form different chains like:</p>\n\n<pre><code>V1 -&gt; P1 -&gt; R1 -&gt;Z1\nV1 -&gt; P1 -&gt; R1 -&gt;S1\n</code></pre>\n\n<p>I already tried to write a recursive function for tracking all linked data but it didn't quite work like how it should be.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def loop_search(item, listt):\n    list_rel=[item[0]] #we will save chain in form of a list\n    if len(listt)==0:\n        return list_rel\n    else:\n        for i in listt:\n            if item[1][0]==i[0] and item[1][2]==i[1][1]:\n                list_rel.append(loop_search(i,listt[len(listt):]))\n</code></pre>\n\n<p>Thank you in advance for your help.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "is_accepted": false, "score": 3, "last_activity_date": 1565822326, "creation_date": 1565822326, "answer_id": 57502914, "question_id": 57502889, "link": "https://stackoverflow.com/questions/57502889/difference-between-functions-choice-and-choices-and-when-to-use-one-over-the-oth/57502914#57502914", "title": "Difference between functions choice and choices and when to use one over the other", "body": "<p><a href=\"https://docs.python.org/3/library/random.html#random.choices\" rel=\"nofollow noreferrer\"><code>choices</code></a> supports returning multiple results (which is why the result is an array) based on additional parameters like <code>weights</code>. For example (taken from the manual):</p>\n\n<pre><code>choices(['red', 'black', 'green'], [18, 18, 2], k=6)\n</code></pre>\n\n<p>While <a href=\"https://docs.python.org/3/library/random.html#random.choice\" rel=\"nofollow noreferrer\"><code>choice</code></a> returns a random single result from the list.</p>\n\n<p>For more see:\n<a href=\"https://docs.python.org/3/library/random.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/random.html</a></p>\n"}], "owner": {"reputation": 33, "user_id": 9362770, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9RfZK.jpg?s=128&g=1", "display_name": "Cire4", "link": "https://stackoverflow.com/users/9362770/cire4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1565822326, "creation_date": 1565822093, "question_id": 57502889, "link": "https://stackoverflow.com/questions/57502889/difference-between-functions-choice-and-choices-and-when-to-use-one-over-the-oth", "title": "Difference between functions choice and choices and when to use one over the other", "body": "<p>What's the difference between the outputs of choice and choices? When do you use one over the other?</p>\n\n<pre><code>test = [1,2,3]\n\nprint(random.choices(test))\n\n[1]\n\nprint(random.choice(test))\n\n1\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1565822576, "post_id": 57502878, "comment_id": 101474700, "body": "There&#39;s a million ways to do this. You&#39;ll have to decide whether you want your process to run continually, or use whatever your operating system&#39;s preferred scheduler is to run the process to termination periodically. For example, un Unix-y systems, <code>cron</code> is popular."}, {"owner": {"reputation": 180, "user_id": 7790152, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-Da0z5r8DxDI/AAAAAAAAAAI/AAAAAAAAAeE/jHEMz6qOZxc/photo.jpg?sz=128", "display_name": "Sugimiyanto", "link": "https://stackoverflow.com/users/7790152/sugimiyanto"}, "edited": false, "score": 0, "creation_date": 1565822765, "post_id": 57502878, "comment_id": 101474735, "body": "You could use cron job as a scheduler to wrap it up. Suppose your python filename is main.py, and you want it to run every 5 minutes. Then you could make it like <code>*&#47;5 * * * * python main.py</code>. Read this for the detail <a href=\"https://www.ostechnix.com/a-beginners-guide-to-cron-jobs/\" rel=\"nofollow noreferrer\">ostechnix.com/a-beginners-guide-to-cron-jobs</a>"}], "answers": [{"comments": [{"owner": {"reputation": 308, "user_id": 11370181, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-83a5dhiW8ho/AAAAAAAAAAI/AAAAAAAAAfc/ldhwWpx-neQ/photo.jpg?sz=128", "display_name": "John Allison", "link": "https://stackoverflow.com/users/11370181/john-allison"}, "edited": false, "score": 0, "creation_date": 1565823546, "post_id": 57502963, "comment_id": 101474883, "body": "This didn&#39;t seem to do anything. Not sure why, seems logical to me."}, {"owner": {"reputation": 2341, "user_id": 1858466, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b2e9688c2a6eabd66b599d001bcb5a0b?s=128&d=identicon&r=PG", "display_name": "Subhash", "link": "https://stackoverflow.com/users/1858466/subhash"}, "reply_to_user": {"reputation": 308, "user_id": 11370181, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-83a5dhiW8ho/AAAAAAAAAAI/AAAAAAAAAfc/ldhwWpx-neQ/photo.jpg?sz=128", "display_name": "John Allison", "link": "https://stackoverflow.com/users/11370181/john-allison"}, "edited": false, "score": 0, "creation_date": 1565824158, "post_id": 57502963, "comment_id": 101474992, "body": "How are you invoking the script?"}, {"owner": {"reputation": 308, "user_id": 11370181, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-83a5dhiW8ho/AAAAAAAAAAI/AAAAAAAAAfc/ldhwWpx-neQ/photo.jpg?sz=128", "display_name": "John Allison", "link": "https://stackoverflow.com/users/11370181/john-allison"}, "edited": false, "score": 0, "creation_date": 1565824210, "post_id": 57502963, "comment_id": 101475003, "body": "<code>if __name__ == &#39;__main__&#39;:     while True:         main()         time.sleep(2)</code>"}, {"owner": {"reputation": 308, "user_id": 11370181, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-83a5dhiW8ho/AAAAAAAAAAI/AAAAAAAAAfc/ldhwWpx-neQ/photo.jpg?sz=128", "display_name": "John Allison", "link": "https://stackoverflow.com/users/11370181/john-allison"}, "edited": false, "score": 0, "creation_date": 1565824254, "post_id": 57502963, "comment_id": 101475006, "body": "Same exact way you suggested it within the script. Sorry, forgot specifics."}, {"owner": {"reputation": 2341, "user_id": 1858466, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b2e9688c2a6eabd66b599d001bcb5a0b?s=128&d=identicon&r=PG", "display_name": "Subhash", "link": "https://stackoverflow.com/users/1858466/subhash"}, "reply_to_user": {"reputation": 308, "user_id": 11370181, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-83a5dhiW8ho/AAAAAAAAAAI/AAAAAAAAAfc/ldhwWpx-neQ/photo.jpg?sz=128", "display_name": "John Allison", "link": "https://stackoverflow.com/users/11370181/john-allison"}, "edited": false, "score": 0, "creation_date": 1565839849, "post_id": 57502963, "comment_id": 101477494, "body": "Are you typing that command in the terminal? Does it show any issues? With the code above, you should simply be able to do: <code>python your_script.py</code>."}], "tags": [], "owner": {"reputation": 2341, "user_id": 1858466, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b2e9688c2a6eabd66b599d001bcb5a0b?s=128&d=identicon&r=PG", "display_name": "Subhash", "link": "https://stackoverflow.com/users/1858466/subhash"}, "is_accepted": false, "score": 0, "last_activity_date": 1565823255, "last_edit_date": 1565823255, "creation_date": 1565822746, "answer_id": 57502963, "question_id": 57502878, "link": "https://stackoverflow.com/questions/57502878/is-there-an-elegant-way-to-make-main-in-python-periodically-run-again/57502963#57502963", "title": "Is there an elegant way to make main() in python periodically run again?", "body": "<p>Assuming you want to invoke this script from a terminal, and you are using a Unix/Linux OS:</p>\n\n<pre><code>while true; do python your_script.py; sleep 2; done\n</code></pre>\n\n<p>Replace <code>your_script.py</code> with your file name and <code>2</code> with the period you want in seconds.</p>\n\n<p>If you want to do within the script, you could put an infinite while loop to call main at periodic intervals:</p>\n\n<pre><code>import time\n\ndef main():\n    print(\"1\")\n\nif __name__ == '__main__':\n    while True:\n        main()\n        time.sleep(2)\n</code></pre>\n"}], "owner": {"reputation": 308, "user_id": 11370181, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-83a5dhiW8ho/AAAAAAAAAAI/AAAAAAAAAfc/ldhwWpx-neQ/photo.jpg?sz=128", "display_name": "John Allison", "link": "https://stackoverflow.com/users/11370181/john-allison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565823255, "creation_date": 1565822003, "question_id": 57502878, "link": "https://stackoverflow.com/questions/57502878/is-there-an-elegant-way-to-make-main-in-python-periodically-run-again", "title": "Is there an elegant way to make main() in python periodically run again?", "body": "<p>I'm making a very basic weather tracker app, and I want it to track live (I want to use it as a kiosk on a raspberry pi in my dorm room). I figure the way to do this would be to use <code>sleep</code>, but is there a more elegant way to wrap my main() so that it re-runs every x-period of time?</p>\n\n<p>My code is just structured as follows:</p>\n\n<pre><code>def function1():\n    # do things\n\ndef function2():\n    # do things\n\ndef function3():\n    # do things\n\ndef main():\n    # code that creates GUI\n    function1()\n    function2()\n    function3()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1565822113, "post_id": 57502870, "comment_id": 101474608, "body": "The problem is this line: <code>if dna.index(i) == list_target.index(i)</code>, this is wrong. <code>.index</code> gives you the <i>first index</i>, not to mention, this is a quadratic time algorithm, and as you noticed, is raising a ValueError when the letter isn&#39;t found, which you are failing to handle. But don&#39;t do this. Instead, you can keep both as strings, you don&#39;t need lists, just do: <code>sum(x = y for x,y in zip(dna, target))</code> which is constant space and linear time."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1565823119, "post_id": 57502870, "comment_id": 101474811, "body": "<code>score + 1</code> should be <code>score += 1</code>. And <code>score + 0</code> should just be omitted entirely, you don&#39;t have to do anything to add 0 to the variable."}, {"owner": {"reputation": 4819, "user_id": 11847125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4be47a50b0a0c3b973a8602b84821db9?s=128&d=identicon&r=PG&f=1", "display_name": "azundo", "link": "https://stackoverflow.com/users/11847125/azundo"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1565826809, "post_id": 57502870, "comment_id": 101475456, "body": "@juanpa.arrivillaga I think you meant <code>sum(x == y ...)</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 4819, "user_id": 11847125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4be47a50b0a0c3b973a8602b84821db9?s=128&d=identicon&r=PG&f=1", "display_name": "azundo", "link": "https://stackoverflow.com/users/11847125/azundo"}, "edited": false, "score": 0, "creation_date": 1565826850, "post_id": 57502870, "comment_id": 101475464, "body": "@azundo I did. Thanks"}, {"owner": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1565827539, "post_id": 57502870, "comment_id": 101475571, "body": "Thanks @juanpa.arrivillaga this worked"}], "owner": {"reputation": 197, "user_id": 11402640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11727b58f6383c73175702b9e46581d?s=128&d=identicon&r=PG&f=1", "display_name": "yemi.JUMP", "link": "https://stackoverflow.com/users/11402640/yemi-jump"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565821965, "creation_date": 1565821965, "question_id": 57502870, "link": "https://stackoverflow.com/questions/57502870/compare-element-and-index-of-list", "title": "Compare element and index of list", "body": "<p>I want to be able to compare two lists of strings. If both list share the same element in the same index then add 1, else add 0.</p>\n\n<p>my code:</p>\n\n<pre><code>TARGET = \"Hello World\"\n\n# converts target to list\nlist_target = list(TARGET)\n\n...\n    def eval_fit(self, dna):\n        score = 0\n        for i in dna:\n            if dna.index(i) == list_target.index(i):\n                score + 1\n            else:\n                score + 0\n        return score\n\nclass Population:\n    def __init__(self):\n\n        pop_num = 5\n        population = []\n        create = [Individual(birth(), 0)\n                for i in range(pop_num)]\n\n\n        for obj in create:\n            population.append(obj)\n\n        for obj in population:\n            print(obj.dna)\n\n        for obj in population:\n            print(obj.convert(obj.dna), \" score: \", obj.eval_fit(obj.dna))\n</code></pre>\n\n<p>outcome:</p>\n\n<pre><code>['v', 't', 'D', 'P', 'Y', 'l', 'x', '7', 'p', '9', 'Q']\n[' ', '7', 'g', 'h', '7', 'w', 'T', '4', '7', 'h', 'D']\n['m', 'n', 'P', 'j', 'Y', 'i', 'P', 'g', 'm', 's', 'U']\n['G', 'n', 'm', 'W', '7', 'r', 'k', 'n', 'F', 'V', ' ']\n['n', 'r', 'i', 'i', 'k', 't', 'v', 'x', 'Z', 'Z', 'i']\nTraceback (most recent call last):\n  File \"C:\\Users\\tonya\\Desktop\\realProjects\\genetic_algorithm\\sketch.py\", line 67, in &lt;module&gt;\n    Population()\n  File \"C:\\Users\\tonya\\Desktop\\realProjects\\genetic_algorithm\\sketch.py\", line 62, in __init__\n    print(obj.convert(obj.dna), \" score: \", obj.eval_fit(obj.dna))\n  File \"C:\\Users\\tonya\\Desktop\\realProjects\\genetic_algorithm\\sketch.py\", line 40, in eval_fit\n    if dna.index(i) == list_target.index(i):\nValueError: 'v' is not in list\n[Finished in 0.685s]\n\n</code></pre>\n\n<p>I'm not sure if turning strings into lists is the best way to compare them and reward points based on correct position of characters.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 2, "creation_date": 1565822078, "post_id": 57502840, "comment_id": 101474602, "body": "Because you&#39;re operating on strings, not numbers, so it checks whether the string is less, and anything &#39;1xxx&#39; will sort as less than anything &#39;2xxx&#39;"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1565822237, "post_id": 57502840, "comment_id": 101474635, "body": "change to <code>int(input(...))</code> and then work with numbers e.g <code>if age &lt; 2:</code> and same goes for all other conditions"}], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 6143017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9108a2264a8b5addee66886d26496f08?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/6143017/adrian"}, "is_accepted": false, "score": 3, "last_activity_date": 1565822046, "creation_date": 1565822046, "answer_id": 57502883, "question_id": 57502840, "link": "https://stackoverflow.com/questions/57502840/my-code-starts-yielding-illogical-answers-when-a-i-deal-with-number-bigger-than/57502883#57502883", "title": "My code starts yielding illogical answers when a I deal with number bigger than 99", "body": "<p>What you are essentially doing here is comparing strings which does not translate to the behavior you are seeking. You will need to cast the input as <code>int()</code> first.</p>\n\n<p>If you know the input is guaranteed to be formatted correctly, use:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>age = int(input(\"enter the person's age: \"))\n</code></pre>\n\n<p>However, nobody is perfect so it would be best to wrap in a try-except:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>age = input(\"enter the person's age: \")\ntry:\n    age = int(age)\nexcept:\n    # Handle exception\n\nif age &lt; 2:\n    # Do something\nelif ...\n    # Do more stuff\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 9646798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d972ae2231e7df0d267cda7b72ce3e4?s=128&d=identicon&r=PG", "display_name": "c0rp3n", "link": "https://stackoverflow.com/users/9646798/c0rp3n"}, "is_accepted": false, "score": 1, "last_activity_date": 1565822049, "creation_date": 1565822049, "answer_id": 57502884, "question_id": 57502840, "link": "https://stackoverflow.com/questions/57502840/my-code-starts-yielding-illogical-answers-when-a-i-deal-with-number-bigger-than/57502884#57502884", "title": "My code starts yielding illogical answers when a I deal with number bigger than 99", "body": "<p>You are comparing strings no integers thus '100' is less than '99' as the first and second characters are less.\nYou need to convert your input to an integer and thenuuse that for the comparisons and then you shall be fine. </p>\n"}, {"tags": [], "owner": {"reputation": 2341, "user_id": 1858466, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b2e9688c2a6eabd66b599d001bcb5a0b?s=128&d=identicon&r=PG", "display_name": "Subhash", "link": "https://stackoverflow.com/users/1858466/subhash"}, "is_accepted": false, "score": 1, "last_activity_date": 1565822062, "creation_date": 1565822062, "answer_id": 57502885, "question_id": 57502840, "link": "https://stackoverflow.com/questions/57502840/my-code-starts-yielding-illogical-answers-when-a-i-deal-with-number-bigger-than/57502885#57502885", "title": "My code starts yielding illogical answers when a I deal with number bigger than 99", "body": "<p>You should convert <code>age</code> to an integer and then compare. You are comparing strings, and that gives you weird answers.</p>\n\n<p>Reformatted code:</p>\n\n<pre><code>age_str=input(\"enter the person's age: \")\n\ntry:\n    age = int(age_str)\nexcept:\n    print(\"Invalid Entry. Enter age as a number.\")\n    exit(0)\n\nif age &lt; 2:\n    print('the person is a baby')\nelif age == 2 and age &lt; 4:\n    print('the person is a toddler')\nelif age &gt;= 4 and age &lt; 13:\n    print('the person is a kid')\nelif age &gt;= 13 and age &lt; 20:\n    print('the person is a teenage r')\nelif age &gt;= 20 and age &lt; 65:\n    print('the person is an adult')\nelif age &gt;= 65:\n    print('the person is an elder')\n</code></pre>\n\n<p>Code also checks for invalid entries above. If anything other than an integer is entered, it throws an error.</p>\n"}], "owner": {"reputation": 21, "user_id": 11821360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ac0cbff55ed619dd425ed80ac9cdc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Chris434", "link": "https://stackoverflow.com/users/11821360/chris434"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1565822356, "creation_date": 1565821780, "last_edit_date": 1565822092, "question_id": 57502840, "link": "https://stackoverflow.com/questions/57502840/my-code-starts-yielding-illogical-answers-when-a-i-deal-with-number-bigger-than", "title": "My code starts yielding illogical answers when a I deal with number bigger than 99", "body": "<p>I am trying to write a program that determines a person stage of life, whether the person is a baby, kid, teenager, adult or elder. The program starts with a variable that contains an <code>input()</code> function that allows the user to type in an age so the program can start running. </p>\n\n<p>The issue is that when I type ages higher than 99, the program prompts that the person whose age has been typed in is a baby. So basically, according to the program someone  who is 123 years old is a baby, which does not make sense. </p>\n\n<pre><code>age=input(\"enter the person's age: \")\n\nif age&lt;'2':\n    print('the person is a baby')\n\nelif age=='2' and age&lt;'4':\n    print('the person is a toddler')\n\nelif age &gt;='4' and age&lt;'13':\n    print ('the person is a kid')\n\nelif age&gt;='13' and age&lt;'20':\n    print('the person is a teenager')\n\nelif age&gt;='20' and age&lt;'65':\n    print('the person is an adult')\n\nelif age&gt;='65':\n    print('the person is an elder')\n</code></pre>\n\n<p>I am wondering if I am making a mistake on my code, although it seems to me pretty straight forward. Anyways, I am guessing there is some theoretical knowledge that I am missing, if that is the case I would appreciate if you folks can shed some light on the whole issue.</p>\n"}, {"tags": ["python", "pyqt", "pyqt4"], "comments": [{"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 0, "creation_date": 1565822149, "post_id": 57502839, "comment_id": 101474614, "body": "Has your layout been applied to a widget? Since it&#39;s cutting off the inserted widget, it sounds like the parent isn&#39;t expanding to accommodate."}, {"owner": {"reputation": 535, "user_id": 1839674, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/qsAKy.jpg?s=128&g=1", "display_name": "lr100", "link": "https://stackoverflow.com/users/1839674/lr100"}, "reply_to_user": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 0, "creation_date": 1565822912, "post_id": 57502839, "comment_id": 101474768, "body": "how do I do that? I figured that adding the widget to the layout would automatically do that?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1565825559, "post_id": 57502839, "comment_id": 101475242, "body": "@lr100 provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 2002, "user_id": 2763000, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5ea0af3a37d8989110a8fb4c656efb2?s=128&d=identicon&r=PG&f=1", "display_name": "goug", "link": "https://stackoverflow.com/users/2763000/goug"}, "edited": false, "score": 0, "creation_date": 1565895621, "post_id": 57502839, "comment_id": 101497694, "body": "You&#39;re adding a child widget into the layout, so the layout manages that child. Then you need to apply the layout to a parent widget using QWidget::setLayout. Then the parent will resize itself to accommodate the contents of the layout."}, {"owner": {"reputation": 535, "user_id": 1839674, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/qsAKy.jpg?s=128&g=1", "display_name": "lr100", "link": "https://stackoverflow.com/users/1839674/lr100"}, "edited": false, "score": 0, "creation_date": 1565898772, "post_id": 57502839, "comment_id": 101498853, "body": "The flow of layouts are MainWindow-&gt;verticalLayout1-&gt;verticalLayout2-&gt;this widget"}], "answers": [{"tags": [], "owner": {"reputation": 535, "user_id": 1839674, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/qsAKy.jpg?s=128&g=1", "display_name": "lr100", "link": "https://stackoverflow.com/users/1839674/lr100"}, "is_accepted": false, "score": 0, "last_activity_date": 1565906260, "creation_date": 1565906260, "answer_id": 57516702, "question_id": 57502839, "link": "https://stackoverflow.com/questions/57502839/pyqt-widget-in-layout/57516702#57516702", "title": "PYQT Widget in Layout", "body": "<p>I got to work. \nIn the gsFRMPlaybackWidget code (or designer) I had to set the forms layout to horizontally:expanding and vertically:preference for what I needed.</p>\n"}], "owner": {"reputation": 535, "user_id": 1839674, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/qsAKy.jpg?s=128&g=1", "display_name": "lr100", "link": "https://stackoverflow.com/users/1839674/lr100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1565906260, "creation_date": 1565821774, "last_edit_date": 1565825506, "question_id": 57502839, "link": "https://stackoverflow.com/questions/57502839/pyqt-widget-in-layout", "title": "PYQT Widget in Layout", "body": "<p>I am Trying to figure out how to get a widget centered and fully shown in a layout.</p>\n\n<p>The following code creates the widget and places it in the vertical layout just fine. However the widget is not centered in the layout and the bottom half is cut off. </p>\n\n<pre><code>widget = QtGui.QWidget()\nFRM_widget = gsFRMPlaybackWidget.Ui_Form()\nFRM_widget.setupUi(widget)\ng_mainWindow.verticalLayout_mode.addWidget(widget,0)\n</code></pre>\n\n<p>The vertical layout is empty initially. I add a widget to it, then remove it later. The widget that is added is based on a combox selection. The contents and size of the widget will be different. </p>\n\n<p>It will create the widget from another .py file (which is imported).</p>\n\n<p>Is there some option for the vertical layout that I need to set? Is there an option for the widget I need to set? </p>\n\n<p>Couldn't find anything that worked online.</p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11563547"}, "edited": false, "score": 0, "creation_date": 1565821986, "post_id": 57502829, "comment_id": 101474590, "body": "It looks like inside <code>last_pressed</code> you are setting <code>keys_pressed_list </code> as an empty list again every time with this <code>keys_pressed_list = []</code>.  Try declare <code>keys_pressed_list</code> somewhere outside the loop that gets checked on each new key press."}], "answers": [{"tags": [], "owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "is_accepted": false, "score": 0, "last_activity_date": 1565822496, "creation_date": 1565822496, "answer_id": 57502930, "question_id": 57502829, "link": "https://stackoverflow.com/questions/57502829/using-a-list-to-recall-the-last-keydown-event/57502930#57502930", "title": "Using a list to recall the last KEYDOWN event", "body": "<p>There are two problems here, first <code>keys_pressed_list</code> is a <em>local</em> variable in the <code>last_pressed()</code> function.  So really it only exists while that function is executing.  You can declare it globally to increase the scope. <a href=\"https://stackoverflow.com/a/4693385/1730895\">This answer about python variable scope</a> might give some more insight into this issue.</p>\n\n<p>The second issue, is that <code>keys_pressed_list</code> is set to empty in the beginning of the <code>last_pressed()</code> function, so even if it was of global scope, the list would still be emptied.</p>\n\n<p>Some code like:</p>\n\n<pre><code>keys_pressed_list = []\n\ndef last_pressed():\n    global running, keys_pressed_list\n\n    keys_pressed = get_pygame_events()\n\n    for event in keys_pressed:\n        if event.type == pygame.KEYDOWN:\n            if event.key == K_LEFT:\n                keys_pressed_list.append(\"left\")\n        ...\n</code></pre>\n\n<p>Would fix these scope, and clearing problems.</p>\n\n<p>From your description, it sounds like you only need to record the most-recent key pressed.  This is to determine the final orientation of your player bitmap (right?).  So the code really only needs to remember the last key pressed, not an entire list.  That said, the code is pretty much the same anyway.</p>\n\n<pre><code>last_key_pressed = None  # any non-movement key\n\ndef last_pressed():\n    global running, last_key_pressed\n\n    keys_pressed = get_pygame_events()\n\n    for event in keys_pressed:\n        if event.type == pygame.KEYDOWN:\n            if event.key == K_LEFT:\n                last_key_pressed = K_LEFT\n        ...\n</code></pre>\n\n<p>Of course this doesn't handle the case when multiple keys are last-pressed, but that probably doesn't matter a whole lot.</p>\n"}], "owner": {"reputation": 11, "user_id": 11929422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05de1e66d425d340a0d2a9423e52ef74?s=128&d=identicon&r=PG&f=1", "display_name": "Biddlestein", "link": "https://stackoverflow.com/users/11929422/biddlestein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565822496, "creation_date": 1565821685, "question_id": 57502829, "link": "https://stackoverflow.com/questions/57502829/using-a-list-to-recall-the-last-keydown-event", "title": "Using a list to recall the last KEYDOWN event", "body": "<p>I am tooling around with some code to try to grasp some basic animation using Pygame.  Some of the code is borrowed from Pygame tutorials that I have found.  </p>\n\n<p>What I am attempting to do is use a list to store all of the KEYDOWN events and eventually use that list to draw my character sprite to face the most recent direction of travel after releasing the key (I have nothing written in regards to recalling the last item in the list just yet).  Currently, I have my sprite redraw to facing downward while no keys are being pressed.</p>\n\n<p>The issue that I am running into is that while the function that gathers the KEYDOWN events is indeed called and produces output whenever I press the keys, the keys are not appended to the list and the console only shows empty brackets at every key press.</p>\n\n<p>I am sure there may be a more effective solution and I realize that some of this code is likely a bit janky but I would certainly appreciate any guidance.</p>\n\n<pre><code>def get_pygame_events():\n    pygame_events = pygame.event.get()\n    return pygame_events\n\n\ndef last_pressed():\n    global running\n    keys_pressed = get_pygame_events()\n    keys_pressed_list = []\n    for event in keys_pressed:\n        if event.type == pygame.KEYDOWN:\n            if event.key == K_LEFT:\n                keys_pressed_list.append(\"left\")\n            elif event.key == K_RIGHT:\n                keys_pressed_list.append(\"right\")\n            elif event.key == K_UP:\n                keys_pressed_list.append(\"up\")\n            elif event.key == K_DOWN:\n                keys_pressed_list.append(\"down\")\n            elif event.key == K_ESCAPE:\n                running = False\n        if event.type == QUIT:\n            running = False\n    print(keys_pressed_list)\n\n\n#main loop\nrunning = True\n\nwhile running:\n    clock.tick(18)\n\n    for event in pygame.event.get():\n        if event.type == KEYDOWN:\n            last_pressed()\n            if event.key == K_ESCAPE:\n                running = False\n        elif event.type == QUIT:\n            running = False\n\n    keys = pygame.key.get_pressed()\n\n    if keys[pygame.K_LEFT] and char_x &gt; 5:\n        char_x -= velocity\n        move_left = True\n        move_right = False\n        move_down = False\n        move_up = False\n\n    elif keys[pygame.K_RIGHT] and char_x &lt; win_x - char_width//2 - 5:\n        char_x += velocity\n        move_right = True\n        move_left = False\n        move_down = False\n        move_up = False\n\n    elif keys[pygame.K_UP] and char_y &gt; 5:\n        char_y -= velocity\n        move_up = True\n        move_down = False\n        move_right = False\n        move_left = False\n\n    elif keys[pygame.K_DOWN] and char_y &lt; win_y - char_height//2 - 5:\n        char_y += velocity\n        move_down = True\n        move_up = False\n        move_right = False\n        move_left = False\n\n    else:\n        move_down = False\n        move_up = False\n        move_right = False\n        move_left = False\n\n    redrawGameWindow()\n</code></pre>\n"}, {"tags": ["python", "django", "python-3.x", "django-forms"], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 10853134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkyZk.png?s=128&g=1", "display_name": "Julio Cesar", "link": "https://stackoverflow.com/users/10853134/julio-cesar"}, "edited": false, "score": 0, "creation_date": 1565829325, "post_id": 57503273, "comment_id": 101475832, "body": "excellent answer! Thank you!. Of course, does the <code>Meta</code> class necessarily have to go above <code>__init__</code>?"}, {"owner": {"reputation": 1101, "user_id": 3140312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef3f2b7ebbceead237451f661ae9f875?s=128&d=identicon&r=PG&f=1", "display_name": "devdob", "link": "https://stackoverflow.com/users/3140312/devdob"}, "reply_to_user": {"reputation": 155, "user_id": 10853134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkyZk.png?s=128&g=1", "display_name": "Julio Cesar", "link": "https://stackoverflow.com/users/10853134/julio-cesar"}, "edited": false, "score": 0, "creation_date": 1565830108, "post_id": 57503273, "comment_id": 101475950, "body": "Glad I could help. No, it does not."}], "tags": [], "owner": {"reputation": 1101, "user_id": 3140312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef3f2b7ebbceead237451f661ae9f875?s=128&d=identicon&r=PG&f=1", "display_name": "devdob", "link": "https://stackoverflow.com/users/3140312/devdob"}, "is_accepted": true, "score": 1, "last_activity_date": 1565825839, "creation_date": 1565825839, "answer_id": 57503273, "question_id": 57502820, "link": "https://stackoverflow.com/questions/57502820/can-you-remove-a-clean-field-from-a-form-in-a-view/57503273#57503273", "title": "Can you remove a clean_field from a form in a view?", "body": "<p>Yes you can. You need to override the <code>__init__</code> of your form class though and have it accept <code>*args, **kwargs</code>. This will give you the ability to send any extra arguments to your form. For example,</p>\n\n<p>views.py</p>\n\n<pre><code>def my_first_view(request):\n   ...\n   form = CourseForm(request.POST or None, title_valid=True)\n   ...\n\nef my_second_view(request):\n   ...\n   form = CourseForm(request.POST or None, title_valid=False)\n   ...\n</code></pre>\n\n<p>forms.py:</p>\n\n<pre><code>class CourseForm(forms.ModelForm):\n    # class meta with all its stuff just like you already did\n\n    def __init__(self, *args, **kwargs):\n        # b4 calling super\n        self.title_valid = False\n        if 'title_valid' in kwargs:\n           self.title_valid = kwargs.pop('title_valid', None)\n        # now you have title_valid variable to use in your form condition accordingly\n        super(CourseForm, self).__init__(*args, **kwargs)\n\n    def clean_title(self):\n        if self.title_valid:\n           # do something\n        else:\n           # do another\n        return title\n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 155, "user_id": 10853134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkyZk.png?s=128&g=1", "display_name": "Julio Cesar", "link": "https://stackoverflow.com/users/10853134/julio-cesar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 57503273, "answer_count": 1, "score": 0, "last_activity_date": 1565825839, "creation_date": 1565821620, "question_id": 57502820, "link": "https://stackoverflow.com/questions/57502820/can-you-remove-a-clean-field-from-a-form-in-a-view", "title": "Can you remove a clean_field from a form in a view?", "body": "<p>I have a form in which I validate a field (<code>clean_title</code>).</p>\n\n<p>What I want to do is, delete the <code>clean_title</code> method in a<code>CreateView</code> view, is there any way to do it?</p>\n\n<p>The problem as such is that I don't want the <code>title</code> field validation in an<code>UpdateView</code> view, I just want that validation in a <code>CreateView</code> view.\n(I don't want to create another form I want to reuse this one.)</p>\n\n<p>In case you can't do what I want to do, is there any other alternative?</p>\n\n<hr>\n\n<pre><code># forms.py\n\nclass CourseForm(forms.ModelForm):\n    class Meta:\n        model = Course\n        fields = ['title', 'subtitle', 'image', 'description', 'status']\n\n        widgets = {\n            'title': forms.TextInput(attrs = {'class': 'form-control', 'placeholder': 'Titulo'}),\n            'subtitle': forms.TextInput(attrs = {'class': 'form-control', 'placeholder': 'Subtitulo'}),\n            'image': forms.FileInput(attrs = {'class': 'custom-file-input'}),\n            'description': forms.Textarea(attrs = {'class': 'form-control', 'placeholder': 'Descripcion'}),\n            'status': forms.Select(attrs = {'class': 'custom-select'}),\n        }\n\n        labels = {'title': '', 'subtitle': '', 'image': '', 'description': ''}\n\n    def clean_title(self):\n        title = self.cleaned_data.get('title')\n        if Course.objects.filter(title = title).exists():\n            raise forms.ValidationError('Ya existe un curso registrado con ese titulo, elige otro.')\n\n        return title\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1446, "user_id": 2923937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e584af3bf364d2fa35ea9be1eb305ad?s=128&d=identicon&r=PG&f=1", "display_name": "Perplexabot", "link": "https://stackoverflow.com/users/2923937/perplexabot"}, "edited": false, "score": 5, "creation_date": 1565821937, "post_id": 57502819, "comment_id": 101474584, "body": "It returns a tuple with the first element being a dictionary and the second element an empty list. The dictionary is using the class id as the dictionary key, the value for that key is a list of instances of that class. It is basically a mapper from a class to its instances."}, {"owner": {"reputation": 835, "user_id": 2175604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf7c9d9cc27e813223d71a370efb8c69?s=128&d=identicon&r=PG", "display_name": "techie11", "link": "https://stackoverflow.com/users/2175604/techie11"}, "reply_to_user": {"reputation": 1446, "user_id": 2923937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e584af3bf364d2fa35ea9be1eb305ad?s=128&d=identicon&r=PG&f=1", "display_name": "Perplexabot", "link": "https://stackoverflow.com/users/2923937/perplexabot"}, "edited": false, "score": 0, "creation_date": 1565838594, "post_id": 57502819, "comment_id": 101477343, "body": "Thank you for the very to-the-point answer. appreciated."}], "owner": {"reputation": 835, "user_id": 2175604, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf7c9d9cc27e813223d71a370efb8c69?s=128&d=identicon&r=PG", "display_name": "techie11", "link": "https://stackoverflow.com/users/2175604/techie11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565821834, "creation_date": 1565821617, "last_edit_date": 1565821834, "question_id": 57502819, "link": "https://stackoverflow.com/questions/57502819/question-about-a-function-return-statement", "title": "Question about a function return statement", "body": "<p>I'm reading some python code to learn a application.</p>\n\n<p><code>FXRate</code> in below function is a wrapper class of 3 attributes: <code>cur</code>, <code>valdate</code>, <code>exchange</code>.\nCould anyone enlighten me what the following function actually returns?</p>\n\n<pre><code>def proc(self, file_map, **options):\n    fx_obj = []\n    ...some processing to populate the fx_obj list...\n    fx_obj += [FXRate(cur=..., exchange=...)\n    return {FXRate: fx_obj}, []\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "edited": false, "score": 1, "creation_date": 1565827856, "post_id": 57502863, "comment_id": 101475616, "body": "Very clever solution!"}], "tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": true, "score": 2, "last_activity_date": 1565821935, "creation_date": 1565821935, "answer_id": 57502863, "question_id": 57502816, "link": "https://stackoverflow.com/questions/57502816/fill-columns-based-on-the-last-value-of-another-column-in-a-pandas-dataframe/57502863#57502863", "title": "Fill columns based on the last value of another column in a pandas dataframe", "body": "<h3>Using <code>replace</code> and <code>ffill</code>:</h3>\n\n<pre><code>df['col_2'] = df['col_1'].replace(0, np.NaN).ffill()\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>    col_1  col_2\n0       1    1.0\n1       0    1.0\n2       0    1.0\n3       0    1.0\n4       0    1.0\n5       0    1.0\n6       0    1.0\n7      -1   -1.0\n8       0   -1.0\n9       0   -1.0\n10      0   -1.0\n11      0   -1.0\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 6465613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/667c111845eecc800184e8f3d55544b3?s=128&d=identicon&r=PG&f=1", "display_name": "Srikanth Varma", "link": "https://stackoverflow.com/users/6465613/srikanth-varma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 57502863, "answer_count": 1, "score": 0, "last_activity_date": 1565821935, "creation_date": 1565821609, "question_id": 57502816, "link": "https://stackoverflow.com/questions/57502816/fill-columns-based-on-the-last-value-of-another-column-in-a-pandas-dataframe", "title": "Fill columns based on the last value of another column in a pandas dataframe", "body": "<p>I have a dataframe:</p>\n\n<pre><code>   | col_1 | col_2\n---------------------\n 0 | 1     | NaN\n 1 | 0     | NaN\n 2 | 0     | NaN\n 3 | 0     | NaN\n 4 | 0     | NaN\n 5 | 0     | NaN\n 6 | 0     | NaN\n 7 | -1    | NaN\n 8 | 0     | NaN\n 9 | 0     | NaN\n 10| 0     | NaN\n 11| 0     | NaN\n</code></pre>\n\n<p>Now, I'm trying to populate the col_2 with either 1 or -1 based on the last occurrence of that digit in col_1.</p>\n\n<p>I'm trying to get it in this format:</p>\n\n<pre><code>   | col_1 | col_2\n---------------------\n 0 | 1     | 1\n 1 | 0     | 1\n 2 | 0     | 1\n 3 | 0     | 1\n 4 | 0     | 1\n 5 | 0     | 1\n 6 | 0     | 1\n 7 | -1    | -1\n 8 | 0     | -1\n 9 | 0     | -1\n 10| 0     | -1\n 11| 0     | -1\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 991, "user_id": 2555108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xySgD.png?s=128&g=1", "display_name": "Michael Kolber", "link": "https://stackoverflow.com/users/2555108/michael-kolber"}, "edited": false, "score": 0, "creation_date": 1565884888, "post_id": 57502792, "comment_id": 101493332, "body": "What&#39;s the specific issue that happens when you try to install?"}, {"owner": {"reputation": 2031, "user_id": 3943868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-swRsP46mbOM/AAAAAAAAAAI/AAAAAAAAAAA/AKF05nDXd35-wgFUunYOlpBSMnvFhD82kw/photo.jpg?sz=128", "display_name": "marlon", "link": "https://stackoverflow.com/users/3943868/marlon"}, "reply_to_user": {"reputation": 991, "user_id": 2555108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xySgD.png?s=128&g=1", "display_name": "Michael Kolber", "link": "https://stackoverflow.com/users/2555108/michael-kolber"}, "edited": false, "score": 0, "creation_date": 1565886943, "post_id": 57502792, "comment_id": 101494191, "body": "When I install by &#39;pip install -e .&#39; in this project, it creates an egg-link file in the site-packages directory, which seems fine. However, when I have another project B references this project, and i do &quot;pip install -r requirement.txt&quot; &amp; &#39;pip install -e .&#39;, then I checked the site-packages directory, for this &#39;fsa&#39; library, it only creates &#39;fsa-1.0.dist-info&#39; directory, without installing all those data files/directories. I needs them to be installed into the site-packages."}, {"owner": {"reputation": 2031, "user_id": 3943868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-swRsP46mbOM/AAAAAAAAAAI/AAAAAAAAAAA/AKF05nDXd35-wgFUunYOlpBSMnvFhD82kw/photo.jpg?sz=128", "display_name": "marlon", "link": "https://stackoverflow.com/users/3943868/marlon"}, "reply_to_user": {"reputation": 991, "user_id": 2555108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xySgD.png?s=128&g=1", "display_name": "Michael Kolber", "link": "https://stackoverflow.com/users/2555108/michael-kolber"}, "edited": false, "score": 0, "creation_date": 1565887043, "post_id": 57502792, "comment_id": 101494234, "body": "In project B, one line in the requirements.txt is &#39;../fsa&#39;."}], "owner": {"reputation": 2031, "user_id": 3943868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-swRsP46mbOM/AAAAAAAAAAI/AAAAAAAAAAA/AKF05nDXd35-wgFUunYOlpBSMnvFhD82kw/photo.jpg?sz=128", "display_name": "marlon", "link": "https://stackoverflow.com/users/3943868/marlon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1565821415, "creation_date": 1565821415, "question_id": 57502792, "link": "https://stackoverflow.com/questions/57502792/how-to-package-a-pure-data-file-project-by-setup-py", "title": "How to package a pure data file project by setup.py?", "body": "<p>One of my projects only contain data file (.txt) files, and the structure:</p>\n\n<pre><code>fsa/\n  e/\n  f/\nMANIFEST.in\nsetup.py\n</code></pre>\n\n<p>where 'fsa' is the root directory, and e, f are subdirectories, which contains all txt files.</p>\n\n<p>My setup.py:</p>\n\n<pre><code>setup(name='fsa',  #to uninstall, use this package name\n      version='1.0',\n      description='a test file',\n      packages=find_packages(),\n      include_package_data=True,\n      zip_safe=False)\n</code></pre>\n\n<p>My MANIFEST.in:</p>\n\n<pre><code>recursive-include . *\n</code></pre>\n\n<p>I want to recursively include all files under the root directory, so that I use the 'recursive-include' command. </p>\n\n<p>However, either my setup.py or MANIFEST has some problems. It doesn't install the package properly.</p>\n"}, {"tags": ["python", "matplotlib", "data-visualization"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1565822678, "post_id": 57502763, "comment_id": 101474722, "body": "I wouldn&#39;t recommend using a contour plot. Instead a <code>plot_surface</code> should work, as in <a href=\"https://stackoverflow.com/a/25295272/4124317\">this question</a>."}], "answers": [{"tags": [], "owner": {"reputation": 44364, "user_id": 2487184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d8cd1dea84cfe8312c532088a0da08e8?s=128&d=identicon&r=PG", "display_name": "CT Zhu", "link": "https://stackoverflow.com/users/2487184/ct-zhu"}, "is_accepted": true, "score": 1, "last_activity_date": 1566179705, "creation_date": 1566179705, "answer_id": 57549690, "question_id": 57502763, "link": "https://stackoverflow.com/questions/57502763/how-to-plot-horizontal-stack-of-heatmaps-or-a-stack-of-grid/57549690#57549690", "title": "How to plot horizontal stack of heatmaps or a stack of grid?", "body": "<p>How about making a series of 3d surface plots, with the data your wish to present in contour plotted as facecolor? </p>\n\n<pre><code>from mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.pyplot as plt\nfrom matplotlib import cm\nfrom matplotlib.ticker import LinearLocator\nimport numpy as np\n\n\nfig = plt.figure()\nax = fig.gca(projection='3d')\n\nX = np.arange(-5, 5, 0.25)\nZ = np.arange(-5, 5, 0.25)\nX, Z = np.meshgrid(X, Z)\nC = np.random.random(size=40*40*3).reshape((40, 40, 3))\nax.plot_surface(X, np.ones(shape=X.shape)-1, Z, facecolors=C, linewidth=0)\nax.plot_surface(X, np.ones(shape=X.shape), Z, facecolors=C, linewidth=0)\nax.plot_surface(X, np.ones(shape=X.shape)+1, Z, facecolors=C, linewidth=0)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Trhrl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Trhrl.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 310, "user_id": 6394698, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/29a83707313b0921c352ddd471b6ccdc?s=128&d=identicon&r=PG&f=1", "display_name": "inferno", "link": "https://stackoverflow.com/users/6394698/inferno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 57549690, "answer_count": 1, "score": 2, "last_activity_date": 1566179705, "creation_date": 1565821208, "question_id": 57502763, "link": "https://stackoverflow.com/questions/57502763/how-to-plot-horizontal-stack-of-heatmaps-or-a-stack-of-grid", "title": "How to plot horizontal stack of heatmaps or a stack of grid?", "body": "<p>I want to plot a stack of heatmaps, contour, or grid computed over time. The plot should like this,</p>\n\n<p><img src=\"https://i.ibb.co/2ZfvxcH/Screen-Shot-2019-08-14-at-2-01-25-PM.png\" alt=\"stack of grid\"></p>\n\n<p>I have tried this:</p>\n\n<pre><code>from mpl_toolkits.mplot3d import Axes3D\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nfig = plt.figure()\nax = fig.gca(projection='3d')\n\nx = np.linspace(0, 1, 100)\n\nX, Z = np.meshgrid(x, x)\nY = np.sin(X)*np.sin(Z)\n\n\nlevels = np.linspace(-1, 1, 40)\n\nax.contourf(X, Y, Z, zdir='y')\nax.contourf(X, Y+3, Z, zdir='y')\nax.contourf(X, Y+7, Z, zdir='y')\n\n\n\nax.legend()\n\nax.view_init(15,155)\nplt.show()\n</code></pre>\n\n<p>For one my plot looks ugly. It also does not look like what I want. I cannot make a grid there, and the 2d surfaces are tilted.</p>\n\n<p>Any help is really appreciated! I am struggling with this.</p>\n\n<p><img src=\"https://i.ibb.co/LYx2dLW/Screen-Shot-2019-08-14-at-6-15-09-PM.png\" alt=\"my result\"></p>\n\n<p>Related stackoverflow:</p>\n\n<p>[1] <a href=\"https://stackoverflow.com/questions/15582105/python-plot-stacked-image-slices\">Python plot - stacked image slices</a></p>\n\n<p>[2] <a href=\"https://stackoverflow.com/questions/10302986/stack-of-2d-plot\">Stack of 2D plot</a></p>\n"}, {"tags": ["python", "logging", "python-logging"], "comments": [{"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 1, "creation_date": 1565823578, "post_id": 57502755, "comment_id": 101474893, "body": "There&#39;s a reason directory rolling isn&#39;t built in. It&#39;s not as useful in practice as you are thinking it is. You only needed to <a href=\"https://docs.python.org/3/library/logging.handlers.html#logging.handlers.BaseRotatingHandler.namer\" rel=\"nofollow noreferrer\">scroll up</a> in the docs, though."}, {"owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "edited": false, "score": 1, "creation_date": 1565853730, "post_id": 57502755, "comment_id": 101480332, "body": "You most likely want a time series database and not logging, if you are storing data in your logs. Logs shouldn&#39;t store important persistent information."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 9886665, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GqRcOoKkNfA/AAAAAAAAAAI/AAAAAAAAAVA/z-aOWIla6OU/photo.jpg?sz=128", "display_name": "Roshan", "link": "https://stackoverflow.com/users/9886665/roshan"}, "is_accepted": false, "score": 0, "last_activity_date": 1565821699, "creation_date": 1565821699, "answer_id": 57502833, "question_id": 57502755, "link": "https://stackoverflow.com/questions/57502755/how-to-use-python-to-log-to-a-new-directory-each-day/57502833#57502833", "title": "How to use Python to log to a new directory each day?", "body": "<p>Here is an example:</p>\n\n<pre><code>import logging\nimport time\n\nfrom logging.handlers import TimedRotatingFileHandler\n\n#----------------------------------------------------------------------\ndef create_timed_rotating_log(path):\n\"\"\"\"\"\"\nlogger = logging.getLogger(\"Rotating Log\")\nlogger.setLevel(logging.INFO)\n\nhandler = TimedRotatingFileHandler(path,\n                                   when=\"m\",\n                                   interval=1,\n                                   backupCount=5)\nlogger.addHandler(handler)\n\nfor i in range(6):\n    logger.info(\"This is a test!\")\n    time.sleep(75)\n\n#----------------------------------------------------------------------\nif __name__ == \"__main__\":\nlog_file = \"timed_test.log\"\ncreate_timed_rotating_log(log_file)\n</code></pre>\n\n<p>This example will rotate the log every minute with a back up count of 5. A more realistic rotation would probably be on the hour, so you would set the interval to 60 or the when to \u201ch\u201d. When this code is run, it too will create 6 files, but instead of appending integers to the log file name, it will append a timestamp using the strftime format %Y-%m-%d_%H-%M-%S.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11929444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e70e4effb93b88d86f8e5f182811821?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/11929444/noah"}, "is_accepted": false, "score": 0, "last_activity_date": 1565981317, "creation_date": 1565981317, "answer_id": 57529700, "question_id": 57502755, "link": "https://stackoverflow.com/questions/57502755/how-to-use-python-to-log-to-a-new-directory-each-day/57529700#57529700", "title": "How to use Python to log to a new directory each day?", "body": "<p>Using the framework from another StackOverflow question that's similar but not exactly what I needed, I was able to get the behavior that I wanted. Here's the custom class that updates the logging TimedRotatingFileHandler class.</p>\n\n<pre><code>class MyTimedRotatingFileHandler(logging.handlers.TimedRotatingFileHandler):\ndef __init__(self, log_title, whenTo=\"midnight\", intervals=1):\n    self.when = whenTo.upper()\n    self.inter = intervals\n    self.log_file_path = os.path.abspath(os.path.join(os.path.dirname(__file__), \"logs\"))\n    if not os.path.isdir(self.log_file_path):\n        os.mkdir(self.log_file_path)\n    if self.when == \"S\":\n        self.extStyle = \"%Y%m%d%H%M%S\"\n    if self.when == \"M\":\n        self.extStyle = \"%Y%m%d%H%M\"\n    if self.when == \"H\":\n        self.extStyle = \"%Y%m%d%H\"\n    if self.when == \"MIDNIGHT\" or self.when == \"D\":\n        self.extStyle = \"%Y%m%d\"\n\n    self.dir_log = os.path.abspath(os.path.join(self.log_file_path, datetime.now().strftime(self.extStyle)))\n    if not os.path.isdir(self.dir_log):\n        os.mkdir(self.dir_log)\n    self.title = log_title\n    filename = os.path.join(self.dir_log, self.title)\n    logging.handlers.TimedRotatingFileHandler.__init__(self, filename, when=whenTo, interval=self.inter, backupCount=0, encoding=None)\n    self._header = \"\"\n    self._log = None\n    self._counter = 0\n\ndef doRollover(self):\n    \"\"\"\n    TimedRotatingFileHandler remix - rotates logs on daily basis, and filename of current logfile is time.strftime(\"%m%d%Y\")+\".txt\" always\n    \"\"\"\n    self.stream.close()\n    # get the time that this sequence started at and make it a TimeTuple\n    t = self.rolloverAt - self.interval\n    timeTuple = time.localtime(t)\n\n    self.new_dir = os.path.abspath(os.path.join(self.log_file_path, datetime.now().strftime(self.extStyle)))\n\n    if not os.path.isdir(self.new_dir):\n        os.mkdir(self.new_dir)\n    self.baseFilename = os.path.abspath(os.path.join(self.new_dir, self.title))\n    if self.encoding:\n        self.stream = codecs.open(self.baseFilename, \"w\", self.encoding)\n    else:\n        self.stream = open(self.baseFilename, \"w\")\n\n    self.rolloverAt = self.rolloverAt + self.interval\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11929444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e70e4effb93b88d86f8e5f182811821?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/11929444/noah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 802, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1565981317, "creation_date": 1565821133, "last_edit_date": 1565841449, "question_id": 57502755, "link": "https://stackoverflow.com/questions/57502755/how-to-use-python-to-log-to-a-new-directory-each-day", "title": "How to use Python to log to a new directory each day?", "body": "<p>I'm setting up a readout system that takes data from a number of instruments and needs to log the data to a log file. This system will be running for weeks at a time, and so each day should have a log file. Since these instruments are being manipulated over this time, they may also have log files associated with their status.</p>\n\n<p>With this, I have a directory in which all of the logs are stored, for example 'C:/logs'. Since there will be multiple log files associated with each day, I'd like to automate the creation of a new subdirectory in the the logs folder each day, so the structure of the files are something like <code>'C:/logs/20190814' for August 14, 'C:/logs/20190815' for the 15th</code>, and so on. Then, in each daily directory I would have a number of log files such as <code>'data.log', 'instrument1.log', 'instrument2.log'</code>, etc.</p>\n\n<p>Ideally, these would roll over at midnight each day.</p>\n\n<p>I have been using the Python Logging module to attempt to create these log files. I have been able to implement the <code>TimedRotatingFileHandler</code>, but the problem with this is </p>\n\n<p>(1) I want to change the directory that the log files are in based on the day, but leave their titles the same (e.g. <code>'C:/logs/20190814/data.log', 'C:/logs/20190815/data.log'</code>)</p>\n\n<p>(2) the <code>TimedRotatingFileHandler</code> saves the files not with a <code>'%Y%m%d.log'</code> extension, but rather <code>'.log.%Y%m%d'</code>, which is inconvenient to work with. I'd like to create a new directory each day and start writing a new log in the new day's directory.</p>\n"}, {"tags": ["python", "keras", "deep-learning", "pytorch"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11841075, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t4frAiN1t04/AAAAAAAAAAI/AAAAAAAAC78/-HFXmFx-HQA/photo.jpg?sz=128", "display_name": "Nishant Nikhil", "link": "https://stackoverflow.com/users/11841075/nishant-nikhil"}, "is_accepted": false, "score": 0, "last_activity_date": 1565874863, "creation_date": 1565874863, "answer_id": 57510216, "question_id": 57502753, "link": "https://stackoverflow.com/questions/57502753/how-to-get-this-variational-auto-encoder-to-use-images-with-different-resolution/57510216#57510216", "title": "How to get this variational auto encoder to use images with different resolution?", "body": "<p>The <code>25*25*16</code> comes from number of output channels of <code>conv4</code> which is <code>16</code> and 1/4 of original image dimension (<code>100/4 = 25</code>).\nA more generic model code would be:</p>\n\n<pre><code>\nclass VAE_CNN(nn.Module):\n    def __init__(self, h, w):\n        super(VAE_CNN, self).__init__()\n        self.h = h\n        self.w = w\n        # Encoder\n        self.conv1 = nn.Conv2d(3, 16, kernel_size=3, stride=1, padding=1, bias=False)\n        self.bn1 = nn.BatchNorm2d(16)\n        self.conv2 = nn.Conv2d(16, 32, kernel_size=3, stride=2, padding=1, bias=False)\n        self.bn2 = nn.BatchNorm2d(32)\n        self.conv3 = nn.Conv2d(32, 64, kernel_size=3, stride=1, padding=1, bias=False)\n        self.bn3 = nn.BatchNorm2d(64)\n        self.conv4 = nn.Conv2d(64, 16, kernel_size=3, stride=2, padding=1, bias=False)\n        self.bn4 = nn.BatchNorm2d(16)\n\n        # Latent vectors mu and sigma\n        self.fc1 = nn.Linear(h//4 * w//4 * 16, 2048)\n        self.fc_bn1 = nn.BatchNorm1d(2048)\n        self.fc21 = nn.Linear(2048, 2048)\n        self.fc22 = nn.Linear(2048, 2048)\n\n        # Sampling vector\n        self.fc3 = nn.Linear(2048, 2048)\n        self.fc_bn3 = nn.BatchNorm1d(2048)\n        self.fc4 = nn.Linear(2048, h//4 * w//4 * 16)\n        self.fc_bn4 = nn.BatchNorm1d(h//4 * w//4 * 16)\n\n        # Decoder\n        self.conv5 = nn.ConvTranspose2d(16, 64, kernel_size=3, stride=2, padding=1, output_padding=1, bias=False)\n        self.bn5 = nn.BatchNorm2d(64)\n        self.conv6 = nn.ConvTranspose2d(64, 32, kernel_size=3, stride=1, padding=1, bias=False)\n        self.bn6 = nn.BatchNorm2d(32)\n        self.conv7 = nn.ConvTranspose2d(32, 16, kernel_size=3, stride=2, padding=1, output_padding=1, bias=False)\n        self.bn7 = nn.BatchNorm2d(16)\n        self.conv8 = nn.ConvTranspose2d(16, 3, kernel_size=3, stride=1, padding=1, bias=False)\n\n        self.relu = nn.ReLU()\n\n    def encode(self, x):\n        conv1 = self.relu(self.bn1(self.conv1(x)))\n        conv2 = self.relu(self.bn2(self.conv2(conv1)))\n        conv3 = self.relu(self.bn3(self.conv3(conv2)))\n        conv4 = self.relu(self.bn4(self.conv4(conv3)))\n        conv4 = conv4.view(-1, self.h//4 * self.w//4 * 16)\n\n        fc1 = self.relu(self.fc_bn1(self.fc1(conv4)))\n\n        r1 = self.fc21(fc1)\n        r2 = self.fc22(fc1)\n\n        return r1, r2\n\n    def reparameterize(self, mu, logvar):\n        if self.training:\n            std = logvar.mul(0.5).exp_()\n            eps = Variable(std.data.new(std.size()).normal_())\n            return eps.mul(std).add_(mu)\n        else:\n            return mu\n\n    def decode(self, z):\n        fc3 = self.relu(self.fc_bn3(self.fc3(z)))\n        fc4 = self.relu(self.fc_bn4(self.fc4(fc3))).view(-1, 16, self.h//4, self.w//4)\n\n        conv5 = self.relu(self.bn5(self.conv5(fc4)))\n        conv6 = self.relu(self.bn6(self.conv6(conv5)))\n        conv7 = self.relu(self.bn7(self.conv7(conv6)))\n        return self.conv8(conv7).view(-1, 3, self.h, self.w)\n\n    def forward(self, x):\n        mu, logvar = self.encode(x)\n        z = self.reparameterize(mu, logvar)\n        return self.decode(z), mu, logvar\n\nclass customLoss(nn.Module):\n    def __init__(self):\n        super(customLoss, self).__init__()\n        self.mse_loss = nn.MSELoss(reduction=\"sum\")\n\n    def forward(self, x_recon, x, mu, logvar):\n        loss_MSE = self.mse_loss(x_recon, x)\n        loss_KLD = -0.5 * torch.sum(1 + logvar - mu.pow(2) - logvar.exp())\n\n        return loss_MSE + loss_KLD\n\nmodel = VAE_CNN(100, 100).to(device)\n</code></pre>\n\n<p>This would work fine for any image having image dimensions divisible by 4.</p>\n\n<p>Now, as <code>254%4 != 0</code>. You can try this one:</p>\n\n<pre><code>class VAE_CNN(nn.Module):\n    def __init__(self, h, w):\n        super(VAE_CNN, self).__init__()\n        self.h = h\n        self.w = w\n        # Encoder\n        self.conv1 = nn.Conv2d(3, 16, kernel_size=3, stride=1, padding=1, bias=False)\n        self.bn1 = nn.BatchNorm2d(16)\n        self.conv2 = nn.Conv2d(16, 32, kernel_size=3, stride=2, padding=1, bias=False)\n        self.bn2 = nn.BatchNorm2d(32)\n        self.conv3 = nn.Conv2d(32, 64, kernel_size=3, stride=1, padding=1, bias=False)\n        self.bn3 = nn.BatchNorm2d(64)\n        self.conv4 = nn.Conv2d(64, 16, kernel_size=3, stride=1, padding=1, bias=False)\n        self.bn4 = nn.BatchNorm2d(16)\n\n        # Latent vectors mu and sigma\n        self.fc1 = nn.Linear(h//2 * w//2 * 16, 2048)\n        self.fc_bn1 = nn.BatchNorm1d(2048)\n        self.fc21 = nn.Linear(2048, 2048)\n        self.fc22 = nn.Linear(2048, 2048)\n\n        # Sampling vector\n        self.fc3 = nn.Linear(2048, 2048)\n        self.fc_bn3 = nn.BatchNorm1d(2048)\n        self.fc4 = nn.Linear(2048, h//2 * w//2 * 16)\n        self.fc_bn4 = nn.BatchNorm1d(h//2 * w//2 * 16)\n\n        # Decoder\n        self.conv5 = nn.ConvTranspose2d(16, 64, kernel_size=3, stride=1, padding=1, bias=False)\n        self.bn5 = nn.BatchNorm2d(64)\n        self.conv6 = nn.ConvTranspose2d(64, 32, kernel_size=3, stride=1, padding=1, bias=False)\n        self.bn6 = nn.BatchNorm2d(32)\n        self.conv7 = nn.ConvTranspose2d(32, 16, kernel_size=3, stride=2, padding=1, output_padding=1, bias=False)\n        self.bn7 = nn.BatchNorm2d(16)\n        self.conv8 = nn.ConvTranspose2d(16, 3, kernel_size=3, stride=1, padding=1, bias=False)\n\n        self.relu = nn.ReLU()\n\n    def encode(self, x):\n        conv1 = self.relu(self.bn1(self.conv1(x)))\n        conv2 = self.relu(self.bn2(self.conv2(conv1)))\n        conv3 = self.relu(self.bn3(self.conv3(conv2)))\n        conv4 = self.relu(self.bn4(self.conv4(conv3)))\n        conv4 = conv4.view(-1, self.h//2 * self.w//2 * 16)\n\n        fc1 = self.relu(self.fc_bn1(self.fc1(conv4)))\n\n        r1 = self.fc21(fc1)\n        r2 = self.fc22(fc1)\n\n        return r1, r2\n\n    def reparameterize(self, mu, logvar):\n        if self.training:\n            std = logvar.mul(0.5).exp_()\n            eps = Variable(std.data.new(std.size()).normal_())\n            return eps.mul(std).add_(mu)\n        else:\n            return mu\n\n    def decode(self, z):\n        fc3 = self.relu(self.fc_bn3(self.fc3(z)))\n        fc4 = self.relu(self.fc_bn4(self.fc4(fc3))).view(-1, 16, self.h//2, self.w//2)\n\n        conv5 = self.relu(self.bn5(self.conv5(fc4)))\n        conv6 = self.relu(self.bn6(self.conv6(conv5)))\n        conv7 = self.relu(self.bn7(self.conv7(conv6)))\n        return self.conv8(conv7).view(-1, 3, self.h, self.w)\n\n    def forward(self, x):\n        mu, logvar = self.encode(x)\n        z = self.reparameterize(mu, logvar)\n        return self.decode(z), mu, logvar\n\nclass customLoss(nn.Module):\n    def __init__(self):\n        super(customLoss, self).__init__()\n        self.mse_loss = nn.MSELoss(reduction=\"sum\")\n\n    def forward(self, x_recon, x, mu, logvar):\n        loss_MSE = self.mse_loss(x_recon, x)\n        loss_KLD = -0.5 * torch.sum(1 + logvar - mu.pow(2) - logvar.exp())\n\n        return loss_MSE + loss_KLD\n\nmodel = VAE_CNN(254, 254).to(device)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11929307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP1vv.jpg?s=128&g=1", "display_name": "CyberDuck", "link": "https://stackoverflow.com/users/11929307/cyberduck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565874863, "creation_date": 1565821119, "question_id": 57502753, "link": "https://stackoverflow.com/questions/57502753/how-to-get-this-variational-auto-encoder-to-use-images-with-different-resolution", "title": "How to get this variational auto encoder to use images with different resolution?", "body": "<p>I am trying to get an existing variational auto encoder to work with RGB images that have a resolution of 254 * 254</p>\n\n<p>The code for the variational auto encoder works great for a dataset with resolutions of 100 x 100. However, I have no idea how to modify it to work with images of 254 X 254. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>batch_size = 5\nepochs = 10\nsize = 15\nno_cuda = True\nseed = 1\nlog_interval = 50\nresults_path = 'C:\\\\results\\\\'\ntrain_root = 'C:\\\\train\\\\'\nval_root = 'C:\\\\train\\\\'\n\ncuda = not no_cuda and torch.cuda.is_available()\n\ntorch.manual_seed(seed)\n\ndevice = torch.device(\"cuda\" if cuda else \"cpu\")\nkwargs = {'num_workers': 1, 'pin_memory': True} if cuda else {}\n\n\ntrain_loader_food = torch.utils.data.DataLoader(\n    datasets.ImageFolder(train_root, transform=transforms.ToTensor()),\n    batch_size = batch_size, shuffle=True, **kwargs)\n\nval_loader_food = torch.utils.data.DataLoader(\n    datasets.ImageFolder(val_root, transform=transforms.ToTensor()),\n    batch_size = batch_size, shuffle=True, **kwargs)\n\nclass VAE_CNN(nn.Module):\n    def __init__(self):\n        super(VAE_CNN, self).__init__()\n\n        # Encoder\n        self.conv1 = nn.Conv2d(3, 16, kernel_size=3, stride=1, padding=1, bias=False)\n        self.bn1 = nn.BatchNorm2d(16)\n        self.conv2 = nn.Conv2d(16, 32, kernel_size=3, stride=2, padding=1, bias=False)\n        self.bn2 = nn.BatchNorm2d(32)\n        self.conv3 = nn.Conv2d(32, 64, kernel_size=3, stride=1, padding=1, bias=False)\n        self.bn3 = nn.BatchNorm2d(64)\n        self.conv4 = nn.Conv2d(64, 16, kernel_size=3, stride=2, padding=1, bias=False)\n        self.bn4 = nn.BatchNorm2d(16)\n\n        # Latent vectors mu and sigma\n        self.fc1 = nn.Linear(25 * 25 * 16, 2048)\n        self.fc_bn1 = nn.BatchNorm1d(2048)\n        self.fc21 = nn.Linear(2048, 2048)\n        self.fc22 = nn.Linear(2048, 2048)\n\n        # Sampling vector\n        self.fc3 = nn.Linear(2048, 2048)\n        self.fc_bn3 = nn.BatchNorm1d(2048)\n        self.fc4 = nn.Linear(2048, 25 * 25 * 16)\n        self.fc_bn4 = nn.BatchNorm1d(25 * 25 * 16)\n\n        # Decoder\n        self.conv5 = nn.ConvTranspose2d(16, 64, kernel_size=3, stride=2, padding=1, output_padding=1, bias=False)\n        self.bn5 = nn.BatchNorm2d(64)\n        self.conv6 = nn.ConvTranspose2d(64, 32, kernel_size=3, stride=1, padding=1, bias=False)\n        self.bn6 = nn.BatchNorm2d(32)\n        self.conv7 = nn.ConvTranspose2d(32, 16, kernel_size=3, stride=2, padding=1, output_padding=1, bias=False)\n        self.bn7 = nn.BatchNorm2d(16)\n        self.conv8 = nn.ConvTranspose2d(16, 3, kernel_size=3, stride=1, padding=1, bias=False)\n\n        self.relu = nn.ReLU()\n\n    def encode(self, x):\n        conv1 = self.relu(self.bn1(self.conv1(x)))\n        conv2 = self.relu(self.bn2(self.conv2(conv1)))\n        conv3 = self.relu(self.bn3(self.conv3(conv2)))\n        conv4 = self.relu(self.bn4(self.conv4(conv3))).view(-1, 25 * 25 * 16)\n\n        fc1 = self.relu(self.fc_bn1(self.fc1(conv4)))\n\n        r1 = self.fc21(fc1)\n        r2 = self.fc22(fc1)\n\n        return r1, r2\n\n    def reparameterize(self, mu, logvar):\n        if self.training:\n            std = logvar.mul(0.5).exp_()\n            eps = Variable(std.data.new(std.size()).normal_())\n            return eps.mul(std).add_(mu)\n        else:\n            return mu\n\n    def decode(self, z):\n        fc3 = self.relu(self.fc_bn3(self.fc3(z)))\n        fc4 = self.relu(self.fc_bn4(self.fc4(fc3))).view(-1, 16, 25, 25)\n\n        conv5 = self.relu(self.bn5(self.conv5(fc4)))\n        conv6 = self.relu(self.bn6(self.conv6(conv5)))\n        conv7 = self.relu(self.bn7(self.conv7(conv6)))\n        return self.conv8(conv7).view(-1, 3, 100, 100)\n\n    def forward(self, x):\n        mu, logvar = self.encode(x)\n        z = self.reparameterize(mu, logvar)\n        return self.decode(z), mu, logvar\n\nclass customLoss(nn.Module):\n    def __init__(self):\n        super(customLoss, self).__init__()\n        self.mse_loss = nn.MSELoss(reduction=\"sum\")\n\n    def forward(self, x_recon, x, mu, logvar):\n        loss_MSE = self.mse_loss(x_recon, x)\n        loss_KLD = -0.5 * torch.sum(1 + logvar - mu.pow(2) - logvar.exp())\n\n        return loss_MSE + loss_KLD\n\nmodel = VAE_CNN().to(device)\noptimizer = optim.Adam(model.parameters(), lr=1e-3)\n\nloss_mse = customLoss()\n\nval_losses = []\ntrain_losses = []\n\ndef train(epoch):\n    model.train()\n    train_loss = 0\n    for batch_idx, (data, _) in enumerate(train_loader_food):\n        data = data.to(device)\n        optimizer.zero_grad()\n        recon_batch, mu, logvar = model(data)\n        loss = loss_mse(recon_batch, data, mu, logvar)\n        loss.backward()\n        train_loss += loss.item()\n        optimizer.step()\n        if batch_idx % log_interval == 0:\n            print('Train Epoch: {} [{}/{} ({:.0f}%)]\\tLoss: {:.6f}'.format(\n                epoch, batch_idx * len(data), len(train_loader_food.dataset),\n                       100. * batch_idx / len(train_loader_food),\n                       loss.item() / len(data)))\n\n    print('====&gt; Epoch: {} Average loss: {:.4f}'.format(\n        epoch, train_loss / len(train_loader_food.dataset)))\n    train_losses.append(train_loss / len(train_loader_food.dataset))\n</code></pre>\n\n<p>I replaced any refence to 25 * 25 * 16 with 128 * 128 * 4 etc.. assuming that would fix the issue but it just yields the following error:</p>\n\n<p>shape '[-1, 64516]' is invalid for input of size 327680</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1565820742, "post_id": 57502683, "comment_id": 101474314, "body": "That isn&#39;t a dictionary; its a list of dictionaries."}, {"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 2, "creation_date": 1565820920, "post_id": 57502683, "comment_id": 101474357, "body": "Duplicate keys violate the purpose of JSONs/Dictioaries. What happens when you want to pull the title values? Which pair should it get? The first thing to address is what is the purpose of the title key? If it is not unique you need to find a value that is."}, {"owner": {"reputation": 101, "user_id": 8316695, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f2afd0c864160452fdb3b57d449fdcf7?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Cider", "link": "https://stackoverflow.com/users/8316695/tom-cider"}, "edited": false, "score": 0, "creation_date": 1565821041, "post_id": 57502683, "comment_id": 101474383, "body": "The way adaptive card works is you have to provide title and value pair. As this is a dropdown menu where user can select the correct option, all of them should be displayed."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1565821124, "post_id": 57502683, "comment_id": 101474411, "body": "@TomCider So you need a list of dictionaries, not a dictionary with the same key multiple times."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 8316695, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f2afd0c864160452fdb3b57d449fdcf7?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Cider", "link": "https://stackoverflow.com/users/8316695/tom-cider"}, "edited": false, "score": 0, "creation_date": 1565821630, "post_id": 57502752, "comment_id": 101474520, "body": "Awesome. Thank you!"}], "tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": true, "score": 1, "last_activity_date": 1565821081, "creation_date": 1565821081, "answer_id": 57502752, "question_id": 57502683, "link": "https://stackoverflow.com/questions/57502683/how-do-i-add-duplicate-keys-to-json/57502752#57502752", "title": "How do I add duplicate keys to json?", "body": "<p>You need a list of dictionaries here, not a dictionary with duplicate keys:</p>\n\n<pre><code>choices = msg['attachments'][0]['content']['body'][1]['choices']\n\nfor items in numbers:\n   choices.append({'title': items, 'value': items})\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 8316695, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f2afd0c864160452fdb3b57d449fdcf7?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Cider", "link": "https://stackoverflow.com/users/8316695/tom-cider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 57502752, "answer_count": 1, "score": -2, "last_activity_date": 1565821081, "creation_date": 1565820610, "question_id": 57502683, "link": "https://stackoverflow.com/questions/57502683/how-do-i-add-duplicate-keys-to-json", "title": "How do I add duplicate keys to json?", "body": "<p>As python dictionary doesn't allow duplicate keys, I am trying to find out a way to add multiple keys and values to json file.</p>\n\n<p>I've tried to convert dict to str but that won't help as I can't append/update str.</p>\n\n<pre><code>numbers = ['one', 'two', 'three']\n\nmsg = {\n  \"type\": \"message\",\n  \"attachments\": [\n      {\n      \"contentType\": \"application/vnd.microsoft.card.adaptive\",\n      \"content\": {\n          \"$schema\": \"http://adaptivecards.io/schemas/adaptive-card.json\",\n          \"type\": \"AdaptiveCard\",\n          \"version\": \"1.0\",\n          \"body\": [\n              {\n                  \"type\": \"TextBlock\",\n                  \"text\": \"Select the number\",\n                  \"wrap\": True\n              },\n              {\n                  \"type\": \"Input.ChoiceSet\",\n                  \"placeholder\": \"\",\n                  \"choices\": [\n                      {\n                        \"title\":\"\",\n                        \"value\":\"\"\n                      }\n                  ],\n                  \"separator\": True,\n                  \"wrap\": True\n              }\n          ],\n          \"actions\": [\n              {\n                  \"type\": \"Action.Submit\",\n                  \"title\": \"Submit\"\n              }\n          ]\n          }\n      }\n  ],\n  \"serviceUrl\": \"https://smba.trafficmanager.net/amer/\"\n}\n\nfor items in numbers:\n    msg['attachments'][0]['content']['body'][1]['choices'][0].update({\"title\": items, \"value\": items})\n\nprint(msg['attachments'][0]['content']['body'][1]['choices'][0])\n</code></pre>\n\n<p>The output I am getting is <code>{'title': 'three', 'value': 'three'}</code> but I would like to see <code>{'title': 'one', 'value': 'one'},{'title': 'two', 'value': 'two'},{'title': 'three', 'value': 'three'}</code></p>\n"}, {"tags": ["python", "regex", "python-3.x"], "comments": [{"owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 1, "creation_date": 1565820586, "post_id": 57502676, "comment_id": 101474275, "body": "<code>*</code> is match <i>zero</i> or more."}, {"owner": {"reputation": 81, "user_id": 11783775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O79TX.png?s=128&g=1", "display_name": "DustyPanda", "link": "https://stackoverflow.com/users/11783775/dustypanda"}, "reply_to_user": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "edited": false, "score": 0, "creation_date": 1565820752, "post_id": 57502676, "comment_id": 101474318, "body": "Oops.. that was a typo - thanks for letting me know"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11929448, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DBUxYXwPwfA/AAAAAAAAAAI/AAAAAAAAADY/oCGRorXW-QI/photo.jpg?sz=128", "display_name": "leo_lhr", "link": "https://stackoverflow.com/users/11929448/leo-lhr"}, "edited": false, "score": 1, "creation_date": 1565821362, "post_id": 57502772, "comment_id": 101474462, "body": "r\u201d([\\w\\s]*)(quick brown)\u201d  maybe"}], "tags": [], "owner": {"reputation": 21, "user_id": 11929448, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DBUxYXwPwfA/AAAAAAAAAAI/AAAAAAAAADY/oCGRorXW-QI/photo.jpg?sz=128", "display_name": "leo_lhr", "link": "https://stackoverflow.com/users/11929448/leo-lhr"}, "is_accepted": false, "score": 2, "last_activity_date": 1565821260, "creation_date": 1565821260, "answer_id": 57502772, "question_id": 57502676, "link": "https://stackoverflow.com/questions/57502676/how-can-i-use-the-i-e-match-zero-or-more-in-regular-expressions-with-a/57502772#57502772", "title": "How can I use the &#39;*&#39; , i.e. &#39;match zero or more&#39;, in regular expressions with a pipe (OR)?", "body": "<p>(\\w|/s) indicates that the first group contains only one character.so as if whole re matches \u201cThe quick brown\u201d, the first group is a space, because you have only one char in the first parentheses.</p>\n"}, {"tags": [], "owner": {"reputation": 47633, "user_id": 3889449, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/eb07e0f09deb982a1a0deedca7a5c002?s=128&d=identicon&r=PG", "display_name": "Marco Bonelli", "link": "https://stackoverflow.com/users/3889449/marco-bonelli"}, "is_accepted": true, "score": 1, "last_activity_date": 1565821866, "last_edit_date": 1565821866, "creation_date": 1565821496, "answer_id": 57502804, "question_id": 57502676, "link": "https://stackoverflow.com/questions/57502676/how-can-i-use-the-i-e-match-zero-or-more-in-regular-expressions-with-a/57502804#57502804", "title": "How can I use the &#39;*&#39; , i.e. &#39;match zero or more&#39;, in regular expressions with a pipe (OR)?", "body": "<p>The correct expression really depends on what you are trying to do...</p>\n\n<ul>\n<li><p>Do you want the first word preceding <code>quick brown</code>? Try this:</p>\n\n<pre><code>sentence = \"This is the quick brown fox who jumps over the lazy dog.\"\n\nmyRegex = re.compile(\n    r\"(\\w+)\\s*\"\n    r\"(quick brown)\"\n)\n\nprint(myRegex.findall(sentence))\n\n# Result: [('the', 'quick brown')]\n</code></pre></li>\n<li><p>Do you also want the spaces after the word? Try this:</p>\n\n<pre><code>myRegex = re.compile(\n    r\"(\\w+\\s*)\"\n    r\"(quick brown)\"\n)    \n\n# Output: [('the ', 'quick brown')]\n</code></pre></li>\n<li><p>Do you want the whole <em>group of words</em> before <code>quick brown</code>? Try this:</p>\n\n<pre><code>myRegex = re.compile(\n    r\"([\\w\\s]+)\"\n    r\"(quick brown)\"\n)\n\n# Result: [('This is the ', 'quick brown')]\n</code></pre></li>\n</ul>\n\n<p>Either way, the use of the <code>*</code> token (zero or more) is not needed for <code>\\w</code> here, and can cause problems in edge cases when no words are matched.</p>\n"}], "owner": {"reputation": 81, "user_id": 11783775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O79TX.png?s=128&g=1", "display_name": "DustyPanda", "link": "https://stackoverflow.com/users/11783775/dustypanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 57502804, "answer_count": 2, "score": 1, "last_activity_date": 1565821866, "creation_date": 1565820541, "last_edit_date": 1565821829, "question_id": 57502676, "link": "https://stackoverflow.com/questions/57502676/how-can-i-use-the-i-e-match-zero-or-more-in-regular-expressions-with-a", "title": "How can I use the &#39;*&#39; , i.e. &#39;match zero or more&#39;, in regular expressions with a pipe (OR)?", "body": "<p>I have written this regular expression: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\n\nsentence = \"The quick brown fox jumps over the lazy dog.\"\n\nmyRegex = re.compile(\n    r\"(\\w|\\s)*\"        #Ideally, zero or more (space characters or word characters) \n    r\"(quick brown)\"\n)\nmatches = myRegex.findall(sentence)\n\nprint(matches)\n</code></pre>\n\n<p>I would expect there to be <code>[('The ', 'quick brown')]</code> printed to the screen, which I what I want ideally, but instead I get <code>[(' ', 'quick brown')]</code>. </p>\n\n<p>Similarly, I also tried changing the regex to:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>myRegex = re.compile(\n    r\"((\\w|\\s)*)\"  \n    r\"(quick brown)\"\n)\n</code></pre>\n\n<p>This results in a print of : <code>[('The ', ' ', 'quick brown')]</code>, which is closer than before to what I would like, but has the second group, which seems inefficient as it is just the space character. </p>\n"}, {"tags": ["python", "python-requests", "multipartform-data", "python-asyncio", "aiohttp"], "comments": [{"owner": {"reputation": 2040, "user_id": 1342137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e75e480f97bb17342ac38c1edda19805?s=128&d=identicon&r=PG", "display_name": "Ajay M", "link": "https://stackoverflow.com/users/1342137/ajay-m"}, "edited": false, "score": 0, "creation_date": 1599196543, "post_id": 57502672, "comment_id": 112704522, "body": "This issue posted on aiohttp might be helpful <a href=\"https://github.com/aio-libs/aiohttp/issues/3571\" rel=\"nofollow noreferrer\">github.com/aio-libs/aiohttp/issues/3571</a>, specifically this comment: <a href=\"https://github.com/aio-libs/aiohttp/issues/3571#issuecomment-456509079\" rel=\"nofollow noreferrer\">github.com/aio-libs/aiohttp/issues/3571#issuecomment-4565090&zwnj;&#8203;79</a>"}], "owner": {"reputation": 75, "user_id": 9622523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/853f4fd561a25702dc1ed0d13e146d68?s=128&d=identicon&r=PG&f=1", "display_name": "dude8998", "link": "https://stackoverflow.com/users/9622523/dude8998"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2129, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1565822892, "creation_date": 1565820508, "last_edit_date": 1565822892, "question_id": 57502672, "link": "https://stackoverflow.com/questions/57502672/how-to-post-multipart-form-data-through-python-aiohttp-clientsession", "title": "How to post Multipart Form Data through python aiohttp ClientSession", "body": "<p>I am trying to asynchronously send some Multipart-Encoded Form Data as a post request, mainly a file and two other fields.</p>\n\n<p>Before trying to use asyncio I was doing the process synchronously with requests-toolbelt <code>MultipartEncoder</code> (<a href=\"https://github.com/requests/toolbelt\" rel=\"nofollow noreferrer\">https://github.com/requests/toolbelt</a>) which worked great for normal requests, but did not work when using aiohttp for async. aiohttp provides 2 multipart classes, a <code>FormData()</code> class and a <code>MultipartWriter()</code> class, neither of which have given me much success. </p>\n\n<p>After some testing, it seems like the difference is that when I use the toolbelt <code>MultipartEncoder()</code> the request sends the data in the <code>form</code> section of the post request as it should. However, when using aiohttp the request is put into the <code>body</code> section of the request. Not sure why they are acting differently </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def multipartencode() -&gt; ClientResponse():\n        # Using MultipartEncoder\n        m = MultipartEncoder(\n            fields={'type': type_str,\n                    'metadata': json.dumps(metadata),\n                    'file': (filename, file, 'application/json')}\n        )\n\n        # Using FormData\n        data = FormData()\n        data.add_field('file', file, filename=filename,\n                       content_type='multipart/form-data')\n        data.add_field('type', type_str, content_type='multipart/form-data')\n        data.add_field('metadata', json.dumps(metadata),\n                       content_type='multipart/form-data')\n\n        # Using MultipartWriter\n        with MultipartWriter('multipart/form-data') as mpwriter:\n            part = mpwriter.append(\n                file, {'CONTENT-TYPE': 'multipart/form-data'})\n            part.set_content_disposition('form-data')\n            part = mpwriter.append_form([('type', type_str)])\n            part.set_content_disposition('form-data')\n            part = mpwriter.append_form([('metadata', json.dumps(metadata))])\n            part.set_content_disposition('form-data')\n\n\n        # send request with ClientSession()\n        resp = await session.post(url=url, data=data, headers=headers)\n        return resp\n</code></pre>\n\n<p>How can I properly format/build the multipart-encoded request to get it to send using aiohttp?</p>\n"}, {"tags": ["python", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11843332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a71156b6d9c82aa2b90f21bd971e161?s=128&d=identicon&r=PG&f=1", "display_name": "Bamieschijf", "link": "https://stackoverflow.com/users/11843332/bamieschijf"}, "edited": false, "score": 0, "creation_date": 1566119668, "post_id": 57504225, "comment_id": 101549750, "body": "Thank you very much for your solution! I edited my Question and posted my full code in case somebody stumbles upon the same issue."}], "tags": [], "owner": {"reputation": 9446, "user_id": 347767, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/013da2590dd9f46e31cb022ec51eb192?s=128&d=identicon&r=PG", "display_name": "gangabass", "link": "https://stackoverflow.com/users/347767/gangabass"}, "is_accepted": true, "score": 0, "last_activity_date": 1565836376, "creation_date": 1565836376, "answer_id": 57504225, "question_id": 57502655, "link": "https://stackoverflow.com/questions/57502655/scrapy-crawling-a-dynamic-page-with-multiple-pages/57504225#57504225", "title": "Scrapy, crawling a dynamic page with multiple pages", "body": "<p>You can use <code>response.meta</code> to send current page number between requests:</p>\n\n<pre><code>def parse(self, response):\n    current_page = response.meta.get(\"page\", 1)\n    next_page = current_page + 1\n\n    item = KrcItem()\n    data = json.loads(response.text)\n    for company in data.get('products', []):\n        item[\"productid\"] = company[\"id\"]\n        item[\"name\"] = company[\"name\"]\n        item[\"description\"] = company[\"description\"]\n        item[\"price\"] = company[\"priceFormatted\"]\n        yield item\n\n    if data[\"isTruncated\"]:\n        yield scrapy.Request(\n            url=\"https://www.kaercher.com/api/v1/products/search/shoppableproducts/partial/20035386?page={page}&amp;size=8&amp;isocode=nl-NL\".format(page=next_page),\n            callback=self.parse,\n            meta={'page': next_page},\n        )\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11843332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a71156b6d9c82aa2b90f21bd971e161?s=128&d=identicon&r=PG&f=1", "display_name": "Bamieschijf", "link": "https://stackoverflow.com/users/11843332/bamieschijf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 57504225, "answer_count": 1, "score": 0, "last_activity_date": 1566119619, "creation_date": 1565820339, "last_edit_date": 1566119619, "question_id": 57502655, "link": "https://stackoverflow.com/questions/57502655/scrapy-crawling-a-dynamic-page-with-multiple-pages", "title": "Scrapy, crawling a dynamic page with multiple pages", "body": "<p>For an assignment I am trying to build a spider which is able to fetch data from the \"www.kaercher.com\" webshop. All the products in the webshop are being called by an AJAX call. In order to load in more products, a button named \"show more products\", has to be pressed. I managed to fetch the required data from the corresponding URL which is being called by the AJAX Call.</p>\n\n<p><em>However, for my assignment, I am suppose to fetch all (all products/pages) of a certain product. I've been digging around but I can't find a solution. I suppose I am suppose to do something with \"isTruncated = true\", true indicates that more products can be loaded, false means that there are no more products.</em> <strong>(FIXED)</strong></p>\n\n<p><em>When I manage to fetch the data from all the pages, I need to find a way to fetch all the data from a list of products (create a .csv file with multiple kaercher products, each product has a unique ID which can be seen in the URL, in this case the ID 20035386 is for the high pressure washer).</em> <strong>(FIXED)</strong></p>\n\n<p>Links:\nWebshop: <a href=\"https://www.kaercher.com/nl/webshop/hogedrukreinigers-resultaten.html\" rel=\"nofollow noreferrer\">https://www.kaercher.com/nl/webshop/hogedrukreinigers-resultaten.html</a></p>\n\n<p>High pressure washer: <a href=\"https://www.kaercher.com/nl/webshop/hogedrukreinigers-resultaten.html\" rel=\"nofollow noreferrer\">https://www.kaercher.com/nl/webshop/hogedrukreinigers-resultaten.html</a></p>\n\n<p>API Url (page1): <a href=\"https://www.kaercher.com/api/v1/products/search/shoppableproducts/partial/20035386?page=1&amp;size=8&amp;isocode=nl-NL\" rel=\"nofollow noreferrer\">https://www.kaercher.com/api/v1/products/search/shoppableproducts/partial/20035386?page=1&amp;size=8&amp;isocode=nl-NL</a></p>\n\n<p><strong>OLD CODE</strong></p>\n\n<p>Spider file</p>\n\n<pre><code>import scrapy\nfrom krc.items import KrcItem\nimport json\n\nclass KRCSpider(scrapy.Spider):\n    name = \"krc_spider\"\n    allowed_domains = [\"kaercher.com\"]\n    start_urls = ['https://www.kaercher.com/api/v1/products/search/shoppableproducts/partial/20035386?page=1&amp;size=8&amp;isocode=nl-NL']\n\n    def parse(self, response):\n        item = KrcItem()\n        data = json.loads(response.text)\n        for company in data.get('products', []):\n            item[\"productid\"] = company[\"id\"]\n            item[\"name\"] = company[\"name\"]\n            item[\"description\"] = company[\"description\"]\n            item[\"price\"] = company[\"priceFormatted\"]\n            yield item\n</code></pre>\n\n<p>Items file</p>\n\n<pre><code>import scrapy\n\n\nclass KrcItem(scrapy.Item):\n    productid=scrapy.Field()\n    name=scrapy.Field()\n    description=scrapy.Field()\n    price=scrapy.Field()\n    pass\n</code></pre>\n\n<p><strong>NEW CODE</strong></p>\n\n<p><strong>EDIT: 15/08/2019</strong> </p>\n\n<p>Thanks to @gangabass I managed to fetch data from all of the product pages. I also manages to fetch the data from different products which are listed in a keyword.csv file. This enables me to fetch data from a list of products. See below for the new code:</p>\n\n<p>Spider file (.py)</p>\n\n<pre><code>import scrapy\nfrom krc.items import KrcItem\nimport json\nimport os\nimport csv\n\nclass KRCSpider(scrapy.Spider):\n    name = \"krc_spider\"\n    allowed_domains = [\"kaercher.com\"]\n    start_urls = ['https://www.kaercher.com/api/v1/products/search/shoppableproducts/partial/20035386?page=1&amp;size=8&amp;isocode=nl-NL']\n\n    def start_requests(self):\n        \"\"\"Read keywords from keywords file amd construct the search URL\"\"\"\n\n        with open(os.path.join(os.path.dirname(__file__), \"../resources/keywords.csv\")) as search_keywords:\n            for keyword in csv.DictReader(search_keywords):\n                search_text=keyword[\"keyword\"]\n                url=\"https://www.kaercher.com/api/v1/products/search/shoppableproducts/partial/{0}?page=1&amp;size=8&amp;isocode=nl-NL\".format(\n                    search_text)\n                # The meta is used to send our search text into the parser as metadata\n                yield scrapy.Request(url, callback = self.parse, meta = {\"search_text\": search_text}) \n\n    def parse(self, response):\n        current_page = response.meta.get(\"page\", 1)\n        next_page = current_page + 1\n\n        item = KrcItem()\n        data = json.loads(response.text)\n        for company in data.get('products', []):\n            item[\"productid\"] = company[\"id\"]\n            item[\"name\"] = company[\"name\"]\n            item[\"description\"] = company[\"description\"]\n            item[\"price\"] = company[\"priceFormatted\"].replace(\"\\u20ac\",\"\").strip()\n            yield item\n\n        if data[\"isTruncated\"]:\n            yield scrapy.Request(\n                url=\"https://www.kaercher.com/api/v1/products/search/shoppableproducts/partial/20035386?page={page}&amp;size=8&amp;isocode=nl-NL\".format(page=next_page),\n                callback=self.parse,\n                meta={'page': next_page},\n            )\n</code></pre>\n\n<p>Items file (.py)</p>\n\n<pre><code>import scrapy\n\n\nclass KrcItem(scrapy.Item):\n    productid=scrapy.Field()\n    name=scrapy.Field()\n    description=scrapy.Field()\n    price=scrapy.Field()\n    producttype=scrapy.Field()\n    pass\n</code></pre>\n\n<p>keywords file (.csv)</p>\n\n<pre><code>keyword,keywordtype\n20035386,Hogedrukreiniger\n20072956,Floor Cleaner\n</code></pre>\n"}, {"tags": ["python", "anaconda", "geopandas", "osmnx", "pyproj"], "comments": [{"owner": {"reputation": 3413, "user_id": 9978945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931863323a8c30fa086d61604053db8?s=128&d=identicon&r=PG&f=1", "display_name": "martinfleis", "link": "https://stackoverflow.com/users/9978945/martinfleis"}, "edited": false, "score": 0, "creation_date": 1565869075, "post_id": 57502631, "comment_id": 101485734, "body": "Which version of <code>pyproj</code> do you have? Is it from conda-forge?"}, {"owner": {"reputation": 1, "user_id": 11929041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dqRjwPyPKSg/AAAAAAAAAAI/AAAAAAAAABI/WPSB1f-78oc/photo.jpg?sz=128", "display_name": "Taylor Johnson", "link": "https://stackoverflow.com/users/11929041/taylor-johnson"}, "reply_to_user": {"reputation": 3413, "user_id": 9978945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931863323a8c30fa086d61604053db8?s=128&d=identicon&r=PG&f=1", "display_name": "martinfleis", "link": "https://stackoverflow.com/users/9978945/martinfleis"}, "edited": false, "score": 0, "creation_date": 1565888665, "post_id": 57502631, "comment_id": 101494896, "body": "One attempt used pyproj 2.2.2 from pypi, another used 1.9.6 from Gohlke wheels and yet another install attempt used pyproj 2.2.1 from conda-forge. All were installed without error, but no success in importing any of them in Spyder. @martinfleis"}, {"owner": {"reputation": 318, "user_id": 11622836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c2f3148d2a13757b33c34523db6dcd?s=128&d=identicon&r=PG", "display_name": "snowman2", "link": "https://stackoverflow.com/users/11622836/snowman2"}, "edited": false, "score": 0, "creation_date": 1565904820, "post_id": 57502631, "comment_id": 101500872, "body": "I would recommend raising an issue on the Spyder repo. It seems like it works when not using Spyder."}, {"owner": {"reputation": 1, "user_id": 11929041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dqRjwPyPKSg/AAAAAAAAAAI/AAAAAAAAABI/WPSB1f-78oc/photo.jpg?sz=128", "display_name": "Taylor Johnson", "link": "https://stackoverflow.com/users/11929041/taylor-johnson"}, "reply_to_user": {"reputation": 318, "user_id": 11622836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c2f3148d2a13757b33c34523db6dcd?s=128&d=identicon&r=PG", "display_name": "snowman2", "link": "https://stackoverflow.com/users/11622836/snowman2"}, "edited": false, "score": 0, "creation_date": 1565911657, "post_id": 57502631, "comment_id": 101502413, "body": "@snowman2 Actually, it doesn&#39;t work at the command line either. I&#39;m just normally working in Spyder. That&#39;s why I framed my statement around Spyder. Sorry for the confusion."}, {"owner": {"reputation": 318, "user_id": 11622836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c2f3148d2a13757b33c34523db6dcd?s=128&d=identicon&r=PG", "display_name": "snowman2", "link": "https://stackoverflow.com/users/11622836/snowman2"}, "edited": false, "score": 0, "creation_date": 1565918782, "post_id": 57502631, "comment_id": 101503565, "body": "Can you provide your conda environment information? <code>conda list</code>? Also, are you using the strict channel priority to install?"}, {"owner": {"reputation": 1, "user_id": 11929041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dqRjwPyPKSg/AAAAAAAAAAI/AAAAAAAAABI/WPSB1f-78oc/photo.jpg?sz=128", "display_name": "Taylor Johnson", "link": "https://stackoverflow.com/users/11929041/taylor-johnson"}, "reply_to_user": {"reputation": 318, "user_id": 11622836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c2f3148d2a13757b33c34523db6dcd?s=128&d=identicon&r=PG", "display_name": "snowman2", "link": "https://stackoverflow.com/users/11622836/snowman2"}, "edited": false, "score": 0, "creation_date": 1565971503, "post_id": 57502631, "comment_id": 101521786, "body": "@snowman2 Just updated the post with my conda environment information."}], "owner": {"reputation": 1, "user_id": 11929041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dqRjwPyPKSg/AAAAAAAAAAI/AAAAAAAAABI/WPSB1f-78oc/photo.jpg?sz=128", "display_name": "Taylor Johnson", "link": "https://stackoverflow.com/users/11929041/taylor-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 431, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565971410, "creation_date": 1565820209, "last_edit_date": 1565971410, "question_id": 57502631, "link": "https://stackoverflow.com/questions/57502631/osmnx-error-no-module-named-pyproj-compat", "title": "OSMnx Error: No module named &#39;pyproj.compat&#39;", "body": "<p>I am attempting to try out some applications of <a href=\"https://github.com/gboeing/osmnx\" rel=\"nofollow noreferrer\">OSMnx</a>. The installation goes through without errors following the provided <a href=\"https://osmnx.readthedocs.io/en/stable/\" rel=\"nofollow noreferrer\">installation guide</a> using Anaconda3 in Windows 10. However, upon importing the package,</p>\n\n<pre><code>import osmnx as ox\n</code></pre>\n\n<p>I receive the following error.</p>\n\n<pre><code>ModuleNotFoundError: No module named 'pyproj.compat'\n</code></pre>\n\n<p>I have attempted various methods of installation:</p>\n\n<ul>\n<li><a href=\"https://osmnx.readthedocs.io/en/stable/\" rel=\"nofollow noreferrer\">'conda' install</a></li>\n<li><a href=\"https://gist.github.com/gboeing/a6fcb39a9010d142446f4a83e43d8d6c\" rel=\"nofollow noreferrer\">'pip' install using Gohlke wheels</a></li>\n</ul>\n\n<p>No matter the install method, I receive the same error. The error also appears when importing <code>pyproj</code> alone.</p>\n\n<p>I am stuck. Any suggestions for finding and solving my issue?</p>\n\n<p>Conda environment info (from strict channel priority):</p>\n\n<pre><code># Name                    Version                   Build  Channel\nalabaster                 0.7.12                     py_0    conda-forge\naltair                    3.2.0                    py37_0    conda-forge\nasn1crypto                0.24.0                py37_1003    conda-forge\nastroid                   2.2.5                    py37_0    conda-forge\nattrs                     19.1.0                     py_0    conda-forge\nbabel                     2.7.0                      py_0    conda-forge\nbackcall                  0.1.0                      py_0    conda-forge\nbleach                    3.1.0                      py_0    conda-forge\nboost-cpp                 1.70.0               h6a4c333_2    conda-forge\nbranca                    0.3.1                      py_0    conda-forge\nbzip2                     1.0.8                hfa6e2cd_0    conda-forge\nca-certificates           2019.6.16            hecc5488_0    conda-forge\ncertifi                   2019.6.16                py37_1    conda-forge\ncffi                      1.12.3           py37hb32ad35_0    conda-forge\ncfitsio                   3.470                hfa6e2cd_1    conda-forge\nchardet                   3.0.4                 py37_1003    conda-forge\nclick                     7.0                        py_0    conda-forge\nclick-plugins             1.1.1                      py_0    conda-forge\ncligj                     0.5.0                      py_0    conda-forge\ncloudpickle               1.2.1                      py_0    conda-forge\ncolorama                  0.4.1                      py_0    conda-forge\ncryptography              2.7              py37hb32ad35_0    conda-forge\ncurl                      7.65.3               h4496350_0    conda-forge\ncycler                    0.10.0                     py_1    conda-forge\ndecorator                 4.4.0                      py_0    conda-forge\ndefusedxml                0.5.0                      py_1    conda-forge\ndescartes                 1.1.0                      py_3    conda-forge\ndocutils                  0.15.2                   py37_0    conda-forge\nentrypoints               0.3                   py37_1000    conda-forge\nexpat                     2.2.5             habb2df7_1003    conda-forge\nfiona                     1.8.6            py37h2979200_4    conda-forge\nfolium                    0.10.0                     py_0    conda-forge\nfreetype                  2.10.0               h563cfd7_1    conda-forge\nfreexl                    1.0.5             hd288d7e_1002    conda-forge\ngdal                      2.4.2            py37he6b6c38_4    conda-forge\ngeographiclib             1.49                       py_0    conda-forge\ngeopandas                 0.5.1                      py_0    conda-forge\ngeopy                     1.20.0                     py_0    conda-forge\ngeos                      3.7.2                habb2df7_1    conda-forge\ngeotiff                   1.5.1                h8f84788_2    conda-forge\ngettext                   0.19.8.1          hb01d8f6_1002    conda-forge\nglib                      2.58.3            hc0c2ac7_1002    conda-forge\nhdf4                      4.2.13            hf8e6fe8_1002    conda-forge\nhdf5                      1.10.5          nompi_hcc15c50_1100    conda-forge\nicu                       64.2                 he025d50_0    conda-forge\nidna                      2.8                   py37_1000    conda-forge\nimagesize                 1.1.0                      py_0    conda-forge\nintel-openmp              2019.4                      245\nipykernel                 5.1.2            py37h5ca1d4c_0    conda-forge\nipython                   7.7.0            py37h5ca1d4c_0    conda-forge\nipython_genutils          0.2.0                      py_1    conda-forge\nisort                     4.3.21                   py37_0    conda-forge\njedi                      0.15.1                   py37_0    conda-forge\njinja2                    2.10.1                     py_0    conda-forge\njpeg                      9c                hfa6e2cd_1001    conda-forge\njsonschema                3.0.2                    py37_0    conda-forge\njupyter_client            5.3.1                      py_0    conda-forge\njupyter_core              4.4.0                      py_0    conda-forge\nkealib                    1.4.10            hf7dc31f_1005    conda-forge\nkeyring                   19.0.2                   py37_0    conda-forge\nkiwisolver                1.1.0            py37he980bc4_0    conda-forge\nkrb5                      1.16.3            hdd46e55_1001    conda-forge\nlazy-object-proxy         1.4.1            py37hfa6e2cd_0    conda-forge\nlibblas                   3.8.0                    12_mkl    conda-forge\nlibcblas                  3.8.0                    12_mkl    conda-forge\nlibcurl                   7.65.3               h4496350_0    conda-forge\nlibffi                    3.2.1             h6538335_1006    conda-forge\nlibgdal                   2.4.2                h2bdb96c_4    conda-forge\nlibiconv                  1.15              hfa6e2cd_1005    conda-forge\nlibkml                    1.3.0             h4ece8bf_1010    conda-forge\nliblapack                 3.8.0                    12_mkl    conda-forge\nlibnetcdf                 4.6.2             ha953453_1002    conda-forge\nlibpng                    1.6.37               h7602738_0    conda-forge\nlibpq                     11.5                 hb0bdaea_0    conda-forge\nlibsodium                 1.0.17               h2fa13f4_0    conda-forge\nlibspatialindex           1.8.5                he025d50_4    conda-forge\nlibspatialite             4.3.0a            h832c139_1029    conda-forge\nlibssh2                   1.8.2                h642c060_2    conda-forge\nlibtiff                   4.0.10            h6512ee2_1003    conda-forge\nlibxml2                   2.9.9                h9ce36c8_2    conda-forge\nlz4-c                     1.8.3             he025d50_1001    conda-forge\nm2w64-expat               2.1.1                         2\nm2w64-gcc-libgfortran     5.3.0                         6\nm2w64-gcc-libs            5.3.0                         7\nm2w64-gcc-libs-core       5.3.0                         7\nm2w64-gettext             0.19.7                        2\nm2w64-gmp                 6.1.0                         2\nm2w64-libiconv            1.14                          6\nm2w64-libwinpthread-git   5.0.0.4634.697f757               2\nm2w64-xz                  5.2.2                         2\nmarkupsafe                1.1.1            py37hfa6e2cd_0    conda-forge\nmatplotlib                3.1.1                    py37_1    conda-forge\nmatplotlib-base           3.1.1            py37h2852a4a_1    conda-forge\nmccabe                    0.6.1                      py_1    conda-forge\nmistune                   0.8.4           py37hfa6e2cd_1000    conda-forge\nmkl                       2019.4                      245\nmsys2-conda-epoch         20160418                      1\nmunch                     2.3.2                      py_0    conda-forge\nnbconvert                 5.6.0                      py_0    conda-forge\nnbformat                  4.4.0                      py_1    conda-forge\nnetworkx                  2.3                        py_0    conda-forge\nnumpy                     1.17.0           py37hc71023c_0    conda-forge\nnumpydoc                  0.9.1                      py_0    conda-forge\nopenjpeg                  2.3.1                ha922770_0    conda-forge\nopenssl                   1.1.1c               hfa6e2cd_0    conda-forge\nosmnx                     0.10                       py_1    conda-forge\npackaging                 19.0                       py_0    conda-forge\npandas                    0.25.0           py37he350917_0    conda-forge\npandoc                    2.7.3                         0    conda-forge\npandocfilters             1.4.2                      py_1    conda-forge\nparso                     0.5.1                      py_0    conda-forge\npcre                      8.41              h6538335_1003    conda-forge\npickleshare               0.7.5                 py37_1000    conda-forge\npip                       19.2.2                   py37_0    conda-forge\npoppler                   0.67.0               h92819f6_7    conda-forge\npoppler-data              0.4.9                         1    conda-forge\npostgresql                11.5                 h06f7779_0    conda-forge\nproj4                     6.1.0                hc2d0af5_2    conda-forge\nprompt_toolkit            2.0.9                      py_0    conda-forge\npsutil                    5.6.3            py37hfa6e2cd_0    conda-forge\npycodestyle               2.5.0                      py_0    conda-forge\npycparser                 2.19                     py37_1    conda-forge\npyflakes                  2.1.1                      py_0    conda-forge\npygments                  2.4.2                      py_0    conda-forge\npylint                    2.3.1                    py37_0    conda-forge\npyopenssl                 19.0.0                   py37_0    conda-forge\npyparsing                 2.4.2                      py_0    conda-forge\npyproj                    2.2.1            py37h3f740ce_0    conda-forge\npyqt                      5.9.2            py37h6538335_2    conda-forge\npyrsistent                0.15.4           py37hfa6e2cd_0    conda-forge\npysocks                   1.7.0                    py37_0    conda-forge\npython                    3.7.3                h510b542_1    conda-forge\npython-dateutil           2.8.0                      py_0    conda-forge\npytz                      2019.2                     py_0    conda-forge\npywin32-ctypes            0.2.0                 py37_1000    conda-forge\npyzmq                     18.0.2           py37h16f9016_2    conda-forge\nqt                        5.9.7                h506e8af_3    conda-forge\nqtawesome                 0.6.0                      py_0    conda-forge\nqtconsole                 4.5.2                      py_0    conda-forge\nqtpy                      1.9.0                      py_0    conda-forge\nrequests                  2.22.0                   py37_1    conda-forge\nrope                      0.14.0                     py_0    conda-forge\nrtree                     0.8.3           py37h21ff451_1002    conda-forge\nsetuptools                41.0.1                   py37_0    conda-forge\nshapely                   1.6.4           py37ha35856d_1006    conda-forge\nsip                       4.19.8          py37h6538335_1000    conda-forge\nsix                       1.12.0                py37_1000    conda-forge\nsnowballstemmer           1.9.0                      py_0    conda-forge\nsphinx                    2.1.2                      py_0    conda-forge\nsphinxcontrib-applehelp   1.0.1                      py_0    conda-forge\nsphinxcontrib-devhelp     1.0.1                      py_0    conda-forge\nsphinxcontrib-htmlhelp    1.0.2                      py_0    conda-forge\nsphinxcontrib-jsmath      1.0.1                      py_0    conda-forge\nsphinxcontrib-qthelp      1.0.2                      py_0    conda-forge\nsphinxcontrib-serializinghtml 1.1.1                      py_0    conda-forge\nspyder                    3.3.6                    py37_0    conda-forge\nspyder-kernels            0.5.1                    py37_0    conda-forge\nsqlite                    3.29.0               hfa6e2cd_0    conda-forge\ntestpath                  0.4.2                   py_1001    conda-forge\ntk                        8.6.9             hfa6e2cd_1002    conda-forge\ntoolz                     0.10.0                     py_0    conda-forge\ntornado                   6.0.3            py37hfa6e2cd_0    conda-forge\ntraitlets                 4.3.2                 py37_1000    conda-forge\nurllib3                   1.25.3                   py37_0    conda-forge\nvc                        14.1                 h0510ff6_4\nvincent                   0.4.4                      py_1    conda-forge\nvs2015_runtime            14.15.26706          h3a45250_4\nwcwidth                   0.1.7                      py_1    conda-forge\nwebencodings              0.5.1                      py_1    conda-forge\nwheel                     0.33.4                   py37_0    conda-forge\nwin_inet_pton             1.1.0                    py37_0    conda-forge\nwincertstore              0.2                   py37_1002    conda-forge\nwrapt                     1.11.2           py37hfa6e2cd_0    conda-forge\nxerces-c                  3.2.2             h6538335_1004    conda-forge\nxz                        5.2.4             h2fa13f4_1001    conda-forge\nzeromq                    4.3.2                h6538335_2    conda-forge\nzlib                      1.2.11            h2fa13f4_1005    conda-forge\nzstd                      1.4.0                hd8a0e53_0    conda-forge\n</code></pre>\n"}, {"tags": ["python", "list", "element", "skip"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565820586, "post_id": 57502623, "comment_id": 101474274, "body": "it gets value from <code>index</code> at start and later it doesn&#39;t use varible <code>index</code> - so there is no sense to change it. For some objects you can use <code>next(object)</code> to skip element - ie. when you get lines from file.  <code>for line in file: next(file)</code>. For some you may use <code>iter()</code> to create iterator and then you  can also use <code>next()</code> but you may need try/except to catch error when you try to use next() on last element and there is no next element."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565820918, "post_id": 57502623, "comment_id": 101474356, "body": "if you want ot change <code>index</code> then maybe you should use <code>while True</code> and manually change <code>index += 1</code> and <code>index += more</code>"}], "answers": [{"tags": [], "owner": {"reputation": 677, "user_id": 796805, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3e1dad15bc5eb2c70bf701f2e5d81ee?s=128&d=identicon&r=PG", "display_name": "LionKimbro", "link": "https://stackoverflow.com/users/796805/lionkimbro"}, "is_accepted": false, "score": 0, "last_activity_date": 1565820658, "creation_date": 1565820658, "answer_id": 57502688, "question_id": 57502623, "link": "https://stackoverflow.com/questions/57502623/modify-start-index-of-list-at-runtime-python/57502688#57502688", "title": "Modify start_index of list at runtime python", "body": "<p>I think you are looking for \"<a href=\"https://docs.python.org/3/library/functions.html#enumerate\" rel=\"nofollow noreferrer\">enumerate</a>.\"</p>\n\n<p>For example:</p>\n\n<pre><code>print(list(enumerate([\"apples\", \"and\", \"oranges\"])))\n</code></pre>\n\n<p>...outputs:</p>\n\n<pre><code>[(0, 'apples'), (1, 'and'), (2, 'oranges')]\n</code></pre>\n\n<p>And then if you want to start counting at, say, 10, it has a parameter that lets you do that:</p>\n\n<pre><code>print(list(enumerate([\"apples\", \"and\", \"oranges\"], 10)))\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>[(10, 'apples'), (11, 'and'), (12, 'oranges')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 677, "user_id": 796805, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3e1dad15bc5eb2c70bf701f2e5d81ee?s=128&d=identicon&r=PG", "display_name": "LionKimbro", "link": "https://stackoverflow.com/users/796805/lionkimbro"}, "is_accepted": true, "score": 0, "last_activity_date": 1565820991, "creation_date": 1565820991, "answer_id": 57502743, "question_id": 57502623, "link": "https://stackoverflow.com/questions/57502623/modify-start-index-of-list-at-runtime-python/57502743#57502743", "title": "Modify start_index of list at runtime python", "body": "<p>Alternatively, if you are jumping around in your iteration, based on some calculation, you might want:</p>\n\n<pre><code>L = [...]\ni = 0\nwhile i is not None:\n    do_something_with(L[i])\n    i = my_calculation(i)\n</code></pre>\n\n<p>So the basic idea here is -- you are using L as your list of data, i as your index into the data, and then when my_calculation returns None (rather than the next index, ...), you exit the loop.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11929415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9211e228e25591007b92d3b97d78b27a?s=128&d=identicon&r=PG&f=1", "display_name": "looppool", "link": "https://stackoverflow.com/users/11929415/looppool"}, "edited": false, "score": 0, "creation_date": 1565863555, "post_id": 57502790, "comment_id": 101483859, "body": "Yeah I think the <code>while True</code> form is maybe the easier to implement.."}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": false, "score": 0, "last_activity_date": 1565821845, "last_edit_date": 1565821845, "creation_date": 1565821396, "answer_id": 57502790, "question_id": 57502623, "link": "https://stackoverflow.com/questions/57502623/modify-start-index-of-list-at-runtime-python/57502790#57502790", "title": "Modify start_index of list at runtime python", "body": "<p>For some objects you can use <code>next()</code> to skip element</p>\n\n<pre><code>f = open(\"filename.txt\")\n\n# skip two lines before loop\nnext(f)\nnext(f)\n\nfor line in f:\n    print(line)\n    # skip one line in loop\n    next(f)\n</code></pre>\n\n<p>but you may have to use <code>try/except</code> to catch error StopIteration when you use `next() on last element and there is no next element</p>\n\n<pre><code>try:\n\n    # skip two lines before loop\n    next(f)\n    next(f)\n\n    for line in f:\n        print(line)\n        # skip one line in every loop\n        next(f)\n\nexcept StopIteration:\n    pass\n</code></pre>\n\n<p>For some objects you can use <code>iter()</code> to create iterator and then you can use <code>next()</code> to skip items.</p>\n\n<pre><code>index = 0\n\nl = ['1','2','3','4','5']\nit = iter(l[index:])\n\ntry:\n\n    for item in it:\n        print(item)\n        # skip two items in every loop\n        next(it)\n        next(it)\n\nexcept StopIteration:\n    pass\n</code></pre>\n\n<p>You can use <code>for</code> loop and <code>if/else</code> to skip more elements</p>\n\n<pre><code>index = 0\n\nl = ['1','2','3','4','5']\nit = iter(l[index:])\n\ntry:\n\n    for item in it:\n        print(item)\n        if some_condition:\n            # skip two items \n            for _ in range(2):\n                next(it) \n\nexcept StopIteration:\n    pass\n</code></pre>\n\n<hr>\n\n<p>But it may be easier to use <code>while True</code> or <code>while index &lt; ...</code> and manually change <code>index</code> and use it to get values. </p>\n\n<p>Or use <code>enumerate</code> with <code>if index condition: continue</code> to skip loop for some indexes.</p>\n"}], "owner": {"reputation": 13, "user_id": 11929415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9211e228e25591007b92d3b97d78b27a?s=128&d=identicon&r=PG&f=1", "display_name": "looppool", "link": "https://stackoverflow.com/users/11929415/looppool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 57502743, "answer_count": 3, "score": 0, "last_activity_date": 1565821845, "creation_date": 1565820155, "question_id": 57502623, "link": "https://stackoverflow.com/questions/57502623/modify-start-index-of-list-at-runtime-python", "title": "Modify start_index of list at runtime python", "body": "<p>I was wondering if it is possible to modify the value of the start_index of a list while iterating trough it.</p>\n\n<p>What I've noticed so far is that the code</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>index = 0\nl = ['1','2','3']\nfor elem in l[index:]:\n    print(elem, index)\n</code></pre>\n\n<p>always prints out the value 0 while iterating trough the loop.</p>\n\n<p>I tried to modify the value inside the loop like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for elem in l[index:]:\n    print(elem, index)\n    index = index+1\n</code></pre>\n\n<p>and the value of the index is printed out correctly but I can see again every element of the list.\nI was trying to skip elements of the list based on some other calculations (it's not just hoping 1 element, in fact i can't use the form</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>l[start_index:end_index:count]\n</code></pre>\n\n<p>because count can be different through every iteration, this is why I need to set it by myself.)</p>\n\n<p>Is it to possible to achieve something like that?\nThank you</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1614, "user_id": 10852841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe7a38cc20a4dc6159ee347bf6c19fdf?s=128&d=identicon&r=PG&f=1", "display_name": "HS-nebula", "link": "https://stackoverflow.com/users/10852841/hs-nebula"}, "edited": false, "score": 1, "creation_date": 1565820208, "post_id": 57502619, "comment_id": 101474178, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15696461/import-python-script-into-another\">Import Python Script Into Another?</a>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1565823740, "post_id": 57502619, "comment_id": 101474922, "body": "You need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your code as posted would throw other errors, and there&#39;s no reason for it to throw the error you&#39;ve shown."}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1565823621, "post_id": 57502983, "comment_id": 101474903, "body": "this has nothing to do with classes vs functions. The import system does not distinguish between them, they are all merely attributes in a module. In any case, the op already tried this, and they wouldn&#39;t be getting the errors you mention."}], "tags": [], "owner": {"reputation": 100, "user_id": 11633050, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FathY7xgXw0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdXGn9NWBNzrUG5YZQTtdaYMfoSLQ/mo/photo.jpg?sz=128", "display_name": "SkippyElvis", "link": "https://stackoverflow.com/users/11633050/skippyelvis"}, "is_accepted": false, "score": 0, "last_activity_date": 1565824777, "last_edit_date": 1565824777, "creation_date": 1565822949, "answer_id": 57502983, "question_id": 57502619, "link": "https://stackoverflow.com/questions/57502619/how-to-use-python-modules-properly/57502983#57502983", "title": "How to use python modules properly", "body": "<p><strong>The problem:</strong><br/>\nThe import line <code>import mylib.py</code> is incorrect. You do not need the file extension <code>.py</code></p>\n\n<p><strong>A solution</strong><br/>\nSetup for package like this:</p>\n\n<pre><code>package\n   |-mylib.py\n   |-test_import_mylip.py\n</code></pre>\n\n<p>Then in <code>mylib.py</code>, </p>\n\n<pre><code># package/mylib.py\ndef load(hist_indicator, data):   \n    mask1 = data['IndicatorName'].str.contains(hist_indicator)\n    dfdata = data[mask1]\n\n    filter = dfdata['Year'] &gt; 1995\n    df = dfdata[filter]\n    return df\n</code></pre>\n\n<p>Then to import and use <code>mylib.load</code> from <code>test_import_mylib.py</code>,</p>\n\n<pre><code># test_import_mylib.py\nimport mylib\nimport pandas as pd\n\ndata = pd.read_csv('path/to/df.csv')\nind_internet = 'Internet users \\(per 1'\n\ninternet = mylib.load(ind_internet, data)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6104312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ogDt1.jpg?s=128&g=1", "display_name": "Learnos", "link": "https://stackoverflow.com/users/6104312/learnos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565869400, "creation_date": 1565820130, "last_edit_date": 1565869400, "question_id": 57502619, "link": "https://stackoverflow.com/questions/57502619/how-to-use-python-modules-properly", "title": "How to use python modules properly", "body": "<p>My code started getting cluttered with functions so I wanted to make a library(or module I guess) of all my functions stored in it. Most functions that work in my code give the following error when importing them from a module:</p>\n\n<pre><code>takes 1 positional argument but 2 were given\n</code></pre>\n\n<p>I created a file called mylib.py.</p>\n\n<p>The first function I placed in it, and of many that didn't work was this one:</p>\n\n<pre><code>def load(hist_indicator, data):   \n    mask1 = data['IndicatorName'].str.contains(hist_indicator)\n    dfdata = data[mask1]\n\n    filter = dfdata['Year'] &gt; 1995\n    df = dfdata[filter]\n    return df\n</code></pre>\n\n<p>All it does is it takes a pandas DataFrame and filters out data I need. The function works if it is in the code itself. I used it like this:</p>\n\n<pre><code>ind_internet = 'Internet users \\(per 1'\ninternet = load(ind_internet, data)\n</code></pre>\n\n<p>However, when I tried using it from mylib.py I got the aforementioned error. Tried using it like this:</p>\n\n<pre><code>import mylib\nind_internet = 'Internet users \\(per 1'\ninternet = mylib.load(ind_internet, data)\n</code></pre>\n\n<p>I hope you can let me know what I'm doing wrong.</p>\n\n<p>Edit:</p>\n\n<p>To add to the question, here's the code with a little example:</p>\n\n<pre><code>import pandas as pd\n\ndef load(hist_indicator, data):   \n    mask1 = data['IndicatorName'].str.contains(hist_indicator)\n    dfdata = data[mask1]\n\n    filter = dfdata['Year'] &gt; 1995\n    df = dfdata[filter]\n    return df\n\ndataf = {'CountryName':  ['France', 'Germany'],\n        'CountryCode': ['FRA', 'GER'],\n        'IndicatorName': ['Internet users (per 100)', 'GDP per capita (current US$)'],\n        'IndicatorCode' : ['MS.MIL.XPRT.KD','SP.POP.DPND.YG'],\n        'Year' : [2000,1983],\n        'Value' : [15.3,4322.27]\n        }\n\ndata = pd.DataFrame (dataf, columns = ['CountryName','CountryCode','IndicatorName','IndicatorCode','Year','Value'])\n\nind_internet = 'Internet users \\(per 1'\ninternet = load(ind_internet, data)\ninternet\n</code></pre>\n\n<p>Also, an edit: I didn't actually type import mylib.py in the code, only here by mistake.</p>\n"}, {"tags": ["python", "django", "api", "tweepy"], "answers": [{"tags": [], "owner": {"reputation": 505, "user_id": 4238785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000627732575/picture?type=large", "display_name": "Jon Hrovat", "link": "https://stackoverflow.com/users/4238785/jon-hrovat"}, "is_accepted": false, "score": 0, "last_activity_date": 1565820940, "creation_date": 1565820940, "answer_id": 57502731, "question_id": 57502587, "link": "https://stackoverflow.com/questions/57502587/how-to-loop-over-dictionary-to-display-in-frontend-in-django-and-implement-user/57502731#57502731", "title": "How to loop over dictionary to display in frontend in django and implement user input", "body": "<p>You don't need to run multiple loops in your template. You only need to save those tweet objects as a list in your view and then loop over them in the template.</p>\n\n<pre><code>#views.py    \ntweets = tweepy.Cursor(api.search,\n                                   query=\"xbox\",\n                                   q=\"{xbox}\",\n                                   count=1,\n                                   result_type=\"recent\",\n                                   include_entities=True,\n                                   lang=\"en\").items()\n\ncontext = {'tweets': tweets}\n</code></pre>\n\n<p>Then in your template:</p>\n\n<pre><code>{% for tweet in tweets %}\n   {{ tweet.text }}\n   {{ tweet.user.name }}\n   {{ tweet.retweet_count }}\n{% endfor %}\n</code></pre>\n\n<p>etc....</p>\n"}], "owner": {"reputation": 31, "user_id": 11008853, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iuYpvqwIuGw/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNOp3L146NrEcQb2am88azof27Ckg/mo/photo.jpg?sz=128", "display_name": "Jamal Westfield", "link": "https://stackoverflow.com/users/11008853/jamal-westfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565820940, "creation_date": 1565819979, "question_id": 57502587, "link": "https://stackoverflow.com/questions/57502587/how-to-loop-over-dictionary-to-display-in-frontend-in-django-and-implement-user", "title": "How to loop over dictionary to display in frontend in django and implement user input", "body": "<p>Ive created my own dictionary from the tweepy api results.</p>\n\n<p>it displays the data I want on the frontend. However, how do I go about looping over my dictionary so html is produced for each dictionary created.</p>\n\n<p>I also wish to have user input determine the query parameter but not sure how do it</p>\n\n<p>This is what I've tried but no avail..</p>\n\n<pre><code>{% for tweet in twitter_data %}\n        &lt;div class=\"tweet-container\"&gt;\n\n            &lt;img src=\"{{twitter_data.profile_dp}}\" alt=\"avatar\" class=\"avatar\" /&gt;\n\n            &lt;time class=\"tweet-time\"&gt;{{twitter_data.created_at}}&lt;/time&gt;\n\n            &lt;div class=\"push\"&gt;\n\n                &lt;div class=\"user\"&gt;\n                    &lt;div class=\"user-string\"&gt;&lt;span class=\"name\"&gt;{{twitter_data.user_name}}&lt;/span&gt;&lt;span\n                            class=\"username\"&gt;@{{twitter_data.user_screen_name}}&lt;/span&gt;&lt;/div&gt;\n                &lt;/div&gt;\n\n                &lt;blockquote class=\"tweet\"&gt;&lt;span class=\"at\"&gt;@lorem_bot &lt;/span&gt;{{twitter_data.text}} &lt;span\n                        class=\"tag\"&gt;#lorem2015&lt;/span&gt;&lt;/blockquote&gt;\n\n                &lt;div class=\"icons\"&gt;\n                    &lt;i class=\"fa fa-reply\"&gt;&lt;span class=\"icon-number\"&gt; 10&lt;/span&gt;&lt;/i&gt;\n                    &lt;i class=\"fa fa-retweet\"&gt;&lt;span class=\"icon-number\"&gt; {{twitter_data.retweet_count}}&lt;/span&gt;&lt;/i&gt;\n                    &lt;i class=\"fa fa-star\"&gt;&lt;span class=\"icon-number\"&gt; {{twitter_data.fav_count}}&lt;/span&gt;&lt;/i&gt;\n                    &lt;i class=\"fa fa-ellipsis-h\"&gt;&lt;/i&gt;\n                    &lt;i class=\"fa fa-eye\"&gt;&lt;/i&gt;\n                &lt;/div&gt;\n\n            &lt;/div&gt;\n\n        &lt;/div&gt;\n        {% end for %}\n</code></pre>\n\n<pre><code>from django.shortcuts import render\nimport requests\nimport tweepy\nimport json\n\n# Create your views here.\nCONSUMER_KEY = 'm'\nCONSUMER_SECRET = 'Xu'\nACCESS_KEY = '116'\nACCESS_SECRET = 'wz'\nauth = tweepy.OAuthHandler(CONSUMER_KEY, CONSUMER_SECRET)\nauth.set_access_token(ACCESS_KEY, ACCESS_SECRET)\napi = tweepy.API(auth, wait_on_rate_limit=True)\n\n\ndef index(requests):\n\n    for tweet in tweepy.Cursor(api.search,\n                               query=\"xbox\",\n                               q=\"{xbox}\",\n                               count=1,\n                               result_type=\"recent\",\n                               include_entities=True,\n                               lang=\"en\").items():\n\n        twitter_data = {\n            'text': tweet.text,\n            'user_name': tweet.user.name,\n            'user_screen_name': tweet.user.screen_name,\n            'created_at': tweet.created_at,\n            'profile_dp': tweet.user.profile_image_url,\n            'retweet_count': tweet.retweet_count,\n            'fav_count': tweet.favorite_count\n\n        }\n\n    context = {'twitter_data': twitter_data}\n    return render(requests, 'twitter/twitter.html', context)\n\n</code></pre>\n"}, {"tags": ["python", "sys"], "answers": [{"comments": [{"owner": {"reputation": 2777, "user_id": 4852094, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10102767534136292/picture?type=large", "display_name": "Rob", "link": "https://stackoverflow.com/users/4852094/rob"}, "edited": false, "score": 0, "creation_date": 1565827445, "post_id": 57502662, "comment_id": 101475557, "body": "then why does it work when foo is in the bar directory?  Shouldn&#39;t it be doubling up the search for foo/foo/bar?"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1565820391, "creation_date": 1565820391, "answer_id": 57502662, "question_id": 57502569, "link": "https://stackoverflow.com/questions/57502569/where-does-python-look-if-your-sys-path-uses-relative-directory/57502662#57502662", "title": "Where does python look if your sys.path uses relative directory?", "body": "<p><code>from foo import other</code> will append <code>foo</code> to each of the directories in <code>sys.path</code>. So it's looking for <code>../foo/foo/other.py</code>, but the actual path is just <code>../foo/other.py</code>.</p>\n\n<p>You should just insert <code>..</code> into <code>sys.path</code>, then it will look for <code>../foo/other.py</code>. Or if you only want to include that directory in the path, just use <code>import other</code>, without <code>from foo</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2341, "user_id": 1858466, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b2e9688c2a6eabd66b599d001bcb5a0b?s=128&d=identicon&r=PG", "display_name": "Subhash", "link": "https://stackoverflow.com/users/1858466/subhash"}, "is_accepted": false, "score": 1, "last_activity_date": 1565820551, "creation_date": 1565820551, "answer_id": 57502678, "question_id": 57502569, "link": "https://stackoverflow.com/questions/57502569/where-does-python-look-if-your-sys-path-uses-relative-directory/57502678#57502678", "title": "Where does python look if your sys.path uses relative directory?", "body": "<p>Assuming you are in the <code>baz</code> directory, you need to include your parent directory <code>..</code> in the path. Then when you do <code>from foo</code>, the foo directory in your parent directory is found.</p>\n\n<p>This works:</p>\n\n<pre><code>import sys\nsys.path.insert(0, '..')\n\nfrom foo import other\n</code></pre>\n\n<p>Read more:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/31291669/1858466\">Stackoverflow Answer</a></li>\n<li><a href=\"https://chrisyeh96.github.io/2017/08/08/definitive-guide-python-imports.html\" rel=\"nofollow noreferrer\">The Definitive Guide to Python import Statements</a></li>\n</ul>\n\n<hr>\n\n<p>Alternatively, since you included <code>../foo</code> in the path, you could simply do <code>import other</code>, like so:</p>\n\n<pre><code>import sys\nsys.path.insert(0, '..\\foo')\n\nimport other\n</code></pre>\n"}], "owner": {"reputation": 2777, "user_id": 4852094, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10102767534136292/picture?type=large", "display_name": "Rob", "link": "https://stackoverflow.com/users/4852094/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57502662, "answer_count": 2, "score": 3, "last_activity_date": 1565820551, "creation_date": 1565819856, "question_id": 57502569, "link": "https://stackoverflow.com/questions/57502569/where-does-python-look-if-your-sys-path-uses-relative-directory", "title": "Where does python look if your sys.path uses relative directory?", "body": "<p>I have a project like:</p>\n\n<pre><code>project/\n    foo/\n       other.py\n    bar/\n       baz.py\n</code></pre>\n\n<p>If I code something like:</p>\n\n<pre><code>import sys\nsys.path.insert(0, '../foo')\n\nfrom foo import other\n</code></pre>\n\n<p>It doesn't work.  But if I move foo into the bar directory it works.  I realize this is bad code style, but how is this relative path searched and where does the documentation define it?</p>\n"}, {"tags": ["python", "pandas", "group-by"], "answers": [{"comments": [{"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 1, "creation_date": 1565822463, "post_id": 57502598, "comment_id": 101474677, "body": "The problem was that the <code>id</code> weren&#39;t sorted. Now it&#39;s working as expected! Thank you very much"}], "tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 2, "last_activity_date": 1565820019, "creation_date": 1565820019, "answer_id": 57502598, "question_id": 57502564, "link": "https://stackoverflow.com/questions/57502564/keep-only-rows-before-certain-dates-by-group-in-pandas/57502598#57502598", "title": "Keep only rows before certain dates, by group in pandas", "body": "<p>IIUC, set indexes to be the same and use <code>le</code></p>\n\n<pre><code>df[df.set_index('id').date.le(df2.set_index('id').date).values]\n</code></pre>\n\n<hr>\n\n<pre><code>   id    date\n0   1  201301\n1   1  201302\n2   1  201303\n4   2  201402\n5   2  201403\n</code></pre>\n"}], "owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 57502598, "answer_count": 1, "score": 0, "last_activity_date": 1565822148, "creation_date": 1565819837, "last_edit_date": 1565822148, "question_id": 57502564, "link": "https://stackoverflow.com/questions/57502564/keep-only-rows-before-certain-dates-by-group-in-pandas", "title": "Keep only rows before certain dates, by group in pandas", "body": "<p>I have two DataFrames: one has all my <code>id</code>, <code>loan_id</code> and <code>date</code> values for every <code>loan_id</code>, and the other has one random <code>date</code> value for every <code>id</code>:</p>\n\n<p><code>df1</code>:</p>\n\n<pre><code>id     date    loan_id\n1     201301     100\n1     201301     200\n1     201302     100\n1     201302     200  \n1     201303     100\n1     201304     100\n2     201402     100\n2     201403     100\n2     201404     100\n2     201405     100\n</code></pre>\n\n<p><code>df2</code>:</p>\n\n<pre><code>id     date\n1     201303  \n2     201403\n</code></pre>\n\n<p>What I want to achieve is to create a DataFrame that has all values for an <code>id</code> until the date specified in <code>df2</code>, like this:</p>\n\n<pre><code>id     date    loan_id\n1     201301     100\n1     201301     200\n1     201302     100\n1     201302     200  \n1     201303     100\n2     201402     100\n2     201403     100\n</code></pre>\n\n<p>I'm guessing that with a <code>groupby('id')</code> and something else I will be able to achieve it, but I'm not finding that \"something else\". I could do it creating a dummy variable, backfilling by group and dropping the rest, but efficiency is quite important in this problem. Do you know a more efficient way? Thanks.</p>\n\n<p>Edit: Added the fact that the same date can appear twice (or more) for the same <code>id</code>.</p>\n"}, {"tags": ["python", "regex", "string"], "answers": [{"tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 2, "last_activity_date": 1565819999, "creation_date": 1565819999, "answer_id": 57502593, "question_id": 57502545, "link": "https://stackoverflow.com/questions/57502545/how-to-replace-periods-after-all-caps-words/57502593#57502593", "title": "How to replace periods after all caps words?", "body": "<p>Using regex with word-boundary <code>\\b</code> and quantifier <code>{2,}</code> (<a href=\"https://regex101.com/r/qRdyXA/2\" rel=\"nofollow noreferrer\">regex101</a>):</p>\n\n<pre><code>import re\n\ns = \"this is a CITATION. AUTHOR, information GOES here AnD. this P. period isn't replaced.\"\n\nprint( re.sub(r'(\\b[A-Z]{2,})\\.', r'\\1:', s) )\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>this is a CITATION: AUTHOR, information GOES here AnD. this P. period isn't replaced.\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3829547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ab0a6047d35af5c8f81f9dce398127b?s=128&d=identicon&r=PG&f=1", "display_name": "Jayke", "link": "https://stackoverflow.com/users/3829547/jayke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565819999, "creation_date": 1565819683, "question_id": 57502545, "link": "https://stackoverflow.com/questions/57502545/how-to-replace-periods-after-all-caps-words", "title": "How to replace periods after all caps words?", "body": "<p>I'm working with a textual dataset that requires some cleaning, and I need to replace a specific pattern set. Namely, I need to replace periods with colons following only words of len > 1 which contain only capitalized letters.</p>\n\n<p>I've already tried using regex for this but I can't get it to replace only the period.</p>\n\n<p>Ideally, I'd like to have a function doing the following:</p>\n\n<pre><code>s = \"this is a CITATION. AUTHOR, information GOES here AnD. this P. period isn't replaced.\"\ns = corr(s)\ns = \"this is a CITATION: AUTHOR, information GOES here AnD. this P. period isn't replaced.\"\n</code></pre>\n\n<p>But what I've already tried:</p>\n\n<pre><code>import re\ns = re.sub(r'[A-Z]+\\.',':',s)\n</code></pre>\n\n<p>Replaces the occurrence itself with a colon which isn't what I need.</p>\n"}, {"tags": ["python", "pandas", "syntax"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 11919853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZACEVmmuvV8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUO5-xCdXFSCVQbxtdcr6UuI_boA/photo.jpg?sz=128", "display_name": "Matthew Lynn", "link": "https://stackoverflow.com/users/11919853/matthew-lynn"}, "edited": false, "score": 0, "creation_date": 1565820271, "post_id": 57502604, "comment_id": 101474200, "body": "Thank you! That worked like a charm. Would you perhaps know how to use this code, while also selecting specific columns to be in the output (excluding the others)? Such as products code, status, and quantity?"}, {"owner": {"reputation": 98, "user_id": 11924650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1sXlW.png?s=128&g=1", "display_name": "Farrago-Alex", "link": "https://stackoverflow.com/users/11924650/farrago-alex"}, "reply_to_user": {"reputation": 79, "user_id": 11919853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZACEVmmuvV8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUO5-xCdXFSCVQbxtdcr6UuI_boA/photo.jpg?sz=128", "display_name": "Matthew Lynn", "link": "https://stackoverflow.com/users/11919853/matthew-lynn"}, "edited": false, "score": 0, "creation_date": 1565820800, "post_id": 57502604, "comment_id": 101474328, "body": "Sure. The easiest way would be to make a new reference selecting only the columns you want, like: <code>df2 = merge102[[&#39;code&#39;,&#39;status&#39;,&#39;quantity&#39;]]</code> and then searching for the rows you want. Trying to do it all in one line would get a bit messy.  As an aside, if an answer works for your question, its really appreciated if you mark that answer as accepted to close the question :)"}, {"owner": {"reputation": 79, "user_id": 11919853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZACEVmmuvV8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUO5-xCdXFSCVQbxtdcr6UuI_boA/photo.jpg?sz=128", "display_name": "Matthew Lynn", "link": "https://stackoverflow.com/users/11919853/matthew-lynn"}, "edited": false, "score": 0, "creation_date": 1565822097, "post_id": 57502604, "comment_id": 101474606, "body": "Thank you! How do I mark the question as answered? I&#39;ve started a Master of Data Science and am brand new to the coding world!"}, {"owner": {"reputation": 98, "user_id": 11924650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1sXlW.png?s=128&g=1", "display_name": "Farrago-Alex", "link": "https://stackoverflow.com/users/11924650/farrago-alex"}, "reply_to_user": {"reputation": 79, "user_id": 11919853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZACEVmmuvV8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUO5-xCdXFSCVQbxtdcr6UuI_boA/photo.jpg?sz=128", "display_name": "Matthew Lynn", "link": "https://stackoverflow.com/users/11919853/matthew-lynn"}, "edited": false, "score": 0, "creation_date": 1565822716, "post_id": 57502604, "comment_id": 101474728, "body": "On the answer you wish to mark as the accepted answer, click on the grey check mark beside it to set it to green. Only one answer may be the accepted answer, but you can change it at any time."}], "tags": [], "owner": {"reputation": 98, "user_id": 11924650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1sXlW.png?s=128&g=1", "display_name": "Farrago-Alex", "link": "https://stackoverflow.com/users/11924650/farrago-alex"}, "is_accepted": true, "score": 1, "last_activity_date": 1565820035, "creation_date": 1565820035, "answer_id": 57502604, "question_id": 57502526, "link": "https://stackoverflow.com/questions/57502526/i-cannot-figure-out-the-syntax-to-view-specific-instances-of-this-dataframe/57502604#57502604", "title": "I cannot figure out the syntax to view specific instances of this dataframe", "body": "<p>If you want to reference the <code>status</code> column in your dataframe in that manner, the syntax is <code>merge102[merge102.status == 'On Hold']</code></p>\n\n<p>You can also use <code>merge102[merge102['status'] == 'On Hold']</code></p>\n"}], "owner": {"reputation": 79, "user_id": 11919853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZACEVmmuvV8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcUO5-xCdXFSCVQbxtdcr6UuI_boA/photo.jpg?sz=128", "display_name": "Matthew Lynn", "link": "https://stackoverflow.com/users/11919853/matthew-lynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 57502604, "answer_count": 1, "score": 1, "last_activity_date": 1565820035, "creation_date": 1565819542, "question_id": 57502526, "link": "https://stackoverflow.com/questions/57502526/i-cannot-figure-out-the-syntax-to-view-specific-instances-of-this-dataframe", "title": "I cannot figure out the syntax to view specific instances of this dataframe", "body": "<p>I am trying an exercise where I'm merging and pulling values from a dataframe for a specific case.</p>\n\n<p>The code I have: </p>\n\n<pre><code>merge101 = pd.merge(orderdetails_df, orders_df, on = 'ordernumber')\nmerge102 = pd.merge(products_df, merge101, on = 'productcode')\n</code></pre>\n\n<p>One of the columns in merge102 is status. I am trying to select all rows that have status = 'On Hold'. </p>\n\n<p>The code I have tried: </p>\n\n<pre><code>merge102[merge102$status == 'On Hold']\n</code></pre>\n\n<p>This produces a syntax error. Anyone have any idea how this can be resolved?</p>\n"}, {"tags": ["python", "python-docx"], "answers": [{"tags": [], "owner": {"reputation": 558, "user_id": 6506011, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4wOIZIz4Cx0/AAAAAAAAAAI/AAAAAAAAAgM/9RAH0CyQCVM/photo.jpg?sz=128", "display_name": "Pasan Chamikara", "link": "https://stackoverflow.com/users/6506011/pasan-chamikara"}, "is_accepted": true, "score": 1, "last_activity_date": 1565827891, "creation_date": 1565827891, "answer_id": 57503468, "question_id": 57502521, "link": "https://stackoverflow.com/questions/57502521/looping-through-a-list-or-dict-when-using-python-docx-template-docxtpl/57503468#57503468", "title": "Looping through a list (or dict) when using python-docx-template (docxtpl)", "body": "<p>While using tuples (the bracket thing) , it is not possible to reach the elements without a numeric index. Therefore the best thing to do is accessing them via an index like <code>kid[1]</code>, or otherwise turn the tuple into a dictionary prior accessing it (IMO this is the most reliable)</p>\n"}], "owner": {"reputation": 467, "user_id": 1844222, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3423e4317faeef516f152094773abbbd?s=128&d=identicon&r=PG", "display_name": "j_allen_morris", "link": "https://stackoverflow.com/users/1844222/j-allen-morris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1420, "favorite_count": 0, "accepted_answer_id": 57503468, "answer_count": 1, "score": 1, "last_activity_date": 1565827891, "creation_date": 1565819500, "last_edit_date": 1565827377, "question_id": 57502521, "link": "https://stackoverflow.com/questions/57502521/looping-through-a-list-or-dict-when-using-python-docx-template-docxtpl", "title": "Looping through a list (or dict) when using python-docx-template (docxtpl)", "body": "<p>EDIT:  I must admit I screwed up and hadn't downloaded all of the examples/tests.  I downloaded the entire package and found awesome examples that showed me how to do everything I wanted to do.  This particular issue is shows in <code>dynamic_table_tpl.py</code> and <code>dynamic_table.docx</code>.  </p>\n\n<p>I am using python-docx-template and have created a DOCX template.  I have been trying to use jinja2 formatting as the documentation suggests.  I need to add a series of addresses into my DOCX file.  That data is from a database and I'm pulling it from the DB using python.</p>\n\n<p>Here's what I have in the DOCX Template file:</p>\n\n<pre><code>{% for kid in kids %}\n{kid.first}{kid.last}\n{kid.addr1}{kid.addr2}\n{kid.city}{kid.state}{kid.zip}  \n\n{% endfor %}\n</code></pre>\n\n<p>This is in my .py file:</p>\n\n<pre><code>kids = [\n    [\n        ('first','John'),\n        ('last','Williams'),\n        ('addr1','5555 NW 37th St')\n        ('addr2','Apt 2601')\n        ('city','Oklahoma City')\n        ('state','OK')\n        ('zip','73112')\n    ],\n    [\n        ('first','George'),\n        ('last','Lucas'),\n        ('addr1','1234 Dobbs St.')\n        ('addr2','Suite 62')\n        ('city','Moore')\n        ('state','OK')\n        ('zip','73160')\n    ]\n]\n\ncontext = {\n    \"kids\" : kids\n}\n</code></pre>\n\n<p>I've looked in the documentation and examples and have not found out how to make this work.  If I have 2 kids in the database, I would like the result to look something like this:</p>\n\n<pre><code>John Williams\n5555 NW 37th St., Apt 2601\nOklahoma City, OK 73112\n\nGeorge Lucas\n1234 Dobbs St., Suite 62\nMoore, OK 73160\n</code></pre>\n\n<p>The template is not replacing anything in the loop.  It is writing both of the loops in the created DOCX where in the Template I have the <code>for kid in kids</code> loop only written once.  It's reading it in some way, but not exactly how I need it to work.</p>\n\n<p>Any help is greatly appreciated!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1565819541, "post_id": 57502484, "comment_id": 101474006, "body": "Depends on what you publish. Do you want to publish an interactive workbook for learning experience or do you want to publish a library?"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 10621555, "user_type": "registered", "profile_image": "https://graph.facebook.com/1834745793/picture?type=large", "display_name": "Hao Xu", "link": "https://stackoverflow.com/users/10621555/hao-xu"}, "edited": false, "score": 0, "creation_date": 1565824985, "post_id": 57502532, "comment_id": 101475135, "body": "Thanks, I already read this part and I am learning the .ipynb, not .ipy."}], "tags": [], "owner": {"reputation": 98, "user_id": 11924650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1sXlW.png?s=128&g=1", "display_name": "Farrago-Alex", "link": "https://stackoverflow.com/users/11924650/farrago-alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1565819570, "creation_date": 1565819570, "answer_id": 57502532, "question_id": 57502484, "link": "https://stackoverflow.com/questions/57502484/what-is-the-difference-between-a-py-file-and-ipynb-file/57502532#57502532", "title": "What is the difference between a .py file and .ipynb file?", "body": "<p>I think the answer here might help you: <a href=\"https://stackoverflow.com/a/32029027/11924650\">https://stackoverflow.com/a/32029027/11924650</a></p>\n\n<blockquote>\n  <p>.ipy indicates that it's an IPython script. The only difference between IPython scripts and normal Python scripts is that IPython scripts can use IPython magics, e.g. %timeit, and run system commands as !echo Hi.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 10621555, "user_type": "registered", "profile_image": "https://graph.facebook.com/1834745793/picture?type=large", "display_name": "Hao Xu", "link": "https://stackoverflow.com/users/10621555/hao-xu"}, "edited": false, "score": 0, "creation_date": 1565825031, "post_id": 57502539, "comment_id": 101475142, "body": "It is very helpful, thanks. I just seems like better to keep .py files on git."}], "tags": [], "owner": {"reputation": 970, "user_id": 689194, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c2f9b17761a2cba8b6646dcc58a94416?s=128&d=identicon&r=PG", "display_name": "Josir", "link": "https://stackoverflow.com/users/689194/josir"}, "is_accepted": false, "score": 10, "last_activity_date": 1565819987, "last_edit_date": 1565819987, "creation_date": 1565819611, "answer_id": 57502539, "question_id": 57502484, "link": "https://stackoverflow.com/questions/57502484/what-is-the-difference-between-a-py-file-and-ipynb-file/57502539#57502539", "title": "What is the difference between a .py file and .ipynb file?", "body": "<p>.py is a regular python file. It's plain text and contains just your code.</p>\n\n<p>.ipynb is a python notebook and it contains the notebook code, the execution results and other internal settings in a specific format. You can just run .ipynb on the jupyter environment.</p>\n\n<p>Better way to understand the difference: open each file using a regular text editor like notepad (on Windows) or gedit (on Linux).</p>\n\n<p>Save on git the .ipynb if you want to show the results of your script for didatic purposes, for example. But if you are going to run your code on a server, just save the .py</p>\n"}, {"tags": [], "owner": {"reputation": 1833, "user_id": 1862590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX6Kb.png?s=128&g=1", "display_name": "Sathia", "link": "https://stackoverflow.com/users/1862590/sathia"}, "is_accepted": false, "score": 1, "last_activity_date": 1617875237, "creation_date": 1617875237, "answer_id": 67001444, "question_id": 57502484, "link": "https://stackoverflow.com/questions/57502484/what-is-the-difference-between-a-py-file-and-ipynb-file/67001444#67001444", "title": "What is the difference between a .py file and .ipynb file?", "body": "<p>Adding <a href=\"https://i.stack.imgur.com/G2QB5.png\" rel=\"nofollow noreferrer\">@Josir</a> answer, the below information is very useful for <strong>open</strong> <code>.ipynb</code> file using <strong>PyCharm</strong>.</p>\n<ol>\n<li>Create a new Python project in Pycharm</li>\n<li>Specify a virtual environment, and install the jupyter package(<code>pip install jupyterlab</code>).</li>\n<li>Run the server using <code>jupyter-lab</code> command.</li>\n<li>Browser will open the jupyter notebook like below, there you can execute the <code>.ipynp</code> file.\n<a href=\"https://i.stack.imgur.com/G2QB5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G2QB5.png\" alt=\"enter image description here\" /></a></li>\n</ol>\n<p>Here is documentation <a href=\"https://jupyterlab.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">https://jupyterlab.readthedocs.io/en/latest/</a></p>\n"}], "owner": {"reputation": 169, "user_id": 10621555, "user_type": "registered", "profile_image": "https://graph.facebook.com/1834745793/picture?type=large", "display_name": "Hao Xu", "link": "https://stackoverflow.com/users/10621555/hao-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11743, "favorite_count": 1, "answer_count": 3, "score": 12, "last_activity_date": 1617875237, "creation_date": 1565819295, "question_id": 57502484, "link": "https://stackoverflow.com/questions/57502484/what-is-the-difference-between-a-py-file-and-ipynb-file", "title": "What is the difference between a .py file and .ipynb file?", "body": "<p>I have read about .py and .ipy, also the difference between python, ipython and notebook. </p>\n\n<p>But the question is: what is the real difference between .py and .ipynb file? </p>\n\n<p>Is .ipynb file just more convenient to be run on jupyter notebook, or anything more?   I am wondering because I am thinking about which format to be used for publishing on GitHub. </p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pandas", "d3.js", "plotly"], "answers": [{"tags": [], "owner": {"reputation": 28403, "user_id": 3437787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8tmU.jpg?s=128&g=1", "display_name": "vestland", "link": "https://stackoverflow.com/users/3437787/vestland"}, "is_accepted": true, "score": 5, "last_activity_date": 1607407939, "last_edit_date": 1607407939, "creation_date": 1574239234, "answer_id": 58949984, "question_id": 57502469, "link": "https://stackoverflow.com/questions/57502469/plotly-how-to-plot-grouped-results-on-multiple-lines/58949984#58949984", "title": "Plotly: How to plot grouped results on multiple lines?", "body": "<p>To my knowledge, you're going to have to use an approach like <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.pivot.html\" rel=\"nofollow noreferrer\">pandas.DataFrame.pivot</a> to get the data structure you're looking for here. Here's a suggestion that should fit the description of your dataset using the following sample dataframe:</p>\n<p><strong>Data:</strong></p>\n<pre><code>         Date  ID Category\n0  2013-01-02   1        A\n1  2013-01-02   3        B\n2  2013-01-03   1        C\n3  2013-01-03   2        B\n4  2013-01-03   1        B\n5  2013-01-03   3        A\n6  2013-01-03   3        A\n7  2013-01-03   4        A\n8  2013-01-04   4        B\n9  2013-01-04   4        C\n10 2013-01-05   1        B\n11 2013-01-06   2        A\n</code></pre>\n<p><strong>Plot:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/c1ggF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c1ggF.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Code:</strong></p>\n<pre><code>import plotly.graph_objs as go\nimport pandas as pd\nimport numpy as np\n\n# sample dataframe to match OPs structure\ndf = pd.DataFrame({'Date' : [pd.Timestamp('20130102'), pd.Timestamp('20130102'), \n                             pd.Timestamp('20130103'), pd.Timestamp('20130103'),\n                             pd.Timestamp('20130103'), pd.Timestamp('20130103'),\n                             pd.Timestamp('20130103'), pd.Timestamp('20130103'),\n                             pd.Timestamp('20130104'), pd.Timestamp('20130104'),\n                           pd.Timestamp('20130105'),pd.Timestamp('20130106')],\n                    'ID' : [1, 3, 1, 2, 1 , 3,3,4,4,4,1,2],\n                    'Category' : pd.Categorical([&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;B&quot;,&quot;B&quot;,&quot;A&quot;,\n                                                 &quot;A&quot;,&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;B&quot;,&quot;A&quot;  ])})\n# data munging to get OPs desired plot\ndf = pd.pivot_table(df, values='ID', index=['Date'],columns='Category', aggfunc=np.sum)\n\n# ploty\nfig = go.Figure()\nfor col in df.columns:\n    fig.add_trace(go.Scatter(x=df.index, y=df[col].values,\n                             name = col,\n                             mode = 'markers+lines',\n                             line=dict(shape='linear'),\n                             connectgaps=True\n                             )\n                 )\nfig.show()\n</code></pre>\n"}], "owner": {"reputation": 412, "user_id": 10795530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b58d94d9587845be91f69038f42fb02?s=128&d=identicon&r=PG&f=1", "display_name": "adnan", "link": "https://stackoverflow.com/users/10795530/adnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3710, "favorite_count": 2, "accepted_answer_id": 58949984, "answer_count": 1, "score": 1, "last_activity_date": 1607407939, "creation_date": 1565819187, "last_edit_date": 1574322054, "question_id": 57502469, "link": "https://stackoverflow.com/questions/57502469/plotly-how-to-plot-grouped-results-on-multiple-lines", "title": "Plotly: How to plot grouped results on multiple lines?", "body": "<p>I am trying to create multiple lines chart based on count of ID by Category and Date in \"Plotly \"\nMy Date contains three columns \"Date\" , \"Category\" , \"ID\"</p>\n\n<p>I have plotted a single line its for now using this code</p>\n\n<pre><code>b=mdata.groupby(['Date']).count()['ID ']\nb=b.sort_index(ascending=True)\n\n\nxScale = b.index\nyScale = b.values\ntrace =go.Scatter(\n    x = xScale,\n    y = yScale,\n    marker=dict(\n        color='Red')\n\n)\ndata2 = [trace]\ngraphJSON2 = json.dumps(data2, cls=plotly.utils.PlotlyJSONEncoder)\n</code></pre>\n\n<p>The output chart should have Date on X axis , Count of ID on Y axis and multiples lines based on Cateogry</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 3, "last_activity_date": 1565820021, "last_edit_date": 1565820021, "creation_date": 1565819225, "answer_id": 57502474, "question_id": 57502438, "link": "https://stackoverflow.com/questions/57502438/for-each-row-how-to-sum-values-for-columns-start-with-same-string/57502474#57502474", "title": "For each row, how to sum values for columns start with same string", "body": "<h2><code>pandas.DataFrame.groupby</code> with <code>axis=1</code></h2>\n\n<p>OP was vague about the general characteristics of the column names.  Please read the various options to determine what is more appropriate for your specific case.</p>\n\n<h3><code>callable</code> version #1</h3>\n\n<p>Assuming your column prefixes are single characters...</p>\n\n<pre><code>from operator import itemgetter\n\ndf.groupby(itemgetter(0), axis=1).sum()\n\n     C   T\n0   62  33\n1  145  99\n</code></pre>\n\n<p>When you pass a <code>callable</code> to <code>pandas.DataFrame.groupby</code>, it maps that callable onto the index (or columns if <code>axis=1</code>) and lets the unique results act as the grouping keys.</p>\n\n<hr>\n\n<h3><code>callable</code> version #2: Roll Our Own</h3>\n\n<p>A little more convoluted but should be robust for more than just single character prefixes.  Also, uses no imports.</p>\n\n<pre><code>def yield_while_alpha(x):\n    it = iter(x)\n    y = next(it)\n    while y.isalpha():\n        yield y\n        y = next(it)\n\ndef get_prefix(x):\n    return ''.join(yield_while_alpha(x))\n\ndf.groupby(get_prefix, axis=1).sum()\n\n     C   T\n0   62  33\n1  145  99\n</code></pre>\n\n<p>Same exact idea but using <code>itertools</code> instead</p>\n\n<pre><code>from itertools import takewhile\n\ndf.groupby(\n    lambda x: ''.join(takewhile(str.isalpha, x)),\n    axis=1\n).sum()\n\n     C   T\n0   62  33\n1  145  99\n</code></pre>\n\n<hr>\n\n<h3><code>pandas.Index.str.extract</code></h3>\n\n<p>Or we don't have to use a <code>callable</code></p>\n\n<pre><code>df.groupby(df.columns.str.extract('(\\D+)', expand=False), axis=1).sum()\n\n     C   T\n0   62  33\n1  145  99\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 72931, "user_id": 2538939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/876f7ddaf27a16c17a62b8a9705b45f1?s=128&d=identicon&r=PG&f=1", "display_name": "Code Different", "link": "https://stackoverflow.com/users/2538939/code-different"}, "is_accepted": false, "score": 2, "last_activity_date": 1565819474, "creation_date": 1565819474, "answer_id": 57502512, "question_id": 57502438, "link": "https://stackoverflow.com/questions/57502438/for-each-row-how-to-sum-values-for-columns-start-with-same-string/57502512#57502512", "title": "For each row, how to sum values for columns start with same string", "body": "<p>An alternative using <code>MultiIndex</code>:</p>\n\n<pre><code>df.columns = [df.columns.str[0], df.columns]\ndf.groupby(level=0, axis=1).sum()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 4, "last_activity_date": 1565819563, "creation_date": 1565819563, "answer_id": 57502531, "question_id": 57502438, "link": "https://stackoverflow.com/questions/57502438/for-each-row-how-to-sum-values-for-columns-start-with-same-string/57502531#57502531", "title": "For each row, how to sum values for columns start with same string", "body": "<p>Use,</p>\n\n<pre><code> df.groupby(df.columns.str[0], axis=1).sum()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>     C   T\n0   62  33\n1  145  99\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 3275943, "user_type": "registered", "profile_image": "https://graph.facebook.com/1431555586/picture?type=large", "display_name": "user3275943", "link": "https://stackoverflow.com/users/3275943/user3275943"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 57502474, "answer_count": 3, "score": 4, "last_activity_date": 1565821439, "creation_date": 1565818957, "last_edit_date": 1565821439, "question_id": 57502438, "link": "https://stackoverflow.com/questions/57502438/for-each-row-how-to-sum-values-for-columns-start-with-same-string", "title": "For each row, how to sum values for columns start with same string", "body": "<p>Edit: the column names indeed start with more than 1 character, but with a sep='_', it's more like AAA_BBB, AAA_DDD, BBB_EEE, BBB_FFF, ...</p>\n\n<p>Thanks for the groupby solutions!</p>\n\n<hr>\n\n<p>I have a pandas dataframe like this (borrowed from another question):</p>\n\n<pre><code>df =\n\nC1    C2    T3  T5\n28    34    11  22\n45    100   33  66\n</code></pre>\n\n<p>How can I get a new dataframe, with sum of columns that have the same \"starting string\", e.g. \"C\", \"T\" ? Thanks!</p>\n\n<pre><code>df =\n\nC     T  \n62    33    \n145   99\n</code></pre>\n\n<p>Unfortunately I have to deal with this structure of dataframe, and there are about 1000 columns in the dataframe, looks like A1,A2,A3,B1,B2,B3, ...</p>\n"}, {"tags": ["python", "matplotlib", "sankey-diagram"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 586157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a39206376fde3f80c728301c222e685?s=128&d=identicon&r=PG", "display_name": "rflrob", "link": "https://stackoverflow.com/users/586157/rflrob"}, "edited": false, "score": 0, "creation_date": 1566318950, "post_id": 57524682, "comment_id": 101616186, "body": "I think this is a useful solution for somebody, but there&#39;s enough stages in the real diagram that I&#39;m working on that adding enough whitespace to separate the labels makes the whole thing unwieldy in other ways."}, {"owner": {"reputation": 65, "user_id": 586157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a39206376fde3f80c728301c222e685?s=128&d=identicon&r=PG", "display_name": "rflrob", "link": "https://stackoverflow.com/users/586157/rflrob"}, "edited": false, "score": 0, "creation_date": 1566319366, "post_id": 57524682, "comment_id": 101616376, "body": "However, what I can do is instead of having the dummy stage be blank, color it the same color as the previous stage using <code>s.diagrams[-1].patch.get_facecolor()</code>, which gets me most of the way there (with only slight visual hiccups around the edges)."}], "tags": [], "owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "is_accepted": false, "score": 1, "last_activity_date": 1565958578, "creation_date": 1565958578, "answer_id": 57524682, "question_id": 57502429, "link": "https://stackoverflow.com/questions/57502429/how-to-create-a-gap-between-adjacent-arrows-in-connected-matplotlib-sankey-subdi/57524682#57524682", "title": "How to create a gap between adjacent arrows in connected Matplotlib Sankey subdiagrams", "body": "<p>I'm not really familiar with Sankey, but maybe adding a dummy, invisible, arrow in between the blue and orange could do the trick?</p>\n\n<pre><code>from matplotlib.sankey import Sankey\n\ns = Sankey(scale=1./100, shoulder=0)\n\ns.add(\n    flows=[100, 20, -100, -20,], \n    orientations=[0,1,0,1, ],\n    labels=[\"In\", \"LongInputName\", None, \"LongOutputName\", ],\n)\n\ns.add(\n    flows = [100,-100],\n    orientations = [0,0],\n    labels=[\"\",\"\"],\n    prior=0,\n    connect=(2,0),\n    fill=False,\n    lw=0\n    )\n\ns.add(\n    flows=[100, 30, -130],\n    orientations=[0,1,0],\n    labels=[None, \"OtherLongInput\", \"Output\"],\n    prior=1,\n    connect=(1,0),\n)\n\n_ = s.finish()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/nOwJx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nOwJx.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 65, "user_id": 586157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a39206376fde3f80c728301c222e685?s=128&d=identicon&r=PG", "display_name": "rflrob", "link": "https://stackoverflow.com/users/586157/rflrob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565958578, "creation_date": 1565818870, "question_id": 57502429, "link": "https://stackoverflow.com/questions/57502429/how-to-create-a-gap-between-adjacent-arrows-in-connected-matplotlib-sankey-subdi", "title": "How to create a gap between adjacent arrows in connected Matplotlib Sankey subdiagrams", "body": "<p>I have a Sankey diagram that has flows coming into and out of the main stream from both directions, but the flows going out of Sankey object N directly abut the flows going into Sankey object N+1.</p>\n\n<p>I can't find any obvious candidates in the documentation for having something turn off \"early\". I can put in a dummy 0 flow, but that creates an unsightly arc. I've also tried changing the lengths of the output paths to limit the amount of text overlap, but then I'm still stuck with some text overlapping a diagram.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nfrom matplotlib.sankey import Sankey\n\ns = Sankey(scale=1./100, shoulder=0)\n\ns.add(\n    flows=[100, 20, -100, -20,], \n    orientations=[0,1,0,1, ],\n    labels=[\"In\", \"LongInputName\", None, \"LongOutputName\", ],\n)\n\ns.add(\n    flows=[100, 30, -130],\n    orientations=[0,1,0],\n    labels=[None, \"OtherLongInput\", \"Output\"],\n    prior=0,\n    connect=(2,0),\n)\n\n_ = s.finish()\n</code></pre>\n\n<p>In this simplified example, the labels for LongOutput and OtherLongInput overlap, and the arrows \"kiss\" for some of their length.</p>\n\n<p><a href=\"https://i.stack.imgur.com/G3hwd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G3hwd.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 1, "creation_date": 1565819375, "post_id": 57502405, "comment_id": 101473965, "body": "Is this python 2 or python 3? In python 3 &quot;//&quot; is the integer division operator."}, {"owner": {"reputation": 939, "user_id": 8627992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EeSws.png?s=128&g=1", "display_name": "Talon", "link": "https://stackoverflow.com/users/8627992/talon"}, "reply_to_user": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1565819803, "post_id": 57502405, "comment_id": 101474064, "body": "There are some issues, I assume GCD is an alias to <code>math.gcd</code>? It&#39;s arguments must be integers, but the division you make in <b>init</b> always gives a flioat. As @JamesKPolk said, make a floor division with <code>&#47;&#47;</code> to fix that."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1565819809, "post_id": 57502405, "comment_id": 101474067, "body": "Are you sure <code>GCD</code> works?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 939, "user_id": 8627992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EeSws.png?s=128&g=1", "display_name": "Talon", "link": "https://stackoverflow.com/users/8627992/talon"}, "edited": false, "score": 1, "creation_date": 1565819849, "post_id": 57502405, "comment_id": 101474076, "body": "@Talon He would be getting a TypeError if that were the problem, so he must be using a different GCD function."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1565820170, "post_id": 57502405, "comment_id": 101474166, "body": "<code>numerator&#47;GCD(numerator,denominator)</code> will make your <code>.numerator</code> a <code>float</code> object. Same issue with your denominator."}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 1, "creation_date": 1565820175, "post_id": 57502405, "comment_id": 101474168, "body": "Get rid of those <code>int()</code>s in <code>__sub__()</code> - they&#39;re hiding the fact that your numerator or denominator became a float."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1565820241, "post_id": 57502405, "comment_id": 101474189, "body": "As an aside, you know Python has a <code>Fraction</code> type in the standard library? It&#39;s available in <a href=\"https://docs.python.org/3.7/library/fractions.html\" rel=\"nofollow noreferrer\"><code>fractions</code></a>"}, {"owner": {"reputation": 63, "user_id": 9567097, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WeQUOVUVw2w/AAAAAAAAAAI/AAAAAAAAAUc/5D4yqXR5nC8/photo.jpg?sz=128", "display_name": "Brent Underwood", "link": "https://stackoverflow.com/users/9567097/brent-underwood"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1565820893, "post_id": 57502405, "comment_id": 101474349, "body": "@juanpa.arrivillaga I did not know that, thank you."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 9567097, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WeQUOVUVw2w/AAAAAAAAAAI/AAAAAAAAAUc/5D4yqXR5nC8/photo.jpg?sz=128", "display_name": "Brent Underwood", "link": "https://stackoverflow.com/users/9567097/brent-underwood"}, "edited": false, "score": 1, "creation_date": 1565820821, "post_id": 57502628, "comment_id": 101474334, "body": "This did solve the problem. Thank you. I incorrectly assumed that because GCD necessarily divided the numerator, the result would be an integer."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1565826856, "post_id": 57502628, "comment_id": 101475465, "body": "That was true in Python 2; <code>&#47;</code> only returned a float if one of its arguments was a float."}], "tags": [], "owner": {"reputation": 939, "user_id": 8627992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EeSws.png?s=128&g=1", "display_name": "Talon", "link": "https://stackoverflow.com/users/8627992/talon"}, "is_accepted": true, "score": 2, "last_activity_date": 1565820864, "last_edit_date": 1565820864, "creation_date": 1565820188, "answer_id": 57502628, "question_id": 57502405, "link": "https://stackoverflow.com/questions/57502405/why-is-python-saying-these-two-fractions-are-the-same/57502628#57502628", "title": "Why is Python saying these two fractions are the same?", "body": "<p>The problem with the incorrect calculation appears to be a float rounding issue. Because in <code>__init__</code>, you have a division operation, which returns a float, so the following calculations work with floats as well, and there, rounding issues might appear. You do cast to int in <code>__sub__</code>, but after the calculation took place. To test, try:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>29 * 7924325834608857.0\n29 * 7924325834608857\n29 * 7924325834608857.0 == 29 * 7924325834608857\n</code></pre>\n\n<p>Results will be</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>2.2980544920365686e+17\n229805449203656853\nFalse\n</code></pre>\n\n<p>To fix this, you could make a floor division (Which ignores the remainder of a division, making the result an int) in <code>__init__</code>, like this</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Fraction():\n    def __init__(self, numerator, denominator=1):\n        self.numerator = numerator // GCD(numerator, denominator)\n        self.denominator = denominator // GCD(numerator, denominator)\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 9567097, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WeQUOVUVw2w/AAAAAAAAAAI/AAAAAAAAAUc/5D4yqXR5nC8/photo.jpg?sz=128", "display_name": "Brent Underwood", "link": "https://stackoverflow.com/users/9567097/brent-underwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 57502628, "answer_count": 1, "score": 0, "last_activity_date": 1565820864, "creation_date": 1565818695, "last_edit_date": 1565820601, "question_id": 57502405, "link": "https://stackoverflow.com/questions/57502405/why-is-python-saying-these-two-fractions-are-the-same", "title": "Why is Python saying these two fractions are the same?", "body": "<p>I'm trying to take advantage of Python's nearly infinite integer precision in order to work with large fractions, but there seem to be some precision issues creeping in anyway.</p>\n\n<p>I have a class called Fraction, which has a numerator attribute and a denominator attribute. I then defined the arithmetic operations on the class using only addition/subtraction and multiplication of integer components. The idea is that there will never be any precision loss due to floating point issues. The initializer method and subtraction method are shown below </p>\n\n<pre><code>class Fraction:\n    def __init__(self, numerator, denominator = 1):\n        self.numerator = numerator/GCD(numerator,denominator)\n        self.denominator = denominator/GCD(numerator,denominator)\n\n    def __sub__(self,other):\n        print(\"x:\",int(self.denominator))\n        print(\"y:\",int(other.numerator))\n        print(\"x*y:\",int(self.denominator*other.numerator))\n        return Fraction(self.numerator*other.denominator - self.denominator*other.numerator, self.denominator*other.denominator)\n</code></pre>\n\n<p>The <code>print</code> statements were added for debugging purposes, and they highlight the issue.</p>\n\n<p>When I run the program in python3.6.1, the following issues develop when I start performing operations in the terminal:</p>\n\n<p>Python Shell Input:</p>\n\n<p><code>Fraction(1,29) - Fraction(7924325834608857,229805449203656864)</code></p>\n\n<p>Output:</p>\n\n<pre><code>x: 29\ny: 7924325834608857\nx*y: 229805449203656864\n(0/1)\n</code></pre>\n\n<p>The problem is that <code>29*7924325834608857</code> does not equal <code>229805449203656864</code></p>\n\n<p>So what's going on?</p>\n\n<p>EDIT in response to comments:\nHere is the GCD function I used. It has worked for every test case I tried it on, but maybe the precision issue is with python's modulus operator?</p>\n\n<pre><code>def GCD(num1,num2):\n    a = max(num1,num2)\n    b = min(num1,num2)\n\n    if a == 0 and b != 0:\n        return b\n    elif b == 0 and a !=0:\n        return a\n    elif a%b == 0:\n        return b\n    else:\n        return GCD(a%b, b)\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "for-loop", "if-statement"], "comments": [{"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1565818324, "post_id": 57502324, "comment_id": 101473632, "body": "do a <code>print(pos)</code> right before line 5 in <code>row_to_tree</code>"}, {"owner": {"reputation": 63, "user_id": 10826803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b49a3c6be09350a5f11ca7224315598?s=128&d=identicon&r=PG&f=1", "display_name": "poweredbygt", "link": "https://stackoverflow.com/users/10826803/poweredbygt"}, "reply_to_user": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1565818436, "post_id": 57502324, "comment_id": 101473668, "body": "I get this: <code>defaultdict(&lt;class &#39;list&#39;&gt;, {}) []</code>"}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1565818572, "post_id": 57502324, "comment_id": 101473708, "body": "that&#39;s odd, since you&#39;re forcing it to be a list, please review and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Also, what are you trying to achieve by doing <code>pos = [out]</code>?"}, {"owner": {"reputation": 63, "user_id": 10826803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b49a3c6be09350a5f11ca7224315598?s=128&d=identicon&r=PG&f=1", "display_name": "poweredbygt", "link": "https://stackoverflow.com/users/10826803/poweredbygt"}, "reply_to_user": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1565818960, "post_id": 57502324, "comment_id": 101473825, "body": "@Yuca initializing an empty list?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1565819396, "post_id": 57502324, "comment_id": 101473969, "body": "An empty list has no index <code>[0]</code>"}, {"owner": {"reputation": 63, "user_id": 10826803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b49a3c6be09350a5f11ca7224315598?s=128&d=identicon&r=PG&f=1", "display_name": "poweredbygt", "link": "https://stackoverflow.com/users/10826803/poweredbygt"}, "reply_to_user": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1565821383, "post_id": 57502324, "comment_id": 101474466, "body": "@Yuca Please, check my edited post again."}], "owner": {"reputation": 63, "user_id": 10826803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b49a3c6be09350a5f11ca7224315598?s=128&d=identicon&r=PG&f=1", "display_name": "poweredbygt", "link": "https://stackoverflow.com/users/10826803/poweredbygt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565821743, "creation_date": 1565818182, "last_edit_date": 1565821743, "question_id": 57502324, "link": "https://stackoverflow.com/questions/57502324/not-going-into-the-if-statement-which-is-inside-a-for-loop", "title": "Not going into the if statement which is inside a for loop", "body": "<p>This code below is what I have tried but it's not going into the if statements: </p>\n\n<pre><code>def row_to_tree(row):\n        out = {}\n        pos = [out]\n        for cues, directions, thresholds, exits in zip(*map(lambda x: x.split(\";\"), row[[\"cues\", \"directions\", \"thresholds\", \"exits\"]].values)):\n                pos = pos[0]\n#                 print(pos)\n                if exits == 1:\n                    pos.append({\"cues\": True})\n                    pos[\"cues\"] = cues\n                    pos[\"directions\"] = directions\n                    pos[\"thresholds\"] = thresholds\n                    pos[\"exits\"] = exits\n                elif exits == 0:    \n                    pos[\"cues\"] = cues\n                    pos[\"directions\"] = directions\n                    pos[\"thresholds\"] = thresholds\n                    pos[\"exits\"] = exits\n                    pos.append({\"cues\": False})\n                pos[\"children\"] = [{\"cues\":True}]\n                pos = pos[\"children\"]\n        pos.append({\"cues\": False})\n        return out\n\ntrees = [row_to_tree(row) for i, row in df2.iterrows()]\n\ntrees[0]\n</code></pre>\n\n<p>it's throwing me this:</p>\n\n<pre><code>{'children': [{'cues': True,\n   'children': [{'cues': True,\n     'children': [{'cues': True,\n       'children': [{'cues': True}, {'cues': False}]}]}]}]}\n</code></pre>\n\n<p>Which is not what I want. What I want is this down below, as an example I have written the first row.</p>\n\n<p>So from this dataframe: </p>\n\n<pre><code>tree       cues                        directions   thresholds   exits\n 1   PLC2hrOGTT;Age;BMI;TimesPregnant   &gt;;&gt;;&gt;;&gt;   126;29;29.7;6  1;0;1;0.5\n 2   PLC2hrOGTT;Age;BMI                 &gt;;&gt;;&gt;     126;29;29.7    0;1;0.5\n 3   PLC2hrOGTT;Age;BMI;TimesPregnant   &gt;;&gt;;&gt;;&gt;   126;29;29.7;6  1;0;0;0.5\n 4   PLC2hrOGTT;Age;BMI;TimesPregnant   &gt;;&gt;;&gt;;&gt;   126;29;29.7;6  1;1;0;0.5\n 5   PLC2hrOGTT;Age;BMI;TimesPregnant   &gt;;&gt;;&gt;;&gt;   126;29;29.7;6  0;1;0;0.5\n 6   PLC2hrOGTT;Age;BMI                 &gt;;&gt;;&gt;     126;29;29.7    0;0;0.5 \n 7   PLC2hrOGTT;Age;BMI;TimesPregnant   &gt;;&gt;;&gt;;&gt;   126;29;29.7;6  1;1;1;0.5\n 8   PLC2hrOGTT;Age;BMI;TimesPregnant   &gt;;&gt;;&gt;;&gt;   126;29;29.7;6  0;0;0;0.5\n</code></pre>\n\n<p>I am trying to get something like this (i.e. first row): </p>\n\n<pre><code>{\n    \"cues\": \"PLC2hrOGTT\",\n    \"directions\": \"&gt;\",\n    \"thresholds\": \"126\",\n    \"exits\": \"1\",\n    \"children\": [\n      {\n        \"cues\": \"True\",\n      },\n      {\n        \"cues\": \"Age\",\n        \"directions\": \"&gt;\",\n        \"thresholds\": \"29\",\n        \"exits\": \"0\",\n        \"children\": [\n          {\n            \"cues\": \"BMI\",\n            \"directions\": \"&gt;\",\n            \"thresholds\": \"29.7\",\n            \"exits\": \"1\",\n            \"children\": [\n              {\n                \"cues\": \"True\",\n              },\n              {\n                \"cues\": \"TimesPregnant\",\n                \"directions\": \"&gt;\",\n                \"thresholds\": \"6\",\n                \"exits\": \"0.5\",\n                \"children\":[\n                  {\n                    \"cues\": \"True\"\n                  },\n                  {\n                    \"cues\": \"False\"\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"cues\": \"False\"\n          }\n        ]\n      }\n    ]\n    }\n</code></pre>\n\n<p>but I am struggling with it and can't seem to make a solution for it, probably as I am not very experienced with python nor pandas. </p>\n\n<p>Any help would be highly appreciated. </p>\n"}, {"tags": ["python", "logging"], "answers": [{"tags": [], "owner": {"reputation": 2341, "user_id": 1858466, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b2e9688c2a6eabd66b599d001bcb5a0b?s=128&d=identicon&r=PG", "display_name": "Subhash", "link": "https://stackoverflow.com/users/1858466/subhash"}, "is_accepted": false, "score": 0, "last_activity_date": 1565819784, "creation_date": 1565819784, "answer_id": 57502557, "question_id": 57502264, "link": "https://stackoverflow.com/questions/57502264/is-there-a-way-to-convert-logging-config-format-read-using-fileconfig-to-forma/57502557#57502557", "title": "Is there a way to convert logging config format read using &quot;fileConfig&quot; to format needed for &quot;dictConfig&quot;?", "body": "<p>No, there is no parser in the standard library that'll take an <code>ini</code> file and spit out a dictConfig compatible dictionary. You will have to create your own json file format to populate your dictionary.</p>\n\n<p>You can find a good JSON file example <a href=\"https://stackoverflow.com/a/7507842/1858466\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 178, "user_id": 5306011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dabcc3a227197076690f56bef0893ec?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5306011/joe"}, "is_accepted": false, "score": 0, "last_activity_date": 1592678493, "creation_date": 1592678493, "answer_id": 62490175, "question_id": 57502264, "link": "https://stackoverflow.com/questions/57502264/is-there-a-way-to-convert-logging-config-format-read-using-fileconfig-to-forma/62490175#62490175", "title": "Is there a way to convert logging config format read using &quot;fileConfig&quot; to format needed for &quot;dictConfig&quot;?", "body": "<p>As of Python 3.7 the two (dictConfig and fileConfig) cannot be expressed equivalently. For example, the &quot;args&quot; key can only be provided with the fileConfig. It will be ignored when provided with dictConfig.</p>\n<p>As a side note, I came across this when trying to specify &quot;args&quot; for a dictConfig so that I could specify a file path that uses environment variables for a FileHandler.</p>\n<p>Reference:\n<a href=\"https://github.com/python/cpython/blob/3.7/Lib/logging/config.py\" rel=\"nofollow noreferrer\">config.py</a></p>\n<p><code>_install_handlers</code> - looks for the <code>args</code> key to evaluate it</p>\n<p><code>configure_handler</code> - does not look for the <code>args</code> key in the dict</p>\n"}], "owner": {"reputation": 133, "user_id": 10798653, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-exx5nQKcHMQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iti20aWu9zsS_44dcRxOHjDC2A4A/mo/photo.jpg?sz=128", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/10798653/saurabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 386, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1592678493, "creation_date": 1565817907, "last_edit_date": 1565818338, "question_id": 57502264, "link": "https://stackoverflow.com/questions/57502264/is-there-a-way-to-convert-logging-config-format-read-using-fileconfig-to-forma", "title": "Is there a way to convert logging config format read using &quot;fileConfig&quot; to format needed for &quot;dictConfig&quot;?", "body": "<p>I have a config file <code>config.ini</code> as follows, </p>\n\n<pre><code>[loggers]\nkeys=root\n\n[handlers]\nkeys=consoleHandler\n\n[formatters]\nkeys=sampleFormatter\n\n[logger_root]\nlevel=INFO\nhandlers=consoleHandler\n\n[handler_consoleHandler]\nclass=StreamHandler\nlevel=INFO\nformatter=sampleFormatter\nargs=(sys.stderr,)\n\n[formatter_sampleFormatter]\nformat=%(asctime)s - %(name)s - %(levelname)s - %(message)s\n</code></pre>\n\n<p>which I'm reading from my Python script as follows:</p>\n\n<pre><code>import logging\n\nlogging.config.fileConfig(fname=\"config.ini\", disable_existing_loggers=False)\n</code></pre>\n\n<p>Now, I want to send this format read from the above file as a dictionary. So I use <code>configparser</code> to read this file and then convert to a dictionary as follows,</p>\n\n<pre><code>import configparser\n\nparser = configparser.RawConfigParser()\nparser.read(filenames=\"config.ini\")\nconf_dict = {section: dict(parser.items(section)) for section in parser.sections()}\n</code></pre>\n\n<p>Then, I learned that <code>logging</code> module's <code>dictConfig</code> requires the key <code>version</code>, so I add it as follows,</p>\n\n<pre><code>conf_dict[\"version\"] = 1\n</code></pre>\n\n<p>Then, I try to read this dictionary into <code>dictConfig</code> as follows,</p>\n\n<pre><code>logging.config.dictConfig(config_dict)\n</code></pre>\n\n<p>However, this results in the following error,</p>\n\n<pre><code>  File \"run.py\", line 41, in load\n    logging.config.dictConfig(config_dict)\n  File \"/python3.7/logging/config.py\", line 799, in dictConfig\n  File \"/python3.7/logging/config.py\", line 545, in configure\nValueError: Unable to configure formatter 'keys'\n</code></pre>\n\n<p>This seems to indicate that the two utilities of the <code>logging</code> module, <code>fileConfig</code> and <code>dictConfig</code>, accept two different formats. Is there a way to translate between these two formats? If so, how? </p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 91, "user_id": 10349023, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tnqmWlsXHHI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oKHOIArCQOX3xC7BJ62OY0Lu-eUA/mo/photo.jpg?sz=128", "display_name": "Dev Bin", "link": "https://stackoverflow.com/users/10349023/dev-bin"}, "edited": false, "score": 0, "creation_date": 1565817948, "post_id": 57502263, "comment_id": 101473522, "body": "The python-sshtail module can be found at this link <a href=\"https://pypi.org/project/python-sshtail/\" rel=\"nofollow noreferrer\">pypi.org/project/python-sshtail</a>"}, {"owner": {"reputation": 91, "user_id": 10349023, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tnqmWlsXHHI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oKHOIArCQOX3xC7BJ62OY0Lu-eUA/mo/photo.jpg?sz=128", "display_name": "Dev Bin", "link": "https://stackoverflow.com/users/10349023/dev-bin"}, "edited": false, "score": 0, "creation_date": 1566324889, "post_id": 57502263, "comment_id": 101618627, "body": "What modifications do I need to make to the script in order to make it work properly?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 14503289, "user_type": "registered", "profile_image": "https://graph.facebook.com/177722553996483/picture?type=large", "display_name": "Dominic Wright", "link": "https://stackoverflow.com/users/14503289/dominic-wright"}, "is_accepted": false, "score": 0, "last_activity_date": 1604517026, "last_edit_date": 1604517026, "creation_date": 1604515239, "answer_id": 64685893, "question_id": 57502263, "link": "https://stackoverflow.com/questions/57502263/python-script-to-tail-a-log-file/64685893#64685893", "title": "Python script to tail a log file", "body": "<p>I recommend replacing <code>time.sleep</code> with <code>asyncio.sleep</code></p>\n"}], "owner": {"reputation": 91, "user_id": 10349023, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tnqmWlsXHHI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oKHOIArCQOX3xC7BJ62OY0Lu-eUA/mo/photo.jpg?sz=128", "display_name": "Dev Bin", "link": "https://stackoverflow.com/users/10349023/dev-bin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 503, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1604517026, "creation_date": 1565817906, "last_edit_date": 1565818140, "question_id": 57502263, "link": "https://stackoverflow.com/questions/57502263/python-script-to-tail-a-log-file", "title": "Python script to tail a log file", "body": "<p>I am trying to tail a log file on a remote server using a Python script. The log file rolls over very fast, I am using the python-sshtail module to tail the log file and capture the output of the tail in a file on my local machine. I was able to capture the log file and save it to a file on my local machine but the my script seems to be writing it twice and data is formatted. \n           The script is working but not the way I want it to, I should be able to run the script, perform some actions on the servers, tail the logs, save the output to a file on my local machine and kill the script using CTRL-C. </p>\n\n<p>I did write some code and it does work but not the way it should. For now I am using time.sleep to wait for the output to be written to the output file on my local machine.</p>\n\n<pre><code>#!/usr/bin/python3\nimport time\nimport sshtail.tailers as t\nimport sys\nimport datetime\n\nusername = \"username\"\n\nlogfile = \"/var/log/file.log\"\n\nk = t.paramiko.RSAKey.from_private_key_file('keyfile')\n\nconn = t.SSHTailer(username,logfile, k, verbose=True)\n\ntry:\n\n    conn.connect()\n    print(f\"Connected to {conn.host}\")\n    print(\"Tailing the file..\")\n\nexcept:\n\n    print(\"Connection unsuccesful...\")\n\nconn.tail()\n\n\nfor line in conn.tail():\n    print(line)\n\nfor line in conn.get_new_lines():\n    print(line)\n\nx = conn.remote_file_size\n\nprint(f\"The file size is: {x}\")\n\ntime.sleep(10)\n\noutput_file = str(conn.host)+\"_\"+str(datetime.datetime.now().strftime(\"%Y-%m-%d_%H:%M:%S\"))+\".txt\"\n\nwith open(output_file, \"a\") as f:\n\n    for line in conn.get_new_lines():\n        print(line)\n        f.write(line)\n\nconn.disconnect()\n</code></pre>\n"}, {"tags": ["python", "html", "flask", "jinja2"], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 9548702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff50fd01a870037f33a36ad2928e647?s=128&d=identicon&r=PG&f=1", "display_name": "Alice_inwonderland", "link": "https://stackoverflow.com/users/9548702/alice-inwonderland"}, "edited": false, "score": 0, "creation_date": 1565883921, "post_id": 57505248, "comment_id": 101492891, "body": "Hi arsho, your solution seems to work but there is a crucial problem. The point of the dropdown is for me to choose another value for the row if I have too. Once picking a different value for mapping, I have a button event that sends all items (including any changes made to the selection). As of now, the dropdown seems static and doens&#39;t change. My button code has been added above. Thank you!"}, {"owner": {"reputation": 9518, "user_id": 3129414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0k8zH.png?s=128&g=1", "display_name": "arsho", "link": "https://stackoverflow.com/users/3129414/arsho"}, "reply_to_user": {"reputation": 188, "user_id": 9548702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff50fd01a870037f33a36ad2928e647?s=128&d=identicon&r=PG&f=1", "display_name": "Alice_inwonderland", "link": "https://stackoverflow.com/users/9548702/alice-inwonderland"}, "edited": false, "score": 0, "creation_date": 1565888936, "post_id": 57505248, "comment_id": 101495014, "body": "You are right. Your problem was too hard to reproduce as it lacks lots of code in the initial posting. I think the scope of the question is too big now after you have updated it; 10 hours later of original posting. I suggest to keep the loading existing data from Pandas to HTML template in this question and attach the updated part in a new question. Also include necessary Python code in the new question, specially the routes you have used in Javascript(e.g.: bs_mapped)  What do you think?"}], "tags": [], "owner": {"reputation": 9518, "user_id": 3129414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/0k8zH.png?s=128&g=1", "display_name": "arsho", "link": "https://stackoverflow.com/users/3129414/arsho"}, "is_accepted": true, "score": 1, "last_activity_date": 1565847322, "creation_date": 1565847322, "answer_id": 57505248, "question_id": 57502243, "link": "https://stackoverflow.com/questions/57502243/create-a-dropdown-list-for-an-existing-column-in-html-jinja/57505248#57505248", "title": "Create a dropdown list for an existing column in html jinja", "body": "<p>As the dropdown has fixed values, we can pass the choice list from Flask to HTML template. And then if values are matched, we can add <code>selected</code> attribute to the <code>option</code> tag.</p>\n\n<p>I have used <code>to_dict('records')</code> to pass each row as a dictionary where key is the column name and value is the data in the cell.</p>\n\n<p><code>app.py</code>:</p>\n\n<pre><code>from flask import Flask, render_template, url_for, request\nimport pandas as pd\n\n\napp = Flask(__name__)\n\n@app.route('/', methods=['GET', 'POST'])\ndef index():\n    account = pd.Series([\"Petty cash\", \"Lucky Money\", \"RBC USD\"])\n    amount = pd.Series([-2.59, 1111111, 66170.97])\n    mapping = pd.Series([\"Debt\", \"Equity\", \"Cash\"])\n    choices = ((\"Cash\", \"Cash\"), (\"Debt\", \"DebtAccrual\"), (\"Equity\", \"Equity\"))\n    data = pd.DataFrame({\n        \"Account Description\":account,\n        \"Amount\":amount,\n        \"Mapping\":mapping\n    })\n    return render_template('index.html',\n                           column_names=data.columns.values,\n                           rows=data.to_dict('records'),\n                           link_column=\"Mapping\",\n                           choices = choices\n                           )\n</code></pre>\n\n<p><code>index.html</code>:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Dataframe in Flask template&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;div&gt;\n    &lt;h2&gt;Mapped data&lt;/h2&gt;\n    &lt;table id=\"Mapped table\" border=\"1\"&gt;\n      &lt;tr&gt;\n        {% for col in column_names %}\n        &lt;th&gt;{{col}}&lt;/th&gt;\n        {% endfor %}\n      &lt;/tr&gt;\n      {% for row in rows %}\n      &lt;tr&gt;\n        {% for key, val in row.items() %}\n          {% if key == link_column %}\n          &lt;td&gt;\n            &lt;select class=\"dropbtn\"&gt;\n              {% for choice in choices %}\n                &lt;option value={{ choice[0] }}\n                {% if choice[0] == val %} selected {% endif %}&gt;\n                  {{ choice[1] }}\n                &lt;/option&gt;\n              {% endfor %}\n            &lt;/select&gt;\n          &lt;/td&gt;\n          {% else %}\n          &lt;td&gt;\n            {{ val }}\n          &lt;/td&gt;\n          {% endif %}\n        {% endfor %}\n      &lt;/tr&gt;\n      {% endfor %}\n    &lt;/table&gt;\n  &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>Screenshot:</strong></p>\n\n<p>Default option value for each dropdown box being the existing value of the cell:</p>\n\n<p><a href=\"https://i.stack.imgur.com/63Yzi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/63Yzi.png\" alt=\"default option value for each dropdown box being the existing value of the cell\"></a></p>\n"}], "owner": {"reputation": 188, "user_id": 9548702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff50fd01a870037f33a36ad2928e647?s=128&d=identicon&r=PG&f=1", "display_name": "Alice_inwonderland", "link": "https://stackoverflow.com/users/9548702/alice-inwonderland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 0, "accepted_answer_id": 57505248, "answer_count": 1, "score": 0, "last_activity_date": 1565884108, "creation_date": 1565817779, "last_edit_date": 1565884108, "question_id": 57502243, "link": "https://stackoverflow.com/questions/57502243/create-a-dropdown-list-for-an-existing-column-in-html-jinja", "title": "Create a dropdown list for an existing column in html jinja", "body": "<p>I have a dataframe created in flask. The df has 3 columns: \"Account Description\", \"Amount\", and \"Mapping\". The column \"Mapping\" takes 3 values: \"Cash\", \"Debt\", and \"Equity\"</p>\n\n<p>The dataframe is sent to html jinja using:</p>\n\n<pre><code>return render_template('file.html', data=df,column_names=data.columns.values, row_names=list(data.values.tolist(), link_column=\"Mapping\"))\n</code></pre>\n\n<p>What I need to do now is to create a dropdown list for every cell in the 'Mapping' column, <b>with the default option value for each dropdown box being the existing value of the cell</b>. Please look at my image link to get an idea. The pre-populated in those blue boxes should be the value of the cell instead of \"select an option\"</p>\n\n<p><a href=\"https://drive.google.com/file/d/1sadDR0x8pJRzeJRS6pSvfDaNmKyoJ31G/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1sadDR0x8pJRzeJRS6pSvfDaNmKyoJ31G/view?usp=sharing</a></p>\n\n<p>Here's the html code i'm trying but not working:</p>\n\n<pre><code>  &lt;div&gt;\n     &lt;table id=\"Mapped table\"&gt;\n       &lt;h2&gt;Mapped data&lt;/h2&gt;\n          &lt;tr&gt;\n              {% for col in column_names %}\n              &lt;th&gt;{{col}}&lt;/th&gt;\n              {% endfor %}\n          &lt;/tr&gt;\n          {% for row in row_names %}\n          &lt;tr&gt;\n              {% for col_, row_ in zip(column_names, row) %}\n              {% if col_ == link_column %}\n              &lt;td&gt;\n\n                &lt;select class=\"dropbtn\"&gt;\n                  &lt;option value=\"none\" selected disabled hidden&gt;\n                      #Select existing option of the column cell\n                  &lt;/option&gt;\n                  &lt;option value=\"1\"&gt;Cash&lt;/option&gt;\n                  &lt;option value=\"2\"&gt;DebtAccrual&lt;/option&gt;\n                  &lt;option value=\"3\"&gt;Equity&lt;/option&gt;\n                &lt;/select&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>Button onclick event:</p>\n\n<pre><code>\n  &lt;script&gt;\n     var a = document.getElementById(\"dropbtn\");\n     var old = a.options[a.selectedIndex].text;\n  &lt;/script&gt;\n\n  &lt;div class=\"wrapper\"&gt;\n    &lt;button class=\"button\" id=\"myBtn\"&gt;Confirm mapping&lt;/button&gt;\n    &lt;script&gt;\n      $('#myBtn').on('click', function(a) {\n          var drpdbJson = {};\n          // for each row containing a select....\n          $('#Mapped\\\\ table tr:gt(0):has(select)').each(function(idx, old_ele) {\n              // get the selected value\n              var old_drpdwnKey = $(old_ele).find('.dropbtn option:selected').text();\n              // get the second column text\n              var old_drpdwnValue = $(old_ele).find('td:eq(1)').text();\n              // add to the json result\n              if (drpdbJson[old_drpdwnKey] == undefined) {\n                drpdbJson[old_drpdwnKey] = old_drpdwnValue;\n              } else {\n                drpdbJson[old_drpdwnKey] = (typeof drpdbJson[old_drpdwnKey] === 'string') ?\n                    [drpdbJson[old_drpdwnKey], old_drpdwnValue] : [...drpdbJson[old_drpdwnKey], old_drpdwnValue];\n              }\n          })\n          // print the json obj\n          console.log(JSON.stringify(drpdbJson))\n          $.post(\"http://localhost:5000/bs_mapped\",JSON.stringify(drpdbJson))\n      })\n    &lt;/script&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>I apologize if my code is not entirely reproducible. I would like to just have some general idea of how to accomplish this. Thank you very much.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 514, "user_id": 9196813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mbNIE.jpg?s=128&g=1", "display_name": "juancarlos", "link": "https://stackoverflow.com/users/9196813/juancarlos"}, "edited": false, "score": 0, "creation_date": 1565817938, "post_id": 57502242, "comment_id": 101473520, "body": "did you rename your project?"}, {"owner": {"reputation": 99, "user_id": 10974318, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_ndYnzb9aP8/AAAAAAAAAAI/AAAAAAAAApE/Yj5VOwdCHco/photo.jpg?sz=128", "display_name": "StorMy", "link": "https://stackoverflow.com/users/10974318/stormy"}, "reply_to_user": {"reputation": 514, "user_id": 9196813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mbNIE.jpg?s=128&g=1", "display_name": "juancarlos", "link": "https://stackoverflow.com/users/9196813/juancarlos"}, "edited": false, "score": 0, "creation_date": 1565818181, "post_id": 57502242, "comment_id": 101473588, "body": "Actually it created a folder named djangoproject, and inside it was manage.py and another folder called djangoproject.I just made it so there is a single djangoproject with all the files in it + manage.py."}, {"owner": {"reputation": 505, "user_id": 4238785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000627732575/picture?type=large", "display_name": "Jon Hrovat", "link": "https://stackoverflow.com/users/4238785/jon-hrovat"}, "edited": false, "score": 1, "creation_date": 1565818415, "post_id": 57502242, "comment_id": 101473660, "body": "Did you move the contents from the second &quot;djangoproject&quot; folder to the same level as &quot;manage.py&quot;? If you did then you broke the file structure."}], "answers": [{"tags": [], "owner": {"reputation": 505, "user_id": 4238785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000627732575/picture?type=large", "display_name": "Jon Hrovat", "link": "https://stackoverflow.com/users/4238785/jon-hrovat"}, "is_accepted": false, "score": 1, "last_activity_date": 1565818851, "creation_date": 1565818851, "answer_id": 57502426, "question_id": 57502242, "link": "https://stackoverflow.com/questions/57502242/django-manage-py-runserver-command-does-not-work/57502426#57502426", "title": "Django manage.py runserver command does not work", "body": "<p>Your Django file structure should look like this:</p>\n\n<pre><code>djangoproject/\n    manage.py\n    djangoproject/\n        __init__.py\n        settings.py\n        urls.py\n        wsgi.py\n</code></pre>\n\n<p><strong>__init__.py</strong> tells Python to treat the parent directory as a module. </p>\n\n<pre><code>ModuleNotFoundError: No module named 'djangoproject'\n</code></pre>\n\n<p>By rearranging the folder structure, you've stopped Python from treating that folder as a module. Manage.py needs that module to perform its operations.</p>\n"}], "owner": {"reputation": 99, "user_id": 10974318, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_ndYnzb9aP8/AAAAAAAAAAI/AAAAAAAAApE/Yj5VOwdCHco/photo.jpg?sz=128", "display_name": "StorMy", "link": "https://stackoverflow.com/users/10974318/stormy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565818851, "creation_date": 1565817772, "question_id": 57502242, "link": "https://stackoverflow.com/questions/57502242/django-manage-py-runserver-command-does-not-work", "title": "Django manage.py runserver command does not work", "body": "<p>So I downloaded python (latest version) with everything checked and added it to PATH.I installed django, created everything I need, got the django files, but when i run python manage.py runserver it ptinys a lot of stuff, but in the end it prints </p>\n\n<p>I don't know anything about django or pip or python shell, I was following a tutorial but this doesnt work for me.</p>\n\n<pre><code>    C:\\djangoproject&gt;python manage.py runserver\nTraceback (most recent call last):\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\core\\management\\base.py\", line 323, in run_from_argv\n    self.execute(*args, **cmd_options)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\core\\management\\commands\\runserver.py\", line 60, in execute\n    super().execute(*args, **options)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\core\\management\\base.py\", line 364, in execute\n    output = self.handle(*args, **options)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\core\\management\\commands\\runserver.py\", line 67, in handle\n    if not settings.DEBUG and not settings.ALLOWED_HOSTS:\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\conf\\__init__.py\", line 79, in __getattr__\n    self._setup(name)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\conf\\__init__.py\", line 66, in _setup\n    self._wrapped = Settings(settings_module)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\conf\\__init__.py\", line 157, in __init__\n    mod = importlib.import_module(self.SETTINGS_MODULE)\n  File \"C:\\Program Files (x86)\\Python\\lib\\importlib\\__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1006, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 983, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 953, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1006, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 983, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 965, in _find_and_load_unlocked\nModuleNotFoundError: No module named 'djangoproject'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"manage.py\", line 21, in &lt;module&gt;\n    main()\n  File \"manage.py\", line 17, in main\n    execute_from_command_line(sys.argv)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 381, in execute_from_command_line\n    utility.execute()\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 375, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\core\\management\\base.py\", line 336, in run_from_argv\n    connections.close_all()\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\db\\utils.py\", line 219, in close_all\n    for alias in self:\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\db\\utils.py\", line 213, in __iter__\n    return iter(self.databases)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\utils\\functional.py\", line 80, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\db\\utils.py\", line 147, in databases\n    self._databases = settings.DATABASES\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\conf\\__init__.py\", line 79, in __getattr__\n    self._setup(name)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\conf\\__init__.py\", line 66, in _setup\n    self._wrapped = Settings(settings_module)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\conf\\__init__.py\", line 157, in __init__\n    mod = importlib.import_module(self.SETTINGS_MODULE)\n  File \"C:\\Program Files (x86)\\Python\\lib\\importlib\\__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1006, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 983, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 953, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1006, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 983, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 965, in _find_and_load_unlocked\nModuleNotFoundError: No module named 'djangoproject'\n\nC:\\djangoproject&gt;python manage.py runserver\nTraceback (most recent call last):\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\core\\management\\base.py\", line 323, in run_from_argv\n    self.execute(*args, **cmd_options)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\core\\management\\commands\\runserver.py\", line 60, in execute\n    super().execute(*args, **options)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\core\\management\\base.py\", line 364, in execute\n    output = self.handle(*args, **options)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\core\\management\\commands\\runserver.py\", line 67, in handle\n    if not settings.DEBUG and not settings.ALLOWED_HOSTS:\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\conf\\__init__.py\", line 79, in __getattr__\n    self._setup(name)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\conf\\__init__.py\", line 66, in _setup\n    self._wrapped = Settings(settings_module)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\conf\\__init__.py\", line 157, in __init__\n    mod = importlib.import_module(self.SETTINGS_MODULE)\n  File \"C:\\Program Files (x86)\\Python\\lib\\importlib\\__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1006, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 983, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 953, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1006, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 983, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 965, in _find_and_load_unlocked\nModuleNotFoundError: No module named 'djangoproject'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"manage.py\", line 21, in &lt;module&gt;\n    main()\n  File \"manage.py\", line 17, in main\n    execute_from_command_line(sys.argv)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 381, in execute_from_command_line\n    utility.execute()\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 375, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\core\\management\\base.py\", line 336, in run_from_argv\n    connections.close_all()\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\db\\utils.py\", line 219, in close_all\n    for alias in self:\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\db\\utils.py\", line 213, in __iter__\n    return iter(self.databases)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\utils\\functional.py\", line 80, in __get__\n    res = instance.__dict__[self.name] = self.func(instance)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\db\\utils.py\", line 147, in databases\n    self._databases = settings.DATABASES\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\conf\\__init__.py\", line 79, in __getattr__\n    self._setup(name)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\conf\\__init__.py\", line 66, in _setup\n    self._wrapped = Settings(settings_module)\n  File \"C:\\Program Files (x86)\\Python\\lib\\site-packages\\django\\conf\\__init__.py\", line 157, in __init__\n    mod = importlib.import_module(self.SETTINGS_MODULE)\n  File \"C:\\Program Files (x86)\\Python\\lib\\importlib\\__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1006, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 983, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 953, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1006, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 983, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 965, in _find_and_load_unlocked\nModuleNotFoundError: No module named 'djangoproject'\n</code></pre>\n\n<p>It should just run with no error and run the server.</p>\n"}, {"tags": ["python", "operating-system", "shutil"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1565818107, "post_id": 57502241, "comment_id": 101473564, "body": "aside: <code>[file for file in glob.glob(&#39;.&#47;*.txt&#39;)]</code> =&gt; just <code>glob.glob(&#39;.&#47;*.txt&#39;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 9875189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f889ebd26152987439aaebd914ee9f5?s=128&d=identicon&r=PG&f=1", "display_name": "user9875189", "link": "https://stackoverflow.com/users/9875189/user9875189"}, "edited": false, "score": 0, "creation_date": 1565819311, "post_id": 57502300, "comment_id": 101473943, "body": "Thanks, it works now. I actually made a new directory with os.mkdir(path) in my own project and forgot to write it in this test example. The real problem in my own project is that instead of writing &quot;if not os.path.exists(path), I write just &quot;if not path&quot;, which is always false."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1565818058, "creation_date": 1565818058, "answer_id": 57502300, "question_id": 57502241, "link": "https://stackoverflow.com/questions/57502241/shutil-move-only-works-with-existing-folder/57502300#57502300", "title": "shutil.move() only works with existing folder?", "body": "<p>the problem is that when you create the destination path variable name:</p>\n\n<pre><code>path = os.path.join(parent_dir, new_dir)\n</code></pre>\n\n<p>the path <em>doesn't exist</em>. So <code>shutil.move</code> works, but not like you're expecting, rather like a standard <code>mv</code> command: it moves each file to the parent directory with the name \"b\", overwriting each older file, leaving only the last one (very dangerous, because risk of data loss)</p>\n\n<p>Create the directory first if it doesn't exist:</p>\n\n<pre><code>path = os.path.join(parent_dir, new_dir)\nif not os.path.exists(path):\n   os.mkdir(path)\n</code></pre>\n\n<p>now <code>shutil.move</code> will create files when moving to <code>b</code> because <code>b</code> is a directory.</p>\n"}], "owner": {"reputation": 85, "user_id": 9875189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f889ebd26152987439aaebd914ee9f5?s=128&d=identicon&r=PG&f=1", "display_name": "user9875189", "link": "https://stackoverflow.com/users/9875189/user9875189"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1840, "favorite_count": 0, "accepted_answer_id": 57502300, "answer_count": 1, "score": 3, "last_activity_date": 1565818058, "creation_date": 1565817770, "question_id": 57502241, "link": "https://stackoverflow.com/questions/57502241/shutil-move-only-works-with-existing-folder", "title": "shutil.move() only works with existing folder?", "body": "<p>I would like to use the shutil.move() function to move some files which match a certain pattern to a newly created(inside python script)folder, but it seems that this function only works with existing folders.</p>\n\n<p>For example, I have 'a.txt', 'b.txt', 'c.txt' in folder '/test', and I would like to create a folder '/test/b' in my python script using os.join() and move all .txt files to folder '/test/b'</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import os \nimport shutil\nimport glob\n\nfiles = [file for file in glob.glob('./*.txt')] #assume that we in '/test' \n\nfor f in files:\n    shutil.move(f, './b') #assume that './b' already exists\n\n#the above code works as expected, but the following not:\n\nimport os\nimport shutil\nimport glob\n\nnew_dir = 'b'\nparent_dir = './'\npath = os.path.join(parent_dir, new_dir)\n\nfiles = [file for file in glob.glob('./*.txt')]\n\nfor f in files:\n    shutil.move(f, path)\n\n#After that, I got only 'b' in '/test', and 'cd b' gives:\n#[Errno 20] Not a directory: 'b'\n</code></pre>\n\n<p>Any suggestion is appreciated!</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1565818195, "post_id": 57502234, "comment_id": 101473591, "body": "Use <code>&quot;heightroof&quot;: &quot;([^.]*)&quot;</code> to stop when dot is encountered... but I would rather parse json properly instead, so you can round 21.8 to 22 not truncate."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 1, "last_activity_date": 1565819320, "creation_date": 1565819320, "answer_id": 57502490, "question_id": 57502234, "link": "https://stackoverflow.com/questions/57502234/how-to-put-round-inside-regular-expressions/57502490#57502490", "title": "How to put round() inside regular expressions?", "body": "<p>I think you need a callback to do this<br>\nUse <code>re.sub('rx',lambda m =&gt; {} )</code> form</p>\n\n<p>Rx  </p>\n\n<p><code>\"(height)roof\"\\s*:\\s*\"(\\d+(?:\\.\\d*)?)\",</code></p>\n\n<p>Then in the callback convert <code>m[2]</code> to a float, round up, then take the integer portion<br>\nmake it a string, then  return using the string parts <code>\"</code> + m[1] + <code>\":\"</code> + round + <code>\",</code><br>\netc...</p>\n"}, {"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 0, "last_activity_date": 1565819656, "creation_date": 1565819656, "answer_id": 57502543, "question_id": 57502234, "link": "https://stackoverflow.com/questions/57502234/how-to-put-round-inside-regular-expressions/57502543#57502543", "title": "How to put round() inside regular expressions?", "body": "<p>sin is correct in that you need a callback function.</p>\n\n<pre><code>import re\n\ns = '\"heightroof\": \"21.3423423\"'\n\ndef repl(m):\n    return '\"height\": ' + str(round(float(m.group(1))))\n\nre.sub(r'\"heightroof\": \"([^\"]+)\"', repl, s)\n\n'\"height\": 21'\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11923485, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z1Q9Drw_o7U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdRttDT3bg6EkandsFqBUT-8lQ93g/photo.jpg?sz=128", "display_name": "Ukrainian Solutions", "link": "https://stackoverflow.com/users/11923485/ukrainian-solutions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565819656, "creation_date": 1565817725, "question_id": 57502234, "link": "https://stackoverflow.com/questions/57502234/how-to-put-round-inside-regular-expressions", "title": "How to put round() inside regular expressions?", "body": "<p>I have a huge .json file which contains multiple info, I need to round numbers only in parameter of \"heightroof\".</p>\n\n<p>I am using Regex and I have <code>heightroof\": \"(.*?)\"</code> expression to find what I need. I am able to search for \"heightroof\": \"(.*?)\" and replace with \"height\": \\1 using regex in Emeditor and it will make it work but I can't round numbers.But I also need to round numbers after \"heightroof\".</p>\n\n<p>Instead of this:</p>\n\n<pre><code> \"heightroof\": \"21.3423423\",\n</code></pre>\n\n<p>I need this:</p>\n\n<pre><code> \"height\": 21,\n</code></pre>\n\n<p>Please help me round the numbers.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 1, "last_activity_date": 1565818175, "creation_date": 1565818175, "answer_id": 57502319, "question_id": 57502228, "link": "https://stackoverflow.com/questions/57502228/pandas-how-to-delete-all-the-subsequent-rows-of-a-group-after-a-condition-is-me/57502319#57502319", "title": "Pandas: How to delete all the subsequent rows of a group after a condition is met the first time?", "body": "<p>IIUC, can <code>groupby</code> and use <code>cumprod</code> to detect when to start filtering</p>\n\n<pre><code>df[df.groupby('variable').date.transform(lambda s: s.ne(4).cumprod().astype(bool))]\n</code></pre>\n\n<hr>\n\n<pre><code>   date variable   no     value\n0      1        A  1.0  0.469112\n1      2        A  2.2 -0.282863\n2      3        A  3.5 -1.509059\n3      3        A  1.5 -1.135632\n10     1        B  1.2 -0.173215\n11     1        B  1.3  0.119209\n12     1        B  1.1 -1.044236\n16     1        C  2.2 -0.282863\n17     1        C  3.5 -1.509059\n18     1        C  1.5 -1.135632\n19     2        C  1.5  1.212112\n20     2        D  1.2 -0.173215\n21     3        D  1.3  0.119209\n22     3        D  1.1 -1.044236\n23     3        D  2.0 -0.861849\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 10757177, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HUrWVI44l58/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_HuxYaptWa2_apC1e0-8RJ3qU6g/mo/photo.jpg?sz=128", "display_name": "Pratyusha Pasumarty", "link": "https://stackoverflow.com/users/10757177/pratyusha-pasumarty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57502319, "answer_count": 1, "score": 0, "last_activity_date": 1565818175, "creation_date": 1565817688, "last_edit_date": 1565818032, "question_id": 57502228, "link": "https://stackoverflow.com/questions/57502228/pandas-how-to-delete-all-the-subsequent-rows-of-a-group-after-a-condition-is-me", "title": "Pandas: How to delete all the subsequent rows of a group after a condition is met the first time?", "body": "<p>I am trying to delete the subsequent rows of each group in my data frame after the variable date becomes 4 the first time. </p>\n\n<pre><code>df = pd.DataFrame({\"date\": [1,2,3,3,4,1,2,3,3,4,1,1,1,4,4,4,1,1,1,2,2,3,3,3,4,4],\n               \"variable\": [\"A\", \"A\", \"A\",\"A\",\"A\",\"A\", \"A\", \"A\",\"A\",\"A\", \"B\", \"B\", \"B\",\"B\",\"B\",\"B\" ,\"C\", \"C\", \"C\",\"C\", \"D\",\"D\",\"D\",\"D\",\"D\",\"D\"],\n               \"no\": [1, 2.2, 3.5, 1.5, 1.5,1, 2.2, 3.5, 1.5, 1.5, 1.2, 1.3, 1.1, 2, 3,1, 2.2, 3.5, 1.5, 1.5, 1.2, 1.3, 1.1, 2, 3,9],\n               \"value\": [0.469112, -0.282863, -1.509059, -1.135632, 1.212112,0.469112, -0.282863, -1.509059, -1.135632, 1.212112, -0.173215,\n                         0.119209, -1.044236, -0.861849, None,0.469112, -0.282863, -1.509059, -1.135632, 1.212112, -0.173215,\n                         0.119209, -1.044236, -0.861849, None,0.87]})\n</code></pre>\n\n<pre><code>\ndate    variable    no  value\n0   1   A   1.0 0.469112\n1   2   A   2.2 -0.282863\n2   3   A   3.5 -1.509059\n3   3   A   1.5 -1.135632\n4   4   A   1.5 1.212112\n5   1   A   1.0 0.469112\n6   2   A   2.2 -0.282863\n7   3   A   3.5 -1.509059\n8   3   A   1.5 -1.135632\n9   4   A   1.5 1.212112\n10  1   B   1.2 -0.173215\n11  1   B   1.3 0.119209\n12  1   B   1.1 -1.044236\n13  4   B   2.0 -0.861849\n14  4   B   3.0 NaN\n15  4   B   1.0 0.469112\n16  1   C   2.2 -0.282863\n17  1   C   3.5 -1.509059\n18  1   C   1.5 -1.135632\n19  2   C   1.5 1.212112\n20  2   D   1.2 -0.173215\n21  3   D   1.3 0.119209\n22  3   D   1.1 -1.044236\n23  3   D   2.0 -0.861849\n24  4   D   3.0 NaN\n25  4   D   9.0 0.870000\n</code></pre>\n\n<p>I've tried these methods so far:</p>\n\n<pre><code>def tail_test(group):\n    group = group[~(group.date.eq(4) | group.date.shift().eq(4))]\n    return group\n\ndf_sub = df.groupby('variable').apply(tail_test).reset_index(drop=True)\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>date    variable    no  value\n0   1   A   1.0 0.469112\n1   2   A   2.2 -0.282863\n2   3   A   3.5 -1.509059\n3   3   A   1.5 -1.135632\n4   2   A   2.2 -0.282863\n5   3   A   3.5 -1.509059\n6   3   A   1.5 -1.135632\n7   1   B   1.2 -0.173215\n8   1   B   1.3 0.119209\n9   1   B   1.1 -1.044236\n10  1   C   2.2 -0.282863\n11  1   C   3.5 -1.509059\n12  1   C   1.5 -1.135632\n13  2   C   1.5 1.212112\n14  2   D   1.2 -0.173215\n15  3   D   1.3 0.119209\n16  3   D   1.1 -1.044236\n17  3   D   2.0 -0.861849\n</code></pre>\n\n<p>Basically, it is dropping all the 4's but not all the subsequent values after that</p>\n\n<p>The next method I tried is:</p>\n\n<pre><code>def f(df):\n    mask = (df.date == 4).cumsum() &lt;= 1\n    return df[mask]\n\ndf_sub = df.groupby(\"variable\").apply(f)\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>    date    variable    no  value\n0   1   A   1.0 0.469112\n1   2   A   2.2 -0.282863\n2   3   A   3.5 -1.509059\n3   3   A   1.5 -1.135632\n4   4   A   1.5 1.212112\n5   1   A   1.0 0.469112\n6   2   A   2.2 -0.282863\n7   3   A   3.5 -1.509059\n8   3   A   1.5 -1.135632\n9   1   B   1.2 -0.173215\n10  1   B   1.3 0.119209\n11  1   B   1.1 -1.044236\n12  4   B   2.0 -0.861849\n13  1   C   2.2 -0.282863\n14  1   C   3.5 -1.509059\n15  1   C   1.5 -1.135632\n16  2   C   1.5 1.212112\n17  2   D   1.2 -0.173215\n18  3   D   1.3 0.119209\n19  3   D   1.1 -1.044236\n20  3   D   2.0 -0.861849\n21  4   D   3.0 NaN\n</code></pre>\n\n<p>I might be making some stupid mistake that I can't figure out. Please help!</p>\n"}, {"tags": ["python", "bots", "discord"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 11014476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78a9b943b9d6121d47ddb0b761bccd8?s=128&d=identicon&r=PG&f=1", "display_name": "SpicySauce", "link": "https://stackoverflow.com/users/11014476/spicysauce"}, "edited": false, "score": 0, "creation_date": 1565864775, "post_id": 57503623, "comment_id": 101484275, "body": "This answer doesn&#39;t make much sense to me, sorry. Besides the stand-alone <code>roleToCheck</code> and <code>roleUserHas</code>, which I can&#39;t comprehend why, the <code>rolesIDuserHas.add(role.id)</code> throws me an error &quot;<i>AttributeError: &#39;list&#39; object has no attribute &#39;add&#39;</i>&quot;. Just to clarify - I don&#39;t have the sole role ID I want to check. I have many in a list that all need to be checked and if even one matches it needs to return True."}, {"owner": {"reputation": 3295, "user_id": 7421086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pLCBS.png?s=128&g=1", "display_name": "Kaynn", "link": "https://stackoverflow.com/users/7421086/kaynn"}, "reply_to_user": {"reputation": 15, "user_id": 11014476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78a9b943b9d6121d47ddb0b761bccd8?s=128&d=identicon&r=PG&f=1", "display_name": "SpicySauce", "link": "https://stackoverflow.com/users/11014476/spicysauce"}, "edited": false, "score": 0, "creation_date": 1565867466, "post_id": 57503623, "comment_id": 101485205, "body": "@SpicySouce Sorry, I fixed it. It was <code>append</code>, not <code>add</code>. Finally, I edited my answer to added explanation of my codes, and made my codes a little bit more understandable. And yes, I got your clarification and the code does solve it."}, {"owner": {"reputation": 15, "user_id": 11014476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78a9b943b9d6121d47ddb0b761bccd8?s=128&d=identicon&r=PG&f=1", "display_name": "SpicySauce", "link": "https://stackoverflow.com/users/11014476/spicysauce"}, "edited": false, "score": 0, "creation_date": 1565870555, "post_id": 57503623, "comment_id": 101486312, "body": "From your explanation, I did get a better understanding and confirmed some of my thoughts, but the question still stands - Why are there <code>roleToCheck</code> and <code>roleUserHas</code>. It even throws me &quot;<i>NameError: name &#39;roleToCheck&#39; is not defined</i>&quot; and as I see it <code>roleUserHas</code> is defined then and there and is unused. Perhaps you meant <i>role</i><b>s</b><i>UserHas</i>? Could you please provide the explanation for those two? Thanks"}, {"owner": {"reputation": 3295, "user_id": 7421086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pLCBS.png?s=128&g=1", "display_name": "Kaynn", "link": "https://stackoverflow.com/users/7421086/kaynn"}, "reply_to_user": {"reputation": 15, "user_id": 11014476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78a9b943b9d6121d47ddb0b761bccd8?s=128&d=identicon&r=PG&f=1", "display_name": "SpicySauce", "link": "https://stackoverflow.com/users/11014476/spicysauce"}, "edited": false, "score": 0, "creation_date": 1565871479, "post_id": 57503623, "comment_id": 101486693, "body": "@SpicySouce Fixed, it. Replace those with <code>item</code>. Sorry for the inconvenience, since I had no tools to test this while answer this question (and I had confused that <code>item</code> was kind of a variable naming like a loop)"}], "tags": [], "owner": {"reputation": 3295, "user_id": 7421086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pLCBS.png?s=128&g=1", "display_name": "Kaynn", "link": "https://stackoverflow.com/users/7421086/kaynn"}, "is_accepted": true, "score": 0, "last_activity_date": 1565871381, "last_edit_date": 1565871381, "creation_date": 1565829688, "answer_id": 57503623, "question_id": 57502215, "link": "https://stackoverflow.com/questions/57502215/check-if-the-command-author-has-a-specific-role-from-a-list-of-role-ids/57503623#57503623", "title": "Check if the command author has a specific role from a list of role IDs", "body": "<p>You can use <a href=\"https://www.techbeamers.com/program-python-list-contains-elements/#any-method\" rel=\"nofollow noreferrer\"><code>any()</code></a> to check if a list contains at least one element of the other list:</p>\n\n<pre><code># Whatever role ID\nlistOfAllowedRoles = [213183812831, 1238183283183813 ]\n\n# Wont work if message is not in a guild\nrolesUserHas = message.author.roles\n\n# Or some other better way to get the list of IDs of roles the user has.\nrolesIDuserHas = []\nfor role in rolesUserHas:\n  rolesIDuserHas.append(role.id)\n\nif any(item in listOfAllowedRoles for item in rolesIDuserHas):\n  # User has at least one of the roles\nelse:\n  #user do not have any of the roles.\n</code></pre>\n\n<h3>Edit</h3>\n\n<p>Basically, <code>listOfAllowedRoles</code> are the <em>list</em> of roles which you... want to check against, aka the roles that the user needs (at least the IDs of it).</p>\n\n<p>Then first, we get the roles that the user currently has by doing <code>message.author.roles</code>, this returns a <em>list</em> of roles which we store it in <code>rolesUserHas</code>.<br>\nHowever, we still cant compare both lists, since one of is a list of IDs (numbers), and the other is a list of roles (not numbers, aka you cant compare a number against a non-number)</p>\n\n<p>So what I did was to \"convert\" the list of roles into a list of role-IDs that the user has, which is stored into <code>rolesIDuserhas</code><br>\n(How I \"converted\" it was by simply creating a new list, and adding all the IDs of each role into the list)</p>\n\n<p>So now we got a list of IDs (<code>listOfAllowedRoles</code>, numbers) to compare against another list of IDs (<code>rolesIDuserhas</code>, numbers). But all we want is to check if the user has at least <em>any</em> of the roles in that first list<br>\nThe <a href=\"https://www.techbeamers.com/program-python-list-contains-elements/#any-method\" rel=\"nofollow noreferrer\"><code>any()</code></a> function in python does exactly what we want.</p>\n\n<p>Hence, <code>any(item in listOfAllowedRoles for item in rolesIDuserHas)</code> will return true if the user has at least one of the roles in the list of <code>listOfAllowedRoles</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 11014476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78a9b943b9d6121d47ddb0b761bccd8?s=128&d=identicon&r=PG&f=1", "display_name": "SpicySauce", "link": "https://stackoverflow.com/users/11014476/spicysauce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 57503623, "answer_count": 1, "score": 0, "last_activity_date": 1565871381, "creation_date": 1565817621, "last_edit_date": 1565864207, "question_id": 57502215, "link": "https://stackoverflow.com/questions/57502215/check-if-the-command-author-has-a-specific-role-from-a-list-of-role-ids", "title": "Check if the command author has a specific role from a list of role IDs", "body": "<p>Currently, I'm only able to check the command author for a specific role ID as a string variable, but I can't get it to check a list if any of the IDs in the list match an ID of a role assigned to them. I've tried numerous things for a few days now, but It always either lets through every ID or none.</p>\n\n<p>This is the current code for checking a single variable:</p>\n\n<pre><code>if (allowed_role_id in [roles.id for roles in ctx.message.author.roles]): \n    # TODO here\nelse:\n    # Other TODO here\n</code></pre>\n\n<p>I want It to check from a list like this:</p>\n\n<pre><code>listOfAllowedRoles = ['11111111111111111', '22222222222222222', '3333333333333333']\n</code></pre>\n\n<p>And If the command author has a role of which ID matches an ID from the list above to execute the TODO.</p>\n"}, {"tags": ["python", "string", "split"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1565817569, "post_id": 57502146, "comment_id": 101473411, "body": "This doesn&#39;t seem like a parsable format. How do you know which quotes are delimiters around the string versus quotes that are inside strings?"}, {"owner": {"reputation": 59, "user_id": 10671332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08c504ca50b2ccd96a9853077a94c029?s=128&d=identicon&r=PG&f=1", "display_name": "lessreg", "link": "https://stackoverflow.com/users/10671332/lessreg"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565817678, "post_id": 57502146, "comment_id": 101473451, "body": "Yes I agree. The file is originally in sql format. I thought there was a way to handle it with python, but it&#39;s possible I can&#39;t do it..."}, {"owner": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "edited": false, "score": 0, "creation_date": 1565817998, "post_id": 57502146, "comment_id": 101473535, "body": "It should be possible to simply flag a quote if it immediately follows a comma, otherwise treat it as a part of the string."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565818005, "post_id": 57502146, "comment_id": 101473536, "body": "What do you mean by sql format? If you&#39;re fetching the data from a database, why don&#39;t you just extract them into separate variables rather than putting them into these unformatted strings?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "edited": false, "score": 0, "creation_date": 1565818048, "post_id": 57502146, "comment_id": 101473549, "body": "@daShier That&#39;s possible, but what if the data actually contains quote-comma?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565818109, "post_id": 57502146, "comment_id": 101473566, "body": "I think you should solve this problem at the source. It should use an established serialization format, such as JSON."}, {"owner": {"reputation": 677, "user_id": 796805, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3e1dad15bc5eb2c70bf701f2e5d81ee?s=128&d=identicon&r=PG", "display_name": "LionKimbro", "link": "https://stackoverflow.com/users/796805/lionkimbro"}, "edited": false, "score": 0, "creation_date": 1565818774, "post_id": 57502146, "comment_id": 101473774, "body": "Very strange export format.  Typically, anything professional that was exporting data like this would have an escape sequence; so for example: (1,2,3,&quot;hello world, I \\&quot;love\\&quot; you(sometimes)&quot;,5,&quot;manchester united&quot;),(4,5,6,&quot;mary poppins&quot;,7,&quot;spoon full of sugar(\\&quot;)  My question for you is -- how exactly are you receiving this data?  What product, and what API, and what method in that API, is returning this data?"}, {"owner": {"reputation": 677, "user_id": 796805, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3e1dad15bc5eb2c70bf701f2e5d81ee?s=128&d=identicon&r=PG", "display_name": "LionKimbro", "link": "https://stackoverflow.com/users/796805/lionkimbro"}, "edited": false, "score": 0, "creation_date": 1565818939, "post_id": 57502146, "comment_id": 101473817, "body": "If you yourself are the author who is EXPORTING the data, then let me suggest outputing the data with &quot;repr(data)&quot;, and then importing the data with &quot;ast.literal_eval(s)&quot;."}, {"owner": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565822366, "post_id": 57502146, "comment_id": 101474660, "body": "@Barmar As long as us mere humans can parse it, there should be a set of rules that allows an algorithm to be written. It might require a couple of flags to create a state machine for the comma and quotation delimiters. I&#39;m assuming that the author of the OP has only the text file and no ability to reformat it from the source."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "edited": false, "score": 0, "creation_date": 1565822488, "post_id": 57502146, "comment_id": 101474683, "body": "I don&#39;t think a human can parse this: <code>(1,2,3,&quot;This string contains quote-comma-quote &quot;,&quot; in the middle&quot;)</code> @daShier"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565822639, "post_id": 57502146, "comment_id": 101474710, "body": "The only reason you and I know that the comma in the middle isn&#39;t a delimiter is because the text says so. An algorithm to do this would require sophisticated AI."}, {"owner": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565822655, "post_id": 57502146, "comment_id": 101474717, "body": "@Barmar Yes, that (hypothetical) string would certainly be parsed as two strings."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1980, "user_id": 11517179, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zH4UW.gif?s=128&g=1", "display_name": "daShier", "link": "https://stackoverflow.com/users/11517179/dashier"}, "edited": false, "score": 0, "creation_date": 1565822775, "post_id": 57502146, "comment_id": 101474737, "body": "But if you&#39;re really stuck with this data format, you&#39;ll have to write a heuristic as @daShier suggests. There&#39;s no built-in way to do this, you&#39;ll have to write your own parser."}], "owner": {"reputation": 59, "user_id": 10671332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08c504ca50b2ccd96a9853077a94c029?s=128&d=identicon&r=PG&f=1", "display_name": "lessreg", "link": "https://stackoverflow.com/users/10671332/lessreg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565817530, "creation_date": 1565817234, "last_edit_date": 1565817530, "question_id": 57502146, "link": "https://stackoverflow.com/questions/57502146/split-lines-in-huge-text-file-containing-messy-user-entries-with-python", "title": "split lines in huge text file containing messy user entries with python", "body": "<p>I have a huge text file. Using python, I'm trying to extract some relevant information and save it into a CSV. The line delimiters are brackets (), and each line is split into different entries, delimited by commas(,). The problem arises is that some of the entries are strings with user text, which can contain brackets and commas. Therefore, the usual split methods can't work here.\nExample:</p>\n\n<pre><code>(1,2,3,\"hello world, I \"love\" you(sometimes)\",5,\"manchester united\"),(4,5,6,\"mary poppins\",7,\"spoon full of sugar(\"),\n</code></pre>\n\n<p>I need to split the text into users/lines based on the (), and then\nI should be able to split the line into entries. For example, the first user entries are as follows:</p>\n\n<ul>\n<li><code>user1[1]</code> - <code>1</code></li>\n<li><code>user1[2]</code> - <code>2</code></li>\n<li><code>user1[3]</code> - <code>3</code></li>\n<li><code>user1[4]</code> - <code>\"hello world, I \"love\" you(sometimes)\"</code></li>\n<li><code>user1[5]</code> - <code>5</code></li>\n<li><code>user1[6]</code> - <code>\"manchester united\"</code></li>\n</ul>\n\n<p>I'm stuck! thanks all</p>\n"}, {"tags": ["python", "python-3.x", "selenium", "variables"], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 6143017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9108a2264a8b5addee66886d26496f08?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/6143017/adrian"}, "is_accepted": false, "score": 0, "last_activity_date": 1565819001, "creation_date": 1565819001, "answer_id": 57502443, "question_id": 57502134, "link": "https://stackoverflow.com/questions/57502134/how-can-i-split-a-string-about-time-into-separate-variables-hr-min-sec-in-py/57502443#57502443", "title": "How can I split a string about time into separate variables (hr, min, sec) in python?", "body": "<p>Well it appears the format you have provided has a space delimiter and can be separated at such.</p>\n\n<p><code>4hr 26min 30sec</code> can be our example input</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def findTotalSeconds(strInput):\n    splitData = strInput.split(' ') # [4hr, 26min, 30sec]\n\n    # Reverse the order (you will see why in a second)\n    splitData.reverse() # [30sec, 26min, 4hr]\n\n    # Isolate the integers\n    parsedInts = []\n    for parsedVal in splitData:\n        parsedInts.append(int(''.join([s for s in parsedVal if s.isdigit()])))\n\n    # parsedInts = [30, 26, 4]\n\n    # Now you can mathematically convert the elements accordingly\n    totalTime = 0\n    for i in range(len(parsedInts)):\n        totalTime += parsedInts[i] * (60 ** i)\n\n    return totalTime\n</code></pre>\n\n<p>This logic for collecting the total time is as follows for our example <code>4hr 26min 30sec</code></p>\n\n<p>Generated splitData list: <code>['4hr', '26min', '30sec']</code></p>\n\n<p>Reversed: <code>['30sec', '26min', '4hr']</code></p>\n\n<p>Running through totalTime loop: <code>(30 * (60 ** 0)) + (26 * (60 ** 1)) + (4 * (60 ** 2))</code></p>\n\n<p>Running through totalTime result: <code>30 + 1560 + 14400 = 15990 total seconds</code></p>\n"}, {"comments": [{"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "edited": false, "score": 2, "creation_date": 1565825460, "post_id": 57502575, "comment_id": 101475226, "body": "You should include a description explaining your code"}], "tags": [], "owner": {"reputation": 677, "user_id": 796805, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3e1dad15bc5eb2c70bf701f2e5d81ee?s=128&d=identicon&r=PG", "display_name": "LionKimbro", "link": "https://stackoverflow.com/users/796805/lionkimbro"}, "is_accepted": false, "score": 0, "last_activity_date": 1565819919, "creation_date": 1565819919, "answer_id": 57502575, "question_id": 57502134, "link": "https://stackoverflow.com/questions/57502134/how-can-i-split-a-string-about-time-into-separate-variables-hr-min-sec-in-py/57502575#57502575", "title": "How can I split a string about time into separate variables (hr, min, sec) in python?", "body": "<pre><code>def seconds(line):\n    D = {word[-1]:int(word[:-1]) for word in line.split()}\n    return D.get(\"h\",0)*60*60+D.get(\"m\",0)*60+D.get(\"s\",0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 178, "user_id": 4066708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/536ea8792b321110250e8da643ae4c13?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm", "link": "https://stackoverflow.com/users/4066708/malcolm"}, "is_accepted": false, "score": 0, "last_activity_date": 1565819984, "creation_date": 1565819984, "answer_id": 57502589, "question_id": 57502134, "link": "https://stackoverflow.com/questions/57502134/how-can-i-split-a-string-about-time-into-separate-variables-hr-min-sec-in-py/57502589#57502589", "title": "How can I split a string about time into separate variables (hr, min, sec) in python?", "body": "<p>Assuming elem.text holds a text string like \"1h 3m 17s\" or \"10m\", this should do what you want</p>\n\n<pre><code>import re\nscale = {'h': 60*60, 'm': 60, 's': 1}\nregex = re.compile(\"(\\d+)([mhs])\")\n\nfor elem in durationElem:\n    seconds = 0\n    for match in regex.finditer(elem.text):\n        groups = match.groups()\n        seconds += int(groups[0]) * scale[groups[1]]\n    print(seconds)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11766436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d024e5d0acfee3f49a9f2ec47a38f68a?s=128&d=identicon&r=PG", "display_name": "Desert", "link": "https://stackoverflow.com/users/11766436/desert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1565819984, "creation_date": 1565817181, "last_edit_date": 1565818864, "question_id": 57502134, "link": "https://stackoverflow.com/questions/57502134/how-can-i-split-a-string-about-time-into-separate-variables-hr-min-sec-in-py", "title": "How can I split a string about time into separate variables (hr, min, sec) in python?", "body": "<p>I'm using selenium to scrape a website with constantly updating alerts, and the duration section looks like '37s' or '20m 11s' or '1h 14m 45s'.  The website updates 15 seconds or so, so the duration is always changing (unless the alert cleared, then it disappears completely.)  </p>\n\n<p>I'd like to create a way to be notified if an alert lasts longer than x amount of time, so I'd like to split up the time element and convert each piece into seconds.</p>\n\n<p>I've tried <code>re.sub</code>, <code>re.split</code>, and others to try and separate the sections.  If it can be done within a single variable, that would be great.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># The Chrome frame you need to be in to access the web elements for the alerts.\nbrowser.switch_to.frame('maincontentframe')          \n\n# This variable contains the information contained in the 'duration' web element(s).  \ndurationElem = browser.find_elements_by_xpath(\"//table[@id='servicetable']//tr[starts-with(@class, 'servicerow')]//div[starts-with(@class, 'duration')]\")         \n\n# This loop allows you to see each alert's duration.\nfor elem in durationElem:  \n    minutes, seconds = elem.text.split(\"m,s\") \n\n</code></pre>\n\n<p>I'd like to have some variables that contain just integers.  For example, if there's an alert that says '4m 10s', there would be two variables that contain 240 &amp; 10.  Or even just one variable containing 250 would work.</p>\n"}, {"tags": ["python", "docusignapi"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11929301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b02e3399cdc15f28868fcca3f887714b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohbha", "link": "https://stackoverflow.com/users/11929301/mohbha"}, "edited": false, "score": 0, "creation_date": 1565889686, "post_id": 57502406, "comment_id": 101495344, "body": "Thanks Inbar.. Looks like a version issue. I uninstalled a later version and installed V1.0.3 of docusign-esign"}, {"owner": {"reputation": 7023, "user_id": 3255871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzaC9.jpg?s=128&g=1", "display_name": "Inbar Gazit", "link": "https://stackoverflow.com/users/3255871/inbar-gazit"}, "reply_to_user": {"reputation": 1, "user_id": 11929301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b02e3399cdc15f28868fcca3f887714b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohbha", "link": "https://stackoverflow.com/users/11929301/mohbha"}, "edited": false, "score": 0, "creation_date": 1565890057, "post_id": 57502406, "comment_id": 101495474, "body": "glad you got it working, can you please mark question as answered?"}], "tags": [], "owner": {"reputation": 7023, "user_id": 3255871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gzaC9.jpg?s=128&g=1", "display_name": "Inbar Gazit", "link": "https://stackoverflow.com/users/3255871/inbar-gazit"}, "is_accepted": false, "score": 0, "last_activity_date": 1565818697, "creation_date": 1565818697, "answer_id": 57502406, "question_id": 57502112, "link": "https://stackoverflow.com/questions/57502112/python-attributeerror-apiclient-object-has-no-attribute-configure-jwt-auth/57502406#57502406", "title": "Python : AttributeError: &#39;ApiClient&#39; object has no attribute &#39;configure_jwt_authorization_flow&#39;", "body": "<p>have you configured your Integration Key in DocuSign? did you get a private RSA key? this is required to use JWT</p>\n\n<p>Also note that your redirect_uri doesn't seem correct. That uri should point to your code, not to Docusign.</p>\n"}, {"tags": [], "owner": {"reputation": 1610, "user_id": 7393545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F2GSJ.png?s=128&g=1", "display_name": "Saji Xavier", "link": "https://stackoverflow.com/users/7393545/saji-xavier"}, "is_accepted": false, "score": 0, "last_activity_date": 1573971716, "creation_date": 1573971716, "answer_id": 58898054, "question_id": 57502112, "link": "https://stackoverflow.com/questions/57502112/python-attributeerror-apiclient-object-has-no-attribute-configure-jwt-auth/58898054#58898054", "title": "Python : AttributeError: &#39;ApiClient&#39; object has no attribute &#39;configure_jwt_authorization_flow&#39;", "body": "<p>The issue is that, Python Docusign SDK interface has changed in the latest versions but the Official code examples still uses the old version.</p>\n\n<p>So for obtaining JWT bearer tokens, instead of <code>configure_jwt_authorization_flow</code> you need to use <code>request_jwt_user_token</code> function of ApiClient object.</p>\n\n<p>Code Sample:</p>\n\n<pre><code>def update_token(api_client):\n    key_data = None\n    with open(&lt;rsa private key file&gt;, mode='rb') as file:\n        key_data = file.read()\n\n    if key_data is None:\n        return None\n\n    jwt_token = api_client.request_jwt_user_token( &lt;INTEGRATION_KEY&gt;,\n                                                   &lt;USER_ID&gt;,\n                                                   &lt;AUTH_HOST&gt;,\n                                                   key_data,\n                                                   &lt;token expiration interval&gt; )\n    if jwt_token is not None:\n        print(jwt_token.access_token)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11929301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b02e3399cdc15f28868fcca3f887714b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohbha", "link": "https://stackoverflow.com/users/11929301/mohbha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 544, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573971716, "creation_date": 1565817041, "last_edit_date": 1565826773, "question_id": 57502112, "link": "https://stackoverflow.com/questions/57502112/python-attributeerror-apiclient-object-has-no-attribute-configure-jwt-auth", "title": "Python : AttributeError: &#39;ApiClient&#39; object has no attribute &#39;configure_jwt_authorization_flow&#39;", "body": "<p>I am getting an attribute error while running the code given below:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import base64\nimport subprocess\nfrom __future__ import absolute_import, print_function\nfrom pprint import pprint\nimport unittest\nimport webbrowser\nimport docusign_esign as docusign\nfrom docusign_esign import AuthenticationApi, TemplatesApi,EnvelopesApi,ApiClient\nfrom PyPDF2 import PdfFileReader\nimport pandas as pd\nfrom datetime import datetime\nfrom os import path\nimport requests\n\nintegrator_key = \"XYZ\"\nbase_url = \"https://www.docusign.net/restapi\"\noauth_base_url = \"account.docusign.com\" #use account-d.docusign.com for sandbox    \nredirect_uri = \"https://www.docusign.com/api\"    \nuser_id = 'MNO'     \nprivate_key_filename = \"docusign_private_key.txt\"    \nclient_secret = 'ABC' #production    \naccount_id = 'QRS'\n\napi_client = docusign.ApiClient(base_url)    \napi_client.configure_jwt_authorization_flow(integrator_key, client_secret, redirect_uri)\n</code></pre>\n\n<p>ERROR:</p>\n\n<pre><code>AttributeError                            \nTraceback (most recent call last)\n&lt;ipython-input-2-1abfece08e05&gt; in &lt;module&gt;()\n     55 api_client = docusign.ApiClient(base_url)\n     56 # make sure to pass the redirect uri\n---&gt; 57 api_client.configure_jwt_authorization_flow(integrator_key, client_secret, redirect_uri)\n\nAttributeError: 'ApiClient' object has no attribute 'configure_jwt_authorization_flow'\n</code></pre>\n"}, {"tags": ["python", "mechanize"], "answers": [{"comments": [{"owner": {"reputation": 140, "user_id": 10740673, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OLdAtXXYLpw/AAAAAAAAAAI/AAAAAAAAAA8/k4-k3kYZngU/photo.jpg?sz=128", "display_name": "Anadactothe", "link": "https://stackoverflow.com/users/10740673/anadactothe"}, "edited": false, "score": 0, "creation_date": 1565817798, "post_id": 57502150, "comment_id": 101473486, "body": "Thank you for clarifying that! (although google cant actually be read due to a robots.txt haha)"}, {"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "reply_to_user": {"reputation": 140, "user_id": 10740673, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OLdAtXXYLpw/AAAAAAAAAAI/AAAAAAAAAA8/k4-k3kYZngU/photo.jpg?sz=128", "display_name": "Anadactothe", "link": "https://stackoverflow.com/users/10740673/anadactothe"}, "edited": false, "score": 1, "creation_date": 1565817866, "post_id": 57502150, "comment_id": 101473504, "body": "@Anadactothe See updated answer, that can also be fixed"}, {"owner": {"reputation": 302, "user_id": 13845263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1759868627601854/picture?type=large", "display_name": "Elvin Aghammadzada", "link": "https://stackoverflow.com/users/13845263/elvin-aghammadzada"}, "edited": false, "score": 0, "creation_date": 1611906929, "post_id": 57502150, "comment_id": 116605524, "body": "This does not actually solve the issue"}], "tags": [], "owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "is_accepted": true, "score": 1, "last_activity_date": 1565817819, "last_edit_date": 1565817819, "creation_date": 1565817250, "answer_id": 57502150, "question_id": 57502081, "link": "https://stackoverflow.com/questions/57502081/error-when-trying-to-open-a-webpage-with-mechanize/57502150#57502150", "title": "Error when trying to open a webpage with mechanize", "body": "<p>You have to use a schema, otherwise mechanize thinks you are trying to open a local/relative path (as the error suggests).</p>\n\n<p><code>br.open(\"google.com\")</code> should be <code>br.open(\"http://google.com\")</code>.</p>\n\n<p>Then you will see an error <code>mechanize._response.httperror_seek_wrapper: HTTP Error 403: b'request disallowed by robots.txt'</code>, because <code>google.com</code> does not allow crawlers. This can be remedied with <code>br.set_handle_robots(False)</code> before <code>open</code>.</p>\n"}], "owner": {"reputation": 140, "user_id": 10740673, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OLdAtXXYLpw/AAAAAAAAAAI/AAAAAAAAAA8/k4-k3kYZngU/photo.jpg?sz=128", "display_name": "Anadactothe", "link": "https://stackoverflow.com/users/10740673/anadactothe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 57502150, "answer_count": 1, "score": 1, "last_activity_date": 1565817819, "creation_date": 1565816850, "question_id": 57502081, "link": "https://stackoverflow.com/questions/57502081/error-when-trying-to-open-a-webpage-with-mechanize", "title": "Error when trying to open a webpage with mechanize", "body": "<p>I'm trying to learn mechanize to create a chat logging bot later, so I tested out some basic code </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import mechanize as mek\nimport re\n\nbr = mek.Browser()\nbr.open(\"google.com\")\n</code></pre>\n\n<p>However, whenever I run it, I get this error. </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/runner/.local/share/virtualenvs/python3/lib/python3.7/site-packages/mechanize/_mechanize.py\", line 262, in _mech_open\n    url.get_full_url\nAttributeError: 'str' object has no attribute 'get_full_url'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"main.py\", line 5, in &lt;module&gt;\n    br.open(\"google.com\")\n  File \"/home/runner/.local/share/virtualenvs/python3/lib/python3.7/site-packages/mechanize/_mechanize.py\", line 253, in open\n    return self._mech_open(url_or_request, data, timeout=timeout)\n  File \"/home/runner/.local/share/virtualenvs/python3/lib/python3.7/site-packages/mechanize/_mechanize.py\", line 269, in _mech_open\n    raise BrowserStateError(\"can't fetch relative reference: \"\nmechanize._mechanize.BrowserStateError: can't fetch relative reference: not viewing any document\n</code></pre>\n\n<p>I double checked with the documentation on the mechanize page and it seems consistent. What am I doing wrong?</p>\n"}, {"tags": ["python", "sharepoint"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12688223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eceafe8335b0bee2f60427ed234fa88f?s=128&d=identicon&r=PG&f=1", "display_name": "maquency", "link": "https://stackoverflow.com/users/12688223/maquency"}, "is_accepted": false, "score": 0, "last_activity_date": 1578982668, "creation_date": 1578982668, "answer_id": 59728424, "question_id": 57502060, "link": "https://stackoverflow.com/questions/57502060/sharepoint-and-sharepy-packages-unable-to-import/59728424#59728424", "title": "&quot;sharepoint&quot; and &quot;sharepy&quot; packages unable to import", "body": "<p>in visual studio code change python path to where you installed python</p>\n"}], "owner": {"reputation": 1, "user_id": 11929254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f79fa62b524d53983167c374959c10?s=128&d=identicon&r=PG&f=1", "display_name": "Trossdaddy", "link": "https://stackoverflow.com/users/11929254/trossdaddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1578982668, "creation_date": 1565816767, "question_id": 57502060, "link": "https://stackoverflow.com/questions/57502060/sharepoint-and-sharepy-packages-unable-to-import", "title": "&quot;sharepoint&quot; and &quot;sharepy&quot; packages unable to import", "body": "<p>I'm trying to write a script in python that will modify files and folders in a sharepoint site. Based off what I've read online about working with sharepoint using python, I tried to install and import the \"sharepoint\" and \"sharepy\" modules.</p>\n\n<p>I used \"pip install sharepoint\" and \"pip install sharepy\" in the command prompt to install the packages, and then in my script used these lines to import the packages:</p>\n\n<p>import sharepoint</p>\n\n<p>import sharepy</p>\n\n<p>Multiple IDE's don't recognize the packages (in Visual Studio, the error says \"No module named 'sharepoint'\") and I can't use their libraries to complete my code. The modules in question are present in the same subfolder as other modules that do successfully import, so I'm not really understanding the problem here. What could be causing these libraries to not import?</p>\n"}, {"tags": ["python", "selenium", "authentication", "cookies", "automation"], "comments": [{"owner": {"reputation": 855, "user_id": 4744568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/125cdb7d43927756913b920de016f420?s=128&d=identicon&r=PG", "display_name": "pcalkins", "link": "https://stackoverflow.com/users/4744568/pcalkins"}, "edited": false, "score": 0, "creation_date": 1565819326, "post_id": 57502019, "comment_id": 101473949, "body": "&quot;log in several times until the cookies expire&quot; what do you mean by this?  Seems like you are creating a new browser/session here, so you&#39;d need a new session cookie."}, {"owner": {"reputation": 1, "user_id": 11915704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa1f593b3691a148d3edc203556759d?s=128&d=identicon&r=PG&f=1", "display_name": "user11915704", "link": "https://stackoverflow.com/users/11915704/user11915704"}, "reply_to_user": {"reputation": 855, "user_id": 4744568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/125cdb7d43927756913b920de016f420?s=128&d=identicon&r=PG", "display_name": "pcalkins", "link": "https://stackoverflow.com/users/4744568/pcalkins"}, "edited": false, "score": 0, "creation_date": 1565879014, "post_id": 57502019, "comment_id": 101490456, "body": "Ok, I must be thinking about this the wrong way.  I thought that I could simply login, save cookies, then use them in whatever browser/serssion I wanted so I didn&#39;t have to log in again.  Thanks for the help!"}, {"owner": {"reputation": 1, "user_id": 11915704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa1f593b3691a148d3edc203556759d?s=128&d=identicon&r=PG&f=1", "display_name": "user11915704", "link": "https://stackoverflow.com/users/11915704/user11915704"}, "reply_to_user": {"reputation": 855, "user_id": 4744568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/125cdb7d43927756913b920de016f420?s=128&d=identicon&r=PG", "display_name": "pcalkins", "link": "https://stackoverflow.com/users/4744568/pcalkins"}, "edited": false, "score": 0, "creation_date": 1565879071, "post_id": 57502019, "comment_id": 101490489, "body": "I&#39;ll have to try a solution where I have the browser/session stay open between runs."}], "owner": {"reputation": 1, "user_id": 11915704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa1f593b3691a148d3edc203556759d?s=128&d=identicon&r=PG&f=1", "display_name": "user11915704", "link": "https://stackoverflow.com/users/11915704/user11915704"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565816594, "creation_date": 1565816594, "question_id": 57502019, "link": "https://stackoverflow.com/questions/57502019/page-is-not-logged-in-after-loading-saved-cookies", "title": "Page is not logged in after loading saved cookies", "body": "<p>What I want to do is be able to log in once and use the cookies from that to log in several times until the cookies expire. In my test code I've been using gmail but I plan on transferring the code to other sites.</p>\n\n<p>In python, I've been able to save cookies in one script then in a separate script, load those saved cookies to my Chrome webdriver.</p>\n\n<p>However, when I try to refresh the driver I only get the login screen again.</p>\n\n<p>I've mostly followed this simple example:\n<a href=\"https://blog.softhints.com/python-pickle-example-cookies/\" rel=\"nofollow noreferrer\">https://blog.softhints.com/python-pickle-example-cookies/</a></p>\n\n<p>Although, I had to change the cookies around a bit to get rid of the error: \"Message: invalid argument: invalid 'expiry'\"</p>\n\n<p>The first script logs into gmail then captures and saves cookies with:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>cookies = driver.get_cookies()\npickle.dump(cookies, open(\"cookies.pkl\", \"wb\"))\n</code></pre>\n\n<p>The next script formats the cookies for selenium and loads them into the driver:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>driver = driver = webdriver.Chrome()\ndriver.get(\"https://mail.google.com/mail/#inbox\")\n\ncookies = []\nfor item in pickle.load(open(\"cookies.pkl\", \"rb\")):\n    cookies.append({'name': item['name'], 'value': item['value']})\n    driver.add_cookie({'name': item['name'], 'value': item['value']})\n\ndriver.refresh()\n</code></pre>\n\n<p>I was able to print the cookies along each step of the way to show that they're saving and being loaded however after driver.refresh() I still get the same empty login page when I expect to be brought to the inbox.</p>\n"}, {"tags": ["python", "numpy-ndarray"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1565816688, "post_id": 57501986, "comment_id": 101473158, "body": "if memory and speed is a concern, you may consider using <a href=\"https://github.com/pydata/numexpr\" rel=\"nofollow noreferrer\"><code>numexpr</code></a>, which gives you a good tradeoff for using <code>numpy</code> vectorized operations in memory efficient <a href=\"https://numexpr.readthedocs.io/en/latest/intro.html\" rel=\"nofollow noreferrer\"><i>and often faster</i> way</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1493, "user_id": 9270181, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xIkyNI00Nh8/AAAAAAAAAAI/AAAAAAAAAfo/w0wPUt0Yb_c/photo.jpg?sz=128", "display_name": "Jacob Stern", "link": "https://stackoverflow.com/users/9270181/jacob-stern"}, "is_accepted": false, "score": 1, "last_activity_date": 1565816449, "creation_date": 1565816449, "answer_id": 57501987, "question_id": 57501986, "link": "https://stackoverflow.com/questions/57501986/change-all-of-one-number-to-another-number-in-a-numpy-array/57501987#57501987", "title": "Change all of one number to another number in a numpy array", "body": "<p>I was able to do this quickly enough using a mask:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>x[x == 2] = 1\n</code></pre>\n\n<p>You can also apply more complicated masks (with <a href=\"https://stackoverflow.com/questions/22646463/difference-between-and-boolean-vs-bitwise-in-python-why-difference-i\">bitwise python operators</a>) if you have other numbers that you want to convert to ones:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>x[(x == 2) | (x == 3)] = 1\n</code></pre>\n"}], "owner": {"reputation": 1493, "user_id": 9270181, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xIkyNI00Nh8/AAAAAAAAAAI/AAAAAAAAAfo/w0wPUt0Yb_c/photo.jpg?sz=128", "display_name": "Jacob Stern", "link": "https://stackoverflow.com/users/9270181/jacob-stern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565816449, "creation_date": 1565816449, "question_id": 57501986, "link": "https://stackoverflow.com/questions/57501986/change-all-of-one-number-to-another-number-in-a-numpy-array", "title": "Change all of one number to another number in a numpy array", "body": "<p>Suppose I have a numpy array:</p>\n\n<pre><code>[[2, 1, 1, 1],\n [0, 2, 1, 1],\n [0, 0, 2, 1]]\n</code></pre>\n\n<p>How do I change all of the twos to be ones?</p>\n\n<pre><code>[[1, 1, 1, 1],\n [0, 1, 1, 1],\n [0, 0, 1, 1]]\n</code></pre>\n\n<p>There are naive ways to do it that are <em>really</em> slow (i.e. looping through every entry). I have to do it on a large dataset, so a fast solution is essential.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 2611, "user_id": 11633355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4pV83.png?s=128&g=1", "display_name": "Anna Nevison", "link": "https://stackoverflow.com/users/11633355/anna-nevison"}, "is_accepted": true, "score": 0, "last_activity_date": 1565885895, "last_edit_date": 1565885895, "creation_date": 1565819139, "answer_id": 57502464, "question_id": 57501965, "link": "https://stackoverflow.com/questions/57501965/finding-max-min-values-in-each-cell-of-pandas-in-python/57502464#57502464", "title": "Finding max/min values in each cell of Pandas in Python", "body": "<p>You should create your own functions that find the min/max and use .apply to create columns with the min and max of each row. Trying find the min/max based on the individual cell placement would be messy.</p>\n\n<p>Example:</p>\n\n<pre><code>import pandas as pd\n\n\ndef max_school(row):\n    order = ['PK', 'K', '1', '2', '3', '4', '5', '6', '7', '8']\n    sort = sorted(row.dropna(), key=lambda x:order.index(x))\n    return sort[-1]\n\ndef min_school(row):\n    order = ['PK', 'K', '1', '2', '3', '4', '5', '6', '7', '8']\n    sort = sorted(row.dropna(), key=lambda x:order.index(x))\n    return sort[0]\n\ndf = pd.read_csv('something.csv', dtype=str)\n\ndf['Max'] = df.apply(lambda x: max_school(x), axis=1)\ndf['Min'] = df.apply(lambda x: min_school(x), axis=1)\n\nprint(df)\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>     1    2    3    4    5    6    7  8  9 10 Max Min\n0  NaN  NaN  NaN   PK    K    1    2  3  4  5   5  PK\n1   PK    K    1    2    3    4    5  6  7  8   8  PK\n2   PK    K    1    2    3    4    5  6  7  8   8  PK\n3  NaN  NaN  NaN  NaN  NaN  NaN  NaN  K  1  2   2   K\n4  NaN  NaN  NaN  NaN  NaN  NaN   PK  K  1  2   2  PK\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 11918278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/265bec3f3b414b247ba8e5b3fd7681ab?s=128&d=identicon&r=PG&f=1", "display_name": "visionEnthusiast", "link": "https://stackoverflow.com/users/11918278/visionenthusiast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "accepted_answer_id": 57502464, "answer_count": 1, "score": 0, "last_activity_date": 1565885895, "creation_date": 1565816360, "last_edit_date": 1565816712, "question_id": 57501965, "link": "https://stackoverflow.com/questions/57501965/finding-max-min-values-in-each-cell-of-pandas-in-python", "title": "Finding max/min values in each cell of Pandas in Python", "body": "<p>I am new to Pandas, I have a csv data file and I am trying to find max and min values for each row for a particular column. That data looks something like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>0          PK,K,1,2,3,4,5\n1    PK,K,1,2,3,4,5,6,7,8\n2    PK,K,1,2,3,4,5,6,7,8\n3                   K,1,2\n4                PK,K,1,2\n</code></pre>\n\n<p>This is 1 of the columns of my CSV file (first 5 rows out of ~600 rows). As you can see it has multiple values in each cell (Those are grades offered by a school). How can I find a min and max values from this information? Thanks in advance</p>\n\n<p>I tried using dataFrame.max()/ dataFrame.min(), but that gives a max/min value for the whole row or column. My problem is more specific to a cell. Also I have thought of converting each cell into a list and then I can find max/min using python default functions, but I really don't want to do it that way. I want to stick to Pandas and dataframes</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>length_ = gradesOffered.shape\nprint(length_)\nprint(gradesOffered.iloc[0:5,0])\nprint(gradesOffered.iloc[0:5,0].max())\n\nOutput:\n(660, 1)\n0          PK,K,1,2,3,4,5\n1    PK,K,1,2,3,4,5,6,7,8\n2    PK,K,1,2,3,4,5,6,7,8\n3                   K,1,2\n4                PK,K,1,2\nName: Grades_Offered_All, dtype: object\nPK,K,1,2,3,4,5,6,7,8\n</code></pre>\n\n<p>My expected output is (in the 'max' case):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>(660, 1)\n0          PK,K,1,2,3,4,5\n1    PK,K,1,2,3,4,5,6,7,8\n2    PK,K,1,2,3,4,5,6,7,8\n3                   K,1,2\n4                PK,K,1,2\nName: Grades_Offered_All, dtype: object\n0    5\n1    8\n2    8\n3    2\n4    2\n</code></pre>\n\n<p>My expected output is (in the 'min' case):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>(660, 1)\n0          PK,K,1,2,3,4,5\n1    PK,K,1,2,3,4,5,6,7,8\n2    PK,K,1,2,3,4,5,6,7,8\n3                   K,1,2\n4                PK,K,1,2\nName: Grades_Offered_All, dtype: object\n0    PK\n1    PK\n2    PK\n3    K\n4    PK\n</code></pre>\n"}, {"tags": ["python", "pca"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1565818612, "post_id": 57501959, "comment_id": 101473727, "body": "The principal components in PCA are linear combinations of the input features, so you should be able to invert the transformation with <code>inverse_transform(x)</code> (from <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html#sklearn.decomposition.PCA.inverse_transform\" rel=\"nofollow noreferrer\">the docs</a> )"}, {"owner": {"reputation": 1, "user_id": 11929241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bkoNGr7kSDs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reeYY8vzb-tTGeVYGV-xHfs2UrOLA/photo.jpg?sz=128", "display_name": "Max Edelman", "link": "https://stackoverflow.com/users/11929241/max-edelman"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1565820615, "post_id": 57501959, "comment_id": 101474281, "body": "I tried using inverse_transform, and the output values are different than any that are found in my dataset. I might be using it wrong, though, so would you be able to write up an example?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1565821112, "post_id": 57501959, "comment_id": 101474407, "body": "The best example is in the documentation. But the thing to remember is that the components are <i>not</i> your input features, they&#39;re <i>transformations</i> of your input features. So when you select only the two most informative components and inverse the transformation, you&#39;re losing the parts of the input data that are not explained by those two PCs"}, {"owner": {"reputation": 86, "user_id": 9674061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "monkeyking9528", "link": "https://stackoverflow.com/users/9674061/monkeyking9528"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 1, "creation_date": 1565826528, "post_id": 57501959, "comment_id": 101475401, "body": "On the other side, besides @G.Anderson&#39;s points of view, whether your train dataset is large enough to represent the data distribution and your test data following the same distribution is another problem you should consider."}], "owner": {"reputation": 1, "user_id": 11929241, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bkoNGr7kSDs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reeYY8vzb-tTGeVYGV-xHfs2UrOLA/photo.jpg?sz=128", "display_name": "Max Edelman", "link": "https://stackoverflow.com/users/11929241/max-edelman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565820669, "creation_date": 1565816336, "last_edit_date": 1565820669, "question_id": 57501959, "link": "https://stackoverflow.com/questions/57501959/how-do-i-determine-which-features-are-the-principal-components-stated-in-my-co", "title": "How do I determine which features are the &#39;principal components&#39; stated in my code?", "body": "<p>I am conducting research on speech emotion recognition using 34 features but I tried to find the most important features using PCA. </p>\n\n<p>I found the values of the principal components and the emotion with which they correlate. I tried using inverse_transform but the output differed from my dataframe.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom sklearn.decomposition import PCA\nfrom sklearn.preprocessing import StandardScaler\nimport sys\n\ndef pca():\n    df = pd.read_excel ('/Users/MaxEdelman/Documents/meanDf.xlsx')\n    features = df.columns[1:35]\n    x = df.iloc[:, 1:35].values\n    y = df.loc[:, ['emotion']].values\n    x = StandardScaler().fit_transform(x)\n    pd.DataFrame(data=x, columns=features).head()\n    pca = PCA(n_components=2)\n    principalComponents = pca.fit_transform(x)\n    principalDf = pd.DataFrame ( data=principalComponents, columns= \n    ['principal component 1', 'principal component 2'])\n    finalDf = pd.concat([principalDf, df[['emotion']]], axis=1 )\n</code></pre>\n\n<p>How do I determine from where these components result?</p>\n"}, {"tags": ["python", "python-3.x", "debian", "beagleboneblack", "i2c"], "comments": [{"owner": {"reputation": 23, "user_id": 9091361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29de3f34ea667f667e5223d2a15c576a?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/9091361/josh"}, "edited": false, "score": 2, "creation_date": 1565895911, "post_id": 57501931, "comment_id": 101497815, "body": "Found the answer myself. The SMBus.read_i2c_block_data(address, data_address, length) function accomplishes this"}], "owner": {"reputation": 23, "user_id": 9091361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29de3f34ea667f667e5223d2a15c576a?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/9091361/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565816151, "creation_date": 1565816151, "question_id": 57501931, "link": "https://stackoverflow.com/questions/57501931/how-to-read-multiple-bytes-over-i2c-on-beaglebone-black-with-python-3", "title": "How to read multiple bytes over I2C on Beaglebone Black with Python 3?", "body": "<p>I'm trying to read temperature and humidity from an <a href=\"https://www.cdiweb.com/datasheets/telaire-amphenol/T9602-07225-web.pdf\" rel=\"nofollow noreferrer\">Amphenol T9602 temperature/humidity sensor</a>. Essentially, you read it by reading 4 bytes in a row over I2C, where the first two bytes correspond to the humidity and the next two bytes correspond to the temperature. I've been able to get it to work using <a href=\"https://github.com/AmphenolAdvancedSensors/Telaire/blob/T9602-ChipCap2/T9602.ino\" rel=\"nofollow noreferrer\">this</a> Arduino sketch. Here is the important bit that actually reads the data:</p>\n\n<pre><code>Wire.beginTransmission(0x28);\nWire.write(0);\nWire.endTransmission();\n## Heading ##\nWire.requestFrom(0x28, 4);\n*a = Wire.read();\n*b = Wire.read();\n*c = Wire.read();\n*d = Wire.read();\n</code></pre>\n\n<p>This is what a sample line of output looks like when I modify the showdata method to print a, b, c, d, and then the temperature and humidity:</p>\n\n<pre><code>101, 28, 97, 105, 22.78, 57.98\n</code></pre>\n\n<p>How can I replicate this functionality on the Beaglebone Black? I've tried using the smbus library, but all I've managed to accomplish is reading the first byte over and over. I can tell it's the first byte because it's always around 0x64 in standard conditions but gets higher if I increase the humidity. Same with kernel commands, although when I use <code>i2cget -y 2 0x28 0x0 w</code> to try and read 2 bytes I get something like 0xa865, where the first byte is way too high and the second byte is likely the first humidity byte. Also, I realize that this could probably be done more easily in another language, but it is important that this code is written in Python (preferably 3.x).</p>\n"}, {"tags": ["python", "python-requests", "certificate"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 11832219, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5gPwkCAIvFc/AAAAAAAAAAI/AAAAAAAAABA/vdsQskscHUM/photo.jpg?sz=128", "display_name": "Virtual Penman", "link": "https://stackoverflow.com/users/11832219/virtual-penman"}, "edited": false, "score": 0, "creation_date": 1565817506, "post_id": 57502048, "comment_id": 101473395, "body": "I did use HTTPS, I also have to use a proxy parameter in the get request. If I do not use it, I receive a timeout error. If I do use it, I receive the AttributeError. It seems like I am not ever going to get it working behind my proxy.   The proxy is defined and used like : <a href=\"https://2.python-requests.org/en/master/user/advanced/#proxies\" rel=\"nofollow noreferrer\">2.python-requests.org/en/master/user/advanced/#proxies</a>"}, {"owner": {"reputation": 334, "user_id": 11924414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UJhkt.png?s=128&g=1", "display_name": "brazosFX", "link": "https://stackoverflow.com/users/11924414/brazosfx"}, "reply_to_user": {"reputation": 115, "user_id": 11832219, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5gPwkCAIvFc/AAAAAAAAAAI/AAAAAAAAABA/vdsQskscHUM/photo.jpg?sz=128", "display_name": "Virtual Penman", "link": "https://stackoverflow.com/users/11832219/virtual-penman"}, "edited": false, "score": 1, "creation_date": 1565847900, "post_id": 57502048, "comment_id": 101478788, "body": "How does your proxy handle https?  Is it MIM?  Is it enforced by a security package installed on the workstation?"}, {"owner": {"reputation": 115, "user_id": 11832219, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5gPwkCAIvFc/AAAAAAAAAAI/AAAAAAAAABA/vdsQskscHUM/photo.jpg?sz=128", "display_name": "Virtual Penman", "link": "https://stackoverflow.com/users/11832219/virtual-penman"}, "edited": false, "score": 0, "creation_date": 1565890068, "post_id": 57502048, "comment_id": 101495477, "body": "That is a great question. I am actually not 100% sure. Like I said I am really new to Python, and very new to this role.(my first software engineering position) I know the proxy is set up on the Win 10 machine as a script address .dat file that holds all the proxy information."}], "tags": [], "owner": {"reputation": 334, "user_id": 11924414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UJhkt.png?s=128&g=1", "display_name": "brazosFX", "link": "https://stackoverflow.com/users/11924414/brazosfx"}, "is_accepted": false, "score": 1, "last_activity_date": 1565816714, "creation_date": 1565816714, "answer_id": 57502048, "question_id": 57501882, "link": "https://stackoverflow.com/questions/57501882/cannot-replicate-code-to-get-certificate-with-requests-module-in-python/57502048#57502048", "title": "Cannot replicate code to get certificate with Requests module in Python", "body": "<p>I ran your code exactly copied from above and it worked.  Then I removed the \"s\" from your <a href=\"https://google.com\" rel=\"nofollow noreferrer\">https://google.com</a></p>\n\n<p>Is the code above what you actually ran?  Is it possible you replaced the actual site which was http with <a href=\"https://google.com\" rel=\"nofollow noreferrer\">https://google.com</a> as a demo for us?</p>\n\n<p>If so, it being http would cause exactly that error.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Dro6J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dro6J.png\" alt=\"google with http\"></a></p>\n"}], "owner": {"reputation": 115, "user_id": 11832219, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5gPwkCAIvFc/AAAAAAAAAAI/AAAAAAAAABA/vdsQskscHUM/photo.jpg?sz=128", "display_name": "Virtual Penman", "link": "https://stackoverflow.com/users/11832219/virtual-penman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1566820492, "answer_count": 1, "score": 1, "last_activity_date": 1565816714, "creation_date": 1565815900, "question_id": 57501882, "link": "https://stackoverflow.com/questions/57501882/cannot-replicate-code-to-get-certificate-with-requests-module-in-python", "closed_reason": "Not suitable for this site", "title": "Cannot replicate code to get certificate with Requests module in Python", "body": "<p>I am trying to use Requests to connect with a Proxy to a site and extract the Certificate information. I am replicating the code produced here : <a href=\"https://stackoverflow.com/a/52072170/1709587\">https://stackoverflow.com/a/52072170/1709587</a></p>\n\n<p>But when I try to run it I get an error : </p>\n\n<pre><code>AttributeError: 'Response' object has no attribute 'peer_certificate'\n</code></pre>\n\n<p>Can someone explain why I am getting this error and how I can fix the issue and get the certificate information?</p>\n\n<p>Here is the code replicated : </p>\n\n<pre><code>import requests\nfrom requests.packages.urllib3.exceptions import InsecureRequestWarning\nrequests.packages.urllib3.disable_warnings(InsecureRequestWarning)\n\n\nHTTPResponse = requests.packages.urllib3.response.HTTPResponse\norig_HTTPResponse__init__ = HTTPResponse.__init__\ndef new_HTTPResponse__init__(self, *args, **kwargs):\n    orig_HTTPResponse__init__(self, *args, **kwargs)\n    try:\n        self.peer_certificate = self._connection.peer_certificate\n    except AttributeError:\n        pass\nHTTPResponse.__init__ = new_HTTPResponse__init__\n\nHTTPAdapter = requests.adapters.HTTPAdapter\norig_HTTPAdapter_build_response = HTTPAdapter.build_response\ndef new_HTTPAdapter_build_response(self, request, resp):\n    response = orig_HTTPAdapter_build_response(self, request, resp)\n    try:\n        response.peer_certificate = resp.peer_certificate\n    except AttributeError:\n        pass\n    return response\nHTTPAdapter.build_response = new_HTTPAdapter_build_response\n\nHTTPSConnection = requests.packages.urllib3.connection.HTTPSConnection\norig_HTTPSConnection_connect = HTTPSConnection.connect\ndef new_HTTPSConnection_connect(self):\n    orig_HTTPSConnection_connect(self)\n    try:\n        self.peer_certificate = self.sock.connection.get_peer_certificate()\n    except AttributeError:\n        pass\nHTTPSConnection.connect = new_HTTPSConnection_connect\n\nr = requests.get('https://google.com', verify=False)\nprint(dir(r.peer_certificate))\n</code></pre>\n"}, {"tags": ["python", "pandas", "lambda", "apply"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 3, "creation_date": 1565816331, "post_id": 57501868, "comment_id": 101473061, "body": "I believe the <code>apply</code> method has a test/optimization run before the actual loop. That&#39;s why you see two <code>0</code> values."}, {"owner": {"reputation": 21903, "user_id": 9274732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2713715b9156a66c16d7c1331528dce8?s=128&d=identicon&r=PG&f=1", "display_name": "Ben.T", "link": "https://stackoverflow.com/users/9274732/ben-t"}, "edited": false, "score": 3, "creation_date": 1565816337, "post_id": 57501868, "comment_id": 101473064, "body": "IIUC, on <a href=\"https://github.com/pandas-dev/pandas/issues/6753\" rel=\"nofollow noreferrer\">github</a> they address your concern about the &quot;additional&quot; iteration"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1565817208, "post_id": 57501868, "comment_id": 101473316, "body": "This is <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html\" rel=\"nofollow noreferrer\">documented in the notes section</a>"}, {"owner": {"reputation": 97, "user_id": 1229873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015653e58d933078c195ced9c4f1565a?s=128&d=identicon&r=PG", "display_name": "user1229873", "link": "https://stackoverflow.com/users/1229873/user1229873"}, "edited": false, "score": 0, "creation_date": 1565818114, "post_id": 57501868, "comment_id": 101473571, "body": "Many thanks for the reference, my headache is better :)! This is however, a new variation of the theme as it is now context sensitive. Now I understand that &#39;this is expected&#39; see github. Maybe I am wrong, but in the old days, programming did not mean that unexpected behavior was expected. :) At least, please, row.name need to be depreciated in such cases."}], "answers": [{"tags": [], "owner": {"reputation": 777, "user_id": 9235855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AaApQ.png?s=128&g=1", "display_name": "Moormanly", "link": "https://stackoverflow.com/users/9235855/moormanly"}, "is_accepted": true, "score": 3, "last_activity_date": 1565818220, "creation_date": 1565818220, "answer_id": 57502334, "question_id": 57501868, "link": "https://stackoverflow.com/questions/57501868/pandas-bug-applying-lambda-on-multiple-columns-row-name-has-strange-behavior/57502334#57502334", "title": "Pandas bug? applying lambda on multiple columns row.name has strange behavior", "body": "<p>According to the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html\" rel=\"nofollow noreferrer\">notes section of the documentation</a>,</p>\n\n<blockquote>\n  <p>In the current implementation apply calls func twice on the first column/row to decide whether it can take a fast or slow code path. This can lead to unexpected behavior if func has side-effects, as they will take effect twice for the first column/row.</p>\n</blockquote>\n"}], "owner": {"reputation": 97, "user_id": 1229873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015653e58d933078c195ced9c4f1565a?s=128&d=identicon&r=PG", "display_name": "user1229873", "link": "https://stackoverflow.com/users/1229873/user1229873"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 57502334, "answer_count": 1, "score": 0, "last_activity_date": 1565818220, "creation_date": 1565815783, "question_id": 57501868, "link": "https://stackoverflow.com/questions/57501868/pandas-bug-applying-lambda-on-multiple-columns-row-name-has-strange-behavior", "title": "Pandas bug? applying lambda on multiple columns row.name has strange behavior", "body": "<p>I have the following code:</p>\n\n<pre><code>d = {'p': [1, 1], 'm': [1, 1]}\ndf = pd.DataFrame(data=d)\ndf.apply(lambda row: pandas.Series(meth(row.name)), axis=1)\n\ndef meth(i):\n    return [2, 3]\n</code></pre>\n\n<p>During iteration and having a breakpoint at 'meth' return statement, the 'i' has the following values:</p>\n\n<pre><code>{int64} 0\n{int} 0 !!!\n{int} 1\n</code></pre>\n\n<p>so I have an additional iteration and a change of type, which is strange.\nPython 3.6; Pandas 0.25.0, Pycharm\nPyCharm 2019.2 (Professional Edition)\nBuild #PY-192.5728.105, built on July 23, 2019</p>\n\n<p>I have tried the code without 'pandas.Series', returning an only single integer, the row index is correct and its type is always {int64}.</p>\n\n<p>What is wrong?</p>\n"}, {"tags": ["python", "statistics", "data-science", "array-formulas"], "answers": [{"comments": [{"owner": {"reputation": 777, "user_id": 9235855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AaApQ.png?s=128&g=1", "display_name": "Moormanly", "link": "https://stackoverflow.com/users/9235855/moormanly"}, "reply_to_user": {"reputation": 280, "user_id": 7231831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b74166e61beda5fa2992be5673c4830?s=128&d=identicon&r=PG&f=1", "display_name": "Taha", "link": "https://stackoverflow.com/users/7231831/taha"}, "edited": false, "score": 1, "creation_date": 1566324505, "post_id": 57502391, "comment_id": 101618474, "body": "@Taha You can accept an answer that solves your question by clicking the checkmark to the left of the answer"}], "tags": [], "owner": {"reputation": 777, "user_id": 9235855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AaApQ.png?s=128&g=1", "display_name": "Moormanly", "link": "https://stackoverflow.com/users/9235855/moormanly"}, "is_accepted": true, "score": 1, "last_activity_date": 1565818602, "creation_date": 1565818602, "answer_id": 57502391, "question_id": 57501852, "link": "https://stackoverflow.com/questions/57501852/how-to-calculating-zero-crossing-rate-zcr-mean-crossing-rate-mcr-in-an-arr/57502391#57502391", "title": "How to calculating Zero Crossing Rate (ZCR) &amp; Mean Crossing Rate (MCR) in an array?", "body": "<p>You can use your ZCR function to compute the MCR like so:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def getMeanCrossingRate(self, arr):\n    return self.getZeroCrossingRate(np.array(arr) - np.mean(arr))\n</code></pre>\n"}], "owner": {"reputation": 280, "user_id": 7231831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b74166e61beda5fa2992be5673c4830?s=128&d=identicon&r=PG&f=1", "display_name": "Taha", "link": "https://stackoverflow.com/users/7231831/taha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 816, "favorite_count": 0, "accepted_answer_id": 57502391, "answer_count": 1, "score": 1, "last_activity_date": 1565818602, "creation_date": 1565815684, "question_id": 57501852, "link": "https://stackoverflow.com/questions/57501852/how-to-calculating-zero-crossing-rate-zcr-mean-crossing-rate-mcr-in-an-arr", "title": "How to calculating Zero Crossing Rate (ZCR) &amp; Mean Crossing Rate (MCR) in an array?", "body": "<p>I am trying to create two python methods that provides ZCR &amp; MCR of an array\n as mentioned in the <a href=\"https://www.researchgate.net/publication/323935725_Analyzing_User_Emotions_via_Physiology_Signals\" rel=\"nofollow noreferrer\">research paper</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/EOvsD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EOvsD.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here are my code for ZCR :</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    def getZeroCrossingRate(self,arr):\n        my_array = np.array(arr)\n        return float(\"{0:.2f}\".format((((my_array[:-1] * my_array[1:]) &lt; 0).sum())/len(arr)))\n</code></pre>\n\n<pre><code>Input  : [1,2,-3,4,5,-6,-2,-6,2]\nOutput : 0.44\n</code></pre>\n\n<p>For <strong>MCR</strong> , should i average out the ZCR calculated from other segments ?</p>\n"}, {"tags": ["python", "python-3.x", "scikit-learn", "pca", "variance"], "comments": [{"owner": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "edited": false, "score": 0, "creation_date": 1565816216, "post_id": 57501846, "comment_id": 101473035, "body": "Sorry if I didn&#39;t understand correctly, you want to know the sum of errors explained to each of the variables from the same dataset (test_df) before and ater applying pca?"}, {"owner": {"reputation": 161, "user_id": 6088113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6faeec0cea83f37c69f3824efd7d3bf6?s=128&d=identicon&r=PG&f=1", "display_name": "D. Rao", "link": "https://stackoverflow.com/users/6088113/d-rao"}, "reply_to_user": {"reputation": 11558, "user_id": 11897007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IoZiJ.png?s=128&g=1", "display_name": "Celius Stingher", "link": "https://stackoverflow.com/users/11897007/celius-stingher"}, "edited": false, "score": 0, "creation_date": 1565816875, "post_id": 57501846, "comment_id": 101473216, "body": "Yes that would be something to explore as well"}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 6088113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6faeec0cea83f37c69f3824efd7d3bf6?s=128&d=identicon&r=PG&f=1", "display_name": "D. Rao", "link": "https://stackoverflow.com/users/6088113/d-rao"}, "edited": false, "score": 1, "creation_date": 1565906202, "post_id": 57516569, "comment_id": 101501261, "body": "I ended up using the mean squared error but these options seem better - thank you so much!! @TomDLT"}], "tags": [], "owner": {"reputation": 3271, "user_id": 6156647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FWgiU.png?s=128&g=1", "display_name": "TomDLT", "link": "https://stackoverflow.com/users/6156647/tomdlt"}, "is_accepted": true, "score": 3, "last_activity_date": 1565905639, "last_edit_date": 1565905639, "creation_date": 1565905102, "answer_id": 57516569, "question_id": 57501846, "link": "https://stackoverflow.com/questions/57501846/is-there-a-way-to-compute-the-explained-variance-of-pca-on-a-test-set/57516569#57516569", "title": "Is there a way to compute the explained variance of PCA on a test set?", "body": "<h1>Variance explained for each components</h1>\n\n<p>You can compute it manually.\nIf the components <code>X_i</code> are orthogonal (which is the case in PCA), the explained variance by <code>X_i</code> out of <code>X</code> is: <code>1 - ||X_i - X||^2 / ||X - X_mean||^2</code></p>\n\n<p>Hence the following example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nfrom sklearn.decomposition import PCA\n\nX_train = np.random.randn(200, 5)\nX_test = np.random.randn(100, 5)\nmodel = PCA(n_components=5).fit(X_train)\n\ndef explained_variance(X):\n    result = np.zeros(model.n_components)\n    for ii in range(model.n_components):\n        X_trans = model.transform(X)\n        X_trans_ii = np.zeros_like(X_trans)\n        X_trans_ii[:, ii] = X_trans[:, ii]\n        X_approx_ii = model.inverse_transform(X_trans_ii)\n\n        result[ii] = 1 - (np.linalg.norm(X_approx_ii - X) /\n                          np.linalg.norm(X - model.mean_)) ** 2\n    return result\n\n\nprint(model.explained_variance_ratio_)\nprint(explained_variance(X_train))\nprint(explained_variance(X_test))\n# [0.25335711 0.23100201 0.2195476  0.15717412 0.13891916]\n# [0.25335711 0.23100201 0.2195476  0.15717412 0.13891916]\n# [0.17851083 0.199134   0.24198887 0.23286815 0.14749816]\n</code></pre>\n\n<h1>Total variance explained</h1>\n\n<p>Alternatively, if you only care about the total variance explained, you can use <code>r2_score</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from sklearn.metrics import r2_score\n\nmodel = PCA(n_components=2).fit(X_train)\nprint(model.explained_variance_ratio_.sum())\nprint(r2_score(X_train, model.inverse_transform(model.transform(X_train)),\n               multioutput='variance_weighted'))\nprint(r2_score(X_test, model.inverse_transform(model.transform(X_test)),\n               multioutput='variance_weighted'))\n# 0.46445451252373826\n# 0.46445451252373815\n# 0.4470229486590848\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 6088113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6faeec0cea83f37c69f3824efd7d3bf6?s=128&d=identicon&r=PG&f=1", "display_name": "D. Rao", "link": "https://stackoverflow.com/users/6088113/d-rao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 3, "accepted_answer_id": 57516569, "answer_count": 1, "score": 3, "last_activity_date": 1565907074, "creation_date": 1565815656, "last_edit_date": 1565907074, "question_id": 57501846, "link": "https://stackoverflow.com/questions/57501846/is-there-a-way-to-compute-the-explained-variance-of-pca-on-a-test-set", "title": "Is there a way to compute the explained variance of PCA on a test set?", "body": "<p>I want to see how well PCA worked with my data. </p>\n\n<p>I applied PCA on a training set and used the returned pca object to transform on a test set. pca object has a variable <code>pca.explained_variance_ratio_</code> which tells me the percentage of variance explained by each of the selected components for the training set. After applying the pca transform, I want to see how well this worked on the test set. I tried <code>inverse_transform()</code> that returned what the original values would look like but I have no way to compare how it worked on the train set vs test set. </p>\n\n<pre><code>pca = PCA(0.99)\npca.fit(train_df)  \ntranformed_test = pca.transform(test_df)\ninverse_test = pca.inverse_transform(tranformed_test)\nnpt.assert_almost_equal(test_arr, inverse_test, decimal=2)\n</code></pre>\n\n<p>This returns:</p>\n\n<blockquote>\n  <p>Arrays are not almost equal to 2 decimals</p>\n</blockquote>\n\n<p>Is there something like <code>pca.explained_variance_ratio_</code> after <code>transform()</code>?</p>\n"}, {"tags": ["python", "selenium", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 1866, "user_id": 1183506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aba83296f9be999e2fab8eab88b4727?s=128&d=identicon&r=PG", "display_name": "mrfreester", "link": "https://stackoverflow.com/users/1183506/mrfreester"}, "edited": false, "score": 0, "creation_date": 1565817586, "post_id": 57501782, "comment_id": 101473418, "body": "I don&#39;t think it typically would return 0 with that code... Is there any chance you&#39;re grabbing the wrong element that is maybe a parent or child of the one that has a width?"}, {"owner": {"reputation": 683, "user_id": 3466308, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5139519f5277ad0aa69eff90039988d2?s=128&d=identicon&r=PG&f=1", "display_name": "MichM", "link": "https://stackoverflow.com/users/3466308/michm"}, "reply_to_user": {"reputation": 1866, "user_id": 1183506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aba83296f9be999e2fab8eab88b4727?s=128&d=identicon&r=PG", "display_name": "mrfreester", "link": "https://stackoverflow.com/users/1183506/mrfreester"}, "edited": false, "score": 0, "creation_date": 1565817764, "post_id": 57501782, "comment_id": 101473473, "body": "That it&#39;s not typical is also what confuses me. There is no chance I&#39;m grabbing the wrong element. For each element I printed the xpath, the class properties, the css properties, and the Selenium-perceived width from .size, all together, just to double-check. All these elements have &quot;auto&quot; width from css and 0 width from Selenium."}, {"owner": {"reputation": 1866, "user_id": 1183506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aba83296f9be999e2fab8eab88b4727?s=128&d=identicon&r=PG", "display_name": "mrfreester", "link": "https://stackoverflow.com/users/1183506/mrfreester"}, "edited": false, "score": 0, "creation_date": 1565818256, "post_id": 57501782, "comment_id": 101473612, "body": "I ask because <code>auto</code> can definitely resolve to 0, and fairly frequently I&#39;ve found that the element that looks like the one I want actually has a size of 0 and the one I actually want is close by on the hierarchy"}, {"owner": {"reputation": 683, "user_id": 3466308, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5139519f5277ad0aa69eff90039988d2?s=128&d=identicon&r=PG&f=1", "display_name": "MichM", "link": "https://stackoverflow.com/users/3466308/michm"}, "reply_to_user": {"reputation": 1866, "user_id": 1183506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aba83296f9be999e2fab8eab88b4727?s=128&d=identicon&r=PG", "display_name": "mrfreester", "link": "https://stackoverflow.com/users/1183506/mrfreester"}, "edited": false, "score": 0, "creation_date": 1565818941, "post_id": 57501782, "comment_id": 101473818, "body": "Right but it&#39;s not the case here. They don&#39;t resolve to zero."}], "answers": [{"comments": [{"owner": {"reputation": 1866, "user_id": 1183506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aba83296f9be999e2fab8eab88b4727?s=128&d=identicon&r=PG", "display_name": "mrfreester", "link": "https://stackoverflow.com/users/1183506/mrfreester"}, "edited": false, "score": 0, "creation_date": 1565816898, "post_id": 57502047, "comment_id": 101473227, "body": "OP mentioned that <code>e</code> is an element. <a href=\"https://seleniumhq.github.io/selenium/docs/api/py/webdriver_remote/selenium.webdriver.remote.webelement.html\" rel=\"nofollow noreferrer\">webelement</a>"}, {"owner": {"reputation": 683, "user_id": 3466308, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5139519f5277ad0aa69eff90039988d2?s=128&d=identicon&r=PG&f=1", "display_name": "MichM", "link": "https://stackoverflow.com/users/3466308/michm"}, "edited": false, "score": 1, "creation_date": 1565817253, "post_id": 57502047, "comment_id": 101473328, "body": "I did not. But I don&#39;t think window_size matters. After all, some elements do have width from <code>e.size[&#39;width&#39;]</code>. It&#39;s just that some don&#39;t, despite that Chrome developer tool and human eyeballs would both say they have width. I doubt my entire code would help either except to serve as a distraction -- the snippet I already posted is all there is."}], "tags": [], "owner": {"reputation": 380, "user_id": 8488594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vw0c4.jpg?s=128&g=1", "display_name": "Mohammad Moallemi", "link": "https://stackoverflow.com/users/8488594/mohammad-moallemi"}, "is_accepted": false, "score": 0, "last_activity_date": 1565816711, "creation_date": 1565816711, "answer_id": 57502047, "question_id": 57501782, "link": "https://stackoverflow.com/questions/57501782/selenium-sizewidth-returns-zero-for-elements/57502047#57502047", "title": "selenium size[&#39;width&#39;] returns zero for elements", "body": "<p>did you use something like:</p>\n\n<pre><code>driver.set_window_size(1366, 768)\n</code></pre>\n\n<p>for defining window size?\nand what is <em>e</em> please post your code so we can help you better</p>\n"}, {"comments": [{"owner": {"reputation": 1866, "user_id": 1183506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aba83296f9be999e2fab8eab88b4727?s=128&d=identicon&r=PG", "display_name": "mrfreester", "link": "https://stackoverflow.com/users/1183506/mrfreester"}, "edited": false, "score": 0, "creation_date": 1565966584, "post_id": 57504405, "comment_id": 101519673, "body": "Headless browsers don&#39;t load a gui, so it makes sense that nothing would have a size. Good catch :)"}], "tags": [], "owner": {"reputation": 683, "user_id": 3466308, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5139519f5277ad0aa69eff90039988d2?s=128&d=identicon&r=PG&f=1", "display_name": "MichM", "link": "https://stackoverflow.com/users/3466308/michm"}, "is_accepted": false, "score": 1, "last_activity_date": 1565838259, "creation_date": 1565838259, "answer_id": 57504405, "question_id": 57501782, "link": "https://stackoverflow.com/questions/57501782/selenium-sizewidth-returns-zero-for-elements/57504405#57504405", "title": "selenium size[&#39;width&#39;] returns zero for elements", "body": "<p>I found out somehow this is to do with my specifying the option of headless for selenium:</p>\n\n<pre><code>options = webdriver.ChromeOptions()\noptions.add_argument('headless')\n\ndriver = webdriver.Chrome(options=options)\n</code></pre>\n\n<p>remove the <code>options.add_argument('headless')</code> line, and the sizes, including widths, spring back to life. Anyone knows why this is the case, and is there a way to both remain headless and get non-zero widths from <code>.size['width']</code> for elements that do have non-zero width?</p>\n"}], "owner": {"reputation": 683, "user_id": 3466308, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5139519f5277ad0aa69eff90039988d2?s=128&d=identicon&r=PG&f=1", "display_name": "MichM", "link": "https://stackoverflow.com/users/3466308/michm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565838259, "creation_date": 1565815304, "last_edit_date": 1565817595, "question_id": 57501782, "link": "https://stackoverflow.com/questions/57501782/selenium-sizewidth-returns-zero-for-elements", "title": "selenium size[&#39;width&#39;] returns zero for elements", "body": "<p>I'm using selenium with python, using a Chrome webdriver to read a static html file on my disk. Some elements behave well when <code>.size['width']</code> is called upon them, returning the widths with no problem. But multiple of elements, whose css width property is \"auto\", returns zero when I call <code>e.size['width']</code> for such an element <code>e</code>. Why? And how can I get the actual width of the elements? They are definitely not zero (as can be seen from the Chrome developer tools' popover tooltips) and <code>e.value_of_css_property(\"width\")</code> returns \"auto\", which isn't informative. </p>\n"}, {"tags": ["python", "dataframe"], "comments": [{"owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "edited": false, "score": 2, "creation_date": 1565815343, "post_id": 57501780, "comment_id": 101472790, "body": "Can you post a sample of your code?"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 1, "creation_date": 1565815578, "post_id": 57501780, "comment_id": 101472872, "body": "Welcome to Stack Overflow. The idea of &quot;keys&quot; is used in many data structures. Please show us some data and code that shows your problem.."}, {"owner": {"reputation": 95, "user_id": 11929159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9655f0ae662f5b43d896581359d85c?s=128&d=identicon&r=PG&f=1", "display_name": "ambmil", "link": "https://stackoverflow.com/users/11929159/ambmil"}, "edited": false, "score": 0, "creation_date": 1565815976, "post_id": 57501780, "comment_id": 101472976, "body": "Thank you... My apologies.. I am quite really new."}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1565816558, "post_id": 57501780, "comment_id": 101473122, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/48233779/adding-suffix-to-duplicate-index-values\">Adding suffix to duplicate index values</a>"}, {"owner": {"reputation": 95, "user_id": 11929159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9655f0ae662f5b43d896581359d85c?s=128&d=identicon&r=PG&f=1", "display_name": "ambmil", "link": "https://stackoverflow.com/users/11929159/ambmil"}, "edited": false, "score": 0, "creation_date": 1565816930, "post_id": 57501780, "comment_id": 101473236, "body": "My apologies, but I think it is not similar. My problem is to add a counting number to an existing variable (the key) to make non-unique elements unique."}], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 11929159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9655f0ae662f5b43d896581359d85c?s=128&d=identicon&r=PG&f=1", "display_name": "ambmil", "link": "https://stackoverflow.com/users/11929159/ambmil"}, "is_accepted": true, "score": 0, "last_activity_date": 1565819757, "creation_date": 1565819757, "answer_id": 57502552, "question_id": 57501780, "link": "https://stackoverflow.com/questions/57501780/adding-counting-number-on-duplicate-keys-for-merging/57502552#57502552", "title": "Adding Counting Number on Duplicate Keys for Merging", "body": "<p>Thank you very much to the one who responded. Was able to use cumcount...</p>\n\n<pre><code>df['dfkeynew'] = df['dfkey'].map(str) + df.groupby('dfkey').cumcount().map(str)\ndf['dfkeycountnew'] = df.groupby('dfkeynew')['dfkeynew'].transform('count')   \n\ndf['dfkeycountnew'].value_counts()\n</code></pre>\n\n<p>They are all unique now.</p>\n"}], "owner": {"reputation": 95, "user_id": 11929159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9655f0ae662f5b43d896581359d85c?s=128&d=identicon&r=PG&f=1", "display_name": "ambmil", "link": "https://stackoverflow.com/users/11929159/ambmil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 57502552, "answer_count": 1, "score": 0, "last_activity_date": 1565819757, "creation_date": 1565815303, "last_edit_date": 1565817517, "question_id": 57501780, "link": "https://stackoverflow.com/questions/57501780/adding-counting-number-on-duplicate-keys-for-merging", "title": "Adding Counting Number on Duplicate Keys for Merging", "body": "<p>I created a key for merging. Unfortunately, there are some duplicate keys. But i need to keep these rows. I am thinking that for each set of duplicate keys, I can just add counting number 1, 2, 3 and so on to each of the duplicate keys to make them unique. </p>\n\n<p>Can you recommend a command or method do this? Thank you very much.</p>\n\n<p>These are actually the codes before the part that I am really stuck on how to proceed:</p>\n\n<pre><code>#creating a key variable for merging\ndf['dfkey'] = df['ColA'].map(str) + ' ' + df['ColB'].map(str) + ' ' + df['ColC'].map(str)    #creating the key\ndf['dfkeycount'] = df.groupby('dfkey')['dfkey'].transform('count')                           #counting the freq of each dfkey ---&gt; to know if they are unique\ndf['dfkeycountcat'] = df.groupby(['dfkey','Category'])['dfkey'].transform('count')           #to count the freq of each dfkey per Category Note: Later, will divide the dataset into Category. Then will merge them side by side (one variable will be renamed based on the category name).\n\ndataunique = df.loc[df['dfkeycountcat'] == 1]                                                #created this subset for those with clean keys. I am actually successful with the merging if only within this dataset.\ndataduplicate = df.loc[df['dfkeycountcat'] &gt; 1]                                              #this is the dataset that I want to apply the code for adding a sequence number at the end of the key.                                             \n</code></pre>\n"}, {"tags": ["python", "security", "travis-ci", "packaging", "pypi"], "answers": [{"comments": [{"owner": {"reputation": 7116, "user_id": 1394353, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/519ce8a904896c40b9a9e2d9a82e0d3c?s=128&d=identicon&r=PG", "display_name": "JL Peyret", "link": "https://stackoverflow.com/users/1394353/jl-peyret"}, "edited": false, "score": 0, "creation_date": 1565815972, "post_id": 57501840, "comment_id": 101472974, "body": "ah, ah.  that makes sense.  still not really sure what it does though, but I feel a bit \ud83d\udc11-ish for asking this question.  do you have info on what this bit is used for?  can I leave it out?"}, {"owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "reply_to_user": {"reputation": 7116, "user_id": 1394353, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/519ce8a904896c40b9a9e2d9a82e0d3c?s=128&d=identicon&r=PG", "display_name": "JL Peyret", "link": "https://stackoverflow.com/users/1394353/jl-peyret"}, "edited": false, "score": 1, "creation_date": 1565816500, "post_id": 57501840, "comment_id": 101473104, "body": "It&#39;s your PyPI password. Travis needs it to upload a package on your behalf."}], "tags": [], "owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "is_accepted": true, "score": 2, "last_activity_date": 1565815616, "creation_date": 1565815616, "answer_id": 57501840, "question_id": 57501774, "link": "https://stackoverflow.com/questions/57501774/pypi-packaging-and-secrets-why-does-a-github-intended-travis-yml-hold-a-passw/57501840#57501840", "title": "pypi packaging and secrets: why does a github--intended .travis.yml hold a password?", "body": "<p>A repository\u2019s <code>.travis.yml</code> file can have \"encrypted values\", such as environment variables, notification settings, and deploy API keys. These encrypted values can be added by anyone, but are only readable by Travis CI.</p>\n\n<p>This is what the <code>secure:</code> field name indicates. It's safe to include these encrypted values in your <code>.travis.yml</code> and safe to upload them to Github as well.</p>\n\n<p>You can generate secure values by installing the <code>travis</code> gem and running it:</p>\n\n<pre><code>$ gem install travis\n$ travis encrypt \"secretvalue\"\n&lt;encrypted string&gt;\n</code></pre>\n"}], "owner": {"reputation": 7116, "user_id": 1394353, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/519ce8a904896c40b9a9e2d9a82e0d3c?s=128&d=identicon&r=PG", "display_name": "JL Peyret", "link": "https://stackoverflow.com/users/1394353/jl-peyret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 57501840, "answer_count": 1, "score": 3, "last_activity_date": 1565815616, "creation_date": 1565815268, "last_edit_date": 1565815604, "question_id": 57501774, "link": "https://stackoverflow.com/questions/57501774/pypi-packaging-and-secrets-why-does-a-github-intended-travis-yml-hold-a-passw", "title": "pypi packaging and secrets: why does a github--intended .travis.yml hold a password?", "body": "<p>I've always understood the rule #1 of secrets is you keep them out of public source control.</p>\n\n<p>So, I was prepping to upload a new package to pypi.</p>\n\n<p>In <strong>.travis.yml</strong> I see:</p>\n\n<pre><code>deploy:\n  provider: pypi\n  distributions: sdist bdist_wheel\n  user: mysuser\n    password:\n    secure: PLEASE_REPLACE_ME\n  on:\n    tags: true\n    repo: myuser/pynoorm\n    condition: $TOXENV == py27\n</code></pre>\n\n<p>Fair enough, and I guess I forgot to replace it.</p>\n\n<p>But... the part that is really puzzling is when I pick a <strong>random .travis.yml</strong> on github and it has:</p>\n\n<pre><code>ANzomjrVPkzLO7MG9Zekl1Tz/Gxxx ... HmSQ3GRNPHMIRqf1xle+8/0IwDBuC/eTsOkit7WU1j9lgurCj8snXuTLUVEqf/SecAcLpmLrelRFvz//ZcOopIbwD66RJWT8pYGBH/L3MMIDFj1bIf0UIpXdBXgeTJhxW054+BhdFPGI66IvWU/kOlOcE606wqRqI9bdvop34OewJFnOQ9El...71dROWO4ETzz1wGXmO0dTVfCWMbqk7dT8OPft+tHsWWJqqeCEL3wj1uYEIYpCwLo9oSyVXwrhzRW0dysZfTCx/XfDaws3eFA6iMg6dUoBt12kwGZ5vCbgjBwPOmQrRMUEmYoyZz8n20HKojoxzUpwueFN/nbLv76arJbN8bLeb/GyE6r1Rw0DEzs8f0fBtv5agUnIpMh6EPOFYN4rwHMxt52HU7BB/Kg=\n</code></pre>\n\n<p>What is the point of adding a <em>secure password</em> to a file that you are uploading to github?  What does it do?  I thought the usual process was to log into github and then link your account to travis.  In which case both services ought to know how to authenticate you, if you're logged into either one, without having to go through a password in a public settings file.</p>\n\n<p>How dangerous/sensitive is this particular part of a github travis configuration?</p>\n\n<p>Can I do without it?</p>\n\n<p>The initial pypi package files were generated with CookieCutter cookiecutter-pypackage.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 1055, "user_id": 3805553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QQryi.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3805553/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1566898149, "creation_date": 1566898149, "answer_id": 57671622, "question_id": 57501733, "link": "https://stackoverflow.com/questions/57501733/how-to-average-rows-of-a-data-frame-based-the-value-in-a-particular-column/57671622#57671622", "title": "How to average rows of a data frame based the value in a particular column?", "body": "<p>For your example, you can use a <code>groupby</code> and then take the mean for every two rows. Translate this to your actual problem.</p>\n\n<pre><code>&gt;&gt;&gt; df.groupby(df.index // 2).mean()\n</code></pre>\n\n<p>Which returns</p>\n\n<pre><code>   Value1  Value2  Value3  Zeroing\n0     1.5     3.0     2.5     True\n1     3.5     7.0    12.5    False\n2     5.5    11.0    22.5    False\n3     7.5    15.0    32.5    False\n4     9.5    19.0    42.5    False\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5953471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2bac3aafb1fd89f2df9d3b2da331256?s=128&d=identicon&r=PG", "display_name": "Ben S.", "link": "https://stackoverflow.com/users/5953471/ben-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1566898149, "creation_date": 1565815077, "question_id": 57501733, "link": "https://stackoverflow.com/questions/57501733/how-to-average-rows-of-a-data-frame-based-the-value-in-a-particular-column", "title": "How to average rows of a data frame based the value in a particular column?", "body": "<p>My dataframe has a column named \"Zeroing\" which is either True or False, and it alternates. It's False for 12 rows then True for 48 rows. I'd like to make a new data frame where it's False for 1 row and True for 4, with all other columns averaged accordingly. I know for sure that it's a 12/48 pattern, but would like to use the condition just to be certain.</p>\n\n<p>Assume for brevity that it alternates True for 2 rows then False for 8 and I want to average every 2 rows. I would have:</p>\n\n<pre><code>&gt;&gt;&gt; df\n    Value1    Value2    Value3   Zeroing\n0        1         2         0      True\n1        2         4         5      True\n2        3         6        10     False\n3        4         8        15     False\n4        5        10        20     False\n5        6        12        25     False\n6        7        14        30     False\n7        8        16        35     False\n8        9        18        40     False\n9       10        20        45     False\n</code></pre>\n\n<p>I would like the output to be:</p>\n\n<pre><code>    &gt;&gt;&gt; df\n    Value1    Value2    Value3   Zeroing\n0      1.5         3       2.5      True\n1      3.5         7      12.5     False\n2      5.5        11      22.5     False\n3      7.5        15      32.5     False\n4      9.5        19      42.5     False\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1638, "user_id": 2616753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fbvWh.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/2616753/chris"}, "edited": false, "score": 0, "creation_date": 1565817400, "post_id": 57501717, "comment_id": 101473372, "body": "<code>pattern</code> is not a built-in library in Python. Have you installed it?"}, {"owner": {"reputation": 1, "user_id": 11929166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48290e2481b6031f37aa81abe37b257b?s=128&d=identicon&r=PG&f=1", "display_name": "eileenyuhan", "link": "https://stackoverflow.com/users/11929166/eileenyuhan"}, "reply_to_user": {"reputation": 1638, "user_id": 2616753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fbvWh.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/2616753/chris"}, "edited": false, "score": 0, "creation_date": 1565820549, "post_id": 57501717, "comment_id": 101474264, "body": "@chris yes I do install <code>pattern</code> and it works when I call <code>import pattern</code>, but it just not works when I try to call <code>from pattern.en import spelling</code>"}, {"owner": {"reputation": 1638, "user_id": 2616753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fbvWh.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/2616753/chris"}, "edited": false, "score": 1, "creation_date": 1565881612, "post_id": 57501717, "comment_id": 101491734, "body": "Hm, do you have a file named <code>pattern.py</code> in your working directory? If so, <code>import</code> will load that rather than the pip-installed library, so you need to rename the file. If not, please update your question with the results from <code>import pattern; print(dir(pattern))</code>"}, {"owner": {"reputation": 1, "user_id": 11929166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48290e2481b6031f37aa81abe37b257b?s=128&d=identicon&r=PG&f=1", "display_name": "eileenyuhan", "link": "https://stackoverflow.com/users/11929166/eileenyuhan"}, "reply_to_user": {"reputation": 1638, "user_id": 2616753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fbvWh.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/2616753/chris"}, "edited": false, "score": 0, "creation_date": 1565902819, "post_id": 57501717, "comment_id": 101500261, "body": "I don&#39;t have that. So I tried <code>print(dir(pattern))</code> and got <code>[&#39;__builtins__&#39;, &#39;__cached__&#39;, &#39;__doc__&#39;, &#39;__file__&#39;, &#39;__loader__&#39;, &#39;__name__&#39;, &#39;__package__&#39;, &#39;__path__&#39;, &#39;__spec__&#39;]</code>, but I still not understand why this happened"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1565903327, "post_id": 57501717, "comment_id": 101500407, "body": "what does <code>print(pattern.__file__)</code> print?"}, {"owner": {"reputation": 1, "user_id": 11929166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48290e2481b6031f37aa81abe37b257b?s=128&d=identicon&r=PG&f=1", "display_name": "eileenyuhan", "link": "https://stackoverflow.com/users/11929166/eileenyuhan"}, "edited": false, "score": 0, "creation_date": 1565905033, "post_id": 57501717, "comment_id": 101500943, "body": "I got a path <code>&#39;C:\\\\Users\\\\asus\\\\pattern\\\\__init__.py&#39;</code>"}], "owner": {"reputation": 1, "user_id": 11929166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48290e2481b6031f37aa81abe37b257b?s=128&d=identicon&r=PG&f=1", "display_name": "eileenyuhan", "link": "https://stackoverflow.com/users/11929166/eileenyuhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565904063, "creation_date": 1565814988, "last_edit_date": 1565904063, "question_id": 57501717, "link": "https://stackoverflow.com/questions/57501717/how-to-solve-no-module-named-pattern-text", "title": "How to solve &quot;No module named &#39;pattern.text&#39;&quot;", "body": "<p>I imported the pattern package successfully on python 3. However, when I tried to do \"from pattern.en import spelling\", it didn't work. </p>\n\n<p>Then I found someone says \"from pattern.text.en import spelling\" works for him so I tried and failed again.</p>\n\n<pre><code>from pattern.en import spelling\nfrom pattern.text.en import spelling\n</code></pre>\n\n<p>The error messages say \"No module named 'pattern.en'\" and \"No module named 'pattern.text'\".</p>\n\n<p>I using python 3.6 on windows and have not idea how to solve it.</p>\n\n<p>========================================================================\nupdate</p>\n\n<p>I tried </p>\n\n<pre><code>print(dir(pattern))\n</code></pre>\n\n<p>and got</p>\n\n<p><code>['__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__path__', '__spec__']</code></p>\n\n<p>I still have no idea why it doesn't have the attributes I need</p>\n"}, {"tags": ["python", "pandas", "numpy", "time-series"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 2, "creation_date": 1565814989, "post_id": 57501691, "comment_id": 101472663, "body": "<code>df.groupby(df[&#39;date&#39;].dt.hour).rolling(10).mean()</code>?"}, {"owner": {"reputation": 731, "user_id": 10754505, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ieBB_4KUajY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jGsPiBx7yiJj8dR1P7N2efhC3zvw/mo/photo.jpg?sz=128", "display_name": "Benoit Drogou", "link": "https://stackoverflow.com/users/10754505/benoit-drogou"}, "edited": false, "score": 0, "creation_date": 1565815149, "post_id": 57501691, "comment_id": 101472723, "body": "I would split in 2 df (workdays &amp; weekend days) and then use Quang Hoang answer"}, {"owner": {"reputation": 3745, "user_id": 574187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0afae9fd8525ee0e8c7016769da5b472?s=128&d=identicon&r=PG", "display_name": "ihadanny", "link": "https://stackoverflow.com/users/574187/ihadanny"}, "edited": false, "score": 0, "creation_date": 1565815396, "post_id": 57501691, "comment_id": 101472804, "body": "wow - that simple... thanks guys, didn&#39;t realize that you can groupby and then roll"}], "owner": {"reputation": 3745, "user_id": 574187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0afae9fd8525ee0e8c7016769da5b472?s=128&d=identicon&r=PG", "display_name": "ihadanny", "link": "https://stackoverflow.com/users/574187/ihadanny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565814892, "creation_date": 1565814892, "question_id": 57501691, "link": "https://stackoverflow.com/questions/57501691/pandas-a-rolling-window-of-hour-of-day-average", "title": "pandas: a rolling window of hour-of-day average", "body": "<p>related to: <a href=\"https://stackoverflow.com/questions/40209520/daily-data-resample-every-3-days-calculate-over-trailing-5-days-efficiently\">daily data, resample every 3 days, calculate over trailing 5 days efficiently</a> but the summing is over strided non-consecutive data.</p>\n\n<p>I have an hourly time series. For every hour I would like to have the average of the same hour of the day, in the last preceding 10 days window. E.g. at 2019-08-14 23:00, I would like to have an average of all 23:00 data from 2019-08-04 till 2019-08-13.</p>\n\n<p>Is there an efficient way to do so in pandas/numpy? Or should I roll my sleeves and write my own loops and data structures?</p>\n\n<p>Extra points: if today is a workday (Mon-Fri), the average should be for the previous 10 workdays. If it's a weekend (Sat-Sun), for the previous 10 weekend-days (span about 2.5 months)</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1197, "user_id": 6812804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae1c0aa9e42d14c65f58b36b03c1dc02?s=128&d=identicon&r=PG&f=1", "display_name": "trotta", "link": "https://stackoverflow.com/users/6812804/trotta"}, "edited": false, "score": 0, "creation_date": 1565815059, "post_id": 57501681, "comment_id": 101472681, "body": "Hard to say since we don&#39;t see your <code>file_names</code>. However, according to the traceback, you search the <code>file_map</code> dictionary for a key <code>t</code> when there is only a key with a capital <code>T</code>. You might want to change your keys or lookup the dictionary with capital letters only."}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1565815473, "post_id": 57501681, "comment_id": 101472840, "body": "Are you sure you want <code>ext = file_name[19]</code> in this form? This is a single character from the filename (Likely why you&#39;re seeing &quot;long string of letters in the shell that aren&#39;t needed&quot;)"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1565815956, "post_id": 57501681, "comment_id": 101472968, "body": "What about: <code>dest = os.path.join(path, parent_folder, file_map[ext.upper()], file_name)</code>?"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1565816411, "post_id": 57501681, "comment_id": 101473084, "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a> for tips on debugging your code."}, {"owner": {"reputation": 3, "user_id": 6549145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3685a2f83ba88a6c1c554225dbdb6a5?s=128&d=identicon&r=PG&f=1", "display_name": "WaveSprings", "link": "https://stackoverflow.com/users/6549145/wavesprings"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1565816825, "post_id": 57501681, "comment_id": 101473196, "body": "@G.Anderson I&#39;m not sure at all. I really struggled to get this single character out and couldn&#39;t find a different way to get it to work. Can you suggest a better way for me to do this please?"}, {"owner": {"reputation": 3, "user_id": 6549145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3685a2f83ba88a6c1c554225dbdb6a5?s=128&d=identicon&r=PG&f=1", "display_name": "WaveSprings", "link": "https://stackoverflow.com/users/6549145/wavesprings"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1565837807, "post_id": 57501681, "comment_id": 101477246, "body": "Thanks, @CristiFati. It&#39;s now returning a different KeyError - see edit."}, {"owner": {"reputation": 4256, "user_id": 5386938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H3KU09vCXj4/AAAAAAAAAAI/AAAAAAAAAQI/P8vlqd0SX5s/photo.jpg?sz=128", "display_name": "Justin Ezequiel", "link": "https://stackoverflow.com/users/5386938/justin-ezequiel"}, "edited": false, "score": 0, "creation_date": 1565842294, "post_id": 57501681, "comment_id": 101477857, "body": "Your key error shows a zero (0) and your file_map dictionary has a capital letter o (O)."}, {"owner": {"reputation": 3, "user_id": 6549145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3685a2f83ba88a6c1c554225dbdb6a5?s=128&d=identicon&r=PG&f=1", "display_name": "WaveSprings", "link": "https://stackoverflow.com/users/6549145/wavesprings"}, "reply_to_user": {"reputation": 4256, "user_id": 5386938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H3KU09vCXj4/AAAAAAAAAAI/AAAAAAAAAQI/P8vlqd0SX5s/photo.jpg?sz=128", "display_name": "Justin Ezequiel", "link": "https://stackoverflow.com/users/5386938/justin-ezequiel"}, "edited": false, "score": 0, "creation_date": 1565900274, "post_id": 57501681, "comment_id": 101499403, "body": "@JustinEzequiel, I&#39;m sorry, I&#39;m not exactly sure what that means. Can you elaborate on what the problem is please? All singular characters in the file_map are capital letters. I&#39;m not sure how that relates to the zero key error."}, {"owner": {"reputation": 4256, "user_id": 5386938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H3KU09vCXj4/AAAAAAAAAAI/AAAAAAAAAQI/P8vlqd0SX5s/photo.jpg?sz=128", "display_name": "Justin Ezequiel", "link": "https://stackoverflow.com/users/5386938/justin-ezequiel"}, "edited": false, "score": 0, "creation_date": 1565911426, "post_id": 57501681, "comment_id": 101502369, "body": "Your dictionary: <code>file_map = {&#39;O&#39;:&#39;1-Original&#39;,...}</code>; the error: <code>KeyError: &#39;0&#39;</code>; the code: <code>file_map[ext.upper()]</code>. All of which look like <code>ext=&#39;0&#39;</code>, a zero instead of <code>&#39;O&#39;</code>, the letter."}], "owner": {"reputation": 3, "user_id": 6549145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3685a2f83ba88a6c1c554225dbdb6a5?s=128&d=identicon&r=PG&f=1", "display_name": "WaveSprings", "link": "https://stackoverflow.com/users/6549145/wavesprings"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565837714, "creation_date": 1565814856, "last_edit_date": 1565837714, "question_id": 57501681, "link": "https://stackoverflow.com/questions/57501681/i-have-to-run-my-code-twice-to-get-desired-outcome-why", "title": "I have to run my code twice to get desired outcome, why?", "body": "<p>I'm finding that I have to run my code twice for the desired output and I'm not sure why. It's also printing a long string of letters in the shell that aren't needed. I'd just like it to be a bit cleaner.<br>\nThe code creates folders with subfolders, based on files names, then moves the files into specific subfolders.<br>\nFilename example is \"A123456-20190101-A01.mp3\"</p>\n\n<pre><code>import os  \nimport shutil\n\npath = \"/Volumes/ADATA UFD/For script/Files\"\nfile_names = [file for file in os.listdir(path) if \nos.path.isfile(os.path.join(path, file))]\nfile_map = {'O':'1-Original','P':'2-PreservationMaster','M':'3-Mezzanine','T':'4-Presentation','A':'5-Access','R':'6-Reference'}\n\nparent_folders = set(file_name.rsplit('-', 1)[0] for file_name in file_names)\nsub_folders = ['1-Original','2-PreservationMaster','3-Mezzanine','4-Presentation','5-Access','6-Reference']\n\nfor folder in parent_folders:\nfolder_path = os.path.join(path, folder)\n\ntry:\n    os.mkdir(folder_path)\nexcept:\n    print('folder already exist:', folder_path)\n\nfor folders in sub_folders:\n    try:\n        folders_path = os.path.join(folder_path, folders)\n        os.mkdir(folders_path)\n    except:\n        print('folder already exists:', folders_path)\n\nfor file_name in file_names:\n    parent_folder = file_name.rsplit('-', 1)[0]\n    ext = file_name[19]\n    print(ext)\n    dest = os.path.join(path, parent_folder, file_map[ext.upper()], file_name)\n    src = os.path.join(path, file_name)\n    try:\n        shutil.move(src, dest)\n    except Exception as e:\n        print(e)\n</code></pre>\n\n<p>I'm getting this error message:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>Traceback (most recent call last):  \nFile \"/Volumes/ADATA UFD/For script/MoveFilesToPreservationBundleTest3.py\", line 30, in &lt;module&gt;  \ndest = os.path.join(path, parent_folder, file_map[ext.upper()], file_name)  \nbuiltins.KeyError: '0'\n</code></pre>\n"}, {"tags": ["python", "flask", "py2neo"], "answers": [{"tags": [], "owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "is_accepted": false, "score": 0, "last_activity_date": 1565825280, "creation_date": 1565825280, "answer_id": 57503217, "question_id": 57501676, "link": "https://stackoverflow.com/questions/57501676/atomic-transactions-using-flask-before-request-and-after-request/57503217#57503217", "title": "Atomic transactions using Flask before_request and after_request", "body": "<p>I found a solution. All I had to do is to use <strong>flask</strong> <code>g</code> object to store <code>tx</code> so it can be available for all methods called along the request:</p>\n\n<pre><code>from flask import Flask, request, app, g\nfrom flask_restful import Resource, Api, abort\nfrom werkzeug.wrappers import Request\nfrom py2neo import Graph\nimport models\n\napp = Flask(__name__)\napi = Api(app)\n\ndef get_db():\n    return Graph(password=\"SteppenWolf1\")\n\ngraph = get_db()\n\n@app.before_request\ndef before_request():\n    g.tx = graph.begin()\n\n@app.after_request\ndef after_request(response):\n    tx = g.get('tx')\n    if response.status_code &gt;= 400:\n        tx.rollback()\n    else:\n        tx.commit()\n\n    return response\n</code></pre>\n"}], "owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 651, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565825280, "creation_date": 1565814834, "question_id": 57501676, "link": "https://stackoverflow.com/questions/57501676/atomic-transactions-using-flask-before-request-and-after-request", "title": "Atomic transactions using Flask before_request and after_request", "body": "<p>I am trying to make <strong>py2neo</strong> transactions with <strong>Flask</strong> atomic by means of using <code>before_request</code> to start a transaction and <code>after_request</code> to commit or rollback, depending on the response status code.</p>\n\n<p>This is my code:</p>\n\n<pre><code>from flask import Flask, request, app, g\nfrom flask_restful import Resource, Api, abort\nfrom werkzeug.wrappers import Request\nfrom py2neo import Graph\nimport models\n\napp = Flask(__name__)\napi = Api(app)\n\ndef get_db():\n    return Graph(password=\"secret\")\n\ngraph = get_db()\ntx = None\n\n@app.before_request\ndef before_request():\n    tx = graph.begin()\n\n@app.after_request\ndef after_request(response):\n    if response.status_code &gt;= 400:\n        tx.rollback()\n    else:\n        tx.commit() # Error line\n</code></pre>\n\n<p>The problem is that modifications to module variable <code>tx</code> made on <code>before_request</code> seem not to be noticeable by <code>after_request</code>, so I get this error:</p>\n\n<pre><code>AttributeError: 'NoneType' object has no attribute 'commit'\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 17725, "user_id": 2628879, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/763e4726ca8e0ffbacc058380483a016?s=128&d=identicon&r=PG", "display_name": "aris", "link": "https://stackoverflow.com/users/2628879/aris"}, "edited": false, "score": 0, "creation_date": 1565828079, "post_id": 57501656, "comment_id": 101475653, "body": "You have to work on one error at a time (read and post the error message that Django gives you). You have multiple errors in your code."}], "answers": [{"comments": [{"owner": {"reputation": 328, "user_id": 7474631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V4DF0.jpg?s=128&g=1", "display_name": "Sreenath", "link": "https://stackoverflow.com/users/7474631/sreenath"}, "edited": false, "score": 0, "creation_date": 1565821312, "post_id": 57501810, "comment_id": 101474453, "body": "Good answer  But context must be a dict  <code>context  = {&#39;Account&#39; : &#39;student&#39;}</code>"}, {"owner": {"reputation": 380, "user_id": 8488594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vw0c4.jpg?s=128&g=1", "display_name": "Mohammad Moallemi", "link": "https://stackoverflow.com/users/8488594/mohammad-moallemi"}, "reply_to_user": {"reputation": 328, "user_id": 7474631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V4DF0.jpg?s=128&g=1", "display_name": "Sreenath", "link": "https://stackoverflow.com/users/7474631/sreenath"}, "edited": false, "score": 0, "creation_date": 1565850174, "post_id": 57501810, "comment_id": 101479285, "body": "well that&#39;s what i said in that code context is string look at the question so i corrected it and said it should be dictionary instead of string"}], "tags": [], "owner": {"reputation": 380, "user_id": 8488594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vw0c4.jpg?s=128&g=1", "display_name": "Mohammad Moallemi", "link": "https://stackoverflow.com/users/8488594/mohammad-moallemi"}, "is_accepted": false, "score": 1, "last_activity_date": 1565815495, "creation_date": 1565815495, "answer_id": 57501810, "question_id": 57501656, "link": "https://stackoverflow.com/questions/57501656/differentiate-between-account-types-in-django/57501810#57501810", "title": "Differentiate between &#39;account types&#39; in Django", "body": "<p>it would be better if you posted your exception/error alongside your code</p>\n\n<p>but here's some hint:\ncontext parameter passed to render function should be a dictionary not an string</p>\n\n<pre><code>context = {'Account: Student'}\n</code></pre>\n\n<p>and you should access to user with <em>request.user</em> not just <em>user</em></p>\n\n<p>if problems above didn't solve your problem\nadd these two lines of code at the beginning of your function:</p>\n\n<pre><code>print(request.user.student)\nprint(request.user.employer)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11928952, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R-5EZX6QKvU/AAAAAAAAAAI/AAAAAAAAAYM/fY3SXXgiijo/photo.jpg?sz=128", "display_name": "Luca Frost", "link": "https://stackoverflow.com/users/11928952/luca-frost"}, "edited": false, "score": 0, "creation_date": 1565842840, "post_id": 57501816, "comment_id": 101477956, "body": "Thank you so much for your suggestion! I really appreciate it :)"}], "tags": [], "owner": {"reputation": 61, "user_id": 8836745, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5nEyMeW2ass/AAAAAAAAAAI/AAAAAAAAADI/arNzgS1xZ4I/photo.jpg?sz=128", "display_name": "Morteza Afshari", "link": "https://stackoverflow.com/users/8836745/morteza-afshari"}, "is_accepted": false, "score": 0, "last_activity_date": 1565815524, "creation_date": 1565815524, "answer_id": 57501816, "question_id": 57501656, "link": "https://stackoverflow.com/questions/57501656/differentiate-between-account-types-in-django/57501816#57501816", "title": "Differentiate between &#39;account types&#39; in Django", "body": "<p>You can have an boolean field in user model like <code>is_student</code> and fill it during sign in. It can be <code>null=True</code> and null when user signed out. </p>\n\n<p>If you have jwt token, you can store additional data in token to check where it comes from, or either store user current role in its cookie. Get us more data about your site structure for more related answers. (Data about authentication system, database structure or any more structural behaviors)</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 11928952, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R-5EZX6QKvU/AAAAAAAAAAI/AAAAAAAAAYM/fY3SXXgiijo/photo.jpg?sz=128", "display_name": "Luca Frost", "link": "https://stackoverflow.com/users/11928952/luca-frost"}, "edited": false, "score": 0, "creation_date": 1565842967, "post_id": 57502608, "comment_id": 101477976, "body": "This is wonderful and much cleaner than before, thank you very much. I&#39;m in the process of implementing this, but I keep getting the error &quot;type object &#39;User&#39; has no attribute &#39;is_student&#39;&#39;, any suggestions on how to fix this? Thanks :)"}, {"owner": {"reputation": 505, "user_id": 4238785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000627732575/picture?type=large", "display_name": "Jon Hrovat", "link": "https://stackoverflow.com/users/4238785/jon-hrovat"}, "reply_to_user": {"reputation": 13, "user_id": 11928952, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R-5EZX6QKvU/AAAAAAAAAAI/AAAAAAAAAYM/fY3SXXgiijo/photo.jpg?sz=128", "display_name": "Luca Frost", "link": "https://stackoverflow.com/users/11928952/luca-frost"}, "edited": false, "score": 0, "creation_date": 1565844181, "post_id": 57502608, "comment_id": 101478147, "body": "Do you have any pre existing users?"}, {"owner": {"reputation": 13, "user_id": 11928952, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R-5EZX6QKvU/AAAAAAAAAAI/AAAAAAAAAYM/fY3SXXgiijo/photo.jpg?sz=128", "display_name": "Luca Frost", "link": "https://stackoverflow.com/users/11928952/luca-frost"}, "edited": false, "score": 0, "creation_date": 1565848581, "post_id": 57502608, "comment_id": 101478915, "body": "I&#39;ve wiped the existing profiles which would have been configured without the &#39;is_student&#39; attribute and created a new one but I&#39;m still getting the same error. I have a feeling that Django can&#39;t find the attribute &#39;is_student&#39; as the model that contains this is just an extension of the Django.auth.contrib user model, it&#39;s not inherently associated. Is this correct? Potentially I&#39;ll need to override the default &#39;user&#39; model in settings.py for this to take affect."}], "tags": [], "owner": {"reputation": 505, "user_id": 4238785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000627732575/picture?type=large", "display_name": "Jon Hrovat", "link": "https://stackoverflow.com/users/4238785/jon-hrovat"}, "is_accepted": true, "score": 0, "last_activity_date": 1565820057, "creation_date": 1565820057, "answer_id": 57502608, "question_id": 57501656, "link": "https://stackoverflow.com/questions/57501656/differentiate-between-account-types-in-django/57502608#57502608", "title": "Differentiate between &#39;account types&#39; in Django", "body": "<p>As Morteza Afshari said, you should reorganize your models to include a boolean field.</p>\n\n<pre><code>class CustomUser(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    profilePic = models.ImageField(default='default.jpg', upload_to='profile_pics')\n    is_student = models.BooleanField(default=True)\n    class Meta:\n        verbose_name = 'Profile'\n    def __str__(self):\n        return f\"{self.user.username}'s Profile\"\n</code></pre>\n\n<p>This follows the DRY principle much better than your prior code because now we're not repeating fields like user, profilePic, etc.</p>\n\n<p>Now we can rewrite your views.py like this:</p>\n\n<pre><code>def account(request):\nif user.is_student:\n   context = 'Account: Student'\n   return render(request, 'users/studentprofile.html', context)\n\nelse:\n   context = 'Account: Employer'\n   return render(request, 'users/employer.html', context)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11928952, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R-5EZX6QKvU/AAAAAAAAAAI/AAAAAAAAAYM/fY3SXXgiijo/photo.jpg?sz=128", "display_name": "Luca Frost", "link": "https://stackoverflow.com/users/11928952/luca-frost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 57502608, "answer_count": 3, "score": 0, "last_activity_date": 1565820057, "creation_date": 1565814771, "question_id": 57501656, "link": "https://stackoverflow.com/questions/57501656/differentiate-between-account-types-in-django", "title": "Differentiate between &#39;account types&#39; in Django", "body": "<p>Thanks in advance if you're reading this... I'm a High School student working on a web application using Django, to help students find internships, and facilitate parents posting internship offers -- a sort of marketplace if you will.</p>\n\n<p>I'm trying to create a profile/account page for the users but I need a way to differentiate between whether the account logged in is a Student or Employer so that I can use views.py to generate a page appropriate to their account.</p>\n\n<p>In models.py, I have two different profile types which can be associated with a user account (handled by django.contrib.auth), see below for reference.</p>\n\n<pre><code>class Student(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    profilePic = models.ImageField(default='default.jpg', upload_to='profile_pics')\n    class Meta:\n        verbose_name = 'Student Profile'\n    def __str__(self):\n        return f\"{self.user.username}'s Profile\"\n\nclass Employer(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    profilePic = models.ImageField(default='default.jpg', upload_to='profile_pics')\n    company = models.CharField(max_length=100, default='Unspecified')\n    class Meta:\n        verbose_name = 'Employer/Parent Profile'\n    def __str__(self):\n        return f\"{self.user.username}'s Profile\"\n</code></pre>\n\n<p>In my views.py page, I'm trying to create a view for the account/profile that can detect whether the currently logged-in user's profile is linked to either the 'Student' or 'Parent' model and serve a page accordingly. I've tried a very rudimentary approach, as below, but unsurprisingly it's not working.</p>\n\n<pre><code>def account(request):\nif user.student.username == True:\n    context = 'Account: Student'\n    return render(request, 'users/studentprofile.html', context)\n\nelif user.employer.username == True:\n    context = 'Account: Employer'\n    return render(request, 'users/employer.html', context)\n</code></pre>\n\n<p>I was wondering if anyone had a suggestion as to how I can best accomplish this... apologies in advance is this approach is poorly structured or against the status-quo of Django Programming, I'm a complete beginner!</p>\n\n<p>Thanks in advance all :)</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 4, "creation_date": 1565814627, "post_id": 57501627, "comment_id": 101472528, "body": "Post what have you tired so far."}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 1, "creation_date": 1565815100, "post_id": 57501627, "comment_id": 101472701, "body": "This looks like <a href=\"https://rosettacode.org/wiki/Image_convolution#Python\" rel=\"nofollow noreferrer\">kernel convolution</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": false, "score": 2, "last_activity_date": 1565815216, "creation_date": 1565815216, "answer_id": 57501761, "question_id": 57501627, "link": "https://stackoverflow.com/questions/57501627/neighbour-cells-of-a-matrix/57501761#57501761", "title": "Neighbour Cells of a matrix", "body": "<p>One approach is to treat this as a 2-D convolution problem. You just need to define the appropriate mask.</p>\n\n<p>In this case, you can use a 3x3 matrix of ones and zero out the center element.</p>\n\n<pre><code>import numpy as np\n\nmask = np.ones((3, 3))\nmask[1, 1] = 0\nprint(mask)\n#[[1. 1. 1.]\n# [1. 0. 1.]\n# [1. 1. 1.]]\n</code></pre>\n\n<p>Now to the convolution:</p>\n\n<pre><code>from scipy.signal import convolve2d\nprint(convolve2d(grid, mask, mode='same'))\n#[[3. 5. 5. 3.]\n# [5. 8. 8. 5.]\n# [5. 8. 8. 5.]\n# [3. 5. 5. 3.]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 269, "user_id": 11460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6deb44d76874cdb41bc049f23c42dc?s=128&d=identicon&r=PG&f=1", "display_name": "GrayLiterature", "link": "https://stackoverflow.com/users/11460992/grayliterature"}, "edited": false, "score": 0, "creation_date": 1565816338, "post_id": 57501872, "comment_id": 101473065, "body": "This is the one that I think best suits my needs for the time being. As someone pretty noobish to programming in general, it&#39;s good to be able to see how this can be done in a more detailed way."}], "tags": [], "owner": {"reputation": 197, "user_id": 2443845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e25cf44b1296ef8b5dcc9273d483d21?s=128&d=identicon&r=PG", "display_name": "jgsedi", "link": "https://stackoverflow.com/users/2443845/jgsedi"}, "is_accepted": true, "score": 1, "last_activity_date": 1565815834, "creation_date": 1565815834, "answer_id": 57501872, "question_id": 57501627, "link": "https://stackoverflow.com/questions/57501627/neighbour-cells-of-a-matrix/57501872#57501872", "title": "Neighbour Cells of a matrix", "body": "<p>I found that solution - quick and dirty :)</p>\n\n<pre><code>grid = [ [1, 1, 1, 1],\n         [1, 1, 1, 1],\n         [1, 1, 1, 1],\n         [1, 1, 1, 1] ]\n\nrows = len(grid)\ncols = len(grid[0])\n\ndef get_sum_of_neighbours(grid, r, c):\n    neighbours = [\n        (r - 1, c - 1), (r - 1, c), (r - 1, c + 1),\n        (r, c - 1), (r, c + 1),\n        (r + 1, c - 1), (r + 1, c), (r + 1, c + 1),\n    ]\n    return sum([grid[r_n][c_n]\n                for r_n, c_n in neighbours\n                if 0 &lt;= r_n &lt; rows and 0 &lt;= c_n &lt; cols])\n\nresultgrid = []\nfor r in range(rows):\n    row = []\n    for c in range(cols):\n        row.append(get_sum_of_neighbours(grid, r, c))\n    resultgrid.append(row)\n\nfor row in resultgrid:\n    print(row)\n</code></pre>\n\n<p>without third party tools like scipy or numpy...</p>\n"}], "owner": {"reputation": 269, "user_id": 11460992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6deb44d76874cdb41bc049f23c42dc?s=128&d=identicon&r=PG&f=1", "display_name": "GrayLiterature", "link": "https://stackoverflow.com/users/11460992/grayliterature"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 57501872, "answer_count": 2, "score": 0, "last_activity_date": 1565815834, "creation_date": 1565814584, "question_id": 57501627, "link": "https://stackoverflow.com/questions/57501627/neighbour-cells-of-a-matrix", "title": "Neighbour Cells of a matrix", "body": "<p>Suppose I have a matrix called \"grid\": </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>grid = [ [1, 1, 1, 1],\n         [1, 1, 1, 1],\n         [1, 1, 1, 1],\n         [1, 1, 1, 1] ]\n</code></pre>\n\n<p>I want to try and define a function that takes the contents of each neighbour in a 1 cell radius and add those values into a new matrix like so: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>grid = [ [3, 5, 5, 3],\n         [5, 8, 8, 5],\n         [5, 8, 8, 5],\n         [3, 5, 5, 3] ]\n</code></pre>\n"}, {"tags": ["python", "csv", "delete-row"], "answers": [{"tags": [], "owner": {"reputation": 62, "user_id": 11217807, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oUhhXlR4UHE/AAAAAAAAAAI/AAAAAAAAAsE/gYE3THG99uE/photo.jpg?sz=128", "display_name": "ryan yang", "link": "https://stackoverflow.com/users/11217807/ryan-yang"}, "is_accepted": false, "score": 0, "last_activity_date": 1567105123, "creation_date": 1567105123, "answer_id": 57716355, "question_id": 57501615, "link": "https://stackoverflow.com/questions/57501615/i-need-to-be-able-to-delete-bookingsrows-from-a-csv-file/57716355#57716355", "title": "I need to be able to delete bookings(rows) from a CSV file", "body": "<p>For csv files, I don't think you can delete certain rows, you would have to read in the csv file and output a new csv file. If you need deletions, I would recommend a database of some kind instead.</p>\n"}], "owner": {"reputation": 9, "user_id": 8221414, "user_type": "registered", "profile_image": "https://graph.facebook.com/1789787157766515/picture?type=large", "display_name": "Charlie Hutty", "link": "https://stackoverflow.com/users/8221414/charlie-hutty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1567105123, "creation_date": 1565814546, "question_id": 57501615, "link": "https://stackoverflow.com/questions/57501615/i-need-to-be-able-to-delete-bookingsrows-from-a-csv-file", "title": "I need to be able to delete bookings(rows) from a CSV file", "body": "<p>In my DeleteBookings function, I want to be able to delete booking that are stored in rows in a CSV file. I want to be able to delete a certain row off of the file without effecting any of the others.</p>\n\n<p>Every thing I have tried has ended up deleting the entire file itself.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def DeleteBookings():\n    username = input(\"What is your name: \")\n    username = username.lower()\n    # Open the csv file\n    with open('ExistingBookings.csv') as csvfile:\n        reader = csv.reader(csvfile)\n        i = 1\n        for row in reader:\n            name = str(row[0])\n            roomtobook = str(row[1])\n            datestart_str = str(row[2])\n            enddate = str(row[3])\n            timetsart_str = str(row[4])\n            endtime = str(row[5])\n            if username == name:\n                print('\\n', 'Meeting:', i, '\\n', \"Room: \", roomtobook, '\\n', \"Start Date: \", datestart_str, '\\n', \"End date: \", enddate, '\\n', \"Start time: \", timetsart_str, '\\n', \"End time: \", endtime, '\\n')\n                i = i + 1\n        meetingtodelete = input(\"What is the number of the meeting you would like to delete: \")\n</code></pre>\n\n<p>This is the data in my CSV</p>\n\n<pre><code>john,1,13/08/2019,13/08/2019,1200,1230\njeff,2,13/08/2019,14/08/2019,1230,1100\nben,4,29/08/2019,29/08/2019,1400,1500\n</code></pre>\n\n<p>I want it so that the each meeting is outputted with a specific number. If the user types in this number, that meeting is deleted and that row is written over.</p>\n"}, {"tags": ["python", "flask", "mongoengine"], "answers": [{"comments": [{"owner": {"reputation": 3082, "user_id": 6203472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b50d1e339fca4b7a10b74d856a0e790e?s=128&d=identicon&r=PG&f=1", "display_name": "bagerard", "link": "https://stackoverflow.com/users/6203472/bagerard"}, "edited": false, "score": 0, "creation_date": 1566279350, "post_id": 57505592, "comment_id": 101595375, "body": "Did it help? Happy to assist further if not"}], "tags": [], "owner": {"reputation": 3082, "user_id": 6203472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b50d1e339fca4b7a10b74d856a0e790e?s=128&d=identicon&r=PG&f=1", "display_name": "bagerard", "link": "https://stackoverflow.com/users/6203472/bagerard"}, "is_accepted": false, "score": 1, "last_activity_date": 1572206265, "last_edit_date": 1572206265, "creation_date": 1565850259, "answer_id": 57505592, "question_id": 57501612, "link": "https://stackoverflow.com/questions/57501612/mongoengine-property-causes-multiple-loading-of-user-model/57505592#57505592", "title": "Mongoengine @property causes multiple loading of user model", "body": "<p>The @property of python are simply convenient getter, they don\u2019t cache the returned value by default. Caching the returned value can be achieved with the following pattern.</p>\n\n<pre><code>class User():\n    def __init__(self):\n        self._score = None\n\n    @property\n    def score(self):\n        if self._score is None:\n            self._score = self.get_from_cache()\n        return self._score\n\n    def get_from_cache(self):\n        print(\u201cfake call to cache\u201d)\n        return 1000\n</code></pre>\n\n<p>The example here is plain python, but applying that to a MongoEngine Document class is very similar ( constructor will differ as you ll need to call super)</p>\n"}], "owner": {"reputation": 43, "user_id": 10879927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a3ba38ec05e53b5e0cfba2d72624146?s=128&d=identicon&r=PG&f=1", "display_name": "ThomasFromTheNetherlands", "link": "https://stackoverflow.com/users/10879927/thomasfromthenetherlands"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572206265, "creation_date": 1565814531, "last_edit_date": 1565853498, "question_id": 57501612, "link": "https://stackoverflow.com/questions/57501612/mongoengine-property-causes-multiple-loading-of-user-model", "title": "Mongoengine @property causes multiple loading of user model", "body": "<p>I am adding several properties to my user model by the @property function. Basicaly what it does is doing a call to the cache to retrieve some data which is not in the DB.</p>\n\n<p>What I found was that when I am calling one of the attributes, set by @property, from the flask html template, the property method gets executed again.</p>\n\n<p>I will try to explain it:</p>\n\n<p>First, the user model (it has more fields, but this is not relevant):</p>\n\n<pre><code>class User(db.Document,UserMixin):\ncreation_date = db.DateTimeField(required=True, default=datetime.now)\nactivation_code = db.StringField()\nemail = db.EmailField(required=True,unique=True)\nname = db.DictField(required=True)\npassword = db.StringField(required=True)\n\n@property\ndef score(self):\n    x = redis_userScore.get(str(self.id))\n    return x\n\n@property\ndef questionCount(self):\n    print('Thomas')\n    x = redis_questionsPerUser.zscore('questions', str(self.id))\n    return x\n</code></pre>\n\n<p>Now I added a simple print statement to the @property to test how many times it is run.</p>\n\n<p>In an empty template, this zero. But now in my template, I for instance call:</p>\n\n<pre><code>{{ (current_user.score) }}\n</code></pre>\n\n<p>Now I see this print statement being printed. Now I change the template and it looks like this:</p>\n\n<pre><code>{{ (current_user.score) }}\n{{ (current_user.score) }}\n</code></pre>\n\n<p>The print statement is there twice! The function has been run twice. </p>\n\n<p>This tells me that everytime I am using one of the attributes under @property in the template, it gets run. This makes the application unnecessarily slow. I had expected the attributes to behave the same as the 'normal' ones, like name, email etc. So when I load current_user, the attributes are added and can be used without running it again.</p>\n\n<p>How can I add the extra field to the model, without running it every time it gets called? Just like it works for the other, 'normal', fields.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "sql", "api", "flask", "sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 11718161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e046265c4785bfaf17a3b6284d92832?s=128&d=identicon&r=PG&f=1", "display_name": "zama", "link": "https://stackoverflow.com/users/11718161/zama"}, "is_accepted": false, "score": 0, "last_activity_date": 1565820642, "last_edit_date": 1565820642, "creation_date": 1565820028, "answer_id": 57502602, "question_id": 57501604, "link": "https://stackoverflow.com/questions/57501604/having-issues-doing-fast-enough-db-inserts-inside-a-flask-endpoint/57502602#57502602", "title": "Having issues doing fast enough db inserts inside a Flask endpoint", "body": "<p>Your error message indicates that you are using an sqlite DB with SQLAlchemy. You may want to try changing the setting of the sqlite \"synchronous\" flag to turn syncing OFF. This can speed INSERT queries up dramatically, but it does come with the increased risk of data loss. See <a href=\"https://sqlite.org/pragma.html#pragma_synchronous\" rel=\"nofollow noreferrer\">https://sqlite.org/pragma.html#pragma_synchronous</a> for more details.</p>\n\n<blockquote>\n  <p>With synchronous OFF (0), SQLite continues without syncing as soon as\n  it has handed data off to the operating system. If the application\n  running SQLite crashes, the data will be safe, but the database might\n  become corrupted if the operating system crashes or the computer loses\n  power before that data has been written to the disk surface. On the\n  other hand, commits can be orders of magnitude faster with synchronous\n  OFF</p>\n</blockquote>\n\n<p>If your application and use case can tolerate the increased risks, then disabling syncing may negate the need for bulk inserts.</p>\n\n<p>See \"How to set SQLite PRAGMA statements with SQLAlchemy\": <a href=\"https://stackoverflow.com/questions/9671490/how-to-set-sqlite-pragma-statements-with-sqlalchemy\">How to set SQLite PRAGMA statements with SQLAlchemy</a></p>\n"}, {"tags": [], "owner": {"reputation": 162, "user_id": 11903777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75e5498a9c368ff1c2a773fdf2cd07fa?s=128&d=identicon&r=PG&f=1", "display_name": "Shishir", "link": "https://stackoverflow.com/users/11903777/shishir"}, "is_accepted": false, "score": -1, "last_activity_date": 1565820290, "creation_date": 1565820290, "answer_id": 57502645, "question_id": 57501604, "link": "https://stackoverflow.com/questions/57501604/having-issues-doing-fast-enough-db-inserts-inside-a-flask-endpoint/57502645#57502645", "title": "Having issues doing fast enough db inserts inside a Flask endpoint", "body": "<p>Not an expert on this, but seems like database has reached its concurrency limits. You can try using Pony for better concurrency and transaction management</p>\n\n<p><a href=\"https://docs.ponyorm.org/transactions.html\" rel=\"nofollow noreferrer\">https://docs.ponyorm.org/transactions.html</a> </p>\n\n<blockquote>\n  <p>By default Pony uses the optimistic concurrency control concept for increasing performance. With this concept, Pony doesn\u2019t acquire locks on database rows. Instead it verifies that no other transaction has modified the data it has read or is trying to modify.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 1317551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb4ba0f65fdc13c4aa2c2aa66efd8e19?s=128&d=identicon&r=PG", "display_name": "Andrei Buruntia", "link": "https://stackoverflow.com/users/1317551/andrei-buruntia"}, "is_accepted": true, "score": 0, "last_activity_date": 1566219732, "creation_date": 1566219732, "answer_id": 57557311, "question_id": 57501604, "link": "https://stackoverflow.com/questions/57501604/having-issues-doing-fast-enough-db-inserts-inside-a-flask-endpoint/57557311#57557311", "title": "Having issues doing fast enough db inserts inside a Flask endpoint", "body": "<p>Once I moved the code on AWS and used the Aurora instance as the database, the problems went away, so I suppose it's safe to conclude that the issue were solely related to my sqlite3 instance.</p>\n\n<p>The final solution gave me satisfactory results and I ended up changing only this line:</p>\n\n<blockquote>\n  <p>db.session.bulk_save_objects(bulk)</p>\n</blockquote>\n\n<p>to this:</p>\n\n<blockquote>\n  <p>db.session.save_all(bulk)</p>\n</blockquote>\n\n<p>I can now safely do up to 400 or more (haven't tested for more) calls on that specific endpoints, all ending with valid inserts, per second.</p>\n"}], "owner": {"reputation": 113, "user_id": 1317551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb4ba0f65fdc13c4aa2c2aa66efd8e19?s=128&d=identicon&r=PG", "display_name": "Andrei Buruntia", "link": "https://stackoverflow.com/users/1317551/andrei-buruntia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 57557311, "answer_count": 3, "score": -1, "last_activity_date": 1566219732, "creation_date": 1565814495, "question_id": 57501604, "link": "https://stackoverflow.com/questions/57501604/having-issues-doing-fast-enough-db-inserts-inside-a-flask-endpoint", "title": "Having issues doing fast enough db inserts inside a Flask endpoint", "body": "<p>I have an HTTP POST endpoint in Flask which needs to insert whatever data comes in into a database. This endpoint can receive up to hundreds of requests per second. Doing an insert every time a new request comes takes too much time. I have thought that doing a bulk insert every 1000 request with all the previous 1000 request data should work like some sort of caching mechanism. I have tried saving 1000 incoming data objects into some collection and then doing a bulk insert once the array is 'full'. </p>\n\n<p>Currently my code looks like this:</p>\n\n<pre><code>@app.route('/user', methods=['POST'])\ndef add_user():\n    firstname = request.json['firstname']\n    lastname = request.json['lastname']\n    email = request.json['email']\n\n    usr = User(firstname, lastname, email)\n\n    global bulk\n    bulk.append(usr)\n    if len(bulk) &gt; 1000:\n        bulk = []\n        db.session.bulk_save_objects(bulk)\n        db.session.commit()\n\n    return user_schema.jsonify(usr)\n</code></pre>\n\n<p>The problem I'm having with this is that the database becomes 'locked', and I really don't know if this is a good solution but just poorly implemented, or a stupid idea.</p>\n\n<pre><code>sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) database is locked\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "numpy", "for-loop", "list-comprehension"], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 11010294, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kLti6nEj6Cc/AAAAAAAAAAI/AAAAAAAAACQ/cbkP9TWwapw/photo.jpg?sz=128", "display_name": "pi242", "link": "https://stackoverflow.com/users/11010294/pi242"}, "is_accepted": true, "score": 0, "last_activity_date": 1565819521, "last_edit_date": 1565819521, "creation_date": 1565819199, "answer_id": 57502471, "question_id": 57501591, "link": "https://stackoverflow.com/questions/57501591/how-to-add-elements-to-np-array-with-several-conditions/57502471#57502471", "title": "How to add elements to np.array with several conditions?", "body": "<p>You are appending all the computed values to the same list. In this particular case, you should instead do:</p>\n\n<pre><code>f1 = [[[25 if d_min&lt;item&lt;d_mean else 75 if d_mean&lt;item&lt; d_max else 0 if item == d_min else 100 for item in in_list] for in_list in out_list] for out_list in d]\n</code></pre>\n\n<p>You can also do the same computation by using numpy comparison and addition:</p>\n\n<pre><code>f1 = 25 * (d &gt; d_min) * (d &lt; d_mean) + 75 * (d &lt; d_max) * (d &gt; d_mean) + 0 * (d == d_min) + 100 * (d == d_max)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11857874, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RmU_MHreOiE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd3CRY5oJEPFsfywiYkOKwtyXU7bg/photo.jpg?sz=128", "display_name": "Inrx", "link": "https://stackoverflow.com/users/11857874/inrx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 57502471, "answer_count": 1, "score": 1, "last_activity_date": 1565819943, "creation_date": 1565814449, "last_edit_date": 1565819943, "question_id": 57501591, "link": "https://stackoverflow.com/questions/57501591/how-to-add-elements-to-np-array-with-several-conditions", "title": "How to add elements to np.array with several conditions?", "body": "<p>I need help to solve the following problem:</p>\n\n<p>First create an empty array <code>f</code> with the same shape (i.e. 2x3x5) as <code>d</code> using <code>np.empty</code>.\nPopulate the values in <code>f</code>. For each value in <code>d</code> :</p>\n\n<ul>\n<li>if it's larger than <code>d_min</code> but smaller than <code>d_mean</code>, assign <strong>25</strong> to the corresponding value in <code>f</code>. </li>\n<li>if a value in <code>d</code> is larger than <code>d_mean</code> but smaller than <code>d_max</code>, assign <strong>75</strong> to the corresponding value in <code>f</code>.</li>\n<li><p>if a value equals to <code>d_mean</code>, assign <strong>50</strong> to the corresponding value in <code>f</code>. </p></li>\n<li><p>assign <strong>0</strong> to the corresponding value(s) in <code>f</code> for <code>d_min</code> in <code>d</code>. </p></li>\n<li><p>assign <strong>100</strong> to the corresponding value(s) in <code>f</code> for <code>d_max</code> in <code>d</code>. </p></li>\n</ul>\n\n<p>I am trying to use list comprehensions to do this, instead of for loops. </p>\n\n<p>This is what I did:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nf = np.empty([2,3,5])\nf1 = [25 if d_min&lt;item&lt;d_mean else 75 if d_mean&lt;item&lt; d_max else 0 if item == d_min else 100 for out_list in d for in_list in out_list for item in in_list]\nprint(f1)\n</code></pre>\n\n<p>This is what I get:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[75, 75, 25, 25, 25, 25, 75, 75, 75, 25, 25, 100, 25, 25, 25, 75, 75, 75, 25, 75, 75, 75, 75, 25, 0, 25, 75, 75, 25, 75]\n</code></pre>\n\n<p>The final result should be something like this: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>array([[[ 75.,  75.,  75.,  25.,  75.],\n        [ 75.,  75.,  25.,  25.,  25.],\n        [ 75.,  25.,  75.,  75.,  75.]],\n\n       [[ 25.,  25.,  25.,  25., 100.],\n        [ 75.,  75.,  75.,  75.,  75.],\n        [ 25.,  75.,   0.,  75.,  75.]]])\n</code></pre>\n\n<p>Can you help me find the problem?</p>\n"}, {"tags": ["python", "windows", "anaconda", "cygwin"], "comments": [{"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 1, "creation_date": 1565946209, "post_id": 57501589, "comment_id": 101510254, "body": "FWIW I&#39;ve struggled with this recently too.  Anaconda is quite buggy on Cygwin.  It&#39;s been on my todo list to submit some fixes, as there&#39;s no reason it shouldn&#39;t be usable in a Cygwin shell."}, {"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 1, "creation_date": 1565946338, "post_id": 57501589, "comment_id": 101510317, "body": "&quot;The problem is that I can&#39;t run the program if I rely on the path:&quot;  This is sort of a separate issue, but the executables in Anaconda for Windows don&#39;t know about Cygwin and thus don&#39;t know how to handle UNIX-style paths in Cygwin.  In some cases, Cygwin is smart enough to convert Cygwin paths to native Windows paths when passing them as arguments to Windows programs, but it doesn&#39;t always work.  You need to use the <code>cygpath</code> utility to convert them to Windows paths for use with Windows programs."}], "owner": {"reputation": 53, "user_id": 2407011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fa982394b3808b6114f55f0f88b0763?s=128&d=identicon&r=PG", "display_name": "grbruns", "link": "https://stackoverflow.com/users/2407011/grbruns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569109368, "creation_date": 1565814442, "last_edit_date": 1569109368, "question_id": 57501589, "link": "https://stackoverflow.com/questions/57501589/why-cant-anaconda-python-in-shebang-line-find-script-cygwin", "title": "Why can&#39;t Anaconda python in shebang line find script (cygwin)?", "body": "<p>I use cygwin on Windows 10, and want to write Python code\nthat uses Pandas and other packages contained in my Anaconda base\nenvironment.  I can run Python code if I give the absolute\npath to the code, but not if bash needs to use PATH\nto find the code.</p>\n\n<p>I use these lines in my .bash_profile as suggested \n<a href=\"https://github.com/conda/conda/blob/master/CHANGELOG.md#recommended-change-to-enable-conda-in-your-shell\" rel=\"nofollow noreferrer\">here</a> (search for 'bash_profile'):</p>\n\n<pre><code>. /opt/conda/etc/profile.d/conda.sh\nconda activate base\n</code></pre>\n\n<p>Here's the start of my PATH, showing Anaconda stuff at the front:</p>\n\n<pre><code>$ echo ${PATH:1:160}\ncygdrive/c/Users/Glenn/Anaconda3:/cygdrive/c/Users/Glenn/Anaconda3/Library/mingw-w64/bin:/cygdrive/c/Users/Glenn/Anaconda3/Library/usr/bin:/cygdrive/c/Users/Gle...\n</code></pre>\n\n<p>I can run Anaconda Python at the bash prompt:</p>\n\n<pre><code>$ which python\n/cygdrive/c/Users/Glenn/Anaconda3/python\n$ python -i\nPython 3.7.3 (default, Apr 24 2019, 15:29:51) [MSC v.1915 64 bit (AMD64)] :: Anaconda, Inc. on win32\n\nWarning:\nThis Python interpreter is in a conda environment, but the environment has\nnot been activated.  Libraries may fail to load.  To activate this environment\nplease see https://conda.io/activation\n\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt;\n</code></pre>\n\n<p>I can even run a Python program that uses Pandas:</p>\n\n<pre><code>$ pwd\n/home/Glenn/bin\n$ cat test.py\n#!/usr/bin/env python\nimport pandas as pd\nprint(pd.Series([1,2]))\n$ ./test.py\n0    1\n1    2\ndtype: int64\n</code></pre>\n\n<p>The problem is that I can't run the program if I rely on the path:</p>\n\n<pre><code>$ which test.py\n/home/Glenn/bin/test.py\n$ test.py\nC:\\Users\\Glenn\\Anaconda3\\python.exe: can't open file '/home/Glenn/bin/test.py': [Errno 2] No such file or directory\n$\n</code></pre>\n\n<p>I get the same kind of error message if I invoke test.py from\nanother directory using an absolute pathname, but not if I invoke\nit using a relative pathname.</p>\n\n<p>I'm a longtime Cygwin user and haven't seen this kind of behavior\nbefore, so suspect it has to do with Anaconda.\nI can change to any other directory and get the same behavior.\nAlso, if I put the absolute path to Anaconda's Python in the\nshebang line, I get the same behavior.</p>\n\n<p>I've found (and tried) many suggestions for configuring Anaconda in a Cygwin environment, but many of them are 4 or 5 years old.</p>\n\n<p>UPDATE: I was not able to solve this problem, but have switched to the Linux Windows Subsystem and no longer have to deal with the issue.</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 1, "creation_date": 1565816682, "post_id": 57501624, "comment_id": 101473157, "body": "Small nitpick: &quot;<code>np.array(some_iterable)</code>&quot; suggests that <code>np.array</code> can digest general iterables which is not the case. You&#39;d have to use something like <code>np.fromiter</code> for that."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1565816860, "post_id": 57501624, "comment_id": 101473211, "body": "@PaulPanzer: thanks. I will change the parameter to <code>array_like</code>, since the mandatory <code>dtype</code> could result in rounding errors, overflow, etc. :)"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 2, "last_activity_date": 1565816860, "last_edit_date": 1565816860, "creation_date": 1565814566, "answer_id": 57501624, "question_id": 57501578, "link": "https://stackoverflow.com/questions/57501578/finding-the-position-in-a-list-of-the-closest-value-to-a-given-number/57501624#57501624", "title": "Finding the position in a list of the closest value to a given number", "body": "<p>You can convert this to a numpy array and calculate the index of the minimum absolute difference between the items and <code>target</code>, like:</p>\n\n<pre><code>def min_diff_pos(array_like, target):\n    return np.abs(np.array(array_like)-target).argmin()</code></pre>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt; min_diff_pos([1.1,0.7,1.8,2.,1.65], 1.1)\n0\n&gt;&gt;&gt; min_diff_pos([1.1,0.7,1.8,2.,1.65], 1.8)\n2\n&gt;&gt;&gt; min_diff_pos([1.1,0.7,1.8,2.,1.65], 1.7)\n4\n&gt;&gt;&gt; min_diff_pos([1.1,0.7,1.8,2.,1.65], 1.79)\n2\n</code></pre>\n\n<p>If the values are sorted, we can use a binary search algorithm, and then look at the two items that are near the insertion point. In that case it is the closest of these two. This makes a lookup <em>O(log n)</em> instead of <em>O(n)</em>:</p>\n\n<pre><code>def min_diff_pos_sorted(sorted_array, target):\n    idx = np.searchsorted(sorted_array, target)\n    idx1 = max(0, idx-1)\n    return np.abs(np.array(sorted_array[idx1:idx+1])-target).argmin() + idx1</code></pre>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt; data = np.array([0.7, 1.1, 1.65, 1.8, 2.0])\n&gt;&gt;&gt; min_diff_pos_sorted(data, 0.7)\n0\n&gt;&gt;&gt; min_diff_pos_sorted(data, 0.8)\n0\n&gt;&gt;&gt; min_diff_pos_sorted(data, 0.9)\n0\n&gt;&gt;&gt; min_diff_pos_sorted(data, 1.0)\n1\n&gt;&gt;&gt; min_diff_pos_sorted(data, 1.1)\n1\n&gt;&gt;&gt; min_diff_pos_sorted(data, 1.2)\n1\n&gt;&gt;&gt; min_diff_pos_sorted(data, 1.3)\n1\n&gt;&gt;&gt; min_diff_pos_sorted(data, 1.4)\n2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 677, "user_id": 796805, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3e1dad15bc5eb2c70bf701f2e5d81ee?s=128&d=identicon&r=PG", "display_name": "LionKimbro", "link": "https://stackoverflow.com/users/796805/lionkimbro"}, "edited": false, "score": 0, "creation_date": 1565821558, "post_id": 57502239, "comment_id": 101474505, "body": "I wonder if it wouldn&#39;t be quicker, with very long lists, to use: get_min_pos = lambda L,ref: min([((ref-x)**2,i) for i,x in enumerate(L)])[1]"}, {"owner": {"reputation": 197, "user_id": 2443845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e25cf44b1296ef8b5dcc9273d483d21?s=128&d=identicon&r=PG", "display_name": "jgsedi", "link": "https://stackoverflow.com/users/2443845/jgsedi"}, "reply_to_user": {"reputation": 677, "user_id": 796805, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3e1dad15bc5eb2c70bf701f2e5d81ee?s=128&d=identicon&r=PG", "display_name": "LionKimbro", "link": "https://stackoverflow.com/users/796805/lionkimbro"}, "edited": false, "score": 0, "creation_date": 1565905469, "post_id": 57502239, "comment_id": 101501083, "body": "why should it be quicker? So far i see your code checks all the list elements?"}], "tags": [], "owner": {"reputation": 197, "user_id": 2443845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e25cf44b1296ef8b5dcc9273d483d21?s=128&d=identicon&r=PG", "display_name": "jgsedi", "link": "https://stackoverflow.com/users/2443845/jgsedi"}, "is_accepted": false, "score": 1, "last_activity_date": 1565817766, "creation_date": 1565817766, "answer_id": 57502239, "question_id": 57501578, "link": "https://stackoverflow.com/questions/57501578/finding-the-position-in-a-list-of-the-closest-value-to-a-given-number/57502239#57502239", "title": "Finding the position in a list of the closest value to a given number", "body": "<p>a pretty straitforward solution without numpy or other third party tools:</p>\n\n<pre><code>values = [1.1, 0.7, 1.8, 2., 1.65]\n\ndef get_min_pos(values, referencevalue):\n    d = [(referencevalue - x)**2 for x in values]\n    return d.index(min(d))\n</code></pre>\n\n<p>a first test:</p>\n\n<pre><code>testvalues = values\nfor value in testvalues:\n    expected_pos = values.index(value)\n    pos = get_min_pos(values=values, referencevalue=value)\n    assert pos == expected_pos\n\n# list of testvalue and expected indox pos for the value\ntestvalues = [(1.0, 0), (0.8, 1), (0.9, 0), (0.89, 1), ]\nfor value, expected_pos in testvalues:\n    value = get_min_pos(values=values, referencevalue=value)\n    assert value == expected_pos\n</code></pre>\n"}], "owner": {"reputation": 460, "user_id": 9794068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85edf9304d450be090976a6e559e071e?s=128&d=identicon&r=PG&f=1", "display_name": "3sm1r", "link": "https://stackoverflow.com/users/9794068/3sm1r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 57501624, "answer_count": 2, "score": 1, "last_activity_date": 1565817766, "creation_date": 1565814371, "question_id": 57501578, "link": "https://stackoverflow.com/questions/57501578/finding-the-position-in-a-list-of-the-closest-value-to-a-given-number", "title": "Finding the position in a list of the closest value to a given number", "body": "<p>I have a list of values, not necessarily sorted, for example</p>\n\n<pre><code>list=[1.1,0.7,1.8,2.,1.65]\n</code></pre>\n\n<p>and I want to find the position in the list of the closest value to a given number, for example <code>a=1.4</code>. It does not matter whether the value in the list is larger or smaller than the given value. Of course, one way to do it is with a <code>for</code> loop</p>\n\n<pre><code>import numpy as np\nd=100.\ni=0\nfor s in list:\n    if np.abs(s-a)&lt;d:\n        pos=i\n        d=np.abs(s-a)   \n    i+=1\nprint pos  \n</code></pre>\n\n<p>but in python there must be a much better way. How can I do it more synthetically ?\nWhat if the values are instead sorted?</p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 380, "user_id": 8488594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vw0c4.jpg?s=128&g=1", "display_name": "Mohammad Moallemi", "link": "https://stackoverflow.com/users/8488594/mohammad-moallemi"}, "is_accepted": false, "score": 0, "last_activity_date": 1565814776, "creation_date": 1565814776, "answer_id": 57501659, "question_id": 57501577, "link": "https://stackoverflow.com/questions/57501577/run-a-code-on-server-side-several-times-and-use-results-on-html-render/57501659#57501659", "title": "Run a code on server side several times and use results on html render", "body": "<p>you can cache the data on your server memory with expiration time e.g. 1 hour</p>\n\n<p>so if one user visits your website it caches that results and serves the cached results to other users instead of scraping the web each time a user visits the website</p>\n\n<p>here's some tutorial for that:</p>\n\n<p><a href=\"https://wsvincent.com/django-caching-for-beginners/\" rel=\"nofollow noreferrer\">Django Caching for Beginners</a></p>\n\n<p><a href=\"https://realpython.com/caching-in-django-with-redis/\" rel=\"nofollow noreferrer\">Caching in Django With Redis</a></p>\n\n<p>and for further reading you can use django's offical docs:</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/2.2/topics/cache/\" rel=\"nofollow noreferrer\">Django\u2019s cache framework</a></p>\n"}], "owner": {"reputation": 66, "user_id": 10601020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f1baacc29bad8c15c0990b994707dd5?s=128&d=identicon&r=PG&f=1", "display_name": "tepeholm", "link": "https://stackoverflow.com/users/10601020/tepeholm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565814776, "creation_date": 1565814370, "question_id": 57501577, "link": "https://stackoverflow.com/questions/57501577/run-a-code-on-server-side-several-times-and-use-results-on-html-render", "title": "Run a code on server side several times and use results on html render", "body": "<p>I want to run a code which does web scraping and want result to be rendered on html page. On each user request, code in my view function generates data and shows results on page.</p>\n\n<p>Everything works fine but I suspect that this is the wrong way to implement my task. If many users will continuously request the page it will lead to server overload from which I am web scraping.</p>\n\n<pre><code>def my_function(request):\n    url = 'https://www.some_url.com'\n    source_code = requests.get(url)\n    plain_text = source_code.text\n    soup = BeautifulSoup(plain_text, \"html.parser\")\n    result = []\n    for link in soup.find_all('div', {'id': 'some_id'}):\n        for link_inside in link.find_all('span', {'class': 'some_text'}):\n            a = link_inside.text.strip()\n            result.append(a)\n    context = {'result': result}\n    return render(request, 'myweb.html', context)\n</code></pre>\n\n<p>is it possible to run the code on server side, say 12 times in a day, so I can use those results on rendering. \n1) I don't want to keep or save results on my database\n2) If I need to keep results on my database is it possible to erase each time and keep updated.</p>\n"}, {"tags": ["python", "excel", "pycharm"], "comments": [{"owner": {"reputation": 27, "user_id": 11854744, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rnQcNfXCJqw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rercbVxYD8J9pG3t8z8roK2bMt1AA/photo.jpg?sz=128", "display_name": "snnr", "link": "https://stackoverflow.com/users/11854744/snnr"}, "edited": false, "score": 0, "creation_date": 1565816312, "post_id": 57501517, "comment_id": 101473056, "body": "Okay, I&#39;ve renamed the file with &quot;.csv&quot; and it opened in Excel. However, only my Excel transferred over and I would like the data to transfer over. Any tips?"}, {"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1565830957, "post_id": 57501517, "comment_id": 101476091, "body": "Thats... not how that works."}], "answers": [{"comments": [{"owner": {"reputation": 1726, "user_id": 7363404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoAql.png?s=128&g=1", "display_name": "Axiumin_", "link": "https://stackoverflow.com/users/7363404/axiumin"}, "edited": false, "score": 0, "creation_date": 1565831191, "post_id": 57501594, "comment_id": 101476125, "body": "You need an external library to write to Excel spreadsheets. Also, setting aside this doesn&#39;t work, what if <code>result</code> was a list, or a numpy array, or anything else?"}], "tags": [], "owner": {"reputation": 628, "user_id": 10857616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xFXBv.jpg?s=128&g=1", "display_name": "peki", "link": "https://stackoverflow.com/users/10857616/peki"}, "is_accepted": false, "score": -1, "last_activity_date": 1565814463, "creation_date": 1565814463, "answer_id": 57501594, "question_id": 57501517, "link": "https://stackoverflow.com/questions/57501517/how-do-i-export-data-in-a-pycharm-file-into-an-excel-sheet/57501594#57501594", "title": "How do I export data in a PyCharm file into an Excel sheet?", "body": "<p>You can't convert <code>.py</code> to <code>.xlsx</code>. You can, however, create a secondary file called <code>foo.xlsx</code> and apply your results to it. To apply in a single row you can probably use</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>a = open(\"foo.xlsx\", \"a\")\na.write(result)\n</code></pre>\n\n<p>But I haven't worked with <code>.xlsx</code> files so you'll have to research how to append to multiple rows.</p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 11854744, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rnQcNfXCJqw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rercbVxYD8J9pG3t8z8roK2bMt1AA/photo.jpg?sz=128", "display_name": "snnr", "link": "https://stackoverflow.com/users/11854744/snnr"}, "is_accepted": true, "score": -1, "last_activity_date": 1565899213, "creation_date": 1565899213, "answer_id": 57515507, "question_id": 57501517, "link": "https://stackoverflow.com/questions/57501517/how-do-i-export-data-in-a-pycharm-file-into-an-excel-sheet/57515507#57515507", "title": "How do I export data in a PyCharm file into an Excel sheet?", "body": "<p>I figured it out. All you have to do is run the program in PyCharm, copy the program file location, and paste it into the terminal and add this at the end \"> ~/Desktop/anyname.csv\"</p>\n"}], "owner": {"reputation": 27, "user_id": 11854744, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rnQcNfXCJqw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rercbVxYD8J9pG3t8z8roK2bMt1AA/photo.jpg?sz=128", "display_name": "snnr", "link": "https://stackoverflow.com/users/11854744/snnr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1213, "favorite_count": 1, "accepted_answer_id": 57515507, "answer_count": 2, "score": -1, "last_activity_date": 1565899213, "creation_date": 1565814060, "last_edit_date": 1565845981, "question_id": 57501517, "link": "https://stackoverflow.com/questions/57501517/how-do-i-export-data-in-a-pycharm-file-into-an-excel-sheet", "title": "How do I export data in a PyCharm file into an Excel sheet?", "body": "<p>I have some code in PyCharm that gets me a lot of data and I would like to create an Excel sheet with all of the data. </p>\n\n<p>I've already tried renaming the file and saving it with \".xlsx\" instead of \".py\" but that didn't work. </p>\n\n<p>Listed below is my code and the data I want to export into an Excel sheet.</p>\n\n<p>Code:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import requests\n\nurl1 = 'https://domain.zendesk.com/api/v2/incremental/tickets.json? \nstart_time=1561939200&amp;include=metric_sets'\nurl2 = 'https://domain.zendesk.com/api/v2/ticket_metrics.json'\nuser = 'email' + '/token'\npwd = 'token'\n\nresponse1 = requests.get(url1, auth=(user, pwd))\nresponse2 = requests.get(url2, auth=(user, pwd))\n\ndata1 = response1.json()\ndata2 = response2.json()\n\nticket_list1 = data1['tickets']\nticket_list2 = data2['ticket_metrics']\n\nfor ticket1 in ticket_list1:\n    for ticket2 in ticket_list2:\n        if ticket1['assignee_id'] != ticket1['requester_id']:\n            print(ticket2['reply_time_in_minutes'])\n            print(ticket1['assignee_id'])\n            print(ticket2['ticket_id'])\n</code></pre>\n\n<p>Example data I want to export:</p>\n\n<pre class=\"lang-json prettyprint-override\"><code>{'calendar': 3, 'business': 3}\n363041385813\n52629\n\n{'calendar': None, 'business': None}\n363041385813\n52628\n\n{'calendar': 11, 'business': 11}\n363041385813\n52627\n</code></pre>\n"}, {"tags": ["python", "opencv", "image-processing", "keras", "deep-learning"], "comments": [{"owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "edited": false, "score": 0, "creation_date": 1565816022, "post_id": 57501515, "comment_id": 101472987, "body": "Since you already the the contour of the object, you can create a black mask then draw the contour onto the mask with <code>cv2.drawContours()</code>"}, {"owner": {"reputation": 43, "user_id": 11927768, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AYkRjUcMJog/AAAAAAAAAAI/AAAAAAAAAMA/DnKSIIHhBNA/photo.jpg?sz=128", "display_name": "Fletcher", "link": "https://stackoverflow.com/users/11927768/fletcher"}, "reply_to_user": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "edited": false, "score": 0, "creation_date": 1565820000, "post_id": 57501515, "comment_id": 101474121, "body": "@nathancy i have contour of the &#39;car&#39; but i need to the contour of the &#39;load&#39; on the truck. a black mask is used to delete the car area from the finally mask but some unwanted border still exist there. i don&#39;t know how can i delete these unwanted sections and extract fit  contour of the &#39;load&#39; ."}], "owner": {"reputation": 43, "user_id": 11927768, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AYkRjUcMJog/AAAAAAAAAAI/AAAAAAAAAMA/DnKSIIHhBNA/photo.jpg?sz=128", "display_name": "Fletcher", "link": "https://stackoverflow.com/users/11927768/fletcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565873310, "creation_date": 1565814052, "last_edit_date": 1565873310, "question_id": 57501515, "link": "https://stackoverflow.com/questions/57501515/how-to-mask-the-load-of-open-back-trucks-using-mask-r-cnn-and-background-subtrac", "title": "how to mask the load of open back trucks using Mask R-CNN and background subtraction?", "body": "<p>i need to detect and segment the load of open back trucks in the roads. how can i mask and extract the load area using background subtraction and Mask R-CNN ?</p>\n\n<p>as a simple example, i download a background image and Photoshop the truck and the load into that.</p>\n\n<p>background: <a href=\"https://i.ibb.co/DpSWc84/Original.jpg\" rel=\"nofollow noreferrer\">https://i.ibb.co/DpSWc84/Original.jpg</a></p>\n\n<p>modified: <a href=\"https://i.ibb.co/6NVsYGq/Modified.jpg\" rel=\"nofollow noreferrer\">https://i.ibb.co/6NVsYGq/Modified.jpg</a></p>\n\n<p>i used BS and Mask R-CNN but the output is not fit enough. output mask includes trucks border area and also some holes and noises in load section.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def applyMask(image, maskList): # apply masks that created by Mask R-CNN to image\n    masked_for_load = resize(image,maskList[0].shape)\n    for mask in maskList :\n        masked_for_load[:, :] = np.where(mask == 1,0,masked_for_load[:, :]) # set pixels that include cars or trucks to zero\n    return masked_for_load\n\n(score, diff) = compare_ssim(grayA, grayB, full=True)\ndiff = (diff * 255).astype(\"uint8\")\n\n# threshold the difference image, followed by finding contours to obtain the regions of the two input images that differ\nthresh = cv2.threshold(diff, 0, 255, cv2.THRESH_BINARY_INV | cv2.THRESH_OTSU)[1]\n# output mask, ready to apply on original image\nloadMask = applyMask(thresh,maskList)\n</code></pre>\n\n<p>Mask R-CNN output: <a href=\"https://i.ibb.co/jgxr65Z/bar-out.jpg\" rel=\"nofollow noreferrer\">https://i.ibb.co/jgxr65Z/bar-out.jpg</a></p>\n\n<p>BS output: <a href=\"https://i.ibb.co/yQZT0V4/before-mask.jpg\" rel=\"nofollow noreferrer\">https://i.ibb.co/yQZT0V4/before-mask.jpg</a></p>\n\n<p>after subtracting R-CNN output from BS output:  <a href=\"https://i.ibb.co/JqZwfvg/after-mask.jpg\" rel=\"nofollow noreferrer\">https://i.ibb.co/JqZwfvg/after-mask.jpg</a></p>\n\n<p>but the expected output must be like this: <a href=\"https://i.ibb.co/z40fqjq/expected.jpg\" rel=\"nofollow noreferrer\">https://i.ibb.co/z40fqjq/expected.jpg</a></p>\n\n<p>how can i achieve this using python, opencv and keras tools?</p>\n"}, {"tags": ["python", "python-3.x", "windows", "powershell", "python-venv"], "comments": [{"owner": {"reputation": 7749, "user_id": 4046632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e6a87a176719c607a2a73ce6728d88?s=128&d=identicon&r=PG&f=1", "display_name": "buran", "link": "https://stackoverflow.com/users/4046632/buran"}, "edited": false, "score": 3, "creation_date": 1565814275, "post_id": 57501498, "comment_id": 101472390, "body": "your virtualenv is on c drive - <code>c:\\path\\to\\myenv</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3629, "user_id": 9381746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/707d7a8ff5c79060e57cd6683e245c89?s=128&d=identicon&r=PG&f=1", "display_name": "ecjb", "link": "https://stackoverflow.com/users/9381746/ecjb"}, "edited": false, "score": 0, "creation_date": 1565815767, "post_id": 57501587, "comment_id": 101472917, "body": "thank you for your answer @MMoallemi99. According to the doc, it says 1. On Windows, invoke the venv command as follows: <code>c:\\&gt;c:\\Python35\\python -m venv c:\\path\\to\\myenv</code> and then 2. &quot;Once a virtual environment has been created, it can be \u201cactivated\u201d using a script in the virtual environment\u2019s binary directory. The invocation of the script is platform-specific (&lt;venv&gt; must be replaced by the path of the directory containing the virtual environment):&quot;. So to which path structure shall I substitute <code>c:\\path\\to\\myenv</code> in 1?"}, {"owner": {"reputation": 380, "user_id": 8488594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vw0c4.jpg?s=128&g=1", "display_name": "Mohammad Moallemi", "link": "https://stackoverflow.com/users/8488594/mohammad-moallemi"}, "reply_to_user": {"reputation": 3629, "user_id": 9381746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/707d7a8ff5c79060e57cd6683e245c89?s=128&d=identicon&r=PG&f=1", "display_name": "ecjb", "link": "https://stackoverflow.com/users/9381746/ecjb"}, "edited": false, "score": 0, "creation_date": 1565816083, "post_id": 57501587, "comment_id": 101473008, "body": "to the path that your project actually exist in e.g. c:\\PycharmProjects\\mywebsite\\venv please post your actual project&#39;s path so i can help you"}, {"owner": {"reputation": 3629, "user_id": 9381746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/707d7a8ff5c79060e57cd6683e245c89?s=128&d=identicon&r=PG&f=1", "display_name": "ecjb", "link": "https://stackoverflow.com/users/9381746/ecjb"}, "edited": false, "score": 0, "creation_date": 1565818013, "post_id": 57501587, "comment_id": 101473540, "body": "ok thank you @MMoallemi99. I Don&#39;t have a project yet, I&#39;m just trying to create a virtual environment first and then only I would install libraries. So the exact steps I did in PowerShell are the Following. 1. I entered the Following: <code>PS T:\\&gt; python -m venv project_env</code>. It created files and directories. 2. I then tried both <code>PS T:\\&gt; project_env\\activate.bat</code> and <code>PS T:\\&gt; project_env\\activate.ps1</code> but got the message: <code>project_env\\activate.ps1 : The module &#39;project_env&#39; could not be loaded. For more information, run &#39;Import-Module project_env&#39;. At line:1 char:1 + project_env\\activate.ps1</code>"}, {"owner": {"reputation": 140, "user_id": 3827659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7e26f4ea2d8f39bad09b1bdf59968d?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/3827659/josh"}, "edited": false, "score": 0, "creation_date": 1565822147, "post_id": 57501587, "comment_id": 101474613, "body": "Where it says C:\\path\\to\\the\\environment  it&#39;s not literally &quot;C:\\path\\to\\the\\environment&quot;. It is telling <i>you</i> to replace that part with the path to <i>your</i> environment.   Like if it says &quot;write your name here&quot;, you don&#39;t write &quot;Your Name here&quot;, you write &quot;ecjb&quot;"}], "tags": [], "owner": {"reputation": 380, "user_id": 8488594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vw0c4.jpg?s=128&g=1", "display_name": "Mohammad Moallemi", "link": "https://stackoverflow.com/users/8488594/mohammad-moallemi"}, "is_accepted": false, "score": 0, "last_activity_date": 1565814440, "creation_date": 1565814440, "answer_id": 57501587, "question_id": 57501498, "link": "https://stackoverflow.com/questions/57501498/trouble-creating-virtual-environment-for-python-3-in-windows-10/57501587#57501587", "title": "trouble creating virtual environment for python 3 in windows 10", "body": "<p>you should replace</p>\n\n<pre><code>path\\to\\myenv\n</code></pre>\n\n<p>to your actual path\nso as said in docs</p>\n\n<pre><code>C:\\&gt; &lt;venv&gt;\\Scripts\\Activate.ps1\n</code></pre>\n\n<p>for example it should be something like</p>\n\n<pre><code>C:\\&gt;MyProjectsFolder\\first_project\\venv\\Scripts\\Activate.ps1\n</code></pre>\n\n<p>the other workaround is to manually change directories to Scripts folder and then run</p>\n\n<pre><code>Activate.ps1\n</code></pre>\n\n<p>if it didnt solve your problem please specify your project folder and structure</p>\n"}], "owner": {"reputation": 3629, "user_id": 9381746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/707d7a8ff5c79060e57cd6683e245c89?s=128&d=identicon&r=PG&f=1", "display_name": "ecjb", "link": "https://stackoverflow.com/users/9381746/ecjb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1565814692, "creation_date": 1565813989, "last_edit_date": 1565814692, "question_id": 57501498, "link": "https://stackoverflow.com/questions/57501498/trouble-creating-virtual-environment-for-python-3-in-windows-10", "title": "trouble creating virtual environment for python 3 in windows 10", "body": "<p>I want to create a virtualenv in Windows 10 for python 3.7</p>\n\n<p>I'm trying to follow the instruction from <a href=\"https://docs.python.org/3/library/venv.html\" rel=\"nofollow noreferrer\">python doc</a></p>\n\n<p>So first I entered the command </p>\n\n<pre><code>PS T:\\python -m venv c:\\path\\to\\myenv\n</code></pre>\n\n<p>it did create directories and files into that path </p>\n\n<p>then according to the documentation, using PowerShell I entered: </p>\n\n<pre><code>PS T:\\path\\to\\myenv\\Scripts\\Activate.ps1\n</code></pre>\n\n<p>but I got the following: </p>\n\n<pre><code>\n The term\n'T:\\path\\to\\myenv\\Scripts\\Activate.ps1' is not recognized as the name of a cmdlet, function, script\nfile, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct\nand try again.\nAt line:1 char:1\n+ T:\\path\\to\\myenv\\Scripts\\Activate.ps1\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    + CategoryInfo          : ObjectNotFound: (T:\\path\\to\\myenv...ts\\Activate.ps1:String) [], CommandNotFoundException\n    + FullyQualifiedErrorId : CommandNotFoundException\n\n</code></pre>\n\n<p>What am I missing</p>\n"}, {"tags": ["python", "image", "pyqt5", "qpixmap"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1565825854, "post_id": 57501497, "comment_id": 101475284, "body": "what is the size of <code>imagepath</code>?"}, {"owner": {"reputation": 197, "user_id": 2443845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e25cf44b1296ef8b5dcc9273d483d21?s=128&d=identicon&r=PG", "display_name": "jgsedi", "link": "https://stackoverflow.com/users/2443845/jgsedi"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1565905813, "post_id": 57501497, "comment_id": 101501157, "body": "imagepath is just the path to the gife file or do you mean the size of the gif?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1565905868, "post_id": 57501497, "comment_id": 101501170, "body": "yes, share the gif"}, {"owner": {"reputation": 197, "user_id": 2443845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e25cf44b1296ef8b5dcc9273d483d21?s=128&d=identicon&r=PG", "display_name": "jgsedi", "link": "https://stackoverflow.com/users/2443845/jgsedi"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1565905934, "post_id": 57501497, "comment_id": 101501188, "body": "how can i share a gif?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1565906088, "post_id": 57501497, "comment_id": 101501227, "body": "Upload it to drive, dropbox, imgur, etc. and share the link."}, {"owner": {"reputation": 197, "user_id": 2443845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e25cf44b1296ef8b5dcc9273d483d21?s=128&d=identicon&r=PG", "display_name": "jgsedi", "link": "https://stackoverflow.com/users/2443845/jgsedi"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1565906567, "post_id": 57501497, "comment_id": 101501347, "body": "The <a href=\"https://drive.google.com/file/d/16Au6FjlhHJK0Td9K7rITLKIcXbdtRqAy/view?usp=sharing\" rel=\"nofollow noreferrer\">gif on GDrive</a>"}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 2443845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e25cf44b1296ef8b5dcc9273d483d21?s=128&d=identicon&r=PG", "display_name": "jgsedi", "link": "https://stackoverflow.com/users/2443845/jgsedi"}, "edited": false, "score": 1, "creation_date": 1565957086, "post_id": 57517195, "comment_id": 101515070, "body": "hi @S.Nick: that&#39;s a nice solution with the backdraw of saving each tile - so on big images and big grids a lot of space and time are needed"}], "tags": [], "owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "is_accepted": false, "score": 1, "last_activity_date": 1565910238, "creation_date": 1565910238, "answer_id": 57517195, "question_id": 57501497, "link": "https://stackoverflow.com/questions/57501497/tiles-of-a-qpixmap-image-have-overlapping-regions/57517195#57517195", "title": "Tiles of a QPixmap (image) have overlapping regions", "body": "<p>Try it:</p>\n\n<pre><code>import sys\nfrom PyQt5.QtCore import QSize, QRect\nfrom PyQt5.QtGui import QPixmap, QIcon\nfrom PyQt5.QtWidgets import (QWidget, QApplication, QGridLayout, \n                             QLabel, QPushButton, QSizePolicy)\nfrom PIL import Image\n\n\ndef cut_image_into_tiles(image, r=4, c=4):\n    im = Image.open(image)                                                           \n    x, y = im.size \n    for i in range(r):\n        for j in range(c):\n            if i!=r and j!=c:\n                im.crop(box=(x/r*i, y/c*j, x/r*(i+1)-1, y/c*(j+1)-1)).\\\n                save('image{}{}.png'.format(str(i+1), str(j+1)))      \n\n\ndef run_viewer(imagepath, rows=4, cols=4):\n    app = QApplication(sys.argv)\n    image = QPixmap(imagepath)\n\n    tiles = cut_image_into_tiles(image=imagepath, r=rows, c=cols)\n\n    viewer = QWidget()\n    layout = QGridLayout()\n    layout.setContentsMargins(0, 0, 0, 0)\n    layout.setSpacing(0)\n    viewer.setLayout(layout)\n    viewer.setWindowTitle(\"ImageCutter Viewer\")\n\n    lbl = QLabel()\n    lbl.setPixmap(image)\n    layout.addWidget(lbl, 0, 0, rows, cols)\n\n    for r in range(1, rows+1):\n        for c in range(1, cols+1):    \n            button = QPushButton()\n            button.setStyleSheet('''QPushButton {background-color: yellow; border: 1px solid black;}\n                                    QPushButton:pressed {background-color: green;}''')\n            image = QPixmap(f\"image{c}{r}.png\")\n            button.setIconSize(image.size())\n            button.setIcon(QIcon(image))            \n            layout.addWidget(button, r-1, c+cols)            \n\n    viewer.show()\n    sys.exit(app.exec_())\n\n\nrun_viewer(\"linux.gif\", rows=3, cols=3)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ai3MD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ai3MD.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 2443845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e25cf44b1296ef8b5dcc9273d483d21?s=128&d=identicon&r=PG", "display_name": "jgsedi", "link": "https://stackoverflow.com/users/2443845/jgsedi"}, "edited": false, "score": 0, "creation_date": 1565956721, "post_id": 57517384, "comment_id": 101514895, "body": "@eylianesc: &quot;... <i>it depends on th, but th depends on the height which is incorrect</i> ...&quot; Why are the calculated dimension (<b>th</b> and <b>tw</b>) are incorrect?"}, {"owner": {"reputation": 197, "user_id": 2443845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e25cf44b1296ef8b5dcc9273d483d21?s=128&d=identicon&r=PG", "display_name": "jgsedi", "link": "https://stackoverflow.com/users/2443845/jgsedi"}, "edited": false, "score": 0, "creation_date": 1565957540, "post_id": 57517384, "comment_id": 101515278, "body": "ok my fault (because of my bad englisch)! I interchanged <i>width</i> (<i>tw</i>) and <i>height</i> (<i>th</i>) in the code. oh man - thanks"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1565912093, "creation_date": 1565912093, "answer_id": 57517384, "question_id": 57501497, "link": "https://stackoverflow.com/questions/57501497/tiles-of-a-qpixmap-image-have-overlapping-regions/57517384#57517384", "title": "Tiles of a QPixmap (image) have overlapping regions", "body": "<p>The width of each grid must depend on the width of the image, in your case it depends on th, but th depends on the height which is incorrect, you must change th for tw, the same for the height.</p>\n\n<p>Considering the above, the solution is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import os\nimport sys\n\nfrom PyQt5.QtCore import QSize\nfrom PyQt5.QtGui import QPixmap, QIcon\nfrom PyQt5.QtWidgets import QWidget, QApplication, QGridLayout, QLabel, QPushButton\n\n\ndef cut_image_into_tiles(image, rows=4, cols=4) -&gt; dict:\n    if isinstance(image, str) and os.path.exists(image):\n        image = QPixmap(image)\n    elif not isinstance(image, QPixmap):\n        raise ValueError(\"image must be str or QPixmap object\")\n\n    # Dim of the tile\n    tw = int(image.size().width() / cols)\n    th = int(image.size().height() / rows)\n\n    # prepare return value\n    tiles = {\"width\": tw, \"height\": th}\n    for r in range(rows):\n        for c in range(cols):\n            tile = image.copy(c * tw, r * th, tw, th) # &lt;----\n            # args: x, y, width, height\n            # https://doc.qt.io/qt-5/qpixmap.html#copy-1\n            tiles[(r, c)] = tile\n\n    return tiles\n\n\ndef create_pixmapbutton(pixmap, width=0, height=0) -&gt; QPushButton:\n    if isinstance(pixmap, QPixmap):\n        button = QPushButton()\n        if width &gt; 0 and height &gt; 0:\n            button.setIconSize(QSize(width, height))\n        else:\n            button.setIconSize(pixmap.size())\n        button.setIcon(QIcon(pixmap))\n        button.setContentsMargins(0, 0, 0, 0)\n        button.setFixedSize(button.iconSize())\n        return button\n\n\ndef run_viewer(imagepath, rows=4, cols=4):\n\n    # ImageCutter.run_viewer(imagepath)\n    app = QApplication(sys.argv)\n\n    image = QPixmap(imagepath)\n\n    tiles = cut_image_into_tiles(image=image, rows=rows, cols=cols)\n    tilewidth = tiles[\"width\"]\n    tileheight = tiles[\"height\"]\n    # get dict tiles (keys:=(row, col) or width or height)\n\n    viewer = QWidget()\n    layout = QGridLayout(viewer)\n    layout.setContentsMargins(0, 0, 0, 0)\n    layout.setSpacing(0)\n    viewer.setWindowTitle(\"ImageCutter Viewer\")\n\n    lbl = QLabel()\n    lbl.setPixmap(image)\n    layout.addWidget(lbl, 0, 0, rows, cols)\n\n    for r in range(rows):\n        for c in range(cols):\n            btn = create_pixmapbutton(tiles[r, c], width=tilewidth, height=tileheight)\n\n            btninfo = \"buttonsize={}x{}\".format(tilewidth, tileheight)\n            btn.setToolTip(btninfo)\n            # logger.debug(\"    create button [{}]\".format(btninfo))\n            layout.addWidget(btn, r, cols + c)\n\n    viewer.show()\n    viewer.setFixedSize(viewer.sizeHint())\n    sys.exit(app.exec_())\n\n\nrun_viewer(\"linux.gif\", 3, 3)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 197, "user_id": 2443845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e25cf44b1296ef8b5dcc9273d483d21?s=128&d=identicon&r=PG", "display_name": "jgsedi", "link": "https://stackoverflow.com/users/2443845/jgsedi"}, "is_accepted": false, "score": 0, "last_activity_date": 1565958599, "creation_date": 1565958599, "answer_id": 57524690, "question_id": 57501497, "link": "https://stackoverflow.com/questions/57501497/tiles-of-a-qpixmap-image-have-overlapping-regions/57524690#57524690", "title": "Tiles of a QPixmap (image) have overlapping regions", "body": "<p>Ok, i discovered that for big images and big grids the images on the buttons on the right can be smaller than the others. The same at the bottom buttons.</p>\n\n<p>An offset at the top and on the left will prevent this.</p>\n\n<p>So the function <code>def cut_image_into_tiles(image, rows=4, cols=4) -&gt; dict:</code> must be adapted to:</p>\n\n<pre><code>def cut_image_into_tiles(image, rows=4, cols=4) -&gt; dict:\n    if isinstance(image, str) and os.path.exists(image):\n        image = QPixmap(image)\n    elif not isinstance(image, QPixmap):\n        raise ValueError(\"image must be str or QPixmap object\")\n\n    # Dim of tiled images\n    width = image.size().width()\n    height = image.size().height()\n    tw = int(width / cols)\n    th = int(height / rows)\n    offset_w = int((width - tw * cols)/2)    # !!!\n    offset_h = int((height - th * rows)/2)   # !!!\n\n    # prepare return value\n    tiles = {\"width\": tw, \"height\": th}\n    for r in range(rows):\n        for c in range(cols):\n            x = c * tw\n            y = r * th\n            if c == 0:\n                x += offset_w    # !!!\n            if r == 0:\n                y += offset_h    # !!!\n            tile = image.copy(x, y, tw, th)\n            # args: x, y, width, height\n            # https://doc.qt.io/qt-5/qpixmap.html#copy-1\n            tiles[(r, c)] = tile\n\n    return tiles\n</code></pre>\n\n<p>The whole code is now:</p>\n\n<pre><code>def cut_image_into_tiles(image, rows=4, cols=4) -&gt; dict:\n    if isinstance(image, str) and os.path.exists(image):\n        image = QPixmap(image)\n    elif not isinstance(image, QPixmap):\n        raise ValueError(\"image must be str or QPixmap object\")\n\n    # Dim of tiled images\n    width = image.size().width()\n    height = image.size().height()\n    tw = int(width / cols)\n    th = int(height / rows)\n    offset_w = int((width - tw * cols)/2)\n    offset_h = int((height - th * rows)/2)\n\n    # prepare return value\n    tiles = {\"width\": tw, \"height\": th}\n    for r in range(rows):\n        for c in range(cols):\n            x = c * tw\n            y = r * th\n            if c == 0:\n                x += offset_w\n            if r == 0:\n                y += offset_h\n            tile = image.copy(x, y, tw, th)\n            # args: x, y, width, height\n            # https://doc.qt.io/qt-5/qpixmap.html#copy-1\n            tiles[(r, c)] = tile\n\n    return tiles\n\n\ndef create_pixmapbutton(pixmap, width=0, height=0) -&gt; QPushButton:\n    if isinstance(pixmap, QPixmap):\n        button = QPushButton()\n        if width &gt; 0 and height &gt; 0:\n            button.setIconSize(QSize(width, height))\n        else:\n            button.setIconSize(pixmap.size())\n        button.setIcon(QIcon(pixmap))\n        return button\n\n\ndef run_viewer(imagepath, rows=4, cols=4):\n\n    # ImageCutter.run_viewer(imagepath)\n    app = QApplication(sys.argv)\n\n    image = QPixmap(imagepath)\n\n    tiles = cut_image_into_tiles(image=image, rows=rows, cols=cols)\n    tilewidth = tiles[\"width\"]\n    tileheight = tiles[\"height\"]\n    # get dict tiles (keys:=(row, col) or width or height)\n\n    viewer = QWidget()\n    layout = QGridLayout()\n    viewer.setLayout(layout)\n    viewer.setWindowTitle(\"ImageCutter Viewer\")\n\n    lbl = QLabel()\n    lbl.setPixmap(image)\n    layout.addWidget(lbl, 0, 0, rows, cols)\n\n    for r in range(rows):\n        for c in range(cols):\n            btn = create_pixmapbutton(\n                tiles[r, c], width=tilewidth, height=tileheight)\n\n            btninfo = \"buttonsize={}x{}\".format(tilewidth, tileheight)\n            btn.setToolTip(btninfo)\n            # logger.debug(\"    create button [{}]\".format(btninfo))\n            layout.addWidget(btn, r, cols + c)\n\n    viewer.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 2443845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e25cf44b1296ef8b5dcc9273d483d21?s=128&d=identicon&r=PG", "display_name": "jgsedi", "link": "https://stackoverflow.com/users/2443845/jgsedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 57517384, "answer_count": 3, "score": 1, "last_activity_date": 1565958599, "creation_date": 1565813986, "last_edit_date": 1565814408, "question_id": 57501497, "link": "https://stackoverflow.com/questions/57501497/tiles-of-a-qpixmap-image-have-overlapping-regions", "title": "Tiles of a QPixmap (image) have overlapping regions", "body": "<p>I want to create a grid of buttons with images. The image on each button is a piece from a bigger image which is cutted into pieces - so the button grid can be seen as tiles of the original image (the code i used to put a image on the button is <a href=\"https://stackoverflow.com/a/25417734/2443845\">from here</a>).</p>\n\n<p>To cut the image (<code>image=QPixmap(path_to_image)</code>) into pieces i used the method<code>image.copy(x, y, width, height)</code> in a for loop.</p>\n\n<p>At first i thought that the code works fine. A more precise check shows that the image pieces have overlapping parts.</p>\n\n<p>Here my code which was tested with an GIF-Image:</p>\n\n<pre><code>import os\nimport sys\n\nfrom PyQt5.QtCore import QSize\nfrom PyQt5.QtGui import QPixmap, QIcon\nfrom PyQt5.QtWidgets import \\\n    QWidget, QApplication, \\\n    QGridLayout, \\\n    QLabel, QPushButton\n\ndef cut_image_into_tiles(image, rows=4, cols=4) -&gt; dict:\n    if isinstance(image, str) and os.path.exists(image):\n        image = QPixmap(image)\n    elif not isinstance(image, QPixmap):\n        raise ValueError(\"image must be str or QPixmap object\")\n\n    # Dim of the tile\n    tw = int(image.size().width() / cols)\n    th = int(image.size().height() / rows)\n\n    # prepare return value\n    tiles = {\"width\": tw, \"height\": th}\n    for r in range(rows):\n        for c in range(cols):\n            tile = image.copy(c * th, r * tw, tw, th)\n            # args: x, y, width, height\n            # https://doc.qt.io/qt-5/qpixmap.html#copy-1\n            tiles[(r, c)] = tile\n\n    return tiles\n\n\ndef create_pixmapbutton(pixmap, width=0, height=0) -&gt; QPushButton:\n    if isinstance(pixmap, QPixmap):\n        button = QPushButton()\n        if width &gt; 0 and height &gt; 0:\n            button.setIconSize(QSize(width, height))\n        else:\n            button.setIconSize(pixmap.size())\n        button.setIcon(QIcon(pixmap))\n        return button\n\n\ndef run_viewer(imagepath, rows=4, cols=4):\n\n    # ImageCutter.run_viewer(imagepath)\n    app = QApplication(sys.argv)\n\n    image = QPixmap(imagepath)\n\n    tiles = cut_image_into_tiles(image=image, rows=rows, cols=cols)\n    tilewidth = tiles[\"width\"]\n    tileheight = tiles[\"height\"]\n    # get dict tiles (keys:=(row, col) or width or height)\n\n    viewer = QWidget()\n    layout = QGridLayout()\n    viewer.setLayout(layout)\n    viewer.setWindowTitle(\"ImageCutter Viewer\")\n\n    lbl = QLabel()\n    lbl.setPixmap(image)\n    layout.addWidget(lbl, 0, 0, rows, cols)\n\n    for r in range(rows):\n        for c in range(cols):\n            btn = create_pixmapbutton(\n                tiles[r, c], width=tilewidth, height=tileheight)\n\n            btninfo = \"buttonsize={}x{}\".format(tilewidth, tileheight)\n            btn.setToolTip(btninfo)\n            # logger.debug(\"    create button [{}]\".format(btninfo))\n            layout.addWidget(btn, r, cols + c)\n\n    viewer.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>I tested the code with <code>run_viewer(path_to_a_gif_image, rows=3, cols=3)</code></p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "lstm"], "answers": [{"comments": [{"owner": {"reputation": 5712, "user_id": 2730554, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d6682e696c4f9438678b6638f271230a?s=128&d=identicon&r=PG&f=1", "display_name": "mHelpMe", "link": "https://stackoverflow.com/users/2730554/mhelpme"}, "edited": false, "score": 0, "creation_date": 1566420559, "post_id": 57503202, "comment_id": 101655228, "body": "thanks for your answer. I added these two lines of code to tf.keras.backend.clear_session()         tf.set_random_seed(42) underneath def RunML(): but I am still getting different results when running the model. I take it I&#39;m missing something?"}, {"owner": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "reply_to_user": {"reputation": 5712, "user_id": 2730554, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d6682e696c4f9438678b6638f271230a?s=128&d=identicon&r=PG&f=1", "display_name": "mHelpMe", "link": "https://stackoverflow.com/users/2730554/mhelpme"}, "edited": false, "score": 1, "creation_date": 1566421237, "post_id": 57503202, "comment_id": 101655460, "body": "By doing what I&#39;ve done, you will be sure that the model weights are going to be initialized with the same values at the start (as I demonstrated in the code). If you want to identical results up to the Nth decimal (which I don&#39;t now why would you), follow <a href=\"https://stackoverflow.com/questions/32419510/how-to-get-reproducible-results-in-keras/52897216#52897216\">this post</a>."}, {"owner": {"reputation": 5712, "user_id": 2730554, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d6682e696c4f9438678b6638f271230a?s=128&d=identicon&r=PG&f=1", "display_name": "mHelpMe", "link": "https://stackoverflow.com/users/2730554/mhelpme"}, "edited": false, "score": 0, "creation_date": 1566421711, "post_id": 57503202, "comment_id": 101655614, "body": "ok thanks I will go through the post. I&#39;m not after identical results up to the Nth decimal place, its just the predictions coming out of the model are sometimes positive then the next time negative... this is what I&#39;m trying to sort out. In your examples is the training part missing?"}, {"owner": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "reply_to_user": {"reputation": 5712, "user_id": 2730554, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d6682e696c4f9438678b6638f271230a?s=128&d=identicon&r=PG&f=1", "display_name": "mHelpMe", "link": "https://stackoverflow.com/users/2730554/mhelpme"}, "edited": false, "score": 1, "creation_date": 1566422095, "post_id": 57503202, "comment_id": 101655734, "body": "Yes it is. Usually, the common way of achieving (almost) identical results is to set the random seed at the start, so that all the model weights and tf/keras ops start from that seed. Because of that, I left out the part where I am training the model. I just set the random seed and randomly initialize the model weights. Because it is a controlled randomness (due to the same random seed), the results are identical."}], "tags": [], "owner": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "is_accepted": false, "score": 1, "last_activity_date": 1565825147, "creation_date": 1565825147, "answer_id": 57503202, "question_id": 57501493, "link": "https://stackoverflow.com/questions/57501493/how-to-use-set-random-seed-to-get-same-results/57503202#57503202", "title": "how to use set_random_seed to get same results", "body": "<p>If you set the random seed before building the graph, you will get reproducible results. For example, given a random input:</p>\n\n<pre><code>random_input = np.random.rand(2, 50, 1)\n</code></pre>\n\n<p>We can define one <code>tf.keras.model</code>:</p>\n\n<pre><code>tf.keras.backend.clear_session()\ntf.set_random_seed(42)\n\nmodel_1 = Sequential()\n\nmodel_1.add(LSTM(50,  input_shape=(50, 1), return_sequences=True))\nmodel_1.add(Dropout(0.2))\n\nmodel_1.add(LSTM(100, return_sequences=False))\nmodel_1.add(Dropout(0.2))\n\nmodel_1.add(Dense(1))\nmodel_1.add(Activation('linear'))\n\nmodel_1.compile(loss='mse', optimizer='rmsprop')\n\nrandom_predict_1 = model_1.predict(random_input)\n</code></pre>\n\n<p>Then another:</p>\n\n<pre><code>tf.keras.backend.clear_session()\ntf.set_random_seed(42)\n\nmodel_2 = Sequential()\n\nmodel_2.add(LSTM(50,  input_shape=(50, 1), return_sequences=True))\nmodel_2.add(Dropout(0.2))\n\nmodel_2.add(LSTM(100, return_sequences=False))\nmodel_2.add(Dropout(0.2))\n\nmodel_2.add(Dense(1))\nmodel_2.add(Activation('linear'))\n\nmodel_2.compile(loss='mse', optimizer='rmsprop')\n\nrandom_predict_2 = model_2.predict(random_input)\n</code></pre>\n\n<p>Now, if we perform inference on the <code>random_input</code> tensor, we will get the same results with both models because they had the same random seed to start.</p>\n\n<pre><code>np.testing.assert_array_equal(random_predict_1, random_predict_2)\n</code></pre>\n\n<p>To sum it up, no matter which random seed you use, if you set the random seed to the same number before building the graph with <code>tf.set_random_seed(seed)</code>, you will get the same results.</p>\n"}], "owner": {"reputation": 5712, "user_id": 2730554, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d6682e696c4f9438678b6638f271230a?s=128&d=identicon&r=PG&f=1", "display_name": "mHelpMe", "link": "https://stackoverflow.com/users/2730554/mhelpme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565825147, "creation_date": 1565813963, "question_id": 57501493, "link": "https://stackoverflow.com/questions/57501493/how-to-use-set-random-seed-to-get-same-results", "title": "how to use set_random_seed to get same results", "body": "<p>I am trying to learn about LSTM cells. I have read a few articles and am now trying to write my own code using tensorflow.</p>\n\n<p>I came across this code from this <a href=\"https://github.com/llSourcell/How-to-Predict-Stock-Prices-Easily-Demo\" rel=\"nofollow noreferrer\">tutorial</a>. So I copied the lstm.py file and the data file sp500.csv. The code below is what I written.</p>\n\n<p>Everything works fine. Each time I run the model I get very different predictions. I understand that because this model is very basic (trying to predict stock prices using just the closing price) this is to be expected. Also I believe in the background tensorflow uses some randomisation process to initiate the variables.</p>\n\n<p>I wanted though to run the model and get the same results each time. So I read that to do this I need to use set_random_seed.</p>\n\n<p>I have added this to my code below but when I re-run my code I get very different predictions. How am I supposed to use set_random_seed and why is the parameter 1234?</p>\n\n<pre><code>from tensorflow.python.keras.models import Sequential\nfrom tensorflow.python.keras.layers import Dense, LSTM, Dropout, Activation\nimport lstm, time\nimport tensorflow as tf\n\ndef RunML():\n\n    tf.set_random_seed(1234)\n\n    X_train, y_train, X_test, y_test = lstm.load_data('sp500.csv', 50, True)\n\n    model = Sequential()\n\n    model.add(LSTM(50, \n               input_shape=(50, 1),\n               return_sequences=True))\n    model.add(Dropout(0.2))\n\n    model.add(LSTM(\n        100,\n        return_sequences=False))\n    model.add(Dropout(0.2))\n\n    model.add(Dense(1))\n    model.add(Activation('linear'))\n\n    start = time.time()\n    model.compile(loss='mse', optimizer='rmsprop')\n    print ('compilation time : ', time.time() - start)\n\n    #Step 3 Train the model\n    model.fit(\n        X_train,\n        y_train,\n        batch_size=512,\n        nb_epoch=1,\n        validation_split=0.05)\n\n    predictions = lstm.predict_sequences_multiple(model, X_test, 50, 50)\n    lstm.plot_results_multiple(predictions, y_test, 50)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "ascii"], "comments": [{"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1565814156, "post_id": 57501478, "comment_id": 101472353, "body": "Look up what <code>ord</code> (gets a asciis integer value) and <code>chr</code> (turns integer values back into charcters) do. As it sits the code is just grabbing the next ascii character (<code>a</code> becomes <code>b</code>). Btw in the future you should read the official documentation before asking a question you could have easily answered yourself."}, {"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1565814257, "post_id": 57501478, "comment_id": 101472386, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1724473/how-could-i-print-out-the-nth-letter-of-the-alphabet-in-python\">How could I print out the nth letter of the alphabet in Python?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1565818099, "post_id": 57501557, "comment_id": 101473560, "body": "To be complete, you should mention in Python 3+ the mapping between characters and integers is based on Unicode, not ASCII."}], "tags": [], "owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "is_accepted": true, "score": 2, "last_activity_date": 1565818173, "last_edit_date": 1565818173, "creation_date": 1565814253, "answer_id": 57501557, "question_id": 57501478, "link": "https://stackoverflow.com/questions/57501478/what-does-ordc-and-chrn-do-and-what-does-this-code-output-and-why-i-do-not/57501557#57501557", "title": "What does ord(c) and chr(n) do and what does this code output and why? I do not understand the CODE BELOW mostly", "body": "<p><code>ord()</code> gives you integer representation of a character. Take a look at an ASCII table to find out what they are. 'A' has an ASCII value of 65, 'B' has an ASCII value of 66, and so on.</p>\n\n<p><code>chr()</code> is the inverse. Given an integer value, it converts it into a character. <code>chr(65) == 'A'</code>.</p>\n\n<p>If you take the ordinal value of <code>'A'</code>, you get 65. If you add 1 and convert it back, you get <code>chr(66)</code>, or <code>'B'</code>.</p>\n\n<p>This also works with unicode characters (although that doesn't pertain to the code in your question).</p>\n"}], "owner": {"reputation": 57, "user_id": 11924496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dac17f9d0f835cbd77bc25cf295d288?s=128&d=identicon&r=PG&f=1", "display_name": "rm13", "link": "https://stackoverflow.com/users/11924496/rm13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 57501557, "answer_count": 1, "score": -1, "last_activity_date": 1565818173, "creation_date": 1565813890, "last_edit_date": 1565817297, "question_id": 57501478, "link": "https://stackoverflow.com/questions/57501478/what-does-ordc-and-chrn-do-and-what-does-this-code-output-and-why-i-do-not", "title": "What does ord(c) and chr(n) do and what does this code output and why? I do not understand the CODE BELOW mostly", "body": "<p>I need help understanding what the functions ord() and chr() do in ASCII code. I also have some code that I want to know why it outputs what it does.</p>\n\n<p>I've been trying to decipher how this code works exactly. I'm not sure how and why it just outputs random letters...</p>\n\n<pre><code>message = ''\nfor letter in 'secret':\n    number = ord(letter)\n    newNumber = number + 1\n    newLetter = chr(newNumber)\n    message = message + newLetter\nprint(message)\n</code></pre>\n\n<p>I have no error messages because my teacher wrote it :D, lol. But, it outputs \"tfdsfu\" which is correct, but I don't know why.</p>\n"}, {"tags": ["python", "pandas", "concatenation"], "answers": [{"tags": [], "owner": {"reputation": 62335, "user_id": 9840637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QqY9S.png?s=128&g=1", "display_name": "anky", "link": "https://stackoverflow.com/users/9840637/anky"}, "is_accepted": false, "score": 5, "last_activity_date": 1565813984, "creation_date": 1565813984, "answer_id": 57501496, "question_id": 57501453, "link": "https://stackoverflow.com/questions/57501453/append-same-series-to-data-frame-columns/57501496#57501496", "title": "append same Series to data frame columns", "body": "<p>You can do:</p>\n\n<pre><code>out=data.append(pd.concat([a]*data.shape[1],axis=1,keys=data.columns),ignore_index=True)\n</code></pre>\n\n<hr>\n\n<pre><code>   a  b  c  d  e\n0  8  4  2  6  0\n1  3  4  5  6  7\n2  3  3  3  3  3\n3  4  4  4  4  4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 2, "creation_date": 1565814767, "post_id": 57501600, "comment_id": 101472569, "body": "<code>data.loc[len(data)] = y</code> might be simpler ;p"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 3, "last_activity_date": 1565814484, "creation_date": 1565814484, "answer_id": 57501600, "question_id": 57501453, "link": "https://stackoverflow.com/questions/57501453/append-same-series-to-data-frame-columns/57501600#57501600", "title": "append same Series to data frame columns", "body": "<p>Here is a method from for loop </p>\n\n<pre><code>for x ,y in a.iteritems(): \n    data.loc[data.index[-1]+x+1]=y\n\ndata\nOut[106]: \n   a  b  c  d  e\n0  8  4  2  6  0\n1  3  4  5  6  7\n2  3  3  3  3  3\n4  4  4  4  4  4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 2, "last_activity_date": 1565814698, "creation_date": 1565814698, "answer_id": 57501643, "question_id": 57501453, "link": "https://stackoverflow.com/questions/57501453/append-same-series-to-data-frame-columns/57501643#57501643", "title": "append same Series to data frame columns", "body": "<p>Using <code>broadcast_to</code></p>\n\n<pre><code>df.append(pd.DataFrame(np.broadcast_to(a.to_frame(), (len(a), df.shape[1])), columns=df.columns), ignore_index=True)\n</code></pre>\n\n<hr>\n\n<pre><code>   a  b  c  d  e\n0  8  4  2  6  0\n1  3  4  5  6  7\n2  3  3  3  3  3\n3  4  4  4  4  4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1565815372, "last_edit_date": 1565815372, "creation_date": 1565815038, "answer_id": 57501725, "question_id": 57501453, "link": "https://stackoverflow.com/questions/57501453/append-same-series-to-data-frame-columns/57501725#57501725", "title": "append same Series to data frame columns", "body": "<h3><code>pandas.DataFrame.apply</code></h3>\n\n<p>with <code>pandas.Series.append</code><br>\nI like this because it's pretty</p>\n\n<pre><code>data.apply(pd.Series.append, to_append=a, ignore_index=True)\n\n   a  b  c  d  e\n0  8  4  2  6  0\n1  3  4  5  6  7\n2  3  3  3  3  3\n3  4  4  4  4  4\n</code></pre>\n\n<p>A golfier answer</p>\n\n<pre><code>data.apply(pd.Series.append, args=(a, 1))\n</code></pre>\n\n<hr>\n\n<h3><code>numpy.row_stack</code></h3>\n\n<p>Very similar to <a href=\"https://stackoverflow.com/a/57501643/2336654\">rafaelc's answer</a></p>\n\n<pre><code>pd.DataFrame(np.row_stack([\n    data,\n    a.to_numpy()[:, None].repeat(data.shape[1], axis=1)\n]), columns=data.columns)\n\n   a  b  c  d  e\n0  8  4  2  6  0\n1  3  4  5  6  7\n2  3  3  3  3  3\n3  4  4  4  4  4\n</code></pre>\n"}], "owner": {"reputation": 343, "user_id": 8452246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156525298244502/picture?type=large", "display_name": "Martin Yordanov Georgiev", "link": "https://stackoverflow.com/users/8452246/martin-yordanov-georgiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 1, "accepted_answer_id": 57501725, "answer_count": 4, "score": 3, "last_activity_date": 1565815372, "creation_date": 1565813741, "question_id": 57501453, "link": "https://stackoverflow.com/questions/57501453/append-same-series-to-data-frame-columns", "title": "append same Series to data frame columns", "body": "<p>I have the following dataframe:</p>\n\n<pre><code>data=pd.DataFrame(data=[[8,4,2,6,0],[3,4,5,6,7]],columns=[\"a\",\"b\",\"c\",\"d\",\"e\"])\n</code></pre>\n\n<p>Output is like this:</p>\n\n<pre><code>    a b c d e\n0   8 4 2 6 0\n1   3 4 5 6 7\n</code></pre>\n\n<p>I also have the following Series:</p>\n\n<pre><code>a=pd.Series([3,4])\n</code></pre>\n\n<p>I want to attach the series (a) to each of the columns in data. I tried few things with concat but I never seem to get it right.</p>\n\n<p>Expected result is:</p>\n\n<pre><code>    a b c d e\n0   8 4 2 6 0\n1   3 4 5 6 7\n2   3 3 3 3 3\n3   4 4 4 4 4 \n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "web-scraping"], "comments": [{"owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 1, "creation_date": 1565813637, "post_id": 57501411, "comment_id": 101472148, "body": "You are getting this error because of your <code>soup.find</code> not able to find any <code>table</code> tag with <code>class:wikitable sortable</code> property and so its returning <code>none</code>."}, {"owner": {"reputation": 19, "user_id": 10307462, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GjDzUDbxVgM/AAAAAAAAAAI/AAAAAAAAFlY/cBYOm1_C_GY/photo.jpg?sz=128", "display_name": "akash gupta", "link": "https://stackoverflow.com/users/10307462/akash-gupta"}, "reply_to_user": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 0, "creation_date": 1565813696, "post_id": 57501411, "comment_id": 101472168, "body": "How can I correct this ?"}], "answers": [{"tags": [], "owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "is_accepted": false, "score": 0, "last_activity_date": 1565813723, "creation_date": 1565813723, "answer_id": 57501451, "question_id": 57501411, "link": "https://stackoverflow.com/questions/57501411/getting-this-error-nonetype-object-has-no-attribute-find-all/57501451#57501451", "title": "getting this error: &#39;NoneType&#39; object has no attribute &#39;find_all&#39;", "body": "<ul>\n<li>You are getting this error because of your soup.find not able to find any <code>table</code> tag with <code>class:wikitable sortable</code> property and so its returning none</li>\n</ul>\n\n<pre><code>website_url = requests.get('https://en.wikipedia.org/wiki/Cuisine_of_New_York_City').text\n\nsoup = BeautifulSoup(website_url,'lxml')\ntable = soup.find('table',{'class':'wikitable sortable'})\n\nheaders = [header.text for header in table.find_all('th')]\nif table is None:\n    #handle something here when table is not present in your html.\nelse:\n    table_rows = table.find_all('tr')        \n    rows = []\n    for row in table_rows:\n        td = row.find_all('td')\n    row = [row.text for row in td]\n    rows.append(row)\n\n    with open('BON2_POPULATION1.csv', 'w') as f:\n       writer = csv.writer(f)\n       writer.writerow(headers)\n       writer.writerows(row for row in rows if row)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": true, "score": 0, "last_activity_date": 1565825950, "creation_date": 1565825950, "answer_id": 57503282, "question_id": 57501411, "link": "https://stackoverflow.com/questions/57501411/getting-this-error-nonetype-object-has-no-attribute-find-all/57503282#57503282", "title": "getting this error: &#39;NoneType&#39; object has no attribute &#39;find_all&#39;", "body": "<p>I see no element with that description. As a starters for 10 you could use <code>:contains</code>, with bs4 4.7.1+, and capture the elements with class <code>mw-headline</code> that contains the word cuisine in their <code>innerText/text</code>. The list is needs a little cleaning. If you intended something more specific then more info is needed in the question.</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as bs\n\nr = requests.get('https://en.wikipedia.org/wiki/Cuisine_of_New_York_City')\nsoup = bs(r.content, 'lxml')\ncuisines_dirty = [i.text for i in soup.select('.mw-headline:contains(cuisine)')]\n#perform some sort of cleaning on list\n</code></pre>\n\n<hr>\n\n<p><strong>Dirty list:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/TVRC1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TVRC1.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 19, "user_id": 10307462, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GjDzUDbxVgM/AAAAAAAAAAI/AAAAAAAAFlY/cBYOm1_C_GY/photo.jpg?sz=128", "display_name": "akash gupta", "link": "https://stackoverflow.com/users/10307462/akash-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 57503282, "answer_count": 2, "score": -3, "last_activity_date": 1565825950, "creation_date": 1565813505, "question_id": 57501411, "link": "https://stackoverflow.com/questions/57501411/getting-this-error-nonetype-object-has-no-attribute-find-all", "title": "getting this error: &#39;NoneType&#39; object has no attribute &#39;find_all&#39;", "body": "<p>I am trying to get cuisines of new york city from the website: \n<a href=\"https://en.wikipedia.org/wiki/Cuisine_of_New_York_City\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Cuisine_of_New_York_City</a></p>\n\n<p>and I am getting the error: 'NoneType' object has no attribute 'find_all'</p>\n\n<p>This is the code I have tried.</p>\n\n<pre><code>website_url = requests.get('https://en.wikipedia.org/wiki/Cuisine_of_New_York_City').text\n\nsoup = BeautifulSoup(website_url,'lxml')\ntable = soup.find('table',{'class':'wikitable sortable'})\n\nheaders = [header.text for header in table.find_all('th')]\n\ntable_rows = table.find_all('tr')        \nrows = []\nfor row in table_rows:\n   td = row.find_all('td')\n   row = [row.text for row in td]\n   rows.append(row)\n\nwith open('BON2_POPULATION1.csv', 'w') as f:\n   writer = csv.writer(f)\n   writer.writerow(headers)\n   writer.writerows(row for row in rows if row)\n</code></pre>\n"}]