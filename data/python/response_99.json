[{"tags": ["python", "user-interface", "pygame", "rectangles"], "answers": [{"comments": [{"owner": {"reputation": 741, "user_id": 5455941, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9d15614985a2ae4540c08f7987341c1e?s=128&d=identicon&r=PG&f=1", "display_name": "data_pi", "link": "https://stackoverflow.com/users/5455941/data-pi"}, "edited": false, "score": 0, "creation_date": 1480558353, "post_id": 40901398, "comment_id": 69016621, "body": "I used a variable called selected_rect instead, and used your idea. Works perfectly, thanks!"}, {"owner": {"reputation": 308, "user_id": 4544199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa96bcc30fc1115fc40749e7338f2638?s=128&d=identicon&r=PG&f=1", "display_name": "PMARINA", "link": "https://stackoverflow.com/users/4544199/pmarina"}, "reply_to_user": {"reputation": 741, "user_id": 5455941, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9d15614985a2ae4540c08f7987341c1e?s=128&d=identicon&r=PG&f=1", "display_name": "data_pi", "link": "https://stackoverflow.com/users/5455941/data-pi"}, "edited": false, "score": 0, "creation_date": 1480558406, "post_id": 40901398, "comment_id": 69016633, "body": "This would only work if @Theo is storing the rectangles in a list. He (sorry if wrong pronoun) has already stated that the only info being stored is list_of_rect, which contains coordinates, not rectangle objects"}, {"owner": {"reputation": 4469, "user_id": 6342812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e9e8f53f02cc9013f635a6bb67647d?s=128&d=identicon&r=PG&f=1", "display_name": "rassar", "link": "https://stackoverflow.com/users/6342812/rassar"}, "reply_to_user": {"reputation": 308, "user_id": 4544199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa96bcc30fc1115fc40749e7338f2638?s=128&d=identicon&r=PG&f=1", "display_name": "PMARINA", "link": "https://stackoverflow.com/users/4544199/pmarina"}, "edited": false, "score": 0, "creation_date": 1480558728, "post_id": 40901398, "comment_id": 69016702, "body": "@PMARINA assuming that <code>list_of_rect</code> stores its data like <code>[[x, y, width, height], [x2, y2, width2, height2],...[xn, yn, widthn, heightn]]</code> the rects_clicked does not need to keep track of the rectangle objects but instead checks if the sublist is in <code>rects_clicked</code>. So <code>rects_clicked</code> might look like <code>[[x, y, width, height], [x3, y3, width3, height3]]</code> which is fine for the OP&#39;s requirements"}, {"owner": {"reputation": 4469, "user_id": 6342812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e9e8f53f02cc9013f635a6bb67647d?s=128&d=identicon&r=PG&f=1", "display_name": "rassar", "link": "https://stackoverflow.com/users/6342812/rassar"}, "reply_to_user": {"reputation": 308, "user_id": 4544199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa96bcc30fc1115fc40749e7338f2638?s=128&d=identicon&r=PG&f=1", "display_name": "PMARINA", "link": "https://stackoverflow.com/users/4544199/pmarina"}, "edited": false, "score": 1, "creation_date": 1480558801, "post_id": 40901398, "comment_id": 69016720, "body": "@PMARINA essentially each group of coordinates can be treated as an object"}, {"owner": {"reputation": 308, "user_id": 4544199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa96bcc30fc1115fc40749e7338f2638?s=128&d=identicon&r=PG&f=1", "display_name": "PMARINA", "link": "https://stackoverflow.com/users/4544199/pmarina"}, "edited": false, "score": 0, "creation_date": 1480558959, "post_id": 40901398, "comment_id": 69016753, "body": "@rassar Shouldn&#39;t it be if j not in rects_clicked: rects_clicked.append(j) else remove j? Just a suggestion for op, object oriented programming would make it a lot cleaner, as if anything but primitives are stored in the lists, it could cause issues."}, {"owner": {"reputation": 4469, "user_id": 6342812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e9e8f53f02cc9013f635a6bb67647d?s=128&d=identicon&r=PG&f=1", "display_name": "rassar", "link": "https://stackoverflow.com/users/6342812/rassar"}, "reply_to_user": {"reputation": 308, "user_id": 4544199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa96bcc30fc1115fc40749e7338f2638?s=128&d=identicon&r=PG&f=1", "display_name": "PMARINA", "link": "https://stackoverflow.com/users/4544199/pmarina"}, "edited": false, "score": 1, "creation_date": 1480559254, "post_id": 40901398, "comment_id": 69016826, "body": "@PMARINA that&#39;s true but Theo isn&#39;t using objects and it probably won&#39;t matter that much. I could add a basic class if you really want me to."}, {"owner": {"reputation": 308, "user_id": 4544199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa96bcc30fc1115fc40749e7338f2638?s=128&d=identicon&r=PG&f=1", "display_name": "PMARINA", "link": "https://stackoverflow.com/users/4544199/pmarina"}, "edited": false, "score": 0, "creation_date": 1480559625, "post_id": 40901398, "comment_id": 69016938, "body": "@rassar just a suggestion for op"}], "tags": [], "owner": {"reputation": 4469, "user_id": 6342812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e9e8f53f02cc9013f635a6bb67647d?s=128&d=identicon&r=PG&f=1", "display_name": "rassar", "link": "https://stackoverflow.com/users/6342812/rassar"}, "is_accepted": true, "score": 2, "last_activity_date": 1480559114, "last_edit_date": 1480559114, "creation_date": 1480557577, "answer_id": 40901398, "question_id": 40900417, "link": "https://stackoverflow.com/questions/40900417/pygame-how-do-i-check-if-my-rect-has-already-been-clicked/40901398#40901398", "title": "Pygame - How do I check if my rect has already been clicked?", "body": "<p>Try having a list, like this:</p>\n\n<pre><code>rects_clicked = []\n</code></pre>\n\n<p>Then, in your event code:</p>\n\n<pre><code>if j not in rects_clicked:\n    #undisplay text\n    rects_clicked.append(j)\nelse:\n    #display text\n    rects_clicked.remove(j)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 308, "user_id": 4544199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa96bcc30fc1115fc40749e7338f2638?s=128&d=identicon&r=PG&f=1", "display_name": "PMARINA", "link": "https://stackoverflow.com/users/4544199/pmarina"}, "is_accepted": false, "score": 1, "last_activity_date": 1480558276, "creation_date": 1480558276, "answer_id": 40901500, "question_id": 40900417, "link": "https://stackoverflow.com/questions/40900417/pygame-how-do-i-check-if-my-rect-has-already-been-clicked/40901500#40901500", "title": "Pygame - How do I check if my rect has already been clicked?", "body": "<p>I would use a 2d list containing Booleans. When the rectangle is clicked, I would say <code>list[xCoordOfRectangle][yCoordOfRectangle] = !list[xCoordOfRectangle][yCoordOfRectangle]</code>. Then, in the drawing method, I would say:</p>\n\n<pre><code>for i in list:\n    for j in i: \n        if(j): \n            #information drawing function goes here\n        else:\n            #Solid/Empty Rectangle drawing function goes here\n</code></pre>\n\n<p>Note that you would need to initialize <code>list</code> to have false for every rectangle. Also note that if the rectangles are not arranged in a rectangular fashion, you would need to use numbers in the following way: 1 is assigned, true; 2 is assigned, false; 3 is unassigned (sort of like null). Either that, or you could just have a one-dimensional list to store the Booleans and then keep track of which element in the list is which element. </p>\n"}], "owner": {"reputation": 741, "user_id": 5455941, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9d15614985a2ae4540c08f7987341c1e?s=128&d=identicon&r=PG&f=1", "display_name": "data_pi", "link": "https://stackoverflow.com/users/5455941/data-pi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 40901398, "answer_count": 2, "score": 1, "last_activity_date": 1480560584, "creation_date": 1480550372, "last_edit_date": 1480560584, "question_id": 40900417, "link": "https://stackoverflow.com/questions/40900417/pygame-how-do-i-check-if-my-rect-has-already-been-clicked", "title": "Pygame - How do I check if my rect has already been clicked?", "body": "<p>What I'm trying to do is if a rect has been clicked, it is selected and text will display, but if its clicked again, then it is de-seleced and the text goes away.</p>\n\n<p>list_of_rect is a list of coordinates (x, y, width, height) representing the position and size of the rect.</p>\n\n<p>render_display just shows the screen with text.</p>\n\n<pre><code>if event.type == pygame.MOUSEBUTTONUP and event.button == 1:\n    x, y = event.pos\n    for i in range(len(list_of_rect)):\n        j = list_of_rect[i]\n        if j[0][0] &lt;= x &lt;= (j[0][0] + j[0][2]) and j[0][1] &lt;= y &lt;= \\\n                (j[0][1] + j[0][3]):\n                render_display(screen, text)\n</code></pre>\n\n<p><strong>EDIT</strong>: One idea I was thinking was to keep track of the rectangle that has been clicked on. But I'm not sure how to implement this</p>\n"}, {"tags": ["python", "io", "stream", "response", "tar"], "answers": [{"tags": [], "owner": {"reputation": 2644, "user_id": 4607929, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-irynNdoGHgQ/AAAAAAAAAAI/AAAAAAAAAEQ/hf45GdX0-GA/photo.jpg?sz=128", "display_name": "afraisse", "link": "https://stackoverflow.com/users/4607929/afraisse"}, "is_accepted": false, "score": 2, "last_activity_date": 1506456165, "creation_date": 1506456165, "answer_id": 46434873, "question_id": 40900292, "link": "https://stackoverflow.com/questions/40900292/reading-a-httpresponse-to-a-tar-file/46434873#46434873", "title": "Reading a HTTPResponse to a tar file", "body": "<p>The stream is raw tar data, so first, you need to write it to a file:</p>\n\n<pre><code>ctnr = cli.create_container('busybox', 'true')\nwith tempfile.NamedTemporaryFile() as tmp:\n    (data, _) = ctnr.get_archive('/bin/sh')\n    for chunck in data.stream():\n        tmp.write(chunck)\n</code></pre>\n\n<p>Then, open this file as a tar archive and extract it.</p>\n\n<pre><code>tmp.seek(0)\nwith tarfile.open(mode='r', fileobj=tmp) as tar:\n    tar.extractall()\n    tar.close()\n</code></pre>\n\n<p>Note that I used the high-level api.</p>\n"}], "owner": {"reputation": 9123, "user_id": 1040718, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/u0SVy.jpg?s=128&g=1", "display_name": "cybertextron", "link": "https://stackoverflow.com/users/1040718/cybertextron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1506456165, "creation_date": 1480549516, "question_id": 40900292, "link": "https://stackoverflow.com/questions/40900292/reading-a-httpresponse-to-a-tar-file", "title": "Reading a HTTPResponse to a tar file", "body": "<p>I'm using <a href=\"https://docker-py.readthedocs.io/en/latest/api/#get_archive\" rel=\"nofollow noreferrer\">docker-py</a> to read files and folders from a container. As I use the method <code>get_archive()</code> I want to save it to a tar file, since it returns a tuple of a raw tar data stream, and the stats:</p>\n\n<pre><code>&gt;&gt;&gt; import docker\n&gt;&gt;&gt; cli = docker.Client()\n&gt;&gt;&gt; ctnr = cli.create_container('busybox', 'true')\n&gt;&gt;&gt; stream, stat = cli.get_archive(ctnr, '/bin/sh')\n&gt;&gt;&gt; print(stat)\n{u'linkTarget': u'', u'mode': 493, u'mtime': u'2015-09-16T12:34:23-07:00', u'name': u'sh', u'size': 962860}\n</code></pre>\n\n<p>The <code>stream</code> object is a <code>requests.packages.urllib3.response.HTTPResponse</code>. I want to read the content on the stream and write it to a tar file. How can I accomplish this? I tried a bunch of things, but it only worked with files, but not with directories.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 12541928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f25e1dd3b74203c3cb73134aadc6bfa0?s=128&d=identicon&r=PG&f=1", "display_name": "Sowmya", "link": "https://stackoverflow.com/users/12541928/sowmya"}, "edited": false, "score": 0, "creation_date": 1603394175, "post_id": 40900221, "comment_id": 114031818, "body": "Is this one faster as compared to the in-built <code>cumcount()</code>?"}], "tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": false, "score": 8, "last_activity_date": 1480549058, "creation_date": 1480549058, "answer_id": 40900221, "question_id": 40900195, "link": "https://stackoverflow.com/questions/40900195/pandas-cumulative-count/40900221#40900221", "title": "Pandas cumulative count", "body": "<p>You can just compare the column against the value of interest and call <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.cumsum.html\" rel=\"noreferrer\"><code>cumsum</code></a>:</p>\n\n<pre><code>In [12]:\ndf['obj1_count'] = (df['object'] == 'obj1').cumsum()\ndf['obj2_count'] = (df['object'] == 'obj2').cumsum()\ndf\n\nOut[12]:\n      time object  obj1_count  obj2_count\nidx                                      \n0    04:10   obj1           1           0\n1    04:10   obj1           2           0\n2    04:11   obj1           3           0\n3    04:12   obj2           3           1\n4    04:12   obj2           3           2\n5    04:12   obj1           4           2\n6    04:13   obj2           4           3\n</code></pre>\n\n<p>Here the comparison will produce a boolean series:</p>\n\n<pre><code>In [13]:\ndf['object'] == 'obj1'\n\nOut[13]:\nidx\n0     True\n1     True\n2     True\n3    False\n4    False\n5     True\n6    False\nName: object, dtype: bool\n</code></pre>\n\n<p>when you call <code>cumsum</code> on the above the <code>True</code> values are converted to <code>1</code> and <code>False</code> to <code>0</code> and are summed cumulatively</p>\n"}, {"tags": [], "owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "is_accepted": false, "score": 3, "last_activity_date": 1480549989, "creation_date": 1480549989, "answer_id": 40900364, "question_id": 40900195, "link": "https://stackoverflow.com/questions/40900195/pandas-cumulative-count/40900364#40900364", "title": "Pandas cumulative count", "body": "<p>You can generalize this process by getting the <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.cumsum.html\" rel=\"nofollow noreferrer\"><code>cumsum</code></a> of <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.get_dummies.html\" rel=\"nofollow noreferrer\"><code>pd.get_dummies</code></a>.  This should work for an arbitrary number of objects you want to count, without needing to specify each one individually:</p>\n\n<pre><code># Get the cumulative counts.\ncounts = pd.get_dummies(df['object']).cumsum()\n\n# Rename the count columns as appropriate.\ncounts = counts.rename(columns=lambda col: col+'_count')\n\n# Join the counts to the original df.\ndf = df.join(counts)\n</code></pre>\n\n<p>The resulting output:</p>\n\n<pre><code>    time object  obj1_count  obj2_count\n0  04:10   obj1           1           0\n1  04:10   obj1           2           0\n2  04:11   obj1           3           0\n3  04:12   obj2           3           1\n4  04:12   obj2           3           2\n5  04:12   obj1           4           2\n6  04:13   obj2           4           3\n</code></pre>\n\n<p>You can omit the <code>rename</code> step if it's acceptable to use count as a prefix instead of a suffix, i.e. <code>'count_obj1'</code> instead of <code>'obj1_count'</code>. Simply use the <code>prefix</code> parameter of <code>pd.get_dummies</code>:</p>\n\n<pre><code> counts = pd.get_dummies(df['object'], prefix='count').cumsum()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 2, "last_activity_date": 1480579643, "creation_date": 1480579643, "answer_id": 40905493, "question_id": 40900195, "link": "https://stackoverflow.com/questions/40900195/pandas-cumulative-count/40905493#40905493", "title": "Pandas cumulative count", "body": "<p>Here's a way using numpy</p>\n\n<pre><code>u, iv = np.unique(\n    df.object.values,\n    return_inverse=True\n)\n\nobjcount = pd.DataFrame(\n    (iv[:, None] == np.arange(len(u))).cumsum(0),\n    df.index, u\n)\npd.concat([df, objcount], axis=1)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/mZ5um.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mZ5um.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 2656, "user_id": 6416957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c64e64e51811a63d11d705addeba8e9a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex  Glinsky", "link": "https://stackoverflow.com/users/6416957/alex-glinsky"}, "is_accepted": false, "score": 19, "last_activity_date": 1543251427, "last_edit_date": 1543251427, "creation_date": 1531735674, "answer_id": 51359339, "question_id": 40900195, "link": "https://stackoverflow.com/questions/40900195/pandas-cumulative-count/51359339#51359339", "title": "Pandas cumulative count", "body": "<p>There is a special function for such operation: <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.groupby.GroupBy.cumcount.html\" rel=\"noreferrer\"><code>cumcount</code></a></p>\n\n<pre><code>&gt;&gt;&gt; df = pd.DataFrame([['a'], ['a'], ['a'], ['b'], ['b'], ['a']], columns=['A'])\n&gt;&gt;&gt; df\n   A\n0  a\n1  a\n2  a\n3  b\n4  b\n5  a\n&gt;&gt;&gt; df.groupby('A').cumcount()\n0    0\n1    1\n2    2\n3    0\n4    1\n5    3\ndtype: int64\n&gt;&gt;&gt; df.groupby('A').cumcount(ascending=False)\n0    3\n1    2\n2    1\n3    1\n4    0\n5    0\n dtype: int64\n</code></pre>\n"}], "owner": {"reputation": 249, "user_id": 5203672, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/33727e0b560a873fe5ddf32cbb77dff0?s=128&d=identicon&r=PG&f=1", "display_name": "jincept", "link": "https://stackoverflow.com/users/5203672/jincept"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18684, "favorite_count": 6, "closed_date": 1576363017, "answer_count": 4, "score": 11, "last_activity_date": 1543251427, "creation_date": 1480548843, "question_id": 40900195, "link": "https://stackoverflow.com/questions/40900195/pandas-cumulative-count", "closed_reason": "Duplicate", "title": "Pandas cumulative count", "body": "<p>I have a data frame like this:</p>\n\n<pre><code>0        04:10  obj1\n1        04:10  obj1\n2        04:11  obj1\n3        04:12  obj2\n4        04:12  obj2\n5        04:12  obj1\n6        04:13  obj2\n</code></pre>\n\n<p>Wanted to get a cumulative count for all the objects like this:</p>\n\n<pre><code>idx      time   object   obj1_count   obj2_count \n0        04:10  obj1        1             0\n1        04:10  obj1        2             0\n2        04:11  obj1        3             0\n3        04:12  obj2        3             1\n4        04:12  obj2        3             2\n5        04:12  obj1        4             2\n6        04:13  obj2        4             3\n</code></pre>\n\n<p>Tried playing with cumsum but not sure that is the right way. Any suggestions?</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1480548316, "post_id": 40900063, "comment_id": 69013924, "body": "If this indeed is Python, then yes, I can spot the flaw. Your indentation is <i>way</i> off."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1480548931, "post_id": 40900063, "comment_id": 69014169, "body": "<code>if (l + r &gt; n):</code> - how is that an impossible case?"}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1480550507, "creation_date": 1480550507, "answer_id": 40900431, "question_id": 40900063, "link": "https://stackoverflow.com/questions/40900063/failing-hidden-codefights-test-cant-find-flaw-in-code/40900431#40900431", "title": "Failing hidden CodeFights test - can&#39;t find flaw in code", "body": "<p>As user2357112 noted, you have rejected some valid cases, such as 11, 5, 9: that still permits 6+5 as a solution.</p>\n\n<p>You have also failed to reject an invalid case due to integer division, such as 11, 2, 5, where n == 2*r + 1; however, in these cases, your calculations naturally return 0.\n<em>I'm wrong here: <strong>r + r &lt; n</strong> will catch this case, but this means that your r &lt; (n/2) case is redundant</em></p>\n\n<p>If you still have trouble with your testing, please include your test classes and test vectors (input sets).</p>\n"}], "owner": {"reputation": 13, "user_id": 5370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5967db6e748825e9817c0d702807345c?s=128&d=identicon&r=PG&f=1", "display_name": "John Lance", "link": "https://stackoverflow.com/users/5370018/john-lance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1004, "favorite_count": 0, "accepted_answer_id": 40900431, "answer_count": 1, "score": 0, "last_activity_date": 1480550638, "creation_date": 1480548146, "last_edit_date": 1480550638, "question_id": 40900063, "link": "https://stackoverflow.com/questions/40900063/failing-hidden-codefights-test-cant-find-flaw-in-code", "title": "Failing hidden CodeFights test - can&#39;t find flaw in code", "body": "<p>Here's the challenge I'm failing a hidden test on:</p>\n\n<blockquote>\n  <p>Given integers n, l and r, find the number of ways to represent n as a sum of two integers A and B such that l \u2264 A \u2264 B \u2264 r.</p>\n</blockquote>\n\n<p>Here's my code:</p>\n\n<pre><code>def countSumOfTwoRepresentations2(n, l, r):\n    #initializing return variable\n    totalcount = 0\n    #returns 0 in impossible cases\n    if (l + r &gt; n):\n        return 0\n    if (r + r &lt; n):\n        return 0\n    if (r &lt; (n/2)) or (l &gt; (n/2)):\n        return 0\n    # finding the total number of possibilities\n    p = n / 2\n    # finding which if l or r is further from 0 or n, respectively\n    c = max((n-r),l)\n    # removing impossible cases\n    totalcount = (p - c) + 1\n    return totalcount\n</code></pre>\n\n<p>It passes all the tests I can see the inputs for (and every custom one I could think of), but fails on one of the hidden ones. Any obvious flaws I'm missing? Thanks</p>\n"}, {"tags": ["python", "numpy", "matrix", "compare"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 4200256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mYrFm.jpg?s=128&g=1", "display_name": "mnekkach", "link": "https://stackoverflow.com/users/4200256/mnekkach"}, "edited": false, "score": 0, "creation_date": 1480869599, "post_id": 40900142, "comment_id": 69130994, "body": "Thanks a lot it is exactly what I wanted"}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 117, "user_id": 4200256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mYrFm.jpg?s=128&g=1", "display_name": "mnekkach", "link": "https://stackoverflow.com/users/4200256/mnekkach"}, "edited": false, "score": 0, "creation_date": 1480873905, "post_id": 40900142, "comment_id": 69132543, "body": "@nekcorp So tell this to the community by accepting/voting the answer. ;-)"}], "tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": true, "score": 1, "last_activity_date": 1480548539, "creation_date": 1480548539, "answer_id": 40900142, "question_id": 40900034, "link": "https://stackoverflow.com/questions/40900034/python-extract-matrix-a-into-matrix-b/40900142#40900142", "title": "Python - Extract matrix a into matrix b", "body": "<p>First off all since your arrays ar 3d arrays you should squeeze the size to convert them to 2d arrays for the ease of computation.</p>\n\n<pre><code>In [27]: Matrix_A = np.squeeze(Matrix_A)\n\nIn [28]: Matrix_B = np.squeeze(Matrix_B)\n</code></pre>\n\n<p>Then you can use <code>np.in1d</code> to find the indices of the common first columns and extract them with a simple indexing:</p>\n\n<pre><code>In [29]: Matrix_B[np.in1d(Matrix_B[:, 0],Matrix_A[:, 0])]\nOut[29]: \narray([[ 10.  ,   2.7 ,   4.8 ,  -5.8 ],\n       [ 20.  ,  12.4 ,  -7.1 ,   4.9 ],\n       [ 30.  ,  -6.8 ,   0.47,   3.8 ],\n       [ 40.  ,  16.2 ,   5.7 ,  -8.3 ]])\n\nIn [30]: Matrix_B[np.logical_not(np.in1d(Matrix_B[:, 0],Matrix_A[:, 0]))]\nOut[30]: \narray([[ 15. ,  -1.4,  -6.4,   8.1],\n       [ 25. ,  -1.5,   6.2,  -4.8],\n       [ 35. ,   5.4,  -4.8,  10.5]])\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 4200256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mYrFm.jpg?s=128&g=1", "display_name": "mnekkach", "link": "https://stackoverflow.com/users/4200256/mnekkach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 40900142, "answer_count": 1, "score": 0, "last_activity_date": 1480548739, "creation_date": 1480548006, "last_edit_date": 1480548739, "question_id": 40900034, "link": "https://stackoverflow.com/questions/40900034/python-extract-matrix-a-into-matrix-b", "title": "Python - Extract matrix a into matrix b", "body": "<p>I would like to extract matrix A (4,4) into matrix b (7,4).</p>\n\n<p>Below matrix :</p>\n\n<pre><code>&gt;&gt;&gt; Matrix_A = numpy.array([[[10,1.5,-3.8,8.0],[20,10.2,5.2,6.7],[30,0.5,-6.2,-7.1],[40,-0.7,-0.6,-0.5]]])\n&gt;&gt;&gt; Matrix_A\narray([[[ 10. ,   1.5,  -3.8,   8. ],\n        [ 20. ,  10.2,   5.2,   6.7],\n        [ 30. ,   0.5,  -6.2,  -7.1],\n        [ 40. ,  -0.7,  -0.6,  -0.5]]])\n\n&gt;&gt;&gt; Matrix_B = numpy.array([[[10,2.7,4.8,-5.8],[15,-1.4,-6.4,8.1],[20,12.4,-7.1,4.9],[25,-1.5,6.2,-4.8],[30,-6.8,0.47,3.8],[35,5.4,-4.8,10.5],[40,16.2,5.7,-8.3]]])\n&gt;&gt;&gt; Matrix_B\narray([[[ 10.  ,   2.7 ,   4.8 ,  -5.8 ],\n        [ 15.  ,  -1.4 ,  -6.4 ,   8.1 ],\n        [ 20.  ,  12.4 ,  -7.1 ,   4.9 ],\n        [ 25.  ,  -1.5 ,   6.2 ,  -4.8 ],\n        [ 30.  ,  -6.8 ,   0.47,   3.8 ],\n        [ 35.  ,   5.4 ,  -4.8 ,  10.5 ],\n        [ 40.  ,  16.2 ,   5.7 ,  -8.3 ]]])\n</code></pre>\n\n<p>The result I would like is :</p>\n\n<pre><code>    &gt;&gt;&gt; Matrix_A_extract_from_Matrix_B\narray([[[ 10.  ,   2.7 ,   4.8 ,  -5.8 ],\n        [ 20.  ,  12.4 ,  -7.1 ,   4.9 ],\n        [ 30.  ,  -6.8 ,   0.47,   3.8 ],\n        [ 40.  ,  16.2 ,   5.7 ,  -8.3 ]]])\n</code></pre>\n\n<p>And if it is possible I would like to get a matrix R containing the rest as you can see below :</p>\n\n<pre><code>    &gt;&gt;&gt; Matrix_R\narray([[[ 15. ,  -1.4,  -6.4,   8.1],\n        [ 25. ,  -1.5,   6.2,  -4.8],\n        [ 35. ,   5.4,  -4.8,  10.5]]])\n</code></pre>\n\n<p>The main goal is to compare <strong>Matrix_A</strong> and <strong>Matrix_A_extract_from_Matrix_B</strong>.</p>\n\n<p>My real problem is to compare matrix with thousands of lines, Matrix_A et Matrix B it is just an example to simplify the problem.</p>\n\n<p>Thanks a lot for your help. </p>\n"}, {"tags": ["python", "python-3.x", "loops", "if-statement", "while-loop"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1480547933, "post_id": 40900014, "comment_id": 69013801, "body": "That code isn&#39;t syntactically valid. Also it&#39;s only indented with single spaces, making it very hard to read. Give a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that <b>actually recreates the issue</b>."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1480548190, "post_id": 40900014, "comment_id": 69013883, "body": "Tip: <code>if userinput[:2].lower() in {&#39;ye&#39;, &#39;ya&#39;}:</code>"}, {"owner": {"reputation": 135, "user_id": 7076186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JxpCE.jpg?s=128&g=1", "display_name": "adriaanbd", "link": "https://stackoverflow.com/users/7076186/adriaanbd"}, "edited": false, "score": 0, "creation_date": 1480548683, "post_id": 40900014, "comment_id": 69014056, "body": "Thanks jon, its a long code, so I had to strip it down. I have added double spaces as indentation to make it easier to read. I&#39;ve also added how I intend to split the three worded name input."}], "answers": [{"comments": [{"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "edited": false, "score": 0, "creation_date": 1480548386, "post_id": 40900052, "comment_id": 69013947, "body": "I presume that&#39;s just a typo in the question, not in the OP&#39;s actual code."}, {"owner": {"reputation": 135, "user_id": 7076186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JxpCE.jpg?s=128&g=1", "display_name": "adriaanbd", "link": "https://stackoverflow.com/users/7076186/adriaanbd"}, "edited": false, "score": 0, "creation_date": 1480548455, "post_id": 40900052, "comment_id": 69013971, "body": "You&#39;re right, I forgot to type it into my post, thanks."}], "tags": [], "owner": {"reputation": 55, "user_id": 4897245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a584bf828ca5f7cd008fb9be8989095a?s=128&d=identicon&r=PG", "display_name": "alexandersix", "link": "https://stackoverflow.com/users/4897245/alexandersix"}, "is_accepted": false, "score": 0, "last_activity_date": 1480548084, "creation_date": 1480548084, "answer_id": 40900052, "question_id": 40900014, "link": "https://stackoverflow.com/questions/40900014/why-doesnt-the-second-part-of-this-loop-work/40900052#40900052", "title": "Why doesn&#39;t the second part of this loop work?", "body": "<p>It LOOKS as though you're missing the ending ' on the print command inside your elif ('Does the name include....), causing the rest of it to be taken as more text input. Try adding that ' and see if that helps!</p>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 7076186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JxpCE.jpg?s=128&g=1", "display_name": "adriaanbd", "link": "https://stackoverflow.com/users/7076186/adriaanbd"}, "edited": false, "score": 0, "creation_date": 1480550010, "post_id": 40900116, "comment_id": 69014496, "body": "Thank you @David542, I&#39;m going to read about these solutions to understand them and give them a try. I&#39;m learning Python as I work through this program."}], "tags": [], "owner": {"reputation": 96308, "user_id": 651174, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2e2d79b9350ef4ebf04ac0ad5816a5c3?s=128&d=identicon&r=PG", "display_name": "David542", "link": "https://stackoverflow.com/users/651174/david542"}, "is_accepted": false, "score": 0, "last_activity_date": 1480548435, "creation_date": 1480548435, "answer_id": 40900116, "question_id": 40900014, "link": "https://stackoverflow.com/questions/40900014/why-doesnt-the-second-part-of-this-loop-work/40900116#40900116", "title": "Why doesn&#39;t the second part of this loop work?", "body": "<p>First, you could have more complex names, for example, \"Oscar De La Hoya\", which would skip because the name would have length = 4. Ignoring 'difficult names', the next thing would be to work on cleaning the user's input. I would clean the user's input like so:</p>\n\n<pre><code>userinput = input().lower().strip()\n</code></pre>\n\n<p>This way you can make is simpler for yourself and also more readable.</p>\n\n<p>Now you can do:</p>\n\n<pre><code>if userinput == 'yes':\n    firstname, middlename, lastname = providedname.split()\nelse:\n    firstname, lastname, secondlastname = providedname.split()\n</code></pre>\n\n<p>Finally (as the other answer states), if a 'valid' input is given, you'll want to break out of the while loop with a <code>break</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 7076186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JxpCE.jpg?s=128&g=1", "display_name": "adriaanbd", "link": "https://stackoverflow.com/users/7076186/adriaanbd"}, "edited": false, "score": 0, "creation_date": 1480550146, "post_id": 40900125, "comment_id": 69014530, "body": "Thanks @Dalvenjia, I have never really understood the use of the break statement in practice. I&#39;ll give it a try."}], "tags": [], "owner": {"reputation": 1587, "user_id": 3520965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31fd95e9573fb19ea05a8f928d905f39?s=128&d=identicon&r=PG&f=1", "display_name": "Dalvenjia", "link": "https://stackoverflow.com/users/3520965/dalvenjia"}, "is_accepted": false, "score": 0, "last_activity_date": 1480548472, "creation_date": 1480548472, "answer_id": 40900125, "question_id": 40900014, "link": "https://stackoverflow.com/questions/40900014/why-doesnt-the-second-part-of-this-loop-work/40900125#40900125", "title": "Why doesn&#39;t the second part of this loop work?", "body": "<p>You have 2 main problems (ignoring all the syntax errors assuming that they are just here on your question but your actual code is OK)</p>\n\n<p>First you are never breaking out of the while loop, you must use the <code>break</code> statement anywhere you want to exit the loop.</p>\n\n<p>Second you are overwriting the <code>providedname</code> at the end of the loop, that will leave you without the actual name, the variable will be quit even after the correct name was provided.</p>\n"}, {"comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1480548736, "post_id": 40900152, "comment_id": 69014077, "body": "<code>startswith()</code> will take a tuple of alternatives, so you don&#39;t need that generator expression. <code>startswith((&quot;ye&quot;, &quot;ya&quot;))</code> will do ya."}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 1, "last_activity_date": 1480571638, "last_edit_date": 1495540381, "creation_date": 1480548607, "answer_id": 40900152, "question_id": 40900014, "link": "https://stackoverflow.com/questions/40900014/why-doesnt-the-second-part-of-this-loop-work/40900152#40900152", "title": "Why doesn&#39;t the second part of this loop work?", "body": "<p>You can't use <code>or</code> like that. It makes sense in English, but it doesn't work in Python. One way to express what you're doing is with a mini <code>for</code> loop along with the <code>any</code> function, like so:</p>\n\n<pre><code>if any(userinput.startswith(string) for string in ['ye', 'Ye', 'YE', 'ya', 'Ya', 'YA']):\n</code></pre>\n\n<p>It reads almost like English if you shuffle the word order around a bit:</p>\n\n<blockquote>\n  <p>If the user input starts with any of the strings in this list...</p>\n</blockquote>\n\n<p>Even better is to lowercase the input string first. Then you don't have to check so many combinations.</p>\n\n<pre><code>userinput = input().casefold()    # Python 3.3+\nuserinput = input().lower()       # Earlier\n\nif any(userinput.startswith(string) for string in ['ye', 'ya']):\n</code></pre>\n\n<p>As it happens, <code>startswith</code> can also accept a list of strings. You can actually ditch the all the <code>any()</code> machinery and have simply:</p>\n\n<pre><code>if userinput.startswith(('ye', 'ya')):\n</code></pre>\n\n<p>(Thanks to <a href=\"https://stackoverflow.com/users/416467/kindall\">@kindall</a> for that tip.)</p>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 7076186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JxpCE.jpg?s=128&g=1", "display_name": "adriaanbd", "link": "https://stackoverflow.com/users/7076186/adriaanbd"}, "edited": false, "score": 0, "creation_date": 1480551066, "post_id": 40900261, "comment_id": 69014819, "body": "Thank you very much @cricket_007 , I ran it through the interpreter and realized I had completely misunderstood the <code>or</code> and the <code>startswith</code>. Your solution is on point and really helpful."}], "tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": true, "score": 0, "last_activity_date": 1480549259, "creation_date": 1480549259, "answer_id": 40900261, "question_id": 40900014, "link": "https://stackoverflow.com/questions/40900014/why-doesnt-the-second-part-of-this-loop-work/40900261#40900261", "title": "Why doesn&#39;t the second part of this loop work?", "body": "<p>So, just run this in the interpreter</p>\n\n<pre><code>&gt;&gt;&gt; 'ye' or 'Ye' or 'YE' or 'ya' or 'Ya' or 'YA'\n'ye'\n</code></pre>\n\n<p>Your <code>startswith</code> isn't working the way you think it does. </p>\n\n<p>Other than that, you can shorten that statement up if you lowercase your strings. </p>\n\n<p>Runnable example</p>\n\n<pre><code>while True:\n  providedname = input ('enter name or type quit or q to exit: ')\n\n  if providedname in {'quit', 'q'}:\n    break\n\n  names = providedname.split()\n\n  if len(names) == 4:\n    pass\n  elif len(names) == 3:\n    userinput = input('Does the name include a middle name or middle initial? Please type yes or no:')\n\n    if userinput[:2].lower() in {'ye', 'ya'}:\n      firstname, middlename, lastname = names\n    elif userinput[:2].lower() in {'no' , 'na'}:\n      firstname, lastname, secondlastname = names\n    else:\n      pass\n\n    print(firstname, lastname)\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 7076186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JxpCE.jpg?s=128&g=1", "display_name": "adriaanbd", "link": "https://stackoverflow.com/users/7076186/adriaanbd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1480591624, "accepted_answer_id": 40900261, "answer_count": 5, "score": 0, "last_activity_date": 1480571638, "creation_date": 1480547855, "last_edit_date": 1480548255, "question_id": 40900014, "link": "https://stackoverflow.com/questions/40900014/why-doesnt-the-second-part-of-this-loop-work", "closed_reason": "Not suitable for this site", "title": "Why doesn&#39;t the second part of this loop work?", "body": "<p>The user should insert a name as an input and then confirm with a yes or no (or any of its derivatives) if the 3 worded name includes a middle name or not. So far, I've gotten the loop to work if the answer is yes; however it keeps looping the question if the answer is no.</p>\n\n<p>The purpose: if the answer is yes, the program will understand its a 3 worded name with a middle name and therefore execute naming combinations with the middle name; if its no, the program will understand its a 3 worded name with a second last name instead of a middle name and therefore execute naming combinations accordingly.</p>\n\n<p>Please note I have exluded a lot of the code for sharing purposes.</p>\n\n<p>What I'm I doing wrong? My question is in regards to the elif part of the loop.</p>\n\n<pre><code>print ('enter name')\nprovidedname = input ()\nwhile providedname != 'quit':\n  if len(providedname.split())==4:\n    pass\n\n  elif len(providedname.split())==3:\n    print ('Does the name include a middle name or middle initial? Please type yes or no:')\n    userinput = input()\n\n    if userinput.startswith ('ye' or 'Ye' or 'YE' or 'ya' or 'Ya' or 'YA'):\n      firstname, middlename, lastname = providedname.split()\n\n    elif userinput.startswith ('no' or 'No' or 'NO' or 'na' or 'Na' or 'NA'):\n      firstname, lastname, secondlastname = providedname.split()\n\n    else:\n      pass\n\n  print ('enter name or type quit or q to exit')\n  providedname=input()\n  continue\n</code></pre>\n"}, {"tags": ["python", "class", "micropython"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 1, "creation_date": 1480547272, "post_id": 40899883, "comment_id": 69013574, "body": "Yes. It bad practice. Why not use a <code>dict()</code>? Must they be class attributes?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 4, "creation_date": 1480547302, "post_id": 40899883, "comment_id": 69013588, "body": "Related: <a href=\"http://stackoverflow.com/q/1389180/3001761\">stackoverflow.com/q/1389180/3001761</a>."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 2, "creation_date": 1480547330, "post_id": 40899883, "comment_id": 69013597, "body": "I can&#39;t think of any obvious pitfalls, but I do find it to be quite gross."}, {"owner": {"reputation": 3620, "user_id": 263101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0476bfada7f9419fce894c737f33927?s=128&d=identicon&r=PG", "display_name": "phoibos", "link": "https://stackoverflow.com/users/263101/phoibos"}, "edited": false, "score": 0, "creation_date": 1480547366, "post_id": 40899883, "comment_id": 69013611, "body": "As I write I DO have methods, I just left them out for the example."}, {"owner": {"reputation": 3381, "user_id": 3572366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb8dea69aa80d1cb9b7bbdb8aebadf9?s=128&d=identicon&r=PG&f=1", "display_name": "sirfz", "link": "https://stackoverflow.com/users/3572366/sirfz"}, "edited": false, "score": 1, "creation_date": 1480547568, "post_id": 40899883, "comment_id": 69013688, "body": "I guess autocomplete over the class&#39; attributes won&#39;t be very useful in IDEs using this method"}, {"owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 0, "creation_date": 1480547680, "post_id": 40899883, "comment_id": 69013730, "body": "Using <code>setattr</code> rather than a <code>__dict__</code> update will let you interface with <code>__slots__</code> or properties"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1480548015, "post_id": 40899883, "comment_id": 69013819, "body": "This works OK until you use other local variables in <code>__init__</code>. You can extract the exact argument names using <code>co_argcount</code> and <code>co_varnames</code> attributes of the function`s code object instead."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1480548169, "post_id": 40899883, "comment_id": 69013875, "body": "@kindall  How do you get other local variables in <code>__init__</code>, when <code>locals()</code> is used on the first line? (serious question)"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1480548295, "post_id": 40899883, "comment_id": 69013915, "body": "The other variables are still locals. But actually, I tried it and you&#39;re right, <code>locals()</code> doesn&#39;t pick them up if they haven&#39;t been assigned values. Never mind!"}, {"owner": {"reputation": 3620, "user_id": 263101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0476bfada7f9419fce894c737f33927?s=128&d=identicon&r=PG", "display_name": "phoibos", "link": "https://stackoverflow.com/users/263101/phoibos"}, "reply_to_user": {"reputation": 3381, "user_id": 3572366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb8dea69aa80d1cb9b7bbdb8aebadf9?s=128&d=identicon&r=PG&f=1", "display_name": "sirfz", "link": "https://stackoverflow.com/users/3572366/sirfz"}, "edited": false, "score": 0, "creation_date": 1480549820, "post_id": 40899883, "comment_id": 69014440, "body": "@sirfz: autocomplete in IDEs is indeed a good point!"}], "answers": [{"comments": [{"owner": {"reputation": 3620, "user_id": 263101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0476bfada7f9419fce894c737f33927?s=128&d=identicon&r=PG", "display_name": "phoibos", "link": "https://stackoverflow.com/users/263101/phoibos"}, "edited": false, "score": 0, "creation_date": 1480549260, "post_id": 40900128, "comment_id": 69014266, "body": "<code>kwargs</code> is not useful in this case: it is not guaranteed that all needed variables are passed in, and unneeded variables could be passed in and stored as instance variables."}, {"owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 3, "creation_date": 1480549309, "post_id": 40900128, "comment_id": 69014275, "body": "Your second approach doesn&#39;t allow for defaults, which are clearly wanted in the question.  In your first approach, exclude <code>self</code> from your iteration"}, {"owner": {"reputation": 19, "user_id": 5346954, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153535270036291/picture?type=large", "display_name": "Anna B Nana", "link": "https://stackoverflow.com/users/5346954/anna-b-nana"}, "reply_to_user": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 0, "creation_date": 1480551249, "post_id": 40900128, "comment_id": 69014874, "body": "Good point, use the first approach if defaults are required. @donkopotamus: setattr expects 3 arguments. the first needs to be an instance of the object. if operating within the class definition, this instance must be self."}, {"owner": {"reputation": 19, "user_id": 5346954, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153535270036291/picture?type=large", "display_name": "Anna B Nana", "link": "https://stackoverflow.com/users/5346954/anna-b-nana"}, "reply_to_user": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 0, "creation_date": 1480551342, "post_id": 40900128, "comment_id": 69014900, "body": "@donkopotamus oops, my bad, I see what you mean.  good point."}, {"owner": {"reputation": 3620, "user_id": 263101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0476bfada7f9419fce894c737f33927?s=128&d=identicon&r=PG", "display_name": "phoibos", "link": "https://stackoverflow.com/users/263101/phoibos"}, "edited": false, "score": 0, "creation_date": 1480551569, "post_id": 40900128, "comment_id": 69014967, "body": "he means that <code>self</code> is included in <code>locals()</code> since it is part of the method signature, so effectively you&#39;re creating the instance variable <code>self.self</code> pointing to, well, <code>self</code>"}, {"owner": {"reputation": 19, "user_id": 5346954, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153535270036291/picture?type=large", "display_name": "Anna B Nana", "link": "https://stackoverflow.com/users/5346954/anna-b-nana"}, "reply_to_user": {"reputation": 3620, "user_id": 263101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0476bfada7f9419fce894c737f33927?s=128&d=identicon&r=PG", "display_name": "phoibos", "link": "https://stackoverflow.com/users/263101/phoibos"}, "edited": false, "score": 0, "creation_date": 1480551883, "post_id": 40900128, "comment_id": 69015049, "body": "@phoibos yeah I realized that right after I wrote the response lol :D"}], "tags": [], "owner": {"reputation": 19, "user_id": 5346954, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153535270036291/picture?type=large", "display_name": "Anna B Nana", "link": "https://stackoverflow.com/users/5346954/anna-b-nana"}, "is_accepted": false, "score": 1, "last_activity_date": 1480551469, "last_edit_date": 1480551469, "creation_date": 1480548495, "answer_id": 40900128, "question_id": 40899883, "link": "https://stackoverflow.com/questions/40899883/python-programmatic-class-instance-variable-initialisation-with-locals/40900128#40900128", "title": "Python: programmatic class instance variable initialisation with locals()", "body": "<p>Try a more pythonic approach:</p>\n\n<pre><code>class C:\n  def __init__(self,a,b=2,c=3,d=4.5,e=5):\n    for k,v in locals().iteritems():\n      setattr(self,k,v)\nc = C(1)\nprint c.a, c.b\n1 2\n</code></pre>\n\n<p>This approach may be a line or two longer, but the line lengths are shorter, and your intent less convoluted.  In addition, anyone who may try to reuse your code will be able to access your objects' attributes as expected. </p>\n\n<p>Hope this helps.</p>\n\n<p>Edit: removed second approach using kwargs bc it does not address default variable requirement.</p>\n\n<p>the important take-away here is that a user of your code would not be able to access your object's attributes as expected if done like your example class B shows.</p>\n"}, {"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1480551911, "post_id": 40900222, "comment_id": 69015057, "body": "Alex Martelli said something <a href=\"http://stackoverflow.com/questions/1389180/python-automatically-initialize-instance-variables#comment1230512_1389224\">should be in the stdlib</a> to avoid this repetition.  And yet, 7 years later, there is nothing.  So..... &#175;\\_(\u30c4)_/&#175; ....  here, have a +1."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 3, "last_activity_date": 1480549088, "creation_date": 1480549088, "answer_id": 40900222, "question_id": 40899883, "link": "https://stackoverflow.com/questions/40899883/python-programmatic-class-instance-variable-initialisation-with-locals/40900222#40900222", "title": "Python: programmatic class instance variable initialisation with locals()", "body": "<p>I would actually suggest using the code shown in <code>class A</code>. What you have is <em>repetitive</em> code, not redundant code, and repetitive isn't <em>always</em> bad. You only have to write <code>__init__</code> once, and keeping one assignment per instance variable is good documentation (explicit and clear) for what instance variables your class expects.</p>\n\n<p>One thing to keep in mind, though, is that <em>too</em> many variables that you can initialize as distinct parameters may be a sign that your class needs to be redesigned. Would some of the individual parameters make more sense being grouped into separate lists, dicts, or even additional classes?</p>\n"}], "owner": {"reputation": 3620, "user_id": 263101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0476bfada7f9419fce894c737f33927?s=128&d=identicon&r=PG", "display_name": "phoibos", "link": "https://stackoverflow.com/users/263101/phoibos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 40900222, "answer_count": 2, "score": 3, "last_activity_date": 1480551469, "creation_date": 1480547046, "last_edit_date": 1480550301, "question_id": 40899883, "link": "https://stackoverflow.com/questions/40899883/python-programmatic-class-instance-variable-initialisation-with-locals", "title": "Python: programmatic class instance variable initialisation with locals()", "body": "<p>I have a class with many instance variables with default values, which optionally can be overridden in instantiantion (note: no mutable default arguments). </p>\n\n<p>Since it's quite redundant to write <code>self.x = x</code> etc. many times, I initialise the variables programmatically.</p>\n\n<p>To illustrate, consider this example (which has, for the sake of brevity, only 5 instance variables and <strong>any methods omitted</strong>):</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code># The \"painful\" way\nclass A:\n    def __init__(self, a, b=2, c=3, d=4.5, e=5):\n        self.a = a\n        self.b = b\n        self.c = c\n        self.d = d\n        self.e = e\n\n# The \"lazy\" way\nclass B:\n    def __init__(self, a, b=2, c=3, d=4.5, e=5):\n        self.__dict__.update({k: v for k, v in locals().items() if k!='self'})\n\n# The \"better lazy\" way suggested\nclass C:\n    def __init__(self, a, b=2, c=3, d=4.5, e=5):\n            for k, v in locals().items():\n                if k != 'self':\n                    setattr(self, k, v)\n\nx = A(1, c=7)\ny = B(1, c=7)\nz = C(1, c=7)\n\nprint(x.__dict__)  # {'d': 4.5, 'c': 7, 'a': 1, 'b': 2, 'e': 5}\nprint(y.__dict__)  # {'d': 4.5, 'c': 7, 'a': 1, 'b': 2, 'e': 5}\nprint(z.__dict__)  # {'d': 4.5, 'c': 7, 'a': 1, 'b': 2, 'e': 5}\n</code></pre>\n\n<p>So to make my life easier, I use the idiom shown in class B, which yields the same result as A. </p>\n\n<p>Is this bad practice? Are there any pitfalls?</p>\n\n<p><strong>Addendum</strong>:\nAnother reason to use this idiom was to save some space - I intended to use it in <a href=\"https://micropython.org/\" rel=\"nofollow noreferrer\" title=\"MicroPython\">MicroPython</a>. <del>For whatever reason</del> <a href=\"https://forum.micropython.org/viewtopic.php?t=1933\" rel=\"nofollow noreferrer\">Because locals work differently there</a>, only the way shown in class A works in it.</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1480547177, "post_id": 40899860, "comment_id": 69013531, "body": "<code>np.fromiter</code> doesn&#39;t do any further allocation. That&#39;s the whole essence of that function. Also, you don&#39;t need to use <code>np.empty</code> if you want to change all of the items at once."}, {"owner": {"reputation": 53, "user_id": 7162823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8235b84f70359a31f0981be3f380056?s=128&d=identicon&r=PG&f=1", "display_name": "onekeystrokeatatime", "link": "https://stackoverflow.com/users/7162823/onekeystrokeatatime"}, "reply_to_user": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1480547397, "post_id": 40899860, "comment_id": 69013616, "body": "@Kasramvd Are you sure about that? I just don&#39;t know. The documentation of the <code>fromiter</code> says that it creates an array. I assumed that it creates a numpy array and then that array gets moved by the operator = to the <code>my_array</code>. But if you know for a fact that no new allocation is done I will believe you."}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1480547513, "post_id": 40899860, "comment_id": 69013667, "body": "If you must support an arbitrary iterator <i>and</i> don&#39;t want any temporary allocation, it will be hard to avoid the simplest <code>for ind, elem in enumerate(iterable): my_array[ind] = elem</code>."}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1480547753, "post_id": 40899860, "comment_id": 69013746, "body": "@onekeystrokeatatime Yes, that&#39;s exactly what this function does. It creates an array from an iterable and assigns it to the target variable. If you are looking for a way to get rid of this, check out my answer."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1480548728, "post_id": 40899860, "comment_id": 69014073, "body": "&quot;I don&#39;t want to do any other allocation than the one done by the numpy.empty() at the beginning.&quot; - you&#39;re coming at this from a C++ perspective, where array allocation is expensive and must be avoided. This is Python. Array allocation is nothing compared to the expenses of JIT-less bytecode interpretation, dynamic dispatch, and individually-allocated 24-byte <code>int</code> objects."}, {"owner": {"reputation": 53, "user_id": 7162823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8235b84f70359a31f0981be3f380056?s=128&d=identicon&r=PG&f=1", "display_name": "onekeystrokeatatime", "link": "https://stackoverflow.com/users/7162823/onekeystrokeatatime"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1480549066, "post_id": 40899860, "comment_id": 69014212, "body": "@user2357112 It is a huge array and the values are updated a few hundreds of thousands of times. If each requires new allocation it doesn&#39;t matter what language one is coming from, the time consumed is large."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1480549404, "post_id": 40899860, "comment_id": 69014308, "body": "@onekeystrokeatatime: If the time consumed by allocations is huge, the time consumed by all the other overhead will be several orders of magnitude huger. Seriously, getting rid of those list comprehensions and genexps and doing your work in NumPy broadcasted operations will be way more important than reducing array allocations."}, {"owner": {"reputation": 53, "user_id": 7162823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8235b84f70359a31f0981be3f380056?s=128&d=identicon&r=PG&f=1", "display_name": "onekeystrokeatatime", "link": "https://stackoverflow.com/users/7162823/onekeystrokeatatime"}, "reply_to_user": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1480549409, "post_id": 40899860, "comment_id": 69014312, "body": "@user4815162342 I was expecting to find the expression <code>for ind, elem in enumerate(iterable): my_array[ind] = elem</code> already packaged in a built in function. Do you know if the Python interpreter compiles that expression as a whole? I still don&#39;t know much about how the execution process works in Python."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1480549624, "post_id": 40899860, "comment_id": 69014377, "body": "@onekeystrokeatatime: That&#39;d be <code>my_array[:] = iterable</code>, as long as the iterable is an actual sequence, and the lengths match. (Lists support arbitrary iterables on the RHS of that statement, but using lists would be a step in the wrong direction.)"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1480550206, "post_id": 40899860, "comment_id": 69014558, "body": "<a href=\"http://ideone.com/Ixe3el\" rel=\"nofollow noreferrer\">Here&#39;s a timing</a> showing what you get if you try to minimize allocations naively, what you get if you just let NumPy do its thing, and what you get if you use the <code>out</code> parameter to NumPy ufuncs to minimize allocations. Letting NumPy do its thing: 150x improvement over the naive allocation minimization. Minimizing allocations with the <code>out</code> parameter: barely noticeable improvement over the idiomatic NumPy code."}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1480576336, "post_id": 40899860, "comment_id": 69022038, "body": "@user2357112 In Python usage, <i>iterable</i> means any object that can be converted to an iterator, covering sequences, generators, and really anything else that implements <code>__iter__</code>. The OP almost certainly doesn&#39;t want to work with arbitrary iterators, but only with other numpy arrays. Anything else is pretty much guaranteed to be too slow."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1480576783, "post_id": 40899860, "comment_id": 69022261, "body": "@user4815162342: Given all the genexps and list comprehensions in the question, I&#39;m thinking the questioner really did mean iterables instead of only other arrays. The questioner is specifically trying <i>not</i> to get another array involved (misguided as that is)."}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1480577468, "post_id": 40899860, "comment_id": 69022551, "body": "@user2357112 Exactly, and it could be the result of interfacing with a large body of existing non-numpy code. Even so, your assessment that <i>Array allocation is nothing compared to the expenses of JIT-less bytecode interpretation, dynamic dispatch, and individually-allocated 24-byte int objects</i> is spot-on. I&#39;ve added an answer that tries to elaborate on the available options."}], "answers": [{"comments": [{"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1480547731, "post_id": 40899963, "comment_id": 69013740, "body": "<code>np.fromiter</code> does a new allocation, it allocates the array it returns. The OP has made it clear that he wants to set the elements of the same array (allocated once at the start) many times, with contents each time coming from an iterator."}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1480547996, "post_id": 40899963, "comment_id": 69013815, "body": "@user4815162342 By allocation I meant it just creates the new array from the iterator and not caching the items in memory and converting them to a numpy array. It&#39;s gets an iterable and converts it to a numpy array."}, {"owner": {"reputation": 53, "user_id": 7162823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8235b84f70359a31f0981be3f380056?s=128&d=identicon&r=PG&f=1", "display_name": "onekeystrokeatatime", "link": "https://stackoverflow.com/users/7162823/onekeystrokeatatime"}, "edited": false, "score": 0, "creation_date": 1480548406, "post_id": 40899963, "comment_id": 69013955, "body": "I am not sure that what you are suggesting is accurate. I tried this code <code>import numpy as np  iterable1 = (x*x for x in range(5)) iterable2 = (x*x + 1.0 for x in range(5)) my_array = np.fromiter(iterable1, np.float) print(my_array) print(hex(id(my_array)))  my_array = np.fromiter(iterable2, np.float) print(my_array) print(hex(id(my_array)))</code> and it looks like the address of <code>my_array</code> changed."}, {"owner": {"reputation": 53, "user_id": 7162823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8235b84f70359a31f0981be3f380056?s=128&d=identicon&r=PG&f=1", "display_name": "onekeystrokeatatime", "link": "https://stackoverflow.com/users/7162823/onekeystrokeatatime"}, "edited": false, "score": 0, "creation_date": 1480548445, "post_id": 40899963, "comment_id": 69013966, "body": "Opps. Python in a comment looses the alignment."}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 53, "user_id": 7162823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8235b84f70359a31f0981be3f380056?s=128&d=identicon&r=PG&f=1", "display_name": "onekeystrokeatatime", "link": "https://stackoverflow.com/users/7162823/onekeystrokeatatime"}, "edited": false, "score": 0, "creation_date": 1480548669, "post_id": 40899963, "comment_id": 69014049, "body": "@onekeystrokeatatime As I said the <code>formiter()</code> directly creates a numpy array from an iterable, if you don&#39;t want this you should do the operations directly on your array."}, {"owner": {"reputation": 53, "user_id": 7162823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8235b84f70359a31f0981be3f380056?s=128&d=identicon&r=PG&f=1", "display_name": "onekeystrokeatatime", "link": "https://stackoverflow.com/users/7162823/onekeystrokeatatime"}, "edited": false, "score": 0, "creation_date": 1480548823, "post_id": 40899963, "comment_id": 69014127, "body": "I will think about it. The problem is that while I can generate the values using a comprehension, the computation is not as simple as in the examples. The values don&#39;t come only from numpy arrays but from other objects too."}, {"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 53, "user_id": 7162823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8235b84f70359a31f0981be3f380056?s=128&d=identicon&r=PG&f=1", "display_name": "onekeystrokeatatime", "link": "https://stackoverflow.com/users/7162823/onekeystrokeatatime"}, "edited": false, "score": 0, "creation_date": 1480549011, "post_id": 40899963, "comment_id": 69014194, "body": "@onekeystrokeatatime In that case you better to update your question with more comprehensive information regarding your problem and/or by specifying the main issue which can be memory or runtime."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1480556019, "post_id": 40899963, "comment_id": 69016090, "body": "Let&#39;s distinguish between allocating an array, and creating a list.  We are guessing that <code>fromiter</code> iterates through the input without creating a temporary list.  That may be the case, but does it matter?"}], "tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": false, "score": 1, "last_activity_date": 1480547877, "last_edit_date": 1480547877, "creation_date": 1480547520, "answer_id": 40899963, "question_id": 40899860, "link": "https://stackoverflow.com/questions/40899860/efficient-way-to-set-values-of-numpy-array-from-iterable/40899963#40899963", "title": "Efficient way to set values of numpy array from iterable", "body": "<p><a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.fromiter.html\" rel=\"nofollow noreferrer\"><code>np.fromiter</code></a> doesn't do any further allocation. It just creates an array from an iterable. That's the whole essence of that function. It also accepts a <code>count</code> argument which allows <code>fromiter</code> to pre-allocate the output array, instead of resizing it on demand.</p>\n\n<p>Also, you don't need to use <code>np.empty</code> if you want to change all of the items at once.</p>\n\n<p>After all, if you are constructing your new array by doing some mathematical operations on a range of numbers you can simply do the operations on a Numpy array as well.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>In [4]: a = np.arange(10)\n\nIn [6]: a**2 + 10\nOut[6]: array([10, 11, 14, 19, 26, 35, 46, 59, 74, 91])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 2, "last_activity_date": 1480569804, "last_edit_date": 1480569804, "creation_date": 1480554812, "answer_id": 40901047, "question_id": 40899860, "link": "https://stackoverflow.com/questions/40899860/efficient-way-to-set-values-of-numpy-array-from-iterable/40901047#40901047", "title": "Efficient way to set values of numpy array from iterable", "body": "<p>First make sure you understand what the variable assignment does:</p>\n\n<pre><code> my_array = numpy.empty(10000, numpy.float)\n my_array = numpy.fromiter(...)\n</code></pre>\n\n<p>the second assignment replaces the first.  The object that the <code>my_array</code> originally referenced is free and gets garbage collected.  That's just basic Python variable handling.  To hang on to the original array (a mutable object), you have to change its values, </p>\n\n<pre><code>my_array[:] = &lt;new values&gt;\n</code></pre>\n\n<p>But the process that generates <code>&lt;new values&gt;</code> will, more than likely, create a temporary buffer (or two or three).  Those values are then copied to the target.  Even <code>x += 1</code> does a buffered calculation.  There are few in-place numpy operations.</p>\n\n<p>Generally trying to second guess numpy's memory allocation doesn't work.  Efficiency can only be measured by time tests, not by guessing  what is happening under the covers.</p>\n\n<p>Don't bother with 'pre-allocation' unless you need to fill it iteratively:</p>\n\n<pre><code>In [284]: my_array = np.empty(10, int)\nIn [285]: for i in range(my_array.shape[0]):\n     ...:     my_array[i] = 2*i+3\nIn [286]: my_array\nOut[286]: array([ 3,  5,  7,  9, 11, 13, 15, 17, 19, 21])\n</code></pre>\n\n<p>Which is a horrible way of creating an array compared to:</p>\n\n<pre><code>In [288]: np.arange(10)*2+3\nOut[288]: array([ 3,  5,  7,  9, 11, 13, 15, 17, 19, 21])\n</code></pre>\n\n<p>the <code>fromiter</code> approach is prettier but not faster.</p>\n\n<pre><code>In [290]: np.fromiter((i*2+3 for i in range(10)),int)\nOut[290]: array([ 3,  5,  7,  9, 11, 13, 15, 17, 19, 21])\n</code></pre>\n\n<p>Some timings:</p>\n\n<pre><code>In [292]: timeit np.fromiter((i*2+3 for i in range(10000)),int)\n100 loops, best of 3: 4.76 ms per loop\n# giving a count drops the time to 4.28 ms\n\nIn [293]: timeit np.arange(10000)*2+3\nThe slowest run took 8.73 times longer than the fastest. This could mean that an intermediate result is being cached.\n10000 loops, best of 3: 47.4 \u00b5s per loop\n\nIn [294]: %%timeit \n     ...: my_array=np.empty(10000,int)\n     ...: for i in range(my_array.shape[0]):\n     ...:     my_array[i] = 2*i+3\n     ...:     \n100 loops, best of 3: 4.72 ms per loop\n\nIn [303]: timeit np.array([i*2+3 for i in range(10000)],int)\n100 loops, best of 3: 4.48 ms per loop\n</code></pre>\n\n<p><code>fromiter</code> takes just as long as an explicit loop, while the pure numpy solution is orders of magnitude faster.  Timewise there is little difference between <code>np.array</code> with a list comprehension and <code>fromiter</code> with the generator.</p>\n\n<p>Creating the array from a pre-existing list takes about 1/3 the time.</p>\n\n<pre><code>In [311]: %%timeit alist=[i*2+3 for i in range(10000)]\n     ...: x=np.array(alist, int)\n     ...: \n1000 loops, best of 3: 1.63 ms per loop\n</code></pre>\n\n<p>Assigning a list to an existing <code>empty</code> array isn't faster.</p>\n\n<pre><code>In [315]: %%timeit alist=[i*2+3 for i in range(10000)]\n     ...: arr = np.empty(10000,int)\n     ...: arr[:] = alist\n1000 loops, best of 3: 1.65 ms per loop\nIn [316]: %%timeit alist=[i*2+3 for i in range(10000)]; arr=np.empty(10000,int)\n     ...: arr[:] = alist\n1000 loops, best of 3: 1.63 ms per loop\n</code></pre>\n\n<p>There are some <code>numpy</code> functions that take an <code>out</code> parameter.  You may save some time by reusing an array that way.  <code>np.cross</code> is one function that takes advantage of this (the code is Python and readable).</p>\n\n<p>Another 'vectorized' way of creating values from a scalar function:</p>\n\n<pre><code>In [310]: %%timeit f=np.frompyfunc(lambda i: i*2+3,1,1)\n     ...: f(range(10000))\n     ...: \n100 loops, best of 3: 8.31 ms per loop\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "is_accepted": false, "score": 3, "last_activity_date": 1480585061, "last_edit_date": 1480585061, "creation_date": 1480577367, "answer_id": 40904870, "question_id": 40899860, "link": "https://stackoverflow.com/questions/40899860/efficient-way-to-set-values-of-numpy-array-from-iterable/40904870#40904870", "title": "Efficient way to set values of numpy array from iterable", "body": "<p>Given the explanation in the comments, it seems that the problem is the following:</p>\n\n<ul>\n<li>A large array needs to be updated frequently, and as efficiently as possible;</li>\n<li>Source of the updates are not only other numpy arrays, but arbitrary Python objects (which can generate on-the-fly).</li>\n</ul>\n\n<p>The second item is the problem: as long as your values come from Python, putting them into a numpy array will <em>never</em> be really efficient. This is because you have to loop over each value in interpreted code.</p>\n\n<blockquote>\n  <p>I was expecting to find the expression <code>for ind, elem in enumerate(iterable): my_array[ind] = elem</code> already packaged in a built in function. Do you know if the Python interpreter compiles that expression as a whole?</p>\n</blockquote>\n\n<p>CPython's virtual machine is very different from the C++ model; specifically, the compiler cannot inline the expression or interpret it as a whole in a way to make it significantly more efficient. Even if it supported a byte-code instruction that did this one specific thing in C, it would still need to call the generator's <code>next</code> method that produces each value as heap-allocated Python object after executing Python byte-code. In either case, interpreted code is involved for every iteration, and you really want to avoid that.</p>\n\n<p>The efficient way to approach your problem is to design it from the ground up to never leave numpy. As others explained in the comment, the cost of allocation (if done efficiently, by numpy) is miniscule compared to the cost of actually working with data piece by piece in Python.  I would design it as follows:</p>\n\n<ul>\n<li>Convert as much code to natively work with numpy arrays, from the ground up; make returning a numpy array part of your interface and don't worry about allocation costs. Do as many loops as possible within numpy itself, so they are done in native code. Never iterate through all values of large arrays in Python.</li>\n<li>Where it is not possible to use numpy, use <code>numpy.fromiter</code> to convert the iterator to the numpy array as early as possible.</li>\n<li>Use either <code>my_array[:] = new_array[:]</code> or <code>my_array = new_array</code> to introduce the new values into the array. (The former will take microscopically more time, but it makes more sense when <code>my_array</code> is shared in many places in the data model.)</li>\n<li><strong>Benchmark</strong> operations you are interested in. Don't assume that \"copying is slow\" - it might turn out that operations that would in C++ be \"slow\" turn out orders of magnitude faster than the Python rendition of operations that would be efficient in C++.</li>\n</ul>\n\n<p>If after doing the above some operation is not supported by numpy, and the measurements show it to be critically inefficient, you can use the <a href=\"https://docs.python.org/3/extending/index.html\" rel=\"nofollow noreferrer\">Python/C API</a> to create an extension module that performs the computation efficiently and returns the result as a numpy array created in C.</p>\n"}], "owner": {"reputation": 53, "user_id": 7162823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8235b84f70359a31f0981be3f380056?s=128&d=identicon&r=PG&f=1", "display_name": "onekeystrokeatatime", "link": "https://stackoverflow.com/users/7162823/onekeystrokeatatime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2983, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1548431188, "creation_date": 1480546907, "last_edit_date": 1548431188, "question_id": 40899860, "link": "https://stackoverflow.com/questions/40899860/efficient-way-to-set-values-of-numpy-array-from-iterable", "title": "Efficient way to set values of numpy array from iterable", "body": "<p>I have a large <code>numpy</code> array already allocated of a given size. For example</p>\n\n<pre><code>my_array = numpy.empty(10000, numpy.float)\n</code></pre>\n\n<p>The values for the array can be generated by (mock example) </p>\n\n<pre><code>k * val ** 2 for val in range(0, 10000)\n</code></pre>\n\n<p>This step of setting the values of the array is done many times. For example, <code>for k in range(0,1000)</code>. I don't want to do any other allocation than the one done by the <code>numpy.empty()</code> at the beginning.</p>\n\n<p>I have considered,</p>\n\n<pre><code>my_array = numpy.array([k*val**2 for val in range(0,10000)])\n</code></pre>\n\n<p>but this looks like there is going to be at least the allocation of the list <code>[k * val ** 2 for val in range(0, 10000)]</code>. Is that right?</p>\n\n<p>I saw also <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.fromiter.html\" rel=\"nofollow noreferrer\">numpy.fromiter</a>, but this seem to be for constructing the array.</p>\n\n<pre><code>my_array = numpy.fromiter((k*val**2 for val in range(0,10000)), numpy.float, 10000)\n</code></pre>\n\n<p>Is it true that there is one further allocation here?</p>\n\n<hr>\n\n<p>To see if <code>numpy.fromiter</code> allocates an array I tried the following</p>\n\n<pre><code>import numpy as np\n\niterable1 = (x*x for x in range(5))\niterable2 = (x*x + 1.0 for x in range(5))\nmy_array = np.fromiter(iterable1, np.float)\nprint(my_array)\nprint(hex(id(my_array)))\n\nmy_array = np.fromiter(iterable2, np.float)\nprint(my_array)\nprint(hex(id(my_array)))\n</code></pre>\n\n<p>In the output I the two addresses printed are different. Doesn't this mean that <code>np.fromiter</code> allocated a new array which got then assigned to <code>my_array</code>?</p>\n"}, {"tags": ["python", "pygame"], "answers": [{"tags": [], "owner": {"reputation": 1759, "user_id": 2467544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XP1mx.png?s=128&g=1", "display_name": "Blake O&#39;Hare", "link": "https://stackoverflow.com/users/2467544/blake-ohare"}, "is_accepted": false, "score": 2, "last_activity_date": 1480548091, "creation_date": 1480548091, "answer_id": 40900053, "question_id": 40899850, "link": "https://stackoverflow.com/questions/40899850/pygame-lag-when-blitting-background/40900053#40900053", "title": "PyGame Lag when blitting background", "body": "<p>Your images likely have per-pixel transparency. Convert them to opaque.</p>\n\n<pre><code>faster_surface = surface_loaded_directly_from_png.convert()\n</code></pre>\n\n<p>Of course this isn't applicable to the character, but for the background it will improve things a bit.</p>\n\n<p>EDIT: I also notice you're not calling clock.tick() anywhere. That should smooth things out and removed perceived slowdowns that are actually just the CPU naturally speeding up and slowing down.</p>\n"}, {"tags": [], "owner": {"reputation": 1134, "user_id": 5759631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67ad2728d6446efcad4ee66131e2af70?s=128&d=identicon&r=PG&f=1", "display_name": "Douglas", "link": "https://stackoverflow.com/users/5759631/douglas"}, "is_accepted": true, "score": 5, "last_activity_date": 1480552915, "creation_date": 1480552915, "answer_id": 40900761, "question_id": 40899850, "link": "https://stackoverflow.com/questions/40899850/pygame-lag-when-blitting-background/40900761#40900761", "title": "PyGame Lag when blitting background", "body": "<p>See <a href=\"http://www.pygame.org/docs/ref/surface.html#pygame.Surface.convert_alpha\" rel=\"noreferrer\">http://www.pygame.org/docs/ref/surface.html#pygame.Surface.convert_alpha</a></p>\n\n<p>This is what I do for all my programs:</p>\n\n<pre><code>def loadify(img):\n    return pygame.image.load(img).convert_alpha()\n</code></pre>\n\n<p>I just replace pygame.image.load with loadify to save typing.  This converts the image to the proper pixel format for faster and easier blitting.</p>\n"}], "owner": {"reputation": 43, "user_id": 7191400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/283ccc04f7531c54fa9839fe6c798fdc?s=128&d=identicon&r=PG&f=1", "display_name": "Mrmeguyme", "link": "https://stackoverflow.com/users/7191400/mrmeguyme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1604, "favorite_count": 1, "accepted_answer_id": 40900761, "answer_count": 2, "score": 2, "last_activity_date": 1480552915, "creation_date": 1480546853, "question_id": 40899850, "link": "https://stackoverflow.com/questions/40899850/pygame-lag-when-blitting-background", "title": "PyGame Lag when blitting background", "body": "<p>I am trying to reduce the lag in my game as it is unbearable. I understand that when blitting large images I should expect some lag, but I don't see any ways to reduce it. I have the code here: <a href=\"https://gist.github.com/Mrmeguyme/ce1a844af21695d1b853ef88fe8de5aa\" rel=\"nofollow noreferrer\">https://gist.github.com/Mrmeguyme/ce1a844af21695d1b853ef88fe8de5aa</a></p>\n\n<p>The background is 1280x720px, the ground is 1280x100px, and my character is 50x50px.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 8438, "user_id": 3511819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7fac02ad0909ae0411a642e72a1b41d8?s=128&d=identicon&r=PG", "display_name": "AlexG", "link": "https://stackoverflow.com/users/3511819/alexg"}, "is_accepted": true, "score": 2, "last_activity_date": 1480547124, "creation_date": 1480547124, "answer_id": 40899900, "question_id": 40899835, "link": "https://stackoverflow.com/questions/40899835/how-to-replace-empty-values-in-one-column-with-modified-values-from-another-colu/40899900#40899900", "title": "How to replace empty values in one column with modified values from another column?", "body": "<p>Try this guy:</p>\n\n<pre><code>df['mapping'] = df[['mapping', 'store_id']].apply(lambda x: x[0] if x[0] else 'edit-%d' % x[1], axis=1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 570, "user_id": 4038747, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e1e0359bfda9722b92de20b1142d2acb?s=128&d=identicon&r=PG&f=1", "display_name": "lollerskates", "link": "https://stackoverflow.com/users/4038747/lollerskates"}, "edited": false, "score": 0, "creation_date": 1480549814, "post_id": 40900183, "comment_id": 69014438, "body": "yeah, unfortunately they are empty strings :("}], "tags": [], "owner": {"reputation": 1872, "user_id": 3651127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7LZvG.png?s=128&g=1", "display_name": "dagrha", "link": "https://stackoverflow.com/users/3651127/dagrha"}, "is_accepted": false, "score": 1, "last_activity_date": 1480548777, "creation_date": 1480548777, "answer_id": 40900183, "question_id": 40899835, "link": "https://stackoverflow.com/questions/40899835/how-to-replace-empty-values-in-one-column-with-modified-values-from-another-colu/40900183#40900183", "title": "How to replace empty values in one column with modified values from another column?", "body": "<p>If the blank entries in the mapping column are <code>NaN</code> rather than just empty strings, the you could use the <code>combine_first()</code> method:</p>\n\n<pre><code>df.mapping = df.mapping.combine_first('edit-' + df.store_id.astype(str))\n</code></pre>\n"}], "owner": {"reputation": 570, "user_id": 4038747, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e1e0359bfda9722b92de20b1142d2acb?s=128&d=identicon&r=PG&f=1", "display_name": "lollerskates", "link": "https://stackoverflow.com/users/4038747/lollerskates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 761, "favorite_count": 0, "accepted_answer_id": 40899900, "answer_count": 2, "score": 1, "last_activity_date": 1480548777, "creation_date": 1480546792, "question_id": 40899835, "link": "https://stackoverflow.com/questions/40899835/how-to-replace-empty-values-in-one-column-with-modified-values-from-another-colu", "title": "How to replace empty values in one column with modified values from another column?", "body": "<p>Suppose I have the following dataframe called <code>mapping_df</code>:</p>\n\n<pre><code>mapping | store_id\n--------|---------\n   a    |    1\n   b    |    2\n        |    3\n   c    |    4\n        |    5\n</code></pre>\n\n<p>I would like to modify it so that I can have</p>\n\n<pre><code>mapping | store_id\n--------|---------\n   a    |    1\n   b    |    2\n edit-3 |    3\n   c    |    4\n edit-5 |    5\n</code></pre>\n\n<p>I have the following code, but I'm not sure if its using Pandas to its full potential</p>\n\n<pre><code>for idx, value in mapping_df[\"mapping\"].iteritems():\n    if not value:\n        mapping_df[\"mapping\"].iloc[idx] = \"edit-{}\".format(mapping_df[\"store_id\"].iloc[idx])\n</code></pre>\n"}, {"tags": ["python", "3d", "plotly", "surface", "graphing"], "answers": [{"tags": [], "owner": {"reputation": 913, "user_id": 5036928, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh6.googleusercontent.com/-beIS1MFhU_I/AAAAAAAAAAI/AAAAAAAAAHU/tTFHhB_-kPs/photo.jpg?sz=128", "display_name": "Sterling Butters", "link": "https://stackoverflow.com/users/5036928/sterling-butters"}, "is_accepted": true, "score": 0, "last_activity_date": 1494535564, "creation_date": 1494535564, "answer_id": 43925223, "question_id": 40899757, "link": "https://stackoverflow.com/questions/40899757/python-plotly-x-y-grid-contour-projection-onto-3d-surface/43925223#43925223", "title": "Python Plotly: X,Y Grid Contour Projection onto 3D Surface", "body": "<p>Used colorscale parameter of surface object</p>\n"}], "owner": {"reputation": 913, "user_id": 5036928, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh6.googleusercontent.com/-beIS1MFhU_I/AAAAAAAAAAI/AAAAAAAAAHU/tTFHhB_-kPs/photo.jpg?sz=128", "display_name": "Sterling Butters", "link": "https://stackoverflow.com/users/5036928/sterling-butters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 43925223, "answer_count": 1, "score": 1, "last_activity_date": 1494535564, "creation_date": 1480546426, "last_edit_date": 1480546623, "question_id": 40899757, "link": "https://stackoverflow.com/questions/40899757/python-plotly-x-y-grid-contour-projection-onto-3d-surface", "title": "Python Plotly: X,Y Grid Contour Projection onto 3D Surface", "body": "<p>I have a surface that I have created in Plotly where the z data is a matrix (x and y defined by the grid):</p>\n\n<pre><code>     0      1      2      3      4      5      6      7      8      9      10  \\\n0   0.0  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000   \n1   0.0  0.000  0.000  0.000  0.000  0.000  0.000  0.690  0.889  0.690  0.000   \n2   0.0  0.000  0.000  0.000  0.000  0.657  0.983  1.068  1.026  1.068  0.983   \n3   0.0  0.000  0.000  0.000  0.691  0.937  1.008  1.094  1.112  1.094  1.008   \n4   0.0  0.000  0.000  0.691  0.844  0.986  1.085  1.120  1.126  1.120  1.085   \n5   0.0  0.000  0.657  0.937  0.986  1.077  1.121  1.130  1.078  1.130  1.121   \n6   0.0  0.000  0.983  1.008  1.085  1.121  1.142  1.132  1.117  1.132  1.142   \n7   0.0  0.690  1.068  1.094  1.120  1.130  1.132  1.111  1.053  1.111  1.132   \n8   0.0  0.889  1.026  1.112  1.126  1.078  1.117  1.053  1.075  1.053  1.117   \n9   0.0  0.690  1.068  1.094  1.120  1.130  1.132  1.111  1.053  1.111  1.132   \n10  0.0  0.000  0.983  1.008  1.085  1.121  1.142  1.132  1.117  1.132  1.142   \n11  0.0  0.000  0.657  0.937  0.986  1.077  1.121  1.130  1.078  1.130  1.121   \n12  0.0  0.000  0.000  0.691  0.844  0.986  1.085  1.120  1.126  1.120  1.085   \n13  0.0  0.000  0.000  0.000  0.691  0.937  1.008  1.094  1.112  1.094  1.008   \n14  0.0  0.000  0.000  0.000  0.000  0.657  0.983  1.068  1.026  1.068  0.983   \n15  0.0  0.000  0.000  0.000  0.000  0.000  0.000  0.690  0.889  0.690  0.000   \n16  0.0  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000  0.000   \n\n       11     12     13     14     15   16  \n0   0.000  0.000  0.000  0.000  0.000  0.0  \n1   0.000  0.000  0.000  0.000  0.000  0.0  \n2   0.657  0.000  0.000  0.000  0.000  0.0  \n3   0.937  0.691  0.000  0.000  0.000  0.0  \n4   0.986  0.844  0.691  0.000  0.000  0.0  \n5   1.077  0.986  0.937  0.657  0.000  0.0  \n6   1.121  1.085  1.008  0.983  0.000  0.0  \n7   1.130  1.120  1.094  1.068  0.690  0.0  \n8   1.078  1.126  1.112  1.026  0.889  0.0  \n9   1.130  1.120  1.094  1.068  0.690  0.0  \n10  1.121  1.085  1.008  0.983  0.000  0.0  \n11  1.077  0.986  0.937  0.657  0.000  0.0  \n12  0.986  0.844  0.691  0.000  0.000  0.0  \n13  0.937  0.691  0.000  0.000  0.000  0.0  \n14  0.657  0.000  0.000  0.000  0.000  0.0  \n15  0.000  0.000  0.000  0.000  0.000  0.0  \n16  0.000  0.000  0.000  0.000  0.000  0.0\n</code></pre>\n\n<p>I would like to project the x, y grid with variable size (i.e. the resolution of the grid) onto this 3D surface. I suspect I can use the contour attribute of the 3D Surface object to project onto this surface, but I couldn't find any existing examples.</p>\n\n<p>Please help me and thanks in advance!</p>\n"}, {"tags": ["python", "pandas", "dataframe", "group-by"], "comments": [{"owner": {"reputation": 9572, "user_id": 2543372, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8814f53d616260c4971fd77f8b3f54a1?s=128&d=identicon&r=PG", "display_name": "Julien Marrec", "link": "https://stackoverflow.com/users/2543372/julien-marrec"}, "edited": false, "score": 0, "creation_date": 1480546529, "post_id": 40899715, "comment_id": 69013280, "body": "Please provide a <a href=\"http://stackoverflow.com/help/mcve\">mcve</a>. (Also, there is a convention on stack overflow to not include greetings such as &quot;Thanks!&#39;)"}, {"owner": {"reputation": 171, "user_id": 7171147, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/732680446883147/picture?type=large", "display_name": "Candice Zhang", "link": "https://stackoverflow.com/users/7171147/candice-zhang"}, "reply_to_user": {"reputation": 9572, "user_id": 2543372, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8814f53d616260c4971fd77f8b3f54a1?s=128&d=identicon&r=PG", "display_name": "Julien Marrec", "link": "https://stackoverflow.com/users/2543372/julien-marrec"}, "edited": false, "score": 0, "creation_date": 1480547056, "post_id": 40899715, "comment_id": 69013480, "body": "Just edited my question"}, {"owner": {"reputation": 8438, "user_id": 3511819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7fac02ad0909ae0411a642e72a1b41d8?s=128&d=identicon&r=PG", "display_name": "AlexG", "link": "https://stackoverflow.com/users/3511819/alexg"}, "edited": false, "score": 0, "creation_date": 1480547680, "post_id": 40899715, "comment_id": 69013729, "body": "Try adding <code>.reset_index()</code> to the end of your second line. Does this help?"}, {"owner": {"reputation": 925, "user_id": 4701228, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a51e05717e2b8a78ae0876d705757d41?s=128&d=identicon&r=PG&f=1", "display_name": "semore_1267", "link": "https://stackoverflow.com/users/4701228/semore-1267"}, "edited": false, "score": 0, "creation_date": 1480547757, "post_id": 40899715, "comment_id": 69013748, "body": "Anyone wanting to help would probably need at least sample data to try and replicate your problem."}, {"owner": {"reputation": 9572, "user_id": 2543372, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8814f53d616260c4971fd77f8b3f54a1?s=128&d=identicon&r=PG", "display_name": "Julien Marrec", "link": "https://stackoverflow.com/users/2543372/julien-marrec"}, "edited": false, "score": 0, "creation_date": 1480549444, "post_id": 40899715, "comment_id": 69014325, "body": "Pictures aren&#39;t great, we need something we can use (either something we can read through <code>pd.read_clipboard</code> or a sample of code that produces a dataframe). Please read <a href=\"http://stackoverflow.com/questions/20109391/how-to-make-good-reproducible-pandas-examples\">How to make good reproducible pandas examples</a>"}, {"owner": {"reputation": 2296, "user_id": 5839618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ed391cd9b92ad37a5242cb69715593d?s=128&d=identicon&r=PG&f=1", "display_name": "3novak", "link": "https://stackoverflow.com/users/5839618/3novak"}, "edited": false, "score": 1, "creation_date": 1480558155, "post_id": 40899715, "comment_id": 69016582, "body": "Does the following work for you? <code>df = pd.DataFrame({&#39;ad_id&#39;: [7,12,120003,7,35,35,35,35,7], &#39;clicked&#39;:[0,1,1,1,0,0,1,1,1]})</code> <code>each_ad_click_counts = df.groupby(&#39;ad_id&#39;)[&#39;clicked&#39;].sum()</code> This yields the appropriate result for me with the correct ids."}], "owner": {"reputation": 171, "user_id": 7171147, "user_type": "registered", "accept_rate": 12, "profile_image": "https://graph.facebook.com/732680446883147/picture?type=large", "display_name": "Candice Zhang", "link": "https://stackoverflow.com/users/7171147/candice-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 436, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1480547043, "creation_date": 1480546272, "last_edit_date": 1480547043, "question_id": 40899715, "link": "https://stackoverflow.com/questions/40899715/groupby-integer-id-python-messed-up-with-the-integer", "title": "Groupby integer ID, python messed up with the integer", "body": "<p>I want a pandas dataframe to group by a column named 'ad_id', each entry in this column is an integer, for example, 7, 12, 120003, 12, 7. When I groupby, python seems messed up with the integer, instead of showing me 7,12, 120003, it just showed me 1,2,3. Why does that happend?\nInitial dataframe:\n<a href=\"https://i.stack.imgur.com/FYF2t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FYF2t.png\" alt=\"enter image description here\"></a>\nHere's my code:</p>\n\n<pre><code>ads_df = pd.read_csv('clicks.csv')\neach_ad_counts= ads_df.groupby('ad_id').size()\neach_ad_click_counts= ads_df.groupby('ad_id')['clicked'].sum()\n</code></pre>\n\n<p>After groupby:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nY3vL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nY3vL.png\" alt=\"enter image description here\"></a></p>\n\n<p>But in the original dataframe, there is not ad_id as 1 or 2 or 3</p>\n"}, {"tags": ["python", "c++"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 2, "creation_date": 1480546377, "post_id": 40899710, "comment_id": 69013218, "body": "Is this just for interacting with C/C++ code that uses 64-bit ints, or are you actually trying to make a Python type for 64-bit ints that will only be used in pure Python code?  If the latter, there&#39;s no need for it, as Python integers have arbitrary precision."}, {"owner": {"reputation": 1, "user_id": 7138069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc754a63a9d15b76dcab92219d1e5dbd?s=128&d=identicon&r=PG&f=1", "display_name": "markSx", "link": "https://stackoverflow.com/users/7138069/marksx"}, "reply_to_user": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1480546484, "post_id": 40899710, "comment_id": 69013262, "body": "Will be used in pure python code."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1480557339, "post_id": 40899710, "comment_id": 69016401, "body": "For pure Python you don&#39;t <i>need</i> 64-bit ints, they&#39;re already unlimited in size. Use 1024-bit numbers if you want."}], "owner": {"reputation": 1, "user_id": 7138069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc754a63a9d15b76dcab92219d1e5dbd?s=128&d=identicon&r=PG&f=1", "display_name": "markSx", "link": "https://stackoverflow.com/users/7138069/marksx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1480556600, "creation_date": 1480546247, "last_edit_date": 1480556600, "question_id": 40899710, "link": "https://stackoverflow.com/questions/40899710/python-module-for-longlong-types", "title": "Python module for longlong types", "body": "<p>I'm trying to make a <code>int64_t</code> module for python because python doesn't have a <code>long long</code> type. I found one in <code>ctypes</code> but I can't use it.\nSo, I have embedded an intro in my application so the best way is to create a module that returns <code>int64_t</code> from c++.</p>\n\n<pre><code>PyObject *Py_int64_t(PyObject *poSelf, PyObject *poArgs)\n{\n    return Py_BuildNone();\n}\nstatic PyMethodDef s_methods[] =\n{\n    {\"Py_int64_t\", Py_int64_t, METH_VARARGS}\n}\n</code></pre>\n\n<p>The problem is I don't know from where to start. As you can see Py_int64_t main function is empty. I need some examples about how should I construct that function.</p>\n"}, {"tags": ["python", "import", "path"], "answers": [{"comments": [{"owner": {"reputation": 2891, "user_id": 7233155, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97ca17a34b5f7b188c1bcb230a4701e2?s=128&d=identicon&r=PG&f=1", "display_name": "Attack68", "link": "https://stackoverflow.com/users/7233155/attack68"}, "edited": false, "score": 0, "creation_date": 1480571799, "post_id": 40900192, "comment_id": 69020241, "body": "Thanks that&#39;s helpful, and an easy change. I knew there would be problem with naming my file, file.csv for this example. Readers should note _<i>file_</i> is a built in name and not related to name of my file!"}, {"owner": {"reputation": 7183, "user_id": 4497519, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f4a69331bc410268c835393579612bfc?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Guy", "link": "https://stackoverflow.com/users/4497519/andrew-guy"}, "reply_to_user": {"reputation": 2891, "user_id": 7233155, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97ca17a34b5f7b188c1bcb230a4701e2?s=128&d=identicon&r=PG&f=1", "display_name": "Attack68", "link": "https://stackoverflow.com/users/7233155/attack68"}, "edited": false, "score": 0, "creation_date": 1480572692, "post_id": 40900192, "comment_id": 69020590, "body": "Yep, <code>__file__</code> is a built-in which gives the pathname of the file that your module is called from. Also, worth accepting this answer if it solves your problem."}], "tags": [], "owner": {"reputation": 7183, "user_id": 4497519, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f4a69331bc410268c835393579612bfc?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Guy", "link": "https://stackoverflow.com/users/4497519/andrew-guy"}, "is_accepted": true, "score": 0, "last_activity_date": 1480548825, "creation_date": 1480548825, "answer_id": 40900192, "question_id": 40899639, "link": "https://stackoverflow.com/questions/40899639/python-importing-module-from-subdirectory-that-loads-non-python-file-with-relat/40900192#40900192", "title": "Python: importing module from subdirectory that loads non-python file with relative path", "body": "<p>A common idiom in situations like this is to prefix all your file paths with the absolute path to your module:</p>\n\n<pre><code>from os import path\n\npath_prefix = path.dirname(path.abspath(__file__))\ncsv_path = path.join(path_prefix, 'file.csv')\n</code></pre>\n\n<p>This way it doesn't matter where you are calling the module from, you will still be able to load resources from within the module.</p>\n\n<p>Adding a path prefix as you have described will only work when you are calling the module from the parent directory. What happens when you call it from somewhere else?</p>\n"}], "owner": {"reputation": 2891, "user_id": 7233155, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97ca17a34b5f7b188c1bcb230a4701e2?s=128&d=identicon&r=PG&f=1", "display_name": "Attack68", "link": "https://stackoverflow.com/users/7233155/attack68"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 40900192, "answer_count": 1, "score": 1, "last_activity_date": 1480548825, "creation_date": 1480545912, "question_id": 40899639, "link": "https://stackoverflow.com/questions/40899639/python-importing-module-from-subdirectory-that-loads-non-python-file-with-relat", "title": "Python: importing module from subdirectory that loads non-python file with relative path", "body": "<p>This is my first python project for which I am trying to build professional structure/hierarchy. I have the following directory structure:</p>\n\n<pre><code>project/  \n---__init__.py  \n---main.py  \n---data_lib/  \n------__init__.py  \n------load.py  \n------file.csv \n</code></pre>\n\n<p>The code in load.py is:</p>\n\n<pre><code>import pandas as pd\ndef load_csv():\n    print pd.read_csv('file.csv')\nif __name__=='__main__':\n    load_csv()\n</code></pre>\n\n<p>The code in main.py is:</p>\n\n<pre><code>from data_lib.load import load_csv\nload_csv()\n</code></pre>\n\n<p>When load.py is run on its own I get a printout of a pandas dataframe of the loaded csv file. When main.py is run I get the error IOError: File file.csv does not exist. I can solve this by adding a path prefix before 'file.csv' defined by:</p>\n\n<pre><code>if __name__=='__main__':\n    path_prefix=''\nelse:\n    path_prefix='data_lib/'\n</code></pre>\n\n<p>Is this the standard solution and programming practice or should I be avoiding this and doing something else instead (especially since the csv file will be one that will need to be regularly updated without any other code files impacted)?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1480546840, "post_id": 40899633, "comment_id": 69013392, "body": "Or <code>for plane in np.rollaxis(matrix, -1): print(plane)</code>. Or even just <code>print(np.rollaxis(matrix, -1))</code>"}, {"owner": {"reputation": 8220, "user_id": 2605604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9RN4n.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/2605604/simon"}, "edited": false, "score": 0, "creation_date": 1480552080, "post_id": 40899633, "comment_id": 69015104, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/14365029/numpy-3d-image-array-to-2d\">numpy 3D-image array to 2D</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5496, "user_id": 2661491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/829f8aba5815197b56359be148cd0a13?s=128&d=identicon&r=PG", "display_name": "evan.oman", "link": "https://stackoverflow.com/users/2661491/evan-oman"}, "is_accepted": true, "score": 0, "last_activity_date": 1480546932, "last_edit_date": 1480546932, "creation_date": 1480546381, "answer_id": 40899746, "question_id": 40899633, "link": "https://stackoverflow.com/questions/40899633/python-print-a-5x5x3-numpy-array-as-three-5x5-numpy-arrays/40899746#40899746", "title": "Python - Print a 5x5x3 numpy array as three 5x5 numpy arrays?", "body": "<p>Something like this should work:</p>\n\n<pre><code>In [1]: import numpy as np\n\nIn [2]: a = np.array([[[1,2,3], [3,4,3]],[[5,6,3], [7,8,3]]])\n\nIn [3]: a.shape\nOut[4]: (2, 2, 3)\n\nIn [4]: for i in range(a.shape[-1]):\n    ...:     print(a[:,:,i])\n    ...:\n[[1 3]\n [5 7]]\n[[2 4]\n [6 8]]\n[[3 3]\n [3 3]]\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 7226309, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f5ab784617fccea891b251621cc92816?s=128&d=identicon&r=PG&f=1", "display_name": "J. Smith", "link": "https://stackoverflow.com/users/7226309/j-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 40899746, "answer_count": 1, "score": 2, "last_activity_date": 1480546932, "creation_date": 1480545899, "question_id": 40899633, "link": "https://stackoverflow.com/questions/40899633/python-print-a-5x5x3-numpy-array-as-three-5x5-numpy-arrays", "title": "Python - Print a 5x5x3 numpy array as three 5x5 numpy arrays?", "body": "<p>When I print my 5x5x3 numpy array, it prints as 5 5x3 arrays. </p>\n\n<p>I have read in a 5 pixel x 5 pixel rgb image and want to view the 5x5 arrays that are R, G and B. How do I do this?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "list", "function", "nested"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1480546036, "post_id": 40899593, "comment_id": 69013077, "body": "I think you have some extra data in <code>lst_1</code> that&#39;s messing things up."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1480546280, "post_id": 40899593, "comment_id": 69013177, "body": "And your <code>all()</code> calls are missing some key parts as well."}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1480546344, "post_id": 40899593, "comment_id": 69013205, "body": "Your indentation is off, which is critical in Python. Your variable <code>triplet</code> seems to be the same as <code>lst_1</code>. You do not tell us what <code>reply()</code> is or does. Please see <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 371, "user_id": 7134235, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ee9d8232e77d549dcceae63e2e57b735?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/7134235/boris"}, "edited": false, "score": 0, "creation_date": 1480548676, "post_id": 40899864, "comment_id": 69014052, "body": "Thanks @Dodosaur. Why are global functions undesirable?"}, {"owner": {"reputation": 26, "user_id": 1660945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df269dd07e8f73a8c47d40b5e0a4d57e?s=128&d=identicon&r=PG", "display_name": "Dodosaur", "link": "https://stackoverflow.com/users/1660945/dodosaur"}, "reply_to_user": {"reputation": 371, "user_id": 7134235, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ee9d8232e77d549dcceae63e2e57b735?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/7134235/boris"}, "edited": false, "score": 0, "creation_date": 1480549501, "post_id": 40899864, "comment_id": 69014346, "body": "<a href=\"http://stackoverflow.com/questions/19158339/why-are-global-variables-evil\">This</a> answer explains it more eloquently than I can."}, {"owner": {"reputation": 26, "user_id": 1660945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df269dd07e8f73a8c47d40b5e0a4d57e?s=128&d=identicon&r=PG", "display_name": "Dodosaur", "link": "https://stackoverflow.com/users/1660945/dodosaur"}, "reply_to_user": {"reputation": 371, "user_id": 7134235, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ee9d8232e77d549dcceae63e2e57b735?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/7134235/boris"}, "edited": false, "score": 0, "creation_date": 1480549580, "post_id": 40899864, "comment_id": 69014363, "body": "Sorry, I hit enter and it submitted. The basic gist is that it makes code hard to understand, because if a function uses a global variable then there&#39;s something outside the scope of the function affecting it."}], "tags": [], "owner": {"reputation": 26, "user_id": 1660945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df269dd07e8f73a8c47d40b5e0a4d57e?s=128&d=identicon&r=PG", "display_name": "Dodosaur", "link": "https://stackoverflow.com/users/1660945/dodosaur"}, "is_accepted": true, "score": 1, "last_activity_date": 1480547652, "last_edit_date": 1480547652, "creation_date": 1480546940, "answer_id": 40899864, "question_id": 40899593, "link": "https://stackoverflow.com/questions/40899593/checking-for-string-in-nested-list/40899864#40899864", "title": "checking for string in nested list", "body": "<p>To answer your question simply, you're not iterating through <code>lst_1</code>. I imagine you think you are by the statement you're using for <code>triplet</code>, but that actually just copies <code>lst_1</code> to <code>triplet</code>.</p>\n\n<p>I assume you're actually trying to make a generator out of <code>lst_1</code> and assigning it to <code>triplet</code>, but you're accidentally using list comprehension instead and don't fully understand how generators work. Read more about generators <a href=\"http://anandology.com/python-practice-book/iterators.html#generator-expressions\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>While generators are undeniably useful for certain situations, I don't think they'd actually simplify your code here. You're going to need a loop anyway, and you have to check for a <code>StopIteration</code> exception to find out when the generator ends.</p>\n\n<p>So, my suggestion is just to use a <code>for</code> loop.</p>\n\n<pre><code>def conc():\n    global lst\n    lst_1 = [[lst[0],lst[1],lst[2]],[lst[3],lst[4],lst[5]],[lst[6],lst[7],lst[8]],[lst[0],lst[3],lst[6]],[lst[1],lst[4],lst[7]],    [lst[2],lst[5],lst[8]],[lst[0],lst[4],lst[8]],[lst[2],lst[4],lst[6]],    [lst[0],lst[1],lst[2]],[lst[3],lst[4],lst[5]],[lst[0],lst[3],lst[6]],     [lst[1],lst[4],lst[7]],[lst[2],lst[5],lst[8]],[lst[0],lst[4],lst[8]],    [lst[2],lst[4],lst[6]]]\n    for triplet in lst_1:\n        if all('o' == item for item in triplet):\n            print('Player 2 wins!')\n            reply()\n            break\n        elif all('x' == item for item in triplet):\n            print('Player 1 wins!')\n            reply()\n            break\n</code></pre>\n\n<p>Some other nits:\nAdding <code>else: pass</code> to the end of your <code>if-elif-else</code> loop is completely extraneous. It doesn't have to be there.</p>\n\n<p>Also, try to avoid global variables. Read up a bit about scope in Python. It might work for simple programs, but if you rely on them when you get to anything remotely complicated it'll hurt you.</p>\n"}], "owner": {"reputation": 371, "user_id": 7134235, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ee9d8232e77d549dcceae63e2e57b735?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/7134235/boris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 40899864, "answer_count": 1, "score": -3, "last_activity_date": 1480547652, "creation_date": 1480545735, "question_id": 40899593, "link": "https://stackoverflow.com/questions/40899593/checking-for-string-in-nested-list", "title": "checking for string in nested list", "body": "<p>I'm trying to write a function in my tic-tac-toe program that checks to see if all three spaces in a line on the grid have been marked as either 'x's or 'o's. lst_1 is a list of all the possible combinations of lines: </p>\n\n<pre><code>def conc():\n    global lst\n    lst_1 = [[lst[0],lst[1],lst[2]],[lst[3],lst[4],lst[5]],[lst[6],lst[7],lst[8]],[lst[0],lst[3],lst[6]],[lst[1],lst[4],lst[7]],    [lst[2],lst[5],lst[8]],[lst[0],lst[4],lst[8]],[lst[2],lst[4],lst[6]],    [lst[0],lst[1],lst[2]],[lst[3],lst[4],lst[5]],[lst[0],lst[3],lst[6]],     [lst[1],lst[4],lst[7]],[lst[2],lst[5],lst[8]],[lst[0],lst[4],lst[8]],    [lst[2],lst[4],lst[6]]]\n    triplet = [s for s in lst_1]\n     if all('o' == item for item in triplet):\n        print('Player 2 wins!')\n        reply()\n    elif all('x' == item for item in triplet):\n        print('Player 1 wins!')\n        reply()\n    else:\n        pass \n</code></pre>\n\n<p>I thought this would stop the game when someone managed to get 3 in a row, but it keeps on going. Any ideas?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1480545904, "post_id": 40899592, "comment_id": 69013018, "body": "If the user types in <code>Add</code>, how many elements do you expect <code>item</code> to have after <code>item = item.split(&#39;-&#39;)</code>?"}, {"owner": {"reputation": 45878, "user_id": 180368, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0653dbf97ca1e0829fc3ae822d289f1?s=128&d=identicon&r=PG", "display_name": "Larry Lustig", "link": "https://stackoverflow.com/users/180368/larry-lustig"}, "edited": false, "score": 0, "creation_date": 1480545981, "post_id": 40899592, "comment_id": 69013054, "body": "The line you report as the error in your description does not appear anywhere in the code you quoted -- did you mean <code>food_quant = item[1]</code>?"}, {"owner": {"reputation": 25, "user_id": 7096357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2f5c5f59820a3f627254a980e8fa3071?s=128&d=identicon&r=PG&f=1", "display_name": "tmp657", "link": "https://stackoverflow.com/users/7096357/tmp657"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1480546066, "post_id": 40899592, "comment_id": 69013090, "body": "@user2357112 It should have 2 elements, such as <code>[&#39;Apple&#39;, &#39;3&#39;]</code>"}, {"owner": {"reputation": 25, "user_id": 7096357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2f5c5f59820a3f627254a980e8fa3071?s=128&d=identicon&r=PG&f=1", "display_name": "tmp657", "link": "https://stackoverflow.com/users/7096357/tmp657"}, "reply_to_user": {"reputation": 45878, "user_id": 180368, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c0653dbf97ca1e0829fc3ae822d289f1?s=128&d=identicon&r=PG", "display_name": "Larry Lustig", "link": "https://stackoverflow.com/users/180368/larry-lustig"}, "edited": false, "score": 0, "creation_date": 1480546131, "post_id": 40899592, "comment_id": 69013123, "body": "@LarryLustig Ah, yes. I fixed it."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1480546265, "post_id": 40899592, "comment_id": 69013170, "body": "@TaylorPatterson: Okay, so you think it should have 2 elements. What, specifically, do you think those elements would be when the user input is <code>Add</code>? Have you <i>tested</i> what that <code>split</code> call actually produces?"}, {"owner": {"reputation": 25, "user_id": 7096357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2f5c5f59820a3f627254a980e8fa3071?s=128&d=identicon&r=PG&f=1", "display_name": "tmp657", "link": "https://stackoverflow.com/users/7096357/tmp657"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1480546726, "post_id": 40899592, "comment_id": 69013354, "body": "@user2357112 Yes it produces a list of the 2 items it was split into like <code>[&#39;Apple&#39;, &#39;3&#39;]</code>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1480546868, "post_id": 40899592, "comment_id": 69013402, "body": "@TaylorPatterson: What 2 items do you think <code>Add</code> gets split into?"}, {"owner": {"reputation": 25, "user_id": 7096357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2f5c5f59820a3f627254a980e8fa3071?s=128&d=identicon&r=PG&f=1", "display_name": "tmp657", "link": "https://stackoverflow.com/users/7096357/tmp657"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1480546959, "post_id": 40899592, "comment_id": 69013433, "body": "@user2357112 It should be an item as the first element and a number for the second element, which is what is produced."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1480547254, "post_id": 40899592, "comment_id": 69013562, "body": "I don&#39;t see a number in <code>Add</code>. Do you?"}, {"owner": {"reputation": 25, "user_id": 7096357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2f5c5f59820a3f627254a980e8fa3071?s=128&d=identicon&r=PG&f=1", "display_name": "tmp657", "link": "https://stackoverflow.com/users/7096357/tmp657"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1480547533, "post_id": 40899592, "comment_id": 69013676, "body": "@user2357112 I&#39;m not trying to do anything with the number in <code>&quot;Add&quot;</code>. However, it&#39;s during that command that the error pops up."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1480548180, "post_id": 40899592, "comment_id": 69013878, "body": "&quot;I&#39;m not trying to do anything with the number in <code>&quot;Add&quot;</code>.&quot; - but you are."}], "answers": [{"comments": [{"owner": {"reputation": 5896, "user_id": 5644961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-r4jx_ltcdtA/AAAAAAAAAAI/AAAAAAAAAAA/7RjDfLKZHxg/photo.jpg?sz=128", "display_name": "Copperfield", "link": "https://stackoverflow.com/users/5644961/copperfield"}, "edited": false, "score": 0, "creation_date": 1480549861, "post_id": 40900019, "comment_id": 69014454, "body": "I think you mean <code>item=item.split(&quot;-&quot;)</code> or alternatively <code>item = input(...).split(&quot;-&quot;)</code>"}], "tags": [], "owner": {"reputation": 2122, "user_id": 3460139, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/827ca92157a1a57d0e8a80c492a23fd0?s=128&d=identicon&r=PG&f=1", "display_name": "Christian W.", "link": "https://stackoverflow.com/users/3460139/christian-w"}, "is_accepted": true, "score": 1, "last_activity_date": 1480575504, "last_edit_date": 1480575504, "creation_date": 1480547896, "answer_id": 40900019, "question_id": 40899592, "link": "https://stackoverflow.com/questions/40899592/why-is-the-index-out-of-range-python/40900019#40900019", "title": "Why is the index out of range? (Python)", "body": "<p>If any input not containing at least on hyphen is given to your program (e.g. \"add\", or any arbitrary input not containing hyphen really), your progrma still attempts to set <code>food_quant = item[1]</code>, which doesn't exist if the input doesn't have at least one hyphen (i.e. if there's nothing to split in the list, your item will be list that contains just that one item).</p>\n\n<p>An example to illustrate the point:</p>\n\n<pre><code>&gt;&gt;&gt; case1 = \"item-2\".split(\"-\")\n&gt;&gt;&gt; case1\n['item', '2']\n&gt;&gt;&gt; case2 = \"item\".split(\"-\")\n&gt;&gt;&gt; case2\n['item']\n</code></pre>\n\n<p>Clearly, calling <code>case2[1]</code> for the latter case would cause <code>IndexError</code>, because there is just one element in the list. You need to validate whether your input contains dashes or not, or validate whether the split list contains more than one element. An example to validate list length:</p>\n\n<pre><code>item = input(\"enter your input\\n\")\nitem = item.split(\"-\")\nif len(item) &gt; 1:\n    a = item[1]\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7096357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2f5c5f59820a3f627254a980e8fa3071?s=128&d=identicon&r=PG&f=1", "display_name": "tmp657", "link": "https://stackoverflow.com/users/7096357/tmp657"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 40900019, "answer_count": 1, "score": -1, "last_activity_date": 1480575504, "creation_date": 1480545729, "last_edit_date": 1480546095, "question_id": 40899592, "link": "https://stackoverflow.com/questions/40899592/why-is-the-index-out-of-range-python", "title": "Why is the index out of range? (Python)", "body": "<p>I run the code below and raise an error that says <code>food_quant = item[1]</code> list index out of range. I checked to make sure <code>item</code> was actually a list and both items are being added into the dictionary properly as well. The problem is with the <code>\"Add\"</code> command. Also, this is just a snippet because the rest of program is not relevant, so yes I do have proper dictionaries and lists defined above this part.</p>\n\n<pre><code>    item = input(\"Please enter an item with its quantity separated by a hyphen (Ex. Apples-3) or any of the commands described above.\" )\n    item = item.split('-')\n    food_item = item[0]\n    food_quant = item[1]\n    foodquant_dict[food_item] = food_quant\n    if item == \"Add\":\n        for key in foodquant_dict:\n            groceryfood_list.append(key)\n        print (groceryfood_list)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 0, "creation_date": 1480546362, "post_id": 40899572, "comment_id": 69013212, "body": "@wim has provided you a nice hint, so as he is telling you, just use the set where you have the names of <code>poll_takers</code> and the keys of your <code>favorite_language</code>. I think I can provide an answer, but it seems like an assignment, so I will let you figure it out."}], "answers": [{"comments": [{"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 1, "creation_date": 1480546462, "post_id": 40899615, "comment_id": 69013250, "body": "very precise your response. I like you didn&#39;t solve his homework, but your hint is enough to allow him to do it by himself."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 1, "last_activity_date": 1480545841, "creation_date": 1480545841, "answer_id": 40899615, "question_id": 40899572, "link": "https://stackoverflow.com/questions/40899572/comparing-a-list-to-a-dictionary-and-printing-message-based-on-results/40899615#40899615", "title": "Comparing a list to a dictionary and printing message based on results", "body": "<p>Here is the issue:</p>\n\n<pre><code>for name, language in favorite_languages.items():\n</code></pre>\n\n<p>This only iterates over the results, i.e. those names who have already taken the poll.  So you'll need to somehow iterate over the <code>poll_takers</code> who don't have results yet as well.  </p>\n\n<p>Here's a hint:</p>\n\n<pre><code>&gt;&gt;&gt; favorite_languages.keys() | poll_takers\n{'Allan', 'Bob', 'Edward', 'Greg', 'Jen', 'Phil', 'Sarah'}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1326, "user_id": 6219051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1281284788552882/picture?type=large", "display_name": "Jonas", "link": "https://stackoverflow.com/users/6219051/jonas"}, "is_accepted": false, "score": 0, "last_activity_date": 1480545991, "creation_date": 1480545991, "answer_id": 40899659, "question_id": 40899572, "link": "https://stackoverflow.com/questions/40899572/comparing-a-list-to-a-dictionary-and-printing-message-based-on-results/40899659#40899659", "title": "Comparing a list to a dictionary and printing message based on results", "body": "<p>The problem is that you iterate through only the items in favorite_languages, so that the second if statement won't ever evaluate to True.</p>\n\n<p>Instead, you can use a set() which takes only unique values from both the keys in favorite_languages and the values in poll_takers:</p>\n\n<p>favorite_languages = {'Jen': 'python', 'Sarah': 'c', 'Edward': 'Ruby', 'Phil': 'python'}\npoll_takers = ['Jen', 'Greg', 'Sarah', 'Allan', 'Bob']</p>\n\n<pre><code>for name in set(favorite_languages + poll_takers):\n    try:\n       language = favorite_languages[name]\n    except KeyError:\n       # This means the name isn't in your favorite_languages dictionary\n       print('Please take our poll!')\n       return\n\n    print(name.title() + \"'s favorite language is \" + language.title() + \".\")\n\n    print('Thank you for taking the poll!')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 6704971, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-reYCs-Eteu8/AAAAAAAAAAI/AAAAAAAAAAA/O8P7ekhD_jg/photo.jpg?sz=128", "display_name": "Steve D.", "link": "https://stackoverflow.com/users/6704971/steve-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1480546053, "creation_date": 1480546053, "answer_id": 40899668, "question_id": 40899572, "link": "https://stackoverflow.com/questions/40899572/comparing-a-list-to-a-dictionary-and-printing-message-based-on-results/40899668#40899668", "title": "Comparing a list to a dictionary and printing message based on results", "body": "<p>I would maybe approach this from the poll_takers end like this:</p>\n\n<pre><code>favorite_languages = {'Jen': 'python', 'Sarah': 'c', 'Edward': 'Ruby', 'Phil': 'python'}\npoll_takers = ['Jen', 'Greg', 'Sarah', 'Allan', 'Bob']\n\nfor name in poll_takers:\n    if name in favorite_languages.keys():\n        print(name + \"'s favorite language is \" + favorite_languages[name] + \".\")\n        print(\"Thank you for taking the poll!\")\n    else:\n        print(name + \" does not have a favorite language.\")\n        print(\"Please take our poll!\")\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 7061737, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5b3c1c198237ec6db5d9988d77949fb1?s=128&d=identicon&r=PG&f=1", "display_name": "ALLCAPS", "link": "https://stackoverflow.com/users/7061737/allcaps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1480554103, "creation_date": 1480545589, "last_edit_date": 1480554103, "question_id": 40899572, "link": "https://stackoverflow.com/questions/40899572/comparing-a-list-to-a-dictionary-and-printing-message-based-on-results", "title": "Comparing a list to a dictionary and printing message based on results", "body": "<p>I hope I can explain this properly. I have a dictionary that has a list of names in it. I also have a list with another listing of names. What I want to do is to take the names in the list and pass them into the dictionary, if a name is mentioned in the list, but <strong>NOT</strong> in the dictionary I want it to print a message telling the person to take a survey. Here is what I have so far:</p>\n\n<pre><code>favorite_languages = {'Jen': 'python', 'Sarah': 'c', 'Edward': 'Ruby', 'Phil': 'python'}\npoll_takers = ['Jen', 'Greg', 'Sarah', 'Allan', 'Bob']\n\n\nfor name, language in favorite_languages.items():\n    print(name.title() + \"'s favorite language is \" + language.title() + \".\")\n\n    if name in favorite_languages:\n        print('Thank you for taking the poll!')\n    if name in poll_takers and not favorite_languages:\n        print('Please take our poll!')\n</code></pre>\n\n<p>When I run this it prints the name of each person in the favorite_languages list, and it prints thank you after each one, but it won't find the missing names from the <code>poll_takers</code> list and printing the proper message.</p>\n\n<p>I know this is fairly simple, but I've tried a couple things and can't get it. Does anyone know what I am missing?</p>\n"}, {"tags": ["python", "list", "python-3.x", "sorting"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 4, "creation_date": 1480545626, "post_id": 40899570, "comment_id": 69012905, "body": "<code>zip -&gt; sort -&gt; unzip</code>?"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 2, "creation_date": 1480546018, "post_id": 40899570, "comment_id": 69013068, "body": "in one line <code>new_a, new_b = map(list, zip(*sorted(zip(a, b), reverse=True)))</code>"}], "owner": {"reputation": 197, "user_id": 5684541, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/161867a194ac73aea7180d43798ca2c8?s=128&d=identicon&r=PG&f=1", "display_name": "retep", "link": "https://stackoverflow.com/users/5684541/retep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "closed_date": 1480545688, "answer_count": 0, "score": 0, "last_activity_date": 1480545738, "creation_date": 1480545581, "last_edit_date": 1495542630, "question_id": 40899570, "link": "https://stackoverflow.com/questions/40899570/sort-list-and-maintain-order-with-another-list", "closed_reason": "Duplicate", "title": "sort list and maintain order with another list", "body": "<p>Similar to <a href=\"https://stackoverflow.com/questions/9396914/how-to-sort-one-array-list-and-set-the-another-list-with-same-order-in-java\">this</a>, but in python.</p>\n\n<p>I have two lists.\nList <code>a</code> contains a set of numbers and List <code>b</code> contains a set of strings, with the 2 lists having corresponding indexes. For example:</p>\n\n<pre><code>a = [9,12,25,3,2,3,1]\nb = ['jim','bob','cal','tim','pete','bill','jane']\n</code></pre>\n\n<p><code>9</code> corresponds to <code>jim</code>, <code>bob</code> to <code>12</code>, etc.\nI want to sort list <code>a</code> by value (greatest to least), but keep the original correspondence.\nThe new lists would be:</p>\n\n<pre><code>new_a = [25,12,9,3,3,2,1]\nnew_b = ['cal','bob','jim','tim','pete','bill','jane']\n</code></pre>\n\n<p>or something like <code>{new_a_item_sorted:new_b_item_corresponding}</code>, etc.</p>\n\n<p>THIS QUESTION IS DIFFERENT BECAUSE:</p>\n\n<ul>\n<li>I want the original list sorted as well</li>\n</ul>\n"}, {"tags": ["python", "string", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1480545612, "post_id": 40899520, "comment_id": 69012897, "body": "Are all other numeric values valid, i.e. you don&#39;t have <code>NaN</code> already anywhere? if not then you can do <code>df[&#39;col&#39;] = pd.to_numeric(df[&#39;col&#39;], errors=&#39;coerce&#39;).fillna(1).astype(int)</code>"}, {"owner": {"reputation": 131, "user_id": 4518401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-dkWMKKLuSDU/AAAAAAAAAAI/AAAAAAAAA-Y/1qsYPAJZN44/photo.jpg?sz=128", "display_name": "Lois Keller", "link": "https://stackoverflow.com/users/4518401/lois-keller"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1480545777, "post_id": 40899520, "comment_id": 69012963, "body": "Yep that totally worked, thanks EdChum!"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1480546456, "post_id": 40899520, "comment_id": 69013247, "body": "if my answer resolved your question, don&#39;t forget to accept it, there will be an empty tick mark at the top left of my answer. This is so the question doesn&#39;t remain unanswered, thanks"}], "answers": [{"tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": true, "score": 3, "last_activity_date": 1480545946, "creation_date": 1480545946, "answer_id": 40899647, "question_id": 40899520, "link": "https://stackoverflow.com/questions/40899520/replace-all-string-types-in-python-pandas-data-frame-with-a-1/40899647#40899647", "title": "Replace all string types in Python Pandas Data Frame with a 1", "body": "<p>So long as the other values in your column are all valid numeric values and there are no <code>NaN</code> values already, you can use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.to_numeric.html#pandas.to_numeric\" rel=\"nofollow noreferrer\"><code>to_numeric</code></a> to force the string values into a numeric value, in this case <code>NaN</code>.</p>\n\n<p>You can then replace <code>NaN</code> with <code>1</code>, but because of the introduction of <code>NaN</code>, the <code>dtype</code> is changed to <code>float</code> so we need to case the <code>dtype</code> to <code>int</code> using <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.astype.html\" rel=\"nofollow noreferrer\"><code>astype</code></a>:</p>\n\n<pre><code>In [6]:    \n# read the data into our df\nimport pandas as pd\nimport io\n\u200b\nt=\"\"\"8                                                        0\n9                                                        0\n10                                                       0\n11                                                       0\n12                                                       0\n13                                                    Dogs\n14                                                    Cats\"\"\"\ndf = pd.read_csv(io.StringIO(t), delim_whitespace=True, header=None)\ndf\n\nOut[6]:\n    0     1\n0   8     0\n1   9     0\n2  10     0\n3  11     0\n4  12     0\n5  13  Dogs\n6  14  Cats\n</code></pre>\n\n<p>Now convert the strings, replace them with <code>1</code> and cast the Series dtype back to int:</p>\n\n<pre><code>In [7]:\ndf[1] = pd.to_numeric(df[1], errors='coerce').fillna(1).astype(int)\ndf\n\nOut[7]:\n    0  1\n0   8  0\n1   9  0\n2  10  0\n3  11  0\n4  12  0\n5  13  1\n6  14  1\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 4518401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-dkWMKKLuSDU/AAAAAAAAAAI/AAAAAAAAA-Y/1qsYPAJZN44/photo.jpg?sz=128", "display_name": "Lois Keller", "link": "https://stackoverflow.com/users/4518401/lois-keller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 0, "accepted_answer_id": 40899647, "answer_count": 1, "score": 2, "last_activity_date": 1480545946, "creation_date": 1480545352, "question_id": 40899520, "link": "https://stackoverflow.com/questions/40899520/replace-all-string-types-in-python-pandas-data-frame-with-a-1", "title": "Replace all string types in Python Pandas Data Frame with a 1", "body": "<p>This is an oddly specific question but</p>\n\n<p>if I have a pandas data frame that looks like: </p>\n\n<pre><code>...\n8                                                        0\n9                                                        0\n10                                                       0\n11                                                       0\n12                                                       0\n13                                                    Dogs\n14                                                    Cats\n...\n</code></pre>\n\n<p>And I need it to see all the string types and change them to a 1, so: </p>\n\n<pre><code>...\n8                                                        0\n9                                                        0\n10                                                       0\n11                                                       0\n12                                                       0\n13                                                       1\n14                                                       1\n...\n</code></pre>\n\n<p>Is there a way maybe to get df.replace() to see the string types? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1168, "user_id": 402412, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/8Wakl.jpg?s=128&g=1", "display_name": "Mike Shultz", "link": "https://stackoverflow.com/users/402412/mike-shultz"}, "edited": false, "score": 0, "creation_date": 1480546805, "post_id": 40899467, "comment_id": 69013378, "body": "It would be helpful if you explained exactly what it is you&#39;re trying to accomplish.  For instance, why do you want to create a 2d array of 2B?  There may be better techniques to your end goal with python, even.  Also, including code in a language you&#39;re familiar with as an example may also help get your question answered."}, {"owner": {"reputation": 485, "user_id": 7151344, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WthpolmWBX4/AAAAAAAAAAI/AAAAAAAAAqI/M6L0vx7t84o/photo.jpg?sz=128", "display_name": "Andrew Lamarra", "link": "https://stackoverflow.com/users/7151344/andrew-lamarra"}, "edited": false, "score": 0, "creation_date": 1480550725, "post_id": 40899467, "comment_id": 69014702, "body": "Does the array need to be saved in a specific format? I know you can use the pickle module to save objects (such as a list) to a file as a byte stream. Is there a reason you don&#39;t want to use a list? You can save bytes to a list (and even two at a time!). <code>L = [b&#39;\\xaa\\xbb&#39;, b&#39;\\xcc\\xdd&#39;]</code>"}, {"owner": {"reputation": 1, "user_id": 7233343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa65fd42f8134dd27ebc13f44ceb5f89?s=128&d=identicon&r=PG&f=1", "display_name": "Mike.Doost", "link": "https://stackoverflow.com/users/7233343/mike-doost"}, "edited": false, "score": 0, "creation_date": 1480554780, "post_id": 40899467, "comment_id": 69015767, "body": "the binary file will be read by firmware (c language)  uploading through serial port. I have a two-dimensional array in c code &quot;unsigned short array[x][y]&quot; which I need to copy the file to this array. I don&#39;t mind to use list but I don&#39;t know how I can convert the list to binary. I tried bytearray function but this function cannot handle over one byte (0~255)"}], "owner": {"reputation": 1, "user_id": 7233343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa65fd42f8134dd27ebc13f44ceb5f89?s=128&d=identicon&r=PG&f=1", "display_name": "Mike.Doost", "link": "https://stackoverflow.com/users/7233343/mike-doost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 470, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1480545105, "creation_date": 1480545105, "question_id": 40899467, "link": "https://stackoverflow.com/questions/40899467/creating-two-byte-two-dimensional-array-in-python", "title": "creating two byte, two-dimensional array in Python", "body": "<p>I am new to python programming and I have c and c++ background. I need to create two-dimensional array (Not a list) which each element is two bytes and save it to a file (as a binary file). I learned that if I create a two-dimensional list and use the bytearray function I can save the list to a binary file, but unfortunately the bytearray cannot have more than one byte value. Any hints and guidance would be appreciated.</p>\n"}, {"tags": ["python", "debian", "pyserial"], "comments": [{"owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "edited": false, "score": 1, "creation_date": 1480549809, "post_id": 40899442, "comment_id": 69014436, "body": "You can print out the value of <code>sys.path</code> inside of the Python interpreter to see what the Python module search path is."}, {"owner": {"reputation": 2479, "user_id": 2101808, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eac6c5555d5e72e2b4f2f2253e4579e2?s=128&d=identicon&r=PG", "display_name": "eri", "link": "https://stackoverflow.com/users/2101808/eri"}, "edited": false, "score": 0, "creation_date": 1480597051, "post_id": 40899442, "comment_id": 69034655, "body": "pip uses site-packages"}], "answers": [{"comments": [{"owner": {"reputation": 2479, "user_id": 2101808, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eac6c5555d5e72e2b4f2f2253e4579e2?s=128&d=identicon&r=PG", "display_name": "eri", "link": "https://stackoverflow.com/users/2101808/eri"}, "edited": false, "score": 0, "creation_date": 1480597021, "post_id": 40907120, "comment_id": 69034633, "body": "pip uses site-packages"}, {"owner": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "edited": false, "score": 0, "creation_date": 1480622506, "post_id": 40907120, "comment_id": 69050968, "body": "Thanks for your answer, but which one is actually used by the system? For example, i have installed an SDK which uses the pyserial module to communicate with devices over USB but it doesn&#39;t detect the pyserial module even though i have installed it via pip and via apt-get install."}, {"owner": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "edited": false, "score": 0, "creation_date": 1480628644, "post_id": 40907120, "comment_id": 69054035, "body": "Okay, the solution was to move the serial folder installed by <code>sudo apt-get install python-serial</code> to <code>&#47;usr&#47;local&#47;lib&#47;python2.7&#47;site-packages</code> to get recognized."}], "tags": [], "owner": {"reputation": 810, "user_id": 2746623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PiBh4.jpg?s=128&g=1", "display_name": "opentokix", "link": "https://stackoverflow.com/users/2746623/opentokix"}, "is_accepted": false, "score": 1, "last_activity_date": 1480596932, "last_edit_date": 1480596932, "creation_date": 1480585286, "answer_id": 40907120, "question_id": 40899442, "link": "https://stackoverflow.com/questions/40899442/debian-python-has-two-dist-packages-which-one-should-i-use/40907120#40907120", "title": "Debian - python has two dist-packages? Which one should i use?", "body": "<p>The packages in <code>/usr/lib</code> is handled by the packages you install via <code>apt</code>and the packages in <code>/usr/local/lib</code> is handled by for instance <code>pip</code> or <code>easy_install</code> .</p>\n"}], "owner": {"reputation": 1247, "user_id": 2826018, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/N9AZK.gif?s=128&g=1", "display_name": "binaryBigInt", "link": "https://stackoverflow.com/users/2826018/binarybigint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1480596932, "creation_date": 1480545006, "last_edit_date": 1480593159, "question_id": 40899442, "link": "https://stackoverflow.com/questions/40899442/debian-python-has-two-dist-packages-which-one-should-i-use", "title": "Debian - python has two dist-packages? Which one should i use?", "body": "<p>I have noticed, that Debian has two dist-packages for Python, one in:</p>\n\n<pre><code>usr/lib/python2.7/dist-packages \n</code></pre>\n\n<p>and the other one in:</p>\n\n<pre><code>usr/local/lib/python2.7/dist-packages\n</code></pre>\n\n<p>I am having trouble to get Python to recognize the pyserial library correctly (I installed it via <code>pip install pyserial</code>). I wonder if <code>pip</code> may use the wrong dist-packages path?</p>\n\n<p>Any help would be very much appreciated.</p>\n"}, {"tags": ["python", "user-interface", "selenium"], "owner": {"user_type": "does_not_exist", "display_name": "user5364649"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 941, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1480586669, "creation_date": 1480544675, "last_edit_date": 1480586669, "question_id": 40899370, "link": "https://stackoverflow.com/questions/40899370/python-selenium-and-gui", "title": "Python selenium and gui", "body": "<p>First of all, my knowledge of programming is equal to zero, approximately :)</p>\n\n<p>I want to scrap data with pages like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/C7VrM.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C7VrM.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>And I did it:</p>\n\n<pre><code>from selenium import webdriver\ndriver = webdriver.Chrome()\n\ndriver.get(\"http://www.rezultati.com/utakmica/4G3g57cl/#detalji\")\n\nliga = driver.find_elements_by_class_name(\"fleft\")\nfor post in liga:\n    print(post.text.split(' ', 1)[0])\n\ndatum = driver.find_elements_by_class_name(\"mstat-date\")\nfor post in datum:\n   print(post.text.split(' ', 1)[0])\n\nimena = driver.find_elements_by_class_name(\"tname\")\nfor post in imena:\n    print(post.text)\n\nkosevi = driver.find_elements_by_class_name(\"score\")\nfor post in kosevi:\n    print(post.text)\n</code></pre>\n\n<p>And now I want to change link, so I made this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Gxi3r.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gxi3r.jpg\" alt=\"enter image description here\"></a></p>\n\n<pre><code>import sys from tkinter import *\n\ndef Get():\n    link = ment.get()\n    return\n\nroot = Tk()\nment = StringVar()\n\nroot.title(\"Program\")\nroot.geometry(\"700x100\")\n\ntheTekst = Label(root, text=\"link:\")\ntheTekst.pack()\n\ne = Entry(root, width = 110, textvariable = ment)\ne.pack()\n\ndugme = Button(root, text=\"Start\", command = Get)\ndugme.pack()\n\nroot.mainloop()\n</code></pre>\n\n<p>and it works</p>\n\n<p>But do not know how to unite these two codes..\nDo you have any suggestions or could you point me in the direction of some useful resources?</p>\n"}, {"tags": ["python", "matplotlib", "plot", "matplotlib-basemap"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1480544785, "post_id": 40899350, "comment_id": 69012481, "body": "<code>pcolor(mesh)</code> mimics the eponymous MATLAB function and is usually suboptimal for data visualization. I would personally use something like <code>contourf</code> with a lot of levels. Or even <code>imshow</code>."}], "answers": [{"tags": [], "owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "is_accepted": true, "score": 3, "last_activity_date": 1480595485, "last_edit_date": 1592644375, "creation_date": 1480594309, "answer_id": 40910360, "question_id": 40899350, "link": "https://stackoverflow.com/questions/40899350/python-quiver-and-pcolormesh-not-lining-up-exactly-right/40910360#40910360", "title": "Python quiver and pcolormesh not lining up exactly right", "body": "<p>There are a few problems with your code.</p>\n<p>First of all, avoid using <code>from pylab import *</code>, that will pollute your namespace horribly.</p>\n<p>Secondly, the missing data on top and to the right: this is due to the behaviour of <code>pcolormesh</code>, which mimics the MATLAB function of the same name. Quoting the documentation of <a href=\"http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.pcolor\" rel=\"nofollow noreferrer\">the functionally similar <code>pcolor</code></a> where this is explained:</p>\n<blockquote>\n<p><code>pcolor(X, Y, C, **kwargs)</code></p>\n<p>[...]</p>\n<p>Ideally the dimensions of X and Y should be one greater than those of C; if the dimensions are the same, then the last row and column of C will be ignored.</p>\n</blockquote>\n<p>So you can get rid of the empty borders by using an auxiliary array of latitudes/longitudes. Alternatively, I suggest using <code>imshow</code>, the basemap version of which automatically adjusts the scale such that the plotted image spans the visible map. Switching your <code>pcolormesh</code> call to</p>\n<pre><code>m.imshow(sqrt(u**2+v**2),interpolation='none')\n</code></pre>\n<p>you get</p>\n<p><a href=\"https://i.stack.imgur.com/svons.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/svons.png\" alt=\"imshow instead of pcolormesh\" /></a></p>\n<p>Now, the last issue is how you are trying to visualize your data. What <em>is</em> your data? In the above plot, data points correspond to the bottom right of each &quot;pixel&quot;, that is where your <code>(lat,lon)</code> points are situated. So the current visualization is such: each arrow starts from the point it corresponds to, and each pixel corresponds to data on its lower left corner.</p>\n<p>What you want to do is somehow shift those arrows into the center of pixels. If you want to be precise, you actually need to shift the pixels, since the quiver plot is by definition where it should be. The other option is to leave your map as-is, and shift the quiver plots (the rationale behind this version is that you discretize your data, and on a pixel scale it doesn't matter where you put the arrows/pixels).</p>\n<p>Since in my opinion it is more exact if your quiver arrows stay where they are, I suggest shifting the whole basemap by half a <code>(lat,lon)</code> unit so that pixels are centered on actual data points. You can make it prettiest by passing the <code>pivot='middle'</code> option to <code>quiver</code>: in this case your arrows will be centered on data points (this situated in the middle of each pixel) rather than originating from said points:</p>\n<pre><code>from mpl_toolkits.basemap import Basemap\n#from pylab import * \nfrom pylab import arange,meshgrid,random,sqrt\n\nlonMin = 115.5\nlonMax = 124.5\nlatMin = 10\nlatMax = 20\n\nres = 0.25\nlonGrid = arange(lonMin, lonMax, res)\nlatGrid = arange(latMin, latMax, res)\nlonGrid,latGrid = meshgrid(lonGrid,latGrid)\n\nu = random(lonGrid.shape)\nv = random(lonGrid.shape)\nm = Basemap(llcrnrlon=lonMin-res/2,llcrnrlat=latMin-res/2,\n            urcrnrlon=lonMax-res/2,urcrnrlat=latMax-res/2,\n            resolution='i') # shifted!\n# data corresponds to (latGrid,lonGrid)\n# basemap plot is shifted with (-res/2,-res/2)\n# imshow will automatically use the visible map anyway\n\nm.imshow(sqrt(u**2+v**2), interpolation='none')\nm.quiver(lonGrid,latGrid,u,v, latlon='true', pivot='middle')\nm.drawcoastlines()\nm.fillcontinents()\n</code></pre>\n<p>The resulting plot looks fairly nice, and now it is also obvious that colour is related to the magnitude of the arrows:</p>\n<p><a href=\"https://i.stack.imgur.com/UDcBS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UDcBS.png\" alt=\"final result\" /></a></p>\n"}], "owner": {"reputation": 1160, "user_id": 3826115, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64deaa69ef71ef12623f3ced55f16d2d?s=128&d=identicon&r=PG&f=1", "display_name": "hm8", "link": "https://stackoverflow.com/users/3826115/hm8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1105, "favorite_count": 0, "accepted_answer_id": 40910360, "answer_count": 1, "score": 2, "last_activity_date": 1480595573, "creation_date": 1480544576, "last_edit_date": 1480595573, "question_id": 40899350, "link": "https://stackoverflow.com/questions/40899350/python-quiver-and-pcolormesh-not-lining-up-exactly-right", "title": "Python quiver and pcolormesh not lining up exactly right", "body": "<p>I am trying to overlay a quiver plot of wind field on a map with a pcolormesh of the windspeed. </p>\n\n<pre><code>from mpl_toolkits.basemap import Basemap\nfrom pylab import * \n\nlonMin = 115.5\nlonMax = 124.5\nlatMin = 10\nlatMax = 20\n\nres = 0.25\nlonGrid = arange(lonMin, lonMax, res)\nlatGrid = arange(latMin, latMax, res)\nlonGrid,latGrid = meshgrid(lonGrid,latGrid)\n\nu = random(lonGrid.shape)\nv = random(lonGrid.shape)\nm = Basemap(llcrnrlon=lonMin,llcrnrlat=latMin,urcrnrlon=lonMax,urcrnrlat=latMax, resolution = 'i')\n\nm.pcolormesh(lonGrid, latGrid, sqrt(u**2+v**2))\nm.quiver(lonGrid,latGrid,u,v, latlon = 'true')\nm.drawcoastlines()\nm.fillcontinents()\n</code></pre>\n\n<p>This gives me something like the below plot\n<a href=\"https://i.stack.imgur.com/G6gmv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G6gmv.png\" alt=\"enter image description here\"></a></p>\n\n<p>Two things I notice:</p>\n\n<ol>\n<li>The quiver arrows emanate from the lower left corner of the pixels generated from pcolormesh, rather than the center</li>\n<li>the upper and right-most border of the plot isn't colored</li>\n</ol>\n\n<p>What exactly is going on here, and how do I fix it?</p>\n"}, {"tags": ["python", "django", "postgresql", "django-orm"], "comments": [{"owner": {"reputation": 2845, "user_id": 5421745, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c95c95e7098f89ad77f886fc086fe01e?s=128&d=identicon&r=PG&f=1", "display_name": "wanaryytel", "link": "https://stackoverflow.com/users/5421745/wanaryytel"}, "edited": false, "score": 0, "creation_date": 1480544943, "post_id": 40899346, "comment_id": 69012567, "body": "I could help you, but I do not speak .NET and from you text I can&#39;t figure out which parts of the pseudo code are actually model fields and which are just variables... Can I assume that <code>annualIncome</code> and <code>payment</code> are int/float variables and <code>monthlyIncome</code> is the DB field to filter upon?"}, {"owner": {"reputation": 1078, "user_id": 275270, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e654e0bfa874bd0a16b8b7d0ffa7ee3?s=128&d=identicon&r=PG", "display_name": "warpedspeed", "link": "https://stackoverflow.com/users/275270/warpedspeed"}, "reply_to_user": {"reputation": 2845, "user_id": 5421745, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c95c95e7098f89ad77f886fc086fe01e?s=128&d=identicon&r=PG&f=1", "display_name": "wanaryytel", "link": "https://stackoverflow.com/users/5421745/wanaryytel"}, "edited": false, "score": 0, "creation_date": 1480545130, "post_id": 40899346, "comment_id": 69012654, "body": "annualIncome and payment are model fields and monthlyIncome is a variable."}], "answers": [{"comments": [{"owner": {"reputation": 1078, "user_id": 275270, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e654e0bfa874bd0a16b8b7d0ffa7ee3?s=128&d=identicon&r=PG", "display_name": "warpedspeed", "link": "https://stackoverflow.com/users/275270/warpedspeed"}, "edited": false, "score": 0, "creation_date": 1480555845, "post_id": 40899754, "comment_id": 69016043, "body": "I totally get it.  Thanks again @makaveli - this is exactly what I was looking for."}], "tags": [], "owner": {"reputation": 2845, "user_id": 5421745, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c95c95e7098f89ad77f886fc086fe01e?s=128&d=identicon&r=PG&f=1", "display_name": "wanaryytel", "link": "https://stackoverflow.com/users/5421745/wanaryytel"}, "is_accepted": true, "score": 0, "last_activity_date": 1480547181, "last_edit_date": 1480547181, "creation_date": 1480546406, "answer_id": 40899754, "question_id": 40899346, "link": "https://stackoverflow.com/questions/40899346/django-orm-compound-filter-with-variables/40899754#40899754", "title": "Django ORM compound filter with variables", "body": "<p>In that case welcome to the magical world of Django ORM (and not in a bad sense, it's actually pretty reasonable most of the time :).  </p>\n\n<pre><code>from django.db.models import F, Case\n\n# Your stuff\nmatches.annotate(\n    req=Case(default=(F('annualIncome') / 12) - F('payment'))\n).exclude(req__gt=monthlyIncome)\n</code></pre>\n\n<p>Because you can't query directly in that kind of a calculation, then the <code>F</code> object tells ORM that this should come from the database, go and get it.<br>\nUntested (due to lack of similar case in my projects), but if problems arise, do let me know.  </p>\n\n<p>PS. You can change the <code>req</code> name to whatever you like.</p>\n\n<p>EDIT:<br>\nWow, this is awkward. You can just do it without the <code>Case</code> as well.  </p>\n\n<pre><code>matches.annotate(req=(F('annualIncome') / 12) - F('payment')).exclude(req__gt=monthlyIncome)\n</code></pre>\n"}], "owner": {"reputation": 1078, "user_id": 275270, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e654e0bfa874bd0a16b8b7d0ffa7ee3?s=128&d=identicon&r=PG", "display_name": "warpedspeed", "link": "https://stackoverflow.com/users/275270/warpedspeed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 40899754, "answer_count": 1, "score": 0, "last_activity_date": 1480547181, "creation_date": 1480544564, "question_id": 40899346, "link": "https://stackoverflow.com/questions/40899346/django-orm-compound-filter-with-variables", "title": "Django ORM compound filter with variables", "body": "<p>I'm by no means a Django expert, and need some guidance on a problem.</p>\n\n<p>For background, I have a older .NET project that I've been tasked to turn into Django project. The project gets a full list of objects and then runs a large set of user set filters to end up with the desired set of objects.  </p>\n\n<p><em>One of the filters in .NET might be like so ...</em> </p>\n\n<pre><code>matched.RemoveAll(x =&gt; ((x.annualIncome / 12) - x.payment) &lt; monthlyIncome);\n</code></pre>\n\n<p>I'm trying to figure out how I would do this with the django ORM.  I'm kind off stuck on this. </p>\n\n<p><em>In a pseudo-code django ORM version (yes, this will not work):</em></p>\n\n<pre><code>matched.exclude(((annualIncome /12)-payment)__gt = monthlyIncome)\n</code></pre>\n\n<p>There are 30+ filters before this one so I can't re-do them all in a different manner.  I can obviously go through each object and filter but I decided to ask first.</p>\n\n<p>I'm open to solutions here or friendly \"RTFM, this pages answers it.\"</p>\n\n<p>Thanks in advance, and mods please edit with a better title as my brain is now officially fried from 3 days coding with the Flu.   </p>\n"}, {"tags": ["python", "pip"], "owner": {"reputation": 11, "user_id": 7233346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e96fb2579738136afc06fcbebeca2f?s=128&d=identicon&r=PG&f=1", "display_name": "FAREENA", "link": "https://stackoverflow.com/users/7233346/fareena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562831579, "creation_date": 1480544518, "last_edit_date": 1562831579, "question_id": 40899337, "link": "https://stackoverflow.com/questions/40899337/how-to-import-c-einsum-using-pip", "title": "How to import c_einsum using pip?", "body": "<p>I have installed everything <code>scipy</code>, <code>numpy</code>+mkl</p>\n\n<p>Now when I want to import the following modules</p>\n\n<pre><code>import scipy\nscipy.test()\n</code></pre>\n\n<p>it returns me the following error:</p>\n\n<blockquote>\n  <p>ImportError: cannot import name 'c_einsum'</p>\n</blockquote>\n\n<p>Please help me. I am using python 3.5.2 32bit for my 64bit windows</p>\n"}, {"tags": ["python", "encoding", "flask"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1480546333, "post_id": 40899301, "comment_id": 69013200, "body": "I don&#39;t have a solution for you, but the problem is that <code>send_file()</code> auto-detects the content-type and supplies the header <code>Content-Type: text&#47;html; charset=utf-8</code>. Once the charset has been defined in the headers, it can&#39;t be overridden by a  meta http-equiv."}, {"owner": {"reputation": 1679, "user_id": 844976, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/284b6b2d4cb5a384793f7dd4ab6382a1?s=128&d=identicon&r=PG", "display_name": "YellowShark", "link": "https://stackoverflow.com/users/844976/yellowshark"}, "edited": false, "score": 0, "creation_date": 1480547518, "post_id": 40899301, "comment_id": 69013670, "body": "What about trying to <code>open</code> and read the file contents, and then return <code>contents.encode(&#39;UTF-8&#39;)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1783, "user_id": 2390362, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c2d28dfb605e8c6b803ce6b1ba27943?s=128&d=identicon&r=PG&f=1", "display_name": "Jad S", "link": "https://stackoverflow.com/users/2390362/jad-s"}, "edited": false, "score": 0, "creation_date": 1481208399, "post_id": 40941018, "comment_id": 69291676, "body": "so this works, but I want to see if I can defer charset decision to the browser. Not all my files are Shift_JIS."}], "tags": [], "owner": {"reputation": 815, "user_id": 7243142, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cZc7H8fbkUo/AAAAAAAAAAI/AAAAAAAAhA0/AzJ54NAuceo/photo.jpg?sz=128", "display_name": "Kevin Schellenberg", "link": "https://stackoverflow.com/users/7243142/kevin-schellenberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1480713755, "creation_date": 1480713755, "answer_id": 40941018, "question_id": 40899301, "link": "https://stackoverflow.com/questions/40899301/why-is-flask-send-file-messing-up-the-encoding/40941018#40941018", "title": "Why is Flask send_file() messing up the encoding", "body": "<p>Override auto-detection of the content type by setting the mimetype parameter when you call send_file</p>\n\n<pre><code>return send_file(file_path, mimetype=\"Content-Type: text/html; charset=Shift_JIS\")\n</code></pre>\n"}], "owner": {"reputation": 1783, "user_id": 2390362, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c2d28dfb605e8c6b803ce6b1ba27943?s=128&d=identicon&r=PG&f=1", "display_name": "Jad S", "link": "https://stackoverflow.com/users/2390362/jad-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1869, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480713755, "creation_date": 1480544387, "last_edit_date": 1480550978, "question_id": 40899301, "link": "https://stackoverflow.com/questions/40899301/why-is-flask-send-file-messing-up-the-encoding", "title": "Why is Flask send_file() messing up the encoding", "body": "<p>I have a saved HTML file that I want to be able to open from my front end GUI.</p>\n\n<p>The webpage has Japanese characters on it and has the following meta tag\n<code>&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=Shift_JIS\" /&gt;</code></p>\n\n<p>If I drag and drop the file into any of Chrome, IE or Firefox, the page opens correctly. When I use a Flask to get the file however, the encoding is messed up and all japanese characters show up as the \ufffd symbol.</p>\n\n<p>In my webapp I'm using a Flask route to get the file and send it to my front end. So in my front end I have the following tag</p>\n\n<p><code>&lt;a href=\"/getFile/the_saved_file.html\" target=\"_blank\"&gt;&lt;/a&gt;</code></p>\n\n<p>And in my Flask app I have the following route:</p>\n\n<pre><code>@app.route('/getFile/&lt;file&gt;/')\ndef get_file(file):\n    file_path = os.path.join(FILE_STORAGE_PATH, file)\n    return send_file(file_path)\n</code></pre>\n\n<p>When I click the <code>&lt;a&gt;</code> link, the file opens up in seperate tab.</p>\n\n<p>How can I make Flask behave the same way as the drag and drop when it comes to preserving the encoding?</p>\n"}, {"tags": ["python", "function", "python-3.x", "variables"], "comments": [{"owner": {"reputation": 77, "user_id": 6918086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d5c2f69ab25f12ca8a890112679407?s=128&d=identicon&r=PG&f=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/6918086/eric"}, "edited": false, "score": 0, "creation_date": 1480544449, "post_id": 40899264, "comment_id": 69012351, "body": "hiOrLo will equal whatever the input is, to use that outside the function you can simply <code>return hiOrLo</code>"}], "answers": [{"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 2, "creation_date": 1480544422, "post_id": 40899295, "comment_id": 69012336, "body": "No, you do not in fact need the <code>global</code> keyword."}, {"owner": {"reputation": 2631, "user_id": 1202834, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/518724a126e37579e4d114eddb0bc5c9?s=128&d=identicon&r=PG", "display_name": "aquil.abdullah", "link": "https://stackoverflow.com/users/1202834/aquil-abdullah"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1480544807, "post_id": 40899295, "comment_id": 69012490, "body": "@TigerhawkT3 I beg to differ. You can say that you shouldn&#39;t use the <code>global</code> keyword, but you do need the <code>global</code> keyword. I agree that your solution is a better one."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1480544861, "post_id": 40899295, "comment_id": 69012520, "body": "What does that even mean?"}, {"owner": {"reputation": 2631, "user_id": 1202834, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/518724a126e37579e4d114eddb0bc5c9?s=128&d=identicon&r=PG", "display_name": "aquil.abdullah", "link": "https://stackoverflow.com/users/1202834/aquil-abdullah"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1480544961, "post_id": 40899295, "comment_id": 69012579, "body": "It means that the solution I provided works, even though it is less desirable."}, {"owner": {"reputation": 15014, "user_id": 2505645, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/lgpuB.jpg?s=128&g=1", "display_name": "Markus Meskanen", "link": "https://stackoverflow.com/users/2505645/markus-meskanen"}, "edited": false, "score": 0, "creation_date": 1480544973, "post_id": 40899295, "comment_id": 69012583, "body": "@aquil.abdullah You don&#39;t <i>need</i> the global keyword. It <i>can</i> be used to solve this, but using return value is way superior."}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1480544978, "post_id": 40899295, "comment_id": 69012585, "body": "@TigerhawkT3 I think he means to say its a choice of preference. Even so, <code>global</code> is the wrong choice here."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1480544993, "post_id": 40899295, "comment_id": 69012594, "body": "I&#39;ve never seen <code>global</code> be the right choice. Ever."}, {"owner": {"reputation": 15014, "user_id": 2505645, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/lgpuB.jpg?s=128&g=1", "display_name": "Markus Meskanen", "link": "https://stackoverflow.com/users/2505645/markus-meskanen"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1480545019, "post_id": 40899295, "comment_id": 69012604, "body": "@TigerhawkT3 You should try making your own OS ;) ...wait, with python?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1480545173, "post_id": 40899295, "comment_id": 69012672, "body": "@neil - In a simple script like this, where the OP is a blank slate for learning good practices, <code>global</code> is one of the worst things to be demonstrating. Returning and saving values is fundamental."}, {"owner": {"reputation": 3, "user_id": 7233331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da195e4f88c0de2836a2ae4dbfa3119e?s=128&d=identicon&r=PG&f=1", "display_name": "P. Panos", "link": "https://stackoverflow.com/users/7233331/p-panos"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1480588595, "post_id": 40899295, "comment_id": 69029143, "body": "@TigerhawkT3 That last comment is very true, I want to learn the correct and most efficient ways to code."}], "tags": [], "owner": {"reputation": 2631, "user_id": 1202834, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/518724a126e37579e4d114eddb0bc5c9?s=128&d=identicon&r=PG", "display_name": "aquil.abdullah", "link": "https://stackoverflow.com/users/1202834/aquil-abdullah"}, "is_accepted": false, "score": 0, "last_activity_date": 1480544363, "creation_date": 1480544363, "answer_id": 40899295, "question_id": 40899264, "link": "https://stackoverflow.com/questions/40899264/how-do-i-make-a-while-loop-assign-a-variable/40899295#40899295", "title": "How do I make a while loop assign a variable?", "body": "<p>You need the global keyword:</p>\n\n<pre><code>def valid():\n    global hiOrLo\n    while True:\n        hiOrLo = input(\"Type 'h' for higher and 'l' for lower.\")\n        if hiOrLo == \"h\" or hiOrLo == \"l\":\n            return \n        else:\n            print(\"Invalid, try again\")\n\nhiOrLo = 0\nvalid()\n\nprint(hiOrLo)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": true, "score": 7, "last_activity_date": 1480544403, "creation_date": 1480544403, "answer_id": 40899305, "question_id": 40899264, "link": "https://stackoverflow.com/questions/40899264/how-do-i-make-a-while-loop-assign-a-variable/40899305#40899305", "title": "How do I make a while loop assign a variable?", "body": "<p>Have the function return that value, then save a reference to it.</p>\n\n<pre><code>def valid():\n    while True:\n        hiOrLo = input(\"Type 'h' for higher and 'l' for lower.\")\n        if hiOrLo == \"h\" or hiOrLo == \"l\":\n            return hiOrLo\n        else:\n            print(\"Invalid, try again\")\n\nhiOrLo = valid()\n\nprint(hiOrLo)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7233331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da195e4f88c0de2836a2ae4dbfa3119e?s=128&d=identicon&r=PG&f=1", "display_name": "P. Panos", "link": "https://stackoverflow.com/users/7233331/p-panos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 40899305, "answer_count": 2, "score": 0, "last_activity_date": 1480547773, "creation_date": 1480544233, "last_edit_date": 1480547773, "question_id": 40899264, "link": "https://stackoverflow.com/questions/40899264/how-do-i-make-a-while-loop-assign-a-variable", "title": "How do I make a while loop assign a variable?", "body": "<pre><code>def valid():\n    while True:\n        hiOrLo = input(\"Type 'h' for higher and 'l' for lower.\")\n        if hiOrLo == \"h\" or hiOrLo == \"l\":\n            return \n        else:\n            print(\"Invalid, try again\")\n\nhiOrLo = 0\nvalid()\n\nprint(hiOrLo)\n</code></pre>\n\n<p>What I understand is that Python won't change a variable through \"input\" while in the while loop, so when printed hiOrLo will still be \"0\", but i need hiOrLo to be either \"h\" or \"l\", whichever one I select, how do I do this while keeping it a function?</p>\n"}, {"tags": ["python", "python-2.7", "csv"], "comments": [{"owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "edited": false, "score": 0, "creation_date": 1480544178, "post_id": 40899160, "comment_id": 69012229, "body": "Instead of adding the full <code>row[1]</code> value, truncate that in each loop first, so that the <code>Road</code>, <code>Rd</code>, <code>Court</code> etc component is dropped before attempting the intersection."}, {"owner": {"reputation": 119, "user_id": 7043140, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fcc43d20288edf2fb9ea2ce9671a344f?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob_Cortese", "link": "https://stackoverflow.com/users/7043140/jacob-cortese"}, "reply_to_user": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "edited": false, "score": 0, "creation_date": 1480544772, "post_id": 40899160, "comment_id": 69012471, "body": "I am sorry if this might sound absurd but do you mean using append?"}, {"owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "edited": false, "score": 0, "creation_date": 1480545761, "post_id": 40899160, "comment_id": 69012959, "body": "I&#39;ll write a solution."}], "answers": [{"tags": [], "owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "is_accepted": true, "score": 1, "last_activity_date": 1480546112, "creation_date": 1480546112, "answer_id": 40899682, "question_id": 40899160, "link": "https://stackoverflow.com/questions/40899160/python-match-values-between-two-csv-files/40899682#40899682", "title": "Python: Match values between two csv files", "body": "<p>Since you are only interested in matching portions of the data, you might as well just load that portion into the <code>set</code> and then perform the intersection.</p>\n\n<pre><code>import csv\n\nAddresses = set()\nwith open ('Addresses.csv') as f:\n    for row in csv.reader(f):\n        portion = ' '.join(row[1].split()[:-1])  # Loads \"4587 Newton\" instead of \"4587 Newton Road\"\n        Addresses.add(portion)\n\nOnlineData = set()\nwith open ('C:/Users/OnlineData.csv') as g:\n    for row in csv.reader(g):\n        portion = ' '.join(row[1].split()[:-1])\n        OnlineData.add(portion)\n\nresults = Addresses &amp; OnlineData\n\nprint 'There are', len(results), 'matching addresses between the two csv files'\n\nfor result in sorted(results):\n    print result\n</code></pre>\n\n<p>The obvious disadvantage is that you lose that bit of information, which you could still retrieve. Another option would be to normalize the input, meaning that you could replace <code>Rd</code> with <code>Road</code> and <code>Ct</code> with <code>Court</code> wherever those appear, so as to have always matching info.</p>\n"}], "owner": {"reputation": 119, "user_id": 7043140, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fcc43d20288edf2fb9ea2ce9671a344f?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob_Cortese", "link": "https://stackoverflow.com/users/7043140/jacob-cortese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 873, "favorite_count": 0, "accepted_answer_id": 40899682, "answer_count": 1, "score": 0, "last_activity_date": 1480546112, "creation_date": 1480543796, "question_id": 40899160, "link": "https://stackoverflow.com/questions/40899160/python-match-values-between-two-csv-files", "title": "Python: Match values between two csv files", "body": "<p>I am parsing through two different csv files and need to match a column between them. Currently, when I run the snippet, it returns no matching values when, in reality, there are matching Addresses between the two csv files. The problem I am having is abbreviations with the addresses field in the OnlineData csv file.  For example:</p>\n\n<pre><code>In the Addresses csv                             In the OnlineData csv\n  4587 Newton Road                                    4587 Newton Rd\n  7854 Food Court                                     7854 Food Ct\n</code></pre>\n\n<p>How can I tell Python to look up <strong><em>only</em></strong> the numbers ('4587') and the first word ('Newton') in both the csv files when looking for matching values.</p>\n\n<pre><code>import csv\n\n\nAddresses = set()\n\nwith open ('Addresses.csv') as f:\n    for row in csv.reader(f):\n        Addresses.add(row[1])\n\nOnlineData = set()\n\nwith open ('C:/Users/OnlineData.csv') as g:\n    for row in csv.reader(g):\n        PermitData.add(row[1])\n\n\nresults = Addresses &amp; OnlineData\n\n\nprint 'There are', len(results), 'matching addresses between the two csv files'\n\nfor result in sorted(results):\n    print result\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1480544146, "post_id": 40899153, "comment_id": 69012212, "body": "Where is the source of information for how many times each specific word was used?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1480544148, "post_id": 40899153, "comment_id": 69012213, "body": "Good on you for thinking about data structures as a new programmer.  The best answer depends on some other factors you haven&#39;t mentioned:   Is the data dynamic or static?  How big is it, and how important is performance?"}, {"owner": {"reputation": 89, "user_id": 7151418, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43d864051bbb6820067c7761989db5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Blakester", "link": "https://stackoverflow.com/users/7151418/blakester"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1480544441, "post_id": 40899153, "comment_id": 69012344, "body": "@TigerhawkT3 it&#39;s in another file provided to me, that I have yet to slice out."}, {"owner": {"reputation": 89, "user_id": 7151418, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43d864051bbb6820067c7761989db5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Blakester", "link": "https://stackoverflow.com/users/7151418/blakester"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1480544446, "post_id": 40899153, "comment_id": 69012349, "body": "@wim Thank you.The data is provided to me in two files both of which are static. Also the files are quite big csv files, how quickly the program runs is not a top priority for me but would probably be nice. EDIT: I&#39;m sorry guys I have to run to work, but I&#39;ll be back later thanks for any continued help!."}], "answers": [{"tags": [], "owner": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "is_accepted": false, "score": 0, "last_activity_date": 1480545146, "creation_date": 1480545146, "answer_id": 40899480, "question_id": 40899153, "link": "https://stackoverflow.com/questions/40899153/which-data-structure-should-i-be-using-here/40899480#40899480", "title": "Which data structure should I be using here?", "body": "<p>I assume you don't have a lot of years (may be up to few hundreds), so I would expect list and dictionary to have similar lookup time. However, dictionaries are semantically more convenient.</p>\n\n<p>At the same time, within each year you probably have a lot of words, so it's better to use structure with constant (O(1)) lookup, so dict it is.</p>\n\n<pre><code>from collections import defaultdict\n\nyearTotal = defaultdict(labda: defaultdict(int))\n\nfh = open('total_counts.csv')\nfor year, word in csv.reader(fh, delimiter=\",\"):\n    yearTotal[year][''] += 1  # here we'll cache the number of words\n    yearTotal[year][word] += 1\n\n# ...\nword = \"foo\"\nyear = \"1984\"\nrelative_frequency = float(yearTotal[year][word]) / yearTotal[year]['']\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 7151418, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/43d864051bbb6820067c7761989db5f8?s=128&d=identicon&r=PG&f=1", "display_name": "Blakester", "link": "https://stackoverflow.com/users/7151418/blakester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1480545146, "creation_date": 1480543759, "question_id": 40899153, "link": "https://stackoverflow.com/questions/40899153/which-data-structure-should-i-be-using-here", "title": "Which data structure should I be using here?", "body": "<p>New programmer here. At the moment I have a dictionary for my program containing all of the years and how many total words were used in literature for each year. </p>\n\n<p>What I need to do now is to also find the relative frequency for said year by looking up a specific word given by the user. The relative frequency is found by taking the amount of times the specific word was used and dividing it by the total amount of words that were used for that year.</p>\n\n<p>Do I need to be making another dictionary that contains the year and the number of times the word was used in that year? Or  a different data structure entirely? I should also mention that the user provides a start and an end date.</p>\n\n<p>Below is my function for the dictionary I currently have. If you have any suggestions on how to make this better also, I'm all ears!</p>\n\n<pre><code>yearTotal = dict()\ndef addTotal():\n    with open('total_counts.csv') as allWords:\n        readW = csv.reader(allWords, delimiter=',')\n        for row in readW:\n            yearTotal[row[0]] = row[1]\n\naddTotal()\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "row", "add"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1480544320, "post_id": 40899137, "comment_id": 69012286, "body": "Pro-tip: urging answerers will only hasten downvotes."}, {"owner": {"reputation": 836, "user_id": 1474727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41068ad3501beb3e85fb387f4063233a?s=128&d=identicon&r=PG", "display_name": "burhan", "link": "https://stackoverflow.com/users/1474727/burhan"}, "edited": false, "score": 0, "creation_date": 1480544383, "post_id": 40899137, "comment_id": 69012318, "body": "Adding a row: <code>df.loc[&#39;newrow&#39;]=None</code>"}, {"owner": {"reputation": 60, "user_id": 4567025, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/585a3167ac758a4c1ff4d2b68e70c16e?s=128&d=identicon&r=PG&f=1", "display_name": "Claire", "link": "https://stackoverflow.com/users/4567025/claire"}, "reply_to_user": {"reputation": 836, "user_id": 1474727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41068ad3501beb3e85fb387f4063233a?s=128&d=identicon&r=PG", "display_name": "burhan", "link": "https://stackoverflow.com/users/1474727/burhan"}, "edited": false, "score": 0, "creation_date": 1480544896, "post_id": 40899137, "comment_id": 69012533, "body": "@burhan It works, thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 9572, "user_id": 2543372, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8814f53d616260c4971fd77f8b3f54a1?s=128&d=identicon&r=PG", "display_name": "Julien Marrec", "link": "https://stackoverflow.com/users/2543372/julien-marrec"}, "is_accepted": true, "score": 0, "last_activity_date": 1480544424, "creation_date": 1480544424, "answer_id": 40899312, "question_id": 40899137, "link": "https://stackoverflow.com/questions/40899137/add-a-row-in-pandas-dataframe-without-knowing-number-of-columns/40899312#40899312", "title": "add a row in pandas dataframe without knowing number of columns", "body": "<p>Here's a possible solution:</p>\n\n<pre><code>dfMain.append(pd.Series(index=dfMain.columns, name='NewRow').fillna(0))\n\n             2002-09\nMovies &amp; TV  NaN\nBooks        NaN\nNewRow       0.0\n</code></pre>\n"}], "owner": {"reputation": 60, "user_id": 4567025, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/585a3167ac758a4c1ff4d2b68e70c16e?s=128&d=identicon&r=PG&f=1", "display_name": "Claire", "link": "https://stackoverflow.com/users/4567025/claire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1065, "favorite_count": 0, "accepted_answer_id": 40899312, "answer_count": 1, "score": -1, "last_activity_date": 1480544424, "creation_date": 1480543716, "last_edit_date": 1480544176, "question_id": 40899137, "link": "https://stackoverflow.com/questions/40899137/add-a-row-in-pandas-dataframe-without-knowing-number-of-columns", "title": "add a row in pandas dataframe without knowing number of columns", "body": "<p>I'm new to python and I would appreciate if you give me an answer as soon as possible.</p>\n\n<p>I'm processing a file containing reviews for products that can belong to more than 1 category. What I need is to group the review ratings by the categories, and date at the same time. Since I don't know the exact number of categories, or dates in advance, I need to add rows and columns as I'm processing the reviews data (50 GB file). </p>\n\n<p>I've seen how I can add columns, however my trouble is adding a row without knowing how many columns are currently in the dataframe. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>    list1=['Movies &amp; TV', 'Books']    #categories so far\n    dfMain=pandas.DataFrame(index=list1,columns=['2002-09']) #only one column at the beginnig\n    print(dfMain)\n</code></pre>\n\n<p>This is what dfMain looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CmB5b.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CmB5b.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>If I want to add a column, I simply do this:\ndfMain.insert(0, date, 0) #where date is in format like '2002-09'</p>\n\n<p>But if I want to add a new category(row) and fill all the dates(columns) with zeros? How do I do that? I've tried with method append, but it asks for all the columns as parameters. Method Insert doesn't seem to work either..</p>\n"}, {"tags": ["python", "matrix"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 4500554, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zND1q02JILk/AAAAAAAAAAI/AAAAAAAAAIw/2fpMBX4RjV4/photo.jpg?sz=128", "display_name": "IsisDorus", "link": "https://stackoverflow.com/users/4500554/isisdorus"}, "edited": false, "score": 1, "creation_date": 1480593739, "post_id": 40899250, "comment_id": 69032518, "body": "Thank you!! I thought I needed to have a matrix to perform my calculations (nothing fancy, mainly coordinate transformations and rotations) but I can and definitely will use the array instead!"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 57, "user_id": 4500554, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zND1q02JILk/AAAAAAAAAAI/AAAAAAAAAIw/2fpMBX4RjV4/photo.jpg?sz=128", "display_name": "IsisDorus", "link": "https://stackoverflow.com/users/4500554/isisdorus"}, "edited": false, "score": 0, "creation_date": 1480594442, "post_id": 40899250, "comment_id": 69033008, "body": "@IsisDorus I&#39;m glad I could help:) For python version 3.5 and later, with sufficiently new numpy version, one can use the <code>@</code> operator for matrix multiplication, which works for arrays too. Otherwise one needs to use <code>numpy.dot</code> to do the same. Anyway, arrays are usually much more convenient:)"}], "tags": [], "owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "is_accepted": true, "score": 0, "last_activity_date": 1480544186, "creation_date": 1480544186, "answer_id": 40899250, "question_id": 40899083, "link": "https://stackoverflow.com/questions/40899083/python-split-matrix-data-into-separate-columns/40899250#40899250", "title": "Python - split matrix data into separate columns", "body": "<p>Your problem is that you're using a <code>matrix</code> instead of an <code>ndarray</code>. Are you sure you want that?</p>\n\n<p>For a matrix, indexing the first row alone leads to <em>another</em> matrix, a row matrix. Check <code>frag_coords[0].shape</code>: it will be <code>(1,3)</code>. For an <code>ndarray</code>, it would be <code>(3,)</code>.</p>\n\n<p>If you only need to index the first row, use two indices:</p>\n\n<pre><code>frag_coords[0,j]\n</code></pre>\n\n<p>Or if you store the row temporarily, just index into it as a row matrix:</p>\n\n<pre><code>tmpvar = frag_coords[0]  # shape (1,3) \nprint(tmpvar[0,2])       # for column 2 of row 0\n</code></pre>\n\n<p>If you don't need too many matrix operations, I'd advise that you use <code>np.array</code>s instead. You can always read your data into an array directly, but at a given point you can just transform an existing matrix with <code>np.array(frag_coords)</code> too if you wish.</p>\n"}], "owner": {"reputation": 57, "user_id": 4500554, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zND1q02JILk/AAAAAAAAAAI/AAAAAAAAAIw/2fpMBX4RjV4/photo.jpg?sz=128", "display_name": "IsisDorus", "link": "https://stackoverflow.com/users/4500554/isisdorus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1662, "favorite_count": 0, "accepted_answer_id": 40899250, "answer_count": 1, "score": 1, "last_activity_date": 1480544186, "creation_date": 1480543461, "question_id": 40899083, "link": "https://stackoverflow.com/questions/40899083/python-split-matrix-data-into-separate-columns", "title": "Python - split matrix data into separate columns", "body": "<p>I have read data from a file and stored into a matrix (frag_coords):</p>\n\n<pre><code>frag_coords =\n[[  916.0907976    -91.01391344   120.83596334]\n [  916.01117655   -88.73389753   146.912555  ]\n [  924.22832597   -90.51682575   120.81734705]\n\n...\n [  972.55384732   708.71316138    52.24644577]\n [  972.49089559   710.51583744    72.86369124]]\n\ntype(frag_coords) = \nclass 'numpy.matrixlib.defmatrix.matrix'\n</code></pre>\n\n<p>I do not have any issues when reordering the matrix by a specified column. For example, the code below works just fine:</p>\n\n<pre><code>order = np.argsort(frag_coords[:,2], axis=0)\n</code></pre>\n\n<p>My issue is that:</p>\n\n<pre><code>len(frag_coords[0]) = 1\n</code></pre>\n\n<p>I need to access the individual numbers of the first row individually, I've tried splitting it, transforming it into a list and everything seems to return the 3 numbers not as columns but rather as a single element with len=1. I need help please!</p>\n"}, {"tags": ["python", "while-loop"], "answers": [{"tags": [], "owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "is_accepted": true, "score": 1, "last_activity_date": 1480543984, "last_edit_date": 1480543984, "creation_date": 1480543626, "answer_id": 40899119, "question_id": 40899066, "link": "https://stackoverflow.com/questions/40899066/nested-while-loop-issues/40899119#40899119", "title": "Nested While Loop issues", "body": "<p>Since you increment the indices <code>i</code> and <code>j</code> in the inner loops, you need to put the corresponding condition also in the first inner <code>while</code> loop, and add an exit point half-way:</p>\n\n<pre><code>while i &lt; len(x) and j &lt; len(y):\n    while j &lt; len(y) and abs(x[i]) &gt; abs(y[j]) and abs(round(x[i],4)) != 0:\n        print y[j]\n        x[i] = x[i] + y[j]\n        y[j] = 0\n        j += 1\n        print i, j\n    if j &gt;= len(y):\n        break\n    while i &lt; len(x) and abs(x[i]) &lt; abs(y[j]) and abs(round(x[i],4)) != 0:\n        print -x[i]\n        y[j] = y[j] + x[i]\n        x[i] = 0\n        i += 1\n        print i, j\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 533, "user_id": 6939201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914049db890cb3475c305df3149a952d?s=128&d=identicon&r=PG&f=1", "display_name": "petruz", "link": "https://stackoverflow.com/users/6939201/petruz"}, "is_accepted": false, "score": 0, "last_activity_date": 1480549828, "last_edit_date": 1480549828, "creation_date": 1480546113, "answer_id": 40899683, "question_id": 40899066, "link": "https://stackoverflow.com/questions/40899066/nested-while-loop-issues/40899683#40899683", "title": "Nested While Loop issues", "body": "<p>I think that this code generates what you want by using one loop:</p>\n\n<pre><code>def pay_balances(x, y):\ni = 0\nj = 0\nwhile x[-1] != 0 and y[-1] !=0:   \n    if abs(x[i]) &gt; abs(y[j]): \n        x[i] = x[i] + y[j]\n        y[j] = 0\n        j += 1  \n    elif abs(x[i]) &lt; abs(y[j]):\n        y[j] = y[j] + x[i]\n        x[i] = 0\n        i += 1         \nprint x, y\nreturn sum(x) + sum(y)\n</code></pre>\n"}], "owner": {"reputation": 628, "user_id": 6563592, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/66ea9d929f0d9bfe484925706100578d?s=128&d=identicon&r=PG&f=1", "display_name": "WhitneyChia", "link": "https://stackoverflow.com/users/6563592/whitneychia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 40899119, "answer_count": 2, "score": -1, "last_activity_date": 1480549828, "creation_date": 1480543398, "last_edit_date": 1480543554, "question_id": 40899066, "link": "https://stackoverflow.com/questions/40899066/nested-while-loop-issues", "title": "Nested While Loop issues", "body": "<p>So the gist of this is a function that takes two sorted lists. It takes a list of negative numbers (people who owe money) and a list of positive number (people who are owed money). It then pays off the people who are owed money from the negative list.</p>\n\n<p>Example:   </p>\n\n<pre><code>negatives = [-55.774, -45.884, -40.754, -35.694, -33.734, -29.024, -25.114, -16.144, -14.014, -5.874, -5.554]\npositives = [43.936, 42.276, 33.756, 31.116, 30.456, 27.616, 21.526, 18.276, 13.176, 12.376, 11.966, 8.566, 8.486, 4.036]\n</code></pre>\n\n<p>The first step in my process is negatives[0] will pay off the positives[0], 43.936, then it pays off partially positives[1] until itself negatives[0] is 0, it then moves onto negatives[1] and pays off what is owed to positives[1]. I'm just trying to iterate this process. Here's what I have:   </p>\n\n<pre><code>def pay_balances(x, y):\n    i = 0\n    j = 0\n    while i &lt; len(x) and j &lt; len(y):\n        while abs(x[i]) &gt; abs(y[j]) and abs(round(x[i],4)) != 0:\n            print y[j]\n            x[i] = x[i] + y[j]\n            y[j] = 0\n            j += 1\n            print i, j\n        while abs(x[i]) &lt; abs(y[j]) and abs(round(x[i],4)) != 0:\n            print -x[i]\n            y[j] = y[j] + x[i]\n            x[i] = 0\n            i += 1\n            print i, j\n</code></pre>\n\n<p>So, if you run...</p>\n\n<pre><code>pay_balances(negatives, positives)\n</code></pre>\n\n<p>This will eventually break due to IndexError: list index out of range</p>\n\n<p>The issue is when we are the end of the lists, and my j value = 14 which is when I want everything to stop. It appears to stay in the loop even though I have this line which I thought would kill it:   </p>\n\n<pre><code>while i &lt; len(x) and j &lt; len(y):\n</code></pre>\n\n<p>What am I doing wrong? As always thanks a lot!!</p>\n"}, {"tags": ["python", "atom-editor"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1480543488, "post_id": 40899049, "comment_id": 69011921, "body": "can you type &quot;python&quot; in a standard command window and will it run from there?"}, {"owner": {"reputation": 1, "user_id": 7233269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdc10ebee2194981eba904d6c2a7c79?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Gardner", "link": "https://stackoverflow.com/users/7233269/ben-gardner"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1480544768, "post_id": 40899049, "comment_id": 69012468, "body": "@Jean-Fran&#231;oisFabre Typing in &quot;python&quot; gets: &#39;python&#39; is not recognized as an internal or external command, operable program or batch file."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1480545803, "post_id": 40899049, "comment_id": 69012975, "body": "You need to set the directory where python is in your system <code>PATH</code> (not <code>PYTHONPATH</code> which is for modules)"}, {"owner": {"reputation": 1, "user_id": 7233269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdc10ebee2194981eba904d6c2a7c79?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Gardner", "link": "https://stackoverflow.com/users/7233269/ben-gardner"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1480619847, "post_id": 40899049, "comment_id": 69049424, "body": "@Jean-Fran&#231;oisFabre Thank you! This has fixed it."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1480545823, "post_id": 40899280, "comment_id": 69012986, "body": "it&#39;s not a pythonpath problem, it&#39;s a simple path problem. python is not running yet."}, {"owner": {"reputation": 4506, "user_id": 3344612, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/jwgap.jpg?s=128&g=1", "display_name": "Teivaz", "link": "https://stackoverflow.com/users/3344612/teivaz"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1480546516, "post_id": 40899280, "comment_id": 69013274, "body": "@Jean-Fran&#231;oisFabre Indeed, this one is correct"}], "tags": [], "owner": {"reputation": 4506, "user_id": 3344612, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/jwgap.jpg?s=128&g=1", "display_name": "Teivaz", "link": "https://stackoverflow.com/users/3344612/teivaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1480546473, "last_edit_date": 1495541837, "creation_date": 1480544311, "answer_id": 40899280, "question_id": 40899049, "link": "https://stackoverflow.com/questions/40899049/trouble-running-python-2-7-in-atom-unable-to-find-command-python/40899280#40899280", "title": "Trouble running Python 2.7 in Atom. &quot;Unable to find command: python&quot;", "body": "<p>You are missing a path to python binaries in the system <code>PATH</code>. This question has everything you need to fix your issue: <del><a href=\"https://stackoverflow.com/questions/3701646/how-to-add-to-the-pythonpath-in-windows-7\">How to add to the pythonpath in windows 7?</a></del> <a href=\"https://superuser.com/questions/143119/how-to-add-python-to-the-windows-path\">How To Add Python to the Windows Path</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7233269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cdc10ebee2194981eba904d6c2a7c79?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Gardner", "link": "https://stackoverflow.com/users/7233269/ben-gardner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2196, "favorite_count": 0, "closed_date": 1480564776, "answer_count": 1, "score": 0, "last_activity_date": 1484749301, "creation_date": 1480543353, "last_edit_date": 1484749301, "question_id": 40899049, "link": "https://stackoverflow.com/questions/40899049/trouble-running-python-2-7-in-atom-unable-to-find-command-python", "closed_reason": "Duplicate", "title": "Trouble running Python 2.7 in Atom. &quot;Unable to find command: python&quot;", "body": "<p>I'm currently trying to migrate to Atom to use as a code editor for python at home. </p>\n\n<p>After following tutorials on how to set this up I have installed the packages atom-runner and script.</p>\n\n<p>I tried running it and got the following error message:</p>\n\n<p><img src=\"https://i.stack.imgur.com/0f1nF.png\" alt=\"Screengrab\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/UWs9c.png\" alt=\"Error Message\">  </p>\n\n<p>I've looked into what and where the path is exactly and how to correct it but I haven't found any sufficent explanation.\nHow do I fix it?</p>\n\n<p>So I know how to make the PYTHONPATH variable except I don't know what the value should be. How do I determine the value?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 5496, "user_id": 2661491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/829f8aba5815197b56359be148cd0a13?s=128&d=identicon&r=PG", "display_name": "evan.oman", "link": "https://stackoverflow.com/users/2661491/evan-oman"}, "edited": false, "score": 0, "creation_date": 1480544527, "post_id": 40899021, "comment_id": 69012378, "body": "So you just want the first row of each unique <code>AA1</code>, <code>AA2</code> pair?"}, {"owner": {"reputation": 2296, "user_id": 5839618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ed391cd9b92ad37a5242cb69715593d?s=128&d=identicon&r=PG&f=1", "display_name": "3novak", "link": "https://stackoverflow.com/users/5839618/3novak"}, "edited": false, "score": 0, "creation_date": 1480558504, "post_id": 40899021, "comment_id": 69016657, "body": "The behavior you indicated is not a groupby operation. Are you just keeping the first occurrence of a unique AA1-AA2 pair? Or do you have to aggregate within each pair somehow?"}, {"owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "edited": false, "score": 0, "creation_date": 1480599924, "post_id": 40899021, "comment_id": 69036590, "body": "just keep the first occurrence of a unique AA1 -AA2 pair"}], "answers": [{"tags": [], "owner": {"reputation": 9572, "user_id": 2543372, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8814f53d616260c4971fd77f8b3f54a1?s=128&d=identicon&r=PG", "display_name": "Julien Marrec", "link": "https://stackoverflow.com/users/2543372/julien-marrec"}, "is_accepted": true, "score": 3, "last_activity_date": 1480543899, "last_edit_date": 1480543899, "creation_date": 1480543598, "answer_id": 40899114, "question_id": 40899021, "link": "https://stackoverflow.com/questions/40899021/output-groupby-to-csv-file-pandas/40899114#40899114", "title": "output groupby to csv file pandas", "body": "<p>The problem is that you are trying to apply a function <code>to_csv</code> which doesn't exist. Anyway, groupby also doesn't have a to_csv method. <code>pd.Series</code> and <code>pd.DataFrame</code> do.</p>\n\n<p>What you should really use is <code>drop_duplicates</code> here and then export the resulting dataframe to csv: </p>\n\n<pre><code>df.drop_duplicates(['AA1','AA2']).to_csv('merged.txt')\n</code></pre>\n\n<hr>\n\n<p>PS: If you really wanted a groupby solution, there's this one that happens to be 12 times slower than drop_duplicates...:</p>\n\n<pre><code>df.groupby(['AA1','AA2']).agg(lambda x:x.value_counts().index[0]).to_csv('merged.txt')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 2, "last_activity_date": 1480578407, "creation_date": 1480578407, "answer_id": 40905172, "question_id": 40899021, "link": "https://stackoverflow.com/questions/40899021/output-groupby-to-csv-file-pandas/40905172#40905172", "title": "output groupby to csv file pandas", "body": "<p>you can use <code>groupby</code> with <code>head</code></p>\n\n<pre><code>df.groupby(['AA1', 'AA2']).head(1)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/p5OWo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p5OWo.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7275, "favorite_count": 0, "accepted_answer_id": 40899114, "answer_count": 2, "score": 1, "last_activity_date": 1480578407, "creation_date": 1480543264, "question_id": 40899021, "link": "https://stackoverflow.com/questions/40899021/output-groupby-to-csv-file-pandas", "title": "output groupby to csv file pandas", "body": "<p>I have a sample dataset: </p>\n\n<pre><code>import pandas as pd\ndf = {'ID': ['H1','H2','H3','H4','H5','H6'],\n      'AA1': ['C','B','B','X','G','G'],\n      'AA2': ['W','K','K','A','B','B'],\n      'name':['n1','n2','n3','n4','n5','n6']\n}\n\ndf = pd.DataFrame(df)\n</code></pre>\n\n<p>it looks like :</p>\n\n<pre><code>df\nOut[32]: \n   AA1 AA2  ID name\n0   C   W  H1   n1\n1   B   K  H2   n2\n2   B   K  H3   n3\n3   X   A  H4   n4\n4   G   B  H5   n5\n5   G   B  H6   n6\n</code></pre>\n\n<p>I want to groupby AA1 and AA2 (unique AA1 and AA2 pair) and it doesn't matter which ID and name values the unique pair picks along with it, and output that to a .csv file, so the output in the .csv file would look like:</p>\n\n<pre><code> AA1 AA2  ID name\n  C   W  H1   n1\n  B   K  H2   n2\n  X   A  H4   n4\n  G   B  H5   n5\n</code></pre>\n\n<p>i tried the code:</p>\n\n<pre><code>df.groupby('AA1','AA2').apply(to_csv('merged.txt', sep = '\\t', index=False))\n</code></pre>\n\n<p>but the to_csv was not recognized, what can i put in the .apply() to just output the groupby results to a csv file? </p>\n"}, {"tags": ["python", "bash", "git", "ssh", "pip"], "answers": [{"tags": [], "owner": {"reputation": 2161, "user_id": 2522042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SEScg.jpg?s=128&g=1", "display_name": "Max Smolens", "link": "https://stackoverflow.com/users/2522042/max-smolens"}, "is_accepted": true, "score": 10, "last_activity_date": 1480552899, "creation_date": 1480552899, "answer_id": 40900758, "question_id": 40898981, "link": "https://stackoverflow.com/questions/40898981/how-to-discover-where-pip-install-gitssh-is-searching-for-ssh-keys/40900758#40900758", "title": "How to discover where &#39;pip install git+ssh://...&#39; is searching for ssh keys?", "body": "<p>The <a href=\"https://git-scm.com/docs/git#git-codeGITSSHCOMMANDcode\" rel=\"noreferrer\"><code>GIT_SSH_COMMAND</code></a> environment variable enables overriding the command that Git uses to run ssh. In this case, you want to enable verbose output. On Windows this looks like:</p>\n\n<pre><code>set GIT_SSH_COMMAND=ssh -v\n</code></pre>\n\n<p>Then when you run <code>pip install git+ssh://github.com/USER_NAME/REPO_NAME.git</code>, ssh outputs debug information, including where it looks for keys:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>...\ndebug1: Reading configuration data /etc/ssh/ssh_config\ndebug1: Connecting to github.com [192.30.253.112] port 22.\ndebug1: Connection established.\ndebug1: key_load_public: No such file or directory\ndebug1: identity file /c/Users/MyName/.ssh/id_rsa type -1\ndebug1: key_load_public: No such file or directory\ndebug1: identity file /c/Users/MyName/.ssh/id_rsa-cert type -1\ndebug1: key_load_public: No such file or directory\ndebug1: identity file /c/Users/MyName/.ssh/id_dsa type -1\ndebug1: key_load_public: No such file or directory\ndebug1: identity file /c/Users/MyName/.ssh/id_dsa-cert type -1\ndebug1: key_load_public: No such file or directory\n...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 156, "user_id": 4788605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1030186410343676/picture?type=large", "display_name": "Vsevolod Gromov", "link": "https://stackoverflow.com/users/4788605/vsevolod-gromov"}, "edited": false, "score": 0, "creation_date": 1608206955, "post_id": 51979783, "comment_id": 115515396, "body": "FYI, GIT_SSH_COMMAND is not available on Centos 7."}], "tags": [], "owner": {"reputation": 7982, "user_id": 656804, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b4a805577a0117e80254f3cc530a1769?s=128&d=identicon&r=PG", "display_name": "Nikolay Fominyh", "link": "https://stackoverflow.com/users/656804/nikolay-fominyh"}, "is_accepted": false, "score": 11, "last_activity_date": 1535006649, "creation_date": 1535006649, "answer_id": 51979783, "question_id": 40898981, "link": "https://stackoverflow.com/questions/40898981/how-to-discover-where-pip-install-gitssh-is-searching-for-ssh-keys/51979783#51979783", "title": "How to discover where &#39;pip install git+ssh://...&#39; is searching for ssh keys?", "body": "<p>For deploying in projects with multiple ssh keys do following: </p>\n\n<pre><code>$ export GIT_SSH_COMMAND=\"ssh -i ~/.ssh/deploy_key_1\"\n$ pip install git+ssh://git@&lt;my_hosted_gitlab&gt;/project_with_deploy_key_1\n$ export GIT_SSH_COMMAND=\"ssh -i ~/.ssh/deploy_key_2\"\n$ pip install git+ssh://git@&lt;my_hosted_gitlab&gt;/project_with_deploy_key_2\n</code></pre>\n\n<p>It can be integrated in CI process. </p>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 4788605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1030186410343676/picture?type=large", "display_name": "Vsevolod Gromov", "link": "https://stackoverflow.com/users/4788605/vsevolod-gromov"}, "is_accepted": false, "score": 0, "last_activity_date": 1608207940, "creation_date": 1608207940, "answer_id": 65340721, "question_id": 40898981, "link": "https://stackoverflow.com/questions/40898981/how-to-discover-where-pip-install-gitssh-is-searching-for-ssh-keys/65340721#65340721", "title": "How to discover where &#39;pip install git+ssh://...&#39; is searching for ssh keys?", "body": "<p>If you do not have opportunity to use <strong>GIT_SSH_COMMAND</strong> environment vars (for example, is not available on Centos 7), you can try &quot;dirty hack&quot; with renaming ssh-keys before copying. This is not good way, but works.</p>\n<p>My 'bad code':</p>\n<pre><code>mv /var/www/.ssh/id_rsa /var/www/.ssh/id_rsa.tmp\nmv /var/www/.ssh/id_rsa_git /var/www/.ssh/id_rsa\nmv /var/www/.ssh/id_rsa.pub /var/www/.ssh/id_rsa.pub.tmp\n\n$VENV/bin/pip install --no-deps --editable &quot;git+${REPO}@master#egg=web_bb_app&quot;\n$VENV/bin/pip install -r $VENV/src/web-bb-app/requirements/${BRANCH}_branch_ssh.txt\n\nmv /var/www/.ssh/id_rsa /var/www/.ssh/id_rsa_git\nmv /var/www/.ssh/id_rsa.tmp /var/www/.ssh/id_rsa\nmv /var/www/.ssh/id_rsa.pub.tmp /var/www/.ssh/id_rsa.pub\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1790, "user_id": 10263660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02f3119d15c8c155ff25968fdf5a145?s=128&d=identicon&r=PG&f=1", "display_name": "FalcoGer", "link": "https://stackoverflow.com/users/10263660/falcoger"}, "edited": false, "score": 2, "creation_date": 1609765500, "post_id": 65562783, "comment_id": 115916287, "body": "This does not answer the question (namely &quot;where does pip git look for ssh keys&quot;)."}], "tags": [], "owner": {"reputation": 11, "user_id": 10674208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-D_1BqpZb_v4/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hpBbjVVEEKdODSEw9RNJsIrVGzRw/mo/photo.jpg?sz=128", "display_name": "Abhay Tomar", "link": "https://stackoverflow.com/users/10674208/abhay-tomar"}, "is_accepted": false, "score": 0, "last_activity_date": 1609770675, "last_edit_date": 1609770675, "creation_date": 1609763481, "answer_id": 65562783, "question_id": 40898981, "link": "https://stackoverflow.com/questions/40898981/how-to-discover-where-pip-install-gitssh-is-searching-for-ssh-keys/65562783#65562783", "title": "How to discover where &#39;pip install git+ssh://...&#39; is searching for ssh keys?", "body": "<p>I have replaced ssh with https and also mention username instead of git before '@' :</p>\n<p>Old Version:</p>\n<pre><code>pip install git+ssh://git@github.com/measureprotocol/measure-commons.git@v0.1.1#egg=measurecommons\n</code></pre>\n<p>Modified Solution :</p>\n<pre><code>pip install git+https://abhay-kiwi@github.com/measureprotocol/measure-commons.git@v0.1.1#egg=measurecommons\n</code></pre>\n"}], "owner": {"reputation": 534, "user_id": 3022254, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/671efaa3e8271c8817429b723ced8cd3?s=128&d=identicon&r=PG", "display_name": "Mackie Messer", "link": "https://stackoverflow.com/users/3022254/mackie-messer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6477, "favorite_count": 2, "accepted_answer_id": 40900758, "answer_count": 4, "score": 9, "last_activity_date": 1609770675, "creation_date": 1480543098, "last_edit_date": 1565092865, "question_id": 40898981, "link": "https://stackoverflow.com/questions/40898981/how-to-discover-where-pip-install-gitssh-is-searching-for-ssh-keys", "title": "How to discover where &#39;pip install git+ssh://...&#39; is searching for ssh keys?", "body": "<h2>Question:</h2>\n\n<p>Does anyone know if there's a simple means of discovering where <code>pip install git+ssh:///...</code> is searching for ssh keys?</p>\n\n<h2>Quick background (RESOLVED...see update below):</h2>\n\n<p>I am on Windows 10. I needed to install a private remote repository from github using pip in a conda virtual environment. I am the repo owner. I have a public/private ssh key pair set up through github.com. My local key is stored in <code>C:\\Users\\MyName\\\\.ssh\\id_rsa</code>. Using this key I am able to push and pull without issue from github using my IDE, Eclipse.</p>\n\n<p>However, when I executed the following command using my activated conda environment:</p>\n\n<pre><code>pip install git+ssh://github.com/USER_NAME/REPO_NAME.git\n</code></pre>\n\n<p>I got the following error:</p>\n\n<pre><code>Collecting git+ssh://github.com/USER_NAME/REPO_NAME.git\nCloning ssh://github.com/USER_NAME/REPO_NAME.git to\nc:\\users\\USER_NAME\\appdata\\local\\temp\\pip-ghf3ts-build\nWarning: Permanently added 'github.com,IP_ADDRESS' (RSA) to the list of\nknown hosts.\nPermission denied (publickey).\nfatal: Could not read from remote repository.\n\nPlease make sure you have the correct access rights\nand the repository exists.\n</code></pre>\n\n<p>I know that the repo exists, and I know the ssh key works fine; so, I assumed whatever ssh routine pip was calling was not properly configured. </p>\n\n<h2>Update</h2>\n\n<p>I have solved this issue since then, and the 'bad configuration' assumption proved to be correct! I added a config file to C:\\Users\\MyName\\.ssh specifying which file to use. Wham-bam, it works great now. </p>\n\n<p>However! I would still be interested in knowing if there were anyway to have confirmed that pip was looking in that directory for ssh keys and configs; so, I'll leave this question open for now.</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 526, "user_id": 2442326, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/655965d0c194d5ed6c82414961e4b3d4?s=128&d=identicon&r=PG", "display_name": "jachilles", "link": "https://stackoverflow.com/users/2442326/jachilles"}, "edited": false, "score": 0, "creation_date": 1504699586, "post_id": 40899074, "comment_id": 79110278, "body": "Great. This problem occurred to me as I use virtualenv in Windows 10. After installing the suggested distribution, the problem is directly solved; easy. Great answer!"}], "tags": [], "owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "is_accepted": true, "score": 2, "last_activity_date": 1480543419, "creation_date": 1480543419, "answer_id": 40899074, "question_id": 40898968, "link": "https://stackoverflow.com/questions/40898968/tensorflow-installation-on-windows-8-not-working/40899074#40899074", "title": "Tensorflow installation on windows 8 not working", "body": "<p>This error message means that one or more of the DLLs that TensorFlow depends on is not available on your computer. Installing the <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=53587\" rel=\"nofollow noreferrer\">Microsoft Visual C++ 2015 Redistributable Update 3 (x64 version)</a> should fix this problem.</p>\n\n<p>Note that this problem does not appear to arise if you have Visual Studio 2015 Update 3, or the Anaconda distribution of Python 3.5 installed. So far we have only heard of this problem affecting users of the Python.org distribution of Python 3.5. We are updating the documentation to reflect this, and it should be visible soon.</p>\n"}], "owner": {"reputation": 781, "user_id": 5538805, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-qcmGCwGjWbU/AAAAAAAAAAI/AAAAAAAAABs/9AJejHA-JP8/photo.jpg?sz=128", "display_name": "Ahmed Dhanani", "link": "https://stackoverflow.com/users/5538805/ahmed-dhanani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2388, "favorite_count": 0, "accepted_answer_id": 40899074, "answer_count": 1, "score": 2, "last_activity_date": 1480543419, "creation_date": 1480543035, "last_edit_date": 1480543408, "question_id": 40898968, "link": "https://stackoverflow.com/questions/40898968/tensorflow-installation-on-windows-8-not-working", "title": "Tensorflow installation on windows 8 not working", "body": "<p>I was very happy to see tensorflow's windows support. I am following the instructions on <a href=\"https://www.tensorflow.org/versions/r0.12/get_started/os_setup.html#pip-installation-on-windows\" rel=\"nofollow noreferrer\">this</a> link. The installation is successful, but while importing, it generates an error.<br/>\nWhen I try to <code>import tensorflow as tf</code>, the following is the traceback<br/></p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_ten\nsorflow.py\", line 18, in swig_import_helper\n    return importlib.import_module(mname)\n  File \"C:\\Program Files\\Python35\\lib\\importlib\\__init__.py\", line 126, in impor\nt_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 986, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 969, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 958, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 666, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 577, in module_from_spec\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 906, in create_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 222, in _call_with_frames_removed\nImportError: DLL load failed: The specified module could not be found.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\tensorflow\\python\\__init__.p\ny\", line 54, in &lt;module&gt;\n    from tensorflow.python import pywrap_tensorflow\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_ten\nsorflow.py\", line 21, in &lt;module&gt;\n    _pywrap_tensorflow = swig_import_helper()\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_ten\nsorflow.py\", line 20, in swig_import_helper\n    return importlib.import_module('_pywrap_tensorflow')\n  File \"C:\\Program Files\\Python35\\lib\\importlib\\__init__.py\", line 126, in impor\nt_module\n    return _bootstrap._gcd_import(name[level:], package, level)\nImportError: No module named '_pywrap_tensorflow'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\tensorflow\\__init__.py\", lin\ne 24, in &lt;module&gt;\n    from tensorflow.python import *\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\tensorflow\\python\\__init__.p\ny\", line 60, in &lt;module&gt;\n    raise ImportError(msg)\nImportError: Traceback (most recent call last):\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_ten\nsorflow.py\", line 18, in swig_import_helper\n    return importlib.import_module(mname)\n  File \"C:\\Program Files\\Python35\\lib\\importlib\\__init__.py\", line 126, in impor\nt_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 986, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 969, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 958, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 666, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 577, in module_from_spec\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 906, in create_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 222, in _call_with_frames_removed\nImportError: DLL load failed: The specified module could not be found.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\tensorflow\\python\\__init__.p\ny\", line 54, in &lt;module&gt;\n    from tensorflow.python import pywrap_tensorflow\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_ten\nsorflow.py\", line 21, in &lt;module&gt;\n    _pywrap_tensorflow = swig_import_helper()\n  File \"C:\\Program Files\\Python35\\lib\\site-packages\\tensorflow\\python\\pywrap_ten\nsorflow.py\", line 20, in swig_import_helper\n    return importlib.import_module('_pywrap_tensorflow')\n  File \"C:\\Program Files\\Python35\\lib\\importlib\\__init__.py\", line 126, in impor\nt_module\n    return _bootstrap._gcd_import(name[level:], package, level)\nImportError: No module named '_pywrap_tensorflow'\n\n\nError importing tensorflow.  Unless you are using bazel,\nyou should not try to import tensorflow from its source directory;\nplease exit the tensorflow source tree, and relaunch your python interpreter\nfrom there.\n</code></pre>\n\n<p>Any pointers on resolving the issue would be appreciated.</p>\n"}, {"tags": ["python", "numpy", "optimization", "scipy", "gradient"], "owner": {"reputation": 95, "user_id": 7205847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a855a29d256b020be049ffc700d5c906?s=128&d=identicon&r=PG&f=1", "display_name": "Nefarin", "link": "https://stackoverflow.com/users/7205847/nefarin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 424, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1480548076, "creation_date": 1480543015, "last_edit_date": 1480545170, "question_id": 40898963, "link": "https://stackoverflow.com/questions/40898963/scipy-optimize-minimize-usage-with-many-variables-and-without-analytical-compu", "title": "SciPy optimize.minimize() usage with many variables and without analytical computeable gradient", "body": "<p>I have following problem to solve:</p>\n\n<p>Given a function, which takes a vector of variables as a parameter, find values that minimize function return value. The size of the input vector is between <code>10^3</code> and <code>10^5</code> elements. The analytical gradient formula is not provided.</p>\n\n<p>Sounds like problem for <code>scipy.optimize.minimize()</code>; however, due to the number variables and lack of gradient function the calculation is incredibly slow and for more than 2000 parameters does not converge.</p>\n\n<p>I have code familiar to the code below (in fact using this for image registration, but the problem is more general):</p>\n\n<pre><code>import numpy as np\nfrom scipy import optimize\n\ndef opt_fun(smth1, smth2, con1, con2, con3, con4):\n    def inner_opt_fun(arguments):\n        arg1 = np.reshape(arguments[0:con1*con2], (con1, con2))\n        arg2 = np.reshape(arguments[con1*con2:], (con3, con4))\n        result = some_func(smth1, arg1, arg2)\n        error = calc_error(result, smth2)\n        return error\n    return inner_opt_fun\n\nfun = opt_fun(smth1, smth2, con1, con2, con3, con4)\nstart_args = generate_start_arguments()\nbounds = get_bounds() # define some bounds to solver\nbounds = reshape_bound(bounds) # to get 1xN vector\noptions = some_options() # solver options\n\noptimized = optimize.minimize(fun, start_args, bounds=bounds, options=options)\n</code></pre>\n\n<p><code>some_func</code> calculates transformation of variable <code>smth1</code>.</p>\n\n<p><code>calc_error</code> calculates some kind of error between <code>smth2</code> and <code>result</code> returned by <code>some_func</code>.</p>\n\n<p>In general, the optimizer should approximate gradient (or other quantity, which can lead to finding local minimum) of <code>error</code> with respect to <code>arguments</code> vector.</p>\n\n<p>This code works fine when the length of vector <code>start_args</code> is below 10. However, the more variables are involved the more strange things the <code>optimize.minimize</code> function performs. During each call of <code>fun</code> it changes only one element of <code>arguments</code> vectors (scaling is not the issue there - I perform it elsewhere).</p>\n\n<p>For example, if the initialized vector is <code>[0, 0, 0, 0, 0, ... 0]</code>, after first iteration the optimizer tries something like <code>[1, 0, 0, 0, 0, 0, ... 0]</code>, then <code>[0, 1, 0, 0, 0, 0, ..., 0]</code> - for me it is rather brute force approach.</p>\n\n<p>I have tried different optimizers (BFGS, L-BFGS-B, Powell, Nelder-Mead - I am not a mathematician, so do not really understand how they work inside), but they simply do not converge to anything.</p>\n\n<p>The question is - where could the problem lie on? What can I do to enforce convergence?</p>\n"}, {"tags": ["python", "keras"], "comments": [{"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1480549641, "post_id": 40898914, "comment_id": 69014388, "body": "You didn&#39;t mention anything about how you installed python/keras, and that information is very relevant here."}, {"owner": {"reputation": 97, "user_id": 7185677, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10211408756163447/picture?type=large", "display_name": "Anastasia Sidorova", "link": "https://stackoverflow.com/users/7185677/anastasia-sidorova"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1480587293, "post_id": 40898914, "comment_id": 69028187, "body": "I installed it using pip command."}, {"owner": {"reputation": 97, "user_id": 7185677, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10211408756163447/picture?type=large", "display_name": "Anastasia Sidorova", "link": "https://stackoverflow.com/users/7185677/anastasia-sidorova"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1480594524, "post_id": 40898914, "comment_id": 69033062, "body": "I also tried this: <a href=\"http://stackoverflow.com/questions/34097988/how-do-i-install-keras-and-theano-in-anaconda-python-2-7-on-windows\" title=\"how do i install keras and theano in anaconda python 2 7 on windows\">stackoverflow.com/questions/34097988/&hellip;</a> - it didn&#39;t help"}, {"owner": {"reputation": 3439, "user_id": 1887281, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/xV9qF.jpg?s=128&g=1", "display_name": "devinbost", "link": "https://stackoverflow.com/users/1887281/devinbost"}, "edited": false, "score": 0, "creation_date": 1487023523, "post_id": 40898914, "comment_id": 71590150, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/34097988/how-do-i-install-keras-and-theano-in-anaconda-python-2-7-on-windows\">How do I install Keras and Theano in Anaconda Python 2.7 on Windows?</a>"}, {"owner": {"reputation": 1032, "user_id": 7201349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d74c57518a230b1be8416342e17be259?s=128&d=identicon&r=PG&f=1", "display_name": "Larry", "link": "https://stackoverflow.com/users/7201349/larry"}, "edited": false, "score": 0, "creation_date": 1495481402, "post_id": 40898914, "comment_id": 75260729, "body": "What is the context of your code?"}, {"owner": {"reputation": 97, "user_id": 7185677, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10211408756163447/picture?type=large", "display_name": "Anastasia Sidorova", "link": "https://stackoverflow.com/users/7185677/anastasia-sidorova"}, "edited": false, "score": 0, "creation_date": 1495570956, "post_id": 40898914, "comment_id": 75306354, "body": "Just a neural network for classification problem."}, {"owner": {"reputation": 927, "user_id": 9044016, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c5964cb132c989443d5bcd43fc1fe86?s=128&d=identicon&r=PG&f=1", "display_name": "Madhi", "link": "https://stackoverflow.com/users/9044016/madhi"}, "edited": false, "score": 0, "creation_date": 1531818898, "post_id": 40898914, "comment_id": 89726547, "body": "<code>model.add(Dense(25,input_shape=(50,),activation=&#39;relu&#39;))</code> try this line. The problem is you have updated keras library but using old api code."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 7185677, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10211408756163447/picture?type=large", "display_name": "Anastasia Sidorova", "link": "https://stackoverflow.com/users/7185677/anastasia-sidorova"}, "edited": false, "score": 0, "creation_date": 1480543772, "post_id": 40898967, "comment_id": 69012059, "body": "Thanks, but this didn&#39;t help - I already tried to uninstall it, and upgrade... Probably the issue is with Anaconda - the upgrade doesn&#39;t work on scipy upgrade: Failed to build scipy"}], "tags": [], "owner": {"reputation": 1828, "user_id": 5056575, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/890578777655043/picture?type=large", "display_name": "Avijit Dasgupta", "link": "https://stackoverflow.com/users/5056575/avijit-dasgupta"}, "is_accepted": false, "score": 1, "last_activity_date": 1480543032, "creation_date": 1480543032, "answer_id": 40898967, "question_id": 40898914, "link": "https://stackoverflow.com/questions/40898914/python-keras-new-installation/40898967#40898967", "title": "Python, keras new installation", "body": "<p>Try to upgrade your keras to latest 1.1.2 by using the following command:</p>\n\n<pre><code>pip install keras --upgrade\n</code></pre>\n\n<p>For a specific user: <code>pip install --user keras --upgrade</code> </p>\n"}, {"tags": [], "owner": {"reputation": 88, "user_id": 11608867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0111f55406b7d2366d2d446a421295d1?s=128&d=identicon&r=PG&f=1", "display_name": "KRYSEF", "link": "https://stackoverflow.com/users/11608867/krysef"}, "is_accepted": false, "score": 0, "last_activity_date": 1561018840, "creation_date": 1561018840, "answer_id": 56681855, "question_id": 40898914, "link": "https://stackoverflow.com/questions/40898914/python-keras-new-installation/56681855#56681855", "title": "Python, keras new installation", "body": "<p>Have you tried to add the layers separately ? Input then Dense then Initializers and then Activation. <br>\nOther than that, try to use <code>kernel_initializer='random_uniform'</code>rather than <code>init='uniform'</code>.  </p>\n"}], "owner": {"reputation": 97, "user_id": 7185677, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10211408756163447/picture?type=large", "display_name": "Anastasia Sidorova", "link": "https://stackoverflow.com/users/7185677/anastasia-sidorova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1561018840, "creation_date": 1480542845, "last_edit_date": 1480545679, "question_id": 40898914, "link": "https://stackoverflow.com/questions/40898914/python-keras-new-installation", "title": "Python, keras new installation", "body": "<p>I just installed keras 1.1.2, using Windows 64-bit and Python 2.7.</p>\n\n<p>The code </p>\n\n<pre><code>model = Sequential()\nmodel.add(Dense(25, input_dim=50, init='uniform', activation='relu'))\n</code></pre>\n\n<p>returns the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Loopy\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 2827, in run_code\n    exec code_obj in self.user_global_ns, self.user_ns\n  File \"&lt;ipython-input-3-850dd91f408b&gt;\", line 30, in &lt;module&gt;\n    model.add(Dense(25, input_dim=50, init='uniform', activation='relu'))\nTypeError: __init__() got multiple values for keyword argument 'input_dim'\n</code></pre>\n\n<p>the code </p>\n\n<pre><code>model.add(Dense(15, init='uniform', activation='relu'))\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Loopy\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 2827, in run_code\n    exec code_obj in self.user_global_ns, self.user_ns\n  File \"&lt;ipython-input-4-85741da8f45c&gt;\", line 1, in &lt;module&gt;\n    model.add(Dense(15, init='uniform', activation='relu'))\nTypeError: __init__() takes at least 3 arguments (4 given)\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "selenium", "selenium-webdriver", "automated-tests"], "answers": [{"comments": [{"owner": {"reputation": 1670, "user_id": 2140932, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/ca88a8f0c7b45b934594eaf22d1dc55c?s=128&d=identicon&r=PG", "display_name": "Rafael C.", "link": "https://stackoverflow.com/users/2140932/rafael-c"}, "edited": false, "score": 0, "creation_date": 1480543662, "post_id": 40898915, "comment_id": 69012013, "body": "Now return syntax error: <code>E       def clear_sendkeys(self, *locator, text): E                                             ^ E   SyntaxError: invalid syntax</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 1670, "user_id": 2140932, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/ca88a8f0c7b45b934594eaf22d1dc55c?s=128&d=identicon&r=PG", "display_name": "Rafael C.", "link": "https://stackoverflow.com/users/2140932/rafael-c"}, "edited": false, "score": 0, "creation_date": 1480544425, "post_id": 40898915, "comment_id": 69012339, "body": "<code>E def clear_sendkeys(self, *locator, text):</code>. You&#39;ve got an <code>E</code> just before your function. I&#39;m certainly not responsible for that."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 0, "last_activity_date": 1480542853, "creation_date": 1480542853, "answer_id": 40898915, "question_id": 40898856, "link": "https://stackoverflow.com/questions/40898856/build-function-to-clear-field-and-send-keys/40898915#40898915", "title": "Build function to clear field and send_keys", "body": "<p>the method is defined like this: <code>def clear_sendkeys(self, *locator, text):</code></p>\n\n<p><code>*locator</code> grabs positional arguments. So when calling your method, you cannot pass more positional arguments after your first argument.</p>\n\n<p>Just pass the last argument as a keyword/named argument (using <code>text=</code> prefix) as the error message suggests:</p>\n\n<pre><code>self.clear_sendkeys(*ContractorsLocators.EMAIL, text=enter_building) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "is_accepted": false, "score": 1, "last_activity_date": 1480544018, "creation_date": 1480544018, "answer_id": 40899201, "question_id": 40898856, "link": "https://stackoverflow.com/questions/40898856/build-function-to-clear-field-and-send-keys/40899201#40899201", "title": "Build function to clear field and send_keys", "body": "<p>To resolve your issue, you can change the order of your function arguments as follows:</p>\n\n<pre><code>def clear_sendkeys(self, text, *locator):\n    self.driver.find_element(*locator).clear()\n    self.driver.find_element(*locator).send_keys(text)\n</code></pre>\n\n<p>And call it like:</p>\n\n<pre><code>self.clear_sendkeys(enter_building, *ContractorsLocators.EMAIL)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3051, "user_id": 1018828, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d2ca61dcbef2ddcc7118c1296129378d?s=128&d=identicon&r=PG&f=1", "display_name": "santosh", "link": "https://stackoverflow.com/users/1018828/santosh"}, "is_accepted": true, "score": 1, "last_activity_date": 1480657945, "creation_date": 1480657945, "answer_id": 40925664, "question_id": 40898856, "link": "https://stackoverflow.com/questions/40898856/build-function-to-clear-field-and-send-keys/40925664#40925664", "title": "Build function to clear field and send_keys", "body": "<p>you cant have fixed argument after variable argument which means \n<code>def clear_sendkeys(self, *locator, text)</code> is wrong it should be \n<code>def clear_sendkeys(self, text, *locator)</code>.</p>\n"}], "owner": {"reputation": 1670, "user_id": 2140932, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/ca88a8f0c7b45b934594eaf22d1dc55c?s=128&d=identicon&r=PG", "display_name": "Rafael C.", "link": "https://stackoverflow.com/users/2140932/rafael-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 40925664, "answer_count": 3, "score": 1, "last_activity_date": 1480657945, "creation_date": 1480542626, "last_edit_date": 1480543772, "question_id": 40898856, "link": "https://stackoverflow.com/questions/40898856/build-function-to-clear-field-and-send-keys", "title": "Build function to clear field and send_keys", "body": "<p>I'm trying build a function to clear a field and send_keys, but I'm getting error. See my code:</p>\n\n<p><strong>base.py</strong></p>\n\n<pre><code>class Page(object):\n\n    def clear_sendkeys(self, *locator, text):\n\n        self.driver.find_element(*locator).clear()\n        self.driver.find_element(*locator).send_keys(text)\n</code></pre>\n\n<p><strong>contractors_page.py</strong></p>\n\n<pre><code>from selenium import webdriver\nfrom base import Page\nfrom locators import *\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.common.exceptions import NoSuchElementException\nfrom selenium.webdriver.support.ui import Select\nfrom faker import Faker\nimport os\nimport time\n\ndef update_contacts_form(self):\n\n    enter_building = fake.building_number()\n\n    self.clear_sendkeys(*ContractorsLocators.EMAIL, enter_building)\n</code></pre>\n\n<p><strong>My error</strong></p>\n\n<blockquote>\n  <p>E       self.clear_sendkeys(*ContractorsLocators.EMAIL, enter_building)\n  E   SyntaxError: only named arguments may follow *expression</p>\n</blockquote>\n"}, {"tags": ["python", "regex"], "answers": [{"comments": [{"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1480543166, "post_id": 40898923, "comment_id": 69011774, "body": "Or if <code>&#39;#position&#39;</code> is in the middle of the line, <code>if &#39;#position&#39; in line: l = line.split(&#39;#position&#39;)[-1].split()[1:]</code>"}], "tags": [], "owner": {"reputation": 2966, "user_id": 3022310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f10ec2b45320ee843e539d705c31d08?s=128&d=identicon&r=PG", "display_name": "turbulencetoo", "link": "https://stackoverflow.com/users/3022310/turbulencetoo"}, "is_accepted": false, "score": 3, "last_activity_date": 1480542876, "creation_date": 1480542876, "answer_id": 40898923, "question_id": 40898819, "link": "https://stackoverflow.com/questions/40898819/positive-lookbehind-slice-words-by-t-until-n/40898923#40898923", "title": "Positive lookbehind, slice words by \\t until \\n", "body": "<p>Do you need to use regex? List slicing and string methods don't appear to be as much of a kludge as you say.</p>\n\n<p>something like:</p>\n\n<pre><code>f = open('src.txt','r')\nfor line in f:\n    if line.startswith(\"#position\"):\n        l = line.split()  # with no arguments it splits on all whitespace characters\n        l = l[1:]         # get rid of the \"#position\" tag\n        break\n</code></pre>\n\n<p>and further manipulate from there?</p>\n"}], "owner": {"reputation": 351, "user_id": 1810940, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3b567b5854e35e2ca02f84aea169d260?s=128&d=identicon&r=PG", "display_name": "Jay Stanley", "link": "https://stackoverflow.com/users/1810940/jay-stanley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480542876, "creation_date": 1480542449, "question_id": 40898819, "link": "https://stackoverflow.com/questions/40898819/positive-lookbehind-slice-words-by-t-until-n", "title": "Positive lookbehind, slice words by \\t until \\n", "body": "<p>I am new to regex.  I am attempting to use regex with python to find a line in a file and extract all of the subsequent words separated by tab stops. My line looks like this.</p>\n\n<pre><code>#position   4450    4452    4455    4465    4476    4496    D110    D111    D112    D114    D116    D118    D23 D24 D27 D29 D30 D56 D59 D69 D85 D88 D90 D91 JW1 JW10    JW15    JW22    JW28    JW3 JW35    JW39    JW43    JW45    JW47    JW49    JW5 JW52    JW54    JW56    JW57    JW59    JW66    JW7 JW70    JW75    JW77    JW9 REF_OR74A\n</code></pre>\n\n<p>I have identified that the base of this expression involves the positive lookbehind.</p>\n\n<pre><code>(?&lt;=#position).*\n</code></pre>\n\n<p>I do not expect this to separate the matches by tabstop. However, it does find my line in the file:</p>\n\n<pre><code>import re\n\nfile = open('src.txt','r')\nf = list(file)\nfile.close()\n\npattern = '(?&lt;=#position).*'\nregex = re.compile(pattern)\n\nregex.findall(''.join(f))\n['\\t4450\\t4452\\t4455\\t4465\\t4476\\t4496\\tD110\\tD111\\tD112\\tD114\\tD116\\tD118\\tD23\\tD24\\tD27\\tD29\\tD30\\tD56\\tD59\\tD69\\tD85\\tD88\\tD90\\tD91\\tJW1\\tJW10\\tJW15\\tJW22\\tJW28\\tJW3\\tJW35\\tJW39\\tJW43\\tJW45\\tJW47\\tJW49\\tJW5\\tJW52\\tJW54\\tJW56\\tJW57\\tJW59\\tJW66\\tJW7\\tJW70\\tJW75\\tJW77\\tJW9\\tREF_OR74A']   \n</code></pre>\n\n<p>With some kludge and list slicing / string methods, I can manipulate this and get my data out.  What I'd really like to do is have findall yield a list of just these entries.  What would the regular expression look like to do that?</p>\n"}, {"tags": ["python", "python-3.x", "dictionary"], "comments": [{"owner": {"reputation": 303, "user_id": 4981844, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/324bfe224c6f3d17259b5f8b45805cf3?s=128&d=identicon&r=PG&f=1", "display_name": "mikeqfu", "link": "https://stackoverflow.com/users/4981844/mikeqfu"}, "reply_to_user": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 1, "creation_date": 1480543222, "post_id": 40898818, "comment_id": 69011803, "body": "following @jDo, where does <code>ticker</code> come from?"}, {"owner": {"reputation": 937, "user_id": 1208144, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9dfbf2d6b6ef44f45d6f92ecf4414163?s=128&d=identicon&r=PG", "display_name": "John Rogerson", "link": "https://stackoverflow.com/users/1208144/john-rogerson"}, "reply_to_user": {"reputation": 3650, "user_id": 6004486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c24716401bb14cca523bd36f8f8525?s=128&d=identicon&r=PG&f=1", "display_name": "jDo", "link": "https://stackoverflow.com/users/6004486/jdo"}, "edited": false, "score": 1, "creation_date": 1480550169, "post_id": 40898818, "comment_id": 69014539, "body": "@jDo sorry i didn&#39;t include the top code where i am reading from an excel file and assign values.  That single quote was just an error in me typing the code in here. i just edited my post to include value assignments."}, {"owner": {"reputation": 937, "user_id": 1208144, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9dfbf2d6b6ef44f45d6f92ecf4414163?s=128&d=identicon&r=PG", "display_name": "John Rogerson", "link": "https://stackoverflow.com/users/1208144/john-rogerson"}, "reply_to_user": {"reputation": 303, "user_id": 4981844, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/324bfe224c6f3d17259b5f8b45805cf3?s=128&d=identicon&r=PG&f=1", "display_name": "mikeqfu", "link": "https://stackoverflow.com/users/4981844/mikeqfu"}, "edited": false, "score": 0, "creation_date": 1480553511, "post_id": 40898818, "comment_id": 69015468, "body": "is there a good way to also sum the stock percentages by &#39;sector&#39;?  for example to get a list of all of the sectors with the total percentage for that sector...for all of the stocks?"}], "answers": [{"tags": [], "owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "is_accepted": false, "score": 0, "last_activity_date": 1480543318, "creation_date": 1480543318, "answer_id": 40899039, "question_id": 40898818, "link": "https://stackoverflow.com/questions/40898818/iterate-a-nested-dictionary-in-python/40899039#40899039", "title": "Iterate a Nested Dictionary in Python", "body": "<p>This is what you want:</p>\n\n<pre><code>stock_data = {\n    'AAPL': {'beta': 1.01833975315094, 'company_name': 'Apple', 'dividend': 1.9341673320912078, 'total':300},\n    'GOOG': {'beta': 1.01833975315094, 'company_name': 'Apple', 'dividend': 1.9341673320912078, 'total':300}\n}\n\nstock_sum = sum(stock_data[item]['total'] for item in stock_data)\n\nfor item in stock_data:\n    stock_data[item]['percentage'] = int((float(stock_data[item]['total']) / stock_sum) * 100)\n</code></pre>\n\n<p><strong>Result:</strong></p>\n\n<pre><code>&gt;&gt;&gt; for item in stock_data:\n...     print stock_data[item]['percentage']\n...\n50\n50\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 303, "user_id": 4981844, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/324bfe224c6f3d17259b5f8b45805cf3?s=128&d=identicon&r=PG&f=1", "display_name": "mikeqfu", "link": "https://stackoverflow.com/users/4981844/mikeqfu"}, "is_accepted": true, "score": 0, "last_activity_date": 1480545736, "creation_date": 1480545736, "answer_id": 40899594, "question_id": 40898818, "link": "https://stackoverflow.com/questions/40898818/iterate-a-nested-dictionary-in-python/40899594#40899594", "title": "Iterate a Nested Dictionary in Python", "body": "<p>If I understand you question correctly, you may try as follows (I just copied the <code>stockData</code> below):</p>\n\n<pre><code>stockData = {\n    'AAPL': {\n        'beta': 1.01833975315094,\n        'company_name': 'Apple',\n        'dividend': 1.9341673320912078, 'total': 300},\n    'GOOG': {\n        'beta': 1.01833975315094,\n        'company_name': 'Apple',\n        'dividend': 1.9341673320912078, 'total': 300}}\n</code></pre>\n\n<p>I guess this is what you meant:</p>\n\n<pre><code>def get_portfolio_value(stocks, item='total'):\n     portValue = 0\n     for v in stocks.values():\n        portValue += v[item]\n     for k in stocks.keys():\n        stocks[k].update({'percentage': stocks[k]['total'] / portValue})\n    print(portValue)\n\nget_portfolio_value(stockData, 'total')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 937, "user_id": 1208144, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9dfbf2d6b6ef44f45d6f92ecf4414163?s=128&d=identicon&r=PG", "display_name": "John Rogerson", "link": "https://stackoverflow.com/users/1208144/john-rogerson"}, "edited": false, "score": 0, "creation_date": 1480550538, "post_id": 40899629, "comment_id": 69014644, "body": "This is perfect!  Works like a charm!  Thank you so much, i am still very much a beginner at Python, but I definitely appreciate advice from those much wiser than I."}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "reply_to_user": {"reputation": 937, "user_id": 1208144, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9dfbf2d6b6ef44f45d6f92ecf4414163?s=128&d=identicon&r=PG", "display_name": "John Rogerson", "link": "https://stackoverflow.com/users/1208144/john-rogerson"}, "edited": false, "score": 0, "creation_date": 1480587248, "post_id": 40899629, "comment_id": 69028156, "body": "No need of thank you. If you find the answer useful, <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">accept the answer</a>. It might help someone else facing the same issue in future"}], "tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": false, "score": 0, "last_activity_date": 1480545889, "creation_date": 1480545889, "answer_id": 40899629, "question_id": 40898818, "link": "https://stackoverflow.com/questions/40898818/iterate-a-nested-dictionary-in-python/40899629#40899629", "title": "Iterate a Nested Dictionary in Python", "body": "<p>Your problem can be solved in two parts:</p>\n\n<ol>\n<li><p>Take the sum of total stocks. For that you may use <a href=\"https://docs.python.org/2/library/functions.html#sum\" rel=\"nofollow noreferrer\"><code>sum()</code></a> as:</p>\n\n<pre><code>stock_sum = sum(stock_data['total'] for stock_data in stockData.values())\n</code></pre></li>\n<li><p>Iterate over the value to update the entry. Since you do not need <code>key</code>, use <code>dict.values()</code> to iterate over just the values:</p>\n\n<pre><code>for stock_data in stockData.values():\n    stock_data['percentage'] = stock_data['total']/stock_sum\n    #   ^ Adds new key into your existing `dict` object\n</code></pre></li>\n</ol>\n\n<p>Now the values of your <code>stockData</code> dict holds additional key as <code>percentage</code></p>\n"}], "owner": {"reputation": 937, "user_id": 1208144, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9dfbf2d6b6ef44f45d6f92ecf4414163?s=128&d=identicon&r=PG", "display_name": "John Rogerson", "link": "https://stackoverflow.com/users/1208144/john-rogerson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 40899594, "answer_count": 3, "score": 0, "last_activity_date": 1584298766, "creation_date": 1480542446, "last_edit_date": 1584298766, "question_id": 40898818, "link": "https://stackoverflow.com/questions/40898818/iterate-a-nested-dictionary-in-python", "title": "Iterate a Nested Dictionary in Python", "body": "<p>My dictionary is structured as such:</p>\n\n<pre><code>stockData = {\n    'AAPL': {\n        'beta': 1.01833975315094,\n        'company_name': 'Apple',\n        'dividend': 1.9341673320912078, \n        'total':300}, \n    'GOOG': {\n        'beta': 1.01833975315094,\n        'company_name': 'Apple',\n        'dividend': 1.9341673320912078, \n        'total':300}\n     }\n</code></pre>\n\n<p>and here is area where i assign values:</p>\n\n<pre><code>for row in range(2, sheet.max_row + 1):\n    # Each row in the spreadsheet has data for one census tract.\n    company_name  = sheet['A' + str(row)].value\n    ticker = sheet['B' + str(row)].value\n    sector = sheet['C' + str(row)].value\n    shares = sheet['D' + str(row)].value\n    price = sheet['E' + str(row)].value\n    total = sheet['F' + str(row)].value\n    beta = sheet['G' + str(row)].value\n    dividend = sheet['H' + str(row)].value\n    number_stocks+=1\n\n    # Make sure the key for this ticker exists.\n    stockData.setdefault(ticker,{})\n    stockData[ticker]['company_name'] = company_name\n    stockData[ticker]['sector'] = sector\n    stockData[ticker]['shares'] = shares\n    stockData[ticker]['price'] = price\n    stockData[ticker]['total'] = total\n    stockData[ticker]['dividend'] = dividend\n    stockData[ticker]['beta'] = beta\n</code></pre>\n\n<p>I'm having an issue where i am iterating using a for loop over the dictionary to add a new value 'percentage' which is the 'total' divided by the sum of all the totals of all stocks.  </p>\n\n<pre><code>def get_portfolio_value(stocks,item):\n    portValue = 0\n    percentage = 0\n    for k, v in stocks.items():\n        portValue = portValue + v.get(item,0)\n        stockData[ticker]['percentage'] = stockData[ticker]['total']/portValue\n    print(portValue)\n\nget_portfolio_value(stockData,'total')\n</code></pre>\n\n<p>the issue is that the get_portfolio_value function is getting me the entire portValue total of the portfolio, but the line where i am trying to add the percentage of the portfolio to each stock isn't working righ--it is only oddly enough appearing for only one of the stocks.  Can someone advise?</p>\n"}, {"tags": ["python", "flask", "socket.io", "swagger", "eventlet"], "comments": [{"owner": {"reputation": 1424, "user_id": 3585387, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/WPE9J.jpg?s=128&g=1", "display_name": "Jan Sila", "link": "https://stackoverflow.com/users/3585387/jan-sila"}, "edited": false, "score": 0, "creation_date": 1574254929, "post_id": 40898817, "comment_id": 104165659, "body": "I&#39;m havin similar hanging issues, did you solve it somehow?"}], "answers": [{"tags": [], "owner": {"reputation": 4852, "user_id": 73957, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/03d48d595e8b576703ed01c55b1c44ea?s=128&d=identicon&r=PG", "display_name": "temoto", "link": "https://stackoverflow.com/users/73957/temoto"}, "is_accepted": false, "score": 1, "last_activity_date": 1480608205, "creation_date": 1480608205, "answer_id": 40915210, "question_id": 40898817, "link": "https://stackoverflow.com/questions/40898817/specify-number-of-processes-for-eventlet-wsgi-server/40915210#40915210", "title": "Specify number of processes for eventlet wsgi server", "body": "<ul>\n<li>Exact answer to question: Eventlet built-in WSGI does not support multiple processes.</li>\n<li>Approach to get the best solution for described problem: share one file that contains absolute minimum code required to reproduce problem. Maybe here <a href=\"https://github.com/eventlet/eventlet/issues\" rel=\"nofollow noreferrer\">https://github.com/eventlet/eventlet/issues</a> or any other way you prefer.</li>\n<li>Way of hope. Random stuff to poke at: <code>eventlet.monkey_patch()</code>, isolate Eventlet and long blocking calls in separate threads or processes.</li>\n</ul>\n"}], "owner": {"reputation": 3377, "user_id": 2224777, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/4s327.png?s=128&g=1", "display_name": "Brian Leach", "link": "https://stackoverflow.com/users/2224777/brian-leach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1480608205, "creation_date": 1480542444, "question_id": 40898817, "link": "https://stackoverflow.com/questions/40898817/specify-number-of-processes-for-eventlet-wsgi-server", "title": "Specify number of processes for eventlet wsgi server", "body": "<p>I am trying to add websocket functionality to an existing application. The existing structure of the app is </p>\n\n<p>In <code>/server/__init__.py</code>:</p>\n\n<pre><code>from connexion import App\n...\nconnexion_app = App(__name__, specification_dir='swagger/')  # Create Connexion App\napp = connexion_app.app  # Configure Flask Application\n...\nconnexion_app.add_api('swagger.yaml', swagger_ui=True)  # Initialize Connexion api\n</code></pre>\n\n<p>In <code>startserver.py</code>:</p>\n\n<pre><code>from server import connexion_app\n\nconnexion_app.run(\n    processes=8,\n    debug=True\n)\n</code></pre>\n\n<p>In this way, I was able to specify the number of processes. There are some long-running tasks that make it necessary to have as many processes as possible. </p>\n\n<p>I have modified the application to include websocket functionality as below. It seems to be that I only have one process available. Once the application attempts to run one of the long-running processes, all API calls hang. Also, if the long-runnign process fails, the application is stuck in a hanging state</p>\n\n<p>In <code>/server/__init__.py</code>:</p>\n\n<pre><code>from connexion import App\nimport socketio\n...\nconnexion_app = App(__name__, specification_dir='swagger/')  # Create Connexion App\nsio = socketio.Server()  # Create SocketIO for websockets\napp = connexion_app.app  # Configure Flask Application\n...\nconnexion_app.add_api('swagger.yaml', swagger_ui=True)  # Initialize Connexion api\n</code></pre>\n\n<p>In <code>startserver.py</code>:</p>\n\n<pre><code>import socketio\nimport eventlet\n\nfrom server import sio\nfrom server import app\n\nmyapp = socketio.Middleware(sio, app)\neventlet.wsgi.server(eventlet.listen(('', 5000)), myapp)\n</code></pre>\n\n<p>What am I missing here? </p>\n\n<p>(side note: If you have any resources available to better understand the behemoth of the <code>Flask</code> object, please point me to them!!)</p>\n"}, {"tags": ["python", "linux", "serial-port", "pyserial"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1480546645, "post_id": 40898804, "comment_id": 69013322, "body": "What do you mean by &quot;pretty high bandwidth&quot;? You say you have &quot;verified that the wire is not carrying this corruption&quot; - that&#39;s actually rather difficult to do with an analog scope if this error is only happening once/minute and there is a lot of data flowing. One possibility is that your SBC uart is overrunning the serial Rx perhaps because other higher-priority interrupts are blocking the uart for &gt;80us-ish which is a character time at 115200 baud. Or if the uart has e.g. A 16-byte rx fifo, and interrupts are blocked for &gt;1ms-ish although that sounds unlikely."}, {"owner": {"reputation": 18850, "user_id": 999530, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGip7.png?s=128&g=1", "display_name": "Travis Griggs", "link": "https://stackoverflow.com/users/999530/travis-griggs"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1480557100, "post_id": 40898804, "comment_id": 69016343, "body": "I&#39;ll instrument it tomorrow when I&#39;m at the machine to get a more numerical answer on high bandwidth."}, {"owner": {"reputation": 18850, "user_id": 999530, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGip7.png?s=128&g=1", "display_name": "Travis Griggs", "link": "https://stackoverflow.com/users/999530/travis-griggs"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1480557183, "post_id": 40898804, "comment_id": 69016359, "body": "I verified the lack of corruption on the wire (right were it plugs into the pins on the Linux SBC) using a PicoScope that can do serial decoding of the stream. By getting my software to drive a gpio pin when I detect an unexpected zero, I can trigger the scope on that and then compare character for character what went in, and what came out on the pyserial side."}, {"owner": {"reputation": 18850, "user_id": 999530, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGip7.png?s=128&g=1", "display_name": "Travis Griggs", "link": "https://stackoverflow.com/users/999530/travis-griggs"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1480557301, "post_id": 40898804, "comment_id": 69016396, "body": "Is there  way I can figure out how big the rx fifos are? Does the Linux DTS expose that? Or do I need to go data sheet diving to figure that out. Are there any low level linux tools where I could tap the serial port receive and help figure out where the corruption is entering at?"}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1480589903, "post_id": 40898804, "comment_id": 69030033, "body": "Has fifos: look at the datasheet. Low-level linux tools: sorry, don&#39;t know. If the uart has fifos it would be surprising if the driver didn&#39;t enable them - but yes worth checking it does actually enable."}], "answers": [{"comments": [{"owner": {"reputation": 18850, "user_id": 999530, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGip7.png?s=128&g=1", "display_name": "Travis Griggs", "link": "https://stackoverflow.com/users/999530/travis-griggs"}, "edited": false, "score": 0, "creation_date": 1483658566, "post_id": 41496470, "comment_id": 70199087, "body": "That got me there! Thanks! Moved up to a newer kernel as well."}], "tags": [], "owner": {"reputation": 113, "user_id": 2196054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buDQJ.jpg?s=128&g=1", "display_name": "cajjed", "link": "https://stackoverflow.com/users/2196054/cajjed"}, "is_accepted": true, "score": 3, "last_activity_date": 1483658524, "creation_date": 1483658524, "answer_id": 41496470, "question_id": 40898804, "link": "https://stackoverflow.com/questions/40898804/weird-pyserial-linux-corruption/41496470#41496470", "title": "Weird (py)serial linux corruption", "body": "<p>This could be a result of overflow errors.  If you look at atmel_serial you can see if there are any errors.</p>\n\n<pre><code>cat /proc/tty/driver/atmel_serial\n</code></pre>\n\n<p>For example on ttyS2 you might see something like this (oe: shows the overflow errors):</p>\n\n<pre><code>2: uart:ATMEL_SERIAL mmio:0xF0020000 irq:31 tx:266758 rx:361385 oe:51 RTS|DTR|DSR|CD|RI\n</code></pre>\n\n<p>Since you are high rate serial you might try implementing DMA on the USART lines.  Tweak the appropriate dts file in your kernel by adding the following to your usart settings:</p>\n\n<pre><code>atmel,use-dma-rx;\natmel,use-dma-tx;\n</code></pre>\n\n<p>For my kernel, I had to disable SPI and I2C so that there would be enough DMA channels available for the USART.</p>\n"}], "owner": {"reputation": 18850, "user_id": 999530, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGip7.png?s=128&g=1", "display_name": "Travis Griggs", "link": "https://stackoverflow.com/users/999530/travis-griggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 41496470, "answer_count": 1, "score": 3, "last_activity_date": 1483658524, "creation_date": 1480542400, "question_id": 40898804, "link": "https://stackoverflow.com/questions/40898804/weird-pyserial-linux-corruption", "title": "Weird (py)serial linux corruption", "body": "<p>I have a Linux SBC based on the Atmel SAMA5D36. I have another device hooked up to it via /dev/ttyS2 via TTL lines (115200 8N1). Using pyserial, I have a pretty high bandwidth query/response conversation with that device.</p>\n\n<p>Periodically (at least once a minute), I see a very repeatable corruption of the date coming back from the other device. If it were to respond with some text like</p>\n\n<pre><code>\"123456\" (ascii character values)\n</code></pre>\n\n<p>It will drop one character AND add character-0 after the following character:</p>\n\n<pre><code>\"13\\x00456\"\n</code></pre>\n\n<p>Hopefully that's clear. It will drop the 2, the next character is as expected, a character-0 follows, and then back to normal. </p>\n\n<p>I am using kernel 4.1.10. Via some debug statements, I'm pretty sure this is not happening in my python loop, because the 0's show up in random spots of the read() buffer. I have also hooked up a scope on the incoming lines and have verified that the wire is not carrying this corruption.</p>\n\n<p>I am looking for an answer that can get me in the right direction of figuring out why this is happening. CPU load does <em>seem</em> to increase the frequency (for example, when I'm doing a bunch of DBUS traffic for a BLE adaptor attached).</p>\n"}, {"tags": ["python", "pandas", "plot", "dataframe", "bokeh"], "comments": [{"owner": {"reputation": 9572, "user_id": 2543372, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8814f53d616260c4971fd77f8b3f54a1?s=128&d=identicon&r=PG", "display_name": "Julien Marrec", "link": "https://stackoverflow.com/users/2543372/julien-marrec"}, "edited": false, "score": 0, "creation_date": 1480542390, "post_id": 40898764, "comment_id": 69011380, "body": "Please provide a sample of <code>df</code> (see <a href=\"http://stackoverflow.com/help/mcve\">mcve</a>)"}, {"owner": {"reputation": 9572, "user_id": 2543372, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8814f53d616260c4971fd77f8b3f54a1?s=128&d=identicon&r=PG", "display_name": "Julien Marrec", "link": "https://stackoverflow.com/users/2543372/julien-marrec"}, "edited": false, "score": 0, "creation_date": 1480544504, "post_id": 40898764, "comment_id": 69012367, "body": "add it to the original question please"}, {"owner": {"reputation": 249, "user_id": 7085252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3a9258dcda166c4d807c30dd850fd17b?s=128&d=identicon&r=PG&f=1", "display_name": "pottolom", "link": "https://stackoverflow.com/users/7085252/pottolom"}, "reply_to_user": {"reputation": 9572, "user_id": 2543372, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8814f53d616260c4971fd77f8b3f54a1?s=128&d=identicon&r=PG", "display_name": "Julien Marrec", "link": "https://stackoverflow.com/users/2543372/julien-marrec"}, "edited": false, "score": 0, "creation_date": 1480544576, "post_id": 40898764, "comment_id": 69012395, "body": "Sample of dataframe now added to the original question."}], "answers": [{"comments": [{"owner": {"reputation": 249, "user_id": 7085252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3a9258dcda166c4d807c30dd850fd17b?s=128&d=identicon&r=PG&f=1", "display_name": "pottolom", "link": "https://stackoverflow.com/users/7085252/pottolom"}, "edited": false, "score": 1, "creation_date": 1480547105, "post_id": 40899698, "comment_id": 69013496, "body": "Thank you. Your comments make sense, and the code you&#39;ve provided works perfectly. Much appreciated."}], "tags": [], "owner": {"reputation": 9572, "user_id": 2543372, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8814f53d616260c4971fd77f8b3f54a1?s=128&d=identicon&r=PG", "display_name": "Julien Marrec", "link": "https://stackoverflow.com/users/2543372/julien-marrec"}, "is_accepted": true, "score": 1, "last_activity_date": 1480546188, "creation_date": 1480546188, "answer_id": 40899698, "question_id": 40898764, "link": "https://stackoverflow.com/questions/40898764/python-bokeh-additional-y-axis-problems/40899698#40899698", "title": "Python Bokeh additional Y axis problems", "body": "<p>A few issues:</p>\n\n<p>When you do this:</p>\n\n<pre><code>p.extra_y_ranges = {'Col3': Range1d(start=0, end=0.25)}\np.add_layout(LinearAxis(y_range_name='Performance ratio %'), 'right')\n</code></pre>\n\n<p>You're creating another <code>y_range</code> named <code>Col3</code> on the first line. You need to use this name on the second line, not <code>Performance ratio %</code>. \n(Or better yet, name it <code>Performance ratio %</code> on the first line too).</p>\n\n<p>Also, in your loop you place all the 3 series on the same y axis, you need to specify <code>y_range_name='Col3'</code> for the third.</p>\n\n<p>The following works:</p>\n\n<pre><code>numlines = len(df.columns)\n\n#import colour pallete\nmypalette = Spectral11[0:numlines]\n\n# remove unwanted columns\ncol_list = ['Col1', 'Col2', 'Col3']\ndf = df[col_list]\n\n# make the figure, \np = figure(x_axis_type=\"datetime\", title=\"&lt;Plot Title&gt;\", \n           width = 800, height = 450, y_range=(0,100))\np.xaxis.axis_label = 'Date'\np.yaxis.axis_label = '&lt;Name of Primary Y Axis&gt;'\n\n\np.line(df.index, df['Col1'], legend = 'Col1', color = mypalette[0] )\np.line(df.index, df['Col2'], legend = 'Col2', color = mypalette[1] )\n\n# add extra y axis\np.extra_y_ranges = {'Performance ratio %': Range1d(start=0, end=50)}\np.line(df.index, df['Col3'], legend = 'Col3', color = mypalette[2], \n         y_range_name='Performance ratio %' )\np.add_layout(LinearAxis(y_range_name='Performance ratio %'), 'right')\n\n# creates an output file \noutput_file('bokeh.html')\n\n#save the plot\nshow(p)\n</code></pre>\n"}], "owner": {"reputation": 249, "user_id": 7085252, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3a9258dcda166c4d807c30dd850fd17b?s=128&d=identicon&r=PG&f=1", "display_name": "pottolom", "link": "https://stackoverflow.com/users/7085252/pottolom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "accepted_answer_id": 40899698, "answer_count": 1, "score": 1, "last_activity_date": 1480546188, "creation_date": 1480542167, "last_edit_date": 1480544542, "question_id": 40898764, "link": "https://stackoverflow.com/questions/40898764/python-bokeh-additional-y-axis-problems", "title": "Python Bokeh additional Y axis problems", "body": "<p>I have written the code below to produce a line graph based on data from a Pandas dataframe. The index of the dataframe is a time series.</p>\n\n<p>The code below was working well, but I decided I wanted to add one more data series (from the third column in my dataframe, referred to as 'Col3' in the code). I wanted this third series to be on a separate Y axis. However, when I added the code to achieve this, shown below highlighted by the ***, Bokeh seems unable to produce a plot. Does anyone have any idea what I am doing wrong?</p>\n\n<pre><code>from bokeh.plotting import figure, output_file, show, save\nfrom bokeh.models import ColumnDataSource\nfrom bokeh.models import Range1d, LinearAxis\nimport pandas as pd\nfrom pandas import HDFStore\nfrom bokeh.palettes import Spectral11\n\nstore = pd.HDFStore(&lt;dataframe location&gt;)\ndf = pd.DataFrame(store['d1'])\ndf = df.rename_axis('Time')\ndf.fillna(0)\n\nnumlines = len(df.columns)\n\n#import colour pallete\nmypalette = Spectral11[0:numlines]\n\n# remove unwanted columns\ncol_list = ['Col1', 'Col2', 'Col3']\ndf = df[col_list]\n\n# make a list of our columns\ncol = []\n[col.append(i) for i in df.columns]\n\n# make the figure, \np = figure(x_axis_type=\"datetime\", title=\"&lt;Plot Title&gt;\", width = 800, height = 450)\np.xaxis.axis_label = 'Date'\np.yaxis.axis_label = '&lt;Name of Primary Y Axis&gt;'\n\n*** # add extra y axis\np.extra_y_ranges = {'Col3': Range1d(start=0, end=0.25)}\np.add_layout(LinearAxis(y_range_name='Performance ratio %'), 'right') ***\n\n# loop through our columns and colors\nfor (columnnames, colore) in zip(col, mypalette):\np.line(df.index, df[columnnames], legend = columnnames, color = colore )\n\n# creates an output file \noutput_file('&lt;outputlocation&gt;')\n\n#save the plot\nsave(p)\n</code></pre>\n\n<p>For reference, my dataframe looks like this:</p>\n\n<p>Dataframe looks like this:</p>\n\n<pre><code>      Time          Col1     Col2     Col3     Col4\n29/11/2016 00:00    4        41       41        55\n29/11/2016 01:00    55       15       61        81\n29/11/2016 02:00    51       75       2         4\n29/11/2016 03:00    21       21       51        9\netc.\n</code></pre>\n"}, {"tags": ["python", "unit-testing", "argparse"], "comments": [{"owner": {"reputation": 2422, "user_id": 4047679, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7VEwB.png?s=128&g=1", "display_name": "raphael", "link": "https://stackoverflow.com/users/4047679/raphael"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1480542420, "post_id": 40898755, "comment_id": 69011393, "body": "@wim nothing wrong with that, I just couldn&#39;t find a question here on SO that said to do that (and how)"}], "answers": [{"comments": [{"owner": {"reputation": 2422, "user_id": 4047679, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7VEwB.png?s=128&g=1", "display_name": "raphael", "link": "https://stackoverflow.com/users/4047679/raphael"}, "edited": false, "score": 0, "creation_date": 1480606821, "post_id": 40901359, "comment_id": 69041577, "body": "I think I see where this might be going. But it also seems like it involves essentially duplicating the definition of the parser between the code and the testingcode (the first testing code block adds arguments to the parser)."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 2422, "user_id": 4047679, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7VEwB.png?s=128&g=1", "display_name": "raphael", "link": "https://stackoverflow.com/users/4047679/raphael"}, "edited": false, "score": 0, "creation_date": 1480612495, "post_id": 40901359, "comment_id": 69045325, "body": "I didn&#39;t pick the example to closely match your case; it&#39;s testing a different type of error.  For your case there are 2 issues - catching or redirecting the <code>sys.exit</code>, and catching the stderr message that goes with it."}, {"owner": {"reputation": 2422, "user_id": 4047679, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7VEwB.png?s=128&g=1", "display_name": "raphael", "link": "https://stackoverflow.com/users/4047679/raphael"}, "edited": false, "score": 0, "creation_date": 1480616182, "post_id": 40901359, "comment_id": 69047453, "body": "I found a solution that works for me, see <a href=\"http://stackoverflow.com/a/40916320/4047679\">here</a>"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1480557287, "creation_date": 1480557287, "answer_id": 40901359, "question_id": 40898755, "link": "https://stackoverflow.com/questions/40898755/how-can-i-test-whether-my-code-is-throwing-the-appropriate-argparse-exceptions/40901359#40901359", "title": "How can I test whether my code is throwing the appropriate argparse exceptions?", "body": "<p><code>test/test_argparse.py</code> does some of this kind of testing:</p>\n\n<p>For example:</p>\n\n<pre><code>class TestArgumentTypeError(TestCase):\n\n    def test_argument_type_error(self):\n\n        def spam(string):\n            raise argparse.ArgumentTypeError('spam!')\n\n        parser = ErrorRaisingArgumentParser(prog='PROG', add_help=False)\n        parser.add_argument('x', type=spam)\n        with self.assertRaises(ArgumentParserError) as cm:\n            parser.parse_args(['XXX'])\n        self.assertEqual('usage: PROG x\\nPROG: error: argument x: spam!\\n',\n                         cm.exception.stderr)\n</code></pre>\n\n<p>But the key to this the <code>ErrorRaisingArgumentParser</code> subclass defined near the start of the file.</p>\n\n<pre><code>class ErrorRaisingArgumentParser(argparse.ArgumentParser):\n\n    def parse_args(self, *args, **kwargs):\n        parse_args = super(ErrorRaisingArgumentParser, self).parse_args\n        return stderr_to_parser_error(parse_args, *args, **kwargs)\n\n    def exit(self, *args, **kwargs):\n        exit = super(ErrorRaisingArgumentParser, self).exit\n        return stderr_to_parser_error(exit, *args, **kwargs)\n\n    def error(self, *args, **kwargs):\n        error = super(ErrorRaisingArgumentParser, self).error\n        return stderr_to_parser_error(error, *args, **kwargs)\n</code></pre>\n\n<p>See that file for details.  With stderr redirection it gets a bit complicated.  Maybe more than really needed.</p>\n"}, {"tags": [], "owner": {"reputation": 2422, "user_id": 4047679, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7VEwB.png?s=128&g=1", "display_name": "raphael", "link": "https://stackoverflow.com/users/4047679/raphael"}, "is_accepted": true, "score": 3, "last_activity_date": 1481058651, "last_edit_date": 1495542331, "creation_date": 1480611718, "answer_id": 40916320, "question_id": 40898755, "link": "https://stackoverflow.com/questions/40898755/how-can-i-test-whether-my-code-is-throwing-the-appropriate-argparse-exceptions/40916320#40916320", "title": "How can I test whether my code is throwing the appropriate argparse exceptions?", "body": "<p>After a bit of hacking away I've found something that will pass testing. Suggestions to remove cruft welcome.</p>\n\n<p>In my main program I defined <code>parse_args</code> with some extra keyword args to be used for testing only.</p>\n\n<pre><code>def parse_args(args, prog = None, usage = None):\n    PARSER = argparse.ArgumentParser(prog=prog, usage=usage)\n    ....\n</code></pre>\n\n<p>Then in the testing class for testing the parser, adding these parameters to suppress usage and help information on an error as much as possible.</p>\n\n<pre><code>class ArgParseTestCase(unittest.TestCase):\n    def __init__(self, *args, **kwargs):\n        self.testing_params = {'prog':'TESTING', 'usage':''}\n        super(ArgParseTestCase, self).__init__(*args, **kwargs)\n</code></pre>\n\n<p>In the testing file defined this context manager from <a href=\"https://stackoverflow.com/a/18652005/4047679\">this answer</a>:</p>\n\n<pre><code>from contextlib import contextmanager\nfrom io import StringIO\n\n@contextmanager\ndef capture_sys_output():\n    capture_out, capture_err = StringIO(), StringIO()\n    current_out, current_err = sys.stdout, sys.stderr\n    try:\n        sys.stdout, sys.stderr = capture_out, capture_err\n        yield capture_out, capture_err\n    finally:\n        sys.stdout, sys.stderr = current_out, current_err\n</code></pre>\n\n<p>And then modified the test in my question above to be something like:</p>\n\n<pre><code>def test_no_action_error(self):\n    '''Test if no action produces correct error'''\n    with self.assertRaises(SystemExit) as cm, capture_sys_output() as (stdout, stderr):\n        args = parse_args([' '], **self.testing_params)\n    self.assertEqual(2, cm.exception.code)\n    self.assertEqual('usage: \\n TESTING: error: No action requested, add -process or -upload',\n                     stderr.getvalue())\n</code></pre>\n\n<p>Now the extra text at the start of the <code>assertEqual</code> isn't pretty... but the test passes so I'm happy.</p>\n"}, {"tags": [], "owner": {"reputation": 23213, "user_id": 7131757, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wvEUE.jpg?s=128&g=1", "display_name": "Giorgos Myrianthous", "link": "https://stackoverflow.com/users/7131757/giorgos-myrianthous"}, "is_accepted": false, "score": 0, "last_activity_date": 1618495974, "creation_date": 1618495974, "answer_id": 67110142, "question_id": 40898755, "link": "https://stackoverflow.com/questions/40898755/how-can-i-test-whether-my-code-is-throwing-the-appropriate-argparse-exceptions/67110142#67110142", "title": "How can I test whether my code is throwing the appropriate argparse exceptions?", "body": "<p>The easiest way using <code>pytest</code> would be the following:</p>\n<pre><code>with pytest.raises(SystemExit) as e:\n    parse_args(...)\n\nassert isinstance(e.value.__context__, argparse.ArgumentError)\nassert 'expected err msg' in e.value.__context__.message\n</code></pre>\n<hr />\n<p>We need this workaround as argparse will exit error code 2 which means that a <code>SystemExit</code> will be raised.</p>\n"}], "owner": {"reputation": 2422, "user_id": 4047679, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7VEwB.png?s=128&g=1", "display_name": "raphael", "link": "https://stackoverflow.com/users/4047679/raphael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "accepted_answer_id": 40916320, "answer_count": 3, "score": 0, "last_activity_date": 1618495974, "creation_date": 1480542108, "last_edit_date": 1495540925, "question_id": 40898755, "link": "https://stackoverflow.com/questions/40898755/how-can-i-test-whether-my-code-is-throwing-the-appropriate-argparse-exceptions", "title": "How can I test whether my code is throwing the appropriate argparse exceptions?", "body": "<p>From <a href=\"https://stackoverflow.com/a/18161115/4047679\">this great answer</a> I learned to put argument parsing into its own function to simplify unit testing.</p>\n\n<p>From <a href=\"https://stackoverflow.com/a/6723066/4047679\">this answer</a> I learned that sometimes you need to throw your own parser errors to get argparse to perform the behaviour you want. E.g.:</p>\n\n<pre><code>if not (args.process or args.upload):\n    parser.error('No action requested, add -process or -upload')\n</code></pre>\n\n<p>But it is hard to test if this does what it should since throwing the parser error also exits the program. So something like this TestCase won't work:</p>\n\n<pre><code>def test_no_action_error(self):\n    '''Test if no action produces correct error'''\n    with self.assertRaises(ArgumentError) as cm:\n        args = parse_args(' ')\n    self.assertEqual('No action requested, add -process or -upload', str(cm.exception))\n</code></pre>\n\n<p>The comments from the first question suggest <a href=\"https://stackoverflow.com/questions/18651705/argparse-unit-tests-suppress-the-help-message\">this question</a>. But I don't follow how to use this code within a testing file.</p>\n"}, {"tags": ["python", "recursion"], "comments": [{"owner": {"reputation": 3711, "user_id": 3456281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fb5e6fa4617d883de24fe3cc4372898?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper", "link": "https://stackoverflow.com/users/3456281/jasper"}, "edited": false, "score": 0, "creation_date": 1480541539, "post_id": 40898589, "comment_id": 69010973, "body": "What is the exact error message you&#39;re getting?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7174295"}, "reply_to_user": {"reputation": 3711, "user_id": 3456281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fb5e6fa4617d883de24fe3cc4372898?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper", "link": "https://stackoverflow.com/users/3456281/jasper"}, "edited": false, "score": 0, "creation_date": 1480542299, "post_id": 40898589, "comment_id": 69011346, "body": "I added the error message."}], "answers": [{"tags": [], "owner": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "is_accepted": false, "score": 0, "last_activity_date": 1480543345, "creation_date": 1480543345, "answer_id": 40899046, "question_id": 40898589, "link": "https://stackoverflow.com/questions/40898589/how-to-find-connected-cells-in-a-grid-using-recursion/40899046#40899046", "title": "How to find connected cells in a grid using recursion?", "body": "<p>You should check <code>x&gt;n or y&gt;m</code> before <code>matrix[x][y] == -1 or matrix[x][y] == 0</code>. Otherwise it can lead to <code>out of range</code> error.</p>\n\n<p>And also you should mark somehow your way or you will end up in infinite recursion. In your example you will go right->left->right->left... and always find <code>1</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3711, "user_id": 3456281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fb5e6fa4617d883de24fe3cc4372898?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper", "link": "https://stackoverflow.com/users/3456281/jasper"}, "edited": false, "score": 1, "creation_date": 1480547884, "post_id": 40899068, "comment_id": 69013789, "body": "Yes, before the <code>return 1+...</code> part. You already check for <code>matrix [x][y]==-1</code>, why do you do this? You can also use -1 as marker."}, {"owner": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "edited": false, "score": 0, "creation_date": 1480548350, "post_id": 40899068, "comment_id": 69013933, "body": "Marking it with <code>2</code> will break other solutions."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7174295"}, "edited": false, "score": 0, "creation_date": 1480548467, "post_id": 40899068, "comment_id": 69013975, "body": "Thanks I was trying to follow another recursive fill example online, but adding the marker makes sense now. Also, I changed the line <code>sums = max(find(i, k))</code> into <code>sums = max(sums, find(i, k))</code> and now I&#39;m getting a <code>TypeError: unsupported operand type(s) for +: &#39;int&#39; and &#39;NoneType&#39;</code>. I used a <code>try...except TypeError</code> and I think that solves it temporarily. But I don&#39;t think that&#39;s the best solution for that? If you have any ideas, I would love to hear it! Thanks!"}, {"owner": {"reputation": 3711, "user_id": 3456281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fb5e6fa4617d883de24fe3cc4372898?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper", "link": "https://stackoverflow.com/users/3456281/jasper"}, "edited": false, "score": 0, "creation_date": 1480571996, "post_id": 40899068, "comment_id": 69020321, "body": "Your <code>find</code> function now seems to finish without returning anything so you get <code>None</code>."}], "tags": [], "owner": {"reputation": 3711, "user_id": 3456281, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fb5e6fa4617d883de24fe3cc4372898?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper", "link": "https://stackoverflow.com/users/3456281/jasper"}, "is_accepted": false, "score": 0, "last_activity_date": 1480543403, "creation_date": 1480543403, "answer_id": 40899068, "question_id": 40898589, "link": "https://stackoverflow.com/questions/40898589/how-to-find-connected-cells-in-a-grid-using-recursion/40899068#40899068", "title": "How to find connected cells in a grid using recursion?", "body": "<p>I think you're running into infinite recursion because</p>\n\n<ol>\n<li>you start in the upper right corner</li>\n<li>you find a <code>1</code>, so you <code>return 1 + find(x+1, y) + ...</code></li>\n<li>now you're looking at the next <code>1</code> right to the first one</li>\n<li>so you <code>return 1 + find(x+1, y) + find(x-1, y)</code></li>\n<li>thereby looking at the <code>1</code> in the upper right corner again (<code>x-1, y</code>)</li>\n<li>goto 1</li>\n</ol>\n\n<p>Possible solution: mark \"used\" positions, maybe with <code>2</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7174295"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 817, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1480543403, "creation_date": 1480541457, "last_edit_date": 1480541590, "question_id": 40898589, "link": "https://stackoverflow.com/questions/40898589/how-to-find-connected-cells-in-a-grid-using-recursion", "title": "How to find connected cells in a grid using recursion?", "body": "<p>I am doing a problem that gives a grid such as:</p>\n\n<p>1 1 0 0</p>\n\n<p>0 1 1 0</p>\n\n<p>0 0 1 0</p>\n\n<p>1 0 0 0</p>\n\n<p>n = number of rows and m = number of columns.</p>\n\n<p>The problem is to find the most connected chain  of \"1\" in the grid...in this case: it is the 1-1-1-1-1 from cell (0,0) to cell (2,2).</p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>def find(x, y):\n     #uses recursive fill\n     if x &lt; 0 or y &lt; 0 or matrix[x][y] == -1 or matrix[x][y] == 0 or x&gt;n or y&gt;m:\n         return 0\n     else:\n         return 1 + find(x+1, y) + find(x-1, y) + find(x, y+1) + find(x, y-1)+ find(x+1, y-1)+ find(x-1,y+1) + find(x+1, y+1) + find(x-1, y-1)\n\nmatrix = [[0 for a in range(n)] for b in range(m)]\n\n#captures data and puts it in a matrix\nfor i in range(n):\n    row = map(int, raw_input().strip().split())\n    for j in range(m):\n        matrix[i][j] = row[j]\n\nsums = 0\nfor i in range(n):\n    for k in range(m):\n        if matrix[i][k] == 1:\n            print matrix[i][k]\n            sums = max(find(i, k))\n\nprint sums\n</code></pre>\n\n<p>Right now, I am getting a \"Runtime Error\" when I run this program but I can't figure out why. I am doing the recursive fill in the <code>find</code> function. The rest of the code just stores values from <code>raw_input()</code> into a matrix and enters the <code>find</code> function if the cell is equal to 1. </p>\n\n<p>EDIT:</p>\n\n<p>I am getting a long repeated error that looks like this (shortened):</p>\n\n<pre><code>    Traceback (most recent call last):\n  File \"solution.py\", line 27, in &lt;module&gt;\n    sums = max(find(i, k))\n  File \"solution.py\", line 11, in find\n    return 1 + find(x+1, y) + find(x-1, y) + find(x, y+1) + find(x, y-1)+ find(x+1, y-1)+ find(x-1,y+1) + find(x+1, y+1) + find(x-1, y-1)\n  File \"solution.py\", line 11, in find\n    return 1 + find(x+1, y) + find(x-1, y) + find(x, y+1) + find(x, y-1)+ find(x+1, y-1)+ find(x-1,y+1) + find(x+1, y+1) + find(x-1, y-1)\n  File \"solution.py\", line 11, in find\n    return 1 + find(x+1, y) + find(x-1, y) + find(x, y+1) + find(x, y-1)+ find(x+1, y-1)+ find(x-1,y+1) + find(x+1, y+1) + find(x-1, y-1)\n  File \"solution.py\", line 11, in find\n    return 1 + find(x+1, y) + find(x-1, y) + find(x, y+1) + find(x, y-1)+ find(x+1, y-1)+ find(x-1,y+1) + find(x+1, y+1) + find(x-1, y-1)\n  File \"solution.py\", line 11, in find\n    return 1 + find(x+1, y) + find(x-1, y) + find(x, y+1) + find(x, y-1)+ find(x+1, y-1)+ find(x-1,y+1) + find(x+1, y+1) + find(x-1, y-1)\n  File \"solution.py\", line 11, in find\n</code></pre>\n\n<p>Also this solution is probably not the best (I'm new at Python), so any suggestions would be appreciated.</p>\n"}, {"tags": ["python", "concurrency", "workflow", "airflow"], "comments": [{"owner": {"reputation": 138, "user_id": 4021145, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SK8Bn6MML-Y/AAAAAAAAAAI/AAAAAAAAAGs/IwxsLnx0SU4/photo.jpg?sz=128", "display_name": "Gergely Danyi", "link": "https://stackoverflow.com/users/4021145/gergely-danyi"}, "edited": false, "score": 3, "creation_date": 1484895596, "post_id": 40898498, "comment_id": 70707353, "body": "Old post but I had the same issue. If you tried to run with trigger_dag in command line with an execution_date before start_date then it will deadlock because depends_on_past is True. Setting depends_on_past to False solved it for me. Might be the same behavior for backfill."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7747525, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0J9Pb2jPI3I/AAAAAAAAAAI/AAAAAAAACZ8/KgQOWybPuwg/photo.jpg?sz=128", "display_name": "Anurag Sethi", "link": "https://stackoverflow.com/users/7747525/anurag-sethi"}, "is_accepted": false, "score": -1, "last_activity_date": 1490122236, "creation_date": 1490122236, "answer_id": 42935777, "question_id": 40898498, "link": "https://stackoverflow.com/questions/40898498/airflow-bashoperator-getting-dag-runs-are-deadlocked-for-dag-error/42935777#42935777", "title": "Airflow - BashOperator: Getting &quot;Dag runs are deadlocked for DAG:..&quot; error", "body": "<p>Try after deleting the dags entries from dag_run table and restarting the scheduler after that.</p>\n"}, {"tags": [], "owner": {"reputation": 4083, "user_id": 1000361, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/PAZV3.jpg?s=128&g=1", "display_name": "Moemars", "link": "https://stackoverflow.com/users/1000361/moemars"}, "is_accepted": false, "score": 4, "last_activity_date": 1573599047, "creation_date": 1573599047, "answer_id": 58827865, "question_id": 40898498, "link": "https://stackoverflow.com/questions/40898498/airflow-bashoperator-getting-dag-runs-are-deadlocked-for-dag-error/58827865#58827865", "title": "Airflow - BashOperator: Getting &quot;Dag runs are deadlocked for DAG:..&quot; error", "body": "<p>@Gergely's response helped me. I was trying to run airflow backfill for a date that was past the end_date specified on the DAG. Once I changed the end_date on the DAG object to include the date I was backfilling, it worked.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 8854251, "user_type": "registered", "profile_image": "https://graph.facebook.com/1479980075425143/picture?type=large", "display_name": "Doosik Bae", "link": "https://stackoverflow.com/users/8854251/doosik-bae"}, "is_accepted": false, "score": 0, "last_activity_date": 1603295512, "creation_date": 1603295512, "answer_id": 64467318, "question_id": 40898498, "link": "https://stackoverflow.com/questions/40898498/airflow-bashoperator-getting-dag-runs-are-deadlocked-for-dag-error/64467318#64467318", "title": "Airflow - BashOperator: Getting &quot;Dag runs are deadlocked for DAG:..&quot; error", "body": "<p>Try to delete dagrun table's row which have state 'running' as value in the database.</p>\n<p>And then 'airflow backfil &lt;dag_id&gt; -s &lt;start_date&gt; -e &lt;end_date&gt; --reset_dagruns.</p>\n"}], "owner": {"reputation": 221, "user_id": 6680370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w_paDyW47aA/AAAAAAAAAAI/AAAAAAAAACQ/68lmIJMNmqQ/photo.jpg?sz=128", "display_name": "Kimi Merroll", "link": "https://stackoverflow.com/users/6680370/kimi-merroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4140, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1603295512, "creation_date": 1480541133, "last_edit_date": 1480541443, "question_id": 40898498, "link": "https://stackoverflow.com/questions/40898498/airflow-bashoperator-getting-dag-runs-are-deadlocked-for-dag-error", "title": "Airflow - BashOperator: Getting &quot;Dag runs are deadlocked for DAG:..&quot; error", "body": "<p>Really liking the Airflow workflow scheduler, but stumped on an error running a simple DAG: \"<strong>{jobs.py:538} ERROR - Dag runs are deadlocked for DAG: TEST_SCHEDULER_DAG</strong>\".</p>\n\n<p>This is a new airflow install (v1.7.1.3) and I've been able to run other scheduled dag files just fine. My environment is Linux (ubuntu 16.04), python 2.7.12 (anaconda), postgresql 9.5.5, and using LocalExecutor.</p>\n\n<p>The DAG I'm getting the deadlock error on is:</p>\n\n<pre><code>from airflow import DAG\nfrom airflow.operators import BashOperator\nfrom datetime import datetime, timedelta\n\ndefault_args = {\n    'owner': 'owner.name',\n    'depends_on_past': True,\n    'start_date': datetime(2016, 11, 30, 8, 0, 0),\n    'retries': 0,\n    'retry_delay': timedelta(seconds=60),\n}\n\ntst_dag = DAG(dag_id='TEST_SCHEDULER_DAG',\n              default_args=default_args,\n              schedule_interval='10 * * * *')\n\nt1 = BashOperator(\n    task_id='task_1',\n    bash_command='sleep 10',\n    dag=tst_dag)\n\nt2 = BashOperator(\n    task_id='task_2',\n    bash_command='sleep 10',                  \n    dag=tst_dag)\n\nt2.set_upstream(t1)\n</code></pre>\n\n<p>Again, the first execution runs fine, but all the subsequent executions (DagRun) show as 'failed' and I see the 'deadlock' error on the console.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "python-2.7", "oop"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1480544433, "post_id": 40898482, "comment_id": 69012343, "body": "Within <code>__init__ </code>, you could just do <code>self.is_awesome = food_type == &quot;cookie&quot;</code>. That is, if you want a boolean value, not a string"}], "answers": [{"comments": [{"owner": {"reputation": 180, "user_id": 5812780, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2984914ff20e2001e912986a4d510b4e?s=128&d=identicon&r=PG&f=1", "display_name": "James Urban", "link": "https://stackoverflow.com/users/5812780/james-urban"}, "edited": false, "score": 0, "creation_date": 1480545302, "post_id": 40899182, "comment_id": 69012732, "body": "Sorry I didn&#39;t indicate this, but I am aware that this way works, but I&#39;m trying to find a way to avoid going through an if statement each time I call &#39;is_awesome&#39;"}], "tags": [], "owner": {"reputation": 142, "user_id": 7165008, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1005704756219508/picture?type=large", "display_name": "Developer", "link": "https://stackoverflow.com/users/7165008/developer"}, "is_accepted": false, "score": 1, "last_activity_date": 1480544294, "last_edit_date": 1480544294, "creation_date": 1480543934, "answer_id": 40899182, "question_id": 40898482, "link": "https://stackoverflow.com/questions/40898482/defining-method-of-class-in-if-statement/40899182#40899182", "title": "defining method of class in if statement", "body": "<p>You have to define the method/function <code>is_awesome(self)</code> and then your <code>if's</code> inside it</p>\n\n<pre><code>class Food:\n    def __init__(self,food_type):\n        self.food_type = food_type\n\n    def is_awesome(self):\n         if self.food_type == 'cookie':\n            print 'this is a cookie'\n            print \"is awesome\"\n         else:\n            print 'this is not a cookie not awesome'\n            print \"not awesome\"\n\n\nOreo = Food('cookie')\nOreo.is_awesome()\n</code></pre>\n\n<p>This works, tested!</p>\n"}, {"tags": [], "owner": {"reputation": 50179, "user_id": 594589, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0f9d5953607841d6a50b843a1107e51e?s=128&d=identicon&r=PG", "display_name": "dm03514", "link": "https://stackoverflow.com/users/594589/dm03514"}, "is_accepted": true, "score": 1, "last_activity_date": 1480556086, "creation_date": 1480556086, "answer_id": 40901207, "question_id": 40898482, "link": "https://stackoverflow.com/questions/40898482/defining-method-of-class-in-if-statement/40901207#40901207", "title": "defining method of class in if statement", "body": "<p><strong>Is there a better way to make objects with different methods?</strong></p>\n\n<p>Yes a way that works :) Polymorphism is a great candidate.</p>\n\n<pre><code>class Food:\n  def is_awesome(self):\n    print 'not awesome'\n\nclass Cookie(Food):\n  def is_awesome(self):\n    print 'is awesome'\n</code></pre>\n\n<p><strong>and is there a reason why the method  is_awesome isn't callable by 'Oreo.is_awesome'?</strong></p>\n\n<p>Yes, it's not bound to the instance (conventionally called <code>self</code>) in any</p>\n"}, {"tags": [], "owner": {"reputation": 67, "user_id": 12397370, "user_type": "registered", "profile_image": "https://graph.facebook.com/2590578904356150/picture?type=large", "display_name": "Gabriel Cia", "link": "https://stackoverflow.com/users/12397370/gabriel-cia"}, "is_accepted": false, "score": 0, "last_activity_date": 1610281737, "last_edit_date": 1610281737, "creation_date": 1608826225, "answer_id": 65440719, "question_id": 40898482, "link": "https://stackoverflow.com/questions/40898482/defining-method-of-class-in-if-statement/65440719#65440719", "title": "defining method of class in if statement", "body": "<p>I encountered a similar situation where I wanted different instances of a class to have one of the methods behave differently depending on the init values but still have the same method name, and didn't want to run if/else statements at every call  to the method.</p>\n<p>The simplest solution I found was to define a setter method that creates a pointer to the wanted behavior, and this setter method is only run once at initialization:</p>\n<pre><code>class Food:\n    def __init__(self, food_type):\n        self.food_type = food_type\n        \n        self.set_awesomeness()\n    \n    def is_awesome():\n        return 'is awesome'\n\n    def not_awesome():\n        return 'not awesome'\n\n    # Point to the wanted behavior\n    def set_awesomeness(self):\n        if self.food_type == 'cookie':\n            self.awesomeness = Food.is_awesome()\n        else:\n            self.awesomeness = Food.not_awesome()\n\n    def get_awesomeness(self):\n        return self.awesomeness\n    \ncookie = Food('cookie')\ncookie.get_awesomeness() # 'is awesome'\n\ndonut = Food('donut')\ndonut.get_awesomeness() # 'not awesome'\n</code></pre>\n"}], "owner": {"reputation": 180, "user_id": 5812780, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2984914ff20e2001e912986a4d510b4e?s=128&d=identicon&r=PG&f=1", "display_name": "James Urban", "link": "https://stackoverflow.com/users/5812780/james-urban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6495, "favorite_count": 1, "accepted_answer_id": 40901207, "answer_count": 3, "score": 0, "last_activity_date": 1610281737, "creation_date": 1480541075, "last_edit_date": 1480546659, "question_id": 40898482, "link": "https://stackoverflow.com/questions/40898482/defining-method-of-class-in-if-statement", "title": "defining method of class in if statement", "body": "<p>I'm trying to create a class that will create objects with different methods based on an input.  The point of this is to avoid using an if statement every time the method is called.  </p>\n\n<p>Below is the code I thought would work, but isn't working.</p>\n\n<pre><code>class Food:\n    def __init__(self,food_type):\n        self.food_type = food_type\n\n        if food_type == 'cookie':\n            print 'this is a cookie'\n            def is_awesome(self):\n                print \"is awesome\"\n        else:\n            print 'this is not a cookie'\n            def is_awesome(self):\n                print \"not awesome\"\n\nOreo = Food('cookie')\nOreo.is_awesome()\n</code></pre>\n\n<p>The code doesn't error on the <code>def is_awesome(self)</code> statement, but instead the <code>Oreo.is_awesome()</code> line raises the error: </p>\n\n<p>\"AttributeError: Food instance has no attribute is_awesome\".</p>\n\n<p>Is there a better way to make objects with different methods? and is there a reason why the method <code>is_awesome</code> isn't callable by 'Oreo.is_awesome'?</p>\n"}, {"tags": ["python", "count"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1480540940, "post_id": 40898421, "comment_id": 69010667, "body": "If you&#39;re counting things in a sizeable input, it&#39;s probably best to use <code>collections.Counter</code>: <a href=\"https://docs.python.org/3/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\">docs.python.org/3/library/collections.html#collections.Count&zwnj;&#8203;er</a>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1480541009, "post_id": 40898421, "comment_id": 69010700, "body": "that won&#39;t work because <code>word</code> is a string: <code>&quot;apple, red&quot;</code>: you&#39;d get 0. your question is unclear."}], "answers": [{"tags": [], "owner": {"reputation": 1751, "user_id": 3586325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3CRVr.jpg?s=128&g=1", "display_name": "Buzz", "link": "https://stackoverflow.com/users/3586325/buzz"}, "is_accepted": false, "score": 0, "last_activity_date": 1480541422, "creation_date": 1480541422, "answer_id": 40898577, "question_id": 40898421, "link": "https://stackoverflow.com/questions/40898421/using-the-count-method-to-count-bigrams/40898577#40898577", "title": "Using the count method to count bigrams", "body": "<p>You could do it yourself by using a dictionary to store all the pairs of words as the keys and how many times they show up as the values. You would need to loop through all the words and concatenate all the pairs and see if they are already in your dictionary. If they are increment that pair by 1 and if they are not in the dictionary add it with a value of one. so for the first pair your dictionary would look like this:</p>\n\n<pre><code>{\"apple, red\":1}\n</code></pre>\n\n<p>at the next time through the loop you would have:</p>\n\n<pre><code>{\"apple, red\":1,\n\"red, potato\":1}\n</code></pre>\n\n<p>and by the time you are finished creating the dictionary you would have:</p>\n\n<pre><code>{\"apple, red\":2,\n\"red, potato\":1,\n\"potato, apple\":1}\n</code></pre>\n\n<p>then you could just look for the pair of words you want.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6949495, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mOOK4DtC2X0/AAAAAAAAAAI/AAAAAAAAADI/XcIS8CYBtsk/photo.jpg?sz=128", "display_name": "Dorota Pikul", "link": "https://stackoverflow.com/users/6949495/dorota-pikul"}, "is_accepted": false, "score": 0, "last_activity_date": 1480541437, "creation_date": 1480541437, "answer_id": 40898581, "question_id": 40898421, "link": "https://stackoverflow.com/questions/40898421/using-the-count-method-to-count-bigrams/40898581#40898581", "title": "Using the count method to count bigrams", "body": "<p>You can just count on string like that:</p>\n\n<pre><code>list = ['apple', 'red', 'potato', 'apple', 'red']\n', '.join(list).count(list[0] + ',' + ' ' + list[1]) \n</code></pre>\n\n<p>It will simply create a string 'apple, red, potato, apple, red' and on that it will count how many times 'apple, red' is in it.</p>\n"}], "owner": {"reputation": 11, "user_id": 7232994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8efcd0a1cae8ea8e27cd0ee437ddf8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Jones", "link": "https://stackoverflow.com/users/7232994/bob-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1480541437, "creation_date": 1480540843, "question_id": 40898421, "link": "https://stackoverflow.com/questions/40898421/using-the-count-method-to-count-bigrams", "title": "Using the count method to count bigrams", "body": "<p>Is it possible to use the count method to count for the occurrence of two objects?</p>\n\n<p>Eg. If I have a list such as</p>\n\n<pre><code>list = ['apple', 'red', 'potato', 'apple', 'red']\n</code></pre>\n\n<p>Could I do</p>\n\n<pre><code>    word = list[0] + ',' + ' ' + list[1]\n    list.count(word)\n</code></pre>\n\n<p>And have it return 2?</p>\n\n<p>I'm aware that python has NTLK, but I am not allowed to use it for the project       </p>\n"}, {"tags": ["python", "machine-learning", "neural-network"], "comments": [{"owner": {"reputation": 24145, "user_id": 94363, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6017d97591b78ae31e34b6483ee77a33?s=128&d=identicon&r=PG", "display_name": "rds", "link": "https://stackoverflow.com/users/94363/rds"}, "edited": false, "score": 3, "creation_date": 1480543861, "post_id": 40898414, "comment_id": 69012103, "body": "I&#39;m voting to close this question as off-topic because it&#39;s a general question about the design of Neural networks, which would better be answered on other stackexchange sites. stackoverflow is primarly for programming questions."}, {"owner": {"reputation": 12211, "user_id": 5411817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z0g8T.png?s=128&g=1", "display_name": "SherylHohman", "link": "https://stackoverflow.com/users/5411817/sherylhohman"}, "edited": false, "score": 1, "creation_date": 1531959804, "post_id": 40898414, "comment_id": 89796949, "body": "I&#39;m voting to close this question as off-topic because more applicable on <a href=\"https://stats.stackexchange.com/\">Cross Validated</a> or <a href=\"https://ai.stackexchange.com/\">AI</a>. See <a href=\"https://meta.stackexchange.com/questions/130524/which-stack-exchange-website-for-machine-learning-and-computational-algorithms\">Which Stack Exchange Site for Machine Learning questions</a>"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "edited": false, "score": 0, "creation_date": 1480546943, "post_id": 40899435, "comment_id": 69013428, "body": "Okay, but how can we compare 40% accuracy with optimization with Random forest solution yielding 97% accuracy? What is the reason for this?"}, {"owner": {"reputation": 4306, "user_id": 4678222, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F54uwC0wPWk/AAAAAAAAAAI/AAAAAAAAAog/RXK8dXuv_rA/photo.jpg?sz=128", "display_name": "Zhongyu Kuang", "link": "https://stackoverflow.com/users/4678222/zhongyu-kuang"}, "reply_to_user": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "edited": false, "score": 1, "creation_date": 1480547258, "post_id": 40899435, "comment_id": 69013564, "body": "40% is not the <i>best</i> performance that this NN model can do (with a loss of 1.157 it obviously hasn&#39;t converged). It&#39;s a performance before it actually converges to the global minimum (I only trained for 50 epoches to demonstrate a point that it can surpass 30%, but I didn&#39;t have the patience to train further ). When <i>the NN model is tuned correctly and when it actually converges</i>, it has the potential to yield a similar or even better performance."}], "tags": [], "owner": {"reputation": 4306, "user_id": 4678222, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F54uwC0wPWk/AAAAAAAAAAI/AAAAAAAAAog/RXK8dXuv_rA/photo.jpg?sz=128", "display_name": "Zhongyu Kuang", "link": "https://stackoverflow.com/users/4678222/zhongyu-kuang"}, "is_accepted": false, "score": 2, "last_activity_date": 1480547577, "last_edit_date": 1480547577, "creation_date": 1480544975, "answer_id": 40899435, "question_id": 40898414, "link": "https://stackoverflow.com/questions/40898414/implemention-of-neural-networks/40899435#40899435", "title": "Implemention of Neural Networks", "body": "<p>I suspect that the 30% accuracy is a combination of small learning rate setting and a small training-step setting. </p>\n\n<p>I ran your code snippet with <code>model.fit(train, ytrain, nb_epoch=5, batch_size=32)</code>, after 5 epoch's training it yields about 28% accuracy. With the same setting but increasing the training steps to <code>nb_epoch=50</code>, the loss drops to ~1.157 ish and the accuracy raises to 40%. Further increase training steps should lead the model to further converging. Other than that, you can also try to configure the model with a larger learning rate setting which could make the converging faster :</p>\n\n<pre><code>model.compile(loss='categorical_crossentropy', optimizer=SGD(lr=0.1, momentum=0.9, nesterov=True), metrics=['accuracy'])\n</code></pre>\n\n<p>Although be careful don't set the learning rate to be too large otherwise your loss could blow up.</p>\n\n<p>EDIT:\nNN is known for having the potential for modeling extremely complex function, however, whether or not the model actually produce a good performance is a matter of how the model is designed, trained, and many other matters related to the specific application.</p>\n"}, {"tags": [], "owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1480634521, "last_edit_date": 1480634521, "creation_date": 1480632696, "answer_id": 40921870, "question_id": 40898414, "link": "https://stackoverflow.com/questions/40898414/implemention-of-neural-networks/40921870#40921870", "title": "Implemention of Neural Networks", "body": "<p>Zhongyu Kuang's answer is correct in stating that you may need to train it longer or with a different learning rate.</p>\n\n<p>I'll add that the deeper your network, the longer you'll need to train it before it converges.  For a relatively simple function like sign(sin(1/x^3)), you may be able to get away with a smaller network than the one you're using.</p>\n\n<p>Additionally, softmax probably isn't the best output layer.  You just need to yield -1 or 1.  A single <code>tanh</code> unit seems like it would do well.  softmax is generally used when you want to learn a probability distribution over a finite set.  (You'll probably want to switch your error function from cross entropy to mean square error for similar reasons.)</p>\n\n<p>Try a network with one sigmoidal hidden layer and an output layer with just one tanh unit.  Then play around with the layer size and learning rate.  Maybe add a second hidden layer if you can't get results with just one, but I wouldn't be surprised if it's unnecessary.</p>\n\n<p>Addendum: In this approach, you'll replace f(x) with a direct calculation of the target function instead of the one-hot vector you're using currently.</p>\n"}], "owner": {"reputation": 85, "user_id": 7233090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54f62765cf8ddae2c5e56d7a8da5f20?s=128&d=identicon&r=PG&f=1", "display_name": "SaveMyLife", "link": "https://stackoverflow.com/users/7233090/savemylife"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1480634521, "creation_date": 1480540829, "question_id": 40898414, "link": "https://stackoverflow.com/questions/40898414/implemention-of-neural-networks", "title": "Implemention of Neural Networks", "body": "<p>I'm trying to understand how to implement neural networks. So I made my own dataset. Xtrain is numpy.random floats. Ytrain is sign(sin(1/x^3).\nTry to implement neural networks gave me very poor results. 30%accuracy. Random Forest with 100 trees give 97%. But I heard that NN can approximate any function. What is wrong in my understanding?</p>\n\n<pre><code>import numpy as np\nimport keras\nimport math\nfrom sklearn.ensemble import RandomForestClassifier as RF\ntrain = np.random.rand(100000)\ntest = np.random.rand(100000)\ndef g(x):\n    if math.sin(2*3.14*x) &gt; 0:\n        if math.cos(2*3.14*x) &gt; 0:\n            return 0\n        else:\n            return 1 \n    else:\n        if math.cos(2*3.14*x) &gt; 0:\n            return 2\n        else:\n           return 3\ndef f(x):\n    x = (1/x) ** 3\n    res = [0, 0, 0, 0]\n    res[g(x)] = 1\n    return res\n\nytrain = np.array([f(x)  for x in train])\nytest = np.array([f(x) for x in test])\ntrain = np.array([[x] for x in train])\ntest = np.array([[x] for x in test])\n\nfrom keras.models import Sequential\nfrom keras.layers import Dense, Activation, Embedding, LSTM\n\nmodel = Sequential()\nmodel.add(Dense(100, input_dim=1))\nmodel.add(Activation('sigmoid'))\nmodel.add(Dense(100))\nmodel.add(Activation('sigmoid'))\nmodel.add(Dense(100))\nmodel.add(Activation('sigmoid'))\nmodel.add(Dense(4))\nmodel.add(Activation('softmax'))\nmodel.compile(optimizer='sgd',\n          loss='categorical_crossentropy',\n          metrics=['accuracy'])\n</code></pre>\n\n<p>P.S. I tried out many layers, activation functions, loss functions, optimizers, but never got more than 30% accuracy :(</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 15670, "user_id": 10468, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/f21uW.jpg?s=128&g=1", "display_name": "DarenW", "link": "https://stackoverflow.com/users/10468/darenw"}, "is_accepted": false, "score": 1, "last_activity_date": 1480541240, "creation_date": 1480541240, "answer_id": 40898526, "question_id": 40898369, "link": "https://stackoverflow.com/questions/40898369/numpy-dot-product-returns-nan-matlab-equivalent-does-not-return-nan/40898526#40898526", "title": "numpy dot product returns NaN, Matlab equivalent does not return NaN", "body": "<p>The 3rd component of the vector is involved in all the products with rows of the matrix. Infinity times zero is indeterminate.  Python, like most languages, declares that to be not a number.  </p>\n"}, {"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1480541252, "last_edit_date": 1592644375, "creation_date": 1480541252, "answer_id": 40898529, "question_id": 40898369, "link": "https://stackoverflow.com/questions/40898369/numpy-dot-product-returns-nan-matlab-equivalent-does-not-return-nan/40898529#40898529", "title": "numpy dot product returns NaN, Matlab equivalent does not return NaN", "body": "<p>What's the first element of</p>\n<pre><code>[[1 0 0]    [[0]\n [0 1 0]  *  [1.38629436]\n [0 0 1]]    [-inf]]\n</code></pre>\n<p>? Well, it's <code>1*0 + 0*1.38629436 + 0*-inf</code>. See that last part?</p>\n<h1><code>0*-inf</code></h1>\n<p>All those nice theorems of linear algebra go straight out the window if you start trying to put infinities in your matrices. Heck, those theorems only approximately hold with finite floating-point numbers, since floating-point numbers and floating-point arithmetic can only approximate real numbers and real arithmetic.</p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1480541537, "creation_date": 1480541537, "answer_id": 40898612, "question_id": 40898369, "link": "https://stackoverflow.com/questions/40898369/numpy-dot-product-returns-nan-matlab-equivalent-does-not-return-nan/40898612#40898612", "title": "numpy dot product returns NaN, Matlab equivalent does not return NaN", "body": "<p>The <code>dot</code> involves multiplying 'all' values, and summing one axis.  The equivalent to this dot is</p>\n\n<pre><code>np.einsum('ij,jk-&gt;ik`, np.eye(3), np.log(beta))\n</code></pre>\n\n<p>which can be evaluated with broadcasting as:</p>\n\n<pre><code>In [223]: np.eye(3)[:,:,None]*np.log(beta)[None,:,:]\nOut[223]: \narray([[[ 0.        ],\n        [ 0.        ],\n        [        nan]],\n\n       [[ 0.        ],\n        [ 1.38629436],\n        [        nan]],\n\n       [[ 0.        ],\n        [ 0.        ],\n        [       -inf]]])\nIn [224]: (np.eye(3)[:,:,None]*np.log(beta)[None,:,:]).sum(axis=1)\nOut[224]: \narray([[ nan],\n       [ nan],\n       [-inf]])\n</code></pre>\n\n<p>So the first <code>nan</code> comes from summing <code>[0,0,nan]</code>.</p>\n\n<pre><code>In [226]: 0*np.log(beta)\nOut[226]: \narray([[  0.],\n       [  0.],\n       [ nan]])\n</code></pre>\n"}], "owner": {"reputation": 1183, "user_id": 3416136, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/KpFq0.jpg?s=128&g=1", "display_name": "malisit", "link": "https://stackoverflow.com/users/3416136/malisit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4255, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1498100679, "creation_date": 1480540668, "last_edit_date": 1498100679, "question_id": 40898369, "link": "https://stackoverflow.com/questions/40898369/numpy-dot-product-returns-nan-matlab-equivalent-does-not-return-nan", "title": "numpy dot product returns NaN, Matlab equivalent does not return NaN", "body": "<p>I have a vector of <code>beta=np.array([[1],[4],[0]])</code> and when I use <code>np.log</code> with this vector, I get this:</p>\n\n<pre><code>&gt;&gt;&gt; np.log(beta)\narray([[ 0.        ],\n       [ 1.38629436],\n       [       -inf]])\n</code></pre>\n\n<p>but when I use <code>np.dot</code> with this <code>beta</code> and an identity matrix it gives NaN instead of <code>1.38629436</code> as element at <code>[1,0]</code>.</p>\n\n<pre><code>&gt;&gt;&gt; np.dot(np.eye(3),np.log(beta))\narray([[ nan],\n       [ nan],\n       [-inf]])\n</code></pre>\n\n<p>I tried also this one:</p>\n\n<pre><code>&gt;&gt;&gt; beta2 = np.log(beta)\n&gt;&gt;&gt; beta2\narray([[ 0.        ],\n       [ 1.38629436],\n       [       -inf]])\n&gt;&gt;&gt; np.dot(np.eye(3),beta2)\narray([[ nan],\n       [ nan],\n       [-inf]])\n</code></pre>\n\n<p>Matlab version of same multiplication does not return NaN. I would like to have the same in numpy. Any ideas?</p>\n\n<p>Edit: I know basic linear algebra people thanks for that. My actual question was to manage to have a numpy equivalent for the dot product that does the same thing with the one with Matlab, which doesn't return NaN in the same case.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4168, "user_id": 6273251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fCGXep-7snc/AAAAAAAAAAI/AAAAAAAAADk/nk_YDFGfkc0/photo.jpg?sz=128", "display_name": "Random Davis", "link": "https://stackoverflow.com/users/6273251/random-davis"}, "edited": false, "score": 2, "creation_date": 1480540936, "post_id": 40898354, "comment_id": 69010661, "body": "Please provide a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. You haven&#39;t shown even which line the error is occuring on, nor even necessarily provided the code that produces the error. Read that page and edit your post accordingly."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 2, "creation_date": 1480541124, "post_id": 40898354, "comment_id": 69010749, "body": "When you initialize a <code>File_type</code>, the attribute <code>route</code> is overwriting the function <code>route</code> so you can&#39;t call it.  Give them different names"}, {"owner": {"reputation": 696, "user_id": 2129644, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8feb0a34801725042b245cd1158fda48?s=128&d=identicon&r=PG", "display_name": "Olof", "link": "https://stackoverflow.com/users/2129644/olof"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1480541744, "post_id": 40898354, "comment_id": 69011078, "body": "@PatrickHaugh Thanks solved the problem"}], "answers": [{"tags": [], "owner": {"reputation": 5300, "user_id": 4727702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EfsoQ.jpg?s=128&g=1", "display_name": "Yevhen Kuzmovych", "link": "https://stackoverflow.com/users/4727702/yevhen-kuzmovych"}, "is_accepted": false, "score": 0, "last_activity_date": 1480541583, "creation_date": 1480541583, "answer_id": 40898623, "question_id": 40898354, "link": "https://stackoverflow.com/questions/40898354/typeerror-int-object-is-not-callable-when-calling-a-class-function/40898623#40898623", "title": "TypeError: &#39;int&#39; object is not callable when calling a class function", "body": "<p>In your <code>File_type</code> class you have <code>route</code> as a method. But when you call constructor you write to <code>self.route</code> (that was a method) some integer, so you loose your method and can't call it anymore. Instead, you try to call integer. So just change the name of the method or variable <code>route</code>.</p>\n\n<p>And btw. Method always has to get <code>self</code> as a parameter (your <code>route</code> method doesn't).</p>\n"}], "owner": {"reputation": 696, "user_id": 2129644, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8feb0a34801725042b245cd1158fda48?s=128&d=identicon&r=PG", "display_name": "Olof", "link": "https://stackoverflow.com/users/2129644/olof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 811, "favorite_count": 0, "closed_date": 1567951442, "answer_count": 1, "score": -1, "last_activity_date": 1480541583, "creation_date": 1480540628, "last_edit_date": 1480541258, "question_id": 40898354, "link": "https://stackoverflow.com/questions/40898354/typeerror-int-object-is-not-callable-when-calling-a-class-function", "closed_reason": "Duplicate", "title": "TypeError: &#39;int&#39; object is not callable when calling a class function", "body": "<p>I have a function that return a class and I save it as a object. When I try to call on a class method I'll get the error </p>\n\n<pre><code>location = file_type.route(env['REQUEST_URI']) # Get the location\nTypeError: 'int' object is not callable\n</code></pre>\n\n<p>I have changed name on the object to make sure it is no naming collision.</p>\n\n<p>On the first line I call the the method get_file_type in module route.</p>\n\n<pre><code>file_type = route.get_file_type(env['REQUEST_URI']) # Get File_type object\nlocation = file_type.route(env['REQUEST_URI']) # Get the location\n</code></pre>\n\n<p>If I print out the file_type I get output <code>&lt;route.File_type instance at 0x7f96e3e90950&gt;</code> </p>\n\n<p>I store the File_type classes in a dictionary and the method get_file_type returns a File_type based on the request.</p>\n\n<pre><code>path = {'html'  : File_type('html', 1, 1),\n        'css'   : File_type('css', 1, 0),\n        'ttf'   : File_type('ttf', 0, 0),\n        }\n\ndef get_file_type(request): # return a File_type object\n    extension = request.rsplit('.', 1)[-1]\n\n    if extension in path:\n        return path[extension]\n\n    return path['html']\n</code></pre>\n\n<p>File_type class</p>\n\n<pre><code>class File_type:\n\n    def __init__(self, type_, parse, route):\n        self.type_ = type_\n        self.parse = parse\n        self.route = route\n\n    def route(resource):\n        if self.route == 1:\n            for pattern, value in routes:\n                if re.search(pattern, resource):\n                    return value\n            return None\n        else:\n            return resource.rsplit('.', 1)[0][1:]\n</code></pre>\n"}, {"tags": ["python", "function", "python-3.x", "assert"], "comments": [{"owner": {"reputation": 485, "user_id": 7151344, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WthpolmWBX4/AAAAAAAAAAI/AAAAAAAAAqI/M6L0vx7t84o/photo.jpg?sz=128", "display_name": "Andrew Lamarra", "link": "https://stackoverflow.com/users/7151344/andrew-lamarra"}, "edited": false, "score": 0, "creation_date": 1480540091, "post_id": 40898165, "comment_id": 69010178, "body": "Can you put the text of the assertion error in the question? Some people (such as myself) are on a network that blocks imgur."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 485, "user_id": 7151344, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WthpolmWBX4/AAAAAAAAAAI/AAAAAAAAAqI/M6L0vx7t84o/photo.jpg?sz=128", "display_name": "Andrew Lamarra", "link": "https://stackoverflow.com/users/7151344/andrew-lamarra"}, "edited": false, "score": 0, "creation_date": 1480540194, "post_id": 40898165, "comment_id": 69010235, "body": "@AndrewLamarra: help for the blind: top left corner (just noticed it right now): <code>ity&quot;, BOOK)</code>, then &quot;assertion unhandled by this code&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 7231333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cdbd4d3d6dd8d99deac6ea77ca669358?s=128&d=identicon&r=PG&f=1", "display_name": "Gazza732", "link": "https://stackoverflow.com/users/7231333/gazza732"}, "edited": false, "score": 0, "creation_date": 1480540226, "post_id": 40898217, "comment_id": 69010250, "body": "Thank you ever so much. As simple as forgetting the &#39;return added&#39; statement haha. Might wear that dunce hat in the corner right about now :D."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 181, "user_id": 7231333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cdbd4d3d6dd8d99deac6ea77ca669358?s=128&d=identicon&r=PG&f=1", "display_name": "Gazza732", "link": "https://stackoverflow.com/users/7231333/gazza732"}, "edited": false, "score": 0, "creation_date": 1480540381, "post_id": 40898217, "comment_id": 69010332, "body": "I just noticed the need for <code>return</code>. Post edited. Make sure to stay at least 10 minutes in that corner :)"}, {"owner": {"reputation": 181, "user_id": 7231333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cdbd4d3d6dd8d99deac6ea77ca669358?s=128&d=identicon&r=PG&f=1", "display_name": "Gazza732", "link": "https://stackoverflow.com/users/7231333/gazza732"}, "edited": false, "score": 0, "creation_date": 1480540499, "post_id": 40898217, "comment_id": 69010394, "body": "I feel even more silly now, I did actually have the &#39;return added&#39; statement in the else clause in the first place but accidentally removed it when I put in the first &#39;assert&#39; line ha. Don&#39;t know why/how I did, think I must have highlighted. Thanks again"}, {"owner": {"reputation": 181, "user_id": 7231333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cdbd4d3d6dd8d99deac6ea77ca669358?s=128&d=identicon&r=PG&f=1", "display_name": "Gazza732", "link": "https://stackoverflow.com/users/7231333/gazza732"}, "edited": false, "score": 0, "creation_date": 1480540537, "post_id": 40898217, "comment_id": 69010417, "body": "10 minutes? Phew, less than what I was planning :L."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1480540346, "last_edit_date": 1480540346, "creation_date": 1480540080, "answer_id": 40898217, "question_id": 40898165, "link": "https://stackoverflow.com/questions/40898165/why-am-i-getting-an-assertion-error-on-this-python-code/40898217#40898217", "title": "Why am I getting an Assertion Error on this Python code?", "body": "<p>when it works properly, your <code>addItem</code> function returns nothing, so it returns <code>None</code>, which is seen as a failure by the last <code>assert</code> statement that you inserted. You should return <code>added</code> for both cases (<code>True</code> or <code>False</code>)</p>\n\n<p>BTW since you reached that line, it means that all previous assertions are OK so good news: your code is OK.</p>\n"}], "owner": {"reputation": 181, "user_id": 7231333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cdbd4d3d6dd8d99deac6ea77ca669358?s=128&d=identicon&r=PG&f=1", "display_name": "Gazza732", "link": "https://stackoverflow.com/users/7231333/gazza732"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4369, "favorite_count": 0, "accepted_answer_id": 40898217, "answer_count": 1, "score": 1, "last_activity_date": 1480540346, "creation_date": 1480539876, "last_edit_date": 1480540234, "question_id": 40898165, "link": "https://stackoverflow.com/questions/40898165/why-am-i-getting-an-assertion-error-on-this-python-code", "title": "Why am I getting an Assertion Error on this Python code?", "body": "<p>I have a function written here:</p>\n\n<pre><code>def addItem(aBookcase, name, mediaType):\n    \"\"\"\n    Returns False if aBookcase is full, otherwise returns True and \n    adds item of given name and mediaType to aBookcase.\n    \"\"\"\n    pass\n    emptySpacesBefore = aBookcase.getEmptySpaces()\n    if aBookcase.getEmptySpaces() == 0:\n        added = False\n        return added\n    else:\n        position = findSpace(aBookcase)\n        aBookcase.setName(*position, name=name)\n        aBookcase.setType(*position, mediaType=mediaType)\n        added = True\n        emptySpacesAfter = aBookcase.getEmptySpaces()\n    assert added is True, \"No free positions\"\n    assert emptySpacesAfter &lt; emptySpacesBefore, \"Same amount of empty spaces\"\n    assert aBookcase.getName(*position) is name, \"Error with name\"\n    assert aBookcase.getType(*position) is mediaType, \"Error with media type\"\n</code></pre>\n\n<p>Yet when I go to test the function with this line of code:</p>\n\n<pre><code>assert addItem(small, \"Algorhythms, date structures and compatibility\", BOOK)\n</code></pre>\n\n<p>I get an 'AssertionError' as shown here:</p>\n\n<p><a href=\"https://i.stack.imgur.com/G15LR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G15LR.png\" alt=\"Screenshot of &#39;AssertionError&#39;\"></a></p>\n\n<p>So if I'm right, it means I'm not handling it but I'm not sure how or why? Is it something wrong with my code? Something missing? etc. </p>\n"}, {"tags": ["python", "matplotlib", "pygame"], "comments": [{"owner": {"reputation": 13, "user_id": 6139213, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/5fedf.jpg?s=128&g=1", "display_name": "Diptanil Roy", "link": "https://stackoverflow.com/users/6139213/diptanil-roy"}, "reply_to_user": {"reputation": 2788, "user_id": 4139024, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/qOcL9.jpg?s=128&g=1", "display_name": "blckbird", "link": "https://stackoverflow.com/users/4139024/blckbird"}, "edited": false, "score": 0, "creation_date": 1480540125, "post_id": 40898146, "comment_id": 69010193, "body": "I have a code which can plot it separately. I frankly couldn&#39;t figure out a way to plot it in the same window. @blckbird"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1480541642, "post_id": 40898146, "comment_id": 69011020, "body": "Are you explicitely asking about matplotlib here? Matplotlib has several backends, to PyQt/PySide or Tkinter. So once you find a way to include your pygame into one of them, it&#39;s easy. I&#39;m not sure however, if integration is possible. There are some questions about it, <a href=\"http://stackoverflow.com/questions/21645577/integrate-pygame-window-with-gui\">here</a> or <a href=\"http://stackoverflow.com/questions/38280057/how-to-integrate-pygame-and-pyqt4\">here</a>. At the end, it might just be easier to build the histogram from scratch in pygame (this is only a few bars next to each other)."}, {"owner": {"reputation": 13, "user_id": 6139213, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/5fedf.jpg?s=128&g=1", "display_name": "Diptanil Roy", "link": "https://stackoverflow.com/users/6139213/diptanil-roy"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1480570749, "post_id": 40898146, "comment_id": 69019839, "body": "@ImportanceOfBeingErnest Thanks, that would help. This is what we are employing now."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1480590826, "post_id": 40898146, "comment_id": 69030631, "body": "for Pygame it aways one window so there is no difference if you draw only simulation or simulation with histogram - you have to do it in one mainloop."}], "answers": [{"tags": [], "owner": {"reputation": 611, "user_id": 3280683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a212e92df8d44a924630269c625d458?s=128&d=identicon&r=PG&f=1", "display_name": "koshy george", "link": "https://stackoverflow.com/users/3280683/koshy-george"}, "is_accepted": true, "score": 0, "last_activity_date": 1480805463, "last_edit_date": 1480805463, "creation_date": 1480796446, "answer_id": 40952107, "question_id": 40898146, "link": "https://stackoverflow.com/questions/40898146/i-want-to-dynamically-plot-a-histogram-in-the-pygame-window-itself-where-i-am-sh/40952107#40952107", "title": "I want to dynamically plot a histogram in the pygame window itself where I am showing an animation. Is there any possible way for the same?", "body": "<h3>Using custom ipywidget to display incremental simulation image display</h3>\n\n<p>I have been using <a href=\"http://jupyter.org/\" rel=\"nofollow noreferrer\">jupyter</a> technology for all my needs to displaying results from simulations, and I have had reasonable succeesses. Here is what I would do in your case.</p>\n\n<p>I am not an expert at the capabilities of pygame. Looks like in each loop, you are running a simulation step, get the simulation state, and feed it to the pygame scene building to update and render the state for that step (loop). </p>\n\n<p>Assume that, <code>MyPyGameRenderer</code> is your python class object whose <code>MyPyGameRenderer.produce_rendering( simul_state=None)</code> is the one that cause the rendering. I would alter this routine as follows</p>\n\n<pre><code>class MyPyGameRenderer(object)        \n    def produce_rendering_as_a_png_img(self, simul_state=None):\n        myRenderPngByteData=None\n        #using pygame, interpret the simulation state  and produce rendering\n        #as a png  image byte data and set it to myRenderPngByteData\n        return myRenderPngByteData\n</code></pre>\n\n<p>I would install jupyter, make a notebook with python2.7 kernel, and put the above code, and the code for simulation there, and show my png image produced.</p>\n\n<p>If what I said above is what you are doing and your objective is to arrange GUI elements, (in your case it is displaying two windows side by side), I would be tempted to use <a href=\"https://github.com/ipython/ipywidgets\" rel=\"nofollow noreferrer\">ipywidgets</a>. ipywidgets enable you in some rudimentary way to assemble GUI elements. The GUI composition capabilities of ipywidgets are cruder than a sophisticated javascript renderings of GUI elements that you see in a webpage, but in my experience they are sufficient for demonstrating scientific results.  Here are the steps that I would do.</p>\n\n<p>In achieving what you are saying, for each simulation step, I would still use pygame to do the scene compositing and rendering.</p>\n\n<p>I would construct a <a href=\"https://ipywidgets.readthedocs.io/en/latest/examples/Widget%20Custom.html\" rel=\"nofollow noreferrer\">custom ipywidget</a> called <code>MyCustomIncrementalImageWidget</code> with a value element which is supposed to  hold a png as a <a href=\"https://en.wikipedia.org/wiki/Data_URI_scheme\" rel=\"nofollow noreferrer\">dataurl</a>  image to display. The rendering routine of the custom ipywidget, just displays the png image which is set as a <a href=\"https://en.wikipedia.org/wiki/Data_URI_scheme\" rel=\"nofollow noreferrer\">dataurl</a>. I can display any random png image in my <code>MyCustomIncrementalImageWidget</code> as follows</p>\n\n<pre><code>import base64     \n#read a random png image and set its byte-data here\nmy_random_png_img_byte_data = None  \n\nmyImage = MyCustomIncrementalImageWidget()\ndataurl = \"data:image/png;base64\" + base64.b64encode(my_random_png_img_byte_data\nmyImage.value = dataurl\ndisplay(myImage)\n</code></pre>\n\n<p>Now the above code will show your png image in the ipywidget framework. You can have the following advantages. </p>\n\n<ol>\n<li><p>You can compose this myImage with other extensive GUI elements available from <a href=\"https://github.com/ipython/ipywidgets\" rel=\"nofollow noreferrer\">ipywidget</a> framework and construct more complex GUI here. In your case, I would have two instances of <code>MyCustomIncrementalImageWidget</code>-es one for holding the rendering of the scene and the other for holding the histogram.\nYou can compose these two custom ipywidet-s using <code>widget.HBox</code>, which should render them horizontally side by side.</p></li>\n<li><p>You need only one call for the  display of your GUI elements. And this can be outside your simulation loop. In short, the GUI display is detached from your simulation code, All you need to do in your simulation step is to update the <code>value</code> element of each of the two custom widgets in your simulation step.</p></li>\n</ol>\n\n<p>Putting it together, here is my high level code.</p>\n\n<pre><code>import b64encode\nfrom ipywidgets import widgets\n\nclass MyCustomIncrementalImageWidget(widgets.DOMWidget):\n    #your implementation of custom ipywidget\n    pass\n\n\ndef get_dataurl_from_imagedata(img_png_byte_data=None):\n    dataurl = \"data:image/png;base64\" + base64.b64encode(img_png_byte_data)\n    return dataurl\n\nclass MyPyGameRenderer(object)        \n    def produce_rendering_as_a_png_img(self, simul_state=None):\n        myRenderPngByteData=None\n        #using pygame, interpret the simulation state  and produce rendering\n        #as a png image and set the byte-data to myRenderPngByteData\n        return myRenderPngByteData\n\n    def produce_histogram_as_a_png_img(self,  simul_state=None):\n        myHistPngByteData=None\n        #interpret the simulation data and produce the histigram as a png image\n        # set the image byte-data to myHistPngByteData\n        return myHistPngByteData\n\n    def update(self, simul_state=None):\n        r=self.produce_rendering_as_a_png_img(simul_state=simul_state)\n        h=self.produce_histogram_as_a_png_img(simul_state=simul_state)\n        return r, h\n\n\nmy_renderer=MyPyGameRenderer()\nmy_collision_render_widget=MyCustomIncrementalImageWidget()\nmy_histogram_widget=MyCustomIncrementalImageWidget()\ntop_level_hbox=widgets.HBox(children=tuple([my_collision_render_widget, \nmy_histogram_widget]))\n</code></pre>\n\n<p>My simulation code will be as follows</p>\n\n<pre><code>whle(True):\n    simul_state=None\n    #do your simulation and get simulation state and set it to simul_state\n    r, h= my_pygame_renderer.update(simul_state=simul_state) \n    my_collision_render_widget.value = get_dataurl_from_imagedata(r)\n    my_histogram_widget.value=get_daturl_from_imagedata(h)\n</code></pre>\n\n<p>And wherever I want to display this widget combination, I would do.</p>\n\n<pre><code>from IPython import display\ndisplay(top_level_hbox)\n</code></pre>\n\n<p>Please take a look at my custom ipywidget implementation <a href=\"https://github.com/kgeorge/kgeorge_dpl/blob/master/notebooks/common/utils.ipynb\" rel=\"nofollow noreferrer\">here</a>. My class is called <code>ProgressImageWidget</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 6139213, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/5fedf.jpg?s=128&g=1", "display_name": "Diptanil Roy", "link": "https://stackoverflow.com/users/6139213/diptanil-roy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 40952107, "answer_count": 1, "score": 0, "last_activity_date": 1480805463, "creation_date": 1480539806, "question_id": 40898146, "link": "https://stackoverflow.com/questions/40898146/i-want-to-dynamically-plot-a-histogram-in-the-pygame-window-itself-where-i-am-sh", "title": "I want to dynamically plot a histogram in the pygame window itself where I am showing an animation. Is there any possible way for the same?", "body": "<p>I have a Van der Waal's gas simulation where we are showing real time collisions between gas molecules. I am doing that using Pygame and it works fine. However, I want one half of the Pygame window to show the real time collisions while the other half plots a dynamic histogram for every time step. Till now, I haven't come across any such code which allows plotting in the same Pygame window where some other simulation is going on.</p>\n"}, {"tags": ["python", "file", "csv", "python-3.5"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 4, "creation_date": 1480539861, "post_id": 40898142, "comment_id": 69010062, "body": "<code>for line in range(1900, 1908):</code>... I don&#39;t think you want to name this value <code>line</code> (It overwrites <code>line in all_words_csv</code>)"}, {"owner": {"reputation": 29, "user_id": 6186171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-0e0g-vbaduA/AAAAAAAAAAI/AAAAAAAAAQY/LiKEI7GTFSk/photo.jpg?sz=128", "display_name": "tokyolerd", "link": "https://stackoverflow.com/users/6186171/tokyolerd"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1480540717, "post_id": 40898142, "comment_id": 69010520, "body": "Gotcha. Now it makes sense. Sorry, still messing around with Python"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 6186171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-0e0g-vbaduA/AAAAAAAAAAI/AAAAAAAAAQY/LiKEI7GTFSk/photo.jpg?sz=128", "display_name": "tokyolerd", "link": "https://stackoverflow.com/users/6186171/tokyolerd"}, "edited": false, "score": 0, "creation_date": 1480540785, "post_id": 40898192, "comment_id": 69010568, "body": "Interesting. But how about, for example, if I do this:  for line in all_words_csv:     if(line[0] == name):         for line[1] in range(1900, 1908):             print(line[2])"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 29, "user_id": 6186171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-0e0g-vbaduA/AAAAAAAAAAI/AAAAAAAAAQY/LiKEI7GTFSk/photo.jpg?sz=128", "display_name": "tokyolerd", "link": "https://stackoverflow.com/users/6186171/tokyolerd"}, "edited": false, "score": 0, "creation_date": 1480542860, "post_id": 40898192, "comment_id": 69011634, "body": "I don&#39;t think <code>line[1] in range</code> is valid syntax"}], "tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": true, "score": 2, "last_activity_date": 1480539995, "creation_date": 1480539995, "answer_id": 40898192, "question_id": 40898142, "link": "https://stackoverflow.com/questions/40898142/python-error-int-object-is-not-subscriptable/40898192#40898192", "title": "Python Error: int object is not subscriptable", "body": "<p>You overwrote the <code>line</code> value with the year range. </p>\n\n<p>Without seeing your file, I think you were going for something like this </p>\n\n<pre><code>name = \"Art\"\nfor line in all_words_csv:\n    if(line[0] == name):\n        for year in range(1900, 1908):\n            if str(year) == line[2]:\n                print(line[2])\n</code></pre>\n\n<p>Or possibly </p>\n\n<pre><code>name = \"Art\"\nfor line in all_words_csv:\n    if(line[0] == name):\n        if line[2] in map(str, range(1900, 1908))\n            print(line[2])\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6186171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-0e0g-vbaduA/AAAAAAAAAAI/AAAAAAAAAQY/LiKEI7GTFSk/photo.jpg?sz=128", "display_name": "tokyolerd", "link": "https://stackoverflow.com/users/6186171/tokyolerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "closed_date": 1480583630, "accepted_answer_id": 40898192, "answer_count": 1, "score": 0, "last_activity_date": 1480541060, "creation_date": 1480539785, "last_edit_date": 1480541060, "question_id": 40898142, "link": "https://stackoverflow.com/questions/40898142/python-error-int-object-is-not-subscriptable", "closed_reason": "Not suitable for this site", "title": "Python Error: int object is not subscriptable", "body": "<p>I was currently messing around with two CSV files. Basically, my goal is to get the values from the third column of the CSV file, only if the first column matches the name, and if the second column matches the date (Will take all from a start date to an end date). I've been testing ways to do it, but I don't quite get my answer since I keep getting the same error.</p>\n\n<p>Here is my current attempt:</p>\n\n<pre><code>name = \"Art\"\nfor line in all_words_csv:\n    if(line[0] == name):\n        for line in range(1900, 1908):\n            print(line[2])\n</code></pre>\n\n<p>Currently in Python 3.5</p>\n\n<p>Thanks.</p>\n\n<p>Edit: I'm expecting this piece to show me all the values in column 3, but the numbers are too big to be true:</p>\n\n<pre><code>for line in all_words_csv:\nif(line[0] == name):\n    for line[1] in range(1900, 1908):\n        print(line[2])\n</code></pre>\n"}, {"tags": ["python", "parsing"], "comments": [{"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 2, "creation_date": 1480540628, "post_id": 40898140, "comment_id": 69010466, "body": "Could you show the rest of your code - do you actually have access to the cursor or the exception instance itself? Thanks."}, {"owner": {"reputation": 2631, "user_id": 1202834, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/518724a126e37579e4d114eddb0bc5c9?s=128&d=identicon&r=PG", "display_name": "aquil.abdullah", "link": "https://stackoverflow.com/users/1202834/aquil-abdullah"}, "edited": false, "score": 0, "creation_date": 1480541125, "post_id": 40898140, "comment_id": 69010750, "body": "What string are you trying to parse? Are you actually trying to parse the message in the EntryError object above?"}], "answers": [{"tags": [], "owner": {"reputation": 112, "user_id": 6861038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4def3fb09589b4616bd115b58687576?s=128&d=identicon&r=PG&f=1", "display_name": "Stacktrace", "link": "https://stackoverflow.com/users/6861038/stacktrace"}, "is_accepted": false, "score": 1, "last_activity_date": 1480544705, "creation_date": 1480544705, "answer_id": 40899376, "question_id": 40898140, "link": "https://stackoverflow.com/questions/40898140/parse-sql-queries-in-python/40899376#40899376", "title": "parse sql queries in python", "body": "<p>You can use regular expressions.</p>\n\n<pre><code>import re\n\n...\n\nexcept exception.EntryError as e:\n    print re.search(\"\\[parameters: \\('([^']+)\", str(e)).group(1)\n</code></pre>\n\n<p>This would search the exception string for the first occurrence of <code>[parameters: ('</code> and start matching from that point until it hits a <code>'</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 7233080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18574ab0efcfae766e110311af007e53?s=128&d=identicon&r=PG&f=1", "display_name": "ayonpyth", "link": "https://stackoverflow.com/users/7233080/ayonpyth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1480545499, "creation_date": 1480539780, "last_edit_date": 1480545499, "question_id": 40898140, "link": "https://stackoverflow.com/questions/40898140/parse-sql-queries-in-python", "title": "parse sql queries in python", "body": "<p>I want to be able to take a string like below and pull out the first parameter (<code>id</code>) and then use that to print it out. I have been looking into split for python, but I usually have to split 2 or 3 times before getting something usable. </p>\n\n<p>Here is an example of the strings I am trying to parse:</p>\n\n<pre><code>EntryError(u\"(sqlite3.IntegrityError) UNIQUE constraint failed:\nrole.name, role.domain_id [SQL: u'INSERT INTO table1 (id, name, \ndomain_id, extra) VALUES (?, ?, ?, ?)'] [parameters: ('id', \n'fake1name', '&lt;&lt;null&gt;&gt;', '{}')]\",)\n</code></pre>\n\n<p>I have tries things like:</p>\n\n<pre><code>e = e.split(\"\\'\")\ne = e.split(\",\")\n</code></pre>\n\n<p>But this gives me weird strings that have to further be parsed. Is there an easier way to always pull the <code>id</code> from <code>\"[parameters: ('id', 'fake1name', '&lt;&lt;null&gt;&gt;', '{}')]\"</code>?</p>\n\n<p>Here's the code I have:</p>\n\n<pre><code>except exception.EntryError as e:   \n\n    query = str(e)\n    # example of me using split to try and reduce the string\n    parsedstr = query.split(\"[\")\n    parsedstr = parsedstr.split(\"\\'\")\n\n    # This will give me id like I want but it doesn't seem efficient\n    # prints: id\n    print parsedstr[1]\n</code></pre>\n"}, {"tags": ["python", "html", "email", "mailgun"], "comments": [{"owner": {"reputation": 480, "user_id": 3612251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5EOLq.jpg?s=128&g=1", "display_name": "eighilaza", "link": "https://stackoverflow.com/users/3612251/eighilaza"}, "edited": false, "score": 0, "creation_date": 1555706038, "post_id": 40898132, "comment_id": 98209374, "body": "I have kind of the same issue. Have you figured out a solution? Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 754432, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/caad1763943a2ecb5c858c10b51da579?s=128&d=identicon&r=PG&f=1", "display_name": "lalilulelo", "link": "https://stackoverflow.com/users/754432/lalilulelo"}, "is_accepted": false, "score": 0, "last_activity_date": 1489307876, "creation_date": 1489307876, "answer_id": 42745381, "question_id": 40898132, "link": "https://stackoverflow.com/questions/40898132/mailgun-python-html-templates-not-working/42745381#42745381", "title": "mailgun python html templates not working", "body": "<p>Not sure what framework you are using but in Pyramid, you would have something along this lines.</p>\n\n<pre><code>from pyramid.renderers import render\nimport requests\n\nix_html = render(\"billing.html\", {\"l_name\": lname, \"f_name\": fname})\ndef send_simple_message():\n     return requests.post(\n    \"https://api.mailgun.net/v3/_______.mailgun.org/messages\",\n    auth=(\"api\", \"______\"),\n    data={\"from\": \"Mailgun Sandbox &lt;____&gt;\",\n          \"to\": \"____\",\n          \"subject\": \"Hello\",\n          \"html\": ix_html})\n\nsend_simple_message()\n</code></pre>\n\n<p>The <a href=\"http://docs.pylonsproject.org/projects/pyramid/en/latest/api/renderers.html#pyramid.renderers.render\" rel=\"nofollow noreferrer\"><code>render</code></a> method needs atleast 2 parameters i.e. template and context information <code>render(template, context, request=None)</code></p>\n"}], "owner": {"reputation": 31, "user_id": 5310264, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206288923000224/picture?type=large", "display_name": "Samuel Krut", "link": "https://stackoverflow.com/users/5310264/samuel-krut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 770, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489307876, "creation_date": 1480539742, "question_id": 40898132, "link": "https://stackoverflow.com/questions/40898132/mailgun-python-html-templates-not-working", "title": "mailgun python html templates not working", "body": "<p>I'm trying to send html emails with mailgun and python. For testing purposes I downloaded the mailgun template emails from <a href=\"http://blog.mailgun.com/transactional-html-email-templates/\" rel=\"nofollow noreferrer\">http://blog.mailgun.com/transactional-html-email-templates/</a>, but when I send the inlined version there is a huge gap at the start of the email in both my mobile browser and in apple mail on my desktop. </p>\n\n<pre><code>import requests\n ix_html = open(\"billing.html\", \"r\")\n def send_simple_message():\n     return requests.post(\n    \"https://api.mailgun.net/v3/_______.mailgun.org/messages\",\n    auth=(\"api\", \"______\"),\n    data={\"from\": \"Mailgun Sandbox &lt;____&gt;\",\n          \"to\": \"____\",\n          \"subject\": \"Hello\",\n          \"html\": ix_html})\n\nsend_simple_message()\n</code></pre>\n\n<p>I think the problem might be how I am reading the html. I'd like to get this working first with the verified working templates before I proceed with making my own. \nThanks</p>\n"}, {"tags": ["python", "sockets", "network-programming", "client-server"], "answers": [{"tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1480540010, "creation_date": 1480540010, "answer_id": 40898201, "question_id": 40898095, "link": "https://stackoverflow.com/questions/40898095/client-server-messaging-gives-error-python-socket-programming/40898201#40898201", "title": "Client-Server messaging gives error (Python - socket programming)", "body": "<p>In Python2 use <code>raw_input</code> instead of <code>input</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 5242689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0edcd87796eff0601b7c6cdcbec395f9?s=128&d=identicon&r=PG&f=1", "display_name": "GSalazar", "link": "https://stackoverflow.com/users/5242689/gsalazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1480540237, "creation_date": 1480540237, "answer_id": 40898254, "question_id": 40898095, "link": "https://stackoverflow.com/questions/40898095/client-server-messaging-gives-error-python-socket-programming/40898254#40898254", "title": "Client-Server messaging gives error (Python - socket programming)", "body": "<p>You should use the <code>raw_input</code> instead of <code>input</code> since <code>raw_input</code> will capture your input and convert it to the proper type. When using <code>input</code> you should add quotes around the input.</p>\n\n<p>You can check this in the python docs: <a href=\"https://docs.python.org/2/library/functions.html#raw_input\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/functions.html#raw_input</a></p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 7662839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25391bf363e895ea26e1dea464ff9146?s=128&d=identicon&r=PG&f=1", "display_name": "scoder", "link": "https://stackoverflow.com/users/7662839/scoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1495020735, "creation_date": 1495020735, "answer_id": 44023663, "question_id": 40898095, "link": "https://stackoverflow.com/questions/40898095/client-server-messaging-gives-error-python-socket-programming/44023663#44023663", "title": "Client-Server messaging gives error (Python - socket programming)", "body": "<p>As far as the code is concerned, the only change you need to make here is in server code. Replace c.close() with s.close() as c is a connection variable whereas s is the socket of server according to your code.</p>\n\n<p>I have made your code run, after making the change it runs as expected.I executed it in Python 3.</p>\n\n<p>The server code is here:</p>\n\n<pre><code>import socket\n\ndef Main():\n    host = \"127.0.0.1\"       # supply different hostname instead of socket.gethostname()\n    port = 5000\n\n    s = socket.socket()\n    s.bind((host, port))\n\n    s.listen(1)\n    c, addr = s.accept()\n    print(\"Connection from: \"+str(addr))\n    while True:\n        data = c.recv(1024).decode('utf-8')\n        if not data:\n            break\n        print(\"From connected user: \"+data)\n        data = data.upper()\n        print(\"Sending: \"+data)\n        c.send(data.encode('utf-8'))\n    s.close()           # it is s which indicates socket\n\nif __name__ == '__main__':\n    Main()\n</code></pre>\n\n<p>And the client code is as given by you:</p>\n\n<pre><code>import socket\n\ndef Main():\n# here, client is using the hostname whereas you need to give different \n# hostname for the server (127.0.0.1 for example) otherwise the code doesn't \n# work.You can do the reverse as well.\n    host = socket.gethostname()\n    port = 5000\n\n    s = socket.socket()\n    s.connect((host, port))\n\n    message = input(\"-&gt; \")\n    while message != 'q':\n        s.send(message.encode('utf-8'))\n        data = s.recv(1024).decode('utf-8')\n        print(\"Recieved from server: \" + data)\n        message = input(\"-&gt; \")\n    s.close()\n\nif __name__ == '__main__':\n    Main()\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 7222556, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/aaa19026cf2b62635ba99759394a4e18?s=128&d=identicon&r=PG&f=1", "display_name": "Nebih Ba\u015faran", "link": "https://stackoverflow.com/users/7222556/nebih-ba%c5%9faran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1154, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1495020735, "creation_date": 1480539545, "question_id": 40898095, "link": "https://stackoverflow.com/questions/40898095/client-server-messaging-gives-error-python-socket-programming", "title": "Client-Server messaging gives error (Python - socket programming)", "body": "<p>I am trying to write a simple client-server program using python (not python3) and whenever I type a message to send it gives me various errors such as:</p>\n\n<p><em>File \"\", line 1\n    hello my name is darp\n           ^\nSyntaxError: invalid syntax</em></p>\n\n<p>OR</p>\n\n<p><em>File \"\", line 1, in \nNameError: name 'hello' is not defined</em></p>\n\n<p>OR</p>\n\n<p><em>File \"\", line 1\n    hello world\n              ^\nSyntaxError: unexpected EOF while parsing</em></p>\n\n<p>Here is the server code:</p>\n\n<pre><code>import socket\n\ndef Main():\n    host = socket.gethostname()\n    port = 5000\n\n    s = socket.socket()\n    s.bind((host, port))\n\n    s.listen(1)\n    c, addr = s.accept()\n    print(\"Connection from: \"+str(addr))\n    while True:\n        data = c.recv(1024).decode('utf-8')\n        if not data:\n            break\n        print(\"From connected user: \"+data)\n        data = data.upper()\n        print(\"Sending: \"+data)\n        c.send(data.encode('utf-8'))\n    c.close()\n\nif __name__ == '__main__':\n    Main()\n</code></pre>\n\n<p>AND here is the client code</p>\n\n<pre><code>import socket\n\ndef Main():\n    host = socket.gethostname()\n    port = 5000\n\n    s = socket.socket()\n    s.connect((host, port))\n\n    message = input(\"-&gt; \")\n    while message != 'q':\n        s.send(message.encode('utf-8'))\n        data = s.recv(1024).decode('utf-8')\n        print(\"Recieved from server: \" + data)\n        message = input(\"-&gt; \")\n    s.close()\n\nif __name__ == '__main__':\n    Main()\n</code></pre>\n\n<p>Even though I can create this connection, the problem occurs after I type the message. Any help would be appreciated, thanks!</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 925, "user_id": 6476545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d8ac5ad896ea48d92ab8cae28ad8bd6?s=128&d=identicon&r=PG&f=1", "display_name": "eddiem", "link": "https://stackoverflow.com/users/6476545/eddiem"}, "edited": false, "score": 0, "creation_date": 1480539304, "post_id": 40897973, "comment_id": 69009747, "body": "You&#39;re going to need something a bit more complicated than a simple regular expression if you&#39;re intending to summarize results and group them by <code>CustomerId</code>."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1480539497, "post_id": 40897973, "comment_id": 69009856, "body": "The regex to catch id and size would be <code>&#47;CustomerId:(\\d+).*Size:(\\d+)&#47;</code>."}, {"owner": {"reputation": 39, "user_id": 5834305, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f8732f6f40111a3025791a32e1be2667?s=128&d=identicon&r=PG&f=1", "display_name": "Somanath Patil", "link": "https://stackoverflow.com/users/5834305/somanath-patil"}, "reply_to_user": {"reputation": 925, "user_id": 6476545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d8ac5ad896ea48d92ab8cae28ad8bd6?s=128&d=identicon&r=PG&f=1", "display_name": "eddiem", "link": "https://stackoverflow.com/users/6476545/eddiem"}, "edited": false, "score": 0, "creation_date": 1480539522, "post_id": 40897973, "comment_id": 69009873, "body": "@eddiem, How about extracting Customer id and Size and save them in different lists and after using Dictionary (Key,Pair). but just wondering if we can use regular expressions to achieve the solution"}, {"owner": {"reputation": 1027, "user_id": 3761174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPx5J.jpg?s=128&g=1", "display_name": "Dezza", "link": "https://stackoverflow.com/users/3761174/dezza"}, "edited": false, "score": 3, "creation_date": 1480539614, "post_id": 40897973, "comment_id": 69009925, "body": "Please show what you have already tried that is not working. We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Stack Overflow is not a code writing service!"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1480540108, "post_id": 40897973, "comment_id": 69010188, "body": "If you&#39;re going to pass Perl / PCRE regex to <code>grep</code>, you need to use <code>-P</code>."}, {"owner": {"reputation": 39, "user_id": 5834305, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f8732f6f40111a3025791a32e1be2667?s=128&d=identicon&r=PG&f=1", "display_name": "Somanath Patil", "link": "https://stackoverflow.com/users/5834305/somanath-patil"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1480540397, "post_id": 40897973, "comment_id": 69010342, "body": "@ikegami, I know its a perl, sorry i just realized i have tagged Perl also( thinking that they know better Linux regular expressions) removing Perl Tag now."}, {"owner": {"reputation": 39, "user_id": 5834305, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f8732f6f40111a3025791a32e1be2667?s=128&d=identicon&r=PG&f=1", "display_name": "Somanath Patil", "link": "https://stackoverflow.com/users/5834305/somanath-patil"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1480543393, "post_id": 40897973, "comment_id": 69011883, "body": "@PerlDuck,ikegami,Dezza, Guys i have done research and posted here for different solution, you might have irritated may be because my edit skills, i am very new here. i will get know the edit techniques make it proper next time. excuse me for that. my question  got -4 :("}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5834305, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f8732f6f40111a3025791a32e1be2667?s=128&d=identicon&r=PG&f=1", "display_name": "Somanath Patil", "link": "https://stackoverflow.com/users/5834305/somanath-patil"}, "edited": false, "score": 0, "creation_date": 1480540946, "post_id": 40898338, "comment_id": 69010673, "body": "Eddiem@  Thanks a lot"}], "tags": [], "owner": {"reputation": 925, "user_id": 6476545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d8ac5ad896ea48d92ab8cae28ad8bd6?s=128&d=identicon&r=PG&f=1", "display_name": "eddiem", "link": "https://stackoverflow.com/users/6476545/eddiem"}, "is_accepted": false, "score": 3, "last_activity_date": 1480540562, "creation_date": 1480540562, "answer_id": 40898338, "question_id": 40897973, "link": "https://stackoverflow.com/questions/40897973/regular-expression-to-extract-only-customerid-and-data-bytes-and-save-in-list/40898338#40898338", "title": "regular expression to extract only Customerid and Data (bytes) and save in list?", "body": "<pre><code>#!/usr/bin/python\n\nimport re\n\nres = dict()\n\ndata = open(\"log.txt\").readlines()\n\nfor line in data:\n    m = re.search(\"CustomerId:([0-9]+).*Size:([0-9]+)\", line)\n    cid = int(m.group(1))\n    siz = int(m.group(2))\n    if not res.has_key(cid):\n        res[cid] = 0\n    res[cid] += siz\n\nfor cust in res.keys():\n    print \"Customer ID %d - %d bytes\" % (cust, res[cust])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5496, "user_id": 2661491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/829f8aba5815197b56359be148cd0a13?s=128&d=identicon&r=PG", "display_name": "evan.oman", "link": "https://stackoverflow.com/users/2661491/evan-oman"}, "reply_to_user": {"reputation": 39, "user_id": 5834305, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f8732f6f40111a3025791a32e1be2667?s=128&d=identicon&r=PG&f=1", "display_name": "Somanath Patil", "link": "https://stackoverflow.com/users/5834305/somanath-patil"}, "edited": false, "score": 1, "creation_date": 1480544842, "post_id": 40898345, "comment_id": 69012506, "body": "@SomanathPatil <a href=\"http://stackoverflow.com/help/someone-answers\">FYI</a>: &quot;Please do not add a comment on your question or on an answer to say &quot;Thank you&quot;. Comments are meant for requesting clarification, leaving constructive criticism, or adding relevant but minor additional information \u2013 not for socializing. If you want to say &quot;thank you,&quot; vote on or accept that person&#39;s answer, or simply pay it forward by providing a great answer to someone else&#39;s question.&quot;"}, {"owner": {"reputation": 5496, "user_id": 2661491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/829f8aba5815197b56359be148cd0a13?s=128&d=identicon&r=PG", "display_name": "evan.oman", "link": "https://stackoverflow.com/users/2661491/evan-oman"}, "reply_to_user": {"reputation": 39, "user_id": 5834305, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f8732f6f40111a3025791a32e1be2667?s=128&d=identicon&r=PG&f=1", "display_name": "Somanath Patil", "link": "https://stackoverflow.com/users/5834305/somanath-patil"}, "edited": false, "score": 0, "creation_date": 1480544910, "post_id": 40898345, "comment_id": 69012545, "body": "(use upvotes instead of thank yous if you liked an answer, you can upvote multiple answers)"}], "tags": [], "owner": {"reputation": 5496, "user_id": 2661491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/829f8aba5815197b56359be148cd0a13?s=128&d=identicon&r=PG", "display_name": "evan.oman", "link": "https://stackoverflow.com/users/2661491/evan-oman"}, "is_accepted": false, "score": 0, "last_activity_date": 1480540596, "creation_date": 1480540596, "answer_id": 40898345, "question_id": 40897973, "link": "https://stackoverflow.com/questions/40897973/regular-expression-to-extract-only-customerid-and-data-bytes-and-save-in-list/40898345#40898345", "title": "regular expression to extract only Customerid and Data (bytes) and save in list?", "body": "<p>Here is what I would do:</p>\n\n<pre><code>In [1]: import collections, re\n\nIn [2]: d = collections.defaultdict(list)\n\nIn [3]: string = \"01-01-2012 01:13:36 Blah blah : blah CustomerId:1234 downloaded Blah Size:5432 bytes Carrier:Company-A\\n01-01-2012 01:13:36 Blah blah : blah CustomerId:1237 downloaded Bla\n    ...: h Size:5432 bytes Carrier:Company-B\"\n\nIn [4]: for cust_id, sz in re.findall(r\".*CustomerId\\:(\\d+).*Size:(\\d+)\", string):\n    ...:     d[cust_id].append(sz)\n    ...:\n\nIn [5]: d\nOut[5]: defaultdict(list, {'1234': ['5432'], '1237': ['5432']})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 1, "last_activity_date": 1480541609, "creation_date": 1480541609, "answer_id": 40898630, "question_id": 40897973, "link": "https://stackoverflow.com/questions/40897973/regular-expression-to-extract-only-customerid-and-data-bytes-and-save-in-list/40898630#40898630", "title": "regular expression to extract only Customerid and Data (bytes) and save in list?", "body": "<p>For this example, I used your two lines of input data pasted three times in the <code>data.txt</code> input test file:</p>\n\n<p>Python:</p>\n\n<pre><code>import re\n\ndata = {}\nregex = re.compile(r'CustomerId:(\\d+).*?Size:(\\d+)');\n\nwith open('data.txt') as fh:\n    for line in fh:\n        m = regex.search(line)\n\n        if (m.group(1) and m.group(2)):\n\n            cust = m.group(1)\n            size = m.group(2)\n\n            try:\n                data[cust] += int(size) \n            except KeyError:\n                data[cust] = int(size)\n\nprint(str(data))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'1234': 16296, '1237': 16296}\n</code></pre>\n\n<p>Perl:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Data::Dumper;\n\nopen my $fh, '&lt;', 'data.txt' or die $!;\n\nmy %data;\n\nwhile (my $line = &lt;$fh&gt;){\n    if (my ($cust, $size) = $line =~ /CustomerId:(\\d+).*?Size:(\\d+)/){\n        $data{$cust} += $size;\n    }\n}\n\nprint Dumper \\%data;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n      '1234' =&gt; 16296,\n      '1237' =&gt; 16296\n};\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5834305, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f8732f6f40111a3025791a32e1be2667?s=128&d=identicon&r=PG&f=1", "display_name": "Somanath Patil", "link": "https://stackoverflow.com/users/5834305/somanath-patil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 40898630, "answer_count": 3, "score": -6, "last_activity_date": 1480542864, "creation_date": 1480539107, "last_edit_date": 1480542864, "question_id": 40897973, "link": "https://stackoverflow.com/questions/40897973/regular-expression-to-extract-only-customerid-and-data-bytes-and-save-in-list", "title": "regular expression to extract only Customerid and Data (bytes) and save in list?", "body": "<p>I have the below logs  </p>\n\n<pre><code>01-01-2012 01:13:36 Blah blah : blah CustomerId:1234 downloaded Blah Size:5432 bytes Carrier:Company-A   \n01-01-2012 01:13:36 Blah blah : blah CustomerId:1237 downloaded Blah Size:5432 bytes Carrier:Company-B  \n</code></pre>\n\n<p>Can somebody tell me a regular expression to extract Customer id and Size and save in list and print how much data downloaded by each customer id? I was able to do this using search and Dictionaries in Python. request you guys to provide using regular expressions.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1425, "user_id": 6304349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c4a1ce11469805ba79d576fa2f013c?s=128&d=identicon&r=PG", "display_name": "dorukayhan", "link": "https://stackoverflow.com/users/6304349/dorukayhan"}, "edited": false, "score": 7, "creation_date": 1480539118, "post_id": 40897938, "comment_id": 69009636, "body": "What is the error?"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1480539125, "post_id": 40897938, "comment_id": 69009638, "body": "You need to highlight your code and use the <code>{}</code> button in the future."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 1, "creation_date": 1480539255, "post_id": 40897938, "comment_id": 69009729, "body": "<code>print(sleep(0.5))</code> will print the return value of <code>time.sleep()</code>, which is always <code>None</code>. And remember that <code>sleep()</code> will be evaluated before the <code>print()</code>, so the triple-sleep print is more or less equal to <code>sleep(1.5); print(...)</code>."}, {"owner": {"reputation": 1164, "user_id": 3119546, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d51080abc8a98ac0fce744fcc1f2d2a?s=128&d=identicon&r=PG&f=1", "display_name": "sudobangbang", "link": "https://stackoverflow.com/users/3119546/sudobangbang"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1480539284, "post_id": 40897938, "comment_id": 69009740, "body": "@dhke I think the point of the intermittent sleep(.5) was to simulate a loading animation"}, {"owner": {"reputation": 2936, "user_id": 2451486, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/RzSne.png?s=128&g=1", "display_name": "smoggers", "link": "https://stackoverflow.com/users/2451486/smoggers"}, "edited": false, "score": 2, "creation_date": 1480539325, "post_id": 40897938, "comment_id": 69009762, "body": "you can reduce the length of your code by using Python&#39;s <code>lower()</code> function"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1480539351, "post_id": 40897938, "comment_id": 69009776, "body": "Also if you want to make a database application, you should probably use an actual database to store the information (e.g.: SQLite). And try to avoid copy pasting the same code/information over and over again"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1480539460, "post_id": 40897938, "comment_id": 69009834, "body": "You could save a ridiculous amount of checking for each hyphenation or capitalization of the name by just checking <code>if character.replace(&#39;-&#39;, &#39; &#39;).lower() == &#39;a bomb&#39;:</code> and having a single block to handle it, not four identical blocks with slightly different tests."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1480539483, "post_id": 40897938, "comment_id": 69009849, "body": "1) If you are using Python2 use <code>raw_input()</code>, not <code>input()</code> 2) If the indentation were fixed on the first line, this runs fine."}, {"owner": {"reputation": 877, "user_id": 3084178, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fHQOe.jpg?s=128&g=1", "display_name": "Dr Xorile", "link": "https://stackoverflow.com/users/3084178/dr-xorile"}, "reply_to_user": {"reputation": 2936, "user_id": 2451486, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/RzSne.png?s=128&g=1", "display_name": "smoggers", "link": "https://stackoverflow.com/users/2451486/smoggers"}, "edited": false, "score": 0, "creation_date": 1480539647, "post_id": 40897938, "comment_id": 69009942, "body": "@smoggers is definitely correct. You could even make a small function that uses lower() and gets rid of complicating characters (&quot; &quot;, &quot;-&quot;, &quot;&#39;&quot; etc), so that it&#39;s much more robust. And/or make it look to see whether it&#39;s in a set of names. eg. if character.lower().strip().replace(&quot;-&quot;,&quot;&quot;) in set([&quot;abomb&quot;,&quot;abob&quot;,&quot;abom&quot;]):"}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "reply_to_user": {"reputation": 1164, "user_id": 3119546, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d51080abc8a98ac0fce744fcc1f2d2a?s=128&d=identicon&r=PG&f=1", "display_name": "sudobangbang", "link": "https://stackoverflow.com/users/3119546/sudobangbang"}, "edited": false, "score": 1, "creation_date": 1480539670, "post_id": 40897938, "comment_id": 69009959, "body": "@sudobangbang Yeah, I know, but it doesn&#39;t do that as implemented ;-)."}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1480539678, "post_id": 40897938, "comment_id": 69009961, "body": "A database is probably overkill, but you should at least read up on dictionaries. Create a dictionary whose keys are the characters and whose values are the information such as villain status that you want to return."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "reply_to_user": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1480540109, "post_id": 40897938, "comment_id": 69010189, "body": "@JohnColeman there&#39;s <a href=\"http://marvel.com/comics/characters\" rel=\"nofollow noreferrer\">a lot of marvel characters</a>. If OP really wants to create a full list containing all of them + detailed bio then I don&#39;t think a DB is overkill :)"}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1480540804, "post_id": 40897938, "comment_id": 69010585, "body": "@UnholySheep Good point, but given what OP is currently trying to do, and where they seem to be at in learning Python (or any programming), I think that a DB is overkill. This seems to be a first program, so starting out with dictionaries before learning about databases would make sense. They will likely be forced to scale back some of their ambitions to a smaller set of major characters. Perhaps they could set a goal of giving a version 2 with a snazzy GUI as a follow-up gift in the future."}], "answers": [{"tags": [], "owner": {"reputation": 11435, "user_id": 6328256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PyZe2.png?s=128&g=1", "display_name": "Sash Sinha", "link": "https://stackoverflow.com/users/6328256/sash-sinha"}, "is_accepted": false, "score": 2, "last_activity_date": 1480539945, "last_edit_date": 1480539945, "creation_date": 1480539643, "answer_id": 40898115, "question_id": 40897938, "link": "https://stackoverflow.com/questions/40897938/struggling-to-find-an-error-in-python/40898115#40898115", "title": "Struggling to find an error in python", "body": "<pre><code>from time import sleep\n\nprint (\"Welcome to the Marvel Database please input the name of a marvel character you want to research. Please make sure you type the name as accurately as possible.\")\ncharacter = input().lower()\n\na_bomb_list = [\"a-bomb\", \"a bomb\"]\n\nif character in a_bomb_list:\n    print (\"loading\", sleep(.5), \".\", sleep(.5), \".\", sleep(.5), \".\")\n    print (\"Character found.\")\n    sleep(.5)\n    print (\"Name is A-Bomb.\")\n    sleep(1)\n    print (\"Unknown if they or it are Hero or Villan.\")\n    sleep(1)\n    print (\"No infomation found.\")\n    sleep(1)\n</code></pre>\n\n<p>You do not need to create a separate <code>if</code> for each permutation, the above code works with any capitalization of \"a-bomb\" or \"a bomb\" :)</p>\n"}], "owner": {"reputation": 9, "user_id": 7185685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ecc50e1c97b2639f024b0a54f85ce3e?s=128&d=identicon&r=PG&f=1", "display_name": "J.Winstanley-Withers", "link": "https://stackoverflow.com/users/7185685/j-winstanley-withers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1480552822, "answer_count": 1, "score": 0, "last_activity_date": 1480539945, "creation_date": 1480538967, "last_edit_date": 1480539086, "question_id": 40897938, "link": "https://stackoverflow.com/questions/40897938/struggling-to-find-an-error-in-python", "closed_reason": "Not suitable for this site", "title": "Struggling to find an error in python", "body": "<p>I'm making a birthday present for my friend. I am making a database of every single Marvel Character ever and I have done two of them so far, went to test it and it says error. I have looked all over the code and I have tried a lot but it doesn't seem to be working. Here is the code.</p>\n\n<pre><code>    from time import sleep\n\nprint (\"Welcome to the Marvel Database please input the name of a marvel character you want to research. Please make sure you type the name as accurately as possible.\")\ncharacter = input()\n\nif character == 'A-Bomb':\n    print (\"loading\", sleep(.5), \".\", sleep(.5), \".\", sleep(.5), \".\")\n    print (\"Character found.\")\n    sleep(.5)\n    print (\"Name is A-Bomb.\")\n    sleep(1)\n    print (\"Unknown if they or it are Hero or Villan.\")\n    sleep(1)\n    print (\"No infomation found.\")\n    sleep(1)\n\nelif character == 'a-bomb':\n    print (\"loading\", sleep(.5), \".\", sleep(.5), \".\", sleep(.5), \".\")\n    print (\"Character found.\")\n    sleep(.5)\n    print (\"Name is A-Bomb\")\n    sleep(1)\n    print (\"Unknown if they or it are Hero or Villan.\")\n    sleep(1)\n    print (\"No infomation found\")\n    sleep(1)\n\nelif character == 'a bomb':\n    print (\"loading\", sleep(.5), \".\", sleep(.5), \".\", sleep(.5), \".\")\n    print (\"Character found.\")\n    sleep(.5)\n    print (\"Name is A-Bomb\")\n    sleep(1)\n    print (\"Unknown if they or it are Hero or Villan.\")\n    sleep(1)\n    print (\"No infomation found\")\n    sleep(1)\n\nelif character == 'A-bomb':\n    print (\"loading\", sleep(.5), \".\", sleep(.5), \".\", sleep(.5), \".\")\n    print (\"Character found.\")\n    sleep(.5)\n    print (\"Name is A-Bomb\")\n    sleep(1)\n</code></pre>\n"}, {"tags": ["python", "arrays", "string"], "comments": [{"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 0, "creation_date": 1480538807, "post_id": 40897870, "comment_id": 69009469, "body": "<code>string[a] == string[a+1]</code> is shorter"}, {"owner": {"reputation": 730, "user_id": 6941046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rDqanJg0rQU/AAAAAAAAAAI/AAAAAAAAACg/0Hf929Qb7uk/photo.jpg?sz=128", "display_name": "Elliot Roberts", "link": "https://stackoverflow.com/users/6941046/elliot-roberts"}, "edited": false, "score": 0, "creation_date": 1480538947, "post_id": 40897870, "comment_id": 69009547, "body": "Is your example all that you will be doing? Will you be comparing more than single letter substrings?"}, {"owner": {"reputation": 1, "user_id": 7232894, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kI7nz605kZY/AAAAAAAAAAI/AAAAAAAAASA/TA-uyDLe7W0/photo.jpg?sz=128", "display_name": "will midwood", "link": "https://stackoverflow.com/users/7232894/will-midwood"}, "edited": false, "score": 0, "creation_date": 1480539179, "post_id": 40897870, "comment_id": 69009672, "body": "What i want to do is compare each character to the next in a loop until there isn&#39;t any characters left. In this example, I would want to print hello each time they match."}], "answers": [{"comments": [{"owner": {"reputation": 2395, "user_id": 2182044, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/63cPW.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2182044/daniel"}, "edited": false, "score": 0, "creation_date": 1480539532, "post_id": 40897932, "comment_id": 69009881, "body": "That is why I love programming. You ask five people about a problem and get five different ideas how to solve it! :)"}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": 0, "last_activity_date": 1480538949, "creation_date": 1480538949, "answer_id": 40897932, "question_id": 40897870, "link": "https://stackoverflow.com/questions/40897870/is-there-a-way-to-compare-characters-in-a-string-via-python/40897932#40897932", "title": "Is there a way to compare characters in a string via. python?", "body": "<p>You can use <code>zip</code> to pair up the elements</p>\n\n<pre><code>s = \"GGEZ\"\nfor a, b in zip(*[iter(s)]*2):\n    if a==b:\n        print('Hello')\n</code></pre>\n\n<p>More on this usage of <code>zip</code> <a href=\"https://docs.python.org/3/library/functions.html#zip\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 2395, "user_id": 2182044, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/63cPW.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2182044/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1480539154, "last_edit_date": 1480539154, "creation_date": 1480539040, "answer_id": 40897956, "question_id": 40897870, "link": "https://stackoverflow.com/questions/40897870/is-there-a-way-to-compare-characters-in-a-string-via-python/40897956#40897956", "title": "Is there a way to compare characters in a string via. python?", "body": "<pre><code>string = \"GG EZ abbdff\"\n\nfor i in range(0, len(string), 2):\n    if string[i] == string[i+1]:\n        print(\"characters match\")\n</code></pre>\n\n<p>Create a range of every second character in the string. Iterate over the range and compare character at the index <code>i</code> with the following.</p>\n\n<p>Edit: If your string length is an odd number you run into an out of range exception. I let you figure that one out by yourself :)</p>\n"}], "owner": {"reputation": 1, "user_id": 7232894, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kI7nz605kZY/AAAAAAAAAAI/AAAAAAAAASA/TA-uyDLe7W0/photo.jpg?sz=128", "display_name": "will midwood", "link": "https://stackoverflow.com/users/7232894/will-midwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1480539154, "creation_date": 1480538728, "question_id": 40897870, "link": "https://stackoverflow.com/questions/40897870/is-there-a-way-to-compare-characters-in-a-string-via-python", "title": "Is there a way to compare characters in a string via. python?", "body": "<p>I am wondering if there is a way that I can compare the first letter of the string to the second; then the third to the forth ... etc.\nAt the moment I have this:</p>\n\n<pre><code>a=0\nb=0\nstring = \"GG EZ\"\nif string[a:b] == string[a+1:b+1]:\n    print(\"hello\")\n</code></pre>\n\n<p>It works but is there a more efficient way of doing it?</p>\n"}, {"tags": ["python", "numpy", "argmax"], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 2, "last_activity_date": 1480539049, "last_edit_date": 1480539049, "creation_date": 1480538634, "answer_id": 40897833, "question_id": 40897809, "link": "https://stackoverflow.com/questions/40897809/how-to-find-all-argmax-in-ndarray/40897833#40897833", "title": "How to find all argmax in ndarray", "body": "<p>Use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.argwhere.html\" rel=\"nofollow noreferrer\"><code>np.argwhere</code></a> on <em>max-equality mask</em> -</p>\n\n<pre><code>np.argwhere(a == a.max())\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [552]: a   # Input array\nOut[552]: \narray([[  0.,  20.,  -2.],\n       [  2.,   1.,   0.],\n       [  4.,   3.,  20.]])\n\nIn [553]: a == a.max() # Max equality mask\nOut[553]: \narray([[False,  True, False],\n       [False, False, False],\n       [False, False,  True]], dtype=bool)\n\nIn [554]: np.argwhere(a == a.max()) # array of row, col indices of max-mask\nOut[554]: \narray([[0, 1],\n       [2, 2]])\n</code></pre>\n\n<p>If you are working with floating point numbers, you might want to use some tolerance there. So, with that consideration, you could use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.isclose.html\" rel=\"nofollow noreferrer\"><code>np.isclose</code></a> that has some default absolute and relative tolerance values. This would replace the earlier <code>a == a.max()</code> part, like so -</p>\n\n<pre><code>In [555]: np.isclose(a, a.max())\nOut[555]: \narray([[False,  True, False],\n       [False, False, False],\n       [False, False,  True]], dtype=bool)\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 7086023, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/860fa39dbab2bbf8f1f7376ac8197018?s=128&d=identicon&r=PG&f=1", "display_name": "lizaveta", "link": "https://stackoverflow.com/users/7086023/lizaveta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 0, "accepted_answer_id": 40897833, "answer_count": 1, "score": 2, "last_activity_date": 1480539049, "creation_date": 1480538552, "question_id": 40897809, "link": "https://stackoverflow.com/questions/40897809/how-to-find-all-argmax-in-ndarray", "title": "How to find all argmax in ndarray", "body": "<p>I have a 2 dimensional NumPy ndarray.</p>\n\n<pre><code>array([[  0.,  20.,  -2.],\n   [  2.,   1.,   0.],\n   [  4.,   3.,  20.]])\n</code></pre>\n\n<p>How can I get all indices of the maximum elements? So I would like as output array([0,1],[2,2]).</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1480538691, "post_id": 40897784, "comment_id": 69009414, "body": "Is there a reason you&#39;re breaking up the levels into separate functions per prompt, instead of passing the history into the level and letting the level decide which prompt to display? <code>level4(history): if history = &quot;ABA&quot;...</code>"}, {"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 0, "creation_date": 1480538743, "post_id": 40897784, "comment_id": 69009436, "body": "what exactly is the error or issue you are facing?"}, {"owner": {"reputation": 49, "user_id": 7162898, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8a272e9f91be6efb1452b8503dc93e07?s=128&d=identicon&r=PG&f=1", "display_name": "Carcanken", "link": "https://stackoverflow.com/users/7162898/carcanken"}, "edited": false, "score": 0, "creation_date": 1480538867, "post_id": 40897784, "comment_id": 69009507, "body": "I&#39;m receiving an error saying that choices[0] has no attribute &#39;next branch&#39;. As far as how they are broken up, I&#39;m just trying to follow a planned naming convention with the level names."}], "answers": [{"tags": [], "owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "is_accepted": true, "score": 1, "last_activity_date": 1480539834, "last_edit_date": 1480539834, "creation_date": 1480539505, "answer_id": 40898081, "question_id": 40897784, "link": "https://stackoverflow.com/questions/40897784/finding-class-attribute-from-list-of-initialized-objects/40898081#40898081", "title": "Finding class attribute from list of initialized objects", "body": "<pre><code>def add_choices(self, choices, next_branch):\n        self.choices.append(choices)\n        self.next_branch = next_branch\n</code></pre>\n\n<p><code>self.choices</code> is an array of strings: <code>['CHOICE A','CHOICE B', 'CHOICE C']</code>, which don't have any <code>next_branch</code> attribute.</p>\n\n<p>You're not storing the <code>next_branch</code> with each choice, you're storing it in the base level and just overwriting it every time you add a new choice.</p>\n\n<p>I'd probably change it to:</p>\n\n<pre><code>def add_choices(self, choices, next_branch):\n        self.choices.append((choices, next_branch))\n</code></pre>\n\n<p>then your choice text is at <code>self.choices[0][0], self.choices[1][0], self.choices[2][0]</code> and the next branches are stored at <code>self.choices[0][1], self.choices[1][1], self.choices[2][1]</code></p>\n\n<p>A better option would be to change the level structure so you initialize it as:</p>\n\n<pre><code>level1 = Level(1, 'CHOICE TO GET HERE', 'PROMPT HERE')\n</code></pre>\n\n<p>stored as</p>\n\n<pre><code>self.choice\nself.prompt\n</code></pre>\n\n<p>Then you can do</p>\n\n<pre><code>def add_choices(self, next_branch):\n    self.choices.append(next_branch)\n</code></pre>\n\n<p>and get the information from:</p>\n\n<pre><code>print self.choices[0].choice\n</code></pre>\n\n<p>or to get the level</p>\n\n<pre><code>return self.choices[0]\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 7162898, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8a272e9f91be6efb1452b8503dc93e07?s=128&d=identicon&r=PG&f=1", "display_name": "Carcanken", "link": "https://stackoverflow.com/users/7162898/carcanken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 40898081, "answer_count": 1, "score": 0, "last_activity_date": 1480539834, "creation_date": 1480538430, "last_edit_date": 1480538608, "question_id": 40897784, "link": "https://stackoverflow.com/questions/40897784/finding-class-attribute-from-list-of-initialized-objects", "title": "Finding class attribute from list of initialized objects", "body": "<p>I'm working on an assignment that involves creating a text adventure with a branching story line.</p>\n\n<p>It works like this:</p>\n\n<p>Level 1 has 1 prompt and 3 choices\nLevel 2 has 3 prompts and 9 choices\nLevel 3 has 9 prompts and 27 choices\nLevel 4 has 27 prompts and 81 choices\nEach choice taken leads to a new and unique prompt on the next level with 3 different choices.</p>\n\n<p>I have a basic class set up like this:</p>\n\n<pre><code>class Level:\n    def __init__(self,level_num, level_prompt):\n        self.level_num = level_num\n        self.level_prompt = level_prompt\n        self.choices = []\n\n    def add_choices(self, choices, next_branch):\n        self.choices.append(choices)\n        self.next_branch = next_branch\n\n    def print_situation(self):\n        print(\"Level \" + str(self.level_num))\n        print(self.level_prompt)\n        print(\"[A] \" + self.choices[0])\n        print(\"[B] \" + self.choices[1])\n        print(\"[C] \" + self.choices[2])\n\n    def get_next_prompt(self, letter_choice): # this will look at choice and find the prompt associated with it, for example level1 choice A SHOULD return level2_A\n        if letter_choice == 'A':\n            return self.choices[0].next_branch\n        if letter_choice == 'B':\n            return self.choices[1].next_branch\n        if letter_choice == 'C':\n            return self.choices[2].next_branch\n</code></pre>\n\n<p>For the purpose of explaining the flow of the program, here's a sample of the initialized objects.</p>\n\n<pre><code>#  prompts\nlevel1 = Level(1, 'PROMPT HERE')\n\nlevel2_A = Level(2, 'PROMPT HERE')\nlevel2_B = Level(2, 'PROMPT HERE')\nlevel2_C = Level(2, 'PROMPT HERE')\n\nlevel3_A1 = Level(3, 'PROMPT HERE')\nlevel3_A2 = Level(3, 'PROMPT HERE')\nlevel3_A3 = Level(3, 'PROMPT HERE')\nlevel3_B1 = Level(3, 'PROMPT HERE')\nlevel3_B2 = Level(3, 'PROMPT HERE')\nlevel3_B3 = Level(3, 'PROMPT HERE')\nlevel3_C1 = Level(3, 'PROMPT HERE')\nlevel3_C2 = Level(3, 'PROMPT HERE')\nlevel3_C3 = Level(3, 'PROMPT HERE')\n\n#  choices\nlevel1.add_choices('CHOICE A', level2_A)\nlevel1.add_choices('CHOICE B', level2_B)\nlevel1.add_choices('CHOICE C', level2_C)\n\nlevel2_A.add_choices('CHOICE A', level3_A1)\nlevel2_A.add_choices('CHOICE B', level3_A2)\nlevel2_A.add_choices('CHOICE C', level3_A3)\nlevel2_B.add_choices('CHOICE A', level3_B1)\nlevel2_B.add_choices('CHOICE B', level3_B2)\nlevel2_B.add_choices('CHOICE C', level3_B3)\nlevel2_C.add_choices('CHOICE A', level3_C1)\nlevel2_C.add_choices('CHOICE B', level3_C2)\nlevel2_C.add_choices('CHOICE C', level3_C3)\n</code></pre>\n\n<p>The error in my program comes from the get_next_prompt method of my class. My intention is to be able to call it like this:</p>\n\n<pre><code>level1.get_next_prompt('A')\n</code></pre>\n\n<p>and have it return the value: level2_A. This isn't simply adding _A to the end of the level name, but it should look at the next_branch argument of the choice and return that.</p>\n\n<p>Let me know if something isn't entirely clear.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "r", "linear-regression", "statsmodels"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4093341, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XI5J_i9BJ5I/AAAAAAAAAAI/AAAAAAAAAZo/bevxssVdWvo/photo.jpg?sz=128", "display_name": "BarclayK", "link": "https://stackoverflow.com/users/4093341/barclayk"}, "edited": false, "score": 0, "creation_date": 1480546349, "post_id": 40899085, "comment_id": 69013208, "body": "Sounds like a weighted linear regression model is actually fairly difficult to do (without rolling your own) in python vs. R. Would you happen to know if  there any other libraries for weighted regressions in python outside of Statsmodels or Scikit ?"}, {"owner": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "reply_to_user": {"reputation": 85, "user_id": 4093341, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XI5J_i9BJ5I/AAAAAAAAAAI/AAAAAAAAAZo/bevxssVdWvo/photo.jpg?sz=128", "display_name": "BarclayK", "link": "https://stackoverflow.com/users/4093341/barclayk"}, "edited": false, "score": 0, "creation_date": 1480548400, "post_id": 40899085, "comment_id": 69013953, "body": "What&#39;s difficult about WLS? It has the same pattern as OLS except that you provide an additional 1-D weight array."}], "tags": [], "owner": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "is_accepted": true, "score": 1, "last_activity_date": 1480543478, "creation_date": 1480543478, "answer_id": 40899085, "question_id": 40897776, "link": "https://stackoverflow.com/questions/40897776/weighted-linear-regression-r-to-python-statsmodels/40899085#40899085", "title": "Weighted Linear Regression- R to Python - Statsmodels", "body": "<p>WLS has weights for the linear model, where weights are interpreted as inverse variance for the result statistics. \n<a href=\"http://www.statsmodels.org/stable/generated/statsmodels.regression.linear_model.WLS.html\" rel=\"nofollow noreferrer\">http://www.statsmodels.org/stable/generated/statsmodels.regression.linear_model.WLS.html</a></p>\n\n<p>The unreleased version of statsmodels has frequency weights for GLM, but no variance weights.\nsee <code>freq_weights</code> in <a href=\"http://www.statsmodels.org/dev/generated/statsmodels.genmod.generalized_linear_model.GLM.html\" rel=\"nofollow noreferrer\">http://www.statsmodels.org/dev/generated/statsmodels.genmod.generalized_linear_model.GLM.html</a></p>\n\n<p>(There are many open issues to expand the types of weights and adding weights to other models, but those are not available yet.)</p>\n"}], "owner": {"reputation": 85, "user_id": 4093341, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XI5J_i9BJ5I/AAAAAAAAAAI/AAAAAAAAAZo/bevxssVdWvo/photo.jpg?sz=128", "display_name": "BarclayK", "link": "https://stackoverflow.com/users/4093341/barclayk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1348, "favorite_count": 0, "accepted_answer_id": 40899085, "answer_count": 1, "score": 1, "last_activity_date": 1480543478, "creation_date": 1480538396, "question_id": 40897776, "link": "https://stackoverflow.com/questions/40897776/weighted-linear-regression-r-to-python-statsmodels", "title": "Weighted Linear Regression- R to Python - Statsmodels", "body": "<p>I'm attempting to translate R code into Python and running into trouble trying to replicate the R lm{stats} function which contains 'weights', allowing for weights to be used in the fitting process. </p>\n\n<p>My ultimate goal is to simply run a <strong>weighted linear regression</strong> in Python using the statsmodels library. </p>\n\n<p>Searching through the Statsmodels issues I've located <a href=\"https://github.com/statsmodels/statsmodels/issues/743\" rel=\"nofollow noreferrer\">caseweights in linear models #743</a> and <a href=\"https://github.com/statsmodels/statsmodels/issues/2701\" rel=\"nofollow noreferrer\">SUMM/ENH rare events, unbalanced sample, matching, weights #2701</a> which make me think this may not be possible with Statsmodels. </p>\n\n<p>Is it possible to add weights to GLM models in Statsmodels or alternatively, is there a better way to run a weighted linear regression in python? </p>\n"}, {"tags": ["python", "input"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 2, "creation_date": 1480538384, "post_id": 40897748, "comment_id": 69009229, "body": "could you post a few lines of the text file?"}, {"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 1, "creation_date": 1480538407, "post_id": 40897748, "comment_id": 69009244, "body": "if that team is in the line then you have yourself an infinite loop, you should probably use <code>lower()</code> or <code>upper()</code> on line and team so that the case matches"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1480538459, "post_id": 40897748, "comment_id": 69009269, "body": "Related - <a href=\"http://stackoverflow.com/questions/17949508/python-read-all-text-file-lines-in-loop#17949545\">python read all lines in file</a>"}, {"owner": {"reputation": 730, "user_id": 6941046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rDqanJg0rQU/AAAAAAAAAAI/AAAAAAAAACg/0Hf929Qb7uk/photo.jpg?sz=128", "display_name": "Elliot Roberts", "link": "https://stackoverflow.com/users/6941046/elliot-roberts"}, "edited": false, "score": 0, "creation_date": 1480538526, "post_id": 40897748, "comment_id": 69009319, "body": "Could you use <code>split()</code> on the line and then <code>count()</code> on the resulting list?"}, {"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "reply_to_user": {"reputation": 730, "user_id": 6941046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rDqanJg0rQU/AAAAAAAAAAI/AAAAAAAAACg/0Hf929Qb7uk/photo.jpg?sz=128", "display_name": "Elliot Roberts", "link": "https://stackoverflow.com/users/6941046/elliot-roberts"}, "edited": false, "score": 0, "creation_date": 1480538549, "post_id": 40897748, "comment_id": 69009327, "body": "@ElliotRoberts no need to <code>split</code> before using <code>count()</code> as it works on strings"}, {"owner": {"reputation": 730, "user_id": 6941046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rDqanJg0rQU/AAAAAAAAAAI/AAAAAAAAACg/0Hf929Qb7uk/photo.jpg?sz=128", "display_name": "Elliot Roberts", "link": "https://stackoverflow.com/users/6941046/elliot-roberts"}, "edited": false, "score": 0, "creation_date": 1480538611, "post_id": 40897748, "comment_id": 69009359, "body": "Count is a list method, no? Wouldn&#39;t the line be a string?"}], "answers": [{"comments": [{"owner": {"reputation": 1164, "user_id": 3119546, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d51080abc8a98ac0fce744fcc1f2d2a?s=128&d=identicon&r=PG&f=1", "display_name": "sudobangbang", "link": "https://stackoverflow.com/users/3119546/sudobangbang"}, "edited": false, "score": 0, "creation_date": 1480539020, "post_id": 40897819, "comment_id": 69009581, "body": "This is a good solution if we assume the file has the whole team name on one line (like a list) and is not broken over a new line (like in a paragraph with some formatting restrictions)."}, {"owner": {"reputation": 27, "user_id": 7232967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0be66fd7411bfd8a9aa0411e718c46?s=128&d=identicon&r=PG&f=1", "display_name": "MBayuk", "link": "https://stackoverflow.com/users/7232967/mbayuk"}, "edited": false, "score": 0, "creation_date": 1480539425, "post_id": 40897819, "comment_id": 69009815, "body": "Thank you for the help! I have a better understanding of this now."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "reply_to_user": {"reputation": 1164, "user_id": 3119546, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d51080abc8a98ac0fce744fcc1f2d2a?s=128&d=identicon&r=PG&f=1", "display_name": "sudobangbang", "link": "https://stackoverflow.com/users/3119546/sudobangbang"}, "edited": false, "score": 1, "creation_date": 1480539438, "post_id": 40897819, "comment_id": 69009823, "body": "@sudobangbang that&#39;s not something i&#39;d expect to run into on text files, but in that case you could probably read in the file and remove all the <code>\\n</code> characters or something. Then you run into the problem of matching lines that end in <code>New York</code> and the next line says <code>Yankees</code>, but it was not the authors intent to record the team."}, {"owner": {"reputation": 1164, "user_id": 3119546, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6d51080abc8a98ac0fce744fcc1f2d2a?s=128&d=identicon&r=PG&f=1", "display_name": "sudobangbang", "link": "https://stackoverflow.com/users/3119546/sudobangbang"}, "edited": false, "score": 0, "creation_date": 1480539843, "post_id": 40897819, "comment_id": 69010052, "body": "@PatrickHaugh, agreed, I still second your original request for an example of the file to read"}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": 0, "last_activity_date": 1480538578, "creation_date": 1480538578, "answer_id": 40897819, "question_id": 40897748, "link": "https://stackoverflow.com/questions/40897748/python-counting-occurrences-of-a-word-from-a-txt-file-with-input/40897819#40897819", "title": "Python: Counting Occurrences of a Word From a txt file with Input", "body": "<pre><code>team = input('Enter team name: ')\ncount = 0\nwith open(\"WorldSeriesWinners.txt\") as f:\n    for line in f:\n        if team in line:\n            count += 1\n\nprint('{} won the world series {} times'.format(team, count)\n</code></pre>\n\n<p>Go through line by line and check each line using <code>if</code> statements</p>\n"}, {"comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1480539478, "post_id": 40898026, "comment_id": 69009844, "body": "regex seems a little unnecessary here."}, {"owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1480539916, "post_id": 40898026, "comment_id": 69010086, "body": "Why not? I think it is good since we do not know the exact format of the names."}], "tags": [], "owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "is_accepted": false, "score": 0, "last_activity_date": 1480539297, "creation_date": 1480539297, "answer_id": 40898026, "question_id": 40897748, "link": "https://stackoverflow.com/questions/40897748/python-counting-occurrences-of-a-word-from-a-txt-file-with-input/40898026#40898026", "title": "Python: Counting Occurrences of a Word From a txt file with Input", "body": "<p>Try the following:</p>\n\n<pre><code>import re\n\ndef world_series_count(team):\n    with open(\"WorldSeriesWinners.txt\") as f:\n        data = f.read()\n        items = re.findall(team, data)\n    return len(items)\n\nteam = input('Enter a team name: ')\n\ncount = world_series_count(team)\n\nprint('{} won the world series {} times'.format(team, count))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3660, "user_id": 2247264, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/a645fe19c42263286b982aaa633b96a9?s=128&d=identicon&r=PG", "display_name": "Dalen", "link": "https://stackoverflow.com/users/2247264/dalen"}, "is_accepted": false, "score": 0, "last_activity_date": 1480541937, "last_edit_date": 1480541937, "creation_date": 1480540177, "answer_id": 40898241, "question_id": 40897748, "link": "https://stackoverflow.com/questions/40897748/python-counting-occurrences-of-a-word-from-a-txt-file-with-input/40898241#40898241", "title": "Python: Counting Occurrences of a Word From a txt file with Input", "body": "<p>Why are you people complicating matters way over necessary.</p>\n\n<p>This will count occurrences of text in a txt file given by path, regardless of text formatting (unless it is hyphenized):</p>\n\n<pre><code>def count_in_file (path, text):\n    f = open(path, \"rb\")\n    c = f.read()\n    f.close()\n    return \" \".join(c.split()).count(text.strip())\n</code></pre>\n\n<p>A little tweak will be needed to support unicode txt files. But there. Simple and easy.</p>\n\n<p>If the txt file is extremely big, then perform this using buffering with static chunk size:</p>\n\n<pre><code>def count_in_file (path, text, chunksize=4096):\n    text = text.strip()\n    f = open(path, \"rb\")\n    f.seek(0, 2)\n    fsize = f.tell()\n    f.seek(0)\n    if fsize&lt;=chunksize:\n        c = f.read()\n        f.close()\n        return \" \".join(c.split()).count(text)\n    count = 0\n    l = len(text)\n    c = f.read(chunksize)\n    r = c[-l:]\n    while c:\n        count += \" \".join(c.split()).count(text)\n        if r!=text: f.seek(f.tell()-l+1)\n        c = f.read(chunksize)\n        r = c[-l:]\n    f.close()\n    return count\n</code></pre>\n\n<p>Well, this now is a bit complicated. But if a file is really, really big, and it is formatted over lines, this is a good way to do it.</p>\n"}], "owner": {"reputation": 27, "user_id": 7232967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da0be66fd7411bfd8a9aa0411e718c46?s=128&d=identicon&r=PG&f=1", "display_name": "MBayuk", "link": "https://stackoverflow.com/users/7232967/mbayuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1675, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1480541937, "creation_date": 1480538311, "question_id": 40897748, "link": "https://stackoverflow.com/questions/40897748/python-counting-occurrences-of-a-word-from-a-txt-file-with-input", "title": "Python: Counting Occurrences of a Word From a txt file with Input", "body": "<p>I am new to programming and I need help finding how many times the user input occurs inside of a txt file. The code I currently have is:</p>\n\n<pre><code>myfile = open(\"WorldSeriesWinners.txt\")\n\ncount = 0\nteam = input(\"Enter in the team name that won the world series: \")\nline = myfile.readline()\n\nmyfile.readline()\n\nwhile team in line:\n    count += 1\n\nmyfile.readline()\n\nprint(\"The\", team, \"won the world series\", count, \"times\")\n\n\n\nmyfile.close()\n</code></pre>\n\n<p>The output I get from this is:</p>\n\n<pre><code>Enter in the team name that won the world series: New York Yankees\nThe New York Yankees won the world series 0 times\n</code></pre>\n\n<p>How would I get it to show many times a specific team won? Thanks in advance.  </p>\n"}, {"tags": ["python", "flask", "flask-login"], "answers": [{"tags": [], "owner": {"reputation": 799, "user_id": 6827403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/298f5ce4b083415e22f500eec317043e?s=128&d=identicon&r=PG&f=1", "display_name": "a.costa", "link": "https://stackoverflow.com/users/6827403/a-costa"}, "is_accepted": true, "score": 2, "last_activity_date": 1480607146, "creation_date": 1480607146, "answer_id": 40914886, "question_id": 40897746, "link": "https://stackoverflow.com/questions/40897746/flask-login-never-logs-out/40914886#40914886", "title": "flask-login never logs out", "body": "<p>OK i've finally find a solution:</p>\n\n<pre><code>@app.before_request\ndef before_request():\n    flask.session.permanent = True\n    app.permanent_session_lifetime = datetime.timedelta(minutes=20)\n    flask.session.modified = True\n</code></pre>\n\n<p>setting flask.session.permanent to True forces flask to expire after a certain amount of time, and not when the browser is closed (which is the default behavior). </p>\n\n<p>flask.session.modified = True resets the time. since this is called every request the user does, you are sure that he is going to be logged out after 20minutes of true inactivity.</p>\n"}], "owner": {"reputation": 799, "user_id": 6827403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/298f5ce4b083415e22f500eec317043e?s=128&d=identicon&r=PG&f=1", "display_name": "a.costa", "link": "https://stackoverflow.com/users/6827403/a-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1333, "favorite_count": 0, "accepted_answer_id": 40914886, "answer_count": 1, "score": 1, "last_activity_date": 1480607146, "creation_date": 1480538309, "question_id": 40897746, "link": "https://stackoverflow.com/questions/40897746/flask-login-never-logs-out", "title": "flask-login never logs out", "body": "<p>I am doing some tests with flask-login. I am following exactly the example at </p>\n\n<p><a href=\"https://flask-login.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">https://flask-login.readthedocs.io/en/latest/</a></p>\n\n<p>everything is working fine, i manage to log in correctly and i am able to access the routes protected by the @login_required decorator. </p>\n\n<p>I can log out if I explicitly do it (going to the '/logout' route) and after i do i'm no longer able to access the protected routes.</p>\n\n<p>The only problem is: i never get logged out if i close the browser. In the official guide it says </p>\n\n<blockquote>\n  <p>By default, when the user closes their browser the Flask Session is deleted and the user is logged out. </p>\n</blockquote>\n\n<p>but this never seems to happen.</p>\n"}, {"tags": ["python", "django", "function", "class", "models"], "answers": [{"comments": [{"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1480539682, "post_id": 40898022, "comment_id": 69009962, "body": "couldn&#39;t he just use <code>{{ event.comments_set.count }}</code>?"}, {"owner": {"reputation": 86856, "user_id": 1628832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090ce0cca74f8cc6766366460b956a0f?s=128&d=identicon&r=PG&f=1", "display_name": "karthikr", "link": "https://stackoverflow.com/users/1628832/karthikr"}, "reply_to_user": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1480539980, "post_id": 40898022, "comment_id": 69010119, "body": "Definitely, but OP also mentions about the ability to filter, but does not specify the filter criteria, so preferred this method. - Edited the answer anyways.. thank you"}, {"owner": {"reputation": 15, "user_id": 6690393, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-ZJAo_NKQeDA/AAAAAAAAAAI/AAAAAAAAAQw/golbWudc-5Y/photo.jpg?sz=128", "display_name": "soultaker", "link": "https://stackoverflow.com/users/6690393/soultaker"}, "reply_to_user": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1480542905, "post_id": 40898022, "comment_id": 69011656, "body": "@MadWombat Thats just works great! gosh, thank you so much.. By the way, wich method you showed me guys, is more secure? thank you so so much"}, {"owner": {"reputation": 15, "user_id": 6690393, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-ZJAo_NKQeDA/AAAAAAAAAAI/AAAAAAAAAQw/golbWudc-5Y/photo.jpg?sz=128", "display_name": "soultaker", "link": "https://stackoverflow.com/users/6690393/soultaker"}, "edited": false, "score": 0, "creation_date": 1480543191, "post_id": 40898022, "comment_id": 69011786, "body": "can you tell me of where it come from that &quot;_set&quot;? cause I didn&#39;t define it anywhere. Thank you so much"}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1480545547, "post_id": 40898022, "comment_id": 69012872, "body": "When you define foreign key relationships in your models, Django supplies the reverse relationship. The &lt;modelname&gt;_set is just a default name for the reverse."}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1480545623, "post_id": 40898022, "comment_id": 69012903, "body": "Here is a link to the docs <a href=\"https://docs.djangoproject.com/en/1.10/ref/models/relations/\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/1.10/ref/models/relations</a>"}, {"owner": {"reputation": 15, "user_id": 6690393, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-ZJAo_NKQeDA/AAAAAAAAAAI/AAAAAAAAAQw/golbWudc-5Y/photo.jpg?sz=128", "display_name": "soultaker", "link": "https://stackoverflow.com/users/6690393/soultaker"}, "reply_to_user": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 1, "creation_date": 1480552118, "post_id": 40898022, "comment_id": 69015116, "body": "@MadWombat thank you so so much, as i say, im new in django, I&#39;m just learning looking for answer to my problem, thank you so much dude!"}, {"owner": {"reputation": 12516, "user_id": 302268, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c3985dffcdc646b67ed0699a364639e2?s=128&d=identicon&r=PG", "display_name": "Mad Wombat", "link": "https://stackoverflow.com/users/302268/mad-wombat"}, "edited": false, "score": 0, "creation_date": 1480609608, "post_id": 40898022, "comment_id": 69043430, "body": "You are welcome. This is what this site is for. To help you learn :)"}], "tags": [], "owner": {"reputation": 86856, "user_id": 1628832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090ce0cca74f8cc6766366460b956a0f?s=128&d=identicon&r=PG&f=1", "display_name": "karthikr", "link": "https://stackoverflow.com/users/1628832/karthikr"}, "is_accepted": true, "score": 5, "last_activity_date": 1480540101, "last_edit_date": 1480540101, "creation_date": 1480539278, "answer_id": 40898022, "question_id": 40897730, "link": "https://stackoverflow.com/questions/40897730/how-can-i-filter-and-count-objects-in-django-template/40898022#40898022", "title": "How can I filter and count objects in DJANGO template?", "body": "<p>You can create a helper method on the model which can help you show the number of comments.</p>\n\n<p>Something like this:</p>\n\n<pre><code>class Event(TimeStampModel):\n    ...\n\n    def comments_count(self):\n        #Your filter criteria can go here. \n        return self.comments_set.count()\n</code></pre>\n\n<p>and in the comments:</p>\n\n<pre><code>{{event.comments_count}}\n</code></pre>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.10/topics/db/queries/#lookups-that-span-relationships\" rel=\"nofollow noreferrer\">More documentation on the reverse lookups can be found here</a></p>\n\n<p>If you are not filtering, as, @MadWombat mentions, you could just do</p>\n\n<pre><code>{{event.comments_set.count}}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6690393, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-ZJAo_NKQeDA/AAAAAAAAAAI/AAAAAAAAAQw/golbWudc-5Y/photo.jpg?sz=128", "display_name": "soultaker", "link": "https://stackoverflow.com/users/6690393/soultaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2343, "favorite_count": 2, "accepted_answer_id": 40898022, "answer_count": 1, "score": 1, "last_activity_date": 1480540101, "creation_date": 1480538278, "last_edit_date": 1480539334, "question_id": 40897730, "link": "https://stackoverflow.com/questions/40897730/how-can-i-filter-and-count-objects-in-django-template", "title": "How can I filter and count objects in DJANGO template?", "body": "<p>Hello I justa want to ask this because Im new in django, my trouble is that i want to count how many comments have a post and put it in to the html template.\nBut the thing is that im using for to gather all the events in the db, but i just want to show only the count of comments that have every event that the \"for\" are showing.\nthis is my models, view, and template.\nThank you so much.</p>\n\n<p>MODELS</p>\n\n<pre><code>class Event(TimeStampModel):\n    name = models.CharField(max_length=200, unique=True)\n    slug = models.SlugField(editable=False)\n    summary = models.TextField(max_length=255)\n    content = models.TextField()\n    category = models.ForeignKey(Category)\n    place = models.CharField(max_length=50)\n    start = models.DateTimeField()\n    finish = models.DateTimeField()\n    image = models.ImageField(upload_to = 'eventos')\n    is_free = models.BooleanField(default=True)\n    amount = models.DecimalField(max_digits=6, decimal_places=0, default=0) \n    views = models.PositiveIntegerField(default=0)\n    organizer = models.ForeignKey(settings.AUTH_USER_MODEL, blank=True, null=True)\n\n    def save(self, *args, **kwargs):\n        if not self.id:\n            self.slug = slugify(self.name)\n        super(Event, self).save(*args, **kwargs)\n\n    def __unicode__(self):\n        return self.name\n\nclass Comments(TimeStampModel):\n    user = models.ForeignKey(settings.AUTH_USER_MODEL)\n    event = models.ForeignKey(Event)\n    content = models.TextField()\n\n    def __unicode__(self):\n        return \"%s %s\" % (self.user.username, self.event.name)  \n</code></pre>\n\n<p>VIEW</p>\n\n<pre><code>class IndexView(TemplateView):\n    template_name = 'eventos/index.html'\n    def get_context_data(self, **kwargs):\n        context = super(IndexView, self).get_context_data(**kwargs)\n        context['events'] = Event.objects.all().order_by('-created')[:6]\n        context['categories'] = Category.objects.all()\n        context['comments'] = Comments.objects.all()\n        return context\n</code></pre>\n\n<p>HTML TEMPLATE</p>\n\n<pre><code>{% for event in events %}\n    &lt;li class=\"span4 \"&gt;\n      &lt;div class=\"thumbnail thumbnail-1\"&gt;\n        &lt;h3 class=\"titulo-fix\" &gt;{{ event.name }}&lt;/h3&gt;\n          &lt;img class=\"center-cropped\" src=\"{{ event.image.url }}\" alt=\"\"&gt;\n            &lt;section&gt; \n                &lt;a href=\"#\"&gt;&lt;h3&gt;{{ event.category }} &lt;/h3&gt;&lt;/a&gt;\n                  &lt;div class=\"meta\"&gt;\n                        &lt;time datetime=\"2012-11-09\" class=\"date-1\"&gt;&lt;i class=\"icon-calendar\"&gt;&lt;/i&gt; {{ event.start }}&lt;/time&gt;\n                        &lt;div class=\"name-author\"&gt;&lt;i class=\"icon-user\"&gt;&lt;/i&gt; &lt;a href=\"#\"&gt;{{ event.organizer }}&lt;/a&gt;&lt;/div&gt;\n                        &lt;a href=\"#\" class=\"comments\"&gt;&lt;i class=\"icon-comment\"&gt;&lt;/i&gt;  comments&lt;/a&gt;\n                    &lt;/div&gt; \n                  &lt;div class=\"clear\"&gt;&lt;/div&gt;\n                  &lt;p&gt;{{ event.place }}&lt;/p&gt;\n                  &lt;a href=\"#\" class=\"btn btn-1\"&gt;Leer mas..&lt;/a&gt; \n            &lt;/section&gt;\n      &lt;/div&gt;\n    &lt;/li&gt;\n  {% endfor %}\n</code></pre>\n\n<p>I want to show it just in that part of the html where it says comments.. with a tag of course, but i just dont know wich tag or how to do it.  </p>\n"}, {"tags": ["python", "python-2.7", "flask", "openshift", "flask-restful"], "comments": [{"owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "edited": false, "score": 0, "creation_date": 1480538733, "post_id": 40897725, "comment_id": 69009429, "body": "What error messages were in the logs?"}, {"owner": {"reputation": 2191, "user_id": 135530, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e0f1916b37bae33f2e5fc954d6045bc?s=128&d=identicon&r=PG", "display_name": "Lance", "link": "https://stackoverflow.com/users/135530/lance"}, "reply_to_user": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "edited": false, "score": 0, "creation_date": 1480538806, "post_id": 40897725, "comment_id": 69009467, "body": "I added the logs to the question."}, {"owner": {"reputation": 2191, "user_id": 135530, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e0f1916b37bae33f2e5fc954d6045bc?s=128&d=identicon&r=PG", "display_name": "Lance", "link": "https://stackoverflow.com/users/135530/lance"}, "reply_to_user": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "edited": false, "score": 0, "creation_date": 1480539215, "post_id": 40897725, "comment_id": 69009705, "body": "It says no module named flask. is there something wrong in my requirement.txt or virtualenv?"}], "answers": [{"tags": [], "owner": {"reputation": 2191, "user_id": 135530, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e0f1916b37bae33f2e5fc954d6045bc?s=128&d=identicon&r=PG", "display_name": "Lance", "link": "https://stackoverflow.com/users/135530/lance"}, "is_accepted": false, "score": 0, "last_activity_date": 1480539752, "creation_date": 1480539752, "answer_id": 40898136, "question_id": 40897725, "link": "https://stackoverflow.com/questions/40897725/error-when-using-flask-restful-in-openshift/40898136#40898136", "title": "Error when using Flask_Restful in Openshift", "body": "<p>Finally figured it out. I need to add flask_restful to setup.py</p>\n\n<p><strong>setup.py</strong></p>\n\n<pre><code>from setuptools import setup\n\nsetup(name='YourAppName',\n      version='1.0',\n      description='OpenShift App',\n      author='Lance',\n      author_email='example@example.com',\n      url='http://www.python.org/sigs/distutils-sig/',\n      install_requires=['flask_restful'],\n     )\n</code></pre>\n"}], "owner": {"reputation": 2191, "user_id": 135530, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e0f1916b37bae33f2e5fc954d6045bc?s=128&d=identicon&r=PG", "display_name": "Lance", "link": "https://stackoverflow.com/users/135530/lance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480539752, "creation_date": 1480538264, "last_edit_date": 1480539022, "question_id": 40897725, "link": "https://stackoverflow.com/questions/40897725/error-when-using-flask-restful-in-openshift", "title": "Error when using Flask_Restful in Openshift", "body": "<p>I'm trying to create an openshift app using Flask restful. I was able to setup my app following the instructions in openshift <a href=\"https://developers.openshift.com/languages/python/flask.html#step1\" rel=\"nofollow noreferrer\">website</a>. But aside from that I want to use flask_restful. </p>\n\n<p>So I created a virtualenv and pip installed flask_restful. Then using the <a href=\"http://flask-restful-cn.readthedocs.io/en/0.3.5/quickstart.html\" rel=\"nofollow noreferrer\">example</a> from the Flask_restful website, I copied the sample code and pasted it in the flaskapp.py (see <a href=\"https://developers.openshift.com/languages/python/flask.html#step1\" rel=\"nofollow noreferrer\">openshift example</a>). I also added <em>Flask-RESTful==0.3.5</em> in the <em>requirements.txt</em>.</p>\n\n<p>Then I was able to run python wsgi.py and it ran successfully locally in my machine. I was able to get the result that I'm expecting. I was kind of expecting that when I push these changes to openshift, it will run smoothly. But it didn't it gave me a <strong>500 Internal Server Error</strong> message.</p>\n\n<p>To give you an idea, here are some of my files</p>\n\n<p><strong>requirements.txt</strong></p>\n\n<pre><code>Flask==0.10.1\nFlask-RESTful==0.3.5:\n</code></pre>\n\n<p><strong>flaskapp.py</strong></p>\n\n<pre><code>from flask import Flask\nfrom flask_restful import Resource, Api\n\napp = Flask(__name__)\napi = Api(app)\n\nclass HelloWorld(Resource):\n    def get(self):\n        return {'hello': 'world'}\n\napi.add_resource(HelloWorld, '/')\n\nif __name__ == '__main__':\n    app.run(debug=True)\n</code></pre>\n\n<p><strong>wsgi.py</strong></p>\n\n<pre><code>#!/usr/bin/python\nimport os\n\n#virtenv = os.environ['OPENSHIFT_PYTHON_DIR'] + '/virtenv/'\nvirtenv = os.path.join(os.environ.get('OPENSHIFT_PYTHON_DIR','.'), 'virtenv')\nvirtualenv = os.path.join(virtenv, 'bin/activate_this.py')\ntry:\n    execfile(virtualenv, dict(__file__=virtualenv))\nexcept IOError:\n    pass\n#\n# IMPORTANT: Put any additional includes below this line.  If placed above this\n# line, it's possible required libraries won't be in your searchable path\n#\nfrom flaskapp import app as application\n\n#\n# Below for testing only\n#\nif __name__ == '__main__':\n    from wsgiref.simple_server import make_server\n    httpd = make_server('localhost', 8051, application)\n    # Wait for a single request, serve it and quit.\n    #httpd.handle_request()\n    httpd.serve_forever()\n</code></pre>\n\n<p><strong>Logs:</strong> </p>\n\n<pre><code>192.69.20.2 - - [30/Nov/2016:15:40:04 -0500] \"GET / HTTP/1.1\" 500 637 \"-\" \"Wget/1.15 (linux-gnu)\"\n[Wed Nov 30 15:40:13 2016] [error] [client 127.5.221.1] mod_wsgi (pid=411796): Target WSGI script '/var/lib/openshift/583f10ac2d5271154f00001d/app-root/runtime/repo/wsgi.py' cannot be loaded as Python module.\n[Wed Nov 30 15:40:13 2016] [error] [client 127.5.221.1] mod_wsgi (pid=411796): Exception occurred processing WSGI script '/var/lib/openshift/583f10ac2d5271154f00001d/app-root/runtime/repo/wsgi.py'.\n[Wed Nov 30 15:40:13 2016] [error] [client 127.5.221.1] Traceback (most recent call last):\n[Wed Nov 30 15:40:13 2016] [error] [client 127.5.221.1]   File \"/var/lib/openshift/583f10ac2d5271154f00001d/app-root/runtime/repo/wsgi.py\", line 15, in &lt;module&gt;\n[Wed Nov 30 15:40:13 2016] [error] [client 127.5.221.1]     from myapp import app as application\n[Wed Nov 30 15:40:13 2016] [error] [client 127.5.221.1]   File \"/var/lib/openshift/583f10ac2d5271154f00001d/app-root/runtime/repo/myapp.py\", line 1, in &lt;module&gt;\n[Wed Nov 30 15:40:13 2016] [error] [client 127.5.221.1]     from flask import Flask\n[Wed Nov 30 15:40:13 2016] [error] [client 127.5.221.1] ImportError: No module named flask\n192.69.20.2 - - [30/Nov/2016:15:40:13 -0500] \"GET / HTTP/1.1\" 500 637 \"-\" \"Wget/1.15 (linux-gnu)\"\n</code></pre>\n"}, {"tags": ["python", "object", "reference"], "answers": [{"tags": [], "owner": {"reputation": 4578, "user_id": 5180047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Z8PTw2eJC9E/AAAAAAAAAAI/AAAAAAAAAco/2C4t6AgoQNc/photo.jpg?sz=128", "display_name": "Nick Brady", "link": "https://stackoverflow.com/users/5180047/nick-brady"}, "is_accepted": true, "score": 1, "last_activity_date": 1480551350, "last_edit_date": 1480551350, "creation_date": 1480551020, "answer_id": 40900508, "question_id": 40897661, "link": "https://stackoverflow.com/questions/40897661/python-list-vs-loop-what-happens-to-references/40900508#40900508", "title": "Python list vs. loop what happens to references", "body": "<p>In the first scenario, you're rewriting a df_list via a list comprehension. The second iterates over a list of data frames, but never changes the data frame itself. They key here is that a list comprehension actually returns a new list, and rewrites df_list.</p>\n\n<p>Here is an illustrative example (excuse all of the print statements..):</p>\n\n<pre><code>lst = ['a', 'b']\nprint('Memory address of the list: %s' % hex(id(lst)))\nprint('--'*10)\nprint('BEGIN FOR LOOP')\nprint('--'*10)\nfor letter in lst:\n    letter = 'c'\nprint(lst)\nprint('Memory address of the list: %s' % hex(id(lst)))\nprint('--'*10)\nprint('Now use a list comprehension, which will return a new list')\nlst = ['c' for letter in lst]\nprint(lst)\nprint('Memory address of the list: %s' % hex(id(lst)))\nprint(letter) # letter is still a variable that has been declared\n</code></pre>\n\n<p>Outputs this:</p>\n\n<pre><code>Memory address of the list: 0x10b45b2c8\n--------------------\nBEGIN FOR LOOP\n--------------------\n['a', 'b']\nMemory address of the list: 0x10b45b2c8  # Same list\n--------------------\nNow use a list comprehension, which will return a new list\n['c', 'c']\nMemory address of the list: 0x10b455b08  # New list, new memory spot\n</code></pre>\n\n<p>Note that after using a list comprehension, the memory address actually changed. That means you're looking at an entirely new object. After the for loop, you're looking at the same old list. In the for loop, your making a variable <code>el</code> and reassigning it each iteration.</p>\n\n<p>This would do what you're expecting, since you're storing the new value to a new list:</p>\n\n<pre><code>import pandas as pd\n\ndf_1 = pd.DataFrame({'A': [1,1]})\ndf_2 = pd.DataFrame({'A': [2,1]})\n\ndf_list = [df_1, df_2]\n\nlst = []\nfor el in df_list:\n    lst.append(el.loc[el['A']==1])\n\nprint(lst[0])\nprint('____')\nprint(lst[1])\n</code></pre>\n"}], "owner": {"reputation": 5372, "user_id": 1700890, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7ae3069bce34ea67aa6ed85035fac697?s=128&d=identicon&r=PG", "display_name": "user1700890", "link": "https://stackoverflow.com/users/1700890/user1700890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 40900508, "answer_count": 1, "score": 0, "last_activity_date": 1480551350, "creation_date": 1480538016, "question_id": 40897661, "link": "https://stackoverflow.com/questions/40897661/python-list-vs-loop-what-happens-to-references", "title": "Python list vs. loop what happens to references", "body": "<p>Here is my example, which works as expected</p>\n\n<pre><code>import pandas as pd\n\ndf_1 = pd.DataFrame({'A': [1,1]})\ndf_2 = pd.DataFrame({'A': [2,1]})\n\ndf_list = [df_1, df_2]\ndf_list = [x.loc[x['A'] == 1] for x in df_list]\n\nprint(df_list[0])\nprint('____')\nprint(df_list[1])\n</code></pre>\n\n<p>Here is output:</p>\n\n<pre><code>   A\n0  1\n1  1\n____\n   A\n1  1\n</code></pre>\n\n<p>Here is example, which I expect to produce similar output, but it does not:</p>\n\n<pre><code>import pandas as pd\n\ndf_1 = pd.DataFrame({'A': [1,1]})\ndf_2 = pd.DataFrame({'A': [2,1]})\n\ndf_list = [df_1, df_2]\n\nfor el in df_list:\n    el = el.loc[el['A']==1]\n\nprint(df_list[0])\nprint('____')\nprint(df_list[1])\n</code></pre>\n\n<p>Here is output</p>\n\n<pre><code>   A\n0  1\n1  1\n____\n   A\n0  2\n1  1\n</code></pre>\n\n<p>What is wrong with second example. I am guessing something happening with reference to an object, where can I read more about it?</p>\n"}, {"tags": ["python", "google-app-engine"], "comments": [{"owner": {"reputation": 6636, "user_id": 1354939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pg3tn.jpg?s=128&g=1", "display_name": "BrettJ", "link": "https://stackoverflow.com/users/1354939/brettj"}, "edited": false, "score": 0, "creation_date": 1480575108, "post_id": 40897653, "comment_id": 69021555, "body": "While Dan has posted an answer, I am not sure that&#39;s really the best approach for what you need to achieve. Do you think you can elaborate further?"}, {"owner": {"reputation": 511, "user_id": 2493710, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6668d9a864473891d7f8a59ea854995e?s=128&d=identicon&r=PG", "display_name": "Rene Marty", "link": "https://stackoverflow.com/users/2493710/rene-marty"}, "reply_to_user": {"reputation": 6636, "user_id": 1354939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pg3tn.jpg?s=128&g=1", "display_name": "BrettJ", "link": "https://stackoverflow.com/users/1354939/brettj"}, "edited": false, "score": 0, "creation_date": 1501083290, "post_id": 40897653, "comment_id": 77624764, "body": "You can have a flag in RAM memory of the instance, in MEMCACHE or DATASTORE (or other NSQL).  The time to get the value of that flag could be 0.001, 2 or 50 ms (example) depending the selected storage.  If all the requests of my app read that flag, you can save money and time if you read it from RAM memory of the instance (suppouse 10 M request/day and do the numbers).  When the instance start, you read the value from Datastore and put it in RAM as global variable.  But if the flag changes, I&#39;m looking for a way to send a message to ALL INSTANCES to update the value of the Flag in their RAM."}, {"owner": {"reputation": 511, "user_id": 2493710, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6668d9a864473891d7f8a59ea854995e?s=128&d=identicon&r=PG", "display_name": "Rene Marty", "link": "https://stackoverflow.com/users/2493710/rene-marty"}, "reply_to_user": {"reputation": 6636, "user_id": 1354939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pg3tn.jpg?s=128&g=1", "display_name": "BrettJ", "link": "https://stackoverflow.com/users/1354939/brettj"}, "edited": false, "score": 0, "creation_date": 1501083522, "post_id": 40897653, "comment_id": 77624959, "body": "In my previos example, that flag could change only once a Month or in case some Google Services fails (like GAE taskqueues), but in the moment that happens we need an inmediate propagation.  The current solution is to flush memcache and upload again the last version of the app, so all the instances are initialized and restarted with the new flag value... I&#39;m looking for a more elegant way to do this. I need it for AUTOMATIC SCALING INSTANCES."}], "answers": [{"comments": [{"owner": {"reputation": 511, "user_id": 2493710, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6668d9a864473891d7f8a59ea854995e?s=128&d=identicon&r=PG", "display_name": "Rene Marty", "link": "https://stackoverflow.com/users/2493710/rene-marty"}, "edited": false, "score": 1, "creation_date": 1501082851, "post_id": 40902404, "comment_id": 77624406, "body": "This solution doesn&#180;t work for automatic scaling instances.  I get de instances ID&#39;s but the instance.service.version.app.appspot.com request does not work.  The documentation states &quot;Targeting an instance is not supported in services that are configured for auto scaling or basic scaling.&quot;"}, {"owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "reply_to_user": {"reputation": 511, "user_id": 2493710, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6668d9a864473891d7f8a59ea854995e?s=128&d=identicon&r=PG", "display_name": "Rene Marty", "link": "https://stackoverflow.com/users/2493710/rene-marty"}, "edited": false, "score": 0, "creation_date": 1501084016, "post_id": 40902404, "comment_id": 77625316, "body": "That&#39;s true, indeed, but I&#39;d argue that&#39;s an issue of the context set by the original post which states <code>I could make a request like https:&#47;&#47;instance-dot-version-dot-service-dot-app-id.appspot.&zwnj;&#8203;com for each instance.</code> :)"}, {"owner": {"reputation": 511, "user_id": 2493710, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6668d9a864473891d7f8a59ea854995e?s=128&d=identicon&r=PG", "display_name": "Rene Marty", "link": "https://stackoverflow.com/users/2493710/rene-marty"}, "edited": false, "score": 0, "creation_date": 1501084648, "post_id": 40902404, "comment_id": 77625812, "body": "I tried all the notations variations but does not work.  My instances are automatic scaling, doesn&#39;t work for that said the documentation.  I expect they could change this in the future."}, {"owner": {"reputation": 14508, "user_id": 751581, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6f8add1e3f8e4437fc89f08172de3c2d?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/751581/patrick"}, "edited": false, "score": 0, "creation_date": 1507670074, "post_id": 40902404, "comment_id": 80300604, "body": "ever find a solution for automatic scaling?"}, {"owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "edited": false, "score": 0, "creation_date": 1507670178, "post_id": 40902404, "comment_id": 80300658, "body": "Not as far as I know (but I didn&#39;t check lately)."}], "tags": [], "owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "is_accepted": false, "score": 1, "last_activity_date": 1501084418, "last_edit_date": 1501084418, "creation_date": 1480564743, "answer_id": 40902404, "question_id": 40897653, "link": "https://stackoverflow.com/questions/40897653/gae-send-requests-to-all-active-instances/40902404#40902404", "title": "GAE send requests to all active instances", "body": "<p>You can get the list of instances for a specific service version using the <a href=\"https://cloud.google.com/appengine/docs/admin-api/\" rel=\"nofollow noreferrer\">Google App Engine Admin API</a>'s REST <a href=\"https://cloud.google.com/appengine/docs/admin-api/reference/rest/v1/apps.services.versions.instances/list\" rel=\"nofollow noreferrer\"><code>apps.services.versions.instances.list</code></a> method:</p>\n\n<blockquote>\n  <p>Lists the instances of a version.</p>\n  \n  <p>HTTP request</p>\n  \n  <p><code>GET\n  https://appengine.googleapis.com/v1/{parent=apps/*/services/*/versions/*}/instances</code></p>\n  \n  <p>The URL uses <a href=\"https://github.com/googleapis/googleapis/blob/master/google/api/http.proto\" rel=\"nofollow noreferrer\">Google API HTTP annotation</a> syntax.</p>\n</blockquote>\n\n<p>See also the corresponding <a href=\"https://developers.google.com/api-client-library/python/apis/appengine/v1\" rel=\"nofollow noreferrer\">Google App Engine Admin API Client Library for Python</a>'s pydoc page <a href=\"https://developers.google.com/resources/api-libraries/documentation/appengine/v1/python/latest/appengine_v1.apps.services.versions.instances.html\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>With the list of instances you can, as you mentioned, use GAE's <a href=\"https://cloud.google.com/appengine/docs/python/how-requests-are-routed#routing_via_url\" rel=\"nofollow noreferrer\">routing via URL</a> to send requests to each particular instance as desired.</p>\n\n<p><strong>Important note</strong> related to this assumption in the question:</p>\n\n<blockquote>\n  <p>If I can get the list of all the active instances ids, I could make a\n  request like\n  <a href=\"https://instance-dot-version-dot-service-dot-app-id.appspot.com\" rel=\"nofollow noreferrer\">https://instance-dot-version-dot-service-dot-app-id.appspot.com</a> for\n  each instance.</p>\n</blockquote>\n\n<p>from <a href=\"https://cloud.google.com/appengine/docs/standard/python/how-requests-are-routed#targeted_routing\" rel=\"nofollow noreferrer\">Targeted routing</a>:</p>\n\n<blockquote>\n  <p><strong>Note:</strong> Targeting an instance is not supported in services that are configured for auto scaling or basic scaling.</p>\n</blockquote>\n"}], "owner": {"reputation": 511, "user_id": 2493710, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6668d9a864473891d7f8a59ea854995e?s=128&d=identicon&r=PG", "display_name": "Rene Marty", "link": "https://stackoverflow.com/users/2493710/rene-marty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1501084418, "creation_date": 1480537982, "question_id": 40897653, "link": "https://stackoverflow.com/questions/40897653/gae-send-requests-to-all-active-instances", "title": "GAE send requests to all active instances", "body": "<p>Is there any way to send requests to all active instances of a module/service in Google App Engine?</p>\n\n<p>If I can get the list of all the active instances ids, I could make a request like <a href=\"https://instance-dot-version-dot-service-dot-app-id.appspot.com\" rel=\"nofollow noreferrer\">https://instance-dot-version-dot-service-dot-app-id.appspot.com</a> for each instance.</p>\n\n<p>I need this to change some memory's global variables (that saves me requests to datastore or memcache and time) in very unusual cases.  If they were frequent changes I obviously would prefer to use memcache...</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1480537885, "post_id": 40897569, "comment_id": 69008956, "body": "Does this have anything to do with <code>defaultdict</code>? Sounds like you want to be able to hash an object based on attributes of the object rather than the object&#39;s own default equality and hashing rules? That is, you want to be able to say <code>by_last_name[p]</code> and have it seamlessly hash and compare based on the results of a call to <code>p.last_name()</code>, is that right? Or maybe just call <code>p.last_name()</code> and store that as the key, not storing <code>p</code> as the key at all?"}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1480537888, "post_id": 40897569, "comment_id": 69008958, "body": "But the last name <b>is</b> part of the definition of a person. A group of persons could be a hash of people by last name, but that&#39;s not a person."}, {"owner": {"reputation": 6192, "user_id": 1497199, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/43eaea281fd5ff0f5b459674e2308015?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1497199/dave"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1480538052, "post_id": 40897569, "comment_id": 69009044, "body": "@ShadowRanger There might be approaches that don&#39;t depend on <code>defaultdict</code> however, I tried to provide the specific case that I&#39;m dealing with: making a <code>defaultdict</code> that &quot;lumps together&quot; instances of a class by a subset of their properties w/o embedding this feature into the class itself."}, {"owner": {"reputation": 2096, "user_id": 6732794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xH8SY.gif?s=128&g=1", "display_name": "lazy dog", "link": "https://stackoverflow.com/users/6732794/lazy-dog"}, "edited": false, "score": 2, "creation_date": 1480538169, "post_id": 40897569, "comment_id": 69009110, "body": "As an aside, you might be interested in looking at <a href=\"https://www.python.org/dev/peps/pep-0455/\" rel=\"nofollow noreferrer\">PEP 455</a> (it was rejected, though)"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 2, "creation_date": 1480538257, "post_id": 40897569, "comment_id": 69009156, "body": "@Dave: Seems like what you have is already correct though. It wouldn&#39;t be sane to store <code>p</code> itself as the key since many non-equal keys would be treated as colliding, and implicitly calling <code>last_name</code> on all keys and storing that as the key is spooky action at a distance; implicit behaviors like that generally violate the Zen of Python (Explicit is better than Implicit). It would also be really weird to require people who want to find all people with a given last name to make a fake Person with that last name just to perform the lookup."}], "answers": [{"comments": [{"owner": {"reputation": 6192, "user_id": 1497199, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/43eaea281fd5ff0f5b459674e2308015?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1497199/dave"}, "edited": false, "score": 0, "creation_date": 1480539183, "post_id": 40897800, "comment_id": 69009674, "body": "This is not helpful to me because it involves putting functionality, <code>__key__</code>, into the class.  I&#39;m trying to avoid this."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "reply_to_user": {"reputation": 6192, "user_id": 1497199, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/43eaea281fd5ff0f5b459674e2308015?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1497199/dave"}, "edited": false, "score": 0, "creation_date": 1480540915, "post_id": 40897800, "comment_id": 69010648, "body": "Rewrote to put the logic in the container rather than the contained objects."}], "tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": true, "score": 1, "last_activity_date": 1480556945, "last_edit_date": 1480556945, "creation_date": 1480538505, "answer_id": 40897800, "question_id": 40897569, "link": "https://stackoverflow.com/questions/40897569/custom-key-function-for-python-defaultdict/40897800#40897800", "title": "Custom key function for python defaultdict", "body": "<p>Something like this maybe:</p>\n\n<pre><code>from collections import defaultdict\n\nclass defaultkeydict(defaultdict):\n\n    def __init__(self, default_factory, key=lambda x: x, *args, **kwargs):\n        defaultdict.__init__(self, default_factory, *args, **kwargs)\n        self.key_func = key\n\n    def __getitem__(self, key):\n        return defaultdict.__getitem__(self, self.get_key(key))\n\n    def __setitem__(self, key, value):\n        defaultdict.__setitem__(self, self.get_key(key), value)\n\n    def get_key(self, key):\n        try:\n            return self.key_func(key)\n        except Exception:\n            return key\n</code></pre>\n\n<p>Note the logic that falls back to the passed-in key if the key function can't be executed. That way you can still access the items using strings or whatever keys.</p>\n\n<p>Now:</p>\n\n<pre><code>p = Path(\"Seattle\", \"Boston\")\nd = defaultkeydict(list, key=lambda x: x.endpoint())\nd[p].append(p)\nprint(d)      # defaultdict(&lt;type 'list'&gt;, {'Boston': [&lt;__main__.Path object at ...&gt;]})\n</code></pre>\n"}], "owner": {"reputation": 6192, "user_id": 1497199, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/43eaea281fd5ff0f5b459674e2308015?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1497199/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 717, "favorite_count": 0, "accepted_answer_id": 40897800, "answer_count": 1, "score": 0, "last_activity_date": 1480556945, "creation_date": 1480537705, "last_edit_date": 1480538477, "question_id": 40897569, "link": "https://stackoverflow.com/questions/40897569/custom-key-function-for-python-defaultdict", "title": "Custom key function for python defaultdict", "body": "<p>What is a good way to define a custom key <em>function</em> analogous to the <code>key</code> argument to <code>list.sort</code>, for use in a <code>collections.defaultdict</code>?</p>\n\n<p>Here's an example use case:</p>\n\n<pre><code>import collections\n\nclass Path(object):\n    def __init__(self, start, end, *other_features):\n        self._first = start\n        self._last = end\n        self._rest = other_features\n    def startpoint(self):\n        return self._first\n    def endpoint(self):\n        return self._last\n    # Maybe it has __eq__ and __hash__, maybe not\n\npaths = [... a list of Path objects ...]\n\nby_endpoint = collections.defaultdict(list)\nfor p in people:\n    by_last_name[p.endpoint()].append(p)\n# do stuff that depends on lumping paths with the same endpoint together\n</code></pre>\n\n<p>What I desire is a way to tell <code>by_endpoint</code> to use <code>Path.endpoint</code> as the <code>key</code> function, similar to the <code>key</code> argument to <code>list.sort</code>, and not have to put this key definition into the <code>Path</code> class itself (via <code>__eq__</code> and <code>__hash__</code>), since it is just as sensible to also support \"lumping by start point\" as well.</p>\n"}, {"tags": ["python", "if-statement", "while-loop"], "comments": [{"owner": {"reputation": 1122, "user_id": 5356660, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155652442060571/picture?type=large", "display_name": "Ehsan", "link": "https://stackoverflow.com/users/5356660/ehsan"}, "edited": false, "score": 0, "creation_date": 1480537886, "post_id": 40897543, "comment_id": 69008957, "body": "Please specify the problem clearly. Use numbers if required.  Then, provide some example input and expected output combination! It helps!"}, {"owner": {"reputation": 533, "user_id": 6939201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914049db890cb3475c305df3149a952d?s=128&d=identicon&r=PG&f=1", "display_name": "petruz", "link": "https://stackoverflow.com/users/6939201/petruz"}, "edited": false, "score": 0, "creation_date": 1480538075, "post_id": 40897543, "comment_id": 69009063, "body": "I think that you forgot to increment t below &lt; &quot;if som == testgevallen[t]:print(&#39;Output moet zijn: &#39;, som)  doorgaan = False &gt;"}, {"owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "edited": false, "score": 1, "creation_date": 1480538752, "post_id": 40897543, "comment_id": 69009440, "body": "A more pythonic way of doing the first  <code>while t &lt; invoer:</code> would be <code>for t in range(invoer):</code>   The second <code>while t &lt; invoer</code> should be something like; <code>for vallen in testgevallen:</code>.  This would eliminate the need for <code>t</code>, and the indexing errors you seem to have."}, {"owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "edited": false, "score": 0, "creation_date": 1480539105, "post_id": 40897543, "comment_id": 69009630, "body": "The <code>while doorgaan == True:</code> is also clumsy.  You could exit the loop by replacing <code>doorgaan = False</code> with <code>break</code>, which makes it unclear why you would need <code>doorgan</code> at all."}, {"owner": {"reputation": 45, "user_id": 4647606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c648163759f2cd00831502a8bcabddd7?s=128&d=identicon&r=PG&f=1", "display_name": "DiaborMagics", "link": "https://stackoverflow.com/users/4647606/diabormagics"}, "reply_to_user": {"reputation": 533, "user_id": 6939201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914049db890cb3475c305df3149a952d?s=128&d=identicon&r=PG&f=1", "display_name": "petruz", "link": "https://stackoverflow.com/users/6939201/petruz"}, "edited": false, "score": 0, "creation_date": 1480587313, "post_id": 40897543, "comment_id": 69028211, "body": "@ Ehsan, I&#39;m pretty sure I did. @Petruz &amp; @ CAB, thanks. I&#39;m new to Pyhton. Only know a bit of Java (and HTML/CSS/JavaScript)."}], "answers": [{"comments": [{"owner": {"reputation": 1112, "user_id": 266371, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lM3vo.png?s=128&g=1", "display_name": "TextGeek", "link": "https://stackoverflow.com/users/266371/textgeek"}, "edited": false, "score": 1, "creation_date": 1480538405, "post_id": 40897676, "comment_id": 69009242, "body": "Nicholas shows the main thing. But I&#39;d add that as a matter of good practice, you don&#39;t need to read in all the values and save them in a list. You never need them all at once, so you can just read one, process it, and then read the next one into the same variable. Since you limit it to 50 numbers it&#39;s not a problem, but when you do bigger data, it will be."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1480538792, "post_id": 40897676, "comment_id": 69009459, "body": "I&#39;d wager <code>t</code> is not meant to be incremented in the inner loop, but <code>vermenigvuldiging</code> is, if it does not match both the requirements, which it is not in the second else-block."}, {"owner": {"reputation": 63, "user_id": 6905319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4cfb08eaf9675c688f8184e24fdd160?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Jones", "link": "https://stackoverflow.com/users/6905319/nicholas-jones"}, "edited": false, "score": 0, "creation_date": 1480539073, "post_id": 40897676, "comment_id": 69009608, "body": "I thought of that, but without <code>t</code> changing, you would never get a chance to increment <code>vermenigvuldiging</code>, unless <code>testgevallen[t] % getal == 0</code> is initially <code>False</code>"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 1, "creation_date": 1480539361, "post_id": 40897676, "comment_id": 69009780, "body": "I&#39;m starting to think that the <code>testgevallen[t] % getal == 0</code> is also broken: it can only be satisfied when <code>vermenigvuldiging</code> is <i>1</i>, or the number to test is 0, which it cannot be. Otherwise <code>getal</code> will be larger than the number to test and the modulo will always result in the number to test as well. The idea behind <code>getal = testgevallen[t] * vermenigvuldiging</code> is perhaps to quickly iterate numbers divisible by the number to test, but then the modulo is just unnecessary entirely."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1480539599, "post_id": 40897676, "comment_id": 69009917, "body": "Removing the modulo entirely, incrementing <code>vermenigvuldiging</code> if <code>som</code> does not match quickly finds that the smallest (not 100% sure on this) number for 25 to meet the requirements is 4975. It also works for 10, finding the 190 from the question description."}], "tags": [], "owner": {"reputation": 63, "user_id": 6905319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4cfb08eaf9675c688f8184e24fdd160?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Jones", "link": "https://stackoverflow.com/users/6905319/nicholas-jones"}, "is_accepted": false, "score": 1, "last_activity_date": 1480538070, "creation_date": 1480538070, "answer_id": 40897676, "question_id": 40897543, "link": "https://stackoverflow.com/questions/40897543/a-while-loop-in-my-program-has-multiple-ifs-but-never-reaches-the-bottom-one/40897676#40897676", "title": "A while loop in my program has multiple ifs, but never reaches the bottom one?", "body": "<pre><code>while doorgaan == True:\ngetal = testgevallen[t] * vermenigvuldiging\n\nif testgevallen[t] % getal == 0:\n    print(getal, ' - Dit getal is deelbaar door ', testgevallen[t])\n\n    som = sum(map(int, str(getal)))\n    print(som)\n\n    if som == testgevallen[t]:\n        print('Output moet zijn: ', som)\n        doorgaan = False\n\n    else:\n        doorgaan = True\n\nelse:\n    doorgaan = True\n    vermenigvuldiging += 1\n</code></pre>\n\n<p>In this while loop <code>t</code> is never modified, so <code>som == testgevallen[t]</code> will be constant, causing an infinite loop. </p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 4647606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c648163759f2cd00831502a8bcabddd7?s=128&d=identicon&r=PG&f=1", "display_name": "DiaborMagics", "link": "https://stackoverflow.com/users/4647606/diabormagics"}, "edited": false, "score": 0, "creation_date": 1480599268, "post_id": 40897957, "comment_id": 69036151, "body": "It was my goal to exit the program when the input numbers defy what the rules of what can be thrown into the program. Very basic handling, like I explained. But thanks for trying to help :D"}], "tags": [], "owner": {"reputation": 119, "user_id": 6570493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83dbad65e23aac67af4b514a00e3c929?s=128&d=identicon&r=PG&f=1", "display_name": "SamOh", "link": "https://stackoverflow.com/users/6570493/samoh"}, "is_accepted": false, "score": 0, "last_activity_date": 1480539046, "creation_date": 1480539046, "answer_id": 40897957, "question_id": 40897543, "link": "https://stackoverflow.com/questions/40897543/a-while-loop-in-my-program-has-multiple-ifs-but-never-reaches-the-bottom-one/40897957#40897957", "title": "A while loop in my program has multiple ifs, but never reaches the bottom one?", "body": "<p>First, you should look up the usage of sys.exit() on the <a href=\"https://docs.python.org/2/library/sys.html\" rel=\"nofollow noreferrer\">docs here</a>. This command will exit the program when called, so if it is called at the end of the first while loop, the second while loop won't ever get run. The command you should use to break out of a while loop is break as used below</p>\n\n<pre><code>while t &lt; invoer:\n\ninvoer2 = int(input('Vul een testgeval in groter dan 0 en kleiner of gelijk aan 100: '))\nif 0 &lt; invoer2 &lt;= 100:\n    print('Testgeval ', t + 1, 'is: ', invoer2)\n    testgevallen.append(invoer2)\n    t += 1\n    print('Array is ', testgevallen)\nelse:\n    print('Het getal moet groter zijn dan 0 en kleiner of gelijk aan 100!!')\n    break.\n</code></pre>\n\n<p>I suspect that the second while loop never gets run because you are using sys.exit() instead of just breaking from the loop. Also, in the second while loop, you need to alter your t variable or else <code>Output moet zijn: ', som</code> will constantly be printed and stuck in this loop.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 4647606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c648163759f2cd00831502a8bcabddd7?s=128&d=identicon&r=PG&f=1", "display_name": "DiaborMagics", "link": "https://stackoverflow.com/users/4647606/diabormagics"}, "edited": false, "score": 0, "creation_date": 1480599101, "post_id": 40898382, "comment_id": 69036035, "body": "Thanks a ton! I was able to figure it out thanks to you! And yes, I do some unneccesary prints from time to time, just for myself to confirm stuff while I test. I always remove it after finishing up."}], "tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": true, "score": 1, "last_activity_date": 1480541949, "last_edit_date": 1480541949, "creation_date": 1480540717, "answer_id": 40898382, "question_id": 40897543, "link": "https://stackoverflow.com/questions/40897543/a-while-loop-in-my-program-has-multiple-ifs-but-never-reaches-the-bottom-one/40898382#40898382", "title": "A while loop in my program has multiple ifs, but never reaches the bottom one?", "body": "<p>There are multiple issues at hand:</p>\n\n<p>In your inner loop in the second test's (if the sum of digits matches) else branch you've forgot to increment <code>vermenigvuldiging</code>, so when it \"finds\" the first <code>getal</code> that satisfies the modulo condition, it will loop forever.</p>\n\n<p>Handling of <code>getal</code> in the modulo test is also broken and will only match when <code>vermenigvuldiging</code> is 1, otherwise <code>testgevallen[t] % getal</code> will always equal <code>testgevallen[t]</code>, since <code>getal</code> is larger. This will also result in an infinite loop. In fact the whole</p>\n\n<pre><code>getal = testgevallen[t] * vermenigvuldiging\n</code></pre>\n\n<p>seems like it is meant to iterate through numbers divisible by <code>testgevallen[t]</code> quickly in ascending order. This makes the whole modulo test redundant.</p>\n\n<p>A working solution for at least the input <em>10</em> could be for example:</p>\n\n<pre><code>for tv in testgevallen:\n    print('Opgegeven nummer ', t + 1, ' is ', tv)\n    vermenigvuldiging = 1\n\n    while True:\n        getal = tv * vermenigvuldiging\n        # I've no idea what this says, but probably something along the lines\n        # of \"is divisible by\" and can be removed. Do print `getal` though\n        # when `som` is a match.\n        print(getal, ' - Dit getal is deelbaar door ', tv)\n        som = sum(map(int, str(getal)))\n        print(som)\n\n        if som == tv:\n            print('Output moet zijn: ', som)\n            break\n\n        # This is going to take a loooooong time for tv == 100    \n        vermenigvuldiging += 1\n</code></pre>\n\n<p>Note that I've removed using an index variable to iterate through the values of the list. Just iterate through it directly. You could also \"enhance\" your solution further using <a href=\"https://docs.python.org/3/library/itertools.html#itertools.count\" rel=\"nofollow noreferrer\"><code>itertools.count</code></a>, in which case you'd replace the while-loop with something like:</p>\n\n<pre><code>for vermenigvuldiging in count(1):\n    ...\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4647606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c648163759f2cd00831502a8bcabddd7?s=128&d=identicon&r=PG&f=1", "display_name": "DiaborMagics", "link": "https://stackoverflow.com/users/4647606/diabormagics"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 40898382, "answer_count": 3, "score": 0, "last_activity_date": 1480541949, "creation_date": 1480537586, "question_id": 40897543, "link": "https://stackoverflow.com/questions/40897543/a-while-loop-in-my-program-has-multiple-ifs-but-never-reaches-the-bottom-one", "title": "A while loop in my program has multiple ifs, but never reaches the bottom one?", "body": "<p>I am in the middle of a really difficult to grasp assignment for school. I've been trying for a few days and I think I'm finally almost done, but... I'm stuck again and don't know why. </p>\n\n<p>I am supposed to let the user fill in a number invoer (Dutch)/input. That number is supposed to be smaller than, or equal to 50. This number determines how many more inputs the user can do - these new inputs are test cases.\nEach test case should be a number larger than 0, but equal to, or lower than 100. It is not required to go very deep into handling bad input, so I only use some basic handling for that.</p>\n\n<p>Then what needs to be tested for each test case, is what the smallest number is that is divisible by the test case, but the sum of the separate digits of that smallest number should equal your test case itself. So in the example they state: input = 1, (which means 1 test case, but they dont state that), input 2 = 10 (which means your only test case is the number 10, but they dont state that). What it sends out is the number 190 (this is because 190/10 = 19, so it's a correct outcome, but 1+9+0 = 10 as well, so it passes the second test, but again, they dont state that. I had to figure this all out myself, which is why the assigment takes me so long... the question itself is in Dutch and barely gives you any information at all).</p>\n\n<p>So what my program DOES test, if I input number 25 as test case for example, that 25/25 = 1, so valid and 2+5 = 7. However, after calculating this number 7, it never seems to check the second condition. The sum of the digits needs to be 25, not 7. The program gets thrown in an infinite loop now and I don't see what is wrong.</p>\n\n<p>I will post my code below. I apologize for the variable names and printed text, as they are in Dutch. I hope I explained the meaning of all this clearly enough.</p>\n\n<pre><code>import sys\n\ninvoer = int(input('Vul het aantal testgevallen in: '))\nif invoer &lt;= 50:\n    invoer = invoer\nelse:\n    print('Het getal moet groter kleiner dan of gelijk aan 50 zijn!!')\n    sys.exit()\n\nt = 0\ntestgevallen = []\n\nwhile t &lt; invoer:\n\n    invoer2 = int(input('Vul een testgeval in groter dan 0 en kleiner of gelijk aan 100: '))\n    if 0 &lt; invoer2 &lt;= 100:\n        print('Testgeval ', t + 1, 'is: ', invoer2)\n        testgevallen.append(invoer2)\n        t += 1\n        print('Array is ', testgevallen)\n    else:\n        print('Het getal moet groter zijn dan 0 en kleiner of gelijk aan 100!!')\n        sys.exit()\nt = 0\n\nwhile t &lt; invoer:\n    print('Opgegeven nummer ', t + 1, ' is ', testgevallen[t])\n    vermenigvuldiging = 1\n\n    doorgaan = True\n\n    while doorgaan == True:\n        getal = testgevallen[t] * vermenigvuldiging\n\n        if testgevallen[t] % getal == 0:\n            print(getal, ' - Dit getal is deelbaar door ', testgevallen[t])\n\n            som = sum(map(int, str(getal)))\n            print(som)\n\n            if som == testgevallen[t]:\n                print('Output moet zijn: ', som)\n                doorgaan = False\n\n            else:\n                doorgaan = True\n\n        else:\n            doorgaan = True\n            vermenigvuldiging += 1\n\n    t += 1\n    doorgaan = doorgaan\n</code></pre>\n\n<p>I hope you guys can help me. Thanks a lot for you time in advance, I know it's quite the wall of text.</p>\n"}, {"tags": ["python", "turtle-graphics"], "comments": [{"owner": {"reputation": 770, "user_id": 3960650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a71715843217569b290f0980cd7b72da?s=128&d=identicon&r=PG&f=1", "display_name": "DejaVuSansMono", "link": "https://stackoverflow.com/users/3960650/dejavusansmono"}, "edited": false, "score": 0, "creation_date": 1480537629, "post_id": 40897518, "comment_id": 69008789, "body": "I think you are mistaken about where the zeroith position in a window is. There is my hint for you :)"}, {"owner": {"reputation": 59, "user_id": 7232906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c37d4538487bbd7c6a3bf72b2f81e0a8?s=128&d=identicon&r=PG&f=1", "display_name": "JakeNBake", "link": "https://stackoverflow.com/users/7232906/jakenbake"}, "reply_to_user": {"reputation": 770, "user_id": 3960650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a71715843217569b290f0980cd7b72da?s=128&d=identicon&r=PG&f=1", "display_name": "DejaVuSansMono", "link": "https://stackoverflow.com/users/3960650/dejavusansmono"}, "edited": false, "score": 0, "creation_date": 1480537732, "post_id": 40897518, "comment_id": 69008846, "body": "<a href=\"https://gyazo.com/3ad5268231b3217b81636cc070573b75\" rel=\"nofollow noreferrer\">gyazo.com/3ad5268231b3217b81636cc070573b75</a>"}, {"owner": {"reputation": 770, "user_id": 3960650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a71715843217569b290f0980cd7b72da?s=128&d=identicon&r=PG&f=1", "display_name": "DejaVuSansMono", "link": "https://stackoverflow.com/users/3960650/dejavusansmono"}, "edited": false, "score": 0, "creation_date": 1480537879, "post_id": 40897518, "comment_id": 69008950, "body": "No, I understand your problem just fine. The clouds go down with a higher number and up with a lower one."}, {"owner": {"reputation": 59, "user_id": 7232906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c37d4538487bbd7c6a3bf72b2f81e0a8?s=128&d=identicon&r=PG&f=1", "display_name": "JakeNBake", "link": "https://stackoverflow.com/users/7232906/jakenbake"}, "reply_to_user": {"reputation": 770, "user_id": 3960650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a71715843217569b290f0980cd7b72da?s=128&d=identicon&r=PG&f=1", "display_name": "DejaVuSansMono", "link": "https://stackoverflow.com/users/3960650/dejavusansmono"}, "edited": false, "score": 0, "creation_date": 1480538423, "post_id": 40897518, "comment_id": 69009254, "body": "Maybe I should&#39;ve been more specific. What I&#39;m trying to do is with the for loop have the first time it loops it change the y position down 10 then the next time it loops have the position go up 10 back to where it started."}], "answers": [{"comments": [{"owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "edited": false, "score": 1, "creation_date": 1480539626, "post_id": 40898038, "comment_id": 69009927, "body": "Do you really need another counter when you already have <code>side</code>?"}, {"owner": {"reputation": 59, "user_id": 7232906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c37d4538487bbd7c6a3bf72b2f81e0a8?s=128&d=identicon&r=PG&f=1", "display_name": "JakeNBake", "link": "https://stackoverflow.com/users/7232906/jakenbake"}, "edited": false, "score": 0, "creation_date": 1480540250, "post_id": 40898038, "comment_id": 69010265, "body": "Thanks dude I was thinking about something like that but didn&#39;t know how to do it."}], "tags": [], "owner": {"reputation": 92, "user_id": 2642437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f53e0c00fbc91d8e6cb5628bea9ef08e?s=128&d=identicon&r=PG", "display_name": "medman826", "link": "https://stackoverflow.com/users/2642437/medman826"}, "is_accepted": true, "score": 3, "last_activity_date": 1480540163, "last_edit_date": 1480540163, "creation_date": 1480539346, "answer_id": 40898038, "question_id": 40897518, "link": "https://stackoverflow.com/questions/40897518/how-can-a-turtle-be-moved-up-then-down-in-a-for-loop/40898038#40898038", "title": "How can a turtle be moved up then down in a for loop?", "body": "<p>You could check whether <code>side</code> is even or odd to decide whether to increment or decrement your cloud location. Like so:</p>\n\n<pre><code>for side in range(15):\n    drawCloud(joe,x,y)\n    x=x+40\n    if(side%2==0):\n        y=y-10\n    else:\n        y=y+10\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 7232906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c37d4538487bbd7c6a3bf72b2f81e0a8?s=128&d=identicon&r=PG&f=1", "display_name": "JakeNBake", "link": "https://stackoverflow.com/users/7232906/jakenbake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 569, "favorite_count": 0, "accepted_answer_id": 40898038, "answer_count": 1, "score": 1, "last_activity_date": 1480541112, "creation_date": 1480537510, "last_edit_date": 1480541112, "question_id": 40897518, "link": "https://stackoverflow.com/questions/40897518/how-can-a-turtle-be-moved-up-then-down-in-a-for-loop", "title": "How can a turtle be moved up then down in a for loop?", "body": "<p>So I'm learning python in a virtual programming class and I have an assignment where I have to create a picture using Turtle Graphics. I'm using things like for loops and programmer-defined functions in the program but I'm having a problem with something I want to do in my picture. I'm drawing clouds in the sky and I'm trying to get the clouds to be drawn at different positions. I'm increasing the x coordinate by increments of 40 but I'm trying to get the cloud to be placed higher and lower as it goes across. It's at the end of this list of code:</p>\n\n<pre><code>import turtle\n\ndef backFill(b, c, x, y, l, h):\n    b.penup()\n    b.setpos(x, y)\n    b.color(c)\n    b.pendown()\n    b.begin_fill()\n    for side in range(2):\n        b.forward(l)\n        b.left(90)\n        b.forward(h)\n        b.left(90)\n    b.end_fill()\n\ndef drawCloud(c, x, y):\n    c.penup()\n    c.setpos(x, y)\n    c.pendown()\n    c.color(\"grey\")\n    c.begin_fill()\n    for side in range(5):\n        c.circle(10)\n        c.left(80)\n    c.end_fill()\n\ndef main():\n    print(\"Cars\")\n    joe = turtle.Turtle()\n    joe.speed(0)\n\n    backFill(joe,\"green\",-200,-100,400,25)\n    backFill(joe,\"black\",-200,-75,400,75)\n    backFill(joe,\"green\",-200,0,400,25)\n    backFill(joe,\"sky blue\",-200,25,400,110)\n\n    x=-192.5\n    for side in range(10):\n        backFill(joe,\"yellow\",x,-40,25,5)\n        x=x+40\n\n    x=-180\n    y=100\n    for side in range(15):\n        drawCloud(joe,x,y)\n        x=x+40\n        y=y-10\n\nmain()\n</code></pre>\n\n<p>Currently the clouds slowly descend as each one is drawn but what I'm trying to do is make clouds at different heights like one cloud is at 100 the next 90 then back to 100, etc. I tried things like <code>y=y-10, y+10</code> to see if the first time it repeated it would go down 10 then the next time it would go up 10.</p>\n\n<p><a href=\"https://gyazo.com/3ad5268231b3217b81636cc070573b75\" rel=\"nofollow noreferrer\">https://gyazo.com/3ad5268231b3217b81636cc070573b75</a></p>\n\n<p>tl;dr/simpler explanation: I'm trying to move a looped picture up and down so it's not simply in a straight line. How would I move it down one time then up another time within a for loop?</p>\n"}, {"tags": ["python", "python-3.x", "python-3.4", "python-asyncio"], "answers": [{"comments": [{"owner": {"reputation": 326, "user_id": 8141444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d61f3c6e0acdab14f845fd1feb82f0a?s=128&d=identicon&r=PG", "display_name": "maarten", "link": "https://stackoverflow.com/users/8141444/maarten"}, "edited": false, "score": 0, "creation_date": 1532905994, "post_id": 40909197, "comment_id": 90136115, "body": "About the exception related to the signal handlers: You can also avoid this exception by calling <code>loop.close()</code> at the end."}, {"owner": {"reputation": 8813, "user_id": 508907, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/gRGJK.jpg?s=128&g=1", "display_name": "ntg", "link": "https://stackoverflow.com/users/508907/ntg"}, "reply_to_user": {"reputation": 326, "user_id": 8141444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d61f3c6e0acdab14f845fd1feb82f0a?s=128&d=identicon&r=PG", "display_name": "maarten", "link": "https://stackoverflow.com/users/8141444/maarten"}, "edited": false, "score": 0, "creation_date": 1592441710, "post_id": 40909197, "comment_id": 110429943, "body": "@maarten: No, I couldnt :S I really wish I could... All my tasks are cancelling too..."}], "tags": [], "owner": {"reputation": 1544, "user_id": 3020799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVPDN.jpg?s=128&g=1", "display_name": "Yeray Diaz Diaz", "link": "https://stackoverflow.com/users/3020799/yeray-diaz-diaz"}, "is_accepted": true, "score": 20, "last_activity_date": 1480590797, "creation_date": 1480590797, "answer_id": 40909197, "question_id": 40897428, "link": "https://stackoverflow.com/questions/40897428/please-explain-task-was-destroyed-but-it-is-pending/40909197#40909197", "title": "Please explain &quot;Task was destroyed but it is pending!&quot;", "body": "<p>The problem comes from closing the loop immediately after cancelling the tasks. As the <a href=\"https://docs.python.org/3/library/asyncio-task.html#asyncio.Task.cancel\" rel=\"noreferrer\">cancel() docs state</a> </p>\n\n<blockquote>\n  <p>\"This arranges for a CancelledError to be thrown into the wrapped coroutine on <strong>the next cycle</strong> through the event loop.\"</p>\n</blockquote>\n\n<p>Take this snippet of code:</p>\n\n<pre><code>import asyncio\nimport signal\n\n\nasync def pending_doom():\n    await asyncio.sleep(2)\n    print(\"&gt;&gt; Cancelling tasks now\")\n    for task in asyncio.Task.all_tasks():\n        task.cancel()\n\n    print(\"&gt;&gt; Done cancelling tasks\")\n    asyncio.get_event_loop().stop()\n\n\ndef ask_exit():\n    for task in asyncio.Task.all_tasks():\n        task.cancel()\n\n\nasync def looping_coro():\n    print(\"Executing coroutine\")\n    while True:\n        try:\n            await asyncio.sleep(0.25)\n        except asyncio.CancelledError:\n            print(\"Got CancelledError\")\n            break\n\n        print(\"Done waiting\")\n\n    print(\"Done executing coroutine\")\n    asyncio.get_event_loop().stop()\n\n\ndef main():\n    asyncio.async(pending_doom())\n    asyncio.async(looping_coro())\n\n    loop = asyncio.get_event_loop()\n    for sig in (signal.SIGINT, signal.SIGTERM):\n        loop.add_signal_handler(sig, ask_exit)\n\n    loop.run_forever()\n\n    # I had to manually remove the handlers to\n    # avoid an exception on BaseEventLoop.__del__\n    for sig in (signal.SIGINT, signal.SIGTERM):\n        loop.remove_signal_handler(sig)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>Notice <code>ask_exit</code> cancels the tasks but does not <code>stop</code> the loop, on the next cycle <code>looping_coro()</code> stops it. The output if you cancel it is:</p>\n\n<pre><code>Executing coroutine\nDone waiting\nDone waiting\nDone waiting\nDone waiting\n^CGot CancelledError\nDone executing coroutine\n</code></pre>\n\n<p>Notice how <code>pending_doom</code> cancels and stops the loop <em>immediately after</em>. If you let it run until the <code>pending_doom</code> coroutines awakes from the sleep you can see the same warning you're getting:</p>\n\n<pre><code>Executing coroutine\nDone waiting\nDone waiting\nDone waiting\nDone waiting\nDone waiting\nDone waiting\nDone waiting\n&gt;&gt; Cancelling tasks now\n&gt;&gt; Done cancelling tasks\nTask was destroyed but it is pending!\ntask: &lt;Task pending coro=&lt;looping_coro() running at canceling_coroutines.py:24&gt; wait_for=&lt;Future cancelled&gt;&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24361, "user_id": 629685, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cadce7a59af35a66f18b9aaddebfd50f?s=128&d=identicon&r=PG", "display_name": "I159", "link": "https://stackoverflow.com/users/629685/i159"}, "is_accepted": false, "score": 8, "last_activity_date": 1480762066, "last_edit_date": 1592644375, "creation_date": 1480762066, "answer_id": 40946916, "question_id": 40897428, "link": "https://stackoverflow.com/questions/40897428/please-explain-task-was-destroyed-but-it-is-pending/40946916#40946916", "title": "Please explain &quot;Task was destroyed but it is pending!&quot;", "body": "<p>The meaning of the issue is that a loop doesn't have time to finish all the tasks.</p>\n<blockquote>\n<p>This arranges for a CancelledError to be thrown into the wrapped coroutine on the next cycle through the event loop.</p>\n</blockquote>\n<p>There is no chance to do a &quot;next cycle&quot; of the loop in your approach. To make it properly you should move a stop operation to a separate non-cyclic coroutine to give your loop a chance to finish.</p>\n<p>Second significant thing is <code>CancelledError</code> raising.</p>\n<blockquote>\n<p>Unlike Future.cancel(), this does not guarantee that the task will be cancelled: the exception might be caught and acted upon, delaying cancellation of the task or preventing cancellation completely. The task may also return a value or raise a different exception.</p>\n<p>Immediately after this method is called, cancelled() will not return True (unless the task was already cancelled). A task will be marked as cancelled when the wrapped coroutine terminates with a CancelledError exception (even if cancel() was not called).</p>\n</blockquote>\n<p>So after cleanup your coroutine must raise <code>CancelledError</code> to be marked as cancelled.</p>\n<p>Using an extra coroutine to stop the loop is not an issue because it is not cyclic and be done immediately after execution.</p>\n<pre><code>def main():                                              \n    loop = asyncio.get_event_loop()                      \n    asyncio.ensure_future(listen_to_ipc_channel_layer()) \n                                                     \n    for sig in (signal.SIGINT, signal.SIGTERM):          \n        loop.add_signal_handler(sig, ask_exit)           \n    loop.run_forever()                                   \n    print(&quot;Close&quot;)                                       \n    loop.close()                                         \n                                                     \n                                                     \n@asyncio.coroutine                                       \ndef listen_to_ipc_channel_layer():                       \n    while True:                                          \n        try:                                             \n            print(&quot;Running&quot;)                                 \n            yield from asyncio.sleep(0.1)                \n        except asyncio.CancelledError as e:              \n            print(&quot;Break it out&quot;)                        \n            raise e # Raise a proper error\n                                                     \n                                          \n# Stop the loop concurrently           \n@asyncio.coroutine                                       \ndef exit():                                              \n    loop = asyncio.get_event_loop()                      \n    print(&quot;Stop&quot;)                                        \n    loop.stop()                                          \n\n\ndef ask_exit():                          \n    for task in asyncio.Task.all_tasks():\n        task.cancel()                    \n    asyncio.ensure_future(exit())        \n                                     \n                                     \nif __name__ == &quot;__main__&quot;:               \n    main()                               \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8813, "user_id": 508907, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/gRGJK.jpg?s=128&g=1", "display_name": "ntg", "link": "https://stackoverflow.com/users/508907/ntg"}, "is_accepted": false, "score": 2, "last_activity_date": 1607137277, "last_edit_date": 1607137277, "creation_date": 1592461875, "answer_id": 62443715, "question_id": 40897428, "link": "https://stackoverflow.com/questions/40897428/please-explain-task-was-destroyed-but-it-is-pending/62443715#62443715", "title": "Please explain &quot;Task was destroyed but it is pending!&quot;", "body": "<p>The reasons this happens is as explained by @Yeray Diaz Diaz\nIn my case, I wanted to cancel all the tasks that were not done after the first finished, so I ended up cancelling the extra jobs, then using <code>loop._run_once()</code> to run the loop a bit more and allow them to stop:</p>\n<pre><code>    loop = asyncio.get_event_loop()\n    job = asyncio.wait(tasks, return_when=asyncio.FIRST_COMPLETED)\n    tasks_finished,tasks_pending, = loop.run_until_complete(job)\n    tasks_done = [t for t in tasks_finished if t.exception() is None]\n    if tasks_done == 0:\n        raise Exception(&quot;Failed for all tasks.&quot;)\n    assert len(tasks_done) == 1\n    data = tasks_done[0].result()\n    for t in tasks_pending:\n        t.cancel()\n        t.cancel()\n    while not all([t.done() for t in tasks_pending]):\n        loop._run_once()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 314, "user_id": 5785894, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yoYgE_FaThU/AAAAAAAAAAI/AAAAAAAAA4Y/IfSS0h0M-8A/photo.jpg?sz=128", "display_name": "Cal", "link": "https://stackoverflow.com/users/5785894/cal"}, "is_accepted": false, "score": 3, "last_activity_date": 1592847621, "creation_date": 1592847621, "answer_id": 62520369, "question_id": 40897428, "link": "https://stackoverflow.com/questions/40897428/please-explain-task-was-destroyed-but-it-is-pending/62520369#62520369", "title": "Please explain &quot;Task was destroyed but it is pending!&quot;", "body": "<p>I had this message and I believe it was caused by garbage collection of pending task. The Python developers were debating whether tasks created in asyncio should create strong references and decided they shouldn't (after 2 days of looking into this problem I strongly disagree! ... see the discussion here <a href=\"https://bugs.python.org/issue21163\" rel=\"nofollow noreferrer\">https://bugs.python.org/issue21163</a>)</p>\n<p>I created this utility for myself to make strong references to tasks and automatically clean it up (still need to test it thoroughly)...</p>\n<pre><code>import asyncio\n\n#create a strong reference to tasks since asyncio doesn't do this for you\ntask_references = set()\n\ndef register_ensure_future(coro):\n    task = asyncio.ensure_future(coro)\n    task_references.add(task)\n\n    # Setup cleanup of strong reference on task completion...\n    def _on_completion(f):\n        task_references.remove(f)\n    task.add_done_callback(_on_completion)\n    \n    return task\n</code></pre>\n<p>It seems to me that tasks should have a strong reference for as long as they are active! But asyncio doesn't do that for you so you can have some bad surprises once gc happens and long hours of debugging.</p>\n"}], "owner": {"reputation": 2395, "user_id": 2182044, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/63cPW.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2182044/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35783, "favorite_count": 5, "accepted_answer_id": 40909197, "answer_count": 4, "score": 37, "last_activity_date": 1607137277, "creation_date": 1480537185, "last_edit_date": 1481612637, "question_id": 40897428, "link": "https://stackoverflow.com/questions/40897428/please-explain-task-was-destroyed-but-it-is-pending", "title": "Please explain &quot;Task was destroyed but it is pending!&quot;", "body": "<p>Python 3.4.2</p>\n\n<p>I am learning asyncio and I use it to continously listen IPC bus, while gbulb listens to the dbus.</p>\n\n<h3>Some side notes:</h3>\n\n<p><em>So I created a function <code>listen_to_ipc_channel_layer</code> that continously listens for incoming messages on the IPC channel and passes the message to a <code>message_handler</code>.</em></p>\n\n<p><em>I am also listening to SIGTERM and SIGINT. So when I send a SIGTERM to the python process running the code you find at the bottom, the script should terminate gracefully.</em></p>\n\n<h3>The problem</h3>\n\n<p>\u2026 I am having is the following warning:</p>\n\n<pre><code>got signal 15: exit\nTask was destroyed but it is pending!\ntask: &lt;Task pending coro=&lt;listen_to_ipc_channel_layer() running at /opt/mainloop-test.py:23&gt; wait_for=&lt;Future cancelled&gt;&gt;\n\nProcess finished with exit code 0\n</code></pre>\n\n<p>\u2026 with the following code:</p>\n\n<pre><code>import asyncio\nimport gbulb\nimport signal\nimport asgi_ipc as asgi\n\ndef main():\n    asyncio.async(listen_to_ipc_channel_layer())\n    loop = asyncio.get_event_loop()\n\n    for sig in (signal.SIGINT, signal.SIGTERM):\n        loop.add_signal_handler(sig, ask_exit)\n\n    # Start listening on the Linux IPC bus for incoming messages\n    loop.run_forever()\n    loop.close()\n\n@asyncio.coroutine\ndef listen_to_ipc_channel_layer():\n    \"\"\"Listens to the Linux IPC bus for messages\"\"\"\n    while True:\n        message_handler(message=channel_layer.receive([\"my_channel\"]))\n        try:\n            yield from asyncio.sleep(0.1)\n        except asyncio.CancelledError:\n            break\n\ndef ask_exit():\n    loop = asyncio.get_event_loop()\n    for task in asyncio.Task.all_tasks():\n        task.cancel()\n    loop.stop()\n\n\nif __name__ == \"__main__\":\n    gbulb.install()\n    # Connect to the IPC bus\n    channel_layer = asgi.IPCChannelLayer(prefix=\"my_channel\")\n    main()\n</code></pre>\n\n<p>I still only understand very little of asyncio, but I think I know what is going on. While waiting for <code>yield from asyncio.sleep(0.1)</code> the signal handler caught the SIGTERM and in that process it calls <code>task.cancel()</code>.</p>\n\n<p><strong>Question thrown in: Shouldn't this trigger the <code>CancelledError</code> within the <code>while True:</code> loop?</strong> (Because it is not, but that is how I understand <a href=\"https://docs.python.org/3.4/library/asyncio-task.html#task\" rel=\"noreferrer\">\"Calling cancel() will throw a CancelledError to the wrapped coroutine\"</a>).</p>\n\n<p>Eventually <code>loop.stop()</code> is called which stops the loop without waiting for either <code>yield from asyncio.sleep(0.1)</code> to return a result or even the whole coroutine <code>listen_to_ipc_channel_layer</code>.</p>\n\n<p>Please correct me if I am wrong.</p>\n\n<p>I think the only thing I need to do is to make my program wait for the <code>yield from asyncio.sleep(0.1)</code> to return a result <em>and/or</em> coroutine to break out the while-loop and finish.</p>\n\n<p>I believe I confuse a lot of things. Please help me get those things straight so that I can figure out how to gracefully close the event loop without warning.</p>\n"}, {"tags": ["python", "html", "css", "image", "flask"], "comments": [{"owner": {"reputation": 15081, "user_id": 978961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9562cbc3556ac68f081dfda387a9f4ab?s=128&d=identicon&r=PG", "display_name": "dirn", "link": "https://stackoverflow.com/users/978961/dirn"}, "edited": false, "score": 0, "creation_date": 1480605546, "post_id": 40897345, "comment_id": 69040724, "body": "Are <code>hudson1.jpg</code> and <code>theme.css</code> in the same folder? If not, that&#39;s your problem."}], "answers": [{"tags": [], "owner": {"reputation": 815, "user_id": 7243142, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cZc7H8fbkUo/AAAAAAAAAAI/AAAAAAAAhA0/AzJ54NAuceo/photo.jpg?sz=128", "display_name": "Kevin Schellenberg", "link": "https://stackoverflow.com/users/7243142/kevin-schellenberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1480714138, "creation_date": 1480714138, "answer_id": 40941091, "question_id": 40897345, "link": "https://stackoverflow.com/questions/40897345/picture-wont-load-into-div-when-using-flask/40941091#40941091", "title": "Picture wont load into div when using Flask", "body": "<p>Your selector is incorrect.</p>\n\n<pre><code>#mainPicture.picture\n</code></pre>\n\n<p>Is looking for an element with id mainPicture and class picture.  You should use:</p>\n\n<pre><code>#mainPicture &gt; .picture\n</code></pre>\n\n<p>That will select the an element with a class of picture that is a child of an element with an id of mainPicture.</p>\n"}], "owner": {"reputation": 83, "user_id": 7074846, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d1e23512615f16b795be4c3d37d1aa7c?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan ", "link": "https://stackoverflow.com/users/7074846/dylan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1492162223, "creation_date": 1480536885, "last_edit_date": 1492162223, "question_id": 40897345, "link": "https://stackoverflow.com/questions/40897345/picture-wont-load-into-div-when-using-flask", "title": "Picture wont load into div when using Flask", "body": "<p>I am creating a single page application but my #mainPicture will not load in the div its suppose to. This is where I am calling it in my <strong>index.html</strong>:</p>\n\n<pre><code>&lt;body&gt;\n\n&lt;div id=\"mainPicture\"&gt;\n    &lt;div class=\"picture\"&gt;\n        &lt;div id=\"headerTitle\"&gt;Places I've Been&lt;/div&gt;\n        &lt;div id=\"headerSubtext\"&gt;A Blog About My Travels&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>This is my code for linking stylesheet:</p>\n\n<pre><code>&lt;link rel= \"stylesheet\" type= \"text/css\" href= \"{{ url_for('static', filename='css/theme.css') }}\"&gt;\n</code></pre>\n\n<p>And this is the CSS for it in my <strong>theme.css</strong>:</p>\n\n<pre><code>#mainPicture\n{\n    width:670px;\n    height:497px;\n    background-color:#FFFFFF;\n}\n\n#mainPicture.picture\n{\n    position:relative;\n    width:650px;\n    height:487px;\n    top:10px;\n    background-image:url(hudson1.jpg);\n    background-repeat:no-repeat;\n    margin-left:10px;\n}\n</code></pre>\n\n<p>It just shows up as a white space the size of the picture. I am using CMDER to run my webpage. The image hudson1.jpg is in the same folder as the theme.css also but it wont show it up in the div.</p>\n\n<p>Any help would be great.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 9572, "user_id": 2543372, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8814f53d616260c4971fd77f8b3f54a1?s=128&d=identicon&r=PG", "display_name": "Julien Marrec", "link": "https://stackoverflow.com/users/2543372/julien-marrec"}, "edited": false, "score": 2, "creation_date": 1480541277, "post_id": 40897445, "comment_id": 69010827, "body": "Great answer.  Just for the record, the reindex solution here is about 4 times faster than the crosstab (2ms versus 8ms)"}], "tags": [], "owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "is_accepted": true, "score": 3, "last_activity_date": 1480537261, "creation_date": 1480537261, "answer_id": 40897445, "question_id": 40897334, "link": "https://stackoverflow.com/questions/40897334/pandas-groupby-columns-missing/40897445#40897445", "title": "pandas groupby columns missing", "body": "<p>You can use reindex:</p>\n\n<pre><code>df2\nOut: \n                Count\nnames   passed       \nBryan   NO          4\nCharlie YES         4\nJaimie  NO          2\n        YES         2\n</code></pre>\n\n<hr>\n\n<pre><code>idx = pd.MultiIndex.from_product([df['names'].unique(), df['passed'].unique()])\n\ndf2.reindex(idx, fill_value=0)\nOut: \n             Count\nCharlie YES      4\n        NO       0\nBryan   YES      0\n        NO       4\nJaimie  YES      2\n        NO       2\n</code></pre>\n\n<p>For this example, crosstab with unstack can also be an option:</p>\n\n<pre><code>pd.crosstab(df['passed'], df['names']).unstack()\nOut: \nnames    passed\nBryan    NO        4\n         YES       0\nCharlie  NO        0\n         YES       4\nJaimie   NO        2\n         YES       2\ndtype: int64\n</code></pre>\n"}], "owner": {"reputation": 247, "user_id": 5669565, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3216b282fa4582c3c58d2f525ca6ca88?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5669565/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 0, "accepted_answer_id": 40897445, "answer_count": 1, "score": 1, "last_activity_date": 1480537754, "creation_date": 1480536850, "last_edit_date": 1480537754, "question_id": 40897334, "link": "https://stackoverflow.com/questions/40897334/pandas-groupby-columns-missing", "title": "pandas groupby columns missing", "body": "<p>How can I get each of the individual names in the following script to have both 'YES' and 'NO' counts beside their names? I need to have some value for each even if it's zero.    </p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame({'names': ['Charlie', 'Charlie', 'Charlie', 'Charlie', 'Bryan', \n                             'Bryan', 'Bryan', 'Bryan', 'Jaimie', 'Jaimie',\n                             'Jaimie', 'Jaimie'], \n                   'passed': ['YES', 'YES', 'YES', 'YES', 'NO', 'NO', 'NO', 'NO', \n                              'YES', 'NO', 'YES', 'NO']})\n\ndf2 = pd.DataFrame(df.groupby([df['names'], df['passed']]).size())\ndf2.columns = ['Count']\n\nprint(df2)\n</code></pre>\n\n<hr>\n\n<pre><code>                Count\nnames   passed       \nBryan   NO          4\nCharlie YES         4\nJaimie  NO          2\n        YES         2\n</code></pre>\n"}, {"tags": ["python", "list", "loops", "variables", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7216420, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1237337313004577/picture?type=large", "display_name": "Dominik Praski", "link": "https://stackoverflow.com/users/7216420/dominik-praski"}, "edited": false, "score": 0, "creation_date": 1480537351, "post_id": 40897432, "comment_id": 69008655, "body": "Thank you so much, is it possible for every object in the list that matches diff to be put in a separate list ?"}, {"owner": {"reputation": 695, "user_id": 3182775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xk63T.jpg?s=128&g=1", "display_name": "daniboy000", "link": "https://stackoverflow.com/users/3182775/daniboy000"}, "reply_to_user": {"reputation": 31, "user_id": 7216420, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1237337313004577/picture?type=large", "display_name": "Dominik Praski", "link": "https://stackoverflow.com/users/7216420/dominik-praski"}, "edited": false, "score": 0, "creation_date": 1480537722, "post_id": 40897432, "comment_id": 69008839, "body": "Yes. Just create a list inside your function, append the value if is equal dif and finally return the created list."}], "tags": [], "owner": {"reputation": 695, "user_id": 3182775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xk63T.jpg?s=128&g=1", "display_name": "daniboy000", "link": "https://stackoverflow.com/users/3182775/daniboy000"}, "is_accepted": true, "score": 0, "last_activity_date": 1480537589, "last_edit_date": 1480537589, "creation_date": 1480537208, "answer_id": 40897432, "question_id": 40897278, "link": "https://stackoverflow.com/questions/40897278/trying-to-loop-around-a-list-from-with-info-from-a-optionmenu-info/40897432#40897432", "title": "Trying to loop around a list from with info from a OptionMenu info", "body": "<p>You are getting the item list with <strong>for n in main_list</strong> and use the result as an index in the same list. If the items in your list are a String or a list, you get an error. Try to use the following code:</p>\n\n<pre><code>def selecting_qs():\n    main_list =  main_file_info()\n    dif = difficulty.get()\n    resp = []\n    for n in main_list:\n        if dif == n[1]:\n            resp.append(n[1])\n    return resp\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7216420, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1237337313004577/picture?type=large", "display_name": "Dominik Praski", "link": "https://stackoverflow.com/users/7216420/dominik-praski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 40897432, "answer_count": 1, "score": 0, "last_activity_date": 1480580443, "creation_date": 1480536638, "last_edit_date": 1480580443, "question_id": 40897278, "link": "https://stackoverflow.com/questions/40897278/trying-to-loop-around-a-list-from-with-info-from-a-optionmenu-info", "title": "Trying to loop around a list from with info from a OptionMenu info", "body": "<p>Trying to loop around a list from with info from a OptionMenu infoWhen i try to loop i get a error:</p>\n\n<pre><code>Exception in Tkinter callback\nTraceback (most recent call last):\n  File \"C:\\Python34\\lib\\tkinter\\__init__.py\", line 1533, in __call__\n    return self.func(*args)\n  File \"C:\\Users\\Dominic\\Desktop\\Homework creator\\The accuall program.py\", line 79, in create_button\n    selecting_qs()\n  File \"C:\\Users\\Dominic\\Desktop\\Homework creator\\The accuall program.py\", line 88, in selecting_qs\n    if dif == main_list[n][1]:\nTypeError: list indices must be integers, not list\n</code></pre>\n\n<p>My list is made up with numbers and letters so im not sure if my option menu has to be a intiger or a string to be able to search for a specific part in my list.\nthis is the code:</p>\n\n<pre><code>def selecting_qs():\n    main_list =  main_file_info()\n    dif = difficulty.get()\n    for n in main_list:\n        if dif == main_list[n][1]:\n            print(main_list[n][1])\n\n\n\n#delating empty strings and /n from list\ndef rm(list_):\n    return [x for x in list_ if x != '\\n' and x != ' ']\n\n#main list order:\n#Question ID  ,  Difficulty  ,  Topic  ,  Answer ID  ,  Picture ID  ,  Frequency \ndef main_file_info():\n    main_list=[]\n    main_file = open(\"main_file.txt\",\"r\")\n    main_file_info=main_file.readlines()\n    for line in main_file_info:\n        main_list.append(rm(line.split(\"@\")))\n    main_file.close()\n    return(main_list)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 786, "user_id": 2100534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9af4ba4e8071a69dcc107b9a68cdfb6?s=128&d=identicon&r=PG", "display_name": "Kyrubas", "link": "https://stackoverflow.com/users/2100534/kyrubas"}, "edited": false, "score": 2, "creation_date": 1480537179, "post_id": 40897261, "comment_id": 69008561, "body": "Consider typing out your code instead of linking to it via image."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 1, "creation_date": 1480546401, "post_id": 40897261, "comment_id": 69013227, "body": "dupe: <a href=\"http://stackoverflow.com/questions/26347412/drop-multiple-columns-pandas?rq=1\" title=\"drop multiple columns pandas\">stackoverflow.com/questions/26347412/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 786, "user_id": 2100534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9af4ba4e8071a69dcc107b9a68cdfb6?s=128&d=identicon&r=PG", "display_name": "Kyrubas", "link": "https://stackoverflow.com/users/2100534/kyrubas"}, "is_accepted": false, "score": 1, "last_activity_date": 1480537546, "creation_date": 1480537546, "answer_id": 40897532, "question_id": 40897261, "link": "https://stackoverflow.com/questions/40897261/how-to-drop-multiple-columns-on-pandas-data-frame/40897532#40897532", "title": "How to drop multiple columns on pandas data frame", "body": "<p>Instead of dropping the columns, you could subset your data frame like so:</p>\n\n<pre><code>In [3]: mydf = pd.DataFrame({\"A\":[1,2,3,4],\"B\":[4,3,2,1], \"C\":[3,4,5,3],\"D\":[6,4,3,2]})\nIn [4]: mydf\nOut[4]:\n   A  B  C  D\n0  1  4  3  6\n1  2  3  4  4\n2  3  2  5  3\n3  4  1  3  2\nIn [5]: mydf[mydf.columns[2:]]\nOut[5]:\n   C  D\n0  3  6\n1  4  4\n2  5  3\n3  3  2\n</code></pre>\n\n<p>This will work if you're trying to remove the first 2 columns for example. It works by creating a list with <code>df.columns</code> which you then subset and apply to your dataframe. You would then likely want to set the new dataframe to a variable.\nIf the columns that you want to drop are nonadjacent you can loop through a list of columns to drop:</p>\n\n<pre><code>In [7]: mydf1 = mydf.copy()\nIn [8]: for col in [\"A\",\"D\"]:\n   ...:     mydf1 = mydf1.drop(col,axis=1)\n\nIn [9]: mydf1\nOut[9]:\n   B  C\n0  4  3\n1  3  4\n2  2  5\n3  1  3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91645, "user_id": 1744834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ofloC.png?s=128&g=1", "display_name": "Roman Pekar", "link": "https://stackoverflow.com/users/1744834/roman-pekar"}, "is_accepted": false, "score": 0, "last_activity_date": 1480540925, "creation_date": 1480540925, "answer_id": 40898439, "question_id": 40897261, "link": "https://stackoverflow.com/questions/40897261/how-to-drop-multiple-columns-on-pandas-data-frame/40898439#40898439", "title": "How to drop multiple columns on pandas data frame", "body": "<p>If you really want to remove columns you can use <code>del</code>:</p>\n\n<pre><code>&gt;&gt;&gt; df = pd.DataFrame({'A':range(3),'B':list('abc'), 'C':range(3,6), 'D':list('gde')})\n&gt;&gt;&gt; for x in ['A', 'B']:\n...     del df[x]\n... \n&gt;&gt;&gt; df\n   C  D\n0  3  g\n1  4  d\n2  5  e\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7443494, "user_type": "registered", "profile_image": "https://graph.facebook.com/1220101318026798/picture?type=large", "display_name": "Mujtaba Ahmed", "link": "https://stackoverflow.com/users/7443494/mujtaba-ahmed"}, "is_accepted": false, "score": -1, "last_activity_date": 1484893806, "last_edit_date": 1484893806, "creation_date": 1484863555, "answer_id": 41752592, "question_id": 40897261, "link": "https://stackoverflow.com/questions/40897261/how-to-drop-multiple-columns-on-pandas-data-frame/41752592#41752592", "title": "How to drop multiple columns on pandas data frame", "body": "<p>This might help </p>\n\n<pre><code>energy.drop(energy.columns[[0,1]] , axis=1, inplace=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 92, "user_id": 7608429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7a750cf0d96f7fa1e377f0a0c171c5?s=128&d=identicon&r=PG", "display_name": "mberrett", "link": "https://stackoverflow.com/users/7608429/mberrett"}, "is_accepted": false, "score": 1, "last_activity_date": 1500178675, "creation_date": 1500178675, "answer_id": 45124923, "question_id": 40897261, "link": "https://stackoverflow.com/questions/40897261/how-to-drop-multiple-columns-on-pandas-data-frame/45124923#45124923", "title": "How to drop multiple columns on pandas data frame", "body": "<p>Try simply renaming the columns</p>\n\n<p>Say you have</p>\n\n<pre><code>In: df.columns \n\nOut: MultiIndex(levels=[['BURGLARY', 'GRAND LARCENY', 'GRAND LARCENY OF MOTOR \n     VEHICLE', 'TMAX', 'TMIN'], ['count', 'mean']],\n     labels=[[0, 1, 2, 3, 4], [0, 0, 0, 1, 1]])\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>In: df.columns = ['Burglary', 'Grand Larceny', 'Grand Larceny on Motor Vehicle', \n    'TMAX', 'TMIN']\n</code></pre>\n\n<p>And voila</p>\n\n<pre><code>In: df.columns\n\nOut: Index(['BURGLARY', 'GRAND LARCENY', 'GRAND LARCENY OF MOTOR VEHICLE', \n     'TMAX',\n     'TMIN'],\n     dtype='object')\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3917772, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000263934349/picture?type=large", "display_name": "Enqu T. Job", "link": "https://stackoverflow.com/users/3917772/enqu-t-job"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5104, "favorite_count": 1, "answer_count": 4, "score": -1, "last_activity_date": 1500178675, "creation_date": 1480536580, "last_edit_date": 1480541233, "question_id": 40897261, "link": "https://stackoverflow.com/questions/40897261/how-to-drop-multiple-columns-on-pandas-data-frame", "title": "How to drop multiple columns on pandas data frame", "body": "<p>Hello guys I have been trying to drop 2 columns of Excel data frame on pandas, using a drop command like this</p>\n\n<pre><code>energy = energy.drop(energy.columns[[0 , 1]], axis= 1 )\n</code></pre>\n\n<p>however, I could not make it to avoid the columns from view. and finally i sense the columns I am supposed to delete comes as a multi level index on my machine.  finally I have tried to drop one of the level from it like this</p>\n\n<pre><code>energy.index = energy.index.droplevel(2)\n</code></pre>\n\n<p>But still i cant manage to how I should avoid these columns.</p>\n\n<p>I have attached a screen copy of my work <a href=\"https://i.stack.imgur.com/ZzVSd.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["python", "python-2.x"], "comments": [{"owner": {"reputation": 4283, "user_id": 2148023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/356193279a082d3077d672f63bfc6c33?s=128&d=identicon&r=PG&f=1", "display_name": "Carles Mitjans", "link": "https://stackoverflow.com/users/2148023/carles-mitjans"}, "edited": false, "score": 0, "creation_date": 1480536618, "post_id": 40897184, "comment_id": 69008282, "body": "Modules like <code>urllib</code> or <code>requests</code> could help."}, {"owner": {"reputation": 49, "user_id": 7142751, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86c3da11bbb5c7797a4c14aebb173049?s=128&d=identicon&r=PG&f=1", "display_name": "Hugh Chalmers", "link": "https://stackoverflow.com/users/7142751/hugh-chalmers"}, "reply_to_user": {"reputation": 4283, "user_id": 2148023, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/356193279a082d3077d672f63bfc6c33?s=128&d=identicon&r=PG&f=1", "display_name": "Carles Mitjans", "link": "https://stackoverflow.com/users/2148023/carles-mitjans"}, "edited": false, "score": 0, "creation_date": 1480536681, "post_id": 40897184, "comment_id": 69008314, "body": "I can&#39;t seem to find out how any of them work in terms of this. I don&#39;t really do Python much, I&#39;m more of a web developer."}, {"owner": {"reputation": 17990, "user_id": 5827958, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/V9KEl.png?s=128&g=1", "display_name": "zondo", "link": "https://stackoverflow.com/users/5827958/zondo"}, "edited": false, "score": 3, "creation_date": 1480536766, "post_id": 40897184, "comment_id": 69008361, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1393324/in-python-given-a-url-to-a-text-file-what-is-the-simplest-way-to-read-the-cont\">In Python, given a URL to a text file, what is the simplest way to read the contents of the text file?</a>"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1480536884, "post_id": 40897184, "comment_id": 69008422, "body": "Not a good duplicate.  This server will respond 412 without certain headers."}, {"owner": {"reputation": 49, "user_id": 7142751, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86c3da11bbb5c7797a4c14aebb173049?s=128&d=identicon&r=PG&f=1", "display_name": "Hugh Chalmers", "link": "https://stackoverflow.com/users/7142751/hugh-chalmers"}, "edited": false, "score": 0, "creation_date": 1480537278, "post_id": 40897184, "comment_id": 69008614, "body": "+wim Yep, that was the problem"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 7142751, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86c3da11bbb5c7797a4c14aebb173049?s=128&d=identicon&r=PG&f=1", "display_name": "Hugh Chalmers", "link": "https://stackoverflow.com/users/7142751/hugh-chalmers"}, "edited": false, "score": 0, "creation_date": 1480537004, "post_id": 40897328, "comment_id": 69008490, "body": "Thanks, worked perfectly. Will accept as answer in 3m"}, {"owner": {"reputation": 8374, "user_id": 3691891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcCUM.jpg?s=128&g=1", "display_name": "Arkadiusz Drabczyk", "link": "https://stackoverflow.com/users/3691891/arkadiusz-drabczyk"}, "edited": false, "score": 0, "creation_date": 1480539718, "post_id": 40897328, "comment_id": 69009982, "body": "Interesting user agent."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 3, "last_activity_date": 1480536830, "creation_date": 1480536830, "answer_id": 40897328, "question_id": 40897184, "link": "https://stackoverflow.com/questions/40897184/read-text-file-over-internet-on-python/40897328#40897328", "title": "Read text file over internet on python", "body": "<pre><code>&gt;&gt;&gt; from urllib2 import Request, urlopen\n&gt;&gt;&gt; url = 'http://hughchalmers.com/example.txt'\n&gt;&gt;&gt; urlopen(Request(url=url, headers={'User-Agent': \"hey, it's wim\"})).read()\n'Exmaple Text'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4759847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2478611faeb67e25810955e1152b856?s=128&d=identicon&r=PG", "display_name": "Hank Anderson", "link": "https://stackoverflow.com/users/4759847/hank-anderson"}, "edited": false, "score": 0, "creation_date": 1480537405, "post_id": 40897357, "comment_id": 69008672, "body": "I&#39;ve added the user-agent header, so this should work with your server now."}], "tags": [], "owner": {"reputation": 1, "user_id": 4759847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2478611faeb67e25810955e1152b856?s=128&d=identicon&r=PG", "display_name": "Hank Anderson", "link": "https://stackoverflow.com/users/4759847/hank-anderson"}, "is_accepted": false, "score": 0, "last_activity_date": 1480537339, "last_edit_date": 1480537339, "creation_date": 1480536933, "answer_id": 40897357, "question_id": 40897184, "link": "https://stackoverflow.com/questions/40897184/read-text-file-over-internet-on-python/40897357#40897357", "title": "Read text file over internet on python", "body": "<p>You can use <a href=\"http://docs.python-requests.org/en/master/\" rel=\"nofollow noreferrer\">requests</a>. Their first example shows how:</p>\n\n<pre><code>import requests\nr = requests.get('http://hughchalmers.com/example.txt', headers={'user-agent': 'hugh'})\nr.text\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 7142751, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86c3da11bbb5c7797a4c14aebb173049?s=128&d=identicon&r=PG&f=1", "display_name": "Hugh Chalmers", "link": "https://stackoverflow.com/users/7142751/hugh-chalmers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 40897328, "answer_count": 2, "score": 1, "last_activity_date": 1480537348, "creation_date": 1480536291, "last_edit_date": 1480537348, "question_id": 40897184, "link": "https://stackoverflow.com/questions/40897184/read-text-file-over-internet-on-python", "title": "Read text file over internet on python", "body": "<p>Here's a text file on the internet (http) <a href=\"http://hughchalmers.com/example.txt\" rel=\"nofollow noreferrer\">http://hughchalmers.com/example.txt</a>. How would I print that in Python 2?</p>\n\n<p>People are saying this is a duplicate, I would like to say that it is not a duplicate, any other script I found gave Error 412.</p>\n"}, {"tags": ["python", "opencv", "computer-vision", "neural-network"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1480536390, "post_id": 40897167, "comment_id": 69008167, "body": "<i>will it work out?</i> No. Really, you&#39;re wasting your time. Read instead about Object Recognition, and the latest papers on the subject. You&#39;ll learn that it&#39;s more difficult (and interesting) than just extracting contours..."}, {"owner": {"reputation": 4811, "user_id": 2874789, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/VKbXD.jpg?s=128&g=1", "display_name": "Christopher Shroba", "link": "https://stackoverflow.com/users/2874789/christopher-shroba"}, "edited": false, "score": 1, "creation_date": 1480542913, "post_id": 40897167, "comment_id": 69011661, "body": "I disagree; don&#39;t read current papers, that&#39;s far more confusing than other methods.  Google &quot;Object Recognition neural network Tutorial&quot;, or something along those lines and you&#39;ll find many tutorials you can look at!"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 4811, "user_id": 2874789, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/VKbXD.jpg?s=128&g=1", "display_name": "Christopher Shroba", "link": "https://stackoverflow.com/users/2874789/christopher-shroba"}, "edited": false, "score": 1, "creation_date": 1480544004, "post_id": 40897167, "comment_id": 69012159, "body": "@Christopher probably I should rephrase it in: &quot;start simple, look at online tutorials, then when you want to do something more meaningful than a toy problem look at new papers and state of the art approaches&quot;. ;D"}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1480544341, "creation_date": 1480544341, "answer_id": 40899289, "question_id": 40897167, "link": "https://stackoverflow.com/questions/40897167/recognize-what-is-on-image/40899289#40899289", "title": "Recognize what is on image", "body": "<p>There is plenty of room for experimentation.  However, you should not reinvent the wheel, except as a learning exercise.  Research the paradigm, learn what already exists, and then go make your own wheel improvements.</p>\n\n<p>I strongly recommend that you start with image recognition in CNNs (convolutional neural networks).  A lot of wonderful work has been done with the ILSVRC 2012 image data set (a.k.a. ImageNet files).  In fact, a large part of today's NN popularity comes from Alex Krizhevsky's breakthrough (resulting in AlexNet, the first NN to win the ILSVRC) and ensuing topologies (ResNet, GoogleNet, VGG, etc.).</p>\n\n<p>The simple answer is to let your network \"decide\" what's important in the original photo.  Certainly, flatten the image and feed it contours, but don't be surprised if a training run on the original images produces superior results.</p>\n\n<p>Search for resources on \"Image Recognition introduction\" and pick a few of the hits that match your current reading and topic interests.  There are plenty of good ones out there.</p>\n\n<p>When you get to programming your own models, I strongly recommend that you use an existing framework, rather than building all that collateral from scratch.  Dump the CSV format; there are better ones with pre-packaged I/O routines and plenty of support.  The idea is to let you design your network, rather than manipulating data all the time.</p>\n\n<p>Popular frameworks include Caffe, TensorFlow, Torch, Theano, and CNTK, among others.  So far, I've found Caffe and Torch to have the easiest overall learning curves, although there's not so much difference that I'd actually <em>recommend</em> one over another in general.  Look for one that has good documentation and examples in your areas of interest.</p>\n"}], "owner": {"reputation": 47, "user_id": 5472930, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/763496c361c41fbb69921b8e18bf8e1d?s=128&d=identicon&r=PG&f=1", "display_name": "Fireship", "link": "https://stackoverflow.com/users/5472930/fireship"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 40899289, "answer_count": 1, "score": -1, "last_activity_date": 1480544341, "creation_date": 1480536229, "last_edit_date": 1480536543, "question_id": 40897167, "link": "https://stackoverflow.com/questions/40897167/recognize-what-is-on-image", "title": "Recognize what is on image", "body": "<p>i'm doing a little project with neural networks. I've read about digit recognition, with MNIST dataset and thought if it possible to make same dataset but with regular objects we see every day.\nSo here's algorithm( if we can say so):\nAll is done with opencv library for python\n1) Get contours from image. This is not literally contours, but something that looks so.\nI've done this with this code:</p>\n\n<pre><code>def findContour(self):\n    gray = cv2.cvtColor(self.image, cv2.COLOR_BGR2GRAY)\n    gray = cv2.bilateralFilter(gray, 11, 17, 17)\n    self.image = cv2.Canny(gray, 30, 200)\n</code></pre>\n\n<p>2) Next need to create training set.\nI copy and edit this message. Change rotation and flip it -- now we have about 40 images, which are consists of rotated contours.\n3) Now i'm gonna dump this images to a csv file.\nThese images are represented as 3D array, so i flatten them using .flatten function from numpy. Next this flatten vector is written in csv file, with label as last character</p>\n\n<p>This is what i've done, and want to ask : will it work out?\nNext i want to use everything except last element as input x vector, and last elements as y vector. (like <a href=\"http://www.pyimagesearch.com/2014/09/22/getting-started-deep-learning-python/\" rel=\"nofollow noreferrer\">here</a>)</p>\n\n<p>Recognizing will be done same way : we getting contour of image, and feed it to neural network, output will be label.</p>\n\n<p>Is it even possible, or better not to try?</p>\n"}, {"tags": ["python", "python-2.7", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 279, "user_id": 5100151, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ohRjC.jpg?s=128&g=1", "display_name": "rtime", "link": "https://stackoverflow.com/users/5100151/rtime"}, "edited": false, "score": 0, "creation_date": 1480548227, "post_id": 40898788, "comment_id": 69013894, "body": "the coma and the wrong indent were just sloppiness while copying the code, but I&#39;ve found the possible error and edited the question"}], "tags": [], "owner": {"reputation": 9572, "user_id": 2543372, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8814f53d616260c4971fd77f8b3f54a1?s=128&d=identicon&r=PG", "display_name": "Julien Marrec", "link": "https://stackoverflow.com/users/2543372/julien-marrec"}, "is_accepted": true, "score": 2, "last_activity_date": 1480549322, "last_edit_date": 1480549322, "creation_date": 1480542286, "answer_id": 40898788, "question_id": 40897117, "link": "https://stackoverflow.com/questions/40897117/axvspan-in-subplot-not-working/40898788#40898788", "title": "axvspan in subplot not working", "body": "<p>Remove the comma on the first line, and fix your identing.</p>\n\n<p>Then make sure you set the log scale before making the axvspan.</p>\n\n<pre><code>f, (ax) = plt.subplots(1, 7 , sharey=True, figsize=(14,2))\ncolor=['g','c','m','y','g','c','m']\nfor k in range(7):\n    ax[k].set_xscale('log')\n    ax[k].axvspan(0,100,facecolor=color[k], alpha = 0.3)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/NQGg4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NQGg4.png\" alt=\"enter image description here\"></a></p>\n\n<p>If you're looking for a way to color the background, you should use <code>ax[k].set_axis_bgcolor(color[k])</code> instead.</p>\n\n<p>Also, you might be better off using <code>axhspan</code> instead, since it will use axis (relative) units for x.</p>\n\n<pre><code>ax[k].set_ylim(0,1)\nax[k].set_xscale('log')\nax[k].axhspan(0,1,facecolor=color[k], alpha = 0.3)\n</code></pre>\n"}], "owner": {"reputation": 279, "user_id": 5100151, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ohRjC.jpg?s=128&g=1", "display_name": "rtime", "link": "https://stackoverflow.com/users/5100151/rtime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1133, "favorite_count": 1, "accepted_answer_id": 40898788, "answer_count": 1, "score": 2, "last_activity_date": 1480549322, "creation_date": 1480536045, "last_edit_date": 1480548138, "question_id": 40897117, "link": "https://stackoverflow.com/questions/40897117/axvspan-in-subplot-not-working", "title": "axvspan in subplot not working", "body": "<p>I try to color in different subplots.</p>\n\n<p>My code:</p>\n\n<pre><code>f, (ax) = plt.subplots(1, 7 , sharey=True, figsize=(14,2))\ncolor=['g','c','m','y','g','c','m']\nfor k in range(7):\n    ax[k].axvspan(0,100,facecolor=color[k], alpha = 0.3)\n    ax[k].plot(data[k]['x'], data[k]['y'], color=color[k])\n    ax[k].set_xscale('log')\n</code></pre>\n\n<p>It does the plot, but not the coloring, though no error is raised. When I don't set_xscale('log'), then it works. \nSuggestions?</p>\n"}, {"tags": ["python", "generator", "partition", "built-in"], "comments": [{"owner": {"reputation": 19107, "user_id": 216356, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dc105cdd75395154274f9da3d7612a9f?s=128&d=identicon&r=PG", "display_name": "Noctis Skytower", "link": "https://stackoverflow.com/users/216356/noctis-skytower"}, "edited": false, "score": 0, "creation_date": 1480536194, "post_id": 40896981, "comment_id": 69008065, "body": "This is not an exact duplicate of <a href=\"http://stackoverflow.com/questions/2659900/python-slicing-a-list-into-n-nearly-equal-length-partitions\">Python: Slicing a list into n nearly-equal-length partitions</a> since one question covers functions and the other covers generators. This question also asks for the merits of different implementations and (hopefully) will receive an answer regarding generators that come in the standard library."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1480536480, "post_id": 40896981, "comment_id": 69008209, "body": "Every answer there can be trivially converted to generator functions (or more concisely, to just return generator expressions). Converting to returning generator expressions is just changing list comp brackets to genexpr parens. If you don&#39;t want the generator expression, you just unroll the list comp into a for loop with <code>yield</code>; not sufficiently distinct. The answers &amp; comments there cover the merits of different implementations, and given that the Pythonic solution requested by the OP would be to use a standard library function if it existed, it would be one of the answers, and it isn&#39;t."}, {"owner": {"reputation": 19107, "user_id": 216356, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dc105cdd75395154274f9da3d7612a9f?s=128&d=identicon&r=PG", "display_name": "Noctis Skytower", "link": "https://stackoverflow.com/users/216356/noctis-skytower"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1480536837, "post_id": 40896981, "comment_id": 69008394, "body": "@ShadowRanger What about the two example implementations provided in this question? They are completely unlike any of the answers to the question you marked as a duplicate. Should I ask two new questions for each of them to get feedback?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 2, "creation_date": 1480537124, "post_id": 40896981, "comment_id": 69008537, "body": "The reason your examples aren&#39;t found there is because your examples produce bad results. The accepted answer there used to behave like yours, where partitioning 105 elements into 10 partitions would produce nine partitions of size 11 and one of size 6, but that&#39;s not &quot;nearly equal&quot;. &quot;Nearly equal&quot; would be five partitions of size 11 and five more of size 10, which is what the answers there correctly do. That problem is mentioned in the comments, and visible in the answer edit history."}, {"owner": {"reputation": 19107, "user_id": 216356, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dc105cdd75395154274f9da3d7612a9f?s=128&d=identicon&r=PG", "display_name": "Noctis Skytower", "link": "https://stackoverflow.com/users/216356/noctis-skytower"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1480537262, "post_id": 40896981, "comment_id": 69008605, "body": "@ShadowRanger Thanks for the explanation! That explains why the <code>round</code> function is used in several answers. They make better sense now."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1480537298, "post_id": 40896981, "comment_id": 69008626, "body": "You&#39;re welcome. If you think your solutions are better, go ahead and post them as an answer over there; they&#39;re perfectly fine alternate answers, just not the basis for a new question."}], "owner": {"reputation": 19107, "user_id": 216356, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dc105cdd75395154274f9da3d7612a9f?s=128&d=identicon&r=PG", "display_name": "Noctis Skytower", "link": "https://stackoverflow.com/users/216356/noctis-skytower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1480535855, "answer_count": 0, "score": 0, "last_activity_date": 1480536109, "creation_date": 1480535546, "last_edit_date": 1480536109, "question_id": 40896981, "link": "https://stackoverflow.com/questions/40896981/is-there-a-preferred-or-built-in-way-to-partition-arrays", "closed_reason": "Duplicate", "title": "Is there a preferred or built-in way to partition arrays?", "body": "<p>Given an array and the number of almost equally sized parts that you want it divided into, is there a preferred way of doing so or a built-in that will handle the task? Two example implementations are given below, but someone may know a better method of getting the job done. The code should primarily be designed to array-like objects but could optionally be applicable if given an iterable instead.</p>\n\n<p><strong>Example 1</strong></p>\n\n<pre><code>def partition(array, parts):\n    \"\"\"Takes an array and splits it into roughly equally sized parts.\"\"\"\n    array_size = len(array)\n    part_size = math.ceil(array_size / parts)\n    for offset in range(0, array_size, part_size):\n        yield array[offset:offset + part_size]\n</code></pre>\n\n<p><strong>Example 2</strong></p>\n\n<pre><code>def partition(array, parts):\n    \"\"\"Takes an array and splits it into roughly equally sized parts.\"\"\"\n    size = math.ceil(len(array) / parts)\n    for stop, start in enumerate(range(parts), 1):\n        yield array[start * size:stop * size]\n</code></pre>\n"}, {"tags": ["python", "performance", "numpy", "generator"], "comments": [{"owner": {"reputation": 3608, "user_id": 887074, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/da9c9afc19776841b62f8980a40c02ec?s=128&d=identicon&r=PG", "display_name": "Erotemic", "link": "https://stackoverflow.com/users/887074/erotemic"}, "edited": false, "score": 2, "creation_date": 1480536079, "post_id": 40896904, "comment_id": 69008008, "body": "First, beware of premature optimization, you have a function that does what you want. Second, generators really wont help you here. Numpy functions obtain much of their speed from vectorization which requires dense representation and essentially operates on all elements of an array simultaniously."}], "answers": [{"comments": [{"owner": {"reputation": 6439, "user_id": 1914034, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/2i0qw.jpg?s=128&g=1", "display_name": "Below the Radar", "link": "https://stackoverflow.com/users/1914034/below-the-radar"}, "edited": false, "score": 0, "creation_date": 1480606202, "post_id": 40898441, "comment_id": 69041171, "body": "Thank you for your answer. Finally the most performant function is using an iterator in a generator (see <a href=\"http://codereview.stackexchange.com/a/147908/68343\">this answer</a>). Numpy functions above were significantly slower for processing multiple large arrays of coordinates."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 2, "last_activity_date": 1480540928, "last_edit_date": 1495540967, "creation_date": 1480540928, "answer_id": 40898441, "question_id": 40896904, "link": "https://stackoverflow.com/questions/40896904/numpy-transform-a-numpy-function-into-generator/40898441#40898441", "title": "Numpy - transform a numpy function into generator", "body": "<p>A Python generator is a spinoff of lists.  </p>\n\n<pre><code>In [207]: [i*2 for i in range(3)]\nOut[207]: [0, 2, 4]\nIn [208]: (i*2 for i in range(3))\nOut[208]: &lt;generator object &lt;genexpr&gt; at 0xb6a1ffbc&gt;\nIn [209]: list(_)\nOut[209]: [0, 2, 4]\n</code></pre>\n\n<p>You could think of it as a lazy list.  It doesn't actually evaluate the elements until you iterate through it.  In Py3 <code>range</code> is a generator (<code>xrange</code> in Py2).  The <code>In[208]</code> line sets up a generator, but doesn't evaluate anything.  So it is fast. But iterating over it in [209] takes just as long as the original at [207].  (Well there might be minor differences.)</p>\n\n<p>Thus a generator lets you think in blocks as you with lists, without creating all the intermediate lists.  It's more of a code organization tool than a performance one.  </p>\n\n<p>I can't think of anything equivalent when working with numpy arrays.</p>\n\n<pre><code>arr=np.array(input)  # creates fixed size array from input list\n-np.diff(arr, axis=0)   # create another array\n</code></pre>\n\n<p>This creates a number of intermediate arrays, even a list, and ends up returning an array (and discarding the intermediates):</p>\n\n<pre><code>np.hstack((arr[0],(-np.diff(arr, axis=0)).ravel()))\n</code></pre>\n\n<p>There are a number of simple building blocks in that expression.  Numpy's speed comes from performing those steps in fast compiled code.  To get better speed you'd have to rewrite the problem in C or Cython.  In that code you can iterate, and perform complex operations at each step.  </p>\n\n<p>Conceivably numpy could perform some sort of lazy evaluation, but that would require major lowlevel coding.  And there's no guarantee that it would result in performance improvements. </p>\n\n<p>I looked at the issue of intermediate buffers, and whether <code>add.at</code> improved performance (it doesn't) at: <a href=\"https://stackoverflow.com/a/40688879/901925\">https://stackoverflow.com/a/40688879/901925</a></p>\n"}], "owner": {"reputation": 6439, "user_id": 1914034, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/2i0qw.jpg?s=128&g=1", "display_name": "Below the Radar", "link": "https://stackoverflow.com/users/1914034/below-the-radar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 0, "accepted_answer_id": 40898441, "answer_count": 1, "score": 1, "last_activity_date": 1480540928, "creation_date": 1480535263, "last_edit_date": 1495541902, "question_id": 40896904, "link": "https://stackoverflow.com/questions/40896904/numpy-transform-a-numpy-function-into-generator", "title": "Numpy - transform a numpy function into generator", "body": "<p>I have a numpy function that convert a 2D array of x,y coordinates into a flat array of distance of each coordinates between the previous. (see <a href=\"https://stackoverflow.com/questions/40892993/numpy-transform-2d-array-of-x-y-coordinates-into-flat-array-of-distance-betwee/\">Numpy - transform 2D array of x,y coordinates into flat array of distance between coordinates</a>)</p>\n\n<pre><code>input = [[-8081441,5685214], [-8081446,5685216], [-8081442,5685219], [-8081440,5685211], [-8081441,5685214]]\noutput = [-8081441, 5685214, 5, -2, -4, -3, -2, 8, 1, -3]\n</code></pre>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/a/40893149/1914034\">Divakar's answer</a>, I have two numpy functions that is doing what I want</p>\n\n<pre><code>arr = np.asarray(input).astype(int)\nnp.hstack((arr[0], (-np.diff(arr, axis=0)).ravel()))\n</code></pre>\n\n<p>Another approach with slicing to replicate the differentiation -</p>\n\n<pre><code>arr = np.asarray(input).astype(int)\nnp.hstack((arr[0], (arr[:-1,:] - arr[1:,:]).ravel()))\n</code></pre>\n\n<p><strong>My question, is there a way to transpose one of these numpy function into a generator to improve performance? Is it possible to use numpy in a generator?</strong></p>\n"}, {"tags": ["python", "python-2.7", "python-3.x"], "comments": [{"owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "edited": false, "score": 0, "creation_date": 1480535303, "post_id": 40896895, "comment_id": 69007581, "body": "You need to provide what you tired to achieve that with your question."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 7112155, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f859f8aae222ecea9552699c7abd8f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7112155/sanjeev"}, "edited": false, "score": 0, "creation_date": 1480541419, "post_id": 40897180, "comment_id": 69010902, "body": "crest_day = river_data[(river_data[&#39;Date&#39;] &gt; &#39;2016-8-1&#39;) &amp; (river_data[&#39;Date&#39;] &lt;= &#39;2016-8-30&#39;)]"}, {"owner": {"reputation": 139, "user_id": 7112155, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f859f8aae222ecea9552699c7abd8f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7112155/sanjeev"}, "edited": false, "score": 0, "creation_date": 1480541478, "post_id": 40897180, "comment_id": 69010938, "body": "this has worked but I am getting index along with my first column and don&#39;t know how to call that in if condition"}, {"owner": {"reputation": 160, "user_id": 3213101, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7113426057b419a438ff7527fdcd4757?s=128&d=identicon&r=PG&f=1", "display_name": "tgs266", "link": "https://stackoverflow.com/users/3213101/tgs266"}, "reply_to_user": {"reputation": 139, "user_id": 7112155, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f859f8aae222ecea9552699c7abd8f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7112155/sanjeev"}, "edited": false, "score": 0, "creation_date": 1480695195, "post_id": 40897180, "comment_id": 69084350, "body": "@Sanjeev I am not quite clear with what your are saying"}], "tags": [], "owner": {"reputation": 160, "user_id": 3213101, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7113426057b419a438ff7527fdcd4757?s=128&d=identicon&r=PG&f=1", "display_name": "tgs266", "link": "https://stackoverflow.com/users/3213101/tgs266"}, "is_accepted": true, "score": 0, "last_activity_date": 1480536279, "creation_date": 1480536279, "answer_id": 40897180, "question_id": 40896895, "link": "https://stackoverflow.com/questions/40896895/fetching-the-data-from-a-csv-file-with-a-range-of-date/40897180#40897180", "title": "fetching the data from a csv file with a range of date", "body": "<p>You could try a few things:</p>\n\n<p>You could use </p>\n\n<pre><code>df = pd.read_csv(file, nrows = x)\n</code></pre>\n\n<p>Where x is the number of rows you want</p>\n\n<p>Or use a one line command:</p>\n\n<pre><code>df = df[14:28]\n</code></pre>\n\n<p>The 14 and 28 can be whatever slice size you want. </p>\n\n<p>Hope this helps</p>\n"}], "owner": {"reputation": 139, "user_id": 7112155, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f859f8aae222ecea9552699c7abd8f7e?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7112155/sanjeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1480553901, "accepted_answer_id": 40897180, "answer_count": 1, "score": -1, "last_activity_date": 1480536279, "creation_date": 1480535225, "question_id": 40896895, "link": "https://stackoverflow.com/questions/40896895/fetching-the-data-from-a-csv-file-with-a-range-of-date", "closed_reason": "Needs details or clarity", "title": "fetching the data from a csv file with a range of date", "body": "<p>I am making a program where I want to extract the data from a csv file with the range of date (like +-14 days from a specific date)...ofcourse there is a column in the csv file with the dates.</p>\n"}, {"tags": ["python", "graph", "adjacency-list", "adjacency-matrix"], "comments": [{"owner": {"reputation": 1404, "user_id": 564553, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cca53f9b89c73e85539a7f599585c789?s=128&d=identicon&r=PG", "display_name": "BPS", "link": "https://stackoverflow.com/users/564553/bps"}, "edited": false, "score": 0, "creation_date": 1480542879, "post_id": 40896880, "comment_id": 69011643, "body": "What do you expect it to do and what is it actually doing?"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1480780156, "post_id": 40896880, "comment_id": 69108836, "body": "<code>..it seems to not run and has many problems.</code> You need to isolate the individual problems and work on them one at a time.  You should post separate specific questions about individual problems."}], "owner": {"reputation": 1, "user_id": 7232743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df047b17e8db641503616ae514e1a1ed?s=128&d=identicon&r=PG&f=1", "display_name": "J.David", "link": "https://stackoverflow.com/users/7232743/j-david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1480590807, "creation_date": 1480535158, "last_edit_date": 1480590807, "question_id": 40896880, "link": "https://stackoverflow.com/questions/40896880/unweighted-graph-structure-does-not-run", "title": "Unweighted Graph structure does not run", "body": "<p>I have tried to implement a unweighted graph structure using the adjacency list approach. I have tried to add a function to add a new node and edge. </p>\n\n<p>When I try to run the code it seems to not run and has many problems.</p>\n\n<p>I'm not sure where to go from here. </p>\n\n<p>Any help on this would be great.</p>\n\n<pre><code>Graph = {\n    'A': set(['B', 'C']), \n    'B': set(['A', 'D', 'E']),\n    'C': set(['A', 'F']), \n    'D': set(['B', 'G']), \n    'E': set(['B', 'F', 'G']), \n    'F': set(['C', 'E']), \n    'G': set(['E', 'D'])}\n\n\nclass node:\n    def __init__(self, node, edges = []):\n        self.label = node \n        self.edges = edges\n\n\n    def __str__(self):\n        return 'Node(' + str(self.label) + \", \" + str(self.edges) +\")\"\n\n\nclass Graph(node): \n    def __init__(self):\n        self.nodes = {}\n\n\n    def addnode(self,name): \n        self.node[name] = node(name)\n\n    def addedge(self, source, target):\n        self.nodes[source].edges = self.node[source].edges + [target]\n\n    def dot(self):\n        for nodename in self.node:\n            for edge in self.node[nodename].edges: \n                print(str(nodename) + \" -&gt; \"+ str(edge))\n\nif __name__ == '__main__':\n    G = Graph() \n    G.addnode(A) \n    G.addedge(A) \n    G.addnode(B,C) \n    G.addnode(D) \n    G.addedge(B,C) \n    G.addnode(E) \n    G.addedge(E,F) \n    G.addnode(G) \n    G.addedge(G,D)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 802, "user_id": 6839881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27bebff537eeceb6ab0e310caa91b65?s=128&d=identicon&r=PG&f=1", "display_name": "Navidad20", "link": "https://stackoverflow.com/users/6839881/navidad20"}, "edited": false, "score": 0, "creation_date": 1480535250, "post_id": 40896869, "comment_id": 69007556, "body": "Did you try using just <code>text[-1]</code> without the colon"}, {"owner": {"reputation": 31, "user_id": 7004850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6039f9d3d5462f73ba7b0f5269ee5b97?s=128&d=identicon&r=PG&f=1", "display_name": "Alanan", "link": "https://stackoverflow.com/users/7004850/alanan"}, "reply_to_user": {"reputation": 802, "user_id": 6839881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27bebff537eeceb6ab0e310caa91b65?s=128&d=identicon&r=PG&f=1", "display_name": "Navidad20", "link": "https://stackoverflow.com/users/6839881/navidad20"}, "edited": false, "score": 0, "creation_date": 1480535428, "post_id": 40896869, "comment_id": 69007662, "body": "When I tried that, it deleted the entire text."}, {"owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "edited": false, "score": 0, "creation_date": 1480535436, "post_id": 40896869, "comment_id": 69007667, "body": "Also, is the string you picked for split a constant found in all Gutenberg entries? Or will your solution work only for a few entries that happen to look like this?"}, {"owner": {"reputation": 31, "user_id": 7004850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6039f9d3d5462f73ba7b0f5269ee5b97?s=128&d=identicon&r=PG&f=1", "display_name": "Alanan", "link": "https://stackoverflow.com/users/7004850/alanan"}, "edited": false, "score": 0, "creation_date": 1480535515, "post_id": 40896869, "comment_id": 69007700, "body": "It should only work in this entry - we had to use this specific Agatha Christie book on Gutenberg, so it wouldn&#39;t be relevant anywhere else."}, {"owner": {"reputation": 1068, "user_id": 2800918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/77b59723cbffd9e9b6e1e1c8802f579b?s=128&d=identicon&r=PG&f=1", "display_name": "CAB", "link": "https://stackoverflow.com/users/2800918/cab"}, "edited": false, "score": 1, "creation_date": 1480536056, "post_id": 40896869, "comment_id": 69007999, "body": "You don&#39;t actually use the result of the <code>split</code>...."}], "answers": [{"tags": [], "owner": {"reputation": 802, "user_id": 6839881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27bebff537eeceb6ab0e310caa91b65?s=128&d=identicon&r=PG&f=1", "display_name": "Navidad20", "link": "https://stackoverflow.com/users/6839881/navidad20"}, "is_accepted": false, "score": 0, "last_activity_date": 1480536622, "creation_date": 1480536622, "answer_id": 40897272, "question_id": 40896869, "link": "https://stackoverflow.com/questions/40896869/when-parsing-how-to-split-string-object-then-pull-out-last-element-python/40897272#40897272", "title": "When parsing, how to split string object then pull out last element (Python)", "body": "<p>I offer this solution, except note that I use lxml instead of beautiful soup because I know it better. I don't remember if it is natively installed, but you can install it with <code>pip install lxml</code> in your terminal.</p>\n\n<pre><code>import requests\nfrom lxml import html\n\ndef get_text():\n    with open('new_christie.txt','w') as book:\n        url = 'http://www.gutenberg.org/files/1155/1155-h/1155-h.htm'\n        r = requests.get(url)\n        data = r.text\n        soup = html.fromstring(data.encode('utf8'))\n        text = ' '.join(soup.xpath('//p/text()'))\n        text = text.partition('AND AFTER')[2]\n        book.write(text)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7004850, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6039f9d3d5462f73ba7b0f5269ee5b97?s=128&d=identicon&r=PG&f=1", "display_name": "Alanan", "link": "https://stackoverflow.com/users/7004850/alanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480537021, "creation_date": 1480535108, "last_edit_date": 1480537021, "question_id": 40896869, "link": "https://stackoverflow.com/questions/40896869/when-parsing-how-to-split-string-object-then-pull-out-last-element-python", "title": "When parsing, how to split string object then pull out last element (Python)", "body": "<p>I'm doing a project in Python right now where we are supposed to parse the HTML from a Project Gutenberg file to isolate the book's contents. I've managed to get rid of everything except the Table of Contents. I want to remove the Table of Contents by making the soup.prettify() a string object, splitting it on the last phrase of the Table of Contents, and pulling the last element out of the list, which will be everything except for the table of contents. This is what I have so far. </p>\n\n<pre><code> def get_text(): #writes the html into a new text file called new_christie.txt\n        with open('new_christie.txt','w', encoding='utf-8') as book:\n        url = 'http://www.gutenberg.org/files/1155/1155-h/1155-h.htm'\n        r = requests.get(url)\n        data = r.text\n        soup = BeautifulSoup(data, 'html.parser')\n        str = soup.prettify()\n        text = str.split('XXVIII.     AND AFTER') #last phrase in Table of Contents\n        text = soup.find_all('p') #finds all of the text between paragraphs\n        content = text[-1:]\n        for p in content:\n            line = p.get_text()\n            book.write(line)\n</code></pre>\n\n<p>I think my problem lies in when I try to pull the last element out of the list using content = text[-1:], but I can't figure out another way to do it.</p>\n"}, {"tags": ["python", "datetime", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 1909, "user_id": 7003310, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93c4c71ac8fb2188d6e0f481b9b88a9d?s=128&d=identicon&r=PG&f=1", "display_name": "qichao_he", "link": "https://stackoverflow.com/users/7003310/qichao-he"}, "edited": false, "score": 0, "creation_date": 1480604274, "post_id": 40898143, "comment_id": 69039769, "body": "Thanks, man! I tested it as well, the simplest method is the fastest, as it should be. Do you know where I can get a whole picture about different methods of querying with Pandas?"}, {"owner": {"reputation": 12074, "user_id": 5626112, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7c4f02b1ae7b6e7f262d67e428a35fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Steven G", "link": "https://stackoverflow.com/users/5626112/steven-g"}, "reply_to_user": {"reputation": 1909, "user_id": 7003310, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93c4c71ac8fb2188d6e0f481b9b88a9d?s=128&d=identicon&r=PG&f=1", "display_name": "qichao_he", "link": "https://stackoverflow.com/users/7003310/qichao-he"}, "edited": false, "score": 0, "creation_date": 1480605132, "post_id": 40898143, "comment_id": 69040435, "body": "<a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html\" rel=\"nofollow noreferrer\">http://pandas.pydata.org/pandas-docs/stable/indexing.html</a> this is a start"}, {"owner": {"reputation": 1909, "user_id": 7003310, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93c4c71ac8fb2188d6e0f481b9b88a9d?s=128&d=identicon&r=PG&f=1", "display_name": "qichao_he", "link": "https://stackoverflow.com/users/7003310/qichao-he"}, "edited": false, "score": 0, "creation_date": 1480607390, "post_id": 40898143, "comment_id": 69042024, "body": "haha I&#39;m actually looking at it right now, again thanks a lot!"}, {"owner": {"reputation": 12074, "user_id": 5626112, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7c4f02b1ae7b6e7f262d67e428a35fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Steven G", "link": "https://stackoverflow.com/users/5626112/steven-g"}, "reply_to_user": {"reputation": 1909, "user_id": 7003310, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93c4c71ac8fb2188d6e0f481b9b88a9d?s=128&d=identicon&r=PG&f=1", "display_name": "qichao_he", "link": "https://stackoverflow.com/users/7003310/qichao-he"}, "edited": false, "score": 0, "creation_date": 1480610377, "post_id": 40898143, "comment_id": 69043914, "body": "@qichao_he You should accept the answer if this is to your satisfaction. have a good day"}, {"owner": {"reputation": 8843, "user_id": 349948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e06d0e631af3fe3d713e76f2957fb05f?s=128&d=identicon&r=PG", "display_name": "Corley Brigman", "link": "https://stackoverflow.com/users/349948/corley-brigman"}, "edited": false, "score": 0, "creation_date": 1480613416, "post_id": 40898143, "comment_id": 69045928, "body": "I know this is closed, but be aware that AFAIK this only works for dates (not even sure why it works for that, to be honest). Normally, <code>df[...]</code> is used to select columns, and <code>df.loc[...]</code> is used to select rows. Pandas is column-oriented (e.g. each column is a series, and the dataframe is an array of series), so extracting a column is fast (just return the series I already have), while extracting a row is slow (have to extract data out of all my collected series and create a new one). Normally, using <code>df[...]</code> on row indexes doesn&#39;t work..."}], "tags": [], "owner": {"reputation": 12074, "user_id": 5626112, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7c4f02b1ae7b6e7f262d67e428a35fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Steven G", "link": "https://stackoverflow.com/users/5626112/steven-g"}, "is_accepted": true, "score": 1, "last_activity_date": 1480540454, "last_edit_date": 1480540454, "creation_date": 1480539787, "answer_id": 40898143, "question_id": 40896703, "link": "https://stackoverflow.com/questions/40896703/querying-python-pandas-dataframe-with-a-datetime-index-or-column/40898143#40898143", "title": "Querying Python Pandas DataFrame with a Datetime index or column", "body": "<p>If I were you I would use the simpler method:</p>\n\n<pre><code>df['2015-11-17']  \n</code></pre>\n\n<p>in my opinion this would be more 'pandas logic' than using <code>.loc[]</code> for a single date. I am guessing it is also faster.</p>\n\n<p>testing on a minute OHLC dataframe:</p>\n\n<pre><code>%timeit df.loc[(df.index &gt;= '2015-11-17') &amp; (df.index &lt; '2015-11-18')]\n%timeit df.loc['2015-11-17']\n%timeit df['2015-11-17']\n\n100 loops, best of 3: 13.8 ms per loop\n1 loop, best of 3: 1.39 s per loop\n1000 loops, best of 3: 486 us per loop\n</code></pre>\n"}], "owner": {"reputation": 1909, "user_id": 7003310, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93c4c71ac8fb2188d6e0f481b9b88a9d?s=128&d=identicon&r=PG&f=1", "display_name": "qichao_he", "link": "https://stackoverflow.com/users/7003310/qichao-he"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3651, "favorite_count": 0, "accepted_answer_id": 40898143, "answer_count": 1, "score": 3, "last_activity_date": 1480540454, "creation_date": 1480534484, "question_id": 40896703, "link": "https://stackoverflow.com/questions/40896703/querying-python-pandas-dataframe-with-a-datetime-index-or-column", "title": "Querying Python Pandas DataFrame with a Datetime index or column", "body": "<p>So, I'm new about the package Pandas.\nI was doing some back test on a strategy on ETFs, that I need to do a lot of queries on Pandas Dataframe.</p>\n\n<p>So let's say I'm these two DataFrames, df and df1, the only difference is that:\ndf has datetime Index, while df1 has the timestamp as a column and an integer Index</p>\n\n<pre><code>In[104]: df.head()\nOut[104]: \n\n                       high     low    open   close   volume  openInterest\n2007-04-24 09:31:00  148.28  148.12  148.23  148.15  2304400        341400\n2007-04-24 09:32:00  148.21  148.14  148.14  148.19  2753500        449100\n2007-04-24 09:33:00  148.24  148.13  148.18  148.14  2863400        109900\n2007-04-24 09:34:00  148.18  148.12  148.13  148.16  3118287        254887\n2007-04-24 09:35:00  148.17  148.14  148.16  148.16  3202112         83825\n\nIn[105]: df1.head()\nOut[105]: \n\n                dates    high     low    open   close   volume  openInterest\n0 2007-04-24 09:31:00  148.28  148.12  148.23  148.15  2304400        341400\n1 2007-04-24 09:32:00  148.21  148.14  148.14  148.19  2753500        449100\n2 2007-04-24 09:33:00  148.24  148.13  148.18  148.14  2863400        109900\n3 2007-04-24 09:34:00  148.18  148.12  148.13  148.16  3118287        254887\n4 2007-04-24 09:35:00  148.17  148.14  148.16  148.16  3202112         83825\n</code></pre>\n\n<p>so I test the query speed a little bit:</p>\n\n<pre><code>In[100]: %timeit df1[(df1['dates'] &gt;= '2015-11-17') &amp; (df1['dates'] &lt; '2015-11-18')]\n%timeit df.loc[(df.index &gt;= '2015-11-17') &amp; (df.index &lt; '2015-11-18')]\n%timeit df.loc['2015-11-17']\n100 loops, best of 3: 4.67 ms per loop\n100 loops, best of 3: 3.14 ms per loop\n1 loop, best of 3: 259 ms per loop\n</code></pre>\n\n<p>To my surprise is that using the logic built in with Pandas is actually the slowest:</p>\n\n<pre><code>df.loc['2015-11-17']\n</code></pre>\n\n<p>Does anyone know why is that?\nAnd are there any documents or blogs about the most efficient ways to query a Pandas DataFrame?</p>\n"}, {"tags": ["python", "pyopengl", "pysdl2"], "answers": [{"tags": [], "owner": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "is_accepted": true, "score": 2, "last_activity_date": 1480536873, "creation_date": 1480536873, "answer_id": 40897343, "question_id": 40896624, "link": "https://stackoverflow.com/questions/40896624/type-error-for-params-of-sdl-createwindow-using-pysdl2/40897343#40897343", "title": "Type error for params of sdl_CreateWindow using PySdl2", "body": "<p>It's the (beep) unicode thing. Correct code:</p>\n\n<pre><code>self.width = 640\nself.height = 400\n\nself.window = sdl2.SDL_CreateWindow (\n    b'OpenGL test',     #!!!!!!! Note the b !!!!!!!\n    sdl2.SDL_WINDOWPOS_UNDEFINED,\n    sdl2.SDL_WINDOWPOS_UNDEFINED,\n    self.width,\n    self.height,\n    sdl2.SDL_WINDOW_OPENGL | sdl2.SDL_WINDOW_RESIZABLE\n)\n</code></pre>\n\n<p>And the error message showed the wrong line, which doesn't help.</p>\n"}], "owner": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 40897343, "answer_count": 1, "score": 0, "last_activity_date": 1480536873, "creation_date": 1480534179, "last_edit_date": 1480535600, "question_id": 40896624, "link": "https://stackoverflow.com/questions/40896624/type-error-for-params-of-sdl-createwindow-using-pysdl2", "title": "Type error for params of sdl_CreateWindow using PySdl2", "body": "<p>The following code fragment:</p>\n\n<pre><code>self.width = 640\nself.height = 400\n\nself.window = sdl2.SDL_CreateWindow (\n    'OpenGL test',\n    sdl2.SDL_WINDOWPOS_UNDEFINED,\n    sdl2.SDL_WINDOWPOS_UNDEFINED,\n    self.width,\n    self.height,\n    sdl2.SDL_WINDOW_OPENGL | sdl2.SDL_WINDOW_RESIZABLE\n)\n</code></pre>\n\n<p>gives this error on Windows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FVhLj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FVhLj.png\" alt=\"enter image description here\"></a></p>\n\n<p>Seems there's something wrong with this parameter:</p>\n\n<pre><code>sdl2.SDL_WINDOW_OPENGL | sdl2.SDL_WINDOW_RESIZABLE\n</code></pre>\n\n<p>Using:</p>\n\n<ul>\n<li>Python 3.5</li>\n<li>PySDL2 0.9.5</li>\n</ul>\n\n<p>Strange thing is this used to work on Python 2.7.</p>\n\n<p>Anyone knows what could be the problem?</p>\n"}, {"tags": ["python", "compilation", "gpio"], "comments": [{"owner": {"reputation": 730, "user_id": 6941046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rDqanJg0rQU/AAAAAAAAAAI/AAAAAAAAACg/0Hf929Qb7uk/photo.jpg?sz=128", "display_name": "Elliot Roberts", "link": "https://stackoverflow.com/users/6941046/elliot-roberts"}, "edited": false, "score": 1, "creation_date": 1480534255, "post_id": 40896609, "comment_id": 69007094, "body": "Full traceback is <i>always</i> nice"}, {"owner": {"reputation": 663, "user_id": 2728397, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17458c101e8e1ed145067204482553f4?s=128&d=identicon&r=PG&f=1", "display_name": "R__raki__", "link": "https://stackoverflow.com/users/2728397/r-raki"}, "edited": false, "score": 1, "creation_date": 1480535350, "post_id": 40896609, "comment_id": 69007606, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/9252543/importerror-cannot-import-name-x\">ImportError: Cannot import name X</a>"}, {"owner": {"reputation": 144, "user_id": 6150446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEc7E.png?s=128&g=1", "display_name": "Have_Mercy", "link": "https://stackoverflow.com/users/6150446/have-mercy"}, "edited": false, "score": 0, "creation_date": 1480535352, "post_id": 40896609, "comment_id": 69007608, "body": "Did you run the <code>setup.py</code> from the tutorial repo?"}, {"owner": {"reputation": 41, "user_id": 7232683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a9abba63c647cefd3058c0f94a2e03?s=128&d=identicon&r=PG&f=1", "display_name": "Fleder", "link": "https://stackoverflow.com/users/7232683/fleder"}, "edited": false, "score": 0, "creation_date": 1480701398, "post_id": 40896609, "comment_id": 69087946, "body": "I can upload a Typescript. And yes, I did run the setup.py."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 1752825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e73c4a2aa9bc346eceb2cdbb9a2f39?s=128&d=identicon&r=PG", "display_name": "GilZm", "link": "https://stackoverflow.com/users/1752825/gilzm"}, "is_accepted": false, "score": 2, "last_activity_date": 1492866440, "creation_date": 1492866440, "answer_id": 43559597, "question_id": 40896609, "link": "https://stackoverflow.com/questions/40896609/python-compilation-error-cannot-import-name-gpio/43559597#43559597", "title": "python - compilation error - cannot import name &#39;gpio&#39;", "body": "<p>got same issue on orange pi Zero... I got the python library from <a href=\"https://pypi.python.org/pypi/pyA10Lime\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/pyA10Lime</a> and it worked then :</p>\n\n<pre><code>root@orangepizero:~# wget https://pypi.python.org/packages/e6/52/a6b558fd5c8eb11e5de710271d59881769425e61d3adf6d235836ca877cc/pyA10Lime-0.2.1.tar.gz\nroot@orangepizero:~# tar -zxf pyA10Lime-0.2.1.tar.gz\nroot@orangepizero:~# cd pyA10Lime-0.2.1/\nroot@orangepizero:~/pyA10Lime-0.2.1#\nroot@orangepizero:~/pyA10Lime-0.2.1# vi setup.py\n# \n# @line 60, add :\n#             elif \"sun8i\" in processor:\n#                 print (\"Detected processor: \" + print_color(processor) + \" (Probably Allwinner H2+/H3)\")\n# \nroot@orangepizero:~/pyA10Lime-0.2.1# python setup.py install\nroot@orangepizero:~/pyA10Lime-0.2.1# python\nPython 2.7.9 (default, Aug 13 2016, 17:56:53)\n[GCC 4.9.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from pyA20.gpio import gpio\n&gt;&gt;&gt; from pyA20.gpio import port\n&gt;&gt;&gt; gpio.init()\n&gt;&gt;&gt; gpio.setcfg(port.PG7, gpio.OUTPUT)\n&gt;&gt;&gt; gpio.output(port.PG7, gpio.HIGH)\n&gt;&gt;&gt;\n&gt;&gt;&gt; gpio.output(port.PG7, gpio.LOW)\n&gt;&gt;&gt; exit()\n</code></pre>\n\n<p>usefull link <a href=\"https://forum.armbian.com/index.php?/topic/3655-guide-orange-pi-zero-gpios/\" rel=\"nofollow noreferrer\">https://forum.armbian.com/index.php?/topic/3655-guide-orange-pi-zero-gpios/</a></p>\n"}], "owner": {"reputation": 41, "user_id": 7232683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a9abba63c647cefd3058c0f94a2e03?s=128&d=identicon&r=PG&f=1", "display_name": "Fleder", "link": "https://stackoverflow.com/users/7232683/fleder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1390, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1553240720, "creation_date": 1480534113, "last_edit_date": 1480539941, "question_id": 40896609, "link": "https://stackoverflow.com/questions/40896609/python-compilation-error-cannot-import-name-gpio", "title": "python - compilation error - cannot import name &#39;gpio&#39;", "body": "<p>I am trying out this tutorial here:\n<a href=\"http://www.instructables.com/id/Orange-Pi-One-Python-GPIO-basic/?ALLSTEPS\" rel=\"nofollow noreferrer\">http://www.instructables.com/id/Orange-Pi-One-Python-GPIO-basic/?ALLSTEPS</a></p>\n\n<p>Whenever I execute my .py file, I get the error \"cannot import name 'gpio'\"</p>\n\n<p>This here is the code I use after installing everything else, stated in the tut:</p>\n\n<pre><code>#import the library\nfrom pyA20.gpio import gpio\nfrom pyA20.gpio import port\nfrom time import sleep\n\n#initialize the gpio module\ngpio.init()\n\n#setup the port (same as raspberry pi's gpio.setup() function)\ngpio.setcfg(port.PA7, gpio.OUTPUT)\n\n#now we do something (light up the LED)\ngpio.output(port.PA7, gpio.HIGH)\n\n#turn off the LED after 2 seconds\nsleep(2)\ngpio.output(port.PA7, gpio.LOW)\n</code></pre>\n\n<p>I am pretty new to all of this, so please bear with me.\nThank you very much.</p>\n"}, {"tags": ["python", "math", "raspberry-pi", "waveform", "trigonometry"], "comments": [{"owner": {"reputation": 55420, "user_id": 52443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a220753dbb4d24a76430971a18ed4dce?s=128&d=identicon&r=PG", "display_name": "Welbog", "link": "https://stackoverflow.com/users/52443/welbog"}, "edited": false, "score": 0, "creation_date": 1480534114, "post_id": 40896596, "comment_id": 69007032, "body": "Probably the &quot;pi&quot; constant is a float: <a href=\"https://en.wikipedia.org/wiki/Floating_point\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Floating_point</a>"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1480534560, "post_id": 40896596, "comment_id": 69007217, "body": "Those values aren&#39;t &quot;way out there&quot;, they&#39;re very nearly 0.0. The reason they&#39;re not exactly zero is <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">floating point isn&#39;t always exact</a>."}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "edited": false, "score": 0, "creation_date": 1480536189, "post_id": 40896596, "comment_id": 69008063, "body": "Use <code>for i in range(50): print (16 + sin(2*pi*f*i&#47;Fs) ) -16</code> to cut off the last bits with the rounding noise."}], "answers": [{"tags": [], "owner": {"reputation": 930, "user_id": 2701363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b26557140e02c34928040713305dfe?s=128&d=identicon&r=PG&f=1", "display_name": "kiliantics", "link": "https://stackoverflow.com/users/2701363/kiliantics"}, "is_accepted": true, "score": 1, "last_activity_date": 1480534449, "creation_date": 1480534449, "answer_id": 40896691, "question_id": 40896596, "link": "https://stackoverflow.com/questions/40896596/unexpected-unwanted-results-in-sine-wave-calculation-in-python/40896691#40896691", "title": "Unexpected/Unwanted results in sine wave calculation in Python", "body": "<p>These values are not \"way-out-there,\" they are consistent with zero to machine precision. Python typically has precision to 53 bits:</p>\n\n<p><a href=\"https://docs.python.org/2/tutorial/floatingpoint.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/tutorial/floatingpoint.html</a></p>\n\n<p>The binary representation for this corresponds with ~1e-16, which is the order you are seeing in the values that should correspond with zero in your sine function.</p>\n"}], "owner": {"reputation": 3, "user_id": 4975881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7NLH.png?s=128&g=1", "display_name": "Jon M", "link": "https://stackoverflow.com/users/4975881/jon-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 40896691, "answer_count": 1, "score": 0, "last_activity_date": 1480537735, "creation_date": 1480534025, "last_edit_date": 1480537735, "question_id": 40896596, "link": "https://stackoverflow.com/questions/40896596/unexpected-unwanted-results-in-sine-wave-calculation-in-python", "title": "Unexpected/Unwanted results in sine wave calculation in Python", "body": "<p>As part of a larger project, I want to change some values in a wave length-type pattern, rather than a +1 linear-type pattern.</p>\n\n<p>To be clear, I have no desire to try to plot these on a graph or anything of the sort... I want to use these values to control some color intensity through my Raspberry Pi.</p>\n\n<p>Anyways, back to the issue at hand...</p>\n\n<p>I have the following python script:</p>\n\n<pre><code>#!/usr/bin/python\nfrom math import *\nFs=8000\nf=500\ni=0\nwhile i&lt;50:\n    print ( sin(2*pi*f*i/Fs) )\n    i+=1\n</code></pre>\n\n<p>Which gives me the following output (truncated):</p>\n\n<pre><code>0.0\n0.382683432365\n0.707106781187\n0.923879532511\n1.0\n0.923879532511\n0.707106781187\n0.382683432365\n1.22464679915e-16\n-0.382683432365\n-0.707106781187\n-0.923879532511\n-1.0\n-0.923879532511\n-0.707106781187\n-0.382683432365\n-2.44929359829e-16\n0.382683432365\n0.707106781187\n0.923879532511\n1.0\n</code></pre>\n\n<p>As you can see, every now and again there's a value that's just way out there:</p>\n\n<pre><code>1.22464679915e-16\n\n-2.44929359829e-16\n\n3.67394039744e-16\n\n-4.89858719659e-16\n\n2.38868023897e-15\n\n-7.34788079488e-16\n</code></pre>\n\n<p>Why am I getting these strange results? How I avoid these way-out-there values? What am I doing wrong?</p>\n"}, {"tags": ["python", "performance", "gpu", "cpu"], "comments": [{"owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "edited": false, "score": 1, "creation_date": 1480534213, "post_id": 40896591, "comment_id": 69007081, "body": "Surely this does not take 15 seconds? It take me 0.1 s."}, {"owner": {"reputation": 3193, "user_id": 2694511, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/2e9aw.png?s=128&g=1", "display_name": "Spencer D", "link": "https://stackoverflow.com/users/2694511/spencer-d"}, "edited": false, "score": 1, "creation_date": 1480534217, "post_id": 40896591, "comment_id": 69007083, "body": "I&#39;m not 100% familiar with macbook pro hardware, but perhaps <a href=\"https://mathema.tician.de/software/pycuda/\" rel=\"nofollow noreferrer\">PyCuda</a> could be what you are looking for."}, {"owner": {"reputation": 13379, "user_id": 1033027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b56ea1c43a4ecb1060ec8bcb8d2bce78?s=128&d=identicon&r=PG", "display_name": "Jules", "link": "https://stackoverflow.com/users/1033027/jules"}, "edited": false, "score": 7, "creation_date": 1480534223, "post_id": 40896591, "comment_id": 69007086, "body": "I would recommend reading up on (GP)GPU programming in Python as well as <a href=\"http://stackoverflow.com/questions/5957554/python-gpu-programming#5957647\">this question</a> which focuses on PyCUDA. On a sidenote, I&#39;m somewhat concerned that this program takes 15 seconds to run on your hardware."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 2, "creation_date": 1480534453, "post_id": 40896591, "comment_id": 69007167, "body": "This took my Note 4 (a phone) 2.5 seconds, and it&#39;s under clocked. I pray for Mac users if this took 15 seconds."}, {"owner": {"reputation": 662, "user_id": 6811609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d6583225c294b5891e010a237c20f5a?s=128&d=identicon&r=PG&f=1", "display_name": "Whud", "link": "https://stackoverflow.com/users/6811609/whud"}, "reply_to_user": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "edited": false, "score": 0, "creation_date": 1480534780, "post_id": 40896591, "comment_id": 69007330, "body": "@jmd_dk I&#39;m not sure if it applies here but in python 2 runs some programs that use range must slower than python 3. OP might be using 2"}, {"owner": {"reputation": 713, "user_id": 6679641, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e70f22331a802d8b5b812a994372b92?s=128&d=identicon&r=PG&f=1", "display_name": "harry lakins", "link": "https://stackoverflow.com/users/6679641/harry-lakins"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1480534815, "post_id": 40896591, "comment_id": 69007345, "body": "MY MISTAKE. It took 15 seconds to also print it out at the end - without that - under a second! Nonetheless, i appreciate the concerns, and @Carcigenicate, no need for the prays :)"}, {"owner": {"reputation": 13379, "user_id": 1033027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b56ea1c43a4ecb1060ec8bcb8d2bce78?s=128&d=identicon&r=PG", "display_name": "Jules", "link": "https://stackoverflow.com/users/1033027/jules"}, "edited": false, "score": 0, "creation_date": 1480535332, "post_id": 40896591, "comment_id": 69007598, "body": "@harrylakins I&#39;m not sure what Python interpreter you&#39;re using, but even with a <code>print</code> invocation, it&#39;s well under a second for me (but this is off-topic for this question)."}, {"owner": {"reputation": 713, "user_id": 6679641, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e70f22331a802d8b5b812a994372b92?s=128&d=identicon&r=PG&f=1", "display_name": "harry lakins", "link": "https://stackoverflow.com/users/6679641/harry-lakins"}, "edited": false, "score": 0, "creation_date": 1480535359, "post_id": 40896591, "comment_id": 69007614, "body": "IDLE - it&#39;s really slow."}, {"owner": {"reputation": 713, "user_id": 6679641, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e70f22331a802d8b5b812a994372b92?s=128&d=identicon&r=PG&f=1", "display_name": "harry lakins", "link": "https://stackoverflow.com/users/6679641/harry-lakins"}, "edited": false, "score": 0, "creation_date": 1480535413, "post_id": 40896591, "comment_id": 69007652, "body": "Well my quick example really hasn&#39;t worked out well!! Your right- in terminal it&#39;s much quicker. Hope either way my actual question is understood :)"}], "answers": [{"comments": [{"owner": {"reputation": 713, "user_id": 6679641, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e70f22331a802d8b5b812a994372b92?s=128&d=identicon&r=PG&f=1", "display_name": "harry lakins", "link": "https://stackoverflow.com/users/6679641/harry-lakins"}, "edited": false, "score": 0, "creation_date": 1480534964, "post_id": 40896763, "comment_id": 69007413, "body": "Would this mean altering existing code? With my actual projects, which are already up and working, would i have to restructure it to work for gpu?"}, {"owner": {"reputation": 13379, "user_id": 1033027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b56ea1c43a4ecb1060ec8bcb8d2bce78?s=128&d=identicon&r=PG", "display_name": "Jules", "link": "https://stackoverflow.com/users/1033027/jules"}, "reply_to_user": {"reputation": 713, "user_id": 6679641, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e70f22331a802d8b5b812a994372b92?s=128&d=identicon&r=PG&f=1", "display_name": "harry lakins", "link": "https://stackoverflow.com/users/6679641/harry-lakins"}, "edited": false, "score": 0, "creation_date": 1480535462, "post_id": 40896763, "comment_id": 69007683, "body": "@harrylakins while many structures (like loops) can be (in some cases) fairly easily refactored to take advantage of GPU offloading, a more complex code base can require <i>loads</i> of work to benefit from, or even use, a GPU. Again, I recommend you learn at least the fundamentals of the CUDA (or OpenCL if you&#39;re using AMD) architecture, even if that requires understanding some CUDA C code."}, {"owner": {"reputation": 713, "user_id": 6679641, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e70f22331a802d8b5b812a994372b92?s=128&d=identicon&r=PG&f=1", "display_name": "harry lakins", "link": "https://stackoverflow.com/users/6679641/harry-lakins"}, "edited": false, "score": 0, "creation_date": 1480535590, "post_id": 40896763, "comment_id": 69007741, "body": "So I&#39;m probably going to have to do quite a lot of code restructuring? My code is a neural network which involves a lot of arithmetic between matrix and list values"}, {"owner": {"reputation": 13379, "user_id": 1033027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b56ea1c43a4ecb1060ec8bcb8d2bce78?s=128&d=identicon&r=PG", "display_name": "Jules", "link": "https://stackoverflow.com/users/1033027/jules"}, "edited": false, "score": 0, "creation_date": 1480535681, "post_id": 40896763, "comment_id": 69007798, "body": "How much restructuring you&#39;ll have to do is entirely dependent on the current structure of your code. If your ANN is complex and already fairly complete, this could mean several weeks of dedicated work."}, {"owner": {"reputation": 1, "user_id": 7227157, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-metvNJRv6C4/AAAAAAAAAAI/AAAAAAAACN0/ECvG4gd2AxY/photo.jpg?sz=128", "display_name": "Matt Kyles", "link": "https://stackoverflow.com/users/7227157/matt-kyles"}, "edited": false, "score": 0, "creation_date": 1480535762, "post_id": 40896763, "comment_id": 69007847, "body": "Just out of curiosity, in your actual code do you have the print function inside or outside the for loop? I ask because the only way I could replicate this taking 15ish seconds was with the print inside the for loop. It took maybe a second to actually complete the for loop without the print inside it. Printing to the console is really costly for the speed the program runs at because, and correct me if I&#39;m wrong, it won&#39;t reiterate through the loop until the text has been printed to the console."}, {"owner": {"reputation": 713, "user_id": 6679641, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e70f22331a802d8b5b812a994372b92?s=128&d=identicon&r=PG&f=1", "display_name": "harry lakins", "link": "https://stackoverflow.com/users/6679641/harry-lakins"}, "edited": false, "score": 0, "creation_date": 1480535826, "post_id": 40896763, "comment_id": 69007880, "body": "My NN is completely flexible and as a user you can choose it&#39;s structure ... so the code is very abstract in a sense (nothing hardcoded)."}, {"owner": {"reputation": 713, "user_id": 6679641, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e70f22331a802d8b5b812a994372b92?s=128&d=identicon&r=PG&f=1", "display_name": "harry lakins", "link": "https://stackoverflow.com/users/6679641/harry-lakins"}, "edited": false, "score": 0, "creation_date": 1480535956, "post_id": 40896763, "comment_id": 69007940, "body": "Regarding the 15 second code - i am also rather intrigued. I am defiantly printing after (out of) the loop, in IDLE. It takes a good 10 seconds, and freezes up IDLE for a second or two. Whereas in Terminal, it prints instantly.  Clearly using IDLE was a bad idea to supply an accurate execution time...! I have no clue why IDLE makes it so much slower."}], "tags": [], "owner": {"reputation": 1, "user_id": 7227157, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-metvNJRv6C4/AAAAAAAAAAI/AAAAAAAACN0/ECvG4gd2AxY/photo.jpg?sz=128", "display_name": "Matt Kyles", "link": "https://stackoverflow.com/users/7227157/matt-kyles"}, "is_accepted": false, "score": 0, "last_activity_date": 1480534722, "creation_date": 1480534722, "answer_id": 40896763, "question_id": 40896591, "link": "https://stackoverflow.com/questions/40896591/if-i-have-a-normal-python-script-how-can-i-get-it-to-run-on-my-computers-gpu-n/40896763#40896763", "title": "If I have a normal python script, how can I get it to run on my computers GPU, not CPU?", "body": "<p>I would recommend looking into using something like <a href=\"http://www.cs.toronto.edu/~tijmen/gnumpy.html\" rel=\"nofollow noreferrer\">gnumpy</a> if you're mainly looking to do simple but repetitive mathematical calculations.</p>\n"}], "owner": {"reputation": 713, "user_id": 6679641, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9e70f22331a802d8b5b812a994372b92?s=128&d=identicon&r=PG&f=1", "display_name": "harry lakins", "link": "https://stackoverflow.com/users/6679641/harry-lakins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 613, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1480536145, "creation_date": 1480534015, "last_edit_date": 1480536145, "question_id": 40896591, "link": "https://stackoverflow.com/questions/40896591/if-i-have-a-normal-python-script-how-can-i-get-it-to-run-on-my-computers-gpu-n", "title": "If I have a normal python script, how can I get it to run on my computers GPU, not CPU?", "body": "<p>Assume i have a really basic script, that requires a lot of calculation:</p>\n\n<pre><code>c = 2\nresult = 0\nfor i in range(0,10000):\n    c += 5\n    c = i*c\nprint(c) //just added this, sorry for confusion!\n</code></pre>\n\n<p>...takes about 15 seconds in IDLE on my mac book pro.\nHow can I get this exact script to run on the gpu not cpu, for faster results? Also, wondering how code (if at all) would need to change in order to work for gpu?</p>\n\n<p>UPDATE: sorry, meant 15 seconds with the print statement at the end there. Turns out this is a bad example because IDLE executes this unusually slow - just tried in Terminal and it was instant.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1480534664, "post_id": 40896575, "comment_id": 69007277, "body": "No, it doesn&#39;t save time: All imported modules are cached. Importing something another module already imported reuses the copy from the cache, and so effectively takes no time at all."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1480535539, "post_id": 40896575, "comment_id": 69007714, "body": "@CharlesDuffy: If you had dozens or hundreds of places where you needed to import <code>imp_mod</code> it could save some time; the code that handles imports does cache, but it does a surprising amount of work before the cache is checked, so reducing 10 * #modules - 1 cached imports to #modules - 1 cached imports might save a tiny bit on start up time. No affect on runtime unless you have functions that are importing internally to reduce startup time in exchange for cached module lookup overhead."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1480535736, "post_id": 40896575, "comment_id": 69007831, "body": "That said, the costs are still pretty trivial; directly looking up a module known to be in the cache, e.g. <code>sys.modules[&#39;collections&#39;]</code> takes (on my machine) ~60 ns, while <code>import collections</code> performed repeatedly takes ~350 ns each use. Saving one three-thousandth of a second per import is not that impressive. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 5350, "user_id": 3334049, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/040cc270affb71c8cebf4897c4171a08?s=128&d=identicon&r=PG", "display_name": "lucasnadalutti", "link": "https://stackoverflow.com/users/3334049/lucasnadalutti"}, "is_accepted": true, "score": 2, "last_activity_date": 1480534658, "creation_date": 1480534658, "answer_id": 40896742, "question_id": 40896575, "link": "https://stackoverflow.com/questions/40896575/what-benefits-or-disadvantages-would-importing-a-module-that-contains-import-c/40896742#40896742", "title": "What benefits or disadvantages would importing a module that contains &#39;import&#39; commands?", "body": "<p>Yes, it would allow you to access them. If you place these imports in <code>imp_mod.py</code>:</p>\n\n<pre><code>from os import listdir\nfrom collections import defaultdict\nfrom copy import deepcopy\n</code></pre>\n\n<p>Then, you could do this in another file, say, <code>myfile.py</code>:</p>\n\n<pre><code>import imp_mod\nimp_mod.listdir\nimp_mod.defaultdict\nimp_mod.deepcopy\n</code></pre>\n\n<p>You're wrong about reduction of importing time, as what happens is the opposite. Python will need to import <code>imp_mod</code> and then import the other modules afterwards, while the first import would not be needed if you were importing these modules in <code>myfile.py</code> itself. If you do the same imports in another file, they will already be in cache, so virtually no time is spent in the next import.</p>\n\n<p>The real disadvantage here is less readability. Whoever looks at <code>imp_mod.listdir</code>, for example, will ask himself what the heck is this method and why it has the same name as that <code>os</code> module's method. When he had to open <code>imp_mod.py</code> just to find out that it's the same method, well, he probably wouldn't be happy. I wouldn't.</p>\n"}, {"tags": [], "owner": {"reputation": 144, "user_id": 6150446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEc7E.png?s=128&g=1", "display_name": "Have_Mercy", "link": "https://stackoverflow.com/users/6150446/have-mercy"}, "is_accepted": false, "score": 0, "last_activity_date": 1480535073, "creation_date": 1480535073, "answer_id": 40896863, "question_id": 40896575, "link": "https://stackoverflow.com/questions/40896575/what-benefits-or-disadvantages-would-importing-a-module-that-contains-import-c/40896863#40896863", "title": "What benefits or disadvantages would importing a module that contains &#39;import&#39; commands?", "body": "<p>As lucasnadalutti mentioned, you can access them by importing your module.</p>\n\n<p>In terms of advantages, it can make your main program care less about where the imports are coming from if the <code>imp_mod</code> handles all imports, however, as your program gets more complex and starts to include more namespaces, this approach can get more messy. You can start to handle a bit of this by using <code>__init__.py</code> within directories to handle imports to do a similar thing, but as things get more complex, personally, I feel it add a little more complexity. I'd rather just know where a module came from to look it up.</p>\n"}], "owner": {"reputation": 45, "user_id": 4303334, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6c08182514010b03a3254293c4a1c822?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4303334/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1895, "favorite_count": 0, "accepted_answer_id": 40896742, "answer_count": 2, "score": 2, "last_activity_date": 1480535073, "creation_date": 1480533953, "last_edit_date": 1480534419, "question_id": 40896575, "link": "https://stackoverflow.com/questions/40896575/what-benefits-or-disadvantages-would-importing-a-module-that-contains-import-c", "title": "What benefits or disadvantages would importing a module that contains &#39;import&#39; commands?", "body": "<p>If I were to create a module that was called for example <code>imp_mod.py</code> and inside it contained all (subjectively used) relevant modules that I frequently used.</p>\n\n<p>Would importing this module into my main program allow me access to the imports contained inside <code>imp_mod.py</code>?</p>\n\n<p>If so, what disadvantages would this bring? </p>\n\n<p>I guess a major advantage would be a reduction of time spent importing even though its only a couple of seconds saved...</p>\n"}, {"tags": ["php", "python", "exec"], "comments": [{"owner": {"reputation": 17540, "user_id": 1007220, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/htE7h.jpg?s=128&g=1", "display_name": "aynber", "link": "https://stackoverflow.com/users/1007220/aynber"}, "edited": false, "score": 4, "creation_date": 1480533985, "post_id": 40896569, "comment_id": 69006973, "body": "It could be a permission issue. Does the user that runs the web server have permission to read/write to that file?"}, {"owner": {"reputation": 15599, "user_id": 4575071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9bceb35fc57e732ca44911b801b12e?s=128&d=identicon&r=PG&f=1", "display_name": "ettanany", "link": "https://stackoverflow.com/users/4575071/ettanany"}, "edited": false, "score": 1, "creation_date": 1480534023, "post_id": 40896569, "comment_id": 69006991, "body": "You do not need <code>myfile.close()</code> when you use <code>with</code> statement"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4867389, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d00d802553a9dd93f5210a0422cf254?s=128&d=identicon&r=PG&f=1", "display_name": "testuser", "link": "https://stackoverflow.com/users/4867389/testuser"}, "edited": false, "score": 0, "creation_date": 1480537280, "post_id": 40896754, "comment_id": 69008616, "body": "Sorry, that was a typo.  Edited the original question"}], "tags": [], "owner": {"reputation": 848, "user_id": 1591136, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f79ff3bd1c9def9791dc073d2533c0ec?s=128&d=identicon&r=PG", "display_name": "RonPringadi", "link": "https://stackoverflow.com/users/1591136/ronpringadi"}, "is_accepted": false, "score": 0, "last_activity_date": 1480534697, "creation_date": 1480534697, "answer_id": 40896754, "question_id": 40896569, "link": "https://stackoverflow.com/questions/40896569/python-doesnt-write-if-call-from-php/40896754#40896754", "title": "python doesn&#39;t write if call from php", "body": "<p>I think there is quote issue in your code</p>\n\n<blockquote>\n  <p>exec('python writetest.py\")</p>\n</blockquote>\n\n<p>Once you fix that, try again.\nIf still not working I would suggest</p>\n\n<pre><code>exec('python writetest.py', $output , $return_var) \n</code></pre>\n\n<p>see: <a href=\"http://php.net/manual/en/function.exec.php\" rel=\"nofollow noreferrer\">http://php.net/manual/en/function.exec.php</a></p>\n\n<p>Then print output and return_var by print_r for debugging purpose</p>\n\n<pre><code>print_r($output);\nprint_r($return_var);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 4867389, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d00d802553a9dd93f5210a0422cf254?s=128&d=identicon&r=PG&f=1", "display_name": "testuser", "link": "https://stackoverflow.com/users/4867389/testuser"}, "is_accepted": true, "score": 0, "last_activity_date": 1480538532, "creation_date": 1480538532, "answer_id": 40897806, "question_id": 40896569, "link": "https://stackoverflow.com/questions/40896569/python-doesnt-write-if-call-from-php/40897806#40897806", "title": "python doesn&#39;t write if call from php", "body": "<p>As aynber pointed out, it was a permissions issue.  I gave the web server user write access and it worked</p>\n"}], "owner": {"reputation": 53, "user_id": 4867389, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d00d802553a9dd93f5210a0422cf254?s=128&d=identicon&r=PG&f=1", "display_name": "testuser", "link": "https://stackoverflow.com/users/4867389/testuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 40897806, "answer_count": 2, "score": 0, "last_activity_date": 1480538532, "creation_date": 1480533907, "last_edit_date": 1480538479, "question_id": 40896569, "link": "https://stackoverflow.com/questions/40896569/python-doesnt-write-if-call-from-php", "title": "python doesn&#39;t write if call from php", "body": "<p>I have a python script writetest.py with the following:</p>\n\n<pre><code>print \"mark1\"\nwith open(\"/testfile.txt\", \"a\") as myfile:\n    myfile.write(\"Hello World\")\nprint \"mark2\"\n</code></pre>\n\n<p>When I call the scrip in the shell, it work and adds \"Hello World\" the testfile.txt.  When I call it using the php exec command, it doesn't write:</p>\n\n<pre><code>exec('python writetest.py', $output, $return_var);\nprint_r($output);\nprint_r($return_var);\n</code></pre>\n\n<p>Which prints:</p>\n\n<pre><code>Array ( [0] =&gt; mark1 )\n1\n</code></pre>\n\n<p>My python script runs but stops at the open code.</p>\n"}, {"tags": ["python", "subprocess"], "comments": [{"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1480533869, "post_id": 40896518, "comment_id": 69006922, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/7897202/subprocess-readline-hangs-waiting-for-eof\">subprocess readline hangs waiting for EOF</a>"}, {"owner": {"reputation": 3181, "user_id": 2828217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f2218f355aa10d4319429930f3a68f8?s=128&d=identicon&r=PG&f=1", "display_name": "brm", "link": "https://stackoverflow.com/users/2828217/brm"}, "edited": false, "score": 0, "creation_date": 1480534989, "post_id": 40896518, "comment_id": 69007428, "body": "Perhaps <a href=\"https://pexpect.readthedocs.io/\" rel=\"nofollow noreferrer\">pexpect</a> is useful in this case."}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1480545947, "post_id": 40896518, "comment_id": 69013036, "body": "Please fix your indentation"}, {"owner": {"reputation": 95, "user_id": 5543356, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51db2077b54657b8249164cd889a0734?s=128&d=identicon&r=PG&f=1", "display_name": "boppu", "link": "https://stackoverflow.com/users/5543356/boppu"}, "reply_to_user": {"reputation": 3181, "user_id": 2828217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f2218f355aa10d4319429930f3a68f8?s=128&d=identicon&r=PG&f=1", "display_name": "brm", "link": "https://stackoverflow.com/users/2828217/brm"}, "edited": false, "score": 0, "creation_date": 1480546923, "post_id": 40896518, "comment_id": 69013421, "body": "@brm: I looked at the documentation and pexpect has a default time out of 30s and it can be increased. My program runs for very long time (&gt;1 hr) before my expected pattern matches. Does it also works in this case?  I mean how to wait for longer timeout periods which are not known upfront?"}, {"owner": {"reputation": 95, "user_id": 5543356, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51db2077b54657b8249164cd889a0734?s=128&d=identicon&r=PG&f=1", "display_name": "boppu", "link": "https://stackoverflow.com/users/5543356/boppu"}, "reply_to_user": {"reputation": 3181, "user_id": 2828217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f2218f355aa10d4319429930f3a68f8?s=128&d=identicon&r=PG&f=1", "display_name": "brm", "link": "https://stackoverflow.com/users/2828217/brm"}, "edited": false, "score": 0, "creation_date": 1480589661, "post_id": 40896518, "comment_id": 69029863, "body": "@brm. I think I figured it out; timeout should be equal to None; then pexpect will wait indefinitely. I"}], "owner": {"reputation": 95, "user_id": 5543356, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51db2077b54657b8249164cd889a0734?s=128&d=identicon&r=PG&f=1", "display_name": "boppu", "link": "https://stackoverflow.com/users/5543356/boppu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 460, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1480546442, "creation_date": 1480533730, "last_edit_date": 1480546442, "question_id": 40896518, "link": "https://stackoverflow.com/questions/40896518/python-subprocess-running-interactive-program", "title": "python subprocess running interactive program", "body": "<p>I would like to run an interactive program using python's subprocess. This interactive program starts and runs for sometime. I would like to read the stdout and process it. After running for sometime, it waits with the prompt for user input. This prompt for instance can be \"tool_name> \". I wanted to detect this situation and source another script.  Here is some basic code, I could come up with. Would be great, if someone can comment further on if this is the correct way to do it.</p>\n\n<pre><code>import subprocess\np = subprocess.Popen(['cli_program' 'a.txt'], stdout=subprocess.PIPE, stderr=subprocess.STDOUT, stdin=subprocess.PIPE)\nwhile True:\n    line = p.stdout.readline()\n    if not line: #this is true only when application exits\n        break\n    elif 'tool_name&gt; ' in line: #wanted to detect the wait state\n        p.stdin.write('source b.txt\\n')\n        p.stdin.flush()\n    else:\n        print line\n</code></pre>\n\n<p>Here, \"cli_program\" is my interactive program which will start executing the script a.txt and waits with the prompt \"tool_name> \".   </p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 955, "user_id": 2012422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa63e9919136deb873c55bd717ac4c96?s=128&d=identicon&r=PG", "display_name": "matias elgart", "link": "https://stackoverflow.com/users/2012422/matias-elgart"}, "edited": false, "score": 0, "creation_date": 1480533665, "post_id": 40896457, "comment_id": 69006814, "body": "instead of deleting them, could you batch-update them all to be 0 or None?"}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "reply_to_user": {"reputation": 955, "user_id": 2012422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa63e9919136deb873c55bd717ac4c96?s=128&d=identicon&r=PG", "display_name": "matias elgart", "link": "https://stackoverflow.com/users/2012422/matias-elgart"}, "edited": false, "score": 0, "creation_date": 1480533766, "post_id": 40896457, "comment_id": 69006882, "body": "In a middle step perhaps yes (if it helps achieve the goal), but at some point I do need the <code>a_d</code> array with those elements removed from <code>a</code>, and the correct indexes of the elements I was tracking."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1480537479, "post_id": 40896457, "comment_id": 69008707, "body": "A minor change: <code>a=np.random.uniform(0,100,(10,1000))</code>"}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1480537592, "post_id": 40896457, "comment_id": 69008771, "body": "Done, thank you @hpaulj."}], "answers": [{"comments": [{"owner": {"reputation": 91645, "user_id": 1744834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ofloC.png?s=128&g=1", "display_name": "Roman Pekar", "link": "https://stackoverflow.com/users/1744834/roman-pekar"}, "edited": false, "score": 1, "creation_date": 1480534197, "post_id": 40896578, "comment_id": 69007068, "body": "I almost finished this function by myself, but how cool is this! :)"}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 0, "creation_date": 1480534827, "post_id": 40896578, "comment_id": 69007347, "body": "This works great, but it apparently does not remove elements from <code>idx_s</code> that are present in <code>idx_d</code> (ie, deleted from <code>a</code>). E.g.: <code>idx_s=[0,  5,  7,  9, 12, 17, 19] ; idx_d= [4, 12, 18]</code> returns <code>[0  4  6  8 11 15 16]</code>. The <code>12</code> element is removed, so it should not be present as <code>11</code>, it should not be there."}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 0, "creation_date": 1480535026, "post_id": 40896578, "comment_id": 69007447, "body": "To explain further: the <code>12</code> element in <code>a</code> will not be present in the new <code>a_d</code> array, so in this case its index needs no updating, it needs to be removed."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 0, "creation_date": 1480535061, "post_id": 40896578, "comment_id": 69007463, "body": "@Gabriel Maybe you should add that part of <code>removing the matching ones</code> to the question :)"}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 0, "creation_date": 1480535128, "post_id": 40896578, "comment_id": 69007494, "body": "I thought I did (&quot;accounting for those elements that were removed&quot;), but obviously I was not clear enough. I&#39;ll edit the question now, thank you."}, {"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 0, "creation_date": 1480537124, "post_id": 40896578, "comment_id": 69008538, "body": "Thank you @Divakar. Am I correct that your answer only works if both <code>idx_s</code> and <code>idx_d</code> are sorted min to max?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 1, "creation_date": 1480537198, "post_id": 40896578, "comment_id": 69008572, "body": "@Gabriel The current version works for sorted <code>idx_d</code>. If its not sorted, we need to use additional arg <code>sorter</code> with it? Do you want me to edit for those cases?"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 2, "last_activity_date": 1480538384, "last_edit_date": 1480538384, "creation_date": 1480533970, "answer_id": 40896578, "question_id": 40896457, "link": "https://stackoverflow.com/questions/40896457/remove-elements-from-array-updating-list-of-stored-indexes-accordingly/40896578#40896578", "title": "Remove elements from array updating list of stored indexes accordingly", "body": "<p>You could use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.searchsorted.html\" rel=\"nofollow noreferrer\"><code>np.searchsorted</code></a> to get the shifts for each element in <code>idx_s</code>  and then simply subtract those from <code>idx_s</code> for the new <em>shifted-down</em> values, like so -</p>\n\n<pre><code>idx_s - np.searchsorted(idx_d, idx_s)\n</code></pre>\n\n<p>If <code>idx_d</code> is not already sorted, we need to feed in a sorted version. Thus, for simplicity assuming these as arrays, we would have -</p>\n\n<pre><code>idx_s = idx_s[~np.in1d(idx_s, idx_d)]\nout = idx_s - np.searchsorted(np.sort(idx_d), idx_s)\n</code></pre>\n\n<p>A sample run to help out getting a better picture -</p>\n\n<pre><code>In [530]: idx_s\nOut[530]: array([19,  5, 17,  9, 12,  7,  0])\n\nIn [531]: idx_d\nOut[531]: array([12,  4, 18])\n\nIn [532]: idx_s = idx_s[~np.in1d(idx_s, idx_d)] # Remove matching ones\n\nIn [533]: idx_s\nOut[533]: array([19,  5, 17,  9,  7,  0])\n\nIn [534]: idx_s - np.searchsorted(np.sort(idx_d), idx_s) # Updated idx_s\nOut[534]: array([16,  4, 15,  8,  6,  0])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 0, "creation_date": 1480537288, "post_id": 40897236, "comment_id": 69008620, "body": "Thank you Roman. Would you mind if I edit your answer to remove the <code>&gt;&gt;&gt;</code> and the <code>...</code>? It makes it easier to copy/paste the code."}, {"owner": {"reputation": 91645, "user_id": 1744834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ofloC.png?s=128&g=1", "display_name": "Roman Pekar", "link": "https://stackoverflow.com/users/1744834/roman-pekar"}, "reply_to_user": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 1, "creation_date": 1480539377, "post_id": 40897236, "comment_id": 69009791, "body": "@Gabriel sure go ahead"}], "tags": [], "owner": {"reputation": 91645, "user_id": 1744834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ofloC.png?s=128&g=1", "display_name": "Roman Pekar", "link": "https://stackoverflow.com/users/1744834/roman-pekar"}, "is_accepted": false, "score": 1, "last_activity_date": 1480540082, "last_edit_date": 1480540082, "creation_date": 1480536507, "answer_id": 40897236, "question_id": 40896457, "link": "https://stackoverflow.com/questions/40896457/remove-elements-from-array-updating-list-of-stored-indexes-accordingly/40897236#40897236", "title": "Remove elements from array updating list of stored indexes accordingly", "body": "<pre><code>idx_s = [0, 5, 7, 9, 12, 17, 19]\nidx_d = [4, 12, 18]\n\ndef worker(a, v, i=0):\n    if not a:\n        return []\n    elif not v:\n        return []\n    elif a[0] == v[0]:\n        return worker(a[1:], v[1:], i+1)\n    elif a[0] &lt; v[0]:\n        return [a[0]-i] + worker(a[1:], v, i)\n    else:\n        return [a[0]-i-1] + worker(a[1:], v[1:], i+1)\n\nworker(idx_s, idx_d)\n# [0, 5, 6, 8, 15, 16]\n</code></pre>\n"}], "owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 40896578, "answer_count": 2, "score": 1, "last_activity_date": 1480540082, "creation_date": 1480533534, "last_edit_date": 1480537577, "question_id": 40896457, "link": "https://stackoverflow.com/questions/40896457/remove-elements-from-array-updating-list-of-stored-indexes-accordingly", "title": "Remove elements from array updating list of stored indexes accordingly", "body": "<p>Consider a <code>numpy</code> array of the form:</p>\n\n<pre><code>&gt; a = np.random.uniform(0., 100., (10, 1000))\n</code></pre>\n\n<p>and a list of indexes to elements in that array that I want to keep track of:</p>\n\n<pre><code>&gt; idx_s = [0, 5, 7, 9, 12, 17, 19, 32, 33, 35, 36, 39, 40, 41, 42, 45, 47, 51, 53, 57, 59, 60, 61, 62, 63, 65, 66, 70, 71, 73, 75, 81, 83, 85, 87, 88, 89, 90, 91, 93, 94, 96, 98, 100, 106, 107, 108, 118, 119, 121, 124, 126, 127, 128, 129, 133, 135, 138, 142, 143, 144, 146, 147, 150]\n</code></pre>\n\n<p>I also have a list of indexes of elements I need to remove from <code>a</code>:</p>\n\n<pre><code>&gt; idx_d = [4, 12, 18, 20, 21, 22, 26, 28, 29, 31, 37, 43, 48, 54, 58, 74, 80, 86, 99, 109, 110, 113, 117, 134, 139, 140, 141, 148, 154, 156, 160, 166, 169, 175, 183, 194, 198, 199, 219, 220, 237, 239, 241, 250]\n</code></pre>\n\n<p>which I delete with:</p>\n\n<pre><code>&gt; a_d = np.delete(arr, idx_d, axis=1)\n</code></pre>\n\n<p>But this process alters the indexes of elements in <code>a_d</code>. The indexes in <code>idx_s</code> no longer point in <code>a_d</code> to the same elements in <code>a</code>, since <code>np.delete()</code> moved them. For example: if I delete the element of index <code>4</code> from <code>a</code>, then all indexes after <code>4</code> in <code>idx_s</code> are now displaced by 1 to the right in <code>a_d</code>.</p>\n\n<pre><code>                 v Index 5 points to 'f' in a\n       0 1 2 3 4 5 6\na   -&gt; a b c d e f g ... # Remove 4th element 'e' from a\na_d -&gt; a b c d f g h ... # Now index 5 no longer points to 'f' in a_d, but to 'g'\n       0 1 2 3 4 5 6\n</code></pre>\n\n<p>How do I update the <code>idx_s</code> list of indexes, so that the same elements that were pointed in <code>a</code> are pointed in <code>a_d</code>?</p>\n\n<p>In the case of an element that is present in <code>idx_s</code> that is <strong>also present</strong> in <code>idx_d</code> (and thus removed from <code>a</code> and not present in <code>a_d</code>) its index should also be discarded.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 1, "creation_date": 1480533541, "post_id": 40896420, "comment_id": 69006730, "body": "Why are you trying to simulate a <code>dict()</code> with a <code>list()</code>?"}, {"owner": {"reputation": 381, "user_id": 5165579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab61b9750c52dc2c6c1a3abba3747614?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Montez", "link": "https://stackoverflow.com/users/5165579/nathan-montez"}, "edited": false, "score": 0, "creation_date": 1480533564, "post_id": 40896420, "comment_id": 69006739, "body": "Have you tried the <a href=\"http://book.pythontips.com/en/latest/map_filter.html#map\" rel=\"nofollow noreferrer\">map</a> function?"}], "answers": [{"tags": [], "owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "is_accepted": true, "score": 4, "last_activity_date": 1480533619, "creation_date": 1480533619, "answer_id": 40896488, "question_id": 40896420, "link": "https://stackoverflow.com/questions/40896420/how-to-replace-an-integer-with-replace/40896488#40896488", "title": "How to replace an integer with .replace()", "body": "<p>I'm interpreting your question as, \"given a list of numbers between 1 and 26, how do I get a list of characters between a and z?\". You could do:</p>\n\n<pre><code>count = [chr(w + ord(\"a\") - 1) for w in count]\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>&gt;&gt;&gt; count = [8, 5, 12, 12, 15, 23, 15, 18, 12, 4]\n&gt;&gt;&gt; count = [chr(w + ord(\"a\") - 1) for w in count]\n&gt;&gt;&gt; count\n['h', 'e', 'l', 'l', 'o', 'w', 'o', 'r', 'l', 'd']\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5565359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0482e2b5c881d283967c521035590d1e?s=128&d=identicon&r=PG&f=1", "display_name": "Einstein.py", "link": "https://stackoverflow.com/users/5565359/einstein-py"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 40896488, "answer_count": 1, "score": 0, "last_activity_date": 1480537459, "creation_date": 1480533405, "last_edit_date": 1480537459, "question_id": 40896420, "link": "https://stackoverflow.com/questions/40896420/how-to-replace-an-integer-with-replace", "title": "How to replace an integer with .replace()", "body": "<p>I have a counter:</p>\n\n<pre><code>count = []\n\ndef count_up(digit_1, digit_2, digit_3, digit_4, digit_5, digit_6,     digit_7):\n    if(tick = True):\n        count = []\n        digit_1 = digit_1 + 1\n        if(digit_1 == 27):\n            digit_1 = 0\n            digit_2 += 1\n            if(digit_2 == 27):\n                digit_2 = 0\n                digit_3 += 1\n                if(digit_3 == 27):\n                    digit_3 = 0\n                    digit_4 += 1\n                    if(digit_4 == 26):\n                        digit_4 = 0\n                        digit_5 += 1\n                        if(digit_5 == 26):\n                            digit_5 = 0\n\n    count.append(digit_1)\n    count.append(digit_2)\n    count.append(digit_3)\n    count.append(digit_4)\n    count.append(digit_5)\n    print count\n    count = []\n</code></pre>\n\n<p>and I want to change each digit in the list to the corresponding letter (1 = a, 26 = z)</p>\n\n<p>I have tried .replace() but it comes up with:</p>\n\n<blockquote>\n  <p>File \"/Users/Johnpaulbeer/pythonpractice/test.py\", line 99, in >count_decoder\n     count = [w.replace(1, 'a') for w in count]\n  AttributeError: 'int' object has no attribute 'replace'</p>\n</blockquote>\n\n<p>What else can I do, or if not then how do I change the integer into a string?</p>\n"}, {"tags": ["python", "dictionary", "runtime-error"], "comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 3, "creation_date": 1480533982, "post_id": 40896416, "comment_id": 69006972, "body": "Not directly related to your problem, but I&#39;m concerned about your function definition that contains <code>cluster=[]</code>. Are you aware of the <a href=\"http://stackoverflow.com/questions/1132941/least-astonishment-and-the-mutable-default-argument\">default mutable argument gotcha</a>? It can cause some hard-to-detect problems if it catches you by surprise."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1480534156, "post_id": 40896416, "comment_id": 69007048, "body": "should the last line of <code>cluster_dfs</code> have a <code>return</code>?  Otherwise you&#39;ll be adding <code>None</code> s into <code>self.clusters</code>"}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1480534341, "post_id": 40896416, "comment_id": 69007129, "body": "I don&#39;t see any obvious dict modification in the code you&#39;ve shared. Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? I&#39;d be quite interested in replicating the error on my own machine."}], "answers": [{"comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1480534879, "post_id": 40896646, "comment_id": 69007366, "body": "Certainly indexing a defaultdict with a key it doesn&#39;t yet contain would cause its size to change. But it looks like <code>node</code> is always already a key in <code>mst</code>, since it originally gets its value from <code>for node in mst.keys()</code>... I agree that more context would be very useful."}, {"owner": {"reputation": 192, "user_id": 1650345, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/21e2ede2aeeeb53b7291e06e91cda29f?s=128&d=identicon&r=PG", "display_name": "everial", "link": "https://stackoverflow.com/users/1650345/everial"}, "reply_to_user": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1480535326, "post_id": 40896646, "comment_id": 69007595, "body": "Agreed it&#39;d be surprising; I was imagining a situation where some node thinks it has a neighbor that (for whatever reason) didn&#39;t end up in the original <code>mst</code> and it&#39;s dying on one of the recursive calls. edit: sniped by Kevin =)"}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1480535337, "post_id": 40896646, "comment_id": 69007602, "body": "Oops, I see that <code>node</code> can also come from <code>for neighbor in...</code> in the recursive case. So this is still a real possibility."}, {"owner": {"reputation": 192, "user_id": 1650345, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/21e2ede2aeeeb53b7291e06e91cda29f?s=128&d=identicon&r=PG", "display_name": "everial", "link": "https://stackoverflow.com/users/1650345/everial"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1480535700, "post_id": 40896646, "comment_id": 69007813, "body": "@wwii I&#39;m not following how that snippet relates (other than being more code that uses a <code>defaultdict</code>--might elaborating?"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1480536226, "post_id": 40896646, "comment_id": 69008081, "body": "Feel free to delete.  It sounded like you were not sure if it was possible -  <code>...could add node to self.mst. If this is the issue ..</code>, so I provided an example that was relavent to your uncertainty. FWIW I briefly searched the help center to see if there were restrictions on <i>improving</i> someone else&#39;s answer and didn&#39;t see any.  It wasn&#39;t meant to step on anyones toes."}, {"owner": {"reputation": 1245, "user_id": 4595837, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0Y0M8.jpg?s=128&g=1", "display_name": "Jack Ryan", "link": "https://stackoverflow.com/users/4595837/jack-ryan"}, "edited": false, "score": 0, "creation_date": 1480539633, "post_id": 40896646, "comment_id": 69009933, "body": "Apologies for the delay in responding @all, and especially apologize for asking what seems to be a debugging question. Anyways, you were exactly right. When I constructed the MST (Prim&#39;s), I mapped each source node to its minimum neighbor but I forgot to map it back the other way (i.e. <code>mst[dest][source] = edge_weight</code>. So the MST did not have all of the vertices from the original graph."}], "tags": [], "owner": {"reputation": 192, "user_id": 1650345, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/21e2ede2aeeeb53b7291e06e91cda29f?s=128&d=identicon&r=PG", "display_name": "everial", "link": "https://stackoverflow.com/users/1650345/everial"}, "is_accepted": true, "score": 4, "last_activity_date": 1480536428, "last_edit_date": 1480536428, "creation_date": 1480534266, "answer_id": 40896646, "question_id": 40896416, "link": "https://stackoverflow.com/questions/40896416/dictionary-size-changed-during-iteration/40896646#40896646", "title": "Dictionary size changed during iteration", "body": "<blockquote>\n  <p>Does anyone see a spot where I could maybe be accidentally modifying the dict?</p>\n</blockquote>\n\n<p>Given <code>mst</code> is a <code>defaultdict</code>, one possible suspect is:</p>\n\n<pre><code>for neighbor in self.mst[node].keys():\n</code></pre>\n\n<p>Since that could add <code>node</code> to <code>self.mst</code>. <em>If</em> this is the issue it leaves the question of <em>how</em>; for that more of the context / <code>mst</code> setup might help.</p>\n\n<hr>\n\n<p>Seems like it does, accessing a non-existing key to a defaultdict will add the key. .... an mcve..</p>\n\n<pre><code>d = collections.defaultdict(int)\nprint(d)\nkeys = ['a','b','c']\nfor key in keys:\n    print(key, hex(d[key]))\nprint(d)\n\n&gt;&gt;&gt; \ndefaultdict(&lt;class 'int'&gt;, {})\na 0x0\nb 0x0\nc 0x0\ndefaultdict(&lt;class 'int'&gt;, {'a': 0, 'c': 0, 'b': 0})\n&gt;&gt;&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 2, "last_activity_date": 1480535126, "creation_date": 1480535126, "answer_id": 40896873, "question_id": 40896416, "link": "https://stackoverflow.com/questions/40896416/dictionary-size-changed-during-iteration/40896873#40896873", "title": "Dictionary size changed during iteration", "body": "<p>I guess the error is here:</p>\n\n<pre><code>for neighbor in self.mst[node].keys():\n                     ^^^^^^^^^\n    if neighbor not in visited:\n        self.cluster_dfs(mst, neighbor, visited, cluster)\n                         ^^^\n</code></pre>\n\n<p><code>mst[node]</code> has key <code>neighbor</code> but that doesn't need to be true for <code>mst</code> itself</p>\n"}], "owner": {"reputation": 1245, "user_id": 4595837, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0Y0M8.jpg?s=128&g=1", "display_name": "Jack Ryan", "link": "https://stackoverflow.com/users/4595837/jack-ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 40896646, "answer_count": 2, "score": 0, "last_activity_date": 1480536428, "creation_date": 1480533389, "question_id": 40896416, "link": "https://stackoverflow.com/questions/40896416/dictionary-size-changed-during-iteration", "title": "Dictionary size changed during iteration", "body": "<p>I cannot, for the life of me, figure out how Python thinks my <code>dict</code> is changing size during iteration. I have tried reworking the code a few times, and cannot figure out where I would be modifying the dictionary.</p>\n\n<p><strong>Overview</strong>: I am working on a hierarchical clustering algorithm where I build an MST out of a graph I have created, and then remove edges that are weaker than a specified threshold. This all seems to work fine, but now when I am going through and computing the <code>clusters</code> (a list of lists), I run into this really odd error. Below is my code: </p>\n\n<pre><code>def compute_clusters(self):\n    \"\"\" wrapper function to compute clusters via DFS \"\"\"\n    mst = self.mst\n    total_nodes = len(mst.keys())\n    visited = set()\n    for node in mst.keys():\n        if node not in visited:\n            self.clusters += self.cluster_dfs(mst, node, visited)\n\ndef cluster_dfs(self, mst, node, visited, cluster=[]):\n    \"\"\" creates clusters through dfs \"\"\"\n    cluster.append(node)\n    if self.dfs_finished(mst, node, visited):\n        return cluster\n    for neighbor in self.mst[node].keys():\n        if neighbor not in visited:\n            visited.add(neighbor)\n            cluster.append(neighbor)\n            self.cluster_dfs(mst, neighbor, visited, cluster)\n\ndef dfs_finished(self, mst, node, visited):\n    for neighbor in self.mst[node].keys():\n        if neighbor not in visited:\n            return False\n    return True\n</code></pre>\n\n<p>Basically, <code>mst</code> is a copy of my MST (defaultdict(dict)), it maps all of the nodes to their neighbors:weights.</p>\n\n<p>I figured an easy approach would be to perform a DFS from each node in the MST that has not been touched yet by the DFS. By this logic, the recursion would only return after all elements in that particular cluster have been visited. And then it goes to the next cluster and does a DFS. </p>\n\n<p>My RunTime error is: </p>\n\n<pre><code>Traceback (most recent call last):\nFile \"cluster.py\", line 91, in &lt;module&gt;\n  cluster.build_clusters()\nFile \"cluster.py\", line 25, in build_clusters\n  self.compute_clusters() # compute final clusters\nFile \"cluster.py\", line 66, in compute_clusters\n  for node in mst.keys():\nRuntimeError: dictionary changed size during iteration\n</code></pre>\n\n<p>Does anyone see a spot where I could maybe be accidentally modifying the <code>dict</code>? Apologies if it is a dumb mistake - I am a bit tired.</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 2369, "user_id": 4079962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqPCN.png?s=128&g=1", "display_name": "Levi Noecker", "link": "https://stackoverflow.com/users/4079962/levi-noecker"}, "edited": false, "score": 0, "creation_date": 1480692880, "post_id": 40896407, "comment_id": 69082732, "body": "A minimal code example would be very helpful."}, {"owner": {"reputation": 71, "user_id": 7232607, "user_type": "registered", "profile_image": "https://graph.facebook.com/602341193286524/picture?type=large", "display_name": "Sukanya Acharya", "link": "https://stackoverflow.com/users/7232607/sukanya-acharya"}, "reply_to_user": {"reputation": 2369, "user_id": 4079962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqPCN.png?s=128&g=1", "display_name": "Levi Noecker", "link": "https://stackoverflow.com/users/4079962/levi-noecker"}, "edited": false, "score": 0, "creation_date": 1480825777, "post_id": 40896407, "comment_id": 69120381, "body": "Click on &quot;script i am trying&quot;... I have given there."}], "owner": {"reputation": 71, "user_id": 7232607, "user_type": "registered", "profile_image": "https://graph.facebook.com/602341193286524/picture?type=large", "display_name": "Sukanya Acharya", "link": "https://stackoverflow.com/users/7232607/sukanya-acharya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1480533350, "creation_date": 1480533350, "question_id": 40896407, "link": "https://stackoverflow.com/questions/40896407/click-multiple-webpages-inside-another-webpage-python-3-5-using-selenium-in-wi", "title": "Click multiple Webpages inside another Webpage - Python 3.5 using selenium in Windows 7 (64-bit)", "body": "<p><a href=\"https://i.stack.imgur.com/lRk50.png\" rel=\"nofollow noreferrer\">script I am trying</a></p>\n\n<p>In the website for Foreclosure, I am first entering the city names looping it through i in city. Inside that loop I need to click on \"View Details\" button for all the foreclosure properties.\nI ended up with moving to 1st city, clicking on the 1st \"View Details\" and then moving on to the next city and so on.\nMy 2nd loop of clicking \"View Details\" is somehow forgetting which URL to start again and ends up with going back to the 1st loop.</p>\n\n<p>Can someone help me with how to write the loop where I can click and enter inside every \"View Details\" button and then browsing back. It will move to the 2nd city only when all the results of 1st city are being checked.</p>\n\n<p>P.S. I am using Selenium in Python 3.5 and Windows 7 (64-bit).\nLink used : <a href=\"https://www.foreclosure.com/\" rel=\"nofollow noreferrer\">https://www.foreclosure.com/</a></p>\n"}, {"tags": ["python", "sql", "sql-server", "python-3.x", "pymssql"], "comments": [{"owner": {"reputation": 1576, "user_id": 5453515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41cae4ee9e62e14df6757fc7a364cb2?s=128&d=identicon&r=PG&f=1", "display_name": "Stephane Martin", "link": "https://stackoverflow.com/users/5453515/stephane-martin"}, "edited": false, "score": 0, "creation_date": 1480539703, "post_id": 40896380, "comment_id": 69009970, "body": "Use the Force and an ORM, Luke. sqlalchemy is on the light side and has support for pymssql."}], "answers": [{"tags": [], "owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "is_accepted": true, "score": 1, "last_activity_date": 1480635264, "creation_date": 1480635264, "answer_id": 40922336, "question_id": 40896380, "link": "https://stackoverflow.com/questions/40896380/convert-query-result-types-when-using-fetchall/40922336#40922336", "title": "Convert query result types when using fetchall()", "body": "<blockquote>\n  <p>For example I would need the convert the list ... into the [literal] SQL INSERT statement ...</p>\n</blockquote>\n\n<p>Actually, no you wouldn't, at least not if you really did use a parameterized query for the INSERT. Python's DB-API specifies generic parameter placeholders and relies on the database access layer (e.g., pymssql) to figure out how to handle parameters based on the type of parameter <em>values</em> supplied. </p>\n\n<p>So, you can simply take the list of rows (which contain values of the appropriate type) from the source table and use those rows as parameter values for an <code>executemany</code> on the target table, like so:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code># set up test\ncreate_stmt = \"\"\"\\\nCREATE TABLE {} (\n    intCol INT PRIMARY KEY,\n    nvarcharCol NVARCHAR(50),\n    datetimeCol DATETIME,\n    decimalCol DECIMAL(18,4),\n    nullableCol INT\n    )\n\"\"\"\ncrsr.execute(create_stmt.format(\"#MainTable\"))\nload_test_data = \"\"\"\\\nINSERT INTO #MainTable (intCol, nvarcharCol, datetimeCol, decimalCol) VALUES\n    (1, N'test 1', '2016-01-01', 1.11),\n    (2, N'test 2', '2016-02-02', 2.22),\n    (3, N'test 3', '2016-03-03', 3.33)\n\"\"\"\ncrsr.execute(load_test_data)\ncrsr.execute(create_stmt.format(\"#BackupTable\"))\n\n# perform the copy ...\nread_stmt = \"\"\"\\\nSELECT * FROM #MainTable\n\"\"\"\ncrsr.execute(read_stmt)\nsource_rows = crsr.fetchall()\n# ... using a true parameterized query ...\nwrite_stmt = \"\"\"\\\nINSERT INTO #BackupTable\n        (intCol, nvarcharCol, datetimeCol, decimalCol, nullableCol)\n    VALUES\n        (%s, %s, %s, %s, %s)\n\"\"\"\n# ... inserting all rows at once using list returned by fetchall() from source table\ncrsr.executemany(write_stmt, source_rows)\n\n#check results\ncrsr.execute(\"SELECT * FROM #BackupTable\")\nprint(\"Rows from #BackupTable:\")\nfor row in crsr.fetchall():\n    print(row)\n</code></pre>\n\n<p>... producing:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Rows from #BackupTable:\n(1, 'test 1', datetime.datetime(2016, 1, 1, 0, 0), Decimal('1.1100'), None)\n(2, 'test 2', datetime.datetime(2016, 2, 2, 0, 0), Decimal('2.2200'), None)\n(3, 'test 3', datetime.datetime(2016, 3, 3, 0, 0), Decimal('3.3300'), None)\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 4416101, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Zr8C0.jpg?s=128&g=1", "display_name": "DatumPlane", "link": "https://stackoverflow.com/users/4416101/datumplane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "accepted_answer_id": 40922336, "answer_count": 1, "score": 1, "last_activity_date": 1480635264, "creation_date": 1480533240, "last_edit_date": 1480634502, "question_id": 40896380, "link": "https://stackoverflow.com/questions/40896380/convert-query-result-types-when-using-fetchall", "title": "Convert query result types when using fetchall()", "body": "<p>I am writing a Python database data backup script targeting an instance of Microsoft SQL Server 2012. My goal is to be able to easily backup a database's data to an existing empty schema. I am using pymssql as my database interface. </p>\n\n<p>Here is the section of code I am having problems with: </p>\n\n<pre><code>def run_migrate(s_conn, d_conn): \n    source_cursor = s_conn.cursor()\n    dest_cursor = d_conn.cursor()\n    source_cursor.execute(\"SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES order by TABLE_NAME asc\")\n    res_tables = source_cursor.fetchall()\n    tables = [i[0] for i in res_tables]\n    for i in range(len(tables)): \n        query_columns = \"SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = '\" + str(tables[i]) + \"'\"\n        l.log.debug(query_columns)\n        source_cursor.execute(query_columns)\n        res_columns = source_cursor.fetchall()\n        columns = [i[0] for i in res_columns]\n        query_data = 'SELECT * FROM ' + tables[i]\n        l.log.debug(query_data)\n        source_cursor.execute(query_data)\n        res_results = source_cursor.fetchall()\n        l.log.info('Extracted ' + str(len(results))  + ' results from ' + tables[i])\n</code></pre>\n\n<p>My problem is that when i use <code>res_results = fetchall()</code> I get back a list that looks like the following: </p>\n\n<pre><code>&lt;class 'list'&gt;: [(Decimal('102'), datetime.datetime(2016, 3, 29, 13, 53, 20, 593000), '1459281200561077E9152BF85FCBC33E6689E9DCB61705985137701459280466827', 'cable summary ', 3600000, 0, None, None, None, None, None, None, 0, 0, None, None, Decimal('333'), Decimal('100'), Decimal('107'), None, None)]\n</code></pre>\n\n<p>I am looking to form a parameterized INSERT statement out of this data to run against <code>d_conn.execute()</code> but how can I convert the data types on the fly without knowing beforehand each columns data type and how to handle it? </p>\n\n<p>For example I would need the convert the list:</p>\n\n<pre><code>&lt;class 'list'&gt;: [\n(Decimal('102'), \ndatetime.datetime(2016, 3, 29, 13, 53, 20, 593000),\n'1459281200561077E9152BF85FCBC33E6689E9DCB61705985137701459280466827', \n'cable summary ', \n3600000, \n0, \nNone, \nNone, \nNone, \nNone, \nNone, \nNone, \n0, \n0, \nNone, \nNone, \nDecimal('333'), \nDecimal('100'), \nDecimal('107'), \nNone, \nNone)]\n</code></pre>\n\n<p>into the SQL INSERT statement: </p>\n\n<pre><code>INSERT INTO [ALERT] VALUES\n   (102\n   ,'2016-03-29 13:53:20.593'\n   ,1\n   ,'cable summary'\n   ,3600000\n   ,0\n   ,NULL\n   ,NULL\n   ,NULL\n   ,NULL\n   ,NULL\n   ,NULL\n   ,0\n   ,0\n   ,NULL\n   ,NULL\n   ,333\n   ,100\n   ,107\n   ,NULL\n   ,NULL)\n</code></pre>\n\n<p>I want to be able to do this with any datatypes I pass it as I have a few hundred tables to do this with and don't want to write a function for each one. Any help is appreciated. </p>\n"}]